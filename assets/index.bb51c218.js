function lS(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(l){if(l!=="default"&&!(l in e)){var c=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:function(){return r[l]}})}})}),Object.freeze(e)}const uS=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function r(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerpolicy&&(f.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?f.credentials="include":c.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=r(c);fetch(c.href,f)}};uS();var Xs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function gy(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var l=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:function(){return e[r]}})}),t}function zd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yt={exports:{}},Wn={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var C_=Object.getOwnPropertySymbols,cS=Object.prototype.hasOwnProperty,hS=Object.prototype.propertyIsEnumerable;function fS(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function dS(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var l=Object.getOwnPropertyNames(t).map(function(f){return t[f]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(f){c[f]=f}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var xw=dS()?Object.assign:function(e,t){for(var r,l=fS(e),c,f=1;f<arguments.length;f++){r=Object(arguments[f]);for(var g in r)cS.call(r,g)&&(l[g]=r[g]);if(C_){c=C_(r);for(var s=0;s<c.length;s++)hS.call(r,c[s])&&(l[c[s]]=r[c[s]])}}return l};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=xw,Wc=60103,_w=60106;Wn.Fragment=60107;Wn.StrictMode=60108;Wn.Profiler=60114;var bw=60109,ww=60110,Ew=60112;Wn.Suspense=60113;var Sw=60115,Cw=60116;if(typeof Symbol=="function"&&Symbol.for){var ia=Symbol.for;Wc=ia("react.element"),_w=ia("react.portal"),Wn.Fragment=ia("react.fragment"),Wn.StrictMode=ia("react.strict_mode"),Wn.Profiler=ia("react.profiler"),bw=ia("react.provider"),ww=ia("react.context"),Ew=ia("react.forward_ref"),Wn.Suspense=ia("react.suspense"),Sw=ia("react.memo"),Cw=ia("react.lazy")}var T_=typeof Symbol=="function"&&Symbol.iterator;function pS(e){return e===null||typeof e!="object"?null:(e=T_&&e[T_]||e["@@iterator"],typeof e=="function"?e:null)}function $f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Aw={};function Zc(e,t,r){this.props=e,this.context=t,this.refs=Aw,this.updater=r||Tw}Zc.prototype.isReactComponent={};Zc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error($f(85));this.updater.enqueueSetState(this,e,t,"setState")};Zc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Iw(){}Iw.prototype=Zc.prototype;function vy(e,t,r){this.props=e,this.context=t,this.refs=Aw,this.updater=r||Tw}var xy=vy.prototype=new Iw;xy.constructor=vy;yy(xy,Zc.prototype);xy.isPureReactComponent=!0;var _y={current:null},Pw=Object.prototype.hasOwnProperty,kw={key:!0,ref:!0,__self:!0,__source:!0};function Mw(e,t,r){var l,c={},f=null,g=null;if(t!=null)for(l in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(f=""+t.key),t)Pw.call(t,l)&&!kw.hasOwnProperty(l)&&(c[l]=t[l]);var s=arguments.length-2;if(s===1)c.children=r;else if(1<s){for(var _=Array(s),E=0;E<s;E++)_[E]=arguments[E+2];c.children=_}if(e&&e.defaultProps)for(l in s=e.defaultProps,s)c[l]===void 0&&(c[l]=s[l]);return{$$typeof:Wc,type:e,key:f,ref:g,props:c,_owner:_y.current}}function mS(e,t){return{$$typeof:Wc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function by(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wc}function gS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var A_=/\/+/g;function Z0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gS(""+e.key):t.toString(36)}function ip(e,t,r,l,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(f){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Wc:case _w:g=!0}}if(g)return g=e,c=c(g),e=l===""?"."+Z0(g,0):l,Array.isArray(c)?(r="",e!=null&&(r=e.replace(A_,"$&/")+"/"),ip(c,t,r,"",function(E){return E})):c!=null&&(by(c)&&(c=mS(c,r+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(A_,"$&/")+"/")+e)),t.push(c)),1;if(g=0,l=l===""?".":l+":",Array.isArray(e))for(var s=0;s<e.length;s++){f=e[s];var _=l+Z0(f,s);g+=ip(f,t,r,_,c)}else if(_=pS(e),typeof _=="function")for(e=_.call(e),s=0;!(f=e.next()).done;)f=f.value,_=l+Z0(f,s++),g+=ip(f,t,r,_,c);else if(f==="object")throw t=""+e,Error($f(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return g}function Ld(e,t,r){if(e==null)return e;var l=[],c=0;return ip(e,l,"","",function(f){return t.call(r,f,c++)}),l}function yS(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var zw={current:null};function bs(){var e=zw.current;if(e===null)throw Error($f(321));return e}var vS={ReactCurrentDispatcher:zw,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_y,IsSomeRendererActing:{current:!1},assign:yy};Wn.Children={map:Ld,forEach:function(e,t,r){Ld(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ld(e,function(){t++}),t},toArray:function(e){return Ld(e,function(t){return t})||[]},only:function(e){if(!by(e))throw Error($f(143));return e}};Wn.Component=Zc;Wn.PureComponent=vy;Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vS;Wn.cloneElement=function(e,t,r){if(e==null)throw Error($f(267,e));var l=yy({},e.props),c=e.key,f=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,g=_y.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(_ in t)Pw.call(t,_)&&!kw.hasOwnProperty(_)&&(l[_]=t[_]===void 0&&s!==void 0?s[_]:t[_])}var _=arguments.length-2;if(_===1)l.children=r;else if(1<_){s=Array(_);for(var E=0;E<_;E++)s[E]=arguments[E+2];l.children=s}return{$$typeof:Wc,type:e.type,key:c,ref:f,props:l,_owner:g}};Wn.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ww,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:bw,_context:e},e.Consumer=e};Wn.createElement=Mw;Wn.createFactory=function(e){var t=Mw.bind(null,e);return t.type=e,t};Wn.createRef=function(){return{current:null}};Wn.forwardRef=function(e){return{$$typeof:Ew,render:e}};Wn.isValidElement=by;Wn.lazy=function(e){return{$$typeof:Cw,_payload:{_status:-1,_result:e},_init:yS}};Wn.memo=function(e,t){return{$$typeof:Sw,type:e,compare:t===void 0?null:t}};Wn.useCallback=function(e,t){return bs().useCallback(e,t)};Wn.useContext=function(e,t){return bs().useContext(e,t)};Wn.useDebugValue=function(){};Wn.useEffect=function(e,t){return bs().useEffect(e,t)};Wn.useImperativeHandle=function(e,t,r){return bs().useImperativeHandle(e,t,r)};Wn.useLayoutEffect=function(e,t){return bs().useLayoutEffect(e,t)};Wn.useMemo=function(e,t){return bs().useMemo(e,t)};Wn.useReducer=function(e,t,r){return bs().useReducer(e,t,r)};Wn.useRef=function(e){return bs().useRef(e)};Wn.useState=function(e){return bs().useState(e)};Wn.version="17.0.2";yt.exports=Wn;var Lw=yt.exports,Am={exports:{}},No={},Ow={exports:{}},Rw={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,l,c;if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,s=g.now();e.unstable_now=function(){return g.now()-s}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var _=null,E=null,C=function(){if(_!==null)try{var ce=e.unstable_now();_(!0,ce),_=null}catch(ke){throw setTimeout(C,0),ke}};t=function(ce){_!==null?setTimeout(t,0,ce):(_=ce,setTimeout(C,0))},r=function(ce,ke){E=setTimeout(ce,ke)},l=function(){clearTimeout(E)},e.unstable_shouldYield=function(){return!1},c=e.unstable_forceFrameRate=function(){}}else{var S=window.setTimeout,I=window.clearTimeout;if(typeof console!="undefined"){var D=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof D!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var J=!1,X=null,G=-1,U=5,H=0;e.unstable_shouldYield=function(){return e.unstable_now()>=H},c=function(){},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ce?Math.floor(1e3/ce):5};var $=new MessageChannel,ne=$.port2;$.port1.onmessage=function(){if(X!==null){var ce=e.unstable_now();H=ce+U;try{X(!0,ce)?ne.postMessage(null):(J=!1,X=null)}catch(ke){throw ne.postMessage(null),ke}}else J=!1},t=function(ce){X=ce,J||(J=!0,ne.postMessage(null))},r=function(ce,ke){G=S(function(){ce(e.unstable_now())},ke)},l=function(){I(G),G=-1}}function W(ce,ke){var Te=ce.length;ce.push(ke);e:for(;;){var Pe=Te-1>>>1,De=ce[Pe];if(De!==void 0&&0<k(De,ke))ce[Pe]=ke,ce[Te]=De,Te=Pe;else break e}}function F(ce){return ce=ce[0],ce===void 0?null:ce}function w(ce){var ke=ce[0];if(ke!==void 0){var Te=ce.pop();if(Te!==ke){ce[0]=Te;e:for(var Pe=0,De=ce.length;Pe<De;){var Ue=2*(Pe+1)-1,qe=ce[Ue],ot=Ue+1,dt=ce[ot];if(qe!==void 0&&0>k(qe,Te))dt!==void 0&&0>k(dt,qe)?(ce[Pe]=dt,ce[ot]=Te,Pe=ot):(ce[Pe]=qe,ce[Ue]=Te,Pe=Ue);else if(dt!==void 0&&0>k(dt,Te))ce[Pe]=dt,ce[ot]=Te,Pe=ot;else break e}}return ke}return null}function k(ce,ke){var Te=ce.sortIndex-ke.sortIndex;return Te!==0?Te:ce.id-ke.id}var B=[],q=[],K=1,fe=null,ge=3,xe=!1,ee=!1,re=!1;function ie(ce){for(var ke=F(q);ke!==null;){if(ke.callback===null)w(q);else if(ke.startTime<=ce)w(q),ke.sortIndex=ke.expirationTime,W(B,ke);else break;ke=F(q)}}function le(ce){if(re=!1,ie(ce),!ee)if(F(B)!==null)ee=!0,t(_e);else{var ke=F(q);ke!==null&&r(le,ke.startTime-ce)}}function _e(ce,ke){ee=!1,re&&(re=!1,l()),xe=!0;var Te=ge;try{for(ie(ke),fe=F(B);fe!==null&&(!(fe.expirationTime>ke)||ce&&!e.unstable_shouldYield());){var Pe=fe.callback;if(typeof Pe=="function"){fe.callback=null,ge=fe.priorityLevel;var De=Pe(fe.expirationTime<=ke);ke=e.unstable_now(),typeof De=="function"?fe.callback=De:fe===F(B)&&w(B),ie(ke)}else w(B);fe=F(B)}if(fe!==null)var Ue=!0;else{var qe=F(q);qe!==null&&r(le,qe.startTime-ke),Ue=!1}return Ue}finally{fe=null,ge=Te,xe=!1}}var Ie=c;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){ee||xe||(ee=!0,t(_e))},e.unstable_getCurrentPriorityLevel=function(){return ge},e.unstable_getFirstCallbackNode=function(){return F(B)},e.unstable_next=function(ce){switch(ge){case 1:case 2:case 3:var ke=3;break;default:ke=ge}var Te=ge;ge=ke;try{return ce()}finally{ge=Te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Ie,e.unstable_runWithPriority=function(ce,ke){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Te=ge;ge=ce;try{return ke()}finally{ge=Te}},e.unstable_scheduleCallback=function(ce,ke,Te){var Pe=e.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Pe+Te:Pe):Te=Pe,ce){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Te+De,ce={id:K++,callback:ke,priorityLevel:ce,startTime:Te,expirationTime:De,sortIndex:-1},Te>Pe?(ce.sortIndex=Te,W(q,ce),F(B)===null&&ce===F(q)&&(re?l():re=!0,r(le,Te-Pe))):(ce.sortIndex=De,W(B,ce),ee||xe||(ee=!0,t(_e))),ce},e.unstable_wrapCallback=function(ce){var ke=ge;return function(){var Te=ge;ge=ke;try{return ce.apply(this,arguments)}finally{ge=Te}}}})(Rw);Ow.exports=Rw;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im=yt.exports,Tr=xw,ii=Ow.exports;function It(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Im)throw Error(It(227));var Fw=new Set,Sf={};function yu(e,t){Bc(e,t),Bc(e+"Capture",t)}function Bc(e,t){for(Sf[e]=t,e=0;e<t.length;e++)Fw.add(t[e])}var gs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),xS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I_=Object.prototype.hasOwnProperty,P_={},k_={};function _S(e){return I_.call(k_,e)?!0:I_.call(P_,e)?!1:xS.test(e)?k_[e]=!0:(P_[e]=!0,!1)}function bS(e,t,r,l){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wS(e,t,r,l){if(t===null||typeof t=="undefined"||bS(e,t,r,l))return!0;if(l)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yi(e,t,r,l,c,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mi[e]=new Yi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mi[t]=new Yi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mi[e]=new Yi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mi[e]=new Yi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mi[e]=new Yi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mi[e]=new Yi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mi[e]=new Yi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mi[e]=new Yi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mi[e]=new Yi(e,5,!1,e.toLowerCase(),null,!1,!1)});var wy=/[\-:]([a-z])/g;function Ey(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wy,Ey);mi[t]=new Yi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wy,Ey);mi[t]=new Yi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wy,Ey);mi[t]=new Yi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mi[e]=new Yi(e,1,!1,e.toLowerCase(),null,!1,!1)});mi.xlinkHref=new Yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mi[e]=new Yi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sy(e,t,r,l){var c=mi.hasOwnProperty(t)?mi[t]:null,f=c!==null?c.type===0:l?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");f||(wS(t,r,c,l)&&(r=null),l||c===null?_S(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,l=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,l?e.setAttributeNS(l,t,r):e.setAttribute(t,r))))}var vu=Im.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hh=60103,ru=60106,Ys=60107,Cy=60108,of=60114,Ty=60109,Ay=60110,Pm=60112,af=60113,Cp=60120,km=60115,Iy=60116,Py=60121,ky=60128,Bw=60129,My=60130,jg=60131;if(typeof Symbol=="function"&&Symbol.for){var ri=Symbol.for;Hh=ri("react.element"),ru=ri("react.portal"),Ys=ri("react.fragment"),Cy=ri("react.strict_mode"),of=ri("react.profiler"),Ty=ri("react.provider"),Ay=ri("react.context"),Pm=ri("react.forward_ref"),af=ri("react.suspense"),Cp=ri("react.suspense_list"),km=ri("react.memo"),Iy=ri("react.lazy"),Py=ri("react.block"),ri("react.scope"),ky=ri("react.opaque.id"),Bw=ri("react.debug_trace_mode"),My=ri("react.offscreen"),jg=ri("react.legacy_hidden")}var M_=typeof Symbol=="function"&&Symbol.iterator;function zh(e){return e===null||typeof e!="object"?null:(e=M_&&e[M_]||e["@@iterator"],typeof e=="function"?e:null)}var X0;function Wh(e){if(X0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);X0=t&&t[1]||""}return`
`+X0+e}var Y0=!1;function Od(e,t){if(!e||Y0)return"";Y0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var l=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){l=_}e.call(t.prototype)}else{try{throw Error()}catch(_){l=_}e()}}catch(_){if(_&&l&&typeof _.stack=="string"){for(var c=_.stack.split(`
`),f=l.stack.split(`
`),g=c.length-1,s=f.length-1;1<=g&&0<=s&&c[g]!==f[s];)s--;for(;1<=g&&0<=s;g--,s--)if(c[g]!==f[s]){if(g!==1||s!==1)do if(g--,s--,0>s||c[g]!==f[s])return`
`+c[g].replace(" at new "," at ");while(1<=g&&0<=s);break}}}finally{Y0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wh(e):""}function ES(e){switch(e.tag){case 5:return Wh(e.type);case 16:return Wh("Lazy");case 13:return Wh("Suspense");case 19:return Wh("SuspenseList");case 0:case 2:case 15:return e=Od(e.type,!1),e;case 11:return e=Od(e.type.render,!1),e;case 22:return e=Od(e.type._render,!1),e;case 1:return e=Od(e.type,!0),e;default:return""}}function Sc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ys:return"Fragment";case ru:return"Portal";case of:return"Profiler";case Cy:return"StrictMode";case af:return"Suspense";case Cp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ay:return(e.displayName||"Context")+".Consumer";case Ty:return(e._context.displayName||"Context")+".Provider";case Pm:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case km:return Sc(e.type);case Py:return Sc(e._render);case Iy:t=e._payload,e=e._init;try{return Sc(e(t))}catch{}}return null}function ul(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function jw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function SS(e){var t=jw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){l=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(g){l=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rd(e){e._valueTracker||(e._valueTracker=SS(e))}function Dw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),l="";return e&&(l=jw(e)?e.checked?"true":"false":e.value),e=l,e!==r?(t.setValue(e),!0):!1}function Tp(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dg(e,t){var r=t.checked;return Tr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function z_(e,t){var r=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;r=ul(t.value!=null?t.value:r),e._wrapperState={initialChecked:l,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nw(e,t){t=t.checked,t!=null&&Sy(e,"checked",t,!1)}function Ng(e,t){Nw(e,t);var r=ul(t.value),l=t.type;if(r!=null)l==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ug(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ug(e,t.type,ul(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function L_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ug(e,t,r){(t!=="number"||Tp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function CS(e){var t="";return Im.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function Vg(e,t){return e=Tr({children:void 0},t),(t=CS(t.children))&&(e.children=t),e}function Cc(e,t,r,l){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&l&&(e[r].defaultSelected=!0)}else{for(r=""+ul(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function $g(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(It(91));return Tr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function O_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(It(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(It(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ul(r)}}function Uw(e,t){var r=ul(t.value),l=ul(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),l!=null&&(e.defaultValue=""+l)}function R_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Gg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Vw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fd,$w=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,l,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,l,c)})}:e}(function(e,t){if(e.namespaceURI!==Gg.svg||"innerHTML"in e)e.innerHTML=t;else{for(Fd=Fd||document.createElement("div"),Fd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var sf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TS=["Webkit","ms","Moz","O"];Object.keys(sf).forEach(function(e){TS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sf[t]=sf[e]})});function Gw(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||sf.hasOwnProperty(e)&&sf[e]?(""+t).trim():t+"px"}function Hw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var l=r.indexOf("--")===0,c=Gw(r,t[r],l);r==="float"&&(r="cssFloat"),l?e.setProperty(r,c):e[r]=c}}var AS=Tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wg(e,t){if(t){if(AS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(It(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(It(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(It(61))}if(t.style!=null&&typeof t.style!="object")throw Error(It(62))}}function Zg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function zy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xg=null,Tc=null,Ac=null;function F_(e){if(e=Hf(e)){if(typeof Xg!="function")throw Error(It(280));var t=e.stateNode;t&&(t=Fm(t),Xg(e.stateNode,e.type,t))}}function Ww(e){Tc?Ac?Ac.push(e):Ac=[e]:Tc=e}function Zw(){if(Tc){var e=Tc,t=Ac;if(Ac=Tc=null,F_(e),t)for(e=0;e<t.length;e++)F_(t[e])}}function Ly(e,t){return e(t)}function Xw(e,t,r,l,c){return e(t,r,l,c)}function Oy(){}var Yw=Ly,iu=!1,K0=!1;function Ry(){(Tc!==null||Ac!==null)&&(Oy(),Zw())}function IS(e,t,r){if(K0)return e(t,r);K0=!0;try{return Yw(e,t,r)}finally{K0=!1,Ry()}}function Tf(e,t){var r=e.stateNode;if(r===null)return null;var l=Fm(r);if(l===null)return null;r=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(It(231,t,typeof r));return r}var Yg=!1;if(gs)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){Yg=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{Yg=!1}function PS(e,t,r,l,c,f,g,s,_){var E=Array.prototype.slice.call(arguments,3);try{t.apply(r,E)}catch(C){this.onError(C)}}var lf=!1,Ap=null,Ip=!1,Kg=null,kS={onError:function(e){lf=!0,Ap=e}};function MS(e,t,r,l,c,f,g,s,_){lf=!1,Ap=null,PS.apply(kS,arguments)}function zS(e,t,r,l,c,f,g,s,_){if(MS.apply(this,arguments),lf){if(lf){var E=Ap;lf=!1,Ap=null}else throw Error(It(198));Ip||(Ip=!0,Kg=E)}}function xu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Kw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function B_(e){if(xu(e)!==e)throw Error(It(188))}function LS(e){var t=e.alternate;if(!t){if(t=xu(e),t===null)throw Error(It(188));return t!==e?null:e}for(var r=e,l=t;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){r=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return B_(c),e;if(f===l)return B_(c),t;f=f.sibling}throw Error(It(188))}if(r.return!==l.return)r=c,l=f;else{for(var g=!1,s=c.child;s;){if(s===r){g=!0,r=c,l=f;break}if(s===l){g=!0,l=c,r=f;break}s=s.sibling}if(!g){for(s=f.child;s;){if(s===r){g=!0,r=f,l=c;break}if(s===l){g=!0,l=f,r=c;break}s=s.sibling}if(!g)throw Error(It(189))}}if(r.alternate!==l)throw Error(It(190))}if(r.tag!==3)throw Error(It(188));return r.stateNode.current===r?e:t}function qw(e){if(e=LS(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function j_(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var Jw,Fy,Qw,e5,qg=!1,Ma=[],tl=null,nl=null,rl=null,Af=new Map,If=new Map,Oh=[],D_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jg(e,t,r,l,c){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:c,targetContainers:[l]}}function N_(e,t){switch(e){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":Af.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":If.delete(t.pointerId)}}function Rh(e,t,r,l,c,f){return e===null||e.nativeEvent!==f?(e=Jg(t,r,l,c,f),t!==null&&(t=Hf(t),t!==null&&Fy(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function OS(e,t,r,l,c){switch(t){case"focusin":return tl=Rh(tl,e,t,r,l,c),!0;case"dragenter":return nl=Rh(nl,e,t,r,l,c),!0;case"mouseover":return rl=Rh(rl,e,t,r,l,c),!0;case"pointerover":var f=c.pointerId;return Af.set(f,Rh(Af.get(f)||null,e,t,r,l,c)),!0;case"gotpointercapture":return f=c.pointerId,If.set(f,Rh(If.get(f)||null,e,t,r,l,c)),!0}return!1}function RS(e){var t=ou(e.target);if(t!==null){var r=xu(t);if(r!==null){if(t=r.tag,t===13){if(t=Kw(r),t!==null){e.blockedOn=t,e5(e.lanePriority,function(){ii.unstable_runWithPriority(e.priority,function(){Qw(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function op(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ny(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=Hf(r),t!==null&&Fy(t),e.blockedOn=r,!1;t.shift()}return!0}function U_(e,t,r){op(e)&&r.delete(t)}function FS(){for(qg=!1;0<Ma.length;){var e=Ma[0];if(e.blockedOn!==null){e=Hf(e.blockedOn),e!==null&&Jw(e);break}for(var t=e.targetContainers;0<t.length;){var r=Ny(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Ma.shift()}tl!==null&&op(tl)&&(tl=null),nl!==null&&op(nl)&&(nl=null),rl!==null&&op(rl)&&(rl=null),Af.forEach(U_),If.forEach(U_)}function Fh(e,t){e.blockedOn===t&&(e.blockedOn=null,qg||(qg=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,FS)))}function t5(e){function t(c){return Fh(c,e)}if(0<Ma.length){Fh(Ma[0],e);for(var r=1;r<Ma.length;r++){var l=Ma[r];l.blockedOn===e&&(l.blockedOn=null)}}for(tl!==null&&Fh(tl,e),nl!==null&&Fh(nl,e),rl!==null&&Fh(rl,e),Af.forEach(t),If.forEach(t),r=0;r<Oh.length;r++)l=Oh[r],l.blockedOn===e&&(l.blockedOn=null);for(;0<Oh.length&&(r=Oh[0],r.blockedOn===null);)RS(r),r.blockedOn===null&&Oh.shift()}function Bd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var dc={animationend:Bd("Animation","AnimationEnd"),animationiteration:Bd("Animation","AnimationIteration"),animationstart:Bd("Animation","AnimationStart"),transitionend:Bd("Transition","TransitionEnd")},q0={},n5={};gs&&(n5=document.createElement("div").style,"AnimationEvent"in window||(delete dc.animationend.animation,delete dc.animationiteration.animation,delete dc.animationstart.animation),"TransitionEvent"in window||delete dc.transitionend.transition);function Mm(e){if(q0[e])return q0[e];if(!dc[e])return e;var t=dc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in n5)return q0[e]=t[r];return e}var r5=Mm("animationend"),i5=Mm("animationiteration"),o5=Mm("animationstart"),a5=Mm("transitionend"),s5=new Map,By=new Map,BS=["abort","abort",r5,"animationEnd",i5,"animationIteration",o5,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",a5,"transitionEnd","waiting","waiting"];function jy(e,t){for(var r=0;r<e.length;r+=2){var l=e[r],c=e[r+1];c="on"+(c[0].toUpperCase()+c.slice(1)),By.set(l,t),s5.set(l,c),yu(c,[l])}}var jS=ii.unstable_now;jS();var yr=8;function hc(e){if((1&e)!==0)return yr=15,1;if((2&e)!==0)return yr=14,2;if((4&e)!==0)return yr=13,4;var t=24&e;return t!==0?(yr=12,t):(e&32)!==0?(yr=11,32):(t=192&e,t!==0?(yr=10,t):(e&256)!==0?(yr=9,256):(t=3584&e,t!==0?(yr=8,t):(e&4096)!==0?(yr=7,4096):(t=4186112&e,t!==0?(yr=6,t):(t=62914560&e,t!==0?(yr=5,t):e&67108864?(yr=4,67108864):(e&134217728)!==0?(yr=3,134217728):(t=805306368&e,t!==0?(yr=2,t):(1073741824&e)!==0?(yr=1,1073741824):(yr=8,e))))))}function DS(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function NS(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(It(358,e))}}function Pf(e,t){var r=e.pendingLanes;if(r===0)return yr=0;var l=0,c=0,f=e.expiredLanes,g=e.suspendedLanes,s=e.pingedLanes;if(f!==0)l=f,c=yr=15;else if(f=r&134217727,f!==0){var _=f&~g;_!==0?(l=hc(_),c=yr):(s&=f,s!==0&&(l=hc(s),c=yr))}else f=r&~g,f!==0?(l=hc(f),c=yr):s!==0&&(l=hc(s),c=yr);if(l===0)return 0;if(l=31-cl(l),l=r&((0>l?0:1<<l)<<1)-1,t!==0&&t!==l&&(t&g)===0){if(hc(t),c<=yr)return t;yr=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)r=31-cl(t),c=1<<r,l|=e[r],t&=~c;return l}function l5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pp(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=fc(24&~t),e===0?Pp(10,t):e;case 10:return e=fc(192&~t),e===0?Pp(8,t):e;case 8:return e=fc(3584&~t),e===0&&(e=fc(4186112&~t),e===0&&(e=512)),e;case 2:return t=fc(805306368&~t),t===0&&(t=268435456),t}throw Error(It(358,e))}function fc(e){return e&-e}function J0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zm(e,t,r){e.pendingLanes|=t;var l=t-1;e.suspendedLanes&=l,e.pingedLanes&=l,e=e.eventTimes,t=31-cl(t),e[t]=r}var cl=Math.clz32?Math.clz32:$S,US=Math.log,VS=Math.LN2;function $S(e){return e===0?32:31-(US(e)/VS|0)|0}var GS=ii.unstable_UserBlockingPriority,HS=ii.unstable_runWithPriority,ap=!0;function WS(e,t,r,l){iu||Oy();var c=Dy,f=iu;iu=!0;try{Xw(c,e,t,r,l)}finally{(iu=f)||Ry()}}function ZS(e,t,r,l){HS(GS,Dy.bind(null,e,t,r,l))}function Dy(e,t,r,l){if(ap){var c;if((c=(t&4)===0)&&0<Ma.length&&-1<D_.indexOf(e))e=Jg(null,e,t,r,l),Ma.push(e);else{var f=Ny(e,t,r,l);if(f===null)c&&N_(e,l);else{if(c){if(-1<D_.indexOf(e)){e=Jg(f,e,t,r,l),Ma.push(e);return}if(OS(f,e,t,r,l))return;N_(e,l)}b5(e,t,l,null,r)}}}}function Ny(e,t,r,l){var c=zy(l);if(c=ou(c),c!==null){var f=xu(c);if(f===null)c=null;else{var g=f.tag;if(g===13){if(c=Kw(f),c!==null)return c;c=null}else if(g===3){if(f.stateNode.hydrate)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return b5(e,t,l,c,r),null}var qs=null,Uy=null,sp=null;function u5(){if(sp)return sp;var e,t=Uy,r=t.length,l,c="value"in qs?qs.value:qs.textContent,f=c.length;for(e=0;e<r&&t[e]===c[e];e++);var g=r-e;for(l=1;l<=g&&t[r-l]===c[f-l];l++);return sp=c.slice(e,1<l?1-l:void 0)}function lp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jd(){return!0}function V_(){return!1}function go(e){function t(r,l,c,f,g){this._reactName=r,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(f):f[s]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?jd:V_,this.isPropagationStopped=V_,this}return Tr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jd)},persist:function(){},isPersistent:jd}),t}var Xc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vy=go(Xc),Gf=Tr({},Xc,{view:0,detail:0}),XS=go(Gf),Q0,eg,Bh,Lm=Tr({},Gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$y,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bh&&(Bh&&e.type==="mousemove"?(Q0=e.screenX-Bh.screenX,eg=e.screenY-Bh.screenY):eg=Q0=0,Bh=e),Q0)},movementY:function(e){return"movementY"in e?e.movementY:eg}}),$_=go(Lm),YS=Tr({},Lm,{dataTransfer:0}),KS=go(YS),qS=Tr({},Gf,{relatedTarget:0}),tg=go(qS),JS=Tr({},Xc,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=go(JS),e8=Tr({},Xc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t8=go(e8),n8=Tr({},Xc,{data:0}),G_=go(n8),r8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=o8[e])?!!t[e]:!1}function $y(){return a8}var s8=Tr({},Gf,{key:function(e){if(e.key){var t=r8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$y,charCode:function(e){return e.type==="keypress"?lp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l8=go(s8),u8=Tr({},Lm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H_=go(u8),c8=Tr({},Gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$y}),h8=go(c8),f8=Tr({},Xc,{propertyName:0,elapsedTime:0,pseudoElement:0}),d8=go(f8),p8=Tr({},Lm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),m8=go(p8),g8=[9,13,27,32],Gy=gs&&"CompositionEvent"in window,uf=null;gs&&"documentMode"in document&&(uf=document.documentMode);var y8=gs&&"TextEvent"in window&&!uf,c5=gs&&(!Gy||uf&&8<uf&&11>=uf),W_=String.fromCharCode(32),Z_=!1;function h5(e,t){switch(e){case"keyup":return g8.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pc=!1;function v8(e,t){switch(e){case"compositionend":return f5(t);case"keypress":return t.which!==32?null:(Z_=!0,W_);case"textInput":return e=t.data,e===W_&&Z_?null:e;default:return null}}function x8(e,t){if(pc)return e==="compositionend"||!Gy&&h5(e,t)?(e=u5(),sp=Uy=qs=null,pc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return c5&&t.locale!=="ko"?null:t.data;default:return null}}var _8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_8[e.type]:t==="textarea"}function d5(e,t,r,l){Ww(l),t=kp(t,"onChange"),0<t.length&&(r=new Vy("onChange","change",null,r,l),e.push({event:r,listeners:t}))}var cf=null,kf=null;function b8(e){v5(e,0)}function Om(e){var t=gc(e);if(Dw(t))return e}function w8(e,t){if(e==="change")return t}var p5=!1;if(gs){var ng;if(gs){var rg="oninput"in document;if(!rg){var Y_=document.createElement("div");Y_.setAttribute("oninput","return;"),rg=typeof Y_.oninput=="function"}ng=rg}else ng=!1;p5=ng&&(!document.documentMode||9<document.documentMode)}function K_(){cf&&(cf.detachEvent("onpropertychange",m5),kf=cf=null)}function m5(e){if(e.propertyName==="value"&&Om(kf)){var t=[];if(d5(t,kf,e,zy(e)),e=b8,iu)e(t);else{iu=!0;try{Ly(e,t)}finally{iu=!1,Ry()}}}}function E8(e,t,r){e==="focusin"?(K_(),cf=t,kf=r,cf.attachEvent("onpropertychange",m5)):e==="focusout"&&K_()}function S8(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Om(kf)}function C8(e,t){if(e==="click")return Om(t)}function T8(e,t){if(e==="input"||e==="change")return Om(t)}function A8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zo=typeof Object.is=="function"?Object.is:A8,I8=Object.prototype.hasOwnProperty;function Mf(e,t){if(zo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++)if(!I8.call(t,r[l])||!zo(e[r[l]],t[r[l]]))return!1;return!0}function q_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J_(e,t){var r=q_(e);e=0;for(var l;r;){if(r.nodeType===3){if(l=e+r.textContent.length,e<=t&&l>=t)return{node:r,offset:t-e};e=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=q_(r)}}function g5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Q_(){for(var e=window,t=Tp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Tp(e.document)}return t}function Qg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var P8=gs&&"documentMode"in document&&11>=document.documentMode,mc=null,e1=null,hf=null,t1=!1;function e2(e,t,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;t1||mc==null||mc!==Tp(l)||(l=mc,"selectionStart"in l&&Qg(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),hf&&Mf(hf,l)||(hf=l,l=kp(e1,"onSelect"),0<l.length&&(t=new Vy("onSelect","select",null,t,r),e.push({event:t,listeners:l}),t.target=mc)))}jy("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);jy("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);jy(BS,2);for(var t2="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ig=0;ig<t2.length;ig++)By.set(t2[ig],0);Bc("onMouseEnter",["mouseout","mouseover"]);Bc("onMouseLeave",["mouseout","mouseover"]);Bc("onPointerEnter",["pointerout","pointerover"]);Bc("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zh));function n2(e,t,r){var l=e.type||"unknown-event";e.currentTarget=r,zS(l,t,void 0,e),e.currentTarget=null}function v5(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var l=e[r],c=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var g=l.length-1;0<=g;g--){var s=l[g],_=s.instance,E=s.currentTarget;if(s=s.listener,_!==f&&c.isPropagationStopped())break e;n2(c,s,E),f=_}else for(g=0;g<l.length;g++){if(s=l[g],_=s.instance,E=s.currentTarget,s=s.listener,_!==f&&c.isPropagationStopped())break e;n2(c,s,E),f=_}}}if(Ip)throw e=Kg,Ip=!1,Kg=null,e}function wr(e,t){var r=E5(t),l=e+"__bubble";r.has(l)||(_5(t,e,2,!1),r.add(l))}var r2="_reactListening"+Math.random().toString(36).slice(2);function x5(e){e[r2]||(e[r2]=!0,Fw.forEach(function(t){y5.has(t)||i2(t,!1,e,null),i2(t,!0,e,null)}))}function i2(e,t,r,l){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,f=r;if(e==="selectionchange"&&r.nodeType!==9&&(f=r.ownerDocument),l!==null&&!t&&y5.has(e)){if(e!=="scroll")return;c|=2,f=l}var g=E5(f),s=e+"__"+(t?"capture":"bubble");g.has(s)||(t&&(c|=4),_5(f,e,c,t),g.add(s))}function _5(e,t,r,l){var c=By.get(t);switch(c===void 0?2:c){case 0:c=WS;break;case 1:c=ZS;break;default:c=Dy}r=c.bind(null,t,r,e),c=void 0,!Yg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function b5(e,t,r,l,c){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var s=l.stateNode.containerInfo;if(s===c||s.nodeType===8&&s.parentNode===c)break;if(g===4)for(g=l.return;g!==null;){var _=g.tag;if((_===3||_===4)&&(_=g.stateNode.containerInfo,_===c||_.nodeType===8&&_.parentNode===c))return;g=g.return}for(;s!==null;){if(g=ou(s),g===null)return;if(_=g.tag,_===5||_===6){l=f=g;continue e}s=s.parentNode}}l=l.return}IS(function(){var E=f,C=zy(r),S=[];e:{var I=s5.get(e);if(I!==void 0){var D=Vy,J=e;switch(e){case"keypress":if(lp(r)===0)break e;case"keydown":case"keyup":D=l8;break;case"focusin":J="focus",D=tg;break;case"focusout":J="blur",D=tg;break;case"beforeblur":case"afterblur":D=tg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=$_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=KS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=h8;break;case r5:case i5:case o5:D=QS;break;case a5:D=d8;break;case"scroll":D=XS;break;case"wheel":D=m8;break;case"copy":case"cut":case"paste":D=t8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=H_}var X=(t&4)!==0,G=!X&&e==="scroll",U=X?I!==null?I+"Capture":null:I;X=[];for(var H=E,$;H!==null;){$=H;var ne=$.stateNode;if($.tag===5&&ne!==null&&($=ne,U!==null&&(ne=Tf(H,U),ne!=null&&X.push(zf(H,ne,$)))),G)break;H=H.return}0<X.length&&(I=new D(I,J,null,r,C),S.push({event:I,listeners:X}))}}if((t&7)===0){e:{if(I=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",I&&(t&16)===0&&(J=r.relatedTarget||r.fromElement)&&(ou(J)||J[Yc]))break e;if((D||I)&&(I=C.window===C?C:(I=C.ownerDocument)?I.defaultView||I.parentWindow:window,D?(J=r.relatedTarget||r.toElement,D=E,J=J?ou(J):null,J!==null&&(G=xu(J),J!==G||J.tag!==5&&J.tag!==6)&&(J=null)):(D=null,J=E),D!==J)){if(X=$_,ne="onMouseLeave",U="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(X=H_,ne="onPointerLeave",U="onPointerEnter",H="pointer"),G=D==null?I:gc(D),$=J==null?I:gc(J),I=new X(ne,H+"leave",D,r,C),I.target=G,I.relatedTarget=$,ne=null,ou(C)===E&&(X=new X(U,H+"enter",J,r,C),X.target=$,X.relatedTarget=G,ne=X),G=ne,D&&J)t:{for(X=D,U=J,H=0,$=X;$;$=rc($))H++;for($=0,ne=U;ne;ne=rc(ne))$++;for(;0<H-$;)X=rc(X),H--;for(;0<$-H;)U=rc(U),$--;for(;H--;){if(X===U||U!==null&&X===U.alternate)break t;X=rc(X),U=rc(U)}X=null}else X=null;D!==null&&o2(S,I,D,X,!1),J!==null&&G!==null&&o2(S,G,J,X,!0)}}e:{if(I=E?gc(E):window,D=I.nodeName&&I.nodeName.toLowerCase(),D==="select"||D==="input"&&I.type==="file")var W=w8;else if(X_(I))if(p5)W=T8;else{W=S8;var F=E8}else(D=I.nodeName)&&D.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(W=C8);if(W&&(W=W(e,E))){d5(S,W,r,C);break e}F&&F(e,I,E),e==="focusout"&&(F=I._wrapperState)&&F.controlled&&I.type==="number"&&Ug(I,"number",I.value)}switch(F=E?gc(E):window,e){case"focusin":(X_(F)||F.contentEditable==="true")&&(mc=F,e1=E,hf=null);break;case"focusout":hf=e1=mc=null;break;case"mousedown":t1=!0;break;case"contextmenu":case"mouseup":case"dragend":t1=!1,e2(S,r,C);break;case"selectionchange":if(P8)break;case"keydown":case"keyup":e2(S,r,C)}var w;if(Gy)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else pc?h5(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(c5&&r.locale!=="ko"&&(pc||k!=="onCompositionStart"?k==="onCompositionEnd"&&pc&&(w=u5()):(qs=C,Uy="value"in qs?qs.value:qs.textContent,pc=!0)),F=kp(E,k),0<F.length&&(k=new G_(k,e,null,r,C),S.push({event:k,listeners:F}),w?k.data=w:(w=f5(r),w!==null&&(k.data=w)))),(w=y8?v8(e,r):x8(e,r))&&(E=kp(E,"onBeforeInput"),0<E.length&&(C=new G_("onBeforeInput","beforeinput",null,r,C),S.push({event:C,listeners:E}),C.data=w))}v5(S,t)})}function zf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function kp(e,t){for(var r=t+"Capture",l=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Tf(e,r),f!=null&&l.unshift(zf(e,f,c)),f=Tf(e,t),f!=null&&l.push(zf(e,f,c))),e=e.return}return l}function rc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function o2(e,t,r,l,c){for(var f=t._reactName,g=[];r!==null&&r!==l;){var s=r,_=s.alternate,E=s.stateNode;if(_!==null&&_===l)break;s.tag===5&&E!==null&&(s=E,c?(_=Tf(r,f),_!=null&&g.unshift(zf(r,_,s))):c||(_=Tf(r,f),_!=null&&g.push(zf(r,_,s)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}function Mp(){}var og=null,ag=null;function w5(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function n1(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var a2=typeof setTimeout=="function"?setTimeout:void 0,k8=typeof clearTimeout=="function"?clearTimeout:void 0;function Hy(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Ic(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function s2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var sg=0;function M8(e){return{$$typeof:ky,toString:e,valueOf:e}}var Rm=Math.random().toString(36).slice(2),Js="__reactFiber$"+Rm,zp="__reactProps$"+Rm,Yc="__reactContainer$"+Rm,l2="__reactEvents$"+Rm;function ou(e){var t=e[Js];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Yc]||r[Js]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=s2(e);e!==null;){if(r=e[Js])return r;e=s2(e)}return t}e=r,r=e.parentNode}return null}function Hf(e){return e=e[Js]||e[Yc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(It(33))}function Fm(e){return e[zp]||null}function E5(e){var t=e[l2];return t===void 0&&(t=e[l2]=new Set),t}var r1=[],yc=-1;function yl(e){return{current:e}}function Er(e){0>yc||(e.current=r1[yc],r1[yc]=null,yc--)}function jr(e,t){yc++,r1[yc]=e.current,e.current=t}var hl={},Ii=yl(hl),no=yl(!1),cu=hl;function jc(e,t){var r=e.type.contextTypes;if(!r)return hl;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in r)c[f]=t[f];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function ro(e){return e=e.childContextTypes,e!=null}function Lp(){Er(no),Er(Ii)}function u2(e,t,r){if(Ii.current!==hl)throw Error(It(168));jr(Ii,t),jr(no,r)}function S5(e,t,r){var l=e.stateNode;if(e=t.childContextTypes,typeof l.getChildContext!="function")return r;l=l.getChildContext();for(var c in l)if(!(c in e))throw Error(It(108,Sc(t)||"Unknown",c));return Tr({},r,l)}function up(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hl,cu=Ii.current,jr(Ii,e),jr(no,no.current),!0}function c2(e,t,r){var l=e.stateNode;if(!l)throw Error(It(169));r?(e=S5(e,t,cu),l.__reactInternalMemoizedMergedChildContext=e,Er(no),Er(Ii),jr(Ii,e)):Er(no),jr(no,r)}var Wy=null,uu=null,z8=ii.unstable_runWithPriority,Zy=ii.unstable_scheduleCallback,i1=ii.unstable_cancelCallback,L8=ii.unstable_shouldYield,h2=ii.unstable_requestPaint,o1=ii.unstable_now,O8=ii.unstable_getCurrentPriorityLevel,Bm=ii.unstable_ImmediatePriority,C5=ii.unstable_UserBlockingPriority,T5=ii.unstable_NormalPriority,A5=ii.unstable_LowPriority,I5=ii.unstable_IdlePriority,lg={},R8=h2!==void 0?h2:function(){},cs=null,cp=null,ug=!1,f2=o1(),Ci=1e4>f2?o1:function(){return o1()-f2};function Dc(){switch(O8()){case Bm:return 99;case C5:return 98;case T5:return 97;case A5:return 96;case I5:return 95;default:throw Error(It(332))}}function P5(e){switch(e){case 99:return Bm;case 98:return C5;case 97:return T5;case 96:return A5;case 95:return I5;default:throw Error(It(332))}}function hu(e,t){return e=P5(e),z8(e,t)}function Lf(e,t,r){return e=P5(e),Zy(e,t,r)}function Da(){if(cp!==null){var e=cp;cp=null,i1(e)}k5()}function k5(){if(!ug&&cs!==null){ug=!0;var e=0;try{var t=cs;hu(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),cs=null}catch(r){throw cs!==null&&(cs=cs.slice(e+1)),Zy(Bm,Da),r}finally{ug=!1}}}var F8=vu.ReactCurrentBatchConfig;function oa(e,t){if(e&&e.defaultProps){t=Tr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Op=yl(null),Rp=null,vc=null,Fp=null;function Xy(){Fp=vc=Rp=null}function Yy(e){var t=Op.current;Er(Op),e.type._context._currentValue=t}function M5(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Pc(e,t){Rp=e,Fp=vc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(la=!0),e.firstContext=null)}function jo(e,t){if(Fp!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Fp=e,t=1073741823),t={context:e,observedBits:t,next:null},vc===null){if(Rp===null)throw Error(It(308));vc=t,Rp.dependencies={lanes:0,firstContext:t,responders:null}}else vc=vc.next=t;return e._currentValue}var Ws=!1;function Ky(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function z5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function il(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ol(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function d2(e,t){var r=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?c=f=g:f=f.next=g,r=r.next}while(r!==null);f===null?c=f=t:f=f.next=t}else c=f=t;r={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,effects:l.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Of(e,t,r,l){var c=e.updateQueue;Ws=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,s=c.shared.pending;if(s!==null){c.shared.pending=null;var _=s,E=_.next;_.next=null,g===null?f=E:g.next=E,g=_;var C=e.alternate;if(C!==null){C=C.updateQueue;var S=C.lastBaseUpdate;S!==g&&(S===null?C.firstBaseUpdate=E:S.next=E,C.lastBaseUpdate=_)}}if(f!==null){S=c.baseState,g=0,C=E=_=null;do{s=f.lane;var I=f.eventTime;if((l&s)===s){C!==null&&(C=C.next={eventTime:I,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var D=e,J=f;switch(s=t,I=r,J.tag){case 1:if(D=J.payload,typeof D=="function"){S=D.call(I,S,s);break e}S=D;break e;case 3:D.flags=D.flags&-4097|64;case 0:if(D=J.payload,s=typeof D=="function"?D.call(I,S,s):D,s==null)break e;S=Tr({},S,s);break e;case 2:Ws=!0}}f.callback!==null&&(e.flags|=32,s=c.effects,s===null?c.effects=[f]:s.push(f))}else I={eventTime:I,lane:s,tag:f.tag,payload:f.payload,callback:f.callback,next:null},C===null?(E=C=I,_=S):C=C.next=I,g|=s;if(f=f.next,f===null){if(s=c.shared.pending,s===null)break;f=s.next,s.next=null,c.lastBaseUpdate=s,c.shared.pending=null}}while(1);C===null&&(_=S),c.baseState=_,c.firstBaseUpdate=E,c.lastBaseUpdate=C,Zf|=g,e.lanes=g,e.memoizedState=S}}function p2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(c!==null){if(l.callback=null,l=r,typeof c!="function")throw Error(It(191,c));c.call(l)}}}var L5=new Im.Component().refs;function Bp(e,t,r,l){t=e.memoizedState,r=r(l,t),r=r==null?t:Tr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var jm={isMounted:function(e){return(e=e._reactInternals)?xu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var l=mo(),c=al(e),f=il(l,c);f.payload=t,r!=null&&(f.callback=r),ol(e,f),sl(e,c,l)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var l=mo(),c=al(e),f=il(l,c);f.tag=1,f.payload=t,r!=null&&(f.callback=r),ol(e,f),sl(e,c,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=mo(),l=al(e),c=il(r,l);c.tag=2,t!=null&&(c.callback=t),ol(e,c),sl(e,l,r)}};function m2(e,t,r,l,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,g):t.prototype&&t.prototype.isPureReactComponent?!Mf(r,l)||!Mf(c,f):!0}function O5(e,t,r){var l=!1,c=hl,f=t.contextType;return typeof f=="object"&&f!==null?f=jo(f):(c=ro(t)?cu:Ii.current,l=t.contextTypes,f=(l=l!=null)?jc(e,c):hl),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jm,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function g2(e,t,r,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,l),t.state!==e&&jm.enqueueReplaceState(t,t.state,null)}function a1(e,t,r,l){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=L5,Ky(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=jo(f):(f=ro(t)?cu:Ii.current,c.context=jc(e,f)),Of(e,r,c,l),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Bp(e,t,f,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&jm.enqueueReplaceState(c,c.state,null),Of(e,r,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var Dd=Array.isArray;function jh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(It(309));var l=r.stateNode}if(!l)throw Error(It(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var g=l.refs;g===L5&&(g=l.refs={}),f===null?delete g[c]:g[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(It(284));if(!r._owner)throw Error(It(290,e))}return e}function Nd(e,t){if(e.type!=="textarea")throw Error(It(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function R5(e){function t(G,U){if(e){var H=G.lastEffect;H!==null?(H.nextEffect=U,G.lastEffect=U):G.firstEffect=G.lastEffect=U,U.nextEffect=null,U.flags=8}}function r(G,U){if(!e)return null;for(;U!==null;)t(G,U),U=U.sibling;return null}function l(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function c(G,U){return G=dl(G,U),G.index=0,G.sibling=null,G}function f(G,U,H){return G.index=H,e?(H=G.alternate,H!==null?(H=H.index,H<U?(G.flags=2,U):H):(G.flags=2,U)):U}function g(G){return e&&G.alternate===null&&(G.flags=2),G}function s(G,U,H,$){return U===null||U.tag!==6?(U=pg(H,G.mode,$),U.return=G,U):(U=c(U,H),U.return=G,U)}function _(G,U,H,$){return U!==null&&U.elementType===H.type?($=c(U,H.props),$.ref=jh(G,U,H),$.return=G,$):($=pp(H.type,H.key,H.props,null,G.mode,$),$.ref=jh(G,U,H),$.return=G,$)}function E(G,U,H,$){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=mg(H,G.mode,$),U.return=G,U):(U=c(U,H.children||[]),U.return=G,U)}function C(G,U,H,$,ne){return U===null||U.tag!==7?(U=Lc(H,G.mode,$,ne),U.return=G,U):(U=c(U,H),U.return=G,U)}function S(G,U,H){if(typeof U=="string"||typeof U=="number")return U=pg(""+U,G.mode,H),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Hh:return H=pp(U.type,U.key,U.props,null,G.mode,H),H.ref=jh(G,null,U),H.return=G,H;case ru:return U=mg(U,G.mode,H),U.return=G,U}if(Dd(U)||zh(U))return U=Lc(U,G.mode,H,null),U.return=G,U;Nd(G,U)}return null}function I(G,U,H,$){var ne=U!==null?U.key:null;if(typeof H=="string"||typeof H=="number")return ne!==null?null:s(G,U,""+H,$);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Hh:return H.key===ne?H.type===Ys?C(G,U,H.props.children,$,ne):_(G,U,H,$):null;case ru:return H.key===ne?E(G,U,H,$):null}if(Dd(H)||zh(H))return ne!==null?null:C(G,U,H,$,null);Nd(G,H)}return null}function D(G,U,H,$,ne){if(typeof $=="string"||typeof $=="number")return G=G.get(H)||null,s(U,G,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Hh:return G=G.get($.key===null?H:$.key)||null,$.type===Ys?C(U,G,$.props.children,ne,$.key):_(U,G,$,ne);case ru:return G=G.get($.key===null?H:$.key)||null,E(U,G,$,ne)}if(Dd($)||zh($))return G=G.get(H)||null,C(U,G,$,ne,null);Nd(U,$)}return null}function J(G,U,H,$){for(var ne=null,W=null,F=U,w=U=0,k=null;F!==null&&w<H.length;w++){F.index>w?(k=F,F=null):k=F.sibling;var B=I(G,F,H[w],$);if(B===null){F===null&&(F=k);break}e&&F&&B.alternate===null&&t(G,F),U=f(B,U,w),W===null?ne=B:W.sibling=B,W=B,F=k}if(w===H.length)return r(G,F),ne;if(F===null){for(;w<H.length;w++)F=S(G,H[w],$),F!==null&&(U=f(F,U,w),W===null?ne=F:W.sibling=F,W=F);return ne}for(F=l(G,F);w<H.length;w++)k=D(F,G,w,H[w],$),k!==null&&(e&&k.alternate!==null&&F.delete(k.key===null?w:k.key),U=f(k,U,w),W===null?ne=k:W.sibling=k,W=k);return e&&F.forEach(function(q){return t(G,q)}),ne}function X(G,U,H,$){var ne=zh(H);if(typeof ne!="function")throw Error(It(150));if(H=ne.call(H),H==null)throw Error(It(151));for(var W=ne=null,F=U,w=U=0,k=null,B=H.next();F!==null&&!B.done;w++,B=H.next()){F.index>w?(k=F,F=null):k=F.sibling;var q=I(G,F,B.value,$);if(q===null){F===null&&(F=k);break}e&&F&&q.alternate===null&&t(G,F),U=f(q,U,w),W===null?ne=q:W.sibling=q,W=q,F=k}if(B.done)return r(G,F),ne;if(F===null){for(;!B.done;w++,B=H.next())B=S(G,B.value,$),B!==null&&(U=f(B,U,w),W===null?ne=B:W.sibling=B,W=B);return ne}for(F=l(G,F);!B.done;w++,B=H.next())B=D(F,G,w,B.value,$),B!==null&&(e&&B.alternate!==null&&F.delete(B.key===null?w:B.key),U=f(B,U,w),W===null?ne=B:W.sibling=B,W=B);return e&&F.forEach(function(K){return t(G,K)}),ne}return function(G,U,H,$){var ne=typeof H=="object"&&H!==null&&H.type===Ys&&H.key===null;ne&&(H=H.props.children);var W=typeof H=="object"&&H!==null;if(W)switch(H.$$typeof){case Hh:e:{for(W=H.key,ne=U;ne!==null;){if(ne.key===W){switch(ne.tag){case 7:if(H.type===Ys){r(G,ne.sibling),U=c(ne,H.props.children),U.return=G,G=U;break e}break;default:if(ne.elementType===H.type){r(G,ne.sibling),U=c(ne,H.props),U.ref=jh(G,ne,H),U.return=G,G=U;break e}}r(G,ne);break}else t(G,ne);ne=ne.sibling}H.type===Ys?(U=Lc(H.props.children,G.mode,$,H.key),U.return=G,G=U):($=pp(H.type,H.key,H.props,null,G.mode,$),$.ref=jh(G,U,H),$.return=G,G=$)}return g(G);case ru:e:{for(ne=H.key;U!==null;){if(U.key===ne)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){r(G,U.sibling),U=c(U,H.children||[]),U.return=G,G=U;break e}else{r(G,U);break}else t(G,U);U=U.sibling}U=mg(H,G.mode,$),U.return=G,G=U}return g(G)}if(typeof H=="string"||typeof H=="number")return H=""+H,U!==null&&U.tag===6?(r(G,U.sibling),U=c(U,H),U.return=G,G=U):(r(G,U),U=pg(H,G.mode,$),U.return=G,G=U),g(G);if(Dd(H))return J(G,U,H,$);if(zh(H))return X(G,U,H,$);if(W&&Nd(G,H),typeof H=="undefined"&&!ne)switch(G.tag){case 1:case 22:case 0:case 11:case 15:throw Error(It(152,Sc(G.type)||"Component"))}return r(G,U)}}var jp=R5(!0),F5=R5(!1),Wf={},Ra=yl(Wf),Rf=yl(Wf),Ff=yl(Wf);function au(e){if(e===Wf)throw Error(It(174));return e}function s1(e,t){switch(jr(Ff,t),jr(Rf,e),jr(Ra,Wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hg(t,e)}Er(Ra),jr(Ra,t)}function Nc(){Er(Ra),Er(Rf),Er(Ff)}function y2(e){au(Ff.current);var t=au(Ra.current),r=Hg(t,e.type);t!==r&&(jr(Rf,e),jr(Ra,r))}function qy(e){Rf.current===e&&(Er(Ra),Er(Rf))}var Br=yl(0);function Dp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ds=null,Qs=null,Fa=!1;function B5(e,t){var r=Lo(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function v2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function l1(e){if(Fa){var t=Qs;if(t){var r=t;if(!v2(e,t)){if(t=Ic(r.nextSibling),!t||!v2(e,t)){e.flags=e.flags&-1025|2,Fa=!1,ds=e;return}B5(ds,r)}ds=e,Qs=Ic(t.firstChild)}else e.flags=e.flags&-1025|2,Fa=!1,ds=e}}function x2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ds=e}function Ud(e){if(e!==ds)return!1;if(!Fa)return x2(e),Fa=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!n1(t,e.memoizedProps))for(t=Qs;t;)B5(e,t),t=Ic(t.nextSibling);if(x2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(It(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qs=Ic(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qs=null}}else Qs=ds?Ic(e.stateNode.nextSibling):null;return!0}function cg(){Qs=ds=null,Fa=!1}var kc=[];function Jy(){for(var e=0;e<kc.length;e++)kc[e]._workInProgressVersionPrimary=null;kc.length=0}var ff=vu.ReactCurrentDispatcher,Bo=vu.ReactCurrentBatchConfig,Bf=0,Wr=null,Si=null,di=null,Np=!1,df=!1;function Qi(){throw Error(It(321))}function Qy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zo(e[r],t[r]))return!1;return!0}function ev(e,t,r,l,c,f){if(Bf=f,Wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ff.current=e===null||e.memoizedState===null?j8:D8,e=r(l,c),df){f=0;do{if(df=!1,!(25>f))throw Error(It(301));f+=1,di=Si=null,t.updateQueue=null,ff.current=N8,e=r(l,c)}while(df)}if(ff.current=Gp,t=Si!==null&&Si.next!==null,Bf=0,di=Si=Wr=null,Np=!1,t)throw Error(It(300));return e}function su(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Wr.memoizedState=di=e:di=di.next=e,di}function _u(){if(Si===null){var e=Wr.alternate;e=e!==null?e.memoizedState:null}else e=Si.next;var t=di===null?Wr.memoizedState:di.next;if(t!==null)di=t,Si=e;else{if(e===null)throw Error(It(310));Si=e,e={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},di===null?Wr.memoizedState=di=e:di=di.next=e}return di}function za(e,t){return typeof t=="function"?t(e):t}function Dh(e){var t=_u(),r=t.queue;if(r===null)throw Error(It(311));r.lastRenderedReducer=e;var l=Si,c=l.baseQueue,f=r.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}l.baseQueue=c=f,r.pending=null}if(c!==null){c=c.next,l=l.baseState;var s=g=f=null,_=c;do{var E=_.lane;if((Bf&E)===E)s!==null&&(s=s.next={lane:0,action:_.action,eagerReducer:_.eagerReducer,eagerState:_.eagerState,next:null}),l=_.eagerReducer===e?_.eagerState:e(l,_.action);else{var C={lane:E,action:_.action,eagerReducer:_.eagerReducer,eagerState:_.eagerState,next:null};s===null?(g=s=C,f=l):s=s.next=C,Wr.lanes|=E,Zf|=E}_=_.next}while(_!==null&&_!==c);s===null?f=l:s.next=g,zo(l,t.memoizedState)||(la=!0),t.memoizedState=l,t.baseState=f,t.baseQueue=s,r.lastRenderedState=l}return[t.memoizedState,r.dispatch]}function Nh(e){var t=_u(),r=t.queue;if(r===null)throw Error(It(311));r.lastRenderedReducer=e;var l=r.dispatch,c=r.pending,f=t.memoizedState;if(c!==null){r.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);zo(f,t.memoizedState)||(la=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,l]}function _2(e,t,r){var l=t._getVersion;l=l(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===l:(e=e.mutableReadLanes,(e=(Bf&e)===e)&&(t._workInProgressVersionPrimary=l,kc.push(t))),e)return r(t._source);throw kc.push(t),Error(It(350))}function j5(e,t,r,l){var c=Hi;if(c===null)throw Error(It(349));var f=t._getVersion,g=f(t._source),s=ff.current,_=s.useState(function(){return _2(c,t,r)}),E=_[1],C=_[0];_=di;var S=e.memoizedState,I=S.refs,D=I.getSnapshot,J=S.source;S=S.subscribe;var X=Wr;return e.memoizedState={refs:I,source:t,subscribe:l},s.useEffect(function(){I.getSnapshot=r,I.setSnapshot=E;var G=f(t._source);if(!zo(g,G)){G=r(t._source),zo(C,G)||(E(G),G=al(X),c.mutableReadLanes|=G&c.pendingLanes),G=c.mutableReadLanes,c.entangledLanes|=G;for(var U=c.entanglements,H=G;0<H;){var $=31-cl(H),ne=1<<$;U[$]|=G,H&=~ne}}},[r,t,l]),s.useEffect(function(){return l(t._source,function(){var G=I.getSnapshot,U=I.setSnapshot;try{U(G(t._source));var H=al(X);c.mutableReadLanes|=H&c.pendingLanes}catch($){U(function(){throw $})}})},[t,l]),zo(D,r)&&zo(J,t)&&zo(S,l)||(e={pending:null,dispatch:null,lastRenderedReducer:za,lastRenderedState:C},e.dispatch=E=rv.bind(null,Wr,e),_.queue=e,_.baseQueue=null,C=_2(c,t,r),_.memoizedState=_.baseState=C),C}function D5(e,t,r){var l=_u();return j5(l,e,t,r)}function Uh(e){var t=su();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:za,lastRenderedState:e},e=e.dispatch=rv.bind(null,Wr,e),[t.memoizedState,e]}function Up(e,t,r,l){return e={tag:e,create:t,destroy:r,deps:l,next:null},t=Wr.updateQueue,t===null?(t={lastEffect:null},Wr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(l=r.next,r.next=e,e.next=l,t.lastEffect=e)),e}function b2(e){var t=su();return e={current:e},t.memoizedState=e}function Vp(){return _u().memoizedState}function u1(e,t,r,l){var c=su();Wr.flags|=e,c.memoizedState=Up(1|t,r,void 0,l===void 0?null:l)}function tv(e,t,r,l){var c=_u();l=l===void 0?null:l;var f=void 0;if(Si!==null){var g=Si.memoizedState;if(f=g.destroy,l!==null&&Qy(l,g.deps)){Up(t,r,f,l);return}}Wr.flags|=e,c.memoizedState=Up(1|t,r,f,l)}function w2(e,t){return u1(516,4,e,t)}function $p(e,t){return tv(516,4,e,t)}function N5(e,t){return tv(4,2,e,t)}function U5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function V5(e,t,r){return r=r!=null?r.concat([e]):null,tv(4,2,U5.bind(null,t,e),r)}function nv(){}function $5(e,t){var r=_u();t=t===void 0?null:t;var l=r.memoizedState;return l!==null&&t!==null&&Qy(t,l[1])?l[0]:(r.memoizedState=[e,t],e)}function G5(e,t){var r=_u();t=t===void 0?null:t;var l=r.memoizedState;return l!==null&&t!==null&&Qy(t,l[1])?l[0]:(e=e(),r.memoizedState=[e,t],e)}function B8(e,t){var r=Dc();hu(98>r?98:r,function(){e(!0)}),hu(97<r?97:r,function(){var l=Bo.transition;Bo.transition=1;try{e(!1),t()}finally{Bo.transition=l}})}function rv(e,t,r){var l=mo(),c=al(e),f={lane:c,action:r,eagerReducer:null,eagerState:null,next:null},g=t.pending;if(g===null?f.next=f:(f.next=g.next,g.next=f),t.pending=f,g=e.alternate,e===Wr||g!==null&&g===Wr)df=Np=!0;else{if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var s=t.lastRenderedState,_=g(s,r);if(f.eagerReducer=g,f.eagerState=_,zo(_,s))return}catch{}finally{}sl(e,c,l)}}var Gp={readContext:jo,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useMutableSource:Qi,useOpaqueIdentifier:Qi,unstable_isNewReconciler:!1},j8={readContext:jo,useCallback:function(e,t){return su().memoizedState=[e,t===void 0?null:t],e},useContext:jo,useEffect:w2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,u1(4,2,U5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return u1(4,2,e,t)},useMemo:function(e,t){var r=su();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var l=su();return t=r!==void 0?r(t):t,l.memoizedState=l.baseState=t,e=l.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=rv.bind(null,Wr,e),[l.memoizedState,e]},useRef:b2,useState:Uh,useDebugValue:nv,useDeferredValue:function(e){var t=Uh(e),r=t[0],l=t[1];return w2(function(){var c=Bo.transition;Bo.transition=1;try{l(e)}finally{Bo.transition=c}},[e]),r},useTransition:function(){var e=Uh(!1),t=e[0];return e=B8.bind(null,e[1]),b2(e),[e,t]},useMutableSource:function(e,t,r){var l=su();return l.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},j5(l,e,t,r)},useOpaqueIdentifier:function(){if(Fa){var e=!1,t=M8(function(){throw e||(e=!0,r("r:"+(sg++).toString(36))),Error(It(355))}),r=Uh(t)[1];return(Wr.mode&2)===0&&(Wr.flags|=516,Up(5,function(){r("r:"+(sg++).toString(36))},void 0,null)),t}return t="r:"+(sg++).toString(36),Uh(t),t},unstable_isNewReconciler:!1},D8={readContext:jo,useCallback:$5,useContext:jo,useEffect:$p,useImperativeHandle:V5,useLayoutEffect:N5,useMemo:G5,useReducer:Dh,useRef:Vp,useState:function(){return Dh(za)},useDebugValue:nv,useDeferredValue:function(e){var t=Dh(za),r=t[0],l=t[1];return $p(function(){var c=Bo.transition;Bo.transition=1;try{l(e)}finally{Bo.transition=c}},[e]),r},useTransition:function(){var e=Dh(za)[0];return[Vp().current,e]},useMutableSource:D5,useOpaqueIdentifier:function(){return Dh(za)[0]},unstable_isNewReconciler:!1},N8={readContext:jo,useCallback:$5,useContext:jo,useEffect:$p,useImperativeHandle:V5,useLayoutEffect:N5,useMemo:G5,useReducer:Nh,useRef:Vp,useState:function(){return Nh(za)},useDebugValue:nv,useDeferredValue:function(e){var t=Nh(za),r=t[0],l=t[1];return $p(function(){var c=Bo.transition;Bo.transition=1;try{l(e)}finally{Bo.transition=c}},[e]),r},useTransition:function(){var e=Nh(za)[0];return[Vp().current,e]},useMutableSource:D5,useOpaqueIdentifier:function(){return Nh(za)[0]},unstable_isNewReconciler:!1},U8=vu.ReactCurrentOwner,la=!1;function eo(e,t,r,l){t.child=e===null?F5(t,null,r,l):jp(t,e.child,r,l)}function E2(e,t,r,l,c){r=r.render;var f=t.ref;return Pc(t,c),l=ev(e,t,r,l,f,c),e!==null&&!la?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,ps(e,t,c)):(t.flags|=1,eo(e,t,l,c),t.child)}function S2(e,t,r,l,c,f){if(e===null){var g=r.type;return typeof g=="function"&&!uv(g)&&g.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=g,H5(e,t,g,l,c,f)):(e=pp(r.type,null,l,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}return g=e.child,(c&f)===0&&(c=g.memoizedProps,r=r.compare,r=r!==null?r:Mf,r(c,l)&&e.ref===t.ref)?ps(e,t,f):(t.flags|=1,e=dl(g,l),e.ref=t.ref,e.return=t,t.child=e)}function H5(e,t,r,l,c,f){if(e!==null&&Mf(e.memoizedProps,l)&&e.ref===t.ref)if(la=!1,(f&c)!==0)(e.flags&16384)!==0&&(la=!0);else return t.lanes=e.lanes,ps(e,t,f);return c1(e,t,r,l,f)}function hg(e,t,r){var l=t.pendingProps,c=l.children,f=e!==null?e.memoizedState:null;if(l.mode==="hidden"||l.mode==="unstable-defer-without-hiding")if((t.mode&4)===0)t.memoizedState={baseLanes:0},$d(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},$d(t,f!==null?f.baseLanes:r);else return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},$d(t,e),null;else f!==null?(l=f.baseLanes|r,t.memoizedState=null):l=r,$d(t,l);return eo(e,t,c,r),t.child}function W5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function c1(e,t,r,l,c){var f=ro(r)?cu:Ii.current;return f=jc(t,f),Pc(t,c),r=ev(e,t,r,l,f,c),e!==null&&!la?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,ps(e,t,c)):(t.flags|=1,eo(e,t,r,c),t.child)}function C2(e,t,r,l,c){if(ro(r)){var f=!0;up(t)}else f=!1;if(Pc(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),O5(t,r,l),a1(t,r,l,c),l=!0;else if(e===null){var g=t.stateNode,s=t.memoizedProps;g.props=s;var _=g.context,E=r.contextType;typeof E=="object"&&E!==null?E=jo(E):(E=ro(r)?cu:Ii.current,E=jc(t,E));var C=r.getDerivedStateFromProps,S=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function";S||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(s!==l||_!==E)&&g2(t,g,l,E),Ws=!1;var I=t.memoizedState;g.state=I,Of(t,l,g,c),_=t.memoizedState,s!==l||I!==_||no.current||Ws?(typeof C=="function"&&(Bp(t,r,C,l),_=t.memoizedState),(s=Ws||m2(t,r,s,l,I,_,E))?(S||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4)):(typeof g.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=l,t.memoizedState=_),g.props=l,g.state=_,g.context=E,l=s):(typeof g.componentDidMount=="function"&&(t.flags|=4),l=!1)}else{g=t.stateNode,z5(e,t),s=t.memoizedProps,E=t.type===t.elementType?s:oa(t.type,s),g.props=E,S=t.pendingProps,I=g.context,_=r.contextType,typeof _=="object"&&_!==null?_=jo(_):(_=ro(r)?cu:Ii.current,_=jc(t,_));var D=r.getDerivedStateFromProps;(C=typeof D=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(s!==S||I!==_)&&g2(t,g,l,_),Ws=!1,I=t.memoizedState,g.state=I,Of(t,l,g,c);var J=t.memoizedState;s!==S||I!==J||no.current||Ws?(typeof D=="function"&&(Bp(t,r,D,l),J=t.memoizedState),(E=Ws||m2(t,r,E,l,I,J,_))?(C||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,J,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,J,_)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof g.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=256),t.memoizedProps=l,t.memoizedState=J),g.props=l,g.state=J,g.context=_,l=E):(typeof g.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=256),l=!1)}return h1(e,t,r,l,f,c)}function h1(e,t,r,l,c,f){W5(e,t);var g=(t.flags&64)!==0;if(!l&&!g)return c&&c2(t,r,!1),ps(e,t,f);l=t.stateNode,U8.current=t;var s=g&&typeof r.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&g?(t.child=jp(t,e.child,null,f),t.child=jp(t,null,s,f)):eo(e,t,s,f),t.memoizedState=l.state,c&&c2(t,r,!0),t.child}function T2(e){var t=e.stateNode;t.pendingContext?u2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&u2(e,t.context,!1),s1(e,t.containerInfo)}var Vd={dehydrated:null,retryLane:0};function A2(e,t,r){var l=t.pendingProps,c=Br.current,f=!1,g;return(g=(t.flags&64)!==0)||(g=e!==null&&e.memoizedState===null?!1:(c&2)!==0),g?(f=!0,t.flags&=-65):e!==null&&e.memoizedState===null||l.fallback===void 0||l.unstable_avoidThisFallback===!0||(c|=1),jr(Br,c&1),e===null?(l.fallback!==void 0&&l1(t),e=l.children,c=l.fallback,f?(e=I2(t,e,c,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Vd,e):typeof l.unstable_expectedLoadTime=="number"?(e=I2(t,e,c,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Vd,t.lanes=33554432,e):(r=cv({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?f?(l=k2(e,t,l.children,l.fallback,r),f=t.child,c=e.child.memoizedState,f.memoizedState=c===null?{baseLanes:r}:{baseLanes:c.baseLanes|r},f.childLanes=e.childLanes&~r,t.memoizedState=Vd,l):(r=P2(e,t,l.children,r),t.memoizedState=null,r):f?(l=k2(e,t,l.children,l.fallback,r),f=t.child,c=e.child.memoizedState,f.memoizedState=c===null?{baseLanes:r}:{baseLanes:c.baseLanes|r},f.childLanes=e.childLanes&~r,t.memoizedState=Vd,l):(r=P2(e,t,l.children,r),t.memoizedState=null,r)}function I2(e,t,r,l){var c=e.mode,f=e.child;return t={mode:"hidden",children:t},(c&2)===0&&f!==null?(f.childLanes=0,f.pendingProps=t):f=cv(t,c,0,null),r=Lc(r,c,l,null),f.return=e,r.return=e,f.sibling=r,e.child=f,r}function P2(e,t,r,l){var c=e.child;return e=c.sibling,r=dl(c,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=l),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function k2(e,t,r,l,c){var f=t.mode,g=e.child;e=g.sibling;var s={mode:"hidden",children:r};return(f&2)===0&&t.child!==g?(r=t.child,r.childLanes=0,r.pendingProps=s,g=r.lastEffect,g!==null?(t.firstEffect=r.firstEffect,t.lastEffect=g,g.nextEffect=null):t.firstEffect=t.lastEffect=null):r=dl(g,s),e!==null?l=dl(e,l):(l=Lc(l,f,c,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,l}function M2(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),M5(e.return,t)}function fg(e,t,r,l,c,f){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:c,lastEffect:f}:(g.isBackwards=t,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=r,g.tailMode=c,g.lastEffect=f)}function z2(e,t,r){var l=t.pendingProps,c=l.revealOrder,f=l.tail;if(eo(e,t,l.children,r),l=Br.current,(l&2)!==0)l=l&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M2(e,r);else if(e.tag===19)M2(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(jr(Br,l),(t.mode&2)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&Dp(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),fg(t,!1,c,r,f,t.lastEffect);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Dp(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}fg(t,!0,r,null,f,t.lastEffect);break;case"together":fg(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ps(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Zf|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(It(153));if(t.child!==null){for(e=t.child,r=dl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var Z5,f1,X5,Y5;Z5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};f1=function(){};X5=function(e,t,r,l){var c=e.memoizedProps;if(c!==l){e=t.stateNode,au(Ra.current);var f=null;switch(r){case"input":c=Dg(e,c),l=Dg(e,l),f=[];break;case"option":c=Vg(e,c),l=Vg(e,l),f=[];break;case"select":c=Tr({},c,{value:void 0}),l=Tr({},l,{value:void 0}),f=[];break;case"textarea":c=$g(e,c),l=$g(e,l),f=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Mp)}Wg(r,l);var g;r=null;for(E in c)if(!l.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var s=c[E];for(g in s)s.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Sf.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in l){var _=l[E];if(s=c!=null?c[E]:void 0,l.hasOwnProperty(E)&&_!==s&&(_!=null||s!=null))if(E==="style")if(s){for(g in s)!s.hasOwnProperty(g)||_&&_.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in _)_.hasOwnProperty(g)&&s[g]!==_[g]&&(r||(r={}),r[g]=_[g])}else r||(f||(f=[]),f.push(E,r)),r=_;else E==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,s=s?s.__html:void 0,_!=null&&s!==_&&(f=f||[]).push(E,_)):E==="children"?typeof _!="string"&&typeof _!="number"||(f=f||[]).push(E,""+_):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Sf.hasOwnProperty(E)?(_!=null&&E==="onScroll"&&wr("scroll",e),f||s===_||(f=[])):typeof _=="object"&&_!==null&&_.$$typeof===ky?_.toString():(f=f||[]).push(E,_))}r&&(f=f||[]).push("style",r);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};Y5=function(e,t,r,l){r!==l&&(t.flags|=4)};function Vh(e,t){if(!Fa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function V8(e,t,r){var l=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ro(t.type)&&Lp(),null;case 3:return Nc(),Er(no),Er(Ii),Jy(),l=t.stateNode,l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ud(t)?t.flags|=4:l.hydrate||(t.flags|=256)),f1(t),null;case 5:qy(t);var c=au(Ff.current);if(r=t.type,e!==null&&t.stateNode!=null)X5(e,t,r,l,c),e.ref!==t.ref&&(t.flags|=128);else{if(!l){if(t.stateNode===null)throw Error(It(166));return null}if(e=au(Ra.current),Ud(t)){l=t.stateNode,r=t.type;var f=t.memoizedProps;switch(l[Js]=t,l[zp]=f,r){case"dialog":wr("cancel",l),wr("close",l);break;case"iframe":case"object":case"embed":wr("load",l);break;case"video":case"audio":for(e=0;e<Zh.length;e++)wr(Zh[e],l);break;case"source":wr("error",l);break;case"img":case"image":case"link":wr("error",l),wr("load",l);break;case"details":wr("toggle",l);break;case"input":z_(l,f),wr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!f.multiple},wr("invalid",l);break;case"textarea":O_(l,f),wr("invalid",l)}Wg(r,f),e=null;for(var g in f)f.hasOwnProperty(g)&&(c=f[g],g==="children"?typeof c=="string"?l.textContent!==c&&(e=["children",c]):typeof c=="number"&&l.textContent!==""+c&&(e=["children",""+c]):Sf.hasOwnProperty(g)&&c!=null&&g==="onScroll"&&wr("scroll",l));switch(r){case"input":Rd(l),L_(l,f,!0);break;case"textarea":Rd(l),R_(l);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(l.onclick=Mp)}l=e,t.updateQueue=l,l!==null&&(t.flags|=4)}else{switch(g=c.nodeType===9?c:c.ownerDocument,e===Gg.html&&(e=Vw(r)),e===Gg.html?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=g.createElement(r,{is:l.is}):(e=g.createElement(r),r==="select"&&(g=e,l.multiple?g.multiple=!0:l.size&&(g.size=l.size))):e=g.createElementNS(e,r),e[Js]=t,e[zp]=l,Z5(e,t,!1,!1),t.stateNode=e,g=Zg(r,l),r){case"dialog":wr("cancel",e),wr("close",e),c=l;break;case"iframe":case"object":case"embed":wr("load",e),c=l;break;case"video":case"audio":for(c=0;c<Zh.length;c++)wr(Zh[c],e);c=l;break;case"source":wr("error",e),c=l;break;case"img":case"image":case"link":wr("error",e),wr("load",e),c=l;break;case"details":wr("toggle",e),c=l;break;case"input":z_(e,l),c=Dg(e,l),wr("invalid",e);break;case"option":c=Vg(e,l);break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=Tr({},l,{value:void 0}),wr("invalid",e);break;case"textarea":O_(e,l),c=$g(e,l),wr("invalid",e);break;default:c=l}Wg(r,c);var s=c;for(f in s)if(s.hasOwnProperty(f)){var _=s[f];f==="style"?Hw(e,_):f==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&$w(e,_)):f==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&Cf(e,_):typeof _=="number"&&Cf(e,""+_):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Sf.hasOwnProperty(f)?_!=null&&f==="onScroll"&&wr("scroll",e):_!=null&&Sy(e,f,_,g))}switch(r){case"input":Rd(e),L_(e,l,!1);break;case"textarea":Rd(e),R_(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ul(l.value));break;case"select":e.multiple=!!l.multiple,f=l.value,f!=null?Cc(e,!!l.multiple,f,!1):l.defaultValue!=null&&Cc(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Mp)}w5(r,l)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)Y5(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(It(166));r=au(Ff.current),au(Ra.current),Ud(t)?(l=t.stateNode,r=t.memoizedProps,l[Js]=t,l.nodeValue!==r&&(t.flags|=4)):(l=(r.nodeType===9?r:r.ownerDocument).createTextNode(l),l[Js]=t,t.stateNode=l)}return null;case 13:return Er(Br),l=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(l=l!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&Ud(t):r=e.memoizedState!==null,l&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Br.current&1)!==0?pi===0&&(pi=3):((pi===0||pi===3)&&(pi=4),Hi===null||(Zf&134217727)===0&&(qc&134217727)===0||Mc(Hi,Ti))),(l||r)&&(t.flags|=4),null);case 4:return Nc(),f1(t),e===null&&x5(t.stateNode.containerInfo),null;case 10:return Yy(t),null;case 17:return ro(t.type)&&Lp(),null;case 19:if(Er(Br),l=t.memoizedState,l===null)return null;if(f=(t.flags&64)!==0,g=l.rendering,g===null)if(f)Vh(l,!1);else{if(pi!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(g=Dp(e),g!==null){for(t.flags|=64,Vh(l,!1),f=g.updateQueue,f!==null&&(t.updateQueue=f,t.flags|=4),l.lastEffect===null&&(t.firstEffect=null),t.lastEffect=l.lastEffect,l=r,r=t.child;r!==null;)f=r,e=l,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jr(Br,Br.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ci()>v1&&(t.flags|=64,f=!0,Vh(l,!1),t.lanes=33554432)}else{if(!f)if(e=Dp(g),e!==null){if(t.flags|=64,f=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vh(l,!0),l.tail===null&&l.tailMode==="hidden"&&!g.alternate&&!Fa)return t=t.lastEffect=l.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Ci()-l.renderingStartTime>v1&&r!==1073741824&&(t.flags|=64,f=!0,Vh(l,!1),t.lanes=33554432);l.isBackwards?(g.sibling=t.child,t.child=g):(r=l.last,r!==null?r.sibling=g:t.child=g,l.last=g)}return l.tail!==null?(r=l.tail,l.rendering=r,l.tail=r.sibling,l.lastEffect=t.lastEffect,l.renderingStartTime=Ci(),r.sibling=null,t=Br.current,jr(Br,f?t&1|2:t&1),r):null;case 23:case 24:return lv(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&l.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(It(156,t.tag))}function $8(e){switch(e.tag){case 1:ro(e.type)&&Lp();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Nc(),Er(no),Er(Ii),Jy(),t=e.flags,(t&64)!==0)throw Error(It(285));return e.flags=t&-4097|64,e;case 5:return qy(e),null;case 13:return Er(Br),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Er(Br),null;case 4:return Nc(),null;case 10:return Yy(e),null;case 23:case 24:return lv(),null;default:return null}}function iv(e,t){try{var r="",l=t;do r+=ES(l),l=l.return;while(l);var c=r}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c}}function d1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var G8=typeof WeakMap=="function"?WeakMap:Map;function K5(e,t,r){r=il(-1,r),r.tag=3,r.payload={element:null};var l=t.value;return r.callback=function(){Wp||(Wp=!0,x1=l),d1(e,t)},r}function q5(e,t,r){r=il(-1,r),r.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=t.value;r.payload=function(){return d1(e,t),l(c)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){typeof l!="function"&&(La===null?La=new Set([this]):La.add(this),d1(e,t));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}var H8=typeof WeakSet=="function"?WeakSet:Set;function L2(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ll(e,r)}else t.current=null}function W8(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,l=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:oa(t.type,r),l),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&Hy(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(It(163))}function Z8(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var l=e.create;e.destroy=l()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;l=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(a3(r,e),t7(r,e)),e=l}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(l=r.elementType===r.type?t.memoizedProps:oa(r.type,t.memoizedProps),e.componentDidUpdate(l,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&p2(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}p2(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&w5(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&t5(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(It(163))}function O2(e,t){for(var r=e;;){if(r.tag===5){var l=r.stateNode;if(t)l=l.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none";else{l=r.stateNode;var c=r.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Gw("display",c)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function R2(e,t){if(uu&&typeof uu.onCommitFiberUnmount=="function")try{uu.onCommitFiberUnmount(Wy,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var l=r,c=l.destroy;if(l=l.tag,c!==void 0)if((l&4)!==0)a3(t,r);else{l=t;try{c()}catch(f){ll(l,f)}}r=r.next}while(r!==e)}break;case 1:if(L2(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(f){ll(t,f)}break;case 5:L2(t);break;case 4:J5(e,t)}}function F2(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function B2(e){return e.tag===5||e.tag===3||e.tag===4}function j2(e){e:{for(var t=e.return;t!==null;){if(B2(t))break e;t=t.return}throw Error(It(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var l=!1;break;case 3:t=t.containerInfo,l=!0;break;case 4:t=t.containerInfo,l=!0;break;default:throw Error(It(161))}r.flags&16&&(Cf(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||B2(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}l?p1(e,r,t):m1(e,r,t)}function p1(e,t,r){var l=e.tag,c=l===5||l===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Mp));else if(l!==4&&(e=e.child,e!==null))for(p1(e,t,r),e=e.sibling;e!==null;)p1(e,t,r),e=e.sibling}function m1(e,t,r){var l=e.tag,c=l===5||l===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(m1(e,t,r),e=e.sibling;e!==null;)m1(e,t,r),e=e.sibling}function J5(e,t){for(var r=t,l=!1,c,f;;){if(!l){l=r.return;e:for(;;){if(l===null)throw Error(It(160));switch(c=l.stateNode,l.tag){case 5:f=!1;break e;case 3:c=c.containerInfo,f=!0;break e;case 4:c=c.containerInfo,f=!0;break e}l=l.return}l=!0}if(r.tag===5||r.tag===6){e:for(var g=e,s=r,_=s;;)if(R2(g,_),_.child!==null&&_.tag!==4)_.child.return=_,_=_.child;else{if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}f?(g=c,s=r.stateNode,g.nodeType===8?g.parentNode.removeChild(s):g.removeChild(s)):c.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){c=r.stateNode.containerInfo,f=!0,r.child.return=r,r=r.child;continue}}else if(R2(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(l=!1)}r.sibling.return=r.return,r=r.sibling}}function dg(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do(l.tag&3)===3&&(e=l.destroy,l.destroy=void 0,e!==void 0&&e()),l=l.next;while(l!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){l=t.memoizedProps;var c=e!==null?e.memoizedProps:l;e=t.type;var f=t.updateQueue;if(t.updateQueue=null,f!==null){for(r[zp]=l,e==="input"&&l.type==="radio"&&l.name!=null&&Nw(r,l),Zg(e,c),t=Zg(e,l),c=0;c<f.length;c+=2){var g=f[c],s=f[c+1];g==="style"?Hw(r,s):g==="dangerouslySetInnerHTML"?$w(r,s):g==="children"?Cf(r,s):Sy(r,g,s,t)}switch(e){case"input":Ng(r,l);break;case"textarea":Uw(r,l);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!l.multiple,f=l.value,f!=null?Cc(r,!!l.multiple,f,!1):e!==!!l.multiple&&(l.defaultValue!=null?Cc(r,!!l.multiple,l.defaultValue,!0):Cc(r,!!l.multiple,l.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(It(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,t5(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(sv=Ci(),O2(t.child,!0)),D2(t);return;case 19:D2(t);return;case 17:return;case 23:case 24:O2(t,t.memoizedState!==null);return}throw Error(It(163))}function D2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new H8),t.forEach(function(l){var c=i7.bind(null,e,l);r.has(l)||(r.add(l),l.then(c,c))})}}function X8(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Y8=Math.ceil,Hp=vu.ReactCurrentDispatcher,ov=vu.ReactCurrentOwner,Sn=0,Hi=null,Jr=null,Ti=0,fu=0,g1=yl(0),pi=0,Dm=null,Kc=0,Zf=0,qc=0,av=0,y1=null,sv=0,v1=1/0;function Jc(){v1=Ci()+500}var tn=null,Wp=!1,x1=null,La=null,fl=!1,pf=null,Xh=90,_1=[],b1=[],ms=null,mf=0,w1=null,hp=-1,fs=0,fp=0,gf=null,dp=!1;function mo(){return(Sn&48)!==0?Ci():hp!==-1?hp:hp=Ci()}function al(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Dc()===99?1:2;if(fs===0&&(fs=Kc),F8.transition!==0){fp!==0&&(fp=y1!==null?y1.pendingLanes:0),e=fs;var t=4186112&~fp;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Dc(),(Sn&4)!==0&&e===98?e=Pp(12,fs):(e=DS(e),e=Pp(e,fs)),e}function sl(e,t,r){if(50<mf)throw mf=0,w1=null,Error(It(185));if(e=Nm(e,t),e===null)return null;zm(e,t,r),e===Hi&&(qc|=t,pi===4&&Mc(e,Ti));var l=Dc();t===1?(Sn&8)!==0&&(Sn&48)===0?E1(e):(Do(e,r),Sn===0&&(Jc(),Da())):((Sn&4)===0||l!==98&&l!==99||(ms===null?ms=new Set([e]):ms.add(e)),Do(e,r)),y1=e}function Nm(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Do(e,t){for(var r=e.callbackNode,l=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes;0<g;){var s=31-cl(g),_=1<<s,E=f[s];if(E===-1){if((_&l)===0||(_&c)!==0){E=t,hc(_);var C=yr;f[s]=10<=C?E+250:6<=C?E+5e3:-1}}else E<=t&&(e.expiredLanes|=_);g&=~_}if(l=Pf(e,e===Hi?Ti:0),t=yr,l===0)r!==null&&(r!==lg&&i1(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==lg&&i1(r)}t===15?(r=E1.bind(null,e),cs===null?(cs=[r],cp=Zy(Bm,k5)):cs.push(r),r=lg):t===14?r=Lf(99,E1.bind(null,e)):(r=NS(t),r=Lf(r,Q5.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function Q5(e){if(hp=-1,fp=fs=0,(Sn&48)!==0)throw Error(It(327));var t=e.callbackNode;if(vl()&&e.callbackNode!==t)return null;var r=Pf(e,e===Hi?Ti:0);if(r===0)return null;var l=r,c=Sn;Sn|=16;var f=r3();(Hi!==e||Ti!==l)&&(Jc(),zc(e,l));do try{J8();break}catch(s){n3(e,s)}while(1);if(Xy(),Hp.current=f,Sn=c,Jr!==null?l=0:(Hi=null,Ti=0,l=pi),(Kc&qc)!==0)zc(e,0);else if(l!==0){if(l===2&&(Sn|=64,e.hydrate&&(e.hydrate=!1,Hy(e.containerInfo)),r=l5(e),r!==0&&(l=Yh(e,r))),l===1)throw t=Dm,zc(e,0),Mc(e,r),Do(e,Ci()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,l){case 0:case 1:throw Error(It(345));case 2:tu(e);break;case 3:if(Mc(e,r),(r&62914560)===r&&(l=sv+500-Ci(),10<l)){if(Pf(e,0)!==0)break;if(c=e.suspendedLanes,(c&r)!==r){mo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=a2(tu.bind(null,e),l);break}tu(e);break;case 4:if(Mc(e,r),(r&4186112)===r)break;for(l=e.eventTimes,c=-1;0<r;){var g=31-cl(r);f=1<<g,g=l[g],g>c&&(c=g),r&=~f}if(r=c,r=Ci()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Y8(r/1960))-r,10<r){e.timeoutHandle=a2(tu.bind(null,e),r);break}tu(e);break;case 5:tu(e);break;default:throw Error(It(329))}}return Do(e,Ci()),e.callbackNode===t?Q5.bind(null,e):null}function Mc(e,t){for(t&=~av,t&=~qc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-cl(t),l=1<<r;e[r]=-1,t&=~l}}function E1(e){if((Sn&48)!==0)throw Error(It(327));if(vl(),e===Hi&&(e.expiredLanes&Ti)!==0){var t=Ti,r=Yh(e,t);(Kc&qc)!==0&&(t=Pf(e,t),r=Yh(e,t))}else t=Pf(e,0),r=Yh(e,t);if(e.tag!==0&&r===2&&(Sn|=64,e.hydrate&&(e.hydrate=!1,Hy(e.containerInfo)),t=l5(e),t!==0&&(r=Yh(e,t))),r===1)throw r=Dm,zc(e,0),Mc(e,t),Do(e,Ci()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,tu(e),Do(e,Ci()),null}function K8(){if(ms!==null){var e=ms;ms=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Do(t,Ci())})}Da()}function e3(e,t){var r=Sn;Sn|=1;try{return e(t)}finally{Sn=r,Sn===0&&(Jc(),Da())}}function t3(e,t){var r=Sn;Sn&=-2,Sn|=8;try{return e(t)}finally{Sn=r,Sn===0&&(Jc(),Da())}}function $d(e,t){jr(g1,fu),fu|=t,Kc|=t}function lv(){fu=g1.current,Er(g1)}function zc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,k8(r)),Jr!==null)for(r=Jr.return;r!==null;){var l=r;switch(l.tag){case 1:l=l.type.childContextTypes,l!=null&&Lp();break;case 3:Nc(),Er(no),Er(Ii),Jy();break;case 5:qy(l);break;case 4:Nc();break;case 13:Er(Br);break;case 19:Er(Br);break;case 10:Yy(l);break;case 23:case 24:lv()}r=r.return}Hi=e,Jr=dl(e.current,null),Ti=fu=Kc=t,pi=0,Dm=null,av=qc=Zf=0}function n3(e,t){do{var r=Jr;try{if(Xy(),ff.current=Gp,Np){for(var l=Wr.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Np=!1}if(Bf=0,di=Si=Wr=null,df=!1,ov.current=null,r===null||r.return===null){pi=1,Dm=t,Jr=null;break}e:{var f=e,g=r.return,s=r,_=t;if(t=Ti,s.flags|=2048,s.firstEffect=s.lastEffect=null,_!==null&&typeof _=="object"&&typeof _.then=="function"){var E=_;if((s.mode&2)===0){var C=s.alternate;C?(s.updateQueue=C.updateQueue,s.memoizedState=C.memoizedState,s.lanes=C.lanes):(s.updateQueue=null,s.memoizedState=null)}var S=(Br.current&1)!==0,I=g;do{var D;if(D=I.tag===13){var J=I.memoizedState;if(J!==null)D=J.dehydrated!==null;else{var X=I.memoizedProps;D=X.fallback===void 0?!1:X.unstable_avoidThisFallback!==!0?!0:!S}}if(D){var G=I.updateQueue;if(G===null){var U=new Set;U.add(E),I.updateQueue=U}else G.add(E);if((I.mode&2)===0){if(I.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var H=il(-1,1);H.tag=2,ol(s,H)}s.lanes|=1;break e}_=void 0,s=t;var $=f.pingCache;if($===null?($=f.pingCache=new G8,_=new Set,$.set(E,_)):(_=$.get(E),_===void 0&&(_=new Set,$.set(E,_))),!_.has(s)){_.add(s);var ne=r7.bind(null,f,E,s);E.then(ne,ne)}I.flags|=4096,I.lanes=t;break e}I=I.return}while(I!==null);_=Error((Sc(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}pi!==5&&(pi=2),_=iv(_,s),I=g;do{switch(I.tag){case 3:f=_,I.flags|=4096,t&=-t,I.lanes|=t;var W=K5(I,f,t);d2(I,W);break e;case 1:f=_;var F=I.type,w=I.stateNode;if((I.flags&64)===0&&(typeof F.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(La===null||!La.has(w)))){I.flags|=4096,t&=-t,I.lanes|=t;var k=q5(I,f,t);d2(I,k);break e}}I=I.return}while(I!==null)}o3(r)}catch(B){t=B,Jr===r&&r!==null&&(Jr=r=r.return);continue}break}while(1)}function r3(){var e=Hp.current;return Hp.current=Gp,e===null?Gp:e}function Yh(e,t){var r=Sn;Sn|=16;var l=r3();Hi===e&&Ti===t||zc(e,t);do try{q8();break}catch(c){n3(e,c)}while(1);if(Xy(),Sn=r,Hp.current=l,Jr!==null)throw Error(It(261));return Hi=null,Ti=0,pi}function q8(){for(;Jr!==null;)i3(Jr)}function J8(){for(;Jr!==null&&!L8();)i3(Jr)}function i3(e){var t=s3(e.alternate,e,fu);e.memoizedProps=e.pendingProps,t===null?o3(e):Jr=t,ov.current=null}function o3(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=V8(r,t,fu),r!==null){Jr=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(fu&1073741824)!==0||(r.mode&4)===0){for(var l=0,c=r.child;c!==null;)l|=c.lanes|c.childLanes,c=c.sibling;r.childLanes=l}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=$8(t),r!==null){r.flags&=2047,Jr=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Jr=t;return}Jr=t=e}while(t!==null);pi===0&&(pi=5)}function tu(e){var t=Dc();return hu(99,Q8.bind(null,e,t)),null}function Q8(e,t){do vl();while(pf!==null);if((Sn&48)!==0)throw Error(It(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(It(177));e.callbackNode=null;var l=r.lanes|r.childLanes,c=l,f=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var g=e.eventTimes,s=e.expirationTimes;0<f;){var _=31-cl(f),E=1<<_;c[_]=0,g[_]=-1,s[_]=-1,f&=~E}if(ms!==null&&(l&24)===0&&ms.has(e)&&ms.delete(e),e===Hi&&(Jr=Hi=null,Ti=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,l=r.firstEffect):l=r:l=r.firstEffect,l!==null){if(c=Sn,Sn|=32,ov.current=null,og=ap,g=Q_(),Qg(g)){if("selectionStart"in g)s={start:g.selectionStart,end:g.selectionEnd};else e:if(s=(s=g.ownerDocument)&&s.defaultView||window,(E=s.getSelection&&s.getSelection())&&E.rangeCount!==0){s=E.anchorNode,f=E.anchorOffset,_=E.focusNode,E=E.focusOffset;try{s.nodeType,_.nodeType}catch{s=null;break e}var C=0,S=-1,I=-1,D=0,J=0,X=g,G=null;t:for(;;){for(var U;X!==s||f!==0&&X.nodeType!==3||(S=C+f),X!==_||E!==0&&X.nodeType!==3||(I=C+E),X.nodeType===3&&(C+=X.nodeValue.length),(U=X.firstChild)!==null;)G=X,X=U;for(;;){if(X===g)break t;if(G===s&&++D===f&&(S=C),G===_&&++J===E&&(I=C),(U=X.nextSibling)!==null)break;X=G,G=X.parentNode}X=U}s=S===-1||I===-1?null:{start:S,end:I}}else s=null;s=s||{start:0,end:0}}else s=null;ag={focusedElem:g,selectionRange:s},ap=!1,gf=null,dp=!1,tn=l;do try{e7()}catch(B){if(tn===null)throw Error(It(330));ll(tn,B),tn=tn.nextEffect}while(tn!==null);gf=null,tn=l;do try{for(g=e;tn!==null;){var H=tn.flags;if(H&16&&Cf(tn.stateNode,""),H&128){var $=tn.alternate;if($!==null){var ne=$.ref;ne!==null&&(typeof ne=="function"?ne(null):ne.current=null)}}switch(H&1038){case 2:j2(tn),tn.flags&=-3;break;case 6:j2(tn),tn.flags&=-3,dg(tn.alternate,tn);break;case 1024:tn.flags&=-1025;break;case 1028:tn.flags&=-1025,dg(tn.alternate,tn);break;case 4:dg(tn.alternate,tn);break;case 8:s=tn,J5(g,s);var W=s.alternate;F2(s),W!==null&&F2(W)}tn=tn.nextEffect}}catch(B){if(tn===null)throw Error(It(330));ll(tn,B),tn=tn.nextEffect}while(tn!==null);if(ne=ag,$=Q_(),H=ne.focusedElem,g=ne.selectionRange,$!==H&&H&&H.ownerDocument&&g5(H.ownerDocument.documentElement,H)){for(g!==null&&Qg(H)&&($=g.start,ne=g.end,ne===void 0&&(ne=$),"selectionStart"in H?(H.selectionStart=$,H.selectionEnd=Math.min(ne,H.value.length)):(ne=($=H.ownerDocument||document)&&$.defaultView||window,ne.getSelection&&(ne=ne.getSelection(),s=H.textContent.length,W=Math.min(g.start,s),g=g.end===void 0?W:Math.min(g.end,s),!ne.extend&&W>g&&(s=g,g=W,W=s),s=J_(H,W),f=J_(H,g),s&&f&&(ne.rangeCount!==1||ne.anchorNode!==s.node||ne.anchorOffset!==s.offset||ne.focusNode!==f.node||ne.focusOffset!==f.offset)&&($=$.createRange(),$.setStart(s.node,s.offset),ne.removeAllRanges(),W>g?(ne.addRange($),ne.extend(f.node,f.offset)):($.setEnd(f.node,f.offset),ne.addRange($)))))),$=[],ne=H;ne=ne.parentNode;)ne.nodeType===1&&$.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<$.length;H++)ne=$[H],ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}ap=!!og,ag=og=null,e.current=r,tn=l;do try{for(H=e;tn!==null;){var F=tn.flags;if(F&36&&Z8(H,tn.alternate,tn),F&128){$=void 0;var w=tn.ref;if(w!==null){var k=tn.stateNode;switch(tn.tag){case 5:$=k;break;default:$=k}typeof w=="function"?w($):w.current=$}}tn=tn.nextEffect}}catch(B){if(tn===null)throw Error(It(330));ll(tn,B),tn=tn.nextEffect}while(tn!==null);tn=null,R8(),Sn=c}else e.current=r;if(fl)fl=!1,pf=e,Xh=t;else for(tn=l;tn!==null;)t=tn.nextEffect,tn.nextEffect=null,tn.flags&8&&(F=tn,F.sibling=null,F.stateNode=null),tn=t;if(l=e.pendingLanes,l===0&&(La=null),l===1?e===w1?mf++:(mf=0,w1=e):mf=0,r=r.stateNode,uu&&typeof uu.onCommitFiberRoot=="function")try{uu.onCommitFiberRoot(Wy,r,void 0,(r.current.flags&64)===64)}catch{}if(Do(e,Ci()),Wp)throw Wp=!1,e=x1,x1=null,e;return(Sn&8)!==0||Da(),null}function e7(){for(;tn!==null;){var e=tn.alternate;dp||gf===null||((tn.flags&8)!==0?j_(tn,gf)&&(dp=!0):tn.tag===13&&X8(e,tn)&&j_(tn,gf)&&(dp=!0));var t=tn.flags;(t&256)!==0&&W8(e,tn),(t&512)===0||fl||(fl=!0,Lf(97,function(){return vl(),null})),tn=tn.nextEffect}}function vl(){if(Xh!==90){var e=97<Xh?97:Xh;return Xh=90,hu(e,n7)}return!1}function t7(e,t){_1.push(t,e),fl||(fl=!0,Lf(97,function(){return vl(),null}))}function a3(e,t){b1.push(t,e),fl||(fl=!0,Lf(97,function(){return vl(),null}))}function n7(){if(pf===null)return!1;var e=pf;if(pf=null,(Sn&48)!==0)throw Error(It(331));var t=Sn;Sn|=32;var r=b1;b1=[];for(var l=0;l<r.length;l+=2){var c=r[l],f=r[l+1],g=c.destroy;if(c.destroy=void 0,typeof g=="function")try{g()}catch(_){if(f===null)throw Error(It(330));ll(f,_)}}for(r=_1,_1=[],l=0;l<r.length;l+=2){c=r[l],f=r[l+1];try{var s=c.create;c.destroy=s()}catch(_){if(f===null)throw Error(It(330));ll(f,_)}}for(s=e.current.firstEffect;s!==null;)e=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=e;return Sn=t,Da(),!0}function N2(e,t,r){t=iv(r,t),t=K5(e,t,1),ol(e,t),t=mo(),e=Nm(e,1),e!==null&&(zm(e,1,t),Do(e,t))}function ll(e,t){if(e.tag===3)N2(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){N2(r,e,t);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(La===null||!La.has(l))){e=iv(t,e);var c=q5(r,e,1);if(ol(r,c),c=mo(),r=Nm(r,1),r!==null)zm(r,1,c),Do(r,c);else if(typeof l.componentDidCatch=="function"&&(La===null||!La.has(l)))try{l.componentDidCatch(t,e)}catch{}break}}r=r.return}}function r7(e,t,r){var l=e.pingCache;l!==null&&l.delete(t),t=mo(),e.pingedLanes|=e.suspendedLanes&r,Hi===e&&(Ti&r)===r&&(pi===4||pi===3&&(Ti&62914560)===Ti&&500>Ci()-sv?zc(e,0):av|=r),Do(e,t)}function i7(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Dc()===99?1:2:(fs===0&&(fs=Kc),t=fc(62914560&~fs),t===0&&(t=4194304))),r=mo(),e=Nm(e,t),e!==null&&(zm(e,t,r),Do(e,r))}var s3;s3=function(e,t,r){var l=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||no.current)la=!0;else if((r&l)!==0)la=(e.flags&16384)!==0;else{switch(la=!1,t.tag){case 3:T2(t),cg();break;case 5:y2(t);break;case 1:ro(t.type)&&up(t);break;case 4:s1(t,t.stateNode.containerInfo);break;case 10:l=t.memoizedProps.value;var c=t.type._context;jr(Op,c._currentValue),c._currentValue=l;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?A2(e,t,r):(jr(Br,Br.current&1),t=ps(e,t,r),t!==null?t.sibling:null);jr(Br,Br.current&1);break;case 19:if(l=(r&t.childLanes)!==0,(e.flags&64)!==0){if(l)return z2(e,t,r);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),jr(Br,Br.current),l)break;return null;case 23:case 24:return t.lanes=0,hg(e,t,r)}return ps(e,t,r)}else la=!1;switch(t.lanes=0,t.tag){case 2:if(l=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=jc(t,Ii.current),Pc(t,r),c=ev(null,t,l,e,c,r),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ro(l)){var f=!0;up(t)}else f=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,Ky(t);var g=l.getDerivedStateFromProps;typeof g=="function"&&Bp(t,l,g,e),c.updater=jm,t.stateNode=c,c._reactInternals=t,a1(t,l,e,r),t=h1(null,t,l,!0,f,r)}else t.tag=0,eo(null,t,c,r),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,f=c._init,c=f(c._payload),t.type=c,f=t.tag=a7(c),e=oa(c,e),f){case 0:t=c1(null,t,c,e,r);break e;case 1:t=C2(null,t,c,e,r);break e;case 11:t=E2(null,t,c,e,r);break e;case 14:t=S2(null,t,c,oa(c.type,e),l,r);break e}throw Error(It(306,c,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:oa(l,c),c1(e,t,l,c,r);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:oa(l,c),C2(e,t,l,c,r);case 3:if(T2(t),l=t.updateQueue,e===null||l===null)throw Error(It(282));if(l=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,z5(e,t),Of(t,l,null,r),l=t.memoizedState.element,l===c)cg(),t=ps(e,t,r);else{if(c=t.stateNode,(f=c.hydrate)&&(Qs=Ic(t.stateNode.containerInfo.firstChild),ds=t,f=Fa=!0),f){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)f=e[c],f._workInProgressVersionPrimary=e[c+1],kc.push(f);for(r=F5(t,null,l,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else eo(e,t,l,r),cg();t=t.child}return t;case 5:return y2(t),e===null&&l1(t),l=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,n1(l,c)?g=null:f!==null&&n1(l,f)&&(t.flags|=16),W5(e,t),eo(e,t,g,r),t.child;case 6:return e===null&&l1(t),null;case 13:return A2(e,t,r);case 4:return s1(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=jp(t,null,l,r):eo(e,t,l,r),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:oa(l,c),E2(e,t,l,c,r);case 7:return eo(e,t,t.pendingProps,r),t.child;case 8:return eo(e,t,t.pendingProps.children,r),t.child;case 12:return eo(e,t,t.pendingProps.children,r),t.child;case 10:e:{l=t.type._context,c=t.pendingProps,g=t.memoizedProps,f=c.value;var s=t.type._context;if(jr(Op,s._currentValue),s._currentValue=f,g!==null)if(s=g.value,f=zo(s,f)?0:(typeof l._calculateChangedBits=="function"?l._calculateChangedBits(s,f):1073741823)|0,f===0){if(g.children===c.children&&!no.current){t=ps(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var _=s.dependencies;if(_!==null){g=s.child;for(var E=_.firstContext;E!==null;){if(E.context===l&&(E.observedBits&f)!==0){s.tag===1&&(E=il(-1,r&-r),E.tag=2,ol(s,E)),s.lanes|=r,E=s.alternate,E!==null&&(E.lanes|=r),M5(s.return,r),_.lanes|=r;break}E=E.next}}else g=s.tag===10&&s.type===t.type?null:s.child;if(g!==null)g.return=s;else for(g=s;g!==null;){if(g===t){g=null;break}if(s=g.sibling,s!==null){s.return=g.return,g=s;break}g=g.return}s=g}eo(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,f=t.pendingProps,l=f.children,Pc(t,r),c=jo(c,f.unstable_observedBits),l=l(c),t.flags|=1,eo(e,t,l,r),t.child;case 14:return c=t.type,f=oa(c,t.pendingProps),f=oa(c.type,f),S2(e,t,c,f,l,r);case 15:return H5(e,t,t.type,t.pendingProps,l,r);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:oa(l,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ro(l)?(e=!0,up(t)):e=!1,Pc(t,r),O5(t,l,c),a1(t,l,c,r),h1(null,t,l,!0,e,r);case 19:return z2(e,t,r);case 23:return hg(e,t,r);case 24:return hg(e,t,r)}throw Error(It(156,t.tag))};function o7(e,t,r,l){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Lo(e,t,r,l){return new o7(e,t,r,l)}function uv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a7(e){if(typeof e=="function")return uv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pm)return 11;if(e===km)return 14}return 2}function dl(e,t){var r=e.alternate;return r===null?(r=Lo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function pp(e,t,r,l,c,f){var g=2;if(l=e,typeof e=="function")uv(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Ys:return Lc(r.children,c,f,t);case Bw:g=8,c|=16;break;case Cy:g=8,c|=1;break;case of:return e=Lo(12,r,t,c|8),e.elementType=of,e.type=of,e.lanes=f,e;case af:return e=Lo(13,r,t,c),e.type=af,e.elementType=af,e.lanes=f,e;case Cp:return e=Lo(19,r,t,c),e.elementType=Cp,e.lanes=f,e;case My:return cv(r,c,f,t);case jg:return e=Lo(24,r,t,c),e.elementType=jg,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ty:g=10;break e;case Ay:g=9;break e;case Pm:g=11;break e;case km:g=14;break e;case Iy:g=16,l=null;break e;case Py:g=22;break e}throw Error(It(130,e==null?e:typeof e,""))}return t=Lo(g,r,t,c),t.elementType=e,t.type=l,t.lanes=f,t}function Lc(e,t,r,l){return e=Lo(7,e,l,t),e.lanes=r,e}function cv(e,t,r,l){return e=Lo(23,e,l,t),e.elementType=My,e.lanes=r,e}function pg(e,t,r){return e=Lo(6,e,null,t),e.lanes=r,e}function mg(e,t,r){return t=Lo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function s7(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=J0(0),this.expirationTimes=J0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J0(0),this.mutableSourceEagerHydrationData=null}function l7(e,t,r){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ru,key:l==null?null:""+l,children:e,containerInfo:t,implementation:r}}function Zp(e,t,r,l){var c=t.current,f=mo(),g=al(c);e:if(r){r=r._reactInternals;t:{if(xu(r)!==r||r.tag!==1)throw Error(It(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ro(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(It(171))}if(r.tag===1){var _=r.type;if(ro(_)){r=S5(r,_,s);break e}}r=s}else r=hl;return t.context===null?t.context=r:t.pendingContext=r,t=il(f,g),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),ol(c,t),sl(c,g,f),g}function gg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function U2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hv(e,t){U2(e,t),(e=e.alternate)&&U2(e,t)}function u7(){return null}function fv(e,t,r){var l=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new s7(e,t,r!=null&&r.hydrate===!0),t=Lo(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,Ky(t),e[Yc]=r.current,x5(e.nodeType===8?e.parentNode:e),l)for(e=0;e<l.length;e++){t=l[e];var c=t._getVersion;c=c(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,c]:r.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=r}fv.prototype.render=function(e){Zp(e,this._internalRoot,null,null)};fv.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zp(null,e,null,function(){t[Yc]=null})};function Xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function c7(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new fv(e,0,t?{hydrate:!0}:void 0)}function Um(e,t,r,l,c){var f=r._reactRootContainer;if(f){var g=f._internalRoot;if(typeof c=="function"){var s=c;c=function(){var E=gg(g);s.call(E)}}Zp(t,g,e,c)}else{if(f=r._reactRootContainer=c7(r,l),g=f._internalRoot,typeof c=="function"){var _=c;c=function(){var E=gg(g);_.call(E)}}t3(function(){Zp(t,g,e,c)})}return gg(g)}Jw=function(e){if(e.tag===13){var t=mo();sl(e,4,t),hv(e,4)}};Fy=function(e){if(e.tag===13){var t=mo();sl(e,67108864,t),hv(e,67108864)}};Qw=function(e){if(e.tag===13){var t=mo(),r=al(e);sl(e,r,t),hv(e,r)}};e5=function(e,t){return t()};Xg=function(e,t,r){switch(t){case"input":if(Ng(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var l=r[t];if(l!==e&&l.form===e.form){var c=Fm(l);if(!c)throw Error(It(90));Dw(l),Ng(l,c)}}}break;case"textarea":Uw(e,r);break;case"select":t=r.value,t!=null&&Cc(e,!!r.multiple,t,!1)}};Ly=e3;Xw=function(e,t,r,l,c){var f=Sn;Sn|=4;try{return hu(98,e.bind(null,t,r,l,c))}finally{Sn=f,Sn===0&&(Jc(),Da())}};Oy=function(){(Sn&49)===0&&(K8(),vl())};Yw=function(e,t){var r=Sn;Sn|=2;try{return e(t)}finally{Sn=r,Sn===0&&(Jc(),Da())}};function l3(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xf(t))throw Error(It(200));return l7(e,t,null,r)}var h7={Events:[Hf,gc,Fm,Ww,Zw,vl,{current:!1}]},$h={findFiberByHostInstance:ou,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},f7={bundleType:$h.bundleType,version:$h.version,rendererPackageName:$h.rendererPackageName,rendererConfig:$h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qw(e),e===null?null:e.stateNode},findFiberByHostInstance:$h.findFiberByHostInstance||u7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{Wy=Gd.inject(f7),uu=Gd}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h7;No.createPortal=l3;No.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(It(188)):Error(It(268,Object.keys(e)));return e=qw(t),e=e===null?null:e.stateNode,e};No.flushSync=function(e,t){var r=Sn;if((r&48)!==0)return e(t);Sn|=1;try{if(e)return hu(99,e.bind(null,t))}finally{Sn=r,Da()}};No.hydrate=function(e,t,r){if(!Xf(t))throw Error(It(200));return Um(null,e,t,!0,r)};No.render=function(e,t,r){if(!Xf(t))throw Error(It(200));return Um(null,e,t,!1,r)};No.unmountComponentAtNode=function(e){if(!Xf(e))throw Error(It(40));return e._reactRootContainer?(t3(function(){Um(null,null,e,!1,function(){e._reactRootContainer=null,e[Yc]=null})}),!0):!1};No.unstable_batchedUpdates=e3;No.unstable_createPortal=function(e,t){return l3(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};No.unstable_renderSubtreeIntoContainer=function(e,t,r,l){if(!Xf(r))throw Error(It(200));if(e==null||e._reactInternals===void 0)throw Error(It(38));return Um(e,t,r,!1,l)};No.version="17.0.2";function u3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u3)}catch(e){console.error(e)}}u3(),Am.exports=No;var d7=Am.exports;var dv={exports:{}};(function(e,t){(function(r,l){e.exports=l()})(Xs,function(){var r,l,c;function f(s,_){if(!r)r=_;else if(!l)l=_;else{var E="var sharedChunk = {}; ("+r+")(sharedChunk); ("+l+")(sharedChunk);",C={};r(C),c=_(C),typeof window!="undefined"&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}f(["exports"],function(s){var _=E;function E(o,n,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=h}function C(o,n,a,h){const p=new _(o,n,a,h);return function(v){return p.solve(v)}}E.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var p=this.sampleCurveX(a)-o;if(Math.abs(p)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=p/v}var x=0,A=1;for(a=o,h=0;h<20&&(p=this.sampleCurveX(a),!(Math.abs(p-o)<n));h++)o>p?x=a:A=a,a=.5*(A-x)+x;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const S=C(.25,.1,.25,1);function I(o,n,a){return Math.min(a,Math.max(n,o))}function D(o,n,a){const h=a-n,p=((o-n)%h+h)%h+n;return p===n?a:p}function J(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}let X=1;function G(o,n){o.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function U(o,n,a){const h={};for(const p in o)h[p]=n.call(a||this,o[p],p,o);return h}function H(o,n,a){const h={};for(const p in o)n.call(a||this,o[p],p,o)&&(h[p]=o[p]);return h}function $(o){return Array.isArray(o)?o.map($):typeof o=="object"&&o?U(o,$):o}const ne={};function W(o){ne[o]||(typeof console!="undefined"&&console.warn(o),ne[o]=!0)}function F(o,n,a){return(a.y-o.y)*(n.x-o.x)>(n.y-o.y)*(a.x-o.x)}function w(o){let n=0;for(let a,h,p=0,v=o.length,x=v-1;p<v;x=p++)a=o[p],h=o[x],n+=(h.x-a.x)*(a.y+h.y);return n}function k(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function B(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let q,K,fe=null;function ge(o){if(fe==null){const n=o.navigator?o.navigator.userAgent:null;fe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return fe}function xe(o){return typeof ImageBitmap!="undefined"&&o instanceof ImageBitmap}const ee={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const a=window.document.createElement("canvas"),h=a.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return a.width=o.width,a.height=o.height,h.drawImage(o,0,0,o.width,o.height),h.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(q||(q=document.createElement("a")),q.href=o,q.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(K==null&&(K=matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}};var re=ie;function ie(o,n){this.x=o,this.y=n}ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,a=o.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),a=Math.sin(o),h=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,n){var a=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ie.convert=function(o){return o instanceof ie?o:Array.isArray(o)?new ie(o[0],o[1]):o};const le={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},_e="mapbox-tiles";let Ie,ce,ke=500,Te=50;function Pe(){typeof caches=="undefined"||Ie||(Ie=caches.open(_e))}let De=1/0;const Ue={supported:!1,testSupport:function(o){!dt&&ot&&(Pt?ht(o):qe=o)}};let qe,ot,dt=!1,Pt=!1;function ht(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,ot),o.isContextLost())return;Ue.supported=!0}catch{}o.deleteTexture(n),dt=!0}typeof document!="undefined"&&(ot=document.createElement("img"),ot.onload=function(){qe&&ht(qe),qe=null,Pt=!0},ot.onerror=function(){dt=!0,qe=null},ot.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Et);class Nt extends Error{constructor(n,a,h,p){super(`AJAXError: ${a} (${n}): ${h}`),this.status=n,this.statusText=a,this.url=h,this.body=p}}const Bt=k()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function cn(o,n){const a=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Bt(),signal:a.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),((x,A,M)=>{if(v)return;const V=Date.now();fetch(h).then(te=>te.ok?((oe,ue,me)=>{(o.type==="arrayBuffer"?oe.arrayBuffer():o.type==="json"?oe.json():oe.text()).then(ve=>{v||(ue&&me&&function(Re,Be,Ze){if(Pe(),!Ie)return;const nt={status:Be.status,statusText:Be.statusText,headers:new Headers};Be.headers.forEach((lt,vt)=>nt.headers.set(vt,lt));const et=B(Be.headers.get("Cache-Control")||"");et["no-store"]||(et["max-age"]&&nt.headers.set("Expires",new Date(Ze+1e3*et["max-age"]).toUTCString()),new Date(nt.headers.get("Expires")).getTime()-Ze<42e4||function(lt,vt){if(ce===void 0)try{new Response(new ReadableStream),ce=!0}catch{ce=!1}ce?vt(lt.body):lt.blob().then(vt)}(Be,lt=>{const vt=new Response(lt,nt);Pe(),Ie&&Ie.then(pt=>pt.put(function(jt){const en=jt.indexOf("?");return en<0?jt:jt.slice(0,en)}(Re.url),vt)).catch(pt=>W(pt.message))}))}(h,ue,me),p=!0,n(null,ve,oe.headers.get("Cache-Control"),oe.headers.get("Expires")))}).catch(ve=>{v||n(new Error(ve.message))})})(te,null,V):te.blob().then(oe=>n(new Nt(te.status,te.statusText,o.url,oe)))).catch(te=>{te.code!==20&&n(new Error(te.message))})})(),{cancel:()=>{v=!0,p||a.abort()}}}const An=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!k()){const h=o.url.substring(0,o.url.indexOf("://"));return(le.REGISTERED_PROTOCOLS[h]||cn)(o,n)}}if(!(/^file:/.test(a=o.url)||/^file:/.test(Bt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return cn(o,n);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var a;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(A){return p(A)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new Nt(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},wn=function(o,n){return An(J(o,{type:"arrayBuffer"}),n)};function on(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const En="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let we,R;we=[],R=0;const O=function(o,n){if(Ue.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),R>=le.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return we.push(v),v}R++;let a=!1;const h=()=>{if(!a)for(a=!0,R--;we.length&&R<le.MAX_PARALLEL_IMAGE_REQUESTS;){const v=we.shift(),{requestParameters:x,callback:A,cancelled:M}=v;M||(v.cancel=O(x,A).cancel)}},p=wn(o,(v,x,A,M)=>{h(),v?n(v):x&&function(V,te,oe,ue){typeof createImageBitmap=="function"?function(me,ve){const Re=new Blob([new Uint8Array(me)],{type:"image/png"});createImageBitmap(Re).then(Be=>{ve(null,Be)}).catch(Be=>{ve(new Error(`Could not load image because of ${Be.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(V,te):function(me,ve,Re,Be){const Ze=new Image;Ze.onload=()=>{ve(null,Ze),URL.revokeObjectURL(Ze.src),Ze.onload=null,window.requestAnimationFrame(()=>{Ze.src=En})},Ze.onerror=()=>ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const nt=new Blob([new Uint8Array(me)],{type:"image/png"});Ze.cacheControl=Re,Ze.expires=Be,Ze.src=me.byteLength?URL.createObjectURL(nt):En}(V,te,oe,ue)}(x,n,A,M)});return{cancel:()=>{p.cancel(),h()}}};function pe(o,n,a){a[o]&&a[o].indexOf(n)!==-1||(a[o]=a[o]||[],a[o].push(n))}function Le(o,n,a){if(a&&a[o]){const h=a[o].indexOf(n);h!==-1&&a[o].splice(h,1)}}class Ke{constructor(n,a={}){J(this,a),this.type=n}}class at extends Ke{constructor(n,a={}){super("error",J({error:n},a))}}class se{on(n,a){return this._listeners=this._listeners||{},pe(n,a,this._listeners),this}off(n,a){return Le(n,a,this._listeners),Le(n,a,this._oneTimeListeners),this}once(n,a){return this._oneTimeListeners=this._oneTimeListeners||{},pe(n,a,this._oneTimeListeners),this}fire(n,a){typeof n=="string"&&(n=new Ke(n,a||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const A of p)A.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const A of v)Le(h,A,this._oneTimeListeners),A.call(this,n);const x=this._eventedParent;x&&(J(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof at&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var T={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class z{constructor(n,a,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function be(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function je(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}function Xe(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Qe(o){if(Array.isArray(o))return o.map(Qe);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const a in o)n[a]=Qe(o[a]);return n}return Xe(o)}class Ht extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Cn{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[h,p]of a)this.bindings[h]=p}concat(n){return new Cn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const fn={kind:"null"},ft={kind:"number"},Mt={kind:"string"},un={kind:"boolean"},Ar={kind:"color"},Yr={kind:"object"},hn={kind:"value"},nr={kind:"collator"},gi={kind:"formatted"},vr={kind:"resolvedImage"};function Nr(o,n){return{kind:"array",itemType:o,N:n}}function Wt(o){if(o.kind==="array"){const n=Wt(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Gt=[fn,ft,Mt,un,Ar,gi,Yr,Nr(hn),vr];function Zt(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Zt(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const a of Gt)if(!Zt(a,n))return null}}return`Expected ${Wt(o)} but found ${Wt(n)} instead.`}function In(o,n){return n.some(a=>a.kind===o.kind)}function Ln(o,n){return n.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var rr,Ur={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ai(o){return(o=Math.round(o))<0?0:o>255?255:o}function da(o){return ai(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Ce(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function Z(o,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(n-o)*a*6:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}try{rr={}.parseCSSColor=function(o){var n,a=o.replace(/ /g,"").toLowerCase();if(a in Ur)return Ur[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=a.indexOf("("),p=a.indexOf(")");if(h!==-1&&p+1===a.length){var v=a.substr(0,h),x=a.substr(h+1,p-(h+1)).split(","),A=1;switch(v){case"rgba":if(x.length!==4)return null;A=Ce(x.pop());case"rgb":return x.length!==3?null:[da(x[0]),da(x[1]),da(x[2]),A];case"hsla":if(x.length!==4)return null;A=Ce(x.pop());case"hsl":if(x.length!==3)return null;var M=(parseFloat(x[0])%360+360)%360/360,V=Ce(x[1]),te=Ce(x[2]),oe=te<=.5?te*(V+1):te+V-te*V,ue=2*te-oe;return[ai(255*Z(ue,oe,M+1/3)),ai(255*Z(ue,oe,M)),ai(255*Z(ue,oe,M-1/3)),A];default:return null}}return null}}catch{}class Q{constructor(n,a,h,p=1){this.r=n,this.g=a,this.b=h,this.a=p}static parse(n){if(!n)return;if(n instanceof Q)return n;if(typeof n!="string")return;const a=rr(n);return a?new Q(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,h,p]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(h)},${p})`}toArray(){const{r:n,g:a,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*n/p,255*a/p,255*h/p,p]}}Q.black=new Q(0,0,0,1),Q.white=new Q(1,1,1,1),Q.transparent=new Q(0,0,0,0),Q.red=new Q(1,0,0,1);class ye{constructor(n,a,h){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ae{constructor(n,a,h,p,v){this.text=n,this.image=a,this.scale=h,this.fontStack=p,this.textColor=v}}class Me{constructor(n){this.sections=n}static fromString(n){return new Me([new Ae(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Me?n:Me.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.name]);continue}n.push(a.text);const h={};a.fontStack&&(h["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(h["font-scale"]=a.scale),a.textColor&&(h["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(h)}return n}}class Ge{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Ge({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Ne(o,n,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,a,h]:[o,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ve(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Q||o instanceof ye||o instanceof Me||o instanceof Ge)return!0;if(Array.isArray(o)){for(const n of o)if(!Ve(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Ve(o[n]))return!1;return!0}return!1}function He(o){if(o===null)return fn;if(typeof o=="string")return Mt;if(typeof o=="boolean")return un;if(typeof o=="number")return ft;if(o instanceof Q)return Ar;if(o instanceof ye)return nr;if(o instanceof Me)return gi;if(o instanceof Ge)return vr;if(Array.isArray(o)){const n=o.length;let a;for(const h of o){const p=He(h);if(a){if(a===p)continue;a=hn;break}a=p}return Nr(a||hn,n)}return Yr}function st(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Q||o instanceof Me||o instanceof Ge?o.toString():JSON.stringify(o)}class mt{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ve(n[1]))return a.error("invalid value");const h=n[1];let p=He(h);const v=a.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new mt(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Q?["rgba"].concat(this.value.toArray()):this.value instanceof Me?this.value.serialize():this.value}}class it{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const $t={string:Mt,number:ft,boolean:un,object:Yr};class At{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let A,M;if(n.length>2){const V=n[1];if(typeof V!="string"||!(V in $t)||V==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);A=$t[V],p++}else A=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);M=n[2],p++}h=Nr(A,M)}else h=$t[v];const x=[];for(;p<n.length;p++){const A=a.parse(n[p],p,hn);if(!A)return null;x.push(A)}return new At(h,x)}evaluate(n){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(n);if(!Zt(this.type,He(h)))return h;if(a===this.args.length-1)throw new it(`Expected value to be of type ${Wt(this.type)}, but found ${Wt(He(h))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const h=n.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){a.push(h.kind);const p=n.N;(typeof p=="number"||this.args.length>1)&&a.push(p)}}return a.concat(this.args.map(h=>h.serialize()))}}class Ut{constructor(n){this.type=gi,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const A=n[x];if(v&&typeof A=="object"&&!Array.isArray(A)){v=!1;let M=null;if(A["font-scale"]&&(M=a.parse(A["font-scale"],1,ft),!M))return null;let V=null;if(A["text-font"]&&(V=a.parse(A["text-font"],1,Nr(Mt)),!V))return null;let te=null;if(A["text-color"]&&(te=a.parse(A["text-color"],1,Ar),!te))return null;const oe=p[p.length-1];oe.scale=M,oe.font=V,oe.textColor=te}else{const M=a.parse(n[x],1,hn);if(!M)return null;const V=M.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:M,scale:null,font:null,textColor:null})}}return new Ut(p)}evaluate(n){return new Me(this.sections.map(a=>{const h=a.content.evaluate(n);return He(h)===vr?new Ae("",h,null,null,null):new Ae(st(h),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const h={};a.scale&&(h["font-scale"]=a.scale.serialize()),a.font&&(h["text-font"]=a.font.serialize()),a.textColor&&(h["text-color"]=a.textColor.serialize()),n.push(h)}return n}}class rn{constructor(n){this.type=vr,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const h=a.parse(n[1],1,Mt);return h?new rn(h):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),h=Ge.fromString(a);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(a)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Vt={"to-boolean":un,"to-color":Ar,"to-number":ft,"to-string":Mt};class xn{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[0];if((h==="to-boolean"||h==="to-string")&&n.length!==2)return a.error("Expected one argument.");const p=Vt[h],v=[];for(let x=1;x<n.length;x++){const A=a.parse(n[x],x,hn);if(!A)return null;v.push(A)}return new xn(p,v)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let a,h;for(const p of this.args){if(a=p.evaluate(n),h=null,a instanceof Q)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Ne(a[0],a[1],a[2],a[3]),!h))return new Q(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new it(h||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(n),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new it(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Me.fromString(st(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Ge.fromString(st(this.args[0].evaluate(n))):st(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Ut([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new rn(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}const Tn=["Unknown","Point","LineString","Polygon"];class _n{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Tn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=Q.parse(n)),a}}class bn{constructor(n,a,h,p){this.name=n,this.type=a,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const h=n[0],p=bn.definitions[h];if(!p)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,A=x.filter(([V])=>!Array.isArray(V)||V.length===n.length-1);let M=null;for(const[V,te]of A){M=new Cs(a.registry,a.path,null,a.scope);const oe=[];let ue=!1;for(let me=1;me<n.length;me++){const ve=n[me],Re=Array.isArray(V)?V[me-1]:V.type,Be=M.parse(ve,1+oe.length,Re);if(!Be){ue=!0;break}oe.push(Be)}if(!ue)if(Array.isArray(V)&&V.length!==oe.length)M.error(`Expected ${V.length} arguments, but found ${oe.length} instead.`);else{for(let me=0;me<oe.length;me++){const ve=Array.isArray(V)?V[me]:V.type,Re=oe[me];M.concat(me+1).checkSubtype(ve,Re.type)}if(M.errors.length===0)return new bn(h,v,te,oe)}}if(A.length===1)a.errors.push(...M.errors);else{const V=(A.length?A:x).map(([oe])=>{return ue=oe,Array.isArray(ue)?`(${ue.map(Wt).join(", ")})`:`(${Wt(ue.type)}...)`;var ue}).join(" | "),te=[];for(let oe=1;oe<n.length;oe++){const ue=a.parse(n[oe],1+te.length);if(!ue)return null;te.push(Wt(ue.type))}a.error(`Expected arguments of type ${V}, but found (${te.join(", ")}) instead.`)}return null}static register(n,a){bn.definitions=a;for(const h in a)n[h]=bn}}class tr{constructor(n,a,h){this.type=nr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const p=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,un);if(!p)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,un);if(!v)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,Mt),!x)?null:new tr(p,v,x)}evaluate(n){return new ye(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const fr=8192;function Jn(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function xo(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Ki(o,n){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(a*p*fr),Math.round(h*p*fr)]}function xl(o,n,a){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-a[0],x=o[1]-a[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function Ua(o,n){let a=!1;for(let x=0,A=n.length;x<A;x++){const M=n[x];for(let V=0,te=M.length;V<te-1;V++){if(xl(o,M[V],M[V+1]))return!1;(p=M[V])[1]>(h=o)[1]!=(v=M[V+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(a=!a)}}var h,p,v;return a}function Qn(o,n){for(let a=0;a<n.length;a++)if(Ua(o,n[a]))return!0;return!1}function qi(o,n,a,h){const p=h[0]-a[0],v=h[1]-a[1],x=(o[0]-a[0])*v-p*(o[1]-a[1]),A=(n[0]-a[0])*v-p*(n[1]-a[1]);return x>0&&A<0||x<0&&A>0}function Su(o,n,a){for(const V of a)for(let te=0;te<V.length-1;++te)if((A=[(x=V[te+1])[0]-(v=V[te])[0],x[1]-v[1]])[0]*(M=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-A[1]*M[0]!=0&&qi(h,p,v,x)&&qi(v,x,h,p))return!0;var h,p,v,x,A,M;return!1}function Cu(o,n){for(let a=0;a<o.length;++a)if(!Ua(o[a],n))return!1;for(let a=0;a<o.length-1;++a)if(Su(o[a],o[a+1],n))return!1;return!0}function Tu(o,n){for(let a=0;a<n.length;a++)if(Cu(o,n[a]))return!0;return!1}function Es(o,n,a){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const A=Ki(o[p][x],a);Jn(n,A),v.push(A)}h.push(v)}return h}function Au(o,n,a){const h=[];for(let p=0;p<o.length;p++){const v=Es(o[p],n,a);h.push(v)}return h}function pa(o,n,a,h){if(o[0]<a[0]||o[0]>a[2]){const p=.5*h;let v=o[0]-a[0]>p?-h:a[0]-o[0]>p?h:0;v===0&&(v=o[0]-a[2]>p?-h:a[2]-o[0]>p?h:0),o[0]+=v}Jn(n,o)}function _l(o,n,a,h){const p=Math.pow(2,h.z)*fr,v=[h.x*fr,h.y*fr],x=[];for(const A of o)for(const M of A){const V=[M.x+v[0],M.y+v[1]];pa(V,n,a,p),x.push(V)}return x}function Iu(o,n,a,h){const p=Math.pow(2,h.z)*fr,v=[h.x*fr,h.y*fr],x=[];for(const M of o){const V=[];for(const te of M){const oe=[te.x+v[0],te.y+v[1]];Jn(n,oe),V.push(oe)}x.push(V)}if(n[2]-n[0]<=p/2){(A=n)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const M of x)for(const V of M)pa(V,n,a,p)}var A;return x}class Vr{constructor(n,a){this.type=un,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ve(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Vr(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Vr(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Vr(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const A=Es(h.coordinates,v,x),M=_l(a.geometry(),p,v,x);if(!xo(p,v))return!1;for(const V of M)if(!Ua(V,A))return!1}if(h.type==="MultiPolygon"){const A=Au(h.coordinates,v,x),M=_l(a.geometry(),p,v,x);if(!xo(p,v))return!1;for(const V of M)if(!Qn(V,A))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const A=Es(h.coordinates,v,x),M=Iu(a.geometry(),p,v,x);if(!xo(p,v))return!1;for(const V of M)if(!Cu(V,A))return!1}if(h.type==="MultiPolygon"){const A=Au(h.coordinates,v,x),M=Iu(a.geometry(),p,v,x);if(!xo(p,v))return!1;for(const V of M)if(!Tu(V,A))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ss(o){if(o instanceof bn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Vr)return!1;let n=!0;return o.eachChild(a=>{n&&!Ss(a)&&(n=!1)}),n}function Va(o){if(o instanceof bn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(a=>{n&&!Va(a)&&(n=!1)}),n}function $a(o,n){if(o instanceof bn&&n.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!$a(h,n)&&(a=!1)}),a}class Ga{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=n[1];return a.scope.has(h)?new Ga(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Cs{constructor(n,a=[],h,p=new Cn,v=[]){this.registry=n,this.path=a,this.key=a.map(x=>`[${x}]`).join(""),this.scope=p,this.errors=v,this.expectedType=h}parse(n,a,h,p,v={}){return a?this.concat(a,h,p)._parse(n,v):this._parse(n,v)}_parse(n,a){function h(p,v,x){return x==="assert"?new At(v,[p]):x==="coerce"?new xn(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const A=this.expectedType,M=x.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||M.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(A,M))return null}else x=h(x,A,a.typeAnnotation||"coerce");else x=h(x,A,a.typeAnnotation||"assert")}if(!(x instanceof mt)&&x.type.kind!=="resolvedImage"&&Ts(x)){const A=new _n;try{x=new mt(x.type,x.evaluate(A))}catch(M){return this.error(M.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Cs(this.registry,p,a||null,v,this.errors)}error(n,...a){const h=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ht(h,n))}checkSubtype(n,a){const h=Zt(n,a);return h&&this.error(h),h}}function Ts(o){if(o instanceof Ga)return Ts(o.boundExpression);if(o instanceof bn&&o.name==="error"||o instanceof tr||o instanceof Vr)return!1;const n=o instanceof xn||o instanceof At;let a=!0;return o.eachChild(h=>{a=n?a&&Ts(h):a&&h instanceof mt}),!!a&&Ss(o)&&$a(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _o(o,n){const a=o.length-1;let h,p,v=0,x=a,A=0;for(;v<=x;)if(A=Math.floor((v+x)/2),h=o[A],p=o[A+1],h<=n){if(A===a||n<p)return A;v=A+1}else{if(!(h>n))throw new it("Input is not a number.");x=A-1}return 0}class ma{constructor(n,a,h){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(n[1],1,ft);if(!h)return null;const p=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<n.length;x+=2){const A=x===1?-1/0:n[x],M=n[x+1],V=x,te=x+1;if(typeof A!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(p.length&&p[p.length-1][0]>=A)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const oe=a.parse(M,te,v);if(!oe)return null;v=v||oe.type,p.push([A,oe])}return new ma(v,h,p)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return h[0].evaluate(n);const v=a.length;return p>=a[v-1]?h[v-1].evaluate(n):h[_o(a,p)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}function ir(o,n,a){return o*(1-a)+n*a}var As=Object.freeze({__proto__:null,number:ir,color:function(o,n,a){return new Q(ir(o.r,n.r,a),ir(o.g,n.g,a),ir(o.b,n.b,a),ir(o.a,n.a,a))},array:function(o,n,a){return o.map((h,p)=>ir(h,n[p],a))}});const bo=.95047,bl=1.08883,Pu=4/29,wl=6/29,El=3*wl*wl,Sl=Math.PI/180,nh=180/Math.PI;function Cl(o){return o>.008856451679035631?Math.pow(o,1/3):o/El+Pu}function Tl(o){return o>wl?o*o*o:El*(o-Pu)}function Ha(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Al(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function ku(o){const n=Al(o.r),a=Al(o.g),h=Al(o.b),p=Cl((.4124564*n+.3575761*a+.1804375*h)/bo),v=Cl((.2126729*n+.7151522*a+.072175*h)/1);return{l:116*v-16,a:500*(p-v),b:200*(v-Cl((.0193339*n+.119192*a+.9503041*h)/bl)),alpha:o.a}}function Mu(o){let n=(o.l+16)/116,a=isNaN(o.a)?n:n+o.a/500,h=isNaN(o.b)?n:n-o.b/200;return n=1*Tl(n),a=bo*Tl(a),h=bl*Tl(h),new Q(Ha(3.2404542*a-1.5371385*n-.4985314*h),Ha(-.969266*a+1.8760108*n+.041556*h),Ha(.0556434*a-.2040259*n+1.0572252*h),o.alpha)}function jn(o,n,a){const h=n-o;return o+a*(h>180||h<-180?h-360*Math.round(h/360):h)}const ga={forward:ku,reverse:Mu,interpolate:function(o,n,a){return{l:ir(o.l,n.l,a),a:ir(o.a,n.a,a),b:ir(o.b,n.b,a),alpha:ir(o.alpha,n.alpha,a)}}},Wa={forward:function(o){const{l:n,a,b:h}=ku(o),p=Math.atan2(h,a)*nh;return{h:p<0?p+360:p,c:Math.sqrt(a*a+h*h),l:n,alpha:o.a}},reverse:function(o){const n=o.h*Sl,a=o.c;return Mu({l:o.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:o.alpha})},interpolate:function(o,n,a){return{h:jn(o.h,n.h,a),c:ir(o.c,n.c,a),l:ir(o.l,n.l,a),alpha:ir(o.alpha,n.alpha,a)}}};var Il=Object.freeze({__proto__:null,lab:ga,hcl:Wa});class si{constructor(n,a,h,p,v){this.type=n,this.operator=a,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,A]of v)this.labels.push(x),this.outputs.push(A)}static interpolationFactor(n,a,h,p){let v=0;if(n.name==="exponential")v=Pl(a,n.base,h,p);else if(n.name==="linear")v=Pl(a,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new _(x[0],x[1],x[2],x[3]).solve(Pl(a,1,h,p))}return v}static parse(n,a){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const V=p[1];if(typeof V!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:V}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const V=p.slice(1);if(V.length!==4||V.some(te=>typeof te!="number"||te<0||te>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:V}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,ft),!v)return null;const A=[];let M=null;h==="interpolate-hcl"||h==="interpolate-lab"?M=Ar:a.expectedType&&a.expectedType.kind!=="value"&&(M=a.expectedType);for(let V=0;V<x.length;V+=2){const te=x[V],oe=x[V+1],ue=V+3,me=V+4;if(typeof te!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(A.length&&A[A.length-1][0]>=te)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ve=a.parse(oe,me,M);if(!ve)return null;M=M||ve.type,A.push([te,ve])}return M.kind==="number"||M.kind==="color"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new si(M,h,p,v,A):a.error(`Type ${Wt(M)} is not interpolatable.`)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return h[0].evaluate(n);const v=a.length;if(p>=a[v-1])return h[v-1].evaluate(n);const x=_o(a,p),A=si.interpolationFactor(this.interpolation,p,a[x],a[x+1]),M=h[x].evaluate(n),V=h[x+1].evaluate(n);return this.operator==="interpolate"?As[this.type.kind.toLowerCase()](M,V,A):this.operator==="interpolate-hcl"?Wa.reverse(Wa.interpolate(Wa.forward(M),Wa.forward(V),A)):ga.reverse(ga.interpolate(ga.forward(M),ga.forward(V),A))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let h=0;h<this.labels.length;h++)a.push(this.labels[h],this.outputs[h].serialize());return a}}function Pl(o,n,a,h){const p=h-a,v=o-a;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class Za{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let h=null;const p=a.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const A of n.slice(1)){const M=a.parse(A,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!M)return null;h=h||M.type,v.push(M)}const x=p&&v.some(A=>Zt(p,A.type));return new Za(x?hn:h,v)}evaluate(n){let a,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Ge&&!h.available&&(a||(a=h.name),h=null,p===this.args.length&&(h=a)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}class Is{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const A=a.parse(n[v+1],v+1);if(!A)return null;h.push([x,A])}const p=a.parse(n[n.length-1],n.length-1,a.expectedType,h);return p?new Is(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,h]of this.bindings)n.push(a,h.serialize());return n.push(this.result.serialize()),n}}class kl{constructor(n,a,h){this.type=n,this.index=a,this.input=h}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,ft),p=a.parse(n[2],2,Nr(a.expectedType||hn));return h&&p?new kl(p.type.itemType,h,p):null}evaluate(n){const a=this.index.evaluate(n),h=this.input.evaluate(n);if(a<0)throw new it(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new it(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new it(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ml{constructor(n,a){this.type=un,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),p=a.parse(n[2],2,hn);return h&&p?In(h.type,[un,Mt,ft,fn,hn])?new Ml(h,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(h.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ln(a,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(He(a))} instead.`);if(!Ln(h,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Wt(He(h))} instead.`);return h.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Ps{constructor(n,a,h){this.type=ft,this.needle=n,this.haystack=a,this.fromIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),p=a.parse(n[2],2,hn);if(!h||!p)return null;if(!In(h.type,[un,Mt,ft,fn,hn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,ft);return v?new Ps(h,p,v):null}return new Ps(h,p)}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ln(a,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(He(a))} instead.`);if(!Ln(h,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Wt(He(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(a,p)}return h.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class ks{constructor(n,a,h,p,v,x){this.inputType=n,this.type=a,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let h,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const v={},x=[];for(let V=2;V<n.length-1;V+=2){let te=n[V];const oe=n[V+1];Array.isArray(te)||(te=[te]);const ue=a.concat(V);if(te.length===0)return ue.error("Expected at least one branch label.");for(const ve of te){if(typeof ve!="number"&&typeof ve!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ve=="number"&&Math.abs(ve)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ve=="number"&&Math.floor(ve)!==ve)return ue.error("Numeric branch labels must be integer values.");if(h){if(ue.checkSubtype(h,He(ve)))return null}else h=He(ve);if(v[String(ve)]!==void 0)return ue.error("Branch labels must be unique.");v[String(ve)]=x.length}const me=a.parse(oe,V,p);if(!me)return null;p=p||me.type,x.push(me)}const A=a.parse(n[1],1,hn);if(!A)return null;const M=a.parse(n[n.length-1],n.length-1,p);return M?A.type.kind!=="value"&&a.concat(1).checkSubtype(h,A.type)?null:new ks(h,p,A,v,x,M):null}evaluate(n){const a=this.input.evaluate(n);return(He(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),h=[],p={};for(const x of a){const A=p[this.cases[x]];A===void 0?(p[this.cases[x]]=h.length,h.push([this.cases[x],[x]])):h[A][1].push(x)}const v=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,A]of h)n.push(A.length===1?v(A[0]):A.map(v)),n.push(this.outputs[x].serialize());return n.push(this.otherwise.serialize()),n}}class zl{constructor(n,a,h){this.type=n,this.branches=a,this.otherwise=h}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const A=a.parse(n[x],x,un);if(!A)return null;const M=a.parse(n[x+1],x+1,h);if(!M)return null;p.push([A,M]),h=h||M.type}const v=a.parse(n[n.length-1],n.length-1,h);return v?new zl(h,p,v):null}evaluate(n){for(const[a,h]of this.branches)if(a.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,h]of this.branches)n(a),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}class ya{constructor(n,a,h,p){this.type=n,this.input=a,this.beginIndex=h,this.endIndex=p}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),p=a.parse(n[2],2,ft);if(!h||!p)return null;if(!In(h.type,[Nr(hn),Mt,hn]))return a.error(`Expected first argument to be of type array or string, but found ${Wt(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,ft);return v?new ya(h.type,h,p,v):null}return new ya(h.type,h,p)}evaluate(n){const a=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ln(a,["string","array"]))throw new it(`Expected first argument to be of type array or string, but found ${Wt(He(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return a.slice(h,p)}return a.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function zu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Lu(o,n,a,h){return h.compare(n,a)===0}function va(o,n,a){const h=o!=="=="&&o!=="!=";return class c3{constructor(v,x,A){this.type=un,this.lhs=v,this.rhs=x,this.collator=A,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const A=v[0];let M=x.parse(v[1],1,hn);if(!M)return null;if(!zu(A,M.type))return x.concat(1).error(`"${A}" comparisons are not supported for type '${Wt(M.type)}'.`);let V=x.parse(v[2],2,hn);if(!V)return null;if(!zu(A,V.type))return x.concat(2).error(`"${A}" comparisons are not supported for type '${Wt(V.type)}'.`);if(M.type.kind!==V.type.kind&&M.type.kind!=="value"&&V.type.kind!=="value")return x.error(`Cannot compare types '${Wt(M.type)}' and '${Wt(V.type)}'.`);h&&(M.type.kind==="value"&&V.type.kind!=="value"?M=new At(V.type,[M]):M.type.kind!=="value"&&V.type.kind==="value"&&(V=new At(M.type,[V])));let te=null;if(v.length===4){if(M.type.kind!=="string"&&V.type.kind!=="string"&&M.type.kind!=="value"&&V.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(te=x.parse(v[3],3,nr),!te)return null}return new c3(M,V,te)}evaluate(v){const x=this.lhs.evaluate(v),A=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const M=He(x),V=He(A);if(M.kind!==V.kind||M.kind!=="string"&&M.kind!=="number")throw new it(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${V.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const M=He(x),V=He(A);if(M.kind!=="string"||V.kind!=="string")return n(v,x,A)}return this.collator?a(v,x,A,this.collator.evaluate(v)):n(v,x,A)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[o];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const rh=va("==",function(o,n,a){return n===a},Lu),ih=va("!=",function(o,n,a){return n!==a},function(o,n,a,h){return!Lu(0,n,a,h)}),oh=va("<",function(o,n,a){return n<a},function(o,n,a,h){return h.compare(n,a)<0}),Ou=va(">",function(o,n,a){return n>a},function(o,n,a,h){return h.compare(n,a)>0}),Ll=va("<=",function(o,n,a){return n<=a},function(o,n,a,h){return h.compare(n,a)<=0}),ah=va(">=",function(o,n,a){return n>=a},function(o,n,a,h){return h.compare(n,a)>=0});class Ol{constructor(n,a,h,p,v){this.type=Mt,this.number=n,this.locale=a,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const h=a.parse(n[1],1,ft);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=a.parse(p.locale,1,Mt),!v))return null;let x=null;if(p.currency&&(x=a.parse(p.currency,1,Mt),!x))return null;let A=null;if(p["min-fraction-digits"]&&(A=a.parse(p["min-fraction-digits"],1,ft),!A))return null;let M=null;return p["max-fraction-digits"]&&(M=a.parse(p["max-fraction-digits"],1,ft),!M)?null:new Ol(h,v,x,A,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Rl{constructor(n){this.type=ft,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=a.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Wt(h.type)} instead.`):new Rl(h):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new it(`Expected value to be of type string or array, but found ${Wt(He(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}const xa={"==":rh,"!=":ih,">":Ou,"<":oh,">=":ah,"<=":Ll,array:At,at:kl,boolean:At,case:zl,coalesce:Za,collator:tr,format:Ut,image:rn,in:Ml,"index-of":Ps,interpolate:si,"interpolate-hcl":si,"interpolate-lab":si,length:Rl,let:Is,literal:mt,match:ks,number:At,"number-format":Ol,object:At,slice:ya,step:ma,string:At,"to-boolean":xn,"to-color":xn,"to-number":xn,"to-string":xn,var:Ga,within:Vr};function Fl(o,[n,a,h,p]){n=n.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=Ne(n,a,h,v);if(x)throw new it(x);return new Q(n/255*v,a/255*v,h/255*v,v)}function Ru(o,n){return o in n}function Bl(o,n){const a=n[o];return a===void 0?null:a}function Uo(o){return{type:o}}function Fu(o){return{result:"success",value:o}}function io(o){return{result:"error",value:o}}function Vo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function $o(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ms(o){return!!o.expression&&o.expression.interpolated}function Mn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function dr(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function sh(o){return o}function Dn(o,n){const a=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Ms(n)?"exponential":"interval");if(a&&((o=je({},o)).stops&&(o.stops=o.stops.map(V=>[V[0],Q.parse(V[1])])),o.default=Q.parse(o.default?o.default:n.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!Il[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let x,A,M;if(v==="exponential")x=wo;else if(v==="interval")x=pr;else if(v==="categorical"){x=or,A=Object.create(null);for(const V of o.stops)A[V[0]]=V[1];M=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=Bu}if(h){const V={},te=[];for(let me=0;me<o.stops.length;me++){const ve=o.stops[me],Re=ve[0].zoom;V[Re]===void 0&&(V[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},te.push(Re)),V[Re].stops.push([ve[0].value,ve[1]])}const oe=[];for(const me of te)oe.push([V[me].zoom,Dn(V[me],n)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:si.interpolationFactor.bind(void 0,ue),zoomStops:oe.map(me=>me[0]),evaluate:({zoom:me},ve)=>wo({stops:oe,base:o.base},n,me).evaluate(me,ve)}}if(p){const V=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:si.interpolationFactor.bind(void 0,V),zoomStops:o.stops.map(te=>te[0]),evaluate:({zoom:te})=>x(o,n,te,A,M)}}return{kind:"source",evaluate(V,te){const oe=te&&te.properties?te.properties[o.property]:void 0;return oe===void 0?Go(o.default,n.default):x(o,n,oe,A,M)}}}function Go(o,n,a){return o!==void 0?o:n!==void 0?n:a!==void 0?a:void 0}function or(o,n,a,h,p){return Go(typeof a===p?h[a]:void 0,o.default,n.default)}function pr(o,n,a){if(Mn(a)!=="number")return Go(o.default,n.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const p=_o(o.stops.map(v=>v[0]),a);return o.stops[p][1]}function wo(o,n,a){const h=o.base!==void 0?o.base:1;if(Mn(a)!=="number")return Go(o.default,n.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const v=_o(o.stops.map(te=>te[0]),a),x=function(te,oe,ue,me){const ve=me-ue,Re=te-ue;return ve===0?0:oe===1?Re/ve:(Math.pow(oe,Re)-1)/(Math.pow(oe,ve)-1)}(a,h,o.stops[v][0],o.stops[v+1][0]),A=o.stops[v][1],M=o.stops[v+1][1];let V=As[n.type]||sh;if(o.colorSpace&&o.colorSpace!=="rgb"){const te=Il[o.colorSpace];V=(oe,ue)=>te.reverse(te.interpolate(te.forward(oe),te.forward(ue),x))}return typeof A.evaluate=="function"?{evaluate(...te){const oe=A.evaluate.apply(void 0,te),ue=M.evaluate.apply(void 0,te);if(oe!==void 0&&ue!==void 0)return V(oe,ue,x)}}:V(A,M,x)}function Bu(o,n,a){return n.type==="color"?a=Q.parse(a):n.type==="formatted"?a=Me.fromString(a.toString()):n.type==="resolvedImage"?a=Ge.fromString(a.toString()):Mn(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),Go(a,o.default,n.default)}bn.register(xa,{error:[{kind:"error"},[Mt],(o,[n])=>{throw new it(n.evaluate(o))}],typeof:[Mt,[hn],(o,[n])=>Wt(He(n.evaluate(o)))],"to-rgba":[Nr(ft,4),[Ar],(o,[n])=>n.evaluate(o).toArray()],rgb:[Ar,[ft,ft,ft],Fl],rgba:[Ar,[ft,ft,ft,ft],Fl],has:{type:un,overloads:[[[Mt],(o,[n])=>Ru(n.evaluate(o),o.properties())],[[Mt,Yr],(o,[n,a])=>Ru(n.evaluate(o),a.evaluate(o))]]},get:{type:hn,overloads:[[[Mt],(o,[n])=>Bl(n.evaluate(o),o.properties())],[[Mt,Yr],(o,[n,a])=>Bl(n.evaluate(o),a.evaluate(o))]]},"feature-state":[hn,[Mt],(o,[n])=>Bl(n.evaluate(o),o.featureState||{})],properties:[Yr,[],o=>o.properties()],"geometry-type":[Mt,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[ft,[],o=>o.globals.zoom],"heatmap-density":[ft,[],o=>o.globals.heatmapDensity||0],"line-progress":[ft,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ft,Uo(ft),(o,n)=>{let a=0;for(const h of n)a+=h.evaluate(o);return a}],"*":[ft,Uo(ft),(o,n)=>{let a=1;for(const h of n)a*=h.evaluate(o);return a}],"-":{type:ft,overloads:[[[ft,ft],(o,[n,a])=>n.evaluate(o)-a.evaluate(o)],[[ft],(o,[n])=>-n.evaluate(o)]]},"/":[ft,[ft,ft],(o,[n,a])=>n.evaluate(o)/a.evaluate(o)],"%":[ft,[ft,ft],(o,[n,a])=>n.evaluate(o)%a.evaluate(o)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(o,[n,a])=>Math.pow(n.evaluate(o),a.evaluate(o))],sqrt:[ft,[ft],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))],log2:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ft,[ft],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ft,[ft],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ft,[ft],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ft,[ft],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ft,[ft],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ft,[ft],(o,[n])=>Math.atan(n.evaluate(o))],min:[ft,Uo(ft),(o,n)=>Math.min(...n.map(a=>a.evaluate(o)))],max:[ft,Uo(ft),(o,n)=>Math.max(...n.map(a=>a.evaluate(o)))],abs:[ft,[ft],(o,[n])=>Math.abs(n.evaluate(o))],round:[ft,[ft],(o,[n])=>{const a=n.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[ft,[ft],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ft,[ft],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[un,[Mt,hn],(o,[n,a])=>o.properties()[n.value]===a.value],"filter-id-==":[un,[hn],(o,[n])=>o.id()===n.value],"filter-type-==":[un,[Mt],(o,[n])=>o.geometryType()===n.value],"filter-<":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h<p}],"filter-id-<":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<h}],"filter->":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h>p}],"filter-id->":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>h}],"filter-<=":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<=h}],"filter->=":[un,[Mt,hn],(o,[n,a])=>{const h=o.properties()[n.value],p=a.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[un,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>=h}],"filter-has":[un,[hn],(o,[n])=>n.value in o.properties()],"filter-has-id":[un,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[un,[Nr(Mt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[un,[Nr(hn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[un,[Mt,Nr(hn)],(o,[n,a])=>a.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[un,[Mt,Nr(hn)],(o,[n,a])=>function(h,p,v,x){for(;v<=x;){const A=v+x>>1;if(p[A]===h)return!0;p[A]>h?x=A-1:v=A+1}return!1}(o.properties()[n.value],a.value,0,a.value.length-1)],all:{type:un,overloads:[[[un,un],(o,[n,a])=>n.evaluate(o)&&a.evaluate(o)],[Uo(un),(o,n)=>{for(const a of n)if(!a.evaluate(o))return!1;return!0}]]},any:{type:un,overloads:[[[un,un],(o,[n,a])=>n.evaluate(o)||a.evaluate(o)],[Uo(un),(o,n)=>{for(const a of n)if(a.evaluate(o))return!0;return!1}]]},"!":[un,[un],(o,[n])=>!n.evaluate(o)],"is-supported-script":[un,[Mt],(o,[n])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(n.evaluate(o))}],upcase:[Mt,[Mt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Mt,[Mt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Mt,Uo(hn),(o,n)=>n.map(a=>st(a.evaluate(o))).join("")],"resolved-locale":[Mt,[nr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class jl{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new _n,this._defaultValue=a?function(h){return h.type==="color"&&dr(h.default)?new Q(0,0,0,0):h.type==="color"?Q.parse(h.default)||null:h.default===void 0?null:h.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,a,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new it(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console!="undefined"&&console.warn(A.message)),this._defaultValue}}}function Ho(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in xa}function Xa(o,n){const a=new Cs(xa,[],n?function(p){const v={color:Ar,string:Mt,number:ft,enum:Mt,boolean:un,formatted:gi,resolvedImage:vr};return p.type==="array"?Nr(v[p.value]||hn,p.length):v[p.type]}(n):void 0),h=a.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Fu(new jl(h,n)):io(a.errors)}class zs{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Va(a.expression)}evaluateWithoutErrorHandling(n,a,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,p,v,x)}evaluate(n,a,h,p,v,x){return this._styleExpression.evaluate(n,a,h,p,v,x)}}class Ls{constructor(n,a,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Va(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,a,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,p,v,x)}evaluate(n,a,h,p,v,x){return this._styleExpression.evaluate(n,a,h,p,v,x)}interpolationFactor(n,a,h){return this.interpolationType?si.interpolationFactor(this.interpolationType,n,a,h):0}}function Dl(o,n){const a=Xa(o,n);if(a.result==="error")return a;const h=a.value.expression,p=Ss(h);if(!p&&!Vo(n))return io([new Ht("","data expressions not supported")]);const v=$a(h,["zoom"]);if(!v&&!$o(n))return io([new Ht("","zoom expressions not supported")]);const x=yi(h);return x||v?x instanceof Ht?io([x]):x instanceof si&&!Ms(n)?io([new Ht("",'"interpolate" expressions cannot be used with this property')]):Fu(x?new Ls(p?"camera":"composite",a.value,x.labels,x instanceof si?x.interpolation:void 0):new zs(p?"constant":"source",a.value)):io([new Ht("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Eo{constructor(n,a){this._parameters=n,this._specification=a,je(this,Dn(this._parameters,this._specification))}static deserialize(n){return new Eo(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function yi(o){let n=null;if(o instanceof Is)n=yi(o.result);else if(o instanceof Za){for(const a of o.args)if(n=yi(a),n)break}else(o instanceof ma||o instanceof si)&&o.input instanceof bn&&o.input.name==="zoom"&&(n=o);return n instanceof Ht||o.eachChild(a=>{const h=yi(a);h instanceof Ht?n=h:!n&&h?n=new Ht("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ht("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Pi(o){const n=o.key,a=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec;let A=[];const M=Mn(a);if(M!=="object")return[new z(n,a,`object expected, ${M} found`)];for(const V in a){const te=V.split(".")[0],oe=h[te]||h["*"];let ue;if(p[te])ue=p[te];else if(h[te])ue=ar;else if(p["*"])ue=p["*"];else{if(!h["*"]){A.push(new z(n,a[V],`unknown property "${V}"`));continue}ue=ar}A=A.concat(ue({key:(n&&`${n}.`)+V,value:a[V],valueSpec:oe,style:v,styleSpec:x,object:a,objectKey:V},a))}for(const V in h)p[V]||h[V].required&&h[V].default===void 0&&a[V]===void 0&&A.push(new z(n,a,`missing required property "${V}"`));return A}function Nl(o){const n=o.value,a=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||ar;if(Mn(n)!=="array")return[new z(v,n,`array expected, ${Mn(n)} found`)];if(a.length&&n.length!==a.length)return[new z(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new z(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let A={type:a.value,values:a.values};p.$version<7&&(A.function=a.function),Mn(a.value)==="object"&&(A=a.value);let M=[];for(let V=0;V<n.length;V++)M=M.concat(x({array:n,arrayIndex:V,value:n[V],valueSpec:A,style:h,styleSpec:p,key:`${v}[${V}]`}));return M}function Ya(o){const n=o.key,a=o.value,h=o.valueSpec;let p=Mn(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new z(n,a,`number expected, ${p} found`)]:"minimum"in h&&a<h.minimum?[new z(n,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new z(n,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function ju(o){const n=o.valueSpec,a=Xe(o.value.type);let h,p,v,x={};const A=a!=="categorical"&&o.value.property===void 0,M=!A,V=Mn(o.value.stops)==="array"&&Mn(o.value.stops[0])==="array"&&Mn(o.value.stops[0][0])==="object",te=Pi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(me){if(a==="identity")return[new z(me.key,me.value,'identity function may not have a "stops" property')];let ve=[];const Re=me.value;return ve=ve.concat(Nl({key:me.key,value:Re,valueSpec:me.valueSpec,style:me.style,styleSpec:me.styleSpec,arrayElementValidator:oe})),Mn(Re)==="array"&&Re.length===0&&ve.push(new z(me.key,Re,"array must have at least one stop")),ve},default:function(me){return ar({key:me.key,value:me.value,valueSpec:n,style:me.style,styleSpec:me.styleSpec})}}});return a==="identity"&&A&&te.push(new z(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||te.push(new z(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Ms(o.valueSpec)&&te.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!Vo(o.valueSpec)?te.push(new z(o.key,o.value,"property functions not supported")):A&&!$o(o.valueSpec)&&te.push(new z(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!V||o.value.property!==void 0||te.push(new z(o.key,o.value,'"property" property is required')),te;function oe(me){let ve=[];const Re=me.value,Be=me.key;if(Mn(Re)!=="array")return[new z(Be,Re,`array expected, ${Mn(Re)} found`)];if(Re.length!==2)return[new z(Be,Re,`array length 2 expected, length ${Re.length} found`)];if(V){if(Mn(Re[0])!=="object")return[new z(Be,Re,`object expected, ${Mn(Re[0])} found`)];if(Re[0].zoom===void 0)return[new z(Be,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new z(Be,Re,"object stop key must have value")];if(v&&v>Xe(Re[0].zoom))return[new z(Be,Re[0].zoom,"stop zoom values must appear in ascending order")];Xe(Re[0].zoom)!==v&&(v=Xe(Re[0].zoom),p=void 0,x={}),ve=ve.concat(Pi({key:`${Be}[0]`,value:Re[0],valueSpec:{zoom:{}},style:me.style,styleSpec:me.styleSpec,objectElementValidators:{zoom:Ya,value:ue}}))}else ve=ve.concat(ue({key:`${Be}[0]`,value:Re[0],valueSpec:{},style:me.style,styleSpec:me.styleSpec},Re));return Ho(Qe(Re[1]))?ve.concat([new z(`${Be}[1]`,Re[1],"expressions are not allowed in function stops.")]):ve.concat(ar({key:`${Be}[1]`,value:Re[1],valueSpec:n,style:me.style,styleSpec:me.styleSpec}))}function ue(me,ve){const Re=Mn(me.value),Be=Xe(me.value),Ze=me.value!==null?me.value:ve;if(h){if(Re!==h)return[new z(me.key,Ze,`${Re} stop domain type must match previous stop domain type ${h}`)]}else h=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean")return[new z(me.key,Ze,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&a!=="categorical"){let nt=`number expected, ${Re} found`;return Vo(n)&&a===void 0&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(me.key,Ze,nt)]}return a!=="categorical"||Re!=="number"||isFinite(Be)&&Math.floor(Be)===Be?a!=="categorical"&&Re==="number"&&p!==void 0&&Be<p?[new z(me.key,Ze,"stop domain values must appear in ascending order")]:(p=Be,a==="categorical"&&Be in x?[new z(me.key,Ze,"stop domain values must be unique")]:(x[Be]=!0,[])):[new z(me.key,Ze,`integer expected, found ${Be}`)]}}function ki(o){const n=(o.expressionContext==="property"?Dl:Xa)(Qe(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const a=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Va(a))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Va(a))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!$a(a,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ss(a))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oo(o){const n=o.key,a=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Xe(a))===-1&&p.push(new z(n,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(Xe(a))===-1&&p.push(new z(n,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function $r(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!$r(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Wo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _a(o){if(o==null)return{filter:()=>!0,needGeometry:!1};$r(o)||(o=Zo(o));const n=Xa(o,Wo);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,p)=>n.value.evaluate(a,h,{},p),needGeometry:Ka(o)}}function Os(o,n){return o<n?-1:o>n?1:0}function Ka(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Ka(o[n]))return!0;return!1}function Zo(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Xo(o[1],o[2],"=="):n==="!="?Yo(Xo(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Xo(o[1],o[2],n):n==="any"?(a=o.slice(1),["any"].concat(a.map(Zo))):n==="all"?["all"].concat(o.slice(1).map(Zo)):n==="none"?["all"].concat(o.slice(1).map(Zo).map(Yo)):n==="in"?vi(o[1],o.slice(2)):n==="!in"?Yo(vi(o[1],o.slice(2))):n==="has"?ao(o[1]):n==="!has"?Yo(ao(o[1])):n!=="within"||o;var a}function Xo(o,n,a){switch(o){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,o,n]}}function vi(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Os)]]:["filter-in-small",o,["literal",n]]}}function ao(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Yo(o){return["!",o]}function So(o){return $r(Qe(o.value))?ki(je({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ko(o)}function Ko(o){const n=o.value,a=o.key;if(Mn(n)!=="array")return[new z(a,n,`array expected, ${Mn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new z(a,n,"filter array must have at least 1 element")];switch(v=v.concat(oo({key:`${a}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Xe(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Xe(n[1])==="$type"&&v.push(new z(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new z(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Mn(n[1]),p!=="string"&&v.push(new z(`${a}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Mn(n[x]),Xe(n[1])==="$type"?v=v.concat(oo({key:`${a}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new z(`${a}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Ko({key:`${a}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Mn(n[1]),n.length!==2?v.push(new z(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new z(`${a}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Mn(n[1]),n.length!==2?v.push(new z(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new z(`${a}[1]`,n[1],`object expected, ${p} found`))}return v}function Ul(o,n){const a=o.key,h=o.style,p=o.styleSpec,v=o.value,x=o.objectKey,A=p[`${n}_${o.layerType}`];if(!A)return[];const M=x.match(/^(.*)-transition$/);if(n==="paint"&&M&&A[M[1]]&&A[M[1]].transition)return ar({key:a,value:v,valueSpec:p.transition,style:h,styleSpec:p});const V=o.valueSpec||A[x];if(!V)return[new z(a,v,`unknown property "${x}"`)];let te;if(Mn(v)==="string"&&Vo(V)&&!V.tokens&&(te=/^{([^}]+)}$/.exec(v)))return[new z(a,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(te[1])} }\`.`)];const oe=[];return o.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&oe.push(new z(a,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&dr(Qe(v))&&Xe(v.type)==="identity"&&oe.push(new z(a,v,'"text-font" does not support identity functions'))),oe.concat(ar({key:o.key,value:v,valueSpec:V,style:h,styleSpec:p,expressionContext:"property",propertyType:n,propertyKey:x}))}function ba(o){return Ul(o,"paint")}function Vl(o){return Ul(o,"layout")}function $l(o){let n=[];const a=o.value,h=o.key,p=o.style,v=o.styleSpec;a.type||a.ref||n.push(new z(h,a,'either "type" or "ref" is required'));let x=Xe(a.type);const A=Xe(a.ref);if(a.id){const M=Xe(a.id);for(let V=0;V<o.arrayIndex;V++){const te=p.layers[V];Xe(te.id)===M&&n.push(new z(h,a.id,`duplicate layer id "${a.id}", previously used at line ${te.id.__line__}`))}}if("ref"in a){let M;["type","source","source-layer","filter","layout"].forEach(V=>{V in a&&n.push(new z(h,a[V],`"${V}" is prohibited for ref layers`))}),p.layers.forEach(V=>{Xe(V.id)===A&&(M=V)}),M?M.ref?n.push(new z(h,a.ref,"ref cannot reference another ref layer")):x=Xe(M.type):n.push(new z(h,a.ref,`ref layer "${A}" not found`))}else if(x!=="background")if(a.source){const M=p.sources&&p.sources[a.source],V=M&&Xe(M.type);M?V==="vector"&&x==="raster"?n.push(new z(h,a.source,`layer "${a.id}" requires a raster source`)):V==="raster"&&x!=="raster"?n.push(new z(h,a.source,`layer "${a.id}" requires a vector source`)):V!=="vector"||a["source-layer"]?V==="raster-dem"&&x!=="hillshade"?n.push(new z(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||V==="geojson"&&M.lineMetrics||n.push(new z(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new z(h,a.source,`source "${a.source}" not found`))}else n.push(new z(h,a,'missing required property "source"'));return n=n.concat(Pi({key:h,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ar({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:So,layout:M=>Pi({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":V=>Vl(je({layerType:x},V))}}),paint:M=>Pi({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":V=>ba(je({layerType:x},V))}})}})),n}function li(o){const n=o.value,a=o.key,h=Mn(n);return h!=="string"?[new z(a,n,`string expected, ${h} found`)]:[]}const Gl={promoteId:function({key:o,value:n}){if(Mn(n)==="string")return li({key:o,value:n});{const a=[];for(const h in n)a.push(...li({key:`${o}.${h}`,value:n[h]}));return a}}};function Du(o){const n=o.value,a=o.key,h=o.styleSpec,p=o.style;if(!n.type)return[new z(a,n,'"type" is required')];const v=Xe(n.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=Pi({key:a,value:n,valueSpec:h[`source_${v.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Gl}),x;case"geojson":if(x=Pi({key:a,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:Gl}),n.cluster)for(const A in n.clusterProperties){const[M,V]=n.clusterProperties[A],te=typeof M=="string"?[M,["accumulated"],["get",A]]:M;x.push(...ki({key:`${a}.${A}.map`,value:V,expressionContext:"cluster-map"})),x.push(...ki({key:`${a}.${A}.reduce`,value:te,expressionContext:"cluster-reduce"}))}return x;case"video":return Pi({key:a,value:n,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return Pi({key:a,value:n,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new z(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oo({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:h})}}function wa(o){const n=o.value,a=o.styleSpec,h=a.light,p=o.style;let v=[];const x=Mn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new z("light",n,`object expected, ${x} found`)]),v;for(const A in n){const M=A.match(/^(.*)-transition$/);v=v.concat(M&&h[M[1]]&&h[M[1]].transition?ar({key:A,value:n[A],valueSpec:a.transition,style:p,styleSpec:a}):h[A]?ar({key:A,value:n[A],valueSpec:h[A],style:p,styleSpec:a}):[new z(A,n[A],`unknown property "${A}"`)])}return v}const qo={"*":()=>[],array:Nl,boolean:function(o){const n=o.value,a=o.key,h=Mn(n);return h!=="boolean"?[new z(a,n,`boolean expected, ${h} found`)]:[]},number:Ya,color:function(o){const n=o.key,a=o.value,h=Mn(a);return h!=="string"?[new z(n,a,`color expected, ${h} found`)]:rr(a)===null?[new z(n,a,`color expected, "${a}" found`)]:[]},constants:be,enum:oo,filter:So,function:ju,layer:$l,object:Pi,source:Du,light:wa,string:li,formatted:function(o){return li(o).length===0?[]:ki(o)},resolvedImage:function(o){return li(o).length===0?[]:ki(o)}};function ar(o){const n=o.value,a=o.valueSpec,h=o.styleSpec;return a.expression&&dr(Xe(n))?ju(o):a.expression&&Ho(Qe(n))?ki(o):a.type&&qo[a.type]?qo[a.type](o):Pi(je({},o,{valueSpec:a.type?h[a.type]:a}))}function qa(o){const n=o.value,a=o.key,h=li(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(a,n,'"glyphs" url must include a "{range}" token'))),h}function Co(o,n=T){let a=[];return a=a.concat(ar({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:qa,"*":()=>[]}})),o.constants&&(a=a.concat(be({key:"constants",value:o.constants,style:o,styleSpec:n}))),N(a)}function N(o){return[].concat(o).sort((n,a)=>n.line-a.line)}function de(o){return function(...n){return N(o.apply(this,n))}}Co.source=de(Du),Co.light=de(wa),Co.layer=de($l),Co.filter=de(So),Co.paintProperty=de(ba),Co.layoutProperty=de(Vl);const Oe=Co,tt=Oe.light,kt=Oe.paintProperty,Ct=Oe.layoutProperty;function Xt(o,n){let a=!1;if(n&&n.length)for(const h of n)o.fire(new at(new Error(h.message))),a=!0;return a}class Yt{constructor(n,a,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let M=0;M<this.d*this.d;M++){const V=x[3+M],te=x[3+M+1];p.push(V===te?null:x.subarray(V,te))}const A=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],A),this.bboxes=x.subarray(A),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=h,this.scale=a/n,this.uid=0;const v=h/a*n;this.min=-v,this.max=n+v}insert(n,a,h,p,v){this._forEachCell(a,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,h,p,v,x){this.cells[v].push(x)}query(n,a,h,p,v){const x=this.min,A=this.max;if(n<=x&&a<=x&&A<=h&&A<=p&&!v)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(n,a,h,p,this._queryCell,M,{},v),M}}_queryCell(n,a,h,p,v,x,A,M){const V=this.cells[v];if(V!==null){const te=this.keys,oe=this.bboxes;for(let ue=0;ue<V.length;ue++){const me=V[ue];if(A[me]===void 0){const ve=4*me;(M?M(oe[ve+0],oe[ve+1],oe[ve+2],oe[ve+3]):n<=oe[ve+2]&&a<=oe[ve+3]&&h>=oe[ve+0]&&p>=oe[ve+1])?(A[me]=!0,x.push(te[me])):A[me]=!1}}}}_forEachCell(n,a,h,p,v,x,A,M){const V=this._convertToCellCoord(n),te=this._convertToCellCoord(a),oe=this._convertToCellCoord(h),ue=this._convertToCellCoord(p);for(let me=V;me<=oe;me++)for(let ve=te;ve<=ue;ve++){const Re=this.d*ve+me;if((!M||M(this._convertFromCellCoord(me),this._convertFromCellCoord(ve),this._convertFromCellCoord(me+1),this._convertFromCellCoord(ve+1)))&&v.call(this,n,a,h,p,Re,x,A,M))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(a+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=a;for(let x=0;x<n.length;x++){const A=n[x];p[3+x]=v,p.set(A,v),v+=A.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,a){const h=n.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(n){return new Yt(n.buffer)}}const dn={};function _t(o,n,a={}){Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),dn[o]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}_t("Object",Object),_t("TransferableGridIndex",Yt),_t("Color",Q),_t("Error",Error),_t("AJAXError",Nt),_t("ResolvedImage",Ge),_t("StylePropertyFunction",Eo),_t("StyleExpression",jl,{omit:["_evaluator"]}),_t("ZoomDependentExpression",Ls),_t("ZoomConstantExpression",zs),_t("CompoundExpression",bn,{omit:["_evaluate"]});for(const o in xa)xa[o]._classRegistryKey||_t(`Expression_${o}`,xa[o]);function Nn(o){return o&&typeof ArrayBuffer!="undefined"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Zn(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Nn(o)||xe(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return n&&n.push(a.buffer),a}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const h of o)a.push(Zn(h,n));return a}if(typeof o=="object"){const a=o.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");const p=a.serialize?a.serialize(o,n):{};if(!a.serialize){for(const v in o){if(!o.hasOwnProperty(v)||dn[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=dn[h].shallow.indexOf(v)>=0?x:Zn(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function er(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Nn(o)||xe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(er);if(typeof o=="object"){const n=o.$name||"Object";if(!dn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=dn[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=dn[n].shallow.indexOf(p)>=0?v:er(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Ir{constructor(){this.first=!0}update(n,a){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const bt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Mi(o){for(const n of o)if(Rs(n.charCodeAt(0)))return!0;return!1}function so(o){for(const n of o)if(!To(n.charCodeAt(0)))return!1;return!0}function To(o){return!(bt.Arabic(o)||bt["Arabic Supplement"](o)||bt["Arabic Extended-A"](o)||bt["Arabic Presentation Forms-A"](o)||bt["Arabic Presentation Forms-B"](o))}function Rs(o){return!(o!==746&&o!==747&&(o<4352||!(bt["Bopomofo Extended"](o)||bt.Bopomofo(o)||bt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||bt["CJK Compatibility Ideographs"](o)||bt["CJK Compatibility"](o)||bt["CJK Radicals Supplement"](o)||bt["CJK Strokes"](o)||!(!bt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||bt["CJK Unified Ideographs Extension A"](o)||bt["CJK Unified Ideographs"](o)||bt["Enclosed CJK Letters and Months"](o)||bt["Hangul Compatibility Jamo"](o)||bt["Hangul Jamo Extended-A"](o)||bt["Hangul Jamo Extended-B"](o)||bt["Hangul Jamo"](o)||bt["Hangul Syllables"](o)||bt.Hiragana(o)||bt["Ideographic Description Characters"](o)||bt.Kanbun(o)||bt["Kangxi Radicals"](o)||bt["Katakana Phonetic Extensions"](o)||bt.Katakana(o)&&o!==12540||!(!bt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!bt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||bt["Unified Canadian Aboriginal Syllabics"](o)||bt["Unified Canadian Aboriginal Syllabics Extended"](o)||bt["Vertical Forms"](o)||bt["Yijing Hexagram Symbols"](o)||bt["Yi Syllables"](o)||bt["Yi Radicals"](o))))}function Jo(o){return!(Rs(o)||function(n){return!!(bt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||bt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||bt["Letterlike Symbols"](n)||bt["Number Forms"](n)||bt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||bt["Control Pictures"](n)&&n!==9251||bt["Optical Character Recognition"](n)||bt["Enclosed Alphanumerics"](n)||bt["Geometric Shapes"](n)||bt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||bt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||bt["CJK Symbols and Punctuation"](n)||bt.Katakana(n)||bt["Private Use Area"](n)||bt["CJK Compatibility Forms"](n)||bt["Small Form Variants"](n)||bt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Ja(o){return o>=1424&&o<=2303||bt["Arabic Presentation Forms-A"](o)||bt["Arabic Presentation Forms-B"](o)}function r0(o,n){return!(!n&&Ja(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||bt.Khmer(o))}function i0(o){for(const n of o)if(Ja(n.charCodeAt(0)))return!0;return!1}const lh="deferred",Nu="loading",uh="loaded";let ch=null,xi="unavailable",Ea=null;const id=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(xi="error"),ch&&ch(o)};function hh(){fh.fire(new Ke("pluginStateChange",{pluginStatus:xi,pluginURL:Ea}))}const fh=new se,Fs=function(){return xi},od=function(){if(xi!==lh||!Ea)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xi=Nu,hh(),Ea&&wn({url:Ea},o=>{o?id(o):(xi=uh,hh())})},_i={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>xi===uh||_i.applyArabicShaping!=null,isLoading:()=>xi===Nu,setState(o){xi=o.pluginStatus,Ea=o.pluginURL},isParsed:()=>_i.applyArabicShaping!=null&&_i.processBidirectionalText!=null&&_i.processStyledBidirectionalText!=null,getPluginURL:()=>Ea};class sr{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ir,this.transition={})}isSupportedScript(n){return function(a,h){for(const p of a)if(!r0(p.charCodeAt(0),h))return!1;return!0}(n,_i.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class Uu{constructor(n,a){this.property=n,this.value=a,this.expression=function(h,p){if(dr(h))return new Eo(h,p);if(Ho(h)){const v=Dl(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return typeof h=="string"&&p.type==="color"&&(v=Q.parse(h)),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,h){return this.property.possiblyEvaluate(this,n,a,h)}}class dh{constructor(n){this.property=n,this.value=new Uu(n,void 0)}transitioned(n,a){return new ad(this.property,this.value,a,J({},n.transition,this.transition),n.now)}untransitioned(){return new ad(this.property,this.value,null,{},0)}}class ph{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return $(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new dh(this._values[n].property)),this._values[n].value=new Uu(this._values[n].property,a===null?void 0:$(a))}getTransition(n){return $(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new dh(this._values[n].property)),this._values[n].transition=$(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h);const p=this.getTransition(a);p!==void 0&&(n[`${a}-transition`]=p)}return n}transitioned(n,a){const h=new sd(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,a._values[p]);return h}untransitioned(){const n=new sd(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class ad{constructor(n,a,h,p,v){this.property=n,this.value=a,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,a,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,a,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,a,h);{const A=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,a,h),v,function(M){if(M<=0)return 0;if(M>=1)return 1;const V=M*M,te=V*M;return 4*(M<.5?te:3*(M-V)+te-.75)}(A))}}return v}}class sd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,h){const p=new Vu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class o0{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return $(this._values[n].value)}setValue(n,a){this._values[n]=new Uu(this._values[n].property,a===null?void 0:$(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h)}return n}possiblyEvaluate(n,a,h){const p=new Vu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,h);return p}}class Ao{constructor(n,a,h){this.property=n,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,h,p){return this.property.evaluate(this.value,this.parameters,n,a,h,p)}}class Vu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,h){const p=As[this.specification.type];return p?p(n,a,h):n}}class ln{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,h,p){return new Ao(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},h,p)}:n.expression,a)}interpolate(n,a,h){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Ao(this,{kind:"constant",value:void 0},n.parameters);const p=As[this.specification.type];return p?new Ao(this,{kind:"constant",value:p(n.value.value,a.value.value,h)},n.parameters):n}evaluate(n,a,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(a,h,p,v,x)}}class Bs extends ln{possiblyEvaluate(n,a,h,p){if(n.value===void 0)return new Ao(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,A=this._calculate(x,x,x,a);return new Ao(this,{kind:"constant",value:A},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Ao(this,{kind:"constant",value:v},a)}return new Ao(this,n.expression,a)}evaluate(n,a,h,p,v,x){if(n.kind==="source"){const A=n.evaluate(a,h,p,v,x);return this._calculate(A,A,A,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},h,p),n.evaluate({zoom:Math.floor(a.zoom)},h,p),n.evaluate({zoom:Math.floor(a.zoom)+1},h,p),a):n.value}_calculate(n,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class $u{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,p);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new sr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new sr(Math.floor(a.zoom),a)),n.expression.evaluate(new sr(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Hl{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,p){return!!n.expression.evaluate(a,null,{},h,p)}interpolate(){return!1}}class bi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const h=n[a];h.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new Uu(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new dh(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}_t("DataDrivenProperty",ln),_t("DataConstantProperty",qt),_t("CrossFadedDataDrivenProperty",Bs),_t("CrossFadedProperty",$u),_t("ColorRampProperty",Hl);const Qo="-transition";class zi extends se{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new o0(a.layout)),a.paint)){this._transitionablePaint=new ph(a.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Vu(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,h={}){a!=null&&this._validate(Ct,`layers.${this.id}.layout.${n}`,n,a,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(Qo)?this._transitionablePaint.getTransition(n.slice(0,-Qo.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,h={}){if(a!=null&&this._validate(kt,`layers.${this.id}.paint.${n}`,n,a,h))return!1;if(n.endsWith(Qo))return this._transitionablePaint.setTransition(n.slice(0,-Qo.length),a||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),A=p.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const M=this._transitionablePaint._values[n].value;return M.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,A,M)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),H(n,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(n,a,h,p,v={}){return(!v||v.validate!==!1)&&Xt(this,n.call(Oe,{key:a,layerType:this.type,objectKey:h,value:p,styleSpec:T,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Ao&&Vo(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const Wl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Gu{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class xr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _r(o,n=1){let a=0,h=0;return{members:o.map(p=>{const v=Wl[p.type].BYTES_PER_ELEMENT,x=a=ld(a,Math.max(n,v)),A=p.components||1;return h=Math.max(h,v),a+=v*A,{name:p.name,type:p.type,components:A,offset:x}}),size:ld(a,Math.max(h,n)),alignment:n}}function ld(o,n){return Math.ceil(o/n)*n}class Zl extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.int16[p+0]=a,this.int16[p+1]=h,n}}Zl.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",Zl);class Hu extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const x=4*n;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}Hu.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",Hu);class Xl extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,p,v,x)}emplace(n,a,h,p,v,x,A){const M=6*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=A,n}}Xl.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",Xl);class m extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,p,v,x)}emplace(n,a,h,p,v,x,A){const M=4*n,V=8*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.uint8[V+4]=p,this.uint8[V+5]=v,this.uint8[V+6]=x,this.uint8[V+7]=A,n}}m.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",m);class i extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.float32[p+0]=a,this.float32[p+1]=h,n}}i.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",i);class u extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,A,M,V,te){const oe=this.length;return this.resize(oe+1),this.emplace(oe,n,a,h,p,v,x,A,M,V,te)}emplace(n,a,h,p,v,x,A,M,V,te,oe){const ue=10*n;return this.uint16[ue+0]=a,this.uint16[ue+1]=h,this.uint16[ue+2]=p,this.uint16[ue+3]=v,this.uint16[ue+4]=x,this.uint16[ue+5]=A,this.uint16[ue+6]=M,this.uint16[ue+7]=V,this.uint16[ue+8]=te,this.uint16[ue+9]=oe,n}}u.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",u);class d extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,A,M,V,te,oe,ue){const me=this.length;return this.resize(me+1),this.emplace(me,n,a,h,p,v,x,A,M,V,te,oe,ue)}emplace(n,a,h,p,v,x,A,M,V,te,oe,ue,me){const ve=12*n;return this.int16[ve+0]=a,this.int16[ve+1]=h,this.int16[ve+2]=p,this.int16[ve+3]=v,this.uint16[ve+4]=x,this.uint16[ve+5]=A,this.uint16[ve+6]=M,this.uint16[ve+7]=V,this.int16[ve+8]=te,this.int16[ve+9]=oe,this.int16[ve+10]=ue,this.int16[ve+11]=me,n}}d.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",d);class y extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=p,n}}y.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",y);class b extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}b.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",b);class P extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,A,M,V){const te=this.length;return this.resize(te+1),this.emplace(te,n,a,h,p,v,x,A,M,V)}emplace(n,a,h,p,v,x,A,M,V,te){const oe=10*n,ue=5*n;return this.int16[oe+0]=a,this.int16[oe+1]=h,this.int16[oe+2]=p,this.int16[oe+3]=v,this.int16[oe+4]=x,this.int16[oe+5]=A,this.uint32[ue+3]=M,this.uint16[oe+8]=V,this.uint16[oe+9]=te,n}}P.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",P);class L extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,p,v,x)}emplace(n,a,h,p,v,x,A){const M=6*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.int16[M+2]=p,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=A,n}}L.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",L);class j extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,h,p,v)}emplace(n,a,h,p,v,x){const A=4*n,M=8*n;return this.float32[A+0]=a,this.float32[A+1]=h,this.float32[A+2]=p,this.int16[M+6]=v,this.int16[M+7]=x,n}}j.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",j);class Y extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const x=12*n,A=3*n;return this.uint8[x+0]=a,this.uint8[x+1]=h,this.float32[A+1]=p,this.float32[A+2]=v,n}}Y.prototype.bytesPerElement=12,_t("StructArrayLayout2ub2f12",Y);class ae extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}ae.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",ae);class he extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re,Be,Ze){const nt=this.length;return this.resize(nt+1),this.emplace(nt,n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re,Be,Ze)}emplace(n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re,Be,Ze,nt){const et=24*n,lt=12*n,vt=48*n;return this.int16[et+0]=a,this.int16[et+1]=h,this.uint16[et+2]=p,this.uint16[et+3]=v,this.uint32[lt+2]=x,this.uint32[lt+3]=A,this.uint32[lt+4]=M,this.uint16[et+10]=V,this.uint16[et+11]=te,this.uint16[et+12]=oe,this.float32[lt+7]=ue,this.float32[lt+8]=me,this.uint8[vt+36]=ve,this.uint8[vt+37]=Re,this.uint8[vt+38]=Be,this.uint32[lt+10]=Ze,this.int16[et+22]=nt,n}}he.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",he);class Ee extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re,Be,Ze,nt,et,lt,vt,pt,jt,en,zt,Lt,Tt,Dt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re,Be,Ze,nt,et,lt,vt,pt,jt,en,zt,Lt,Tt,Dt)}emplace(n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re,Be,Ze,nt,et,lt,vt,pt,jt,en,zt,Lt,Tt,Dt,Ot){const wt=34*n,sn=17*n;return this.int16[wt+0]=a,this.int16[wt+1]=h,this.int16[wt+2]=p,this.int16[wt+3]=v,this.int16[wt+4]=x,this.int16[wt+5]=A,this.int16[wt+6]=M,this.int16[wt+7]=V,this.uint16[wt+8]=te,this.uint16[wt+9]=oe,this.uint16[wt+10]=ue,this.uint16[wt+11]=me,this.uint16[wt+12]=ve,this.uint16[wt+13]=Re,this.uint16[wt+14]=Be,this.uint16[wt+15]=Ze,this.uint16[wt+16]=nt,this.uint16[wt+17]=et,this.uint16[wt+18]=lt,this.uint16[wt+19]=vt,this.uint16[wt+20]=pt,this.uint16[wt+21]=jt,this.uint16[wt+22]=en,this.uint32[sn+12]=zt,this.float32[sn+13]=Lt,this.float32[sn+14]=Tt,this.float32[sn+15]=Dt,this.float32[sn+16]=Ot,n}}Ee.prototype.bytesPerElement=68,_t("StructArrayLayout8i15ui1ul4f68",Ee);class ze extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}ze.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",ze);class Se extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=p,n}}Se.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",Se);class Fe extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,h)}emplace(n,a,h,p){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}Fe.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",Fe);class $e extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const p=2*n;return this.uint16[p+0]=a,this.uint16[p+1]=h,n}}$e.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",$e);class We extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}We.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",We);class Je extends xr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,p)}emplace(n,a,h,p,v){const x=4*n;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}Je.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",Je);class Ye extends Gu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new re(this.anchorPointX,this.anchorPointY)}}Ye.prototype.size=20;class ct extends P{get(n){return new Ye(this,n)}}_t("CollisionBoxArray",ct);class rt extends Gu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}rt.prototype.size=48;class ut extends he{get(n){return new rt(this,n)}}_t("PlacedSymbolArray",ut);class xt extends Gu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}xt.prototype.size=68;class St extends Ee{get(n){return new xt(this,n)}}_t("SymbolInstanceArray",St);class gt extends ze{getoffsetX(n){return this.float32[1*n+0]}}_t("GlyphOffsetArray",gt);class Kt extends Se{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}_t("SymbolLineVertexArray",Kt);class Ft extends Gu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ft.prototype.size=8;class pn extends Fe{get(n){return new Ft(this,n)}}_t("FeatureIndexArray",pn);class Vn extends Zl{}class Pn extends Zl{}class kn extends Xl{}class br extends m{}class vn extends i{}class On extends u{}class mr extends d{}class Kr extends y{}class Li extends b{}class Oi extends L{}class lo extends Y{}class Ri extends ae{}class uo extends $e{}const Sa=_r([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qa}=Sa;class Yn{constructor(n=[]){this.segments=n}prepareSegment(n,a,h,p){let v=this.segments[this.segments.length-1];return n>Yn.MAX_VERTEX_ARRAY_LENGTH&&W(`Max vertices per segment is ${Yn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Yn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,h,p){return new Yn([{vertexOffset:n,primitiveOffset:a,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Gr(o,n){return 256*(o=I(Math.floor(o),0,255))+I(Math.floor(n),0,255)}Yn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",Yn);const Un=_r([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var zr={exports:{}},Fi={exports:{}};Fi.exports=function(o,n){var a,h,p,v,x,A,M,V;for(h=o.length-(a=3&o.length),p=n,x=3432918353,A=461845907,V=0;V<h;)M=255&o.charCodeAt(V)|(255&o.charCodeAt(++V))<<8|(255&o.charCodeAt(++V))<<16|(255&o.charCodeAt(++V))<<24,++V,p=27492+(65535&(v=5*(65535&(p=(p^=M=(65535&(M=(M=(65535&M)*x+(((M>>>16)*x&65535)<<16)&4294967295)<<15|M>>>17))*A+(((M>>>16)*A&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(M=0,a){case 3:M^=(255&o.charCodeAt(V+2))<<16;case 2:M^=(255&o.charCodeAt(V+1))<<8;case 1:p^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt(V)))*x+(((M>>>16)*x&65535)<<16)&4294967295)<<15|M>>>17))*A+(((M>>>16)*A&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var lr={exports:{}};lr.exports=function(o,n){for(var a,h=o.length,p=n^h,v=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var es=Fi.exports,ts=lr.exports;zr.exports=es,zr.exports.murmur3=es,zr.exports.murmur2=ts;var js=zr.exports;class Wu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,h,p){this.ids.push(ud(n)),this.positions.push(a,h,p)}getPositions(n){const a=ud(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=a?p=x:h=x+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,a){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return mh(h,p,0,h.length-1),a&&a.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const a=new Wu;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function ud(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:js(String(o))}function mh(o,n,a,h){for(;a<h;){const p=o[a+h>>1];let v=a-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Ca(o,v,x),Ca(n,3*v,3*x),Ca(n,3*v+1,3*x+1),Ca(n,3*v+2,3*x+2)}x-a<h-x?(mh(o,n,a,x),a=x+1):(mh(o,n,x+1,h),h=x)}}function Ca(o,n,a){const h=o[n];o[n]=o[a],o[a]=h}_t("FeaturePositionMap",Wu);class ns{constructor(n,a){this.gl=n.gl,this.location=a}}class rs extends ns{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Zu extends ns{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class ox extends ns{constructor(n,a){super(n,a),this.current=Q.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const _6=new Float32Array(16);function a0(o){return[Gr(255*o.r,255*o.g),Gr(255*o.b,255*o.a)]}class gh{constructor(n,a,h){this.value=n,this.uniformNames=a.map(p=>`u_${p}`),this.type=h}setUniform(n,a,h){n.set(h.constantOr(this.value))}getBinding(n,a,h){return this.type==="color"?new ox(n,a):new rs(n,a)}}class Xu{constructor(n,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,h){return h.substr(0,9)==="u_pattern"?new Zu(n,a):new rs(n,a)}}class is{constructor(n,a,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,a,h,p,v){const x=this.paintVertexArray.length,A=this.expression.evaluate(new sr(0),a,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,A)}updatePaintArray(n,a,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,a,v)}_setPaintValue(n,a,h){if(this.type==="color"){const p=a0(h);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<a;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ea{constructor(n,a,h,p,v,x){this.expression=n,this.uniformNames=a.map(A=>`u_${A}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(A=>({name:`a_${A}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,a,h,p,v){const x=this.expression.evaluate(new sr(this.zoom),a,{},p,[],v),A=this.expression.evaluate(new sr(this.zoom+1),a,{},p,[],v),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,x,A)}updatePaintArray(n,a,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,h,p){if(this.type==="color"){const v=a0(h),x=a0(p);for(let A=n;A<a;A++)this.paintVertexArray.emplace(A,v[0],v[1],x[0],x[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=I(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,a,h){return new rs(n,a)}}class Ds{constructor(n,a,h,p,v,x){this.expression=n,this.type=a,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(n,a,h,p,v){this._setPaintValues(n,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,a,h,p){if(!p||!h)return;const{min:v,mid:x,max:A}=h,M=p[v],V=p[x],te=p[A];if(M&&V&&te)for(let oe=n;oe<a;oe++)this.zoomInPaintVertexArray.emplace(oe,V.tl[0],V.tl[1],V.br[0],V.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],V.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(oe,V.tl[0],V.tl[1],V.br[0],V.br[1],te.tl[0],te.tl[1],te.br[0],te.br[1],V.pixelRatio,te.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Un.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Un.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ax{constructor(n,a,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Ao&&Vo(x.property.specification)))continue;const A=b6(v,n.type),M=x.value,V=x.property.specification.type,te=x.property.useIntegerZoom,oe=x.property.specification["property-type"],ue=oe==="cross-faded"||oe==="cross-faded-data-driven";if(M.kind==="constant")this.binders[v]=ue?new Xu(M.value,A):new gh(M.value,A,V),p.push(`/u_${v}`);else if(M.kind==="source"||ue){const me=sx(v,V,"source");this.binders[v]=ue?new Ds(M,V,te,a,me,n.id):new is(M,A,V,me),p.push(`/a_${v}`)}else{const me=sx(v,V,"composite");this.binders[v]=new ea(M,A,V,te,a,me),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof is||a instanceof ea?a.maxValue:0}populatePaintArrays(n,a,h,p,v){for(const x in this.binders){const A=this.binders[x];(A instanceof is||A instanceof ea||A instanceof Ds)&&A.populatePaintArray(n,a,h,p,v)}}setConstantPatternPositions(n,a){for(const h in this.binders){const p=this.binders[h];p instanceof Xu&&p.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,h,p,v){let x=!1;for(const A in n){const M=a.getPositions(A);for(const V of M){const te=h.feature(V.index);for(const oe in this.binders){const ue=this.binders[oe];if((ue instanceof is||ue instanceof ea||ue instanceof Ds)&&ue.expression.isStateDependent===!0){const me=p.paint.get(oe);ue.expression=me.value,ue.updatePaintArray(V.start,V.end,te,n[A],v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const h=this.binders[a];(h instanceof gh||h instanceof Xu)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof is||h instanceof ea)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof Ds)for(let p=0;p<Un.members.length;p++)n.push(Un.members[p].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof gh||h instanceof Xu||h instanceof ea)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof gh||v instanceof Xu||v instanceof ea){for(const x of v.uniformNames)if(a[x]){const A=v.getBinding(n,a[x],x);h.push({name:x,property:p,binding:A})}}}return h}setUniforms(n,a,h,p){for(const{name:v,property:x,binding:A}of a)this.binders[x].setUniform(A,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(n&&h instanceof Ds){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof is||h instanceof ea)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const a in this.binders){const h=this.binders[a];(h instanceof is||h instanceof ea||h instanceof Ds)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof is||a instanceof ea||a instanceof Ds)&&a.destroy()}}}class Yl{constructor(n,a,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new ax(p,a,h);this.needsUpload=!1,this._featureMap=new Wu,this._bufferOffset=0}populatePaintArrays(n,a,h,p,v,x){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(n,a,p,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function b6(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function sx(o,n,a){const h={color:{source:i,composite:Je},number:{source:ze,composite:i}},p=function(v){return{"line-pattern":{source:On,composite:On},"fill-pattern":{source:On,composite:On},"fill-extrusion-pattern":{source:On,composite:On}}[v]}(o);return p&&p[a]||h[n][a]}_t("ConstantBinder",gh),_t("CrossFadedConstantBinder",Xu),_t("SourceExpressionBinder",is),_t("CrossFadedCompositeBinder",Ds),_t("CompositeExpressionBinder",ea),_t("ProgramConfiguration",ax,{omit:["_buffers"]}),_t("ProgramConfigurationSet",Yl);var Hr=8192;const s0=Math.pow(2,14)-1,lx=-s0-1;function Kl(o){const n=Hr/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const p=a[h];for(let v=0;v<p.length;v++){const x=p[v],A=Math.round(x.x*n),M=Math.round(x.y*n);x.x=I(A,lx,s0),x.y=I(M,lx,s0),(A<x.x||A>x.x+1||M<x.y||M>x.y+1)&&W("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function ql(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Kl(o):[]}}function cd(o,n,a,h,p){o.emplaceBack(2*n+(h+1)/2,2*a+(p+1)/2)}class l0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Vn,this.indexArray=new Ri,this.segments=new Yn,this.programConfigurations=new Yl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){const p=this.layers[0],v=[];let x=null,A=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),A=!x.isConstant());for(const{feature:M,id:V,index:te,sourceLayerIndex:oe}of n){const ue=this.layers[0]._featureFilter.needGeometry,me=ql(M,ue);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),me,h))continue;const ve=A?x.evaluate(me,{},h):void 0,Re={id:V,properties:M.properties,type:M.type,sourceLayerIndex:oe,index:te,geometry:ue?me.geometry:Kl(M),patterns:{},sortKey:ve};v.push(Re)}A&&v.sort((M,V)=>M.sortKey-V.sortKey);for(const M of v){const{geometry:V,index:te,sourceLayerIndex:oe}=M,ue=n[te].feature;this.addFeature(M,V,te,h),a.featureIndex.insert(ue,V,te,oe,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qa),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,p){for(const v of a)for(const x of v){const A=x.x,M=x.y;if(A<0||A>=Hr||M<0||M>=Hr)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),te=V.vertexLength;cd(this.layoutVertexArray,A,M,-1,-1),cd(this.layoutVertexArray,A,M,1,-1),cd(this.layoutVertexArray,A,M,1,1),cd(this.layoutVertexArray,A,M,-1,1),this.indexArray.emplaceBack(te,te+1,te+2),this.indexArray.emplaceBack(te,te+3,te+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function ux(o,n){for(let a=0;a<o.length;a++)if(Yu(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(Yu(o,n[a]))return!0;return!!u0(o,n)}function w6(o,n,a){return!!Yu(o,n)||!!c0(n,o,a)}function cx(o,n){if(o.length===1)return fx(n,o[0]);for(let a=0;a<n.length;a++){const h=n[a];for(let p=0;p<h.length;p++)if(Yu(o,h[p]))return!0}for(let a=0;a<o.length;a++)if(fx(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(u0(o,n[a]))return!0;return!1}function E6(o,n,a){if(o.length>1){if(u0(o,n))return!0;for(let h=0;h<n.length;h++)if(c0(n[h],o,a))return!0}for(let h=0;h<o.length;h++)if(c0(o[h],n,a))return!0;return!1}function u0(o,n){if(o.length===0||n.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],p=o[a+1];for(let v=0;v<n.length-1;v++)if(S6(h,p,n[v],n[v+1]))return!0}return!1}function S6(o,n,a,h){return F(o,a,h)!==F(n,a,h)&&F(o,n,a)!==F(o,n,h)}function c0(o,n,a){const h=a*a;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(hx(o,n[p-1],n[p])<h)return!0;return!1}function hx(o,n,a){const h=n.distSqr(a);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(a.x-n.x)+(o.y-n.y)*(a.y-n.y))/h;return o.distSqr(p<0?n:p>1?a:a.sub(n)._mult(p)._add(n))}function fx(o,n){let a,h,p,v=!1;for(let x=0;x<o.length;x++){a=o[x];for(let A=0,M=a.length-1;A<a.length;M=A++)h=a[A],p=a[M],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Yu(o,n){let a=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function C6(o,n,a){const h=a[0],p=a[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=F(o,n,a[0]);return v!==F(o,n,a[1])||v!==F(o,n,a[2])||v!==F(o,n,a[3])}function yh(o,n,a){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(n.id).getMaxValue(o)}function hd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function fd(o,n,a,h,p){if(!n[0]&&!n[1])return o;const v=re.convert(n)._mult(p);a==="viewport"&&v._rotate(-h);const x=[];for(let A=0;A<o.length;A++)x.push(o[A].sub(v));return x}_t("CircleBucket",l0,{omit:["layers"]});const T6=new bi({"circle-sort-key":new ln(T.layout_circle["circle-sort-key"])});var A6={paint:new bi({"circle-radius":new ln(T.paint_circle["circle-radius"]),"circle-color":new ln(T.paint_circle["circle-color"]),"circle-blur":new ln(T.paint_circle["circle-blur"]),"circle-opacity":new ln(T.paint_circle["circle-opacity"]),"circle-translate":new qt(T.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(T.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(T.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(T.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ln(T.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ln(T.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ln(T.paint_circle["circle-stroke-opacity"])}),layout:T6},Jl=typeof Float32Array!="undefined"?Float32Array:Array;function h0(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function dx(o,n,a){var h=n[0],p=n[1],v=n[2],x=n[3],A=n[4],M=n[5],V=n[6],te=n[7],oe=n[8],ue=n[9],me=n[10],ve=n[11],Re=n[12],Be=n[13],Ze=n[14],nt=n[15],et=a[0],lt=a[1],vt=a[2],pt=a[3];return o[0]=et*h+lt*A+vt*oe+pt*Re,o[1]=et*p+lt*M+vt*ue+pt*Be,o[2]=et*v+lt*V+vt*me+pt*Ze,o[3]=et*x+lt*te+vt*ve+pt*nt,o[4]=(et=a[4])*h+(lt=a[5])*A+(vt=a[6])*oe+(pt=a[7])*Re,o[5]=et*p+lt*M+vt*ue+pt*Be,o[6]=et*v+lt*V+vt*me+pt*Ze,o[7]=et*x+lt*te+vt*ve+pt*nt,o[8]=(et=a[8])*h+(lt=a[9])*A+(vt=a[10])*oe+(pt=a[11])*Re,o[9]=et*p+lt*M+vt*ue+pt*Be,o[10]=et*v+lt*V+vt*me+pt*Ze,o[11]=et*x+lt*te+vt*ve+pt*nt,o[12]=(et=a[12])*h+(lt=a[13])*A+(vt=a[14])*oe+(pt=a[15])*Re,o[13]=et*p+lt*M+vt*ue+pt*Be,o[14]=et*v+lt*V+vt*me+pt*Ze,o[15]=et*x+lt*te+vt*ve+pt*nt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var I6=dx;function f0(){var o=new Jl(4);return Jl!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),o}function dd(o,n,a,h){var p=new Jl(4);return p[0]=o,p[1]=n,p[2]=a,p[3]=h,p}function pd(o,n,a){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=a[0]*h+a[4]*p+a[8]*v+a[12]*x,o[1]=a[1]*h+a[5]*p+a[9]*v+a[13]*x,o[2]=a[2]*h+a[6]*p+a[10]*v+a[14]*x,o[3]=a[3]*h+a[7]*p+a[11]*v+a[15]*x,o}function px(o,n){const a=pd(f0(),dd(o.x,o.y,0,1),n);return new re(a[0]/a[3],a[1]/a[3])}f0();class mx extends l0{}_t("HeatmapBucket",mx,{omit:["layers"]});var P6={paint:new bi({"heatmap-radius":new ln(T.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ln(T.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(T.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hl(T.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(T.paint_heatmap["heatmap-opacity"])})};function d0(o,{width:n,height:a},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*a*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*a*h}`)}else p=new Uint8Array(n*a*h);return o.width=n,o.height=a,o.data=p,o}function gx(o,{width:n,height:a},h){if(n===o.width&&a===o.height)return;const p=d0({},{width:n,height:a},h);p0(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,a)},h),o.width=n,o.height=a,o.data=p.data}function p0(o,n,a,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||a.x>o.width-p.width||a.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,A=n.data;for(let M=0;M<p.height;M++){const V=((a.y+M)*o.width+a.x)*v,te=((h.y+M)*n.width+h.x)*v;for(let oe=0;oe<p.width*v;oe++)A[te+oe]=x[V+oe]}return n}class vh{constructor(n,a){d0(this,n,1,a)}resize(n){gx(this,n,1)}clone(){return new vh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,p,v){p0(n,a,h,p,v,1)}}class co{constructor(n,a){d0(this,n,4,a)}resize(n){gx(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new co({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,p,v){p0(n,a,h,p,v,4)}}function yx(o){const n={},a=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new co({width:a,height:h}),v=(x,A,M)=>{n[o.evaluationKey]=M;const V=o.expression.evaluate(n);p.data[x+A+0]=Math.floor(255*V.r/V.a),p.data[x+A+1]=Math.floor(255*V.g/V.a),p.data[x+A+2]=Math.floor(255*V.b/V.a),p.data[x+A+3]=Math.floor(255*V.a)};if(o.clips)for(let x=0,A=0;x<h;++x,A+=4*a)for(let M=0,V=0;M<a;M++,V+=4){const te=M/(a-1),{start:oe,end:ue}=o.clips[x];v(A,V,oe*(1-te)+ue*te)}else for(let x=0,A=0;x<a;x++,A+=4)v(0,A,x/(a-1));return p}_t("AlphaImage",vh),_t("RGBAImage",co);var k6={paint:new bi({"hillshade-illumination-direction":new qt(T.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(T.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(T.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(T.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(T.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(T.paint_hillshade["hillshade-accent-color"])})};const M6=_r([{name:"a_pos",components:2,type:"Int16"}],4),{members:z6}=M6;var m0={exports:{}};function md(o,n,a){a=a||2;var h,p,v,x,A,M,V,te=n&&n.length,oe=te?n[0]*a:o.length,ue=vx(o,0,oe,a,!0),me=[];if(!ue||ue.next===ue.prev)return me;if(te&&(ue=function(Re,Be,Ze,nt){var et,lt,vt,pt=[];for(et=0,lt=Be.length;et<lt;et++)(vt=vx(Re,Be[et]*nt,et<lt-1?Be[et+1]*nt:Re.length,nt,!1))===vt.next&&(vt.steiner=!0),pt.push(N6(vt));for(pt.sort(B6),et=0;et<pt.length;et++)Ze=Ns(Ze=j6(pt[et],Ze),Ze.next);return Ze}(o,n,ue,a)),o.length>80*a){h=v=o[0],p=x=o[1];for(var ve=a;ve<oe;ve+=a)(A=o[ve])<h&&(h=A),(M=o[ve+1])<p&&(p=M),A>v&&(v=A),M>x&&(x=M);V=(V=Math.max(v-h,x-p))!==0?1/V:0}return xh(ue,me,a,h,p,V),me}function vx(o,n,a,h,p){var v,x;if(p===v0(o,n,a,h)>0)for(v=n;v<a;v+=h)x=bx(v,o[v],o[v+1],x);else for(v=a-h;v>=n;v-=h)x=bx(v,o[v],o[v+1],x);return x&&gd(x,x.next)&&(bh(x),x=x.next),x}function Ns(o,n){if(!o)return o;n||(n=o);var a,h=o;do if(a=!1,h.steiner||!gd(h,h.next)&&Pr(h.prev,h,h.next)!==0)h=h.next;else{if(bh(h),(h=n=h.prev)===h.next)break;a=!0}while(a||h!==n);return n}function xh(o,n,a,h,p,v,x){if(o){!x&&v&&function(te,oe,ue,me){var ve=te;do ve.z===null&&(ve.z=g0(ve.x,ve.y,oe,ue,me)),ve.prevZ=ve.prev,ve.nextZ=ve.next,ve=ve.next;while(ve!==te);ve.prevZ.nextZ=null,ve.prevZ=null,function(Re){var Be,Ze,nt,et,lt,vt,pt,jt,en=1;do{for(Ze=Re,Re=null,lt=null,vt=0;Ze;){for(vt++,nt=Ze,pt=0,Be=0;Be<en&&(pt++,nt=nt.nextZ);Be++);for(jt=en;pt>0||jt>0&&nt;)pt!==0&&(jt===0||!nt||Ze.z<=nt.z)?(et=Ze,Ze=Ze.nextZ,pt--):(et=nt,nt=nt.nextZ,jt--),lt?lt.nextZ=et:Re=et,et.prevZ=lt,lt=et;Ze=nt}lt.nextZ=null,en*=2}while(vt>1)}(ve)}(o,h,p,v);for(var A,M,V=o;o.prev!==o.next;)if(A=o.prev,M=o.next,v?O6(o,h,p,v):L6(o))n.push(A.i/a),n.push(o.i/a),n.push(M.i/a),bh(o),o=M.next,V=M.next;else if((o=M)===V){x?x===1?xh(o=R6(Ns(o),n,a),n,a,h,p,v,2):x===2&&F6(o,n,a,h,p,v):xh(Ns(o),n,a,h,p,v,1);break}}}function L6(o){var n=o.prev,a=o,h=o.next;if(Pr(n,a,h)>=0)return!1;for(var p=o.next.next;p!==o.prev;){if(Ku(n.x,n.y,a.x,a.y,h.x,h.y,p.x,p.y)&&Pr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function O6(o,n,a,h){var p=o.prev,v=o,x=o.next;if(Pr(p,v,x)>=0)return!1;for(var A=p.x>v.x?p.x>x.x?p.x:x.x:v.x>x.x?v.x:x.x,M=p.y>v.y?p.y>x.y?p.y:x.y:v.y>x.y?v.y:x.y,V=g0(p.x<v.x?p.x<x.x?p.x:x.x:v.x<x.x?v.x:x.x,p.y<v.y?p.y<x.y?p.y:x.y:v.y<x.y?v.y:x.y,n,a,h),te=g0(A,M,n,a,h),oe=o.prevZ,ue=o.nextZ;oe&&oe.z>=V&&ue&&ue.z<=te;){if(oe!==o.prev&&oe!==o.next&&Ku(p.x,p.y,v.x,v.y,x.x,x.y,oe.x,oe.y)&&Pr(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,ue!==o.prev&&ue!==o.next&&Ku(p.x,p.y,v.x,v.y,x.x,x.y,ue.x,ue.y)&&Pr(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;oe&&oe.z>=V;){if(oe!==o.prev&&oe!==o.next&&Ku(p.x,p.y,v.x,v.y,x.x,x.y,oe.x,oe.y)&&Pr(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;ue&&ue.z<=te;){if(ue!==o.prev&&ue!==o.next&&Ku(p.x,p.y,v.x,v.y,x.x,x.y,ue.x,ue.y)&&Pr(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function R6(o,n,a){var h=o;do{var p=h.prev,v=h.next.next;!gd(p,v)&&xx(p,h,h.next,v)&&_h(p,v)&&_h(v,p)&&(n.push(p.i/a),n.push(h.i/a),n.push(v.i/a),bh(h),bh(h.next),h=o=v),h=h.next}while(h!==o);return Ns(h)}function F6(o,n,a,h,p,v){var x=o;do{for(var A=x.next.next;A!==x.prev;){if(x.i!==A.i&&U6(x,A)){var M=_x(x,A);return x=Ns(x,x.next),M=Ns(M,M.next),xh(x,n,a,h,p,v),void xh(M,n,a,h,p,v)}A=A.next}x=x.next}while(x!==o)}function B6(o,n){return o.x-n.x}function j6(o,n){var a=function(v,x){var A,M=x,V=v.x,te=v.y,oe=-1/0;do{if(te<=M.y&&te>=M.next.y&&M.next.y!==M.y){var ue=M.x+(te-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(ue<=V&&ue>oe){if(oe=ue,ue===V){if(te===M.y)return M;if(te===M.next.y)return M.next}A=M.x<M.next.x?M:M.next}}M=M.next}while(M!==x);if(!A)return null;if(V===oe)return A;var me,ve=A,Re=A.x,Be=A.y,Ze=1/0;M=A;do V>=M.x&&M.x>=Re&&V!==M.x&&Ku(te<Be?V:oe,te,Re,Be,te<Be?oe:V,te,M.x,M.y)&&(me=Math.abs(te-M.y)/(V-M.x),_h(M,v)&&(me<Ze||me===Ze&&(M.x>A.x||M.x===A.x&&D6(A,M)))&&(A=M,Ze=me)),M=M.next;while(M!==ve);return A}(o,n);if(!a)return n;var h=_x(a,o),p=Ns(a,a.next);return Ns(h,h.next),n===a?p:n}function D6(o,n){return Pr(o.prev,o,n.prev)<0&&Pr(n.next,o,o.next)<0}function g0(o,n,a,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-a)*p)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-h)*p)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function N6(o){var n=o,a=o;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==o);return a}function Ku(o,n,a,h,p,v,x,A){return(p-x)*(n-A)-(o-x)*(v-A)>=0&&(o-x)*(h-A)-(a-x)*(n-A)>=0&&(a-x)*(v-A)-(p-x)*(h-A)>=0}function U6(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(a,h){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==h.i&&p.next.i!==h.i&&xx(p,p.next,a,h))return!0;p=p.next}while(p!==a);return!1}(o,n)&&(_h(o,n)&&_h(n,o)&&function(a,h){var p=a,v=!1,x=(a.x+h.x)/2,A=(a.y+h.y)/2;do p.y>A!=p.next.y>A&&p.next.y!==p.y&&x<(p.next.x-p.x)*(A-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==a);return v}(o,n)&&(Pr(o.prev,o,n.prev)||Pr(o,n.prev,n))||gd(o,n)&&Pr(o.prev,o,o.next)>0&&Pr(n.prev,n,n.next)>0)}function Pr(o,n,a){return(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y)}function gd(o,n){return o.x===n.x&&o.y===n.y}function xx(o,n,a,h){var p=vd(Pr(o,n,a)),v=vd(Pr(o,n,h)),x=vd(Pr(a,h,o)),A=vd(Pr(a,h,n));return p!==v&&x!==A||!(p!==0||!yd(o,a,n))||!(v!==0||!yd(o,h,n))||!(x!==0||!yd(a,o,h))||!(A!==0||!yd(a,n,h))}function yd(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}function vd(o){return o>0?1:o<0?-1:0}function _h(o,n){return Pr(o.prev,o,o.next)<0?Pr(o,n,o.next)>=0&&Pr(o,o.prev,n)>=0:Pr(o,n,o.prev)<0||Pr(o,o.next,n)<0}function _x(o,n){var a=new y0(o.i,o.x,o.y),h=new y0(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,a.next=p,p.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function bx(o,n,a,h){var p=new y0(o,n,a);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function bh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function y0(o,n,a){this.i=o,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function v0(o,n,a,h){for(var p=0,v=n,x=a-h;v<a;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}m0.exports=md,m0.exports.default=md,md.deviation=function(o,n,a,h){var p=n&&n.length,v=Math.abs(v0(o,0,p?n[0]*a:o.length,a));if(p)for(var x=0,A=n.length;x<A;x++)v-=Math.abs(v0(o,n[x]*a,x<A-1?n[x+1]*a:o.length,a));var M=0;for(x=0;x<h.length;x+=3){var V=h[x]*a,te=h[x+1]*a,oe=h[x+2]*a;M+=Math.abs((o[V]-o[oe])*(o[te+1]-o[V+1])-(o[V]-o[te])*(o[oe+1]-o[V+1]))}return v===0&&M===0?0:Math.abs((M-v)/v)},md.flatten=function(o){for(var n=o[0][0].length,a={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)a.vertices.push(o[p][v][x]);p>0&&a.holes.push(h+=o[p-1].length)}return a};var wx=m0.exports;function V6(o,n,a,h,p){Ex(o,n,a||0,h||o.length-1,p||$6)}function Ex(o,n,a,h,p){for(;h>a;){if(h-a>600){var v=h-a+1,x=n-a+1,A=Math.log(v),M=.5*Math.exp(2*A/3),V=.5*Math.sqrt(A*M*(v-M)/v)*(x-v/2<0?-1:1);Ex(o,n,Math.max(a,Math.floor(n-x*M/v+V)),Math.min(h,Math.floor(n+(v-x)*M/v+V)),p)}var te=o[n],oe=a,ue=h;for(wh(o,a,n),p(o[h],te)>0&&wh(o,a,h);oe<ue;){for(wh(o,oe,ue),oe++,ue--;p(o[oe],te)<0;)oe++;for(;p(o[ue],te)>0;)ue--}p(o[a],te)===0?wh(o,a,ue):wh(o,++ue,h),ue<=n&&(a=ue+1),n<=ue&&(h=ue-1)}}function wh(o,n,a){var h=o[n];o[n]=o[a],o[a]=h}function $6(o,n){return o<n?-1:o>n?1:0}function x0(o,n){const a=o.length;if(a<=1)return[o];const h=[];let p,v;for(let x=0;x<a;x++){const A=w(o[x]);A!==0&&(o[x].area=Math.abs(A),v===void 0&&(v=A<0),v===A<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(V6(h[x],n,1,h[x].length-1,G6),h[x]=h[x].slice(0,n));return h}function G6(o,n){return n.area-o.area}function _0(o,n,a){const h=a.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const A=x.constantOr(null);A&&(p=!0,h[A.to]=!0,h[A.from]=!0)}return p}function b0(o,n,a,h,p){const v=p.patternDependencies;for(const x of n){const A=x.paint.get(`${o}-pattern`).value;if(A.kind!=="constant"){let M=A.evaluate({zoom:h-1},a,{},p.availableImages),V=A.evaluate({zoom:h},a,{},p.availableImages),te=A.evaluate({zoom:h+1},a,{},p.availableImages);M=M&&M.name?M.name:M,V=V&&V.name?V.name:V,te=te&&te.name?te.name:te,v[M]=!0,v[V]=!0,v[te]=!0,a.patterns[x.id]={min:M,mid:V,max:te}}}return a}class w0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pn,this.indexArray=new Ri,this.indexArray2=new uo,this.programConfigurations=new Yl(n.layers,n.zoom),this.segments=new Yn,this.segments2=new Yn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=_0("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:A,id:M,index:V,sourceLayerIndex:te}of n){const oe=this.layers[0]._featureFilter.needGeometry,ue=ql(A,oe);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),ue,h))continue;const me=v?p.evaluate(ue,{},h,a.availableImages):void 0,ve={id:M,properties:A.properties,type:A.type,sourceLayerIndex:te,index:V,geometry:oe?ue.geometry:Kl(A),patterns:{},sortKey:me};x.push(ve)}v&&x.sort((A,M)=>A.sortKey-M.sortKey);for(const A of x){const{geometry:M,index:V,sourceLayerIndex:te}=A;if(this.hasPattern){const oe=b0("fill",this.layers,A,this.zoom,a);this.patternFeatures.push(oe)}else this.addFeature(A,M,V,h,{});a.featureIndex.insert(n[V].feature,M,V,te,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,z6),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,h,p,v){for(const x of x0(a,500)){let A=0;for(const me of x)A+=me.length;const M=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),V=M.vertexLength,te=[],oe=[];for(const me of x){if(me.length===0)continue;me!==x[0]&&oe.push(te.length/2);const ve=this.segments2.prepareSegment(me.length,this.layoutVertexArray,this.indexArray2),Re=ve.vertexLength;this.layoutVertexArray.emplaceBack(me[0].x,me[0].y),this.indexArray2.emplaceBack(Re+me.length-1,Re),te.push(me[0].x),te.push(me[0].y);for(let Be=1;Be<me.length;Be++)this.layoutVertexArray.emplaceBack(me[Be].x,me[Be].y),this.indexArray2.emplaceBack(Re+Be-1,Re+Be),te.push(me[Be].x),te.push(me[Be].y);ve.vertexLength+=me.length,ve.primitiveLength+=me.length}const ue=wx(te,oe);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(V+ue[me],V+ue[me+1],V+ue[me+2]);M.vertexLength+=A,M.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}_t("FillBucket",w0,{omit:["layers","patternFeatures"]});const H6=new bi({"fill-sort-key":new ln(T.layout_fill["fill-sort-key"])});var W6={paint:new bi({"fill-antialias":new qt(T.paint_fill["fill-antialias"]),"fill-opacity":new ln(T.paint_fill["fill-opacity"]),"fill-color":new ln(T.paint_fill["fill-color"]),"fill-outline-color":new ln(T.paint_fill["fill-outline-color"]),"fill-translate":new qt(T.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(T.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bs(T.paint_fill["fill-pattern"])}),layout:H6};const Z6=_r([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:X6}=Z6;var Us={},Y6=re,Sx=qu;function qu(o,n,a,h,p){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(K6,this,n)}function K6(o,n,a){o==1?n.id=a.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],A=p._values[h.readVarint()];p.properties[x]=A}}(a,n):o==3?n.type=a.readVarint():o==4&&(n._geometry=a.pos)}function q6(o){for(var n,a,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((a=o[x]).x-(n=o[p]).x)*(n.y+a.y);return h}qu.types=["Unknown","Point","LineString","Polygon"],qu.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,a=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,A=[];o.pos<a;){if(p<=0){var M=o.readVarint();h=7&M,p=M>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&A.push(n),n=[]),n.push(new Y6(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&A.push(n),A},qu.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,a=1,h=0,p=0,v=0,x=1/0,A=-1/0,M=1/0,V=-1/0;o.pos<n;){if(h<=0){var te=o.readVarint();a=7&te,h=te>>3}if(h--,a===1||a===2)(p+=o.readSVarint())<x&&(x=p),p>A&&(A=p),(v+=o.readSVarint())<M&&(M=v),v>V&&(V=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,M,A,V]},qu.prototype.toGeoJSON=function(o,n,a){var h,p,v=this.extent*Math.pow(2,a),x=this.extent*o,A=this.extent*n,M=this.loadGeometry(),V=qu.types[this.type];function te(me){for(var ve=0;ve<me.length;ve++){var Re=me[ve];me[ve]=[360*(Re.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Re.y+A)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var oe=[];for(h=0;h<M.length;h++)oe[h]=M[h][0];te(M=oe);break;case 2:for(h=0;h<M.length;h++)te(M[h]);break;case 3:for(M=function(me){var ve=me.length;if(ve<=1)return[me];for(var Re,Be,Ze=[],nt=0;nt<ve;nt++){var et=q6(me[nt]);et!==0&&(Be===void 0&&(Be=et<0),Be===et<0?(Re&&Ze.push(Re),Re=[me[nt]]):Re.push(me[nt]))}return Re&&Ze.push(Re),Ze}(M),h=0;h<M.length;h++)for(p=0;p<M[h].length;p++)te(M[h][p])}M.length===1?M=M[0]:V="Multi"+V;var ue={type:"Feature",geometry:{type:V,coordinates:M},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var J6=Sx,Cx=Tx;function Tx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(Q6,this,n),this.length=this._features.length}function Q6(o,n,a){o===15?n.version=a.readVarint():o===1?n.name=a.readString():o===5?n.extent=a.readVarint():o===2?n._features.push(a.pos):o===3?n._keys.push(a.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(a))}Tx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new J6(this._pbf,n,this.extent,this._keys,this._values)};var eE=Cx;function tE(o,n,a){if(o===3){var h=new eE(a,a.readVarint()+a.pos);h.length&&(n[h.name]=h)}}Us.VectorTile=function(o,n){this.layers=o.readFields(tE,{},n)},Us.VectorTileFeature=Sx,Us.VectorTileLayer=Cx;const nE=Us.VectorTileFeature.types,E0=Math.pow(2,13);function Eh(o,n,a,h,p,v,x,A){o.emplaceBack(n,a,2*Math.floor(h*E0)+x,p*E0*2,v*E0*2,Math.round(A))}class S0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new kn,this.indexArray=new Ri,this.programConfigurations=new Yl(n.layers,n.zoom),this.segments=new Yn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.features=[],this.hasPattern=_0("fill-extrusion",this.layers,a);for(const{feature:p,id:v,index:x,sourceLayerIndex:A}of n){const M=this.layers[0]._featureFilter.needGeometry,V=ql(p,M);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),V,h))continue;const te={id:v,sourceLayerIndex:A,index:x,geometry:M?V.geometry:Kl(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(b0("fill-extrusion",this.layers,te,this.zoom,a)):this.addFeature(te,te.geometry,x,h,{}),a.featureIndex.insert(p,te.geometry,x,A,this.index,!0)}}addFeatures(n,a,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,a,h)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,X6),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,p,v){for(const x of x0(a,500)){let A=0;for(const me of x)A+=me.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||iE(me))continue;let ve=0;for(let Re=0;Re<me.length;Re++){const Be=me[Re];if(Re>=1){const Ze=me[Re-1];if(!rE(Be,Ze)){M.vertexLength+4>Yn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const nt=Be.sub(Ze)._perp()._unit(),et=Ze.dist(Be);ve+et>32768&&(ve=0),Eh(this.layoutVertexArray,Be.x,Be.y,nt.x,nt.y,0,0,ve),Eh(this.layoutVertexArray,Be.x,Be.y,nt.x,nt.y,0,1,ve),ve+=et,Eh(this.layoutVertexArray,Ze.x,Ze.y,nt.x,nt.y,0,0,ve),Eh(this.layoutVertexArray,Ze.x,Ze.y,nt.x,nt.y,0,1,ve);const lt=M.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+A>Yn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),nE[n.type]!=="Polygon")continue;const V=[],te=[],oe=M.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&te.push(V.length/2);for(let ve=0;ve<me.length;ve++){const Re=me[ve];Eh(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),V.push(Re.x),V.push(Re.y)}}const ue=wx(V,te);for(let me=0;me<ue.length;me+=3)this.indexArray.emplaceBack(oe+ue[me],oe+ue[me+2],oe+ue[me+1]);M.primitiveLength+=ue.length/3,M.vertexLength+=A}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function rE(o,n){return o.x===n.x&&(o.x<0||o.x>Hr)||o.y===n.y&&(o.y<0||o.y>Hr)}function iE(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Hr)||o.every(n=>n.y<0)||o.every(n=>n.y>Hr)}_t("FillExtrusionBucket",S0,{omit:["layers","features"]});var oE={paint:new bi({"fill-extrusion-opacity":new qt(T["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ln(T["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(T["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(T["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bs(T["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ln(T["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ln(T["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(T["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Sh(o,n){return o.x*n.x+o.y*n.y}function Ax(o,n){if(o.length===1){let a=0;const h=n[a++];let p;for(;!p||h.equals(p);)if(p=n[a++],!p)return 1/0;for(;a<n.length;a++){const v=n[a],x=o[0],A=p.sub(h),M=v.sub(h),V=x.sub(h),te=Sh(A,A),oe=Sh(A,M),ue=Sh(M,M),me=Sh(V,A),ve=Sh(V,M),Re=te*ue-oe*oe,Be=(ue*me-oe*ve)/Re,Ze=(te*ve-oe*me)/Re,nt=h.z*(1-Be-Ze)+p.z*Be+v.z*Ze;if(isFinite(nt))return nt}return 1/0}{let a=1/0;for(const h of n)a=Math.min(a,h.z);return a}}const aE=_r([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sE}=aE,lE=_r([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:uE}=lE,cE=Us.VectorTileFeature.types,hE=Math.cos(Math.PI/180*37.5),Ix=Math.pow(2,14)/.5;class C0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new br,this.layoutVertexArray2=new vn,this.indexArray=new Ri,this.programConfigurations=new Yl(n.layers,n.zoom),this.segments=new Yn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=_0("line",this.layers,a);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:A,id:M,index:V,sourceLayerIndex:te}of n){const oe=this.layers[0]._featureFilter.needGeometry,ue=ql(A,oe);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),ue,h))continue;const me=v?p.evaluate(ue,{},h):void 0,ve={id:M,properties:A.properties,type:A.type,sourceLayerIndex:te,index:V,geometry:oe?ue.geometry:Kl(A),patterns:{},sortKey:me};x.push(ve)}v&&x.sort((A,M)=>A.sortKey-M.sortKey);for(const A of x){const{geometry:M,index:V,sourceLayerIndex:te}=A;if(this.hasPattern){const oe=b0("line",this.layers,A,this.zoom,a);this.patternFeatures.push(oe)}else this.addFeature(A,M,V,h,{});a.featureIndex.insert(n[V].feature,M,V,te,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,uE)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sE),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,h,p,v){const x=this.layers[0].layout,A=x.get("line-join").evaluate(n,{}),M=x.get("line-cap"),V=x.get("line-miter-limit"),te=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const oe of a)this.addLine(oe,n,A,M,V,te);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,a,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ze=0;Ze<n.length-1;Ze++)this.totalDistance+=n[Ze].dist(n[Ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=cE[a.type]==="Polygon";let M=n.length;for(;M>=2&&n[M-1].equals(n[M-2]);)M--;let V=0;for(;V<M-1&&n[V].equals(n[V+1]);)V++;if(M<(A?3:2))return;h==="bevel"&&(v=1.05);const te=this.overscaling<=16?122880/(512*this.overscaling):0,oe=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let ue,me,ve,Re,Be;this.e1=this.e2=-1,A&&(ue=n[M-2],Be=n[V].sub(ue)._unit()._perp());for(let Ze=V;Ze<M;Ze++){if(ve=Ze===M-1?A?n[V+1]:void 0:n[Ze+1],ve&&n[Ze].equals(ve))continue;Be&&(Re=Be),ue&&(me=ue),ue=n[Ze],Be=ve?ve.sub(ue)._unit()._perp():Re,Re=Re||Be;let nt=Re.add(Be);nt.x===0&&nt.y===0||nt._unit();const et=Re.x*Be.x+Re.y*Be.y,lt=nt.x*Be.x+nt.y*Be.y,vt=lt!==0?1/lt:1/0,pt=2*Math.sqrt(2-2*lt),jt=lt<hE&&me&&ve,en=Re.x*Be.y-Re.y*Be.x>0;if(jt&&Ze>V){const Tt=ue.dist(me);if(Tt>2*te){const Dt=ue.sub(ue.sub(me)._mult(te/Tt)._round());this.updateDistance(me,Dt),this.addCurrentVertex(Dt,Re,0,0,oe),me=Dt}}const zt=me&&ve;let Lt=zt?h:A?"butt":p;if(zt&&Lt==="round"&&(vt<x?Lt="miter":vt<=2&&(Lt="fakeround")),Lt==="miter"&&vt>v&&(Lt="bevel"),Lt==="bevel"&&(vt>2&&(Lt="flipbevel"),vt<v&&(Lt="miter")),me&&this.updateDistance(me,ue),Lt==="miter")nt._mult(vt),this.addCurrentVertex(ue,nt,0,0,oe);else if(Lt==="flipbevel"){if(vt>100)nt=Be.mult(-1);else{const Tt=vt*Re.add(Be).mag()/Re.sub(Be).mag();nt._perp()._mult(Tt*(en?-1:1))}this.addCurrentVertex(ue,nt,0,0,oe),this.addCurrentVertex(ue,nt.mult(-1),0,0,oe)}else if(Lt==="bevel"||Lt==="fakeround"){const Tt=-Math.sqrt(vt*vt-1),Dt=en?Tt:0,Ot=en?0:Tt;if(me&&this.addCurrentVertex(ue,Re,Dt,Ot,oe),Lt==="fakeround"){const wt=Math.round(180*pt/Math.PI/20);for(let sn=1;sn<wt;sn++){let nn=sn/wt;if(nn!==.5){const Gn=nn-.5;nn+=nn*Gn*(nn-1)*((1.0904+et*(et*(3.55645-1.43519*et)-3.2452))*Gn*Gn+(.848013+et*(.215638*et-1.06021)))}const Fn=Be.sub(Re)._mult(nn)._add(Re)._unit()._mult(en?-1:1);this.addHalfVertex(ue,Fn.x,Fn.y,!1,en,0,oe)}}ve&&this.addCurrentVertex(ue,Be,-Dt,-Ot,oe)}else if(Lt==="butt")this.addCurrentVertex(ue,nt,0,0,oe);else if(Lt==="square"){const Tt=me?1:-1;this.addCurrentVertex(ue,nt,Tt,Tt,oe)}else Lt==="round"&&(me&&(this.addCurrentVertex(ue,Re,0,0,oe),this.addCurrentVertex(ue,Re,1,1,oe,!0)),ve&&(this.addCurrentVertex(ue,Be,-1,-1,oe,!0),this.addCurrentVertex(ue,Be,0,0,oe)));if(jt&&Ze<M-1){const Tt=ue.dist(ve);if(Tt>2*te){const Dt=ue.add(ve.sub(ue)._mult(te/Tt)._round());this.updateDistance(ue,Dt),this.addCurrentVertex(Dt,Be,0,0,oe),ue=Dt}}}}addCurrentVertex(n,a,h,p,v,x=!1){const A=a.y*p-a.x,M=-a.y-a.x*p;this.addHalfVertex(n,a.x+a.y*h,a.y-a.x*h,x,!1,h,v),this.addHalfVertex(n,A,M,x,!0,-p,v),this.distance>Ix/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,a,h,p,v,x))}addHalfVertex({x:n,y:a},h,p,v,x,A,M){const V=.5*(this.lineClips?this.scaledDistance*(Ix-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(A===0?0:A<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const te=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,te),M.primitiveLength++),x?this.e2=te:this.e1=te}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}_t("LineBucket",C0,{omit:["layers","patternFeatures"]});const fE=new bi({"line-cap":new qt(T.layout_line["line-cap"]),"line-join":new ln(T.layout_line["line-join"]),"line-miter-limit":new qt(T.layout_line["line-miter-limit"]),"line-round-limit":new qt(T.layout_line["line-round-limit"]),"line-sort-key":new ln(T.layout_line["line-sort-key"])});var Px={paint:new bi({"line-opacity":new ln(T.paint_line["line-opacity"]),"line-color":new ln(T.paint_line["line-color"]),"line-translate":new qt(T.paint_line["line-translate"]),"line-translate-anchor":new qt(T.paint_line["line-translate-anchor"]),"line-width":new ln(T.paint_line["line-width"]),"line-gap-width":new ln(T.paint_line["line-gap-width"]),"line-offset":new ln(T.paint_line["line-offset"]),"line-blur":new ln(T.paint_line["line-blur"]),"line-dasharray":new $u(T.paint_line["line-dasharray"]),"line-pattern":new Bs(T.paint_line["line-pattern"]),"line-gradient":new Hl(T.paint_line["line-gradient"])}),layout:fE};const kx=new class extends ln{possiblyEvaluate(o,n){return n=new sr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,a,h){return n=J({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,a,h)}}(Px.paint.properties["line-width"].specification);function Mx(o,n){return n>0?n+2*o:o}kx.useIntegerZoom=!0;const dE=_r([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pE=_r([{name:"a_projected_pos",components:3,type:"Float32"}],4);_r([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mE=_r([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_r([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const zx=_r([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gE=_r([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yE(o,n,a){return o.sections.forEach(h=>{h.text=function(p,v,x){const A=v.layout.get("text-transform").evaluate(x,{});return A==="uppercase"?p=p.toLocaleUpperCase():A==="lowercase"&&(p=p.toLocaleLowerCase()),_i.applyArabicShaping&&(p=_i.applyArabicShaping(p)),p}(h.text,n,a)}),o}_r([{name:"triangle",components:3,type:"Uint16"}]),_r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_r([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_r([{type:"Float32",name:"offsetX"}]),_r([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Ch={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var qr=24,T0=Kn,Lx=function(o,n,a,h,p){var v,x,A=8*p-h-1,M=(1<<A)-1,V=M>>1,te=-7,oe=a?p-1:0,ue=a?-1:1,me=o[n+oe];for(oe+=ue,v=me&(1<<-te)-1,me>>=-te,te+=A;te>0;v=256*v+o[n+oe],oe+=ue,te-=8);for(x=v&(1<<-te)-1,v>>=-te,te+=h;te>0;x=256*x+o[n+oe],oe+=ue,te-=8);if(v===0)v=1-V;else{if(v===M)return x?NaN:1/0*(me?-1:1);x+=Math.pow(2,h),v-=V}return(me?-1:1)*x*Math.pow(2,v-h)},Ox=function(o,n,a,h,p,v){var x,A,M,V=8*v-p-1,te=(1<<V)-1,oe=te>>1,ue=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=h?0:v-1,ve=h?1:-1,Re=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(A=isNaN(n)?1:0,x=te):(x=Math.floor(Math.log(n)/Math.LN2),n*(M=Math.pow(2,-x))<1&&(x--,M*=2),(n+=x+oe>=1?ue/M:ue*Math.pow(2,1-oe))*M>=2&&(x++,M/=2),x+oe>=te?(A=0,x=te):x+oe>=1?(A=(n*M-1)*Math.pow(2,p),x+=oe):(A=n*Math.pow(2,oe-1)*Math.pow(2,p),x=0));p>=8;o[a+me]=255&A,me+=ve,A/=256,p-=8);for(x=x<<p|A,V+=p;V>0;o[a+me]=255&x,me+=ve,x/=256,V-=8);o[a+me-ve]|=128*Re};function Kn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var Vs,A0=4294967296,Rx=1/A0,Fx=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function os(o){return o.type===Kn.Bytes?o.readVarint()+o.pos:o.pos+1}function Ju(o,n,a){return a?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Bx(o,n,a){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(h);for(var p=a.pos-1;p>=o;p--)a.buf[p+h]=a.buf[p]}function vE(o,n){for(var a=0;a<o.length;a++)n.writeVarint(o[a])}function xE(o,n){for(var a=0;a<o.length;a++)n.writeSVarint(o[a])}function _E(o,n){for(var a=0;a<o.length;a++)n.writeFloat(o[a])}function bE(o,n){for(var a=0;a<o.length;a++)n.writeDouble(o[a])}function wE(o,n){for(var a=0;a<o.length;a++)n.writeBoolean(o[a])}function EE(o,n){for(var a=0;a<o.length;a++)n.writeFixed32(o[a])}function SE(o,n){for(var a=0;a<o.length;a++)n.writeSFixed32(o[a])}function CE(o,n){for(var a=0;a<o.length;a++)n.writeFixed64(o[a])}function TE(o,n){for(var a=0;a<o.length;a++)n.writeSFixed64(o[a])}function xd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Qu(o,n,a){o[a]=n,o[a+1]=n>>>8,o[a+2]=n>>>16,o[a+3]=n>>>24}function jx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function AE(o,n,a){o===1&&a.readMessage(IE,n)}function IE(o,n,a){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:A,top:M,advance:V}=a.readMessage(PE,{});n.push({id:h,bitmap:new vh({width:v+6,height:x+6},p),metrics:{width:v,height:x,left:A,top:M,advance:V}})}}function PE(o,n,a){o===1?n.id=a.readVarint():o===2?n.bitmap=a.readBytes():o===3?n.width=a.readVarint():o===4?n.height=a.readVarint():o===5?n.left=a.readSVarint():o===6?n.top=a.readSVarint():o===7&&(n.advance=a.readVarint())}function Dx(o){let n=0,a=0;for(const x of o)n+=x.w*x.h,a=Math.max(a,x.w);o.sort((x,A)=>A.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let p=0,v=0;for(const x of o)for(let A=h.length-1;A>=0;A--){const M=h[A];if(!(x.w>M.w||x.h>M.h)){if(x.x=M.x,x.y=M.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===M.w&&x.h===M.h){const V=h.pop();A<h.length&&(h[A]=V)}else x.h===M.h?(M.x+=x.w,M.w-=x.w):x.w===M.w?(M.y+=x.h,M.h-=x.h):(h.push({x:M.x+x.w,y:M.y,w:M.w-x.w,h:x.h}),M.y+=x.h,M.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}Kn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=xd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=jx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=xd(this.buf,this.pos)+xd(this.buf,this.pos+4)*A0;return this.pos+=8,o},readSFixed64:function(){var o=xd(this.buf,this.pos)+jx(this.buf,this.pos+4)*A0;return this.pos+=8,o},readFloat:function(){var o=Lx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Lx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,a,h=this.buf;return n=127&(a=h[this.pos++]),a<128?n:(n|=(127&(a=h[this.pos++]))<<7,a<128?n:(n|=(127&(a=h[this.pos++]))<<14,a<128?n:(n|=(127&(a=h[this.pos++]))<<21,a<128?n:function(p,v,x){var A,M,V=x.buf;if(A=(112&(M=V[x.pos++]))>>4,M<128||(A|=(127&(M=V[x.pos++]))<<3,M<128)||(A|=(127&(M=V[x.pos++]))<<10,M<128)||(A|=(127&(M=V[x.pos++]))<<17,M<128)||(A|=(127&(M=V[x.pos++]))<<24,M<128)||(A|=(1&(M=V[x.pos++]))<<31,M<128))return Ju(p,A,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Fx?function(a,h,p){return Fx.decode(a.subarray(h,p))}(this.buf,n,o):function(a,h,p){for(var v="",x=h;x<p;){var A,M,V,te=a[x],oe=null,ue=te>239?4:te>223?3:te>191?2:1;if(x+ue>p)break;ue===1?te<128&&(oe=te):ue===2?(192&(A=a[x+1]))==128&&(oe=(31&te)<<6|63&A)<=127&&(oe=null):ue===3?(M=a[x+2],(192&(A=a[x+1]))==128&&(192&M)==128&&((oe=(15&te)<<12|(63&A)<<6|63&M)<=2047||oe>=55296&&oe<=57343)&&(oe=null)):ue===4&&(M=a[x+2],V=a[x+3],(192&(A=a[x+1]))==128&&(192&M)==128&&(192&V)==128&&((oe=(15&te)<<18|(63&A)<<12|(63&M)<<6|63&V)<=65535||oe>=1114112)&&(oe=null)),oe===null?(oe=65533,ue=1):oe>65535&&(oe-=65536,v+=String.fromCharCode(oe>>>10&1023|55296),oe=56320|1023&oe),v+=String.fromCharCode(oe),x+=ue}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Kn.Bytes)return o.push(this.readVarint(n));var a=os(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSVarint());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Kn.Bytes)return o.push(this.readBoolean());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFloat());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Kn.Bytes)return o.push(this.readDouble());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed32());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed32());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readFixed64());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Kn.Bytes)return o.push(this.readSFixed64());var n=os(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Kn.Fixed32)this.pos+=4;else{if(n!==Kn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Qu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Qu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Qu(this.buf,-1&o,this.pos),Qu(this.buf,Math.floor(o*Rx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Qu(this.buf,-1&o,this.pos),Qu(this.buf,Math.floor(o*Rx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,a){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,A){A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,A.buf[A.pos]=127&(v>>>=7)}(h,0,a),function(v,x){var A=(7&v)<<4;x.buf[x.pos++]|=A|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,A,M=0;M<p.length;M++){if((x=p.charCodeAt(M))>55295&&x<57344){if(!A){x>56319||M+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):A=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,A=x;continue}x=A-55296<<10|x-56320|65536,A=null}else A&&(h[v++]=239,h[v++]=191,h[v++]=189,A=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var a=this.pos-n;a>=128&&Bx(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),Ox(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Ox(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,n){this.pos++;var a=this.pos;o(n,this);var h=this.pos-a;h>=128&&Bx(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,a){this.writeTag(o,Kn.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,vE,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,xE,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,wE,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,_E,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,bE,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,EE,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,SE,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,CE,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,TE,n)},writeBytesField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Kn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Kn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Kn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Kn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,Boolean(n))}};class I0{constructor(n,{pixelRatio:a,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nx{constructor(n,a){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(a,p,v);const{w:x,h:A}=Dx(v),M=new co({width:x||1,height:A||1});for(const V in n){const te=n[V],oe=h[V].paddedRect;co.copy(te.data,M,{x:0,y:0},{x:oe.x+1,y:oe.y+1},te.data)}for(const V in a){const te=a[V],oe=p[V].paddedRect,ue=oe.x+1,me=oe.y+1,ve=te.data.width,Re=te.data.height;co.copy(te.data,M,{x:0,y:0},{x:ue,y:me},te.data),co.copy(te.data,M,{x:0,y:Re-1},{x:ue,y:me-1},{width:ve,height:1}),co.copy(te.data,M,{x:0,y:0},{x:ue,y:me+Re},{width:ve,height:1}),co.copy(te.data,M,{x:ve-1,y:0},{x:ue-1,y:me},{width:1,height:Re}),co.copy(te.data,M,{x:0,y:0},{x:ue+ve,y:me},{width:1,height:Re})}this.image=M,this.iconPositions=h,this.patternPositions=p}addImages(n,a,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(x),a[p]=new I0(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),a)}patchUpdatedImage(n,a,h){if(!n||!a||n.version===a.version)return;n.version=a.version;const[p,v]=n.tl;h.update(a.data,void 0,{x:p,y:v})}}_t("ImagePosition",I0),_t("ImageAtlas",Nx),s.WritingMode=void 0,(Vs=s.WritingMode||(s.WritingMode={}))[Vs.none=0]="none",Vs[Vs.horizontal=1]="horizontal",Vs[Vs.vertical=2]="vertical",Vs[Vs.horizontalOnly=3]="horizontalOnly";const _d=-17;class Th{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const h=new Th;return h.scale=n||1,h.fontStack=a,h}static forImage(n){const a=new Th;return a.imageName=n,a}}class ec{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const h=new ec;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;a+=p&&Jo(p)&&!Ch[n[h+1]]||v&&Jo(v)&&!Ch[n[h-1]]||!Ch[n[h]]?n[h]:Ch[n[h]]}return a}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&wd[this.text.charCodeAt(h)];h++)n++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&wd[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const h=new ec;return h.text=this.text.substring(n,a),h.sectionIndex=this.sectionIndex.slice(n,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Th.forText(n.scale,n.fontStack||a));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void W("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Th.forImage(a)),this.sectionIndex.push(this.sections.length-1)):W("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bd(o,n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve,Re){const Be=ec.fromFeature(o,p);let Ze;oe===s.WritingMode.vertical&&Be.verticalizePunctuation();const{processBidirectionalText:nt,processStyledBidirectionalText:et}=_i;if(nt&&Be.sections.length===1){Ze=[];const pt=nt(Be.toString(),P0(Be,V,v,n,h,me,ve));for(const jt of pt){const en=new ec;en.text=jt,en.sections=Be.sections;for(let zt=0;zt<jt.length;zt++)en.sectionIndex.push(0);Ze.push(en)}}else if(et){Ze=[];const pt=et(Be.text,Be.sectionIndex,P0(Be,V,v,n,h,me,ve));for(const jt of pt){const en=new ec;en.text=jt[0],en.sectionIndex=jt[1],en.sections=Be.sections,Ze.push(en)}}else Ze=function(pt,jt){const en=[],zt=pt.text;let Lt=0;for(const Tt of jt)en.push(pt.substring(Lt,Tt)),Lt=Tt;return Lt<zt.length&&en.push(pt.substring(Lt,zt.length)),en}(Be,P0(Be,V,v,n,h,me,ve));const lt=[],vt={positionedLines:lt,text:Be.toString(),top:te[1],bottom:te[1],left:te[0],right:te[0],writingMode:oe,iconsInText:!1,verticalizable:!1};return function(pt,jt,en,zt,Lt,Tt,Dt,Ot,wt,sn,nn,Fn){let Gn=0,ur=_d,cr=0,Qr=0;const Lr=Ot==="right"?1:Ot==="left"?0:.5;let Or=0;for(const Rr of Lt){Rr.trim();const ti=Rr.getMaxScale(),ci=(ti-1)*qr,wi={positionedGlyphs:[],lineOffset:0};pt.positionedLines[Or]=wi;const ji=wi.positionedGlyphs;let Di=0;if(!Rr.length()){ur+=Tt,++Or;continue}for(let Xr=0;Xr<Rr.length();Xr++){const zn=Rr.getSection(Xr),Ji=Rr.getSectionIndex(Xr),ni=Rr.getCharCode(Xr);let hi=0,Po=null,ta=null,na=null,as=qr;const ko=!(wt===s.WritingMode.horizontal||!nn&&!Rs(ni)||nn&&(wd[ni]||(Zr=ni,bt.Arabic(Zr)||bt["Arabic Supplement"](Zr)||bt["Arabic Extended-A"](Zr)||bt["Arabic Presentation Forms-A"](Zr)||bt["Arabic Presentation Forms-B"](Zr))));if(zn.imageName){const ho=zt[zn.imageName];if(!ho)continue;na=zn.imageName,pt.iconsInText=pt.iconsInText||!0,ta=ho.paddedRect;const Ni=ho.displaySize;zn.scale=zn.scale*qr/Fn,Po={width:Ni[0],height:Ni[1],left:1,top:-3,advance:ko?Ni[1]:Ni[0]},hi=ci+(qr-Ni[1]*zn.scale),as=Po.advance;const ss=ko?Ni[0]*zn.scale-qr*ti:Ni[1]*zn.scale-qr*ti;ss>0&&ss>Di&&(Di=ss)}else{const ho=en[zn.fontStack],Ni=ho&&ho[ni];if(Ni&&Ni.rect)ta=Ni.rect,Po=Ni.metrics;else{const ss=jt[zn.fontStack],Ph=ss&&ss[ni];if(!Ph)continue;Po=Ph.metrics}hi=(ti-zn.scale)*qr}ko?(pt.verticalizable=!0,ji.push({glyph:ni,imageName:na,x:Gn,y:ur+hi,vertical:ko,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:Ji,metrics:Po,rect:ta}),Gn+=as*zn.scale+sn):(ji.push({glyph:ni,imageName:na,x:Gn,y:ur+hi,vertical:ko,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:Ji,metrics:Po,rect:ta}),Gn+=Po.advance*zn.scale+sn)}ji.length!==0&&(cr=Math.max(Gn-sn,cr),zE(ji,0,ji.length-1,Lr,Di)),Gn=0;const gr=Tt*ti+Di;wi.lineOffset=Math.max(Di,ci),ur+=gr,Qr=Math.max(gr,Qr),++Or}var Zr;const ei=ur-_d,{horizontalAlign:ui,verticalAlign:Bi}=k0(Dt);(function(Rr,ti,ci,wi,ji,Di,gr,Xr,zn){const Ji=(ti-ci)*ji;let ni=0;ni=Di!==gr?-Xr*wi-_d:(-wi*zn+.5)*gr;for(const hi of Rr)for(const Po of hi.positionedGlyphs)Po.x+=Ji,Po.y+=ni})(pt.positionedLines,Lr,ui,Bi,cr,Qr,Tt,ei,Lt.length),pt.top+=-Bi*ei,pt.bottom=pt.top+ei,pt.left+=-ui*cr,pt.right=pt.left+cr}(vt,n,a,h,Ze,x,A,M,oe,V,ue,Re),!function(pt){for(const jt of pt)if(jt.positionedGlyphs.length!==0)return!1;return!0}(lt)&&vt}const wd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},kE={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ux(o,n,a,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*qr/v+p:0}{const x=a[n.fontStack],A=x&&x[o];return A?A.metrics.advance*n.scale+p:0}}function Vx(o,n,a,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(a)*a}function ME(o,n,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function $x(o,n,a,h,p,v){let x=null,A=Vx(n,a,p,v);for(const M of h){const V=Vx(n-M.x,a,p,v)+M.badness;V<=A&&(x=M,A=V)}return{index:o,x:n,priorBreak:x,badness:A}}function Gx(o){return o?Gx(o.priorBreak).concat(o.index):[]}function P0(o,n,a,h,p,v,x){if(v!=="point")return[];if(!o)return[];const A=[],M=function(ue,me,ve,Re,Be,Ze){let nt=0;for(let et=0;et<ue.length();et++){const lt=ue.getSection(et);nt+=Ux(ue.getCharCode(et),lt,Re,Be,me,Ze)}return nt/Math.max(1,Math.ceil(nt/ve))}(o,n,a,h,p,x),V=o.text.indexOf("\u200B")>=0;let te=0;for(let ue=0;ue<o.length();ue++){const me=o.getSection(ue),ve=o.getCharCode(ue);if(wd[ve]||(te+=Ux(ve,me,h,p,n,x)),ue<o.length()-1){const Re=!((oe=ve)<11904||!(bt["Bopomofo Extended"](oe)||bt.Bopomofo(oe)||bt["CJK Compatibility Forms"](oe)||bt["CJK Compatibility Ideographs"](oe)||bt["CJK Compatibility"](oe)||bt["CJK Radicals Supplement"](oe)||bt["CJK Strokes"](oe)||bt["CJK Symbols and Punctuation"](oe)||bt["CJK Unified Ideographs Extension A"](oe)||bt["CJK Unified Ideographs"](oe)||bt["Enclosed CJK Letters and Months"](oe)||bt["Halfwidth and Fullwidth Forms"](oe)||bt.Hiragana(oe)||bt["Ideographic Description Characters"](oe)||bt["Kangxi Radicals"](oe)||bt["Katakana Phonetic Extensions"](oe)||bt.Katakana(oe)||bt["Vertical Forms"](oe)||bt["Yi Radicals"](oe)||bt["Yi Syllables"](oe)));(kE[ve]||Re||me.imageName)&&A.push($x(ue+1,te,M,A,ME(ve,o.getCharCode(ue+1),Re&&V),!1))}}var oe;return Gx($x(o.length(),te,M,A,0,!0))}function k0(o){let n=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function zE(o,n,a,h,p){if(!h&&!p)return;const v=o[a],x=(o[a].x+v.metrics.advance*v.scale)*h;for(let A=n;A<=a;A++)o[A].x-=x,o[A].y+=p}function LE(o,n,a){const{horizontalAlign:h,verticalAlign:p}=k0(a),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Hx(o,n,a,h,p,v){const x=o.image;let A;if(x.content){const Be=x.content,Ze=x.pixelRatio||1;A=[Be[0]/Ze,Be[1]/Ze,x.displaySize[0]-Be[2]/Ze,x.displaySize[1]-Be[3]/Ze]}const M=n.left*v,V=n.right*v;let te,oe,ue,me;a==="width"||a==="both"?(me=p[0]+M-h[3],oe=p[0]+V+h[1]):(me=p[0]+(M+V-x.displaySize[0])/2,oe=me+x.displaySize[0]);const ve=n.top*v,Re=n.bottom*v;return a==="height"||a==="both"?(te=p[1]+ve-h[0],ue=p[1]+Re+h[2]):(te=p[1]+(ve+Re-x.displaySize[1])/2,ue=te+x.displaySize[1]),{image:x,top:te,right:oe,bottom:ue,left:me,collisionPadding:A}}const Ta=128;function M0(o,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new sr(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=a;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const A=h[v],M=h[x];return a.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:M,interpolationType:p}:{kind:"camera",minZoom:A,maxZoom:M,minSize:a.evaluate(new sr(A)),maxSize:a.evaluate(new sr(M)),interpolationType:p}}}function Wx(o,{uSize:n,uSizeT:a},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/Ta:o.kind==="composite"?ir(h/Ta,p/Ta,a):n}function Zx(o,n){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,A=p?I(si.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=ir(o.minSize,o.maxSize,A):a=A}return{uSizeT:a,uSize:h}}var OE=Object.freeze({__proto__:null,getSizeData:M0,evaluateSizeForFeature:Wx,evaluateSizeForZoom:Zx,SIZE_PACK_FACTOR:Ta});class $s extends re{constructor(n,a,h,p){super(n,a),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new $s(this.x,this.y,this.angle,this.segment)}}function Xx(o,n,a,h,p){if(n.segment===void 0)return!0;let v=n,x=n.segment+1,A=0;for(;A>-a/2;){if(x--,x<0)return!1;A-=o[x].dist(v),v=o[x]}A+=o[x].dist(o[x+1]),x++;const M=[];let V=0;for(;A<a/2;){const te=o[x],oe=o[x+1];if(!oe)return!1;let ue=o[x-1].angleTo(te)-te.angleTo(oe);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:A,angleDelta:ue}),V+=ue;A-M[0].distance>h;)V-=M.shift().angleDelta;if(V>p)return!1;x++,A+=te.dist(oe)}return!0}function Yx(o){let n=0;for(let a=0;a<o.length-1;a++)n+=o[a].dist(o[a+1]);return n}function Kx(o,n,a){return o?.6*n*a:0}function qx(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function RE(o,n,a,h,p,v){const x=Kx(a,p,v),A=qx(a,h)*v;let M=0;const V=Yx(o)/2;for(let te=0;te<o.length-1;te++){const oe=o[te],ue=o[te+1],me=oe.dist(ue);if(M+me>V){const ve=(V-M)/me,Re=ir(oe.x,ue.x,ve),Be=ir(oe.y,ue.y,ve),Ze=new $s(Re,Be,ue.angleTo(oe),te);return Ze._round(),!x||Xx(o,Ze,A,x,n)?Ze:void 0}M+=me}}function FE(o,n,a,h,p,v,x,A,M){const V=Kx(h,v,x),te=qx(h,p),oe=te*x,ue=o[0].x===0||o[0].x===M||o[0].y===0||o[0].y===M;return n-oe<n/4&&(n=oe+n/4),Jx(o,ue?n/2*A%n:(te/2+2*v)*x*A%n,n,V,a,oe,ue,!1,M)}function Jx(o,n,a,h,p,v,x,A,M){const V=v/2,te=Yx(o);let oe=0,ue=n-a,me=[];for(let ve=0;ve<o.length-1;ve++){const Re=o[ve],Be=o[ve+1],Ze=Re.dist(Be),nt=Be.angleTo(Re);for(;ue+a<oe+Ze;){ue+=a;const et=(ue-oe)/Ze,lt=ir(Re.x,Be.x,et),vt=ir(Re.y,Be.y,et);if(lt>=0&&lt<M&&vt>=0&&vt<M&&ue-V>=0&&ue+V<=te){const pt=new $s(lt,vt,nt,ve);pt._round(),h&&!Xx(o,pt,v,h,p)||me.push(pt)}}oe+=Ze}return A||me.length||x||(me=Jx(o,oe/2,a,h,p,v,x,!0,M)),me}function Qx(o,n,a,h,p){const v=[];for(let x=0;x<o.length;x++){const A=o[x];let M;for(let V=0;V<A.length-1;V++){let te=A[V],oe=A[V+1];te.x<n&&oe.x<n||(te.x<n?te=new re(n,te.y+(n-te.x)/(oe.x-te.x)*(oe.y-te.y))._round():oe.x<n&&(oe=new re(n,te.y+(n-te.x)/(oe.x-te.x)*(oe.y-te.y))._round()),te.y<a&&oe.y<a||(te.y<a?te=new re(te.x+(a-te.y)/(oe.y-te.y)*(oe.x-te.x),a)._round():oe.y<a&&(oe=new re(te.x+(a-te.y)/(oe.y-te.y)*(oe.x-te.x),a)._round()),te.x>=h&&oe.x>=h||(te.x>=h?te=new re(h,te.y+(h-te.x)/(oe.x-te.x)*(oe.y-te.y))._round():oe.x>=h&&(oe=new re(h,te.y+(h-te.x)/(oe.x-te.x)*(oe.y-te.y))._round()),te.y>=p&&oe.y>=p||(te.y>=p?te=new re(te.x+(p-te.y)/(oe.y-te.y)*(oe.x-te.x),p)._round():oe.y>=p&&(oe=new re(te.x+(p-te.y)/(oe.y-te.y)*(oe.x-te.x),p)._round()),M&&te.equals(M[M.length-1])||(M=[te],v.push(M)),M.push(oe)))))}}return v}function e_(o,n,a,h){const p=[],v=o.image,x=v.pixelRatio,A=v.paddedRect.w-2,M=v.paddedRect.h-2,V=o.right-o.left,te=o.bottom-o.top,oe=v.stretchX||[[0,A]],ue=v.stretchY||[[0,M]],me=(Tt,Dt)=>Tt+Dt[1]-Dt[0],ve=oe.reduce(me,0),Re=ue.reduce(me,0),Be=A-ve,Ze=M-Re;let nt=0,et=ve,lt=0,vt=Re,pt=0,jt=Be,en=0,zt=Ze;if(v.content&&h){const Tt=v.content;nt=Ed(oe,0,Tt[0]),lt=Ed(ue,0,Tt[1]),et=Ed(oe,Tt[0],Tt[2]),vt=Ed(ue,Tt[1],Tt[3]),pt=Tt[0]-nt,en=Tt[1]-lt,jt=Tt[2]-Tt[0]-et,zt=Tt[3]-Tt[1]-vt}const Lt=(Tt,Dt,Ot,wt)=>{const sn=Sd(Tt.stretch-nt,et,V,o.left),nn=Cd(Tt.fixed-pt,jt,Tt.stretch,ve),Fn=Sd(Dt.stretch-lt,vt,te,o.top),Gn=Cd(Dt.fixed-en,zt,Dt.stretch,Re),ur=Sd(Ot.stretch-nt,et,V,o.left),cr=Cd(Ot.fixed-pt,jt,Ot.stretch,ve),Qr=Sd(wt.stretch-lt,vt,te,o.top),Lr=Cd(wt.fixed-en,zt,wt.stretch,Re),Or=new re(sn,Fn),Zr=new re(ur,Fn),ei=new re(ur,Qr),ui=new re(sn,Qr),Bi=new re(nn/x,Gn/x),Rr=new re(cr/x,Lr/x),ti=n*Math.PI/180;if(ti){const ji=Math.sin(ti),Di=Math.cos(ti),gr=[Di,-ji,ji,Di];Or._matMult(gr),Zr._matMult(gr),ui._matMult(gr),ei._matMult(gr)}const ci=Tt.stretch+Tt.fixed,wi=Dt.stretch+Dt.fixed;return{tl:Or,tr:Zr,bl:ui,br:ei,tex:{x:v.paddedRect.x+1+ci,y:v.paddedRect.y+1+wi,w:Ot.stretch+Ot.fixed-ci,h:wt.stretch+wt.fixed-wi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Rr,minFontScaleX:jt/x/V,minFontScaleY:zt/x/te,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const Tt=t_(oe,Be,ve),Dt=t_(ue,Ze,Re);for(let Ot=0;Ot<Tt.length-1;Ot++){const wt=Tt[Ot],sn=Tt[Ot+1];for(let nn=0;nn<Dt.length-1;nn++)p.push(Lt(wt,Dt[nn],sn,Dt[nn+1]))}}else p.push(Lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:M+1}));return p}function Ed(o,n,a){let h=0;for(const p of o)h+=Math.max(n,Math.min(a,p[1]))-Math.max(n,Math.min(a,p[0]));return h}function t_(o,n,a){const h=[{fixed:-1,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+1,stretch:a}),h}function Sd(o,n,a,h){return o/n*a+h}function Cd(o,n,a,h){return o-n*a/h}_t("Anchor",$s);class Td{constructor(n,a,h,p,v,x,A,M,V,te){if(this.boxStartIndex=n.length,V){let oe=x.top,ue=x.bottom;const me=x.collisionPadding;me&&(oe-=me[1],ue+=me[3]);let ve=ue-oe;ve>0&&(ve=Math.max(10,ve),this.circleDiameter=ve)}else{let oe=x.top*A-M,ue=x.bottom*A+M,me=x.left*A-M,ve=x.right*A+M;const Re=x.collisionPadding;if(Re&&(me-=Re[0]*A,oe-=Re[1]*A,ve+=Re[2]*A,ue+=Re[3]*A),te){const Be=new re(me,oe),Ze=new re(ve,oe),nt=new re(me,ue),et=new re(ve,ue),lt=te*Math.PI/180;Be._rotate(lt),Ze._rotate(lt),nt._rotate(lt),et._rotate(lt),me=Math.min(Be.x,Ze.x,nt.x,et.x),ve=Math.max(Be.x,Ze.x,nt.x,et.x),oe=Math.min(Be.y,Ze.y,nt.y,et.y),ue=Math.max(Be.y,Ze.y,nt.y,et.y)}n.emplaceBack(a.x,a.y,me,oe,ve,ue,h,p,v)}this.boxEndIndex=n.length}}class BE{constructor(n=[],a=jE){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:h}=this,p=a[n];for(;n>0;){const v=n-1>>1,x=a[v];if(h(p,x)>=0)break;a[n]=x,n=v}a[n]=p}_down(n){const{data:a,compare:h}=this,p=this.length>>1,v=a[n];for(;n<p;){let x=1+(n<<1),A=a[x];const M=x+1;if(M<this.length&&h(a[M],A)<0&&(x=M,A=a[M]),h(A,v)>=0)break;a[n]=A,n=x}a[n]=v}}function jE(o,n){return o<n?-1:o>n?1:0}function DE(o,n=1,a=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const A=o[0];for(let me=0;me<A.length;me++){const ve=A[me];(!me||ve.x<h)&&(h=ve.x),(!me||ve.y<p)&&(p=ve.y),(!me||ve.x>v)&&(v=ve.x),(!me||ve.y>x)&&(x=ve.y)}const M=Math.min(v-h,x-p);let V=M/2;const te=new BE([],NE);if(M===0)return new re(h,p);for(let me=h;me<v;me+=M)for(let ve=p;ve<x;ve+=M)te.push(new tc(me+V,ve+V,V,o));let oe=function(me){let ve=0,Re=0,Be=0;const Ze=me[0];for(let nt=0,et=Ze.length,lt=et-1;nt<et;lt=nt++){const vt=Ze[nt],pt=Ze[lt],jt=vt.x*pt.y-pt.x*vt.y;Re+=(vt.x+pt.x)*jt,Be+=(vt.y+pt.y)*jt,ve+=3*jt}return new tc(Re/ve,Be/ve,0,me)}(o),ue=te.length;for(;te.length;){const me=te.pop();(me.d>oe.d||!oe.d)&&(oe=me,a&&console.log("found best %d after %d probes",Math.round(1e4*me.d)/1e4,ue)),me.max-oe.d<=n||(V=me.h/2,te.push(new tc(me.p.x-V,me.p.y-V,V,o)),te.push(new tc(me.p.x+V,me.p.y-V,V,o)),te.push(new tc(me.p.x-V,me.p.y+V,V,o)),te.push(new tc(me.p.x+V,me.p.y+V,V,o)),ue+=4)}return a&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${oe.d}`)),oe.p}function NE(o,n){return n.max-o.max}function tc(o,n,a,h){this.p=new re(o,n),this.h=a,this.d=function(p,v){let x=!1,A=1/0;for(let M=0;M<v.length;M++){const V=v[M];for(let te=0,oe=V.length,ue=oe-1;te<oe;ue=te++){const me=V[te],ve=V[ue];me.y>p.y!=ve.y>p.y&&p.x<(ve.x-me.x)*(p.y-me.y)/(ve.y-me.y)+me.x&&(x=!x),A=Math.min(A,hx(p,me,ve))}}return(x?1:-1)*Math.sqrt(A)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const z0=Number.POSITIVE_INFINITY;function n_(o,n){return n[1]!==z0?function(a,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),a){case"top-right":case"top-left":case"top":x=p-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-p}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(a,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.sqrt(2);switch(a){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(a){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function L0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function UE(o,n,a,h,p,v,x,A,M,V,te){let oe=v.textMaxSize.evaluate(n,{});oe===void 0&&(oe=x);const ue=o.layers[0].layout,me=ue.get("icon-offset").evaluate(n,{},te),ve=i_(a.horizontal),Re=x/24,Be=o.tilePixelRatio*Re,Ze=o.tilePixelRatio*oe/24,nt=o.tilePixelRatio*A,et=o.tilePixelRatio*ue.get("symbol-spacing"),lt=ue.get("text-padding")*o.tilePixelRatio,vt=ue.get("icon-padding")*o.tilePixelRatio,pt=ue.get("text-max-angle")/180*Math.PI,jt=ue.get("text-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",en=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",zt=ue.get("symbol-placement"),Lt=et/2,Tt=ue.get("icon-text-fit");let Dt;h&&Tt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(Dt=Hx(h,a.vertical,Tt,ue.get("icon-text-fit-padding"),me,Re)),ve&&(h=Hx(h,ve,Tt,ue.get("icon-text-fit-padding"),me,Re)));const Ot=(wt,sn)=>{sn.x<0||sn.x>=Hr||sn.y<0||sn.y>=Hr||function(nn,Fn,Gn,ur,cr,Qr,Lr,Or,Zr,ei,ui,Bi,Rr,ti,ci,wi,ji,Di,gr,Xr,zn,Ji,ni,hi,Po){const ta=nn.addToLineVertexArray(Fn,Gn);let na,as,ko,ho,Ni=0,ss=0,Ph=0,__=0,$0=-1,G0=-1;const ls={};let b_=js(""),H0=0,W0=0;if(Or._unevaluatedLayout.getValue("text-radial-offset")===void 0?[H0,W0]=Or.layout.get("text-offset").evaluate(zn,{},hi).map(Ui=>Ui*qr):(H0=Or.layout.get("text-radial-offset").evaluate(zn,{},hi)*qr,W0=z0),nn.allowVerticalPlacement&&ur.vertical){const Ui=Or.layout.get("text-rotate").evaluate(zn,{},hi)+90;ko=new Td(Zr,Fn,ei,ui,Bi,ur.vertical,Rr,ti,ci,Ui),Lr&&(ho=new Td(Zr,Fn,ei,ui,Bi,Lr,ji,Di,ci,Ui))}if(cr){const Ui=Or.layout.get("icon-rotate").evaluate(zn,{}),Aa=Or.layout.get("icon-text-fit")!=="none",kh=e_(cr,Ui,ni,Aa),Mh=Lr?e_(Lr,Ui,ni,Aa):void 0;as=new Td(Zr,Fn,ei,ui,Bi,cr,ji,Di,!1,Ui),Ni=4*kh.length;const S_=nn.iconSizeData;let eu=null;S_.kind==="source"?(eu=[Ta*Or.layout.get("icon-size").evaluate(zn,{})],eu[0]>Gs&&W(`${nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):S_.kind==="composite"&&(eu=[Ta*Ji.compositeIconSizes[0].evaluate(zn,{},hi),Ta*Ji.compositeIconSizes[1].evaluate(zn,{},hi)],(eu[0]>Gs||eu[1]>Gs)&&W(`${nn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),nn.addSymbols(nn.icon,kh,eu,Xr,gr,zn,s.WritingMode.none,Fn,ta.lineStartIndex,ta.lineLength,-1,hi),$0=nn.icon.placedSymbolArray.length-1,Mh&&(ss=4*Mh.length,nn.addSymbols(nn.icon,Mh,eu,Xr,gr,zn,s.WritingMode.vertical,Fn,ta.lineStartIndex,ta.lineLength,-1,hi),G0=nn.icon.placedSymbolArray.length-1)}const w_=Object.keys(ur.horizontal);for(const Ui of w_){const Aa=ur.horizontal[Ui];if(!na){b_=js(Aa.text);const Mh=Or.layout.get("text-rotate").evaluate(zn,{},hi);na=new Td(Zr,Fn,ei,ui,Bi,Aa,Rr,ti,ci,Mh)}const kh=Aa.positionedLines.length===1;if(Ph+=r_(nn,Fn,Aa,Qr,Or,ci,zn,wi,ta,ur.vertical?s.WritingMode.horizontal:s.WritingMode.horizontalOnly,kh?w_:[Ui],ls,$0,Ji,hi),kh)break}ur.vertical&&(__+=r_(nn,Fn,ur.vertical,Qr,Or,ci,zn,wi,ta,s.WritingMode.vertical,["vertical"],ls,G0,Ji,hi));const eS=na?na.boxStartIndex:nn.collisionBoxArray.length,tS=na?na.boxEndIndex:nn.collisionBoxArray.length,nS=ko?ko.boxStartIndex:nn.collisionBoxArray.length,rS=ko?ko.boxEndIndex:nn.collisionBoxArray.length,iS=as?as.boxStartIndex:nn.collisionBoxArray.length,oS=as?as.boxEndIndex:nn.collisionBoxArray.length,aS=ho?ho.boxStartIndex:nn.collisionBoxArray.length,sS=ho?ho.boxEndIndex:nn.collisionBoxArray.length;let ra=-1;const Md=(Ui,Aa)=>Ui&&Ui.circleDiameter?Math.max(Ui.circleDiameter,Aa):Aa;ra=Md(na,ra),ra=Md(ko,ra),ra=Md(as,ra),ra=Md(ho,ra);const E_=ra>-1?1:0;E_&&(ra*=Po/qr),nn.glyphOffsetArray.length>=nc.MAX_GLYPHS&&W("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zn.sortKey!==void 0&&nn.addToSortKeyRanges(nn.symbolInstances.length,zn.sortKey),nn.symbolInstances.emplaceBack(Fn.x,Fn.y,ls.right>=0?ls.right:-1,ls.center>=0?ls.center:-1,ls.left>=0?ls.left:-1,ls.vertical||-1,$0,G0,b_,eS,tS,nS,rS,iS,oS,aS,sS,ei,Ph,__,Ni,ss,E_,0,Rr,H0,W0,ra)}(o,sn,wt,a,h,p,Dt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Be,lt,jt,M,nt,vt,en,me,n,v,V,te,x)};if(zt==="line")for(const wt of Qx(n.geometry,0,0,Hr,Hr)){const sn=FE(wt,et,pt,a.vertical||ve,h,24,Ze,o.overscaling,Hr);for(const nn of sn){const Fn=ve;Fn&&VE(o,Fn.text,Lt,nn)||Ot(wt,nn)}}else if(zt==="line-center"){for(const wt of n.geometry)if(wt.length>1){const sn=RE(wt,pt,a.vertical||ve,h,24,Ze);sn&&Ot(wt,sn)}}else if(n.type==="Polygon")for(const wt of x0(n.geometry,0)){const sn=DE(wt,16);Ot(wt[0],new $s(sn.x,sn.y,0))}else if(n.type==="LineString")for(const wt of n.geometry)Ot(wt,new $s(wt[0].x,wt[0].y,0));else if(n.type==="Point")for(const wt of n.geometry)for(const sn of wt)Ot([sn],new $s(sn.x,sn.y,0))}const Gs=32640;function r_(o,n,a,h,p,v,x,A,M,V,te,oe,ue,me,ve){const Re=function(nt,et,lt,vt,pt,jt,en,zt){const Lt=vt.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,Tt=[];for(const Dt of et.positionedLines)for(const Ot of Dt.positionedGlyphs){if(!Ot.rect)continue;const wt=Ot.rect||{};let sn=4,nn=!0,Fn=1,Gn=0;const ur=(pt||zt)&&Ot.vertical,cr=Ot.metrics.advance*Ot.scale/2;if(zt&&et.verticalizable){const gr=(Ot.scale-1)*qr,Xr=(qr-Ot.metrics.width*Ot.scale)/2;Gn=Dt.lineOffset/2-(Ot.imageName?-Xr:gr)}if(Ot.imageName){const gr=en[Ot.imageName];nn=gr.sdf,Fn=gr.pixelRatio,sn=1/Fn}const Qr=pt?[Ot.x+cr,Ot.y]:[0,0];let Lr=pt?[0,0]:[Ot.x+cr+lt[0],Ot.y+lt[1]-Gn],Or=[0,0];ur&&(Or=Lr,Lr=[0,0]);const Zr=(Ot.metrics.left-sn)*Ot.scale-cr+Lr[0],ei=(-Ot.metrics.top-sn)*Ot.scale+Lr[1],ui=Zr+wt.w*Ot.scale/Fn,Bi=ei+wt.h*Ot.scale/Fn,Rr=new re(Zr,ei),ti=new re(ui,ei),ci=new re(Zr,Bi),wi=new re(ui,Bi);if(ur){const gr=new re(-cr,cr-_d),Xr=-Math.PI/2,zn=12-cr,Ji=new re(22-zn,-(Ot.imageName?zn:0)),ni=new re(...Or);Rr._rotateAround(Xr,gr)._add(Ji)._add(ni),ti._rotateAround(Xr,gr)._add(Ji)._add(ni),ci._rotateAround(Xr,gr)._add(Ji)._add(ni),wi._rotateAround(Xr,gr)._add(Ji)._add(ni)}if(Lt){const gr=Math.sin(Lt),Xr=Math.cos(Lt),zn=[Xr,-gr,gr,Xr];Rr._matMult(zn),ti._matMult(zn),ci._matMult(zn),wi._matMult(zn)}const ji=new re(0,0),Di=new re(0,0);Tt.push({tl:Rr,tr:ti,bl:ci,br:wi,tex:wt,writingMode:et.writingMode,glyphOffset:Qr,sectionIndex:Ot.sectionIndex,isSDF:nn,pixelOffsetTL:ji,pixelOffsetBR:Di,minFontScaleX:0,minFontScaleY:0})}return Tt}(0,a,A,p,v,x,h,o.allowVerticalPlacement),Be=o.textSizeData;let Ze=null;Be.kind==="source"?(Ze=[Ta*p.layout.get("text-size").evaluate(x,{})],Ze[0]>Gs&&W(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Be.kind==="composite"&&(Ze=[Ta*me.compositeTextSizes[0].evaluate(x,{},ve),Ta*me.compositeTextSizes[1].evaluate(x,{},ve)],(Ze[0]>Gs||Ze[1]>Gs)&&W(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Re,Ze,A,v,x,V,n,M.lineStartIndex,M.lineLength,ue,ve);for(const nt of te)oe[nt]=o.text.placedSymbolArray.length-1;return 4*Re.length}function i_(o){for(const n in o)return o[n];return null}function VE(o,n,a,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<a)return!0}else p[n]=[];return p[n].push(h),!1}const $E=Us.VectorTileFeature.types,GE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ad(o,n,a,h,p,v,x,A,M,V,te,oe,ue){const me=A?Math.min(Gs,Math.round(A[0])):0,ve=A?Math.min(Gs,Math.round(A[1])):0;o.emplaceBack(n,a,Math.round(32*h),Math.round(32*p),v,x,(me<<1)+(M?1:0),ve,16*V,16*te,256*oe,256*ue)}function O0(o,n,a){o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a)}function HE(o){for(const n of o.sections)if(i0(n.text))return!0;return!1}class R0{constructor(n){this.layoutVertexArray=new mr,this.indexArray=new Ri,this.programConfigurations=n,this.segments=new Yn,this.dynamicLayoutVertexArray=new Kr,this.opacityVertexArray=new Li,this.placedSymbolArray=new ut}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,dE.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,pE.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,GE,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_t("SymbolBuffers",R0);class F0{constructor(n,a,h){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new h,this.segments=new Yn,this.collisionVertexArray=new lo}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,mE.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_t("CollisionBuffers",F0);class nc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=h0([]),this.placementViewportMatrix=h0([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=M0(this.zoom,a["text-size"]),this.iconSizeData=M0(this.zoom,a["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=j0(h,"text-overlap","text-allow-overlap")!=="never"||j0(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>s.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new R0(new Yl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new R0(new Yl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new gt,this.lineVertexArray=new Kt,this.symbolInstances=new St}calculateGlyphDependencies(n,a,h,p,v){for(let x=0;x<n.length;x++)if(a[n.charCodeAt(x)]=!0,(h||p)&&v){const A=Ch[n.charAt(x)];A&&(a[A.charCodeAt(0)]=!0)}}populate(n,a,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),A=v.get("text-field"),M=v.get("icon-image"),V=(A.value.kind!=="constant"||A.value.value instanceof Me&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),te=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,oe=v.get("symbol-sort-key");if(this.features=[],!V&&!te)return;const ue=a.iconDependencies,me=a.glyphDependencies,ve=a.availableImages,Re=new sr(this.zoom);for(const{feature:Be,id:Ze,index:nt,sourceLayerIndex:et}of n){const lt=p._featureFilter.needGeometry,vt=ql(Be,lt);if(!p._featureFilter.filter(Re,vt,h))continue;let pt,jt;if(lt||(vt.geometry=Kl(Be)),V){const zt=p.getValueAndResolveTokens("text-field",vt,h,ve),Lt=Me.factory(zt);HE(Lt)&&(this.hasRTLText=!0),(!this.hasRTLText||Fs()==="unavailable"||this.hasRTLText&&_i.isParsed())&&(pt=yE(Lt,p,vt))}if(te){const zt=p.getValueAndResolveTokens("icon-image",vt,h,ve);jt=zt instanceof Ge?zt:Ge.fromString(zt)}if(!pt&&!jt)continue;const en=this.sortFeaturesByKey?oe.evaluate(vt,{},h):void 0;if(this.features.push({id:Ze,text:pt,icon:jt,index:nt,sourceLayerIndex:et,geometry:vt.geometry,properties:Be.properties,type:$E[Be.type],sortKey:en}),jt&&(ue[jt.name]=!0),pt){const zt=x.evaluate(vt,{},h).join(","),Lt=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.WritingMode.vertical)>=0;for(const Tt of pt.sections)if(Tt.image)ue[Tt.image.name]=!0;else{const Dt=Mi(pt.toString()),Ot=Tt.fontStack||zt,wt=me[Ot]=me[Ot]||{};this.calculateGlyphDependencies(Tt.text,wt,Lt,this.allowVerticalPlacement,Dt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Be){const Ze={},nt={},et=[];let lt=0;function vt(zt){et.push(Be[zt]),lt++}function pt(zt,Lt,Tt){const Dt=nt[zt];return delete nt[zt],nt[Lt]=Dt,et[Dt].geometry[0].pop(),et[Dt].geometry[0]=et[Dt].geometry[0].concat(Tt[0]),Dt}function jt(zt,Lt,Tt){const Dt=Ze[Lt];return delete Ze[Lt],Ze[zt]=Dt,et[Dt].geometry[0].shift(),et[Dt].geometry[0]=Tt[0].concat(et[Dt].geometry[0]),Dt}function en(zt,Lt,Tt){const Dt=Tt?Lt[0][Lt[0].length-1]:Lt[0][0];return`${zt}:${Dt.x}:${Dt.y}`}for(let zt=0;zt<Be.length;zt++){const Lt=Be[zt],Tt=Lt.geometry,Dt=Lt.text?Lt.text.toString():null;if(!Dt){vt(zt);continue}const Ot=en(Dt,Tt),wt=en(Dt,Tt,!0);if(Ot in nt&&wt in Ze&&nt[Ot]!==Ze[wt]){const sn=jt(Ot,wt,Tt),nn=pt(Ot,wt,et[sn].geometry);delete Ze[Ot],delete nt[wt],nt[en(Dt,et[nn].geometry,!0)]=nn,et[sn].geometry=null}else Ot in nt?pt(Ot,wt,Tt):wt in Ze?jt(Ot,wt,Tt):(vt(zt),Ze[Ot]=lt-1,nt[wt]=lt-1)}return et.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Be,Ze)=>Be.sortKey-Ze.sortKey)}update(n,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const x={};for(let A=n.segment+1;A<a.length;A++)x[A]={x:a[A].x,y:a[A].y,tileUnitDistanceFromAnchor:p},A<a.length-1&&(p+=a[A+1].dist(a[A]));for(let A=n.segment||0;A>=0;A--)x[A]={x:a[A].x,y:a[A].y,tileUnitDistanceFromAnchor:v},A>0&&(v+=a[A-1].dist(a[A]));for(let A=0;A<a.length;A++){const M=x[A];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,a,h,p,v,x,A,M,V,te,oe,ue){const me=n.indexArray,ve=n.layoutVertexArray,Re=n.segments.prepareSegment(4*a.length,ve,me,this.canOverlap?x.sortKey:void 0),Be=this.glyphOffsetArray.length,Ze=Re.vertexLength,nt=this.allowVerticalPlacement&&A===s.WritingMode.vertical?Math.PI/2:0,et=x.text&&x.text.sections;for(let lt=0;lt<a.length;lt++){const{tl:vt,tr:pt,bl:jt,br:en,tex:zt,pixelOffsetTL:Lt,pixelOffsetBR:Tt,minFontScaleX:Dt,minFontScaleY:Ot,glyphOffset:wt,isSDF:sn,sectionIndex:nn}=a[lt],Fn=Re.vertexLength,Gn=wt[1];Ad(ve,M.x,M.y,vt.x,Gn+vt.y,zt.x,zt.y,h,sn,Lt.x,Lt.y,Dt,Ot),Ad(ve,M.x,M.y,pt.x,Gn+pt.y,zt.x+zt.w,zt.y,h,sn,Tt.x,Lt.y,Dt,Ot),Ad(ve,M.x,M.y,jt.x,Gn+jt.y,zt.x,zt.y+zt.h,h,sn,Lt.x,Tt.y,Dt,Ot),Ad(ve,M.x,M.y,en.x,Gn+en.y,zt.x+zt.w,zt.y+zt.h,h,sn,Tt.x,Tt.y,Dt,Ot),O0(n.dynamicLayoutVertexArray,M,nt),me.emplaceBack(Fn,Fn+1,Fn+2),me.emplaceBack(Fn+1,Fn+2,Fn+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wt[0]),lt!==a.length-1&&nn===a[lt+1].sectionIndex||n.programConfigurations.populatePaintArrays(ve.length,x,x.index,{},ue,et&&et[nn])}n.placedSymbolArray.emplaceBack(M.x,M.y,Be,this.glyphOffsetArray.length-Be,Ze,V,te,M.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],A,0,!1,0,oe)}_addCollisionDebugVertex(n,a,h,p,v,x){return a.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,a,h,p,v,x,A){const M=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),V=M.vertexLength,te=v.layoutVertexArray,oe=v.collisionVertexArray,ue=A.anchorX,me=A.anchorY;this._addCollisionDebugVertex(te,oe,x,ue,me,new re(n,a)),this._addCollisionDebugVertex(te,oe,x,ue,me,new re(h,a)),this._addCollisionDebugVertex(te,oe,x,ue,me,new re(h,p)),this._addCollisionDebugVertex(te,oe,x,ue,me,new re(n,p)),M.vertexLength+=4;const ve=v.indexArray;ve.emplaceBack(V,V+1),ve.emplaceBack(V+1,V+2),ve.emplaceBack(V+2,V+3),ve.emplaceBack(V+3,V),M.primitiveLength+=4}addDebugCollisionBoxes(n,a,h,p){for(let v=n;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new F0(Oi,zx.members,uo),this.iconCollisionBox=new F0(Oi,zx.members,uo);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,h,p,v,x,A,M,V){const te={};for(let oe=a;oe<h;oe++){const ue=n.get(oe);te.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},te.textFeatureIndex=ue.featureIndex;break}for(let oe=p;oe<v;oe++){const ue=n.get(oe);te.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},te.verticalTextFeatureIndex=ue.featureIndex;break}for(let oe=x;oe<A;oe++){const ue=n.get(oe);te.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},te.iconFeatureIndex=ue.featureIndex;break}for(let oe=M;oe<V;oe++){const ue=n.get(oe);te.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},te.verticalIconFeatureIndex=ue.featureIndex;break}return te}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const h=n.placedSymbolArray.get(a),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let A=0;A<this.symbolInstances.length;++A){x.push(A);const M=this.symbolInstances.get(A);p.push(0|Math.round(a*M.anchorX+h*M.anchorY)),v.push(M.featureIndex)}return x.sort((A,M)=>p[A]-p[M]||v[M]-v[A]),x}addToSortKeyRanges(n,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}_t("SymbolBucket",nc,{omit:["layers","collisionBoxArray","features","compareText"]}),nc.MAX_GLYPHS=65535,nc.addDynamicAttributes=O0;const WE=new bi({"symbol-placement":new qt(T.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(T.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(T.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ln(T.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(T.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(T.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(T.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(T.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(T.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(T.layout_symbol["icon-rotation-alignment"]),"icon-size":new ln(T.layout_symbol["icon-size"]),"icon-text-fit":new qt(T.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(T.layout_symbol["icon-text-fit-padding"]),"icon-image":new ln(T.layout_symbol["icon-image"]),"icon-rotate":new ln(T.layout_symbol["icon-rotate"]),"icon-padding":new qt(T.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(T.layout_symbol["icon-keep-upright"]),"icon-offset":new ln(T.layout_symbol["icon-offset"]),"icon-anchor":new ln(T.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(T.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(T.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(T.layout_symbol["text-rotation-alignment"]),"text-field":new ln(T.layout_symbol["text-field"]),"text-font":new ln(T.layout_symbol["text-font"]),"text-size":new ln(T.layout_symbol["text-size"]),"text-max-width":new ln(T.layout_symbol["text-max-width"]),"text-line-height":new qt(T.layout_symbol["text-line-height"]),"text-letter-spacing":new ln(T.layout_symbol["text-letter-spacing"]),"text-justify":new ln(T.layout_symbol["text-justify"]),"text-radial-offset":new ln(T.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(T.layout_symbol["text-variable-anchor"]),"text-anchor":new ln(T.layout_symbol["text-anchor"]),"text-max-angle":new qt(T.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(T.layout_symbol["text-writing-mode"]),"text-rotate":new ln(T.layout_symbol["text-rotate"]),"text-padding":new qt(T.layout_symbol["text-padding"]),"text-keep-upright":new qt(T.layout_symbol["text-keep-upright"]),"text-transform":new ln(T.layout_symbol["text-transform"]),"text-offset":new ln(T.layout_symbol["text-offset"]),"text-allow-overlap":new qt(T.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(T.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(T.layout_symbol["text-ignore-placement"]),"text-optional":new qt(T.layout_symbol["text-optional"])});var B0={paint:new bi({"icon-opacity":new ln(T.paint_symbol["icon-opacity"]),"icon-color":new ln(T.paint_symbol["icon-color"]),"icon-halo-color":new ln(T.paint_symbol["icon-halo-color"]),"icon-halo-width":new ln(T.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ln(T.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(T.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(T.paint_symbol["icon-translate-anchor"]),"text-opacity":new ln(T.paint_symbol["text-opacity"]),"text-color":new ln(T.paint_symbol["text-color"],{runtimeType:Ar,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ln(T.paint_symbol["text-halo-color"]),"text-halo-width":new ln(T.paint_symbol["text-halo-width"]),"text-halo-blur":new ln(T.paint_symbol["text-halo-blur"]),"text-translate":new qt(T.paint_symbol["text-translate"]),"text-translate-anchor":new qt(T.paint_symbol["text-translate-anchor"])}),layout:WE};class o_{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:fn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_t("FormatSectionOverride",o_,{omit:["defaultValue"]});class Id extends zi{constructor(n){super(n,B0)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,h,p){const v=this.layout.get(n).evaluate(a,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Ho(x.value)||!v?v:function(A,M){return M.replace(/{([^{}]+)}/g,(V,te)=>te in A?String(A[te]):"")}(a.properties,v)}createBucket(n){return new nc(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of B0.paint.overridableProperties){if(!Id.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),h=new o_(a),p=new jl(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new zs("source",p):new Ls("composite",p,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new Ao(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Id.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const h=n.get("text-field"),p=B0.paint.properties[a];let v=!1;const x=A=>{for(const M of A)if(p.overrides&&p.overrides.hasOverride(M))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Me)x(h.value.value.sections);else if(h.value.kind==="source"){const A=V=>{v||(V instanceof mt&&He(V.value)===gi?x(V.value.sections):V instanceof Ut?x(V.sections):V.eachChild(A))},M=h.value;M._styleExpression&&A(M._styleExpression.expression)}return v}}function j0(o,n,a){let h="never";const p=o.get(n);return p?h=p:o.get(a)&&(h="always"),h}var ZE={paint:new bi({"background-color":new qt(T.paint_background["background-color"]),"background-pattern":new $u(T.paint_background["background-pattern"]),"background-opacity":new qt(T.paint_background["background-opacity"])})},XE={paint:new bi({"raster-opacity":new qt(T.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(T.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(T.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(T.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(T.paint_raster["raster-saturation"]),"raster-contrast":new qt(T.paint_raster["raster-contrast"]),"raster-resampling":new qt(T.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(T.paint_raster["raster-fade-duration"])})};class YE extends zi{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const KE={circle:class extends zi{constructor(o){super(o,A6)}createBucket(o){return new l0(o)}queryRadius(o){const n=o;return yh("circle-radius",this,n)+yh("circle-stroke-width",this,n)+hd(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,a,h,p,v,x,A){const M=fd(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,x),V=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a),te=this.paint.get("circle-pitch-alignment")==="map",oe=te?M:function(me,ve){return me.map(Re=>px(Re,ve))}(M,A),ue=te?V*x:V;for(const me of h)for(const ve of me){const Re=te?ve:px(ve,A);let Be=ue;const Ze=pd(f0(),dd(ve.x,ve.y,0,1),A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Ze[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=v.cameraToCenterDistance/Ze[3]),w6(oe,Re,Be))return!0}return!1}},heatmap:class extends zi{constructor(o){super(o,P6),this._updateColorRamp()}createBucket(o){return new mx(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends zi{constructor(o){super(o,k6)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends zi{constructor(o){super(o,W6)}recalculate(o,n){super.recalculate(o,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new w0(o)}queryRadius(){return hd(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,a,h,p,v,x){return cx(fd(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,x),h)}isTileClipped(){return!0}},"fill-extrusion":class extends zi{constructor(o){super(o,oE)}createBucket(o){return new S0(o)}queryRadius(){return hd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,a,h,p,v,x,A){const M=fd(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,x),V=this.paint.get("fill-extrusion-height").evaluate(n,a),te=this.paint.get("fill-extrusion-base").evaluate(n,a),oe=function(me,ve,Re,Be){const Ze=[];for(const nt of me){const et=dd(nt.x,nt.y,0,1);pd(et,et,ve),Ze.push(new re(et[0]/et[3],et[1]/et[3]))}return Ze}(M,A),ue=function(me,ve,Re,Be){const Ze=[],nt=[],et=Be[8]*ve,lt=Be[9]*ve,vt=Be[10]*ve,pt=Be[11]*ve,jt=Be[8]*Re,en=Be[9]*Re,zt=Be[10]*Re,Lt=Be[11]*Re;for(const Tt of me){const Dt=[],Ot=[];for(const wt of Tt){const sn=wt.x,nn=wt.y,Fn=Be[0]*sn+Be[4]*nn+Be[12],Gn=Be[1]*sn+Be[5]*nn+Be[13],ur=Be[2]*sn+Be[6]*nn+Be[14],cr=Be[3]*sn+Be[7]*nn+Be[15],Qr=ur+vt,Lr=cr+pt,Or=Fn+jt,Zr=Gn+en,ei=ur+zt,ui=cr+Lt,Bi=new re((Fn+et)/Lr,(Gn+lt)/Lr);Bi.z=Qr/Lr,Dt.push(Bi);const Rr=new re(Or/ui,Zr/ui);Rr.z=ei/ui,Ot.push(Rr)}Ze.push(Dt),nt.push(Ot)}return[Ze,nt]}(h,te,V,A);return function(me,ve,Re){let Be=1/0;cx(Re,ve)&&(Be=Ax(Re,ve[0]));for(let Ze=0;Ze<ve.length;Ze++){const nt=ve[Ze],et=me[Ze];for(let lt=0;lt<nt.length-1;lt++){const vt=nt[lt],pt=[vt,nt[lt+1],et[lt+1],et[lt],vt];ux(Re,pt)&&(Be=Math.min(Be,Ax(Re,pt)))}}return Be!==1/0&&Be}(ue[0],ue[1],oe)}},line:class extends zi{constructor(o){super(o,Px),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ma,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=kx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new C0(o)}queryRadius(o){const n=o,a=Mx(yh("line-width",this,n),yh("line-gap-width",this,n)),h=yh("line-offset",this,n);return a/2+Math.abs(h)+hd(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,a,h,p,v,x){const A=fd(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,x),M=x/2*Mx(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),V=this.paint.get("line-offset").evaluate(n,a);return V&&(h=function(te,oe){const ue=[],me=new re(0,0);for(let ve=0;ve<te.length;ve++){const Re=te[ve],Be=[];for(let Ze=0;Ze<Re.length;Ze++){const nt=Re[Ze-1],et=Re[Ze],lt=Re[Ze+1],vt=Ze===0?me:et.sub(nt)._unit()._perp(),pt=Ze===Re.length-1?me:lt.sub(et)._unit()._perp(),jt=vt._add(pt)._unit();jt._mult(1/(jt.x*pt.x+jt.y*pt.y)),Be.push(jt._mult(oe)._add(et))}ue.push(Be)}return ue}(h,V*x)),function(te,oe,ue){for(let me=0;me<oe.length;me++){const ve=oe[me];if(te.length>=3){for(let Re=0;Re<ve.length;Re++)if(Yu(te,ve[Re]))return!0}if(E6(te,ve,ue))return!0}return!1}(A,h,M)}isTileClipped(){return!0}},symbol:Id,background:class extends zi{constructor(o){super(o,ZE)}},raster:class extends zi{constructor(o){super(o,XE)}}};class qE{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const a_=63710088e-1;class Cr{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Cr(D(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,h=this.lat*a,p=n.lat*a,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*a);return a_*Math.acos(Math.min(v,1))}toBounds(n=0){const a=360*n/40075017,h=a/Math.cos(Math.PI/180*this.lat);return new Ql(new Cr(this.lng-h,this.lat-a),new Cr(this.lng+h,this.lat+a))}static convert(n){if(n instanceof Cr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Cr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Cr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ql{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Cr?new Cr(n.lng,n.lat):Cr.convert(n),this}setSouthWest(n){return this._sw=n instanceof Cr?new Cr(n.lng,n.lat):Cr.convert(n),this}extend(n){const a=this._sw,h=this._ne;let p,v;if(n instanceof Cr)p=n,v=n;else{if(!(n instanceof Ql))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Ql.convert(n)):this.extend(Cr.convert(n)):this;if(p=n._sw,v=n._ne,!p||!v)return this}return a||h?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new Cr(p.lng,p.lat),this._ne=new Cr(v.lng,v.lat)),this}getCenter(){return new Cr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Cr(this.getWest(),this.getNorth())}getSouthEast(){return new Cr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:h}=Cr.convert(n);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(n){return n instanceof Ql?n:n&&new Ql(n)}}const s_=2*Math.PI*a_;function l_(o){return s_*Math.cos(o*Math.PI/180)}function u_(o){return(180+o)/360}function c_(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function h_(o,n){return o/l_(n)}function D0(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Pd{constructor(n,a,h=0){this.x=+n,this.y=+a,this.z=+h}static fromLngLat(n,a=0){const h=Cr.convert(n);return new Pd(u_(h.lng),c_(h.lat),h_(a,h.lat))}toLngLat(){return new Cr(360*this.x-180,D0(this.y))}toAltitude(){return this.z*l_(D0(this.y))}meterInMercatorCoordinateUnits(){return 1/s_*(n=D0(this.y),1/Math.cos(n*Math.PI/180));var n}}function f_(o,n,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class N0{constructor(n,a,h){this.z=n,this.x=a,this.y=h,this.key=Ah(0,n,n,a,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,h){const p=(x=this.y,A=this.z,M=f_(256*(v=this.x),256*(x=Math.pow(2,A)-x-1),A),V=f_(256*(v+1),256*(x+1),A),M[0]+","+M[1]+","+V[0]+","+V[1]);var v,x,A,M,V;const te=function(oe,ue,me){let ve,Re="";for(let Be=oe;Be>0;Be--)ve=1<<Be-1,Re+=(ue&ve?1:0)+(me&ve?2:0);return Re}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,te).replace(/{bbox-epsg-3857}/g,p)}getTilePoint(n){const a=Math.pow(2,this.z);return new re((n.x*a-this.x)*Hr,(n.y*a-this.y)*Hr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class d_{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Ah(n,a.z,a.z,a.x,a.y)}}class Io{constructor(n,a,h,p,v){this.overscaledZ=n,this.wrap=a,this.canonical=new N0(h,+p,+v),this.key=Ah(a,n,h,p,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new Io(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){const h=this.canonical.z-n;return n>this.canonical.z?Ah(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Ah(this.wrap*+a,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Io(a,this.wrap,a,h,p),new Io(a,this.wrap,a,h+1,p),new Io(a,this.wrap,a,h,p+1),new Io(a,this.wrap,a,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Io(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new d_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Pd(n.x-this.wrap,n.y))}}function Ah(o,n,a,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*p+h).toString(36)+a.toString(36)+n.toString(36)}_t("CanonicalTileID",N0),_t("OverscaledTileID",Io,{omit:["posMatrix"]});class p_{constructor(n,a,h){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void W(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const p=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<p;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(p,v)]=this.data[this._idx(p-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,p)]=this.data[this._idx(v,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]}get(n,a){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[p],h[p+1],h[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}_unpackMapbox(n,a,h){return(256*n*256+256*a+h)/10-1e4}_unpackTerrarium(n,a,h){return 256*n+a+h/256-32768}getPixels(){return new co({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,v=a*this.dim+this.dim,x=h*this.dim,A=h*this.dim+this.dim;switch(a){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=A-1;break;case 1:A=x+1}const M=-a*this.dim,V=-h*this.dim;for(let te=x;te<A;te++)for(let oe=p;oe<v;oe++)this.data[this._idx(oe,te)]=n.data[this._idx(oe+M,te+V)]}}_t("DEMData",p_);class m_{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const h=n[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}class g_{constructor(n,a,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n=function(a,h){var p={};for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&h.indexOf(v)<0&&(p[v]=a[v]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(v=Object.getOwnPropertySymbols(a);x<v.length;x++)h.indexOf(v[x])<0&&Object.prototype.propertyIsEnumerable.call(a,v[x])&&(p[v[x]]=a[v[x]])}return p}(this,["_geometry","_vectorTileFeature"]);return n.geometry=this.geometry,n}}class y_{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Yt(Hr,16,0),this.grid3D=new Yt(Hr,16,0),this.featureIndexArray=new pn,this.promoteId=a}insert(n,a,h,p,v,x){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const M=x?this.grid3D:this.grid;for(let V=0;V<a.length;V++){const te=a[V],oe=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<te.length;ue++){const me=te[ue];oe[0]=Math.min(oe[0],me.x),oe[1]=Math.min(oe[1],me.y),oe[2]=Math.max(oe[2],me.x),oe[3]=Math.max(oe[3],me.y)}oe[0]<Hr&&oe[1]<Hr&&oe[2]>=0&&oe[3]>=0&&M.insert(A,oe[0],oe[1],oe[2],oe[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Us.VectorTile(new T0(this.rawTileData)).layers,this.sourceLayerCoder=new m_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,h,p){this.loadVTLayers();const v=n.params||{},x=Hr/n.tileSize/n.scale,A=_a(v.filter),M=n.queryGeometry,V=n.queryPadding*x,te=x_(M),oe=this.grid.query(te.minX-V,te.minY-V,te.maxX+V,te.maxY+V),ue=x_(n.cameraQueryGeometry),me=this.grid3D.query(ue.minX-V,ue.minY-V,ue.maxX+V,ue.maxY+V,(Be,Ze,nt,et)=>function(lt,vt,pt,jt,en){for(const Lt of lt)if(vt<=Lt.x&&pt<=Lt.y&&jt>=Lt.x&&en>=Lt.y)return!0;const zt=[new re(vt,pt),new re(vt,en),new re(jt,en),new re(jt,pt)];if(lt.length>2){for(const Lt of zt)if(Yu(lt,Lt))return!0}for(let Lt=0;Lt<lt.length-1;Lt++)if(C6(lt[Lt],lt[Lt+1],zt))return!0;return!1}(n.cameraQueryGeometry,Be-V,Ze-V,nt+V,et+V));for(const Be of me)oe.push(Be);oe.sort(JE);const ve={};let Re;for(let Be=0;Be<oe.length;Be++){const Ze=oe[Be];if(Ze===Re)continue;Re=Ze;const nt=this.featureIndexArray.get(Ze);let et=null;this.loadMatchingFeature(ve,nt.bucketIndex,nt.sourceLayerIndex,nt.featureIndex,A,v.layers,v.availableImages,a,h,p,(lt,vt,pt)=>(et||(et=Kl(lt)),vt.queryIntersectsFeature(M,lt,pt,et,this.z,n.transform,x,n.pixelPosMatrix)))}return ve}loadMatchingFeature(n,a,h,p,v,x,A,M,V,te,oe){const ue=this.bucketLayerIDs[a];if(x&&!function(Be,Ze){for(let nt=0;nt<Be.length;nt++)if(Ze.indexOf(Be[nt])>=0)return!0;return!1}(x,ue))return;const me=this.sourceLayerCoder.decode(h),ve=this.vtLayers[me].feature(p);if(v.needGeometry){const Be=ql(ve,!0);if(!v.filter(new sr(this.tileID.overscaledZ),Be,this.tileID.canonical))return}else if(!v.filter(new sr(this.tileID.overscaledZ),ve))return;const Re=this.getId(ve,me);for(let Be=0;Be<ue.length;Be++){const Ze=ue[Be];if(x&&x.indexOf(Ze)<0)continue;const nt=M[Ze];if(!nt)continue;let et={};Re&&te&&(et=te.getState(nt.sourceLayer||"_geojsonTileLayer",Re));const lt=J({},V[Ze]);lt.paint=v_(lt.paint,nt.paint,ve,et,A),lt.layout=v_(lt.layout,nt.layout,ve,et,A);const vt=!oe||oe(ve,nt,et);if(!vt)continue;const pt=new g_(ve,this.z,this.x,this.y,Re);pt.layer=lt;let jt=n[Ze];jt===void 0&&(jt=n[Ze]=[]),jt.push({featureIndex:p,feature:pt,intersectionZ:vt})}}lookupSymbolFeatures(n,a,h,p,v,x,A,M){const V={};this.loadVTLayers();const te=_a(v);for(const oe of n)this.loadMatchingFeature(V,h,p,oe,te,x,A,M,a);return V}hasLayer(n){for(const a of this.bucketLayerIDs)for(const h of a)if(n===h)return!0;return!1}getId(n,a){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function v_(o,n,a,h,p){return U(o,(v,x)=>{const A=n instanceof Vu?n.get(x):null;return A&&A.evaluate?A.evaluate(a,h,p):A})}function x_(o){let n=1/0,a=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:a,maxX:h,maxY:p}}function JE(o,n){return n-o}var U0;_t("FeatureIndex",y_,{omit:["rawTileData","sourceLayerCoder"]}),s.PerformanceMarkers=void 0,(U0=s.PerformanceMarkers||(s.PerformanceMarkers={})).create="create",U0.load="load",U0.fullLoad="fullLoad";let kd=null,Ih=[];const V0=1e3/30,QE={mark(o){performance.mark(o)},frame(o){const n=o;kd!=null&&Ih.push(n-kd),kd=n},clearMetrics(){kd=null,Ih=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in s.PerformanceMarkers)performance.clearMarks(s.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.load),performance.measure("fullLoadTime",s.PerformanceMarkers.create,s.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,a=Ih.length,h=1/(Ih.reduce((v,x)=>v+x,0)/a/1e3),p=Ih.filter(v=>v>V0).reduce((v,x)=>v+(x-V0)/V0,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(a+p)*100}}};s.AJAXError=Nt,s.ARRAY_TYPE=Jl,s.Actor=class{constructor(o,n,a){this.target=o,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},G(["receive","process"],this),this.invoker=new qE(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?o:window}send(o,n,a,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=ge(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!a,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Zn(n,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[a];const h=this.cancelCallbacks[a];delete this.cancelCallbacks[a],h&&h()}else k()||n.mustQueue?(this.tasks[a]=n,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(n.error?a(er(n.error)):a(null,er(n.data)))}else{let a=!1;const h=ge(this.globalScope)?void 0:[],p=n.hasCallback?(A,M)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:A?Zn(A):null,data:Zn(M,h)},h)}:A=>{a=!0};let v=null;const x=er(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if(this.parent.getWorkerSource){const A=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,A[0],x.source)[A[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.AlphaImage=vh,s.CanonicalTileID=N0,s.CollisionBoxArray=ct,s.CollisionCircleLayoutArray=class extends j{},s.Color=Q,s.DEMData=p_,s.DataConstantProperty=qt,s.DictionaryCoder=m_,s.EXTENT=Hr,s.ErrorEvent=at,s.EvaluationParameters=sr,s.Event=Ke,s.Evented=se,s.FeatureIndex=y_,s.FillBucket=w0,s.FillExtrusionBucket=S0,s.GeoJSONFeature=g_,s.ImageAtlas=Nx,s.ImagePosition=I0,s.LineBucket=C0,s.LineStripIndexArray=class extends We{},s.LngLat=Cr,s.LngLatBounds=Ql,s.MercatorCoordinate=Pd,s.ONE_EM=qr,s.OverscaledTileID=Io,s.PerformanceUtils=QE,s.PosArray=class extends Zl{},s.Properties=bi,s.QuadTriangleArray=class extends ae{},s.RGBAImage=co,s.RasterBoundsArray=class extends Hu{},s.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},s.ResourceType=Et,s.SegmentVector=Yn,s.SymbolBucket=nc,s.Transitionable=ph,s.TriangleIndexArray=Ri,s.Uniform1f=rs,s.Uniform1i=class extends ns{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},s.Uniform2f=class extends ns{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},s.Uniform3f=class extends ns{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},s.Uniform4f=Zu,s.UniformColor=ox,s.UniformMatrix4f=class extends ns{constructor(o,n){super(o,n),this.current=_6}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},s.UnwrappedTileID=d_,s.ValidationError=z,s.ZoomHistory=Ir,s.addDynamicAttributes=O0,s.asyncAll=function(o,n,a){if(!o.length)return a(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,A)=>{n(x,(M,V)=>{M&&(v=M),p[A]=V,--h==0&&a(v,p)})})},s.bezier=C,s.bindAll=G,s.cacheEntryPossiblyAdded=function(o){De++,De>Te&&(o.getActor().send("enforceCacheSizeLimit",ke),De=0)},s.clamp=I,s.clearTileCache=function(o){const n=caches.delete(_e);o&&n.catch(o).then(()=>o())},s.clipLine=Qx,s.clone=function(o){var n=new Jl(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},s.clone$1=$,s.collisionCircleLayout=gE,s.config=le,s.create=function(){var o=new Jl(16);return Jl!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},s.createExpression=Xa,s.createFilter=_a,s.createLayout=_r,s.createStyleLayer=function(o){return o.type==="custom"?new YE(o):new KE[o.type](o)},s.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},s.ease=S,s.emitValidationErrors=Xt,s.enforceCacheSizeLimit=function(o){Pe(),Ie&&Ie.then(n=>{n.keys().then(a=>{for(let h=0;h<a.length-o;h++)n.delete(a[h])})})},s.evaluateSizeForFeature=Wx,s.evaluateSizeForZoom=Zx,s.evaluateVariableOffset=n_,s.evented=fh,s.exported=ee,s.exported$1=Ue,s.extend=J,s.filterObject=H,s.fromValues=dd,s.getAnchorAlignment=k0,s.getAnchorJustification=L0,s.getArrayBuffer=wn,s.getImage=O,s.getJSON=function(o,n){return An(J(o,{type:"json"}),n)},s.getOverlapMode=j0,s.getRTLTextPluginStatus=Fs,s.getReferrer=Bt,s.getVideo=function(o,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");on(o[h])||(a.crossOrigin="Anonymous"),p.src=o[h],a.appendChild(p)}return{cancel:()=>{}}},s.identity=h0,s.invert=function(o,n){var a=n[0],h=n[1],p=n[2],v=n[3],x=n[4],A=n[5],M=n[6],V=n[7],te=n[8],oe=n[9],ue=n[10],me=n[11],ve=n[12],Re=n[13],Be=n[14],Ze=n[15],nt=a*A-h*x,et=a*M-p*x,lt=a*V-v*x,vt=h*M-p*A,pt=h*V-v*A,jt=p*V-v*M,en=te*Re-oe*ve,zt=te*Be-ue*ve,Lt=te*Ze-me*ve,Tt=oe*Be-ue*Re,Dt=oe*Ze-me*Re,Ot=ue*Ze-me*Be,wt=nt*Ot-et*Dt+lt*Tt+vt*Lt-pt*zt+jt*en;return wt?(o[0]=(A*Ot-M*Dt+V*Tt)*(wt=1/wt),o[1]=(p*Dt-h*Ot-v*Tt)*wt,o[2]=(Re*jt-Be*pt+Ze*vt)*wt,o[3]=(ue*pt-oe*jt-me*vt)*wt,o[4]=(M*Lt-x*Ot-V*zt)*wt,o[5]=(a*Ot-p*Lt+v*zt)*wt,o[6]=(Be*lt-ve*jt-Ze*et)*wt,o[7]=(te*jt-ue*lt+me*et)*wt,o[8]=(x*Dt-A*Lt+V*en)*wt,o[9]=(h*Lt-a*Dt-v*en)*wt,o[10]=(ve*pt-Re*lt+Ze*nt)*wt,o[11]=(oe*lt-te*pt-me*nt)*wt,o[12]=(A*zt-x*Tt-M*en)*wt,o[13]=(a*Tt-h*zt+p*en)*wt,o[14]=(Re*et-ve*vt-Be*nt)*wt,o[15]=(te*vt-oe*et+ue*nt)*wt,o):null},s.isImageBitmap=xe,s.isSafari=ge,s.keysDifference=function(o,n){const a=[];for(const h in o)h in n||a.push(h);return a},s.lazyLoadRTLTextPlugin=function(){_i.isLoading()||_i.isLoaded()||Fs()!=="deferred"||od()},s.makeRequest=An,s.mapObject=U,s.mercatorXfromLng=u_,s.mercatorYfromLat=c_,s.mercatorZfromAltitude=h_,s.mul=I6,s.multiply=dx,s.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},s.number=ir,s.ortho=function(o,n,a,h,p,v,x){var A=1/(n-a),M=1/(h-p),V=1/(v-x);return o[0]=-2*A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*V,o[11]=0,o[12]=(n+a)*A,o[13]=(p+h)*M,o[14]=(x+v)*V,o[15]=1,o},s.parseCacheControl=B,s.parseGlyphPBF=function(o){return new T0(o).readFields(AE,[])},s.pbf=T0,s.performSymbolLayout=function(o,n,a,h,p,v,x){o.createArrays(),o.tilePixelRatio=Hr/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const A=o.layers[0].layout,M=o.layers[0]._unevaluatedLayout._values,V={layoutIconSize:M["icon-size"].possiblyEvaluate(new sr(o.zoom+1),x),layoutTextSize:M["text-size"].possiblyEvaluate(new sr(o.zoom+1),x),textMaxSize:M["text-size"].possiblyEvaluate(new sr(18))};if(o.textSizeData.kind==="composite"){const{minZoom:ve,maxZoom:Re}=o.textSizeData;V.compositeTextSizes=[M["text-size"].possiblyEvaluate(new sr(ve),x),M["text-size"].possiblyEvaluate(new sr(Re),x)]}if(o.iconSizeData.kind==="composite"){const{minZoom:ve,maxZoom:Re}=o.iconSizeData;V.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new sr(ve),x),M["icon-size"].possiblyEvaluate(new sr(Re),x)]}const te=A.get("text-line-height")*qr,oe=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point",ue=A.get("text-keep-upright"),me=A.get("text-size");for(const ve of o.features){const Re=A.get("text-font").evaluate(ve,{},x).join(","),Be=me.evaluate(ve,{},x),Ze=V.layoutTextSize.evaluate(ve,{},x),nt=V.layoutIconSize.evaluate(ve,{},x),et={horizontal:{},vertical:void 0},lt=ve.text;let vt,pt=[0,0];if(lt){const zt=lt.toString(),Lt=A.get("text-letter-spacing").evaluate(ve,{},x)*qr,Tt=so(zt)?Lt:0,Dt=A.get("text-anchor").evaluate(ve,{},x),Ot=A.get("text-variable-anchor");if(!Ot){const Gn=A.get("text-radial-offset").evaluate(ve,{},x);pt=Gn?n_(Dt,[Gn*qr,z0]):A.get("text-offset").evaluate(ve,{},x).map(ur=>ur*qr)}let wt=oe?"center":A.get("text-justify").evaluate(ve,{},x);const sn=A.get("symbol-placement"),nn=sn==="point"?A.get("text-max-width").evaluate(ve,{},x)*qr:0,Fn=()=>{o.allowVerticalPlacement&&Mi(zt)&&(et.vertical=bd(lt,n,a,p,Re,nn,te,Dt,"left",Tt,pt,s.WritingMode.vertical,!0,sn,Ze,Be))};if(!oe&&Ot){const Gn=wt==="auto"?Ot.map(cr=>L0(cr)):[wt];let ur=!1;for(let cr=0;cr<Gn.length;cr++){const Qr=Gn[cr];if(!et.horizontal[Qr])if(ur)et.horizontal[Qr]=et.horizontal[0];else{const Lr=bd(lt,n,a,p,Re,nn,te,"center",Qr,Tt,pt,s.WritingMode.horizontal,!1,sn,Ze,Be);Lr&&(et.horizontal[Qr]=Lr,ur=Lr.positionedLines.length===1)}}Fn()}else{wt==="auto"&&(wt=L0(Dt));const Gn=bd(lt,n,a,p,Re,nn,te,Dt,wt,Tt,pt,s.WritingMode.horizontal,!1,sn,Ze,Be);Gn&&(et.horizontal[wt]=Gn),Fn(),Mi(zt)&&oe&&ue&&(et.vertical=bd(lt,n,a,p,Re,nn,te,Dt,wt,Tt,pt,s.WritingMode.vertical,!1,sn,Ze,Be))}}let jt=!1;if(ve.icon&&ve.icon.name){const zt=h[ve.icon.name];zt&&(vt=LE(p[ve.icon.name],A.get("icon-offset").evaluate(ve,{},x),A.get("icon-anchor").evaluate(ve,{},x)),jt=!!zt.sdf,o.sdfIcons===void 0?o.sdfIcons=jt:o.sdfIcons!==jt&&W("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==o.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const en=i_(et.horizontal)||et.vertical;o.iconsInText=!!en&&en.iconsInText,(en||vt)&&UE(o,ve,et,vt,h,V,Ze,nt,pt,jt,x)}v&&o.generateCollisionDebugBuffers()},s.perspective=function(o,n,a,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},s.pick=function(o,n){const a={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(a[p]=o[p])}return a},s.plugin=_i,s.pointGeometry=re,s.polygonIntersectsPolygon=ux,s.potpack=Dx,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.register=_t,s.registerForPluginStateChange=function(o){return o({pluginStatus:xi,pluginURL:Ea}),fh.on("pluginStateChange",o),o},s.renderColorRamp=yx,s.rotateX=function(o,n,a){var h=Math.sin(a),p=Math.cos(a),v=n[4],x=n[5],A=n[6],M=n[7],V=n[8],te=n[9],oe=n[10],ue=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+V*h,o[5]=x*p+te*h,o[6]=A*p+oe*h,o[7]=M*p+ue*h,o[8]=V*p-v*h,o[9]=te*p-x*h,o[10]=oe*p-A*h,o[11]=ue*p-M*h,o},s.rotateZ=function(o,n,a){var h=Math.sin(a),p=Math.cos(a),v=n[0],x=n[1],A=n[2],M=n[3],V=n[4],te=n[5],oe=n[6],ue=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+V*h,o[1]=x*p+te*h,o[2]=A*p+oe*h,o[3]=M*p+ue*h,o[4]=V*p-v*h,o[5]=te*p-x*h,o[6]=oe*p-A*h,o[7]=ue*p-M*h,o},s.scale=function(o,n,a){var h=a[0],p=a[1],v=a[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},s.scale$1=function(o,n,a){return o[0]=n[0]*a,o[1]=n[1]*a,o[2]=n[2]*a,o[3]=n[3]*a,o},s.setCacheLimits=function(o,n){ke=o,Te=n},s.setRTLTextPlugin=function(o,n,a=!1){if(xi===lh||xi===Nu||xi===uh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ea=ee.resolveURL(o),xi=lh,ch=n,hh(),a||od()},s.spec=T,s.sphericalToCartesian=function([o,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(a),y:o*Math.sin(n)*Math.sin(a),z:o*Math.cos(a)}},s.symbolSize=OE,s.toEvaluationFeature=ql,s.transformMat4=pd,s.translate=function(o,n,a){var h,p,v,x,A,M,V,te,oe,ue,me,ve,Re=a[0],Be=a[1],Ze=a[2];return n===o?(o[12]=n[0]*Re+n[4]*Be+n[8]*Ze+n[12],o[13]=n[1]*Re+n[5]*Be+n[9]*Ze+n[13],o[14]=n[2]*Re+n[6]*Be+n[10]*Ze+n[14],o[15]=n[3]*Re+n[7]*Be+n[11]*Ze+n[15]):(p=n[1],v=n[2],x=n[3],A=n[4],M=n[5],V=n[6],te=n[7],oe=n[8],ue=n[9],me=n[10],ve=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=A,o[5]=M,o[6]=V,o[7]=te,o[8]=oe,o[9]=ue,o[10]=me,o[11]=ve,o[12]=h*Re+A*Be+oe*Ze+n[12],o[13]=p*Re+M*Be+ue*Ze+n[13],o[14]=v*Re+V*Be+me*Ze+n[14],o[15]=x*Re+te*Be+ve*Ze+n[15]),o},s.triggerPluginCompletionEvent=id,s.unicodeBlockLookup=bt,s.uniqueId=function(){return X++},s.validateCustomStyleLayer=function(o){const n=[],a=o.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},s.validateLight=tt,s.validateStyle=Oe,s.vectorTile=Us,s.warnOnce=W,s.wrap=D}),f(["./shared"],function(s){function _(Ce){const Z=typeof Ce;if(Z==="number"||Z==="boolean"||Z==="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){let Ae="[";for(const Me of Ce)Ae+=`${_(Me)},`;return`${Ae}]`}const Q=Object.keys(Ce).sort();let ye="{";for(let Ae=0;Ae<Q.length;Ae++)ye+=`${JSON.stringify(Q[Ae])}:${_(Ce[Q[Ae]])},`;return`${ye}}`}function E(Ce){let Z="";for(const Q of s.refProperties)Z+=`/${_(Ce[Q])}`;return Z}class C{constructor(Z){this.keyCache={},Z&&this.replace(Z)}replace(Z){this._layerConfigs={},this._layers={},this.update(Z,[])}update(Z,Q){for(const Ae of Z){this._layerConfigs[Ae.id]=Ae;const Me=this._layers[Ae.id]=s.createStyleLayer(Ae);Me._featureFilter=s.createFilter(Me.filter),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id]}for(const Ae of Q)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const ye=function(Ae,Me){const Ge={};for(let Ve=0;Ve<Ae.length;Ve++){const He=Me&&Me[Ae[Ve].id]||E(Ae[Ve]);Me&&(Me[Ae[Ve].id]=He);let st=Ge[He];st||(st=Ge[He]=[]),st.push(Ae[Ve])}const Ne=[];for(const Ve in Ge)Ne.push(Ge[Ve]);return Ne}(Object.values(this._layerConfigs),this.keyCache);for(const Ae of ye){const Me=Ae.map(mt=>this._layers[mt.id]),Ge=Me[0];if(Ge.visibility==="none")continue;const Ne=Ge.source||"";let Ve=this.familiesBySource[Ne];Ve||(Ve=this.familiesBySource[Ne]={});const He=Ge.sourceLayer||"_geojsonTileLayer";let st=Ve[He];st||(st=Ve[He]=[]),st.push(Me)}}}class S{constructor(Z){const Q={},ye=[];for(const Ne in Z){const Ve=Z[Ne],He=Q[Ne]={};for(const st in Ve){const mt=Ve[+st];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const it={x:0,y:0,w:mt.bitmap.width+2,h:mt.bitmap.height+2};ye.push(it),He[st]={rect:it,metrics:mt.metrics}}}const{w:Ae,h:Me}=s.potpack(ye),Ge=new s.AlphaImage({width:Ae||1,height:Me||1});for(const Ne in Z){const Ve=Z[Ne];for(const He in Ve){const st=Ve[+He];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const mt=Q[Ne][He].rect;s.AlphaImage.copy(st.bitmap,Ge,{x:0,y:0},{x:mt.x+1,y:mt.y+1},st.bitmap)}}this.image=Ge,this.positions=Q}}s.register("GlyphAtlas",S);class I{constructor(Z){this.tileID=new s.OverscaledTileID(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId}parse(Z,Q,ye,Ae,Me){this.status="parsing",this.data=Z,this.collisionBoxArray=new s.CollisionBoxArray;const Ge=new s.DictionaryCoder(Object.keys(Z.layers).sort()),Ne=new s.FeatureIndex(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const Ve={},He={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},st=Q.familiesBySource[this.source];for(const Tn in st){const _n=Z.layers[Tn];if(!_n)continue;_n.version===1&&s.warnOnce(`Vector tile source "${this.source}" layer "${Tn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const bn=Ge.encode(Tn),tr=[];for(let fr=0;fr<_n.length;fr++){const Jn=_n.feature(fr),xo=Ne.getId(Jn,Tn);tr.push({feature:Jn,id:xo,index:fr,sourceLayerIndex:bn})}for(const fr of st[Tn]){const Jn=fr[0];Jn.minzoom&&this.zoom<Math.floor(Jn.minzoom)||Jn.maxzoom&&this.zoom>=Jn.maxzoom||Jn.visibility!=="none"&&(D(fr,this.zoom,ye),(Ve[Jn.id]=Jn.createBucket({index:Ne.bucketLayerIDs.length,layers:fr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:bn,sourceID:this.source})).populate(tr,He,this.tileID.canonical),Ne.bucketLayerIDs.push(fr.map(xo=>xo.id)))}}let mt,it,$t,At;const Ut=s.mapObject(He.glyphDependencies,Tn=>Object.keys(Tn).map(Number));Object.keys(Ut).length?Ae.send("getGlyphs",{uid:this.uid,stacks:Ut},(Tn,_n)=>{mt||(mt=Tn,it=_n,xn.call(this))}):it={};const rn=Object.keys(He.iconDependencies);rn.length?Ae.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},(Tn,_n)=>{mt||(mt=Tn,$t=_n,xn.call(this))}):$t={};const Vt=Object.keys(He.patternDependencies);function xn(){if(mt)return Me(mt);if(it&&$t&&At){const Tn=new S(it),_n=new s.ImageAtlas($t,At);for(const bn in Ve){const tr=Ve[bn];tr instanceof s.SymbolBucket?(D(tr.layers,this.zoom,ye),s.performSymbolLayout(tr,it,Tn.positions,$t,_n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):tr.hasPattern&&(tr instanceof s.LineBucket||tr instanceof s.FillBucket||tr instanceof s.FillExtrusionBucket)&&(D(tr.layers,this.zoom,ye),tr.addFeatures(He,this.tileID.canonical,_n.patternPositions))}this.status="done",Me(null,{buckets:Object.values(Ve).filter(bn=>!bn.isEmpty()),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tn.image,imageAtlas:_n,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?$t:null,glyphPositions:this.returnDependencies?Tn.positions:null})}}Vt.length?Ae.send("getImages",{icons:Vt,source:this.source,tileID:this.tileID,type:"patterns"},(Tn,_n)=>{mt||(mt=Tn,At=_n,xn.call(this))}):At={},xn.call(this)}}function D(Ce,Z,Q){const ye=new s.EvaluationParameters(Z);for(const Ae of Ce)Ae.recalculate(ye,Q)}function J(Ce,Z){const Q=s.getArrayBuffer(Ce.request,(ye,Ae,Me,Ge)=>{ye?Z(ye):Ae&&Z(null,{vectorTile:new s.vectorTile.VectorTile(new s.pbf(Ae)),rawData:Ae,cacheControl:Me,expires:Ge})});return()=>{Q.cancel(),Z()}}class X{constructor(Z,Q,ye,Ae){this.actor=Z,this.layerIndex=Q,this.availableImages=ye,this.loadVectorData=Ae||J,this.loading={},this.loaded={}}loadTile(Z,Q){const ye=Z.uid;this.loading||(this.loading={});const Ae=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new s.RequestPerformance(Z.request),Me=this.loading[ye]=new I(Z);Me.abort=this.loadVectorData(Z,(Ge,Ne)=>{if(delete this.loading[ye],Ge||!Ne)return Me.status="done",this.loaded[ye]=Me,Q(Ge);const Ve=Ne.rawData,He={};Ne.expires&&(He.expires=Ne.expires),Ne.cacheControl&&(He.cacheControl=Ne.cacheControl);const st={};if(Ae){const mt=Ae.finish();mt&&(st.resourceTiming=JSON.parse(JSON.stringify(mt)))}Me.vectorTile=Ne.vectorTile,Me.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(mt,it)=>{if(mt||!it)return Q(mt);Q(null,s.extend({rawTileData:Ve.slice(0)},it,He,st))}),this.loaded=this.loaded||{},this.loaded[ye]=Me})}reloadTile(Z,Q){const ye=this.loaded,Ae=Z.uid,Me=this;if(ye&&ye[Ae]){const Ge=ye[Ae];Ge.showCollisionBoxes=Z.showCollisionBoxes;const Ne=(Ve,He)=>{const st=Ge.reloadCallback;st&&(delete Ge.reloadCallback,Ge.parse(Ge.vectorTile,Me.layerIndex,this.availableImages,Me.actor,st)),Q(Ve,He)};Ge.status==="parsing"?Ge.reloadCallback=Ne:Ge.status==="done"&&(Ge.vectorTile?Ge.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor,Ne):Ne())}}abortTile(Z,Q){const ye=this.loading,Ae=Z.uid;ye&&ye[Ae]&&ye[Ae].abort&&(ye[Ae].abort(),delete ye[Ae]),Q()}removeTile(Z,Q){const ye=this.loaded,Ae=Z.uid;ye&&ye[Ae]&&delete ye[Ae],Q()}}class G{constructor(){this.loaded={}}loadTile(Z,Q){const{uid:ye,encoding:Ae,rawImageData:Me}=Z,Ge=s.isImageBitmap(Me)?this.getImageData(Me):Me,Ne=new s.DEMData(ye,Ge,Ae);this.loaded=this.loaded||{},this.loaded[ye]=Ne,Q(null,Ne)}getImageData(Z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Z.width,Z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Z.width,this.offscreenCanvas.height=Z.height,this.offscreenCanvasContext.drawImage(Z,0,0,Z.width,Z.height);const Q=this.offscreenCanvasContext.getImageData(-1,-1,Z.width+2,Z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new s.RGBAImage({width:Q.width,height:Q.height},Q.data)}removeTile(Z){const Q=this.loaded,ye=Z.uid;Q&&Q[ye]&&delete Q[ye]}}var U=function Ce(Z,Q){var ye,Ae=Z&&Z.type;if(Ae==="FeatureCollection")for(ye=0;ye<Z.features.length;ye++)Ce(Z.features[ye],Q);else if(Ae==="GeometryCollection")for(ye=0;ye<Z.geometries.length;ye++)Ce(Z.geometries[ye],Q);else if(Ae==="Feature")Ce(Z.geometry,Q);else if(Ae==="Polygon")H(Z.coordinates,Q);else if(Ae==="MultiPolygon")for(ye=0;ye<Z.coordinates.length;ye++)H(Z.coordinates[ye],Q);return Z};function H(Ce,Z){if(Ce.length!==0){$(Ce[0],Z);for(var Q=1;Q<Ce.length;Q++)$(Ce[Q],!Z)}}function $(Ce,Z){for(var Q=0,ye=0,Ae=0,Me=Ce.length,Ge=Me-1;Ae<Me;Ge=Ae++){var Ne=(Ce[Ae][0]-Ce[Ge][0])*(Ce[Ge][1]+Ce[Ae][1]),Ve=Q+Ne;ye+=Math.abs(Q)>=Math.abs(Ne)?Q-Ve+Ne:Ne-Ve+Q,Q=Ve}Q+ye>=0!=!!Z&&Ce.reverse()}const ne=s.vectorTile.VectorTileFeature.prototype.toGeoJSON;class W{constructor(Z){this._feature=Z,this.extent=s.EXTENT,this.type=Z.type,this.properties=Z.tags,"id"in Z&&!isNaN(Z.id)&&(this.id=parseInt(Z.id,10))}loadGeometry(){if(this._feature.type===1){const Z=[];for(const Q of this._feature.geometry)Z.push([new s.pointGeometry(Q[0],Q[1])]);return Z}{const Z=[];for(const Q of this._feature.geometry){const ye=[];for(const Ae of Q)ye.push(new s.pointGeometry(Ae[0],Ae[1]));Z.push(ye)}return Z}}toGeoJSON(Z,Q,ye){return ne.call(this,Z,Q,ye)}}class F{constructor(Z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Z.length,this._features=Z}feature(Z){return new W(this._features[Z])}}var w={exports:{}},k=s.pointGeometry,B=s.vectorTile.VectorTileFeature,q=K;function K(Ce,Z){this.options=Z||{},this.features=Ce,this.length=Ce.length}function fe(Ce,Z){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=Z||4096}K.prototype.feature=function(Ce){return new fe(this.features[Ce],this.options.extent)},fe.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var Z=0;Z<Ce.length;Z++){for(var Q=Ce[Z],ye=[],Ae=0;Ae<Q.length;Ae++)ye.push(new k(Q[Ae][0],Q[Ae][1]));this.geometry.push(ye)}return this.geometry},fe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,Z=1/0,Q=-1/0,ye=1/0,Ae=-1/0,Me=0;Me<Ce.length;Me++)for(var Ge=Ce[Me],Ne=0;Ne<Ge.length;Ne++){var Ve=Ge[Ne];Z=Math.min(Z,Ve.x),Q=Math.max(Q,Ve.x),ye=Math.min(ye,Ve.y),Ae=Math.max(Ae,Ve.y)}return[Z,ye,Q,Ae]},fe.prototype.toGeoJSON=B.prototype.toGeoJSON;var ge=s.pbf,xe=q;function ee(Ce){var Z=new ge;return function(Q,ye){for(var Ae in Q.layers)ye.writeMessage(3,re,Q.layers[Ae])}(Ce,Z),Z.finish()}function re(Ce,Z){var Q;Z.writeVarintField(15,Ce.version||1),Z.writeStringField(1,Ce.name||""),Z.writeVarintField(5,Ce.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<Ce.length;Q++)ye.feature=Ce.feature(Q),Z.writeMessage(2,ie,ye);var Ae=ye.keys;for(Q=0;Q<Ae.length;Q++)Z.writeStringField(3,Ae[Q]);var Me=ye.values;for(Q=0;Q<Me.length;Q++)Z.writeMessage(4,ke,Me[Q])}function ie(Ce,Z){var Q=Ce.feature;Q.id!==void 0&&Z.writeVarintField(1,Q.id),Z.writeMessage(2,le,Ce),Z.writeVarintField(3,Q.type),Z.writeMessage(4,ce,Q)}function le(Ce,Z){var Q=Ce.feature,ye=Ce.keys,Ae=Ce.values,Me=Ce.keycache,Ge=Ce.valuecache;for(var Ne in Q.properties){var Ve=Q.properties[Ne],He=Me[Ne];if(Ve!==null){He===void 0&&(ye.push(Ne),Me[Ne]=He=ye.length-1),Z.writeVarint(He);var st=typeof Ve;st!=="string"&&st!=="boolean"&&st!=="number"&&(Ve=JSON.stringify(Ve));var mt=st+":"+Ve,it=Ge[mt];it===void 0&&(Ae.push(Ve),Ge[mt]=it=Ae.length-1),Z.writeVarint(it)}}}function _e(Ce,Z){return(Z<<3)+(7&Ce)}function Ie(Ce){return Ce<<1^Ce>>31}function ce(Ce,Z){for(var Q=Ce.loadGeometry(),ye=Ce.type,Ae=0,Me=0,Ge=Q.length,Ne=0;Ne<Ge;Ne++){var Ve=Q[Ne],He=1;ye===1&&(He=Ve.length),Z.writeVarint(_e(1,He));for(var st=ye===3?Ve.length-1:Ve.length,mt=0;mt<st;mt++){mt===1&&ye!==1&&Z.writeVarint(_e(2,st-1));var it=Ve[mt].x-Ae,$t=Ve[mt].y-Me;Z.writeVarint(Ie(it)),Z.writeVarint(Ie($t)),Ae+=it,Me+=$t}ye===3&&Z.writeVarint(_e(7,1))}}function ke(Ce,Z){var Q=typeof Ce;Q==="string"?Z.writeStringField(1,Ce):Q==="boolean"?Z.writeBooleanField(7,Ce):Q==="number"&&(Ce%1!=0?Z.writeDoubleField(3,Ce):Ce<0?Z.writeSVarintField(6,Ce):Z.writeVarintField(5,Ce))}w.exports=ee,w.exports.fromVectorTileJs=ee,w.exports.fromGeojsonVt=function(Ce,Z){Z=Z||{};var Q={};for(var ye in Ce)Q[ye]=new xe(Ce[ye].features,Z),Q[ye].name=ye,Q[ye].version=Z.version,Q[ye].extent=Z.extent;return ee({layers:Q})},w.exports.GeoJSONWrapper=xe;var Te=w.exports;function Pe(Ce,Z,Q,ye,Ae,Me){if(Ae-ye<=Q)return;const Ge=ye+Ae>>1;De(Ce,Z,Ge,ye,Ae,Me%2),Pe(Ce,Z,Q,ye,Ge-1,Me+1),Pe(Ce,Z,Q,Ge+1,Ae,Me+1)}function De(Ce,Z,Q,ye,Ae,Me){for(;Ae>ye;){if(Ae-ye>600){const He=Ae-ye+1,st=Q-ye+1,mt=Math.log(He),it=.5*Math.exp(2*mt/3),$t=.5*Math.sqrt(mt*it*(He-it)/He)*(st-He/2<0?-1:1);De(Ce,Z,Q,Math.max(ye,Math.floor(Q-st*it/He+$t)),Math.min(Ae,Math.floor(Q+(He-st)*it/He+$t)),Me)}const Ge=Z[2*Q+Me];let Ne=ye,Ve=Ae;for(Ue(Ce,Z,ye,Q),Z[2*Ae+Me]>Ge&&Ue(Ce,Z,ye,Ae);Ne<Ve;){for(Ue(Ce,Z,Ne,Ve),Ne++,Ve--;Z[2*Ne+Me]<Ge;)Ne++;for(;Z[2*Ve+Me]>Ge;)Ve--}Z[2*ye+Me]===Ge?Ue(Ce,Z,ye,Ve):(Ve++,Ue(Ce,Z,Ve,Ae)),Ve<=Q&&(ye=Ve+1),Q<=Ve&&(Ae=Ve-1)}}function Ue(Ce,Z,Q,ye){qe(Ce,Q,ye),qe(Z,2*Q,2*ye),qe(Z,2*Q+1,2*ye+1)}function qe(Ce,Z,Q){const ye=Ce[Z];Ce[Z]=Ce[Q],Ce[Q]=ye}function ot(Ce,Z,Q,ye){const Ae=Ce-Q,Me=Z-ye;return Ae*Ae+Me*Me}const dt=Ce=>Ce[0],Pt=Ce=>Ce[1];class ht{constructor(Z,Q=dt,ye=Pt,Ae=64,Me=Float64Array){this.nodeSize=Ae,this.points=Z;const Ge=Z.length<65536?Uint16Array:Uint32Array,Ne=this.ids=new Ge(Z.length),Ve=this.coords=new Me(2*Z.length);for(let He=0;He<Z.length;He++)Ne[He]=He,Ve[2*He]=Q(Z[He]),Ve[2*He+1]=ye(Z[He]);Pe(Ne,Ve,Ae,0,Ne.length-1,0)}range(Z,Q,ye,Ae){return function(Me,Ge,Ne,Ve,He,st,mt){const it=[0,Me.length-1,0],$t=[];let At,Ut;for(;it.length;){const rn=it.pop(),Vt=it.pop(),xn=it.pop();if(Vt-xn<=mt){for(let bn=xn;bn<=Vt;bn++)At=Ge[2*bn],Ut=Ge[2*bn+1],At>=Ne&&At<=He&&Ut>=Ve&&Ut<=st&&$t.push(Me[bn]);continue}const Tn=Math.floor((xn+Vt)/2);At=Ge[2*Tn],Ut=Ge[2*Tn+1],At>=Ne&&At<=He&&Ut>=Ve&&Ut<=st&&$t.push(Me[Tn]);const _n=(rn+1)%2;(rn===0?Ne<=At:Ve<=Ut)&&(it.push(xn),it.push(Tn-1),it.push(_n)),(rn===0?He>=At:st>=Ut)&&(it.push(Tn+1),it.push(Vt),it.push(_n))}return $t}(this.ids,this.coords,Z,Q,ye,Ae,this.nodeSize)}within(Z,Q,ye){return function(Ae,Me,Ge,Ne,Ve,He){const st=[0,Ae.length-1,0],mt=[],it=Ve*Ve;for(;st.length;){const $t=st.pop(),At=st.pop(),Ut=st.pop();if(At-Ut<=He){for(let _n=Ut;_n<=At;_n++)ot(Me[2*_n],Me[2*_n+1],Ge,Ne)<=it&&mt.push(Ae[_n]);continue}const rn=Math.floor((Ut+At)/2),Vt=Me[2*rn],xn=Me[2*rn+1];ot(Vt,xn,Ge,Ne)<=it&&mt.push(Ae[rn]);const Tn=($t+1)%2;($t===0?Ge-Ve<=Vt:Ne-Ve<=xn)&&(st.push(Ut),st.push(rn-1),st.push(Tn)),($t===0?Ge+Ve>=Vt:Ne+Ve>=xn)&&(st.push(rn+1),st.push(At),st.push(Tn))}return mt}(this.ids,this.coords,Z,Q,ye,this.nodeSize)}}const Et={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},Nt=Math.fround||(Bt=new Float32Array(1),Ce=>(Bt[0]=+Ce,Bt[0]));var Bt;class cn{constructor(Z){this.options=pe(Object.create(Et),Z),this.trees=new Array(this.options.maxZoom+1)}load(Z){const{log:Q,minZoom:ye,maxZoom:Ae,nodeSize:Me}=this.options;Q&&console.time("total time");const Ge=`prepare ${Z.length} points`;Q&&console.time(Ge),this.points=Z;let Ne=[];for(let Ve=0;Ve<Z.length;Ve++)Z[Ve].geometry&&Ne.push(wn(Z[Ve],Ve));this.trees[Ae+1]=new ht(Ne,Le,Ke,Me,Float32Array),Q&&console.timeEnd(Ge);for(let Ve=Ae;Ve>=ye;Ve--){const He=+Date.now();Ne=this._cluster(Ne,Ve),this.trees[Ve]=new ht(Ne,Le,Ke,Me,Float32Array),Q&&console.log("z%d: %d clusters in %dms",Ve,Ne.length,+Date.now()-He)}return Q&&console.timeEnd("total time"),this}getClusters(Z,Q){let ye=((Z[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,Z[1]));let Me=Z[2]===180?180:((Z[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)ye=-180,Me=180;else if(ye>Me){const st=this.getClusters([ye,Ae,180,Ge],Q),mt=this.getClusters([-180,Ae,Me,Ge],Q);return st.concat(mt)}const Ne=this.trees[this._limitZoom(Q)],Ve=Ne.range(we(ye),R(Ge),we(Me),R(Ae)),He=[];for(const st of Ve){const mt=Ne.points[st];He.push(mt.numPoints?on(mt):this.points[mt.index])}return He}getChildren(Z){const Q=this._getOriginId(Z),ye=this._getOriginZoom(Z),Ae="No cluster with the specified id.",Me=this.trees[ye];if(!Me)throw new Error(Ae);const Ge=Me.points[Q];if(!Ge)throw new Error(Ae);const Ne=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ve=Me.within(Ge.x,Ge.y,Ne),He=[];for(const st of Ve){const mt=Me.points[st];mt.parentId===Z&&He.push(mt.numPoints?on(mt):this.points[mt.index])}if(He.length===0)throw new Error(Ae);return He}getLeaves(Z,Q,ye){const Ae=[];return this._appendLeaves(Ae,Z,Q=Q||10,ye=ye||0,0),Ae}getTile(Z,Q,ye){const Ae=this.trees[this._limitZoom(Z)],Me=Math.pow(2,Z),{extent:Ge,radius:Ne}=this.options,Ve=Ne/Ge,He=(ye-Ve)/Me,st=(ye+1+Ve)/Me,mt={features:[]};return this._addTileFeatures(Ae.range((Q-Ve)/Me,He,(Q+1+Ve)/Me,st),Ae.points,Q,ye,Me,mt),Q===0&&this._addTileFeatures(Ae.range(1-Ve/Me,He,1,st),Ae.points,Me,ye,Me,mt),Q===Me-1&&this._addTileFeatures(Ae.range(0,He,Ve/Me,st),Ae.points,-1,ye,Me,mt),mt.features.length?mt:null}getClusterExpansionZoom(Z){let Q=this._getOriginZoom(Z)-1;for(;Q<=this.options.maxZoom;){const ye=this.getChildren(Z);if(Q++,ye.length!==1)break;Z=ye[0].properties.cluster_id}return Q}_appendLeaves(Z,Q,ye,Ae,Me){const Ge=this.getChildren(Q);for(const Ne of Ge){const Ve=Ne.properties;if(Ve&&Ve.cluster?Me+Ve.point_count<=Ae?Me+=Ve.point_count:Me=this._appendLeaves(Z,Ve.cluster_id,ye,Ae,Me):Me<Ae?Me++:Z.push(Ne),Z.length===ye)break}return Me}_addTileFeatures(Z,Q,ye,Ae,Me,Ge){for(const Ne of Z){const Ve=Q[Ne],He=Ve.numPoints;let st,mt,it;if(He)st=En(Ve),mt=Ve.x,it=Ve.y;else{const Ut=this.points[Ve.index];st=Ut.properties,mt=we(Ut.geometry.coordinates[0]),it=R(Ut.geometry.coordinates[1])}const $t={type:1,geometry:[[Math.round(this.options.extent*(mt*Me-ye)),Math.round(this.options.extent*(it*Me-Ae))]],tags:st};let At;He?At=Ve.id:this.options.generateId?At=Ve.index:this.points[Ve.index].id&&(At=this.points[Ve.index].id),At!==void 0&&($t.id=At),Ge.features.push($t)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(+Z,this.options.maxZoom+1))}_cluster(Z,Q){const ye=[],{radius:Ae,extent:Me,reduce:Ge,minPoints:Ne}=this.options,Ve=Ae/(Me*Math.pow(2,Q));for(let He=0;He<Z.length;He++){const st=Z[He];if(st.zoom<=Q)continue;st.zoom=Q;const mt=this.trees[Q+1],it=mt.within(st.x,st.y,Ve),$t=st.numPoints||1;let At=$t;for(const Ut of it){const rn=mt.points[Ut];rn.zoom>Q&&(At+=rn.numPoints||1)}if(At>$t&&At>=Ne){let Ut=st.x*$t,rn=st.y*$t,Vt=Ge&&$t>1?this._map(st,!0):null;const xn=(He<<5)+(Q+1)+this.points.length;for(const Tn of it){const _n=mt.points[Tn];if(_n.zoom<=Q)continue;_n.zoom=Q;const bn=_n.numPoints||1;Ut+=_n.x*bn,rn+=_n.y*bn,_n.parentId=xn,Ge&&(Vt||(Vt=this._map(st,!0)),Ge(Vt,this._map(_n)))}st.parentId=xn,ye.push(An(Ut/At,rn/At,xn,At,Vt))}else if(ye.push(st),At>1)for(const Ut of it){const rn=mt.points[Ut];rn.zoom<=Q||(rn.zoom=Q,ye.push(rn))}}return ye}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,Q){if(Z.numPoints)return Q?pe({},Z.properties):Z.properties;const ye=this.points[Z.index].properties,Ae=this.options.map(ye);return Q&&Ae===ye?pe({},Ae):Ae}}function An(Ce,Z,Q,ye,Ae){return{x:Nt(Ce),y:Nt(Z),zoom:1/0,id:Q,parentId:-1,numPoints:ye,properties:Ae}}function wn(Ce,Z){const[Q,ye]=Ce.geometry.coordinates;return{x:Nt(we(Q)),y:Nt(R(ye)),zoom:1/0,index:Z,parentId:-1}}function on(Ce){return{type:"Feature",id:Ce.id,properties:En(Ce),geometry:{type:"Point",coordinates:[(Z=Ce.x,360*(Z-.5)),O(Ce.y)]}};var Z}function En(Ce){const Z=Ce.numPoints,Q=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z;return pe(pe({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:Z,point_count_abbreviated:Q})}function we(Ce){return Ce/360+.5}function R(Ce){const Z=Math.sin(Ce*Math.PI/180),Q=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return Q<0?0:Q>1?1:Q}function O(Ce){const Z=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function pe(Ce,Z){for(const Q in Z)Ce[Q]=Z[Q];return Ce}function Le(Ce){return Ce.x}function Ke(Ce){return Ce.y}function at(Ce,Z,Q,ye){for(var Ae,Me=ye,Ge=Q-Z>>1,Ne=Q-Z,Ve=Ce[Z],He=Ce[Z+1],st=Ce[Q],mt=Ce[Q+1],it=Z+3;it<Q;it+=3){var $t=se(Ce[it],Ce[it+1],Ve,He,st,mt);if($t>Me)Ae=it,Me=$t;else if($t===Me){var At=Math.abs(it-Ge);At<Ne&&(Ae=it,Ne=At)}}Me>ye&&(Ae-Z>3&&at(Ce,Z,Ae,ye),Ce[Ae+2]=Me,Q-Ae>3&&at(Ce,Ae,Q,ye))}function se(Ce,Z,Q,ye,Ae,Me){var Ge=Ae-Q,Ne=Me-ye;if(Ge!==0||Ne!==0){var Ve=((Ce-Q)*Ge+(Z-ye)*Ne)/(Ge*Ge+Ne*Ne);Ve>1?(Q=Ae,ye=Me):Ve>0&&(Q+=Ge*Ve,ye+=Ne*Ve)}return(Ge=Ce-Q)*Ge+(Ne=Z-ye)*Ne}function T(Ce,Z,Q,ye){var Ae={id:Ce===void 0?null:Ce,type:Z,geometry:Q,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Me){var Ge=Me.geometry,Ne=Me.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")z(Me,Ge);else if(Ne==="Polygon"||Ne==="MultiLineString")for(var Ve=0;Ve<Ge.length;Ve++)z(Me,Ge[Ve]);else if(Ne==="MultiPolygon")for(Ve=0;Ve<Ge.length;Ve++)for(var He=0;He<Ge[Ve].length;He++)z(Me,Ge[Ve][He])}(Ae),Ae}function z(Ce,Z){for(var Q=0;Q<Z.length;Q+=3)Ce.minX=Math.min(Ce.minX,Z[Q]),Ce.minY=Math.min(Ce.minY,Z[Q+1]),Ce.maxX=Math.max(Ce.maxX,Z[Q]),Ce.maxY=Math.max(Ce.maxY,Z[Q+1])}function be(Ce,Z,Q,ye){if(Z.geometry){var Ae=Z.geometry.coordinates,Me=Z.geometry.type,Ge=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),Ne=[],Ve=Z.id;if(Q.promoteId?Ve=Z.properties[Q.promoteId]:Q.generateId&&(Ve=ye||0),Me==="Point")je(Ae,Ne);else if(Me==="MultiPoint")for(var He=0;He<Ae.length;He++)je(Ae[He],Ne);else if(Me==="LineString")Xe(Ae,Ne,Ge,!1);else if(Me==="MultiLineString"){if(Q.lineMetrics){for(He=0;He<Ae.length;He++)Xe(Ae[He],Ne=[],Ge,!1),Ce.push(T(Ve,"LineString",Ne,Z.properties));return}Qe(Ae,Ne,Ge,!1)}else if(Me==="Polygon")Qe(Ae,Ne,Ge,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(He=0;He<Z.geometry.geometries.length;He++)be(Ce,{id:Ve,geometry:Z.geometry.geometries[He],properties:Z.properties},Q,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(He=0;He<Ae.length;He++){var st=[];Qe(Ae[He],st,Ge,!0),Ne.push(st)}}Ce.push(T(Ve,Me,Ne,Z.properties))}}function je(Ce,Z){Z.push(Ht(Ce[0])),Z.push(Cn(Ce[1])),Z.push(0)}function Xe(Ce,Z,Q,ye){for(var Ae,Me,Ge=0,Ne=0;Ne<Ce.length;Ne++){var Ve=Ht(Ce[Ne][0]),He=Cn(Ce[Ne][1]);Z.push(Ve),Z.push(He),Z.push(0),Ne>0&&(Ge+=ye?(Ae*He-Ve*Me)/2:Math.sqrt(Math.pow(Ve-Ae,2)+Math.pow(He-Me,2))),Ae=Ve,Me=He}var st=Z.length-3;Z[2]=1,at(Z,0,st,Q),Z[st+2]=1,Z.size=Math.abs(Ge),Z.start=0,Z.end=Z.size}function Qe(Ce,Z,Q,ye){for(var Ae=0;Ae<Ce.length;Ae++){var Me=[];Xe(Ce[Ae],Me,Q,ye),Z.push(Me)}}function Ht(Ce){return Ce/360+.5}function Cn(Ce){var Z=Math.sin(Ce*Math.PI/180),Q=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return Q<0?0:Q>1?1:Q}function fn(Ce,Z,Q,ye,Ae,Me,Ge,Ne){if(ye/=Z,Me>=(Q/=Z)&&Ge<ye)return Ce;if(Ge<Q||Me>=ye)return null;for(var Ve=[],He=0;He<Ce.length;He++){var st=Ce[He],mt=st.geometry,it=st.type,$t=Ae===0?st.minX:st.minY,At=Ae===0?st.maxX:st.maxY;if($t>=Q&&At<ye)Ve.push(st);else if(!(At<Q||$t>=ye)){var Ut=[];if(it==="Point"||it==="MultiPoint")ft(mt,Ut,Q,ye,Ae);else if(it==="LineString")Mt(mt,Ut,Q,ye,Ae,!1,Ne.lineMetrics);else if(it==="MultiLineString")Ar(mt,Ut,Q,ye,Ae,!1);else if(it==="Polygon")Ar(mt,Ut,Q,ye,Ae,!0);else if(it==="MultiPolygon")for(var rn=0;rn<mt.length;rn++){var Vt=[];Ar(mt[rn],Vt,Q,ye,Ae,!0),Vt.length&&Ut.push(Vt)}if(Ut.length){if(Ne.lineMetrics&&it==="LineString"){for(rn=0;rn<Ut.length;rn++)Ve.push(T(st.id,it,Ut[rn],st.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Ut.length===1?(it="LineString",Ut=Ut[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Ut.length===3?"Point":"MultiPoint"),Ve.push(T(st.id,it,Ut,st.tags))}}}return Ve.length?Ve:null}function ft(Ce,Z,Q,ye,Ae){for(var Me=0;Me<Ce.length;Me+=3){var Ge=Ce[Me+Ae];Ge>=Q&&Ge<=ye&&(Z.push(Ce[Me]),Z.push(Ce[Me+1]),Z.push(Ce[Me+2]))}}function Mt(Ce,Z,Q,ye,Ae,Me,Ge){for(var Ne,Ve,He=un(Ce),st=Ae===0?hn:nr,mt=Ce.start,it=0;it<Ce.length-3;it+=3){var $t=Ce[it],At=Ce[it+1],Ut=Ce[it+2],rn=Ce[it+3],Vt=Ce[it+4],xn=Ae===0?$t:At,Tn=Ae===0?rn:Vt,_n=!1;Ge&&(Ne=Math.sqrt(Math.pow($t-rn,2)+Math.pow(At-Vt,2))),xn<Q?Tn>Q&&(Ve=st(He,$t,At,rn,Vt,Q),Ge&&(He.start=mt+Ne*Ve)):xn>ye?Tn<ye&&(Ve=st(He,$t,At,rn,Vt,ye),Ge&&(He.start=mt+Ne*Ve)):Yr(He,$t,At,Ut),Tn<Q&&xn>=Q&&(Ve=st(He,$t,At,rn,Vt,Q),_n=!0),Tn>ye&&xn<=ye&&(Ve=st(He,$t,At,rn,Vt,ye),_n=!0),!Me&&_n&&(Ge&&(He.end=mt+Ne*Ve),Z.push(He),He=un(Ce)),Ge&&(mt+=Ne)}var bn=Ce.length-3;$t=Ce[bn],At=Ce[bn+1],Ut=Ce[bn+2],(xn=Ae===0?$t:At)>=Q&&xn<=ye&&Yr(He,$t,At,Ut),bn=He.length-3,Me&&bn>=3&&(He[bn]!==He[0]||He[bn+1]!==He[1])&&Yr(He,He[0],He[1],He[2]),He.length&&Z.push(He)}function un(Ce){var Z=[];return Z.size=Ce.size,Z.start=Ce.start,Z.end=Ce.end,Z}function Ar(Ce,Z,Q,ye,Ae,Me){for(var Ge=0;Ge<Ce.length;Ge++)Mt(Ce[Ge],Z,Q,ye,Ae,Me,!1)}function Yr(Ce,Z,Q,ye){Ce.push(Z),Ce.push(Q),Ce.push(ye)}function hn(Ce,Z,Q,ye,Ae,Me){var Ge=(Me-Z)/(ye-Z);return Ce.push(Me),Ce.push(Q+(Ae-Q)*Ge),Ce.push(1),Ge}function nr(Ce,Z,Q,ye,Ae,Me){var Ge=(Me-Q)/(Ae-Q);return Ce.push(Z+(ye-Z)*Ge),Ce.push(Me),Ce.push(1),Ge}function gi(Ce,Z){for(var Q=[],ye=0;ye<Ce.length;ye++){var Ae,Me=Ce[ye],Ge=Me.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")Ae=vr(Me.geometry,Z);else if(Ge==="MultiLineString"||Ge==="Polygon"){Ae=[];for(var Ne=0;Ne<Me.geometry.length;Ne++)Ae.push(vr(Me.geometry[Ne],Z))}else if(Ge==="MultiPolygon")for(Ae=[],Ne=0;Ne<Me.geometry.length;Ne++){for(var Ve=[],He=0;He<Me.geometry[Ne].length;He++)Ve.push(vr(Me.geometry[Ne][He],Z));Ae.push(Ve)}Q.push(T(Me.id,Ge,Ae,Me.tags))}return Q}function vr(Ce,Z){var Q=[];Q.size=Ce.size,Ce.start!==void 0&&(Q.start=Ce.start,Q.end=Ce.end);for(var ye=0;ye<Ce.length;ye+=3)Q.push(Ce[ye]+Z,Ce[ye+1],Ce[ye+2]);return Q}function Nr(Ce,Z){if(Ce.transformed)return Ce;var Q,ye,Ae,Me=1<<Ce.z,Ge=Ce.x,Ne=Ce.y;for(Q=0;Q<Ce.features.length;Q++){var Ve=Ce.features[Q],He=Ve.geometry,st=Ve.type;if(Ve.geometry=[],st===1)for(ye=0;ye<He.length;ye+=2)Ve.geometry.push(Wt(He[ye],He[ye+1],Z,Me,Ge,Ne));else for(ye=0;ye<He.length;ye++){var mt=[];for(Ae=0;Ae<He[ye].length;Ae+=2)mt.push(Wt(He[ye][Ae],He[ye][Ae+1],Z,Me,Ge,Ne));Ve.geometry.push(mt)}}return Ce.transformed=!0,Ce}function Wt(Ce,Z,Q,ye,Ae,Me){return[Math.round(Q*(Ce*ye-Ae)),Math.round(Q*(Z*ye-Me))]}function Gt(Ce,Z,Q,ye,Ae){for(var Me=Z===Ae.maxZoom?0:Ae.tolerance/((1<<Z)*Ae.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:ye,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ne=0;Ne<Ce.length;Ne++){Ge.numFeatures++,Zt(Ge,Ce[Ne],Me,Ae);var Ve=Ce[Ne].minX,He=Ce[Ne].minY,st=Ce[Ne].maxX,mt=Ce[Ne].maxY;Ve<Ge.minX&&(Ge.minX=Ve),He<Ge.minY&&(Ge.minY=He),st>Ge.maxX&&(Ge.maxX=st),mt>Ge.maxY&&(Ge.maxY=mt)}return Ge}function Zt(Ce,Z,Q,ye){var Ae=Z.geometry,Me=Z.type,Ge=[];if(Me==="Point"||Me==="MultiPoint")for(var Ne=0;Ne<Ae.length;Ne+=3)Ge.push(Ae[Ne]),Ge.push(Ae[Ne+1]),Ce.numPoints++,Ce.numSimplified++;else if(Me==="LineString")In(Ge,Ae,Ce,Q,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(Ne=0;Ne<Ae.length;Ne++)In(Ge,Ae[Ne],Ce,Q,Me==="Polygon",Ne===0);else if(Me==="MultiPolygon")for(var Ve=0;Ve<Ae.length;Ve++){var He=Ae[Ve];for(Ne=0;Ne<He.length;Ne++)In(Ge,He[Ne],Ce,Q,!0,Ne===0)}if(Ge.length){var st=Z.tags||null;if(Me==="LineString"&&ye.lineMetrics){for(var mt in st={},Z.tags)st[mt]=Z.tags[mt];st.mapbox_clip_start=Ae.start/Ae.size,st.mapbox_clip_end=Ae.end/Ae.size}var it={geometry:Ge,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:st};Z.id!==null&&(it.id=Z.id),Ce.features.push(it)}}function In(Ce,Z,Q,ye,Ae,Me){var Ge=ye*ye;if(ye>0&&Z.size<(Ae?Ge:ye))Q.numPoints+=Z.length/3;else{for(var Ne=[],Ve=0;Ve<Z.length;Ve+=3)(ye===0||Z[Ve+2]>Ge)&&(Q.numSimplified++,Ne.push(Z[Ve]),Ne.push(Z[Ve+1])),Q.numPoints++;Ae&&function(He,st){for(var mt=0,it=0,$t=He.length,At=$t-2;it<$t;At=it,it+=2)mt+=(He[it]-He[At])*(He[it+1]+He[At+1]);if(mt>0===st)for(it=0,$t=He.length;it<$t/2;it+=2){var Ut=He[it],rn=He[it+1];He[it]=He[$t-2-it],He[it+1]=He[$t-1-it],He[$t-2-it]=Ut,He[$t-1-it]=rn}}(Ne,Me),Ce.push(Ne)}}function Ln(Ce,Z){var Q=(Z=this.options=function(Ae,Me){for(var Ge in Me)Ae[Ge]=Me[Ge];return Ae}(Object.create(this.options),Z)).debug;if(Q&&console.time("preprocess data"),Z.maxZoom<0||Z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Z.promoteId&&Z.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Ae,Me){var Ge=[];if(Ae.type==="FeatureCollection")for(var Ne=0;Ne<Ae.features.length;Ne++)be(Ge,Ae.features[Ne],Me,Ne);else be(Ge,Ae.type==="Feature"?Ae:{geometry:Ae},Me);return Ge}(Ce,Z);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Z.indexMaxZoom,Z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Ae,Me){var Ge=Me.buffer/Me.extent,Ne=Ae,Ve=fn(Ae,1,-1-Ge,Ge,0,-1,2,Me),He=fn(Ae,1,1-Ge,2+Ge,0,-1,2,Me);return(Ve||He)&&(Ne=fn(Ae,1,-Ge,1+Ge,0,-1,2,Me)||[],Ve&&(Ne=gi(Ve,1).concat(Ne)),He&&(Ne=Ne.concat(gi(He,-1)))),Ne}(ye,Z),ye.length&&this.splitTile(ye,0,0,0),Q&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function rr(Ce,Z,Q){return 32*((1<<Ce)*Q+Z)+Ce}function Ur(Ce,Z){const Q=Ce.tileID.canonical;if(!this._geoJSONIndex)return Z(null,null);const ye=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!ye)return Z(null,null);const Ae=new F(ye.features);let Me=Te(Ae);Me.byteOffset===0&&Me.byteLength===Me.buffer.byteLength||(Me=new Uint8Array(Me)),Z(null,{vectorTile:Ae,rawData:Me.buffer})}Ln.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ln.prototype.splitTile=function(Ce,Z,Q,ye,Ae,Me,Ge){for(var Ne=[Ce,Z,Q,ye],Ve=this.options,He=Ve.debug;Ne.length;){ye=Ne.pop(),Q=Ne.pop(),Z=Ne.pop(),Ce=Ne.pop();var st=1<<Z,mt=rr(Z,Q,ye),it=this.tiles[mt];if(!it&&(He>1&&console.time("creation"),it=this.tiles[mt]=Gt(Ce,Z,Q,ye,Ve),this.tileCoords.push({z:Z,x:Q,y:ye}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Z,Q,ye,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));var $t="z"+Z;this.stats[$t]=(this.stats[$t]||0)+1,this.total++}if(it.source=Ce,Ae){if(Z===Ve.maxZoom||Z===Ae)continue;var At=1<<Ae-Z;if(Q!==Math.floor(Me/At)||ye!==Math.floor(Ge/At))continue}else if(Z===Ve.indexMaxZoom||it.numPoints<=Ve.indexMaxPoints)continue;if(it.source=null,Ce.length!==0){He>1&&console.time("clipping");var Ut,rn,Vt,xn,Tn,_n,bn=.5*Ve.buffer/Ve.extent,tr=.5-bn,fr=.5+bn,Jn=1+bn;Ut=rn=Vt=xn=null,Tn=fn(Ce,st,Q-bn,Q+fr,0,it.minX,it.maxX,Ve),_n=fn(Ce,st,Q+tr,Q+Jn,0,it.minX,it.maxX,Ve),Ce=null,Tn&&(Ut=fn(Tn,st,ye-bn,ye+fr,1,it.minY,it.maxY,Ve),rn=fn(Tn,st,ye+tr,ye+Jn,1,it.minY,it.maxY,Ve),Tn=null),_n&&(Vt=fn(_n,st,ye-bn,ye+fr,1,it.minY,it.maxY,Ve),xn=fn(_n,st,ye+tr,ye+Jn,1,it.minY,it.maxY,Ve),_n=null),He>1&&console.timeEnd("clipping"),Ne.push(Ut||[],Z+1,2*Q,2*ye),Ne.push(rn||[],Z+1,2*Q,2*ye+1),Ne.push(Vt||[],Z+1,2*Q+1,2*ye),Ne.push(xn||[],Z+1,2*Q+1,2*ye+1)}}},Ln.prototype.getTile=function(Ce,Z,Q){var ye=this.options,Ae=ye.extent,Me=ye.debug;if(Ce<0||Ce>24)return null;var Ge=1<<Ce,Ne=rr(Ce,Z=(Z%Ge+Ge)%Ge,Q);if(this.tiles[Ne])return Nr(this.tiles[Ne],Ae);Me>1&&console.log("drilling down to z%d-%d-%d",Ce,Z,Q);for(var Ve,He=Ce,st=Z,mt=Q;!Ve&&He>0;)He--,st=Math.floor(st/2),mt=Math.floor(mt/2),Ve=this.tiles[rr(He,st,mt)];return Ve&&Ve.source?(Me>1&&console.log("found parent tile z%d-%d-%d",He,st,mt),Me>1&&console.time("drilling down"),this.splitTile(Ve.source,He,st,mt,Ce,Z,Q),Me>1&&console.timeEnd("drilling down"),this.tiles[Ne]?Nr(this.tiles[Ne],Ae):null):null};class ai extends X{constructor(Z,Q,ye,Ae){super(Z,Q,ye,Ur),Ae&&(this.loadGeoJSON=Ae)}loadData(Z,Q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Q,this._pendingLoadDataParams=Z,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const Z=this._pendingCallback,Q=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const ye=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new s.RequestPerformance(Q.request);this.loadGeoJSON(Q,(Ae,Me)=>{if(Ae||!Me)return Z(Ae);if(typeof Me!="object")return Z(new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`));{U(Me,!0);try{if(Q.filter){const Ne=s.createExpression(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(He=>`${He.key}: ${He.message}`).join(", "));const Ve=Me.features.filter(He=>Ne.value.evaluate({zoom:0},He));Me={type:"FeatureCollection",features:Ve}}this._geoJSONIndex=Q.cluster?new cn(function({superclusterOptions:Ne,clusterProperties:Ve}){if(!Ve||!Ne)return Ne;const He={},st={},mt={accumulated:null,zoom:0},it={properties:null},$t=Object.keys(Ve);for(const At of $t){const[Ut,rn]=Ve[At],Vt=s.createExpression(rn),xn=s.createExpression(typeof Ut=="string"?[Ut,["accumulated"],["get",At]]:Ut);He[At]=Vt.value,st[At]=xn.value}return Ne.map=At=>{it.properties=At;const Ut={};for(const rn of $t)Ut[rn]=He[rn].evaluate(mt,it);return Ut},Ne.reduce=(At,Ut)=>{it.properties=Ut;for(const rn of $t)mt.accumulated=At[rn],At[rn]=st[rn].evaluate(mt,it)},Ne}(Q)).load(Me.features):function(Ne,Ve){return new Ln(Ne,Ve)}(Me,Q.geojsonVtOptions)}catch(Ne){return Z(Ne)}this.loaded={};const Ge={};if(ye){const Ne=ye.finish();Ne&&(Ge.resourceTiming={},Ge.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Ne)))}Z(null,Ge)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(Z,Q){const ye=this.loaded;return ye&&ye[Z.uid]?super.reloadTile(Z,Q):this.loadTile(Z,Q)}loadGeoJSON(Z,Q){if(Z.request)s.getJSON(Z.request,Q);else{if(typeof Z.data!="string")return Q(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`));try{return Q(null,JSON.parse(Z.data))}catch{return Q(new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`))}}}removeSource(Z,Q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Q()}getClusterExpansionZoom(Z,Q){try{Q(null,this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId))}catch(ye){Q(ye)}}getClusterChildren(Z,Q){try{Q(null,this._geoJSONIndex.getChildren(Z.clusterId))}catch(ye){Q(ye)}}getClusterLeaves(Z,Q){try{Q(null,this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset))}catch(ye){Q(ye)}}}class da{constructor(Z){this.self=Z,this.actor=new s.Actor(Z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:X,geojson:ai},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Q,ye)=>{if(this.workerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.workerSourceTypes[Q]=ye},this.self.registerRTLTextPlugin=Q=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Q.applyArabicShaping,s.plugin.processBidirectionalText=Q.processBidirectionalText,s.plugin.processStyledBidirectionalText=Q.processStyledBidirectionalText}}setReferrer(Z,Q){this.referrer=Q}setImages(Z,Q,ye){this.availableImages[Z]=Q;for(const Ae in this.workerSources[Z]){const Me=this.workerSources[Z][Ae];for(const Ge in Me)Me[Ge].availableImages=Q}ye()}setLayers(Z,Q,ye){this.getLayerIndex(Z).replace(Q),ye()}updateLayers(Z,Q,ye){this.getLayerIndex(Z).update(Q.layers,Q.removedIds),ye()}loadTile(Z,Q,ye){this.getWorkerSource(Z,Q.type,Q.source).loadTile(Q,ye)}loadDEMTile(Z,Q,ye){this.getDEMWorkerSource(Z,Q.source).loadTile(Q,ye)}reloadTile(Z,Q,ye){this.getWorkerSource(Z,Q.type,Q.source).reloadTile(Q,ye)}abortTile(Z,Q,ye){this.getWorkerSource(Z,Q.type,Q.source).abortTile(Q,ye)}removeTile(Z,Q,ye){this.getWorkerSource(Z,Q.type,Q.source).removeTile(Q,ye)}removeDEMTile(Z,Q){this.getDEMWorkerSource(Z,Q.source).removeTile(Q)}removeSource(Z,Q,ye){if(!this.workerSources[Z]||!this.workerSources[Z][Q.type]||!this.workerSources[Z][Q.type][Q.source])return;const Ae=this.workerSources[Z][Q.type][Q.source];delete this.workerSources[Z][Q.type][Q.source],Ae.removeSource!==void 0?Ae.removeSource(Q,ye):ye()}loadWorkerSource(Z,Q,ye){try{this.self.importScripts(Q.url),ye()}catch(Ae){ye(Ae.toString())}}syncRTLPluginState(Z,Q,ye){try{s.plugin.setState(Q);const Ae=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);const Me=s.plugin.isParsed();ye(Me?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),Me)}}catch(Ae){ye(Ae.toString())}}getAvailableImages(Z){let Q=this.availableImages[Z];return Q||(Q=[]),Q}getLayerIndex(Z){let Q=this.layerIndexes[Z];return Q||(Q=this.layerIndexes[Z]=new C),Q}getWorkerSource(Z,Q,ye){if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][Q]||(this.workerSources[Z][Q]={}),!this.workerSources[Z][Q][ye]){const Ae={send:(Me,Ge,Ne)=>{this.actor.send(Me,Ge,Ne,Z)}};this.workerSources[Z][Q][ye]=new this.workerSourceTypes[Q](Ae,this.getLayerIndex(Z),this.getAvailableImages(Z))}return this.workerSources[Z][Q][ye]}getDEMWorkerSource(Z,Q){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][Q]||(this.demWorkerSources[Z][Q]=new G),this.demWorkerSources[Z][Q]}enforceCacheSizeLimit(Z,Q){s.enforceCacheSizeLimit(Q)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new da(self)),da}),f(["./shared"],function(s){var _=E;function E(m){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var d,y,b=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(b);try{y=new Worker(P),d=!0}catch{d=!1}return y&&y.terminate(),URL.revokeObjectURL(P),d}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var d=document.createElement("canvas");d.width=d.height=1;var y=d.getContext("2d");if(!y)return!1;var b=y.getImageData(0,0,1,1);return b&&b.width===d.width}()?(C[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(C[u]=function(d){var y,b=function(P){var L=document.createElement("canvas"),j=Object.create(E.webGLContextAttributes);return j.failIfMajorPerformanceCaveat=P,L.getContext("webgl",j)||L.getContext("experimental-webgl",j)}(d);if(!b)return!1;try{y=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!y||b.isContextLost())&&(b.shaderSource(y,"void main() {}"),b.compileShader(y),b.getShaderParameter(y,b.COMPILE_STATUS)===!0)}(u)),C[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(m)}var C={};function S(m,i){if(Array.isArray(m)){if(!Array.isArray(i)||m.length!==i.length)return!1;for(let u=0;u<m.length;u++)if(!S(m[u],i[u]))return!1;return!0}if(typeof m=="object"&&m!==null&&i!==null){if(typeof i!="object"||Object.keys(m).length!==Object.keys(i).length)return!1;for(const u in m)if(!S(m[u],i[u]))return!1;return!0}return m===i}E.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class I{static testProp(i){if(!I.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in I.docStyle)return i[u];return i[0]}static create(i,u,d){const y=window.document.createElement(i);return u!==void 0&&(y.className=u),d&&d.appendChild(y),y}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(i,u){i.style[I.transformProp]=u}static addEventListener(i,u,d,y={}){i.addEventListener(u,d,"passive"in y?y:y.capture)}static removeEventListener(i,u,d,y={}){i.removeEventListener(u,d,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static mousePos(i,u){const d=i.getBoundingClientRect();return new s.pointGeometry(u.clientX-d.left-i.clientLeft,u.clientY-d.top-i.clientTop)}static touchPos(i,u){const d=i.getBoundingClientRect(),y=[];for(let b=0;b<u.length;b++)y.push(new s.pointGeometry(u[b].clientX-d.left-i.clientLeft,u[b].clientY-d.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}I.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);class D{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,d){const y=function(b){const P=b.match(J);if(!P)throw new Error(`Unable to parse URL "${b}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(i);return y.path+=`${u}${d}`,function(b){const P=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${P}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const J=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function X(m){var i=new s.ARRAY_TYPE(3);return i[0]=m[0],i[1]=m[1],i[2]=m[2],i}function G(m,i,u){var d=new s.ARRAY_TYPE(3);return d[0]=m,d[1]=i,d[2]=u,d}var U,H=function(m,i,u){return m[0]=i[0]-u[0],m[1]=i[1]-u[1],m[2]=i[2]-u[2],m};U=new s.ARRAY_TYPE(3),s.ARRAY_TYPE!=Float32Array&&(U[0]=0,U[1]=0,U[2]=0);var $=function(m){var i=m[0],u=m[1];return i*i+u*u};(function(){var m=new s.ARRAY_TYPE(2);s.ARRAY_TYPE!=Float32Array&&(m[0]=0,m[1]=0)})();class ne{constructor(i,u,d,y){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(u,y)}update(i,u,d){const{width:y,height:b}=i,P=!(this.size&&this.size[0]===y&&this.size[1]===b||d),{context:L}=this,{gl:j}=L;if(this.useMipmap=Boolean(u&&u.useMipmap),j.bindTexture(j.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===j.RGBA&&(!u||u.premultiply!==!1)),P)this.size=[y,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.isImageBitmap(i)?j.texImage2D(j.TEXTURE_2D,0,this.format,this.format,j.UNSIGNED_BYTE,i):j.texImage2D(j.TEXTURE_2D,0,this.format,y,b,0,this.format,j.UNSIGNED_BYTE,i.data);else{const{x:Y,y:ae}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.isImageBitmap(i)?j.texSubImage2D(j.TEXTURE_2D,0,Y,ae,j.RGBA,j.UNSIGNED_BYTE,i):j.texSubImage2D(j.TEXTURE_2D,0,Y,ae,y,b,j.RGBA,j.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&j.generateMipmap(j.TEXTURE_2D)}bind(i,u,d){const{context:y}=this,{gl:b}=y;b.bindTexture(b.TEXTURE_2D,this.texture),d!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,d||i),this.filter=i),u!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,u),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function W(m){const{userImage:i}=m;return!!(i&&i.render&&i.render())&&(m.data.replace(new Uint8Array(i.data.buffer)),!0)}class F extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:d}of this.requestors)this._notify(u,d);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let d=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),d=!1),d}_validateStretch(i,u){if(!i)return!0;let d=0;for(const y of i){if(y[0]<d||y[1]<y[0]||u<y[1])return!1;d=y[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){u.version=this.images[i].version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let d=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(d=!1);this.isLoaded()||d?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const d={};for(const y of i){this.images[y]||this.fire(new s.Event("styleimagemissing",{id:y}));const b=this.images[y];b?d[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:Boolean(b.userImage&&b.userImage.render)}:s.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,d)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],d=this.getImage(i);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},b=new s.ImagePosition(y,d);this.patterns[i]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ne(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:u,h:d}=s.potpack(i),y=this.atlasImage;y.resize({width:u||1,height:d||1});for(const b in this.patterns){const{bin:P}=this.patterns[b],L=P.x+1,j=P.y+1,Y=this.images[b].data,ae=Y.width,he=Y.height;s.RGBAImage.copy(Y,y,{x:0,y:0},{x:L,y:j},{width:ae,height:he}),s.RGBAImage.copy(Y,y,{x:0,y:he-1},{x:L,y:j-1},{width:ae,height:1}),s.RGBAImage.copy(Y,y,{x:0,y:0},{x:L,y:j+he},{width:ae,height:1}),s.RGBAImage.copy(Y,y,{x:ae-1,y:0},{x:L-1,y:j},{width:1,height:he}),s.RGBAImage.copy(Y,y,{x:0,y:0},{x:L+ae,y:j},{width:1,height:he})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.images[u];W(d)&&this.updateImage(u,d)}}}const w=1e20;function k(m,i,u,d,y,b,P,L,j){for(let Y=i;Y<i+d;Y++)B(m,u*b+Y,b,y,P,L,j);for(let Y=u;Y<u+y;Y++)B(m,Y*b+i,1,d,P,L,j)}function B(m,i,u,d,y,b,P){b[0]=0,P[0]=-w,P[1]=w,y[0]=m[i];for(let L=1,j=0,Y=0;L<d;L++){y[L]=m[i+L*u];const ae=L*L;do{const he=b[j];Y=(y[L]-y[he]+ae-he*he)/(L-he)/2}while(Y<=P[j]&&--j>-1);j++,b[j]=L,P[j]=Y,P[j+1]=w}for(let L=0,j=0;L<d;L++){for(;P[j+1]<L;)j++;const Y=b[j],ae=L-Y;m[i+L*u]=y[Y]+ae*ae}}class q{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const d=[];for(const y in i)for(const b of i[y])d.push({stack:y,id:b});s.asyncAll(d,({stack:y,id:b},P)=>{let L=this.entries[y];L||(L=this.entries[y]={glyphs:{},requests:{},ranges:{}});let j=L.glyphs[b];if(j!==void 0)return void P(null,{stack:y,id:b,glyph:j});if(j=this._tinySDF(L,y,b),j)return L.glyphs[b]=j,void P(null,{stack:y,id:b,glyph:j});const Y=Math.floor(b/256);if(256*Y>65535)return void P(new Error("glyphs > 65535 not supported"));if(L.ranges[Y])return void P(null,{stack:y,id:b,glyph:j});let ae=L.requests[Y];ae||(ae=L.requests[Y]=[],q.loadGlyphRange(y,Y,this.url,this.requestManager,(he,Ee)=>{if(Ee){for(const ze in Ee)this._doesCharSupportLocalGlyph(+ze)||(L.glyphs[+ze]=Ee[+ze]);L.ranges[Y]=!0}for(const ze of ae)ze(he,Ee);delete L.requests[Y]})),ae.push((he,Ee)=>{he?P(he):Ee&&P(null,{stack:y,id:b,glyph:Ee[b]||null})})},(y,b)=>{if(y)u(y);else if(b){const P={};for(const{stack:L,id:j,glyph:Y}of b)(P[L]||(P[L]={}))[j]=Y&&{id:Y.id,bitmap:Y.bitmap.clone(),metrics:Y.metrics};u(null,P)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(s.unicodeBlockLookup["CJK Unified Ideographs"](i)||s.unicodeBlockLookup["Hangul Syllables"](i)||s.unicodeBlockLookup.Hiragana(i)||s.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,d){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(d))return;let b=i.tinySDF;if(!b){let L="400";/bold/i.test(u)?L="900":/medium/i.test(u)?L="500":/light/i.test(u)&&(L="200"),b=i.tinySDF=new q.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:L})}const P=b.draw(String.fromCharCode(d));return{id:d,bitmap:new s.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop||-8,advance:P.glyphAdvance||24}}}}q.loadGlyphRange=function(m,i,u,d,y){const b=256*i,P=b+255,L=d.transformRequest(u.replace("{fontstack}",m).replace("{range}",`${b}-${P}`),s.ResourceType.Glyphs);s.getArrayBuffer(L,(j,Y)=>{if(j)y(j);else if(Y){const ae={};for(const he of s.parseGlyphPBF(Y))ae[he.id]=he;y(null,ae)}})},q.TinySDF=class{constructor({fontSize:m=24,buffer:i=3,radius:u=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:P="normal"}){this.buffer=i,this.cutoff=d,this.radius=u;const L=this.size=m+4*i,j=this._createCanvas(L),Y=this.ctx=j.getContext("2d",{willReadFrequently:!0});Y.font=`${P} ${b} ${m}px ${y}`,Y.textBaseline="alphabetic",Y.textAlign="left",Y.fillStyle="black",this.gridOuter=new Float64Array(L*L),this.gridInner=new Float64Array(L*L),this.f=new Float64Array(L),this.z=new Float64Array(L+1),this.v=new Uint16Array(L)}_createCanvas(m){const i=document.createElement("canvas");return i.width=i.height=m,i}draw(m){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(m),P=Math.floor(u),L=Math.min(this.size-this.buffer,Math.ceil(b-y)),j=Math.min(this.size-this.buffer,Math.ceil(u)+Math.ceil(d)),Y=L+2*this.buffer,ae=j+2*this.buffer,he=Y*ae,Ee=new Uint8ClampedArray(he),ze={data:Ee,width:Y,height:ae,glyphWidth:L,glyphHeight:j,glyphTop:P,glyphLeft:0,glyphAdvance:i};if(L===0||j===0)return ze;const{ctx:Se,buffer:Fe,gridInner:$e,gridOuter:We}=this;Se.clearRect(Fe,Fe,L,j),Se.fillText(m,Fe,Fe+P+1);const Je=Se.getImageData(Fe,Fe,L,j);We.fill(w,0,he),$e.fill(0,0,he);for(let Ye=0;Ye<j;Ye++)for(let ct=0;ct<L;ct++){const rt=Je.data[4*(Ye*L+ct)+3]/255;if(rt===0)continue;const ut=(Ye+Fe)*Y+ct+Fe;if(rt===1)We[ut]=0,$e[ut]=w;else{const xt=.5-rt;We[ut]=xt>0?xt*xt:0,$e[ut]=xt<0?xt*xt:0}}k(We,0,0,Y,ae,Y,this.f,this.v,this.z),k($e,Fe,Fe,L,j,Y,this.f,this.v,this.z);for(let Ye=0;Ye<he;Ye++){const ct=Math.sqrt(We[Ye])-Math.sqrt($e[Ye]);Ee[Ye]=Math.round(255-255*(ct/this.radius+this.cutoff))}return ze}};const K=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(m,i){return s.sphericalToCartesian(m.expression.evaluate(i))}interpolate(m,i,u){return{x:s.number(m.x,i.x,u),y:s.number(m.y,i.y,u),z:s.number(m.z,i.z,u)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)}),fe="-transition";class ge extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(K),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(s.validateLight,i,u))for(const d in i){const y=i[d];d.endsWith(fe)?this._transitionable.setTransition(d.slice(0,-fe.length),y):this._transitionable.setValue(d,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,d){return(!d||d.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class xe{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const d=i.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(i,u)),this.dashEntry[d]}getDashRanges(i,u,d){const y=[];let b=i.length%2==1?-i[i.length-1]*d:0,P=i[0]*d,L=!0;y.push({left:b,right:P,isDash:L,zeroLength:i[0]===0});let j=i[0];for(let Y=1;Y<i.length;Y++){L=!L;const ae=i[Y];b=j*d,j+=ae,P=j*d,y.push({left:b,right:P,isDash:L,zeroLength:ae===0})}return y}addRoundDash(i,u,d){const y=u/2;for(let b=-d;b<=d;b++){const P=this.width*(this.nextRow+d+b);let L=0,j=i[L];for(let Y=0;Y<this.width;Y++){Y/j.right>1&&(j=i[++L]);const ae=Math.abs(Y-j.left),he=Math.abs(Y-j.right),Ee=Math.min(ae,he);let ze;const Se=b/d*(y+1);if(j.isDash){const Fe=y-Math.abs(Se);ze=Math.sqrt(Ee*Ee+Fe*Fe)}else ze=y-Math.sqrt(Ee*Ee+Se*Se);this.data[P+Y]=Math.max(0,Math.min(255,ze+128))}}}addRegularDash(i){for(let L=i.length-1;L>=0;--L){const j=i[L],Y=i[L+1];j.zeroLength?i.splice(L,1):Y&&Y.isDash===j.isDash&&(Y.left=j.left,i.splice(L,1))}const u=i[0],d=i[i.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const y=this.width*this.nextRow;let b=0,P=i[b];for(let L=0;L<this.width;L++){L/P.right>1&&(P=i[++b]);const j=Math.abs(L-P.left),Y=Math.abs(L-P.right),ae=Math.min(j,Y);this.data[y+L]=Math.max(0,Math.min(255,(P.isDash?ae:-ae)+128))}}addDash(i,u){const d=u?7:0,y=2*d+1;if(this.nextRow+y>this.height)return s.warnOnce("LineAtlas out of space"),null;let b=0;for(let L=0;L<i.length;L++)b+=i[L];if(b!==0){const L=this.width/b,j=this.getDashRanges(i,this.width,L);u?this.addRoundDash(j,L,d):this.addRegularDash(j)}const P={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:b};return this.nextRow+=y,this.dirty=!0,P}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class ee{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const d=this.workerPool.acquire(this.id);for(let y=0;y<d.length;y++){const b=new ee.Actor(d[y],u,this.id);b.name=`Worker ${y}`,this.actors.push(b)}}broadcast(i,u,d){s.asyncAll(this.actors,(y,b)=>{y.send(i,u,b)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function re(m,i,u){const d=function(y,b){if(y)return u(y);if(b){const P=s.pick(s.extend(b,m),["tiles","minzoom","maxzoom","attribution","maplibreLogo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(P.vectorLayers=b.vector_layers,P.vectorLayerIds=P.vectorLayers.map(L=>L.id)),u(null,P)}};return m.url?s.getJSON(i.transformRequest(m.url,s.ResourceType.Source),d):s.exported.frame(()=>d(null,m))}ee.Actor=s.Actor;class ie{constructor(i,u,d){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),d=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*u),y=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*u),b=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*u),P=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=d&&i.x<b&&i.y>=y&&i.y<P}}class le extends s.Evented{constructor(i,u,d,y){if(super(),this.id=i,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(u,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=re(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new s.ErrorEvent(i)):u&&(s.extend(this,u),u.bounds&&(this.tileBounds=new ie(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}loadTile(i,u){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(d,s.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(P,L){return delete i.request,i.aborted?u(null):P&&P.status!==404?u(P):(L&&L.resourceTiming&&(i.resourceTiming=L.resourceTiming),this.map._refreshExpiredTiles&&L&&i.setExpiryData(L),i.loadVectorData(L,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",y,b.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,b.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class _e extends s.Evented{constructor(i,u,d,y){super(),this.id=i,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},u),s.extend(this,s.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=re(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):u&&(s.extend(this,u),u.bounds&&(this.tileBounds=new ie(u.bounds,this.minzoom,this.maxzoom)),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=s.getImage(this.map._requestManager.transformRequest(d,s.ResourceType.Tile),(y,b)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(y)i.state="errored",u(y);else if(b){this.map._refreshExpiredTiles&&i.setExpiryData(b),delete b.cacheControl,delete b.expires;const P=this.map.painter.context,L=P.gl;i.texture=this.map.painter.getTileTexture(b.width),i.texture?i.texture.update(b,{useMipmap:!0}):(i.texture=new ne(P,b,L.RGBA,{useMipmap:!0}),i.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&L.texParameterf(L.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let Ie;class ce extends _e{constructor(i,u,d,y){super(i,u,d,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(b,P){b&&(i.state="errored",u(b)),P&&(i.dem=P,i.needsHillshadePrepare=!0,i.state="loaded",u(null))}i.request=s.getImage(this.map._requestManager.transformRequest(d,s.ResourceType.Tile),function(b,P){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(b)i.state="errored",u(b);else if(P){this.map._refreshExpiredTiles&&i.setExpiryData(P),delete P.cacheControl,delete P.expires;const L=s.isImageBitmap(P)&&(Ie==null&&(Ie=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ie)?P:s.exported.getImageData(P,1),j={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:L,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",j,y.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,d=Math.pow(2,u.z),y=(u.x-1+d)%d,b=u.x===0?i.wrap-1:i.wrap,P=(u.x+1+d)%d,L=u.x+1===d?i.wrap+1:i.wrap,j={};return j[new s.OverscaledTileID(i.overscaledZ,b,u.z,y,u.y).key]={backfilled:!1},j[new s.OverscaledTileID(i.overscaledZ,L,u.z,P,u.y).key]={backfilled:!1},u.y>0&&(j[new s.OverscaledTileID(i.overscaledZ,b,u.z,y,u.y-1).key]={backfilled:!1},j[new s.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},j[new s.OverscaledTileID(i.overscaledZ,L,u.z,P,u.y-1).key]={backfilled:!1}),u.y+1<d&&(j[new s.OverscaledTileID(i.overscaledZ,b,u.z,y,u.y+1).key]={backfilled:!1},j[new s.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},j[new s.OverscaledTileID(i.overscaledZ,L,u.z,P,u.y+1).key]={backfilled:!1}),j}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class ke extends s.Evented{constructor(i,u,d,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(y),this._data=u.data,this._options=s.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const b=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*b,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*b,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.EXTENT,radius:(u.clusterRadius||50)*b,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,d,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:d},y),this}_updateWorkerData(i){const u=s.extend({},this.workerOptions),d=this._data;typeof d=="string"?(u.request=this.map._requestManager.transformRequest(s.exported.resolveURL(d),s.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(d),this._pendingLoads++,this.fire(new s.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(y,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return;let P=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(P=b.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:u.source},null),y)return void this.fire(new s.ErrorEvent(y));const L={dataType:"source",sourceDataType:i};this._collectResourceTiming&&P&&P.length>0&&s.extend(L,{resourceTiming:P}),this.fire(new s.Event("data",L))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const d=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(d,y,(b,P)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):b?u(b):(i.loadVectorData(P,this.map.painter,d==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Te=s.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pe extends s.Evented{constructor(i,u,d,y){super(),this.id=i,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}load(i,u){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(d,y)=>{this._loaded=!0,d?this.fire(new s.ErrorEvent(d)):y&&(this.image=y,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(s.MercatorCoordinate.fromLngLat);this.tileID=function(y){let b=1/0,P=1/0,L=-1/0,j=-1/0;for(const Ee of y)b=Math.min(b,Ee.x),P=Math.min(P,Ee.y),L=Math.max(L,Ee.x),j=Math.max(j,Ee.y);const Y=Math.max(L-b,j-P),ae=Math.max(0,Math.floor(-Math.log(Y)/Math.LN2)),he=Math.pow(2,ae);return new s.CanonicalTileID(ae,Math.floor((b+L)/2*he),Math.floor((P+j)/2*he))}(u),this.minzoom=this.maxzoom=this.tileID.z;const d=u.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new s.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,s.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,s.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,s.EXTENT,s.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ne(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class De extends Pe{constructor(i,u,d,y){super(i,u,d,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,s.ResourceType.Source).url);s.getVideo(this.urls,(u,d)=>{this._loaded=!0,u?this.fire(new s.ErrorEvent(u)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new ne(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const d in this.tiles){const y=this.tiles[d];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ue extends Pe{constructor(i,u,d,y){super(i,u,d,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(P=>typeof P!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,d=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ne(u,this.canvas,d.RGBA,{premultiply:!0});for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const qe={vector:le,raster:_e,"raster-dem":ce,geojson:ke,video:De,image:Pe,canvas:Ue};function ot(m,i){const u=s.create();return s.translate(u,u,[1,1,0]),s.scale(u,u,[.5*m.width,.5*m.height,1]),s.multiply(u,u,m.calculatePosMatrix(i.toUnwrapped()))}function dt(m,i,u,d,y,b){const P=function(he,Ee,ze){if(he)for(const Se of he){const Fe=Ee[Se];if(Fe&&Fe.source===ze&&Fe.type==="fill-extrusion")return!0}else for(const Se in Ee){const Fe=Ee[Se];if(Fe.source===ze&&Fe.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,m.id),L=b.maxPitchScaleFactor(),j=m.tilesIn(d,L,P);j.sort(Pt);const Y=[];for(const he of j)Y.push({wrappedTileID:he.tileID.wrapped().key,queryResults:he.tile.queryRenderedFeatures(i,u,m._state,he.queryGeometry,he.cameraQueryGeometry,he.scale,y,b,L,ot(m.transform,he.tileID))});const ae=function(he){const Ee={},ze={};for(const Se of he){const Fe=Se.queryResults,$e=Se.wrappedTileID,We=ze[$e]=ze[$e]||{};for(const Je in Fe){const Ye=Fe[Je],ct=We[Je]=We[Je]||{},rt=Ee[Je]=Ee[Je]||[];for(const ut of Ye)ct[ut.featureIndex]||(ct[ut.featureIndex]=!0,rt.push(ut))}}return Ee}(Y);for(const he in ae)ae[he].forEach(Ee=>{const ze=Ee.feature,Se=m.getFeatureState(ze.layer["source-layer"],ze.id);ze.source=ze.layer.source,ze.layer["source-layer"]&&(ze.sourceLayer=ze.layer["source-layer"]),ze.state=Se});return ae}function Pt(m,i){const u=m.tileID,d=i.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}class ht{constructor(i,u){this.tileID=i,this.uid=s.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<s.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(i,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,b){const P={};if(!b)return P;for(const L of y){const j=L.layerIds.map(Y=>b.getLayer(Y)).filter(Boolean);if(j.length!==0){L.layers=j,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map(Y=>j.filter(ae=>ae.id===Y)[0]));for(const Y of j)P[Y.id]=L}}return P}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof s.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof s.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,s.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ne(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ne(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,d,y,b,P,L,j,Y,ae){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:P,tileSize:this.tileSize,pixelPosMatrix:ae,transform:j,params:L,queryPadding:this.queryPadding*Y},i,u,d):{}}querySourceFeatures(i,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),b=u?u.sourceLayer:"",P=y._geojsonTileLayer||y[b];if(!P)return;const L=s.createFilter(u&&u.filter),{z:j,x:Y,y:ae}=this.tileID.canonical,he={z:j,x:Y,y:ae};for(let Ee=0;Ee<P.length;Ee++){const ze=P.feature(Ee);if(L.needGeometry){const $e=s.toEvaluationFeature(ze,!0);if(!L.filter(new s.EvaluationParameters(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!L.filter(new s.EvaluationParameters(this.tileID.overscaledZ),ze))continue;const Se=d.getId(ze,b),Fe=new s.GeoJSONFeature(ze,j,Y,ae,Se);Fe.tile=he,i.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const d=s.parseCacheControl(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const b=this.expirationTime-u;b?this.expirationTime=d+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const b=this.buckets[y],P=b.layers[0].sourceLayer||"_geojsonTileLayer",L=d[P],j=i[P];if(!L||!j||Object.keys(j).length===0)continue;b.update(j,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});const Y=u&&u.style&&u.style.getLayer(y);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=s.exported.now()+i}setDependencies(i,u){const d={};for(const y of u)d[y]=!0;this.dependencies[i]=d}hasDependency(i,u){for(const d of i){const y=this.dependencies[d];if(y){for(const b of u)if(y[b])return!0}}return!1}}class Et{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,d){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const b={value:u,timeout:void 0};if(d!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},d)),this.data[y].push(b),this.order.push(y),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const d=i.wrapped().key,y=u===void 0?0:this.data[d].indexOf(u),b=this.data[d][y];return this.data[d].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(b.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const d in this.data)for(const y of this.data[d])i(y.value)||u.push(y);for(const d of u)this.remove(d.value.tileID,d)}}class Nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,d){const y=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},s.extend(this.stateChanges[i][y],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==y&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const b in this.state[i][y])d[b]||(this.deletedStates[i][y][b]=null)}else for(const b in d)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][b]===null&&delete this.deletedStates[i][y][b]}removeFeatureState(i,u,d){if(this.deletedStates[i]===null)return;const y=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&u!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][d]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(d in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][d]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,u){const d=String(u),y=s.extend({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][u];if(b===null)return{};for(const P in b)delete y[P]}return y}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const P in this.stateChanges[y])this.state[y][P]||(this.state[y][P]={}),s.extend(this.state[y][P],this.stateChanges[y][P]),b[P]=this.state[y][P];d[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const P in this.state[y])b[P]={},this.state[y][P]={};else for(const P in this.deletedStates[y]){if(this.deletedStates[y][P]===null)this.state[y][P]={};else for(const L of Object.keys(this.deletedStates[y][P]))delete this.state[y][P][L];b[P]=this.state[y][P]}d[y]=d[y]||{},s.extend(d[y],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const y in i)i[y].setFeatureState(d,u)}}class Bt extends s.Evented{constructor(i,u,d){super(),this.id=i,this.dispatcher=d,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",()=>{this._sourceErrored=!0}),this._source=function(y,b,P,L){const j=new qe[b.type](y,b,P,L);if(j.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${j.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],j),j}(i,u,d,this),this._tiles={},this._cache=new Et(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Nt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new s.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const d=this._tiles[u];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(cn).map(i=>i.key)}getRenderableIds(i){const u=[];for(const d in this._tiles)this._isIdRenderable(d,i)&&u.push(this._tiles[d]);return i?u.sort((d,y)=>{const b=d.tileID,P=y.tileID,L=new s.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),j=new s.pointGeometry(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-P.overscaledZ||j.y-L.y||j.x-L.x}).map(d=>d.tileID.key):u.map(d=>d.tileID).sort(cn).map(d=>d.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=u),this._loadTile(d,this._tileLoaded.bind(this,d,i,u)))}_tileLoaded(i,u,d,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new s.ErrorEvent(y,{tile:i})):this.update(this.transform));i.timeAdded=s.exported.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new s.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const b=u[y];if(i.neighboringTiles&&i.neighboringTiles[b]){const P=this.getTileByID(b);d(i,P),d(P,i)}}function d(y,b){y.needsHillshadePrepare=!0;let P=b.tileID.canonical.x-y.tileID.canonical.x;const L=b.tileID.canonical.y-y.tileID.canonical.y,j=Math.pow(2,y.tileID.canonical.z),Y=b.tileID.key;P===0&&L===0||Math.abs(L)>1||(Math.abs(P)>1&&(Math.abs(P+j)===1?P+=j:Math.abs(P-j)===1&&(P-=j)),b.dem&&y.dem&&(y.dem.backfillBorder(b.dem,P,L),y.neighboringTiles&&y.neighboringTiles[Y]&&(y.neighboringTiles[Y].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,d,y){for(const b in this._tiles){let P=this._tiles[b];if(y[b]||!P.hasData()||P.tileID.overscaledZ<=u||P.tileID.overscaledZ>d)continue;let L=P.tileID;for(;P&&P.tileID.overscaledZ>u+1;){const Y=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[Y.key],P&&P.hasData()&&(L=Y)}let j=L;for(;j.overscaledZ>u;)if(j=j.scaledTo(j.overscaledZ-1),i[j.key]){y[L.key]=L;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=i.overscaledZ-1;d>=u;d--){const y=i.scaledTo(d),b=this._getLoadedTile(y);if(b)return b}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,d=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(u*d*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const d={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+u),d[b.tileID.key]=b}this._tiles=d;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let u;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?u=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(j=>new s.OverscaledTileID(j.canonical.z,j.wrap,j.canonical.z,j.canonical.x,j.canonical.y)):(u=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(u=u.filter(j=>this._source.hasTile(j)))):u=[];const d=i.coveringZoomLevel(this._source),y=Math.max(d-Bt.maxOverzooming,this._source.minzoom),b=Math.max(d+Bt.maxUnderzooming,this._source.minzoom),P=this._updateRetainedTiles(u,d);if(An(this._source.type)){const j={},Y={},ae=Object.keys(P);for(const he of ae){const Ee=P[he],ze=this._tiles[he];if(!ze||ze.fadeEndTime&&ze.fadeEndTime<=s.exported.now())continue;const Se=this.findLoadedParent(Ee,y);Se&&(this._addTile(Se.tileID),j[Se.tileID.key]=Se.tileID),Y[he]=Ee}this._retainLoadedChildren(Y,d,b,P);for(const he in j)P[he]||(this._coveredTiles[he]=!0,P[he]=j[he])}for(const j in P)this._tiles[j].clearFadeHold();const L=s.keysDifference(this._tiles,P);for(const j of L){const Y=this._tiles[j];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(j)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const d={},y={},b=Math.max(u-Bt.maxOverzooming,this._source.minzoom),P=Math.max(u+Bt.maxUnderzooming,this._source.minzoom),L={};for(const j of i){const Y=this._addTile(j);d[j.key]=j,Y.hasData()||u<this._source.maxzoom&&(L[j.key]=j)}this._retainLoadedChildren(L,u,P,d);for(const j of i){let Y=this._tiles[j.key];if(Y.hasData())continue;if(u+1>this._source.maxzoom){const he=j.children(this._source.maxzoom)[0],Ee=this.getTile(he);if(Ee&&Ee.hasData()){d[he.key]=he;continue}}else{const he=j.children(this._source.maxzoom);if(d[he[0].key]&&d[he[1].key]&&d[he[2].key]&&d[he[3].key])continue}let ae=Y.wasRequested();for(let he=j.overscaledZ-1;he>=b;--he){const Ee=j.scaledTo(he);if(y[Ee.key]||(y[Ee.key]=!0,Y=this.getTile(Ee),!Y&&ae&&(Y=this._addTile(Ee)),Y&&(d[Ee.key]=Ee,ae=Y.wasRequested(),Y.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let d,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){d=this._loadedParentTiles[y.key];break}u.push(y.key);const b=y.scaledTo(y.overscaledZ-1);if(d=this._getLoadedTile(b),d)break;y=b}for(const b of u)this._loadedParentTiles[b]=d}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const d=u;return u||(u=new ht(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,d||this._source.fire(new s.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=u.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,d){const y=[],b=this.transform;if(!b)return y;const P=d?b.getCameraQueryGeometry(i):i,L=i.map(Se=>b.pointCoordinate(Se)),j=P.map(Se=>b.pointCoordinate(Se)),Y=this.getIds();let ae=1/0,he=1/0,Ee=-1/0,ze=-1/0;for(const Se of j)ae=Math.min(ae,Se.x),he=Math.min(he,Se.y),Ee=Math.max(Ee,Se.x),ze=Math.max(ze,Se.y);for(let Se=0;Se<Y.length;Se++){const Fe=this._tiles[Y[Se]];if(Fe.holdingForFade())continue;const $e=Fe.tileID,We=Math.pow(2,b.zoom-Fe.tileID.overscaledZ),Je=u*Fe.queryPadding*s.EXTENT/Fe.tileSize/We,Ye=[$e.getTilePoint(new s.MercatorCoordinate(ae,he)),$e.getTilePoint(new s.MercatorCoordinate(Ee,ze))];if(Ye[0].x-Je<s.EXTENT&&Ye[0].y-Je<s.EXTENT&&Ye[1].x+Je>=0&&Ye[1].y+Je>=0){const ct=L.map(ut=>$e.getTilePoint(ut)),rt=j.map(ut=>$e.getTilePoint(ut));y.push({tile:Fe,tileID:$e,queryGeometry:ct,cameraQueryGeometry:rt,scale:We})}}return y}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of u)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(An(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=s.exported.now())return!0}return!1}setFeatureState(i,u,d){this._state.updateState(i=i||"_geojsonTileLayer",u,d)}removeFeatureState(i,u,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,d)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,d){const y=this._tiles[i];y&&y.setDependencies(u,d)}reloadTilesForDependencies(i,u){for(const d in this._tiles)this._tiles[d].hasDependency(i,u)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(i,u))}}function cn(m,i){const u=Math.abs(2*m.wrap)-+(m.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return m.overscaledZ-i.overscaledZ||d-u||i.canonical.y-m.canonical.y||i.canonical.x-m.canonical.x}function An(m){return m==="raster"||m==="image"||m==="video"}Bt.maxOverzooming=10,Bt.maxUnderzooming=3;const wn="mapboxgl_preloaded_worker_pool";class on{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<on.workerCount;)this.workers.push(new Worker(Xl.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wn]}numActive(){return Object.keys(this.active).length}}const En=Math.floor(s.exported.hardwareConcurrency/2);let we;function R(){return we||(we=new on),we}function O(m,i){const u={};for(const d in m)d!=="ref"&&(u[d]=m[d]);return s.refProperties.forEach(d=>{d in i&&(u[d]=i[d])}),u}function pe(m){m=m.slice();const i=Object.create(null);for(let u=0;u<m.length;u++)i[m[u].id]=m[u];for(let u=0;u<m.length;u++)"ref"in m[u]&&(m[u]=O(m[u],i[m[u].ref]));return m}on.workerCount=Math.max(Math.min(En,6),1);const Le={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ke(m,i,u){u.push({command:Le.addSource,args:[m,i[m]]})}function at(m,i,u){i.push({command:Le.removeSource,args:[m]}),u[m]=!0}function se(m,i,u,d){at(m,u,d),Ke(m,i,u)}function T(m,i,u){let d;for(d in m[u])if(Object.prototype.hasOwnProperty.call(m[u],d)&&d!=="data"&&!S(m[u][d],i[u][d]))return!1;for(d in i[u])if(Object.prototype.hasOwnProperty.call(i[u],d)&&d!=="data"&&!S(m[u][d],i[u][d]))return!1;return!0}function z(m,i,u,d,y,b){let P;for(P in i=i||{},m=m||{})Object.prototype.hasOwnProperty.call(m,P)&&(S(m[P],i[P])||u.push({command:b,args:[d,P,i[P],y]}));for(P in i)Object.prototype.hasOwnProperty.call(i,P)&&!Object.prototype.hasOwnProperty.call(m,P)&&(S(m[P],i[P])||u.push({command:b,args:[d,P,i[P],y]}))}function be(m){return m.id}function je(m,i){return m[i.id]=i,m}class Xe{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let u=1,d=this._distances[u];const y=i*this.paddedLength+this.padding;for(;d<y&&u<this._distances.length;)d=this._distances[++u];const b=u-1,P=this._distances[b],L=d-P,j=L>0?(y-P)/L:0;return this.points[b].mult(1-j).add(this.points[u].mult(j))}}function Qe(m,i){let u=!0;return m==="always"||m!=="never"&&i!=="never"||(u=!1),u}class Ht{constructor(i,u,d){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/d),this.yCellCount=Math.ceil(u/d);for(let P=0;P<this.xCellCount*this.yCellCount;P++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,d,y,b){this._forEachCell(u,d,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(i,u,d,y){this._forEachCell(u-y,d-y,u+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(d),this.circles.push(y)}_insertBoxCell(i,u,d,y,b,P){this.boxCells[b].push(P)}_insertCircleCell(i,u,d,y,b,P){this.circleCells[b].push(P)}_query(i,u,d,y,b,P,L){if(d<0||i>this.width||y<0||u>this.height)return[];const j=[];if(i<=0&&u<=0&&this.width<=d&&this.height<=y){if(b)return[{key:null,x1:i,y1:u,x2:d,y2:y}];for(let Y=0;Y<this.boxKeys.length;Y++)j.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const ae=this.circles[3*Y],he=this.circles[3*Y+1],Ee=this.circles[3*Y+2];j.push({key:this.circleKeys[Y],x1:ae-Ee,y1:he-Ee,x2:ae+Ee,y2:he+Ee})}}else this._forEachCell(i,u,d,y,this._queryCell,j,{hitTest:b,overlapMode:P,seenUids:{box:{},circle:{}}},L);return j}query(i,u,d,y){return this._query(i,u,d,y,!1,null)}hitTest(i,u,d,y,b,P){return this._query(i,u,d,y,!0,b,P).length>0}hitTestCircle(i,u,d,y,b){const P=i-d,L=i+d,j=u-d,Y=u+d;if(L<0||P>this.width||Y<0||j>this.height)return!1;const ae=[];return this._forEachCell(P,j,L,Y,this._queryCellCircle,ae,{hitTest:!0,overlapMode:y,circle:{x:i,y:u,radius:d},seenUids:{box:{},circle:{}}},b),ae.length>0}_queryCell(i,u,d,y,b,P,L,j){const{seenUids:Y,hitTest:ae,overlapMode:he}=L,Ee=this.boxCells[b];if(Ee!==null){const Se=this.bboxes;for(const Fe of Ee)if(!Y.box[Fe]){Y.box[Fe]=!0;const $e=4*Fe,We=this.boxKeys[Fe];if(i<=Se[$e+2]&&u<=Se[$e+3]&&d>=Se[$e+0]&&y>=Se[$e+1]&&(!j||j(We))&&(!ae||!Qe(he,We.overlapMode))&&(P.push({key:We,x1:Se[$e],y1:Se[$e+1],x2:Se[$e+2],y2:Se[$e+3]}),ae))return!0}}const ze=this.circleCells[b];if(ze!==null){const Se=this.circles;for(const Fe of ze)if(!Y.circle[Fe]){Y.circle[Fe]=!0;const $e=3*Fe,We=this.circleKeys[Fe];if(this._circleAndRectCollide(Se[$e],Se[$e+1],Se[$e+2],i,u,d,y)&&(!j||j(We))&&(!ae||!Qe(he,We.overlapMode))){const Je=Se[$e],Ye=Se[$e+1],ct=Se[$e+2];if(P.push({key:We,x1:Je-ct,y1:Ye-ct,x2:Je+ct,y2:Ye+ct}),ae)return!0}}}return!1}_queryCellCircle(i,u,d,y,b,P,L,j){const{circle:Y,seenUids:ae,overlapMode:he}=L,Ee=this.boxCells[b];if(Ee!==null){const Se=this.bboxes;for(const Fe of Ee)if(!ae.box[Fe]){ae.box[Fe]=!0;const $e=4*Fe,We=this.boxKeys[Fe];if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,Se[$e+0],Se[$e+1],Se[$e+2],Se[$e+3])&&(!j||j(We))&&!Qe(he,We.overlapMode))return P.push(!0),!0}}const ze=this.circleCells[b];if(ze!==null){const Se=this.circles;for(const Fe of ze)if(!ae.circle[Fe]){ae.circle[Fe]=!0;const $e=3*Fe,We=this.circleKeys[Fe];if(this._circlesCollide(Se[$e],Se[$e+1],Se[$e+2],Y.x,Y.y,Y.radius)&&(!j||j(We))&&!Qe(he,We.overlapMode))return P.push(!0),!0}}}_forEachCell(i,u,d,y,b,P,L,j){const Y=this._convertToXCellCoord(i),ae=this._convertToYCellCoord(u),he=this._convertToXCellCoord(d),Ee=this._convertToYCellCoord(y);for(let ze=Y;ze<=he;ze++)for(let Se=ae;Se<=Ee;Se++)if(b.call(this,i,u,d,y,this.xCellCount*Se+ze,P,L,j))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,d,y,b,P){const L=y-i,j=b-u,Y=d+P;return Y*Y>L*L+j*j}_circleAndRectCollide(i,u,d,y,b,P,L){const j=(P-y)/2,Y=Math.abs(i-(y+j));if(Y>j+d)return!1;const ae=(L-b)/2,he=Math.abs(u-(b+ae));if(he>ae+d)return!1;if(Y<=j||he<=ae)return!0;const Ee=Y-j,ze=he-ae;return Ee*Ee+ze*ze<=d*d}}function Cn(m,i,u,d,y){const b=s.create();return i?(s.scale(b,b,[1/y,1/y,1]),u||s.rotateZ(b,b,d.angle)):s.multiply(b,d.labelPlaneMatrix,m),b}function fn(m,i,u,d,y){if(i){const b=s.clone(m);return s.scale(b,b,[y,y,1]),u||s.rotateZ(b,b,-d.angle),b}return d.glCoordMatrix}function ft(m,i){const u=s.fromValues(m.x,m.y,0,1);Gt(u,u,i);const d=u[3];return{point:new s.pointGeometry(u[0]/d,u[1]/d),signedDistanceFromCamera:d}}function Mt(m,i){return .5+m/i*.5}function un(m,i){const u=m[0]/m[3],d=m[1]/m[3];return u>=-i[0]&&u<=i[0]&&d>=-i[1]&&d<=i[1]}function Ar(m,i,u,d,y,b,P,L){const j=d?m.textSizeData:m.iconSizeData,Y=s.evaluateSizeForZoom(j,u.transform.zoom),ae=[256/u.width*2+1,256/u.height*2+1],he=d?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;he.clear();const Ee=m.lineVertexArray,ze=d?m.text.placedSymbolArray:m.icon.placedSymbolArray,Se=u.transform.width/u.transform.height;let Fe=!1;for(let $e=0;$e<ze.length;$e++){const We=ze.get($e);if(We.hidden||We.writingMode===s.WritingMode.vertical&&!Fe){Wt(We.numGlyphs,he);continue}Fe=!1;const Je=s.fromValues(We.anchorX,We.anchorY,0,1);if(s.transformMat4(Je,Je,i),!un(Je,ae)){Wt(We.numGlyphs,he);continue}const Ye=Mt(u.transform.cameraToCenterDistance,Je[3]),ct=s.evaluateSizeForFeature(j,Y,We),rt=P?ct/Ye:ct*Ye,ut=new s.pointGeometry(We.anchorX,We.anchorY),xt=ft(ut,y).point,St={},gt=nr(We,rt,!1,L,i,y,b,m.glyphOffsetArray,Ee,he,xt,ut,St,Se);Fe=gt.useVertical,(gt.notEnoughRoom||Fe||gt.needsFlipping&&nr(We,rt,!0,L,i,y,b,m.glyphOffsetArray,Ee,he,xt,ut,St,Se).notEnoughRoom)&&Wt(We.numGlyphs,he)}d?m.text.dynamicLayoutVertexBuffer.updateData(he):m.icon.dynamicLayoutVertexBuffer.updateData(he)}function Yr(m,i,u,d,y,b,P,L,j,Y,ae){const he=L.glyphStartIndex+L.numGlyphs,Ee=L.lineStartIndex,ze=L.lineStartIndex+L.lineLength,Se=i.getoffsetX(L.glyphStartIndex),Fe=i.getoffsetX(he-1),$e=vr(m*Se,u,d,y,b,P,L.segment,Ee,ze,j,Y,ae);if(!$e)return null;const We=vr(m*Fe,u,d,y,b,P,L.segment,Ee,ze,j,Y,ae);return We?{first:$e,last:We}:null}function hn(m,i,u,d){return m===s.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*d?{useVertical:!0}:(m===s.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function nr(m,i,u,d,y,b,P,L,j,Y,ae,he,Ee,ze){const Se=i/24,Fe=m.lineOffsetX*Se,$e=m.lineOffsetY*Se;let We;if(m.numGlyphs>1){const Je=m.glyphStartIndex+m.numGlyphs,Ye=m.lineStartIndex,ct=m.lineStartIndex+m.lineLength,rt=Yr(Se,L,Fe,$e,u,ae,he,m,j,b,Ee);if(!rt)return{notEnoughRoom:!0};const ut=ft(rt.first.point,P).point,xt=ft(rt.last.point,P).point;if(d&&!u){const St=hn(m.writingMode,ut,xt,ze);if(St)return St}We=[rt.first];for(let St=m.glyphStartIndex+1;St<Je-1;St++)We.push(vr(Se*L.getoffsetX(St),Fe,$e,u,ae,he,m.segment,Ye,ct,j,b,Ee));We.push(rt.last)}else{if(d&&!u){const Ye=ft(he,y).point,ct=m.lineStartIndex+m.segment+1,rt=new s.pointGeometry(j.getx(ct),j.gety(ct)),ut=ft(rt,y),xt=ut.signedDistanceFromCamera>0?ut.point:gi(he,rt,Ye,1,y),St=hn(m.writingMode,Ye,xt,ze);if(St)return St}const Je=vr(Se*L.getoffsetX(m.glyphStartIndex),Fe,$e,u,ae,he,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,j,b,Ee);if(!Je)return{notEnoughRoom:!0};We=[Je]}for(const Je of We)s.addDynamicAttributes(Y,Je.point,Je.angle);return{}}function gi(m,i,u,d,y){const b=ft(m.add(m.sub(i)._unit()),y).point,P=u.sub(b);return u.add(P._mult(d/P.mag()))}function vr(m,i,u,d,y,b,P,L,j,Y,ae,he){const Ee=d?m-i:m+i;let ze=Ee>0?1:-1,Se=0;d&&(ze*=-1,Se=Math.PI),ze<0&&(Se+=Math.PI);let Fe=ze>0?L+P:L+P+1,$e=y,We=y,Je=0,Ye=0;const ct=Math.abs(Ee),rt=[];for(;Je+Ye<=ct;){if(Fe+=ze,Fe<L||Fe>=j)return null;if(We=$e,rt.push($e),$e=he[Fe],$e===void 0){const Kt=new s.pointGeometry(Y.getx(Fe),Y.gety(Fe)),Ft=ft(Kt,ae);if(Ft.signedDistanceFromCamera>0)$e=he[Fe]=Ft.point;else{const pn=Fe-ze;$e=gi(Je===0?b:new s.pointGeometry(Y.getx(pn),Y.gety(pn)),Kt,We,ct-Je+1,ae)}}Je+=Ye,Ye=We.dist($e)}const ut=(ct-Je)/Ye,xt=$e.sub(We),St=xt.mult(ut)._add(We);St._add(xt._unit()._perp()._mult(u*ze));const gt=Se+Math.atan2($e.y-We.y,$e.x-We.x);return rt.push(St),{point:St,angle:gt,path:rt}}const Nr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Wt(m,i){for(let u=0;u<m;u++){const d=i.length;i.resize(d+4),i.float32.set(Nr,3*d)}}function Gt(m,i,u){const d=i[0],y=i[1];return m[0]=u[0]*d+u[4]*y+u[12],m[1]=u[1]*d+u[5]*y+u[13],m[3]=u[3]*d+u[7]*y+u[15],m}const Zt=100;class In{constructor(i,u=new Ht(i.width+200,i.height+200,25),d=new Ht(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=d,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Zt,this.screenBottomBoundary=i.height+Zt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,u,d,y,b){const P=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY),L=d*P.perspectiveRatio,j=i.x1*L+P.point.x,Y=i.y1*L+P.point.y,ae=i.x2*L+P.point.x,he=i.y2*L+P.point.y;return!this.isInsideGrid(j,Y,ae,he)||u!=="always"&&this.grid.hitTest(j,Y,ae,he,u,b)?{box:[],offscreen:!1}:{box:[j,Y,ae,he],offscreen:this.isOffscreen(j,Y,ae,he)}}placeCollisionCircles(i,u,d,y,b,P,L,j,Y,ae,he,Ee,ze){const Se=[],Fe=new s.pointGeometry(u.anchorX,u.anchorY),$e=ft(Fe,P),We=Mt(this.transform.cameraToCenterDistance,$e.signedDistanceFromCamera),Je=(ae?b/We:b*We)/s.ONE_EM,Ye=ft(Fe,L).point,ct=Yr(Je,y,u.lineOffsetX*Je,u.lineOffsetY*Je,!1,Ye,Fe,u,d,L,{});let rt=!1,ut=!1,xt=!0;if(ct){const St=.5*Ee*We+ze,gt=new s.pointGeometry(-100,-100),Kt=new s.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ft=new Xe,pn=ct.first,Vn=ct.last;let Pn=[];for(let vn=pn.path.length-1;vn>=1;vn--)Pn.push(pn.path[vn]);for(let vn=1;vn<Vn.path.length;vn++)Pn.push(Vn.path[vn]);const kn=2.5*St;if(j){const vn=Pn.map(On=>ft(On,j));Pn=vn.some(On=>On.signedDistanceFromCamera<=0)?[]:vn.map(On=>On.point)}let br=[];if(Pn.length>0){const vn=Pn[0].clone(),On=Pn[0].clone();for(let mr=1;mr<Pn.length;mr++)vn.x=Math.min(vn.x,Pn[mr].x),vn.y=Math.min(vn.y,Pn[mr].y),On.x=Math.max(On.x,Pn[mr].x),On.y=Math.max(On.y,Pn[mr].y);br=vn.x>=gt.x&&On.x<=Kt.x&&vn.y>=gt.y&&On.y<=Kt.y?[Pn]:On.x<gt.x||vn.x>Kt.x||On.y<gt.y||vn.y>Kt.y?[]:s.clipLine([Pn],gt.x,gt.y,Kt.x,Kt.y)}for(const vn of br){Ft.reset(vn,.25*St);let On=0;On=Ft.length<=.5*St?1:Math.ceil(Ft.paddedLength/kn)+1;for(let mr=0;mr<On;mr++){const Kr=mr/Math.max(On-1,1),Li=Ft.lerp(Kr),Oi=Li.x+Zt,lo=Li.y+Zt;Se.push(Oi,lo,St,0);const Ri=Oi-St,uo=lo-St,Sa=Oi+St,Qa=lo+St;if(xt=xt&&this.isOffscreen(Ri,uo,Sa,Qa),ut=ut||this.isInsideGrid(Ri,uo,Sa,Qa),i!=="always"&&this.grid.hitTestCircle(Oi,lo,St,i,he)&&(rt=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:rt}}}}return{circles:!Y&&rt||!ut?[]:Se,offscreen:xt,collisionDetected:rt}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let d=1/0,y=1/0,b=-1/0,P=-1/0;for(const ae of i){const he=new s.pointGeometry(ae.x+Zt,ae.y+Zt);d=Math.min(d,he.x),y=Math.min(y,he.y),b=Math.max(b,he.x),P=Math.max(P,he.y),u.push(he)}const L=this.grid.query(d,y,b,P).concat(this.ignoredGrid.query(d,y,b,P)),j={},Y={};for(const ae of L){const he=ae.key;if(j[he.bucketInstanceId]===void 0&&(j[he.bucketInstanceId]={}),j[he.bucketInstanceId][he.featureIndex])continue;const Ee=[new s.pointGeometry(ae.x1,ae.y1),new s.pointGeometry(ae.x2,ae.y1),new s.pointGeometry(ae.x2,ae.y2),new s.pointGeometry(ae.x1,ae.y2)];s.polygonIntersectsPolygon(u,Ee)&&(j[he.bucketInstanceId][he.featureIndex]=!0,Y[he.bucketInstanceId]===void 0&&(Y[he.bucketInstanceId]=[]),Y[he.bucketInstanceId].push(he.featureIndex))}return Y}insertCollisionBox(i,u,d,y,b,P){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:P,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,d,y,b,P){const L=d?this.ignoredGrid:this.grid,j={bucketInstanceId:y,featureIndex:b,collisionGroupID:P,overlapMode:u};for(let Y=0;Y<i.length;Y+=4)L.insertCircle(j,i[Y],i[Y+1],i[Y+2])}projectAndGetPerspectiveRatio(i,u,d){const y=s.fromValues(u,d,0,1);return Gt(y,y,i),{point:new s.pointGeometry((y[0]/y[3]+1)/2*this.transform.width+Zt,(-y[1]/y[3]+1)/2*this.transform.height+Zt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(i,u,d,y){return d<Zt||i>=this.screenRightBoundary||y<Zt||u>this.screenBottomBoundary}isInsideGrid(i,u,d,y){return d>=0&&i<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}function Ln(m,i,u){return i*(s.EXTENT/(m.tileSize*Math.pow(2,u-m.tileID.overscaledZ)))}class rr{constructor(i,u,d,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Ur{constructor(i,u,d,y,b){this.text=new rr(i?i.text:null,u,d,b),this.icon=new rr(i?i.icon:null,u,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ai{constructor(i,u,d){this.text=i,this.icon=u,this.skipFade=d}}class da{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ce{constructor(i,u,d,y,b){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=b}}class Z{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[i]}}function Q(m,i,u,d,y){const{horizontalAlign:b,verticalAlign:P}=s.getAnchorAlignment(m),L=-(b-.5)*i,j=-(P-.5)*u,Y=s.evaluateVariableOffset(m,d);return new s.pointGeometry(L+Y[0]*y,j+Y[1]*y)}function ye(m,i,u,d,y,b){const{x1:P,x2:L,y1:j,y2:Y,anchorPointX:ae,anchorPointY:he}=m,Ee=new s.pointGeometry(i,u);return d&&Ee._rotate(y?b:-b),{x1:P+Ee.x,y1:j+Ee.y,x2:L+Ee.x,y2:Y+Ee.y,anchorPointX:ae,anchorPointY:he}}class Ae{constructor(i,u,d,y){this.transform=i.clone(),this.collisionIndex=new In(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new Z(d),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,d,y){const b=d.getBucket(u),P=d.latestFeatureIndex;if(!b||!P||u.id!==b.layerIds[0])return;const L=d.collisionBoxArray,j=b.layers[0].layout,Y=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),ae=d.tileSize/s.EXTENT,he=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),Ee=j.get("text-pitch-alignment")==="map",ze=j.get("text-rotation-alignment")==="map",Se=Ln(d,1,this.transform.zoom),Fe=Cn(he,Ee,ze,this.transform,Se);let $e=null;if(Ee){const Je=fn(he,Ee,ze,this.transform,Se);$e=s.multiply([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[b.bucketInstanceId]=new Ce(b.bucketInstanceId,P,b.sourceLayerIndex,b.index,d.tileID);const We={bucket:b,layout:j,posMatrix:he,textLabelPlaneMatrix:Fe,labelToScreenMatrix:$e,scale:Y,textPixelRatio:ae,holdingForFade:d.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const Je of b.sortKeyRanges){const{sortKey:Ye,symbolInstanceStart:ct,symbolInstanceEnd:rt}=Je;i.push({sortKey:Ye,symbolInstanceStart:ct,symbolInstanceEnd:rt,parameters:We})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:We})}attemptAnchorPlacement(i,u,d,y,b,P,L,j,Y,ae,he,Ee,ze,Se,Fe){const $e=[Ee.textOffset0,Ee.textOffset1],We=Q(i,d,y,$e,b),Je=this.collisionIndex.placeCollisionBox(ye(u,We.x,We.y,P,L,this.transform.angle),he,j,Y,ae.predicate);if((!Fe||this.collisionIndex.placeCollisionBox(ye(Fe,We.x,We.y,P,L,this.transform.angle),he,j,Y,ae.predicate).box.length!==0)&&Je.box.length>0){let Ye;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ee.crossTileID]&&this.prevPlacement.placements[Ee.crossTileID]&&this.prevPlacement.placements[Ee.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[Ee.crossTileID].anchor),this.variableOffsets[Ee.crossTileID]={textOffset:$e,width:d,height:y,anchor:i,textBoxScale:b,prevAnchor:Ye},this.markUsedJustification(ze,i,Ee,Se),ze.allowVerticalPlacement&&(this.markUsedOrientation(ze,Se,Ee),this.placedOrientations[Ee.crossTileID]=Se),{shift:We,placedGlyphBoxes:Je}}}placeLayerBucketPart(i,u,d){const{bucket:y,layout:b,posMatrix:P,textLabelPlaneMatrix:L,labelToScreenMatrix:j,textPixelRatio:Y,holdingForFade:ae,collisionBoxArray:he,partiallyEvaluatedTextSize:Ee,collisionGroup:ze}=i.parameters,Se=b.get("text-optional"),Fe=b.get("icon-optional"),$e=s.getOverlapMode(b,"text-overlap","text-allow-overlap"),We=$e==="always",Je=s.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),Ye=Je==="always",ct=b.get("text-rotation-alignment")==="map",rt=b.get("text-pitch-alignment")==="map",ut=b.get("icon-text-fit")!=="none",xt=b.get("symbol-z-order")==="viewport-y",St=We&&(Ye||!y.hasIconData()||Fe),gt=Ye&&(We||!y.hasTextData()||Se);!y.collisionArrays&&he&&y.deserializeCollisionBoxes(he);const Kt=(Ft,pn)=>{if(u[Ft.crossTileID])return;if(ae)return void(this.placements[Ft.crossTileID]=new ai(!1,!1,!1));let Vn=!1,Pn=!1,kn=!0,br=null,vn={box:null,offscreen:null},On={box:null,offscreen:null},mr=null,Kr=null,Li=null,Oi=0,lo=0,Ri=0;pn.textFeatureIndex?Oi=pn.textFeatureIndex:Ft.useRuntimeCollisionCircles&&(Oi=Ft.featureIndex),pn.verticalTextFeatureIndex&&(lo=pn.verticalTextFeatureIndex);const uo=pn.textBox;if(uo){const Yn=Un=>{let zr=s.WritingMode.horizontal;if(y.allowVerticalPlacement&&!Un&&this.prevPlacement){const Fi=this.prevPlacement.placedOrientations[Ft.crossTileID];Fi&&(this.placedOrientations[Ft.crossTileID]=Fi,zr=Fi,this.markUsedOrientation(y,zr,Ft))}return zr},Gr=(Un,zr)=>{if(y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&pn.verticalTextBox){for(const Fi of y.writingModes)if(Fi===s.WritingMode.vertical?(vn=zr(),On=vn):vn=Un(),vn&&vn.box&&vn.box.length)break}else vn=Un()};if(b.get("text-variable-anchor")){let Un=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ft.crossTileID]){const lr=this.prevPlacement.variableOffsets[Ft.crossTileID];Un.indexOf(lr.anchor)>0&&(Un=Un.filter(es=>es!==lr.anchor),Un.unshift(lr.anchor))}const zr=(lr,es,ts)=>{const js=lr.x2-lr.x1,Wu=lr.y2-lr.y1,ud=Ft.textBoxScale,mh=ut&&Je==="never"?es:null;let Ca={box:[],offscreen:!1};const ns=$e!=="never"?2*Un.length:Un.length;for(let rs=0;rs<ns;++rs){const Zu=this.attemptAnchorPlacement(Un[rs%Un.length],lr,js,Wu,ud,ct,rt,Y,P,ze,rs>=Un.length?$e:"never",Ft,y,ts,mh);if(Zu&&(Ca=Zu.placedGlyphBoxes,Ca&&Ca.box&&Ca.box.length)){Vn=!0,br=Zu.shift;break}}return Ca};Gr(()=>zr(uo,pn.iconBox,s.WritingMode.horizontal),()=>{const lr=pn.verticalTextBox;return y.allowVerticalPlacement&&!(vn&&vn.box&&vn.box.length)&&Ft.numVerticalGlyphVertices>0&&lr?zr(lr,pn.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null}}),vn&&(Vn=vn.box,kn=vn.offscreen);const Fi=Yn(vn&&vn.box);if(!Vn&&this.prevPlacement){const lr=this.prevPlacement.variableOffsets[Ft.crossTileID];lr&&(this.variableOffsets[Ft.crossTileID]=lr,this.markUsedJustification(y,lr.anchor,Ft,Fi))}}else{const Un=(zr,Fi)=>{const lr=this.collisionIndex.placeCollisionBox(zr,$e,Y,P,ze.predicate);return lr&&lr.box&&lr.box.length&&(this.markUsedOrientation(y,Fi,Ft),this.placedOrientations[Ft.crossTileID]=Fi),lr};Gr(()=>Un(uo,s.WritingMode.horizontal),()=>{const zr=pn.verticalTextBox;return y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&zr?Un(zr,s.WritingMode.vertical):{box:null,offscreen:null}}),Yn(vn&&vn.box&&vn.box.length)}}if(mr=vn,Vn=mr&&mr.box&&mr.box.length>0,kn=mr&&mr.offscreen,Ft.useRuntimeCollisionCircles){const Yn=y.text.placedSymbolArray.get(Ft.centerJustifiedTextSymbolIndex),Gr=s.evaluateSizeForFeature(y.textSizeData,Ee,Yn),Un=b.get("text-padding");Kr=this.collisionIndex.placeCollisionCircles($e,Yn,y.lineVertexArray,y.glyphOffsetArray,Gr,P,L,j,d,rt,ze.predicate,Ft.collisionCircleDiameter,Un),Vn=We||Kr.circles.length>0&&!Kr.collisionDetected,kn=kn&&Kr.offscreen}if(pn.iconFeatureIndex&&(Ri=pn.iconFeatureIndex),pn.iconBox){const Yn=Gr=>{const Un=ut&&br?ye(Gr,br.x,br.y,ct,rt,this.transform.angle):Gr;return this.collisionIndex.placeCollisionBox(Un,Je,Y,P,ze.predicate)};On&&On.box&&On.box.length&&pn.verticalIconBox?(Li=Yn(pn.verticalIconBox),Pn=Li.box.length>0):(Li=Yn(pn.iconBox),Pn=Li.box.length>0),kn=kn&&Li.offscreen}const Sa=Se||Ft.numHorizontalGlyphVertices===0&&Ft.numVerticalGlyphVertices===0,Qa=Fe||Ft.numIconVertices===0;if(Sa||Qa?Qa?Sa||(Pn=Pn&&Vn):Vn=Pn&&Vn:Pn=Vn=Pn&&Vn,Vn&&mr&&mr.box&&this.collisionIndex.insertCollisionBox(mr.box,$e,b.get("text-ignore-placement"),y.bucketInstanceId,On&&On.box&&lo?lo:Oi,ze.ID),Pn&&Li&&this.collisionIndex.insertCollisionBox(Li.box,Je,b.get("icon-ignore-placement"),y.bucketInstanceId,Ri,ze.ID),Kr&&(Vn&&this.collisionIndex.insertCollisionCircles(Kr.circles,$e,b.get("text-ignore-placement"),y.bucketInstanceId,Oi,ze.ID),d)){const Yn=y.bucketInstanceId;let Gr=this.collisionCircleArrays[Yn];Gr===void 0&&(Gr=this.collisionCircleArrays[Yn]=new da);for(let Un=0;Un<Kr.circles.length;Un+=4)Gr.circles.push(Kr.circles[Un+0]),Gr.circles.push(Kr.circles[Un+1]),Gr.circles.push(Kr.circles[Un+2]),Gr.circles.push(Kr.collisionDetected?1:0)}this.placements[Ft.crossTileID]=new ai(Vn||St,Pn||gt,kn||y.justReloaded),u[Ft.crossTileID]=!0};if(xt){const Ft=y.getSortedSymbolIndexes(this.transform.angle);for(let pn=Ft.length-1;pn>=0;--pn){const Vn=Ft[pn];Kt(y.symbolInstances.get(Vn),y.collisionArrays[Vn])}}else for(let Ft=i.symbolInstanceStart;Ft<i.symbolInstanceEnd;Ft++)Kt(y.symbolInstances.get(Ft),y.collisionArrays[Ft]);if(d&&y.bucketInstanceId in this.collisionCircleArrays){const Ft=this.collisionCircleArrays[y.bucketInstanceId];s.invert(Ft.invProjMatrix,P),Ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,u,d,y){let b;b=y===s.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[s.getAnchorJustification(u)];const P=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const L of P)L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=b>=0&&L!==b?0:d.crossTileID)}markUsedOrientation(i,u,d){const y=u===s.WritingMode.horizontal||u===s.WritingMode.horizontalOnly?u:0,b=u===s.WritingMode.vertical?u:0,P=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const L of P)i.text.placedSymbolArray.get(L).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(i):1,b=u?u.opacities:{},P=u?u.variableOffsets:{},L=u?u.placedOrientations:{};for(const j in this.placements){const Y=this.placements[j],ae=b[j];ae?(this.opacities[j]=new Ur(ae,y,Y.text,Y.icon),d=d||Y.text!==ae.text.placed||Y.icon!==ae.icon.placed):(this.opacities[j]=new Ur(null,y,Y.text,Y.icon,Y.skipFade),d=d||Y.text||Y.icon)}for(const j in b){const Y=b[j];if(!this.opacities[j]){const ae=new Ur(Y,y,!1,!1);ae.isHidden()||(this.opacities[j]=ae,d=d||Y.text.placed||Y.icon.placed)}}for(const j in P)this.variableOffsets[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.variableOffsets[j]=P[j]);for(const j in L)this.placedOrientations[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.placedOrientations[j]=L[j]);d?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const d={};for(const y of u){const b=y.getBucket(i);b&&y.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,d,y.collisionBoxArray)}}updateBucketOpacities(i,u,d){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,b=new Ur(null,0,!1,!1,!0),P=y.get("text-allow-overlap"),L=y.get("icon-allow-overlap"),j=y.get("text-variable-anchor"),Y=y.get("text-rotation-alignment")==="map",ae=y.get("text-pitch-alignment")==="map",he=y.get("icon-text-fit")!=="none",Ee=new Ur(null,0,P&&(L||!i.hasIconData()||y.get("icon-optional")),L&&(P||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&d&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(d);const ze=(Se,Fe,$e)=>{for(let We=0;We<Fe/4;We++)Se.opacityVertexArray.emplaceBack($e)};for(let Se=0;Se<i.symbolInstances.length;Se++){const Fe=i.symbolInstances.get(Se),{numHorizontalGlyphVertices:$e,numVerticalGlyphVertices:We,crossTileID:Je}=Fe;let Ye=this.opacities[Je];u[Je]?Ye=b:Ye||(Ye=Ee,this.opacities[Je]=Ye),u[Je]=!0;const ct=Fe.numIconVertices>0,rt=this.placedOrientations[Fe.crossTileID],ut=rt===s.WritingMode.vertical,xt=rt===s.WritingMode.horizontal||rt===s.WritingMode.horizontalOnly;if($e>0||We>0){const St=$t(Ye.text);ze(i.text,$e,ut?At:St),ze(i.text,We,xt?At:St);const gt=Ye.text.isHidden();[Fe.rightJustifiedTextSymbolIndex,Fe.centerJustifiedTextSymbolIndex,Fe.leftJustifiedTextSymbolIndex].forEach(pn=>{pn>=0&&(i.text.placedSymbolArray.get(pn).hidden=gt||ut?1:0)}),Fe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Fe.verticalPlacedTextSymbolIndex).hidden=gt||xt?1:0);const Kt=this.variableOffsets[Fe.crossTileID];Kt&&this.markUsedJustification(i,Kt.anchor,Fe,rt);const Ft=this.placedOrientations[Fe.crossTileID];Ft&&(this.markUsedJustification(i,"left",Fe,Ft),this.markUsedOrientation(i,Ft,Fe))}if(ct){const St=$t(Ye.icon),gt=!(he&&Fe.verticalPlacedIconSymbolIndex&&ut);Fe.placedIconSymbolIndex>=0&&(ze(i.icon,Fe.numIconVertices,gt?St:At),i.icon.placedSymbolArray.get(Fe.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),Fe.verticalPlacedIconSymbolIndex>=0&&(ze(i.icon,Fe.numVerticalIconVertices,gt?At:St),i.icon.placedSymbolArray.get(Fe.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const St=i.collisionArrays[Se];if(St){let gt=new s.pointGeometry(0,0);if(St.textBox||St.verticalTextBox){let Ft=!0;if(j){const pn=this.variableOffsets[Je];pn?(gt=Q(pn.anchor,pn.width,pn.height,pn.textOffset,pn.textBoxScale),Y&&gt._rotate(ae?this.transform.angle:-this.transform.angle)):Ft=!1}St.textBox&&Me(i.textCollisionBox.collisionVertexArray,Ye.text.placed,!Ft||ut,gt.x,gt.y),St.verticalTextBox&&Me(i.textCollisionBox.collisionVertexArray,Ye.text.placed,!Ft||xt,gt.x,gt.y)}const Kt=Boolean(!xt&&St.verticalIconBox);St.iconBox&&Me(i.iconCollisionBox.collisionVertexArray,Ye.icon.placed,Kt,he?gt.x:0,he?gt.y:0),St.verticalIconBox&&Me(i.iconCollisionBox.collisionVertexArray,Ye.icon.placed,!Kt,he?gt.x:0,he?gt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const Se=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Se.invProjMatrix,i.placementViewportMatrix=Se.viewportMatrix,i.collisionCircleArray=Se.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>i}setStale(){this.stale=!0}}function Me(m,i,u,d,y){m.emplaceBack(i?1:0,u?1:0,d||0,y||0),m.emplaceBack(i?1:0,u?1:0,d||0,y||0),m.emplaceBack(i?1:0,u?1:0,d||0,y||0),m.emplaceBack(i?1:0,u?1:0,d||0,y||0)}const Ge=Math.pow(2,25),Ne=Math.pow(2,24),Ve=Math.pow(2,17),He=Math.pow(2,16),st=Math.pow(2,9),mt=Math.pow(2,8),it=Math.pow(2,1);function $t(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const i=m.placed?1:0,u=Math.floor(127*m.opacity);return u*Ge+i*Ne+u*Ve+i*He+u*st+i*mt+u*it+i}const At=0;class Ut{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,d,y,b){const P=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(P,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((L,j)=>L.sortKey-j.sortKey));this._currentPartIndex<P.length;)if(u.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,b())return!0;return!1}}class rn{constructor(i,u,d,y,b,P,L){this.placement=new Ae(i,b,P,L),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,u,d){const y=s.exported.now(),b=()=>{const P=s.exported.now()-y;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=u[i[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=L)&&(!P.maxzoom||P.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(P)),this._inProgressLayer.continuePlacement(d[P.source],this.placement,this._showCollisionBoxes,P,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Vt=512/s.EXTENT/2;class xn{constructor(i,u,d){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(let y=0;y<u.length;y++){const b=u.get(y),P=b.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,i)})}}getScaledCoordinates(i,u){const d=Vt/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*s.EXTENT+i.anchorX)*d),y:Math.floor((u.canonical.y*s.EXTENT+i.anchorY)*d)}}findMatches(i,u,d){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let b=0;b<i.length;b++){const P=i.get(b);if(P.crossTileID)continue;const L=this.indexedSymbolInstances[P.key];if(!L)continue;const j=this.getScaledCoordinates(P,u);for(const Y of L)if(Math.abs(Y.coord.x-j.x)<=y&&Math.abs(Y.coord.y-j.y)<=y&&!d[Y.crossTileID]){d[Y.crossTileID]=!0,P.crossTileID=Y.crossTileID;break}}}}class Tn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _n{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const d in this.indexes){const y=this.indexes[d],b={};for(const P in y){const L=y[P];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+u),b[L.tileID.key]=L}this.indexes[d]=b}this.lng=i}addBucket(i,u,d){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<u.symbolInstances.length;b++)u.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const P=this.indexes[b];if(Number(b)>i.overscaledZ)for(const L in P){const j=P[L];j.tileID.isChildOf(i)&&j.findMatches(u.symbolInstances,i,y)}else{const L=P[i.scaledTo(Number(b)).key];L&&L.findMatches(u.symbolInstances,i,y)}}for(let b=0;b<u.symbolInstances.length;b++){const P=u.symbolInstances.get(b);P.crossTileID||(P.crossTileID=d.generate(),y[P.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new xn(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const d in u.indexedSymbolInstances)for(const y of u.indexedSymbolInstances[d])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let u=!1;for(const d in this.indexes){const y=this.indexes[d];for(const b in y)i[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[b]),delete y[b],u=!0)}return u}}class bn{constructor(){this.layerIndexes={},this.crossTileIDs=new Tn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,d){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new _n);let b=!1;const P={};y.handleWrapJump(d);for(const L of u){const j=L.getBucket(i);j&&i.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(L.tileID,j,this.crossTileIDs)&&(b=!0),P[j.bucketInstanceId]=!0)}return y.removeStaleBuckets(P)&&(b=!0),b}pruneUnusedLayers(i){const u={};i.forEach(d=>{u[d]=!0});for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}const tr=(m,i)=>s.emitValidationErrors(m,i&&i.filter(u=>u.identifier!=="source.canvas")),fr=s.pick(Le,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Jn=s.pick(Le,["setCenter","setZoom","setBearing","setPitch"]),xo=function(){const m={},i=s.spec.$version;for(const u in s.spec.$root){const d=s.spec.$root[u];if(d.required){let y=null;y=u==="version"?i:d.type==="array"?[]:{},y!=null&&(m[u]=y)}}return m}();class Ki extends s.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new ee(R(),this),this.imageManager=new F,this.imageManager.setEventedParent(this),this.glyphManager=new q(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new xe(256,512),this.crossTileSymbolIndex=new bn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const d=this;this._rtlTextPluginCallback=Ki.registerForPluginStateChange(y=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(b,P)=>{if(s.triggerPluginCompletionEvent(b),P&&P.every(L=>L))for(const L in d.sourceCaches)d.sourceCaches[L].reload()})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const b=this.sourceCaches[y.sourceId];if(!b)return;const P=b.getSource();if(P&&P.vectorLayerIds)for(const L in this._layers){const j=this._layers[L];j.source===P.id&&this._validateLayer(j)}})}loadURL(i,u={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const d=typeof u.validate!="boolean"||u.validate,y=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(y,(b,P)=>{this._request=null,b?this.fire(new s.ErrorEvent(b)):P&&this._load(P,d)})}loadJSON(i,u={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(xo,!1)}_load(i,u){if(u&&tr(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const d=pe(this.stylesheet.layers);this._order=d.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of d)y=s.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ge(this.stylesheet.light),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,d,y,b){let P,L,j;const Y=y>1?"@2x":"";let ae=s.getJSON(d.transformRequest(d.normalizeSpriteURL(u,Y,".json"),s.ResourceType.SpriteJSON),(ze,Se)=>{ae=null,j||(j=ze,P=Se,Ee())}),he=s.getImage(d.transformRequest(d.normalizeSpriteURL(u,Y,".png"),s.ResourceType.SpriteImage),(ze,Se)=>{he=null,j||(j=ze,L=Se,Ee())});function Ee(){if(j)b(j);else if(P&&L){const ze=s.exported.getImageData(L),Se={};for(const Fe in P){const{width:$e,height:We,x:Je,y:Ye,sdf:ct,pixelRatio:rt,stretchX:ut,stretchY:xt,content:St}=P[Fe],gt=new s.RGBAImage({width:$e,height:We});s.RGBAImage.copy(ze,gt,{x:Je,y:Ye},{x:0,y:0},{width:$e,height:We}),Se[Fe]={data:gt,pixelRatio:rt,sdf:ct,stretchX:ut,stretchY:xt,content:St}}b(null,Se)}}return{cancel(){ae&&(ae.cancel(),ae=null),he&&(he.cancel(),he=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,d)=>{if(this._spriteRequest=null,u)this.fire(new s.ErrorEvent(u));else if(d)for(const y in d)this.imageManager.addImage(y,d[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const d=i.sourceLayer;if(!d)return;const y=u.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const d of i){const y=this._layers[d];y.type!=="custom"&&u.push(y.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const P in this._updatedSources){const L=this._updatedSources[P];L==="reload"?this._reloadSource(P):L==="clear"&&this._clearSource(P)}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const d={};for(const y in this.sourceCaches){const b=this.sourceCaches[y];d[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const y in d){const b=this.sourceCaches[y];d[y]!==b.used&&b.fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),tr(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=pe(i.layers);const u=function(y,b){if(!y)return[{command:Le.setStyle,args:[b]}];let P=[];try{if(!S(y.version,b.version))return[{command:Le.setStyle,args:[b]}];S(y.center,b.center)||P.push({command:Le.setCenter,args:[b.center]}),S(y.zoom,b.zoom)||P.push({command:Le.setZoom,args:[b.zoom]}),S(y.bearing,b.bearing)||P.push({command:Le.setBearing,args:[b.bearing]}),S(y.pitch,b.pitch)||P.push({command:Le.setPitch,args:[b.pitch]}),S(y.sprite,b.sprite)||P.push({command:Le.setSprite,args:[b.sprite]}),S(y.glyphs,b.glyphs)||P.push({command:Le.setGlyphs,args:[b.glyphs]}),S(y.transition,b.transition)||P.push({command:Le.setTransition,args:[b.transition]}),S(y.light,b.light)||P.push({command:Le.setLight,args:[b.light]});const L={},j=[];(function(ae,he,Ee,ze){let Se;for(Se in he=he||{},ae=ae||{})Object.prototype.hasOwnProperty.call(ae,Se)&&(Object.prototype.hasOwnProperty.call(he,Se)||at(Se,Ee,ze));for(Se in he)Object.prototype.hasOwnProperty.call(he,Se)&&(Object.prototype.hasOwnProperty.call(ae,Se)?S(ae[Se],he[Se])||(ae[Se].type==="geojson"&&he[Se].type==="geojson"&&T(ae,he,Se)?Ee.push({command:Le.setGeoJSONSourceData,args:[Se,he[Se].data]}):se(Se,he,Ee,ze)):Ke(Se,he,Ee))})(y.sources,b.sources,j,L);const Y=[];y.layers&&y.layers.forEach(ae=>{L[ae.source]?P.push({command:Le.removeLayer,args:[ae.id]}):Y.push(ae)}),P=P.concat(j),function(ae,he,Ee){he=he||[];const ze=(ae=ae||[]).map(be),Se=he.map(be),Fe=ae.reduce(je,{}),$e=he.reduce(je,{}),We=ze.slice(),Je=Object.create(null);let Ye,ct,rt,ut,xt,St,gt;for(Ye=0,ct=0;Ye<ze.length;Ye++)rt=ze[Ye],Object.prototype.hasOwnProperty.call($e,rt)?ct++:(Ee.push({command:Le.removeLayer,args:[rt]}),We.splice(We.indexOf(rt,ct),1));for(Ye=0,ct=0;Ye<Se.length;Ye++)rt=Se[Se.length-1-Ye],We[We.length-1-Ye]!==rt&&(Object.prototype.hasOwnProperty.call(Fe,rt)?(Ee.push({command:Le.removeLayer,args:[rt]}),We.splice(We.lastIndexOf(rt,We.length-ct),1)):ct++,St=We[We.length-Ye],Ee.push({command:Le.addLayer,args:[$e[rt],St]}),We.splice(We.length-Ye,0,rt),Je[rt]=!0);for(Ye=0;Ye<Se.length;Ye++)if(rt=Se[Ye],ut=Fe[rt],xt=$e[rt],!Je[rt]&&!S(ut,xt))if(S(ut.source,xt.source)&&S(ut["source-layer"],xt["source-layer"])&&S(ut.type,xt.type)){for(gt in z(ut.layout,xt.layout,Ee,rt,null,Le.setLayoutProperty),z(ut.paint,xt.paint,Ee,rt,null,Le.setPaintProperty),S(ut.filter,xt.filter)||Ee.push({command:Le.setFilter,args:[rt,xt.filter]}),S(ut.minzoom,xt.minzoom)&&S(ut.maxzoom,xt.maxzoom)||Ee.push({command:Le.setLayerZoomRange,args:[rt,xt.minzoom,xt.maxzoom]}),ut)Object.prototype.hasOwnProperty.call(ut,gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?z(ut[gt],xt[gt],Ee,rt,gt.slice(6),Le.setPaintProperty):S(ut[gt],xt[gt])||Ee.push({command:Le.setLayerProperty,args:[rt,gt,xt[gt]]}));for(gt in xt)Object.prototype.hasOwnProperty.call(xt,gt)&&!Object.prototype.hasOwnProperty.call(ut,gt)&&gt!=="layout"&&gt!=="paint"&&gt!=="filter"&&gt!=="metadata"&&gt!=="minzoom"&&gt!=="maxzoom"&&(gt.indexOf("paint.")===0?z(ut[gt],xt[gt],Ee,rt,gt.slice(6),Le.setPaintProperty):S(ut[gt],xt[gt])||Ee.push({command:Le.setLayerProperty,args:[rt,gt,xt[gt]]}))}else Ee.push({command:Le.removeLayer,args:[rt]}),St=We[We.lastIndexOf(rt)+1],Ee.push({command:Le.addLayer,args:[xt,St]})}(Y,b.layers,P)}catch(L){console.warn("Unable to compute style diff:",L),P=[{command:Le.setStyle,args:[b]}]}return P}(this.serialize(),i).filter(y=>!(y.command in Jn));if(u.length===0)return!1;const d=u.filter(y=>!(y.command in fr));if(d.length>0)throw new Error(`Unimplemented: ${d.map(y=>y.command).join(", ")}.`);return u.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new s.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,d={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(s.validateStyle.source,`sources.${i}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.sourceCaches[i]=new Bt(i,u,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${d}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.clearTiles(),u.onRemove&&u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){this._checkLoaded(),this.sourceCaches[i].getSource().setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,d={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new s.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let b;if(i.type==="custom"){if(tr(this,s.validateCustomStyleLayer(i)))return;b=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=s.clone$1(i),i=s.extend(i,{source:y})),this._validate(s.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},d))return;b=s.createStyleLayer(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[b.id]=b.serialize()}const P=u?this._order.indexOf(u):this._order.length;if(u&&P===-1)this.fire(new s.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(P,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const L=this._removedLayers[y];delete this._removedLayers[y],L.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const d=this._order.indexOf(i);this._order.splice(d,1);const y=u?this._order.indexOf(u):this._order.length;u&&y===-1?this.fire(new s.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new s.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const d=this._order.indexOf(i);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,d){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===u&&y.maxzoom===d||(u!=null&&(y.minzoom=u),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new s.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,d={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!S(y.filter,u))return u==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(s.validateStyle.filter,`layers.${y.id}.filter`,u,null,d)||(y.filter=s.clone$1(u),this._updateLayer(y)))}else this.fire(new s.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,d,y={}){this._checkLoaded();const b=this.getLayer(i);b?S(b.getLayoutProperty(u),d)||(b.setLayoutProperty(u,d,y),this._updateLayer(b)):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const d=this.getLayer(i);if(d)return d.getLayoutProperty(u);this.fire(new s.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,d,y={}){this._checkLoaded();const b=this.getLayer(i);b?S(b.getPaintProperty(u),d)||(b.setPaintProperty(u,d,y)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const d=i.source,y=i.sourceLayer,b=this.sourceCaches[d];if(b===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const P=b.getSource().type;P==="geojson"&&y?this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||y?(i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,i.id,u)):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const d=i.source,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new s.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const b=y.getSource().type,P=b==="vector"?i.sourceLayer:void 0;b!=="vector"||P?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(P,i.id,u):this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,d=i.sourceLayer,y=this.sourceCaches[u];if(y!==void 0)return y.getSource().type!=="vector"||d?(i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,i.id)):void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:s.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=P=>this._layers[P].type==="fill-extrusion",d={},y=[];for(let P=this._order.length-1;P>=0;P--){const L=this._order[P];if(u(L)){d[L]=P;for(const j of i){const Y=j[L];if(Y)for(const ae of Y)y.push(ae)}}}y.sort((P,L)=>L.intersectionZ-P.intersectionZ);const b=[];for(let P=this._order.length-1;P>=0;P--){const L=this._order[P];if(u(L))for(let j=y.length-1;j>=0;j--){const Y=y[j].feature;if(d[Y.layer.id]<P)break;b.push(Y),y.pop()}else for(const j of i){const Y=j[L];if(Y)for(const ae of Y)b.push(ae.feature)}}return b}queryRenderedFeatures(i,u,d){u&&u.filter&&this._validate(s.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of u.layers){const L=this._layers[P];if(!L)return this.fire(new s.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];y[L.source]=!0}}const b=[];u.availableImages=this._availableImages;for(const P in this.sourceCaches)u.layers&&!y[P]||b.push(dt(this.sourceCaches[P],this._layers,this._serializedLayers,i,u,d));return this.placement&&b.push(function(P,L,j,Y,ae,he,Ee){const ze={},Se=he.queryRenderedSymbols(Y),Fe=[];for(const $e of Object.keys(Se).map(Number))Fe.push(Ee[$e]);Fe.sort(Pt);for(const $e of Fe){const We=$e.featureIndex.lookupSymbolFeatures(Se[$e.bucketInstanceId],L,$e.bucketIndex,$e.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,P);for(const Je in We){const Ye=ze[Je]=ze[Je]||[],ct=We[Je];ct.sort((rt,ut)=>{const xt=$e.featureSortOrder;if(xt){const St=xt.indexOf(rt.featureIndex);return xt.indexOf(ut.featureIndex)-St}return ut.featureIndex-rt.featureIndex});for(const rt of ct)Ye.push(rt)}}for(const $e in ze)ze[$e].forEach(We=>{const Je=We.feature,Ye=j[P[$e].source].getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=Ye});return ze}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,u){u&&u.filter&&this._validate(s.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.sourceCaches[i];return d?function(y,b){const P=y.getRenderableIds().map(Y=>y.getTileByID(Y)),L=[],j={};for(let Y=0;Y<P.length;Y++){const ae=P[Y],he=ae.tileID.canonical.key;j[he]||(j[he]=!0,ae.querySourceFeatures(L,b))}return L}(d,u):[]}addSourceType(i,u,d){return Ki.getSourceType(i)?d(new Error(`A source type called "${i}" already exists.`)):(Ki.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const d=this.light.getLight();let y=!1;for(const P in i)if(!S(i[P],d[P])){y=!0;break}if(!y)return;const b={now:s.exported.now(),transition:s.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(b)}_validate(i,u,d,y,b={}){return(!b||b.validate!==!1)&&tr(this,i.call(s.validateStyle,s.extend({key:u,style:this.serialize(),value:d,styleSpec:s.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,d,y,b=!1){let P=!1,L=!1;const j={};for(const Y of this._order){const ae=this._layers[Y];if(ae.type!=="symbol")continue;if(!j[ae.source]){const Ee=this.sourceCaches[ae.source];j[ae.source]=Ee.getRenderableIds(!0).map(ze=>Ee.getTileByID(ze)).sort((ze,Se)=>Se.tileID.overscaledZ-ze.tileID.overscaledZ||(ze.tileID.isLessThan(Se.tileID)?-1:1))}const he=this.crossTileSymbolIndex.addLayer(ae,j[ae.source],i.center.lng);P=P||he}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new rn(i,this._order,b,u,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,j),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),L=!0),P&&this.pauseablePlacement.placement.setStale()),L||P)for(const Y of this._order){const ae=this._layers[Y];ae.type==="symbol"&&this.placement.updateLayerOpacities(ae,j[ae.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,d){this.imageManager.getImages(u.icons,d),this._updateTilesForChangedImages();const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,d){this.glyphManager.getGlyphs(u.stacks,d)}getResource(i,u,d){return s.makeRequest(u,d)}}Ki.getSourceType=function(m){return qe[m]},Ki.setSourceType=function(m,i){qe[m]=i},Ki.registerForPluginStateChange=s.registerForPluginStateChange;var xl=s.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ua={prelude:Qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:Qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Qn(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:Qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:Qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:Qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function Qn(m,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=i.match(/attribute ([\w]+) ([\w]+)/g),y=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=b?b.concat(y):y,L={};return{fragmentSource:m=m.replace(u,(j,Y,ae,he,Ee)=>(L[Ee]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
varying ${ae} ${he} ${Ee};
#else
uniform ${ae} ${he} u_${Ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ee}
    ${ae} ${he} ${Ee} = u_${Ee};
#endif
`)),vertexSource:i=i.replace(u,(j,Y,ae,he,Ee)=>{const ze=he==="float"?"vec2":"vec4",Se=Ee.match(/color/)?"color":ze;return L[Ee]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
attribute ${ae} ${ze} a_${Ee};
varying ${ae} ${he} ${Ee};
#else
uniform ${ae} ${he} u_${Ee};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = a_${Ee};
#else
    ${ae} ${he} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${Ee} = unpack_mix_${Se}(a_${Ee}, u_${Ee}_t);
#else
    ${ae} ${he} ${Ee} = u_${Ee};
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_${Ee}
uniform lowp float u_${Ee}_t;
attribute ${ae} ${ze} a_${Ee};
#else
uniform ${ae} ${he} u_${Ee};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ee}
    ${ae} ${he} ${Ee} = a_${Ee};
#else
    ${ae} ${he} ${Ee} = u_${Ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ee}
    ${ae} ${he} ${Ee} = unpack_mix_${Se}(a_${Ee}, u_${Ee}_t);
#else
    ${ae} ${he} ${Ee} = u_${Ee};
#endif
`}),staticAttributes:d,staticUniforms:P}}class qi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,d,y,b,P,L,j){this.context=i;let Y=this.boundPaintVertexBuffers.length!==y.length;for(let ae=0;!Y&&ae<y.length;ae++)this.boundPaintVertexBuffers[ae]!==y[ae]&&(Y=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===d&&!Y&&this.boundIndexBuffer===b&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===L&&this.boundDynamicVertexBuffer2===j?(i.bindVertexArrayOES.set(this.vao),L&&L.bind(),b&&b.dynamicDraw&&b.bind(),j&&j.bind()):this.freshBind(u,d,y,b,P,L,j)}freshBind(i,u,d,y,b,P,L){let j;const Y=i.numAttributes,ae=this.context,he=ae.gl;if(ae.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ae.extVertexArrayObject.createVertexArrayOES(),ae.bindVertexArrayOES.set(this.vao),j=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=L;else{j=ae.currentNumAttributes||0;for(let Ee=Y;Ee<j;Ee++)he.disableVertexAttribArray(Ee)}u.enableAttributes(he,i);for(const Ee of d)Ee.enableAttributes(he,i);P&&P.enableAttributes(he,i),L&&L.enableAttributes(he,i),u.bind(),u.setVertexAttribPointers(he,i,b);for(const Ee of d)Ee.bind(),Ee.setVertexAttribPointers(he,i,b);P&&(P.bind(),P.setVertexAttribPointers(he,i,b)),y&&y.bind(),L&&(L.bind(),L.setVertexAttribPointers(he,i,b)),ae.currentNumAttributes=Y}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Su(m){const i=[];for(let u=0;u<m.length;u++){if(m[u]===null)continue;const d=m[u].split(" ");i.push(d.pop())}return i}class Cu{constructor(i,u,d,y,b,P){const L=i.gl;this.program=L.createProgram();const j=Su(d.staticAttributes),Y=y?y.getBinderAttributes():[],ae=j.concat(Y),he=d.staticUniforms?Su(d.staticUniforms):[],Ee=y?y.getBinderUniforms():[],ze=he.concat(Ee),Se=[];for(const rt of ze)Se.indexOf(rt)<0&&Se.push(rt);const Fe=y?y.defines():[];P&&Fe.push("#define OVERDRAW_INSPECTOR;");const $e=Fe.concat(Ua.prelude.fragmentSource,d.fragmentSource).join(`
`),We=Fe.concat(Ua.prelude.vertexSource,d.vertexSource).join(`
`),Je=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Je,$e),L.compileShader(Je),L.attachShader(this.program,Je);const Ye=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Ye,We),L.compileShader(Ye),L.attachShader(this.program,Ye),this.attributes={};const ct={};this.numAttributes=ae.length;for(let rt=0;rt<this.numAttributes;rt++)ae[rt]&&(L.bindAttribLocation(this.program,rt,ae[rt]),this.attributes[ae[rt]]=rt);L.linkProgram(this.program),L.deleteShader(Ye),L.deleteShader(Je);for(let rt=0;rt<Se.length;rt++){const ut=Se[rt];if(ut&&!ct[ut]){const xt=L.getUniformLocation(this.program,ut);xt&&(ct[ut]=xt)}}this.fixedUniforms=b(i,ct),this.binderUniforms=y?y.getUniforms(i,ct):[]}draw(i,u,d,y,b,P,L,j,Y,ae,he,Ee,ze,Se,Fe,$e){const We=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(d),i.setStencilMode(y),i.setColorMode(b),i.setCullFace(P);for(const Ye in this.fixedUniforms)this.fixedUniforms[Ye].set(L[Ye]);Se&&Se.setUniforms(i,this.binderUniforms,Ee,{zoom:ze});const Je={[We.LINES]:2,[We.TRIANGLES]:3,[We.LINE_STRIP]:1}[u];for(const Ye of he.get()){const ct=Ye.vaos||(Ye.vaos={});(ct[j]||(ct[j]=new qi)).bind(i,this,Y,Se?Se.getPaintVertexBuffers():[],ae,Ye.vertexOffset,Fe,$e),We.drawElements(u,Ye.primitiveLength*Je,We.UNSIGNED_SHORT,Ye.primitiveOffset*Je*2)}}}function Tu(m,i,u){const d=1/Ln(u,1,i.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,i.transform.tileZoom)/y,P=b*(u.tileID.canonical.x+u.tileID.wrap*y),L=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[P>>16,L>>16],u_pixel_coord_lower:[65535&P,65535&L]}}const Es=(m,i,u,d)=>{const y=i.style.light,b=y.properties.get("position"),P=G(b.x,b.y,b.z),L=function(){var Y=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(Y[1]=0,Y[2]=0,Y[3]=0,Y[5]=0,Y[6]=0,Y[7]=0),Y[0]=1,Y[4]=1,Y[8]=1,Y}();y.properties.get("anchor")==="viewport"&&function(Y,ae){var he=Math.sin(ae),Ee=Math.cos(ae);Y[0]=Ee,Y[1]=he,Y[2]=0,Y[3]=-he,Y[4]=Ee,Y[5]=0,Y[6]=0,Y[7]=0,Y[8]=1}(L,-i.transform.angle),function(Y,ae,he){var Ee=ae[0],ze=ae[1],Se=ae[2];Y[0]=Ee*he[0]+ze*he[3]+Se*he[6],Y[1]=Ee*he[1]+ze*he[4]+Se*he[7],Y[2]=Ee*he[2]+ze*he[5]+Se*he[8]}(P,P,L);const j=y.properties.get("color");return{u_matrix:m,u_lightpos:P,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+u,u_opacity:d}},Au=(m,i,u,d,y,b,P)=>s.extend(Es(m,i,u,d),Tu(b,i,P),{u_height_factor:-Math.pow(2,y.overscaledZ)/P.tileSize/8}),pa=m=>({u_matrix:m}),_l=(m,i,u,d)=>s.extend(pa(m),Tu(u,i,d)),Iu=(m,i)=>({u_matrix:m,u_world:i}),Vr=(m,i,u,d,y)=>s.extend(_l(m,i,u,d),{u_world:y}),Ss=(m,i,u,d)=>{const y=m.transform;let b,P;if(d.paint.get("circle-pitch-alignment")==="map"){const L=Ln(u,1,y.zoom);b=!0,P=[L,L]}else b=!1,P=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(i.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:P}},Va=(m,i,u)=>{const d=Ln(u,1,i.zoom),y=Math.pow(2,i.zoom-u.tileID.overscaledZ),b=u.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[i.pixelsToGLUnits[0]/(d*y),i.pixelsToGLUnits[1]/(d*y)],u_overscale_factor:b}},$a=(m,i,u=1)=>({u_matrix:m,u_color:i,u_overlay:0,u_overlay_scale:u}),Ga=m=>({u_matrix:m}),Cs=(m,i,u,d)=>({u_matrix:m,u_extrude_scale:Ln(i,1,u),u_intensity:d});function Ts(m,i){const u=Math.pow(2,i.canonical.z),d=i.canonical.y;return[new s.MercatorCoordinate(0,d/u).toLngLat().lat,new s.MercatorCoordinate(0,(d+1)/u).toLngLat().lat]}const _o=(m,i,u)=>{const d=m.transform;return{u_matrix:bl(m,i,u),u_ratio:1/Ln(i,1,d.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},ma=(m,i,u,d)=>s.extend(_o(m,i,u),{u_image:0,u_image_height:d}),ir=(m,i,u,d)=>{const y=m.transform,b=bo(i,y);return{u_matrix:bl(m,i,u),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Ln(i,1,y.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},As=(m,i,u,d,y)=>{const b=m.lineAtlas,P=bo(i,m.transform),L=u.layout.get("line-cap")==="round",j=b.getDash(d.from,L),Y=b.getDash(d.to,L),ae=j.width*y.fromScale,he=Y.width*y.toScale;return s.extend(_o(m,i,u),{u_patternscale_a:[P/ae,-j.height/2],u_patternscale_b:[P/he,-Y.height/2],u_sdfgamma:b.width/(256*Math.min(ae,he)*m.pixelRatio)/2,u_image:0,u_tex_y_a:j.y,u_tex_y_b:Y.y,u_mix:y.t})};function bo(m,i){return 1/Ln(m,1,i.tileZoom)}function bl(m,i,u){return m.translatePosMatrix(i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Pu=(m,i,u,d,y)=>{return{u_matrix:m,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(P=y.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(b=y.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:wl(y.paint.get("raster-hue-rotate"))};var b,P};function wl(m){m*=Math.PI/180;const i=Math.sin(m),u=Math.cos(m);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const El=(m,i,u,d,y,b,P,L,j,Y)=>{const ae=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ae.cameraToCenterDistance,u_pitch:ae.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ae.width/ae.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+j,u_pitch_with_map:+d,u_texsize:Y,u_texture:0}},Sl=(m,i,u,d,y,b,P,L,j,Y,ae)=>{const he=y.transform;return s.extend(El(m,i,u,d,y,b,P,L,j,Y),{u_gamma_scale:d?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+ae})},nh=(m,i,u,d,y,b,P,L,j,Y)=>s.extend(Sl(m,i,u,d,y,b,P,L,!0,j,!0),{u_texsize_icon:Y,u_texture_icon:1}),Cl=(m,i,u)=>({u_matrix:m,u_opacity:i,u_color:u}),Tl=(m,i,u,d,y,b)=>s.extend(function(P,L,j,Y){const ae=j.imageManager.getPattern(P.from.toString()),he=j.imageManager.getPattern(P.to.toString()),{width:Ee,height:ze}=j.imageManager.getPixelSize(),Se=Math.pow(2,Y.tileID.overscaledZ),Fe=Y.tileSize*Math.pow(2,j.transform.tileZoom)/Se,$e=Fe*(Y.tileID.canonical.x+Y.tileID.wrap*Se),We=Fe*Y.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ae.tl,u_pattern_br_a:ae.br,u_pattern_tl_b:he.tl,u_pattern_br_b:he.br,u_texsize:[Ee,ze],u_mix:L.t,u_pattern_size_a:ae.displaySize,u_pattern_size_b:he.displaySize,u_scale_a:L.fromScale,u_scale_b:L.toScale,u_tile_units_to_pixels:1/Ln(Y,1,j.transform.tileZoom),u_pixel_coord_upper:[$e>>16,We>>16],u_pixel_coord_lower:[65535&$e,65535&We]}}(d,b,u,y),{u_matrix:m,u_opacity:i}),Ha={fillExtrusion:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_lightpos:new s.Uniform3f(m,i.u_lightpos),u_lightintensity:new s.Uniform1f(m,i.u_lightintensity),u_lightcolor:new s.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(m,i.u_vertical_gradient),u_opacity:new s.Uniform1f(m,i.u_opacity)}),fillExtrusionPattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_lightpos:new s.Uniform3f(m,i.u_lightpos),u_lightintensity:new s.Uniform1f(m,i.u_lightintensity),u_lightcolor:new s.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new s.Uniform1f(m,i.u_vertical_gradient),u_height_factor:new s.Uniform1f(m,i.u_height_factor),u_image:new s.Uniform1i(m,i.u_image),u_texsize:new s.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade),u_opacity:new s.Uniform1f(m,i.u_opacity)}),fill:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),fillPattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_image:new s.Uniform1i(m,i.u_image),u_texsize:new s.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade)}),fillOutline:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_world:new s.Uniform2f(m,i.u_world)}),fillOutlinePattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_world:new s.Uniform2f(m,i.u_world),u_image:new s.Uniform1i(m,i.u_image),u_texsize:new s.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade)}),circle:(m,i)=>({u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_scale_with_map:new s.Uniform1i(m,i.u_scale_with_map),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_extrude_scale:new s.Uniform2f(m,i.u_extrude_scale),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),collisionBox:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pixels_to_tile_units:new s.Uniform1f(m,i.u_pixels_to_tile_units),u_extrude_scale:new s.Uniform2f(m,i.u_extrude_scale),u_overscale_factor:new s.Uniform1f(m,i.u_overscale_factor)}),collisionCircle:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_inv_matrix:new s.UniformMatrix4f(m,i.u_inv_matrix),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_viewport_size:new s.Uniform2f(m,i.u_viewport_size)}),debug:(m,i)=>({u_color:new s.UniformColor(m,i.u_color),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_overlay:new s.Uniform1i(m,i.u_overlay),u_overlay_scale:new s.Uniform1f(m,i.u_overlay_scale)}),clippingMask:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),heatmap:(m,i)=>({u_extrude_scale:new s.Uniform1f(m,i.u_extrude_scale),u_intensity:new s.Uniform1f(m,i.u_intensity),u_matrix:new s.UniformMatrix4f(m,i.u_matrix)}),heatmapTexture:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_world:new s.Uniform2f(m,i.u_world),u_image:new s.Uniform1i(m,i.u_image),u_color_ramp:new s.Uniform1i(m,i.u_color_ramp),u_opacity:new s.Uniform1f(m,i.u_opacity)}),hillshade:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_image:new s.Uniform1i(m,i.u_image),u_latrange:new s.Uniform2f(m,i.u_latrange),u_light:new s.Uniform2f(m,i.u_light),u_shadow:new s.UniformColor(m,i.u_shadow),u_highlight:new s.UniformColor(m,i.u_highlight),u_accent:new s.UniformColor(m,i.u_accent)}),hillshadePrepare:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_image:new s.Uniform1i(m,i.u_image),u_dimension:new s.Uniform2f(m,i.u_dimension),u_zoom:new s.Uniform1f(m,i.u_zoom),u_unpack:new s.Uniform4f(m,i.u_unpack)}),line:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels)}),lineGradient:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels),u_image:new s.Uniform1i(m,i.u_image),u_image_height:new s.Uniform1f(m,i.u_image_height)}),linePattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_texsize:new s.Uniform2f(m,i.u_texsize),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_image:new s.Uniform1i(m,i.u_image),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels),u_scale:new s.Uniform3f(m,i.u_scale),u_fade:new s.Uniform1f(m,i.u_fade)}),lineSDF:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_ratio:new s.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new s.Uniform2f(m,i.u_units_to_pixels),u_patternscale_a:new s.Uniform2f(m,i.u_patternscale_a),u_patternscale_b:new s.Uniform2f(m,i.u_patternscale_b),u_sdfgamma:new s.Uniform1f(m,i.u_sdfgamma),u_image:new s.Uniform1i(m,i.u_image),u_tex_y_a:new s.Uniform1f(m,i.u_tex_y_a),u_tex_y_b:new s.Uniform1f(m,i.u_tex_y_b),u_mix:new s.Uniform1f(m,i.u_mix)}),raster:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_tl_parent:new s.Uniform2f(m,i.u_tl_parent),u_scale_parent:new s.Uniform1f(m,i.u_scale_parent),u_buffer_scale:new s.Uniform1f(m,i.u_buffer_scale),u_fade_t:new s.Uniform1f(m,i.u_fade_t),u_opacity:new s.Uniform1f(m,i.u_opacity),u_image0:new s.Uniform1i(m,i.u_image0),u_image1:new s.Uniform1i(m,i.u_image1),u_brightness_low:new s.Uniform1f(m,i.u_brightness_low),u_brightness_high:new s.Uniform1f(m,i.u_brightness_high),u_saturation_factor:new s.Uniform1f(m,i.u_saturation_factor),u_contrast_factor:new s.Uniform1f(m,i.u_contrast_factor),u_spin_weights:new s.Uniform3f(m,i.u_spin_weights)}),symbolIcon:(m,i)=>({u_is_size_zoom_constant:new s.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(m,i.u_size_t),u_size:new s.Uniform1f(m,i.u_size),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(m,i.u_pitch),u_rotate_symbol:new s.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(m,i.u_fade_change),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new s.Uniform1i(m,i.u_is_text),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_texsize:new s.Uniform2f(m,i.u_texsize),u_texture:new s.Uniform1i(m,i.u_texture)}),symbolSDF:(m,i)=>({u_is_size_zoom_constant:new s.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(m,i.u_size_t),u_size:new s.Uniform1f(m,i.u_size),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(m,i.u_pitch),u_rotate_symbol:new s.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(m,i.u_fade_change),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new s.Uniform1i(m,i.u_is_text),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_texsize:new s.Uniform2f(m,i.u_texsize),u_texture:new s.Uniform1i(m,i.u_texture),u_gamma_scale:new s.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(m,i.u_is_halo)}),symbolTextAndIcon:(m,i)=>({u_is_size_zoom_constant:new s.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new s.Uniform1f(m,i.u_size_t),u_size:new s.Uniform1f(m,i.u_size),u_camera_to_center_distance:new s.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new s.Uniform1f(m,i.u_pitch),u_rotate_symbol:new s.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new s.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new s.Uniform1f(m,i.u_fade_change),u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new s.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new s.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new s.Uniform1i(m,i.u_is_text),u_pitch_with_map:new s.Uniform1i(m,i.u_pitch_with_map),u_texsize:new s.Uniform2f(m,i.u_texsize),u_texsize_icon:new s.Uniform2f(m,i.u_texsize_icon),u_texture:new s.Uniform1i(m,i.u_texture),u_texture_icon:new s.Uniform1i(m,i.u_texture_icon),u_gamma_scale:new s.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new s.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new s.Uniform1i(m,i.u_is_halo)}),background:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_opacity:new s.Uniform1f(m,i.u_opacity),u_color:new s.UniformColor(m,i.u_color)}),backgroundPattern:(m,i)=>({u_matrix:new s.UniformMatrix4f(m,i.u_matrix),u_opacity:new s.Uniform1f(m,i.u_opacity),u_image:new s.Uniform1i(m,i.u_image),u_pattern_tl_a:new s.Uniform2f(m,i.u_pattern_tl_a),u_pattern_br_a:new s.Uniform2f(m,i.u_pattern_br_a),u_pattern_tl_b:new s.Uniform2f(m,i.u_pattern_tl_b),u_pattern_br_b:new s.Uniform2f(m,i.u_pattern_br_b),u_texsize:new s.Uniform2f(m,i.u_texsize),u_mix:new s.Uniform1f(m,i.u_mix),u_pattern_size_a:new s.Uniform2f(m,i.u_pattern_size_a),u_pattern_size_b:new s.Uniform2f(m,i.u_pattern_size_b),u_scale_a:new s.Uniform1f(m,i.u_scale_a),u_scale_b:new s.Uniform1f(m,i.u_scale_b),u_pixel_coord_upper:new s.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.Uniform2f(m,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.Uniform1f(m,i.u_tile_units_to_pixels)})};class Al{constructor(i,u,d){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=Boolean(d),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ku={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Mu{constructor(i,u,d,y){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let d=0;d<this.attributes.length;d++){const y=u.attributes[this.attributes[d].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,u,d){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],P=u.attributes[b.name];P!==void 0&&i.vertexAttribPointer(P,b.components,i[ku[b.type]],!1,this.itemSize,b.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class jn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ga extends jn{getDefault(){return s.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Wa extends jn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Il extends jn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class si extends jn{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Pl extends jn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Za extends jn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Is extends jn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class kl extends jn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Ml extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ps extends jn{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ks extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class zl extends jn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class ya extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class zu extends jn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Lu extends jn{getDefault(){return s.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class va extends jn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class rh extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class ih extends jn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class oh extends jn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ou extends jn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Ll extends jn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class ah extends jn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ol extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Rl extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class xa extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Fl extends jn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ru extends jn{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Bl extends jn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class Uo extends jn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Fu extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class io extends jn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Vo extends jn{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class $o extends Vo{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ms extends Vo{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Mn{constructor(i,u,d,y){this.context=i,this.width=u,this.height=d;const b=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new $o(i,b),y&&(this.depthAttachment=new Ms(i,b))}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&i.deleteRenderbuffer(d)}i.deleteFramebuffer(this.framebuffer)}}class dr{constructor(i,u,d){this.blendFunction=i,this.blendColor=u,this.mask=d}}dr.Replace=[1,0],dr.disabled=new dr(dr.Replace,s.Color.transparent,[!1,!1,!1,!1]),dr.unblended=new dr(dr.Replace,s.Color.transparent,[!0,!0,!0,!0]),dr.alphaBlended=new dr([1,771],s.Color.transparent,[!0,!0,!0,!0]);class sh{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ga(this),this.clearDepth=new Wa(this),this.clearStencil=new Il(this),this.colorMask=new si(this),this.depthMask=new Pl(this),this.stencilMask=new Za(this),this.stencilFunc=new Is(this),this.stencilOp=new kl(this),this.stencilTest=new Ml(this),this.depthRange=new Ps(this),this.depthTest=new ks(this),this.depthFunc=new zl(this),this.blend=new ya(this),this.blendFunc=new zu(this),this.blendColor=new Lu(this),this.blendEquation=new va(this),this.cullFace=new rh(this),this.cullFaceSide=new ih(this),this.frontFace=new oh(this),this.program=new Ou(this),this.activeTexture=new Ll(this),this.viewport=new ah(this),this.bindFramebuffer=new Ol(this),this.bindRenderbuffer=new Rl(this),this.bindTexture=new xa(this),this.bindVertexBuffer=new Fl(this),this.bindElementBuffer=new Ru(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Bl(this),this.pixelStoreUnpack=new Uo(this),this.pixelStoreUnpackPremultiplyAlpha=new Fu(this),this.pixelStoreUnpackFlipY=new io(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Al(this,i,u)}createVertexBuffer(i,u,d){return new Mu(this,i,u,d)}createRenderbuffer(i,u,d){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,i,u,d),this.bindRenderbuffer.set(null),b}createFramebuffer(i,u,d){return new Mn(this,i,u,d)}clear({color:i,depth:u}){const d=this.gl;let y=0;i&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){S(i.blendFunction,dr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Dn{constructor(i,u,d){this.func=i,this.mask=u,this.range=d}}Dn.ReadOnly=!1,Dn.ReadWrite=!0,Dn.disabled=new Dn(519,Dn.ReadOnly,[0,1]);const Go=7680;class or{constructor(i,u,d,y,b,P){this.test=i,this.ref=u,this.mask=d,this.fail=y,this.depthFail=b,this.pass=P}}or.disabled=new or({func:519,mask:0},0,0,Go,Go,Go);class pr{constructor(i,u,d){this.enable=i,this.mode=u,this.frontFace=d}}let wo;function Bu(m,i,u,d,y,b,P){const L=m.context,j=L.gl,Y=m.useProgram("collisionBox"),ae=[];let he=0,Ee=0;for(let Ye=0;Ye<d.length;Ye++){const ct=d[Ye],rt=i.getTile(ct),ut=rt.getBucket(u);if(!ut)continue;let xt=ct.posMatrix;y[0]===0&&y[1]===0||(xt=m.translatePosMatrix(ct.posMatrix,rt,y,b));const St=P?ut.textCollisionBox:ut.iconCollisionBox,gt=ut.collisionCircleArray;if(gt.length>0){const Kt=s.create(),Ft=xt;s.mul(Kt,ut.placementInvProjMatrix,m.transform.glCoordMatrix),s.mul(Kt,Kt,ut.placementViewportMatrix),ae.push({circleArray:gt,circleOffset:Ee,transform:Ft,invTransform:Kt}),he+=gt.length/4,Ee=he}St&&Y.draw(L,j.LINES,Dn.disabled,or.disabled,m.colorModeForRenderPass(),pr.disabled,Va(xt,m.transform,rt),u.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,null,m.transform.zoom,null,null,St.collisionVertexBuffer)}if(!P||!ae.length)return;const ze=m.useProgram("collisionCircle"),Se=new s.CollisionCircleLayoutArray;Se.resize(4*he),Se._trim();let Fe=0;for(const Ye of ae)for(let ct=0;ct<Ye.circleArray.length/4;ct++){const rt=4*ct,ut=Ye.circleArray[rt+0],xt=Ye.circleArray[rt+1],St=Ye.circleArray[rt+2],gt=Ye.circleArray[rt+3];Se.emplace(Fe++,ut,xt,St,gt,0),Se.emplace(Fe++,ut,xt,St,gt,1),Se.emplace(Fe++,ut,xt,St,gt,2),Se.emplace(Fe++,ut,xt,St,gt,3)}(!wo||wo.length<2*he)&&(wo=function(Ye){const ct=2*Ye,rt=new s.QuadTriangleArray;rt.resize(ct),rt._trim();for(let ut=0;ut<ct;ut++){const xt=6*ut;rt.uint16[xt+0]=4*ut+0,rt.uint16[xt+1]=4*ut+1,rt.uint16[xt+2]=4*ut+2,rt.uint16[xt+3]=4*ut+2,rt.uint16[xt+4]=4*ut+3,rt.uint16[xt+5]=4*ut+0}return rt}(he));const $e=L.createIndexBuffer(wo,!0),We=L.createVertexBuffer(Se,s.collisionCircleLayout.members,!0);for(const Ye of ae){const ct={u_matrix:Ye.transform,u_inv_matrix:Ye.invTransform,u_camera_to_center_distance:(Je=m.transform).cameraToCenterDistance,u_viewport_size:[Je.width,Je.height]};ze.draw(L,j.TRIANGLES,Dn.disabled,or.disabled,m.colorModeForRenderPass(),pr.disabled,ct,u.id,We,$e,s.SegmentVector.simpleSegment(0,2*Ye.circleOffset,Ye.circleArray.length,Ye.circleArray.length/2),null,m.transform.zoom,null,null,null)}var Je;We.destroy(),$e.destroy()}pr.disabled=new pr(!1,1029,2305),pr.backCCW=new pr(!0,1029,2305);const jl=s.identity(new Float32Array(16));function Ho(m,i,u,d,y,b){const{horizontalAlign:P,verticalAlign:L}=s.getAnchorAlignment(m),j=-(P-.5)*i,Y=-(L-.5)*u,ae=s.evaluateVariableOffset(m,d);return new s.pointGeometry((j/y+ae[0])*b,(Y/y+ae[1])*b)}function Xa(m,i,u,d,y,b,P,L,j,Y,ae){const he=m.text.placedSymbolArray,Ee=m.text.dynamicLayoutVertexArray,ze=m.icon.dynamicLayoutVertexArray,Se={};Ee.clear();for(let Fe=0;Fe<he.length;Fe++){const $e=he.get(Fe),We=m.allowVerticalPlacement&&!$e.placedOrientation,Je=$e.hidden||!$e.crossTileID||We?null:d[$e.crossTileID];if(Je){const Ye=new s.pointGeometry($e.anchorX,$e.anchorY),ct=ft(Ye,u?L:P),rt=Mt(b.cameraToCenterDistance,ct.signedDistanceFromCamera);let ut=y.evaluateSizeForFeature(m.textSizeData,Y,$e)*rt/s.ONE_EM;u&&(ut*=m.tilePixelRatio/j);const{width:xt,height:St,anchor:gt,textOffset:Kt,textBoxScale:Ft}=Je,pn=Ho(gt,xt,St,Kt,Ft,ut),Vn=u?ft(Ye.add(pn),P).point:ct.point.add(i?pn.rotate(-b.angle):pn),Pn=m.allowVerticalPlacement&&$e.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let kn=0;kn<$e.numGlyphs;kn++)s.addDynamicAttributes(Ee,Vn,Pn);ae&&$e.associatedIconIndex>=0&&(Se[$e.associatedIconIndex]={shiftedAnchor:Vn,angle:Pn})}else Wt($e.numGlyphs,Ee)}if(ae){ze.clear();const Fe=m.icon.placedSymbolArray;for(let $e=0;$e<Fe.length;$e++){const We=Fe.get($e);if(We.hidden)Wt(We.numGlyphs,ze);else{const Je=Se[$e];if(Je)for(let Ye=0;Ye<We.numGlyphs;Ye++)s.addDynamicAttributes(ze,Je.shiftedAnchor,Je.angle);else Wt(We.numGlyphs,ze)}}m.icon.dynamicLayoutVertexBuffer.updateData(ze)}m.text.dynamicLayoutVertexBuffer.updateData(Ee)}function zs(m,i,u){return u.iconsInText&&i?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Ls(m,i,u,d,y,b,P,L,j,Y,ae,he){const Ee=m.context,ze=Ee.gl,Se=m.transform,Fe=L==="map",$e=j==="map",We=Fe&&u.layout.get("symbol-placement")!=="point",Je=Fe&&!$e&&!We,Ye=!u.layout.get("symbol-sort-key").isConstant();let ct=!1;const rt=m.depthModeForSublayer(0,Dn.ReadOnly),ut=u.layout.get("text-variable-anchor"),xt=[];for(const St of d){const gt=i.getTile(St),Kt=gt.getBucket(u);if(!Kt)continue;const Ft=y?Kt.text:Kt.icon;if(!Ft||!Ft.segments.get().length)continue;const pn=Ft.programConfigurations.get(u.id),Vn=y||Kt.sdfIcons,Pn=y?Kt.textSizeData:Kt.iconSizeData,kn=$e||Se.pitch!==0,br=m.useProgram(zs(Vn,y,Kt),pn),vn=s.evaluateSizeForZoom(Pn,Se.zoom);let On,mr,Kr,Li,Oi=[0,0],lo=null;if(y){if(mr=gt.glyphAtlasTexture,Kr=ze.LINEAR,On=gt.glyphAtlasTexture.size,Kt.iconsInText){Oi=gt.imageAtlasTexture.size,lo=gt.imageAtlasTexture;const ts=Pn.kind==="composite"||Pn.kind==="camera";Li=kn||m.options.rotating||m.options.zooming||ts?ze.LINEAR:ze.NEAREST}}else{const ts=u.layout.get("icon-size").constantOr(0)!==1||Kt.iconsNeedLinear;mr=gt.imageAtlasTexture,Kr=Vn||m.options.rotating||m.options.zooming||ts||kn?ze.LINEAR:ze.NEAREST,On=gt.imageAtlasTexture.size}const Ri=Ln(gt,1,m.transform.zoom),uo=Cn(St.posMatrix,$e,Fe,m.transform,Ri),Sa=fn(St.posMatrix,$e,Fe,m.transform,Ri),Qa=ut&&Kt.hasTextData(),Yn=u.layout.get("icon-text-fit")!=="none"&&Qa&&Kt.hasIconData();We&&Ar(Kt,St.posMatrix,m,y,uo,Sa,$e,Y);const Gr=m.translatePosMatrix(St.posMatrix,gt,b,P),Un=We||y&&ut||Yn?jl:uo,zr=m.translatePosMatrix(Sa,gt,b,P,!0),Fi=Vn&&u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let lr;lr=Vn?Kt.iconsInText?nh(Pn.kind,vn,Je,$e,m,Gr,Un,zr,On,Oi):Sl(Pn.kind,vn,Je,$e,m,Gr,Un,zr,y,On,!0):El(Pn.kind,vn,Je,$e,m,Gr,Un,zr,y,On);const es={program:br,buffers:Ft,uniformValues:lr,atlasTexture:mr,atlasTextureIcon:lo,atlasInterpolation:Kr,atlasInterpolationIcon:Li,isSDF:Vn,hasHalo:Fi};if(Ye&&Kt.canOverlap){ct=!0;const ts=Ft.segments.get();for(const js of ts)xt.push({segments:new s.SegmentVector([js]),sortKey:js.sortKey,state:es})}else xt.push({segments:Ft.segments,sortKey:0,state:es})}ct&&xt.sort((St,gt)=>St.sortKey-gt.sortKey);for(const St of xt){const gt=St.state;if(Ee.activeTexture.set(ze.TEXTURE0),gt.atlasTexture.bind(gt.atlasInterpolation,ze.CLAMP_TO_EDGE),gt.atlasTextureIcon&&(Ee.activeTexture.set(ze.TEXTURE1),gt.atlasTextureIcon&&gt.atlasTextureIcon.bind(gt.atlasInterpolationIcon,ze.CLAMP_TO_EDGE)),gt.isSDF){const Kt=gt.uniformValues;gt.hasHalo&&(Kt.u_is_halo=1,Dl(gt.buffers,St.segments,u,m,gt.program,rt,ae,he,Kt)),Kt.u_is_halo=0}Dl(gt.buffers,St.segments,u,m,gt.program,rt,ae,he,gt.uniformValues)}}function Dl(m,i,u,d,y,b,P,L,j){const Y=d.context;y.draw(Y,Y.gl.TRIANGLES,b,P,L,pr.disabled,j,u.id,m.layoutVertexBuffer,m.indexBuffer,i,u.paint,d.transform.zoom,m.programConfigurations.get(u.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Eo(m,i,u,d,y,b,P){const L=m.context.gl,j=u.paint.get("fill-pattern"),Y=j&&j.constantOr(1),ae=u.getCrossfadeParameters();let he,Ee,ze,Se,Fe;P?(Ee=Y&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=L.LINES):(Ee=Y?"fillPattern":"fill",he=L.TRIANGLES);for(const $e of d){const We=i.getTile($e);if(Y&&!We.patternsLoaded())continue;const Je=We.getBucket(u);if(!Je)continue;const Ye=Je.programConfigurations.get(u.id),ct=m.useProgram(Ee,Ye);Y&&(m.context.activeTexture.set(L.TEXTURE0),We.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ye.updatePaintBuffers(ae));const rt=j.constantOr(null);if(rt&&We.imageAtlas){const xt=We.imageAtlas,St=xt.patternPositions[rt.to.toString()],gt=xt.patternPositions[rt.from.toString()];St&&gt&&Ye.setConstantPatternPositions(St,gt)}const ut=m.translatePosMatrix($e.posMatrix,We,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(P){Se=Je.indexBuffer2,Fe=Je.segments2;const xt=[L.drawingBufferWidth,L.drawingBufferHeight];ze=Ee==="fillOutlinePattern"&&Y?Vr(ut,m,ae,We,xt):Iu(ut,xt)}else Se=Je.indexBuffer,Fe=Je.segments,ze=Y?_l(ut,m,ae,We):pa(ut);ct.draw(m.context,he,y,m.stencilModeForClipping($e),b,pr.disabled,ze,u.id,Je.layoutVertexBuffer,Se,Fe,u.paint,m.transform.zoom,Ye)}}function yi(m,i,u,d,y,b,P){const L=m.context,j=L.gl,Y=u.paint.get("fill-extrusion-pattern"),ae=Y.constantOr(1),he=u.getCrossfadeParameters(),Ee=u.paint.get("fill-extrusion-opacity");for(const ze of d){const Se=i.getTile(ze),Fe=Se.getBucket(u);if(!Fe)continue;const $e=Fe.programConfigurations.get(u.id),We=m.useProgram(ae?"fillExtrusionPattern":"fillExtrusion",$e);ae&&(m.context.activeTexture.set(j.TEXTURE0),Se.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),$e.updatePaintBuffers(he));const Je=Y.constantOr(null);if(Je&&Se.imageAtlas){const ut=Se.imageAtlas,xt=ut.patternPositions[Je.to.toString()],St=ut.patternPositions[Je.from.toString()];xt&&St&&$e.setConstantPatternPositions(xt,St)}const Ye=m.translatePosMatrix(ze.posMatrix,Se,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ct=u.paint.get("fill-extrusion-vertical-gradient"),rt=ae?Au(Ye,m,ct,Ee,ze,he,Se):Es(Ye,m,ct,Ee);We.draw(L,L.gl.TRIANGLES,y,b,P,pr.backCCW,rt,u.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,u.paint,m.transform.zoom,$e)}}function Pi(m,i,u,d,y,b){const P=m.context,L=P.gl,j=i.fbo;if(!j)return;const Y=m.useProgram("hillshade");P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,j.colorAttachment.get());const ae=((he,Ee,ze)=>{const Se=ze.paint.get("hillshade-shadow-color"),Fe=ze.paint.get("hillshade-highlight-color"),$e=ze.paint.get("hillshade-accent-color");let We=ze.paint.get("hillshade-illumination-direction")*(Math.PI/180);ze.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=he.transform.angle);const Je=!he.options.moving;return{u_matrix:he.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Ts(0,Ee.tileID),u_light:[ze.paint.get("hillshade-exaggeration"),We],u_shadow:Se,u_highlight:Fe,u_accent:$e}})(m,i,u);Y.draw(P,L.TRIANGLES,d,y,b,pr.disabled,ae,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function Nl(m,i,u,d,y,b){const P=m.context,L=P.gl,j=i.dem;if(j&&j.data){const Y=j.dim,ae=j.stride,he=j.getPixels();if(P.activeTexture.set(L.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||m.getTileTexture(ae),i.demTexture){const ze=i.demTexture;ze.update(he,{premultiply:!1}),ze.bind(L.NEAREST,L.CLAMP_TO_EDGE)}else i.demTexture=new ne(P,he,L.RGBA,{premultiply:!1}),i.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE);P.activeTexture.set(L.TEXTURE0);let Ee=i.fbo;if(!Ee){const ze=new ne(P,{width:Y,height:Y,data:null},L.RGBA);ze.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ee=i.fbo=P.createFramebuffer(Y,Y,!0),Ee.colorAttachment.set(ze.texture)}P.bindFramebuffer.set(Ee.framebuffer),P.viewport.set([0,0,Y,Y]),m.useProgram("hillshadePrepare").draw(P,L.TRIANGLES,d,y,b,pr.disabled,((ze,Se)=>{const Fe=Se.stride,$e=s.create();return s.ortho($e,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate($e,$e,[0,-s.EXTENT,0]),{u_matrix:$e,u_image:1,u_dimension:[Fe,Fe],u_zoom:ze.overscaledZ,u_unpack:Se.getUnpackVector()}})(i.tileID,j),u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ya(m,i,u,d,y){const b=d.paint.get("raster-fade-duration");if(b>0){const P=s.exported.now(),L=(P-m.timeAdded)/b,j=i?(P-i.timeAdded)/b:-1,Y=u.getSource(),ae=y.coveringZoomLevel({tileSize:Y.tileSize,roundZoom:Y.roundZoom}),he=!i||Math.abs(i.tileID.overscaledZ-ae)>Math.abs(m.tileID.overscaledZ-ae),Ee=he&&m.refreshedUponExpiration?1:s.clamp(he?L:1-j,0,1);return m.refreshedUponExpiration&&L>=1&&(m.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Ee}:{opacity:Ee,mix:0}}return{opacity:1,mix:0}}const ju=new s.Color(1,0,0,1),ki=new s.Color(0,1,0,1),oo=new s.Color(0,0,1,1),$r=new s.Color(1,0,1,1),Wo=new s.Color(0,1,1,1);function _a(m,i,u,d){Ka(m,0,i+u/2,m.transform.width,u,d)}function Os(m,i,u,d){Ka(m,i-u/2,0,u,m.transform.height,d)}function Ka(m,i,u,d,y,b){const P=m.context,L=P.gl;L.enable(L.SCISSOR_TEST),L.scissor(i*m.pixelRatio,u*m.pixelRatio,d*m.pixelRatio,y*m.pixelRatio),P.clear({color:b}),L.disable(L.SCISSOR_TEST)}function Zo(m,i,u){const d=m.context,y=d.gl,b=u.posMatrix,P=m.useProgram("debug"),L=Dn.disabled,j=or.disabled,Y=m.colorModeForRenderPass(),ae="$debug";d.activeTexture.set(y.TEXTURE0),m.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),P.draw(d,y.LINE_STRIP,L,j,Y,pr.disabled,$a(b,s.Color.red),ae,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);const he=i.getTileByID(u.key).latestRawTileData,Ee=Math.floor((he&&he.byteLength||0)/1024),ze=i.getTile(u).tileSize,Se=512/Math.min(ze,512)*(u.overscaledZ/m.transform.zoom)*.5;let Fe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Fe+=` => ${u.overscaledZ}`),function($e,We){$e.initDebugOverlayCanvas();const Je=$e.debugOverlayCanvas,Ye=$e.context.gl,ct=$e.debugOverlayCanvas.getContext("2d");ct.clearRect(0,0,Je.width,Je.height),ct.shadowColor="white",ct.shadowBlur=2,ct.lineWidth=1.5,ct.strokeStyle="white",ct.textBaseline="top",ct.font="bold 36px Open Sans, sans-serif",ct.fillText(We,5,5),ct.strokeText(We,5,5),$e.debugOverlayTexture.update(Je),$e.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(m,`${Fe} ${Ee}kb`),P.draw(d,y.TRIANGLES,L,j,dr.alphaBlended,pr.disabled,$a(b,s.Color.transparent,Se),ae,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}const Xo={symbol:function(m,i,u,d,y){if(m.renderPass!=="translucent")return;const b=or.disabled,P=m.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(L,j,Y,ae,he,Ee,ze){const Se=j.transform,Fe=he==="map",$e=Ee==="map";for(const We of L){const Je=ae.getTile(We),Ye=Je.getBucket(Y);if(!Ye||!Ye.text||!Ye.text.segments.get().length)continue;const ct=s.evaluateSizeForZoom(Ye.textSizeData,Se.zoom),rt=Ln(Je,1,j.transform.zoom),ut=Cn(We.posMatrix,$e,Fe,j.transform,rt),xt=Y.layout.get("icon-text-fit")!=="none"&&Ye.hasIconData();if(ct){const St=Math.pow(2,Se.zoom-Je.tileID.overscaledZ);Xa(Ye,Fe,$e,ze,s.symbolSize,Se,ut,We.posMatrix,St,ct,xt)}}}(d,m,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),y),u.paint.get("icon-opacity").constantOr(1)!==0&&Ls(m,i,u,d,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),b,P),u.paint.get("text-opacity").constantOr(1)!==0&&Ls(m,i,u,d,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),b,P),i.map.showCollisionBoxes&&(Bu(m,i,u,d,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Bu(m,i,u,d,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(m,i,u,d){if(m.renderPass!=="translucent")return;const y=u.paint.get("circle-opacity"),b=u.paint.get("circle-stroke-width"),P=u.paint.get("circle-stroke-opacity"),L=!u.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(b.constantOr(1)===0||P.constantOr(1)===0))return;const j=m.context,Y=j.gl,ae=m.depthModeForSublayer(0,Dn.ReadOnly),he=or.disabled,Ee=m.colorModeForRenderPass(),ze=[];for(let Se=0;Se<d.length;Se++){const Fe=d[Se],$e=i.getTile(Fe),We=$e.getBucket(u);if(!We)continue;const Je=We.programConfigurations.get(u.id),Ye={programConfiguration:Je,program:m.useProgram("circle",Je),layoutVertexBuffer:We.layoutVertexBuffer,indexBuffer:We.indexBuffer,uniformValues:Ss(m,Fe,$e,u)};if(L){const ct=We.segments.get();for(const rt of ct)ze.push({segments:new s.SegmentVector([rt]),sortKey:rt.sortKey,state:Ye})}else ze.push({segments:We.segments,sortKey:0,state:Ye})}L&&ze.sort((Se,Fe)=>Se.sortKey-Fe.sortKey);for(const Se of ze){const{programConfiguration:Fe,program:$e,layoutVertexBuffer:We,indexBuffer:Je,uniformValues:Ye}=Se.state;$e.draw(j,Y.TRIANGLES,ae,he,Ee,pr.disabled,Ye,u.id,We,Je,Se.segments,u.paint,m.transform.zoom,Fe)}},heatmap:function(m,i,u,d){if(u.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const y=m.context,b=y.gl,P=or.disabled,L=new dr([b.ONE,b.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(j,Y,ae){const he=j.gl;j.activeTexture.set(he.TEXTURE1),j.viewport.set([0,0,Y.width/4,Y.height/4]);let Ee=ae.heatmapFbo;if(Ee)he.bindTexture(he.TEXTURE_2D,Ee.colorAttachment.get()),j.bindFramebuffer.set(Ee.framebuffer);else{const ze=he.createTexture();he.bindTexture(he.TEXTURE_2D,ze),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,he.LINEAR),Ee=ae.heatmapFbo=j.createFramebuffer(Y.width/4,Y.height/4,!1),function(Se,Fe,$e,We){const Je=Se.gl;Je.texImage2D(Je.TEXTURE_2D,0,Je.RGBA,Fe.width/4,Fe.height/4,0,Je.RGBA,Se.extRenderToTextureHalfFloat?Se.extTextureHalfFloat.HALF_FLOAT_OES:Je.UNSIGNED_BYTE,null),We.colorAttachment.set($e)}(j,Y,ze,Ee)}})(y,m,u),y.clear({color:s.Color.transparent});for(let j=0;j<d.length;j++){const Y=d[j];if(i.hasRenderableParent(Y))continue;const ae=i.getTile(Y),he=ae.getBucket(u);if(!he)continue;const Ee=he.programConfigurations.get(u.id),ze=m.useProgram("heatmap",Ee),{zoom:Se}=m.transform;ze.draw(y,b.TRIANGLES,Dn.disabled,P,L,pr.disabled,Cs(Y.posMatrix,ae,Se,u.paint.get("heatmap-intensity")),u.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,u.paint,m.transform.zoom,Ee)}y.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(y,b){const P=y.context,L=P.gl,j=b.heatmapFbo;if(!j)return;P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,j.colorAttachment.get()),P.activeTexture.set(L.TEXTURE1);let Y=b.colorRampTexture;Y||(Y=b.colorRampTexture=new ne(P,b.colorRamp,L.RGBA)),Y.bind(L.LINEAR,L.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(P,L.TRIANGLES,Dn.disabled,or.disabled,y.colorModeForRenderPass(),pr.disabled,((ae,he,Ee,ze)=>{const Se=s.create();s.ortho(Se,0,ae.width,ae.height,0,0,1);const Fe=ae.context.gl;return{u_matrix:Se,u_world:[Fe.drawingBufferWidth,Fe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:he.paint.get("heatmap-opacity")}})(y,b),b.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,b.paint,y.transform.zoom)}(m,u))},line:function(m,i,u,d){if(m.renderPass!=="translucent")return;const y=u.paint.get("line-opacity"),b=u.paint.get("line-width");if(y.constantOr(1)===0||b.constantOr(1)===0)return;const P=m.depthModeForSublayer(0,Dn.ReadOnly),L=m.colorModeForRenderPass(),j=u.paint.get("line-dasharray"),Y=u.paint.get("line-pattern"),ae=Y.constantOr(1),he=u.paint.get("line-gradient"),Ee=u.getCrossfadeParameters(),ze=ae?"linePattern":j?"lineSDF":he?"lineGradient":"line",Se=m.context,Fe=Se.gl;let $e=!0;for(const We of d){const Je=i.getTile(We);if(ae&&!Je.patternsLoaded())continue;const Ye=Je.getBucket(u);if(!Ye)continue;const ct=Ye.programConfigurations.get(u.id),rt=m.context.program.get(),ut=m.useProgram(ze,ct),xt=$e||ut.program!==rt,St=Y.constantOr(null);if(St&&Je.imageAtlas){const Kt=Je.imageAtlas,Ft=Kt.patternPositions[St.to.toString()],pn=Kt.patternPositions[St.from.toString()];Ft&&pn&&ct.setConstantPatternPositions(Ft,pn)}const gt=ae?ir(m,Je,u,Ee):j?As(m,Je,u,j,Ee):he?ma(m,Je,u,Ye.lineClipsArray.length):_o(m,Je,u);if(ae)Se.activeTexture.set(Fe.TEXTURE0),Je.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),ct.updatePaintBuffers(Ee);else if(j&&(xt||m.lineAtlas.dirty))Se.activeTexture.set(Fe.TEXTURE0),m.lineAtlas.bind(Se);else if(he){const Kt=Ye.gradients[u.id];let Ft=Kt.texture;if(u.gradientVersion!==Kt.version){let pn=256;if(u.stepInterpolant){const Vn=i.getSource().maxzoom,Pn=We.canonical.z===Vn?Math.ceil(1<<m.transform.maxZoom-We.canonical.z):1;pn=s.clamp(s.nextPowerOfTwo(Ye.maxLineLength/s.EXTENT*1024*Pn),256,Se.maxTextureSize)}Kt.gradient=s.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:pn,image:Kt.gradient||void 0,clips:Ye.lineClipsArray}),Kt.texture?Kt.texture.update(Kt.gradient):Kt.texture=new ne(Se,Kt.gradient,Fe.RGBA),Kt.version=u.gradientVersion,Ft=Kt.texture}Se.activeTexture.set(Fe.TEXTURE0),Ft.bind(u.stepInterpolant?Fe.NEAREST:Fe.LINEAR,Fe.CLAMP_TO_EDGE)}ut.draw(Se,Fe.TRIANGLES,P,m.stencilModeForClipping(We),L,pr.disabled,gt,u.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,u.paint,m.transform.zoom,ct,Ye.layoutVertexBuffer2),$e=!1}},fill:function(m,i,u,d){const y=u.paint.get("fill-color"),b=u.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const P=m.colorModeForRenderPass(),L=u.paint.get("fill-pattern"),j=m.opaquePassEnabledForLayer()&&!L.constantOr(1)&&y.constantOr(s.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===j){const Y=m.depthModeForSublayer(1,m.renderPass==="opaque"?Dn.ReadWrite:Dn.ReadOnly);Eo(m,i,u,d,Y,P,!1)}if(m.renderPass==="translucent"&&u.paint.get("fill-antialias")){const Y=m.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Dn.ReadOnly);Eo(m,i,u,d,Y,P,!0)}},"fill-extrusion":function(m,i,u,d){const y=u.paint.get("fill-extrusion-opacity");if(y!==0&&m.renderPass==="translucent"){const b=new Dn(m.context.gl.LEQUAL,Dn.ReadWrite,m.depthRangeFor3D);if(y!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))yi(m,i,u,d,b,or.disabled,dr.disabled),yi(m,i,u,d,b,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const P=m.colorModeForRenderPass();yi(m,i,u,d,b,or.disabled,P)}}},hillshade:function(m,i,u,d){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const y=m.context,b=m.depthModeForSublayer(0,Dn.ReadOnly),P=m.colorModeForRenderPass(),[L,j]=m.renderPass==="translucent"?m.stencilConfigForOverlap(d):[{},d];for(const Y of j){const ae=i.getTile(Y);ae.needsHillshadePrepare&&m.renderPass==="offscreen"?Nl(m,ae,u,b,or.disabled,P):m.renderPass==="translucent"&&Pi(m,ae,u,b,L[Y.overscaledZ],P)}y.viewport.set([0,0,m.width,m.height])},raster:function(m,i,u,d){if(m.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!d.length)return;const y=m.context,b=y.gl,P=i.getSource(),L=m.useProgram("raster"),j=m.colorModeForRenderPass(),[Y,ae]=P instanceof Pe?[{},d]:m.stencilConfigForOverlap(d),he=ae[ae.length-1].overscaledZ,Ee=!m.options.moving;for(const ze of ae){const Se=m.depthModeForSublayer(ze.overscaledZ-he,u.paint.get("raster-opacity")===1?Dn.ReadWrite:Dn.ReadOnly,b.LESS),Fe=i.getTile(ze),$e=m.transform.calculatePosMatrix(ze.toUnwrapped(),Ee);Fe.registerFadeDuration(u.paint.get("raster-fade-duration"));const We=i.findLoadedParent(ze,0),Je=Ya(Fe,We,i,u,m.transform);let Ye,ct;const rt=u.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;y.activeTexture.set(b.TEXTURE0),Fe.texture.bind(rt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(b.TEXTURE1),We?(We.texture.bind(rt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),Ye=Math.pow(2,We.tileID.overscaledZ-Fe.tileID.overscaledZ),ct=[Fe.tileID.canonical.x*Ye%1,Fe.tileID.canonical.y*Ye%1]):Fe.texture.bind(rt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const ut=Pu($e,ct||[0,0],Ye||1,Je,u);P instanceof Pe?L.draw(y,b.TRIANGLES,Se,or.disabled,j,pr.disabled,ut,u.id,P.boundsBuffer,m.quadTriangleIndexBuffer,P.boundsSegments):L.draw(y,b.TRIANGLES,Se,Y[ze.overscaledZ],j,pr.disabled,ut,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,i,u){const d=u.paint.get("background-color"),y=u.paint.get("background-opacity");if(y===0)return;const b=m.context,P=b.gl,L=m.transform,j=L.tileSize,Y=u.paint.get("background-pattern");if(m.isPatternMissing(Y))return;const ae=!Y&&d.a===1&&y===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==ae)return;const he=or.disabled,Ee=m.depthModeForSublayer(0,ae==="opaque"?Dn.ReadWrite:Dn.ReadOnly),ze=m.colorModeForRenderPass(),Se=m.useProgram(Y?"backgroundPattern":"background"),Fe=L.coveringTiles({tileSize:j});Y&&(b.activeTexture.set(P.TEXTURE0),m.imageManager.bind(m.context));const $e=u.getCrossfadeParameters();for(const We of Fe){const Je=m.transform.calculatePosMatrix(We.toUnwrapped()),Ye=Y?Tl(Je,y,m,Y,{tileID:We,tileSize:j},$e):Cl(Je,y,d);Se.draw(b,P.TRIANGLES,Ee,he,ze,pr.disabled,Ye,u.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}},debug:function(m,i,u){for(let d=0;d<u.length;d++)Zo(m,i,u[d])},custom:function(m,i,u){const d=m.context,y=u.implementation;if(m.renderPass==="offscreen"){const b=y.prerender;b&&(m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),b.call(y,d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),d.setStencilMode(or.disabled);const b=y.renderingMode==="3d"?new Dn(m.context.gl.LEQUAL,Dn.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Dn.ReadOnly);d.setDepthMode(b),y.render(d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState(),d.bindFramebuffer.set(null)}}};class vi{constructor(i,u){this.context=new sh(i),this.transform=u,this._tileTextures={},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new bn,this.gpuTimers={}}resize(i,u,d){if(this.width=i*d,this.height=u*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,u=new s.PosArray;u.emplaceBack(0,0),u.emplaceBack(s.EXTENT,0),u.emplaceBack(0,s.EXTENT),u.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,xl.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const d=new s.PosArray;d.emplaceBack(0,0),d.emplaceBack(s.EXTENT,0),d.emplaceBack(0,s.EXTENT),d.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(d,xl.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const y=new s.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(s.EXTENT,0,s.EXTENT,0),y.emplaceBack(0,s.EXTENT,0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(y,Te.members),this.rasterBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const b=new s.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,xl.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const P=new s.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(P);const L=new s.TriangleIndexArray;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(L),this.emptyTexture=new ne(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const j=this.context.gl;this.stencilClearMode=new or({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=s.create();s.ortho(d,0,this.width,this.height,0,0,1),s.scale(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,Dn.disabled,this.stencilClearMode,dr.disabled,pr.disabled,Ga(d),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const d=this.context,y=d.gl;this.nextStencilID+u.length>256&&this.clearStencil(),d.setColorMode(dr.disabled),d.setDepthMode(Dn.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of u){const L=this._tileClippingMaskIDs[P.key]=this.nextStencilID++;b.draw(d,y.TRIANGLES,Dn.disabled,new or({func:y.ALWAYS,mask:0},L,255,y.KEEP,y.KEEP,y.REPLACE),dr.disabled,pr.disabled,Ga(P.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new or({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new or({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,d=i.sort((P,L)=>L.overscaledZ-P.overscaledZ),y=d[d.length-1].overscaledZ,b=d[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const P={};for(let L=0;L<b;L++)P[L+y]=new or({func:u.GEQUAL,mask:255},L+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[P,d]}return[{[y]:or.disabled},d]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new dr([i.CONSTANT_COLOR,i.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?dr.unblended:dr.alphaBlended}depthModeForSublayer(i,u,d){if(!this.opaquePassEnabledForLayer())return Dn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Dn(d||this.context.gl.LEQUAL,u,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const d=this.style._order,y=this.style.sourceCaches;for(const j in y){const Y=y[j];Y.used&&Y.prepare(this.context)}const b={},P={},L={};for(const j in y){const Y=y[j];b[j]=Y.getVisibleCoordinates(),P[j]=b[j].slice().reverse(),L[j]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<d.length;j++)if(this.style._layers[d[j]].is3D()){this.opaquePassCutoff=j;break}this.renderPass="offscreen";for(const j of d){const Y=this.style._layers[j];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const ae=P[Y.source];(Y.type==="custom"||ae.length)&&this.renderLayer(this,y[Y.source],Y,ae)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const j=this.style._layers[d[this.currentLayer]],Y=y[j.source],ae=b[j.source];this._renderTileClippingMasks(j,ae),this.renderLayer(this,Y,j,ae)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const j=this.style._layers[d[this.currentLayer]],Y=y[j.source],ae=(j.type==="symbol"?L:P)[j.source];this._renderTileClippingMasks(j,b[j.source]),this.renderLayer(this,Y,j,ae)}if(this.options.showTileBoundaries){let j,Y;Object.values(this.style._layers).forEach(ae=>{ae.source&&!ae.isHidden(this.transform.zoom)&&(ae.source!==(Y&&Y.id)&&(Y=this.style.sourceCaches[ae.source]),(!j||j.getSource().maxzoom<Y.getSource().maxzoom)&&(j=Y))}),j&&Xo.debug(this,j,j.getVisibleCoordinates())}this.options.showPadding&&function(j){const Y=j.transform.padding;_a(j,j.transform.height-(Y.top||0),3,ju),_a(j,Y.bottom||0,3,ki),Os(j,Y.left||0,3,oo),Os(j,j.transform.width-(Y.right||0),3,$r);const ae=j.transform.centerPoint;(function(he,Ee,ze,Se){Ka(he,Ee-1,ze-10,2,20,Se),Ka(he,Ee-10,ze-1,20,2,Se)})(j,ae.x,j.transform.height-ae.y,Wo)}(this),this.context.setDefault()}renderLayer(i,u,d,y){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||y.length)&&(this.id=d.id,this.gpuTimingStart(d),Xo[d.type](i,u,d,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let d=this.gpuTimers[i.id];d||(d=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),d.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,d.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const d in i){const y=i[d],b=this.context.extTimerQuery,P=b.getQueryObjectEXT(y.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(y.query),u[d]=P}return u}translatePosMatrix(i,u,d,y,b){if(!d[0]&&!d[1])return i;const P=b?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(P){const Y=Math.sin(P),ae=Math.cos(P);d=[d[0]*ae-d[1]*Y,d[0]*Y+d[1]*ae]}const L=G(b?d[0]:Ln(u,d[0],this.transform.zoom),b?d[1]:Ln(u,d[1],this.transform.zoom),0),j=new Float32Array(16);return s.translate(j,i,L),j}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),d=this.imageManager.getPattern(i.to.toString());return!u||!d}useProgram(i,u){this.cache=this.cache||{};const d=`${i}${u?u.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[d]||(this.cache[d]=new Cu(this.context,i,Ua[i],u,Ha[i],this._showOverdrawInspector)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ne(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ao{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,d){const y=Math.pow(2,d),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>s.transformMat4([],L,i)).map(L=>s.scale$1([],L,1/L[3]/u*y)),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const j=function(Ee,ze){var Se=ze[0],Fe=ze[1],$e=ze[2],We=Se*Se+Fe*Fe+$e*$e;return We>0&&(We=1/Math.sqrt(We)),Ee[0]=ze[0]*We,Ee[1]=ze[1]*We,Ee[2]=ze[2]*We,Ee}([],function(Ee,ze,Se){var Fe=ze[0],$e=ze[1],We=ze[2],Je=Se[0],Ye=Se[1],ct=Se[2];return Ee[0]=$e*ct-We*Ye,Ee[1]=We*Je-Fe*ct,Ee[2]=Fe*Ye-$e*Je,Ee}([],H([],b[L[0]],b[L[1]]),H([],b[L[2]],b[L[1]]))),Y=-((ae=j)[0]*(he=b[L[1]])[0]+ae[1]*he[1]+ae[2]*he[2]);var ae,he;return j.concat(Y)});return new ao(b,P)}}class Yo{constructor(i,u){this.min=i,this.max=u,this.center=function(d,y,b){return d[0]=.5*y[0],d[1]=.5*y[1],d[2]=.5*y[2],d}([],function(d,y,b){return d[0]=y[0]+b[0],d[1]=y[1]+b[1],d[2]=y[2]+b[2],d}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],d=X(this.min),y=X(this.max);for(let b=0;b<u.length;b++)d[b]=u[b]?this.min[b]:this.center[b],y[b]=u[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Yo(d,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let d=!0;for(let y=0;y<i.planes.length;y++){const b=i.planes[y];let P=0;for(let L=0;L<u.length;L++)s.dot(b,u[L])>=0&&P++;if(P===0)return 0;P!==u.length&&(d=!1)}if(d)return 2;for(let y=0;y<3;y++){let b=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let L=0;L<i.points.length;L++){const j=i.points[L][y]-this.min[y];b=Math.min(b,j),P=Math.max(P,j)}if(P<0||b>this.max[y]-this.min[y])return 0}return 1}}class So{constructor(i=0,u=0,d=0,y=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=d,this.right=y}interpolate(i,u,d){return u.top!=null&&i.top!=null&&(this.top=s.number(i.top,u.top,d)),u.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,u.bottom,d)),u.left!=null&&i.left!=null&&(this.left=s.number(i.left,u.left,d)),u.right!=null&&i.right!=null&&(this.right=s.number(i.right,u.right,d)),this}getCenter(i,u){const d=s.clamp((this.left+i-this.right)/2,0,i),y=s.clamp((this.top+u-this.bottom)/2,0,u);return new s.pointGeometry(d,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new So(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ko{constructor(i,u,d,y,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=d==null?0:d,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new So,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new Ko(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-s.wrap(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var d=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,y,b){var P=y[0],L=y[1],j=y[2],Y=y[3],ae=Math.sin(b),he=Math.cos(b);d[0]=P*he+j*ae,d[1]=L*he+Y*ae,d[2]=P*-ae+j*he,d[3]=L*-ae+Y*he}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,d){this._unmodified=!1,this._edgeInsets.interpolate(i,u,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new s.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const d=this.pointCoordinate(new s.pointGeometry(0,0)),y=this.pointCoordinate(new s.pointGeometry(this.width,0)),b=this.pointCoordinate(new s.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new s.pointGeometry(0,this.height)),L=Math.floor(Math.min(d.x,y.x,b.x,P.x)),j=Math.floor(Math.max(d.x,y.x,b.x,P.x)),Y=1;for(let ae=L-Y;ae<=j+Y;ae++)ae!==0&&u.push(new s.UnwrappedTileID(ae,i))}return u}coveringTiles(i){let u=this.coveringZoomLevel(i);const d=u;if(i.minzoom!==void 0&&u<i.minzoom)return[];i.maxzoom!==void 0&&u>i.maxzoom&&(u=i.maxzoom);const y=s.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,u),P=[b*y.x,b*y.y,0],L=ao.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u);let j=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(j=u);const Y=Se=>({aabb:new Yo([Se*b,0,0],[(Se+1)*b,b,0]),zoom:0,x:0,y:0,wrap:Se,fullyVisible:!1}),ae=[],he=[],Ee=u,ze=i.reparseOverscaled?d:u;if(this._renderWorldCopies)for(let Se=1;Se<=3;Se++)ae.push(Y(-Se)),ae.push(Y(Se));for(ae.push(Y(0));ae.length>0;){const Se=ae.pop(),Fe=Se.x,$e=Se.y;let We=Se.fullyVisible;if(!We){const ut=Se.aabb.intersects(L);if(ut===0)continue;We=ut===2}const Je=Se.aabb.distanceX(P),Ye=Se.aabb.distanceY(P),ct=Math.max(Math.abs(Je),Math.abs(Ye)),rt=3+(1<<Ee-Se.zoom)-2;if(Se.zoom===Ee||ct>rt&&Se.zoom>=j)he.push({tileID:new s.OverscaledTileID(Se.zoom===Ee?ze:Se.zoom,Se.wrap,Se.zoom,Fe,$e),distanceSq:$([P[0]-.5-Fe,P[1]-.5-$e])});else for(let ut=0;ut<4;ut++){const xt=(Fe<<1)+ut%2,St=($e<<1)+(ut>>1);ae.push({aabb:Se.aabb.quadrant(ut),zoom:Se.zoom+1,x:xt,y:St,wrap:Se.wrap,fullyVisible:We})}}return he.sort((Se,Fe)=>Se.distanceSq-Fe.distanceSq).map(Se=>Se.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=s.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.pointGeometry(s.mercatorXfromLng(i.lng)*this.worldSize,s.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new s.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,u){const d=this.pointCoordinate(u),y=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),P=new s.MercatorCoordinate(b.x-(d.x-y.x),b.y-(d.y-y.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return s.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const u=[i.x,i.y,0,1],d=[i.x,i.y,1,1];s.transformMat4(u,u,this.pixelMatrixInverse),s.transformMat4(d,d,this.pixelMatrixInverse);const y=u[3],b=d[3],P=u[1]/y,L=d[1]/b,j=u[2]/y,Y=d[2]/b,ae=j===Y?0:(0-j)/(Y-j);return new s.MercatorCoordinate(s.number(u[0]/y,d[0]/b,ae)/this.worldSize,s.number(P,L,ae)/this.worldSize)}coordinatePoint(i){const u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.transformMat4(u,u,this.pixelMatrix),new s.pointGeometry(u[0]/u[3],u[1]/u[3])}getBounds(){return new s.LngLatBounds().extend(this.pointLocation(new s.pointGeometry(0,0))).extend(this.pointLocation(new s.pointGeometry(this.width,0))).extend(this.pointLocation(new s.pointGeometry(this.width,this.height))).extend(this.pointLocation(new s.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new s.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const d=i.key,y=u?this._alignedPosMatrixCache:this._posMatrixCache;if(y[d])return y[d];const b=i.canonical,P=this.worldSize/this.zoomScale(b.z),L=b.x+Math.pow(2,b.z)*i.wrap,j=s.identity(new Float64Array(16));return s.translate(j,j,[L*P,b.y*P,0]),s.scale(j,j,[P/s.EXTENT,P/s.EXTENT,1]),s.multiply(j,u?this.alignedProjMatrix:this.projMatrix,j),y[d]=new Float32Array(j),y[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,d,y,b=-90,P=90,L=-180,j=180;const Y=this.size,ae=this._unmodified;if(this.latRange){const ze=this.latRange;b=s.mercatorYfromLat(ze[1])*this.worldSize,P=s.mercatorYfromLat(ze[0])*this.worldSize,i=P-b<Y.y?Y.y/(P-b):0}if(this.lngRange){const ze=this.lngRange;L=s.mercatorXfromLng(ze[0])*this.worldSize,j=s.mercatorXfromLng(ze[1])*this.worldSize,u=j-L<Y.x?Y.x/(j-L):0}const he=this.point,Ee=Math.max(u||0,i||0);if(Ee)return this.center=this.unproject(new s.pointGeometry(u?(j+L)/2:he.x,i?(P+b)/2:he.y)),this.zoom+=this.scaleZoom(Ee),this._unmodified=ae,void(this._constraining=!1);if(this.latRange){const ze=he.y,Se=Y.y/2;ze-Se<b&&(y=b+Se),ze+Se>P&&(y=P-Se)}if(this.lngRange){const ze=he.x,Se=Y.x/2;ze-Se<L&&(d=L+Se),ze+Se>j&&(d=j-Se)}d===void 0&&y===void 0||(this.center=this.unproject(new s.pointGeometry(d!==void 0?d:he.x,y!==void 0?y:he.y))),this._unmodified=ae,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const u=Math.PI/2+this._pitch,d=this._fov*(.5+i.y/this.height),y=Math.sin(d)*this.cameraToCenterDistance/Math.sin(s.clamp(Math.PI-u-d,.01,Math.PI-.01)),b=this.point,P=b.x,L=b.y,j=1.01*(Math.cos(Math.PI/2-this._pitch)*y+this.cameraToCenterDistance),Y=this.height/50;let ae=new Float64Array(16);s.perspective(ae,this._fov,this.width/this.height,Y,j),ae[8]=2*-i.x/this.width,ae[9]=2*i.y/this.height,s.scale(ae,ae,[1,-1,1]),s.translate(ae,ae,[0,0,-this.cameraToCenterDistance]),s.rotateX(ae,ae,this._pitch),s.rotateZ(ae,ae,this.angle),s.translate(ae,ae,[-P,-L,0]),this.mercatorMatrix=s.scale([],ae,G(this.worldSize,this.worldSize,this.worldSize)),s.scale(ae,ae,G(1,1,s.mercatorZfromAltitude(1,this.center.lat)*this.worldSize)),this.projMatrix=ae,this.invProjMatrix=s.invert([],this.projMatrix);const he=this.width%2/2,Ee=this.height%2/2,ze=Math.cos(this.angle),Se=Math.sin(this.angle),Fe=P-Math.round(P)+ze*he+Se*Ee,$e=L-Math.round(L)+ze*Ee+Se*he,We=new Float64Array(ae);if(s.translate(We,We,[Fe>.5?Fe-1:Fe,$e>.5?$e-1:$e,0]),this.alignedProjMatrix=We,ae=s.create(),s.scale(ae,ae,[this.width/2,-this.height/2,1]),s.translate(ae,ae,[1,-1,0]),this.labelPlaneMatrix=ae,ae=s.create(),s.scale(ae,ae,[1,-1,1]),s.translate(ae,ae,[-1,-1,0]),s.scale(ae,ae,[2/this.width,2/this.height,1]),this.glCoordMatrix=ae,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ae=s.invert(new Float64Array(16),this.pixelMatrix),!ae)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ae,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new s.pointGeometry(0,0)),u=s.fromValues(i.x*this.worldSize,i.y*this.worldSize,0,1);return s.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let d=u.x,y=u.y,b=u.x,P=u.y;for(const L of i)d=Math.min(d,L.x),y=Math.min(y,L.y),b=Math.max(b,L.x),P=Math.max(P,L.y);return[new s.pointGeometry(d,y),new s.pointGeometry(b,y),new s.pointGeometry(b,P),new s.pointGeometry(d,P),new s.pointGeometry(d,y)]}}}class Ul{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,d){let y=!1,b=null;const P=()=>{b=null,y&&(u(),b=setTimeout(P,300),y=!1)};return()=>(y=!0,b||P(),b)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),P=Math.round(u.lng*b)/b,L=Math.round(u.lat*b)/b,j=this._map.getBearing(),Y=this._map.getPitch();let ae="";if(ae+=i?`/${P}/${L}/${d}`:`${d}/${L}/${P}`,(j||Y)&&(ae+="/"+Math.round(10*j)/10),Y&&(ae+=`/${Math.round(Y)}`),this._hashName){const he=this._hashName;let Ee=!1;const ze=window.location.hash.slice(1).split("&").map(Se=>{const Fe=Se.split("=")[0];return Fe===he?(Ee=!0,`${Fe}=${ae}`):Se}).filter(Se=>Se);return Ee||ze.push(`${he}=${ae}`),`#${ze.join("&")}`}return`#${ae}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(u=d)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const ba={linearity:.3,easing:s.bezier(0,0,.3,1)},Vl=s.extend({deceleration:2500,maxSpeed:1400},ba),$l=s.extend({deceleration:20,maxSpeed:1400},ba),li=s.extend({deceleration:1e3,maxSpeed:360},ba),Gl=s.extend({deceleration:1e3,maxSpeed:90},ba);class Du{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=s.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new s.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)u.zoom+=b.zoomDelta||0,u.bearing+=b.bearingDelta||0,u.pitch+=b.pitchDelta||0,b.panDelta&&u.pan._add(b.panDelta),b.around&&(u.around=b.around),b.pinchAround&&(u.pinchAround=b.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const b=qo(u.pan.mag(),d,s.extend({},Vl,i||{}));y.offset=u.pan.mult(b.amount/u.pan.mag()),y.center=this._map.transform.center,wa(y,b)}if(u.zoom){const b=qo(u.zoom,d,$l);y.zoom=this._map.transform.zoom+b.amount,wa(y,b)}if(u.bearing){const b=qo(u.bearing,d,li);y.bearing=this._map.transform.bearing+s.clamp(b.amount,-179,179),wa(y,b)}if(u.pitch){const b=qo(u.pitch,d,Gl);y.pitch=this._map.transform.pitch+b.amount,wa(y,b)}if(y.zoom||y.bearing){const b=u.pinchAround===void 0?u.around:u.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.extend(y,{noMoveStart:!0})}}function wa(m,i){(!m.duration||m.duration<i.duration)&&(m.duration=i.duration,m.easing=i.easing)}function qo(m,i,u){const{maxSpeed:d,linearity:y,deceleration:b}=u,P=s.clamp(m*y/(i/1e3),-d,d),L=Math.abs(P)/(b*y);return{easing:u.easing,duration:1e3*L,amount:P*(L/2)}}class ar extends s.Event{constructor(i,u,d,y={}){const b=I.mousePos(u.getCanvasContainer(),d),P=u.unproject(b);super(i,s.extend({point:b,lngLat:P,originalEvent:d},y)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class qa extends s.Event{constructor(i,u,d){const y=i==="touchend"?d.changedTouches:d.touches,b=I.touchPos(u.getCanvasContainer(),y),P=b.map(j=>u.unproject(j)),L=b.reduce((j,Y,ae,he)=>j.add(Y.div(he.length)),new s.pointGeometry(0,0));super(i,{points:b,point:L,lngLats:P,lngLat:u.unproject(L),originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Co extends s.Event{constructor(i,u,d){super(i,{originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class N{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Co(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new ar(i.type,this._map,i))}mouseup(i){this._map.fire(new ar(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ar(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ar(i.type,this._map,i))}mouseover(i){this._map.fire(new ar(i.type,this._map,i))}mouseout(i){this._map.fire(new ar(i.type,this._map,i))}touchstart(i){return this._firePreventable(new qa(i.type,this._map,i))}touchmove(i){this._map.fire(new qa(i.type,this._map,i))}touchend(i){this._map.fire(new qa(i.type,this._map,i))}touchcancel(i){this._map.fire(new qa(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class de{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ar(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ar("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new ar(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Oe{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(I.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=I.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(y.x,d.x),P=Math.max(y.x,d.x),L=Math.min(y.y,d.y),j=Math.max(y.y,d.y);I.setTransform(this._box,`translate(${b}px,${L}px)`),this._box.style.width=P-b+"px",this._box.style.height=j-L+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const d=this._startPos,y=u;if(this.reset(),I.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(d,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new s.Event(i,{originalEvent:u}))}}function tt(m,i){const u={};for(let d=0;d<m.length;d++)u[m[d].identifier]=i[d];return u}class kt{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),d.length===this.numTouches&&(this.centroid=function(y){const b=new s.pointGeometry(0,0);for(const P of y)b._add(P);return b.div(y.length)}(u),this.touches=tt(d,u)))}touchmove(i,u,d){if(this.aborted||!this.centroid)return;const y=tt(d,u);for(const b in this.touches){const P=this.touches[b],L=y[b];(!L||L.dist(P)>30)&&(this.aborted=!0)}}touchend(i,u,d){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Ct{constructor(i){this.singleTap=new kt(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,d){this.singleTap.touchstart(i,u,d)}touchmove(i,u,d){this.singleTap.touchmove(i,u,d)}touchend(i,u,d){const y=this.singleTap.touchend(i,u,d);if(y){const b=i.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(y)<30;if(b&&P||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Xt{constructor(){this._zoomIn=new Ct({numTouches:1,numTaps:2}),this._zoomOut=new Ct({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,d){this._zoomIn.touchstart(i,u,d),this._zoomOut.touchstart(i,u,d)}touchmove(i,u,d){this._zoomIn.touchmove(i,u,d),this._zoomOut.touchmove(i,u,d)}touchend(i,u,d){const y=this._zoomIn.touchend(i,u,d),b=this._zoomOut.touchend(i,u,d);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(y)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Yt={0:1,2:2};class dn{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const d=I.mouseButton(i);this._correctButton(i,d)&&(this._lastPoint=u,this._eventButton=d)}mousemoveWindow(i,u){const d=this._lastPoint;if(d){if(i.preventDefault(),function(y,b){const P=Yt[b];return y.buttons===void 0||(y.buttons&P)!==P}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(d,u)}}mouseupWindow(i){this._lastPoint&&I.mouseButton(i)===this._eventButton&&(this._moved&&I.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _t extends dn{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class Nn extends dn{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const d=.8*(u.x-i.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(i){i.preventDefault()}}class Zn extends dn{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const d=-.5*(u.y-i.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(i){i.preventDefault()}}class er{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.pointGeometry(0,0)}touchstart(i,u,d){return this._calculateTransform(i,u,d)}touchmove(i,u,d){if(this._active&&!(d.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,d)}touchend(i,u,d){this._calculateTransform(i,u,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,d){d.length>0&&(this._active=!0);const y=tt(d,u),b=new s.pointGeometry(0,0),P=new s.pointGeometry(0,0);let L=0;for(const Y in y){const ae=y[Y],he=this._touches[Y];he&&(b._add(ae),P._add(ae.sub(he)),L++,y[Y]=ae)}if(this._touches=y,L<this._minTouches||!P.mag())return;const j=P.div(L);return this._sum._add(j),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(L),panDelta:j}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ir{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,d){return{}}touchstart(i,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,d){if(!this._firstTwoTouches)return;i.preventDefault();const[y,b]=this._firstTwoTouches,P=bt(d,u,y),L=bt(d,u,b);if(!P||!L)return;const j=this._aroundCenter?null:P.add(L).div(2);return this._move([P,L],j,i)}touchend(i,u,d){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,P=bt(d,u,y),L=bt(d,u,b);P&&L||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function bt(m,i,u){for(let d=0;d<m.length;d++)if(m[d].identifier===u)return i[d]}function Mi(m,i){return Math.log(m/i)/Math.LN2}class so extends Ir{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const d=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mi(this._distance,d),pinchAround:u}}}function To(m,i){return 180*m.angleWith(i)/Math.PI}class Rs extends Ir{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const d=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:To(this._vector,d),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,d=To(i,this._startVector);return Math.abs(d)<u}}function Jo(m){return Math.abs(m.y)>Math.abs(m.x)}class Ja extends Ir{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,Jo(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,d){const y=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(y,b,d.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}}gestureBeginsVertically(i,u,d){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,b=u.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const P=i.y>0==u.y>0;return Jo(i)&&Jo(u)&&P}}const r0={panStep:100,bearingStep:15,pitchStep:10};class i0{constructor(){const i=r0;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,d=0,y=0,b=0,P=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?d=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?d=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),P=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:L=>{const j=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:lh,zoom:u?Math.round(j)+u*(i.shiftKey?2:1):j,bearing:L.getBearing()+d*this._bearingStep,pitch:L.getPitch()+y*this._pitchStep,offset:[-b*this._panStep,-P*this._panStep],center:L.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function lh(m){return m*(2-m)}const Nu=4.000244140625;class uh{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const d=s.exported.now(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%Nu==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=I.mousePos(this._el,i);this._around=s.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Nu?this._wheelZoomRate:this._defaultZoomRate;let j=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&j!==0&&(j=1/j);const Y=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(Y*j))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,d=this._startZoom,y=this._easing;let b,P=!1;if(this._type==="wheel"&&d&&y){const L=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),j=y(L);b=s.number(d,u,j),L<1?this._frameId||(this._frameId=!0):P=!0}else b=u,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=s.ease;if(this._prevEase){const d=this._prevEase,y=(s.exported.now()-d.start)/d.duration,b=d.easing(y+.01)-d.easing(y),P=.27/Math.sqrt(b*b+1e-4)*.01,L=Math.sqrt(.0729-P*P);u=s.bezier(P,L,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class ch{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xi{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(i.shiftKey?-1:1),around:d.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ea{constructor(){this._tap=new Ct({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,d){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=u[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(i,u,d))}touchmove(i,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=u[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,u,d)}touchend(i,u,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(i,u,d)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class id{constructor(i,u,d){this._el=i,this._mousePan=u,this._touchPan=d}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hh{constructor(i,u,d){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fh{constructor(i,u,d,y){this._el=i,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Fs=m=>m.zoom||m.drag||m.pitch||m.rotate;class od extends s.Event{}function _i(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class sr{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Du(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),s.bindAll(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,P]of this._listeners)I.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[i,u,d]of this._listeners)I.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(i){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new N(u,i));const y=u.boxZoom=new Oe(u,i);this._add("boxZoom",y);const b=new Xt,P=new xi;u.doubleClickZoom=new ch(P,b),this._add("tapZoom",b),this._add("clickZoom",P);const L=new Ea;this._add("tapDragZoom",L);const j=u.touchPitch=new Ja;this._add("touchPitch",j);const Y=new Nn(i),ae=new Zn(i);u.dragRotate=new hh(i,Y,ae),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",ae,["mouseRotate"]);const he=new _t(i),Ee=new er(i);u.dragPan=new id(d,he,Ee),this._add("mousePan",he),this._add("touchPan",Ee,["touchZoom","touchRotate"]);const ze=new Rs,Se=new so;u.touchZoomRotate=new fh(d,Se,ze,L),this._add("touchRotate",ze,["touchPan","touchZoom"]),this._add("touchZoom",Se,["touchPan","touchRotate"]);const Fe=u.scrollZoom=new uh(u,this);this._add("scrollZoom",Fe,["mousePan"]);const $e=u.keyboard=new i0;this._add("keyboard",$e),this._add("blockableMapEvent",new de(u));for(const We of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[We]&&u[We].enable(i[We])}_add(i,u,d){this._handlers.push({handlerName:i,handler:u,allowed:d}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Fs(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,d){for(const y in i)if(y!==d&&(!u||u.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const d of i)this._el.contains(d.target)&&u.push(d);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const d=i.type==="renderFrame"?void 0:i,y={needsRenderFrame:!1},b={},P={},L=i.touches,j=L?this._getMapTouches(L):void 0,Y=j?I.touchPos(this._el,j):I.mousePos(this._el,i);for(const{handlerName:Ee,handler:ze,allowed:Se}of this._handlers){if(!ze.isEnabled())continue;let Fe;this._blockedByActive(P,Se,Ee)?ze.reset():ze[u||i.type]&&(Fe=ze[u||i.type](i,Y,j),this.mergeHandlerResult(y,b,Fe,Ee,d),Fe&&Fe.needsRenderFrame&&this._triggerRenderFrame()),(Fe||ze.isActive())&&(P[Ee]=ze)}const ae={};for(const Ee in this._previousActiveHandlers)P[Ee]||(ae[Ee]=d);this._previousActiveHandlers=P,(Object.keys(ae).length||_i(y))&&(this._changes.push([y,b,ae]),this._triggerRenderFrame()),(Object.keys(P).length||_i(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:he}=y;he&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],he(this._map))}mergeHandlerResult(i,u,d,y,b){if(!d)return;s.extend(i,d);const P={handlerName:y,originalEvent:d.originalEvent||b};d.zoomDelta!==void 0&&(u.zoom=P),d.panDelta!==void 0&&(u.drag=P),d.pitchDelta!==void 0&&(u.pitch=P),d.bearingDelta!==void 0&&(u.rotate=P)}_applyChanges(){const i={},u={},d={};for(const[y,b,P]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new s.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),s.extend(u,b),s.extend(d,P);this._updateMapTransform(i,u,d),this._changes=[]}_updateMapTransform(i,u,d){const y=this._map,b=y.transform;if(!_i(i))return this._fireEvents(u,d,!0);let{panDelta:P,zoomDelta:L,bearingDelta:j,pitchDelta:Y,around:ae,pinchAround:he}=i;he!==void 0&&(ae=he),y._stop(!0),ae=ae||y.transform.centerPoint;const Ee=b.pointLocation(P?ae.sub(P):ae);j&&(b.bearing+=j),Y&&(b.pitch+=Y),L&&(b.zoom+=L),b.setLocationAtPoint(Ee,ae),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,d,!0)}_fireEvents(i,u,d){const y=Fs(this._eventsInProgress),b=Fs(i),P={};for(const ae in i){const{originalEvent:he}=i[ae];this._eventsInProgress[ae]||(P[`${ae}start`]=he),this._eventsInProgress[ae]=i[ae]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const ae in P)this._fireEvent(ae,P[ae]);b&&this._fireEvent("move",b.originalEvent);for(const ae in i){const{originalEvent:he}=i[ae];this._fireEvent(ae,he)}const L={};let j;for(const ae in this._eventsInProgress){const{handlerName:he,originalEvent:Ee}=this._eventsInProgress[ae];this._handlersById[he].isActive()||(delete this._eventsInProgress[ae],j=u[he]||Ee,L[`${ae}end`]=j)}for(const ae in L)this._fireEvent(ae,L[ae]);const Y=Fs(this._eventsInProgress);if(d&&(y||b)&&!Y){this._updatingCamera=!0;const ae=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),he=Ee=>Ee!==0&&-this._bearingSnap<Ee&&Ee<this._bearingSnap;ae?(he(ae.bearing||this._map.getBearing())&&(ae.bearing=0),this._map.easeTo(ae,{originalEvent:j})):(this._map.fire(new s.Event("moveend",{originalEvent:j})),he(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new s.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new od("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Uu={extend:(m,...i)=>s.extend(m,...i),run(m){m()},logToElement(m,i=!1,u="log"){const d=window.document.getElementById(u);d&&(i&&(d.innerHTML=""),d.innerHTML+=`<br>${m}`)}};class dh extends s.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,d){return i=s.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},u),d)}panTo(i,u,d){return this.easeTo(s.extend({center:i},u),d)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,d){return this.easeTo(s.extend({zoom:i},u),d)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,d){return this.easeTo(s.extend({bearing:i},u),d)}resetNorth(i,u){return this.rotateTo(0,s.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=s.LngLatBounds.convert(i);const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),d,u)}_cameraForBoxAndBearing(i,u,d,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=s.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const rt=y.padding;y.padding={top:rt,bottom:rt,right:rt,left:rt}}y.padding=s.extend(b,y.padding);const P=this.transform,L=P.padding,j=P.project(s.LngLat.convert(i)),Y=P.project(s.LngLat.convert(u)),ae=j.rotate(-d*Math.PI/180),he=Y.rotate(-d*Math.PI/180),Ee=new s.pointGeometry(Math.max(ae.x,he.x),Math.max(ae.y,he.y)),ze=new s.pointGeometry(Math.min(ae.x,he.x),Math.min(ae.y,he.y)),Se=Ee.sub(ze),Fe=(P.width-(L.left+L.right+y.padding.left+y.padding.right))/Se.x,$e=(P.height-(L.top+L.bottom+y.padding.top+y.padding.bottom))/Se.y;if($e<0||Fe<0)return void s.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const We=Math.min(P.scaleZoom(P.scale*Math.min(Fe,$e)),y.maxZoom),Je=s.pointGeometry.convert(y.offset),Ye=new s.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(d*Math.PI/180),ct=Je.add(Ye).mult(P.scale/P.zoomScale(We));return{center:P.unproject(j.add(Y).div(2).sub(ct)),zoom:We,bearing:d}}fitBounds(i,u,d){return this._fitInternal(this.cameraForBounds(i,u),u,d)}fitScreenCoordinates(i,u,d,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.pointGeometry.convert(i)),this.transform.pointLocation(s.pointGeometry.convert(u)),d,y),y,b)}_fitInternal(i,u,d){return i?(delete(u=s.extend(i,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(i,u){this.stop();const d=this.transform;let y=!1,b=!1,P=!1;return"zoom"in i&&d.zoom!==+i.zoom&&(y=!0,d.zoom=+i.zoom),i.center!==void 0&&(d.center=s.LngLat.convert(i.center)),"bearing"in i&&d.bearing!==+i.bearing&&(b=!0,d.bearing=+i.bearing),"pitch"in i&&d.pitch!==+i.pitch&&(P=!0,d.pitch=+i.pitch),i.padding==null||d.isPaddingEqual(i.padding)||(d.padding=i.padding),this.fire(new s.Event("movestart",u)).fire(new s.Event("move",u)),y&&this.fire(new s.Event("zoomstart",u)).fire(new s.Event("zoom",u)).fire(new s.Event("zoomend",u)),b&&this.fire(new s.Event("rotatestart",u)).fire(new s.Event("rotate",u)).fire(new s.Event("rotateend",u)),P&&this.fire(new s.Event("pitchstart",u)).fire(new s.Event("pitch",u)).fire(new s.Event("pitchend",u)),this.fire(new s.Event("moveend",u))}easeTo(i,u){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||!i.essential&&s.exported.prefersReducedMotion)&&(i.duration=0);const d=this.transform,y=this.getZoom(),b=this.getBearing(),P=this.getPitch(),L=this.getPadding(),j="zoom"in i?+i.zoom:y,Y="bearing"in i?this._normalizeBearing(i.bearing,b):b,ae="pitch"in i?+i.pitch:P,he="padding"in i?i.padding:d.padding,Ee=s.pointGeometry.convert(i.offset);let ze=d.centerPoint.add(Ee);const Se=d.pointLocation(ze),Fe=s.LngLat.convert(i.center||Se);this._normalizeCenter(Fe);const $e=d.project(Se),We=d.project(Fe).sub($e),Je=d.zoomScale(j-y);let Ye,ct;i.around&&(Ye=s.LngLat.convert(i.around),ct=d.locationPoint(Ye));const rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||j!==y,this._rotating=this._rotating||b!==Y,this._pitching=this._pitching||ae!==P,this._padding=!d.isPaddingEqual(he),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,rt),this._ease(ut=>{if(this._zooming&&(d.zoom=s.number(y,j,ut)),this._rotating&&(d.bearing=s.number(b,Y,ut)),this._pitching&&(d.pitch=s.number(P,ae,ut)),this._padding&&(d.interpolatePadding(L,he,ut),ze=d.centerPoint.add(Ee)),Ye)d.setLocationAtPoint(Ye,ct);else{const xt=d.zoomScale(d.zoom-y),St=j>y?Math.min(2,Je):Math.max(.5,Je),gt=Math.pow(St,1-ut),Kt=d.unproject($e.add(We.mult(ut*gt)).mult(xt));d.setLocationAtPoint(d.renderWorldCopies?Kt.wrap():Kt,ze)}this._fireMoveEvents(u)},ut=>{this._afterEase(u,ut)},i),this}_prepareEase(i,u,d={}){this._moving=!0,u||d.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!d.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!d.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!d.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,y=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new s.Event("zoomend",i)),y&&this.fire(new s.Event("rotateend",i)),b&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,u){if(!i.essential&&s.exported.prefersReducedMotion){const kn=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(kn,u)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const d=this.transform,y=this.getZoom(),b=this.getBearing(),P=this.getPitch(),L=this.getPadding(),j="zoom"in i?s.clamp(+i.zoom,d.minZoom,d.maxZoom):y,Y="bearing"in i?this._normalizeBearing(i.bearing,b):b,ae="pitch"in i?+i.pitch:P,he="padding"in i?i.padding:d.padding,Ee=d.zoomScale(j-y),ze=s.pointGeometry.convert(i.offset);let Se=d.centerPoint.add(ze);const Fe=d.pointLocation(Se),$e=s.LngLat.convert(i.center||Fe);this._normalizeCenter($e);const We=d.project(Fe),Je=d.project($e).sub(We);let Ye=i.curve;const ct=Math.max(d.width,d.height),rt=ct/Ee,ut=Je.mag();if("minZoom"in i){const kn=s.clamp(Math.min(i.minZoom,y,j),d.minZoom,d.maxZoom),br=ct/d.zoomScale(kn-y);Ye=Math.sqrt(br/ut*2)}const xt=Ye*Ye;function St(kn){const br=(rt*rt-ct*ct+(kn?-1:1)*xt*xt*ut*ut)/(2*(kn?rt:ct)*xt*ut);return Math.log(Math.sqrt(br*br+1)-br)}function gt(kn){return(Math.exp(kn)-Math.exp(-kn))/2}function Kt(kn){return(Math.exp(kn)+Math.exp(-kn))/2}const Ft=St(0);let pn=function(kn){return Kt(Ft)/Kt(Ft+Ye*kn)},Vn=function(kn){return ct*((Kt(Ft)*(gt(br=Ft+Ye*kn)/Kt(br))-gt(Ft))/xt)/ut;var br},Pn=(St(1)-Ft)/Ye;if(Math.abs(ut)<1e-6||!isFinite(Pn)){if(Math.abs(ct-rt)<1e-6)return this.easeTo(i,u);const kn=rt<ct?-1:1;Pn=Math.abs(Math.log(rt/ct))/Ye,Vn=function(){return 0},pn=function(br){return Math.exp(kn*Ye*br)}}return i.duration="duration"in i?+i.duration:1e3*Pn/("screenSpeed"in i?+i.screenSpeed/Ye:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=b!==Y,this._pitching=ae!==P,this._padding=!d.isPaddingEqual(he),this._prepareEase(u,!1),this._ease(kn=>{const br=kn*Pn,vn=1/pn(br);d.zoom=kn===1?j:y+d.scaleZoom(vn),this._rotating&&(d.bearing=s.number(b,Y,kn)),this._pitching&&(d.pitch=s.number(P,ae,kn)),this._padding&&(d.interpolatePadding(L,he,kn),Se=d.centerPoint.add(ze));const On=kn===1?$e:d.unproject(We.add(Je.mult(Vn(br))).mult(vn));d.setLocationAtPoint(d.renderWorldCopies?On.wrap():On,Se),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,u)}if(!i){const d=this.handlers;d&&d.stop(!1)}return this}_ease(i,u,d){d.animate===!1||d.duration===0?(i(1),u()):(this._easeStart=s.exported.now(),this._easeOptions=d,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=s.wrap(i,-180,180);const d=Math.abs(i-u);return Math.abs(i-360-u)<d&&(i-=360),Math.abs(i+360-u)<d&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const d=i.lng-u.center.lng;i.lng+=d>180?-360:d<-180?360:0}}class ph{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const d=this._map._getUIString(`AttributionControl.${u}`);i.title=d,i.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.sourceCaches;for(const y in u){const b=u[y];if(b.used){const P=b.getSource();P.attribution&&i.indexOf(P.attribution)<0&&i.push(P.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,b)=>y.length-b.length),i=i.filter((y,b)=>{for(let P=b+1;P<i.length;P++)if(i[P].indexOf(y)>=0)return!1;return!0});const d=i.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,i.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ad{constructor(){s.bindAll(["_updateLogo"],this),s.bindAll(["_updateCompact"],this)}onAdd(i){this._map=i,this._container=I.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=I.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(void 0),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const i=this._map.style.sourceCaches;for(const u in i)if(i[u].getSource().maplibreLogo)return!0;return!1}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class sd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const y of d)if(y.id===i)return void(y.cancelled=!0)}run(i=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const o0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Vu={showCompass:!0,showZoom:!0,visualizePitch:!1};class qt{constructor(i,u,d=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Nn({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,d&&(this.mousePitch=new Zn({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),I.addEventListener(u,"mousedown",this.mousedown),I.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(u,"touchmove",this.touchmove),I.addEventListener(u,"touchend",this.touchend),I.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),I.disableDrag()}move(i,u){const d=this.map,y=this.mouseRotate.mousemoveWindow(i,u);if(y&&y.bearingDelta&&d.setBearing(d.getBearing()+y.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(i,u);b&&b.pitchDelta&&d.setPitch(d.getPitch()+b.pitchDelta)}}off(){const i=this.element;I.removeEventListener(i,"mousedown",this.mousedown),I.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(i,"touchmove",this.touchmove),I.removeEventListener(i,"touchend",this.touchend),I.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),I.mousePos(this.element,i)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,I.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ln(m,i,u){if(m=new s.LngLat(m.lng,m.lat),i){const d=new s.LngLat(m.lng-360,m.lat),y=new s.LngLat(m.lng+360,m.lat),b=u.locationPoint(m).distSqr(i);u.locationPoint(d).distSqr(i)<b?m=d:u.locationPoint(y).distSqr(i)<b&&(m=y)}for(;Math.abs(m.lng-u.center.lng)>180;){const d=u.locationPoint(m);if(d.x>=0&&d.y>=0&&d.x<=u.width&&d.y<=u.height)break;m.lng>u.center.lng?m.lng-=360:m.lng+=360}return m}const Bs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function $u(m,i,u){const d=m.classList;for(const y in Bs)d.remove(`maplibregl-${u}-anchor-${y}`,`mapboxgl-${u}-anchor-${y}`);d.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class Hl extends s.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=s.extend({element:i},u)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=s.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");const d=I.createNS("http://www.w3.org/2000/svg","svg"),y=41,b=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${y}px`),d.setAttributeNS(null,"width",`${b}px`),d.setAttributeNS(null,"viewBox",`0 0 ${b} ${y}`);const P=I.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const L=I.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill-rule","nonzero");const j=I.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(3.0, 29.0)"),j.setAttributeNS(null,"fill","#000000");const Y=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Je of Y){const Ye=I.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",Je.rx),Ye.setAttributeNS(null,"ry",Je.ry),j.appendChild(Ye)}const ae=I.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"fill",this._color);const he=I.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ae.appendChild(he);const Ee=I.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"fill","#000000");const ze=I.createNS("http://www.w3.org/2000/svg","path");ze.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ee.appendChild(ze);const Se=I.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Se.setAttributeNS(null,"fill","#FFFFFF");const Fe=I.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const $e=I.createNS("http://www.w3.org/2000/svg","circle");$e.setAttributeNS(null,"fill","#000000"),$e.setAttributeNS(null,"opacity","0.25"),$e.setAttributeNS(null,"cx","5.5"),$e.setAttributeNS(null,"cy","5.5"),$e.setAttributeNS(null,"r","5.4999962");const We=I.createNS("http://www.w3.org/2000/svg","circle");We.setAttributeNS(null,"fill","#FFFFFF"),We.setAttributeNS(null,"cx","5.5"),We.setAttributeNS(null,"cy","5.5"),We.setAttributeNS(null,"r","5.4999962"),Fe.appendChild($e),Fe.appendChild(We),L.appendChild(j),L.appendChild(ae),L.appendChild(Ee),L.appendChild(Se),L.appendChild(Fe),d.appendChild(L),d.setAttributeNS(null,"height",y*this._scale+"px"),d.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(d),this._offset=s.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),$u(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,d=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,d=this._element;this._popup&&(u===d||d.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${Bs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${u}`)}getOffset(){return this._offset}setOffset(i){return this._offset=s.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const bi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qo,zi=0,Wl=!1;const Gu={maxWidth:100,unit:"metric"};function xr(m,i,u){const d=u&&u.maxWidth||100,y=m._container.clientHeight/2,b=m.unproject([0,y]),P=m.unproject([d,y]),L=b.distanceTo(P);if(u&&u.unit==="imperial"){const j=3.2808*L;j>5280?_r(i,d,j/5280,m._getUIString("ScaleControl.Miles")):_r(i,d,j,m._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?_r(i,d,L/1852,m._getUIString("ScaleControl.NauticalMiles")):L>=1e3?_r(i,d,L/1e3,m._getUIString("ScaleControl.Kilometers")):_r(i,d,L,m._getUIString("ScaleControl.Meters"))}function _r(m,i,u,d){const y=function(b){const P=Math.pow(10,`${Math.floor(b)}`.length-1);let L=b/P;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(j){const Y=Math.pow(10,Math.ceil(-Math.log(j)/Math.LN10));return Math.round(j*Y)/Y}(L),P*L}(u);m.style.width=i*(y/u)+"px",m.innerHTML=`${y}&nbsp;${d}`}const ld={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hu(m){if(m){if(typeof m=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(m,2)));return{center:new s.pointGeometry(0,0),top:new s.pointGeometry(0,m),"top-left":new s.pointGeometry(i,i),"top-right":new s.pointGeometry(-i,i),bottom:new s.pointGeometry(0,-m),"bottom-left":new s.pointGeometry(i,-i),"bottom-right":new s.pointGeometry(-i,-i),left:new s.pointGeometry(m,0),right:new s.pointGeometry(-m,0)}}if(m instanceof s.pointGeometry||Array.isArray(m)){const i=s.pointGeometry.convert(m);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.pointGeometry.convert(m.center||[0,0]),top:s.pointGeometry.convert(m.top||[0,0]),"top-left":s.pointGeometry.convert(m["top-left"]||[0,0]),"top-right":s.pointGeometry.convert(m["top-right"]||[0,0]),bottom:s.pointGeometry.convert(m.bottom||[0,0]),"bottom-left":s.pointGeometry.convert(m["bottom-left"]||[0,0]),"bottom-right":s.pointGeometry.convert(m["bottom-right"]||[0,0]),left:s.pointGeometry.convert(m.left||[0,0]),right:s.pointGeometry.convert(m.right||[0,0])}}return Hu(new s.pointGeometry(0,0))}const Xl={supported:_,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends dh{constructor(m){var i;if(s.PerformanceUtils.mark(s.PerformanceMarkers.create),(m=s.extend({},Ao,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ko(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),{bearingSnap:m.bearingSnap}),this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new sd,this._controls=[],this._mapId=s.uniqueId(),this._locale=s.extend({},o0,m.locale),this._clickTolerance=m.clickTolerance,this._pixelRatio=(i=m.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new D(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new sr(this,m),this._hash=m.hash&&new Ul(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new ph({customAttribution:m.customAttribution})),this.addControl(new ad,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new s.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new s.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new s.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(m,i){if(i===void 0&&(i=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=m.onAdd(this);this._controls.push(m);const d=this._controlPositions[i];return i.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(m);return i>-1&&this._controls.splice(i,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}resize(m){const i=this._containerDimensions(),u=i[0],d=i[1];this._resizeCanvas(u,d,this.getPixelRatio()),this.transform.resize(u,d),this.painter.resize(u,d,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m))),this.fire(new s.Event("resize",m)),y&&this.fire(new s.Event("moveend",m)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(m){const[i,u]=this._containerDimensions();this._pixelRatio=m,this._resizeCanvas(i,u,m),this.painter.resize(i,u,m)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(s.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m==null?-2:m)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m==null?22:m)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m==null?0:m)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m==null?60:m)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(s.LngLat.convert(m))}unproject(m){return this.transform.pointLocation(s.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(m,i,u){if(m==="mouseenter"||m==="mouseover"){let d=!1;return{layer:i,listener:u,delegates:{mousemove:b=>{const P=this.getLayer(i)?this.queryRenderedFeatures(b.point,{layers:[i]}):[];P.length?d||(d=!0,u.call(this,new ar(m,this,b.originalEvent,{features:P}))):d=!1},mouseout:()=>{d=!1}}}}if(m==="mouseleave"||m==="mouseout"){let d=!1;return{layer:i,listener:u,delegates:{mousemove:P=>{(this.getLayer(i)?this.queryRenderedFeatures(P.point,{layers:[i]}):[]).length?d=!0:d&&(d=!1,u.call(this,new ar(m,this,P.originalEvent)))},mouseout:P=>{d&&(d=!1,u.call(this,new ar(m,this,P.originalEvent)))}}}}{const d=y=>{const b=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];b.length&&(y.features=b,u.call(this,y),delete y.features)};return{layer:i,listener:u,delegates:{[m]:d}}}}on(m,i,u){if(u===void 0)return super.on(m,i);const d=this._createDelegatedListener(m,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(d);for(const y in d.delegates)this.on(y,d.delegates[y]);return this}once(m,i,u){if(u===void 0)return super.once(m,i);const d=this._createDelegatedListener(m,i,u);for(const y in d.delegates)this.once(y,d.delegates[y]);return this}off(m,i,u){return u===void 0?super.off(m,i):(this._delegatedListeners&&this._delegatedListeners[m]&&(d=>{const y=this._delegatedListeners[m];for(let b=0;b<y.length;b++){const P=y[b];if(P.layer===i&&P.listener===u){for(const L in P.delegates)this.off(L,P.delegates[L]);return y.splice(b,1),this}}})(),this)}queryRenderedFeatures(m,i){if(!this.style)return[];let u;if(i!==void 0||m===void 0||m instanceof s.pointGeometry||Array.isArray(m)||(i=m,m=void 0),i=i||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof s.pointGeometry||typeof m[0]=="number")u=[s.pointGeometry.convert(m)];else{const d=s.pointGeometry.convert(m[0]),y=s.pointGeometry.convert(m[1]);u=[d,new s.pointGeometry(y.x,d.y),y,new s.pointGeometry(d.x,y.y),d]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(m,i){return this.style.querySourceFeatures(m,i)}setStyle(m,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(m,i))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const i=this._locale[m];if(i==null)throw new Error(`Missing UI string '${m}'`);return i}_updateStyle(m,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new Ki(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ki(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,i){if(typeof m=="string"){const u=this._requestManager.transformRequest(m,s.ResourceType.Style);s.getJSON(u,(d,y)=>{d?this.fire(new s.ErrorEvent(d)):y&&this._updateDiff(y,i)})}else typeof m=="object"&&this._updateDiff(m,i)}_updateDiff(m,i){try{this.style.setState(m)&&this._update(!0)}catch(u){s.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(m,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.warnOnce("There is no style added to the map.")}addSource(m,i){return this._lazyInitEmptyStyle(),this.style.addSource(m,i),this._update(!0)}isSourceLoaded(m){const i=this.style&&this.style.sourceCaches[m];if(i!==void 0)return i.loaded();this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${m}'`)))}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const i in m){const u=m[i]._tiles;for(const d in u){const y=u[d];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(m,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,i,u)}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,i,{pixelRatio:u=1,sdf:d=!1,stretchX:y,stretchY:b,content:P}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||s.isImageBitmap(i)){const{width:L,height:j,data:Y}=s.exported.getImageData(i);this.style.addImage(m,{data:new s.RGBAImage({width:L,height:j},Y),pixelRatio:u,stretchX:y,stretchY:b,content:P,sdf:d,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:L,height:j,data:Y}=i,ae=i;this.style.addImage(m,{data:new s.RGBAImage({width:L,height:j},new Uint8Array(Y)),pixelRatio:u,stretchX:y,stretchY:b,content:P,sdf:d,version:0,userImage:ae}),ae.onAdd&&ae.onAdd(this,m)}}}updateImage(m,i){const u=this.style.getImage(m);if(!u)return this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=i instanceof HTMLImageElement||s.isImageBitmap(i)?s.exported.getImageData(i):i,{width:y,height:b,data:P}=d;if(y===void 0||b===void 0)return this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||b!==u.data.height)return this.fire(new s.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(i instanceof HTMLImageElement||s.isImageBitmap(i));u.data.replace(P,L),this.style.updateImage(m,u)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,i){s.getImage(this._requestManager.transformRequest(m,s.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(m,i){return this._lazyInitEmptyStyle(),this.style.addLayer(m,i),this._update(!0)}moveLayer(m,i){return this.style.moveLayer(m,i),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,i,u){return this.style.setLayerZoomRange(m,i,u),this._update(!0)}setFilter(m,i,u={}){return this.style.setFilter(m,i,u),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,i,u,d={}){return this.style.setPaintProperty(m,i,u,d),this._update(!0)}getPaintProperty(m,i){return this.style.getPaintProperty(m,i)}setLayoutProperty(m,i,u,d={}){return this.style.setLayoutProperty(m,i,u,d),this._update(!0)}getLayoutProperty(m,i){return this.style.getLayoutProperty(m,i)}setLight(m,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(m,i){return this.style.setFeatureState(m,i),this._update()}removeFeatureState(m,i){return this.style.removeFeatureState(m,i),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,i=0;return this._container&&(m=this._container.clientWidth||400,i=this._container.clientHeight||300),[m,i]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=I.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const d=this._controlContainer=I.create("div","maplibregl-control-container mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{y[b]=I.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,i,u){this._canvas.width=u*m,this._canvas.height=u*i,this._canvas.style.width=`${m}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const m=s.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);i?(this.painter=new vi(i,this.transform),s.exported$1.testSupport(i)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){let i,u=0;const d=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,i),u=s.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,L=s.exported.now();this.style.zoomHistory.update(P,L);const j=new s.EvaluationParameters(P,{now:L,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Y=j.crossFadingFactor();Y===1&&Y===this._crossFadingFactor||(y=!0,this._crossFadingFactor=Y),this.style.update(j)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.load),this.fire(new s.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=s.exported.now()-u;d.endQueryEXT(d.TIME_ELAPSED_EXT,i),setTimeout(()=>{const L=d.getQueryObjectEXT(i,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:P,gpuTime:L}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(P);this.fire(new s.Event("gpu-timing-layer",{layerTimes:L}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,s.PerformanceUtils.mark(s.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),s.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.exported.frame(m=>{s.PerformanceUtils.frame(m),this._frame=null,this._render(m)}))}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,i){s.setCacheLimits(m,i)}},NavigationControl:class{constructor(m){this.options=s.extend({},Vu,m),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map.getZoom(),i=m===this._map.getMaxZoom(),u=m===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const m=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=m}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qt(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,i){const u=I.create("button",m,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(m,i){const u=this._map._getUIString(`NavigationControl.${i}`);m.title=u,m.setAttribute("aria-label",u)}},GeolocateControl:class extends s.Evented{constructor(m){super(),this.options=s.extend({},bi,m),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(m){var i;return this._map=m,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Qo!==void 0?i(Qo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Qo=u.state!=="denied",i(Qo)}):(Qo=!!window.navigator.geolocation,i(Qo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,zi=0,Wl=!1}_isOutOfMapMaxBounds(m){const i=this._map.getMaxBounds(),u=m.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",m)),this._finish()}}_updateCamera(m){const i=new s.LngLat(m.coords.longitude,m.coords.latitude),u=m.coords.accuracy,d=this._map.getBearing(),y=s.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),y,{geolocateSource:!0})}_updateMarker(m){if(m){const i=new s.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map._container.clientHeight/2,i=this._map.unproject([0,m]),u=this._map.unproject([1,m]),d=i.distanceTo(u),y=Math.ceil(2*this._accuracy/d);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&Wl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Hl(this._dotElement),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":zi--,Wl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),zi++,zi>1?(m={maximumAge:6e5,timeout:0},Wl=!0):(m=this.options.positionOptions,Wl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ph,ScaleControl:class{constructor(m){this.options=s.extend({},Gu,m),s.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){xr(this._map,this._container,this.options)}onAdd(m){return this._map=m,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(m){this.options.unit=m,xr(this._map,this._container,this.options)}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(m){super(),this.options=s.extend(Object.create(ld),m),s.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=s.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const i=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=m;d=u.firstChild,d;)i.appendChild(d);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){this._container&&this._container.classList.add(m)}removeClassName(m){this._container&&this._container.classList.remove(m)}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(m){this._update(m.point)}_onMouseMove(m){this._update(m.point)}_onDrag(m){this._update(m.point)}_update(m){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=I.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ln(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!m))return;const i=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat);let u=this.options.anchor;const d=Hu(this.options.offset);if(!u){const b=this._container.offsetWidth,P=this._container.offsetHeight;let L;L=i.y+d.bottom.y<P?["top"]:i.y>this._map.transform.height-P?["bottom"]:[],i.x<b/2?L.push("left"):i.x>this._map.transform.width-b/2&&L.push("right"),u=L.length===0?"bottom":L.join("-")}const y=i.add(d[u]).round();I.setTransform(this._container,`${Bs[u]} translate(${y.x}px,${y.y}px)`),$u(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Zl);m&&m.focus()}_onClose(){this.remove()}},Marker:Hl,Style:Ki,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.pointGeometry,MercatorCoordinate:s.MercatorCoordinate,Evented:s.Evented,AJAXError:s.AJAXError,config:s.config,CanvasSource:Ue,GeoJSONSource:ke,ImageSource:Pe,RasterDEMTileSource:ce,RasterTileSource:_e,VectorTileSource:le,VideoSource:De,prewarm:function(){R().acquire(wn)},clearPrewarmedResources:function(){const m=we;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(wn),we=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return on.workerCount},set workerCount(m){on.workerCount=m},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){s.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){s.clearTileCache(m)},workerUrl:"",addProtocol(m,i){s.config.REGISTERED_PROTOCOLS[m]=i},removeProtocol(m){delete s.config.REGISTERED_PROTOCOLS[m]}};return Uu.extend(Xl,{isSafari:s.isSafari,getPerformanceMetrics:s.PerformanceUtils.getPerformanceMetrics}),Xl});var g=c;return g})})(dv);var h3=dv.exports,p7=Object.freeze(lS({__proto__:null,[Symbol.toStringTag]:"Module",default:h3},[dv.exports]));const m7="modulepreload",V2={},g7="/osm-address-editor-vite/",y7=function(t,r){return!r||r.length===0?t():Promise.all(r.map(l=>{if(l=`${g7}${l}`,l in V2)return;V2[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":m7,c||(g.as="script",g.crossOrigin=""),g.href=l,document.head.appendChild(g),c)return new Promise((s,_)=>{g.addEventListener("load",s),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>t())},v7=yt.exports.createContext(null);function $2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function G2(e,t){const r=t.viewState||t;let l=!1;if("longitude"in r&&"latitude"in r){const c=e.center;e.center=new c.constructor(r.longitude,r.latitude),l=l||c!==e.center}if("zoom"in r){const c=e.zoom;e.zoom=r.zoom,l=l||c!==e.zoom}if("bearing"in r){const c=e.bearing;e.bearing=r.bearing,l=l||c!==e.bearing}if("pitch"in r){const c=e.pitch;e.pitch=r.pitch,l=l||c!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(l=!0,e.padding=r.padding),l}const x7=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function H2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const l of e.layers)t[l.id]=l;const r=e.layers.map(l=>{const c=t[l.ref];let f=null;if("interactive"in l&&(f={...l},delete f.interactive),c){f=f||{...l},delete f.ref;for(const g of x7)g in c&&(f[g]=c[g])}return f||l});return{...e,layers:r}}function _7(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,l=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return r===c&&l===f}function Oo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Oo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),l=Object.keys(t);if(r.length!==l.length)return!1;for(const c of r)if(!t.hasOwnProperty(c)||!Oo(e[c],t[c]))return!1;return!0}return!1}const W2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},yg={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Z2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},b7=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],w7=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Uc{constructor(t,r,l){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const f=this.props[Z2[c.type]];f&&f(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const f=this.props[W2[c.type]];if(f){if(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"){const g=this._hoveredFeatures||this._map.queryRenderedFeatures(c.point,{layers:this.props.interactiveLayerIds});if(!g.length)return;c.features=g}f(c),delete c.features}},this._onCameraEvent=c=>{if(!this._internalUpdate){const f=this.props[yg[c.type]];f&&f(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=r,this._initialize(l)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const l=this._updateSettings(t,r);l&&(this._renderTransform=this._map.transform.clone());const c=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(l||c||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const l=Uc.savedMaps.pop();if(!l)return null;const c=l.map,f=c.getContainer();for(r.className=f.className;f.childNodes.length>0;)r.appendChild(f.childNodes[0]);return c._container=r,t.initialViewState&&l._updateViewState(t.initialViewState,!1),c.resize(),l.setProps({...t,styleDiffing:!1}),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),l}_initialize(t){const{props:r}=this,l={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||E7()||null,container:t,style:H2(r.mapStyle)},c=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),r.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,r.gl)}const f=new this._MapClass(l);c.padding&&f.setPadding(c.padding),r.cursor&&(f.getCanvas().style.cursor=r.cursor),this._renderTransform=f.transform.clone();const g=f._render;f._render=E=>{this._inRender=!0,g.call(f,E),this._inRender=!1};const s=f._renderTaskQueue.run;f._renderTaskQueue.run=E=>{s.call(f._renderTaskQueue,E),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const _=f.fire;f.fire=this._fireEvent.bind(this,_),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>this._updateStyleComponents(this.props,{})),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in W2)f.on(E,this._onPointerEvent);for(const E in yg)f.on(E,this._onCameraEvent);for(const E in Z2)f.on(E,this._onEvent);this._map=f}recycle(){Uc.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){const{viewState:r}=t;if(r){const l=this._map;if(r.width!==l.transform.width||r.height!==l.transform.height)return l.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const l=this._map,c=this._renderTransform,{zoom:f,pitch:g,bearing:s}=c,_=G2(c,{...$2(l.transform),...t});if(_&&r){const E=this._deferredEvents;E.move=!0,E.zoom||(E.zoom=f!==c.zoom),E.rotate||(E.rotate=s!==c.bearing),E.pitch||(E.pitch=g!==c.pitch)}return l.isMoving()||G2(l.transform,t),_}_updateSettings(t,r){const l=this._map;let c=!1;for(const f of b7)f in t&&!Oo(t[f],r[f])&&(c=!0,l[`set${f[0].toUpperCase()}${f.slice(1)}`](t[f]));return c}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==r.mapStyle){const l={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(l.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(H2(t.mapStyle),l),!0}return!1}_updateStyleComponents(t,r){const l=this._map;let c=!1;return l.style.loaded()&&("light"in t&&!Oo(t.light,r.light)&&(c=!0,l.setLight(t.light)),"fog"in t&&!Oo(t.fog,r.fog)&&(c=!0,l.setFog(t.fog)),"terrain"in t&&!Oo(t.terrain,r.terrain)&&(!t.terrain||l.getSource(t.terrain.source))&&(c=!0,l.setTerrain(t.terrain))),c}_updateHandlers(t,r){const l=this._map;let c=!1;for(const f of w7){const g=t[f];Oo(g,r[f])||(c=!0,g?l[f].enable(g):l[f].disable())}return c}_updateHover(t){var c;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const f=t.type,g=((c=this._hoveredFeatures)==null?void 0:c.length)>0;let s;if(f==="mousemove")try{s=this._map.queryRenderedFeatures(t.point,{layers:r.interactiveLayerIds})}catch{s=[]}else s=[];const _=s.length>0;!_&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,_&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,r,l){const c=this._map,f=c.transform,g=typeof r=="string"?r:r.type;return g==="move"&&this._updateViewState(this.props,!1),g in yg&&(typeof r=="object"&&(r.viewState=$2(f)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,r,l),c.transform=f,c):(t.call(c,r,l),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const l in this._deferredEvents)this._deferredEvents[l]&&t.fire(l);this._internalUpdate=!1;const r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=r}}}Uc.savedMaps=[];function E7(){let e=null;if(typeof location!="undefined"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const S7=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function X2(e,t){if(!e)return null;const r=e.map,l={getMap:()=>r,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c))};for(const c of C7(r))!(c in l)&&!S7.includes(c)&&(l[c]=r[c].bind(r));return l}function C7(e){const t=new Set;let r=e;for(;r;){for(const l of Object.getOwnPropertyNames(r))l[0]!=="_"&&typeof e[l]=="function"&&l!=="fire"&&l!=="setEventedParent"&&t.add(l);r=Object.getPrototypeOf(r)}return Array.from(t)}const T7=typeof document!="undefined"?yt.exports.useLayoutEffect:yt.exports.useEffect,A7=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function I7(e,t){for(const r of A7)r in t&&(e[r]=t[r]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,r=>{r&&console.error(r)},!1)}const Qc=yt.exports.createContext(null),P7={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},pv=yt.exports.forwardRef((e,t)=>{const r=yt.exports.useContext(v7),[l,c]=yt.exports.useState(null),f=yt.exports.useRef(),{current:g}=yt.exports.useRef({mapLib:null,map:null});yt.exports.useEffect(()=>{const _=e.mapLib;let E=!0,C;return Promise.resolve(_||y7(()=>Promise.resolve().then(function(){return p7}),void 0)).then(S=>{if(!!E){if(S.Map||(S=S.default),!S||!S.Map)throw new Error("Invalid mapLib");if(S.supported(e))I7(S,e),e.reuseMaps&&(C=Uc.reuse(e,f.current)),C||(C=new Uc(S.Map,e,f.current)),g.map=C.map,g.mapLib=S,c(C),r==null||r.onMapMount(X2(C,S),e.id);else throw new Error("Map is not supported by this browser")}}).catch(S=>{e.onError({type:"error",target:null,originalEvent:null,error:S})}),()=>{E=!1,C&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),T7(()=>{l&&l.setProps(e)}),yt.exports.useImperativeHandle(t,()=>X2(l,g.mapLib),[l]);const s=yt.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]);return yt.exports.createElement("div",{id:e.id,ref:f,style:s},l&&yt.exports.createElement(Qc.Provider,{value:g},e.children))});pv.displayName="Map";pv.defaultProps=P7;const k7=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function bu(e,t){if(!e||!t)return;const r=e.style;for(const l in t){const c=t[l];Number.isFinite(c)&&!k7.test(l)?r[l]=`${c}px`:r[l]=c}}const M7={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function f3(e){const{map:t,mapLib:r}=yt.exports.useContext(Qc),l=yt.exports.useRef({props:e});l.current.props=e;const c=yt.exports.useMemo(()=>{let f=!1;yt.exports.Children.forEach(e.children,_=>{_&&(f=!0)});const g={...e,element:f?document.createElement("div"):null},s=new r.Marker(g).setLngLat([e.longitude,e.latitude]);return s.getElement().addEventListener("click",_=>{var E,C;(C=(E=l.current.props).onClick)==null||C.call(E,{type:"click",target:s,originalEvent:_})}),s.on("dragstart",_=>{var C,S;const E=_;E.lngLat=c.getLngLat(),(S=(C=l.current.props).onDragStart)==null||S.call(C,E)}),s.on("drag",_=>{var C,S;const E=_;E.lngLat=c.getLngLat(),(S=(C=l.current.props).onDrag)==null||S.call(C,E)}),s.on("dragend",_=>{var C,S;const E=_;E.lngLat=c.getLngLat(),(S=(C=l.current.props).onDragEnd)==null||S.call(C,E)}),s},[]);return yt.exports.useEffect(()=>(c.addTo(t),()=>{c.remove()}),[]),yt.exports.useEffect(()=>{bu(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!_7(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),Am.exports.createPortal(e.children,c.getElement())}f3.defaultProps=M7;var z7=yt.exports.memo(f3);function Y2(e){return new Set(e?e.trim().split(/\s+/):[])}function L7(e){const{map:t,mapLib:r}=yt.exports.useContext(Qc),l=yt.exports.useMemo(()=>document.createElement("div"),[]),c=yt.exports.useRef({props:e});c.current.props=e;const f=yt.exports.useMemo(()=>{const g={...e},s=new r.Popup(g).setLngLat([e.longitude,e.latitude]);return s.on("open",_=>{var E,C;(C=(E=c.current.props).onOpen)==null||C.call(E,_)}),s.on("close",_=>{var E,C;(C=(E=c.current.props).onClose)==null||C.call(E,_)}),s},[]);if(yt.exports.useEffect(()=>(f.setDOMContent(l).addTo(t),()=>{f.isOpen()&&f.remove()}),[]),yt.exports.useEffect(()=>{bu(f.getElement(),e.style)},[e.style]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Oo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const g=Y2(f.options.className),s=Y2(e.className);for(const _ of g)s.has(_)||f.removeClassName(_);for(const _ of s)g.has(_)||f.addClassName(_);f.options.className=e.className}return Am.exports.createPortal(e.children,l)}yt.exports.memo(L7);function Yf(e,t,r){const l=yt.exports.useContext(Qc),c=yt.exports.useMemo(()=>e(l),[]);return yt.exports.useEffect(()=>{var g;const{map:f}=l;return f.hasControl(c)||f.addControl(c,(g=r||t)==null?void 0:g.position),()=>{typeof t=="function"&&t(l),f.hasControl(c)&&f.removeControl(c)}},[]),c}function O7(e){const t=Yf(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return yt.exports.useEffect(()=>{bu(t._container,e.style)},[e.style]),null}yt.exports.memo(O7);function R7(e){const t=Yf(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.exports.useEffect(()=>{bu(t._controlContainer,e.style)},[e.style]),null}yt.exports.memo(R7);const d3=yt.exports.forwardRef((e,t)=>{const r=yt.exports.useRef({props:e}),l=Yf(({mapLib:c})=>{const f=new c.GeolocateControl(e);return f.on("geolocate",g=>{var s,_;(_=(s=r.current.props).onGeolocate)==null||_.call(s,g)}),f.on("error",g=>{var s,_;(_=(s=r.current.props).onError)==null||_.call(s,g)}),f.on("outofmaxbounds",g=>{var s,_;(_=(s=r.current.props).onOutOfMaxBounds)==null||_.call(s,g)}),f.on("trackuserlocationstart",g=>{var s,_;(_=(s=r.current.props).onTrackUserLocationStart)==null||_.call(s,g)}),f.on("trackuserlocationend",g=>{var s,_;(_=(s=r.current.props).onTrackUserLocationEnd)==null||_.call(s,g)}),f},{position:e.position});return r.current.props=e,yt.exports.useImperativeHandle(t,()=>({trigger:()=>l.trigger()}),[]),yt.exports.useEffect(()=>{bu(l._container,e.style)},[e.style]),null});d3.displayName="GeolocateControl";var F7=yt.exports.memo(d3);function B7(e){const t=Yf(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return yt.exports.useEffect(()=>{bu(t._container,e.style)},[e.style]),null}var j7=yt.exports.memo(B7);const D7={unit:"metric",maxWidth:100};function p3(e){const t=Yf(({mapLib:r})=>new r.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),yt.exports.useEffect(()=>{bu(t._container,e.style)},[e.style]),null}p3.defaultProps=D7;yt.exports.memo(p3);function Xp(e,t){if(!e)throw new Error(t)}let N7=0;function U7(e,t,r){if(e.style&&e.style._loaded){const l={...r};return delete l.id,delete l.children,e.addSource(t,l),e.getSource(t)}return null}function V7(e,t,r){Xp(t.id===r.id,"source id changed"),Xp(t.type===r.type,"source type changed");let l="",c=0;for(const g in t)g!=="children"&&g!=="id"&&!Oo(r[g],t[g])&&(l=g,c++);if(!c)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((f==="canvas"||f==="video")&&c===1&&l==="coordinates")e.setCoordinates(t.coordinates);else if(f==="vector"&&"setUrl"in e)switch(l){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${l}`)}function $7(e){const{map:t}=yt.exports.useContext(Qc),r=yt.exports.useRef(e),[,l]=yt.exports.useState(0),c=yt.exports.useMemo(()=>e.id||`jsx-source-${N7++}`,[]);yt.exports.useEffect(()=>{if(t){const g=()=>l(s=>s+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),setTimeout(()=>{t.style&&t.style._loaded&&t.getSource(c)&&t.removeSource(c)},0)}}},[t]);let f=t&&t.style&&t.getSource(c);return f?V7(f,e,r.current):f=U7(t,c,e),r.current=e,f&&yt.exports.Children.map(e.children,g=>g&&yt.exports.cloneElement(g,{source:c}))||null}function G7(e,t,r,l){if(Xp(r.id===l.id,"layer id changed"),Xp(r.type===l.type,"layer type changed"),r.type==="custom"||l.type==="custom")return;const{layout:c={},paint:f={},filter:g,minzoom:s,maxzoom:_,beforeId:E}=r;if(E!==l.beforeId&&e.moveLayer(t,E),c!==l.layout){const C=l.layout||{};for(const S in c)Oo(c[S],C[S])||e.setLayoutProperty(t,S,c[S]);for(const S in C)c.hasOwnProperty(S)||e.setLayoutProperty(t,S,void 0)}if(f!==l.paint){const C=l.paint||{};for(const S in f)Oo(f[S],C[S])||e.setPaintProperty(t,S,f[S]);for(const S in C)f.hasOwnProperty(S)||e.setPaintProperty(t,S,void 0)}Oo(g,l.filter)||e.setFilter(t,g),(s!==l.minzoom||_!==l.maxzoom)&&e.setLayerZoomRange(t,s,_)}function H7(e,t,r){if(e.style&&e.style._loaded&&e.getSource(r.source)){const l={...r,id:t};delete l.beforeId,e.addLayer(l,r.beforeId)}}let W7=0;function Z7(e){const{map:t}=yt.exports.useContext(Qc),r=yt.exports.useRef(e),[,l]=yt.exports.useState(0),c=yt.exports.useMemo(()=>e.id||`jsx-layer-${W7++}`,[]);if(yt.exports.useEffect(()=>{if(t){const g=()=>l(s=>s+1);return t.on("styledata",g),g(),()=>{t.off("styledata",g),t.style&&t.style._loaded&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{G7(t,c,e,r.current)}catch(g){console.warn(g)}else H7(t,c,e);return r.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,l)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(l){K7(e,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(r,l))})}return e}function Yp(e){return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function X7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q2(e,t){for(var r=0;r<t.length;r++){var l=t[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function Y7(e,t,r){return t&&q2(e.prototype,t),r&&q2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function K7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mv(e,t){return J7(e)||eC(e,t)||m3(e,t)||nC()}function Vm(e){return q7(e)||Q7(e)||m3(e)||tC()}function q7(e){if(Array.isArray(e))return S1(e)}function J7(e){if(Array.isArray(e))return e}function Q7(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eC(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var l=[],c=!0,f=!1,g,s;try{for(r=r.call(e);!(c=(g=r.next()).done)&&(l.push(g.value),!(t&&l.length===t));c=!0);}catch(_){f=!0,s=_}finally{try{!c&&r.return!=null&&r.return()}finally{if(f)throw s}}return l}}function m3(e,t){if(!!e){if(typeof e=="string")return S1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S1(e,t)}}function S1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,l=new Array(t);r<t;r++)l[r]=e[r];return l}function tC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J2=function(){},gv={},g3={},y3=null,v3={mark:J2,measure:J2};try{typeof window!="undefined"&&(gv=window),typeof document!="undefined"&&(g3=document),typeof MutationObserver!="undefined"&&(y3=MutationObserver),typeof performance!="undefined"&&(v3=performance)}catch{}var rC=gv.navigator||{},Q2=rC.userAgent,eb=Q2===void 0?"":Q2,pl=gv,Sr=g3,tb=y3,Hd=v3;pl.document;var ws=!!Sr.documentElement&&!!Sr.head&&typeof Sr.addEventListener=="function"&&typeof Sr.createElement=="function",x3=~eb.indexOf("MSIE")||~eb.indexOf("Trident/"),ys="___FONT_AWESOME___",C1=16,_3="fa",b3="svg-inline--fa",du="data-fa-i2svg",T1="data-fa-pseudo-element",iC="data-fa-pseudo-element-pending",yv="data-prefix",vv="data-icon",nb="fontawesome-i2svg",oC="async",aC=["HTML","HEAD","STYLE","SCRIPT"],w3=function(){try{return!0}catch{return!1}}(),xv={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Kp={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},E3={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sC={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},lC=/fa[srltdbk\-\ ]/,S3="fa-layers-text",uC=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,cC={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},C3=[1,2,3,4,5,6,7,8,9,10],hC=C3.concat([11,12,13,14,15,16,17,18,19,20]),fC=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],lu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},dC=[].concat(Vm(Object.keys(Kp)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",lu.GROUP,lu.SWAP_OPACITY,lu.PRIMARY,lu.SECONDARY]).concat(C3.map(function(e){return"".concat(e,"x")})).concat(hC.map(function(e){return"w-".concat(e)})),T3=pl.FontAwesomeConfig||{};function pC(e){var t=Sr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function mC(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Sr&&typeof Sr.querySelector=="function"){var gC=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];gC.forEach(function(e){var t=mv(e,2),r=t[0],l=t[1],c=mC(pC(r));c!=null&&(T3[l]=c)})}var yC={familyPrefix:_3,styleDefault:"solid",replacementClass:b3,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},yf=Jt(Jt({},yC),T3);yf.autoReplaceSvg||(yf.observeMutations=!1);var yn={};Object.keys(yf).forEach(function(e){Object.defineProperty(yn,e,{enumerable:!0,set:function(r){yf[e]=r,mp.forEach(function(l){return l(yn)})},get:function(){return yf[e]}})});pl.FontAwesomeConfig=yn;var mp=[];function vC(e){return mp.push(e),function(){mp.splice(mp.indexOf(e),1)}}var Hs=C1,Oa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function xC(e){if(!(!e||!ws)){var t=Sr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var r=Sr.head.childNodes,l=null,c=r.length-1;c>-1;c--){var f=r[c],g=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(g)>-1&&(l=f)}return Sr.head.insertBefore(t,l),e}}var _C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function jf(){for(var e=12,t="";e-- >0;)t+=_C[Math.random()*62|0];return t}function eh(e){for(var t=[],r=(e||[]).length>>>0;r--;)t[r]=e[r];return t}function _v(e){return e.classList?eh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function A3(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function bC(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,'="').concat(A3(e[r]),'" ')},"").trim()}function $m(e){return Object.keys(e||{}).reduce(function(t,r){return t+"".concat(r,": ").concat(e[r].trim(),";")},"")}function bv(e){return e.size!==Oa.size||e.x!==Oa.x||e.y!==Oa.y||e.rotate!==Oa.rotate||e.flipX||e.flipY}function wC(e){var t=e.transform,r=e.containerWidth,l=e.iconWidth,c={transform:"translate(".concat(r/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),g="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)"),_={transform:"".concat(f," ").concat(g," ").concat(s)},E={transform:"translate(".concat(l/2*-1," -256)")};return{outer:c,inner:_,path:E}}function EC(e){var t=e.transform,r=e.width,l=r===void 0?C1:r,c=e.height,f=c===void 0?C1:c,g=e.startCentered,s=g===void 0?!1:g,_="";return s&&x3?_+="translate(".concat(t.x/Hs-l/2,"em, ").concat(t.y/Hs-f/2,"em) "):s?_+="translate(calc(-50% + ".concat(t.x/Hs,"em), calc(-50% + ").concat(t.y/Hs,"em)) "):_+="translate(".concat(t.x/Hs,"em, ").concat(t.y/Hs,"em) "),_+="scale(".concat(t.size/Hs*(t.flipX?-1:1),", ").concat(t.size/Hs*(t.flipY?-1:1),") "),_+="rotate(".concat(t.rotate,"deg) "),_}var SC=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function I3(){var e=_3,t=b3,r=yn.familyPrefix,l=yn.replacementClass,c=SC;if(r!==e||l!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),g=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");c=c.replace(f,".".concat(r,"-")).replace(g,"--".concat(r,"-")).replace(s,".".concat(l))}return c}var rb=!1;function vg(){yn.autoAddCss&&!rb&&(xC(I3()),rb=!0)}var CC={mixout:function(){return{dom:{css:I3,insertCss:vg}}},hooks:function(){return{beforeDOMElementCreation:function(){vg()},beforeI2svg:function(){vg()}}}},vs=pl||{};vs[ys]||(vs[ys]={});vs[ys].styles||(vs[ys].styles={});vs[ys].hooks||(vs[ys].hooks={});vs[ys].shims||(vs[ys].shims=[]);var ua=vs[ys],P3=[],TC=function e(){Sr.removeEventListener("DOMContentLoaded",e),qp=1,P3.map(function(t){return t()})},qp=!1;ws&&(qp=(Sr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Sr.readyState),qp||Sr.addEventListener("DOMContentLoaded",TC));function AC(e){!ws||(qp?setTimeout(e,0):P3.push(e))}function Kf(e){var t=e.tag,r=e.attributes,l=r===void 0?{}:r,c=e.children,f=c===void 0?[]:c;return typeof e=="string"?A3(e):"<".concat(t," ").concat(bC(l),">").concat(f.map(Kf).join(""),"</").concat(t,">")}function ib(e,t,r){if(e&&e[t]&&e[t][r])return{prefix:t,iconName:r,icon:e[t][r]}}var IC=function(t,r){return function(l,c,f,g){return t.call(r,l,c,f,g)}},xg=function(t,r,l,c){var f=Object.keys(t),g=f.length,s=c!==void 0?IC(r,c):r,_,E,C;for(l===void 0?(_=1,C=t[f[0]]):(_=0,C=l);_<g;_++)E=f[_],C=s(C,t[E],E,t);return C};function PC(e){for(var t=[],r=0,l=e.length;r<l;){var c=e.charCodeAt(r++);if(c>=55296&&c<=56319&&r<l){var f=e.charCodeAt(r++);(f&64512)==56320?t.push(((c&1023)<<10)+(f&1023)+65536):(t.push(c),r--)}else t.push(c)}return t}function A1(e){var t=PC(e);return t.length===1?t[0].toString(16):null}function kC(e,t){var r=e.length,l=e.charCodeAt(t),c;return l>=55296&&l<=56319&&r>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(l-55296)*1024+c-56320+65536:l}function ob(e){return Object.keys(e).reduce(function(t,r){var l=e[r],c=!!l.icon;return c?t[l.iconName]=l.icon:t[r]=l,t},{})}function I1(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=r.skipHooks,c=l===void 0?!1:l,f=ob(t);typeof ua.hooks.addPack=="function"&&!c?ua.hooks.addPack(e,ob(t)):ua.styles[e]=Jt(Jt({},ua.styles[e]||{}),f),e==="fas"&&I1("fa",t)}var vf=ua.styles,MC=ua.shims,zC=Object.values(E3),wv=null,k3={},M3={},z3={},L3={},O3={},LC=Object.keys(xv);function OC(e){return~dC.indexOf(e)}function RC(e,t){var r=t.split("-"),l=r[0],c=r.slice(1).join("-");return l===e&&c!==""&&!OC(c)?c:null}var R3=function(){var t=function(f){return xg(vf,function(g,s,_){return g[_]=xg(s,f,{}),g},{})};k3=t(function(c,f,g){if(f[3]&&(c[f[3]]=g),f[2]){var s=f[2].filter(function(_){return typeof _=="number"});s.forEach(function(_){c[_.toString(16)]=g})}return c}),M3=t(function(c,f,g){if(c[g]=g,f[2]){var s=f[2].filter(function(_){return typeof _=="string"});s.forEach(function(_){c[_]=g})}return c}),O3=t(function(c,f,g){var s=f[2];return c[g]=g,s.forEach(function(_){c[_]=g}),c});var r="far"in vf||yn.autoFetchSvg,l=xg(MC,function(c,f){var g=f[0],s=f[1],_=f[2];return s==="far"&&!r&&(s="fas"),typeof g=="string"&&(c.names[g]={prefix:s,iconName:_}),typeof g=="number"&&(c.unicodes[g.toString(16)]={prefix:s,iconName:_}),c},{names:{},unicodes:{}});z3=l.names,L3=l.unicodes,wv=Gm(yn.styleDefault)};vC(function(e){wv=Gm(e.styleDefault)});R3();function Ev(e,t){return(k3[e]||{})[t]}function FC(e,t){return(M3[e]||{})[t]}function xc(e,t){return(O3[e]||{})[t]}function F3(e){return z3[e]||{prefix:null,iconName:null}}function BC(e){var t=L3[e],r=Ev("fas",e);return t||(r?{prefix:"fas",iconName:r}:null)||{prefix:null,iconName:null}}function ml(){return wv}var Sv=function(){return{prefix:null,iconName:null,rest:[]}};function Gm(e){var t=xv[e],r=Kp[e]||Kp[t],l=e in ua.styles?e:null;return r||l||null}function Hm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.skipLookups,l=r===void 0?!1:r,c=null,f=e.reduce(function(g,s){var _=RC(yn.familyPrefix,s);if(vf[s]?(s=zC.includes(s)?sC[s]:s,c=s,g.prefix=s):LC.indexOf(s)>-1?(c=s,g.prefix=Gm(s)):_?g.iconName=_:s!==yn.replacementClass&&g.rest.push(s),!l&&g.prefix&&g.iconName){var E=c==="fa"?F3(g.iconName):{},C=xc(g.prefix,g.iconName);E.prefix&&(c=null),g.iconName=E.iconName||C||g.iconName,g.prefix=E.prefix||g.prefix,g.prefix==="far"&&!vf.far&&vf.fas&&!yn.autoFetchSvg&&(g.prefix="fas")}return g},Sv());return(f.prefix==="fa"||c==="fa")&&(f.prefix=ml()||"fas"),f}var jC=function(){function e(){X7(this,e),this.definitions={}}return Y7(e,[{key:"add",value:function(){for(var r=this,l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var g=c.reduce(this._pullDefinitions,{});Object.keys(g).forEach(function(s){r.definitions[s]=Jt(Jt({},r.definitions[s]||{}),g[s]),I1(s,g[s]);var _=E3[s];_&&I1(_,g[s]),R3()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(r,l){var c=l.prefix&&l.iconName&&l.icon?{0:l}:l;return Object.keys(c).map(function(f){var g=c[f],s=g.prefix,_=g.iconName,E=g.icon,C=E[2];r[s]||(r[s]={}),C.length>0&&C.forEach(function(S){typeof S=="string"&&(r[s][S]=E)}),r[s][_]=E}),r}}]),e}(),ab=[],_c={},Oc={},DC=Object.keys(Oc);function NC(e,t){var r=t.mixoutsTo;return ab=e,_c={},Object.keys(Oc).forEach(function(l){DC.indexOf(l)===-1&&delete Oc[l]}),ab.forEach(function(l){var c=l.mixout?l.mixout():{};if(Object.keys(c).forEach(function(g){typeof c[g]=="function"&&(r[g]=c[g]),Yp(c[g])==="object"&&Object.keys(c[g]).forEach(function(s){r[g]||(r[g]={}),r[g][s]=c[g][s]})}),l.hooks){var f=l.hooks();Object.keys(f).forEach(function(g){_c[g]||(_c[g]=[]),_c[g].push(f[g])})}l.provides&&l.provides(Oc)}),r}function P1(e,t){for(var r=arguments.length,l=new Array(r>2?r-2:0),c=2;c<r;c++)l[c-2]=arguments[c];var f=_c[e]||[];return f.forEach(function(g){t=g.apply(null,[t].concat(l))}),t}function pu(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),l=1;l<t;l++)r[l-1]=arguments[l];var c=_c[e]||[];c.forEach(function(f){f.apply(null,r)})}function xs(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Oc[e]?Oc[e].apply(null,t):void 0}function k1(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,r=e.prefix||ml();if(!!t)return t=xc(r,t)||t,ib(B3.definitions,r,t)||ib(ua.styles,r,t)}var B3=new jC,UC=function(){yn.autoReplaceSvg=!1,yn.observeMutations=!1,pu("noAuto")},VC={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ws?(pu("beforeI2svg",t),xs("pseudoElements2svg",t),xs("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot;yn.autoReplaceSvg===!1&&(yn.autoReplaceSvg=!0),yn.observeMutations=!0,AC(function(){GC({autoReplaceSvgRoot:r}),pu("watch",t)})}},$C={icon:function(t){if(t===null)return null;if(Yp(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:xc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var r=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],l=Gm(t[0]);return{prefix:l,iconName:xc(l,r)||r}}if(typeof t=="string"&&(t.indexOf("".concat(yn.familyPrefix,"-"))>-1||t.match(lC))){var c=Hm(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||ml(),iconName:xc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var f=ml();return{prefix:f,iconName:xc(f,t)||t}}}},yo={noAuto:UC,config:yn,dom:VC,parse:$C,library:B3,findIconDefinition:k1,toHtml:Kf},GC=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.autoReplaceSvgRoot,l=r===void 0?Sr:r;(Object.keys(ua.styles).length>0||yn.autoFetchSvg)&&ws&&yn.autoReplaceSvg&&yo.dom.i2svg({node:l})};function Wm(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(l){return Kf(l)})}}),Object.defineProperty(e,"node",{get:function(){if(!!ws){var l=Sr.createElement("div");return l.innerHTML=e.html,l.children}}}),e}function HC(e){var t=e.children,r=e.main,l=e.mask,c=e.attributes,f=e.styles,g=e.transform;if(bv(g)&&r.found&&!l.found){var s=r.width,_=r.height,E={x:s/_/2,y:.5};c.style=$m(Jt(Jt({},f),{},{"transform-origin":"".concat(E.x+g.x/16,"em ").concat(E.y+g.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function WC(e){var t=e.prefix,r=e.iconName,l=e.children,c=e.attributes,f=e.symbol,g=f===!0?"".concat(t,"-").concat(yn.familyPrefix,"-").concat(r):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Jt(Jt({},c),{},{id:g}),children:l}]}]}function Cv(e){var t=e.icons,r=t.main,l=t.mask,c=e.prefix,f=e.iconName,g=e.transform,s=e.symbol,_=e.title,E=e.maskId,C=e.titleId,S=e.extra,I=e.watchable,D=I===void 0?!1:I,J=l.found?l:r,X=J.width,G=J.height,U=c==="fak",H=[yn.replacementClass,f?"".concat(yn.familyPrefix,"-").concat(f):""].filter(function(B){return S.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(S.classes).join(" "),$={children:[],attributes:Jt(Jt({},S.attributes),{},{"data-prefix":c,"data-icon":f,class:H,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(X," ").concat(G)})},ne=U&&!~S.classes.indexOf("fa-fw")?{width:"".concat(X/G*16*.0625,"em")}:{};D&&($.attributes[du]=""),_&&($.children.push({tag:"title",attributes:{id:$.attributes["aria-labelledby"]||"title-".concat(C||jf())},children:[_]}),delete $.attributes.title);var W=Jt(Jt({},$),{},{prefix:c,iconName:f,main:r,mask:l,maskId:E,transform:g,symbol:s,styles:Jt(Jt({},ne),S.styles)}),F=l.found&&r.found?xs("generateAbstractMask",W)||{children:[],attributes:{}}:xs("generateAbstractIcon",W)||{children:[],attributes:{}},w=F.children,k=F.attributes;return W.children=w,W.attributes=k,s?WC(W):HC(W)}function sb(e){var t=e.content,r=e.width,l=e.height,c=e.transform,f=e.title,g=e.extra,s=e.watchable,_=s===void 0?!1:s,E=Jt(Jt(Jt({},g.attributes),f?{title:f}:{}),{},{class:g.classes.join(" ")});_&&(E[du]="");var C=Jt({},g.styles);bv(c)&&(C.transform=EC({transform:c,startCentered:!0,width:r,height:l}),C["-webkit-transform"]=C.transform);var S=$m(C);S.length>0&&(E.style=S);var I=[];return I.push({tag:"span",attributes:E,children:[t]}),f&&I.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),I}function ZC(e){var t=e.content,r=e.title,l=e.extra,c=Jt(Jt(Jt({},l.attributes),r?{title:r}:{}),{},{class:l.classes.join(" ")}),f=$m(l.styles);f.length>0&&(c.style=f);var g=[];return g.push({tag:"span",attributes:c,children:[t]}),r&&g.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),g}var _g=ua.styles;function M1(e){var t=e[0],r=e[1],l=e.slice(4),c=mv(l,1),f=c[0],g=null;return Array.isArray(f)?g={tag:"g",attributes:{class:"".concat(yn.familyPrefix,"-").concat(lu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(lu.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(lu.PRIMARY),fill:"currentColor",d:f[1]}}]}:g={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:r,icon:g}}var XC={found:!1,width:512,height:512};function YC(e,t){!w3&&!yn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function z1(e,t){var r=t;return t==="fa"&&yn.styleDefault!==null&&(t=ml()),new Promise(function(l,c){if(xs("missingIconAbstract"),r==="fa"){var f=F3(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&_g[t]&&_g[t][e]){var g=_g[t][e];return l(M1(g))}YC(e,t),l(Jt(Jt({},XC),{},{icon:yn.showMissingIcons&&e?xs("missingIconAbstract")||{}:{}}))})}var lb=function(){},L1=yn.measurePerformance&&Hd&&Hd.mark&&Hd.measure?Hd:{mark:lb,measure:lb},Kh='FA "6.0.0"',KC=function(t){return L1.mark("".concat(Kh," ").concat(t," begins")),function(){return j3(t)}},j3=function(t){L1.mark("".concat(Kh," ").concat(t," ends")),L1.measure("".concat(Kh," ").concat(t),"".concat(Kh," ").concat(t," begins"),"".concat(Kh," ").concat(t," ends"))},Tv={begin:KC,end:j3},gp=function(){};function ub(e){var t=e.getAttribute?e.getAttribute(du):null;return typeof t=="string"}function qC(e){var t=e.getAttribute?e.getAttribute(yv):null,r=e.getAttribute?e.getAttribute(vv):null;return t&&r}function JC(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(yn.replacementClass)}function QC(){if(yn.autoReplaceSvg===!0)return yp.replace;var e=yp[yn.autoReplaceSvg];return e||yp.replace}function eT(e){return Sr.createElementNS("http://www.w3.org/2000/svg",e)}function tT(e){return Sr.createElement(e)}function D3(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.ceFn,l=r===void 0?e.tag==="svg"?eT:tT:r;if(typeof e=="string")return Sr.createTextNode(e);var c=l(e.tag);Object.keys(e.attributes||[]).forEach(function(g){c.setAttribute(g,e.attributes[g])});var f=e.children||[];return f.forEach(function(g){c.appendChild(D3(g,{ceFn:l}))}),c}function nT(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var yp={replace:function(t){var r=t[0];if(r.parentNode)if(t[1].forEach(function(c){r.parentNode.insertBefore(D3(c),r)}),r.getAttribute(du)===null&&yn.keepOriginalSource){var l=Sr.createComment(nT(r));r.parentNode.replaceChild(l,r)}else r.remove()},nest:function(t){var r=t[0],l=t[1];if(~_v(r).indexOf(yn.replacementClass))return yp.replace(t);var c=new RegExp("".concat(yn.familyPrefix,"-.*"));if(delete l[0].attributes.id,l[0].attributes.class){var f=l[0].attributes.class.split(" ").reduce(function(s,_){return _===yn.replacementClass||_.match(c)?s.toSvg.push(_):s.toNode.push(_),s},{toNode:[],toSvg:[]});l[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?r.removeAttribute("class"):r.setAttribute("class",f.toNode.join(" "))}var g=l.map(function(s){return Kf(s)}).join(`
`);r.setAttribute(du,""),r.innerHTML=g}};function cb(e){e()}function N3(e,t){var r=typeof t=="function"?t:gp;if(e.length===0)r();else{var l=cb;yn.mutateApproach===oC&&(l=pl.requestAnimationFrame||cb),l(function(){var c=QC(),f=Tv.begin("mutate");e.map(c),f(),r()})}}var Av=!1;function U3(){Av=!0}function O1(){Av=!1}var Jp=null;function hb(e){if(!!tb&&!!yn.observeMutations){var t=e.treeCallback,r=t===void 0?gp:t,l=e.nodeCallback,c=l===void 0?gp:l,f=e.pseudoElementsCallback,g=f===void 0?gp:f,s=e.observeMutationsRoot,_=s===void 0?Sr:s;Jp=new tb(function(E){if(!Av){var C=ml();eh(E).forEach(function(S){if(S.type==="childList"&&S.addedNodes.length>0&&!ub(S.addedNodes[0])&&(yn.searchPseudoElements&&g(S.target),r(S.target)),S.type==="attributes"&&S.target.parentNode&&yn.searchPseudoElements&&g(S.target.parentNode),S.type==="attributes"&&ub(S.target)&&~fC.indexOf(S.attributeName))if(S.attributeName==="class"&&qC(S.target)){var I=Hm(_v(S.target)),D=I.prefix,J=I.iconName;S.target.setAttribute(yv,D||C),J&&S.target.setAttribute(vv,J)}else JC(S.target)&&c(S.target)})}}),ws&&Jp.observe(_,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function rT(){!Jp||Jp.disconnect()}function iT(e){var t=e.getAttribute("style"),r=[];return t&&(r=t.split(";").reduce(function(l,c){var f=c.split(":"),g=f[0],s=f.slice(1);return g&&s.length>0&&(l[g]=s.join(":").trim()),l},{})),r}function oT(e){var t=e.getAttribute("data-prefix"),r=e.getAttribute("data-icon"),l=e.innerText!==void 0?e.innerText.trim():"",c=Hm(_v(e));return c.prefix||(c.prefix=ml()),t&&r&&(c.prefix=t,c.iconName=r),c.iconName&&c.prefix||c.prefix&&l.length>0&&(c.iconName=FC(c.prefix,e.innerText)||Ev(c.prefix,A1(e.innerText))),c}function aT(e){var t=eh(e.attributes).reduce(function(c,f){return c.name!=="class"&&c.name!=="style"&&(c[f.name]=f.value),c},{}),r=e.getAttribute("title"),l=e.getAttribute("data-fa-title-id");return yn.autoA11y&&(r?t["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(l||jf()):(t["aria-hidden"]="true",t.focusable="false")),t}function sT(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Oa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function fb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},r=oT(e),l=r.iconName,c=r.prefix,f=r.rest,g=aT(e),s=P1("parseNodeAttributes",{},e),_=t.styleParser?iT(e):[];return Jt({iconName:l,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:Oa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:_,attributes:g}},s)}var lT=ua.styles;function V3(e){var t=yn.autoReplaceSvg==="nest"?fb(e,{styleParser:!1}):fb(e);return~t.extra.classes.indexOf(S3)?xs("generateLayersText",e,t):xs("generateSvgReplacementMutation",e,t)}function db(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ws)return Promise.resolve();var r=Sr.documentElement.classList,l=function(S){return r.add("".concat(nb,"-").concat(S))},c=function(S){return r.remove("".concat(nb,"-").concat(S))},f=yn.autoFetchSvg?Object.keys(xv):Object.keys(lT),g=[".".concat(S3,":not([").concat(du,"])")].concat(f.map(function(C){return".".concat(C,":not([").concat(du,"])")})).join(", ");if(g.length===0)return Promise.resolve();var s=[];try{s=eh(e.querySelectorAll(g))}catch{}if(s.length>0)l("pending"),c("complete");else return Promise.resolve();var _=Tv.begin("onTree"),E=s.reduce(function(C,S){try{var I=V3(S);I&&C.push(I)}catch(D){w3||D.name==="MissingIcon"&&console.error(D)}return C},[]);return new Promise(function(C,S){Promise.all(E).then(function(I){N3(I,function(){l("active"),l("complete"),c("pending"),typeof t=="function"&&t(),_(),C()})}).catch(function(I){_(),S(I)})})}function uT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;V3(e).then(function(r){r&&N3([r],t)})}function cT(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(t||{}).icon?t:k1(t||{}),c=r.mask;return c&&(c=(c||{}).icon?c:k1(c||{})),e(l,Jt(Jt({},r),{},{mask:c}))}}var hT=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=r.transform,c=l===void 0?Oa:l,f=r.symbol,g=f===void 0?!1:f,s=r.mask,_=s===void 0?null:s,E=r.maskId,C=E===void 0?null:E,S=r.title,I=S===void 0?null:S,D=r.titleId,J=D===void 0?null:D,X=r.classes,G=X===void 0?[]:X,U=r.attributes,H=U===void 0?{}:U,$=r.styles,ne=$===void 0?{}:$;if(!!t){var W=t.prefix,F=t.iconName,w=t.icon;return Wm(Jt({type:"icon"},t),function(){return pu("beforeDOMElementCreation",{iconDefinition:t,params:r}),yn.autoA11y&&(I?H["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(J||jf()):(H["aria-hidden"]="true",H.focusable="false")),Cv({icons:{main:M1(w),mask:_?M1(_.icon):{found:!1,width:null,height:null,icon:{}}},prefix:W,iconName:F,transform:Jt(Jt({},Oa),c),symbol:g,title:I,maskId:C,titleId:J,extra:{attributes:H,styles:ne,classes:G}})})}},fT={mixout:function(){return{icon:cT(hT)}},hooks:function(){return{mutationObserverCallbacks:function(r){return r.treeCallback=db,r.nodeCallback=uT,r}}},provides:function(t){t.i2svg=function(r){var l=r.node,c=l===void 0?Sr:l,f=r.callback,g=f===void 0?function(){}:f;return db(c,g)},t.generateSvgReplacementMutation=function(r,l){var c=l.iconName,f=l.title,g=l.titleId,s=l.prefix,_=l.transform,E=l.symbol,C=l.mask,S=l.maskId,I=l.extra;return new Promise(function(D,J){Promise.all([z1(c,s),C.iconName?z1(C.iconName,C.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(X){var G=mv(X,2),U=G[0],H=G[1];D([r,Cv({icons:{main:U,mask:H},prefix:s,iconName:c,transform:_,symbol:E,maskId:S,title:f,titleId:g,extra:I,watchable:!0})])}).catch(J)})},t.generateAbstractIcon=function(r){var l=r.children,c=r.attributes,f=r.main,g=r.transform,s=r.styles,_=$m(s);_.length>0&&(c.style=_);var E;return bv(g)&&(E=xs("generateAbstractTransformGrouping",{main:f,transform:g,containerWidth:f.width,iconWidth:f.width})),l.push(E||f.icon),{children:l,attributes:c}}}},dT={mixout:function(){return{layer:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.classes,f=c===void 0?[]:c;return Wm({type:"layer"},function(){pu("beforeDOMElementCreation",{assembler:r,params:l});var g=[];return r(function(s){Array.isArray(s)?s.map(function(_){g=g.concat(_.abstract)}):g=g.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(yn.familyPrefix,"-layers")].concat(Vm(f)).join(" ")},children:g}]})}}}},pT={mixout:function(){return{counter:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.title,f=c===void 0?null:c,g=l.classes,s=g===void 0?[]:g,_=l.attributes,E=_===void 0?{}:_,C=l.styles,S=C===void 0?{}:C;return Wm({type:"counter",content:r},function(){return pu("beforeDOMElementCreation",{content:r,params:l}),ZC({content:r.toString(),title:f,extra:{attributes:E,styles:S,classes:["".concat(yn.familyPrefix,"-layers-counter")].concat(Vm(s))}})})}}}},mT={mixout:function(){return{text:function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.transform,f=c===void 0?Oa:c,g=l.title,s=g===void 0?null:g,_=l.classes,E=_===void 0?[]:_,C=l.attributes,S=C===void 0?{}:C,I=l.styles,D=I===void 0?{}:I;return Wm({type:"text",content:r},function(){return pu("beforeDOMElementCreation",{content:r,params:l}),sb({content:r,transform:Jt(Jt({},Oa),f),title:s,extra:{attributes:S,styles:D,classes:["".concat(yn.familyPrefix,"-layers-text")].concat(Vm(E))}})})}}},provides:function(t){t.generateLayersText=function(r,l){var c=l.title,f=l.transform,g=l.extra,s=null,_=null;if(x3){var E=parseInt(getComputedStyle(r).fontSize,10),C=r.getBoundingClientRect();s=C.width/E,_=C.height/E}return yn.autoA11y&&!c&&(g.attributes["aria-hidden"]="true"),Promise.resolve([r,sb({content:r.innerHTML,width:s,height:_,transform:f,title:c,extra:g,watchable:!0})])}}},gT=new RegExp('"',"ug"),pb=[1105920,1112319];function yT(e){var t=e.replace(gT,""),r=kC(t,0),l=r>=pb[0]&&r<=pb[1],c=t.length===2?t[0]===t[1]:!1;return{value:A1(c?t[0]:t),isSecondary:l||c}}function mb(e,t){var r="".concat(iC).concat(t.replace(":","-"));return new Promise(function(l,c){if(e.getAttribute(r)!==null)return l();var f=eh(e.children),g=f.filter(function(F){return F.getAttribute(T1)===t})[0],s=pl.getComputedStyle(e,t),_=s.getPropertyValue("font-family").match(uC),E=s.getPropertyValue("font-weight"),C=s.getPropertyValue("content");if(g&&!_)return e.removeChild(g),l();if(_&&C!=="none"&&C!==""){var S=s.getPropertyValue("content"),I=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(_[2])?Kp[_[2].toLowerCase()]:cC[E],D=yT(S),J=D.value,X=D.isSecondary,G=_[0].startsWith("FontAwesome"),U=Ev(I,J),H=U;if(G){var $=BC(J);$.iconName&&$.prefix&&(U=$.iconName,I=$.prefix)}if(U&&!X&&(!g||g.getAttribute(yv)!==I||g.getAttribute(vv)!==H)){e.setAttribute(r,H),g&&e.removeChild(g);var ne=sT(),W=ne.extra;W.attributes[T1]=t,z1(U,I).then(function(F){var w=Cv(Jt(Jt({},ne),{},{icons:{main:F,mask:Sv()},prefix:I,iconName:H,extra:W,watchable:!0})),k=Sr.createElement("svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=w.map(function(B){return Kf(B)}).join(`
`),e.removeAttribute(r),l()}).catch(c)}else l()}else l()})}function vT(e){return Promise.all([mb(e,"::before"),mb(e,"::after")])}function xT(e){return e.parentNode!==document.head&&!~aC.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(T1)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function gb(e){if(!!ws)return new Promise(function(t,r){var l=eh(e.querySelectorAll("*")).filter(xT).map(vT),c=Tv.begin("searchPseudoElements");U3(),Promise.all(l).then(function(){c(),O1(),t()}).catch(function(){c(),O1(),r()})})}var _T={hooks:function(){return{mutationObserverCallbacks:function(r){return r.pseudoElementsCallback=gb,r}}},provides:function(t){t.pseudoElements2svg=function(r){var l=r.node,c=l===void 0?Sr:l;yn.searchPseudoElements&&gb(c)}}},yb=!1,bT={mixout:function(){return{dom:{unwatch:function(){U3(),yb=!0}}}},hooks:function(){return{bootstrap:function(){hb(P1("mutationObserverCallbacks",{}))},noAuto:function(){rT()},watch:function(r){var l=r.observeMutationsRoot;yb?O1():hb(P1("mutationObserverCallbacks",{observeMutationsRoot:l}))}}}},vb=function(t){var r={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(l,c){var f=c.toLowerCase().split("-"),g=f[0],s=f.slice(1).join("-");if(g&&s==="h")return l.flipX=!0,l;if(g&&s==="v")return l.flipY=!0,l;if(s=parseFloat(s),isNaN(s))return l;switch(g){case"grow":l.size=l.size+s;break;case"shrink":l.size=l.size-s;break;case"left":l.x=l.x-s;break;case"right":l.x=l.x+s;break;case"up":l.y=l.y-s;break;case"down":l.y=l.y+s;break;case"rotate":l.rotate=l.rotate+s;break}return l},r)},wT={mixout:function(){return{parse:{transform:function(r){return vb(r)}}}},hooks:function(){return{parseNodeAttributes:function(r,l){var c=l.getAttribute("data-fa-transform");return c&&(r.transform=vb(c)),r}}},provides:function(t){t.generateAbstractTransformGrouping=function(r){var l=r.main,c=r.transform,f=r.containerWidth,g=r.iconWidth,s={transform:"translate(".concat(f/2," 256)")},_="translate(".concat(c.x*32,", ").concat(c.y*32,") "),E="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),C="rotate(".concat(c.rotate," 0 0)"),S={transform:"".concat(_," ").concat(E," ").concat(C)},I={transform:"translate(".concat(g/2*-1," -256)")},D={outer:s,inner:S,path:I};return{tag:"g",attributes:Jt({},D.outer),children:[{tag:"g",attributes:Jt({},D.inner),children:[{tag:l.icon.tag,children:l.icon.children,attributes:Jt(Jt({},l.icon.attributes),D.path)}]}]}}}},bg={x:0,y:0,width:"100%",height:"100%"};function xb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function ET(e){return e.tag==="g"?e.children:[e]}var ST={hooks:function(){return{parseNodeAttributes:function(r,l){var c=l.getAttribute("data-fa-mask"),f=c?Hm(c.split(" ").map(function(g){return g.trim()})):Sv();return f.prefix||(f.prefix=ml()),r.mask=f,r.maskId=l.getAttribute("data-fa-mask-id"),r}}},provides:function(t){t.generateAbstractMask=function(r){var l=r.children,c=r.attributes,f=r.main,g=r.mask,s=r.maskId,_=r.transform,E=f.width,C=f.icon,S=g.width,I=g.icon,D=wC({transform:_,containerWidth:S,iconWidth:E}),J={tag:"rect",attributes:Jt(Jt({},bg),{},{fill:"white"})},X=C.children?{children:C.children.map(xb)}:{},G={tag:"g",attributes:Jt({},D.inner),children:[xb(Jt({tag:C.tag,attributes:Jt(Jt({},C.attributes),D.path)},X))]},U={tag:"g",attributes:Jt({},D.outer),children:[G]},H="mask-".concat(s||jf()),$="clip-".concat(s||jf()),ne={tag:"mask",attributes:Jt(Jt({},bg),{},{id:H,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[J,U]},W={tag:"defs",children:[{tag:"clipPath",attributes:{id:$},children:ET(I)},ne]};return l.push(W,{tag:"rect",attributes:Jt({fill:"currentColor","clip-path":"url(#".concat($,")"),mask:"url(#".concat(H,")")},bg)}),{children:l,attributes:c}}}},CT={provides:function(t){var r=!1;pl.matchMedia&&(r=pl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var l=[],c={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};l.push({tag:"path",attributes:Jt(Jt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var g=Jt(Jt({},f),{},{attributeName:"opacity"}),s={tag:"circle",attributes:Jt(Jt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return r||s.children.push({tag:"animate",attributes:Jt(Jt({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Jt(Jt({},g),{},{values:"1;0;1;1;0;1;"})}),l.push(s),l.push({tag:"path",attributes:Jt(Jt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:r?[]:[{tag:"animate",attributes:Jt(Jt({},g),{},{values:"1;0;0;0;0;1;"})}]}),r||l.push({tag:"path",attributes:Jt(Jt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Jt(Jt({},g),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:l}}}},TT={hooks:function(){return{parseNodeAttributes:function(r,l){var c=l.getAttribute("data-fa-symbol"),f=c===null?!1:c===""?!0:c;return r.symbol=f,r}}}},AT=[CC,fT,dT,pT,mT,_T,bT,wT,ST,CT,TT];NC(AT,{mixoutsTo:yo});yo.noAuto;yo.config;yo.library;yo.dom;var R1=yo.parse;yo.findIconDefinition;yo.toHtml;var IT=yo.icon;yo.layer;yo.text;yo.counter;var $3={exports:{}},PT="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kT=PT,MT=kT;function G3(){}function H3(){}H3.resetWarningCache=G3;var zT=function(){function e(l,c,f,g,s,_){if(_!==MT){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:H3,resetWarningCache:G3};return r.PropTypes=r,r};$3.exports=zT();var Xn=$3.exports;function _b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,l)}return r}function el(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_b(Object(r),!0).forEach(function(l){bc(e,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_b(Object(r)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(r,l))})}return e}function Qp(e){return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}function bc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LT(e,t){if(e==null)return{};var r={},l=Object.keys(e),c,f;for(f=0;f<l.length;f++)c=l[f],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function W3(e,t){if(e==null)return{};var r=LT(e,t),l,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)l=f[c],!(t.indexOf(l)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,l)||(r[l]=e[l]))}return r}function F1(e){return OT(e)||RT(e)||FT(e)||BT()}function OT(e){if(Array.isArray(e))return B1(e)}function RT(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FT(e,t){if(!!e){if(typeof e=="string")return B1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B1(e,t)}}function B1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,l=new Array(t);r<t;r++)l[r]=e[r];return l}function BT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jT(e){var t,r=e.beat,l=e.fade,c=e.flash,f=e.spin,g=e.spinPulse,s=e.spinReverse,_=e.pulse,E=e.fixedWidth,C=e.inverse,S=e.border,I=e.listItem,D=e.flip,J=e.size,X=e.rotation,G=e.pull,U=(t={"fa-beat":r,"fa-fade":l,"fa-flash":c,"fa-spin":f,"fa-spin-reverse":s,"fa-spin-pulse":g,"fa-pulse":_,"fa-fw":E,"fa-inverse":C,"fa-border":S,"fa-li":I,"fa-flip-horizontal":D==="horizontal"||D==="both","fa-flip-vertical":D==="vertical"||D==="both"},bc(t,"fa-".concat(J),typeof J!="undefined"&&J!==null),bc(t,"fa-rotate-".concat(X),typeof X!="undefined"&&X!==null&&X!==0),bc(t,"fa-pull-".concat(G),typeof G!="undefined"&&G!==null),bc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(U).map(function(H){return U[H]?H:null}).filter(function(H){return H})}function DT(e){return e=e-0,e===e}function Z3(e){return DT(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,r){return r?r.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var NT=["style"];function UT(e){return e.charAt(0).toUpperCase()+e.slice(1)}function VT(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,r){var l=r.indexOf(":"),c=Z3(r.slice(0,l)),f=r.slice(l+1).trim();return c.startsWith("webkit")?t[UT(c)]=f:t[c]=f,t},{})}function X3(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var l=(t.children||[]).map(function(_){return X3(e,_)}),c=Object.keys(t.attributes||{}).reduce(function(_,E){var C=t.attributes[E];switch(E){case"class":_.attrs.className=C,delete t.attributes.class;break;case"style":_.attrs.style=VT(C);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?_.attrs[E.toLowerCase()]=C:_.attrs[Z3(E)]=C}return _},{attrs:{}}),f=r.style,g=f===void 0?{}:f,s=W3(r,NT);return c.attrs.style=el(el({},c.attrs.style),g),e.apply(void 0,[t.tag,el(el({},c.attrs),s)].concat(F1(l)))}var Y3=!1;try{Y3=!0}catch{}function $T(){if(!Y3&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function bb(e){if(e&&Qp(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(R1.icon)return R1.icon(e);if(e===null)return null;if(e&&Qp(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function wg(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?bc({},e,t):{}}var GT=["forwardedRef"];function Ba(e){var t=e.forwardedRef,r=W3(e,GT),l=r.icon,c=r.mask,f=r.symbol,g=r.className,s=r.title,_=r.titleId,E=bb(l),C=wg("classes",[].concat(F1(jT(r)),F1(g.split(" ")))),S=wg("transform",typeof r.transform=="string"?R1.transform(r.transform):r.transform),I=wg("mask",bb(c)),D=IT(E,el(el(el(el({},C),S),I),{},{symbol:f,title:s,titleId:_}));if(!D)return $T("Could not find icon",E),null;var J=D.abstract,X={ref:t};return Object.keys(r).forEach(function(G){Ba.defaultProps.hasOwnProperty(G)||(X[G]=r[G])}),HT(J[0],X)}Ba.displayName="FontAwesomeIcon";Ba.propTypes={beat:Xn.bool,border:Xn.bool,className:Xn.string,fade:Xn.bool,flash:Xn.bool,mask:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),fixedWidth:Xn.bool,inverse:Xn.bool,flip:Xn.oneOf(["horizontal","vertical","both"]),icon:Xn.oneOfType([Xn.object,Xn.array,Xn.string]),listItem:Xn.bool,pull:Xn.oneOf(["right","left"]),pulse:Xn.bool,rotation:Xn.oneOf([0,90,180,270]),size:Xn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Xn.bool,spinPulse:Xn.bool,spinReverse:Xn.bool,symbol:Xn.oneOfType([Xn.bool,Xn.string]),title:Xn.string,transform:Xn.oneOfType([Xn.string,Xn.object]),swapOpacity:Xn.bool};Ba.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var HT=X3.bind(null,Lw.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var WT={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},ZT=WT,j1={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},XT={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]},Ro={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(l,c,f){function g(E,C){if(!c[E]){if(!l[E]){var S=typeof zd=="function"&&zd;if(!C&&S)return S(E,!0);if(s)return s(E,!0);var I=new Error("Cannot find module '"+E+"'");throw I.code="MODULE_NOT_FOUND",I}var D=c[E]={exports:{}};l[E][0].call(D.exports,function(J){var X=l[E][1][J];return g(X||J)},D,D.exports,r,l,c,f)}return c[E].exports}for(var s=typeof zd=="function"&&zd,_=0;_<f.length;_++)g(f[_]);return g}return r}()({1:[function(r,l,c){c.byteLength=I,c.toByteArray=J,c.fromByteArray=U;for(var f=[],g=[],s=typeof Uint8Array!="undefined"?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,C=_.length;E<C;++E)f[E]=_[E],g[_.charCodeAt(E)]=E;g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63;function S(H){var $=H.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ne=H.indexOf("=");ne===-1&&(ne=$);var W=ne===$?0:4-ne%4;return[ne,W]}function I(H){var $=S(H),ne=$[0],W=$[1];return(ne+W)*3/4-W}function D(H,$,ne){return($+ne)*3/4-ne}function J(H){var $,ne=S(H),W=ne[0],F=ne[1],w=new s(D(H,W,F)),k=0,B=F>0?W-4:W,q;for(q=0;q<B;q+=4)$=g[H.charCodeAt(q)]<<18|g[H.charCodeAt(q+1)]<<12|g[H.charCodeAt(q+2)]<<6|g[H.charCodeAt(q+3)],w[k++]=$>>16&255,w[k++]=$>>8&255,w[k++]=$&255;return F===2&&($=g[H.charCodeAt(q)]<<2|g[H.charCodeAt(q+1)]>>4,w[k++]=$&255),F===1&&($=g[H.charCodeAt(q)]<<10|g[H.charCodeAt(q+1)]<<4|g[H.charCodeAt(q+2)]>>2,w[k++]=$>>8&255,w[k++]=$&255),w}function X(H){return f[H>>18&63]+f[H>>12&63]+f[H>>6&63]+f[H&63]}function G(H,$,ne){for(var W,F=[],w=$;w<ne;w+=3)W=(H[w]<<16&16711680)+(H[w+1]<<8&65280)+(H[w+2]&255),F.push(X(W));return F.join("")}function U(H){for(var $,ne=H.length,W=ne%3,F=[],w=16383,k=0,B=ne-W;k<B;k+=w)F.push(G(H,k,k+w>B?B:k+w));return W===1?($=H[ne-1],F.push(f[$>>2]+f[$<<4&63]+"==")):W===2&&($=(H[ne-2]<<8)+H[ne-1],F.push(f[$>>10]+f[$>>4&63]+f[$<<2&63]+"=")),F.join("")}},{}],2:[function(r,l,c){(function(f){(function(){var g=r("base64-js"),s=r("ieee754");c.Buffer=S,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;var _=2147483647;c.kMaxLength=_,S.TYPED_ARRAY_SUPPORT=E(),!S.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var we=new Uint8Array(1);return we.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},we.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(!!S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(!!S.isBuffer(this))return this.byteOffset}});function C(we){if(we>_)throw new RangeError('The value "'+we+'" is invalid for option "size"');var R=new Uint8Array(we);return R.__proto__=S.prototype,R}function S(we,R,O){if(typeof we=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return X(we)}return I(we,R,O)}typeof Symbol!="undefined"&&Symbol.species!=null&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),S.poolSize=8192;function I(we,R,O){if(typeof we=="string")return G(we,R);if(ArrayBuffer.isView(we))return U(we);if(we==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we);if(on(we,ArrayBuffer)||we&&on(we.buffer,ArrayBuffer))return H(we,R,O);if(typeof we=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var pe=we.valueOf&&we.valueOf();if(pe!=null&&pe!==we)return S.from(pe,R,O);var Le=$(we);if(Le)return Le;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof we[Symbol.toPrimitive]=="function")return S.from(we[Symbol.toPrimitive]("string"),R,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we)}S.from=function(we,R,O){return I(we,R,O)},S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array;function D(we){if(typeof we!="number")throw new TypeError('"size" argument must be of type number');if(we<0)throw new RangeError('The value "'+we+'" is invalid for option "size"')}function J(we,R,O){return D(we),we<=0?C(we):R!==void 0?typeof O=="string"?C(we).fill(R,O):C(we).fill(R):C(we)}S.alloc=function(we,R,O){return J(we,R,O)};function X(we){return D(we),C(we<0?0:ne(we)|0)}S.allocUnsafe=function(we){return X(we)},S.allocUnsafeSlow=function(we){return X(we)};function G(we,R){if((typeof R!="string"||R==="")&&(R="utf8"),!S.isEncoding(R))throw new TypeError("Unknown encoding: "+R);var O=F(we,R)|0,pe=C(O),Le=pe.write(we,R);return Le!==O&&(pe=pe.slice(0,Le)),pe}function U(we){for(var R=we.length<0?0:ne(we.length)|0,O=C(R),pe=0;pe<R;pe+=1)O[pe]=we[pe]&255;return O}function H(we,R,O){if(R<0||we.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(we.byteLength<R+(O||0))throw new RangeError('"length" is outside of buffer bounds');var pe;return R===void 0&&O===void 0?pe=new Uint8Array(we):O===void 0?pe=new Uint8Array(we,R):pe=new Uint8Array(we,R,O),pe.__proto__=S.prototype,pe}function $(we){if(S.isBuffer(we)){var R=ne(we.length)|0,O=C(R);return O.length===0||we.copy(O,0,0,R),O}if(we.length!==void 0)return typeof we.length!="number"||En(we.length)?C(0):U(we);if(we.type==="Buffer"&&Array.isArray(we.data))return U(we.data)}function ne(we){if(we>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return we|0}function W(we){return+we!=we&&(we=0),S.alloc(+we)}S.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==S.prototype},S.compare=function(R,O){if(on(R,Uint8Array)&&(R=S.from(R,R.offset,R.byteLength)),on(O,Uint8Array)&&(O=S.from(O,O.offset,O.byteLength)),!S.isBuffer(R)||!S.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===O)return 0;for(var pe=R.length,Le=O.length,Ke=0,at=Math.min(pe,Le);Ke<at;++Ke)if(R[Ke]!==O[Ke]){pe=R[Ke],Le=O[Ke];break}return pe<Le?-1:Le<pe?1:0},S.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(R,O){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return S.alloc(0);var pe;if(O===void 0)for(O=0,pe=0;pe<R.length;++pe)O+=R[pe].length;var Le=S.allocUnsafe(O),Ke=0;for(pe=0;pe<R.length;++pe){var at=R[pe];if(on(at,Uint8Array)&&(at=S.from(at)),!S.isBuffer(at))throw new TypeError('"list" argument must be an Array of Buffers');at.copy(Le,Ke),Ke+=at.length}return Le};function F(we,R){if(S.isBuffer(we))return we.length;if(ArrayBuffer.isView(we)||on(we,ArrayBuffer))return we.byteLength;if(typeof we!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof we);var O=we.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&O===0)return 0;for(var Le=!1;;)switch(R){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Nt(we).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return An(we).length;default:if(Le)return pe?-1:Nt(we).length;R=(""+R).toLowerCase(),Le=!0}}S.byteLength=F;function w(we,R,O){var pe=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,R>>>=0,O<=R))return"";for(we||(we="utf8");;)switch(we){case"hex":return Te(this,R,O);case"utf8":case"utf-8":return le(this,R,O);case"ascii":return ce(this,R,O);case"latin1":case"binary":return ke(this,R,O);case"base64":return ie(this,R,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,R,O);default:if(pe)throw new TypeError("Unknown encoding: "+we);we=(we+"").toLowerCase(),pe=!0}}S.prototype._isBuffer=!0;function k(we,R,O){var pe=we[R];we[R]=we[O],we[O]=pe}S.prototype.swap16=function(){var R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<R;O+=2)k(this,O,O+1);return this},S.prototype.swap32=function(){var R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<R;O+=4)k(this,O,O+3),k(this,O+1,O+2);return this},S.prototype.swap64=function(){var R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<R;O+=8)k(this,O,O+7),k(this,O+1,O+6),k(this,O+2,O+5),k(this,O+3,O+4);return this},S.prototype.toString=function(){var R=this.length;return R===0?"":arguments.length===0?le(this,0,R):w.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(R){if(!S.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:S.compare(this,R)===0},S.prototype.inspect=function(){var R="",O=c.INSPECT_MAX_BYTES;return R=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(R+=" ... "),"<Buffer "+R+">"},S.prototype.compare=function(R,O,pe,Le,Ke){if(on(R,Uint8Array)&&(R=S.from(R,R.offset,R.byteLength)),!S.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(O===void 0&&(O=0),pe===void 0&&(pe=R?R.length:0),Le===void 0&&(Le=0),Ke===void 0&&(Ke=this.length),O<0||pe>R.length||Le<0||Ke>this.length)throw new RangeError("out of range index");if(Le>=Ke&&O>=pe)return 0;if(Le>=Ke)return-1;if(O>=pe)return 1;if(O>>>=0,pe>>>=0,Le>>>=0,Ke>>>=0,this===R)return 0;for(var at=Ke-Le,se=pe-O,T=Math.min(at,se),z=this.slice(Le,Ke),be=R.slice(O,pe),je=0;je<T;++je)if(z[je]!==be[je]){at=z[je],se=be[je];break}return at<se?-1:se<at?1:0};function B(we,R,O,pe,Le){if(we.length===0)return-1;if(typeof O=="string"?(pe=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,En(O)&&(O=Le?0:we.length-1),O<0&&(O=we.length+O),O>=we.length){if(Le)return-1;O=we.length-1}else if(O<0)if(Le)O=0;else return-1;if(typeof R=="string"&&(R=S.from(R,pe)),S.isBuffer(R))return R.length===0?-1:q(we,R,O,pe,Le);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?Le?Uint8Array.prototype.indexOf.call(we,R,O):Uint8Array.prototype.lastIndexOf.call(we,R,O):q(we,[R],O,pe,Le);throw new TypeError("val must be string, number or Buffer")}function q(we,R,O,pe,Le){var Ke=1,at=we.length,se=R.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(we.length<2||R.length<2)return-1;Ke=2,at/=2,se/=2,O/=2}function T(Qe,Ht){return Ke===1?Qe[Ht]:Qe.readUInt16BE(Ht*Ke)}var z;if(Le){var be=-1;for(z=O;z<at;z++)if(T(we,z)===T(R,be===-1?0:z-be)){if(be===-1&&(be=z),z-be+1===se)return be*Ke}else be!==-1&&(z-=z-be),be=-1}else for(O+se>at&&(O=at-se),z=O;z>=0;z--){for(var je=!0,Xe=0;Xe<se;Xe++)if(T(we,z+Xe)!==T(R,Xe)){je=!1;break}if(je)return z}return-1}S.prototype.includes=function(R,O,pe){return this.indexOf(R,O,pe)!==-1},S.prototype.indexOf=function(R,O,pe){return B(this,R,O,pe,!0)},S.prototype.lastIndexOf=function(R,O,pe){return B(this,R,O,pe,!1)};function K(we,R,O,pe){O=Number(O)||0;var Le=we.length-O;pe?(pe=Number(pe),pe>Le&&(pe=Le)):pe=Le;var Ke=R.length;pe>Ke/2&&(pe=Ke/2);for(var at=0;at<pe;++at){var se=parseInt(R.substr(at*2,2),16);if(En(se))return at;we[O+at]=se}return at}function fe(we,R,O,pe){return wn(Nt(R,we.length-O),we,O,pe)}function ge(we,R,O,pe){return wn(Bt(R),we,O,pe)}function xe(we,R,O,pe){return ge(we,R,O,pe)}function ee(we,R,O,pe){return wn(An(R),we,O,pe)}function re(we,R,O,pe){return wn(cn(R,we.length-O),we,O,pe)}S.prototype.write=function(R,O,pe,Le){if(O===void 0)Le="utf8",pe=this.length,O=0;else if(pe===void 0&&typeof O=="string")Le=O,pe=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(pe)?(pe=pe>>>0,Le===void 0&&(Le="utf8")):(Le=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ke=this.length-O;if((pe===void 0||pe>Ke)&&(pe=Ke),R.length>0&&(pe<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");Le||(Le="utf8");for(var at=!1;;)switch(Le){case"hex":return K(this,R,O,pe);case"utf8":case"utf-8":return fe(this,R,O,pe);case"ascii":return ge(this,R,O,pe);case"latin1":case"binary":return xe(this,R,O,pe);case"base64":return ee(this,R,O,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,R,O,pe);default:if(at)throw new TypeError("Unknown encoding: "+Le);Le=(""+Le).toLowerCase(),at=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(we,R,O){return R===0&&O===we.length?g.fromByteArray(we):g.fromByteArray(we.slice(R,O))}function le(we,R,O){O=Math.min(we.length,O);for(var pe=[],Le=R;Le<O;){var Ke=we[Le],at=null,se=Ke>239?4:Ke>223?3:Ke>191?2:1;if(Le+se<=O){var T,z,be,je;switch(se){case 1:Ke<128&&(at=Ke);break;case 2:T=we[Le+1],(T&192)===128&&(je=(Ke&31)<<6|T&63,je>127&&(at=je));break;case 3:T=we[Le+1],z=we[Le+2],(T&192)===128&&(z&192)===128&&(je=(Ke&15)<<12|(T&63)<<6|z&63,je>2047&&(je<55296||je>57343)&&(at=je));break;case 4:T=we[Le+1],z=we[Le+2],be=we[Le+3],(T&192)===128&&(z&192)===128&&(be&192)===128&&(je=(Ke&15)<<18|(T&63)<<12|(z&63)<<6|be&63,je>65535&&je<1114112&&(at=je))}}at===null?(at=65533,se=1):at>65535&&(at-=65536,pe.push(at>>>10&1023|55296),at=56320|at&1023),pe.push(at),Le+=se}return Ie(pe)}var _e=4096;function Ie(we){var R=we.length;if(R<=_e)return String.fromCharCode.apply(String,we);for(var O="",pe=0;pe<R;)O+=String.fromCharCode.apply(String,we.slice(pe,pe+=_e));return O}function ce(we,R,O){var pe="";O=Math.min(we.length,O);for(var Le=R;Le<O;++Le)pe+=String.fromCharCode(we[Le]&127);return pe}function ke(we,R,O){var pe="";O=Math.min(we.length,O);for(var Le=R;Le<O;++Le)pe+=String.fromCharCode(we[Le]);return pe}function Te(we,R,O){var pe=we.length;(!R||R<0)&&(R=0),(!O||O<0||O>pe)&&(O=pe);for(var Le="",Ke=R;Ke<O;++Ke)Le+=Et(we[Ke]);return Le}function Pe(we,R,O){for(var pe=we.slice(R,O),Le="",Ke=0;Ke<pe.length;Ke+=2)Le+=String.fromCharCode(pe[Ke]+pe[Ke+1]*256);return Le}S.prototype.slice=function(R,O){var pe=this.length;R=~~R,O=O===void 0?pe:~~O,R<0?(R+=pe,R<0&&(R=0)):R>pe&&(R=pe),O<0?(O+=pe,O<0&&(O=0)):O>pe&&(O=pe),O<R&&(O=R);var Le=this.subarray(R,O);return Le.__proto__=S.prototype,Le};function De(we,R,O){if(we%1!==0||we<0)throw new RangeError("offset is not uint");if(we+R>O)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||De(R,O,this.length);for(var Le=this[R],Ke=1,at=0;++at<O&&(Ke*=256);)Le+=this[R+at]*Ke;return Le},S.prototype.readUIntBE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||De(R,O,this.length);for(var Le=this[R+--O],Ke=1;O>0&&(Ke*=256);)Le+=this[R+--O]*Ke;return Le},S.prototype.readUInt8=function(R,O){return R=R>>>0,O||De(R,1,this.length),this[R]},S.prototype.readUInt16LE=function(R,O){return R=R>>>0,O||De(R,2,this.length),this[R]|this[R+1]<<8},S.prototype.readUInt16BE=function(R,O){return R=R>>>0,O||De(R,2,this.length),this[R]<<8|this[R+1]},S.prototype.readUInt32LE=function(R,O){return R=R>>>0,O||De(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},S.prototype.readUInt32BE=function(R,O){return R=R>>>0,O||De(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},S.prototype.readIntLE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||De(R,O,this.length);for(var Le=this[R],Ke=1,at=0;++at<O&&(Ke*=256);)Le+=this[R+at]*Ke;return Ke*=128,Le>=Ke&&(Le-=Math.pow(2,8*O)),Le},S.prototype.readIntBE=function(R,O,pe){R=R>>>0,O=O>>>0,pe||De(R,O,this.length);for(var Le=O,Ke=1,at=this[R+--Le];Le>0&&(Ke*=256);)at+=this[R+--Le]*Ke;return Ke*=128,at>=Ke&&(at-=Math.pow(2,8*O)),at},S.prototype.readInt8=function(R,O){return R=R>>>0,O||De(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},S.prototype.readInt16LE=function(R,O){R=R>>>0,O||De(R,2,this.length);var pe=this[R]|this[R+1]<<8;return pe&32768?pe|4294901760:pe},S.prototype.readInt16BE=function(R,O){R=R>>>0,O||De(R,2,this.length);var pe=this[R+1]|this[R]<<8;return pe&32768?pe|4294901760:pe},S.prototype.readInt32LE=function(R,O){return R=R>>>0,O||De(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},S.prototype.readInt32BE=function(R,O){return R=R>>>0,O||De(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},S.prototype.readFloatLE=function(R,O){return R=R>>>0,O||De(R,4,this.length),s.read(this,R,!0,23,4)},S.prototype.readFloatBE=function(R,O){return R=R>>>0,O||De(R,4,this.length),s.read(this,R,!1,23,4)},S.prototype.readDoubleLE=function(R,O){return R=R>>>0,O||De(R,8,this.length),s.read(this,R,!0,52,8)},S.prototype.readDoubleBE=function(R,O){return R=R>>>0,O||De(R,8,this.length),s.read(this,R,!1,52,8)};function Ue(we,R,O,pe,Le,Ke){if(!S.isBuffer(we))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Le||R<Ke)throw new RangeError('"value" argument is out of bounds');if(O+pe>we.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(R,O,pe,Le){if(R=+R,O=O>>>0,pe=pe>>>0,!Le){var Ke=Math.pow(2,8*pe)-1;Ue(this,R,O,pe,Ke,0)}var at=1,se=0;for(this[O]=R&255;++se<pe&&(at*=256);)this[O+se]=R/at&255;return O+pe},S.prototype.writeUIntBE=function(R,O,pe,Le){if(R=+R,O=O>>>0,pe=pe>>>0,!Le){var Ke=Math.pow(2,8*pe)-1;Ue(this,R,O,pe,Ke,0)}var at=pe-1,se=1;for(this[O+at]=R&255;--at>=0&&(se*=256);)this[O+at]=R/se&255;return O+pe},S.prototype.writeUInt8=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,1,255,0),this[O]=R&255,O+1},S.prototype.writeUInt16LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,2,65535,0),this[O]=R&255,this[O+1]=R>>>8,O+2},S.prototype.writeUInt16BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,2,65535,0),this[O]=R>>>8,this[O+1]=R&255,O+2},S.prototype.writeUInt32LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,4,4294967295,0),this[O+3]=R>>>24,this[O+2]=R>>>16,this[O+1]=R>>>8,this[O]=R&255,O+4},S.prototype.writeUInt32BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,4,4294967295,0),this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255,O+4},S.prototype.writeIntLE=function(R,O,pe,Le){if(R=+R,O=O>>>0,!Le){var Ke=Math.pow(2,8*pe-1);Ue(this,R,O,pe,Ke-1,-Ke)}var at=0,se=1,T=0;for(this[O]=R&255;++at<pe&&(se*=256);)R<0&&T===0&&this[O+at-1]!==0&&(T=1),this[O+at]=(R/se>>0)-T&255;return O+pe},S.prototype.writeIntBE=function(R,O,pe,Le){if(R=+R,O=O>>>0,!Le){var Ke=Math.pow(2,8*pe-1);Ue(this,R,O,pe,Ke-1,-Ke)}var at=pe-1,se=1,T=0;for(this[O+at]=R&255;--at>=0&&(se*=256);)R<0&&T===0&&this[O+at+1]!==0&&(T=1),this[O+at]=(R/se>>0)-T&255;return O+pe},S.prototype.writeInt8=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,1,127,-128),R<0&&(R=255+R+1),this[O]=R&255,O+1},S.prototype.writeInt16LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,2,32767,-32768),this[O]=R&255,this[O+1]=R>>>8,O+2},S.prototype.writeInt16BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,2,32767,-32768),this[O]=R>>>8,this[O+1]=R&255,O+2},S.prototype.writeInt32LE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,4,2147483647,-2147483648),this[O]=R&255,this[O+1]=R>>>8,this[O+2]=R>>>16,this[O+3]=R>>>24,O+4},S.prototype.writeInt32BE=function(R,O,pe){return R=+R,O=O>>>0,pe||Ue(this,R,O,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255,O+4};function qe(we,R,O,pe,Le,Ke){if(O+pe>we.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ot(we,R,O,pe,Le){return R=+R,O=O>>>0,Le||qe(we,R,O,4),s.write(we,R,O,pe,23,4),O+4}S.prototype.writeFloatLE=function(R,O,pe){return ot(this,R,O,!0,pe)},S.prototype.writeFloatBE=function(R,O,pe){return ot(this,R,O,!1,pe)};function dt(we,R,O,pe,Le){return R=+R,O=O>>>0,Le||qe(we,R,O,8),s.write(we,R,O,pe,52,8),O+8}S.prototype.writeDoubleLE=function(R,O,pe){return dt(this,R,O,!0,pe)},S.prototype.writeDoubleBE=function(R,O,pe){return dt(this,R,O,!1,pe)},S.prototype.copy=function(R,O,pe,Le){if(!S.isBuffer(R))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Le&&Le!==0&&(Le=this.length),O>=R.length&&(O=R.length),O||(O=0),Le>0&&Le<pe&&(Le=pe),Le===pe||R.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("sourceEnd out of bounds");Le>this.length&&(Le=this.length),R.length-O<Le-pe&&(Le=R.length-O+pe);var Ke=Le-pe;if(this===R&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(O,pe,Le);else if(this===R&&pe<O&&O<Le)for(var at=Ke-1;at>=0;--at)R[at+O]=this[at+pe];else Uint8Array.prototype.set.call(R,this.subarray(pe,Le),O);return Ke},S.prototype.fill=function(R,O,pe,Le){if(typeof R=="string"){if(typeof O=="string"?(Le=O,O=0,pe=this.length):typeof pe=="string"&&(Le=pe,pe=this.length),Le!==void 0&&typeof Le!="string")throw new TypeError("encoding must be a string");if(typeof Le=="string"&&!S.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);if(R.length===1){var Ke=R.charCodeAt(0);(Le==="utf8"&&Ke<128||Le==="latin1")&&(R=Ke)}}else typeof R=="number"&&(R=R&255);if(O<0||this.length<O||this.length<pe)throw new RangeError("Out of range index");if(pe<=O)return this;O=O>>>0,pe=pe===void 0?this.length:pe>>>0,R||(R=0);var at;if(typeof R=="number")for(at=O;at<pe;++at)this[at]=R;else{var se=S.isBuffer(R)?R:S.from(R,Le),T=se.length;if(T===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(at=0;at<pe-O;++at)this[at+O]=se[at%T]}return this};var Pt=/[^+/0-9A-Za-z-_]/g;function ht(we){if(we=we.split("=")[0],we=we.trim().replace(Pt,""),we.length<2)return"";for(;we.length%4!==0;)we=we+"=";return we}function Et(we){return we<16?"0"+we.toString(16):we.toString(16)}function Nt(we,R){R=R||1/0;for(var O,pe=we.length,Le=null,Ke=[],at=0;at<pe;++at){if(O=we.charCodeAt(at),O>55295&&O<57344){if(!Le){if(O>56319){(R-=3)>-1&&Ke.push(239,191,189);continue}else if(at+1===pe){(R-=3)>-1&&Ke.push(239,191,189);continue}Le=O;continue}if(O<56320){(R-=3)>-1&&Ke.push(239,191,189),Le=O;continue}O=(Le-55296<<10|O-56320)+65536}else Le&&(R-=3)>-1&&Ke.push(239,191,189);if(Le=null,O<128){if((R-=1)<0)break;Ke.push(O)}else if(O<2048){if((R-=2)<0)break;Ke.push(O>>6|192,O&63|128)}else if(O<65536){if((R-=3)<0)break;Ke.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((R-=4)<0)break;Ke.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Ke}function Bt(we){for(var R=[],O=0;O<we.length;++O)R.push(we.charCodeAt(O)&255);return R}function cn(we,R){for(var O,pe,Le,Ke=[],at=0;at<we.length&&!((R-=2)<0);++at)O=we.charCodeAt(at),pe=O>>8,Le=O%256,Ke.push(Le),Ke.push(pe);return Ke}function An(we){return g.toByteArray(ht(we))}function wn(we,R,O,pe){for(var Le=0;Le<pe&&!(Le+O>=R.length||Le>=we.length);++Le)R[Le+O]=we[Le];return Le}function on(we,R){return we instanceof R||we!=null&&we.constructor!=null&&we.constructor.name!=null&&we.constructor.name===R.name}function En(we){return we!==we}}).call(this)}).call(this,r("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(r,l,c){const f=r("./validator"),g=r("./xmlparser/XMLParser"),s=r("./xmlbuilder/json2xml");l.exports={XMLParser:g,XMLValidator:f,XMLBuilder:s}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(r,l,c){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",g=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",s="["+f+"]["+g+"]*",_=new RegExp("^"+s+"$"),E=function(S,I){const D=[];let J=I.exec(S);for(;J;){const X=[];X.startIndex=I.lastIndex-J[0].length;const G=J.length;for(let U=0;U<G;U++)X.push(J[U]);D.push(X),J=I.exec(S)}return D},C=function(S){const I=_.exec(S);return!(I===null||typeof I=="undefined")};c.isExist=function(S){return typeof S!="undefined"},c.isEmptyObject=function(S){return Object.keys(S).length===0},c.merge=function(S,I,D){if(I){const J=Object.keys(I),X=J.length;for(let G=0;G<X;G++)D==="strict"?S[J[G]]=[I[J[G]]]:S[J[G]]=I[J[G]]}},c.getValue=function(S){return c.isExist(S)?S:""},c.isName=C,c.getAllMatches=E,c.nameRegexp=s},{}],5:[function(r,l,c){const f=r("./util"),g={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(F,w){w=Object.assign({},g,w);const k=[];let B=!1,q=!1;F[0]==="\uFEFF"&&(F=F.substr(1));for(let K=0;K<F.length;K++)if(F[K]==="<"&&F[K+1]==="?"){if(K+=2,K=_(F,K),K.err)return K}else if(F[K]==="<"){let fe=K;if(K++,F[K]==="!"){K=E(F,K);continue}else{let ge=!1;F[K]==="/"&&(ge=!0,K++);let xe="";for(;K<F.length&&F[K]!==">"&&F[K]!==" "&&F[K]!=="	"&&F[K]!==`
`&&F[K]!=="\r";K++)xe+=F[K];if(xe=xe.trim(),xe[xe.length-1]==="/"&&(xe=xe.substring(0,xe.length-1),K--),!$(xe)){let ie;return xe.trim().length===0?ie="Invalid space after '<'.":ie="Tag '"+xe+"' is an invalid name.",U("InvalidTag",ie,ne(F,K))}const ee=I(F,K);if(ee===!1)return U("InvalidAttr","Attributes for '"+xe+"' have open quote.",ne(F,K));let re=ee.value;if(K=ee.index,re[re.length-1]==="/"){const ie=K-re.length;re=re.substring(0,re.length-1);const le=J(re,w);if(le===!0)B=!0;else return U(le.err.code,le.err.msg,ne(F,ie+le.err.line))}else if(ge)if(ee.tagClosed){if(re.trim().length>0)return U("InvalidTag","Closing tag '"+xe+"' can't have attributes or invalid starting.",ne(F,fe));{const ie=k.pop();if(xe!==ie.tagName){let le=ne(F,ie.tagStartPos);return U("InvalidTag","Expected closing tag '"+ie.tagName+"' (opened in line "+le.line+", col "+le.col+") instead of closing tag '"+xe+"'.",ne(F,fe))}k.length==0&&(q=!0)}}else return U("InvalidTag","Closing tag '"+xe+"' doesn't have proper closing.",ne(F,K));else{const ie=J(re,w);if(ie!==!0)return U(ie.err.code,ie.err.msg,ne(F,K-re.length+ie.err.line));if(q===!0)return U("InvalidXml","Multiple possible root nodes found.",ne(F,K));w.unpairedTags.indexOf(xe)!==-1||k.push({tagName:xe,tagStartPos:fe}),B=!0}for(K++;K<F.length;K++)if(F[K]==="<")if(F[K+1]==="!"){K++,K=E(F,K);continue}else if(F[K+1]==="?"){if(K=_(F,++K),K.err)return K}else break;else if(F[K]==="&"){const ie=G(F,K);if(ie==-1)return U("InvalidChar","char '&' is not expected.",ne(F,K));K=ie}else if(q===!0&&!s(F[K]))return U("InvalidXml","Extra text at the end",ne(F,K));F[K]==="<"&&K--}}else{if(s(F[K]))continue;return U("InvalidChar","char '"+F[K]+"' is not expected.",ne(F,K))}if(B){if(k.length==1)return U("InvalidTag","Unclosed tag '"+k[0].tagName+"'.",ne(F,k[0].tagStartPos));if(k.length>0)return U("InvalidXml","Invalid '"+JSON.stringify(k.map(K=>K.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return U("InvalidXml","Start tag expected.",1);return!0};function s(F){return F===" "||F==="	"||F===`
`||F==="\r"}function _(F,w){const k=w;for(;w<F.length;w++)if(F[w]=="?"||F[w]==" "){const B=F.substr(k,w-k);if(w>5&&B==="xml")return U("InvalidXml","XML declaration allowed only at the start of the document.",ne(F,w));if(F[w]=="?"&&F[w+1]==">"){w++;break}else continue}return w}function E(F,w){if(F.length>w+5&&F[w+1]==="-"&&F[w+2]==="-"){for(w+=3;w<F.length;w++)if(F[w]==="-"&&F[w+1]==="-"&&F[w+2]===">"){w+=2;break}}else if(F.length>w+8&&F[w+1]==="D"&&F[w+2]==="O"&&F[w+3]==="C"&&F[w+4]==="T"&&F[w+5]==="Y"&&F[w+6]==="P"&&F[w+7]==="E"){let k=1;for(w+=8;w<F.length;w++)if(F[w]==="<")k++;else if(F[w]===">"&&(k--,k===0))break}else if(F.length>w+9&&F[w+1]==="["&&F[w+2]==="C"&&F[w+3]==="D"&&F[w+4]==="A"&&F[w+5]==="T"&&F[w+6]==="A"&&F[w+7]==="["){for(w+=8;w<F.length;w++)if(F[w]==="]"&&F[w+1]==="]"&&F[w+2]===">"){w+=2;break}}return w}const C='"',S="'";function I(F,w){let k="",B="",q=!1;for(;w<F.length;w++){if(F[w]===C||F[w]===S)B===""?B=F[w]:B!==F[w]||(B="");else if(F[w]===">"&&B===""){q=!0;break}k+=F[w]}return B!==""?!1:{value:k,index:w,tagClosed:q}}const D=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function J(F,w){const k=f.getAllMatches(F,D),B={};for(let q=0;q<k.length;q++){if(k[q][1].length===0)return U("InvalidAttr","Attribute '"+k[q][2]+"' has no space in starting.",W(k[q]));if(k[q][3]!==void 0&&k[q][4]===void 0)return U("InvalidAttr","Attribute '"+k[q][2]+"' is without value.",W(k[q]));if(k[q][3]===void 0&&!w.allowBooleanAttributes)return U("InvalidAttr","boolean attribute '"+k[q][2]+"' is not allowed.",W(k[q]));const K=k[q][2];if(!H(K))return U("InvalidAttr","Attribute '"+K+"' is an invalid name.",W(k[q]));if(!B.hasOwnProperty(K))B[K]=1;else return U("InvalidAttr","Attribute '"+K+"' is repeated.",W(k[q]))}return!0}function X(F,w){let k=/\d/;for(F[w]==="x"&&(w++,k=/[\da-fA-F]/);w<F.length;w++){if(F[w]===";")return w;if(!F[w].match(k))break}return-1}function G(F,w){if(w++,F[w]===";")return-1;if(F[w]==="#")return w++,X(F,w);let k=0;for(;w<F.length;w++,k++)if(!(F[w].match(/\w/)&&k<20)){if(F[w]===";")break;return-1}return w}function U(F,w,k){return{err:{code:F,msg:w,line:k.line||k,col:k.col}}}function H(F){return f.isName(F)}function $(F){return f.isName(F)}function ne(F,w){const k=F.substring(0,w).split(/\r?\n/);return{line:k.length,col:k[k.length-1].length+1}}function W(F){return F.startIndex+F[1].length}},{"./util":4}],6:[function(r,l,c){const f=r("./orderedJs2Xml"),g={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressBooleanAttributes:!0,tagValueProcessor:function(G,U){return U},attributeValueProcessor:function(G,U){return U},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:{">":{regex:new RegExp(">","g"),val:"&gt;"},"<":{regex:new RegExp("<","g"),val:"&lt;"},sQuot:{regex:new RegExp("'","g"),val:"&apos;"},dQuot:{regex:new RegExp('"',"g"),val:"&quot;"}},processEntities:!0,stopNodes:[]};function s(G){this.options=Object.assign({},g,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=X),this.processTextOrObjNode=_,this.options.format?(this.indentate=J,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=D,this.buildObjNode=C):(this.buildTextNode=S,this.buildObjNode=E),this.buildTextValNode=S,this.buildObjectNode=E,this.replaceEntitiesValue=I}s.prototype.build=function(G){return this.options.preserveOrder?f(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},s.prototype.j2x=function(G,U){let H="",$="";for(let ne in G)if(typeof G[ne]!="undefined")if(G[ne]===null)$+=this.indentate(U)+"<"+ne+"/"+this.tagEndChar;else if(G[ne]instanceof Date)$+=this.buildTextNode(G[ne],ne,"",U);else if(typeof G[ne]!="object"){const W=this.isAttribute(ne);if(W){let F=this.options.attributeValueProcessor(W,""+G[ne]);F=this.replaceEntitiesValue(F),H+=" "+W+'="'+F+'"'}else if(ne===this.options.textNodeName){let F=this.options.tagValueProcessor(ne,""+G[ne]);$+=this.replaceEntitiesValue(F)}else $+=this.buildTextNode(G[ne],ne,"",U)}else if(Array.isArray(G[ne])){const W=G[ne].length;for(let F=0;F<W;F++){const w=G[ne][F];typeof w=="undefined"||(w===null?$+=this.indentate(U)+"<"+ne+"/"+this.tagEndChar:typeof w=="object"?$+=this.processTextOrObjNode(w,ne,U):$+=this.buildTextNode(w,ne,"",U))}}else if(this.options.attributesGroupName&&ne===this.options.attributesGroupName){const W=Object.keys(G[ne]),F=W.length;for(let w=0;w<F;w++){let k=this.options.attributeValueProcessor(W[w],""+G[ne][W[w]]);k=this.replaceEntitiesValue(k),H+=" "+W[w]+'="'+k+'"'}}else $+=this.processTextOrObjNode(G[ne],ne,U);return{attrStr:H,val:$}};function _(G,U,H){const $=this.j2x(G,H+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode($.val,U,$.attrStr,H):this.buildObjNode($.val,U,$.attrStr,H)}function E(G,U,H,$){return H&&G.indexOf("<")===-1?this.indentate($)+"<"+U+H+">"+G+"</"+U+this.tagEndChar:this.indentate($)+"<"+U+H+this.tagEndChar+G+this.indentate($)+"</"+U+this.tagEndChar}function C(G,U,H,$){return G!==""?this.buildObjectNode(G,U,H,$):this.indentate($)+"<"+U+H+"/"+this.tagEndChar}function S(G,U,H,$){let ne=this.options.tagValueProcessor(U,G);return ne=this.replaceEntitiesValue(ne),this.indentate($)+"<"+U+H+">"+ne+"</"+U+this.tagEndChar}function I(G){if(G&&G.length>0&&this.options.processEntities)for(const U in this.options.entities){const H=this.options.entities[U];G=G.replace(H.regex,H.val)}return G}function D(G,U,H,$){return G===""&&this.options.unpairedTags.indexOf(U)!==-1?this.indentate($)+"<"+U+H+this.tagEndChar:G!==""?this.buildTextValNode(G,U,H,$):this.indentate($)+"<"+U+H+"/"+this.tagEndChar}function J(G){return this.options.indentBy.repeat(G)}function X(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}l.exports=s},{"./orderedJs2Xml":7}],7:[function(r,l,c){const{EOL:f}=r("os");function g(I,D){return s(I,D,"",0)}function s(I,D,J,X){let G="",U="";D.format&&D.indentBy.length>0&&(U=f+""+D.indentBy.repeat(X));for(let H=0;H<I.length;H++){const $=I[H],ne=_($);let W="";if(J.length===0?W=ne:W=`${J}.${ne}`,ne===D.textNodeName){let B=$[ne];C(W,D)||(B=D.tagValueProcessor(ne,B),B=S(B,D)),G+=U+B;continue}else if(ne===D.cdataPropName){G+=U+`<![CDATA[${$[ne][0][D.textNodeName]}]]>`;continue}else if(ne===D.commentPropName){G+=U+`<!--${$[ne][0][D.textNodeName]}-->`;continue}else if(ne[0]==="?"){const B=E($[":@"],D);G+=U+`<${ne} ${$[ne][0][D.textNodeName]} ${B}?>`;continue}const F=E($[":@"],D);let w=U+`<${ne}${F}`,k=s($[ne],D,W,X+1);D.unpairedTags.indexOf(ne)!==-1?G+=w+">":(!k||k.length===0)&&D.suppressEmptyNode?G+=w+"/>":G+=w+`>${k}${U}</${ne}>`}return G}function _(I){const D=Object.keys(I);for(let J=0;J<D.length;J++){const X=D[J];if(X!==":@")return X}}function E(I,D){let J="";if(I&&!D.ignoreAttributes)for(attr in I){let X=D.attributeValueProcessor(attr,I[attr]);X=S(X,D),X===!0&&D.suppressBooleanAttributes?J+=` ${attr.substr(D.attributeNamePrefix.length)}`:J+=` ${attr.substr(D.attributeNamePrefix.length)}="${X}"`}return J}function C(I,D){I=I.substr(0,I.length-D.textNodeName.length-1);let J=I.substr(I.lastIndexOf(".")+1);for(let X in D.stopNodes)if(D.stopNodes[X]===I||D.stopNodes[X]==="*."+J)return!0;return!1}function S(I,D){if(I&&I.length>0&&D.processEntities)for(const J in D.entities){const X=D.entities[J];I=I.replace(X.regex,X.val)}return I}l.exports=g},{os:15}],8:[function(r,l,c){function f(_,E){const C={};if(_[E+3]==="O"&&_[E+4]==="C"&&_[E+5]==="T"&&_[E+6]==="Y"&&_[E+7]==="P"&&_[E+8]==="E"){E=E+9;let S=1,I=!1,D=!1,J=!1,X="";for(;E<_.length;E++)if(_[E]==="<"){if(I&&_[E+1]==="!"&&_[E+2]==="E"&&_[E+3]==="N"&&_[E+4]==="T"&&_[E+5]==="I"&&_[E+6]==="T"&&_[E+7]==="Y")E+=7,D=!0;else if(I&&_[E+1]==="!"&&_[E+2]==="E"&&_[E+3]==="L"&&_[E+4]==="E"&&_[E+5]==="M"&&_[E+6]==="E"&&_[E+7]==="N"&&_[E+8]==="T")E+=8;else if(_[E+1]==="!"&&_[E+2]==="-"&&_[E+3]==="-")J=!0;else throw new Error("Invalid DOCTYPE");S++,X=""}else if(_[E]===">"){if(J)if(_[E-1]==="-"&&_[E-2]==="-")J=!1;else throw new Error("Invalid XML comment in DOCTYPE");else D&&(s(X,C),D=!1);if(S--,S===0)break}else _[E]==="["?I=!0:X+=_[E];if(S!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:C,i:E}}const g=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function s(_,E){const C=g.exec(_);C&&(E[C[1]]={regx:RegExp(`&${C[1]};`,"g"),val:C[3]})}l.exports=f},{}],9:[function(r,l,c){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(s,_){return _},attributeValueProcessor:function(s,_){return _},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1},g=function(s){return Object.assign({},f,s)};c.buildOptions=g,c.defaultOptions=f},{}],10:[function(r,l,c){const f=r("../util"),g=r("./xmlNode"),s=r("./DocTypeReader"),_=r("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,f.nameRegexp);class E{constructor(B){this.options=B,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=C,this.parseXml=X,this.parseTextData=S,this.resolveNameSpace=I,this.buildAttributesMap=J,this.isItStopNode=H,this.replaceEntitiesValue=G,this.readStopNodeData=F,this.saveTextToParentTag=U}}function C(k){const B=Object.keys(k);for(let q=0;q<B.length;q++){const K=B[q];this.lastEntities[K]={regex:new RegExp("&"+K+";","g"),val:k[K]}}}function S(k,B,q,K,fe,ge,xe){if(k!==void 0&&(this.options.trimValues&&!K&&(k=k.trim()),k.length>0)){xe||(k=this.replaceEntitiesValue(k));const ee=this.options.tagValueProcessor(B,k,q,fe,ge);return ee==null?k:typeof ee!=typeof k||ee!==k?ee:this.options.trimValues?w(k,this.options.parseTagValue,this.options.numberParseOptions):k.trim()===k?w(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function I(k){if(this.options.removeNSPrefix){const B=k.split(":"),q=k.charAt(0)==="/"?"/":"";if(B[0]==="xmlns")return"";B.length===2&&(k=q+B[1])}return k}const D=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function J(k,B){if(!this.options.ignoreAttributes&&typeof k=="string"){const q=f.getAllMatches(k,D),K=q.length,fe={};for(let ge=0;ge<K;ge++){const xe=this.resolveNameSpace(q[ge][1]);let ee=q[ge][4];const re=this.options.attributeNamePrefix+xe;if(xe.length)if(ee!==void 0){this.options.trimValues&&(ee=ee.trim()),ee=this.replaceEntitiesValue(ee);const ie=this.options.attributeValueProcessor(xe,ee,B);ie==null?fe[re]=ee:typeof ie!=typeof ee||ie!==ee?fe[re]=ie:fe[re]=w(ee,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(fe[re]=!0)}if(!Object.keys(fe).length)return;if(this.options.attributesGroupName){const ge={};return ge[this.options.attributesGroupName]=fe,ge}return fe}}const X=function(k){k=k.replace(/\r\n?/g,`
`);const B=new g("!xml");let q=B,K="",fe="";for(let ge=0;ge<k.length;ge++)if(k[ge]==="<")if(k[ge+1]==="/"){const ee=ne(k,">",ge,"Closing Tag is not closed.");let re=k.substring(ge+2,ee).trim();if(this.options.removeNSPrefix){const ie=re.indexOf(":");ie!==-1&&(re=re.substr(ie+1))}q&&(K=this.saveTextToParentTag(K,q,fe)),fe=fe.substr(0,fe.lastIndexOf(".")),q=this.tagsNodeStack.pop(),K="",ge=ee}else if(k[ge+1]==="?"){let ee=W(k,ge,!1,"?>");if(!ee)throw new Error("Pi Tag is not closed.");K=this.saveTextToParentTag(K,q,fe);const re=new g(ee.tagName);re.add(this.options.textNodeName,""),ee.tagName!==ee.tagExp&&ee.attrExpPresent&&(re[":@"]=this.buildAttributesMap(ee.tagExp,fe)),q.addChild(re),ge=ee.closeIndex+1}else if(k.substr(ge+1,3)==="!--"){const ee=ne(k,"-->",ge,"Comment is not closed.");if(this.options.commentPropName){const re=k.substring(ge+4,ee-2);K=this.saveTextToParentTag(K,q,fe),q.add(this.options.commentPropName,[{[this.options.textNodeName]:re}])}ge=ee}else if(k.substr(ge+1,2)==="!D"){const ee=s(k,ge);this.docTypeEntities=ee.entities,ge=ee.i}else if(k.substr(ge+1,2)==="!["){const ee=ne(k,"]]>",ge,"CDATA is not closed.")-2,re=k.substring(ge+9,ee);if(K=this.saveTextToParentTag(K,q,fe),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:re}]);else{let ie=this.parseTextData(re,q.tagname,fe,!0,!1,!0);ie||(ie=""),q.add(this.options.textNodeName,ie)}ge=ee+2}else{let ee=W(k,ge,this.options.removeNSPrefix),re=ee.tagName,ie=ee.tagExp,le=ee.attrExpPresent,_e=ee.closeIndex;q&&K&&q.tagname!=="!xml"&&(K=this.saveTextToParentTag(K,q,fe,!1)),re!==B.tagname&&(fe+=fe?"."+re:re);const Ie=q;if(Ie&&this.options.unpairedTags.indexOf(Ie.tagname)!==-1&&(q=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,fe,re)){let ce="";if(!(ie.length>0&&ie.lastIndexOf("/")===ie.length-1)){if(this.options.unpairedTags.indexOf(re)===-1){const Te=this.readStopNodeData(k,re,_e+1);if(!Te)throw new Error(`Unexpected end of ${re}`);ge=Te.i,ce=Te.tagContent}}const ke=new g(re);re!==ie&&le&&(ke[":@"]=this.buildAttributesMap(ie,fe)),ce&&(ce=this.parseTextData(ce,re,fe,!0,le,!0,!0)),fe=fe.substr(0,fe.lastIndexOf(".")),ke.add(this.options.textNodeName,ce),q.addChild(ke)}else{if(ie.length>0&&ie.lastIndexOf("/")===ie.length-1){re[re.length-1]==="/"?(re=re.substr(0,re.length-1),ie=re):ie=ie.substr(0,ie.length-1);const ce=new g(re);re!==ie&&le&&(ce[":@"]=this.buildAttributesMap(ie,fe)),fe=fe.substr(0,fe.lastIndexOf(".")),q.addChild(ce)}else{const ce=new g(re);this.tagsNodeStack.push(q),re!==ie&&le&&(ce[":@"]=this.buildAttributesMap(ie,fe)),q.addChild(ce),q=ce}K="",ge=_e}}else K+=k[ge];return B.child},G=function(k){if(this.options.processEntities){for(let B in this.docTypeEntities){const q=this.docTypeEntities[B];k=k.replace(q.regx,q.val)}for(let B in this.lastEntities){const q=this.lastEntities[B];k=k.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let B in this.htmlEntities){const q=this.htmlEntities[B];k=k.replace(q.regex,q.val)}}return k};function U(k,B,q,K){return k&&(K===void 0&&(K=Object.keys(B.child).length===0),k=this.parseTextData(k,B.tagname,q,!1,B[":@"]?Object.keys(B[":@"]).length!==0:!1,K),k!==void 0&&k!==""&&B.add(this.options.textNodeName,k),k=""),k}function H(k,B,q){const K="*."+q;for(const fe in k){const ge=k[fe];if(K===ge||B===ge)return!0}return!1}function $(k,B,q=">"){let K,fe="";for(let ge=B;ge<k.length;ge++){let xe=k[ge];if(K)xe===K&&(K="");else if(xe==='"'||xe==="'")K=xe;else if(xe===q[0])if(q[1]){if(k[ge+1]===q[1])return{data:fe,index:ge}}else return{data:fe,index:ge};else xe==="	"&&(xe=" ");fe+=xe}}function ne(k,B,q,K){const fe=k.indexOf(B,q);if(fe===-1)throw new Error(K);return fe+B.length-1}function W(k,B,q,K=">"){const fe=$(k,B+1,K);if(!fe)return;let ge=fe.data;const xe=fe.index,ee=ge.search(/\s/);let re=ge,ie=!0;if(ee!==-1&&(re=ge.substr(0,ee).replace(/\s\s*$/,""),ge=ge.substr(ee+1)),q){const le=re.indexOf(":");le!==-1&&(re=re.substr(le+1),ie=re!==fe.data.substr(le+1))}return{tagName:re,tagExp:ge,closeIndex:xe,attrExpPresent:ie}}function F(k,B,q){const K=q;for(;q<k.length;q++)if(k[q]==="<"&&k[q+1]==="/"){const fe=ne(k,">",q,`${B} is not closed`);if(k.substring(q+2,fe).trim()===B)return{tagContent:k.substring(K,q),i:fe};q=fe}}function w(k,B,q){if(B&&typeof k=="string"){const K=k.trim();return K==="true"?!0:K==="false"?!1:_(k,q)}else return f.isExist(k)?k:""}l.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:16}],11:[function(r,l,c){const{buildOptions:f}=r("./OptionsBuilder"),g=r("./OrderedObjParser"),{prettify:s}=r("./node2json"),_=r("../validator");class E{constructor(S){this.externalEntities={},this.options=f(S)}parse(S,I){if(typeof S!="string")if(S.toString)S=S.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(I){I===!0&&(I={});const X=_.validate(S,I);if(X!==!0)throw Error(`${X.err.msg}:${X.err.line}:${X.err.col}`)}const D=new g(this.options);D.addExternalEntities(this.externalEntities);const J=D.parseXml(S);return this.options.preserveOrder||J===void 0?J:s(J,this.options)}addEntity(S,I){if(I.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(S.indexOf("&")!==-1||S.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[S]=I}}l.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(r,l,c){function f(C,S){return g(C,S)}function g(C,S,I){let D;const J={};for(let X=0;X<C.length;X++){const G=C[X],U=s(G);let H="";if(I===void 0?H=U:H=I+"."+U,U===S.textNodeName)D===void 0?D=G[U]:D+=""+G[U];else{if(U===void 0)continue;if(G[U]){let $=g(G[U],S,H);const ne=E($,S);G[":@"]?_($,G[":@"],H,S):Object.keys($).length===1&&$[S.textNodeName]!==void 0&&!S.alwaysCreateTextNode?$=$[S.textNodeName]:Object.keys($).length===0&&(S.alwaysCreateTextNode?$[S.textNodeName]="":$=""),J[U]!==void 0?(Array.isArray(J[U])||(J[U]=[J[U]]),J[U].push($)):S.isArray(U,H,ne)?J[U]=[$]:J[U]=$}}}return typeof D=="string"?D.length>0&&(J[S.textNodeName]=D):D!==void 0&&(J[S.textNodeName]=D),J}function s(C){const S=Object.keys(C);for(let I=0;I<S.length;I++){const D=S[I];if(D!==":@")return D}}function _(C,S,I,D){if(S){const J=Object.keys(S),X=J.length;for(let G=0;G<X;G++){const U=J[G];D.isArray(U,I+"."+U,!0,!0)?C[U]=[S[U]]:C[U]=S[U]}}}function E(C,S){const I=Object.keys(C).length;return!!(I===0||I===1&&C[S.textNodeName])}c.prettify=f},{}],13:[function(r,l,c){class f{constructor(s){this.tagname=s,this.child=[],this[":@"]={}}add(s,_){this.child.push({[s]:_})}addChild(s){s[":@"]&&Object.keys(s[":@"]).length>0?this.child.push({[s.tagname]:s.child,[":@"]:s[":@"]}):this.child.push({[s.tagname]:s.child})}}l.exports=f},{}],14:[function(r,l,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(f,g,s,_,E){var C,S,I=E*8-_-1,D=(1<<I)-1,J=D>>1,X=-7,G=s?E-1:0,U=s?-1:1,H=f[g+G];for(G+=U,C=H&(1<<-X)-1,H>>=-X,X+=I;X>0;C=C*256+f[g+G],G+=U,X-=8);for(S=C&(1<<-X)-1,C>>=-X,X+=_;X>0;S=S*256+f[g+G],G+=U,X-=8);if(C===0)C=1-J;else{if(C===D)return S?NaN:(H?-1:1)*(1/0);S=S+Math.pow(2,_),C=C-J}return(H?-1:1)*S*Math.pow(2,C-_)},c.write=function(f,g,s,_,E,C){var S,I,D,J=C*8-E-1,X=(1<<J)-1,G=X>>1,U=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=_?0:C-1,$=_?1:-1,ne=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(I=isNaN(g)?1:0,S=X):(S=Math.floor(Math.log(g)/Math.LN2),g*(D=Math.pow(2,-S))<1&&(S--,D*=2),S+G>=1?g+=U/D:g+=U*Math.pow(2,1-G),g*D>=2&&(S++,D/=2),S+G>=X?(I=0,S=X):S+G>=1?(I=(g*D-1)*Math.pow(2,E),S=S+G):(I=g*Math.pow(2,G-1)*Math.pow(2,E),S=0));E>=8;f[s+H]=I&255,H+=$,I/=256,E-=8);for(S=S<<E|I,J+=E;J>0;f[s+H]=S&255,H+=$,S/=256,J-=8);f[s+H-$]|=ne*128}},{}],15:[function(r,l,c){c.endianness=function(){return"LE"},c.hostname=function(){return typeof location!="undefined"?location.hostname:""},c.loadavg=function(){return[]},c.uptime=function(){return 0},c.freemem=function(){return Number.MAX_VALUE},c.totalmem=function(){return Number.MAX_VALUE},c.cpus=function(){return[]},c.type=function(){return"Browser"},c.release=function(){return typeof navigator!="undefined"?navigator.appVersion:""},c.networkInterfaces=c.getNetworkInterfaces=function(){return{}},c.arch=function(){return"javascript"},c.platform=function(){return"browser"},c.tmpdir=c.tmpDir=function(){return"/tmp"},c.EOL=`
`,c.homedir=function(){return"/"}},{}],16:[function(r,l,c){const f=/^[-+]?0x[a-fA-F0-9]+$/,g=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const s={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function _(C,S={}){if(S=Object.assign({},s,S),!C||typeof C!="string")return C;let I=C.trim();if(S.skipLike!==void 0&&S.skipLike.test(I))return C;if(S.hex&&f.test(I))return Number.parseInt(I,16);{const D=g.exec(I);if(D){const J=D[1],X=D[2];let G=E(D[3]);const U=D[4]||D[6];if(!S.leadingZeros&&X.length>0&&J&&I[2]!==".")return C;if(!S.leadingZeros&&X.length>0&&!J&&I[1]!==".")return C;{const H=Number(I),$=""+H;return $.search(/[eE]/)!==-1||U?S.eNotation?H:C:I.indexOf(".")!==-1?$==="0"&&G===""||$===G||J&&$==="-"+G?H:C:X?G===$||J+G===$?H:C:I===$||I===J+$?H:C}}else return C}}function E(C){return C&&C.indexOf(".")!==-1&&(C=C.replace(/0+$/,""),C==="."?C="0":C[0]==="."?C="0"+C:C[C.length-1]==="."&&(C=C.substr(0,C.length-1))),C}l.exports=_},{}],17:[function(r,l,c){(function(f){(function(){var g=this&&this.__awaiter||function(I,D,J,X){function G(U){return U instanceof J?U:new J(function(H){H(U)})}return new(J||(J=Promise))(function(U,H){function $(F){try{W(X.next(F))}catch(w){H(w)}}function ne(F){try{W(X.throw(F))}catch(w){H(w)}}function W(F){F.done?U(F.value):G(F.value).then($,ne)}W((X=X.apply(I,D||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const s=r("../auth"),_=r("../config"),E=r("./_xml"),C=I=>typeof btoa=="undefined"?f.from(I,"binary").toString("base64"):btoa(I);function S(I,D,J){return g(this,void 0,void 0,function*(){const{apiUrl:X,authHeader:G,basicAuth:U,userAgent:H}=(0,_.getConfig)(),$=U&&`Basic ${C(`${U.username}:${U.password}`)}`,ne=(0,s.getAuthToken)()&&`Bearer ${(0,s.getAuthToken)()}`;let W=new URLSearchParams(D).toString();W&&(W=`?${W}`);const F=yield fetch(`${X}/api${I}${W}`,Object.assign(Object.assign({},J),{headers:Object.assign({Authorization:G||$||ne||"","User-Agent":H},J==null?void 0:J.headers)})),w=F.headers.get("Content-Type");if(w!=null&&w.startsWith("application/xml")){const k=yield F.text();return yield E.xmlParser.parse(k)}if(w!=null&&w.startsWith("application/json"))return F.json();if(F.ok)return yield F.text();throw new Error(`OSM API: ${yield F.text()}`)})}c.osmFetch=S}).call(this)}).call(this,r("buffer").Buffer)},{"../auth":38,"../config":40,"./_xml":18,buffer:2}],18:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const f=r("fast-xml-parser");c.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:g=>g!=="$"})},{"fast-xml-parser":3}],19:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const f=r("fast-xml-parser"),g=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,attributeValueProcessor:(C,S)=>S.replace(/&/g,"&amp;")});function s(C){return g.build({osm:{changeset:{tag:Object.entries(C).map(([S,I])=>({$k:S,$v:I}))}}})}c.createChangesetMetaXml=s;const _=(C,S,I)=>S.reduce((D,J)=>{const X={$id:J.id,$version:I?0:J.version,$changeset:C,tag:Object.entries(J.tags||{}).map(([G,U])=>({$k:G,$v:U}))};switch(J.type){case"node":{const G=Object.assign(Object.assign({},X),{$lat:J.lat,$lon:J.lon});return Object.assign(Object.assign({},D),{node:[...D.node,G]})}case"way":{if(!J.nodes)throw new Error("Way has no nodes");const G=Object.assign(Object.assign({},X),{nd:J.nodes.map(U=>({$ref:U}))});return Object.assign(Object.assign({},D),{way:[...D.way,G]})}case"relation":{if(!J.members)throw new Error("Relation has no members");const G=Object.assign(Object.assign({},X),{member:J.members.map(U=>({$type:U.type,$ref:U.ref,$role:U.role}))});return Object.assign(Object.assign({},D),{relation:[...D.relation,G]})}default:return D}},{node:[],way:[],relation:[]});function E(C,S,I){return g.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},I),{create:[_(C,S.create,!0)],modify:[_(C,S.modify)],delete:[Object.assign({"$if-unused":!0},_(C,S.delete))]})})}c.createOsmChangeXml=E},{"fast-xml-parser":3}],20:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const f=r("../_xml");function g(C){return{changeset:+C.$.changeset,id:+C.$.id,timestamp:C.$.timestamp,uid:+C.$.uid,user:C.$.user,version:+C.$.version,tags:C.tag?Object.fromEntries(C.tag.map(S=>[S.$.k,S.$.v])):void 0}}const s=C=>{const S=[];if(C.node){const I=C.node.map(D=>Object.assign(Object.assign({type:"node"},g(D)),{lat:+D.$.lat,lon:+D.$.lon}));S.push(...I)}if(C.way){const I=C.way.map(D=>{var J;return Object.assign(Object.assign({type:"way"},g(D)),{nodes:((J=D.nd)===null||J===void 0?void 0:J.map(X=>+X.$.ref))||[]})});S.push(...I)}if(C.relation){const I=C.relation.map(D=>{var J;return Object.assign(Object.assign({type:"relation"},g(D)),{members:((J=D.member)===null||J===void 0?void 0:J.map(X=>({ref:+X.$.ref,role:X.$.role,type:X.$.type})))||[]})});S.push(...I)}return S};function _(C){var S,I,D;return{create:((S=C.osmChange[0].create)===null||S===void 0?void 0:S.flatMap(s))||[],modify:((I=C.osmChange[0].modify)===null||I===void 0?void 0:I.flatMap(s))||[],delete:((D=C.osmChange[0].delete)===null||D===void 0?void 0:D.flatMap(s))||[]}}c.parseOsmChangeJson=_;function E(C){const S=f.xmlParser.parse(C);return console.log(S),_(S)}c.parseOsmChangeXml=E},{"../_xml":18}],21:[function(r,l,c){var f=this&&this.__awaiter||function(_,E,C,S){function I(D){return D instanceof C?D:new C(function(J){J(D)})}return new(C||(C=Promise))(function(D,J){function X(H){try{U(S.next(H))}catch($){J($)}}function G(H){try{U(S.throw(H))}catch($){J($)}}function U(H){H.done?D(H.value):I(H.value).then(X,G)}U((S=S.apply(_,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const g=r("../_osmFetch");function s(_,E){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/changeset/${_}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=s},{"../_osmFetch":17}],22:[function(r,l,c){var f=this&&this.__awaiter||function(E,C,S,I){function D(J){return J instanceof S?J:new S(function(X){X(J)})}return new(S||(S=Promise))(function(J,X){function G($){try{H(I.next($))}catch(ne){X(ne)}}function U($){try{H(I.throw($))}catch(ne){X(ne)}}function H($){$.done?J($.value):D($.value).then(G,U)}H((I=I.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const g=r("../_osmFetch"),s=r("./_parseOsmChangeXml");function _(E){return f(this,void 0,void 0,function*(){const C=yield(0,g.osmFetch)(`/0.6/changeset/${E}/download`);return(0,s.parseOsmChangeJson)(C)})}c.getChangesetDiff=_},{"../_osmFetch":17,"./_parseOsmChangeXml":20}],23:[function(r,l,c){var f=this&&this.__awaiter||function(S,I,D,J){function X(G){return G instanceof D?G:new D(function(U){U(G)})}return new(D||(D=Promise))(function(G,U){function H(W){try{ne(J.next(W))}catch(F){U(F)}}function $(W){try{ne(J.throw(W))}catch(F){U(F)}}function ne(W){W.done?G(W.value):X(W.value).then(H,$)}ne((J=J.apply(S,I||[])).next())})},g=this&&this.__rest||function(S,I){var D={};for(var J in S)Object.prototype.hasOwnProperty.call(S,J)&&I.indexOf(J)<0&&(D[J]=S[J]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,J=Object.getOwnPropertySymbols(S);X<J.length;X++)I.indexOf(J[X])<0&&Object.prototype.propertyIsEnumerable.call(S,J[X])&&(D[J[X]]=S[J[X]]);return D};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const s=r("../_osmFetch"),_=S=>{var I;return{id:+S.$.id,created_at:new Date(S.$.created_at),closed_at:new Date(S.$.closed_at),open:S.$.open==="true",comments_count:+S.$.comments_count,changes_count:+S.$.changes_count,min_lat:+S.$.min_lat,min_lon:+S.$.min_lon,max_lat:+S.$.max_lat,max_lon:+S.$.max_lon,uid:+S.$.uid,user:S.$.user,tags:Object.fromEntries(S.tag.map(D=>[D.$.k,D.$.v])),discussion:(I=S.discussion)===null||I===void 0?void 0:I[0].comment.map(D=>({date:new Date(D.$.date),user:D.$.user,uid:D.$.uid,text:D.text[0]}))}};function E(S){var I;return f(this,void 0,void 0,function*(){const{only:D}=S,J=g(S,["only"]);return((I=(yield(0,s.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},D&&{[D]:!0}),J))).osm[0].changeset)===null||I===void 0?void 0:I.map(_))||[]})}c.listChangesets=E;function C(S,I=!0){return f(this,void 0,void 0,function*(){return(yield(0,s.osmFetch)(`/0.6/changeset/${S}`,{include_discussion:I})).osm[0].changeset.map(_)[0]})}c.getChangeset=C},{"../_osmFetch":17}],24:[function(r,l,c){var f=this&&this.__createBinding||(Object.create?function(E,C,S,I){I===void 0&&(I=S),Object.defineProperty(E,I,{enumerable:!0,get:function(){return C[S]}})}:function(E,C,S,I){I===void 0&&(I=S),E[I]=C[S]}),g=this&&this.__exportStar||function(E,C){for(var S in E)S!=="default"&&!Object.prototype.hasOwnProperty.call(C,S)&&f(C,E,S)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,g(r("./createChangesetComment"),c),g(r("./getChangesetDiff"),c),g(r("./getChangesets"),c),g(r("./uploadChangeset"),c);var s=r("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return s.parseOsmChangeXml}});var _=r("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return _.createOsmChangeXml}})},{"./_createOsmChangeXml":19,"./_parseOsmChangeXml":20,"./createChangesetComment":21,"./getChangesetDiff":22,"./getChangesets":23,"./uploadChangeset":25}],25:[function(r,l,c){var f=this&&this.__awaiter||function(E,C,S,I){function D(J){return J instanceof S?J:new S(function(X){X(J)})}return new(S||(S=Promise))(function(J,X){function G($){try{H(I.next($))}catch(ne){X(ne)}}function U($){try{H(I.throw($))}catch(ne){X(ne)}}function H($){$.done?J($.value):D($.value).then(G,U)}H((I=I.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const g=r("../_osmFetch"),s=r("./_createOsmChangeXml");function _(E,C){return f(this,void 0,void 0,function*(){const S=(0,s.createChangesetMetaXml)(E),I=+(yield(0,g.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:S,headers:{"content-type":"application/xml; charset=utf-8"}})),D=(0,s.createOsmChangeXml)(I,C);return yield(0,g.osmFetch)(`/0.6/changeset/${I}/upload`,void 0,{method:"POST",body:D,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,g.osmFetch)(`/0.6/changeset/${I}/close`,void 0,{method:"PUT"}),+I})}c.uploadChangeset=_},{"../_osmFetch":17,"./_createOsmChangeXml":19}],26:[function(r,l,c){var f=this&&this.__awaiter||function(_,E,C,S){function I(D){return D instanceof C?D:new C(function(J){J(D)})}return new(C||(C=Promise))(function(D,J){function X(H){try{U(S.next(H))}catch($){J($)}}function G(H){try{U(S.throw(H))}catch($){J($)}}function U(H){H.done?D(H.value):I(H.value).then(X,G)}U((S=S.apply(_,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const g=r("./_osmFetch");function s(){return f(this,void 0,void 0,function*(){const _=yield(0,g.osmFetch)("/capabilities");return{limits:{maxArea:+_.osm[0].api[0].area[0].$.maximum,maxNoteArea:+_.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+_.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+_.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+_.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+_.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:_.osm[0].policy[0].imagery[0].blacklist.map(C=>C.$.regex)}}})}c.getCapabilities=s},{"./_osmFetch":17}],27:[function(r,l,c){var f=this&&this.__awaiter||function(D,J,X,G){function U(H){return H instanceof X?H:new X(function($){$(H)})}return new(X||(X=Promise))(function(H,$){function ne(w){try{F(G.next(w))}catch(k){$(k)}}function W(w){try{F(G.throw(w))}catch(k){$(k)}}function F(w){w.done?H(w.value):U(w.value).then(ne,W)}F((G=G.apply(D,J||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const g=r("./_osmFetch");function s(D,J,X){return f(this,void 0,void 0,function*(){const G=X&&D!=="node"?"/full":"";return(yield(0,g.osmFetch)(`/0.6/${D}/${J}${G}.json`)).elements})}c.getFeature=s;function _(D,J){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${D}s.json?${D}s=${J.join(",")}`)).elements})}c.getFeatures=_;function E(D,J,X){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${D}/${J}/${X}.json`)).elements[0]})}c.getFeatureAtVersion=E;function C(D,J){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${D}/${J}/history.json`)).elements})}c.getFeatureHistory=C;function S(D){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/node/${D}/ways.json`)).elements})}c.getWaysForNode=S;function I(D,J){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/${D}/${J}/relation.json`)).elements})}c.getRelationsForElement=I},{"./_osmFetch":17}],28:[function(r,l,c){var f=this&&this.__awaiter||function(_,E,C,S){function I(D){return D instanceof C?D:new C(function(J){J(D)})}return new(C||(C=Promise))(function(D,J){function X(H){try{U(S.next(H))}catch($){J($)}}function G(H){try{U(S.throw(H))}catch($){J($)}}function U(H){H.done?D(H.value):I(H.value).then(X,G)}U((S=S.apply(_,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const g=r("./_osmFetch");function s(_){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/map.json",{bbox:_})).elements})}c.getMapData=s},{"./_osmFetch":17}],29:[function(r,l,c){var f=this&&this.__awaiter||function(_,E,C,S){function I(D){return D instanceof C?D:new C(function(J){J(D)})}return new(C||(C=Promise))(function(D,J){function X(H){try{U(S.next(H))}catch($){J($)}}function G(H){try{U(S.throw(H))}catch($){J($)}}function U(H){H.done?D(H.value):I(H.value).then(X,G)}U((S=S.apply(_,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const g=r("./changesets");function s(_){return f(this,void 0,void 0,function*(){const E=yield(0,g.listChangesets)({display_name:_});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}c.getUIdFromDisplayName=s},{"./changesets":24}],30:[function(r,l,c){var f=this&&this.__awaiter||function(E,C,S,I){function D(J){return J instanceof S?J:new S(function(X){X(J)})}return new(S||(S=Promise))(function(J,X){function G($){try{H(I.next($))}catch(ne){X(ne)}}function U($){try{H(I.throw($))}catch(ne){X(ne)}}function H($){$.done?J($.value):D($.value).then(G,U)}H((I=I.apply(E,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const g=r("./_osmFetch");function s(E){return f(this,void 0,void 0,function*(){const C=yield(0,g.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},C.user),{account_created:new Date(C.user.account_created)})})}c.getUser=s;function _(E){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)("/0.6/users",{users:E})).users.map(S=>Object.assign(Object.assign({},S),{account_created:new Date(S.account_created)}))})}c.getUsers=_},{"./_osmFetch":17}],31:[function(r,l,c){var f=this&&this.__createBinding||(Object.create?function(s,_,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return _[E]}})}:function(s,_,E,C){C===void 0&&(C=E),s[C]=_[E]}),g=this&&this.__exportStar||function(s,_){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(_,E)&&f(_,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),g(r("./changesets"),c),g(r("./notes"),c),g(r("./getCapabilities"),c),g(r("./getFeature"),c),g(r("./getMapData"),c),g(r("./getUIdFromDisplayName"),c),g(r("./getUser"),c)},{"./changesets":24,"./getCapabilities":26,"./getFeature":27,"./getMapData":28,"./getUIdFromDisplayName":29,"./getUser":30,"./notes":33}],32:[function(r,l,c){var f=this&&this.__awaiter||function(I,D,J,X){function G(U){return U instanceof J?U:new J(function(H){H(U)})}return new(J||(J=Promise))(function(U,H){function $(F){try{W(X.next(F))}catch(w){H(w)}}function ne(F){try{W(X.throw(F))}catch(w){H(w)}}function W(F){F.done?U(F.value):G(F.value).then($,ne)}W((X=X.apply(I,D||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const g=r("../_osmFetch"),s=I=>{const[D,J]=I.geometry.coordinates;return Object.assign(Object.assign({},I.properties),{location:{lat:J,lng:D}})};function _(I,D){return f(this,void 0,void 0,function*(){return(yield(0,g.osmFetch)(`/0.6/notes${D?"/search":""}.json`,I)).features.map(s)})}function E(I){return _(I,!0)}c.getNotesForQuery=E;function C(I){return _({bbox:I},!1)}c.getNotesForArea=C;function S(I){return f(this,void 0,void 0,function*(){const D=yield(0,g.osmFetch)(`/0.6/notes/${I}.json`);return s(D)})}c.getNote=S},{"../_osmFetch":17}],33:[function(r,l,c){var f=this&&this.__createBinding||(Object.create?function(s,_,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return _[E]}})}:function(s,_,E,C){C===void 0&&(C=E),s[C]=_[E]}),g=this&&this.__exportStar||function(s,_){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(_,E)&&f(_,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),g(r("./getNotes"),c),g(r("./noteActions"),c)},{"./getNotes":32,"./noteActions":34}],34:[function(r,l,c){var f=this&&this.__awaiter||function(C,S,I,D){function J(X){return X instanceof I?X:new I(function(G){G(X)})}return new(I||(I=Promise))(function(X,G){function U(ne){try{$(D.next(ne))}catch(W){G(W)}}function H(ne){try{$(D.throw(ne))}catch(W){G(W)}}function $(ne){ne.done?X(ne.value):J(ne.value).then(U,H)}$((D=D.apply(C,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const g=r("../_osmFetch");function s(C,S,I){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)("/0.6/notes",{lat:C,lon:S,text:I})})}c.createNote=s;function _(C,S){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${C}/comment`,{text:S})})}c.commentOnNote=_;function E(C,S){return f(this,void 0,void 0,function*(){yield(0,g.osmFetch)(`/0.6/notes/${C}/reopen`,{text:S})})}c.reopenNote=E},{"../_osmFetch":17}],35:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function f(g){let s=!1;return new Promise((_,E)=>{const[C,S]=[600,550],I=Object.entries({width:C,height:S,left:window.screen.width/2-C/2,top:window.screen.height/2-S/2}).map(([X,G])=>`${X}=${G}`).join(","),D=window.open("about:blank","oauth_window",I);if(!D)throw new Error("Popup was blocked");D.location=g,window.authComplete=X=>{_(X),s=!0};const J=setInterval(()=>{D.closed&&(s||E(new Error("Cancelled")),clearInterval(J))},500)})}c.createPopup=f},{}],36:[function(r,l,c){var f=this&&this.__awaiter||function(_,E,C,S){function I(D){return D instanceof C?D:new C(function(J){J(D)})}return new(C||(C=Promise))(function(D,J){function X(H){try{U(S.next(H))}catch($){J($)}}function G(H){try{U(S.throw(H))}catch($){J($)}}function U(H){H.done?D(H.value):I(H.value).then(X,G)}U((S=S.apply(_,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const g=r("./helpers");function s(_,{options:E,pkceVerifier:C,state:S}){return f(this,void 0,void 0,function*(){const I=new URL(_).searchParams,D=I.get("error_description"),J=I.get("code"),X=I.get("state");if(D)throw new Error(D);if(!J)throw new Error("No code in OAuth response");if(!C||!S)throw new Error("No login in progress");if(S!==X)throw new Error("State Mismatch");const G={grant_type:"authorization_code",code:J,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:C},U=`${(0,g.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(G).toString()}`,$=yield(yield fetch(U,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in $)throw new Error($.error_description);const ne={issuedAt:new Date($.created_at*1e3).toISOString(),accessToken:$.access_token,scopes:$.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ne)),delete window.authComplete,ne})}c.exchangeCode=s},{"./helpers":37}],37:[function(r,l,c){var f=this&&this.__awaiter||function(C,S,I,D){function J(X){return X instanceof I?X:new I(function(G){G(X)})}return new(I||(I=Promise))(function(X,G){function U(ne){try{$(D.next(ne))}catch(W){G(W)}}function H(ne){try{$(D.throw(ne))}catch(W){G(W)}}function $(ne){ne.done?X(ne.value):J(ne.value).then(U,H)}$((D=D.apply(C,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const g=r("../config");function s(C){return f(this,void 0,void 0,function*(){const S=new TextEncoder().encode(C),I=yield window.crypto.subtle.digest("SHA-256",S);return btoa(String.fromCharCode(...new Uint8Array(I))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=s;function _(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(C=>`0${C.toString(16)}`.slice(-2)).join("")}c.getRandomString=_;function E(){let C=(0,g.getConfig)().apiUrl;return C==="https://api.openstreetmap.org"&&(C="https://www.openstreetmap.org"),C}c.getOAuthBaseUrl=E},{"../config":40}],38:[function(r,l,c){var f=this&&this.__createBinding||(Object.create?function(s,_,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return _[E]}})}:function(s,_,E,C){C===void 0&&(C=E),s[C]=_[E]}),g=this&&this.__exportStar||function(s,_){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(_,E)&&f(_,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),g(r("./oauth2"),c)},{"./oauth2":39}],39:[function(r,l,c){var f=this&&this.__awaiter||function(D,J,X,G){function U(H){return H instanceof X?H:new X(function($){$(H)})}return new(X||(X=Promise))(function(H,$){function ne(w){try{F(G.next(w))}catch(k){$(k)}}function W(w){try{F(G.throw(w))}catch(k){$(k)}}function F(w){w.done?H(w.value):U(w.value).then(ne,W)}F((G=G.apply(D,J||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const g=r("./createPopup"),s=r("./exchangeCode"),_=r("./helpers");function E(D){return f(this,void 0,void 0,function*(){if(!D.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!D.clientId)throw new Error("You must include the 'clientId' option");if(!D.scopes)throw new Error("You must include the 'scopes' option");const J=(0,_.getRandomString)(),X=(0,_.getRandomString)(),G=yield(0,_.sha256)(X),U={scope:D.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:J,redirect_uri:D.redirectUrl,client_id:D.clientId,code_challenge_method:"S256",code_challenge:G},H=`${(0,_.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(U).toString()}`,$={state:J,pkceVerifier:X,options:D};if(D.mode==="popup"){const ne=yield(0,g.createPopup)(H);return(0,s.exchangeCode)(ne,$)}if(D.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify($)),window.location.replace(H);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=E,c.authReady=(()=>f(void 0,void 0,void 0,function*(){var D;if(typeof window=="undefined")return;const J=window.location.href,X=localStorage.getItem("__osmAuthTemp");if(new URL(J).searchParams.get("code")){if(!((D=window.opener)===null||D===void 0)&&D.authComplete)window.opener.authComplete(J),window.close();else if(X)try{const G=JSON.parse(X);yield(0,s.exchangeCode)(J,G),localStorage.removeItem("__osmAuthTemp")}catch(G){console.error("OSM Auth Error",G)}}}))();const C=()=>{try{const D=localStorage.getItem("__osmAuth");return D?JSON.parse(D).accessToken:void 0}catch{return}};c.getAuthToken=C;const S=()=>!!(0,c.getAuthToken)();c.isLoggedIn=S;function I(){localStorage.removeItem("__osmAuth")}c.logout=I},{"./createPopup":35,"./exchangeCode":36,"./helpers":37}],40:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},g=()=>f;c.getConfig=g;function s(_){Object.assign(f,_)}c.configure=s},{}],41:[function(r,l,c){var f=this&&this.__createBinding||(Object.create?function(s,_,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return _[E]}})}:function(s,_,E,C){C===void 0&&(C=E),s[C]=_[E]}),g=this&&this.__exportStar||function(s,_){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(_,E)&&f(_,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),r("./polyfill"),g(r("./api"),c),g(r("./auth"),c),g(r("./config"),c),g(r("./types"),c)},{"./api":31,"./auth":38,"./config":40,"./polyfill":42,"./types":46}],42:[function(r,l,c){if(typeof fetch=="undefined")try{r("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],43:[function(r,l,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],44:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}],45:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}],46:[function(r,l,c){var f=this&&this.__createBinding||(Object.create?function(s,_,E,C){C===void 0&&(C=E),Object.defineProperty(s,C,{enumerable:!0,get:function(){return _[E]}})}:function(s,_,E,C){C===void 0&&(C=E),s[C]=_[E]}),g=this&&this.__exportStar||function(s,_){for(var E in s)E!=="default"&&!Object.prototype.hasOwnProperty.call(_,E)&&f(_,s,E)};Object.defineProperty(c,"__esModule",{value:!0}),g(r("./changesets"),c),g(r("./features"),c),g(r("./general"),c),g(r("./notes"),c),g(r("./user"),c)},{"./changesets":43,"./features":44,"./general":45,"./notes":47,"./user":48}],47:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}],48:[function(r,l,c){arguments[4][43][0].apply(c,arguments)},{dup:43}]},{},[41])(41)})})(Ro);var Zm={exports:{}},qf={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT=yt.exports,K3=60103;qf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var wb=Symbol.for;K3=wb("react.element"),qf.Fragment=wb("react.fragment")}var KT=YT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qT=Object.prototype.hasOwnProperty,JT={key:!0,ref:!0,__self:!0,__source:!0};function q3(e,t,r){var l,c={},f=null,g=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(g=t.ref);for(l in t)qT.call(t,l)&&!JT.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)c[l]===void 0&&(c[l]=t[l]);return{$$typeof:K3,type:e,key:f,ref:g,props:c,_owner:KT.current}}qf.jsx=q3;qf.jsxs=q3;Zm.exports=qf;const Rt=Zm.exports.jsx,Hn=Zm.exports.jsxs,ha=Zm.exports.Fragment,J3=()=>{const[e,t]=yt.exports.useState(!1);yt.exports.useEffect(()=>{t(Ro.exports.isLoggedIn())},[]);const r=yt.exports.useCallback(()=>{(async()=>(await Ro.exports.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ro.exports.isLoggedIn()),window.location.reload()))()},[]),l=yt.exports.useCallback(()=>{(async()=>(Ro.exports.logout(),t(!1)))()},[]);return Rt(ha,{children:e?Rt("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:l,children:"logout"}):Rt("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:r,children:"login"})})},QT=()=>{const[e,t]=yt.exports.useState(!1),[r,l]=yt.exports.useState(void 0);return yt.exports.useEffect(()=>{t(Ro.exports.isLoggedIn())},[]),yt.exports.useEffect(()=>{!e||(async()=>{const c=await Ro.exports.getUser("me");l(c)})()},[e]),Rt(ha,{children:r?Rt("img",{style:{width:"44px",height:"44px"},src:r.img.href,alt:r.display_name,title:r.display_name}):Rt("img",{})})},eA=()=>{const[e,t]=yt.exports.useState(!1),[r,l]=yt.exports.useState(void 0);return yt.exports.useEffect(()=>{t(Ro.exports.isLoggedIn())},[]),yt.exports.useEffect(()=>{!e||(async()=>{const c=await Ro.exports.getUser("me");l(c)})()},[e]),Hn("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[Hn("div",{children:[Rt("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),r?Hn("span",{style:{marginLeft:"10px"},children:["Hi ",r==null?void 0:r.display_name,", You have"," ",r==null?void 0:r.changesets.count," changesets."]}):Rt("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),Hn("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[Rt("div",{children:Rt(QT,{})}),Rt("div",{children:Rt(J3,{})})]})]})},Q3=({feature:e})=>{var r;const t=JSON.parse((r=e.properties)==null?void 0:r.center);return Hn(ha,{children:[Hn("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",Hn("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},tA=({feature:e})=>Rt(ha,{children:e.properties&&Object.keys(e.properties).map(t=>{var r;if(t.startsWith("addr"))return Hn("div",{className:t,children:[Rt("span",{className:"underline",children:t})," = ",Rt("span",{children:(r=e.properties)==null?void 0:r[t]})]})})});function qh(e,t,r){return parseInt(e.substr(t,r),16)}function e4(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Eg(e,t,r){return r=r<0?r+6:r>6?r-6:r,e4(255*(r<1?e+(t-e)*r:r<3?t:r<4?e+(t-e)*(4-r):e))}function nA(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const r=e.length;if(r<6){const l=e[1],c=e[2],f=e[3],g=e[4]||"";t="#"+l+l+c+c+f+f+g+g}return(r==7||r>8)&&(t=e),t}}function rA(e,t,r){let l;if(t==0){const c=e4(r*255);l=c+c+c}else{const c=r<=.5?r*(t+1):r+t-r*t,f=r*2-c;l=Eg(f,c,e*6+2)+Eg(f,c,e*6)+Eg(f,c,e*6-2)}return"#"+l}function Gh(e,t,r){const l=[.55,.5,.5,.46,.6,.55,.55],c=l[e*6+.5|0];return r=r<.5?r*c*2:c+(r-.5)*(1-c)*2,rA(e,t,r)}const iA=typeof window!="undefined"?window:typeof self!="undefined"?self:typeof global!="undefined"?global:{},Eb={V:"jdenticon_config",n:"config"};var oA={};function aA(e,t){const r=typeof e=="object"&&e||oA[Eb.n]||iA[Eb.V]||{},l=r.lightness||{},c=r.saturation||{},f="color"in c?c.color:c,g=c.grayscale,s=r.backColor,_=r.padding;function E(S,I){let D=l[S];return D&&D.length>1||(D=I),function(J){return J=D[0]+J*(D[1]-D[0]),J<0?0:J>1?1:J}}function C(S){const I=r.hues;let D;return I&&I.length>0&&(D=I[0|.999*S*I.length]),typeof D=="number"?(D/360%1+1)%1:S}return{W:C,o:typeof f=="number"?f:.5,D:typeof g=="number"?g:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:nA(s),X:typeof e=="number"?e:typeof _=="number"?_:t}}class Wd{constructor(t,r){this.x=t,this.y=r}}class t4{constructor(t,r,l,c){this.q=t,this.t=r,this.H=l,this.Y=c}I(t,r,l,c){const f=this.q+this.H,g=this.t+this.H,s=this.Y;return s===1?new Wd(f-r-(c||0),this.t+t):s===2?new Wd(f-t-(l||0),g-r-(c||0)):s===3?new Wd(this.q+r,g-t-(l||0)):new Wd(this.q+t,this.t+r)}}const sA=new t4(0,0,0,0);class lA{constructor(t){this.J=t,this.u=sA}g(t,r){const l=r?-2:2,c=[];for(let f=r?t.length-2:0;f<t.length&&f>=0;f+=l)c.push(this.u.I(t[f],t[f+1]));this.J.g(c)}h(t,r,l,c){const f=this.u.I(t,r,l,l);this.J.h(f,l,c)}i(t,r,l,c,f){this.g([t,r,t+l,r,t+l,r+c,t,r+c],f)}j(t,r,l,c,f,g){const s=[t+l,r,t+l,r+c,t,r+c,t,r];s.splice((f||0)%4*2,2),this.g(s,g)}K(t,r,l,c,f){this.g([t+l/2,r,t+l,r+c/2,t+l/2,r+c,t,r+c/2],f)}}function uA(e,t,r,l){e=e%14;let c,f,g,s,_,E;e?e==1?(g=0|r*.5,s=0|r*.8,t.j(r-g,0,g,s,2)):e==2?(g=0|r/3,t.i(g,g,r-g,r-g)):e==3?(_=r*.1,E=r<6?1:r<8?2:0|r*.25,_=_>1?0|_:_>.5?1:_,t.i(E,E,r-_-E,r-_-E)):e==4?(f=0|r*.15,g=0|r*.5,t.h(r-g-f,r-g-f,g)):e==5?(_=r*.1,E=_*4,E>3&&(E=0|E),t.i(0,0,r,r),t.g([E,E,r-_,E,E+(r-E-_)/2,r-_],!0)):e==6?t.g([0,0,r,0,r,r*.7,r*.4,r*.4,r*.7,r,0,r]):e==7?t.j(r/2,r/2,r/2,r/2,3):e==8?(t.i(0,0,r,r/2),t.i(0,r/2,r/2,r/2),t.j(r/2,r/2,r/2,r/2,1)):e==9?(_=r*.14,E=r<4?1:r<6?2:0|r*.35,_=r<8?_:0|_,t.i(0,0,r,r),t.i(E,E,r-E-_,r-E-_,!0)):e==10?(_=r*.12,E=_*3,t.i(0,0,r,r),t.h(E,E,r-_-E,!0)):e==11?t.j(r/2,r/2,r/2,r/2,3):e==12?(f=r*.25,t.i(0,0,r,r),t.K(f,f,r-f,r-f,!0)):!l&&(f=r*.4,g=r*1.2,t.h(f,f,g)):(c=r*.42,t.g([0,0,r,0,r,r-c*2,r-c,r,0,r]))}function Sb(e,t,r){e=e%4;let l;e?e==1?t.j(0,r/2,r,r/2,0):e==2?t.K(0,0,r,r):(l=r/6,t.h(l,l,r-2*l)):t.j(0,0,r,r,0)}function cA(e,t){return e=t.W(e),[Gh(e,t.D,t.F(0)),Gh(e,t.o,t.p(.5)),Gh(e,t.D,t.F(1)),Gh(e,t.o,t.p(1)),Gh(e,t.o,t.p(0))]}function hA(e,t,r){const l=aA(r,.08);l.G&&e.m(l.G);let c=e.k;const f=.5+c*l.X|0;c-=f*2;const g=new lA(e),s=0|c/4,_=0|f+c/2-s*2,E=0|f+c/2-s*2;function C(G,U,H,$,ne){const W=qh(t,H,1);let F=$?qh(t,$,1):0;e.L(I[D[G]]);for(let w=0;w<ne.length;w++)g.u=new t4(_+ne[w][0]*s,E+ne[w][1]*s,s,F++%4),U(W,g,s,w);e.M()}const S=qh(t,-7)/268435455,I=cA(S,l),D=[];let J;function X(G){if(G.indexOf(J)>=0){for(let U=0;U<G.length;U++)if(D.indexOf(G[U])>=0)return!0}}for(let G=0;G<3;G++)J=qh(t,8+G,1)%I.length,(X([0,4])||X([2,3]))&&(J=1),D.push(J);C(0,Sb,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),C(1,Sb,4,5,[[0,0],[3,0],[3,3],[0,3]]),C(2,uA,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function fA(e){var l=0,c=0,f=encodeURI(e)+"%80",g=[],s,_=[],E=1732584193,C=4023233417,S=~E,I=~C,D=3285377520,J=[E,C,S,I,D],X=0,G="";function U(H,$){return H<<$|H>>>32-$}for(;l<f.length;c++)g[c>>2]=g[c>>2]|(f[l]=="%"?parseInt(f.substring(l+1,l+=3),16):f.charCodeAt(l++))<<(3-(c&3))*8;for(s=((c+7>>6)+1)*16,g[s-1]=c*8-8;X<s;X+=16){for(l=0;l<80;l++)c=U(E,5)+D+(l<20?(C&S^~C&I)+1518500249:l<40?(C^S^I)+1859775393:l<60?(C&S^C&I^S&I)+2400959708:(C^S^I)+3395469782)+(_[l]=l<16?g[X+l]|0:U(_[l-3]^_[l-8]^_[l-14]^_[l-16],1)),D=I,I=S,S=U(C,30),C=E,E=c;J[0]=E=J[0]+E|0,J[1]=C=J[1]+C|0,J[2]=S=J[2]+S|0,J[3]=I=J[3]+I|0,J[4]=D=J[4]+D|0}for(l=0;l<40;l++)G+=(J[l>>3]>>>(7-(l&7))*4&15).toString(16);return G}function dA(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function pA(e){return fA(e==null?"":""+e)}function ic(e){return(e*10+.5|0)/10}class mA{constructor(){this.v=""}g(t){let r="";for(let l=0;l<t.length;l++)r+=(l?"L":"M")+ic(t[l].x)+" "+ic(t[l].y);this.v+=r+"Z"}h(t,r,l){const c=l?0:1,f=ic(r/2),g=ic(r),s="a"+f+","+f+" 0 1,"+c+" ";this.v+="M"+ic(t.x)+" "+ic(t.y+r/2)+s+g+",0"+s+-g+",0"}}class gA{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const r=/^(#......)(..)?/.exec(t),l=r[2]?qh(r[2],0)/255:1;this.N.m(r[1],l)}L(t){this.A=this.B[t]||(this.B[t]=new mA)}M(){}g(t){this.A.g(t)}h(t,r,l){this.A.h(t,r,l)}finish(){const t=this.B;for(let r in t)t.hasOwnProperty(r)&&this.N.O(r,t[r].v)}}const yA={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class vA{constructor(t){this.k=t,this.C='<svg xmlns="'+yA.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,r){r&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+r.toFixed(2)+'"/>')}O(t,r){this.C+='<path fill="'+t+'" d="'+r+'"/>'}toString(){return this.C+"</svg>"}}function xA(e,t,r){const l=new vA(t);return hA(new gA(l),dA(e)||pA(e),r),l.toString()}typeof document!="undefined"&&document.querySelectorAll.bind(document);const _A=({feature:e,size:t})=>e.properties===null?null:Rt(ha,{children:e.properties.userIconHref.length>0?Rt("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):Rt("span",{dangerouslySetInnerHTML:{__html:xA(e.properties.user||"noname",t)}})}),bA=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?Hn("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var wA={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const EA=({viewState:e})=>{const[t,r]=yt.exports.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.exports.useEffect(()=>{r(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),Rt(ha,{children:e&&t&&Hn("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[Rt(Ba,{icon:wA,style:{padding:"0px 3px"}}),Rt("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var n4={};class Ai{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const f=r[c],g=t+f,s=Math.abs(t)<Math.abs(f)?t-(g-f):f-(g-t);s&&(r[l++]=s),t=g}return r[l]=t,this._n=l+1,this}valueOf(){const t=this._partials;let r=this._n,l,c,f,g=0;if(r>0){for(g=t[--r];r>0&&(l=g,c=t[--r],g=l+c,f=c-(g-l),!f););r>0&&(f<0&&t[r-1]<0||f>0&&t[r-1]>0)&&(c=f*2,l=g+c,c==l-g&&(g=l))}return g}}function*SA(e){for(const t of e)yield*t}function r4(e){return Array.from(SA(e))}function wc(e,t,r){e=+e,t=+t,r=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+r;for(var l=-1,c=Math.max(0,Math.ceil((t-e)/r))|0,f=new Array(c);++l<c;)f[l]=e+l*r;return f}var mn=1e-6,Df=1e-12,Bn=Math.PI,Dr=Bn/2,em=Bn/4,Wi=Bn*2,hr=180/Bn,gn=Bn/180,$n=Math.abs,th=Math.atan,Zi=Math.atan2,an=Math.cos,Zd=Math.ceil,i4=Math.exp,D1=Math.hypot,tm=Math.log,Sg=Math.pow,Qt=Math.sin,Fo=Math.sign||function(e){return e>0?1:e<0?-1:0},oi=Math.sqrt,Iv=Math.tan;function o4(e){return e>1?0:e<-1?Bn:Math.acos(e)}function Xi(e){return e>1?Dr:e<-1?-Dr:Math.asin(e)}function Cb(e){return(e=Qt(e/2))*e}function Mr(){}function nm(e,t){e&&Ab.hasOwnProperty(e.type)&&Ab[e.type](e,t)}var Tb={Feature:function(e,t){nm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,l=-1,c=r.length;++l<c;)nm(r[l].geometry,t)}},Ab={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)e=r[l],t.point(e[0],e[1],e[2])},LineString:function(e,t){N1(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)N1(r[l],t,0)},Polygon:function(e,t){Ib(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)Ib(r[l],t)},GeometryCollection:function(e,t){for(var r=e.geometries,l=-1,c=r.length;++l<c;)nm(r[l],t)}};function N1(e,t,r){var l=-1,c=e.length-r,f;for(t.lineStart();++l<c;)f=e[l],t.point(f[0],f[1],f[2]);t.lineEnd()}function Ib(e,t){var r=-1,l=e.length;for(t.polygonStart();++r<l;)N1(e[r],t,1);t.polygonEnd()}function aa(e,t){e&&Tb.hasOwnProperty(e.type)?Tb[e.type](e,t):nm(e,t)}var rm=new Ai,im=new Ai,a4,s4,U1,V1,$1,ja={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){rm=new Ai,ja.lineStart=CA,ja.lineEnd=TA},polygonEnd:function(){var e=+rm;im.add(e<0?Wi+e:e),this.lineStart=this.lineEnd=this.point=Mr},sphere:function(){im.add(Wi)}};function CA(){ja.point=AA}function TA(){l4(a4,s4)}function AA(e,t){ja.point=l4,a4=e,s4=t,e*=gn,t*=gn,U1=e,V1=an(t=t/2+em),$1=Qt(t)}function l4(e,t){e*=gn,t*=gn,t=t/2+em;var r=e-U1,l=r>=0?1:-1,c=l*r,f=an(t),g=Qt(t),s=$1*g,_=V1*f+s*an(c),E=s*l*Qt(c);rm.add(Zi(E,_)),U1=e,V1=f,$1=g}function IA(e){return im=new Ai,aa(e,ja),im*2}function om(e){return[Zi(e[1],e[0]),Xi(e[2])]}function mu(e){var t=e[0],r=e[1],l=an(r);return[l*an(t),l*Qt(t),Qt(r)]}function Xd(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Vc(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Cg(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Yd(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function am(e){var t=oi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kr,to,Fr,po,nu,u4,c4,Rc,xf,Zs,_s,hs={point:G1,lineStart:Pb,lineEnd:kb,polygonStart:function(){hs.point=f4,hs.lineStart=PA,hs.lineEnd=kA,xf=new Ai,ja.polygonStart()},polygonEnd:function(){ja.polygonEnd(),hs.point=G1,hs.lineStart=Pb,hs.lineEnd=kb,rm<0?(kr=-(Fr=180),to=-(po=90)):xf>mn?po=90:xf<-mn&&(to=-90),_s[0]=kr,_s[1]=Fr},sphere:function(){kr=-(Fr=180),to=-(po=90)}};function G1(e,t){Zs.push(_s=[kr=e,Fr=e]),t<to&&(to=t),t>po&&(po=t)}function h4(e,t){var r=mu([e*gn,t*gn]);if(Rc){var l=Vc(Rc,r),c=[l[1],-l[0],0],f=Vc(c,l);am(f),f=om(f);var g=e-nu,s=g>0?1:-1,_=f[0]*hr*s,E,C=$n(g)>180;C^(s*nu<_&&_<s*e)?(E=f[1]*hr,E>po&&(po=E)):(_=(_+360)%360-180,C^(s*nu<_&&_<s*e)?(E=-f[1]*hr,E<to&&(to=E)):(t<to&&(to=t),t>po&&(po=t))),C?e<nu?fo(kr,e)>fo(kr,Fr)&&(Fr=e):fo(e,Fr)>fo(kr,Fr)&&(kr=e):Fr>=kr?(e<kr&&(kr=e),e>Fr&&(Fr=e)):e>nu?fo(kr,e)>fo(kr,Fr)&&(Fr=e):fo(e,Fr)>fo(kr,Fr)&&(kr=e)}else Zs.push(_s=[kr=e,Fr=e]);t<to&&(to=t),t>po&&(po=t),Rc=r,nu=e}function Pb(){hs.point=h4}function kb(){_s[0]=kr,_s[1]=Fr,hs.point=G1,Rc=null}function f4(e,t){if(Rc){var r=e-nu;xf.add($n(r)>180?r+(r>0?360:-360):r)}else u4=e,c4=t;ja.point(e,t),h4(e,t)}function PA(){ja.lineStart()}function kA(){f4(u4,c4),ja.lineEnd(),$n(xf)>mn&&(kr=-(Fr=180)),_s[0]=kr,_s[1]=Fr,Rc=null}function fo(e,t){return(t-=e)<0?t+360:t}function MA(e,t){return e[0]-t[0]}function Mb(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function zA(e){var t,r,l,c,f,g,s;if(po=Fr=-(kr=to=1/0),Zs=[],aa(e,hs),r=Zs.length){for(Zs.sort(MA),t=1,l=Zs[0],f=[l];t<r;++t)c=Zs[t],Mb(l,c[0])||Mb(l,c[1])?(fo(l[0],c[1])>fo(l[0],l[1])&&(l[1]=c[1]),fo(c[0],l[1])>fo(l[0],l[1])&&(l[0]=c[0])):f.push(l=c);for(g=-1/0,r=f.length-1,t=0,l=f[r];t<=r;l=c,++t)c=f[t],(s=fo(l[1],c[0]))>g&&(g=s,kr=c[0],Fr=l[1])}return Zs=_s=null,kr===1/0||to===1/0?[[NaN,NaN],[NaN,NaN]]:[[kr,to],[Fr,po]]}var Jh,sm,lm,um,cm,hm,fm,dm,H1,W1,Z1,d4,p4,Vi,$i,Gi,ca={sphere:Mr,point:Pv,lineStart:zb,lineEnd:Lb,polygonStart:function(){ca.lineStart=RA,ca.lineEnd=FA},polygonEnd:function(){ca.lineStart=zb,ca.lineEnd=Lb}};function Pv(e,t){e*=gn,t*=gn;var r=an(t);Jf(r*an(e),r*Qt(e),Qt(t))}function Jf(e,t,r){++Jh,lm+=(e-lm)/Jh,um+=(t-um)/Jh,cm+=(r-cm)/Jh}function zb(){ca.point=LA}function LA(e,t){e*=gn,t*=gn;var r=an(t);Vi=r*an(e),$i=r*Qt(e),Gi=Qt(t),ca.point=OA,Jf(Vi,$i,Gi)}function OA(e,t){e*=gn,t*=gn;var r=an(t),l=r*an(e),c=r*Qt(e),f=Qt(t),g=Zi(oi((g=$i*f-Gi*c)*g+(g=Gi*l-Vi*f)*g+(g=Vi*c-$i*l)*g),Vi*l+$i*c+Gi*f);sm+=g,hm+=g*(Vi+(Vi=l)),fm+=g*($i+($i=c)),dm+=g*(Gi+(Gi=f)),Jf(Vi,$i,Gi)}function Lb(){ca.point=Pv}function RA(){ca.point=BA}function FA(){m4(d4,p4),ca.point=Pv}function BA(e,t){d4=e,p4=t,e*=gn,t*=gn,ca.point=m4;var r=an(t);Vi=r*an(e),$i=r*Qt(e),Gi=Qt(t),Jf(Vi,$i,Gi)}function m4(e,t){e*=gn,t*=gn;var r=an(t),l=r*an(e),c=r*Qt(e),f=Qt(t),g=$i*f-Gi*c,s=Gi*l-Vi*f,_=Vi*c-$i*l,E=D1(g,s,_),C=Xi(E),S=E&&-C/E;H1.add(S*g),W1.add(S*s),Z1.add(S*_),sm+=C,hm+=C*(Vi+(Vi=l)),fm+=C*($i+($i=c)),dm+=C*(Gi+(Gi=f)),Jf(Vi,$i,Gi)}function jA(e){Jh=sm=lm=um=cm=hm=fm=dm=0,H1=new Ai,W1=new Ai,Z1=new Ai,aa(e,ca);var t=+H1,r=+W1,l=+Z1,c=D1(t,r,l);return c<Df&&(t=hm,r=fm,l=dm,sm<mn&&(t=lm,r=um,l=cm),c=D1(t,r,l),c<Df)?[NaN,NaN]:[Zi(r,t)*hr,Xi(l/c)*hr]}function oc(e){return function(){return e}}function X1(e,t){function r(l,c){return l=e(l,c),t(l[0],l[1])}return e.invert&&t.invert&&(r.invert=function(l,c){return l=t.invert(l,c),l&&e.invert(l[0],l[1])}),r}function Y1(e,t){return[$n(e)>Bn?e+Math.round(-e/Wi)*Wi:e,t]}Y1.invert=Y1;function kv(e,t,r){return(e%=Wi)?t||r?X1(Rb(e),Fb(t,r)):Rb(e):t||r?Fb(t,r):Y1}function Ob(e){return function(t,r){return t+=e,[t>Bn?t-Wi:t<-Bn?t+Wi:t,r]}}function Rb(e){var t=Ob(e);return t.invert=Ob(-e),t}function Fb(e,t){var r=an(e),l=Qt(e),c=an(t),f=Qt(t);function g(s,_){var E=an(_),C=an(s)*E,S=Qt(s)*E,I=Qt(_),D=I*r+C*l;return[Zi(S*c-D*f,C*r-I*l),Xi(D*c+S*f)]}return g.invert=function(s,_){var E=an(_),C=an(s)*E,S=Qt(s)*E,I=Qt(_),D=I*c-S*f;return[Zi(S*c+I*f,C*r+D*l),Xi(D*r-C*l)]},g}function g4(e){e=kv(e[0]*gn,e[1]*gn,e.length>2?e[2]*gn:0);function t(r){return r=e(r[0]*gn,r[1]*gn),r[0]*=hr,r[1]*=hr,r}return t.invert=function(r){return r=e.invert(r[0]*gn,r[1]*gn),r[0]*=hr,r[1]*=hr,r},t}function y4(e,t,r,l,c,f){if(!!r){var g=an(t),s=Qt(t),_=l*r;c==null?(c=t+l*Wi,f=t-_/2):(c=Bb(g,c),f=Bb(g,f),(l>0?c<f:c>f)&&(c+=l*Wi));for(var E,C=c;l>0?C>f:C<f;C-=_)E=om([g,-s*an(C),-s*Qt(C)]),e.point(E[0],E[1])}}function Bb(e,t){t=mu(t),t[0]-=e,am(t);var r=o4(-t[1]);return((-t[2]<0?-r:r)+Wi-mn)%Wi}function DA(){var e=oc([0,0]),t=oc(90),r=oc(6),l,c,f={point:g};function g(_,E){l.push(_=c(_,E)),_[0]*=hr,_[1]*=hr}function s(){var _=e.apply(this,arguments),E=t.apply(this,arguments)*gn,C=r.apply(this,arguments)*gn;return l=[],c=kv(-_[0]*gn,-_[1]*gn,0).invert,y4(f,E,C,1),_={type:"Polygon",coordinates:[l]},l=c=null,_}return s.center=function(_){return arguments.length?(e=typeof _=="function"?_:oc([+_[0],+_[1]]),s):e},s.radius=function(_){return arguments.length?(t=typeof _=="function"?_:oc(+_),s):t},s.precision=function(_){return arguments.length?(r=typeof _=="function"?_:oc(+_),s):r},s}function v4(){var e=[],t;return{point:function(r,l,c){t.push([r,l,c])},lineStart:function(){e.push(t=[])},lineEnd:Mr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function vp(e,t){return $n(e[0]-t[0])<mn&&$n(e[1]-t[1])<mn}function Kd(e,t,r,l){this.x=e,this.z=t,this.o=r,this.e=l,this.v=!1,this.n=this.p=null}function x4(e,t,r,l,c){var f=[],g=[],s,_;if(e.forEach(function(J){if(!((X=J.length-1)<=0)){var X,G=J[0],U=J[X],H;if(vp(G,U)){if(!G[2]&&!U[2]){for(c.lineStart(),s=0;s<X;++s)c.point((G=J[s])[0],G[1]);c.lineEnd();return}U[0]+=2*mn}f.push(H=new Kd(G,J,null,!0)),g.push(H.o=new Kd(G,null,H,!1)),f.push(H=new Kd(U,J,null,!1)),g.push(H.o=new Kd(U,null,H,!0))}}),!!f.length){for(g.sort(t),jb(f),jb(g),s=0,_=g.length;s<_;++s)g[s].e=r=!r;for(var E=f[0],C,S;;){for(var I=E,D=!0;I.v;)if((I=I.n)===E)return;C=I.z,c.lineStart();do{if(I.v=I.o.v=!0,I.e){if(D)for(s=0,_=C.length;s<_;++s)c.point((S=C[s])[0],S[1]);else l(I.x,I.n.x,1,c);I=I.n}else{if(D)for(C=I.p.z,s=C.length-1;s>=0;--s)c.point((S=C[s])[0],S[1]);else l(I.x,I.p.x,-1,c);I=I.p}I=I.o,C=I.z,D=!D}while(!I.v);c.lineEnd()}}}function jb(e){if(!!(t=e.length)){for(var t,r=0,l=e[0],c;++r<t;)l.n=c=e[r],c.p=l,l=c;l.n=c=e[0],c.p=l}}function Tg(e){return $n(e[0])<=Bn?e[0]:Fo(e[0])*(($n(e[0])+Bn)%Wi-Bn)}function _4(e,t){var r=Tg(t),l=t[1],c=Qt(l),f=[Qt(r),-an(r),0],g=0,s=0,_=new Ai;c===1?l=Dr+mn:c===-1&&(l=-Dr-mn);for(var E=0,C=e.length;E<C;++E)if(!!(I=(S=e[E]).length))for(var S,I,D=S[I-1],J=Tg(D),X=D[1]/2+em,G=Qt(X),U=an(X),H=0;H<I;++H,J=ne,G=F,U=w,D=$){var $=S[H],ne=Tg($),W=$[1]/2+em,F=Qt(W),w=an(W),k=ne-J,B=k>=0?1:-1,q=B*k,K=q>Bn,fe=G*F;if(_.add(Zi(fe*B*Qt(q),U*w+fe*an(q))),g+=K?k+B*Wi:k,K^J>=r^ne>=r){var ge=Vc(mu(D),mu($));am(ge);var xe=Vc(f,ge);am(xe);var ee=(K^k>=0?-1:1)*Xi(xe[2]);(l>ee||l===ee&&(ge[0]||ge[1]))&&(s+=K^k>=0?1:-1)}}return(g<-mn||g<mn&&_<-Df)^s&1}function b4(e,t,r,l){return function(c){var f=t(c),g=v4(),s=t(g),_=!1,E,C,S,I={point:D,lineStart:X,lineEnd:G,polygonStart:function(){I.point=U,I.lineStart=H,I.lineEnd=$,C=[],E=[]},polygonEnd:function(){I.point=D,I.lineStart=X,I.lineEnd=G,C=r4(C);var ne=_4(E,l);C.length?(_||(c.polygonStart(),_=!0),x4(C,UA,ne,r,c)):ne&&(_||(c.polygonStart(),_=!0),c.lineStart(),r(null,null,1,c),c.lineEnd()),_&&(c.polygonEnd(),_=!1),C=E=null},sphere:function(){c.polygonStart(),c.lineStart(),r(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function D(ne,W){e(ne,W)&&c.point(ne,W)}function J(ne,W){f.point(ne,W)}function X(){I.point=J,f.lineStart()}function G(){I.point=D,f.lineEnd()}function U(ne,W){S.push([ne,W]),s.point(ne,W)}function H(){s.lineStart(),S=[]}function $(){U(S[0][0],S[0][1]),s.lineEnd();var ne=s.clean(),W=g.result(),F,w=W.length,k,B,q;if(S.pop(),E.push(S),S=null,!!w){if(ne&1){if(B=W[0],(k=B.length-1)>0){for(_||(c.polygonStart(),_=!0),c.lineStart(),F=0;F<k;++F)c.point((q=B[F])[0],q[1]);c.lineEnd()}return}w>1&&ne&2&&W.push(W.pop().concat(W.shift())),C.push(W.filter(NA))}}return I}}function NA(e){return e.length>1}function UA(e,t){return((e=e.x)[0]<0?e[1]-Dr-mn:Dr-e[1])-((t=t.x)[0]<0?t[1]-Dr-mn:Dr-t[1])}var K1=b4(function(){return!0},VA,GA,[-Bn,-Dr]);function VA(e){var t=NaN,r=NaN,l=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(f,g){var s=f>0?Bn:-Bn,_=$n(f-t);$n(_-Bn)<mn?(e.point(t,r=(r+g)/2>0?Dr:-Dr),e.point(l,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(f,r),c=0):l!==s&&_>=Bn&&($n(t-l)<mn&&(t-=l*mn),$n(f-s)<mn&&(f-=s*mn),r=$A(t,r,f,g),e.point(l,r),e.lineEnd(),e.lineStart(),e.point(s,r),c=0),e.point(t=f,r=g),l=s},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-c}}}function $A(e,t,r,l){var c,f,g=Qt(e-r);return $n(g)>mn?th((Qt(t)*(f=an(l))*Qt(r)-Qt(l)*(c=an(t))*Qt(e))/(c*f*g)):(t+l)/2}function GA(e,t,r,l){var c;if(e==null)c=r*Dr,l.point(-Bn,c),l.point(0,c),l.point(Bn,c),l.point(Bn,0),l.point(Bn,-c),l.point(0,-c),l.point(-Bn,-c),l.point(-Bn,0),l.point(-Bn,c);else if($n(e[0]-t[0])>mn){var f=e[0]<t[0]?Bn:-Bn;c=r*f/2,l.point(-f,c),l.point(0,c),l.point(f,c)}else l.point(t[0],t[1])}function w4(e){var t=an(e),r=6*gn,l=t>0,c=$n(t)>mn;function f(C,S,I,D){y4(D,e,r,I,C,S)}function g(C,S){return an(C)*an(S)>t}function s(C){var S,I,D,J,X;return{lineStart:function(){J=D=!1,X=1},point:function(G,U){var H=[G,U],$,ne=g(G,U),W=l?ne?0:E(G,U):ne?E(G+(G<0?Bn:-Bn),U):0;if(!S&&(J=D=ne)&&C.lineStart(),ne!==D&&($=_(S,H),(!$||vp(S,$)||vp(H,$))&&(H[2]=1)),ne!==D)X=0,ne?(C.lineStart(),$=_(H,S),C.point($[0],$[1])):($=_(S,H),C.point($[0],$[1],2),C.lineEnd()),S=$;else if(c&&S&&l^ne){var F;!(W&I)&&(F=_(H,S,!0))&&(X=0,l?(C.lineStart(),C.point(F[0][0],F[0][1]),C.point(F[1][0],F[1][1]),C.lineEnd()):(C.point(F[1][0],F[1][1]),C.lineEnd(),C.lineStart(),C.point(F[0][0],F[0][1],3)))}ne&&(!S||!vp(S,H))&&C.point(H[0],H[1]),S=H,D=ne,I=W},lineEnd:function(){D&&C.lineEnd(),S=null},clean:function(){return X|(J&&D)<<1}}}function _(C,S,I){var D=mu(C),J=mu(S),X=[1,0,0],G=Vc(D,J),U=Xd(G,G),H=G[0],$=U-H*H;if(!$)return!I&&C;var ne=t*U/$,W=-t*H/$,F=Vc(X,G),w=Yd(X,ne),k=Yd(G,W);Cg(w,k);var B=F,q=Xd(w,B),K=Xd(B,B),fe=q*q-K*(Xd(w,w)-1);if(!(fe<0)){var ge=oi(fe),xe=Yd(B,(-q-ge)/K);if(Cg(xe,w),xe=om(xe),!I)return xe;var ee=C[0],re=S[0],ie=C[1],le=S[1],_e;re<ee&&(_e=ee,ee=re,re=_e);var Ie=re-ee,ce=$n(Ie-Bn)<mn,ke=ce||Ie<mn;if(!ce&&le<ie&&(_e=ie,ie=le,le=_e),ke?ce?ie+le>0^xe[1]<($n(xe[0]-ee)<mn?ie:le):ie<=xe[1]&&xe[1]<=le:Ie>Bn^(ee<=xe[0]&&xe[0]<=re)){var Te=Yd(B,(-q+ge)/K);return Cg(Te,w),[xe,om(Te)]}}}function E(C,S){var I=l?e:Bn-e,D=0;return C<-I?D|=1:C>I&&(D|=2),S<-I?D|=4:S>I&&(D|=8),D}return b4(g,s,f,l?[0,-e]:[-Bn,e-Bn])}function HA(e,t,r,l,c,f){var g=e[0],s=e[1],_=t[0],E=t[1],C=0,S=1,I=_-g,D=E-s,J;if(J=r-g,!(!I&&J>0)){if(J/=I,I<0){if(J<C)return;J<S&&(S=J)}else if(I>0){if(J>S)return;J>C&&(C=J)}if(J=c-g,!(!I&&J<0)){if(J/=I,I<0){if(J>S)return;J>C&&(C=J)}else if(I>0){if(J<C)return;J<S&&(S=J)}if(J=l-s,!(!D&&J>0)){if(J/=D,D<0){if(J<C)return;J<S&&(S=J)}else if(D>0){if(J>S)return;J>C&&(C=J)}if(J=f-s,!(!D&&J<0)){if(J/=D,D<0){if(J>S)return;J>C&&(C=J)}else if(D>0){if(J<C)return;J<S&&(S=J)}return C>0&&(e[0]=g+C*I,e[1]=s+C*D),S<1&&(t[0]=g+S*I,t[1]=s+S*D),!0}}}}}var Qh=1e9,qd=-Qh;function Xm(e,t,r,l){function c(E,C){return e<=E&&E<=r&&t<=C&&C<=l}function f(E,C,S,I){var D=0,J=0;if(E==null||(D=g(E,S))!==(J=g(C,S))||_(E,C)<0^S>0)do I.point(D===0||D===3?e:r,D>1?l:t);while((D=(D+S+4)%4)!==J);else I.point(C[0],C[1])}function g(E,C){return $n(E[0]-e)<mn?C>0?0:3:$n(E[0]-r)<mn?C>0?2:1:$n(E[1]-t)<mn?C>0?1:0:C>0?3:2}function s(E,C){return _(E.x,C.x)}function _(E,C){var S=g(E,1),I=g(C,1);return S!==I?S-I:S===0?C[1]-E[1]:S===1?E[0]-C[0]:S===2?E[1]-C[1]:C[0]-E[0]}return function(E){var C=E,S=v4(),I,D,J,X,G,U,H,$,ne,W,F,w={point:k,lineStart:fe,lineEnd:ge,polygonStart:q,polygonEnd:K};function k(ee,re){c(ee,re)&&C.point(ee,re)}function B(){for(var ee=0,re=0,ie=D.length;re<ie;++re)for(var le=D[re],_e=1,Ie=le.length,ce=le[0],ke,Te,Pe=ce[0],De=ce[1];_e<Ie;++_e)ke=Pe,Te=De,ce=le[_e],Pe=ce[0],De=ce[1],Te<=l?De>l&&(Pe-ke)*(l-Te)>(De-Te)*(e-ke)&&++ee:De<=l&&(Pe-ke)*(l-Te)<(De-Te)*(e-ke)&&--ee;return ee}function q(){C=S,I=[],D=[],F=!0}function K(){var ee=B(),re=F&&ee,ie=(I=r4(I)).length;(re||ie)&&(E.polygonStart(),re&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),ie&&x4(I,s,ee,f,E),E.polygonEnd()),C=E,I=D=J=null}function fe(){w.point=xe,D&&D.push(J=[]),W=!0,ne=!1,H=$=NaN}function ge(){I&&(xe(X,G),U&&ne&&S.rejoin(),I.push(S.result())),w.point=k,ne&&C.lineEnd()}function xe(ee,re){var ie=c(ee,re);if(D&&J.push([ee,re]),W)X=ee,G=re,U=ie,W=!1,ie&&(C.lineStart(),C.point(ee,re));else if(ie&&ne)C.point(ee,re);else{var le=[H=Math.max(qd,Math.min(Qh,H)),$=Math.max(qd,Math.min(Qh,$))],_e=[ee=Math.max(qd,Math.min(Qh,ee)),re=Math.max(qd,Math.min(Qh,re))];HA(le,_e,e,t,r,l)?(ne||(C.lineStart(),C.point(le[0],le[1])),C.point(_e[0],_e[1]),ie||C.lineEnd(),F=!1):ie&&(C.lineStart(),C.point(ee,re),F=!1)}H=ee,$=re,ne=ie}return w}}function WA(){var e=0,t=0,r=960,l=500,c,f,g;return g={stream:function(s){return c&&f===s?c:c=Xm(e,t,r,l)(f=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],r=+s[1][0],l=+s[1][1],c=f=null,g):[[e,t],[r,l]]}}}var q1,J1,xp,_p,$c={sphere:Mr,point:Mr,lineStart:ZA,lineEnd:Mr,polygonStart:Mr,polygonEnd:Mr};function ZA(){$c.point=YA,$c.lineEnd=XA}function XA(){$c.point=$c.lineEnd=Mr}function YA(e,t){e*=gn,t*=gn,J1=e,xp=Qt(t),_p=an(t),$c.point=KA}function KA(e,t){e*=gn,t*=gn;var r=Qt(t),l=an(t),c=$n(e-J1),f=an(c),g=Qt(c),s=l*g,_=_p*r-xp*l*f,E=xp*r+_p*l*f;q1.add(Zi(oi(s*s+_*_),E)),J1=e,xp=r,_p=l}function E4(e){return q1=new Ai,aa(e,$c),+q1}var Q1=[null,null],qA={type:"LineString",coordinates:Q1};function pm(e,t){return Q1[0]=e,Q1[1]=t,E4(qA)}var Db={Feature:function(e,t){return mm(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,l=-1,c=r.length;++l<c;)if(mm(r[l].geometry,t))return!0;return!1}},Nb={Sphere:function(){return!0},Point:function(e,t){return Ub(e.coordinates,t)},MultiPoint:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)if(Ub(r[l],t))return!0;return!1},LineString:function(e,t){return Vb(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)if(Vb(r[l],t))return!0;return!1},Polygon:function(e,t){return $b(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,l=-1,c=r.length;++l<c;)if($b(r[l],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,l=-1,c=r.length;++l<c;)if(mm(r[l],t))return!0;return!1}};function mm(e,t){return e&&Nb.hasOwnProperty(e.type)?Nb[e.type](e,t):!1}function Ub(e,t){return pm(e,t)===0}function Vb(e,t){for(var r,l,c,f=0,g=e.length;f<g;f++){if(l=pm(e[f],t),l===0||f>0&&(c=pm(e[f],e[f-1]),c>0&&r<=c&&l<=c&&(r+l-c)*(1-Math.pow((r-l)/c,2))<Df*c))return!0;r=l}return!1}function $b(e,t){return!!_4(e.map(JA),S4(t))}function JA(e){return e=e.map(S4),e.pop(),e}function S4(e){return[e[0]*gn,e[1]*gn]}function QA(e,t){return(e&&Db.hasOwnProperty(e.type)?Db[e.type]:mm)(e,t)}function Gb(e,t,r){var l=wc(e,t-mn,r).concat(t);return function(c){return l.map(function(f){return[c,f]})}}function Hb(e,t,r){var l=wc(e,t-mn,r).concat(t);return function(c){return l.map(function(f){return[f,c]})}}function C4(){var e,t,r,l,c,f,g,s,_=10,E=_,C=90,S=360,I,D,J,X,G=2.5;function U(){return{type:"MultiLineString",coordinates:H()}}function H(){return wc(Zd(l/C)*C,r,C).map(J).concat(wc(Zd(s/S)*S,g,S).map(X)).concat(wc(Zd(t/_)*_,e,_).filter(function($){return $n($%C)>mn}).map(I)).concat(wc(Zd(f/E)*E,c,E).filter(function($){return $n($%S)>mn}).map(D))}return U.lines=function(){return H().map(function($){return{type:"LineString",coordinates:$}})},U.outline=function(){return{type:"Polygon",coordinates:[J(l).concat(X(g).slice(1),J(r).reverse().slice(1),X(s).reverse().slice(1))]}},U.extent=function($){return arguments.length?U.extentMajor($).extentMinor($):U.extentMinor()},U.extentMajor=function($){return arguments.length?(l=+$[0][0],r=+$[1][0],s=+$[0][1],g=+$[1][1],l>r&&($=l,l=r,r=$),s>g&&($=s,s=g,g=$),U.precision(G)):[[l,s],[r,g]]},U.extentMinor=function($){return arguments.length?(t=+$[0][0],e=+$[1][0],f=+$[0][1],c=+$[1][1],t>e&&($=t,t=e,e=$),f>c&&($=f,f=c,c=$),U.precision(G)):[[t,f],[e,c]]},U.step=function($){return arguments.length?U.stepMajor($).stepMinor($):U.stepMinor()},U.stepMajor=function($){return arguments.length?(C=+$[0],S=+$[1],U):[C,S]},U.stepMinor=function($){return arguments.length?(_=+$[0],E=+$[1],U):[_,E]},U.precision=function($){return arguments.length?(G=+$,I=Gb(f,c,90),D=Hb(t,e,G),J=Gb(s,g,90),X=Hb(l,r,G),U):G},U.extentMajor([[-180,-90+mn],[180,90-mn]]).extentMinor([[-180,-80-mn],[180,80+mn]])}function eI(){return C4()()}function tI(e,t){var r=e[0]*gn,l=e[1]*gn,c=t[0]*gn,f=t[1]*gn,g=an(l),s=Qt(l),_=an(f),E=Qt(f),C=g*an(r),S=g*Qt(r),I=_*an(c),D=_*Qt(c),J=2*Xi(oi(Cb(f-l)+g*_*Cb(c-r))),X=Qt(J),G=J?function(U){var H=Qt(U*=J)/X,$=Qt(J-U)/X,ne=$*C+H*I,W=$*S+H*D,F=$*s+H*E;return[Zi(W,ne)*hr,Zi(F,oi(ne*ne+W*W))*hr]}:function(){return[r*hr,l*hr]};return G.distance=J,G}var Nf=e=>e,Ag=new Ai,ey=new Ai,T4,A4,ty,ny,Ks={point:Mr,lineStart:Mr,lineEnd:Mr,polygonStart:function(){Ks.lineStart=nI,Ks.lineEnd=iI},polygonEnd:function(){Ks.lineStart=Ks.lineEnd=Ks.point=Mr,Ag.add($n(ey)),ey=new Ai},result:function(){var e=Ag/2;return Ag=new Ai,e}};function nI(){Ks.point=rI}function rI(e,t){Ks.point=I4,T4=ty=e,A4=ny=t}function I4(e,t){ey.add(ny*e-ty*t),ty=e,ny=t}function iI(){I4(T4,A4)}var Wb=Ks,Gc=1/0,gm=Gc,Uf=-Gc,ym=Uf,oI={point:aI,lineStart:Mr,lineEnd:Mr,polygonStart:Mr,polygonEnd:Mr,result:function(){var e=[[Gc,gm],[Uf,ym]];return Uf=ym=-(gm=Gc=1/0),e}};function aI(e,t){e<Gc&&(Gc=e),e>Uf&&(Uf=e),t<gm&&(gm=t),t>ym&&(ym=t)}var vm=oI,ry=0,iy=0,ef=0,xm=0,_m=0,Ec=0,oy=0,ay=0,tf=0,P4,k4,Ia,Pa,sa={point:gu,lineStart:Zb,lineEnd:Xb,polygonStart:function(){sa.lineStart=uI,sa.lineEnd=cI},polygonEnd:function(){sa.point=gu,sa.lineStart=Zb,sa.lineEnd=Xb},result:function(){var e=tf?[oy/tf,ay/tf]:Ec?[xm/Ec,_m/Ec]:ef?[ry/ef,iy/ef]:[NaN,NaN];return ry=iy=ef=xm=_m=Ec=oy=ay=tf=0,e}};function gu(e,t){ry+=e,iy+=t,++ef}function Zb(){sa.point=sI}function sI(e,t){sa.point=lI,gu(Ia=e,Pa=t)}function lI(e,t){var r=e-Ia,l=t-Pa,c=oi(r*r+l*l);xm+=c*(Ia+e)/2,_m+=c*(Pa+t)/2,Ec+=c,gu(Ia=e,Pa=t)}function Xb(){sa.point=gu}function uI(){sa.point=hI}function cI(){M4(P4,k4)}function hI(e,t){sa.point=M4,gu(P4=Ia=e,k4=Pa=t)}function M4(e,t){var r=e-Ia,l=t-Pa,c=oi(r*r+l*l);xm+=c*(Ia+e)/2,_m+=c*(Pa+t)/2,Ec+=c,c=Pa*e-Ia*t,oy+=c*(Ia+e),ay+=c*(Pa+t),tf+=c*3,gu(Ia=e,Pa=t)}var Yb=sa;function z4(e){this._context=e}z4.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wi);break}}},result:Mr};var sy=new Ai,Ig,L4,O4,nf,rf,bm={point:Mr,lineStart:function(){bm.point=fI},lineEnd:function(){Ig&&R4(L4,O4),bm.point=Mr},polygonStart:function(){Ig=!0},polygonEnd:function(){Ig=null},result:function(){var e=+sy;return sy=new Ai,e}};function fI(e,t){bm.point=R4,L4=nf=e,O4=rf=t}function R4(e,t){nf-=e,rf-=t,sy.add(oi(nf*nf+rf*rf)),nf=e,rf=t}var Kb=bm;function F4(){this._string=[]}F4.prototype={_radius:4.5,_circle:qb(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=qb(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function qb(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function dI(e,t){var r=4.5,l,c;function f(g){return g&&(typeof r=="function"&&c.pointRadius(+r.apply(this,arguments)),aa(g,l(c))),c.result()}return f.area=function(g){return aa(g,l(Wb)),Wb.result()},f.measure=function(g){return aa(g,l(Kb)),Kb.result()},f.bounds=function(g){return aa(g,l(vm)),vm.result()},f.centroid=function(g){return aa(g,l(Yb)),Yb.result()},f.projection=function(g){return arguments.length?(l=g==null?(e=null,Nf):(e=g).stream,f):e},f.context=function(g){return arguments.length?(c=g==null?(t=null,new F4):new z4(t=g),typeof r!="function"&&c.pointRadius(r),f):t},f.pointRadius=function(g){return arguments.length?(r=typeof g=="function"?g:(c.pointRadius(+g),+g),f):r},f.projection(e).context(t)}function pI(e){return{stream:Qf(e)}}function Qf(e){return function(t){var r=new ly;for(var l in e)r[l]=e[l];return r.stream=t,r}}function ly(){}ly.prototype={constructor:ly,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Mv(e,t,r){var l=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),l!=null&&e.clipExtent(null),aa(r,e.stream(vm)),t(vm.result()),l!=null&&e.clipExtent(l),e}function Ym(e,t,r){return Mv(e,function(l){var c=t[1][0]-t[0][0],f=t[1][1]-t[0][1],g=Math.min(c/(l[1][0]-l[0][0]),f/(l[1][1]-l[0][1])),s=+t[0][0]+(c-g*(l[1][0]+l[0][0]))/2,_=+t[0][1]+(f-g*(l[1][1]+l[0][1]))/2;e.scale(150*g).translate([s,_])},r)}function zv(e,t,r){return Ym(e,[[0,0],t],r)}function Lv(e,t,r){return Mv(e,function(l){var c=+t,f=c/(l[1][0]-l[0][0]),g=(c-f*(l[1][0]+l[0][0]))/2,s=-f*l[0][1];e.scale(150*f).translate([g,s])},r)}function Ov(e,t,r){return Mv(e,function(l){var c=+t,f=c/(l[1][1]-l[0][1]),g=-f*l[0][0],s=(c-f*(l[1][1]+l[0][1]))/2;e.scale(150*f).translate([g,s])},r)}var Jb=16,mI=an(30*gn);function Qb(e,t){return+t?yI(e,t):gI(e)}function gI(e){return Qf({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function yI(e,t){function r(l,c,f,g,s,_,E,C,S,I,D,J,X,G){var U=E-l,H=C-c,$=U*U+H*H;if($>4*t&&X--){var ne=g+I,W=s+D,F=_+J,w=oi(ne*ne+W*W+F*F),k=Xi(F/=w),B=$n($n(F)-1)<mn||$n(f-S)<mn?(f+S)/2:Zi(W,ne),q=e(B,k),K=q[0],fe=q[1],ge=K-l,xe=fe-c,ee=H*ge-U*xe;(ee*ee/$>t||$n((U*ge+H*xe)/$-.5)>.3||g*I+s*D+_*J<mI)&&(r(l,c,f,g,s,_,K,fe,B,ne/=w,W/=w,F,X,G),G.point(K,fe),r(K,fe,B,ne,W,F,E,C,S,I,D,J,X,G))}}return function(l){var c,f,g,s,_,E,C,S,I,D,J,X,G={point:U,lineStart:H,lineEnd:ne,polygonStart:function(){l.polygonStart(),G.lineStart=W},polygonEnd:function(){l.polygonEnd(),G.lineStart=H}};function U(k,B){k=e(k,B),l.point(k[0],k[1])}function H(){S=NaN,G.point=$,l.lineStart()}function $(k,B){var q=mu([k,B]),K=e(k,B);r(S,I,C,D,J,X,S=K[0],I=K[1],C=k,D=q[0],J=q[1],X=q[2],Jb,l),l.point(S,I)}function ne(){G.point=U,l.lineEnd()}function W(){H(),G.point=F,G.lineEnd=w}function F(k,B){$(c=k,B),f=S,g=I,s=D,_=J,E=X,G.point=$}function w(){r(S,I,C,D,J,X,f,g,c,s,_,E,Jb,l),G.lineEnd=ne,ne()}return G}}var vI=Qf({point:function(e,t){this.stream.point(e*gn,t*gn)}});function xI(e){return Qf({point:function(t,r){var l=e(t,r);return this.stream.point(l[0],l[1])}})}function _I(e,t,r,l,c){function f(g,s){return g*=l,s*=c,[t+e*g,r-e*s]}return f.invert=function(g,s){return[(g-t)/e*l,(r-s)/e*c]},f}function ew(e,t,r,l,c,f){if(!f)return _I(e,t,r,l,c);var g=an(f),s=Qt(f),_=g*e,E=s*e,C=g/e,S=s/e,I=(s*r-g*t)/e,D=(s*t+g*r)/e;function J(X,G){return X*=l,G*=c,[_*X-E*G+t,r-E*X-_*G]}return J.invert=function(X,G){return[l*(C*X-S*G+I),c*(D-S*X-C*G)]},J}function Na(e){return Rv(function(){return e})()}function Rv(e){var t,r=150,l=480,c=250,f=0,g=0,s=0,_=0,E=0,C,S=0,I=1,D=1,J=null,X=K1,G=null,U,H,$,ne=Nf,W=.5,F,w,k,B,q;function K(ee){return k(ee[0]*gn,ee[1]*gn)}function fe(ee){return ee=k.invert(ee[0],ee[1]),ee&&[ee[0]*hr,ee[1]*hr]}K.stream=function(ee){return B&&q===ee?B:B=vI(xI(C)(X(F(ne(q=ee)))))},K.preclip=function(ee){return arguments.length?(X=ee,J=void 0,xe()):X},K.postclip=function(ee){return arguments.length?(ne=ee,G=U=H=$=null,xe()):ne},K.clipAngle=function(ee){return arguments.length?(X=+ee?w4(J=ee*gn):(J=null,K1),xe()):J*hr},K.clipExtent=function(ee){return arguments.length?(ne=ee==null?(G=U=H=$=null,Nf):Xm(G=+ee[0][0],U=+ee[0][1],H=+ee[1][0],$=+ee[1][1]),xe()):G==null?null:[[G,U],[H,$]]},K.scale=function(ee){return arguments.length?(r=+ee,ge()):r},K.translate=function(ee){return arguments.length?(l=+ee[0],c=+ee[1],ge()):[l,c]},K.center=function(ee){return arguments.length?(f=ee[0]%360*gn,g=ee[1]%360*gn,ge()):[f*hr,g*hr]},K.rotate=function(ee){return arguments.length?(s=ee[0]%360*gn,_=ee[1]%360*gn,E=ee.length>2?ee[2]%360*gn:0,ge()):[s*hr,_*hr,E*hr]},K.angle=function(ee){return arguments.length?(S=ee%360*gn,ge()):S*hr},K.reflectX=function(ee){return arguments.length?(I=ee?-1:1,ge()):I<0},K.reflectY=function(ee){return arguments.length?(D=ee?-1:1,ge()):D<0},K.precision=function(ee){return arguments.length?(F=Qb(w,W=ee*ee),xe()):oi(W)},K.fitExtent=function(ee,re){return Ym(K,ee,re)},K.fitSize=function(ee,re){return zv(K,ee,re)},K.fitWidth=function(ee,re){return Lv(K,ee,re)},K.fitHeight=function(ee,re){return Ov(K,ee,re)};function ge(){var ee=ew(r,0,0,I,D,S).apply(null,t(f,g)),re=ew(r,l-ee[0],c-ee[1],I,D,S);return C=kv(s,_,E),w=X1(t,re),k=X1(C,w),F=Qb(w,W),xe()}function xe(){return B=q=null,K}return function(){return t=e.apply(this,arguments),K.invert=t.invert&&fe,ge()}}function Fv(e){var t=0,r=Bn/3,l=Rv(e),c=l(t,r);return c.parallels=function(f){return arguments.length?l(t=f[0]*gn,r=f[1]*gn):[t*hr,r*hr]},c}function bI(e){var t=an(e);function r(l,c){return[l*t,Qt(c)/t]}return r.invert=function(l,c){return[l/t,Xi(c*t)]},r}function B4(e,t){var r=Qt(e),l=(r+Qt(t))/2;if($n(l)<mn)return bI(e);var c=1+r*(2*l-r),f=oi(c)/l;function g(s,_){var E=oi(c-2*l*Qt(_))/l;return[E*Qt(s*=l),f-E*an(s)]}return g.invert=function(s,_){var E=f-_,C=Zi(s,$n(E))*Fo(E);return E*l<0&&(C-=Bn*Fo(s)*Fo(E)),[C/l,Xi((c-(s*s+E*E)*l*l)/(2*l))]},g}function wm(){return Fv(B4).scale(155.424).center([0,33.6442])}function j4(){return wm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wI(e){var t=e.length;return{point:function(r,l){for(var c=-1;++c<t;)e[c].point(r,l)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function EI(){var e,t,r=j4(),l,c=wm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,g=wm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,_,E={point:function(I,D){_=[I,D]}};function C(I){var D=I[0],J=I[1];return _=null,l.point(D,J),_||(f.point(D,J),_)||(s.point(D,J),_)}C.invert=function(I){var D=r.scale(),J=r.translate(),X=(I[0]-J[0])/D,G=(I[1]-J[1])/D;return(G>=.12&&G<.234&&X>=-.425&&X<-.214?c:G>=.166&&G<.234&&X>=-.214&&X<-.115?g:r).invert(I)},C.stream=function(I){return e&&t===I?e:e=wI([r.stream(t=I),c.stream(I),g.stream(I)])},C.precision=function(I){return arguments.length?(r.precision(I),c.precision(I),g.precision(I),S()):r.precision()},C.scale=function(I){return arguments.length?(r.scale(I),c.scale(I*.35),g.scale(I),C.translate(r.translate())):r.scale()},C.translate=function(I){if(!arguments.length)return r.translate();var D=r.scale(),J=+I[0],X=+I[1];return l=r.translate(I).clipExtent([[J-.455*D,X-.238*D],[J+.455*D,X+.238*D]]).stream(E),f=c.translate([J-.307*D,X+.201*D]).clipExtent([[J-.425*D+mn,X+.12*D+mn],[J-.214*D-mn,X+.234*D-mn]]).stream(E),s=g.translate([J-.205*D,X+.212*D]).clipExtent([[J-.214*D+mn,X+.166*D+mn],[J-.115*D-mn,X+.234*D-mn]]).stream(E),S()},C.fitExtent=function(I,D){return Ym(C,I,D)},C.fitSize=function(I,D){return zv(C,I,D)},C.fitWidth=function(I,D){return Lv(C,I,D)},C.fitHeight=function(I,D){return Ov(C,I,D)};function S(){return e=t=null,C}return C.scale(1070)}function D4(e){return function(t,r){var l=an(t),c=an(r),f=e(l*c);return f===1/0?[2,0]:[f*c*Qt(t),f*Qt(r)]}}function ed(e){return function(t,r){var l=oi(t*t+r*r),c=e(l),f=Qt(c),g=an(c);return[Zi(t*f,l*g),Xi(l&&r*f/l)]}}var Bv=D4(function(e){return oi(2/(1+e))});Bv.invert=ed(function(e){return 2*Xi(e/2)});function SI(){return Na(Bv).scale(124.75).clipAngle(180-.001)}var jv=D4(function(e){return(e=o4(e))&&e/Qt(e)});jv.invert=ed(function(e){return e});function CI(){return Na(jv).scale(79.4188).clipAngle(180-.001)}function td(e,t){return[e,tm(Iv((Dr+t)/2))]}td.invert=function(e,t){return[e,2*th(i4(t))-Dr]};function TI(){return N4(td).scale(961/Wi)}function N4(e){var t=Na(e),r=t.center,l=t.scale,c=t.translate,f=t.clipExtent,g=null,s,_,E;t.scale=function(S){return arguments.length?(l(S),C()):l()},t.translate=function(S){return arguments.length?(c(S),C()):c()},t.center=function(S){return arguments.length?(r(S),C()):r()},t.clipExtent=function(S){return arguments.length?(S==null?g=s=_=E=null:(g=+S[0][0],s=+S[0][1],_=+S[1][0],E=+S[1][1]),C()):g==null?null:[[g,s],[_,E]]};function C(){var S=Bn*l(),I=t(g4(t.rotate()).invert([0,0]));return f(g==null?[[I[0]-S,I[1]-S],[I[0]+S,I[1]+S]]:e===td?[[Math.max(I[0]-S,g),s],[Math.min(I[0]+S,_),E]]:[[g,Math.max(I[1]-S,s)],[_,Math.min(I[1]+S,E)]])}return C()}function Jd(e){return Iv((Dr+e)/2)}function U4(e,t){var r=an(e),l=e===t?Qt(e):tm(r/an(t))/tm(Jd(t)/Jd(e)),c=r*Sg(Jd(e),l)/l;if(!l)return td;function f(g,s){c>0?s<-Dr+mn&&(s=-Dr+mn):s>Dr-mn&&(s=Dr-mn);var _=c/Sg(Jd(s),l);return[_*Qt(l*g),c-_*an(l*g)]}return f.invert=function(g,s){var _=c-s,E=Fo(l)*oi(g*g+_*_),C=Zi(g,$n(_))*Fo(_);return _*l<0&&(C-=Bn*Fo(g)*Fo(_)),[C/l,2*th(Sg(c/E,1/l))-Dr]},f}function AI(){return Fv(U4).scale(109.5).parallels([30,30])}function Vf(e,t){return[e,t]}Vf.invert=Vf;function II(){return Na(Vf).scale(152.63)}function V4(e,t){var r=an(e),l=e===t?Qt(e):(r-an(t))/(t-e),c=r/l+e;if($n(l)<mn)return Vf;function f(g,s){var _=c-s,E=l*g;return[_*Qt(E),c-_*an(E)]}return f.invert=function(g,s){var _=c-s,E=Zi(g,$n(_))*Fo(_);return _*l<0&&(E-=Bn*Fo(g)*Fo(_)),[E/l,c-Fo(l)*oi(g*g+_*_)]},f}function PI(){return Fv(V4).scale(131.154).center([0,13.9389])}var _f=1.340264,bf=-.081106,wf=893e-6,Ef=.003796,Em=oi(3)/2,kI=12;function Dv(e,t){var r=Xi(Em*Qt(t)),l=r*r,c=l*l*l;return[e*an(r)/(Em*(_f+3*bf*l+c*(7*wf+9*Ef*l))),r*(_f+bf*l+c*(wf+Ef*l))]}Dv.invert=function(e,t){for(var r=t,l=r*r,c=l*l*l,f=0,g,s,_;f<kI&&(s=r*(_f+bf*l+c*(wf+Ef*l))-t,_=_f+3*bf*l+c*(7*wf+9*Ef*l),r-=g=s/_,l=r*r,c=l*l*l,!($n(g)<Df));++f);return[Em*e*(_f+3*bf*l+c*(7*wf+9*Ef*l))/an(r),Xi(Qt(r)/Em)]};function MI(){return Na(Dv).scale(177.158)}function Nv(e,t){var r=an(t),l=an(e)*r;return[r*Qt(e)/l,Qt(t)/l]}Nv.invert=ed(th);function zI(){return Na(Nv).scale(144.049).clipAngle(60)}function LI(){var e=1,t=0,r=0,l=1,c=1,f=0,g,s,_=null,E,C,S,I=1,D=1,J=Qf({point:function(ne,W){var F=$([ne,W]);this.stream.point(F[0],F[1])}}),X=Nf,G,U;function H(){return I=e*l,D=e*c,G=U=null,$}function $(ne){var W=ne[0]*I,F=ne[1]*D;if(f){var w=F*g-W*s;W=W*g+F*s,F=w}return[W+t,F+r]}return $.invert=function(ne){var W=ne[0]-t,F=ne[1]-r;if(f){var w=F*g+W*s;W=W*g-F*s,F=w}return[W/I,F/D]},$.stream=function(ne){return G&&U===ne?G:G=J(X(U=ne))},$.postclip=function(ne){return arguments.length?(X=ne,_=E=C=S=null,H()):X},$.clipExtent=function(ne){return arguments.length?(X=ne==null?(_=E=C=S=null,Nf):Xm(_=+ne[0][0],E=+ne[0][1],C=+ne[1][0],S=+ne[1][1]),H()):_==null?null:[[_,E],[C,S]]},$.scale=function(ne){return arguments.length?(e=+ne,H()):e},$.translate=function(ne){return arguments.length?(t=+ne[0],r=+ne[1],H()):[t,r]},$.angle=function(ne){return arguments.length?(f=ne%360*gn,s=Qt(f),g=an(f),H()):f*hr},$.reflectX=function(ne){return arguments.length?(l=ne?-1:1,H()):l<0},$.reflectY=function(ne){return arguments.length?(c=ne?-1:1,H()):c<0},$.fitExtent=function(ne,W){return Ym($,ne,W)},$.fitSize=function(ne,W){return zv($,ne,W)},$.fitWidth=function(ne,W){return Lv($,ne,W)},$.fitHeight=function(ne,W){return Ov($,ne,W)},$}function Uv(e,t){var r=t*t,l=r*r;return[e*(.8707-.131979*r+l*(-.013791+l*(.003971*r-.001529*l))),t*(1.007226+r*(.015085+l*(-.044475+.028874*r-.005916*l)))]}Uv.invert=function(e,t){var r=t,l=25,c;do{var f=r*r,g=f*f;r-=c=(r*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))-t)/(1.007226+f*(.015085*3+g*(-.044475*7+.028874*9*f-.005916*11*g)))}while($n(c)>mn&&--l>0);return[e/(.8707+(f=r*r)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),r]};function OI(){return Na(Uv).scale(175.295)}function Vv(e,t){return[an(t)*Qt(e),Qt(t)]}Vv.invert=ed(Xi);function RI(){return Na(Vv).scale(249.5).clipAngle(90+mn)}function $v(e,t){var r=an(t),l=1+an(e)*r;return[r*Qt(e)/l,Qt(t)/l]}$v.invert=ed(function(e){return 2*th(e)});function FI(){return Na($v).scale(250).clipAngle(142)}function Gv(e,t){return[tm(Iv((Dr+t)/2)),-e]}Gv.invert=function(e,t){return[-t,2*th(i4(e))-Dr]};function BI(){var e=N4(Gv),t=e.center,r=e.rotate;return e.center=function(l){return arguments.length?t([-l[1],l[0]]):(l=t(),[l[1],-l[0]])},e.rotate=function(l){return arguments.length?r([l[0],l[1],l.length>2?l[2]+90:90]):(l=r(),[l[0],l[1],l[2]-90])},r([0,0,90]).scale(159.155)}var jI=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",geoArea:IA,geoBounds:zA,geoCentroid:jA,geoCircle:DA,geoClipAntimeridian:K1,geoClipCircle:w4,geoClipExtent:WA,geoClipRectangle:Xm,geoContains:QA,geoDistance:pm,geoGraticule:C4,geoGraticule10:eI,geoInterpolate:tI,geoLength:E4,geoPath:dI,geoAlbers:j4,geoAlbersUsa:EI,geoAzimuthalEqualArea:SI,geoAzimuthalEqualAreaRaw:Bv,geoAzimuthalEquidistant:CI,geoAzimuthalEquidistantRaw:jv,geoConicConformal:AI,geoConicConformalRaw:U4,geoConicEqualArea:wm,geoConicEqualAreaRaw:B4,geoConicEquidistant:PI,geoConicEquidistantRaw:V4,geoEqualEarth:MI,geoEqualEarthRaw:Dv,geoEquirectangular:II,geoEquirectangularRaw:Vf,geoGnomonic:zI,geoGnomonicRaw:Nv,geoIdentity:LI,geoProjection:Na,geoProjectionMutator:Rv,geoMercator:TI,geoMercatorRaw:td,geoNaturalEarth1:OI,geoNaturalEarth1Raw:Uv,geoOrthographic:RI,geoOrthographicRaw:Vv,geoStereographic:FI,geoStereographicRaw:$v,geoTransverseMercator:BI,geoTransverseMercatorRaw:Gv,geoRotation:g4,geoStream:aa,geoTransform:pI}),DI=gy(jI),gl=2*Math.PI*6378137/2,NI=Math.PI/180;function $4(e){return e=e||256,2*Math.PI*6378137/e}function UI(e){var t=e[0],r=e[1],l=e[2];return(1<<l)*((1<<l)+t)+r}function uy(e,t,r){var l=G4(e,t,r);return l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l}function G4(e,t,r){var l=t,c=Jv(e[0]),f=qv(e[1]),g=Math.sin(f*NI),s=Math.pow(2,l),_=s*(c/360+.5),E=s*(.5-.25*Math.log((1+g)/(1-g))/Math.PI);return wu([_,E,l],r)}function VI(e,t=6){var r=e[0],l=e[1],c=e[2],f=e[3],g=(r-c)/2+c,s=(l-f)/2+f;return t!=null&&(g=Number(g.toFixed(t)),s=Number(s.toFixed(t))),[g,s]}function Sm(e,t,r={enable:!0,decimal:1}){e=Km(e,t);var l=e[0],c=e[1],f=l*gl/180,g=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return g=g*gl/180,r.enable&&(f=Number(f.toFixed(r.decimal)),g=Number(g.toFixed(r.decimal))),[f,g]}function cy(e,t=6){var r=e[0],l=e[1],c=r/gl*180,f=l/gl*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),f=Number(f.toFixed(t))),[c,f]}function Hv(e,t,r){var l=e[0],c=e[1],f=Yv(t,r),g=(l+gl)/f,s=(c+gl)/f;return[g,s,t]}function H4(e,t,r){e=Km(e,r);var l=Sm(e),c=Hv(l,t);return Wv(c)}function $I(e,t,r){if(e=Km(e,r),t===0)return[0,0,0];var l=H4(e,t);return Z4(l)}function GI(e,t){if(t===0)return[0,0,0];var r=Hv(e,t);return Wv(r)}function hy(e,t,r=1){var l=e[0],c=e[1],f=e[2],g=Yv(f,t),s=l*g-gl,_=c*g-gl;return r!=null&&(s=Number(s.toFixed(r)),_=Number(_.toFixed(r))),[s,_]}function Wv(e,t,r){t=t||256;var l=e[0],c=e[1],f=e[2];if(f===0)return[0,0,0];Xv(f);var g=Math.ceil(l/t)-1,s=Math.ceil(c/t)-1;return g<0&&(g=0),s<0&&(s=0),[g,s,f]}function Zv(e,t,r){wu(e,r),t=t||256;var l=e[0],c=e[1],f=e[2],g=hy([l*t,c*t,f]),s=hy([(l+1)*t,(c+1)*t,f]);return[g[0],g[1],s[0],s[1]]}function W4(e,t){wu(e,t);var r=e[0],l=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var f=Zv([r,l,c]),g=f[0],s=f[1],_=f[2],E=f[3],C=cy([g,s,c]),S=cy([_,E,c]);return[C[0],C[1],S[0],S[1]]}function HI(e){var t=nd(e);return Zv(t)}function WI(e){var t=nd(e);return W4(t)}function Z4(e,t){wu(e,t);var r=e[0],l=e[1],c=e[2];if(c===0)return[0,0,0];var f=r,g=Math.pow(2,c)-1-l;return[f,g,c]}function nd(e){var t=e[0],r=e[1],l=e[2],c=t,f=Math.pow(2,l)-r-1;return[c,f,l]}function ZI(e){var t=nd(e);return X4(t)}function X4(e,t){wu(e,t);var r=e[0],l=e[1],c=e[2];if(c===0)return"";var f="";return l=Math.pow(2,c)-1-l,Kv(c,0,-1).map(function(g){var s=0,_=1<<g-1;(r&_)!==0&&(s+=1),(l&_)!==0&&(s+=2),f=f.concat(s)}),f}function XI(e){var t=Y4(e);return nd(t)}function Y4(e){var t=0,r=0,l=e.length;return Kv(l,0,-1).map(function(c){var f=1<<c-1;switch(parseInt(e[l-c],0)){case 0:break;case 1:t+=f;break;case 2:r+=f;break;case 3:t+=f,r+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,r,l]}function YI(e){var t=Sm([e[0],e[1]]),r=Sm([e[2],e[3]]);return[t[0],t[1],r[0],r[1]]}function wu(e,t){var r=e[0],l=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(r==null)throw new Error("<x> is required");if(l==null)throw new Error("<y> is required");return c=Xv(c),e=K4(e),e}function K4(e){var t=e[0],r=e[1],l=e[2],c=Math.pow(2,l);return t=t%c,t<0&&(t=t+c),[t,r,l]}function Xv(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Km(e,t){if(t===!1)return e;var r=Jv(e[0]),l=qv(e[1]);return l>85&&(l=85),l<-85&&(l=-85),[r,l]}function Yv(e,t){return $4(t)/Math.pow(2,e)}function Kv(e,t,r){t==null&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/r),0),c=Array(l),f=0;f<l;f++,e+=r)c[f]=e;return c}function KI(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],r=e[0][1],l=e[0][2],c=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<r&&(r=f[1]),f[2]>l&&(l=f[2]),f[3]>c&&(c=f[3])}),[t,r,l,c]}}function qI(e){try{return wu(e),!0}catch{return!1}}function qv(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Jv(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function JI(e){var t=uy([e[0],e[1]],32),r=uy([e[2],e[3]],32),l=[t[0],t[1],r[0],r[1]],c=QI(l);if(c===0)return[0,0,0];var f=l[0]>>>32-c,g=l[1]>>>32-c;return[f,g,c]}function QI(e){for(var t=28,r=0;r<t;r++){var l=1<<32-(r+1);if((e[0]&l)!==(e[2]&l)||(e[1]&l)!==(e[3]&l))return r}return t}var e9=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",initialResolution:$4,hash:UI,pointToTile:uy,pointToTileFraction:G4,bboxToCenter:VI,lngLatToMeters:Sm,metersToLngLat:cy,metersToPixels:Hv,lngLatToTile:H4,lngLatToGoogle:$I,metersToTile:GI,pixelsToMeters:hy,pixelsToTile:Wv,tileToBBoxMeters:Zv,tileToBBox:W4,googleToBBoxMeters:HI,googleToBBox:WI,tileToGoogle:Z4,googleToTile:nd,googleToQuadkey:ZI,tileToQuadkey:X4,quadkeyToTile:XI,quadkeyToGoogle:Y4,bboxToMeters:YI,validateTile:wu,wrapTile:K4,validateZoom:Xv,validateLngLat:Km,resolution:Yv,range:Kv,maxBBox:KI,validTile:qI,latitude:qv,longitude:Jv,bboxToTile:JI}),t9=gy(e9),qm={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */qm.read=function(e,t,r,l,c){var f,g,s=c*8-l-1,_=(1<<s)-1,E=_>>1,C=-7,S=r?c-1:0,I=r?-1:1,D=e[t+S];for(S+=I,f=D&(1<<-C)-1,D>>=-C,C+=s;C>0;f=f*256+e[t+S],S+=I,C-=8);for(g=f&(1<<-C)-1,f>>=-C,C+=l;C>0;g=g*256+e[t+S],S+=I,C-=8);if(f===0)f=1-E;else{if(f===_)return g?NaN:(D?-1:1)*(1/0);g=g+Math.pow(2,l),f=f-E}return(D?-1:1)*g*Math.pow(2,f-l)};qm.write=function(e,t,r,l,c,f){var g,s,_,E=f*8-c-1,C=(1<<E)-1,S=C>>1,I=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=l?0:f-1,J=l?1:-1,X=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,g=C):(g=Math.floor(Math.log(t)/Math.LN2),t*(_=Math.pow(2,-g))<1&&(g--,_*=2),g+S>=1?t+=I/_:t+=I*Math.pow(2,1-S),t*_>=2&&(g++,_/=2),g+S>=C?(s=0,g=C):g+S>=1?(s=(t*_-1)*Math.pow(2,c),g=g+S):(s=t*Math.pow(2,S-1)*Math.pow(2,c),g=0));c>=8;e[r+D]=s&255,D+=J,s/=256,c-=8);for(g=g<<c|s,E+=c;E>0;e[r+D]=g&255,D+=J,g/=256,E-=8);e[r+D-J]|=X*128};var n9=qn,Qd=qm;function qn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0;qn.Fixed64=1;qn.Bytes=2;qn.Fixed32=5;var fy=(1<<16)*(1<<16),tw=1/fy,r9=12,q4=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");qn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var l=this.readVarint(),c=l>>3,f=this.pos;this.type=l&7,e(c,t,this),this.pos===f&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ep(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=rw(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ep(this.buf,this.pos)+ep(this.buf,this.pos+4)*fy;return this.pos+=8,e},readSFixed64:function(){var e=ep(this.buf,this.pos)+rw(this.buf,this.pos+4)*fy;return this.pos+=8,e},readFloat:function(){var e=Qd.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Qd.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,r,l;return l=t[this.pos++],r=l&127,l<128||(l=t[this.pos++],r|=(l&127)<<7,l<128)||(l=t[this.pos++],r|=(l&127)<<14,l<128)||(l=t[this.pos++],r|=(l&127)<<21,l<128)?r:(l=t[this.pos],r|=(l&15)<<28,i9(r,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=r9&&q4?v9(this.buf,t,e):y9(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qn.Bytes)return e.push(this.readVarint(t));var r=us(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qn.Bytes)return e.push(this.readSVarint());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qn.Bytes)return e.push(this.readBoolean());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qn.Bytes)return e.push(this.readFloat());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qn.Bytes)return e.push(this.readDouble());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed32());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed32());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed64());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed64());var t=us(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qn.Varint)for(;this.buf[this.pos++]>127;);else if(t===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qn.Fixed32)this.pos+=4;else if(t===qn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),sc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),sc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),sc(this.buf,e&-1,this.pos),sc(this.buf,Math.floor(e*tw),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),sc(this.buf,e&-1,this.pos),sc(this.buf,Math.floor(e*tw),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){o9(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=x9(this.buf,e,this.pos);var r=this.pos-t;r>=128&&nw(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Qd.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Qd.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var l=this.pos-r;l>=128&&nw(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,r){this.writeTag(e,qn.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,l9,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,u9,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,f9,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,c9,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,h9,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,d9,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,p9,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,m9,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,g9,t)},writeBytesField:function(e,t){this.writeTag(e,qn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function i9(e,t,r){var l=r.buf,c,f;if(f=l[r.pos++],c=(f&112)>>4,f<128||(f=l[r.pos++],c|=(f&127)<<3,f<128)||(f=l[r.pos++],c|=(f&127)<<10,f<128)||(f=l[r.pos++],c|=(f&127)<<17,f<128)||(f=l[r.pos++],c|=(f&127)<<24,f<128)||(f=l[r.pos++],c|=(f&1)<<31,f<128))return ac(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function us(e){return e.type===qn.Bytes?e.readVarint()+e.pos:e.pos+1}function ac(e,t,r){return r?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function o9(e,t){var r,l;if(e>=0?(r=e%4294967296|0,l=e/4294967296|0):(r=~(-e%4294967296),l=~(-e/4294967296),r^4294967295?r=r+1|0:(r=0,l=l+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),a9(r,l,t),s9(l,t)}function a9(e,t,r){r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos++]=e&127|128,e>>>=7,r.buf[r.pos]=e&127}function s9(e,t){var r=(e&7)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function nw(e,t,r){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));r.realloc(l);for(var c=r.pos-1;c>=e;c--)r.buf[c+l]=r.buf[c]}function l9(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function u9(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function c9(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function h9(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function f9(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function d9(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function p9(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function m9(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function g9(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function ep(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function sc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function rw(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function y9(e,t,r){for(var l="",c=t;c<r;){var f=e[c],g=null,s=f>239?4:f>223?3:f>191?2:1;if(c+s>r)break;var _,E,C;s===1?f<128&&(g=f):s===2?(_=e[c+1],(_&192)===128&&(g=(f&31)<<6|_&63,g<=127&&(g=null))):s===3?(_=e[c+1],E=e[c+2],(_&192)===128&&(E&192)===128&&(g=(f&15)<<12|(_&63)<<6|E&63,(g<=2047||g>=55296&&g<=57343)&&(g=null))):s===4&&(_=e[c+1],E=e[c+2],C=e[c+3],(_&192)===128&&(E&192)===128&&(C&192)===128&&(g=(f&15)<<18|(_&63)<<12|(E&63)<<6|C&63,(g<=65535||g>=1114112)&&(g=null))),g===null?(g=65533,s=1):g>65535&&(g-=65536,l+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023),l+=String.fromCharCode(g),c+=s}return l}function v9(e,t,r){return q4.decode(e.subarray(t,r))}function x9(e,t,r){for(var l=0,c,f;l<t.length;l++){if(c=t.charCodeAt(l),c>55295&&c<57344)if(f)if(c<56320){e[r++]=239,e[r++]=191,e[r++]=189,f=c;continue}else c=f-55296<<10|c-56320|65536,f=null;else{c>56319||l+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):f=c;continue}else f&&(e[r++]=239,e[r++]=191,e[r++]=189,f=null);c<128?e[r++]=c:(c<2048?e[r++]=c>>6|192:(c<65536?e[r++]=c>>12|224:(e[r++]=c>>18|240,e[r++]=c>>12&63|128),e[r++]=c>>6&63|128),e[r++]=c&63|128)}return r}var Qv={exports:{}},J4=function(t,r){return function(){for(var c=new Array(arguments.length),f=0;f<c.length;f++)c[f]=arguments[f];return t.apply(r,c)}},_9=J4,Eu=Object.prototype.toString;function ex(e){return Eu.call(e)==="[object Array]"}function dy(e){return typeof e=="undefined"}function b9(e){return e!==null&&!dy(e)&&e.constructor!==null&&!dy(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function w9(e){return Eu.call(e)==="[object ArrayBuffer]"}function E9(e){return typeof FormData!="undefined"&&e instanceof FormData}function S9(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function C9(e){return typeof e=="string"}function T9(e){return typeof e=="number"}function Q4(e){return e!==null&&typeof e=="object"}function bp(e){if(Eu.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function A9(e){return Eu.call(e)==="[object Date]"}function I9(e){return Eu.call(e)==="[object File]"}function P9(e){return Eu.call(e)==="[object Blob]"}function e6(e){return Eu.call(e)==="[object Function]"}function k9(e){return Q4(e)&&e6(e.pipe)}function M9(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function z9(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function L9(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function tx(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),ex(e))for(var r=0,l=e.length;r<l;r++)t.call(null,e[r],r,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function py(){var e={};function t(c,f){bp(e[f])&&bp(c)?e[f]=py(e[f],c):bp(c)?e[f]=py({},c):ex(c)?e[f]=c.slice():e[f]=c}for(var r=0,l=arguments.length;r<l;r++)tx(arguments[r],t);return e}function O9(e,t,r){return tx(t,function(c,f){r&&typeof c=="function"?e[f]=_9(c,r):e[f]=c}),e}function R9(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var vo={isArray:ex,isArrayBuffer:w9,isBuffer:b9,isFormData:E9,isArrayBufferView:S9,isString:C9,isNumber:T9,isObject:Q4,isPlainObject:bp,isUndefined:dy,isDate:A9,isFile:I9,isBlob:P9,isFunction:e6,isStream:k9,isURLSearchParams:M9,isStandardBrowserEnv:L9,forEach:tx,merge:py,extend:O9,trim:z9,stripBOM:R9},lc=vo;function iw(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var t6=function(t,r,l){if(!r)return t;var c;if(l)c=l(r);else if(lc.isURLSearchParams(r))c=r.toString();else{var f=[];lc.forEach(r,function(_,E){_===null||typeof _=="undefined"||(lc.isArray(_)?E=E+"[]":_=[_],lc.forEach(_,function(S){lc.isDate(S)?S=S.toISOString():lc.isObject(S)&&(S=JSON.stringify(S)),f.push(iw(E)+"="+iw(S))}))}),c=f.join("&")}if(c){var g=t.indexOf("#");g!==-1&&(t=t.slice(0,g)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},F9=vo;function Jm(){this.handlers=[]}Jm.prototype.use=function(t,r,l){return this.handlers.push({fulfilled:t,rejected:r,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1};Jm.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Jm.prototype.forEach=function(t){F9.forEach(this.handlers,function(l){l!==null&&t(l)})};var B9=Jm,j9=vo,D9=function(t,r){j9.forEach(t,function(c,f){f!==r&&f.toUpperCase()===r.toUpperCase()&&(t[r]=c,delete t[f])})},n6=function(t,r,l,c,f){return t.config=r,l&&(t.code=l),t.request=c,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},N9=n6,r6=function(t,r,l,c,f){var g=new Error(t);return N9(g,r,l,c,f)},U9=r6,V9=function(t,r,l){var c=l.config.validateStatus;!l.status||!c||c(l.status)?t(l):r(U9("Request failed with status code "+l.status,l.config,null,l.request,l))},tp=vo,$9=tp.isStandardBrowserEnv()?function(){return{write:function(r,l,c,f,g,s){var _=[];_.push(r+"="+encodeURIComponent(l)),tp.isNumber(c)&&_.push("expires="+new Date(c).toGMTString()),tp.isString(f)&&_.push("path="+f),tp.isString(g)&&_.push("domain="+g),s===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(r){var l=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),G9=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},H9=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},W9=G9,Z9=H9,X9=function(t,r){return t&&!W9(r)?Z9(t,r):r},Pg=vo,Y9=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],K9=function(t){var r={},l,c,f;return t&&Pg.forEach(t.split(`
`),function(s){if(f=s.indexOf(":"),l=Pg.trim(s.substr(0,f)).toLowerCase(),c=Pg.trim(s.substr(f+1)),l){if(r[l]&&Y9.indexOf(l)>=0)return;l==="set-cookie"?r[l]=(r[l]?r[l]:[]).concat([c]):r[l]=r[l]?r[l]+", "+c:c}}),r},ow=vo,q9=ow.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),l;function c(f){var g=f;return t&&(r.setAttribute("href",g),g=r.href),r.setAttribute("href",g),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return l=c(window.location.href),function(g){var s=ow.isString(g)?c(g):g;return s.protocol===l.protocol&&s.host===l.host}}():function(){return function(){return!0}}(),np=vo,J9=V9,Q9=$9,eP=t6,tP=X9,nP=K9,rP=q9,kg=r6,aw=function(t){return new Promise(function(l,c){var f=t.data,g=t.headers,s=t.responseType;np.isFormData(f)&&delete g["Content-Type"];var _=new XMLHttpRequest;if(t.auth){var E=t.auth.username||"",C=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(E+":"+C)}var S=tP(t.baseURL,t.url);_.open(t.method.toUpperCase(),eP(S,t.params,t.paramsSerializer),!0),_.timeout=t.timeout;function I(){if(!!_){var J="getAllResponseHeaders"in _?nP(_.getAllResponseHeaders()):null,X=!s||s==="text"||s==="json"?_.responseText:_.response,G={data:X,status:_.status,statusText:_.statusText,headers:J,config:t,request:_};J9(l,c,G),_=null}}if("onloadend"in _?_.onloadend=I:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(I)},_.onabort=function(){!_||(c(kg("Request aborted",t,"ECONNABORTED",_)),_=null)},_.onerror=function(){c(kg("Network Error",t,null,_)),_=null},_.ontimeout=function(){var X="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(X=t.timeoutErrorMessage),c(kg(X,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},np.isStandardBrowserEnv()){var D=(t.withCredentials||rP(S))&&t.xsrfCookieName?Q9.read(t.xsrfCookieName):void 0;D&&(g[t.xsrfHeaderName]=D)}"setRequestHeader"in _&&np.forEach(g,function(X,G){typeof f=="undefined"&&G.toLowerCase()==="content-type"?delete g[G]:_.setRequestHeader(G,X)}),np.isUndefined(t.withCredentials)||(_.withCredentials=!!t.withCredentials),s&&s!=="json"&&(_.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&_.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(X){!_||(_.abort(),c(X),_=null)}),f||(f=null),_.send(f)})},fi=vo,sw=D9,iP=n6,oP={"Content-Type":"application/x-www-form-urlencoded"};function lw(e,t){!fi.isUndefined(e)&&fi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function aP(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=aw),e}function sP(e,t,r){if(fi.isString(e))try{return(t||JSON.parse)(e),fi.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(r||JSON.stringify)(e)}var Qm={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:aP(),transformRequest:[function(t,r){return sw(r,"Accept"),sw(r,"Content-Type"),fi.isFormData(t)||fi.isArrayBuffer(t)||fi.isBuffer(t)||fi.isStream(t)||fi.isFile(t)||fi.isBlob(t)?t:fi.isArrayBufferView(t)?t.buffer:fi.isURLSearchParams(t)?(lw(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):fi.isObject(t)||r&&r["Content-Type"]==="application/json"?(lw(r,"application/json"),sP(t)):t}],transformResponse:[function(t){var r=this.transitional,l=r&&r.silentJSONParsing,c=r&&r.forcedJSONParsing,f=!l&&this.responseType==="json";if(f||c&&fi.isString(t)&&t.length)try{return JSON.parse(t)}catch(g){if(f)throw g.name==="SyntaxError"?iP(g,this,"E_JSON_PARSE"):g}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Qm.headers={common:{Accept:"application/json, text/plain, */*"}};fi.forEach(["delete","get","head"],function(t){Qm.headers[t]={}});fi.forEach(["post","put","patch"],function(t){Qm.headers[t]=fi.merge(oP)});var nx=Qm,lP=vo,uP=nx,cP=function(t,r,l){var c=this||uP;return lP.forEach(l,function(g){t=g.call(c,t,r)}),t},i6=function(t){return!!(t&&t.__CANCEL__)},uw=vo,Mg=cP,hP=i6,fP=nx;function zg(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var dP=function(t){zg(t),t.headers=t.headers||{},t.data=Mg.call(t,t.data,t.headers,t.transformRequest),t.headers=uw.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),uw.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var r=t.adapter||fP.adapter;return r(t).then(function(c){return zg(t),c.data=Mg.call(t,c.data,c.headers,t.transformResponse),c},function(c){return hP(c)||(zg(t),c&&c.response&&(c.response.data=Mg.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Ei=vo,o6=function(t,r){r=r||{};var l={},c=["url","method","data"],f=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function _(I,D){return Ei.isPlainObject(I)&&Ei.isPlainObject(D)?Ei.merge(I,D):Ei.isPlainObject(D)?Ei.merge({},D):Ei.isArray(D)?D.slice():D}function E(I){Ei.isUndefined(r[I])?Ei.isUndefined(t[I])||(l[I]=_(void 0,t[I])):l[I]=_(t[I],r[I])}Ei.forEach(c,function(D){Ei.isUndefined(r[D])||(l[D]=_(void 0,r[D]))}),Ei.forEach(f,E),Ei.forEach(g,function(D){Ei.isUndefined(r[D])?Ei.isUndefined(t[D])||(l[D]=_(void 0,t[D])):l[D]=_(void 0,r[D])}),Ei.forEach(s,function(D){D in r?l[D]=_(t[D],r[D]):D in t&&(l[D]=_(void 0,t[D]))});var C=c.concat(f).concat(g).concat(s),S=Object.keys(t).concat(Object.keys(r)).filter(function(D){return C.indexOf(D)===-1});return Ei.forEach(S,E),l};const pP="axios",mP="0.21.4",gP="Promise based HTTP client for the browser and node.js",yP="index.js",vP={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},xP={type:"git",url:"https://github.com/axios/axios.git"},_P=["xhr","http","ajax","promise","node"],bP="Matt Zabriskie",wP="MIT",EP={url:"https://github.com/axios/axios/issues"},SP="https://axios-http.com",CP={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},TP={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},AP="dist/axios.min.js",IP="dist/axios.min.js",PP="./index.d.ts",kP={"follow-redirects":"^1.14.0"},MP=[{path:"./dist/axios.min.js",threshold:"5kB"}];var zP={name:pP,version:mP,description:gP,main:yP,scripts:vP,repository:xP,keywords:_P,author:bP,license:wP,bugs:EP,homepage:SP,devDependencies:CP,browser:TP,jsdelivr:AP,unpkg:IP,typings:PP,dependencies:kP,bundlesize:MP},a6=zP,rx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){rx[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});var cw={},LP=a6.version.split(".");function s6(e,t){for(var r=t?t.split("."):LP,l=e.split("."),c=0;c<3;c++){if(r[c]>l[c])return!0;if(r[c]<l[c])return!1}return!1}rx.transitional=function(t,r,l){var c=r&&s6(r);function f(g,s){return"[Axios v"+a6.version+"] Transitional option '"+g+"'"+s+(l?". "+l:"")}return function(g,s,_){if(t===!1)throw new Error(f(s," has been removed in "+r));return c&&!cw[s]&&(cw[s]=!0,console.warn(f(s," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(g,s,_):!0}};function OP(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var l=Object.keys(e),c=l.length;c-- >0;){var f=l[c],g=t[f];if(g){var s=e[f],_=s===void 0||g(s,f,e);if(_!==!0)throw new TypeError("option "+f+" must be "+_);continue}if(r!==!0)throw Error("Unknown option "+f)}}var RP={isOlderVersion:s6,assertOptions:OP,validators:rx},l6=vo,FP=t6,hw=B9,fw=dP,e0=o6,u6=RP,uc=u6.validators;function rd(e){this.defaults=e,this.interceptors={request:new hw,response:new hw}}rd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=e0(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&u6.assertOptions(r,{silentJSONParsing:uc.transitional(uc.boolean,"1.0.0"),forcedJSONParsing:uc.transitional(uc.boolean,"1.0.0"),clarifyTimeoutError:uc.transitional(uc.boolean,"1.0.0")},!1);var l=[],c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(t)===!1||(c=c&&I.synchronous,l.unshift(I.fulfilled,I.rejected))});var f=[];this.interceptors.response.forEach(function(I){f.push(I.fulfilled,I.rejected)});var g;if(!c){var s=[fw,void 0];for(Array.prototype.unshift.apply(s,l),s=s.concat(f),g=Promise.resolve(t);s.length;)g=g.then(s.shift(),s.shift());return g}for(var _=t;l.length;){var E=l.shift(),C=l.shift();try{_=E(_)}catch(S){C(S);break}}try{g=fw(_)}catch(S){return Promise.reject(S)}for(;f.length;)g=g.then(f.shift(),f.shift());return g};rd.prototype.getUri=function(t){return t=e0(this.defaults,t),FP(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};l6.forEach(["delete","get","head","options"],function(t){rd.prototype[t]=function(r,l){return this.request(e0(l||{},{method:t,url:r,data:(l||{}).data}))}});l6.forEach(["post","put","patch"],function(t){rd.prototype[t]=function(r,l,c){return this.request(e0(c||{},{method:t,url:r,data:l}))}});var BP=rd;function ix(e){this.message=e}ix.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};ix.prototype.__CANCEL__=!0;var c6=ix,jP=c6;function Cm(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(c){t=c});var r=this;e(function(c){r.reason||(r.reason=new jP(c),t(r.reason))})}Cm.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Cm.source=function(){var t,r=new Cm(function(c){t=c});return{token:r,cancel:t}};var DP=Cm,NP=function(t){return function(l){return t.apply(null,l)}},UP=function(t){return typeof t=="object"&&t.isAxiosError===!0},dw=vo,VP=J4,wp=BP,$P=o6,GP=nx;function h6(e){var t=new wp(e),r=VP(wp.prototype.request,t);return dw.extend(r,wp.prototype,t),dw.extend(r,t),r}var fa=h6(GP);fa.Axios=wp;fa.create=function(t){return h6($P(fa.defaults,t))};fa.Cancel=c6;fa.CancelToken=DP;fa.isCancel=i6;fa.all=function(t){return Promise.all(t)};fa.spread=NP;fa.isAxiosError=UP;Qv.exports=fa;Qv.exports.default=fa;var HP=Qv.exports,WP={},ZP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:WP}),XP=gy(ZP),t0={},YP=Fc;function Fc(e,t){this.x=e,this.y=t}Fc.prototype={clone:function(){return new Fc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),l=t*this.x-r*this.y,c=r*this.x+t*this.y;return this.x=l,this.y=c,this},_rotateAround:function(e,t){var r=Math.cos(e),l=Math.sin(e),c=t.x+r*(this.x-t.x)-l*(this.y-t.y),f=t.y+l*(this.x-t.x)+r*(this.y-t.y);return this.x=c,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Fc.convert=function(e){return e instanceof Fc?e:Array.isArray(e)?new Fc(e[0],e[1]):e};var KP=YP,f6=Hc;function Hc(e,t,r,l,c){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=c,e.readFields(qP,this,t)}function qP(e,t,r){e==1?t.id=r.readVarint():e==2?JP(r,t):e==3?t.type=r.readVarint():e==4&&(t._geometry=r.pos)}function JP(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var l=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[l]=c}}Hc.types=["Unknown","Point","LineString","Polygon"];Hc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,l=0,c=0,f=0,g=[],s;e.pos<t;){if(l<=0){var _=e.readVarint();r=_&7,l=_>>3}if(l--,r===1||r===2)c+=e.readSVarint(),f+=e.readSVarint(),r===1&&(s&&g.push(s),s=[]),s.push(new KP(c,f));else if(r===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+r)}return s&&g.push(s),g};Hc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,l=0,c=0,f=0,g=1/0,s=-1/0,_=1/0,E=-1/0;e.pos<t;){if(l<=0){var C=e.readVarint();r=C&7,l=C>>3}if(l--,r===1||r===2)c+=e.readSVarint(),f+=e.readSVarint(),c<g&&(g=c),c>s&&(s=c),f<_&&(_=f),f>E&&(E=f);else if(r!==7)throw new Error("unknown command "+r)}return[g,_,s,E]};Hc.prototype.toGeoJSON=function(e,t,r){var l=this.extent*Math.pow(2,r),c=this.extent*e,f=this.extent*t,g=this.loadGeometry(),s=Hc.types[this.type],_,E;function C(D){for(var J=0;J<D.length;J++){var X=D[J],G=180-(X.y+f)*360/l;D[J]=[(X.x+c)*360/l-180,360/Math.PI*Math.atan(Math.exp(G*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(_=0;_<g.length;_++)S[_]=g[_][0];g=S,C(g);break;case 2:for(_=0;_<g.length;_++)C(g[_]);break;case 3:for(g=QP(g),_=0;_<g.length;_++)for(E=0;E<g[_].length;E++)C(g[_][E]);break}g.length===1?g=g[0]:s="Multi"+s;var I={type:"Feature",geometry:{type:s,coordinates:g},properties:this.properties};return"id"in this&&(I.id=this.id),I};function QP(e){var t=e.length;if(t<=1)return[e];for(var r=[],l,c,f=0;f<t;f++){var g=ek(e[f]);g!==0&&(c===void 0&&(c=g<0),c===g<0?(l&&r.push(l),l=[e[f]]):l.push(e[f]))}return l&&r.push(l),r}function ek(e){for(var t=0,r=0,l=e.length,c=l-1,f,g;r<l;c=r++)f=e[r],g=e[c],t+=(g.x-f.x)*(f.y+g.y);return t}var tk=f6,d6=p6;function p6(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(nk,this,t),this.length=this._features.length}function nk(e,t,r){e===15?t.version=r.readVarint():e===1?t.name=r.readString():e===5?t.extent=r.readVarint():e===2?t._features.push(r.pos):e===3?t._keys.push(r.readString()):e===4&&t._values.push(rk(r))}function rk(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var l=e.readVarint()>>3;t=l===1?e.readString():l===2?e.readFloat():l===3?e.readDouble():l===4?e.readVarint64():l===5?e.readVarint():l===6?e.readSVarint():l===7?e.readBoolean():null}return t}p6.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new tk(this._pbf,t,this.extent,this._keys,this._values)};var ik=d6,ok=ak;function ak(e,t){this.layers=e.readFields(sk,{},t)}function sk(e,t,r){if(e===3){var l=new ik(r,r.readVarint()+r.pos);l.length&&(t[l.name]=l)}}t0.VectorTile=ok;t0.VectorTileFeature=f6;t0.VectorTileLayer=d6;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=DI,r=t9,l=n9,c=HP,f=XP,g=t0;function s(H){return H&&typeof H=="object"&&"default"in H?H:{default:H}}var _=s(l),E=s(c),C=s(f),S=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Xs!="undefined"?Xs:typeof self!="undefined"?self:{};function I(H){var $={exports:{}};return H($,$.exports),$.exports}var D=I(function(H,$){(function(W,F){H.exports=F(E.default)})(S,function(ne){return function(W){var F={};function w(k){if(F[k])return F[k].exports;var B=F[k]={i:k,l:!1,exports:{}};return W[k].call(B.exports,B,B.exports,w),B.l=!0,B.exports}return w.m=W,w.c=F,w.d=function(k,B,q){w.o(k,B)||Object.defineProperty(k,B,{enumerable:!0,get:q})},w.r=function(k){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},w.t=function(k,B){if(B&1&&(k=w(k)),B&8||B&4&&typeof k=="object"&&k&&k.__esModule)return k;var q=Object.create(null);if(w.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:k}),B&2&&typeof k!="string")for(var K in k)w.d(q,K,function(fe){return k[fe]}.bind(null,K));return q},w.n=function(k){var B=k&&k.__esModule?function(){return k.default}:function(){return k};return w.d(B,"a",B),B},w.o=function(k,B){return Object.prototype.hasOwnProperty.call(k,B)},w.p="",w(w.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(W,F,w){w.r(F),w.d(F,"CacheControl",function(){return ce}),w.d(F,"parse",function(){return ke}),w.d(F,"format",function(){return Te}),w("./node_modules/core-js/modules/es6.array.from.js"),w("./node_modules/core-js/modules/es6.function.name.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/core-js/modules/web.dom.iterable.js"),w("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.regexp.split.js"),w("./node_modules/core-js/modules/es6.number.is-finite.js");function k(Pe,De){return ge(Pe)||fe(Pe,De)||q(Pe,De)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(Pe,De){if(!!Pe){if(typeof Pe=="string")return K(Pe,De);var Ue=Object.prototype.toString.call(Pe).slice(8,-1);if(Ue==="Object"&&Pe.constructor&&(Ue=Pe.constructor.name),Ue==="Map"||Ue==="Set")return Array.from(Pe);if(Ue==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ue))return K(Pe,De)}}function K(Pe,De){(De==null||De>Pe.length)&&(De=Pe.length);for(var Ue=0,qe=new Array(De);Ue<De;Ue++)qe[Ue]=Pe[Ue];return qe}function fe(Pe,De){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(Pe)))){var Ue=[],qe=!0,ot=!1,dt=void 0;try{for(var Pt=Pe[Symbol.iterator](),ht;!(qe=(ht=Pt.next()).done)&&(Ue.push(ht.value),!(De&&Ue.length===De));qe=!0);}catch(Et){ot=!0,dt=Et}finally{try{!qe&&Pt.return!=null&&Pt.return()}finally{if(ot)throw dt}}return Ue}}function ge(Pe){if(Array.isArray(Pe))return Pe}function xe(Pe,De){if(!(Pe instanceof De))throw new TypeError("Cannot call a class as a function")}function ee(Pe,De){for(var Ue=0;Ue<De.length;Ue++){var qe=De[Ue];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(Pe,qe.key,qe)}}function re(Pe,De,Ue){return De&&ee(Pe.prototype,De),Ue&&ee(Pe,Ue),Pe}var ie=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,le={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function _e(Pe){return Pe===null}function Ie(Pe){if(!Pe)return null;var De=parseInt(Pe,10);return!Number.isFinite(De)||De<0?null:De}var ce=function(){function Pe(){xe(this,Pe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return re(Pe,[{key:"parse",value:function(Ue){if(!Ue||Ue.length===0)return this;var qe={},ot=Ue.match(ie)||[];return Array.prototype.forEach.call(ot,function(dt){var Pt=dt.split("=",2),ht=k(Pt,1),Et=ht[0],Nt=null;Pt.length>1&&(Nt=Pt[1].trim()),qe[Et.toLowerCase()]=Nt}),this.maxAge=Ie(qe[le.maxAge]),this.sharedMaxAge=Ie(qe[le.sharedMaxAge]),this.maxStale=_e(qe[le.maxStale]),this.maxStaleDuration=Ie(qe[le.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Ie(qe[le.minFresh]),this.immutable=_e(qe[le.immutable]),this.mustRevalidate=_e(qe[le.mustRevalidate]),this.noCache=_e(qe[le.noCache]),this.noStore=_e(qe[le.noStore]),this.noTransform=_e(qe[le.noTransform]),this.onlyIfCached=_e(qe[le.onlyIfCached]),this.private=_e(qe[le.private]),this.proxyRevalidate=_e(qe[le.proxyRevalidate]),this.public=_e(qe[le.public]),this}},{key:"format",value:function(){var Ue=[];return this.maxAge&&Ue.push("".concat(le.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ue.push("".concat(le.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ue.push("".concat(le.maxStale,"=").concat(this.maxStaleDuration)):Ue.push(le.maxStale)),this.minFresh&&Ue.push("".concat(le.minFresh,"=").concat(this.minFresh)),this.immutable&&Ue.push(le.immutable),this.mustRevalidate&&Ue.push(le.mustRevalidate),this.noCache&&Ue.push(le.noCache),this.noStore&&Ue.push(le.noStore),this.noTransform&&Ue.push(le.noTransform),this.onlyIfCached&&Ue.push(le.onlyIfCached),this.private&&Ue.push(le.private),this.proxyRevalidate&&Ue.push(le.proxyRevalidate),this.public&&Ue.push(le.public),Ue.join(", ")}}]),Pe}();function ke(Pe){var De=new ce;return De.parse(Pe)}function Te(Pe){return Pe instanceof ce?Pe.format():ce.prototype.format.call(Pe)}F.default={CacheControl:ce,parse:ke,format:Te}},"./node_modules/charenc/charenc.js":function(W,F){var w={utf8:{stringToBytes:function(k){return w.bin.stringToBytes(unescape(encodeURIComponent(k)))},bytesToString:function(k){return decodeURIComponent(escape(w.bin.bytesToString(k)))}},bin:{stringToBytes:function(k){for(var B=[],q=0;q<k.length;q++)B.push(k.charCodeAt(q)&255);return B},bytesToString:function(k){for(var B=[],q=0;q<k.length;q++)B.push(String.fromCharCode(k[q]));return B.join("")}}};W.exports=w},"./node_modules/core-js/modules/_a-function.js":function(W,F){W.exports=function(w){if(typeof w!="function")throw TypeError(w+" is not a function!");return w}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[k]==null&&w("./node_modules/core-js/modules/_hide.js")(B,k,{}),W.exports=function(q){B[k][q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_string-at.js")(!0);W.exports=function(B,q,K){return q+(K?k(B,q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_is-object.js");W.exports=function(B){if(!k(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_to-iobject.js"),B=w("./node_modules/core-js/modules/_to-length.js"),q=w("./node_modules/core-js/modules/_to-absolute-index.js");W.exports=function(K){return function(fe,ge,xe){var ee=k(fe),re=B(ee.length),ie=q(xe,re),le;if(K&&ge!=ge){for(;re>ie;)if(le=ee[ie++],le!=le)return!0}else for(;re>ie;ie++)if((K||ie in ee)&&ee[ie]===ge)return K||ie||0;return!K&&-1}}},"./node_modules/core-js/modules/_bind.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_a-function.js"),B=w("./node_modules/core-js/modules/_is-object.js"),q=w("./node_modules/core-js/modules/_invoke.js"),K=[].slice,fe={},ge=function(xe,ee,re){if(!(ee in fe)){for(var ie=[],le=0;le<ee;le++)ie[le]="a["+le+"]";fe[ee]=Function("F,a","return new F("+ie.join(",")+")")}return fe[ee](xe,re)};W.exports=Function.bind||function(ee){var re=k(this),ie=K.call(arguments,1),le=function(){var _e=ie.concat(K.call(arguments));return this instanceof le?ge(re,_e.length,_e):q(re,_e,ee)};return B(re.prototype)&&(le.prototype=re.prototype),le}},"./node_modules/core-js/modules/_classof.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_cof.js"),B=w("./node_modules/core-js/modules/_wks.js")("toStringTag"),q=k(function(){return arguments}())=="Arguments",K=function(fe,ge){try{return fe[ge]}catch{}};W.exports=function(fe){var ge,xe,ee;return fe===void 0?"Undefined":fe===null?"Null":typeof(xe=K(ge=Object(fe),B))=="string"?xe:q?k(ge):(ee=k(ge))=="Object"&&typeof ge.callee=="function"?"Arguments":ee}},"./node_modules/core-js/modules/_cof.js":function(W,F){var w={}.toString;W.exports=function(k){return w.call(k).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(W,F){var w=W.exports={version:"2.6.12"};typeof __e=="number"&&(__e=w)},"./node_modules/core-js/modules/_create-property.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-dp.js"),B=w("./node_modules/core-js/modules/_property-desc.js");W.exports=function(q,K,fe){K in q?k.f(q,K,B(0,fe)):q[K]=fe}},"./node_modules/core-js/modules/_ctx.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_a-function.js");W.exports=function(B,q,K){if(k(B),q===void 0)return B;switch(K){case 1:return function(fe){return B.call(q,fe)};case 2:return function(fe,ge){return B.call(q,fe,ge)};case 3:return function(fe,ge,xe){return B.call(q,fe,ge,xe)}}return function(){return B.apply(q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(W,F){W.exports=function(w){if(w==null)throw TypeError("Can't call method on  "+w);return w}},"./node_modules/core-js/modules/_descriptors.js":function(W,F,w){W.exports=!w("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_is-object.js"),B=w("./node_modules/core-js/modules/_global.js").document,q=k(B)&&k(B.createElement);W.exports=function(K){return q?B.createElement(K):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(W,F){W.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-keys.js"),B=w("./node_modules/core-js/modules/_object-gops.js"),q=w("./node_modules/core-js/modules/_object-pie.js");W.exports=function(K){var fe=k(K),ge=B.f;if(ge)for(var xe=ge(K),ee=q.f,re=0,ie;xe.length>re;)ee.call(K,ie=xe[re++])&&fe.push(ie);return fe}},"./node_modules/core-js/modules/_export.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_global.js"),B=w("./node_modules/core-js/modules/_core.js"),q=w("./node_modules/core-js/modules/_hide.js"),K=w("./node_modules/core-js/modules/_redefine.js"),fe=w("./node_modules/core-js/modules/_ctx.js"),ge="prototype",xe=function(ee,re,ie){var le=ee&xe.F,_e=ee&xe.G,Ie=ee&xe.S,ce=ee&xe.P,ke=ee&xe.B,Te=_e?k:Ie?k[re]||(k[re]={}):(k[re]||{})[ge],Pe=_e?B:B[re]||(B[re]={}),De=Pe[ge]||(Pe[ge]={}),Ue,qe,ot,dt;_e&&(ie=re);for(Ue in ie)qe=!le&&Te&&Te[Ue]!==void 0,ot=(qe?Te:ie)[Ue],dt=ke&&qe?fe(ot,k):ce&&typeof ot=="function"?fe(Function.call,ot):ot,Te&&K(Te,Ue,ot,ee&xe.U),Pe[Ue]!=ot&&q(Pe,Ue,dt),ce&&De[Ue]!=ot&&(De[Ue]=ot)};k.core=B,xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128,W.exports=xe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(B){var q=/./;try{"/./"[B](q)}catch{try{return q[k]=!1,!"/./"[B](q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(W,F){W.exports=function(w){try{return!!w()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(W,F,w){w("./node_modules/core-js/modules/es6.regexp.exec.js");var k=w("./node_modules/core-js/modules/_redefine.js"),B=w("./node_modules/core-js/modules/_hide.js"),q=w("./node_modules/core-js/modules/_fails.js"),K=w("./node_modules/core-js/modules/_defined.js"),fe=w("./node_modules/core-js/modules/_wks.js"),ge=w("./node_modules/core-js/modules/_regexp-exec.js"),xe=fe("species"),ee=!q(function(){var ie=/./;return ie.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace(ie,"$<a>")!=="7"}),re=function(){var ie=/(?:)/,le=ie.exec;ie.exec=function(){return le.apply(this,arguments)};var _e="ab".split(ie);return _e.length===2&&_e[0]==="a"&&_e[1]==="b"}();W.exports=function(ie,le,_e){var Ie=fe(ie),ce=!q(function(){var qe={};return qe[Ie]=function(){return 7},""[ie](qe)!=7}),ke=ce?!q(function(){var qe=!1,ot=/a/;return ot.exec=function(){return qe=!0,null},ie==="split"&&(ot.constructor={},ot.constructor[xe]=function(){return ot}),ot[Ie](""),!qe}):void 0;if(!ce||!ke||ie==="replace"&&!ee||ie==="split"&&!re){var Te=/./[Ie],Pe=_e(K,Ie,""[ie],function(ot,dt,Pt,ht,Et){return dt.exec===ge?ce&&!Et?{done:!0,value:Te.call(dt,Pt,ht)}:{done:!0,value:ot.call(Pt,dt,ht)}:{done:!1}}),De=Pe[0],Ue=Pe[1];k(String.prototype,ie,De),B(RegExp.prototype,Ie,le==2?function(qe,ot){return Ue.call(qe,this,ot)}:function(qe){return Ue.call(qe,this)})}}},"./node_modules/core-js/modules/_flags.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_an-object.js");W.exports=function(){var B=k(this),q="";return B.global&&(q+="g"),B.ignoreCase&&(q+="i"),B.multiline&&(q+="m"),B.unicode&&(q+="u"),B.sticky&&(q+="y"),q}},"./node_modules/core-js/modules/_function-to-string.js":function(W,F,w){W.exports=w("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(W,F){var w=W.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=w)},"./node_modules/core-js/modules/_has.js":function(W,F){var w={}.hasOwnProperty;W.exports=function(k,B){return w.call(k,B)}},"./node_modules/core-js/modules/_hide.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-dp.js"),B=w("./node_modules/core-js/modules/_property-desc.js");W.exports=w("./node_modules/core-js/modules/_descriptors.js")?function(q,K,fe){return k.f(q,K,B(1,fe))}:function(q,K,fe){return q[K]=fe,q}},"./node_modules/core-js/modules/_html.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_global.js").document;W.exports=k&&k.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(W,F,w){W.exports=!w("./node_modules/core-js/modules/_descriptors.js")&&!w("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(w("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(W,F){W.exports=function(w,k,B){var q=B===void 0;switch(k.length){case 0:return q?w():w.call(B);case 1:return q?w(k[0]):w.call(B,k[0]);case 2:return q?w(k[0],k[1]):w.call(B,k[0],k[1]);case 3:return q?w(k[0],k[1],k[2]):w.call(B,k[0],k[1],k[2]);case 4:return q?w(k[0],k[1],k[2],k[3]):w.call(B,k[0],k[1],k[2],k[3])}return w.apply(B,k)}},"./node_modules/core-js/modules/_iobject.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_cof.js");W.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return k(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_iterators.js"),B=w("./node_modules/core-js/modules/_wks.js")("iterator"),q=Array.prototype;W.exports=function(K){return K!==void 0&&(k.Array===K||q[B]===K)}},"./node_modules/core-js/modules/_is-array.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_cof.js");W.exports=Array.isArray||function(q){return k(q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(W,F){W.exports=function(w){return typeof w=="object"?w!==null:typeof w=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_is-object.js"),B=w("./node_modules/core-js/modules/_cof.js"),q=w("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(K){var fe;return k(K)&&((fe=K[q])!==void 0?!!fe:B(K)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_an-object.js");W.exports=function(B,q,K,fe){try{return fe?q(k(K)[0],K[1]):q(K)}catch(xe){var ge=B.return;throw ge!==void 0&&k(ge.call(B)),xe}}},"./node_modules/core-js/modules/_iter-create.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-create.js"),B=w("./node_modules/core-js/modules/_property-desc.js"),q=w("./node_modules/core-js/modules/_set-to-string-tag.js"),K={};w("./node_modules/core-js/modules/_hide.js")(K,w("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),W.exports=function(fe,ge,xe){fe.prototype=k(K,{next:B(1,xe)}),q(fe,ge+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_library.js"),B=w("./node_modules/core-js/modules/_export.js"),q=w("./node_modules/core-js/modules/_redefine.js"),K=w("./node_modules/core-js/modules/_hide.js"),fe=w("./node_modules/core-js/modules/_iterators.js"),ge=w("./node_modules/core-js/modules/_iter-create.js"),xe=w("./node_modules/core-js/modules/_set-to-string-tag.js"),ee=w("./node_modules/core-js/modules/_object-gpo.js"),re=w("./node_modules/core-js/modules/_wks.js")("iterator"),ie=!([].keys&&"next"in[].keys()),le="@@iterator",_e="keys",Ie="values",ce=function(){return this};W.exports=function(ke,Te,Pe,De,Ue,qe,ot){ge(Pe,Te,De);var dt=function(R){if(!ie&&R in Nt)return Nt[R];switch(R){case _e:return function(){return new Pe(this,R)};case Ie:return function(){return new Pe(this,R)}}return function(){return new Pe(this,R)}},Pt=Te+" Iterator",ht=Ue==Ie,Et=!1,Nt=ke.prototype,Bt=Nt[re]||Nt[le]||Ue&&Nt[Ue],cn=Bt||dt(Ue),An=Ue?ht?dt("entries"):cn:void 0,wn=Te=="Array"&&Nt.entries||Bt,on,En,we;if(wn&&(we=ee(wn.call(new ke)),we!==Object.prototype&&we.next&&(xe(we,Pt,!0),!k&&typeof we[re]!="function"&&K(we,re,ce))),ht&&Bt&&Bt.name!==Ie&&(Et=!0,cn=function(){return Bt.call(this)}),(!k||ot)&&(ie||Et||!Nt[re])&&K(Nt,re,cn),fe[Te]=cn,fe[Pt]=ce,Ue)if(on={values:ht?cn:dt(Ie),keys:qe?cn:dt(_e),entries:An},ot)for(En in on)En in Nt||q(Nt,En,on[En]);else B(B.P+B.F*(ie||Et),Te,on);return on}},"./node_modules/core-js/modules/_iter-detect.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var q=[7][k]();q.return=function(){B=!0},Array.from(q,function(){throw 2})}catch{}W.exports=function(K,fe){if(!fe&&!B)return!1;var ge=!1;try{var xe=[7],ee=xe[k]();ee.next=function(){return{done:ge=!0}},xe[k]=function(){return ee},K(xe)}catch{}return ge}},"./node_modules/core-js/modules/_iter-step.js":function(W,F){W.exports=function(w,k){return{value:k,done:!!w}}},"./node_modules/core-js/modules/_iterators.js":function(W,F){W.exports={}},"./node_modules/core-js/modules/_library.js":function(W,F){W.exports=!1},"./node_modules/core-js/modules/_meta.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_uid.js")("meta"),B=w("./node_modules/core-js/modules/_is-object.js"),q=w("./node_modules/core-js/modules/_has.js"),K=w("./node_modules/core-js/modules/_object-dp.js").f,fe=0,ge=Object.isExtensible||function(){return!0},xe=!w("./node_modules/core-js/modules/_fails.js")(function(){return ge(Object.preventExtensions({}))}),ee=function(Ie){K(Ie,k,{value:{i:"O"+ ++fe,w:{}}})},re=function(Ie,ce){if(!B(Ie))return typeof Ie=="symbol"?Ie:(typeof Ie=="string"?"S":"P")+Ie;if(!q(Ie,k)){if(!ge(Ie))return"F";if(!ce)return"E";ee(Ie)}return Ie[k].i},ie=function(Ie,ce){if(!q(Ie,k)){if(!ge(Ie))return!0;if(!ce)return!1;ee(Ie)}return Ie[k].w},le=function(Ie){return xe&&_e.NEED&&ge(Ie)&&!q(Ie,k)&&ee(Ie),Ie},_e=W.exports={KEY:k,NEED:!1,fastKey:re,getWeak:ie,onFreeze:le}},"./node_modules/core-js/modules/_object-create.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_an-object.js"),B=w("./node_modules/core-js/modules/_object-dps.js"),q=w("./node_modules/core-js/modules/_enum-bug-keys.js"),K=w("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),fe=function(){},ge="prototype",xe=function(){var ee=w("./node_modules/core-js/modules/_dom-create.js")("iframe"),re=q.length,ie="<",le=">",_e;for(ee.style.display="none",w("./node_modules/core-js/modules/_html.js").appendChild(ee),ee.src="javascript:",_e=ee.contentWindow.document,_e.open(),_e.write(ie+"script"+le+"document.F=Object"+ie+"/script"+le),_e.close(),xe=_e.F;re--;)delete xe[ge][q[re]];return xe()};W.exports=Object.create||function(re,ie){var le;return re!==null?(fe[ge]=k(re),le=new fe,fe[ge]=null,le[K]=re):le=xe(),ie===void 0?le:B(le,ie)}},"./node_modules/core-js/modules/_object-dp.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_an-object.js"),B=w("./node_modules/core-js/modules/_ie8-dom-define.js"),q=w("./node_modules/core-js/modules/_to-primitive.js"),K=Object.defineProperty;F.f=w("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ge,xe,ee){if(k(ge),xe=q(xe,!0),k(ee),B)try{return K(ge,xe,ee)}catch{}if("get"in ee||"set"in ee)throw TypeError("Accessors not supported!");return"value"in ee&&(ge[xe]=ee.value),ge}},"./node_modules/core-js/modules/_object-dps.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-dp.js"),B=w("./node_modules/core-js/modules/_an-object.js"),q=w("./node_modules/core-js/modules/_object-keys.js");W.exports=w("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(fe,ge){B(fe);for(var xe=q(ge),ee=xe.length,re=0,ie;ee>re;)k.f(fe,ie=xe[re++],ge[ie]);return fe}},"./node_modules/core-js/modules/_object-gopd.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-pie.js"),B=w("./node_modules/core-js/modules/_property-desc.js"),q=w("./node_modules/core-js/modules/_to-iobject.js"),K=w("./node_modules/core-js/modules/_to-primitive.js"),fe=w("./node_modules/core-js/modules/_has.js"),ge=w("./node_modules/core-js/modules/_ie8-dom-define.js"),xe=Object.getOwnPropertyDescriptor;F.f=w("./node_modules/core-js/modules/_descriptors.js")?xe:function(re,ie){if(re=q(re),ie=K(ie,!0),ge)try{return xe(re,ie)}catch{}if(fe(re,ie))return B(!k.f.call(re,ie),re[ie])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_to-iobject.js"),B=w("./node_modules/core-js/modules/_object-gopn.js").f,q={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],fe=function(ge){try{return B(ge)}catch{return K.slice()}};W.exports.f=function(xe){return K&&q.call(xe)=="[object Window]"?fe(xe):B(k(xe))}},"./node_modules/core-js/modules/_object-gopn.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-keys-internal.js"),B=w("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");F.f=Object.getOwnPropertyNames||function(K){return k(K,B)}},"./node_modules/core-js/modules/_object-gops.js":function(W,F){F.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_has.js"),B=w("./node_modules/core-js/modules/_to-object.js"),q=w("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),K=Object.prototype;W.exports=Object.getPrototypeOf||function(fe){return fe=B(fe),k(fe,q)?fe[q]:typeof fe.constructor=="function"&&fe instanceof fe.constructor?fe.constructor.prototype:fe instanceof Object?K:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_has.js"),B=w("./node_modules/core-js/modules/_to-iobject.js"),q=w("./node_modules/core-js/modules/_array-includes.js")(!1),K=w("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");W.exports=function(fe,ge){var xe=B(fe),ee=0,re=[],ie;for(ie in xe)ie!=K&&k(xe,ie)&&re.push(ie);for(;ge.length>ee;)k(xe,ie=ge[ee++])&&(~q(re,ie)||re.push(ie));return re}},"./node_modules/core-js/modules/_object-keys.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-keys-internal.js"),B=w("./node_modules/core-js/modules/_enum-bug-keys.js");W.exports=Object.keys||function(K){return k(K,B)}},"./node_modules/core-js/modules/_object-pie.js":function(W,F){F.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-gopn.js"),B=w("./node_modules/core-js/modules/_object-gops.js"),q=w("./node_modules/core-js/modules/_an-object.js"),K=w("./node_modules/core-js/modules/_global.js").Reflect;W.exports=K&&K.ownKeys||function(ge){var xe=k.f(q(ge)),ee=B.f;return ee?xe.concat(ee(ge)):xe}},"./node_modules/core-js/modules/_property-desc.js":function(W,F){W.exports=function(w,k){return{enumerable:!(w&1),configurable:!(w&2),writable:!(w&4),value:k}}},"./node_modules/core-js/modules/_redefine.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_global.js"),B=w("./node_modules/core-js/modules/_hide.js"),q=w("./node_modules/core-js/modules/_has.js"),K=w("./node_modules/core-js/modules/_uid.js")("src"),fe=w("./node_modules/core-js/modules/_function-to-string.js"),ge="toString",xe=(""+fe).split(ge);w("./node_modules/core-js/modules/_core.js").inspectSource=function(ee){return fe.call(ee)},(W.exports=function(ee,re,ie,le){var _e=typeof ie=="function";_e&&(q(ie,"name")||B(ie,"name",re)),ee[re]!==ie&&(_e&&(q(ie,K)||B(ie,K,ee[re]?""+ee[re]:xe.join(String(re)))),ee===k?ee[re]=ie:le?ee[re]?ee[re]=ie:B(ee,re,ie):(delete ee[re],B(ee,re,ie)))})(Function.prototype,ge,function(){return typeof this=="function"&&this[K]||fe.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;W.exports=function(q,K){var fe=q.exec;if(typeof fe=="function"){var ge=fe.call(q,K);if(typeof ge!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ge}if(k(q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(q,K)}},"./node_modules/core-js/modules/_regexp-exec.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,q=String.prototype.replace,K=B,fe="lastIndex",ge=function(){var re=/a/,ie=/b*/g;return B.call(re,"a"),B.call(ie,"a"),re[fe]!==0||ie[fe]!==0}(),xe=/()??/.exec("")[1]!==void 0,ee=ge||xe;ee&&(K=function(ie){var le=this,_e,Ie,ce,ke;return xe&&(Ie=new RegExp("^"+le.source+"$(?!\\s)",k.call(le))),ge&&(_e=le[fe]),ce=B.call(le,ie),ge&&ce&&(le[fe]=le.global?ce.index+ce[0].length:_e),xe&&ce&&ce.length>1&&q.call(ce[0],Ie,function(){for(ke=1;ke<arguments.length-2;ke++)arguments[ke]===void 0&&(ce[ke]=void 0)}),ce}),W.exports=K},"./node_modules/core-js/modules/_set-to-string-tag.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-dp.js").f,B=w("./node_modules/core-js/modules/_has.js"),q=w("./node_modules/core-js/modules/_wks.js")("toStringTag");W.exports=function(K,fe,ge){K&&!B(K=ge?K:K.prototype,q)&&k(K,q,{configurable:!0,value:fe})}},"./node_modules/core-js/modules/_shared-key.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_shared.js")("keys"),B=w("./node_modules/core-js/modules/_uid.js");W.exports=function(q){return k[q]||(k[q]=B(q))}},"./node_modules/core-js/modules/_shared.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_core.js"),B=w("./node_modules/core-js/modules/_global.js"),q="__core-js_shared__",K=B[q]||(B[q]={});(W.exports=function(fe,ge){return K[fe]||(K[fe]=ge!==void 0?ge:{})})("versions",[]).push({version:k.version,mode:w("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_an-object.js"),B=w("./node_modules/core-js/modules/_a-function.js"),q=w("./node_modules/core-js/modules/_wks.js")("species");W.exports=function(K,fe){var ge=k(K).constructor,xe;return ge===void 0||(xe=k(ge)[q])==null?fe:B(xe)}},"./node_modules/core-js/modules/_string-at.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_to-integer.js"),B=w("./node_modules/core-js/modules/_defined.js");W.exports=function(q){return function(K,fe){var ge=String(B(K)),xe=k(fe),ee=ge.length,re,ie;return xe<0||xe>=ee?q?"":void 0:(re=ge.charCodeAt(xe),re<55296||re>56319||xe+1===ee||(ie=ge.charCodeAt(xe+1))<56320||ie>57343?q?ge.charAt(xe):re:q?ge.slice(xe,xe+2):(re-55296<<10)+(ie-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_is-regexp.js"),B=w("./node_modules/core-js/modules/_defined.js");W.exports=function(q,K,fe){if(k(K))throw TypeError("String#"+fe+" doesn't accept regex!");return String(B(q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,q=Math.min;W.exports=function(K,fe){return K=k(K),K<0?B(K+fe,0):q(K,fe)}},"./node_modules/core-js/modules/_to-integer.js":function(W,F){var w=Math.ceil,k=Math.floor;W.exports=function(B){return isNaN(B=+B)?0:(B>0?k:w)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_iobject.js"),B=w("./node_modules/core-js/modules/_defined.js");W.exports=function(q){return k(B(q))}},"./node_modules/core-js/modules/_to-length.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;W.exports=function(q){return q>0?B(k(q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_defined.js");W.exports=function(B){return Object(k(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_is-object.js");W.exports=function(B,q){if(!k(B))return B;var K,fe;if(q&&typeof(K=B.toString)=="function"&&!k(fe=K.call(B))||typeof(K=B.valueOf)=="function"&&!k(fe=K.call(B))||!q&&typeof(K=B.toString)=="function"&&!k(fe=K.call(B)))return fe;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(W,F){var w=0,k=Math.random();W.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++w+k).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_global.js"),B=w("./node_modules/core-js/modules/_core.js"),q=w("./node_modules/core-js/modules/_library.js"),K=w("./node_modules/core-js/modules/_wks-ext.js"),fe=w("./node_modules/core-js/modules/_object-dp.js").f;W.exports=function(ge){var xe=B.Symbol||(B.Symbol=q?{}:k.Symbol||{});ge.charAt(0)!="_"&&!(ge in xe)&&fe(xe,ge,{value:K.f(ge)})}},"./node_modules/core-js/modules/_wks-ext.js":function(W,F,w){F.f=w("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_shared.js")("wks"),B=w("./node_modules/core-js/modules/_uid.js"),q=w("./node_modules/core-js/modules/_global.js").Symbol,K=typeof q=="function",fe=W.exports=function(ge){return k[ge]||(k[ge]=K&&q[ge]||(K?q:B)("Symbol."+ge))};fe.store=k},"./node_modules/core-js/modules/core.get-iterator-method.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_classof.js"),B=w("./node_modules/core-js/modules/_wks.js")("iterator"),q=w("./node_modules/core-js/modules/_iterators.js");W.exports=w("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(K){if(K!=null)return K[B]||K["@@iterator"]||q[k(K)]}},"./node_modules/core-js/modules/es6.array.from.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_ctx.js"),B=w("./node_modules/core-js/modules/_export.js"),q=w("./node_modules/core-js/modules/_to-object.js"),K=w("./node_modules/core-js/modules/_iter-call.js"),fe=w("./node_modules/core-js/modules/_is-array-iter.js"),ge=w("./node_modules/core-js/modules/_to-length.js"),xe=w("./node_modules/core-js/modules/_create-property.js"),ee=w("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!w("./node_modules/core-js/modules/_iter-detect.js")(function(re){Array.from(re)}),"Array",{from:function(ie){var le=q(ie),_e=typeof this=="function"?this:Array,Ie=arguments.length,ce=Ie>1?arguments[1]:void 0,ke=ce!==void 0,Te=0,Pe=ee(le),De,Ue,qe,ot;if(ke&&(ce=k(ce,Ie>2?arguments[2]:void 0,2)),Pe!=null&&!(_e==Array&&fe(Pe)))for(ot=Pe.call(le),Ue=new _e;!(qe=ot.next()).done;Te++)xe(Ue,Te,ke?K(ot,ce,[qe.value,Te],!0):qe.value);else for(De=ge(le.length),Ue=new _e(De);De>Te;Te++)xe(Ue,Te,ke?ce(le[Te],Te):le[Te]);return Ue.length=Te,Ue}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_add-to-unscopables.js"),B=w("./node_modules/core-js/modules/_iter-step.js"),q=w("./node_modules/core-js/modules/_iterators.js"),K=w("./node_modules/core-js/modules/_to-iobject.js");W.exports=w("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(fe,ge){this._t=K(fe),this._i=0,this._k=ge},function(){var fe=this._t,ge=this._k,xe=this._i++;return!fe||xe>=fe.length?(this._t=void 0,B(1)):ge=="keys"?B(0,xe):ge=="values"?B(0,fe[xe]):B(0,[xe,fe[xe]])},"values"),q.Arguments=q.Array,k("keys"),k("values"),k("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_export.js");k(k.P,"Function",{bind:w("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,q=/^\s*function ([^ (]*)/,K="name";K in B||w("./node_modules/core-js/modules/_descriptors.js")&&k(B,K,{configurable:!0,get:function(){try{return(""+this).match(q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_export.js"),B=w("./node_modules/core-js/modules/_global.js").isFinite;k(k.S,"Number",{isFinite:function(K){return typeof K=="number"&&B(K)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_classof.js"),B={};B[w("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&w("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+k(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_regexp-exec.js");w("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:k!==/./.exec},{exec:k})},"./node_modules/core-js/modules/es6.regexp.split.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_is-regexp.js"),B=w("./node_modules/core-js/modules/_an-object.js"),q=w("./node_modules/core-js/modules/_species-constructor.js"),K=w("./node_modules/core-js/modules/_advance-string-index.js"),fe=w("./node_modules/core-js/modules/_to-length.js"),ge=w("./node_modules/core-js/modules/_regexp-exec-abstract.js"),xe=w("./node_modules/core-js/modules/_regexp-exec.js"),ee=w("./node_modules/core-js/modules/_fails.js"),re=Math.min,ie=[].push,le="split",_e="length",Ie="lastIndex",ce=4294967295,ke=!ee(function(){});w("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Te,Pe,De,Ue){var qe;return"abbc"[le](/(b)*/)[1]=="c"||"test"[le](/(?:)/,-1)[_e]!=4||"ab"[le](/(?:ab)*/)[_e]!=2||"."[le](/(.?)(.?)/)[_e]!=4||"."[le](/()()/)[_e]>1||""[le](/.?/)[_e]?qe=function(ot,dt){var Pt=String(this);if(ot===void 0&&dt===0)return[];if(!k(ot))return De.call(Pt,ot,dt);for(var ht=[],Et=(ot.ignoreCase?"i":"")+(ot.multiline?"m":"")+(ot.unicode?"u":"")+(ot.sticky?"y":""),Nt=0,Bt=dt===void 0?ce:dt>>>0,cn=new RegExp(ot.source,Et+"g"),An,wn,on;(An=xe.call(cn,Pt))&&(wn=cn[Ie],!(wn>Nt&&(ht.push(Pt.slice(Nt,An.index)),An[_e]>1&&An.index<Pt[_e]&&ie.apply(ht,An.slice(1)),on=An[0][_e],Nt=wn,ht[_e]>=Bt)));)cn[Ie]===An.index&&cn[Ie]++;return Nt===Pt[_e]?(on||!cn.test(""))&&ht.push(""):ht.push(Pt.slice(Nt)),ht[_e]>Bt?ht.slice(0,Bt):ht}:"0"[le](void 0,0)[_e]?qe=function(ot,dt){return ot===void 0&&dt===0?[]:De.call(this,ot,dt)}:qe=De,[function(dt,Pt){var ht=Te(this),Et=dt==null?void 0:dt[Pe];return Et!==void 0?Et.call(dt,ht,Pt):qe.call(String(ht),dt,Pt)},function(ot,dt){var Pt=Ue(qe,ot,this,dt,qe!==De);if(Pt.done)return Pt.value;var ht=B(ot),Et=String(this),Nt=q(ht,RegExp),Bt=ht.unicode,cn=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(ke?"y":"g"),An=new Nt(ke?ht:"^(?:"+ht.source+")",cn),wn=dt===void 0?ce:dt>>>0;if(wn===0)return[];if(Et.length===0)return ge(An,Et)===null?[Et]:[];for(var on=0,En=0,we=[];En<Et.length;){An.lastIndex=ke?En:0;var R=ge(An,ke?Et:Et.slice(En)),O;if(R===null||(O=re(fe(An.lastIndex+(ke?0:En)),Et.length))===on)En=K(Et,En,Bt);else{if(we.push(Et.slice(on,En)),we.length===wn)return we;for(var pe=1;pe<=R.length-1;pe++)if(we.push(R[pe]),we.length===wn)return we;En=on=O}}return we.push(Et.slice(on)),we}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_export.js"),B=w("./node_modules/core-js/modules/_string-context.js"),q="includes";k(k.P+k.F*w("./node_modules/core-js/modules/_fails-is-regexp.js")(q),"String",{includes:function(fe){return!!~B(this,fe,q).indexOf(fe,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_global.js"),B=w("./node_modules/core-js/modules/_has.js"),q=w("./node_modules/core-js/modules/_descriptors.js"),K=w("./node_modules/core-js/modules/_export.js"),fe=w("./node_modules/core-js/modules/_redefine.js"),ge=w("./node_modules/core-js/modules/_meta.js").KEY,xe=w("./node_modules/core-js/modules/_fails.js"),ee=w("./node_modules/core-js/modules/_shared.js"),re=w("./node_modules/core-js/modules/_set-to-string-tag.js"),ie=w("./node_modules/core-js/modules/_uid.js"),le=w("./node_modules/core-js/modules/_wks.js"),_e=w("./node_modules/core-js/modules/_wks-ext.js"),Ie=w("./node_modules/core-js/modules/_wks-define.js"),ce=w("./node_modules/core-js/modules/_enum-keys.js"),ke=w("./node_modules/core-js/modules/_is-array.js"),Te=w("./node_modules/core-js/modules/_an-object.js"),Pe=w("./node_modules/core-js/modules/_is-object.js"),De=w("./node_modules/core-js/modules/_to-object.js"),Ue=w("./node_modules/core-js/modules/_to-iobject.js"),qe=w("./node_modules/core-js/modules/_to-primitive.js"),ot=w("./node_modules/core-js/modules/_property-desc.js"),dt=w("./node_modules/core-js/modules/_object-create.js"),Pt=w("./node_modules/core-js/modules/_object-gopn-ext.js"),ht=w("./node_modules/core-js/modules/_object-gopd.js"),Et=w("./node_modules/core-js/modules/_object-gops.js"),Nt=w("./node_modules/core-js/modules/_object-dp.js"),Bt=w("./node_modules/core-js/modules/_object-keys.js"),cn=ht.f,An=Nt.f,wn=Pt.f,on=k.Symbol,En=k.JSON,we=En&&En.stringify,R="prototype",O=le("_hidden"),pe=le("toPrimitive"),Le={}.propertyIsEnumerable,Ke=ee("symbol-registry"),at=ee("symbols"),se=ee("op-symbols"),T=Object[R],z=typeof on=="function"&&!!Et.f,be=k.QObject,je=!be||!be[R]||!be[R].findChild,Xe=q&&xe(function(){return dt(An({},"a",{get:function(){return An(this,"a",{value:7}).a}})).a!=7})?function(Wt,Gt,Zt){var In=cn(T,Gt);In&&delete T[Gt],An(Wt,Gt,Zt),In&&Wt!==T&&An(T,Gt,In)}:An,Qe=function(Wt){var Gt=at[Wt]=dt(on[R]);return Gt._k=Wt,Gt},Ht=z&&typeof on.iterator=="symbol"?function(Wt){return typeof Wt=="symbol"}:function(Wt){return Wt instanceof on},Cn=function(Gt,Zt,In){return Gt===T&&Cn(se,Zt,In),Te(Gt),Zt=qe(Zt,!0),Te(In),B(at,Zt)?(In.enumerable?(B(Gt,O)&&Gt[O][Zt]&&(Gt[O][Zt]=!1),In=dt(In,{enumerable:ot(0,!1)})):(B(Gt,O)||An(Gt,O,ot(1,{})),Gt[O][Zt]=!0),Xe(Gt,Zt,In)):An(Gt,Zt,In)},fn=function(Gt,Zt){Te(Gt);for(var In=ce(Zt=Ue(Zt)),Ln=0,rr=In.length,Ur;rr>Ln;)Cn(Gt,Ur=In[Ln++],Zt[Ur]);return Gt},ft=function(Gt,Zt){return Zt===void 0?dt(Gt):fn(dt(Gt),Zt)},Mt=function(Gt){var Zt=Le.call(this,Gt=qe(Gt,!0));return this===T&&B(at,Gt)&&!B(se,Gt)?!1:Zt||!B(this,Gt)||!B(at,Gt)||B(this,O)&&this[O][Gt]?Zt:!0},un=function(Gt,Zt){if(Gt=Ue(Gt),Zt=qe(Zt,!0),!(Gt===T&&B(at,Zt)&&!B(se,Zt))){var In=cn(Gt,Zt);return In&&B(at,Zt)&&!(B(Gt,O)&&Gt[O][Zt])&&(In.enumerable=!0),In}},Ar=function(Gt){for(var Zt=wn(Ue(Gt)),In=[],Ln=0,rr;Zt.length>Ln;)!B(at,rr=Zt[Ln++])&&rr!=O&&rr!=ge&&In.push(rr);return In},Yr=function(Gt){for(var Zt=Gt===T,In=wn(Zt?se:Ue(Gt)),Ln=[],rr=0,Ur;In.length>rr;)B(at,Ur=In[rr++])&&(Zt?B(T,Ur):!0)&&Ln.push(at[Ur]);return Ln};z||(on=function(){if(this instanceof on)throw TypeError("Symbol is not a constructor!");var Gt=ie(arguments.length>0?arguments[0]:void 0),Zt=function(In){this===T&&Zt.call(se,In),B(this,O)&&B(this[O],Gt)&&(this[O][Gt]=!1),Xe(this,Gt,ot(1,In))};return q&&je&&Xe(T,Gt,{configurable:!0,set:Zt}),Qe(Gt)},fe(on[R],"toString",function(){return this._k}),ht.f=un,Nt.f=Cn,w("./node_modules/core-js/modules/_object-gopn.js").f=Pt.f=Ar,w("./node_modules/core-js/modules/_object-pie.js").f=Mt,Et.f=Yr,q&&!w("./node_modules/core-js/modules/_library.js")&&fe(T,"propertyIsEnumerable",Mt,!0),_e.f=function(Wt){return Qe(le(Wt))}),K(K.G+K.W+K.F*!z,{Symbol:on});for(var hn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nr=0;hn.length>nr;)le(hn[nr++]);for(var gi=Bt(le.store),vr=0;gi.length>vr;)Ie(gi[vr++]);K(K.S+K.F*!z,"Symbol",{for:function(Wt){return B(Ke,Wt+="")?Ke[Wt]:Ke[Wt]=on(Wt)},keyFor:function(Gt){if(!Ht(Gt))throw TypeError(Gt+" is not a symbol!");for(var Zt in Ke)if(Ke[Zt]===Gt)return Zt},useSetter:function(){je=!0},useSimple:function(){je=!1}}),K(K.S+K.F*!z,"Object",{create:ft,defineProperty:Cn,defineProperties:fn,getOwnPropertyDescriptor:un,getOwnPropertyNames:Ar,getOwnPropertySymbols:Yr});var Nr=xe(function(){Et.f(1)});K(K.S+K.F*Nr,"Object",{getOwnPropertySymbols:function(Gt){return Et.f(De(Gt))}}),En&&K(K.S+K.F*(!z||xe(function(){var Wt=on();return we([Wt])!="[null]"||we({a:Wt})!="{}"||we(Object(Wt))!="{}"})),"JSON",{stringify:function(Gt){for(var Zt=[Gt],In=1,Ln,rr;arguments.length>In;)Zt.push(arguments[In++]);if(rr=Ln=Zt[1],!(!Pe(Ln)&&Gt===void 0||Ht(Gt)))return ke(Ln)||(Ln=function(Ur,ai){if(typeof rr=="function"&&(ai=rr.call(this,Ur,ai)),!Ht(ai))return ai}),Zt[1]=Ln,we.apply(En,Zt)}}),on[R][pe]||w("./node_modules/core-js/modules/_hide.js")(on[R],pe,on[R].valueOf),re(on,"Symbol"),re(Math,"Math",!0),re(k.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_export.js"),B=w("./node_modules/core-js/modules/_array-includes.js")(!0);k(k.P,"Array",{includes:function(K){return B(this,K,arguments.length>1?arguments[1]:void 0)}}),w("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(W,F,w){var k=w("./node_modules/core-js/modules/_export.js"),B=w("./node_modules/core-js/modules/_own-keys.js"),q=w("./node_modules/core-js/modules/_to-iobject.js"),K=w("./node_modules/core-js/modules/_object-gopd.js"),fe=w("./node_modules/core-js/modules/_create-property.js");k(k.S,"Object",{getOwnPropertyDescriptors:function(xe){for(var ee=q(xe),re=K.f,ie=B(ee),le={},_e=0,Ie,ce;ie.length>_e;)ce=re(ee,Ie=ie[_e++]),ce!==void 0&&fe(le,Ie,ce);return le}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(W,F,w){w("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(W,F,w){for(var k=w("./node_modules/core-js/modules/es6.array.iterator.js"),B=w("./node_modules/core-js/modules/_object-keys.js"),q=w("./node_modules/core-js/modules/_redefine.js"),K=w("./node_modules/core-js/modules/_global.js"),fe=w("./node_modules/core-js/modules/_hide.js"),ge=w("./node_modules/core-js/modules/_iterators.js"),xe=w("./node_modules/core-js/modules/_wks.js"),ee=xe("iterator"),re=xe("toStringTag"),ie=ge.Array,le={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},_e=B(le),Ie=0;Ie<_e.length;Ie++){var ce=_e[Ie],ke=le[ce],Te=K[ce],Pe=Te&&Te.prototype,De;if(Pe&&(Pe[ee]||fe(Pe,ee,ie),Pe[re]||fe(Pe,re,ce),ge[ce]=ie,ke))for(De in k)Pe[De]||q(Pe,De,k[De],!0)}},"./node_modules/crypt/crypt.js":function(W,F){(function(){var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k={rotl:function(B,q){return B<<q|B>>>32-q},rotr:function(B,q){return B<<32-q|B>>>q},endian:function(B){if(B.constructor==Number)return k.rotl(B,8)&16711935|k.rotl(B,24)&4278255360;for(var q=0;q<B.length;q++)B[q]=k.endian(B[q]);return B},randomBytes:function(B){for(var q=[];B>0;B--)q.push(Math.floor(Math.random()*256));return q},bytesToWords:function(B){for(var q=[],K=0,fe=0;K<B.length;K++,fe+=8)q[fe>>>5]|=B[K]<<24-fe%32;return q},wordsToBytes:function(B){for(var q=[],K=0;K<B.length*32;K+=8)q.push(B[K>>>5]>>>24-K%32&255);return q},bytesToHex:function(B){for(var q=[],K=0;K<B.length;K++)q.push((B[K]>>>4).toString(16)),q.push((B[K]&15).toString(16));return q.join("")},hexToBytes:function(B){for(var q=[],K=0;K<B.length;K+=2)q.push(parseInt(B.substr(K,2),16));return q},bytesToBase64:function(B){for(var q=[],K=0;K<B.length;K+=3)for(var fe=B[K]<<16|B[K+1]<<8|B[K+2],ge=0;ge<4;ge++)K*8+ge*6<=B.length*8?q.push(w.charAt(fe>>>6*(3-ge)&63)):q.push("=");return q.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var q=[],K=0,fe=0;K<B.length;fe=++K%4)fe!=0&&q.push((w.indexOf(B.charAt(K-1))&Math.pow(2,-2*fe+8)-1)<<fe*2|w.indexOf(B.charAt(K))>>>6-fe*2);return q}};W.exports=k})()},"./node_modules/is-buffer/index.js":function(W,F){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */W.exports=function(B){return B!=null&&(w(B)||k(B)||!!B._isBuffer)};function w(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function k(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&w(B.slice(0,0))}},"./node_modules/md5/md5.js":function(W,F,w){(function(){var k=w("./node_modules/crypt/crypt.js"),B=w("./node_modules/charenc/charenc.js").utf8,q=w("./node_modules/is-buffer/index.js"),K=w("./node_modules/charenc/charenc.js").bin,fe=function(ge,xe){ge.constructor==String?xe&&xe.encoding==="binary"?ge=K.stringToBytes(ge):ge=B.stringToBytes(ge):q(ge)?ge=Array.prototype.slice.call(ge,0):!Array.isArray(ge)&&ge.constructor!==Uint8Array&&(ge=ge.toString());for(var ee=k.bytesToWords(ge),re=ge.length*8,ie=1732584193,le=-271733879,_e=-1732584194,Ie=271733878,ce=0;ce<ee.length;ce++)ee[ce]=(ee[ce]<<8|ee[ce]>>>24)&16711935|(ee[ce]<<24|ee[ce]>>>8)&4278255360;ee[re>>>5]|=128<<re%32,ee[(re+64>>>9<<4)+14]=re;for(var ke=fe._ff,Te=fe._gg,Pe=fe._hh,De=fe._ii,ce=0;ce<ee.length;ce+=16){var Ue=ie,qe=le,ot=_e,dt=Ie;ie=ke(ie,le,_e,Ie,ee[ce+0],7,-680876936),Ie=ke(Ie,ie,le,_e,ee[ce+1],12,-389564586),_e=ke(_e,Ie,ie,le,ee[ce+2],17,606105819),le=ke(le,_e,Ie,ie,ee[ce+3],22,-1044525330),ie=ke(ie,le,_e,Ie,ee[ce+4],7,-176418897),Ie=ke(Ie,ie,le,_e,ee[ce+5],12,1200080426),_e=ke(_e,Ie,ie,le,ee[ce+6],17,-1473231341),le=ke(le,_e,Ie,ie,ee[ce+7],22,-45705983),ie=ke(ie,le,_e,Ie,ee[ce+8],7,1770035416),Ie=ke(Ie,ie,le,_e,ee[ce+9],12,-1958414417),_e=ke(_e,Ie,ie,le,ee[ce+10],17,-42063),le=ke(le,_e,Ie,ie,ee[ce+11],22,-1990404162),ie=ke(ie,le,_e,Ie,ee[ce+12],7,1804603682),Ie=ke(Ie,ie,le,_e,ee[ce+13],12,-40341101),_e=ke(_e,Ie,ie,le,ee[ce+14],17,-1502002290),le=ke(le,_e,Ie,ie,ee[ce+15],22,1236535329),ie=Te(ie,le,_e,Ie,ee[ce+1],5,-165796510),Ie=Te(Ie,ie,le,_e,ee[ce+6],9,-1069501632),_e=Te(_e,Ie,ie,le,ee[ce+11],14,643717713),le=Te(le,_e,Ie,ie,ee[ce+0],20,-373897302),ie=Te(ie,le,_e,Ie,ee[ce+5],5,-701558691),Ie=Te(Ie,ie,le,_e,ee[ce+10],9,38016083),_e=Te(_e,Ie,ie,le,ee[ce+15],14,-660478335),le=Te(le,_e,Ie,ie,ee[ce+4],20,-405537848),ie=Te(ie,le,_e,Ie,ee[ce+9],5,568446438),Ie=Te(Ie,ie,le,_e,ee[ce+14],9,-1019803690),_e=Te(_e,Ie,ie,le,ee[ce+3],14,-187363961),le=Te(le,_e,Ie,ie,ee[ce+8],20,1163531501),ie=Te(ie,le,_e,Ie,ee[ce+13],5,-1444681467),Ie=Te(Ie,ie,le,_e,ee[ce+2],9,-51403784),_e=Te(_e,Ie,ie,le,ee[ce+7],14,1735328473),le=Te(le,_e,Ie,ie,ee[ce+12],20,-1926607734),ie=Pe(ie,le,_e,Ie,ee[ce+5],4,-378558),Ie=Pe(Ie,ie,le,_e,ee[ce+8],11,-2022574463),_e=Pe(_e,Ie,ie,le,ee[ce+11],16,1839030562),le=Pe(le,_e,Ie,ie,ee[ce+14],23,-35309556),ie=Pe(ie,le,_e,Ie,ee[ce+1],4,-1530992060),Ie=Pe(Ie,ie,le,_e,ee[ce+4],11,1272893353),_e=Pe(_e,Ie,ie,le,ee[ce+7],16,-155497632),le=Pe(le,_e,Ie,ie,ee[ce+10],23,-1094730640),ie=Pe(ie,le,_e,Ie,ee[ce+13],4,681279174),Ie=Pe(Ie,ie,le,_e,ee[ce+0],11,-358537222),_e=Pe(_e,Ie,ie,le,ee[ce+3],16,-722521979),le=Pe(le,_e,Ie,ie,ee[ce+6],23,76029189),ie=Pe(ie,le,_e,Ie,ee[ce+9],4,-640364487),Ie=Pe(Ie,ie,le,_e,ee[ce+12],11,-421815835),_e=Pe(_e,Ie,ie,le,ee[ce+15],16,530742520),le=Pe(le,_e,Ie,ie,ee[ce+2],23,-995338651),ie=De(ie,le,_e,Ie,ee[ce+0],6,-198630844),Ie=De(Ie,ie,le,_e,ee[ce+7],10,1126891415),_e=De(_e,Ie,ie,le,ee[ce+14],15,-1416354905),le=De(le,_e,Ie,ie,ee[ce+5],21,-57434055),ie=De(ie,le,_e,Ie,ee[ce+12],6,1700485571),Ie=De(Ie,ie,le,_e,ee[ce+3],10,-1894986606),_e=De(_e,Ie,ie,le,ee[ce+10],15,-1051523),le=De(le,_e,Ie,ie,ee[ce+1],21,-2054922799),ie=De(ie,le,_e,Ie,ee[ce+8],6,1873313359),Ie=De(Ie,ie,le,_e,ee[ce+15],10,-30611744),_e=De(_e,Ie,ie,le,ee[ce+6],15,-1560198380),le=De(le,_e,Ie,ie,ee[ce+13],21,1309151649),ie=De(ie,le,_e,Ie,ee[ce+4],6,-145523070),Ie=De(Ie,ie,le,_e,ee[ce+11],10,-1120210379),_e=De(_e,Ie,ie,le,ee[ce+2],15,718787259),le=De(le,_e,Ie,ie,ee[ce+9],21,-343485551),ie=ie+Ue>>>0,le=le+qe>>>0,_e=_e+ot>>>0,Ie=Ie+dt>>>0}return k.endian([ie,le,_e,Ie])};fe._ff=function(ge,xe,ee,re,ie,le,_e){var Ie=ge+(xe&ee|~xe&re)+(ie>>>0)+_e;return(Ie<<le|Ie>>>32-le)+xe},fe._gg=function(ge,xe,ee,re,ie,le,_e){var Ie=ge+(xe&re|ee&~re)+(ie>>>0)+_e;return(Ie<<le|Ie>>>32-le)+xe},fe._hh=function(ge,xe,ee,re,ie,le,_e){var Ie=ge+(xe^ee^re)+(ie>>>0)+_e;return(Ie<<le|Ie>>>32-le)+xe},fe._ii=function(ge,xe,ee,re,ie,le,_e){var Ie=ge+(ee^(xe|~re))+(ie>>>0)+_e;return(Ie<<le|Ie>>>32-le)+xe},fe._blocksize=16,fe._digestsize=16,W.exports=function(ge,xe){if(ge==null)throw new Error("Illegal argument "+ge);var ee=k.wordsToBytes(fe(ge,xe));return xe&&xe.asBytes?ee:xe&&xe.asString?K.bytesToString(ee):k.bytesToHex(ee)}})()},"./node_modules/regenerator-runtime/runtime.js":function(W,F,w){var k=function(B){var q=Object.prototype,K=q.hasOwnProperty,fe,ge=typeof Symbol=="function"?Symbol:{},xe=ge.iterator||"@@iterator",ee=ge.asyncIterator||"@@asyncIterator",re=ge.toStringTag||"@@toStringTag";function ie(R,O,pe){return Object.defineProperty(R,O,{value:pe,enumerable:!0,configurable:!0,writable:!0}),R[O]}try{ie({},"")}catch{ie=function(O,pe,Le){return O[pe]=Le}}function le(R,O,pe,Le){var Ke=O&&O.prototype instanceof De?O:De,at=Object.create(Ke.prototype),se=new on(Le||[]);return at._invoke=Bt(R,pe,se),at}B.wrap=le;function _e(R,O,pe){try{return{type:"normal",arg:R.call(O,pe)}}catch(Le){return{type:"throw",arg:Le}}}var Ie="suspendedStart",ce="suspendedYield",ke="executing",Te="completed",Pe={};function De(){}function Ue(){}function qe(){}var ot={};ot[xe]=function(){return this};var dt=Object.getPrototypeOf,Pt=dt&&dt(dt(En([])));Pt&&Pt!==q&&K.call(Pt,xe)&&(ot=Pt);var ht=qe.prototype=De.prototype=Object.create(ot);Ue.prototype=ht.constructor=qe,qe.constructor=Ue,Ue.displayName=ie(qe,re,"GeneratorFunction");function Et(R){["next","throw","return"].forEach(function(O){ie(R,O,function(pe){return this._invoke(O,pe)})})}B.isGeneratorFunction=function(R){var O=typeof R=="function"&&R.constructor;return O?O===Ue||(O.displayName||O.name)==="GeneratorFunction":!1},B.mark=function(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,qe):(R.__proto__=qe,ie(R,re,"GeneratorFunction")),R.prototype=Object.create(ht),R},B.awrap=function(R){return{__await:R}};function Nt(R,O){function pe(at,se,T,z){var be=_e(R[at],R,se);if(be.type==="throw")z(be.arg);else{var je=be.arg,Xe=je.value;return Xe&&typeof Xe=="object"&&K.call(Xe,"__await")?O.resolve(Xe.__await).then(function(Qe){pe("next",Qe,T,z)},function(Qe){pe("throw",Qe,T,z)}):O.resolve(Xe).then(function(Qe){je.value=Qe,T(je)},function(Qe){return pe("throw",Qe,T,z)})}}var Le;function Ke(at,se){function T(){return new O(function(z,be){pe(at,se,z,be)})}return Le=Le?Le.then(T,T):T()}this._invoke=Ke}Et(Nt.prototype),Nt.prototype[ee]=function(){return this},B.AsyncIterator=Nt,B.async=function(R,O,pe,Le,Ke){Ke===void 0&&(Ke=Promise);var at=new Nt(le(R,O,pe,Le),Ke);return B.isGeneratorFunction(O)?at:at.next().then(function(se){return se.done?se.value:at.next()})};function Bt(R,O,pe){var Le=Ie;return function(at,se){if(Le===ke)throw new Error("Generator is already running");if(Le===Te){if(at==="throw")throw se;return we()}for(pe.method=at,pe.arg=se;;){var T=pe.delegate;if(T){var z=cn(T,pe);if(z){if(z===Pe)continue;return z}}if(pe.method==="next")pe.sent=pe._sent=pe.arg;else if(pe.method==="throw"){if(Le===Ie)throw Le=Te,pe.arg;pe.dispatchException(pe.arg)}else pe.method==="return"&&pe.abrupt("return",pe.arg);Le=ke;var be=_e(R,O,pe);if(be.type==="normal"){if(Le=pe.done?Te:ce,be.arg===Pe)continue;return{value:be.arg,done:pe.done}}else be.type==="throw"&&(Le=Te,pe.method="throw",pe.arg=be.arg)}}}function cn(R,O){var pe=R.iterator[O.method];if(pe===fe){if(O.delegate=null,O.method==="throw"){if(R.iterator.return&&(O.method="return",O.arg=fe,cn(R,O),O.method==="throw"))return Pe;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return Pe}var Le=_e(pe,R.iterator,O.arg);if(Le.type==="throw")return O.method="throw",O.arg=Le.arg,O.delegate=null,Pe;var Ke=Le.arg;if(!Ke)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,Pe;if(Ke.done)O[R.resultName]=Ke.value,O.next=R.nextLoc,O.method!=="return"&&(O.method="next",O.arg=fe);else return Ke;return O.delegate=null,Pe}Et(ht),ie(ht,re,"Generator"),ht[xe]=function(){return this},ht.toString=function(){return"[object Generator]"};function An(R){var O={tryLoc:R[0]};1 in R&&(O.catchLoc=R[1]),2 in R&&(O.finallyLoc=R[2],O.afterLoc=R[3]),this.tryEntries.push(O)}function wn(R){var O=R.completion||{};O.type="normal",delete O.arg,R.completion=O}function on(R){this.tryEntries=[{tryLoc:"root"}],R.forEach(An,this),this.reset(!0)}B.keys=function(R){var O=[];for(var pe in R)O.push(pe);return O.reverse(),function Le(){for(;O.length;){var Ke=O.pop();if(Ke in R)return Le.value=Ke,Le.done=!1,Le}return Le.done=!0,Le}};function En(R){if(R){var O=R[xe];if(O)return O.call(R);if(typeof R.next=="function")return R;if(!isNaN(R.length)){var pe=-1,Le=function Ke(){for(;++pe<R.length;)if(K.call(R,pe))return Ke.value=R[pe],Ke.done=!1,Ke;return Ke.value=fe,Ke.done=!0,Ke};return Le.next=Le}}return{next:we}}B.values=En;function we(){return{value:fe,done:!0}}return on.prototype={constructor:on,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=fe,this.done=!1,this.delegate=null,this.method="next",this.arg=fe,this.tryEntries.forEach(wn),!R)for(var O in this)O.charAt(0)==="t"&&K.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=fe)},stop:function(){this.done=!0;var R=this.tryEntries[0],O=R.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var O=this;function pe(z,be){return at.type="throw",at.arg=R,O.next=z,be&&(O.method="next",O.arg=fe),!!be}for(var Le=this.tryEntries.length-1;Le>=0;--Le){var Ke=this.tryEntries[Le],at=Ke.completion;if(Ke.tryLoc==="root")return pe("end");if(Ke.tryLoc<=this.prev){var se=K.call(Ke,"catchLoc"),T=K.call(Ke,"finallyLoc");if(se&&T){if(this.prev<Ke.catchLoc)return pe(Ke.catchLoc,!0);if(this.prev<Ke.finallyLoc)return pe(Ke.finallyLoc)}else if(se){if(this.prev<Ke.catchLoc)return pe(Ke.catchLoc,!0)}else if(T){if(this.prev<Ke.finallyLoc)return pe(Ke.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(R,O){for(var pe=this.tryEntries.length-1;pe>=0;--pe){var Le=this.tryEntries[pe];if(Le.tryLoc<=this.prev&&K.call(Le,"finallyLoc")&&this.prev<Le.finallyLoc){var Ke=Le;break}}Ke&&(R==="break"||R==="continue")&&Ke.tryLoc<=O&&O<=Ke.finallyLoc&&(Ke=null);var at=Ke?Ke.completion:{};return at.type=R,at.arg=O,Ke?(this.method="next",this.next=Ke.finallyLoc,Pe):this.complete(at)},complete:function(R,O){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&O&&(this.next=O),Pe},finish:function(R){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.finallyLoc===R)return this.complete(pe.completion,pe.afterLoc),wn(pe),Pe}},catch:function(R){for(var O=this.tryEntries.length-1;O>=0;--O){var pe=this.tryEntries[O];if(pe.tryLoc===R){var Le=pe.completion;if(Le.type==="throw"){var Ke=Le.arg;wn(pe)}return Ke}}throw new Error("illegal catch attempt")},delegateYield:function(R,O,pe){return this.delegate={iterator:En(R),resultName:O,nextLoc:pe},this.method==="next"&&(this.arg=fe),Pe}},B}(W.exports);try{regeneratorRuntime=k}catch{Function("r","regeneratorRuntime = r")(k)}},"./src/api.js":function(W,F,w){w.r(F),w.d(F,"setup",function(){return ke}),w.d(F,"setupCache",function(){return ce}),w("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js");var k=w("axios"),B=w.n(k),q=w("./src/request.js"),K=w("./src/cache.js");w.d(F,"serializeQuery",function(){return K.serializeQuery});var fe=w("./src/config.js"),ge=w("./src/utilities.js");function xe(Te,Pe){if(Te==null)return{};var De=ee(Te,Pe),Ue,qe;if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(Te);for(qe=0;qe<ot.length;qe++)Ue=ot[qe],!(Pe.indexOf(Ue)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Te,Ue)||(De[Ue]=Te[Ue]))}return De}function ee(Te,Pe){if(Te==null)return{};var De={},Ue=Object.keys(Te),qe,ot;for(ot=0;ot<Ue.length;ot++)qe=Ue[ot],!(Pe.indexOf(qe)>=0)&&(De[qe]=Te[qe]);return De}function re(Te,Pe){var De=Object.keys(Te);if(Object.getOwnPropertySymbols){var Ue=Object.getOwnPropertySymbols(Te);Pe&&(Ue=Ue.filter(function(qe){return Object.getOwnPropertyDescriptor(Te,qe).enumerable})),De.push.apply(De,Ue)}return De}function ie(Te){for(var Pe=1;Pe<arguments.length;Pe++){var De=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?re(Object(De),!0).forEach(function(Ue){le(Te,Ue,De[Ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors(De)):re(Object(De)).forEach(function(Ue){Object.defineProperty(Te,Ue,Object.getOwnPropertyDescriptor(De,Ue))})}return Te}function le(Te,Pe,De){return Pe in Te?Object.defineProperty(Te,Pe,{value:De,enumerable:!0,configurable:!0,writable:!0}):Te[Pe]=De,Te}function _e(Te,Pe,De,Ue,qe,ot,dt){try{var Pt=Te[ot](dt),ht=Pt.value}catch(Et){De(Et);return}Pt.done?Pe(ht):Promise.resolve(ht).then(Ue,qe)}function Ie(Te){return function(){var Pe=this,De=arguments;return new Promise(function(Ue,qe){var ot=Te.apply(Pe,De);function dt(ht){_e(ot,Ue,qe,dt,Pt,"next",ht)}function Pt(ht){_e(ot,Ue,qe,dt,Pt,"throw",ht)}dt(void 0)})}}function ce(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Te=Object(fe.makeConfig)(Te);function Pe(Ue){return De.apply(this,arguments)}function De(){return De=Ie(regeneratorRuntime.mark(function Ue(qe){var ot,dt,Pt,ht,Et;return regeneratorRuntime.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return ot=Object(fe.mergeRequestConfig)(Te,qe),Bt.next=3,Object(q.default)(ot,qe);case 3:if(dt=Bt.sent,Pt=dt.next,Object(ge.isFunction)(Pt)){Bt.next=7;break}return Bt.abrupt("return",Pt);case 7:return Bt.prev=7,Bt.next=10,ot.adapter(qe);case 10:dt=Bt.sent,Bt.next=16;break;case 13:Bt.prev=13,Bt.t0=Bt.catch(7),ht=Bt.t0;case 16:if(!ht){Bt.next=31;break}if(Et=Object(ge.isFunction)(ot.readOnError)?ot.readOnError(ht,qe):ot.readOnError,!Et){Bt.next=30;break}return Bt.prev=19,ot.acceptStale=!0,Bt.next=23,Object(q.default)(ot,qe);case 23:return dt=Bt.sent,dt.next.request.stale=!0,Bt.abrupt("return",dt.next);case 28:Bt.prev=28,Bt.t1=Bt.catch(19);case 30:throw ht;case 31:return Bt.abrupt("return",Pt(dt));case 32:case"end":return Bt.stop()}},Ue,null,[[7,13],[19,28]])})),De.apply(this,arguments)}return{adapter:Pe,config:Te,store:Te.store}}function ke(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=ie(ie(ie({},fe.defaults.axios),Te),{},{cache:ie(ie({},fe.defaults.axios.cache),Te.cache)}),De=ce(Pe.cache);Pe.cache;var Ue=xe(Pe,["cache"]),qe=B.a.create(ie(ie({},Ue),{},{adapter:De.adapter}));return qe.cache=De.store,qe}F.default={setup:ke,setupCache:ce,serializeQuery:K.serializeQuery}},"./src/cache.js":function(W,F,w){w.r(F),w.d(F,"read",function(){return re}),w.d(F,"write",function(){return xe}),w.d(F,"key",function(){return le}),w.d(F,"invalidate",function(){return ce}),w.d(F,"serializeQuery",function(){return ke}),w("./node_modules/core-js/modules/es7.array.includes.js"),w("./node_modules/core-js/modules/es6.string.includes.js"),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("./src/utilities.js"),B=w("./node_modules/md5/md5.js"),q=w.n(B),K=w("./src/serialize.js");function fe(Te,Pe,De,Ue,qe,ot,dt){try{var Pt=Te[ot](dt),ht=Pt.value}catch(Et){De(Et);return}Pt.done?Pe(ht):Promise.resolve(ht).then(Ue,qe)}function ge(Te){return function(){var Pe=this,De=arguments;return new Promise(function(Ue,qe){var ot=Te.apply(Pe,De);function dt(ht){fe(ot,Ue,qe,dt,Pt,"next",ht)}function Pt(ht){fe(ot,Ue,qe,dt,Pt,"throw",ht)}dt(void 0)})}}function xe(Te,Pe,De){return ee.apply(this,arguments)}function ee(){return ee=ge(regeneratorRuntime.mark(function Te(Pe,De,Ue){var qe;return regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.prev=0,qe={expires:Pe.expires,data:Object(K.default)(Pe,De,Ue)},dt.next=4,Pe.store.setItem(Pe.uuid,qe);case 4:dt.next=19;break;case 6:if(dt.prev=6,dt.t0=dt.catch(0),Pe.debug("Could not store response",dt.t0),!Pe.clearOnError){dt.next=18;break}return dt.prev=10,dt.next=13,Pe.store.clear();case 13:dt.next=18;break;case 15:dt.prev=15,dt.t1=dt.catch(10),Pe.debug("Could not clear store",dt.t1);case 18:return dt.abrupt("return",!1);case 19:return dt.abrupt("return",!0);case 20:case"end":return dt.stop()}},Te,null,[[0,6],[10,15]])})),ee.apply(this,arguments)}function re(Te,Pe){return ie.apply(this,arguments)}function ie(){return ie=ge(regeneratorRuntime.mark(function Te(Pe,De){var Ue,qe,ot,dt,Pt,ht,Et,Nt;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return Ue=Pe.uuid,qe=Pe.ignoreCache,cn.next=3,Pe.store.getItem(Ue);case 3:if(ot=cn.sent,!(qe||!ot||!ot.data)){cn.next=10;break}throw Pe.debug("cache-miss",De.url),dt=new Error,dt.reason="cache-miss",dt.message="Entry not found from cache",dt;case 10:if(Pt=ot.expires,ht=ot.data,Et=typeof navigator!="undefined"&&"onLine"in navigator&&!navigator.onLine,!(!Et&&!Pe.acceptStale&&Pt!==0&&Pt<Date.now())){cn.next=18;break}throw Pe.debug("cache-stale",De.url),Nt=new Error,Nt.reason="cache-stale",Nt.message="Entry is stale",Nt;case 18:return Pe.debug(Pe.acceptStale?"cache-hit-stale":"cache-hit",De.url),cn.abrupt("return",ht);case 20:case"end":return cn.stop()}},Te)})),ie.apply(this,arguments)}function le(Te){if(Object(k.isFunction)(Te.key))return Te.key;var Pe;return Object(k.isString)(Te.key)?Pe=function(Ue){var qe="".concat(Ue.baseURL?Ue.baseURL:"").concat(Ue.url),ot="".concat(Te.key,"/").concat(qe).concat(ke(Ue));return Ue.data?ot+q()(Ue.data):ot}:Pe=function(Ue){var qe="".concat(Ue.baseURL?Ue.baseURL:"").concat(Ue.url),ot=qe+ke(Ue);return Ue.data?ot+q()(Ue.data):ot},Pe}function _e(Te,Pe){return Ie.apply(this,arguments)}function Ie(){return Ie=ge(regeneratorRuntime.mark(function Te(Pe,De){var Ue;return regeneratorRuntime.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(Ue=De.method.toLowerCase(),!Pe.exclude.methods.includes(Ue)){ot.next=4;break}return ot.next=4,Pe.store.removeItem(Pe.uuid);case 4:case"end":return ot.stop()}},Te)})),Ie.apply(this,arguments)}function ce(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(k.isFunction)(Te.invalidate)?Te.invalidate:_e}function ke(Te){if(!Te.params)return"";if(typeof URLSearchParams=="undefined")return JSON.stringify(Te.params);var Pe=Te.params,De=Te.params instanceof URLSearchParams;return De||(Pe=new URLSearchParams,Object.keys(Te.params).forEach(function(Ue){return Pe.append(Ue,Te.params[Ue])})),"?".concat(Pe.toString())}F.default={read:re,write:xe,key:le,invalidate:ce,serializeQuery:ke}},"./src/config.js":function(W,F,w){w.r(F),w.d(F,"defaults",function(){return ie}),w.d(F,"makeConfig",function(){return _e}),w.d(F,"mergeRequestConfig",function(){return Ie}),w("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("axios"),B=w.n(k),q=w("./src/memory.js"),K=w("./src/cache.js");function fe(ce,ke){var Te=Object.keys(ce);if(Object.getOwnPropertySymbols){var Pe=Object.getOwnPropertySymbols(ce);ke&&(Pe=Pe.filter(function(De){return Object.getOwnPropertyDescriptor(ce,De).enumerable})),Te.push.apply(Te,Pe)}return Te}function ge(ce){for(var ke=1;ke<arguments.length;ke++){var Te=arguments[ke]!=null?arguments[ke]:{};ke%2?fe(Object(Te),!0).forEach(function(Pe){xe(ce,Pe,Te[Pe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(Te)):fe(Object(Te)).forEach(function(Pe){Object.defineProperty(ce,Pe,Object.getOwnPropertyDescriptor(Te,Pe))})}return ce}function xe(ce,ke,Te){return ke in ce?Object.defineProperty(ce,ke,{value:Te,enumerable:!0,configurable:!0,writable:!0}):ce[ke]=Te,ce}var ee=function(){},re=function(){for(var ke,Te=arguments.length,Pe=new Array(Te),De=0;De<Te;De++)Pe[De]=arguments[De];return(ke=console).log.apply(ke,["[axios-cache-adapter]"].concat(Pe))},ie={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},le=["limit","store","adapter","uuid","acceptStale"],_e=function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Te=ge(ge(ge({},ie.cache),ke),{},{exclude:ge(ge({},ie.cache.exclude),ke.exclude)});return Te.key=Object(K.key)(Te),Te.invalidate=Object(K.invalidate)(Te),Te.debug!==!1?Te.debug=typeof Te.debug=="function"?Te.debug:re:Te.debug=ee,Te.store||(Te.store=new q.default),Te.debug("Global cache config",Te),Te},Ie=function(ke,Te){var Pe=Te.cache||{};Pe&&le.forEach(function(Ue){return Pe[Ue]?delete Pe[Ue]:void 0});var De=ge(ge(ge({},ke),Pe),{},{exclude:ge(ge({},ke.exclude),Pe.exclude)});return De.debug===!0&&(De.debug=re),Pe.key&&(De.key=Object(K.key)(Pe)),De.uuid=De.key(Te),ke.debug("Request config for ".concat(Te.url),De),De};F.default={defaults:ie,makeConfig:_e,mergeRequestConfig:Ie}},"./src/exclude.js":function(W,F,w){w.r(F),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/core-js/modules/es7.array.includes.js"),w("./node_modules/core-js/modules/es6.string.includes.js");var k=w("./src/utilities.js");function B(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0,fe=q.exclude,ge=fe===void 0?{}:fe,xe=q.debug,ee=K.method.toLowerCase();if(ee==="head"||ge.methods.includes(ee))return xe("Excluding request by HTTP method ".concat(K.url)),!0;if(typeof ge.filter=="function"&&ge.filter(K))return xe("Excluding request by filter ".concat(K.url)),!0;var re=/\?.*$/.test(K.url)||Object(k.isObject)(K.params)&&Object.keys(K.params).length!==0||typeof URLSearchParams!="undefined"&&K.params instanceof URLSearchParams;if(ge.query&&re)return xe("Excluding request by query ".concat(K.url)),!0;var ie=ge.paths||[],le=ie.some(function(_e){return K.url.match(_e)});return le?(xe("Excluding request by url match ".concat(K.url)),!0):!1}F.default=B},"./src/index.node.js":function(W,F,w){w.r(F);var k=w("./src/api.js");w.d(F,"setup",function(){return k.setup}),w.d(F,"setupCache",function(){return k.setupCache}),w.d(F,"serializeQuery",function(){return k.serializeQuery});var B=w("./src/redis.js");w.d(F,"RedisStore",function(){return B.default});var q=w("./src/redis-default.js");w.d(F,"RedisDefaultStore",function(){return q.default}),F.default={setup:k.setup,setupCache:k.setupCache,serializeQuery:k.serializeQuery,RedisStore:B.default,RedisDefaultStore:q.default}},"./src/limit.js":function(W,F,w){w.r(F),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");function k(fe,ge,xe,ee,re,ie,le){try{var _e=fe[ie](le),Ie=_e.value}catch(ce){xe(ce);return}_e.done?ge(Ie):Promise.resolve(Ie).then(ee,re)}function B(fe){return function(){var ge=this,xe=arguments;return new Promise(function(ee,re){var ie=fe.apply(ge,xe);function le(Ie){k(ie,ee,re,le,_e,"next",Ie)}function _e(Ie){k(ie,ee,re,le,_e,"throw",Ie)}le(void 0)})}}function q(fe){return K.apply(this,arguments)}function K(){return K=B(regeneratorRuntime.mark(function fe(ge){var xe,ee;return regeneratorRuntime.wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,ge.store.length();case 2:if(xe=ie.sent,!(xe<ge.limit)){ie.next=5;break}return ie.abrupt("return");case 5:return ge.debug("Current store size: ".concat(xe)),ie.next=8,ge.store.iterate(function(le,_e){ee||(ee={value:le,key:_e}),le.expires<ee.value.expires&&(ee={value:le,key:_e})});case 8:if(!ee){ie.next=12;break}return ge.debug("Removing item: ".concat(ee.key)),ie.next=12,ge.store.removeItem(ee.key);case 12:case"end":return ie.stop()}},fe)})),K.apply(this,arguments)}F.default=q},"./src/memory.js":function(W,F,w){w.r(F),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js");var k=w("./src/utilities.js");function B(ee,re,ie,le,_e,Ie,ce){try{var ke=ee[Ie](ce),Te=ke.value}catch(Pe){ie(Pe);return}ke.done?re(Te):Promise.resolve(Te).then(le,_e)}function q(ee){return function(){var re=this,ie=arguments;return new Promise(function(le,_e){var Ie=ee.apply(re,ie);function ce(Te){B(Ie,le,_e,ce,ke,"next",Te)}function ke(Te){B(Ie,le,_e,ce,ke,"throw",Te)}ce(void 0)})}}function K(ee,re){if(!(ee instanceof re))throw new TypeError("Cannot call a class as a function")}function fe(ee,re){for(var ie=0;ie<re.length;ie++){var le=re[ie];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ee,le.key,le)}}function ge(ee,re,ie){return re&&fe(ee.prototype,re),ie&&fe(ee,ie),ee}var xe=function(){function ee(){K(this,ee),this.store={}}return ge(ee,[{key:"getItem",value:function(){var re=q(regeneratorRuntime.mark(function le(_e){var Ie;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return Ie=this.store[_e]||null,ke.abrupt("return",JSON.parse(Ie));case 2:case"end":return ke.stop()}},le,this)}));function ie(le){return re.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var re=q(regeneratorRuntime.mark(function le(_e,Ie){return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return this.store[_e]=JSON.stringify(Ie),ke.abrupt("return",Ie);case 2:case"end":return ke.stop()}},le,this)}));function ie(le,_e){return re.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var re=q(regeneratorRuntime.mark(function le(_e){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:delete this.store[_e];case 1:case"end":return ce.stop()}},le,this)}));function ie(le){return re.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var re=q(regeneratorRuntime.mark(function le(){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:this.store={};case 1:case"end":return Ie.stop()}},le,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"length",value:function(){var re=q(regeneratorRuntime.mark(function le(){return regeneratorRuntime.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Ie.stop()}},le,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"iterate",value:function(ie){return Promise.all(Object(k.mapObject)(this.store,ie))}}]),ee}();F.default=xe},"./src/redis-default.js":function(W,F,w){w.r(F),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.function.bind.js"),w("./node_modules/core-js/modules/es6.function.name.js");var k=w("util");function B(ee,re,ie,le,_e,Ie,ce){try{var ke=ee[Ie](ce),Te=ke.value}catch(Pe){ie(Pe);return}ke.done?re(Te):Promise.resolve(Te).then(le,_e)}function q(ee){return function(){var re=this,ie=arguments;return new Promise(function(le,_e){var Ie=ee.apply(re,ie);function ce(Te){B(Ie,le,_e,ce,ke,"next",Te)}function ke(Te){B(Ie,le,_e,ce,ke,"throw",Te)}ce(void 0)})}}function K(ee,re){if(!(ee instanceof re))throw new TypeError("Cannot call a class as a function")}function fe(ee,re){for(var ie=0;ie<re.length;ie++){var le=re[ie];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ee,le.key,le)}}function ge(ee,re,ie){return re&&fe(ee.prototype,re),ie&&fe(ee,ie),ee}var xe=function(){function ee(re){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,ee);var le=new TypeError("First parameter must be a valid RedisClient instance.");try{if(re.constructor.name!=="RedisClient")throw le}catch{throw le}this.client=re,this.prefix=ie.prefix||"axios-cache",this.maxScanCount=ie.maxScanCount||1e3,this.getAsync=Object(k.promisify)(re.get).bind(re),this.psetexAsync=Object(k.promisify)(re.psetex).bind(re),this.delAsync=Object(k.promisify)(re.del).bind(re),this.scanAsync=Object(k.promisify)(re.scan).bind(re)}return ge(ee,[{key:"calculateTTL",value:function(ie){var le=Date.now();return ie.expires&&ie.expires>le?ie.expires-le:-1}},{key:"transformKey",value:function(ie){return this.prefix+"_"+ie}},{key:"getItem",value:function(){var re=q(regeneratorRuntime.mark(function le(_e){var Ie;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.getAsync(this.transformKey(_e));case 2:if(ke.t0=ke.sent,ke.t0){ke.next=5;break}ke.t0=null;case 5:return Ie=ke.t0,ke.abrupt("return",JSON.parse(Ie));case 7:case"end":return ke.stop()}},le,this)}));function ie(le){return re.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var re=q(regeneratorRuntime.mark(function le(_e,Ie){var ce,ke;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(ce=this.transformKey(_e),ke=this.calculateTTL(Ie),!(ke>0)){Pe.next=5;break}return Pe.next=5,this.psetexAsync(ce,ke,JSON.stringify(Ie));case 5:return Pe.abrupt("return",Ie);case 6:case"end":return Pe.stop()}},le,this)}));function ie(le,_e){return re.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var re=q(regeneratorRuntime.mark(function le(_e){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,this.delAsync(this.transformKey(_e));case 2:case"end":return ce.stop()}},le,this)}));function ie(le){return re.apply(this,arguments)}return ie}()},{key:"scan",value:function(){var re=q(regeneratorRuntime.mark(function le(_e){var Ie,ce;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:Ie="0";case 1:return Te.next=3,this.scanAsync(Ie,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return ce=Te.sent,Ie=ce[0],Te.next=7,_e(ce[1]);case 7:if(Ie!=="0"){Te.next=1;break}case 8:case"end":return Te.stop()}},le,this)}));function ie(le){return re.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var re=q(regeneratorRuntime.mark(function le(){var _e=this;return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,this.scan(function(ke){return _e.delAsync(ke)});case 2:case"end":return ce.stop()}},le,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"length",value:function(){var re=q(regeneratorRuntime.mark(function le(){var _e;return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return _e=0,ce.next=3,this.scan(function(ke){_e+=ke.length});case 3:return ce.abrupt("return",_e);case 4:case"end":return ce.stop()}},le,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"iterate",value:function(){var re=q(regeneratorRuntime.mark(function le(_e){var Ie=this,ce,ke;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return ke=function(){return ke=q(regeneratorRuntime.mark(function Ue(qe){var ot,dt;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.getAsync(qe);case 2:if(ht.t0=ht.sent,ht.t0){ht.next=5;break}ht.t0=null;case 5:return ot=ht.t0,dt=JSON.parse(ot),ht.next=9,_e(dt,qe);case 9:return ht.abrupt("return",ht.sent);case 10:case"end":return ht.stop()}},Ue,this)})),ke.apply(this,arguments)},ce=function(Ue){return ke.apply(this,arguments)},Pe.next=4,this.scan(function(De){return Promise.all(De.map(ce.bind(Ie)))});case 4:return Pe.abrupt("return",Promise.resolve([]));case 5:case"end":return Pe.stop()}},le,this)}));function ie(le){return re.apply(this,arguments)}return ie}()}]),ee}();F.default=xe},"./src/redis.js":function(W,F,w){w.r(F),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js"),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.function.bind.js"),w("./node_modules/core-js/modules/es6.function.name.js");var k=w("util"),B=w("./src/utilities.js");function q(re,ie,le,_e,Ie,ce,ke){try{var Te=re[ce](ke),Pe=Te.value}catch(De){le(De);return}Te.done?ie(Pe):Promise.resolve(Pe).then(_e,Ie)}function K(re){return function(){var ie=this,le=arguments;return new Promise(function(_e,Ie){var ce=re.apply(ie,le);function ke(Pe){q(ce,_e,Ie,ke,Te,"next",Pe)}function Te(Pe){q(ce,_e,Ie,ke,Te,"throw",Pe)}ke(void 0)})}}function fe(re,ie){if(!(re instanceof ie))throw new TypeError("Cannot call a class as a function")}function ge(re,ie){for(var le=0;le<ie.length;le++){var _e=ie[le];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(re,_e.key,_e)}}function xe(re,ie,le){return ie&&ge(re.prototype,ie),le&&ge(re,le),re}var ee=function(){function re(ie){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";fe(this,re);var _e=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ie.constructor.name!=="RedisClient")throw _e}catch{throw _e}this.client=ie,this.HASH_KEY=le,this.hgetAsync=Object(k.promisify)(ie.hget).bind(ie),this.hsetAsync=Object(k.promisify)(ie.hset).bind(ie),this.hdelAsync=Object(k.promisify)(ie.hdel).bind(ie),this.delAsync=Object(k.promisify)(ie.del).bind(ie),this.hlenAsync=Object(k.promisify)(ie.hlen).bind(ie),this.hgetallAsync=Object(k.promisify)(ie.hgetall).bind(ie)}return xe(re,[{key:"getItem",value:function(){var ie=K(regeneratorRuntime.mark(function _e(Ie){var ce;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.hgetAsync(this.HASH_KEY,Ie);case 2:if(Te.t0=Te.sent,Te.t0){Te.next=5;break}Te.t0=null;case 5:return ce=Te.t0,Te.abrupt("return",JSON.parse(ce));case 7:case"end":return Te.stop()}},_e,this)}));function le(_e){return ie.apply(this,arguments)}return le}()},{key:"setItem",value:function(){var ie=K(regeneratorRuntime.mark(function _e(Ie,ce){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.hsetAsync(this.HASH_KEY,Ie,JSON.stringify(ce));case 2:return Te.abrupt("return",ce);case 3:case"end":return Te.stop()}},_e,this)}));function le(_e,Ie){return ie.apply(this,arguments)}return le}()},{key:"removeItem",value:function(){var ie=K(regeneratorRuntime.mark(function _e(Ie){return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hdelAsync(this.HASH_KEY,Ie);case 2:case"end":return ke.stop()}},_e,this)}));function le(_e){return ie.apply(this,arguments)}return le}()},{key:"clear",value:function(){var ie=K(regeneratorRuntime.mark(function _e(){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return ce.stop()}},_e,this)}));function le(){return ie.apply(this,arguments)}return le}()},{key:"length",value:function(){var ie=K(regeneratorRuntime.mark(function _e(){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return ce.stop()}},_e,this)}));function le(){return ie.apply(this,arguments)}return le}()},{key:"iterate",value:function(){var ie=K(regeneratorRuntime.mark(function _e(Ie){var ce;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return ce=Te.sent,Te.abrupt("return",Promise.all(Object(B.mapObject)(ce,Ie)));case 4:case"end":return Te.stop()}},_e,this)}));function le(_e){return ie.apply(this,arguments)}return le}()}]),re}();F.default=ee},"./src/request.js":function(W,F,w){w.r(F),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("./src/response.js"),B=w("./src/exclude.js"),q=w("./src/cache.js");function K(ee,re,ie,le,_e,Ie,ce){try{var ke=ee[Ie](ce),Te=ke.value}catch(Pe){ie(Pe);return}ke.done?re(Te):Promise.resolve(Te).then(le,_e)}function fe(ee){return function(){var re=this,ie=arguments;return new Promise(function(le,_e){var Ie=ee.apply(re,ie);function ce(Te){K(Ie,le,_e,ce,ke,"next",Te)}function ke(Te){K(Ie,le,_e,ce,ke,"throw",Te)}ce(void 0)})}}function ge(ee,re){return xe.apply(this,arguments)}function xe(){return xe=fe(regeneratorRuntime.mark(function ee(re,ie){var le,_e,Ie;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return Ie=function(){return re.excludeFromCache=!0,{config:re,next:le}},re.debug("uuid",re.uuid),le=function(){for(var Pe=arguments.length,De=new Array(Pe),Ue=0;Ue<Pe;Ue++)De[Ue]=arguments[Ue];return k.default.apply(void 0,[re,ie].concat(De))},ke.next=5,re.invalidate(re,ie);case 5:if(!Object(B.default)(re,ie)){ke.next=7;break}return ke.abrupt("return",Ie());case 7:return ke.prev=7,ke.next=10,Object(q.read)(re,ie);case 10:return _e=ke.sent,_e.config=ie,_e.request={fromCache:!0},ke.abrupt("return",{config:re,next:_e});case 16:if(ke.prev=16,ke.t0=ke.catch(7),!(re.clearOnStale&&ke.t0.reason==="cache-stale")){ke.next=21;break}return ke.next=21,re.store.removeItem(re.uuid);case 21:return ke.abrupt("return",{config:re,next:le});case 22:case"end":return ke.stop()}},ee,null,[[7,16]])})),xe.apply(this,arguments)}F.default=ge},"./src/response.js":function(W,F,w){w.r(F),w("./node_modules/regenerator-runtime/runtime.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");var k=w("./src/limit.js"),B=w("./src/cache.js"),q=w("./node_modules/cache-control-esm/index.js");function K(ee,re,ie,le,_e,Ie,ce){try{var ke=ee[Ie](ce),Te=ke.value}catch(Pe){ie(Pe);return}ke.done?re(Te):Promise.resolve(Te).then(le,_e)}function fe(ee){return function(){var re=this,ie=arguments;return new Promise(function(le,_e){var Ie=ee.apply(re,ie);function ce(Te){K(Ie,le,_e,ce,ke,"next",Te)}function ke(Te){K(Ie,le,_e,ce,ke,"throw",Te)}ce(void 0)})}}function ge(ee,re,ie){return xe.apply(this,arguments)}function xe(){return xe=fe(regeneratorRuntime.mark(function ee(re,ie,le){var _e,Ie,ce,ke,Te;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(_e=le.request,Ie=_e===void 0?{}:_e,ce=le.headers,ke=ce===void 0?{}:ce,!(["arraybuffer","blob"].indexOf(Ie.responseType)>-1)){De.next=3;break}return De.abrupt("return",le);case 3:if(Te={},re.readHeaders&&(ke["cache-control"]?(Te=Object(q.parse)(ke["cache-control"]),(Te.noCache||Te.noStore)&&(re.excludeFromCache=!0)):ke.expires?re.expires=new Date(ke.expires).getTime():re.expires=new Date().getTime()),re.excludeFromCache){De.next=15;break}if(Te.maxAge||Te.maxAge===0?re.expires=Date.now()+Te.maxAge*1e3:re.readHeaders||(re.expires=re.maxAge===0?Date.now():Date.now()+re.maxAge),!re.limit){De.next=11;break}return re.debug("Detected limit: ".concat(re.limit)),De.next=11,Object(k.default)(re);case 11:return De.next=13,Object(B.write)(re,ie,le);case 13:De.next=16;break;case 15:le.request.excludedFromCache=!0;case 16:return De.abrupt("return",le);case 17:case"end":return De.stop()}},ee)})),xe.apply(this,arguments)}F.default=ge},"./src/serialize.js":function(W,F,w){w.r(F),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");function k(K,fe){if(K==null)return{};var ge=B(K,fe),xe,ee;if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(K);for(ee=0;ee<re.length;ee++)xe=re[ee],!(fe.indexOf(xe)>=0)&&(!Object.prototype.propertyIsEnumerable.call(K,xe)||(ge[xe]=K[xe]))}return ge}function B(K,fe){if(K==null)return{};var ge={},xe=Object.keys(K),ee,re;for(re=0;re<xe.length;re++)ee=xe[re],!(fe.indexOf(ee)>=0)&&(ge[ee]=K[ee]);return ge}function q(K,fe,ge){if(ge.data)try{ge.data=JSON.parse(ge.data)}catch(ee){K.debug("Could not parse data as JSON",ee)}ge.request,ge.config;var xe=k(ge,["request","config"]);return xe}F.default=q},"./src/utilities.js":function(W,F,w){w.r(F),w.d(F,"isObject",function(){return B}),w.d(F,"getTag",function(){return q}),w.d(F,"isFunction",function(){return K}),w.d(F,"isString",function(){return fe}),w.d(F,"mapObject",function(){return ge}),w("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),w("./node_modules/core-js/modules/es6.symbol.js"),w("./node_modules/core-js/modules/es6.array.iterator.js"),w("./node_modules/core-js/modules/es6.object.to-string.js");function k(xe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(re){return typeof re}:k=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},k(xe)}function B(xe){var ee=k(xe);return xe!=null&&(ee==="object"||ee==="function")}function q(xe){return xe===null?xe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(xe)}function K(xe){if(!B(xe))return!1;var ee=q(xe);return ee==="[object Function]"||ee==="[object AsyncFunction]"||ee==="[object GeneratorFunction]"||ee==="[object Proxy]"}function fe(xe){var ee=k(xe);return ee==="string"||ee==="object"&&xe!=null&&!Array.isArray(xe)&&q(xe)==="[object String]"}function ge(xe,ee){return B(xe)?Object.keys(xe).map(function(re){return ee(xe[re],re)}):[]}},axios:function(W,F){W.exports=ne},util:function(W,F){W.exports=C.default}})})});const J={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},X=D.setupCache({maxAge:60*60*24*1e3}),G=E.default.create({adapter:X.adapter}),U=async(H,$={})=>{const ne={...J,...$},[W,F]=r.lngLatToGoogle(H,ne.zoomBase),w=ne.tileUrl.replace("{z}",String(ne.zoomBase)).replace("{x}",String(W)).replace("{y}",String(F)),k={code:"",prefecture:"",city:""};let B;try{const fe=await G.get(w,{responseType:"arraybuffer"});B=Buffer.from(fe.data,"binary")}catch(fe){throw new Error(fe)}const q=new g.VectorTile(new _.default(B));let K=Object.keys(q.layers);return Array.isArray(K)||(K=[K]),K.forEach(fe=>{const ge=q.layers[fe];if(ge&&ne.layer===ge.name)for(let xe=0;xe<ge.length;xe++){const ee=ge.feature(xe).toGeoJSON(W,F,ne.zoomBase);K.length>1&&(ee.properties.vt_layer=fe);const re={type:"FeatureCollection",features:[ee]};t.geoContains(re,H)&&(k.code=String(ee.id).length===5?String(ee.id):`0${String(ee.id)}`,k.prefecture=ee.properties.prefecture,k.city=ee.properties.city)}}),k};e.openReverseGeocoder=U})(n4);const lk={defaultComment:"\u66F4\u65B0\u5730\u5740",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},uk={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},ck={defaultComment:"\u4F4F\u6240\u3092\u66F4\u65B0",postcodeField:{key:"addr:postcode",displayName:"\u90F5\u4FBF\u756A\u53F7",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"\u90FD\u9053\u5E9C\u770C",placeholder:"\u6771\u4EAC\u90FD",adminLevel:4},{key:"addr:city",displayName:"\u5E02\u753A\u6751\u3068\u6771\u4EAC23\u533A",placeholder:"\u5343\u4EE3\u7530\u533A",adminLevel:7},{key:"addr:suburb",displayName:"\u653F\u4EE4\u6307\u5B9A\u90FD\u5E02\u306E\u533A",placeholder:""},{key:"addr:quarter",displayName:"\u5730\u540D",placeholder:"\u5916\u795E\u7530",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"\u4E01\u76EE",placeholder:"1\u4E01\u76EE"},{key:"addr:block_number",displayName:"\u756A\u5730",placeholder:"17"},{key:"addr:housenumber",displayName:"\u53F7",placeholder:"6",prefix:"-"}]},hk={defaultComment:"\uC8FC\uC18C \uC5C5\uB370\uC774\uD2B8",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},pw={JPN:ck,CHN:lk,DEU:uk,KOR:hk};function m6(e,t,r){r===void 0&&(r={});var l={type:"Feature"};return(r.id===0||r.id)&&(l.id=r.id),r.bbox&&(l.bbox=r.bbox),l.properties=t||{},l.geometry=e,l}function fk(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mw(e[0])||!mw(e[1]))throw new Error("coordinates must contain numbers");var l={type:"Point",coordinates:e};return m6(l,t,r)}function dk(e,t,r){r===void 0&&(r={});for(var l=0,c=e;l<c.length;l++){var f=c[l];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<f[f.length-1].length;g++)if(f[f.length-1][g]!==f[0][g])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return m6(s,t,r)}function mw(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function g6(e,t,r){if(e!==null)for(var l,c,f,g,s,_,E,C=0,S=0,I,D=e.type,J=D==="FeatureCollection",X=D==="Feature",G=J?e.features.length:1,U=0;U<G;U++){E=J?e.features[U].geometry:X?e.geometry:e,I=E?E.type==="GeometryCollection":!1,s=I?E.geometries.length:1;for(var H=0;H<s;H++){var $=0,ne=0;if(g=I?E.geometries[H]:E,g!==null){_=g.coordinates;var W=g.type;switch(C=r&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(t(_,S,U,$,ne)===!1)return!1;S++,$++;break;case"LineString":case"MultiPoint":for(l=0;l<_.length;l++){if(t(_[l],S,U,$,ne)===!1)return!1;S++,W==="MultiPoint"&&$++}W==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(l=0;l<_.length;l++){for(c=0;c<_[l].length-C;c++){if(t(_[l][c],S,U,$,ne)===!1)return!1;S++}W==="MultiLineString"&&$++,W==="Polygon"&&ne++}W==="Polygon"&&$++;break;case"MultiPolygon":for(l=0;l<_.length;l++){for(ne=0,c=0;c<_[l].length;c++){for(f=0;f<_[l][c].length-C;f++){if(t(_[l][c][f],S,U,$,ne)===!1)return!1;S++}ne++}$++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(g6(g.geometries[l],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pk(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function mk(e){return e.type==="Feature"?e.geometry:e}function gk(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var l=pk(e),c=mk(t),f=c.type,g=t.bbox,s=c.coordinates;if(g&&yk(l,g)===!1)return!1;f==="Polygon"&&(s=[s]);for(var _=!1,E=0;E<s.length&&!_;E++)if(gw(l,s[E][0],r.ignoreBoundary)){for(var C=!1,S=1;S<s[E].length&&!C;)gw(l,s[E][S],!r.ignoreBoundary)&&(C=!0),S++;C||(_=!0)}return _}function gw(e,t,r){var l=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,f=t.length-1;c<t.length;f=c++){var g=t[c][0],s=t[c][1],_=t[f][0],E=t[f][1],C=e[1]*(g-_)+s*(_-e[0])+E*(e[0]-g)===0&&(g-e[0])*(_-e[0])<=0&&(s-e[1])*(E-e[1])<=0;if(C)return!r;var S=s>e[1]!=E>e[1]&&e[0]<(_-g)*(e[1]-s)/(E-s)+g;S&&(l=!l)}return l}function yk(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function vk(e,t){t===void 0&&(t={});var r=0,l=0,c=0;return g6(e,function(f){r+=f[0],l+=f[1],c++},!0),fk([r/c,l/c],t.properties)}const xk=()=>{const[e,t]=yt.exports.useState(!1);return{detectCountry:yt.exports.useCallback(async(l,c)=>{t(!0);const g=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const s of g.features)if(gk([l,c],s.geometry))return console.log("country: ",s.properties),t(!1),s;t(!1)},[]),loadingCountry:e}},Lg=({feature:e,fieldOption:t,suggestList:r,onChange:l})=>{var s;const[c,f]=yt.exports.useState((s=e.properties)==null?void 0:s[t.key]);yt.exports.useEffect(()=>{var _;f((_=e.properties)==null?void 0:_[t.key])},[e]);const g=yt.exports.useCallback(_=>{f(_.currentTarget.value),l&&l(_)},[]);return Hn("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Hn("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:g}),Rt("datalist",{id:t.key+"-list",children:r&&r.map(_=>{if(parseInt(_.tags.admin_level)===t.adminLevel)return Rt("option",{value:_.tags.name},_.id);if(_.type==="node"&&t.adminLevel===9)return Rt("option",{value:_.tags.name},_.id)})})]})},_k=({feature:e,fields:t})=>e.properties?Hn(ha,{children:[t.postcodeField&&Rt("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(r=>{var l;return Hn(ha,{children:[Rt("span",{children:(l=e.properties)==null?void 0:l[r.key]})," "]})}),t.detailFields&&t.detailFields.map(r=>{var l;return Hn(ha,{children:[Rt("span",{children:(l=e.properties)==null?void 0:l[r.key]})," "]})})]}):null,bk=({placeholder:e,defaultValue:t})=>{const[r,l]=yt.exports.useState(t);yt.exports.useEffect(()=>{l(t)},[t]);const c=yt.exports.useCallback(f=>{l(f.currentTarget.value)},[]);return Hn("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[Rt("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:r,required:!0,onChange:c})]})};var my={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,l="4.15.0",c=200,f="Expected a function",g="__lodash_hash_undefined__",s=1,_=2,E=1/0,C=9007199254740991,S="[object Arguments]",I="[object Array]",D="[object Boolean]",J="[object Date]",X="[object Error]",G="[object Function]",U="[object GeneratorFunction]",H="[object Map]",$="[object Number]",ne="[object Object]",W="[object Promise]",F="[object RegExp]",w="[object Set]",k="[object String]",B="[object Symbol]",q="[object WeakMap]",K="[object ArrayBuffer]",fe="[object DataView]",ge="[object Float32Array]",xe="[object Float64Array]",ee="[object Int8Array]",re="[object Int16Array]",ie="[object Int32Array]",le="[object Uint8Array]",_e="[object Uint8ClampedArray]",Ie="[object Uint16Array]",ce="[object Uint32Array]",ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Pe=/^\./,De=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/[\\^$.*+?()[\]{}|]/g,qe=/\\(\\)?/g,ot=/\w*$/,dt=/^\[object .+?Constructor\]$/,Pt=/^(?:0|[1-9]\d*)$/,ht={};ht[ge]=ht[xe]=ht[ee]=ht[re]=ht[ie]=ht[le]=ht[_e]=ht[Ie]=ht[ce]=!0,ht[S]=ht[I]=ht[K]=ht[D]=ht[fe]=ht[J]=ht[X]=ht[G]=ht[H]=ht[$]=ht[ne]=ht[F]=ht[w]=ht[k]=ht[q]=!1;var Et={};Et[S]=Et[I]=Et[K]=Et[fe]=Et[D]=Et[J]=Et[ge]=Et[xe]=Et[ee]=Et[re]=Et[ie]=Et[H]=Et[$]=Et[ne]=Et[F]=Et[w]=Et[k]=Et[B]=Et[le]=Et[_e]=Et[Ie]=Et[ce]=!0,Et[X]=Et[G]=Et[q]=!1;var Nt=typeof Xs=="object"&&Xs&&Xs.Object===Object&&Xs,Bt=typeof self=="object"&&self&&self.Object===Object&&self,cn=Nt||Bt||Function("return this")(),An=t&&!t.nodeType&&t,wn=An&&!0&&e&&!e.nodeType&&e,on=wn&&wn.exports===An,En=on&&Nt.process,we=function(){try{return En&&En.binding("util")}catch{}}(),R=we&&we.isTypedArray;function O(N,de){return N.set(de[0],de[1]),N}function pe(N,de){return N.add(de),N}function Le(N,de,Oe){switch(Oe.length){case 0:return N.call(de);case 1:return N.call(de,Oe[0]);case 2:return N.call(de,Oe[0],Oe[1]);case 3:return N.call(de,Oe[0],Oe[1],Oe[2])}return N.apply(de,Oe)}function Ke(N,de){for(var Oe=-1,tt=N?N.length:0;++Oe<tt&&de(N[Oe],Oe,N)!==!1;);return N}function at(N,de){for(var Oe=-1,tt=de.length,kt=N.length;++Oe<tt;)N[kt+Oe]=de[Oe];return N}function se(N,de,Oe,tt){var kt=-1,Ct=N?N.length:0;for(tt&&Ct&&(Oe=N[++kt]);++kt<Ct;)Oe=de(Oe,N[kt],kt,N);return Oe}function T(N,de){for(var Oe=-1,tt=N?N.length:0;++Oe<tt;)if(de(N[Oe],Oe,N))return!0;return!1}function z(N){return function(de){return de==null?r:de[N]}}function be(N,de){for(var Oe=-1,tt=Array(N);++Oe<N;)tt[Oe]=de(Oe);return tt}function je(N){return function(de){return N(de)}}function Xe(N,de){return N==null?r:N[de]}function Qe(N){var de=!1;if(N!=null&&typeof N.toString!="function")try{de=!!(N+"")}catch{}return de}function Ht(N){var de=-1,Oe=Array(N.size);return N.forEach(function(tt,kt){Oe[++de]=[kt,tt]}),Oe}function Cn(N,de){return function(Oe){return N(de(Oe))}}function fn(N){var de=-1,Oe=Array(N.size);return N.forEach(function(tt){Oe[++de]=tt}),Oe}var ft=Array.prototype,Mt=Function.prototype,un=Object.prototype,Ar=cn["__core-js_shared__"],Yr=function(){var N=/[^.]+$/.exec(Ar&&Ar.keys&&Ar.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),hn=Mt.toString,nr=un.hasOwnProperty,gi=hn.call(Object),vr=un.toString,Nr=RegExp("^"+hn.call(nr).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=on?cn.Buffer:r,Gt=cn.Symbol,Zt=cn.Uint8Array,In=Cn(Object.getPrototypeOf,Object),Ln=Object.create,rr=un.propertyIsEnumerable,Ur=ft.splice,ai=Object.getOwnPropertySymbols,da=Wt?Wt.isBuffer:r,Ce=Cn(Object.keys,Object),Z=Math.max,Q=$o(cn,"DataView"),ye=$o(cn,"Map"),Ae=$o(cn,"Promise"),Me=$o(cn,"Set"),Ge=$o(cn,"WeakMap"),Ne=$o(Object,"create"),Ve=!rr.call({valueOf:1},"valueOf"),He=yi(Q),st=yi(ye),mt=yi(Ae),it=yi(Me),$t=yi(Ge),At=Gt?Gt.prototype:r,Ut=At?At.valueOf:r,rn=At?At.toString:r;function Vt(){}function xn(N){var de=-1,Oe=N?N.length:0;for(this.clear();++de<Oe;){var tt=N[de];this.set(tt[0],tt[1])}}function Tn(){this.__data__=Ne?Ne(null):{}}function _n(N){return this.has(N)&&delete this.__data__[N]}function bn(N){var de=this.__data__;if(Ne){var Oe=de[N];return Oe===g?r:Oe}return nr.call(de,N)?de[N]:r}function tr(N){var de=this.__data__;return Ne?de[N]!==r:nr.call(de,N)}function fr(N,de){var Oe=this.__data__;return Oe[N]=Ne&&de===r?g:de,this}xn.prototype.clear=Tn,xn.prototype.delete=_n,xn.prototype.get=bn,xn.prototype.has=tr,xn.prototype.set=fr;function Jn(N){var de=-1,Oe=N?N.length:0;for(this.clear();++de<Oe;){var tt=N[de];this.set(tt[0],tt[1])}}function xo(){this.__data__=[]}function Ki(N){var de=this.__data__,Oe=ir(de,N);if(Oe<0)return!1;var tt=de.length-1;return Oe==tt?de.pop():Ur.call(de,Oe,1),!0}function xl(N){var de=this.__data__,Oe=ir(de,N);return Oe<0?r:de[Oe][1]}function Ua(N){return ir(this.__data__,N)>-1}function Qn(N,de){var Oe=this.__data__,tt=ir(Oe,N);return tt<0?Oe.push([N,de]):Oe[tt][1]=de,this}Jn.prototype.clear=xo,Jn.prototype.delete=Ki,Jn.prototype.get=xl,Jn.prototype.has=Ua,Jn.prototype.set=Qn;function qi(N){var de=-1,Oe=N?N.length:0;for(this.clear();++de<Oe;){var tt=N[de];this.set(tt[0],tt[1])}}function Su(){this.__data__={hash:new xn,map:new(ye||Jn),string:new xn}}function Cu(N){return io(this,N).delete(N)}function Tu(N){return io(this,N).get(N)}function Es(N){return io(this,N).has(N)}function Au(N,de){return io(this,N).set(N,de),this}qi.prototype.clear=Su,qi.prototype.delete=Cu,qi.prototype.get=Tu,qi.prototype.has=Es,qi.prototype.set=Au;function pa(N){var de=-1,Oe=N?N.length:0;for(this.__data__=new qi;++de<Oe;)this.add(N[de])}function _l(N){return this.__data__.set(N,g),this}function Iu(N){return this.__data__.has(N)}pa.prototype.add=pa.prototype.push=_l,pa.prototype.has=Iu;function Vr(N){this.__data__=new Jn(N)}function Ss(){this.__data__=new Jn}function Va(N){return this.__data__.delete(N)}function $a(N){return this.__data__.get(N)}function Ga(N){return this.__data__.has(N)}function Cs(N,de){var Oe=this.__data__;if(Oe instanceof Jn){var tt=Oe.__data__;if(!ye||tt.length<c-1)return tt.push([N,de]),this;Oe=this.__data__=new qi(tt)}return Oe.set(N,de),this}Vr.prototype.clear=Ss,Vr.prototype.delete=Va,Vr.prototype.get=$a,Vr.prototype.has=Ga,Vr.prototype.set=Cs;function Ts(N,de){var Oe=$r(N)||oo(N)?be(N.length,String):[],tt=Oe.length,kt=!!tt;for(var Ct in N)(de||nr.call(N,Ct))&&!(kt&&(Ct=="length"||or(Ct,tt)))&&Oe.push(Ct);return Oe}function _o(N,de,Oe){(Oe!==r&&!ki(N[de],Oe)||typeof de=="number"&&Oe===r&&!(de in N))&&(N[de]=Oe)}function ma(N,de,Oe){var tt=N[de];(!(nr.call(N,de)&&ki(tt,Oe))||Oe===r&&!(de in N))&&(N[de]=Oe)}function ir(N,de){for(var Oe=N.length;Oe--;)if(ki(N[Oe][0],de))return Oe;return-1}function As(N,de){return N&&Ll(de,li(de),N)}function bo(N,de,Oe,tt,kt,Ct,Xt){var Yt;if(tt&&(Yt=Ct?tt(N,kt,Ct,Xt):tt(N)),Yt!==r)return Yt;if(!vi(N))return N;var dn=$r(N);if(dn){if(Yt=sh(N),!de)return Ou(N,Yt)}else{var _t=Mn(N),Nn=_t==G||_t==U;if(Os(N))return zl(N,de);if(_t==ne||_t==S||Nn&&!Ct){if(Qe(N))return Ct?N:{};if(Yt=Dn(Nn?{}:N),!de)return ah(N,As(Yt,N))}else{if(!Et[_t])return Ct?N:{};Yt=Go(N,_t,bo,de)}}Xt||(Xt=new Vr);var Zn=Xt.get(N);if(Zn)return Zn;if(Xt.set(N,Yt),!dn)var er=Oe?Uo(N):li(N);return Ke(er||N,function(Ir,bt){er&&(bt=Ir,Ir=N[bt]),ma(Yt,bt,bo(Ir,de,Oe,tt,bt,N,Xt))}),Yt}function bl(N){return vi(N)?Ln(N):{}}var Pu=Rl(El),wl=xa();function El(N,de){return N&&wl(N,de,li)}function Sl(N,de){de=wo(de,N)?[de]:ks(de);for(var Oe=0,tt=de.length;N!=null&&Oe<tt;)N=N[Eo(de[Oe++])];return Oe&&Oe==tt?N:r}function nh(N,de,Oe){var tt=de(N);return $r(N)?tt:at(tt,Oe(N))}function Cl(N){return vr.call(N)}function Tl(N,de){return N!=null&&de in Object(N)}function Ha(N,de,Oe,tt,kt){return N===de?!0:N==null||de==null||!vi(N)&&!ao(de)?N!==N&&de!==de:Al(N,de,Ha,Oe,tt,kt)}function Al(N,de,Oe,tt,kt,Ct){var Xt=$r(N),Yt=$r(de),dn=I,_t=I;Xt||(dn=Mn(N),dn=dn==S?ne:dn),Yt||(_t=Mn(de),_t=_t==S?ne:_t);var Nn=dn==ne&&!Qe(N),Zn=_t==ne&&!Qe(de),er=dn==_t;if(er&&!Nn)return Ct||(Ct=new Vr),Xt||Ko(N)?Fl(N,de,Oe,tt,kt,Ct):Ru(N,de,dn,Oe,tt,kt,Ct);if(!(kt&_)){var Ir=Nn&&nr.call(N,"__wrapped__"),bt=Zn&&nr.call(de,"__wrapped__");if(Ir||bt){var Mi=Ir?N.value():N,so=bt?de.value():de;return Ct||(Ct=new Vr),Oe(Mi,so,tt,kt,Ct)}}return er?(Ct||(Ct=new Vr),Bl(N,de,Oe,tt,kt,Ct)):!1}function ku(N,de,Oe,tt){var kt=Oe.length,Ct=kt,Xt=!tt;if(N==null)return!Ct;for(N=Object(N);kt--;){var Yt=Oe[kt];if(Xt&&Yt[2]?Yt[1]!==N[Yt[0]]:!(Yt[0]in N))return!1}for(;++kt<Ct;){Yt=Oe[kt];var dn=Yt[0],_t=N[dn],Nn=Yt[1];if(Xt&&Yt[2]){if(_t===r&&!(dn in N))return!1}else{var Zn=new Vr;if(tt)var er=tt(_t,Nn,dn,N,de,Zn);if(!(er===r?Ha(Nn,_t,tt,s|_,Zn):er))return!1}}return!0}function Mu(N){if(!vi(N)||jl(N))return!1;var de=Zo(N)||Qe(N)?Nr:dt;return de.test(yi(N))}function jn(N){return ao(N)&&Xo(N.length)&&!!ht[vr.call(N)]}function ga(N){return typeof N=="function"?N:N==null?wa:typeof N=="object"?$r(N)?Pl(N[0],N[1]):si(N):ar(N)}function Wa(N){if(!Ho(N))return Ce(N);var de=[];for(var Oe in Object(N))nr.call(N,Oe)&&Oe!="constructor"&&de.push(Oe);return de}function Il(N){if(!vi(N))return Ls(N);var de=Ho(N),Oe=[];for(var tt in N)tt=="constructor"&&(de||!nr.call(N,tt))||Oe.push(tt);return Oe}function si(N){var de=Vo(N);return de.length==1&&de[0][2]?zs(de[0][0],de[0][1]):function(Oe){return Oe===N||ku(Oe,N,de)}}function Pl(N,de){return wo(N)&&Xa(de)?zs(Eo(N),de):function(Oe){var tt=Vl(Oe,N);return tt===r&&tt===de?$l(Oe,N):Ha(de,tt,r,s|_)}}function Za(N,de,Oe,tt,kt){if(N!==de){if(!($r(de)||Ko(de)))var Ct=Il(de);Ke(Ct||de,function(Xt,Yt){if(Ct&&(Yt=Xt,Xt=de[Yt]),vi(Xt))kt||(kt=new Vr),Is(N,de,Yt,Oe,Za,tt,kt);else{var dn=tt?tt(N[Yt],Xt,Yt+"",N,de,kt):r;dn===r&&(dn=Xt),_o(N,Yt,dn)}})}}function Is(N,de,Oe,tt,kt,Ct,Xt){var Yt=N[Oe],dn=de[Oe],_t=Xt.get(dn);if(_t){_o(N,Oe,_t);return}var Nn=Ct?Ct(Yt,dn,Oe+"",N,de,Xt):r,Zn=Nn===r;Zn&&(Nn=dn,$r(dn)||Ko(dn)?$r(Yt)?Nn=Yt:_a(Yt)?Nn=Ou(Yt):(Zn=!1,Nn=bo(dn,!0)):Yo(dn)||oo(dn)?oo(Yt)?Nn=Ul(Yt):!vi(Yt)||tt&&Zo(Yt)?(Zn=!1,Nn=bo(dn,!0)):Nn=Yt:Zn=!1),Zn&&(Xt.set(dn,Nn),kt(Nn,dn,tt,Ct,Xt),Xt.delete(dn)),_o(N,Oe,Nn)}function kl(N){return function(de){return Sl(de,N)}}function Ml(N,de){return de=Z(de===r?N.length-1:de,0),function(){for(var Oe=arguments,tt=-1,kt=Z(Oe.length-de,0),Ct=Array(kt);++tt<kt;)Ct[tt]=Oe[de+tt];tt=-1;for(var Xt=Array(de+1);++tt<de;)Xt[tt]=Oe[tt];return Xt[de]=Ct,Le(N,this,Xt)}}function Ps(N){if(typeof N=="string")return N;if(So(N))return rn?rn.call(N):"";var de=N+"";return de=="0"&&1/N==-E?"-0":de}function ks(N){return $r(N)?N:Dl(N)}function zl(N,de){if(de)return N.slice();var Oe=new N.constructor(N.length);return N.copy(Oe),Oe}function ya(N){var de=new N.constructor(N.byteLength);return new Zt(de).set(new Zt(N)),de}function zu(N,de){var Oe=de?ya(N.buffer):N.buffer;return new N.constructor(Oe,N.byteOffset,N.byteLength)}function Lu(N,de,Oe){var tt=de?Oe(Ht(N),!0):Ht(N);return se(tt,O,new N.constructor)}function va(N){var de=new N.constructor(N.source,ot.exec(N));return de.lastIndex=N.lastIndex,de}function rh(N,de,Oe){var tt=de?Oe(fn(N),!0):fn(N);return se(tt,pe,new N.constructor)}function ih(N){return Ut?Object(Ut.call(N)):{}}function oh(N,de){var Oe=de?ya(N.buffer):N.buffer;return new N.constructor(Oe,N.byteOffset,N.length)}function Ou(N,de){var Oe=-1,tt=N.length;for(de||(de=Array(tt));++Oe<tt;)de[Oe]=N[Oe];return de}function Ll(N,de,Oe,tt){Oe||(Oe={});for(var kt=-1,Ct=de.length;++kt<Ct;){var Xt=de[kt],Yt=tt?tt(Oe[Xt],N[Xt],Xt,Oe,N):r;ma(Oe,Xt,Yt===r?N[Xt]:Yt)}return Oe}function ah(N,de){return Ll(N,Ms(N),de)}function Ol(N){return Ml(function(de,Oe){var tt=-1,kt=Oe.length,Ct=kt>1?Oe[kt-1]:r,Xt=kt>2?Oe[2]:r;for(Ct=N.length>3&&typeof Ct=="function"?(kt--,Ct):r,Xt&&pr(Oe[0],Oe[1],Xt)&&(Ct=kt<3?r:Ct,kt=1),de=Object(de);++tt<kt;){var Yt=Oe[tt];Yt&&N(de,Yt,tt,Ct)}return de})}function Rl(N,de){return function(Oe,tt){if(Oe==null)return Oe;if(!Wo(Oe))return N(Oe,tt);for(var kt=Oe.length,Ct=de?kt:-1,Xt=Object(Oe);(de?Ct--:++Ct<kt)&&tt(Xt[Ct],Ct,Xt)!==!1;);return Oe}}function xa(N){return function(de,Oe,tt){for(var kt=-1,Ct=Object(de),Xt=tt(de),Yt=Xt.length;Yt--;){var dn=Xt[N?Yt:++kt];if(Oe(Ct[dn],dn,Ct)===!1)break}return de}}function Fl(N,de,Oe,tt,kt,Ct){var Xt=kt&_,Yt=N.length,dn=de.length;if(Yt!=dn&&!(Xt&&dn>Yt))return!1;var _t=Ct.get(N);if(_t&&Ct.get(de))return _t==de;var Nn=-1,Zn=!0,er=kt&s?new pa:r;for(Ct.set(N,de),Ct.set(de,N);++Nn<Yt;){var Ir=N[Nn],bt=de[Nn];if(tt)var Mi=Xt?tt(bt,Ir,Nn,de,N,Ct):tt(Ir,bt,Nn,N,de,Ct);if(Mi!==r){if(Mi)continue;Zn=!1;break}if(er){if(!T(de,function(so,To){if(!er.has(To)&&(Ir===so||Oe(Ir,so,tt,kt,Ct)))return er.add(To)})){Zn=!1;break}}else if(!(Ir===bt||Oe(Ir,bt,tt,kt,Ct))){Zn=!1;break}}return Ct.delete(N),Ct.delete(de),Zn}function Ru(N,de,Oe,tt,kt,Ct,Xt){switch(Oe){case fe:if(N.byteLength!=de.byteLength||N.byteOffset!=de.byteOffset)return!1;N=N.buffer,de=de.buffer;case K:return!(N.byteLength!=de.byteLength||!tt(new Zt(N),new Zt(de)));case D:case J:case $:return ki(+N,+de);case X:return N.name==de.name&&N.message==de.message;case F:case k:return N==de+"";case H:var Yt=Ht;case w:var dn=Ct&_;if(Yt||(Yt=fn),N.size!=de.size&&!dn)return!1;var _t=Xt.get(N);if(_t)return _t==de;Ct|=s,Xt.set(N,de);var Nn=Fl(Yt(N),Yt(de),tt,kt,Ct,Xt);return Xt.delete(N),Nn;case B:if(Ut)return Ut.call(N)==Ut.call(de)}return!1}function Bl(N,de,Oe,tt,kt,Ct){var Xt=kt&_,Yt=li(N),dn=Yt.length,_t=li(de),Nn=_t.length;if(dn!=Nn&&!Xt)return!1;for(var Zn=dn;Zn--;){var er=Yt[Zn];if(!(Xt?er in de:nr.call(de,er)))return!1}var Ir=Ct.get(N);if(Ir&&Ct.get(de))return Ir==de;var bt=!0;Ct.set(N,de),Ct.set(de,N);for(var Mi=Xt;++Zn<dn;){er=Yt[Zn];var so=N[er],To=de[er];if(tt)var Rs=Xt?tt(To,so,er,de,N,Ct):tt(so,To,er,N,de,Ct);if(!(Rs===r?so===To||Oe(so,To,tt,kt,Ct):Rs)){bt=!1;break}Mi||(Mi=er=="constructor")}if(bt&&!Mi){var Jo=N.constructor,Ja=de.constructor;Jo!=Ja&&"constructor"in N&&"constructor"in de&&!(typeof Jo=="function"&&Jo instanceof Jo&&typeof Ja=="function"&&Ja instanceof Ja)&&(bt=!1)}return Ct.delete(N),Ct.delete(de),bt}function Uo(N){return nh(N,li,Ms)}function Fu(){var N=Vt.iteratee||qo;return N=N===qo?ga:N,arguments.length?N(arguments[0],arguments[1]):N}function io(N,de){var Oe=N.__data__;return Bu(de)?Oe[typeof de=="string"?"string":"hash"]:Oe.map}function Vo(N){for(var de=li(N),Oe=de.length;Oe--;){var tt=de[Oe],kt=N[tt];de[Oe]=[tt,kt,Xa(kt)]}return de}function $o(N,de){var Oe=Xe(N,de);return Mu(Oe)?Oe:r}var Ms=ai?Cn(ai,Object):qa,Mn=Cl;(Q&&Mn(new Q(new ArrayBuffer(1)))!=fe||ye&&Mn(new ye)!=H||Ae&&Mn(Ae.resolve())!=W||Me&&Mn(new Me)!=w||Ge&&Mn(new Ge)!=q)&&(Mn=function(N){var de=vr.call(N),Oe=de==ne?N.constructor:r,tt=Oe?yi(Oe):r;if(tt)switch(tt){case He:return fe;case st:return H;case mt:return W;case it:return w;case $t:return q}return de});function dr(N,de,Oe){de=wo(de,N)?[de]:ks(de);for(var tt,kt=-1,Xt=de.length;++kt<Xt;){var Ct=Eo(de[kt]);if(!(tt=N!=null&&Oe(N,Ct)))break;N=N[Ct]}if(tt)return tt;var Xt=N?N.length:0;return!!Xt&&Xo(Xt)&&or(Ct,Xt)&&($r(N)||oo(N))}function sh(N){var de=N.length,Oe=N.constructor(de);return de&&typeof N[0]=="string"&&nr.call(N,"index")&&(Oe.index=N.index,Oe.input=N.input),Oe}function Dn(N){return typeof N.constructor=="function"&&!Ho(N)?bl(In(N)):{}}function Go(N,de,Oe,tt){var kt=N.constructor;switch(de){case K:return ya(N);case D:case J:return new kt(+N);case fe:return zu(N,tt);case ge:case xe:case ee:case re:case ie:case le:case _e:case Ie:case ce:return oh(N,tt);case H:return Lu(N,tt,Oe);case $:case k:return new kt(N);case F:return va(N);case w:return rh(N,tt,Oe);case B:return ih(N)}}function or(N,de){return de=de==null?C:de,!!de&&(typeof N=="number"||Pt.test(N))&&N>-1&&N%1==0&&N<de}function pr(N,de,Oe){if(!vi(Oe))return!1;var tt=typeof de;return(tt=="number"?Wo(Oe)&&or(de,Oe.length):tt=="string"&&de in Oe)?ki(Oe[de],N):!1}function wo(N,de){if($r(N))return!1;var Oe=typeof N;return Oe=="number"||Oe=="symbol"||Oe=="boolean"||N==null||So(N)?!0:Te.test(N)||!ke.test(N)||de!=null&&N in Object(de)}function Bu(N){var de=typeof N;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?N!=="__proto__":N===null}function jl(N){return!!Yr&&Yr in N}function Ho(N){var de=N&&N.constructor,Oe=typeof de=="function"&&de.prototype||un;return N===Oe}function Xa(N){return N===N&&!vi(N)}function zs(N,de){return function(Oe){return Oe==null?!1:Oe[N]===de&&(de!==r||N in Object(Oe))}}function Ls(N){var de=[];if(N!=null)for(var Oe in Object(N))de.push(Oe);return de}var Dl=Ya(function(N){N=ba(N);var de=[];return Pe.test(N)&&de.push(""),N.replace(De,function(Oe,tt,kt,Ct){de.push(kt?Ct.replace(qe,"$1"):tt||Oe)}),de});function Eo(N){if(typeof N=="string"||So(N))return N;var de=N+"";return de=="0"&&1/N==-E?"-0":de}function yi(N){if(N!=null){try{return hn.call(N)}catch{}try{return N+""}catch{}}return""}function Pi(N){for(var de=-1,Oe=N?N.length:0,tt=0,kt=[];++de<Oe;){var Ct=N[de];Ct&&(kt[tt++]=Ct)}return kt}function Nl(N,de){var Oe=$r(N)?Ke:Pu;return Oe(N,Fu(de,3))}function Ya(N,de){if(typeof N!="function"||de&&typeof de!="function")throw new TypeError(f);var Oe=function(){var tt=arguments,kt=de?de.apply(this,tt):tt[0],Ct=Oe.cache;if(Ct.has(kt))return Ct.get(kt);var Xt=N.apply(this,tt);return Oe.cache=Ct.set(kt,Xt),Xt};return Oe.cache=new(Ya.Cache||qi),Oe}Ya.Cache=qi;function ju(N){return bo(N,!1,!0)}function ki(N,de){return N===de||N!==N&&de!==de}function oo(N){return _a(N)&&nr.call(N,"callee")&&(!rr.call(N,"callee")||vr.call(N)==S)}var $r=Array.isArray;function Wo(N){return N!=null&&Xo(N.length)&&!Zo(N)}function _a(N){return ao(N)&&Wo(N)}var Os=da||Co;function Ka(N){if(Wo(N)&&($r(N)||typeof N=="string"||typeof N.splice=="function"||Os(N)||oo(N)))return!N.length;var de=Mn(N);if(de==H||de==w)return!N.size;if(Ve||Ho(N))return!Ce(N).length;for(var Oe in N)if(nr.call(N,Oe))return!1;return!0}function Zo(N){var de=vi(N)?vr.call(N):"";return de==G||de==U}function Xo(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=C}function vi(N){var de=typeof N;return!!N&&(de=="object"||de=="function")}function ao(N){return!!N&&typeof N=="object"}function Yo(N){if(!ao(N)||vr.call(N)!=ne||Qe(N))return!1;var de=In(N);if(de===null)return!0;var Oe=nr.call(de,"constructor")&&de.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&hn.call(Oe)==gi}function So(N){return typeof N=="symbol"||ao(N)&&vr.call(N)==B}var Ko=R?je(R):jn;function Ul(N){return Ll(N,Gl(N))}function ba(N){return N==null?"":Ps(N)}function Vl(N,de,Oe){var tt=N==null?r:Sl(N,de);return tt===r?Oe:tt}function $l(N,de){return N!=null&&dr(N,de,Tl)}function li(N){return Wo(N)?Ts(N):Wa(N)}function Gl(N){return Wo(N)?Ts(N,!0):Il(N)}var Du=Ol(function(N,de,Oe){Za(N,de,Oe)});function wa(N){return N}function qo(N){return ga(typeof N=="function"?N:bo(N,!0))}function ar(N){return wo(N)?z(Eo(N)):kl(N)}function qa(){return[]}function Co(){return!1}Vt.compact=Pi,Vt.iteratee=qo,Vt.keys=li,Vt.keysIn=Gl,Vt.memoize=Ya,Vt.merge=Du,Vt.property=ar,Vt.toPlainObject=Ul,Vt.clone=ju,Vt.eq=ki,Vt.forEach=Nl,Vt.get=Vl,Vt.hasIn=$l,Vt.identity=wa,Vt.isArguments=oo,Vt.isArray=$r,Vt.isArrayLike=Wo,Vt.isArrayLikeObject=_a,Vt.isBuffer=Os,Vt.isEmpty=Ka,Vt.isFunction=Zo,Vt.isLength=Xo,Vt.isObject=vi,Vt.isObjectLike=ao,Vt.isPlainObject=Yo,Vt.isSymbol=So,Vt.isTypedArray=Ko,Vt.stubArray=qa,Vt.stubFalse=Co,Vt.toString=ba,Vt.each=Nl,Vt.VERSION=l,wn&&((wn.exports=Vt)._=Vt,An._=Vt)}).call(Xs)})(my,my.exports);var wk=Ep;function Ep(e,t){var r=e&&e.type,l;if(r==="FeatureCollection")for(l=0;l<e.features.length;l++)Ep(e.features[l],t);else if(r==="GeometryCollection")for(l=0;l<e.geometries.length;l++)Ep(e.geometries[l],t);else if(r==="Feature")Ep(e.geometry,t);else if(r==="Polygon")yw(e.coordinates,t);else if(r==="MultiPolygon")for(l=0;l<e.coordinates.length;l++)yw(e.coordinates[l],t);return e}function yw(e,t){if(e.length!==0){vw(e[0],t);for(var r=1;r<e.length;r++)vw(e[r],!t)}}function vw(e,t){for(var r=0,l=0,c=0,f=e.length,g=f-1;c<f;g=c++){var s=(e[c][0]-e[g][0])*(e[g][1]+e[c][1]),_=r+s;l+=Math.abs(r)>=Math.abs(s)?r-_+s:s-_+r,r=_}r+l>=0!=!!t&&e.reverse()}var Ek=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}],Sk=Ek,Rn=my.exports,rp=wk,Sp={};Sk.forEach(function(e){if(e.polygon==="all")Sp[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",r={};e.values.forEach(function(l){r[l]=!0}),Sp[e.key]={},Sp[e.key][t]=r}});function Ck(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Rn.merge(e,t)}var Tm={};Tm=function(e,t,r){t=Rn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Sp,deduplicator:Ck},t);var l;return typeof XMLDocument!="undefined"&&e instanceof XMLDocument||typeof XMLDocument=="undefined"&&e.childNodes?l=f(e):l=c(e),l;function c(_){var E=new Array,C=new Array,S=new Array;function I(W){var F=Rn.clone(W);F.lat=W.center.lat,F.lon=W.center.lon,F.__is_center_placeholder=!0,E.push(F)}function D(W){var F=Rn.clone(W);F.nodes=[];function w(k,B,q){var K={type:"node",id:"_"+F.type+"/"+F.id+"bounds"+q,lat:k,lon:B};F.nodes.push(K.id),E.push(K)}w(F.bounds.minlat,F.bounds.minlon,1),w(F.bounds.maxlat,F.bounds.minlon,2),w(F.bounds.maxlat,F.bounds.maxlon,3),w(F.bounds.minlat,F.bounds.maxlon,4),F.nodes.push(F.nodes[0]),F.__is_bounds_placeholder=!0,C.push(F)}function J(W){function F(w,k,B){var q={type:"node",id:B,lat:w,lon:k};E.push(q)}Rn.isArray(W.nodes)||(W.nodes=W.geometry.map(function(w){return w!==null?"_anonymous@"+w.lat+"/"+w.lon:"_anonymous@unknown_location"})),W.geometry.forEach(function(w,k){w&&F(w.lat,w.lon,W.nodes[k])})}function X(W){function F(k,B,q){var K={type:"node",id:q,lat:k,lon:B};E.push(K)}function w(k,B){if(C.some(function(fe){return fe.type=="way"&&fe.id==B}))return;var q={type:"way",id:B,nodes:[]};function K(fe,ge){var xe={type:"node",id:"_anonymous@"+fe+"/"+ge,lat:fe,lon:ge};q.nodes.push(xe.id),E.push(xe)}k.forEach(function(fe){fe?K(fe.lat,fe.lon):q.nodes.push(void 0)}),C.push(q)}W.members.forEach(function(k,B){k.type=="node"?k.lat&&F(k.lat,k.lon,k.ref):k.type=="way"&&k.geometry&&(k.ref="_fullGeom"+k.ref,w(k.geometry,k.ref))})}for(var G=0;G<_.elements.length;G++)switch(_.elements[G].type){case"node":var U=_.elements[G];E.push(U);break;case"way":var H=Rn.clone(_.elements[G]);H.nodes=Rn.clone(H.nodes),C.push(H),H.center&&I(H),H.geometry?J(H):H.bounds&&D(H);break;case"relation":var $=Rn.clone(_.elements[G]);$.members=Rn.clone($.members),S.push($);var ne=$.members&&$.members.some(function(W){return W.type=="node"&&W.lat||W.type=="way"&&W.geometry&&W.geometry.length>0});$.center&&I($),ne?X($):$.bounds&&D($);break}return g(E,C,S)}function f(_){var E=new Array,C=new Array,S=new Array;function I($,ne,W){$.hasAttribute(W)&&(ne[W]=$.getAttribute(W))}function D($,ne){var W=Rn.clone($);I(ne,W,"lat"),I(ne,W,"lon"),W.__is_center_placeholder=!0,E.push(W)}function J($,ne){var W=Rn.clone($);W.nodes=[];function F(w,k,B){var q={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+B,lat:w,lon:k};W.nodes.push(q.id),E.push(q)}F(ne.getAttribute("minlat"),ne.getAttribute("minlon"),1),F(ne.getAttribute("maxlat"),ne.getAttribute("minlon"),2),F(ne.getAttribute("maxlat"),ne.getAttribute("maxlon"),3),F(ne.getAttribute("minlat"),ne.getAttribute("maxlon"),4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,C.push(W)}function X($,ne){function W(F,w,k){var B={type:"node",id:k,lat:F,lon:w};return E.push(B),B.id}Rn.isArray($.nodes)||($.nodes=[],Rn.each(ne,function(F,w){$.nodes.push("_anonymous@"+F.getAttribute("lat")+"/"+F.getAttribute("lon"))})),Rn.each(ne,function(F,w){F.getAttribute("lat")&&W(F.getAttribute("lat"),F.getAttribute("lon"),$.nodes[w])})}function G($,ne){function W(w,k,B){var q={type:"node",id:B,lat:w,lon:k};E.push(q)}function F(w,k){if(C.some(function(K){return K.type=="way"&&K.id==k}))return;var B={type:"way",id:k,nodes:[]};function q(K,fe){var ge={type:"node",id:"_anonymous@"+K+"/"+fe,lat:K,lon:fe};B.nodes.push(ge.id),E.push(ge)}Rn.each(w,function(K){K.getAttribute("lat")?q(K.getAttribute("lat"),K.getAttribute("lon")):B.nodes.push(void 0)}),C.push(B)}Rn.each(ne,function(w,k){$.members[k].type=="node"?w.getAttribute("lat")&&W(w.getAttribute("lat"),w.getAttribute("lon"),$.members[k].ref):$.members[k].type=="way"&&w.getElementsByTagName("nd").length>0&&($.members[k].ref="_fullGeom"+$.members[k].ref,F(w.getElementsByTagName("nd"),$.members[k].ref))})}Rn.each(_.getElementsByTagName("node"),function($,ne){var W={};Rn.each($.getElementsByTagName("tag"),function(w){W[w.getAttribute("k")]=w.getAttribute("v")});var F={type:"node"};I($,F,"id"),I($,F,"lat"),I($,F,"lon"),I($,F,"version"),I($,F,"timestamp"),I($,F,"changeset"),I($,F,"uid"),I($,F,"user"),Rn.isEmpty(W)||(F.tags=W),E.push(F)});var U,H;return Rn.each(_.getElementsByTagName("way"),function($,ne){var W={},F=[];Rn.each($.getElementsByTagName("tag"),function(B){W[B.getAttribute("k")]=B.getAttribute("v")});var w=!1;Rn.each($.getElementsByTagName("nd"),function(B,q){var K;(K=B.getAttribute("ref"))&&(F[q]=K),!w&&B.getAttribute("lat")&&(w=!0)});var k={type:"way"};I($,k,"id"),I($,k,"version"),I($,k,"timestamp"),I($,k,"changeset"),I($,k,"uid"),I($,k,"user"),F.length>0&&(k.nodes=F),Rn.isEmpty(W)||(k.tags=W),(U=$.getElementsByTagName("center")[0])&&D(k,U),w?X(k,$.getElementsByTagName("nd")):(H=$.getElementsByTagName("bounds")[0])&&J(k,H),C.push(k)}),Rn.each(_.getElementsByTagName("relation"),function($,ne){var W={},F=[];Rn.each($.getElementsByTagName("tag"),function(B){W[B.getAttribute("k")]=B.getAttribute("v")});var w=!1;Rn.each($.getElementsByTagName("member"),function(B,q){F[q]={},I(B,F[q],"ref"),I(B,F[q],"role"),I(B,F[q],"type"),(!w&&F[q].type=="node"&&B.getAttribute("lat")||F[q].type=="way"&&B.getElementsByTagName("nd").length>0)&&(w=!0)});var k={type:"relation"};I($,k,"id"),I($,k,"version"),I($,k,"timestamp"),I($,k,"changeset"),I($,k,"uid"),I($,k,"user"),F.length>0&&(k.members=F),Rn.isEmpty(W)||(k.tags=W),(U=$.getElementsByTagName("center")[0])&&D(k,U),w?G(k,$.getElementsByTagName("member")):(H=$.getElementsByTagName("bounds")[0])&&J(k,H),S.push(k)}),g(E,C,S)}function g(_,E,C){function S(Pe,De){if(typeof De!="object"&&(De={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Pe,De);for(var Ue in Pe)if(t.uninterestingTags[Ue]!==!0&&!(De[Ue]===!0||De[Ue]===Pe[Ue]))return!0;return!1}function I(Pe){var De={timestamp:Pe.timestamp,version:Pe.version,changeset:Pe.changeset,user:Pe.user,uid:Pe.uid};for(var Ue in De)De[Ue]===void 0&&delete De[Ue];return De}for(var D=new Object,J=new Object,X=0;X<_.length;X++){var G=_[X];D[G.id]!==void 0&&(G=t.deduplicator(G,D[G.id])),D[G.id]=G,typeof G.tags!="undefined"&&S(G.tags)&&(J[G.id]=!0)}for(var X=0;X<C.length;X++)if(Rn.isArray(C[X].members))for(var U=0;U<C[X].members.length;U++)C[X].members[U].type=="node"&&(J[C[X].members[U].ref]=!0);for(var H=new Object,$=new Object,X=0;X<E.length;X++){var ne=E[X];if(H[ne.id]&&(ne=t.deduplicator(ne,H[ne.id])),H[ne.id]=ne,Rn.isArray(ne.nodes))for(var U=0;U<ne.nodes.length;U++)typeof ne.nodes[U]!="object"&&($[ne.nodes[U]]=!0,ne.nodes[U]=D[ne.nodes[U]])}var W=new Array;for(var F in D){var G=D[F];(!$[F]||J[F])&&W.push(G)}for(var w=new Array,X=0;X<C.length;X++){var k=C[X];w[k.id]&&(k=t.deduplicator(k,w[k.id])),w[k.id]=k}var B={node:{},way:{},relation:{}};for(var F in w){var k=w[F];if(!Rn.isArray(k.members)){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"ignored because it has no members");continue}for(var U=0;U<k.members.length;U++){var q=k.members[U].type,K=k.members[U].ref;if(typeof K!="number"&&(K=K.replace("_fullGeom","")),!B[q]){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"member",q+"/"+K,"ignored because it has an invalid type");continue}typeof B[q][K]=="undefined"&&(B[q][K]=[]),B[q][K].push({role:k.members[U].role,rel:k.id,reltags:k.tags})}}var fe,ge=[];for(X=0;X<W.length;X++){if(typeof W[X].lon=="undefined"||typeof W[X].lat=="undefined"){t.verbose&&console.warn("POI",W[X].type+"/"+W[X].id,"ignored because it lacks coordinates");continue}var xe={type:"Feature",id:W[X].type+"/"+W[X].id,properties:{type:W[X].type,id:W[X].id,tags:W[X].tags||{},relations:B.node[W[X].id]||[],meta:I(W[X])},geometry:{type:"Point",coordinates:[+W[X].lon,+W[X].lat]}};W[X].__is_center_placeholder&&(xe.properties.geometry="center"),r?r(xe):ge.push(xe)}for(var ee=[],re=[],X=0;X<C.length;X++)if(w[C[X].id]===C[X]){if(typeof C[X].tags!="undefined"&&(C[X].tags.type=="route"||C[X].tags.type=="waterway")){let De=function(Ue){var qe=!1,ot;ot=Ue.members.filter(function(Et){return Et.type==="way"}),ot=ot.map(function(Et){var Nt=H[Et.ref];if(Nt===void 0||Nt.nodes===void 0){t.verbose&&console.warn("Route "+Ue.type+"/"+Ue.id,"tainted by a missing or incomplete  way",Et.type+"/"+Et.ref),qe=!0;return}return{id:Et.ref,role:Et.role,way:Nt,nodes:Nt.nodes.filter(function(Bt){return Bt!==void 0?!0:(qe=!0,t.verbose&&console.warn("Route",Ue.type+"/"+Ue.id,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),ot=Rn.compact(ot);var dt;dt=Og(ot);var Pt=[];if(Pt=Rn.compact(dt.map(function(Et){return Rn.compact(Et.map(function(Nt){return[+Nt.lon,+Nt.lat]}))})),Pt.length==0)return t.verbose&&console.warn("Route",Ue.type+"/"+Ue.id,"contains no coordinates"),!1;var ht={type:"Feature",id:Ue.type+"/"+Ue.id,properties:{type:Ue.type,id:Ue.id,tags:Ue.tags||{},relations:B[Ue.type][Ue.id]||[],meta:I(Ue)},geometry:{type:Pt.length===1?"LineString":"MultiLineString",coordinates:Pt.length===1?Pt[0]:Pt}};return qe&&(t.verbose&&console.warn("Route",Ue.type+"/"+Ue.id,"is tainted"),ht.properties.tainted=!0),ht};var ke=De;if(!Rn.isArray(C[X].members)){t.verbose&&console.warn("Route",C[X].type+"/"+C[X].id,"ignored because it has no members");continue}if(C[X].members.forEach(function(Ue){H[Ue.ref]&&!S(H[Ue.ref].tags)&&(H[Ue.ref].is_skippablerelationmember=!0)}),xe=De(C[X]),xe===!1){t.verbose&&console.warn("Route relation",C[X].type+"/"+C[X].id,"ignored because it has invalid geometry");continue}r?r(rp(xe)):re.push(xe)}if(typeof C[X].tags!="undefined"&&(C[X].tags.type=="multipolygon"||C[X].tags.type=="boundary")){let Ue=function(qe,ot){var dt=!1,Pt=le?"way":"relation",ht=typeof qe.id=="number"?qe.id:+qe.id.replace("_fullGeom",""),Et;Et=ot.members.filter(function(O){return O.type==="way"}),Et=Et.map(function(O){var pe=H[O.ref];if(pe===void 0||pe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a missing or incomplete way",O.type+"/"+O.ref),dt=!0;return}return{id:O.ref,role:O.role||"outer",way:pe,nodes:pe.nodes.filter(function(Le){return Le!==void 0?!0:(dt=!0,t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"tainted by a way",O.type+"/"+O.ref,"with a missing node"),!1)})}}),Et=Rn.compact(Et);var Nt,Bt;Nt=Og(Et.filter(function(O){return O.role==="outer"})),Bt=Og(Et.filter(function(O){return O.role==="inner"}));var cn;function An(O){var pe=function(T,z){for(var be=0;be<z.length;be++)if(Ke(z[be],T))return!0;return!1},Le=function(T){return T.map(function(z){return[+z.lat,+z.lon]})},Ke=function(T,z){for(var be=T[0],je=T[1],Xe=!1,Qe=0,Ht=z.length-1;Qe<z.length;Ht=Qe++){var Cn=z[Qe][0],fn=z[Qe][1],ft=z[Ht][0],Mt=z[Ht][1],un=fn>je!=Mt>je&&be<(ft-Cn)*(je-fn)/(Mt-fn)+Cn;un&&(Xe=!Xe)}return Xe},at,se;for(O=Le(O),at=0;at<Nt.length;at++)if(se=Le(Nt[at]),pe(se,O))return at}cn=Nt.map(function(O){return[O]});for(var wn=0;wn<Bt.length;wn++){var on=An(Bt[wn]);on!==void 0?cn[on].push(Bt[wn]):t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an inner ring with no containing outer")}var En=[];if(En=Rn.compact(cn.map(function(O){var pe=Rn.compact(O.map(function(Le){if(Le.length<4){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains a ring with less than four nodes");return}return Rn.compact(Le.map(function(Ke){return[+Ke.lon,+Ke.lat]}))}));if(pe.length==0){t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains an empty ring cluster");return}return pe})),En.length==0)return t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"contains no coordinates"),!1;var we="MultiPolygon";En.length===1&&(we="Polygon",En=En[0]);var R={type:"Feature",id:qe.type+"/"+ht,properties:{type:qe.type,id:ht,tags:qe.tags||{},relations:B[qe.type][qe.id]||[],meta:I(qe)},geometry:{type:we,coordinates:En}};return dt&&(t.verbose&&console.warn("Multipolygon",Pt+"/"+ht,"is tainted"),R.properties.tainted=!0),R};var Te=Ue;if(!Rn.isArray(C[X].members)){t.verbose&&console.warn("Multipolygon",C[X].type+"/"+C[X].id,"ignored because it has no members");continue}for(var ie=0,U=0;U<C[X].members.length;U++)C[X].members[U].role=="outer"?ie++:t.verbose&&C[X].members[U].role!="inner"&&console.warn("Multipolygon",C[X].type+"/"+C[X].id,"member",C[X].members[U].type+"/"+C[X].members[U].ref,'ignored because it has an invalid role: "'+C[X].members[U].role+'"');if(C[X].members.forEach(function(qe){H[qe.ref]&&(qe.role==="outer"&&!S(H[qe.ref].tags,C[X].tags)&&(H[qe.ref].is_skippablerelationmember=!0),qe.role==="inner"&&!S(H[qe.ref].tags)&&(H[qe.ref].is_skippablerelationmember=!0))}),ie==0){t.verbose&&console.warn("Multipolygon relation",C[X].type+"/"+C[X].id,"ignored because it has no outer ways");continue}var le=!1;ie==1&&!S(C[X].tags,{type:!0})&&(le=!0);var xe=null;if(!le)xe=Ue(C[X],C[X]);else{var _e=C[X].members.filter(function(qe){return qe.role==="outer"})[0];if(_e=H[_e.ref],_e===void 0){t.verbose&&console.warn("Multipolygon relation",C[X].type+"/"+C[X].id,"ignored because outer way",_e.type+"/"+_e.ref,"is missing");continue}_e.is_skippablerelationmember=!0,xe=Ue(_e,C[X])}if(xe===!1){t.verbose&&console.warn("Multipolygon relation",C[X].type+"/"+C[X].id,"ignored because it has invalid geometry");continue}r?r(rp(xe)):re.push(xe)}}for(var X=0;X<E.length;X++)if(H[E[X].id]===E[X]){if(!Rn.isArray(E[X].nodes)){t.verbose&&console.warn("Way",E[X].type+"/"+E[X].id,"ignored because it has no nodes");continue}if(!E[X].is_skippablerelationmember){typeof E[X].id!="number"&&(E[X].id=+E[X].id.replace("_fullGeom","")),E[X].tainted=!1,E[X].hidden=!1;var Ie=new Array;for(U=0;U<E[X].nodes.length;U++)typeof E[X].nodes[U]=="object"?Ie.push([+E[X].nodes[U].lon,+E[X].nodes[U].lat]):(t.verbose&&console.warn("Way",E[X].type+"/"+E[X].id,"is tainted by an invalid node"),E[X].tainted=!0);if(Ie.length<=1){t.verbose&&console.warn("Way",E[X].type+"/"+E[X].id,"ignored because it contains too few nodes");continue}var ce="LineString";typeof E[X].nodes[0]!="undefined"&&typeof E[X].nodes[E[X].nodes.length-1]!="undefined"&&E[X].nodes[0].id===E[X].nodes[E[X].nodes.length-1].id&&(typeof E[X].tags!="undefined"&&s(E[X].tags)||E[X].__is_bounds_placeholder)&&(ce="Polygon",Ie=[Ie]);var xe={type:"Feature",id:E[X].type+"/"+E[X].id,properties:{type:E[X].type,id:E[X].id,tags:E[X].tags||{},relations:B.way[E[X].id]||[],meta:I(E[X])},geometry:{type:ce,coordinates:Ie}};E[X].tainted&&(t.verbose&&console.warn("Way",E[X].type+"/"+E[X].id,"is tainted"),xe.properties.tainted=!0),E[X].__is_bounds_placeholder&&(xe.properties.geometry="bounds"),r?r(rp(xe)):ce=="LineString"?ee.push(xe):re.push(xe)}}return r?!0:(fe={type:"FeatureCollection",features:[]},fe.features=fe.features.concat(re),fe.features=fe.features.concat(ee),fe.features=fe.features.concat(ge),t.flatProperties&&fe.features.forEach(function(Pe){Pe.properties=Rn.merge(Pe.properties.meta,Pe.properties.tags,{id:Pe.properties.type+"/"+Pe.properties.id})}),fe=rp(fe),fe)}function s(_){var E=t.polygonFeatures;if(typeof E=="function")return E(_);if(_.area==="no")return!1;for(var C in _){var S=_[C],I=E[C];if(typeof I!="undefined"&&S!=="no"&&(I===!0||I.included_values&&I.included_values[S]===!0||I.excluded_values&&I.excluded_values[S]!==!0))return!0}return!1}};function Og(e){for(var t=function(S){return S[0]},r=function(S){return S[S.length-1]},l=function(S,I){return S!==void 0&&I!==void 0&&S.id===I.id},c=[],f,g,s,_,E,C;e.length;)for(f=e.pop().nodes.slice(),c.push(f);e.length&&!l(t(f),r(f));){for(g=t(f),s=r(f),_=0;_<e.length;_++)if(C=e[_].nodes,l(s,t(C))){E=f.push,C=C.slice(1);break}else if(l(s,r(C))){E=f.push,C=C.slice(0,-1).reverse();break}else if(l(g,r(C))){E=f.unshift,C=C.slice(0,-1);break}else if(l(g,t(C))){E=f.unshift,C=C.slice(1).reverse();break}else C=E=null;if(!C)break;e.splice(_,1),E.apply(f,C)}return c}Tm.toGeojson=Tm;var Tk=Tm;const Rg={type:"FeatureCollection",features:[]},y6=()=>{const[e,t]=yt.exports.useState(!1),r=yt.exports.useCallback(async(g,s,_)=>{var X,G;if(e||(console.log(_),_<16))return Rg;t(!0);let E=300;_>17&&(E=200),_>18&&(E=100),_>19&&(E=50),console.log("overpass: loading...");let C="[out:json]";C+=`[timeout:25];
`,C+='nwr["building"]',C+=`(around:${E},${g},${s});
`,C+="out meta geom;",console.log(C);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(S.status!==200)return t(!1),Rg;const I=await S.json();console.log("overpass json elements: ",I.elements);const D=Tk(I);console.log("overpass osmtogeojson raw: ",D);for await(const U of D.features){if(!U.properties)continue;U.id=U.properties.id.split("/")[1];const H=(X=I.elements.filter(ne=>U.id?typeof U.id=="number"?ne.id===U.id:ne.id===parseInt(U.id):!1))==null?void 0:X[0];if(H&&(U.properties.tags=H.tags,U.properties.nodes=H.nodes),U.geometry.type==="Polygon"){const ne=dk(U.geometry.coordinates);var J=vk(ne);U.properties.center=J.geometry.coordinates}U.geometry.type==="Point"&&(U.properties.center=U.geometry.coordinates);const $=U.properties.uid;if($){let ne=localStorage.getItem($+"-icon");if(ne===null){const W=await Ro.exports.getUser($);(G=W.img)!=null&&G.href?(ne=W.img.href,localStorage.setItem($+"-icon",W.img.href)):localStorage.setItem($+"-icon","")}U.properties.userIconHref=ne||""}}return console.log("overpass osmtogeojson converted: ",D),console.log("overpass: loaded."),t(!1),D},[]),[l,c]=yt.exports.useState(!1),f=yt.exports.useCallback(async g=>{console.log("overpass: loading...",g),c(!0);const s=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(s);const _=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(s)}`,{});if(_.status!==200){c(!1);return}const E=await _.json();console.log("overpass json parent elements: ",E.elements);const C=250,S=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${C});
      out;
      `;console.log(S);const I=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(S)}`,{});if(I.status!==200){c(!1);return}const D=await I.json();console.log("overpass json child elements: ",D.elements);const J=`
      [out:json]
      [timeout:25];
      node(id:${g.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${C});
      out;
      `;console.log(J);const X=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(J)}`,{});if(X.status!==200){c(!1);return}const G=await X.json();return console.log("overpass json neighbour elements: ",G.elements),c(!1),[...E.elements,...D.elements,...G.elements]},[]);return{fetchOverpassBuildings:r,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:l}},Ak=()=>Hn("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[Rt("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),Rt("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),Hn("datalist",{id:"source-list",children:[Rt("option",{value:"survey"}),Rt("option",{value:"local knowledge"}),Rt("option",{value:"extrapolation"}),Rt("option",{value:"estimation from existing data"})]})]}),Fg={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},Ik=({feature:e,onCancel:t,onSubmit:r})=>{var fe,ge,xe,ee;const{detectCountry:l,loadingCountry:c}=xk(),{fetchOverpassAdmin:f,loadingOverpassAdmin:g}=y6(),s=JSON.parse((fe=e.properties)==null?void 0:fe.center),[_,E]=yt.exports.useState(void 0),[C,S]=yt.exports.useState(),[I,D]=yt.exports.useState(e),[J,X]=yt.exports.useState(!1),[G,U]=yt.exports.useState(!1),[H,$]=yt.exports.useState(!1),[ne,W]=yt.exports.useState(),[F,w]=yt.exports.useState();yt.exports.useEffect(()=>{X(Ro.exports.isLoggedIn())},[]),yt.exports.useEffect(()=>{(async()=>{var ie,le;const re=await l(s[0],s[1]);if(E(re),((ie=re==null?void 0:re.properties)==null?void 0:ie.ISO_A3)&&pw[re.properties.ISO_A3]){const _e=pw[re.properties.ISO_A3];S(_e);const Ie=_e.defaultComment+" "+((le=e.properties)==null?void 0:le.id);w(Ie)}})()},[e]),yt.exports.useEffect(()=>{console.log(I.properties)},[I]);const k=yt.exports.useCallback(async()=>{const re=await n4.openReverseGeocoder([s[0],s[1]]);D(ie=>{const le={properties:{"addr:province":re.prefecture,"addr:city":re.city,...ie.properties}};return{...ie,...le}})},[]),B=yt.exports.useCallback(async()=>{if(!I.properties)return;I.properties.nodes;const re=await f(JSON.parse(I.properties.nodes));console.log("onOverpassReverseGeocode",re),W(re)},[I]),q=yt.exports.useCallback(async re=>{var Te,Pe,De;$(!0),re.preventDefault();const ie=new FormData(re.currentTarget),le=JSON.parse((Te=e.properties)==null?void 0:Te.tags);ie.forEach((Ue,qe)=>{typeof Ue=="string"&&Ue.length>0&&qe!=="comment"&&qe!=="source"&&(le[qe]=Ue)});const _e={type:"way",id:e.id,version:(Pe=e.properties)==null?void 0:Pe.version,tags:le,nodes:JSON.parse((De=e.properties)==null?void 0:De.nodes)};console.info(JSON.stringify(_e,null,2));const Ie={create:[],modify:[_e],delete:[]},ce=ie.get("comment");ce&&(Fg.comment=ce.toString());const ke=ie.get("source");ke&&(Fg.source=ke.toString()),await Ro.exports.uploadChangeset(Fg,Ie),$(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),r()},[e]),K=yt.exports.useCallback(()=>{U(!0)},[]);return I.properties?Hn("div",{children:[Hn("div",{children:["OSM:"," ",Rt("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+I.properties.id,target:"_blank",children:I.properties.id})," | ",Rt(Q3,{feature:I}),C&&Hn("span",{children:[" | ","Address:"," ",Rt(_k,{feature:I,fields:C})]})]}),c?Rt(Ba,{icon:j1,spin:!0}):Rt(ha,{children:C?Hn("form",{onSubmit:q,children:[Rt("div",{className:"flex flex-wrap",children:Rt(Lg,{feature:I,fieldOption:C.postcodeField,onChange:K})}),Rt("div",{className:"flex flex-wrap",children:C.mainFields.map(re=>Rt(Lg,{feature:I,fieldOption:re,onChange:K,suggestList:ne},re.key))}),Rt("div",{className:"flex flex-wrap",children:C.detailFields.map(re=>Rt(Lg,{feature:I,fieldOption:re,onChange:K},re.key))}),Hn("div",{className:"flex flex-wrap",children:[Rt(Ak,{}),Rt(bk,{defaultValue:F})]}),Rt("div",{className:"flex flex-wrap",children:Hn("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[Rt("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ge=_==null?void 0:_.properties)==null?void 0:ge.ISO_A3)==="JPN"&&Rt("button",{type:"button",onClick:k,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),Hn("button",{type:"button",disabled:g,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",g&&Rt(Ba,{icon:j1,spin:!0})]}),Rt("button",{disabled:!J||H||!G,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!J&&Hn(ha,{children:[Rt("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),Rt(J3,{})]})]})})]}):Rt("div",{className:"flex flex-wrap",children:Hn("div",{className:"w-full mb-6 md:mb-0",children:[Hn("div",{className:"py-2",children:[Hn("p",{children:["Sorry, Address editor in this country"," ",(xe=_==null?void 0:_.properties)==null?void 0:xe.NAME," (ISO code:",(ee=_==null?void 0:_.properties)==null?void 0:ee.ISO_A3,") does not support yet."]}),Rt("p",{children:Rt("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),Rt("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function Pk(e,t){const[r,l]=yt.exports.useState(e);return yt.exports.useEffect(()=>{const c=setTimeout(()=>{l(e)},t);return()=>{clearTimeout(c)}},[e,t]),r}const kk={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"\xA9 OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},Mk={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function zk(){const e=yt.exports.useRef(null),[t,r]=yt.exports.useState(),l=Pk(t,2500),c=yt.exports.useRef(null),[f,g]=yt.exports.useState({type:"FeatureCollection",features:[]}),[s,_]=yt.exports.useState("auto"),[E,C]=yt.exports.useState(),[S,I]=yt.exports.useState([]),{fetchOverpassBuildings:D,loadingOverpass:J}=y6();yt.exports.useEffect(()=>{setTimeout(()=>{var w;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(w=c.current)==null||w.trigger())},500)},[]);const X=yt.exports.useCallback(w=>{const k=w.target.getCenter(),B=w.target.getZoom();r({zoom:B,latitude:k.lat,longitude:k.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),G=yt.exports.useCallback(w=>{r(w.viewState)},[]),U=yt.exports.useCallback(w=>{r(w.viewState)},[]);yt.exports.useEffect(()=>{(async()=>{if(!l)return;const w=l,k=await D(w.latitude,w.longitude,w.zoom);g(k)})()},[l]);const H=yt.exports.useCallback(w=>{var fe;_("pointer");const{features:k,point:{x:B,y:q}}=w,K=k&&k[0];K?((fe=e.current)==null||fe.setFeatureState({source:"buildings-source",id:K.id},{hover:!0}),C({feature:K,x:B,y:q})):C(void 0)},[]),$=yt.exports.useCallback(w=>{var k;_("auto"),(k=e.current)==null||k.querySourceFeatures("buildings-source").map(B=>{var q;(q=e.current)==null||q.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),C(void 0)},[]),ne=yt.exports.useCallback(w=>{var B;W();const k=w.features&&w.features[0];!k||((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:k.id},{select:!0}),I([k]))},[]),W=yt.exports.useCallback(()=>{var w;(w=e.current)==null||w.querySourceFeatures("buildings-source").map(k=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:k.id},{select:!1})}),I([])},[]),F=yt.exports.useMemo(()=>{let w=25;return t&&(w=t.zoom<18?20:t.zoom<19?25:35),f.features.map((k,B)=>!k.properties||!k.properties.center?null:Rt(z7,{style:{cursor:"pointer"},longitude:k.properties.center[0],latitude:k.properties.center[1],anchor:"center",children:Rt(_A,{feature:k,size:w})},`marker-${B}`))},[f,t]);return Hn("div",{children:[Rt(eA,{}),Rt("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:Rt(EA,{viewState:t})}),Hn("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[S.length>0&&Rt("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:Rt("div",{style:{padding:"10px"},children:S.map(w=>Rt(Ik,{feature:w,onCancel:W,onSubmit:W},w.id))})}),Hn(pv,{ref:e,...t,onMove:G,onMoveEnd:U,onLoad:X,interactiveLayerIds:["buildings-layer-fill"],onClick:ne,onMouseEnter:H,onMouseLeave:$,dragRotate:!1,boxZoom:!1,hash:!0,cursor:s,mapLib:h3,style:{width:"100%",height:"100%"},mapStyle:kk,children:[Rt($7,{id:"buildings-source",type:"geojson",data:f,children:Rt(Z7,{...Mk})}),Rt(j7,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),Rt(F7,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),Rt("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||(t==null?void 0:t.zoom)&&t.zoom<16?Rt(Ba,{size:"2x",icon:ZT}):J?Rt(Ba,{size:"2x",icon:j1,spin:!0}):Rt(Ba,{size:"2x",icon:XT})}),F,E&&Hn("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[Rt(Q3,{feature:E.feature}),Rt("br",{}),Rt(bA,{feature:E.feature}),Rt(tA,{feature:E.feature})]})]})]})]})}var v6={},n0={};n0.byteLength=Rk;n0.toByteArray=Bk;n0.fromByteArray=Nk;var ka=[],Mo=[],Lk=typeof Uint8Array!="undefined"?Uint8Array:Array,Bg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var cc=0,Ok=Bg.length;cc<Ok;++cc)ka[cc]=Bg[cc],Mo[Bg.charCodeAt(cc)]=cc;Mo["-".charCodeAt(0)]=62;Mo["_".charCodeAt(0)]=63;function x6(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var l=r===t?0:4-r%4;return[r,l]}function Rk(e){var t=x6(e),r=t[0],l=t[1];return(r+l)*3/4-l}function Fk(e,t,r){return(t+r)*3/4-r}function Bk(e){var t,r=x6(e),l=r[0],c=r[1],f=new Lk(Fk(e,l,c)),g=0,s=c>0?l-4:l,_;for(_=0;_<s;_+=4)t=Mo[e.charCodeAt(_)]<<18|Mo[e.charCodeAt(_+1)]<<12|Mo[e.charCodeAt(_+2)]<<6|Mo[e.charCodeAt(_+3)],f[g++]=t>>16&255,f[g++]=t>>8&255,f[g++]=t&255;return c===2&&(t=Mo[e.charCodeAt(_)]<<2|Mo[e.charCodeAt(_+1)]>>4,f[g++]=t&255),c===1&&(t=Mo[e.charCodeAt(_)]<<10|Mo[e.charCodeAt(_+1)]<<4|Mo[e.charCodeAt(_+2)]>>2,f[g++]=t>>8&255,f[g++]=t&255),f}function jk(e){return ka[e>>18&63]+ka[e>>12&63]+ka[e>>6&63]+ka[e&63]}function Dk(e,t,r){for(var l,c=[],f=t;f<r;f+=3)l=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),c.push(jk(l));return c.join("")}function Nk(e){for(var t,r=e.length,l=r%3,c=[],f=16383,g=0,s=r-l;g<s;g+=f)c.push(Dk(e,g,g+f>s?s:g+f));return l===1?(t=e[r-1],c.push(ka[t>>2]+ka[t<<4&63]+"==")):l===2&&(t=(e[r-2]<<8)+e[r-1],c.push(ka[t>>10]+ka[t>>4&63]+ka[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=n0,r=qm,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=H,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,s.TYPED_ARRAY_SUPPORT=f(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const se=new Uint8Array(1),T={foo:function(){return 42}};return Object.setPrototypeOf(T,Uint8Array.prototype),Object.setPrototypeOf(se,T),se.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function g(se){if(se>c)throw new RangeError('The value "'+se+'" is invalid for option "size"');const T=new Uint8Array(se);return Object.setPrototypeOf(T,s.prototype),T}function s(se,T,z){if(typeof se=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(se)}return _(se,T,z)}s.poolSize=8192;function _(se,T,z){if(typeof se=="string")return I(se,T);if(ArrayBuffer.isView(se))return J(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(O(se,ArrayBuffer)||se&&O(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(O(se,SharedArrayBuffer)||se&&O(se.buffer,SharedArrayBuffer)))return X(se,T,z);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=se.valueOf&&se.valueOf();if(be!=null&&be!==se)return s.from(be,T,z);const je=G(se);if(je)return je;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return s.from(se[Symbol.toPrimitive]("string"),T,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}s.from=function(se,T,z){return _(se,T,z)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function E(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function C(se,T,z){return E(se),se<=0?g(se):T!==void 0?typeof z=="string"?g(se).fill(T,z):g(se).fill(T):g(se)}s.alloc=function(se,T,z){return C(se,T,z)};function S(se){return E(se),g(se<0?0:U(se)|0)}s.allocUnsafe=function(se){return S(se)},s.allocUnsafeSlow=function(se){return S(se)};function I(se,T){if((typeof T!="string"||T==="")&&(T="utf8"),!s.isEncoding(T))throw new TypeError("Unknown encoding: "+T);const z=$(se,T)|0;let be=g(z);const je=be.write(se,T);return je!==z&&(be=be.slice(0,je)),be}function D(se){const T=se.length<0?0:U(se.length)|0,z=g(T);for(let be=0;be<T;be+=1)z[be]=se[be]&255;return z}function J(se){if(O(se,Uint8Array)){const T=new Uint8Array(se);return X(T.buffer,T.byteOffset,T.byteLength)}return D(se)}function X(se,T,z){if(T<0||se.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<T+(z||0))throw new RangeError('"length" is outside of buffer bounds');let be;return T===void 0&&z===void 0?be=new Uint8Array(se):z===void 0?be=new Uint8Array(se,T):be=new Uint8Array(se,T,z),Object.setPrototypeOf(be,s.prototype),be}function G(se){if(s.isBuffer(se)){const T=U(se.length)|0,z=g(T);return z.length===0||se.copy(z,0,0,T),z}if(se.length!==void 0)return typeof se.length!="number"||pe(se.length)?g(0):D(se);if(se.type==="Buffer"&&Array.isArray(se.data))return D(se.data)}function U(se){if(se>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return se|0}function H(se){return+se!=se&&(se=0),s.alloc(+se)}s.isBuffer=function(T){return T!=null&&T._isBuffer===!0&&T!==s.prototype},s.compare=function(T,z){if(O(T,Uint8Array)&&(T=s.from(T,T.offset,T.byteLength)),O(z,Uint8Array)&&(z=s.from(z,z.offset,z.byteLength)),!s.isBuffer(T)||!s.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(T===z)return 0;let be=T.length,je=z.length;for(let Xe=0,Qe=Math.min(be,je);Xe<Qe;++Xe)if(T[Xe]!==z[Xe]){be=T[Xe],je=z[Xe];break}return be<je?-1:je<be?1:0},s.isEncoding=function(T){switch(String(T).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(T,z){if(!Array.isArray(T))throw new TypeError('"list" argument must be an Array of Buffers');if(T.length===0)return s.alloc(0);let be;if(z===void 0)for(z=0,be=0;be<T.length;++be)z+=T[be].length;const je=s.allocUnsafe(z);let Xe=0;for(be=0;be<T.length;++be){let Qe=T[be];if(O(Qe,Uint8Array))Xe+Qe.length>je.length?(s.isBuffer(Qe)||(Qe=s.from(Qe)),Qe.copy(je,Xe)):Uint8Array.prototype.set.call(je,Qe,Xe);else if(s.isBuffer(Qe))Qe.copy(je,Xe);else throw new TypeError('"list" argument must be an Array of Buffers');Xe+=Qe.length}return je};function $(se,T){if(s.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||O(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const z=se.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&z===0)return 0;let je=!1;for(;;)switch(T){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return wn(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return we(se).length;default:if(je)return be?-1:wn(se).length;T=(""+T).toLowerCase(),je=!0}}s.byteLength=$;function ne(se,T,z){let be=!1;if((T===void 0||T<0)&&(T=0),T>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,T>>>=0,z<=T))return"";for(se||(se="utf8");;)switch(se){case"hex":return _e(this,T,z);case"utf8":case"utf-8":return xe(this,T,z);case"ascii":return ie(this,T,z);case"latin1":case"binary":return le(this,T,z);case"base64":return ge(this,T,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,T,z);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),be=!0}}s.prototype._isBuffer=!0;function W(se,T,z){const be=se[T];se[T]=se[z],se[z]=be}s.prototype.swap16=function(){const T=this.length;if(T%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<T;z+=2)W(this,z,z+1);return this},s.prototype.swap32=function(){const T=this.length;if(T%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<T;z+=4)W(this,z,z+3),W(this,z+1,z+2);return this},s.prototype.swap64=function(){const T=this.length;if(T%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<T;z+=8)W(this,z,z+7),W(this,z+1,z+6),W(this,z+2,z+5),W(this,z+3,z+4);return this},s.prototype.toString=function(){const T=this.length;return T===0?"":arguments.length===0?xe(this,0,T):ne.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(T){if(!s.isBuffer(T))throw new TypeError("Argument must be a Buffer");return this===T?!0:s.compare(this,T)===0},s.prototype.inspect=function(){let T="";const z=e.INSPECT_MAX_BYTES;return T=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(T+=" ... "),"<Buffer "+T+">"},l&&(s.prototype[l]=s.prototype.inspect),s.prototype.compare=function(T,z,be,je,Xe){if(O(T,Uint8Array)&&(T=s.from(T,T.offset,T.byteLength)),!s.isBuffer(T))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof T);if(z===void 0&&(z=0),be===void 0&&(be=T?T.length:0),je===void 0&&(je=0),Xe===void 0&&(Xe=this.length),z<0||be>T.length||je<0||Xe>this.length)throw new RangeError("out of range index");if(je>=Xe&&z>=be)return 0;if(je>=Xe)return-1;if(z>=be)return 1;if(z>>>=0,be>>>=0,je>>>=0,Xe>>>=0,this===T)return 0;let Qe=Xe-je,Ht=be-z;const Cn=Math.min(Qe,Ht),fn=this.slice(je,Xe),ft=T.slice(z,be);for(let Mt=0;Mt<Cn;++Mt)if(fn[Mt]!==ft[Mt]){Qe=fn[Mt],Ht=ft[Mt];break}return Qe<Ht?-1:Ht<Qe?1:0};function F(se,T,z,be,je){if(se.length===0)return-1;if(typeof z=="string"?(be=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,pe(z)&&(z=je?0:se.length-1),z<0&&(z=se.length+z),z>=se.length){if(je)return-1;z=se.length-1}else if(z<0)if(je)z=0;else return-1;if(typeof T=="string"&&(T=s.from(T,be)),s.isBuffer(T))return T.length===0?-1:w(se,T,z,be,je);if(typeof T=="number")return T=T&255,typeof Uint8Array.prototype.indexOf=="function"?je?Uint8Array.prototype.indexOf.call(se,T,z):Uint8Array.prototype.lastIndexOf.call(se,T,z):w(se,[T],z,be,je);throw new TypeError("val must be string, number or Buffer")}function w(se,T,z,be,je){let Xe=1,Qe=se.length,Ht=T.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(se.length<2||T.length<2)return-1;Xe=2,Qe/=2,Ht/=2,z/=2}function Cn(ft,Mt){return Xe===1?ft[Mt]:ft.readUInt16BE(Mt*Xe)}let fn;if(je){let ft=-1;for(fn=z;fn<Qe;fn++)if(Cn(se,fn)===Cn(T,ft===-1?0:fn-ft)){if(ft===-1&&(ft=fn),fn-ft+1===Ht)return ft*Xe}else ft!==-1&&(fn-=fn-ft),ft=-1}else for(z+Ht>Qe&&(z=Qe-Ht),fn=z;fn>=0;fn--){let ft=!0;for(let Mt=0;Mt<Ht;Mt++)if(Cn(se,fn+Mt)!==Cn(T,Mt)){ft=!1;break}if(ft)return fn}return-1}s.prototype.includes=function(T,z,be){return this.indexOf(T,z,be)!==-1},s.prototype.indexOf=function(T,z,be){return F(this,T,z,be,!0)},s.prototype.lastIndexOf=function(T,z,be){return F(this,T,z,be,!1)};function k(se,T,z,be){z=Number(z)||0;const je=se.length-z;be?(be=Number(be),be>je&&(be=je)):be=je;const Xe=T.length;be>Xe/2&&(be=Xe/2);let Qe;for(Qe=0;Qe<be;++Qe){const Ht=parseInt(T.substr(Qe*2,2),16);if(pe(Ht))return Qe;se[z+Qe]=Ht}return Qe}function B(se,T,z,be){return R(wn(T,se.length-z),se,z,be)}function q(se,T,z,be){return R(on(T),se,z,be)}function K(se,T,z,be){return R(we(T),se,z,be)}function fe(se,T,z,be){return R(En(T,se.length-z),se,z,be)}s.prototype.write=function(T,z,be,je){if(z===void 0)je="utf8",be=this.length,z=0;else if(be===void 0&&typeof z=="string")je=z,be=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(be)?(be=be>>>0,je===void 0&&(je="utf8")):(je=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Xe=this.length-z;if((be===void 0||be>Xe)&&(be=Xe),T.length>0&&(be<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");let Qe=!1;for(;;)switch(je){case"hex":return k(this,T,z,be);case"utf8":case"utf-8":return B(this,T,z,be);case"ascii":case"latin1":case"binary":return q(this,T,z,be);case"base64":return K(this,T,z,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,T,z,be);default:if(Qe)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),Qe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(se,T,z){return T===0&&z===se.length?t.fromByteArray(se):t.fromByteArray(se.slice(T,z))}function xe(se,T,z){z=Math.min(se.length,z);const be=[];let je=T;for(;je<z;){const Xe=se[je];let Qe=null,Ht=Xe>239?4:Xe>223?3:Xe>191?2:1;if(je+Ht<=z){let Cn,fn,ft,Mt;switch(Ht){case 1:Xe<128&&(Qe=Xe);break;case 2:Cn=se[je+1],(Cn&192)===128&&(Mt=(Xe&31)<<6|Cn&63,Mt>127&&(Qe=Mt));break;case 3:Cn=se[je+1],fn=se[je+2],(Cn&192)===128&&(fn&192)===128&&(Mt=(Xe&15)<<12|(Cn&63)<<6|fn&63,Mt>2047&&(Mt<55296||Mt>57343)&&(Qe=Mt));break;case 4:Cn=se[je+1],fn=se[je+2],ft=se[je+3],(Cn&192)===128&&(fn&192)===128&&(ft&192)===128&&(Mt=(Xe&15)<<18|(Cn&63)<<12|(fn&63)<<6|ft&63,Mt>65535&&Mt<1114112&&(Qe=Mt))}}Qe===null?(Qe=65533,Ht=1):Qe>65535&&(Qe-=65536,be.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),be.push(Qe),je+=Ht}return re(be)}const ee=4096;function re(se){const T=se.length;if(T<=ee)return String.fromCharCode.apply(String,se);let z="",be=0;for(;be<T;)z+=String.fromCharCode.apply(String,se.slice(be,be+=ee));return z}function ie(se,T,z){let be="";z=Math.min(se.length,z);for(let je=T;je<z;++je)be+=String.fromCharCode(se[je]&127);return be}function le(se,T,z){let be="";z=Math.min(se.length,z);for(let je=T;je<z;++je)be+=String.fromCharCode(se[je]);return be}function _e(se,T,z){const be=se.length;(!T||T<0)&&(T=0),(!z||z<0||z>be)&&(z=be);let je="";for(let Xe=T;Xe<z;++Xe)je+=Le[se[Xe]];return je}function Ie(se,T,z){const be=se.slice(T,z);let je="";for(let Xe=0;Xe<be.length-1;Xe+=2)je+=String.fromCharCode(be[Xe]+be[Xe+1]*256);return je}s.prototype.slice=function(T,z){const be=this.length;T=~~T,z=z===void 0?be:~~z,T<0?(T+=be,T<0&&(T=0)):T>be&&(T=be),z<0?(z+=be,z<0&&(z=0)):z>be&&(z=be),z<T&&(z=T);const je=this.subarray(T,z);return Object.setPrototypeOf(je,s.prototype),je};function ce(se,T,z){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+T>z)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(T,z,be){T=T>>>0,z=z>>>0,be||ce(T,z,this.length);let je=this[T],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)je+=this[T+Qe]*Xe;return je},s.prototype.readUintBE=s.prototype.readUIntBE=function(T,z,be){T=T>>>0,z=z>>>0,be||ce(T,z,this.length);let je=this[T+--z],Xe=1;for(;z>0&&(Xe*=256);)je+=this[T+--z]*Xe;return je},s.prototype.readUint8=s.prototype.readUInt8=function(T,z){return T=T>>>0,z||ce(T,1,this.length),this[T]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(T,z){return T=T>>>0,z||ce(T,2,this.length),this[T]|this[T+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(T,z){return T=T>>>0,z||ce(T,2,this.length),this[T]<<8|this[T+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),(this[T]|this[T+1]<<8|this[T+2]<<16)+this[T+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),this[T]*16777216+(this[T+1]<<16|this[T+2]<<8|this[T+3])},s.prototype.readBigUInt64LE=Ke(function(T){T=T>>>0,Nt(T,"offset");const z=this[T],be=this[T+7];(z===void 0||be===void 0)&&Bt(T,this.length-8);const je=z+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24,Xe=this[++T]+this[++T]*2**8+this[++T]*2**16+be*2**24;return BigInt(je)+(BigInt(Xe)<<BigInt(32))}),s.prototype.readBigUInt64BE=Ke(function(T){T=T>>>0,Nt(T,"offset");const z=this[T],be=this[T+7];(z===void 0||be===void 0)&&Bt(T,this.length-8);const je=z*2**24+this[++T]*2**16+this[++T]*2**8+this[++T],Xe=this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+be;return(BigInt(je)<<BigInt(32))+BigInt(Xe)}),s.prototype.readIntLE=function(T,z,be){T=T>>>0,z=z>>>0,be||ce(T,z,this.length);let je=this[T],Xe=1,Qe=0;for(;++Qe<z&&(Xe*=256);)je+=this[T+Qe]*Xe;return Xe*=128,je>=Xe&&(je-=Math.pow(2,8*z)),je},s.prototype.readIntBE=function(T,z,be){T=T>>>0,z=z>>>0,be||ce(T,z,this.length);let je=z,Xe=1,Qe=this[T+--je];for(;je>0&&(Xe*=256);)Qe+=this[T+--je]*Xe;return Xe*=128,Qe>=Xe&&(Qe-=Math.pow(2,8*z)),Qe},s.prototype.readInt8=function(T,z){return T=T>>>0,z||ce(T,1,this.length),this[T]&128?(255-this[T]+1)*-1:this[T]},s.prototype.readInt16LE=function(T,z){T=T>>>0,z||ce(T,2,this.length);const be=this[T]|this[T+1]<<8;return be&32768?be|4294901760:be},s.prototype.readInt16BE=function(T,z){T=T>>>0,z||ce(T,2,this.length);const be=this[T+1]|this[T]<<8;return be&32768?be|4294901760:be},s.prototype.readInt32LE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),this[T]|this[T+1]<<8|this[T+2]<<16|this[T+3]<<24},s.prototype.readInt32BE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),this[T]<<24|this[T+1]<<16|this[T+2]<<8|this[T+3]},s.prototype.readBigInt64LE=Ke(function(T){T=T>>>0,Nt(T,"offset");const z=this[T],be=this[T+7];(z===void 0||be===void 0)&&Bt(T,this.length-8);const je=this[T+4]+this[T+5]*2**8+this[T+6]*2**16+(be<<24);return(BigInt(je)<<BigInt(32))+BigInt(z+this[++T]*2**8+this[++T]*2**16+this[++T]*2**24)}),s.prototype.readBigInt64BE=Ke(function(T){T=T>>>0,Nt(T,"offset");const z=this[T],be=this[T+7];(z===void 0||be===void 0)&&Bt(T,this.length-8);const je=(z<<24)+this[++T]*2**16+this[++T]*2**8+this[++T];return(BigInt(je)<<BigInt(32))+BigInt(this[++T]*2**24+this[++T]*2**16+this[++T]*2**8+be)}),s.prototype.readFloatLE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),r.read(this,T,!0,23,4)},s.prototype.readFloatBE=function(T,z){return T=T>>>0,z||ce(T,4,this.length),r.read(this,T,!1,23,4)},s.prototype.readDoubleLE=function(T,z){return T=T>>>0,z||ce(T,8,this.length),r.read(this,T,!0,52,8)},s.prototype.readDoubleBE=function(T,z){return T=T>>>0,z||ce(T,8,this.length),r.read(this,T,!1,52,8)};function ke(se,T,z,be,je,Xe){if(!s.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>je||T<Xe)throw new RangeError('"value" argument is out of bounds');if(z+be>se.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(T,z,be,je){if(T=+T,z=z>>>0,be=be>>>0,!je){const Ht=Math.pow(2,8*be)-1;ke(this,T,z,be,Ht,0)}let Xe=1,Qe=0;for(this[z]=T&255;++Qe<be&&(Xe*=256);)this[z+Qe]=T/Xe&255;return z+be},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(T,z,be,je){if(T=+T,z=z>>>0,be=be>>>0,!je){const Ht=Math.pow(2,8*be)-1;ke(this,T,z,be,Ht,0)}let Xe=be-1,Qe=1;for(this[z+Xe]=T&255;--Xe>=0&&(Qe*=256);)this[z+Xe]=T/Qe&255;return z+be},s.prototype.writeUint8=s.prototype.writeUInt8=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,1,255,0),this[z]=T&255,z+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,2,65535,0),this[z]=T&255,this[z+1]=T>>>8,z+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,2,65535,0),this[z]=T>>>8,this[z+1]=T&255,z+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,4,4294967295,0),this[z+3]=T>>>24,this[z+2]=T>>>16,this[z+1]=T>>>8,this[z]=T&255,z+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,4,4294967295,0),this[z]=T>>>24,this[z+1]=T>>>16,this[z+2]=T>>>8,this[z+3]=T&255,z+4};function Te(se,T,z,be,je){Et(T,be,je,se,z,7);let Xe=Number(T&BigInt(4294967295));se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe,Xe=Xe>>8,se[z++]=Xe;let Qe=Number(T>>BigInt(32)&BigInt(4294967295));return se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,Qe=Qe>>8,se[z++]=Qe,z}function Pe(se,T,z,be,je){Et(T,be,je,se,z,7);let Xe=Number(T&BigInt(4294967295));se[z+7]=Xe,Xe=Xe>>8,se[z+6]=Xe,Xe=Xe>>8,se[z+5]=Xe,Xe=Xe>>8,se[z+4]=Xe;let Qe=Number(T>>BigInt(32)&BigInt(4294967295));return se[z+3]=Qe,Qe=Qe>>8,se[z+2]=Qe,Qe=Qe>>8,se[z+1]=Qe,Qe=Qe>>8,se[z]=Qe,z+8}s.prototype.writeBigUInt64LE=Ke(function(T,z=0){return Te(this,T,z,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Ke(function(T,z=0){return Pe(this,T,z,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(T,z,be,je){if(T=+T,z=z>>>0,!je){const Cn=Math.pow(2,8*be-1);ke(this,T,z,be,Cn-1,-Cn)}let Xe=0,Qe=1,Ht=0;for(this[z]=T&255;++Xe<be&&(Qe*=256);)T<0&&Ht===0&&this[z+Xe-1]!==0&&(Ht=1),this[z+Xe]=(T/Qe>>0)-Ht&255;return z+be},s.prototype.writeIntBE=function(T,z,be,je){if(T=+T,z=z>>>0,!je){const Cn=Math.pow(2,8*be-1);ke(this,T,z,be,Cn-1,-Cn)}let Xe=be-1,Qe=1,Ht=0;for(this[z+Xe]=T&255;--Xe>=0&&(Qe*=256);)T<0&&Ht===0&&this[z+Xe+1]!==0&&(Ht=1),this[z+Xe]=(T/Qe>>0)-Ht&255;return z+be},s.prototype.writeInt8=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,1,127,-128),T<0&&(T=255+T+1),this[z]=T&255,z+1},s.prototype.writeInt16LE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,2,32767,-32768),this[z]=T&255,this[z+1]=T>>>8,z+2},s.prototype.writeInt16BE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,2,32767,-32768),this[z]=T>>>8,this[z+1]=T&255,z+2},s.prototype.writeInt32LE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,4,2147483647,-2147483648),this[z]=T&255,this[z+1]=T>>>8,this[z+2]=T>>>16,this[z+3]=T>>>24,z+4},s.prototype.writeInt32BE=function(T,z,be){return T=+T,z=z>>>0,be||ke(this,T,z,4,2147483647,-2147483648),T<0&&(T=4294967295+T+1),this[z]=T>>>24,this[z+1]=T>>>16,this[z+2]=T>>>8,this[z+3]=T&255,z+4},s.prototype.writeBigInt64LE=Ke(function(T,z=0){return Te(this,T,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Ke(function(T,z=0){return Pe(this,T,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function De(se,T,z,be,je,Xe){if(z+be>se.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Ue(se,T,z,be,je){return T=+T,z=z>>>0,je||De(se,T,z,4),r.write(se,T,z,be,23,4),z+4}s.prototype.writeFloatLE=function(T,z,be){return Ue(this,T,z,!0,be)},s.prototype.writeFloatBE=function(T,z,be){return Ue(this,T,z,!1,be)};function qe(se,T,z,be,je){return T=+T,z=z>>>0,je||De(se,T,z,8),r.write(se,T,z,be,52,8),z+8}s.prototype.writeDoubleLE=function(T,z,be){return qe(this,T,z,!0,be)},s.prototype.writeDoubleBE=function(T,z,be){return qe(this,T,z,!1,be)},s.prototype.copy=function(T,z,be,je){if(!s.isBuffer(T))throw new TypeError("argument should be a Buffer");if(be||(be=0),!je&&je!==0&&(je=this.length),z>=T.length&&(z=T.length),z||(z=0),je>0&&je<be&&(je=be),je===be||T.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),T.length-z<je-be&&(je=T.length-z+be);const Xe=je-be;return this===T&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,be,je):Uint8Array.prototype.set.call(T,this.subarray(be,je),z),Xe},s.prototype.fill=function(T,z,be,je){if(typeof T=="string"){if(typeof z=="string"?(je=z,z=0,be=this.length):typeof be=="string"&&(je=be,be=this.length),je!==void 0&&typeof je!="string")throw new TypeError("encoding must be a string");if(typeof je=="string"&&!s.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(T.length===1){const Qe=T.charCodeAt(0);(je==="utf8"&&Qe<128||je==="latin1")&&(T=Qe)}}else typeof T=="number"?T=T&255:typeof T=="boolean"&&(T=Number(T));if(z<0||this.length<z||this.length<be)throw new RangeError("Out of range index");if(be<=z)return this;z=z>>>0,be=be===void 0?this.length:be>>>0,T||(T=0);let Xe;if(typeof T=="number")for(Xe=z;Xe<be;++Xe)this[Xe]=T;else{const Qe=s.isBuffer(T)?T:s.from(T,je),Ht=Qe.length;if(Ht===0)throw new TypeError('The value "'+T+'" is invalid for argument "value"');for(Xe=0;Xe<be-z;++Xe)this[Xe+z]=Qe[Xe%Ht]}return this};const ot={};function dt(se,T,z){ot[se]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:T.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:je,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(se,T){return`The "${se}" argument must be of type number. Received type ${typeof T}`},TypeError),dt("ERR_OUT_OF_RANGE",function(se,T,z){let be=`The value of "${se}" is out of range.`,je=z;return Number.isInteger(z)&&Math.abs(z)>2**32?je=Pt(String(z)):typeof z=="bigint"&&(je=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(je=Pt(je)),je+="n"),be+=` It must be ${T}. Received ${je}`,be},RangeError);function Pt(se){let T="",z=se.length;const be=se[0]==="-"?1:0;for(;z>=be+4;z-=3)T=`_${se.slice(z-3,z)}${T}`;return`${se.slice(0,z)}${T}`}function ht(se,T,z){Nt(T,"offset"),(se[T]===void 0||se[T+z]===void 0)&&Bt(T,se.length-(z+1))}function Et(se,T,z,be,je,Xe){if(se>z||se<T){const Qe=typeof T=="bigint"?"n":"";let Ht;throw Xe>3?T===0||T===BigInt(0)?Ht=`>= 0${Qe} and < 2${Qe} ** ${(Xe+1)*8}${Qe}`:Ht=`>= -(2${Qe} ** ${(Xe+1)*8-1}${Qe}) and < 2 ** ${(Xe+1)*8-1}${Qe}`:Ht=`>= ${T}${Qe} and <= ${z}${Qe}`,new ot.ERR_OUT_OF_RANGE("value",Ht,se)}ht(be,je,Xe)}function Nt(se,T){if(typeof se!="number")throw new ot.ERR_INVALID_ARG_TYPE(T,"number",se)}function Bt(se,T,z){throw Math.floor(se)!==se?(Nt(se,z),new ot.ERR_OUT_OF_RANGE(z||"offset","an integer",se)):T<0?new ot.ERR_BUFFER_OUT_OF_BOUNDS:new ot.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${T}`,se)}const cn=/[^+/0-9A-Za-z-_]/g;function An(se){if(se=se.split("=")[0],se=se.trim().replace(cn,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function wn(se,T){T=T||1/0;let z;const be=se.length;let je=null;const Xe=[];for(let Qe=0;Qe<be;++Qe){if(z=se.charCodeAt(Qe),z>55295&&z<57344){if(!je){if(z>56319){(T-=3)>-1&&Xe.push(239,191,189);continue}else if(Qe+1===be){(T-=3)>-1&&Xe.push(239,191,189);continue}je=z;continue}if(z<56320){(T-=3)>-1&&Xe.push(239,191,189),je=z;continue}z=(je-55296<<10|z-56320)+65536}else je&&(T-=3)>-1&&Xe.push(239,191,189);if(je=null,z<128){if((T-=1)<0)break;Xe.push(z)}else if(z<2048){if((T-=2)<0)break;Xe.push(z>>6|192,z&63|128)}else if(z<65536){if((T-=3)<0)break;Xe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((T-=4)<0)break;Xe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return Xe}function on(se){const T=[];for(let z=0;z<se.length;++z)T.push(se.charCodeAt(z)&255);return T}function En(se,T){let z,be,je;const Xe=[];for(let Qe=0;Qe<se.length&&!((T-=2)<0);++Qe)z=se.charCodeAt(Qe),be=z>>8,je=z%256,Xe.push(je),Xe.push(be);return Xe}function we(se){return t.toByteArray(An(se))}function R(se,T,z,be){let je;for(je=0;je<be&&!(je+z>=T.length||je>=se.length);++je)T[je+z]=se[je];return je}function O(se,T){return se instanceof T||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===T.name}function pe(se){return se!==se}const Le=function(){const se="0123456789abcdef",T=new Array(256);for(let z=0;z<16;++z){const be=z*16;for(let je=0;je<16;++je)T[be+je]=se[z]+se[je]}return T}();function Ke(se){return typeof BigInt=="undefined"?at:se}function at(){throw new Error("BigInt not supported")}})(v6);window.Buffer=v6.Buffer;d7.render(Rt(Lw.StrictMode,{children:Rt(zk,{})}),document.getElementById("root"));

function pk(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const p=Object.getOwnPropertyDescriptor(a,c);p&&Object.defineProperty(e,c,p.get?p:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const f of p.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(c){if(c.ep)return;c.ep=!0;const p=i(c);fetch(c.href,p)}})();var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var iE={exports:{}},Fg={},oE={exports:{}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df=Symbol.for("react.element"),mk=Symbol.for("react.portal"),gk=Symbol.for("react.fragment"),yk=Symbol.for("react.strict_mode"),vk=Symbol.for("react.profiler"),_k=Symbol.for("react.provider"),xk=Symbol.for("react.context"),wk=Symbol.for("react.forward_ref"),bk=Symbol.for("react.suspense"),Sk=Symbol.for("react.memo"),Ek=Symbol.for("react.lazy"),rb=Symbol.iterator;function Tk(e){return e===null||typeof e!="object"?null:(e=rb&&e[rb]||e["@@iterator"],typeof e=="function"?e:null)}var sE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aE=Object.assign,lE={};function Rh(e,t,i){this.props=e,this.context=t,this.refs=lE,this.updater=i||sE}Rh.prototype.isReactComponent={};Rh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uE(){}uE.prototype=Rh.prototype;function V_(e,t,i){this.props=e,this.context=t,this.refs=lE,this.updater=i||sE}var G_=V_.prototype=new uE;G_.constructor=V_;aE(G_,Rh.prototype);G_.isPureReactComponent=!0;var ib=Array.isArray,cE=Object.prototype.hasOwnProperty,H_={current:null},hE={key:!0,ref:!0,__self:!0,__source:!0};function dE(e,t,i){var a,c={},p=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(p=""+t.key),t)cE.call(t,a)&&!hE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var b=Array(u),C=0;C<u;C++)b[C]=arguments[C+2];c.children=b}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Df,type:e,key:p,ref:f,props:c,_owner:H_.current}}function Ck(e,t){return{$$typeof:Df,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function W_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Df}function Ik(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var ob=/\/+/g;function Qy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ik(""+e.key):t.toString(36)}function fm(e,t,i,a,c){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(p){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Df:case mk:f=!0}}if(f)return f=e,c=c(f),e=a===""?"."+Qy(f,0):a,ib(c)?(i="",e!=null&&(i=e.replace(ob,"$&/")+"/"),fm(c,t,i,"",function(C){return C})):c!=null&&(W_(c)&&(c=Ck(c,i+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(ob,"$&/")+"/")+e)),t.push(c)),1;if(f=0,a=a===""?".":a+":",ib(e))for(var u=0;u<e.length;u++){p=e[u];var b=a+Qy(p,u);f+=fm(p,t,i,b,c)}else if(b=Tk(e),typeof b=="function")for(e=b.call(e),u=0;!(p=e.next()).done;)p=p.value,b=a+Qy(p,u++),f+=fm(p,t,i,b,c);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function kp(e,t,i){if(e==null)return e;var a=[],c=0;return fm(e,a,"","",function(p){return t.call(i,p,c++)}),a}function Ak(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ho={current:null},pm={transition:null},Pk={ReactCurrentDispatcher:ho,ReactCurrentBatchConfig:pm,ReactCurrentOwner:H_};Fn.Children={map:kp,forEach:function(e,t,i){kp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return kp(e,function(){t++}),t},toArray:function(e){return kp(e,function(t){return t})||[]},only:function(e){if(!W_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fn.Component=Rh;Fn.Fragment=gk;Fn.Profiler=vk;Fn.PureComponent=V_;Fn.StrictMode=yk;Fn.Suspense=bk;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pk;Fn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=aE({},e.props),c=e.key,p=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,f=H_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)cE.call(t,b)&&!hE.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){u=Array(b);for(var C=0;C<b;C++)u[C]=arguments[C+2];a.children=u}return{$$typeof:Df,type:e.type,key:c,ref:p,props:a,_owner:f}};Fn.createContext=function(e){return e={$$typeof:xk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_k,_context:e},e.Consumer=e};Fn.createElement=dE;Fn.createFactory=function(e){var t=dE.bind(null,e);return t.type=e,t};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(e){return{$$typeof:wk,render:e}};Fn.isValidElement=W_;Fn.lazy=function(e){return{$$typeof:Ek,_payload:{_status:-1,_result:e},_init:Ak}};Fn.memo=function(e,t){return{$$typeof:Sk,type:e,compare:t===void 0?null:t}};Fn.startTransition=function(e){var t=pm.transition;pm.transition={};try{e()}finally{pm.transition=t}};Fn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Fn.useCallback=function(e,t){return ho.current.useCallback(e,t)};Fn.useContext=function(e){return ho.current.useContext(e)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(e){return ho.current.useDeferredValue(e)};Fn.useEffect=function(e,t){return ho.current.useEffect(e,t)};Fn.useId=function(){return ho.current.useId()};Fn.useImperativeHandle=function(e,t,i){return ho.current.useImperativeHandle(e,t,i)};Fn.useInsertionEffect=function(e,t){return ho.current.useInsertionEffect(e,t)};Fn.useLayoutEffect=function(e,t){return ho.current.useLayoutEffect(e,t)};Fn.useMemo=function(e,t){return ho.current.useMemo(e,t)};Fn.useReducer=function(e,t,i){return ho.current.useReducer(e,t,i)};Fn.useRef=function(e){return ho.current.useRef(e)};Fn.useState=function(e){return ho.current.useState(e)};Fn.useSyncExternalStore=function(e,t,i){return ho.current.useSyncExternalStore(e,t,i)};Fn.useTransition=function(){return ho.current.useTransition()};Fn.version="18.2.0";oE.exports=Fn;var _t=oE.exports;const Z_=jf(_t);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk=_t,Mk=Symbol.for("react.element"),zk=Symbol.for("react.fragment"),Rk=Object.prototype.hasOwnProperty,Lk=kk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ok={key:!0,ref:!0,__self:!0,__source:!0};function fE(e,t,i){var a,c={},p=null,f=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)Rk.call(t,a)&&!Ok.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:Mk,type:e,key:p,ref:f,props:c,_owner:Lk.current}}Fg.Fragment=zk;Fg.jsx=fE;Fg.jsxs=fE;iE.exports=Fg;var yt=iE.exports,pE={exports:{}},Ho={},mE={exports:{}},gE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,he){var be=te.length;te.push(he);e:for(;0<be;){var Ee=be-1>>>1,Be=te[Ee];if(0<c(Be,he))te[Ee]=he,te[be]=Be,be=Ee;else break e}}function i(te){return te.length===0?null:te[0]}function a(te){if(te.length===0)return null;var he=te[0],be=te.pop();if(be!==he){te[0]=be;e:for(var Ee=0,Be=te.length,ke=Be>>>1;Ee<ke;){var ze=2*(Ee+1)-1,We=te[ze],He=ze+1,rt=te[He];if(0>c(We,be))He<Be&&0>c(rt,We)?(te[Ee]=rt,te[He]=be,Ee=He):(te[Ee]=We,te[ze]=be,Ee=ze);else if(He<Be&&0>c(rt,be))te[Ee]=rt,te[He]=be,Ee=He;else break e}}return he}function c(te,he){var be=te.sortIndex-he.sortIndex;return be!==0?be:te.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var f=Date,u=f.now();e.unstable_now=function(){return f.now()-u}}var b=[],C=[],I=1,w=null,T=3,O=!1,U=!1,F=!1,ue=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(te){for(var he=i(C);he!==null;){if(he.callback===null)a(C);else if(he.startTime<=te)a(C),he.sortIndex=he.expirationTime,t(b,he);else break;he=i(C)}}function ie(te){if(F=!1,$(te),!U)if(i(b)!==null)U=!0,le(X);else{var he=i(C);he!==null&&Q(ie,he.startTime-te)}}function X(te,he){U=!1,F&&(F=!1,K(j),j=-1),O=!0;var be=T;try{for($(he),w=i(b);w!==null&&(!(w.expirationTime>he)||te&&!q());){var Ee=w.callback;if(typeof Ee=="function"){w.callback=null,T=w.priorityLevel;var Be=Ee(w.expirationTime<=he);he=e.unstable_now(),typeof Be=="function"?w.callback=Be:w===i(b)&&a(b),$(he)}else a(b);w=i(b)}if(w!==null)var ke=!0;else{var ze=i(C);ze!==null&&Q(ie,ze.startTime-he),ke=!1}return ke}finally{w=null,T=be,O=!1}}var V=!1,E=null,j=-1,B=5,ee=-1;function q(){return!(e.unstable_now()-ee<B)}function me(){if(E!==null){var te=e.unstable_now();ee=te;var he=!0;try{he=E(!0,te)}finally{he?_e():(V=!1,E=null)}}else V=!1}var _e;if(typeof W=="function")_e=function(){W(me)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,oe=de.port2;de.port1.onmessage=me,_e=function(){oe.postMessage(null)}}else _e=function(){ue(me,0)};function le(te){E=te,V||(V=!0,_e())}function Q(te,he){j=ue(function(){te(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){U||O||(U=!0,le(X))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(te){switch(T){case 1:case 2:case 3:var he=3;break;default:he=T}var be=T;T=he;try{return te()}finally{T=be}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,he){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var be=T;T=te;try{return he()}finally{T=be}},e.unstable_scheduleCallback=function(te,he,be){var Ee=e.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ee+be:Ee):be=Ee,te){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=be+Be,te={id:I++,callback:he,priorityLevel:te,startTime:be,expirationTime:Be,sortIndex:-1},be>Ee?(te.sortIndex=be,t(C,te),i(b)===null&&te===i(C)&&(F?(K(j),j=-1):F=!0,Q(ie,be-Ee))):(te.sortIndex=Be,t(b,te),U||O||(U=!0,le(X))),te},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(te){var he=T;return function(){var be=T;T=he;try{return te.apply(this,arguments)}finally{T=be}}}})(gE);mE.exports=gE;var Fk=mE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=_t,Go=Fk;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vE=new Set,hf={};function ec(e,t){xh(e,t),xh(e+"Capture",t)}function xh(e,t){for(hf[e]=t,e=0;e<t.length;e++)vE.add(t[e])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ov=Object.prototype.hasOwnProperty,jk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sb={},ab={};function Dk(e){return ov.call(ab,e)?!0:ov.call(sb,e)?!1:jk.test(e)?ab[e]=!0:(sb[e]=!0,!1)}function Bk(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Nk(e,t,i,a){if(t===null||typeof t>"u"||Bk(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fo(e,t,i,a,c,p,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=f}var Li={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Li[e]=new fo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Li[t]=new fo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Li[e]=new fo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Li[e]=new fo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Li[e]=new fo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Li[e]=new fo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Li[e]=new fo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Li[e]=new fo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Li[e]=new fo(e,5,!1,e.toLowerCase(),null,!1,!1)});var X_=/[\-:]([a-z])/g;function q_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(X_,q_);Li[t]=new fo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(X_,q_);Li[t]=new fo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(X_,q_);Li[t]=new fo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Li[e]=new fo(e,1,!1,e.toLowerCase(),null,!1,!1)});Li.xlinkHref=new fo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Li[e]=new fo(e,1,!1,e.toLowerCase(),null,!0,!0)});function K_(e,t,i,a){var c=Li.hasOwnProperty(t)?Li[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Nk(t,i,c,a)&&(i=null),a||c===null?Dk(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Qa=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mp=Symbol.for("react.element"),Xc=Symbol.for("react.portal"),qc=Symbol.for("react.fragment"),Y_=Symbol.for("react.strict_mode"),sv=Symbol.for("react.profiler"),_E=Symbol.for("react.provider"),xE=Symbol.for("react.context"),J_=Symbol.for("react.forward_ref"),av=Symbol.for("react.suspense"),lv=Symbol.for("react.suspense_list"),Q_=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),wE=Symbol.for("react.offscreen"),lb=Symbol.iterator;function Id(e){return e===null||typeof e!="object"?null:(e=lb&&e[lb]||e["@@iterator"],typeof e=="function"?e:null)}var zr=Object.assign,e0;function Fd(e){if(e0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);e0=t&&t[1]||""}return`
`+e0+e}var t0=!1;function n0(e,t){if(!e||t0)return"";t0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),p=a.stack.split(`
`),f=c.length-1,u=p.length-1;1<=f&&0<=u&&c[f]!==p[u];)u--;for(;1<=f&&0<=u;f--,u--)if(c[f]!==p[u]){if(f!==1||u!==1)do if(f--,u--,0>u||c[f]!==p[u]){var b=`
`+c[f].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=f&&0<=u);break}}}finally{t0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Fd(e):""}function Uk(e){switch(e.tag){case 5:return Fd(e.type);case 16:return Fd("Lazy");case 13:return Fd("Suspense");case 19:return Fd("SuspenseList");case 0:case 2:case 15:return e=n0(e.type,!1),e;case 11:return e=n0(e.type.render,!1),e;case 1:return e=n0(e.type,!0),e;default:return""}}function uv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qc:return"Fragment";case Xc:return"Portal";case sv:return"Profiler";case Y_:return"StrictMode";case av:return"Suspense";case lv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xE:return(e.displayName||"Context")+".Consumer";case _E:return(e._context.displayName||"Context")+".Provider";case J_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q_:return t=e.displayName||null,t!==null?t:uv(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return uv(e(t))}catch{}}return null}function $k(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uv(t);case 8:return t===Y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ru(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vk(e){var t=bE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){a=""+f,p.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zp(e){e._valueTracker||(e._valueTracker=Vk(e))}function SE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=bE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Lm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function cv(e,t){var i=t.checked;return zr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function ub(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=ru(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function EE(e,t){t=t.checked,t!=null&&K_(e,"checked",t,!1)}function hv(e,t){EE(e,t);var i=ru(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dv(e,t.type,i):t.hasOwnProperty("defaultValue")&&dv(e,t.type,ru(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function dv(e,t,i){(t!=="number"||Lm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var jd=Array.isArray;function hh(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+ru(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function fv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return zr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(jd(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:ru(i)}}function TE(e,t){var i=ru(t.value),a=ru(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function db(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function CE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?CE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rp,IE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rp=Rp||document.createElement("div"),Rp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function df(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Xd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gk=["Webkit","ms","Moz","O"];Object.keys(Xd).forEach(function(e){Gk.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Xd[t]=Xd[e]})});function AE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Xd.hasOwnProperty(e)&&Xd[e]?(""+t).trim():t+"px"}function PE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=AE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var Hk=zr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mv(e,t){if(t){if(Hk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function gv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yv=null;function e1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vv=null,dh=null,fh=null;function fb(e){if(e=Uf(e)){if(typeof vv!="function")throw Error(At(280));var t=e.stateNode;t&&(t=Ug(t),vv(e.stateNode,e.type,t))}}function kE(e){dh?fh?fh.push(e):fh=[e]:dh=e}function ME(){if(dh){var e=dh,t=fh;if(fh=dh=null,fb(e),t)for(e=0;e<t.length;e++)fb(t[e])}}function zE(e,t){return e(t)}function RE(){}var r0=!1;function LE(e,t,i){if(r0)return e(t,i);r0=!0;try{return zE(e,t,i)}finally{r0=!1,(dh!==null||fh!==null)&&(RE(),ME())}}function ff(e,t){var i=e.stateNode;if(i===null)return null;var a=Ug(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var _v=!1;if(Ha)try{var Ad={};Object.defineProperty(Ad,"passive",{get:function(){_v=!0}}),window.addEventListener("test",Ad,Ad),window.removeEventListener("test",Ad,Ad)}catch{_v=!1}function Wk(e,t,i,a,c,p,f,u,b){var C=Array.prototype.slice.call(arguments,3);try{t.apply(i,C)}catch(I){this.onError(I)}}var qd=!1,Om=null,Fm=!1,xv=null,Zk={onError:function(e){qd=!0,Om=e}};function Xk(e,t,i,a,c,p,f,u,b){qd=!1,Om=null,Wk.apply(Zk,arguments)}function qk(e,t,i,a,c,p,f,u,b){if(Xk.apply(this,arguments),qd){if(qd){var C=Om;qd=!1,Om=null}else throw Error(At(198));Fm||(Fm=!0,xv=C)}}function tc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function OE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pb(e){if(tc(e)!==e)throw Error(At(188))}function Kk(e){var t=e.alternate;if(!t){if(t=tc(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return pb(c),e;if(p===a)return pb(c),t;p=p.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=p;else{for(var f=!1,u=c.child;u;){if(u===i){f=!0,i=c,a=p;break}if(u===a){f=!0,a=c,i=p;break}u=u.sibling}if(!f){for(u=p.child;u;){if(u===i){f=!0,i=p,a=c;break}if(u===a){f=!0,a=p,i=c;break}u=u.sibling}if(!f)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function FE(e){return e=Kk(e),e!==null?jE(e):null}function jE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jE(e);if(t!==null)return t;e=e.sibling}return null}var DE=Go.unstable_scheduleCallback,mb=Go.unstable_cancelCallback,Yk=Go.unstable_shouldYield,Jk=Go.unstable_requestPaint,Xr=Go.unstable_now,Qk=Go.unstable_getCurrentPriorityLevel,t1=Go.unstable_ImmediatePriority,BE=Go.unstable_UserBlockingPriority,jm=Go.unstable_NormalPriority,eM=Go.unstable_LowPriority,NE=Go.unstable_IdlePriority,jg=null,ra=null;function tM(e){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(jg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ls=Math.clz32?Math.clz32:iM,nM=Math.log,rM=Math.LN2;function iM(e){return e>>>=0,e===0?32:31-(nM(e)/rM|0)|0}var Lp=64,Op=4194304;function Dd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,p=e.pingedLanes,f=i&268435455;if(f!==0){var u=f&~c;u!==0?a=Dd(u):(p&=f,p!==0&&(a=Dd(p)))}else f=i&~c,f!==0?a=Dd(f):p!==0&&(a=Dd(p));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,p=t&-t,c>=p||c===16&&(p&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Ls(t),c=1<<i,a|=e[i],t&=~c;return a}function oM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,p=e.pendingLanes;0<p;){var f=31-Ls(p),u=1<<f,b=c[f];b===-1?(!(u&i)||u&a)&&(c[f]=oM(u,t)):b<=t&&(e.expiredLanes|=u),p&=~u}}function wv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function UE(){var e=Lp;return Lp<<=1,!(Lp&4194240)&&(Lp=64),e}function i0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Bf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ls(t),e[t]=i}function aM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Ls(i),p=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~p}}function n1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Ls(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Kn=0;function $E(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var VE,r1,GE,HE,WE,bv=!1,Fp=[],ql=null,Kl=null,Yl=null,pf=new Map,mf=new Map,Vl=[],lM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gb(e,t){switch(e){case"focusin":case"focusout":ql=null;break;case"dragenter":case"dragleave":Kl=null;break;case"mouseover":case"mouseout":Yl=null;break;case"pointerover":case"pointerout":pf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(t.pointerId)}}function Pd(e,t,i,a,c,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:p,targetContainers:[c]},t!==null&&(t=Uf(t),t!==null&&r1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function uM(e,t,i,a,c){switch(t){case"focusin":return ql=Pd(ql,e,t,i,a,c),!0;case"dragenter":return Kl=Pd(Kl,e,t,i,a,c),!0;case"mouseover":return Yl=Pd(Yl,e,t,i,a,c),!0;case"pointerover":var p=c.pointerId;return pf.set(p,Pd(pf.get(p)||null,e,t,i,a,c)),!0;case"gotpointercapture":return p=c.pointerId,mf.set(p,Pd(mf.get(p)||null,e,t,i,a,c)),!0}return!1}function ZE(e){var t=Du(e.target);if(t!==null){var i=tc(t);if(i!==null){if(t=i.tag,t===13){if(t=OE(i),t!==null){e.blockedOn=t,WE(e.priority,function(){GE(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Sv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);yv=a,i.target.dispatchEvent(a),yv=null}else return t=Uf(i),t!==null&&r1(t),e.blockedOn=i,!1;t.shift()}return!0}function yb(e,t,i){mm(e)&&i.delete(t)}function cM(){bv=!1,ql!==null&&mm(ql)&&(ql=null),Kl!==null&&mm(Kl)&&(Kl=null),Yl!==null&&mm(Yl)&&(Yl=null),pf.forEach(yb),mf.forEach(yb)}function kd(e,t){e.blockedOn===t&&(e.blockedOn=null,bv||(bv=!0,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,cM)))}function gf(e){function t(c){return kd(c,e)}if(0<Fp.length){kd(Fp[0],e);for(var i=1;i<Fp.length;i++){var a=Fp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(ql!==null&&kd(ql,e),Kl!==null&&kd(Kl,e),Yl!==null&&kd(Yl,e),pf.forEach(t),mf.forEach(t),i=0;i<Vl.length;i++)a=Vl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Vl.length&&(i=Vl[0],i.blockedOn===null);)ZE(i),i.blockedOn===null&&Vl.shift()}var ph=Qa.ReactCurrentBatchConfig,Bm=!0;function hM(e,t,i,a){var c=Kn,p=ph.transition;ph.transition=null;try{Kn=1,i1(e,t,i,a)}finally{Kn=c,ph.transition=p}}function dM(e,t,i,a){var c=Kn,p=ph.transition;ph.transition=null;try{Kn=4,i1(e,t,i,a)}finally{Kn=c,ph.transition=p}}function i1(e,t,i,a){if(Bm){var c=Sv(e,t,i,a);if(c===null)p0(e,t,a,Nm,i),gb(e,a);else if(uM(c,e,t,i,a))a.stopPropagation();else if(gb(e,a),t&4&&-1<lM.indexOf(e)){for(;c!==null;){var p=Uf(c);if(p!==null&&VE(p),p=Sv(e,t,i,a),p===null&&p0(e,t,a,Nm,i),p===c)break;c=p}c!==null&&a.stopPropagation()}else p0(e,t,a,null,i)}}var Nm=null;function Sv(e,t,i,a){if(Nm=null,e=e1(a),e=Du(e),e!==null)if(t=tc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=OE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nm=e,null}function XE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qk()){case t1:return 1;case BE:return 4;case jm:case eM:return 16;case NE:return 536870912;default:return 16}default:return 16}}var Wl=null,o1=null,gm=null;function qE(){if(gm)return gm;var e,t=o1,i=t.length,a,c="value"in Wl?Wl.value:Wl.textContent,p=c.length;for(e=0;e<i&&t[e]===c[e];e++);var f=i-e;for(a=1;a<=f&&t[i-a]===c[p-a];a++);return gm=c.slice(e,1<a?1-a:void 0)}function ym(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jp(){return!0}function vb(){return!1}function Wo(e){function t(i,a,c,p,f){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=p,this.target=f,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(p):p[u]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?jp:vb,this.isPropagationStopped=vb,this}return zr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),t}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s1=Wo(Lh),Nf=zr({},Lh,{view:0,detail:0}),fM=Wo(Nf),o0,s0,Md,Dg=zr({},Nf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Md&&(Md&&e.type==="mousemove"?(o0=e.screenX-Md.screenX,s0=e.screenY-Md.screenY):s0=o0=0,Md=e),o0)},movementY:function(e){return"movementY"in e?e.movementY:s0}}),_b=Wo(Dg),pM=zr({},Dg,{dataTransfer:0}),mM=Wo(pM),gM=zr({},Nf,{relatedTarget:0}),a0=Wo(gM),yM=zr({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),vM=Wo(yM),_M=zr({},Lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xM=Wo(_M),wM=zr({},Lh,{data:0}),xb=Wo(wM),bM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EM[e])?!!t[e]:!1}function a1(){return TM}var CM=zr({},Nf,{key:function(e){if(e.key){var t=bM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ym(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a1,charCode:function(e){return e.type==="keypress"?ym(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ym(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IM=Wo(CM),AM=zr({},Dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wb=Wo(AM),PM=zr({},Nf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a1}),kM=Wo(PM),MM=zr({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),zM=Wo(MM),RM=zr({},Dg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LM=Wo(RM),OM=[9,13,27,32],l1=Ha&&"CompositionEvent"in window,Kd=null;Ha&&"documentMode"in document&&(Kd=document.documentMode);var FM=Ha&&"TextEvent"in window&&!Kd,KE=Ha&&(!l1||Kd&&8<Kd&&11>=Kd),bb=" ",Sb=!1;function YE(e,t){switch(e){case"keyup":return OM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kc=!1;function jM(e,t){switch(e){case"compositionend":return JE(t);case"keypress":return t.which!==32?null:(Sb=!0,bb);case"textInput":return e=t.data,e===bb&&Sb?null:e;default:return null}}function DM(e,t){if(Kc)return e==="compositionend"||!l1&&YE(e,t)?(e=qE(),gm=o1=Wl=null,Kc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return KE&&t.locale!=="ko"?null:t.data;default:return null}}var BM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BM[e.type]:t==="textarea"}function QE(e,t,i,a){kE(a),t=Um(t,"onChange"),0<t.length&&(i=new s1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Yd=null,yf=null;function NM(e){cT(e,0)}function Bg(e){var t=Qc(e);if(SE(t))return e}function UM(e,t){if(e==="change")return t}var eT=!1;if(Ha){var l0;if(Ha){var u0="oninput"in document;if(!u0){var Tb=document.createElement("div");Tb.setAttribute("oninput","return;"),u0=typeof Tb.oninput=="function"}l0=u0}else l0=!1;eT=l0&&(!document.documentMode||9<document.documentMode)}function Cb(){Yd&&(Yd.detachEvent("onpropertychange",tT),yf=Yd=null)}function tT(e){if(e.propertyName==="value"&&Bg(yf)){var t=[];QE(t,yf,e,e1(e)),LE(NM,t)}}function $M(e,t,i){e==="focusin"?(Cb(),Yd=t,yf=i,Yd.attachEvent("onpropertychange",tT)):e==="focusout"&&Cb()}function VM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bg(yf)}function GM(e,t){if(e==="click")return Bg(t)}function HM(e,t){if(e==="input"||e==="change")return Bg(t)}function WM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fs=typeof Object.is=="function"?Object.is:WM;function vf(e,t){if(Fs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!ov.call(t,c)||!Fs(e[c],t[c]))return!1}return!0}function Ib(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ab(e,t){var i=Ib(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ib(i)}}function nT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rT(){for(var e=window,t=Lm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Lm(e.document)}return t}function u1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ZM(e){var t=rT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&nT(i.ownerDocument.documentElement,i)){if(a!==null&&u1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,p=Math.min(a.start,c);a=a.end===void 0?p:Math.min(a.end,c),!e.extend&&p>a&&(c=a,a=p,p=c),c=Ab(i,p);var f=Ab(i,a);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),p>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XM=Ha&&"documentMode"in document&&11>=document.documentMode,Yc=null,Ev=null,Jd=null,Tv=!1;function Pb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Tv||Yc==null||Yc!==Lm(a)||(a=Yc,"selectionStart"in a&&u1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Jd&&vf(Jd,a)||(Jd=a,a=Um(Ev,"onSelect"),0<a.length&&(t=new s1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Yc)))}function Dp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Jc={animationend:Dp("Animation","AnimationEnd"),animationiteration:Dp("Animation","AnimationIteration"),animationstart:Dp("Animation","AnimationStart"),transitionend:Dp("Transition","TransitionEnd")},c0={},iT={};Ha&&(iT=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function Ng(e){if(c0[e])return c0[e];if(!Jc[e])return e;var t=Jc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in iT)return c0[e]=t[i];return e}var oT=Ng("animationend"),sT=Ng("animationiteration"),aT=Ng("animationstart"),lT=Ng("transitionend"),uT=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uu(e,t){uT.set(e,t),ec(t,[e])}for(var h0=0;h0<kb.length;h0++){var d0=kb[h0],qM=d0.toLowerCase(),KM=d0[0].toUpperCase()+d0.slice(1);uu(qM,"on"+KM)}uu(oT,"onAnimationEnd");uu(sT,"onAnimationIteration");uu(aT,"onAnimationStart");uu("dblclick","onDoubleClick");uu("focusin","onFocus");uu("focusout","onBlur");uu(lT,"onTransitionEnd");xh("onMouseEnter",["mouseout","mouseover"]);xh("onMouseLeave",["mouseout","mouseover"]);xh("onPointerEnter",["pointerout","pointerover"]);xh("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bd));function Mb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,qk(a,t,void 0,e),e.currentTarget=null}function cT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var p=void 0;if(t)for(var f=a.length-1;0<=f;f--){var u=a[f],b=u.instance,C=u.currentTarget;if(u=u.listener,b!==p&&c.isPropagationStopped())break e;Mb(c,u,C),p=b}else for(f=0;f<a.length;f++){if(u=a[f],b=u.instance,C=u.currentTarget,u=u.listener,b!==p&&c.isPropagationStopped())break e;Mb(c,u,C),p=b}}}if(Fm)throw e=xv,Fm=!1,xv=null,e}function pr(e,t){var i=t[kv];i===void 0&&(i=t[kv]=new Set);var a=e+"__bubble";i.has(a)||(hT(t,e,2,!1),i.add(a))}function f0(e,t,i){var a=0;t&&(a|=4),hT(i,e,a,t)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function _f(e){if(!e[Bp]){e[Bp]=!0,vE.forEach(function(i){i!=="selectionchange"&&(YM.has(i)||f0(i,!1,e),f0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bp]||(t[Bp]=!0,f0("selectionchange",!1,t))}}function hT(e,t,i,a){switch(XE(t)){case 1:var c=hM;break;case 4:c=dM;break;default:c=i1}i=c.bind(null,t,i,e),c=void 0,!_v||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function p0(e,t,i,a,c){var p=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(f===4)for(f=a.return;f!==null;){var b=f.tag;if((b===3||b===4)&&(b=f.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;f=f.return}for(;u!==null;){if(f=Du(u),f===null)return;if(b=f.tag,b===5||b===6){a=p=f;continue e}u=u.parentNode}}a=a.return}LE(function(){var C=p,I=e1(i),w=[];e:{var T=uT.get(e);if(T!==void 0){var O=s1,U=e;switch(e){case"keypress":if(ym(i)===0)break e;case"keydown":case"keyup":O=IM;break;case"focusin":U="focus",O=a0;break;case"focusout":U="blur",O=a0;break;case"beforeblur":case"afterblur":O=a0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=mM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=kM;break;case oT:case sT:case aT:O=vM;break;case lT:O=zM;break;case"scroll":O=fM;break;case"wheel":O=LM;break;case"copy":case"cut":case"paste":O=xM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=wb}var F=(t&4)!==0,ue=!F&&e==="scroll",K=F?T!==null?T+"Capture":null:T;F=[];for(var W=C,$;W!==null;){$=W;var ie=$.stateNode;if($.tag===5&&ie!==null&&($=ie,K!==null&&(ie=ff(W,K),ie!=null&&F.push(xf(W,ie,$)))),ue)break;W=W.return}0<F.length&&(T=new O(T,U,null,i,I),w.push({event:T,listeners:F}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",T&&i!==yv&&(U=i.relatedTarget||i.fromElement)&&(Du(U)||U[Wa]))break e;if((O||T)&&(T=I.window===I?I:(T=I.ownerDocument)?T.defaultView||T.parentWindow:window,O?(U=i.relatedTarget||i.toElement,O=C,U=U?Du(U):null,U!==null&&(ue=tc(U),U!==ue||U.tag!==5&&U.tag!==6)&&(U=null)):(O=null,U=C),O!==U)){if(F=_b,ie="onMouseLeave",K="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(F=wb,ie="onPointerLeave",K="onPointerEnter",W="pointer"),ue=O==null?T:Qc(O),$=U==null?T:Qc(U),T=new F(ie,W+"leave",O,i,I),T.target=ue,T.relatedTarget=$,ie=null,Du(I)===C&&(F=new F(K,W+"enter",U,i,I),F.target=$,F.relatedTarget=ue,ie=F),ue=ie,O&&U)t:{for(F=O,K=U,W=0,$=F;$;$=Nc($))W++;for($=0,ie=K;ie;ie=Nc(ie))$++;for(;0<W-$;)F=Nc(F),W--;for(;0<$-W;)K=Nc(K),$--;for(;W--;){if(F===K||K!==null&&F===K.alternate)break t;F=Nc(F),K=Nc(K)}F=null}else F=null;O!==null&&zb(w,T,O,F,!1),U!==null&&ue!==null&&zb(w,ue,U,F,!0)}}e:{if(T=C?Qc(C):window,O=T.nodeName&&T.nodeName.toLowerCase(),O==="select"||O==="input"&&T.type==="file")var X=UM;else if(Eb(T))if(eT)X=HM;else{X=VM;var V=$M}else(O=T.nodeName)&&O.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(X=GM);if(X&&(X=X(e,C))){QE(w,X,i,I);break e}V&&V(e,T,C),e==="focusout"&&(V=T._wrapperState)&&V.controlled&&T.type==="number"&&dv(T,"number",T.value)}switch(V=C?Qc(C):window,e){case"focusin":(Eb(V)||V.contentEditable==="true")&&(Yc=V,Ev=C,Jd=null);break;case"focusout":Jd=Ev=Yc=null;break;case"mousedown":Tv=!0;break;case"contextmenu":case"mouseup":case"dragend":Tv=!1,Pb(w,i,I);break;case"selectionchange":if(XM)break;case"keydown":case"keyup":Pb(w,i,I)}var E;if(l1)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Kc?YE(e,i)&&(j="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(j="onCompositionStart");j&&(KE&&i.locale!=="ko"&&(Kc||j!=="onCompositionStart"?j==="onCompositionEnd"&&Kc&&(E=qE()):(Wl=I,o1="value"in Wl?Wl.value:Wl.textContent,Kc=!0)),V=Um(C,j),0<V.length&&(j=new xb(j,e,null,i,I),w.push({event:j,listeners:V}),E?j.data=E:(E=JE(i),E!==null&&(j.data=E)))),(E=FM?jM(e,i):DM(e,i))&&(C=Um(C,"onBeforeInput"),0<C.length&&(I=new xb("onBeforeInput","beforeinput",null,i,I),w.push({event:I,listeners:C}),I.data=E))}cT(w,t)})}function xf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Um(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=ff(e,i),p!=null&&a.unshift(xf(e,p,c)),p=ff(e,t),p!=null&&a.push(xf(e,p,c))),e=e.return}return a}function Nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zb(e,t,i,a,c){for(var p=t._reactName,f=[];i!==null&&i!==a;){var u=i,b=u.alternate,C=u.stateNode;if(b!==null&&b===a)break;u.tag===5&&C!==null&&(u=C,c?(b=ff(i,p),b!=null&&f.unshift(xf(i,b,u))):c||(b=ff(i,p),b!=null&&f.push(xf(i,b,u)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var JM=/\r\n?/g,QM=/\u0000|\uFFFD/g;function Rb(e){return(typeof e=="string"?e:""+e).replace(JM,`
`).replace(QM,"")}function Np(e,t,i){if(t=Rb(t),Rb(e)!==t&&i)throw Error(At(425))}function $m(){}var Cv=null,Iv=null;function Av(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,e3=typeof clearTimeout=="function"?clearTimeout:void 0,Lb=typeof Promise=="function"?Promise:void 0,t3=typeof queueMicrotask=="function"?queueMicrotask:typeof Lb<"u"?function(e){return Lb.resolve(null).then(e).catch(n3)}:Pv;function n3(e){setTimeout(function(){throw e})}function m0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),gf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);gf(t)}function Jl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ob(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Oh=Math.random().toString(36).slice(2),Js="__reactFiber$"+Oh,wf="__reactProps$"+Oh,Wa="__reactContainer$"+Oh,kv="__reactEvents$"+Oh,r3="__reactListeners$"+Oh,i3="__reactHandles$"+Oh;function Du(e){var t=e[Js];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Wa]||i[Js]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Ob(e);e!==null;){if(i=e[Js])return i;e=Ob(e)}return t}e=i,i=e.parentNode}return null}function Uf(e){return e=e[Js]||e[Wa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function Ug(e){return e[wf]||null}var Mv=[],eh=-1;function cu(e){return{current:e}}function gr(e){0>eh||(e.current=Mv[eh],Mv[eh]=null,eh--)}function cr(e,t){eh++,Mv[eh]=e.current,e.current=t}var iu={},Ki=cu(iu),bo=cu(!1),Hu=iu;function wh(e,t){var i=e.type.contextTypes;if(!i)return iu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=t[p];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function So(e){return e=e.childContextTypes,e!=null}function Vm(){gr(bo),gr(Ki)}function Fb(e,t,i){if(Ki.current!==iu)throw Error(At(168));cr(Ki,t),cr(bo,i)}function dT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,$k(e)||"Unknown",c));return zr({},i,a)}function Gm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||iu,Hu=Ki.current,cr(Ki,e),cr(bo,bo.current),!0}function jb(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=dT(e,t,Hu),a.__reactInternalMemoizedMergedChildContext=e,gr(bo),gr(Ki),cr(Ki,e)):gr(bo),cr(bo,i)}var Na=null,$g=!1,g0=!1;function fT(e){Na===null?Na=[e]:Na.push(e)}function o3(e){$g=!0,fT(e)}function hu(){if(!g0&&Na!==null){g0=!0;var e=0,t=Kn;try{var i=Na;for(Kn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Na=null,$g=!1}catch(c){throw Na!==null&&(Na=Na.slice(e+1)),DE(t1,hu),c}finally{Kn=t,g0=!1}}return null}var th=[],nh=0,Hm=null,Wm=0,ss=[],as=0,Wu=null,$a=1,Va="";function Ou(e,t){th[nh++]=Wm,th[nh++]=Hm,Hm=e,Wm=t}function pT(e,t,i){ss[as++]=$a,ss[as++]=Va,ss[as++]=Wu,Wu=e;var a=$a;e=Va;var c=32-Ls(a)-1;a&=~(1<<c),i+=1;var p=32-Ls(t)+c;if(30<p){var f=c-c%5;p=(a&(1<<f)-1).toString(32),a>>=f,c-=f,$a=1<<32-Ls(t)+c|i<<c|a,Va=p+e}else $a=1<<p|i<<c|a,Va=e}function c1(e){e.return!==null&&(Ou(e,1),pT(e,1,0))}function h1(e){for(;e===Hm;)Hm=th[--nh],th[nh]=null,Wm=th[--nh],th[nh]=null;for(;e===Wu;)Wu=ss[--as],ss[as]=null,Va=ss[--as],ss[as]=null,$a=ss[--as],ss[as]=null}var Vo=null,$o=null,xr=!1,As=null;function mT(e,t){var i=ls(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Db(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vo=e,$o=Jl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vo=e,$o=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Wu!==null?{id:$a,overflow:Va}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ls(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Vo=e,$o=null,!0):!1;default:return!1}}function zv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rv(e){if(xr){var t=$o;if(t){var i=t;if(!Db(e,t)){if(zv(e))throw Error(At(418));t=Jl(i.nextSibling);var a=Vo;t&&Db(e,t)?mT(a,i):(e.flags=e.flags&-4097|2,xr=!1,Vo=e)}}else{if(zv(e))throw Error(At(418));e.flags=e.flags&-4097|2,xr=!1,Vo=e}}}function Bb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vo=e}function Up(e){if(e!==Vo)return!1;if(!xr)return Bb(e),xr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Av(e.type,e.memoizedProps)),t&&(t=$o)){if(zv(e))throw gT(),Error(At(418));for(;t;)mT(e,t),t=Jl(t.nextSibling)}if(Bb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){$o=Jl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}$o=null}}else $o=Vo?Jl(e.stateNode.nextSibling):null;return!0}function gT(){for(var e=$o;e;)e=Jl(e.nextSibling)}function bh(){$o=Vo=null,xr=!1}function d1(e){As===null?As=[e]:As.push(e)}var s3=Qa.ReactCurrentBatchConfig;function Cs(e,t){if(e&&e.defaultProps){t=zr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Zm=cu(null),Xm=null,rh=null,f1=null;function p1(){f1=rh=Xm=null}function m1(e){var t=Zm.current;gr(Zm),e._currentValue=t}function Lv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function mh(e,t){Xm=e,f1=rh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wo=!0),e.firstContext=null)}function hs(e){var t=e._currentValue;if(f1!==e)if(e={context:e,memoizedValue:t,next:null},rh===null){if(Xm===null)throw Error(At(308));rh=e,Xm.dependencies={lanes:0,firstContext:e}}else rh=rh.next=e;return t}var Bu=null;function g1(e){Bu===null?Bu=[e]:Bu.push(e)}function yT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,g1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Za(e,a)}function Za(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Nl=!1;function y1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ga(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ql(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Gn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Za(e,i)}return c=a.interleaved,c===null?(t.next=t,g1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Za(e,i)}function vm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,n1(e,i)}}function Nb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var f={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=f:p=p.next=f,i=i.next}while(i!==null);p===null?c=p=t:p=p.next=t}else c=p=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function qm(e,t,i,a){var c=e.updateQueue;Nl=!1;var p=c.firstBaseUpdate,f=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var b=u,C=b.next;b.next=null,f===null?p=C:f.next=C,f=b;var I=e.alternate;I!==null&&(I=I.updateQueue,u=I.lastBaseUpdate,u!==f&&(u===null?I.firstBaseUpdate=C:u.next=C,I.lastBaseUpdate=b))}if(p!==null){var w=c.baseState;f=0,I=C=b=null,u=p;do{var T=u.lane,O=u.eventTime;if((a&T)===T){I!==null&&(I=I.next={eventTime:O,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var U=e,F=u;switch(T=t,O=i,F.tag){case 1:if(U=F.payload,typeof U=="function"){w=U.call(O,w,T);break e}w=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=F.payload,T=typeof U=="function"?U.call(O,w,T):U,T==null)break e;w=zr({},w,T);break e;case 2:Nl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,T=c.effects,T===null?c.effects=[u]:T.push(u))}else O={eventTime:O,lane:T,tag:u.tag,payload:u.payload,callback:u.callback,next:null},I===null?(C=I=O,b=w):I=I.next=O,f|=T;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;T=u,u=T.next,T.next=null,c.lastBaseUpdate=T,c.shared.pending=null}}while(!0);if(I===null&&(b=w),c.baseState=b,c.firstBaseUpdate=C,c.lastBaseUpdate=I,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else p===null&&(c.shared.lanes=0);Xu|=f,e.lanes=f,e.memoizedState=w}}function Ub(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var _T=new yE.Component().refs;function Ov(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:zr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Vg={isMounted:function(e){return(e=e._reactInternals)?tc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=ao(),c=tu(e),p=Ga(a,c);p.payload=t,i!=null&&(p.callback=i),t=Ql(e,p,c),t!==null&&(Os(t,e,c,a),vm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=ao(),c=tu(e),p=Ga(a,c);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=Ql(e,p,c),t!==null&&(Os(t,e,c,a),vm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ao(),a=tu(e),c=Ga(i,a);c.tag=2,t!=null&&(c.callback=t),t=Ql(e,c,a),t!==null&&(Os(t,e,a,i),vm(t,e,a))}};function $b(e,t,i,a,c,p,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,f):t.prototype&&t.prototype.isPureReactComponent?!vf(i,a)||!vf(c,p):!0}function xT(e,t,i){var a=!1,c=iu,p=t.contextType;return typeof p=="object"&&p!==null?p=hs(p):(c=So(t)?Hu:Ki.current,a=t.contextTypes,p=(a=a!=null)?wh(e,c):iu),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=p),t}function Vb(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Vg.enqueueReplaceState(t,t.state,null)}function Fv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=_T,y1(e);var p=t.contextType;typeof p=="object"&&p!==null?c.context=hs(p):(p=So(t)?Hu:Ki.current,c.context=wh(e,p)),c.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(Ov(e,t,p,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Vg.enqueueReplaceState(c,c.state,null),qm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function zd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(f){var u=c.refs;u===_T&&(u=c.refs={}),f===null?delete u[p]:u[p]=f},t._stringRef=p,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function $p(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gb(e){var t=e._init;return t(e._payload)}function wT(e){function t(K,W){if(e){var $=K.deletions;$===null?(K.deletions=[W],K.flags|=16):$.push(W)}}function i(K,W){if(!e)return null;for(;W!==null;)t(K,W),W=W.sibling;return null}function a(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function c(K,W){return K=nu(K,W),K.index=0,K.sibling=null,K}function p(K,W,$){return K.index=$,e?($=K.alternate,$!==null?($=$.index,$<W?(K.flags|=2,W):$):(K.flags|=2,W)):(K.flags|=1048576,W)}function f(K){return e&&K.alternate===null&&(K.flags|=2),K}function u(K,W,$,ie){return W===null||W.tag!==6?(W=S0($,K.mode,ie),W.return=K,W):(W=c(W,$),W.return=K,W)}function b(K,W,$,ie){var X=$.type;return X===qc?I(K,W,$.props.children,ie,$.key):W!==null&&(W.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Bl&&Gb(X)===W.type)?(ie=c(W,$.props),ie.ref=zd(K,W,$),ie.return=K,ie):(ie=Em($.type,$.key,$.props,null,K.mode,ie),ie.ref=zd(K,W,$),ie.return=K,ie)}function C(K,W,$,ie){return W===null||W.tag!==4||W.stateNode.containerInfo!==$.containerInfo||W.stateNode.implementation!==$.implementation?(W=E0($,K.mode,ie),W.return=K,W):(W=c(W,$.children||[]),W.return=K,W)}function I(K,W,$,ie,X){return W===null||W.tag!==7?(W=Gu($,K.mode,ie,X),W.return=K,W):(W=c(W,$),W.return=K,W)}function w(K,W,$){if(typeof W=="string"&&W!==""||typeof W=="number")return W=S0(""+W,K.mode,$),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Mp:return $=Em(W.type,W.key,W.props,null,K.mode,$),$.ref=zd(K,null,W),$.return=K,$;case Xc:return W=E0(W,K.mode,$),W.return=K,W;case Bl:var ie=W._init;return w(K,ie(W._payload),$)}if(jd(W)||Id(W))return W=Gu(W,K.mode,$,null),W.return=K,W;$p(K,W)}return null}function T(K,W,$,ie){var X=W!==null?W.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return X!==null?null:u(K,W,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Mp:return $.key===X?b(K,W,$,ie):null;case Xc:return $.key===X?C(K,W,$,ie):null;case Bl:return X=$._init,T(K,W,X($._payload),ie)}if(jd($)||Id($))return X!==null?null:I(K,W,$,ie,null);$p(K,$)}return null}function O(K,W,$,ie,X){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return K=K.get($)||null,u(W,K,""+ie,X);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Mp:return K=K.get(ie.key===null?$:ie.key)||null,b(W,K,ie,X);case Xc:return K=K.get(ie.key===null?$:ie.key)||null,C(W,K,ie,X);case Bl:var V=ie._init;return O(K,W,$,V(ie._payload),X)}if(jd(ie)||Id(ie))return K=K.get($)||null,I(W,K,ie,X,null);$p(W,ie)}return null}function U(K,W,$,ie){for(var X=null,V=null,E=W,j=W=0,B=null;E!==null&&j<$.length;j++){E.index>j?(B=E,E=null):B=E.sibling;var ee=T(K,E,$[j],ie);if(ee===null){E===null&&(E=B);break}e&&E&&ee.alternate===null&&t(K,E),W=p(ee,W,j),V===null?X=ee:V.sibling=ee,V=ee,E=B}if(j===$.length)return i(K,E),xr&&Ou(K,j),X;if(E===null){for(;j<$.length;j++)E=w(K,$[j],ie),E!==null&&(W=p(E,W,j),V===null?X=E:V.sibling=E,V=E);return xr&&Ou(K,j),X}for(E=a(K,E);j<$.length;j++)B=O(E,K,j,$[j],ie),B!==null&&(e&&B.alternate!==null&&E.delete(B.key===null?j:B.key),W=p(B,W,j),V===null?X=B:V.sibling=B,V=B);return e&&E.forEach(function(q){return t(K,q)}),xr&&Ou(K,j),X}function F(K,W,$,ie){var X=Id($);if(typeof X!="function")throw Error(At(150));if($=X.call($),$==null)throw Error(At(151));for(var V=X=null,E=W,j=W=0,B=null,ee=$.next();E!==null&&!ee.done;j++,ee=$.next()){E.index>j?(B=E,E=null):B=E.sibling;var q=T(K,E,ee.value,ie);if(q===null){E===null&&(E=B);break}e&&E&&q.alternate===null&&t(K,E),W=p(q,W,j),V===null?X=q:V.sibling=q,V=q,E=B}if(ee.done)return i(K,E),xr&&Ou(K,j),X;if(E===null){for(;!ee.done;j++,ee=$.next())ee=w(K,ee.value,ie),ee!==null&&(W=p(ee,W,j),V===null?X=ee:V.sibling=ee,V=ee);return xr&&Ou(K,j),X}for(E=a(K,E);!ee.done;j++,ee=$.next())ee=O(E,K,j,ee.value,ie),ee!==null&&(e&&ee.alternate!==null&&E.delete(ee.key===null?j:ee.key),W=p(ee,W,j),V===null?X=ee:V.sibling=ee,V=ee);return e&&E.forEach(function(me){return t(K,me)}),xr&&Ou(K,j),X}function ue(K,W,$,ie){if(typeof $=="object"&&$!==null&&$.type===qc&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Mp:e:{for(var X=$.key,V=W;V!==null;){if(V.key===X){if(X=$.type,X===qc){if(V.tag===7){i(K,V.sibling),W=c(V,$.props.children),W.return=K,K=W;break e}}else if(V.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Bl&&Gb(X)===V.type){i(K,V.sibling),W=c(V,$.props),W.ref=zd(K,V,$),W.return=K,K=W;break e}i(K,V);break}else t(K,V);V=V.sibling}$.type===qc?(W=Gu($.props.children,K.mode,ie,$.key),W.return=K,K=W):(ie=Em($.type,$.key,$.props,null,K.mode,ie),ie.ref=zd(K,W,$),ie.return=K,K=ie)}return f(K);case Xc:e:{for(V=$.key;W!==null;){if(W.key===V)if(W.tag===4&&W.stateNode.containerInfo===$.containerInfo&&W.stateNode.implementation===$.implementation){i(K,W.sibling),W=c(W,$.children||[]),W.return=K,K=W;break e}else{i(K,W);break}else t(K,W);W=W.sibling}W=E0($,K.mode,ie),W.return=K,K=W}return f(K);case Bl:return V=$._init,ue(K,W,V($._payload),ie)}if(jd($))return U(K,W,$,ie);if(Id($))return F(K,W,$,ie);$p(K,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,W!==null&&W.tag===6?(i(K,W.sibling),W=c(W,$),W.return=K,K=W):(i(K,W),W=S0($,K.mode,ie),W.return=K,K=W),f(K)):i(K,W)}return ue}var Sh=wT(!0),bT=wT(!1),$f={},ia=cu($f),bf=cu($f),Sf=cu($f);function Nu(e){if(e===$f)throw Error(At(174));return e}function v1(e,t){switch(cr(Sf,t),cr(bf,e),cr(ia,$f),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pv(t,e)}gr(ia),cr(ia,t)}function Eh(){gr(ia),gr(bf),gr(Sf)}function ST(e){Nu(Sf.current);var t=Nu(ia.current),i=pv(t,e.type);t!==i&&(cr(bf,e),cr(ia,i))}function _1(e){bf.current===e&&(gr(ia),gr(bf))}var Pr=cu(0);function Km(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var y0=[];function x1(){for(var e=0;e<y0.length;e++)y0[e]._workInProgressVersionPrimary=null;y0.length=0}var _m=Qa.ReactCurrentDispatcher,v0=Qa.ReactCurrentBatchConfig,Zu=0,Mr=null,ii=null,gi=null,Ym=!1,Qd=!1,Ef=0,a3=0;function Hi(){throw Error(At(321))}function w1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Fs(e[i],t[i]))return!1;return!0}function b1(e,t,i,a,c,p){if(Zu=p,Mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_m.current=e===null||e.memoizedState===null?h3:d3,e=i(a,c),Qd){p=0;do{if(Qd=!1,Ef=0,25<=p)throw Error(At(301));p+=1,gi=ii=null,t.updateQueue=null,_m.current=f3,e=i(a,c)}while(Qd)}if(_m.current=Jm,t=ii!==null&&ii.next!==null,Zu=0,gi=ii=Mr=null,Ym=!1,t)throw Error(At(300));return e}function S1(){var e=Ef!==0;return Ef=0,e}function Ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?Mr.memoizedState=gi=e:gi=gi.next=e,gi}function ds(){if(ii===null){var e=Mr.alternate;e=e!==null?e.memoizedState:null}else e=ii.next;var t=gi===null?Mr.memoizedState:gi.next;if(t!==null)gi=t,ii=e;else{if(e===null)throw Error(At(310));ii=e,e={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},gi===null?Mr.memoizedState=gi=e:gi=gi.next=e}return gi}function Tf(e,t){return typeof t=="function"?t(e):t}function _0(e){var t=ds(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=ii,c=a.baseQueue,p=i.pending;if(p!==null){if(c!==null){var f=c.next;c.next=p.next,p.next=f}a.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,a=a.baseState;var u=f=null,b=null,C=p;do{var I=C.lane;if((Zu&I)===I)b!==null&&(b=b.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var w={lane:I,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};b===null?(u=b=w,f=a):b=b.next=w,Mr.lanes|=I,Xu|=I}C=C.next}while(C!==null&&C!==p);b===null?f=a:b.next=u,Fs(a,t.memoizedState)||(wo=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do p=c.lane,Mr.lanes|=p,Xu|=p,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function x0(e){var t=ds(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,p=t.memoizedState;if(c!==null){i.pending=null;var f=c=c.next;do p=e(p,f.action),f=f.next;while(f!==c);Fs(p,t.memoizedState)||(wo=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,a]}function ET(){}function TT(e,t){var i=Mr,a=ds(),c=t(),p=!Fs(a.memoizedState,c);if(p&&(a.memoizedState=c,wo=!0),a=a.queue,E1(AT.bind(null,i,a,e),[e]),a.getSnapshot!==t||p||gi!==null&&gi.memoizedState.tag&1){if(i.flags|=2048,Cf(9,IT.bind(null,i,a,c,t),void 0,null),yi===null)throw Error(At(349));Zu&30||CT(i,t,c)}return c}function CT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function IT(e,t,i,a){t.value=i,t.getSnapshot=a,PT(t)&&kT(e)}function AT(e,t,i){return i(function(){PT(t)&&kT(e)})}function PT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Fs(e,i)}catch{return!0}}function kT(e){var t=Za(e,1);t!==null&&Os(t,e,1,-1)}function Hb(e){var t=Ys();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:e},t.queue=e,e=e.dispatch=c3.bind(null,Mr,e),[t.memoizedState,e]}function Cf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function MT(){return ds().memoizedState}function xm(e,t,i,a){var c=Ys();Mr.flags|=e,c.memoizedState=Cf(1|t,i,void 0,a===void 0?null:a)}function Gg(e,t,i,a){var c=ds();a=a===void 0?null:a;var p=void 0;if(ii!==null){var f=ii.memoizedState;if(p=f.destroy,a!==null&&w1(a,f.deps)){c.memoizedState=Cf(t,i,p,a);return}}Mr.flags|=e,c.memoizedState=Cf(1|t,i,p,a)}function Wb(e,t){return xm(8390656,8,e,t)}function E1(e,t){return Gg(2048,8,e,t)}function zT(e,t){return Gg(4,2,e,t)}function RT(e,t){return Gg(4,4,e,t)}function LT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OT(e,t,i){return i=i!=null?i.concat([e]):null,Gg(4,4,LT.bind(null,t,e),i)}function T1(){}function FT(e,t){var i=ds();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function jT(e,t){var i=ds();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&w1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function DT(e,t,i){return Zu&21?(Fs(i,t)||(i=UE(),Mr.lanes|=i,Xu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=i)}function l3(e,t){var i=Kn;Kn=i!==0&&4>i?i:4,e(!0);var a=v0.transition;v0.transition={};try{e(!1),t()}finally{Kn=i,v0.transition=a}}function BT(){return ds().memoizedState}function u3(e,t,i){var a=tu(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},NT(e))UT(t,i);else if(i=yT(e,t,i,a),i!==null){var c=ao();Os(i,e,a,c),$T(i,t,a)}}function c3(e,t,i){var a=tu(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(NT(e))UT(t,c);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var f=t.lastRenderedState,u=p(f,i);if(c.hasEagerState=!0,c.eagerState=u,Fs(u,f)){var b=t.interleaved;b===null?(c.next=c,g1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=yT(e,t,c,a),i!==null&&(c=ao(),Os(i,e,a,c),$T(i,t,a))}}function NT(e){var t=e.alternate;return e===Mr||t!==null&&t===Mr}function UT(e,t){Qd=Ym=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function $T(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,n1(e,i)}}var Jm={readContext:hs,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useInsertionEffect:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi,useDeferredValue:Hi,useTransition:Hi,useMutableSource:Hi,useSyncExternalStore:Hi,useId:Hi,unstable_isNewReconciler:!1},h3={readContext:hs,useCallback:function(e,t){return Ys().memoizedState=[e,t===void 0?null:t],e},useContext:hs,useEffect:Wb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,xm(4194308,4,LT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return xm(4194308,4,e,t)},useInsertionEffect:function(e,t){return xm(4,2,e,t)},useMemo:function(e,t){var i=Ys();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Ys();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=u3.bind(null,Mr,e),[a.memoizedState,e]},useRef:function(e){var t=Ys();return e={current:e},t.memoizedState=e},useState:Hb,useDebugValue:T1,useDeferredValue:function(e){return Ys().memoizedState=e},useTransition:function(){var e=Hb(!1),t=e[0];return e=l3.bind(null,e[1]),Ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Mr,c=Ys();if(xr){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),yi===null)throw Error(At(349));Zu&30||CT(a,t,i)}c.memoizedState=i;var p={value:i,getSnapshot:t};return c.queue=p,Wb(AT.bind(null,a,p,e),[e]),a.flags|=2048,Cf(9,IT.bind(null,a,p,i,t),void 0,null),i},useId:function(){var e=Ys(),t=yi.identifierPrefix;if(xr){var i=Va,a=$a;i=(a&~(1<<32-Ls(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Ef++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=a3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},d3={readContext:hs,useCallback:FT,useContext:hs,useEffect:E1,useImperativeHandle:OT,useInsertionEffect:zT,useLayoutEffect:RT,useMemo:jT,useReducer:_0,useRef:MT,useState:function(){return _0(Tf)},useDebugValue:T1,useDeferredValue:function(e){var t=ds();return DT(t,ii.memoizedState,e)},useTransition:function(){var e=_0(Tf)[0],t=ds().memoizedState;return[e,t]},useMutableSource:ET,useSyncExternalStore:TT,useId:BT,unstable_isNewReconciler:!1},f3={readContext:hs,useCallback:FT,useContext:hs,useEffect:E1,useImperativeHandle:OT,useInsertionEffect:zT,useLayoutEffect:RT,useMemo:jT,useReducer:x0,useRef:MT,useState:function(){return x0(Tf)},useDebugValue:T1,useDeferredValue:function(e){var t=ds();return ii===null?t.memoizedState=e:DT(t,ii.memoizedState,e)},useTransition:function(){var e=x0(Tf)[0],t=ds().memoizedState;return[e,t]},useMutableSource:ET,useSyncExternalStore:TT,useId:BT,unstable_isNewReconciler:!1};function Th(e,t){try{var i="",a=t;do i+=Uk(a),a=a.return;while(a);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:c,digest:null}}function w0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function jv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var p3=typeof WeakMap=="function"?WeakMap:Map;function VT(e,t,i){i=Ga(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){eg||(eg=!0,Zv=a),jv(e,t)},i}function GT(e,t,i){i=Ga(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){jv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){jv(e,t),typeof a!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),i}function Zb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new p3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=A3.bind(null,e,t,i),t.then(e,e))}function Xb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qb(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ga(-1,1),t.tag=2,Ql(i,t,1))),i.lanes|=1),e)}var m3=Qa.ReactCurrentOwner,wo=!1;function ro(e,t,i,a){t.child=e===null?bT(t,null,i,a):Sh(t,e.child,i,a)}function Kb(e,t,i,a,c){i=i.render;var p=t.ref;return mh(t,c),a=b1(e,t,i,a,p,c),i=S1(),e!==null&&!wo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Xa(e,t,c)):(xr&&i&&c1(t),t.flags|=1,ro(e,t,a,c),t.child)}function Yb(e,t,i,a,c){if(e===null){var p=i.type;return typeof p=="function"&&!R1(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,HT(e,t,p,a,c)):(e=Em(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&c)){var f=p.memoizedProps;if(i=i.compare,i=i!==null?i:vf,i(f,a)&&e.ref===t.ref)return Xa(e,t,c)}return t.flags|=1,e=nu(p,a),e.ref=t.ref,e.return=t,t.child=e}function HT(e,t,i,a,c){if(e!==null){var p=e.memoizedProps;if(vf(p,a)&&e.ref===t.ref)if(wo=!1,t.pendingProps=a=p,(e.lanes&c)!==0)e.flags&131072&&(wo=!0);else return t.lanes=e.lanes,Xa(e,t,c)}return Dv(e,t,i,a,c)}function WT(e,t,i){var a=t.pendingProps,c=a.children,p=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(oh,Do),Do|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,cr(oh,Do),Do|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=p!==null?p.baseLanes:i,cr(oh,Do),Do|=a}else p!==null?(a=p.baseLanes|i,t.memoizedState=null):a=i,cr(oh,Do),Do|=a;return ro(e,t,c,i),t.child}function ZT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Dv(e,t,i,a,c){var p=So(i)?Hu:Ki.current;return p=wh(t,p),mh(t,c),i=b1(e,t,i,a,p,c),a=S1(),e!==null&&!wo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Xa(e,t,c)):(xr&&a&&c1(t),t.flags|=1,ro(e,t,i,c),t.child)}function Jb(e,t,i,a,c){if(So(i)){var p=!0;Gm(t)}else p=!1;if(mh(t,c),t.stateNode===null)wm(e,t),xT(t,i,a),Fv(t,i,a,c),a=!0;else if(e===null){var f=t.stateNode,u=t.memoizedProps;f.props=u;var b=f.context,C=i.contextType;typeof C=="object"&&C!==null?C=hs(C):(C=So(i)?Hu:Ki.current,C=wh(t,C));var I=i.getDerivedStateFromProps,w=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function";w||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==a||b!==C)&&Vb(t,f,a,C),Nl=!1;var T=t.memoizedState;f.state=T,qm(t,a,f,c),b=t.memoizedState,u!==a||T!==b||bo.current||Nl?(typeof I=="function"&&(Ov(t,i,I,a),b=t.memoizedState),(u=Nl||$b(t,i,u,a,T,b,C))?(w||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),f.props=a,f.state=b,f.context=C,a=u):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,vT(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:Cs(t.type,u),f.props=C,w=t.pendingProps,T=f.context,b=i.contextType,typeof b=="object"&&b!==null?b=hs(b):(b=So(i)?Hu:Ki.current,b=wh(t,b));var O=i.getDerivedStateFromProps;(I=typeof O=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==w||T!==b)&&Vb(t,f,a,b),Nl=!1,T=t.memoizedState,f.state=T,qm(t,a,f,c);var U=t.memoizedState;u!==w||T!==U||bo.current||Nl?(typeof O=="function"&&(Ov(t,i,O,a),U=t.memoizedState),(C=Nl||$b(t,i,C,a,T,U,b)||!1)?(I||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,U,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,U,b)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=U),f.props=a,f.state=U,f.context=b,a=C):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return Bv(e,t,i,a,p,c)}function Bv(e,t,i,a,c,p){ZT(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return c&&jb(t,i,!1),Xa(e,t,p);a=t.stateNode,m3.current=t;var u=f&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=Sh(t,e.child,null,p),t.child=Sh(t,null,u,p)):ro(e,t,u,p),t.memoizedState=a.state,c&&jb(t,i,!0),t.child}function XT(e){var t=e.stateNode;t.pendingContext?Fb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fb(e,t.context,!1),v1(e,t.containerInfo)}function Qb(e,t,i,a,c){return bh(),d1(c),t.flags|=256,ro(e,t,i,a),t.child}var Nv={dehydrated:null,treeContext:null,retryLane:0};function Uv(e){return{baseLanes:e,cachePool:null,transitions:null}}function qT(e,t,i){var a=t.pendingProps,c=Pr.current,p=!1,f=(t.flags&128)!==0,u;if((u=f)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),cr(Pr,c&1),e===null)return Rv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,p?(a=t.mode,p=t.child,f={mode:"hidden",children:f},!(a&1)&&p!==null?(p.childLanes=0,p.pendingProps=f):p=Zg(f,a,0,null),e=Gu(e,a,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Uv(i),t.memoizedState=Nv,e):C1(t,f));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return g3(e,t,f,a,u,c,i);if(p){p=a.fallback,f=t.mode,c=e.child,u=c.sibling;var b={mode:"hidden",children:a.children};return!(f&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=nu(c,b),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?p=nu(u,p):(p=Gu(p,f,i,null),p.flags|=2),p.return=t,a.return=t,a.sibling=p,t.child=a,a=p,p=t.child,f=e.child.memoizedState,f=f===null?Uv(i):{baseLanes:f.baseLanes|i,cachePool:null,transitions:f.transitions},p.memoizedState=f,p.childLanes=e.childLanes&~i,t.memoizedState=Nv,a}return p=e.child,e=p.sibling,a=nu(p,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function C1(e,t){return t=Zg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vp(e,t,i,a){return a!==null&&d1(a),Sh(t,e.child,null,i),e=C1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g3(e,t,i,a,c,p,f){if(i)return t.flags&256?(t.flags&=-257,a=w0(Error(At(422))),Vp(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=a.fallback,c=t.mode,a=Zg({mode:"visible",children:a.children},c,0,null),p=Gu(p,c,f,null),p.flags|=2,a.return=t,p.return=t,a.sibling=p,t.child=a,t.mode&1&&Sh(t,e.child,null,f),t.child.memoizedState=Uv(f),t.memoizedState=Nv,p);if(!(t.mode&1))return Vp(e,t,f,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,p=Error(At(419)),a=w0(p,a,void 0),Vp(e,t,f,a)}if(u=(f&e.childLanes)!==0,wo||u){if(a=yi,a!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|f)?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,Za(e,c),Os(a,e,c,-1))}return z1(),a=w0(Error(At(421))),Vp(e,t,f,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=P3.bind(null,e),c._reactRetry=t,null):(e=p.treeContext,$o=Jl(c.nextSibling),Vo=t,xr=!0,As=null,e!==null&&(ss[as++]=$a,ss[as++]=Va,ss[as++]=Wu,$a=e.id,Va=e.overflow,Wu=t),t=C1(t,a.children),t.flags|=4096,t)}function e2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Lv(e.return,t,i)}function b0(e,t,i,a,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=a,p.tail=i,p.tailMode=c)}function KT(e,t,i){var a=t.pendingProps,c=a.revealOrder,p=a.tail;if(ro(e,t,a.children,i),a=Pr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&e2(e,i,t);else if(e.tag===19)e2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(cr(Pr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Km(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),b0(t,!1,c,i,p);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Km(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}b0(t,!0,i,null,p);break;case"together":b0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Xu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=nu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=nu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function y3(e,t,i){switch(t.tag){case 3:XT(t),bh();break;case 5:ST(t);break;case 1:So(t.type)&&Gm(t);break;case 4:v1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;cr(Zm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(cr(Pr,Pr.current&1),t.flags|=128,null):i&t.child.childLanes?qT(e,t,i):(cr(Pr,Pr.current&1),e=Xa(e,t,i),e!==null?e.sibling:null);cr(Pr,Pr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return KT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),cr(Pr,Pr.current),a)break;return null;case 22:case 23:return t.lanes=0,WT(e,t,i)}return Xa(e,t,i)}var YT,$v,JT,QT;YT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};$v=function(){};JT=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Nu(ia.current);var p=null;switch(i){case"input":c=cv(e,c),a=cv(e,a),p=[];break;case"select":c=zr({},c,{value:void 0}),a=zr({},a,{value:void 0}),p=[];break;case"textarea":c=fv(e,c),a=fv(e,a),p=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=$m)}mv(i,a);var f;i=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var u=c[C];for(f in u)u.hasOwnProperty(f)&&(i||(i={}),i[f]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(hf.hasOwnProperty(C)?p||(p=[]):(p=p||[]).push(C,null));for(C in a){var b=a[C];if(u=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&b!==u&&(b!=null||u!=null))if(C==="style")if(u){for(f in u)!u.hasOwnProperty(f)||b&&b.hasOwnProperty(f)||(i||(i={}),i[f]="");for(f in b)b.hasOwnProperty(f)&&u[f]!==b[f]&&(i||(i={}),i[f]=b[f])}else i||(p||(p=[]),p.push(C,i)),i=b;else C==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(p=p||[]).push(C,b)):C==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push(C,""+b):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(hf.hasOwnProperty(C)?(b!=null&&C==="onScroll"&&pr("scroll",e),p||u===b||(p=[])):(p=p||[]).push(C,b))}i&&(p=p||[]).push("style",i);var C=p;(t.updateQueue=C)&&(t.flags|=4)}};QT=function(e,t,i,a){i!==a&&(t.flags|=4)};function Rd(e,t){if(!xr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function v3(e,t,i){var a=t.pendingProps;switch(h1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(t),null;case 1:return So(t.type)&&Vm(),Wi(t),null;case 3:return a=t.stateNode,Eh(),gr(bo),gr(Ki),x1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Up(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,As!==null&&(Kv(As),As=null))),$v(e,t),Wi(t),null;case 5:_1(t);var c=Nu(Sf.current);if(i=t.type,e!==null&&t.stateNode!=null)JT(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return Wi(t),null}if(e=Nu(ia.current),Up(t)){a=t.stateNode,i=t.type;var p=t.memoizedProps;switch(a[Js]=t,a[wf]=p,e=(t.mode&1)!==0,i){case"dialog":pr("cancel",a),pr("close",a);break;case"iframe":case"object":case"embed":pr("load",a);break;case"video":case"audio":for(c=0;c<Bd.length;c++)pr(Bd[c],a);break;case"source":pr("error",a);break;case"img":case"image":case"link":pr("error",a),pr("load",a);break;case"details":pr("toggle",a);break;case"input":ub(a,p),pr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!p.multiple},pr("invalid",a);break;case"textarea":hb(a,p),pr("invalid",a)}mv(i,p),c=null;for(var f in p)if(p.hasOwnProperty(f)){var u=p[f];f==="children"?typeof u=="string"?a.textContent!==u&&(p.suppressHydrationWarning!==!0&&Np(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(p.suppressHydrationWarning!==!0&&Np(a.textContent,u,e),c=["children",""+u]):hf.hasOwnProperty(f)&&u!=null&&f==="onScroll"&&pr("scroll",a)}switch(i){case"input":zp(a),cb(a,p,!0);break;case"textarea":zp(a),db(a);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(a.onclick=$m)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=CE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(i,{is:a.is}):(e=f.createElement(i),i==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,i),e[Js]=t,e[wf]=a,YT(e,t,!1,!1),t.stateNode=e;e:{switch(f=gv(i,a),i){case"dialog":pr("cancel",e),pr("close",e),c=a;break;case"iframe":case"object":case"embed":pr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Bd.length;c++)pr(Bd[c],e);c=a;break;case"source":pr("error",e),c=a;break;case"img":case"image":case"link":pr("error",e),pr("load",e),c=a;break;case"details":pr("toggle",e),c=a;break;case"input":ub(e,a),c=cv(e,a),pr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=zr({},a,{value:void 0}),pr("invalid",e);break;case"textarea":hb(e,a),c=fv(e,a),pr("invalid",e);break;default:c=a}mv(i,c),u=c;for(p in u)if(u.hasOwnProperty(p)){var b=u[p];p==="style"?PE(e,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&IE(e,b)):p==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&df(e,b):typeof b=="number"&&df(e,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(hf.hasOwnProperty(p)?b!=null&&p==="onScroll"&&pr("scroll",e):b!=null&&K_(e,p,b,f))}switch(i){case"input":zp(e),cb(e,a,!1);break;case"textarea":zp(e),db(e);break;case"option":a.value!=null&&e.setAttribute("value",""+ru(a.value));break;case"select":e.multiple=!!a.multiple,p=a.value,p!=null?hh(e,!!a.multiple,p,!1):a.defaultValue!=null&&hh(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=$m)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wi(t),null;case 6:if(e&&t.stateNode!=null)QT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=Nu(Sf.current),Nu(ia.current),Up(t)){if(a=t.stateNode,i=t.memoizedProps,a[Js]=t,(p=a.nodeValue!==i)&&(e=Vo,e!==null))switch(e.tag){case 3:Np(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Np(a.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Js]=t,t.stateNode=a}return Wi(t),null;case 13:if(gr(Pr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xr&&$o!==null&&t.mode&1&&!(t.flags&128))gT(),bh(),t.flags|=98560,p=!1;else if(p=Up(t),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(At(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(At(317));p[Js]=t}else bh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wi(t),p=!1}else As!==null&&(Kv(As),As=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Pr.current&1?oi===0&&(oi=3):z1())),t.updateQueue!==null&&(t.flags|=4),Wi(t),null);case 4:return Eh(),$v(e,t),e===null&&_f(t.stateNode.containerInfo),Wi(t),null;case 10:return m1(t.type._context),Wi(t),null;case 17:return So(t.type)&&Vm(),Wi(t),null;case 19:if(gr(Pr),p=t.memoizedState,p===null)return Wi(t),null;if(a=(t.flags&128)!==0,f=p.rendering,f===null)if(a)Rd(p,!1);else{if(oi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Km(e),f!==null){for(t.flags|=128,Rd(p,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)p=i,e=a,p.flags&=14680066,f=p.alternate,f===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=f.childLanes,p.lanes=f.lanes,p.child=f.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=f.memoizedProps,p.memoizedState=f.memoizedState,p.updateQueue=f.updateQueue,p.type=f.type,e=f.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return cr(Pr,Pr.current&1|2),t.child}e=e.sibling}p.tail!==null&&Xr()>Ch&&(t.flags|=128,a=!0,Rd(p,!1),t.lanes=4194304)}else{if(!a)if(e=Km(f),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Rd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!f.alternate&&!xr)return Wi(t),null}else 2*Xr()-p.renderingStartTime>Ch&&i!==1073741824&&(t.flags|=128,a=!0,Rd(p,!1),t.lanes=4194304);p.isBackwards?(f.sibling=t.child,t.child=f):(i=p.last,i!==null?i.sibling=f:t.child=f,p.last=f)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Xr(),t.sibling=null,i=Pr.current,cr(Pr,a?i&1|2:i&1),t):(Wi(t),null);case 22:case 23:return M1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Do&1073741824&&(Wi(t),t.subtreeFlags&6&&(t.flags|=8192)):Wi(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function _3(e,t){switch(h1(t),t.tag){case 1:return So(t.type)&&Vm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eh(),gr(bo),gr(Ki),x1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _1(t),null;case 13:if(gr(Pr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));bh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gr(Pr),null;case 4:return Eh(),null;case 10:return m1(t.type._context),null;case 22:case 23:return M1(),null;case 24:return null;default:return null}}var Gp=!1,Xi=!1,x3=typeof WeakSet=="function"?WeakSet:Set,en=null;function ih(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Fr(e,t,a)}else i.current=null}function Vv(e,t,i){try{i()}catch(a){Fr(e,t,a)}}var t2=!1;function w3(e,t){if(Cv=Bm,e=rT(),u1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var f=0,u=-1,b=-1,C=0,I=0,w=e,T=null;t:for(;;){for(var O;w!==i||c!==0&&w.nodeType!==3||(u=f+c),w!==p||a!==0&&w.nodeType!==3||(b=f+a),w.nodeType===3&&(f+=w.nodeValue.length),(O=w.firstChild)!==null;)T=w,w=O;for(;;){if(w===e)break t;if(T===i&&++C===c&&(u=f),T===p&&++I===a&&(b=f),(O=w.nextSibling)!==null)break;w=T,T=w.parentNode}w=O}i=u===-1||b===-1?null:{start:u,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(Iv={focusedElem:e,selectionRange:i},Bm=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var F=U.memoizedProps,ue=U.memoizedState,K=t.stateNode,W=K.getSnapshotBeforeUpdate(t.elementType===t.type?F:Cs(t.type,F),ue);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(ie){Fr(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return U=t2,t2=!1,U}function ef(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var p=c.destroy;c.destroy=void 0,p!==void 0&&Vv(t,i,p)}c=c.next}while(c!==a)}}function Hg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function Gv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function eC(e){var t=e.alternate;t!==null&&(e.alternate=null,eC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Js],delete t[wf],delete t[kv],delete t[r3],delete t[i3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tC(e){return e.tag===5||e.tag===3||e.tag===4}function n2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=$m));else if(a!==4&&(e=e.child,e!==null))for(Hv(e,t,i),e=e.sibling;e!==null;)Hv(e,t,i),e=e.sibling}function Wv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wv(e,t,i),e=e.sibling;e!==null;)Wv(e,t,i),e=e.sibling}var Mi=null,Is=!1;function jl(e,t,i){for(i=i.child;i!==null;)nC(e,t,i),i=i.sibling}function nC(e,t,i){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(jg,i)}catch{}switch(i.tag){case 5:Xi||ih(i,t);case 6:var a=Mi,c=Is;Mi=null,jl(e,t,i),Mi=a,Is=c,Mi!==null&&(Is?(e=Mi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Mi.removeChild(i.stateNode));break;case 18:Mi!==null&&(Is?(e=Mi,i=i.stateNode,e.nodeType===8?m0(e.parentNode,i):e.nodeType===1&&m0(e,i),gf(e)):m0(Mi,i.stateNode));break;case 4:a=Mi,c=Is,Mi=i.stateNode.containerInfo,Is=!0,jl(e,t,i),Mi=a,Is=c;break;case 0:case 11:case 14:case 15:if(!Xi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var p=c,f=p.destroy;p=p.tag,f!==void 0&&(p&2||p&4)&&Vv(i,t,f),c=c.next}while(c!==a)}jl(e,t,i);break;case 1:if(!Xi&&(ih(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Fr(i,t,u)}jl(e,t,i);break;case 21:jl(e,t,i);break;case 22:i.mode&1?(Xi=(a=Xi)||i.memoizedState!==null,jl(e,t,i),Xi=a):jl(e,t,i);break;default:jl(e,t,i)}}function r2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new x3),t.forEach(function(a){var c=k3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Ts(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var p=e,f=t,u=f;e:for(;u!==null;){switch(u.tag){case 5:Mi=u.stateNode,Is=!1;break e;case 3:Mi=u.stateNode.containerInfo,Is=!0;break e;case 4:Mi=u.stateNode.containerInfo,Is=!0;break e}u=u.return}if(Mi===null)throw Error(At(160));nC(p,f,c),Mi=null,Is=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(C){Fr(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rC(t,e),t=t.sibling}function rC(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ts(t,e),Ks(e),a&4){try{ef(3,e,e.return),Hg(3,e)}catch(F){Fr(e,e.return,F)}try{ef(5,e,e.return)}catch(F){Fr(e,e.return,F)}}break;case 1:Ts(t,e),Ks(e),a&512&&i!==null&&ih(i,i.return);break;case 5:if(Ts(t,e),Ks(e),a&512&&i!==null&&ih(i,i.return),e.flags&32){var c=e.stateNode;try{df(c,"")}catch(F){Fr(e,e.return,F)}}if(a&4&&(c=e.stateNode,c!=null)){var p=e.memoizedProps,f=i!==null?i.memoizedProps:p,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&p.type==="radio"&&p.name!=null&&EE(c,p),gv(u,f);var C=gv(u,p);for(f=0;f<b.length;f+=2){var I=b[f],w=b[f+1];I==="style"?PE(c,w):I==="dangerouslySetInnerHTML"?IE(c,w):I==="children"?df(c,w):K_(c,I,w,C)}switch(u){case"input":hv(c,p);break;case"textarea":TE(c,p);break;case"select":var T=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var O=p.value;O!=null?hh(c,!!p.multiple,O,!1):T!==!!p.multiple&&(p.defaultValue!=null?hh(c,!!p.multiple,p.defaultValue,!0):hh(c,!!p.multiple,p.multiple?[]:"",!1))}c[wf]=p}catch(F){Fr(e,e.return,F)}}break;case 6:if(Ts(t,e),Ks(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,p=e.memoizedProps;try{c.nodeValue=p}catch(F){Fr(e,e.return,F)}}break;case 3:if(Ts(t,e),Ks(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{gf(t.containerInfo)}catch(F){Fr(e,e.return,F)}break;case 4:Ts(t,e),Ks(e);break;case 13:Ts(t,e),Ks(e),c=e.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(P1=Xr())),a&4&&r2(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(Xi=(C=Xi)||I,Ts(t,e),Xi=C):Ts(t,e),Ks(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!I&&e.mode&1)for(en=e,I=e.child;I!==null;){for(w=en=I;en!==null;){switch(T=en,O=T.child,T.tag){case 0:case 11:case 14:case 15:ef(4,T,T.return);break;case 1:ih(T,T.return);var U=T.stateNode;if(typeof U.componentWillUnmount=="function"){a=T,i=T.return;try{t=a,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(F){Fr(a,i,F)}}break;case 5:ih(T,T.return);break;case 22:if(T.memoizedState!==null){o2(w);continue}}O!==null?(O.return=T,en=O):o2(w)}I=I.sibling}e:for(I=null,w=e;;){if(w.tag===5){if(I===null){I=w;try{c=w.stateNode,C?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(u=w.stateNode,b=w.memoizedProps.style,f=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=AE("display",f))}catch(F){Fr(e,e.return,F)}}}else if(w.tag===6){if(I===null)try{w.stateNode.nodeValue=C?"":w.memoizedProps}catch(F){Fr(e,e.return,F)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;I===w&&(I=null),w=w.return}I===w&&(I=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Ts(t,e),Ks(e),a&4&&r2(e);break;case 21:break;default:Ts(t,e),Ks(e)}}function Ks(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(tC(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(df(c,""),a.flags&=-33);var p=n2(e);Wv(e,p,c);break;case 3:case 4:var f=a.stateNode.containerInfo,u=n2(e);Hv(e,u,f);break;default:throw Error(At(161))}}catch(b){Fr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b3(e,t,i){en=e,iC(e)}function iC(e,t,i){for(var a=(e.mode&1)!==0;en!==null;){var c=en,p=c.child;if(c.tag===22&&a){var f=c.memoizedState!==null||Gp;if(!f){var u=c.alternate,b=u!==null&&u.memoizedState!==null||Xi;u=Gp;var C=Xi;if(Gp=f,(Xi=b)&&!C)for(en=c;en!==null;)f=en,b=f.child,f.tag===22&&f.memoizedState!==null?s2(c):b!==null?(b.return=f,en=b):s2(c);for(;p!==null;)en=p,iC(p),p=p.sibling;en=c,Gp=u,Xi=C}i2(e)}else c.subtreeFlags&8772&&p!==null?(p.return=c,en=p):i2(e)}}function i2(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xi||Hg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Xi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Cs(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&Ub(t,p,a);break;case 3:var f=t.updateQueue;if(f!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ub(t,f,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var I=C.memoizedState;if(I!==null){var w=I.dehydrated;w!==null&&gf(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Xi||t.flags&512&&Gv(t)}catch(T){Fr(t,t.return,T)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function o2(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function s2(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Hg(4,t)}catch(b){Fr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Fr(t,c,b)}}var p=t.return;try{Gv(t)}catch(b){Fr(t,p,b)}break;case 5:var f=t.return;try{Gv(t)}catch(b){Fr(t,f,b)}}}catch(b){Fr(t,t.return,b)}if(t===e){en=null;break}var u=t.sibling;if(u!==null){u.return=t.return,en=u;break}en=t.return}}var S3=Math.ceil,Qm=Qa.ReactCurrentDispatcher,I1=Qa.ReactCurrentOwner,cs=Qa.ReactCurrentBatchConfig,Gn=0,yi=null,ti=null,Ri=0,Do=0,oh=cu(0),oi=0,If=null,Xu=0,Wg=0,A1=0,tf=null,_o=null,P1=0,Ch=1/0,Ba=null,eg=!1,Zv=null,eu=null,Hp=!1,Zl=null,tg=0,nf=0,Xv=null,bm=-1,Sm=0;function ao(){return Gn&6?Xr():bm!==-1?bm:bm=Xr()}function tu(e){return e.mode&1?Gn&2&&Ri!==0?Ri&-Ri:s3.transition!==null?(Sm===0&&(Sm=UE()),Sm):(e=Kn,e!==0||(e=window.event,e=e===void 0?16:XE(e.type)),e):1}function Os(e,t,i,a){if(50<nf)throw nf=0,Xv=null,Error(At(185));Bf(e,i,a),(!(Gn&2)||e!==yi)&&(e===yi&&(!(Gn&2)&&(Wg|=i),oi===4&&Gl(e,Ri)),Eo(e,a),i===1&&Gn===0&&!(t.mode&1)&&(Ch=Xr()+500,$g&&hu()))}function Eo(e,t){var i=e.callbackNode;sM(e,t);var a=Dm(e,e===yi?Ri:0);if(a===0)i!==null&&mb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&mb(i),t===1)e.tag===0?o3(a2.bind(null,e)):fT(a2.bind(null,e)),t3(function(){!(Gn&6)&&hu()}),i=null;else{switch($E(a)){case 1:i=t1;break;case 4:i=BE;break;case 16:i=jm;break;case 536870912:i=NE;break;default:i=jm}i=dC(i,oC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function oC(e,t){if(bm=-1,Sm=0,Gn&6)throw Error(At(327));var i=e.callbackNode;if(gh()&&e.callbackNode!==i)return null;var a=Dm(e,e===yi?Ri:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ng(e,a);else{t=a;var c=Gn;Gn|=2;var p=aC();(yi!==e||Ri!==t)&&(Ba=null,Ch=Xr()+500,Vu(e,t));do try{C3();break}catch(u){sC(e,u)}while(!0);p1(),Qm.current=p,Gn=c,ti!==null?t=0:(yi=null,Ri=0,t=oi)}if(t!==0){if(t===2&&(c=wv(e),c!==0&&(a=c,t=qv(e,c))),t===1)throw i=If,Vu(e,0),Gl(e,a),Eo(e,Xr()),i;if(t===6)Gl(e,a);else{if(c=e.current.alternate,!(a&30)&&!E3(c)&&(t=ng(e,a),t===2&&(p=wv(e),p!==0&&(a=p,t=qv(e,p))),t===1))throw i=If,Vu(e,0),Gl(e,a),Eo(e,Xr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:Fu(e,_o,Ba);break;case 3:if(Gl(e,a),(a&130023424)===a&&(t=P1+500-Xr(),10<t)){if(Dm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){ao(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Pv(Fu.bind(null,e,_o,Ba),t);break}Fu(e,_o,Ba);break;case 4:if(Gl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var f=31-Ls(a);p=1<<f,f=t[f],f>c&&(c=f),a&=~p}if(a=c,a=Xr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*S3(a/1960))-a,10<a){e.timeoutHandle=Pv(Fu.bind(null,e,_o,Ba),a);break}Fu(e,_o,Ba);break;case 5:Fu(e,_o,Ba);break;default:throw Error(At(329))}}}return Eo(e,Xr()),e.callbackNode===i?oC.bind(null,e):null}function qv(e,t){var i=tf;return e.current.memoizedState.isDehydrated&&(Vu(e,t).flags|=256),e=ng(e,t),e!==2&&(t=_o,_o=i,t!==null&&Kv(t)),e}function Kv(e){_o===null?_o=e:_o.push.apply(_o,e)}function E3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],p=c.getSnapshot;c=c.value;try{if(!Fs(p(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gl(e,t){for(t&=~A1,t&=~Wg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ls(t),a=1<<i;e[i]=-1,t&=~a}}function a2(e){if(Gn&6)throw Error(At(327));gh();var t=Dm(e,0);if(!(t&1))return Eo(e,Xr()),null;var i=ng(e,t);if(e.tag!==0&&i===2){var a=wv(e);a!==0&&(t=a,i=qv(e,a))}if(i===1)throw i=If,Vu(e,0),Gl(e,t),Eo(e,Xr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fu(e,_o,Ba),Eo(e,Xr()),null}function k1(e,t){var i=Gn;Gn|=1;try{return e(t)}finally{Gn=i,Gn===0&&(Ch=Xr()+500,$g&&hu())}}function qu(e){Zl!==null&&Zl.tag===0&&!(Gn&6)&&gh();var t=Gn;Gn|=1;var i=cs.transition,a=Kn;try{if(cs.transition=null,Kn=1,e)return e()}finally{Kn=a,cs.transition=i,Gn=t,!(Gn&6)&&hu()}}function M1(){Do=oh.current,gr(oh)}function Vu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,e3(i)),ti!==null)for(i=ti.return;i!==null;){var a=i;switch(h1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Vm();break;case 3:Eh(),gr(bo),gr(Ki),x1();break;case 5:_1(a);break;case 4:Eh();break;case 13:gr(Pr);break;case 19:gr(Pr);break;case 10:m1(a.type._context);break;case 22:case 23:M1()}i=i.return}if(yi=e,ti=e=nu(e.current,null),Ri=Do=t,oi=0,If=null,A1=Wg=Xu=0,_o=tf=null,Bu!==null){for(t=0;t<Bu.length;t++)if(i=Bu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,p=i.pending;if(p!==null){var f=p.next;p.next=c,a.next=f}i.pending=a}Bu=null}return e}function sC(e,t){do{var i=ti;try{if(p1(),_m.current=Jm,Ym){for(var a=Mr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ym=!1}if(Zu=0,gi=ii=Mr=null,Qd=!1,Ef=0,I1.current=null,i===null||i.return===null){oi=1,If=t,ti=null;break}e:{var p=e,f=i.return,u=i,b=t;if(t=Ri,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var C=b,I=u,w=I.tag;if(!(I.mode&1)&&(w===0||w===11||w===15)){var T=I.alternate;T?(I.updateQueue=T.updateQueue,I.memoizedState=T.memoizedState,I.lanes=T.lanes):(I.updateQueue=null,I.memoizedState=null)}var O=Xb(f);if(O!==null){O.flags&=-257,qb(O,f,u,p,t),O.mode&1&&Zb(p,C,t),t=O,b=C;var U=t.updateQueue;if(U===null){var F=new Set;F.add(b),t.updateQueue=F}else U.add(b);break e}else{if(!(t&1)){Zb(p,C,t),z1();break e}b=Error(At(426))}}else if(xr&&u.mode&1){var ue=Xb(f);if(ue!==null){!(ue.flags&65536)&&(ue.flags|=256),qb(ue,f,u,p,t),d1(Th(b,u));break e}}p=b=Th(b,u),oi!==4&&(oi=2),tf===null?tf=[p]:tf.push(p),p=f;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var K=VT(p,b,t);Nb(p,K);break e;case 1:u=b;var W=p.type,$=p.stateNode;if(!(p.flags&128)&&(typeof W.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(eu===null||!eu.has($)))){p.flags|=65536,t&=-t,p.lanes|=t;var ie=GT(p,u,t);Nb(p,ie);break e}}p=p.return}while(p!==null)}uC(i)}catch(X){t=X,ti===i&&i!==null&&(ti=i=i.return);continue}break}while(!0)}function aC(){var e=Qm.current;return Qm.current=Jm,e===null?Jm:e}function z1(){(oi===0||oi===3||oi===2)&&(oi=4),yi===null||!(Xu&268435455)&&!(Wg&268435455)||Gl(yi,Ri)}function ng(e,t){var i=Gn;Gn|=2;var a=aC();(yi!==e||Ri!==t)&&(Ba=null,Vu(e,t));do try{T3();break}catch(c){sC(e,c)}while(!0);if(p1(),Gn=i,Qm.current=a,ti!==null)throw Error(At(261));return yi=null,Ri=0,oi}function T3(){for(;ti!==null;)lC(ti)}function C3(){for(;ti!==null&&!Yk();)lC(ti)}function lC(e){var t=hC(e.alternate,e,Do);e.memoizedProps=e.pendingProps,t===null?uC(e):ti=t,I1.current=null}function uC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=_3(i,t),i!==null){i.flags&=32767,ti=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oi=6,ti=null;return}}else if(i=v3(i,t,Do),i!==null){ti=i;return}if(t=t.sibling,t!==null){ti=t;return}ti=t=e}while(t!==null);oi===0&&(oi=5)}function Fu(e,t,i){var a=Kn,c=cs.transition;try{cs.transition=null,Kn=1,I3(e,t,i,a)}finally{cs.transition=c,Kn=a}return null}function I3(e,t,i,a){do gh();while(Zl!==null);if(Gn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(aM(e,p),e===yi&&(ti=yi=null,Ri=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Hp||(Hp=!0,dC(jm,function(){return gh(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=cs.transition,cs.transition=null;var f=Kn;Kn=1;var u=Gn;Gn|=4,I1.current=null,w3(e,i),rC(i,e),ZM(Iv),Bm=!!Cv,Iv=Cv=null,e.current=i,b3(i),Jk(),Gn=u,Kn=f,cs.transition=p}else e.current=i;if(Hp&&(Hp=!1,Zl=e,tg=c),p=e.pendingLanes,p===0&&(eu=null),tM(i.stateNode),Eo(e,Xr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(eg)throw eg=!1,e=Zv,Zv=null,e;return tg&1&&e.tag!==0&&gh(),p=e.pendingLanes,p&1?e===Xv?nf++:(nf=0,Xv=e):nf=0,hu(),null}function gh(){if(Zl!==null){var e=$E(tg),t=cs.transition,i=Kn;try{if(cs.transition=null,Kn=16>e?16:e,Zl===null)var a=!1;else{if(e=Zl,Zl=null,tg=0,Gn&6)throw Error(At(331));var c=Gn;for(Gn|=4,en=e.current;en!==null;){var p=en,f=p.child;if(en.flags&16){var u=p.deletions;if(u!==null){for(var b=0;b<u.length;b++){var C=u[b];for(en=C;en!==null;){var I=en;switch(I.tag){case 0:case 11:case 15:ef(8,I,p)}var w=I.child;if(w!==null)w.return=I,en=w;else for(;en!==null;){I=en;var T=I.sibling,O=I.return;if(eC(I),I===C){en=null;break}if(T!==null){T.return=O,en=T;break}en=O}}}var U=p.alternate;if(U!==null){var F=U.child;if(F!==null){U.child=null;do{var ue=F.sibling;F.sibling=null,F=ue}while(F!==null)}}en=p}}if(p.subtreeFlags&2064&&f!==null)f.return=p,en=f;else e:for(;en!==null;){if(p=en,p.flags&2048)switch(p.tag){case 0:case 11:case 15:ef(9,p,p.return)}var K=p.sibling;if(K!==null){K.return=p.return,en=K;break e}en=p.return}}var W=e.current;for(en=W;en!==null;){f=en;var $=f.child;if(f.subtreeFlags&2064&&$!==null)$.return=f,en=$;else e:for(f=W;en!==null;){if(u=en,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Hg(9,u)}}catch(X){Fr(u,u.return,X)}if(u===f){en=null;break e}var ie=u.sibling;if(ie!==null){ie.return=u.return,en=ie;break e}en=u.return}}if(Gn=c,hu(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(jg,e)}catch{}a=!0}return a}finally{Kn=i,cs.transition=t}}return!1}function l2(e,t,i){t=Th(i,t),t=VT(e,t,1),e=Ql(e,t,1),t=ao(),e!==null&&(Bf(e,1,t),Eo(e,t))}function Fr(e,t,i){if(e.tag===3)l2(e,e,i);else for(;t!==null;){if(t.tag===3){l2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(eu===null||!eu.has(a))){e=Th(i,e),e=GT(t,e,1),t=Ql(t,e,1),e=ao(),t!==null&&(Bf(t,1,e),Eo(t,e));break}}t=t.return}}function A3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=ao(),e.pingedLanes|=e.suspendedLanes&i,yi===e&&(Ri&i)===i&&(oi===4||oi===3&&(Ri&130023424)===Ri&&500>Xr()-P1?Vu(e,0):A1|=i),Eo(e,t)}function cC(e,t){t===0&&(e.mode&1?(t=Op,Op<<=1,!(Op&130023424)&&(Op=4194304)):t=1);var i=ao();e=Za(e,t),e!==null&&(Bf(e,t,i),Eo(e,i))}function P3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),cC(e,i)}function k3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),cC(e,i)}var hC;hC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||bo.current)wo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return wo=!1,y3(e,t,i);wo=!!(e.flags&131072)}else wo=!1,xr&&t.flags&1048576&&pT(t,Wm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;wm(e,t),e=t.pendingProps;var c=wh(t,Ki.current);mh(t,i),c=b1(null,t,a,e,c,i);var p=S1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,So(a)?(p=!0,Gm(t)):p=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,y1(t),c.updater=Vg,t.stateNode=c,c._reactInternals=t,Fv(t,a,e,i),t=Bv(null,t,a,!0,p,i)):(t.tag=0,xr&&p&&c1(t),ro(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(wm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=z3(a),e=Cs(a,e),c){case 0:t=Dv(null,t,a,e,i);break e;case 1:t=Jb(null,t,a,e,i);break e;case 11:t=Kb(null,t,a,e,i);break e;case 14:t=Yb(null,t,a,Cs(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Cs(a,c),Dv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Cs(a,c),Jb(e,t,a,c,i);case 3:e:{if(XT(t),e===null)throw Error(At(387));a=t.pendingProps,p=t.memoizedState,c=p.element,vT(e,t),qm(t,a,null,i);var f=t.memoizedState;if(a=f.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){c=Th(Error(At(423)),t),t=Qb(e,t,a,i,c);break e}else if(a!==c){c=Th(Error(At(424)),t),t=Qb(e,t,a,i,c);break e}else for($o=Jl(t.stateNode.containerInfo.firstChild),Vo=t,xr=!0,As=null,i=bT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(bh(),a===c){t=Xa(e,t,i);break e}ro(e,t,a,i)}t=t.child}return t;case 5:return ST(t),e===null&&Rv(t),a=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,f=c.children,Av(a,c)?f=null:p!==null&&Av(a,p)&&(t.flags|=32),ZT(e,t),ro(e,t,f,i),t.child;case 6:return e===null&&Rv(t),null;case 13:return qT(e,t,i);case 4:return v1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Sh(t,null,a,i):ro(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Cs(a,c),Kb(e,t,a,c,i);case 7:return ro(e,t,t.pendingProps,i),t.child;case 8:return ro(e,t,t.pendingProps.children,i),t.child;case 12:return ro(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,p=t.memoizedProps,f=c.value,cr(Zm,a._currentValue),a._currentValue=f,p!==null)if(Fs(p.value,f)){if(p.children===c.children&&!bo.current){t=Xa(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var u=p.dependencies;if(u!==null){f=p.child;for(var b=u.firstContext;b!==null;){if(b.context===a){if(p.tag===1){b=Ga(-1,i&-i),b.tag=2;var C=p.updateQueue;if(C!==null){C=C.shared;var I=C.pending;I===null?b.next=b:(b.next=I.next,I.next=b),C.pending=b}}p.lanes|=i,b=p.alternate,b!==null&&(b.lanes|=i),Lv(p.return,i,t),u.lanes|=i;break}b=b.next}}else if(p.tag===10)f=p.type===t.type?null:p.child;else if(p.tag===18){if(f=p.return,f===null)throw Error(At(341));f.lanes|=i,u=f.alternate,u!==null&&(u.lanes|=i),Lv(f,i,t),f=p.sibling}else f=p.child;if(f!==null)f.return=p;else for(f=p;f!==null;){if(f===t){f=null;break}if(p=f.sibling,p!==null){p.return=f.return,f=p;break}f=f.return}p=f}ro(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,mh(t,i),c=hs(c),a=a(c),t.flags|=1,ro(e,t,a,i),t.child;case 14:return a=t.type,c=Cs(a,t.pendingProps),c=Cs(a.type,c),Yb(e,t,a,c,i);case 15:return HT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Cs(a,c),wm(e,t),t.tag=1,So(a)?(e=!0,Gm(t)):e=!1,mh(t,i),xT(t,a,c),Fv(t,a,c,i),Bv(null,t,a,!0,e,i);case 19:return KT(e,t,i);case 22:return WT(e,t,i)}throw Error(At(156,t.tag))};function dC(e,t){return DE(e,t)}function M3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(e,t,i,a){return new M3(e,t,i,a)}function R1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function z3(e){if(typeof e=="function")return R1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J_)return 11;if(e===Q_)return 14}return 2}function nu(e,t){var i=e.alternate;return i===null?(i=ls(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Em(e,t,i,a,c,p){var f=2;if(a=e,typeof e=="function")R1(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case qc:return Gu(i.children,c,p,t);case Y_:f=8,c|=8;break;case sv:return e=ls(12,i,t,c|2),e.elementType=sv,e.lanes=p,e;case av:return e=ls(13,i,t,c),e.elementType=av,e.lanes=p,e;case lv:return e=ls(19,i,t,c),e.elementType=lv,e.lanes=p,e;case wE:return Zg(i,c,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _E:f=10;break e;case xE:f=9;break e;case J_:f=11;break e;case Q_:f=14;break e;case Bl:f=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=ls(f,i,t,c),t.elementType=e,t.type=a,t.lanes=p,t}function Gu(e,t,i,a){return e=ls(7,e,a,t),e.lanes=i,e}function Zg(e,t,i,a){return e=ls(22,e,a,t),e.elementType=wE,e.lanes=i,e.stateNode={isHidden:!1},e}function S0(e,t,i){return e=ls(6,e,null,t),e.lanes=i,e}function E0(e,t,i){return t=ls(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function R3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=i0(0),this.expirationTimes=i0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=i0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function L1(e,t,i,a,c,p,f,u,b){return e=new R3(e,t,i,u,b),t===1?(t=1,p===!0&&(t|=8)):t=0,p=ls(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},y1(p),e}function L3(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function fC(e){if(!e)return iu;e=e._reactInternals;e:{if(tc(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(So(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(So(i))return dT(e,i,t)}return t}function pC(e,t,i,a,c,p,f,u,b){return e=L1(i,a,!0,e,c,p,f,u,b),e.context=fC(null),i=e.current,a=ao(),c=tu(i),p=Ga(a,c),p.callback=t??null,Ql(i,p,c),e.current.lanes=c,Bf(e,c,a),Eo(e,a),e}function Xg(e,t,i,a){var c=t.current,p=ao(),f=tu(c);return i=fC(i),t.context===null?t.context=i:t.pendingContext=i,t=Ga(p,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ql(c,t,f),e!==null&&(Os(e,c,f,p),vm(e,c,f)),f}function rg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function u2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function O1(e,t){u2(e,t),(e=e.alternate)&&u2(e,t)}function O3(){return null}var mC=typeof reportError=="function"?reportError:function(e){console.error(e)};function F1(e){this._internalRoot=e}qg.prototype.render=F1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));Xg(e,t,null,null)};qg.prototype.unmount=F1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qu(function(){Xg(null,e,null,null)}),t[Wa]=null}};function qg(e){this._internalRoot=e}qg.prototype.unstable_scheduleHydration=function(e){if(e){var t=HE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Vl.length&&t!==0&&t<Vl[i].priority;i++);Vl.splice(i,0,e),i===0&&ZE(e)}};function j1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function c2(){}function F3(e,t,i,a,c){if(c){if(typeof a=="function"){var p=a;a=function(){var C=rg(f);p.call(C)}}var f=pC(t,a,e,0,null,!1,!1,"",c2);return e._reactRootContainer=f,e[Wa]=f.current,_f(e.nodeType===8?e.parentNode:e),qu(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var C=rg(b);u.call(C)}}var b=L1(e,0,!1,null,null,!1,!1,"",c2);return e._reactRootContainer=b,e[Wa]=b.current,_f(e.nodeType===8?e.parentNode:e),qu(function(){Xg(t,b,i,a)}),b}function Yg(e,t,i,a,c){var p=i._reactRootContainer;if(p){var f=p;if(typeof c=="function"){var u=c;c=function(){var b=rg(f);u.call(b)}}Xg(t,f,e,c)}else f=F3(i,t,e,c,a);return rg(f)}VE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Dd(t.pendingLanes);i!==0&&(n1(t,i|1),Eo(t,Xr()),!(Gn&6)&&(Ch=Xr()+500,hu()))}break;case 13:qu(function(){var a=Za(e,1);if(a!==null){var c=ao();Os(a,e,1,c)}}),O1(e,1)}};r1=function(e){if(e.tag===13){var t=Za(e,134217728);if(t!==null){var i=ao();Os(t,e,134217728,i)}O1(e,134217728)}};GE=function(e){if(e.tag===13){var t=tu(e),i=Za(e,t);if(i!==null){var a=ao();Os(i,e,t,a)}O1(e,t)}};HE=function(){return Kn};WE=function(e,t){var i=Kn;try{return Kn=e,t()}finally{Kn=i}};vv=function(e,t,i){switch(t){case"input":if(hv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Ug(a);if(!c)throw Error(At(90));SE(a),hv(a,c)}}}break;case"textarea":TE(e,i);break;case"select":t=i.value,t!=null&&hh(e,!!i.multiple,t,!1)}};zE=k1;RE=qu;var j3={usingClientEntryPoint:!1,Events:[Uf,Qc,Ug,kE,ME,k1]},Ld={findFiberByHostInstance:Du,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},D3={bundleType:Ld.bundleType,version:Ld.version,rendererPackageName:Ld.rendererPackageName,rendererConfig:Ld.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FE(e),e===null?null:e.stateNode},findFiberByHostInstance:Ld.findFiberByHostInstance||O3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wp.isDisabled&&Wp.supportsFiber)try{jg=Wp.inject(D3),ra=Wp}catch{}}Ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j3;Ho.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j1(t))throw Error(At(200));return L3(e,t,null,i)};Ho.createRoot=function(e,t){if(!j1(e))throw Error(At(299));var i=!1,a="",c=mC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=L1(e,1,!1,null,null,i,!1,a,c),e[Wa]=t.current,_f(e.nodeType===8?e.parentNode:e),new F1(t)};Ho.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=FE(t),e=e===null?null:e.stateNode,e};Ho.flushSync=function(e){return qu(e)};Ho.hydrate=function(e,t,i){if(!Kg(t))throw Error(At(200));return Yg(null,e,t,!0,i)};Ho.hydrateRoot=function(e,t,i){if(!j1(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,p="",f=mC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),t=pC(t,null,e,1,i??null,c,!1,p,f),e[Wa]=t.current,_f(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new qg(t)};Ho.render=function(e,t,i){if(!Kg(t))throw Error(At(200));return Yg(null,e,t,!1,i)};Ho.unmountComponentAtNode=function(e){if(!Kg(e))throw Error(At(40));return e._reactRootContainer?(qu(function(){Yg(null,null,e,!1,function(){e._reactRootContainer=null,e[Wa]=null})}),!0):!1};Ho.unstable_batchedUpdates=k1;Ho.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Kg(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return Yg(e,t,i,!1,a)};Ho.version="18.2.0-next-9e3b772b8-20220608";function gC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gC)}catch(e){console.error(e)}}gC(),pE.exports=Ho;var D1=pE.exports;const B3=jf(D1);var yC={exports:{}};(function(e,t){(function(i,a){e.exports=a()})($l,function(){var i={},a={};function c(f,u,b){if(a[f]=b,f==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(f){function u(o,n,s,h){return new(s||(s=Promise))(function(m,_){function x(L){try{P(h.next(L))}catch(Z){_(Z)}}function S(L){try{P(h.throw(L))}catch(Z){_(Z)}}function P(L){var Z;L.done?m(L.value):(Z=L.value,Z instanceof s?Z:new s(function(Y){Y(Z)})).then(x,S)}P((h=h.apply(o,n||[])).next())})}function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=I;function I(o,n){this.x=o,this.y=n}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),m=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(o){return o instanceof I?o:Array.isArray(o)?new I(o[0],o[1]):o};var w=b(C),T=O;function O(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}O.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<n));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var U=b(T);let F,ue;function K(){return F==null&&(F=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),F}function W(){if(ue==null&&(ue=!1,K())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const m=4*h;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){ue=!0;break}}}return ue||!1}function $(o,n,s,h){const m=new U(o,n,s,h);return function(_){return m.solve(_)}}const ie=$(.25,.1,.25,1);function X(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,m=((o-n)%h+h)%h+n;return m===n?s:m}function E(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let j=1;function B(o,n,s){const h={};for(const m in o)h[m]=n.call(s||this,o[m],m,o);return h}function ee(o,n,s){const h={};for(const m in o)n.call(s||this,o[m],m,o)&&(h[m]=o[m]);return h}function q(o){return Array.isArray(o)?o.map(q):typeof o=="object"&&o?B(o,q):o}const me={};function _e(o){me[o]||(typeof console<"u"&&console.warn(o),me[o]=!0)}function de(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function oe(o){let n=0;for(let s,h,m=0,_=o.length,x=_-1;m<_;x=m++)s=o[m],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function le(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Q=null;function te(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function be(o,n,s,h,m){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),P=new Uint8ClampedArray(h*m*4);if(yield _.copyTo(P,function(L,Z,Y,se,fe){const ye=4*Math.max(-Z,0),Te=(Math.max(0,Y)-Y)*se*4+ye,Re=4*se,Ue=Math.max(0,Z),Je=Math.max(0,Y);return{rect:{x:Ue,y:Je,width:Math.min(L.width,Z+se)-Ue,height:Math.min(L.height,Y+fe)-Je},layout:[{offset:Te,stride:Re}]}}(o,n,s,h,m)),S)for(let L=0;L<P.length;L+=4){const Z=P[L];P[L]=P[L+2],P[L+2]=Z}return P}finally{_.close()}})}let Ee,Be;const ke="AbortError";function ze(){return new Error(ke)}const We={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return We.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const rt="global-dispatcher";class ht extends Error{constructor(n,s,h,m){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=m}}const wt=()=>le(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Mt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=He(o.url);if(h)return h(o,n);if(le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:o,targetMapId:rt},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(wt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return u(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:wt(),signal:m.signal});h.type==="json"&&_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const L=yield x.blob();throw new ht(x.status,x.statusText,h.url,L)}const S=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text(),P=yield S;if(m.signal.aborted)throw ze();return{data:P,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(le(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:o,mustQueue:!0,targetMapId:rt},n)}var s;return function(h,m){return new Promise((_,x)=>{const S=new XMLHttpRequest;S.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(S.responseType="arraybuffer");for(const P in h.headers)S.setRequestHeader(P,h.headers[P]);h.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=h.credentials==="include",S.onerror=()=>{x(new Error(S.statusText))},S.onload=()=>{if(!m.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let P=S.response;if(h.type==="json")try{P=JSON.parse(S.response)}catch(L){return void x(L)}_({data:P,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const P=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});x(new ht(S.status,S.statusText,h.url,P))}},m.signal.addEventListener("abort",()=>{S.abort(),x(ze())}),S.send(h.body)})}(o,n)};function gt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Et(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function $t(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Ht{constructor(n,s={}){E(this,s),this.type=n}}class qt extends Ht{constructor(n,s={}){super("error",E({error:n},s))}}class bn{on(n,s){return this._listeners=this._listeners||{},Et(n,s,this._listeners),this}off(n,s){return $t(n,s,this._listeners),$t(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Et(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Ht(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of _)$t(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(E(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof qt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var et={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const hn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xn(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return hn.forEach(h=>{h in n&&(s[h]=n[h])}),s}function we(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!we(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!we(o[s],n[s]))return!1;return!0}return o===n}function N(o,n){o.push(n)}function D(o,n,s){N(s,{command:"addSource",args:[o,n[o]]})}function xe(o,n,s){N(n,{command:"removeSource",args:[o]}),s[o]=!0}function Ze(o,n,s,h){xe(o,s,h),D(o,n,s)}function Qe(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!we(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!we(o[s][h],n[s][h]))return!1;return!0}function ct(o,n,s,h,m,_){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(we(o[x],n[x])||s.push({command:_,args:[h,x,n[x],m]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(we(o[x],n[x])||s.push({command:_,args:[h,x,n[x],m]}))}function ae(o){return o.id}function R(o,n){return o[n.id]=n,o}class z{constructor(n,s,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Se(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Ve extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class nt{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(n){return new nt(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const ot={kind:"null"},lt={kind:"number"},Dt={kind:"string"},Ft={kind:"boolean"},yn={kind:"color"},vn={kind:"object"},un={kind:"value"},Oi={kind:"collator"},or={kind:"formatted"},Me={kind:"padding"},re={kind:"resolvedImage"},ce={kind:"variableAnchorOffsetCollection"};function ge(o,n){return{kind:"array",itemType:o,N:n}}function Ie(o){if(o.kind==="array"){const n=Ie(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Ne=[ot,lt,Dt,Ft,yn,or,vn,ge(un),Me,re,ce];function Le(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Le(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Ne)if(!Le(s,n))return null}}return`Expected ${Ie(o)} but found ${Ie(n)} instead.`}function $e(o,n){return n.some(s=>s.kind===o.kind)}function Fe(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Ye(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const dt=.96422,ut=.82521,ft=4/29,Yt=6/29,tn=3*Yt*Yt,gn=Yt*Yt*Yt,dn=Math.PI/180,wn=180/Math.PI;function jn(o){return(o%=360)<0&&(o+=360),o}function Hn([o,n,s,h]){let m,_;const x=fn((.2225045*(o=ur(o))+.7168786*(n=ur(n))+.0606169*(s=ur(s)))/1);o===n&&n===s?m=_=x:(m=fn((.4360747*o+.3850649*n+.1430804*s)/dt),_=fn((.0139322*o+.0971045*n+.7141733*s)/ut));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-_),h]}function ur(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function fn(o){return o>gn?Math.pow(o,1/3):o/tn+ft}function sr([o,n,s,h]){let m=(o+16)/116,_=isNaN(n)?m:m+n/500,x=isNaN(s)?m:m-s/200;return m=1*ni(m),_=dt*ni(_),x=ut*ni(x),[wr(3.1338561*_-1.6168667*m-.4906146*x),wr(-.9787684*_+1.9161415*m+.033454*x),wr(.0719453*_-.2289914*m+1.4052427*x),h]}function wr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function ni(o){return o>Yt?o*o*o:tn*(o-ft)}function ai(o){return parseInt(o.padEnd(2,o),16)/255}function Rr(o,n){return po(n?o/100:o,0,1)}function po(o,n,s){return Math.min(Math.max(n,o),s)}function la(o){return!o.some(Number.isNaN)}const ua={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Dn{constructor(n,s,h,m=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,s,h,m]))}static parse(n){if(n instanceof Dn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=ua[h];if(m){const[x,S,P]=m;return[x/255,S/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[ai(h.slice(S,S+=x)),ai(h.slice(S,S+=x)),ai(h.slice(S,S+=x)),ai(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,P,L,Z,Y,se,fe,ye,Te,Re,Ue,Je]=x,Ge=[Z||" ",fe||" ",Re].join("");if(Ge==="  "||Ge==="  /"||Ge===",,"||Ge===",,,"){const qe=[L,se,Te].join(""),pt=qe==="%%%"?100:qe===""?255:0;if(pt){const vt=[po(+P/pt,0,1),po(+Y/pt,0,1),po(+ye/pt,0,1),Ue?Rr(+Ue,Je):1];if(la(vt))return vt}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,P,L,Z,Y,se,fe,ye]=_,Te=[P||" ",Z||" ",se].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const Re=[+S,po(+L,0,100),po(+Y,0,100),fe?Rr(+fe,ye):1];if(la(Re))return function([Ue,Je,Ge,qe]){function pt(vt){const jt=(vt+Ue/30)%12,Wt=Je*Math.min(Ge,1-Ge);return Ge-Wt*Math.max(-1,Math.min(jt-3,9-jt,1))}return Ue=jn(Ue),Je/=100,Ge/=100,[pt(0),pt(8),pt(4),qe]}(Re)}}}(n);return s?new Dn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,m,_]=Hn(n),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?jn(Math.atan2(m,h)*wn):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Hn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,m]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${m})`}}Dn.black=new Dn(0,0,0,1),Dn.white=new Dn(1,1,1,1),Dn.transparent=new Dn(0,0,0,0),Dn.red=new Dn(1,0,0,1);class In{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class To{constructor(n,s,h,m,_){this.text=n,this.image=s,this.scale=h,this.fontStack=m,this.textColor=_}}class _i{constructor(n){this.sections=n}static fromString(n){return new _i([new To(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof _i?n:_i.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class li{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof li)return n;if(typeof n=="number")return new li([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new li(n)}}toString(){return JSON.stringify(this.values)}}const ca=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Fi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],m=n[s+1];if(typeof h!="string"||!ca.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Fi(n)}}toString(){return JSON.stringify(this.values)}}class ji{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ji({name:n,available:!1}):null}}function ui(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tl(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Dn||o instanceof In||o instanceof _i||o instanceof li||o instanceof Fi||o instanceof ji)return!0;if(Array.isArray(o)){for(const n of o)if(!tl(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!tl(o[n]))return!1;return!0}return!1}function vr(o){if(o===null)return ot;if(typeof o=="string")return Dt;if(typeof o=="boolean")return Ft;if(typeof o=="number")return lt;if(o instanceof Dn)return yn;if(o instanceof In)return Oi;if(o instanceof _i)return or;if(o instanceof li)return Me;if(o instanceof Fi)return ce;if(o instanceof ji)return re;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const m=vr(h);if(s){if(s===m)continue;s=un;break}s=m}return ge(s||un,n)}return vn}function ha(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Dn||o instanceof _i||o instanceof li||o instanceof Fi||o instanceof ji?o.toString():JSON.stringify(o)}class qo{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!tl(n[1]))return s.error("invalid value");const h=n[1];let m=vr(h);const _=s.expectedType;return m.kind!=="array"||m.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(m=_),new qo(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Yn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Di={string:Dt,number:lt,boolean:Ft,object:vn};class xi{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,m=1;const _=n[0];if(_==="array"){let S,P;if(n.length>2){const L=n[1];if(typeof L!="string"||!(L in Di)||L==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Di[L],m++}else S=un;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],m++}h=ge(S,P)}else{if(!Di[_])throw new Error(`Types doesn't contain name = ${_}`);h=Di[_]}const x=[];for(;m<n.length;m++){const S=s.parse(n[m],m,un);if(!S)return null;x.push(S)}return new xi(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Le(this.type,vr(h)))return h;if(s===this.args.length-1)throw new Yn(`Expected value to be of type ${Ie(this.type)}, but found ${Ie(vr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const nl={"to-boolean":Ft,"to-color":yn,"to-number":lt,"to-string":Dt};class mo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!nl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const m=nl[h],_=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,un);if(!S)return null;_.push(S)}return new mo(m,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(n),h=null,s instanceof Dn)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ui(s[0],s[1],s[2],s[3]),!h))return new Dn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Yn(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const m=li.parse(s);if(m)return m}throw new Yn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const m=Fi.parse(s);if(m)return m}throw new Yn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new Yn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return _i.fromString(ha(this.args[0].evaluate(n)));case"resolvedImage":return ji.fromString(ha(this.args[0].evaluate(n)));default:return ha(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const da=["Unknown","Point","LineString","Polygon"];class $n{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?da[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Dn.parse(n)),s}}class fs{constructor(n,s,h=[],m,_=new nt,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=m,this._isConstant=s}parse(n,s,h,m,_={}){return s?this.concat(s,h,m)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(m,_,x){return x==="assert"?new xi(_,[m]):x==="coerce"?new mo(_,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[m];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,P=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof qo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new $n;try{x=new qo(x.type,x.evaluate(S))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const m=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new fs(this.registry,this._isConstant,m,s||null,_,this.errors)}error(n,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Ve(h,n))}checkSubtype(n,s){const h=Le(n,s);return h&&this.error(h),h}}class Ds{constructor(n,s,h){this.type=Oi,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ft);if(!m)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ft);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Dt),!x)?null:new Ds(m,_,x)}evaluate(n){return new In(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Ko=8192;function ci(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function fa(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Bh(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(s*m*Ko),Math.round(h*m*Ko)]}function oc(o,n,s){const h=o[0]-n[0],m=o[1]-n[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*m==0&&h*_<=0&&m*x<=0}function rl(o,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const P=n[x];for(let L=0,Z=P.length;L<Z-1;L++){if(oc(o,P[L],P[L+1]))return!1;(m=P[L])[1]>(h=o)[1]!=(_=P[L+1])[1]>h[1]&&h[0]<(_[0]-m[0])*(h[1]-m[1])/(_[1]-m[1])+m[0]&&(s=!s)}}var h,m,_;return s}function Nh(o,n){for(let s=0;s<n.length;s++)if(rl(o,n[s]))return!0;return!1}function du(o,n,s,h){const m=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-m*(o[1]-s[1]),S=(n[0]-s[0])*_-m*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function fu(o,n,s){for(const L of s)for(let Z=0;Z<L.length-1;++Z)if((S=[(x=L[Z+1])[0]-(_=L[Z])[0],x[1]-_[1]])[0]*(P=[(m=n)[0]-(h=o)[0],m[1]-h[1]])[1]-S[1]*P[0]!=0&&du(h,m,_,x)&&du(_,x,h,m))return!0;var h,m,_,x,S,P;return!1}function pu(o,n){for(let s=0;s<o.length;++s)if(!rl(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(fu(o[s],o[s+1],n))return!1;return!0}function pa(o,n){for(let s=0;s<n.length;s++)if(pu(o,n[s]))return!0;return!1}function il(o,n,s){const h=[];for(let m=0;m<o.length;m++){const _=[];for(let x=0;x<o[m].length;x++){const S=Bh(o[m][x],s);ci(n,S),_.push(S)}h.push(_)}return h}function ps(o,n,s){const h=[];for(let m=0;m<o.length;m++){const _=il(o[m],n,s);h.push(_)}return h}function sc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let _=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;_===0&&(_=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=_}ci(n,o)}function ol(o,n,s,h){const m=Math.pow(2,h.z)*Ko,_=[h.x*Ko,h.y*Ko],x=[];for(const S of o)for(const P of S){const L=[P.x+_[0],P.y+_[1]];sc(L,n,s,m),x.push(L)}return x}function ac(o,n,s,h){const m=Math.pow(2,h.z)*Ko,_=[h.x*Ko,h.y*Ko],x=[];for(const P of o){const L=[];for(const Z of P){const Y=[Z.x+_[0],Z.y+_[1]];ci(n,Y),L.push(Y)}x.push(L)}if(n[2]-n[0]<=m/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of x)for(const L of P)sc(L,n,s,m)}var S;return x}class ms{constructor(n,s){this.type=Ft,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(tl(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const m=[];for(const _ of h.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&m.push(S),x==="MultiPolygon"&&m.push(...S)}if(m.length)return new ms(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ms(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ms(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=il(h.coordinates,_,x),P=ol(s.geometry(),m,_,x);if(!fa(m,_))return!1;for(const L of P)if(!rl(L,S))return!1}if(h.type==="MultiPolygon"){const S=ps(h.coordinates,_,x),P=ol(s.geometry(),m,_,x);if(!fa(m,_))return!1;for(const L of P)if(!Nh(L,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=il(h.coordinates,_,x),P=ac(s.geometry(),m,_,x);if(!fa(m,_))return!1;for(const L of P)if(!pu(L,S))return!1}if(h.type==="MultiPolygon"){const S=ps(h.coordinates,_,x),P=ac(s.geometry(),m,_,x);if(!fa(m,_))return!1;for(const L of P)if(!pa(L,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ma{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ma(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class wi{constructor(n,s,h,m){this.name=n,this.type=s,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],m=wi.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([L])=>!Array.isArray(L)||L.length===n.length-1);let P=null;for(const[L,Z]of S){P=new fs(s.registry,ga,s.path,null,s.scope);const Y=[];let se=!1;for(let fe=1;fe<n.length;fe++){const ye=n[fe],Te=Array.isArray(L)?L[fe-1]:L.type,Re=P.parse(ye,1+Y.length,Te);if(!Re){se=!0;break}Y.push(Re)}if(!se)if(Array.isArray(L)&&L.length!==Y.length)P.error(`Expected ${L.length} arguments, but found ${Y.length} instead.`);else{for(let fe=0;fe<Y.length;fe++){const ye=Array.isArray(L)?L[fe]:L.type,Te=Y[fe];P.concat(fe+1).checkSubtype(ye,Te.type)}if(P.errors.length===0)return new wi(h,_,Z,Y)}}if(S.length===1)s.errors.push(...P.errors);else{const L=(S.length?S:x).map(([Y])=>{return se=Y,Array.isArray(se)?`(${se.map(Ie).join(", ")})`:`(${Ie(se.type)}...)`;var se}).join(" | "),Z=[];for(let Y=1;Y<n.length;Y++){const se=s.parse(n[Y],1+Z.length);if(!se)return null;Z.push(Ie(se.type))}s.error(`Expected arguments of type ${L}, but found (${Z.join(", ")}) instead.`)}return null}static register(n,s){wi.definitions=s;for(const h in s)n[h]=wi}}function ga(o){if(o instanceof ma)return ga(o.boundExpression);if(o instanceof wi&&o.name==="error"||o instanceof Ds||o instanceof ms)return!1;const n=o instanceof mo||o instanceof xi;let s=!0;return o.eachChild(h=>{s=n?s&&ga(h):s&&h instanceof qo}),!!s&&sl(o)&&ya(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function sl(o){if(o instanceof wi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ms)return!1;let n=!0;return o.eachChild(s=>{n&&!sl(s)&&(n=!1)}),n}function gs(o){if(o instanceof wi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!gs(s)&&(n=!1)}),n}function ya(o,n){if(o instanceof wi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ya(h,n)&&(s=!1)}),s}function va(o,n){const s=o.length-1;let h,m,_=0,x=s,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),h=o[S],m=o[S+1],h<=n){if(S===s||n<m)return S;_=S+1}else{if(!(h>n))throw new Yn("Input is not a number.");x=S-1}return 0}class _a{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[m,_]of h)this.labels.push(m),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,lt);if(!h)return null;const m=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],P=n[x+1],L=x,Z=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',L);const Y=s.parse(P,Z,_);if(!Y)return null;_=_||Y.type,m.push([S,Y])}return new _a(_,h,m)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const _=s.length;return m>=s[_-1]?h[_-1].evaluate(n):h[va(s,m)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Uh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var lc=uc;function uc(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}uc.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}var x=0,S=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<n));h++)o>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var cc=Uh(lc);function ys(o,n,s){return o+s*(n-o)}function al(o,n,s){return o.map((h,m)=>ys(h,n[m],s))}const qr={number:ys,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[m,_,x,S]=al(o.rgb,n.rgb,s);return new Dn(m,_,x,S,!1)}case"hcl":{const[m,_,x,S]=o.hcl,[P,L,Z,Y]=n.hcl;let se,fe;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?se=NaN:(se=P,x!==1&&x!==0||(fe=L)):(se=m,Z!==1&&Z!==0||(fe=_));else{let Je=P-m;P>m&&Je>180?Je-=360:P<m&&m-P>180&&(Je+=360),se=m+s*Je}const[ye,Te,Re,Ue]=function([Je,Ge,qe,pt]){return Je=isNaN(Je)?0:Je*dn,sr([qe,Math.cos(Je)*Ge,Math.sin(Je)*Ge,pt])}([se,fe??ys(_,L,s),ys(x,Z,s),ys(S,Y,s)]);return new Dn(ye,Te,Re,Ue,!1)}case"lab":{const[m,_,x,S]=sr(al(o.lab,n.lab,s));return new Dn(m,_,x,S,!1)}}},array:al,padding:function(o,n,s){return new li(al(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,m=n.values;if(h.length!==m.length)throw new Yn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new Yn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);_.push(h[x]);const[S,P]=h[x+1],[L,Z]=m[x+1];_.push([ys(S,L,s),ys(P,Z,s)])}return new Fi(_)}};class Kr{constructor(n,s,h,m,_){this.type=n,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,m){let _=0;if(n.name==="exponential")_=Rn(s,n.base,h,m);else if(n.name==="linear")_=Rn(s,1,h,m);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new cc(x[0],x[1],x[2],x[3]).solve(Rn(s,1,h,m))}return _}static parse(n,s){let[h,m,_,...x]=n;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const L=m[1];if(typeof L!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:L}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const L=m.slice(1);if(L.length!==4||L.some(Z=>typeof Z!="number"||Z<0||Z>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:L}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,lt),!_)return null;const S=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=yn:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let L=0;L<x.length;L+=2){const Z=x[L],Y=x[L+1],se=L+3,fe=L+4;if(typeof Z!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',se);if(S.length&&S[S.length-1][0]>=Z)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',se);const ye=s.parse(Y,fe,P);if(!ye)return null;P=P||ye.type,S.push([Z,ye])}return Ye(P,lt)||Ye(P,yn)||Ye(P,Me)||Ye(P,ce)||Ye(P,ge(lt))?new Kr(P,h,m,_,S):s.error(`Type ${Ie(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const _=s.length;if(m>=s[_-1])return h[_-1].evaluate(n);const x=va(s,m),S=Kr.interpolationFactor(this.interpolation,m,s[x],s[x+1]),P=h[x].evaluate(n),L=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return qr[this.type.kind](P,L,S);case"interpolate-hcl":return qr.color(P,L,S,"hcl");case"interpolate-lab":return qr.color(P,L,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Rn(o,n,s,h){const m=h-s,_=o-s;return m===0?0:n===1?_/m:(Math.pow(n,_)-1)/(Math.pow(n,m)-1)}class ll{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const _=[];for(const S of n.slice(1)){const P=s.parse(S,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,_.push(P)}if(!h)throw new Error("No output type");const x=m&&_.some(S=>Le(m,S.type));return new ll(x?un:h,_)}evaluate(n){let s,h=null,m=0;for(const _ of this.args)if(m++,h=_.evaluate(n),h&&h instanceof ji&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class ul{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=s.parse(n[_+1],_+1);if(!S)return null;h.push([x,S])}const m=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return m?new ul(h,m):null}outputDefined(){return this.result.outputDefined()}}class cl{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,lt),m=s.parse(n[2],2,ge(s.expectedType||un));return h&&m?new cl(m.type.itemType,h,m):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new Yn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Yn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Yn(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class mu{constructor(n,s){this.type=Ft,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,un),m=s.parse(n[2],2,un);return h&&m?$e(h.type,[Ft,Dt,lt,ot,un])?new mu(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Fe(s,["boolean","string","number","null"]))throw new Yn(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(vr(s))} instead.`);if(!Fe(h,["string","array"]))throw new Yn(`Expected second argument to be of type array or string, but found ${Ie(vr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Bs{constructor(n,s,h){this.type=lt,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,un),m=s.parse(n[2],2,un);if(!h||!m)return null;if(!$e(h.type,[Ft,Dt,lt,ot,un]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,lt);return _?new Bs(h,m,_):null}return new Bs(h,m)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Fe(s,["boolean","string","number","null"]))throw new Yn(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(vr(s))} instead.`);if(!Fe(h,["string","array"]))throw new Yn(`Expected second argument to be of type array or string, but found ${Ie(vr(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class gu{constructor(n,s,h,m,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=m,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const _={},x=[];for(let L=2;L<n.length-1;L+=2){let Z=n[L];const Y=n[L+1];Array.isArray(Z)||(Z=[Z]);const se=s.concat(L);if(Z.length===0)return se.error("Expected at least one branch label.");for(const ye of Z){if(typeof ye!="number"&&typeof ye!="string")return se.error("Branch labels must be numbers or strings.");if(typeof ye=="number"&&Math.abs(ye)>Number.MAX_SAFE_INTEGER)return se.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ye=="number"&&Math.floor(ye)!==ye)return se.error("Numeric branch labels must be integer values.");if(h){if(se.checkSubtype(h,vr(ye)))return null}else h=vr(ye);if(_[String(ye)]!==void 0)return se.error("Branch labels must be unique.");_[String(ye)]=x.length}const fe=s.parse(Y,L,m);if(!fe)return null;m=m||fe.type,x.push(fe)}const S=s.parse(n[1],1,un);if(!S)return null;const P=s.parse(n[n.length-1],n.length-1,m);return P?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new gu(h,m,S,_,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(vr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class yu{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,Ft);if(!S)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;m.push([S,P]),h=h||P.type}const _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new yu(h,m,_)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class hl{constructor(n,s,h,m){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,un),m=s.parse(n[2],2,lt);if(!h||!m)return null;if(!$e(h.type,[ge(un),Dt,un]))return s.error(`Expected first argument to be of type array or string, but found ${Ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,lt);return _?new hl(h.type,h,m,_):null}return new hl(h.type,h,m)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Fe(s,["string","array"]))throw new Yn(`Expected first argument to be of type array or string, but found ${Ie(vr(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return s.slice(h,m)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function hc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function dc(o,n,s,h){return h.compare(n,s)===0}function Ns(o,n,s){const h=o!=="=="&&o!=="!=";return class vC{constructor(_,x,S){this.type=Ft,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let P=x.parse(_[1],1,un);if(!P)return null;if(!hc(S,P.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${Ie(P.type)}'.`);let L=x.parse(_[2],2,un);if(!L)return null;if(!hc(S,L.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${Ie(L.type)}'.`);if(P.type.kind!==L.type.kind&&P.type.kind!=="value"&&L.type.kind!=="value")return x.error(`Cannot compare types '${Ie(P.type)}' and '${Ie(L.type)}'.`);h&&(P.type.kind==="value"&&L.type.kind!=="value"?P=new xi(L.type,[P]):P.type.kind!=="value"&&L.type.kind==="value"&&(L=new xi(P.type,[L])));let Z=null;if(_.length===4){if(P.type.kind!=="string"&&L.type.kind!=="string"&&P.type.kind!=="value"&&L.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(Z=x.parse(_[3],3,Oi),!Z)return null}return new vC(P,L,Z)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const P=vr(x),L=vr(S);if(P.kind!==L.kind||P.kind!=="string"&&P.kind!=="number")throw new Yn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${L.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=vr(x),L=vr(S);if(P.kind!=="string"||L.kind!=="string")return n(_,x,S)}return this.collator?s(_,x,S,this.collator.evaluate(_)):n(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const fc=Ns("==",function(o,n,s){return n===s},dc),vu=Ns("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!dc(0,n,s,h)}),$h=Ns("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Vh=Ns(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Gh=Ns("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Hh=Ns(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class dl{constructor(n,s,h,m,_){this.type=Dt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,lt);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let _=null;if(m.locale&&(_=s.parse(m.locale,1,Dt),!_))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Dt),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,lt),!S))return null;let P=null;return m["max-fraction-digits"]&&(P=s.parse(m["max-fraction-digits"],1,lt),!P)?null:new dl(h,_,x,S,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class fl{constructor(n){this.type=or,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let _=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let P=null;if(S["font-scale"]&&(P=s.parse(S["font-scale"],1,lt),!P))return null;let L=null;if(S["text-font"]&&(L=s.parse(S["text-font"],1,ge(Dt)),!L))return null;let Z=null;if(S["text-color"]&&(Z=s.parse(S["text-color"],1,yn),!Z))return null;const Y=m[m.length-1];Y.scale=P,Y.font=L,Y.textColor=Z}else{const P=s.parse(n[x],1,un);if(!P)return null;const L=P.type.kind;if(L!=="string"&&L!=="value"&&L!=="null"&&L!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new fl(m)}evaluate(n){return new _i(this.sections.map(s=>{const h=s.content.evaluate(n);return vr(h)===re?new To("",h,null,null,null):new To(ha(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class _u{constructor(n){this.type=re,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Dt);return h?new _u(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=ji.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class xu{constructor(n){this.type=lt,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ie(h.type)} instead.`):new xu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Yn(`Expected value to be of type string or array, but found ${Ie(vr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Us={"==":fc,"!=":vu,">":Vh,"<":$h,">=":Hh,"<=":Gh,array:xi,at:cl,boolean:xi,case:yu,coalesce:ll,collator:Ds,format:fl,image:_u,in:mu,"index-of":Bs,interpolate:Kr,"interpolate-hcl":Kr,"interpolate-lab":Kr,length:xu,let:ul,literal:qo,match:gu,number:xi,"number-format":dl,object:xi,slice:hl,step:_a,string:xi,"to-boolean":mo,"to-color":mo,"to-number":mo,"to-string":mo,var:ma,within:ms};function xa(o,[n,s,h,m]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=m?m.evaluate(o):1,x=ui(n,s,h,_);if(x)throw new Yn(x);return new Dn(n/255,s/255,h/255,_,!1)}function pc(o,n){return o in n}function Yo(o,n){const s=n[o];return s===void 0?null:s}function Jo(o){return{type:o}}function Yi(o){return{result:"success",value:o}}function $s(o){return{result:"error",value:o}}function Vs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function mc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function wu(o){return!!o.expression&&o.expression.interpolated}function An(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function pl(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ml(o){return o}function gc(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),_=o.type||(wu(n)?"exponential":"interval");if(s||n.type==="padding"){const Z=s?Dn.parse:li.parse;(o=Se({},o)).stops&&(o.stops=o.stops.map(Y=>[Y[0],Z(Y[1])])),o.default=Z(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let S,P,L;if(_==="exponential")S=En;else if(_==="interval")S=yc;else if(_==="categorical"){S=Jn,P=Object.create(null);for(const Z of o.stops)P[Z[0]]=Z[1];L=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=bu}if(h){const Z={},Y=[];for(let ye=0;ye<o.stops.length;ye++){const Te=o.stops[ye],Re=Te[0].zoom;Z[Re]===void 0&&(Z[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},Y.push(Re)),Z[Re].stops.push([Te[0].value,Te[1]])}const se=[];for(const ye of Y)se.push([Z[ye].zoom,gc(Z[ye],n)]);const fe={name:"linear"};return{kind:"composite",interpolationType:fe,interpolationFactor:Kr.interpolationFactor.bind(void 0,fe),zoomStops:se.map(ye=>ye[0]),evaluate:({zoom:ye},Te)=>En({stops:se,base:o.base},n,ye).evaluate(ye,Te)}}if(m){const Z=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:Z,interpolationFactor:Kr.interpolationFactor.bind(void 0,Z),zoomStops:o.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>S(o,n,Y,P,L)}}return{kind:"source",evaluate(Z,Y){const se=Y&&Y.properties?Y.properties[o.property]:void 0;return se===void 0?wa(o.default,n.default):S(o,n,se,P,L)}}}function wa(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Jn(o,n,s,h,m){return wa(typeof s===m?h[s]:void 0,o.default,n.default)}function yc(o,n,s){if(An(s)!=="number")return wa(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=va(o.stops.map(_=>_[0]),s);return o.stops[m][1]}function En(o,n,s){const h=o.base!==void 0?o.base:1;if(An(s)!=="number")return wa(o.default,n.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const _=va(o.stops.map(Z=>Z[0]),s),x=function(Z,Y,se,fe){const ye=fe-se,Te=Z-se;return ye===0?0:Y===1?Te/ye:(Math.pow(Y,Te)-1)/(Math.pow(Y,ye)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),S=o.stops[_][1],P=o.stops[_+1][1],L=qr[n.type]||ml;return typeof S.evaluate=="function"?{evaluate(...Z){const Y=S.evaluate.apply(void 0,Z),se=P.evaluate.apply(void 0,Z);if(Y!==void 0&&se!==void 0)return L(Y,se,x,o.colorSpace)}}:L(S,P,x,o.colorSpace)}function bu(o,n,s){switch(n.type){case"color":s=Dn.parse(s);break;case"formatted":s=_i.fromString(s.toString());break;case"resolvedImage":s=ji.fromString(s.toString());break;case"padding":s=li.parse(s);break;default:An(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return wa(s,o.default,n.default)}wi.register(Us,{error:[{kind:"error"},[Dt],(o,[n])=>{throw new Yn(n.evaluate(o))}],typeof:[Dt,[un],(o,[n])=>Ie(vr(n.evaluate(o)))],"to-rgba":[ge(lt,4),[yn],(o,[n])=>{const[s,h,m,_]=n.evaluate(o).rgb;return[255*s,255*h,255*m,_]}],rgb:[yn,[lt,lt,lt],xa],rgba:[yn,[lt,lt,lt,lt],xa],has:{type:Ft,overloads:[[[Dt],(o,[n])=>pc(n.evaluate(o),o.properties())],[[Dt,vn],(o,[n,s])=>pc(n.evaluate(o),s.evaluate(o))]]},get:{type:un,overloads:[[[Dt],(o,[n])=>Yo(n.evaluate(o),o.properties())],[[Dt,vn],(o,[n,s])=>Yo(n.evaluate(o),s.evaluate(o))]]},"feature-state":[un,[Dt],(o,[n])=>Yo(n.evaluate(o),o.featureState||{})],properties:[vn,[],o=>o.properties()],"geometry-type":[Dt,[],o=>o.geometryType()],id:[un,[],o=>o.id()],zoom:[lt,[],o=>o.globals.zoom],"heatmap-density":[lt,[],o=>o.globals.heatmapDensity||0],"line-progress":[lt,[],o=>o.globals.lineProgress||0],accumulated:[un,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[lt,Jo(lt),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[lt,Jo(lt),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:lt,overloads:[[[lt,lt],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[lt],(o,[n])=>-n.evaluate(o)]]},"/":[lt,[lt,lt],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[lt,[lt,lt],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[lt,[],()=>Math.LN2],pi:[lt,[],()=>Math.PI],e:[lt,[],()=>Math.E],"^":[lt,[lt,lt],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[lt,[lt],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[lt,[lt],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[lt,[lt],(o,[n])=>Math.log(n.evaluate(o))],log2:[lt,[lt],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[lt,[lt],(o,[n])=>Math.sin(n.evaluate(o))],cos:[lt,[lt],(o,[n])=>Math.cos(n.evaluate(o))],tan:[lt,[lt],(o,[n])=>Math.tan(n.evaluate(o))],asin:[lt,[lt],(o,[n])=>Math.asin(n.evaluate(o))],acos:[lt,[lt],(o,[n])=>Math.acos(n.evaluate(o))],atan:[lt,[lt],(o,[n])=>Math.atan(n.evaluate(o))],min:[lt,Jo(lt),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[lt,Jo(lt),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[lt,[lt],(o,[n])=>Math.abs(n.evaluate(o))],round:[lt,[lt],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[lt,[lt],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[lt,[lt],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[Ft,[Dt,un],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[Ft,[un],(o,[n])=>o.id()===n.value],"filter-type-==":[Ft,[Dt],(o,[n])=>o.geometryType()===n.value],"filter-<":[Ft,[Dt,un],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Ft,[un],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Ft,[Dt,un],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[Ft,[un],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Ft,[Dt,un],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Ft,[un],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Ft,[Dt,un],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Ft,[un],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Ft,[un],(o,[n])=>n.value in o.properties()],"filter-has-id":[Ft,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[Ft,[ge(Dt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[Ft,[ge(un)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[Ft,[Dt,ge(un)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[Ft,[Dt,ge(un)],(o,[n,s])=>function(h,m,_,x){for(;_<=x;){const S=_+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:_=S+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Ft,overloads:[[[Ft,Ft],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Jo(Ft),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:Ft,overloads:[[[Ft,Ft],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Jo(Ft),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[Ft,[Ft],(o,[n])=>!n.evaluate(o)],"is-supported-script":[Ft,[Dt],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Dt,Jo(un),(o,n)=>n.map(s=>ha(s.evaluate(o))).join("")],"resolved-locale":[Dt,[Oi],(o,[n])=>n.evaluate(o).resolvedLocale()]});class qn{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new $n,this._defaultValue=s?(h=s).type==="color"&&pl(h.default)?new Dn(0,0,0,0):h.type==="color"?Dn.parse(h.default)||null:h.type==="padding"?li.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Fi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,m,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,m,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Yn(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Bn(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Us}function bi(o,n){const s=new fs(Us,ga,[],n?function(m){const _={color:yn,string:Dt,number:lt,enum:Dt,boolean:Ft,formatted:or,padding:Me,resolvedImage:re,variableAnchorOffsetCollection:ce};return m.type==="array"?ge(_[m.value]||un,m.length):_[m.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Yi(new qn(h,n)):$s(s.errors)}class gl{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!gs(s.expression)}evaluateWithoutErrorHandling(n,s,h,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,_,x)}evaluate(n,s,h,m,_,x){return this._styleExpression.evaluate(n,s,h,m,_,x)}}class yl{constructor(n,s,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!gs(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,s,h,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,_,x)}evaluate(n,s,h,m,_,x){return this._styleExpression.evaluate(n,s,h,m,_,x)}interpolationFactor(n,s,h){return this.interpolationType?Kr.interpolationFactor(this.interpolationType,n,s,h):0}}function ba(o,n){const s=bi(o,n);if(s.result==="error")return s;const h=s.value.expression,m=sl(h);if(!m&&!Vs(n))return $s([new Ve("","data expressions not supported")]);const _=ya(h,["zoom"]);if(!_&&!mc(n))return $s([new Ve("","zoom expressions not supported")]);const x=Co(h);return x||_?x instanceof Ve?$s([x]):x instanceof Kr&&!wu(n)?$s([new Ve("",'"interpolate" expressions cannot be used with this property')]):Yi(x?new yl(m?"camera":"composite",s.value,x.labels,x instanceof Kr?x.interpolation:void 0):new gl(m?"constant":"source",s.value)):$s([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class vl{constructor(n,s){this._parameters=n,this._specification=s,Se(this,gc(this._parameters,this._specification))}static deserialize(n){return new vl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Co(o){let n=null;if(o instanceof ul)n=Co(o.result);else if(o instanceof ll){for(const s of o.args)if(n=Co(s),n)break}else(o instanceof _a||o instanceof Kr)&&o.input instanceof wi&&o.input.name==="zoom"&&(n=o);return n instanceof Ve||o.eachChild(s=>{const h=Co(s);h instanceof Ve?n=h:!n&&h?n=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Io(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Io(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Yr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function go(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Io(o)||(o=xl(o));const n=bi(o,Yr);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>n.value.evaluate(s,h,{},m),needGeometry:Gs(o)}}function _l(o,n){return o<n?-1:o>n?1:0}function Gs(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(Gs(o[n]))return!0;return!1}function xl(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Hs(o[1],o[2],"=="):n==="!="?Ao(Hs(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Hs(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(xl))):n==="all"?["all"].concat(o.slice(1).map(xl)):n==="none"?["all"].concat(o.slice(1).map(xl).map(Ao)):n==="in"?Sa(o[1],o.slice(2)):n==="!in"?Ao(Sa(o[1],o.slice(2))):n==="has"?Bi(o[1]):n==="!has"?Ao(Bi(o[1])):n!=="within"||o;var s}function Hs(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Sa(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(_l)]]:["filter-in-small",o,["literal",n]]}}function Bi(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ao(o){return["!",o]}function wl(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const _ of o)m+=`${wl(_)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${wl(o[s[m]])},`;return`${h}}`}function bl(o){let n="";for(const s of hn)n+=`/${wl(o[s])}`;return n}function Ea(o){const n=o.value;return n?[new z(o.key,n,"constants have been deprecated as of v8")]:[]}function Qn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Po(o){if(Array.isArray(o))return o.map(Po);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=Po(o[s]);return n}return Qn(o)}function Jr(o){const n=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},_=o.style,x=o.styleSpec,S=o.validateSpec;let P=[];const L=An(s);if(L!=="object")return[new z(n,s,`object expected, ${L} found`)];for(const Z in s){const Y=Z.split(".")[0],se=h[Y]||h["*"];let fe;if(m[Y])fe=m[Y];else if(h[Y])fe=S;else if(m["*"])fe=m["*"];else{if(!h["*"]){P.push(new z(n,s[Z],`unknown property "${Z}"`));continue}fe=S}P=P.concat(fe({key:(n&&`${n}.`)+Z,value:s[Z],valueSpec:se,style:_,styleSpec:x,object:s,objectKey:Z,validateSpec:S},s))}for(const Z in h)m[Z]||h[Z].required&&h[Z].default===void 0&&s[Z]===void 0&&P.push(new z(n,s,`missing required property "${Z}"`));return P}function Sl(o){const n=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(An(n)!=="array")return[new z(_,n,`array expected, ${An(n)} found`)];if(s.length&&n.length!==s.length)return[new z(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new z(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),An(s.value)==="object"&&(S=s.value);let P=[];for(let L=0;L<n.length;L++)P=P.concat(x({array:n,arrayIndex:L,value:n[L],valueSpec:S,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${_}[${L}]`}));return P}function Ji(o){const n=o.key,s=o.value,h=o.valueSpec;let m=An(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new z(n,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new z(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new z(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Su(o){const n=o.valueSpec,s=Qn(o.value.type);let h,m,_,x={};const S=s!=="categorical"&&o.value.property===void 0,P=!S,L=An(o.value.stops)==="array"&&An(o.value.stops[0])==="array"&&An(o.value.stops[0][0])==="object",Z=Jr({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(fe){if(s==="identity")return[new z(fe.key,fe.value,'identity function may not have a "stops" property')];let ye=[];const Te=fe.value;return ye=ye.concat(Sl({key:fe.key,value:Te,valueSpec:fe.valueSpec,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,arrayElementValidator:Y})),An(Te)==="array"&&Te.length===0&&ye.push(new z(fe.key,Te,"array must have at least one stop")),ye},default:function(fe){return fe.validateSpec({key:fe.key,value:fe.value,valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec})}}});return s==="identity"&&S&&Z.push(new z(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||Z.push(new z(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!wu(o.valueSpec)&&Z.push(new z(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Vs(o.valueSpec)?Z.push(new z(o.key,o.value,"property functions not supported")):S&&!mc(o.valueSpec)&&Z.push(new z(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!L||o.value.property!==void 0||Z.push(new z(o.key,o.value,'"property" property is required')),Z;function Y(fe){let ye=[];const Te=fe.value,Re=fe.key;if(An(Te)!=="array")return[new z(Re,Te,`array expected, ${An(Te)} found`)];if(Te.length!==2)return[new z(Re,Te,`array length 2 expected, length ${Te.length} found`)];if(L){if(An(Te[0])!=="object")return[new z(Re,Te,`object expected, ${An(Te[0])} found`)];if(Te[0].zoom===void 0)return[new z(Re,Te,"object stop key must have zoom")];if(Te[0].value===void 0)return[new z(Re,Te,"object stop key must have value")];if(_&&_>Qn(Te[0].zoom))return[new z(Re,Te[0].zoom,"stop zoom values must appear in ascending order")];Qn(Te[0].zoom)!==_&&(_=Qn(Te[0].zoom),m=void 0,x={}),ye=ye.concat(Jr({key:`${Re}[0]`,value:Te[0],valueSpec:{zoom:{}},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec,objectElementValidators:{zoom:Ji,value:se}}))}else ye=ye.concat(se({key:`${Re}[0]`,value:Te[0],valueSpec:{},validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec},Te));return Bn(Po(Te[1]))?ye.concat([new z(`${Re}[1]`,Te[1],"expressions are not allowed in function stops.")]):ye.concat(fe.validateSpec({key:`${Re}[1]`,value:Te[1],valueSpec:n,validateSpec:fe.validateSpec,style:fe.style,styleSpec:fe.styleSpec}))}function se(fe,ye){const Te=An(fe.value),Re=Qn(fe.value),Ue=fe.value!==null?fe.value:ye;if(h){if(Te!==h)return[new z(fe.key,Ue,`${Te} stop domain type must match previous stop domain type ${h}`)]}else h=Te;if(Te!=="number"&&Te!=="string"&&Te!=="boolean")return[new z(fe.key,Ue,"stop domain value must be a number, string, or boolean")];if(Te!=="number"&&s!=="categorical"){let Je=`number expected, ${Te} found`;return Vs(n)&&s===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new z(fe.key,Ue,Je)]}return s!=="categorical"||Te!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&Te==="number"&&m!==void 0&&Re<m?[new z(fe.key,Ue,"stop domain values must appear in ascending order")]:(m=Re,s==="categorical"&&Re in x?[new z(fe.key,Ue,"stop domain values must be unique")]:(x[Re]=!0,[])):[new z(fe.key,Ue,`integer expected, found ${Re}`)]}}function Qo(o){const n=(o.expressionContext==="property"?ba:bi)(Po(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new z(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new z(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!gs(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!gs(s))return[new z(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ya(s,["zoom","feature-state"]))return[new z(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!sl(s))return[new z(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ko(o){const n=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Qn(s))===-1&&m.push(new z(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Qn(s))===-1&&m.push(new z(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function es(o){return Io(Po(o.value))?Qo(Se({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ta(o)}function Ta(o){const n=o.value,s=o.key;if(An(n)!=="array")return[new z(s,n,`array expected, ${An(n)} found`)];const h=o.styleSpec;let m,_=[];if(n.length<1)return[new z(s,n,"filter array must have at least 1 element")];switch(_=_.concat(ko({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Qn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Qn(n[1])==="$type"&&_.push(new z(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new z(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=An(n[1]),m!=="string"&&_.push(new z(`${s}[1]`,n[1],`string expected, ${m} found`)));for(let x=2;x<n.length;x++)m=An(n[x]),Qn(n[1])==="$type"?_=_.concat(ko({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&_.push(new z(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(Ta({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=An(n[1]),n.length!==2?_.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&_.push(new z(`${s}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=An(n[1]),n.length!==2?_.push(new z(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&_.push(new z(`${s}[1]`,n[1],`object expected, ${m} found`))}return _}function El(o,n){const s=o.key,h=o.validateSpec,m=o.style,_=o.styleSpec,x=o.value,S=o.objectKey,P=_[`${n}_${o.layerType}`];if(!P)return[];const L=S.match(/^(.*)-transition$/);if(n==="paint"&&L&&P[L[1]]&&P[L[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:m,styleSpec:_});const Z=o.valueSpec||P[S];if(!Z)return[new z(s,x,`unknown property "${S}"`)];let Y;if(An(x)==="string"&&Vs(Z)&&!Z.tokens&&(Y=/^{([^}]+)}$/.exec(x)))return[new z(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const se=[];return o.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&se.push(new z(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&pl(Po(x))&&Qn(x.type)==="identity"&&se.push(new z(s,x,'"text-font" does not support identity functions'))),se.concat(h({key:o.key,value:x,valueSpec:Z,style:m,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:S}))}function Tl(o){return El(o,"paint")}function G(o){return El(o,"layout")}function ve(o){let n=[];const s=o.value,h=o.key,m=o.style,_=o.styleSpec;s.type||s.ref||n.push(new z(h,s,'either "type" or "ref" is required'));let x=Qn(s.type);const S=Qn(s.ref);if(s.id){const P=Qn(s.id);for(let L=0;L<o.arrayIndex;L++){const Z=m.layers[L];Qn(Z.id)===P&&n.push(new z(h,s.id,`duplicate layer id "${s.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(L=>{L in s&&n.push(new z(h,s[L],`"${L}" is prohibited for ref layers`))}),m.layers.forEach(L=>{Qn(L.id)===S&&(P=L)}),P?P.ref?n.push(new z(h,s.ref,"ref cannot reference another ref layer")):x=Qn(P.type):n.push(new z(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const P=m.sources&&m.sources[s.source],L=P&&Qn(P.type);P?L==="vector"&&x==="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster source`)):L!=="raster-dem"&&x==="hillshade"?n.push(new z(h,s.source,`layer "${s.id}" requires a raster-dem source`)):L==="raster"&&x!=="raster"?n.push(new z(h,s.source,`layer "${s.id}" requires a vector source`)):L!=="vector"||s["source-layer"]?L==="raster-dem"&&x!=="hillshade"?n.push(new z(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||L==="geojson"&&P.lineMetrics||n.push(new z(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new z(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new z(h,s.source,`source "${s.source}" not found`))}else n.push(new z(h,s,'missing required property "source"'));return n=n.concat(Jr({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:es,layout:P=>Jr({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":L=>G(Se({layerType:x},L))}}),paint:P=>Jr({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":L=>Tl(Se({layerType:x},L))}})}})),n}function De(o){const n=o.value,s=o.key,h=An(n);return h!=="string"?[new z(s,n,`string expected, ${h} found`)]:[]}const at={promoteId:function({key:o,value:n}){if(An(n)==="string")return De({key:o,value:n});{const s=[];for(const h in n)s.push(...De({key:`${o}.${h}`,value:n[h]}));return s}}};function Lt(o){const n=o.value,s=o.key,h=o.styleSpec,m=o.style,_=o.validateSpec;if(!n.type)return[new z(s,n,'"type" is required')];const x=Qn(n.type);let S;switch(x){case"vector":case"raster":return S=Jr({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:at,validateSpec:_}),S;case"raster-dem":return S=function(P){var L;const Z=(L=P.sourceName)!==null&&L!==void 0?L:"",Y=P.value,se=P.styleSpec,fe=se.source_raster_dem,ye=P.style;let Te=[];const Re=An(Y);if(Y===void 0)return Te;if(Re!=="object")return Te.push(new z("source_raster_dem",Y,`object expected, ${Re} found`)),Te;const Ue=Qn(Y.encoding)==="custom",Je=["redFactor","greenFactor","blueFactor","baseShift"],Ge=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const qe in Y)!Ue&&Je.includes(qe)?Te.push(new z(qe,Y[qe],`In "${Z}": "${qe}" is only valid when "encoding" is set to "custom". ${Ge} encoding found`)):fe[qe]?Te=Te.concat(P.validateSpec({key:qe,value:Y[qe],valueSpec:fe[qe],validateSpec:P.validateSpec,style:ye,styleSpec:se})):Te.push(new z(qe,Y[qe],`unknown property "${qe}"`));return Te}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:_}),S;case"geojson":if(S=Jr({key:s,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:_,objectElementValidators:at}),n.cluster)for(const P in n.clusterProperties){const[L,Z]=n.clusterProperties[P],Y=typeof L=="string"?[L,["accumulated"],["get",P]]:L;S.push(...Qo({key:`${s}.${P}.map`,value:Z,validateSpec:_,expressionContext:"cluster-map"})),S.push(...Qo({key:`${s}.${P}.reduce`,value:Y,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return Jr({key:s,value:n,valueSpec:h.source_video,style:m,validateSpec:_,styleSpec:h});case"image":return Jr({key:s,value:n,valueSpec:h.source_image,style:m,validateSpec:_,styleSpec:h});case"canvas":return[new z(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ko({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:_,styleSpec:h})}}function Ct(o){const n=o.value,s=o.styleSpec,h=s.light,m=o.style;let _=[];const x=An(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new z("light",n,`object expected, ${x} found`)]),_;for(const S in n){const P=S.match(/^(.*)-transition$/);_=_.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)])}return _}function Vt(o){const n=o.value,s=o.styleSpec,h=s.sky,m=o.style,_=An(n);if(n===void 0)return[];if(_!=="object")return[new z("sky",n,`object expected, ${_} found`)];let x=[];for(const S in n)x=x.concat(h[S]?Mn({key:S,value:n[S],valueSpec:h[S],style:m,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)]);return x}function Zt(o){const n=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let _=[];const x=An(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new z("terrain",n,`object expected, ${x} found`)]),_;for(const S in n)_=_.concat(h[S]?o.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new z(S,n[S],`unknown property "${S}"`)]);return _}function on(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],_=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&n.push(new z(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new z(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(Jr({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return De({key:h,value:s})}const Ln={"*":()=>[],array:Sl,boolean:function(o){const n=o.value,s=o.key,h=An(n);return h!=="boolean"?[new z(s,n,`boolean expected, ${h} found`)]:[]},number:Ji,color:function(o){const n=o.key,s=o.value,h=An(s);return h!=="string"?[new z(n,s,`color expected, ${h} found`)]:Dn.parse(String(s))?[]:[new z(n,s,`color expected, "${s}" found`)]},constants:Ea,enum:ko,filter:es,function:Su,layer:ve,object:Jr,source:Lt,light:Ct,sky:Vt,terrain:Zt,string:De,formatted:function(o){return De(o).length===0?[]:Qo(o)},resolvedImage:function(o){return De(o).length===0?[]:Qo(o)},padding:function(o){const n=o.key,s=o.value;if(An(s)==="array"){if(s.length<1||s.length>4)return[new z(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let _=0;_<s.length;_++)m=m.concat(o.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return m}return Ji({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=An(s),m=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new z(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(ko({key:`${n}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),_=_.concat(Sl({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return _},sprite:on};function Mn(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Mn,s.expression&&pl(Qn(n))?Su(o):s.expression&&Bn(Po(n))?Qo(o):s.type&&Ln[s.type]?Ln[s.type](o):Jr(Se({},o,{valueSpec:s.type?h[s.type]:s}))}function er(o){const n=o.value,s=o.key,h=De(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new z(s,n,'"glyphs" url must include a "{range}" token'))),h}function Nn(o,n=et){let s=[];return s=s.concat(Mn({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Mn,objectElementValidators:{glyphs:er,"*":()=>[]}})),o.constants&&(s=s.concat(Ea({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Mn}))),br(s)}function Vn(o){return function(n){return o({...n,validateSpec:Mn})}}function br(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Sr(o){return function(...n){return br(o.apply(this,n))}}Nn.source=Sr(Vn(Lt)),Nn.sprite=Sr(Vn(on)),Nn.glyphs=Sr(Vn(er)),Nn.light=Sr(Vn(Ct)),Nn.sky=Sr(Vn(Vt)),Nn.terrain=Sr(Vn(Zt)),Nn.layer=Sr(Vn(ve)),Nn.filter=Sr(Vn(es)),Nn.paintProperty=Sr(Vn(Tl)),Nn.layoutProperty=Sr(Vn(G));const Si=Nn,Mo=Si.light,vc=Si.paintProperty,ts=Si.layoutProperty;function Ca(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new qt(new Error(h.message))),s=!0;return s}class Ia{constructor(n,s,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const L=x[3+P],Z=x[3+P+1];m.push(L===Z?null:x.subarray(L,Z))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,m,_){this._forEachCell(s,h,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,m,_,x){this.cells[_].push(x)}query(n,s,h,m,_){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=m&&!_)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,m,this._queryCell,P,{},_),P}}_queryCell(n,s,h,m,_,x,S,P){const L=this.cells[_];if(L!==null){const Z=this.keys,Y=this.bboxes;for(let se=0;se<L.length;se++){const fe=L[se];if(S[fe]===void 0){const ye=4*fe;(P?P(Y[ye+0],Y[ye+1],Y[ye+2],Y[ye+3]):n<=Y[ye+2]&&s<=Y[ye+3]&&h>=Y[ye+0]&&m>=Y[ye+1])?(S[fe]=!0,x.push(Z[fe])):S[fe]=!1}}}}_forEachCell(n,s,h,m,_,x,S,P){const L=this._convertToCellCoord(n),Z=this._convertToCellCoord(s),Y=this._convertToCellCoord(h),se=this._convertToCellCoord(m);for(let fe=L;fe<=Y;fe++)for(let ye=Z;ye<=se;ye++){const Te=this.d*ye+fe;if((!P||P(this._convertFromCellCoord(fe),this._convertFromCellCoord(ye),this._convertFromCellCoord(fe+1),this._convertFromCellCoord(ye+1)))&&_.call(this,n,s,h,m,Te,x,S,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const S=n[x];m[3+x]=_,m.set(S,_),_+=S.length}return m[3+n.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+n.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Ia(n.buffer)}}const vs={};function Bt(o,n,s={}){if(vs[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),vs[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Ia),Bt("Color",Dn),Bt("Error",Error),Bt("AJAXError",ht),Bt("ResolvedImage",ji),Bt("StylePropertyFunction",vl),Bt("StyleExpression",qn,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",yl),Bt("ZoomConstantExpression",gl),Bt("CompoundExpression",wi,{omit:["_evaluate"]});for(const o in Us)Us[o]._classRegistryKey||Bt(`Expression_${o}`,Us[o]);function Wh(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Cl(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(Wh(o)||te(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Cl(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!vs[h])throw new Error(`${h} is not registered.`);const m=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||vs[h].omit.indexOf(_)>=0)continue;const x=o[_];m[_]=vs[h].shallow.indexOf(_)>=0?x:Cl(x,n)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function Eu(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||Wh(o)||te(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Eu);if(typeof o=="object"){const n=o.$name||"Object";if(!vs[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=vs[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const _=o[m];h[m]=vs[n].shallow.indexOf(m)>=0?_:Eu(_)}return h}throw new Error("can't deserialize object of type "+typeof o)}class _c{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Rt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function xc(o){for(const n of o)if(wc(n.charCodeAt(0)))return!0;return!1}function Qf(o){for(const n of o)if(!ep(n.charCodeAt(0)))return!1;return!0}function ep(o){return!(Rt.Arabic(o)||Rt["Arabic Supplement"](o)||Rt["Arabic Extended-A"](o)||Rt["Arabic Presentation Forms-A"](o)||Rt["Arabic Presentation Forms-B"](o))}function wc(o){return!(o!==746&&o!==747&&(o<4352||!(Rt["Bopomofo Extended"](o)||Rt.Bopomofo(o)||Rt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Rt["CJK Compatibility Ideographs"](o)||Rt["CJK Compatibility"](o)||Rt["CJK Radicals Supplement"](o)||Rt["CJK Strokes"](o)||!(!Rt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Rt["CJK Unified Ideographs Extension A"](o)||Rt["CJK Unified Ideographs"](o)||Rt["Enclosed CJK Letters and Months"](o)||Rt["Hangul Compatibility Jamo"](o)||Rt["Hangul Jamo Extended-A"](o)||Rt["Hangul Jamo Extended-B"](o)||Rt["Hangul Jamo"](o)||Rt["Hangul Syllables"](o)||Rt.Hiragana(o)||Rt["Ideographic Description Characters"](o)||Rt.Kanbun(o)||Rt["Kangxi Radicals"](o)||Rt["Katakana Phonetic Extensions"](o)||Rt.Katakana(o)&&o!==12540||!(!Rt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Rt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Rt["Unified Canadian Aboriginal Syllabics"](o)||Rt["Unified Canadian Aboriginal Syllabics Extended"](o)||Rt["Vertical Forms"](o)||Rt["Yijing Hexagram Symbols"](o)||Rt["Yi Syllables"](o)||Rt["Yi Radicals"](o))))}function bc(o){return!(wc(o)||function(n){return!!(Rt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Rt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Rt["Letterlike Symbols"](n)||Rt["Number Forms"](n)||Rt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Rt["Control Pictures"](n)&&n!==9251||Rt["Optical Character Recognition"](n)||Rt["Enclosed Alphanumerics"](n)||Rt["Geometric Shapes"](n)||Rt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Rt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Rt["CJK Symbols and Punctuation"](n)||Rt.Katakana(n)||Rt["Private Use Area"](n)||Rt["CJK Compatibility Forms"](n)||Rt["Small Form Variants"](n)||Rt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Zh(o){return o>=1424&&o<=2303||Rt["Arabic Presentation Forms-A"](o)||Rt["Arabic Presentation Forms-B"](o)}function hy(o,n){return!(!n&&Zh(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Rt.Khmer(o))}function tp(o){for(const n of o)if(Zh(n.charCodeAt(0)))return!0;return!1}const Aa=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class tr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _c,this.transition={})}isSupportedScript(n){return function(s,h){for(const m of s)if(!hy(m.charCodeAt(0),h))return!1;return!0}(n,Aa.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Tu{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,m){if(pl(h))return new vl(h,m);if(Bn(h)){const _=ba(h,m);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return m.type==="color"&&typeof h=="string"?_=Dn.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=Fi.parse(h)):_=li.parse(h),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Sc{constructor(n){this.property=n,this.value=new Tu(n,void 0)}transitioned(n,s){return new rp(this.property,this.value,s,E({},n.transition,this.transition),n.now)}untransitioned(){return new rp(this.property,this.value,null,{},0)}}class np{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return q(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sc(this._values[n].property)),this._values[n].value=new Tu(this._values[n].property,s===null?void 0:q(s))}getTransition(n){return q(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sc(this._values[n].property)),this._values[n].transition=q(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const m=this.getTransition(s);m!==void 0&&(n[`${s}-transition`]=m)}return n}transitioned(n,s){const h=new Xh(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,s._values[m]);return h}untransitioned(){const n=new Xh(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class rp{constructor(n,s,h,m,_){this.property=n,this.value=s,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const m=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(m<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,function(P){if(P<=0)return 0;if(P>=1)return 1;const L=P*P,Z=L*P;return 4*(P<.5?Z:3*(P-L)+Z-.75)}(S))}}return _}}class Xh{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const m=new Cu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(n,s,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ip{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return q(this._values[n].value)}setValue(n,s){this._values[n]=new Tu(this._values[n].property,s===null?void 0:q(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const m=new Cu(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(n,s,h);return m}}class zo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,m){return this.property.evaluate(this.value,this.parameters,n,s,h,m)}}class Cu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Xt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const m=qr[this.specification.type];return m?m(n,s,h):n}}class cn{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,m){return new zo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,m)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new zo(this,{kind:"constant",value:void 0},n.parameters);const m=qr[this.specification.type];if(m){const _=m(n.value.value,s.value.value,h);return new zo(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,m,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,m,_,x)}}class Il extends cn{possiblyEvaluate(n,s,h,m){if(n.value===void 0)return new zo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,m),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,s);return new zo(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new zo(this,{kind:"constant",value:_},s)}return new zo(this,n.expression,s)}evaluate(n,s,h,m,_,x){if(n.kind==="source"){const S=n.evaluate(s,h,m,_,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,m),n.evaluate({zoom:Math.floor(s.zoom)},h,m),n.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):n.value}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class qh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,m);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new tr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new tr(Math.floor(s.zoom),s)),n.expression.evaluate(new tr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Kh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){return!!n.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class Ei{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Tu(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new Sc(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}Bt("DataDrivenProperty",cn),Bt("DataConstantProperty",Xt),Bt("CrossFadedDataDrivenProperty",Il),Bt("CrossFadedProperty",qh),Bt("ColorRampProperty",Kh);const Yh="-transition";class Ro extends bn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new ip(s.layout)),s.paint)){this._transitionablePaint=new np(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cu(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(ts,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Yh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(vc,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(Yh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[n],_=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,S,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,m,_={}){return(!_||_.validate!==!1)&&Ca(this,n.call(Si,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof zo&&Vs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const dy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Iu{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Er(o,n=1){let s=0,h=0;return{members:o.map(m=>{const _=dy[m.type].BYTES_PER_ELEMENT,x=s=op(s,Math.max(n,_)),S=m.components||1;return h=Math.max(h,_),s+=_*S,{name:m.name,type:m.type,components:S,offset:x}}),size:op(s,Math.max(h,n)),alignment:n}}function op(o,n){return Math.ceil(o/n)*n}class ns extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.int16[m+0]=s,this.int16[m+1]=h,n}}ns.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",ns);class Ec extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=m,n}}Ec.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Ec);class Jh extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,m)}emplace(n,s,h,m,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=_,n}}Jh.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",Jh);class Qh extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,m,_,x)}emplace(n,s,h,m,_,x,S){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=_,this.int16[P+4]=x,this.int16[P+5]=S,n}}Qh.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",Qh);class ed extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,m,_,x)}emplace(n,s,h,m,_,x,S){const P=4*n,L=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[L+4]=m,this.uint8[L+5]=_,this.uint8[L+6]=x,this.uint8[L+7]=S,n}}ed.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",ed);class Al extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.float32[m+0]=s,this.float32[m+1]=h,n}}Al.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",Al);class td extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x,S,P,L,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,s,h,m,_,x,S,P,L,Z)}emplace(n,s,h,m,_,x,S,P,L,Z,Y){const se=10*n;return this.uint16[se+0]=s,this.uint16[se+1]=h,this.uint16[se+2]=m,this.uint16[se+3]=_,this.uint16[se+4]=x,this.uint16[se+5]=S,this.uint16[se+6]=P,this.uint16[se+7]=L,this.uint16[se+8]=Z,this.uint16[se+9]=Y,n}}td.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",td);class nd extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x,S,P,L,Z,Y,se){const fe=this.length;return this.resize(fe+1),this.emplace(fe,n,s,h,m,_,x,S,P,L,Z,Y,se)}emplace(n,s,h,m,_,x,S,P,L,Z,Y,se,fe){const ye=12*n;return this.int16[ye+0]=s,this.int16[ye+1]=h,this.int16[ye+2]=m,this.int16[ye+3]=_,this.uint16[ye+4]=x,this.uint16[ye+5]=S,this.uint16[ye+6]=P,this.uint16[ye+7]=L,this.int16[ye+8]=Z,this.int16[ye+9]=Y,this.int16[ye+10]=se,this.int16[ye+11]=fe,n}}nd.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",nd);class _s extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=m,n}}_s.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",_s);class Tc extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Tc.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",Tc);class Au extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x,S,P,L){const Z=this.length;return this.resize(Z+1),this.emplace(Z,n,s,h,m,_,x,S,P,L)}emplace(n,s,h,m,_,x,S,P,L,Z){const Y=10*n,se=5*n;return this.int16[Y+0]=s,this.int16[Y+1]=h,this.int16[Y+2]=m,this.int16[Y+3]=_,this.int16[Y+4]=x,this.int16[Y+5]=S,this.uint32[se+3]=P,this.uint16[Y+8]=L,this.uint16[Y+9]=Z,n}}Au.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",Au);class Cc extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,m,_,x)}emplace(n,s,h,m,_,x,S){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=_,this.int16[P+4]=x,this.int16[P+5]=S,n}}Cc.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",Cc);class Pu extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,m,_)}emplace(n,s,h,m,_,x){const S=4*n,P=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[P+6]=_,this.int16[P+7]=x,n}}Pu.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",Pu);class rd extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,m)}emplace(n,s,h,m,_){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=m,this.float32[S+2]=_,n}}rd.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",rd);class Pa extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=m,n}}Pa.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",Pa);class ka extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te,Re,Ue){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te,Re,Ue)}emplace(n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te,Re,Ue,Je){const Ge=24*n,qe=12*n,pt=48*n;return this.int16[Ge+0]=s,this.int16[Ge+1]=h,this.uint16[Ge+2]=m,this.uint16[Ge+3]=_,this.uint32[qe+2]=x,this.uint32[qe+3]=S,this.uint32[qe+4]=P,this.uint16[Ge+10]=L,this.uint16[Ge+11]=Z,this.uint16[Ge+12]=Y,this.float32[qe+7]=se,this.float32[qe+8]=fe,this.uint8[pt+36]=ye,this.uint8[pt+37]=Te,this.uint8[pt+38]=Re,this.uint32[qe+10]=Ue,this.int16[Ge+22]=Je,n}}ka.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ka);class id extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te,Re,Ue,Je,Ge,qe,pt,vt,jt,Wt,Ot,zt,It,Ut){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te,Re,Ue,Je,Ge,qe,pt,vt,jt,Wt,Ot,zt,It,Ut)}emplace(n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te,Re,Ue,Je,Ge,qe,pt,vt,jt,Wt,Ot,zt,It,Ut,Pt){const St=32*n,nn=16*n;return this.int16[St+0]=s,this.int16[St+1]=h,this.int16[St+2]=m,this.int16[St+3]=_,this.int16[St+4]=x,this.int16[St+5]=S,this.int16[St+6]=P,this.int16[St+7]=L,this.uint16[St+8]=Z,this.uint16[St+9]=Y,this.uint16[St+10]=se,this.uint16[St+11]=fe,this.uint16[St+12]=ye,this.uint16[St+13]=Te,this.uint16[St+14]=Re,this.uint16[St+15]=Ue,this.uint16[St+16]=Je,this.uint16[St+17]=Ge,this.uint16[St+18]=qe,this.uint16[St+19]=pt,this.uint16[St+20]=vt,this.uint16[St+21]=jt,this.uint16[St+22]=Wt,this.uint32[nn+12]=Ot,this.float32[nn+13]=zt,this.float32[nn+14]=It,this.uint16[St+30]=Ut,this.uint16[St+31]=Pt,n}}id.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",id);class ku extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}ku.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",ku);class Ma extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=h,this.float32[_+2]=m,n}}Ma.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",Ma);class od extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=m,n}}od.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",od);class sd extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.uint16[m+0]=s,this.uint16[m+1]=h,n}}sd.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",sd);class Ic extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Ic.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",Ic);class ad extends hr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,m)}emplace(n,s,h,m,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=_,n}}ad.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",ad);class y extends Iu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class r extends Au{get(n){return new y(this,n)}}Bt("CollisionBoxArray",r);class l extends Iu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}l.prototype.size=48;class d extends ka{get(n){return new l(this,n)}}Bt("PlacedSymbolArray",d);class g extends Iu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}g.prototype.size=64;class v extends id{get(n){return new g(this,n)}}Bt("SymbolInstanceArray",v);class A extends ku{getoffsetX(n){return this.float32[1*n+0]}}Bt("GlyphOffsetArray",A);class k extends Ec{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Bt("SymbolLineVertexArray",k);class M extends Iu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}M.prototype.size=12;class H extends Ma{get(n){return new M(this,n)}}Bt("TextAnchorOffsetArray",H);class J extends Iu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}J.prototype.size=8;class ne extends od{get(n){return new J(this,n)}}Bt("FeatureIndexArray",ne);class pe extends ns{}class Ae extends ns{}class Pe extends ns{}class Oe extends Qh{}class Ce extends ed{}class Xe extends Al{}class tt extends td{}class je extends nd{}class Ke extends _s{}class st extends Tc{}class it extends Cc{}class mt extends rd{}class bt extends Pa{}class xt extends sd{}const Tt=Er([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nt}=Tt;class sn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,m){let _=this.segments[this.segments.length-1];return n>sn.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${sn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>sn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(_.sortKey=m),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,m){return new sn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function kt(o,n){return 256*(o=X(Math.floor(o),0,255))+X(Math.floor(n),0,255)}sn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",sn);const rn=Er([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Gt={exports:{}},nr={exports:{}};nr.exports=function(o,n){var s,h,m,_,x,S,P,L;for(h=o.length-(s=3&o.length),m=n,x=3432918353,S=461845907,L=0;L<h;)P=255&o.charCodeAt(L)|(255&o.charCodeAt(++L))<<8|(255&o.charCodeAt(++L))<<16|(255&o.charCodeAt(++L))<<24,++L,m=27492+(65535&(_=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(L+2))<<16;case 2:P^=(255&o.charCodeAt(L+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(L)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Tn=nr.exports,_n={exports:{}};_n.exports=function(o,n){for(var s,h=o.length,m=n^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:m^=(255&o.charCodeAt(_+2))<<16;case 2:m^=(255&o.charCodeAt(_+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(_)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Cn=Tn,Tr=_n.exports;Gt.exports=Cn,Gt.exports.murmur3=Cn,Gt.exports.murmur2=Tr;var Wn=b(Gt.exports);class Ti{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,m){this.ids.push(Qr(n)),this.positions.push(s,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Qr(n);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return dr(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const s=new Ti;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Qr(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Wn(String(o))}function dr(o,n,s,h){for(;s<h;){const m=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<m);do x--;while(o[x]>m);if(_>=x)break;hi(o,_,x),hi(n,3*_,3*x),hi(n,3*_+1,3*x+1),hi(n,3*_+2,3*x+2)}x-s<h-x?(dr(o,n,s,x),s=x+1):(dr(o,n,x+1,h),h=x)}}function hi(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Bt("FeaturePositionMap",Ti);class di{constructor(n,s){this.gl=n.gl,this.location=s}}class yo extends di{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Ws extends di{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Pl extends di{constructor(n,s){super(n,s),this.current=Dn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const kl=new Float32Array(16);function Zs(o){return[kt(255*o.r,255*o.g),kt(255*o.b,255*o.a)]}class Br{constructor(n,s,h){this.value=n,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Pl(n,s):new yo(n,s)}}class Cr{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,m){const _=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Ws(n,s):new yo(n,s)}}class fr{constructor(n,s,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,s,h,m,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new tr(0),s,{},m,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,m){const _=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const m=Zs(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ci{constructor(n,s,h,m,_,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,m,_){const x=this.expression.evaluate(new tr(this.zoom),s,{},m,[],_),S=this.expression.evaluate(new tr(this.zoom+1),s,{},m,[],_),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,S)}updatePaintArray(n,s,h,m){const _=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,h,m){if(this.type==="color"){const _=Zs(h),x=Zs(m);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=X(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,s,h){return new yo(n,s)}}class rr{constructor(n,s,h,m,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,m,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,m){if(!m||!h)return;const{min:_,mid:x,max:S}=h,P=m[_],L=m[x],Z=m[S];if(P&&L&&Z)for(let Y=n;Y<s;Y++)this.zoomInPaintVertexArray.emplace(Y,L.tl[0],L.tl[1],L.br[0],L.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],L.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,L.tl[0],L.tl[1],L.br[0],L.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],L.pixelRatio,Z.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,rn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,rn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Nr{constructor(n,s,h){this.binders={},this._buffers=[];const m=[];for(const _ in n.paint._values){if(!h(_))continue;const x=n.paint.get(_);if(!(x instanceof zo&&Vs(x.property.specification)))continue;const S=Ur(_,n.type),P=x.value,L=x.property.specification.type,Z=x.property.useIntegerZoom,Y=x.property.specification["property-type"],se=Y==="cross-faded"||Y==="cross-faded-data-driven";if(P.kind==="constant")this.binders[_]=se?new Cr(P.value,S):new Br(P.value,S,L),m.push(`/u_${_}`);else if(P.kind==="source"||se){const fe=sp(_,L,"source");this.binders[_]=se?new rr(P,L,Z,s,fe,n.id):new fr(P,S,L,fe),m.push(`/a_${_}`)}else{const fe=sp(_,L,"composite");this.binders[_]=new Ci(P,S,L,Z,s,fe),m.push(`/z_${_}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof fr||s instanceof Ci?s.maxValue:0}populatePaintArrays(n,s,h,m,_){for(const x in this.binders){const S=this.binders[x];(S instanceof fr||S instanceof Ci||S instanceof rr)&&S.populatePaintArray(n,s,h,m,_)}}setConstantPatternPositions(n,s){for(const h in this.binders){const m=this.binders[h];m instanceof Cr&&m.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,m,_){let x=!1;for(const S in n){const P=s.getPositions(S);for(const L of P){const Z=h.feature(L.index);for(const Y in this.binders){const se=this.binders[Y];if((se instanceof fr||se instanceof Ci||se instanceof rr)&&se.expression.isStateDependent===!0){const fe=m.paint.get(Y);se.expression=fe.value,se.updatePaintArray(L.start,L.end,Z,n[S],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Br||h instanceof Cr)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof fr||h instanceof Ci)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof rr)for(let m=0;m<rn.members.length;m++)n.push(rn.members[m].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Br||h instanceof Cr||h instanceof Ci)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const m in this.binders){const _=this.binders[m];if(_ instanceof Br||_ instanceof Cr||_ instanceof Ci){for(const x of _.uniformNames)if(s[x]){const S=_.getBinding(n,s[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(n,s,h,m){for(const{name:_,property:x,binding:S}of s)this.binders[x].setUniform(S,m,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof rr){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof fr||h instanceof Ci)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof fr||h instanceof Ci||h instanceof rr)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof fr||s instanceof Ci||s instanceof rr)&&s.destroy()}}}class ei{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new Nr(m,s,h);this.needsUpload=!1,this._featureMap=new Ti,this._bufferOffset=0}populatePaintArrays(n,s,h,m,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,m,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,m){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ur(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function sp(o,n,s){const h={color:{source:Al,composite:ad},number:{source:ku,composite:Al}},m=function(_){return{"line-pattern":{source:tt,composite:tt},"fill-pattern":{source:tt,composite:tt},"fill-extrusion-pattern":{source:tt,composite:tt}}[_]}(o);return m&&m[s]||h[n][s]}Bt("ConstantBinder",Br),Bt("CrossFadedConstantBinder",Cr),Bt("SourceExpressionBinder",fr),Bt("CrossFadedCompositeBinder",rr),Bt("CompositeExpressionBinder",Ci),Bt("ProgramConfiguration",Nr,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",ei);const _r=8192,ld=Math.pow(2,14)-1,ap=-ld-1;function za(o){const n=_r/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let _=0;_<m.length;_++){const x=m[_],S=Math.round(x.x*n),P=Math.round(x.y*n);x.x=X(S,ap,ld),x.y=X(P,ap,ld),(S<x.x||S>x.x+1||P<x.y||P>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ra(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?za(o):[]}}function xs(o,n,s,h,m){o.emplaceBack(2*n+(h+1)/2,2*s+(m+1)/2)}class Ac{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ae,this.indexArray=new bt,this.segments=new sn,this.programConfigurations=new ei(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const m=this.layers[0],_=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:P,id:L,index:Z,sourceLayerIndex:Y}of n){const se=this.layers[0]._featureFilter.needGeometry,fe=Ra(P,se);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),fe,h))continue;const ye=S?x.evaluate(fe,{},h):void 0,Te={id:L,properties:P.properties,type:P.type,sourceLayerIndex:Y,index:Z,geometry:se?fe.geometry:za(P),patterns:{},sortKey:ye};_.push(Te)}S&&_.sort((P,L)=>P.sortKey-L.sortKey);for(const P of _){const{geometry:L,index:Z,sourceLayerIndex:Y}=P,se=n[Z].feature;this.addFeature(P,L,Z,h),s.featureIndex.insert(se,L,Z,Y,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Nt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,m){for(const _ of s)for(const x of _){const S=x.x,P=x.y;if(S<0||S>=_r||P<0||P>=_r)continue;const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),Z=L.vertexLength;xs(this.layoutVertexArray,S,P,-1,-1),xs(this.layoutVertexArray,S,P,1,-1),xs(this.layoutVertexArray,S,P,1,1),xs(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function ud(o,n){for(let s=0;s<o.length;s++)if(kc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(kc(o,n[s]))return!0;return!!Mu(o,n)}function lp(o,n,s){return!!kc(o,n)||!!fy(n,o,s)}function Pc(o,n){if(o.length===1)return Px(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let m=0;m<h.length;m++)if(kc(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(Px(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Mu(o,n[s]))return!0;return!1}function up(o,n,s){if(o.length>1){if(Mu(o,n))return!0;for(let h=0;h<n.length;h++)if(fy(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(fy(o[h],n,s))return!0;return!1}function Mu(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let _=0;_<n.length-1;_++)if(SA(h,m,n[_],n[_+1]))return!0}return!1}function SA(o,n,s,h){return de(o,s,h)!==de(n,s,h)&&de(o,n,s)!==de(o,n,h)}function fy(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(Ax(o,n[m-1],n[m])<h)return!0;return!1}function Ax(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const m=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(m<0?n:m>1?s:s.sub(n)._mult(m)._add(n))}function Px(o,n){let s,h,m,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let S=0,P=s.length-1;S<s.length;P=S++)h=s[S],m=s[P],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(_=!_)}return _}function kc(o,n){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const _=o[h],x=o[m];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function EA(o,n,s){const h=s[0],m=s[2];if(o.x<h.x&&n.x<h.x||o.x>m.x&&n.x>m.x||o.y<h.y&&n.y<h.y||o.y>m.y&&n.y>m.y)return!1;const _=de(o,n,s[0]);return _!==de(o,n,s[1])||_!==de(o,n,s[2])||_!==de(o,n,s[3])}function cd(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function cp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function hp(o,n,s,h,m){if(!n[0]&&!n[1])return o;const _=w.convert(n)._mult(m);s==="viewport"&&_._rotate(-h);const x=[];for(let S=0;S<o.length;S++)x.push(o[S].sub(_));return x}let kx,Mx;Bt("CircleBucket",Ac,{omit:["layers"]});var TA={get paint(){return Mx=Mx||new Ei({"circle-radius":new cn(et.paint_circle["circle-radius"]),"circle-color":new cn(et.paint_circle["circle-color"]),"circle-blur":new cn(et.paint_circle["circle-blur"]),"circle-opacity":new cn(et.paint_circle["circle-opacity"]),"circle-translate":new Xt(et.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new cn(et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new cn(et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new cn(et.paint_circle["circle-stroke-opacity"])})},get layout(){return kx=kx||new Ei({"circle-sort-key":new cn(et.layout_circle["circle-sort-key"])})}},Ni=1e-6,Mc=typeof Float32Array<"u"?Float32Array:Array;function py(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function zx(o,n,s){var h=n[0],m=n[1],_=n[2],x=n[3],S=n[4],P=n[5],L=n[6],Z=n[7],Y=n[8],se=n[9],fe=n[10],ye=n[11],Te=n[12],Re=n[13],Ue=n[14],Je=n[15],Ge=s[0],qe=s[1],pt=s[2],vt=s[3];return o[0]=Ge*h+qe*S+pt*Y+vt*Te,o[1]=Ge*m+qe*P+pt*se+vt*Re,o[2]=Ge*_+qe*L+pt*fe+vt*Ue,o[3]=Ge*x+qe*Z+pt*ye+vt*Je,o[4]=(Ge=s[4])*h+(qe=s[5])*S+(pt=s[6])*Y+(vt=s[7])*Te,o[5]=Ge*m+qe*P+pt*se+vt*Re,o[6]=Ge*_+qe*L+pt*fe+vt*Ue,o[7]=Ge*x+qe*Z+pt*ye+vt*Je,o[8]=(Ge=s[8])*h+(qe=s[9])*S+(pt=s[10])*Y+(vt=s[11])*Te,o[9]=Ge*m+qe*P+pt*se+vt*Re,o[10]=Ge*_+qe*L+pt*fe+vt*Ue,o[11]=Ge*x+qe*Z+pt*ye+vt*Je,o[12]=(Ge=s[12])*h+(qe=s[13])*S+(pt=s[14])*Y+(vt=s[15])*Te,o[13]=Ge*m+qe*P+pt*se+vt*Re,o[14]=Ge*_+qe*L+pt*fe+vt*Ue,o[15]=Ge*x+qe*Z+pt*ye+vt*Je,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var hd,CA=zx;function dp(o,n,s){var h=n[0],m=n[1],_=n[2],x=n[3];return o[0]=s[0]*h+s[4]*m+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*m+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*m+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*m+s[11]*_+s[15]*x,o}hd=new Mc(4),Mc!=Float32Array&&(hd[0]=0,hd[1]=0,hd[2]=0,hd[3]=0);class IA extends Ro{constructor(n){super(n,TA)}createBucket(n){return new Ac(n)}queryRadius(n){const s=n;return cd("circle-radius",this,s)+cd("circle-stroke-width",this,s)+cp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,m,_,x,S,P){const L=hp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),Z=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),Y=this.paint.get("circle-pitch-alignment")==="map",se=Y?L:function(ye,Te){return ye.map(Re=>Rx(Re,Te))}(L,P),fe=Y?Z*S:Z;for(const ye of m)for(const Te of ye){const Re=Y?Te:Rx(Te,P);let Ue=fe;const Je=dp([],[Te.x,Te.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ue*=Je[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ue*=x.cameraToCenterDistance/Je[3]),lp(se,Re,Ue))return!0}return!1}}function Rx(o,n){const s=dp([],[o.x,o.y,0,1],n);return new w(s[0]/s[3],s[1]/s[3])}class Lx extends Ac{}let Ox;Bt("HeatmapBucket",Lx,{omit:["layers"]});var AA={get paint(){return Ox=Ox||new Ei({"heatmap-radius":new cn(et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new cn(et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Kh(et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(et.paint_heatmap["heatmap-opacity"])})}};function my(o,{width:n,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*s*h}`)}else m=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=m,o}function Fx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const m=my({},{width:n,height:s},h);gy(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=m.data}function gy(o,n,s,h,m,_){if(m.width===0||m.height===0)return n;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const L=((s.y+P)*o.width+s.x)*_,Z=((h.y+P)*n.width+h.x)*_;for(let Y=0;Y<m.width*_;Y++)S[Z+Y]=x[L+Y]}return n}class dd{constructor(n,s){my(this,n,1,s)}resize(n){Fx(this,n,1)}clone(){return new dd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,_){gy(n,s,h,m,_,1)}}class Lo{constructor(n,s){my(this,n,4,s)}resize(n){Fx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,_){gy(n,s,h,m,_,4)}}function jx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new Lo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,S,P)=>{n[o.evaluationKey]=P;const L=o.expression.evaluate(n);m.data[x+S+0]=Math.floor(255*L.r/L.a),m.data[x+S+1]=Math.floor(255*L.g/L.a),m.data[x+S+2]=Math.floor(255*L.b/L.a),m.data[x+S+3]=Math.floor(255*L.a)};if(o.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let P=0,L=0;P<s;P++,L+=4){const Z=P/(s-1),{start:Y,end:se}=o.clips[x];_(S,L,Y*(1-Z)+se*Z)}else for(let x=0,S=0;x<s;x++,S+=4)_(0,S,x/(s-1));return m}Bt("AlphaImage",dd),Bt("RGBAImage",Lo);class PA extends Ro{createBucket(n){return new Lx(n)}constructor(n){super(n,AA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Dx;var kA={get paint(){return Dx=Dx||new Ei({"hillshade-illumination-direction":new Xt(et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(et.paint_hillshade["hillshade-accent-color"])})}};class MA extends Ro{constructor(n){super(n,kA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const zA=Er([{name:"a_pos",components:2,type:"Int16"}],4),{members:RA}=zA;var yy={exports:{}};function fp(o,n,s){s=s||2;var h,m,_,x,S,P,L,Z=n&&n.length,Y=Z?n[0]*s:o.length,se=Bx(o,0,Y,s,!0),fe=[];if(!se||se.next===se.prev)return fe;if(Z&&(se=function(Te,Re,Ue,Je){var Ge,qe,pt,vt=[];for(Ge=0,qe=Re.length;Ge<qe;Ge++)(pt=Bx(Te,Re[Ge]*Je,Ge<qe-1?Re[Ge+1]*Je:Te.length,Je,!1))===pt.next&&(pt.steiner=!0),vt.push(UA(pt));for(vt.sort(DA),Ge=0;Ge<vt.length;Ge++)Ue=BA(vt[Ge],Ue);return Ue}(o,n,se,s)),o.length>80*s){h=_=o[0],m=x=o[1];for(var ye=s;ye<Y;ye+=s)(S=o[ye])<h&&(h=S),(P=o[ye+1])<m&&(m=P),S>_&&(_=S),P>x&&(x=P);L=(L=Math.max(_-h,x-m))!==0?32767/L:0}return fd(se,fe,s,h,m,L,0),fe}function Bx(o,n,s,h,m){var _,x;if(m===xy(o,n,s,h)>0)for(_=n;_<s;_+=h)x=$x(_,o[_],o[_+1],x);else for(_=s-h;_>=n;_-=h)x=$x(_,o[_],o[_+1],x);return x&&pp(x,x.next)&&(md(x),x=x.next),x}function zu(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!pp(h,h.next)&&Ir(h.prev,h,h.next)!==0)h=h.next;else{if(md(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function fd(o,n,s,h,m,_,x){if(o){!x&&_&&function(Z,Y,se,fe){var ye=Z;do ye.z===0&&(ye.z=vy(ye.x,ye.y,Y,se,fe)),ye.prevZ=ye.prev,ye.nextZ=ye.next,ye=ye.next;while(ye!==Z);ye.prevZ.nextZ=null,ye.prevZ=null,function(Te){var Re,Ue,Je,Ge,qe,pt,vt,jt,Wt=1;do{for(Ue=Te,Te=null,qe=null,pt=0;Ue;){for(pt++,Je=Ue,vt=0,Re=0;Re<Wt&&(vt++,Je=Je.nextZ);Re++);for(jt=Wt;vt>0||jt>0&&Je;)vt!==0&&(jt===0||!Je||Ue.z<=Je.z)?(Ge=Ue,Ue=Ue.nextZ,vt--):(Ge=Je,Je=Je.nextZ,jt--),qe?qe.nextZ=Ge:Te=Ge,Ge.prevZ=qe,qe=Ge;Ue=Je}qe.nextZ=null,Wt*=2}while(pt>1)}(ye)}(o,h,m,_);for(var S,P,L=o;o.prev!==o.next;)if(S=o.prev,P=o.next,_?OA(o,h,m,_):LA(o))n.push(S.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),md(o),o=P.next,L=P.next;else if((o=P)===L){x?x===1?fd(o=FA(zu(o),n,s),n,s,h,m,_,2):x===2&&jA(o,n,s,h,m,_):fd(zu(o),n,s,h,m,_,1);break}}}function LA(o){var n=o.prev,s=o,h=o.next;if(Ir(n,s,h)>=0)return!1;for(var m=n.x,_=s.x,x=h.x,S=n.y,P=s.y,L=h.y,Z=m<_?m<x?m:x:_<x?_:x,Y=S<P?S<L?S:L:P<L?P:L,se=m>_?m>x?m:x:_>x?_:x,fe=S>P?S>L?S:L:P>L?P:L,ye=h.next;ye!==n;){if(ye.x>=Z&&ye.x<=se&&ye.y>=Y&&ye.y<=fe&&zc(m,S,_,P,x,L,ye.x,ye.y)&&Ir(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function OA(o,n,s,h){var m=o.prev,_=o,x=o.next;if(Ir(m,_,x)>=0)return!1;for(var S=m.x,P=_.x,L=x.x,Z=m.y,Y=_.y,se=x.y,fe=S<P?S<L?S:L:P<L?P:L,ye=Z<Y?Z<se?Z:se:Y<se?Y:se,Te=S>P?S>L?S:L:P>L?P:L,Re=Z>Y?Z>se?Z:se:Y>se?Y:se,Ue=vy(fe,ye,n,s,h),Je=vy(Te,Re,n,s,h),Ge=o.prevZ,qe=o.nextZ;Ge&&Ge.z>=Ue&&qe&&qe.z<=Je;){if(Ge.x>=fe&&Ge.x<=Te&&Ge.y>=ye&&Ge.y<=Re&&Ge!==m&&Ge!==x&&zc(S,Z,P,Y,L,se,Ge.x,Ge.y)&&Ir(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,qe.x>=fe&&qe.x<=Te&&qe.y>=ye&&qe.y<=Re&&qe!==m&&qe!==x&&zc(S,Z,P,Y,L,se,qe.x,qe.y)&&Ir(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Ge&&Ge.z>=Ue;){if(Ge.x>=fe&&Ge.x<=Te&&Ge.y>=ye&&Ge.y<=Re&&Ge!==m&&Ge!==x&&zc(S,Z,P,Y,L,se,Ge.x,Ge.y)&&Ir(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;qe&&qe.z<=Je;){if(qe.x>=fe&&qe.x<=Te&&qe.y>=ye&&qe.y<=Re&&qe!==m&&qe!==x&&zc(S,Z,P,Y,L,se,qe.x,qe.y)&&Ir(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function FA(o,n,s){var h=o;do{var m=h.prev,_=h.next.next;!pp(m,_)&&Nx(m,h,h.next,_)&&pd(m,_)&&pd(_,m)&&(n.push(m.i/s|0),n.push(h.i/s|0),n.push(_.i/s|0),md(h),md(h.next),h=o=_),h=h.next}while(h!==o);return zu(h)}function jA(o,n,s,h,m,_){var x=o;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&$A(x,S)){var P=Ux(x,S);return x=zu(x,x.next),P=zu(P,P.next),fd(x,n,s,h,m,_,0),void fd(P,n,s,h,m,_,0)}S=S.next}x=x.next}while(x!==o)}function DA(o,n){return o.x-n.x}function BA(o,n){var s=function(m,_){var x,S=_,P=m.x,L=m.y,Z=-1/0;do{if(L<=S.y&&L>=S.next.y&&S.next.y!==S.y){var Y=S.x+(L-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(Y<=P&&Y>Z&&(Z=Y,x=S.x<S.next.x?S:S.next,Y===P))return x}S=S.next}while(S!==_);if(!x)return null;var se,fe=x,ye=x.x,Te=x.y,Re=1/0;S=x;do P>=S.x&&S.x>=ye&&P!==S.x&&zc(L<Te?P:Z,L,ye,Te,L<Te?Z:P,L,S.x,S.y)&&(se=Math.abs(L-S.y)/(P-S.x),pd(S,m)&&(se<Re||se===Re&&(S.x>x.x||S.x===x.x&&NA(x,S)))&&(x=S,Re=se)),S=S.next;while(S!==fe);return x}(o,n);if(!s)return n;var h=Ux(s,o);return zu(h,h.next),zu(s,s.next)}function NA(o,n){return Ir(o.prev,o,n.prev)<0&&Ir(n.next,o,o.next)<0}function vy(o,n,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function UA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function zc(o,n,s,h,m,_,x,S){return(m-x)*(n-S)>=(o-x)*(_-S)&&(o-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(_-S)>=(m-x)*(h-S)}function $A(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&Nx(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,n)&&(pd(o,n)&&pd(n,o)&&function(s,h){var m=s,_=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(_=!_),m=m.next;while(m!==s);return _}(o,n)&&(Ir(o.prev,o,n.prev)||Ir(o,n.prev,n))||pp(o,n)&&Ir(o.prev,o,o.next)>0&&Ir(n.prev,n,n.next)>0)}function Ir(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function pp(o,n){return o.x===n.x&&o.y===n.y}function Nx(o,n,s,h){var m=gp(Ir(o,n,s)),_=gp(Ir(o,n,h)),x=gp(Ir(s,h,o)),S=gp(Ir(s,h,n));return m!==_&&x!==S||!(m!==0||!mp(o,s,n))||!(_!==0||!mp(o,h,n))||!(x!==0||!mp(s,o,h))||!(S!==0||!mp(s,n,h))}function mp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function gp(o){return o>0?1:o<0?-1:0}function pd(o,n){return Ir(o.prev,o,o.next)<0?Ir(o,n,o.next)>=0&&Ir(o,o.prev,n)>=0:Ir(o,n,o.prev)<0||Ir(o,o.next,n)<0}function Ux(o,n){var s=new _y(o.i,o.x,o.y),h=new _y(n.i,n.x,n.y),m=o.next,_=n.prev;return o.next=n,n.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function $x(o,n,s,h){var m=new _y(o,n,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function md(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function _y(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function xy(o,n,s,h){for(var m=0,_=n,x=s-h;_<s;_+=h)m+=(o[x]-o[_])*(o[_+1]+o[x+1]),x=_;return m}yy.exports=fp,yy.exports.default=fp,fp.deviation=function(o,n,s,h){var m=n&&n.length,_=Math.abs(xy(o,0,m?n[0]*s:o.length,s));if(m)for(var x=0,S=n.length;x<S;x++)_-=Math.abs(xy(o,n[x]*s,x<S-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var L=h[x]*s,Z=h[x+1]*s,Y=h[x+2]*s;P+=Math.abs((o[L]-o[Y])*(o[Z+1]-o[L+1])-(o[L]-o[Z])*(o[Y+1]-o[L+1]))}return _===0&&P===0?0:Math.abs((P-_)/_)},fp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,m=0;m<o.length;m++){for(var _=0;_<o[m].length;_++)for(var x=0;x<n;x++)s.vertices.push(o[m][_][x]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var Vx=b(yy.exports);function VA(o,n,s,h,m){Gx(o,n,s||0,h||o.length-1,m||GA)}function Gx(o,n,s,h,m){for(;h>s;){if(h-s>600){var _=h-s+1,x=n-s+1,S=Math.log(_),P=.5*Math.exp(2*S/3),L=.5*Math.sqrt(S*P*(_-P)/_)*(x-_/2<0?-1:1);Gx(o,n,Math.max(s,Math.floor(n-x*P/_+L)),Math.min(h,Math.floor(n+(_-x)*P/_+L)),m)}var Z=o[n],Y=s,se=h;for(gd(o,s,n),m(o[h],Z)>0&&gd(o,s,h);Y<se;){for(gd(o,Y,se),Y++,se--;m(o[Y],Z)<0;)Y++;for(;m(o[se],Z)>0;)se--}m(o[s],Z)===0?gd(o,s,se):gd(o,++se,h),se<=n&&(s=se+1),n<=se&&(h=se-1)}}function gd(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function GA(o,n){return o<n?-1:o>n?1:0}function wy(o,n){const s=o.length;if(s<=1)return[o];const h=[];let m,_;for(let x=0;x<s;x++){const S=oe(o[x]);S!==0&&(o[x].area=Math.abs(S),_===void 0&&(_=S<0),_===S<0?(m&&h.push(m),m=[o[x]]):m.push(o[x]))}if(m&&h.push(m),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(VA(h[x],n,1,h[x].length-1,HA),h[x]=h[x].slice(0,n));return h}function HA(o,n){return n.area-o.area}function by(o,n,s){const h=s.patternDependencies;let m=!1;for(const _ of n){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function Sy(o,n,s,h,m){const _=m.patternDependencies;for(const x of n){const S=x.paint.get(`${o}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:h-1},s,{},m.availableImages),L=S.evaluate({zoom:h},s,{},m.availableImages),Z=S.evaluate({zoom:h+1},s,{},m.availableImages);P=P&&P.name?P.name:P,L=L&&L.name?L.name:L,Z=Z&&Z.name?Z.name:Z,_[P]=!0,_[L]=!0,_[Z]=!0,s.patterns[x.id]={min:P,mid:L,max:Z}}}return s}class Ey{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pe,this.indexArray=new bt,this.indexArray2=new xt,this.programConfigurations=new ei(n.layers,n.zoom),this.segments=new sn,this.segments2=new sn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=by("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),_=!m.isConstant(),x=[];for(const{feature:S,id:P,index:L,sourceLayerIndex:Z}of n){const Y=this.layers[0]._featureFilter.needGeometry,se=Ra(S,Y);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),se,h))continue;const fe=_?m.evaluate(se,{},h,s.availableImages):void 0,ye={id:P,properties:S.properties,type:S.type,sourceLayerIndex:Z,index:L,geometry:Y?se.geometry:za(S),patterns:{},sortKey:fe};x.push(ye)}_&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:L,sourceLayerIndex:Z}=S;if(this.hasPattern){const Y=Sy("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,P,L,h,{});s.featureIndex.insert(n[L].feature,P,L,Z,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,RA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,m,_){for(const x of wy(s,500)){let S=0;for(const fe of x)S+=fe.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),L=P.vertexLength,Z=[],Y=[];for(const fe of x){if(fe.length===0)continue;fe!==x[0]&&Y.push(Z.length/2);const ye=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Te=ye.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Te+fe.length-1,Te),Z.push(fe[0].x),Z.push(fe[0].y);for(let Re=1;Re<fe.length;Re++)this.layoutVertexArray.emplaceBack(fe[Re].x,fe[Re].y),this.indexArray2.emplaceBack(Te+Re-1,Te+Re),Z.push(fe[Re].x),Z.push(fe[Re].y);ye.vertexLength+=fe.length,ye.primitiveLength+=fe.length}const se=Vx(Z,Y);for(let fe=0;fe<se.length;fe+=3)this.indexArray.emplaceBack(L+se[fe],L+se[fe+1],L+se[fe+2]);P.vertexLength+=S,P.primitiveLength+=se.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,m)}}let Hx,Wx;Bt("FillBucket",Ey,{omit:["layers","patternFeatures"]});var WA={get paint(){return Wx=Wx||new Ei({"fill-antialias":new Xt(et.paint_fill["fill-antialias"]),"fill-opacity":new cn(et.paint_fill["fill-opacity"]),"fill-color":new cn(et.paint_fill["fill-color"]),"fill-outline-color":new cn(et.paint_fill["fill-outline-color"]),"fill-translate":new Xt(et.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(et.paint_fill["fill-translate-anchor"]),"fill-pattern":new Il(et.paint_fill["fill-pattern"])})},get layout(){return Hx=Hx||new Ei({"fill-sort-key":new cn(et.layout_fill["fill-sort-key"])})}};class ZA extends Ro{constructor(n){super(n,WA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Ey(n)}queryRadius(){return cp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,m,_,x,S){return Pc(hp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const XA=Er([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qA=Er([{name:"a_centroid",components:2,type:"Int16"}],4),{members:KA}=XA;var Ml={},YA=C,Zx=Rc;function Rc(o,n,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(JA,this,n)}function JA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,m){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function QA(o){for(var n,s,h=0,m=0,_=o.length,x=_-1;m<_;x=m++)h+=((s=o[x]).x-(n=o[m]).x)*(n.y+s.y);return h}Rc.types=["Unknown","Point","LineString","Polygon"],Rc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,m=0,_=0,x=0,S=[];o.pos<s;){if(m<=0){var P=o.readVarint();h=7&P,m=P>>3}if(m--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new YA(_,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},Rc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,m=0,_=0,x=1/0,S=-1/0,P=1/0,L=-1/0;o.pos<n;){if(h<=0){var Z=o.readVarint();s=7&Z,h=Z>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<x&&(x=m),m>S&&(S=m),(_+=o.readSVarint())<P&&(P=_),_>L&&(L=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,S,L]},Rc.prototype.toGeoJSON=function(o,n,s){var h,m,_=this.extent*Math.pow(2,s),x=this.extent*o,S=this.extent*n,P=this.loadGeometry(),L=Rc.types[this.type];function Z(fe){for(var ye=0;ye<fe.length;ye++){var Te=fe[ye];fe[ye]=[360*(Te.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(h=0;h<P.length;h++)Y[h]=P[h][0];Z(P=Y);break;case 2:for(h=0;h<P.length;h++)Z(P[h]);break;case 3:for(P=function(fe){var ye=fe.length;if(ye<=1)return[fe];for(var Te,Re,Ue=[],Je=0;Je<ye;Je++){var Ge=QA(fe[Je]);Ge!==0&&(Re===void 0&&(Re=Ge<0),Re===Ge<0?(Te&&Ue.push(Te),Te=[fe[Je]]):Te.push(fe[Je]))}return Te&&Ue.push(Te),Ue}(P),h=0;h<P.length;h++)for(m=0;m<P[h].length;m++)Z(P[h][m])}P.length===1?P=P[0]:L="Multi"+L;var se={type:"Feature",geometry:{type:L,coordinates:P},properties:this.properties};return"id"in this&&(se.id=this.id),se};var eP=Zx,Xx=qx;function qx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(tP,this,n),this.length=this._features.length}function tP(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var m=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}qx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new eP(this._pbf,n,this.extent,this._keys,this._values)};var nP=Xx;function rP(o,n,s){if(o===3){var h=new nP(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Ml.VectorTile=function(o,n){this.layers=o.readFields(rP,{},n)},Ml.VectorTileFeature=Zx,Ml.VectorTileLayer=Xx;const iP=Ml.VectorTileFeature.types,Ty=Math.pow(2,13);function yd(o,n,s,h,m,_,x,S){o.emplaceBack(n,s,2*Math.floor(h*Ty)+x,m*Ty*2,_*Ty*2,Math.round(S))}class Cy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Oe,this.centroidVertexArray=new pe,this.indexArray=new bt,this.programConfigurations=new ei(n.layers,n.zoom),this.segments=new sn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=by("fill-extrusion",this.layers,s);for(const{feature:m,id:_,index:x,sourceLayerIndex:S}of n){const P=this.layers[0]._featureFilter.needGeometry,L=Ra(m,P);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),L,h))continue;const Z={id:_,sourceLayerIndex:S,index:x,geometry:P?L.geometry:za(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Sy("fill-extrusion",this.layers,Z,this.zoom,s)):this.addFeature(Z,Z.geometry,x,h,{}),s.featureIndex.insert(m,Z.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,KA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,qA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,m,_){const x={x:0,y:0,vertexCount:0};for(const S of wy(s,500)){let P=0;for(const ye of S)P+=ye.length;let L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ye of S){if(ye.length===0||sP(ye))continue;let Te=0;for(let Re=0;Re<ye.length;Re++){const Ue=ye[Re];if(Re>=1){const Je=ye[Re-1];if(!oP(Ue,Je)){L.vertexLength+4>sn.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ge=Ue.sub(Je)._perp()._unit(),qe=Je.dist(Ue);Te+qe>32768&&(Te=0),yd(this.layoutVertexArray,Ue.x,Ue.y,Ge.x,Ge.y,0,0,Te),yd(this.layoutVertexArray,Ue.x,Ue.y,Ge.x,Ge.y,0,1,Te),x.x+=2*Ue.x,x.y+=2*Ue.y,x.vertexCount+=2,Te+=qe,yd(this.layoutVertexArray,Je.x,Je.y,Ge.x,Ge.y,0,0,Te),yd(this.layoutVertexArray,Je.x,Je.y,Ge.x,Ge.y,0,1,Te),x.x+=2*Je.x,x.y+=2*Je.y,x.vertexCount+=2;const pt=L.vertexLength;this.indexArray.emplaceBack(pt,pt+2,pt+1),this.indexArray.emplaceBack(pt+1,pt+2,pt+3),L.vertexLength+=4,L.primitiveLength+=2}}}}if(L.vertexLength+P>sn.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),iP[n.type]!=="Polygon")continue;const Z=[],Y=[],se=L.vertexLength;for(const ye of S)if(ye.length!==0){ye!==S[0]&&Y.push(Z.length/2);for(let Te=0;Te<ye.length;Te++){const Re=ye[Te];yd(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),x.x+=Re.x,x.y+=Re.y,x.vertexCount+=1,Z.push(Re.x),Z.push(Re.y)}}const fe=Vx(Z,Y);for(let ye=0;ye<fe.length;ye+=3)this.indexArray.emplaceBack(se+fe[ye],se+fe[ye+2],se+fe[ye+1]);L.primitiveLength+=fe.length/3,L.vertexLength+=P}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,m)}}function oP(o,n){return o.x===n.x&&(o.x<0||o.x>_r)||o.y===n.y&&(o.y<0||o.y>_r)}function sP(o){return o.every(n=>n.x<0)||o.every(n=>n.x>_r)||o.every(n=>n.y<0)||o.every(n=>n.y>_r)}let Kx;Bt("FillExtrusionBucket",Cy,{omit:["layers","features"]});var aP={get paint(){return Kx=Kx||new Ei({"fill-extrusion-opacity":new Xt(et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new cn(et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Il(et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new cn(et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new cn(et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xt(et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class lP extends Ro{constructor(n){super(n,aP)}createBucket(n){return new Cy(n)}queryRadius(){return cp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,m,_,x,S,P){const L=hp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),Z=this.paint.get("fill-extrusion-height").evaluate(s,h),Y=this.paint.get("fill-extrusion-base").evaluate(s,h),se=function(ye,Te,Re,Ue){const Je=[];for(const Ge of ye){const qe=[Ge.x,Ge.y,0,1];dp(qe,qe,Te),Je.push(new w(qe[0]/qe[3],qe[1]/qe[3]))}return Je}(L,P),fe=function(ye,Te,Re,Ue){const Je=[],Ge=[],qe=Ue[8]*Te,pt=Ue[9]*Te,vt=Ue[10]*Te,jt=Ue[11]*Te,Wt=Ue[8]*Re,Ot=Ue[9]*Re,zt=Ue[10]*Re,It=Ue[11]*Re;for(const Ut of ye){const Pt=[],St=[];for(const nn of Ut){const Kt=nn.x,Sn=nn.y,ir=Ue[0]*Kt+Ue[4]*Sn+Ue[12],ar=Ue[1]*Kt+Ue[5]*Sn+Ue[13],Vr=Ue[2]*Kt+Ue[6]*Sn+Ue[14],vo=Ue[3]*Kt+Ue[7]*Sn+Ue[15],Ui=Vr+vt,Lr=vo+jt,ri=ir+Wt,pi=ar+Ot,$i=Vr+zt,Vi=vo+It,Gr=new w((ir+qe)/Lr,(ar+pt)/Lr);Gr.z=Ui/Lr,Pt.push(Gr);const Hr=new w(ri/Vi,pi/Vi);Hr.z=$i/Vi,St.push(Hr)}Je.push(Pt),Ge.push(St)}return[Je,Ge]}(m,Y,Z,P);return function(ye,Te,Re){let Ue=1/0;Pc(Re,Te)&&(Ue=Yx(Re,Te[0]));for(let Je=0;Je<Te.length;Je++){const Ge=Te[Je],qe=ye[Je];for(let pt=0;pt<Ge.length-1;pt++){const vt=Ge[pt],jt=[vt,Ge[pt+1],qe[pt+1],qe[pt],vt];ud(Re,jt)&&(Ue=Math.min(Ue,Yx(Re,jt)))}}return Ue!==1/0&&Ue}(fe[0],fe[1],se)}}function vd(o,n){return o.x*n.x+o.y*n.y}function Yx(o,n){if(o.length===1){let s=0;const h=n[s++];let m;for(;!m||h.equals(m);)if(m=n[s++],!m)return 1/0;for(;s<n.length;s++){const _=n[s],x=o[0],S=m.sub(h),P=_.sub(h),L=x.sub(h),Z=vd(S,S),Y=vd(S,P),se=vd(P,P),fe=vd(L,S),ye=vd(L,P),Te=Z*se-Y*Y,Re=(se*fe-Y*ye)/Te,Ue=(Z*ye-Y*fe)/Te,Je=h.z*(1-Re-Ue)+m.z*Re+_.z*Ue;if(isFinite(Je))return Je}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const uP=Er([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:cP}=uP,hP=Er([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:dP}=hP,fP=Ml.VectorTileFeature.types,pP=Math.cos(Math.PI/180*37.5),Jx=Math.pow(2,14)/.5;class Iy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ce,this.layoutVertexArray2=new Xe,this.indexArray=new bt,this.programConfigurations=new ei(n.layers,n.zoom),this.segments=new sn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=by("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),_=!m.isConstant(),x=[];for(const{feature:S,id:P,index:L,sourceLayerIndex:Z}of n){const Y=this.layers[0]._featureFilter.needGeometry,se=Ra(S,Y);if(!this.layers[0]._featureFilter.filter(new tr(this.zoom),se,h))continue;const fe=_?m.evaluate(se,{},h):void 0,ye={id:P,properties:S.properties,type:S.type,sourceLayerIndex:Z,index:L,geometry:Y?se.geometry:za(S),patterns:{},sortKey:fe};x.push(ye)}_&&x.sort((S,P)=>S.sortKey-P.sortKey);for(const S of x){const{geometry:P,index:L,sourceLayerIndex:Z}=S;if(this.hasPattern){const Y=Sy("line",this.layers,S,this.zoom,s);this.patternFeatures.push(Y)}else this.addFeature(S,P,L,h,{});s.featureIndex.insert(n[L].feature,P,L,Z,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,dP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,cP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,m,_){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),L=x.get("line-miter-limit"),Z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const Y of s)this.addLine(Y,n,S,P,L,Z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,m)}addLine(n,s,h,m,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ue=0;Ue<n.length-1;Ue++)this.totalDistance+=n[Ue].dist(n[Ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=fP[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let L=0;for(;L<P-1&&n[L].equals(n[L+1]);)L++;if(P<(S?3:2))return;h==="bevel"&&(_=1.05);const Z=this.overscaling<=16?15*_r/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let se,fe,ye,Te,Re;this.e1=this.e2=-1,S&&(se=n[P-2],Re=n[L].sub(se)._unit()._perp());for(let Ue=L;Ue<P;Ue++){if(ye=Ue===P-1?S?n[L+1]:void 0:n[Ue+1],ye&&n[Ue].equals(ye))continue;Re&&(Te=Re),se&&(fe=se),se=n[Ue],Re=ye?ye.sub(se)._unit()._perp():Te,Te=Te||Re;let Je=Te.add(Re);Je.x===0&&Je.y===0||Je._unit();const Ge=Te.x*Re.x+Te.y*Re.y,qe=Je.x*Re.x+Je.y*Re.y,pt=qe!==0?1/qe:1/0,vt=2*Math.sqrt(2-2*qe),jt=qe<pP&&fe&&ye,Wt=Te.x*Re.y-Te.y*Re.x>0;if(jt&&Ue>L){const It=se.dist(fe);if(It>2*Z){const Ut=se.sub(se.sub(fe)._mult(Z/It)._round());this.updateDistance(fe,Ut),this.addCurrentVertex(Ut,Te,0,0,Y),fe=Ut}}const Ot=fe&&ye;let zt=Ot?h:S?"butt":m;if(Ot&&zt==="round"&&(pt<x?zt="miter":pt<=2&&(zt="fakeround")),zt==="miter"&&pt>_&&(zt="bevel"),zt==="bevel"&&(pt>2&&(zt="flipbevel"),pt<_&&(zt="miter")),fe&&this.updateDistance(fe,se),zt==="miter")Je._mult(pt),this.addCurrentVertex(se,Je,0,0,Y);else if(zt==="flipbevel"){if(pt>100)Je=Re.mult(-1);else{const It=pt*Te.add(Re).mag()/Te.sub(Re).mag();Je._perp()._mult(It*(Wt?-1:1))}this.addCurrentVertex(se,Je,0,0,Y),this.addCurrentVertex(se,Je.mult(-1),0,0,Y)}else if(zt==="bevel"||zt==="fakeround"){const It=-Math.sqrt(pt*pt-1),Ut=Wt?It:0,Pt=Wt?0:It;if(fe&&this.addCurrentVertex(se,Te,Ut,Pt,Y),zt==="fakeround"){const St=Math.round(180*vt/Math.PI/20);for(let nn=1;nn<St;nn++){let Kt=nn/St;if(Kt!==.5){const ir=Kt-.5;Kt+=Kt*ir*(Kt-1)*((1.0904+Ge*(Ge*(3.55645-1.43519*Ge)-3.2452))*ir*ir+(.848013+Ge*(.215638*Ge-1.06021)))}const Sn=Re.sub(Te)._mult(Kt)._add(Te)._unit()._mult(Wt?-1:1);this.addHalfVertex(se,Sn.x,Sn.y,!1,Wt,0,Y)}}ye&&this.addCurrentVertex(se,Re,-Ut,-Pt,Y)}else if(zt==="butt")this.addCurrentVertex(se,Je,0,0,Y);else if(zt==="square"){const It=fe?1:-1;this.addCurrentVertex(se,Je,It,It,Y)}else zt==="round"&&(fe&&(this.addCurrentVertex(se,Te,0,0,Y),this.addCurrentVertex(se,Te,1,1,Y,!0)),ye&&(this.addCurrentVertex(se,Re,-1,-1,Y,!0),this.addCurrentVertex(se,Re,0,0,Y)));if(jt&&Ue<P-1){const It=se.dist(ye);if(It>2*Z){const Ut=se.add(ye.sub(se)._mult(Z/It)._round());this.updateDistance(se,Ut),this.addCurrentVertex(Ut,Re,0,0,Y),se=Ut}}}}addCurrentVertex(n,s,h,m,_,x=!1){const S=s.y*m-s.x,P=-s.y-s.x*m;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,S,P,x,!0,-m,_),this.distance>Jx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,m,_,x))}addHalfVertex({x:n,y:s},h,m,_,x,S,P){const L=.5*(this.lineClips?this.scaledDistance*(Jx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&L)<<2,L>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Z=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Z),P.primitiveLength++),x?this.e2=Z:this.e1=Z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Qx,ew;Bt("LineBucket",Iy,{omit:["layers","patternFeatures"]});var tw={get paint(){return ew=ew||new Ei({"line-opacity":new cn(et.paint_line["line-opacity"]),"line-color":new cn(et.paint_line["line-color"]),"line-translate":new Xt(et.paint_line["line-translate"]),"line-translate-anchor":new Xt(et.paint_line["line-translate-anchor"]),"line-width":new cn(et.paint_line["line-width"]),"line-gap-width":new cn(et.paint_line["line-gap-width"]),"line-offset":new cn(et.paint_line["line-offset"]),"line-blur":new cn(et.paint_line["line-blur"]),"line-dasharray":new qh(et.paint_line["line-dasharray"]),"line-pattern":new Il(et.paint_line["line-pattern"]),"line-gradient":new Kh(et.paint_line["line-gradient"])})},get layout(){return Qx=Qx||new Ei({"line-cap":new Xt(et.layout_line["line-cap"]),"line-join":new cn(et.layout_line["line-join"]),"line-miter-limit":new Xt(et.layout_line["line-miter-limit"]),"line-round-limit":new Xt(et.layout_line["line-round-limit"]),"line-sort-key":new cn(et.layout_line["line-sort-key"])})}};class mP extends cn{possiblyEvaluate(n,s){return s=new tr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,m){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,m)}}let yp;class gP extends Ro{constructor(n){super(n,tw),this.gradientVersion=0,yp||(yp=new mP(tw.paint.properties["line-width"].specification),yp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof _a,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=yp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Iy(n)}queryRadius(n){const s=n,h=nw(cd("line-width",this,s),cd("line-gap-width",this,s)),m=cd("line-offset",this,s);return h/2+Math.abs(m)+cp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,m,_,x,S){const P=hp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),L=S/2*nw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),Z=this.paint.get("line-offset").evaluate(s,h);return Z&&(m=function(Y,se){const fe=[];for(let ye=0;ye<Y.length;ye++){const Te=Y[ye],Re=[];for(let Ue=0;Ue<Te.length;Ue++){const Je=Te[Ue-1],Ge=Te[Ue],qe=Te[Ue+1],pt=Ue===0?new w(0,0):Ge.sub(Je)._unit()._perp(),vt=Ue===Te.length-1?new w(0,0):qe.sub(Ge)._unit()._perp(),jt=pt._add(vt)._unit(),Wt=jt.x*vt.x+jt.y*vt.y;Wt!==0&&jt._mult(1/Wt),Re.push(jt._mult(se)._add(Ge))}fe.push(Re)}return fe}(m,Z*S)),function(Y,se,fe){for(let ye=0;ye<se.length;ye++){const Te=se[ye];if(Y.length>=3){for(let Re=0;Re<Te.length;Re++)if(kc(Y,Te[Re]))return!0}if(up(Y,Te,fe))return!0}return!1}(P,m,L)}isTileClipped(){return!0}}function nw(o,n){return n>0?n+2*o:o}const yP=Er([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vP=Er([{name:"a_projected_pos",components:3,type:"Float32"}],4);Er([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const _P=Er([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Er([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const rw=Er([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xP=Er([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function wP(o,n,s){return o.sections.forEach(h=>{h.text=function(m,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Aa.applyArabicShaping&&(m=Aa.applyArabicShaping(m)),m}(h.text,n,s)}),o}Er([{name:"triangle",components:3,type:"Uint16"}]),Er([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Er([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Er([{type:"Float32",name:"offsetX"}]),Er([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Er([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const _d={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var $r=24,iw=Zn,ow=function(o,n,s,h,m){var _,x,S=8*m-h-1,P=(1<<S)-1,L=P>>1,Z=-7,Y=s?m-1:0,se=s?-1:1,fe=o[n+Y];for(Y+=se,_=fe&(1<<-Z)-1,fe>>=-Z,Z+=S;Z>0;_=256*_+o[n+Y],Y+=se,Z-=8);for(x=_&(1<<-Z)-1,_>>=-Z,Z+=h;Z>0;x=256*x+o[n+Y],Y+=se,Z-=8);if(_===0)_=1-L;else{if(_===P)return x?NaN:1/0*(fe?-1:1);x+=Math.pow(2,h),_-=L}return(fe?-1:1)*x*Math.pow(2,_-h)},sw=function(o,n,s,h,m,_){var x,S,P,L=8*_-m-1,Z=(1<<L)-1,Y=Z>>1,se=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,fe=h?0:_-1,ye=h?1:-1,Te=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=Z):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+Y>=1?se/P:se*Math.pow(2,1-Y))*P>=2&&(x++,P/=2),x+Y>=Z?(S=0,x=Z):x+Y>=1?(S=(n*P-1)*Math.pow(2,m),x+=Y):(S=n*Math.pow(2,Y-1)*Math.pow(2,m),x=0));m>=8;o[s+fe]=255&S,fe+=ye,S/=256,m-=8);for(x=x<<m|S,L+=m;L>0;o[s+fe]=255&x,fe+=ye,x/=256,L-=8);o[s+fe-ye]|=128*Te};function Zn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Zn.Varint=0,Zn.Fixed64=1,Zn.Bytes=2,Zn.Fixed32=5;var Ay=4294967296,aw=1/Ay,lw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function La(o){return o.type===Zn.Bytes?o.readVarint()+o.pos:o.pos+1}function Lc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function uw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function bP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function SP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function EP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function TP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function CP(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function IP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function AP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function PP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function kP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function vp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Oc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function cw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Zn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,_=this.pos;this.type=7&h,o(m,n,this),this.pos===_&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=vp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=cw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=vp(this.buf,this.pos)+vp(this.buf,this.pos+4)*Ay;return this.pos+=8,o},readSFixed64:function(){var o=vp(this.buf,this.pos)+cw(this.buf,this.pos+4)*Ay;return this.pos+=8,o},readFloat:function(){var o=ow(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=ow(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(m,_,x){var S,P,L=x.buf;if(S=(112&(P=L[x.pos++]))>>4,P<128||(S|=(127&(P=L[x.pos++]))<<3,P<128)||(S|=(127&(P=L[x.pos++]))<<10,P<128)||(S|=(127&(P=L[x.pos++]))<<17,P<128)||(S|=(127&(P=L[x.pos++]))<<24,P<128)||(S|=(1&(P=L[x.pos++]))<<31,P<128))return Lc(m,S,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&lw?function(s,h,m){return lw.decode(s.subarray(h,m))}(this.buf,n,o):function(s,h,m){for(var _="",x=h;x<m;){var S,P,L,Z=s[x],Y=null,se=Z>239?4:Z>223?3:Z>191?2:1;if(x+se>m)break;se===1?Z<128&&(Y=Z):se===2?(192&(S=s[x+1]))==128&&(Y=(31&Z)<<6|63&S)<=127&&(Y=null):se===3?(P=s[x+2],(192&(S=s[x+1]))==128&&(192&P)==128&&((Y=(15&Z)<<12|(63&S)<<6|63&P)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):se===4&&(P=s[x+2],L=s[x+3],(192&(S=s[x+1]))==128&&(192&P)==128&&(192&L)==128&&((Y=(15&Z)<<18|(63&S)<<12|(63&P)<<6|63&L)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,se=1):Y>65535&&(Y-=65536,_+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),_+=String.fromCharCode(Y),x+=se}return _}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Zn.Bytes)return o.push(this.readVarint(n));var s=La(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSVarint());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Zn.Bytes)return o.push(this.readBoolean());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFloat());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Zn.Bytes)return o.push(this.readDouble());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Zn.Bytes)return o.push(this.readFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Zn.Bytes)return o.push(this.readSFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Zn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Zn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Zn.Fixed32)this.pos+=4;else{if(n!==Zn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Oc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Oc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Oc(this.buf,-1&o,this.pos),Oc(this.buf,Math.floor(o*aw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Oc(this.buf,-1&o,this.pos),Oc(this.buf,Math.floor(o*aw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var S=(7&_)<<4;x.buf[x.pos++]|=S|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,m,_){for(var x,S,P=0;P<m.length;P++){if((x=m.charCodeAt(P))>55295&&x<57344){if(!S){x>56319||P+1===m.length?(h[_++]=239,h[_++]=191,h[_++]=189):S=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[_++]=239,h[_++]=191,h[_++]=189,S=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&uw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),sw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),sw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&uw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Zn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,bP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,SP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,CP,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,EP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,TP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,IP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,AP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,PP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,kP,n)},writeBytesField:function(o,n){this.writeTag(o,Zn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Zn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Zn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Zn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Zn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Zn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Zn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Zn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Zn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Zn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var Py=b(iw);const ky=3;function MP(o,n,s){o===1&&s.readMessage(zP,n)}function zP(o,n,s){if(o===3){const{id:h,bitmap:m,width:_,height:x,left:S,top:P,advance:L}=s.readMessage(RP,{});n.push({id:h,bitmap:new dd({width:_+2*ky,height:x+2*ky},m),metrics:{width:_,height:x,left:S,top:P,advance:L}})}}function RP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const hw=ky;function dw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let m=0,_=0;for(const x of o)for(let S=h.length-1;S>=0;S--){const P=h[S];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,_=Math.max(_,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===P.w&&x.h===P.h){const L=h.pop();S<h.length&&(h[S]=L)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:m,h:_,fill:n/(m*_)||0}}const Qi=1;class My{constructor(n,{pixelRatio:s,version:h,stretchX:m,stretchY:_,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=m,this.stretchY=_,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Qi,this.paddedRect.y+Qi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Qi,this.paddedRect.y+this.paddedRect.h-Qi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Qi)/this.pixelRatio,(this.paddedRect.h-2*Qi)/this.pixelRatio]}}class fw{constructor(n,s){const h={},m={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,h,_),this.addImages(s,m,_);const{w:x,h:S}=dw(_),P=new Lo({width:x||1,height:S||1});for(const L in n){const Z=n[L],Y=h[L].paddedRect;Lo.copy(Z.data,P,{x:0,y:0},{x:Y.x+Qi,y:Y.y+Qi},Z.data)}for(const L in s){const Z=s[L],Y=m[L].paddedRect,se=Y.x+Qi,fe=Y.y+Qi,ye=Z.data.width,Te=Z.data.height;Lo.copy(Z.data,P,{x:0,y:0},{x:se,y:fe},Z.data),Lo.copy(Z.data,P,{x:0,y:Te-1},{x:se,y:fe-1},{width:ye,height:1}),Lo.copy(Z.data,P,{x:0,y:0},{x:se,y:fe+Te},{width:ye,height:1}),Lo.copy(Z.data,P,{x:ye-1,y:0},{x:se-1,y:fe},{width:1,height:Te}),Lo.copy(Z.data,P,{x:0,y:0},{x:se+ye,y:fe},{width:1,height:Te})}this.image=P,this.iconPositions=h,this.patternPositions=m}addImages(n,s,h){for(const m in n){const _=n[m],x={x:0,y:0,w:_.data.width+2*Qi,h:_.data.height+2*Qi};h.push(x),s[m]=new My(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[m,_]=n.tl;h.update(s.data,void 0,{x:m,y:_})}}var zl;Bt("ImagePosition",My),Bt("ImageAtlas",fw),f.ah=void 0,(zl=f.ah||(f.ah={}))[zl.none=0]="none",zl[zl.horizontal=1]="horizontal",zl[zl.vertical=2]="vertical",zl[zl.horizontalOnly=3]="horizontalOnly";const xd=-17;class wd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new wd;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new wd;return s.imageName=n,s}}class Fc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Fc;for(let m=0;m<n.sections.length;m++){const _=n.sections[m];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=m&&bc(m)&&!_d[n[h+1]]||_&&bc(_)&&!_d[n[h-1]]||!_d[n[h]]?n[h]:_d[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&xp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&xp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Fc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(wd.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(wd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _p(o,n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te){const Re=Fc.fromFeature(o,m);let Ue;Y===f.ah.vertical&&Re.verticalizePunctuation();const{processBidirectionalText:Je,processStyledBidirectionalText:Ge}=Aa;if(Je&&Re.sections.length===1){Ue=[];const vt=Je(Re.toString(),zy(Re,L,_,n,h,fe,ye));for(const jt of vt){const Wt=new Fc;Wt.text=jt,Wt.sections=Re.sections;for(let Ot=0;Ot<jt.length;Ot++)Wt.sectionIndex.push(0);Ue.push(Wt)}}else if(Ge){Ue=[];const vt=Ge(Re.text,Re.sectionIndex,zy(Re,L,_,n,h,fe,ye));for(const jt of vt){const Wt=new Fc;Wt.text=jt[0],Wt.sectionIndex=jt[1],Wt.sections=Re.sections,Ue.push(Wt)}}else Ue=function(vt,jt){const Wt=[],Ot=vt.text;let zt=0;for(const It of jt)Wt.push(vt.substring(zt,It)),zt=It;return zt<Ot.length&&Wt.push(vt.substring(zt,Ot.length)),Wt}(Re,zy(Re,L,_,n,h,fe,ye));const qe=[],pt={positionedLines:qe,text:Re.toString(),top:Z[1],bottom:Z[1],left:Z[0],right:Z[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return function(vt,jt,Wt,Ot,zt,It,Ut,Pt,St,nn,Kt,Sn){let ir=0,ar=xd,Vr=0,vo=0;const Ui=Pt==="right"?1:Pt==="left"?0:.5;let Lr=0;for(const Gr of zt){Gr.trim();const Hr=Gr.getMaxScale(),Ii=(Hr-1)*$r,Gi={positionedGlyphs:[],lineOffset:0};vt.positionedLines[Lr]=Gi;const Ai=Gi.positionedGlyphs;let eo=0;if(!Gr.length()){ar+=It,++Lr;continue}for(let Wr=0;Wr<Gr.length();Wr++){const Pn=Gr.getSection(Wr),Pi=Gr.getSectionIndex(Wr),mi=Gr.getCharCode(Wr);let Zr=0,rs=null,ws=null,bs=null,Oa=$r;const is=!(St===f.ah.horizontal||!Kt&&!wc(mi)||Kt&&(xp[mi]||(ri=mi,Rt.Arabic(ri)||Rt["Arabic Supplement"](ri)||Rt["Arabic Extended-A"](ri)||Rt["Arabic Presentation Forms-A"](ri)||Rt["Arabic Presentation Forms-B"](ri))));if(Pn.imageName){const Fo=Ot[Pn.imageName];if(!Fo)continue;bs=Pn.imageName,vt.iconsInText=vt.iconsInText||!0,ws=Fo.paddedRect;const no=Fo.displaySize;Pn.scale=Pn.scale*$r/Sn,rs={width:no[0],height:no[1],left:Qi,top:-hw,advance:is?no[1]:no[0]},Zr=Ii+($r-no[1]*Pn.scale),Oa=rs.advance;const Fa=is?no[0]*Pn.scale-$r*Hr:no[1]*Pn.scale-$r*Hr;Fa>0&&Fa>eo&&(eo=Fa)}else{const Fo=Wt[Pn.fontStack],no=Fo&&Fo[mi];if(no&&no.rect)ws=no.rect,rs=no.metrics;else{const Fa=jt[Pn.fontStack],Cd=Fa&&Fa[mi];if(!Cd)continue;rs=Cd.metrics}Zr=(Hr-Pn.scale)*$r}is?(vt.verticalizable=!0,Ai.push({glyph:mi,imageName:bs,x:ir,y:ar+Zr,vertical:is,scale:Pn.scale,fontStack:Pn.fontStack,sectionIndex:Pi,metrics:rs,rect:ws}),ir+=Oa*Pn.scale+nn):(Ai.push({glyph:mi,imageName:bs,x:ir,y:ar+Zr,vertical:is,scale:Pn.scale,fontStack:Pn.fontStack,sectionIndex:Pi,metrics:rs,rect:ws}),ir+=rs.advance*Pn.scale+nn)}Ai.length!==0&&(Vr=Math.max(ir-nn,Vr),FP(Ai,0,Ai.length-1,Ui,eo)),ir=0;const to=It*Hr+eo;Gi.lineOffset=Math.max(eo,Ii),ar+=to,vo=Math.max(to,vo),++Lr}var ri;const pi=ar-xd,{horizontalAlign:$i,verticalAlign:Vi}=Ry(Ut);(function(Gr,Hr,Ii,Gi,Ai,eo,to,Wr,Pn){const Pi=(Hr-Ii)*Ai;let mi=0;mi=eo!==to?-Wr*Gi-xd:(-Gi*Pn+.5)*to;for(const Zr of Gr)for(const rs of Zr.positionedGlyphs)rs.x+=Pi,rs.y+=mi})(vt.positionedLines,Ui,$i,Vi,Vr,vo,It,pi,zt.length),vt.top+=-Vi*pi,vt.bottom=vt.top+pi,vt.left+=-$i*Vr,vt.right=vt.left+Vr}(pt,n,s,h,Ue,x,S,P,Y,L,se,Te),!function(vt){for(const jt of vt)if(jt.positionedGlyphs.length!==0)return!1;return!0}(qe)&&pt}const xp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},LP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function pw(o,n,s,h,m,_){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*$r/_+m:0}{const x=s[n.fontStack],S=x&&x[o];return S?S.metrics.advance*n.scale+m:0}}function mw(o,n,s,h){const m=Math.pow(o-n,2);return h?o<n?m/2:2*m:m+Math.abs(s)*s}function OP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function gw(o,n,s,h,m,_){let x=null,S=mw(n,s,m,_);for(const P of h){const L=mw(n-P.x,s,m,_)+P.badness;L<=S&&(x=P,S=L)}return{index:o,x:n,priorBreak:x,badness:S}}function yw(o){return o?yw(o.priorBreak).concat(o.index):[]}function zy(o,n,s,h,m,_,x){if(_!=="point")return[];if(!o)return[];const S=[],P=function(se,fe,ye,Te,Re,Ue){let Je=0;for(let Ge=0;Ge<se.length();Ge++){const qe=se.getSection(Ge);Je+=pw(se.getCharCode(Ge),qe,Te,Re,fe,Ue)}return Je/Math.max(1,Math.ceil(Je/ye))}(o,n,s,h,m,x),L=o.text.indexOf("")>=0;let Z=0;for(let se=0;se<o.length();se++){const fe=o.getSection(se),ye=o.getCharCode(se);if(xp[ye]||(Z+=pw(ye,fe,h,m,n,x)),se<o.length()-1){const Te=!((Y=ye)<11904||!(Rt["Bopomofo Extended"](Y)||Rt.Bopomofo(Y)||Rt["CJK Compatibility Forms"](Y)||Rt["CJK Compatibility Ideographs"](Y)||Rt["CJK Compatibility"](Y)||Rt["CJK Radicals Supplement"](Y)||Rt["CJK Strokes"](Y)||Rt["CJK Symbols and Punctuation"](Y)||Rt["CJK Unified Ideographs Extension A"](Y)||Rt["CJK Unified Ideographs"](Y)||Rt["Enclosed CJK Letters and Months"](Y)||Rt["Halfwidth and Fullwidth Forms"](Y)||Rt.Hiragana(Y)||Rt["Ideographic Description Characters"](Y)||Rt["Kangxi Radicals"](Y)||Rt["Katakana Phonetic Extensions"](Y)||Rt.Katakana(Y)||Rt["Vertical Forms"](Y)||Rt["Yi Radicals"](Y)||Rt["Yi Syllables"](Y)));(LP[ye]||Te||fe.imageName)&&S.push(gw(se+1,Z,P,S,OP(ye,o.getCharCode(se+1),Te&&L),!1))}}var Y;return yw(gw(o.length(),Z,P,S,0,!0))}function Ry(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function FP(o,n,s,h,m){if(!h&&!m)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let S=n;S<=s;S++)o[S].x-=x,o[S].y+=m}function jP(o,n,s){const{horizontalAlign:h,verticalAlign:m}=Ry(s),_=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function vw(o,n,s,h,m,_){const x=o.image;let S;if(x.content){const Re=x.content,Ue=x.pixelRatio||1;S=[Re[0]/Ue,Re[1]/Ue,x.displaySize[0]-Re[2]/Ue,x.displaySize[1]-Re[3]/Ue]}const P=n.left*_,L=n.right*_;let Z,Y,se,fe;s==="width"||s==="both"?(fe=m[0]+P-h[3],Y=m[0]+L+h[1]):(fe=m[0]+(P+L-x.displaySize[0])/2,Y=fe+x.displaySize[0]);const ye=n.top*_,Te=n.bottom*_;return s==="height"||s==="both"?(Z=m[1]+ye-h[0],se=m[1]+Te+h[2]):(Z=m[1]+(ye+Te-x.displaySize[1])/2,se=Z+x.displaySize[1]),{image:x,top:Z,right:Y,bottom:se,left:fe,collisionPadding:S}}const bd=255,Xs=128,Rl=bd*Xs;function _w(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new tr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const S=h[_],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:P,minSize:s.evaluate(new tr(S)),maxSize:s.evaluate(new tr(P)),interpolationType:m}}}function Ly(o,n,s){let h="never";const m=o.get(n);return m?h=m:o.get(s)&&(h="always"),h}const DP=Ml.VectorTileFeature.types,BP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function wp(o,n,s,h,m,_,x,S,P,L,Z,Y,se){const fe=S?Math.min(Rl,Math.round(S[0])):0,ye=S?Math.min(Rl,Math.round(S[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*m),_,x,(fe<<1)+(P?1:0),ye,16*L,16*Z,256*Y,256*se)}function Oy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function NP(o){for(const n of o.sections)if(tp(n.text))return!0;return!1}class Fy{constructor(n){this.layoutVertexArray=new je,this.indexArray=new bt,this.programConfigurations=n,this.segments=new sn,this.dynamicLayoutVertexArray=new Ke,this.opacityVertexArray=new st,this.hasVisibleVertices=!1,this.placedSymbolArray=new d}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,yP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,vP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,BP,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",Fy);class jy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new sn,this.collisionVertexArray=new mt}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,_P.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",jy);class jc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=py([]),this.placementViewportMatrix=py([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_w(this.zoom,s["text-size"]),this.iconSizeData=_w(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=Ly(h,"text-overlap","text-allow-overlap")!=="never"||Ly(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>f.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Fy(new ei(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Fy(new ei(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new A,this.lineVertexArray=new k,this.symbolInstances=new v,this.textAnchorOffsets=new H}calculateGlyphDependencies(n,s,h,m,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||m)&&_){const S=_d[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const m=this.layers[0],_=m.layout,x=_.get("text-font"),S=_.get("text-field"),P=_.get("icon-image"),L=(S.value.kind!=="constant"||S.value.value instanceof _i&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),Z=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,Y=_.get("symbol-sort-key");if(this.features=[],!L&&!Z)return;const se=s.iconDependencies,fe=s.glyphDependencies,ye=s.availableImages,Te=new tr(this.zoom);for(const{feature:Re,id:Ue,index:Je,sourceLayerIndex:Ge}of n){const qe=m._featureFilter.needGeometry,pt=Ra(Re,qe);if(!m._featureFilter.filter(Te,pt,h))continue;let vt,jt;if(qe||(pt.geometry=za(Re)),L){const Ot=m.getValueAndResolveTokens("text-field",pt,h,ye),zt=_i.factory(Ot);NP(zt)&&(this.hasRTLText=!0),(!this.hasRTLText||Aa.getRTLTextPluginStatus()==="unavailable"||this.hasRTLText&&Aa.isParsed())&&(vt=wP(zt,m,pt))}if(Z){const Ot=m.getValueAndResolveTokens("icon-image",pt,h,ye);jt=Ot instanceof ji?Ot:ji.fromString(Ot)}if(!vt&&!jt)continue;const Wt=this.sortFeaturesByKey?Y.evaluate(pt,{},h):void 0;if(this.features.push({id:Ue,text:vt,icon:jt,index:Je,sourceLayerIndex:Ge,geometry:pt.geometry,properties:Re.properties,type:DP[Re.type],sortKey:Wt}),jt&&(se[jt.name]=!0),vt){const Ot=x.evaluate(pt,{},h).join(","),zt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ah.vertical)>=0;for(const It of vt.sections)if(It.image)se[It.image.name]=!0;else{const Ut=xc(vt.toString()),Pt=It.fontStack||Ot,St=fe[Pt]=fe[Pt]||{};this.calculateGlyphDependencies(It.text,St,zt,this.allowVerticalPlacement,Ut)}}}_.get("symbol-placement")==="line"&&(this.features=function(Re){const Ue={},Je={},Ge=[];let qe=0;function pt(Ot){Ge.push(Re[Ot]),qe++}function vt(Ot,zt,It){const Ut=Je[Ot];return delete Je[Ot],Je[zt]=Ut,Ge[Ut].geometry[0].pop(),Ge[Ut].geometry[0]=Ge[Ut].geometry[0].concat(It[0]),Ut}function jt(Ot,zt,It){const Ut=Ue[zt];return delete Ue[zt],Ue[Ot]=Ut,Ge[Ut].geometry[0].shift(),Ge[Ut].geometry[0]=It[0].concat(Ge[Ut].geometry[0]),Ut}function Wt(Ot,zt,It){const Ut=It?zt[0][zt[0].length-1]:zt[0][0];return`${Ot}:${Ut.x}:${Ut.y}`}for(let Ot=0;Ot<Re.length;Ot++){const zt=Re[Ot],It=zt.geometry,Ut=zt.text?zt.text.toString():null;if(!Ut){pt(Ot);continue}const Pt=Wt(Ut,It),St=Wt(Ut,It,!0);if(Pt in Je&&St in Ue&&Je[Pt]!==Ue[St]){const nn=jt(Pt,St,It),Kt=vt(Pt,St,Ge[nn].geometry);delete Ue[Pt],delete Je[St],Je[Wt(Ut,Ge[Kt].geometry,!0)]=Kt,Ge[nn].geometry=null}else Pt in Je?vt(Pt,St,It):St in Ue?jt(Pt,St,It):(pt(Ot),Ue[Pt]=qe-1,Je[St]=qe-1)}return Ge.filter(Ot=>Ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ue)=>Re.sortKey-Ue.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const P=x[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,m,_,x,S,P,L,Z,Y,se){const fe=n.indexArray,ye=n.layoutVertexArray,Te=n.segments.prepareSegment(4*s.length,ye,fe,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ue=Te.vertexLength,Je=this.allowVerticalPlacement&&S===f.ah.vertical?Math.PI/2:0,Ge=x.text&&x.text.sections;for(let qe=0;qe<s.length;qe++){const{tl:pt,tr:vt,bl:jt,br:Wt,tex:Ot,pixelOffsetTL:zt,pixelOffsetBR:It,minFontScaleX:Ut,minFontScaleY:Pt,glyphOffset:St,isSDF:nn,sectionIndex:Kt}=s[qe],Sn=Te.vertexLength,ir=St[1];wp(ye,P.x,P.y,pt.x,ir+pt.y,Ot.x,Ot.y,h,nn,zt.x,zt.y,Ut,Pt),wp(ye,P.x,P.y,vt.x,ir+vt.y,Ot.x+Ot.w,Ot.y,h,nn,It.x,zt.y,Ut,Pt),wp(ye,P.x,P.y,jt.x,ir+jt.y,Ot.x,Ot.y+Ot.h,h,nn,zt.x,It.y,Ut,Pt),wp(ye,P.x,P.y,Wt.x,ir+Wt.y,Ot.x+Ot.w,Ot.y+Ot.h,h,nn,It.x,It.y,Ut,Pt),Oy(n.dynamicLayoutVertexArray,P,Je),fe.emplaceBack(Sn,Sn+1,Sn+2),fe.emplaceBack(Sn+1,Sn+2,Sn+3),Te.vertexLength+=4,Te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(St[0]),qe!==s.length-1&&Kt===s[qe+1].sectionIndex||n.programConfigurations.populatePaintArrays(ye.length,x,x.index,{},se,Ge&&Ge[Kt])}n.placedSymbolArray.emplaceBack(P.x,P.y,Re,this.glyphOffsetArray.length-Re,Ue,L,Z,P.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,Y)}_addCollisionDebugVertex(n,s,h,m,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,m,_,x,S){const P=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),L=P.vertexLength,Z=_.layoutVertexArray,Y=_.collisionVertexArray,se=S.anchorX,fe=S.anchorY;this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(n,s)),this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(h,s)),this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(h,m)),this._addCollisionDebugVertex(Z,Y,x,se,fe,new w(n,m)),P.vertexLength+=4;const ye=_.indexArray;ye.emplaceBack(L,L+1),ye.emplaceBack(L+1,L+2),ye.emplaceBack(L+2,L+3),ye.emplaceBack(L+3,L),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,m){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jy(it,rw.members,xt),this.iconCollisionBox=new jy(it,rw.members,xt);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,m,_,x,S,P,L){const Z={};for(let Y=s;Y<h;Y++){const se=n.get(Y);Z.textBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.textFeatureIndex=se.featureIndex;break}for(let Y=m;Y<_;Y++){const se=n.get(Y);Z.verticalTextBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.verticalTextFeatureIndex=se.featureIndex;break}for(let Y=x;Y<S;Y++){const se=n.get(Y);Z.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.iconFeatureIndex=se.featureIndex;break}for(let Y=P;Y<L;Y++){const se=n.get(Y);Z.verticalIconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},Z.verticalIconFeatureIndex=se.featureIndex;break}return Z}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<m;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),m=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const P=this.symbolInstances.get(S);m.push(0|Math.round(s*P.anchorX+h*P.anchorY)),_.push(P.featureIndex)}return x.sort((S,P)=>m[S]-m[P]||_[P]-_[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,_,x)=>{m>=0&&x.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xw,ww;Bt("SymbolBucket",jc,{omit:["layers","collisionBoxArray","features","compareText"]}),jc.MAX_GLYPHS=65535,jc.addDynamicAttributes=Oy;var Dy={get paint(){return ww=ww||new Ei({"icon-opacity":new cn(et.paint_symbol["icon-opacity"]),"icon-color":new cn(et.paint_symbol["icon-color"]),"icon-halo-color":new cn(et.paint_symbol["icon-halo-color"]),"icon-halo-width":new cn(et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new cn(et.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(et.paint_symbol["icon-translate-anchor"]),"text-opacity":new cn(et.paint_symbol["text-opacity"]),"text-color":new cn(et.paint_symbol["text-color"],{runtimeType:yn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new cn(et.paint_symbol["text-halo-color"]),"text-halo-width":new cn(et.paint_symbol["text-halo-width"]),"text-halo-blur":new cn(et.paint_symbol["text-halo-blur"]),"text-translate":new Xt(et.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(et.paint_symbol["text-translate-anchor"])})},get layout(){return xw=xw||new Ei({"symbol-placement":new Xt(et.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new cn(et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xt(et.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Xt(et.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Xt(et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(et.layout_symbol["icon-rotation-alignment"]),"icon-size":new cn(et.layout_symbol["icon-size"]),"icon-text-fit":new Xt(et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(et.layout_symbol["icon-text-fit-padding"]),"icon-image":new cn(et.layout_symbol["icon-image"]),"icon-rotate":new cn(et.layout_symbol["icon-rotate"]),"icon-padding":new cn(et.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(et.layout_symbol["icon-keep-upright"]),"icon-offset":new cn(et.layout_symbol["icon-offset"]),"icon-anchor":new cn(et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(et.layout_symbol["text-rotation-alignment"]),"text-field":new cn(et.layout_symbol["text-field"]),"text-font":new cn(et.layout_symbol["text-font"]),"text-size":new cn(et.layout_symbol["text-size"]),"text-max-width":new cn(et.layout_symbol["text-max-width"]),"text-line-height":new Xt(et.layout_symbol["text-line-height"]),"text-letter-spacing":new cn(et.layout_symbol["text-letter-spacing"]),"text-justify":new cn(et.layout_symbol["text-justify"]),"text-radial-offset":new cn(et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(et.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new cn(et.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new cn(et.layout_symbol["text-anchor"]),"text-max-angle":new Xt(et.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(et.layout_symbol["text-writing-mode"]),"text-rotate":new cn(et.layout_symbol["text-rotate"]),"text-padding":new Xt(et.layout_symbol["text-padding"]),"text-keep-upright":new Xt(et.layout_symbol["text-keep-upright"]),"text-transform":new cn(et.layout_symbol["text-transform"]),"text-offset":new cn(et.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(et.layout_symbol["text-allow-overlap"]),"text-overlap":new Xt(et.layout_symbol["text-overlap"]),"text-ignore-placement":new Xt(et.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(et.layout_symbol["text-optional"])})}};class bw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:ot,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",bw,{omit:["defaultValue"]});class bp extends Ro{constructor(n){super(n,Dy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const _ of h)m.indexOf(_)<0&&m.push(_);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,m){const _=this.layout.get(n).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Bn(x.value)||!_?_:function(S,P){return P.replace(/{([^{}]+)}/g,(L,Z)=>S&&Z in S?String(S[Z]):"")}(s.properties,_)}createBucket(n){return new jc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Dy.paint.overridableProperties){if(!bp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new bw(s),m=new qn(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new gl("source",m):new yl("composite",m,s.value.zoomStops),this.paint._values[n]=new zo(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&bp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),m=Dy.paint.properties[s];let _=!1;const x=S=>{for(const P of S)if(m.overrides&&m.overrides.hasOverride(P))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof _i)x(h.value.value.sections);else if(h.value.kind==="source"){const S=L=>{_||(L instanceof qo&&vr(L.value)===or?x(L.value.sections):L instanceof fl?x(L.sections):L.eachChild(S))},P=h.value;P._styleExpression&&S(P._styleExpression.expression)}return _}}let Sw;var UP={get paint(){return Sw=Sw||new Ei({"background-color":new Xt(et.paint_background["background-color"]),"background-pattern":new qh(et.paint_background["background-pattern"]),"background-opacity":new Xt(et.paint_background["background-opacity"])})}};class $P extends Ro{constructor(n){super(n,UP)}}let Ew;var VP={get paint(){return Ew=Ew||new Ei({"raster-opacity":new Xt(et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xt(et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(et.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(et.paint_raster["raster-saturation"]),"raster-contrast":new Xt(et.paint_raster["raster-contrast"]),"raster-resampling":new Xt(et.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(et.paint_raster["raster-fade-duration"])})}};class GP extends Ro{constructor(n){super(n,VP)}}class HP extends Ro{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class WP{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const By=63710088e-1;class Ll{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ll(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,m=n.lat*s,_=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*s);return By*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof Ll)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ll(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ll(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Tw=2*Math.PI*By;function Cw(o){return Tw*Math.cos(o*Math.PI/180)}function Iw(o){return(180+o)/360}function Aw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Pw(o,n){return o/Cw(n)}function Ny(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Sp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Ll.convert(n);return new Sp(Iw(h.lng),Aw(h.lat),Pw(s,h.lat))}toLngLat(){return new Ll(360*this.x-180,Ny(this.y))}toAltitude(){return this.z*Cw(Ny(this.y))}meterInMercatorCoordinateUnits(){return 1/Tw*(n=Ny(this.y),1/Math.cos(n*Math.PI/180));var n}}function kw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Uy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Sd(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const m=(x=this.y,S=this.z,P=kw(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),L=kw(256*(_+1),256*(x+1),S),P[0]+","+P[1]+","+L[0]+","+L[1]);var _,x,S,P,L;const Z=function(Y,se,fe){let ye,Te="";for(let Re=Y;Re>0;Re--)ye=1<<Re-1,Te+=(se&ye?1:0)+(fe&ye?2:0);return Te}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,Z).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new w((n.x*s-this.x)*_r,(n.y*s-this.y)*_r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Mw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Sd(n,s.z,s.z,s.x,s.y)}}class Oo{constructor(n,s,h,m,_){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Uy(h,+m,+_),this.key=Sd(s,n,h,m,_)}clone(){return new Oo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Oo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Sd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Sd(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Oo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Oo(s,this.wrap,s,h,m),new Oo(s,this.wrap,s,h+1,m),new Oo(s,this.wrap,s,h,m+1),new Oo(s,this.wrap,s,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Oo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Oo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Mw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Sp(n.x-this.wrap,n.y))}}function Sd(o,n,s,h,m){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*m+h).toString(36)+s.toString(36)+n.toString(36)}Bt("CanonicalTileID",Uy),Bt("OverscaledTileID",Oo,{omit:["posMatrix"]});class zw{constructor(n,s,h,m=1,_=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let L=0;L<P;L++)this.data[this._idx(-1,L)]=this.data[this._idx(0,L)],this.data[this._idx(P,L)]=this.data[this._idx(P-1,L)],this.data[this._idx(L,-1)]=this.data[this._idx(L,0)],this.data[this._idx(L,P)]=this.data[this._idx(L,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let L=0;L<P;L++)for(let Z=0;Z<P;Z++){const Y=this.get(L,Z);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(n,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:m=_-1;break;case 1:_=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const P=-s*this.dim,L=-h*this.dim;for(let Z=x;Z<S;Z++)for(let Y=m;Y<_;Y++)this.data[this._idx(Y,Z)]=n.data[this._idx(Y+P,Z+L)]}}Bt("DEMData",zw);class Rw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Lw{constructor(n,s,h,m,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=m,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Ow{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ia(_r,16,0),this.grid3D=new Ia(_r,16,0),this.featureIndexArray=new ne,this.promoteId=s}insert(n,s,h,m,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,_);const P=x?this.grid3D:this.grid;for(let L=0;L<s.length;L++){const Z=s[L],Y=[1/0,1/0,-1/0,-1/0];for(let se=0;se<Z.length;se++){const fe=Z[se];Y[0]=Math.min(Y[0],fe.x),Y[1]=Math.min(Y[1],fe.y),Y[2]=Math.max(Y[2],fe.x),Y[3]=Math.max(Y[3],fe.y)}Y[0]<_r&&Y[1]<_r&&Y[2]>=0&&Y[3]>=0&&P.insert(S,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ml.VectorTile(new Py(this.rawTileData)).layers,this.sourceLayerCoder=new Rw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,m){this.loadVTLayers();const _=n.params||{},x=_r/n.tileSize/n.scale,S=go(_.filter),P=n.queryGeometry,L=n.queryPadding*x,Z=jw(P),Y=this.grid.query(Z.minX-L,Z.minY-L,Z.maxX+L,Z.maxY+L),se=jw(n.cameraQueryGeometry),fe=this.grid3D.query(se.minX-L,se.minY-L,se.maxX+L,se.maxY+L,(Re,Ue,Je,Ge)=>function(qe,pt,vt,jt,Wt){for(const zt of qe)if(pt<=zt.x&&vt<=zt.y&&jt>=zt.x&&Wt>=zt.y)return!0;const Ot=[new w(pt,vt),new w(pt,Wt),new w(jt,Wt),new w(jt,vt)];if(qe.length>2){for(const zt of Ot)if(kc(qe,zt))return!0}for(let zt=0;zt<qe.length-1;zt++)if(EA(qe[zt],qe[zt+1],Ot))return!0;return!1}(n.cameraQueryGeometry,Re-L,Ue-L,Je+L,Ge+L));for(const Re of fe)Y.push(Re);Y.sort(ZP);const ye={};let Te;for(let Re=0;Re<Y.length;Re++){const Ue=Y[Re];if(Ue===Te)continue;Te=Ue;const Je=this.featureIndexArray.get(Ue);let Ge=null;this.loadMatchingFeature(ye,Je.bucketIndex,Je.sourceLayerIndex,Je.featureIndex,S,_.layers,_.availableImages,s,h,m,(qe,pt,vt)=>(Ge||(Ge=za(qe)),pt.queryIntersectsFeature(P,qe,vt,Ge,this.z,n.transform,x,n.pixelPosMatrix)))}return ye}loadMatchingFeature(n,s,h,m,_,x,S,P,L,Z,Y){const se=this.bucketLayerIDs[s];if(x&&!function(Re,Ue){for(let Je=0;Je<Re.length;Je++)if(Ue.indexOf(Re[Je])>=0)return!0;return!1}(x,se))return;const fe=this.sourceLayerCoder.decode(h),ye=this.vtLayers[fe].feature(m);if(_.needGeometry){const Re=Ra(ye,!0);if(!_.filter(new tr(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!_.filter(new tr(this.tileID.overscaledZ),ye))return;const Te=this.getId(ye,fe);for(let Re=0;Re<se.length;Re++){const Ue=se[Re];if(x&&x.indexOf(Ue)<0)continue;const Je=P[Ue];if(!Je)continue;let Ge={};Te&&Z&&(Ge=Z.getState(Je.sourceLayer||"_geojsonTileLayer",Te));const qe=E({},L[Ue]);qe.paint=Fw(qe.paint,Je.paint,ye,Ge,S),qe.layout=Fw(qe.layout,Je.layout,ye,Ge,S);const pt=!Y||Y(ye,Je,Ge);if(!pt)continue;const vt=new Lw(ye,this.z,this.x,this.y,Te);vt.layer=qe;let jt=n[Ue];jt===void 0&&(jt=n[Ue]=[]),jt.push({featureIndex:m,feature:vt,intersectionZ:pt})}}lookupSymbolFeatures(n,s,h,m,_,x,S,P){const L={};this.loadVTLayers();const Z=go(_);for(const Y of n)this.loadMatchingFeature(L,h,m,Y,Z,x,S,P,s);return L}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Fw(o,n,s,h,m){return B(o,(_,x)=>{const S=n instanceof Cu?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function jw(o){let n=1/0,s=1/0,h=-1/0,m=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),m=Math.max(m,_.y);return{minX:n,minY:s,maxX:h,maxY:m}}function ZP(o,n){return n-o}function Dw(o,n,s,h,m){const _=[];for(let x=0;x<o.length;x++){const S=o[x];let P;for(let L=0;L<S.length-1;L++){let Z=S[L],Y=S[L+1];Z.x<n&&Y.x<n||(Z.x<n?Z=new w(n,Z.y+(n-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round():Y.x<n&&(Y=new w(n,Z.y+(n-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round()),Z.y<s&&Y.y<s||(Z.y<s?Z=new w(Z.x+(s-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),s)._round():Y.y<s&&(Y=new w(Z.x+(s-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),s)._round()),Z.x>=h&&Y.x>=h||(Z.x>=h?Z=new w(h,Z.y+(h-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round():Y.x>=h&&(Y=new w(h,Z.y+(h-Z.x)/(Y.x-Z.x)*(Y.y-Z.y))._round()),Z.y>=m&&Y.y>=m||(Z.y>=m?Z=new w(Z.x+(m-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),m)._round():Y.y>=m&&(Y=new w(Z.x+(m-Z.y)/(Y.y-Z.y)*(Y.x-Z.x),m)._round()),P&&Z.equals(P[P.length-1])||(P=[Z],_.push(P)),P.push(Y)))))}}return _}Bt("FeatureIndex",Ow,{omit:["rawTileData","sourceLayerCoder"]});class Ol extends w{constructor(n,s,h,m){super(n,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new Ol(this.x,this.y,this.angle,this.segment)}}function Bw(o,n,s,h,m){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=o[x].dist(_),_=o[x]}S+=o[x].dist(o[x+1]),x++;const P=[];let L=0;for(;S<s/2;){const Z=o[x],Y=o[x+1];if(!Y)return!1;let se=o[x-1].angleTo(Z)-Z.angleTo(Y);for(se=Math.abs((se+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:se}),L+=se;S-P[0].distance>h;)L-=P.shift().angleDelta;if(L>m)return!1;x++,S+=Z.dist(Y)}return!0}function Nw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Uw(o,n,s){return o?.6*n*s:0}function $w(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function XP(o,n,s,h,m,_){const x=Uw(s,m,_),S=$w(s,h)*_;let P=0;const L=Nw(o)/2;for(let Z=0;Z<o.length-1;Z++){const Y=o[Z],se=o[Z+1],fe=Y.dist(se);if(P+fe>L){const ye=(L-P)/fe,Te=qr.number(Y.x,se.x,ye),Re=qr.number(Y.y,se.y,ye),Ue=new Ol(Te,Re,se.angleTo(Y),Z);return Ue._round(),!x||Bw(o,Ue,S,x,n)?Ue:void 0}P+=fe}}function qP(o,n,s,h,m,_,x,S,P){const L=Uw(h,_,x),Z=$w(h,m),Y=Z*x,se=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-Y<n/4&&(n=Y+n/4),Vw(o,se?n/2*S%n:(Z/2+2*_)*x*S%n,n,L,s,Y,se,!1,P)}function Vw(o,n,s,h,m,_,x,S,P){const L=_/2,Z=Nw(o);let Y=0,se=n-s,fe=[];for(let ye=0;ye<o.length-1;ye++){const Te=o[ye],Re=o[ye+1],Ue=Te.dist(Re),Je=Re.angleTo(Te);for(;se+s<Y+Ue;){se+=s;const Ge=(se-Y)/Ue,qe=qr.number(Te.x,Re.x,Ge),pt=qr.number(Te.y,Re.y,Ge);if(qe>=0&&qe<P&&pt>=0&&pt<P&&se-L>=0&&se+L<=Z){const vt=new Ol(qe,pt,Je,ye);vt._round(),h&&!Bw(o,vt,_,h,m)||fe.push(vt)}}Y+=Ue}return S||fe.length||x||(fe=Vw(o,Y/2,s,h,m,_,x,!0,P)),fe}Bt("Anchor",Ol);const Dc=Qi;function Gw(o,n,s,h){const m=[],_=o.image,x=_.pixelRatio,S=_.paddedRect.w-2*Dc,P=_.paddedRect.h-2*Dc,L=o.right-o.left,Z=o.bottom-o.top,Y=_.stretchX||[[0,S]],se=_.stretchY||[[0,P]],fe=(It,Ut)=>It+Ut[1]-Ut[0],ye=Y.reduce(fe,0),Te=se.reduce(fe,0),Re=S-ye,Ue=P-Te;let Je=0,Ge=ye,qe=0,pt=Te,vt=0,jt=Re,Wt=0,Ot=Ue;if(_.content&&h){const It=_.content;Je=Ep(Y,0,It[0]),qe=Ep(se,0,It[1]),Ge=Ep(Y,It[0],It[2]),pt=Ep(se,It[1],It[3]),vt=It[0]-Je,Wt=It[1]-qe,jt=It[2]-It[0]-Ge,Ot=It[3]-It[1]-pt}const zt=(It,Ut,Pt,St)=>{const nn=Tp(It.stretch-Je,Ge,L,o.left),Kt=Cp(It.fixed-vt,jt,It.stretch,ye),Sn=Tp(Ut.stretch-qe,pt,Z,o.top),ir=Cp(Ut.fixed-Wt,Ot,Ut.stretch,Te),ar=Tp(Pt.stretch-Je,Ge,L,o.left),Vr=Cp(Pt.fixed-vt,jt,Pt.stretch,ye),vo=Tp(St.stretch-qe,pt,Z,o.top),Ui=Cp(St.fixed-Wt,Ot,St.stretch,Te),Lr=new w(nn,Sn),ri=new w(ar,Sn),pi=new w(ar,vo),$i=new w(nn,vo),Vi=new w(Kt/x,ir/x),Gr=new w(Vr/x,Ui/x),Hr=n*Math.PI/180;if(Hr){const Ai=Math.sin(Hr),eo=Math.cos(Hr),to=[eo,-Ai,Ai,eo];Lr._matMult(to),ri._matMult(to),$i._matMult(to),pi._matMult(to)}const Ii=It.stretch+It.fixed,Gi=Ut.stretch+Ut.fixed;return{tl:Lr,tr:ri,bl:$i,br:pi,tex:{x:_.paddedRect.x+Dc+Ii,y:_.paddedRect.y+Dc+Gi,w:Pt.stretch+Pt.fixed-Ii,h:St.stretch+St.fixed-Gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vi,pixelOffsetBR:Gr,minFontScaleX:jt/x/L,minFontScaleY:Ot/x/Z,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const It=Hw(Y,Re,ye),Ut=Hw(se,Ue,Te);for(let Pt=0;Pt<It.length-1;Pt++){const St=It[Pt],nn=It[Pt+1];for(let Kt=0;Kt<Ut.length-1;Kt++)m.push(zt(St,Ut[Kt],nn,Ut[Kt+1]))}}else m.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return m}function Ep(o,n,s){let h=0;for(const m of o)h+=Math.max(n,Math.min(s,m[1]))-Math.max(n,Math.min(s,m[0]));return h}function Hw(o,n,s){const h=[{fixed:-Dc,stretch:0}];for(const[m,_]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(_-m)})}return h.push({fixed:n+Dc,stretch:s}),h}function Tp(o,n,s,h){return o/n*s+h}function Cp(o,n,s,h){return o-n*s/h}class Ip{constructor(n,s,h,m,_,x,S,P,L,Z){if(this.boxStartIndex=n.length,L){let Y=x.top,se=x.bottom;const fe=x.collisionPadding;fe&&(Y-=fe[1],se+=fe[3]);let ye=se-Y;ye>0&&(ye=Math.max(10,ye),this.circleDiameter=ye)}else{let Y=x.top*S-P[0],se=x.bottom*S+P[2],fe=x.left*S-P[3],ye=x.right*S+P[1];const Te=x.collisionPadding;if(Te&&(fe-=Te[0]*S,Y-=Te[1]*S,ye+=Te[2]*S,se+=Te[3]*S),Z){const Re=new w(fe,Y),Ue=new w(ye,Y),Je=new w(fe,se),Ge=new w(ye,se),qe=Z*Math.PI/180;Re._rotate(qe),Ue._rotate(qe),Je._rotate(qe),Ge._rotate(qe),fe=Math.min(Re.x,Ue.x,Je.x,Ge.x),ye=Math.max(Re.x,Ue.x,Je.x,Ge.x),Y=Math.min(Re.y,Ue.y,Je.y,Ge.y),se=Math.max(Re.y,Ue.y,Je.y,Ge.y)}n.emplaceBack(s.x,s.y,fe,Y,ye,se,h,m,_)}this.boxEndIndex=n.length}}class KP{constructor(n=[],s=YP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,m=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(h(m,x)>=0)break;s[n]=x,n=_}s[n]=m}_down(n){const{data:s,compare:h}=this,m=this.length>>1,_=s[n];for(;n<m;){let x=1+(n<<1),S=s[x];const P=x+1;if(P<this.length&&h(s[P],S)<0&&(x=P,S=s[P]),h(S,_)>=0)break;s[n]=S,n=x}s[n]=_}}function YP(o,n){return o<n?-1:o>n?1:0}function JP(o,n=1,s=!1){let h=1/0,m=1/0,_=-1/0,x=-1/0;const S=o[0];for(let fe=0;fe<S.length;fe++){const ye=S[fe];(!fe||ye.x<h)&&(h=ye.x),(!fe||ye.y<m)&&(m=ye.y),(!fe||ye.x>_)&&(_=ye.x),(!fe||ye.y>x)&&(x=ye.y)}const P=Math.min(_-h,x-m);let L=P/2;const Z=new KP([],QP);if(P===0)return new w(h,m);for(let fe=h;fe<_;fe+=P)for(let ye=m;ye<x;ye+=P)Z.push(new Bc(fe+L,ye+L,L,o));let Y=function(fe){let ye=0,Te=0,Re=0;const Ue=fe[0];for(let Je=0,Ge=Ue.length,qe=Ge-1;Je<Ge;qe=Je++){const pt=Ue[Je],vt=Ue[qe],jt=pt.x*vt.y-vt.x*pt.y;Te+=(pt.x+vt.x)*jt,Re+=(pt.y+vt.y)*jt,ye+=3*jt}return new Bc(Te/ye,Re/ye,0,fe)}(o),se=Z.length;for(;Z.length;){const fe=Z.pop();(fe.d>Y.d||!Y.d)&&(Y=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,se)),fe.max-Y.d<=n||(L=fe.h/2,Z.push(new Bc(fe.p.x-L,fe.p.y-L,L,o)),Z.push(new Bc(fe.p.x+L,fe.p.y-L,L,o)),Z.push(new Bc(fe.p.x-L,fe.p.y+L,L,o)),Z.push(new Bc(fe.p.x+L,fe.p.y+L,L,o)),se+=4)}return s&&(console.log(`num probes: ${se}`),console.log(`best distance: ${Y.d}`)),Y.p}function QP(o,n){return n.max-o.max}function Bc(o,n,s,h){this.p=new w(o,n),this.h=s,this.d=function(m,_){let x=!1,S=1/0;for(let P=0;P<_.length;P++){const L=_[P];for(let Z=0,Y=L.length,se=Y-1;Z<Y;se=Z++){const fe=L[Z],ye=L[se];fe.y>m.y!=ye.y>m.y&&m.x<(ye.x-fe.x)*(m.y-fe.y)/(ye.y-fe.y)+fe.x&&(x=!x),S=Math.min(S,Ax(m,fe,ye))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var fi;f.ap=void 0,(fi=f.ap||(f.ap={}))[fi.center=1]="center",fi[fi.left=2]="left",fi[fi.right=3]="right",fi[fi.top=4]="top",fi[fi.bottom=5]="bottom",fi[fi["top-left"]=6]="top-left",fi[fi["top-right"]=7]="top-right",fi[fi["bottom-left"]=8]="bottom-left",fi[fi["bottom-right"]=9]="bottom-right";const Fl=7,$y=Number.POSITIVE_INFINITY;function Ww(o,n){return n[1]!==$y?function(s,h,m){let _=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-Fl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+Fl}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,n[0],n[1]):function(s,h){let m=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-Fl;break;case"bottom-right":case"bottom-left":_=-x+Fl;break;case"bottom":_=-h+Fl;break;case"top":_=h-Fl}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,_]}(o,n[0])}function Zw(o,n,s){var h;const m=o.layout,_=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(_){const S=_.values,P=[];for(let L=0;L<S.length;L+=2){const Z=P[L]=S[L],Y=S[L+1].map(se=>se*$r);Z.startsWith("top")?Y[1]-=Fl:Z.startsWith("bottom")&&(Y[1]+=Fl),P[L+1]=Y}return new Fi(P)}const x=m.get("text-variable-anchor");if(x){let S;S=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},s)*$r,$y]:m.get("text-offset").evaluate(n,{},s).map(L=>L*$r);const P=[];for(const L of x)P.push(L,Ww(L,S));return new Fi(P)}return null}function Vy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ek(o,n,s,h,m,_,x,S,P,L,Z){let Y=_.textMaxSize.evaluate(n,{});Y===void 0&&(Y=x);const se=o.layers[0].layout,fe=se.get("icon-offset").evaluate(n,{},Z),ye=qw(s.horizontal),Te=x/24,Re=o.tilePixelRatio*Te,Ue=o.tilePixelRatio*Y/24,Je=o.tilePixelRatio*S,Ge=o.tilePixelRatio*se.get("symbol-spacing"),qe=se.get("text-padding")*o.tilePixelRatio,pt=function(St,nn,Kt,Sn=1){const ir=St.get("icon-padding").evaluate(nn,{},Kt),ar=ir&&ir.values;return[ar[0]*Sn,ar[1]*Sn,ar[2]*Sn,ar[3]*Sn]}(se,n,Z,o.tilePixelRatio),vt=se.get("text-max-angle")/180*Math.PI,jt=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",Wt=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",Ot=se.get("symbol-placement"),zt=Ge/2,It=se.get("icon-text-fit");let Ut;h&&It!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(Ut=vw(h,s.vertical,It,se.get("icon-text-fit-padding"),fe,Te)),ye&&(h=vw(h,ye,It,se.get("icon-text-fit-padding"),fe,Te)));const Pt=(St,nn)=>{nn.x<0||nn.x>=_r||nn.y<0||nn.y>=_r||function(Kt,Sn,ir,ar,Vr,vo,Ui,Lr,ri,pi,$i,Vi,Gr,Hr,Ii,Gi,Ai,eo,to,Wr,Pn,Pi,mi,Zr,rs){const ws=Kt.addToLineVertexArray(Sn,ir);let bs,Oa,is,Fo,no=0,Fa=0,Cd=0,Qw=0,Yy=-1,Jy=-1;const ja={};let eb=Wn("");if(Kt.allowVerticalPlacement&&ar.vertical){const ki=Lr.layout.get("text-rotate").evaluate(Pn,{},Zr)+90;is=new Ip(ri,Sn,pi,$i,Vi,ar.vertical,Gr,Hr,Ii,ki),Ui&&(Fo=new Ip(ri,Sn,pi,$i,Vi,Ui,Ai,eo,Ii,ki))}if(Vr){const ki=Lr.layout.get("icon-rotate").evaluate(Pn,{}),jo=Lr.layout.get("icon-text-fit")!=="none",Ru=Gw(Vr,ki,mi,jo),Es=Ui?Gw(Ui,ki,mi,jo):void 0;Oa=new Ip(ri,Sn,pi,$i,Vi,Vr,Ai,eo,!1,ki),no=4*Ru.length;const Lu=Kt.iconSizeData;let qs=null;Lu.kind==="source"?(qs=[Xs*Lr.layout.get("icon-size").evaluate(Pn,{})],qs[0]>Rl&&_e(`${Kt.layerIds[0]}: Value for "icon-size" is >= ${bd}. Reduce your "icon-size".`)):Lu.kind==="composite"&&(qs=[Xs*Pi.compositeIconSizes[0].evaluate(Pn,{},Zr),Xs*Pi.compositeIconSizes[1].evaluate(Pn,{},Zr)],(qs[0]>Rl||qs[1]>Rl)&&_e(`${Kt.layerIds[0]}: Value for "icon-size" is >= ${bd}. Reduce your "icon-size".`)),Kt.addSymbols(Kt.icon,Ru,qs,Wr,to,Pn,f.ah.none,Sn,ws.lineStartIndex,ws.lineLength,-1,Zr),Yy=Kt.icon.placedSymbolArray.length-1,Es&&(Fa=4*Es.length,Kt.addSymbols(Kt.icon,Es,qs,Wr,to,Pn,f.ah.vertical,Sn,ws.lineStartIndex,ws.lineLength,-1,Zr),Jy=Kt.icon.placedSymbolArray.length-1)}const tb=Object.keys(ar.horizontal);for(const ki of tb){const jo=ar.horizontal[ki];if(!bs){eb=Wn(jo.text);const Es=Lr.layout.get("text-rotate").evaluate(Pn,{},Zr);bs=new Ip(ri,Sn,pi,$i,Vi,jo,Gr,Hr,Ii,Es)}const Ru=jo.positionedLines.length===1;if(Cd+=Xw(Kt,Sn,jo,vo,Lr,Ii,Pn,Gi,ws,ar.vertical?f.ah.horizontal:f.ah.horizontalOnly,Ru?tb:[ki],ja,Yy,Pi,Zr),Ru)break}ar.vertical&&(Qw+=Xw(Kt,Sn,ar.vertical,vo,Lr,Ii,Pn,Gi,ws,f.ah.vertical,["vertical"],ja,Jy,Pi,Zr));const rk=bs?bs.boxStartIndex:Kt.collisionBoxArray.length,ik=bs?bs.boxEndIndex:Kt.collisionBoxArray.length,ok=is?is.boxStartIndex:Kt.collisionBoxArray.length,sk=is?is.boxEndIndex:Kt.collisionBoxArray.length,ak=Oa?Oa.boxStartIndex:Kt.collisionBoxArray.length,lk=Oa?Oa.boxEndIndex:Kt.collisionBoxArray.length,uk=Fo?Fo.boxStartIndex:Kt.collisionBoxArray.length,ck=Fo?Fo.boxEndIndex:Kt.collisionBoxArray.length;let Ss=-1;const Pp=(ki,jo)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,jo):jo;Ss=Pp(bs,Ss),Ss=Pp(is,Ss),Ss=Pp(Oa,Ss),Ss=Pp(Fo,Ss);const nb=Ss>-1?1:0;nb&&(Ss*=rs/$r),Kt.glyphOffsetArray.length>=jc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Pn.sortKey!==void 0&&Kt.addToSortKeyRanges(Kt.symbolInstances.length,Pn.sortKey);const hk=Zw(Lr,Pn,Zr),[dk,fk]=function(ki,jo){const Ru=ki.length,Es=jo==null?void 0:jo.values;if((Es==null?void 0:Es.length)>0)for(let Lu=0;Lu<Es.length;Lu+=2){const qs=Es[Lu+1];ki.emplaceBack(f.ap[Es[Lu]],qs[0],qs[1])}return[Ru,ki.length]}(Kt.textAnchorOffsets,hk);Kt.symbolInstances.emplaceBack(Sn.x,Sn.y,ja.right>=0?ja.right:-1,ja.center>=0?ja.center:-1,ja.left>=0?ja.left:-1,ja.vertical||-1,Yy,Jy,eb,rk,ik,ok,sk,ak,lk,uk,ck,pi,Cd,Qw,no,Fa,nb,0,Gr,Ss,dk,fk)}(o,nn,St,s,h,m,Ut,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[qe,qe,qe,qe],jt,P,Je,pt,Wt,fe,n,_,L,Z,x)};if(Ot==="line")for(const St of Dw(n.geometry,0,0,_r,_r)){const nn=qP(St,Ge,vt,s.vertical||ye,h,24,Ue,o.overscaling,_r);for(const Kt of nn)ye&&tk(o,ye.text,zt,Kt)||Pt(St,Kt)}else if(Ot==="line-center"){for(const St of n.geometry)if(St.length>1){const nn=XP(St,vt,s.vertical||ye,h,24,Ue);nn&&Pt(St,nn)}}else if(n.type==="Polygon")for(const St of wy(n.geometry,0)){const nn=JP(St,16);Pt(St[0],new Ol(nn.x,nn.y,0))}else if(n.type==="LineString")for(const St of n.geometry)Pt(St,new Ol(St[0].x,St[0].y,0));else if(n.type==="Point")for(const St of n.geometry)for(const nn of St)Pt([nn],new Ol(nn.x,nn.y,0))}function Xw(o,n,s,h,m,_,x,S,P,L,Z,Y,se,fe,ye){const Te=function(Je,Ge,qe,pt,vt,jt,Wt,Ot){const zt=pt.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,It=[];for(const Ut of Ge.positionedLines)for(const Pt of Ut.positionedGlyphs){if(!Pt.rect)continue;const St=Pt.rect||{};let nn=hw+1,Kt=!0,Sn=1,ir=0;const ar=(vt||Ot)&&Pt.vertical,Vr=Pt.metrics.advance*Pt.scale/2;if(Ot&&Ge.verticalizable&&(ir=Ut.lineOffset/2-(Pt.imageName?-($r-Pt.metrics.width*Pt.scale)/2:(Pt.scale-1)*$r)),Pt.imageName){const Wr=Wt[Pt.imageName];Kt=Wr.sdf,Sn=Wr.pixelRatio,nn=Qi/Sn}const vo=vt?[Pt.x+Vr,Pt.y]:[0,0];let Ui=vt?[0,0]:[Pt.x+Vr+qe[0],Pt.y+qe[1]-ir],Lr=[0,0];ar&&(Lr=Ui,Ui=[0,0]);const ri=Pt.metrics.isDoubleResolution?2:1,pi=(Pt.metrics.left-nn)*Pt.scale-Vr+Ui[0],$i=(-Pt.metrics.top-nn)*Pt.scale+Ui[1],Vi=pi+St.w/ri*Pt.scale/Sn,Gr=$i+St.h/ri*Pt.scale/Sn,Hr=new w(pi,$i),Ii=new w(Vi,$i),Gi=new w(pi,Gr),Ai=new w(Vi,Gr);if(ar){const Wr=new w(-Vr,Vr-xd),Pn=-Math.PI/2,Pi=$r/2-Vr,mi=new w(5-xd-Pi,-(Pt.imageName?Pi:0)),Zr=new w(...Lr);Hr._rotateAround(Pn,Wr)._add(mi)._add(Zr),Ii._rotateAround(Pn,Wr)._add(mi)._add(Zr),Gi._rotateAround(Pn,Wr)._add(mi)._add(Zr),Ai._rotateAround(Pn,Wr)._add(mi)._add(Zr)}if(zt){const Wr=Math.sin(zt),Pn=Math.cos(zt),Pi=[Pn,-Wr,Wr,Pn];Hr._matMult(Pi),Ii._matMult(Pi),Gi._matMult(Pi),Ai._matMult(Pi)}const eo=new w(0,0),to=new w(0,0);It.push({tl:Hr,tr:Ii,bl:Gi,br:Ai,tex:St,writingMode:Ge.writingMode,glyphOffset:vo,sectionIndex:Pt.sectionIndex,isSDF:Kt,pixelOffsetTL:eo,pixelOffsetBR:to,minFontScaleX:0,minFontScaleY:0})}return It}(0,s,S,m,_,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ue=null;Re.kind==="source"?(Ue=[Xs*m.layout.get("text-size").evaluate(x,{})],Ue[0]>Rl&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${bd}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ue=[Xs*fe.compositeTextSizes[0].evaluate(x,{},ye),Xs*fe.compositeTextSizes[1].evaluate(x,{},ye)],(Ue[0]>Rl||Ue[1]>Rl)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${bd}. Reduce your "text-size".`)),o.addSymbols(o.text,Te,Ue,S,_,x,L,n,P.lineStartIndex,P.lineLength,se,ye);for(const Je of Z)Y[Je]=o.text.placedSymbolArray.length-1;return 4*Te.length}function qw(o){for(const n in o)return o[n];return null}function tk(o,n,s,h){const m=o.compareText;if(n in m){const _=m[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else m[n]=[];return m[n].push(h),!1}const Kw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Gy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const _=Kw[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new Gy(S,x,_,n)}constructor(n,s=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=Kw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Hy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,P=[0,_.length-1,0],L=[];for(;P.length;){const Z=P.pop()||0,Y=P.pop()||0,se=P.pop()||0;if(Y-se<=S){for(let Re=se;Re<=Y;Re++){const Ue=x[2*Re],Je=x[2*Re+1];Ue>=n&&Ue<=h&&Je>=s&&Je<=m&&L.push(_[Re])}continue}const fe=se+Y>>1,ye=x[2*fe],Te=x[2*fe+1];ye>=n&&ye<=h&&Te>=s&&Te<=m&&L.push(_[fe]),(Z===0?n<=ye:s<=Te)&&(P.push(se),P.push(fe-1),P.push(1-Z)),(Z===0?h>=ye:m>=Te)&&(P.push(fe+1),P.push(Y),P.push(1-Z))}return L}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:x}=this,S=[0,m.length-1,0],P=[],L=h*h;for(;S.length;){const Z=S.pop()||0,Y=S.pop()||0,se=S.pop()||0;if(Y-se<=x){for(let Re=se;Re<=Y;Re++)Jw(_[2*Re],_[2*Re+1],n,s)<=L&&P.push(m[Re]);continue}const fe=se+Y>>1,ye=_[2*fe],Te=_[2*fe+1];Jw(ye,Te,n,s)<=L&&P.push(m[fe]),(Z===0?n-h<=ye:s-h<=Te)&&(S.push(se),S.push(fe-1),S.push(1-Z)),(Z===0?n+h>=ye:s+h>=Te)&&(S.push(fe+1),S.push(Y),S.push(1-Z))}return P}}function Hy(o,n,s,h,m,_){if(m-h<=s)return;const x=h+m>>1;Yw(o,n,x,h,m,_),Hy(o,n,s,h,x-1,1-_),Hy(o,n,s,x+1,m,1-_)}function Yw(o,n,s,h,m,_){for(;m>h;){if(m-h>600){const L=m-h+1,Z=s-h+1,Y=Math.log(L),se=.5*Math.exp(2*Y/3),fe=.5*Math.sqrt(Y*se*(L-se)/L)*(Z-L/2<0?-1:1);Yw(o,n,s,Math.max(h,Math.floor(s-Z*se/L+fe)),Math.min(m,Math.floor(s+(L-Z)*se/L+fe)),_)}const x=n[2*s+_];let S=h,P=m;for(Ed(o,n,h,s),n[2*m+_]>x&&Ed(o,n,h,m);S<P;){for(Ed(o,n,S,P),S++,P--;n[2*S+_]<x;)S++;for(;n[2*P+_]>x;)P--}n[2*h+_]===x?Ed(o,n,h,P):(P++,Ed(o,n,P,m)),P<=s&&(h=P+1),s<=P&&(m=P-1)}}function Ed(o,n,s,h){Wy(o,s,h),Wy(n,2*s,2*h),Wy(n,2*s+1,2*h+1)}function Wy(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Jw(o,n,s,h){const m=o-s,_=n-h;return m*m+_*_}var Zy;f.bc=void 0,(Zy=f.bc||(f.bc={})).create="create",Zy.load="load",Zy.fullLoad="fullLoad";let Ap=null,Td=[];const Xy=1e3/60,qy="loadTime",Ky="fullLoadTime",nk={mark(o){performance.mark(o)},frame(o){const n=o;Ap!=null&&Td.push(n-Ap),Ap=n},clearMetrics(){Ap=null,Td=[],performance.clearMeasures(qy),performance.clearMeasures(Ky);for(const o in f.bc)performance.clearMarks(f.bc[o])},getPerformanceMetrics(){performance.measure(qy,f.bc.create,f.bc.load),performance.measure(Ky,f.bc.create,f.bc.fullLoad);const o=performance.getEntriesByName(qy)[0].duration,n=performance.getEntriesByName(Ky)[0].duration,s=Td.length,h=1/(Td.reduce((_,x)=>_+x,0)/s/1e3),m=Td.filter(_=>_>Xy).reduce((_,x)=>_+(x-Xy)/Xy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};f.$=sn,f.A=Mc,f.B=function(o){if(Q==null){const n=o.navigator?o.navigator.userAgent:null;Q=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Q},f.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new WP(()=>this.process()),this.subscription=function(s,h,m,_){return s.addEventListener(h,m,!1),{unsubscribe:()=>{s.removeEventListener(h,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=le(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const S={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Cl(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const n=o.data,s=n.id;if(n.origin===location.origin&&(!n.targetMapId||this.mapId===n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(le(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(n.error?m.reject(Eu(n.error)):m.resolve(Eu(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Eu(n.data),h=new AbortController;this.abortControllers[o]=h;try{const m=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Cl(n):null,data:Cl(s,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.D=Xt,f.E=bn,f.F=function(){var o=new Mc(16);return Mc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},f.G=rt,f.H=function(o,n,s){var h,m,_,x,S,P,L,Z,Y,se,fe,ye,Te=s[0],Re=s[1],Ue=s[2];return n===o?(o[12]=n[0]*Te+n[4]*Re+n[8]*Ue+n[12],o[13]=n[1]*Te+n[5]*Re+n[9]*Ue+n[13],o[14]=n[2]*Te+n[6]*Re+n[10]*Ue+n[14],o[15]=n[3]*Te+n[7]*Re+n[11]*Ue+n[15]):(m=n[1],_=n[2],x=n[3],S=n[4],P=n[5],L=n[6],Z=n[7],Y=n[8],se=n[9],fe=n[10],ye=n[11],o[0]=h=n[0],o[1]=m,o[2]=_,o[3]=x,o[4]=S,o[5]=P,o[6]=L,o[7]=Z,o[8]=Y,o[9]=se,o[10]=fe,o[11]=ye,o[12]=h*Te+S*Re+Y*Ue+n[12],o[13]=m*Te+P*Re+se*Ue+n[13],o[14]=_*Te+L*Re+fe*Ue+n[14],o[15]=x*Te+Z*Re+ye*Ue+n[15]),o},f.I=My,f.J=function(o,n,s){var h=s[0],m=s[1],_=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*m,o[5]=n[5]*m,o[6]=n[6]*m,o[7]=n[7]*m,o[8]=n[8]*_,o[9]=n[9]*_,o[10]=n[10]*_,o[11]=n[11]*_,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.K=zx,f.L=function(o,n){const s={};for(let h=0;h<n.length;h++){const m=n[h];m in o&&(s[m]=o[m])}return s},f.M=Ll,f.N=Iw,f.O=Aw,f.P=w,f.Q=Oo,f.R=Lo,f.S=K,f.T=np,f.U=W,f.V=be,f.W=_r,f.X=Er,f.Y=Sp,f.Z=class extends Jh{},f._=u,f.a=We,f.a$=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},f.a0=Uy,f.a1=z,f.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const m=window.document.createElement("source");gt(h)||(n.crossOrigin="Anonymous"),m.src=h,n.appendChild(m)}})},f.a3=function(){return j++},f.a4=r,f.a5=jc,f.a6=go,f.a7=Ra,f.a8=tr,f.a9=Lw,f.aA=q,f.aB=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!we(o.version,n.version))return[{command:"setStyle",args:[n]}];we(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),we(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),we(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),we(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),we(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),we(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),we(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),we(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),we(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]});const h={},m=[];(function(x,S,P,L){let Z;for(Z in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,Z)&&(Object.prototype.hasOwnProperty.call(S,Z)||xe(Z,P,L));for(Z in S)Object.prototype.hasOwnProperty.call(S,Z)&&(Object.prototype.hasOwnProperty.call(x,Z)?we(x[Z],S[Z])||(x[Z].type==="geojson"&&S[Z].type==="geojson"&&Qe(x,S,Z)?N(P,{command:"setGeoJSONSourceData",args:[Z,S[Z].data]}):Ze(Z,S,P,L)):D(Z,S,P))})(o.sources,n.sources,m,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(m),function(x,S,P){S=S||[];const L=(x=x||[]).map(ae),Z=S.map(ae),Y=x.reduce(R,{}),se=S.reduce(R,{}),fe=L.slice(),ye=Object.create(null);let Te,Re,Ue,Je,Ge;for(let qe=0,pt=0;qe<L.length;qe++)Te=L[qe],Object.prototype.hasOwnProperty.call(se,Te)?pt++:(N(P,{command:"removeLayer",args:[Te]}),fe.splice(fe.indexOf(Te,pt),1));for(let qe=0,pt=0;qe<Z.length;qe++)Te=Z[Z.length-1-qe],fe[fe.length-1-qe]!==Te&&(Object.prototype.hasOwnProperty.call(Y,Te)?(N(P,{command:"removeLayer",args:[Te]}),fe.splice(fe.lastIndexOf(Te,fe.length-pt),1)):pt++,Je=fe[fe.length-qe],N(P,{command:"addLayer",args:[se[Te],Je]}),fe.splice(fe.length-qe,0,Te),ye[Te]=!0);for(let qe=0;qe<Z.length;qe++)if(Te=Z[qe],Re=Y[Te],Ue=se[Te],!ye[Te]&&!we(Re,Ue))if(we(Re.source,Ue.source)&&we(Re["source-layer"],Ue["source-layer"])&&we(Re.type,Ue.type)){for(Ge in ct(Re.layout,Ue.layout,P,Te,null,"setLayoutProperty"),ct(Re.paint,Ue.paint,P,Te,null,"setPaintProperty"),we(Re.filter,Ue.filter)||N(P,{command:"setFilter",args:[Te,Ue.filter]}),we(Re.minzoom,Ue.minzoom)&&we(Re.maxzoom,Ue.maxzoom)||N(P,{command:"setLayerZoomRange",args:[Te,Ue.minzoom,Ue.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ct(Re[Ge],Ue[Ge],P,Te,Ge.slice(6),"setPaintProperty"):we(Re[Ge],Ue[Ge])||N(P,{command:"setLayerProperty",args:[Te,Ge,Ue[Ge]]}));for(Ge in Ue)Object.prototype.hasOwnProperty.call(Ue,Ge)&&!Object.prototype.hasOwnProperty.call(Re,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?ct(Re[Ge],Ue[Ge],P,Te,Ge.slice(6),"setPaintProperty"):we(Re[Ge],Ue[Ge])||N(P,{command:"setLayerProperty",args:[Te,Ge,Ue[Ge]]}))}else N(P,{command:"removeLayer",args:[Te]}),Je=fe[fe.lastIndexOf(Te)+1],N(P,{command:"addLayer",args:[Ue,Je]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},f.aC=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},f.aD=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},f.aE=B,f.aF=ee,f.aG=class extends di{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},f.aH=yo,f.aI=class extends di{constructor(o,n){super(o,n),this.current=kl}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},f.aJ=Ws,f.aK=class extends di{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},f.aL=class extends di{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},f.aM=Pl,f.aN=function(o,n,s,h,m,_,x){var S=1/(n-s),P=1/(h-m),L=1/(_-x);return o[0]=-2*S,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*L,o[11]=0,o[12]=(n+s)*S,o[13]=(m+h)*P,o[14]=(x+_)*L,o[15]=1,o},f.aO=Dn,f.aP=CA,f.aQ=class extends Pu{},f.aR=xP,f.aS=class extends Pa{},f.aT=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},f.aU=jx,f.aV=pe,f.aW=class extends Ic{},f.aX=bt,f.aY=function(o,n){var s=o[0],h=o[1],m=o[2],_=o[3],x=o[4],S=o[5],P=o[6],L=o[7],Z=o[8],Y=o[9],se=o[10],fe=o[11],ye=o[12],Te=o[13],Re=o[14],Ue=o[15],Je=n[0],Ge=n[1],qe=n[2],pt=n[3],vt=n[4],jt=n[5],Wt=n[6],Ot=n[7],zt=n[8],It=n[9],Ut=n[10],Pt=n[11],St=n[12],nn=n[13],Kt=n[14],Sn=n[15];return Math.abs(s-Je)<=Ni*Math.max(1,Math.abs(s),Math.abs(Je))&&Math.abs(h-Ge)<=Ni*Math.max(1,Math.abs(h),Math.abs(Ge))&&Math.abs(m-qe)<=Ni*Math.max(1,Math.abs(m),Math.abs(qe))&&Math.abs(_-pt)<=Ni*Math.max(1,Math.abs(_),Math.abs(pt))&&Math.abs(x-vt)<=Ni*Math.max(1,Math.abs(x),Math.abs(vt))&&Math.abs(S-jt)<=Ni*Math.max(1,Math.abs(S),Math.abs(jt))&&Math.abs(P-Wt)<=Ni*Math.max(1,Math.abs(P),Math.abs(Wt))&&Math.abs(L-Ot)<=Ni*Math.max(1,Math.abs(L),Math.abs(Ot))&&Math.abs(Z-zt)<=Ni*Math.max(1,Math.abs(Z),Math.abs(zt))&&Math.abs(Y-It)<=Ni*Math.max(1,Math.abs(Y),Math.abs(It))&&Math.abs(se-Ut)<=Ni*Math.max(1,Math.abs(se),Math.abs(Ut))&&Math.abs(fe-Pt)<=Ni*Math.max(1,Math.abs(fe),Math.abs(Pt))&&Math.abs(ye-St)<=Ni*Math.max(1,Math.abs(ye),Math.abs(St))&&Math.abs(Te-nn)<=Ni*Math.max(1,Math.abs(Te),Math.abs(nn))&&Math.abs(Re-Kt)<=Ni*Math.max(1,Math.abs(Re),Math.abs(Kt))&&Math.abs(Ue-Sn)<=Ni*Math.max(1,Math.abs(Ue),Math.abs(Sn))},f.aZ=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.a_=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},f.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,_)=>{const x=m||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},f.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},f.ac=X,f.ad=function(o,n,s){var h=Math.sin(s),m=Math.cos(s),_=n[0],x=n[1],S=n[2],P=n[3],L=n[4],Z=n[5],Y=n[6],se=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=_*m+L*h,o[1]=x*m+Z*h,o[2]=S*m+Y*h,o[3]=P*m+se*h,o[4]=L*m-_*h,o[5]=Z*m-x*h,o[6]=Y*m-S*h,o[7]=se*m-P*h,o},f.ae=function(o){var n=new Mc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},f.af=dp,f.ag=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:x}=o,S=m?X(Kr.interpolationFactor(m,n,_,x),0,1):0;o.kind==="camera"?h=qr.number(o.minSize,o.maxSize,S):s=S}return{uSizeT:s,uSize:h}},f.ai=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/Xs:o.kind==="composite"?qr.number(h/Xs,m/Xs,s):n},f.aj=Oy,f.ak=function(o,n,s,h){const m=n.y-o.y,_=n.x-o.x,x=h.y-s.y,S=h.x-s.x,P=x*_-S*m;if(P===0)return null;const L=(S*(o.y-s.y)-x*(o.x-s.x))/P;return new w(o.x+L*_,o.y+L*m)},f.al=Dw,f.am=ud,f.an=py,f.ao=$r,f.aq=Ly,f.ar=function(o,n){var s=n[0],h=n[1],m=n[2],_=n[3],x=n[4],S=n[5],P=n[6],L=n[7],Z=n[8],Y=n[9],se=n[10],fe=n[11],ye=n[12],Te=n[13],Re=n[14],Ue=n[15],Je=s*S-h*x,Ge=s*P-m*x,qe=s*L-_*x,pt=h*P-m*S,vt=h*L-_*S,jt=m*L-_*P,Wt=Z*Te-Y*ye,Ot=Z*Re-se*ye,zt=Z*Ue-fe*ye,It=Y*Re-se*Te,Ut=Y*Ue-fe*Te,Pt=se*Ue-fe*Re,St=Je*Pt-Ge*Ut+qe*It+pt*zt-vt*Ot+jt*Wt;return St?(o[0]=(S*Pt-P*Ut+L*It)*(St=1/St),o[1]=(m*Ut-h*Pt-_*It)*St,o[2]=(Te*jt-Re*vt+Ue*pt)*St,o[3]=(se*vt-Y*jt-fe*pt)*St,o[4]=(P*zt-x*Pt-L*Ot)*St,o[5]=(s*Pt-m*zt+_*Ot)*St,o[6]=(Re*qe-ye*jt-Ue*Ge)*St,o[7]=(Z*jt-se*qe+fe*Ge)*St,o[8]=(x*Ut-S*zt+L*Wt)*St,o[9]=(h*zt-s*Ut-_*Wt)*St,o[10]=(ye*vt-Te*qe+Ue*Je)*St,o[11]=(Y*qe-Z*vt-fe*Je)*St,o[12]=(S*Ot-x*It-P*Wt)*St,o[13]=(s*It-h*Ot+m*Wt)*St,o[14]=(Te*Ge-ye*pt-Re*Je)*St,o[15]=(Z*pt-Y*Ge+se*Je)*St,o):null},f.as=Vy,f.at=Ry,f.au=Gy,f.av=function(){const o={},n=et.$version;for(const s in et.$root){const h=et.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},f.aw=_c,f.ax=wt,f.ay=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=xn(o[s],n[o[s].ref]));return o},f.az=function(o){if(o.type==="custom")return new HP(o);switch(o.type){case"background":return new $P(o);case"circle":return new IA(o);case"fill":return new ZA(o);case"fill-extrusion":return new lP(o);case"heatmap":return new PA(o);case"hillshade":return new MA(o);case"line":return new gP(o);case"raster":return new GP(o);case"symbol":return new bp(o)}},f.b=te,f.b0=V,f.b1=Mw,f.b2=Pw,f.b3=function(o,n,s,h,m){var _,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(_=1/(h-m)),o[14]=2*m*h*_):(o[10]=-1,o[14]=-2*h),o},f.b4=function(o,n,s){var h=Math.sin(s),m=Math.cos(s),_=n[4],x=n[5],S=n[6],P=n[7],L=n[8],Z=n[9],Y=n[10],se=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=_*m+L*h,o[5]=x*m+Z*h,o[6]=S*m+Y*h,o[7]=P*m+se*h,o[8]=L*m-_*h,o[9]=Z*m-x*h,o[10]=Y*m-S*h,o[11]=se*m-P*h,o},f.b5=$,f.b6=ie,f.b7=function(o){return o*Math.PI/180},f.b8=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},f.b9=class extends Ec{},f.ba=By,f.bb=nk,f.bd=ht,f.be=function(o,n){We.REGISTERED_PROTOCOLS[o]=n},f.bf=function(o){delete We.REGISTERED_PROTOCOLS[o]},f.bg=function(o,n){const s={};for(let m=0;m<o.length;m++){const _=n&&n[o[m].id]||bl(o[m]);n&&(n[o[m].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},f.bh=Bt,f.bi=Rw,f.bj=Ow,f.bk=fw,f.bl=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=_r/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new tr(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new tr(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new tr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:L,maxZoom:Z}=o.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new tr(L),o.canonical),h["text-size"].possiblyEvaluate(new tr(Z),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:L,maxZoom:Z}=o.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new tr(L),o.canonical),h["icon-size"].possiblyEvaluate(new tr(Z),o.canonical)]}const _=s.get("text-line-height")*$r,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),P=s.get("text-size");for(const L of o.bucket.features){const Z=s.get("text-font").evaluate(L,{},o.canonical).join(","),Y=P.evaluate(L,{},o.canonical),se=m.layoutTextSize.evaluate(L,{},o.canonical),fe=m.layoutIconSize.evaluate(L,{},o.canonical),ye={horizontal:{},vertical:void 0},Te=L.text;let Re,Ue=[0,0];if(Te){const qe=Te.toString(),pt=s.get("text-letter-spacing").evaluate(L,{},o.canonical)*$r,vt=Qf(qe)?pt:0,jt=s.get("text-anchor").evaluate(L,{},o.canonical),Wt=Zw(n,L,o.canonical);if(!Wt){const Pt=s.get("text-radial-offset").evaluate(L,{},o.canonical);Ue=Pt?Ww(jt,[Pt*$r,$y]):s.get("text-offset").evaluate(L,{},o.canonical).map(St=>St*$r)}let Ot=x?"center":s.get("text-justify").evaluate(L,{},o.canonical);const zt=s.get("symbol-placement"),It=zt==="point"?s.get("text-max-width").evaluate(L,{},o.canonical)*$r:0,Ut=()=>{o.bucket.allowVerticalPlacement&&xc(qe)&&(ye.vertical=_p(Te,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,jt,"left",vt,Ue,f.ah.vertical,!0,zt,se,Y))};if(!x&&Wt){const Pt=new Set;if(Ot==="auto")for(let nn=0;nn<Wt.values.length;nn+=2)Pt.add(Vy(Wt.values[nn]));else Pt.add(Ot);let St=!1;for(const nn of Pt)if(!ye.horizontal[nn])if(St)ye.horizontal[nn]=ye.horizontal[0];else{const Kt=_p(Te,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,"center",nn,vt,Ue,f.ah.horizontal,!1,zt,se,Y);Kt&&(ye.horizontal[nn]=Kt,St=Kt.positionedLines.length===1)}Ut()}else{Ot==="auto"&&(Ot=Vy(jt));const Pt=_p(Te,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,jt,Ot,vt,Ue,f.ah.horizontal,!1,zt,se,Y);Pt&&(ye.horizontal[Ot]=Pt),Ut(),xc(qe)&&x&&S&&(ye.vertical=_p(Te,o.glyphMap,o.glyphPositions,o.imagePositions,Z,It,_,jt,Ot,vt,Ue,f.ah.vertical,!1,zt,se,Y))}}let Je=!1;if(L.icon&&L.icon.name){const qe=o.imageMap[L.icon.name];qe&&(Re=jP(o.imagePositions[L.icon.name],s.get("icon-offset").evaluate(L,{},o.canonical),s.get("icon-anchor").evaluate(L,{},o.canonical)),Je=!!qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Je:o.bucket.sdfIcons!==Je&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ge=qw(ye.horizontal)||ye.vertical;o.bucket.iconsInText=!!Ge&&Ge.iconsInText,(Ge||Re)&&ek(o.bucket,L,ye,Re,o.imageMap,m,se,fe,Ue,Je,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},f.bm=Iy,f.bn=Ey,f.bo=Cy,f.bp=Ml,f.bq=Py,f.br=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},f.bs=function(o,n,s,h,m){return u(this,void 0,void 0,function*(){if(W())try{return yield be(o,n,s,h,m)}catch{}return function(_,x,S,P,L){const Z=_.width,Y=_.height;Ee&&Be||(Ee=new OffscreenCanvas(Z,Y),Be=Ee.getContext("2d",{willReadFrequently:!0})),Ee.width=Z,Ee.height=Y,Be.drawImage(_,0,0,Z,Y);const se=Be.getImageData(x,S,P,L);return Be.clearRect(0,0,Z,Y),se.data}(o,n,s,h,m)})},f.bt=zw,f.bu=b,f.bv=C,f.bw=iw,f.bx=bi,f.by=function(o){return o.message===ke},f.bz=Aa,f.c=ze,f.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=E,f.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=he})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(m):he}),f.g=He,f.h=(o,n)=>Mt(E(o,{type:"json"}),n),f.i=le,f.j=qt,f.k=Ht,f.l=(o,n)=>Mt(E(o,{type:"arrayBuffer"}),n),f.m=Mt,f.n=function(o){return new Py(o).readFields(MP,[])},f.o=dd,f.p=dw,f.q=Ei,f.r=Mo,f.s=gt,f.t=Ca,f.u=Rt,f.v=et,f.w=_e,f.x=Si,f.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},f.z=qr}),c("worker",["./shared"],function(f){class u{constructor(re){this.keyCache={},re&&this.replace(re)}replace(re){this._layerConfigs={},this._layers={},this.update(re,[])}update(re,ce){for(const Ie of re){this._layerConfigs[Ie.id]=Ie;const Ne=this._layers[Ie.id]=f.az(Ie);Ne._featureFilter=f.a6(Ne.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of ce)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const ge=f.bg(Object.values(this._layerConfigs),this.keyCache);for(const Ie of ge){const Ne=Ie.map(ut=>this._layers[ut.id]),Le=Ne[0];if(Le.visibility==="none")continue;const $e=Le.source||"";let Fe=this.familiesBySource[$e];Fe||(Fe=this.familiesBySource[$e]={});const Ye=Le.sourceLayer||"_geojsonTileLayer";let dt=Fe[Ye];dt||(dt=Fe[Ye]=[]),dt.push(Ne)}}}class b{constructor(re){const ce={},ge=[];for(const $e in re){const Fe=re[$e],Ye=ce[$e]={};for(const dt in Fe){const ut=Fe[+dt];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const ft={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};ge.push(ft),Ye[dt]={rect:ft,metrics:ut.metrics}}}const{w:Ie,h:Ne}=f.p(ge),Le=new f.o({width:Ie||1,height:Ne||1});for(const $e in re){const Fe=re[$e];for(const Ye in Fe){const dt=Fe[+Ye];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const ut=ce[$e][Ye].rect;f.o.copy(dt.bitmap,Le,{x:0,y:0},{x:ut.x+1,y:ut.y+1},dt.bitmap)}}this.image=Le,this.positions=ce}}f.bh("GlyphAtlas",b);class C{constructor(re){this.tileID=new f.Q(re.tileID.overscaledZ,re.tileID.wrap,re.tileID.canonical.z,re.tileID.canonical.x,re.tileID.canonical.y),this.uid=re.uid,this.zoom=re.zoom,this.pixelRatio=re.pixelRatio,this.tileSize=re.tileSize,this.source=re.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=re.showCollisionBoxes,this.collectResourceTiming=!!re.collectResourceTiming,this.returnDependencies=!!re.returnDependencies,this.promoteId=re.promoteId,this.inFlightDependencies=[]}parse(re,ce,ge,Ie){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=re,this.collisionBoxArray=new f.a4;const Ne=new f.bi(Object.keys(re.layers).sort()),Le=new f.bj(this.tileID,this.promoteId);Le.bucketLayerIDs=[];const $e={},Fe={featureIndex:Le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ge},Ye=ce.familiesBySource[this.source];for(const fn in Ye){const sr=re.layers[fn];if(!sr)continue;sr.version===1&&f.w(`Vector tile source "${this.source}" layer "${fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const wr=Ne.encode(fn),ni=[];for(let ai=0;ai<sr.length;ai++){const Rr=sr.feature(ai),po=Le.getId(Rr,fn);ni.push({feature:Rr,id:po,index:ai,sourceLayerIndex:wr})}for(const ai of Ye[fn]){const Rr=ai[0];Rr.source!==this.source&&f.w(`layer.source = ${Rr.source} does not equal this.source = ${this.source}`),Rr.minzoom&&this.zoom<Math.floor(Rr.minzoom)||Rr.maxzoom&&this.zoom>=Rr.maxzoom||Rr.visibility!=="none"&&(I(ai,this.zoom,ge),($e[Rr.id]=Rr.createBucket({index:Le.bucketLayerIDs.length,layers:ai,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wr,sourceID:this.source})).populate(ni,Fe,this.tileID.canonical),Le.bucketLayerIDs.push(ai.map(po=>po.id)))}}const dt=f.aE(Fe.glyphDependencies,fn=>Object.keys(fn).map(Number));this.inFlightDependencies.forEach(fn=>fn==null?void 0:fn.abort()),this.inFlightDependencies=[];let ut=Promise.resolve({});if(Object.keys(dt).length){const fn=new AbortController;this.inFlightDependencies.push(fn),ut=Ie.sendAsync({type:"getGlyphs",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},fn)}const ft=Object.keys(Fe.iconDependencies);let Yt=Promise.resolve({});if(ft.length){const fn=new AbortController;this.inFlightDependencies.push(fn),Yt=Ie.sendAsync({type:"getImages",data:{icons:ft,source:this.source,tileID:this.tileID,type:"icons"}},fn)}const tn=Object.keys(Fe.patternDependencies);let gn=Promise.resolve({});if(tn.length){const fn=new AbortController;this.inFlightDependencies.push(fn),gn=Ie.sendAsync({type:"getImages",data:{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"}},fn)}const[dn,wn,jn]=yield Promise.all([ut,Yt,gn]),Hn=new b(dn),ur=new f.bk(wn,jn);for(const fn in $e){const sr=$e[fn];sr instanceof f.a5?(I(sr.layers,this.zoom,ge),f.bl({bucket:sr,glyphMap:dn,glyphPositions:Hn.positions,imageMap:wn,imagePositions:ur.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):sr.hasPattern&&(sr instanceof f.bm||sr instanceof f.bn||sr instanceof f.bo)&&(I(sr.layers,this.zoom,ge),sr.addFeatures(Fe,this.tileID.canonical,ur.patternPositions))}return this.status="done",{buckets:Object.values($e).filter(fn=>!fn.isEmpty()),featureIndex:Le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Hn.image,imageAtlas:ur,glyphMap:this.returnDependencies?dn:null,iconMap:this.returnDependencies?wn:null,glyphPositions:this.returnDependencies?Hn.positions:null}})}}function I(Me,re,ce){const ge=new f.a8(re);for(const Ie of Me)Ie.recalculate(ge,ce)}class w{constructor(re,ce,ge){this.actor=re,this.layerIndex=ce,this.availableImages=ge,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(re,ce){return f._(this,void 0,void 0,function*(){const ge=yield f.l(re.request,ce);try{return{vectorTile:new f.bp.VectorTile(new f.bq(ge.data)),rawData:ge.data,cacheControl:ge.cacheControl,expires:ge.expires}}catch(Ie){const Ne=new Uint8Array(ge.data);let Le=`Unable to parse the tile at ${re.request.url}, `;throw Le+=Ne[0]===31&&Ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.messge}`,new Error(Le)}})}loadTile(re){return f._(this,void 0,void 0,function*(){const ce=re.uid,ge=!!(re&&re.request&&re.request.collectResourceTiming)&&new f.br(re.request),Ie=new C(re);this.loading[ce]=Ie;const Ne=new AbortController;Ie.abort=Ne;try{const Le=yield this.loadVectorTile(re,Ne);if(delete this.loading[ce],!Le)return null;const $e=Le.rawData,Fe={};Le.expires&&(Fe.expires=Le.expires),Le.cacheControl&&(Fe.cacheControl=Le.cacheControl);const Ye={};if(ge){const ut=ge.finish();ut&&(Ye.resourceTiming=JSON.parse(JSON.stringify(ut)))}Ie.vectorTile=Le.vectorTile;const dt=Ie.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ce]=Ie,this.fetching[ce]={rawTileData:$e,cacheControl:Fe,resourceTiming:Ye};try{const ut=yield dt;return f.e({rawTileData:$e.slice(0)},ut,Fe,Ye)}finally{delete this.fetching[ce]}}catch(Le){throw delete this.loading[ce],Ie.status="done",this.loaded[ce]=Ie,Le}})}reloadTile(re){return f._(this,void 0,void 0,function*(){const ce=re.uid;if(!this.loaded||!this.loaded[ce])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ge=this.loaded[ce];if(ge.showCollisionBoxes=re.showCollisionBoxes,ge.status==="parsing"){const Ie=yield ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ne;if(this.fetching[ce]){const{rawTileData:Le,cacheControl:$e,resourceTiming:Fe}=this.fetching[ce];delete this.fetching[ce],Ne=f.e({rawTileData:Le.slice(0)},Ie,$e,Fe)}else Ne=Ie;return Ne}if(ge.status==="done"&&ge.vectorTile)return ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(re){return f._(this,void 0,void 0,function*(){const ce=this.loading,ge=re.uid;ce&&ce[ge]&&ce[ge].abort&&(ce[ge].abort.abort(),delete ce[ge])})}removeTile(re){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[re.uid]&&delete this.loaded[re.uid]})}}class T{constructor(){this.loaded={}}loadTile(re){return f._(this,void 0,void 0,function*(){const{uid:ce,encoding:ge,rawImageData:Ie,redFactor:Ne,greenFactor:Le,blueFactor:$e,baseShift:Fe}=re,Ye=Ie.width+2,dt=Ie.height+2,ut=f.b(Ie)?new f.R({width:Ye,height:dt},yield f.bs(Ie,-1,-1,Ye,dt)):Ie,ft=new f.bt(ce,ut,ge,Ne,Le,$e,Fe);return this.loaded=this.loaded||{},this.loaded[ce]=ft,ft})}removeTile(re){const ce=this.loaded,ge=re.uid;ce&&ce[ge]&&delete ce[ge]}}function O(Me,re){if(Me.length!==0){U(Me[0],re);for(var ce=1;ce<Me.length;ce++)U(Me[ce],!re)}}function U(Me,re){for(var ce=0,ge=0,Ie=0,Ne=Me.length,Le=Ne-1;Ie<Ne;Le=Ie++){var $e=(Me[Ie][0]-Me[Le][0])*(Me[Le][1]+Me[Ie][1]),Fe=ce+$e;ge+=Math.abs(ce)>=Math.abs($e)?ce-Fe+$e:$e-Fe+ce,ce=Fe}ce+ge>=0!=!!re&&Me.reverse()}var F=f.bu(function Me(re,ce){var ge,Ie=re&&re.type;if(Ie==="FeatureCollection")for(ge=0;ge<re.features.length;ge++)Me(re.features[ge],ce);else if(Ie==="GeometryCollection")for(ge=0;ge<re.geometries.length;ge++)Me(re.geometries[ge],ce);else if(Ie==="Feature")Me(re.geometry,ce);else if(Ie==="Polygon")O(re.coordinates,ce);else if(Ie==="MultiPolygon")for(ge=0;ge<re.coordinates.length;ge++)O(re.coordinates[ge],ce);return re});const ue=f.bp.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},W=f.bv,$=f.bp.VectorTileFeature,ie=X;function X(Me,re){this.options=re||{},this.features=Me,this.length=Me.length}function V(Me,re){this.id=typeof Me.id=="number"?Me.id:void 0,this.type=Me.type,this.rawGeometry=Me.type===1?[Me.geometry]:Me.geometry,this.properties=Me.tags,this.extent=re||4096}X.prototype.feature=function(Me){return new V(this.features[Me],this.options.extent)},V.prototype.loadGeometry=function(){var Me=this.rawGeometry;this.geometry=[];for(var re=0;re<Me.length;re++){for(var ce=Me[re],ge=[],Ie=0;Ie<ce.length;Ie++)ge.push(new W(ce[Ie][0],ce[Ie][1]));this.geometry.push(ge)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Me=this.geometry,re=1/0,ce=-1/0,ge=1/0,Ie=-1/0,Ne=0;Ne<Me.length;Ne++)for(var Le=Me[Ne],$e=0;$e<Le.length;$e++){var Fe=Le[$e];re=Math.min(re,Fe.x),ce=Math.max(ce,Fe.x),ge=Math.min(ge,Fe.y),Ie=Math.max(Ie,Fe.y)}return[re,ge,ce,Ie]},V.prototype.toGeoJSON=$.prototype.toGeoJSON;var E=f.bw,j=ie;function B(Me){var re=new E;return function(ce,ge){for(var Ie in ce.layers)ge.writeMessage(3,ee,ce.layers[Ie])}(Me,re),re.finish()}function ee(Me,re){var ce;re.writeVarintField(15,Me.version||1),re.writeStringField(1,Me.name||""),re.writeVarintField(5,Me.extent||4096);var ge={keys:[],values:[],keycache:{},valuecache:{}};for(ce=0;ce<Me.length;ce++)ge.feature=Me.feature(ce),re.writeMessage(2,q,ge);var Ie=ge.keys;for(ce=0;ce<Ie.length;ce++)re.writeStringField(3,Ie[ce]);var Ne=ge.values;for(ce=0;ce<Ne.length;ce++)re.writeMessage(4,le,Ne[ce])}function q(Me,re){var ce=Me.feature;ce.id!==void 0&&re.writeVarintField(1,ce.id),re.writeMessage(2,me,Me),re.writeVarintField(3,ce.type),re.writeMessage(4,oe,ce)}function me(Me,re){var ce=Me.feature,ge=Me.keys,Ie=Me.values,Ne=Me.keycache,Le=Me.valuecache;for(var $e in ce.properties){var Fe=ce.properties[$e],Ye=Ne[$e];if(Fe!==null){Ye===void 0&&(ge.push($e),Ne[$e]=Ye=ge.length-1),re.writeVarint(Ye);var dt=typeof Fe;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(Fe=JSON.stringify(Fe));var ut=dt+":"+Fe,ft=Le[ut];ft===void 0&&(Ie.push(Fe),Le[ut]=ft=Ie.length-1),re.writeVarint(ft)}}}function _e(Me,re){return(re<<3)+(7&Me)}function de(Me){return Me<<1^Me>>31}function oe(Me,re){for(var ce=Me.loadGeometry(),ge=Me.type,Ie=0,Ne=0,Le=ce.length,$e=0;$e<Le;$e++){var Fe=ce[$e],Ye=1;ge===1&&(Ye=Fe.length),re.writeVarint(_e(1,Ye));for(var dt=ge===3?Fe.length-1:Fe.length,ut=0;ut<dt;ut++){ut===1&&ge!==1&&re.writeVarint(_e(2,dt-1));var ft=Fe[ut].x-Ie,Yt=Fe[ut].y-Ne;re.writeVarint(de(ft)),re.writeVarint(de(Yt)),Ie+=ft,Ne+=Yt}ge===3&&re.writeVarint(_e(7,1))}}function le(Me,re){var ce=typeof Me;ce==="string"?re.writeStringField(1,Me):ce==="boolean"?re.writeBooleanField(7,Me):ce==="number"&&(Me%1!=0?re.writeDoubleField(3,Me):Me<0?re.writeSVarintField(6,Me):re.writeVarintField(5,Me))}K.exports=B,K.exports.fromVectorTileJs=B,K.exports.fromGeojsonVt=function(Me,re){re=re||{};var ce={};for(var ge in Me)ce[ge]=new j(Me[ge].features,re),ce[ge].name=ge,ce[ge].version=re.version,ce[ge].extent=re.extent;return B({layers:ce})},K.exports.GeoJSONWrapper=j;var Q=f.bu(K.exports);const te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Me=>Me},he=Math.fround||(be=new Float32Array(1),Me=>(be[0]=+Me,be[0]));var be;const Ee=3,Be=5,ke=6;class ze{constructor(re){this.options=Object.assign(Object.create(te),re),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(re){const{log:ce,minZoom:ge,maxZoom:Ie}=this.options;ce&&console.time("total time");const Ne=`prepare ${re.length} points`;ce&&console.time(Ne),this.points=re;const Le=[];for(let Fe=0;Fe<re.length;Fe++){const Ye=re[Fe];if(!Ye.geometry)continue;const[dt,ut]=Ye.geometry.coordinates,ft=he(rt(dt)),Yt=he(ht(ut));Le.push(ft,Yt,1/0,Fe,-1,1),this.options.reduce&&Le.push(0)}let $e=this.trees[Ie+1]=this._createTree(Le);ce&&console.timeEnd(Ne);for(let Fe=Ie;Fe>=ge;Fe--){const Ye=+Date.now();$e=this.trees[Fe]=this._createTree(this._cluster($e,Fe)),ce&&console.log("z%d: %d clusters in %dms",Fe,$e.numItems,+Date.now()-Ye)}return ce&&console.timeEnd("total time"),this}getClusters(re,ce){let ge=((re[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,re[1]));let Ne=re[2]===180?180:((re[2]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,re[3]));if(re[2]-re[0]>=360)ge=-180,Ne=180;else if(ge>Ne){const ut=this.getClusters([ge,Ie,180,Le],ce),ft=this.getClusters([-180,Ie,Ne,Le],ce);return ut.concat(ft)}const $e=this.trees[this._limitZoom(ce)],Fe=$e.range(rt(ge),ht(Le),rt(Ne),ht(Ie)),Ye=$e.data,dt=[];for(const ut of Fe){const ft=this.stride*ut;dt.push(Ye[ft+Be]>1?We(Ye,ft,this.clusterProps):this.points[Ye[ft+Ee]])}return dt}getChildren(re){const ce=this._getOriginId(re),ge=this._getOriginZoom(re),Ie="No cluster with the specified id.",Ne=this.trees[ge];if(!Ne)throw new Error(Ie);const Le=Ne.data;if(ce*this.stride>=Le.length)throw new Error(Ie);const $e=this.options.radius/(this.options.extent*Math.pow(2,ge-1)),Fe=Ne.within(Le[ce*this.stride],Le[ce*this.stride+1],$e),Ye=[];for(const dt of Fe){const ut=dt*this.stride;Le[ut+4]===re&&Ye.push(Le[ut+Be]>1?We(Le,ut,this.clusterProps):this.points[Le[ut+Ee]])}if(Ye.length===0)throw new Error(Ie);return Ye}getLeaves(re,ce,ge){const Ie=[];return this._appendLeaves(Ie,re,ce=ce||10,ge=ge||0,0),Ie}getTile(re,ce,ge){const Ie=this.trees[this._limitZoom(re)],Ne=Math.pow(2,re),{extent:Le,radius:$e}=this.options,Fe=$e/Le,Ye=(ge-Fe)/Ne,dt=(ge+1+Fe)/Ne,ut={features:[]};return this._addTileFeatures(Ie.range((ce-Fe)/Ne,Ye,(ce+1+Fe)/Ne,dt),Ie.data,ce,ge,Ne,ut),ce===0&&this._addTileFeatures(Ie.range(1-Fe/Ne,Ye,1,dt),Ie.data,Ne,ge,Ne,ut),ce===Ne-1&&this._addTileFeatures(Ie.range(0,Ye,Fe/Ne,dt),Ie.data,-1,ge,Ne,ut),ut.features.length?ut:null}getClusterExpansionZoom(re){let ce=this._getOriginZoom(re)-1;for(;ce<=this.options.maxZoom;){const ge=this.getChildren(re);if(ce++,ge.length!==1)break;re=ge[0].properties.cluster_id}return ce}_appendLeaves(re,ce,ge,Ie,Ne){const Le=this.getChildren(ce);for(const $e of Le){const Fe=$e.properties;if(Fe&&Fe.cluster?Ne+Fe.point_count<=Ie?Ne+=Fe.point_count:Ne=this._appendLeaves(re,Fe.cluster_id,ge,Ie,Ne):Ne<Ie?Ne++:re.push($e),re.length===ge)break}return Ne}_createTree(re){const ce=new f.au(re.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ge=0;ge<re.length;ge+=this.stride)ce.add(re[ge],re[ge+1]);return ce.finish(),ce.data=re,ce}_addTileFeatures(re,ce,ge,Ie,Ne,Le){for(const $e of re){const Fe=$e*this.stride,Ye=ce[Fe+Be]>1;let dt,ut,ft;if(Ye)dt=He(ce,Fe,this.clusterProps),ut=ce[Fe],ft=ce[Fe+1];else{const gn=this.points[ce[Fe+Ee]];dt=gn.properties;const[dn,wn]=gn.geometry.coordinates;ut=rt(dn),ft=ht(wn)}const Yt={type:1,geometry:[[Math.round(this.options.extent*(ut*Ne-ge)),Math.round(this.options.extent*(ft*Ne-Ie))]],tags:dt};let tn;tn=Ye||this.options.generateId?ce[Fe+Ee]:this.points[ce[Fe+Ee]].id,tn!==void 0&&(Yt.id=tn),Le.features.push(Yt)}}_limitZoom(re){return Math.max(this.options.minZoom,Math.min(Math.floor(+re),this.options.maxZoom+1))}_cluster(re,ce){const{radius:ge,extent:Ie,reduce:Ne,minPoints:Le}=this.options,$e=ge/(Ie*Math.pow(2,ce)),Fe=re.data,Ye=[],dt=this.stride;for(let ut=0;ut<Fe.length;ut+=dt){if(Fe[ut+2]<=ce)continue;Fe[ut+2]=ce;const ft=Fe[ut],Yt=Fe[ut+1],tn=re.within(Fe[ut],Fe[ut+1],$e),gn=Fe[ut+Be];let dn=gn;for(const wn of tn){const jn=wn*dt;Fe[jn+2]>ce&&(dn+=Fe[jn+Be])}if(dn>gn&&dn>=Le){let wn,jn=ft*gn,Hn=Yt*gn,ur=-1;const fn=((ut/dt|0)<<5)+(ce+1)+this.points.length;for(const sr of tn){const wr=sr*dt;if(Fe[wr+2]<=ce)continue;Fe[wr+2]=ce;const ni=Fe[wr+Be];jn+=Fe[wr]*ni,Hn+=Fe[wr+1]*ni,Fe[wr+4]=fn,Ne&&(wn||(wn=this._map(Fe,ut,!0),ur=this.clusterProps.length,this.clusterProps.push(wn)),Ne(wn,this._map(Fe,wr)))}Fe[ut+4]=fn,Ye.push(jn/dn,Hn/dn,1/0,fn,-1,dn),Ne&&Ye.push(ur)}else{for(let wn=0;wn<dt;wn++)Ye.push(Fe[ut+wn]);if(dn>1)for(const wn of tn){const jn=wn*dt;if(!(Fe[jn+2]<=ce)){Fe[jn+2]=ce;for(let Hn=0;Hn<dt;Hn++)Ye.push(Fe[jn+Hn])}}}}return Ye}_getOriginId(re){return re-this.points.length>>5}_getOriginZoom(re){return(re-this.points.length)%32}_map(re,ce,ge){if(re[ce+Be]>1){const Le=this.clusterProps[re[ce+ke]];return ge?Object.assign({},Le):Le}const Ie=this.points[re[ce+Ee]].properties,Ne=this.options.map(Ie);return ge&&Ne===Ie?Object.assign({},Ne):Ne}}function We(Me,re,ce){return{type:"Feature",id:Me[re+Ee],properties:He(Me,re,ce),geometry:{type:"Point",coordinates:[(ge=Me[re],360*(ge-.5)),wt(Me[re+1])]}};var ge}function He(Me,re,ce){const ge=Me[re+Be],Ie=ge>=1e4?`${Math.round(ge/1e3)}k`:ge>=1e3?Math.round(ge/100)/10+"k":ge,Ne=Me[re+ke],Le=Ne===-1?{}:Object.assign({},ce[Ne]);return Object.assign(Le,{cluster:!0,cluster_id:Me[re+Ee],point_count:ge,point_count_abbreviated:Ie})}function rt(Me){return Me/360+.5}function ht(Me){const re=Math.sin(Me*Math.PI/180),ce=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ce<0?0:ce>1?1:ce}function wt(Me){const re=(180-360*Me)*Math.PI/180;return 360*Math.atan(Math.exp(re))/Math.PI-90}function Mt(Me,re,ce,ge){for(var Ie,Ne=ge,Le=ce-re>>1,$e=ce-re,Fe=Me[re],Ye=Me[re+1],dt=Me[ce],ut=Me[ce+1],ft=re+3;ft<ce;ft+=3){var Yt=gt(Me[ft],Me[ft+1],Fe,Ye,dt,ut);if(Yt>Ne)Ie=ft,Ne=Yt;else if(Yt===Ne){var tn=Math.abs(ft-Le);tn<$e&&(Ie=ft,$e=tn)}}Ne>ge&&(Ie-re>3&&Mt(Me,re,Ie,ge),Me[Ie+2]=Ne,ce-Ie>3&&Mt(Me,Ie,ce,ge))}function gt(Me,re,ce,ge,Ie,Ne){var Le=Ie-ce,$e=Ne-ge;if(Le!==0||$e!==0){var Fe=((Me-ce)*Le+(re-ge)*$e)/(Le*Le+$e*$e);Fe>1?(ce=Ie,ge=Ne):Fe>0&&(ce+=Le*Fe,ge+=$e*Fe)}return(Le=Me-ce)*Le+($e=re-ge)*$e}function Et(Me,re,ce,ge){var Ie={id:Me===void 0?null:Me,type:re,geometry:ce,tags:ge,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ne){var Le=Ne.geometry,$e=Ne.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")$t(Ne,Le);else if($e==="Polygon"||$e==="MultiLineString")for(var Fe=0;Fe<Le.length;Fe++)$t(Ne,Le[Fe]);else if($e==="MultiPolygon")for(Fe=0;Fe<Le.length;Fe++)for(var Ye=0;Ye<Le[Fe].length;Ye++)$t(Ne,Le[Fe][Ye])}(Ie),Ie}function $t(Me,re){for(var ce=0;ce<re.length;ce+=3)Me.minX=Math.min(Me.minX,re[ce]),Me.minY=Math.min(Me.minY,re[ce+1]),Me.maxX=Math.max(Me.maxX,re[ce]),Me.maxY=Math.max(Me.maxY,re[ce+1])}function Ht(Me,re,ce,ge){if(re.geometry){var Ie=re.geometry.coordinates,Ne=re.geometry.type,Le=Math.pow(ce.tolerance/((1<<ce.maxZoom)*ce.extent),2),$e=[],Fe=re.id;if(ce.promoteId?Fe=re.properties[ce.promoteId]:ce.generateId&&(Fe=ge||0),Ne==="Point")qt(Ie,$e);else if(Ne==="MultiPoint")for(var Ye=0;Ye<Ie.length;Ye++)qt(Ie[Ye],$e);else if(Ne==="LineString")bn(Ie,$e,Le,!1);else if(Ne==="MultiLineString"){if(ce.lineMetrics){for(Ye=0;Ye<Ie.length;Ye++)bn(Ie[Ye],$e=[],Le,!1),Me.push(Et(Fe,"LineString",$e,re.properties));return}et(Ie,$e,Le,!1)}else if(Ne==="Polygon")et(Ie,$e,Le,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(Ye=0;Ye<re.geometry.geometries.length;Ye++)Ht(Me,{id:Fe,geometry:re.geometry.geometries[Ye],properties:re.properties},ce,ge);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<Ie.length;Ye++){var dt=[];et(Ie[Ye],dt,Le,!0),$e.push(dt)}}Me.push(Et(Fe,Ne,$e,re.properties))}}function qt(Me,re){re.push(hn(Me[0])),re.push(xn(Me[1])),re.push(0)}function bn(Me,re,ce,ge){for(var Ie,Ne,Le=0,$e=0;$e<Me.length;$e++){var Fe=hn(Me[$e][0]),Ye=xn(Me[$e][1]);re.push(Fe),re.push(Ye),re.push(0),$e>0&&(Le+=ge?(Ie*Ye-Fe*Ne)/2:Math.sqrt(Math.pow(Fe-Ie,2)+Math.pow(Ye-Ne,2))),Ie=Fe,Ne=Ye}var dt=re.length-3;re[2]=1,Mt(re,0,dt,ce),re[dt+2]=1,re.size=Math.abs(Le),re.start=0,re.end=re.size}function et(Me,re,ce,ge){for(var Ie=0;Ie<Me.length;Ie++){var Ne=[];bn(Me[Ie],Ne,ce,ge),re.push(Ne)}}function hn(Me){return Me/360+.5}function xn(Me){var re=Math.sin(Me*Math.PI/180),ce=.5-.25*Math.log((1+re)/(1-re))/Math.PI;return ce<0?0:ce>1?1:ce}function we(Me,re,ce,ge,Ie,Ne,Le,$e){if(ge/=re,Ne>=(ce/=re)&&Le<ge)return Me;if(Le<ce||Ne>=ge)return null;for(var Fe=[],Ye=0;Ye<Me.length;Ye++){var dt=Me[Ye],ut=dt.geometry,ft=dt.type,Yt=Ie===0?dt.minX:dt.minY,tn=Ie===0?dt.maxX:dt.maxY;if(Yt>=ce&&tn<ge)Fe.push(dt);else if(!(tn<ce||Yt>=ge)){var gn=[];if(ft==="Point"||ft==="MultiPoint")N(ut,gn,ce,ge,Ie);else if(ft==="LineString")D(ut,gn,ce,ge,Ie,!1,$e.lineMetrics);else if(ft==="MultiLineString")Ze(ut,gn,ce,ge,Ie,!1);else if(ft==="Polygon")Ze(ut,gn,ce,ge,Ie,!0);else if(ft==="MultiPolygon")for(var dn=0;dn<ut.length;dn++){var wn=[];Ze(ut[dn],wn,ce,ge,Ie,!0),wn.length&&gn.push(wn)}if(gn.length){if($e.lineMetrics&&ft==="LineString"){for(dn=0;dn<gn.length;dn++)Fe.push(Et(dt.id,ft,gn[dn],dt.tags));continue}ft!=="LineString"&&ft!=="MultiLineString"||(gn.length===1?(ft="LineString",gn=gn[0]):ft="MultiLineString"),ft!=="Point"&&ft!=="MultiPoint"||(ft=gn.length===3?"Point":"MultiPoint"),Fe.push(Et(dt.id,ft,gn,dt.tags))}}}return Fe.length?Fe:null}function N(Me,re,ce,ge,Ie){for(var Ne=0;Ne<Me.length;Ne+=3){var Le=Me[Ne+Ie];Le>=ce&&Le<=ge&&(re.push(Me[Ne]),re.push(Me[Ne+1]),re.push(Me[Ne+2]))}}function D(Me,re,ce,ge,Ie,Ne,Le){for(var $e,Fe,Ye=xe(Me),dt=Ie===0?ct:ae,ut=Me.start,ft=0;ft<Me.length-3;ft+=3){var Yt=Me[ft],tn=Me[ft+1],gn=Me[ft+2],dn=Me[ft+3],wn=Me[ft+4],jn=Ie===0?Yt:tn,Hn=Ie===0?dn:wn,ur=!1;Le&&($e=Math.sqrt(Math.pow(Yt-dn,2)+Math.pow(tn-wn,2))),jn<ce?Hn>ce&&(Fe=dt(Ye,Yt,tn,dn,wn,ce),Le&&(Ye.start=ut+$e*Fe)):jn>ge?Hn<ge&&(Fe=dt(Ye,Yt,tn,dn,wn,ge),Le&&(Ye.start=ut+$e*Fe)):Qe(Ye,Yt,tn,gn),Hn<ce&&jn>=ce&&(Fe=dt(Ye,Yt,tn,dn,wn,ce),ur=!0),Hn>ge&&jn<=ge&&(Fe=dt(Ye,Yt,tn,dn,wn,ge),ur=!0),!Ne&&ur&&(Le&&(Ye.end=ut+$e*Fe),re.push(Ye),Ye=xe(Me)),Le&&(ut+=$e)}var fn=Me.length-3;Yt=Me[fn],tn=Me[fn+1],gn=Me[fn+2],(jn=Ie===0?Yt:tn)>=ce&&jn<=ge&&Qe(Ye,Yt,tn,gn),fn=Ye.length-3,Ne&&fn>=3&&(Ye[fn]!==Ye[0]||Ye[fn+1]!==Ye[1])&&Qe(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&re.push(Ye)}function xe(Me){var re=[];return re.size=Me.size,re.start=Me.start,re.end=Me.end,re}function Ze(Me,re,ce,ge,Ie,Ne){for(var Le=0;Le<Me.length;Le++)D(Me[Le],re,ce,ge,Ie,Ne,!1)}function Qe(Me,re,ce,ge){Me.push(re),Me.push(ce),Me.push(ge)}function ct(Me,re,ce,ge,Ie,Ne){var Le=(Ne-re)/(ge-re);return Me.push(Ne),Me.push(ce+(Ie-ce)*Le),Me.push(1),Le}function ae(Me,re,ce,ge,Ie,Ne){var Le=(Ne-ce)/(Ie-ce);return Me.push(re+(ge-re)*Le),Me.push(Ne),Me.push(1),Le}function R(Me,re){for(var ce=[],ge=0;ge<Me.length;ge++){var Ie,Ne=Me[ge],Le=Ne.type;if(Le==="Point"||Le==="MultiPoint"||Le==="LineString")Ie=z(Ne.geometry,re);else if(Le==="MultiLineString"||Le==="Polygon"){Ie=[];for(var $e=0;$e<Ne.geometry.length;$e++)Ie.push(z(Ne.geometry[$e],re))}else if(Le==="MultiPolygon")for(Ie=[],$e=0;$e<Ne.geometry.length;$e++){for(var Fe=[],Ye=0;Ye<Ne.geometry[$e].length;Ye++)Fe.push(z(Ne.geometry[$e][Ye],re));Ie.push(Fe)}ce.push(Et(Ne.id,Le,Ie,Ne.tags))}return ce}function z(Me,re){var ce=[];ce.size=Me.size,Me.start!==void 0&&(ce.start=Me.start,ce.end=Me.end);for(var ge=0;ge<Me.length;ge+=3)ce.push(Me[ge]+re,Me[ge+1],Me[ge+2]);return ce}function Se(Me,re){if(Me.transformed)return Me;var ce,ge,Ie,Ne=1<<Me.z,Le=Me.x,$e=Me.y;for(ce=0;ce<Me.features.length;ce++){var Fe=Me.features[ce],Ye=Fe.geometry,dt=Fe.type;if(Fe.geometry=[],dt===1)for(ge=0;ge<Ye.length;ge+=2)Fe.geometry.push(Ve(Ye[ge],Ye[ge+1],re,Ne,Le,$e));else for(ge=0;ge<Ye.length;ge++){var ut=[];for(Ie=0;Ie<Ye[ge].length;Ie+=2)ut.push(Ve(Ye[ge][Ie],Ye[ge][Ie+1],re,Ne,Le,$e));Fe.geometry.push(ut)}}return Me.transformed=!0,Me}function Ve(Me,re,ce,ge,Ie,Ne){return[Math.round(ce*(Me*ge-Ie)),Math.round(ce*(re*ge-Ne))]}function nt(Me,re,ce,ge,Ie){for(var Ne=re===Ie.maxZoom?0:Ie.tolerance/((1<<re)*Ie.extent),Le={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ce,y:ge,z:re,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<Me.length;$e++){Le.numFeatures++,ot(Le,Me[$e],Ne,Ie);var Fe=Me[$e].minX,Ye=Me[$e].minY,dt=Me[$e].maxX,ut=Me[$e].maxY;Fe<Le.minX&&(Le.minX=Fe),Ye<Le.minY&&(Le.minY=Ye),dt>Le.maxX&&(Le.maxX=dt),ut>Le.maxY&&(Le.maxY=ut)}return Le}function ot(Me,re,ce,ge){var Ie=re.geometry,Ne=re.type,Le=[];if(Ne==="Point"||Ne==="MultiPoint")for(var $e=0;$e<Ie.length;$e+=3)Le.push(Ie[$e]),Le.push(Ie[$e+1]),Me.numPoints++,Me.numSimplified++;else if(Ne==="LineString")lt(Le,Ie,Me,ce,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for($e=0;$e<Ie.length;$e++)lt(Le,Ie[$e],Me,ce,Ne==="Polygon",$e===0);else if(Ne==="MultiPolygon")for(var Fe=0;Fe<Ie.length;Fe++){var Ye=Ie[Fe];for($e=0;$e<Ye.length;$e++)lt(Le,Ye[$e],Me,ce,!0,$e===0)}if(Le.length){var dt=re.tags||null;if(Ne==="LineString"&&ge.lineMetrics){for(var ut in dt={},re.tags)dt[ut]=re.tags[ut];dt.mapbox_clip_start=Ie.start/Ie.size,dt.mapbox_clip_end=Ie.end/Ie.size}var ft={geometry:Le,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:dt};re.id!==null&&(ft.id=re.id),Me.features.push(ft)}}function lt(Me,re,ce,ge,Ie,Ne){var Le=ge*ge;if(ge>0&&re.size<(Ie?Le:ge))ce.numPoints+=re.length/3;else{for(var $e=[],Fe=0;Fe<re.length;Fe+=3)(ge===0||re[Fe+2]>Le)&&(ce.numSimplified++,$e.push(re[Fe]),$e.push(re[Fe+1])),ce.numPoints++;Ie&&function(Ye,dt){for(var ut=0,ft=0,Yt=Ye.length,tn=Yt-2;ft<Yt;tn=ft,ft+=2)ut+=(Ye[ft]-Ye[tn])*(Ye[ft+1]+Ye[tn+1]);if(ut>0===dt)for(ft=0,Yt=Ye.length;ft<Yt/2;ft+=2){var gn=Ye[ft],dn=Ye[ft+1];Ye[ft]=Ye[Yt-2-ft],Ye[ft+1]=Ye[Yt-1-ft],Ye[Yt-2-ft]=gn,Ye[Yt-1-ft]=dn}}($e,Ne),Me.push($e)}}function Dt(Me,re){var ce=(re=this.options=function(Ie,Ne){for(var Le in Ne)Ie[Le]=Ne[Le];return Ie}(Object.create(this.options),re)).debug;if(ce&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");var ge=function(Ie,Ne){var Le=[];if(Ie.type==="FeatureCollection")for(var $e=0;$e<Ie.features.length;$e++)Ht(Le,Ie.features[$e],Ne,$e);else Ht(Le,Ie.type==="Feature"?Ie:{geometry:Ie},Ne);return Le}(Me,re);this.tiles={},this.tileCoords=[],ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(Ie,Ne){var Le=Ne.buffer/Ne.extent,$e=Ie,Fe=we(Ie,1,-1-Le,Le,0,-1,2,Ne),Ye=we(Ie,1,1-Le,2+Le,0,-1,2,Ne);return(Fe||Ye)&&($e=we(Ie,1,-Le,1+Le,0,-1,2,Ne)||[],Fe&&($e=R(Fe,1).concat($e)),Ye&&($e=$e.concat(R(Ye,-1)))),$e}(ge,re),ge.length&&this.splitTile(ge,0,0,0),ce&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ft(Me,re,ce){return 32*((1<<Me)*ce+re)+Me}function yn(Me,re){return re?Me.properties[re]:Me.id}function vn(Me,re){if(Me==null)return!0;if(Me.type==="Feature")return yn(Me,re)!=null;if(Me.type==="FeatureCollection"){const ce=new Set;for(const ge of Me.features){const Ie=yn(ge,re);if(Ie==null||ce.has(Ie))return!1;ce.add(Ie)}return!0}return!1}function un(Me,re){const ce=new Map;if(Me!=null)if(Me.type==="Feature")ce.set(yn(Me,re),Me);else for(const ge of Me.features)ce.set(yn(ge,re),ge);return ce}Dt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Dt.prototype.splitTile=function(Me,re,ce,ge,Ie,Ne,Le){for(var $e=[Me,re,ce,ge],Fe=this.options,Ye=Fe.debug;$e.length;){ge=$e.pop(),ce=$e.pop(),re=$e.pop(),Me=$e.pop();var dt=1<<re,ut=Ft(re,ce,ge),ft=this.tiles[ut];if(!ft&&(Ye>1&&console.time("creation"),ft=this.tiles[ut]=nt(Me,re,ce,ge,Fe),this.tileCoords.push({z:re,x:ce,y:ge}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,ce,ge,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));var Yt="z"+re;this.stats[Yt]=(this.stats[Yt]||0)+1,this.total++}if(ft.source=Me,Ie){if(re===Fe.maxZoom||re===Ie)continue;var tn=1<<Ie-re;if(ce!==Math.floor(Ne/tn)||ge!==Math.floor(Le/tn))continue}else if(re===Fe.indexMaxZoom||ft.numPoints<=Fe.indexMaxPoints)continue;if(ft.source=null,Me.length!==0){Ye>1&&console.time("clipping");var gn,dn,wn,jn,Hn,ur,fn=.5*Fe.buffer/Fe.extent,sr=.5-fn,wr=.5+fn,ni=1+fn;gn=dn=wn=jn=null,Hn=we(Me,dt,ce-fn,ce+wr,0,ft.minX,ft.maxX,Fe),ur=we(Me,dt,ce+sr,ce+ni,0,ft.minX,ft.maxX,Fe),Me=null,Hn&&(gn=we(Hn,dt,ge-fn,ge+wr,1,ft.minY,ft.maxY,Fe),dn=we(Hn,dt,ge+sr,ge+ni,1,ft.minY,ft.maxY,Fe),Hn=null),ur&&(wn=we(ur,dt,ge-fn,ge+wr,1,ft.minY,ft.maxY,Fe),jn=we(ur,dt,ge+sr,ge+ni,1,ft.minY,ft.maxY,Fe),ur=null),Ye>1&&console.timeEnd("clipping"),$e.push(gn||[],re+1,2*ce,2*ge),$e.push(dn||[],re+1,2*ce,2*ge+1),$e.push(wn||[],re+1,2*ce+1,2*ge),$e.push(jn||[],re+1,2*ce+1,2*ge+1)}}},Dt.prototype.getTile=function(Me,re,ce){var ge=this.options,Ie=ge.extent,Ne=ge.debug;if(Me<0||Me>24)return null;var Le=1<<Me,$e=Ft(Me,re=(re%Le+Le)%Le,ce);if(this.tiles[$e])return Se(this.tiles[$e],Ie);Ne>1&&console.log("drilling down to z%d-%d-%d",Me,re,ce);for(var Fe,Ye=Me,dt=re,ut=ce;!Fe&&Ye>0;)Ye--,dt=Math.floor(dt/2),ut=Math.floor(ut/2),Fe=this.tiles[Ft(Ye,dt,ut)];return Fe&&Fe.source?(Ne>1&&console.log("found parent tile z%d-%d-%d",Ye,dt,ut),Ne>1&&console.time("drilling down"),this.splitTile(Fe.source,Ye,dt,ut,Me,re,ce),Ne>1&&console.timeEnd("drilling down"),this.tiles[$e]?Se(this.tiles[$e],Ie):null):null};class Oi extends w{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(re,ce){return f._(this,void 0,void 0,function*(){const ge=re.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Ie)return null;const Ne=new class{constructor($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.W,this.length=$e.length,this._features=$e}feature($e){return new class{constructor(Fe){this._feature=Fe,this.extent=f.W,this.type=Fe.type,this.properties=Fe.tags,"id"in Fe&&!isNaN(Fe.id)&&(this.id=parseInt(Fe.id,10))}loadGeometry(){if(this._feature.type===1){const Fe=[];for(const Ye of this._feature.geometry)Fe.push([new f.P(Ye[0],Ye[1])]);return Fe}{const Fe=[];for(const Ye of this._feature.geometry){const dt=[];for(const ut of Ye)dt.push(new f.P(ut[0],ut[1]));Fe.push(dt)}return Fe}}toGeoJSON(Fe,Ye,dt){return ue.call(this,Fe,Ye,dt)}}(this._features[$e])}}(Ie.features);let Le=Q(Ne);return Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),{vectorTile:Ne,rawData:Le.buffer}})}loadData(re){var ce;return f._(this,void 0,void 0,function*(){(ce=this._pendingRequest)===null||ce===void 0||ce.abort();const ge=!!(re&&re.request&&re.request.collectResourceTiming)&&new f.br(re.request);this._pendingRequest=new AbortController;try{let Ie=yield this.loadGeoJSON(re,this._pendingRequest);if(delete this._pendingRequest,typeof Ie!="object")throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(F(Ie,!0),re.filter){const Le=f.bx(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map(Fe=>`${Fe.key}: ${Fe.message}`).join(", "));Ie={type:"FeatureCollection",features:Ie.features.filter(Fe=>Le.value.evaluate({zoom:0},Fe))}}this._geoJSONIndex=re.cluster?new ze(function({superclusterOptions:Le,clusterProperties:$e}){if(!$e||!Le)return Le;const Fe={},Ye={},dt={accumulated:null,zoom:0},ut={properties:null},ft=Object.keys($e);for(const Yt of ft){const[tn,gn]=$e[Yt],dn=f.bx(gn),wn=f.bx(typeof tn=="string"?[tn,["accumulated"],["get",Yt]]:tn);Fe[Yt]=dn.value,Ye[Yt]=wn.value}return Le.map=Yt=>{ut.properties=Yt;const tn={};for(const gn of ft)tn[gn]=Fe[gn].evaluate(dt,ut);return tn},Le.reduce=(Yt,tn)=>{ut.properties=tn;for(const gn of ft)dt.accumulated=Yt[gn],Yt[gn]=Ye[gn].evaluate(dt,ut)},Le}(re)).load(Ie.features):function(Le,$e){return new Dt(Le,$e)}(Ie,re.geojsonVtOptions),this.loaded={};const Ne={};if(ge){const Le=ge.finish();Le&&(Ne.resourceTiming={},Ne.resourceTiming[re.source]=JSON.parse(JSON.stringify(Le)))}return Ne}catch(Ie){if(delete this._pendingRequest,f.by(Ie))return{abandoned:!0};throw Ie}})}reloadTile(re){const ce=this.loaded;return ce&&ce[re.uid]?super.reloadTile(re):this.loadTile(re)}loadGeoJSON(re,ce){return f._(this,void 0,void 0,function*(){const{promoteId:ge}=re;if(re.request){const Ie=yield f.h(re.request,ce);return this._dataUpdateable=vn(Ie.data,ge)?un(Ie.data,ge):void 0,Ie.data}if(typeof re.data=="string")try{const Ie=JSON.parse(re.data);return this._dataUpdateable=vn(Ie,ge)?un(Ie,ge):void 0,Ie}catch{throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`)}if(!re.dataDiff)throw new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${re.source}`);return function(Ie,Ne,Le){var $e,Fe,Ye,dt;if(Ne.removeAll&&Ie.clear(),Ne.remove)for(const ut of Ne.remove)Ie.delete(ut);if(Ne.add)for(const ut of Ne.add){const ft=yn(ut,Le);ft!=null&&Ie.set(ft,ut)}if(Ne.update)for(const ut of Ne.update){let ft=Ie.get(ut.id);if(ft==null)continue;const Yt=!ut.removeAllProperties&&((($e=ut.removeProperties)===null||$e===void 0?void 0:$e.length)>0||((Fe=ut.addOrUpdateProperties)===null||Fe===void 0?void 0:Fe.length)>0);if((ut.newGeometry||ut.removeAllProperties||Yt)&&(ft=Object.assign({},ft),Ie.set(ut.id,ft),Yt&&(ft.properties=Object.assign({},ft.properties))),ut.newGeometry&&(ft.geometry=ut.newGeometry),ut.removeAllProperties)ft.properties={};else if(((Ye=ut.removeProperties)===null||Ye===void 0?void 0:Ye.length)>0)for(const tn of ut.removeProperties)Object.prototype.hasOwnProperty.call(ft.properties,tn)&&delete ft.properties[tn];if(((dt=ut.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:tn,value:gn}of ut.addOrUpdateProperties)ft.properties[tn]=gn}}(this._dataUpdateable,re.dataDiff,ge),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(re){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(re){return this._geoJSONIndex.getClusterExpansionZoom(re.clusterId)}getClusterChildren(re){return this._geoJSONIndex.getChildren(re.clusterId)}getClusterLeaves(re){return this._geoJSONIndex.getLeaves(re.clusterId,re.limit,re.offset)}}class or{constructor(re){this.self=re,this.actor=new f.C(re),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ce,ge)=>{if(this.externalWorkerSourceTypes[ce])throw new Error(`Worker source with name "${ce}" already registered.`);this.externalWorkerSourceTypes[ce]=ge},this.self.addProtocol=f.be,this.self.removeProtocol=f.bf,this.self.registerRTLTextPlugin=ce=>{if(f.bz.isParsed())throw new Error("RTL text plugin already registered.");f.bz.setMethods(ce)},this.actor.registerMessageHandler("loadDEMTile",(ce,ge)=>this._getDEMWorkerSource(ce,ge.source).loadTile(ge)),this.actor.registerMessageHandler("removeDEMTile",(ce,ge)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ce,ge.source).removeTile(ge)})),this.actor.registerMessageHandler("getClusterExpansionZoom",(ce,ge)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,ge.type,ge.source).getClusterExpansionZoom(ge)})),this.actor.registerMessageHandler("getClusterChildren",(ce,ge)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,ge.type,ge.source).getClusterChildren(ge)})),this.actor.registerMessageHandler("getClusterLeaves",(ce,ge)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(ce,ge.type,ge.source).getClusterLeaves(ge)})),this.actor.registerMessageHandler("loadData",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).loadData(ge)),this.actor.registerMessageHandler("loadTile",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).loadTile(ge)),this.actor.registerMessageHandler("reloadTile",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).reloadTile(ge)),this.actor.registerMessageHandler("abortTile",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).abortTile(ge)),this.actor.registerMessageHandler("removeTile",(ce,ge)=>this._getWorkerSource(ce,ge.type,ge.source).removeTile(ge)),this.actor.registerMessageHandler("removeSource",(ce,ge)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[ce]||!this.workerSources[ce][ge.type]||!this.workerSources[ce][ge.type][ge.source])return;const Ie=this.workerSources[ce][ge.type][ge.source];delete this.workerSources[ce][ge.type][ge.source],Ie.removeSource!==void 0&&Ie.removeSource(ge)})),this.actor.registerMessageHandler("setReferrer",(ce,ge)=>f._(this,void 0,void 0,function*(){this.referrer=ge})),this.actor.registerMessageHandler("syncRTLPluginState",(ce,ge)=>this._syncRTLPluginState(ce,ge)),this.actor.registerMessageHandler("importScript",(ce,ge)=>f._(this,void 0,void 0,function*(){this.self.importScripts(ge)})),this.actor.registerMessageHandler("setImages",(ce,ge)=>this._setImages(ce,ge)),this.actor.registerMessageHandler("updateLayers",(ce,ge)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(ce).update(ge.layers,ge.removedIds)})),this.actor.registerMessageHandler("setLayers",(ce,ge)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(ce).replace(ge)}))}_setImages(re,ce){return f._(this,void 0,void 0,function*(){this.availableImages[re]=ce;for(const ge in this.workerSources[re]){const Ie=this.workerSources[re][ge];for(const Ne in Ie)Ie[Ne].availableImages=ce}})}_syncRTLPluginState(re,ce){return f._(this,void 0,void 0,function*(){f.bz.setState(ce);const ge=f.bz.getPluginURL();if(ce.pluginStatus==="loaded"&&!f.bz.isParsed()&&ge!=null){this.self.importScripts(ge);const Ie=f.bz.isParsed();if(Ie)return Ie;throw new Error(`RTL Text Plugin failed to import scripts from ${ge}`)}return!1})}_getAvailableImages(re){let ce=this.availableImages[re];return ce||(ce=[]),ce}_getLayerIndex(re){let ce=this.layerIndexes[re];return ce||(ce=this.layerIndexes[re]=new u),ce}_getWorkerSource(re,ce,ge){if(this.workerSources[re]||(this.workerSources[re]={}),this.workerSources[re][ce]||(this.workerSources[re][ce]={}),!this.workerSources[re][ce][ge]){const Ie={sendAsync:(Ne,Le)=>(Ne.targetMapId=re,this.actor.sendAsync(Ne,Le))};switch(ce){case"vector":this.workerSources[re][ce][ge]=new w(Ie,this._getLayerIndex(re),this._getAvailableImages(re));break;case"geojson":this.workerSources[re][ce][ge]=new Oi(Ie,this._getLayerIndex(re),this._getAvailableImages(re));break;default:this.workerSources[re][ce][ge]=new this.externalWorkerSourceTypes[ce](Ie,this._getLayerIndex(re),this._getAvailableImages(re))}}return this.workerSources[re][ce][ge]}_getDEMWorkerSource(re,ce){return this.demWorkerSources[re]||(this.demWorkerSources[re]={}),this.demWorkerSources[re][ce]||(this.demWorkerSources[re][ce]=new T),this.demWorkerSources[re][ce]}}return f.i(self)&&(self.worker=new or(self)),or}),c("index",["exports","./shared"],function(f,u){var b="4.0.0";let C,I;const w={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,l)=>{const d=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(u.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(C||(C=document.createElement("a")),C.href=y,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class T{static testProp(r){if(!T.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in T.docStyle)return r[l];return r[0]}static create(r,l,d){const g=window.document.createElement(r);return l!==void 0&&(g.className=l),d&&d.appendChild(g),g}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(r,l){r.style[T.transformProp]=l}static addEventListener(r,l,d,g={}){r.addEventListener(l,d,"passive"in g?g:g.capture)}static removeEventListener(r,l,d,g={}){r.removeEventListener(l,d,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){const g=l.boundingClientRect;return new u.P((d.clientX-g.left)/l.x-r.clientLeft,(d.clientY-g.top)/l.y-r.clientTop)}static mousePos(r,l){const d=T.getScale(r);return T.getPoint(r,d,l)}static touchPos(r,l){const d=[],g=T.getScale(r);for(let v=0;v<l.length;v++)d.push(T.getPoint(r,g,l[v]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(y){!ue&&F&&(K?W(y):U=y)}};let U,F,ue=!1,K=!1;function W(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,F),y.isContextLost())return;O.supported=!0}catch{}y.deleteTexture(r),ue=!0}var $,ie;typeof document<"u"&&(F=document.createElement("img"),F.onload=function(){U&&W(U),U=null,K=!0},F.onerror=function(){ue=!0,U=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,l,d,g;y.resetRequestQueue=()=>{r=[],l=0,d=0,g={}},y.addThrottleControl=M=>{const H=d++;return g[H]=M,H},y.removeThrottleControl=M=>{delete g[M],A()},y.getImage=(M,H,J=!0)=>new Promise((ne,pe)=>{O.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),u.e(M,{type:"image"}),r.push({abortController:H,requestParameters:M,supportImageRefresh:J,state:"queued",onError:Ae=>{pe(Ae)},onSuccess:Ae=>{ne(Ae)}}),A()});const v=M=>u._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:H,supportImageRefresh:J,onError:ne,onSuccess:pe,abortController:Ae}=M,Pe=J===!1&&!u.i(self)&&!u.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((Xe,tt)=>Xe&&tt==="accept",!0));l++;const Oe=Pe?k(H,Ae):u.m(H,Ae);try{const Xe=yield Oe;delete M.abortController,M.state="completed",Xe.data instanceof HTMLImageElement||u.b(Xe.data)?pe(Xe):Xe.data&&pe({data:yield(Ce=Xe.data,typeof createImageBitmap=="function"?u.d(Ce):u.f(Ce)),cacheControl:Xe.cacheControl,expires:Xe.expires})}catch(Xe){delete M.abortController,ne(Xe)}finally{l--,A()}var Ce}),A=()=>{const M=(()=>{for(const H of Object.keys(g))if(g[H]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=l;H<M&&r.length>0;H++){const J=r.shift();J.abortController.signal.aborted?H--:v(J)}},k=(M,H)=>new Promise((J,ne)=>{const pe=new Image,Ae=M.url,Pe=M.credentials;Pe&&Pe==="include"?pe.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!u.s(Ae))&&(pe.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{pe.src="",ne(u.c())}),pe.fetchPriority="high",pe.onload=()=>{pe.onerror=pe.onload=null,J({data:pe})},pe.onerror=()=>{pe.onerror=pe.onload=null,H.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},pe.src=Ae})}($||($={})),$.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(ie||(ie={}));class X{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}normalizeSpriteURL(r,l,d){const g=function(v){const A=v.match(V);if(!A)throw new Error(`Unable to parse URL "${v}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(r);return g.path+=`${l}${d}`,function(v){const A=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${A}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const V=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function E(y){var r=new u.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var j,B=function(y,r,l){return y[0]=r[0]-l[0],y[1]=r[1]-l[1],y[2]=r[2]-l[2],y};j=new u.A(3),u.A!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0);var ee=function(y){var r=y[0],l=y[1];return r*r+l*l};function q(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:d,url:g}of y){const v=`${d}${g}`;l.indexOf(v)===-1&&(l.push(v),r.push({id:d,url:g}))}}return r}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class me{constructor(r,l,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,g)}update(r,l,d){const{width:g,height:v}=r,A=!(this.size&&this.size[0]===g&&this.size[1]===v||d),{context:k}=this,{gl:M}=k;if(this.useMipmap=!!(l&&l.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!l||l.premultiply!==!1)),A)this.size=[g,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,g,v,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:H,y:J}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,H,J,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,H,J,g,v,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,l,d){const{context:g}=this,{gl:v}=g;v.bindTexture(v.TEXTURE_2D,this.texture),d!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,l),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function _e(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class de extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;const g=l.data||l.spriteData;return this._validateStretch(l.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const g of r){if(g[0]<d||g[1]<g[0]||l<g[1])return!1;d=g[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const d=l.spriteData,g=d&&d.width||l.data.width,v=d&&d.height||l.data.height;return!(r[0]<0||g<r[0]||r[1]<0||v<r[1]||r[2]<0||g<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){const g=this.getImage(r);if(d&&(g.data.width!==l.data.width||g.data.height!==l.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=g.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let g=!0;if(!this.isLoaded())for(const v of r)this.images[v]||(g=!1);this.isLoaded()||g?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const d of r){let g=this.getImage(d);g||(this.fire(new u.k("styleimagemissing",{id:d})),g=this.getImage(d)),g?l[d]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new u.I(g,d);this.patterns[r]={bin:g,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new me(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const v in this.patterns)r.push(this.patterns[v].bin);const{w:l,h:d}=u.p(r),g=this.atlasImage;g.resize({width:l||1,height:d||1});for(const v in this.patterns){const{bin:A}=this.patterns[v],k=A.x+1,M=A.y+1,H=this.getImage(v).data,J=H.width,ne=H.height;u.R.copy(H,g,{x:0,y:0},{x:k,y:M},{width:J,height:ne}),u.R.copy(H,g,{x:0,y:ne-1},{x:k,y:M-1},{width:J,height:1}),u.R.copy(H,g,{x:0,y:0},{x:k,y:M+ne},{width:J,height:1}),u.R.copy(H,g,{x:J-1,y:0},{x:k-1,y:M},{width:1,height:ne}),u.R.copy(H,g,{x:0,y:0},{x:k+J,y:M},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||u.w(`Image with ID: "${l}" was not found`),_e(d)&&this.updateImage(l,d)}}}const oe=1e20;function le(y,r,l,d,g,v,A,k,M){for(let H=r;H<r+d;H++)Q(y,l*v+H,v,g,A,k,M);for(let H=l;H<l+g;H++)Q(y,H*v+r,1,d,A,k,M)}function Q(y,r,l,d,g,v,A){v[0]=0,A[0]=-oe,A[1]=oe,g[0]=y[r];for(let k=1,M=0,H=0;k<d;k++){g[k]=y[r+k*l];const J=k*k;do{const ne=v[M];H=(g[k]-g[ne]+J-ne*ne)/(k-ne)/2}while(H<=A[M]&&--M>-1);M++,v[M]=k,A[M]=H,A[M+1]=oe}for(let k=0,M=0;k<d;k++){for(;A[M+1]<k;)M++;const H=v[M],J=k-H;y[r+k*l]=g[H]+J*J}}class te{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const v in r)for(const A of r[v])l.push(this._getAndCacheGlyphsPromise(v,A));const d=yield Promise.all(l),g={};for(const{stack:v,id:A,glyph:k}of d)g[v]||(g[v]={}),g[v][A]=k&&{id:k.id,bitmap:k.bitmap.clone(),metrics:k.metrics};return g})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let g=d.glyphs[l];if(g!==void 0)return{stack:r,id:l,glyph:g};if(g=this._tinySDF(d,r,l),g)return d.glyphs[l]=g,{stack:r,id:l,glyph:g};const v=Math.floor(l/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[v])return{stack:r,id:l,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[v]){const k=te.loadGlyphRange(r,v,this.url,this.requestManager);d.requests[v]=k}const A=yield d.requests[v];for(const k in A)this._doesCharSupportLocalGlyph(+k)||(d.glyphs[+k]=A[+k]);return d.ranges[v]=!0,{stack:r,id:l,glyph:A[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let v=r.tinySDF;if(!v){let k="400";/bold/i.test(l)?k="900":/medium/i.test(l)?k="500":/light/i.test(l)&&(k="200"),v=r.tinySDF=new te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const A=v.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}te.loadGlyphRange=function(y,r,l,d){return u._(this,void 0,void 0,function*(){const g=256*r,v=g+255,A=d.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${g}-${v}`),ie.Glyphs),k=yield u.l(A,new AbortController);if(!k||!k.data)throw new Error(`Could not load glyph range. range: ${r}, ${g}-${v}`);const M={};for(const H of u.n(k.data))M[H.id]=H;return M})},te.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:v="normal",fontStyle:A="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const k=this.size=y+4*r,M=this._createCanvas(k),H=this.ctx=M.getContext("2d",{willReadFrequently:!0});H.font=`${A} ${v} ${y}px ${g}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:v}=this.ctx.measureText(y),A=Math.ceil(l),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-g))),M=Math.min(this.size-this.buffer,A+Math.ceil(d)),H=k+2*this.buffer,J=M+2*this.buffer,ne=Math.max(H*J,0),pe=new Uint8ClampedArray(ne),Ae={data:pe,width:H,height:J,glyphWidth:k,glyphHeight:M,glyphTop:A,glyphLeft:0,glyphAdvance:r};if(k===0||M===0)return Ae;const{ctx:Pe,buffer:Oe,gridInner:Ce,gridOuter:Xe}=this;Pe.clearRect(Oe,Oe,k,M),Pe.fillText(y,Oe,Oe+A);const tt=Pe.getImageData(Oe,Oe,k,M);Xe.fill(oe,0,ne),Ce.fill(0,0,ne);for(let je=0;je<M;je++)for(let Ke=0;Ke<k;Ke++){const st=tt.data[4*(je*k+Ke)+3]/255;if(st===0)continue;const it=(je+Oe)*H+Ke+Oe;if(st===1)Xe[it]=0,Ce[it]=oe;else{const mt=.5-st;Xe[it]=mt>0?mt*mt:0,Ce[it]=mt<0?mt*mt:0}}le(Xe,0,0,H,J,H,this.f,this.v,this.z),le(Ce,Oe,Oe,k,M,H,this.f,this.v,this.z);for(let je=0;je<ne;je++){const Ke=Math.sqrt(Xe[je])-Math.sqrt(Ce[je]);pe[je]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return Ae}};class he{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,d){return{x:u.z.number(r.x,l.x,d),y:u.z.number(r.y,l.y,d),z:u.z.number(r.z,l.z,d)}}}let be;class Ee extends u.E{constructor(r){super(),be=be||new u.q({anchor:new u.D(u.v.light.anchor),position:new he,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(be),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const d in r){const g=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Be{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const g=[];let v=r.length%2==1?-r[r.length-1]*d:0,A=r[0]*d,k=!0;g.push({left:v,right:A,isDash:k,zeroLength:r[0]===0});let M=r[0];for(let H=1;H<r.length;H++){k=!k;const J=r[H];v=M*d,M+=J,A=M*d,g.push({left:v,right:A,isDash:k,zeroLength:J===0})}return g}addRoundDash(r,l,d){const g=l/2;for(let v=-d;v<=d;v++){const A=this.width*(this.nextRow+d+v);let k=0,M=r[k];for(let H=0;H<this.width;H++){H/M.right>1&&(M=r[++k]);const J=Math.abs(H-M.left),ne=Math.abs(H-M.right),pe=Math.min(J,ne);let Ae;const Pe=v/d*(g+1);if(M.isDash){const Oe=g-Math.abs(Pe);Ae=Math.sqrt(pe*pe+Oe*Oe)}else Ae=g-Math.sqrt(pe*pe+Pe*Pe);this.data[A+H]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const M=r[k],H=r[k+1];M.zeroLength?r.splice(k,1):H&&H.isDash===M.isDash&&(H.left=M.left,r.splice(k,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const g=this.width*this.nextRow;let v=0,A=r[v];for(let k=0;k<this.width;k++){k/A.right>1&&(A=r[++v]);const M=Math.abs(k-A.left),H=Math.abs(k-A.right),J=Math.min(M,H);this.data[g+k]=Math.max(0,Math.min(255,(A.isDash?J:-J)+128))}}addDash(r,l){const d=l?7:0,g=2*d+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let v=0;for(let k=0;k<r.length;k++)v+=r[k];if(v!==0){const k=this.width/v,M=this.getDashRanges(r,this.width,k);l?this.addRoundDash(M,k,d):this.addRegularDash(M)}const A={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:v};return this.nextRow+=g,this.dirty=!0,A}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const ke="maplibre_preloaded_worker_pool";class ze{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<ze.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ke]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(w.hardwareConcurrency/2);let He,rt;function ht(){return He||(He=new ze),He}ze.workerCount=u.B(globalThis)?Math.max(Math.min(We,3),1):1;class wt{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let g=0;g<d.length;g++){const v=new u.C(d[g],l);v.name=`Worker ${g}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const d=[];for(const g of this.actors)d.push(g.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const d of this.actors)d.registerMessageHandler(r,l)}}function Mt(){return rt||(rt=new wt(ht(),u.G),rt.registerMessageHandler("getResource",(y,r,l)=>u.m(r,l))),rt}function gt(y,r){const l=u.F();return u.H(l,l,[1,1,0]),u.J(l,l,[.5*y.width,.5*y.height,1]),u.K(l,l,y.calculatePosMatrix(r.toUnwrapped()))}function Et(y,r,l,d,g,v){const A=function(ne,pe,Ae){if(ne)for(const Pe of ne){const Oe=pe[Pe];if(Oe&&Oe.source===Ae&&Oe.type==="fill-extrusion")return!0}else for(const Pe in pe){const Oe=pe[Pe];if(Oe.source===Ae&&Oe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,y.id),k=v.maxPitchScaleFactor(),M=y.tilesIn(d,k,A);M.sort($t);const H=[];for(const ne of M)H.push({wrappedTileID:ne.tileID.wrapped().key,queryResults:ne.tile.queryRenderedFeatures(r,l,y._state,ne.queryGeometry,ne.cameraQueryGeometry,ne.scale,g,v,k,gt(y.transform,ne.tileID))});const J=function(ne){const pe={},Ae={};for(const Pe of ne){const Oe=Pe.queryResults,Ce=Pe.wrappedTileID,Xe=Ae[Ce]=Ae[Ce]||{};for(const tt in Oe){const je=Oe[tt],Ke=Xe[tt]=Xe[tt]||{},st=pe[tt]=pe[tt]||[];for(const it of je)Ke[it.featureIndex]||(Ke[it.featureIndex]=!0,st.push(it))}}return pe}(H);for(const ne in J)J[ne].forEach(pe=>{const Ae=pe.feature,Pe=y.getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=Pe});return J}function $t(y,r){const l=y.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function Ht(y,r,l){return u._(this,void 0,void 0,function*(){let d=y;if(y.url?d=(yield u.h(r.transformRequest(y.url,ie.Source),l)).data:yield w.frameAsync(l),!d)return null;const g=u.L(u.e(d,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(g.vectorLayerIds=d.vector_layers.map(v=>v.id)),g})}class qt{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}extend(r){const l=this._sw,d=this._ne;let g,v;if(r instanceof u.M)g=r,v=r;else{if(!(r instanceof qt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(qt.convert(r)):this.extend(u.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.M.convert(r)):this;if(g=r._sw,v=r._ne,!g||!v)return this}return l||d?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(v.lng,v.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=u.M.convert(r);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(r){return r instanceof qt?r:r&&new qt(r)}static fromLngLat(r,l=0){const d=360*l/40075017,g=d/Math.cos(Math.PI/180*r.lat);return new qt(new u.M(r.lng-g,r.lat-d),new u.M(r.lng+g,r.lat+d))}}class bn{constructor(r,l,d){this.bounds=qt.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(u.N(this.bounds.getWest())*l),g=Math.floor(u.O(this.bounds.getNorth())*l),v=Math.ceil(u.N(this.bounds.getEast())*l),A=Math.ceil(u.O(this.bounds.getSouth())*l);return r.x>=d&&r.x<v&&r.y>=g&&r.y<A}}class et extends u.E{constructor(r,l,d,g){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ht(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new bn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,ie.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let g="reloadTile";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,A)=>{r.reloadPromise={resolve:v,reject:A}})}else r.actor=this.dispatcher.getActor(),g="loadTile";r.abortController=new AbortController;try{const v=yield r.actor.sendAsync({type:g,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"abortTile",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"removeTile",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class hn extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.L(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ht(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new bn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield $.getImage(this.map._requestManager.transformRequest(l,ie.Tile),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const g=this.map.painter.context,v=g.gl,A=d.data;r.texture=this.map.painter.getTileTexture(A.width),r.texture?r.texture.update(A,{useMipmap:!0}):(r.texture=new me(g,A,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&v.texParameterf(v.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class xn extends hn{constructor(r,l,d,g){super(r,l,d,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,ie.Tile);r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const g=yield $.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(g&&g.data){const v=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&r.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const A=u.b(v)&&u.S()?v:yield this.readImageNow(v),k={type:this.type,uid:r.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const M=yield r.actor.sendAsync({type:"loadDEMTile",data:k});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(g){if(delete r.abortController,r.aborted)r.state="unloaded";else if(g)throw r.state="errored",g}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const l=r.width+2,d=r.height+2;try{return new u.R({width:l,height:d},yield u.V(r,-1,-1,l,d))}catch{}}return w.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),g=(l.x-1+d)%d,v=l.x===0?r.wrap-1:r.wrap,A=(l.x+1+d)%d,k=l.x+1===d?r.wrap+1:r.wrap,M={};return M[new u.Q(r.overscaledZ,v,l.z,g,l.y).key]={backfilled:!1},M[new u.Q(r.overscaledZ,k,l.z,A,l.y).key]={backfilled:!1},l.y>0&&(M[new u.Q(r.overscaledZ,v,l.z,g,l.y-1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,k,l.z,A,l.y-1).key]={backfilled:!1}),l.y+1<d&&(M[new u.Q(r.overscaledZ,v,l.z,g,l.y+1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new u.Q(r.overscaledZ,k,l.z,A,l.y+1).key]={backfilled:!1}),M}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class we extends u.E{constructor(r,l,d,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const v=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*v,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*v,extent:u.W,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.W,radius:(l.clusterRadius||50)*v,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(w.resolveURL(this._data),ie.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"loadData",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;d.resourceTiming&&d.resourceTiming[this.id]&&(g=d.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(v,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const g=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(g,this.map.painter,l==="reloadTile")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var N=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class D extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield $.getImage(this.map._requestManager.transformRequest(this.url,ie.Image),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Y.fromLngLat);this.tileID=function(g){let v=1/0,A=1/0,k=-1/0,M=-1/0;for(const pe of g)v=Math.min(v,pe.x),A=Math.min(A,pe.y),k=Math.max(k,pe.x),M=Math.max(M,pe.y);const H=Math.max(k-v,M-A),J=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),ne=Math.pow(2,J);return new u.a0(J,Math.floor((v+k)/2*ne),Math.floor((A+M)/2*ne))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new me(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const v=this.tiles[g];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class xe extends D{constructor(r,l,d,g){super(r,l,d,g),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,ie.Source).url);try{const l=yield u.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new me(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const v=this.tiles[g];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ze extends D{constructor(r,l,d,g){super(r,l,d,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(A=>typeof A!="number"))||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new me(l,this.canvas,d.RGBA,{premultiply:!0});let g=!1;for(const v in this.tiles){const A=this.tiles[v];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Qe={},ct=y=>{switch(y){case"geojson":return we;case"image":return D;case"raster":return hn;case"raster-dem":return xn;case"vector":return et;case"video":return xe;case"canvas":return Ze}return Qe[y]};class ae extends u.E{constructor(){super(...arguments),this.pluginStatus="unavailable",this.pluginURL=null,this.dispatcher=Mt(),this.queue=[]}_sendPluginStateToWorker(){return u._(this,void 0,void 0,function*(){yield this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}),this.fire(new u.k("pluginStateChange",{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}))})}getRTLTextPluginStatus(){return this.pluginStatus}clearRTLTextPlugin(){this.pluginStatus="unavailable",this.pluginURL=null}setRTLTextPlugin(r,l=!1){return u._(this,void 0,void 0,function*(){if(this.pluginStatus==="deferred"||this.pluginStatus==="loading"||this.pluginStatus==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");this.pluginURL=w.resolveURL(r),this.pluginStatus="deferred",yield this._sendPluginStateToWorker(),l||(yield this._downloadRTLTextPlugin())})}_downloadRTLTextPlugin(){return u._(this,void 0,void 0,function*(){if(this.pluginStatus!=="deferred"||!this.pluginURL)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");try{this.pluginStatus="loading",yield this._sendPluginStateToWorker(),yield u.l({url:this.pluginURL},new AbortController),this.pluginStatus="loaded"}catch{this.pluginStatus="error"}yield this._sendPluginStateToWorker()})}lazyLoadRTLTextPlugin(){return u._(this,void 0,void 0,function*(){this.pluginStatus==="deferred"&&(yield this._downloadRTLTextPlugin())})}}let R=null;function z(){return R||(R=new ae),R}class Se{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a3(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,v){const A={};if(!v)return A;for(const k of g){const M=k.layerIds.map(H=>v.getLayer(H)).filter(Boolean);if(M.length!==0){k.layers=M,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(H=>M.filter(J=>J.id===H)[0]));for(const H of M)A[H.id]=k}}return A}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const v=this.buckets[g];if(v instanceof u.a5){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const v=this.buckets[g];if(v instanceof u.a5&&v.hasRTLText){this.hasRTLText=!0,z().lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const v=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new me(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new me(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,g,v,A,k,M,H,J){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:v,scale:A,tileSize:this.tileSize,pixelPosMatrix:J,transform:M,params:k,queryPadding:this.queryPadding*H},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),v=l&&l.sourceLayer?l.sourceLayer:"",A=g._geojsonTileLayer||g[v];if(!A)return;const k=u.a6(l&&l.filter),{z:M,x:H,y:J}=this.tileID.canonical,ne={z:M,x:H,y:J};for(let pe=0;pe<A.length;pe++){const Ae=A.feature(pe);if(k.needGeometry){const Ce=u.a7(Ae,!0);if(!k.filter(new u.a8(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!k.filter(new u.a8(this.tileID.overscaledZ),Ae))continue;const Pe=d.getId(Ae,v),Oe=new u.a9(Ae,M,H,J,Pe);Oe.tile=ne,r.push(Oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=u.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const v=this.expirationTime-l;v?this.expirationTime=d+Math.max(v,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const v=this.buckets[g],A=v.layers[0].sourceLayer||"_geojsonTileLayer",k=d[A],M=r[A];if(!k||!M||Object.keys(M).length===0)continue;v.update(M,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=l&&l.style&&l.style.getLayer(g);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<w.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=w.now()+r}setDependencies(r,l){const d={};for(const g of l)d[g]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const g=this.dependencies[d];if(g){for(const v of l)if(g[v])return!0}}return!1}}class Ve{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const v={value:l,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},d)),this.data[g].push(v),this.order.push(g),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,g=l===void 0?0:this.data[d].indexOf(l),v=this.data[d][g];return this.data[d].splice(g,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const g of this.data[d])r(g.value)||l.push(g);for(const d of l)this.remove(d.value.tileID,d)}}class nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const g=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},u.e(this.stateChanges[r][g],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const v in this.state[r])v!==g&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const v in this.state[r][g])d[v]||(this.deletedStates[r][g][v]=null)}else for(const v in d)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][v]===null&&delete this.deletedStates[r][g][v]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const g=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(d in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][d]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),g=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const v=this.deletedStates[r][l];if(v===null)return{};for(const A in v)delete g[A]}return g}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const v={};for(const A in this.stateChanges[g])this.state[g][A]||(this.state[g][A]={}),u.e(this.state[g][A],this.stateChanges[g][A]),v[A]=this.state[g][A];d[g]=v}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const v={};if(this.deletedStates[g]===null)for(const A in this.state[g])v[A]={},this.state[g][A]={};else for(const A in this.deletedStates[g]){if(this.deletedStates[g][A]===null)this.state[g][A]={};else for(const k of Object.keys(this.deletedStates[g][A]))delete this.state[g][A][k];v[A]=this.state[g][A]}d[g]=d[g]||{},u.e(d[g],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in r)r[g].setFeatureState(d,l)}}class ot extends u.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,v,A,k)=>{const M=new(ct(v.type))(g,v,A,k);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return M})(r,l,d,this),this._tiles={},this._cache=new Ve(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new nt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(g){r.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(lt).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,g)=>{const v=d.tileID,A=g.tileID,k=new u.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),M=new u.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-A.overscaledZ||M.y-k.y||M.x-k.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(lt).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=w.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const v=l[g];if(r.neighboringTiles&&r.neighboringTiles[v]){const A=this.getTileByID(v);d(r,A),d(A,r)}}function d(g,v){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let A=v.tileID.canonical.x-g.tileID.canonical.x;const k=v.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),H=v.tileID.key;A===0&&k===0||Math.abs(k)>1||(Math.abs(A)>1&&(Math.abs(A+M)===1?A+=M:Math.abs(A-M)===1&&(A-=M)),v.dem&&g.dem&&(g.dem.backfillBorder(v.dem,A,k),g.neighboringTiles&&g.neighboringTiles[H]&&(g.neighboringTiles[H].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,g){for(const v in this._tiles){let A=this._tiles[v];if(g[v]||!A.hasData()||A.tileID.overscaledZ<=l||A.tileID.overscaledZ>d)continue;let k=A.tileID;for(;A&&A.tileID.overscaledZ>l+1;){const H=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[H.key],A&&A.hasData()&&(k=H)}let M=k;for(;M.overscaledZ>l;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){g[k.key]=k;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const g=r.scaledTo(d),v=this._getLoadedTile(g);if(v)return v}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(v)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const g in this._tiles){const v=this._tiles[g];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),d[v.tileID.key]=v}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,l){if(this.transform=r,this.terrain=l,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new u.Q(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(J=>this._source.hasTile(J)))):d=[];const g=r.coveringZoomLevel(this._source),v=Math.max(g-ot.maxOverzooming,this._source.minzoom),A=Math.max(g+ot.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const ne of d)if(ne.canonical.z>this._source.minzoom){const pe=ne.scaledTo(ne.canonical.z-1);J[pe.key]=pe;const Ae=ne.scaledTo(Math.max(this._source.minzoom,Math.min(ne.canonical.z,5)));J[Ae.key]=Ae}d=d.concat(Object.values(J))}const k=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(d,g);if(Dt(this._source.type)){const J={},ne={},pe=Object.keys(M),Ae=w.now();for(const Pe of pe){const Oe=M[Pe],Ce=this._tiles[Pe];if(!Ce||Ce.fadeEndTime!==0&&Ce.fadeEndTime<=Ae)continue;const Xe=this.findLoadedParent(Oe,v);Xe&&(this._addTile(Xe.tileID),J[Xe.tileID.key]=Xe.tileID),ne[Pe]=Oe}this._retainLoadedChildren(ne,g,A,M);for(const Pe in J)M[Pe]||(this._coveredTiles[Pe]=!0,M[Pe]=J[Pe]);if(l){const Pe={},Oe={};for(const Ce of d)this._tiles[Ce.key].hasData()?Pe[Ce.key]=Ce:Oe[Ce.key]=Ce;for(const Ce in Oe){const Xe=Oe[Ce].children(this._source.maxzoom);this._tiles[Xe[0].key]&&this._tiles[Xe[1].key]&&this._tiles[Xe[2].key]&&this._tiles[Xe[3].key]&&(Pe[Xe[0].key]=M[Xe[0].key]=Xe[0],Pe[Xe[1].key]=M[Xe[1].key]=Xe[1],Pe[Xe[2].key]=M[Xe[2].key]=Xe[2],Pe[Xe[3].key]=M[Xe[3].key]=Xe[3],delete Oe[Ce])}for(const Ce in Oe){const Xe=this.findLoadedParent(Oe[Ce],this._source.minzoom);if(Xe){Pe[Xe.tileID.key]=M[Xe.tileID.key]=Xe.tileID;for(const tt in Pe)Pe[tt].isChildOf(Xe.tileID)&&delete Pe[tt]}}for(const Ce in this._tiles)Pe[Ce]||(this._coveredTiles[Ce]=!0)}}for(const J in M)this._tiles[J].clearFadeHold();const H=u.ab(this._tiles,M);for(const J of H){const ne=this._tiles[J];ne.hasSymbolBuckets&&!ne.holdingForFade()?ne.setHoldDuration(this.map._fadeDuration):ne.hasSymbolBuckets&&!ne.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){const d={},g={},v=Math.max(l-ot.maxOverzooming,this._source.minzoom),A=Math.max(l+ot.maxUnderzooming,this._source.minzoom),k={};for(const M of r){const H=this._addTile(M);d[M.key]=M,H.hasData()||l<this._source.maxzoom&&(k[M.key]=M)}this._retainLoadedChildren(k,l,A,d);for(const M of r){let H=this._tiles[M.key];if(H.hasData())continue;if(l+1>this._source.maxzoom){const ne=M.children(this._source.maxzoom)[0],pe=this.getTile(ne);if(pe&&pe.hasData()){d[ne.key]=ne;continue}}else{const ne=M.children(this._source.maxzoom);if(d[ne[0].key]&&d[ne[1].key]&&d[ne[2].key]&&d[ne[3].key])continue}let J=H.wasRequested();for(let ne=M.overscaledZ-1;ne>=v;--ne){const pe=M.scaledTo(ne);if(g[pe.key])break;if(g[pe.key]=!0,H=this.getTile(pe),!H&&J&&(H=this._addTile(pe)),H){const Ae=H.hasData();if((J||Ae)&&(d[pe.key]=pe),J=H.wasRequested(),Ae)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}l.push(g.key);const v=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;g=v}for(const v of l)this._loadedParentTiles[v]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new Se(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const g=[],v=this.transform;if(!v)return g;const A=d?v.getCameraQueryGeometry(r):r,k=r.map(Pe=>v.pointCoordinate(Pe,this.terrain)),M=A.map(Pe=>v.pointCoordinate(Pe,this.terrain)),H=this.getIds();let J=1/0,ne=1/0,pe=-1/0,Ae=-1/0;for(const Pe of M)J=Math.min(J,Pe.x),ne=Math.min(ne,Pe.y),pe=Math.max(pe,Pe.x),Ae=Math.max(Ae,Pe.y);for(let Pe=0;Pe<H.length;Pe++){const Oe=this._tiles[H[Pe]];if(Oe.holdingForFade())continue;const Ce=Oe.tileID,Xe=Math.pow(2,v.zoom-Oe.tileID.overscaledZ),tt=l*Oe.queryPadding*u.W/Oe.tileSize/Xe,je=[Ce.getTilePoint(new u.Y(J,ne)),Ce.getTilePoint(new u.Y(pe,Ae))];if(je[0].x-tt<u.W&&je[0].y-tt<u.W&&je[1].x+tt>=0&&je[1].y+tt>=0){const Ke=k.map(it=>Ce.getTilePoint(it)),st=M.map(it=>Ce.getTilePoint(it));g.push({tile:Oe,tileID:Ce,queryGeometry:Ke,cameraQueryGeometry:st,scale:Xe})}}return g}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Dt(this._source.type)){const r=w.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const g=this._tiles[r];g&&g.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function lt(y,r){const l=Math.abs(2*y.wrap)-+(y.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||d-l||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function Dt(y){return y==="raster"||y==="image"||y==="video"}ot.maxOverzooming=10,ot.maxUnderzooming=3;class Ft{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let l=1,d=this._distances[l];const g=r*this.paddedLength+this.padding;for(;d<g&&l<this._distances.length;)d=this._distances[++l];const v=l-1,A=this._distances[v],k=d-A,M=k>0?(g-A)/k:0;return this.points[v].mult(1-M).add(this.points[l].mult(M))}}function yn(y,r){let l=!0;return y==="always"||y!=="never"&&r!=="never"||(l=!1),l}class vn{constructor(r,l,d){const g=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let A=0;A<this.xCellCount*this.yCellCount;A++)g.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,g,v){this._forEachCell(l,d,g,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(v)}insertCircle(r,l,d,g){this._forEachCell(l-g,d-g,l+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(g)}_insertBoxCell(r,l,d,g,v,A){this.boxCells[v].push(A)}_insertCircleCell(r,l,d,g,v,A){this.circleCells[v].push(A)}_query(r,l,d,g,v,A,k){if(d<0||r>this.width||g<0||l>this.height)return[];const M=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=g){if(v)return[{key:null,x1:r,y1:l,x2:d,y2:g}];for(let H=0;H<this.boxKeys.length;H++)M.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const J=this.circles[3*H],ne=this.circles[3*H+1],pe=this.circles[3*H+2];M.push({key:this.circleKeys[H],x1:J-pe,y1:ne-pe,x2:J+pe,y2:ne+pe})}}else this._forEachCell(r,l,d,g,this._queryCell,M,{hitTest:v,overlapMode:A,seenUids:{box:{},circle:{}}},k);return M}query(r,l,d,g){return this._query(r,l,d,g,!1,null)}hitTest(r,l,d,g,v,A){return this._query(r,l,d,g,!0,v,A).length>0}hitTestCircle(r,l,d,g,v){const A=r-d,k=r+d,M=l-d,H=l+d;if(k<0||A>this.width||H<0||M>this.height)return!1;const J=[];return this._forEachCell(A,M,k,H,this._queryCellCircle,J,{hitTest:!0,overlapMode:g,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},v),J.length>0}_queryCell(r,l,d,g,v,A,k,M){const{seenUids:H,hitTest:J,overlapMode:ne}=k,pe=this.boxCells[v];if(pe!==null){const Pe=this.bboxes;for(const Oe of pe)if(!H.box[Oe]){H.box[Oe]=!0;const Ce=4*Oe,Xe=this.boxKeys[Oe];if(r<=Pe[Ce+2]&&l<=Pe[Ce+3]&&d>=Pe[Ce+0]&&g>=Pe[Ce+1]&&(!M||M(Xe))&&(!J||!yn(ne,Xe.overlapMode))&&(A.push({key:Xe,x1:Pe[Ce],y1:Pe[Ce+1],x2:Pe[Ce+2],y2:Pe[Ce+3]}),J))return!0}}const Ae=this.circleCells[v];if(Ae!==null){const Pe=this.circles;for(const Oe of Ae)if(!H.circle[Oe]){H.circle[Oe]=!0;const Ce=3*Oe,Xe=this.circleKeys[Oe];if(this._circleAndRectCollide(Pe[Ce],Pe[Ce+1],Pe[Ce+2],r,l,d,g)&&(!M||M(Xe))&&(!J||!yn(ne,Xe.overlapMode))){const tt=Pe[Ce],je=Pe[Ce+1],Ke=Pe[Ce+2];if(A.push({key:Xe,x1:tt-Ke,y1:je-Ke,x2:tt+Ke,y2:je+Ke}),J)return!0}}}return!1}_queryCellCircle(r,l,d,g,v,A,k,M){const{circle:H,seenUids:J,overlapMode:ne}=k,pe=this.boxCells[v];if(pe!==null){const Pe=this.bboxes;for(const Oe of pe)if(!J.box[Oe]){J.box[Oe]=!0;const Ce=4*Oe,Xe=this.boxKeys[Oe];if(this._circleAndRectCollide(H.x,H.y,H.radius,Pe[Ce+0],Pe[Ce+1],Pe[Ce+2],Pe[Ce+3])&&(!M||M(Xe))&&!yn(ne,Xe.overlapMode))return A.push(!0),!0}}const Ae=this.circleCells[v];if(Ae!==null){const Pe=this.circles;for(const Oe of Ae)if(!J.circle[Oe]){J.circle[Oe]=!0;const Ce=3*Oe,Xe=this.circleKeys[Oe];if(this._circlesCollide(Pe[Ce],Pe[Ce+1],Pe[Ce+2],H.x,H.y,H.radius)&&(!M||M(Xe))&&!yn(ne,Xe.overlapMode))return A.push(!0),!0}}}_forEachCell(r,l,d,g,v,A,k,M){const H=this._convertToXCellCoord(r),J=this._convertToYCellCoord(l),ne=this._convertToXCellCoord(d),pe=this._convertToYCellCoord(g);for(let Ae=H;Ae<=ne;Ae++)for(let Pe=J;Pe<=pe;Pe++)if(v.call(this,r,l,d,g,this.xCellCount*Pe+Ae,A,k,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,g,v,A){const k=g-r,M=v-l,H=d+A;return H*H>k*k+M*M}_circleAndRectCollide(r,l,d,g,v,A,k){const M=(A-g)/2,H=Math.abs(r-(g+M));if(H>M+d)return!1;const J=(k-v)/2,ne=Math.abs(l-(v+J));if(ne>J+d)return!1;if(H<=M||ne<=J)return!0;const pe=H-M,Ae=ne-J;return pe*pe+Ae*Ae<=d*d}}function un(y,r,l,d,g){const v=u.F();return r?(u.J(v,v,[1/g,1/g,1]),l||u.ad(v,v,d.angle)):u.K(v,d.labelPlaneMatrix,y),v}function Oi(y,r,l,d,g){if(r){const v=u.ae(y);return u.J(v,v,[g,g,1]),l||u.ad(v,v,-d.angle),v}return d.glCoordMatrix}function or(y,r,l){let d;l?(d=[y.x,y.y,l(y.x,y.y),1],u.af(d,d,r)):(d=[y.x,y.y,0,1],Yt(d,d,r));const g=d[3];return{point:new u.P(d[0]/g,d[1]/g),signedDistanceFromCamera:g}}function Me(y,r){return .5+y/r*.5}function re(y,r){const l=y[0]/y[3],d=y[1]/y[3];return l>=-r[0]&&l<=r[0]&&d>=-r[1]&&d<=r[1]}function ce(y,r,l,d,g,v,A,k,M,H){const J=d?y.textSizeData:y.iconSizeData,ne=u.ag(J,l.transform.zoom),pe=[256/l.width*2+1,256/l.height*2+1],Ae=d?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ae.clear();const Pe=y.lineVertexArray,Oe=d?y.text.placedSymbolArray:y.icon.placedSymbolArray,Ce=l.transform.width/l.transform.height;let Xe=!1;for(let tt=0;tt<Oe.length;tt++){const je=Oe.get(tt);if(je.hidden||je.writingMode===u.ah.vertical&&!Xe){ft(je.numGlyphs,Ae);continue}let Ke;if(Xe=!1,H?(Ke=[je.anchorX,je.anchorY,H(je.anchorX,je.anchorY),1],u.af(Ke,Ke,r)):(Ke=[je.anchorX,je.anchorY,0,1],Yt(Ke,Ke,r)),!re(Ke,pe)){ft(je.numGlyphs,Ae);continue}const st=Me(l.transform.cameraToCenterDistance,Ke[3]),it=u.ai(J,ne,je),mt=A?it/st:it*st,bt=new u.P(je.anchorX,je.anchorY),xt=or(bt,g,H).point,Tt={projections:{},offsets:{}},Nt=Ne(je,mt,!1,k,r,g,v,y.glyphOffsetArray,Pe,Ae,xt,bt,Tt,Ce,M,H);Xe=Nt.useVertical,(Nt.notEnoughRoom||Xe||Nt.needsFlipping&&Ne(je,mt,!0,k,r,g,v,y.glyphOffsetArray,Pe,Ae,xt,bt,Tt,Ce,M,H).notEnoughRoom)&&ft(je.numGlyphs,Ae)}d?y.text.dynamicLayoutVertexBuffer.updateData(Ae):y.icon.dynamicLayoutVertexBuffer.updateData(Ae)}function ge(y,r,l,d,g,v,A,k,M,H,J,ne,pe){const Ae=k.glyphStartIndex+k.numGlyphs,Pe=k.lineStartIndex,Oe=k.lineStartIndex+k.lineLength,Ce=r.getoffsetX(k.glyphStartIndex),Xe=r.getoffsetX(Ae-1),tt=dt(y*Ce,l,d,g,v,A,k.segment,Pe,Oe,M,H,J,ne,pe);if(!tt)return null;const je=dt(y*Xe,l,d,g,v,A,k.segment,Pe,Oe,M,H,J,ne,pe);return je?{first:tt,last:je}:null}function Ie(y,r,l,d){return y===u.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(y===u.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Ne(y,r,l,d,g,v,A,k,M,H,J,ne,pe,Ae,Pe,Oe){const Ce=r/24,Xe=y.lineOffsetX*Ce,tt=y.lineOffsetY*Ce;let je;if(y.numGlyphs>1){const Ke=y.glyphStartIndex+y.numGlyphs,st=y.lineStartIndex,it=y.lineStartIndex+y.lineLength,mt=ge(Ce,k,Xe,tt,l,J,ne,y,M,v,pe,Pe,Oe);if(!mt)return{notEnoughRoom:!0};const bt=or(mt.first.point,A,Oe).point,xt=or(mt.last.point,A,Oe).point;if(d&&!l){const Tt=Ie(y.writingMode,bt,xt,Ae);if(Tt)return Tt}je=[mt.first];for(let Tt=y.glyphStartIndex+1;Tt<Ke-1;Tt++)je.push(dt(Ce*k.getoffsetX(Tt),Xe,tt,l,J,ne,y.segment,st,it,M,v,pe,Pe,Oe));je.push(mt.last)}else{if(d&&!l){const st=or(ne,g,Oe).point,it=y.lineStartIndex+y.segment+1,mt=new u.P(M.getx(it),M.gety(it)),bt=or(mt,g,Oe),xt=bt.signedDistanceFromCamera>0?bt.point:Le(ne,mt,st,1,g,Oe),Tt=Ie(y.writingMode,st,xt,Ae);if(Tt)return Tt}const Ke=dt(Ce*k.getoffsetX(y.glyphStartIndex),Xe,tt,l,J,ne,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,M,v,pe,Pe,Oe);if(!Ke)return{notEnoughRoom:!0};je=[Ke]}for(const Ke of je)u.aj(H,Ke.point,Ke.angle);return{}}function Le(y,r,l,d,g,v){const A=or(y.add(y.sub(r)._unit()),g,v).point,k=l.sub(A);return l.add(k._mult(d/k.mag()))}function $e(y,r){const{projectionCache:l,lineVertexArray:d,labelPlaneMatrix:g,tileAnchorPoint:v,distanceFromAnchor:A,getElevation:k,previousVertex:M,direction:H,absOffsetX:J}=r;if(l.projections[y])return l.projections[y];const ne=new u.P(d.getx(y),d.gety(y)),pe=or(ne,g,k);if(pe.signedDistanceFromCamera>0)return l.projections[y]=pe.point,pe.point;const Ae=y-H;return Le(A===0?v:new u.P(d.getx(Ae),d.gety(Ae)),ne,M,J-A+1,g,k)}function Fe(y,r,l){return y._unit()._perp()._mult(r*l)}function Ye(y,r,l,d,g,v,A,k){const{projectionCache:M,direction:H}=k;if(M.offsets[y])return M.offsets[y];const J=l.add(r);if(y+H<d||y+H>=g)return M.offsets[y]=J,J;const ne=$e(y+H,k),pe=Fe(ne.sub(l),A,H),Ae=l.add(pe),Pe=ne.add(pe);return M.offsets[y]=u.ak(v,J,Ae,Pe)||J,M.offsets[y]}function dt(y,r,l,d,g,v,A,k,M,H,J,ne,pe,Ae){const Pe=d?y-r:y+r;let Oe=Pe>0?1:-1,Ce=0;d&&(Oe*=-1,Ce=Math.PI),Oe<0&&(Ce+=Math.PI);let Xe,tt,je=Oe>0?k+A:k+A+1,Ke=g,st=g,it=0,mt=0;const bt=Math.abs(Pe),xt=[];let Tt;for(;it+mt<=bt;){if(je+=Oe,je<k||je>=M)return null;it+=mt,st=Ke,tt=Xe;const kt={projectionCache:ne,lineVertexArray:H,labelPlaneMatrix:J,tileAnchorPoint:v,distanceFromAnchor:it,getElevation:Ae,previousVertex:st,direction:Oe,absOffsetX:bt};if(Ke=$e(je,kt),l===0)xt.push(st),Tt=Ke.sub(st);else{let rn;const Gt=Ke.sub(st);rn=Gt.mag()===0?Fe($e(je+Oe,kt).sub(Ke),l,Oe):Fe(Gt,l,Oe),tt||(tt=st.add(rn)),Xe=Ye(je,rn,Ke,k,M,tt,l,kt),xt.push(tt),Tt=Xe.sub(tt)}mt=Tt.mag()}const Nt=Tt._mult((bt-it)/mt)._add(tt||st),sn=Ce+Math.atan2(Ke.y-st.y,Ke.x-st.x);return xt.push(Nt),{point:Nt,angle:pe?sn:0,path:xt}}const ut=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ft(y,r){for(let l=0;l<y;l++){const d=r.length;r.resize(d+4),r.float32.set(ut,3*d)}}function Yt(y,r,l){const d=r[0],g=r[1];return y[0]=l[0]*d+l[4]*g+l[12],y[1]=l[1]*d+l[5]*g+l[13],y[3]=l[3]*d+l[7]*g+l[15],y}const tn=100;class gn{constructor(r,l=new vn(r.width+200,r.height+200,25),d=new vn(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+tn,this.screenBottomBoundary=r.height+tn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,g,v,A){const k=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,A),M=d*k.perspectiveRatio,H=r.x1*M+k.point.x,J=r.y1*M+k.point.y,ne=r.x2*M+k.point.x,pe=r.y2*M+k.point.y;return!this.isInsideGrid(H,J,ne,pe)||l!=="always"&&this.grid.hitTest(H,J,ne,pe,l,v)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,J,ne,pe],offscreen:this.isOffscreen(H,J,ne,pe)}}placeCollisionCircles(r,l,d,g,v,A,k,M,H,J,ne,pe,Ae,Pe){const Oe=[],Ce=new u.P(l.anchorX,l.anchorY),Xe=or(Ce,A,Pe),tt=Me(this.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),je=(J?v/tt:v*tt)/u.ao,Ke=or(Ce,k,Pe).point,st=ge(je,g,l.lineOffsetX*je,l.lineOffsetY*je,!1,Ke,Ce,l,d,k,{projections:{},offsets:{}},!1,Pe);let it=!1,mt=!1,bt=!0;if(st){const xt=.5*pe*tt+Ae,Tt=new u.P(-100,-100),Nt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),sn=new Ft,kt=st.first,rn=st.last;let Gt=[];for(let _n=kt.path.length-1;_n>=1;_n--)Gt.push(kt.path[_n]);for(let _n=1;_n<rn.path.length;_n++)Gt.push(rn.path[_n]);const nr=2.5*xt;if(M){const _n=Gt.map(Cn=>or(Cn,M,Pe));Gt=_n.some(Cn=>Cn.signedDistanceFromCamera<=0)?[]:_n.map(Cn=>Cn.point)}let Tn=[];if(Gt.length>0){const _n=Gt[0].clone(),Cn=Gt[0].clone();for(let Tr=1;Tr<Gt.length;Tr++)_n.x=Math.min(_n.x,Gt[Tr].x),_n.y=Math.min(_n.y,Gt[Tr].y),Cn.x=Math.max(Cn.x,Gt[Tr].x),Cn.y=Math.max(Cn.y,Gt[Tr].y);Tn=_n.x>=Tt.x&&Cn.x<=Nt.x&&_n.y>=Tt.y&&Cn.y<=Nt.y?[Gt]:Cn.x<Tt.x||_n.x>Nt.x||Cn.y<Tt.y||_n.y>Nt.y?[]:u.al([Gt],Tt.x,Tt.y,Nt.x,Nt.y)}for(const _n of Tn){sn.reset(_n,.25*xt);let Cn=0;Cn=sn.length<=.5*xt?1:Math.ceil(sn.paddedLength/nr)+1;for(let Tr=0;Tr<Cn;Tr++){const Wn=Tr/Math.max(Cn-1,1),Ti=sn.lerp(Wn),Qr=Ti.x+tn,dr=Ti.y+tn;Oe.push(Qr,dr,xt,0);const hi=Qr-xt,di=dr-xt,yo=Qr+xt,Ws=dr+xt;if(bt=bt&&this.isOffscreen(hi,di,yo,Ws),mt=mt||this.isInsideGrid(hi,di,yo,Ws),r!=="always"&&this.grid.hitTestCircle(Qr,dr,xt,r,ne)&&(it=!0,!H))return{circles:[],offscreen:!1,collisionDetected:it}}}}return{circles:!H&&it||!mt||tt<this.perspectiveRatioCutoff?[]:Oe,offscreen:bt,collisionDetected:it}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,g=1/0,v=-1/0,A=-1/0;for(const J of r){const ne=new u.P(J.x+tn,J.y+tn);d=Math.min(d,ne.x),g=Math.min(g,ne.y),v=Math.max(v,ne.x),A=Math.max(A,ne.y),l.push(ne)}const k=this.grid.query(d,g,v,A).concat(this.ignoredGrid.query(d,g,v,A)),M={},H={};for(const J of k){const ne=J.key;if(M[ne.bucketInstanceId]===void 0&&(M[ne.bucketInstanceId]={}),M[ne.bucketInstanceId][ne.featureIndex])continue;const pe=[new u.P(J.x1,J.y1),new u.P(J.x2,J.y1),new u.P(J.x2,J.y2),new u.P(J.x1,J.y2)];u.am(l,pe)&&(M[ne.bucketInstanceId][ne.featureIndex]=!0,H[ne.bucketInstanceId]===void 0&&(H[ne.bucketInstanceId]=[]),H[ne.bucketInstanceId].push(ne.featureIndex))}return H}insertCollisionBox(r,l,d,g,v,A){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:v,collisionGroupID:A,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,g,v,A){const k=d?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:v,collisionGroupID:A,overlapMode:l};for(let H=0;H<r.length;H+=4)k.insertCircle(M,r[H],r[H+1],r[H+2])}projectAndGetPerspectiveRatio(r,l,d,g){let v;return g?(v=[l,d,g(l,d),1],u.af(v,v,r)):(v=[l,d,0,1],Yt(v,v,r)),{point:new u.P((v[0]/v[3]+1)/2*this.transform.width+tn,(-v[1]/v[3]+1)/2*this.transform.height+tn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(r,l,d,g){return d<tn||r>=this.screenRightBoundary||g<tn||l>this.screenBottomBoundary}isInsideGrid(r,l,d,g){return d>=0&&r<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.H(r,r,[-100,-100,0]),r}}function dn(y,r,l){return r*(u.W/(y.tileSize*Math.pow(2,l-y.tileID.overscaledZ)))}class wn{constructor(r,l,d,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class jn{constructor(r,l,d,g,v){this.text=new wn(r?r.text:null,l,d,v),this.icon=new wn(r?r.icon:null,l,g,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Hn{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class ur{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class fn{constructor(r,l,d,g,v){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=v}}class sr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function wr(y,r,l,d,g){const{horizontalAlign:v,verticalAlign:A}=u.at(y);return new u.P(-(v-.5)*r+d[0]*g,-(A-.5)*l+d[1]*g)}function ni(y,r,l,d,g,v){const{x1:A,x2:k,y1:M,y2:H,anchorPointX:J,anchorPointY:ne}=y,pe=new u.P(r,l);return d&&pe._rotate(g?v:-v),{x1:A+pe.x,y1:M+pe.y,x2:k+pe.x,y2:H+pe.y,anchorPointX:J,anchorPointY:ne}}class ai{constructor(r,l,d,g,v){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new gn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new sr(g),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,l,d,g){const v=d.getBucket(l),A=d.latestFeatureIndex;if(!v||!A||l.id!==v.layerIds[0])return;const k=d.collisionBoxArray,M=v.layers[0].layout,H=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),J=d.tileSize/u.W,ne=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),pe=M.get("text-pitch-alignment")==="map",Ae=M.get("text-rotation-alignment")==="map",Pe=dn(d,1,this.transform.zoom),Oe=un(ne,pe,Ae,this.transform,Pe);let Ce=null;if(pe){const tt=Oi(ne,pe,Ae,this.transform,Pe);Ce=u.K([],this.transform.labelPlaneMatrix,tt)}this.retainedQueryData[v.bucketInstanceId]=new fn(v.bucketInstanceId,A,v.sourceLayerIndex,v.index,d.tileID);const Xe={bucket:v,layout:M,posMatrix:ne,textLabelPlaneMatrix:Oe,labelToScreenMatrix:Ce,scale:H,textPixelRatio:J,holdingForFade:d.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:u.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(g)for(const tt of v.sortKeyRanges){const{sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:st}=tt;r.push({sortKey:je,symbolInstanceStart:Ke,symbolInstanceEnd:st,parameters:Xe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Xe})}attemptAnchorPlacement(r,l,d,g,v,A,k,M,H,J,ne,pe,Ae,Pe,Oe,Ce){const Xe=u.ap[r.textAnchor],tt=[r.textOffset0,r.textOffset1],je=wr(Xe,d,g,tt,v),Ke=this.collisionIndex.placeCollisionBox(ni(l,je.x,je.y,A,k,this.transform.angle),ne,M,H,J.predicate,Ce);if((!Oe||this.collisionIndex.placeCollisionBox(ni(Oe,je.x,je.y,A,k,this.transform.angle),ne,M,H,J.predicate,Ce).box.length!==0)&&Ke.box.length>0){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID].text&&(st=this.prevPlacement.variableOffsets[pe.crossTileID].anchor),pe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[pe.crossTileID]={textOffset:tt,width:d,height:g,anchor:Xe,textBoxScale:v,prevAnchor:st},this.markUsedJustification(Ae,Xe,pe,Pe),Ae.allowVerticalPlacement&&(this.markUsedOrientation(Ae,Pe,pe),this.placedOrientations[pe.crossTileID]=Pe),{shift:je,placedGlyphBoxes:Ke}}}placeLayerBucketPart(r,l,d){const{bucket:g,layout:v,posMatrix:A,textLabelPlaneMatrix:k,labelToScreenMatrix:M,textPixelRatio:H,holdingForFade:J,collisionBoxArray:ne,partiallyEvaluatedTextSize:pe,collisionGroup:Ae}=r.parameters,Pe=v.get("text-optional"),Oe=v.get("icon-optional"),Ce=u.aq(v,"text-overlap","text-allow-overlap"),Xe=Ce==="always",tt=u.aq(v,"icon-overlap","icon-allow-overlap"),je=tt==="always",Ke=v.get("text-rotation-alignment")==="map",st=v.get("text-pitch-alignment")==="map",it=v.get("icon-text-fit")!=="none",mt=v.get("symbol-z-order")==="viewport-y",bt=Xe&&(je||!g.hasIconData()||Oe),xt=je&&(Xe||!g.hasTextData()||Pe);!g.collisionArrays&&ne&&g.deserializeCollisionBoxes(ne);const Tt=this.retainedQueryData[g.bucketInstanceId].tileID,Nt=this.terrain?(kt,rn)=>this.terrain.getElevation(Tt,kt,rn):null,sn=(kt,rn)=>{var Gt,nr;if(l[kt.crossTileID])return;if(J)return void(this.placements[kt.crossTileID]=new Hn(!1,!1,!1));let Tn=!1,_n=!1,Cn=!0,Tr=null,Wn={box:null,offscreen:null},Ti={box:null,offscreen:null},Qr=null,dr=null,hi=null,di=0,yo=0,Ws=0;rn.textFeatureIndex?di=rn.textFeatureIndex:kt.useRuntimeCollisionCircles&&(di=kt.featureIndex),rn.verticalTextFeatureIndex&&(yo=rn.verticalTextFeatureIndex);const Pl=rn.textBox;if(Pl){const Br=rr=>{let Nr=u.ah.horizontal;if(g.allowVerticalPlacement&&!rr&&this.prevPlacement){const ei=this.prevPlacement.placedOrientations[kt.crossTileID];ei&&(this.placedOrientations[kt.crossTileID]=ei,Nr=ei,this.markUsedOrientation(g,Nr,kt))}return Nr},Cr=(rr,Nr)=>{if(g.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&rn.verticalTextBox){for(const ei of g.writingModes)if(ei===u.ah.vertical?(Wn=Nr(),Ti=Wn):Wn=rr(),Wn&&Wn.box&&Wn.box.length)break}else Wn=rr()},fr=kt.textAnchorOffsetStartIndex,Ci=kt.textAnchorOffsetEndIndex;if(Ci===fr){const rr=(Nr,ei)=>{const Ur=this.collisionIndex.placeCollisionBox(Nr,Ce,H,A,Ae.predicate,Nt);return Ur&&Ur.box&&Ur.box.length&&(this.markUsedOrientation(g,ei,kt),this.placedOrientations[kt.crossTileID]=ei),Ur};Cr(()=>rr(Pl,u.ah.horizontal),()=>{const Nr=rn.verticalTextBox;return g.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Nr?rr(Nr,u.ah.vertical):{box:null,offscreen:null}}),Br(Wn&&Wn.box&&Wn.box.length)}else{let rr=u.ap[(nr=(Gt=this.prevPlacement)===null||Gt===void 0?void 0:Gt.variableOffsets[kt.crossTileID])===null||nr===void 0?void 0:nr.anchor];const Nr=(Ur,sp,_r)=>{const ld=Ur.x2-Ur.x1,ap=Ur.y2-Ur.y1,za=kt.textBoxScale,Ra=it&&tt==="never"?sp:null;let xs={box:[],offscreen:!1},Ac=Ce==="never"?1:2,ud="never";rr&&Ac++;for(let lp=0;lp<Ac;lp++){for(let Pc=fr;Pc<Ci;Pc++){const up=g.textAnchorOffsets.get(Pc);if(rr&&up.textAnchor!==rr)continue;const Mu=this.attemptAnchorPlacement(up,Ur,ld,ap,za,Ke,st,H,A,Ae,ud,kt,g,_r,Ra,Nt);if(Mu&&(xs=Mu.placedGlyphBoxes,xs&&xs.box&&xs.box.length))return Tn=!0,Tr=Mu.shift,xs}rr?rr=null:ud=Ce}return xs};Cr(()=>Nr(Pl,rn.iconBox,u.ah.horizontal),()=>{const Ur=rn.verticalTextBox;return g.allowVerticalPlacement&&!(Wn&&Wn.box&&Wn.box.length)&&kt.numVerticalGlyphVertices>0&&Ur?Nr(Ur,rn.verticalIconBox,u.ah.vertical):{box:null,offscreen:null}}),Wn&&(Tn=Wn.box,Cn=Wn.offscreen);const ei=Br(Wn&&Wn.box);if(!Tn&&this.prevPlacement){const Ur=this.prevPlacement.variableOffsets[kt.crossTileID];Ur&&(this.variableOffsets[kt.crossTileID]=Ur,this.markUsedJustification(g,Ur.anchor,kt,ei))}}}if(Qr=Wn,Tn=Qr&&Qr.box&&Qr.box.length>0,Cn=Qr&&Qr.offscreen,kt.useRuntimeCollisionCircles){const Br=g.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),Cr=u.ai(g.textSizeData,pe,Br),fr=v.get("text-padding");dr=this.collisionIndex.placeCollisionCircles(Ce,Br,g.lineVertexArray,g.glyphOffsetArray,Cr,A,k,M,d,st,Ae.predicate,kt.collisionCircleDiameter,fr,Nt),dr.circles.length&&dr.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),Tn=Xe||dr.circles.length>0&&!dr.collisionDetected,Cn=Cn&&dr.offscreen}if(rn.iconFeatureIndex&&(Ws=rn.iconFeatureIndex),rn.iconBox){const Br=Cr=>{const fr=it&&Tr?ni(Cr,Tr.x,Tr.y,Ke,st,this.transform.angle):Cr;return this.collisionIndex.placeCollisionBox(fr,tt,H,A,Ae.predicate,Nt)};Ti&&Ti.box&&Ti.box.length&&rn.verticalIconBox?(hi=Br(rn.verticalIconBox),_n=hi.box.length>0):(hi=Br(rn.iconBox),_n=hi.box.length>0),Cn=Cn&&hi.offscreen}const kl=Pe||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,Zs=Oe||kt.numIconVertices===0;if(kl||Zs?Zs?kl||(_n=_n&&Tn):Tn=_n&&Tn:_n=Tn=_n&&Tn,Tn&&Qr&&Qr.box&&this.collisionIndex.insertCollisionBox(Qr.box,Ce,v.get("text-ignore-placement"),g.bucketInstanceId,Ti&&Ti.box&&yo?yo:di,Ae.ID),_n&&hi&&this.collisionIndex.insertCollisionBox(hi.box,tt,v.get("icon-ignore-placement"),g.bucketInstanceId,Ws,Ae.ID),dr&&(Tn&&this.collisionIndex.insertCollisionCircles(dr.circles,Ce,v.get("text-ignore-placement"),g.bucketInstanceId,di,Ae.ID),d)){const Br=g.bucketInstanceId;let Cr=this.collisionCircleArrays[Br];Cr===void 0&&(Cr=this.collisionCircleArrays[Br]=new ur);for(let fr=0;fr<dr.circles.length;fr+=4)Cr.circles.push(dr.circles[fr+0]),Cr.circles.push(dr.circles[fr+1]),Cr.circles.push(dr.circles[fr+2]),Cr.circles.push(dr.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new Hn(Tn||bt,_n||xt,Cn||g.justReloaded),l[kt.crossTileID]=!0};if(mt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=g.getSortedSymbolIndexes(this.transform.angle);for(let rn=kt.length-1;rn>=0;--rn){const Gt=kt[rn];sn(g.symbolInstances.get(Gt),g.collisionArrays[Gt])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)sn(g.symbolInstances.get(kt),g.collisionArrays[kt]);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[g.bucketInstanceId];u.ar(kt.invProjMatrix,A),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,l,d,g){let v;v=g===u.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.as(l)];const A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const k of A)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=v>=0&&k!==v?0:d.crossTileID)}markUsedOrientation(r,l,d){const g=l===u.ah.horizontal||l===u.ah.horizontalOnly?l:0,v=l===u.ah.vertical?l:0,A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const k of A)r.text.placedSymbolArray.get(k).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(r):1,v=l?l.opacities:{},A=l?l.variableOffsets:{},k=l?l.placedOrientations:{};for(const M in this.placements){const H=this.placements[M],J=v[M];J?(this.opacities[M]=new jn(J,g,H.text,H.icon),d=d||H.text!==J.text.placed||H.icon!==J.icon.placed):(this.opacities[M]=new jn(null,g,H.text,H.icon,H.skipFade),d=d||H.text||H.icon)}for(const M in v){const H=v[M];if(!this.opacities[M]){const J=new jn(H,g,!1,!1);J.isHidden()||(this.opacities[M]=J,d=d||H.text.placed||H.icon.placed)}}for(const M in A)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=A[M]);for(const M in k)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=k[M]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const g of l){const v=g.getBucket(r);v&&g.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,d,g.collisionBoxArray)}}updateBucketOpacities(r,l,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0],v=g.layout,A=new jn(null,0,!1,!1,!0),k=v.get("text-allow-overlap"),M=v.get("icon-allow-overlap"),H=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),J=v.get("text-rotation-alignment")==="map",ne=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",Ae=new jn(null,0,k&&(M||!r.hasIconData()||v.get("icon-optional")),M&&(k||!r.hasTextData()||v.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const Pe=(Oe,Ce,Xe)=>{for(let tt=0;tt<Ce/4;tt++)Oe.opacityVertexArray.emplaceBack(Xe);Oe.hasVisibleVertices=Oe.hasVisibleVertices||Xe!==ca};for(let Oe=0;Oe<r.symbolInstances.length;Oe++){const Ce=r.symbolInstances.get(Oe),{numHorizontalGlyphVertices:Xe,numVerticalGlyphVertices:tt,crossTileID:je}=Ce;let Ke=this.opacities[je];l[je]?Ke=A:Ke||(Ke=Ae,this.opacities[je]=Ke),l[je]=!0;const st=Ce.numIconVertices>0,it=this.placedOrientations[Ce.crossTileID],mt=it===u.ah.vertical,bt=it===u.ah.horizontal||it===u.ah.horizontalOnly;if(Xe>0||tt>0){const xt=li(Ke.text);Pe(r.text,Xe,mt?ca:xt),Pe(r.text,tt,bt?ca:xt);const Tt=Ke.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(kt=>{kt>=0&&(r.text.placedSymbolArray.get(kt).hidden=Tt||mt?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=Tt||bt?1:0);const Nt=this.variableOffsets[Ce.crossTileID];Nt&&this.markUsedJustification(r,Nt.anchor,Ce,it);const sn=this.placedOrientations[Ce.crossTileID];sn&&(this.markUsedJustification(r,"left",Ce,sn),this.markUsedOrientation(r,sn,Ce))}if(st){const xt=li(Ke.icon),Tt=!(pe&&Ce.verticalPlacedIconSymbolIndex&&mt);Ce.placedIconSymbolIndex>=0&&(Pe(r.icon,Ce.numIconVertices,Tt?xt:ca),r.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(Pe(r.icon,Ce.numVerticalIconVertices,Tt?ca:xt),r.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Oe];if(xt){let Tt=new u.P(0,0);if(xt.textBox||xt.verticalTextBox){let sn=!0;if(H){const kt=this.variableOffsets[je];kt?(Tt=wr(kt.anchor,kt.width,kt.height,kt.textOffset,kt.textBoxScale),J&&Tt._rotate(ne?this.transform.angle:-this.transform.angle)):sn=!1}xt.textBox&&Rr(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!sn||mt,Tt.x,Tt.y),xt.verticalTextBox&&Rr(r.textCollisionBox.collisionVertexArray,Ke.text.placed,!sn||bt,Tt.x,Tt.y)}const Nt=!!(!bt&&xt.verticalIconBox);xt.iconBox&&Rr(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Nt,pe?Tt.x:0,pe?Tt.y:0),xt.verticalIconBox&&Rr(r.iconCollisionBox.collisionVertexArray,Ke.icon.placed,!Nt,pe?Tt.x:0,pe?Tt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Oe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Oe.invProjMatrix,r.placementViewportMatrix=Oe.viewportMatrix,r.collisionCircleArray=Oe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function Rr(y,r,l,d,g){y.emplaceBack(r?1:0,l?1:0,d||0,g||0),y.emplaceBack(r?1:0,l?1:0,d||0,g||0),y.emplaceBack(r?1:0,l?1:0,d||0,g||0),y.emplaceBack(r?1:0,l?1:0,d||0,g||0)}const po=Math.pow(2,25),la=Math.pow(2,24),ua=Math.pow(2,17),Dn=Math.pow(2,16),In=Math.pow(2,9),To=Math.pow(2,8),_i=Math.pow(2,1);function li(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,l=Math.floor(127*y.opacity);return l*po+r*la+l*ua+r*Dn+l*In+r*To+l*_i+r}const ca=0;class Fi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,g,v){const A=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(A,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((k,M)=>k.sortKey-M.sortKey));this._currentPartIndex<A.length;)if(l.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,v())return!0;return!1}}class ji{constructor(r,l,d,g,v,A,k,M){this.placement=new ai(r,l,A,k,M),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const g=w.now(),v=()=>!this._forceFullPlacement&&w.now()-g>2;for(;this._currentPlacementIndex>=0;){const A=l[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=k)&&(!A.maxzoom||A.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Fi(A)),this._inProgressLayer.continuePlacement(d[A.source],this.placement,this._showCollisionBoxes,A,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const ui=512/u.W/2;class tl{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const g=new Map;for(let v=0;v<l.length;v++){const A=l.get(v),k=A.key,M=g.get(k);M?M.push(A):g.set(k,[A])}for(const[v,A]of g){const k={positions:A.map(M=>({x:Math.floor(M.anchorX*ui),y:Math.floor(M.anchorY*ui)})),crossTileIDs:A.map(M=>M.crossTileID)};if(k.positions.length>128){const M=new u.au(k.positions.length,16,Uint16Array);for(const{x:H,y:J}of k.positions)M.add(H,J);M.finish(),delete k.positions,k.index=M}this._symbolsByKey[v]=k}}getScaledCoordinates(r,l){const{x:d,y:g,z:v}=this.tileID.canonical,{x:A,y:k,z:M}=l.canonical,H=ui/Math.pow(2,M-v),J=(k*u.W+r.anchorY)*H,ne=g*u.W*ui;return{x:Math.floor((A*u.W+r.anchorX)*H-d*u.W*ui),y:Math.floor(J-ne)}}findMatches(r,l,d){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let v=0;v<r.length;v++){const A=r.get(v);if(A.crossTileID)continue;const k=this._symbolsByKey[A.key];if(!k)continue;const M=this.getScaledCoordinates(A,l);if(k.index){const H=k.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const J of H){const ne=k.crossTileIDs[J];if(!d[ne]){d[ne]=!0,A.crossTileID=ne;break}}}else if(k.positions)for(let H=0;H<k.positions.length;H++){const J=k.positions[H],ne=k.crossTileIDs[H];if(Math.abs(J.x-M.x)<=g&&Math.abs(J.y-M.y)<=g&&!d[ne]){d[ne]=!0,A.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class vr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ha{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const g=this.indexes[d],v={};for(const A in g){const k=g[A];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+l),v[k.tileID.key]=k}this.indexes[d]=v}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const v in this.indexes){const A=this.indexes[v];if(Number(v)>r.overscaledZ)for(const k in A){const M=A[k];M.tileID.isChildOf(r)&&M.findMatches(l.symbolInstances,r,g)}else{const k=A[r.scaledTo(Number(v)).key];k&&k.findMatches(l.symbolInstances,r,g)}}for(let v=0;v<l.symbolInstances.length;v++){const A=l.symbolInstances.get(v);A.crossTileID||(A.crossTileID=d.generate(),g[A.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new tl(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d of l.getCrossTileIDsLists())for(const g of d)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const g=this.indexes[d];for(const v in g)r[g[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[v]),delete g[v],l=!0)}return l}}class qo{constructor(){this.layerIndexes={},this.crossTileIDs=new vr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new ha);let v=!1;const A={};g.handleWrapJump(d);for(const k of l){const M=k.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,M,this.crossTileIDs)&&(v=!0),A[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(A)&&(v=!0),v}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const Yn=(y,r)=>u.t(y,r&&r.filter(l=>l.identifier!=="source.canvas")),Di=u.av();class xi extends u.E{constructor(r,l={}){super(),this._rtlTextPluginStateChange=()=>{for(const d in this.sourceCaches){const g=this.sourceCaches[d].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new wt(ht(),r._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(d,g)=>this.getGlyphs(d,g)),this.dispatcher.registerMessageHandler("getImages",(d,g)=>this.getImages(d,g)),this.imageManager=new de,this.imageManager.setEventedParent(this),this.glyphManager=new te(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Be(256,512),this.crossTileSymbolIndex=new qo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.ax()),z().on("pluginStateChange",this._rtlTextPluginStateChange),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const g=this.sourceCaches[d.sourceId];if(!g)return;const v=g.getSource();if(v&&v.vectorLayerIds)for(const A in this._layers){const k=this._layers[A];k.source===v.id&&this._validateLayer(k)}})}loadURL(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const g=this.map._requestManager.transformRequest(r,ie.Style);this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(v=>{this._loadStyleRequest=null,this._load(v.data,l,d)}).catch(v=>{this._loadStyleRequest=null,v&&this.fire(new u.j(v))})}loadJSON(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Di,{validate:!1})}_load(r,l,d){var g;const v=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!Yn(this,u.x(v))){this._loaded=!0,this.stylesheet=v;for(const A in v.sources)this.addSource(A,v.sources[A],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Ee(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const d=u.az(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(r,l=!1,d=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,A,k,M){return u._(this,void 0,void 0,function*(){const H=q(v),J=k>1?"@2x":"",ne={},pe={};for(const{id:Ae,url:Pe}of H){const Oe=A.transformRequest(A.normalizeSpriteURL(Pe,J,".json"),ie.SpriteJSON);ne[Ae]=u.h(Oe,M);const Ce=A.transformRequest(A.normalizeSpriteURL(Pe,J,".png"),ie.SpriteImage);pe[Ae]=$.getImage(Ce,M)}return yield Promise.all([...Object.values(ne),...Object.values(pe)]),function(Ae,Pe){return u._(this,void 0,void 0,function*(){const Oe={};for(const Ce in Ae){Oe[Ce]={};const Xe=w.getImageCanvasContext((yield Pe[Ce]).data),tt=(yield Ae[Ce]).data;for(const je in tt){const{width:Ke,height:st,x:it,y:mt,sdf:bt,pixelRatio:xt,stretchX:Tt,stretchY:Nt,content:sn}=tt[je];Oe[Ce][je]={data:null,pixelRatio:xt,sdf:bt,stretchX:Tt,stretchY:Nt,content:sn,spriteData:{width:Ke,height:st,x:it,y:mt,context:Xe}}}}return Oe})}(ne,pe)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const A in v){this._spritesImagesIds[A]=[];const k=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(M=>!(M in v)):[];for(const M of k)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in v[A]){const H=A==="default"?M:`${A}:${M}`;this._spritesImagesIds[A].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,v[A][M],!1):this.imageManager.addImage(H,v[A][M]),l&&(this._changedImages[H]=!0)}}}).catch(v=>{this._spriteRequest=null,g=v,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const d=[];for(const g of r)l[g]&&d.push(l[g]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const g=this._layers[d];g.type!=="custom"&&(r[d]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(g.length||v.length)&&this._updateWorkerLayers(g,v);for(const A in this._updatedSources){const k=this._updatedSources[A];if(k==="reload")this._reloadSource(A);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const v=this.sourceCaches[g];d[g]=v.used,v.used=!1}for(const g of this._order){const v=this._layers[g];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const g in d){const v=this.sourceCaches[g];d[g]!==v.used&&v.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){this._checkLoaded();const d=this.serialize();if(r=l.transformStyle?l.transformStyle(d,r):r,Yn(this,u.x(r)))return!1;(r=u.aA(r)).layers=u.ay(r.layers);const g=u.aB(d,r),v=this._getOperationsToPerform(g);if(v.unimplemented.length>0)throw new Error(`Unimplemented: ${v.unimplemented.join(", ")}.`);if(v.operations.length===0)return!1;for(const A of v.operations)A();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],d=[];for(const g of r)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":l.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":l.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":l.push(()=>{});break;default:d.push(g.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.sourceCaches[r]=new ot(r,l,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let v;if(r.type==="custom"){if(Yn(this,u.aC(r)))return;v=u.az(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(g,r.source),r=u.aA(r),r=u.e(r,{source:g})),this._validate(u.x.layer,`layers.${g}`,r,{arrayIndex:-1},d))return;v=u.az(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:g}})}const A=l?this._order.indexOf(l):this._order.length;if(l&&A===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(A,0,g),this._layerOrderChanged=!0,this._layers[g]=v,this._removedLayers[g]&&v.source&&v.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===d||(l!=null&&(g.minzoom=l),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!u.aD(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,l,null,d)||(g.filter=u.aA(l),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aA(this.getLayer(r).filter)}setLayoutProperty(r,l,d,g={}){this._checkLoaded();const v=this.getLayer(r);v?u.aD(v.getLayoutProperty(l),d)||(v.setLayoutProperty(l,d,g),this._updateLayer(v)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,g={}){this._checkLoaded();const v=this.getLayer(r);v?u.aD(v.getPaintProperty(l),d)||(v.setPaintProperty(l,d,g)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,g=r.sourceLayer,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const A=v.getSource().type;A==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||g?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(g,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const v=g.getSource().type,A=v==="vector"?r.sourceLayer:void 0;v!=="vector"||A?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(A,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0)return g.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aE(this.sourceCaches,v=>v.serialize()),l=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aF({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:r,layers:l,terrain:d},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=A=>this._layers[A].type==="fill-extrusion",d={},g=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(l(k)){d[k]=A;for(const M of r){const H=M[k];if(H)for(const J of H)g.push(J)}}}g.sort((A,k)=>k.intersectionZ-A.intersectionZ);const v=[];for(let A=this._order.length-1;A>=0;A--){const k=this._order[A];if(l(k))for(let M=g.length-1;M>=0;M--){const H=g[M].feature;if(d[H.layer.id]<A)break;v.push(H),g.pop()}else for(const M of r){const H=M[k];if(H)for(const J of H)v.push(J.feature)}}return v}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const k of l.layers){const M=this._layers[k];if(!M)return this.fire(new u.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const v=[];l.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const k in this.sourceCaches)l.layers&&!g[k]||v.push(Et(this.sourceCaches[k],this._layers,A,r,l,d));return this.placement&&v.push(function(k,M,H,J,ne,pe,Ae){const Pe={},Oe=pe.queryRenderedSymbols(J),Ce=[];for(const Xe of Object.keys(Oe).map(Number))Ce.push(Ae[Xe]);Ce.sort($t);for(const Xe of Ce){const tt=Xe.featureIndex.lookupSymbolFeatures(Oe[Xe.bucketInstanceId],M,Xe.bucketIndex,Xe.sourceLayerIndex,ne.filter,ne.layers,ne.availableImages,k);for(const je in tt){const Ke=Pe[je]=Pe[je]||[],st=tt[je];st.sort((it,mt)=>{const bt=Xe.featureSortOrder;if(bt){const xt=bt.indexOf(it.featureIndex);return bt.indexOf(mt.featureIndex)-xt}return mt.featureIndex-it.featureIndex});for(const it of st)Ke.push(it)}}for(const Xe in Pe)Pe[Xe].forEach(tt=>{const je=tt.feature,Ke=H[k[Xe].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=Ke});return Pe}(this._layers,A,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(g,v){const A=g.getRenderableIds().map(H=>g.getTileByID(H)),k=[],M={};for(let H=0;H<A.length;H++){const J=A[H],ne=J.tileID.canonical.key;M[ne]||(M[ne]=!0,J.querySourceFeatures(k,v))}return k}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const A in r)if(!u.aD(r[A],d[A])){g=!0;break}if(!g)return;const v={now:w.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(v)}_validate(r,l,d,g,v={}){return(!v||v.validate!==!1)&&Yn(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:d,styleSpec:u.v},g)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),z().off("pluginStateChange",this._rtlTextPluginStateChange);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,g,v=!1){let A=!1,k=!1;const M={};for(const H of this._order){const J=this._layers[H];if(J.type!=="symbol")continue;if(!M[J.source]){const pe=this.sourceCaches[J.source];M[J.source]=pe.getRenderableIds(!0).map(Ae=>pe.getTileByID(Ae)).sort((Ae,Pe)=>Pe.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(Pe.tileID)?-1:1))}const ne=this.crossTileSymbolIndex.addLayer(J,M[J.source],r.center.lng);A=A||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(w.now(),r.zoom))&&(this.pauseablePlacement=new ji(r,this.map.terrain,this._order,v,l,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(w.now()),k=!0),A&&this.pauseablePlacement.placement.setStale()),k||A)for(const H of this._order){const J=this._layers[H];J.type==="symbol"&&this.placement.updateLayerOpacities(J,M[J.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(w.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},g){this._checkLoaded();const v=[{id:r,url:l}],A=[...q(this.stylesheet.sprite),...v];this._validate(u.x.sprite,"sprite",A,null,d)||(this.stylesheet.sprite=A,this._loadSprite(v,!0,g))}removeSprite(r){this._checkLoaded();const l=q(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return q(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var nl=u.X([{name:"a_pos",type:"Int16",components:2}]),mo="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const da={prelude:$n(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:$n(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:$n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$n(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:$n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$n("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:$n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:$n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:$n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$n(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:$n(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$n(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:$n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$n("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",mo),terrainDepth:$n("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",mo),terrainCoords:$n("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",mo)};function $n(y,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=v?v.concat(g):g,k={};return{fragmentSource:y=y.replace(l,(M,H,J,ne,pe)=>(k[pe]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
varying ${J} ${ne} ${pe};
#else
uniform ${J} ${ne} u_${pe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${pe}
    ${J} ${ne} ${pe} = u_${pe};
#endif
`)),vertexSource:r=r.replace(l,(M,H,J,ne,pe)=>{const Ae=ne==="float"?"vec2":"vec4",Pe=pe.match(/color/)?"color":Ae;return k[pe]?H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${J} ${Ae} a_${pe};
varying ${J} ${ne} ${pe};
#else
uniform ${J} ${ne} u_${pe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = a_${pe};
#else
    ${J} ${ne} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${pe} = unpack_mix_${Pe}(a_${pe}, u_${pe}_t);
#else
    ${J} ${ne} ${pe} = u_${pe};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${pe}
uniform lowp float u_${pe}_t;
attribute ${J} ${Ae} a_${pe};
#else
uniform ${J} ${ne} u_${pe};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${pe}
    ${J} ${ne} ${pe} = a_${pe};
#else
    ${J} ${ne} ${pe} = u_${pe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${pe}
    ${J} ${ne} ${pe} = unpack_mix_${Pe}(a_${pe}, u_${pe}_t);
#else
    ${J} ${ne} ${pe} = u_${pe};
#endif
`}),staticAttributes:d,staticUniforms:A}}class fs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,g,v,A,k,M,H){this.context=r;let J=this.boundPaintVertexBuffers.length!==g.length;for(let ne=0;!J&&ne<g.length;ne++)this.boundPaintVertexBuffers[ne]!==g[ne]&&(J=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||J||this.boundIndexBuffer!==v||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==H?this.freshBind(l,d,g,v,A,k,M,H):(r.bindVertexArray.set(this.vao),k&&k.bind(),v&&v.dynamicDraw&&v.bind(),M&&M.bind(),H&&H.bind())}freshBind(r,l,d,g,v,A,k,M){const H=r.numAttributes,J=this.context,ne=J.gl;this.vao&&this.destroy(),this.vao=J.createVertexArray(),J.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=M,l.enableAttributes(ne,r);for(const pe of d)pe.enableAttributes(ne,r);A&&A.enableAttributes(ne,r),k&&k.enableAttributes(ne,r),M&&M.enableAttributes(ne,r),l.bind(),l.setVertexAttribPointers(ne,r,v);for(const pe of d)pe.bind(),pe.setVertexAttribPointers(ne,r,v);A&&(A.bind(),A.setVertexAttribPointers(ne,r,v)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(ne,r,v)),M&&(M.bind(),M.setVertexAttribPointers(ne,r,v)),J.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ds(y){const r=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const d=y[l].split(" ");r.push(d.pop())}return r}class Ko{constructor(r,l,d,g,v,A){const k=r.gl;this.program=k.createProgram();const M=Ds(l.staticAttributes),H=d?d.getBinderAttributes():[],J=M.concat(H),ne=da.prelude.staticUniforms?Ds(da.prelude.staticUniforms):[],pe=l.staticUniforms?Ds(l.staticUniforms):[],Ae=d?d.getBinderUniforms():[],Pe=ne.concat(pe).concat(Ae),Oe=[];for(const it of Pe)Oe.indexOf(it)<0&&Oe.push(it);const Ce=d?d.defines():[];v&&Ce.push("#define OVERDRAW_INSPECTOR;"),A&&Ce.push("#define TERRAIN3D;");const Xe=Ce.concat(da.prelude.fragmentSource,l.fragmentSource).join(`
`),tt=Ce.concat(da.prelude.vertexSource,l.vertexSource).join(`
`),je=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(je,Xe),k.compileShader(je),!k.getShaderParameter(je,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(je)}`);k.attachShader(this.program,je);const Ke=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(Ke,tt),k.compileShader(Ke),!k.getShaderParameter(Ke,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(Ke)}`);k.attachShader(this.program,Ke),this.attributes={};const st={};this.numAttributes=J.length;for(let it=0;it<this.numAttributes;it++)J[it]&&(k.bindAttribLocation(this.program,it,J[it]),this.attributes[J[it]]=it);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(Ke),k.deleteShader(je);for(let it=0;it<Oe.length;it++){const mt=Oe[it];if(mt&&!st[mt]){const bt=k.getUniformLocation(this.program,mt);bt&&(st[mt]=bt)}}this.fixedUniforms=g(r,st),this.terrainUniforms=((it,mt)=>({u_depth:new u.aG(it,mt.u_depth),u_terrain:new u.aG(it,mt.u_terrain),u_terrain_dim:new u.aH(it,mt.u_terrain_dim),u_terrain_matrix:new u.aI(it,mt.u_terrain_matrix),u_terrain_unpack:new u.aJ(it,mt.u_terrain_unpack),u_terrain_exaggeration:new u.aH(it,mt.u_terrain_exaggeration)}))(r,st),this.binderUniforms=d?d.getUniforms(r,st):[]}draw(r,l,d,g,v,A,k,M,H,J,ne,pe,Ae,Pe,Oe,Ce,Xe,tt){const je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(g),r.setColorMode(v),r.setCullFace(A),M){r.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,M.depthTexture),r.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,M.texture);for(const st in this.terrainUniforms)this.terrainUniforms[st].set(M[st])}for(const st in this.fixedUniforms)this.fixedUniforms[st].set(k[st]);Oe&&Oe.setUniforms(r,this.binderUniforms,Ae,{zoom:Pe});let Ke=0;switch(l){case je.LINES:Ke=2;break;case je.TRIANGLES:Ke=3;break;case je.LINE_STRIP:Ke=1}for(const st of pe.get()){const it=st.vaos||(st.vaos={});(it[H]||(it[H]=new fs)).bind(r,this,J,Oe?Oe.getPaintVertexBuffers():[],ne,st.vertexOffset,Ce,Xe,tt),je.drawElements(l,st.primitiveLength*Ke,je.UNSIGNED_SHORT,st.primitiveOffset*Ke*2)}}}function ci(y,r,l){const d=1/dn(l,1,r.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,r.transform.tileZoom)/g,A=v*(l.tileID.canonical.x+l.tileID.wrap*g),k=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[A>>16,k>>16],u_pixel_coord_lower:[65535&A,65535&k]}}const fa=(y,r,l,d)=>{const g=r.style.light,v=g.properties.get("position"),A=[v.x,v.y,v.z],k=function(){var H=new u.A(9);return u.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();g.properties.get("anchor")==="viewport"&&function(H,J){var ne=Math.sin(J),pe=Math.cos(J);H[0]=pe,H[1]=ne,H[2]=0,H[3]=-ne,H[4]=pe,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(k,-r.transform.angle),function(H,J,ne){var pe=J[0],Ae=J[1],Pe=J[2];H[0]=pe*ne[0]+Ae*ne[3]+Pe*ne[6],H[1]=pe*ne[1]+Ae*ne[4]+Pe*ne[7],H[2]=pe*ne[2]+Ae*ne[5]+Pe*ne[8]}(A,A,k);const M=g.properties.get("color");return{u_matrix:y,u_lightpos:A,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+l,u_opacity:d}},Bh=(y,r,l,d,g,v,A)=>u.e(fa(y,r,l,d),ci(v,r,A),{u_height_factor:-Math.pow(2,g.overscaledZ)/A.tileSize/8}),oc=y=>({u_matrix:y}),rl=(y,r,l,d)=>u.e(oc(y),ci(l,r,d)),Nh=(y,r)=>({u_matrix:y,u_world:r}),du=(y,r,l,d,g)=>u.e(rl(y,r,l,d),{u_world:g}),fu=(y,r,l,d)=>{const g=y.transform;let v,A;if(d.paint.get("circle-pitch-alignment")==="map"){const k=dn(l,1,g.zoom);v=!0,A=[k,k]}else v=!1,A=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:A}},pu=(y,r,l)=>{const d=dn(l,1,r.zoom),g=Math.pow(2,r.zoom-l.tileID.overscaledZ),v=l.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*g),r.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:v}},pa=(y,r,l=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:l}),il=y=>({u_matrix:y}),ps=(y,r,l,d)=>({u_matrix:y,u_extrude_scale:dn(r,1,l),u_intensity:d});function sc(y,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Y(0,d/l).toLngLat().lat,new u.Y(0,(d+1)/l).toLngLat().lat]}const ol=(y,r,l,d)=>{const g=y.transform;return{u_matrix:ga(y,r,l,d),u_ratio:1/dn(r,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},ac=(y,r,l,d,g)=>u.e(ol(y,r,l,g),{u_image:0,u_image_height:d}),ms=(y,r,l,d,g)=>{const v=y.transform,A=wi(r,v);return{u_matrix:ga(y,r,l,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/dn(r,1,v.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[A,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},ma=(y,r,l,d,g,v)=>{const A=y.lineAtlas,k=wi(r,y.transform),M=l.layout.get("line-cap")==="round",H=A.getDash(d.from,M),J=A.getDash(d.to,M),ne=H.width*g.fromScale,pe=J.width*g.toScale;return u.e(ol(y,r,l,v),{u_patternscale_a:[k/ne,-H.height/2],u_patternscale_b:[k/pe,-J.height/2],u_sdfgamma:A.width/(256*Math.min(ne,pe)*y.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:J.y,u_mix:g.t})};function wi(y,r){return 1/dn(y,1,r.tileZoom)}function ga(y,r,l,d){return y.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const sl=(y,r,l,d,g)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(A=g.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(v=g.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:gs(g.paint.get("raster-hue-rotate"))};var v,A};function gs(y){y*=Math.PI/180;const r=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const ya=(y,r,l,d,g,v,A,k,M,H)=>{const J=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:J.cameraToCenterDistance,u_pitch:J.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:J.width/J.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:A,u_coord_matrix:k,u_is_text:+M,u_pitch_with_map:+d,u_texsize:H,u_texture:0}},va=(y,r,l,d,g,v,A,k,M,H,J)=>{const ne=g.transform;return u.e(ya(y,r,l,d,g,v,A,k,M,H),{u_gamma_scale:d?Math.cos(ne._pitch)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+J})},_a=(y,r,l,d,g,v,A,k,M,H)=>u.e(va(y,r,l,d,g,v,A,k,!0,M,!0),{u_texsize_icon:H,u_texture_icon:1}),Uh=(y,r,l)=>({u_matrix:y,u_opacity:r,u_color:l}),lc=(y,r,l,d,g,v)=>u.e(function(A,k,M,H){const J=M.imageManager.getPattern(A.from.toString()),ne=M.imageManager.getPattern(A.to.toString()),{width:pe,height:Ae}=M.imageManager.getPixelSize(),Pe=Math.pow(2,H.tileID.overscaledZ),Oe=H.tileSize*Math.pow(2,M.transform.tileZoom)/Pe,Ce=Oe*(H.tileID.canonical.x+H.tileID.wrap*Pe),Xe=Oe*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:J.tl,u_pattern_br_a:J.br,u_pattern_tl_b:ne.tl,u_pattern_br_b:ne.br,u_texsize:[pe,Ae],u_mix:k.t,u_pattern_size_a:J.displaySize,u_pattern_size_b:ne.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/dn(H,1,M.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,Xe>>16],u_pixel_coord_lower:[65535&Ce,65535&Xe]}}(d,v,l,g),{u_matrix:y,u_opacity:r}),uc={fillExtrusion:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_opacity:new u.aH(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_lightpos:new u.aK(y,r.u_lightpos),u_lightintensity:new u.aH(y,r.u_lightintensity),u_lightcolor:new u.aK(y,r.u_lightcolor),u_vertical_gradient:new u.aH(y,r.u_vertical_gradient),u_height_factor:new u.aH(y,r.u_height_factor),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade),u_opacity:new u.aH(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_texsize:new u.aL(y,r.u_texsize),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_scale_with_map:new u.aG(y,r.u_scale_with_map),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_matrix:new u.aI(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aH(y,r.u_pixels_to_tile_units),u_extrude_scale:new u.aL(y,r.u_extrude_scale),u_overscale_factor:new u.aH(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_inv_matrix:new u.aI(y,r.u_inv_matrix),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_viewport_size:new u.aL(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new u.aM(y,r.u_color),u_matrix:new u.aI(y,r.u_matrix),u_overlay:new u.aG(y,r.u_overlay),u_overlay_scale:new u.aH(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new u.aH(y,r.u_extrude_scale),u_intensity:new u.aH(y,r.u_intensity),u_matrix:new u.aI(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_world:new u.aL(y,r.u_world),u_image:new u.aG(y,r.u_image),u_color_ramp:new u.aG(y,r.u_color_ramp),u_opacity:new u.aH(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_latrange:new u.aL(y,r.u_latrange),u_light:new u.aL(y,r.u_light),u_shadow:new u.aM(y,r.u_shadow),u_highlight:new u.aM(y,r.u_highlight),u_accent:new u.aM(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_image:new u.aG(y,r.u_image),u_dimension:new u.aL(y,r.u_dimension),u_zoom:new u.aH(y,r.u_zoom),u_unpack:new u.aJ(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_image:new u.aG(y,r.u_image),u_image_height:new u.aH(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texsize:new u.aL(y,r.u_texsize),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_image:new u.aG(y,r.u_image),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_scale:new u.aK(y,r.u_scale),u_fade:new u.aH(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ratio:new u.aH(y,r.u_ratio),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,r.u_units_to_pixels),u_patternscale_a:new u.aL(y,r.u_patternscale_a),u_patternscale_b:new u.aL(y,r.u_patternscale_b),u_sdfgamma:new u.aH(y,r.u_sdfgamma),u_image:new u.aG(y,r.u_image),u_tex_y_a:new u.aH(y,r.u_tex_y_a),u_tex_y_b:new u.aH(y,r.u_tex_y_b),u_mix:new u.aH(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_tl_parent:new u.aL(y,r.u_tl_parent),u_scale_parent:new u.aH(y,r.u_scale_parent),u_buffer_scale:new u.aH(y,r.u_buffer_scale),u_fade_t:new u.aH(y,r.u_fade_t),u_opacity:new u.aH(y,r.u_opacity),u_image0:new u.aG(y,r.u_image0),u_image1:new u.aG(y,r.u_image1),u_brightness_low:new u.aH(y,r.u_brightness_low),u_brightness_high:new u.aH(y,r.u_brightness_high),u_saturation_factor:new u.aH(y,r.u_saturation_factor),u_contrast_factor:new u.aH(y,r.u_contrast_factor),u_spin_weights:new u.aK(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texture:new u.aG(y,r.u_texture),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new u.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,r.u_is_size_feature_constant),u_size_t:new u.aH(y,r.u_size_t),u_size:new u.aH(y,r.u_size),u_camera_to_center_distance:new u.aH(y,r.u_camera_to_center_distance),u_pitch:new u.aH(y,r.u_pitch),u_rotate_symbol:new u.aG(y,r.u_rotate_symbol),u_aspect_ratio:new u.aH(y,r.u_aspect_ratio),u_fade_change:new u.aH(y,r.u_fade_change),u_matrix:new u.aI(y,r.u_matrix),u_label_plane_matrix:new u.aI(y,r.u_label_plane_matrix),u_coord_matrix:new u.aI(y,r.u_coord_matrix),u_is_text:new u.aG(y,r.u_is_text),u_pitch_with_map:new u.aG(y,r.u_pitch_with_map),u_texsize:new u.aL(y,r.u_texsize),u_texsize_icon:new u.aL(y,r.u_texsize_icon),u_texture:new u.aG(y,r.u_texture),u_texture_icon:new u.aG(y,r.u_texture_icon),u_gamma_scale:new u.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,r.u_device_pixel_ratio),u_is_halo:new u.aG(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_color:new u.aM(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_opacity:new u.aH(y,r.u_opacity),u_image:new u.aG(y,r.u_image),u_pattern_tl_a:new u.aL(y,r.u_pattern_tl_a),u_pattern_br_a:new u.aL(y,r.u_pattern_br_a),u_pattern_tl_b:new u.aL(y,r.u_pattern_tl_b),u_pattern_br_b:new u.aL(y,r.u_pattern_br_b),u_texsize:new u.aL(y,r.u_texsize),u_mix:new u.aH(y,r.u_mix),u_pattern_size_a:new u.aL(y,r.u_pattern_size_a),u_pattern_size_b:new u.aL(y,r.u_pattern_size_b),u_scale_a:new u.aH(y,r.u_scale_a),u_scale_b:new u.aH(y,r.u_scale_b),u_pixel_coord_upper:new u.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aH(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_ele_delta:new u.aH(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new u.aI(y,r.u_matrix),u_texture:new u.aG(y,r.u_texture),u_terrain_coords_id:new u.aH(y,r.u_terrain_coords_id),u_ele_delta:new u.aH(y,r.u_ele_delta)})};class cc{constructor(r,l,d){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ys={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class al{constructor(r,l,d,g){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=r;const v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const g=l.attributes[this.attributes[d].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,l,d){for(let g=0;g<this.attributes.length;g++){const v=this.attributes[g],A=l.attributes[v.name];A!==void 0&&r.vertexAttribPointer(A,v.components,r[ys[v.type]],!1,this.itemSize,v.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qr=new WeakMap;function Kr(y){var r;if(qr.has(y))return qr.get(y);{const l=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return qr.set(y,l),l}}class Rn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ll extends Rn{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ul extends Rn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class cl extends Rn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class mu extends Rn{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Bs extends Rn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class gu extends Rn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class yu extends Rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class hl extends Rn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class hc extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class dc extends Rn{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ns extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class fc extends Rn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class vu extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class $h extends Rn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Vh extends Rn{getDefault(){return u.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Gh extends Rn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Hh extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class dl extends Rn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class fl extends Rn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class _u extends Rn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class xu extends Rn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Us extends Rn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class xa extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class pc extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Yo extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Jo extends Rn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Yi extends Rn{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class $s extends Rn{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const d=this.gl;Kr(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Vs extends Rn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class mc extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class wu extends Rn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class An extends Rn{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class pl extends An{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class ml extends An{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class gc extends An{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class wa{constructor(r,l,d,g,v){this.context=r,this.width=l,this.height=d;const A=r.gl,k=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new pl(r,k),g)this.depthAttachment=v?new gc(r,k):new ml(r,k);else if(v)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Jn{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}Jn.Replace=[1,0],Jn.disabled=new Jn(Jn.Replace,u.aO.transparent,[!1,!1,!1,!1]),Jn.unblended=new Jn(Jn.Replace,u.aO.transparent,[!0,!0,!0,!0]),Jn.alphaBlended=new Jn([1,771],u.aO.transparent,[!0,!0,!0,!0]);class yc{constructor(r){var l,d;if(this.gl=r,this.clearColor=new ll(this),this.clearDepth=new ul(this),this.clearStencil=new cl(this),this.colorMask=new mu(this),this.depthMask=new Bs(this),this.stencilMask=new gu(this),this.stencilFunc=new yu(this),this.stencilOp=new hl(this),this.stencilTest=new hc(this),this.depthRange=new dc(this),this.depthTest=new Ns(this),this.depthFunc=new fc(this),this.blend=new vu(this),this.blendFunc=new $h(this),this.blendColor=new Vh(this),this.blendEquation=new Gh(this),this.cullFace=new Hh(this),this.cullFaceSide=new dl(this),this.frontFace=new fl(this),this.program=new _u(this),this.activeTexture=new xu(this),this.viewport=new Us(this),this.bindFramebuffer=new xa(this),this.bindRenderbuffer=new pc(this),this.bindTexture=new Yo(this),this.bindVertexBuffer=new Jo(this),this.bindElementBuffer=new Yi(this),this.bindVertexArray=new $s(this),this.pixelStoreUnpack=new Vs(this),this.pixelStoreUnpackPremultiplyAlpha=new mc(this),this.pixelStoreUnpackFlipY=new wu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Kr(r)){this.HALF_FLOAT=r.HALF_FLOAT;const g=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:g==null?void 0:g.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const g=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new cc(this,r,l)}createVertexBuffer(r,l,d){return new al(this,r,l,d)}createRenderbuffer(r,l,d){const g=this.gl,v=g.createRenderbuffer();return this.bindRenderbuffer.set(v),g.renderbufferStorage(g.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),v}createFramebuffer(r,l,d,g){return new wa(this,r,l,d,g)}clear({color:r,depth:l,stencil:d}){const g=this.gl;let v=0;r&&(v|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(v|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),g.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aD(r.blendFunction,Jn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Kr(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Kr(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class En{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}En.ReadOnly=!1,En.ReadWrite=!0,En.disabled=new En(519,En.ReadOnly,[0,1]);const bu=7680;class qn{constructor(r,l,d,g,v,A){this.test=r,this.ref=l,this.mask=d,this.fail=g,this.depthFail=v,this.pass=A}}qn.disabled=new qn({func:519,mask:0},0,0,bu,bu,bu);class Bn{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let bi;function gl(y,r,l,d,g,v,A){const k=y.context,M=k.gl,H=y.useProgram("collisionBox"),J=[];let ne=0,pe=0;for(let je=0;je<d.length;je++){const Ke=d[je],st=r.getTile(Ke),it=st.getBucket(l);if(!it)continue;let mt=Ke.posMatrix;g[0]===0&&g[1]===0||(mt=y.translatePosMatrix(Ke.posMatrix,st,g,v));const bt=A?it.textCollisionBox:it.iconCollisionBox,xt=it.collisionCircleArray;if(xt.length>0){const Tt=u.F(),Nt=mt;u.aP(Tt,it.placementInvProjMatrix,y.transform.glCoordMatrix),u.aP(Tt,Tt,it.placementViewportMatrix),J.push({circleArray:xt,circleOffset:pe,transform:Nt,invTransform:Tt,coord:Ke}),ne+=xt.length/4,pe=ne}bt&&H.draw(k,M.LINES,En.disabled,qn.disabled,y.colorModeForRenderPass(),Bn.disabled,pu(mt,y.transform,st),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke),l.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,null,y.transform.zoom,null,null,bt.collisionVertexBuffer)}if(!A||!J.length)return;const Ae=y.useProgram("collisionCircle"),Pe=new u.aQ;Pe.resize(4*ne),Pe._trim();let Oe=0;for(const je of J)for(let Ke=0;Ke<je.circleArray.length/4;Ke++){const st=4*Ke,it=je.circleArray[st+0],mt=je.circleArray[st+1],bt=je.circleArray[st+2],xt=je.circleArray[st+3];Pe.emplace(Oe++,it,mt,bt,xt,0),Pe.emplace(Oe++,it,mt,bt,xt,1),Pe.emplace(Oe++,it,mt,bt,xt,2),Pe.emplace(Oe++,it,mt,bt,xt,3)}(!bi||bi.length<2*ne)&&(bi=function(je){const Ke=2*je,st=new u.aS;st.resize(Ke),st._trim();for(let it=0;it<Ke;it++){const mt=6*it;st.uint16[mt+0]=4*it+0,st.uint16[mt+1]=4*it+1,st.uint16[mt+2]=4*it+2,st.uint16[mt+3]=4*it+2,st.uint16[mt+4]=4*it+3,st.uint16[mt+5]=4*it+0}return st}(ne));const Ce=k.createIndexBuffer(bi,!0),Xe=k.createVertexBuffer(Pe,u.aR.members,!0);for(const je of J){const Ke={u_matrix:je.transform,u_inv_matrix:je.invTransform,u_camera_to_center_distance:(tt=y.transform).cameraToCenterDistance,u_viewport_size:[tt.width,tt.height]};Ae.draw(k,M.TRIANGLES,En.disabled,qn.disabled,y.colorModeForRenderPass(),Bn.disabled,Ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(je.coord),l.id,Xe,Ce,u.$.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,y.transform.zoom,null,null,null)}var tt;Xe.destroy(),Ce.destroy()}Bn.disabled=new Bn(!1,1029,2305),Bn.backCCW=new Bn(!0,1029,2305);const yl=u.an(new Float32Array(16));function ba(y,r,l,d,g,v){const{horizontalAlign:A,verticalAlign:k}=u.at(y);return new u.P((-(A-.5)*r/g+d[0])*v,(-(k-.5)*l/g+d[1])*v)}function vl(y,r,l,d,g,v,A,k,M,H,J){const ne=y.text.placedSymbolArray,pe=y.text.dynamicLayoutVertexArray,Ae=y.icon.dynamicLayoutVertexArray,Pe={};pe.clear();for(let Oe=0;Oe<ne.length;Oe++){const Ce=ne.get(Oe),Xe=Ce.hidden||!Ce.crossTileID||y.allowVerticalPlacement&&!Ce.placedOrientation?null:d[Ce.crossTileID];if(Xe){const tt=new u.P(Ce.anchorX,Ce.anchorY),je=or(tt,l?A:v,J),Ke=Me(g.cameraToCenterDistance,je.signedDistanceFromCamera);let st=u.ai(y.textSizeData,M,Ce)*Ke/u.ao;l&&(st*=y.tilePixelRatio/k);const{width:it,height:mt,anchor:bt,textOffset:xt,textBoxScale:Tt}=Xe,Nt=ba(bt,it,mt,xt,Tt,st),sn=l?or(tt.add(Nt),v,J).point:je.point.add(r?Nt.rotate(-g.angle):Nt),kt=y.allowVerticalPlacement&&Ce.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let rn=0;rn<Ce.numGlyphs;rn++)u.aj(pe,sn,kt);H&&Ce.associatedIconIndex>=0&&(Pe[Ce.associatedIconIndex]={shiftedAnchor:sn,angle:kt})}else ft(Ce.numGlyphs,pe)}if(H){Ae.clear();const Oe=y.icon.placedSymbolArray;for(let Ce=0;Ce<Oe.length;Ce++){const Xe=Oe.get(Ce);if(Xe.hidden)ft(Xe.numGlyphs,Ae);else{const tt=Pe[Ce];if(tt)for(let je=0;je<Xe.numGlyphs;je++)u.aj(Ae,tt.shiftedAnchor,tt.angle);else ft(Xe.numGlyphs,Ae)}}y.icon.dynamicLayoutVertexBuffer.updateData(Ae)}y.text.dynamicLayoutVertexBuffer.updateData(pe)}function Co(y,r,l){return l.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Io(y,r,l,d,g,v,A,k,M,H,J,ne){const pe=y.context,Ae=pe.gl,Pe=y.transform,Oe=k==="map",Ce=M==="map",Xe=k!=="viewport"&&l.layout.get("symbol-placement")!=="point",tt=Oe&&!Ce&&!Xe,je=!l.layout.get("symbol-sort-key").isConstant();let Ke=!1;const st=y.depthModeForSublayer(0,En.ReadOnly),it=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),mt=[];for(const bt of d){const xt=r.getTile(bt),Tt=xt.getBucket(l);if(!Tt)continue;const Nt=g?Tt.text:Tt.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const sn=Nt.programConfigurations.get(l.id),kt=g||Tt.sdfIcons,rn=g?Tt.textSizeData:Tt.iconSizeData,Gt=Ce||Pe.pitch!==0,nr=y.useProgram(Co(kt,g,Tt),sn),Tn=u.ag(rn,Pe.zoom),_n=y.style.map.terrain&&y.style.map.terrain.getTerrainData(bt);let Cn,Tr,Wn,Ti,Qr=[0,0],dr=null;if(g)Tr=xt.glyphAtlasTexture,Wn=Ae.LINEAR,Cn=xt.glyphAtlasTexture.size,Tt.iconsInText&&(Qr=xt.imageAtlasTexture.size,dr=xt.imageAtlasTexture,Ti=Gt||y.options.rotating||y.options.zooming||rn.kind==="composite"||rn.kind==="camera"?Ae.LINEAR:Ae.NEAREST);else{const rr=l.layout.get("icon-size").constantOr(0)!==1||Tt.iconsNeedLinear;Tr=xt.imageAtlasTexture,Wn=kt||y.options.rotating||y.options.zooming||rr||Gt?Ae.LINEAR:Ae.NEAREST,Cn=xt.imageAtlasTexture.size}const hi=dn(xt,1,y.transform.zoom),di=un(bt.posMatrix,Ce,Oe,y.transform,hi),yo=Oi(bt.posMatrix,Ce,Oe,y.transform,hi),Ws=it&&Tt.hasTextData(),Pl=l.layout.get("icon-text-fit")!=="none"&&Ws&&Tt.hasIconData();if(Xe){const rr=y.style.map.terrain?(ei,Ur)=>y.style.map.terrain.getElevation(bt,ei,Ur):null,Nr=l.layout.get("text-rotation-alignment")==="map";ce(Tt,bt.posMatrix,y,g,di,yo,Ce,H,Nr,rr)}const kl=y.translatePosMatrix(bt.posMatrix,xt,v,A),Zs=Xe||g&&it||Pl?yl:di,Br=y.translatePosMatrix(yo,xt,v,A,!0),Cr=kt&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let fr;fr=kt?Tt.iconsInText?_a(rn.kind,Tn,tt,Ce,y,kl,Zs,Br,Cn,Qr):va(rn.kind,Tn,tt,Ce,y,kl,Zs,Br,g,Cn,!0):ya(rn.kind,Tn,tt,Ce,y,kl,Zs,Br,g,Cn);const Ci={program:nr,buffers:Nt,uniformValues:fr,atlasTexture:Tr,atlasTextureIcon:dr,atlasInterpolation:Wn,atlasInterpolationIcon:Ti,isSDF:kt,hasHalo:Cr};if(je&&Tt.canOverlap){Ke=!0;const rr=Nt.segments.get();for(const Nr of rr)mt.push({segments:new u.$([Nr]),sortKey:Nr.sortKey,state:Ci,terrainData:_n})}else mt.push({segments:Nt.segments,sortKey:0,state:Ci,terrainData:_n})}Ke&&mt.sort((bt,xt)=>bt.sortKey-xt.sortKey);for(const bt of mt){const xt=bt.state;if(pe.activeTexture.set(Ae.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Ae.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(pe.activeTexture.set(Ae.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Ae.CLAMP_TO_EDGE)),xt.isSDF){const Tt=xt.uniformValues;xt.hasHalo&&(Tt.u_is_halo=1,Yr(xt.buffers,bt.segments,l,y,xt.program,st,J,ne,Tt,bt.terrainData)),Tt.u_is_halo=0}Yr(xt.buffers,bt.segments,l,y,xt.program,st,J,ne,xt.uniformValues,bt.terrainData)}}function Yr(y,r,l,d,g,v,A,k,M,H){const J=d.context;g.draw(J,J.gl.TRIANGLES,v,A,k,Bn.disabled,M,H,l.id,y.layoutVertexBuffer,y.indexBuffer,r,l.paint,d.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function go(y,r,l,d,g){if(!l||!d||!d.imageAtlas)return;const v=d.imageAtlas.patternPositions;let A=v[l.to.toString()],k=v[l.from.toString()];if(!A&&k&&(A=k),!k&&A&&(k=A),!A||!k){const M=g.getPaintProperty(r);A=v[M],k=v[M]}A&&k&&y.setConstantPatternPositions(A,k)}function _l(y,r,l,d,g,v,A){const k=y.context.gl,M="fill-pattern",H=l.paint.get(M),J=H&&H.constantOr(1),ne=l.getCrossfadeParameters();let pe,Ae,Pe,Oe,Ce;A?(Ae=J&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=k.LINES):(Ae=J?"fillPattern":"fill",pe=k.TRIANGLES);const Xe=H.constantOr(null);for(const tt of d){const je=r.getTile(tt);if(J&&!je.patternsLoaded())continue;const Ke=je.getBucket(l);if(!Ke)continue;const st=Ke.programConfigurations.get(l.id),it=y.useProgram(Ae,st),mt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(tt);J&&(y.context.activeTexture.set(k.TEXTURE0),je.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),st.updatePaintBuffers(ne)),go(st,M,Xe,je,l);const bt=mt?tt:null,xt=y.translatePosMatrix(bt?bt.posMatrix:tt.posMatrix,je,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(A){Oe=Ke.indexBuffer2,Ce=Ke.segments2;const Tt=[k.drawingBufferWidth,k.drawingBufferHeight];Pe=Ae==="fillOutlinePattern"&&J?du(xt,y,ne,je,Tt):Nh(xt,Tt)}else Oe=Ke.indexBuffer,Ce=Ke.segments,Pe=J?rl(xt,y,ne,je):oc(xt);it.draw(y.context,pe,g,y.stencilModeForClipping(tt),v,Bn.disabled,Pe,mt,l.id,Ke.layoutVertexBuffer,Oe,Ce,l.paint,y.transform.zoom,st)}}function Gs(y,r,l,d,g,v,A){const k=y.context,M=k.gl,H="fill-extrusion-pattern",J=l.paint.get(H),ne=J.constantOr(1),pe=l.getCrossfadeParameters(),Ae=l.paint.get("fill-extrusion-opacity"),Pe=J.constantOr(null);for(const Oe of d){const Ce=r.getTile(Oe),Xe=Ce.getBucket(l);if(!Xe)continue;const tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Oe),je=Xe.programConfigurations.get(l.id),Ke=y.useProgram(ne?"fillExtrusionPattern":"fillExtrusion",je);ne&&(y.context.activeTexture.set(M.TEXTURE0),Ce.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),je.updatePaintBuffers(pe)),go(je,H,Pe,Ce,l);const st=y.translatePosMatrix(Oe.posMatrix,Ce,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),it=l.paint.get("fill-extrusion-vertical-gradient"),mt=ne?Bh(st,y,it,Ae,Oe,pe,Ce):fa(st,y,it,Ae);Ke.draw(k,k.gl.TRIANGLES,g,v,A,Bn.backCCW,mt,tt,l.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,l.paint,y.transform.zoom,je,y.style.map.terrain&&Xe.centroidVertexBuffer)}}function xl(y,r,l,d,g,v,A){const k=y.context,M=k.gl,H=l.fbo;if(!H)return;const J=y.useProgram("hillshade"),ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);k.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,H.colorAttachment.get()),J.draw(k,M.TRIANGLES,g,v,A,Bn.disabled,((pe,Ae,Pe,Oe)=>{const Ce=Pe.paint.get("hillshade-shadow-color"),Xe=Pe.paint.get("hillshade-highlight-color"),tt=Pe.paint.get("hillshade-accent-color");let je=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=pe.transform.angle);const Ke=!pe.options.moving;return{u_matrix:Oe?Oe.posMatrix:pe.transform.calculatePosMatrix(Ae.tileID.toUnwrapped(),Ke),u_image:0,u_latrange:sc(0,Ae.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),je],u_shadow:Ce,u_highlight:Xe,u_accent:tt}})(y,l,d,ne?r:null),ne,d.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Hs(y,r,l,d,g,v){const A=y.context,k=A.gl,M=r.dem;if(M&&M.data){const H=M.dim,J=M.stride,ne=M.getPixels();if(A.activeTexture.set(k.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(J),r.demTexture){const Ae=r.demTexture;Ae.update(ne,{premultiply:!1}),Ae.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else r.demTexture=new me(A,ne,k.RGBA,{premultiply:!1}),r.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);A.activeTexture.set(k.TEXTURE0);let pe=r.fbo;if(!pe){const Ae=new me(A,{width:H,height:H,data:null},k.RGBA);Ae.bind(k.LINEAR,k.CLAMP_TO_EDGE),pe=r.fbo=A.createFramebuffer(H,H,!0,!1),pe.colorAttachment.set(Ae.texture)}A.bindFramebuffer.set(pe.framebuffer),A.viewport.set([0,0,H,H]),y.useProgram("hillshadePrepare").draw(A,k.TRIANGLES,d,g,v,Bn.disabled,((Ae,Pe)=>{const Oe=Pe.stride,Ce=u.F();return u.aN(Ce,0,u.W,-u.W,0,0,1),u.H(Ce,Ce,[0,-u.W,0]),{u_matrix:Ce,u_image:1,u_dimension:[Oe,Oe],u_zoom:Ae.overscaledZ,u_unpack:Pe.getUnpackVector()}})(r.tileID,M),null,l.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Sa(y,r,l,d,g,v){const A=d.paint.get("raster-fade-duration");if(!v&&A>0){const k=w.now(),M=(k-y.timeAdded)/A,H=r?(k-r.timeAdded)/A:-1,J=l.getSource(),ne=g.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),pe=!r||Math.abs(r.tileID.overscaledZ-ne)>Math.abs(y.tileID.overscaledZ-ne),Ae=pe&&y.refreshedUponExpiration?1:u.ac(pe?M:1-H,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Ae}:{opacity:Ae,mix:0}}return{opacity:1,mix:0}}const Bi=new u.aO(1,0,0,1),Ao=new u.aO(0,1,0,1),wl=new u.aO(0,0,1,1),bl=new u.aO(1,0,1,1),Ea=new u.aO(0,1,1,1);function Qn(y,r,l,d){Jr(y,0,r+l/2,y.transform.width,l,d)}function Po(y,r,l,d){Jr(y,r-l/2,0,l,y.transform.height,d)}function Jr(y,r,l,d,g,v){const A=y.context,k=A.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*y.pixelRatio,l*y.pixelRatio,d*y.pixelRatio,g*y.pixelRatio),A.clear({color:v}),k.disable(k.SCISSOR_TEST)}function Sl(y,r,l){const d=y.context,g=d.gl,v=l.posMatrix,A=y.useProgram("debug"),k=En.disabled,M=qn.disabled,H=y.colorModeForRenderPass(),J="$debug",ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);d.activeTexture.set(g.TEXTURE0);const pe=r.getTileByID(l.key).latestRawTileData,Ae=Math.floor((pe&&pe.byteLength||0)/1024),Pe=r.getTile(l).tileSize,Oe=512/Math.min(Pe,512)*(l.overscaledZ/y.transform.zoom)*.5;let Ce=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Ce+=` => ${l.overscaledZ}`),function(Xe,tt){Xe.initDebugOverlayCanvas();const je=Xe.debugOverlayCanvas,Ke=Xe.context.gl,st=Xe.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,je.width,je.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(tt,5,5),st.strokeText(tt,5,5),Xe.debugOverlayTexture.update(je),Xe.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(y,`${Ce} ${Ae}kB`),A.draw(d,g.TRIANGLES,k,M,Jn.alphaBlended,Bn.disabled,pa(v,u.aO.transparent,Oe),null,J,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),A.draw(d,g.LINE_STRIP,k,M,H,Bn.disabled,pa(v,u.aO.red),ne,J,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ji(y,r,l){const d=y.context,g=d.gl,v=y.colorModeForRenderPass(),A=new En(g.LEQUAL,En.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),M=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,y.width,y.height]);for(const H of l){const J=y.renderToTexture.getTexture(H),ne=r.getTerrainData(H.tileID);d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,J.texture);const pe={u_matrix:y.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};k.draw(d,g.TRIANGLES,A,qn.disabled,v,Bn.backCCW,pe,ne,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Su{constructor(r,l){this.context=new yc(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.F(),renderTime:0},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qo}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,l=new u.aV;l.emplaceBack(0,0),l.emplaceBack(u.W,0),l.emplaceBack(0,u.W),l.emplaceBack(u.W,u.W),this.tileExtentBuffer=r.createVertexBuffer(l,nl.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const d=new u.aV;d.emplaceBack(0,0),d.emplaceBack(u.W,0),d.emplaceBack(0,u.W),d.emplaceBack(u.W,u.W),this.debugBuffer=r.createVertexBuffer(d,nl.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=r.createVertexBuffer(g,N.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const v=new u.aV;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(v,nl.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const A=new u.aW;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(A);const k=new u.aX;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(k);const M=this.context.gl;this.stencilClearMode=new qn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.F();u.aN(d,0,this.width,this.height,0,0,1),u.J(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,En.disabled,this.stencilClearMode,Jn.disabled,Bn.disabled,il(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,g=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Jn.disabled),d.setDepthMode(En.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of l){const k=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);v.draw(d,g.TRIANGLES,En.disabled,new qn({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Jn.disabled,Bn.disabled,il(A.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new qn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new qn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((A,k)=>k.overscaledZ-A.overscaledZ),g=d[d.length-1].overscaledZ,v=d[0].overscaledZ-g+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const A={};for(let k=0;k<v;k++)A[k+g]=new qn({func:l.GEQUAL,mask:255},k+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[A,d]}return[{[g]:qn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Jn([r.CONSTANT_COLOR,r.ONE],new u.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jn.unblended:Jn.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return En.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new En(d||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(w.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,v={},A={},k={};for(const M in g){const H=g[M];H.used&&H.prepare(this.context),v[M]=H.getVisibleCoordinates(),A[M]=v[M].slice().reverse(),k[M]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<d.length;M++)if(this.style._layers[d[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!u.aY(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(u.aZ(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(H,J){const ne=H.context,pe=ne.gl,Ae=Jn.unblended,Pe=new En(pe.LEQUAL,En.ReadWrite,[0,1]),Oe=J.getTerrainMesh(),Ce=J.sourceCache.getRenderableTiles(),Xe=H.useProgram("terrainDepth");ne.bindFramebuffer.set(J.getFramebuffer("depth").framebuffer),ne.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),ne.clear({color:u.aO.transparent,depth:1});for(const tt of Ce){const je=J.getTerrainData(tt.tileID),Ke={u_matrix:H.transform.calculatePosMatrix(tt.tileID.toUnwrapped()),u_ele_delta:J.getMeshFrameDelta(H.transform.zoom)};Xe.draw(ne,pe.TRIANGLES,Pe,qn.disabled,Ae,Bn.backCCW,Ke,je,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}ne.bindFramebuffer.set(null),ne.viewport.set([0,0,H.width,H.height])}(this,this.style.map.terrain),function(H,J){const ne=H.context,pe=ne.gl,Ae=Jn.unblended,Pe=new En(pe.LEQUAL,En.ReadWrite,[0,1]),Oe=J.getTerrainMesh(),Ce=J.getCoordsTexture(),Xe=J.sourceCache.getRenderableTiles(),tt=H.useProgram("terrainCoords");ne.bindFramebuffer.set(J.getFramebuffer("coords").framebuffer),ne.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),ne.clear({color:u.aO.transparent,depth:1}),J.coordsIndex=[];for(const je of Xe){const Ke=J.getTerrainData(je.tileID);ne.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,Ce.texture);const st={u_matrix:H.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_terrain_coords_id:(255-J.coordsIndex.length)/255,u_texture:0,u_ele_delta:J.getMeshFrameDelta(H.transform.zoom)};tt.draw(ne,pe.TRIANGLES,Pe,qn.disabled,Ae,Bn.backCCW,st,Ke,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments),J.coordsIndex.push(je.tileID.key)}ne.bindFramebuffer.set(null),ne.viewport.set([0,0,H.width,H.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of d){const H=this.style._layers[M];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const J=A[H.source];(H.type==="custom"||J.length)&&this.renderLayer(this,g[H.source],H,J)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aO.black:u.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[d[this.currentLayer]],H=g[M.source],J=v[M.source];this._renderTileClippingMasks(M,J),this.renderLayer(this,H,M,J)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const M=this.style._layers[d[this.currentLayer]],H=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const J=(M.type==="symbol"?k:A)[M.source];this._renderTileClippingMasks(M,v[M.source]),this.renderLayer(this,H,M,J)}if(this.options.showTileBoundaries){const M=function(H,J){let ne=null;const pe=Object.values(H._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(J)?[H.sourceCaches[Ce.source]]:[]),Ae=pe.filter(Ce=>Ce.getSource().type==="vector"),Pe=pe.filter(Ce=>Ce.getSource().type!=="vector"),Oe=Ce=>{(!ne||ne.getSource().maxzoom<Ce.getSource().maxzoom)&&(ne=Ce)};return Ae.forEach(Ce=>Oe(Ce)),ne||Pe.forEach(Ce=>Oe(Ce)),ne}(this.style,this.transform.zoom);M&&function(H,J,ne){for(let pe=0;pe<ne.length;pe++)Sl(H,J,ne[pe])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const H=M.transform.padding;Qn(M,M.transform.height-(H.top||0),3,Bi),Qn(M,H.bottom||0,3,Ao),Po(M,H.left||0,3,wl),Po(M,M.transform.width-(H.right||0),3,bl);const J=M.transform.centerPoint;(function(ne,pe,Ae,Pe){Jr(ne,pe-1,Ae-10,2,20,Pe),Jr(ne,pe-10,Ae-1,20,2,Pe)})(M,J.x,M.transform.height-J.y,Ea)}(this),this.context.setDefault()}renderLayer(r,l,d,g){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(g||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(v,A,k,M,H){if(v.renderPass!=="translucent")return;const J=qn.disabled,ne=v.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(pe,Ae,Pe,Oe,Ce,Xe,tt){const je=Ae.transform,Ke=Ce==="map",st=Xe==="map";for(const it of pe){const mt=Oe.getTile(it),bt=mt.getBucket(Pe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const xt=u.ag(bt.textSizeData,je.zoom),Tt=dn(mt,1,Ae.transform.zoom),Nt=un(it.posMatrix,st,Ke,Ae.transform,Tt),sn=Pe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(xt){const kt=Math.pow(2,je.zoom-mt.tileID.overscaledZ);vl(bt,Ke,st,tt,je,Nt,it.posMatrix,kt,xt,sn,Ae.style.map.terrain?(rn,Gt)=>Ae.style.map.terrain.getElevation(it,rn,Gt):null)}}}(M,v,k,A,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),H),k.paint.get("icon-opacity").constantOr(1)!==0&&Io(v,A,k,M,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),J,ne),k.paint.get("text-opacity").constantOr(1)!==0&&Io(v,A,k,M,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),J,ne),A.map.showCollisionBoxes&&(gl(v,A,k,M,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),gl(v,A,k,M,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(r,l,d,g,this.style.placement.variableOffsets);break;case"circle":(function(v,A,k,M){if(v.renderPass!=="translucent")return;const H=k.paint.get("circle-opacity"),J=k.paint.get("circle-stroke-width"),ne=k.paint.get("circle-stroke-opacity"),pe=!k.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(J.constantOr(1)===0||ne.constantOr(1)===0))return;const Ae=v.context,Pe=Ae.gl,Oe=v.depthModeForSublayer(0,En.ReadOnly),Ce=qn.disabled,Xe=v.colorModeForRenderPass(),tt=[];for(let je=0;je<M.length;je++){const Ke=M[je],st=A.getTile(Ke),it=st.getBucket(k);if(!it)continue;const mt=it.programConfigurations.get(k.id),bt=v.useProgram("circle",mt),xt=it.layoutVertexBuffer,Tt=it.indexBuffer,Nt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ke),sn={programConfiguration:mt,program:bt,layoutVertexBuffer:xt,indexBuffer:Tt,uniformValues:fu(v,Ke,st,k),terrainData:Nt};if(pe){const kt=it.segments.get();for(const rn of kt)tt.push({segments:new u.$([rn]),sortKey:rn.sortKey,state:sn})}else tt.push({segments:it.segments,sortKey:0,state:sn})}pe&&tt.sort((je,Ke)=>je.sortKey-Ke.sortKey);for(const je of tt){const{programConfiguration:Ke,program:st,layoutVertexBuffer:it,indexBuffer:mt,uniformValues:bt,terrainData:xt}=je.state;st.draw(Ae,Pe.TRIANGLES,Oe,Ce,Xe,Bn.disabled,bt,xt,k.id,it,mt,je.segments,k.paint,v.transform.zoom,Ke)}})(r,l,d,g);break;case"heatmap":(function(v,A,k,M){if(k.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const H=v.context,J=H.gl,ne=qn.disabled,pe=new Jn([J.ONE,J.ONE],u.aO.transparent,[!0,!0,!0,!0]);(function(Ae,Pe,Oe){const Ce=Ae.gl;Ae.activeTexture.set(Ce.TEXTURE1),Ae.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Xe=Oe.heatmapFbo;if(Xe)Ce.bindTexture(Ce.TEXTURE_2D,Xe.colorAttachment.get()),Ae.bindFramebuffer.set(Xe.framebuffer);else{const tt=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,tt),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Xe=Oe.heatmapFbo=Ae.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(je,Ke,st,it){var mt,bt;const xt=je.gl,Tt=(mt=je.HALF_FLOAT)!==null&&mt!==void 0?mt:xt.UNSIGNED_BYTE,Nt=(bt=je.RGBA16F)!==null&&bt!==void 0?bt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,Nt,Ke.width/4,Ke.height/4,0,xt.RGBA,Tt,null),it.colorAttachment.set(st)}(Ae,Pe,tt,Xe)}})(H,v,k),H.clear({color:u.aO.transparent});for(let Ae=0;Ae<M.length;Ae++){const Pe=M[Ae];if(A.hasRenderableParent(Pe))continue;const Oe=A.getTile(Pe),Ce=Oe.getBucket(k);if(!Ce)continue;const Xe=Ce.programConfigurations.get(k.id),tt=v.useProgram("heatmap",Xe),{zoom:je}=v.transform;tt.draw(H,J.TRIANGLES,En.disabled,ne,pe,Bn.disabled,ps(Pe.posMatrix,Oe,je,k.paint.get("heatmap-intensity")),null,k.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,k.paint,v.transform.zoom,Xe)}H.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(H,J){const ne=H.context,pe=ne.gl,Ae=J.heatmapFbo;if(!Ae)return;ne.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,Ae.colorAttachment.get()),ne.activeTexture.set(pe.TEXTURE1);let Pe=J.colorRampTexture;Pe||(Pe=J.colorRampTexture=new me(ne,J.colorRamp,pe.RGBA)),Pe.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(ne,pe.TRIANGLES,En.disabled,qn.disabled,H.colorModeForRenderPass(),Bn.disabled,((Oe,Ce,Xe,tt)=>{const je=u.F();u.aN(je,0,Oe.width,Oe.height,0,0,1);const Ke=Oe.context.gl;return{u_matrix:je,u_world:[Ke.drawingBufferWidth,Ke.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(H,J),null,J.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,J.paint,H.transform.zoom)}(v,k))})(r,l,d,g);break;case"line":(function(v,A,k,M){if(v.renderPass!=="translucent")return;const H=k.paint.get("line-opacity"),J=k.paint.get("line-width");if(H.constantOr(1)===0||J.constantOr(1)===0)return;const ne=v.depthModeForSublayer(0,En.ReadOnly),pe=v.colorModeForRenderPass(),Ae=k.paint.get("line-dasharray"),Pe=k.paint.get("line-pattern"),Oe=Pe.constantOr(1),Ce=k.paint.get("line-gradient"),Xe=k.getCrossfadeParameters(),tt=Oe?"linePattern":Ae?"lineSDF":Ce?"lineGradient":"line",je=v.context,Ke=je.gl;let st=!0;for(const it of M){const mt=A.getTile(it);if(Oe&&!mt.patternsLoaded())continue;const bt=mt.getBucket(k);if(!bt)continue;const xt=bt.programConfigurations.get(k.id),Tt=v.context.program.get(),Nt=v.useProgram(tt,xt),sn=st||Nt.program!==Tt,kt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(it),rn=Pe.constantOr(null);if(rn&&mt.imageAtlas){const Tn=mt.imageAtlas,_n=Tn.patternPositions[rn.to.toString()],Cn=Tn.patternPositions[rn.from.toString()];_n&&Cn&&xt.setConstantPatternPositions(_n,Cn)}const Gt=kt?it:null,nr=Oe?ms(v,mt,k,Xe,Gt):Ae?ma(v,mt,k,Ae,Xe,Gt):Ce?ac(v,mt,k,bt.lineClipsArray.length,Gt):ol(v,mt,k,Gt);if(Oe)je.activeTexture.set(Ke.TEXTURE0),mt.imageAtlasTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE),xt.updatePaintBuffers(Xe);else if(Ae&&(sn||v.lineAtlas.dirty))je.activeTexture.set(Ke.TEXTURE0),v.lineAtlas.bind(je);else if(Ce){const Tn=bt.gradients[k.id];let _n=Tn.texture;if(k.gradientVersion!==Tn.version){let Cn=256;if(k.stepInterpolant){const Tr=A.getSource().maxzoom,Wn=it.canonical.z===Tr?Math.ceil(1<<v.transform.maxZoom-it.canonical.z):1;Cn=u.ac(u.aT(bt.maxLineLength/u.W*1024*Wn),256,je.maxTextureSize)}Tn.gradient=u.aU({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Cn,image:Tn.gradient||void 0,clips:bt.lineClipsArray}),Tn.texture?Tn.texture.update(Tn.gradient):Tn.texture=new me(je,Tn.gradient,Ke.RGBA),Tn.version=k.gradientVersion,_n=Tn.texture}je.activeTexture.set(Ke.TEXTURE0),_n.bind(k.stepInterpolant?Ke.NEAREST:Ke.LINEAR,Ke.CLAMP_TO_EDGE)}Nt.draw(je,Ke.TRIANGLES,ne,v.stencilModeForClipping(it),pe,Bn.disabled,nr,kt,k.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,k.paint,v.transform.zoom,xt,bt.layoutVertexBuffer2),st=!1}})(r,l,d,g);break;case"fill":(function(v,A,k,M){const H=k.paint.get("fill-color"),J=k.paint.get("fill-opacity");if(J.constantOr(1)===0)return;const ne=v.colorModeForRenderPass(),pe=k.paint.get("fill-pattern"),Ae=v.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&H.constantOr(u.aO.transparent).a===1&&J.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===Ae){const Pe=v.depthModeForSublayer(1,v.renderPass==="opaque"?En.ReadWrite:En.ReadOnly);_l(v,A,k,M,Pe,ne,!1)}if(v.renderPass==="translucent"&&k.paint.get("fill-antialias")){const Pe=v.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,En.ReadOnly);_l(v,A,k,M,Pe,ne,!0)}})(r,l,d,g);break;case"fill-extrusion":(function(v,A,k,M){const H=k.paint.get("fill-extrusion-opacity");if(H!==0&&v.renderPass==="translucent"){const J=new En(v.context.gl.LEQUAL,En.ReadWrite,v.depthRangeFor3D);if(H!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Gs(v,A,k,M,J,qn.disabled,Jn.disabled),Gs(v,A,k,M,J,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const ne=v.colorModeForRenderPass();Gs(v,A,k,M,J,qn.disabled,ne)}}})(r,l,d,g);break;case"hillshade":(function(v,A,k,M){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const H=v.context,J=v.depthModeForSublayer(0,En.ReadOnly),ne=v.colorModeForRenderPass(),[pe,Ae]=v.renderPass==="translucent"?v.stencilConfigForOverlap(M):[{},M];for(const Pe of Ae){const Oe=A.getTile(Pe);Oe.needsHillshadePrepare!==void 0&&Oe.needsHillshadePrepare&&v.renderPass==="offscreen"?Hs(v,Oe,k,J,qn.disabled,ne):v.renderPass==="translucent"&&xl(v,Pe,Oe,k,J,pe[Pe.overscaledZ],ne)}H.viewport.set([0,0,v.width,v.height])})(r,l,d,g);break;case"raster":(function(v,A,k,M){if(v.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!M.length)return;const H=v.context,J=H.gl,ne=A.getSource(),pe=v.useProgram("raster"),Ae=v.colorModeForRenderPass(),[Pe,Oe]=ne instanceof D?[{},M]:v.stencilConfigForOverlap(M),Ce=Oe[Oe.length-1].overscaledZ,Xe=!v.options.moving;for(const tt of Oe){const je=v.depthModeForSublayer(tt.overscaledZ-Ce,k.paint.get("raster-opacity")===1?En.ReadWrite:En.ReadOnly,J.LESS),Ke=A.getTile(tt);Ke.registerFadeDuration(k.paint.get("raster-fade-duration"));const st=A.findLoadedParent(tt,0),it=Sa(Ke,st,A,k,v.transform,v.style.map.terrain);let mt,bt;const xt=k.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;H.activeTexture.set(J.TEXTURE0),Ke.texture.bind(xt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(J.TEXTURE1),st?(st.texture.bind(xt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST),mt=Math.pow(2,st.tileID.overscaledZ-Ke.tileID.overscaledZ),bt=[Ke.tileID.canonical.x*mt%1,Ke.tileID.canonical.y*mt%1]):Ke.texture.bind(xt,J.CLAMP_TO_EDGE,J.LINEAR_MIPMAP_NEAREST);const Tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(tt),Nt=Tt?tt:null,sn=Nt?Nt.posMatrix:v.transform.calculatePosMatrix(tt.toUnwrapped(),Xe),kt=sl(sn,bt||[0,0],mt||1,it,k);ne instanceof D?pe.draw(H,J.TRIANGLES,je,qn.disabled,Ae,Bn.disabled,kt,Tt,k.id,ne.boundsBuffer,v.quadTriangleIndexBuffer,ne.boundsSegments):pe.draw(H,J.TRIANGLES,je,Pe[tt.overscaledZ],Ae,Bn.disabled,kt,Tt,k.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(r,l,d,g);break;case"background":(function(v,A,k,M){const H=k.paint.get("background-color"),J=k.paint.get("background-opacity");if(J===0)return;const ne=v.context,pe=ne.gl,Ae=v.transform,Pe=Ae.tileSize,Oe=k.paint.get("background-pattern");if(v.isPatternMissing(Oe))return;const Ce=!Oe&&H.a===1&&J===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Ce)return;const Xe=qn.disabled,tt=v.depthModeForSublayer(0,Ce==="opaque"?En.ReadWrite:En.ReadOnly),je=v.colorModeForRenderPass(),Ke=v.useProgram(Oe?"backgroundPattern":"background"),st=M||Ae.coveringTiles({tileSize:Pe,terrain:v.style.map.terrain});Oe&&(ne.activeTexture.set(pe.TEXTURE0),v.imageManager.bind(v.context));const it=k.getCrossfadeParameters();for(const mt of st){const bt=M?mt.posMatrix:v.transform.calculatePosMatrix(mt.toUnwrapped()),xt=Oe?lc(bt,J,v,Oe,{tileID:mt,tileSize:Pe},it):Uh(bt,J,H),Tt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(mt);Ke.draw(ne,pe.TRIANGLES,tt,Xe,je,Bn.disabled,xt,Tt,k.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(r,0,d,g);break;case"custom":(function(v,A,k){const M=v.context,H=k.implementation;if(v.renderPass==="offscreen"){const J=H.prerender;J&&(v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),J.call(H,M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),M.setColorMode(v.colorModeForRenderPass()),M.setStencilMode(qn.disabled);const J=H.renderingMode==="3d"?new En(v.context.gl.LEQUAL,En.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,En.ReadOnly);M.setDepthMode(J),H.render(M.gl,v.transform.customLayerMatrix()),M.setDirty(),v.setBaseState(),M.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,l,d,g,v){if(!d[0]&&!d[1])return r;const A=v?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(A){const H=Math.sin(A),J=Math.cos(A);d=[d[0]*J-d[1]*H,d[0]*H+d[1]*J]}const k=[v?d[0]:dn(l,d[0],this.transform.zoom),v?d[1]:dn(l,d[1],this.transform.zoom),0],M=new Float32Array(16);return u.H(M,r,k),M}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Ko(this.context,da[r],l,uc[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new me(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Qo{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const g=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const M=1/(k=u.af([],k,r))[3]/l*g;return u.a_(k,k,[M,M,1/k[3],M])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const M=function(pe,Ae){var Pe=Ae[0],Oe=Ae[1],Ce=Ae[2],Xe=Pe*Pe+Oe*Oe+Ce*Ce;return Xe>0&&(Xe=1/Math.sqrt(Xe)),pe[0]=Ae[0]*Xe,pe[1]=Ae[1]*Xe,pe[2]=Ae[2]*Xe,pe}([],function(pe,Ae,Pe){var Oe=Ae[0],Ce=Ae[1],Xe=Ae[2],tt=Pe[0],je=Pe[1],Ke=Pe[2];return pe[0]=Ce*Ke-Xe*je,pe[1]=Xe*tt-Oe*Ke,pe[2]=Oe*je-Ce*tt,pe}([],B([],v[k[0]],v[k[1]]),B([],v[k[2]],v[k[1]]))),H=-((J=M)[0]*(ne=v[k[1]])[0]+J[1]*ne[1]+J[2]*ne[2]);var J,ne;return M.concat(H)});return new Qo(v,A)}}class ko{constructor(r,l){this.min=r,this.max=l,this.center=function(d,g,v){return d[0]=.5*g[0],d[1]=.5*g[1],d[2]=.5*g[2],d}([],function(d,g,v){return d[0]=g[0]+v[0],d[1]=g[1]+v[1],d[2]=g[2]+v[2],d}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],d=E(this.min),g=E(this.max);for(let v=0;v<l.length;v++)d[v]=l[v]?this.min[v]:this.center[v],g[v]=l[v]?this.center[v]:this.max[v];return g[2]=this.max[2],new ko(d,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<r.planes.length;g++){const v=r.planes[g];let A=0;for(let k=0;k<l.length;k++)u.a$(v,l[k])>=0&&A++;if(A===0)return 0;A!==l.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let v=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let k=0;k<r.points.length;k++){const M=r.points[k][g]-this.min[g];v=Math.min(v,M),A=Math.max(A,M)}if(A<0||v>this.max[g]-this.min[g])return 0}return 1}}class es{constructor(r=0,l=0,d=0,g=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=g}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,d)),this}getCenter(r,l){const d=u.ac((this.left+r-this.right)/2,0,r),g=u.ac((this.top+l-this.bottom)/2,0,l);return new u.P(d,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new es(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ta{constructor(r,l,d,g,v){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=v===void 0||!!v,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new es,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new Ta(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b0(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,g,v){var A=g[0],k=g[1],M=g[2],H=g[3],J=Math.sin(v),ne=Math.cos(v);d[0]=A*ne+M*J,d[1]=k*ne+H*J,d[2]=A*-J+M*ne,d[3]=k*-J+H*ne}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b1(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),v=this.pointCoordinate(new u.P(this.width,this.height)),A=this.pointCoordinate(new u.P(0,this.height)),k=Math.floor(Math.min(d.x,g.x,v.x,A.x)),M=Math.floor(Math.max(d.x,g.x,v.x,A.x)),H=1;for(let J=k-H;J<=M+H;J++)J!==0&&l.push(new u.b1(J,r))}return l}coveringTiles(r){var l,d;let g=this.coveringZoomLevel(r);const v=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),k=u.Y.fromLngLat(this.center),M=Math.pow(2,g),H=[M*A.x,M*A.y,0],J=[M*k.x,M*k.y,0],ne=Qo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let pe=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(pe=g);const Ae=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Pe=je=>({aabb:new ko([je*M,0,0],[(je+1)*M,M,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),Oe=[],Ce=[],Xe=g,tt=r.reparseOverscaled?v:g;if(this._renderWorldCopies)for(let je=1;je<=3;je++)Oe.push(Pe(-je)),Oe.push(Pe(je));for(Oe.push(Pe(0));Oe.length>0;){const je=Oe.pop(),Ke=je.x,st=je.y;let it=je.fullyVisible;if(!it){const Nt=je.aabb.intersects(ne);if(Nt===0)continue;it=Nt===2}const mt=r.terrain?H:J,bt=je.aabb.distanceX(mt),xt=je.aabb.distanceY(mt),Tt=Math.max(Math.abs(bt),Math.abs(xt));if(je.zoom===Xe||Tt>Ae+(1<<Xe-je.zoom)-2&&je.zoom>=pe){const Nt=Xe-je.zoom,sn=H[0]-.5-(Ke<<Nt),kt=H[1]-.5-(st<<Nt);Ce.push({tileID:new u.Q(je.zoom===Xe?tt:je.zoom,je.wrap,je.zoom,Ke,st),distanceSq:ee([J[0]-.5-Ke,J[1]-.5-st]),tileDistanceToCamera:Math.sqrt(sn*sn+kt*kt)})}else for(let Nt=0;Nt<4;Nt++){const sn=(Ke<<1)+Nt%2,kt=(st<<1)+(Nt>>1),rn=je.zoom+1;let Gt=je.aabb.quadrant(Nt);if(r.terrain){const nr=new u.Q(rn,je.wrap,rn,sn,kt),Tn=r.terrain.getMinMaxElevation(nr),_n=(l=Tn.minElevation)!==null&&l!==void 0?l:this.elevation,Cn=(d=Tn.maxElevation)!==null&&d!==void 0?d:this.elevation;Gt=new ko([Gt.min[0],Gt.min[1],_n],[Gt.max[0],Gt.max[1],Cn])}Oe.push({aabb:Gt,zoom:rn,x:sn,y:kt,wrap:je.wrap,fullyVisible:it})}}return Ce.sort((je,Ke)=>je.distanceSq-Ke.distanceSq).map(je=>je.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ac(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.P(u.N(r.lng)*this.worldSize,u.O(l)*this.worldSize)}unproject(r){return new u.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.pointLocation(this.centerPoint,r),d=r.getElevationForLngLatZoom(l,this.tileZoom);if(!(this.elevation-d))return;const g=this.getCameraPosition(),v=u.Y.fromLngLat(g.lngLat,g.altitude),A=u.Y.fromLngLat(l,d),k=v.x-A.x,M=v.y-A.y,H=v.z-A.z,J=Math.sqrt(k*k+M*M+H*H),ne=this.scaleZoom(this.cameraToCenterDistance/J/this.tileSize);this._elevation=d,this._center=l,this.zoom=ne}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(r),A=new u.Y(v.x-(d.x-g.x),v.y-(d.y-g.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const pe=l.pointCoordinate(r);if(pe!=null)return pe}const d=[r.x,r.y,0,1],g=[r.x,r.y,1,1];u.af(d,d,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const v=d[3],A=g[3],k=d[1]/v,M=g[1]/A,H=d[2]/v,J=g[2]/A,ne=H===J?0:(0-H)/(J-H);return new u.Y(u.z.number(d[0]/v,g[0]/A,ne)/this.worldSize,u.z.number(k,M,ne)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.af(g,g,d),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new qt().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new qt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,l=!1){const d=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const v=r.canonical,A=this.worldSize/this.zoomScale(v.z),k=v.x+Math.pow(2,v.z)*r.wrap,M=u.an(new Float64Array(16));return u.H(M,M,[k*A,v.y*A,0]),u.J(M,M,[A/u.W,A/u.W,1]),u.K(M,l?this.alignedProjMatrix:this.projMatrix,M),g[d]=new Float32Array(M),g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,l,d,g,v=-90,A=90,k=-180,M=180;const H=this.size,J=this._unmodified;if(this.latRange){const Ae=this.latRange;v=u.O(Ae[1])*this.worldSize,A=u.O(Ae[0])*this.worldSize,r=A-v<H.y?H.y/(A-v):0}if(this.lngRange){const Ae=this.lngRange;k=u.b0(u.N(Ae[0])*this.worldSize,0,this.worldSize),M=u.b0(u.N(Ae[1])*this.worldSize,0,this.worldSize),M<k&&(M+=this.worldSize),l=M-k<H.x?H.x/(M-k):0}const ne=this.point,pe=Math.max(l||0,r||0);if(pe)return this.center=this.unproject(new u.P(l?(M+k)/2:ne.x,r?(A+v)/2:ne.y)),this.zoom+=this.scaleZoom(pe),this._unmodified=J,void(this._constraining=!1);if(this.latRange){const Ae=ne.y,Pe=H.y/2;Ae-Pe<v&&(g=v+Pe),Ae+Pe>A&&(g=A-Pe)}if(this.lngRange){const Ae=(k+M)/2,Pe=u.b0(ne.x,Ae-this.worldSize/2,Ae+this.worldSize/2),Oe=H.x/2;Pe-Oe<k&&(d=k+Oe),Pe+Oe>M&&(d=M-Oe)}d===void 0&&g===void 0||(this.center=this.unproject(new u.P(d!==void 0?d:ne.x,g!==void 0?g:ne.y)).wrap()),this._unmodified=J,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b2(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),k=v-A*this._pixelPerMeter/Math.cos(this._pitch),M=A<0?k:v,H=Math.PI/2+this._pitch,J=this._fov*(.5+r.y/this.height),ne=Math.sin(J)*M/Math.sin(u.ac(Math.PI-H-J,.01,Math.PI-.01)),pe=this.getHorizon(),Ae=2*Math.atan(pe/this.cameraToCenterDistance)*(.5+r.y/(2*pe)),Pe=Math.sin(Ae)*M/Math.sin(u.ac(Math.PI-H-Ae,.01,Math.PI-.01)),Oe=Math.min(ne,Pe),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*Oe+M),Xe=this.height/50;g=new Float64Array(16),u.b3(g,this._fov,this.width/this.height,Xe,Ce),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b4(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-l,-d,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.ar([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const tt=this.width%2/2,je=this.height%2/2,Ke=Math.cos(this.angle),st=Math.sin(this.angle),it=l-Math.round(l)+Ke*tt+st*je,mt=d-Math.round(d)+Ke*je+st*tt,bt=new Float64Array(g);if(u.H(bt,bt,[it>.5?it-1:it,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=bt,g=u.ar(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,g=l.y,v=l.x,A=l.y;for(const k of r)d=Math.min(d,k.x),g=Math.min(g,k.y),v=Math.max(v,k.x),A=Math.max(A,k.y);return[new u.P(d,g),new u.P(v,g),new u.P(v,A),new u.P(d,A),new u.P(d,g)]}}lngLatToCameraDepth(r,l){const d=this.locationCoordinate(r),g=[d.x*this.worldSize,d.y*this.worldSize,l,1];return u.af(g,g,this.projMatrix),g[2]/g[3]}}function El(y,r){let l,d=!1,g=null,v=null;const A=()=>{g=null,d&&(y.apply(v,l),g=setTimeout(A,r),d=!1)};return(...k)=>(d=!0,v=this,l=k,g||A(),g)}class Tl{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=El(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,g),A=Math.round(l.lng*v)/v,k=Math.round(l.lat*v)/v,M=this._map.getBearing(),H=this._map.getPitch();let J="";if(J+=r?`/${A}/${k}/${d}`:`${d}/${k}/${A}`,(M||H)&&(J+="/"+Math.round(10*M)/10),H&&(J+=`/${Math.round(H)}`),this._hashName){const ne=this._hashName;let pe=!1;const Ae=window.location.hash.slice(1).split("&").map(Pe=>{const Oe=Pe.split("=")[0];return Oe===ne?(pe=!0,`${Oe}=${J}`):Pe}).filter(Pe=>Pe);return pe||Ae.push(`${ne}=${J}`),`#${Ae.join("&")}`}return`#${J}`}}const G={linearity:.3,easing:u.b5(0,0,.3,1)},ve=u.e({deceleration:2500,maxSpeed:1400},G),De=u.e({deceleration:20,maxSpeed:1400},G),at=u.e({deceleration:1e3,maxSpeed:360},G),Lt=u.e({deceleration:1e3,maxSpeed:90},G);class Ct{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:w.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=w.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const v=Zt(l.pan.mag(),d,u.e({},ve,r||{}));g.offset=l.pan.mult(v.amount/l.pan.mag()),g.center=this._map.transform.center,Vt(g,v)}if(l.zoom){const v=Zt(l.zoom,d,De);g.zoom=this._map.transform.zoom+v.amount,Vt(g,v)}if(l.bearing){const v=Zt(l.bearing,d,at);g.bearing=this._map.transform.bearing+u.ac(v.amount,-179,179),Vt(g,v)}if(l.pitch){const v=Zt(l.pitch,d,Lt);g.pitch=this._map.transform.pitch+v.amount,Vt(g,v)}if(g.zoom||g.bearing){const v=l.pinchAround===void 0?l.around:l.pinchAround;g.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function Vt(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Zt(y,r,l){const{maxSpeed:d,linearity:g,deceleration:v}=l,A=u.ac(y*g/(r/1e3),-d,d),k=Math.abs(A)/(v*g);return{easing:l.easing,duration:1e3*k,amount:A*(k/2)}}class on extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,g={}){const v=T.mousePos(l.getCanvas(),d),A=l.unproject(v);super(r,u.e({point:v,lngLat:A,originalEvent:d},g)),this._defaultPrevented=!1,this.target=l}}class Ln extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){const g=r==="touchend"?d.changedTouches:d.touches,v=T.touchPos(l.getCanvasContainer(),g),A=v.map(M=>l.unproject(M)),k=v.reduce((M,H,J,ne)=>M.add(H.div(ne.length)),new u.P(0,0));super(r,{points:v,point:k,lngLats:A,lngLat:l.unproject(k),originalEvent:d}),this._defaultPrevented=!1}}class Mn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class er{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Mn(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new on(r.type,this._map,r))}mouseup(r){this._map.fire(new on(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new on(r.type,this._map,r))}dblclick(r){return this._firePreventable(new on(r.type,this._map,r))}mouseover(r){this._map.fire(new on(r.type,this._map,r))}mouseout(r){this._map.fire(new on(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Ln(r.type,this._map,r))}touchmove(r){this._map.fire(new Ln(r.type,this._map,r))}touchend(r){this._map.fire(new Ln(r.type,this._map,r))}touchcancel(r){this._map.fire(new Ln(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Nn{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new on(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new on("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new on(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class br{constructor(r,l){this._map=r,this._tr=new Vn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(T.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const v=Math.min(g.x,d.x),A=Math.max(g.x,d.x),k=Math.min(g.y,d.y),M=Math.max(g.y,d.y);T.setTransform(this._box,`translate(${v}px,${k}px)`),this._box.style.width=A-v+"px",this._box.style.height=M-k+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,g=l;if(this.reset(),T.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(d,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function Sr(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const l={};for(let d=0;d<y.length;d++)l[y[d].identifier]=r[d];return l}class Si{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const v=new u.P(0,0);for(const A of g)v._add(A);return v.div(g.length)}(l),this.touches=Sr(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const g=Sr(d,l);for(const v in this.touches){const A=g[v];(!A||A.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Mo{constructor(r){this.singleTap=new Si(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const g=this.singleTap.touchend(r,l,d);if(g){const v=r.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(g)<30;if(v&&A||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class vc{constructor(r){this._tr=new Vn(r),this._zoomIn=new Mo({numTouches:1,numTaps:2}),this._zoomOut=new Mo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const g=this._zoomIn.touchend(r,l,d),v=this._zoomOut.touchend(r,l,d),A=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(g)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ts{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=l.length?l[0]:l;return!this._moved&&g.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(d,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&T.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ca={0:1,2:2};class Ia{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=T.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){const g=Ca[d];return l.buttons===void 0||(l.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return T.mouseButton(r)===this._eventButton}}class vs{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Bt=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(r){r.preventDefault()}},Wh=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const d=new Ia({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new ts({clickTolerance:r,move:(g,v)=>({bearingDelta:(v.x-g.x)*l}),moveStateManager:d,enable:y,assignEvents:Bt})},Cl=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new Ia({checkCorrectEvent:g=>T.mouseButton(g)===0&&g.ctrlKey||T.mouseButton(g)===2});return new ts({clickTolerance:r,move:(g,v)=>({pitchDelta:(v.y-g.y)*l}),moveStateManager:d,enable:y,assignEvents:Bt})};class Eu{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active&&!(d.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,d)}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const g=Sr(d,l),v=new u.P(0,0),A=new u.P(0,0);let k=0;for(const H in g){const J=g[H],ne=this._touches[H];ne&&(v._add(J),A._add(J.sub(ne)),k++,g[H]=J)}if(this._touches=g,k<this.minTouchs()||!A.mag())return;const M=A.div(k);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(k),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _c{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[g,v]=this._firstTwoTouches,A=Rt(d,l,g),k=Rt(d,l,v);if(!A||!k)return;const M=this._aroundCenter?null:A.add(k).div(2);return this._move([A,k],M,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[g,v]=this._firstTwoTouches,A=Rt(d,l,g),k=Rt(d,l,v);A&&k||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Rt(y,r,l){for(let d=0;d<y.length;d++)if(y[d].identifier===l)return r[d]}function xc(y,r){return Math.log(y/r)/Math.LN2}class Qf extends _c{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(xc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xc(this._distance,d),pinchAround:l}}}function ep(y,r){return 180*y.angleWith(r)/Math.PI}class wc extends _c{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){const g=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ep(this._vector,g),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=ep(r,this._startVector);return Math.abs(d)<l}}function bc(y){return Math.abs(y.y)>Math.abs(y.x)}class Zh extends _c{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,bc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,v,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,v=l.mag()>=2;if(!g&&!v)return;if(!g||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const A=r.y>0==l.y>0;return bc(r)&&bc(l)&&A}}const hy={panStep:100,bearingStep:15,pitchStep:10};class tp{constructor(r){this._tr=new Vn(r);const l=hy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,g=0,v=0,A=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),A=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:k=>{const M=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Aa,zoom:l?Math.round(M.zoom)+l*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+d*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-v*this._panStep,-A*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Aa(y){return y*(2-y)}const tr=4.000244140625;class Tu{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Vn(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=w.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%tr==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=T.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?u.M.convert(this._aroundCenter?d.center:d.unproject(l)):u.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>tr?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&M!==0&&(M=1/M);const H=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(H*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,g=this._easing;let v,A=!1;if(this._type==="wheel"&&d&&g){const k=Math.min((w.now()-this._lastWheelEventTime)/200,1),M=g(k);v=u.z.number(d,l,M),k<1?this._frameId||(this._frameId=!0):A=!0}else v=l,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b6;if(this._prevEase){const d=this._prevEase,g=(w.now()-d.start)/d.duration,v=d.easing(g+.01)-d.easing(g),A=.27/Math.sqrt(v*v+1e-4)*.01,k=Math.sqrt(.0729-A*A);l=u.b5(A,k,.25,1)}return this._prevEase={start:w.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Sc{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class np{constructor(r){this._tr=new Vn(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rp{constructor(){this._tap=new Mo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){const g=l[0],v=r.timeStamp-this._tapTime<500,A=this._tapPoint.dist(g)<30;v&&A?d.length>0&&(this._swipePoint=g,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=l[0],v=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const g=this._tap.touchend(r,l,d);g&&(this._tapTime=r.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xh{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ip{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class zo{constructor(r,l,d,g){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Cu{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=l,this._container.appendChild(g);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=d,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Xt=y=>y.zoom||y.drag||y.pitch||y.rotate;class cn extends u.k{}function Il(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class qh{constructor(r,l){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,v)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=g.type==="renderFrame"?void 0:g,k={needsRenderFrame:!1},M={},H={},J=g.touches,ne=J?this._getMapTouches(J):void 0,pe=ne?T.touchPos(this._map.getCanvas(),ne):T.mousePos(this._map.getCanvas(),g);for(const{handlerName:Oe,handler:Ce,allowed:Xe}of this._handlers){if(!Ce.isEnabled())continue;let tt;this._blockedByActive(H,Xe,Oe)?Ce.reset():Ce[v||g.type]&&(tt=Ce[v||g.type](g,pe,ne),this.mergeHandlerResult(k,M,tt,Oe,A),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Ce.isActive())&&(H[Oe]=Ce)}const Ae={};for(const Oe in this._previousActiveHandlers)H[Oe]||(Ae[Oe]=A);this._previousActiveHandlers=H,(Object.keys(Ae).length||Il(k))&&(this._changes.push([k,M,Ae]),this._triggerRenderFrame()),(Object.keys(H).length||Il(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=k;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ct(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,v,A]of this._listeners)T.addEventListener(g,v,g===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[r,l,d]of this._listeners)T.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new er(l,r));const g=l.boxZoom=new br(l,r);this._add("boxZoom",g),r.interactive&&r.boxZoom&&g.enable();const v=l.cooperativeGestures=new Cu(l,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();const A=new vc(l),k=new np(l);l.doubleClickZoom=new Sc(k,A),this._add("tapZoom",A),this._add("clickZoom",k),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const M=new rp;this._add("tapDragZoom",M);const H=l.touchPitch=new Zh(l);this._add("touchPitch",H),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const J=Wh(r),ne=Cl(r);l.dragRotate=new ip(r,J,ne),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",ne,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const pe=(({enable:tt,clickTolerance:je})=>{const Ke=new Ia({checkCorrectEvent:st=>T.mouseButton(st)===0&&!st.ctrlKey});return new ts({clickTolerance:je,move:(st,it)=>({around:it,panDelta:it.sub(st)}),activateOnStart:!0,moveStateManager:Ke,enable:tt,assignEvents:Bt})})(r),Ae=new Eu(r,l);l.dragPan=new Xh(d,pe,Ae),this._add("mousePan",pe),this._add("touchPan",Ae,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const Pe=new wc,Oe=new Qf;l.touchZoomRotate=new zo(d,Oe,Pe,M),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Oe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const Ce=l.scrollZoom=new Tu(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Ce,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const Xe=l.keyboard=new tp(l);this._add("keyboard",Xe),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Nn(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Xt(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(const g in r)if(g!==d&&(!l||l.indexOf(g)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,g,v){if(!d)return;u.e(r,d);const A={handlerName:g,originalEvent:d.originalEvent||v};d.zoomDelta!==void 0&&(l.zoom=A),d.panDelta!==void 0&&(l.drag=A),d.pitchDelta!==void 0&&(l.pitch=A),d.bearingDelta!==void 0&&(l.rotate=A)}_applyChanges(){const r={},l={},d={};for(const[g,v,A]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),u.e(l,v),u.e(d,A);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const g=this._map,v=g._getTransformForUpdate(),A=g.terrain;if(!(Il(r)||A&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:k,zoomDelta:M,bearingDelta:H,pitchDelta:J,around:ne,pinchAround:pe}=r;pe!==void 0&&(ne=pe),g._stop(!0),ne=ne||g.transform.centerPoint;const Ae=v.pointLocation(k?ne.sub(k):ne);H&&(v.bearing+=H),J&&(v.pitch+=J),M&&(v.zoom+=M),A?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(k)):v.setLocationAtPoint(Ae,ne):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(Ae,ne),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,v.recalculateZoom(g.terrain)})):v.setLocationAtPoint(Ae,ne),g._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const g=Xt(this._eventsInProgress),v=Xt(r),A={};for(const J in r){const{originalEvent:ne}=r[J];this._eventsInProgress[J]||(A[`${J}start`]=ne),this._eventsInProgress[J]=r[J]}!g&&v&&this._fireEvent("movestart",v.originalEvent);for(const J in A)this._fireEvent(J,A[J]);v&&this._fireEvent("move",v.originalEvent);for(const J in r){const{originalEvent:ne}=r[J];this._fireEvent(J,ne)}const k={};let M;for(const J in this._eventsInProgress){const{handlerName:ne,originalEvent:pe}=this._eventsInProgress[J];this._handlersById[ne].isActive()||(delete this._eventsInProgress[J],M=l[ne]||pe,k[`${J}end`]=M)}for(const J in k)this._fireEvent(J,k[J]);const H=Xt(this._eventsInProgress);if(d&&(g||v)&&!H){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;!J||!J.essential&&w.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:M})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne(J.bearing||this._map.getBearing())&&(J.bearing=0),J.freezeElevation=!0,this._map.easeTo(J,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new cn("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Kh extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const d=Math.min((w.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(u.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(u.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(u.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=qt.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,g){const v={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Nt=g.padding;g.padding={top:Nt,bottom:Nt,right:Nt,left:Nt}}g.padding=u.e(v,g.padding);const A=this.transform,k=A.padding,M=new qt(r,l),H=A.project(M.getNorthWest()),J=A.project(M.getNorthEast()),ne=A.project(M.getSouthEast()),pe=A.project(M.getSouthWest()),Ae=u.b7(-d),Pe=H.rotate(Ae),Oe=J.rotate(Ae),Ce=ne.rotate(Ae),Xe=pe.rotate(Ae),tt=new u.P(Math.max(Pe.x,Oe.x,Xe.x,Ce.x),Math.max(Pe.y,Oe.y,Xe.y,Ce.y)),je=new u.P(Math.min(Pe.x,Oe.x,Xe.x,Ce.x),Math.min(Pe.y,Oe.y,Xe.y,Ce.y)),Ke=tt.sub(je),st=(A.width-(k.left+k.right+g.padding.left+g.padding.right))/Ke.x,it=(A.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/Ke.y;if(it<0||st<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(A.scaleZoom(A.scale*Math.min(st,it)),g.maxZoom),bt=u.P.convert(g.offset),xt=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b7(d)),Tt=bt.add(xt).mult(A.scale/A.zoomScale(mt));return{center:A.unproject(H.add(ne).div(2).sub(Tt)),zoom:mt,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,g,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),d,g),g,v)}_fitInternal(r,l,d){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this._getTransformForUpdate();let g=!1,v=!1,A=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(g=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.M.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(v=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(A=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),g&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),v&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),A&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,d,g=0){const v=u.Y.fromLngLat(r,l),A=u.Y.fromLngLat(d,g),k=A.x-v.x,M=A.y-v.y,H=A.z-v.z,J=Math.hypot(k,M,H);if(J===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(k,M),pe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/J/this.transform.tileSize),Ae=180*Math.atan2(k,-M)/Math.PI;let Pe=180*Math.acos(ne/J)/Math.PI;return Pe=H<0?90-Pe:90+Pe,{center:A.toLngLat(),zoom:pe,pitch:Pe,bearing:Ae}}easeTo(r,l){this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b6},r)).animate===!1||!r.essential&&w.prefersReducedMotion)&&(r.duration=0);const d=this._getTransformForUpdate(),g=this.getZoom(),v=this.getBearing(),A=this.getPitch(),k=this.getPadding(),M="zoom"in r?+r.zoom:g,H="bearing"in r?this._normalizeBearing(r.bearing,v):v,J="pitch"in r?+r.pitch:A,ne="padding"in r?r.padding:d.padding,pe=u.P.convert(r.offset);let Ae=d.centerPoint.add(pe);const Pe=d.pointLocation(Ae),Oe=u.M.convert(r.center||Pe);this._normalizeCenter(Oe);const Ce=d.project(Pe),Xe=d.project(Oe).sub(Ce),tt=d.zoomScale(M-g);let je,Ke;r.around&&(je=u.M.convert(r.around),Ke=d.locationPoint(je));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==g,this._rotating=this._rotating||v!==H,this._pitching=this._pitching||J!==A,this._padding=!d.isPaddingEqual(ne),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,st),this.terrain&&this._prepareElevation(Oe),this._ease(it=>{if(this._zooming&&(d.zoom=u.z.number(g,M,it)),this._rotating&&(d.bearing=u.z.number(v,H,it)),this._pitching&&(d.pitch=u.z.number(A,J,it)),this._padding&&(d.interpolatePadding(k,ne,it),Ae=d.centerPoint.add(pe)),this.terrain&&!r.freezeElevation&&this._updateElevation(it),je)d.setLocationAtPoint(je,Ke);else{const mt=d.zoomScale(d.zoom-g),bt=M>g?Math.min(2,tt):Math.max(.5,tt),xt=Math.pow(bt,1-it),Tt=d.unproject(Ce.add(Xe.mult(it*xt)).mult(mt));d.setLocationAtPoint(d.renderWorldCopies?Tt.wrap():Tt,Ae)}this._applyUpdatedTransform(d),this._fireMoveEvents(l)},it=>{this.terrain&&this._finalizeElevation(),this._afterEase(l,it)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:d,zoom:g,pitch:v,bearing:A,elevation:k}=this.transformCameraUpdate(l);d&&(l.center=d),g!==void 0&&(l.zoom=g),v!==void 0&&(l.pitch=v),A!==void 0&&(l.bearing=A),k!==void 0&&(l.elevation=k),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,g=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),g&&this.fire(new u.k("rotateend",r)),v&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){if(!r.essential&&w.prefersReducedMotion){const Gt=u.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Gt,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b6},r);const d=this._getTransformForUpdate(),g=this.getZoom(),v=this.getBearing(),A=this.getPitch(),k=this.getPadding(),M="zoom"in r?u.ac(+r.zoom,d.minZoom,d.maxZoom):g,H="bearing"in r?this._normalizeBearing(r.bearing,v):v,J="pitch"in r?+r.pitch:A,ne="padding"in r?r.padding:d.padding,pe=d.zoomScale(M-g),Ae=u.P.convert(r.offset);let Pe=d.centerPoint.add(Ae);const Oe=d.pointLocation(Pe),Ce=u.M.convert(r.center||Oe);this._normalizeCenter(Ce);const Xe=d.project(Oe),tt=d.project(Ce).sub(Xe);let je=r.curve;const Ke=Math.max(d.width,d.height),st=Ke/pe,it=tt.mag();if("minZoom"in r){const Gt=u.ac(Math.min(r.minZoom,g,M),d.minZoom,d.maxZoom),nr=Ke/d.zoomScale(Gt-g);je=Math.sqrt(nr/it*2)}const mt=je*je;function bt(Gt){const nr=(st*st-Ke*Ke+(Gt?-1:1)*mt*mt*it*it)/(2*(Gt?st:Ke)*mt*it);return Math.log(Math.sqrt(nr*nr+1)-nr)}function xt(Gt){return(Math.exp(Gt)-Math.exp(-Gt))/2}function Tt(Gt){return(Math.exp(Gt)+Math.exp(-Gt))/2}const Nt=bt(!1);let sn=function(Gt){return Tt(Nt)/Tt(Nt+je*Gt)},kt=function(Gt){return Ke*((Tt(Nt)*(xt(nr=Nt+je*Gt)/Tt(nr))-xt(Nt))/mt)/it;var nr},rn=(bt(!0)-Nt)/je;if(Math.abs(it)<1e-6||!isFinite(rn)){if(Math.abs(Ke-st)<1e-6)return this.easeTo(r,l);const Gt=st<Ke?-1:1;rn=Math.abs(Math.log(st/Ke))/je,kt=function(){return 0},sn=function(nr){return Math.exp(Gt*je*nr)}}return r.duration="duration"in r?+r.duration:1e3*rn/("screenSpeed"in r?+r.screenSpeed/je:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==H,this._pitching=J!==A,this._padding=!d.isPaddingEqual(ne),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Ce),this._ease(Gt=>{const nr=Gt*rn,Tn=1/sn(nr);d.zoom=Gt===1?M:g+d.scaleZoom(Tn),this._rotating&&(d.bearing=u.z.number(v,H,Gt)),this._pitching&&(d.pitch=u.z.number(A,J,Gt)),this._padding&&(d.interpolatePadding(k,ne,Gt),Pe=d.centerPoint.add(Ae)),this.terrain&&!r.freezeElevation&&this._updateElevation(Gt);const _n=Gt===1?Ce:d.unproject(Xe.add(tt.mult(kt(nr))).mult(Tn));d.setLocationAtPoint(d.renderWorldCopies?_n.wrap():_n,Pe),this._applyUpdatedTransform(d),this._fireMoveEvents(l)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=w.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b0(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Ei={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Yh{constructor(r=Ei){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.sourceCaches;for(const g in l){const v=l[g];if(v.used||v.usedForTerrain){const A=v.getSource();A.attribution&&r.indexOf(A.attribution)<0&&r.push(A.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,v)=>g.length-v.length),r=r.filter((g,v)=>{for(let A=v+1;A<r.length;A++)if(r[A].indexOf(g)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ro{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");const l=T.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class dy{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const g of d)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Iu=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class hr extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const d={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aN(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Se(g,this.tileSize));for(const g in this._tiles)d[g]||delete this._tiles[g]}freeRtt(r){for(const l in this._tiles){const d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16),u.aN(v.posMatrix,0,u.W,0,u.W,0,1),l[d]=v}else if(g.canonical.isChildOf(r.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const A=g.canonical.z-r.canonical.z,k=g.canonical.x-(g.canonical.x>>A<<A),M=g.canonical.y-(g.canonical.y>>A<<A),H=u.W>>A;u.aN(v.posMatrix,0,H,0,H,0,1),u.H(v.posMatrix,v.posMatrix,[-k*H,-M*H,0]),l[d]=v}else if(r.canonical.isChildOf(g.canonical)){const v=r.clone();v.posMatrix=new Float64Array(16);const A=r.canonical.z-g.canonical.z,k=r.canonical.x-(r.canonical.x>>A<<A),M=r.canonical.y-(r.canonical.y>>A<<A),H=u.W>>A;u.aN(v.posMatrix,0,u.W,0,u.W,0,1),u.H(v.posMatrix,v.posMatrix,[k*H,M*H,0]),u.J(v.posMatrix,v.posMatrix,[1/2**A,1/2**A,0]),l[d]=v}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&l)for(;g>=d.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(g--).key);return v}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class Er{constructor(r,l,d){this.painter=r,this.sourceCache=new hr(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,g=u.W){var v;if(!(l>=0&&l<g&&d>=0&&d<g))return 0;const A=this.getTerrainData(r),k=(v=A.tile)===null||v===void 0?void 0:v.dem;if(!k)return 0;const M=function(Pe,Oe,Ce){var Xe=Oe[0],tt=Oe[1];return Pe[0]=Ce[0]*Xe+Ce[4]*tt+Ce[12],Pe[1]=Ce[1]*Xe+Ce[5]*tt+Ce[13],Pe}([],[l/g*u.W,d/g*u.W],A.u_terrain_matrix),H=[M[0]*k.dim,M[1]*k.dim],J=Math.floor(H[0]),ne=Math.floor(H[1]),pe=H[0]-J,Ae=H[1]-ne;return k.get(J,ne)*(1-pe)*(1-Ae)+k.get(J+1,ne)*pe*(1-Ae)+k.get(J,ne+1)*(1-pe)*Ae+k.get(J+1,ne+1)*pe*Ae}getElevationForLngLatZoom(r,l){const{tileID:d,mercatorX:g,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,g%u.W,v%u.W,u.W)}getElevation(r,l,d,g=u.W){return this.getDEMElevation(r,l,d,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,v=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new me(g,v,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new me(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new me(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let v=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?v=r.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=r.canonical.x-(r.canonical.x>>v<<v),k=r.canonical.y-(r.canonical.y>>v<<v),M=u.b8(new Float64Array(16),[1/(u.W<<v),1/(u.W<<v),0]);u.H(M,M,[A*u.W,k*u.W,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,d=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new me(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new me(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,g,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,A=0;v<this._coordsTextureSize;v++)for(let k=0;k<this._coordsTextureSize;k++,A+=4)l[A+0]=255&k,l[A+1]=255&v,l[A+2]=k>>8<<4|v>>8,l[A+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new me(r,d,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){const l=new Uint8Array(4),d=this.painter.context,g=d.gl;d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const v=l[0]+(l[2]>>4<<8),A=l[1]+((15&l[2])<<8),k=this.coordsIndex[255-l[3]],M=k&&this.sourceCache.getTileByID(k);if(!M)return null;const H=this._coordsTextureSize,J=(1<<M.tileID.canonical.z)*H;return new u.Y((M.tileID.canonical.x*H+v)/J+M.tileID.wrap,(M.tileID.canonical.y*H+A)/J,this.getElevation(M.tileID,v,A,H))}depthAtPoint(r){const l=new Uint8Array(4),d=this.painter.context,g=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.b9,d=new u.aX,g=this.meshSize,v=u.W/g,A=g*g;for(let ne=0;ne<=g;ne++)for(let pe=0;pe<=g;pe++)l.emplaceBack(pe*v,ne*v,0);for(let ne=0;ne<A;ne+=g+1)for(let pe=0;pe<g;pe++)d.emplaceBack(pe+ne,g+pe+ne+1,g+pe+ne+2),d.emplaceBack(pe+ne,g+pe+ne+2,pe+ne+1);const k=l.length,M=k+2*(g+1);for(const ne of[0,1])for(let pe=0;pe<=g;pe++)for(const Ae of[0,1])l.emplaceBack(pe*v,ne*u.W,Ae);for(let ne=0;ne<2*g;ne+=2)d.emplaceBack(M+ne,M+ne+1,M+ne+3),d.emplaceBack(M+ne,M+ne+3,M+ne+2),d.emplaceBack(k+ne,k+ne+3,k+ne+1),d.emplaceBack(k+ne,k+ne+2,k+ne+3);const H=l.length,J=H+2*(g+1);for(const ne of[0,1])for(let pe=0;pe<=g;pe++)for(const Ae of[0,1])l.emplaceBack(ne*u.W,pe*v,Ae);for(let ne=0;ne<2*g;ne+=2)d.emplaceBack(H+ne,H+ne+1,H+ne+3),d.emplaceBack(H+ne,H+ne+3,H+ne+2),d.emplaceBack(J+ne,J+ne+3,J+ne+1),d.emplaceBack(J+ne,J+ne+2,J+ne+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(l,Iu.members),segments:u.$.simpleSegment(0,0,l.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.ba/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var d;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(g).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){const d=u.Y.fromLngLat(r.wrap()),g=(1<<l)*u.W,v=d.x*g,A=d.y*g,k=Math.floor(v/u.W),M=Math.floor(A/u.W);return{tileID:new u.Q(l,0,l,k,M),mercatorX:v,mercatorY:A}}}class op{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new me(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ns={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ec{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new op(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const g=r.sourceCaches[d].getVisibleCoordinates();for(const v of g){const A=this.terrain.sourceCache.getTerrainCoords(v);for(const k in A)this._coordsDescendingInv[d][k]||(this._coordsDescendingInv[d][k]=[]),this._coordsDescendingInv[d][k].push(A[k])}}this._coordsDescendingInvStr={};for(const d of r._order){const g=r._layers[d],v=g.source;if(ns[g.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const A in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][A]=this._coordsDescendingInv[v][A].map(k=>k.key).sort().join()}}for(const d of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[g][d.tileID.key];v&&v!==d.rttCoords[g]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,d=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ns[l]&&(this._prevType&&ns[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(ns[this._prevType]||ns[l]&&g){this._prevType=l;const v=this._stacks.length-1,A=this._stacks[v]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(Ji(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[v]){const H=this.pool.getObjectForId(k.rtt[v].id);if(H.stamp===k.rtt[v].stamp){this.pool.useObject(H);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),k.rtt[v]={id:M.id,stamp:M.stamp},d.context.bindFramebuffer.set(M.fbo.framebuffer),d.context.clear({color:u.aO.transparent,stencil:0}),d.currentStencilSource=void 0;for(let H=0;H<A.length;H++){const J=d.style._layers[A[H]],ne=J.source?this._coordsDescendingInv[J.source][k.tileID.key]:[k.tileID];d.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),d._renderTileClippingMasks(J,ne),d.renderLayer(d,d.style.sourceCaches[J.source],J,ne),J.source&&(k.rttCoords[J.source]=this._coordsDescendingInvStr[J.source][k.tileID.key])}}return Ji(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ns[l]}return!1}}const Jh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qh=b,ed={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Ei,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Al=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},td={showCompass:!0,showZoom:!0,visualizePitch:!1};class nd{constructor(r,l,d=!1){this.mousedown=A=>{this.startMouse(u.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),T.mousePos(this.element,A)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,T.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),v=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=Wh({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:k,bearingDegreesPerPixelMoved:M=.8})=>{const H=new vs;return new ts({clickTolerance:k,move:(J,ne)=>({bearingDelta:(ne.x-J.x)*M}),moveStateManager:H,enable:A,assignEvents:Al})})({clickTolerance:g,enable:!0}),this.map=r,d&&(this.mousePitch=Cl({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:k,pitchDegreesPerPixelMoved:M=-.5})=>{const H=new vs;return new ts({clickTolerance:k,move:(J,ne)=>({pitchDelta:(ne.y-J.y)*M}),moveStateManager:H,enable:A,assignEvents:Al})})({clickTolerance:v,enable:!0})),T.addEventListener(l,"mousedown",this.mousedown),T.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),T.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),T.disableDrag()}moveMouse(r,l){const d=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(r,l)||{};v&&d.setPitch(d.getPitch()+v)}}moveTouch(r,l){const d=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(r,l)||{};v&&d.setPitch(d.getPitch()+v)}}off(){const r=this.element;T.removeEventListener(r,"mousedown",this.mousedown),T.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let _s;function Tc(y,r,l){if(y=new u.M(y.lng,y.lat),r){const d=new u.M(y.lng-360,y.lat),g=new u.M(y.lng+360,y.lat),v=l.locationPoint(y).distSqr(r);l.locationPoint(d).distSqr(r)<v?y=d:l.locationPoint(g).distSqr(r)<v&&(y=g)}for(;Math.abs(y.lng-l.center.lng)>180;){const d=l.locationPoint(y);if(d.x>=0&&d.y>=0&&d.x<=l.width&&d.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y}const Au={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Cc(y,r,l){const d=y.classList;for(const g in Au)d.remove(`maplibregl-${l}-anchor-${g}`);d.add(`maplibregl-${l}-anchor-${r}`)}class Pu extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const d=l.code,g=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()},this._update=l=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!d)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Tc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${Au[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${g}`),this._updateOpacity(l&&l.type==="moveend")},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");const l=T.createNS("http://www.w3.org/2000/svg","svg"),d=41,g=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${g}px`),l.setAttributeNS(null,"viewBox",`0 0 ${g} ${d}`);const v=T.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const A=T.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const k=T.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Xe of M){const tt=T.createNS("http://www.w3.org/2000/svg","ellipse");tt.setAttributeNS(null,"opacity","0.04"),tt.setAttributeNS(null,"cx","10.5"),tt.setAttributeNS(null,"cy","5.80029008"),tt.setAttributeNS(null,"rx",Xe.rx),tt.setAttributeNS(null,"ry",Xe.ry),k.appendChild(tt)}const H=T.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const J=T.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(J);const ne=T.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const pe=T.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(pe);const Ae=T.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const Pe=T.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Oe=T.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#000000"),Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962");const Ce=T.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Oe),Pe.appendChild(Ce),A.appendChild(k),A.appendChild(H),A.appendChild(ne),A.appendChild(Ae),A.appendChild(Pe),l.appendChild(A),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Cc(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_updateOpacity(r=!1){if(!this._map.terrain)return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const l=this._map,d=l.terrain.depthAtPoint(this._pos),g=l.terrain.getElevationForLngLatZoom(this._lngLat,l.transform.tileZoom);if(l.transform.lngLatToCameraDepth(this._lngLat,g)-d<.006)return void(this._element.style.opacity=this._opacity);const v=-this._offset.y/l.transform._pixelPerMeter,A=Math.sin(l.getPitch()*Math.PI/180)*v,k=l.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),M=l.transform.lngLatToCameraDepth(this._lngLat,g+A);this._element.style.opacity=M-k>.006?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const rd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Pa=0,ka=!1;const id={maxWidth:100,unit:"metric"};function ku(y,r,l){const d=l&&l.maxWidth||100,g=y._container.clientHeight/2,v=y.unproject([0,g]),A=y.unproject([d,g]),k=v.distanceTo(A);if(l&&l.unit==="imperial"){const M=3.2808*k;M>5280?Ma(r,d,M/5280,y._getUIString("ScaleControl.Miles")):Ma(r,d,M,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Ma(r,d,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Ma(r,d,k/1e3,y._getUIString("ScaleControl.Kilometers")):Ma(r,d,k,y._getUIString("ScaleControl.Meters"))}function Ma(y,r,l,d){const g=function(v){const A=Math.pow(10,`${Math.floor(v)}`.length-1);let k=v/A;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(M){const H=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*H)/H}(k),A*k}(l);y.style.width=r*(g/l)+"px",y.innerHTML=`${g}&nbsp;${d}`}const od={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},sd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ic(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-y),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const r=u.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return Ic(new u.P(0,0))}const ad=b;f.AJAXError=u.bd,f.Evented=u.E,f.LngLat=u.M,f.MercatorCoordinate=u.Y,f.Point=u.P,f.addProtocol=u.be,f.config=u.a,f.removeProtocol=u.bf,f.AttributionControl=Yh,f.BoxZoomHandler=br,f.CanvasSource=Ze,f.CooperativeGesturesHandler=Cu,f.DoubleClickZoomHandler=Sc,f.DragPanHandler=Xh,f.DragRotateHandler=ip,f.EdgeInsets=es,f.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=we,f.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.M(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,g=this._map.getBearing(),v=u.e({bearing:g},this.options.fitBoundsOptions),A=qt.fromLngLat(l,d);this._map.fitBounds(A,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&ka)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Pu({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},rd,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r=!1){return u._(this,void 0,void 0,function*(){if(_s!==void 0&&!r)return _s;if(window.navigator.permissions===void 0)return _s=!!window.navigator.geolocation,_s;try{_s=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{_s=!!window.navigator.geolocation}return _s})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Pa=0,ka=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),l=y.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),l=y.getNorthEast(),d=r.distanceTo(l),g=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Pa--,ka=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Pa++,Pa>1?(y={maximumAge:6e5,timeout:0},ka=!0):(y=this.options.positionOptions,ka=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.Hash=Tl,f.ImageSource=D,f.KeyboardHandler=tp,f.LngLatBounds=qt,f.LogoControl=Ro,f.Map=class extends Kh{constructor(y){if(u.bb.mark(u.bc.create),(y=u.e({},ed,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ta(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new dy,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},Jh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new X(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const l=El(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{r?l(d):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qh(this,y),this._hash=y.hash&&new Tl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Yh(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Ro,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,l,d)}resize(y){var r;const l=this._containerDimensions(),d=l[0],g=l[1],v=this._getClampedPixelRatio(d,g);if(this._resizeCanvas(d,g,v),this.painter.resize(d,g,v),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const M=this._getClampedPixelRatio(d,g);this._resizeCanvas(d,g,M),this.painter.resize(d,g,M)}this.transform.resize(d,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,g);const A=!this._moving;return A&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),A&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:l,1:d}=this._maxCanvasSize,g=this.getPixelRatio(),v=y*g,A=r*g;return Math.min(v>l?l/v:1,A>d?d/A:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(qt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,l){if(y==="mouseenter"||y==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:v=>{const A=this.getLayer(r)?this.queryRenderedFeatures(v.point,{layers:[r]}):[];A.length?d||(d=!0,l.call(this,new on(y,this,v.originalEvent,{features:A}))):d=!1},mouseout:()=>{d=!1}}}}if(y==="mouseleave"||y==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:A=>{(this.getLayer(r)?this.queryRenderedFeatures(A.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new on(y,this,A.originalEvent)))},mouseout:A=>{d&&(d=!1,l.call(this,new on(y,this,A.originalEvent)))}}}}{const d=g=>{const v=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];v.length&&(g.features=v,l.call(this,g),delete g.features)};return{layer:r,listener:l,delegates:{[y]:d}}}}on(y,r,l){if(l===void 0)return super.on(y,r);const d=this._createDelegatedListener(y,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(y,r,l){if(l===void 0)return super.once(y,r);const d=this._createDelegatedListener(y,r,l);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(y,r,l){return l===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(d=>{const g=this._delegatedListeners[y];for(let v=0;v<g.length;v++){const A=g[v];if(A.layer===r&&A.listener===l){for(const k in A.delegates)this.off(k,A.delegates[k]);return g.splice(v,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let l;const d=y instanceof u.P||Array.isArray(y),g=d?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:y)||{},g instanceof u.P||typeof g[0]=="number")l=[u.P.convert(g)];else{const v=u.P.convert(g[0]),A=u.P.convert(g[1]);l=[v,new u.P(A.x,v.y),A,new u.P(v.x,A.y),v]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new xi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,l):this.style.loadJSON(y,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,ie.Style);u.h(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Er(this.painter,r,y),this.painter.renderToTexture=new Ec(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const l=y[r]._tiles;for(const d in l){const g=l[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,l={}){const{pixelRatio:d=1,sdf:g=!1,stretchX:v,stretchY:A,content:k}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:M,height:H,data:J}=r,ne=r;return this.style.addImage(y,{data:new u.R({width:M,height:H},new Uint8Array(J)),pixelRatio:d,stretchX:v,stretchY:A,content:k,sdf:g,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,y),this}}{const{width:M,height:H,data:J}=w.getImageData(r);this.style.addImage(y,{data:new u.R({width:M,height:H},J),pixelRatio:d,stretchX:v,stretchY:A,content:k,sdf:g,version:0})}}updateImage(y,r){const l=this.style.getImage(y);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?w.getImageData(r):r,{width:g,height:v,data:A}=d;if(g===void 0||v===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||v!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(A,k),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return $.getImage(this._requestManager.transformRequest(y,ie.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,l){return this.style.setLayerZoomRange(y,r,l),this._update(!0)}setFilter(y,r,l={}){return this.style.setFilter(y,r,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,l,d={}){return this.style.setPaintProperty(y,r,l,d),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,l,d={}){return this.style.setLayoutProperty(y,r,l,d),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,l,d=>{d||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,l=>{l||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const g=this._controlContainer=T.create("div","maplibregl-control-container",y),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{v[A]=T.create("div",`maplibregl-ctrl-${A} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:y},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!l){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new Su(l,this.transform),O.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,v=w.now();this.style.zoomHistory.update(g,v);const A=new u.a8(g,{now:v,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=A.crossFadingFactor();k===1&&k===this._crossFadingFactor||(l=!0,this._crossFadingFactor=k),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bb.mark(u.bc.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.bb.mark(u.bc.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bb.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,w.frameAsync(this._frameRequest).then(y=>{u.bb.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Qh}getCameraTargetElevation(){return this.transform.elevation}},f.MapMouseEvent=on,f.MapTouchEvent=Ln,f.MapWheelEvent=Mn,f.Marker=Pu,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},td,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const l=T.create("button",y,this._container);return l.type="button",l.addEventListener("click",r),l}},f.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map),this.fire(new u.k("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Tc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const l=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let d=this.options.anchor;const g=Ic(this.options.offset);if(!d){const A=this._container.offsetWidth,k=this._container.offsetHeight;let M;M=l.y+g.bottom.y<k?["top"]:l.y>this._map.transform.height-k?["bottom"]:[],l.x<A/2?M.push("left"):l.x>this._map.transform.width-A/2&&M.push("right"),d=M.length===0?"bottom":M.join("-")}const v=l.add(g[d]).round();T.setTransform(this._container,`${Au[d]} translate(${v.x}px,${v.y}px)`),Cc(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(od),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=y;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(sd);y&&y.focus()}},f.RasterDEMTileSource=xn,f.RasterTileSource=hn,f.ScaleControl=class{constructor(y){this._onMove=()=>{ku(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,ku(this._map,this._container,this.options)},this.options=u.e({},id,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Tu,f.Style=xi,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Zh,f.TwoFingersTouchRotateHandler=wc,f.TwoFingersTouchZoomHandler=Qf,f.TwoFingersTouchZoomRotateHandler=zo,f.VectorTileSource=et,f.VideoSource=xe,f.addSourceType=(y,r)=>u._(void 0,void 0,void 0,function*(){if(ct(y))throw new Error(`A source type called "${y}" already exists.`);((l,d)=>{Qe[l]=d})(y,r)}),f.clearPrewarmedResources=function(){const y=He;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(ke),He=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return z().getRTLTextPluginStatus()},f.getVersion=function(){return ad},f.getWorkerCount=function(){return ze.workerCount},f.getWorkerUrl=function(){return u.a.WORKER_URL},f.importScriptInWorkers=function(y){return Mt().broadcast("importScript",y)},f.prewarm=function(){ht().acquire(ke)},f.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,r){return z().setRTLTextPlugin(y,r)},f.setWorkerCount=function(y){ze.workerCount=y},f.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var p=i;return p})})(yC);var _C=yC.exports;const xC=jf(_C),N3=pk({__proto__:null,default:xC},[_C]),U3="modulepreload",$3=function(e){return"/osm-address-editor-vite/"+e},h2={},V3=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const p=document.getElementsByTagName("link");c=Promise.all(i.map(f=>{if(f=$3(f),f in h2)return;h2[f]=!0;const u=f.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(!!a)for(let w=p.length-1;w>=0;w--){const T=p[w];if(T.href===f&&(!u||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${b}`))return;const I=document.createElement("link");if(I.rel=u?"stylesheet":U3,u||(I.as="script",I.crossOrigin=""),I.href=f,document.head.appendChild(I),u)return new Promise((w,T)=>{I.addEventListener("load",w),I.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${f}`)))})}))}return c.then(()=>t()).catch(p=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=p,window.dispatchEvent(f),!f.defaultPrevented)throw p})},G3=_t.createContext(null);function H3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===p}function Uo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Uo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Uo(e[c],t[c]))return!1;return!0}return!1}function W3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function d2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Uo(i,a)||t.setProjection(i)}function f2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function p2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const Z3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function m2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const p=t[a.ref];if(p){c=c||Object.assign({},a),delete c.ref;for(const f of Z3)f in p&&(c[f]=p[f])}return c||a});return{...e,layers:i}}var g2={};const y2={version:8,sources:{},layers:[]},v2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},T0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},_2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},X3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],q3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ih{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const p=this.props[_2[c.type]];p?p(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const p=this.props[v2[c.type]];p&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),p(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const p=this.props[T0[c.type]];p&&p(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),p=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||p&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Ih.savedMaps.pop();if(!a)return null;const c=a.map,p=c.getContainer();for(i.className=p.className;p.childNodes.length>0;)i.appendChild(p.childNodes[0]);c._container=i;const f=c._resizeObserver;f&&(f.disconnect(),f.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=y2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||K3()||null,container:t,style:m2(a)},p=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[p.longitude||0,p.latitude||0],zoom:p.zoom||0,pitch:p.pitch||0,bearing:p.bearing||0}),i.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,i.gl)}const f=new this._MapClass(c);p.padding&&f.setPadding(p.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),this._createShadowTransform(f);const u=f._render;f._render=I=>{this._inRender=!0,u.call(f,I),this._inRender=!1};const b=f._renderTaskQueue.run;f._renderTaskQueue.run=I=>{b.call(f._renderTaskQueue,I),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const C=f.fire;f.fire=this._fireEvent.bind(this,C),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),d2(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in v2)f.on(I,this._onPointerEvent);for(const I in T0)f.on(I,this._onCameraEvent);for(const I in _2)f.on(I,this._onEvent);this._map=f}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Ih.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=W3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:p,pitch:f,bearing:u}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const C=p2(c,{...f2(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),C&&i){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=p!==c.zoom),I.rotate||(I.rotate=u!==c.bearing),I.pitch||(I.pitch=f!==c.pitch)}return b||p2(a.transform,t),C}_updateSettings(t,i){const a=this._map;let c=!1;for(const p of X3)if(p in t&&!Uo(t[p],i[p])){c=!0;const f=a[`set${p[0].toUpperCase()}${p.slice(1)}`];f==null||f.call(a,t[p])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=y2,styleDiffing:c=!0}=t,p={diff:c};return"localIdeographFontFamily"in t&&(p.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(m2(a),p),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Uo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Uo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Uo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const p=this._map;let f=!1;for(const u of q3){const b=(a=t[u])!==null&&a!==void 0?a:!0,C=(c=i[u])!==null&&c!==void 0?c:!0;Uo(b,C)||(f=!0,b?p[u].enable(b):p[u].disable())}return f}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const p=t.type,f=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),b=u.length>0;!b&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,b&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=p}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,p=c.transform,f=typeof i=="string"?i:i.type;return f==="move"&&this._updateViewState(this.props,!1),f in T0&&(typeof i=="object"&&(i.viewState=f2(p)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=p,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{d2(this._renderTransform,i),t.transform=i}}}Ih.savedMaps=[];function K3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||g2.MapboxAccessToken}catch{}try{e=e||g2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Y3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function J3(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const p=t.project(a);return t.transform=c,p},unproject:a=>{const c=t.transform;t.transform=e.transform;const p=t.unproject(a);return t.transform=c,p},queryTerrainElevation:(a,c)=>{const p=t.transform;t.transform=e.transform;const f=t.queryTerrainElevation(a,c);return t.transform=p,f},queryRenderedFeatures:(a,c)=>{const p=t.transform;t.transform=e.transform;const f=t.queryRenderedFeatures(a,c);return t.transform=p,f}};for(const a of Q3(t))!(a in i)&&!Y3.includes(a)&&(i[a]=t[a].bind(t));return i}function Q3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const e4=typeof document<"u"?_t.useLayoutEffect:_t.useEffect,t4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function n4(e,t){for(const a of t4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Fh=_t.createContext(null);function r4(e,t,i){const a=_t.useContext(G3),[c,p]=_t.useState(null),f=_t.useRef(),{current:u}=_t.useRef({mapLib:null,map:null});_t.useEffect(()=>{const I=e.mapLib;let w=!0,T;return Promise.resolve(I||i).then(O=>{if(!w)return;if(!O)throw new Error("Invalid mapLib");const U="Map"in O?O:O.default;if(!U.Map)throw new Error("Invalid mapLib");if(n4(U,e),!U.supported||U.supported(e))e.reuseMaps&&(T=Ih.reuse(e,f.current)),T||(T=new Ih(U.Map,e,f.current)),u.map=J3(T),u.mapLib=U,p(T),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(O=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:O}):console.error(O)}),()=>{w=!1,T&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?T.recycle():T.destroy())}},[]),e4(()=>{c&&c.setProps(e)}),_t.useImperativeHandle(t,()=>u.map,[c]);const b=_t.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return _t.createElement("div",{id:e.id,ref:f,style:b},c&&_t.createElement(Fh.Provider,{value:u},_t.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const i4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function nc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!i4.test(a)?i[a]=`${c}px`:i[a]=c}}function o4(e,t){const{map:i,mapLib:a}=_t.useContext(Fh),c=_t.useRef({props:e});c.current.props=e;const p=_t.useMemo(()=>{let F=!1;_t.Children.forEach(e.children,W=>{W&&(F=!0)});const ue={...e,element:F?document.createElement("div"):null},K=new a.Marker(ue);return K.setLngLat([e.longitude,e.latitude]),K.getElement().addEventListener("click",W=>{var $,ie;(ie=($=c.current.props).onClick)===null||ie===void 0||ie.call($,{type:"click",target:K,originalEvent:W})}),K.on("dragstart",W=>{var $,ie;const X=W;X.lngLat=p.getLngLat(),(ie=($=c.current.props).onDragStart)===null||ie===void 0||ie.call($,X)}),K.on("drag",W=>{var $,ie;const X=W;X.lngLat=p.getLngLat(),(ie=($=c.current.props).onDrag)===null||ie===void 0||ie.call($,X)}),K.on("dragend",W=>{var $,ie;const X=W;X.lngLat=p.getLngLat(),(ie=($=c.current.props).onDragEnd)===null||ie===void 0||ie.call($,X)}),K},[]);_t.useEffect(()=>(p.addTo(i.getMap()),()=>{p.remove()}),[]);const{longitude:f,latitude:u,offset:b,style:C,draggable:I=!1,popup:w=null,rotation:T=0,rotationAlignment:O="auto",pitchAlignment:U="auto"}=e;return _t.useEffect(()=>{nc(p.getElement(),C)},[C]),_t.useImperativeHandle(t,()=>p,[]),(p.getLngLat().lng!==f||p.getLngLat().lat!==u)&&p.setLngLat([f,u]),b&&!H3(p.getOffset(),b)&&p.setOffset(b),p.isDraggable()!==I&&p.setDraggable(I),p.getRotation()!==T&&p.setRotation(T),p.getRotationAlignment()!==O&&p.setRotationAlignment(O),p.getPitchAlignment()!==U&&p.setPitchAlignment(U),p.getPopup()!==w&&p.setPopup(w),D1.createPortal(e.children,p.getElement())}const s4=_t.memo(_t.forwardRef(o4));function x2(e){return new Set(e?e.trim().split(/\s+/):[])}function a4(e,t){const{map:i,mapLib:a}=_t.useContext(Fh),c=_t.useMemo(()=>document.createElement("div"),[]),p=_t.useRef({props:e});p.current.props=e;const f=_t.useMemo(()=>{const u={...e},b=new a.Popup(u);return b.setLngLat([e.longitude,e.latitude]),b.once("open",C=>{var I,w;(w=(I=p.current.props).onOpen)===null||w===void 0||w.call(I,C)}),b},[]);if(_t.useEffect(()=>{const u=b=>{var C,I;(I=(C=p.current.props).onClose)===null||I===void 0||I.call(C,b)};return f.on("close",u),f.setDOMContent(c).addTo(i.getMap()),()=>{f.off("close",u),f.isOpen()&&f.remove()}},[]),_t.useEffect(()=>{nc(f.getElement(),e.style)},[e.style]),_t.useImperativeHandle(t,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Uo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const u=x2(f.options.className),b=x2(e.className);for(const C of u)b.has(C)||f.removeClassName(C);for(const C of b)u.has(C)||f.addClassName(C);f.options.className=e.className}return D1.createPortal(e.children,c)}_t.memo(_t.forwardRef(a4));function Vf(e,t,i,a){const c=_t.useContext(Fh),p=_t.useMemo(()=>e(c),[]);return _t.useEffect(()=>{const f=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:C}=c;return C.hasControl(p)||(C.addControl(p,f==null?void 0:f.position),u&&u(c)),()=>{b&&b(c),C.hasControl(p)&&C.removeControl(p)}},[]),p}function l4(e){const t=Vf(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return _t.useEffect(()=>{nc(t._container,e.style)},[e.style]),null}_t.memo(l4);function u4(e){const t=Vf(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return _t.useEffect(()=>{nc(t._controlContainer,e.style)},[e.style]),null}_t.memo(u4);function c4(e,t){const i=_t.useRef({props:e}),a=Vf(({mapLib:c})=>{const p=new c.GeolocateControl(e),f=p._setupUI;return p._setupUI=u=>{p._container.hasChildNodes()||f(u)},p.on("geolocate",u=>{var b,C;(C=(b=i.current.props).onGeolocate)===null||C===void 0||C.call(b,u)}),p.on("error",u=>{var b,C;(C=(b=i.current.props).onError)===null||C===void 0||C.call(b,u)}),p.on("outofmaxbounds",u=>{var b,C;(C=(b=i.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(b,u)}),p.on("trackuserlocationstart",u=>{var b,C;(C=(b=i.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(b,u)}),p.on("trackuserlocationend",u=>{var b,C;(C=(b=i.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(b,u)}),p},{position:e.position});return i.current.props=e,_t.useImperativeHandle(t,()=>a,[]),_t.useEffect(()=>{nc(a._container,e.style)},[e.style]),null}const h4=_t.memo(_t.forwardRef(c4));function d4(e){const t=Vf(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return _t.useEffect(()=>{nc(t._container,e.style)},[e.style]),null}const f4=_t.memo(d4);function p4(e){const t=Vf(({mapLib:p})=>new p.ScaleControl(e),{position:e.position}),i=_t.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),_t.useEffect(()=>{nc(t._container,c)},[c]),null}_t.memo(p4);function ig(e,t){if(!e)throw new Error(t)}function m4(e,t,i,a){if(ig(i.id===a.id,"layer id changed"),ig(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:p={},filter:f,minzoom:u,maxzoom:b,beforeId:C}=i;if(C!==a.beforeId&&e.moveLayer(t,C),c!==a.layout){const I=a.layout||{};for(const w in c)Uo(c[w],I[w])||e.setLayoutProperty(t,w,c[w]);for(const w in I)c.hasOwnProperty(w)||e.setLayoutProperty(t,w,void 0)}if(p!==a.paint){const I=a.paint||{};for(const w in p)Uo(p[w],I[w])||e.setPaintProperty(t,w,p[w]);for(const w in I)p.hasOwnProperty(w)||e.setPaintProperty(t,w,void 0)}Uo(f,a.filter)||e.setFilter(t,f),(u!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,u,b)}function g4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let y4=0;function v4(e){const t=_t.useContext(Fh).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-layer-${y4++}`,[]);if(_t.useEffect(()=>{if(t){const f=()=>a(u=>u+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{m4(t,c,e,i.current)}catch(f){console.warn(f)}else g4(t,c,e);return i.current=e,null}let _4=0;function x4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function w4(e,t,i){ig(t.id===i.id,"source id changed"),ig(t.type===i.type,"source type changed");let a="",c=0;for(const f in t)f!=="children"&&f!=="id"&&!Uo(i[f],t[f])&&(a=f,c++);if(!c)return;const p=t.type;if(p==="geojson")e.setData(t.data);else if(p==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function b4(e){const t=_t.useContext(Fh).map.getMap(),i=_t.useRef(e),[,a]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-source-${_4++}`,[]);_t.useEffect(()=>{if(t){const f=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",f),f(),()=>{var u;if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(c)){const b=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(b)for(const C of b)C.source===c&&t.removeLayer(C.id);t.removeSource(c)}}}},[t]);let p=t&&t.style&&t.getSource(c);return p?w4(p,e,i.current):p=x4(t,c,e),i.current=e,p&&_t.Children.map(e.children,f=>f&&_t.cloneElement(f,{source:c}))||null}const S4=V3(()=>Promise.resolve().then(()=>N3),void 0),E4=_t.forwardRef(function(t,i){return r4(t,i,S4)}),T4=s4,C4=f4,I4=h4,A4=v4,P4=b4;function w2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Jt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(i),!0).forEach(function(a){si(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function og(e){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},og(e)}function k4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M4(e,t,i){return t&&b2(e.prototype,t),i&&b2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function si(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B1(e,t){return R4(e)||O4(e,t)||wC(e,t)||j4()}function Gf(e){return z4(e)||L4(e)||wC(e)||F4()}function z4(e){if(Array.isArray(e))return Yv(e)}function R4(e){if(Array.isArray(e))return e}function L4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function O4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,p=!1,f,u;try{for(i=i.call(e);!(c=(f=i.next()).done)&&(a.push(f.value),!(t&&a.length===t));c=!0);}catch(b){p=!0,u=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(p)throw u}}return a}}function wC(e,t){if(e){if(typeof e=="string")return Yv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Yv(e,t)}}function Yv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function F4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S2=function(){},N1={},bC={},SC=null,EC={mark:S2,measure:S2};try{typeof window<"u"&&(N1=window),typeof document<"u"&&(bC=document),typeof MutationObserver<"u"&&(SC=MutationObserver),typeof performance<"u"&&(EC=performance)}catch{}var D4=N1.navigator||{},E2=D4.userAgent,T2=E2===void 0?"":E2,ou=N1,yr=bC,C2=SC,Zp=EC;ou.document;var el=!!yr.documentElement&&!!yr.head&&typeof yr.addEventListener=="function"&&typeof yr.createElement=="function",TC=~T2.indexOf("MSIE")||~T2.indexOf("Trident/"),Xp,qp,Kp,Yp,Jp,qa="___FONT_AWESOME___",Jv=16,CC="fa",IC="svg-inline--fa",Ku="data-fa-i2svg",Qv="data-fa-pseudo-element",B4="data-fa-pseudo-element-pending",U1="data-prefix",$1="data-icon",I2="fontawesome-i2svg",N4="async",U4=["HTML","HEAD","STYLE","SCRIPT"],AC=function(){try{return!0}catch{return!1}}(),mr="classic",jr="sharp",V1=[mr,jr];function Hf(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[mr]}})}var Af=Hf((Xp={},si(Xp,mr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),si(Xp,jr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Xp)),Pf=Hf((qp={},si(qp,mr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),si(qp,jr,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),qp)),kf=Hf((Kp={},si(Kp,mr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),si(Kp,jr,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Kp)),$4=Hf((Yp={},si(Yp,mr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),si(Yp,jr,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Yp)),V4=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,PC="fa-layers-text",G4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,H4=Hf((Jp={},si(Jp,mr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),si(Jp,jr,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Jp)),kC=[1,2,3,4,5,6,7,8,9,10],W4=kC.concat([11,12,13,14,15,16,17,18,19,20]),Z4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Uu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Mf=new Set;Object.keys(Pf[mr]).map(Mf.add.bind(Mf));Object.keys(Pf[jr]).map(Mf.add.bind(Mf));var X4=[].concat(V1,Gf(Mf),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Uu.GROUP,Uu.SWAP_OPACITY,Uu.PRIMARY,Uu.SECONDARY]).concat(kC.map(function(e){return"".concat(e,"x")})).concat(W4.map(function(e){return"w-".concat(e)})),rf=ou.FontAwesomeConfig||{};function q4(e){var t=yr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function K4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(yr&&typeof yr.querySelector=="function"){var Y4=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Y4.forEach(function(e){var t=B1(e,2),i=t[0],a=t[1],c=K4(q4(i));c!=null&&(rf[a]=c)})}var MC={styleDefault:"solid",familyDefault:"classic",cssPrefix:CC,replacementClass:IC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};rf.familyPrefix&&(rf.cssPrefix=rf.familyPrefix);var Ah=Jt(Jt({},MC),rf);Ah.autoReplaceSvg||(Ah.observeMutations=!1);var an={};Object.keys(MC).forEach(function(e){Object.defineProperty(an,e,{enumerable:!0,set:function(i){Ah[e]=i,of.forEach(function(a){return a(an)})},get:function(){return Ah[e]}})});Object.defineProperty(an,"familyPrefix",{enumerable:!0,set:function(t){Ah.cssPrefix=t,of.forEach(function(i){return i(an)})},get:function(){return Ah.cssPrefix}});ou.FontAwesomeConfig=an;var of=[];function J4(e){return of.push(e),function(){of.splice(of.indexOf(e),1)}}var Dl=Jv,na={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Q4(e){if(!(!e||!el)){var t=yr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=yr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var p=i[c],f=(p.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(f)>-1&&(a=p)}return yr.head.insertBefore(t,a),e}}var ez="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function zf(){for(var e=12,t="";e-- >0;)t+=ez[Math.random()*62|0];return t}function jh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function G1(e){return e.classList?jh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function zC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function tz(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(zC(e[i]),'" ')},"").trim()}function Jg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function H1(e){return e.size!==na.size||e.x!==na.x||e.y!==na.y||e.rotate!==na.rotate||e.flipX||e.flipY}function nz(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},p="translate(".concat(t.x*32,", ").concat(t.y*32,") "),f="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(p," ").concat(f," ").concat(u)},C={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:C}}function rz(e){var t=e.transform,i=e.width,a=i===void 0?Jv:i,c=e.height,p=c===void 0?Jv:c,f=e.startCentered,u=f===void 0?!1:f,b="";return u&&TC?b+="translate(".concat(t.x/Dl-a/2,"em, ").concat(t.y/Dl-p/2,"em) "):u?b+="translate(calc(-50% + ".concat(t.x/Dl,"em), calc(-50% + ").concat(t.y/Dl,"em)) "):b+="translate(".concat(t.x/Dl,"em, ").concat(t.y/Dl,"em) "),b+="scale(".concat(t.size/Dl*(t.flipX?-1:1),", ").concat(t.size/Dl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var iz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function RC(){var e=CC,t=IC,i=an.cssPrefix,a=an.replacementClass,c=iz;if(i!==e||a!==t){var p=new RegExp("\\.".concat(e,"\\-"),"g"),f=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(p,".".concat(i,"-")).replace(f,"--".concat(i,"-")).replace(u,".".concat(a))}return c}var A2=!1;function C0(){an.autoAddCss&&!A2&&(Q4(RC()),A2=!0)}var oz={mixout:function(){return{dom:{css:RC,insertCss:C0}}},hooks:function(){return{beforeDOMElementCreation:function(){C0()},beforeI2svg:function(){C0()}}}},Ka=ou||{};Ka[qa]||(Ka[qa]={});Ka[qa].styles||(Ka[qa].styles={});Ka[qa].hooks||(Ka[qa].hooks={});Ka[qa].shims||(Ka[qa].shims=[]);var Ms=Ka[qa],LC=[],sz=function e(){yr.removeEventListener("DOMContentLoaded",e),sg=1,LC.map(function(t){return t()})},sg=!1;el&&(sg=(yr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(yr.readyState),sg||yr.addEventListener("DOMContentLoaded",sz));function az(e){el&&(sg?setTimeout(e,0):LC.push(e))}function Wf(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,p=c===void 0?[]:c;return typeof e=="string"?zC(e):"<".concat(t," ").concat(tz(a),">").concat(p.map(Wf).join(""),"</").concat(t,">")}function P2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var lz=function(t,i){return function(a,c,p,f){return t.call(i,a,c,p,f)}},I0=function(t,i,a,c){var p=Object.keys(t),f=p.length,u=c!==void 0?lz(i,c):i,b,C,I;for(a===void 0?(b=1,I=t[p[0]]):(b=0,I=a);b<f;b++)C=p[b],I=u(I,t[C],C,t);return I};function uz(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var p=e.charCodeAt(i++);(p&64512)==56320?t.push(((c&1023)<<10)+(p&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function e_(e){var t=uz(e);return t.length===1?t[0].toString(16):null}function cz(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function k2(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function t_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,p=k2(t);typeof Ms.hooks.addPack=="function"&&!c?Ms.hooks.addPack(e,k2(t)):Ms.styles[e]=Jt(Jt({},Ms.styles[e]||{}),p),e==="fas"&&t_("fa",t)}var Qp,em,tm,sh=Ms.styles,hz=Ms.shims,dz=(Qp={},si(Qp,mr,Object.values(kf[mr])),si(Qp,jr,Object.values(kf[jr])),Qp),W1=null,OC={},FC={},jC={},DC={},BC={},fz=(em={},si(em,mr,Object.keys(Af[mr])),si(em,jr,Object.keys(Af[jr])),em);function pz(e){return~X4.indexOf(e)}function mz(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!pz(c)?c:null}var NC=function(){var t=function(p){return I0(sh,function(f,u,b){return f[b]=I0(u,p,{}),f},{})};OC=t(function(c,p,f){if(p[3]&&(c[p[3]]=f),p[2]){var u=p[2].filter(function(b){return typeof b=="number"});u.forEach(function(b){c[b.toString(16)]=f})}return c}),FC=t(function(c,p,f){if(c[f]=f,p[2]){var u=p[2].filter(function(b){return typeof b=="string"});u.forEach(function(b){c[b]=f})}return c}),BC=t(function(c,p,f){var u=p[2];return c[f]=f,u.forEach(function(b){c[b]=f}),c});var i="far"in sh||an.autoFetchSvg,a=I0(hz,function(c,p){var f=p[0],u=p[1],b=p[2];return u==="far"&&!i&&(u="fas"),typeof f=="string"&&(c.names[f]={prefix:u,iconName:b}),typeof f=="number"&&(c.unicodes[f.toString(16)]={prefix:u,iconName:b}),c},{names:{},unicodes:{}});jC=a.names,DC=a.unicodes,W1=Qg(an.styleDefault,{family:an.familyDefault})};J4(function(e){W1=Qg(e.styleDefault,{family:an.familyDefault})});NC();function Z1(e,t){return(OC[e]||{})[t]}function gz(e,t){return(FC[e]||{})[t]}function $u(e,t){return(BC[e]||{})[t]}function UC(e){return jC[e]||{prefix:null,iconName:null}}function yz(e){var t=DC[e],i=Z1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function su(){return W1}var X1=function(){return{prefix:null,iconName:null,rest:[]}};function Qg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?mr:i,c=Af[a][e],p=Pf[a][e]||Pf[a][c],f=e in Ms.styles?e:null;return p||f||null}var M2=(tm={},si(tm,mr,Object.keys(kf[mr])),si(tm,jr,Object.keys(kf[jr])),tm);function ey(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,p=(t={},si(t,mr,"".concat(an.cssPrefix,"-").concat(mr)),si(t,jr,"".concat(an.cssPrefix,"-").concat(jr)),t),f=null,u=mr;(e.includes(p[mr])||e.some(function(C){return M2[mr].includes(C)}))&&(u=mr),(e.includes(p[jr])||e.some(function(C){return M2[jr].includes(C)}))&&(u=jr);var b=e.reduce(function(C,I){var w=mz(an.cssPrefix,I);if(sh[I]?(I=dz[u].includes(I)?$4[u][I]:I,f=I,C.prefix=I):fz[u].indexOf(I)>-1?(f=I,C.prefix=Qg(I,{family:u})):w?C.iconName=w:I!==an.replacementClass&&I!==p[mr]&&I!==p[jr]&&C.rest.push(I),!c&&C.prefix&&C.iconName){var T=f==="fa"?UC(C.iconName):{},O=$u(C.prefix,C.iconName);T.prefix&&(f=null),C.iconName=T.iconName||O||C.iconName,C.prefix=T.prefix||C.prefix,C.prefix==="far"&&!sh.far&&sh.fas&&!an.autoFetchSvg&&(C.prefix="fas")}return C},X1());return(e.includes("fa-brands")||e.includes("fab"))&&(b.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(b.prefix="fad"),!b.prefix&&u===jr&&(sh.fass||an.autoFetchSvg)&&(b.prefix="fass",b.iconName=$u(b.prefix,b.iconName)||b.iconName),(b.prefix==="fa"||f==="fa")&&(b.prefix=su()||"fas"),b}var vz=function(){function e(){k4(this,e),this.definitions={}}return M4(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),p=0;p<a;p++)c[p]=arguments[p];var f=c.reduce(this._pullDefinitions,{});Object.keys(f).forEach(function(u){i.definitions[u]=Jt(Jt({},i.definitions[u]||{}),f[u]),t_(u,f[u]);var b=kf[mr][u];b&&t_(b,f[u]),NC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(p){var f=c[p],u=f.prefix,b=f.iconName,C=f.icon,I=C[2];i[u]||(i[u]={}),I.length>0&&I.forEach(function(w){typeof w=="string"&&(i[u][w]=C)}),i[u][b]=C}),i}}]),e}(),z2=[],ah={},yh={},_z=Object.keys(yh);function xz(e,t){var i=t.mixoutsTo;return z2=e,ah={},Object.keys(yh).forEach(function(a){_z.indexOf(a)===-1&&delete yh[a]}),z2.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(f){typeof c[f]=="function"&&(i[f]=c[f]),og(c[f])==="object"&&Object.keys(c[f]).forEach(function(u){i[f]||(i[f]={}),i[f][u]=c[f][u]})}),a.hooks){var p=a.hooks();Object.keys(p).forEach(function(f){ah[f]||(ah[f]=[]),ah[f].push(p[f])})}a.provides&&a.provides(yh)}),i}function n_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var p=ah[e]||[];return p.forEach(function(f){t=f.apply(null,[t].concat(a))}),t}function Yu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=ah[e]||[];c.forEach(function(p){p.apply(null,i)})}function Ya(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return yh[e]?yh[e].apply(null,t):void 0}function r_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||su();if(t)return t=$u(i,t)||t,P2($C.definitions,i,t)||P2(Ms.styles,i,t)}var $C=new vz,wz=function(){an.autoReplaceSvg=!1,an.observeMutations=!1,Yu("noAuto")},bz={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return el?(Yu("beforeI2svg",t),Ya("pseudoElements2svg",t),Ya("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;an.autoReplaceSvg===!1&&(an.autoReplaceSvg=!0),an.observeMutations=!0,az(function(){Ez({autoReplaceSvgRoot:i}),Yu("watch",t)})}},Sz={icon:function(t){if(t===null)return null;if(og(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:$u(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=Qg(t[0]);return{prefix:a,iconName:$u(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(an.cssPrefix,"-"))>-1||t.match(V4))){var c=ey(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||su(),iconName:$u(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var p=su();return{prefix:p,iconName:$u(p,t)||t}}}},Zo={noAuto:wz,config:an,dom:bz,parse:Sz,library:$C,findIconDefinition:r_,toHtml:Wf},Ez=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?yr:i;(Object.keys(Ms.styles).length>0||an.autoFetchSvg)&&el&&an.autoReplaceSvg&&Zo.dom.i2svg({node:a})};function ty(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return Wf(a)})}}),Object.defineProperty(e,"node",{get:function(){if(el){var a=yr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function Tz(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,p=e.styles,f=e.transform;if(H1(f)&&i.found&&!a.found){var u=i.width,b=i.height,C={x:u/b/2,y:.5};c.style=Jg(Jt(Jt({},p),{},{"transform-origin":"".concat(C.x+f.x/16,"em ").concat(C.y+f.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function Cz(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,p=e.symbol,f=p===!0?"".concat(t,"-").concat(an.cssPrefix,"-").concat(i):p;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Jt(Jt({},c),{},{id:f}),children:a}]}]}function q1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,p=e.iconName,f=e.transform,u=e.symbol,b=e.title,C=e.maskId,I=e.titleId,w=e.extra,T=e.watchable,O=T===void 0?!1:T,U=a.found?a:i,F=U.width,ue=U.height,K=c==="fak",W=[an.replacementClass,p?"".concat(an.cssPrefix,"-").concat(p):""].filter(function(B){return w.classes.indexOf(B)===-1}).filter(function(B){return B!==""||!!B}).concat(w.classes).join(" "),$={children:[],attributes:Jt(Jt({},w.attributes),{},{"data-prefix":c,"data-icon":p,class:W,role:w.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(F," ").concat(ue)})},ie=K&&!~w.classes.indexOf("fa-fw")?{width:"".concat(F/ue*16*.0625,"em")}:{};O&&($.attributes[Ku]=""),b&&($.children.push({tag:"title",attributes:{id:$.attributes["aria-labelledby"]||"title-".concat(I||zf())},children:[b]}),delete $.attributes.title);var X=Jt(Jt({},$),{},{prefix:c,iconName:p,main:i,mask:a,maskId:C,transform:f,symbol:u,styles:Jt(Jt({},ie),w.styles)}),V=a.found&&i.found?Ya("generateAbstractMask",X)||{children:[],attributes:{}}:Ya("generateAbstractIcon",X)||{children:[],attributes:{}},E=V.children,j=V.attributes;return X.children=E,X.attributes=j,u?Cz(X):Tz(X)}function R2(e){var t=e.content,i=e.width,a=e.height,c=e.transform,p=e.title,f=e.extra,u=e.watchable,b=u===void 0?!1:u,C=Jt(Jt(Jt({},f.attributes),p?{title:p}:{}),{},{class:f.classes.join(" ")});b&&(C[Ku]="");var I=Jt({},f.styles);H1(c)&&(I.transform=rz({transform:c,startCentered:!0,width:i,height:a}),I["-webkit-transform"]=I.transform);var w=Jg(I);w.length>0&&(C.style=w);var T=[];return T.push({tag:"span",attributes:C,children:[t]}),p&&T.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),T}function Iz(e){var t=e.content,i=e.title,a=e.extra,c=Jt(Jt(Jt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),p=Jg(a.styles);p.length>0&&(c.style=p);var f=[];return f.push({tag:"span",attributes:c,children:[t]}),i&&f.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),f}var A0=Ms.styles;function i_(e){var t=e[0],i=e[1],a=e.slice(4),c=B1(a,1),p=c[0],f=null;return Array.isArray(p)?f={tag:"g",attributes:{class:"".concat(an.cssPrefix,"-").concat(Uu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(an.cssPrefix,"-").concat(Uu.SECONDARY),fill:"currentColor",d:p[0]}},{tag:"path",attributes:{class:"".concat(an.cssPrefix,"-").concat(Uu.PRIMARY),fill:"currentColor",d:p[1]}}]}:f={tag:"path",attributes:{fill:"currentColor",d:p}},{found:!0,width:t,height:i,icon:f}}var Az={found:!1,width:512,height:512};function Pz(e,t){!AC&&!an.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function o_(e,t){var i=t;return t==="fa"&&an.styleDefault!==null&&(t=su()),new Promise(function(a,c){if(Ya("missingIconAbstract"),i==="fa"){var p=UC(e)||{};e=p.iconName||e,t=p.prefix||t}if(e&&t&&A0[t]&&A0[t][e]){var f=A0[t][e];return a(i_(f))}Pz(e,t),a(Jt(Jt({},Az),{},{icon:an.showMissingIcons&&e?Ya("missingIconAbstract")||{}:{}}))})}var L2=function(){},s_=an.measurePerformance&&Zp&&Zp.mark&&Zp.measure?Zp:{mark:L2,measure:L2},Nd='FA "6.5.1"',kz=function(t){return s_.mark("".concat(Nd," ").concat(t," begins")),function(){return VC(t)}},VC=function(t){s_.mark("".concat(Nd," ").concat(t," ends")),s_.measure("".concat(Nd," ").concat(t),"".concat(Nd," ").concat(t," begins"),"".concat(Nd," ").concat(t," ends"))},K1={begin:kz,end:VC},Tm=function(){};function O2(e){var t=e.getAttribute?e.getAttribute(Ku):null;return typeof t=="string"}function Mz(e){var t=e.getAttribute?e.getAttribute(U1):null,i=e.getAttribute?e.getAttribute($1):null;return t&&i}function zz(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(an.replacementClass)}function Rz(){if(an.autoReplaceSvg===!0)return Cm.replace;var e=Cm[an.autoReplaceSvg];return e||Cm.replace}function Lz(e){return yr.createElementNS("http://www.w3.org/2000/svg",e)}function Oz(e){return yr.createElement(e)}function GC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?Lz:Oz:i;if(typeof e=="string")return yr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(f){c.setAttribute(f,e.attributes[f])});var p=e.children||[];return p.forEach(function(f){c.appendChild(GC(f,{ceFn:a}))}),c}function Fz(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Cm={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(GC(c),i)}),i.getAttribute(Ku)===null&&an.keepOriginalSource){var a=yr.createComment(Fz(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~G1(i).indexOf(an.replacementClass))return Cm.replace(t);var c=new RegExp("".concat(an.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var p=a[0].attributes.class.split(" ").reduce(function(u,b){return b===an.replacementClass||b.match(c)?u.toSvg.push(b):u.toNode.push(b),u},{toNode:[],toSvg:[]});a[0].attributes.class=p.toSvg.join(" "),p.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",p.toNode.join(" "))}var f=a.map(function(u){return Wf(u)}).join(`
`);i.setAttribute(Ku,""),i.innerHTML=f}};function F2(e){e()}function HC(e,t){var i=typeof t=="function"?t:Tm;if(e.length===0)i();else{var a=F2;an.mutateApproach===N4&&(a=ou.requestAnimationFrame||F2),a(function(){var c=Rz(),p=K1.begin("mutate");e.map(c),p(),i()})}}var Y1=!1;function WC(){Y1=!0}function a_(){Y1=!1}var ag=null;function j2(e){if(C2&&an.observeMutations){var t=e.treeCallback,i=t===void 0?Tm:t,a=e.nodeCallback,c=a===void 0?Tm:a,p=e.pseudoElementsCallback,f=p===void 0?Tm:p,u=e.observeMutationsRoot,b=u===void 0?yr:u;ag=new C2(function(C){if(!Y1){var I=su();jh(C).forEach(function(w){if(w.type==="childList"&&w.addedNodes.length>0&&!O2(w.addedNodes[0])&&(an.searchPseudoElements&&f(w.target),i(w.target)),w.type==="attributes"&&w.target.parentNode&&an.searchPseudoElements&&f(w.target.parentNode),w.type==="attributes"&&O2(w.target)&&~Z4.indexOf(w.attributeName))if(w.attributeName==="class"&&Mz(w.target)){var T=ey(G1(w.target)),O=T.prefix,U=T.iconName;w.target.setAttribute(U1,O||I),U&&w.target.setAttribute($1,U)}else zz(w.target)&&c(w.target)})}}),el&&ag.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function jz(){ag&&ag.disconnect()}function Dz(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var p=c.split(":"),f=p[0],u=p.slice(1);return f&&u.length>0&&(a[f]=u.join(":").trim()),a},{})),i}function Bz(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=ey(G1(e));return c.prefix||(c.prefix=su()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=gz(c.prefix,e.innerText)||Z1(c.prefix,e_(e.innerText))),!c.iconName&&an.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function Nz(e){var t=jh(e.attributes).reduce(function(c,p){return c.name!=="class"&&c.name!=="style"&&(c[p.name]=p.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return an.autoA11y&&(i?t["aria-labelledby"]="".concat(an.replacementClass,"-title-").concat(a||zf()):(t["aria-hidden"]="true",t.focusable="false")),t}function Uz(){return{iconName:null,title:null,titleId:null,prefix:null,transform:na,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function D2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=Bz(e),a=i.iconName,c=i.prefix,p=i.rest,f=Nz(e),u=n_("parseNodeAttributes",{},e),b=t.styleParser?Dz(e):[];return Jt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:na,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:p,styles:b,attributes:f}},u)}var $z=Ms.styles;function ZC(e){var t=an.autoReplaceSvg==="nest"?D2(e,{styleParser:!1}):D2(e);return~t.extra.classes.indexOf(PC)?Ya("generateLayersText",e,t):Ya("generateSvgReplacementMutation",e,t)}var au=new Set;V1.map(function(e){au.add("fa-".concat(e))});Object.keys(Af[mr]).map(au.add.bind(au));Object.keys(Af[jr]).map(au.add.bind(au));au=Gf(au);function B2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!el)return Promise.resolve();var i=yr.documentElement.classList,a=function(w){return i.add("".concat(I2,"-").concat(w))},c=function(w){return i.remove("".concat(I2,"-").concat(w))},p=an.autoFetchSvg?au:V1.map(function(I){return"fa-".concat(I)}).concat(Object.keys($z));p.includes("fa")||p.push("fa");var f=[".".concat(PC,":not([").concat(Ku,"])")].concat(p.map(function(I){return".".concat(I,":not([").concat(Ku,"])")})).join(", ");if(f.length===0)return Promise.resolve();var u=[];try{u=jh(e.querySelectorAll(f))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();var b=K1.begin("onTree"),C=u.reduce(function(I,w){try{var T=ZC(w);T&&I.push(T)}catch(O){AC||O.name==="MissingIcon"&&console.error(O)}return I},[]);return new Promise(function(I,w){Promise.all(C).then(function(T){HC(T,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),I()})}).catch(function(T){b(),w(T)})})}function Vz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ZC(e).then(function(i){i&&HC([i],t)})}function Gz(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:r_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:r_(c||{})),e(a,Jt(Jt({},i),{},{mask:c}))}}var Hz=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?na:a,p=i.symbol,f=p===void 0?!1:p,u=i.mask,b=u===void 0?null:u,C=i.maskId,I=C===void 0?null:C,w=i.title,T=w===void 0?null:w,O=i.titleId,U=O===void 0?null:O,F=i.classes,ue=F===void 0?[]:F,K=i.attributes,W=K===void 0?{}:K,$=i.styles,ie=$===void 0?{}:$;if(t){var X=t.prefix,V=t.iconName,E=t.icon;return ty(Jt({type:"icon"},t),function(){return Yu("beforeDOMElementCreation",{iconDefinition:t,params:i}),an.autoA11y&&(T?W["aria-labelledby"]="".concat(an.replacementClass,"-title-").concat(U||zf()):(W["aria-hidden"]="true",W.focusable="false")),q1({icons:{main:i_(E),mask:b?i_(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:V,transform:Jt(Jt({},na),c),symbol:f,title:T,maskId:I,titleId:U,extra:{attributes:W,styles:ie,classes:ue}})})}},Wz={mixout:function(){return{icon:Gz(Hz)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=B2,i.nodeCallback=Vz,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?yr:a,p=i.callback,f=p===void 0?function(){}:p;return B2(c,f)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,p=a.title,f=a.titleId,u=a.prefix,b=a.transform,C=a.symbol,I=a.mask,w=a.maskId,T=a.extra;return new Promise(function(O,U){Promise.all([o_(c,u),I.iconName?o_(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(F){var ue=B1(F,2),K=ue[0],W=ue[1];O([i,q1({icons:{main:K,mask:W},prefix:u,iconName:c,transform:b,symbol:C,maskId:w,title:p,titleId:f,extra:T,watchable:!0})])}).catch(U)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,p=i.main,f=i.transform,u=i.styles,b=Jg(u);b.length>0&&(c.style=b);var C;return H1(f)&&(C=Ya("generateAbstractTransformGrouping",{main:p,transform:f,containerWidth:p.width,iconWidth:p.width})),a.push(C||p.icon),{children:a,attributes:c}}}},Zz={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,p=c===void 0?[]:c;return ty({type:"layer"},function(){Yu("beforeDOMElementCreation",{assembler:i,params:a});var f=[];return i(function(u){Array.isArray(u)?u.map(function(b){f=f.concat(b.abstract)}):f=f.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(an.cssPrefix,"-layers")].concat(Gf(p)).join(" ")},children:f}]})}}}},Xz={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,p=c===void 0?null:c,f=a.classes,u=f===void 0?[]:f,b=a.attributes,C=b===void 0?{}:b,I=a.styles,w=I===void 0?{}:I;return ty({type:"counter",content:i},function(){return Yu("beforeDOMElementCreation",{content:i,params:a}),Iz({content:i.toString(),title:p,extra:{attributes:C,styles:w,classes:["".concat(an.cssPrefix,"-layers-counter")].concat(Gf(u))}})})}}}},qz={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,p=c===void 0?na:c,f=a.title,u=f===void 0?null:f,b=a.classes,C=b===void 0?[]:b,I=a.attributes,w=I===void 0?{}:I,T=a.styles,O=T===void 0?{}:T;return ty({type:"text",content:i},function(){return Yu("beforeDOMElementCreation",{content:i,params:a}),R2({content:i,transform:Jt(Jt({},na),p),title:u,extra:{attributes:w,styles:O,classes:["".concat(an.cssPrefix,"-layers-text")].concat(Gf(C))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,p=a.transform,f=a.extra,u=null,b=null;if(TC){var C=parseInt(getComputedStyle(i).fontSize,10),I=i.getBoundingClientRect();u=I.width/C,b=I.height/C}return an.autoA11y&&!c&&(f.attributes["aria-hidden"]="true"),Promise.resolve([i,R2({content:i.innerHTML,width:u,height:b,transform:p,title:c,extra:f,watchable:!0})])}}},Kz=new RegExp('"',"ug"),N2=[1105920,1112319];function Yz(e){var t=e.replace(Kz,""),i=cz(t,0),a=i>=N2[0]&&i<=N2[1],c=t.length===2?t[0]===t[1]:!1;return{value:e_(c?t[0]:t),isSecondary:a||c}}function U2(e,t){var i="".concat(B4).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var p=jh(e.children),f=p.filter(function(E){return E.getAttribute(Qv)===t})[0],u=ou.getComputedStyle(e,t),b=u.getPropertyValue("font-family").match(G4),C=u.getPropertyValue("font-weight"),I=u.getPropertyValue("content");if(f&&!b)return e.removeChild(f),a();if(b&&I!=="none"&&I!==""){var w=u.getPropertyValue("content"),T=~["Sharp"].indexOf(b[2])?jr:mr,O=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Pf[T][b[2].toLowerCase()]:H4[T][C],U=Yz(w),F=U.value,ue=U.isSecondary,K=b[0].startsWith("FontAwesome"),W=Z1(O,F),$=W;if(K){var ie=yz(F);ie.iconName&&ie.prefix&&(W=ie.iconName,O=ie.prefix)}if(W&&!ue&&(!f||f.getAttribute(U1)!==O||f.getAttribute($1)!==$)){e.setAttribute(i,$),f&&e.removeChild(f);var X=Uz(),V=X.extra;V.attributes[Qv]=t,o_(W,O).then(function(E){var j=q1(Jt(Jt({},X),{},{icons:{main:E,mask:X1()},prefix:O,iconName:$,extra:V,watchable:!0})),B=yr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(B,e.firstChild):e.appendChild(B),B.outerHTML=j.map(function(ee){return Wf(ee)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function Jz(e){return Promise.all([U2(e,"::before"),U2(e,"::after")])}function Qz(e){return e.parentNode!==document.head&&!~U4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Qv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function $2(e){if(el)return new Promise(function(t,i){var a=jh(e.querySelectorAll("*")).filter(Qz).map(Jz),c=K1.begin("searchPseudoElements");WC(),Promise.all(a).then(function(){c(),a_(),t()}).catch(function(){c(),a_(),i()})})}var eR={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=$2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?yr:a;an.searchPseudoElements&&$2(c)}}},V2=!1,tR={mixout:function(){return{dom:{unwatch:function(){WC(),V2=!0}}}},hooks:function(){return{bootstrap:function(){j2(n_("mutationObserverCallbacks",{}))},noAuto:function(){jz()},watch:function(i){var a=i.observeMutationsRoot;V2?a_():j2(n_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},G2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var p=c.toLowerCase().split("-"),f=p[0],u=p.slice(1).join("-");if(f&&u==="h")return a.flipX=!0,a;if(f&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(f){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},i)},nR={mixout:function(){return{parse:{transform:function(i){return G2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=G2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,p=i.containerWidth,f=i.iconWidth,u={transform:"translate(".concat(p/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),C="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),I="rotate(".concat(c.rotate," 0 0)"),w={transform:"".concat(b," ").concat(C," ").concat(I)},T={transform:"translate(".concat(f/2*-1," -256)")},O={outer:u,inner:w,path:T};return{tag:"g",attributes:Jt({},O.outer),children:[{tag:"g",attributes:Jt({},O.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Jt(Jt({},a.icon.attributes),O.path)}]}]}}}},P0={x:0,y:0,width:"100%",height:"100%"};function H2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function rR(e){return e.tag==="g"?e.children:[e]}var iR={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),p=c?ey(c.split(" ").map(function(f){return f.trim()})):X1();return p.prefix||(p.prefix=su()),i.mask=p,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,p=i.main,f=i.mask,u=i.maskId,b=i.transform,C=p.width,I=p.icon,w=f.width,T=f.icon,O=nz({transform:b,containerWidth:w,iconWidth:C}),U={tag:"rect",attributes:Jt(Jt({},P0),{},{fill:"white"})},F=I.children?{children:I.children.map(H2)}:{},ue={tag:"g",attributes:Jt({},O.inner),children:[H2(Jt({tag:I.tag,attributes:Jt(Jt({},I.attributes),O.path)},F))]},K={tag:"g",attributes:Jt({},O.outer),children:[ue]},W="mask-".concat(u||zf()),$="clip-".concat(u||zf()),ie={tag:"mask",attributes:Jt(Jt({},P0),{},{id:W,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[U,K]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:$},children:rR(T)},ie]};return a.push(X,{tag:"rect",attributes:Jt({fill:"currentColor","clip-path":"url(#".concat($,")"),mask:"url(#".concat(W,")")},P0)}),{children:a,attributes:c}}}},oR={provides:function(t){var i=!1;ou.matchMedia&&(i=ou.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},p={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Jt(Jt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var f=Jt(Jt({},p),{},{attributeName:"opacity"}),u={tag:"circle",attributes:Jt(Jt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||u.children.push({tag:"animate",attributes:Jt(Jt({},p),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Jt(Jt({},f),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:Jt(Jt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Jt(Jt({},f),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Jt(Jt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Jt(Jt({},f),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},sR={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),p=c===null?!1:c===""?!0:c;return i.symbol=p,i}}}},aR=[oz,Wz,Zz,Xz,qz,eR,tR,nR,iR,oR,sR];xz(aR,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;var l_=Zo.parse;Zo.findIconDefinition;Zo.toHtml;var lR=Zo.icon;Zo.layer;Zo.text;Zo.counter;var XC={exports:{}},uR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cR=uR,hR=cR;function qC(){}function KC(){}KC.resetWarningCache=qC;var dR=function(){function e(a,c,p,f,u,b){if(b!==hR){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:KC,resetWarningCache:qC};return i.PropTypes=i,i};XC.exports=dR();var fR=XC.exports;const On=jf(fR);function W2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Xl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(i),!0).forEach(function(a){lh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):W2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function lg(e){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lg(e)}function lh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pR(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,p;for(p=0;p<a.length;p++)c=a[p],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function mR(e,t){if(e==null)return{};var i=pR(e,t),a,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(c=0;c<p.length;c++)a=p[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function u_(e){return gR(e)||yR(e)||vR(e)||_R()}function gR(e){if(Array.isArray(e))return c_(e)}function yR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vR(e,t){if(e){if(typeof e=="string")return c_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c_(e,t)}}function c_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function _R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xR(e){var t,i=e.beat,a=e.fade,c=e.beatFade,p=e.bounce,f=e.shake,u=e.flash,b=e.spin,C=e.spinPulse,I=e.spinReverse,w=e.pulse,T=e.fixedWidth,O=e.inverse,U=e.border,F=e.listItem,ue=e.flip,K=e.size,W=e.rotation,$=e.pull,ie=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":p,"fa-shake":f,"fa-flash":u,"fa-spin":b,"fa-spin-reverse":I,"fa-spin-pulse":C,"fa-pulse":w,"fa-fw":T,"fa-inverse":O,"fa-border":U,"fa-li":F,"fa-flip":ue===!0,"fa-flip-horizontal":ue==="horizontal"||ue==="both","fa-flip-vertical":ue==="vertical"||ue==="both"},lh(t,"fa-".concat(K),typeof K<"u"&&K!==null),lh(t,"fa-rotate-".concat(W),typeof W<"u"&&W!==null&&W!==0),lh(t,"fa-pull-".concat($),typeof $<"u"&&$!==null),lh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ie).map(function(X){return ie[X]?X:null}).filter(function(X){return X})}function wR(e){return e=e-0,e===e}function YC(e){return wR(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var bR=["style"];function SR(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ER(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=YC(i.slice(0,a)),p=i.slice(a+1).trim();return c.startsWith("webkit")?t[SR(c)]=p:t[c]=p,t},{})}function JC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return JC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,C){var I=t.attributes[C];switch(C){case"class":b.attrs.className=I,delete t.attributes.class;break;case"style":b.attrs.style=ER(I);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?b.attrs[C.toLowerCase()]=I:b.attrs[YC(C)]=I}return b},{attrs:{}}),p=i.style,f=p===void 0?{}:p,u=mR(i,bR);return c.attrs.style=Xl(Xl({},c.attrs.style),f),e.apply(void 0,[t.tag,Xl(Xl({},c.attrs),u)].concat(u_(a)))}var QC=!1;try{QC=!0}catch{}function TR(){if(!QC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Z2(e){if(e&&lg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(l_.icon)return l_.icon(e);if(e===null)return null;if(e&&lg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function k0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?lh({},e,t):{}}var oa=Z_.forwardRef(function(e,t){var i=e.icon,a=e.mask,c=e.symbol,p=e.className,f=e.title,u=e.titleId,b=e.maskId,C=Z2(i),I=k0("classes",[].concat(u_(xR(e)),u_(p.split(" ")))),w=k0("transform",typeof e.transform=="string"?l_.transform(e.transform):e.transform),T=k0("mask",Z2(a)),O=lR(C,Xl(Xl(Xl(Xl({},I),w),T),{},{symbol:c,title:f,titleId:u,maskId:b}));if(!O)return TR("Could not find icon",C),null;var U=O.abstract,F={ref:t};return Object.keys(e).forEach(function(ue){oa.defaultProps.hasOwnProperty(ue)||(F[ue]=e[ue])}),CR(U[0],F)});oa.displayName="FontAwesomeIcon";oa.propTypes={beat:On.bool,border:On.bool,beatFade:On.bool,bounce:On.bool,className:On.string,fade:On.bool,flash:On.bool,mask:On.oneOfType([On.object,On.array,On.string]),maskId:On.string,fixedWidth:On.bool,inverse:On.bool,flip:On.oneOf([!0,!1,"horizontal","vertical","both"]),icon:On.oneOfType([On.object,On.array,On.string]),listItem:On.bool,pull:On.oneOf(["right","left"]),pulse:On.bool,rotation:On.oneOf([0,90,180,270]),shake:On.bool,size:On.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:On.bool,spinPulse:On.bool,spinReverse:On.bool,symbol:On.oneOfType([On.bool,On.string]),title:On.string,titleId:On.string,transform:On.oneOfType([On.string,On.object]),swapOpacity:On.bool};oa.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var CR=JC.bind(null,Z_.createElement),IR={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},h_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},AR={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},PR=AR;function nm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eI={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,p){function f(C,I){if(!c[C]){if(!a[C]){var w=typeof nm=="function"&&nm;if(!I&&w)return w(C,!0);if(u)return u(C,!0);var T=new Error("Cannot find module '"+C+"'");throw T.code="MODULE_NOT_FOUND",T}var O=c[C]={exports:{}};a[C][0].call(O.exports,function(U){var F=a[C][1][U];return f(F||U)},O,O.exports,i,a,c,p)}return c[C].exports}for(var u=typeof nm=="function"&&nm,b=0;b<p.length;b++)f(p[b]);return f}return i}()({1:[function(i,a,c){c.byteLength=T,c.toByteArray=U,c.fromByteArray=K;for(var p=[],f=[],u=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,I=b.length;C<I;++C)p[C]=b[C],f[b.charCodeAt(C)]=C;f[45]=62,f[95]=63;function w(W){var $=W.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ie=W.indexOf("=");ie===-1&&(ie=$);var X=ie===$?0:4-ie%4;return[ie,X]}function T(W){var $=w(W),ie=$[0],X=$[1];return(ie+X)*3/4-X}function O(W,$,ie){return($+ie)*3/4-ie}function U(W){var $,ie=w(W),X=ie[0],V=ie[1],E=new u(O(W,X,V)),j=0,B=V>0?X-4:X,ee;for(ee=0;ee<B;ee+=4)$=f[W.charCodeAt(ee)]<<18|f[W.charCodeAt(ee+1)]<<12|f[W.charCodeAt(ee+2)]<<6|f[W.charCodeAt(ee+3)],E[j++]=$>>16&255,E[j++]=$>>8&255,E[j++]=$&255;return V===2&&($=f[W.charCodeAt(ee)]<<2|f[W.charCodeAt(ee+1)]>>4,E[j++]=$&255),V===1&&($=f[W.charCodeAt(ee)]<<10|f[W.charCodeAt(ee+1)]<<4|f[W.charCodeAt(ee+2)]>>2,E[j++]=$>>8&255,E[j++]=$&255),E}function F(W){return p[W>>18&63]+p[W>>12&63]+p[W>>6&63]+p[W&63]}function ue(W,$,ie){for(var X,V=[],E=$;E<ie;E+=3)X=(W[E]<<16&16711680)+(W[E+1]<<8&65280)+(W[E+2]&255),V.push(F(X));return V.join("")}function K(W){for(var $,ie=W.length,X=ie%3,V=[],E=16383,j=0,B=ie-X;j<B;j+=E)V.push(ue(W,j,j+E>B?B:j+E));return X===1?($=W[ie-1],V.push(p[$>>2]+p[$<<4&63]+"==")):X===2&&($=(W[ie-2]<<8)+W[ie-1],V.push(p[$>>10]+p[$>>4&63]+p[$<<2&63]+"=")),V.join("")}},{}],2:[function(i,a,c){(function(p){(function(){var f=i("base64-js"),u=i("ieee754");c.Buffer=w,c.SlowBuffer=X,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,w.TYPED_ARRAY_SUPPORT=C(),!w.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{var we=new Uint8Array(1);return we.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},we.foo()===42}catch{return!1}}Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}}),Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}});function I(we){if(we>b)throw new RangeError('The value "'+we+'" is invalid for option "size"');var N=new Uint8Array(we);return N.__proto__=w.prototype,N}function w(we,N,D){if(typeof we=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return F(we)}return T(we,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&w[Symbol.species]===w&&Object.defineProperty(w,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),w.poolSize=8192;function T(we,N,D){if(typeof we=="string")return ue(we,N);if(ArrayBuffer.isView(we))return K(we);if(we==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we);if(hn(we,ArrayBuffer)||we&&hn(we.buffer,ArrayBuffer))return W(we,N,D);if(typeof we=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=we.valueOf&&we.valueOf();if(xe!=null&&xe!==we)return w.from(xe,N,D);var Ze=$(we);if(Ze)return Ze;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof we[Symbol.toPrimitive]=="function")return w.from(we[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof we)}w.from=function(we,N,D){return T(we,N,D)},w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array;function O(we){if(typeof we!="number")throw new TypeError('"size" argument must be of type number');if(we<0)throw new RangeError('The value "'+we+'" is invalid for option "size"')}function U(we,N,D){return O(we),we<=0?I(we):N!==void 0?typeof D=="string"?I(we).fill(N,D):I(we).fill(N):I(we)}w.alloc=function(we,N,D){return U(we,N,D)};function F(we){return O(we),I(we<0?0:ie(we)|0)}w.allocUnsafe=function(we){return F(we)},w.allocUnsafeSlow=function(we){return F(we)};function ue(we,N){if((typeof N!="string"||N==="")&&(N="utf8"),!w.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=V(we,N)|0,xe=I(D),Ze=xe.write(we,N);return Ze!==D&&(xe=xe.slice(0,Ze)),xe}function K(we){for(var N=we.length<0?0:ie(we.length)|0,D=I(N),xe=0;xe<N;xe+=1)D[xe]=we[xe]&255;return D}function W(we,N,D){if(N<0||we.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(we.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return N===void 0&&D===void 0?xe=new Uint8Array(we):D===void 0?xe=new Uint8Array(we,N):xe=new Uint8Array(we,N,D),xe.__proto__=w.prototype,xe}function $(we){if(w.isBuffer(we)){var N=ie(we.length)|0,D=I(N);return D.length===0||we.copy(D,0,0,N),D}if(we.length!==void 0)return typeof we.length!="number"||xn(we.length)?I(0):K(we);if(we.type==="Buffer"&&Array.isArray(we.data))return K(we.data)}function ie(we){if(we>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return we|0}function X(we){return+we!=we&&(we=0),w.alloc(+we)}w.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==w.prototype},w.compare=function(N,D){if(hn(N,Uint8Array)&&(N=w.from(N,N.offset,N.byteLength)),hn(D,Uint8Array)&&(D=w.from(D,D.offset,D.byteLength)),!w.isBuffer(N)||!w.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var xe=N.length,Ze=D.length,Qe=0,ct=Math.min(xe,Ze);Qe<ct;++Qe)if(N[Qe]!==D[Qe]){xe=N[Qe],Ze=D[Qe];break}return xe<Ze?-1:Ze<xe?1:0},w.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},w.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return w.alloc(0);var xe;if(D===void 0)for(D=0,xe=0;xe<N.length;++xe)D+=N[xe].length;var Ze=w.allocUnsafe(D),Qe=0;for(xe=0;xe<N.length;++xe){var ct=N[xe];if(hn(ct,Uint8Array)&&(ct=w.from(ct)),!w.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(Ze,Qe),Qe+=ct.length}return Ze};function V(we,N){if(w.isBuffer(we))return we.length;if(ArrayBuffer.isView(we)||hn(we,ArrayBuffer))return we.byteLength;if(typeof we!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof we);var D=we.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&D===0)return 0;for(var Ze=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return $t(we).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return bn(we).length;default:if(Ze)return xe?-1:$t(we).length;N=(""+N).toLowerCase(),Ze=!0}}w.byteLength=V;function E(we,N,D){var xe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(we||(we="utf8");;)switch(we){case"hex":return ke(this,N,D);case"utf8":case"utf-8":return te(this,N,D);case"ascii":return Ee(this,N,D);case"latin1":case"binary":return Be(this,N,D);case"base64":return Q(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,N,D);default:if(xe)throw new TypeError("Unknown encoding: "+we);we=(we+"").toLowerCase(),xe=!0}}w.prototype._isBuffer=!0;function j(we,N,D){var xe=we[N];we[N]=we[D],we[D]=xe}w.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)j(this,D,D+1);return this},w.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)j(this,D,D+3),j(this,D+1,D+2);return this},w.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)j(this,D,D+7),j(this,D+1,D+6),j(this,D+2,D+5),j(this,D+3,D+4);return this},w.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?te(this,0,N):E.apply(this,arguments)},w.prototype.toLocaleString=w.prototype.toString,w.prototype.equals=function(N){if(!w.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:w.compare(this,N)===0},w.prototype.inspect=function(){var N="",D=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},w.prototype.compare=function(N,D,xe,Ze,Qe){if(hn(N,Uint8Array)&&(N=w.from(N,N.offset,N.byteLength)),!w.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),xe===void 0&&(xe=N?N.length:0),Ze===void 0&&(Ze=0),Qe===void 0&&(Qe=this.length),D<0||xe>N.length||Ze<0||Qe>this.length)throw new RangeError("out of range index");if(Ze>=Qe&&D>=xe)return 0;if(Ze>=Qe)return-1;if(D>=xe)return 1;if(D>>>=0,xe>>>=0,Ze>>>=0,Qe>>>=0,this===N)return 0;for(var ct=Qe-Ze,ae=xe-D,R=Math.min(ct,ae),z=this.slice(Ze,Qe),Se=N.slice(D,xe),Ve=0;Ve<R;++Ve)if(z[Ve]!==Se[Ve]){ct=z[Ve],ae=Se[Ve];break}return ct<ae?-1:ae<ct?1:0};function B(we,N,D,xe,Ze){if(we.length===0)return-1;if(typeof D=="string"?(xe=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,xn(D)&&(D=Ze?0:we.length-1),D<0&&(D=we.length+D),D>=we.length){if(Ze)return-1;D=we.length-1}else if(D<0)if(Ze)D=0;else return-1;if(typeof N=="string"&&(N=w.from(N,xe)),w.isBuffer(N))return N.length===0?-1:ee(we,N,D,xe,Ze);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Ze?Uint8Array.prototype.indexOf.call(we,N,D):Uint8Array.prototype.lastIndexOf.call(we,N,D):ee(we,[N],D,xe,Ze);throw new TypeError("val must be string, number or Buffer")}function ee(we,N,D,xe,Ze){var Qe=1,ct=we.length,ae=N.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(we.length<2||N.length<2)return-1;Qe=2,ct/=2,ae/=2,D/=2}function R(ot,lt){return Qe===1?ot[lt]:ot.readUInt16BE(lt*Qe)}var z;if(Ze){var Se=-1;for(z=D;z<ct;z++)if(R(we,z)===R(N,Se===-1?0:z-Se)){if(Se===-1&&(Se=z),z-Se+1===ae)return Se*Qe}else Se!==-1&&(z-=z-Se),Se=-1}else for(D+ae>ct&&(D=ct-ae),z=D;z>=0;z--){for(var Ve=!0,nt=0;nt<ae;nt++)if(R(we,z+nt)!==R(N,nt)){Ve=!1;break}if(Ve)return z}return-1}w.prototype.includes=function(N,D,xe){return this.indexOf(N,D,xe)!==-1},w.prototype.indexOf=function(N,D,xe){return B(this,N,D,xe,!0)},w.prototype.lastIndexOf=function(N,D,xe){return B(this,N,D,xe,!1)};function q(we,N,D,xe){D=Number(D)||0;var Ze=we.length-D;xe?(xe=Number(xe),xe>Ze&&(xe=Ze)):xe=Ze;var Qe=N.length;xe>Qe/2&&(xe=Qe/2);for(var ct=0;ct<xe;++ct){var ae=parseInt(N.substr(ct*2,2),16);if(xn(ae))return ct;we[D+ct]=ae}return ct}function me(we,N,D,xe){return et($t(N,we.length-D),we,D,xe)}function _e(we,N,D,xe){return et(Ht(N),we,D,xe)}function de(we,N,D,xe){return _e(we,N,D,xe)}function oe(we,N,D,xe){return et(bn(N),we,D,xe)}function le(we,N,D,xe){return et(qt(N,we.length-D),we,D,xe)}w.prototype.write=function(N,D,xe,Ze){if(D===void 0)Ze="utf8",xe=this.length,D=0;else if(xe===void 0&&typeof D=="string")Ze=D,xe=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(xe)?(xe=xe>>>0,Ze===void 0&&(Ze="utf8")):(Ze=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Qe=this.length-D;if((xe===void 0||xe>Qe)&&(xe=Qe),N.length>0&&(xe<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ze||(Ze="utf8");for(var ct=!1;;)switch(Ze){case"hex":return q(this,N,D,xe);case"utf8":case"utf-8":return me(this,N,D,xe);case"ascii":return _e(this,N,D,xe);case"latin1":case"binary":return de(this,N,D,xe);case"base64":return oe(this,N,D,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,N,D,xe);default:if(ct)throw new TypeError("Unknown encoding: "+Ze);Ze=(""+Ze).toLowerCase(),ct=!0}},w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(we,N,D){return N===0&&D===we.length?f.fromByteArray(we):f.fromByteArray(we.slice(N,D))}function te(we,N,D){D=Math.min(we.length,D);for(var xe=[],Ze=N;Ze<D;){var Qe=we[Ze],ct=null,ae=Qe>239?4:Qe>223?3:Qe>191?2:1;if(Ze+ae<=D){var R,z,Se,Ve;switch(ae){case 1:Qe<128&&(ct=Qe);break;case 2:R=we[Ze+1],(R&192)===128&&(Ve=(Qe&31)<<6|R&63,Ve>127&&(ct=Ve));break;case 3:R=we[Ze+1],z=we[Ze+2],(R&192)===128&&(z&192)===128&&(Ve=(Qe&15)<<12|(R&63)<<6|z&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ct=Ve));break;case 4:R=we[Ze+1],z=we[Ze+2],Se=we[Ze+3],(R&192)===128&&(z&192)===128&&(Se&192)===128&&(Ve=(Qe&15)<<18|(R&63)<<12|(z&63)<<6|Se&63,Ve>65535&&Ve<1114112&&(ct=Ve))}}ct===null?(ct=65533,ae=1):ct>65535&&(ct-=65536,xe.push(ct>>>10&1023|55296),ct=56320|ct&1023),xe.push(ct),Ze+=ae}return be(xe)}var he=4096;function be(we){var N=we.length;if(N<=he)return String.fromCharCode.apply(String,we);for(var D="",xe=0;xe<N;)D+=String.fromCharCode.apply(String,we.slice(xe,xe+=he));return D}function Ee(we,N,D){var xe="";D=Math.min(we.length,D);for(var Ze=N;Ze<D;++Ze)xe+=String.fromCharCode(we[Ze]&127);return xe}function Be(we,N,D){var xe="";D=Math.min(we.length,D);for(var Ze=N;Ze<D;++Ze)xe+=String.fromCharCode(we[Ze]);return xe}function ke(we,N,D){var xe=we.length;(!N||N<0)&&(N=0),(!D||D<0||D>xe)&&(D=xe);for(var Ze="",Qe=N;Qe<D;++Qe)Ze+=Et(we[Qe]);return Ze}function ze(we,N,D){for(var xe=we.slice(N,D),Ze="",Qe=0;Qe<xe.length;Qe+=2)Ze+=String.fromCharCode(xe[Qe]+xe[Qe+1]*256);return Ze}w.prototype.slice=function(N,D){var xe=this.length;N=~~N,D=D===void 0?xe:~~D,N<0?(N+=xe,N<0&&(N=0)):N>xe&&(N=xe),D<0?(D+=xe,D<0&&(D=0)):D>xe&&(D=xe),D<N&&(D=N);var Ze=this.subarray(N,D);return Ze.__proto__=w.prototype,Ze};function We(we,N,D){if(we%1!==0||we<0)throw new RangeError("offset is not uint");if(we+N>D)throw new RangeError("Trying to access beyond buffer length")}w.prototype.readUIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=this[N],Qe=1,ct=0;++ct<D&&(Qe*=256);)Ze+=this[N+ct]*Qe;return Ze},w.prototype.readUIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=this[N+--D],Qe=1;D>0&&(Qe*=256);)Ze+=this[N+--D]*Qe;return Ze},w.prototype.readUInt8=function(N,D){return N=N>>>0,D||We(N,1,this.length),this[N]},w.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||We(N,2,this.length),this[N]|this[N+1]<<8},w.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||We(N,2,this.length),this[N]<<8|this[N+1]},w.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||We(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},w.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||We(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},w.prototype.readIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=this[N],Qe=1,ct=0;++ct<D&&(Qe*=256);)Ze+=this[N+ct]*Qe;return Qe*=128,Ze>=Qe&&(Ze-=Math.pow(2,8*D)),Ze},w.prototype.readIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||We(N,D,this.length);for(var Ze=D,Qe=1,ct=this[N+--Ze];Ze>0&&(Qe*=256);)ct+=this[N+--Ze]*Qe;return Qe*=128,ct>=Qe&&(ct-=Math.pow(2,8*D)),ct},w.prototype.readInt8=function(N,D){return N=N>>>0,D||We(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},w.prototype.readInt16LE=function(N,D){N=N>>>0,D||We(N,2,this.length);var xe=this[N]|this[N+1]<<8;return xe&32768?xe|4294901760:xe},w.prototype.readInt16BE=function(N,D){N=N>>>0,D||We(N,2,this.length);var xe=this[N+1]|this[N]<<8;return xe&32768?xe|4294901760:xe},w.prototype.readInt32LE=function(N,D){return N=N>>>0,D||We(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},w.prototype.readInt32BE=function(N,D){return N=N>>>0,D||We(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},w.prototype.readFloatLE=function(N,D){return N=N>>>0,D||We(N,4,this.length),u.read(this,N,!0,23,4)},w.prototype.readFloatBE=function(N,D){return N=N>>>0,D||We(N,4,this.length),u.read(this,N,!1,23,4)},w.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||We(N,8,this.length),u.read(this,N,!0,52,8)},w.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||We(N,8,this.length),u.read(this,N,!1,52,8)};function He(we,N,D,xe,Ze,Qe){if(!w.isBuffer(we))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Ze||N<Qe)throw new RangeError('"value" argument is out of bounds');if(D+xe>we.length)throw new RangeError("Index out of range")}w.prototype.writeUIntLE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,xe=xe>>>0,!Ze){var Qe=Math.pow(2,8*xe)-1;He(this,N,D,xe,Qe,0)}var ct=1,ae=0;for(this[D]=N&255;++ae<xe&&(ct*=256);)this[D+ae]=N/ct&255;return D+xe},w.prototype.writeUIntBE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,xe=xe>>>0,!Ze){var Qe=Math.pow(2,8*xe)-1;He(this,N,D,xe,Qe,0)}var ct=xe-1,ae=1;for(this[D+ct]=N&255;--ct>=0&&(ae*=256);)this[D+ct]=N/ae&255;return D+xe},w.prototype.writeUInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,255,0),this[D]=N&255,D+1},w.prototype.writeUInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},w.prototype.writeUInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},w.prototype.writeUInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},w.prototype.writeUInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},w.prototype.writeIntLE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,!Ze){var Qe=Math.pow(2,8*xe-1);He(this,N,D,xe,Qe-1,-Qe)}var ct=0,ae=1,R=0;for(this[D]=N&255;++ct<xe&&(ae*=256);)N<0&&R===0&&this[D+ct-1]!==0&&(R=1),this[D+ct]=(N/ae>>0)-R&255;return D+xe},w.prototype.writeIntBE=function(N,D,xe,Ze){if(N=+N,D=D>>>0,!Ze){var Qe=Math.pow(2,8*xe-1);He(this,N,D,xe,Qe-1,-Qe)}var ct=xe-1,ae=1,R=0;for(this[D+ct]=N&255;--ct>=0&&(ae*=256);)N<0&&R===0&&this[D+ct+1]!==0&&(R=1),this[D+ct]=(N/ae>>0)-R&255;return D+xe},w.prototype.writeInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},w.prototype.writeInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},w.prototype.writeInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},w.prototype.writeInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},w.prototype.writeInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function rt(we,N,D,xe,Ze,Qe){if(D+xe>we.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ht(we,N,D,xe,Ze){return N=+N,D=D>>>0,Ze||rt(we,N,D,4),u.write(we,N,D,xe,23,4),D+4}w.prototype.writeFloatLE=function(N,D,xe){return ht(this,N,D,!0,xe)},w.prototype.writeFloatBE=function(N,D,xe){return ht(this,N,D,!1,xe)};function wt(we,N,D,xe,Ze){return N=+N,D=D>>>0,Ze||rt(we,N,D,8),u.write(we,N,D,xe,52,8),D+8}w.prototype.writeDoubleLE=function(N,D,xe){return wt(this,N,D,!0,xe)},w.prototype.writeDoubleBE=function(N,D,xe){return wt(this,N,D,!1,xe)},w.prototype.copy=function(N,D,xe,Ze){if(!w.isBuffer(N))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!Ze&&Ze!==0&&(Ze=this.length),D>=N.length&&(D=N.length),D||(D=0),Ze>0&&Ze<xe&&(Ze=xe),Ze===xe||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(Ze<0)throw new RangeError("sourceEnd out of bounds");Ze>this.length&&(Ze=this.length),N.length-D<Ze-xe&&(Ze=N.length-D+xe);var Qe=Ze-xe;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,xe,Ze);else if(this===N&&xe<D&&D<Ze)for(var ct=Qe-1;ct>=0;--ct)N[ct+D]=this[ct+xe];else Uint8Array.prototype.set.call(N,this.subarray(xe,Ze),D);return Qe},w.prototype.fill=function(N,D,xe,Ze){if(typeof N=="string"){if(typeof D=="string"?(Ze=D,D=0,xe=this.length):typeof xe=="string"&&(Ze=xe,xe=this.length),Ze!==void 0&&typeof Ze!="string")throw new TypeError("encoding must be a string");if(typeof Ze=="string"&&!w.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);if(N.length===1){var Qe=N.charCodeAt(0);(Ze==="utf8"&&Qe<128||Ze==="latin1")&&(N=Qe)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<xe)throw new RangeError("Out of range index");if(xe<=D)return this;D=D>>>0,xe=xe===void 0?this.length:xe>>>0,N||(N=0);var ct;if(typeof N=="number")for(ct=D;ct<xe;++ct)this[ct]=N;else{var ae=w.isBuffer(N)?N:w.from(N,Ze),R=ae.length;if(R===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ct=0;ct<xe-D;++ct)this[ct+D]=ae[ct%R]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function gt(we){if(we=we.split("=")[0],we=we.trim().replace(Mt,""),we.length<2)return"";for(;we.length%4!==0;)we=we+"=";return we}function Et(we){return we<16?"0"+we.toString(16):we.toString(16)}function $t(we,N){N=N||1/0;for(var D,xe=we.length,Ze=null,Qe=[],ct=0;ct<xe;++ct){if(D=we.charCodeAt(ct),D>55295&&D<57344){if(!Ze){if(D>56319){(N-=3)>-1&&Qe.push(239,191,189);continue}else if(ct+1===xe){(N-=3)>-1&&Qe.push(239,191,189);continue}Ze=D;continue}if(D<56320){(N-=3)>-1&&Qe.push(239,191,189),Ze=D;continue}D=(Ze-55296<<10|D-56320)+65536}else Ze&&(N-=3)>-1&&Qe.push(239,191,189);if(Ze=null,D<128){if((N-=1)<0)break;Qe.push(D)}else if(D<2048){if((N-=2)<0)break;Qe.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;Qe.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;Qe.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return Qe}function Ht(we){for(var N=[],D=0;D<we.length;++D)N.push(we.charCodeAt(D)&255);return N}function qt(we,N){for(var D,xe,Ze,Qe=[],ct=0;ct<we.length&&!((N-=2)<0);++ct)D=we.charCodeAt(ct),xe=D>>8,Ze=D%256,Qe.push(Ze),Qe.push(xe);return Qe}function bn(we){return f.toByteArray(gt(we))}function et(we,N,D,xe){for(var Ze=0;Ze<xe&&!(Ze+D>=N.length||Ze>=we.length);++Ze)N[Ze+D]=we[Ze];return Ze}function hn(we,N){return we instanceof N||we!=null&&we.constructor!=null&&we.constructor.name!=null&&we.constructor.name===N.name}function xn(we){return we!==we}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const p=i("./validator"),f=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:f,XMLValidator:p,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const p=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=p+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+p+"]["+f+"]*",b=new RegExp("^"+u+"$"),C=function(w,T){const O=[];let U=T.exec(w);for(;U;){const F=[];F.startIndex=T.lastIndex-U[0].length;const ue=U.length;for(let K=0;K<ue;K++)F.push(U[K]);O.push(F),U=T.exec(w)}return O},I=function(w){const T=b.exec(w);return!(T===null||typeof T>"u")};c.isExist=function(w){return typeof w<"u"},c.isEmptyObject=function(w){return Object.keys(w).length===0},c.merge=function(w,T,O){if(T){const U=Object.keys(T),F=U.length;for(let ue=0;ue<F;ue++)O==="strict"?w[U[ue]]=[T[U[ue]]]:w[U[ue]]=T[U[ue]]}},c.getValue=function(w){return c.isExist(w)?w:""},c.isName=I,c.getAllMatches=C,c.nameRegexp=u},{}],5:[function(i,a,c){const p=i("./util"),f={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(V,E){E=Object.assign({},f,E);const j=[];let B=!1,ee=!1;V[0]==="\uFEFF"&&(V=V.substr(1));for(let q=0;q<V.length;q++)if(V[q]==="<"&&V[q+1]==="?"){if(q+=2,q=b(V,q),q.err)return q}else if(V[q]==="<"){let me=q;if(q++,V[q]==="!"){q=C(V,q);continue}else{let _e=!1;V[q]==="/"&&(_e=!0,q++);let de="";for(;q<V.length&&V[q]!==">"&&V[q]!==" "&&V[q]!=="	"&&V[q]!==`
`&&V[q]!=="\r";q++)de+=V[q];if(de=de.trim(),de[de.length-1]==="/"&&(de=de.substring(0,de.length-1),q--),!$(de)){let Q;return de.trim().length===0?Q="Invalid space after '<'.":Q="Tag '"+de+"' is an invalid name.",K("InvalidTag",Q,ie(V,q))}const oe=T(V,q);if(oe===!1)return K("InvalidAttr","Attributes for '"+de+"' have open quote.",ie(V,q));let le=oe.value;if(q=oe.index,le[le.length-1]==="/"){const Q=q-le.length;le=le.substring(0,le.length-1);const te=U(le,E);if(te===!0)B=!0;else return K(te.err.code,te.err.msg,ie(V,Q+te.err.line))}else if(_e)if(oe.tagClosed){if(le.trim().length>0)return K("InvalidTag","Closing tag '"+de+"' can't have attributes or invalid starting.",ie(V,me));{const Q=j.pop();if(de!==Q.tagName){let te=ie(V,Q.tagStartPos);return K("InvalidTag","Expected closing tag '"+Q.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+de+"'.",ie(V,me))}j.length==0&&(ee=!0)}}else return K("InvalidTag","Closing tag '"+de+"' doesn't have proper closing.",ie(V,q));else{const Q=U(le,E);if(Q!==!0)return K(Q.err.code,Q.err.msg,ie(V,q-le.length+Q.err.line));if(ee===!0)return K("InvalidXml","Multiple possible root nodes found.",ie(V,q));E.unpairedTags.indexOf(de)!==-1||j.push({tagName:de,tagStartPos:me}),B=!0}for(q++;q<V.length;q++)if(V[q]==="<")if(V[q+1]==="!"){q++,q=C(V,q);continue}else if(V[q+1]==="?"){if(q=b(V,++q),q.err)return q}else break;else if(V[q]==="&"){const Q=ue(V,q);if(Q==-1)return K("InvalidChar","char '&' is not expected.",ie(V,q));q=Q}else if(ee===!0&&!u(V[q]))return K("InvalidXml","Extra text at the end",ie(V,q));V[q]==="<"&&q--}}else{if(u(V[q]))continue;return K("InvalidChar","char '"+V[q]+"' is not expected.",ie(V,q))}if(B){if(j.length==1)return K("InvalidTag","Unclosed tag '"+j[0].tagName+"'.",ie(V,j[0].tagStartPos));if(j.length>0)return K("InvalidXml","Invalid '"+JSON.stringify(j.map(q=>q.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return K("InvalidXml","Start tag expected.",1);return!0};function u(V){return V===" "||V==="	"||V===`
`||V==="\r"}function b(V,E){const j=E;for(;E<V.length;E++)if(V[E]=="?"||V[E]==" "){const B=V.substr(j,E-j);if(E>5&&B==="xml")return K("InvalidXml","XML declaration allowed only at the start of the document.",ie(V,E));if(V[E]=="?"&&V[E+1]==">"){E++;break}else continue}return E}function C(V,E){if(V.length>E+5&&V[E+1]==="-"&&V[E+2]==="-"){for(E+=3;E<V.length;E++)if(V[E]==="-"&&V[E+1]==="-"&&V[E+2]===">"){E+=2;break}}else if(V.length>E+8&&V[E+1]==="D"&&V[E+2]==="O"&&V[E+3]==="C"&&V[E+4]==="T"&&V[E+5]==="Y"&&V[E+6]==="P"&&V[E+7]==="E"){let j=1;for(E+=8;E<V.length;E++)if(V[E]==="<")j++;else if(V[E]===">"&&(j--,j===0))break}else if(V.length>E+9&&V[E+1]==="["&&V[E+2]==="C"&&V[E+3]==="D"&&V[E+4]==="A"&&V[E+5]==="T"&&V[E+6]==="A"&&V[E+7]==="["){for(E+=8;E<V.length;E++)if(V[E]==="]"&&V[E+1]==="]"&&V[E+2]===">"){E+=2;break}}return E}const I='"',w="'";function T(V,E){let j="",B="",ee=!1;for(;E<V.length;E++){if(V[E]===I||V[E]===w)B===""?B=V[E]:B!==V[E]||(B="");else if(V[E]===">"&&B===""){ee=!0;break}j+=V[E]}return B!==""?!1:{value:j,index:E,tagClosed:ee}}const O=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function U(V,E){const j=p.getAllMatches(V,O),B={};for(let ee=0;ee<j.length;ee++){if(j[ee][1].length===0)return K("InvalidAttr","Attribute '"+j[ee][2]+"' has no space in starting.",X(j[ee]));if(j[ee][3]!==void 0&&j[ee][4]===void 0)return K("InvalidAttr","Attribute '"+j[ee][2]+"' is without value.",X(j[ee]));if(j[ee][3]===void 0&&!E.allowBooleanAttributes)return K("InvalidAttr","boolean attribute '"+j[ee][2]+"' is not allowed.",X(j[ee]));const q=j[ee][2];if(!W(q))return K("InvalidAttr","Attribute '"+q+"' is an invalid name.",X(j[ee]));if(!B.hasOwnProperty(q))B[q]=1;else return K("InvalidAttr","Attribute '"+q+"' is repeated.",X(j[ee]))}return!0}function F(V,E){let j=/\d/;for(V[E]==="x"&&(E++,j=/[\da-fA-F]/);E<V.length;E++){if(V[E]===";")return E;if(!V[E].match(j))break}return-1}function ue(V,E){if(E++,V[E]===";")return-1;if(V[E]==="#")return E++,F(V,E);let j=0;for(;E<V.length;E++,j++)if(!(V[E].match(/\w/)&&j<20)){if(V[E]===";")break;return-1}return E}function K(V,E,j){return{err:{code:V,msg:E,line:j.line||j,col:j.col}}}function W(V){return p.isName(V)}function $(V){return p.isName(V)}function ie(V,E){const j=V.substring(0,E).split(/\r?\n/);return{line:j.length,col:j[j.length-1].length+1}}function X(V){return V.startIndex+V[1].length}},{"./util":4}],6:[function(i,a,c){const p=i("./orderedJs2Xml"),f={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(w,T){return T},attributeValueProcessor:function(w,T){return T},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(w){this.options=Object.assign({},f,w),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=I),this.processTextOrObjNode=b,this.options.format?(this.indentate=C,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(w){return this.options.preserveOrder?p(w,this.options):(Array.isArray(w)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(w={[this.options.arrayNodeName]:w}),this.j2x(w,0).val)},u.prototype.j2x=function(w,T){let O="",U="";for(let F in w)if(Object.prototype.hasOwnProperty.call(w,F))if(typeof w[F]>"u")this.isAttribute(F)&&(U+="");else if(w[F]===null)this.isAttribute(F)?U+="":F[0]==="?"?U+=this.indentate(T)+"<"+F+"?"+this.tagEndChar:U+=this.indentate(T)+"<"+F+"/"+this.tagEndChar;else if(w[F]instanceof Date)U+=this.buildTextValNode(w[F],F,"",T);else if(typeof w[F]!="object"){const ue=this.isAttribute(F);if(ue)O+=this.buildAttrPairStr(ue,""+w[F]);else if(F===this.options.textNodeName){let K=this.options.tagValueProcessor(F,""+w[F]);U+=this.replaceEntitiesValue(K)}else U+=this.buildTextValNode(w[F],F,"",T)}else if(Array.isArray(w[F])){const ue=w[F].length;let K="";for(let W=0;W<ue;W++){const $=w[F][W];typeof $>"u"||($===null?F[0]==="?"?U+=this.indentate(T)+"<"+F+"?"+this.tagEndChar:U+=this.indentate(T)+"<"+F+"/"+this.tagEndChar:typeof $=="object"?this.options.oneListGroup?K+=this.j2x($,T+1).val:K+=this.processTextOrObjNode($,F,T):K+=this.buildTextValNode($,F,"",T))}this.options.oneListGroup&&(K=this.buildObjectNode(K,F,"",T)),U+=K}else if(this.options.attributesGroupName&&F===this.options.attributesGroupName){const ue=Object.keys(w[F]),K=ue.length;for(let W=0;W<K;W++)O+=this.buildAttrPairStr(ue[W],""+w[F][ue[W]])}else U+=this.processTextOrObjNode(w[F],F,T);return{attrStr:O,val:U}},u.prototype.buildAttrPairStr=function(w,T){return T=this.options.attributeValueProcessor(w,""+T),T=this.replaceEntitiesValue(T),this.options.suppressBooleanAttributes&&T==="true"?" "+w:" "+w+'="'+T+'"'};function b(w,T,O){const U=this.j2x(w,O+1);return w[this.options.textNodeName]!==void 0&&Object.keys(w).length===1?this.buildTextValNode(w[this.options.textNodeName],T,U.attrStr,O):this.buildObjectNode(U.val,T,U.attrStr,O)}u.prototype.buildObjectNode=function(w,T,O,U){if(w==="")return T[0]==="?"?this.indentate(U)+"<"+T+O+"?"+this.tagEndChar:this.indentate(U)+"<"+T+O+this.closeTag(T)+this.tagEndChar;{let F="</"+T+this.tagEndChar,ue="";return T[0]==="?"&&(ue="?",F=""),(O||O==="")&&w.indexOf("<")===-1?this.indentate(U)+"<"+T+O+ue+">"+w+F:this.options.commentPropName!==!1&&T===this.options.commentPropName&&ue.length===0?this.indentate(U)+`<!--${w}-->`+this.newLine:this.indentate(U)+"<"+T+O+ue+this.tagEndChar+w+this.indentate(U)+F}},u.prototype.closeTag=function(w){let T="";return this.options.unpairedTags.indexOf(w)!==-1?this.options.suppressUnpairedNode||(T="/"):this.options.suppressEmptyNode?T="/":T=`></${w}`,T},u.prototype.buildTextValNode=function(w,T,O,U){if(this.options.cdataPropName!==!1&&T===this.options.cdataPropName)return this.indentate(U)+`<![CDATA[${w}]]>`+this.newLine;if(this.options.commentPropName!==!1&&T===this.options.commentPropName)return this.indentate(U)+`<!--${w}-->`+this.newLine;if(T[0]==="?")return this.indentate(U)+"<"+T+O+"?"+this.tagEndChar;{let F=this.options.tagValueProcessor(T,w);return F=this.replaceEntitiesValue(F),F===""?this.indentate(U)+"<"+T+O+this.closeTag(T)+this.tagEndChar:this.indentate(U)+"<"+T+O+">"+F+"</"+T+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(w){if(w&&w.length>0&&this.options.processEntities)for(let T=0;T<this.options.entities.length;T++){const O=this.options.entities[T];w=w.replace(O.regex,O.val)}return w};function C(w){return this.options.indentBy.repeat(w)}function I(w){return w.startsWith(this.options.attributeNamePrefix)&&w!==this.options.textNodeName?w.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const p=`
`;function f(T,O){let U="";return O.format&&O.indentBy.length>0&&(U=p),u(T,O,"",U)}function u(T,O,U,F){let ue="",K=!1;for(let W=0;W<T.length;W++){const $=T[W],ie=b($);if(ie===void 0)continue;let X="";if(U.length===0?X=ie:X=`${U}.${ie}`,ie===O.textNodeName){let ee=$[ie];I(X,O)||(ee=O.tagValueProcessor(ie,ee),ee=w(ee,O)),K&&(ue+=F),ue+=ee,K=!1;continue}else if(ie===O.cdataPropName){K&&(ue+=F),ue+=`<![CDATA[${$[ie][0][O.textNodeName]}]]>`,K=!1;continue}else if(ie===O.commentPropName){ue+=F+`<!--${$[ie][0][O.textNodeName]}-->`,K=!0;continue}else if(ie[0]==="?"){const ee=C($[":@"],O),q=ie==="?xml"?"":F;let me=$[ie][0][O.textNodeName];me=me.length!==0?" "+me:"",ue+=q+`<${ie}${me}${ee}?>`,K=!0;continue}let V=F;V!==""&&(V+=O.indentBy);const E=C($[":@"],O),j=F+`<${ie}${E}`,B=u($[ie],O,X,V);O.unpairedTags.indexOf(ie)!==-1?O.suppressUnpairedNode?ue+=j+">":ue+=j+"/>":(!B||B.length===0)&&O.suppressEmptyNode?ue+=j+"/>":B&&B.endsWith(">")?ue+=j+`>${B}${F}</${ie}>`:(ue+=j+">",B&&F!==""&&(B.includes("/>")||B.includes("</"))?ue+=F+O.indentBy+B+F:ue+=B,ue+=`</${ie}>`),K=!0}return ue}function b(T){const O=Object.keys(T);for(let U=0;U<O.length;U++){const F=O[U];if(T.hasOwnProperty(F)&&F!==":@")return F}}function C(T,O){let U="";if(T&&!O.ignoreAttributes)for(let F in T){if(!T.hasOwnProperty(F))continue;let ue=O.attributeValueProcessor(F,T[F]);ue=w(ue,O),ue===!0&&O.suppressBooleanAttributes?U+=` ${F.substr(O.attributeNamePrefix.length)}`:U+=` ${F.substr(O.attributeNamePrefix.length)}="${ue}"`}return U}function I(T,O){T=T.substr(0,T.length-O.textNodeName.length-1);let U=T.substr(T.lastIndexOf(".")+1);for(let F in O.stopNodes)if(O.stopNodes[F]===T||O.stopNodes[F]==="*."+U)return!0;return!1}function w(T,O){if(T&&T.length>0&&O.processEntities)for(let U=0;U<O.entities.length;U++){const F=O.entities[U];T=T.replace(F.regex,F.val)}return T}a.exports=f},{}],8:[function(i,a,c){const p=i("../util");function f(U,F){const ue={};if(U[F+3]==="O"&&U[F+4]==="C"&&U[F+5]==="T"&&U[F+6]==="Y"&&U[F+7]==="P"&&U[F+8]==="E"){F=F+9;let K=1,W=!1,$=!1,ie="";for(;F<U.length;F++)if(U[F]==="<"&&!$){if(W&&C(U,F))F+=7,[entityName,val,F]=u(U,F+1),val.indexOf("&")===-1&&(ue[O(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(W&&I(U,F))F+=8;else if(W&&w(U,F))F+=8;else if(W&&T(U,F))F+=9;else if(b)$=!0;else throw new Error("Invalid DOCTYPE");K++,ie=""}else if(U[F]===">"){if($?U[F-1]==="-"&&U[F-2]==="-"&&($=!1,K--):K--,K===0)break}else U[F]==="["?W=!0:ie+=U[F];if(K!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:ue,i:F}}function u(U,F){let ue="";for(;F<U.length&&U[F]!=="'"&&U[F]!=='"';F++)ue+=U[F];if(ue=ue.trim(),ue.indexOf(" ")!==-1)throw new Error("External entites are not supported");const K=U[F++];let W="";for(;F<U.length&&U[F]!==K;F++)W+=U[F];return[ue,W,F]}function b(U,F){return U[F+1]==="!"&&U[F+2]==="-"&&U[F+3]==="-"}function C(U,F){return U[F+1]==="!"&&U[F+2]==="E"&&U[F+3]==="N"&&U[F+4]==="T"&&U[F+5]==="I"&&U[F+6]==="T"&&U[F+7]==="Y"}function I(U,F){return U[F+1]==="!"&&U[F+2]==="E"&&U[F+3]==="L"&&U[F+4]==="E"&&U[F+5]==="M"&&U[F+6]==="E"&&U[F+7]==="N"&&U[F+8]==="T"}function w(U,F){return U[F+1]==="!"&&U[F+2]==="A"&&U[F+3]==="T"&&U[F+4]==="T"&&U[F+5]==="L"&&U[F+6]==="I"&&U[F+7]==="S"&&U[F+8]==="T"}function T(U,F){return U[F+1]==="!"&&U[F+2]==="N"&&U[F+3]==="O"&&U[F+4]==="T"&&U[F+5]==="A"&&U[F+6]==="T"&&U[F+7]==="I"&&U[F+8]==="O"&&U[F+9]==="N"}function O(U){if(p.isName(U))return U;throw new Error(`Invalid entity name ${U}`)}a.exports=f},{"../util":4}],9:[function(i,a,c){const p={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,b){return b},attributeValueProcessor:function(u,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,b,C){return u}},f=function(u){return Object.assign({},p,u)};c.buildOptions=f,c.defaultOptions=p},{}],10:[function(i,a,c){const p=i("../util"),f=i("./xmlNode"),u=i("./DocTypeReader"),b=i("strnum");class C{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=I,this.parseXml=F,this.parseTextData=w,this.resolveNameSpace=T,this.buildAttributesMap=U,this.isItStopNode=$,this.replaceEntitiesValue=K,this.readStopNodeData=E,this.saveTextToParentTag=W,this.addChild=ue}}function I(B){const ee=Object.keys(B);for(let q=0;q<ee.length;q++){const me=ee[q];this.lastEntities[me]={regex:new RegExp("&"+me+";","g"),val:B[me]}}}function w(B,ee,q,me,_e,de,oe){if(B!==void 0&&(this.options.trimValues&&!me&&(B=B.trim()),B.length>0)){oe||(B=this.replaceEntitiesValue(B));const le=this.options.tagValueProcessor(ee,B,q,_e,de);return le==null?B:typeof le!=typeof B||le!==B?le:this.options.trimValues?j(B,this.options.parseTagValue,this.options.numberParseOptions):B.trim()===B?j(B,this.options.parseTagValue,this.options.numberParseOptions):B}}function T(B){if(this.options.removeNSPrefix){const ee=B.split(":"),q=B.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(B=q+ee[1])}return B}const O=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function U(B,ee,q){if(!this.options.ignoreAttributes&&typeof B=="string"){const me=p.getAllMatches(B,O),_e=me.length,de={};for(let oe=0;oe<_e;oe++){const le=this.resolveNameSpace(me[oe][1]);let Q=me[oe][4],te=this.options.attributeNamePrefix+le;if(le.length)if(this.options.transformAttributeName&&(te=this.options.transformAttributeName(te)),te==="__proto__"&&(te="#__proto__"),Q!==void 0){this.options.trimValues&&(Q=Q.trim()),Q=this.replaceEntitiesValue(Q);const he=this.options.attributeValueProcessor(le,Q,ee);he==null?de[te]=Q:typeof he!=typeof Q||he!==Q?de[te]=he:de[te]=j(Q,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(de[te]=!0)}if(!Object.keys(de).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=de,oe}return de}}const F=function(B){B=B.replace(/\r\n?/g,`
`);const ee=new f("!xml");let q=ee,me="",_e="";for(let de=0;de<B.length;de++)if(B[de]==="<")if(B[de+1]==="/"){const le=X(B,">",de,"Closing Tag is not closed.");let Q=B.substring(de+2,le).trim();if(this.options.removeNSPrefix){const be=Q.indexOf(":");be!==-1&&(Q=Q.substr(be+1))}this.options.transformTagName&&(Q=this.options.transformTagName(Q)),q&&(me=this.saveTextToParentTag(me,q,_e));const te=_e.substring(_e.lastIndexOf(".")+1);if(Q&&this.options.unpairedTags.indexOf(Q)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${Q}>`);let he=0;te&&this.options.unpairedTags.indexOf(te)!==-1?(he=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):he=_e.lastIndexOf("."),_e=_e.substring(0,he),q=this.tagsNodeStack.pop(),me="",de=le}else if(B[de+1]==="?"){let le=V(B,de,!1,"?>");if(!le)throw new Error("Pi Tag is not closed.");if(me=this.saveTextToParentTag(me,q,_e),!(this.options.ignoreDeclaration&&le.tagName==="?xml"||this.options.ignorePiTags)){const Q=new f(le.tagName);Q.add(this.options.textNodeName,""),le.tagName!==le.tagExp&&le.attrExpPresent&&(Q[":@"]=this.buildAttributesMap(le.tagExp,_e,le.tagName)),this.addChild(q,Q,_e)}de=le.closeIndex+1}else if(B.substr(de+1,3)==="!--"){const le=X(B,"-->",de+4,"Comment is not closed.");if(this.options.commentPropName){const Q=B.substring(de+4,le-2);me=this.saveTextToParentTag(me,q,_e),q.add(this.options.commentPropName,[{[this.options.textNodeName]:Q}])}de=le}else if(B.substr(de+1,2)==="!D"){const le=u(B,de);this.docTypeEntities=le.entities,de=le.i}else if(B.substr(de+1,2)==="!["){const le=X(B,"]]>",de,"CDATA is not closed.")-2,Q=B.substring(de+9,le);if(me=this.saveTextToParentTag(me,q,_e),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:Q}]);else{let te=this.parseTextData(Q,q.tagname,_e,!0,!1,!0);te==null&&(te=""),q.add(this.options.textNodeName,te)}de=le+2}else{let le=V(B,de,this.options.removeNSPrefix),Q=le.tagName;const te=le.rawTagName;let he=le.tagExp,be=le.attrExpPresent,Ee=le.closeIndex;this.options.transformTagName&&(Q=this.options.transformTagName(Q)),q&&me&&q.tagname!=="!xml"&&(me=this.saveTextToParentTag(me,q,_e,!1));const Be=q;if(Be&&this.options.unpairedTags.indexOf(Be.tagname)!==-1&&(q=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),Q!==ee.tagname&&(_e+=_e?"."+Q:Q),this.isItStopNode(this.options.stopNodes,_e,Q)){let ke="";if(he.length>0&&he.lastIndexOf("/")===he.length-1)de=le.closeIndex;else if(this.options.unpairedTags.indexOf(Q)!==-1)de=le.closeIndex;else{const We=this.readStopNodeData(B,te,Ee+1);if(!We)throw new Error(`Unexpected end of ${te}`);de=We.i,ke=We.tagContent}const ze=new f(Q);Q!==he&&be&&(ze[":@"]=this.buildAttributesMap(he,_e,Q)),ke&&(ke=this.parseTextData(ke,Q,_e,!0,be,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),ze.add(this.options.textNodeName,ke),this.addChild(q,ze,_e)}else{if(he.length>0&&he.lastIndexOf("/")===he.length-1){Q[Q.length-1]==="/"?(Q=Q.substr(0,Q.length-1),_e=_e.substr(0,_e.length-1),he=Q):he=he.substr(0,he.length-1),this.options.transformTagName&&(Q=this.options.transformTagName(Q));const ke=new f(Q);Q!==he&&be&&(ke[":@"]=this.buildAttributesMap(he,_e,Q)),this.addChild(q,ke,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const ke=new f(Q);this.tagsNodeStack.push(q),Q!==he&&be&&(ke[":@"]=this.buildAttributesMap(he,_e,Q)),this.addChild(q,ke,_e),q=ke}me="",de=Ee}}else me+=B[de];return ee.child};function ue(B,ee,q){const me=this.options.updateTag(ee.tagname,q,ee[":@"]);me===!1||(typeof me=="string"&&(ee.tagname=me),B.addChild(ee))}const K=function(B){if(this.options.processEntities){for(let ee in this.docTypeEntities){const q=this.docTypeEntities[ee];B=B.replace(q.regx,q.val)}for(let ee in this.lastEntities){const q=this.lastEntities[ee];B=B.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const q=this.htmlEntities[ee];B=B.replace(q.regex,q.val)}B=B.replace(this.ampEntity.regex,this.ampEntity.val)}return B};function W(B,ee,q,me){return B&&(me===void 0&&(me=Object.keys(ee.child).length===0),B=this.parseTextData(B,ee.tagname,q,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,me),B!==void 0&&B!==""&&ee.add(this.options.textNodeName,B),B=""),B}function $(B,ee,q){const me="*."+q;for(const _e in B){const de=B[_e];if(me===de||ee===de)return!0}return!1}function ie(B,ee,q=">"){let me,_e="";for(let de=ee;de<B.length;de++){let oe=B[de];if(me)oe===me&&(me="");else if(oe==='"'||oe==="'")me=oe;else if(oe===q[0])if(q[1]){if(B[de+1]===q[1])return{data:_e,index:de}}else return{data:_e,index:de};else oe==="	"&&(oe=" ");_e+=oe}}function X(B,ee,q,me){const _e=B.indexOf(ee,q);if(_e===-1)throw new Error(me);return _e+ee.length-1}function V(B,ee,q,me=">"){const _e=ie(B,ee+1,me);if(!_e)return;let de=_e.data;const oe=_e.index,le=de.search(/\s/);let Q=de,te=!0;le!==-1&&(Q=de.substring(0,le),de=de.substring(le+1).trimStart());const he=Q;if(q){const be=Q.indexOf(":");be!==-1&&(Q=Q.substr(be+1),te=Q!==_e.data.substr(be+1))}return{tagName:Q,tagExp:de,closeIndex:oe,attrExpPresent:te,rawTagName:he}}function E(B,ee,q){const me=q;let _e=1;for(;q<B.length;q++)if(B[q]==="<")if(B[q+1]==="/"){const de=X(B,">",q,`${ee} is not closed`);if(B.substring(q+2,de).trim()===ee&&(_e--,_e===0))return{tagContent:B.substring(me,q),i:de};q=de}else if(B[q+1]==="?")q=X(B,"?>",q+1,"StopNode is not closed.");else if(B.substr(q+1,3)==="!--")q=X(B,"-->",q+3,"StopNode is not closed.");else if(B.substr(q+1,2)==="![")q=X(B,"]]>",q,"StopNode is not closed.")-2;else{const de=V(B,q,">");de&&((de&&de.tagName)===ee&&de.tagExp[de.tagExp.length-1]!=="/"&&_e++,q=de.closeIndex)}}function j(B,ee,q){if(ee&&typeof B=="string"){const me=B.trim();return me==="true"?!0:me==="false"?!1:b(B,q)}else return p.isExist(B)?B:""}a.exports=C},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:p}=i("./OptionsBuilder"),f=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),b=i("../validator");class C{constructor(w){this.externalEntities={},this.options=p(w)}parse(w,T){if(typeof w!="string")if(w.toString)w=w.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(T){T===!0&&(T={});const F=b.validate(w,T);if(F!==!0)throw Error(`${F.err.msg}:${F.err.line}:${F.err.col}`)}const O=new f(this.options);O.addExternalEntities(this.externalEntities);const U=O.parseXml(w);return this.options.preserveOrder||U===void 0?U:u(U,this.options)}addEntity(w,T){if(T.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(w.indexOf("&")!==-1||w.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(T==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[w]=T}}a.exports=C},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function p(I,w){return f(I,w)}function f(I,w,T){let O;const U={};for(let F=0;F<I.length;F++){const ue=I[F],K=u(ue);let W="";if(T===void 0?W=K:W=T+"."+K,K===w.textNodeName)O===void 0?O=ue[K]:O+=""+ue[K];else{if(K===void 0)continue;if(ue[K]){let $=f(ue[K],w,W);const ie=C($,w);ue[":@"]?b($,ue[":@"],W,w):Object.keys($).length===1&&$[w.textNodeName]!==void 0&&!w.alwaysCreateTextNode?$=$[w.textNodeName]:Object.keys($).length===0&&(w.alwaysCreateTextNode?$[w.textNodeName]="":$=""),U[K]!==void 0&&U.hasOwnProperty(K)?(Array.isArray(U[K])||(U[K]=[U[K]]),U[K].push($)):w.isArray(K,W,ie)?U[K]=[$]:U[K]=$}}}return typeof O=="string"?O.length>0&&(U[w.textNodeName]=O):O!==void 0&&(U[w.textNodeName]=O),U}function u(I){const w=Object.keys(I);for(let T=0;T<w.length;T++){const O=w[T];if(O!==":@")return O}}function b(I,w,T,O){if(w){const U=Object.keys(w),F=U.length;for(let ue=0;ue<F;ue++){const K=U[ue];O.isArray(K,T+"."+K,!0,!0)?I[K]=[w[K]]:I[K]=w[K]}}}function C(I,w){const{textNodeName:T}=w,O=Object.keys(I).length;return!!(O===0||O===1&&(I[T]||typeof I[T]=="boolean"||I[T]===0))}c.prettify=p},{}],13:[function(i,a,c){class p{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,b){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:b})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=p},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(p,f,u,b,C){var I,w,T=C*8-b-1,O=(1<<T)-1,U=O>>1,F=-7,ue=u?C-1:0,K=u?-1:1,W=p[f+ue];for(ue+=K,I=W&(1<<-F)-1,W>>=-F,F+=T;F>0;I=I*256+p[f+ue],ue+=K,F-=8);for(w=I&(1<<-F)-1,I>>=-F,F+=b;F>0;w=w*256+p[f+ue],ue+=K,F-=8);if(I===0)I=1-U;else{if(I===O)return w?NaN:(W?-1:1)*(1/0);w=w+Math.pow(2,b),I=I-U}return(W?-1:1)*w*Math.pow(2,I-b)},c.write=function(p,f,u,b,C,I){var w,T,O,U=I*8-C-1,F=(1<<U)-1,ue=F>>1,K=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=b?0:I-1,$=b?1:-1,ie=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(T=isNaN(f)?1:0,w=F):(w=Math.floor(Math.log(f)/Math.LN2),f*(O=Math.pow(2,-w))<1&&(w--,O*=2),w+ue>=1?f+=K/O:f+=K*Math.pow(2,1-ue),f*O>=2&&(w++,O/=2),w+ue>=F?(T=0,w=F):w+ue>=1?(T=(f*O-1)*Math.pow(2,C),w=w+ue):(T=f*Math.pow(2,ue-1)*Math.pow(2,C),w=0));C>=8;p[u+W]=T&255,W+=$,T/=256,C-=8);for(w=w<<C|T,U+=C;U>0;p[u+W]=w&255,W+=$,w/=256,U-=8);p[u+W-$]|=ie*128}},{}],15:[function(i,a,c){const p=/^[-+]?0x[a-fA-F0-9]+$/,f=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(I,w={}){if(w=Object.assign({},u,w),!I||typeof I!="string")return I;let T=I.trim();if(w.skipLike!==void 0&&w.skipLike.test(T))return I;if(w.hex&&p.test(T))return Number.parseInt(T,16);{const O=f.exec(T);if(O){const U=O[1],F=O[2];let ue=C(O[3]);const K=O[4]||O[6];if(!w.leadingZeros&&F.length>0&&U&&T[2]!==".")return I;if(!w.leadingZeros&&F.length>0&&!U&&T[1]!==".")return I;{const W=Number(T),$=""+W;return $.search(/[eE]/)!==-1||K?w.eNotation?W:I:T.indexOf(".")!==-1?$==="0"&&ue===""||$===ue||U&&$==="-"+ue?W:I:F?ue===$||U+ue===$?W:I:T===$||T===U+$?W:I}}else return I}}function C(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}a.exports=b},{}],16:[function(i,a,c){(function(p){(function(){var f=this&&this.__awaiter||function(T,O,U,F){function ue(K){return K instanceof U?K:new U(function(W){W(K)})}return new(U||(U=Promise))(function(K,W){function $(V){try{X(F.next(V))}catch(E){W(E)}}function ie(V){try{X(F.throw(V))}catch(E){W(E)}}function X(V){V.done?K(V.value):ue(V.value).then($,ie)}X((F=F.apply(T,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),b=i("../config"),C=i("./_xml"),I=T=>typeof btoa>"u"?p.from(T,"binary").toString("base64"):btoa(T);function w(T,O,U){return f(this,void 0,void 0,function*(){const{apiUrl:F,authHeader:ue,basicAuth:K,userAgent:W}=(0,b.getConfig)(),$=K&&`Basic ${I(`${K.username}:${K.password}`)}`,ie=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let X=new URLSearchParams(O).toString();X&&(X=`?${X}`);const V=yield fetch(`${F}/api${T}${X}`,Object.assign(Object.assign({},U),{headers:Object.assign({Authorization:ue||$||ie||"","User-Agent":W},U==null?void 0:U.headers)})),E=V.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const j=yield V.text();return yield C.xmlParser.parse(j)}if(E!=null&&E.startsWith("application/json"))return V.json();if(V.ok)return yield V.text();throw new Error(`OSM API: ${yield V.text()}`)})}c.osmFetch=w}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const p=i("fast-xml-parser");c.xmlParser=new p.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:f=>f!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const p=i("fast-xml-parser"),f=new p.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(I){return f.build({osm:{changeset:{tag:Object.entries(I).map(([w,T])=>({$k:w,$v:T}))}}})}c.createChangesetMetaXml=u;const b=(I,w,T)=>w.reduce((O,U)=>{const F={$id:U.id,$version:T?0:U.version,$changeset:I,tag:Object.entries(U.tags||{}).map(([ue,K])=>({$k:ue,$v:K}))};switch(U.type){case"node":{const ue=Object.assign(Object.assign({},F),{$lat:U.lat,$lon:U.lon});return Object.assign(Object.assign({},O),{node:[...O.node,ue]})}case"way":{if(!U.nodes)throw new Error("Way has no nodes");const ue=Object.assign(Object.assign({},F),{nd:U.nodes.map(K=>({$ref:K}))});return Object.assign(Object.assign({},O),{way:[...O.way,ue]})}case"relation":{if(!U.members)throw new Error("Relation has no members");const ue=Object.assign(Object.assign({},F),{member:U.members.map(K=>({$type:K.type,$ref:K.ref,$role:K.role}))});return Object.assign(Object.assign({},O),{relation:[...O.relation,ue]})}default:return O}},{node:[],way:[],relation:[]});function C(I,w,T){return f.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},T),{create:[b(I,w.create,!0)],modify:[b(I,w.modify)],delete:[Object.assign({"$if-unused":!0},b(I,w.delete))]})})}c.createOsmChangeXml=C},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const p=i("../_xml");function f(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(w=>[w.$.k,w.$.v])):void 0}}const u=I=>{const w=[];if(I.node){const T=I.node.map(O=>Object.assign(Object.assign({type:"node"},f(O)),{lat:+O.$.lat,lon:+O.$.lon}));w.push(...T)}if(I.way){const T=I.way.map(O=>{var U;return Object.assign(Object.assign({type:"way"},f(O)),{nodes:((U=O.nd)===null||U===void 0?void 0:U.map(F=>+F.$.ref))||[]})});w.push(...T)}if(I.relation){const T=I.relation.map(O=>{var U;return Object.assign(Object.assign({type:"relation"},f(O)),{members:((U=O.member)===null||U===void 0?void 0:U.map(F=>({ref:+F.$.ref,role:F.$.role,type:F.$.type})))||[]})});w.push(...T)}return w};function b(I){var w,T,O;return{create:((w=I.osmChange[0].create)===null||w===void 0?void 0:w.flatMap(u))||[],modify:((T=I.osmChange[0].modify)===null||T===void 0?void 0:T.flatMap(u))||[],delete:((O=I.osmChange[0].delete)===null||O===void 0?void 0:O.flatMap(u))||[]}}c.parseOsmChangeJson=b;function C(I){const w=p.xmlParser.parse(I);return b(w)}c.parseOsmChangeXml=C},{"../_xml":17}],20:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,I,w){function T(O){return O instanceof I?O:new I(function(U){U(O)})}return new(I||(I=Promise))(function(O,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ue(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?O(W.value):T(W.value).then(F,ue)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const f=i("../_osmFetch");function u(b,C){return p(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(C)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var p=this&&this.__awaiter||function(C,I,w,T){function O(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ue($){try{W(T.next($))}catch(ie){F(ie)}}function K($){try{W(T.throw($))}catch(ie){F(ie)}}function W($){$.done?U($.value):O($.value).then(ue,K)}W((T=T.apply(C,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const f=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function b(C){return p(this,void 0,void 0,function*(){const I=yield(0,f.osmFetch)(`/0.6/changeset/${C}/download`);return(0,u.parseOsmChangeJson)(I)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var p=this&&this.__awaiter||function(w,T,O,U){function F(ue){return ue instanceof O?ue:new O(function(K){K(ue)})}return new(O||(O=Promise))(function(ue,K){function W(X){try{ie(U.next(X))}catch(V){K(V)}}function $(X){try{ie(U.throw(X))}catch(V){K(V)}}function ie(X){X.done?ue(X.value):F(X.value).then(W,$)}ie((U=U.apply(w,T||[])).next())})},f=this&&this.__rest||function(w,T){var O={};for(var U in w)Object.prototype.hasOwnProperty.call(w,U)&&T.indexOf(U)<0&&(O[U]=w[U]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var F=0,U=Object.getOwnPropertySymbols(w);F<U.length;F++)T.indexOf(U[F])<0&&Object.prototype.propertyIsEnumerable.call(w,U[F])&&(O[U[F]]=w[U[F]]);return O};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),b=w=>{var T;return{id:+w.$.id,created_at:new Date(w.$.created_at),closed_at:new Date(w.$.closed_at),open:w.$.open==="true",comments_count:+w.$.comments_count,changes_count:+w.$.changes_count,min_lat:+w.$.min_lat,min_lon:+w.$.min_lon,max_lat:+w.$.max_lat,max_lon:+w.$.max_lon,uid:+w.$.uid,user:w.$.user,tags:Object.fromEntries(w.tag.map(O=>[O.$.k,O.$.v])),discussion:(T=w.discussion)===null||T===void 0?void 0:T[0].comment.map(O=>({date:new Date(O.$.date),user:O.$.user,uid:O.$.uid,text:O.text[0]}))}};function C(w){var T;return p(this,void 0,void 0,function*(){const{only:O}=w,U=f(w,["only"]);return((T=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},O&&{[O]:!0}),U))).osm[0].changeset)===null||T===void 0?void 0:T.map(b))||[]})}c.listChangesets=C;function I(w,T=!0){return p(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${w}`,{include_discussion:T})).osm[0].changeset.map(b)[0]})}c.getChangeset=I},{"../_osmFetch":16}],23:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(C,I,w,T){T===void 0&&(T=w);var O=Object.getOwnPropertyDescriptor(I,w);(!O||("get"in O?!I.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return I[w]}}),Object.defineProperty(C,T,O)}:function(C,I,w,T){T===void 0&&(T=w),C[T]=I[w]}),f=this&&this.__exportStar||function(C,I){for(var w in C)w!=="default"&&!Object.prototype.hasOwnProperty.call(I,w)&&p(I,C,w)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,f(i("./createChangesetComment"),c),f(i("./getChangesetDiff"),c),f(i("./getChangesets"),c),f(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var p=this&&this.__awaiter||function(C,I,w,T){function O(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ue($){try{W(T.next($))}catch(ie){F(ie)}}function K($){try{W(T.throw($))}catch(ie){F(ie)}}function W($){$.done?U($.value):O($.value).then(ue,K)}W((T=T.apply(C,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const f=i("../_osmFetch"),u=i("./_createOsmChangeXml");function b(C,I){return p(this,void 0,void 0,function*(){const w=(0,u.createChangesetMetaXml)(C),T=+(yield(0,f.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:w,headers:{"content-type":"application/xml; charset=utf-8"}})),O=(0,u.createOsmChangeXml)(T,I);return yield(0,f.osmFetch)(`/0.6/changeset/${T}/upload`,void 0,{method:"POST",body:O,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,f.osmFetch)(`/0.6/changeset/${T}/close`,void 0,{method:"PUT"}),+T})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,I,w){function T(O){return O instanceof I?O:new I(function(U){U(O)})}return new(I||(I=Promise))(function(O,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ue(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?O(W.value):T(W.value).then(F,ue)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const f=i("./_osmFetch");function u(){var b;return p(this,void 0,void 0,function*(){const C=yield(0,f.osmFetch)("/capabilities");return{limits:{maxArea:+C.osm[0].api[0].area[0].$.maximum,maxNoteArea:+C.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+C.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+C.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+C.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+C.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((b=C.osm[0].policy[0].imagery[0].blacklist)===null||b===void 0?void 0:b.map(w=>w.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var p=this&&this.__awaiter||function(O,U,F,ue){function K(W){return W instanceof F?W:new F(function($){$(W)})}return new(F||(F=Promise))(function(W,$){function ie(E){try{V(ue.next(E))}catch(j){$(j)}}function X(E){try{V(ue.throw(E))}catch(j){$(j)}}function V(E){E.done?W(E.value):K(E.value).then(ie,X)}V((ue=ue.apply(O,U||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const f=i("./_osmFetch");function u(O,U,F){return p(this,void 0,void 0,function*(){const ue=F&&O!=="node"?"/full":"";return(yield(0,f.osmFetch)(`/0.6/${O}/${U}${ue}.json`)).elements})}c.getFeature=u;function b(O,U){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${O}s.json?${O}s=${U.join(",")}`)).elements})}c.getFeatures=b;function C(O,U,F){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${O}/${U}/${F}.json`)).elements[0]})}c.getFeatureAtVersion=C;function I(O,U){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${O}/${U}/history.json`)).elements})}c.getFeatureHistory=I;function w(O){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/node/${O}/ways.json`)).elements})}c.getWaysForNode=w;function T(O,U){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${O}/${U}/relations.json`)).elements})}c.getRelationsForElement=T},{"./_osmFetch":16}],27:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,I,w){function T(O){return O instanceof I?O:new I(function(U){U(O)})}return new(I||(I=Promise))(function(O,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ue(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?O(W.value):T(W.value).then(F,ue)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const f=i("./_osmFetch");function u(b){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,I,w){function T(O){return O instanceof I?O:new I(function(U){U(O)})}return new(I||(I=Promise))(function(O,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ue(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?O(W.value):T(W.value).then(F,ue)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const f=i("./changesets");function u(b){return p(this,void 0,void 0,function*(){const C=yield(0,f.listChangesets)({display_name:b});if(!C.length)throw new Error("Could not get uid because the user has never edited the map");return C[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var p=this&&this.__awaiter||function(C,I,w,T){function O(U){return U instanceof w?U:new w(function(F){F(U)})}return new(w||(w=Promise))(function(U,F){function ue($){try{W(T.next($))}catch(ie){F(ie)}}function K($){try{W(T.throw($))}catch(ie){F(ie)}}function W($){$.done?U($.value):O($.value).then(ue,K)}W((T=T.apply(C,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const f=i("./_osmFetch");function u(C){return p(this,void 0,void 0,function*(){const I=yield(0,f.osmFetch)(`/0.6/user/${C==="me"?"details":C}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}c.getUser=u;function b(C){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)("/0.6/users",{users:C})).users.map(w=>Object.assign(Object.assign({},w),{account_created:new Date(w.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,I){I===void 0&&(I=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,I,w)}:function(u,b,C,I){I===void 0&&(I=C),u[I]=b[C]}),f=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./changesets"),c),f(i("./notes"),c),f(i("./getCapabilities"),c),f(i("./getFeature"),c),f(i("./getMapData"),c),f(i("./getUIdFromDisplayName"),c),f(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var p=this&&this.__awaiter||function(T,O,U,F){function ue(K){return K instanceof U?K:new U(function(W){W(K)})}return new(U||(U=Promise))(function(K,W){function $(V){try{X(F.next(V))}catch(E){W(E)}}function ie(V){try{X(F.throw(V))}catch(E){W(E)}}function X(V){V.done?K(V.value):ue(V.value).then($,ie)}X((F=F.apply(T,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const f=i("../_osmFetch"),u=T=>{const[O,U]=T.geometry.coordinates;return Object.assign(Object.assign({},T.properties),{location:{lat:U,lng:O}})};function b(T,O){return p(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/notes${O?"/search":""}.json`,T)).features.map(u)})}function C(T){return b(T,!0)}c.getNotesForQuery=C;function I(T){return b({bbox:T},!1)}c.getNotesForArea=I;function w(T){return p(this,void 0,void 0,function*(){const O=yield(0,f.osmFetch)(`/0.6/notes/${T}.json`);return u(O)})}c.getNote=w},{"../_osmFetch":16}],32:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,I){I===void 0&&(I=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,I,w)}:function(u,b,C,I){I===void 0&&(I=C),u[I]=b[C]}),f=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./getNotes"),c),f(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var p=this&&this.__awaiter||function(I,w,T,O){function U(F){return F instanceof T?F:new T(function(ue){ue(F)})}return new(T||(T=Promise))(function(F,ue){function K(ie){try{$(O.next(ie))}catch(X){ue(X)}}function W(ie){try{$(O.throw(ie))}catch(X){ue(X)}}function $(ie){ie.done?F(ie.value):U(ie.value).then(K,W)}$((O=O.apply(I,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const f=i("../_osmFetch");function u(I,w,T){return p(this,void 0,void 0,function*(){yield(0,f.osmFetch)("/0.6/notes",{lat:I,lon:w,text:T})})}c.createNote=u;function b(I,w){return p(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/notes/${I}/comment`,{text:w})})}c.commentOnNote=b;function C(I,w){return p(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/notes/${I}/reopen`,{text:w})})}c.reopenNote=C},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function p(f){let u=!1;return new Promise((b,C)=>{const[I,w]=[600,550],T=Object.entries({width:I,height:w,left:window.screen.width/2-I/2,top:window.screen.height/2-w/2}).map(([F,ue])=>`${F}=${ue}`).join(","),O=window.open("about:blank","oauth_window",T);if(!O)throw new Error("Popup was blocked");O.location=f,window.authComplete=F=>{b(F),u=!0};const U=setInterval(()=>{O.closed&&(u||C(new Error("Cancelled")),clearInterval(U))},500)})}c.createPopup=p},{}],35:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,I,w){function T(O){return O instanceof I?O:new I(function(U){U(O)})}return new(I||(I=Promise))(function(O,U){function F(W){try{K(w.next(W))}catch($){U($)}}function ue(W){try{K(w.throw(W))}catch($){U($)}}function K(W){W.done?O(W.value):T(W.value).then(F,ue)}K((w=w.apply(b,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const f=i("./helpers");function u(b,{options:C,pkceVerifier:I,state:w}){return p(this,void 0,void 0,function*(){const T=new URL(b).searchParams,O=T.get("error_description"),U=T.get("code"),F=T.get("state");if(O)throw new Error(O);if(!U)throw new Error("No code in OAuth response");if(!I||!w)throw new Error("No login in progress");if(w!==F)throw new Error("State Mismatch");const ue={grant_type:"authorization_code",code:U,redirect_uri:C.redirectUrl,client_id:C.clientId,code_verifier:I},K=`${(0,f.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(ue).toString()}`,$=yield(yield fetch(K,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in $)throw new Error($.error_description);const ie={issuedAt:new Date($.created_at*1e3).toISOString(),accessToken:$.access_token,scopes:$.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ie)),delete window.authComplete,ie})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var p=this&&this.__awaiter||function(I,w,T,O){function U(F){return F instanceof T?F:new T(function(ue){ue(F)})}return new(T||(T=Promise))(function(F,ue){function K(ie){try{$(O.next(ie))}catch(X){ue(X)}}function W(ie){try{$(O.throw(ie))}catch(X){ue(X)}}function $(ie){ie.done?F(ie.value):U(ie.value).then(K,W)}$((O=O.apply(I,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const f=i("../config");function u(I){return p(this,void 0,void 0,function*(){const w=new TextEncoder().encode(I),T=yield window.crypto.subtle.digest("SHA-256",w);return btoa(String.fromCharCode(...new Uint8Array(T))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function C(){let I=(0,f.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}c.getOAuthBaseUrl=C},{"../config":39}],37:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,I){I===void 0&&(I=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,I,w)}:function(u,b,C,I){I===void 0&&(I=C),u[I]=b[C]}),f=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var p=this&&this.__awaiter||function(O,U,F,ue){function K(W){return W instanceof F?W:new F(function($){$(W)})}return new(F||(F=Promise))(function(W,$){function ie(E){try{V(ue.next(E))}catch(j){$(j)}}function X(E){try{V(ue.throw(E))}catch(j){$(j)}}function V(E){E.done?W(E.value):K(E.value).then(ie,X)}V((ue=ue.apply(O,U||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const f=i("./createPopup"),u=i("./exchangeCode"),b=i("./helpers");function C(O){return p(this,void 0,void 0,function*(){if(!O.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!O.clientId)throw new Error("You must include the 'clientId' option");if(!O.scopes)throw new Error("You must include the 'scopes' option");const U=(0,b.getRandomString)(),F=(0,b.getRandomString)(),ue=yield(0,b.sha256)(F),K={scope:O.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:U,redirect_uri:O.redirectUrl,client_id:O.clientId,code_challenge_method:"S256",code_challenge:ue},W=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(K).toString()}`,$={state:U,pkceVerifier:F,options:O};if(O.mode==="popup"){const ie=yield(0,f.createPopup)(W);return(0,u.exchangeCode)(ie,$)}if(O.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify($)),window.location.replace(W);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=C,c.authReady=p(void 0,void 0,void 0,function*(){var O;if(typeof window>"u")return;const U=window.location.href,F=localStorage.getItem("__osmAuthTemp");if(new URL(U).searchParams.get("code")){if(!((O=window.opener)===null||O===void 0)&&O.authComplete)window.opener.authComplete(U),window.close();else if(F)try{const ue=JSON.parse(F);yield(0,u.exchangeCode)(U,ue),localStorage.removeItem("__osmAuthTemp")}catch(ue){console.error("OSM Auth Error",ue)}}});const I=()=>{try{const O=localStorage.getItem("__osmAuth");return O?JSON.parse(O).accessToken:void 0}catch{return}};c.getAuthToken=I;const w=()=>!!(0,c.getAuthToken)();c.isLoggedIn=w;function T(){localStorage.removeItem("__osmAuth")}c.logout=T},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const p={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},f=()=>p;c.getConfig=f;function u(b){Object.assign(p,b)}c.configure=u},{}],40:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,I){I===void 0&&(I=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,I,w)}:function(u,b,C,I){I===void 0&&(I=C),u[I]=b[C]}),f=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./api"),c),f(i("./auth"),c),f(i("./config"),c),f(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,b,C,I){I===void 0&&(I=C);var w=Object.getOwnPropertyDescriptor(b,C);(!w||("get"in w?!b.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return b[C]}}),Object.defineProperty(u,I,w)}:function(u,b,C,I){I===void 0&&(I=C),u[I]=b[C]}),f=this&&this.__exportStar||function(u,b){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(b,C)&&p(b,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./changesets"),c),f(i("./features"),c),f(i("./general"),c),f(i("./notes"),c),f(i("./osmPatch"),c),f(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(eI);var zs=eI.exports;const tI=()=>{const[e,t]=_t.useState(!1);_t.useEffect(()=>{t(zs.isLoggedIn())},[]);const i=_t.useCallback(()=>{(async()=>(await zs.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(zs.isLoggedIn()),window.location.reload()))()},[]),a=_t.useCallback(()=>{(async()=>(zs.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},kR=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(zs.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await zs.getUser("me");a(c)})()},[e]),yt.jsx(yt.Fragment,{children:i?yt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):yt.jsx("img",{})})},MR=()=>{const[e,t]=_t.useState(!1),[i,a]=_t.useState(void 0);return _t.useEffect(()=>{t(zs.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await zs.getUser("me");a(c)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(kR,{})}),yt.jsx("div",{children:yt.jsx(tI,{})})]})]})},nI=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},zR=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Ud(e,t,i){return parseInt(e.substr(t,i),16)}function rI(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function M0(e,t,i){return i=i<0?i+6:i>6?i-6:i,rI(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function RR(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],p=e[3],f=e[4]||"";t="#"+a+a+c+c+p+p+f+f}return(i==7||i>8)&&(t=e),t}}function LR(e,t,i){let a;if(t==0){const c=rI(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,p=i*2-c;a=M0(p,c,e*6+2)+M0(p,c,e*6)+M0(p,c,e*6-2)}return"#"+a}function Od(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,LR(e,t,i)}const OR=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},X2={V:"jdenticon_config",n:"config"};var FR={};function jR(e,t){const i=typeof e=="object"&&e||FR[X2.n]||OR[X2.V]||{},a=i.lightness||{},c=i.saturation||{},p="color"in c?c.color:c,f=c.grayscale,u=i.backColor,b=i.padding;function C(w,T){let O=a[w];return O&&O.length>1||(O=T),function(U){return U=O[0]+U*(O[1]-O[0]),U<0?0:U>1?1:U}}function I(w){const T=i.hues;let O;return T&&T.length>0&&(O=T[0|.999*w*T.length]),typeof O=="number"?(O/360%1+1)%1:w}return{W:I,o:typeof p=="number"?p:.5,D:typeof f=="number"?f:0,p:C("color",[.4,.8]),F:C("grayscale",[.3,.9]),G:RR(u),X:typeof e=="number"?e:typeof b=="number"?b:t}}let rm=class{constructor(t,i){this.x=t,this.y=i}};class iI{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const p=this.q+this.H,f=this.t+this.H,u=this.Y;return u===1?new rm(p-i-(c||0),this.t+t):u===2?new rm(p-t-(a||0),f-i-(c||0)):u===3?new rm(this.q+i,f-t-(a||0)):new rm(this.q+t,this.t+i)}}const DR=new iI(0,0,0,0);class BR{constructor(t){this.J=t,this.u=DR}g(t,i){const a=i?-2:2,c=[];for(let p=i?t.length-2:0;p<t.length&&p>=0;p+=a)c.push(this.u.I(t[p],t[p+1]));this.J.g(c)}h(t,i,a,c){const p=this.u.I(t,i,a,a);this.J.h(p,a,c)}i(t,i,a,c,p){this.g([t,i,t+a,i,t+a,i+c,t,i+c],p)}j(t,i,a,c,p,f){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((p||0)%4*2,2),this.g(u,f)}K(t,i,a,c,p){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],p)}}function NR(e,t,i,a){e=e%14;let c,p,f,u,b,C;e?e==1?(f=0|i*.5,u=0|i*.8,t.j(i-f,0,f,u,2)):e==2?(f=0|i/3,t.i(f,f,i-f,i-f)):e==3?(b=i*.1,C=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(C,C,i-b-C,i-b-C)):e==4?(p=0|i*.15,f=0|i*.5,t.h(i-f-p,i-f-p,f)):e==5?(b=i*.1,C=b*4,C>3&&(C=0|C),t.i(0,0,i,i),t.g([C,C,i-b,C,C+(i-C-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,C=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(C,C,i-C-b,i-C-b,!0)):e==10?(b=i*.12,C=b*3,t.i(0,0,i,i),t.h(C,C,i-b-C,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(p=i*.25,t.i(0,0,i,i),t.K(p,p,i-p,i-p,!0)):!a&&(p=i*.4,f=i*1.2,t.h(p,p,f)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function q2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function UR(e,t){return e=t.W(e),[Od(e,t.D,t.F(0)),Od(e,t.o,t.p(.5)),Od(e,t.D,t.F(1)),Od(e,t.o,t.p(1)),Od(e,t.o,t.p(0))]}function $R(e,t,i){const a=jR(i,.08);a.G&&e.m(a.G);let c=e.k;const p=.5+c*a.X|0;c-=p*2;const f=new BR(e),u=0|c/4,b=0|p+c/2-u*2,C=0|p+c/2-u*2;function I(ue,K,W,$,ie){const X=Ud(t,W,1);let V=$?Ud(t,$,1):0;e.L(T[O[ue]]);for(let E=0;E<ie.length;E++)f.u=new iI(b+ie[E][0]*u,C+ie[E][1]*u,u,V++%4),K(X,f,u,E);e.M()}const w=Ud(t,-7)/268435455,T=UR(w,a),O=[];let U;function F(ue){if(ue.indexOf(U)>=0){for(let K=0;K<ue.length;K++)if(O.indexOf(ue[K])>=0)return!0}}for(let ue=0;ue<3;ue++)U=Ud(t,8+ue,1)%T.length,(F([0,4])||F([2,3]))&&(U=1),O.push(U);I(0,q2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,q2,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,NR,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function VR(e){var a=0,c=0,p=encodeURI(e)+"%80",f=[],u,b=[],C=1732584193,I=4023233417,w=~C,T=~I,O=3285377520,U=[C,I,w,T,O],F=0,ue="";function K(W,$){return W<<$|W>>>32-$}for(;a<p.length;c++)f[c>>2]=f[c>>2]|(p[a]=="%"?parseInt(p.substring(a+1,a+=3),16):p.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,f[u-1]=c*8-8;F<u;F+=16){for(a=0;a<80;a++)c=K(C,5)+O+(a<20?(I&w^~I&T)+1518500249:a<40?(I^w^T)+1859775393:a<60?(I&w^I&T^w&T)+2400959708:(I^w^T)+3395469782)+(b[a]=a<16?f[F+a]|0:K(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),O=T,T=w,w=K(I,30),I=C,C=c;U[0]=C=U[0]+C|0,U[1]=I=U[1]+I|0,U[2]=w=U[2]+w|0,U[3]=T=U[3]+T|0,U[4]=O=U[4]+O|0}for(a=0;a<40;a++)ue+=(U[a>>3]>>>(7-(a&7))*4&15).toString(16);return ue}function GR(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function HR(e){return VR(e==null?"":""+e)}function Uc(e){return(e*10+.5|0)/10}class WR{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Uc(t[a].x)+" "+Uc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,p=Uc(i/2),f=Uc(i),u="a"+p+","+p+" 0 1,"+c+" ";this.v+="M"+Uc(t.x)+" "+Uc(t.y+i/2)+u+f+",0"+u+-f+",0"}}class ZR{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Ud(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new WR)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const XR={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class qR{constructor(t){this.k=t,this.C='<svg xmlns="'+XR.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function KR(e,t,i){const a=new qR(t);return $R(new ZR(a),GR(e)||HR(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const YR=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:KR(e.properties.user||"noname",t)}})}),JR=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var QR={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const eL=({viewState:e})=>{const[t,i]=_t.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return _t.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(oa,{icon:QR,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var oI={};class qi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const p=i[c],f=t+p,u=Math.abs(t)<Math.abs(p)?t-(f-p):p-(f-t);u&&(i[a++]=u),t=f}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,p,f=0;if(i>0){for(f=t[--i];i>0&&(a=f,c=t[--i],f=a+c,p=c-(f-a),!p););i>0&&(p<0&&t[i-1]<0||p>0&&t[i-1]>0)&&(c=p*2,a=f+c,c==a-f&&(f=a))}return f}}function*tL(e){for(const t of e)yield*t}function sI(e){return Array.from(tL(e))}function uh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,p=new Array(c);++a<c;)p[a]=e+a*i;return p}var pn=1e-6,Rf=1e-12,zn=Math.PI,Dr=zn/2,ug=zn/4,lo=zn*2,lr=180/zn,mn=zn/180,Un=Math.abs,Dh=Math.atan,uo=Math.atan2,ln=Math.cos,im=Math.ceil,aI=Math.exp,d_=Math.hypot,cg=Math.log,z0=Math.pow,Qt=Math.sin,us=Math.sign||function(e){return e>0?1:e<0?-1:0},vi=Math.sqrt,J1=Math.tan;function lI(e){return e>1?0:e<-1?zn:Math.acos(e)}function co(e){return e>1?Dr:e<-1?-Dr:Math.asin(e)}function K2(e){return(e=Qt(e/2))*e}function kr(){}function hg(e,t){e&&J2.hasOwnProperty(e.type)&&J2[e.type](e,t)}var Y2={Feature:function(e,t){hg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)hg(i[a].geometry,t)}},J2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){f_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)f_(i[a],t,0)},Polygon:function(e,t){Q2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Q2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)hg(i[a],t)}};function f_(e,t,i){var a=-1,c=e.length-i,p;for(t.lineStart();++a<c;)p=e[a],t.point(p[0],p[1],p[2]);t.lineEnd()}function Q2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)f_(e[i],t,1);t.polygonEnd()}function Ps(e,t){e&&Y2.hasOwnProperty(e.type)?Y2[e.type](e,t):hg(e,t)}var dg=new qi,fg=new qi,uI,cI,p_,m_,g_,sa={point:kr,lineStart:kr,lineEnd:kr,polygonStart:function(){dg=new qi,sa.lineStart=nL,sa.lineEnd=rL},polygonEnd:function(){var e=+dg;fg.add(e<0?lo+e:e),this.lineStart=this.lineEnd=this.point=kr},sphere:function(){fg.add(lo)}};function nL(){sa.point=iL}function rL(){hI(uI,cI)}function iL(e,t){sa.point=hI,uI=e,cI=t,e*=mn,t*=mn,p_=e,m_=ln(t=t/2+ug),g_=Qt(t)}function hI(e,t){e*=mn,t*=mn,t=t/2+ug;var i=e-p_,a=i>=0?1:-1,c=a*i,p=ln(t),f=Qt(t),u=g_*f,b=m_*p+u*ln(c),C=u*a*Qt(c);dg.add(uo(C,b)),p_=e,m_=p,g_=f}function oL(e){return fg=new qi,Ps(e,sa),fg*2}function pg(e){return[uo(e[1],e[0]),co(e[2])]}function Ju(e){var t=e[0],i=e[1],a=ln(i);return[a*ln(t),a*Qt(t),Qt(i)]}function om(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ph(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function R0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function sm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mg(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ar,xo,Or,No,ju,dI,fI,vh,sf,Ul,Ja,Ua={point:y_,lineStart:eS,lineEnd:tS,polygonStart:function(){Ua.point=mI,Ua.lineStart=sL,Ua.lineEnd=aL,sf=new qi,sa.polygonStart()},polygonEnd:function(){sa.polygonEnd(),Ua.point=y_,Ua.lineStart=eS,Ua.lineEnd=tS,dg<0?(Ar=-(Or=180),xo=-(No=90)):sf>pn?No=90:sf<-pn&&(xo=-90),Ja[0]=Ar,Ja[1]=Or},sphere:function(){Ar=-(Or=180),xo=-(No=90)}};function y_(e,t){Ul.push(Ja=[Ar=e,Or=e]),t<xo&&(xo=t),t>No&&(No=t)}function pI(e,t){var i=Ju([e*mn,t*mn]);if(vh){var a=Ph(vh,i),c=[a[1],-a[0],0],p=Ph(c,a);mg(p),p=pg(p);var f=e-ju,u=f>0?1:-1,b=p[0]*lr*u,C,I=Un(f)>180;I^(u*ju<b&&b<u*e)?(C=p[1]*lr,C>No&&(No=C)):(b=(b+360)%360-180,I^(u*ju<b&&b<u*e)?(C=-p[1]*lr,C<xo&&(xo=C)):(t<xo&&(xo=t),t>No&&(No=t))),I?e<ju?Bo(Ar,e)>Bo(Ar,Or)&&(Or=e):Bo(e,Or)>Bo(Ar,Or)&&(Ar=e):Or>=Ar?(e<Ar&&(Ar=e),e>Or&&(Or=e)):e>ju?Bo(Ar,e)>Bo(Ar,Or)&&(Or=e):Bo(e,Or)>Bo(Ar,Or)&&(Ar=e)}else Ul.push(Ja=[Ar=e,Or=e]);t<xo&&(xo=t),t>No&&(No=t),vh=i,ju=e}function eS(){Ua.point=pI}function tS(){Ja[0]=Ar,Ja[1]=Or,Ua.point=y_,vh=null}function mI(e,t){if(vh){var i=e-ju;sf.add(Un(i)>180?i+(i>0?360:-360):i)}else dI=e,fI=t;sa.point(e,t),pI(e,t)}function sL(){sa.lineStart()}function aL(){mI(dI,fI),sa.lineEnd(),Un(sf)>pn&&(Ar=-(Or=180)),Ja[0]=Ar,Ja[1]=Or,vh=null}function Bo(e,t){return(t-=e)<0?t+360:t}function lL(e,t){return e[0]-t[0]}function nS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function uL(e){var t,i,a,c,p,f,u;if(No=Or=-(Ar=xo=1/0),Ul=[],Ps(e,Ua),i=Ul.length){for(Ul.sort(lL),t=1,a=Ul[0],p=[a];t<i;++t)c=Ul[t],nS(a,c[0])||nS(a,c[1])?(Bo(a[0],c[1])>Bo(a[0],a[1])&&(a[1]=c[1]),Bo(c[0],a[1])>Bo(a[0],a[1])&&(a[0]=c[0])):p.push(a=c);for(f=-1/0,i=p.length-1,t=0,a=p[i];t<=i;a=c,++t)c=p[t],(u=Bo(a[1],c[0]))>f&&(f=u,Ar=c[0],Or=a[1])}return Ul=Ja=null,Ar===1/0||xo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ar,xo],[Or,No]]}var $d,gg,yg,vg,_g,xg,wg,bg,v_,__,x_,gI,yI,io,oo,so,Rs={sphere:kr,point:Q1,lineStart:rS,lineEnd:iS,polygonStart:function(){Rs.lineStart=dL,Rs.lineEnd=fL},polygonEnd:function(){Rs.lineStart=rS,Rs.lineEnd=iS}};function Q1(e,t){e*=mn,t*=mn;var i=ln(t);Zf(i*ln(e),i*Qt(e),Qt(t))}function Zf(e,t,i){++$d,yg+=(e-yg)/$d,vg+=(t-vg)/$d,_g+=(i-_g)/$d}function rS(){Rs.point=cL}function cL(e,t){e*=mn,t*=mn;var i=ln(t);io=i*ln(e),oo=i*Qt(e),so=Qt(t),Rs.point=hL,Zf(io,oo,so)}function hL(e,t){e*=mn,t*=mn;var i=ln(t),a=i*ln(e),c=i*Qt(e),p=Qt(t),f=uo(vi((f=oo*p-so*c)*f+(f=so*a-io*p)*f+(f=io*c-oo*a)*f),io*a+oo*c+so*p);gg+=f,xg+=f*(io+(io=a)),wg+=f*(oo+(oo=c)),bg+=f*(so+(so=p)),Zf(io,oo,so)}function iS(){Rs.point=Q1}function dL(){Rs.point=pL}function fL(){vI(gI,yI),Rs.point=Q1}function pL(e,t){gI=e,yI=t,e*=mn,t*=mn,Rs.point=vI;var i=ln(t);io=i*ln(e),oo=i*Qt(e),so=Qt(t),Zf(io,oo,so)}function vI(e,t){e*=mn,t*=mn;var i=ln(t),a=i*ln(e),c=i*Qt(e),p=Qt(t),f=oo*p-so*c,u=so*a-io*p,b=io*c-oo*a,C=d_(f,u,b),I=co(C),w=C&&-I/C;v_.add(w*f),__.add(w*u),x_.add(w*b),gg+=I,xg+=I*(io+(io=a)),wg+=I*(oo+(oo=c)),bg+=I*(so+(so=p)),Zf(io,oo,so)}function mL(e){$d=gg=yg=vg=_g=xg=wg=bg=0,v_=new qi,__=new qi,x_=new qi,Ps(e,Rs);var t=+v_,i=+__,a=+x_,c=d_(t,i,a);return c<Rf&&(t=xg,i=wg,a=bg,gg<pn&&(t=yg,i=vg,a=_g),c=d_(t,i,a),c<Rf)?[NaN,NaN]:[uo(i,t)*lr,co(a/c)*lr]}function $c(e){return function(){return e}}function w_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function b_(e,t){return[Un(e)>zn?e+Math.round(-e/lo)*lo:e,t]}b_.invert=b_;function ex(e,t,i){return(e%=lo)?t||i?w_(sS(e),aS(t,i)):sS(e):t||i?aS(t,i):b_}function oS(e){return function(t,i){return t+=e,[t>zn?t-lo:t<-zn?t+lo:t,i]}}function sS(e){var t=oS(e);return t.invert=oS(-e),t}function aS(e,t){var i=ln(e),a=Qt(e),c=ln(t),p=Qt(t);function f(u,b){var C=ln(b),I=ln(u)*C,w=Qt(u)*C,T=Qt(b),O=T*i+I*a;return[uo(w*c-O*p,I*i-T*a),co(O*c+w*p)]}return f.invert=function(u,b){var C=ln(b),I=ln(u)*C,w=Qt(u)*C,T=Qt(b),O=T*c-w*p;return[uo(w*c+T*p,I*i+O*a),co(O*i-I*a)]},f}function _I(e){e=ex(e[0]*mn,e[1]*mn,e.length>2?e[2]*mn:0);function t(i){return i=e(i[0]*mn,i[1]*mn),i[0]*=lr,i[1]*=lr,i}return t.invert=function(i){return i=e.invert(i[0]*mn,i[1]*mn),i[0]*=lr,i[1]*=lr,i},t}function xI(e,t,i,a,c,p){if(i){var f=ln(t),u=Qt(t),b=a*i;c==null?(c=t+a*lo,p=t-b/2):(c=lS(f,c),p=lS(f,p),(a>0?c<p:c>p)&&(c+=a*lo));for(var C,I=c;a>0?I>p:I<p;I-=b)C=pg([f,-u*ln(I),-u*Qt(I)]),e.point(C[0],C[1])}}function lS(e,t){t=Ju(t),t[0]-=e,mg(t);var i=lI(-t[1]);return((-t[2]<0?-i:i)+lo-pn)%lo}function gL(){var e=$c([0,0]),t=$c(90),i=$c(6),a,c,p={point:f};function f(b,C){a.push(b=c(b,C)),b[0]*=lr,b[1]*=lr}function u(){var b=e.apply(this,arguments),C=t.apply(this,arguments)*mn,I=i.apply(this,arguments)*mn;return a=[],c=ex(-b[0]*mn,-b[1]*mn,0).invert,xI(p,C,I,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return u.center=function(b){return arguments.length?(e=typeof b=="function"?b:$c([+b[0],+b[1]]),u):e},u.radius=function(b){return arguments.length?(t=typeof b=="function"?b:$c(+b),u):t},u.precision=function(b){return arguments.length?(i=typeof b=="function"?b:$c(+b),u):i},u}function wI(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:kr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Im(e,t){return Un(e[0]-t[0])<pn&&Un(e[1]-t[1])<pn}function am(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function bI(e,t,i,a,c){var p=[],f=[],u,b;if(e.forEach(function(U){if(!((F=U.length-1)<=0)){var F,ue=U[0],K=U[F],W;if(Im(ue,K)){if(!ue[2]&&!K[2]){for(c.lineStart(),u=0;u<F;++u)c.point((ue=U[u])[0],ue[1]);c.lineEnd();return}K[0]+=2*pn}p.push(W=new am(ue,U,null,!0)),f.push(W.o=new am(ue,null,W,!1)),p.push(W=new am(K,U,null,!1)),f.push(W.o=new am(K,null,W,!0))}}),!!p.length){for(f.sort(t),uS(p),uS(f),u=0,b=f.length;u<b;++u)f[u].e=i=!i;for(var C=p[0],I,w;;){for(var T=C,O=!0;T.v;)if((T=T.n)===C)return;I=T.z,c.lineStart();do{if(T.v=T.o.v=!0,T.e){if(O)for(u=0,b=I.length;u<b;++u)c.point((w=I[u])[0],w[1]);else a(T.x,T.n.x,1,c);T=T.n}else{if(O)for(I=T.p.z,u=I.length-1;u>=0;--u)c.point((w=I[u])[0],w[1]);else a(T.x,T.p.x,-1,c);T=T.p}T=T.o,I=T.z,O=!O}while(!T.v);c.lineEnd()}}}function uS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function L0(e){return Un(e[0])<=zn?e[0]:us(e[0])*((Un(e[0])+zn)%lo-zn)}function SI(e,t){var i=L0(t),a=t[1],c=Qt(a),p=[Qt(i),-ln(i),0],f=0,u=0,b=new qi;c===1?a=Dr+pn:c===-1&&(a=-Dr-pn);for(var C=0,I=e.length;C<I;++C)if(T=(w=e[C]).length)for(var w,T,O=w[T-1],U=L0(O),F=O[1]/2+ug,ue=Qt(F),K=ln(F),W=0;W<T;++W,U=ie,ue=V,K=E,O=$){var $=w[W],ie=L0($),X=$[1]/2+ug,V=Qt(X),E=ln(X),j=ie-U,B=j>=0?1:-1,ee=B*j,q=ee>zn,me=ue*V;if(b.add(uo(me*B*Qt(ee),K*E+me*ln(ee))),f+=q?j+B*lo:j,q^U>=i^ie>=i){var _e=Ph(Ju(O),Ju($));mg(_e);var de=Ph(p,_e);mg(de);var oe=(q^j>=0?-1:1)*co(de[2]);(a>oe||a===oe&&(_e[0]||_e[1]))&&(u+=q^j>=0?1:-1)}}return(f<-pn||f<pn&&b<-Rf)^u&1}function EI(e,t,i,a){return function(c){var p=t(c),f=wI(),u=t(f),b=!1,C,I,w,T={point:O,lineStart:F,lineEnd:ue,polygonStart:function(){T.point=K,T.lineStart=W,T.lineEnd=$,I=[],C=[]},polygonEnd:function(){T.point=O,T.lineStart=F,T.lineEnd=ue,I=sI(I);var ie=SI(C,a);I.length?(b||(c.polygonStart(),b=!0),bI(I,vL,ie,i,c)):ie&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),I=C=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function O(ie,X){e(ie,X)&&c.point(ie,X)}function U(ie,X){p.point(ie,X)}function F(){T.point=U,p.lineStart()}function ue(){T.point=O,p.lineEnd()}function K(ie,X){w.push([ie,X]),u.point(ie,X)}function W(){u.lineStart(),w=[]}function $(){K(w[0][0],w[0][1]),u.lineEnd();var ie=u.clean(),X=f.result(),V,E=X.length,j,B,ee;if(w.pop(),C.push(w),w=null,!!E){if(ie&1){if(B=X[0],(j=B.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),V=0;V<j;++V)c.point((ee=B[V])[0],ee[1]);c.lineEnd()}return}E>1&&ie&2&&X.push(X.pop().concat(X.shift())),I.push(X.filter(yL))}}return T}}function yL(e){return e.length>1}function vL(e,t){return((e=e.x)[0]<0?e[1]-Dr-pn:Dr-e[1])-((t=t.x)[0]<0?t[1]-Dr-pn:Dr-t[1])}const S_=EI(function(){return!0},_L,wL,[-zn,-Dr]);function _L(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(p,f){var u=p>0?zn:-zn,b=Un(p-t);Un(b-zn)<pn?(e.point(t,i=(i+f)/2>0?Dr:-Dr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(p,i),c=0):a!==u&&b>=zn&&(Un(t-a)<pn&&(t-=a*pn),Un(p-u)<pn&&(p-=u*pn),i=xL(t,i,p,f),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=p,i=f),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function xL(e,t,i,a){var c,p,f=Qt(e-i);return Un(f)>pn?Dh((Qt(t)*(p=ln(a))*Qt(i)-Qt(a)*(c=ln(t))*Qt(e))/(c*p*f)):(t+a)/2}function wL(e,t,i,a){var c;if(e==null)c=i*Dr,a.point(-zn,c),a.point(0,c),a.point(zn,c),a.point(zn,0),a.point(zn,-c),a.point(0,-c),a.point(-zn,-c),a.point(-zn,0),a.point(-zn,c);else if(Un(e[0]-t[0])>pn){var p=e[0]<t[0]?zn:-zn;c=i*p/2,a.point(-p,c),a.point(0,c),a.point(p,c)}else a.point(t[0],t[1])}function TI(e){var t=ln(e),i=6*mn,a=t>0,c=Un(t)>pn;function p(I,w,T,O){xI(O,e,i,T,I,w)}function f(I,w){return ln(I)*ln(w)>t}function u(I){var w,T,O,U,F;return{lineStart:function(){U=O=!1,F=1},point:function(ue,K){var W=[ue,K],$,ie=f(ue,K),X=a?ie?0:C(ue,K):ie?C(ue+(ue<0?zn:-zn),K):0;if(!w&&(U=O=ie)&&I.lineStart(),ie!==O&&($=b(w,W),(!$||Im(w,$)||Im(W,$))&&(W[2]=1)),ie!==O)F=0,ie?(I.lineStart(),$=b(W,w),I.point($[0],$[1])):($=b(w,W),I.point($[0],$[1],2),I.lineEnd()),w=$;else if(c&&w&&a^ie){var V;!(X&T)&&(V=b(W,w,!0))&&(F=0,a?(I.lineStart(),I.point(V[0][0],V[0][1]),I.point(V[1][0],V[1][1]),I.lineEnd()):(I.point(V[1][0],V[1][1]),I.lineEnd(),I.lineStart(),I.point(V[0][0],V[0][1],3)))}ie&&(!w||!Im(w,W))&&I.point(W[0],W[1]),w=W,O=ie,T=X},lineEnd:function(){O&&I.lineEnd(),w=null},clean:function(){return F|(U&&O)<<1}}}function b(I,w,T){var O=Ju(I),U=Ju(w),F=[1,0,0],ue=Ph(O,U),K=om(ue,ue),W=ue[0],$=K-W*W;if(!$)return!T&&I;var ie=t*K/$,X=-t*W/$,V=Ph(F,ue),E=sm(F,ie),j=sm(ue,X);R0(E,j);var B=V,ee=om(E,B),q=om(B,B),me=ee*ee-q*(om(E,E)-1);if(!(me<0)){var _e=vi(me),de=sm(B,(-ee-_e)/q);if(R0(de,E),de=pg(de),!T)return de;var oe=I[0],le=w[0],Q=I[1],te=w[1],he;le<oe&&(he=oe,oe=le,le=he);var be=le-oe,Ee=Un(be-zn)<pn,Be=Ee||be<pn;if(!Ee&&te<Q&&(he=Q,Q=te,te=he),Be?Ee?Q+te>0^de[1]<(Un(de[0]-oe)<pn?Q:te):Q<=de[1]&&de[1]<=te:be>zn^(oe<=de[0]&&de[0]<=le)){var ke=sm(B,(-ee+_e)/q);return R0(ke,E),[de,pg(ke)]}}}function C(I,w){var T=a?e:zn-e,O=0;return I<-T?O|=1:I>T&&(O|=2),w<-T?O|=4:w>T&&(O|=8),O}return EI(f,u,p,a?[0,-e]:[-zn,e-zn])}function bL(e,t,i,a,c,p){var f=e[0],u=e[1],b=t[0],C=t[1],I=0,w=1,T=b-f,O=C-u,U;if(U=i-f,!(!T&&U>0)){if(U/=T,T<0){if(U<I)return;U<w&&(w=U)}else if(T>0){if(U>w)return;U>I&&(I=U)}if(U=c-f,!(!T&&U<0)){if(U/=T,T<0){if(U>w)return;U>I&&(I=U)}else if(T>0){if(U<I)return;U<w&&(w=U)}if(U=a-u,!(!O&&U>0)){if(U/=O,O<0){if(U<I)return;U<w&&(w=U)}else if(O>0){if(U>w)return;U>I&&(I=U)}if(U=p-u,!(!O&&U<0)){if(U/=O,O<0){if(U>w)return;U>I&&(I=U)}else if(O>0){if(U<I)return;U<w&&(w=U)}return I>0&&(e[0]=f+I*T,e[1]=u+I*O),w<1&&(t[0]=f+w*T,t[1]=u+w*O),!0}}}}}var Vd=1e9,lm=-Vd;function ny(e,t,i,a){function c(C,I){return e<=C&&C<=i&&t<=I&&I<=a}function p(C,I,w,T){var O=0,U=0;if(C==null||(O=f(C,w))!==(U=f(I,w))||b(C,I)<0^w>0)do T.point(O===0||O===3?e:i,O>1?a:t);while((O=(O+w+4)%4)!==U);else T.point(I[0],I[1])}function f(C,I){return Un(C[0]-e)<pn?I>0?0:3:Un(C[0]-i)<pn?I>0?2:1:Un(C[1]-t)<pn?I>0?1:0:I>0?3:2}function u(C,I){return b(C.x,I.x)}function b(C,I){var w=f(C,1),T=f(I,1);return w!==T?w-T:w===0?I[1]-C[1]:w===1?C[0]-I[0]:w===2?C[1]-I[1]:I[0]-C[0]}return function(C){var I=C,w=wI(),T,O,U,F,ue,K,W,$,ie,X,V,E={point:j,lineStart:me,lineEnd:_e,polygonStart:ee,polygonEnd:q};function j(oe,le){c(oe,le)&&I.point(oe,le)}function B(){for(var oe=0,le=0,Q=O.length;le<Q;++le)for(var te=O[le],he=1,be=te.length,Ee=te[0],Be,ke,ze=Ee[0],We=Ee[1];he<be;++he)Be=ze,ke=We,Ee=te[he],ze=Ee[0],We=Ee[1],ke<=a?We>a&&(ze-Be)*(a-ke)>(We-ke)*(e-Be)&&++oe:We<=a&&(ze-Be)*(a-ke)<(We-ke)*(e-Be)&&--oe;return oe}function ee(){I=w,T=[],O=[],V=!0}function q(){var oe=B(),le=V&&oe,Q=(T=sI(T)).length;(le||Q)&&(C.polygonStart(),le&&(C.lineStart(),p(null,null,1,C),C.lineEnd()),Q&&bI(T,u,oe,p,C),C.polygonEnd()),I=C,T=O=U=null}function me(){E.point=de,O&&O.push(U=[]),X=!0,ie=!1,W=$=NaN}function _e(){T&&(de(F,ue),K&&ie&&w.rejoin(),T.push(w.result())),E.point=j,ie&&I.lineEnd()}function de(oe,le){var Q=c(oe,le);if(O&&U.push([oe,le]),X)F=oe,ue=le,K=Q,X=!1,Q&&(I.lineStart(),I.point(oe,le));else if(Q&&ie)I.point(oe,le);else{var te=[W=Math.max(lm,Math.min(Vd,W)),$=Math.max(lm,Math.min(Vd,$))],he=[oe=Math.max(lm,Math.min(Vd,oe)),le=Math.max(lm,Math.min(Vd,le))];bL(te,he,e,t,i,a)?(ie||(I.lineStart(),I.point(te[0],te[1])),I.point(he[0],he[1]),Q||I.lineEnd(),V=!1):Q&&(I.lineStart(),I.point(oe,le),V=!1)}W=oe,$=le,ie=Q}return E}}function SL(){var e=0,t=0,i=960,a=500,c,p,f;return f={stream:function(u){return c&&p===u?c:c=ny(e,t,i,a)(p=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=p=null,f):[[e,t],[i,a]]}}}var E_,T_,Am,Pm,kh={sphere:kr,point:kr,lineStart:EL,lineEnd:kr,polygonStart:kr,polygonEnd:kr};function EL(){kh.point=CL,kh.lineEnd=TL}function TL(){kh.point=kh.lineEnd=kr}function CL(e,t){e*=mn,t*=mn,T_=e,Am=Qt(t),Pm=ln(t),kh.point=IL}function IL(e,t){e*=mn,t*=mn;var i=Qt(t),a=ln(t),c=Un(e-T_),p=ln(c),f=Qt(c),u=a*f,b=Pm*i-Am*a*p,C=Am*i+Pm*a*p;E_.add(uo(vi(u*u+b*b),C)),T_=e,Am=i,Pm=a}function CI(e){return E_=new qi,Ps(e,kh),+E_}var C_=[null,null],AL={type:"LineString",coordinates:C_};function Sg(e,t){return C_[0]=e,C_[1]=t,CI(AL)}var cS={Feature:function(e,t){return Eg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Eg(i[a].geometry,t))return!0;return!1}},hS={Sphere:function(){return!0},Point:function(e,t){return dS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(dS(i[a],t))return!0;return!1},LineString:function(e,t){return fS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(fS(i[a],t))return!0;return!1},Polygon:function(e,t){return pS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(pS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Eg(i[a],t))return!0;return!1}};function Eg(e,t){return e&&hS.hasOwnProperty(e.type)?hS[e.type](e,t):!1}function dS(e,t){return Sg(e,t)===0}function fS(e,t){for(var i,a,c,p=0,f=e.length;p<f;p++){if(a=Sg(e[p],t),a===0||p>0&&(c=Sg(e[p],e[p-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Rf*c))return!0;i=a}return!1}function pS(e,t){return!!SI(e.map(PL),II(t))}function PL(e){return e=e.map(II),e.pop(),e}function II(e){return[e[0]*mn,e[1]*mn]}function kL(e,t){return(e&&cS.hasOwnProperty(e.type)?cS[e.type]:Eg)(e,t)}function mS(e,t,i){var a=uh(e,t-pn,i).concat(t);return function(c){return a.map(function(p){return[c,p]})}}function gS(e,t,i){var a=uh(e,t-pn,i).concat(t);return function(c){return a.map(function(p){return[p,c]})}}function AI(){var e,t,i,a,c,p,f,u,b=10,C=b,I=90,w=360,T,O,U,F,ue=2.5;function K(){return{type:"MultiLineString",coordinates:W()}}function W(){return uh(im(a/I)*I,i,I).map(U).concat(uh(im(u/w)*w,f,w).map(F)).concat(uh(im(t/b)*b,e,b).filter(function($){return Un($%I)>pn}).map(T)).concat(uh(im(p/C)*C,c,C).filter(function($){return Un($%w)>pn}).map(O))}return K.lines=function(){return W().map(function($){return{type:"LineString",coordinates:$}})},K.outline=function(){return{type:"Polygon",coordinates:[U(a).concat(F(f).slice(1),U(i).reverse().slice(1),F(u).reverse().slice(1))]}},K.extent=function($){return arguments.length?K.extentMajor($).extentMinor($):K.extentMinor()},K.extentMajor=function($){return arguments.length?(a=+$[0][0],i=+$[1][0],u=+$[0][1],f=+$[1][1],a>i&&($=a,a=i,i=$),u>f&&($=u,u=f,f=$),K.precision(ue)):[[a,u],[i,f]]},K.extentMinor=function($){return arguments.length?(t=+$[0][0],e=+$[1][0],p=+$[0][1],c=+$[1][1],t>e&&($=t,t=e,e=$),p>c&&($=p,p=c,c=$),K.precision(ue)):[[t,p],[e,c]]},K.step=function($){return arguments.length?K.stepMajor($).stepMinor($):K.stepMinor()},K.stepMajor=function($){return arguments.length?(I=+$[0],w=+$[1],K):[I,w]},K.stepMinor=function($){return arguments.length?(b=+$[0],C=+$[1],K):[b,C]},K.precision=function($){return arguments.length?(ue=+$,T=mS(p,c,90),O=gS(t,e,ue),U=mS(u,f,90),F=gS(a,i,ue),K):ue},K.extentMajor([[-180,-90+pn],[180,90-pn]]).extentMinor([[-180,-80-pn],[180,80+pn]])}function ML(){return AI()()}function zL(e,t){var i=e[0]*mn,a=e[1]*mn,c=t[0]*mn,p=t[1]*mn,f=ln(a),u=Qt(a),b=ln(p),C=Qt(p),I=f*ln(i),w=f*Qt(i),T=b*ln(c),O=b*Qt(c),U=2*co(vi(K2(p-a)+f*b*K2(c-i))),F=Qt(U),ue=U?function(K){var W=Qt(K*=U)/F,$=Qt(U-K)/F,ie=$*I+W*T,X=$*w+W*O,V=$*u+W*C;return[uo(X,ie)*lr,uo(V,vi(ie*ie+X*X))*lr]}:function(){return[i*lr,a*lr]};return ue.distance=U,ue}const Lf=e=>e;var O0=new qi,I_=new qi,PI,kI,A_,P_,Hl={point:kr,lineStart:kr,lineEnd:kr,polygonStart:function(){Hl.lineStart=RL,Hl.lineEnd=OL},polygonEnd:function(){Hl.lineStart=Hl.lineEnd=Hl.point=kr,O0.add(Un(I_)),I_=new qi},result:function(){var e=O0/2;return O0=new qi,e}};function RL(){Hl.point=LL}function LL(e,t){Hl.point=MI,PI=A_=e,kI=P_=t}function MI(e,t){I_.add(P_*e-A_*t),A_=e,P_=t}function OL(){MI(PI,kI)}const yS=Hl;var Mh=1/0,Tg=Mh,Of=-Mh,Cg=Of,FL={point:jL,lineStart:kr,lineEnd:kr,polygonStart:kr,polygonEnd:kr,result:function(){var e=[[Mh,Tg],[Of,Cg]];return Of=Cg=-(Tg=Mh=1/0),e}};function jL(e,t){e<Mh&&(Mh=e),e>Of&&(Of=e),t<Tg&&(Tg=t),t>Cg&&(Cg=t)}const Ig=FL;var k_=0,M_=0,Gd=0,Ag=0,Pg=0,ch=0,z_=0,R_=0,Hd=0,zI,RI,Qs,ea,ks={point:Qu,lineStart:vS,lineEnd:_S,polygonStart:function(){ks.lineStart=NL,ks.lineEnd=UL},polygonEnd:function(){ks.point=Qu,ks.lineStart=vS,ks.lineEnd=_S},result:function(){var e=Hd?[z_/Hd,R_/Hd]:ch?[Ag/ch,Pg/ch]:Gd?[k_/Gd,M_/Gd]:[NaN,NaN];return k_=M_=Gd=Ag=Pg=ch=z_=R_=Hd=0,e}};function Qu(e,t){k_+=e,M_+=t,++Gd}function vS(){ks.point=DL}function DL(e,t){ks.point=BL,Qu(Qs=e,ea=t)}function BL(e,t){var i=e-Qs,a=t-ea,c=vi(i*i+a*a);Ag+=c*(Qs+e)/2,Pg+=c*(ea+t)/2,ch+=c,Qu(Qs=e,ea=t)}function _S(){ks.point=Qu}function NL(){ks.point=$L}function UL(){LI(zI,RI)}function $L(e,t){ks.point=LI,Qu(zI=Qs=e,RI=ea=t)}function LI(e,t){var i=e-Qs,a=t-ea,c=vi(i*i+a*a);Ag+=c*(Qs+e)/2,Pg+=c*(ea+t)/2,ch+=c,c=ea*e-Qs*t,z_+=c*(Qs+e),R_+=c*(ea+t),Hd+=c*3,Qu(Qs=e,ea=t)}const xS=ks;function OI(e){this._context=e}OI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,lo);break}}},result:kr};var L_=new qi,F0,FI,jI,Wd,Zd,kg={point:kr,lineStart:function(){kg.point=VL},lineEnd:function(){F0&&DI(FI,jI),kg.point=kr},polygonStart:function(){F0=!0},polygonEnd:function(){F0=null},result:function(){var e=+L_;return L_=new qi,e}};function VL(e,t){kg.point=DI,FI=Wd=e,jI=Zd=t}function DI(e,t){Wd-=e,Zd-=t,L_.add(vi(Wd*Wd+Zd*Zd)),Wd=e,Zd=t}const wS=kg;function BI(){this._string=[]}BI.prototype={_radius:4.5,_circle:bS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=bS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function bS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function GL(e,t){var i=4.5,a,c;function p(f){return f&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Ps(f,a(c))),c.result()}return p.area=function(f){return Ps(f,a(yS)),yS.result()},p.measure=function(f){return Ps(f,a(wS)),wS.result()},p.bounds=function(f){return Ps(f,a(Ig)),Ig.result()},p.centroid=function(f){return Ps(f,a(xS)),xS.result()},p.projection=function(f){return arguments.length?(a=f==null?(e=null,Lf):(e=f).stream,p):e},p.context=function(f){return arguments.length?(c=f==null?(t=null,new BI):new OI(t=f),typeof i!="function"&&c.pointRadius(i),p):t},p.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(c.pointRadius(+f),+f),p):i},p.projection(e).context(t)}function HL(e){return{stream:Xf(e)}}function Xf(e){return function(t){var i=new O_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function O_(){}O_.prototype={constructor:O_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Ps(i,e.stream(Ig)),t(Ig.result()),a!=null&&e.clipExtent(a),e}function ry(e,t,i){return tx(e,function(a){var c=t[1][0]-t[0][0],p=t[1][1]-t[0][1],f=Math.min(c/(a[1][0]-a[0][0]),p/(a[1][1]-a[0][1])),u=+t[0][0]+(c-f*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(p-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([u,b])},i)}function nx(e,t,i){return ry(e,[[0,0],t],i)}function rx(e,t,i){return tx(e,function(a){var c=+t,p=c/(a[1][0]-a[0][0]),f=(c-p*(a[1][0]+a[0][0]))/2,u=-p*a[0][1];e.scale(150*p).translate([f,u])},i)}function ix(e,t,i){return tx(e,function(a){var c=+t,p=c/(a[1][1]-a[0][1]),f=-p*a[0][0],u=(c-p*(a[1][1]+a[0][1]))/2;e.scale(150*p).translate([f,u])},i)}var SS=16,WL=ln(30*mn);function ES(e,t){return+t?XL(e,t):ZL(e)}function ZL(e){return Xf({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function XL(e,t){function i(a,c,p,f,u,b,C,I,w,T,O,U,F,ue){var K=C-a,W=I-c,$=K*K+W*W;if($>4*t&&F--){var ie=f+T,X=u+O,V=b+U,E=vi(ie*ie+X*X+V*V),j=co(V/=E),B=Un(Un(V)-1)<pn||Un(p-w)<pn?(p+w)/2:uo(X,ie),ee=e(B,j),q=ee[0],me=ee[1],_e=q-a,de=me-c,oe=W*_e-K*de;(oe*oe/$>t||Un((K*_e+W*de)/$-.5)>.3||f*T+u*O+b*U<WL)&&(i(a,c,p,f,u,b,q,me,B,ie/=E,X/=E,V,F,ue),ue.point(q,me),i(q,me,B,ie,X,V,C,I,w,T,O,U,F,ue))}}return function(a){var c,p,f,u,b,C,I,w,T,O,U,F,ue={point:K,lineStart:W,lineEnd:ie,polygonStart:function(){a.polygonStart(),ue.lineStart=X},polygonEnd:function(){a.polygonEnd(),ue.lineStart=W}};function K(j,B){j=e(j,B),a.point(j[0],j[1])}function W(){w=NaN,ue.point=$,a.lineStart()}function $(j,B){var ee=Ju([j,B]),q=e(j,B);i(w,T,I,O,U,F,w=q[0],T=q[1],I=j,O=ee[0],U=ee[1],F=ee[2],SS,a),a.point(w,T)}function ie(){ue.point=K,a.lineEnd()}function X(){W(),ue.point=V,ue.lineEnd=E}function V(j,B){$(c=j,B),p=w,f=T,u=O,b=U,C=F,ue.point=$}function E(){i(w,T,I,O,U,F,p,f,c,u,b,C,SS,a),ue.lineEnd=ie,ie()}return ue}}var qL=Xf({point:function(e,t){this.stream.point(e*mn,t*mn)}});function KL(e){return Xf({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function YL(e,t,i,a,c){function p(f,u){return f*=a,u*=c,[t+e*f,i-e*u]}return p.invert=function(f,u){return[(f-t)/e*a,(i-u)/e*c]},p}function TS(e,t,i,a,c,p){if(!p)return YL(e,t,i,a,c);var f=ln(p),u=Qt(p),b=f*e,C=u*e,I=f/e,w=u/e,T=(u*i-f*t)/e,O=(u*t+f*i)/e;function U(F,ue){return F*=a,ue*=c,[b*F-C*ue+t,i-C*F-b*ue]}return U.invert=function(F,ue){return[a*(I*F-w*ue+T),c*(O-w*F-I*ue)]},U}function aa(e){return ox(function(){return e})()}function ox(e){var t,i=150,a=480,c=250,p=0,f=0,u=0,b=0,C=0,I,w=0,T=1,O=1,U=null,F=S_,ue=null,K,W,$,ie=Lf,X=.5,V,E,j,B,ee;function q(oe){return j(oe[0]*mn,oe[1]*mn)}function me(oe){return oe=j.invert(oe[0],oe[1]),oe&&[oe[0]*lr,oe[1]*lr]}q.stream=function(oe){return B&&ee===oe?B:B=qL(KL(I)(F(V(ie(ee=oe)))))},q.preclip=function(oe){return arguments.length?(F=oe,U=void 0,de()):F},q.postclip=function(oe){return arguments.length?(ie=oe,ue=K=W=$=null,de()):ie},q.clipAngle=function(oe){return arguments.length?(F=+oe?TI(U=oe*mn):(U=null,S_),de()):U*lr},q.clipExtent=function(oe){return arguments.length?(ie=oe==null?(ue=K=W=$=null,Lf):ny(ue=+oe[0][0],K=+oe[0][1],W=+oe[1][0],$=+oe[1][1]),de()):ue==null?null:[[ue,K],[W,$]]},q.scale=function(oe){return arguments.length?(i=+oe,_e()):i},q.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],_e()):[a,c]},q.center=function(oe){return arguments.length?(p=oe[0]%360*mn,f=oe[1]%360*mn,_e()):[p*lr,f*lr]},q.rotate=function(oe){return arguments.length?(u=oe[0]%360*mn,b=oe[1]%360*mn,C=oe.length>2?oe[2]%360*mn:0,_e()):[u*lr,b*lr,C*lr]},q.angle=function(oe){return arguments.length?(w=oe%360*mn,_e()):w*lr},q.reflectX=function(oe){return arguments.length?(T=oe?-1:1,_e()):T<0},q.reflectY=function(oe){return arguments.length?(O=oe?-1:1,_e()):O<0},q.precision=function(oe){return arguments.length?(V=ES(E,X=oe*oe),de()):vi(X)},q.fitExtent=function(oe,le){return ry(q,oe,le)},q.fitSize=function(oe,le){return nx(q,oe,le)},q.fitWidth=function(oe,le){return rx(q,oe,le)},q.fitHeight=function(oe,le){return ix(q,oe,le)};function _e(){var oe=TS(i,0,0,T,O,w).apply(null,t(p,f)),le=TS(i,a-oe[0],c-oe[1],T,O,w);return I=ex(u,b,C),E=w_(t,le),j=w_(I,E),V=ES(E,X),de()}function de(){return B=ee=null,q}return function(){return t=e.apply(this,arguments),q.invert=t.invert&&me,_e()}}function sx(e){var t=0,i=zn/3,a=ox(e),c=a(t,i);return c.parallels=function(p){return arguments.length?a(t=p[0]*mn,i=p[1]*mn):[t*lr,i*lr]},c}function JL(e){var t=ln(e);function i(a,c){return[a*t,Qt(c)/t]}return i.invert=function(a,c){return[a/t,co(c*t)]},i}function NI(e,t){var i=Qt(e),a=(i+Qt(t))/2;if(Un(a)<pn)return JL(e);var c=1+i*(2*a-i),p=vi(c)/a;function f(u,b){var C=vi(c-2*a*Qt(b))/a;return[C*Qt(u*=a),p-C*ln(u)]}return f.invert=function(u,b){var C=p-b,I=uo(u,Un(C))*us(C);return C*a<0&&(I-=zn*us(u)*us(C)),[I/a,co((c-(u*u+C*C)*a*a)/(2*a))]},f}function Mg(){return sx(NI).scale(155.424).center([0,33.6442])}function UI(){return Mg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function QL(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function eO(){var e,t,i=UI(),a,c=Mg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p,f=Mg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,b,C={point:function(T,O){b=[T,O]}};function I(T){var O=T[0],U=T[1];return b=null,a.point(O,U),b||(p.point(O,U),b)||(u.point(O,U),b)}I.invert=function(T){var O=i.scale(),U=i.translate(),F=(T[0]-U[0])/O,ue=(T[1]-U[1])/O;return(ue>=.12&&ue<.234&&F>=-.425&&F<-.214?c:ue>=.166&&ue<.234&&F>=-.214&&F<-.115?f:i).invert(T)},I.stream=function(T){return e&&t===T?e:e=QL([i.stream(t=T),c.stream(T),f.stream(T)])},I.precision=function(T){return arguments.length?(i.precision(T),c.precision(T),f.precision(T),w()):i.precision()},I.scale=function(T){return arguments.length?(i.scale(T),c.scale(T*.35),f.scale(T),I.translate(i.translate())):i.scale()},I.translate=function(T){if(!arguments.length)return i.translate();var O=i.scale(),U=+T[0],F=+T[1];return a=i.translate(T).clipExtent([[U-.455*O,F-.238*O],[U+.455*O,F+.238*O]]).stream(C),p=c.translate([U-.307*O,F+.201*O]).clipExtent([[U-.425*O+pn,F+.12*O+pn],[U-.214*O-pn,F+.234*O-pn]]).stream(C),u=f.translate([U-.205*O,F+.212*O]).clipExtent([[U-.214*O+pn,F+.166*O+pn],[U-.115*O-pn,F+.234*O-pn]]).stream(C),w()},I.fitExtent=function(T,O){return ry(I,T,O)},I.fitSize=function(T,O){return nx(I,T,O)},I.fitWidth=function(T,O){return rx(I,T,O)},I.fitHeight=function(T,O){return ix(I,T,O)};function w(){return e=t=null,I}return I.scale(1070)}function $I(e){return function(t,i){var a=ln(t),c=ln(i),p=e(a*c);return p===1/0?[2,0]:[p*c*Qt(t),p*Qt(i)]}}function qf(e){return function(t,i){var a=vi(t*t+i*i),c=e(a),p=Qt(c),f=ln(c);return[uo(t*p,a*f),co(a&&i*p/a)]}}var ax=$I(function(e){return vi(2/(1+e))});ax.invert=qf(function(e){return 2*co(e/2)});function tO(){return aa(ax).scale(124.75).clipAngle(180-.001)}var lx=$I(function(e){return(e=lI(e))&&e/Qt(e)});lx.invert=qf(function(e){return e});function nO(){return aa(lx).scale(79.4188).clipAngle(180-.001)}function Kf(e,t){return[e,cg(J1((Dr+t)/2))]}Kf.invert=function(e,t){return[e,2*Dh(aI(t))-Dr]};function rO(){return VI(Kf).scale(961/lo)}function VI(e){var t=aa(e),i=t.center,a=t.scale,c=t.translate,p=t.clipExtent,f=null,u,b,C;t.scale=function(w){return arguments.length?(a(w),I()):a()},t.translate=function(w){return arguments.length?(c(w),I()):c()},t.center=function(w){return arguments.length?(i(w),I()):i()},t.clipExtent=function(w){return arguments.length?(w==null?f=u=b=C=null:(f=+w[0][0],u=+w[0][1],b=+w[1][0],C=+w[1][1]),I()):f==null?null:[[f,u],[b,C]]};function I(){var w=zn*a(),T=t(_I(t.rotate()).invert([0,0]));return p(f==null?[[T[0]-w,T[1]-w],[T[0]+w,T[1]+w]]:e===Kf?[[Math.max(T[0]-w,f),u],[Math.min(T[0]+w,b),C]]:[[f,Math.max(T[1]-w,u)],[b,Math.min(T[1]+w,C)]])}return I()}function um(e){return J1((Dr+e)/2)}function GI(e,t){var i=ln(e),a=e===t?Qt(e):cg(i/ln(t))/cg(um(t)/um(e)),c=i*z0(um(e),a)/a;if(!a)return Kf;function p(f,u){c>0?u<-Dr+pn&&(u=-Dr+pn):u>Dr-pn&&(u=Dr-pn);var b=c/z0(um(u),a);return[b*Qt(a*f),c-b*ln(a*f)]}return p.invert=function(f,u){var b=c-u,C=us(a)*vi(f*f+b*b),I=uo(f,Un(b))*us(b);return b*a<0&&(I-=zn*us(f)*us(b)),[I/a,2*Dh(z0(c/C,1/a))-Dr]},p}function iO(){return sx(GI).scale(109.5).parallels([30,30])}function Ff(e,t){return[e,t]}Ff.invert=Ff;function oO(){return aa(Ff).scale(152.63)}function HI(e,t){var i=ln(e),a=e===t?Qt(e):(i-ln(t))/(t-e),c=i/a+e;if(Un(a)<pn)return Ff;function p(f,u){var b=c-u,C=a*f;return[b*Qt(C),c-b*ln(C)]}return p.invert=function(f,u){var b=c-u,C=uo(f,Un(b))*us(b);return b*a<0&&(C-=zn*us(f)*us(b)),[C/a,c-us(a)*vi(f*f+b*b)]},p}function sO(){return sx(HI).scale(131.154).center([0,13.9389])}var af=1.340264,lf=-.081106,uf=893e-6,cf=.003796,zg=vi(3)/2,aO=12;function ux(e,t){var i=co(zg*Qt(t)),a=i*i,c=a*a*a;return[e*ln(i)/(zg*(af+3*lf*a+c*(7*uf+9*cf*a))),i*(af+lf*a+c*(uf+cf*a))]}ux.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,p=0,f,u,b;p<aO&&(u=i*(af+lf*a+c*(uf+cf*a))-t,b=af+3*lf*a+c*(7*uf+9*cf*a),i-=f=u/b,a=i*i,c=a*a*a,!(Un(f)<Rf));++p);return[zg*e*(af+3*lf*a+c*(7*uf+9*cf*a))/ln(i),co(Qt(i)/zg)]};function lO(){return aa(ux).scale(177.158)}function cx(e,t){var i=ln(t),a=ln(e)*i;return[i*Qt(e)/a,Qt(t)/a]}cx.invert=qf(Dh);function uO(){return aa(cx).scale(144.049).clipAngle(60)}function cO(){var e=1,t=0,i=0,a=1,c=1,p=0,f,u,b=null,C,I,w,T=1,O=1,U=Xf({point:function(ie,X){var V=$([ie,X]);this.stream.point(V[0],V[1])}}),F=Lf,ue,K;function W(){return T=e*a,O=e*c,ue=K=null,$}function $(ie){var X=ie[0]*T,V=ie[1]*O;if(p){var E=V*f-X*u;X=X*f+V*u,V=E}return[X+t,V+i]}return $.invert=function(ie){var X=ie[0]-t,V=ie[1]-i;if(p){var E=V*f+X*u;X=X*f-V*u,V=E}return[X/T,V/O]},$.stream=function(ie){return ue&&K===ie?ue:ue=U(F(K=ie))},$.postclip=function(ie){return arguments.length?(F=ie,b=C=I=w=null,W()):F},$.clipExtent=function(ie){return arguments.length?(F=ie==null?(b=C=I=w=null,Lf):ny(b=+ie[0][0],C=+ie[0][1],I=+ie[1][0],w=+ie[1][1]),W()):b==null?null:[[b,C],[I,w]]},$.scale=function(ie){return arguments.length?(e=+ie,W()):e},$.translate=function(ie){return arguments.length?(t=+ie[0],i=+ie[1],W()):[t,i]},$.angle=function(ie){return arguments.length?(p=ie%360*mn,u=Qt(p),f=ln(p),W()):p*lr},$.reflectX=function(ie){return arguments.length?(a=ie?-1:1,W()):a<0},$.reflectY=function(ie){return arguments.length?(c=ie?-1:1,W()):c<0},$.fitExtent=function(ie,X){return ry($,ie,X)},$.fitSize=function(ie,X){return nx($,ie,X)},$.fitWidth=function(ie,X){return rx($,ie,X)},$.fitHeight=function(ie,X){return ix($,ie,X)},$}function hx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}hx.invert=function(e,t){var i=t,a=25,c;do{var p=i*i,f=p*p;i-=c=(i*(1.007226+p*(.015085+f*(-.044475+.028874*p-.005916*f)))-t)/(1.007226+p*(.015085*3+f*(-.044475*7+.028874*9*p-.005916*11*f)))}while(Un(c)>pn&&--a>0);return[e/(.8707+(p=i*i)*(-.131979+p*(-.013791+p*p*p*(.003971-.001529*p)))),i]};function hO(){return aa(hx).scale(175.295)}function dx(e,t){return[ln(t)*Qt(e),Qt(t)]}dx.invert=qf(co);function dO(){return aa(dx).scale(249.5).clipAngle(90+pn)}function fx(e,t){var i=ln(t),a=1+ln(e)*i;return[i*Qt(e)/a,Qt(t)/a]}fx.invert=qf(function(e){return 2*Dh(e)});function fO(){return aa(fx).scale(250).clipAngle(142)}function px(e,t){return[cg(J1((Dr+t)/2)),-e]}px.invert=function(e,t){return[-t,2*Dh(aI(e))-Dr]};function pO(){var e=VI(px),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const mO=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:UI,geoAlbersUsa:eO,geoArea:oL,geoAzimuthalEqualArea:tO,geoAzimuthalEqualAreaRaw:ax,geoAzimuthalEquidistant:nO,geoAzimuthalEquidistantRaw:lx,geoBounds:uL,geoCentroid:mL,geoCircle:gL,geoClipAntimeridian:S_,geoClipCircle:TI,geoClipExtent:SL,geoClipRectangle:ny,geoConicConformal:iO,geoConicConformalRaw:GI,geoConicEqualArea:Mg,geoConicEqualAreaRaw:NI,geoConicEquidistant:sO,geoConicEquidistantRaw:HI,geoContains:kL,geoDistance:Sg,geoEqualEarth:lO,geoEqualEarthRaw:ux,geoEquirectangular:oO,geoEquirectangularRaw:Ff,geoGnomonic:uO,geoGnomonicRaw:cx,geoGraticule:AI,geoGraticule10:ML,geoIdentity:cO,geoInterpolate:zL,geoLength:CI,geoMercator:rO,geoMercatorRaw:Kf,geoNaturalEarth1:hO,geoNaturalEarth1Raw:hx,geoOrthographic:dO,geoOrthographicRaw:dx,geoPath:GL,geoProjection:aa,geoProjectionMutator:ox,geoRotation:_I,geoStereographic:fO,geoStereographicRaw:fx,geoStream:Ps,geoTransform:HL,geoTransverseMercator:pO,geoTransverseMercatorRaw:px},Symbol.toStringTag,{value:"Module"})),gO=$_(mO);var lu=2*Math.PI*6378137/2,yO=Math.PI/180;function WI(e){return e=e||256,2*Math.PI*6378137/e}function vO(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function F_(e,t,i){var a=ZI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function ZI(e,t,i){var a=t,c=bx(e[0]),p=wx(e[1]),f=Math.sin(p*yO),u=Math.pow(2,a),b=u*(c/360+.5),C=u*(.5-.25*Math.log((1+f)/(1-f))/Math.PI);return rc([b,C,a],i)}function _O(e,t=6){var i=e[0],a=e[1],c=e[2],p=e[3],f=(i-c)/2+c,u=(a-p)/2+p;return t!=null&&(f=Number(f.toFixed(t)),u=Number(u.toFixed(t))),[f,u]}function Rg(e,t,i={enable:!0,decimal:1}){e=iy(e,t);var a=e[0],c=e[1],p=a*lu/180,f=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return f=f*lu/180,i.enable&&(p=Number(p.toFixed(i.decimal)),f=Number(f.toFixed(i.decimal))),[p,f]}function j_(e,t=6){var i=e[0],a=e[1],c=i/lu*180,p=a/lu*180;return p=180/Math.PI*(2*Math.atan(Math.exp(p*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),p=Number(p.toFixed(t))),[c,p]}function mx(e,t,i){var a=e[0],c=e[1],p=_x(t,i),f=(a+lu)/p,u=(c+lu)/p;return[f,u,t]}function XI(e,t,i){e=iy(e,i);var a=Rg(e),c=mx(a,t);return gx(c)}function xO(e,t,i){if(e=iy(e,i),t===0)return[0,0,0];var a=XI(e,t);return KI(a)}function wO(e,t){if(t===0)return[0,0,0];var i=mx(e,t);return gx(i)}function D_(e,t,i=1){var a=e[0],c=e[1],p=e[2],f=_x(p,t),u=a*f-lu,b=c*f-lu;return i!=null&&(u=Number(u.toFixed(i)),b=Number(b.toFixed(i))),[u,b]}function gx(e,t,i){t=t||256;var a=e[0],c=e[1],p=e[2];if(p===0)return[0,0,0];vx(p);var f=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return f<0&&(f=0),u<0&&(u=0),[f,u,p]}function yx(e,t,i){rc(e,i),t=t||256;var a=e[0],c=e[1],p=e[2],f=D_([a*t,c*t,p]),u=D_([(a+1)*t,(c+1)*t,p]);return[f[0],f[1],u[0],u[1]]}function qI(e,t){rc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var p=yx([i,a,c]),f=p[0],u=p[1],b=p[2],C=p[3],I=j_([f,u,c]),w=j_([b,C,c]);return[I[0],I[1],w[0],w[1]]}function bO(e){var t=Yf(e);return yx(t)}function SO(e){var t=Yf(e);return qI(t)}function KI(e,t){rc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var p=i,f=Math.pow(2,c)-1-a;return[p,f,c]}function Yf(e){var t=e[0],i=e[1],a=e[2],c=t,p=Math.pow(2,a)-i-1;return[c,p,a]}function EO(e){var t=Yf(e);return YI(t)}function YI(e,t){rc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var p="";return a=Math.pow(2,c)-1-a,xx(c,0,-1).map(function(f){var u=0,b=1<<f-1;i&b&&(u+=1),a&b&&(u+=2),p=p.concat(u)}),p}function TO(e){var t=JI(e);return Yf(t)}function JI(e){var t=0,i=0,a=e.length;return xx(a,0,-1).map(function(c){var p=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=p;break;case 2:i+=p;break;case 3:t+=p,i+=p;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function CO(e){var t=Rg([e[0],e[1]]),i=Rg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function rc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=vx(c),e=QI(e),e}function QI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function vx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function iy(e,t){if(t===!1)return e;var i=bx(e[0]),a=wx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function _x(e,t){return WI(t)/Math.pow(2,e)}function xx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),p=0;p<a;p++,e+=i)c[p]=e;return c}function IO(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(p){p[0]<t&&(t=p[0]),p[1]<i&&(i=p[1]),p[2]>a&&(a=p[2]),p[3]>c&&(c=p[3])}),[t,i,a,c]}}function AO(e){try{return rc(e),!0}catch{return!1}}function wx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function bx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function PO(e){var t=F_([e[0],e[1]],32),i=F_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=kO(a);if(c===0)return[0,0,0];var p=a[0]>>>32-c,f=a[1]>>>32-c;return[p,f,c]}function kO(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const MO=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:_O,bboxToMeters:CO,bboxToTile:PO,googleToBBox:SO,googleToBBoxMeters:bO,googleToQuadkey:EO,googleToTile:Yf,hash:vO,initialResolution:WI,latitude:wx,lngLatToGoogle:xO,lngLatToMeters:Rg,lngLatToTile:XI,longitude:bx,maxBBox:IO,metersToLngLat:j_,metersToPixels:mx,metersToTile:wO,pixelsToMeters:D_,pixelsToTile:gx,pointToTile:F_,pointToTileFraction:ZI,quadkeyToGoogle:JI,quadkeyToTile:TO,range:xx,resolution:_x,tileToBBox:qI,tileToBBoxMeters:yx,tileToGoogle:KI,tileToQuadkey:YI,validTile:AO,validateLngLat:iy,validateTile:rc,validateZoom:vx,wrapTile:QI},Symbol.toStringTag,{value:"Module"})),zO=$_(MO);var oy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */oy.read=function(e,t,i,a,c){var p,f,u=c*8-a-1,b=(1<<u)-1,C=b>>1,I=-7,w=i?c-1:0,T=i?-1:1,O=e[t+w];for(w+=T,p=O&(1<<-I)-1,O>>=-I,I+=u;I>0;p=p*256+e[t+w],w+=T,I-=8);for(f=p&(1<<-I)-1,p>>=-I,I+=a;I>0;f=f*256+e[t+w],w+=T,I-=8);if(p===0)p=1-C;else{if(p===b)return f?NaN:(O?-1:1)*(1/0);f=f+Math.pow(2,a),p=p-C}return(O?-1:1)*f*Math.pow(2,p-a)};oy.write=function(e,t,i,a,c,p){var f,u,b,C=p*8-c-1,I=(1<<C)-1,w=I>>1,T=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:p-1,U=a?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,f=I):(f=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-f))<1&&(f--,b*=2),f+w>=1?t+=T/b:t+=T*Math.pow(2,1-w),t*b>=2&&(f++,b/=2),f+w>=I?(u=0,f=I):f+w>=1?(u=(t*b-1)*Math.pow(2,c),f=f+w):(u=t*Math.pow(2,w-1)*Math.pow(2,c),f=0));c>=8;e[i+O]=u&255,O+=U,u/=256,c-=8);for(f=f<<c|u,C+=c;C>0;e[i+O]=f&255,O+=U,f/=256,C-=8);e[i+O-U]|=F*128};var RO=Xn,cm=oy;function Xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0;Xn.Fixed64=1;Xn.Bytes=2;Xn.Fixed32=5;var B_=65536*65536,CS=1/B_,LO=12,eA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,p=this.pos;this.type=a&7,e(c,t,this),this.pos===p&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=hm(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=AS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=hm(this.buf,this.pos)+hm(this.buf,this.pos+4)*B_;return this.pos+=8,e},readSFixed64:function(){var e=hm(this.buf,this.pos)+AS(this.buf,this.pos+4)*B_;return this.pos+=8,e},readFloat:function(){var e=cm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=cm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,OO(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=LO&&eA?qO(this.buf,t,e):XO(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xn.Bytes)return e.push(this.readVarint(t));var i=Da(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSVarint());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xn.Bytes)return e.push(this.readBoolean());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFloat());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xn.Bytes)return e.push(this.readDouble());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed32());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed32());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed64());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed64());var t=Da(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xn.Fixed32)this.pos+=4;else if(t===Xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Gc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Gc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Gc(this.buf,e&-1,this.pos),Gc(this.buf,Math.floor(e*CS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Gc(this.buf,e&-1,this.pos),Gc(this.buf,Math.floor(e*CS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){FO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=KO(this.buf,e,this.pos);var i=this.pos-t;i>=128&&IS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),cm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),cm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&IS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Xn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,BO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,NO,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,VO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,UO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,$O,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,GO,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,HO,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,WO,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ZO,t)},writeBytesField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function OO(e,t,i){var a=i.buf,c,p;if(p=a[i.pos++],c=(p&112)>>4,p<128||(p=a[i.pos++],c|=(p&127)<<3,p<128)||(p=a[i.pos++],c|=(p&127)<<10,p<128)||(p=a[i.pos++],c|=(p&127)<<17,p<128)||(p=a[i.pos++],c|=(p&127)<<24,p<128)||(p=a[i.pos++],c|=(p&1)<<31,p<128))return Vc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Da(e){return e.type===Xn.Bytes?e.readVarint()+e.pos:e.pos+1}function Vc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function FO(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),jO(i,a,t),DO(a,t)}function jO(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function DO(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function IS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function BO(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function NO(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function UO(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function $O(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function VO(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function GO(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function HO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function WO(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function ZO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function hm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Gc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function AS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function XO(e,t,i){for(var a="",c=t;c<i;){var p=e[c],f=null,u=p>239?4:p>223?3:p>191?2:1;if(c+u>i)break;var b,C,I;u===1?p<128&&(f=p):u===2?(b=e[c+1],(b&192)===128&&(f=(p&31)<<6|b&63,f<=127&&(f=null))):u===3?(b=e[c+1],C=e[c+2],(b&192)===128&&(C&192)===128&&(f=(p&15)<<12|(b&63)<<6|C&63,(f<=2047||f>=55296&&f<=57343)&&(f=null))):u===4&&(b=e[c+1],C=e[c+2],I=e[c+3],(b&192)===128&&(C&192)===128&&(I&192)===128&&(f=(p&15)<<18|(b&63)<<12|(C&63)<<6|I&63,(f<=65535||f>=1114112)&&(f=null))),f===null?(f=65533,u=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|f&1023),a+=String.fromCharCode(f),c+=u}return a}function qO(e,t,i){return eA.decode(e.subarray(t,i))}function KO(e,t,i){for(var a=0,c,p;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(p)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,p=c;continue}else c=p-55296<<10|c-56320|65536,p=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):p=c;continue}else p&&(e[i++]=239,e[i++]=191,e[i++]=189,p=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Sx={exports:{}},tA=function(t,i){return function(){for(var c=new Array(arguments.length),p=0;p<c.length;p++)c[p]=arguments[p];return t.apply(i,c)}},YO=tA,ic=Object.prototype.toString;function Ex(e){return ic.call(e)==="[object Array]"}function N_(e){return typeof e>"u"}function JO(e){return e!==null&&!N_(e)&&e.constructor!==null&&!N_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function QO(e){return ic.call(e)==="[object ArrayBuffer]"}function eF(e){return typeof FormData<"u"&&e instanceof FormData}function tF(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function nF(e){return typeof e=="string"}function rF(e){return typeof e=="number"}function nA(e){return e!==null&&typeof e=="object"}function km(e){if(ic.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function iF(e){return ic.call(e)==="[object Date]"}function oF(e){return ic.call(e)==="[object File]"}function sF(e){return ic.call(e)==="[object Blob]"}function rA(e){return ic.call(e)==="[object Function]"}function aF(e){return nA(e)&&rA(e.pipe)}function lF(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function uF(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function cF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Tx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Ex(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function U_(){var e={};function t(c,p){km(e[p])&&km(c)?e[p]=U_(e[p],c):km(c)?e[p]=U_({},c):Ex(c)?e[p]=c.slice():e[p]=c}for(var i=0,a=arguments.length;i<a;i++)Tx(arguments[i],t);return e}function hF(e,t,i){return Tx(t,function(c,p){i&&typeof c=="function"?e[p]=YO(c,i):e[p]=c}),e}function dF(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Xo={isArray:Ex,isArrayBuffer:QO,isBuffer:JO,isFormData:eF,isArrayBufferView:tF,isString:nF,isNumber:rF,isObject:nA,isPlainObject:km,isUndefined:N_,isDate:iF,isFile:oF,isBlob:sF,isFunction:rA,isStream:aF,isURLSearchParams:lF,isStandardBrowserEnv:cF,forEach:Tx,merge:U_,extend:hF,trim:uF,stripBOM:dF},Hc=Xo;function PS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var iA=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Hc.isURLSearchParams(i))c=i.toString();else{var p=[];Hc.forEach(i,function(b,C){b===null||typeof b>"u"||(Hc.isArray(b)?C=C+"[]":b=[b],Hc.forEach(b,function(w){Hc.isDate(w)?w=w.toISOString():Hc.isObject(w)&&(w=JSON.stringify(w)),p.push(PS(C)+"="+PS(w))}))}),c=p.join("&")}if(c){var f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},fF=Xo;function sy(){this.handlers=[]}sy.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};sy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};sy.prototype.forEach=function(t){fF.forEach(this.handlers,function(a){a!==null&&t(a)})};var pF=sy,mF=Xo,gF=function(t,i){mF.forEach(t,function(c,p){p!==i&&p.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[p])})},oA=function(t,i,a,c,p){return t.config=i,a&&(t.code=a),t.request=c,t.response=p,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},j0,kS;function sA(){if(kS)return j0;kS=1;var e=oA;return j0=function(i,a,c,p,f){var u=new Error(i);return e(u,a,c,p,f)},j0}var D0,MS;function yF(){if(MS)return D0;MS=1;var e=sA();return D0=function(i,a,c){var p=c.config.validateStatus;!c.status||!p||p(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},D0}var B0,zS;function vF(){if(zS)return B0;zS=1;var e=Xo;return B0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,p,f,u,b){var C=[];C.push(a+"="+encodeURIComponent(c)),e.isNumber(p)&&C.push("expires="+new Date(p).toGMTString()),e.isString(f)&&C.push("path="+f),e.isString(u)&&C.push("domain="+u),b===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),B0}var N0,RS;function _F(){return RS||(RS=1,N0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),N0}var U0,LS;function xF(){return LS||(LS=1,U0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),U0}var $0,OS;function wF(){if(OS)return $0;OS=1;var e=_F(),t=xF();return $0=function(a,c){return a&&!e(c)?t(a,c):c},$0}var V0,FS;function bF(){if(FS)return V0;FS=1;var e=Xo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return V0=function(a){var c={},p,f,u;return a&&e.forEach(a.split(`
`),function(C){if(u=C.indexOf(":"),p=e.trim(C.substr(0,u)).toLowerCase(),f=e.trim(C.substr(u+1)),p){if(c[p]&&t.indexOf(p)>=0)return;p==="set-cookie"?c[p]=(c[p]?c[p]:[]).concat([f]):c[p]=c[p]?c[p]+", "+f:f}}),c},V0}var G0,jS;function SF(){if(jS)return G0;jS=1;var e=Xo;return G0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function p(f){var u=f;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=p(window.location.href),function(u){var b=e.isString(u)?p(u):u;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),G0}var H0,DS;function BS(){if(DS)return H0;DS=1;var e=Xo,t=yF(),i=vF(),a=iA,c=wF(),p=bF(),f=SF(),u=sA();return H0=function(C){return new Promise(function(w,T){var O=C.data,U=C.headers,F=C.responseType;e.isFormData(O)&&delete U["Content-Type"];var ue=new XMLHttpRequest;if(C.auth){var K=C.auth.username||"",W=C.auth.password?unescape(encodeURIComponent(C.auth.password)):"";U.Authorization="Basic "+btoa(K+":"+W)}var $=c(C.baseURL,C.url);ue.open(C.method.toUpperCase(),a($,C.params,C.paramsSerializer),!0),ue.timeout=C.timeout;function ie(){if(ue){var V="getAllResponseHeaders"in ue?p(ue.getAllResponseHeaders()):null,E=!F||F==="text"||F==="json"?ue.responseText:ue.response,j={data:E,status:ue.status,statusText:ue.statusText,headers:V,config:C,request:ue};t(w,T,j),ue=null}}if("onloadend"in ue?ue.onloadend=ie:ue.onreadystatechange=function(){!ue||ue.readyState!==4||ue.status===0&&!(ue.responseURL&&ue.responseURL.indexOf("file:")===0)||setTimeout(ie)},ue.onabort=function(){ue&&(T(u("Request aborted",C,"ECONNABORTED",ue)),ue=null)},ue.onerror=function(){T(u("Network Error",C,null,ue)),ue=null},ue.ontimeout=function(){var E="timeout of "+C.timeout+"ms exceeded";C.timeoutErrorMessage&&(E=C.timeoutErrorMessage),T(u(E,C,C.transitional&&C.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ue)),ue=null},e.isStandardBrowserEnv()){var X=(C.withCredentials||f($))&&C.xsrfCookieName?i.read(C.xsrfCookieName):void 0;X&&(U[C.xsrfHeaderName]=X)}"setRequestHeader"in ue&&e.forEach(U,function(E,j){typeof O>"u"&&j.toLowerCase()==="content-type"?delete U[j]:ue.setRequestHeader(j,E)}),e.isUndefined(C.withCredentials)||(ue.withCredentials=!!C.withCredentials),F&&F!=="json"&&(ue.responseType=C.responseType),typeof C.onDownloadProgress=="function"&&ue.addEventListener("progress",C.onDownloadProgress),typeof C.onUploadProgress=="function"&&ue.upload&&ue.upload.addEventListener("progress",C.onUploadProgress),C.cancelToken&&C.cancelToken.promise.then(function(E){ue&&(ue.abort(),T(E),ue=null)}),O||(O=null),ue.send(O)})},H0}var zi=Xo,NS=gF,EF=oA,TF={"Content-Type":"application/x-www-form-urlencoded"};function US(e,t){!zi.isUndefined(e)&&zi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function CF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=BS()),e}function IF(e,t,i){if(zi.isString(e))try{return(t||JSON.parse)(e),zi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var ay={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:CF(),transformRequest:[function(t,i){return NS(i,"Accept"),NS(i,"Content-Type"),zi.isFormData(t)||zi.isArrayBuffer(t)||zi.isBuffer(t)||zi.isStream(t)||zi.isFile(t)||zi.isBlob(t)?t:zi.isArrayBufferView(t)?t.buffer:zi.isURLSearchParams(t)?(US(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):zi.isObject(t)||i&&i["Content-Type"]==="application/json"?(US(i,"application/json"),IF(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,p=!a&&this.responseType==="json";if(p||c&&zi.isString(t)&&t.length)try{return JSON.parse(t)}catch(f){if(p)throw f.name==="SyntaxError"?EF(f,this,"E_JSON_PARSE"):f}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};ay.headers={common:{Accept:"application/json, text/plain, */*"}};zi.forEach(["delete","get","head"],function(t){ay.headers[t]={}});zi.forEach(["post","put","patch"],function(t){ay.headers[t]=zi.merge(TF)});var Cx=ay,AF=Xo,PF=Cx,kF=function(t,i,a){var c=this||PF;return AF.forEach(a,function(f){t=f.call(c,t,i)}),t},W0,$S;function aA(){return $S||($S=1,W0=function(t){return!!(t&&t.__CANCEL__)}),W0}var VS=Xo,Z0=kF,MF=aA(),zF=Cx;function X0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var RF=function(t){X0(t),t.headers=t.headers||{},t.data=Z0.call(t,t.data,t.headers,t.transformRequest),t.headers=VS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),VS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||zF.adapter;return i(t).then(function(c){return X0(t),c.data=Z0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return MF(c)||(X0(t),c&&c.response&&(c.response.data=Z0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Zi=Xo,lA=function(t,i){i=i||{};var a={},c=["url","method","data"],p=["headers","auth","proxy","params"],f=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function b(T,O){return Zi.isPlainObject(T)&&Zi.isPlainObject(O)?Zi.merge(T,O):Zi.isPlainObject(O)?Zi.merge({},O):Zi.isArray(O)?O.slice():O}function C(T){Zi.isUndefined(i[T])?Zi.isUndefined(t[T])||(a[T]=b(void 0,t[T])):a[T]=b(t[T],i[T])}Zi.forEach(c,function(O){Zi.isUndefined(i[O])||(a[O]=b(void 0,i[O]))}),Zi.forEach(p,C),Zi.forEach(f,function(O){Zi.isUndefined(i[O])?Zi.isUndefined(t[O])||(a[O]=b(void 0,t[O])):a[O]=b(void 0,i[O])}),Zi.forEach(u,function(O){O in i?a[O]=b(t[O],i[O]):O in t&&(a[O]=b(void 0,t[O]))});var I=c.concat(p).concat(f).concat(u),w=Object.keys(t).concat(Object.keys(i)).filter(function(O){return I.indexOf(O)===-1});return Zi.forEach(w,C),a};const LF="axios",OF="0.21.4",FF="Promise based HTTP client for the browser and node.js",jF="index.js",DF={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},BF={type:"git",url:"https://github.com/axios/axios.git"},NF=["xhr","http","ajax","promise","node"],UF="Matt Zabriskie",$F="MIT",VF={url:"https://github.com/axios/axios/issues"},GF="https://axios-http.com",HF={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},WF={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},ZF="dist/axios.min.js",XF="dist/axios.min.js",qF="./index.d.ts",KF={"follow-redirects":"^1.14.0"},YF=[{path:"./dist/axios.min.js",threshold:"5kB"}],JF={name:LF,version:OF,description:FF,main:jF,scripts:DF,repository:BF,keywords:NF,author:UF,license:$F,bugs:VF,homepage:GF,devDependencies:HF,browser:WF,jsdelivr:ZF,unpkg:XF,typings:qF,dependencies:KF,bundlesize:YF};var uA=JF,Ix={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Ix[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var GS={},QF=uA.version.split(".");function cA(e,t){for(var i=t?t.split("."):QF,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Ix.transitional=function(t,i,a){var c=i&&cA(i);function p(f,u){return"[Axios v"+uA.version+"] Transitional option '"+f+"'"+u+(a?". "+a:"")}return function(f,u,b){if(t===!1)throw new Error(p(u," has been removed in "+i));return c&&!GS[u]&&(GS[u]=!0,console.warn(p(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(f,u,b):!0}};function e5(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var p=a[c],f=t[p];if(f){var u=e[p],b=u===void 0||f(u,p,e);if(b!==!0)throw new TypeError("option "+p+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+p)}}var t5={isOlderVersion:cA,assertOptions:e5,validators:Ix},hA=Xo,n5=iA,HS=pF,WS=RF,ly=lA,dA=t5,Wc=dA.validators;function Jf(e){this.defaults=e,this.interceptors={request:new HS,response:new HS}}Jf.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=ly(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&dA.assertOptions(i,{silentJSONParsing:Wc.transitional(Wc.boolean,"1.0.0"),forcedJSONParsing:Wc.transitional(Wc.boolean,"1.0.0"),clarifyTimeoutError:Wc.transitional(Wc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(c=c&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});var p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});var f;if(!c){var u=[WS,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(p),f=Promise.resolve(t);u.length;)f=f.then(u.shift(),u.shift());return f}for(var b=t;a.length;){var C=a.shift(),I=a.shift();try{b=C(b)}catch(w){I(w);break}}try{f=WS(b)}catch(w){return Promise.reject(w)}for(;p.length;)f=f.then(p.shift(),p.shift());return f};Jf.prototype.getUri=function(t){return t=ly(this.defaults,t),n5(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};hA.forEach(["delete","get","head","options"],function(t){Jf.prototype[t]=function(i,a){return this.request(ly(a||{},{method:t,url:i,data:(a||{}).data}))}});hA.forEach(["post","put","patch"],function(t){Jf.prototype[t]=function(i,a,c){return this.request(ly(c||{},{method:t,url:i,data:a}))}});var r5=Jf,q0,ZS;function fA(){if(ZS)return q0;ZS=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,q0=e,q0}var K0,XS;function i5(){if(XS)return K0;XS=1;var e=fA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(f){a=f});var c=this;i(function(f){c.reason||(c.reason=new e(f),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(f){a=f});return{token:c,cancel:a}},K0=t,K0}var Y0,qS;function o5(){return qS||(qS=1,Y0=function(t){return function(a){return t.apply(null,a)}}),Y0}var J0,KS;function s5(){return KS||(KS=1,J0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),J0}var YS=Xo,a5=tA,Mm=r5,l5=lA,u5=Cx;function pA(e){var t=new Mm(e),i=a5(Mm.prototype.request,t);return YS.extend(i,Mm.prototype,t),YS.extend(i,t),i}var js=pA(u5);js.Axios=Mm;js.create=function(t){return pA(l5(js.defaults,t))};js.Cancel=fA();js.CancelToken=i5();js.isCancel=aA();js.all=function(t){return Promise.all(t)};js.spread=o5();js.isAxiosError=s5();Sx.exports=js;Sx.exports.default=js;var c5=Sx.exports,h5=c5;const d5={},f5=Object.freeze(Object.defineProperty({__proto__:null,default:d5},Symbol.toStringTag,{value:"Module"})),p5=$_(f5);var uy={},m5=_h;function _h(e,t){this.x=e,this.y=t}_h.prototype={clone:function(){return new _h(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),p=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};_h.convert=function(e){return e instanceof _h?e:Array.isArray(e)?new _h(e[0],e[1]):e};var g5=m5,mA=zh;function zh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(y5,this,t)}function y5(e,t,i){e==1?t.id=i.readVarint():e==2?v5(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function v5(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}zh.types=["Unknown","Point","LineString","Polygon"];zh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,f=[],u;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),i===1&&(u&&f.push(u),u=[]),u.push(new g5(c,p));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&f.push(u),f};zh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,f=1/0,u=-1/0,b=1/0,C=-1/0;e.pos<t;){if(a<=0){var I=e.readVarint();i=I&7,a=I>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),c<f&&(f=c),c>u&&(u=c),p<b&&(b=p),p>C&&(C=p);else if(i!==7)throw new Error("unknown command "+i)}return[f,b,u,C]};zh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,p=this.extent*t,f=this.loadGeometry(),u=zh.types[this.type],b,C;function I(O){for(var U=0;U<O.length;U++){var F=O[U],ue=180-(F.y+p)*360/a;O[U]=[(F.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(ue*Math.PI/180))-90]}}switch(this.type){case 1:var w=[];for(b=0;b<f.length;b++)w[b]=f[b][0];f=w,I(f);break;case 2:for(b=0;b<f.length;b++)I(f[b]);break;case 3:for(f=_5(f),b=0;b<f.length;b++)for(C=0;C<f[b].length;C++)I(f[b][C]);break}f.length===1?f=f[0]:u="Multi"+u;var T={type:"Feature",geometry:{type:u,coordinates:f},properties:this.properties};return"id"in this&&(T.id=this.id),T};function _5(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,p=0;p<t;p++){var f=x5(e[p]);f!==0&&(c===void 0&&(c=f<0),c===f<0?(a&&i.push(a),a=[e[p]]):a.push(e[p]))}return a&&i.push(a),i}function x5(e){for(var t=0,i=0,a=e.length,c=a-1,p,f;i<a;c=i++)p=e[i],f=e[c],t+=(f.x-p.x)*(p.y+f.y);return t}var w5=mA,gA=yA;function yA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(b5,this,t),this.length=this._features.length}function b5(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(S5(i))}function S5(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}yA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new w5(this._pbf,t,this.extent,this._keys,this._values)};var E5=gA,T5=C5;function C5(e,t){this.layers=e.readFields(I5,{},t)}function I5(e,t,i){if(e===3){var a=new E5(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}uy.VectorTile=T5;uy.VectorTileFeature=mA;uy.VectorTileLayer=gA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=gO,i=zO,a=RO,c=h5,p=p5,f=uy;function u(W){return W&&typeof W=="object"&&"default"in W?W:{default:W}}var b=u(a),C=u(c),I=u(p),w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof $l<"u"?$l:typeof self<"u"?self:{};function T(W){var $={exports:{}};return W($,$.exports),$.exports}var O=T(function(W,$){(function(X,V){W.exports=V(C.default)})(w,function(ie){return function(X){var V={};function E(j){if(V[j])return V[j].exports;var B=V[j]={i:j,l:!1,exports:{}};return X[j].call(B.exports,B,B.exports,E),B.l=!0,B.exports}return E.m=X,E.c=V,E.d=function(j,B,ee){E.o(j,B)||Object.defineProperty(j,B,{enumerable:!0,get:ee})},E.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})},E.t=function(j,B){if(B&1&&(j=E(j)),B&8||B&4&&typeof j=="object"&&j&&j.__esModule)return j;var ee=Object.create(null);if(E.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:j}),B&2&&typeof j!="string")for(var q in j)E.d(ee,q,(function(me){return j[me]}).bind(null,q));return ee},E.n=function(j){var B=j&&j.__esModule?function(){return j.default}:function(){return j};return E.d(B,"a",B),B},E.o=function(j,B){return Object.prototype.hasOwnProperty.call(j,B)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,V,E){E.r(V),E.d(V,"CacheControl",function(){return Ee}),E.d(V,"parse",function(){return Be}),E.d(V,"format",function(){return ke}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function j(ze,We){return _e(ze)||me(ze,We)||ee(ze,We)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(ze,We){if(ze){if(typeof ze=="string")return q(ze,We);var He=Object.prototype.toString.call(ze).slice(8,-1);if(He==="Object"&&ze.constructor&&(He=ze.constructor.name),He==="Map"||He==="Set")return Array.from(ze);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return q(ze,We)}}function q(ze,We){(We==null||We>ze.length)&&(We=ze.length);for(var He=0,rt=new Array(We);He<We;He++)rt[He]=ze[He];return rt}function me(ze,We){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ze)))){var He=[],rt=!0,ht=!1,wt=void 0;try{for(var Mt=ze[Symbol.iterator](),gt;!(rt=(gt=Mt.next()).done)&&(He.push(gt.value),!(We&&He.length===We));rt=!0);}catch(Et){ht=!0,wt=Et}finally{try{!rt&&Mt.return!=null&&Mt.return()}finally{if(ht)throw wt}}return He}}function _e(ze){if(Array.isArray(ze))return ze}function de(ze,We){if(!(ze instanceof We))throw new TypeError("Cannot call a class as a function")}function oe(ze,We){for(var He=0;He<We.length;He++){var rt=We[He];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(ze,rt.key,rt)}}function le(ze,We,He){return We&&oe(ze.prototype,We),He&&oe(ze,He),ze}var Q=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function he(ze){return ze===null}function be(ze){if(!ze)return null;var We=parseInt(ze,10);return!Number.isFinite(We)||We<0?null:We}var Ee=function(){function ze(){de(this,ze),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return le(ze,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var rt={},ht=He.match(Q)||[];return Array.prototype.forEach.call(ht,function(wt){var Mt=wt.split("=",2),gt=j(Mt,1),Et=gt[0],$t=null;Mt.length>1&&($t=Mt[1].trim()),rt[Et.toLowerCase()]=$t}),this.maxAge=be(rt[te.maxAge]),this.sharedMaxAge=be(rt[te.sharedMaxAge]),this.maxStale=he(rt[te.maxStale]),this.maxStaleDuration=be(rt[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=be(rt[te.minFresh]),this.immutable=he(rt[te.immutable]),this.mustRevalidate=he(rt[te.mustRevalidate]),this.noCache=he(rt[te.noCache]),this.noStore=he(rt[te.noStore]),this.noTransform=he(rt[te.noTransform]),this.onlyIfCached=he(rt[te.onlyIfCached]),this.private=he(rt[te.private]),this.proxyRevalidate=he(rt[te.proxyRevalidate]),this.public=he(rt[te.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):He.push(te.maxStale)),this.minFresh&&He.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(te.immutable),this.mustRevalidate&&He.push(te.mustRevalidate),this.noCache&&He.push(te.noCache),this.noStore&&He.push(te.noStore),this.noTransform&&He.push(te.noTransform),this.onlyIfCached&&He.push(te.onlyIfCached),this.private&&He.push(te.private),this.proxyRevalidate&&He.push(te.proxyRevalidate),this.public&&He.push(te.public),He.join(", ")}}]),ze}();function Be(ze){var We=new Ee;return We.parse(ze)}function ke(ze){return ze instanceof Ee?ze.format():Ee.prototype.format.call(ze)}V.default={CacheControl:Ee,parse:Be,format:ke}},"./node_modules/charenc/charenc.js":function(X,V){var E={utf8:{stringToBytes:function(j){return E.bin.stringToBytes(unescape(encodeURIComponent(j)))},bytesToString:function(j){return decodeURIComponent(escape(E.bin.bytesToString(j)))}},bin:{stringToBytes:function(j){for(var B=[],ee=0;ee<j.length;ee++)B.push(j.charCodeAt(ee)&255);return B},bytesToString:function(j){for(var B=[],ee=0;ee<j.length;ee++)B.push(String.fromCharCode(j[ee]));return B.join("")}}};X.exports=E},"./node_modules/core-js/modules/_a-function.js":function(X,V){X.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[j]==null&&E("./node_modules/core-js/modules/_hide.js")(B,j,{}),X.exports=function(ee){B[j][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(B,ee,q){return ee+(q?j(B,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(B){if(!j(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),B=E("./node_modules/core-js/modules/_to-length.js"),ee=E("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(q){return function(me,_e,de){var oe=j(me),le=B(oe.length),Q=ee(de,le),te;if(q&&_e!=_e){for(;le>Q;)if(te=oe[Q++],te!=te)return!0}else for(;le>Q;Q++)if((q||Q in oe)&&oe[Q]===_e)return q||Q||0;return!q&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_a-function.js"),B=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_invoke.js"),q=[].slice,me={},_e=function(de,oe,le){if(!(oe in me)){for(var Q=[],te=0;te<oe;te++)Q[te]="a["+te+"]";me[oe]=Function("F,a","return new F("+Q.join(",")+")")}return me[oe](de,le)};X.exports=Function.bind||function(oe){var le=j(this),Q=q.call(arguments,1),te=function(){var he=Q.concat(q.call(arguments));return this instanceof te?_e(le,he.length,he):ee(le,he,oe)};return B(le.prototype)&&(te.prototype=le.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_cof.js"),B=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=j(function(){return arguments}())=="Arguments",q=function(me,_e){try{return me[_e]}catch{}};X.exports=function(me){var _e,de,oe;return me===void 0?"Undefined":me===null?"Null":typeof(de=q(_e=Object(me),B))=="string"?de:ee?j(_e):(oe=j(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,V){var E={}.toString;X.exports=function(j){return E.call(j).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,V){var E=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),B=E("./node_modules/core-js/modules/_property-desc.js");X.exports=function(ee,q,me){q in ee?j.f(ee,q,B(0,me)):ee[q]=me}},"./node_modules/core-js/modules/_ctx.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_a-function.js");X.exports=function(B,ee,q){if(j(B),ee===void 0)return B;switch(q){case 1:return function(me){return B.call(ee,me)};case 2:return function(me,_e){return B.call(ee,me,_e)};case 3:return function(me,_e,de){return B.call(ee,me,_e,de)}}return function(){return B.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,V){X.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(X,V,E){X.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js"),B=E("./node_modules/core-js/modules/_global.js").document,ee=j(B)&&j(B.createElement);X.exports=function(q){return ee?B.createElement(q):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,V){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-keys.js"),B=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_object-pie.js");X.exports=function(q){var me=j(q),_e=B.f;if(_e)for(var de=_e(q),oe=ee.f,le=0,Q;de.length>le;)oe.call(q,Q=de[le++])&&me.push(Q);return me}},"./node_modules/core-js/modules/_export.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_hide.js"),q=E("./node_modules/core-js/modules/_redefine.js"),me=E("./node_modules/core-js/modules/_ctx.js"),_e="prototype",de=function(oe,le,Q){var te=oe&de.F,he=oe&de.G,be=oe&de.S,Ee=oe&de.P,Be=oe&de.B,ke=he?j:be?j[le]||(j[le]={}):(j[le]||{})[_e],ze=he?B:B[le]||(B[le]={}),We=ze[_e]||(ze[_e]={}),He,rt,ht,wt;he&&(Q=le);for(He in Q)rt=!te&&ke&&ke[He]!==void 0,ht=(rt?ke:Q)[He],wt=Be&&rt?me(ht,j):Ee&&typeof ht=="function"?me(Function.call,ht):ht,ke&&q(ke,He,ht,oe&de.U),ze[He]!=ht&&ee(ze,He,wt),Ee&&We[He]!=ht&&(We[He]=ht)};j.core=B,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128,X.exports=de},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(B){var ee=/./;try{"/./"[B](ee)}catch{try{return ee[j]=!1,!"/./"[B](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,V){X.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,V,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var j=E("./node_modules/core-js/modules/_redefine.js"),B=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_fails.js"),q=E("./node_modules/core-js/modules/_defined.js"),me=E("./node_modules/core-js/modules/_wks.js"),_e=E("./node_modules/core-js/modules/_regexp-exec.js"),de=me("species"),oe=!ee(function(){var Q=/./;return Q.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(Q,"$<a>")!=="7"}),le=function(){var Q=/(?:)/,te=Q.exec;Q.exec=function(){return te.apply(this,arguments)};var he="ab".split(Q);return he.length===2&&he[0]==="a"&&he[1]==="b"}();X.exports=function(Q,te,he){var be=me(Q),Ee=!ee(function(){var rt={};return rt[be]=function(){return 7},""[Q](rt)!=7}),Be=Ee?!ee(function(){var rt=!1,ht=/a/;return ht.exec=function(){return rt=!0,null},Q==="split"&&(ht.constructor={},ht.constructor[de]=function(){return ht}),ht[be](""),!rt}):void 0;if(!Ee||!Be||Q==="replace"&&!oe||Q==="split"&&!le){var ke=/./[be],ze=he(q,be,""[Q],function(ht,wt,Mt,gt,Et){return wt.exec===_e?Ee&&!Et?{done:!0,value:ke.call(wt,Mt,gt)}:{done:!0,value:ht.call(Mt,wt,gt)}:{done:!1}}),We=ze[0],He=ze[1];j(String.prototype,Q,We),B(RegExp.prototype,be,te==2?function(rt,ht){return He.call(rt,this,ht)}:function(rt){return He.call(rt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var B=j(this),ee="";return B.global&&(ee+="g"),B.ignoreCase&&(ee+="i"),B.multiline&&(ee+="m"),B.unicode&&(ee+="u"),B.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(X,V,E){X.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,V){var E=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(X,V){var E={}.hasOwnProperty;X.exports=function(j,B){return E.call(j,B)}},"./node_modules/core-js/modules/_hide.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),B=E("./node_modules/core-js/modules/_property-desc.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(ee,q,me){return j.f(ee,q,B(1,me))}:function(ee,q,me){return ee[q]=me,ee}},"./node_modules/core-js/modules/_html.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js").document;X.exports=j&&j.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,V,E){X.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,V){X.exports=function(E,j,B){var ee=B===void 0;switch(j.length){case 0:return ee?E():E.call(B);case 1:return ee?E(j[0]):E.call(B,j[0]);case 2:return ee?E(j[0],j[1]):E.call(B,j[0],j[1]);case 3:return ee?E(j[0],j[1],j[2]):E.call(B,j[0],j[1],j[2]);case 4:return ee?E(j[0],j[1],j[2],j[3]):E.call(B,j[0],j[1],j[2],j[3])}return E.apply(B,j)}},"./node_modules/core-js/modules/_iobject.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return j(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_iterators.js"),B=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;X.exports=function(q){return q!==void 0&&(j.Array===q||ee[B]===q)}},"./node_modules/core-js/modules/_is-array.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(ee){return j(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,V){X.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js"),B=E("./node_modules/core-js/modules/_cof.js"),ee=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(q){var me;return j(q)&&((me=q[ee])!==void 0?!!me:B(q)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(B,ee,q,me){try{return me?ee(j(q)[0],q[1]):ee(q)}catch(de){var _e=B.return;throw _e!==void 0&&j(_e.call(B)),de}}},"./node_modules/core-js/modules/_iter-create.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-create.js"),B=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_set-to-string-tag.js"),q={};E("./node_modules/core-js/modules/_hide.js")(q,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(me,_e,de){me.prototype=j(q,{next:B(1,de)}),ee(me,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_library.js"),B=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),q=E("./node_modules/core-js/modules/_hide.js"),me=E("./node_modules/core-js/modules/_iterators.js"),_e=E("./node_modules/core-js/modules/_iter-create.js"),de=E("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=E("./node_modules/core-js/modules/_object-gpo.js"),le=E("./node_modules/core-js/modules/_wks.js")("iterator"),Q=!([].keys&&"next"in[].keys()),te="@@iterator",he="keys",be="values",Ee=function(){return this};X.exports=function(Be,ke,ze,We,He,rt,ht){_e(ze,ke,We);var wt=function(N){if(!Q&&N in $t)return $t[N];switch(N){case he:return function(){return new ze(this,N)};case be:return function(){return new ze(this,N)}}return function(){return new ze(this,N)}},Mt=ke+" Iterator",gt=He==be,Et=!1,$t=Be.prototype,Ht=$t[le]||$t[te]||He&&$t[He],qt=Ht||wt(He),bn=He?gt?wt("entries"):qt:void 0,et=ke=="Array"&&$t.entries||Ht,hn,xn,we;if(et&&(we=oe(et.call(new Be)),we!==Object.prototype&&we.next&&(de(we,Mt,!0),!j&&typeof we[le]!="function"&&q(we,le,Ee))),gt&&Ht&&Ht.name!==be&&(Et=!0,qt=function(){return Ht.call(this)}),(!j||ht)&&(Q||Et||!$t[le])&&q($t,le,qt),me[ke]=qt,me[Mt]=Ee,He)if(hn={values:gt?qt:wt(be),keys:rt?qt:wt(he),entries:bn},ht)for(xn in hn)xn in $t||ee($t,xn,hn[xn]);else B(B.P+B.F*(Q||Et),ke,hn);return hn}},"./node_modules/core-js/modules/_iter-detect.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var ee=[7][j]();ee.return=function(){B=!0},Array.from(ee,function(){throw 2})}catch{}X.exports=function(q,me){if(!me&&!B)return!1;var _e=!1;try{var de=[7],oe=de[j]();oe.next=function(){return{done:_e=!0}},de[j]=function(){return oe},q(de)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(X,V){X.exports=function(E,j){return{value:j,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(X,V){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,V){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_uid.js")("meta"),B=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_object-dp.js").f,me=0,_e=Object.isExtensible||function(){return!0},de=!E("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(be){q(be,j,{value:{i:"O"+ ++me,w:{}}})},le=function(be,Ee){if(!B(be))return typeof be=="symbol"?be:(typeof be=="string"?"S":"P")+be;if(!ee(be,j)){if(!_e(be))return"F";if(!Ee)return"E";oe(be)}return be[j].i},Q=function(be,Ee){if(!ee(be,j)){if(!_e(be))return!0;if(!Ee)return!1;oe(be)}return be[j].w},te=function(be){return de&&he.NEED&&_e(be)&&!ee(be,j)&&oe(be),be},he=X.exports={KEY:j,NEED:!1,fastKey:le,getWeak:Q,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),B=E("./node_modules/core-js/modules/_object-dps.js"),ee=E("./node_modules/core-js/modules/_enum-bug-keys.js"),q=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),me=function(){},_e="prototype",de=function(){var oe=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),le=ee.length,Q="<",te=">",he;for(oe.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",he=oe.contentWindow.document,he.open(),he.write(Q+"script"+te+"document.F=Object"+Q+"/script"+te),he.close(),de=he.F;le--;)delete de[_e][ee[le]];return de()};X.exports=Object.create||function(le,Q){var te;return le!==null?(me[_e]=j(le),te=new me,me[_e]=null,te[q]=le):te=de(),Q===void 0?te:B(te,Q)}},"./node_modules/core-js/modules/_object-dp.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),B=E("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),q=Object.defineProperty;V.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,de,oe){if(j(_e),de=ee(de,!0),j(oe),B)try{return q(_e,de,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[de]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),B=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_object-keys.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(me,_e){B(me);for(var de=ee(_e),oe=de.length,le=0,Q;oe>le;)j.f(me,Q=de[le++],_e[Q]);return me}},"./node_modules/core-js/modules/_object-gopd.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-pie.js"),B=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),q=E("./node_modules/core-js/modules/_to-primitive.js"),me=E("./node_modules/core-js/modules/_has.js"),_e=E("./node_modules/core-js/modules/_ie8-dom-define.js"),de=Object.getOwnPropertyDescriptor;V.f=E("./node_modules/core-js/modules/_descriptors.js")?de:function(le,Q){if(le=ee(le),Q=q(Q,!0),_e)try{return de(le,Q)}catch{}if(me(le,Q))return B(!j.f.call(le,Q),le[Q])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),B=E("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],me=function(_e){try{return B(_e)}catch{return q.slice()}};X.exports.f=function(de){return q&&ee.call(de)=="[object Window]"?me(de):B(j(de))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),B=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");V.f=Object.getOwnPropertyNames||function(q){return j(q,B)}},"./node_modules/core-js/modules/_object-gops.js":function(X,V){V.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_has.js"),B=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),q=Object.prototype;X.exports=Object.getPrototypeOf||function(me){return me=B(me),j(me,ee)?me[ee]:typeof me.constructor=="function"&&me instanceof me.constructor?me.constructor.prototype:me instanceof Object?q:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_has.js"),B=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_array-includes.js")(!1),q=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(me,_e){var de=B(me),oe=0,le=[],Q;for(Q in de)Q!=q&&j(de,Q)&&le.push(Q);for(;_e.length>oe;)j(de,Q=_e[oe++])&&(~ee(le,Q)||le.push(Q));return le}},"./node_modules/core-js/modules/_object-keys.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),B=E("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(q){return j(q,B)}},"./node_modules/core-js/modules/_object-pie.js":function(X,V){V.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-gopn.js"),B=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_an-object.js"),q=E("./node_modules/core-js/modules/_global.js").Reflect;X.exports=q&&q.ownKeys||function(_e){var de=j.f(ee(_e)),oe=B.f;return oe?de.concat(oe(_e)):de}},"./node_modules/core-js/modules/_property-desc.js":function(X,V){X.exports=function(E,j){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:j}}},"./node_modules/core-js/modules/_redefine.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_has.js"),q=E("./node_modules/core-js/modules/_uid.js")("src"),me=E("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",de=(""+me).split(_e);E("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return me.call(oe)},(X.exports=function(oe,le,Q,te){var he=typeof Q=="function";he&&(ee(Q,"name")||B(Q,"name",le)),oe[le]!==Q&&(he&&(ee(Q,q)||B(Q,q,oe[le]?""+oe[le]:de.join(String(le)))),oe===j?oe[le]=Q:te?oe[le]?oe[le]=Q:B(oe,le,Q):(delete oe[le],B(oe,le,Q)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[q]||me.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;X.exports=function(ee,q){var me=ee.exec;if(typeof me=="function"){var _e=me.call(ee,q);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(j(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(ee,q)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,ee=String.prototype.replace,q=B,me="lastIndex",_e=function(){var le=/a/,Q=/b*/g;return B.call(le,"a"),B.call(Q,"a"),le[me]!==0||Q[me]!==0}(),de=/()??/.exec("")[1]!==void 0,oe=_e||de;oe&&(q=function(Q){var te=this,he,be,Ee,Be;return de&&(be=new RegExp("^"+te.source+"$(?!\\s)",j.call(te))),_e&&(he=te[me]),Ee=B.call(te,Q),_e&&Ee&&(te[me]=te.global?Ee.index+Ee[0].length:he),de&&Ee&&Ee.length>1&&ee.call(Ee[0],be,function(){for(Be=1;Be<arguments.length-2;Be++)arguments[Be]===void 0&&(Ee[Be]=void 0)}),Ee}),X.exports=q},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,B=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(q,me,_e){q&&!B(q=_e?q:q.prototype,ee)&&j(q,ee,{configurable:!0,value:me})}},"./node_modules/core-js/modules/_shared-key.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_shared.js")("keys"),B=E("./node_modules/core-js/modules/_uid.js");X.exports=function(ee){return j[ee]||(j[ee]=B(ee))}},"./node_modules/core-js/modules/_shared.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_core.js"),B=E("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",q=B[ee]||(B[ee]={});(X.exports=function(me,_e){return q[me]||(q[me]=_e!==void 0?_e:{})})("versions",[]).push({version:j.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_an-object.js"),B=E("./node_modules/core-js/modules/_a-function.js"),ee=E("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(q,me){var _e=j(q).constructor,de;return _e===void 0||(de=j(_e)[ee])==null?me:B(de)}},"./node_modules/core-js/modules/_string-at.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),B=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return function(q,me){var _e=String(B(q)),de=j(me),oe=_e.length,le,Q;return de<0||de>=oe?ee?"":void 0:(le=_e.charCodeAt(de),le<55296||le>56319||de+1===oe||(Q=_e.charCodeAt(de+1))<56320||Q>57343?ee?_e.charAt(de):le:ee?_e.slice(de,de+2):(le-55296<<10)+(Q-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),B=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee,q,me){if(j(q))throw TypeError("String#"+me+" doesn't accept regex!");return String(B(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,ee=Math.min;X.exports=function(q,me){return q=j(q),q<0?B(q+me,0):ee(q,me)}},"./node_modules/core-js/modules/_to-integer.js":function(X,V){var E=Math.ceil,j=Math.floor;X.exports=function(B){return isNaN(B=+B)?0:(B>0?j:E)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_iobject.js"),B=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return j(B(ee))}},"./node_modules/core-js/modules/_to-length.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;X.exports=function(ee){return ee>0?B(j(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_defined.js");X.exports=function(B){return Object(j(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(B,ee){if(!j(B))return B;var q,me;if(ee&&typeof(q=B.toString)=="function"&&!j(me=q.call(B))||typeof(q=B.valueOf)=="function"&&!j(me=q.call(B))||!ee&&typeof(q=B.toString)=="function"&&!j(me=q.call(B)))return me;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,V){var E=0,j=Math.random();X.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++E+j).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_library.js"),q=E("./node_modules/core-js/modules/_wks-ext.js"),me=E("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(_e){var de=B.Symbol||(B.Symbol=ee?{}:j.Symbol||{});_e.charAt(0)!="_"&&!(_e in de)&&me(de,_e,{value:q.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,V,E){V.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_shared.js")("wks"),B=E("./node_modules/core-js/modules/_uid.js"),ee=E("./node_modules/core-js/modules/_global.js").Symbol,q=typeof ee=="function",me=X.exports=function(_e){return j[_e]||(j[_e]=q&&ee[_e]||(q?ee:B)("Symbol."+_e))};me.store=j},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),B=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=E("./node_modules/core-js/modules/_iterators.js");X.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(q){if(q!=null)return q[B]||q["@@iterator"]||ee[j(q)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_ctx.js"),B=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_to-object.js"),q=E("./node_modules/core-js/modules/_iter-call.js"),me=E("./node_modules/core-js/modules/_is-array-iter.js"),_e=E("./node_modules/core-js/modules/_to-length.js"),de=E("./node_modules/core-js/modules/_create-property.js"),oe=E("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(le){Array.from(le)}),"Array",{from:function(Q){var te=ee(Q),he=typeof this=="function"?this:Array,be=arguments.length,Ee=be>1?arguments[1]:void 0,Be=Ee!==void 0,ke=0,ze=oe(te),We,He,rt,ht;if(Be&&(Ee=j(Ee,be>2?arguments[2]:void 0,2)),ze!=null&&!(he==Array&&me(ze)))for(ht=ze.call(te),He=new he;!(rt=ht.next()).done;ke++)de(He,ke,Be?q(ht,Ee,[rt.value,ke],!0):rt.value);else for(We=_e(te.length),He=new he(We);We>ke;ke++)de(He,ke,Be?Ee(te[ke],ke):te[ke]);return He.length=ke,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_add-to-unscopables.js"),B=E("./node_modules/core-js/modules/_iter-step.js"),ee=E("./node_modules/core-js/modules/_iterators.js"),q=E("./node_modules/core-js/modules/_to-iobject.js");X.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(me,_e){this._t=q(me),this._i=0,this._k=_e},function(){var me=this._t,_e=this._k,de=this._i++;return!me||de>=me.length?(this._t=void 0,B(1)):_e=="keys"?B(0,de):_e=="values"?B(0,me[de]):B(0,[de,me[de]])},"values"),ee.Arguments=ee.Array,j("keys"),j("values"),j("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js");j(j.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,ee=/^\s*function ([^ (]*)/,q="name";q in B||E("./node_modules/core-js/modules/_descriptors.js")&&j(B,q,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_global.js").isFinite;j(j.S,"Number",{isFinite:function(q){return typeof q=="number"&&B(q)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_classof.js"),B={};B[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+j(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:j!==/./.exec},{exec:j})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),B=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_species-constructor.js"),q=E("./node_modules/core-js/modules/_advance-string-index.js"),me=E("./node_modules/core-js/modules/_to-length.js"),_e=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),de=E("./node_modules/core-js/modules/_regexp-exec.js"),oe=E("./node_modules/core-js/modules/_fails.js"),le=Math.min,Q=[].push,te="split",he="length",be="lastIndex",Ee=4294967295,Be=!oe(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(ke,ze,We,He){var rt;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[he]!=4||"ab"[te](/(?:ab)*/)[he]!=2||"."[te](/(.?)(.?)/)[he]!=4||"."[te](/()()/)[he]>1||""[te](/.?/)[he]?rt=function(ht,wt){var Mt=String(this);if(ht===void 0&&wt===0)return[];if(!j(ht))return We.call(Mt,ht,wt);for(var gt=[],Et=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(ht.sticky?"y":""),$t=0,Ht=wt===void 0?Ee:wt>>>0,qt=new RegExp(ht.source,Et+"g"),bn,et,hn;(bn=de.call(qt,Mt))&&(et=qt[be],!(et>$t&&(gt.push(Mt.slice($t,bn.index)),bn[he]>1&&bn.index<Mt[he]&&Q.apply(gt,bn.slice(1)),hn=bn[0][he],$t=et,gt[he]>=Ht)));)qt[be]===bn.index&&qt[be]++;return $t===Mt[he]?(hn||!qt.test(""))&&gt.push(""):gt.push(Mt.slice($t)),gt[he]>Ht?gt.slice(0,Ht):gt}:"0"[te](void 0,0)[he]?rt=function(ht,wt){return ht===void 0&&wt===0?[]:We.call(this,ht,wt)}:rt=We,[function(wt,Mt){var gt=ke(this),Et=wt==null?void 0:wt[ze];return Et!==void 0?Et.call(wt,gt,Mt):rt.call(String(gt),wt,Mt)},function(ht,wt){var Mt=He(rt,ht,this,wt,rt!==We);if(Mt.done)return Mt.value;var gt=B(ht),Et=String(this),$t=ee(gt,RegExp),Ht=gt.unicode,qt=(gt.ignoreCase?"i":"")+(gt.multiline?"m":"")+(gt.unicode?"u":"")+(Be?"y":"g"),bn=new $t(Be?gt:"^(?:"+gt.source+")",qt),et=wt===void 0?Ee:wt>>>0;if(et===0)return[];if(Et.length===0)return _e(bn,Et)===null?[Et]:[];for(var hn=0,xn=0,we=[];xn<Et.length;){bn.lastIndex=Be?xn:0;var N=_e(bn,Be?Et:Et.slice(xn)),D;if(N===null||(D=le(me(bn.lastIndex+(Be?0:xn)),Et.length))===hn)xn=q(Et,xn,Ht);else{if(we.push(Et.slice(hn,xn)),we.length===et)return we;for(var xe=1;xe<=N.length-1;xe++)if(we.push(N[xe]),we.length===et)return we;xn=hn=D}}return we.push(Et.slice(hn)),we}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_string-context.js"),ee="includes";j(j.P+j.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(me){return!!~B(this,me,ee).indexOf(me,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_global.js"),B=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_descriptors.js"),q=E("./node_modules/core-js/modules/_export.js"),me=E("./node_modules/core-js/modules/_redefine.js"),_e=E("./node_modules/core-js/modules/_meta.js").KEY,de=E("./node_modules/core-js/modules/_fails.js"),oe=E("./node_modules/core-js/modules/_shared.js"),le=E("./node_modules/core-js/modules/_set-to-string-tag.js"),Q=E("./node_modules/core-js/modules/_uid.js"),te=E("./node_modules/core-js/modules/_wks.js"),he=E("./node_modules/core-js/modules/_wks-ext.js"),be=E("./node_modules/core-js/modules/_wks-define.js"),Ee=E("./node_modules/core-js/modules/_enum-keys.js"),Be=E("./node_modules/core-js/modules/_is-array.js"),ke=E("./node_modules/core-js/modules/_an-object.js"),ze=E("./node_modules/core-js/modules/_is-object.js"),We=E("./node_modules/core-js/modules/_to-object.js"),He=E("./node_modules/core-js/modules/_to-iobject.js"),rt=E("./node_modules/core-js/modules/_to-primitive.js"),ht=E("./node_modules/core-js/modules/_property-desc.js"),wt=E("./node_modules/core-js/modules/_object-create.js"),Mt=E("./node_modules/core-js/modules/_object-gopn-ext.js"),gt=E("./node_modules/core-js/modules/_object-gopd.js"),Et=E("./node_modules/core-js/modules/_object-gops.js"),$t=E("./node_modules/core-js/modules/_object-dp.js"),Ht=E("./node_modules/core-js/modules/_object-keys.js"),qt=gt.f,bn=$t.f,et=Mt.f,hn=j.Symbol,xn=j.JSON,we=xn&&xn.stringify,N="prototype",D=te("_hidden"),xe=te("toPrimitive"),Ze={}.propertyIsEnumerable,Qe=oe("symbol-registry"),ct=oe("symbols"),ae=oe("op-symbols"),R=Object[N],z=typeof hn=="function"&&!!Et.f,Se=j.QObject,Ve=!Se||!Se[N]||!Se[N].findChild,nt=ee&&de(function(){return wt(bn({},"a",{get:function(){return bn(this,"a",{value:7}).a}})).a!=7})?function(Ne,Le,$e){var Fe=qt(R,Le);Fe&&delete R[Le],bn(Ne,Le,$e),Fe&&Ne!==R&&bn(R,Le,Fe)}:bn,ot=function(Ne){var Le=ct[Ne]=wt(hn[N]);return Le._k=Ne,Le},lt=z&&typeof hn.iterator=="symbol"?function(Ne){return typeof Ne=="symbol"}:function(Ne){return Ne instanceof hn},Dt=function(Le,$e,Fe){return Le===R&&Dt(ae,$e,Fe),ke(Le),$e=rt($e,!0),ke(Fe),B(ct,$e)?(Fe.enumerable?(B(Le,D)&&Le[D][$e]&&(Le[D][$e]=!1),Fe=wt(Fe,{enumerable:ht(0,!1)})):(B(Le,D)||bn(Le,D,ht(1,{})),Le[D][$e]=!0),nt(Le,$e,Fe)):bn(Le,$e,Fe)},Ft=function(Le,$e){ke(Le);for(var Fe=Ee($e=He($e)),Ye=0,dt=Fe.length,ut;dt>Ye;)Dt(Le,ut=Fe[Ye++],$e[ut]);return Le},yn=function(Le,$e){return $e===void 0?wt(Le):Ft(wt(Le),$e)},vn=function(Le){var $e=Ze.call(this,Le=rt(Le,!0));return this===R&&B(ct,Le)&&!B(ae,Le)?!1:$e||!B(this,Le)||!B(ct,Le)||B(this,D)&&this[D][Le]?$e:!0},un=function(Le,$e){if(Le=He(Le),$e=rt($e,!0),!(Le===R&&B(ct,$e)&&!B(ae,$e))){var Fe=qt(Le,$e);return Fe&&B(ct,$e)&&!(B(Le,D)&&Le[D][$e])&&(Fe.enumerable=!0),Fe}},Oi=function(Le){for(var $e=et(He(Le)),Fe=[],Ye=0,dt;$e.length>Ye;)!B(ct,dt=$e[Ye++])&&dt!=D&&dt!=_e&&Fe.push(dt);return Fe},or=function(Le){for(var $e=Le===R,Fe=et($e?ae:He(Le)),Ye=[],dt=0,ut;Fe.length>dt;)B(ct,ut=Fe[dt++])&&(!$e||B(R,ut))&&Ye.push(ct[ut]);return Ye};z||(hn=function(){if(this instanceof hn)throw TypeError("Symbol is not a constructor!");var Le=Q(arguments.length>0?arguments[0]:void 0),$e=function(Fe){this===R&&$e.call(ae,Fe),B(this,D)&&B(this[D],Le)&&(this[D][Le]=!1),nt(this,Le,ht(1,Fe))};return ee&&Ve&&nt(R,Le,{configurable:!0,set:$e}),ot(Le)},me(hn[N],"toString",function(){return this._k}),gt.f=un,$t.f=Dt,E("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=Oi,E("./node_modules/core-js/modules/_object-pie.js").f=vn,Et.f=or,ee&&!E("./node_modules/core-js/modules/_library.js")&&me(R,"propertyIsEnumerable",vn,!0),he.f=function(Ne){return ot(te(Ne))}),q(q.G+q.W+q.F*!z,{Symbol:hn});for(var Me="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;Me.length>re;)te(Me[re++]);for(var ce=Ht(te.store),ge=0;ce.length>ge;)be(ce[ge++]);q(q.S+q.F*!z,"Symbol",{for:function(Ne){return B(Qe,Ne+="")?Qe[Ne]:Qe[Ne]=hn(Ne)},keyFor:function(Le){if(!lt(Le))throw TypeError(Le+" is not a symbol!");for(var $e in Qe)if(Qe[$e]===Le)return $e},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),q(q.S+q.F*!z,"Object",{create:yn,defineProperty:Dt,defineProperties:Ft,getOwnPropertyDescriptor:un,getOwnPropertyNames:Oi,getOwnPropertySymbols:or});var Ie=de(function(){Et.f(1)});q(q.S+q.F*Ie,"Object",{getOwnPropertySymbols:function(Le){return Et.f(We(Le))}}),xn&&q(q.S+q.F*(!z||de(function(){var Ne=hn();return we([Ne])!="[null]"||we({a:Ne})!="{}"||we(Object(Ne))!="{}"})),"JSON",{stringify:function(Le){for(var $e=[Le],Fe=1,Ye,dt;arguments.length>Fe;)$e.push(arguments[Fe++]);if(dt=Ye=$e[1],!(!ze(Ye)&&Le===void 0||lt(Le)))return Be(Ye)||(Ye=function(ut,ft){if(typeof dt=="function"&&(ft=dt.call(this,ut,ft)),!lt(ft))return ft}),$e[1]=Ye,we.apply(xn,$e)}}),hn[N][xe]||E("./node_modules/core-js/modules/_hide.js")(hn[N],xe,hn[N].valueOf),le(hn,"Symbol"),le(Math,"Math",!0),le(j.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_array-includes.js")(!0);j(j.P,"Array",{includes:function(q){return B(this,q,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,V,E){var j=E("./node_modules/core-js/modules/_export.js"),B=E("./node_modules/core-js/modules/_own-keys.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),q=E("./node_modules/core-js/modules/_object-gopd.js"),me=E("./node_modules/core-js/modules/_create-property.js");j(j.S,"Object",{getOwnPropertyDescriptors:function(de){for(var oe=ee(de),le=q.f,Q=B(oe),te={},he=0,be,Ee;Q.length>he;)Ee=le(oe,be=Q[he++]),Ee!==void 0&&me(te,be,Ee);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,V,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,V,E){for(var j=E("./node_modules/core-js/modules/es6.array.iterator.js"),B=E("./node_modules/core-js/modules/_object-keys.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),q=E("./node_modules/core-js/modules/_global.js"),me=E("./node_modules/core-js/modules/_hide.js"),_e=E("./node_modules/core-js/modules/_iterators.js"),de=E("./node_modules/core-js/modules/_wks.js"),oe=de("iterator"),le=de("toStringTag"),Q=_e.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},he=B(te),be=0;be<he.length;be++){var Ee=he[be],Be=te[Ee],ke=q[Ee],ze=ke&&ke.prototype,We;if(ze&&(ze[oe]||me(ze,oe,Q),ze[le]||me(ze,le,Ee),_e[Ee]=Q,Be))for(We in j)ze[We]||ee(ze,We,j[We],!0)}},"./node_modules/crypt/crypt.js":function(X,V){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j={rotl:function(B,ee){return B<<ee|B>>>32-ee},rotr:function(B,ee){return B<<32-ee|B>>>ee},endian:function(B){if(B.constructor==Number)return j.rotl(B,8)&16711935|j.rotl(B,24)&4278255360;for(var ee=0;ee<B.length;ee++)B[ee]=j.endian(B[ee]);return B},randomBytes:function(B){for(var ee=[];B>0;B--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(B){for(var ee=[],q=0,me=0;q<B.length;q++,me+=8)ee[me>>>5]|=B[q]<<24-me%32;return ee},wordsToBytes:function(B){for(var ee=[],q=0;q<B.length*32;q+=8)ee.push(B[q>>>5]>>>24-q%32&255);return ee},bytesToHex:function(B){for(var ee=[],q=0;q<B.length;q++)ee.push((B[q]>>>4).toString(16)),ee.push((B[q]&15).toString(16));return ee.join("")},hexToBytes:function(B){for(var ee=[],q=0;q<B.length;q+=2)ee.push(parseInt(B.substr(q,2),16));return ee},bytesToBase64:function(B){for(var ee=[],q=0;q<B.length;q+=3)for(var me=B[q]<<16|B[q+1]<<8|B[q+2],_e=0;_e<4;_e++)q*8+_e*6<=B.length*8?ee.push(E.charAt(me>>>6*(3-_e)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],q=0,me=0;q<B.length;me=++q%4)me!=0&&ee.push((E.indexOf(B.charAt(q-1))&Math.pow(2,-2*me+8)-1)<<me*2|E.indexOf(B.charAt(q))>>>6-me*2);return ee}};X.exports=j})()},"./node_modules/is-buffer/index.js":function(X,V){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(B){return B!=null&&(E(B)||j(B)||!!B._isBuffer)};function E(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function j(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&E(B.slice(0,0))}},"./node_modules/md5/md5.js":function(X,V,E){(function(){var j=E("./node_modules/crypt/crypt.js"),B=E("./node_modules/charenc/charenc.js").utf8,ee=E("./node_modules/is-buffer/index.js"),q=E("./node_modules/charenc/charenc.js").bin,me=function(_e,de){_e.constructor==String?de&&de.encoding==="binary"?_e=q.stringToBytes(_e):_e=B.stringToBytes(_e):ee(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=j.bytesToWords(_e),le=_e.length*8,Q=1732584193,te=-271733879,he=-1732584194,be=271733878,Ee=0;Ee<oe.length;Ee++)oe[Ee]=(oe[Ee]<<8|oe[Ee]>>>24)&16711935|(oe[Ee]<<24|oe[Ee]>>>8)&4278255360;oe[le>>>5]|=128<<le%32,oe[(le+64>>>9<<4)+14]=le;for(var Be=me._ff,ke=me._gg,ze=me._hh,We=me._ii,Ee=0;Ee<oe.length;Ee+=16){var He=Q,rt=te,ht=he,wt=be;Q=Be(Q,te,he,be,oe[Ee+0],7,-680876936),be=Be(be,Q,te,he,oe[Ee+1],12,-389564586),he=Be(he,be,Q,te,oe[Ee+2],17,606105819),te=Be(te,he,be,Q,oe[Ee+3],22,-1044525330),Q=Be(Q,te,he,be,oe[Ee+4],7,-176418897),be=Be(be,Q,te,he,oe[Ee+5],12,1200080426),he=Be(he,be,Q,te,oe[Ee+6],17,-1473231341),te=Be(te,he,be,Q,oe[Ee+7],22,-45705983),Q=Be(Q,te,he,be,oe[Ee+8],7,1770035416),be=Be(be,Q,te,he,oe[Ee+9],12,-1958414417),he=Be(he,be,Q,te,oe[Ee+10],17,-42063),te=Be(te,he,be,Q,oe[Ee+11],22,-1990404162),Q=Be(Q,te,he,be,oe[Ee+12],7,1804603682),be=Be(be,Q,te,he,oe[Ee+13],12,-40341101),he=Be(he,be,Q,te,oe[Ee+14],17,-1502002290),te=Be(te,he,be,Q,oe[Ee+15],22,1236535329),Q=ke(Q,te,he,be,oe[Ee+1],5,-165796510),be=ke(be,Q,te,he,oe[Ee+6],9,-1069501632),he=ke(he,be,Q,te,oe[Ee+11],14,643717713),te=ke(te,he,be,Q,oe[Ee+0],20,-373897302),Q=ke(Q,te,he,be,oe[Ee+5],5,-701558691),be=ke(be,Q,te,he,oe[Ee+10],9,38016083),he=ke(he,be,Q,te,oe[Ee+15],14,-660478335),te=ke(te,he,be,Q,oe[Ee+4],20,-405537848),Q=ke(Q,te,he,be,oe[Ee+9],5,568446438),be=ke(be,Q,te,he,oe[Ee+14],9,-1019803690),he=ke(he,be,Q,te,oe[Ee+3],14,-187363961),te=ke(te,he,be,Q,oe[Ee+8],20,1163531501),Q=ke(Q,te,he,be,oe[Ee+13],5,-1444681467),be=ke(be,Q,te,he,oe[Ee+2],9,-51403784),he=ke(he,be,Q,te,oe[Ee+7],14,1735328473),te=ke(te,he,be,Q,oe[Ee+12],20,-1926607734),Q=ze(Q,te,he,be,oe[Ee+5],4,-378558),be=ze(be,Q,te,he,oe[Ee+8],11,-2022574463),he=ze(he,be,Q,te,oe[Ee+11],16,1839030562),te=ze(te,he,be,Q,oe[Ee+14],23,-35309556),Q=ze(Q,te,he,be,oe[Ee+1],4,-1530992060),be=ze(be,Q,te,he,oe[Ee+4],11,1272893353),he=ze(he,be,Q,te,oe[Ee+7],16,-155497632),te=ze(te,he,be,Q,oe[Ee+10],23,-1094730640),Q=ze(Q,te,he,be,oe[Ee+13],4,681279174),be=ze(be,Q,te,he,oe[Ee+0],11,-358537222),he=ze(he,be,Q,te,oe[Ee+3],16,-722521979),te=ze(te,he,be,Q,oe[Ee+6],23,76029189),Q=ze(Q,te,he,be,oe[Ee+9],4,-640364487),be=ze(be,Q,te,he,oe[Ee+12],11,-421815835),he=ze(he,be,Q,te,oe[Ee+15],16,530742520),te=ze(te,he,be,Q,oe[Ee+2],23,-995338651),Q=We(Q,te,he,be,oe[Ee+0],6,-198630844),be=We(be,Q,te,he,oe[Ee+7],10,1126891415),he=We(he,be,Q,te,oe[Ee+14],15,-1416354905),te=We(te,he,be,Q,oe[Ee+5],21,-57434055),Q=We(Q,te,he,be,oe[Ee+12],6,1700485571),be=We(be,Q,te,he,oe[Ee+3],10,-1894986606),he=We(he,be,Q,te,oe[Ee+10],15,-1051523),te=We(te,he,be,Q,oe[Ee+1],21,-2054922799),Q=We(Q,te,he,be,oe[Ee+8],6,1873313359),be=We(be,Q,te,he,oe[Ee+15],10,-30611744),he=We(he,be,Q,te,oe[Ee+6],15,-1560198380),te=We(te,he,be,Q,oe[Ee+13],21,1309151649),Q=We(Q,te,he,be,oe[Ee+4],6,-145523070),be=We(be,Q,te,he,oe[Ee+11],10,-1120210379),he=We(he,be,Q,te,oe[Ee+2],15,718787259),te=We(te,he,be,Q,oe[Ee+9],21,-343485551),Q=Q+He>>>0,te=te+rt>>>0,he=he+ht>>>0,be=be+wt>>>0}return j.endian([Q,te,he,be])};me._ff=function(_e,de,oe,le,Q,te,he){var be=_e+(de&oe|~de&le)+(Q>>>0)+he;return(be<<te|be>>>32-te)+de},me._gg=function(_e,de,oe,le,Q,te,he){var be=_e+(de&le|oe&~le)+(Q>>>0)+he;return(be<<te|be>>>32-te)+de},me._hh=function(_e,de,oe,le,Q,te,he){var be=_e+(de^oe^le)+(Q>>>0)+he;return(be<<te|be>>>32-te)+de},me._ii=function(_e,de,oe,le,Q,te,he){var be=_e+(oe^(de|~le))+(Q>>>0)+he;return(be<<te|be>>>32-te)+de},me._blocksize=16,me._digestsize=16,X.exports=function(_e,de){if(_e==null)throw new Error("Illegal argument "+_e);var oe=j.wordsToBytes(me(_e,de));return de&&de.asBytes?oe:de&&de.asString?q.bytesToString(oe):j.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,V,E){var j=function(B){var ee=Object.prototype,q=ee.hasOwnProperty,me,_e=typeof Symbol=="function"?Symbol:{},de=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",le=_e.toStringTag||"@@toStringTag";function Q(N,D,xe){return Object.defineProperty(N,D,{value:xe,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{Q({},"")}catch{Q=function(D,xe,Ze){return D[xe]=Ze}}function te(N,D,xe,Ze){var Qe=D&&D.prototype instanceof We?D:We,ct=Object.create(Qe.prototype),ae=new hn(Ze||[]);return ct._invoke=Ht(N,xe,ae),ct}B.wrap=te;function he(N,D,xe){try{return{type:"normal",arg:N.call(D,xe)}}catch(Ze){return{type:"throw",arg:Ze}}}var be="suspendedStart",Ee="suspendedYield",Be="executing",ke="completed",ze={};function We(){}function He(){}function rt(){}var ht={};ht[de]=function(){return this};var wt=Object.getPrototypeOf,Mt=wt&&wt(wt(xn([])));Mt&&Mt!==ee&&q.call(Mt,de)&&(ht=Mt);var gt=rt.prototype=We.prototype=Object.create(ht);He.prototype=gt.constructor=rt,rt.constructor=He,He.displayName=Q(rt,le,"GeneratorFunction");function Et(N){["next","throw","return"].forEach(function(D){Q(N,D,function(xe){return this._invoke(D,xe)})})}B.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===He||(D.displayName||D.name)==="GeneratorFunction":!1},B.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,rt):(N.__proto__=rt,Q(N,le,"GeneratorFunction")),N.prototype=Object.create(gt),N},B.awrap=function(N){return{__await:N}};function $t(N,D){function xe(ct,ae,R,z){var Se=he(N[ct],N,ae);if(Se.type==="throw")z(Se.arg);else{var Ve=Se.arg,nt=Ve.value;return nt&&typeof nt=="object"&&q.call(nt,"__await")?D.resolve(nt.__await).then(function(ot){xe("next",ot,R,z)},function(ot){xe("throw",ot,R,z)}):D.resolve(nt).then(function(ot){Ve.value=ot,R(Ve)},function(ot){return xe("throw",ot,R,z)})}}var Ze;function Qe(ct,ae){function R(){return new D(function(z,Se){xe(ct,ae,z,Se)})}return Ze=Ze?Ze.then(R,R):R()}this._invoke=Qe}Et($t.prototype),$t.prototype[oe]=function(){return this},B.AsyncIterator=$t,B.async=function(N,D,xe,Ze,Qe){Qe===void 0&&(Qe=Promise);var ct=new $t(te(N,D,xe,Ze),Qe);return B.isGeneratorFunction(D)?ct:ct.next().then(function(ae){return ae.done?ae.value:ct.next()})};function Ht(N,D,xe){var Ze=be;return function(ct,ae){if(Ze===Be)throw new Error("Generator is already running");if(Ze===ke){if(ct==="throw")throw ae;return we()}for(xe.method=ct,xe.arg=ae;;){var R=xe.delegate;if(R){var z=qt(R,xe);if(z){if(z===ze)continue;return z}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Ze===be)throw Ze=ke,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Ze=Be;var Se=he(N,D,xe);if(Se.type==="normal"){if(Ze=xe.done?ke:Ee,Se.arg===ze)continue;return{value:Se.arg,done:xe.done}}else Se.type==="throw"&&(Ze=ke,xe.method="throw",xe.arg=Se.arg)}}}function qt(N,D){var xe=N.iterator[D.method];if(xe===me){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=me,qt(N,D),D.method==="throw"))return ze;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return ze}var Ze=he(xe,N.iterator,D.arg);if(Ze.type==="throw")return D.method="throw",D.arg=Ze.arg,D.delegate=null,ze;var Qe=Ze.arg;if(!Qe)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,ze;if(Qe.done)D[N.resultName]=Qe.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=me);else return Qe;return D.delegate=null,ze}Et(gt),Q(gt,le,"Generator"),gt[de]=function(){return this},gt.toString=function(){return"[object Generator]"};function bn(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function et(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function hn(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(bn,this),this.reset(!0)}B.keys=function(N){var D=[];for(var xe in N)D.push(xe);return D.reverse(),function Ze(){for(;D.length;){var Qe=D.pop();if(Qe in N)return Ze.value=Qe,Ze.done=!1,Ze}return Ze.done=!0,Ze}};function xn(N){if(N){var D=N[de];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var xe=-1,Ze=function Qe(){for(;++xe<N.length;)if(q.call(N,xe))return Qe.value=N[xe],Qe.done=!1,Qe;return Qe.value=me,Qe.done=!0,Qe};return Ze.next=Ze}}return{next:we}}B.values=xn;function we(){return{value:me,done:!0}}return hn.prototype={constructor:hn,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=me,this.done=!1,this.delegate=null,this.method="next",this.arg=me,this.tryEntries.forEach(et),!N)for(var D in this)D.charAt(0)==="t"&&q.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=me)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function xe(z,Se){return ct.type="throw",ct.arg=N,D.next=z,Se&&(D.method="next",D.arg=me),!!Se}for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var Qe=this.tryEntries[Ze],ct=Qe.completion;if(Qe.tryLoc==="root")return xe("end");if(Qe.tryLoc<=this.prev){var ae=q.call(Qe,"catchLoc"),R=q.call(Qe,"finallyLoc");if(ae&&R){if(this.prev<Qe.catchLoc)return xe(Qe.catchLoc,!0);if(this.prev<Qe.finallyLoc)return xe(Qe.finallyLoc)}else if(ae){if(this.prev<Qe.catchLoc)return xe(Qe.catchLoc,!0)}else if(R){if(this.prev<Qe.finallyLoc)return xe(Qe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Ze=this.tryEntries[xe];if(Ze.tryLoc<=this.prev&&q.call(Ze,"finallyLoc")&&this.prev<Ze.finallyLoc){var Qe=Ze;break}}Qe&&(N==="break"||N==="continue")&&Qe.tryLoc<=D&&D<=Qe.finallyLoc&&(Qe=null);var ct=Qe?Qe.completion:{};return ct.type=N,ct.arg=D,Qe?(this.method="next",this.next=Qe.finallyLoc,ze):this.complete(ct)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),ze},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.finallyLoc===N)return this.complete(xe.completion,xe.afterLoc),et(xe),ze}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.tryLoc===N){var Ze=xe.completion;if(Ze.type==="throw"){var Qe=Ze.arg;et(xe)}return Qe}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,xe){return this.delegate={iterator:xn(N),resultName:D,nextLoc:xe},this.method==="next"&&(this.arg=me),ze}},B}(X.exports);try{regeneratorRuntime=j}catch{Function("r","regeneratorRuntime = r")(j)}},"./src/api.js":function(X,V,E){E.r(V),E.d(V,"setup",function(){return Be}),E.d(V,"setupCache",function(){return Ee}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("axios"),B=E.n(j),ee=E("./src/request.js"),q=E("./src/cache.js");E.d(V,"serializeQuery",function(){return q.serializeQuery});var me=E("./src/config.js"),_e=E("./src/utilities.js");function de(ke,ze){if(ke==null)return{};var We=oe(ke,ze),He,rt;if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(ke);for(rt=0;rt<ht.length;rt++)He=ht[rt],!(ze.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(ke,He)&&(We[He]=ke[He])}return We}function oe(ke,ze){if(ke==null)return{};var We={},He=Object.keys(ke),rt,ht;for(ht=0;ht<He.length;ht++)rt=He[ht],!(ze.indexOf(rt)>=0)&&(We[rt]=ke[rt]);return We}function le(ke,ze){var We=Object.keys(ke);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(ke);ze&&(He=He.filter(function(rt){return Object.getOwnPropertyDescriptor(ke,rt).enumerable})),We.push.apply(We,He)}return We}function Q(ke){for(var ze=1;ze<arguments.length;ze++){var We=arguments[ze]!=null?arguments[ze]:{};ze%2?le(Object(We),!0).forEach(function(He){te(ke,He,We[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(We)):le(Object(We)).forEach(function(He){Object.defineProperty(ke,He,Object.getOwnPropertyDescriptor(We,He))})}return ke}function te(ke,ze,We){return ze in ke?Object.defineProperty(ke,ze,{value:We,enumerable:!0,configurable:!0,writable:!0}):ke[ze]=We,ke}function he(ke,ze,We,He,rt,ht,wt){try{var Mt=ke[ht](wt),gt=Mt.value}catch(Et){We(Et);return}Mt.done?ze(gt):Promise.resolve(gt).then(He,rt)}function be(ke){return function(){var ze=this,We=arguments;return new Promise(function(He,rt){var ht=ke.apply(ze,We);function wt(gt){he(ht,He,rt,wt,Mt,"next",gt)}function Mt(gt){he(ht,He,rt,wt,Mt,"throw",gt)}wt(void 0)})}}function Ee(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ke=Object(me.makeConfig)(ke);function ze(He){return We.apply(this,arguments)}function We(){return We=be(regeneratorRuntime.mark(function He(rt){var ht,wt,Mt,gt,Et;return regeneratorRuntime.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return ht=Object(me.mergeRequestConfig)(ke,rt),Ht.next=3,Object(ee.default)(ht,rt);case 3:if(wt=Ht.sent,Mt=wt.next,Object(_e.isFunction)(Mt)){Ht.next=7;break}return Ht.abrupt("return",Mt);case 7:return Ht.prev=7,Ht.next=10,ht.adapter(rt);case 10:wt=Ht.sent,Ht.next=16;break;case 13:Ht.prev=13,Ht.t0=Ht.catch(7),gt=Ht.t0;case 16:if(!gt){Ht.next=31;break}if(Et=Object(_e.isFunction)(ht.readOnError)?ht.readOnError(gt,rt):ht.readOnError,!Et){Ht.next=30;break}return Ht.prev=19,ht.acceptStale=!0,Ht.next=23,Object(ee.default)(ht,rt);case 23:return wt=Ht.sent,wt.next.request.stale=!0,Ht.abrupt("return",wt.next);case 28:Ht.prev=28,Ht.t1=Ht.catch(19);case 30:throw gt;case 31:return Ht.abrupt("return",Mt(wt));case 32:case"end":return Ht.stop()}},He,null,[[7,13],[19,28]])})),We.apply(this,arguments)}return{adapter:ze,config:ke,store:ke.store}}function Be(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=Q(Q(Q({},me.defaults.axios),ke),{},{cache:Q(Q({},me.defaults.axios.cache),ke.cache)}),We=Ee(ze.cache);ze.cache;var He=de(ze,["cache"]),rt=B.a.create(Q(Q({},He),{},{adapter:We.adapter}));return rt.cache=We.store,rt}V.default={setup:Be,setupCache:Ee,serializeQuery:q.serializeQuery}},"./src/cache.js":function(X,V,E){E.r(V),E.d(V,"read",function(){return le}),E.d(V,"write",function(){return de}),E.d(V,"key",function(){return te}),E.d(V,"invalidate",function(){return Ee}),E.d(V,"serializeQuery",function(){return Be}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/utilities.js"),B=E("./node_modules/md5/md5.js"),ee=E.n(B),q=E("./src/serialize.js");function me(ke,ze,We,He,rt,ht,wt){try{var Mt=ke[ht](wt),gt=Mt.value}catch(Et){We(Et);return}Mt.done?ze(gt):Promise.resolve(gt).then(He,rt)}function _e(ke){return function(){var ze=this,We=arguments;return new Promise(function(He,rt){var ht=ke.apply(ze,We);function wt(gt){me(ht,He,rt,wt,Mt,"next",gt)}function Mt(gt){me(ht,He,rt,wt,Mt,"throw",gt)}wt(void 0)})}}function de(ke,ze,We){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function ke(ze,We,He){var rt;return regeneratorRuntime.wrap(function(wt){for(;;)switch(wt.prev=wt.next){case 0:return wt.prev=0,rt={expires:ze.expires,data:Object(q.default)(ze,We,He)},wt.next=4,ze.store.setItem(ze.uuid,rt);case 4:wt.next=19;break;case 6:if(wt.prev=6,wt.t0=wt.catch(0),ze.debug("Could not store response",wt.t0),!ze.clearOnError){wt.next=18;break}return wt.prev=10,wt.next=13,ze.store.clear();case 13:wt.next=18;break;case 15:wt.prev=15,wt.t1=wt.catch(10),ze.debug("Could not clear store",wt.t1);case 18:return wt.abrupt("return",!1);case 19:return wt.abrupt("return",!0);case 20:case"end":return wt.stop()}},ke,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function le(ke,ze){return Q.apply(this,arguments)}function Q(){return Q=_e(regeneratorRuntime.mark(function ke(ze,We){var He,rt,ht,wt,Mt,gt,Et,$t;return regeneratorRuntime.wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return He=ze.uuid,rt=ze.ignoreCache,qt.next=3,ze.store.getItem(He);case 3:if(ht=qt.sent,!(rt||!ht||!ht.data)){qt.next=10;break}throw ze.debug("cache-miss",We.url),wt=new Error,wt.reason="cache-miss",wt.message="Entry not found from cache",wt;case 10:if(Mt=ht.expires,gt=ht.data,Et=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!Et&&!ze.acceptStale&&Mt!==0&&Mt<Date.now())){qt.next=18;break}throw ze.debug("cache-stale",We.url),$t=new Error,$t.reason="cache-stale",$t.message="Entry is stale",$t;case 18:return ze.debug(ze.acceptStale?"cache-hit-stale":"cache-hit",We.url),qt.abrupt("return",gt);case 20:case"end":return qt.stop()}},ke)})),Q.apply(this,arguments)}function te(ke){if(Object(j.isFunction)(ke.key))return ke.key;var ze;return Object(j.isString)(ke.key)?ze=function(He){var rt="".concat(He.baseURL?He.baseURL:"").concat(He.url),ht="".concat(ke.key,"/").concat(rt).concat(Be(He));return He.data?ht+ee()(He.data):ht}:ze=function(He){var rt="".concat(He.baseURL?He.baseURL:"").concat(He.url),ht=rt+Be(He);return He.data?ht+ee()(He.data):ht},ze}function he(ke,ze){return be.apply(this,arguments)}function be(){return be=_e(regeneratorRuntime.mark(function ke(ze,We){var He;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(He=We.method.toLowerCase(),!ze.exclude.methods.includes(He)){ht.next=4;break}return ht.next=4,ze.store.removeItem(ze.uuid);case 4:case"end":return ht.stop()}},ke)})),be.apply(this,arguments)}function Ee(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(j.isFunction)(ke.invalidate)?ke.invalidate:he}function Be(ke){if(!ke.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(ke.params);var ze=ke.params,We=ke.params instanceof URLSearchParams;return We||(ze=new URLSearchParams,Object.keys(ke.params).forEach(function(He){return ze.append(He,ke.params[He])})),"?".concat(ze.toString())}V.default={read:le,write:de,key:te,invalidate:Ee,serializeQuery:Be}},"./src/config.js":function(X,V,E){E.r(V),E.d(V,"defaults",function(){return Q}),E.d(V,"makeConfig",function(){return he}),E.d(V,"mergeRequestConfig",function(){return be}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("axios"),B=E.n(j),ee=E("./src/memory.js"),q=E("./src/cache.js");function me(Ee,Be){var ke=Object.keys(Ee);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(Ee);Be&&(ze=ze.filter(function(We){return Object.getOwnPropertyDescriptor(Ee,We).enumerable})),ke.push.apply(ke,ze)}return ke}function _e(Ee){for(var Be=1;Be<arguments.length;Be++){var ke=arguments[Be]!=null?arguments[Be]:{};Be%2?me(Object(ke),!0).forEach(function(ze){de(Ee,ze,ke[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ee,Object.getOwnPropertyDescriptors(ke)):me(Object(ke)).forEach(function(ze){Object.defineProperty(Ee,ze,Object.getOwnPropertyDescriptor(ke,ze))})}return Ee}function de(Ee,Be,ke){return Be in Ee?Object.defineProperty(Ee,Be,{value:ke,enumerable:!0,configurable:!0,writable:!0}):Ee[Be]=ke,Ee}var oe=function(){},le=function(){for(var Be,ke=arguments.length,ze=new Array(ke),We=0;We<ke;We++)ze[We]=arguments[We];return(Be=console).log.apply(Be,["[axios-cache-adapter]"].concat(ze))},Q={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],he=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=_e(_e(_e({},Q.cache),Be),{},{exclude:_e(_e({},Q.cache.exclude),Be.exclude)});return ke.key=Object(q.key)(ke),ke.invalidate=Object(q.invalidate)(ke),ke.debug!==!1?ke.debug=typeof ke.debug=="function"?ke.debug:le:ke.debug=oe,ke.store||(ke.store=new ee.default),ke.debug("Global cache config",ke),ke},be=function(Be,ke){var ze=ke.cache||{};ze&&te.forEach(function(He){return ze[He]?delete ze[He]:void 0});var We=_e(_e(_e({},Be),ze),{},{exclude:_e(_e({},Be.exclude),ze.exclude)});return We.debug===!0&&(We.debug=le),ze.key&&(We.key=Object(q.key)(ze)),We.uuid=We.key(ke),Be.debug("Request config for ".concat(ke.url),We),We};V.default={defaults:Q,makeConfig:he,mergeRequestConfig:be}},"./src/exclude.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var j=E("./src/utilities.js");function B(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1?arguments[1]:void 0,me=ee.exclude,_e=me===void 0?{}:me,de=ee.debug,oe=q.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return de("Excluding request by HTTP method ".concat(q.url)),!0;if(typeof _e.filter=="function"&&_e.filter(q))return de("Excluding request by filter ".concat(q.url)),!0;var le=/\?.*$/.test(q.url)||Object(j.isObject)(q.params)&&Object.keys(q.params).length!==0||typeof URLSearchParams<"u"&&q.params instanceof URLSearchParams;if(_e.query&&le)return de("Excluding request by query ".concat(q.url)),!0;var Q=_e.paths||[],te=Q.some(function(he){return q.url.match(he)});return te?(de("Excluding request by url match ".concat(q.url)),!0):!1}V.default=B},"./src/index.node.js":function(X,V,E){E.r(V);var j=E("./src/api.js");E.d(V,"setup",function(){return j.setup}),E.d(V,"setupCache",function(){return j.setupCache}),E.d(V,"serializeQuery",function(){return j.serializeQuery});var B=E("./src/redis.js");E.d(V,"RedisStore",function(){return B.default});var ee=E("./src/redis-default.js");E.d(V,"RedisDefaultStore",function(){return ee.default}),V.default={setup:j.setup,setupCache:j.setupCache,serializeQuery:j.serializeQuery,RedisStore:B.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(me,_e,de,oe,le,Q,te){try{var he=me[Q](te),be=he.value}catch(Ee){de(Ee);return}he.done?_e(be):Promise.resolve(be).then(oe,le)}function B(me){return function(){var _e=this,de=arguments;return new Promise(function(oe,le){var Q=me.apply(_e,de);function te(be){j(Q,oe,le,te,he,"next",be)}function he(be){j(Q,oe,le,te,he,"throw",be)}te(void 0)})}}function ee(me){return q.apply(this,arguments)}function q(){return q=B(regeneratorRuntime.mark(function me(_e){var de,oe;return regeneratorRuntime.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,_e.store.length();case 2:if(de=Q.sent,!(de<_e.limit)){Q.next=5;break}return Q.abrupt("return");case 5:return _e.debug("Current store size: ".concat(de)),Q.next=8,_e.store.iterate(function(te,he){oe||(oe={value:te,key:he}),te.expires<oe.value.expires&&(oe={value:te,key:he})});case 8:if(!oe){Q.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),Q.next=12,_e.store.removeItem(oe.key);case 12:case"end":return Q.stop()}},me)})),q.apply(this,arguments)}V.default=ee},"./src/memory.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("./src/utilities.js");function B(oe,le,Q,te,he,be,Ee){try{var Be=oe[be](Ee),ke=Be.value}catch(ze){Q(ze);return}Be.done?le(ke):Promise.resolve(ke).then(te,he)}function ee(oe){return function(){var le=this,Q=arguments;return new Promise(function(te,he){var be=oe.apply(le,Q);function Ee(ke){B(be,te,he,Ee,Be,"next",ke)}function Be(ke){B(be,te,he,Ee,Be,"throw",ke)}Ee(void 0)})}}function q(oe,le){if(!(oe instanceof le))throw new TypeError("Cannot call a class as a function")}function me(oe,le){for(var Q=0;Q<le.length;Q++){var te=le[Q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function _e(oe,le,Q){return le&&me(oe.prototype,le),Q&&me(oe,Q),oe}var de=function(){function oe(){q(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return be=this.store[he]||null,Be.abrupt("return",JSON.parse(be));case 2:case"end":return Be.stop()}},te,this)}));function Q(te){return le.apply(this,arguments)}return Q}()},{key:"setItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he,be){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return this.store[he]=JSON.stringify(be),Be.abrupt("return",be);case 2:case"end":return Be.stop()}},te,this)}));function Q(te,he){return le.apply(this,arguments)}return Q}()},{key:"removeItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:delete this.store[he];case 1:case"end":return Ee.stop()}},te,this)}));function Q(te){return le.apply(this,arguments)}return Q}()},{key:"clear",value:function(){var le=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:this.store={};case 1:case"end":return be.stop()}},te,this)}));function Q(){return le.apply(this,arguments)}return Q}()},{key:"length",value:function(){var le=ee(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.abrupt("return",Object.keys(this.store).length);case 1:case"end":return be.stop()}},te,this)}));function Q(){return le.apply(this,arguments)}return Q}()},{key:"iterate",value:function(Q){return Promise.all(Object(j.mapObject)(this.store,Q))}}]),oe}();V.default=de},"./src/redis-default.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util");function B(oe,le,Q,te,he,be,Ee){try{var Be=oe[be](Ee),ke=Be.value}catch(ze){Q(ze);return}Be.done?le(ke):Promise.resolve(ke).then(te,he)}function ee(oe){return function(){var le=this,Q=arguments;return new Promise(function(te,he){var be=oe.apply(le,Q);function Ee(ke){B(be,te,he,Ee,Be,"next",ke)}function Be(ke){B(be,te,he,Ee,Be,"throw",ke)}Ee(void 0)})}}function q(oe,le){if(!(oe instanceof le))throw new TypeError("Cannot call a class as a function")}function me(oe,le){for(var Q=0;Q<le.length;Q++){var te=le[Q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(oe,te.key,te)}}function _e(oe,le,Q){return le&&me(oe.prototype,le),Q&&me(oe,Q),oe}var de=function(){function oe(le){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q(this,oe);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(le.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=le,this.prefix=Q.prefix||"axios-cache",this.maxScanCount=Q.maxScanCount||1e3,this.getAsync=Object(j.promisify)(le.get).bind(le),this.psetexAsync=Object(j.promisify)(le.psetex).bind(le),this.delAsync=Object(j.promisify)(le.del).bind(le),this.scanAsync=Object(j.promisify)(le.scan).bind(le)}return _e(oe,[{key:"calculateTTL",value:function(Q){var te=Date.now();return Q.expires&&Q.expires>te?Q.expires-te:-1}},{key:"transformKey",value:function(Q){return this.prefix+"_"+Q}},{key:"getItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.getAsync(this.transformKey(he));case 2:if(Be.t0=Be.sent,Be.t0){Be.next=5;break}Be.t0=null;case 5:return be=Be.t0,Be.abrupt("return",JSON.parse(be));case 7:case"end":return Be.stop()}},te,this)}));function Q(te){return le.apply(this,arguments)}return Q}()},{key:"setItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he,be){var Ee,Be;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(Ee=this.transformKey(he),Be=this.calculateTTL(be),!(Be>0)){ze.next=5;break}return ze.next=5,this.psetexAsync(Ee,Be,JSON.stringify(be));case 5:return ze.abrupt("return",be);case 6:case"end":return ze.stop()}},te,this)}));function Q(te,he){return le.apply(this,arguments)}return Q}()},{key:"removeItem",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.transformKey(he));case 2:case"end":return Ee.stop()}},te,this)}));function Q(te){return le.apply(this,arguments)}return Q}()},{key:"scan",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be,Ee;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:be="0";case 1:return ke.next=3,this.scanAsync(be,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ee=ke.sent,be=Ee[0],ke.next=7,he(Ee[1]);case 7:if(be!=="0"){ke.next=1;break}case 8:case"end":return ke.stop()}},te,this)}));function Q(te){return le.apply(this,arguments)}return Q}()},{key:"clear",value:function(){var le=ee(regeneratorRuntime.mark(function te(){var he=this;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.scan(function(Be){return he.delAsync(Be)});case 2:case"end":return Ee.stop()}},te,this)}));function Q(){return le.apply(this,arguments)}return Q}()},{key:"length",value:function(){var le=ee(regeneratorRuntime.mark(function te(){var he;return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return he=0,Ee.next=3,this.scan(function(Be){he+=Be.length});case 3:return Ee.abrupt("return",he);case 4:case"end":return Ee.stop()}},te,this)}));function Q(){return le.apply(this,arguments)}return Q}()},{key:"iterate",value:function(){var le=ee(regeneratorRuntime.mark(function te(he){var be=this,Ee,Be;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Be=function(){return Be=ee(regeneratorRuntime.mark(function He(rt){var ht,wt;return regeneratorRuntime.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,this.getAsync(rt);case 2:if(gt.t0=gt.sent,gt.t0){gt.next=5;break}gt.t0=null;case 5:return ht=gt.t0,wt=JSON.parse(ht),gt.next=9,he(wt,rt);case 9:return gt.abrupt("return",gt.sent);case 10:case"end":return gt.stop()}},He,this)})),Be.apply(this,arguments)},Ee=function(He){return Be.apply(this,arguments)},ze.next=4,this.scan(function(We){return Promise.all(We.map(Ee.bind(be)))});case 4:return ze.abrupt("return",Promise.resolve([]));case 5:case"end":return ze.stop()}},te,this)}));function Q(te){return le.apply(this,arguments)}return Q}()}]),oe}();V.default=de},"./src/redis.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util"),B=E("./src/utilities.js");function ee(le,Q,te,he,be,Ee,Be){try{var ke=le[Ee](Be),ze=ke.value}catch(We){te(We);return}ke.done?Q(ze):Promise.resolve(ze).then(he,be)}function q(le){return function(){var Q=this,te=arguments;return new Promise(function(he,be){var Ee=le.apply(Q,te);function Be(ze){ee(Ee,he,be,Be,ke,"next",ze)}function ke(ze){ee(Ee,he,be,Be,ke,"throw",ze)}Be(void 0)})}}function me(le,Q){if(!(le instanceof Q))throw new TypeError("Cannot call a class as a function")}function _e(le,Q){for(var te=0;te<Q.length;te++){var he=Q[te];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(le,he.key,he)}}function de(le,Q,te){return Q&&_e(le.prototype,Q),te&&_e(le,te),le}var oe=function(){function le(Q){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";me(this,le);var he=new TypeError("First parameter must be a valid RedisClient instance.");try{if(Q.constructor.name!=="RedisClient")throw he}catch{throw he}this.client=Q,this.HASH_KEY=te,this.hgetAsync=Object(j.promisify)(Q.hget).bind(Q),this.hsetAsync=Object(j.promisify)(Q.hset).bind(Q),this.hdelAsync=Object(j.promisify)(Q.hdel).bind(Q),this.delAsync=Object(j.promisify)(Q.del).bind(Q),this.hlenAsync=Object(j.promisify)(Q.hlen).bind(Q),this.hgetallAsync=Object(j.promisify)(Q.hgetall).bind(Q)}return de(le,[{key:"getItem",value:function(){var Q=q(regeneratorRuntime.mark(function he(be){var Ee;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hgetAsync(this.HASH_KEY,be);case 2:if(ke.t0=ke.sent,ke.t0){ke.next=5;break}ke.t0=null;case 5:return Ee=ke.t0,ke.abrupt("return",JSON.parse(Ee));case 7:case"end":return ke.stop()}},he,this)}));function te(he){return Q.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var Q=q(regeneratorRuntime.mark(function he(be,Ee){return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hsetAsync(this.HASH_KEY,be,JSON.stringify(Ee));case 2:return ke.abrupt("return",Ee);case 3:case"end":return ke.stop()}},he,this)}));function te(he,be){return Q.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var Q=q(regeneratorRuntime.mark(function he(be){return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,this.hdelAsync(this.HASH_KEY,be);case 2:case"end":return Be.stop()}},he,this)}));function te(he){return Q.apply(this,arguments)}return te}()},{key:"clear",value:function(){var Q=q(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ee.stop()}},he,this)}));function te(){return Q.apply(this,arguments)}return te}()},{key:"length",value:function(){var Q=q(regeneratorRuntime.mark(function he(){return regeneratorRuntime.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ee.stop()}},he,this)}));function te(){return Q.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var Q=q(regeneratorRuntime.mark(function he(be){var Ee;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ee=ke.sent,ke.abrupt("return",Promise.all(Object(B.mapObject)(Ee,be)));case 4:case"end":return ke.stop()}},he,this)}));function te(he){return Q.apply(this,arguments)}return te}()}]),le}();V.default=oe},"./src/request.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/response.js"),B=E("./src/exclude.js"),ee=E("./src/cache.js");function q(oe,le,Q,te,he,be,Ee){try{var Be=oe[be](Ee),ke=Be.value}catch(ze){Q(ze);return}Be.done?le(ke):Promise.resolve(ke).then(te,he)}function me(oe){return function(){var le=this,Q=arguments;return new Promise(function(te,he){var be=oe.apply(le,Q);function Ee(ke){q(be,te,he,Ee,Be,"next",ke)}function Be(ke){q(be,te,he,Ee,Be,"throw",ke)}Ee(void 0)})}}function _e(oe,le){return de.apply(this,arguments)}function de(){return de=me(regeneratorRuntime.mark(function oe(le,Q){var te,he,be;return regeneratorRuntime.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return be=function(){return le.excludeFromCache=!0,{config:le,next:te}},le.debug("uuid",le.uuid),te=function(){for(var ze=arguments.length,We=new Array(ze),He=0;He<ze;He++)We[He]=arguments[He];return j.default.apply(void 0,[le,Q].concat(We))},Be.next=5,le.invalidate(le,Q);case 5:if(!Object(B.default)(le,Q)){Be.next=7;break}return Be.abrupt("return",be());case 7:return Be.prev=7,Be.next=10,Object(ee.read)(le,Q);case 10:return he=Be.sent,he.config=Q,he.request={fromCache:!0},Be.abrupt("return",{config:le,next:he});case 16:if(Be.prev=16,Be.t0=Be.catch(7),!(le.clearOnStale&&Be.t0.reason==="cache-stale")){Be.next=21;break}return Be.next=21,le.store.removeItem(le.uuid);case 21:return Be.abrupt("return",{config:le,next:te});case 22:case"end":return Be.stop()}},oe,null,[[7,16]])})),de.apply(this,arguments)}V.default=_e},"./src/response.js":function(X,V,E){E.r(V),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/limit.js"),B=E("./src/cache.js"),ee=E("./node_modules/cache-control-esm/index.js");function q(oe,le,Q,te,he,be,Ee){try{var Be=oe[be](Ee),ke=Be.value}catch(ze){Q(ze);return}Be.done?le(ke):Promise.resolve(ke).then(te,he)}function me(oe){return function(){var le=this,Q=arguments;return new Promise(function(te,he){var be=oe.apply(le,Q);function Ee(ke){q(be,te,he,Ee,Be,"next",ke)}function Be(ke){q(be,te,he,Ee,Be,"throw",ke)}Ee(void 0)})}}function _e(oe,le,Q){return de.apply(this,arguments)}function de(){return de=me(regeneratorRuntime.mark(function oe(le,Q,te){var he,be,Ee,Be,ke;return regeneratorRuntime.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(he=te.request,be=he===void 0?{}:he,Ee=te.headers,Be=Ee===void 0?{}:Ee,!(["arraybuffer","blob"].indexOf(be.responseType)>-1)){We.next=3;break}return We.abrupt("return",te);case 3:if(ke={},le.readHeaders&&(Be["cache-control"]?(ke=Object(ee.parse)(Be["cache-control"]),(ke.noCache||ke.noStore)&&(le.excludeFromCache=!0)):Be.expires?le.expires=new Date(Be.expires).getTime():le.expires=new Date().getTime()),le.excludeFromCache){We.next=15;break}if(ke.maxAge||ke.maxAge===0?le.expires=Date.now()+ke.maxAge*1e3:le.readHeaders||(le.expires=le.maxAge===0?Date.now():Date.now()+le.maxAge),!le.limit){We.next=11;break}return le.debug("Detected limit: ".concat(le.limit)),We.next=11,Object(j.default)(le);case 11:return We.next=13,Object(B.write)(le,Q,te);case 13:We.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return We.abrupt("return",te);case 17:case"end":return We.stop()}},oe)})),de.apply(this,arguments)}V.default=_e},"./src/serialize.js":function(X,V,E){E.r(V),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(q,me){if(q==null)return{};var _e=B(q,me),de,oe;if(Object.getOwnPropertySymbols){var le=Object.getOwnPropertySymbols(q);for(oe=0;oe<le.length;oe++)de=le[oe],!(me.indexOf(de)>=0)&&Object.prototype.propertyIsEnumerable.call(q,de)&&(_e[de]=q[de])}return _e}function B(q,me){if(q==null)return{};var _e={},de=Object.keys(q),oe,le;for(le=0;le<de.length;le++)oe=de[le],!(me.indexOf(oe)>=0)&&(_e[oe]=q[oe]);return _e}function ee(q,me,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){q.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var de=j(_e,["request","config"]);return de}V.default=ee},"./src/utilities.js":function(X,V,E){E.r(V),E.d(V,"isObject",function(){return B}),E.d(V,"getTag",function(){return ee}),E.d(V,"isFunction",function(){return q}),E.d(V,"isString",function(){return me}),E.d(V,"mapObject",function(){return _e}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(de){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(le){return typeof le}:j=function(le){return le&&typeof Symbol=="function"&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le},j(de)}function B(de){var oe=j(de);return de!=null&&(oe==="object"||oe==="function")}function ee(de){return de===null?de===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(de)}function q(de){if(!B(de))return!1;var oe=ee(de);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function me(de){var oe=j(de);return oe==="string"||oe==="object"&&de!=null&&!Array.isArray(de)&&ee(de)==="[object String]"}function _e(de,oe){return B(de)?Object.keys(de).map(function(le){return oe(de[le],le)}):[]}},axios:function(X,V){X.exports=ie},util:function(X,V){X.exports=I.default}})})});const U={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},F=O.setupCache({maxAge:60*60*24*1e3}),ue=C.default.create({adapter:F.adapter}),K=async(W,$={})=>{const ie={...U,...$},[X,V]=i.lngLatToGoogle(W,ie.zoomBase),E=ie.tileUrl.replace("{z}",String(ie.zoomBase)).replace("{x}",String(X)).replace("{y}",String(V)),j={code:"",prefecture:"",city:""};let B;try{const me=await ue.get(E,{responseType:"arraybuffer"});B=Buffer.from(me.data,"binary")}catch(me){throw new Error(me)}const ee=new f.VectorTile(new b.default(B));let q=Object.keys(ee.layers);return Array.isArray(q)||(q=[q]),q.forEach(me=>{const _e=ee.layers[me];if(_e&&ie.layer===_e.name)for(let de=0;de<_e.length;de++){const oe=_e.feature(de).toGeoJSON(X,V,ie.zoomBase);q.length>1&&(oe.properties.vt_layer=me);const le={type:"FeatureCollection",features:[oe]};t.geoContains(le,W)&&(j.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,j.prefecture=oe.properties.prefecture,j.city=oe.properties.city)}}),j};e.openReverseGeocoder=K})(oI);const A5={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},P5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},k5={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},M5={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},JS={JPN:k5,CHN:A5,DEU:P5,KOR:M5};function vA(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function z5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!QS(e[0])||!QS(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return vA(a,t,i)}function R5(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var p=c[a];if(p.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<p[p.length-1].length;f++)if(p[p.length-1][f]!==p[0][f])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return vA(u,t,i)}function QS(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function _A(e,t,i){if(e!==null)for(var a,c,p,f,u,b,C,I=0,w=0,T,O=e.type,U=O==="FeatureCollection",F=O==="Feature",ue=U?e.features.length:1,K=0;K<ue;K++){C=U?e.features[K].geometry:F?e.geometry:e,T=C?C.type==="GeometryCollection":!1,u=T?C.geometries.length:1;for(var W=0;W<u;W++){var $=0,ie=0;if(f=T?C.geometries[W]:C,f!==null){b=f.coordinates;var X=f.type;switch(I=i&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(b,w,K,$,ie)===!1)return!1;w++,$++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],w,K,$,ie)===!1)return!1;w++,X==="MultiPoint"&&$++}X==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-I;c++){if(t(b[a][c],w,K,$,ie)===!1)return!1;w++}X==="MultiLineString"&&$++,X==="Polygon"&&ie++}X==="Polygon"&&$++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(ie=0,c=0;c<b[a].length;c++){for(p=0;p<b[a][c].length-I;p++){if(t(b[a][c][p],w,K,$,ie)===!1)return!1;w++}ie++}$++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(_A(f.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function L5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function O5(e){return e.type==="Feature"?e.geometry:e}function F5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=L5(e),c=O5(t),p=c.type,f=t.bbox,u=c.coordinates;if(f&&j5(a,f)===!1)return!1;p==="Polygon"&&(u=[u]);for(var b=!1,C=0;C<u.length&&!b;C++)if(eE(a,u[C][0],i.ignoreBoundary)){for(var I=!1,w=1;w<u[C].length&&!I;)eE(a,u[C][w],!i.ignoreBoundary)&&(I=!0),w++;I||(b=!0)}return b}function eE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,p=t.length-1;c<t.length;p=c++){var f=t[c][0],u=t[c][1],b=t[p][0],C=t[p][1],I=e[1]*(f-b)+u*(b-e[0])+C*(e[0]-f)===0&&(f-e[0])*(b-e[0])<=0&&(u-e[1])*(C-e[1])<=0;if(I)return!i;var w=u>e[1]!=C>e[1]&&e[0]<(b-f)*(e[1]-u)/(C-u)+f;w&&(a=!a)}return a}function j5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function D5(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return _A(e,function(p){i+=p[0],a+=p[1],c++},!0),z5([i/c,a/c],t.properties)}const B5=()=>{const[e,t]=_t.useState(!1);return{detectCountry:_t.useCallback(async(a,c)=>{t(!0);const f=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of f.features)if(F5([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},Q0=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,p]=_t.useState((u=e.properties)==null?void 0:u[t.key]);_t.useEffect(()=>{var b;p((b=e.properties)==null?void 0:b[t.key])},[e]);const f=_t.useCallback(b=>{p(b.currentTarget.value),a&&a(b)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:f}),yt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:b.tags.name},b.id)})})]})},N5=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,U5=({placeholder:e,defaultValue:t})=>{const[i,a]=_t.useState(t);_t.useEffect(()=>{a(t)},[t]);const c=_t.useCallback(p=>{a(p.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Lg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Lg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,p="Expected a function",f="__lodash_hash_undefined__",u=1,b=2,C=1/0,I=9007199254740991,w="[object Arguments]",T="[object Array]",O="[object Boolean]",U="[object Date]",F="[object Error]",ue="[object Function]",K="[object GeneratorFunction]",W="[object Map]",$="[object Number]",ie="[object Object]",X="[object Promise]",V="[object RegExp]",E="[object Set]",j="[object String]",B="[object Symbol]",ee="[object WeakMap]",q="[object ArrayBuffer]",me="[object DataView]",_e="[object Float32Array]",de="[object Float64Array]",oe="[object Int8Array]",le="[object Int16Array]",Q="[object Int32Array]",te="[object Uint8Array]",he="[object Uint8ClampedArray]",be="[object Uint16Array]",Ee="[object Uint32Array]",Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ke=/^\w*$/,ze=/^\./,We=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,rt=/\\(\\)?/g,ht=/\w*$/,wt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,gt={};gt[_e]=gt[de]=gt[oe]=gt[le]=gt[Q]=gt[te]=gt[he]=gt[be]=gt[Ee]=!0,gt[w]=gt[T]=gt[q]=gt[O]=gt[me]=gt[U]=gt[F]=gt[ue]=gt[W]=gt[$]=gt[ie]=gt[V]=gt[E]=gt[j]=gt[ee]=!1;var Et={};Et[w]=Et[T]=Et[q]=Et[me]=Et[O]=Et[U]=Et[_e]=Et[de]=Et[oe]=Et[le]=Et[Q]=Et[W]=Et[$]=Et[ie]=Et[V]=Et[E]=Et[j]=Et[B]=Et[te]=Et[he]=Et[be]=Et[Ee]=!0,Et[F]=Et[ue]=Et[ee]=!1;var $t=typeof $l=="object"&&$l&&$l.Object===Object&&$l,Ht=typeof self=="object"&&self&&self.Object===Object&&self,qt=$t||Ht||Function("return this")(),bn=t&&!t.nodeType&&t,et=bn&&!0&&e&&!e.nodeType&&e,hn=et&&et.exports===bn,xn=hn&&$t.process,we=function(){try{return xn&&xn.binding("util")}catch{}}(),N=we&&we.isTypedArray;function D(G,ve){return G.set(ve[0],ve[1]),G}function xe(G,ve){return G.add(ve),G}function Ze(G,ve,De){switch(De.length){case 0:return G.call(ve);case 1:return G.call(ve,De[0]);case 2:return G.call(ve,De[0],De[1]);case 3:return G.call(ve,De[0],De[1],De[2])}return G.apply(ve,De)}function Qe(G,ve){for(var De=-1,at=G?G.length:0;++De<at&&ve(G[De],De,G)!==!1;);return G}function ct(G,ve){for(var De=-1,at=ve.length,Lt=G.length;++De<at;)G[Lt+De]=ve[De];return G}function ae(G,ve,De,at){var Lt=-1,Ct=G?G.length:0;for(at&&Ct&&(De=G[++Lt]);++Lt<Ct;)De=ve(De,G[Lt],Lt,G);return De}function R(G,ve){for(var De=-1,at=G?G.length:0;++De<at;)if(ve(G[De],De,G))return!0;return!1}function z(G){return function(ve){return ve==null?i:ve[G]}}function Se(G,ve){for(var De=-1,at=Array(G);++De<G;)at[De]=ve(De);return at}function Ve(G){return function(ve){return G(ve)}}function nt(G,ve){return G==null?i:G[ve]}function ot(G){var ve=!1;if(G!=null&&typeof G.toString!="function")try{ve=!!(G+"")}catch{}return ve}function lt(G){var ve=-1,De=Array(G.size);return G.forEach(function(at,Lt){De[++ve]=[Lt,at]}),De}function Dt(G,ve){return function(De){return G(ve(De))}}function Ft(G){var ve=-1,De=Array(G.size);return G.forEach(function(at){De[++ve]=at}),De}var yn=Array.prototype,vn=Function.prototype,un=Object.prototype,Oi=qt["__core-js_shared__"],or=function(){var G=/[^.]+$/.exec(Oi&&Oi.keys&&Oi.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Me=vn.toString,re=un.hasOwnProperty,ce=Me.call(Object),ge=un.toString,Ie=RegExp("^"+Me.call(re).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ne=hn?qt.Buffer:i,Le=qt.Symbol,$e=qt.Uint8Array,Fe=Dt(Object.getPrototypeOf,Object),Ye=Object.create,dt=un.propertyIsEnumerable,ut=yn.splice,ft=Object.getOwnPropertySymbols,Yt=Ne?Ne.isBuffer:i,tn=Dt(Object.keys,Object),gn=Math.max,dn=Yo(qt,"DataView"),wn=Yo(qt,"Map"),jn=Yo(qt,"Promise"),Hn=Yo(qt,"Set"),ur=Yo(qt,"WeakMap"),fn=Yo(Object,"create"),sr=!dt.call({valueOf:1},"valueOf"),wr=bi(dn),ni=bi(wn),ai=bi(jn),Rr=bi(Hn),po=bi(ur),la=Le?Le.prototype:i,ua=la?la.valueOf:i,Dn=la?la.toString:i;function In(){}function To(G){var ve=-1,De=G?G.length:0;for(this.clear();++ve<De;){var at=G[ve];this.set(at[0],at[1])}}function _i(){this.__data__=fn?fn(null):{}}function li(G){return this.has(G)&&delete this.__data__[G]}function ca(G){var ve=this.__data__;if(fn){var De=ve[G];return De===f?i:De}return re.call(ve,G)?ve[G]:i}function Fi(G){var ve=this.__data__;return fn?ve[G]!==i:re.call(ve,G)}function ji(G,ve){var De=this.__data__;return De[G]=fn&&ve===i?f:ve,this}To.prototype.clear=_i,To.prototype.delete=li,To.prototype.get=ca,To.prototype.has=Fi,To.prototype.set=ji;function ui(G){var ve=-1,De=G?G.length:0;for(this.clear();++ve<De;){var at=G[ve];this.set(at[0],at[1])}}function tl(){this.__data__=[]}function vr(G){var ve=this.__data__,De=pa(ve,G);if(De<0)return!1;var at=ve.length-1;return De==at?ve.pop():ut.call(ve,De,1),!0}function ha(G){var ve=this.__data__,De=pa(ve,G);return De<0?i:ve[De][1]}function qo(G){return pa(this.__data__,G)>-1}function Yn(G,ve){var De=this.__data__,at=pa(De,G);return at<0?De.push([G,ve]):De[at][1]=ve,this}ui.prototype.clear=tl,ui.prototype.delete=vr,ui.prototype.get=ha,ui.prototype.has=qo,ui.prototype.set=Yn;function Di(G){var ve=-1,De=G?G.length:0;for(this.clear();++ve<De;){var at=G[ve];this.set(at[0],at[1])}}function xi(){this.__data__={hash:new To,map:new(wn||ui),string:new To}}function nl(G){return xa(this,G).delete(G)}function mo(G){return xa(this,G).get(G)}function da(G){return xa(this,G).has(G)}function $n(G,ve){return xa(this,G).set(G,ve),this}Di.prototype.clear=xi,Di.prototype.delete=nl,Di.prototype.get=mo,Di.prototype.has=da,Di.prototype.set=$n;function fs(G){var ve=-1,De=G?G.length:0;for(this.__data__=new Di;++ve<De;)this.add(G[ve])}function Ds(G){return this.__data__.set(G,f),this}function Ko(G){return this.__data__.has(G)}fs.prototype.add=fs.prototype.push=Ds,fs.prototype.has=Ko;function ci(G){this.__data__=new ui(G)}function fa(){this.__data__=new ui}function Bh(G){return this.__data__.delete(G)}function oc(G){return this.__data__.get(G)}function rl(G){return this.__data__.has(G)}function Nh(G,ve){var De=this.__data__;if(De instanceof ui){var at=De.__data__;if(!wn||at.length<c-1)return at.push([G,ve]),this;De=this.__data__=new Di(at)}return De.set(G,ve),this}ci.prototype.clear=fa,ci.prototype.delete=Bh,ci.prototype.get=oc,ci.prototype.has=rl,ci.prototype.set=Nh;function du(G,ve){var De=Yr(G)||Io(G)?Se(G.length,String):[],at=De.length,Lt=!!at;for(var Ct in G)(ve||re.call(G,Ct))&&!(Lt&&(Ct=="length"||An(Ct,at)))&&De.push(Ct);return De}function fu(G,ve,De){(De!==i&&!Co(G[ve],De)||typeof ve=="number"&&De===i&&!(ve in G))&&(G[ve]=De)}function pu(G,ve,De){var at=G[ve];(!(re.call(G,ve)&&Co(at,De))||De===i&&!(ve in G))&&(G[ve]=De)}function pa(G,ve){for(var De=G.length;De--;)if(Co(G[De][0],ve))return De;return-1}function il(G,ve){return G&&vu(ve,Ji(ve),G)}function ps(G,ve,De,at,Lt,Ct,Vt){var Zt;if(at&&(Zt=Ct?at(G,Lt,Ct,Vt):at(G)),Zt!==i)return Zt;if(!Bi(G))return G;var on=Yr(G);if(on){if(Zt=Vs(G),!ve)return fc(G,Zt)}else{var Ln=Yi(G),Mn=Ln==ue||Ln==K;if(Gs(G))return mu(G,ve);if(Ln==ie||Ln==w||Mn&&!Ct){if(ot(G))return Ct?G:{};if(Zt=mc(Mn?{}:G),!ve)return $h(G,il(Zt,G))}else{if(!Et[Ln])return Ct?G:{};Zt=wu(G,Ln,ps,ve)}}Vt||(Vt=new ci);var er=Vt.get(G);if(er)return er;if(Vt.set(G,Zt),!on)var Nn=De?xu(G):Ji(G);return Qe(Nn||G,function(Vn,br){Nn&&(br=Vn,Vn=G[br]),pu(Zt,br,ps(Vn,ve,De,at,br,G,Vt))}),Zt}function sc(G){return Bi(G)?Ye(G):{}}var ol=Gh(ms),ac=Hh();function ms(G,ve){return G&&ac(G,ve,Ji)}function ma(G,ve){ve=ml(ve,G)?[ve]:cl(ve);for(var De=0,at=ve.length;G!=null&&De<at;)G=G[Bn(ve[De++])];return De&&De==at?G:i}function wi(G,ve,De){var at=ve(G);return Yr(G)?at:ct(at,De(G))}function ga(G){return ge.call(G)}function sl(G,ve){return G!=null&&ve in Object(G)}function gs(G,ve,De,at,Lt){return G===ve?!0:G==null||ve==null||!Bi(G)&&!Ao(ve)?G!==G&&ve!==ve:ya(G,ve,gs,De,at,Lt)}function ya(G,ve,De,at,Lt,Ct){var Vt=Yr(G),Zt=Yr(ve),on=T,Ln=T;Vt||(on=Yi(G),on=on==w?ie:on),Zt||(Ln=Yi(ve),Ln=Ln==w?ie:Ln);var Mn=on==ie&&!ot(G),er=Ln==ie&&!ot(ve),Nn=on==Ln;if(Nn&&!Mn)return Ct||(Ct=new ci),Vt||Ea(G)?dl(G,ve,De,at,Lt,Ct):fl(G,ve,on,De,at,Lt,Ct);if(!(Lt&b)){var Vn=Mn&&re.call(G,"__wrapped__"),br=er&&re.call(ve,"__wrapped__");if(Vn||br){var Sr=Vn?G.value():G,Si=br?ve.value():ve;return Ct||(Ct=new ci),De(Sr,Si,at,Lt,Ct)}}return Nn?(Ct||(Ct=new ci),_u(G,ve,De,at,Lt,Ct)):!1}function va(G,ve,De,at){var Lt=De.length,Ct=Lt,Vt=!at;if(G==null)return!Ct;for(G=Object(G);Lt--;){var Zt=De[Lt];if(Vt&&Zt[2]?Zt[1]!==G[Zt[0]]:!(Zt[0]in G))return!1}for(;++Lt<Ct;){Zt=De[Lt];var on=Zt[0],Ln=G[on],Mn=Zt[1];if(Vt&&Zt[2]){if(Ln===i&&!(on in G))return!1}else{var er=new ci;if(at)var Nn=at(Ln,Mn,on,G,ve,er);if(!(Nn===i?gs(Mn,Ln,at,u|b,er):Nn))return!1}}return!0}function _a(G){if(!Bi(G)||wa(G))return!1;var ve=Hs(G)||ot(G)?Ie:wt;return ve.test(bi(G))}function Uh(G){return Ao(G)&&Sa(G.length)&&!!gt[ge.call(G)]}function lc(G){return typeof G=="function"?G:G==null?ko:typeof G=="object"?Yr(G)?al(G[0],G[1]):ys(G):Ta(G)}function uc(G){if(!Jn(G))return tn(G);var ve=[];for(var De in Object(G))re.call(G,De)&&De!="constructor"&&ve.push(De);return ve}function cc(G){if(!Bi(G))return bu(G);var ve=Jn(G),De=[];for(var at in G)at=="constructor"&&(ve||!re.call(G,at))||De.push(at);return De}function ys(G){var ve=pc(G);return ve.length==1&&ve[0][2]?En(ve[0][0],ve[0][1]):function(De){return De===G||va(De,G,ve)}}function al(G,ve){return ml(G)&&yc(ve)?En(Bn(G),ve):function(De){var at=Jr(De,G);return at===i&&at===ve?Sl(De,G):gs(ve,at,i,u|b)}}function qr(G,ve,De,at,Lt){if(G!==ve){if(!(Yr(ve)||Ea(ve)))var Ct=cc(ve);Qe(Ct||ve,function(Vt,Zt){if(Ct&&(Zt=Vt,Vt=ve[Zt]),Bi(Vt))Lt||(Lt=new ci),Kr(G,ve,Zt,De,qr,at,Lt);else{var on=at?at(G[Zt],Vt,Zt+"",G,ve,Lt):i;on===i&&(on=Vt),fu(G,Zt,on)}})}}function Kr(G,ve,De,at,Lt,Ct,Vt){var Zt=G[De],on=ve[De],Ln=Vt.get(on);if(Ln){fu(G,De,Ln);return}var Mn=Ct?Ct(Zt,on,De+"",G,ve,Vt):i,er=Mn===i;er&&(Mn=on,Yr(on)||Ea(on)?Yr(Zt)?Mn=Zt:_l(Zt)?Mn=fc(Zt):(er=!1,Mn=ps(on,!0)):wl(on)||Io(on)?Io(Zt)?Mn=Qn(Zt):!Bi(Zt)||at&&Hs(Zt)?(er=!1,Mn=ps(on,!0)):Mn=Zt:er=!1),er&&(Vt.set(on,Mn),Lt(Mn,on,at,Ct,Vt),Vt.delete(on)),fu(G,De,Mn)}function Rn(G){return function(ve){return ma(ve,G)}}function ll(G,ve){return ve=gn(ve===i?G.length-1:ve,0),function(){for(var De=arguments,at=-1,Lt=gn(De.length-ve,0),Ct=Array(Lt);++at<Lt;)Ct[at]=De[ve+at];at=-1;for(var Vt=Array(ve+1);++at<ve;)Vt[at]=De[at];return Vt[ve]=Ct,Ze(G,this,Vt)}}function ul(G){if(typeof G=="string")return G;if(bl(G))return Dn?Dn.call(G):"";var ve=G+"";return ve=="0"&&1/G==-C?"-0":ve}function cl(G){return Yr(G)?G:qn(G)}function mu(G,ve){if(ve)return G.slice();var De=new G.constructor(G.length);return G.copy(De),De}function Bs(G){var ve=new G.constructor(G.byteLength);return new $e(ve).set(new $e(G)),ve}function gu(G,ve){var De=ve?Bs(G.buffer):G.buffer;return new G.constructor(De,G.byteOffset,G.byteLength)}function yu(G,ve,De){var at=ve?De(lt(G),!0):lt(G);return ae(at,D,new G.constructor)}function hl(G){var ve=new G.constructor(G.source,ht.exec(G));return ve.lastIndex=G.lastIndex,ve}function hc(G,ve,De){var at=ve?De(Ft(G),!0):Ft(G);return ae(at,xe,new G.constructor)}function dc(G){return ua?Object(ua.call(G)):{}}function Ns(G,ve){var De=ve?Bs(G.buffer):G.buffer;return new G.constructor(De,G.byteOffset,G.length)}function fc(G,ve){var De=-1,at=G.length;for(ve||(ve=Array(at));++De<at;)ve[De]=G[De];return ve}function vu(G,ve,De,at){De||(De={});for(var Lt=-1,Ct=ve.length;++Lt<Ct;){var Vt=ve[Lt],Zt=at?at(De[Vt],G[Vt],Vt,De,G):i;pu(De,Vt,Zt===i?G[Vt]:Zt)}return De}function $h(G,ve){return vu(G,Jo(G),ve)}function Vh(G){return ll(function(ve,De){var at=-1,Lt=De.length,Ct=Lt>1?De[Lt-1]:i,Vt=Lt>2?De[2]:i;for(Ct=G.length>3&&typeof Ct=="function"?(Lt--,Ct):i,Vt&&pl(De[0],De[1],Vt)&&(Ct=Lt<3?i:Ct,Lt=1),ve=Object(ve);++at<Lt;){var Zt=De[at];Zt&&G(ve,Zt,at,Ct)}return ve})}function Gh(G,ve){return function(De,at){if(De==null)return De;if(!go(De))return G(De,at);for(var Lt=De.length,Ct=ve?Lt:-1,Vt=Object(De);(ve?Ct--:++Ct<Lt)&&at(Vt[Ct],Ct,Vt)!==!1;);return De}}function Hh(G){return function(ve,De,at){for(var Lt=-1,Ct=Object(ve),Vt=at(ve),Zt=Vt.length;Zt--;){var on=Vt[G?Zt:++Lt];if(De(Ct[on],on,Ct)===!1)break}return ve}}function dl(G,ve,De,at,Lt,Ct){var Vt=Lt&b,Zt=G.length,on=ve.length;if(Zt!=on&&!(Vt&&on>Zt))return!1;var Ln=Ct.get(G);if(Ln&&Ct.get(ve))return Ln==ve;var Mn=-1,er=!0,Nn=Lt&u?new fs:i;for(Ct.set(G,ve),Ct.set(ve,G);++Mn<Zt;){var Vn=G[Mn],br=ve[Mn];if(at)var Sr=Vt?at(br,Vn,Mn,ve,G,Ct):at(Vn,br,Mn,G,ve,Ct);if(Sr!==i){if(Sr)continue;er=!1;break}if(Nn){if(!R(ve,function(Si,Mo){if(!Nn.has(Mo)&&(Vn===Si||De(Vn,Si,at,Lt,Ct)))return Nn.add(Mo)})){er=!1;break}}else if(!(Vn===br||De(Vn,br,at,Lt,Ct))){er=!1;break}}return Ct.delete(G),Ct.delete(ve),er}function fl(G,ve,De,at,Lt,Ct,Vt){switch(De){case me:if(G.byteLength!=ve.byteLength||G.byteOffset!=ve.byteOffset)return!1;G=G.buffer,ve=ve.buffer;case q:return!(G.byteLength!=ve.byteLength||!at(new $e(G),new $e(ve)));case O:case U:case $:return Co(+G,+ve);case F:return G.name==ve.name&&G.message==ve.message;case V:case j:return G==ve+"";case W:var Zt=lt;case E:var on=Ct&b;if(Zt||(Zt=Ft),G.size!=ve.size&&!on)return!1;var Ln=Vt.get(G);if(Ln)return Ln==ve;Ct|=u,Vt.set(G,ve);var Mn=dl(Zt(G),Zt(ve),at,Lt,Ct,Vt);return Vt.delete(G),Mn;case B:if(ua)return ua.call(G)==ua.call(ve)}return!1}function _u(G,ve,De,at,Lt,Ct){var Vt=Lt&b,Zt=Ji(G),on=Zt.length,Ln=Ji(ve),Mn=Ln.length;if(on!=Mn&&!Vt)return!1;for(var er=on;er--;){var Nn=Zt[er];if(!(Vt?Nn in ve:re.call(ve,Nn)))return!1}var Vn=Ct.get(G);if(Vn&&Ct.get(ve))return Vn==ve;var br=!0;Ct.set(G,ve),Ct.set(ve,G);for(var Sr=Vt;++er<on;){Nn=Zt[er];var Si=G[Nn],Mo=ve[Nn];if(at)var vc=Vt?at(Mo,Si,Nn,ve,G,Ct):at(Si,Mo,Nn,G,ve,Ct);if(!(vc===i?Si===Mo||De(Si,Mo,at,Lt,Ct):vc)){br=!1;break}Sr||(Sr=Nn=="constructor")}if(br&&!Sr){var ts=G.constructor,Ca=ve.constructor;ts!=Ca&&"constructor"in G&&"constructor"in ve&&!(typeof ts=="function"&&ts instanceof ts&&typeof Ca=="function"&&Ca instanceof Ca)&&(br=!1)}return Ct.delete(G),Ct.delete(ve),br}function xu(G){return wi(G,Ji,Jo)}function Us(){var G=In.iteratee||es;return G=G===es?lc:G,arguments.length?G(arguments[0],arguments[1]):G}function xa(G,ve){var De=G.__data__;return gc(ve)?De[typeof ve=="string"?"string":"hash"]:De.map}function pc(G){for(var ve=Ji(G),De=ve.length;De--;){var at=ve[De],Lt=G[at];ve[De]=[at,Lt,yc(Lt)]}return ve}function Yo(G,ve){var De=nt(G,ve);return _a(De)?De:i}var Jo=ft?Dt(ft,Object):El,Yi=ga;(dn&&Yi(new dn(new ArrayBuffer(1)))!=me||wn&&Yi(new wn)!=W||jn&&Yi(jn.resolve())!=X||Hn&&Yi(new Hn)!=E||ur&&Yi(new ur)!=ee)&&(Yi=function(G){var ve=ge.call(G),De=ve==ie?G.constructor:i,at=De?bi(De):i;if(at)switch(at){case wr:return me;case ni:return W;case ai:return X;case Rr:return E;case po:return ee}return ve});function $s(G,ve,De){ve=ml(ve,G)?[ve]:cl(ve);for(var at,Lt=-1,Vt=ve.length;++Lt<Vt;){var Ct=Bn(ve[Lt]);if(!(at=G!=null&&De(G,Ct)))break;G=G[Ct]}if(at)return at;var Vt=G?G.length:0;return!!Vt&&Sa(Vt)&&An(Ct,Vt)&&(Yr(G)||Io(G))}function Vs(G){var ve=G.length,De=G.constructor(ve);return ve&&typeof G[0]=="string"&&re.call(G,"index")&&(De.index=G.index,De.input=G.input),De}function mc(G){return typeof G.constructor=="function"&&!Jn(G)?sc(Fe(G)):{}}function wu(G,ve,De,at){var Lt=G.constructor;switch(ve){case q:return Bs(G);case O:case U:return new Lt(+G);case me:return gu(G,at);case _e:case de:case oe:case le:case Q:case te:case he:case be:case Ee:return Ns(G,at);case W:return yu(G,at,De);case $:case j:return new Lt(G);case V:return hl(G);case E:return hc(G,at,De);case B:return dc(G)}}function An(G,ve){return ve=ve??I,!!ve&&(typeof G=="number"||Mt.test(G))&&G>-1&&G%1==0&&G<ve}function pl(G,ve,De){if(!Bi(De))return!1;var at=typeof ve;return(at=="number"?go(De)&&An(ve,De.length):at=="string"&&ve in De)?Co(De[ve],G):!1}function ml(G,ve){if(Yr(G))return!1;var De=typeof G;return De=="number"||De=="symbol"||De=="boolean"||G==null||bl(G)?!0:ke.test(G)||!Be.test(G)||ve!=null&&G in Object(ve)}function gc(G){var ve=typeof G;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?G!=="__proto__":G===null}function wa(G){return!!or&&or in G}function Jn(G){var ve=G&&G.constructor,De=typeof ve=="function"&&ve.prototype||un;return G===De}function yc(G){return G===G&&!Bi(G)}function En(G,ve){return function(De){return De==null?!1:De[G]===ve&&(ve!==i||G in Object(De))}}function bu(G){var ve=[];if(G!=null)for(var De in Object(G))ve.push(De);return ve}var qn=ba(function(G){G=Po(G);var ve=[];return ze.test(G)&&ve.push(""),G.replace(We,function(De,at,Lt,Ct){ve.push(Lt?Ct.replace(rt,"$1"):at||De)}),ve});function Bn(G){if(typeof G=="string"||bl(G))return G;var ve=G+"";return ve=="0"&&1/G==-C?"-0":ve}function bi(G){if(G!=null){try{return Me.call(G)}catch{}try{return G+""}catch{}}return""}function gl(G){for(var ve=-1,De=G?G.length:0,at=0,Lt=[];++ve<De;){var Ct=G[ve];Ct&&(Lt[at++]=Ct)}return Lt}function yl(G,ve){var De=Yr(G)?Qe:ol;return De(G,Us(ve,3))}function ba(G,ve){if(typeof G!="function"||ve&&typeof ve!="function")throw new TypeError(p);var De=function(){var at=arguments,Lt=ve?ve.apply(this,at):at[0],Ct=De.cache;if(Ct.has(Lt))return Ct.get(Lt);var Vt=G.apply(this,at);return De.cache=Ct.set(Lt,Vt),Vt};return De.cache=new(ba.Cache||Di),De}ba.Cache=Di;function vl(G){return ps(G,!1,!0)}function Co(G,ve){return G===ve||G!==G&&ve!==ve}function Io(G){return _l(G)&&re.call(G,"callee")&&(!dt.call(G,"callee")||ge.call(G)==w)}var Yr=Array.isArray;function go(G){return G!=null&&Sa(G.length)&&!Hs(G)}function _l(G){return Ao(G)&&go(G)}var Gs=Yt||Tl;function xl(G){if(go(G)&&(Yr(G)||typeof G=="string"||typeof G.splice=="function"||Gs(G)||Io(G)))return!G.length;var ve=Yi(G);if(ve==W||ve==E)return!G.size;if(sr||Jn(G))return!tn(G).length;for(var De in G)if(re.call(G,De))return!1;return!0}function Hs(G){var ve=Bi(G)?ge.call(G):"";return ve==ue||ve==K}function Sa(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=I}function Bi(G){var ve=typeof G;return!!G&&(ve=="object"||ve=="function")}function Ao(G){return!!G&&typeof G=="object"}function wl(G){if(!Ao(G)||ge.call(G)!=ie||ot(G))return!1;var ve=Fe(G);if(ve===null)return!0;var De=re.call(ve,"constructor")&&ve.constructor;return typeof De=="function"&&De instanceof De&&Me.call(De)==ce}function bl(G){return typeof G=="symbol"||Ao(G)&&ge.call(G)==B}var Ea=N?Ve(N):Uh;function Qn(G){return vu(G,Su(G))}function Po(G){return G==null?"":ul(G)}function Jr(G,ve,De){var at=G==null?i:ma(G,ve);return at===i?De:at}function Sl(G,ve){return G!=null&&$s(G,ve,sl)}function Ji(G){return go(G)?du(G):uc(G)}function Su(G){return go(G)?du(G,!0):cc(G)}var Qo=Vh(function(G,ve,De){qr(G,ve,De)});function ko(G){return G}function es(G){return lc(typeof G=="function"?G:ps(G,!0))}function Ta(G){return ml(G)?z(Bn(G)):Rn(G)}function El(){return[]}function Tl(){return!1}In.compact=gl,In.iteratee=es,In.keys=Ji,In.keysIn=Su,In.memoize=ba,In.merge=Qo,In.property=Ta,In.toPlainObject=Qn,In.clone=vl,In.eq=Co,In.forEach=yl,In.get=Jr,In.hasIn=Sl,In.identity=ko,In.isArguments=Io,In.isArray=Yr,In.isArrayLike=go,In.isArrayLikeObject=_l,In.isBuffer=Gs,In.isEmpty=xl,In.isFunction=Hs,In.isLength=Sa,In.isObject=Bi,In.isObjectLike=Ao,In.isPlainObject=wl,In.isSymbol=bl,In.isTypedArray=Ea,In.stubArray=El,In.stubFalse=Tl,In.toString=Po,In.each=yl,In.VERSION=a,et&&((et.exports=In)._=In,bn._=In)}).call($l)})(Lg,Lg.exports);var $5=Lg.exports,V5=zm;function zm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)zm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)zm(e.geometries[a],t);else if(i==="Feature")zm(e.geometry,t);else if(i==="Polygon")tE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)tE(e.coordinates[a],t);return e}function tE(e,t){if(e.length!==0){nE(e[0],t);for(var i=1;i<e.length;i++)nE(e[i],!t)}}function nE(e,t){for(var i=0,a=0,c=0,p=e.length,f=p-1;c<p;f=c++){var u=(e[c][0]-e[f][0])*(e[f][1]+e[c][1]),b=i+u;a+=Math.abs(i)>=Math.abs(u)?i-b+u:u-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const G5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var ev,rE;function H5(){return rE||(rE=1,ev=G5),ev}var kn=$5,dm=V5,Rm={};H5().forEach(function(e){if(e.polygon==="all")Rm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Rm[e.key]={},Rm[e.key][t]=i}});function W5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:kn.merge(e,t)}var Og={};Og=function(e,t,i){t=kn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Rm,deduplicator:W5},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=p(e):a=c(e),a;function c(b){var C=new Array,I=new Array,w=new Array;function T(X){var V=kn.clone(X);V.lat=X.center.lat,V.lon=X.center.lon,V.__is_center_placeholder=!0,C.push(V)}function O(X){var V=kn.clone(X);V.nodes=[];function E(j,B,ee){var q={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+ee,lat:j,lon:B};V.nodes.push(q.id),C.push(q)}E(V.bounds.minlat,V.bounds.minlon,1),E(V.bounds.maxlat,V.bounds.minlon,2),E(V.bounds.maxlat,V.bounds.maxlon,3),E(V.bounds.minlat,V.bounds.maxlon,4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,I.push(V)}function U(X){function V(E,j,B){var ee={type:"node",id:B,lat:E,lon:j};C.push(ee)}kn.isArray(X.nodes)||(X.nodes=X.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(E,j){E&&V(E.lat,E.lon,X.nodes[j])})}function F(X){function V(j,B,ee){var q={type:"node",id:ee,lat:j,lon:B};C.push(q)}function E(j,B){if(I.some(function(me){return me.type=="way"&&me.id==B}))return;var ee={type:"way",id:B,nodes:[]};function q(me,_e){var de={type:"node",id:"_anonymous@"+me+"/"+_e,lat:me,lon:_e};ee.nodes.push(de.id),C.push(de)}j.forEach(function(me){me?q(me.lat,me.lon):ee.nodes.push(void 0)}),I.push(ee)}X.members.forEach(function(j,B){j.type=="node"?j.lat&&V(j.lat,j.lon,j.ref):j.type=="way"&&j.geometry&&(j.ref="_fullGeom"+j.ref,E(j.geometry,j.ref))})}for(var ue=0;ue<b.elements.length;ue++)switch(b.elements[ue].type){case"node":var K=b.elements[ue];C.push(K);break;case"way":var W=kn.clone(b.elements[ue]);W.nodes=kn.clone(W.nodes),I.push(W),W.center&&T(W),W.geometry?U(W):W.bounds&&O(W);break;case"relation":var $=kn.clone(b.elements[ue]);$.members=kn.clone($.members),w.push($);var ie=$.members&&$.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});$.center&&T($),ie?F($):$.bounds&&O($);break}return f(C,I,w)}function p(b){var C=new Array,I=new Array,w=new Array;function T($,ie,X){$.hasAttribute(X)&&(ie[X]=$.getAttribute(X))}function O($,ie){var X=kn.clone($);T(ie,X,"lat"),T(ie,X,"lon"),X.__is_center_placeholder=!0,C.push(X)}function U($,ie){var X=kn.clone($);X.nodes=[];function V(E,j,B){var ee={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+B,lat:E,lon:j};X.nodes.push(ee.id),C.push(ee)}V(ie.getAttribute("minlat"),ie.getAttribute("minlon"),1),V(ie.getAttribute("maxlat"),ie.getAttribute("minlon"),2),V(ie.getAttribute("maxlat"),ie.getAttribute("maxlon"),3),V(ie.getAttribute("minlat"),ie.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,I.push(X)}function F($,ie){function X(V,E,j){var B={type:"node",id:j,lat:V,lon:E};return C.push(B),B.id}kn.isArray($.nodes)||($.nodes=[],kn.each(ie,function(V,E){$.nodes.push("_anonymous@"+V.getAttribute("lat")+"/"+V.getAttribute("lon"))})),kn.each(ie,function(V,E){V.getAttribute("lat")&&X(V.getAttribute("lat"),V.getAttribute("lon"),$.nodes[E])})}function ue($,ie){function X(E,j,B){var ee={type:"node",id:B,lat:E,lon:j};C.push(ee)}function V(E,j){if(I.some(function(q){return q.type=="way"&&q.id==j}))return;var B={type:"way",id:j,nodes:[]};function ee(q,me){var _e={type:"node",id:"_anonymous@"+q+"/"+me,lat:q,lon:me};B.nodes.push(_e.id),C.push(_e)}kn.each(E,function(q){q.getAttribute("lat")?ee(q.getAttribute("lat"),q.getAttribute("lon")):B.nodes.push(void 0)}),I.push(B)}kn.each(ie,function(E,j){$.members[j].type=="node"?E.getAttribute("lat")&&X(E.getAttribute("lat"),E.getAttribute("lon"),$.members[j].ref):$.members[j].type=="way"&&E.getElementsByTagName("nd").length>0&&($.members[j].ref="_fullGeom"+$.members[j].ref,V(E.getElementsByTagName("nd"),$.members[j].ref))})}kn.each(b.getElementsByTagName("node"),function($,ie){var X={};kn.each($.getElementsByTagName("tag"),function(E){X[E.getAttribute("k")]=E.getAttribute("v")});var V={type:"node"};T($,V,"id"),T($,V,"lat"),T($,V,"lon"),T($,V,"version"),T($,V,"timestamp"),T($,V,"changeset"),T($,V,"uid"),T($,V,"user"),kn.isEmpty(X)||(V.tags=X),C.push(V)});var K,W;return kn.each(b.getElementsByTagName("way"),function($,ie){var X={},V=[];kn.each($.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var E=!1;kn.each($.getElementsByTagName("nd"),function(B,ee){var q;(q=B.getAttribute("ref"))&&(V[ee]=q),!E&&B.getAttribute("lat")&&(E=!0)});var j={type:"way"};T($,j,"id"),T($,j,"version"),T($,j,"timestamp"),T($,j,"changeset"),T($,j,"uid"),T($,j,"user"),V.length>0&&(j.nodes=V),kn.isEmpty(X)||(j.tags=X),(K=$.getElementsByTagName("center")[0])&&O(j,K),E?F(j,$.getElementsByTagName("nd")):(W=$.getElementsByTagName("bounds")[0])&&U(j,W),I.push(j)}),kn.each(b.getElementsByTagName("relation"),function($,ie){var X={},V=[];kn.each($.getElementsByTagName("tag"),function(B){X[B.getAttribute("k")]=B.getAttribute("v")});var E=!1;kn.each($.getElementsByTagName("member"),function(B,ee){V[ee]={},T(B,V[ee],"ref"),T(B,V[ee],"role"),T(B,V[ee],"type"),(!E&&V[ee].type=="node"&&B.getAttribute("lat")||V[ee].type=="way"&&B.getElementsByTagName("nd").length>0)&&(E=!0)});var j={type:"relation"};T($,j,"id"),T($,j,"version"),T($,j,"timestamp"),T($,j,"changeset"),T($,j,"uid"),T($,j,"user"),V.length>0&&(j.members=V),kn.isEmpty(X)||(j.tags=X),(K=$.getElementsByTagName("center")[0])&&O(j,K),E?ue(j,$.getElementsByTagName("member")):(W=$.getElementsByTagName("bounds")[0])&&U(j,W),w.push(j)}),f(C,I,w)}function f(b,C,I){function w(ze,We){if(typeof We!="object"&&(We={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ze,We);for(var He in ze)if(t.uninterestingTags[He]!==!0&&!(We[He]===!0||We[He]===ze[He]))return!0;return!1}function T(ze){var We={timestamp:ze.timestamp,version:ze.version,changeset:ze.changeset,user:ze.user,uid:ze.uid};for(var He in We)We[He]===void 0&&delete We[He];return We}for(var O=new Object,U=new Object,F=0;F<b.length;F++){var ue=b[F];O[ue.id]!==void 0&&(ue=t.deduplicator(ue,O[ue.id])),O[ue.id]=ue,typeof ue.tags<"u"&&w(ue.tags)&&(U[ue.id]=!0)}for(var F=0;F<I.length;F++)if(kn.isArray(I[F].members))for(var K=0;K<I[F].members.length;K++)I[F].members[K].type=="node"&&(U[I[F].members[K].ref]=!0);for(var W=new Object,$=new Object,F=0;F<C.length;F++){var ie=C[F];if(W[ie.id]&&(ie=t.deduplicator(ie,W[ie.id])),W[ie.id]=ie,kn.isArray(ie.nodes))for(var K=0;K<ie.nodes.length;K++)typeof ie.nodes[K]!="object"&&($[ie.nodes[K]]=!0,ie.nodes[K]=O[ie.nodes[K]])}var X=new Array;for(var V in O){var ue=O[V];(!$[V]||U[V])&&X.push(ue)}for(var E=new Array,F=0;F<I.length;F++){var j=I[F];E[j.id]&&(j=t.deduplicator(j,E[j.id])),E[j.id]=j}var B={node:{},way:{},relation:{}};for(var V in E){var j=E[V];if(!kn.isArray(j.members)){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"ignored because it has no members");continue}for(var K=0;K<j.members.length;K++){var ee=j.members[K].type,q=j.members[K].ref;if(typeof q!="number"&&(q=q.replace("_fullGeom","")),!B[ee]){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"member",ee+"/"+q,"ignored because it has an invalid type");continue}typeof B[ee][q]>"u"&&(B[ee][q]=[]),B[ee][q].push({role:j.members[K].role,rel:j.id,reltags:j.tags})}}var me,_e=[];for(F=0;F<X.length;F++){if(typeof X[F].lon>"u"||typeof X[F].lat>"u"){t.verbose&&console.warn("POI",X[F].type+"/"+X[F].id,"ignored because it lacks coordinates");continue}var de={type:"Feature",id:X[F].type+"/"+X[F].id,properties:{type:X[F].type,id:X[F].id,tags:X[F].tags||{},relations:B.node[X[F].id]||[],meta:T(X[F])},geometry:{type:"Point",coordinates:[+X[F].lon,+X[F].lat]}};X[F].__is_center_placeholder&&(de.properties.geometry="center"),i?i(de):_e.push(de)}for(var oe=[],le=[],F=0;F<I.length;F++)if(E[I[F].id]===I[F]){if(typeof I[F].tags<"u"&&(I[F].tags.type=="route"||I[F].tags.type=="waterway")){let We=function(He){var rt=!1,ht;ht=He.members.filter(function(Et){return Et.type==="way"}),ht=ht.map(function(Et){var $t=W[Et.ref];if($t===void 0||$t.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",Et.type+"/"+Et.ref),rt=!0;return}return{id:Et.ref,role:Et.role,way:$t,nodes:$t.nodes.filter(function(Ht){return Ht!==void 0?!0:(rt=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),ht=kn.compact(ht);var wt;wt=tv(ht);var Mt=[];if(Mt=kn.compact(wt.map(function(Et){return kn.compact(Et.map(function($t){return[+$t.lon,+$t.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var gt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:B[He.type][He.id]||[],meta:T(He)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return rt&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),gt.properties.tainted=!0),gt};var Be=We;if(!kn.isArray(I[F].members)){t.verbose&&console.warn("Route",I[F].type+"/"+I[F].id,"ignored because it has no members");continue}if(I[F].members.forEach(function(He){W[He.ref]&&!w(W[He.ref].tags)&&(W[He.ref].is_skippablerelationmember=!0)}),de=We(I[F]),de===!1){t.verbose&&console.warn("Route relation",I[F].type+"/"+I[F].id,"ignored because it has invalid geometry");continue}i?i(dm(de)):le.push(de)}if(typeof I[F].tags<"u"&&(I[F].tags.type=="multipolygon"||I[F].tags.type=="boundary")){let He=function(rt,ht){var wt=!1,Mt=te?"way":"relation",gt=typeof rt.id=="number"?rt.id:+rt.id.replace("_fullGeom",""),Et;Et=ht.members.filter(function(D){return D.type==="way"}),Et=Et.map(function(D){var xe=W[D.ref];if(xe===void 0||xe.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),wt=!0;return}return{id:D.ref,role:D.role||"outer",way:xe,nodes:xe.nodes.filter(function(Ze){return Ze!==void 0?!0:(wt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),Et=kn.compact(Et);var $t,Ht;$t=tv(Et.filter(function(D){return D.role==="outer"})),Ht=tv(Et.filter(function(D){return D.role==="inner"}));var qt;function bn(D){var xe=function(R,z){for(var Se=0;Se<z.length;Se++)if(Qe(z[Se],R))return!0;return!1},Ze=function(R){return R.map(function(z){return[+z.lat,+z.lon]})},Qe=function(R,z){for(var Se=R[0],Ve=R[1],nt=!1,ot=0,lt=z.length-1;ot<z.length;lt=ot++){var Dt=z[ot][0],Ft=z[ot][1],yn=z[lt][0],vn=z[lt][1],un=Ft>Ve!=vn>Ve&&Se<(yn-Dt)*(Ve-Ft)/(vn-Ft)+Dt;un&&(nt=!nt)}return nt},ct,ae;for(D=Ze(D),ct=0;ct<$t.length;ct++)if(ae=Ze($t[ct]),xe(ae,D))return ct}qt=$t.map(function(D){return[D]});for(var et=0;et<Ht.length;et++){var hn=bn(Ht[et]);hn!==void 0?qt[hn].push(Ht[et]):t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains an inner ring with no containing outer")}var xn=[];if(xn=kn.compact(qt.map(function(D){var xe=kn.compact(D.map(function(Ze){if(Ze.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains a ring with less than four nodes");return}return kn.compact(Ze.map(function(Qe){return[+Qe.lon,+Qe.lat]}))}));if(xe.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains an empty ring cluster");return}return xe})),xn.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"contains no coordinates"),!1;var we="MultiPolygon";xn.length===1&&(we="Polygon",xn=xn[0]);var N={type:"Feature",id:rt.type+"/"+gt,properties:{type:rt.type,id:gt,tags:rt.tags||{},relations:B[rt.type][rt.id]||[],meta:T(rt)},geometry:{type:we,coordinates:xn}};return wt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+gt,"is tainted"),N.properties.tainted=!0),N};var ke=He;if(!kn.isArray(I[F].members)){t.verbose&&console.warn("Multipolygon",I[F].type+"/"+I[F].id,"ignored because it has no members");continue}for(var Q=0,K=0;K<I[F].members.length;K++)I[F].members[K].role=="outer"?Q++:t.verbose&&I[F].members[K].role!="inner"&&console.warn("Multipolygon",I[F].type+"/"+I[F].id,"member",I[F].members[K].type+"/"+I[F].members[K].ref,'ignored because it has an invalid role: "'+I[F].members[K].role+'"');if(I[F].members.forEach(function(rt){W[rt.ref]&&(rt.role==="outer"&&!w(W[rt.ref].tags,I[F].tags)&&(W[rt.ref].is_skippablerelationmember=!0),rt.role==="inner"&&!w(W[rt.ref].tags)&&(W[rt.ref].is_skippablerelationmember=!0))}),Q==0){t.verbose&&console.warn("Multipolygon relation",I[F].type+"/"+I[F].id,"ignored because it has no outer ways");continue}var te=!1;Q==1&&!w(I[F].tags,{type:!0})&&(te=!0);var de=null;if(!te)de=He(I[F],I[F]);else{var he=I[F].members.filter(function(rt){return rt.role==="outer"})[0];if(he=W[he.ref],he===void 0){t.verbose&&console.warn("Multipolygon relation",I[F].type+"/"+I[F].id,"ignored because outer way",he.type+"/"+he.ref,"is missing");continue}he.is_skippablerelationmember=!0,de=He(he,I[F])}if(de===!1){t.verbose&&console.warn("Multipolygon relation",I[F].type+"/"+I[F].id,"ignored because it has invalid geometry");continue}i?i(dm(de)):le.push(de)}}for(var F=0;F<C.length;F++)if(W[C[F].id]===C[F]){if(!kn.isArray(C[F].nodes)){t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"ignored because it has no nodes");continue}if(!C[F].is_skippablerelationmember){typeof C[F].id!="number"&&(C[F].id=+C[F].id.replace("_fullGeom","")),C[F].tainted=!1,C[F].hidden=!1;var be=new Array;for(K=0;K<C[F].nodes.length;K++)typeof C[F].nodes[K]=="object"?be.push([+C[F].nodes[K].lon,+C[F].nodes[K].lat]):(t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"is tainted by an invalid node"),C[F].tainted=!0);if(be.length<=1){t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"ignored because it contains too few nodes");continue}var Ee="LineString";typeof C[F].nodes[0]<"u"&&typeof C[F].nodes[C[F].nodes.length-1]<"u"&&C[F].nodes[0].id===C[F].nodes[C[F].nodes.length-1].id&&(typeof C[F].tags<"u"&&u(C[F].tags)||C[F].__is_bounds_placeholder)&&(Ee="Polygon",be=[be]);var de={type:"Feature",id:C[F].type+"/"+C[F].id,properties:{type:C[F].type,id:C[F].id,tags:C[F].tags||{},relations:B.way[C[F].id]||[],meta:T(C[F])},geometry:{type:Ee,coordinates:be}};C[F].tainted&&(t.verbose&&console.warn("Way",C[F].type+"/"+C[F].id,"is tainted"),de.properties.tainted=!0),C[F].__is_bounds_placeholder&&(de.properties.geometry="bounds"),i?i(dm(de)):Ee=="LineString"?oe.push(de):le.push(de)}}return i?!0:(me={type:"FeatureCollection",features:[]},me.features=me.features.concat(le),me.features=me.features.concat(oe),me.features=me.features.concat(_e),t.flatProperties&&me.features.forEach(function(ze){ze.properties=kn.merge(ze.properties.meta,ze.properties.tags,{id:ze.properties.type+"/"+ze.properties.id})}),me=dm(me),me)}function u(b){var C=t.polygonFeatures;if(typeof C=="function")return C(b);if(b.area==="no")return!1;for(var I in b){var w=b[I],T=C[I];if(!(typeof T>"u")&&w!=="no"&&(T===!0||T.included_values&&T.included_values[w]===!0||T.excluded_values&&T.excluded_values[w]!==!0))return!0}return!1}};function tv(e){for(var t=function(w){return w[0]},i=function(w){return w[w.length-1]},a=function(w,T){return w!==void 0&&T!==void 0&&w.id===T.id},c=[],p,f,u,b,C,I;e.length;)for(p=e.pop().nodes.slice(),c.push(p);e.length&&!a(t(p),i(p));){for(f=t(p),u=i(p),b=0;b<e.length;b++)if(I=e[b].nodes,a(u,t(I))){C=p.push,I=I.slice(1);break}else if(a(u,i(I))){C=p.push,I=I.slice(0,-1).reverse();break}else if(a(f,i(I))){C=p.unshift,I=I.slice(0,-1);break}else if(a(f,t(I))){C=p.unshift,I=I.slice(1).reverse();break}else I=C=null;if(!I)break;e.splice(b,1),C.apply(p,I)}return c}Og.toGeojson=Og;var Z5=Og;const X5=jf(Z5),nv={type:"FeatureCollection",features:[]},xA=()=>{const[e,t]=_t.useState(!1),i=_t.useCallback(async(f,u,b)=>{var F,ue;if(e||(console.log(b),b<16))return nv;t(!0);let C=300;b>17&&(C=200),b>18&&(C=100),b>19&&(C=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${C},${f},${u});
`,I+="out meta geom;",console.log(I);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(w.status!==200)return t(!1),nv;const T=await w.json();console.log("overpass json elements: ",T.elements);const O=X5(T);console.log("overpass osmtogeojson raw: ",O);for await(const K of O.features){if(!K.properties)continue;K.id=K.properties.id.split("/")[1];const W=(F=T.elements.filter(ie=>K.id?typeof K.id=="number"?ie.id===K.id:ie.id===parseInt(K.id):!1))==null?void 0:F[0];if(W&&(K.properties.tags=W.tags,K.properties.nodes=W.nodes),K.geometry.type==="Polygon"){const ie=R5(K.geometry.coordinates);var U=D5(ie);K.properties.center=U.geometry.coordinates}K.geometry.type==="Point"&&(K.properties.center=K.geometry.coordinates);const $=K.properties.uid;if($){let ie=localStorage.getItem($+"-icon");if(ie===null){const X=await zs.getUser($);(ue=X.img)!=null&&ue.href?(ie=X.img.href,localStorage.setItem($+"-icon",X.img.href)):localStorage.setItem($+"-icon","")}K.properties.userIconHref=ie||""}}return console.log("overpass osmtogeojson converted: ",O),console.log("overpass: loaded."),t(!1),O},[]),[a,c]=_t.useState(!1),p=_t.useCallback(async f=>{console.log("overpass: loading...",f),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(b.status!==200){c(!1);return}const C=await b.json();console.log("overpass json parent elements: ",C.elements);const I=250,w=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(w);const T=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(w)}`,{});if(T.status!==200){c(!1);return}const O=await T.json();console.log("overpass json child elements: ",O.elements);const U=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(U);const F=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(U)}`,{});if(F.status!==200){c(!1);return}const ue=await F.json();return console.log("overpass json neighbour elements: ",ue.elements),c(!1),[...C.elements,...O.elements,...ue.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:p,loadingOverpass:e,loadingOverpassAdmin:a}},q5=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),rv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},K5=({feature:e,onCancel:t,onSubmit:i})=>{var me,_e,de,oe;const{detectCountry:a,loadingCountry:c}=B5(),{fetchOverpassAdmin:p,loadingOverpassAdmin:f}=xA(),u=JSON.parse((me=e.properties)==null?void 0:me.center),[b,C]=_t.useState(void 0),[I,w]=_t.useState(),[T,O]=_t.useState(e),[U,F]=_t.useState(!1),[ue,K]=_t.useState(!1),[W,$]=_t.useState(!1),[ie,X]=_t.useState(),[V,E]=_t.useState();_t.useEffect(()=>{F(zs.isLoggedIn())},[]),_t.useEffect(()=>{(async()=>{var Q,te;const le=await a(u[0],u[1]);if(C(le),(Q=le==null?void 0:le.properties)!=null&&Q.ISO_A3&&JS[le.properties.ISO_A3]){const he=JS[le.properties.ISO_A3];w(he);const be=he.defaultComment+" "+((te=e.properties)==null?void 0:te.id);E(be)}})()},[e]),_t.useEffect(()=>{console.log(T.properties)},[T]);const j=_t.useCallback(async()=>{const le=await oI.openReverseGeocoder([u[0],u[1]]);O(Q=>{const te={properties:{"addr:province":le.prefecture,"addr:city":le.city,...Q.properties}};return Q.properties=te.properties,Q})},[]),B=_t.useCallback(async()=>{if(!T.properties)return;T.properties.nodes;const le=await p(JSON.parse(T.properties.nodes));console.log("onOverpassReverseGeocode",le),X(le)},[T]),ee=_t.useCallback(async le=>{var ke,ze,We;$(!0),le.preventDefault();const Q=new FormData(le.currentTarget),te=JSON.parse((ke=e.properties)==null?void 0:ke.tags);Q.forEach((He,rt)=>{typeof He=="string"&&He.length>0&&rt!=="comment"&&rt!=="source"&&(te[rt]=He)});const he={type:"way",id:e.id,version:(ze=e.properties)==null?void 0:ze.version,tags:te,nodes:JSON.parse((We=e.properties)==null?void 0:We.nodes)};console.info(JSON.stringify(he,null,2));const be={create:[],modify:[he],delete:[]},Ee=Q.get("comment");Ee&&(rv.comment=Ee.toString());const Be=Q.get("source");Be&&(rv.source=Be.toString()),await zs.uploadChangeset(rv,be),$(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),q=_t.useCallback(()=>{K(!0)},[]);return T.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+T.properties.id,target:"_blank",children:T.properties.id})," | ",yt.jsx(nI,{feature:T}),I&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(N5,{feature:T,fields:I})]})]}),c?yt.jsx(oa,{icon:h_,spin:!0}):yt.jsx(yt.Fragment,{children:I?yt.jsxs("form",{onSubmit:ee,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(Q0,{feature:T,fieldOption:I.postcodeField,onChange:q})}),yt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(le=>yt.jsx(Q0,{feature:T,fieldOption:le,onChange:q,suggestList:ie},le.key))}),yt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(le=>yt.jsx(Q0,{feature:T,fieldOption:le,onChange:q},le.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(q5,{}),yt.jsx(U5,{defaultValue:V})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=b==null?void 0:b.properties)==null?void 0:_e.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:j,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:f,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",f&&yt.jsx(oa,{icon:h_,spin:!0})]}),yt.jsx("button",{disabled:!U||W||!ue,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!U&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(tI,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(de=b==null?void 0:b.properties)==null?void 0:de.NAME," (ISO code:",(oe=b==null?void 0:b.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function Y5(e,t){const[i,a]=_t.useState(e);return _t.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const J5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},Q5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function ej(){const e=_t.useRef(null),[t,i]=_t.useState(),a=Y5(t,2500),c=_t.useRef(null),[p,f]=_t.useState({type:"FeatureCollection",features:[]}),[u,b]=_t.useState("auto"),[C,I]=_t.useState(),[w,T]=_t.useState([]),{fetchOverpassBuildings:O,loadingOverpass:U}=xA();_t.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const F=_t.useCallback(E=>{const j=E.target.getCenter(),B=E.target.getZoom();i({zoom:B,latitude:j.lat,longitude:j.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),ue=_t.useCallback(E=>{i(E.viewState)},[]),K=_t.useCallback(E=>{i(E.viewState)},[]);_t.useEffect(()=>{(async()=>{if(!a)return;const E=a,j=await O(E.latitude,E.longitude,E.zoom);f(j)})()},[a]);const W=_t.useCallback(E=>{var me;b("pointer");const{features:j,point:{x:B,y:ee}}=E,q=j&&j[0];q?((me=e.current)==null||me.setFeatureState({source:"buildings-source",id:q.id},{hover:!0}),I({feature:q,x:B,y:ee})):I(void 0)},[]),$=_t.useCallback(E=>{var j;b("auto"),(j=e.current)==null||j.querySourceFeatures("buildings-source").map(B=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),I(void 0)},[]),ie=_t.useCallback(E=>{var B;X();const j=E.features&&E.features[0];j&&((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:j.id},{select:!0}),T([j]))},[]),X=_t.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(j=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:j.id},{select:!1})}),T([])},[]),V=_t.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),p.features.map((j,B)=>!j.properties||!j.properties.center?null:yt.jsx(T4,{style:{cursor:"pointer"},longitude:j.properties.center[0],latitude:j.properties.center[1],anchor:"center",children:yt.jsx(YR,{feature:j,size:E})},`marker-${B}`))},[p,t]);return yt.jsxs("div",{children:[yt.jsx(MR,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(eL,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[w.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:w.map(E=>yt.jsx(K5,{feature:E,onCancel:X,onSubmit:X},E.id))})}),yt.jsxs(E4,{ref:e,...t,onMove:ue,onMoveEnd:K,onLoad:F,interactiveLayerIds:["buildings-layer-fill"],onClick:ie,onMouseEnter:W,onMouseLeave:$,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:xC,style:{width:"100%",height:"100%"},mapStyle:J5,children:[yt.jsx(P4,{id:"buildings-source",type:"geojson",data:p,children:yt.jsx(A4,{...Q5})}),yt.jsx(C4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(I4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(oa,{size:"2x",icon:PR}):U?yt.jsx(oa,{size:"2x",icon:h_,spin:!0}):yt.jsx(oa,{size:"2x",icon:IR})}),V,C&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:C.x+5,top:C.y+5},children:[yt.jsx(nI,{feature:C.feature}),yt.jsx("br",{}),yt.jsx(JR,{feature:C.feature}),yt.jsx(zR,{feature:C.feature})]})]})]})]})}var wA={},cy={};cy.byteLength=rj;cy.toByteArray=oj;cy.fromByteArray=lj;var ta=[],os=[],tj=typeof Uint8Array<"u"?Uint8Array:Array,iv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Zc=0,nj=iv.length;Zc<nj;++Zc)ta[Zc]=iv[Zc],os[iv.charCodeAt(Zc)]=Zc;os[45]=62;os[95]=63;function bA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function rj(e){var t=bA(e),i=t[0],a=t[1];return(i+a)*3/4-a}function ij(e,t,i){return(t+i)*3/4-i}function oj(e){var t,i=bA(e),a=i[0],c=i[1],p=new tj(ij(e,a,c)),f=0,u=c>0?a-4:a,b;for(b=0;b<u;b+=4)t=os[e.charCodeAt(b)]<<18|os[e.charCodeAt(b+1)]<<12|os[e.charCodeAt(b+2)]<<6|os[e.charCodeAt(b+3)],p[f++]=t>>16&255,p[f++]=t>>8&255,p[f++]=t&255;return c===2&&(t=os[e.charCodeAt(b)]<<2|os[e.charCodeAt(b+1)]>>4,p[f++]=t&255),c===1&&(t=os[e.charCodeAt(b)]<<10|os[e.charCodeAt(b+1)]<<4|os[e.charCodeAt(b+2)]>>2,p[f++]=t>>8&255,p[f++]=t&255),p}function sj(e){return ta[e>>18&63]+ta[e>>12&63]+ta[e>>6&63]+ta[e&63]}function aj(e,t,i){for(var a,c=[],p=t;p<i;p+=3)a=(e[p]<<16&16711680)+(e[p+1]<<8&65280)+(e[p+2]&255),c.push(sj(a));return c.join("")}function lj(e){for(var t,i=e.length,a=i%3,c=[],p=16383,f=0,u=i-a;f<u;f+=p)c.push(aj(e,f,f+p>u?u:f+p));return a===1?(t=e[i-1],c.push(ta[t>>2]+ta[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ta[t>>10]+ta[t>>4&63]+ta[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=cy,i=oy,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=W,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=p(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const ae=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(ae,R),ae.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const R=new Uint8Array(ae);return Object.setPrototypeOf(R,u.prototype),R}function u(ae,R,z){if(typeof ae=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(ae)}return b(ae,R,z)}u.poolSize=8192;function b(ae,R,z){if(typeof ae=="string")return T(ae,R);if(ArrayBuffer.isView(ae))return U(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(D(ae,ArrayBuffer)||ae&&D(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(ae,SharedArrayBuffer)||ae&&D(ae.buffer,SharedArrayBuffer)))return F(ae,R,z);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=ae.valueOf&&ae.valueOf();if(Se!=null&&Se!==ae)return u.from(Se,R,z);const Ve=ue(ae);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return u.from(ae[Symbol.toPrimitive]("string"),R,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}u.from=function(ae,R,z){return b(ae,R,z)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function C(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function I(ae,R,z){return C(ae),ae<=0?f(ae):R!==void 0?typeof z=="string"?f(ae).fill(R,z):f(ae).fill(R):f(ae)}u.alloc=function(ae,R,z){return I(ae,R,z)};function w(ae){return C(ae),f(ae<0?0:K(ae)|0)}u.allocUnsafe=function(ae){return w(ae)},u.allocUnsafeSlow=function(ae){return w(ae)};function T(ae,R){if((typeof R!="string"||R==="")&&(R="utf8"),!u.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const z=$(ae,R)|0;let Se=f(z);const Ve=Se.write(ae,R);return Ve!==z&&(Se=Se.slice(0,Ve)),Se}function O(ae){const R=ae.length<0?0:K(ae.length)|0,z=f(R);for(let Se=0;Se<R;Se+=1)z[Se]=ae[Se]&255;return z}function U(ae){if(D(ae,Uint8Array)){const R=new Uint8Array(ae);return F(R.buffer,R.byteOffset,R.byteLength)}return O(ae)}function F(ae,R,z){if(R<0||ae.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<R+(z||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return R===void 0&&z===void 0?Se=new Uint8Array(ae):z===void 0?Se=new Uint8Array(ae,R):Se=new Uint8Array(ae,R,z),Object.setPrototypeOf(Se,u.prototype),Se}function ue(ae){if(u.isBuffer(ae)){const R=K(ae.length)|0,z=f(R);return z.length===0||ae.copy(z,0,0,R),z}if(ae.length!==void 0)return typeof ae.length!="number"||xe(ae.length)?f(0):O(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return O(ae.data)}function K(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function W(ae){return+ae!=ae&&(ae=0),u.alloc(+ae)}u.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==u.prototype},u.compare=function(R,z){if(D(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),D(z,Uint8Array)&&(z=u.from(z,z.offset,z.byteLength)),!u.isBuffer(R)||!u.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===z)return 0;let Se=R.length,Ve=z.length;for(let nt=0,ot=Math.min(Se,Ve);nt<ot;++nt)if(R[nt]!==z[nt]){Se=R[nt],Ve=z[nt];break}return Se<Ve?-1:Ve<Se?1:0},u.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(R,z){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return u.alloc(0);let Se;if(z===void 0)for(z=0,Se=0;Se<R.length;++Se)z+=R[Se].length;const Ve=u.allocUnsafe(z);let nt=0;for(Se=0;Se<R.length;++Se){let ot=R[Se];if(D(ot,Uint8Array))nt+ot.length>Ve.length?(u.isBuffer(ot)||(ot=u.from(ot)),ot.copy(Ve,nt)):Uint8Array.prototype.set.call(Ve,ot,nt);else if(u.isBuffer(ot))ot.copy(Ve,nt);else throw new TypeError('"list" argument must be an Array of Buffers');nt+=ot.length}return Ve};function $(ae,R){if(u.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||D(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const z=ae.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&z===0)return 0;let Ve=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return et(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return we(ae).length;default:if(Ve)return Se?-1:et(ae).length;R=(""+R).toLowerCase(),Ve=!0}}u.byteLength=$;function ie(ae,R,z){let Se=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,R>>>=0,z<=R))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return he(this,R,z);case"utf8":case"utf-8":return de(this,R,z);case"ascii":return Q(this,R,z);case"latin1":case"binary":return te(this,R,z);case"base64":return _e(this,R,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,R,z);default:if(Se)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Se=!0}}u.prototype._isBuffer=!0;function X(ae,R,z){const Se=ae[R];ae[R]=ae[z],ae[z]=Se}u.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<R;z+=2)X(this,z,z+1);return this},u.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<R;z+=4)X(this,z,z+3),X(this,z+1,z+2);return this},u.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<R;z+=8)X(this,z,z+7),X(this,z+1,z+6),X(this,z+2,z+5),X(this,z+3,z+4);return this},u.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?de(this,0,R):ie.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(R){if(!u.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:u.compare(this,R)===0},u.prototype.inspect=function(){let R="";const z=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(R+=" ... "),"<Buffer "+R+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(R,z,Se,Ve,nt){if(D(R,Uint8Array)&&(R=u.from(R,R.offset,R.byteLength)),!u.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(z===void 0&&(z=0),Se===void 0&&(Se=R?R.length:0),Ve===void 0&&(Ve=0),nt===void 0&&(nt=this.length),z<0||Se>R.length||Ve<0||nt>this.length)throw new RangeError("out of range index");if(Ve>=nt&&z>=Se)return 0;if(Ve>=nt)return-1;if(z>=Se)return 1;if(z>>>=0,Se>>>=0,Ve>>>=0,nt>>>=0,this===R)return 0;let ot=nt-Ve,lt=Se-z;const Dt=Math.min(ot,lt),Ft=this.slice(Ve,nt),yn=R.slice(z,Se);for(let vn=0;vn<Dt;++vn)if(Ft[vn]!==yn[vn]){ot=Ft[vn],lt=yn[vn];break}return ot<lt?-1:lt<ot?1:0};function V(ae,R,z,Se,Ve){if(ae.length===0)return-1;if(typeof z=="string"?(Se=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,xe(z)&&(z=Ve?0:ae.length-1),z<0&&(z=ae.length+z),z>=ae.length){if(Ve)return-1;z=ae.length-1}else if(z<0)if(Ve)z=0;else return-1;if(typeof R=="string"&&(R=u.from(R,Se)),u.isBuffer(R))return R.length===0?-1:E(ae,R,z,Se,Ve);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ae,R,z):Uint8Array.prototype.lastIndexOf.call(ae,R,z):E(ae,[R],z,Se,Ve);throw new TypeError("val must be string, number or Buffer")}function E(ae,R,z,Se,Ve){let nt=1,ot=ae.length,lt=R.length;if(Se!==void 0&&(Se=String(Se).toLowerCase(),Se==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(ae.length<2||R.length<2)return-1;nt=2,ot/=2,lt/=2,z/=2}function Dt(yn,vn){return nt===1?yn[vn]:yn.readUInt16BE(vn*nt)}let Ft;if(Ve){let yn=-1;for(Ft=z;Ft<ot;Ft++)if(Dt(ae,Ft)===Dt(R,yn===-1?0:Ft-yn)){if(yn===-1&&(yn=Ft),Ft-yn+1===lt)return yn*nt}else yn!==-1&&(Ft-=Ft-yn),yn=-1}else for(z+lt>ot&&(z=ot-lt),Ft=z;Ft>=0;Ft--){let yn=!0;for(let vn=0;vn<lt;vn++)if(Dt(ae,Ft+vn)!==Dt(R,vn)){yn=!1;break}if(yn)return Ft}return-1}u.prototype.includes=function(R,z,Se){return this.indexOf(R,z,Se)!==-1},u.prototype.indexOf=function(R,z,Se){return V(this,R,z,Se,!0)},u.prototype.lastIndexOf=function(R,z,Se){return V(this,R,z,Se,!1)};function j(ae,R,z,Se){z=Number(z)||0;const Ve=ae.length-z;Se?(Se=Number(Se),Se>Ve&&(Se=Ve)):Se=Ve;const nt=R.length;Se>nt/2&&(Se=nt/2);let ot;for(ot=0;ot<Se;++ot){const lt=parseInt(R.substr(ot*2,2),16);if(xe(lt))return ot;ae[z+ot]=lt}return ot}function B(ae,R,z,Se){return N(et(R,ae.length-z),ae,z,Se)}function ee(ae,R,z,Se){return N(hn(R),ae,z,Se)}function q(ae,R,z,Se){return N(we(R),ae,z,Se)}function me(ae,R,z,Se){return N(xn(R,ae.length-z),ae,z,Se)}u.prototype.write=function(R,z,Se,Ve){if(z===void 0)Ve="utf8",Se=this.length,z=0;else if(Se===void 0&&typeof z=="string")Ve=z,Se=this.length,z=0;else if(isFinite(z))z=z>>>0,isFinite(Se)?(Se=Se>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Se,Se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const nt=this.length-z;if((Se===void 0||Se>nt)&&(Se=nt),R.length>0&&(Se<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let ot=!1;for(;;)switch(Ve){case"hex":return j(this,R,z,Se);case"utf8":case"utf-8":return B(this,R,z,Se);case"ascii":case"latin1":case"binary":return ee(this,R,z,Se);case"base64":return q(this,R,z,Se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,R,z,Se);default:if(ot)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),ot=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ae,R,z){return R===0&&z===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(R,z))}function de(ae,R,z){z=Math.min(ae.length,z);const Se=[];let Ve=R;for(;Ve<z;){const nt=ae[Ve];let ot=null,lt=nt>239?4:nt>223?3:nt>191?2:1;if(Ve+lt<=z){let Dt,Ft,yn,vn;switch(lt){case 1:nt<128&&(ot=nt);break;case 2:Dt=ae[Ve+1],(Dt&192)===128&&(vn=(nt&31)<<6|Dt&63,vn>127&&(ot=vn));break;case 3:Dt=ae[Ve+1],Ft=ae[Ve+2],(Dt&192)===128&&(Ft&192)===128&&(vn=(nt&15)<<12|(Dt&63)<<6|Ft&63,vn>2047&&(vn<55296||vn>57343)&&(ot=vn));break;case 4:Dt=ae[Ve+1],Ft=ae[Ve+2],yn=ae[Ve+3],(Dt&192)===128&&(Ft&192)===128&&(yn&192)===128&&(vn=(nt&15)<<18|(Dt&63)<<12|(Ft&63)<<6|yn&63,vn>65535&&vn<1114112&&(ot=vn))}}ot===null?(ot=65533,lt=1):ot>65535&&(ot-=65536,Se.push(ot>>>10&1023|55296),ot=56320|ot&1023),Se.push(ot),Ve+=lt}return le(Se)}const oe=4096;function le(ae){const R=ae.length;if(R<=oe)return String.fromCharCode.apply(String,ae);let z="",Se=0;for(;Se<R;)z+=String.fromCharCode.apply(String,ae.slice(Se,Se+=oe));return z}function Q(ae,R,z){let Se="";z=Math.min(ae.length,z);for(let Ve=R;Ve<z;++Ve)Se+=String.fromCharCode(ae[Ve]&127);return Se}function te(ae,R,z){let Se="";z=Math.min(ae.length,z);for(let Ve=R;Ve<z;++Ve)Se+=String.fromCharCode(ae[Ve]);return Se}function he(ae,R,z){const Se=ae.length;(!R||R<0)&&(R=0),(!z||z<0||z>Se)&&(z=Se);let Ve="";for(let nt=R;nt<z;++nt)Ve+=Ze[ae[nt]];return Ve}function be(ae,R,z){const Se=ae.slice(R,z);let Ve="";for(let nt=0;nt<Se.length-1;nt+=2)Ve+=String.fromCharCode(Se[nt]+Se[nt+1]*256);return Ve}u.prototype.slice=function(R,z){const Se=this.length;R=~~R,z=z===void 0?Se:~~z,R<0?(R+=Se,R<0&&(R=0)):R>Se&&(R=Se),z<0?(z+=Se,z<0&&(z=0)):z>Se&&(z=Se),z<R&&(z=R);const Ve=this.subarray(R,z);return Object.setPrototypeOf(Ve,u.prototype),Ve};function Ee(ae,R,z){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+R>z)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R],nt=1,ot=0;for(;++ot<z&&(nt*=256);)Ve+=this[R+ot]*nt;return Ve},u.prototype.readUintBE=u.prototype.readUIntBE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R+--z],nt=1;for(;z>0&&(nt*=256);)Ve+=this[R+--z]*nt;return Ve},u.prototype.readUint8=u.prototype.readUInt8=function(R,z){return R=R>>>0,z||Ee(R,1,this.length),this[R]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(R,z){return R=R>>>0,z||Ee(R,2,this.length),this[R]|this[R+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(R,z){return R=R>>>0,z||Ee(R,2,this.length),this[R]<<8|this[R+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},u.prototype.readBigUInt64LE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Ht(R,this.length-8);const Ve=z+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,nt=this[++R]+this[++R]*2**8+this[++R]*2**16+Se*2**24;return BigInt(Ve)+(BigInt(nt)<<BigInt(32))}),u.prototype.readBigUInt64BE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Ht(R,this.length-8);const Ve=z*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],nt=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+Se;return(BigInt(Ve)<<BigInt(32))+BigInt(nt)}),u.prototype.readIntLE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=this[R],nt=1,ot=0;for(;++ot<z&&(nt*=256);)Ve+=this[R+ot]*nt;return nt*=128,Ve>=nt&&(Ve-=Math.pow(2,8*z)),Ve},u.prototype.readIntBE=function(R,z,Se){R=R>>>0,z=z>>>0,Se||Ee(R,z,this.length);let Ve=z,nt=1,ot=this[R+--Ve];for(;Ve>0&&(nt*=256);)ot+=this[R+--Ve]*nt;return nt*=128,ot>=nt&&(ot-=Math.pow(2,8*z)),ot},u.prototype.readInt8=function(R,z){return R=R>>>0,z||Ee(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},u.prototype.readInt16LE=function(R,z){R=R>>>0,z||Ee(R,2,this.length);const Se=this[R]|this[R+1]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt16BE=function(R,z){R=R>>>0,z||Ee(R,2,this.length);const Se=this[R+1]|this[R]<<8;return Se&32768?Se|4294901760:Se},u.prototype.readInt32LE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},u.prototype.readInt32BE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},u.prototype.readBigInt64LE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Ht(R,this.length-8);const Ve=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(Se<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(z+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),u.prototype.readBigInt64BE=Qe(function(R){R=R>>>0,$t(R,"offset");const z=this[R],Se=this[R+7];(z===void 0||Se===void 0)&&Ht(R,this.length-8);const Ve=(z<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+Se)}),u.prototype.readFloatLE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),i.read(this,R,!0,23,4)},u.prototype.readFloatBE=function(R,z){return R=R>>>0,z||Ee(R,4,this.length),i.read(this,R,!1,23,4)},u.prototype.readDoubleLE=function(R,z){return R=R>>>0,z||Ee(R,8,this.length),i.read(this,R,!0,52,8)},u.prototype.readDoubleBE=function(R,z){return R=R>>>0,z||Ee(R,8,this.length),i.read(this,R,!1,52,8)};function Be(ae,R,z,Se,Ve,nt){if(!u.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Ve||R<nt)throw new RangeError('"value" argument is out of bounds');if(z+Se>ae.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,Se=Se>>>0,!Ve){const lt=Math.pow(2,8*Se)-1;Be(this,R,z,Se,lt,0)}let nt=1,ot=0;for(this[z]=R&255;++ot<Se&&(nt*=256);)this[z+ot]=R/nt&255;return z+Se},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,Se=Se>>>0,!Ve){const lt=Math.pow(2,8*Se)-1;Be(this,R,z,Se,lt,0)}let nt=Se-1,ot=1;for(this[z+nt]=R&255;--nt>=0&&(ot*=256);)this[z+nt]=R/ot&255;return z+Se},u.prototype.writeUint8=u.prototype.writeUInt8=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,1,255,0),this[z]=R&255,z+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,65535,0),this[z]=R&255,this[z+1]=R>>>8,z+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,65535,0),this[z]=R>>>8,this[z+1]=R&255,z+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,4294967295,0),this[z+3]=R>>>24,this[z+2]=R>>>16,this[z+1]=R>>>8,this[z]=R&255,z+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,4294967295,0),this[z]=R>>>24,this[z+1]=R>>>16,this[z+2]=R>>>8,this[z+3]=R&255,z+4};function ke(ae,R,z,Se,Ve){Et(R,Se,Ve,ae,z,7);let nt=Number(R&BigInt(4294967295));ae[z++]=nt,nt=nt>>8,ae[z++]=nt,nt=nt>>8,ae[z++]=nt,nt=nt>>8,ae[z++]=nt;let ot=Number(R>>BigInt(32)&BigInt(4294967295));return ae[z++]=ot,ot=ot>>8,ae[z++]=ot,ot=ot>>8,ae[z++]=ot,ot=ot>>8,ae[z++]=ot,z}function ze(ae,R,z,Se,Ve){Et(R,Se,Ve,ae,z,7);let nt=Number(R&BigInt(4294967295));ae[z+7]=nt,nt=nt>>8,ae[z+6]=nt,nt=nt>>8,ae[z+5]=nt,nt=nt>>8,ae[z+4]=nt;let ot=Number(R>>BigInt(32)&BigInt(4294967295));return ae[z+3]=ot,ot=ot>>8,ae[z+2]=ot,ot=ot>>8,ae[z+1]=ot,ot=ot>>8,ae[z]=ot,z+8}u.prototype.writeBigUInt64LE=Qe(function(R,z=0){return ke(this,R,z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Qe(function(R,z=0){return ze(this,R,z,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,!Ve){const Dt=Math.pow(2,8*Se-1);Be(this,R,z,Se,Dt-1,-Dt)}let nt=0,ot=1,lt=0;for(this[z]=R&255;++nt<Se&&(ot*=256);)R<0&&lt===0&&this[z+nt-1]!==0&&(lt=1),this[z+nt]=(R/ot>>0)-lt&255;return z+Se},u.prototype.writeIntBE=function(R,z,Se,Ve){if(R=+R,z=z>>>0,!Ve){const Dt=Math.pow(2,8*Se-1);Be(this,R,z,Se,Dt-1,-Dt)}let nt=Se-1,ot=1,lt=0;for(this[z+nt]=R&255;--nt>=0&&(ot*=256);)R<0&&lt===0&&this[z+nt+1]!==0&&(lt=1),this[z+nt]=(R/ot>>0)-lt&255;return z+Se},u.prototype.writeInt8=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,1,127,-128),R<0&&(R=255+R+1),this[z]=R&255,z+1},u.prototype.writeInt16LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,32767,-32768),this[z]=R&255,this[z+1]=R>>>8,z+2},u.prototype.writeInt16BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,2,32767,-32768),this[z]=R>>>8,this[z+1]=R&255,z+2},u.prototype.writeInt32LE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,2147483647,-2147483648),this[z]=R&255,this[z+1]=R>>>8,this[z+2]=R>>>16,this[z+3]=R>>>24,z+4},u.prototype.writeInt32BE=function(R,z,Se){return R=+R,z=z>>>0,Se||Be(this,R,z,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[z]=R>>>24,this[z+1]=R>>>16,this[z+2]=R>>>8,this[z+3]=R&255,z+4},u.prototype.writeBigInt64LE=Qe(function(R,z=0){return ke(this,R,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Qe(function(R,z=0){return ze(this,R,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function We(ae,R,z,Se,Ve,nt){if(z+Se>ae.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function He(ae,R,z,Se,Ve){return R=+R,z=z>>>0,Ve||We(ae,R,z,4),i.write(ae,R,z,Se,23,4),z+4}u.prototype.writeFloatLE=function(R,z,Se){return He(this,R,z,!0,Se)},u.prototype.writeFloatBE=function(R,z,Se){return He(this,R,z,!1,Se)};function rt(ae,R,z,Se,Ve){return R=+R,z=z>>>0,Ve||We(ae,R,z,8),i.write(ae,R,z,Se,52,8),z+8}u.prototype.writeDoubleLE=function(R,z,Se){return rt(this,R,z,!0,Se)},u.prototype.writeDoubleBE=function(R,z,Se){return rt(this,R,z,!1,Se)},u.prototype.copy=function(R,z,Se,Ve){if(!u.isBuffer(R))throw new TypeError("argument should be a Buffer");if(Se||(Se=0),!Ve&&Ve!==0&&(Ve=this.length),z>=R.length&&(z=R.length),z||(z=0),Ve>0&&Ve<Se&&(Ve=Se),Ve===Se||R.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(Se<0||Se>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),R.length-z<Ve-Se&&(Ve=R.length-z+Se);const nt=Ve-Se;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(z,Se,Ve):Uint8Array.prototype.set.call(R,this.subarray(Se,Ve),z),nt},u.prototype.fill=function(R,z,Se,Ve){if(typeof R=="string"){if(typeof z=="string"?(Ve=z,z=0,Se=this.length):typeof Se=="string"&&(Ve=Se,Se=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!u.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(R.length===1){const ot=R.charCodeAt(0);(Ve==="utf8"&&ot<128||Ve==="latin1")&&(R=ot)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(z<0||this.length<z||this.length<Se)throw new RangeError("Out of range index");if(Se<=z)return this;z=z>>>0,Se=Se===void 0?this.length:Se>>>0,R||(R=0);let nt;if(typeof R=="number")for(nt=z;nt<Se;++nt)this[nt]=R;else{const ot=u.isBuffer(R)?R:u.from(R,Ve),lt=ot.length;if(lt===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(nt=0;nt<Se-z;++nt)this[nt+z]=ot[nt%lt]}return this};const ht={};function wt(ae,R,z){ht[ae]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}wt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),wt("ERR_INVALID_ARG_TYPE",function(ae,R){return`The "${ae}" argument must be of type number. Received type ${typeof R}`},TypeError),wt("ERR_OUT_OF_RANGE",function(ae,R,z){let Se=`The value of "${ae}" is out of range.`,Ve=z;return Number.isInteger(z)&&Math.abs(z)>2**32?Ve=Mt(String(z)):typeof z=="bigint"&&(Ve=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(Ve=Mt(Ve)),Ve+="n"),Se+=` It must be ${R}. Received ${Ve}`,Se},RangeError);function Mt(ae){let R="",z=ae.length;const Se=ae[0]==="-"?1:0;for(;z>=Se+4;z-=3)R=`_${ae.slice(z-3,z)}${R}`;return`${ae.slice(0,z)}${R}`}function gt(ae,R,z){$t(R,"offset"),(ae[R]===void 0||ae[R+z]===void 0)&&Ht(R,ae.length-(z+1))}function Et(ae,R,z,Se,Ve,nt){if(ae>z||ae<R){const ot=typeof R=="bigint"?"n":"";let lt;throw nt>3?R===0||R===BigInt(0)?lt=`>= 0${ot} and < 2${ot} ** ${(nt+1)*8}${ot}`:lt=`>= -(2${ot} ** ${(nt+1)*8-1}${ot}) and < 2 ** ${(nt+1)*8-1}${ot}`:lt=`>= ${R}${ot} and <= ${z}${ot}`,new ht.ERR_OUT_OF_RANGE("value",lt,ae)}gt(Se,Ve,nt)}function $t(ae,R){if(typeof ae!="number")throw new ht.ERR_INVALID_ARG_TYPE(R,"number",ae)}function Ht(ae,R,z){throw Math.floor(ae)!==ae?($t(ae,z),new ht.ERR_OUT_OF_RANGE(z||"offset","an integer",ae)):R<0?new ht.ERR_BUFFER_OUT_OF_BOUNDS:new ht.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${R}`,ae)}const qt=/[^+/0-9A-Za-z-_]/g;function bn(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(qt,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function et(ae,R){R=R||1/0;let z;const Se=ae.length;let Ve=null;const nt=[];for(let ot=0;ot<Se;++ot){if(z=ae.charCodeAt(ot),z>55295&&z<57344){if(!Ve){if(z>56319){(R-=3)>-1&&nt.push(239,191,189);continue}else if(ot+1===Se){(R-=3)>-1&&nt.push(239,191,189);continue}Ve=z;continue}if(z<56320){(R-=3)>-1&&nt.push(239,191,189),Ve=z;continue}z=(Ve-55296<<10|z-56320)+65536}else Ve&&(R-=3)>-1&&nt.push(239,191,189);if(Ve=null,z<128){if((R-=1)<0)break;nt.push(z)}else if(z<2048){if((R-=2)<0)break;nt.push(z>>6|192,z&63|128)}else if(z<65536){if((R-=3)<0)break;nt.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((R-=4)<0)break;nt.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return nt}function hn(ae){const R=[];for(let z=0;z<ae.length;++z)R.push(ae.charCodeAt(z)&255);return R}function xn(ae,R){let z,Se,Ve;const nt=[];for(let ot=0;ot<ae.length&&!((R-=2)<0);++ot)z=ae.charCodeAt(ot),Se=z>>8,Ve=z%256,nt.push(Ve),nt.push(Se);return nt}function we(ae){return t.toByteArray(bn(ae))}function N(ae,R,z,Se){let Ve;for(Ve=0;Ve<Se&&!(Ve+z>=R.length||Ve>=ae.length);++Ve)R[Ve+z]=ae[Ve];return Ve}function D(ae,R){return ae instanceof R||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===R.name}function xe(ae){return ae!==ae}const Ze=function(){const ae="0123456789abcdef",R=new Array(256);for(let z=0;z<16;++z){const Se=z*16;for(let Ve=0;Ve<16;++Ve)R[Se+Ve]=ae[z]+ae[Ve]}return R}();function Qe(ae){return typeof BigInt>"u"?ct:ae}function ct(){throw new Error("BigInt not supported")}})(wA);window.Buffer=wA.Buffer;B3.render(yt.jsx(Z_.StrictMode,{children:yt.jsx(ej,{})}),document.getElementById("root"));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

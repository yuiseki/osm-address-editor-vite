function jM(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const p=Object.getOwnPropertyDescriptor(a,c);p&&Object.defineProperty(e,c,p.get?p:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(c){if(c.ep)return;c.ep=!0;const p=i(c);fetch(c.href,p)}})();var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var _E={exports:{}},$g={},xE={exports:{}},On={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf=Symbol.for("react.element"),RM=Symbol.for("react.portal"),OM=Symbol.for("react.fragment"),LM=Symbol.for("react.strict_mode"),DM=Symbol.for("react.profiler"),BM=Symbol.for("react.provider"),NM=Symbol.for("react.context"),UM=Symbol.for("react.forward_ref"),$M=Symbol.for("react.suspense"),VM=Symbol.for("react.memo"),GM=Symbol.for("react.lazy"),Sb=Symbol.iterator;function ZM(e){return e===null||typeof e!="object"?null:(e=Sb&&e[Sb]||e["@@iterator"],typeof e=="function"?e:null)}var wE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bE=Object.assign,SE={};function Lh(e,t,i){this.props=e,this.context=t,this.refs=SE,this.updater=i||wE}Lh.prototype.isReactComponent={};Lh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function EE(){}EE.prototype=Lh.prototype;function n1(e,t,i){this.props=e,this.context=t,this.refs=SE,this.updater=i||wE}var r1=n1.prototype=new EE;r1.constructor=n1;bE(r1,Lh.prototype);r1.isPureReactComponent=!0;var Eb=Array.isArray,TE=Object.prototype.hasOwnProperty,i1={current:null},CE={key:!0,ref:!0,__self:!0,__source:!0};function PE(e,t,i){var a,c={},p=null,m=null;if(t!=null)for(a in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(p=""+t.key),t)TE.call(t,a)&&!CE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var S=Array(u),P=0;P<u;P++)S[P]=arguments[P+2];c.children=S}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Jf,type:e,key:p,ref:m,props:c,_owner:i1.current}}function WM(e,t){return{$$typeof:Jf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function o1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jf}function HM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Tb=/\/+/g;function u0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HM(""+e.key):t.toString(36)}function wm(e,t,i,a,c){var p=typeof e;(p==="undefined"||p==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(p){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Jf:case RM:m=!0}}if(m)return m=e,c=c(m),e=a===""?"."+u0(m,0):a,Eb(c)?(i="",e!=null&&(i=e.replace(Tb,"$&/")+"/"),wm(c,t,i,"",function(P){return P})):c!=null&&(o1(c)&&(c=WM(c,i+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(Tb,"$&/")+"/")+e)),t.push(c)),1;if(m=0,a=a===""?".":a+":",Eb(e))for(var u=0;u<e.length;u++){p=e[u];var S=a+u0(p,u);m+=wm(p,t,i,S,c)}else if(S=ZM(e),typeof S=="function")for(e=S.call(e),u=0;!(p=e.next()).done;)p=p.value,S=a+u0(p,u++),m+=wm(p,t,i,S,c);else if(p==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function Wp(e,t,i){if(e==null)return e;var a=[],c=0;return wm(e,a,"","",function(p){return t.call(i,p,c++)}),a}function XM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},bm={transition:null},KM={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:bm,ReactCurrentOwner:i1};On.Children={map:Wp,forEach:function(e,t,i){Wp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Wp(e,function(){t++}),t},toArray:function(e){return Wp(e,function(t){return t})||[]},only:function(e){if(!o1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};On.Component=Lh;On.Fragment=OM;On.Profiler=DM;On.PureComponent=n1;On.StrictMode=LM;On.Suspense=$M;On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KM;On.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=bE({},e.props),c=e.key,p=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(p=t.ref,m=i1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)TE.call(t,S)&&!CE.hasOwnProperty(S)&&(a[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)a.children=i;else if(1<S){u=Array(S);for(var P=0;P<S;P++)u[P]=arguments[P+2];a.children=u}return{$$typeof:Jf,type:e.type,key:c,ref:p,props:a,_owner:m}};On.createContext=function(e){return e={$$typeof:NM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:BM,_context:e},e.Consumer=e};On.createElement=PE;On.createFactory=function(e){var t=PE.bind(null,e);return t.type=e,t};On.createRef=function(){return{current:null}};On.forwardRef=function(e){return{$$typeof:UM,render:e}};On.isValidElement=o1;On.lazy=function(e){return{$$typeof:GM,_payload:{_status:-1,_result:e},_init:XM}};On.memo=function(e,t){return{$$typeof:VM,type:e,compare:t===void 0?null:t}};On.startTransition=function(e){var t=bm.transition;bm.transition={};try{e()}finally{bm.transition=t}};On.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};On.useCallback=function(e,t){return to.current.useCallback(e,t)};On.useContext=function(e){return to.current.useContext(e)};On.useDebugValue=function(){};On.useDeferredValue=function(e){return to.current.useDeferredValue(e)};On.useEffect=function(e,t){return to.current.useEffect(e,t)};On.useId=function(){return to.current.useId()};On.useImperativeHandle=function(e,t,i){return to.current.useImperativeHandle(e,t,i)};On.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};On.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};On.useMemo=function(e,t){return to.current.useMemo(e,t)};On.useReducer=function(e,t,i){return to.current.useReducer(e,t,i)};On.useRef=function(e){return to.current.useRef(e)};On.useState=function(e){return to.current.useState(e)};On.useSyncExternalStore=function(e,t,i){return to.current.useSyncExternalStore(e,t,i)};On.useTransition=function(){return to.current.useTransition()};On.version="18.2.0";xE.exports=On;var gt=xE.exports;const s1=qf(gt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM=gt,JM=Symbol.for("react.element"),YM=Symbol.for("react.fragment"),QM=Object.prototype.hasOwnProperty,ek=qM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tk={key:!0,ref:!0,__self:!0,__source:!0};function IE(e,t,i){var a,c={},p=null,m=null;i!==void 0&&(p=""+i),t.key!==void 0&&(p=""+t.key),t.ref!==void 0&&(m=t.ref);for(a in t)QM.call(t,a)&&!tk.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:JM,type:e,key:p,ref:m,props:c,_owner:ek.current}}$g.Fragment=YM;$g.jsx=IE;$g.jsxs=IE;_E.exports=$g;var mt=_E.exports,AE={exports:{}},Vo={},ME={exports:{}},kE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,fe){var Se=re.length;re.push(fe);e:for(;0<Se;){var Ce=Se-1>>>1,Ue=re[Ce];if(0<c(Ue,fe))re[Ce]=fe,re[Se]=Ue,Se=Ce;else break e}}function i(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var fe=re[0],Se=re.pop();if(Se!==fe){re[0]=Se;e:for(var Ce=0,Ue=re.length,Ae=Ue>>>1;Ce<Ae;){var Fe=2*(Ce+1)-1,Ze=re[Fe],We=Fe+1,it=re[We];if(0>c(Ze,Se))We<Ue&&0>c(it,Ze)?(re[Ce]=it,re[We]=Se,Ce=We):(re[Ce]=Ze,re[Fe]=Se,Ce=Fe);else if(We<Ue&&0>c(it,Se))re[Ce]=it,re[We]=Se,Ce=We;else break e}}return fe}function c(re,fe){var Se=re.sortIndex-fe.sortIndex;return Se!==0?Se:re.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;e.unstable_now=function(){return p.now()}}else{var m=Date,u=m.now();e.unstable_now=function(){return m.now()-u}}var S=[],P=[],M=1,b=null,C=3,O=!1,$=!1,j=!1,he=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(re){for(var fe=i(P);fe!==null;){if(fe.callback===null)a(P);else if(fe.startTime<=re)a(P),fe.sortIndex=fe.expirationTime,t(S,fe);else break;fe=i(P)}}function ae(re){if(j=!1,G(re),!$)if(i(S)!==null)$=!0,ce(K);else{var fe=i(P);fe!==null&&ee(ae,fe.startTime-re)}}function K(re,fe){$=!1,j&&(j=!1,q(L),L=-1),O=!0;var Se=C;try{for(G(fe),b=i(S);b!==null&&(!(b.expirationTime>fe)||re&&!H());){var Ce=b.callback;if(typeof Ce=="function"){b.callback=null,C=b.priorityLevel;var Ue=Ce(b.expirationTime<=fe);fe=e.unstable_now(),typeof Ue=="function"?b.callback=Ue:b===i(S)&&a(S),G(fe)}else a(S);b=i(S)}if(b!==null)var Ae=!0;else{var Fe=i(P);Fe!==null&&ee(ae,Fe.startTime-fe),Ae=!1}return Ae}finally{b=null,C=Se,O=!1}}var Z=!1,T=null,L=-1,B=5,te=-1;function H(){return!(e.unstable_now()-te<B)}function ve(){if(T!==null){var re=e.unstable_now();te=re;var fe=!0;try{fe=T(!0,re)}finally{fe?_e():(Z=!1,T=null)}}else Z=!1}var _e;if(typeof X=="function")_e=function(){X(ve)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=ve,_e=function(){oe.postMessage(null)}}else _e=function(){he(ve,0)};function ce(re){T=re,Z||(Z=!0,_e())}function ee(re,fe){L=he(function(){re(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){$||O||($=!0,ce(K))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(re){switch(C){case 1:case 2:case 3:var fe=3;break;default:fe=C}var Se=C;C=fe;try{return re()}finally{C=Se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,fe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Se=C;C=re;try{return fe()}finally{C=Se}},e.unstable_scheduleCallback=function(re,fe,Se){var Ce=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ce+Se:Ce):Se=Ce,re){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=Se+Ue,re={id:M++,callback:fe,priorityLevel:re,startTime:Se,expirationTime:Ue,sortIndex:-1},Se>Ce?(re.sortIndex=Se,t(P,re),i(S)===null&&re===i(P)&&(j?(q(L),L=-1):j=!0,ee(ae,Se-Ce))):(re.sortIndex=Ue,t(S,re),$||O||($=!0,ce(K))),re},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(re){var fe=C;return function(){var Se=C;C=fe;try{return re.apply(this,arguments)}finally{C=Se}}}})(kE);ME.exports=kE;var nk=ME.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE=gt,$o=nk;function Pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FE=new Set,Cf={};function rc(e,t){Sh(e,t),Sh(e+"Capture",t)}function Sh(e,t){for(Cf[e]=t,e=0;e<t.length;e++)FE.add(t[e])}var Ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mv=Object.prototype.hasOwnProperty,rk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cb={},Pb={};function ik(e){return mv.call(Pb,e)?!0:mv.call(Cb,e)?!1:rk.test(e)?Pb[e]=!0:(Cb[e]=!0,!1)}function ok(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sk(e,t,i,a){if(t===null||typeof t>"u"||ok(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,i,a,c,p,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=p,this.removeEmptyString=m}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pi[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pi[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pi[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pi[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pi[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pi[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pi[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pi[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pi[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var a1=/[\-:]([a-z])/g;function l1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(a1,l1);Pi[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(a1,l1);Pi[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(a1,l1);Pi[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pi[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pi[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function u1(e,t,i,a){var c=Pi.hasOwnProperty(t)?Pi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sk(t,i,c,a)&&(i=null),a||c===null?ik(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var el=zE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hp=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Qc=Symbol.for("react.fragment"),c1=Symbol.for("react.strict_mode"),gv=Symbol.for("react.profiler"),jE=Symbol.for("react.provider"),RE=Symbol.for("react.context"),h1=Symbol.for("react.forward_ref"),yv=Symbol.for("react.suspense"),vv=Symbol.for("react.suspense_list"),d1=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),OE=Symbol.for("react.offscreen"),Ib=Symbol.iterator;function Ud(e){return e===null||typeof e!="object"?null:(e=Ib&&e[Ib]||e["@@iterator"],typeof e=="function"?e:null)}var kr=Object.assign,c0;function qd(e){if(c0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);c0=t&&t[1]||""}return`
`+c0+e}var h0=!1;function d0(e,t){if(!e||h0)return"";h0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(P){var a=P}Reflect.construct(e,[],t)}else{try{t.call()}catch(P){a=P}e.call(t.prototype)}else{try{throw Error()}catch(P){a=P}e()}}catch(P){if(P&&a&&typeof P.stack=="string"){for(var c=P.stack.split(`
`),p=a.stack.split(`
`),m=c.length-1,u=p.length-1;1<=m&&0<=u&&c[m]!==p[u];)u--;for(;1<=m&&0<=u;m--,u--)if(c[m]!==p[u]){if(m!==1||u!==1)do if(m--,u--,0>u||c[m]!==p[u]){var S=`
`+c[m].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=m&&0<=u);break}}}finally{h0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?qd(e):""}function ak(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=d0(e.type,!1),e;case 11:return e=d0(e.type.render,!1),e;case 1:return e=d0(e.type,!0),e;default:return""}}function _v(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qc:return"Fragment";case Yc:return"Portal";case gv:return"Profiler";case c1:return"StrictMode";case yv:return"Suspense";case vv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case RE:return(e.displayName||"Context")+".Consumer";case jE:return(e._context.displayName||"Context")+".Provider";case h1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case d1:return t=e.displayName||null,t!==null?t:_v(e.type)||"Memo";case Ll:t=e._payload,e=e._init;try{return _v(e(t))}catch{}}return null}function lk(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _v(t);case 8:return t===c1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function tu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function LE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uk(e){var t=LE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){a=""+m,p.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xp(e){e._valueTracker||(e._valueTracker=uk(e))}function DE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=LE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function $m(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xv(e,t){var i=t.checked;return kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Ab(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=tu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function BE(e,t){t=t.checked,t!=null&&u1(e,"checked",t,!1)}function wv(e,t){BE(e,t);var i=tu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bv(e,t.type,i):t.hasOwnProperty("defaultValue")&&bv(e,t.type,tu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Mb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function bv(e,t,i){(t!=="number"||$m(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Jd=Array.isArray;function ph(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+tu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Sv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pt(91));return kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Pt(92));if(Jd(i)){if(1<i.length)throw Error(Pt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:tu(i)}}function NE(e,t){var i=tu(t.value),a=tu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function zb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function UE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ev(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?UE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kp,$E=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kp=Kp||document.createElement("div"),Kp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var cf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ck=["Webkit","ms","Moz","O"];Object.keys(cf).forEach(function(e){ck.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cf[t]=cf[e]})});function VE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||cf.hasOwnProperty(e)&&cf[e]?(""+t).trim():t+"px"}function GE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=VE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var hk=kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tv(e,t){if(t){if(hk[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pt(62))}}function Cv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pv=null;function f1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Iv=null,mh=null,gh=null;function Fb(e){if(e=ep(e)){if(typeof Iv!="function")throw Error(Pt(280));var t=e.stateNode;t&&(t=Hg(t),Iv(e.stateNode,e.type,t))}}function ZE(e){mh?gh?gh.push(e):gh=[e]:mh=e}function WE(){if(mh){var e=mh,t=gh;if(gh=mh=null,Fb(e),t)for(e=0;e<t.length;e++)Fb(t[e])}}function HE(e,t){return e(t)}function XE(){}var f0=!1;function KE(e,t,i){if(f0)return e(t,i);f0=!0;try{return HE(e,t,i)}finally{f0=!1,(mh!==null||gh!==null)&&(XE(),WE())}}function If(e,t){var i=e.stateNode;if(i===null)return null;var a=Hg(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Pt(231,t,typeof i));return i}var Av=!1;if(Ha)try{var $d={};Object.defineProperty($d,"passive",{get:function(){Av=!0}}),window.addEventListener("test",$d,$d),window.removeEventListener("test",$d,$d)}catch{Av=!1}function dk(e,t,i,a,c,p,m,u,S){var P=Array.prototype.slice.call(arguments,3);try{t.apply(i,P)}catch(M){this.onError(M)}}var hf=!1,Vm=null,Gm=!1,Mv=null,fk={onError:function(e){hf=!0,Vm=e}};function pk(e,t,i,a,c,p,m,u,S){hf=!1,Vm=null,dk.apply(fk,arguments)}function mk(e,t,i,a,c,p,m,u,S){if(pk.apply(this,arguments),hf){if(hf){var P=Vm;hf=!1,Vm=null}else throw Error(Pt(198));Gm||(Gm=!0,Mv=P)}}function ic(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function qE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jb(e){if(ic(e)!==e)throw Error(Pt(188))}function gk(e){var t=e.alternate;if(!t){if(t=ic(e),t===null)throw Error(Pt(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return jb(c),e;if(p===a)return jb(c),t;p=p.sibling}throw Error(Pt(188))}if(i.return!==a.return)i=c,a=p;else{for(var m=!1,u=c.child;u;){if(u===i){m=!0,i=c,a=p;break}if(u===a){m=!0,a=c,i=p;break}u=u.sibling}if(!m){for(u=p.child;u;){if(u===i){m=!0,i=p,a=c;break}if(u===a){m=!0,a=p,i=c;break}u=u.sibling}if(!m)throw Error(Pt(189))}}if(i.alternate!==a)throw Error(Pt(190))}if(i.tag!==3)throw Error(Pt(188));return i.stateNode.current===i?e:t}function JE(e){return e=gk(e),e!==null?YE(e):null}function YE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=YE(e);if(t!==null)return t;e=e.sibling}return null}var QE=$o.unstable_scheduleCallback,Rb=$o.unstable_cancelCallback,yk=$o.unstable_shouldYield,vk=$o.unstable_requestPaint,Nr=$o.unstable_now,_k=$o.unstable_getCurrentPriorityLevel,p1=$o.unstable_ImmediatePriority,eT=$o.unstable_UserBlockingPriority,Zm=$o.unstable_NormalPriority,xk=$o.unstable_LowPriority,tT=$o.unstable_IdlePriority,Vg=null,fa=null;function wk(e){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(Vg,e,void 0,(e.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:Ek,bk=Math.log,Sk=Math.LN2;function Ek(e){return e>>>=0,e===0?32:31-(bk(e)/Sk|0)|0}var qp=64,Jp=4194304;function Yd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,p=e.pingedLanes,m=i&268435455;if(m!==0){var u=m&~c;u!==0?a=Yd(u):(p&=m,p!==0&&(a=Yd(p)))}else m=i&~c,m!==0?a=Yd(m):p!==0&&(a=Yd(p));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,p=t&-t,c>=p||c===16&&(p&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Rs(t),c=1<<i,a|=e[i],t&=~c;return a}function Tk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ck(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,p=e.pendingLanes;0<p;){var m=31-Rs(p),u=1<<m,S=c[m];S===-1?(!(u&i)||u&a)&&(c[m]=Tk(u,t)):S<=t&&(e.expiredLanes|=u),p&=~u}}function kv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nT(){var e=qp;return qp<<=1,!(qp&4194240)&&(qp=64),e}function p0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Yf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rs(t),e[t]=i}function Pk(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Rs(i),p=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~p}}function m1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Rs(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var tr=0;function rT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var iT,g1,oT,sT,aT,zv=!1,Yp=[],Wl=null,Hl=null,Xl=null,Af=new Map,Mf=new Map,Ul=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ob(e,t){switch(e){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":Af.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(t.pointerId)}}function Vd(e,t,i,a,c,p){return e===null||e.nativeEvent!==p?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:p,targetContainers:[c]},t!==null&&(t=ep(t),t!==null&&g1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Ak(e,t,i,a,c){switch(t){case"focusin":return Wl=Vd(Wl,e,t,i,a,c),!0;case"dragenter":return Hl=Vd(Hl,e,t,i,a,c),!0;case"mouseover":return Xl=Vd(Xl,e,t,i,a,c),!0;case"pointerover":var p=c.pointerId;return Af.set(p,Vd(Af.get(p)||null,e,t,i,a,c)),!0;case"gotpointercapture":return p=c.pointerId,Mf.set(p,Vd(Mf.get(p)||null,e,t,i,a,c)),!0}return!1}function lT(e){var t=Uu(e.target);if(t!==null){var i=ic(t);if(i!==null){if(t=i.tag,t===13){if(t=qE(i),t!==null){e.blockedOn=t,aT(e.priority,function(){oT(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Fv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);Pv=a,i.target.dispatchEvent(a),Pv=null}else return t=ep(i),t!==null&&g1(t),e.blockedOn=i,!1;t.shift()}return!0}function Lb(e,t,i){Sm(e)&&i.delete(t)}function Mk(){zv=!1,Wl!==null&&Sm(Wl)&&(Wl=null),Hl!==null&&Sm(Hl)&&(Hl=null),Xl!==null&&Sm(Xl)&&(Xl=null),Af.forEach(Lb),Mf.forEach(Lb)}function Gd(e,t){e.blockedOn===t&&(e.blockedOn=null,zv||(zv=!0,$o.unstable_scheduleCallback($o.unstable_NormalPriority,Mk)))}function kf(e){function t(c){return Gd(c,e)}if(0<Yp.length){Gd(Yp[0],e);for(var i=1;i<Yp.length;i++){var a=Yp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Wl!==null&&Gd(Wl,e),Hl!==null&&Gd(Hl,e),Xl!==null&&Gd(Xl,e),Af.forEach(t),Mf.forEach(t),i=0;i<Ul.length;i++)a=Ul[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ul.length&&(i=Ul[0],i.blockedOn===null);)lT(i),i.blockedOn===null&&Ul.shift()}var yh=el.ReactCurrentBatchConfig,Hm=!0;function kk(e,t,i,a){var c=tr,p=yh.transition;yh.transition=null;try{tr=1,y1(e,t,i,a)}finally{tr=c,yh.transition=p}}function zk(e,t,i,a){var c=tr,p=yh.transition;yh.transition=null;try{tr=4,y1(e,t,i,a)}finally{tr=c,yh.transition=p}}function y1(e,t,i,a){if(Hm){var c=Fv(e,t,i,a);if(c===null)E0(e,t,a,Xm,i),Ob(e,a);else if(Ak(c,e,t,i,a))a.stopPropagation();else if(Ob(e,a),t&4&&-1<Ik.indexOf(e)){for(;c!==null;){var p=ep(c);if(p!==null&&iT(p),p=Fv(e,t,i,a),p===null&&E0(e,t,a,Xm,i),p===c)break;c=p}c!==null&&a.stopPropagation()}else E0(e,t,a,null,i)}}var Xm=null;function Fv(e,t,i,a){if(Xm=null,e=f1(a),e=Uu(e),e!==null)if(t=ic(e),t===null)e=null;else if(i=t.tag,i===13){if(e=qE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xm=e,null}function uT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_k()){case p1:return 1;case eT:return 4;case Zm:case xk:return 16;case tT:return 536870912;default:return 16}default:return 16}}var Vl=null,v1=null,Em=null;function cT(){if(Em)return Em;var e,t=v1,i=t.length,a,c="value"in Vl?Vl.value:Vl.textContent,p=c.length;for(e=0;e<i&&t[e]===c[e];e++);var m=i-e;for(a=1;a<=m&&t[i-a]===c[p-a];a++);return Em=c.slice(e,1<a?1-a:void 0)}function Tm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qp(){return!0}function Db(){return!1}function Go(e){function t(i,a,c,p,m){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=p,this.target=m,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(p):p[u]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Qp:Db,this.isPropagationStopped=Db,this}return kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Qp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Qp)},persist:function(){},isPersistent:Qp}),t}var Dh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_1=Go(Dh),Qf=kr({},Dh,{view:0,detail:0}),Fk=Go(Qf),m0,g0,Zd,Gg=kr({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zd&&(Zd&&e.type==="mousemove"?(m0=e.screenX-Zd.screenX,g0=e.screenY-Zd.screenY):g0=m0=0,Zd=e),m0)},movementY:function(e){return"movementY"in e?e.movementY:g0}}),Bb=Go(Gg),jk=kr({},Gg,{dataTransfer:0}),Rk=Go(jk),Ok=kr({},Qf,{relatedTarget:0}),y0=Go(Ok),Lk=kr({},Dh,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=Go(Lk),Bk=kr({},Dh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nk=Go(Bk),Uk=kr({},Dh,{data:0}),Nb=Go(Uk),$k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gk[e])?!!t[e]:!1}function x1(){return Zk}var Wk=kr({},Qf,{key:function(e){if(e.key){var t=$k[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Tm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x1,charCode:function(e){return e.type==="keypress"?Tm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Tm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hk=Go(Wk),Xk=kr({},Gg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ub=Go(Xk),Kk=kr({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x1}),qk=Go(Kk),Jk=kr({},Dh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yk=Go(Jk),Qk=kr({},Gg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),e3=Go(Qk),t3=[9,13,27,32],w1=Ha&&"CompositionEvent"in window,df=null;Ha&&"documentMode"in document&&(df=document.documentMode);var n3=Ha&&"TextEvent"in window&&!df,hT=Ha&&(!w1||df&&8<df&&11>=df),$b=" ",Vb=!1;function dT(e,t){switch(e){case"keyup":return t3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eh=!1;function r3(e,t){switch(e){case"compositionend":return fT(t);case"keypress":return t.which!==32?null:(Vb=!0,$b);case"textInput":return e=t.data,e===$b&&Vb?null:e;default:return null}}function i3(e,t){if(eh)return e==="compositionend"||!w1&&dT(e,t)?(e=cT(),Em=v1=Vl=null,eh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hT&&t.locale!=="ko"?null:t.data;default:return null}}var o3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!o3[e.type]:t==="textarea"}function pT(e,t,i,a){ZE(a),t=Km(t,"onChange"),0<t.length&&(i=new _1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var ff=null,zf=null;function s3(e){TT(e,0)}function Zg(e){var t=rh(e);if(DE(t))return e}function a3(e,t){if(e==="change")return t}var mT=!1;if(Ha){var v0;if(Ha){var _0="oninput"in document;if(!_0){var Zb=document.createElement("div");Zb.setAttribute("oninput","return;"),_0=typeof Zb.oninput=="function"}v0=_0}else v0=!1;mT=v0&&(!document.documentMode||9<document.documentMode)}function Wb(){ff&&(ff.detachEvent("onpropertychange",gT),zf=ff=null)}function gT(e){if(e.propertyName==="value"&&Zg(zf)){var t=[];pT(t,zf,e,f1(e)),KE(s3,t)}}function l3(e,t,i){e==="focusin"?(Wb(),ff=t,zf=i,ff.attachEvent("onpropertychange",gT)):e==="focusout"&&Wb()}function u3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Zg(zf)}function c3(e,t){if(e==="click")return Zg(t)}function h3(e,t){if(e==="input"||e==="change")return Zg(t)}function d3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ls=typeof Object.is=="function"?Object.is:d3;function Ff(e,t){if(Ls(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!mv.call(t,c)||!Ls(e[c],t[c]))return!1}return!0}function Hb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xb(e,t){var i=Hb(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Hb(i)}}function yT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vT(){for(var e=window,t=$m();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=$m(e.document)}return t}function b1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function f3(e){var t=vT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&yT(i.ownerDocument.documentElement,i)){if(a!==null&&b1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,p=Math.min(a.start,c);a=a.end===void 0?p:Math.min(a.end,c),!e.extend&&p>a&&(c=a,a=p,p=c),c=Xb(i,p);var m=Xb(i,a);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),p>a?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var p3=Ha&&"documentMode"in document&&11>=document.documentMode,th=null,jv=null,pf=null,Rv=!1;function Kb(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Rv||th==null||th!==$m(a)||(a=th,"selectionStart"in a&&b1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),pf&&Ff(pf,a)||(pf=a,a=Km(jv,"onSelect"),0<a.length&&(t=new _1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=th)))}function em(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var nh={animationend:em("Animation","AnimationEnd"),animationiteration:em("Animation","AnimationIteration"),animationstart:em("Animation","AnimationStart"),transitionend:em("Transition","TransitionEnd")},x0={},_T={};Ha&&(_T=document.createElement("div").style,"AnimationEvent"in window||(delete nh.animationend.animation,delete nh.animationiteration.animation,delete nh.animationstart.animation),"TransitionEvent"in window||delete nh.transitionend.transition);function Wg(e){if(x0[e])return x0[e];if(!nh[e])return e;var t=nh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in _T)return x0[e]=t[i];return e}var xT=Wg("animationend"),wT=Wg("animationiteration"),bT=Wg("animationstart"),ST=Wg("transitionend"),ET=new Map,qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function au(e,t){ET.set(e,t),rc(t,[e])}for(var w0=0;w0<qb.length;w0++){var b0=qb[w0],m3=b0.toLowerCase(),g3=b0[0].toUpperCase()+b0.slice(1);au(m3,"on"+g3)}au(xT,"onAnimationEnd");au(wT,"onAnimationIteration");au(bT,"onAnimationStart");au("dblclick","onDoubleClick");au("focusin","onFocus");au("focusout","onBlur");au(ST,"onTransitionEnd");Sh("onMouseEnter",["mouseout","mouseover"]);Sh("onMouseLeave",["mouseout","mouseover"]);Sh("onPointerEnter",["pointerout","pointerover"]);Sh("onPointerLeave",["pointerout","pointerover"]);rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qd));function Jb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,mk(a,t,void 0,e),e.currentTarget=null}function TT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var p=void 0;if(t)for(var m=a.length-1;0<=m;m--){var u=a[m],S=u.instance,P=u.currentTarget;if(u=u.listener,S!==p&&c.isPropagationStopped())break e;Jb(c,u,P),p=S}else for(m=0;m<a.length;m++){if(u=a[m],S=u.instance,P=u.currentTarget,u=u.listener,S!==p&&c.isPropagationStopped())break e;Jb(c,u,P),p=S}}}if(Gm)throw e=Mv,Gm=!1,Mv=null,e}function mr(e,t){var i=t[Nv];i===void 0&&(i=t[Nv]=new Set);var a=e+"__bubble";i.has(a)||(CT(t,e,2,!1),i.add(a))}function S0(e,t,i){var a=0;t&&(a|=4),CT(i,e,a,t)}var tm="_reactListening"+Math.random().toString(36).slice(2);function jf(e){if(!e[tm]){e[tm]=!0,FE.forEach(function(i){i!=="selectionchange"&&(y3.has(i)||S0(i,!1,e),S0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tm]||(t[tm]=!0,S0("selectionchange",!1,t))}}function CT(e,t,i,a){switch(uT(t)){case 1:var c=kk;break;case 4:c=zk;break;default:c=y1}i=c.bind(null,t,i,e),c=void 0,!Av||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function E0(e,t,i,a,c){var p=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var m=a.tag;if(m===3||m===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(m===4)for(m=a.return;m!==null;){var S=m.tag;if((S===3||S===4)&&(S=m.stateNode.containerInfo,S===c||S.nodeType===8&&S.parentNode===c))return;m=m.return}for(;u!==null;){if(m=Uu(u),m===null)return;if(S=m.tag,S===5||S===6){a=p=m;continue e}u=u.parentNode}}a=a.return}KE(function(){var P=p,M=f1(i),b=[];e:{var C=ET.get(e);if(C!==void 0){var O=_1,$=e;switch(e){case"keypress":if(Tm(i)===0)break e;case"keydown":case"keyup":O=Hk;break;case"focusin":$="focus",O=y0;break;case"focusout":$="blur",O=y0;break;case"beforeblur":case"afterblur":O=y0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Bb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=Rk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=qk;break;case xT:case wT:case bT:O=Dk;break;case ST:O=Yk;break;case"scroll":O=Fk;break;case"wheel":O=e3;break;case"copy":case"cut":case"paste":O=Nk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Ub}var j=(t&4)!==0,he=!j&&e==="scroll",q=j?C!==null?C+"Capture":null:C;j=[];for(var X=P,G;X!==null;){G=X;var ae=G.stateNode;if(G.tag===5&&ae!==null&&(G=ae,q!==null&&(ae=If(X,q),ae!=null&&j.push(Rf(X,ae,G)))),he)break;X=X.return}0<j.length&&(C=new O(C,$,null,i,M),b.push({event:C,listeners:j}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",C&&i!==Pv&&($=i.relatedTarget||i.fromElement)&&(Uu($)||$[Xa]))break e;if((O||C)&&(C=M.window===M?M:(C=M.ownerDocument)?C.defaultView||C.parentWindow:window,O?($=i.relatedTarget||i.toElement,O=P,$=$?Uu($):null,$!==null&&(he=ic($),$!==he||$.tag!==5&&$.tag!==6)&&($=null)):(O=null,$=P),O!==$)){if(j=Bb,ae="onMouseLeave",q="onMouseEnter",X="mouse",(e==="pointerout"||e==="pointerover")&&(j=Ub,ae="onPointerLeave",q="onPointerEnter",X="pointer"),he=O==null?C:rh(O),G=$==null?C:rh($),C=new j(ae,X+"leave",O,i,M),C.target=he,C.relatedTarget=G,ae=null,Uu(M)===P&&(j=new j(q,X+"enter",$,i,M),j.target=G,j.relatedTarget=he,ae=j),he=ae,O&&$)t:{for(j=O,q=$,X=0,G=j;G;G=Gc(G))X++;for(G=0,ae=q;ae;ae=Gc(ae))G++;for(;0<X-G;)j=Gc(j),X--;for(;0<G-X;)q=Gc(q),G--;for(;X--;){if(j===q||q!==null&&j===q.alternate)break t;j=Gc(j),q=Gc(q)}j=null}else j=null;O!==null&&Yb(b,C,O,j,!1),$!==null&&he!==null&&Yb(b,he,$,j,!0)}}e:{if(C=P?rh(P):window,O=C.nodeName&&C.nodeName.toLowerCase(),O==="select"||O==="input"&&C.type==="file")var K=a3;else if(Gb(C))if(mT)K=h3;else{K=u3;var Z=l3}else(O=C.nodeName)&&O.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(K=c3);if(K&&(K=K(e,P))){pT(b,K,i,M);break e}Z&&Z(e,C,P),e==="focusout"&&(Z=C._wrapperState)&&Z.controlled&&C.type==="number"&&bv(C,"number",C.value)}switch(Z=P?rh(P):window,e){case"focusin":(Gb(Z)||Z.contentEditable==="true")&&(th=Z,jv=P,pf=null);break;case"focusout":pf=jv=th=null;break;case"mousedown":Rv=!0;break;case"contextmenu":case"mouseup":case"dragend":Rv=!1,Kb(b,i,M);break;case"selectionchange":if(p3)break;case"keydown":case"keyup":Kb(b,i,M)}var T;if(w1)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else eh?dT(e,i)&&(L="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(L="onCompositionStart");L&&(hT&&i.locale!=="ko"&&(eh||L!=="onCompositionStart"?L==="onCompositionEnd"&&eh&&(T=cT()):(Vl=M,v1="value"in Vl?Vl.value:Vl.textContent,eh=!0)),Z=Km(P,L),0<Z.length&&(L=new Nb(L,e,null,i,M),b.push({event:L,listeners:Z}),T?L.data=T:(T=fT(i),T!==null&&(L.data=T)))),(T=n3?r3(e,i):i3(e,i))&&(P=Km(P,"onBeforeInput"),0<P.length&&(M=new Nb("onBeforeInput","beforeinput",null,i,M),b.push({event:M,listeners:P}),M.data=T))}TT(b,t)})}function Rf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Km(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=If(e,i),p!=null&&a.unshift(Rf(e,p,c)),p=If(e,t),p!=null&&a.push(Rf(e,p,c))),e=e.return}return a}function Gc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yb(e,t,i,a,c){for(var p=t._reactName,m=[];i!==null&&i!==a;){var u=i,S=u.alternate,P=u.stateNode;if(S!==null&&S===a)break;u.tag===5&&P!==null&&(u=P,c?(S=If(i,p),S!=null&&m.unshift(Rf(i,S,u))):c||(S=If(i,p),S!=null&&m.push(Rf(i,S,u)))),i=i.return}m.length!==0&&e.push({event:t,listeners:m})}var v3=/\r\n?/g,_3=/\u0000|\uFFFD/g;function Qb(e){return(typeof e=="string"?e:""+e).replace(v3,`
`).replace(_3,"")}function nm(e,t,i){if(t=Qb(t),Qb(e)!==t&&i)throw Error(Pt(425))}function qm(){}var Ov=null,Lv=null;function Dv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bv=typeof setTimeout=="function"?setTimeout:void 0,x3=typeof clearTimeout=="function"?clearTimeout:void 0,e2=typeof Promise=="function"?Promise:void 0,w3=typeof queueMicrotask=="function"?queueMicrotask:typeof e2<"u"?function(e){return e2.resolve(null).then(e).catch(b3)}:Bv;function b3(e){setTimeout(function(){throw e})}function T0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),kf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);kf(t)}function Kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function t2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Bh=Math.random().toString(36).slice(2),aa="__reactFiber$"+Bh,Of="__reactProps$"+Bh,Xa="__reactContainer$"+Bh,Nv="__reactEvents$"+Bh,S3="__reactListeners$"+Bh,E3="__reactHandles$"+Bh;function Uu(e){var t=e[aa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xa]||i[aa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=t2(e);e!==null;){if(i=e[aa])return i;e=t2(e)}return t}e=i,i=e.parentNode}return null}function ep(e){return e=e[aa]||e[Xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pt(33))}function Hg(e){return e[Of]||null}var Uv=[],ih=-1;function lu(e){return{current:e}}function gr(e){0>ih||(e.current=Uv[ih],Uv[ih]=null,ih--)}function cr(e,t){ih++,Uv[ih]=e.current,e.current=t}var nu={},Vi=lu(nu),fo=lu(!1),Xu=nu;function Eh(e,t){var i=e.type.contextTypes;if(!i)return nu;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=t[p];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function po(e){return e=e.childContextTypes,e!=null}function Jm(){gr(fo),gr(Vi)}function n2(e,t,i){if(Vi.current!==nu)throw Error(Pt(168));cr(Vi,t),cr(fo,i)}function PT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Pt(108,lk(e)||"Unknown",c));return kr({},i,a)}function Ym(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nu,Xu=Vi.current,cr(Vi,e),cr(fo,fo.current),!0}function r2(e,t,i){var a=e.stateNode;if(!a)throw Error(Pt(169));i?(e=PT(e,t,Xu),a.__reactInternalMemoizedMergedChildContext=e,gr(fo),gr(Vi),cr(Vi,e)):gr(fo),cr(fo,i)}var Ua=null,Xg=!1,C0=!1;function IT(e){Ua===null?Ua=[e]:Ua.push(e)}function T3(e){Xg=!0,IT(e)}function uu(){if(!C0&&Ua!==null){C0=!0;var e=0,t=tr;try{var i=Ua;for(tr=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Ua=null,Xg=!1}catch(c){throw Ua!==null&&(Ua=Ua.slice(e+1)),QE(p1,uu),c}finally{tr=t,C0=!1}}return null}var oh=[],sh=0,Qm=null,eg=0,ss=[],as=0,Ku=null,Ga=1,Za="";function Lu(e,t){oh[sh++]=eg,oh[sh++]=Qm,Qm=e,eg=t}function AT(e,t,i){ss[as++]=Ga,ss[as++]=Za,ss[as++]=Ku,Ku=e;var a=Ga;e=Za;var c=32-Rs(a)-1;a&=~(1<<c),i+=1;var p=32-Rs(t)+c;if(30<p){var m=c-c%5;p=(a&(1<<m)-1).toString(32),a>>=m,c-=m,Ga=1<<32-Rs(t)+c|i<<c|a,Za=p+e}else Ga=1<<p|i<<c|a,Za=e}function S1(e){e.return!==null&&(Lu(e,1),AT(e,1,0))}function E1(e){for(;e===Qm;)Qm=oh[--sh],oh[sh]=null,eg=oh[--sh],oh[sh]=null;for(;e===Ku;)Ku=ss[--as],ss[as]=null,Za=ss[--as],ss[as]=null,Ga=ss[--as],ss[as]=null}var Bo=null,Do=null,br=!1,ks=null;function MT(e,t){var i=us(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function i2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Do=Kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Do=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Ku!==null?{id:Ga,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=us(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Bo=e,Do=null,!0):!1;default:return!1}}function $v(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vv(e){if(br){var t=Do;if(t){var i=t;if(!i2(e,t)){if($v(e))throw Error(Pt(418));t=Kl(i.nextSibling);var a=Bo;t&&i2(e,t)?MT(a,i):(e.flags=e.flags&-4097|2,br=!1,Bo=e)}}else{if($v(e))throw Error(Pt(418));e.flags=e.flags&-4097|2,br=!1,Bo=e}}}function o2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function rm(e){if(e!==Bo)return!1;if(!br)return o2(e),br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Dv(e.type,e.memoizedProps)),t&&(t=Do)){if($v(e))throw kT(),Error(Pt(418));for(;t;)MT(e,t),t=Kl(t.nextSibling)}if(o2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Do=Kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Do=null}}else Do=Bo?Kl(e.stateNode.nextSibling):null;return!0}function kT(){for(var e=Do;e;)e=Kl(e.nextSibling)}function Th(){Do=Bo=null,br=!1}function T1(e){ks===null?ks=[e]:ks.push(e)}var C3=el.ReactCurrentBatchConfig;function As(e,t){if(e&&e.defaultProps){t=kr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var tg=lu(null),ng=null,ah=null,C1=null;function P1(){C1=ah=ng=null}function I1(e){var t=tg.current;gr(tg),e._currentValue=t}function Gv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function vh(e,t){ng=e,C1=ah=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ho=!0),e.firstContext=null)}function ds(e){var t=e._currentValue;if(C1!==e)if(e={context:e,memoizedValue:t,next:null},ah===null){if(ng===null)throw Error(Pt(308));ah=e,ng.dependencies={lanes:0,firstContext:e}}else ah=ah.next=e;return t}var $u=null;function A1(e){$u===null?$u=[e]:$u.push(e)}function zT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,A1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ka(e,a)}function Ka(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Dl=!1;function M1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function FT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ql(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Vn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ka(e,i)}return c=a.interleaved,c===null?(t.next=t,A1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ka(e,i)}function Cm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,m1(e,i)}}function s2(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=m:p=p.next=m,i=i.next}while(i!==null);p===null?c=p=t:p=p.next=t}else c=p=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function rg(e,t,i,a){var c=e.updateQueue;Dl=!1;var p=c.firstBaseUpdate,m=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var S=u,P=S.next;S.next=null,m===null?p=P:m.next=P,m=S;var M=e.alternate;M!==null&&(M=M.updateQueue,u=M.lastBaseUpdate,u!==m&&(u===null?M.firstBaseUpdate=P:u.next=P,M.lastBaseUpdate=S))}if(p!==null){var b=c.baseState;m=0,M=P=S=null,u=p;do{var C=u.lane,O=u.eventTime;if((a&C)===C){M!==null&&(M=M.next={eventTime:O,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var $=e,j=u;switch(C=t,O=i,j.tag){case 1:if($=j.payload,typeof $=="function"){b=$.call(O,b,C);break e}b=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=j.payload,C=typeof $=="function"?$.call(O,b,C):$,C==null)break e;b=kr({},b,C);break e;case 2:Dl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,C=c.effects,C===null?c.effects=[u]:C.push(u))}else O={eventTime:O,lane:C,tag:u.tag,payload:u.payload,callback:u.callback,next:null},M===null?(P=M=O,S=b):M=M.next=O,m|=C;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;C=u,u=C.next,C.next=null,c.lastBaseUpdate=C,c.shared.pending=null}}while(!0);if(M===null&&(S=b),c.baseState=S,c.firstBaseUpdate=P,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else p===null&&(c.shared.lanes=0);Ju|=m,e.lanes=m,e.memoizedState=b}}function a2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Pt(191,c));c.call(a)}}}var jT=new zE.Component().refs;function Zv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:kr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Kg={isMounted:function(e){return(e=e._reactInternals)?ic(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Ji(),c=Yl(e),p=Wa(a,c);p.payload=t,i!=null&&(p.callback=i),t=ql(e,p,c),t!==null&&(Os(t,e,c,a),Cm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Ji(),c=Yl(e),p=Wa(a,c);p.tag=1,p.payload=t,i!=null&&(p.callback=i),t=ql(e,p,c),t!==null&&(Os(t,e,c,a),Cm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ji(),a=Yl(e),c=Wa(i,a);c.tag=2,t!=null&&(c.callback=t),t=ql(e,c,a),t!==null&&(Os(t,e,a,i),Cm(t,e,a))}};function l2(e,t,i,a,c,p,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,p,m):t.prototype&&t.prototype.isPureReactComponent?!Ff(i,a)||!Ff(c,p):!0}function RT(e,t,i){var a=!1,c=nu,p=t.contextType;return typeof p=="object"&&p!==null?p=ds(p):(c=po(t)?Xu:Vi.current,a=t.contextTypes,p=(a=a!=null)?Eh(e,c):nu),t=new t(i,p),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=p),t}function u2(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&Kg.enqueueReplaceState(t,t.state,null)}function Wv(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=jT,M1(e);var p=t.contextType;typeof p=="object"&&p!==null?c.context=ds(p):(p=po(t)?Xu:Vi.current,c.context=Eh(e,p)),c.state=e.memoizedState,p=t.getDerivedStateFromProps,typeof p=="function"&&(Zv(e,t,p,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Kg.enqueueReplaceState(c,c.state,null),rg(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Wd(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Pt(309));var a=i.stateNode}if(!a)throw Error(Pt(147,e));var c=a,p=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===p?t.ref:(t=function(m){var u=c.refs;u===jT&&(u=c.refs={}),m===null?delete u[p]:u[p]=m},t._stringRef=p,t)}if(typeof e!="string")throw Error(Pt(284));if(!i._owner)throw Error(Pt(290,e))}return e}function im(e,t){throw e=Object.prototype.toString.call(t),Error(Pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function c2(e){var t=e._init;return t(e._payload)}function OT(e){function t(q,X){if(e){var G=q.deletions;G===null?(q.deletions=[X],q.flags|=16):G.push(X)}}function i(q,X){if(!e)return null;for(;X!==null;)t(q,X),X=X.sibling;return null}function a(q,X){for(q=new Map;X!==null;)X.key!==null?q.set(X.key,X):q.set(X.index,X),X=X.sibling;return q}function c(q,X){return q=Ql(q,X),q.index=0,q.sibling=null,q}function p(q,X,G){return q.index=G,e?(G=q.alternate,G!==null?(G=G.index,G<X?(q.flags|=2,X):G):(q.flags|=2,X)):(q.flags|=1048576,X)}function m(q){return e&&q.alternate===null&&(q.flags|=2),q}function u(q,X,G,ae){return X===null||X.tag!==6?(X=F0(G,q.mode,ae),X.return=q,X):(X=c(X,G),X.return=q,X)}function S(q,X,G,ae){var K=G.type;return K===Qc?M(q,X,G.props.children,ae,G.key):X!==null&&(X.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ll&&c2(K)===X.type)?(ae=c(X,G.props),ae.ref=Wd(q,X,G),ae.return=q,ae):(ae=zm(G.type,G.key,G.props,null,q.mode,ae),ae.ref=Wd(q,X,G),ae.return=q,ae)}function P(q,X,G,ae){return X===null||X.tag!==4||X.stateNode.containerInfo!==G.containerInfo||X.stateNode.implementation!==G.implementation?(X=j0(G,q.mode,ae),X.return=q,X):(X=c(X,G.children||[]),X.return=q,X)}function M(q,X,G,ae,K){return X===null||X.tag!==7?(X=Zu(G,q.mode,ae,K),X.return=q,X):(X=c(X,G),X.return=q,X)}function b(q,X,G){if(typeof X=="string"&&X!==""||typeof X=="number")return X=F0(""+X,q.mode,G),X.return=q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Hp:return G=zm(X.type,X.key,X.props,null,q.mode,G),G.ref=Wd(q,null,X),G.return=q,G;case Yc:return X=j0(X,q.mode,G),X.return=q,X;case Ll:var ae=X._init;return b(q,ae(X._payload),G)}if(Jd(X)||Ud(X))return X=Zu(X,q.mode,G,null),X.return=q,X;im(q,X)}return null}function C(q,X,G,ae){var K=X!==null?X.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return K!==null?null:u(q,X,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Hp:return G.key===K?S(q,X,G,ae):null;case Yc:return G.key===K?P(q,X,G,ae):null;case Ll:return K=G._init,C(q,X,K(G._payload),ae)}if(Jd(G)||Ud(G))return K!==null?null:M(q,X,G,ae,null);im(q,G)}return null}function O(q,X,G,ae,K){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return q=q.get(G)||null,u(X,q,""+ae,K);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Hp:return q=q.get(ae.key===null?G:ae.key)||null,S(X,q,ae,K);case Yc:return q=q.get(ae.key===null?G:ae.key)||null,P(X,q,ae,K);case Ll:var Z=ae._init;return O(q,X,G,Z(ae._payload),K)}if(Jd(ae)||Ud(ae))return q=q.get(G)||null,M(X,q,ae,K,null);im(X,ae)}return null}function $(q,X,G,ae){for(var K=null,Z=null,T=X,L=X=0,B=null;T!==null&&L<G.length;L++){T.index>L?(B=T,T=null):B=T.sibling;var te=C(q,T,G[L],ae);if(te===null){T===null&&(T=B);break}e&&T&&te.alternate===null&&t(q,T),X=p(te,X,L),Z===null?K=te:Z.sibling=te,Z=te,T=B}if(L===G.length)return i(q,T),br&&Lu(q,L),K;if(T===null){for(;L<G.length;L++)T=b(q,G[L],ae),T!==null&&(X=p(T,X,L),Z===null?K=T:Z.sibling=T,Z=T);return br&&Lu(q,L),K}for(T=a(q,T);L<G.length;L++)B=O(T,q,L,G[L],ae),B!==null&&(e&&B.alternate!==null&&T.delete(B.key===null?L:B.key),X=p(B,X,L),Z===null?K=B:Z.sibling=B,Z=B);return e&&T.forEach(function(H){return t(q,H)}),br&&Lu(q,L),K}function j(q,X,G,ae){var K=Ud(G);if(typeof K!="function")throw Error(Pt(150));if(G=K.call(G),G==null)throw Error(Pt(151));for(var Z=K=null,T=X,L=X=0,B=null,te=G.next();T!==null&&!te.done;L++,te=G.next()){T.index>L?(B=T,T=null):B=T.sibling;var H=C(q,T,te.value,ae);if(H===null){T===null&&(T=B);break}e&&T&&H.alternate===null&&t(q,T),X=p(H,X,L),Z===null?K=H:Z.sibling=H,Z=H,T=B}if(te.done)return i(q,T),br&&Lu(q,L),K;if(T===null){for(;!te.done;L++,te=G.next())te=b(q,te.value,ae),te!==null&&(X=p(te,X,L),Z===null?K=te:Z.sibling=te,Z=te);return br&&Lu(q,L),K}for(T=a(q,T);!te.done;L++,te=G.next())te=O(T,q,L,te.value,ae),te!==null&&(e&&te.alternate!==null&&T.delete(te.key===null?L:te.key),X=p(te,X,L),Z===null?K=te:Z.sibling=te,Z=te);return e&&T.forEach(function(ve){return t(q,ve)}),br&&Lu(q,L),K}function he(q,X,G,ae){if(typeof G=="object"&&G!==null&&G.type===Qc&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Hp:e:{for(var K=G.key,Z=X;Z!==null;){if(Z.key===K){if(K=G.type,K===Qc){if(Z.tag===7){i(q,Z.sibling),X=c(Z,G.props.children),X.return=q,q=X;break e}}else if(Z.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ll&&c2(K)===Z.type){i(q,Z.sibling),X=c(Z,G.props),X.ref=Wd(q,Z,G),X.return=q,q=X;break e}i(q,Z);break}else t(q,Z);Z=Z.sibling}G.type===Qc?(X=Zu(G.props.children,q.mode,ae,G.key),X.return=q,q=X):(ae=zm(G.type,G.key,G.props,null,q.mode,ae),ae.ref=Wd(q,X,G),ae.return=q,q=ae)}return m(q);case Yc:e:{for(Z=G.key;X!==null;){if(X.key===Z)if(X.tag===4&&X.stateNode.containerInfo===G.containerInfo&&X.stateNode.implementation===G.implementation){i(q,X.sibling),X=c(X,G.children||[]),X.return=q,q=X;break e}else{i(q,X);break}else t(q,X);X=X.sibling}X=j0(G,q.mode,ae),X.return=q,q=X}return m(q);case Ll:return Z=G._init,he(q,X,Z(G._payload),ae)}if(Jd(G))return $(q,X,G,ae);if(Ud(G))return j(q,X,G,ae);im(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,X!==null&&X.tag===6?(i(q,X.sibling),X=c(X,G),X.return=q,q=X):(i(q,X),X=F0(G,q.mode,ae),X.return=q,q=X),m(q)):i(q,X)}return he}var Ch=OT(!0),LT=OT(!1),tp={},pa=lu(tp),Lf=lu(tp),Df=lu(tp);function Vu(e){if(e===tp)throw Error(Pt(174));return e}function k1(e,t){switch(cr(Df,t),cr(Lf,e),cr(pa,tp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ev(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ev(t,e)}gr(pa),cr(pa,t)}function Ph(){gr(pa),gr(Lf),gr(Df)}function DT(e){Vu(Df.current);var t=Vu(pa.current),i=Ev(t,e.type);t!==i&&(cr(Lf,e),cr(pa,i))}function z1(e){Lf.current===e&&(gr(pa),gr(Lf))}var Ir=lu(0);function ig(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var P0=[];function F1(){for(var e=0;e<P0.length;e++)P0[e]._workInProgressVersionPrimary=null;P0.length=0}var Pm=el.ReactCurrentDispatcher,I0=el.ReactCurrentBatchConfig,qu=0,Mr=null,Yr=null,ci=null,og=!1,mf=!1,Bf=0,P3=0;function Di(){throw Error(Pt(321))}function j1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ls(e[i],t[i]))return!1;return!0}function R1(e,t,i,a,c,p){if(qu=p,Mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pm.current=e===null||e.memoizedState===null?k3:z3,e=i(a,c),mf){p=0;do{if(mf=!1,Bf=0,25<=p)throw Error(Pt(301));p+=1,ci=Yr=null,t.updateQueue=null,Pm.current=F3,e=i(a,c)}while(mf)}if(Pm.current=sg,t=Yr!==null&&Yr.next!==null,qu=0,ci=Yr=Mr=null,og=!1,t)throw Error(Pt(300));return e}function O1(){var e=Bf!==0;return Bf=0,e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Mr.memoizedState=ci=e:ci=ci.next=e,ci}function fs(){if(Yr===null){var e=Mr.alternate;e=e!==null?e.memoizedState:null}else e=Yr.next;var t=ci===null?Mr.memoizedState:ci.next;if(t!==null)ci=t,Yr=e;else{if(e===null)throw Error(Pt(310));Yr=e,e={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},ci===null?Mr.memoizedState=ci=e:ci=ci.next=e}return ci}function Nf(e,t){return typeof t=="function"?t(e):t}function A0(e){var t=fs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=Yr,c=a.baseQueue,p=i.pending;if(p!==null){if(c!==null){var m=c.next;c.next=p.next,p.next=m}a.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,a=a.baseState;var u=m=null,S=null,P=p;do{var M=P.lane;if((qu&M)===M)S!==null&&(S=S.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),a=P.hasEagerState?P.eagerState:e(a,P.action);else{var b={lane:M,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};S===null?(u=S=b,m=a):S=S.next=b,Mr.lanes|=M,Ju|=M}P=P.next}while(P!==null&&P!==p);S===null?m=a:S.next=u,Ls(a,t.memoizedState)||(ho=!0),t.memoizedState=a,t.baseState=m,t.baseQueue=S,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do p=c.lane,Mr.lanes|=p,Ju|=p,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function M0(e){var t=fs(),i=t.queue;if(i===null)throw Error(Pt(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,p=t.memoizedState;if(c!==null){i.pending=null;var m=c=c.next;do p=e(p,m.action),m=m.next;while(m!==c);Ls(p,t.memoizedState)||(ho=!0),t.memoizedState=p,t.baseQueue===null&&(t.baseState=p),i.lastRenderedState=p}return[p,a]}function BT(){}function NT(e,t){var i=Mr,a=fs(),c=t(),p=!Ls(a.memoizedState,c);if(p&&(a.memoizedState=c,ho=!0),a=a.queue,L1(VT.bind(null,i,a,e),[e]),a.getSnapshot!==t||p||ci!==null&&ci.memoizedState.tag&1){if(i.flags|=2048,Uf(9,$T.bind(null,i,a,c,t),void 0,null),hi===null)throw Error(Pt(349));qu&30||UT(i,t,c)}return c}function UT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function $T(e,t,i,a){t.value=i,t.getSnapshot=a,GT(t)&&ZT(e)}function VT(e,t,i){return i(function(){GT(t)&&ZT(e)})}function GT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ls(e,i)}catch{return!0}}function ZT(e){var t=Ka(e,1);t!==null&&Os(t,e,1,-1)}function h2(e){var t=oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nf,lastRenderedState:e},t.queue=e,e=e.dispatch=M3.bind(null,Mr,e),[t.memoizedState,e]}function Uf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function WT(){return fs().memoizedState}function Im(e,t,i,a){var c=oa();Mr.flags|=e,c.memoizedState=Uf(1|t,i,void 0,a===void 0?null:a)}function qg(e,t,i,a){var c=fs();a=a===void 0?null:a;var p=void 0;if(Yr!==null){var m=Yr.memoizedState;if(p=m.destroy,a!==null&&j1(a,m.deps)){c.memoizedState=Uf(t,i,p,a);return}}Mr.flags|=e,c.memoizedState=Uf(1|t,i,p,a)}function d2(e,t){return Im(8390656,8,e,t)}function L1(e,t){return qg(2048,8,e,t)}function HT(e,t){return qg(4,2,e,t)}function XT(e,t){return qg(4,4,e,t)}function KT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qT(e,t,i){return i=i!=null?i.concat([e]):null,qg(4,4,KT.bind(null,t,e),i)}function D1(){}function JT(e,t){var i=fs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&j1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function YT(e,t){var i=fs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&j1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function QT(e,t,i){return qu&21?(Ls(i,t)||(i=nT(),Mr.lanes|=i,Ju|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ho=!0),e.memoizedState=i)}function I3(e,t){var i=tr;tr=i!==0&&4>i?i:4,e(!0);var a=I0.transition;I0.transition={};try{e(!1),t()}finally{tr=i,I0.transition=a}}function eC(){return fs().memoizedState}function A3(e,t,i){var a=Yl(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},tC(e))nC(t,i);else if(i=zT(e,t,i,a),i!==null){var c=Ji();Os(i,e,a,c),rC(i,t,a)}}function M3(e,t,i){var a=Yl(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(tC(e))nC(t,c);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=t.lastRenderedReducer,p!==null))try{var m=t.lastRenderedState,u=p(m,i);if(c.hasEagerState=!0,c.eagerState=u,Ls(u,m)){var S=t.interleaved;S===null?(c.next=c,A1(t)):(c.next=S.next,S.next=c),t.interleaved=c;return}}catch{}finally{}i=zT(e,t,c,a),i!==null&&(c=Ji(),Os(i,e,a,c),rC(i,t,a))}}function tC(e){var t=e.alternate;return e===Mr||t!==null&&t===Mr}function nC(e,t){mf=og=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function rC(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,m1(e,i)}}var sg={readContext:ds,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},k3={readContext:ds,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:ds,useEffect:d2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Im(4194308,4,KT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Im(4194308,4,e,t)},useInsertionEffect:function(e,t){return Im(4,2,e,t)},useMemo:function(e,t){var i=oa();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=oa();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=A3.bind(null,Mr,e),[a.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:h2,useDebugValue:D1,useDeferredValue:function(e){return oa().memoizedState=e},useTransition:function(){var e=h2(!1),t=e[0];return e=I3.bind(null,e[1]),oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Mr,c=oa();if(br){if(i===void 0)throw Error(Pt(407));i=i()}else{if(i=t(),hi===null)throw Error(Pt(349));qu&30||UT(a,t,i)}c.memoizedState=i;var p={value:i,getSnapshot:t};return c.queue=p,d2(VT.bind(null,a,p,e),[e]),a.flags|=2048,Uf(9,$T.bind(null,a,p,i,t),void 0,null),i},useId:function(){var e=oa(),t=hi.identifierPrefix;if(br){var i=Za,a=Ga;i=(a&~(1<<32-Rs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Bf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=P3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},z3={readContext:ds,useCallback:JT,useContext:ds,useEffect:L1,useImperativeHandle:qT,useInsertionEffect:HT,useLayoutEffect:XT,useMemo:YT,useReducer:A0,useRef:WT,useState:function(){return A0(Nf)},useDebugValue:D1,useDeferredValue:function(e){var t=fs();return QT(t,Yr.memoizedState,e)},useTransition:function(){var e=A0(Nf)[0],t=fs().memoizedState;return[e,t]},useMutableSource:BT,useSyncExternalStore:NT,useId:eC,unstable_isNewReconciler:!1},F3={readContext:ds,useCallback:JT,useContext:ds,useEffect:L1,useImperativeHandle:qT,useInsertionEffect:HT,useLayoutEffect:XT,useMemo:YT,useReducer:M0,useRef:WT,useState:function(){return M0(Nf)},useDebugValue:D1,useDeferredValue:function(e){var t=fs();return Yr===null?t.memoizedState=e:QT(t,Yr.memoizedState,e)},useTransition:function(){var e=M0(Nf)[0],t=fs().memoizedState;return[e,t]},useMutableSource:BT,useSyncExternalStore:NT,useId:eC,unstable_isNewReconciler:!1};function Ih(e,t){try{var i="",a=t;do i+=ak(a),a=a.return;while(a);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:t,stack:c,digest:null}}function k0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Hv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var j3=typeof WeakMap=="function"?WeakMap:Map;function iC(e,t,i){i=Wa(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){lg||(lg=!0,r_=a),Hv(e,t)},i}function oC(e,t,i){i=Wa(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){Hv(e,t)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){Hv(e,t),typeof a!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),i}function f2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new j3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=X3.bind(null,e,t,i),t.then(e,e))}function p2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function m2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Wa(-1,1),t.tag=2,ql(i,t,1))),i.lanes|=1),e)}var R3=el.ReactCurrentOwner,ho=!1;function Hi(e,t,i,a){t.child=e===null?LT(t,null,i,a):Ch(t,e.child,i,a)}function g2(e,t,i,a,c){i=i.render;var p=t.ref;return vh(t,c),a=R1(e,t,i,a,p,c),i=O1(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,qa(e,t,c)):(br&&i&&S1(t),t.flags|=1,Hi(e,t,a,c),t.child)}function y2(e,t,i,a,c){if(e===null){var p=i.type;return typeof p=="function"&&!W1(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=p,sC(e,t,p,a,c)):(e=zm(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(p=e.child,!(e.lanes&c)){var m=p.memoizedProps;if(i=i.compare,i=i!==null?i:Ff,i(m,a)&&e.ref===t.ref)return qa(e,t,c)}return t.flags|=1,e=Ql(p,a),e.ref=t.ref,e.return=t,t.child=e}function sC(e,t,i,a,c){if(e!==null){var p=e.memoizedProps;if(Ff(p,a)&&e.ref===t.ref)if(ho=!1,t.pendingProps=a=p,(e.lanes&c)!==0)e.flags&131072&&(ho=!0);else return t.lanes=e.lanes,qa(e,t,c)}return Xv(e,t,i,a,c)}function aC(e,t,i){var a=t.pendingProps,c=a.children,p=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(uh,jo),jo|=i;else{if(!(i&1073741824))return e=p!==null?p.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,cr(uh,jo),jo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=p!==null?p.baseLanes:i,cr(uh,jo),jo|=a}else p!==null?(a=p.baseLanes|i,t.memoizedState=null):a=i,cr(uh,jo),jo|=a;return Hi(e,t,c,i),t.child}function lC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Xv(e,t,i,a,c){var p=po(i)?Xu:Vi.current;return p=Eh(t,p),vh(t,c),i=R1(e,t,i,a,p,c),a=O1(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,qa(e,t,c)):(br&&a&&S1(t),t.flags|=1,Hi(e,t,i,c),t.child)}function v2(e,t,i,a,c){if(po(i)){var p=!0;Ym(t)}else p=!1;if(vh(t,c),t.stateNode===null)Am(e,t),RT(t,i,a),Wv(t,i,a,c),a=!0;else if(e===null){var m=t.stateNode,u=t.memoizedProps;m.props=u;var S=m.context,P=i.contextType;typeof P=="object"&&P!==null?P=ds(P):(P=po(i)?Xu:Vi.current,P=Eh(t,P));var M=i.getDerivedStateFromProps,b=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function";b||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(u!==a||S!==P)&&u2(t,m,a,P),Dl=!1;var C=t.memoizedState;m.state=C,rg(t,a,m,c),S=t.memoizedState,u!==a||C!==S||fo.current||Dl?(typeof M=="function"&&(Zv(t,i,M,a),S=t.memoizedState),(u=Dl||l2(t,i,u,a,C,S,P))?(b||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),m.props=a,m.state=S,m.context=P,a=u):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{m=t.stateNode,FT(e,t),u=t.memoizedProps,P=t.type===t.elementType?u:As(t.type,u),m.props=P,b=t.pendingProps,C=m.context,S=i.contextType,typeof S=="object"&&S!==null?S=ds(S):(S=po(i)?Xu:Vi.current,S=Eh(t,S));var O=i.getDerivedStateFromProps;(M=typeof O=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(u!==b||C!==S)&&u2(t,m,a,S),Dl=!1,C=t.memoizedState,m.state=C,rg(t,a,m,c);var $=t.memoizedState;u!==b||C!==$||fo.current||Dl?(typeof O=="function"&&(Zv(t,i,O,a),$=t.memoizedState),(P=Dl||l2(t,i,P,a,C,$,S)||!1)?(M||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(a,$,S),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(a,$,S)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=$),m.props=a,m.state=$,m.context=S,a=P):(typeof m.componentDidUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),a=!1)}return Kv(e,t,i,a,p,c)}function Kv(e,t,i,a,c,p){lC(e,t);var m=(t.flags&128)!==0;if(!a&&!m)return c&&r2(t,i,!1),qa(e,t,p);a=t.stateNode,R3.current=t;var u=m&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&m?(t.child=Ch(t,e.child,null,p),t.child=Ch(t,null,u,p)):Hi(e,t,u,p),t.memoizedState=a.state,c&&r2(t,i,!0),t.child}function uC(e){var t=e.stateNode;t.pendingContext?n2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&n2(e,t.context,!1),k1(e,t.containerInfo)}function _2(e,t,i,a,c){return Th(),T1(c),t.flags|=256,Hi(e,t,i,a),t.child}var qv={dehydrated:null,treeContext:null,retryLane:0};function Jv(e){return{baseLanes:e,cachePool:null,transitions:null}}function cC(e,t,i){var a=t.pendingProps,c=Ir.current,p=!1,m=(t.flags&128)!==0,u;if((u=m)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(p=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),cr(Ir,c&1),e===null)return Vv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=a.children,e=a.fallback,p?(a=t.mode,p=t.child,m={mode:"hidden",children:m},!(a&1)&&p!==null?(p.childLanes=0,p.pendingProps=m):p=Qg(m,a,0,null),e=Zu(e,a,i,null),p.return=t,e.return=t,p.sibling=e,t.child=p,t.child.memoizedState=Jv(i),t.memoizedState=qv,e):B1(t,m));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return O3(e,t,m,a,u,c,i);if(p){p=a.fallback,m=t.mode,c=e.child,u=c.sibling;var S={mode:"hidden",children:a.children};return!(m&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=Ql(c,S),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?p=Ql(u,p):(p=Zu(p,m,i,null),p.flags|=2),p.return=t,a.return=t,a.sibling=p,t.child=a,a=p,p=t.child,m=e.child.memoizedState,m=m===null?Jv(i):{baseLanes:m.baseLanes|i,cachePool:null,transitions:m.transitions},p.memoizedState=m,p.childLanes=e.childLanes&~i,t.memoizedState=qv,a}return p=e.child,e=p.sibling,a=Ql(p,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function B1(e,t){return t=Qg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function om(e,t,i,a){return a!==null&&T1(a),Ch(t,e.child,null,i),e=B1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function O3(e,t,i,a,c,p,m){if(i)return t.flags&256?(t.flags&=-257,a=k0(Error(Pt(422))),om(e,t,m,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(p=a.fallback,c=t.mode,a=Qg({mode:"visible",children:a.children},c,0,null),p=Zu(p,c,m,null),p.flags|=2,a.return=t,p.return=t,a.sibling=p,t.child=a,t.mode&1&&Ch(t,e.child,null,m),t.child.memoizedState=Jv(m),t.memoizedState=qv,p);if(!(t.mode&1))return om(e,t,m,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,p=Error(Pt(419)),a=k0(p,a,void 0),om(e,t,m,a)}if(u=(m&e.childLanes)!==0,ho||u){if(a=hi,a!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|m)?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,Ka(e,c),Os(a,e,c,-1))}return Z1(),a=k0(Error(Pt(421))),om(e,t,m,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=K3.bind(null,e),c._reactRetry=t,null):(e=p.treeContext,Do=Kl(c.nextSibling),Bo=t,br=!0,ks=null,e!==null&&(ss[as++]=Ga,ss[as++]=Za,ss[as++]=Ku,Ga=e.id,Za=e.overflow,Ku=t),t=B1(t,a.children),t.flags|=4096,t)}function x2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Gv(e.return,t,i)}function z0(e,t,i,a,c){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=a,p.tail=i,p.tailMode=c)}function hC(e,t,i){var a=t.pendingProps,c=a.revealOrder,p=a.tail;if(Hi(e,t,a.children,i),a=Ir.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&x2(e,i,t);else if(e.tag===19)x2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(cr(Ir,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&ig(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),z0(t,!1,c,i,p);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ig(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}z0(t,!0,i,null,p);break;case"together":z0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Am(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ju|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pt(153));if(t.child!==null){for(e=t.child,i=Ql(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ql(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function L3(e,t,i){switch(t.tag){case 3:uC(t),Th();break;case 5:DT(t);break;case 1:po(t.type)&&Ym(t);break;case 4:k1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;cr(tg,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(cr(Ir,Ir.current&1),t.flags|=128,null):i&t.child.childLanes?cC(e,t,i):(cr(Ir,Ir.current&1),e=qa(e,t,i),e!==null?e.sibling:null);cr(Ir,Ir.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return hC(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),cr(Ir,Ir.current),a)break;return null;case 22:case 23:return t.lanes=0,aC(e,t,i)}return qa(e,t,i)}var dC,Yv,fC,pC;dC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Yv=function(){};fC=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Vu(pa.current);var p=null;switch(i){case"input":c=xv(e,c),a=xv(e,a),p=[];break;case"select":c=kr({},c,{value:void 0}),a=kr({},a,{value:void 0}),p=[];break;case"textarea":c=Sv(e,c),a=Sv(e,a),p=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=qm)}Tv(i,a);var m;i=null;for(P in c)if(!a.hasOwnProperty(P)&&c.hasOwnProperty(P)&&c[P]!=null)if(P==="style"){var u=c[P];for(m in u)u.hasOwnProperty(m)&&(i||(i={}),i[m]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(Cf.hasOwnProperty(P)?p||(p=[]):(p=p||[]).push(P,null));for(P in a){var S=a[P];if(u=c!=null?c[P]:void 0,a.hasOwnProperty(P)&&S!==u&&(S!=null||u!=null))if(P==="style")if(u){for(m in u)!u.hasOwnProperty(m)||S&&S.hasOwnProperty(m)||(i||(i={}),i[m]="");for(m in S)S.hasOwnProperty(m)&&u[m]!==S[m]&&(i||(i={}),i[m]=S[m])}else i||(p||(p=[]),p.push(P,i)),i=S;else P==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(p=p||[]).push(P,S)):P==="children"?typeof S!="string"&&typeof S!="number"||(p=p||[]).push(P,""+S):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(Cf.hasOwnProperty(P)?(S!=null&&P==="onScroll"&&mr("scroll",e),p||u===S||(p=[])):(p=p||[]).push(P,S))}i&&(p=p||[]).push("style",i);var P=p;(t.updateQueue=P)&&(t.flags|=4)}};pC=function(e,t,i,a){i!==a&&(t.flags|=4)};function Hd(e,t){if(!br)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function D3(e,t,i){var a=t.pendingProps;switch(E1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(t),null;case 1:return po(t.type)&&Jm(),Bi(t),null;case 3:return a=t.stateNode,Ph(),gr(fo),gr(Vi),F1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(rm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ks!==null&&(s_(ks),ks=null))),Yv(e,t),Bi(t),null;case 5:z1(t);var c=Vu(Df.current);if(i=t.type,e!==null&&t.stateNode!=null)fC(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Pt(166));return Bi(t),null}if(e=Vu(pa.current),rm(t)){a=t.stateNode,i=t.type;var p=t.memoizedProps;switch(a[aa]=t,a[Of]=p,e=(t.mode&1)!==0,i){case"dialog":mr("cancel",a),mr("close",a);break;case"iframe":case"object":case"embed":mr("load",a);break;case"video":case"audio":for(c=0;c<Qd.length;c++)mr(Qd[c],a);break;case"source":mr("error",a);break;case"img":case"image":case"link":mr("error",a),mr("load",a);break;case"details":mr("toggle",a);break;case"input":Ab(a,p),mr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!p.multiple},mr("invalid",a);break;case"textarea":kb(a,p),mr("invalid",a)}Tv(i,p),c=null;for(var m in p)if(p.hasOwnProperty(m)){var u=p[m];m==="children"?typeof u=="string"?a.textContent!==u&&(p.suppressHydrationWarning!==!0&&nm(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(p.suppressHydrationWarning!==!0&&nm(a.textContent,u,e),c=["children",""+u]):Cf.hasOwnProperty(m)&&u!=null&&m==="onScroll"&&mr("scroll",a)}switch(i){case"input":Xp(a),Mb(a,p,!0);break;case"textarea":Xp(a),zb(a);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(a.onclick=qm)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=UE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=m.createElement(i,{is:a.is}):(e=m.createElement(i),i==="select"&&(m=e,a.multiple?m.multiple=!0:a.size&&(m.size=a.size))):e=m.createElementNS(e,i),e[aa]=t,e[Of]=a,dC(e,t,!1,!1),t.stateNode=e;e:{switch(m=Cv(i,a),i){case"dialog":mr("cancel",e),mr("close",e),c=a;break;case"iframe":case"object":case"embed":mr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Qd.length;c++)mr(Qd[c],e);c=a;break;case"source":mr("error",e),c=a;break;case"img":case"image":case"link":mr("error",e),mr("load",e),c=a;break;case"details":mr("toggle",e),c=a;break;case"input":Ab(e,a),c=xv(e,a),mr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=kr({},a,{value:void 0}),mr("invalid",e);break;case"textarea":kb(e,a),c=Sv(e,a),mr("invalid",e);break;default:c=a}Tv(i,c),u=c;for(p in u)if(u.hasOwnProperty(p)){var S=u[p];p==="style"?GE(e,S):p==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&$E(e,S)):p==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&Pf(e,S):typeof S=="number"&&Pf(e,""+S):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Cf.hasOwnProperty(p)?S!=null&&p==="onScroll"&&mr("scroll",e):S!=null&&u1(e,p,S,m))}switch(i){case"input":Xp(e),Mb(e,a,!1);break;case"textarea":Xp(e),zb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+tu(a.value));break;case"select":e.multiple=!!a.multiple,p=a.value,p!=null?ph(e,!!a.multiple,p,!1):a.defaultValue!=null&&ph(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=qm)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bi(t),null;case 6:if(e&&t.stateNode!=null)pC(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Pt(166));if(i=Vu(Df.current),Vu(pa.current),rm(t)){if(a=t.stateNode,i=t.memoizedProps,a[aa]=t,(p=a.nodeValue!==i)&&(e=Bo,e!==null))switch(e.tag){case 3:nm(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nm(a.nodeValue,i,(e.mode&1)!==0)}p&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[aa]=t,t.stateNode=a}return Bi(t),null;case 13:if(gr(Ir),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(br&&Do!==null&&t.mode&1&&!(t.flags&128))kT(),Th(),t.flags|=98560,p=!1;else if(p=rm(t),a!==null&&a.dehydrated!==null){if(e===null){if(!p)throw Error(Pt(318));if(p=t.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(Pt(317));p[aa]=t}else Th(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bi(t),p=!1}else ks!==null&&(s_(ks),ks=null),p=!0;if(!p)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Ir.current&1?Qr===0&&(Qr=3):Z1())),t.updateQueue!==null&&(t.flags|=4),Bi(t),null);case 4:return Ph(),Yv(e,t),e===null&&jf(t.stateNode.containerInfo),Bi(t),null;case 10:return I1(t.type._context),Bi(t),null;case 17:return po(t.type)&&Jm(),Bi(t),null;case 19:if(gr(Ir),p=t.memoizedState,p===null)return Bi(t),null;if(a=(t.flags&128)!==0,m=p.rendering,m===null)if(a)Hd(p,!1);else{if(Qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=ig(e),m!==null){for(t.flags|=128,Hd(p,!1),a=m.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)p=i,e=a,p.flags&=14680066,m=p.alternate,m===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=m.childLanes,p.lanes=m.lanes,p.child=m.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=m.memoizedProps,p.memoizedState=m.memoizedState,p.updateQueue=m.updateQueue,p.type=m.type,e=m.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return cr(Ir,Ir.current&1|2),t.child}e=e.sibling}p.tail!==null&&Nr()>Ah&&(t.flags|=128,a=!0,Hd(p,!1),t.lanes=4194304)}else{if(!a)if(e=ig(m),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Hd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!m.alternate&&!br)return Bi(t),null}else 2*Nr()-p.renderingStartTime>Ah&&i!==1073741824&&(t.flags|=128,a=!0,Hd(p,!1),t.lanes=4194304);p.isBackwards?(m.sibling=t.child,t.child=m):(i=p.last,i!==null?i.sibling=m:t.child=m,p.last=m)}return p.tail!==null?(t=p.tail,p.rendering=t,p.tail=t.sibling,p.renderingStartTime=Nr(),t.sibling=null,i=Ir.current,cr(Ir,a?i&1|2:i&1),t):(Bi(t),null);case 22:case 23:return G1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?jo&1073741824&&(Bi(t),t.subtreeFlags&6&&(t.flags|=8192)):Bi(t),null;case 24:return null;case 25:return null}throw Error(Pt(156,t.tag))}function B3(e,t){switch(E1(t),t.tag){case 1:return po(t.type)&&Jm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ph(),gr(fo),gr(Vi),F1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return z1(t),null;case 13:if(gr(Ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pt(340));Th()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gr(Ir),null;case 4:return Ph(),null;case 10:return I1(t.type._context),null;case 22:case 23:return G1(),null;case 24:return null;default:return null}}var sm=!1,Ui=!1,N3=typeof WeakSet=="function"?WeakSet:Set,en=null;function lh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Or(e,t,a)}else i.current=null}function Qv(e,t,i){try{i()}catch(a){Or(e,t,a)}}var w2=!1;function U3(e,t){if(Ov=Hm,e=vT(),b1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,p=a.focusNode;a=a.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var m=0,u=-1,S=-1,P=0,M=0,b=e,C=null;t:for(;;){for(var O;b!==i||c!==0&&b.nodeType!==3||(u=m+c),b!==p||a!==0&&b.nodeType!==3||(S=m+a),b.nodeType===3&&(m+=b.nodeValue.length),(O=b.firstChild)!==null;)C=b,b=O;for(;;){if(b===e)break t;if(C===i&&++P===c&&(u=m),C===p&&++M===a&&(S=m),(O=b.nextSibling)!==null)break;b=C,C=b.parentNode}b=O}i=u===-1||S===-1?null:{start:u,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(Lv={focusedElem:e,selectionRange:i},Hm=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var j=$.memoizedProps,he=$.memoizedState,q=t.stateNode,X=q.getSnapshotBeforeUpdate(t.elementType===t.type?j:As(t.type,j),he);q.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pt(163))}}catch(ae){Or(t,t.return,ae)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return $=w2,w2=!1,$}function gf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var p=c.destroy;c.destroy=void 0,p!==void 0&&Qv(t,i,p)}c=c.next}while(c!==a)}}function Jg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function e_(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function mC(e){var t=e.alternate;t!==null&&(e.alternate=null,mC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[aa],delete t[Of],delete t[Nv],delete t[S3],delete t[E3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gC(e){return e.tag===5||e.tag===3||e.tag===4}function b2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function t_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=qm));else if(a!==4&&(e=e.child,e!==null))for(t_(e,t,i),e=e.sibling;e!==null;)t_(e,t,i),e=e.sibling}function n_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(n_(e,t,i),e=e.sibling;e!==null;)n_(e,t,i),e=e.sibling}var Ei=null,Ms=!1;function Rl(e,t,i){for(i=i.child;i!==null;)yC(e,t,i),i=i.sibling}function yC(e,t,i){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(Vg,i)}catch{}switch(i.tag){case 5:Ui||lh(i,t);case 6:var a=Ei,c=Ms;Ei=null,Rl(e,t,i),Ei=a,Ms=c,Ei!==null&&(Ms?(e=Ei,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ei.removeChild(i.stateNode));break;case 18:Ei!==null&&(Ms?(e=Ei,i=i.stateNode,e.nodeType===8?T0(e.parentNode,i):e.nodeType===1&&T0(e,i),kf(e)):T0(Ei,i.stateNode));break;case 4:a=Ei,c=Ms,Ei=i.stateNode.containerInfo,Ms=!0,Rl(e,t,i),Ei=a,Ms=c;break;case 0:case 11:case 14:case 15:if(!Ui&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var p=c,m=p.destroy;p=p.tag,m!==void 0&&(p&2||p&4)&&Qv(i,t,m),c=c.next}while(c!==a)}Rl(e,t,i);break;case 1:if(!Ui&&(lh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Or(i,t,u)}Rl(e,t,i);break;case 21:Rl(e,t,i);break;case 22:i.mode&1?(Ui=(a=Ui)||i.memoizedState!==null,Rl(e,t,i),Ui=a):Rl(e,t,i);break;default:Rl(e,t,i)}}function S2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new N3),t.forEach(function(a){var c=q3.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Is(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var p=e,m=t,u=m;e:for(;u!==null;){switch(u.tag){case 5:Ei=u.stateNode,Ms=!1;break e;case 3:Ei=u.stateNode.containerInfo,Ms=!0;break e;case 4:Ei=u.stateNode.containerInfo,Ms=!0;break e}u=u.return}if(Ei===null)throw Error(Pt(160));yC(p,m,c),Ei=null,Ms=!1;var S=c.alternate;S!==null&&(S.return=null),c.return=null}catch(P){Or(c,t,P)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vC(t,e),t=t.sibling}function vC(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Is(t,e),ia(e),a&4){try{gf(3,e,e.return),Jg(3,e)}catch(j){Or(e,e.return,j)}try{gf(5,e,e.return)}catch(j){Or(e,e.return,j)}}break;case 1:Is(t,e),ia(e),a&512&&i!==null&&lh(i,i.return);break;case 5:if(Is(t,e),ia(e),a&512&&i!==null&&lh(i,i.return),e.flags&32){var c=e.stateNode;try{Pf(c,"")}catch(j){Or(e,e.return,j)}}if(a&4&&(c=e.stateNode,c!=null)){var p=e.memoizedProps,m=i!==null?i.memoizedProps:p,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&p.type==="radio"&&p.name!=null&&BE(c,p),Cv(u,m);var P=Cv(u,p);for(m=0;m<S.length;m+=2){var M=S[m],b=S[m+1];M==="style"?GE(c,b):M==="dangerouslySetInnerHTML"?$E(c,b):M==="children"?Pf(c,b):u1(c,M,b,P)}switch(u){case"input":wv(c,p);break;case"textarea":NE(c,p);break;case"select":var C=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var O=p.value;O!=null?ph(c,!!p.multiple,O,!1):C!==!!p.multiple&&(p.defaultValue!=null?ph(c,!!p.multiple,p.defaultValue,!0):ph(c,!!p.multiple,p.multiple?[]:"",!1))}c[Of]=p}catch(j){Or(e,e.return,j)}}break;case 6:if(Is(t,e),ia(e),a&4){if(e.stateNode===null)throw Error(Pt(162));c=e.stateNode,p=e.memoizedProps;try{c.nodeValue=p}catch(j){Or(e,e.return,j)}}break;case 3:if(Is(t,e),ia(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{kf(t.containerInfo)}catch(j){Or(e,e.return,j)}break;case 4:Is(t,e),ia(e);break;case 13:Is(t,e),ia(e),c=e.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||($1=Nr())),a&4&&S2(e);break;case 22:if(M=i!==null&&i.memoizedState!==null,e.mode&1?(Ui=(P=Ui)||M,Is(t,e),Ui=P):Is(t,e),ia(e),a&8192){if(P=e.memoizedState!==null,(e.stateNode.isHidden=P)&&!M&&e.mode&1)for(en=e,M=e.child;M!==null;){for(b=en=M;en!==null;){switch(C=en,O=C.child,C.tag){case 0:case 11:case 14:case 15:gf(4,C,C.return);break;case 1:lh(C,C.return);var $=C.stateNode;if(typeof $.componentWillUnmount=="function"){a=C,i=C.return;try{t=a,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(j){Or(a,i,j)}}break;case 5:lh(C,C.return);break;case 22:if(C.memoizedState!==null){T2(b);continue}}O!==null?(O.return=C,en=O):T2(b)}M=M.sibling}e:for(M=null,b=e;;){if(b.tag===5){if(M===null){M=b;try{c=b.stateNode,P?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(u=b.stateNode,S=b.memoizedProps.style,m=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=VE("display",m))}catch(j){Or(e,e.return,j)}}}else if(b.tag===6){if(M===null)try{b.stateNode.nodeValue=P?"":b.memoizedProps}catch(j){Or(e,e.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;M===b&&(M=null),b=b.return}M===b&&(M=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Is(t,e),ia(e),a&4&&S2(e);break;case 21:break;default:Is(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(gC(i)){var a=i;break e}i=i.return}throw Error(Pt(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Pf(c,""),a.flags&=-33);var p=b2(e);n_(e,p,c);break;case 3:case 4:var m=a.stateNode.containerInfo,u=b2(e);t_(e,u,m);break;default:throw Error(Pt(161))}}catch(S){Or(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $3(e,t,i){en=e,_C(e)}function _C(e,t,i){for(var a=(e.mode&1)!==0;en!==null;){var c=en,p=c.child;if(c.tag===22&&a){var m=c.memoizedState!==null||sm;if(!m){var u=c.alternate,S=u!==null&&u.memoizedState!==null||Ui;u=sm;var P=Ui;if(sm=m,(Ui=S)&&!P)for(en=c;en!==null;)m=en,S=m.child,m.tag===22&&m.memoizedState!==null?C2(c):S!==null?(S.return=m,en=S):C2(c);for(;p!==null;)en=p,_C(p),p=p.sibling;en=c,sm=u,Ui=P}E2(e)}else c.subtreeFlags&8772&&p!==null?(p.return=c,en=p):E2(e)}}function E2(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ui||Jg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ui)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:As(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var p=t.updateQueue;p!==null&&a2(t,p,a);break;case 3:var m=t.updateQueue;if(m!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}a2(t,m,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var P=t.alternate;if(P!==null){var M=P.memoizedState;if(M!==null){var b=M.dehydrated;b!==null&&kf(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pt(163))}Ui||t.flags&512&&e_(t)}catch(C){Or(t,t.return,C)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function T2(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function C2(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Jg(4,t)}catch(S){Or(t,i,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(S){Or(t,c,S)}}var p=t.return;try{e_(t)}catch(S){Or(t,p,S)}break;case 5:var m=t.return;try{e_(t)}catch(S){Or(t,m,S)}}}catch(S){Or(t,t.return,S)}if(t===e){en=null;break}var u=t.sibling;if(u!==null){u.return=t.return,en=u;break}en=t.return}}var V3=Math.ceil,ag=el.ReactCurrentDispatcher,N1=el.ReactCurrentOwner,hs=el.ReactCurrentBatchConfig,Vn=0,hi=null,Xr=null,Ci=0,jo=0,uh=lu(0),Qr=0,$f=null,Ju=0,Yg=0,U1=0,yf=null,uo=null,$1=0,Ah=1/0,Na=null,lg=!1,r_=null,Jl=null,am=!1,Gl=null,ug=0,vf=0,i_=null,Mm=-1,km=0;function Ji(){return Vn&6?Nr():Mm!==-1?Mm:Mm=Nr()}function Yl(e){return e.mode&1?Vn&2&&Ci!==0?Ci&-Ci:C3.transition!==null?(km===0&&(km=nT()),km):(e=tr,e!==0||(e=window.event,e=e===void 0?16:uT(e.type)),e):1}function Os(e,t,i,a){if(50<vf)throw vf=0,i_=null,Error(Pt(185));Yf(e,i,a),(!(Vn&2)||e!==hi)&&(e===hi&&(!(Vn&2)&&(Yg|=i),Qr===4&&$l(e,Ci)),mo(e,a),i===1&&Vn===0&&!(t.mode&1)&&(Ah=Nr()+500,Xg&&uu()))}function mo(e,t){var i=e.callbackNode;Ck(e,t);var a=Wm(e,e===hi?Ci:0);if(a===0)i!==null&&Rb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Rb(i),t===1)e.tag===0?T3(P2.bind(null,e)):IT(P2.bind(null,e)),w3(function(){!(Vn&6)&&uu()}),i=null;else{switch(rT(a)){case 1:i=p1;break;case 4:i=eT;break;case 16:i=Zm;break;case 536870912:i=tT;break;default:i=Zm}i=PC(i,xC.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function xC(e,t){if(Mm=-1,km=0,Vn&6)throw Error(Pt(327));var i=e.callbackNode;if(_h()&&e.callbackNode!==i)return null;var a=Wm(e,e===hi?Ci:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=cg(e,a);else{t=a;var c=Vn;Vn|=2;var p=bC();(hi!==e||Ci!==t)&&(Na=null,Ah=Nr()+500,Gu(e,t));do try{W3();break}catch(u){wC(e,u)}while(!0);P1(),ag.current=p,Vn=c,Xr!==null?t=0:(hi=null,Ci=0,t=Qr)}if(t!==0){if(t===2&&(c=kv(e),c!==0&&(a=c,t=o_(e,c))),t===1)throw i=$f,Gu(e,0),$l(e,a),mo(e,Nr()),i;if(t===6)$l(e,a);else{if(c=e.current.alternate,!(a&30)&&!G3(c)&&(t=cg(e,a),t===2&&(p=kv(e),p!==0&&(a=p,t=o_(e,p))),t===1))throw i=$f,Gu(e,0),$l(e,a),mo(e,Nr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Pt(345));case 2:Du(e,uo,Na);break;case 3:if($l(e,a),(a&130023424)===a&&(t=$1+500-Nr(),10<t)){if(Wm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Ji(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Bv(Du.bind(null,e,uo,Na),t);break}Du(e,uo,Na);break;case 4:if($l(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var m=31-Rs(a);p=1<<m,m=t[m],m>c&&(c=m),a&=~p}if(a=c,a=Nr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*V3(a/1960))-a,10<a){e.timeoutHandle=Bv(Du.bind(null,e,uo,Na),a);break}Du(e,uo,Na);break;case 5:Du(e,uo,Na);break;default:throw Error(Pt(329))}}}return mo(e,Nr()),e.callbackNode===i?xC.bind(null,e):null}function o_(e,t){var i=yf;return e.current.memoizedState.isDehydrated&&(Gu(e,t).flags|=256),e=cg(e,t),e!==2&&(t=uo,uo=i,t!==null&&s_(t)),e}function s_(e){uo===null?uo=e:uo.push.apply(uo,e)}function G3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],p=c.getSnapshot;c=c.value;try{if(!Ls(p(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $l(e,t){for(t&=~U1,t&=~Yg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Rs(t),a=1<<i;e[i]=-1,t&=~a}}function P2(e){if(Vn&6)throw Error(Pt(327));_h();var t=Wm(e,0);if(!(t&1))return mo(e,Nr()),null;var i=cg(e,t);if(e.tag!==0&&i===2){var a=kv(e);a!==0&&(t=a,i=o_(e,a))}if(i===1)throw i=$f,Gu(e,0),$l(e,t),mo(e,Nr()),i;if(i===6)throw Error(Pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e,uo,Na),mo(e,Nr()),null}function V1(e,t){var i=Vn;Vn|=1;try{return e(t)}finally{Vn=i,Vn===0&&(Ah=Nr()+500,Xg&&uu())}}function Yu(e){Gl!==null&&Gl.tag===0&&!(Vn&6)&&_h();var t=Vn;Vn|=1;var i=hs.transition,a=tr;try{if(hs.transition=null,tr=1,e)return e()}finally{tr=a,hs.transition=i,Vn=t,!(Vn&6)&&uu()}}function G1(){jo=uh.current,gr(uh)}function Gu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,x3(i)),Xr!==null)for(i=Xr.return;i!==null;){var a=i;switch(E1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Jm();break;case 3:Ph(),gr(fo),gr(Vi),F1();break;case 5:z1(a);break;case 4:Ph();break;case 13:gr(Ir);break;case 19:gr(Ir);break;case 10:I1(a.type._context);break;case 22:case 23:G1()}i=i.return}if(hi=e,Xr=e=Ql(e.current,null),Ci=jo=t,Qr=0,$f=null,U1=Yg=Ju=0,uo=yf=null,$u!==null){for(t=0;t<$u.length;t++)if(i=$u[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,p=i.pending;if(p!==null){var m=p.next;p.next=c,a.next=m}i.pending=a}$u=null}return e}function wC(e,t){do{var i=Xr;try{if(P1(),Pm.current=sg,og){for(var a=Mr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}og=!1}if(qu=0,ci=Yr=Mr=null,mf=!1,Bf=0,N1.current=null,i===null||i.return===null){Qr=1,$f=t,Xr=null;break}e:{var p=e,m=i.return,u=i,S=t;if(t=Ci,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var P=S,M=u,b=M.tag;if(!(M.mode&1)&&(b===0||b===11||b===15)){var C=M.alternate;C?(M.updateQueue=C.updateQueue,M.memoizedState=C.memoizedState,M.lanes=C.lanes):(M.updateQueue=null,M.memoizedState=null)}var O=p2(m);if(O!==null){O.flags&=-257,m2(O,m,u,p,t),O.mode&1&&f2(p,P,t),t=O,S=P;var $=t.updateQueue;if($===null){var j=new Set;j.add(S),t.updateQueue=j}else $.add(S);break e}else{if(!(t&1)){f2(p,P,t),Z1();break e}S=Error(Pt(426))}}else if(br&&u.mode&1){var he=p2(m);if(he!==null){!(he.flags&65536)&&(he.flags|=256),m2(he,m,u,p,t),T1(Ih(S,u));break e}}p=S=Ih(S,u),Qr!==4&&(Qr=2),yf===null?yf=[p]:yf.push(p),p=m;do{switch(p.tag){case 3:p.flags|=65536,t&=-t,p.lanes|=t;var q=iC(p,S,t);s2(p,q);break e;case 1:u=S;var X=p.type,G=p.stateNode;if(!(p.flags&128)&&(typeof X.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Jl===null||!Jl.has(G)))){p.flags|=65536,t&=-t,p.lanes|=t;var ae=oC(p,u,t);s2(p,ae);break e}}p=p.return}while(p!==null)}EC(i)}catch(K){t=K,Xr===i&&i!==null&&(Xr=i=i.return);continue}break}while(!0)}function bC(){var e=ag.current;return ag.current=sg,e===null?sg:e}function Z1(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),hi===null||!(Ju&268435455)&&!(Yg&268435455)||$l(hi,Ci)}function cg(e,t){var i=Vn;Vn|=2;var a=bC();(hi!==e||Ci!==t)&&(Na=null,Gu(e,t));do try{Z3();break}catch(c){wC(e,c)}while(!0);if(P1(),Vn=i,ag.current=a,Xr!==null)throw Error(Pt(261));return hi=null,Ci=0,Qr}function Z3(){for(;Xr!==null;)SC(Xr)}function W3(){for(;Xr!==null&&!yk();)SC(Xr)}function SC(e){var t=CC(e.alternate,e,jo);e.memoizedProps=e.pendingProps,t===null?EC(e):Xr=t,N1.current=null}function EC(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=B3(i,t),i!==null){i.flags&=32767,Xr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qr=6,Xr=null;return}}else if(i=D3(i,t,jo),i!==null){Xr=i;return}if(t=t.sibling,t!==null){Xr=t;return}Xr=t=e}while(t!==null);Qr===0&&(Qr=5)}function Du(e,t,i){var a=tr,c=hs.transition;try{hs.transition=null,tr=1,H3(e,t,i,a)}finally{hs.transition=c,tr=a}return null}function H3(e,t,i,a){do _h();while(Gl!==null);if(Vn&6)throw Error(Pt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Pt(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(Pk(e,p),e===hi&&(Xr=hi=null,Ci=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||am||(am=!0,PC(Zm,function(){return _h(),null})),p=(i.flags&15990)!==0,i.subtreeFlags&15990||p){p=hs.transition,hs.transition=null;var m=tr;tr=1;var u=Vn;Vn|=4,N1.current=null,U3(e,i),vC(i,e),f3(Lv),Hm=!!Ov,Lv=Ov=null,e.current=i,$3(i),vk(),Vn=u,tr=m,hs.transition=p}else e.current=i;if(am&&(am=!1,Gl=e,ug=c),p=e.pendingLanes,p===0&&(Jl=null),wk(i.stateNode),mo(e,Nr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(lg)throw lg=!1,e=r_,r_=null,e;return ug&1&&e.tag!==0&&_h(),p=e.pendingLanes,p&1?e===i_?vf++:(vf=0,i_=e):vf=0,uu(),null}function _h(){if(Gl!==null){var e=rT(ug),t=hs.transition,i=tr;try{if(hs.transition=null,tr=16>e?16:e,Gl===null)var a=!1;else{if(e=Gl,Gl=null,ug=0,Vn&6)throw Error(Pt(331));var c=Vn;for(Vn|=4,en=e.current;en!==null;){var p=en,m=p.child;if(en.flags&16){var u=p.deletions;if(u!==null){for(var S=0;S<u.length;S++){var P=u[S];for(en=P;en!==null;){var M=en;switch(M.tag){case 0:case 11:case 15:gf(8,M,p)}var b=M.child;if(b!==null)b.return=M,en=b;else for(;en!==null;){M=en;var C=M.sibling,O=M.return;if(mC(M),M===P){en=null;break}if(C!==null){C.return=O,en=C;break}en=O}}}var $=p.alternate;if($!==null){var j=$.child;if(j!==null){$.child=null;do{var he=j.sibling;j.sibling=null,j=he}while(j!==null)}}en=p}}if(p.subtreeFlags&2064&&m!==null)m.return=p,en=m;else e:for(;en!==null;){if(p=en,p.flags&2048)switch(p.tag){case 0:case 11:case 15:gf(9,p,p.return)}var q=p.sibling;if(q!==null){q.return=p.return,en=q;break e}en=p.return}}var X=e.current;for(en=X;en!==null;){m=en;var G=m.child;if(m.subtreeFlags&2064&&G!==null)G.return=m,en=G;else e:for(m=X;en!==null;){if(u=en,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Jg(9,u)}}catch(K){Or(u,u.return,K)}if(u===m){en=null;break e}var ae=u.sibling;if(ae!==null){ae.return=u.return,en=ae;break e}en=u.return}}if(Vn=c,uu(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(Vg,e)}catch{}a=!0}return a}finally{tr=i,hs.transition=t}}return!1}function I2(e,t,i){t=Ih(i,t),t=iC(e,t,1),e=ql(e,t,1),t=Ji(),e!==null&&(Yf(e,1,t),mo(e,t))}function Or(e,t,i){if(e.tag===3)I2(e,e,i);else for(;t!==null;){if(t.tag===3){I2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Jl===null||!Jl.has(a))){e=Ih(i,e),e=oC(t,e,1),t=ql(t,e,1),e=Ji(),t!==null&&(Yf(t,1,e),mo(t,e));break}}t=t.return}}function X3(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Ji(),e.pingedLanes|=e.suspendedLanes&i,hi===e&&(Ci&i)===i&&(Qr===4||Qr===3&&(Ci&130023424)===Ci&&500>Nr()-$1?Gu(e,0):U1|=i),mo(e,t)}function TC(e,t){t===0&&(e.mode&1?(t=Jp,Jp<<=1,!(Jp&130023424)&&(Jp=4194304)):t=1);var i=Ji();e=Ka(e,t),e!==null&&(Yf(e,t,i),mo(e,i))}function K3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),TC(e,i)}function q3(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Pt(314))}a!==null&&a.delete(t),TC(e,i)}var CC;CC=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||fo.current)ho=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return ho=!1,L3(e,t,i);ho=!!(e.flags&131072)}else ho=!1,br&&t.flags&1048576&&AT(t,eg,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Am(e,t),e=t.pendingProps;var c=Eh(t,Vi.current);vh(t,i),c=R1(null,t,a,e,c,i);var p=O1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,po(a)?(p=!0,Ym(t)):p=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,M1(t),c.updater=Kg,t.stateNode=c,c._reactInternals=t,Wv(t,a,e,i),t=Kv(null,t,a,!0,p,i)):(t.tag=0,br&&p&&S1(t),Hi(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Am(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=Y3(a),e=As(a,e),c){case 0:t=Xv(null,t,a,e,i);break e;case 1:t=v2(null,t,a,e,i);break e;case 11:t=g2(null,t,a,e,i);break e;case 14:t=y2(null,t,a,As(a.type,e),i);break e}throw Error(Pt(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),Xv(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),v2(e,t,a,c,i);case 3:e:{if(uC(t),e===null)throw Error(Pt(387));a=t.pendingProps,p=t.memoizedState,c=p.element,FT(e,t),rg(t,a,null,i);var m=t.memoizedState;if(a=m.element,p.isDehydrated)if(p={element:a,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=p,t.memoizedState=p,t.flags&256){c=Ih(Error(Pt(423)),t),t=_2(e,t,a,i,c);break e}else if(a!==c){c=Ih(Error(Pt(424)),t),t=_2(e,t,a,i,c);break e}else for(Do=Kl(t.stateNode.containerInfo.firstChild),Bo=t,br=!0,ks=null,i=LT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Th(),a===c){t=qa(e,t,i);break e}Hi(e,t,a,i)}t=t.child}return t;case 5:return DT(t),e===null&&Vv(t),a=t.type,c=t.pendingProps,p=e!==null?e.memoizedProps:null,m=c.children,Dv(a,c)?m=null:p!==null&&Dv(a,p)&&(t.flags|=32),lC(e,t),Hi(e,t,m,i),t.child;case 6:return e===null&&Vv(t),null;case 13:return cC(e,t,i);case 4:return k1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ch(t,null,a,i):Hi(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),g2(e,t,a,c,i);case 7:return Hi(e,t,t.pendingProps,i),t.child;case 8:return Hi(e,t,t.pendingProps.children,i),t.child;case 12:return Hi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,p=t.memoizedProps,m=c.value,cr(tg,a._currentValue),a._currentValue=m,p!==null)if(Ls(p.value,m)){if(p.children===c.children&&!fo.current){t=qa(e,t,i);break e}}else for(p=t.child,p!==null&&(p.return=t);p!==null;){var u=p.dependencies;if(u!==null){m=p.child;for(var S=u.firstContext;S!==null;){if(S.context===a){if(p.tag===1){S=Wa(-1,i&-i),S.tag=2;var P=p.updateQueue;if(P!==null){P=P.shared;var M=P.pending;M===null?S.next=S:(S.next=M.next,M.next=S),P.pending=S}}p.lanes|=i,S=p.alternate,S!==null&&(S.lanes|=i),Gv(p.return,i,t),u.lanes|=i;break}S=S.next}}else if(p.tag===10)m=p.type===t.type?null:p.child;else if(p.tag===18){if(m=p.return,m===null)throw Error(Pt(341));m.lanes|=i,u=m.alternate,u!==null&&(u.lanes|=i),Gv(m,i,t),m=p.sibling}else m=p.child;if(m!==null)m.return=p;else for(m=p;m!==null;){if(m===t){m=null;break}if(p=m.sibling,p!==null){p.return=m.return,m=p;break}m=m.return}p=m}Hi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,vh(t,i),c=ds(c),a=a(c),t.flags|=1,Hi(e,t,a,i),t.child;case 14:return a=t.type,c=As(a,t.pendingProps),c=As(a.type,c),y2(e,t,a,c,i);case 15:return sC(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:As(a,c),Am(e,t),t.tag=1,po(a)?(e=!0,Ym(t)):e=!1,vh(t,i),RT(t,a,c),Wv(t,a,c,i),Kv(null,t,a,!0,e,i);case 19:return hC(e,t,i);case 22:return aC(e,t,i)}throw Error(Pt(156,t.tag))};function PC(e,t){return QE(e,t)}function J3(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function us(e,t,i,a){return new J3(e,t,i,a)}function W1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Y3(e){if(typeof e=="function")return W1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h1)return 11;if(e===d1)return 14}return 2}function Ql(e,t){var i=e.alternate;return i===null?(i=us(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function zm(e,t,i,a,c,p){var m=2;if(a=e,typeof e=="function")W1(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case Qc:return Zu(i.children,c,p,t);case c1:m=8,c|=8;break;case gv:return e=us(12,i,t,c|2),e.elementType=gv,e.lanes=p,e;case yv:return e=us(13,i,t,c),e.elementType=yv,e.lanes=p,e;case vv:return e=us(19,i,t,c),e.elementType=vv,e.lanes=p,e;case OE:return Qg(i,c,p,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jE:m=10;break e;case RE:m=9;break e;case h1:m=11;break e;case d1:m=14;break e;case Ll:m=16,a=null;break e}throw Error(Pt(130,e==null?e:typeof e,""))}return t=us(m,i,t,c),t.elementType=e,t.type=a,t.lanes=p,t}function Zu(e,t,i,a){return e=us(7,e,a,t),e.lanes=i,e}function Qg(e,t,i,a){return e=us(22,e,a,t),e.elementType=OE,e.lanes=i,e.stateNode={isHidden:!1},e}function F0(e,t,i){return e=us(6,e,null,t),e.lanes=i,e}function j0(e,t,i){return t=us(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Q3(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p0(0),this.expirationTimes=p0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function H1(e,t,i,a,c,p,m,u,S){return e=new Q3(e,t,i,u,S),t===1?(t=1,p===!0&&(t|=8)):t=0,p=us(3,null,null,t),e.current=p,p.stateNode=e,p.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},M1(p),e}function e4(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function IC(e){if(!e)return nu;e=e._reactInternals;e:{if(ic(e)!==e||e.tag!==1)throw Error(Pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pt(171))}if(e.tag===1){var i=e.type;if(po(i))return PT(e,i,t)}return t}function AC(e,t,i,a,c,p,m,u,S){return e=H1(i,a,!0,e,c,p,m,u,S),e.context=IC(null),i=e.current,a=Ji(),c=Yl(i),p=Wa(a,c),p.callback=t??null,ql(i,p,c),e.current.lanes=c,Yf(e,c,a),mo(e,a),e}function ey(e,t,i,a){var c=t.current,p=Ji(),m=Yl(c);return i=IC(i),t.context===null?t.context=i:t.pendingContext=i,t=Wa(p,m),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=ql(c,t,m),e!==null&&(Os(e,c,m,p),Cm(e,c,m)),m}function hg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function A2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function X1(e,t){A2(e,t),(e=e.alternate)&&A2(e,t)}function t4(){return null}var MC=typeof reportError=="function"?reportError:function(e){console.error(e)};function K1(e){this._internalRoot=e}ty.prototype.render=K1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pt(409));ey(e,t,null,null)};ty.prototype.unmount=K1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yu(function(){ey(null,e,null,null)}),t[Xa]=null}};function ty(e){this._internalRoot=e}ty.prototype.unstable_scheduleHydration=function(e){if(e){var t=sT();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ul.length&&t!==0&&t<Ul[i].priority;i++);Ul.splice(i,0,e),i===0&&lT(e)}};function q1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ny(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function M2(){}function n4(e,t,i,a,c){if(c){if(typeof a=="function"){var p=a;a=function(){var P=hg(m);p.call(P)}}var m=AC(t,a,e,0,null,!1,!1,"",M2);return e._reactRootContainer=m,e[Xa]=m.current,jf(e.nodeType===8?e.parentNode:e),Yu(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var P=hg(S);u.call(P)}}var S=H1(e,0,!1,null,null,!1,!1,"",M2);return e._reactRootContainer=S,e[Xa]=S.current,jf(e.nodeType===8?e.parentNode:e),Yu(function(){ey(t,S,i,a)}),S}function ry(e,t,i,a,c){var p=i._reactRootContainer;if(p){var m=p;if(typeof c=="function"){var u=c;c=function(){var S=hg(m);u.call(S)}}ey(t,m,e,c)}else m=n4(i,t,e,c,a);return hg(m)}iT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Yd(t.pendingLanes);i!==0&&(m1(t,i|1),mo(t,Nr()),!(Vn&6)&&(Ah=Nr()+500,uu()))}break;case 13:Yu(function(){var a=Ka(e,1);if(a!==null){var c=Ji();Os(a,e,1,c)}}),X1(e,1)}};g1=function(e){if(e.tag===13){var t=Ka(e,134217728);if(t!==null){var i=Ji();Os(t,e,134217728,i)}X1(e,134217728)}};oT=function(e){if(e.tag===13){var t=Yl(e),i=Ka(e,t);if(i!==null){var a=Ji();Os(i,e,t,a)}X1(e,t)}};sT=function(){return tr};aT=function(e,t){var i=tr;try{return tr=e,t()}finally{tr=i}};Iv=function(e,t,i){switch(t){case"input":if(wv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=Hg(a);if(!c)throw Error(Pt(90));DE(a),wv(a,c)}}}break;case"textarea":NE(e,i);break;case"select":t=i.value,t!=null&&ph(e,!!i.multiple,t,!1)}};HE=V1;XE=Yu;var r4={usingClientEntryPoint:!1,Events:[ep,rh,Hg,ZE,WE,V1]},Xd={findFiberByHostInstance:Uu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},i4={bundleType:Xd.bundleType,version:Xd.version,rendererPackageName:Xd.rendererPackageName,rendererConfig:Xd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:el.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=JE(e),e===null?null:e.stateNode},findFiberByHostInstance:Xd.findFiberByHostInstance||t4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{Vg=lm.inject(i4),fa=lm}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r4;Vo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q1(t))throw Error(Pt(200));return e4(e,t,null,i)};Vo.createRoot=function(e,t){if(!q1(e))throw Error(Pt(299));var i=!1,a="",c=MC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=H1(e,1,!1,null,null,i,!1,a,c),e[Xa]=t.current,jf(e.nodeType===8?e.parentNode:e),new K1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pt(188)):(e=Object.keys(e).join(","),Error(Pt(268,e)));return e=JE(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return Yu(e)};Vo.hydrate=function(e,t,i){if(!ny(t))throw Error(Pt(200));return ry(null,e,t,!0,i)};Vo.hydrateRoot=function(e,t,i){if(!q1(e))throw Error(Pt(405));var a=i!=null&&i.hydratedSources||null,c=!1,p="",m=MC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(m=i.onRecoverableError)),t=AC(t,null,e,1,i??null,c,!1,p,m),e[Xa]=t.current,jf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new ty(t)};Vo.render=function(e,t,i){if(!ny(t))throw Error(Pt(200));return ry(null,e,t,!1,i)};Vo.unmountComponentAtNode=function(e){if(!ny(e))throw Error(Pt(40));return e._reactRootContainer?(Yu(function(){ry(null,null,e,!1,function(){e._reactRootContainer=null,e[Xa]=null})}),!0):!1};Vo.unstable_batchedUpdates=V1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!ny(i))throw Error(Pt(200));if(e==null||e._reactInternals===void 0)throw Error(Pt(38));return ry(e,t,i,!1,a)};Vo.version="18.2.0-next-9e3b772b8-20220608";function kC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kC)}catch(e){console.error(e)}}kC(),AE.exports=Vo;var J1=AE.exports;const o4=qf(J1);var zC={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.5.2/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})(Nl,function(){var i={},a={};function c(m,u,S){if(a[m]=S,m==="index"){var P="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",M={};return a.shared(M),a.index(i,M),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}c("shared",["exports"],function(m){function u(o,n,s,h){return new(s||(s=Promise))(function(g,_){function x(z){try{I(h.next(z))}catch(U){_(U)}}function w(z){try{I(h.throw(z))}catch(U){_(U)}}function I(z){var U;z.done?g(z.value):(U=z.value,U instanceof s?U:new s(function(J){J(U)})).then(x,w)}I((h=h.apply(o,n||[])).next())})}function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var P=M;function M(o,n){this.x=o,this.y=n}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),g=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},M.convert=function(o){return o instanceof M?o:Array.isArray(o)?new M(o[0],o[1]):o};var b=S(P),C=O;function O(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}O.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,w=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var $=S(C);let j,he;function q(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function X(){if(he==null&&(he=!1,q())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const g=4*h;n.fillStyle=`rgb(${g},${g+1},${g+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){he=!0;break}}}return he||!1}function G(o,n,s,h){const g=new $(o,n,s,h);return _=>g.solve(_)}const ae=G(.25,.1,.25,1);function K(o,n,s){return Math.min(s,Math.max(n,o))}function Z(o,n,s){const h=s-n,g=((o-n)%h+h)%h+n;return g===n?s:g}function T(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let L=1;function B(o,n,s){const h={};for(const g in o)h[g]=n.call(this,o[g],g,o);return h}function te(o,n,s){const h={};for(const g in o)n.call(this,o[g],g,o)&&(h[g]=o[g]);return h}function H(o){return Array.isArray(o)?o.map(H):typeof o=="object"&&o?B(o,H):o}const ve={};function _e(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function pe(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ce=null;function ee(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function fe(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(o,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),I=new Uint8ClampedArray(h*g*4);if(yield _.copyTo(I,function(z,U,J,ne,le){const me=4*Math.max(-U,0),be=(Math.max(0,J)-J)*ne*4+me,Re=4*ne,Ne=Math.max(0,U),nt=Math.max(0,J);return{rect:{x:Ne,y:nt,width:Math.min(z.width,U+ne)-Ne,height:Math.min(z.height,J+le)-nt},layout:[{offset:be,stride:Re}]}}(o,n,s,h,g)),w)for(let z=0;z<I.length;z+=4){const U=I[z];I[z]=I[z+2],I[z+2]=U}return I}finally{_.close()}})}let Se,Ce;const Ue="AbortError";function Ae(){return new Error(Ue)}const Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ze(o){return Fe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const We="global-dispatcher";class it extends Error{constructor(n,s,h,g){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=g}}const ct=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,vt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=Ze(o.url);if(h)return h(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:We},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ct())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return u(this,void 0,void 0,function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ct(),signal:g.signal});h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const z=yield x.blob();throw new it(x.status,x.statusText,h.url,z)}let w;w=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const I=yield w;if(g.signal.aborted)throw Ae();return{data:I,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:We},n)}var s;return function(h,g){return new Promise((_,x)=>{var w;const I=new XMLHttpRequest;I.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(I.responseType="arraybuffer");for(const z in h.headers)I.setRequestHeader(z,h.headers[z]);h.type==="json"&&(I.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=h.credentials==="include",I.onerror=()=>{x(new Error(I.statusText))},I.onload=()=>{if(!g.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let z=I.response;if(h.type==="json")try{z=JSON.parse(I.response)}catch(U){return void x(U)}_({data:z,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const z=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});x(new it(I.status,I.statusText,h.url,z))}},g.signal.addEventListener("abort",()=>{I.abort(),x(Ae())}),I.send(h.body)})}(o,n)};function Mt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function pt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function xt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Wt{constructor(n,s={}){T(this,s),this.type=n}}class Ht extends Wt{constructor(n,s={}){super("error",T({error:n},s))}}class ln{on(n,s){return this._listeners=this._listeners||{},pt(n,s,this._listeners),this}off(n,s){return xt(n,s,this._listeners),xt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Wt(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of g)w.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of _)xt(h,w,this._oneTimeListeners),w.call(this,n);const x=this._eventedParent;x&&(T(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Ht&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const _n=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function un(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return _n.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Vt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Vt(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Vt(o[s],n[s]))return!1;return!0}return o===n}function Ee(o,n){o.push(n)}function N(o,n,s){Ee(s,{command:"addSource",args:[o,n[o]]})}function D(o,n,s){Ee(n,{command:"removeSource",args:[o]}),s[o]=!0}function ge(o,n,s,h){D(o,s,h),N(o,n,s)}function He(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Vt(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Vt(o[s][h],n[s][h]))return!1;return!0}function et(o,n,s,h,g,_){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Vt(o[x],n[x])||s.push({command:_,args:[h,x,n[x],g]}))}function ht(o){return o.id}function ue(o,n){return o[n.id]=n,o}class k{constructor(n,s,h,g){this.message=(n?`${n}: `:"")+h,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function V(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Te extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Ve{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,g]of s)this.bindings[h]=g}concat(n){return new Ve(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const rt={kind:"null"},Ge={kind:"number"},Et={kind:"string"},It={kind:"boolean"},yn={kind:"color"},Sn={kind:"object"},zt={kind:"value"},zr={kind:"collator"},ei={kind:"formatted"},Ii={kind:"padding"},Ur={kind:"resolvedImage"},ze={kind:"variableAnchorOffsetCollection"};function se(o,n){return{kind:"array",itemType:o,N:n}}function ie(o){if(o.kind==="array"){const n=ie(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const we=[rt,Ge,Et,It,yn,ei,Sn,se(zt),Ii,Ur,ze];function Ie(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ie(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of we)if(!Ie(s,n))return null}}return`Expected ${ie(o)} but found ${ie(n)} instead.`}function Me(o,n){return n.some(s=>s.kind===o.kind)}function Be(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function qe(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const De=.96422,st=.82521,dt=4/29,ot=6/29,Ct=3*ot*ot,Kt=ot*ot*ot,tn=Math.PI/180,pn=180/Math.PI;function En(o){return(o%=360)<0&&(o+=360),o}function hn([o,n,s,h]){let g,_;const x=Jn((.2225045*(o=Un(o))+.7168786*(n=Un(n))+.0606169*(s=Un(s)))/1);o===n&&n===s?g=_=x:(g=Jn((.4360747*o+.3850649*n+.1430804*s)/De),_=Jn((.0139322*o+.0971045*n+.7141733*s)/st));const w=116*x-16;return[w<0?0:w,500*(g-x),200*(x-_),h]}function Un(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Jn(o){return o>Kt?Math.pow(o,1/3):o/Ct+dt}function nr([o,n,s,h]){let g=(o+16)/116,_=isNaN(n)?g:g+n/500,x=isNaN(s)?g:g-s/200;return g=1*Bn(g),_=De*Bn(_),x=st*Bn(x),[wn(3.1338561*_-1.6168667*g-.4906146*x),wn(-.9787684*_+1.9161415*g+.033454*x),wn(.0719453*_-.2289914*g+1.4052427*x),h]}function wn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Bn(o){return o>ot?o*o*o:Ct*(o-dt)}function Yn(o){return parseInt(o.padEnd(2,o),16)/255}function Er(o,n){return $r(n?o/100:o,0,1)}function $r(o,n,s){return Math.min(Math.max(n,o),s)}function Vr(o){return!o.some(Number.isNaN)}const Ho={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class kn{constructor(n,s,h,g=1,_=!0){this.r=n,this.g=s,this.b=h,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[n,s,h,g]))}static parse(n){if(n instanceof kn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Ho[h];if(g){const[x,w,I]=g;return[x/255,w/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let w=1;return[Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+=x)),Yn(h.slice(w,w+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,I,z,U,J,ne,le,me,be,Re,Ne,nt]=x,Ke=[U||" ",le||" ",Re].join("");if(Ke==="  "||Ke==="  /"||Ke===",,"||Ke===",,,"){const Ye=[z,ne,be].join(""),lt=Ye==="%%%"?100:Ye===""?255:0;if(lt){const _t=[$r(+I/lt,0,1),$r(+J/lt,0,1),$r(+me/lt,0,1),Ne?Er(+Ne,nt):1];if(Vr(_t))return _t}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,w,I,z,U,J,ne,le,me]=_,be=[I||" ",U||" ",ne].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Re=[+w,$r(+z,0,100),$r(+J,0,100),le?Er(+le,me):1];if(Vr(Re))return function([Ne,nt,Ke,Ye]){function lt(_t){const Dt=(_t+Ne/30)%12,on=nt*Math.min(Ke,1-Ke);return Ke-on*Math.max(-1,Math.min(Dt-3,9-Dt,1))}return Ne=En(Ne),nt/=100,Ke/=100,[lt(0),lt(8),lt(4),Ye]}(Re)}}}(n);return s?new kn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[n/_,s/_,h/_,g])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,g,_]=hn(n),x=Math.sqrt(h*h+g*g);return[Math.round(1e4*x)?En(Math.atan2(g,h)*pn):NaN,x,s,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,g]=this.rgb;return`rgba(${[n,s,h].map(_=>Math.round(255*_)).join(",")},${g})`}}kn.black=new kn(0,0,0,1),kn.white=new kn(1,1,1,1),kn.transparent=new kn(0,0,0,0),kn.red=new kn(1,0,0,1);class nl{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Tn{constructor(n,s,h,g,_){this.text=n,this.image=s,this.scale=h,this.fontStack=g,this.textColor=_}}class Tr{constructor(n){this.sections=n}static fromString(n){return new Tr([new Tn(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Tr?n:Tr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class fi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof fi)return n;if(typeof n=="number")return new fi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new fi(n)}}toString(){return JSON.stringify(this.values)}}const Vh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof pi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],g=n[s+1];if(typeof h!="string"||!Vh.has(h)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new pi(n)}}toString(){return JSON.stringify(this.values)}}class Gr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Gr({name:n,available:!1}):null}}function rl(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mi(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof kn||o instanceof nl||o instanceof Tr||o instanceof fi||o instanceof pi||o instanceof Gr)return!0;if(Array.isArray(o)){for(const n of o)if(!mi(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!mi(o[n]))return!1;return!0}return!1}function vr(o){if(o===null)return rt;if(typeof o=="string")return Et;if(typeof o=="boolean")return It;if(typeof o=="number")return Ge;if(o instanceof kn)return yn;if(o instanceof nl)return zr;if(o instanceof Tr)return ei;if(o instanceof fi)return Ii;if(o instanceof pi)return ze;if(o instanceof Gr)return Ur;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const g=vr(h);if(s){if(s===g)continue;s=zt;break}s=g}return se(s||zt,n)}return Sn}function go(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof kn||o instanceof Tr||o instanceof fi||o instanceof pi||o instanceof Gr?o.toString():JSON.stringify(o)}class ps{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!mi(n[1]))return s.error("invalid value");const h=n[1];let g=vr(h);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new ps(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class hr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const il={string:Et,number:Ge,boolean:It,object:Sn};class _r{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,g=1;const _=n[0];if(_==="array"){let w,I;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in il)||z==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=il[z],g++}else w=zt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],g++}h=se(w,I)}else{if(!il[_])throw new Error(`Types doesn't contain name = ${_}`);h=il[_]}const x=[];for(;g<n.length;g++){const w=s.parse(n[g],g,zt);if(!w)return null;x.push(w)}return new _r(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ie(this.type,vr(h)))return h;if(s===this.args.length-1)throw new hr(`Expected value to be of type ${ie(this.type)}, but found ${ie(vr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const va={"to-boolean":It,"to-color":yn,"to-number":Ge,"to-string":Et};class Xo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!va[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const g=va[h],_=[];for(let x=1;x<n.length;x++){const w=s.parse(n[x],x,zt);if(!w)return null;_.push(w)}return new Xo(g,_)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const g of this.args){if(s=g.evaluate(n),h=null,s instanceof kn)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:rl(s[0],s[1],s[2],s[3]),!h))return new kn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new hr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const g=fi.parse(s);if(g)return g}throw new hr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const g=pi.parse(s);if(g)return g}throw new hr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new hr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Tr.fromString(go(this.args[0].evaluate(n)));case"resolvedImage":return Gr.fromString(go(this.args[0].evaluate(n)));default:return go(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const cu=["Unknown","Point","LineString","Polygon"];class _a{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?cu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=kn.parse(n)),s}}class Ko{constructor(n,s,h=[],g,_=new Ve,x=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=s}parse(n,s,h,g,_={}){return s?this.concat(s,h,g)._parse(n,_):this._parse(n,_)}_parse(n,s){function h(g,_,x){return x==="assert"?new _r(_,[g]):x==="coerce"?new Xo(_,[g]):g}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=n[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,I=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||I.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(w.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(w,I))return null}else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"assert")}if(!(x instanceof ps)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new _a;try{x=new ps(x.type,x.evaluate(w))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const g=typeof n=="number"?this.path.concat(n):this.path,_=h?this.scope.concat(h):this.scope;return new Ko(this.registry,this._isConstant,g,s||null,_,this.errors)}error(n,...s){const h=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new Te(h,n))}checkSubtype(n,s){const h=Ie(n,s);return h&&this.error(h),h}}class In{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const w=s.parse(n[_+1],_+1);if(!w)return null;h.push([x,w])}const g=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return g?new In(h,g):null}outputDefined(){return this.result.outputDefined()}}class ol{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ol(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class hu{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ge),g=s.parse(n[2],2,se(s.expectedType||zt));return h&&g?new hu(g.type.itemType,h,g):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new hr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new hr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new hr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Kr{constructor(n,s){this.type=It,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,zt),g=s.parse(n[2],2,zt);return h&&g?Me(h.type,[It,Et,Ge,rt,zt])?new Kr(h,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Be(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${ie(vr(s))} instead.`);if(!Be(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${ie(vr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class sl{constructor(n,s,h){this.type=Ge,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,zt),g=s.parse(n[2],2,zt);if(!h||!g)return null;if(!Me(h.type,[It,Et,Ge,rt,zt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Ge);return _?new sl(h,g,_):null}return new sl(h,g)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Be(s,["boolean","string","number","null"]))throw new hr(`Expected first argument to be of type boolean, string, number or null, but found ${ie(vr(s))} instead.`);if(!Be(h,["string","array"]))throw new hr(`Expected second argument to be of type array or string, but found ${ie(vr(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(n);return h.indexOf(s,g)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class al{constructor(n,s,h,g,_,x){this.inputType=n,this.type=s,this.input=h,this.cases=g,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},x=[];for(let z=2;z<n.length-1;z+=2){let U=n[z];const J=n[z+1];Array.isArray(U)||(U=[U]);const ne=s.concat(z);if(U.length===0)return ne.error("Expected at least one branch label.");for(const me of U){if(typeof me!="number"&&typeof me!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof me=="number"&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof me=="number"&&Math.floor(me)!==me)return ne.error("Numeric branch labels must be integer values.");if(h){if(ne.checkSubtype(h,vr(me)))return null}else h=vr(me);if(_[String(me)]!==void 0)return ne.error("Branch labels must be unique.");_[String(me)]=x.length}const le=s.parse(J,z,g);if(!le)return null;g=g||le.type,x.push(le)}const w=s.parse(n[1],1,zt);if(!w)return null;const I=s.parse(n[n.length-1],n.length-1,g);return I?w.type.kind!=="value"&&s.concat(1).checkSubtype(h,w.type)?null:new al(h,g,w,_,x,I):null}evaluate(n){const s=this.input.evaluate(n);return(vr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ll{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const g=[];for(let x=1;x<n.length-1;x+=2){const w=s.parse(n[x],x,It);if(!w)return null;const I=s.parse(n[x+1],x+1,h);if(!I)return null;g.push([w,I]),h=h||I.type}const _=s.parse(n[n.length-1],n.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new ll(h,g,_)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class ul{constructor(n,s,h,g){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=g}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,zt),g=s.parse(n[2],2,Ge);if(!h||!g)return null;if(!Me(h.type,[se(zt),Et,zt]))return s.error(`Expected first argument to be of type array or string, but found ${ie(h.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Ge);return _?new ul(h.type,h,g,_):null}return new ul(h.type,h,g)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Be(s,["string","array"]))throw new hr(`Expected first argument to be of type array or string, but found ${ie(vr(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(n);return s.slice(h,g)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function xa(o,n){const s=o.length-1;let h,g,_=0,x=s,w=0;for(;_<=x;)if(w=Math.floor((_+x)/2),h=o[w],g=o[w+1],h<=n){if(w===s||n<g)return w;_=w+1}else{if(!(h>n))throw new hr("Input is not a number.");x=w-1}return 0}class ms{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of h)this.labels.push(g),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Ge);if(!h)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const w=x===1?-1/0:n[x],I=n[x+1],z=x,U=x+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(g.length&&g[g.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const J=s.parse(I,U,_);if(!J)return null;_=_||J.type,g.push([w,J])}return new ms(_,h,g)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;return g>=s[_-1]?h[_-1].evaluate(n):h[xa(s,g)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function du(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var lc=wa;function wa(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}wa.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var g=this.sampleCurveX(s)-o;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,w=1;for(s=o,h=0;h<20&&(g=this.sampleCurveX(s),!(Math.abs(g-o)<n));h++)o>g?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Gh=du(lc);function gi(o,n,s){return o+s*(n-o)}function ba(o,n,s){return o.map((h,g)=>gi(h,n[g],s))}const yi={number:gi,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[g,_,x,w]=ba(o.rgb,n.rgb,s);return new kn(g,_,x,w,!1)}case"hcl":{const[g,_,x,w]=o.hcl,[I,z,U,J]=n.hcl;let ne,le;if(isNaN(g)||isNaN(I))isNaN(g)?isNaN(I)?ne=NaN:(ne=I,x!==1&&x!==0||(le=z)):(ne=g,U!==1&&U!==0||(le=_));else{let nt=I-g;I>g&&nt>180?nt-=360:I<g&&g-I>180&&(nt+=360),ne=g+s*nt}const[me,be,Re,Ne]=function([nt,Ke,Ye,lt]){return nt=isNaN(nt)?0:nt*tn,nr([Ye,Math.cos(nt)*Ke,Math.sin(nt)*Ke,lt])}([ne,le??gi(_,z,s),gi(x,U,s),gi(w,J,s)]);return new kn(me,be,Re,Ne,!1)}case"lab":{const[g,_,x,w]=nr(ba(o.lab,n.lab,s));return new kn(g,_,x,w,!1)}}},array:ba,padding:function(o,n,s){return new fi(ba(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,g=n.values;if(h.length!==g.length)throw new hr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const _=[];for(let x=0;x<h.length;x+=2){if(h[x]!==g[x])throw new hr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${g[x]}`);_.push(h[x]);const[w,I]=h[x+1],[z,U]=g[x+1];_.push([gi(w,z,s),gi(I,U,s)])}return new pi(_)}};class vi{constructor(n,s,h,g,_){this.type=n,this.operator=s,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[x,w]of _)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(n,s,h,g){let _=0;if(n.name==="exponential")_=Sa(s,n.base,h,g);else if(n.name==="linear")_=Sa(s,1,h,g);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new Gh(x[0],x[1],x[2],x[3]).solve(Sa(s,1,h,g))}return _}static parse(n,s){let[h,g,_,...x]=n;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const z=g[1];if(typeof z!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:z}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const z=g.slice(1);if(z.length!==4||z.some(U=>typeof U!="number"||U<0||U>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,Ge),!_)return null;const w=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=yn:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let z=0;z<x.length;z+=2){const U=x[z],J=x[z+1],ne=z+3,le=z+4;if(typeof U!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(w.length&&w[w.length-1][0]>=U)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const me=s.parse(J,le,I);if(!me)return null;I=I||me.type,w.push([U,me])}return qe(I,Ge)||qe(I,yn)||qe(I,Ii)||qe(I,ze)||qe(I,se(Ge))?new vi(I,h,g,_,w):s.error(`Type ${ie(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return h[0].evaluate(n);const _=s.length;if(g>=s[_-1])return h[_-1].evaluate(n);const x=xa(s,g),w=vi.interpolationFactor(this.interpolation,g,s[x],s[x+1]),I=h[x].evaluate(n),z=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return yi[this.type.kind](I,z,w);case"interpolate-hcl":return yi.color(I,z,w,"hcl");case"interpolate-lab":return yi.color(I,z,w,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Sa(o,n,s,h){const g=h-s,_=o-s;return g===0?0:n===1?_/g:(Math.pow(n,_)-1)/(Math.pow(n,g)-1)}class Ea{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const g=s.expectedType;g&&g.kind!=="value"&&(h=g);const _=[];for(const w of n.slice(1)){const I=s.parse(w,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,_.push(I)}if(!h)throw new Error("No output type");const x=g&&_.some(w=>Ie(g,w.type));return new Ea(x?zt:h,_)}evaluate(n){let s,h=null,g=0;for(const _ of this.args)if(g++,h=_.evaluate(n),h&&h instanceof Gr&&!h.available&&(s||(s=h.name),h=null,g===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function uc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function cc(o,n,s,h){return h.compare(n,s)===0}function gs(o,n,s){const h=o!=="=="&&o!=="!=";return class FC{constructor(_,x,w){this.type=It,this.lhs=_,this.rhs=x,this.collator=w,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const w=_[0];let I=x.parse(_[1],1,zt);if(!I)return null;if(!uc(w,I.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${ie(I.type)}'.`);let z=x.parse(_[2],2,zt);if(!z)return null;if(!uc(w,z.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${ie(z.type)}'.`);if(I.type.kind!==z.type.kind&&I.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${ie(I.type)}' and '${ie(z.type)}'.`);h&&(I.type.kind==="value"&&z.type.kind!=="value"?I=new _r(z.type,[I]):I.type.kind!=="value"&&z.type.kind==="value"&&(z=new _r(I.type,[z])));let U=null;if(_.length===4){if(I.type.kind!=="string"&&z.type.kind!=="string"&&I.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(U=x.parse(_[3],3,zr),!U)return null}return new FC(I,z,U)}evaluate(_){const x=this.lhs.evaluate(_),w=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const I=vr(x),z=vr(w);if(I.kind!==z.kind||I.kind!=="string"&&I.kind!=="number")throw new hr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${I.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=vr(x),z=vr(w);if(I.kind!=="string"||z.kind!=="string")return n(_,x,w)}return this.collator?s(_,x,w,this.collator.evaluate(_)):n(_,x,w)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const cl=gs("==",function(o,n,s){return n===s},cc),Zh=gs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!cc(0,n,s,h)}),Wh=gs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),hc=gs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),dc=gs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),fc=gs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class hl{constructor(n,s,h){this.type=zr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const g=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,It);if(!g)return null;const _=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,It);if(!_)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new hl(g,_,x)}evaluate(n){return new nl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class dl{constructor(n,s,h,g,_){this.type=Et,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ge);if(!h)return null;const g=n[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,Et),!_))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,Et),!x))return null;let w=null;if(g["min-fraction-digits"]&&(w=s.parse(g["min-fraction-digits"],1,Ge),!w))return null;let I=null;return g["max-fraction-digits"]&&(I=s.parse(g["max-fraction-digits"],1,Ge),!I)?null:new dl(h,_,x,w,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class fl{constructor(n){this.type=ei,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=n.length-1;++x){const w=n[x];if(_&&typeof w=="object"&&!Array.isArray(w)){_=!1;let I=null;if(w["font-scale"]&&(I=s.parse(w["font-scale"],1,Ge),!I))return null;let z=null;if(w["text-font"]&&(z=s.parse(w["text-font"],1,se(Et)),!z))return null;let U=null;if(w["text-color"]&&(U=s.parse(w["text-color"],1,yn),!U))return null;const J=g[g.length-1];J.scale=I,J.font=z,J.textColor=U}else{const I=s.parse(n[x],1,zt);if(!I)return null;const z=I.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:I,scale:null,font:null,textColor:null})}}return new fl(g)}evaluate(n){return new Tr(this.sections.map(s=>{const h=s.content.evaluate(n);return vr(h)===Ur?new Tn("",h,null,null,null):new Tn(go(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class fu{constructor(n){this.type=Ur,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Et);return h?new fu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Gr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class pl{constructor(n){this.type=Ge,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ie(h.type)} instead.`):new pl(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new hr(`Expected value to be of type string or array, but found ${ie(vr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const ro=8192;function pu(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,g=Math.pow(2,n.z);return[Math.round(s*g*ro),Math.round(h*g*ro)]}function Bs(o,n){const s=Math.pow(2,n.z);return[(g=(o[0]/ro+n.x)/s,360*g-180),(h=(o[1]/ro+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function An(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Ns(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Hh(o,n,s){const h=o[0]-n[0],g=o[1]-n[1],_=o[0]-s[0],x=o[1]-s[1];return h*x-_*g==0&&h*_<=0&&g*x<=0}function Us(o,n,s,h){return(g=[h[0]-s[0],h[1]-s[1]])[0]*(_=[n[0]-o[0],n[1]-o[1]])[1]-g[1]*_[0]!=0&&!(!mc(o,n,s,h)||!mc(s,h,o,n));var g,_}function Xh(o,n,s){for(const h of s)for(let g=0;g<h.length-1;++g)if(Us(o,n,h[g],h[g+1]))return!0;return!1}function $s(o,n,s=!1){let h=!1;for(const w of n)for(let I=0;I<w.length-1;I++){if(Hh(o,w[I],w[I+1]))return s;(_=w[I])[1]>(g=o)[1]!=(x=w[I+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var g,_,x;return h}function Kh(o,n){for(const s of n)if($s(o,s))return!0;return!1}function pc(o,n){for(const s of o)if(!$s(s,n))return!1;for(let s=0;s<o.length-1;++s)if(Xh(o[s],o[s+1],n))return!1;return!0}function qh(o,n){for(const s of n)if(pc(o,s))return!0;return!1}function mc(o,n,s,h){const g=h[0]-s[0],_=h[1]-s[1],x=(o[0]-s[0])*_-g*(o[1]-s[1]),w=(n[0]-s[0])*_-g*(n[1]-s[1]);return x>0&&w<0||x<0&&w>0}function ml(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=[];for(let x=0;x<o[g].length;x++){const w=pu(o[g][x],s);An(n,w),_.push(w)}h.push(_)}return h}function gl(o,n,s){const h=[];for(let g=0;g<o.length;g++){const _=ml(o[g],n,s);h.push(_)}return h}function gc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const g=.5*h;let _=o[0]-s[0]>g?-h:s[0]-o[0]>g?h:0;_===0&&(_=o[0]-s[2]>g?-h:s[2]-o[0]>g?h:0),o[0]+=_}An(n,o)}function yc(o,n,s,h){const g=Math.pow(2,h.z)*ro,_=[h.x*ro,h.y*ro],x=[];for(const w of o)for(const I of w){const z=[I.x+_[0],I.y+_[1]];gc(z,n,s,g),x.push(z)}return x}function vc(o,n,s,h){const g=Math.pow(2,h.z)*ro,_=[h.x*ro,h.y*ro],x=[];for(const I of o){const z=[];for(const U of I){const J=[U.x+_[0],U.y+_[1]];An(n,J),z.push(J)}x.push(z)}if(n[2]-n[0]<=g/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const I of x)for(const z of I)gc(z,n,s,g)}var w;return x}class ys{constructor(n,s){this.type=It,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(mi(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const g=[];for(const _ of h.features){const{type:x,coordinates:w}=_.geometry;x==="Polygon"&&g.push(w),x==="MultiPolygon"&&g.push(...w)}if(g.length)return new ys(h,{type:"MultiPolygon",coordinates:g})}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ys(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ys(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=ml(h.coordinates,_,x),I=yc(s.geometry(),g,_,x);if(!Ns(g,_))return!1;for(const z of I)if(!$s(z,w))return!1}if(h.type==="MultiPolygon"){const w=gl(h.coordinates,_,x),I=yc(s.geometry(),g,_,x);if(!Ns(g,_))return!1;for(const z of I)if(!Kh(z,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=ml(h.coordinates,_,x),I=vc(s.geometry(),g,_,x);if(!Ns(g,_))return!1;for(const z of I)if(!pc(z,w))return!1}if(h.type==="MultiPolygon"){const w=gl(h.coordinates,_,x),I=vc(s.geometry(),g,_,x);if(!Ns(g,_))return!1;for(const z of I)if(!qh(z,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let mu=class{constructor(o=[],n=Jh){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:s}=this,h=n[o];for(;o>0;){const g=o-1>>1,_=n[g];if(s(h,_)>=0)break;n[o]=_,o=g}n[o]=h}_down(o){const{data:n,compare:s}=this,h=this.length>>1,g=n[o];for(;o<h;){let _=1+(o<<1),x=n[_];const w=_+1;if(w<this.length&&s(n[w],x)<0&&(_=w,x=n[w]),s(x,g)>=0)break;n[o]=x,o=_}n[o]=g}};function Jh(o,n){return o<n?-1:o>n?1:0}function Yh(o,n,s,h,g){_c(o,n,s,h||o.length-1,g||yl)}function _c(o,n,s,h,g){for(;h>s;){if(h-s>600){var _=h-s+1,x=n-s+1,w=Math.log(_),I=.5*Math.exp(2*w/3),z=.5*Math.sqrt(w*I*(_-I)/_)*(x-_/2<0?-1:1);_c(o,n,Math.max(s,Math.floor(n-x*I/_+z)),Math.min(h,Math.floor(n+(_-x)*I/_+z)),g)}var U=o[n],J=s,ne=h;for(Ta(o,s,n),g(o[h],U)>0&&Ta(o,s,h);J<ne;){for(Ta(o,J,ne),J++,ne--;g(o[J],U)<0;)J++;for(;g(o[ne],U)>0;)ne--}g(o[s],U)===0?Ta(o,s,ne):Ta(o,++ne,h),ne<=n&&(s=ne+1),n<=ne&&(h=ne-1)}}function Ta(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function yl(o,n){return o<n?-1:o>n?1:0}function vl(o,n){if(o.length<=1)return[o];const s=[];let h,g;for(const _ of o){const x=xc(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(h&&s.push(h),h=[_]):h.push(_))}if(h&&s.push(h),n>1)for(let _=0;_<s.length;_++)s[_].length<=n||(Yh(s[_],n,1,s[_].length-1,Vs),s[_]=s[_].slice(0,n));return s}function Vs(o,n){return n.area-o.area}function xc(o){let n=0;for(let s,h,g=0,_=o.length,x=_-1;g<_;x=g++)s=o[g],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}const Gi=1/298.257223563,wc=Gi*(2-Gi),bc=Math.PI/180;class gu{constructor(n){const s=6378.137*bc*1e3,h=Math.cos(n*bc),g=1/(1-wc*(1-h*h)),_=Math.sqrt(g);this.kx=s*_*h,this.ky=s*_*g*(1-wc)}distance(n,s){const h=this.wrap(n[0]-s[0])*this.kx,g=(n[1]-s[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(n,s){let h,g,_,x,w=1/0;for(let I=0;I<n.length-1;I++){let z=n[I][0],U=n[I][1],J=this.wrap(n[I+1][0]-z)*this.kx,ne=(n[I+1][1]-U)*this.ky,le=0;J===0&&ne===0||(le=(this.wrap(s[0]-z)*this.kx*J+(s[1]-U)*this.ky*ne)/(J*J+ne*ne),le>1?(z=n[I+1][0],U=n[I+1][1]):le>0&&(z+=J/this.kx*le,U+=ne/this.ky*le)),J=this.wrap(s[0]-z)*this.kx,ne=(s[1]-U)*this.ky;const me=J*J+ne*ne;me<w&&(w=me,h=z,g=U,_=I,x=le)}return{point:[h,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Sc(o,n){return n[0]-o[0]}function Gs(o){return o[1]-o[0]+1}function yo(o,n){return o[1]>=o[0]&&o[1]<n}function qo(o,n){if(o[0]>o[1])return[null,null];const s=Gs(o);if(n){if(s===2)return[o,null];const g=Math.floor(s/2);return[[o[0],o[0]+g],[o[0]+g,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function yu(o,n){if(!yo(n,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)An(s,o[h]);return s}function vu(o){const n=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)An(n,h);return n}function Ca(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function _l(o,n,s){if(!Ca(o)||!Ca(n))return NaN;let h=0,g=0;return o[2]<n[0]&&(h=n[0]-o[2]),o[0]>n[2]&&(h=o[0]-n[2]),o[1]>n[3]&&(g=o[1]-n[3]),o[3]<n[1]&&(g=n[1]-o[3]),s.distance([0,0],[h,g])}function Gn(o,n,s){const h=s.pointOnLine(n,o);return s.distance(o,h.point)}function _u(o,n,s,h,g){const _=Math.min(Gn(o,[s,h],g),Gn(n,[s,h],g)),x=Math.min(Gn(s,[o,n],g),Gn(h,[o,n],g));return Math.min(_,x)}function bn(o,n,s,h,g){if(!yo(n,o.length)||!yo(h,s.length))return 1/0;let _=1/0;for(let x=n[0];x<n[1];++x){const w=o[x],I=o[x+1];for(let z=h[0];z<h[1];++z){const U=s[z],J=s[z+1];if(Us(w,I,U,J))return 0;_=Math.min(_,_u(w,I,U,J,g))}}return _}function Zs(o,n,s,h,g){if(!yo(n,o.length)||!yo(h,s.length))return NaN;let _=1/0;for(let x=n[0];x<=n[1];++x)for(let w=h[0];w<=h[1];++w)if(_=Math.min(_,g.distance(o[x],s[w])),_===0)return _;return _}function Ln(o,n,s){if($s(o,n,!0))return 0;let h=1/0;for(const g of n){const _=g[0],x=g[g.length-1];if(_!==x&&(h=Math.min(h,Gn(o,[x,_],s)),h===0))return h;const w=s.pointOnLine(g,o);if(h=Math.min(h,s.distance(o,w.point)),h===0)return h}return h}function Kn(o,n,s,h){if(!yo(n,o.length))return NaN;for(let _=n[0];_<=n[1];++_)if($s(o[_],s,!0))return 0;let g=1/0;for(let _=n[0];_<n[1];++_){const x=o[_],w=o[_+1];for(const I of s)for(let z=0,U=I.length,J=U-1;z<U;J=z++){const ne=I[J],le=I[z];if(Us(x,w,ne,le))return 0;g=Math.min(g,_u(x,w,ne,le,h))}}return g}function Ws(o,n){for(const s of o)for(const h of s)if($s(h,n,!0))return!0;return!1}function Pa(o,n,s,h=1/0){const g=vu(o),_=vu(n);if(h!==1/0&&_l(g,_,s)>=h)return h;if(Ns(g,_)){if(Ws(o,n))return 0}else if(Ws(n,o))return 0;let x=1/0;for(const w of o)for(let I=0,z=w.length,U=z-1;I<z;U=I++){const J=w[U],ne=w[I];for(const le of n)for(let me=0,be=le.length,Re=be-1;me<be;Re=me++){const Ne=le[Re],nt=le[me];if(Us(J,ne,Ne,nt))return 0;x=Math.min(x,_u(J,ne,Ne,nt,s))}}return x}function xu(o,n,s,h,g,_){if(!_)return;const x=_l(yu(h,_),g,s);x<n&&o.push([x,_,[0,0]])}function vo(o,n,s,h,g,_,x){if(!_||!x)return;const w=_l(yu(h,_),yu(g,x),s);w<n&&o.push([w,_,x])}function _o(o,n,s,h,g=1/0){let _=Math.min(h.distance(o[0],s[0][0]),g);if(_===0)return _;const x=new mu([[0,[0,o.length-1],[0,0]]],Sc),w=vu(s);for(;x.length>0;){const I=x.pop();if(I[0]>=_)continue;const z=I[1],U=n?50:100;if(Gs(z)<=U){if(!yo(z,o.length))return NaN;if(n){const J=Kn(o,z,s,h);if(isNaN(J)||J===0)return J;_=Math.min(_,J)}else for(let J=z[0];J<=z[1];++J){const ne=Ln(o[J],s,h);if(_=Math.min(_,ne),_===0)return 0}}else{const J=qo(z,n);xu(x,_,h,o,w,J[0]),xu(x,_,h,o,w,J[1])}}return _}function Fr(o,n,s,h,g,_=1/0){let x=Math.min(_,g.distance(o[0],s[0]));if(x===0)return x;const w=new mu([[0,[0,o.length-1],[0,s.length-1]]],Sc);for(;w.length>0;){const I=w.pop();if(I[0]>=x)continue;const z=I[1],U=I[2],J=n?50:100,ne=h?50:100;if(Gs(z)<=J&&Gs(U)<=ne){if(!yo(z,o.length)&&yo(U,s.length))return NaN;let le;if(n&&h)le=bn(o,z,s,U,g),x=Math.min(x,le);else if(n&&!h){const me=o.slice(z[0],z[1]+1);for(let be=U[0];be<=U[1];++be)if(le=Gn(s[be],me,g),x=Math.min(x,le),x===0)return x}else if(!n&&h){const me=s.slice(U[0],U[1]+1);for(let be=z[0];be<=z[1];++be)if(le=Gn(o[be],me,g),x=Math.min(x,le),x===0)return x}else le=Zs(o,z,s,U,g),x=Math.min(x,le)}else{const le=qo(z,n),me=qo(U,h);vo(w,x,g,o,s,le[0],me[0]),vo(w,x,g,o,s,le[0],me[1]),vo(w,x,g,o,s,le[1],me[0]),vo(w,x,g,o,s,le[1],me[1])}}return x}function xo(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class io{constructor(n,s){this.type=Ge,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(mi(n[1])){const h=n[1];if(h.type==="FeatureCollection")return new io(h,h.features.map(g=>xo(g.geometry)).flat());if(h.type==="Feature")return new io(h,xo(h.geometry));if("type"in h&&"coordinates"in h)return new io(h,xo(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const g=s.geometry(),_=g.flat().map(I=>Bs([I.x,I.y],s.canonical));if(g.length===0)return NaN;const x=new gu(_[0][1]);let w=1/0;for(const I of h){switch(I.type){case"Point":w=Math.min(w,Fr(_,!1,[I.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Fr(_,!1,I.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,_o(_,!1,I.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const g=s.geometry(),_=g.flat().map(I=>Bs([I.x,I.y],s.canonical));if(g.length===0)return NaN;const x=new gu(_[0][1]);let w=1/0;for(const I of h){switch(I.type){case"Point":w=Math.min(w,Fr(_,!0,[I.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,Fr(_,!0,I.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,_o(_,!0,I.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,h){const g=s.geometry();if(g.length===0||g[0].length===0)return NaN;const _=vl(g,0).map(I=>I.map(z=>z.map(U=>Bs([U.x,U.y],s.canonical)))),x=new gu(_[0][0][0][1]);let w=1/0;for(const I of h)for(const z of _){switch(I.type){case"Point":w=Math.min(w,_o([I.coordinates],!1,z,x,w));break;case"LineString":w=Math.min(w,_o(I.coordinates,!0,z,x,w));break;case"Polygon":w=Math.min(w,Pa(z,I.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const wo={"==":cl,"!=":Zh,">":hc,"<":Wh,">=":fc,"<=":dc,array:_r,at:hu,boolean:_r,case:ll,coalesce:Ea,collator:hl,format:fl,image:fu,in:Kr,"index-of":sl,interpolate:vi,"interpolate-hcl":vi,"interpolate-lab":vi,length:pl,let:In,literal:ps,match:al,number:_r,"number-format":dl,object:_r,slice:ul,step:ms,string:_r,"to-boolean":Xo,"to-color":Xo,"to-number":Xo,"to-string":Xo,var:ol,within:ys,distance:io};class _i{constructor(n,s,h,g){this.name=n,this.type=s,this._evaluate=h,this.args=g}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],g=_i.definitions[h];if(!g)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,w=x.filter(([z])=>!Array.isArray(z)||z.length===n.length-1);let I=null;for(const[z,U]of w){I=new Ko(s.registry,Ia,s.path,null,s.scope);const J=[];let ne=!1;for(let le=1;le<n.length;le++){const me=n[le],be=Array.isArray(z)?z[le-1]:z.type,Re=I.parse(me,1+J.length,be);if(!Re){ne=!0;break}J.push(Re)}if(!ne)if(Array.isArray(z)&&z.length!==J.length)I.error(`Expected ${z.length} arguments, but found ${J.length} instead.`);else{for(let le=0;le<J.length;le++){const me=Array.isArray(z)?z[le]:z.type,be=J[le];I.concat(le+1).checkSubtype(me,be.type)}if(I.errors.length===0)return new _i(h,_,U,J)}}if(w.length===1)s.errors.push(...I.errors);else{const z=(w.length?w:x).map(([J])=>{return ne=J,Array.isArray(ne)?`(${ne.map(ie).join(", ")})`:`(${ie(ne.type)}...)`;var ne}).join(" | "),U=[];for(let J=1;J<n.length;J++){const ne=s.parse(n[J],1+U.length);if(!ne)return null;U.push(ie(ne.type))}s.error(`Expected arguments of type ${z}, but found (${U.join(", ")}) instead.`)}return null}static register(n,s){_i.definitions=s;for(const h in s)n[h]=_i}}function Hs(o,[n,s,h,g]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const _=g?g.evaluate(o):1,x=rl(n,s,h,_);if(x)throw new hr(x);return new kn(n/255,s/255,h/255,_,!1)}function vs(o,n){return o in n}function xi(o,n){const s=n[o];return s===void 0?null:s}function Ai(o){return{type:o}}function Ia(o){if(o instanceof ol)return Ia(o.boundExpression);if(o instanceof _i&&o.name==="error"||o instanceof hl||o instanceof ys||o instanceof io)return!1;const n=o instanceof Xo||o instanceof _r;let s=!0;return o.eachChild(h=>{s=n?s&&Ia(h):s&&h instanceof ps}),!!s&&_s(o)&&Aa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _s(o){if(o instanceof _i&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ys||o instanceof io)return!1;let n=!0;return o.eachChild(s=>{n&&!_s(s)&&(n=!1)}),n}function Jo(o){if(o instanceof _i&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Jo(s)&&(n=!1)}),n}function Aa(o,n){if(o instanceof _i&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!Aa(h,n)&&(s=!1)}),s}function wu(o){return{result:"success",value:o}}function xs(o){return{result:"error",value:o}}function Yo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function oo(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ws(o){return!!o.expression&&o.expression.interpolated}function zn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Xs(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function xl(o){return o}function bu(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",g=h||!(h||o.property!==void 0),_=o.type||(ws(n)?"exponential":"interval");if(s||n.type==="padding"){const U=s?kn.parse:fi.parse;(o=V({},o)).stops&&(o.stops=o.stops.map(J=>[J[0],U(J[1])])),o.default=U(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let w,I,z;if(_==="exponential")w=ye;else if(_==="interval")w=W;else if(_==="categorical"){w=Ma,I=Object.create(null);for(const U of o.stops)I[U[0]]=U[1];z=typeof o.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);w=$e}if(h){const U={},J=[];for(let me=0;me<o.stops.length;me++){const be=o.stops[me],Re=be[0].zoom;U[Re]===void 0&&(U[Re]={zoom:Re,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Re)),U[Re].stops.push([be[0].value,be[1]])}const ne=[];for(const me of J)ne.push([U[me].zoom,bu(U[me],n)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:vi.interpolationFactor.bind(void 0,le),zoomStops:ne.map(me=>me[0]),evaluate:({zoom:me},be)=>ye({stops:ne,base:o.base},n,me).evaluate(me,be)}}if(g){const U=_==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:vi.interpolationFactor.bind(void 0,U),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>w(o,n,J,I,z)}}return{kind:"source",evaluate(U,J){const ne=J&&J.properties?J.properties[o.property]:void 0;return ne===void 0?Qo(o.default,n.default):w(o,n,ne,I,z)}}}function Qo(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Ma(o,n,s,h,g){return Qo(typeof s===g?h[s]:void 0,o.default,n.default)}function W(o,n,s){if(zn(s)!=="number")return Qo(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const g=xa(o.stops.map(_=>_[0]),s);return o.stops[g][1]}function ye(o,n,s){const h=o.base!==void 0?o.base:1;if(zn(s)!=="number")return Qo(o.default,n.default);const g=o.stops.length;if(g===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[g-1][0])return o.stops[g-1][1];const _=xa(o.stops.map(U=>U[0]),s),x=function(U,J,ne,le){const me=le-ne,be=U-ne;return me===0?0:J===1?be/me:(Math.pow(J,be)-1)/(Math.pow(J,me)-1)}(s,h,o.stops[_][0],o.stops[_+1][0]),w=o.stops[_][1],I=o.stops[_+1][1],z=yi[n.type]||xl;return typeof w.evaluate=="function"?{evaluate(...U){const J=w.evaluate.apply(void 0,U),ne=I.evaluate.apply(void 0,U);if(J!==void 0&&ne!==void 0)return z(J,ne,x,o.colorSpace)}}:z(w,I,x,o.colorSpace)}function $e(o,n,s){switch(n.type){case"color":s=kn.parse(s);break;case"formatted":s=Tr.fromString(s.toString());break;case"resolvedImage":s=Gr.fromString(s.toString());break;case"padding":s=fi.parse(s);break;default:zn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Qo(s,o.default,n.default)}_i.register(wo,{error:[{kind:"error"},[Et],(o,[n])=>{throw new hr(n.evaluate(o))}],typeof:[Et,[zt],(o,[n])=>ie(vr(n.evaluate(o)))],"to-rgba":[se(Ge,4),[yn],(o,[n])=>{const[s,h,g,_]=n.evaluate(o).rgb;return[255*s,255*h,255*g,_]}],rgb:[yn,[Ge,Ge,Ge],Hs],rgba:[yn,[Ge,Ge,Ge,Ge],Hs],has:{type:It,overloads:[[[Et],(o,[n])=>vs(n.evaluate(o),o.properties())],[[Et,Sn],(o,[n,s])=>vs(n.evaluate(o),s.evaluate(o))]]},get:{type:zt,overloads:[[[Et],(o,[n])=>xi(n.evaluate(o),o.properties())],[[Et,Sn],(o,[n,s])=>xi(n.evaluate(o),s.evaluate(o))]]},"feature-state":[zt,[Et],(o,[n])=>xi(n.evaluate(o),o.featureState||{})],properties:[Sn,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[zt,[],o=>o.id()],zoom:[Ge,[],o=>o.globals.zoom],"heatmap-density":[Ge,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ge,[],o=>o.globals.lineProgress||0],accumulated:[zt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ge,Ai(Ge),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Ge,Ai(Ge),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Ge,overloads:[[[Ge,Ge],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Ge],(o,[n])=>-n.evaluate(o)]]},"/":[Ge,[Ge,Ge],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Ge,[Ge,Ge],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Ge,[],()=>Math.LN2],pi:[Ge,[],()=>Math.PI],e:[Ge,[],()=>Math.E],"^":[Ge,[Ge,Ge],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Ge,[Ge],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Ge,[Ge],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Ge,[Ge],(o,[n])=>Math.log(n.evaluate(o))],log2:[Ge,[Ge],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Ge,[Ge],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Ge,[Ge],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Ge,[Ge],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Ge,[Ge],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Ge,[Ge],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Ge,[Ge],(o,[n])=>Math.atan(n.evaluate(o))],min:[Ge,Ai(Ge),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Ge,Ai(Ge),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Ge,[Ge],(o,[n])=>Math.abs(n.evaluate(o))],round:[Ge,[Ge],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ge,[Ge],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Ge,[Ge],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[It,[Et,zt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[It,[zt],(o,[n])=>o.id()===n.value],"filter-type-==":[It,[Et],(o,[n])=>o.geometryType()===n.value],"filter-<":[It,[Et,zt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<g}],"filter-id-<":[It,[zt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[It,[Et,zt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>g}],"filter-id->":[It,[zt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[It,[Et,zt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[It,[zt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[It,[Et,zt],(o,[n,s])=>{const h=o.properties()[n.value],g=s.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[It,[zt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[It,[zt],(o,[n])=>n.value in o.properties()],"filter-has-id":[It,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[It,[se(Et)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[It,[se(zt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[It,[Et,se(zt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[It,[Et,se(zt)],(o,[n,s])=>function(h,g,_,x){for(;_<=x;){const w=_+x>>1;if(g[w]===h)return!0;g[w]>h?x=w-1:_=w+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:It,overloads:[[[It,It],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Ai(It),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Ai(It),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[It,[It],(o,[n])=>!n.evaluate(o)],"is-supported-script":[It,[Et],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Et,[Et],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Et,Ai(zt),(o,n)=>n.map(s=>go(s.evaluate(o))).join("")],"resolved-locale":[Et,[zr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class ut{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new _a,this._defaultValue=s?(h=s).type==="color"&&Xs(h.default)?new kn(0,0,0,0):h.type==="color"?kn.parse(h.default)||null:h.type==="padding"?fi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?pi.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,g,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new hr(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Ft(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in wo}function St(o,n){const s=new Ko(wo,Ia,[],n?function(g){const _={color:yn,string:Et,number:Ge,enum:Et,boolean:It,formatted:ei,padding:Ii,resolvedImage:Ur,variableAnchorOffsetCollection:ze};return g.type==="array"?se(_[g.value]||zt,g.length):_[g.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?wu(new ut(h,n)):xs(s.errors)}class Gt{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Jo(s.expression)}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}}class rn{constructor(n,s,h,g){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Jo(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(n,s,h,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,g,_,x)}evaluate(n,s,h,g,_,x){return this._styleExpression.evaluate(n,s,h,g,_,x)}interpolationFactor(n,s,h){return this.interpolationType?vi.interpolationFactor(this.interpolationType,n,s,h):0}}function vn(o,n){const s=St(o,n);if(s.result==="error")return s;const h=s.value.expression,g=_s(h);if(!g&&!Yo(n))return xs([new Te("","data expressions not supported")]);const _=Aa(h,["zoom"]);if(!_&&!oo(n))return xs([new Te("","zoom expressions not supported")]);const x=jn(h);return x||_?x instanceof Te?xs([x]):x instanceof vi&&!ws(n)?xs([new Te("",'"interpolate" expressions cannot be used with this property')]):wu(x?new rn(g?"camera":"composite",s.value,x.labels,x instanceof vi?x.interpolation:void 0):new Gt(g?"constant":"source",s.value)):xs([new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $n{constructor(n,s){this._parameters=n,this._specification=s,V(this,bu(this._parameters,this._specification))}static deserialize(n){return new $n(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function jn(o){let n=null;if(o instanceof In)n=jn(o.result);else if(o instanceof Ea){for(const s of o.args)if(n=jn(s),n)break}else(o instanceof ms||o instanceof vi)&&o.input instanceof _i&&o.input.name==="zoom"&&(n=o);return n instanceof Te||o.eachChild(s=>{const h=jn(s);h instanceof Te?n=h:!n&&h?n=new Te("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Te("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Zn(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Zn(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const dr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nn(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Zn(o)||(o=Mi(o));const n=St(o,dr);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,g)=>n.value.evaluate(s,h,{},g),needGeometry:so(o)}}function fr(o,n){return o<n?-1:o>n?1:0}function so(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(so(o[n]))return!0;return!1}function Mi(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?bo(o[1],o[2],"=="):n==="!="?So(bo(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?bo(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Mi))):n==="all"?["all"].concat(o.slice(1).map(Mi)):n==="none"?["all"].concat(o.slice(1).map(Mi).map(So)):n==="in"?bs(o[1],o.slice(2)):n==="!in"?So(bs(o[1],o.slice(2))):n==="has"?Ks(o[1]):n!=="!has"||So(Ks(o[1]));var s}function bo(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function bs(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(fr)]]:["filter-in-small",o,["literal",n]]}}function Ks(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function So(o){return["!",o]}function Qh(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let g="[";for(const _ of o)g+=`${Qh(_)},`;return`${g}]`}const s=Object.keys(o).sort();let h="{";for(let g=0;g<s.length;g++)h+=`${JSON.stringify(s[g])}:${Qh(o[s[g]])},`;return`${h}}`}function ed(o){let n="";for(const s of _n)n+=`/${Qh(o[s])}`;return n}function hp(o){const n=o.value;return n?[new k(o.key,n,"constants have been deprecated as of v8")]:[]}function rr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ka(o){if(Array.isArray(o))return o.map(ka);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=ka(o[s]);return n}return rr(o)}function ki(o){const n=o.key,s=o.value,h=o.valueSpec||{},g=o.objectElementValidators||{},_=o.style,x=o.styleSpec,w=o.validateSpec;let I=[];const z=zn(s);if(z!=="object")return[new k(n,s,`object expected, ${z} found`)];for(const U in s){const J=U.split(".")[0],ne=h[J]||h["*"];let le;if(g[J])le=g[J];else if(h[J])le=w;else if(g["*"])le=g["*"];else{if(!h["*"]){I.push(new k(n,s[U],`unknown property "${U}"`));continue}le=w}I=I.concat(le({key:(n&&`${n}.`)+U,value:s[U],valueSpec:ne,style:_,styleSpec:x,object:s,objectKey:U,validateSpec:w},s))}for(const U in h)g[U]||h[U].required&&h[U].default===void 0&&s[U]===void 0&&I.push(new k(n,s,`missing required property "${U}"`));return I}function Ec(o){const n=o.value,s=o.valueSpec,h=o.style,g=o.styleSpec,_=o.key,x=o.arrayElementValidator||o.validateSpec;if(zn(n)!=="array")return[new k(_,n,`array expected, ${zn(n)} found`)];if(s.length&&n.length!==s.length)return[new k(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new k(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let w={type:s.value,values:s.values};g.$version<7&&(w.function=s.function),zn(s.value)==="object"&&(w=s.value);let I=[];for(let z=0;z<n.length;z++)I=I.concat(x({array:n,arrayIndex:z,value:n[z],valueSpec:w,validateSpec:o.validateSpec,style:h,styleSpec:g,key:`${_}[${z}]`}));return I}function Su(o){const n=o.key,s=o.value,h=o.valueSpec;let g=zn(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new k(n,s,`number expected, ${g} found`)]:"minimum"in h&&s<h.minimum?[new k(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new k(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function td(o){const n=o.valueSpec,s=rr(o.value.type);let h,g,_,x={};const w=s!=="categorical"&&o.value.property===void 0,I=!w,z=zn(o.value.stops)==="array"&&zn(o.value.stops[0])==="array"&&zn(o.value.stops[0][0])==="object",U=ki({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(le){if(s==="identity")return[new k(le.key,le.value,'identity function may not have a "stops" property')];let me=[];const be=le.value;return me=me.concat(Ec({key:le.key,value:be,valueSpec:le.valueSpec,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:J})),zn(be)==="array"&&be.length===0&&me.push(new k(le.key,be,"array must have at least one stop")),me},default:function(le){return le.validateSpec({key:le.key,value:le.value,valueSpec:n,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec})}}});return s==="identity"&&w&&U.push(new k(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||U.push(new k(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!ws(o.valueSpec)&&U.push(new k(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(I&&!Yo(o.valueSpec)?U.push(new k(o.key,o.value,"property functions not supported")):w&&!oo(o.valueSpec)&&U.push(new k(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!z||o.value.property!==void 0||U.push(new k(o.key,o.value,'"property" property is required')),U;function J(le){let me=[];const be=le.value,Re=le.key;if(zn(be)!=="array")return[new k(Re,be,`array expected, ${zn(be)} found`)];if(be.length!==2)return[new k(Re,be,`array length 2 expected, length ${be.length} found`)];if(z){if(zn(be[0])!=="object")return[new k(Re,be,`object expected, ${zn(be[0])} found`)];if(be[0].zoom===void 0)return[new k(Re,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new k(Re,be,"object stop key must have value")];if(_&&_>rr(be[0].zoom))return[new k(Re,be[0].zoom,"stop zoom values must appear in ascending order")];rr(be[0].zoom)!==_&&(_=rr(be[0].zoom),g=void 0,x={}),me=me.concat(ki({key:`${Re}[0]`,value:be[0],valueSpec:{zoom:{}},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:Su,value:ne}}))}else me=me.concat(ne({key:`${Re}[0]`,value:be[0],valueSpec:{},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec},be));return Ft(ka(be[1]))?me.concat([new k(`${Re}[1]`,be[1],"expressions are not allowed in function stops.")]):me.concat(le.validateSpec({key:`${Re}[1]`,value:be[1],valueSpec:n,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec}))}function ne(le,me){const be=zn(le.value),Re=rr(le.value),Ne=le.value!==null?le.value:me;if(h){if(be!==h)return[new k(le.key,Ne,`${be} stop domain type must match previous stop domain type ${h}`)]}else h=be;if(be!=="number"&&be!=="string"&&be!=="boolean")return[new k(le.key,Ne,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&s!=="categorical"){let nt=`number expected, ${be} found`;return Yo(n)&&s===void 0&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new k(le.key,Ne,nt)]}return s!=="categorical"||be!=="number"||isFinite(Re)&&Math.floor(Re)===Re?s!=="categorical"&&be==="number"&&g!==void 0&&Re<g?[new k(le.key,Ne,"stop domain values must appear in ascending order")]:(g=Re,s==="categorical"&&Re in x?[new k(le.key,Ne,"stop domain values must be unique")]:(x[Re]=!0,[])):[new k(le.key,Ne,`integer expected, found ${Re}`)]}}function za(o){const n=(o.expressionContext==="property"?vn:St)(ka(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new k(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new k(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Jo(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Jo(s))return[new k(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Aa(s,["zoom","feature-state"]))return[new k(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!_s(s))return[new k(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Eu(o){const n=o.key,s=o.value,h=o.valueSpec,g=[];return Array.isArray(h.values)?h.values.indexOf(rr(s))===-1&&g.push(new k(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(rr(s))===-1&&g.push(new k(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Tu(o){return Zn(ka(o.value))?za(V({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Cu(o)}function Cu(o){const n=o.value,s=o.key;if(zn(n)!=="array")return[new k(s,n,`array expected, ${zn(n)} found`)];const h=o.styleSpec;let g,_=[];if(n.length<1)return[new k(s,n,"filter array must have at least 1 element")];switch(_=_.concat(Eu({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),rr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&rr(n[1])==="$type"&&_.push(new k(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new k(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(g=zn(n[1]),g!=="string"&&_.push(new k(`${s}[1]`,n[1],`string expected, ${g} found`)));for(let x=2;x<n.length;x++)g=zn(n[x]),rr(n[1])==="$type"?_=_.concat(Eu({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new k(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(Cu({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":g=zn(n[1]),n.length!==2?_.push(new k(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new k(`${s}[1]`,n[1],`string expected, ${g} found`))}return _}function nd(o,n){const s=o.key,h=o.validateSpec,g=o.style,_=o.styleSpec,x=o.value,w=o.objectKey,I=_[`${n}_${o.layerType}`];if(!I)return[];const z=w.match(/^(.*)-transition$/);if(n==="paint"&&z&&I[z[1]]&&I[z[1]].transition)return h({key:s,value:x,valueSpec:_.transition,style:g,styleSpec:_});const U=o.valueSpec||I[w];if(!U)return[new k(s,x,`unknown property "${w}"`)];let J;if(zn(x)==="string"&&Yo(U)&&!U.tokens&&(J=/^{([^}]+)}$/.exec(x)))return[new k(s,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const ne=[];return o.layerType==="symbol"&&(w==="text-field"&&g&&!g.glyphs&&ne.push(new k(s,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Xs(ka(x))&&rr(x.type)==="identity"&&ne.push(new k(s,x,'"text-font" does not support identity functions'))),ne.concat(h({key:o.key,value:x,valueSpec:U,style:g,styleSpec:_,expressionContext:"property",propertyType:n,propertyKey:w}))}function rd(o){return nd(o,"paint")}function id(o){return nd(o,"layout")}function od(o){let n=[];const s=o.value,h=o.key,g=o.style,_=o.styleSpec;s.type||s.ref||n.push(new k(h,s,'either "type" or "ref" is required'));let x=rr(s.type);const w=rr(s.ref);if(s.id){const I=rr(s.id);for(let z=0;z<o.arrayIndex;z++){const U=g.layers[z];rr(U.id)===I&&n.push(new k(h,s.id,`duplicate layer id "${s.id}", previously used at line ${U.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(z=>{z in s&&n.push(new k(h,s[z],`"${z}" is prohibited for ref layers`))}),g.layers.forEach(z=>{rr(z.id)===w&&(I=z)}),I?I.ref?n.push(new k(h,s.ref,"ref cannot reference another ref layer")):x=rr(I.type):n.push(new k(h,s.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(s.source){const I=g.sources&&g.sources[s.source],z=I&&rr(I.type);I?z==="vector"&&x==="raster"?n.push(new k(h,s.source,`layer "${s.id}" requires a raster source`)):z!=="raster-dem"&&x==="hillshade"?n.push(new k(h,s.source,`layer "${s.id}" requires a raster-dem source`)):z==="raster"&&x!=="raster"?n.push(new k(h,s.source,`layer "${s.id}" requires a vector source`)):z!=="vector"||s["source-layer"]?z==="raster-dem"&&x!=="hillshade"?n.push(new k(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||z==="geojson"&&I.lineMetrics||n.push(new k(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new k(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new k(h,s.source,`source "${s.source}" not found`))}else n.push(new k(h,s,'missing required property "source"'));return n=n.concat(ki({key:h,value:s,valueSpec:_.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:_.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Tu,layout:I=>ki({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>id(V({layerType:x},z))}}),paint:I=>ki({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":z=>rd(V({layerType:x},z))}})}})),n}function Ss(o){const n=o.value,s=o.key,h=zn(n);return h!=="string"?[new k(s,n,`string expected, ${h} found`)]:[]}const sd={promoteId:function({key:o,value:n}){if(zn(n)==="string")return Ss({key:o,value:n});{const s=[];for(const h in n)s.push(...Ss({key:`${o}.${h}`,value:n[h]}));return s}}};function dp(o){const n=o.value,s=o.key,h=o.styleSpec,g=o.style,_=o.validateSpec;if(!n.type)return[new k(s,n,'"type" is required')];const x=rr(n.type);let w;switch(x){case"vector":case"raster":return w=ki({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:sd,validateSpec:_}),w;case"raster-dem":return w=function(I){var z;const U=(z=I.sourceName)!==null&&z!==void 0?z:"",J=I.value,ne=I.styleSpec,le=ne.source_raster_dem,me=I.style;let be=[];const Re=zn(J);if(J===void 0)return be;if(Re!=="object")return be.push(new k("source_raster_dem",J,`object expected, ${Re} found`)),be;const Ne=rr(J.encoding)==="custom",nt=["redFactor","greenFactor","blueFactor","baseShift"],Ke=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Ye in J)!Ne&&nt.includes(Ye)?be.push(new k(Ye,J[Ye],`In "${U}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ke} encoding found`)):le[Ye]?be=be.concat(I.validateSpec({key:Ye,value:J[Ye],valueSpec:le[Ye],validateSpec:I.validateSpec,style:me,styleSpec:ne})):be.push(new k(Ye,J[Ye],`unknown property "${Ye}"`));return be}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:_}),w;case"geojson":if(w=ki({key:s,value:n,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:_,objectElementValidators:sd}),n.cluster)for(const I in n.clusterProperties){const[z,U]=n.clusterProperties[I],J=typeof z=="string"?[z,["accumulated"],["get",I]]:z;w.push(...za({key:`${s}.${I}.map`,value:U,validateSpec:_,expressionContext:"cluster-map"})),w.push(...za({key:`${s}.${I}.reduce`,value:J,validateSpec:_,expressionContext:"cluster-reduce"}))}return w;case"video":return ki({key:s,value:n,valueSpec:h.source_video,style:g,validateSpec:_,styleSpec:h});case"image":return ki({key:s,value:n,valueSpec:h.source_image,style:g,validateSpec:_,styleSpec:h});case"canvas":return[new k(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Eu({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:h})}}function ad(o){const n=o.value,s=o.styleSpec,h=s.light,g=o.style;let _=[];const x=zn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new k("light",n,`object expected, ${x} found`)]),_;for(const w in n){const I=w.match(/^(.*)-transition$/);_=_.concat(I&&h[I[1]]&&h[I[1]].transition?o.validateSpec({key:w,value:n[w],valueSpec:s.transition,validateSpec:o.validateSpec,style:g,styleSpec:s}):h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)])}return _}function fp(o){const n=o.value,s=o.styleSpec,h=s.sky,g=o.style,_=zn(n);if(n===void 0)return[];if(_!=="object")return[new k("sky",n,`object expected, ${_} found`)];let x=[];for(const w in n)x=x.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],style:g,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)]);return x}function ld(o){const n=o.value,s=o.styleSpec,h=s.terrain,g=o.style;let _=[];const x=zn(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new k("terrain",n,`object expected, ${x} found`)]),_;for(const w in n)_=_.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:g,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)]);return _}function ud(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const g=[],_=[];for(const x in s)s[x].id&&g.includes(s[x].id)&&n.push(new k(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),g.push(s[x].id),s[x].url&&_.includes(s[x].url)&&n.push(new k(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),n=n.concat(ki({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Ss({key:h,value:s})}const cd={"*":()=>[],array:Ec,boolean:function(o){const n=o.value,s=o.key,h=zn(n);return h!=="boolean"?[new k(s,n,`boolean expected, ${h} found`)]:[]},number:Su,color:function(o){const n=o.key,s=o.value,h=zn(s);return h!=="string"?[new k(n,s,`color expected, ${h} found`)]:kn.parse(String(s))?[]:[new k(n,s,`color expected, "${s}" found`)]},constants:hp,enum:Eu,filter:Tu,function:td,layer:od,object:ki,source:dp,light:ad,sky:fp,terrain:ld,projection:function(o){const n=o.value,s=o.styleSpec,h=s.projection,g=o.style,_=zn(n);if(n===void 0)return[];if(_!=="object")return[new k("projection",n,`object expected, ${_} found`)];let x=[];for(const w in n)x=x.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],style:g,styleSpec:s}):[new k(w,n[w],`unknown property "${w}"`)]);return x},string:Ss,formatted:function(o){return Ss(o).length===0?[]:za(o)},resolvedImage:function(o){return Ss(o).length===0?[]:za(o)},padding:function(o){const n=o.key,s=o.value;if(zn(s)==="array"){if(s.length<1||s.length>4)return[new k(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(o.validateSpec({key:`${n}[${_}]`,value:s[_],validateSpec:o.validateSpec,valueSpec:h}));return g}return Su({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=zn(s),g=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new k(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=_.concat(Eu({key:`${n}[${x}]`,value:s[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Ec({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:g}));return _},sprite:ud};function Pu(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Pu,s.expression&&Xs(rr(n))?td(o):s.expression&&Ft(ka(n))?za(o):s.type&&cd[s.type]?cd[s.type](o):ki(V({},o,{valueSpec:s.type?h[s.type]:s}))}function pp(o){const n=o.value,s=o.key,h=Ss(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new k(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new k(s,n,'"glyphs" url must include a "{range}" token'))),h}function ao(o,n=Qe){let s=[];return s=s.concat(Pu({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Pu,objectElementValidators:{glyphs:pp,"*":()=>[]}})),o.constants&&(s=s.concat(hp({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Pu}))),hd(s)}function Eo(o){return function(n){return o({...n,validateSpec:Pu})}}function hd(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function To(o){return function(...n){return hd(o.apply(this,n))}}ao.source=To(Eo(dp)),ao.sprite=To(Eo(ud)),ao.glyphs=To(Eo(pp)),ao.light=To(Eo(ad)),ao.sky=To(Eo(fp)),ao.terrain=To(Eo(ld)),ao.layer=To(Eo(od)),ao.filter=To(Eo(Tu)),ao.paintProperty=To(Eo(rd)),ao.layoutProperty=To(Eo(id));const Es=ao,yy=Es.light,dd=Es.sky,vy=Es.paintProperty,_y=Es.layoutProperty;function fd(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new Ht(new Error(h.message))),s=!0;return s}class wl{constructor(n,s,h){const g=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let I=0;I<this.d*this.d;I++){const z=x[3+I],U=x[3+I+1];g.push(z===U?null:x.subarray(z,U))}const w=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const _=h/s*n;this.min=-_,this.max=n+_}insert(n,s,h,g,_){this._forEachCell(s,h,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,g,_,x){this.cells[_].push(x)}query(n,s,h,g,_){const x=this.min,w=this.max;if(n<=x&&s<=x&&w<=h&&w<=g&&!_)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,h,g,this._queryCell,I,{},_),I}}_queryCell(n,s,h,g,_,x,w,I){const z=this.cells[_];if(z!==null){const U=this.keys,J=this.bboxes;for(let ne=0;ne<z.length;ne++){const le=z[ne];if(w[le]===void 0){const me=4*le;(I?I(J[me+0],J[me+1],J[me+2],J[me+3]):n<=J[me+2]&&s<=J[me+3]&&h>=J[me+0]&&g>=J[me+1])?(w[le]=!0,x.push(U[le])):w[le]=!1}}}}_forEachCell(n,s,h,g,_,x,w,I){const z=this._convertToCellCoord(n),U=this._convertToCellCoord(s),J=this._convertToCellCoord(h),ne=this._convertToCellCoord(g);for(let le=z;le<=J;le++)for(let me=U;me<=ne;me++){const be=this.d*me+le;if((!I||I(this._convertFromCellCoord(le),this._convertFromCellCoord(me),this._convertFromCellCoord(le+1),this._convertFromCellCoord(me+1)))&&_.call(this,n,s,h,g,be,x,w,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const g=new Int32Array(s+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const w=n[x];g[3+x]=_,g.set(w,_),_+=w.length}return g[3+n.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+n.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new wl(n.buffer)}}const es={};function Ut(o,n,s={}){if(es[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),es[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Ut("Object",Object),Ut("TransferableGridIndex",wl),Ut("Color",kn),Ut("Error",Error),Ut("AJAXError",it),Ut("ResolvedImage",Gr),Ut("StylePropertyFunction",$n),Ut("StyleExpression",ut,{omit:["_evaluator"]}),Ut("ZoomDependentExpression",rn),Ut("ZoomConstantExpression",Gt),Ut("CompoundExpression",_i,{omit:["_evaluate"]});for(const o in wo)wo[o]._classRegistryKey||Ut(`Expression_${o}`,wo[o]);function mp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function pd(o){return o.$name||o.constructor._classRegistryKey}function gp(o){return!function(n){if(n===null||typeof n!="object")return!1;const s=pd(n);return!(!s||s==="Object")}(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||mp(o)||ee(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Iu(o,n){if(gp(o))return(mp(o)||ee(o))&&n&&n.push(o),ArrayBuffer.isView(o)&&n&&n.push(o.buffer),o instanceof ImageData&&n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const _=[];for(const x of o)_.push(Iu(x,n));return _}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const s=pd(o);if(!s)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!es[s])throw new Error(`${s} is not registered.`);const{klass:h}=es[s],g=h.serialize?h.serialize(o,n):{};if(h.serialize){if(n&&g===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in o){if(!o.hasOwnProperty(_)||es[s].omit.indexOf(_)>=0)continue;const x=o[_];g[_]=es[s].shallow.indexOf(_)>=0?x:Iu(x,n)}o instanceof Error&&(g.message=o.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(g.$name=s),g}function ts(o){if(gp(o))return o;if(Array.isArray(o))return o.map(ts);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const n=pd(o)||"Object";if(!es[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=es[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const g of Object.keys(o)){if(g==="$name")continue;const _=o[g];h[g]=es[n].shallow.indexOf(g)>=0?_:ts(_)}return h}class yp{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ot={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function md(o){for(const n of o)if(gd(n.charCodeAt(0)))return!0;return!1}function xy(o){for(const n of o)if(!vp(n.charCodeAt(0)))return!1;return!0}function vp(o){return!(Ot.Arabic(o)||Ot["Arabic Supplement"](o)||Ot["Arabic Extended-A"](o)||Ot["Arabic Presentation Forms-A"](o)||Ot["Arabic Presentation Forms-B"](o))}function gd(o){return!(o!==746&&o!==747&&(o<4352||!(Ot["Bopomofo Extended"](o)||Ot.Bopomofo(o)||Ot["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ot["CJK Compatibility Ideographs"](o)||Ot["CJK Compatibility"](o)||Ot["CJK Radicals Supplement"](o)||Ot["CJK Strokes"](o)||!(!Ot["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ot["CJK Unified Ideographs Extension A"](o)||Ot["CJK Unified Ideographs"](o)||Ot["Enclosed CJK Letters and Months"](o)||Ot["Hangul Compatibility Jamo"](o)||Ot["Hangul Jamo Extended-A"](o)||Ot["Hangul Jamo Extended-B"](o)||Ot["Hangul Jamo"](o)||Ot["Hangul Syllables"](o)||Ot.Hiragana(o)||Ot["Ideographic Description Characters"](o)||Ot.Kanbun(o)||Ot["Kangxi Radicals"](o)||Ot["Katakana Phonetic Extensions"](o)||Ot.Katakana(o)&&o!==12540||!(!Ot["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ot["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ot["Unified Canadian Aboriginal Syllabics"](o)||Ot["Unified Canadian Aboriginal Syllabics Extended"](o)||Ot["Vertical Forms"](o)||Ot["Yijing Hexagram Symbols"](o)||Ot["Yi Syllables"](o)||Ot["Yi Radicals"](o))))}function _p(o){return!(gd(o)||function(n){return!!(Ot["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ot["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ot["Letterlike Symbols"](n)||Ot["Number Forms"](n)||Ot["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ot["Control Pictures"](n)&&n!==9251||Ot["Optical Character Recognition"](n)||Ot["Enclosed Alphanumerics"](n)||Ot["Geometric Shapes"](n)||Ot["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ot["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ot["CJK Symbols and Punctuation"](n)||Ot.Katakana(n)||Ot["Private Use Area"](n)||Ot["CJK Compatibility Forms"](n)||Ot["Small Form Variants"](n)||Ot["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function qs(o){return o>=1424&&o<=2303||Ot["Arabic Presentation Forms-A"](o)||Ot["Arabic Presentation Forms-B"](o)}function xp(o,n){return!(!n&&qs(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ot.Khmer(o))}function yd(o){for(const n of o)if(qs(n.charCodeAt(0)))return!0;return!1}const Js=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Qn{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new yp,this.transition={})}isSupportedScript(n){return function(s,h){for(const g of s)if(!xp(g.charCodeAt(0),h))return!1;return!0}(n,Js.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Tc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,g){if(Xs(h))return new $n(h,g);if(Ft(h)){const _=vn(h,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=h;return g.type==="color"&&typeof h=="string"?_=kn.parse(h):g.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(_=pi.parse(h)):_=fi.parse(h),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class bl{constructor(n){this.property=n,this.value=new Tc(n,void 0)}transitioned(n,s){return new wp(this.property,this.value,s,T({},n.transition,this.transition),n.now)}untransitioned(){return new wp(this.property,this.value,null,{},0)}}class Sl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return H(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new bl(this._values[n].property)),this._values[n].value=new Tc(this._values[n].property,s===null?void 0:H(s))}getTransition(n){return H(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new bl(this._values[n].property)),this._values[n].transition=H(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const g=this.getTransition(s);g!==void 0&&(n[`${s}-transition`]=g)}return n}transitioned(n,s){const h=new vd(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(n,s._values[g]);return h}untransitioned(){const n=new vd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class wp{constructor(n,s,h,g,_){this.property=n,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,n.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const g=n.now||0,_=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(n,s,h);{const w=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),_,function(I){if(I<=0)return 0;if(I>=1)return 1;const z=I*I,U=z*I;return 4*(I<.5?U:3*(I-z)+U-.75)}(w))}}return _}}class vd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const g=new Cc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Au{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return H(this._values[n].value)}setValue(n,s){this._values[n]=new Tc(this._values[n].property,s===null?void 0:H(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const g=new Cc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,h);return g}}class ns{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,g){return this.property.evaluate(this.value,this.parameters,n,s,h,g)}}class Cc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Jt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const g=yi[this.specification.type];return g?g(n,s,h):n}}class an{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,g){return new ns(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,g)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new ns(this,{kind:"constant",value:void 0},n.parameters);const g=yi[this.specification.type];if(g){const _=g(n.value.value,s.value.value,h);return new ns(this,{kind:"constant",value:_},n.parameters)}return n}evaluate(n,s,h,g,_,x){return n.kind==="constant"?n.value:n.evaluate(s,h,g,_,x)}}class v extends an{possiblyEvaluate(n,s,h,g){if(n.value===void 0)return new ns(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,w=this._calculate(x,x,x,s);return new ns(this,{kind:"constant",value:w},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new ns(this,{kind:"constant",value:_},s)}return new ns(this,n.expression,s)}evaluate(n,s,h,g,_,x){if(n.kind==="source"){const w=n.evaluate(s,h,g,_,x);return this._calculate(w,w,w,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,g),n.evaluate({zoom:Math.floor(s.zoom)},h,g),n.evaluate({zoom:Math.floor(s.zoom)+1},h,g),s):n.value}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class r{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},h,g);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new Qn(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Qn(Math.floor(s.zoom),s)),n.expression.evaluate(new Qn(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class l{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,g){return!!n.expression.evaluate(s,null,{},h,g)}interpolate(){return!1}}class d{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Tc(h,void 0),_=this.defaultTransitionablePropertyValues[s]=new bl(h);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}Ut("DataDrivenProperty",an),Ut("DataConstantProperty",Jt),Ut("CrossFadedDataDrivenProperty",v),Ut("CrossFadedProperty",r),Ut("ColorRampProperty",l);const f="-transition";class y extends ln{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Au(s.layout)),s.paint)){this._transitionablePaint=new Sl(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(_y,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(f)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(vy,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(f))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const g=this._transitionablePaint._values[n],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,w,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),te(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,g,_={}){return(!_||_.validate!==!1)&&fd(this,n.call(Es,{key:s,layerType:this.type,objectKey:h,value:g,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof ns&&Yo(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const E={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class A{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class F{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function R(o,n=1){let s=0,h=0;return{members:o.map(g=>{const _=E[g.type].BYTES_PER_ELEMENT,x=s=Y(s,Math.max(n,_)),w=g.components||1;return h=Math.max(h,_),s+=_*w,{name:g.name,type:g.type,components:w,offset:x}}),size:Y(s,Math.max(h,n)),alignment:n}}function Y(o,n){return Math.ceil(o/n)*n}class Q extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.int16[g+0]=s,this.int16[g+1]=h,n}}Q.prototype.bytesPerElement=4,Ut("StructArrayLayout2i4",Q);class de extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=g,n}}de.prototype.bytesPerElement=6,Ut("StructArrayLayout3i6",de);class xe extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=g,this.int16[x+3]=_,n}}xe.prototype.bytesPerElement=8,Ut("StructArrayLayout4i8",xe);class Pe extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,w){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=g,this.int16[I+3]=_,this.int16[I+4]=x,this.int16[I+5]=w,n}}Pe.prototype.bytesPerElement=12,Ut("StructArrayLayout2i4i12",Pe);class Oe extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,w){const I=4*n,z=8*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[z+4]=g,this.uint8[z+5]=_,this.uint8[z+6]=x,this.uint8[z+7]=w,n}}Oe.prototype.bytesPerElement=8,Ut("StructArrayLayout2i4ub8",Oe);class je extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.float32[g+0]=s,this.float32[g+1]=h,n}}je.prototype.bytesPerElement=8,Ut("StructArrayLayout2f8",je);class Le extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,w,I,z,U){const J=this.length;return this.resize(J+1),this.emplace(J,n,s,h,g,_,x,w,I,z,U)}emplace(n,s,h,g,_,x,w,I,z,U,J){const ne=10*n;return this.uint16[ne+0]=s,this.uint16[ne+1]=h,this.uint16[ne+2]=g,this.uint16[ne+3]=_,this.uint16[ne+4]=x,this.uint16[ne+5]=w,this.uint16[ne+6]=I,this.uint16[ne+7]=z,this.uint16[ne+8]=U,this.uint16[ne+9]=J,n}}Le.prototype.bytesPerElement=20,Ut("StructArrayLayout10ui20",Le);class Xe extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,w,I,z,U,J,ne){const le=this.length;return this.resize(le+1),this.emplace(le,n,s,h,g,_,x,w,I,z,U,J,ne)}emplace(n,s,h,g,_,x,w,I,z,U,J,ne,le){const me=12*n;return this.int16[me+0]=s,this.int16[me+1]=h,this.int16[me+2]=g,this.int16[me+3]=_,this.uint16[me+4]=x,this.uint16[me+5]=w,this.uint16[me+6]=I,this.uint16[me+7]=z,this.int16[me+8]=U,this.int16[me+9]=J,this.int16[me+10]=ne,this.int16[me+11]=le,n}}Xe.prototype.bytesPerElement=24,Ut("StructArrayLayout4i4ui4i24",Xe);class ke extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}ke.prototype.bytesPerElement=12,Ut("StructArrayLayout3f12",ke);class Je extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Je.prototype.bytesPerElement=4,Ut("StructArrayLayout1ul4",Je);class tt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,w,I,z){const U=this.length;return this.resize(U+1),this.emplace(U,n,s,h,g,_,x,w,I,z)}emplace(n,s,h,g,_,x,w,I,z,U){const J=10*n,ne=5*n;return this.int16[J+0]=s,this.int16[J+1]=h,this.int16[J+2]=g,this.int16[J+3]=_,this.int16[J+4]=x,this.int16[J+5]=w,this.uint32[ne+3]=I,this.uint16[J+8]=z,this.uint16[J+9]=U,n}}tt.prototype.bytesPerElement=20,Ut("StructArrayLayout6i1ul2ui20",tt);class at extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,w){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=g,this.int16[I+3]=_,this.int16[I+4]=x,this.int16[I+5]=w,n}}at.prototype.bytesPerElement=12,Ut("StructArrayLayout2i2i2i12",at);class yt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,g,_)}emplace(n,s,h,g,_,x){const w=4*n,I=8*n;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=g,this.int16[I+6]=_,this.int16[I+7]=x,n}}yt.prototype.bytesPerElement=16,Ut("StructArrayLayout2f1f2i16",yt);class wt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,g,_,x)}emplace(n,s,h,g,_,x,w){const I=16*n,z=4*n,U=8*n;return this.uint8[I+0]=s,this.uint8[I+1]=h,this.float32[z+1]=g,this.float32[z+2]=_,this.int16[U+6]=x,this.int16[U+7]=w,n}}wt.prototype.bytesPerElement=16,Ut("StructArrayLayout2ub2f2i16",wt);class Lt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=g,n}}Lt.prototype.bytesPerElement=6,Ut("StructArrayLayout3ui6",Lt);class Bt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,w,I,z,U,J,ne,le,me,be,Re,Ne){const nt=this.length;return this.resize(nt+1),this.emplace(nt,n,s,h,g,_,x,w,I,z,U,J,ne,le,me,be,Re,Ne)}emplace(n,s,h,g,_,x,w,I,z,U,J,ne,le,me,be,Re,Ne,nt){const Ke=24*n,Ye=12*n,lt=48*n;return this.int16[Ke+0]=s,this.int16[Ke+1]=h,this.uint16[Ke+2]=g,this.uint16[Ke+3]=_,this.uint32[Ye+2]=x,this.uint32[Ye+3]=w,this.uint32[Ye+4]=I,this.uint16[Ke+10]=z,this.uint16[Ke+11]=U,this.uint16[Ke+12]=J,this.float32[Ye+7]=ne,this.float32[Ye+8]=le,this.uint8[lt+36]=me,this.uint8[lt+37]=be,this.uint8[lt+38]=Re,this.uint32[Ye+10]=Ne,this.int16[Ke+22]=nt,n}}Bt.prototype.bytesPerElement=48,Ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Bt);class bt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g,_,x,w,I,z,U,J,ne,le,me,be,Re,Ne,nt,Ke,Ye,lt,_t,Dt,on,Rt,kt,qt,$t){const Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,n,s,h,g,_,x,w,I,z,U,J,ne,le,me,be,Re,Ne,nt,Ke,Ye,lt,_t,Dt,on,Rt,kt,qt,$t)}emplace(n,s,h,g,_,x,w,I,z,U,J,ne,le,me,be,Re,Ne,nt,Ke,Ye,lt,_t,Dt,on,Rt,kt,qt,$t,Nt){const ft=32*n,Yt=16*n;return this.int16[ft+0]=s,this.int16[ft+1]=h,this.int16[ft+2]=g,this.int16[ft+3]=_,this.int16[ft+4]=x,this.int16[ft+5]=w,this.int16[ft+6]=I,this.int16[ft+7]=z,this.uint16[ft+8]=U,this.uint16[ft+9]=J,this.uint16[ft+10]=ne,this.uint16[ft+11]=le,this.uint16[ft+12]=me,this.uint16[ft+13]=be,this.uint16[ft+14]=Re,this.uint16[ft+15]=Ne,this.uint16[ft+16]=nt,this.uint16[ft+17]=Ke,this.uint16[ft+18]=Ye,this.uint16[ft+19]=lt,this.uint16[ft+20]=_t,this.uint16[ft+21]=Dt,this.uint16[ft+22]=on,this.uint32[Yt+12]=Rt,this.float32[Yt+13]=kt,this.float32[Yt+14]=qt,this.uint16[ft+30]=$t,this.uint16[ft+31]=Nt,n}}bt.prototype.bytesPerElement=64,Ut("StructArrayLayout8i15ui1ul2f2ui64",bt);class Tt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}Tt.prototype.bytesPerElement=4,Ut("StructArrayLayout1f4",Tt);class Zt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=3*n;return this.uint16[6*n+0]=s,this.float32[_+1]=h,this.float32[_+2]=g,n}}Zt.prototype.bytesPerElement=12,Ut("StructArrayLayout1ui2f12",Zt);class mn extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h)}emplace(n,s,h,g){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=g,n}}mn.prototype.bytesPerElement=8,Ut("StructArrayLayout1ul2ui8",mn);class At extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const g=2*n;return this.uint16[g+0]=s,this.uint16[g+1]=h,n}}At.prototype.bytesPerElement=4,Ut("StructArrayLayout2ui4",At);class jt extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}jt.prototype.bytesPerElement=2,Ut("StructArrayLayout1ui2",jt);class cn extends F{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,g)}emplace(n,s,h,g,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=g,this.float32[x+3]=_,n}}cn.prototype.bytesPerElement=16,Ut("StructArrayLayout4f16",cn);class ir extends A{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}ir.prototype.size=20;class xn extends tt{get(n){return new ir(this,n)}}Ut("CollisionBoxArray",xn);class Cn extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Cn.prototype.size=48;class or extends Bt{get(n){return new Cn(this,n)}}Ut("PlacedSymbolArray",or);class ti extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ti.prototype.size=64;class Co extends bt{get(n){return new ti(this,n)}}Ut("SymbolInstanceArray",Co);class sr extends Tt{getoffsetX(n){return this.float32[1*n+0]}}Ut("GlyphOffsetArray",sr);class zi extends de{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Ut("SymbolLineVertexArray",zi);class wi extends A{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}wi.prototype.size=12;class ni extends Zt{get(n){return new wi(this,n)}}Ut("TextAnchorOffsetArray",ni);class ri extends A{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ri.prototype.size=8;class Po extends mn{get(n){return new ri(this,n)}}Ut("FeatureIndexArray",Po);class Fa extends Q{}class Pc extends Q{}class El extends Q{}class ja extends Pe{}class Ic extends Oe{}class _d extends je{}class qr extends Le{}class Io extends Xe{}class Ys extends ke{}class Tl extends Je{}class ii extends at{}class oi extends wt{}class Zr extends Lt{}class ur extends At{}const Cl=R([{name:"a_pos",components:2,type:"Int16"}],4),{members:xd}=Cl;class Dr{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,g){let _=this.segments[this.segments.length-1];return n>Dr.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${Dr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>Dr.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,g){return new Dr([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function bp(o,n){return 256*(o=K(Math.floor(o),0,255))+K(Math.floor(n),0,255)}Dr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ut("SegmentVector",Dr);const Ac=R([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Mc={exports:{}},Qs={exports:{}};Qs.exports=function(o,n){var s,h,g,_,x,w,I,z;for(h=o.length-(s=3&o.length),g=n,x=3432918353,w=461845907,z=0;z<h;)I=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,g=27492+(65535&(_=5*(65535&(g=(g^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*w+(((I>>>16)*w&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&o.charCodeAt(z+2))<<16;case 2:I^=(255&o.charCodeAt(z+1))<<8;case 1:g^=I=(65535&(I=(I=(65535&(I^=255&o.charCodeAt(z)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*w+(((I>>>16)*w&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Sp=Qs.exports,wd={exports:{}};wd.exports=function(o,n){for(var s,h=o.length,g=n^h,_=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(_)|(255&o.charCodeAt(++_))<<8|(255&o.charCodeAt(++_))<<16|(255&o.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++_;switch(h){case 3:g^=(255&o.charCodeAt(_+2))<<16;case 2:g^=(255&o.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var bd=Sp,Sd=wd.exports;Mc.exports=bd,Mc.exports.murmur3=bd,Mc.exports.murmur2=Sd;var kc=S(Mc.exports);class Pl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,g){this.ids.push(Bx(n)),this.positions.push(s,h,g)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Bx(n);let h=0,g=this.ids.length-1;for(;h<g;){const x=h+g>>1;this.ids[x]>=s?g=x:h=x+1}const _=[];for(;this.ids[h]===s;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(n,s){const h=new Float64Array(n.ids),g=new Uint32Array(n.positions);return wy(h,g,0,h.length-1),s&&s.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(n){const s=new Pl;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Bx(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:kc(String(o))}function wy(o,n,s,h){for(;s<h;){const g=o[s+h>>1];let _=s-1,x=h+1;for(;;){do _++;while(o[_]<g);do x--;while(o[x]>g);if(_>=x)break;Ep(o,_,x),Ep(n,3*_,3*x),Ep(n,3*_+1,3*x+1),Ep(n,3*_+2,3*x+2)}x-s<h-x?(wy(o,n,s,x),s=x+1):(wy(o,n,x+1,h),h=x)}}function Ep(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Ut("FeaturePositionMap",Pl);class Mu{constructor(n,s){this.gl=n.gl,this.location=s}}class Tp extends Mu{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Nx extends Mu{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Ux extends Mu{constructor(n,s){super(n,s),this.current=kn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const $I=new Float32Array(16);function by(o){return[bp(255*o.r,255*o.g),bp(255*o.b,255*o.a)]}class Ed{constructor(n,s,h){this.value=n,this.uniformNames=s.map(g=>`u_${g}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Ux(n,s):new Tp(n,s)}}class zc{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Nx(n,s):new Tp(n,s)}}class Ra{constructor(n,s,h,g){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(n,s,h,g,_){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Qn(0),s,{},g,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,w)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const g=by(h);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ts{constructor(n,s,h,g,_,x){this.expression=n,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,g,_){const x=this.expression.evaluate(new Qn(this.zoom),s,{},g,[],_),w=this.expression.evaluate(new Qn(this.zoom+1),s,{},g,[],_),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,x,w)}updatePaintArray(n,s,h,g){const _=this.expression.evaluate({zoom:this.zoom},h,g),x=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,h,g){if(this.type==="color"){const _=by(h),x=by(g);for(let w=n;w<s;w++)this.paintVertexArray.emplace(w,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=K(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(g)}getBinding(n,s,h){return new Tp(n,s)}}class Il{constructor(n,s,h,g,_,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(g,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,g,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,g){if(!g||!h)return;const{min:_,mid:x,max:w}=h,I=g[_],z=g[x],U=g[w];if(I&&z&&U)for(let J=n;J<s;J++)this.zoomInPaintVertexArray.emplace(J,z.tl[0],z.tl[1],z.br[0],z.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],z.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,z.tl[0],z.tl[1],z.br[0],z.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],z.pixelRatio,U.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Ac.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Ac.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class $x{constructor(n,s,h){this.binders={},this._buffers=[];const g=[];for(const _ in n.paint._values){if(!h(_))continue;const x=n.paint.get(_);if(!(x instanceof ns&&Yo(x.property.specification)))continue;const w=VI(_,n.type),I=x.value,z=x.property.specification.type,U=x.property.useIntegerZoom,J=x.property.specification["property-type"],ne=J==="cross-faded"||J==="cross-faded-data-driven";if(I.kind==="constant")this.binders[_]=ne?new zc(I.value,w):new Ed(I.value,w,z),g.push(`/u_${_}`);else if(I.kind==="source"||ne){const le=Vx(_,z,"source");this.binders[_]=ne?new Il(I,z,U,s,le,n.id):new Ra(I,w,z,le),g.push(`/a_${_}`)}else{const le=Vx(_,z,"composite");this.binders[_]=new Ts(I,w,z,U,s,le),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ra||s instanceof Ts?s.maxValue:0}populatePaintArrays(n,s,h,g,_){for(const x in this.binders){const w=this.binders[x];(w instanceof Ra||w instanceof Ts||w instanceof Il)&&w.populatePaintArray(n,s,h,g,_)}}setConstantPatternPositions(n,s){for(const h in this.binders){const g=this.binders[h];g instanceof zc&&g.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,g,_){let x=!1;for(const w in n){const I=s.getPositions(w);for(const z of I){const U=h.feature(z.index);for(const J in this.binders){const ne=this.binders[J];if((ne instanceof Ra||ne instanceof Ts||ne instanceof Il)&&ne.expression.isStateDependent===!0){const le=g.paint.get(J);ne.expression=le.value,ne.updatePaintArray(z.start,z.end,U,n[w],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Ed||h instanceof zc)&&n.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ra||h instanceof Ts)for(let g=0;g<h.paintVertexAttributes.length;g++)n.push(h.paintVertexAttributes[g].name);else if(h instanceof Il)for(let g=0;g<Ac.members.length;g++)n.push(Ac.members[g].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ed||h instanceof zc||h instanceof Ts)for(const g of h.uniformNames)n.push(g)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Ed||_ instanceof zc||_ instanceof Ts){for(const x of _.uniformNames)if(s[x]){const w=_.getBinding(n,s[x],x);h.push({name:x,property:g,binding:w})}}}return h}setUniforms(n,s,h,g){for(const{name:_,property:x,binding:w}of s)this.binders[x].setUniform(w,g,h.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Il){const g=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof Ra||h instanceof Ts)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Ra||h instanceof Ts||h instanceof Il)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ra||s instanceof Ts||s instanceof Il)&&s.destroy()}}}class ku{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const g of n)this.programConfigurations[g.id]=new $x(g,s,h);this.needsUpload=!1,this._featureMap=new Pl,this._bufferOffset=0}populatePaintArrays(n,s,h,g,_,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,s,g,_,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function VI(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Vx(o,n,s){const h={color:{source:je,composite:cn},number:{source:Tt,composite:je}},g=function(_){return{"line-pattern":{source:qr,composite:qr},"fill-pattern":{source:qr,composite:qr},"fill-extrusion-pattern":{source:qr,composite:qr}}[_]}(o);return g&&g[s]||h[n][s]}Ut("ConstantBinder",Ed),Ut("CrossFadedConstantBinder",zc),Ut("SourceExpressionBinder",Ra),Ut("CrossFadedCompositeBinder",Il),Ut("CompositeExpressionBinder",Ts),Ut("ProgramConfiguration",$x,{omit:["_buffers"]}),Ut("ProgramConfigurationSet",ku);const jr=8192,Sy=Math.pow(2,14)-1,Gx=-Sy-1;function zu(o){const n=jr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const g=s[h];for(let _=0;_<g.length;_++){const x=g[_],w=Math.round(x.x*n),I=Math.round(x.y*n);x.x=K(w,Gx,Sy),x.y=K(I,Gx,Sy),(w<x.x||w>x.x+1||I<x.y||I>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Fu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?zu(o):[]}}function Cp(o,n,s,h,g){o.emplaceBack(2*n+(h+1)/2,2*s+(g+1)/2)}class Ey{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Pc,this.indexArray=new Zr,this.segments=new Dr,this.programConfigurations=new ku(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const g=this.layers[0],_=[];let x=null,w=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:I,id:z,index:U,sourceLayerIndex:J}of n){const ne=this.layers[0]._featureFilter.needGeometry,le=Fu(I,ne);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),le,h))continue;const me=w?x.evaluate(le,{},h):void 0,be={id:z,properties:I.properties,type:I.type,sourceLayerIndex:J,index:U,geometry:ne?le.geometry:zu(I),patterns:{},sortKey:me};_.push(be)}w&&_.sort((I,z)=>I.sortKey-z.sortKey);for(const I of _){const{geometry:z,index:U,sourceLayerIndex:J}=I,ne=n[U].feature;this.addFeature(I,z,U,h),s.featureIndex.insert(ne,z,U,J,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,g){for(const _ of s)for(const x of _){const w=x.x,I=x.y;if(w<0||w>=jr||I<0||I>=jr)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),U=z.vertexLength;Cp(this.layoutVertexArray,w,I,-1,-1),Cp(this.layoutVertexArray,w,I,1,-1),Cp(this.layoutVertexArray,w,I,1,1),Cp(this.layoutVertexArray,w,I,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},g)}}function Zx(o,n){for(let s=0;s<o.length;s++)if(Fc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Fc(o,n[s]))return!0;return!!Ty(o,n)}function GI(o,n,s){return!!Fc(o,n)||!!Cy(n,o,s)}function Wx(o,n){if(o.length===1)return Xx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let g=0;g<h.length;g++)if(Fc(o,h[g]))return!0}for(let s=0;s<o.length;s++)if(Xx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Ty(o,n[s]))return!0;return!1}function ZI(o,n,s){if(o.length>1){if(Ty(o,n))return!0;for(let h=0;h<n.length;h++)if(Cy(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Cy(o[h],n,s))return!0;return!1}function Ty(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],g=o[s+1];for(let _=0;_<n.length-1;_++)if(WI(h,g,n[_],n[_+1]))return!0}return!1}function WI(o,n,s,h){return pe(o,s,h)!==pe(n,s,h)&&pe(o,n,s)!==pe(o,n,h)}function Cy(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let g=1;g<n.length;g++)if(Hx(o,n[g-1],n[g])<h)return!0;return!1}function Hx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const g=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(g<0?n:g>1?s:s.sub(n)._mult(g)._add(n))}function Xx(o,n){let s,h,g,_=!1;for(let x=0;x<o.length;x++){s=o[x];for(let w=0,I=s.length-1;w<s.length;I=w++)h=s[w],g=s[I],h.y>n.y!=g.y>n.y&&n.x<(g.x-h.x)*(n.y-h.y)/(g.y-h.y)+h.x&&(_=!_)}return _}function Fc(o,n){let s=!1;for(let h=0,g=o.length-1;h<o.length;g=h++){const _=o[h],x=o[g];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function HI(o,n,s){const h=s[0],g=s[2];if(o.x<h.x&&n.x<h.x||o.x>g.x&&n.x>g.x||o.y<h.y&&n.y<h.y||o.y>g.y&&n.y>g.y)return!1;const _=pe(o,n,s[0]);return _!==pe(o,n,s[1])||_!==pe(o,n,s[2])||_!==pe(o,n,s[3])}function Td(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Pp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ip(o,n,s,h,g){if(!n[0]&&!n[1])return o;const _=b.convert(n)._mult(g);s==="viewport"&&_._rotate(-h);const x=[];for(let w=0;w<o.length;w++)x.push(o[w].sub(_));return x}let Kx,qx;Ut("CircleBucket",Ey,{omit:["layers"]});var XI={get paint(){return qx=qx||new d({"circle-radius":new an(Qe.paint_circle["circle-radius"]),"circle-color":new an(Qe.paint_circle["circle-color"]),"circle-blur":new an(Qe.paint_circle["circle-blur"]),"circle-opacity":new an(Qe.paint_circle["circle-opacity"]),"circle-translate":new Jt(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Jt(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Jt(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Jt(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new an(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new an(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new an(Qe.paint_circle["circle-stroke-opacity"])})},get layout(){return Kx=Kx||new d({"circle-sort-key":new an(Qe.layout_circle["circle-sort-key"])})}},Fi=1e-6,jc=typeof Float32Array<"u"?Float32Array:Array;function Py(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Jx(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3],w=n[4],I=n[5],z=n[6],U=n[7],J=n[8],ne=n[9],le=n[10],me=n[11],be=n[12],Re=n[13],Ne=n[14],nt=n[15],Ke=s[0],Ye=s[1],lt=s[2],_t=s[3];return o[0]=Ke*h+Ye*w+lt*J+_t*be,o[1]=Ke*g+Ye*I+lt*ne+_t*Re,o[2]=Ke*_+Ye*z+lt*le+_t*Ne,o[3]=Ke*x+Ye*U+lt*me+_t*nt,o[4]=(Ke=s[4])*h+(Ye=s[5])*w+(lt=s[6])*J+(_t=s[7])*be,o[5]=Ke*g+Ye*I+lt*ne+_t*Re,o[6]=Ke*_+Ye*z+lt*le+_t*Ne,o[7]=Ke*x+Ye*U+lt*me+_t*nt,o[8]=(Ke=s[8])*h+(Ye=s[9])*w+(lt=s[10])*J+(_t=s[11])*be,o[9]=Ke*g+Ye*I+lt*ne+_t*Re,o[10]=Ke*_+Ye*z+lt*le+_t*Ne,o[11]=Ke*x+Ye*U+lt*me+_t*nt,o[12]=(Ke=s[12])*h+(Ye=s[13])*w+(lt=s[14])*J+(_t=s[15])*be,o[13]=Ke*g+Ye*I+lt*ne+_t*Re,o[14]=Ke*_+Ye*z+lt*le+_t*Ne,o[15]=Ke*x+Ye*U+lt*me+_t*nt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Cd,KI=Jx;function Ap(o,n,s){var h=n[0],g=n[1],_=n[2],x=n[3];return o[0]=s[0]*h+s[4]*g+s[8]*_+s[12]*x,o[1]=s[1]*h+s[5]*g+s[9]*_+s[13]*x,o[2]=s[2]*h+s[6]*g+s[10]*_+s[14]*x,o[3]=s[3]*h+s[7]*g+s[11]*_+s[15]*x,o}Cd=new jc(4),jc!=Float32Array&&(Cd[0]=0,Cd[1]=0,Cd[2]=0,Cd[3]=0);class qI extends y{constructor(n){super(n,XI)}createBucket(n){return new Ey(n)}queryRadius(n){const s=n;return Td("circle-radius",this,s)+Td("circle-stroke-width",this,s)+Pp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,g,_,x,w,I){const z=Ip(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),U=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),J=this.paint.get("circle-pitch-alignment")==="map",ne=J?z:function(me,be){return me.map(Re=>Yx(Re,be))}(z,I),le=J?U*w:U;for(const me of g)for(const be of me){const Re=J?be:Yx(be,I);let Ne=le;const nt=Ap([],[be.x,be.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ne*=nt[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ne*=x.cameraToCenterDistance/nt[3]),GI(ne,Re,Ne))return!0}return!1}}function Yx(o,n){const s=Ap([],[o.x,o.y,0,1],n);return new b(s[0]/s[3],s[1]/s[3])}class Qx extends Ey{}let ew;Ut("HeatmapBucket",Qx,{omit:["layers"]});var JI={get paint(){return ew=ew||new d({"heatmap-radius":new an(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new an(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Jt(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Jt(Qe.paint_heatmap["heatmap-opacity"])})}};function Iy(o,{width:n,height:s},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${n*s*h}`)}else g=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=g,o}function tw(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const g=Iy({},{width:n,height:s},h);Ay(o,g,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=g.data}function Ay(o,n,s,h,g,_){if(g.width===0||g.height===0)return n;if(g.width>o.width||g.height>o.height||s.x>o.width-g.width||s.y>o.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>n.width||g.height>n.height||h.x>n.width-g.width||h.y>n.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,w=n.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<g.height;I++){const z=((s.y+I)*o.width+s.x)*_,U=((h.y+I)*n.width+h.x)*_;for(let J=0;J<g.width*_;J++)w[U+J]=x[z+J]}return n}class Pd{constructor(n,s){Iy(this,n,1,s)}resize(n){tw(this,n,1)}clone(){return new Pd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){Ay(n,s,h,g,_,1)}}class Ao{constructor(n,s){Iy(this,n,4,s)}resize(n){tw(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,g,_){Ay(n,s,h,g,_,4)}}function nw(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,g=o.image||new Ao({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,w,I)=>{n[o.evaluationKey]=I;const z=o.expression.evaluate(n);g.data[x+w+0]=Math.floor(255*z.r/z.a),g.data[x+w+1]=Math.floor(255*z.g/z.a),g.data[x+w+2]=Math.floor(255*z.b/z.a),g.data[x+w+3]=Math.floor(255*z.a)};if(o.clips)for(let x=0,w=0;x<h;++x,w+=4*s)for(let I=0,z=0;I<s;I++,z+=4){const U=I/(s-1),{start:J,end:ne}=o.clips[x];_(w,z,J*(1-U)+ne*U)}else for(let x=0,w=0;x<s;x++,w+=4)_(0,w,x/(s-1));return g}Ut("AlphaImage",Pd),Ut("RGBAImage",Ao);class YI extends y{createBucket(n){return new Qx(n)}constructor(n){super(n,JI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let rw;var QI={get paint(){return rw=rw||new d({"hillshade-illumination-direction":new Jt(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Jt(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Jt(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Jt(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Jt(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Jt(Qe.paint_hillshade["hillshade-accent-color"])})}};class eA extends y{constructor(n){super(n,QI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const tA=R([{name:"a_pos",components:2,type:"Int16"}],4),{members:nA}=tA;function iw(o,n,s=2){const h=n&&n.length,g=h?n[0]*s:o.length;let _=ow(o,0,g,s,!0);const x=[];if(!_||_.next===_.prev)return x;let w,I,z;if(h&&(_=function(U,J,ne,le){const me=[];for(let be=0,Re=J.length;be<Re;be++){const Ne=ow(U,J[be]*le,be<Re-1?J[be+1]*le:U.length,le,!1);Ne===Ne.next&&(Ne.steiner=!0),me.push(cA(Ne))}me.sort(aA);for(let be=0;be<me.length;be++)ne=lA(me[be],ne);return ne}(o,n,_,s)),o.length>80*s){w=1/0,I=1/0;let U=-1/0,J=-1/0;for(let ne=s;ne<g;ne+=s){const le=o[ne],me=o[ne+1];le<w&&(w=le),me<I&&(I=me),le>U&&(U=le),me>J&&(J=me)}z=Math.max(U-w,J-I),z=z!==0?32767/z:0}return Id(_,x,s,w,I,z,0),x}function ow(o,n,s,h,g){let _;if(g===function(x,w,I,z){let U=0;for(let J=w,ne=I-z;J<I;J+=z)U+=(x[ne]-x[J])*(x[J+1]+x[ne+1]),ne=J;return U}(o,n,s,h)>0)for(let x=n;x<s;x+=h)_=lw(x/h|0,o[x],o[x+1],_);else for(let x=s-h;x>=n;x-=h)_=lw(x/h|0,o[x],o[x+1],_);return _&&Mp(_,_.next)&&(Md(_),_=_.next),_}function ju(o,n){if(!o)return o;n||(n=o);let s,h=o;do if(s=!1,h.steiner||!Mp(h,h.next)&&Cr(h.prev,h,h.next)!==0)h=h.next;else{if(Md(h),h=n=h.prev,h===h.next)break;s=!0}while(s||h!==n);return n}function Id(o,n,s,h,g,_,x){if(!o)return;!x&&_&&function(I,z,U,J){let ne=I;do ne.z===0&&(ne.z=My(ne.x,ne.y,z,U,J)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==I);ne.prevZ.nextZ=null,ne.prevZ=null,function(le){let me,be=1;do{let Re,Ne=le;le=null;let nt=null;for(me=0;Ne;){me++;let Ke=Ne,Ye=0;for(let _t=0;_t<be&&(Ye++,Ke=Ke.nextZ,Ke);_t++);let lt=be;for(;Ye>0||lt>0&&Ke;)Ye!==0&&(lt===0||!Ke||Ne.z<=Ke.z)?(Re=Ne,Ne=Ne.nextZ,Ye--):(Re=Ke,Ke=Ke.nextZ,lt--),nt?nt.nextZ=Re:le=Re,Re.prevZ=nt,nt=Re;Ne=Ke}nt.nextZ=null,be*=2}while(me>1)}(ne)}(o,h,g,_);let w=o;for(;o.prev!==o.next;){const I=o.prev,z=o.next;if(_?iA(o,h,g,_):rA(o))n.push(I.i,o.i,z.i),Md(o),o=z.next,w=z.next;else if((o=z)===w){x?x===1?Id(o=oA(ju(o),n),n,s,h,g,_,2):x===2&&sA(o,n,s,h,g,_):Id(ju(o),n,s,h,g,_,1);break}}}function rA(o){const n=o.prev,s=o,h=o.next;if(Cr(n,s,h)>=0)return!1;const g=n.x,_=s.x,x=h.x,w=n.y,I=s.y,z=h.y,U=g<_?g<x?g:x:_<x?_:x,J=w<I?w<z?w:z:I<z?I:z,ne=g>_?g>x?g:x:_>x?_:x,le=w>I?w>z?w:z:I>z?I:z;let me=h.next;for(;me!==n;){if(me.x>=U&&me.x<=ne&&me.y>=J&&me.y<=le&&Rc(g,w,_,I,x,z,me.x,me.y)&&Cr(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function iA(o,n,s,h){const g=o.prev,_=o,x=o.next;if(Cr(g,_,x)>=0)return!1;const w=g.x,I=_.x,z=x.x,U=g.y,J=_.y,ne=x.y,le=w<I?w<z?w:z:I<z?I:z,me=U<J?U<ne?U:ne:J<ne?J:ne,be=w>I?w>z?w:z:I>z?I:z,Re=U>J?U>ne?U:ne:J>ne?J:ne,Ne=My(le,me,n,s,h),nt=My(be,Re,n,s,h);let Ke=o.prevZ,Ye=o.nextZ;for(;Ke&&Ke.z>=Ne&&Ye&&Ye.z<=nt;){if(Ke.x>=le&&Ke.x<=be&&Ke.y>=me&&Ke.y<=Re&&Ke!==g&&Ke!==x&&Rc(w,U,I,J,z,ne,Ke.x,Ke.y)&&Cr(Ke.prev,Ke,Ke.next)>=0||(Ke=Ke.prevZ,Ye.x>=le&&Ye.x<=be&&Ye.y>=me&&Ye.y<=Re&&Ye!==g&&Ye!==x&&Rc(w,U,I,J,z,ne,Ye.x,Ye.y)&&Cr(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ke&&Ke.z>=Ne;){if(Ke.x>=le&&Ke.x<=be&&Ke.y>=me&&Ke.y<=Re&&Ke!==g&&Ke!==x&&Rc(w,U,I,J,z,ne,Ke.x,Ke.y)&&Cr(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.prevZ}for(;Ye&&Ye.z<=nt;){if(Ye.x>=le&&Ye.x<=be&&Ye.y>=me&&Ye.y<=Re&&Ye!==g&&Ye!==x&&Rc(w,U,I,J,z,ne,Ye.x,Ye.y)&&Cr(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function oA(o,n){let s=o;do{const h=s.prev,g=s.next.next;!Mp(h,g)&&sw(h,s,s.next,g)&&Ad(h,g)&&Ad(g,h)&&(n.push(h.i,s.i,g.i),Md(s),Md(s.next),s=o=g),s=s.next}while(s!==o);return ju(s)}function sA(o,n,s,h,g,_){let x=o;do{let w=x.next.next;for(;w!==x.prev;){if(x.i!==w.i&&hA(x,w)){let I=aw(x,w);return x=ju(x,x.next),I=ju(I,I.next),Id(x,n,s,h,g,_,0),void Id(I,n,s,h,g,_,0)}w=w.next}x=x.next}while(x!==o)}function aA(o,n){return o.x-n.x}function lA(o,n){const s=function(g,_){let x=_;const w=g.x,I=g.y;let z,U=-1/0;do{if(I<=x.y&&I>=x.next.y&&x.next.y!==x.y){const be=x.x+(I-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(be<=w&&be>U&&(U=be,z=x.x<x.next.x?x:x.next,be===w))return z}x=x.next}while(x!==_);if(!z)return null;const J=z,ne=z.x,le=z.y;let me=1/0;x=z;do{if(w>=x.x&&x.x>=ne&&w!==x.x&&Rc(I<le?w:U,I,ne,le,I<le?U:w,I,x.x,x.y)){const be=Math.abs(I-x.y)/(w-x.x);Ad(x,g)&&(be<me||be===me&&(x.x>z.x||x.x===z.x&&uA(z,x)))&&(z=x,me=be)}x=x.next}while(x!==J);return z}(o,n);if(!s)return n;const h=aw(s,o);return ju(h,h.next),ju(s,s.next)}function uA(o,n){return Cr(o.prev,o,n.prev)<0&&Cr(n.next,o,o.next)<0}function My(o,n,s,h,g){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*g|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function cA(o){let n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Rc(o,n,s,h,g,_,x,w){return(g-x)*(n-w)>=(o-x)*(_-w)&&(o-x)*(h-w)>=(s-x)*(n-w)&&(s-x)*(_-w)>=(g-x)*(h-w)}function hA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){let g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==h.i&&g.next.i!==h.i&&sw(g,g.next,s,h))return!0;g=g.next}while(g!==s);return!1}(o,n)&&(Ad(o,n)&&Ad(n,o)&&function(s,h){let g=s,_=!1;const x=(s.x+h.x)/2,w=(s.y+h.y)/2;do g.y>w!=g.next.y>w&&g.next.y!==g.y&&x<(g.next.x-g.x)*(w-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _}(o,n)&&(Cr(o.prev,o,n.prev)||Cr(o,n.prev,n))||Mp(o,n)&&Cr(o.prev,o,o.next)>0&&Cr(n.prev,n,n.next)>0)}function Cr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Mp(o,n){return o.x===n.x&&o.y===n.y}function sw(o,n,s,h){const g=zp(Cr(o,n,s)),_=zp(Cr(o,n,h)),x=zp(Cr(s,h,o)),w=zp(Cr(s,h,n));return g!==_&&x!==w||!(g!==0||!kp(o,s,n))||!(_!==0||!kp(o,h,n))||!(x!==0||!kp(s,o,h))||!(w!==0||!kp(s,n,h))}function kp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function zp(o){return o>0?1:o<0?-1:0}function Ad(o,n){return Cr(o.prev,o,o.next)<0?Cr(o,n,o.next)>=0&&Cr(o,o.prev,n)>=0:Cr(o,n,o.prev)<0||Cr(o,o.next,n)<0}function aw(o,n){const s=ky(o.i,o.x,o.y),h=ky(n.i,n.x,n.y),g=o.next,_=n.prev;return o.next=n,n.prev=o,s.next=g,g.prev=s,h.next=s,s.prev=h,_.next=h,h.prev=_,h}function lw(o,n,s,h){const g=ky(o,n,s);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function Md(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function ky(o,n,s){return{i:o,x:n,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function zy(o,n,s){const h=s.patternDependencies;let g=!1;for(const _ of n){const x=_.paint.get(`${o}-pattern`);x.isConstant()||(g=!0);const w=x.constantOr(null);w&&(g=!0,h[w.to]=!0,h[w.from]=!0)}return g}function Fy(o,n,s,h,g){const _=g.patternDependencies;for(const x of n){const w=x.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let I=w.evaluate({zoom:h-1},s,{},g.availableImages),z=w.evaluate({zoom:h},s,{},g.availableImages),U=w.evaluate({zoom:h+1},s,{},g.availableImages);I=I&&I.name?I.name:I,z=z&&z.name?z.name:z,U=U&&U.name?U.name:U,_[I]=!0,_[z]=!0,_[U]=!0,s.patterns[x.id]={min:I,mid:z,max:U}}}return s}class jy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new El,this.indexArray=new Zr,this.indexArray2=new ur,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Dr,this.segments2=new Dr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=zy("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:w,id:I,index:z,sourceLayerIndex:U}of n){const J=this.layers[0]._featureFilter.needGeometry,ne=Fu(w,J);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),ne,h))continue;const le=_?g.evaluate(ne,{},h,s.availableImages):void 0,me={id:I,properties:w.properties,type:w.type,sourceLayerIndex:U,index:z,geometry:J?ne.geometry:zu(w),patterns:{},sortKey:le};x.push(me)}_&&x.sort((w,I)=>w.sortKey-I.sortKey);for(const w of x){const{geometry:I,index:z,sourceLayerIndex:U}=w;if(this.hasPattern){const J=Fy("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(w,I,z,h,{});s.featureIndex.insert(n[z].feature,I,z,U,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,nA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,g,_){for(const x of vl(s,500)){let w=0;for(const le of x)w+=le.length;const I=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),z=I.vertexLength,U=[],J=[];for(const le of x){if(le.length===0)continue;le!==x[0]&&J.push(U.length/2);const me=this.segments2.prepareSegment(le.length,this.layoutVertexArray,this.indexArray2),be=me.vertexLength;this.layoutVertexArray.emplaceBack(le[0].x,le[0].y),this.indexArray2.emplaceBack(be+le.length-1,be),U.push(le[0].x),U.push(le[0].y);for(let Re=1;Re<le.length;Re++)this.layoutVertexArray.emplaceBack(le[Re].x,le[Re].y),this.indexArray2.emplaceBack(be+Re-1,be+Re),U.push(le[Re].x),U.push(le[Re].y);me.vertexLength+=le.length,me.primitiveLength+=le.length}const ne=iw(U,J);for(let le=0;le<ne.length;le+=3)this.indexArray.emplaceBack(z+ne[le],z+ne[le+1],z+ne[le+2]);I.vertexLength+=w,I.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}let uw,cw;Ut("FillBucket",jy,{omit:["layers","patternFeatures"]});var dA={get paint(){return cw=cw||new d({"fill-antialias":new Jt(Qe.paint_fill["fill-antialias"]),"fill-opacity":new an(Qe.paint_fill["fill-opacity"]),"fill-color":new an(Qe.paint_fill["fill-color"]),"fill-outline-color":new an(Qe.paint_fill["fill-outline-color"]),"fill-translate":new Jt(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Jt(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new v(Qe.paint_fill["fill-pattern"])})},get layout(){return uw=uw||new d({"fill-sort-key":new an(Qe.layout_fill["fill-sort-key"])})}};class fA extends y{constructor(n){super(n,dA)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new jy(n)}queryRadius(){return Pp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,g,_,x,w){return Wx(Ip(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),g)}isTileClipped(){return!0}}const pA=R([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mA=R([{name:"a_centroid",components:2,type:"Int16"}],4),{members:gA}=pA;var Al={},yA=P,hw=Oc;function Oc(o,n,s,h,g){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=g,o.readFields(vA,this,n)}function vA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,g){for(var _=h.readVarint()+h.pos;h.pos<_;){var x=g._keys[h.readVarint()],w=g._values[h.readVarint()];g.properties[x]=w}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function _A(o){for(var n,s,h=0,g=0,_=o.length,x=_-1;g<_;x=g++)h+=((s=o[x]).x-(n=o[g]).x)*(n.y+s.y);return h}Oc.types=["Unknown","Point","LineString","Polygon"],Oc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,g=0,_=0,x=0,w=[];o.pos<s;){if(g<=0){var I=o.readVarint();h=7&I,g=I>>3}if(g--,h===1||h===2)_+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new yA(_,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},Oc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,g=0,_=0,x=1/0,w=-1/0,I=1/0,z=-1/0;o.pos<n;){if(h<=0){var U=o.readVarint();s=7&U,h=U>>3}if(h--,s===1||s===2)(g+=o.readSVarint())<x&&(x=g),g>w&&(w=g),(_+=o.readSVarint())<I&&(I=_),_>z&&(z=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,w,z]},Oc.prototype.toGeoJSON=function(o,n,s){var h,g,_=this.extent*Math.pow(2,s),x=this.extent*o,w=this.extent*n,I=this.loadGeometry(),z=Oc.types[this.type];function U(le){for(var me=0;me<le.length;me++){var be=le[me];le[me]=[360*(be.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+w)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(h=0;h<I.length;h++)J[h]=I[h][0];U(I=J);break;case 2:for(h=0;h<I.length;h++)U(I[h]);break;case 3:for(I=function(le){var me=le.length;if(me<=1)return[le];for(var be,Re,Ne=[],nt=0;nt<me;nt++){var Ke=_A(le[nt]);Ke!==0&&(Re===void 0&&(Re=Ke<0),Re===Ke<0?(be&&Ne.push(be),be=[le[nt]]):be.push(le[nt]))}return be&&Ne.push(be),Ne}(I),h=0;h<I.length;h++)for(g=0;g<I[h].length;g++)U(I[h][g])}I.length===1?I=I[0]:z="Multi"+z;var ne={type:"Feature",geometry:{type:z,coordinates:I},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var xA=hw,dw=fw;function fw(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(wA,this,n),this.length=this._features.length}function wA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var g=null,_=h.readVarint()+h.pos;h.pos<_;){var x=h.readVarint()>>3;g=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return g}(s))}fw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new xA(this._pbf,n,this.extent,this._keys,this._values)};var bA=dw;function SA(o,n,s){if(o===3){var h=new bA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Al.VectorTile=function(o,n){this.layers=o.readFields(SA,{},n)},Al.VectorTileFeature=hw,Al.VectorTileLayer=dw;const EA=Al.VectorTileFeature.types,Ry=Math.pow(2,13);function kd(o,n,s,h,g,_,x,w){o.emplaceBack(n,s,2*Math.floor(h*Ry)+x,g*Ry*2,_*Ry*2,Math.round(w))}class Oy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new ja,this.centroidVertexArray=new Fa,this.indexArray=new Zr,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Dr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=zy("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:x,sourceLayerIndex:w}of n){const I=this.layers[0]._featureFilter.needGeometry,z=Fu(g,I);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),z,h))continue;const U={id:_,sourceLayerIndex:w,index:x,geometry:I?z.geometry:zu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Fy("fill-extrusion",this.layers,U,this.zoom,s)):this.addFeature(U,U.geometry,x,h,{}),s.featureIndex.insert(g,U.geometry,x,w,this.index,!0)}}addFeatures(n,s,h){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,mA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,g,_){for(const x of vl(s,500)){const w={x:0,y:0,vertexCount:0};let I=0;for(const me of x)I+=me.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const me of x){if(me.length===0||CA(me))continue;let be=0;for(let Re=0;Re<me.length;Re++){const Ne=me[Re];if(Re>=1){const nt=me[Re-1];if(!TA(Ne,nt)){z.vertexLength+4>Dr.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ke=Ne.sub(nt)._perp()._unit(),Ye=nt.dist(Ne);be+Ye>32768&&(be=0),kd(this.layoutVertexArray,Ne.x,Ne.y,Ke.x,Ke.y,0,0,be),kd(this.layoutVertexArray,Ne.x,Ne.y,Ke.x,Ke.y,0,1,be),w.x+=2*Ne.x,w.y+=2*Ne.y,w.vertexCount+=2,be+=Ye,kd(this.layoutVertexArray,nt.x,nt.y,Ke.x,Ke.y,0,0,be),kd(this.layoutVertexArray,nt.x,nt.y,Ke.x,Ke.y,0,1,be),w.x+=2*nt.x,w.y+=2*nt.y,w.vertexCount+=2;const lt=z.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+I>Dr.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),EA[n.type]!=="Polygon")continue;const U=[],J=[],ne=z.vertexLength;for(const me of x)if(me.length!==0){me!==x[0]&&J.push(U.length/2);for(let be=0;be<me.length;be++){const Re=me[be];kd(this.layoutVertexArray,Re.x,Re.y,0,0,1,1,0),w.x+=Re.x,w.y+=Re.y,w.vertexCount+=1,U.push(Re.x),U.push(Re.y)}}const le=iw(U,J);for(let me=0;me<le.length;me+=3)this.indexArray.emplaceBack(ne+le[me],ne+le[me+2],ne+le[me+1]);z.primitiveLength+=le.length/3,z.vertexLength+=I;for(let me=0;me<w.vertexCount;me++){const be=Math.floor(w.x/w.vertexCount),Re=Math.floor(w.y/w.vertexCount);this.centroidVertexArray.emplaceBack(be,Re)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}}function TA(o,n){return o.x===n.x&&(o.x<0||o.x>jr)||o.y===n.y&&(o.y<0||o.y>jr)}function CA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>jr)||o.every(n=>n.y<0)||o.every(n=>n.y>jr)}let pw;Ut("FillExtrusionBucket",Oy,{omit:["layers","features"]});var PA={get paint(){return pw=pw||new d({"fill-extrusion-opacity":new Jt(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new an(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Jt(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Jt(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new v(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new an(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new an(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Jt(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class IA extends y{constructor(n){super(n,PA)}createBucket(n){return new Oy(n)}queryRadius(){return Pp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,g,_,x,w,I){const z=Ip(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),U=this.paint.get("fill-extrusion-height").evaluate(s,h),J=this.paint.get("fill-extrusion-base").evaluate(s,h),ne=function(me,be,Re,Ne){const nt=[];for(const Ke of me){const Ye=[Ke.x,Ke.y,0,1];Ap(Ye,Ye,be),nt.push(new b(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return nt}(z,I),le=function(me,be,Re,Ne){const nt=[],Ke=[],Ye=Ne[8]*be,lt=Ne[9]*be,_t=Ne[10]*be,Dt=Ne[11]*be,on=Ne[8]*Re,Rt=Ne[9]*Re,kt=Ne[10]*Re,qt=Ne[11]*Re;for(const $t of me){const Nt=[],ft=[];for(const Yt of $t){const Xt=Yt.x,dn=Yt.y,qn=Ne[0]*Xt+Ne[4]*dn+Ne[12],Hn=Ne[1]*Xt+Ne[5]*dn+Ne[13],Wr=Ne[2]*Xt+Ne[6]*dn+Ne[14],rs=Ne[3]*Xt+Ne[7]*dn+Ne[15],ai=Wr+_t,xr=rs+Dt,ji=qn+on,Ri=Hn+Rt,Oi=Wr+kt,wr=rs+qt,Hr=new b((qn+Ye)/xr,(Hn+lt)/xr);Hr.z=ai/xr,Nt.push(Hr);const bi=new b(ji/wr,Ri/wr);bi.z=Oi/wr,ft.push(bi)}nt.push(Nt),Ke.push(ft)}return[nt,Ke]}(g,J,U,I);return function(me,be,Re){let Ne=1/0;Wx(Re,be)&&(Ne=mw(Re,be[0]));for(let nt=0;nt<be.length;nt++){const Ke=be[nt],Ye=me[nt];for(let lt=0;lt<Ke.length-1;lt++){const _t=Ke[lt],Dt=[_t,Ke[lt+1],Ye[lt+1],Ye[lt],_t];Zx(Re,Dt)&&(Ne=Math.min(Ne,mw(Re,Dt)))}}return Ne!==1/0&&Ne}(le[0],le[1],ne)}}function zd(o,n){return o.x*n.x+o.y*n.y}function mw(o,n){if(o.length===1){let s=0;const h=n[s++];let g;for(;!g||h.equals(g);)if(g=n[s++],!g)return 1/0;for(;s<n.length;s++){const _=n[s],x=o[0],w=g.sub(h),I=_.sub(h),z=x.sub(h),U=zd(w,w),J=zd(w,I),ne=zd(I,I),le=zd(z,w),me=zd(z,I),be=U*ne-J*J,Re=(ne*le-J*me)/be,Ne=(U*me-J*le)/be,nt=h.z*(1-Re-Ne)+g.z*Re+_.z*Ne;if(isFinite(nt))return nt}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const AA=R([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:MA}=AA,kA=R([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:zA}=kA,FA=Al.VectorTileFeature.types,jA=Math.cos(Math.PI/180*37.5),gw=Math.pow(2,14)/.5;class Ly{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ic,this.layoutVertexArray2=new _d,this.indexArray=new Zr,this.programConfigurations=new ku(n.layers,n.zoom),this.segments=new Dr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=zy("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:w,id:I,index:z,sourceLayerIndex:U}of n){const J=this.layers[0]._featureFilter.needGeometry,ne=Fu(w,J);if(!this.layers[0]._featureFilter.filter(new Qn(this.zoom),ne,h))continue;const le=_?g.evaluate(ne,{},h):void 0,me={id:I,properties:w.properties,type:w.type,sourceLayerIndex:U,index:z,geometry:J?ne.geometry:zu(w),patterns:{},sortKey:le};x.push(me)}_&&x.sort((w,I)=>w.sortKey-I.sortKey);for(const w of x){const{geometry:I,index:z,sourceLayerIndex:U}=w;if(this.hasPattern){const J=Fy("line",this.layers,w,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(w,I,z,h,{});s.featureIndex.insert(n[z].feature,I,z,U,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,zA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,MA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,g,_){const x=this.layers[0].layout,w=x.get("line-join").evaluate(n,{}),I=x.get("line-cap"),z=x.get("line-miter-limit"),U=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const J of s)this.addLine(J,n,w,I,z,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,_,g)}addLine(n,s,h,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ne=0;Ne<n.length-1;Ne++)this.totalDistance+=n[Ne].dist(n[Ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=FA[s.type]==="Polygon";let I=n.length;for(;I>=2&&n[I-1].equals(n[I-2]);)I--;let z=0;for(;z<I-1&&n[z].equals(n[z+1]);)z++;if(I<(w?3:2))return;h==="bevel"&&(_=1.05);const U=this.overscaling<=16?15*jr/(512*this.overscaling):0,J=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let ne,le,me,be,Re;this.e1=this.e2=-1,w&&(ne=n[I-2],Re=n[z].sub(ne)._unit()._perp());for(let Ne=z;Ne<I;Ne++){if(me=Ne===I-1?w?n[z+1]:void 0:n[Ne+1],me&&n[Ne].equals(me))continue;Re&&(be=Re),ne&&(le=ne),ne=n[Ne],Re=me?me.sub(ne)._unit()._perp():be,be=be||Re;let nt=be.add(Re);nt.x===0&&nt.y===0||nt._unit();const Ke=be.x*Re.x+be.y*Re.y,Ye=nt.x*Re.x+nt.y*Re.y,lt=Ye!==0?1/Ye:1/0,_t=2*Math.sqrt(2-2*Ye),Dt=Ye<jA&&le&&me,on=be.x*Re.y-be.y*Re.x>0;if(Dt&&Ne>z){const qt=ne.dist(le);if(qt>2*U){const $t=ne.sub(ne.sub(le)._mult(U/qt)._round());this.updateDistance(le,$t),this.addCurrentVertex($t,be,0,0,J),le=$t}}const Rt=le&&me;let kt=Rt?h:w?"butt":g;if(Rt&&kt==="round"&&(lt<x?kt="miter":lt<=2&&(kt="fakeround")),kt==="miter"&&lt>_&&(kt="bevel"),kt==="bevel"&&(lt>2&&(kt="flipbevel"),lt<_&&(kt="miter")),le&&this.updateDistance(le,ne),kt==="miter")nt._mult(lt),this.addCurrentVertex(ne,nt,0,0,J);else if(kt==="flipbevel"){if(lt>100)nt=Re.mult(-1);else{const qt=lt*be.add(Re).mag()/be.sub(Re).mag();nt._perp()._mult(qt*(on?-1:1))}this.addCurrentVertex(ne,nt,0,0,J),this.addCurrentVertex(ne,nt.mult(-1),0,0,J)}else if(kt==="bevel"||kt==="fakeround"){const qt=-Math.sqrt(lt*lt-1),$t=on?qt:0,Nt=on?0:qt;if(le&&this.addCurrentVertex(ne,be,$t,Nt,J),kt==="fakeround"){const ft=Math.round(180*_t/Math.PI/20);for(let Yt=1;Yt<ft;Yt++){let Xt=Yt/ft;if(Xt!==.5){const qn=Xt-.5;Xt+=Xt*qn*(Xt-1)*((1.0904+Ke*(Ke*(3.55645-1.43519*Ke)-3.2452))*qn*qn+(.848013+Ke*(.215638*Ke-1.06021)))}const dn=Re.sub(be)._mult(Xt)._add(be)._unit()._mult(on?-1:1);this.addHalfVertex(ne,dn.x,dn.y,!1,on,0,J)}}me&&this.addCurrentVertex(ne,Re,-$t,-Nt,J)}else if(kt==="butt")this.addCurrentVertex(ne,nt,0,0,J);else if(kt==="square"){const qt=le?1:-1;this.addCurrentVertex(ne,nt,qt,qt,J)}else kt==="round"&&(le&&(this.addCurrentVertex(ne,be,0,0,J),this.addCurrentVertex(ne,be,1,1,J,!0)),me&&(this.addCurrentVertex(ne,Re,-1,-1,J,!0),this.addCurrentVertex(ne,Re,0,0,J)));if(Dt&&Ne<I-1){const qt=ne.dist(me);if(qt>2*U){const $t=ne.add(me.sub(ne)._mult(U/qt)._round());this.updateDistance(ne,$t),this.addCurrentVertex($t,Re,0,0,J),ne=$t}}}}addCurrentVertex(n,s,h,g,_,x=!1){const w=s.y*g-s.x,I=-s.y-s.x*g;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,_),this.addHalfVertex(n,w,I,x,!0,-g,_),this.distance>gw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,g,_,x))}addHalfVertex({x:n,y:s},h,g,_,x,w,I){const z=.5*(this.lineClips?this.scaledDistance*(gw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(w===0?0:w<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const U=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,U),I.primitiveLength++),x?this.e2=U:this.e1=U}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let yw,vw;Ut("LineBucket",Ly,{omit:["layers","patternFeatures"]});var _w={get paint(){return vw=vw||new d({"line-opacity":new an(Qe.paint_line["line-opacity"]),"line-color":new an(Qe.paint_line["line-color"]),"line-translate":new Jt(Qe.paint_line["line-translate"]),"line-translate-anchor":new Jt(Qe.paint_line["line-translate-anchor"]),"line-width":new an(Qe.paint_line["line-width"]),"line-gap-width":new an(Qe.paint_line["line-gap-width"]),"line-offset":new an(Qe.paint_line["line-offset"]),"line-blur":new an(Qe.paint_line["line-blur"]),"line-dasharray":new r(Qe.paint_line["line-dasharray"]),"line-pattern":new v(Qe.paint_line["line-pattern"]),"line-gradient":new l(Qe.paint_line["line-gradient"])})},get layout(){return yw=yw||new d({"line-cap":new Jt(Qe.layout_line["line-cap"]),"line-join":new an(Qe.layout_line["line-join"]),"line-miter-limit":new Jt(Qe.layout_line["line-miter-limit"]),"line-round-limit":new Jt(Qe.layout_line["line-round-limit"]),"line-sort-key":new an(Qe.layout_line["line-sort-key"])})}};class RA extends an{possiblyEvaluate(n,s){return s=new Qn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,g){return s=T({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,g)}}let Fp;class OA extends y{constructor(n){super(n,_w),this.gradientVersion=0,Fp||(Fp=new RA(_w.paint.properties["line-width"].specification),Fp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof ms,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Fp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Ly(n)}queryRadius(n){const s=n,h=xw(Td("line-width",this,s),Td("line-gap-width",this,s)),g=Td("line-offset",this,s);return h/2+Math.abs(g)+Pp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,g,_,x,w){const I=Ip(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),z=w/2*xw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),U=this.paint.get("line-offset").evaluate(s,h);return U&&(g=function(J,ne){const le=[];for(let me=0;me<J.length;me++){const be=J[me],Re=[];for(let Ne=0;Ne<be.length;Ne++){const nt=be[Ne-1],Ke=be[Ne],Ye=be[Ne+1],lt=Ne===0?new b(0,0):Ke.sub(nt)._unit()._perp(),_t=Ne===be.length-1?new b(0,0):Ye.sub(Ke)._unit()._perp(),Dt=lt._add(_t)._unit(),on=Dt.x*_t.x+Dt.y*_t.y;on!==0&&Dt._mult(1/on),Re.push(Dt._mult(ne)._add(Ke))}le.push(Re)}return le}(g,U*w)),function(J,ne,le){for(let me=0;me<ne.length;me++){const be=ne[me];if(J.length>=3){for(let Re=0;Re<be.length;Re++)if(Fc(J,be[Re]))return!0}if(ZI(J,be,le))return!0}return!1}(I,g,z)}isTileClipped(){return!0}}function xw(o,n){return n>0?n+2*o:o}const LA=R([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),DA=R([{name:"a_projected_pos",components:3,type:"Float32"}],4);R([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const BA=R([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);R([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ww=R([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),NA=R([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function UA(o,n,s){return o.sections.forEach(h=>{h.text=function(g,_,x){const w=_.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?g=g.toLocaleUpperCase():w==="lowercase"&&(g=g.toLocaleLowerCase()),Js.applyArabicShaping&&(g=Js.applyArabicShaping(g)),g}(h.text,n,s)}),o}R([{name:"triangle",components:3,type:"Uint16"}]),R([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),R([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),R([{type:"Float32",name:"offsetX"}]),R([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),R([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Fd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Br=24,bw=Wn,Sw=function(o,n,s,h,g){var _,x,w=8*g-h-1,I=(1<<w)-1,z=I>>1,U=-7,J=g-1,ne=-1,le=o[n+J];for(J+=ne,_=le&(1<<-U)-1,le>>=-U,U+=w;U>0;_=256*_+o[n+J],J+=ne,U-=8);for(x=_&(1<<-U)-1,_>>=-U,U+=h;U>0;x=256*x+o[n+J],J+=ne,U-=8);if(_===0)_=1-z;else{if(_===I)return x?NaN:1/0*(le?-1:1);x+=Math.pow(2,h),_-=z}return(le?-1:1)*x*Math.pow(2,_-h)},Ew=function(o,n,s,h,g,_){var x,w,I,z=8*_-g-1,U=(1<<z)-1,J=U>>1,ne=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=0,me=1,be=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,x=U):(x=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-x))<1&&(x--,I*=2),(n+=x+J>=1?ne/I:ne*Math.pow(2,1-J))*I>=2&&(x++,I/=2),x+J>=U?(w=0,x=U):x+J>=1?(w=(n*I-1)*Math.pow(2,g),x+=J):(w=n*Math.pow(2,J-1)*Math.pow(2,g),x=0));g>=8;o[s+le]=255&w,le+=me,w/=256,g-=8);for(x=x<<g|w,z+=g;z>0;o[s+le]=255&x,le+=me,x/=256,z-=8);o[s+le-me]|=128*be};function Wn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Wn.Varint=0,Wn.Fixed64=1,Wn.Bytes=2,Wn.Fixed32=5;var Dy=4294967296,Tw=1/Dy,Cw=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Oa(o){return o.type===Wn.Bytes?o.readVarint()+o.pos:o.pos+1}function Lc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Pw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var g=s.pos-1;g>=o;g--)s.buf[g+h]=s.buf[g]}function $A(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function VA(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function GA(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function ZA(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function WA(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function HA(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function XA(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function KA(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function qA(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function jp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Dc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Iw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Wn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),g=h>>3,_=this.pos;this.type=7&h,o(g,n,this),this.pos===_&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=jp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Iw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=jp(this.buf,this.pos)+jp(this.buf,this.pos+4)*Dy;return this.pos+=8,o},readSFixed64:function(){var o=jp(this.buf,this.pos)+Iw(this.buf,this.pos+4)*Dy;return this.pos+=8,o},readFloat:function(){var o=Sw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Sw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(g,_,x){var w,I,z=x.buf;if(w=(112&(I=z[x.pos++]))>>4,I<128||(w|=(127&(I=z[x.pos++]))<<3,I<128)||(w|=(127&(I=z[x.pos++]))<<10,I<128)||(w|=(127&(I=z[x.pos++]))<<17,I<128)||(w|=(127&(I=z[x.pos++]))<<24,I<128)||(w|=(1&(I=z[x.pos++]))<<31,I<128))return Lc(g,w,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Cw?function(s,h,g){return Cw.decode(s.subarray(h,g))}(this.buf,n,o):function(s,h,g){for(var _="",x=h;x<g;){var w,I,z,U=s[x],J=null,ne=U>239?4:U>223?3:U>191?2:1;if(x+ne>g)break;ne===1?U<128&&(J=U):ne===2?(192&(w=s[x+1]))==128&&(J=(31&U)<<6|63&w)<=127&&(J=null):ne===3?(I=s[x+2],(192&(w=s[x+1]))==128&&(192&I)==128&&((J=(15&U)<<12|(63&w)<<6|63&I)<=2047||J>=55296&&J<=57343)&&(J=null)):ne===4&&(I=s[x+2],z=s[x+3],(192&(w=s[x+1]))==128&&(192&I)==128&&(192&z)==128&&((J=(15&U)<<18|(63&w)<<12|(63&I)<<6|63&z)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,ne=1):J>65535&&(J-=65536,_+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),_+=String.fromCharCode(J),x+=ne}return _}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Wn.Bytes)return o.push(this.readVarint(n));var s=Oa(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSVarint());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Wn.Bytes)return o.push(this.readBoolean());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFloat());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Wn.Bytes)return o.push(this.readDouble());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFixed32());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSFixed32());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFixed64());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSFixed64());var n=Oa(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Wn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Wn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Wn.Fixed32)this.pos+=4;else{if(n!==Wn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Dc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*Tw),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Dc(this.buf,-1&o,this.pos),Dc(this.buf,Math.floor(o*Tw),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,g;if(n>=0?(h=n%4294967296|0,g=n/4294967296|0):(g=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,g=g+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,w){w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,w.buf[w.pos]=127&(_>>>=7)}(h,0,s),function(_,x){var w=(7&_)<<4;x.buf[x.pos++]|=w|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,g,_){for(var x,w,I=0;I<g.length;I++){if((x=g.charCodeAt(I))>55295&&x<57344){if(!w){x>56319||I+1===g.length?(h[_++]=239,h[_++]=191,h[_++]=189):w=x;continue}if(x<56320){h[_++]=239,h[_++]=191,h[_++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(h[_++]=239,h[_++]=191,h[_++]=189,w=null);x<128?h[_++]=x:(x<2048?h[_++]=x>>6|192:(x<65536?h[_++]=x>>12|224:(h[_++]=x>>18|240,h[_++]=x>>12&63|128),h[_++]=x>>6&63|128),h[_++]=63&x|128)}return _}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Pw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Ew(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Ew(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Pw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Wn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,$A,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,VA,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,WA,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,GA,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,ZA,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,HA,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,XA,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,KA,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,qA,n)},writeBytesField:function(o,n){this.writeTag(o,Wn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Wn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Wn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Wn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var By=S(bw);const Ny=3;function JA(o,n,s){o===1&&s.readMessage(YA,n)}function YA(o,n,s){if(o===3){const{id:h,bitmap:g,width:_,height:x,left:w,top:I,advance:z}=s.readMessage(QA,{});n.push({id:h,bitmap:new Pd({width:_+2*Ny,height:x+2*Ny},g),metrics:{width:_,height:x,left:w,top:I,advance:z}})}}function QA(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Aw=Ny;function Mw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,w)=>w.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let g=0,_=0;for(const x of o)for(let w=h.length-1;w>=0;w--){const I=h[w];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===I.w&&x.h===I.h){const z=h.pop();w<h.length&&(h[w]=z)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(h.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:g,h:_,fill:n/(g*_)||0}}const Zi=1;class Uy{constructor(n,{pixelRatio:s,version:h,stretchX:g,stretchY:_,content:x,textFitWidth:w,textFitHeight:I}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=w,this.textFitHeight=I}get tl(){return[this.paddedRect.x+Zi,this.paddedRect.y+Zi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Zi,this.paddedRect.y+this.paddedRect.h-Zi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Zi)/this.pixelRatio,(this.paddedRect.h-2*Zi)/this.pixelRatio]}}class kw{constructor(n,s){const h={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,h,_),this.addImages(s,g,_);const{w:x,h:w}=Mw(_),I=new Ao({width:x||1,height:w||1});for(const z in n){const U=n[z],J=h[z].paddedRect;Ao.copy(U.data,I,{x:0,y:0},{x:J.x+Zi,y:J.y+Zi},U.data)}for(const z in s){const U=s[z],J=g[z].paddedRect,ne=J.x+Zi,le=J.y+Zi,me=U.data.width,be=U.data.height;Ao.copy(U.data,I,{x:0,y:0},{x:ne,y:le},U.data),Ao.copy(U.data,I,{x:0,y:be-1},{x:ne,y:le-1},{width:me,height:1}),Ao.copy(U.data,I,{x:0,y:0},{x:ne,y:le+be},{width:me,height:1}),Ao.copy(U.data,I,{x:me-1,y:0},{x:ne-1,y:le},{width:1,height:be}),Ao.copy(U.data,I,{x:0,y:0},{x:ne+me,y:le},{width:1,height:be})}this.image=I,this.iconPositions=h,this.patternPositions=g}addImages(n,s,h){for(const g in n){const _=n[g],x={x:0,y:0,w:_.data.width+2*Zi,h:_.data.height+2*Zi};h.push(x),s[g]=new Uy(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[g,_]=n.tl;h.update(s.data,void 0,{x:g,y:_})}}var Ml;Ut("ImagePosition",Uy),Ut("ImageAtlas",kw),m.ai=void 0,(Ml=m.ai||(m.ai={}))[Ml.none=0]="none",Ml[Ml.horizontal=1]="horizontal",Ml[Ml.vertical=2]="vertical",Ml[Ml.horizontalOnly=3]="horizontalOnly";const jd=-17;class Rd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new Rd;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new Rd;return s.imageName=n,s}}class Bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Bc;for(let g=0;g<n.sections.length;g++){const _=n.sections[g];_.image?h.addImageSection(_):h.addTextSection(_,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const g=n.charCodeAt(h+1)||null,_=n.charCodeAt(h-1)||null;s+=g&&_p(g)&&!Fd[n[h+1]]||_&&_p(_)&&!Fd[n[h-1]]||!Fd[n[h]]?n[h]:Fd[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Op[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Op[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Bc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Rd.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let g=0;g<n.text.length;++g)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Rd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rp(o,n,s,h,g,_,x,w,I,z,U,J,ne,le,me){const be=Bc.fromFeature(o,g);let Re;J===m.ai.vertical&&be.verticalizePunctuation();const{processBidirectionalText:Ne,processStyledBidirectionalText:nt}=Js;if(Ne&&be.sections.length===1){Re=[];const lt=Ne(be.toString(),$y(be,z,_,n,h,le));for(const _t of lt){const Dt=new Bc;Dt.text=_t,Dt.sections=be.sections;for(let on=0;on<_t.length;on++)Dt.sectionIndex.push(0);Re.push(Dt)}}else if(nt){Re=[];const lt=nt(be.text,be.sectionIndex,$y(be,z,_,n,h,le));for(const _t of lt){const Dt=new Bc;Dt.text=_t[0],Dt.sectionIndex=_t[1],Dt.sections=be.sections,Re.push(Dt)}}else Re=function(lt,_t){const Dt=[],on=lt.text;let Rt=0;for(const kt of _t)Dt.push(lt.substring(Rt,kt)),Rt=kt;return Rt<on.length&&Dt.push(lt.substring(Rt,on.length)),Dt}(be,$y(be,z,_,n,h,le));const Ke=[],Ye={positionedLines:Ke,text:be.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(lt,_t,Dt,on,Rt,kt,qt,$t,Nt,ft,Yt,Xt){let dn=0,qn=jd,Hn=0,Wr=0;const rs=$t==="right"?1:$t==="left"?0:.5;let ai=0;for(const wr of Rt){wr.trim();const Hr=wr.getMaxScale(),bi=(Hr-1)*Br,li={positionedGlyphs:[],lineOffset:0};lt.positionedLines[ai]=li;const Li=li.positionedGlyphs;let ui=0;if(!wr.length()){qn+=kt,++ai;continue}for(let Wi=0;Wi<wr.length();Wi++){const Rn=wr.getSection(Wi),er=wr.getSectionIndex(Wi),ar=wr.getCharCode(Wi);let lo=0,pr=null,Vc=null,ta=null,na=Br;const is=!(Nt===m.ai.horizontal||!Yt&&!gd(ar)||Yt&&(Op[ar]||(xr=ar,Ot.Arabic(xr)||Ot["Arabic Supplement"](xr)||Ot["Arabic Extended-A"](xr)||Ot["Arabic Presentation Forms-A"](xr)||Ot["Arabic Presentation Forms-B"](xr))));if(Rn.imageName){const zo=on[Rn.imageName];if(!zo)continue;ta=Rn.imageName,lt.iconsInText=lt.iconsInText||!0,Vc=zo.paddedRect;const Jr=zo.displaySize;Rn.scale=Rn.scale*Br/Xt,pr={width:Jr[0],height:Jr[1],left:Zi,top:-Aw,advance:is?Jr[1]:Jr[0]},lo=bi+(Br-Jr[1]*Rn.scale),na=pr.advance;const La=is?Jr[0]*Rn.scale-Br*Hr:Jr[1]*Rn.scale-Br*Hr;La>0&&La>ui&&(ui=La)}else{const zo=Dt[Rn.fontStack],Jr=zo&&zo[ar];if(Jr&&Jr.rect)Vc=Jr.rect,pr=Jr.metrics;else{const La=_t[Rn.fontStack],Nd=La&&La[ar];if(!Nd)continue;pr=Nd.metrics}lo=(Hr-Rn.scale)*Br}is?(lt.verticalizable=!0,Li.push({glyph:ar,imageName:ta,x:dn,y:qn+lo,vertical:is,scale:Rn.scale,fontStack:Rn.fontStack,sectionIndex:er,metrics:pr,rect:Vc}),dn+=na*Rn.scale+ft):(Li.push({glyph:ar,imageName:ta,x:dn,y:qn+lo,vertical:is,scale:Rn.scale,fontStack:Rn.fontStack,sectionIndex:er,metrics:pr,rect:Vc}),dn+=pr.advance*Rn.scale+ft)}Li.length!==0&&(Hn=Math.max(dn-ft,Hn),rM(Li,0,Li.length-1,rs,ui)),dn=0;const ko=kt*Hr+ui;li.lineOffset=Math.max(ui,bi),qn+=ko,Wr=Math.max(ko,Wr),++ai}var xr;const ji=qn-jd,{horizontalAlign:Ri,verticalAlign:Oi}=Vy(qt);(function(wr,Hr,bi,li,Li,ui,ko,Wi,Rn){const er=(Hr-bi)*Li;let ar=0;ar=ui!==ko?-Wi*li-jd:(-li*Rn+.5)*ko;for(const lo of wr)for(const pr of lo.positionedGlyphs)pr.x+=er,pr.y+=ar})(lt.positionedLines,rs,Ri,Oi,Hn,Wr,kt,ji,Rt.length),lt.top+=-Oi*ji,lt.bottom=lt.top+ji,lt.left+=-Ri*Hn,lt.right=lt.left+Hn}(Ye,n,s,h,Re,x,w,I,J,z,ne,me),!function(lt){for(const _t of lt)if(_t.positionedGlyphs.length!==0)return!1;return!0}(Ke)&&Ye}const Op={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},eM={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},tM={40:!0};function zw(o,n,s,h,g,_){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Br/_+g:0}{const x=s[n.fontStack],w=x&&x[o];return w?w.metrics.advance*n.scale+g:0}}function Fw(o,n,s,h){const g=Math.pow(o-n,2);return h?o<n?g/2:2*g:g+Math.abs(s)*s}function nM(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function jw(o,n,s,h,g,_){let x=null,w=Fw(n,s,g,_);for(const I of h){const z=Fw(n-I.x,s,g,_)+I.badness;z<=w&&(x=I,w=z)}return{index:o,x:n,priorBreak:x,badness:w}}function Rw(o){return o?Rw(o.priorBreak).concat(o.index):[]}function $y(o,n,s,h,g,_){if(!o)return[];const x=[],w=function(J,ne,le,me,be,Re){let Ne=0;for(let nt=0;nt<J.length();nt++){const Ke=J.getSection(nt);Ne+=zw(J.getCharCode(nt),Ke,me,be,ne,Re)}return Ne/Math.max(1,Math.ceil(Ne/le))}(o,n,s,h,g,_),I=o.text.indexOf("​")>=0;let z=0;for(let J=0;J<o.length();J++){const ne=o.getSection(J),le=o.getCharCode(J);if(Op[le]||(z+=zw(le,ne,h,g,n,_)),J<o.length()-1){const me=!((U=le)<11904||!(Ot["Bopomofo Extended"](U)||Ot.Bopomofo(U)||Ot["CJK Compatibility Forms"](U)||Ot["CJK Compatibility Ideographs"](U)||Ot["CJK Compatibility"](U)||Ot["CJK Radicals Supplement"](U)||Ot["CJK Strokes"](U)||Ot["CJK Symbols and Punctuation"](U)||Ot["CJK Unified Ideographs Extension A"](U)||Ot["CJK Unified Ideographs"](U)||Ot["Enclosed CJK Letters and Months"](U)||Ot["Halfwidth and Fullwidth Forms"](U)||Ot.Hiragana(U)||Ot["Ideographic Description Characters"](U)||Ot["Kangxi Radicals"](U)||Ot["Katakana Phonetic Extensions"](U)||Ot.Katakana(U)||Ot["Vertical Forms"](U)||Ot["Yi Radicals"](U)||Ot["Yi Syllables"](U)));(eM[le]||me||ne.imageName||J!==o.length()-2&&tM[o.getCharCode(J+1)])&&x.push(jw(J+1,z,w,x,nM(le,o.getCharCode(J+1),me&&I),!1))}}var U;return Rw(jw(o.length(),z,w,x,0,!0))}function Vy(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function rM(o,n,s,h,g){if(!h&&!g)return;const _=o[s],x=(o[s].x+_.metrics.advance*_.scale)*h;for(let w=n;w<=s;w++)o[w].x-=x,o[w].y+=g}function iM(o,n,s){const{horizontalAlign:h,verticalAlign:g}=Vy(s),_=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*g;return{image:o,top:x,bottom:x+o.displaySize[1],left:_,right:_+o.displaySize[0]}}function Ow(o){var n,s;let h=o.left,g=o.top,_=o.right-h,x=o.bottom-g;const w=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",I=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",z=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(I==="proportional"){if(w==="stretchOnly"&&_/x<z||w==="proportional"){const U=Math.ceil(x*z);h*=U/_,_=U}}else if(w==="proportional"&&I==="stretchOnly"&&z!==0&&_/x>z){const U=Math.ceil(_/z);g*=U/x,x=U}return{x1:h,y1:g,x2:h+_,y2:g+x}}function Lw(o,n,s,h,g,_){const x=o.image;let w;if(x.content){const Re=x.content,Ne=x.pixelRatio||1;w=[Re[0]/Ne,Re[1]/Ne,x.displaySize[0]-Re[2]/Ne,x.displaySize[1]-Re[3]/Ne]}const I=n.left*_,z=n.right*_;let U,J,ne,le;s==="width"||s==="both"?(le=g[0]+I-h[3],J=g[0]+z+h[1]):(le=g[0]+(I+z-x.displaySize[0])/2,J=le+x.displaySize[0]);const me=n.top*_,be=n.bottom*_;return s==="height"||s==="both"?(U=g[1]+me-h[0],ne=g[1]+be+h[2]):(U=g[1]+(me+be-x.displaySize[1])/2,ne=U+x.displaySize[1]),{image:x,top:U,right:J,bottom:ne,left:le,collisionPadding:w}}const Od=255,ea=128,kl=Od*ea;function Dw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Qn(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=s;let _=0;for(;_<h.length&&h[_]<=o;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const w=h[_],I=h[x];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:I,interpolationType:g}:{kind:"camera",minZoom:w,maxZoom:I,minSize:s.evaluate(new Qn(w)),maxSize:s.evaluate(new Qn(I)),interpolationType:g}}}function Gy(o,n,s){let h="never";const g=o.get(n);return g?h=g:o.get(s)&&(h="always"),h}const oM=Al.VectorTileFeature.types,sM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Lp(o,n,s,h,g,_,x,w,I,z,U,J,ne){const le=w?Math.min(kl,Math.round(w[0])):0,me=w?Math.min(kl,Math.round(w[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*g),_,x,(le<<1)+(I?1:0),me,16*z,16*U,256*J,256*ne)}function Zy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function aM(o){for(const n of o.sections)if(yd(n.text))return!0;return!1}class Wy{constructor(n){this.layoutVertexArray=new Io,this.indexArray=new Zr,this.programConfigurations=n,this.segments=new Dr,this.dynamicLayoutVertexArray=new Ys,this.opacityVertexArray=new Tl,this.hasVisibleVertices=!1,this.placedSymbolArray=new or}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,LA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,DA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,sM,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ut("SymbolBuffers",Wy);class Hy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Dr,this.collisionVertexArray=new oi}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,BA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ut("CollisionBuffers",Hy);class Nc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Py([]),this.placementViewportMatrix=Py([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dw(this.zoom,s["text-size"]),this.iconSizeData=Dw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=Gy(h,"text-overlap","text-allow-overlap")!=="never"||Gy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>m.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Wy(new ku(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Wy(new ku(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new sr,this.lineVertexArray=new zi,this.symbolInstances=new Co,this.textAnchorOffsets=new ni}calculateGlyphDependencies(n,s,h,g,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||g)&&_){const w=Fd[n.charAt(x)];w&&(s[w.charCodeAt(0)]=!0)}}populate(n,s,h){const g=this.layers[0],_=g.layout,x=_.get("text-font"),w=_.get("text-field"),I=_.get("icon-image"),z=(w.value.kind!=="constant"||w.value.value instanceof Tr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),U=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,J=_.get("symbol-sort-key");if(this.features=[],!z&&!U)return;const ne=s.iconDependencies,le=s.glyphDependencies,me=s.availableImages,be=new Qn(this.zoom);for(const{feature:Re,id:Ne,index:nt,sourceLayerIndex:Ke}of n){const Ye=g._featureFilter.needGeometry,lt=Fu(Re,Ye);if(!g._featureFilter.filter(be,lt,h))continue;let _t,Dt;if(Ye||(lt.geometry=zu(Re)),z){const Rt=g.getValueAndResolveTokens("text-field",lt,h,me),kt=Tr.factory(Rt),qt=this.hasRTLText=this.hasRTLText||aM(kt);(!qt||Js.getRTLTextPluginStatus()==="unavailable"||qt&&Js.isParsed())&&(_t=UA(kt,g,lt))}if(U){const Rt=g.getValueAndResolveTokens("icon-image",lt,h,me);Dt=Rt instanceof Gr?Rt:Gr.fromString(Rt)}if(!_t&&!Dt)continue;const on=this.sortFeaturesByKey?J.evaluate(lt,{},h):void 0;if(this.features.push({id:Ne,text:_t,icon:Dt,index:nt,sourceLayerIndex:Ke,geometry:lt.geometry,properties:Re.properties,type:oM[Re.type],sortKey:on}),Dt&&(ne[Dt.name]=!0),_t){const Rt=x.evaluate(lt,{},h).join(","),kt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ai.vertical)>=0;for(const qt of _t.sections)if(qt.image)ne[qt.image.name]=!0;else{const $t=md(_t.toString()),Nt=qt.fontStack||Rt,ft=le[Nt]=le[Nt]||{};this.calculateGlyphDependencies(qt.text,ft,kt,this.allowVerticalPlacement,$t)}}}_.get("symbol-placement")==="line"&&(this.features=function(Re){const Ne={},nt={},Ke=[];let Ye=0;function lt(Rt){Ke.push(Re[Rt]),Ye++}function _t(Rt,kt,qt){const $t=nt[Rt];return delete nt[Rt],nt[kt]=$t,Ke[$t].geometry[0].pop(),Ke[$t].geometry[0]=Ke[$t].geometry[0].concat(qt[0]),$t}function Dt(Rt,kt,qt){const $t=Ne[kt];return delete Ne[kt],Ne[Rt]=$t,Ke[$t].geometry[0].shift(),Ke[$t].geometry[0]=qt[0].concat(Ke[$t].geometry[0]),$t}function on(Rt,kt,qt){const $t=qt?kt[0][kt[0].length-1]:kt[0][0];return`${Rt}:${$t.x}:${$t.y}`}for(let Rt=0;Rt<Re.length;Rt++){const kt=Re[Rt],qt=kt.geometry,$t=kt.text?kt.text.toString():null;if(!$t){lt(Rt);continue}const Nt=on($t,qt),ft=on($t,qt,!0);if(Nt in nt&&ft in Ne&&nt[Nt]!==Ne[ft]){const Yt=Dt(Nt,ft,qt),Xt=_t(Nt,ft,Ke[Yt].geometry);delete Ne[Nt],delete nt[ft],nt[on($t,Ke[Xt].geometry,!0)]=Xt,Ke[Yt].geometry=null}else Nt in nt?_t(Nt,ft,qt):ft in Ne?Dt(Nt,ft,qt):(lt(Rt),Ne[Nt]=Ye-1,nt[ft]=Ye-1)}return Ke.filter(Rt=>Rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,Ne)=>Re.sortKey-Ne.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let g=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let w=n.segment+1;w<s.length;w++)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:g},w<s.length-1&&(g+=s[w+1].dist(s[w]));for(let w=n.segment||0;w>=0;w--)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:_},w>0&&(_+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const I=x[w];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,g,_,x,w,I,z,U,J,ne){const le=n.indexArray,me=n.layoutVertexArray,be=n.segments.prepareSegment(4*s.length,me,le,this.canOverlap?x.sortKey:void 0),Re=this.glyphOffsetArray.length,Ne=be.vertexLength,nt=this.allowVerticalPlacement&&w===m.ai.vertical?Math.PI/2:0,Ke=x.text&&x.text.sections;for(let Ye=0;Ye<s.length;Ye++){const{tl:lt,tr:_t,bl:Dt,br:on,tex:Rt,pixelOffsetTL:kt,pixelOffsetBR:qt,minFontScaleX:$t,minFontScaleY:Nt,glyphOffset:ft,isSDF:Yt,sectionIndex:Xt}=s[Ye],dn=be.vertexLength,qn=ft[1];Lp(me,I.x,I.y,lt.x,qn+lt.y,Rt.x,Rt.y,h,Yt,kt.x,kt.y,$t,Nt),Lp(me,I.x,I.y,_t.x,qn+_t.y,Rt.x+Rt.w,Rt.y,h,Yt,qt.x,kt.y,$t,Nt),Lp(me,I.x,I.y,Dt.x,qn+Dt.y,Rt.x,Rt.y+Rt.h,h,Yt,kt.x,qt.y,$t,Nt),Lp(me,I.x,I.y,on.x,qn+on.y,Rt.x+Rt.w,Rt.y+Rt.h,h,Yt,qt.x,qt.y,$t,Nt),Zy(n.dynamicLayoutVertexArray,I,nt),le.emplaceBack(dn,dn+1,dn+2),le.emplaceBack(dn+1,dn+2,dn+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ft[0]),Ye!==s.length-1&&Xt===s[Ye+1].sectionIndex||n.programConfigurations.populatePaintArrays(me.length,x,x.index,{},ne,Ke&&Ke[Xt])}n.placedSymbolArray.emplaceBack(I.x,I.y,Re,this.glyphOffsetArray.length-Re,Ne,z,U,I.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],w,0,!1,0,J)}_addCollisionDebugVertex(n,s,h,g,_,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,g,_,x,w){const I=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),z=I.vertexLength,U=_.layoutVertexArray,J=_.collisionVertexArray,ne=w.anchorX,le=w.anchorY;this._addCollisionDebugVertex(U,J,x,ne,le,new b(n,s)),this._addCollisionDebugVertex(U,J,x,ne,le,new b(h,s)),this._addCollisionDebugVertex(U,J,x,ne,le,new b(h,g)),this._addCollisionDebugVertex(U,J,x,ne,le,new b(n,g)),I.vertexLength+=4;const me=_.indexArray;me.emplaceBack(z,z+1),me.emplaceBack(z+1,z+2),me.emplaceBack(z+2,z+3),me.emplaceBack(z+3,z),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,g){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Hy(ii,ww.members,ur),this.iconCollisionBox=new Hy(ii,ww.members,ur);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,g,_,x,w,I,z){const U={};for(let J=s;J<h;J++){const ne=n.get(J);U.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},U.textFeatureIndex=ne.featureIndex;break}for(let J=g;J<_;J++){const ne=n.get(J);U.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},U.verticalTextFeatureIndex=ne.featureIndex;break}for(let J=x;J<w;J++){const ne=n.get(J);U.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},U.iconFeatureIndex=ne.featureIndex;break}for(let J=I;J<z;J++){const ne=n.get(J);U.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},U.verticalIconFeatureIndex=ne.featureIndex;break}return U}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),g=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<g;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),g=[],_=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const I=this.symbolInstances.get(w);g.push(0|Math.round(s*I.anchorX+h*I.anchorY)),_.push(I.featureIndex)}return x.sort((w,I)=>g[w]-g[I]||_[I]-_[w]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Bw,Nw;Ut("SymbolBucket",Nc,{omit:["layers","collisionBoxArray","features","compareText"]}),Nc.MAX_GLYPHS=65535,Nc.addDynamicAttributes=Zy;var Xy={get paint(){return Nw=Nw||new d({"icon-opacity":new an(Qe.paint_symbol["icon-opacity"]),"icon-color":new an(Qe.paint_symbol["icon-color"]),"icon-halo-color":new an(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new an(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new an(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Jt(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Jt(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new an(Qe.paint_symbol["text-opacity"]),"text-color":new an(Qe.paint_symbol["text-color"],{runtimeType:yn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new an(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new an(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new an(Qe.paint_symbol["text-halo-blur"]),"text-translate":new Jt(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new Jt(Qe.paint_symbol["text-translate-anchor"])})},get layout(){return Bw=Bw||new d({"symbol-placement":new Jt(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Jt(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Jt(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new an(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Jt(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Jt(Qe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Jt(Qe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Jt(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Jt(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Jt(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new an(Qe.layout_symbol["icon-size"]),"icon-text-fit":new Jt(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Jt(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new an(Qe.layout_symbol["icon-image"]),"icon-rotate":new an(Qe.layout_symbol["icon-rotate"]),"icon-padding":new an(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Jt(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new an(Qe.layout_symbol["icon-offset"]),"icon-anchor":new an(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Jt(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Jt(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Jt(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new an(Qe.layout_symbol["text-field"]),"text-font":new an(Qe.layout_symbol["text-font"]),"text-size":new an(Qe.layout_symbol["text-size"]),"text-max-width":new an(Qe.layout_symbol["text-max-width"]),"text-line-height":new Jt(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new an(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new an(Qe.layout_symbol["text-justify"]),"text-radial-offset":new an(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Jt(Qe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new an(Qe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new an(Qe.layout_symbol["text-anchor"]),"text-max-angle":new Jt(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Jt(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new an(Qe.layout_symbol["text-rotate"]),"text-padding":new Jt(Qe.layout_symbol["text-padding"]),"text-keep-upright":new Jt(Qe.layout_symbol["text-keep-upright"]),"text-transform":new an(Qe.layout_symbol["text-transform"]),"text-offset":new an(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new Jt(Qe.layout_symbol["text-allow-overlap"]),"text-overlap":new Jt(Qe.layout_symbol["text-overlap"]),"text-ignore-placement":new Jt(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new Jt(Qe.layout_symbol["text-optional"])})}};class Uw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:rt,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ut("FormatSectionOverride",Uw,{omit:["defaultValue"]});class Dp extends y{constructor(n){super(n,Xy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const _ of h)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,g){const _=this.layout.get(n).evaluate(s,{},h,g),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Ft(x.value)||!_?_:function(w,I){return I.replace(/{([^{}]+)}/g,(z,U)=>w&&U in w?String(w[U]):"")}(s.properties,_)}createBucket(n){return new Nc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Xy.paint.overridableProperties){if(!Dp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Uw(s),g=new ut(h,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new Gt("source",g):new rn("composite",g,s.value.zoomStops),this.paint._values[n]=new ns(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Dp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),g=Xy.paint.properties[s];let _=!1;const x=w=>{for(const I of w)if(g.overrides&&g.overrides.hasOverride(I))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Tr)x(h.value.value.sections);else if(h.value.kind==="source"){const w=z=>{_||(z instanceof ps&&vr(z.value)===ei?x(z.value.sections):z instanceof fl?x(z.sections):z.eachChild(w))},I=h.value;I._styleExpression&&w(I._styleExpression.expression)}return _}}let $w;var lM={get paint(){return $w=$w||new d({"background-color":new Jt(Qe.paint_background["background-color"]),"background-pattern":new r(Qe.paint_background["background-pattern"]),"background-opacity":new Jt(Qe.paint_background["background-opacity"])})}};class uM extends y{constructor(n){super(n,lM)}}let Vw;var cM={get paint(){return Vw=Vw||new d({"raster-opacity":new Jt(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Jt(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Jt(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Jt(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Jt(Qe.paint_raster["raster-saturation"]),"raster-contrast":new Jt(Qe.paint_raster["raster-contrast"]),"raster-resampling":new Jt(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Jt(Qe.paint_raster["raster-fade-duration"])})}};class hM extends y{constructor(n){super(n,cM)}}class dM extends y{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class fM{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ky=63710088e-1;class zl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zl(Z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,g=n.lat*s,_=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((n.lng-this.lng)*s);return Ky*Math.acos(Math.min(_,1))}static convert(n){if(n instanceof zl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new zl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new zl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Gw=2*Math.PI*Ky;function Zw(o){return Gw*Math.cos(o*Math.PI/180)}function Ww(o){return(180+o)/360}function Hw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Xw(o,n){return o/Zw(n)}function qy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Bp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=zl.convert(n);return new Bp(Ww(h.lng),Hw(h.lat),Xw(s,h.lat))}toLngLat(){return new zl(360*this.x-180,qy(this.y))}toAltitude(){return this.z*Zw(qy(this.y))}meterInMercatorCoordinateUnits(){return 1/Gw*(n=qy(this.y),1/Math.cos(n*Math.PI/180));var n}}function Kw(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Jy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Ld(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const g=(x=this.y,w=this.z,I=Kw(256*(_=this.x),256*(x=Math.pow(2,w)-x-1),w),z=Kw(256*(_+1),256*(x+1),w),I[0]+","+I[1]+","+z[0]+","+z[1]);var _,x,w,I,z;const U=function(J,ne,le){let me,be="";for(let Re=J;Re>0;Re--)me=1<<Re-1,be+=(ne&me?1:0)+(le&me?2:0);return be}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,U).replace(/{bbox-epsg-3857}/g,g)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new b((n.x*s-this.x)*jr,(n.y*s-this.y)*jr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class qw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Ld(n,s.z,s.z,s.x,s.y)}}class Mo{constructor(n,s,h,g,_){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Jy(h,+g,+_),this.key=Ld(s,n,h,g,_)}clone(){return new Mo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Mo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Ld(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Ld(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Mo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Mo(s,this.wrap,s,h,g),new Mo(s,this.wrap,s,h+1,g),new Mo(s,this.wrap,s,h,g+1),new Mo(s,this.wrap,s,h+1,g+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Mo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Mo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new qw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Bp(n.x-this.wrap,n.y))}}function Ld(o,n,s,h,g){(o*=2)<0&&(o=-1*o-1);const _=1<<s;return(_*_*o+_*g+h).toString(36)+s.toString(36)+n.toString(36)}Ut("CanonicalTileID",Jy),Ut("OverscaledTileID",Mo,{omit:["posMatrix"]});class Jw{constructor(n,s,h,g=1,_=1,x=1,w=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<I;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(I,z)]=this.data[this._idx(I-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,I)]=this.data[this._idx(z,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<I;z++)for(let U=0;U<I;U++){const J=this.get(z,U);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(n,s){const h=new Uint8Array(this.data.buffer),g=4*this._idx(n,s);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,x=h*this.dim,w=h*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(h){case-1:x=w-1;break;case 1:w=x+1}const I=-s*this.dim,z=-h*this.dim;for(let U=x;U<w;U++)for(let J=g;J<_;J++)this.data[this._idx(J,U)]=n.data[this._idx(J+I,U+z)]}}Ut("DEMData",Jw);class Yw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Qw{constructor(n,s,h,g,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=g,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class eb{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new wl(jr,16,0),this.grid3D=new wl(jr,16,0),this.featureIndexArray=new Po,this.promoteId=s}insert(n,s,h,g,_,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,_);const I=x?this.grid3D:this.grid;for(let z=0;z<s.length;z++){const U=s[z],J=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<U.length;ne++){const le=U[ne];J[0]=Math.min(J[0],le.x),J[1]=Math.min(J[1],le.y),J[2]=Math.max(J[2],le.x),J[3]=Math.max(J[3],le.y)}J[0]<jr&&J[1]<jr&&J[2]>=0&&J[3]>=0&&I.insert(w,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Al.VectorTile(new By(this.rawTileData)).layers,this.sourceLayerCoder=new Yw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,g){this.loadVTLayers();const _=n.params||{},x=jr/n.tileSize/n.scale,w=Nn(_.filter),I=n.queryGeometry,z=n.queryPadding*x,U=nb(I),J=this.grid.query(U.minX-z,U.minY-z,U.maxX+z,U.maxY+z),ne=nb(n.cameraQueryGeometry),le=this.grid3D.query(ne.minX-z,ne.minY-z,ne.maxX+z,ne.maxY+z,(Re,Ne,nt,Ke)=>function(Ye,lt,_t,Dt,on){for(const kt of Ye)if(lt<=kt.x&&_t<=kt.y&&Dt>=kt.x&&on>=kt.y)return!0;const Rt=[new b(lt,_t),new b(lt,on),new b(Dt,on),new b(Dt,_t)];if(Ye.length>2){for(const kt of Rt)if(Fc(Ye,kt))return!0}for(let kt=0;kt<Ye.length-1;kt++)if(HI(Ye[kt],Ye[kt+1],Rt))return!0;return!1}(n.cameraQueryGeometry,Re-z,Ne-z,nt+z,Ke+z));for(const Re of le)J.push(Re);J.sort(pM);const me={};let be;for(let Re=0;Re<J.length;Re++){const Ne=J[Re];if(Ne===be)continue;be=Ne;const nt=this.featureIndexArray.get(Ne);let Ke=null;this.loadMatchingFeature(me,nt.bucketIndex,nt.sourceLayerIndex,nt.featureIndex,w,_.layers,_.availableImages,s,h,g,(Ye,lt,_t)=>(Ke||(Ke=zu(Ye)),lt.queryIntersectsFeature(I,Ye,_t,Ke,this.z,n.transform,x,n.pixelPosMatrix)))}return me}loadMatchingFeature(n,s,h,g,_,x,w,I,z,U,J){const ne=this.bucketLayerIDs[s];if(x&&!function(Re,Ne){for(let nt=0;nt<Re.length;nt++)if(Ne.indexOf(Re[nt])>=0)return!0;return!1}(x,ne))return;const le=this.sourceLayerCoder.decode(h),me=this.vtLayers[le].feature(g);if(_.needGeometry){const Re=Fu(me,!0);if(!_.filter(new Qn(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!_.filter(new Qn(this.tileID.overscaledZ),me))return;const be=this.getId(me,le);for(let Re=0;Re<ne.length;Re++){const Ne=ne[Re];if(x&&x.indexOf(Ne)<0)continue;const nt=I[Ne];if(!nt)continue;let Ke={};be&&U&&(Ke=U.getState(nt.sourceLayer||"_geojsonTileLayer",be));const Ye=T({},z[Ne]);Ye.paint=tb(Ye.paint,nt.paint,me,Ke,w),Ye.layout=tb(Ye.layout,nt.layout,me,Ke,w);const lt=!J||J(me,nt,Ke);if(!lt)continue;const _t=new Qw(me,this.z,this.x,this.y,be);_t.layer=Ye;let Dt=n[Ne];Dt===void 0&&(Dt=n[Ne]=[]),Dt.push({featureIndex:g,feature:_t,intersectionZ:lt})}}lookupSymbolFeatures(n,s,h,g,_,x,w,I){const z={};this.loadVTLayers();const U=Nn(_);for(const J of n)this.loadMatchingFeature(z,h,g,J,U,x,w,I,s);return z}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function tb(o,n,s,h,g){return B(o,(_,x)=>{const w=n instanceof Cc?n.get(x):null;return w&&w.evaluate?w.evaluate(s,h,g):w})}function nb(o){let n=1/0,s=1/0,h=-1/0,g=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return{minX:n,minY:s,maxX:h,maxY:g}}function pM(o,n){return n-o}function rb(o,n,s,h,g){const _=[];for(let x=0;x<o.length;x++){const w=o[x];let I;for(let z=0;z<w.length-1;z++){let U=w[z],J=w[z+1];U.x<n&&J.x<n||(U.x<n?U=new b(n,U.y+(n-U.x)/(J.x-U.x)*(J.y-U.y))._round():J.x<n&&(J=new b(n,U.y+(n-U.x)/(J.x-U.x)*(J.y-U.y))._round()),U.y<s&&J.y<s||(U.y<s?U=new b(U.x+(s-U.y)/(J.y-U.y)*(J.x-U.x),s)._round():J.y<s&&(J=new b(U.x+(s-U.y)/(J.y-U.y)*(J.x-U.x),s)._round()),U.x>=h&&J.x>=h||(U.x>=h?U=new b(h,U.y+(h-U.x)/(J.x-U.x)*(J.y-U.y))._round():J.x>=h&&(J=new b(h,U.y+(h-U.x)/(J.x-U.x)*(J.y-U.y))._round()),U.y>=g&&J.y>=g||(U.y>=g?U=new b(U.x+(g-U.y)/(J.y-U.y)*(J.x-U.x),g)._round():J.y>=g&&(J=new b(U.x+(g-U.y)/(J.y-U.y)*(J.x-U.x),g)._round()),I&&U.equals(I[I.length-1])||(I=[U],_.push(I)),I.push(J)))))}}return _}Ut("FeatureIndex",eb,{omit:["rawTileData","sourceLayerCoder"]});class Fl extends b{constructor(n,s,h,g){super(n,s),this.angle=h,g!==void 0&&(this.segment=g)}clone(){return new Fl(this.x,this.y,this.angle,this.segment)}}function ib(o,n,s,h,g){if(n.segment===void 0||s===0)return!0;let _=n,x=n.segment+1,w=0;for(;w>-s/2;){if(x--,x<0)return!1;w-=o[x].dist(_),_=o[x]}w+=o[x].dist(o[x+1]),x++;const I=[];let z=0;for(;w<s/2;){const U=o[x],J=o[x+1];if(!J)return!1;let ne=o[x-1].angleTo(U)-U.angleTo(J);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:w,angleDelta:ne}),z+=ne;w-I[0].distance>h;)z-=I.shift().angleDelta;if(z>g)return!1;x++,w+=U.dist(J)}return!0}function ob(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function sb(o,n,s){return o?.6*n*s:0}function ab(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function mM(o,n,s,h,g,_){const x=sb(s,g,_),w=ab(s,h)*_;let I=0;const z=ob(o)/2;for(let U=0;U<o.length-1;U++){const J=o[U],ne=o[U+1],le=J.dist(ne);if(I+le>z){const me=(z-I)/le,be=yi.number(J.x,ne.x,me),Re=yi.number(J.y,ne.y,me),Ne=new Fl(be,Re,ne.angleTo(J),U);return Ne._round(),!x||ib(o,Ne,w,x,n)?Ne:void 0}I+=le}}function gM(o,n,s,h,g,_,x,w,I){const z=sb(h,_,x),U=ab(h,g),J=U*x,ne=o[0].x===0||o[0].x===I||o[0].y===0||o[0].y===I;return n-J<n/4&&(n=J+n/4),lb(o,ne?n/2*w%n:(U/2+2*_)*x*w%n,n,z,s,J,ne,!1,I)}function lb(o,n,s,h,g,_,x,w,I){const z=_/2,U=ob(o);let J=0,ne=n-s,le=[];for(let me=0;me<o.length-1;me++){const be=o[me],Re=o[me+1],Ne=be.dist(Re),nt=Re.angleTo(be);for(;ne+s<J+Ne;){ne+=s;const Ke=(ne-J)/Ne,Ye=yi.number(be.x,Re.x,Ke),lt=yi.number(be.y,Re.y,Ke);if(Ye>=0&&Ye<I&&lt>=0&&lt<I&&ne-z>=0&&ne+z<=U){const _t=new Fl(Ye,lt,nt,me);_t._round(),h&&!ib(o,_t,_,h,g)||le.push(_t)}}J+=Ne}return w||le.length||x||(le=lb(o,J/2,s,h,g,_,x,!0,I)),le}Ut("Anchor",Fl);const Uc=Zi;function ub(o,n,s,h){const g=[],_=o.image,x=_.pixelRatio,w=_.paddedRect.w-2*Uc,I=_.paddedRect.h-2*Uc;let z={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const U=_.stretchX||[[0,w]],J=_.stretchY||[[0,I]],ne=(ft,Yt)=>ft+Yt[1]-Yt[0],le=U.reduce(ne,0),me=J.reduce(ne,0),be=w-le,Re=I-me;let Ne=0,nt=le,Ke=0,Ye=me,lt=0,_t=be,Dt=0,on=Re;if(_.content&&h){const ft=_.content,Yt=ft[2]-ft[0],Xt=ft[3]-ft[1];(_.textFitWidth||_.textFitHeight)&&(z=Ow(o)),Ne=Np(U,0,ft[0]),Ke=Np(J,0,ft[1]),nt=Np(U,ft[0],ft[2]),Ye=Np(J,ft[1],ft[3]),lt=ft[0]-Ne,Dt=ft[1]-Ke,_t=Yt-nt,on=Xt-Ye}const Rt=z.x1,kt=z.y1,qt=z.x2-Rt,$t=z.y2-kt,Nt=(ft,Yt,Xt,dn)=>{const qn=Up(ft.stretch-Ne,nt,qt,Rt),Hn=$p(ft.fixed-lt,_t,ft.stretch,le),Wr=Up(Yt.stretch-Ke,Ye,$t,kt),rs=$p(Yt.fixed-Dt,on,Yt.stretch,me),ai=Up(Xt.stretch-Ne,nt,qt,Rt),xr=$p(Xt.fixed-lt,_t,Xt.stretch,le),ji=Up(dn.stretch-Ke,Ye,$t,kt),Ri=$p(dn.fixed-Dt,on,dn.stretch,me),Oi=new b(qn,Wr),wr=new b(ai,Wr),Hr=new b(ai,ji),bi=new b(qn,ji),li=new b(Hn/x,rs/x),Li=new b(xr/x,Ri/x),ui=n*Math.PI/180;if(ui){const Rn=Math.sin(ui),er=Math.cos(ui),ar=[er,-Rn,Rn,er];Oi._matMult(ar),wr._matMult(ar),bi._matMult(ar),Hr._matMult(ar)}const ko=ft.stretch+ft.fixed,Wi=Yt.stretch+Yt.fixed;return{tl:Oi,tr:wr,bl:bi,br:Hr,tex:{x:_.paddedRect.x+Uc+ko,y:_.paddedRect.y+Uc+Wi,w:Xt.stretch+Xt.fixed-ko,h:dn.stretch+dn.fixed-Wi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:li,pixelOffsetBR:Li,minFontScaleX:_t/x/qt,minFontScaleY:on/x/$t,isSDF:s}};if(h&&(_.stretchX||_.stretchY)){const ft=cb(U,be,le),Yt=cb(J,Re,me);for(let Xt=0;Xt<ft.length-1;Xt++){const dn=ft[Xt],qn=ft[Xt+1];for(let Hn=0;Hn<Yt.length-1;Hn++)g.push(Nt(dn,Yt[Hn],qn,Yt[Hn+1]))}}else g.push(Nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:I+1}));return g}function Np(o,n,s){let h=0;for(const g of o)h+=Math.max(n,Math.min(s,g[1]))-Math.max(n,Math.min(s,g[0]));return h}function cb(o,n,s){const h=[{fixed:-Uc,stretch:0}];for(const[g,_]of o){const x=h[h.length-1];h.push({fixed:g-x.stretch,stretch:x.stretch}),h.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return h.push({fixed:n+Uc,stretch:s}),h}function Up(o,n,s,h){return o/n*s+h}function $p(o,n,s,h){return o-n*s/h}class Vp{constructor(n,s,h,g,_,x,w,I,z,U){var J;if(this.boxStartIndex=n.length,z){let ne=x.top,le=x.bottom;const me=x.collisionPadding;me&&(ne-=me[1],le+=me[3]);let be=le-ne;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{const ne=!((J=x.image)===null||J===void 0)&&J.content&&(x.image.textFitWidth||x.image.textFitHeight)?Ow(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};ne.y1=ne.y1*w-I[0],ne.y2=ne.y2*w+I[2],ne.x1=ne.x1*w-I[3],ne.x2=ne.x2*w+I[1];const le=x.collisionPadding;if(le&&(ne.x1-=le[0]*w,ne.y1-=le[1]*w,ne.x2+=le[2]*w,ne.y2+=le[3]*w),U){const me=new b(ne.x1,ne.y1),be=new b(ne.x2,ne.y1),Re=new b(ne.x1,ne.y2),Ne=new b(ne.x2,ne.y2),nt=U*Math.PI/180;me._rotate(nt),be._rotate(nt),Re._rotate(nt),Ne._rotate(nt),ne.x1=Math.min(me.x,be.x,Re.x,Ne.x),ne.x2=Math.max(me.x,be.x,Re.x,Ne.x),ne.y1=Math.min(me.y,be.y,Re.y,Ne.y),ne.y2=Math.max(me.y,be.y,Re.y,Ne.y)}n.emplaceBack(s.x,s.y,ne.x1,ne.y1,ne.x2,ne.y2,h,g,_)}this.boxEndIndex=n.length}}class yM{constructor(n=[],s=(h,g)=>h<g?-1:h>g?1:0){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this._up(this.length++)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,g=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(h(g,x)>=0)break;s[n]=x,n=_}s[n]=g}_down(n){const{data:s,compare:h}=this,g=this.length>>1,_=s[n];for(;n<g;){let x=1+(n<<1);const w=x+1;if(w<this.length&&h(s[w],s[x])<0&&(x=w),h(s[x],_)>=0)break;s[n]=s[x],n=x}s[n]=_}}function vM(o,n=1,s=!1){let h=1/0,g=1/0,_=-1/0,x=-1/0;const w=o[0];for(let le=0;le<w.length;le++){const me=w[le];(!le||me.x<h)&&(h=me.x),(!le||me.y<g)&&(g=me.y),(!le||me.x>_)&&(_=me.x),(!le||me.y>x)&&(x=me.y)}const I=Math.min(_-h,x-g);let z=I/2;const U=new yM([],_M);if(I===0)return new b(h,g);for(let le=h;le<_;le+=I)for(let me=g;me<x;me+=I)U.push(new $c(le+z,me+z,z,o));let J=function(le){let me=0,be=0,Re=0;const Ne=le[0];for(let nt=0,Ke=Ne.length,Ye=Ke-1;nt<Ke;Ye=nt++){const lt=Ne[nt],_t=Ne[Ye],Dt=lt.x*_t.y-_t.x*lt.y;be+=(lt.x+_t.x)*Dt,Re+=(lt.y+_t.y)*Dt,me+=3*Dt}return new $c(be/me,Re/me,0,le)}(o),ne=U.length;for(;U.length;){const le=U.pop();(le.d>J.d||!J.d)&&(J=le,s&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,ne)),le.max-J.d<=n||(z=le.h/2,U.push(new $c(le.p.x-z,le.p.y-z,z,o)),U.push(new $c(le.p.x+z,le.p.y-z,z,o)),U.push(new $c(le.p.x-z,le.p.y+z,z,o)),U.push(new $c(le.p.x+z,le.p.y+z,z,o)),ne+=4)}return s&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${J.d}`)),J.p}function _M(o,n){return n.max-o.max}function $c(o,n,s,h){this.p=new b(o,n),this.h=s,this.d=function(g,_){let x=!1,w=1/0;for(let I=0;I<_.length;I++){const z=_[I];for(let U=0,J=z.length,ne=J-1;U<J;ne=U++){const le=z[U],me=z[ne];le.y>g.y!=me.y>g.y&&g.x<(me.x-le.x)*(g.y-le.y)/(me.y-le.y)+le.x&&(x=!x),w=Math.min(w,Hx(g,le,me))}}return(x?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var si;m.ar=void 0,(si=m.ar||(m.ar={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const jl=7,Yy=Number.POSITIVE_INFINITY;function hb(o,n){return n[1]!==Yy?function(s,h,g){let _=0,x=0;switch(h=Math.abs(h),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-jl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+jl}switch(s){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]}(o,n[0],n[1]):function(s,h){let g=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":_=x-jl;break;case"bottom-right":case"bottom-left":_=-x+jl;break;case"bottom":_=-h+jl;break;case"top":_=h-jl}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=h;break;case"right":g=-h}return[g,_]}(o,n[0])}function db(o,n,s){var h;const g=o.layout,_=(h=g.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(_){const w=_.values,I=[];for(let z=0;z<w.length;z+=2){const U=I[z]=w[z],J=w[z+1].map(ne=>ne*Br);U.startsWith("top")?J[1]-=jl:U.startsWith("bottom")&&(J[1]+=jl),I[z+1]=J}return new pi(I)}const x=g.get("text-variable-anchor");if(x){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(n,{},s)*Br,Yy]:g.get("text-offset").evaluate(n,{},s).map(z=>z*Br);const I=[];for(const z of x)I.push(z,hb(z,w));return new pi(I)}return null}function Qy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xM(o,n,s,h,g,_,x,w,I,z,U){let J=_.textMaxSize.evaluate(n,{});J===void 0&&(J=x);const ne=o.layers[0].layout,le=ne.get("icon-offset").evaluate(n,{},U),me=pb(s.horizontal),be=x/24,Re=o.tilePixelRatio*be,Ne=o.tilePixelRatio*J/24,nt=o.tilePixelRatio*w,Ke=o.tilePixelRatio*ne.get("symbol-spacing"),Ye=ne.get("text-padding")*o.tilePixelRatio,lt=function(ft,Yt,Xt,dn=1){const qn=ft.get("icon-padding").evaluate(Yt,{},Xt),Hn=qn&&qn.values;return[Hn[0]*dn,Hn[1]*dn,Hn[2]*dn,Hn[3]*dn]}(ne,n,U,o.tilePixelRatio),_t=ne.get("text-max-angle")/180*Math.PI,Dt=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",on=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",Rt=ne.get("symbol-placement"),kt=Ke/2,qt=ne.get("icon-text-fit");let $t;h&&qt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&($t=Lw(h,s.vertical,qt,ne.get("icon-text-fit-padding"),le,be)),me&&(h=Lw(h,me,qt,ne.get("icon-text-fit-padding"),le,be)));const Nt=(ft,Yt)=>{Yt.x<0||Yt.x>=jr||Yt.y<0||Yt.y>=jr||function(Xt,dn,qn,Hn,Wr,rs,ai,xr,ji,Ri,Oi,wr,Hr,bi,li,Li,ui,ko,Wi,Rn,er,ar,lo,pr,Vc){const ta=Xt.addToLineVertexArray(dn,qn);let na,is,zo,Jr,La=0,Nd=0,vb=0,_b=0,a0=-1,l0=-1;const Da={};let xb=kc("");if(Xt.allowVerticalPlacement&&Hn.vertical){const Si=xr.layout.get("text-rotate").evaluate(er,{},pr)+90;zo=new Vp(ji,dn,Ri,Oi,wr,Hn.vertical,Hr,bi,li,Si),ai&&(Jr=new Vp(ji,dn,Ri,Oi,wr,ai,ui,ko,li,Si))}if(Wr){const Si=xr.layout.get("icon-rotate").evaluate(er,{}),Fo=xr.layout.get("icon-text-fit")!=="none",Ru=ub(Wr,Si,lo,Fo),Ps=ai?ub(ai,Si,lo,Fo):void 0;is=new Vp(ji,dn,Ri,Oi,wr,Wr,ui,ko,!1,Si),La=4*Ru.length;const Ou=Xt.iconSizeData;let ra=null;Ou.kind==="source"?(ra=[ea*xr.layout.get("icon-size").evaluate(er,{})],ra[0]>kl&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Od}. Reduce your "icon-size".`)):Ou.kind==="composite"&&(ra=[ea*ar.compositeIconSizes[0].evaluate(er,{},pr),ea*ar.compositeIconSizes[1].evaluate(er,{},pr)],(ra[0]>kl||ra[1]>kl)&&_e(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Od}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,Ru,ra,Rn,Wi,er,m.ai.none,dn,ta.lineStartIndex,ta.lineLength,-1,pr),a0=Xt.icon.placedSymbolArray.length-1,Ps&&(Nd=4*Ps.length,Xt.addSymbols(Xt.icon,Ps,ra,Rn,Wi,er,m.ai.vertical,dn,ta.lineStartIndex,ta.lineLength,-1,pr),l0=Xt.icon.placedSymbolArray.length-1)}const wb=Object.keys(Hn.horizontal);for(const Si of wb){const Fo=Hn.horizontal[Si];if(!na){xb=kc(Fo.text);const Ps=xr.layout.get("text-rotate").evaluate(er,{},pr);na=new Vp(ji,dn,Ri,Oi,wr,Fo,Hr,bi,li,Ps)}const Ru=Fo.positionedLines.length===1;if(vb+=fb(Xt,dn,Fo,rs,xr,li,er,Li,ta,Hn.vertical?m.ai.horizontal:m.ai.horizontalOnly,Ru?wb:[Si],Da,a0,ar,pr),Ru)break}Hn.vertical&&(_b+=fb(Xt,dn,Hn.vertical,rs,xr,li,er,Li,ta,m.ai.vertical,["vertical"],Da,l0,ar,pr));const SM=na?na.boxStartIndex:Xt.collisionBoxArray.length,EM=na?na.boxEndIndex:Xt.collisionBoxArray.length,TM=zo?zo.boxStartIndex:Xt.collisionBoxArray.length,CM=zo?zo.boxEndIndex:Xt.collisionBoxArray.length,PM=is?is.boxStartIndex:Xt.collisionBoxArray.length,IM=is?is.boxEndIndex:Xt.collisionBoxArray.length,AM=Jr?Jr.boxStartIndex:Xt.collisionBoxArray.length,MM=Jr?Jr.boxEndIndex:Xt.collisionBoxArray.length;let Cs=-1;const Zp=(Si,Fo)=>Si&&Si.circleDiameter?Math.max(Si.circleDiameter,Fo):Fo;Cs=Zp(na,Cs),Cs=Zp(zo,Cs),Cs=Zp(is,Cs),Cs=Zp(Jr,Cs);const bb=Cs>-1?1:0;bb&&(Cs*=Vc/Br),Xt.glyphOffsetArray.length>=Nc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),er.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,er.sortKey);const kM=db(xr,er,pr),[zM,FM]=function(Si,Fo){const Ru=Si.length,Ps=Fo==null?void 0:Fo.values;if((Ps==null?void 0:Ps.length)>0)for(let Ou=0;Ou<Ps.length;Ou+=2){const ra=Ps[Ou+1];Si.emplaceBack(m.ar[Ps[Ou]],ra[0],ra[1])}return[Ru,Si.length]}(Xt.textAnchorOffsets,kM);Xt.symbolInstances.emplaceBack(dn.x,dn.y,Da.right>=0?Da.right:-1,Da.center>=0?Da.center:-1,Da.left>=0?Da.left:-1,Da.vertical||-1,a0,l0,xb,SM,EM,TM,CM,PM,IM,AM,MM,Ri,vb,_b,La,Nd,bb,0,Hr,Cs,zM,FM)}(o,Yt,ft,s,h,g,$t,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Re,[Ye,Ye,Ye,Ye],Dt,I,nt,lt,on,le,n,_,z,U,x)};if(Rt==="line")for(const ft of rb(n.geometry,0,0,jr,jr)){const Yt=gM(ft,Ke,_t,s.vertical||me,h,24,Ne,o.overscaling,jr);for(const Xt of Yt)me&&wM(o,me.text,kt,Xt)||Nt(ft,Xt)}else if(Rt==="line-center"){for(const ft of n.geometry)if(ft.length>1){const Yt=mM(ft,_t,s.vertical||me,h,24,Ne);Yt&&Nt(ft,Yt)}}else if(n.type==="Polygon")for(const ft of vl(n.geometry,0)){const Yt=vM(ft,16);Nt(ft[0],new Fl(Yt.x,Yt.y,0))}else if(n.type==="LineString")for(const ft of n.geometry)Nt(ft,new Fl(ft[0].x,ft[0].y,0));else if(n.type==="Point")for(const ft of n.geometry)for(const Yt of ft)Nt([Yt],new Fl(Yt.x,Yt.y,0))}function fb(o,n,s,h,g,_,x,w,I,z,U,J,ne,le,me){const be=function(nt,Ke,Ye,lt,_t,Dt,on,Rt){const kt=lt.layout.get("text-rotate").evaluate(Dt,{})*Math.PI/180,qt=[];for(const $t of Ke.positionedLines)for(const Nt of $t.positionedGlyphs){if(!Nt.rect)continue;const ft=Nt.rect||{};let Yt=Aw+1,Xt=!0,dn=1,qn=0;const Hn=(_t||Rt)&&Nt.vertical,Wr=Nt.metrics.advance*Nt.scale/2;if(Rt&&Ke.verticalizable&&(qn=$t.lineOffset/2-(Nt.imageName?-(Br-Nt.metrics.width*Nt.scale)/2:(Nt.scale-1)*Br)),Nt.imageName){const Rn=on[Nt.imageName];Xt=Rn.sdf,dn=Rn.pixelRatio,Yt=Zi/dn}const rs=_t?[Nt.x+Wr,Nt.y]:[0,0];let ai=_t?[0,0]:[Nt.x+Wr+Ye[0],Nt.y+Ye[1]-qn],xr=[0,0];Hn&&(xr=ai,ai=[0,0]);const ji=Nt.metrics.isDoubleResolution?2:1,Ri=(Nt.metrics.left-Yt)*Nt.scale-Wr+ai[0],Oi=(-Nt.metrics.top-Yt)*Nt.scale+ai[1],wr=Ri+ft.w/ji*Nt.scale/dn,Hr=Oi+ft.h/ji*Nt.scale/dn,bi=new b(Ri,Oi),li=new b(wr,Oi),Li=new b(Ri,Hr),ui=new b(wr,Hr);if(Hn){const Rn=new b(-Wr,Wr-jd),er=-Math.PI/2,ar=Br/2-Wr,lo=new b(5-jd-ar,-(Nt.imageName?ar:0)),pr=new b(...xr);bi._rotateAround(er,Rn)._add(lo)._add(pr),li._rotateAround(er,Rn)._add(lo)._add(pr),Li._rotateAround(er,Rn)._add(lo)._add(pr),ui._rotateAround(er,Rn)._add(lo)._add(pr)}if(kt){const Rn=Math.sin(kt),er=Math.cos(kt),ar=[er,-Rn,Rn,er];bi._matMult(ar),li._matMult(ar),Li._matMult(ar),ui._matMult(ar)}const ko=new b(0,0),Wi=new b(0,0);qt.push({tl:bi,tr:li,bl:Li,br:ui,tex:ft,writingMode:Ke.writingMode,glyphOffset:rs,sectionIndex:Nt.sectionIndex,isSDF:Xt,pixelOffsetTL:ko,pixelOffsetBR:Wi,minFontScaleX:0,minFontScaleY:0})}return qt}(0,s,w,g,_,x,h,o.allowVerticalPlacement),Re=o.textSizeData;let Ne=null;Re.kind==="source"?(Ne=[ea*g.layout.get("text-size").evaluate(x,{})],Ne[0]>kl&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Od}. Reduce your "text-size".`)):Re.kind==="composite"&&(Ne=[ea*le.compositeTextSizes[0].evaluate(x,{},me),ea*le.compositeTextSizes[1].evaluate(x,{},me)],(Ne[0]>kl||Ne[1]>kl)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${Od}. Reduce your "text-size".`)),o.addSymbols(o.text,be,Ne,w,_,x,z,n,I.lineStartIndex,I.lineLength,ne,me);for(const nt of U)J[nt]=o.text.placedSymbolArray.length-1;return 4*be.length}function pb(o){for(const n in o)return o[n];return null}function wM(o,n,s,h){const g=o.compareText;if(n in g){const _=g[n];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<s)return!0}else g[n]=[];return g[n].push(h),!1}const mb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class e0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=mb[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new e0(w,x,_,n)}constructor(n,s=64,h=Float64Array,g){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const _=mb.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-w%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return t0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:w}=this,I=[0,_.length-1,0],z=[];for(;I.length;){const U=I.pop()||0,J=I.pop()||0,ne=I.pop()||0;if(J-ne<=w){for(let Re=ne;Re<=J;Re++){const Ne=x[2*Re],nt=x[2*Re+1];Ne>=n&&Ne<=h&&nt>=s&&nt<=g&&z.push(_[Re])}continue}const le=ne+J>>1,me=x[2*le],be=x[2*le+1];me>=n&&me<=h&&be>=s&&be<=g&&z.push(_[le]),(U===0?n<=me:s<=be)&&(I.push(ne),I.push(le-1),I.push(1-U)),(U===0?h>=me:g>=be)&&(I.push(le+1),I.push(J),I.push(1-U))}return z}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,w=[0,g.length-1,0],I=[],z=h*h;for(;w.length;){const U=w.pop()||0,J=w.pop()||0,ne=w.pop()||0;if(J-ne<=x){for(let Re=ne;Re<=J;Re++)yb(_[2*Re],_[2*Re+1],n,s)<=z&&I.push(g[Re]);continue}const le=ne+J>>1,me=_[2*le],be=_[2*le+1];yb(me,be,n,s)<=z&&I.push(g[le]),(U===0?n-h<=me:s-h<=be)&&(w.push(ne),w.push(le-1),w.push(1-U)),(U===0?n+h>=me:s+h>=be)&&(w.push(le+1),w.push(J),w.push(1-U))}return I}}function t0(o,n,s,h,g,_){if(g-h<=s)return;const x=h+g>>1;gb(o,n,x,h,g,_),t0(o,n,s,h,x-1,1-_),t0(o,n,s,x+1,g,1-_)}function gb(o,n,s,h,g,_){for(;g>h;){if(g-h>600){const z=g-h+1,U=s-h+1,J=Math.log(z),ne=.5*Math.exp(2*J/3),le=.5*Math.sqrt(J*ne*(z-ne)/z)*(U-z/2<0?-1:1);gb(o,n,s,Math.max(h,Math.floor(s-U*ne/z+le)),Math.min(g,Math.floor(s+(z-U)*ne/z+le)),_)}const x=n[2*s+_];let w=h,I=g;for(Dd(o,n,h,s),n[2*g+_]>x&&Dd(o,n,h,g);w<I;){for(Dd(o,n,w,I),w++,I--;n[2*w+_]<x;)w++;for(;n[2*I+_]>x;)I--}n[2*h+_]===x?Dd(o,n,h,I):(I++,Dd(o,n,I,g)),I<=s&&(h=I+1),s<=I&&(g=I-1)}}function Dd(o,n,s,h){n0(o,s,h),n0(n,2*s,2*h),n0(n,2*s+1,2*h+1)}function n0(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function yb(o,n,s,h){const g=o-s,_=n-h;return g*g+_*_}var r0;m.bf=void 0,(r0=m.bf||(m.bf={})).create="create",r0.load="load",r0.fullLoad="fullLoad";let Gp=null,Bd=[];const i0=1e3/60,o0="loadTime",s0="fullLoadTime",bM={mark(o){performance.mark(o)},frame(o){const n=o;Gp!=null&&Bd.push(n-Gp),Gp=n},clearMetrics(){Gp=null,Bd=[],performance.clearMeasures(o0),performance.clearMeasures(s0);for(const o in m.bf)performance.clearMarks(m.bf[o])},getPerformanceMetrics(){performance.measure(o0,m.bf.create,m.bf.load),performance.measure(s0,m.bf.create,m.bf.fullLoad);const o=performance.getEntriesByName(o0)[0].duration,n=performance.getEntriesByName(s0)[0].duration,s=Bd.length,h=1/(Bd.reduce((_,x)=>_+x,0)/s/1e3),g=Bd.filter(_=>_>i0).reduce((_,x)=>_+(x-i0)/i0,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:g/(s+g)*100,totalFrames:s}}};m.$=class extends xe{},m.A=jc,m.B=dd,m.C=function(o){if(ce==null){const n=o.navigator?o.navigator.userAgent:null;ce=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ce},m.D=Jt,m.E=ln,m.F=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new fM(()=>this.process()),this.subscription=function(s,h,g,_){return s.addEventListener(h,g,!1),{unsubscribe:()=>{s.removeEventListener(h,g,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const w={id:g,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const _=[],x=Object.assign(Object.assign({},o),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Iu(o.data,_)});this.target.postMessage(x,{transfer:_})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!=="resource://android"&&location.origin!=="resource://android"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const g=this.resolveRejects[o];return delete this.resolveRejects[o],g?void(n.error?g.reject(ts(n.error)):g.resolve(ts(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ts(n.data),h=new AbortController;this.abortControllers[o]=h;try{const g=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,g)}catch(g){this.completeTask(o,g)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const g={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Iu(n):null,data:Iu(s,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.G=We,m.H=function(){var o=new jc(16);return jc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},m.I=Uy,m.J=function(o,n,s){var h,g,_,x,w,I,z,U,J,ne,le,me,be=s[0],Re=s[1],Ne=s[2];return n===o?(o[12]=n[0]*be+n[4]*Re+n[8]*Ne+n[12],o[13]=n[1]*be+n[5]*Re+n[9]*Ne+n[13],o[14]=n[2]*be+n[6]*Re+n[10]*Ne+n[14],o[15]=n[3]*be+n[7]*Re+n[11]*Ne+n[15]):(g=n[1],_=n[2],x=n[3],w=n[4],I=n[5],z=n[6],U=n[7],J=n[8],ne=n[9],le=n[10],me=n[11],o[0]=h=n[0],o[1]=g,o[2]=_,o[3]=x,o[4]=w,o[5]=I,o[6]=z,o[7]=U,o[8]=J,o[9]=ne,o[10]=le,o[11]=me,o[12]=h*be+w*Re+J*Ne+n[12],o[13]=g*be+I*Re+ne*Ne+n[13],o[14]=_*be+z*Re+le*Ne+n[14],o[15]=x*be+U*Re+me*Ne+n[15]),o},m.K=function(o,n,s){var h=s[0],g=s[1],_=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*g,o[5]=n[5]*g,o[6]=n[6]*g,o[7]=n[7]*g,o[8]=n[8]*_,o[9]=n[9]*_,o[10]=n[10]*_,o[11]=n[11]*_,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},m.L=Jx,m.M=function(o,n){const s={};for(let h=0;h<n.length;h++){const g=n[h];g in o&&(s[g]=o[g])}return s},m.N=zl,m.O=Ww,m.P=b,m.Q=Hw,m.R=Ao,m.S=Mo,m.T=Sl,m.U=q,m.V=X,m.W=fe,m.X=jr,m.Y=R,m.Z=Bp,m._=u,m.a=Fe,m.a$=function(o,n){var s=o[0],h=o[1],g=o[2],_=o[3],x=o[4],w=o[5],I=o[6],z=o[7],U=o[8],J=o[9],ne=o[10],le=o[11],me=o[12],be=o[13],Re=o[14],Ne=o[15],nt=n[0],Ke=n[1],Ye=n[2],lt=n[3],_t=n[4],Dt=n[5],on=n[6],Rt=n[7],kt=n[8],qt=n[9],$t=n[10],Nt=n[11],ft=n[12],Yt=n[13],Xt=n[14],dn=n[15];return Math.abs(s-nt)<=Fi*Math.max(1,Math.abs(s),Math.abs(nt))&&Math.abs(h-Ke)<=Fi*Math.max(1,Math.abs(h),Math.abs(Ke))&&Math.abs(g-Ye)<=Fi*Math.max(1,Math.abs(g),Math.abs(Ye))&&Math.abs(_-lt)<=Fi*Math.max(1,Math.abs(_),Math.abs(lt))&&Math.abs(x-_t)<=Fi*Math.max(1,Math.abs(x),Math.abs(_t))&&Math.abs(w-Dt)<=Fi*Math.max(1,Math.abs(w),Math.abs(Dt))&&Math.abs(I-on)<=Fi*Math.max(1,Math.abs(I),Math.abs(on))&&Math.abs(z-Rt)<=Fi*Math.max(1,Math.abs(z),Math.abs(Rt))&&Math.abs(U-kt)<=Fi*Math.max(1,Math.abs(U),Math.abs(kt))&&Math.abs(J-qt)<=Fi*Math.max(1,Math.abs(J),Math.abs(qt))&&Math.abs(ne-$t)<=Fi*Math.max(1,Math.abs(ne),Math.abs($t))&&Math.abs(le-Nt)<=Fi*Math.max(1,Math.abs(le),Math.abs(Nt))&&Math.abs(me-ft)<=Fi*Math.max(1,Math.abs(me),Math.abs(ft))&&Math.abs(be-Yt)<=Fi*Math.max(1,Math.abs(be),Math.abs(Yt))&&Math.abs(Re-Xt)<=Fi*Math.max(1,Math.abs(Re),Math.abs(Xt))&&Math.abs(Ne-dn)<=Fi*Math.max(1,Math.abs(Ne),Math.abs(dn))},m.a0=Dr,m.a1=Jy,m.a2=k,m.a3=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const g=window.document.createElement("source");Mt(h)||(n.crossOrigin="Anonymous"),g.src=h,n.appendChild(g)}})},m.a4=function(){return L++},m.a5=xn,m.a6=Nc,m.a7=Nn,m.a8=Fu,m.a9=Qn,m.aA=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=un(o[s],n[o[s].ref]));return o},m.aB=function(o){if(o.type==="custom")return new dM(o);switch(o.type){case"background":return new uM(o);case"circle":return new qI(o);case"fill":return new fA(o);case"fill-extrusion":return new IA(o);case"heatmap":return new YI(o);case"hillshade":return new eA(o);case"line":return new OA(o);case"raster":return new hM(o);case"symbol":return new Dp(o)}},m.aC=H,m.aD=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!Vt(o.version,n.version))return[{command:"setStyle",args:[n]}];Vt(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),Vt(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),Vt(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),Vt(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),Vt(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),Vt(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),Vt(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),Vt(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),Vt(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),Vt(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]}),Vt(o.projection,n.projection)||s.push({command:"setProjection",args:[n.projection]});const h={},g=[];(function(x,w,I,z){let U;for(U in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,U)&&(Object.prototype.hasOwnProperty.call(w,U)||D(U,I,z));for(U in w)Object.prototype.hasOwnProperty.call(w,U)&&(Object.prototype.hasOwnProperty.call(x,U)?Vt(x[U],w[U])||(x[U].type==="geojson"&&w[U].type==="geojson"&&He(x,w,U)?Ee(I,{command:"setGeoJSONSourceData",args:[U,w[U].data]}):ge(U,w,I,z)):N(U,w,I))})(o.sources,n.sources,g,h);const _=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):_.push(x)}),s=s.concat(g),function(x,w,I){w=w||[];const z=(x=x||[]).map(ht),U=w.map(ht),J=x.reduce(ue,{}),ne=w.reduce(ue,{}),le=z.slice(),me=Object.create(null);let be,Re,Ne,nt,Ke;for(let Ye=0,lt=0;Ye<z.length;Ye++)be=z[Ye],Object.prototype.hasOwnProperty.call(ne,be)?lt++:(Ee(I,{command:"removeLayer",args:[be]}),le.splice(le.indexOf(be,lt),1));for(let Ye=0,lt=0;Ye<U.length;Ye++)be=U[U.length-1-Ye],le[le.length-1-Ye]!==be&&(Object.prototype.hasOwnProperty.call(J,be)?(Ee(I,{command:"removeLayer",args:[be]}),le.splice(le.lastIndexOf(be,le.length-lt),1)):lt++,nt=le[le.length-Ye],Ee(I,{command:"addLayer",args:[ne[be],nt]}),le.splice(le.length-Ye,0,be),me[be]=!0);for(let Ye=0;Ye<U.length;Ye++)if(be=U[Ye],Re=J[be],Ne=ne[be],!me[be]&&!Vt(Re,Ne))if(Vt(Re.source,Ne.source)&&Vt(Re["source-layer"],Ne["source-layer"])&&Vt(Re.type,Ne.type)){for(Ke in et(Re.layout,Ne.layout,I,be,null,"setLayoutProperty"),et(Re.paint,Ne.paint,I,be,null,"setPaintProperty"),Vt(Re.filter,Ne.filter)||Ee(I,{command:"setFilter",args:[be,Ne.filter]}),Vt(Re.minzoom,Ne.minzoom)&&Vt(Re.maxzoom,Ne.maxzoom)||Ee(I,{command:"setLayerZoomRange",args:[be,Ne.minzoom,Ne.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?et(Re[Ke],Ne[Ke],I,be,Ke.slice(6),"setPaintProperty"):Vt(Re[Ke],Ne[Ke])||Ee(I,{command:"setLayerProperty",args:[be,Ke,Ne[Ke]]}));for(Ke in Ne)Object.prototype.hasOwnProperty.call(Ne,Ke)&&!Object.prototype.hasOwnProperty.call(Re,Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?et(Re[Ke],Ne[Ke],I,be,Ke.slice(6),"setPaintProperty"):Vt(Re[Ke],Ne[Ke])||Ee(I,{command:"setLayerProperty",args:[be,Ke,Ne[Ke]]}))}else Ee(I,{command:"removeLayer",args:[be]}),nt=le[le.lastIndexOf(be)+1],Ee(I,{command:"addLayer",args:[Ne,nt]})}(_,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},m.aE=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},m.aF=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},m.aG=B,m.aH=te,m.aI=class extends Mu{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},m.aJ=Tp,m.aK=class extends Mu{constructor(o,n){super(o,n),this.current=$I}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},m.aL=Nx,m.aM=Ux,m.aN=kn,m.aO=class extends Mu{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},m.aP=class extends Mu{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},m.aQ=function(o,n,s,h,g,_,x){var w=1/(n-s),I=1/(h-g),z=1/(_-x);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(n+s)*w,o[13]=(g+h)*I,o[14]=(x+_)*z,o[15]=1,o},m.aR=KI,m.aS=class extends yt{},m.aT=NA,m.aU=class extends Lt{},m.aV=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},m.aW=nw,m.aX=Fa,m.aY=Zr,m.aZ=class extends jt{},m.a_=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},m.aa=Qw,m.ab=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,g,_)=>{const x=g||_;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},m.ac=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},m.ad=K,m.ae=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[0],x=n[1],w=n[2],I=n[3],z=n[4],U=n[5],J=n[6],ne=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=_*g+z*h,o[1]=x*g+U*h,o[2]=w*g+J*h,o[3]=I*g+ne*h,o[4]=z*g-_*h,o[5]=U*g-x*h,o[6]=J*g-w*h,o[7]=ne*g-I*h,o},m.af=function(o){var n=new jc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},m.ag=Ap,m.ah=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=o,w=g?K(vi.interpolationFactor(g,n,_,x),0,1):0;o.kind==="camera"?h=yi.number(o.minSize,o.maxSize,w):s=w}return{uSizeT:s,uSize:h}},m.aj=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:g}){return o.kind==="source"?h/ea:o.kind==="composite"?yi.number(h/ea,g/ea,s):n},m.ak=Zy,m.al=function(o,n,s,h){const g=n.y-o.y,_=n.x-o.x,x=h.y-s.y,w=h.x-s.x,I=x*_-w*g;if(I===0)return null;const z=(w*(o.y-s.y)-x*(o.x-s.x))/I;return new b(o.x+z*_,o.y+z*g)},m.am=rb,m.an=Zx,m.ao=Py,m.ap=function(o){let n=1/0,s=1/0,h=-1/0,g=-1/0;for(const _ of o)n=Math.min(n,_.x),s=Math.min(s,_.y),h=Math.max(h,_.x),g=Math.max(g,_.y);return[n,s,h,g]},m.aq=Br,m.as=Gy,m.at=function(o,n){var s=n[0],h=n[1],g=n[2],_=n[3],x=n[4],w=n[5],I=n[6],z=n[7],U=n[8],J=n[9],ne=n[10],le=n[11],me=n[12],be=n[13],Re=n[14],Ne=n[15],nt=s*w-h*x,Ke=s*I-g*x,Ye=s*z-_*x,lt=h*I-g*w,_t=h*z-_*w,Dt=g*z-_*I,on=U*be-J*me,Rt=U*Re-ne*me,kt=U*Ne-le*me,qt=J*Re-ne*be,$t=J*Ne-le*be,Nt=ne*Ne-le*Re,ft=nt*Nt-Ke*$t+Ye*qt+lt*kt-_t*Rt+Dt*on;return ft?(o[0]=(w*Nt-I*$t+z*qt)*(ft=1/ft),o[1]=(g*$t-h*Nt-_*qt)*ft,o[2]=(be*Dt-Re*_t+Ne*lt)*ft,o[3]=(ne*_t-J*Dt-le*lt)*ft,o[4]=(I*kt-x*Nt-z*Rt)*ft,o[5]=(s*Nt-g*kt+_*Rt)*ft,o[6]=(Re*Ye-me*Dt-Ne*Ke)*ft,o[7]=(U*Dt-ne*Ye+le*Ke)*ft,o[8]=(x*$t-w*kt+z*on)*ft,o[9]=(h*kt-s*$t-_*on)*ft,o[10]=(me*_t-be*Ye+Ne*nt)*ft,o[11]=(J*Ye-U*_t-le*nt)*ft,o[12]=(w*Rt-x*qt-I*on)*ft,o[13]=(s*qt-h*Rt+g*on)*ft,o[14]=(be*Ke-me*lt-Re*nt)*ft,o[15]=(U*lt-J*Ke+ne*nt)*ft,o):null},m.au=Qy,m.av=Vy,m.aw=e0,m.ax=function(){const o={},n=Qe.$version;for(const s in Qe.$root){const h=Qe.$root[s];if(h.required){let g=null;g=s==="version"?n:h.type==="array"?[]:{},g!=null&&(o[s]=g)}}return o},m.ay=yp,m.az=ct,m.b=ee,m.b0=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},m.b1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},m.b2=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},m.b3=Z,m.b4=qw,m.b5=Xw,m.b6=function(o,n,s,h,g){var _,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,g!=null&&g!==1/0?(o[10]=(g+h)*(_=1/(h-g)),o[14]=2*g*h*_):(o[10]=-1,o[14]=-2*h),o},m.b7=function(o,n,s){var h=Math.sin(s),g=Math.cos(s),_=n[4],x=n[5],w=n[6],I=n[7],z=n[8],U=n[9],J=n[10],ne=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=_*g+z*h,o[5]=x*g+U*h,o[6]=w*g+J*h,o[7]=I*g+ne*h,o[8]=z*g-_*h,o[9]=U*g-x*h,o[10]=J*g-w*h,o[11]=ne*g-I*h,o},m.b8=G,m.b9=ae,m.bA=function(o){return o.message===Ue},m.bB=St,m.bC=Js,m.ba=function(o){return o*Math.PI/180},m.bb=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},m.bc=class extends de{},m.bd=Ky,m.be=bM,m.bg=it,m.bh=function(o,n){Fe.REGISTERED_PROTOCOLS[o]=n},m.bi=function(o){delete Fe.REGISTERED_PROTOCOLS[o]},m.bj=function(o,n){const s={};for(let g=0;g<o.length;g++){const _=n&&n[o[g].id]||ed(o[g]);n&&(n[o[g].id]=_);let x=s[_];x||(x=s[_]=[]),x.push(o[g])}const h=[];for(const g in s)h.push(s[g]);return h},m.bk=Ut,m.bl=Yw,m.bm=eb,m.bn=kw,m.bo=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=jr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new Qn(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Qn(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Qn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:U}=o.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Qn(z),o.canonical),h["text-size"].possiblyEvaluate(new Qn(U),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:U}=o.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Qn(z),o.canonical),h["icon-size"].possiblyEvaluate(new Qn(U),o.canonical)]}const _=s.get("text-line-height")*Br,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),I=s.get("text-size");for(const z of o.bucket.features){const U=s.get("text-font").evaluate(z,{},o.canonical).join(","),J=I.evaluate(z,{},o.canonical),ne=g.layoutTextSize.evaluate(z,{},o.canonical),le=g.layoutIconSize.evaluate(z,{},o.canonical),me={horizontal:{},vertical:void 0},be=z.text;let Re,Ne=[0,0];if(be){const Ye=be.toString(),lt=s.get("text-letter-spacing").evaluate(z,{},o.canonical)*Br,_t=xy(Ye)?lt:0,Dt=s.get("text-anchor").evaluate(z,{},o.canonical),on=db(n,z,o.canonical);if(!on){const $t=s.get("text-radial-offset").evaluate(z,{},o.canonical);Ne=$t?hb(Dt,[$t*Br,Yy]):s.get("text-offset").evaluate(z,{},o.canonical).map(Nt=>Nt*Br)}let Rt=x?"center":s.get("text-justify").evaluate(z,{},o.canonical);const kt=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(z,{},o.canonical)*Br:1/0,qt=()=>{o.bucket.allowVerticalPlacement&&md(Ye)&&(me.vertical=Rp(be,o.glyphMap,o.glyphPositions,o.imagePositions,U,kt,_,Dt,"left",_t,Ne,m.ai.vertical,!0,ne,J))};if(!x&&on){const $t=new Set;if(Rt==="auto")for(let ft=0;ft<on.values.length;ft+=2)$t.add(Qy(on.values[ft]));else $t.add(Rt);let Nt=!1;for(const ft of $t)if(!me.horizontal[ft])if(Nt)me.horizontal[ft]=me.horizontal[0];else{const Yt=Rp(be,o.glyphMap,o.glyphPositions,o.imagePositions,U,kt,_,"center",ft,_t,Ne,m.ai.horizontal,!1,ne,J);Yt&&(me.horizontal[ft]=Yt,Nt=Yt.positionedLines.length===1)}qt()}else{Rt==="auto"&&(Rt=Qy(Dt));const $t=Rp(be,o.glyphMap,o.glyphPositions,o.imagePositions,U,kt,_,Dt,Rt,_t,Ne,m.ai.horizontal,!1,ne,J);$t&&(me.horizontal[Rt]=$t),qt(),md(Ye)&&x&&w&&(me.vertical=Rp(be,o.glyphMap,o.glyphPositions,o.imagePositions,U,kt,_,Dt,Rt,_t,Ne,m.ai.vertical,!1,ne,J))}}let nt=!1;if(z.icon&&z.icon.name){const Ye=o.imageMap[z.icon.name];Ye&&(Re=iM(o.imagePositions[z.icon.name],s.get("icon-offset").evaluate(z,{},o.canonical),s.get("icon-anchor").evaluate(z,{},o.canonical)),nt=!!Ye.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=nt:o.bucket.sdfIcons!==nt&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ke=pb(me.horizontal)||me.vertical;o.bucket.iconsInText=!!Ke&&Ke.iconsInText,(Ke||Re)&&xM(o.bucket,z,me,Re,o.imageMap,g,ne,le,Ne,nt,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},m.bp=Ly,m.bq=jy,m.br=Oy,m.bs=Al,m.bt=By,m.bu=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},m.bv=function(o,n,s,h,g){return u(this,void 0,void 0,function*(){if(X())try{return yield fe(o,n,s,h,g)}catch{}return function(_,x,w,I,z){const U=_.width,J=_.height;Se&&Ce||(Se=new OffscreenCanvas(U,J),Ce=Se.getContext("2d",{willReadFrequently:!0})),Se.width=U,Se.height=J,Ce.drawImage(_,0,0,U,J);const ne=Ce.getImageData(x,w,I,z);return Ce.clearRect(0,0,U,J),ne.data}(o,n,s,h,g)})},m.bw=Jw,m.bx=S,m.by=P,m.bz=bw,m.c=Ae,m.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.e=T,m.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=re})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(g):re}),m.g=Ze,m.h=(o,n)=>vt(T(o,{type:"json"}),n),m.i=oe,m.j=Ht,m.k=Wt,m.l=(o,n)=>vt(T(o,{type:"arrayBuffer"}),n),m.m=vt,m.n=function(o){return new By(o).readFields(JA,[])},m.o=Pd,m.p=Mw,m.q=d,m.r=yy,m.s=Mt,m.t=fd,m.u=Ot,m.v=Qe,m.w=_e,m.x=Es,m.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},m.z=yi}),c("worker",["./shared"],function(m){class u{constructor(se){this.keyCache={},se&&this.replace(se)}replace(se){this._layerConfigs={},this._layers={},this.update(se,[])}update(se,ie){for(const Ie of se){this._layerConfigs[Ie.id]=Ie;const Me=this._layers[Ie.id]=m.aB(Ie);Me._featureFilter=m.a7(Me.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of ie)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const we=m.bj(Object.values(this._layerConfigs),this.keyCache);for(const Ie of we){const Me=Ie.map(ot=>this._layers[ot.id]),Be=Me[0];if(Be.visibility==="none")continue;const qe=Be.source||"";let De=this.familiesBySource[qe];De||(De=this.familiesBySource[qe]={});const st=Be.sourceLayer||"_geojsonTileLayer";let dt=De[st];dt||(dt=De[st]=[]),dt.push(Me)}}}class S{constructor(se){const ie={},we=[];for(const qe in se){const De=se[qe],st=ie[qe]={};for(const dt in De){const ot=De[+dt];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const Ct={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};we.push(Ct),st[dt]={rect:Ct,metrics:ot.metrics}}}const{w:Ie,h:Me}=m.p(we),Be=new m.o({width:Ie||1,height:Me||1});for(const qe in se){const De=se[qe];for(const st in De){const dt=De[+st];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const ot=ie[qe][st].rect;m.o.copy(dt.bitmap,Be,{x:0,y:0},{x:ot.x+1,y:ot.y+1},dt.bitmap)}}this.image=Be,this.positions=ie}}m.bk("GlyphAtlas",S);class P{constructor(se){this.tileID=new m.S(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.uid=se.uid,this.zoom=se.zoom,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.returnDependencies=!!se.returnDependencies,this.promoteId=se.promoteId,this.inFlightDependencies=[]}parse(se,ie,we,Ie){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=se,this.collisionBoxArray=new m.a5;const Me=new m.bl(Object.keys(se.layers).sort()),Be=new m.bm(this.tileID,this.promoteId);Be.bucketLayerIDs=[];const qe={},De={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:we},st=ie.familiesBySource[this.source];for(const wn in st){const Bn=se.layers[wn];if(!Bn)continue;Bn.version===1&&m.w(`Vector tile source "${this.source}" layer "${wn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yn=Me.encode(wn),Er=[];for(let $r=0;$r<Bn.length;$r++){const Vr=Bn.feature($r),Ho=Be.getId(Vr,wn);Er.push({feature:Vr,id:Ho,index:$r,sourceLayerIndex:Yn})}for(const $r of st[wn]){const Vr=$r[0];Vr.source!==this.source&&m.w(`layer.source = ${Vr.source} does not equal this.source = ${this.source}`),Vr.minzoom&&this.zoom<Math.floor(Vr.minzoom)||Vr.maxzoom&&this.zoom>=Vr.maxzoom||Vr.visibility!=="none"&&(M($r,this.zoom,we),(qe[Vr.id]=Vr.createBucket({index:Be.bucketLayerIDs.length,layers:$r,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yn,sourceID:this.source})).populate(Er,De,this.tileID.canonical),Be.bucketLayerIDs.push($r.map(Ho=>Ho.id)))}}const dt=m.aG(De.glyphDependencies,wn=>Object.keys(wn).map(Number));this.inFlightDependencies.forEach(wn=>wn==null?void 0:wn.abort()),this.inFlightDependencies=[];let ot=Promise.resolve({});if(Object.keys(dt).length){const wn=new AbortController;this.inFlightDependencies.push(wn),ot=Ie.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},wn)}const Ct=Object.keys(De.iconDependencies);let Kt=Promise.resolve({});if(Ct.length){const wn=new AbortController;this.inFlightDependencies.push(wn),Kt=Ie.sendAsync({type:"GI",data:{icons:Ct,source:this.source,tileID:this.tileID,type:"icons"}},wn)}const tn=Object.keys(De.patternDependencies);let pn=Promise.resolve({});if(tn.length){const wn=new AbortController;this.inFlightDependencies.push(wn),pn=Ie.sendAsync({type:"GI",data:{icons:tn,source:this.source,tileID:this.tileID,type:"patterns"}},wn)}const[En,hn,Un]=yield Promise.all([ot,Kt,pn]),Jn=new S(En),nr=new m.bn(hn,Un);for(const wn in qe){const Bn=qe[wn];Bn instanceof m.a6?(M(Bn.layers,this.zoom,we),m.bo({bucket:Bn,glyphMap:En,glyphPositions:Jn.positions,imageMap:hn,imagePositions:nr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Bn.hasPattern&&(Bn instanceof m.bp||Bn instanceof m.bq||Bn instanceof m.br)&&(M(Bn.layers,this.zoom,we),Bn.addFeatures(De,this.tileID.canonical,nr.patternPositions))}return this.status="done",{buckets:Object.values(qe).filter(wn=>!wn.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jn.image,imageAtlas:nr,glyphMap:this.returnDependencies?En:null,iconMap:this.returnDependencies?hn:null,glyphPositions:this.returnDependencies?Jn.positions:null}})}}function M(ze,se,ie){const we=new m.a9(se);for(const Ie of ze)Ie.recalculate(we,ie)}class b{constructor(se,ie,we){this.actor=se,this.layerIndex=ie,this.availableImages=we,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(se,ie){return m._(this,void 0,void 0,function*(){const we=yield m.l(se.request,ie);try{return{vectorTile:new m.bs.VectorTile(new m.bt(we.data)),rawData:we.data,cacheControl:we.cacheControl,expires:we.expires}}catch(Ie){const Me=new Uint8Array(we.data);let Be=`Unable to parse the tile at ${se.request.url}, `;throw Be+=Me[0]===31&&Me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.message}`,new Error(Be)}})}loadTile(se){return m._(this,void 0,void 0,function*(){const ie=se.uid,we=!!(se&&se.request&&se.request.collectResourceTiming)&&new m.bu(se.request),Ie=new P(se);this.loading[ie]=Ie;const Me=new AbortController;Ie.abort=Me;try{const Be=yield this.loadVectorTile(se,Me);if(delete this.loading[ie],!Be)return null;const qe=Be.rawData,De={};Be.expires&&(De.expires=Be.expires),Be.cacheControl&&(De.cacheControl=Be.cacheControl);const st={};if(we){const ot=we.finish();ot&&(st.resourceTiming=JSON.parse(JSON.stringify(ot)))}Ie.vectorTile=Be.vectorTile;const dt=Ie.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ie]=Ie,this.fetching[ie]={rawTileData:qe,cacheControl:De,resourceTiming:st};try{const ot=yield dt;return m.e({rawTileData:qe.slice(0)},ot,De,st)}finally{delete this.fetching[ie]}}catch(Be){throw delete this.loading[ie],Ie.status="done",this.loaded[ie]=Ie,Be}})}reloadTile(se){return m._(this,void 0,void 0,function*(){const ie=se.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const we=this.loaded[ie];if(we.showCollisionBoxes=se.showCollisionBoxes,we.status==="parsing"){const Ie=yield we.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);let Me;if(this.fetching[ie]){const{rawTileData:Be,cacheControl:qe,resourceTiming:De}=this.fetching[ie];delete this.fetching[ie],Me=m.e({rawTileData:Be.slice(0)},Ie,qe,De)}else Me=Ie;return Me}if(we.status==="done"&&we.vectorTile)return we.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(se){return m._(this,void 0,void 0,function*(){const ie=this.loading,we=se.uid;ie&&ie[we]&&ie[we].abort&&(ie[we].abort.abort(),delete ie[we])})}removeTile(se){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[se.uid]&&delete this.loaded[se.uid]})}}class C{constructor(){this.loaded={}}loadTile(se){return m._(this,void 0,void 0,function*(){const{uid:ie,encoding:we,rawImageData:Ie,redFactor:Me,greenFactor:Be,blueFactor:qe,baseShift:De}=se,st=Ie.width+2,dt=Ie.height+2,ot=m.b(Ie)?new m.R({width:st,height:dt},yield m.bv(Ie,-1,-1,st,dt)):Ie,Ct=new m.bw(ie,ot,we,Me,Be,qe,De);return this.loaded=this.loaded||{},this.loaded[ie]=Ct,Ct})}removeTile(se){const ie=this.loaded,we=se.uid;ie&&ie[we]&&delete ie[we]}}function O(ze,se){if(ze.length!==0){$(ze[0],se);for(var ie=1;ie<ze.length;ie++)$(ze[ie],!se)}}function $(ze,se){for(var ie=0,we=0,Ie=0,Me=ze.length,Be=Me-1;Ie<Me;Be=Ie++){var qe=(ze[Ie][0]-ze[Be][0])*(ze[Be][1]+ze[Ie][1]),De=ie+qe;we+=Math.abs(ie)>=Math.abs(qe)?ie-De+qe:qe-De+ie,ie=De}ie+we>=0!=!!se&&ze.reverse()}var j=m.bx(function ze(se,ie){var we,Ie=se&&se.type;if(Ie==="FeatureCollection")for(we=0;we<se.features.length;we++)ze(se.features[we],ie);else if(Ie==="GeometryCollection")for(we=0;we<se.geometries.length;we++)ze(se.geometries[we],ie);else if(Ie==="Feature")ze(se.geometry,ie);else if(Ie==="Polygon")O(se.coordinates,ie);else if(Ie==="MultiPolygon")for(we=0;we<se.coordinates.length;we++)O(se.coordinates[we],ie);return se});const he=m.bs.VectorTileFeature.prototype.toGeoJSON;var q={exports:{}},X=m.by,G=m.bs.VectorTileFeature,ae=K;function K(ze,se){this.options=se||{},this.features=ze,this.length=ze.length}function Z(ze,se){this.id=typeof ze.id=="number"?ze.id:void 0,this.type=ze.type,this.rawGeometry=ze.type===1?[ze.geometry]:ze.geometry,this.properties=ze.tags,this.extent=se||4096}K.prototype.feature=function(ze){return new Z(this.features[ze],this.options.extent)},Z.prototype.loadGeometry=function(){var ze=this.rawGeometry;this.geometry=[];for(var se=0;se<ze.length;se++){for(var ie=ze[se],we=[],Ie=0;Ie<ie.length;Ie++)we.push(new X(ie[Ie][0],ie[Ie][1]));this.geometry.push(we)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ze=this.geometry,se=1/0,ie=-1/0,we=1/0,Ie=-1/0,Me=0;Me<ze.length;Me++)for(var Be=ze[Me],qe=0;qe<Be.length;qe++){var De=Be[qe];se=Math.min(se,De.x),ie=Math.max(ie,De.x),we=Math.min(we,De.y),Ie=Math.max(Ie,De.y)}return[se,we,ie,Ie]},Z.prototype.toGeoJSON=G.prototype.toGeoJSON;var T=m.bz,L=ae;function B(ze){var se=new T;return function(ie,we){for(var Ie in ie.layers)we.writeMessage(3,te,ie.layers[Ie])}(ze,se),se.finish()}function te(ze,se){var ie;se.writeVarintField(15,ze.version||1),se.writeStringField(1,ze.name||""),se.writeVarintField(5,ze.extent||4096);var we={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<ze.length;ie++)we.feature=ze.feature(ie),se.writeMessage(2,H,we);var Ie=we.keys;for(ie=0;ie<Ie.length;ie++)se.writeStringField(3,Ie[ie]);var Me=we.values;for(ie=0;ie<Me.length;ie++)se.writeMessage(4,ce,Me[ie])}function H(ze,se){var ie=ze.feature;ie.id!==void 0&&se.writeVarintField(1,ie.id),se.writeMessage(2,ve,ze),se.writeVarintField(3,ie.type),se.writeMessage(4,oe,ie)}function ve(ze,se){var ie=ze.feature,we=ze.keys,Ie=ze.values,Me=ze.keycache,Be=ze.valuecache;for(var qe in ie.properties){var De=ie.properties[qe],st=Me[qe];if(De!==null){st===void 0&&(we.push(qe),Me[qe]=st=we.length-1),se.writeVarint(st);var dt=typeof De;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(De=JSON.stringify(De));var ot=dt+":"+De,Ct=Be[ot];Ct===void 0&&(Ie.push(De),Be[ot]=Ct=Ie.length-1),se.writeVarint(Ct)}}}function _e(ze,se){return(se<<3)+(7&ze)}function pe(ze){return ze<<1^ze>>31}function oe(ze,se){for(var ie=ze.loadGeometry(),we=ze.type,Ie=0,Me=0,Be=ie.length,qe=0;qe<Be;qe++){var De=ie[qe],st=1;we===1&&(st=De.length),se.writeVarint(_e(1,st));for(var dt=we===3?De.length-1:De.length,ot=0;ot<dt;ot++){ot===1&&we!==1&&se.writeVarint(_e(2,dt-1));var Ct=De[ot].x-Ie,Kt=De[ot].y-Me;se.writeVarint(pe(Ct)),se.writeVarint(pe(Kt)),Ie+=Ct,Me+=Kt}we===3&&se.writeVarint(_e(7,1))}}function ce(ze,se){var ie=typeof ze;ie==="string"?se.writeStringField(1,ze):ie==="boolean"?se.writeBooleanField(7,ze):ie==="number"&&(ze%1!=0?se.writeDoubleField(3,ze):ze<0?se.writeSVarintField(6,ze):se.writeVarintField(5,ze))}q.exports=B,q.exports.fromVectorTileJs=B,q.exports.fromGeojsonVt=function(ze,se){se=se||{};var ie={};for(var we in ze)ie[we]=new L(ze[we].features,se),ie[we].name=we,ie[we].version=se.version,ie[we].extent=se.extent;return B({layers:ie})},q.exports.GeoJSONWrapper=L;var ee=m.bx(q.exports);const re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ze=>ze},fe=Math.fround||(Se=new Float32Array(1),ze=>(Se[0]=+ze,Se[0]));var Se;const Ce=3,Ue=5,Ae=6;class Fe{constructor(se){this.options=Object.assign(Object.create(re),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:ie,minZoom:we,maxZoom:Ie}=this.options;ie&&console.time("total time");const Me=`prepare ${se.length} points`;ie&&console.time(Me),this.points=se;const Be=[];for(let De=0;De<se.length;De++){const st=se[De];if(!st.geometry)continue;const[dt,ot]=st.geometry.coordinates,Ct=fe(it(dt)),Kt=fe(ct(ot));Be.push(Ct,Kt,1/0,De,-1,1),this.options.reduce&&Be.push(0)}let qe=this.trees[Ie+1]=this._createTree(Be);ie&&console.timeEnd(Me);for(let De=Ie;De>=we;De--){const st=+Date.now();qe=this.trees[De]=this._createTree(this._cluster(qe,De)),ie&&console.log("z%d: %d clusters in %dms",De,qe.numItems,+Date.now()-st)}return ie&&console.timeEnd("total time"),this}getClusters(se,ie){let we=((se[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,se[1]));let Me=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)we=-180,Me=180;else if(we>Me){const ot=this.getClusters([we,Ie,180,Be],ie),Ct=this.getClusters([-180,Ie,Me,Be],ie);return ot.concat(Ct)}const qe=this.trees[this._limitZoom(ie)],De=qe.range(it(we),ct(Be),it(Me),ct(Ie)),st=qe.data,dt=[];for(const ot of De){const Ct=this.stride*ot;dt.push(st[Ct+Ue]>1?Ze(st,Ct,this.clusterProps):this.points[st[Ct+Ce]])}return dt}getChildren(se){const ie=this._getOriginId(se),we=this._getOriginZoom(se),Ie="No cluster with the specified id.",Me=this.trees[we];if(!Me)throw new Error(Ie);const Be=Me.data;if(ie*this.stride>=Be.length)throw new Error(Ie);const qe=this.options.radius/(this.options.extent*Math.pow(2,we-1)),De=Me.within(Be[ie*this.stride],Be[ie*this.stride+1],qe),st=[];for(const dt of De){const ot=dt*this.stride;Be[ot+4]===se&&st.push(Be[ot+Ue]>1?Ze(Be,ot,this.clusterProps):this.points[Be[ot+Ce]])}if(st.length===0)throw new Error(Ie);return st}getLeaves(se,ie,we){const Ie=[];return this._appendLeaves(Ie,se,ie=ie||10,we=we||0,0),Ie}getTile(se,ie,we){const Ie=this.trees[this._limitZoom(se)],Me=Math.pow(2,se),{extent:Be,radius:qe}=this.options,De=qe/Be,st=(we-De)/Me,dt=(we+1+De)/Me,ot={features:[]};return this._addTileFeatures(Ie.range((ie-De)/Me,st,(ie+1+De)/Me,dt),Ie.data,ie,we,Me,ot),ie===0&&this._addTileFeatures(Ie.range(1-De/Me,st,1,dt),Ie.data,Me,we,Me,ot),ie===Me-1&&this._addTileFeatures(Ie.range(0,st,De/Me,dt),Ie.data,-1,we,Me,ot),ot.features.length?ot:null}getClusterExpansionZoom(se){let ie=this._getOriginZoom(se)-1;for(;ie<=this.options.maxZoom;){const we=this.getChildren(se);if(ie++,we.length!==1)break;se=we[0].properties.cluster_id}return ie}_appendLeaves(se,ie,we,Ie,Me){const Be=this.getChildren(ie);for(const qe of Be){const De=qe.properties;if(De&&De.cluster?Me+De.point_count<=Ie?Me+=De.point_count:Me=this._appendLeaves(se,De.cluster_id,we,Ie,Me):Me<Ie?Me++:se.push(qe),se.length===we)break}return Me}_createTree(se){const ie=new m.aw(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let we=0;we<se.length;we+=this.stride)ie.add(se[we],se[we+1]);return ie.finish(),ie.data=se,ie}_addTileFeatures(se,ie,we,Ie,Me,Be){for(const qe of se){const De=qe*this.stride,st=ie[De+Ue]>1;let dt,ot,Ct;if(st)dt=We(ie,De,this.clusterProps),ot=ie[De],Ct=ie[De+1];else{const pn=this.points[ie[De+Ce]];dt=pn.properties;const[En,hn]=pn.geometry.coordinates;ot=it(En),Ct=ct(hn)}const Kt={type:1,geometry:[[Math.round(this.options.extent*(ot*Me-we)),Math.round(this.options.extent*(Ct*Me-Ie))]],tags:dt};let tn;tn=st||this.options.generateId?ie[De+Ce]:this.points[ie[De+Ce]].id,tn!==void 0&&(Kt.id=tn),Be.features.push(Kt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,ie){const{radius:we,extent:Ie,reduce:Me,minPoints:Be}=this.options,qe=we/(Ie*Math.pow(2,ie)),De=se.data,st=[],dt=this.stride;for(let ot=0;ot<De.length;ot+=dt){if(De[ot+2]<=ie)continue;De[ot+2]=ie;const Ct=De[ot],Kt=De[ot+1],tn=se.within(De[ot],De[ot+1],qe),pn=De[ot+Ue];let En=pn;for(const hn of tn){const Un=hn*dt;De[Un+2]>ie&&(En+=De[Un+Ue])}if(En>pn&&En>=Be){let hn,Un=Ct*pn,Jn=Kt*pn,nr=-1;const wn=((ot/dt|0)<<5)+(ie+1)+this.points.length;for(const Bn of tn){const Yn=Bn*dt;if(De[Yn+2]<=ie)continue;De[Yn+2]=ie;const Er=De[Yn+Ue];Un+=De[Yn]*Er,Jn+=De[Yn+1]*Er,De[Yn+4]=wn,Me&&(hn||(hn=this._map(De,ot,!0),nr=this.clusterProps.length,this.clusterProps.push(hn)),Me(hn,this._map(De,Yn)))}De[ot+4]=wn,st.push(Un/En,Jn/En,1/0,wn,-1,En),Me&&st.push(nr)}else{for(let hn=0;hn<dt;hn++)st.push(De[ot+hn]);if(En>1)for(const hn of tn){const Un=hn*dt;if(!(De[Un+2]<=ie)){De[Un+2]=ie;for(let Jn=0;Jn<dt;Jn++)st.push(De[Un+Jn])}}}}return st}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,ie,we){if(se[ie+Ue]>1){const Be=this.clusterProps[se[ie+Ae]];return we?Object.assign({},Be):Be}const Ie=this.points[se[ie+Ce]].properties,Me=this.options.map(Ie);return we&&Me===Ie?Object.assign({},Me):Me}}function Ze(ze,se,ie){return{type:"Feature",id:ze[se+Ce],properties:We(ze,se,ie),geometry:{type:"Point",coordinates:[(we=ze[se],360*(we-.5)),vt(ze[se+1])]}};var we}function We(ze,se,ie){const we=ze[se+Ue],Ie=we>=1e4?`${Math.round(we/1e3)}k`:we>=1e3?Math.round(we/100)/10+"k":we,Me=ze[se+Ae],Be=Me===-1?{}:Object.assign({},ie[Me]);return Object.assign(Be,{cluster:!0,cluster_id:ze[se+Ce],point_count:we,point_count_abbreviated:Ie})}function it(ze){return ze/360+.5}function ct(ze){const se=Math.sin(ze*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function vt(ze){const se=(180-360*ze)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function Mt(ze,se,ie,we){let Ie=we;const Me=se+(ie-se>>1);let Be,qe=ie-se;const De=ze[se],st=ze[se+1],dt=ze[ie],ot=ze[ie+1];for(let Ct=se+3;Ct<ie;Ct+=3){const Kt=pt(ze[Ct],ze[Ct+1],De,st,dt,ot);if(Kt>Ie)Be=Ct,Ie=Kt;else if(Kt===Ie){const tn=Math.abs(Ct-Me);tn<qe&&(Be=Ct,qe=tn)}}Ie>we&&(Be-se>3&&Mt(ze,se,Be,we),ze[Be+2]=Ie,ie-Be>3&&Mt(ze,Be,ie,we))}function pt(ze,se,ie,we,Ie,Me){let Be=Ie-ie,qe=Me-we;if(Be!==0||qe!==0){const De=((ze-ie)*Be+(se-we)*qe)/(Be*Be+qe*qe);De>1?(ie=Ie,we=Me):De>0&&(ie+=Be*De,we+=qe*De)}return Be=ze-ie,qe=se-we,Be*Be+qe*qe}function xt(ze,se,ie,we){const Ie={id:ze??null,type:se,geometry:ie,tags:we,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")Wt(Ie,ie);else if(se==="Polygon")Wt(Ie,ie[0]);else if(se==="MultiLineString")for(const Me of ie)Wt(Ie,Me);else if(se==="MultiPolygon")for(const Me of ie)Wt(Ie,Me[0]);return Ie}function Wt(ze,se){for(let ie=0;ie<se.length;ie+=3)ze.minX=Math.min(ze.minX,se[ie]),ze.minY=Math.min(ze.minY,se[ie+1]),ze.maxX=Math.max(ze.maxX,se[ie]),ze.maxY=Math.max(ze.maxY,se[ie+1])}function Ht(ze,se,ie,we){if(!se.geometry)return;const Ie=se.geometry.coordinates;if(Ie&&Ie.length===0)return;const Me=se.geometry.type,Be=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let qe=[],De=se.id;if(ie.promoteId?De=se.properties[ie.promoteId]:ie.generateId&&(De=we||0),Me==="Point")ln(Ie,qe);else if(Me==="MultiPoint")for(const st of Ie)ln(st,qe);else if(Me==="LineString")Qe(Ie,qe,Be,!1);else if(Me==="MultiLineString"){if(ie.lineMetrics){for(const st of Ie)qe=[],Qe(st,qe,Be,!1),ze.push(xt(De,"LineString",qe,se.properties));return}_n(Ie,qe,Be,!1)}else if(Me==="Polygon")_n(Ie,qe,Be,!0);else{if(Me!=="MultiPolygon"){if(Me==="GeometryCollection"){for(const st of se.geometry.geometries)Ht(ze,{id:De,geometry:st,properties:se.properties},ie,we);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const st of Ie){const dt=[];_n(st,dt,Be,!0),qe.push(dt)}}ze.push(xt(De,Me,qe,se.properties))}function ln(ze,se){se.push(un(ze[0]),Vt(ze[1]),0)}function Qe(ze,se,ie,we){let Ie,Me,Be=0;for(let De=0;De<ze.length;De++){const st=un(ze[De][0]),dt=Vt(ze[De][1]);se.push(st,dt,0),De>0&&(Be+=we?(Ie*dt-st*Me)/2:Math.sqrt(Math.pow(st-Ie,2)+Math.pow(dt-Me,2))),Ie=st,Me=dt}const qe=se.length-3;se[2]=1,Mt(se,0,qe,ie),se[qe+2]=1,se.size=Math.abs(Be),se.start=0,se.end=se.size}function _n(ze,se,ie,we){for(let Ie=0;Ie<ze.length;Ie++){const Me=[];Qe(ze[Ie],Me,ie,we),se.push(Me)}}function un(ze){return ze/360+.5}function Vt(ze){const se=Math.sin(ze*Math.PI/180),ie=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return ie<0?0:ie>1?1:ie}function Ee(ze,se,ie,we,Ie,Me,Be,qe){if(we/=se,Me>=(ie/=se)&&Be<we)return ze;if(Be<ie||Me>=we)return null;const De=[];for(const st of ze){const dt=st.geometry;let ot=st.type;const Ct=Ie===0?st.minX:st.minY,Kt=Ie===0?st.maxX:st.maxY;if(Ct>=ie&&Kt<we){De.push(st);continue}if(Kt<ie||Ct>=we)continue;let tn=[];if(ot==="Point"||ot==="MultiPoint")N(dt,tn,ie,we,Ie);else if(ot==="LineString")D(dt,tn,ie,we,Ie,!1,qe.lineMetrics);else if(ot==="MultiLineString")He(dt,tn,ie,we,Ie,!1);else if(ot==="Polygon")He(dt,tn,ie,we,Ie,!0);else if(ot==="MultiPolygon")for(const pn of dt){const En=[];He(pn,En,ie,we,Ie,!0),En.length&&tn.push(En)}if(tn.length){if(qe.lineMetrics&&ot==="LineString"){for(const pn of tn)De.push(xt(st.id,ot,pn,st.tags));continue}ot!=="LineString"&&ot!=="MultiLineString"||(tn.length===1?(ot="LineString",tn=tn[0]):ot="MultiLineString"),ot!=="Point"&&ot!=="MultiPoint"||(ot=tn.length===3?"Point":"MultiPoint"),De.push(xt(st.id,ot,tn,st.tags))}}return De.length?De:null}function N(ze,se,ie,we,Ie){for(let Me=0;Me<ze.length;Me+=3){const Be=ze[Me+Ie];Be>=ie&&Be<=we&&et(se,ze[Me],ze[Me+1],ze[Me+2])}}function D(ze,se,ie,we,Ie,Me,Be){let qe=ge(ze);const De=Ie===0?ht:ue;let st,dt,ot=ze.start;for(let En=0;En<ze.length-3;En+=3){const hn=ze[En],Un=ze[En+1],Jn=ze[En+2],nr=ze[En+3],wn=ze[En+4],Bn=Ie===0?hn:Un,Yn=Ie===0?nr:wn;let Er=!1;Be&&(st=Math.sqrt(Math.pow(hn-nr,2)+Math.pow(Un-wn,2))),Bn<ie?Yn>ie&&(dt=De(qe,hn,Un,nr,wn,ie),Be&&(qe.start=ot+st*dt)):Bn>we?Yn<we&&(dt=De(qe,hn,Un,nr,wn,we),Be&&(qe.start=ot+st*dt)):et(qe,hn,Un,Jn),Yn<ie&&Bn>=ie&&(dt=De(qe,hn,Un,nr,wn,ie),Er=!0),Yn>we&&Bn<=we&&(dt=De(qe,hn,Un,nr,wn,we),Er=!0),!Me&&Er&&(Be&&(qe.end=ot+st*dt),se.push(qe),qe=ge(ze)),Be&&(ot+=st)}let Ct=ze.length-3;const Kt=ze[Ct],tn=ze[Ct+1],pn=Ie===0?Kt:tn;pn>=ie&&pn<=we&&et(qe,Kt,tn,ze[Ct+2]),Ct=qe.length-3,Me&&Ct>=3&&(qe[Ct]!==qe[0]||qe[Ct+1]!==qe[1])&&et(qe,qe[0],qe[1],qe[2]),qe.length&&se.push(qe)}function ge(ze){const se=[];return se.size=ze.size,se.start=ze.start,se.end=ze.end,se}function He(ze,se,ie,we,Ie,Me){for(const Be of ze)D(Be,se,ie,we,Ie,Me,!1)}function et(ze,se,ie,we){ze.push(se,ie,we)}function ht(ze,se,ie,we,Ie,Me){const Be=(Me-se)/(we-se);return et(ze,Me,ie+(Ie-ie)*Be,1),Be}function ue(ze,se,ie,we,Ie,Me){const Be=(Me-ie)/(Ie-ie);return et(ze,se+(we-se)*Be,Me,1),Be}function k(ze,se){const ie=[];for(let we=0;we<ze.length;we++){const Ie=ze[we],Me=Ie.type;let Be;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Be=V(Ie.geometry,se);else if(Me==="MultiLineString"||Me==="Polygon"){Be=[];for(const qe of Ie.geometry)Be.push(V(qe,se))}else if(Me==="MultiPolygon"){Be=[];for(const qe of Ie.geometry){const De=[];for(const st of qe)De.push(V(st,se));Be.push(De)}}ie.push(xt(Ie.id,Me,Be,Ie.tags))}return ie}function V(ze,se){const ie=[];ie.size=ze.size,ze.start!==void 0&&(ie.start=ze.start,ie.end=ze.end);for(let we=0;we<ze.length;we+=3)ie.push(ze[we]+se,ze[we+1],ze[we+2]);return ie}function Te(ze,se){if(ze.transformed)return ze;const ie=1<<ze.z,we=ze.x,Ie=ze.y;for(const Me of ze.features){const Be=Me.geometry,qe=Me.type;if(Me.geometry=[],qe===1)for(let De=0;De<Be.length;De+=2)Me.geometry.push(Ve(Be[De],Be[De+1],se,ie,we,Ie));else for(let De=0;De<Be.length;De++){const st=[];for(let dt=0;dt<Be[De].length;dt+=2)st.push(Ve(Be[De][dt],Be[De][dt+1],se,ie,we,Ie));Me.geometry.push(st)}}return ze.transformed=!0,ze}function Ve(ze,se,ie,we,Ie,Me){return[Math.round(ie*(ze*we-Ie)),Math.round(ie*(se*we-Me))]}function rt(ze,se,ie,we,Ie){const Me=se===Ie.maxZoom?0:Ie.tolerance/((1<<se)*Ie.extent),Be={features:[],numPoints:0,numSimplified:0,numFeatures:ze.length,source:null,x:ie,y:we,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of ze)Ge(Be,qe,Me,Ie);return Be}function Ge(ze,se,ie,we){const Ie=se.geometry,Me=se.type,Be=[];if(ze.minX=Math.min(ze.minX,se.minX),ze.minY=Math.min(ze.minY,se.minY),ze.maxX=Math.max(ze.maxX,se.maxX),ze.maxY=Math.max(ze.maxY,se.maxY),Me==="Point"||Me==="MultiPoint")for(let qe=0;qe<Ie.length;qe+=3)Be.push(Ie[qe],Ie[qe+1]),ze.numPoints++,ze.numSimplified++;else if(Me==="LineString")Et(Be,Ie,ze,ie,!1,!1);else if(Me==="MultiLineString"||Me==="Polygon")for(let qe=0;qe<Ie.length;qe++)Et(Be,Ie[qe],ze,ie,Me==="Polygon",qe===0);else if(Me==="MultiPolygon")for(let qe=0;qe<Ie.length;qe++){const De=Ie[qe];for(let st=0;st<De.length;st++)Et(Be,De[st],ze,ie,!0,st===0)}if(Be.length){let qe=se.tags||null;if(Me==="LineString"&&we.lineMetrics){qe={};for(const st in se.tags)qe[st]=se.tags[st];qe.mapbox_clip_start=Ie.start/Ie.size,qe.mapbox_clip_end=Ie.end/Ie.size}const De={geometry:Be,type:Me==="Polygon"||Me==="MultiPolygon"?3:Me==="LineString"||Me==="MultiLineString"?2:1,tags:qe};se.id!==null&&(De.id=se.id),ze.features.push(De)}}function Et(ze,se,ie,we,Ie,Me){const Be=we*we;if(we>0&&se.size<(Ie?Be:we))return void(ie.numPoints+=se.length/3);const qe=[];for(let De=0;De<se.length;De+=3)(we===0||se[De+2]>Be)&&(ie.numSimplified++,qe.push(se[De],se[De+1])),ie.numPoints++;Ie&&function(De,st){let dt=0;for(let ot=0,Ct=De.length,Kt=Ct-2;ot<Ct;Kt=ot,ot+=2)dt+=(De[ot]-De[Kt])*(De[ot+1]+De[Kt+1]);if(dt>0===st)for(let ot=0,Ct=De.length;ot<Ct/2;ot+=2){const Kt=De[ot],tn=De[ot+1];De[ot]=De[Ct-2-ot],De[ot+1]=De[Ct-1-ot],De[Ct-2-ot]=Kt,De[Ct-1-ot]=tn}}(qe,Me),ze.push(qe)}const It={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class yn{constructor(se,ie){const we=(ie=this.options=function(Me,Be){for(const qe in Be)Me[qe]=Be[qe];return Me}(Object.create(It),ie)).debug;if(we&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ie=function(Me,Be){const qe=[];if(Me.type==="FeatureCollection")for(let De=0;De<Me.features.length;De++)Ht(qe,Me.features[De],Be,De);else Ht(qe,Me.type==="Feature"?Me:{geometry:Me},Be);return qe}(se,ie);this.tiles={},this.tileCoords=[],we&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ie=function(Me,Be){const qe=Be.buffer/Be.extent;let De=Me;const st=Ee(Me,1,-1-qe,qe,0,-1,2,Be),dt=Ee(Me,1,1-qe,2+qe,0,-1,2,Be);return(st||dt)&&(De=Ee(Me,1,-qe,1+qe,0,-1,2,Be)||[],st&&(De=k(st,1).concat(De)),dt&&(De=De.concat(k(dt,-1)))),De}(Ie,ie),Ie.length&&this.splitTile(Ie,0,0,0),we&&(Ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,ie,we,Ie,Me,Be,qe){const De=[se,ie,we,Ie],st=this.options,dt=st.debug;for(;De.length;){Ie=De.pop(),we=De.pop(),ie=De.pop(),se=De.pop();const ot=1<<ie,Ct=Sn(ie,we,Ie);let Kt=this.tiles[Ct];if(!Kt&&(dt>1&&console.time("creation"),Kt=this.tiles[Ct]=rt(se,ie,we,Ie,st),this.tileCoords.push({z:ie,x:we,y:Ie}),dt)){dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,we,Ie,Kt.numFeatures,Kt.numPoints,Kt.numSimplified),console.timeEnd("creation"));const Er=`z${ie}`;this.stats[Er]=(this.stats[Er]||0)+1,this.total++}if(Kt.source=se,Me==null){if(ie===st.indexMaxZoom||Kt.numPoints<=st.indexMaxPoints)continue}else{if(ie===st.maxZoom||ie===Me)continue;if(Me!=null){const Er=Me-ie;if(we!==Be>>Er||Ie!==qe>>Er)continue}}if(Kt.source=null,se.length===0)continue;dt>1&&console.time("clipping");const tn=.5*st.buffer/st.extent,pn=.5-tn,En=.5+tn,hn=1+tn;let Un=null,Jn=null,nr=null,wn=null,Bn=Ee(se,ot,we-tn,we+En,0,Kt.minX,Kt.maxX,st),Yn=Ee(se,ot,we+pn,we+hn,0,Kt.minX,Kt.maxX,st);se=null,Bn&&(Un=Ee(Bn,ot,Ie-tn,Ie+En,1,Kt.minY,Kt.maxY,st),Jn=Ee(Bn,ot,Ie+pn,Ie+hn,1,Kt.minY,Kt.maxY,st),Bn=null),Yn&&(nr=Ee(Yn,ot,Ie-tn,Ie+En,1,Kt.minY,Kt.maxY,st),wn=Ee(Yn,ot,Ie+pn,Ie+hn,1,Kt.minY,Kt.maxY,st),Yn=null),dt>1&&console.timeEnd("clipping"),De.push(Un||[],ie+1,2*we,2*Ie),De.push(Jn||[],ie+1,2*we,2*Ie+1),De.push(nr||[],ie+1,2*we+1,2*Ie),De.push(wn||[],ie+1,2*we+1,2*Ie+1)}}getTile(se,ie,we){se=+se,ie=+ie,we=+we;const Ie=this.options,{extent:Me,debug:Be}=Ie;if(se<0||se>24)return null;const qe=1<<se,De=Sn(se,ie=ie+qe&qe-1,we);if(this.tiles[De])return Te(this.tiles[De],Me);Be>1&&console.log("drilling down to z%d-%d-%d",se,ie,we);let st,dt=se,ot=ie,Ct=we;for(;!st&&dt>0;)dt--,ot>>=1,Ct>>=1,st=this.tiles[Sn(dt,ot,Ct)];return st&&st.source?(Be>1&&(console.log("found parent tile z%d-%d-%d",dt,ot,Ct),console.time("drilling down")),this.splitTile(st.source,dt,ot,Ct,se,ie,we),Be>1&&console.timeEnd("drilling down"),this.tiles[De]?Te(this.tiles[De],Me):null):null}}function Sn(ze,se,ie){return 32*((1<<ze)*ie+se)+ze}function zt(ze,se){return se?ze.properties[se]:ze.id}function zr(ze,se){if(ze==null)return!0;if(ze.type==="Feature")return zt(ze,se)!=null;if(ze.type==="FeatureCollection"){const ie=new Set;for(const we of ze.features){const Ie=zt(we,se);if(Ie==null||ie.has(Ie))return!1;ie.add(Ie)}return!0}return!1}function ei(ze,se){const ie=new Map;if(ze!=null)if(ze.type==="Feature")ie.set(zt(ze,se),ze);else for(const we of ze.features)ie.set(zt(we,se),we);return ie}class Ii extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(se,ie){return m._(this,void 0,void 0,function*(){const we=se.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(we.z,we.x,we.y);if(!Ie)return null;const Me=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.X,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(De){this._feature=De,this.extent=m.X,this.type=De.type,this.properties=De.tags,"id"in De&&!isNaN(De.id)&&(this.id=parseInt(De.id,10))}loadGeometry(){if(this._feature.type===1){const De=[];for(const st of this._feature.geometry)De.push([new m.P(st[0],st[1])]);return De}{const De=[];for(const st of this._feature.geometry){const dt=[];for(const ot of st)dt.push(new m.P(ot[0],ot[1]));De.push(dt)}return De}}toGeoJSON(De,st,dt){return he.call(this,De,st,dt)}}(this._features[qe])}}(Ie.features);let Be=ee(Me);return Be.byteOffset===0&&Be.byteLength===Be.buffer.byteLength||(Be=new Uint8Array(Be)),{vectorTile:Me,rawData:Be.buffer}})}loadData(se){return m._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const we=!!(se&&se.request&&se.request.collectResourceTiming)&&new m.bu(se.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(se,this._pendingRequest),this._geoJSONIndex=se.cluster?new Fe(function({superclusterOptions:Be,clusterProperties:qe}){if(!qe||!Be)return Be;const De={},st={},dt={accumulated:null,zoom:0},ot={properties:null},Ct=Object.keys(qe);for(const Kt of Ct){const[tn,pn]=qe[Kt],En=m.bB(pn),hn=m.bB(typeof tn=="string"?[tn,["accumulated"],["get",Kt]]:tn);De[Kt]=En.value,st[Kt]=hn.value}return Be.map=Kt=>{ot.properties=Kt;const tn={};for(const pn of Ct)tn[pn]=De[pn].evaluate(dt,ot);return tn},Be.reduce=(Kt,tn)=>{ot.properties=tn;for(const pn of Ct)dt.accumulated=Kt[pn],Kt[pn]=st[pn].evaluate(dt,ot)},Be}(se)).load((yield this._pendingData).features):(Ie=yield this._pendingData,new yn(Ie,se.geojsonVtOptions)),this.loaded={};const Me={};if(we){const Be=we.finish();Be&&(Me.resourceTiming={},Me.resourceTiming[se.source]=JSON.parse(JSON.stringify(Be)))}return Me}catch(Me){if(delete this._pendingRequest,m.bA(Me))return{abandoned:!0};throw Me}var Ie})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(se){const ie=this.loaded;return ie&&ie[se.uid]?super.reloadTile(se):this.loadTile(se)}loadAndProcessGeoJSON(se,ie){return m._(this,void 0,void 0,function*(){let we=yield this.loadGeoJSON(se,ie);if(delete this._pendingRequest,typeof we!="object")throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(j(we,!0),se.filter){const Ie=m.bB(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));we={type:"FeatureCollection",features:we.features.filter(Be=>Ie.value.evaluate({zoom:0},Be))}}return we})}loadGeoJSON(se,ie){return m._(this,void 0,void 0,function*(){const{promoteId:we}=se;if(se.request){const Ie=yield m.h(se.request,ie);return this._dataUpdateable=zr(Ie.data,we)?ei(Ie.data,we):void 0,Ie.data}if(typeof se.data=="string")try{const Ie=JSON.parse(se.data);return this._dataUpdateable=zr(Ie,we)?ei(Ie,we):void 0,Ie}catch{throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`)}if(!se.dataDiff)throw new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se.source}`);return function(Ie,Me,Be){var qe,De,st,dt;if(Me.removeAll&&Ie.clear(),Me.remove)for(const ot of Me.remove)Ie.delete(ot);if(Me.add)for(const ot of Me.add){const Ct=zt(ot,Be);Ct!=null&&Ie.set(Ct,ot)}if(Me.update)for(const ot of Me.update){let Ct=Ie.get(ot.id);if(Ct==null)continue;const Kt=!ot.removeAllProperties&&(((qe=ot.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((De=ot.addOrUpdateProperties)===null||De===void 0?void 0:De.length)>0);if((ot.newGeometry||ot.removeAllProperties||Kt)&&(Ct=Object.assign({},Ct),Ie.set(ot.id,Ct),Kt&&(Ct.properties=Object.assign({},Ct.properties))),ot.newGeometry&&(Ct.geometry=ot.newGeometry),ot.removeAllProperties)Ct.properties={};else if(((st=ot.removeProperties)===null||st===void 0?void 0:st.length)>0)for(const tn of ot.removeProperties)Object.prototype.hasOwnProperty.call(Ct.properties,tn)&&delete Ct.properties[tn];if(((dt=ot.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:tn,value:pn}of ot.addOrUpdateProperties)Ct.properties[tn]=pn}}(this._dataUpdateable,se.dataDiff,we),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(se){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(se){return this._geoJSONIndex.getClusterExpansionZoom(se.clusterId)}getClusterChildren(se){return this._geoJSONIndex.getChildren(se.clusterId)}getClusterLeaves(se){return this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset)}}class Ur{constructor(se){this.self=se,this.actor=new m.F(se),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,we)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=we},this.self.addProtocol=m.bh,this.self.removeProtocol=m.bi,this.self.registerRTLTextPlugin=ie=>{if(m.bC.isParsed())throw new Error("RTL text plugin already registered.");m.bC.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,we)=>this._getDEMWorkerSource(ie,we.source).loadTile(we)),this.actor.registerMessageHandler("RDT",(ie,we)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,we.source).removeTile(we)})),this.actor.registerMessageHandler("GCEZ",(ie,we)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,we.type,we.source).getClusterExpansionZoom(we)})),this.actor.registerMessageHandler("GCC",(ie,we)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,we.type,we.source).getClusterChildren(we)})),this.actor.registerMessageHandler("GCL",(ie,we)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,we.type,we.source).getClusterLeaves(we)})),this.actor.registerMessageHandler("LD",(ie,we)=>this._getWorkerSource(ie,we.type,we.source).loadData(we)),this.actor.registerMessageHandler("GD",(ie,we)=>this._getWorkerSource(ie,we.type,we.source).getData()),this.actor.registerMessageHandler("LT",(ie,we)=>this._getWorkerSource(ie,we.type,we.source).loadTile(we)),this.actor.registerMessageHandler("RT",(ie,we)=>this._getWorkerSource(ie,we.type,we.source).reloadTile(we)),this.actor.registerMessageHandler("AT",(ie,we)=>this._getWorkerSource(ie,we.type,we.source).abortTile(we)),this.actor.registerMessageHandler("RMT",(ie,we)=>this._getWorkerSource(ie,we.type,we.source).removeTile(we)),this.actor.registerMessageHandler("RS",(ie,we)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][we.type]||!this.workerSources[ie][we.type][we.source])return;const Ie=this.workerSources[ie][we.type][we.source];delete this.workerSources[ie][we.type][we.source],Ie.removeSource!==void 0&&Ie.removeSource(we)})),this.actor.registerMessageHandler("RM",ie=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,we)=>m._(this,void 0,void 0,function*(){this.referrer=we})),this.actor.registerMessageHandler("SRPS",(ie,we)=>this._syncRTLPluginState(ie,we)),this.actor.registerMessageHandler("IS",(ie,we)=>m._(this,void 0,void 0,function*(){this.self.importScripts(we)})),this.actor.registerMessageHandler("SI",(ie,we)=>this._setImages(ie,we)),this.actor.registerMessageHandler("UL",(ie,we)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(we.layers,we.removedIds)})),this.actor.registerMessageHandler("SL",(ie,we)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(we)}))}_setImages(se,ie){return m._(this,void 0,void 0,function*(){this.availableImages[se]=ie;for(const we in this.workerSources[se]){const Ie=this.workerSources[se][we];for(const Me in Ie)Ie[Me].availableImages=ie}})}_syncRTLPluginState(se,ie){return m._(this,void 0,void 0,function*(){if(m.bC.isParsed())return m.bC.getState();if(ie.pluginStatus!=="loading")return m.bC.setState(ie),ie;const we=ie.pluginURL;if(this.self.importScripts(we),m.bC.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:we};return m.bC.setState(Ie),Ie}throw m.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${we}`)})}_getAvailableImages(se){let ie=this.availableImages[se];return ie||(ie=[]),ie}_getLayerIndex(se){let ie=this.layerIndexes[se];return ie||(ie=this.layerIndexes[se]=new u),ie}_getWorkerSource(se,ie,we){if(this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][ie]||(this.workerSources[se][ie]={}),!this.workerSources[se][ie][we]){const Ie={sendAsync:(Me,Be)=>(Me.targetMapId=se,this.actor.sendAsync(Me,Be))};switch(ie){case"vector":this.workerSources[se][ie][we]=new b(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;case"geojson":this.workerSources[se][ie][we]=new Ii(Ie,this._getLayerIndex(se),this._getAvailableImages(se));break;default:this.workerSources[se][ie][we]=new this.externalWorkerSourceTypes[ie](Ie,this._getLayerIndex(se),this._getAvailableImages(se))}}return this.workerSources[se][ie][we]}_getDEMWorkerSource(se,ie){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][ie]||(this.demWorkerSources[se][ie]=new C),this.demWorkerSources[se][ie]}}return m.i(self)&&(self.worker=new Ur(self)),Ur}),c("index",["exports","./shared"],function(m,u){var S="4.5.2";let P,M;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,l)=>{const d=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(u.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,l.drawImage(v,0,0,v.width,v.height),l},resolveURL:v=>(P||(P=document.createElement("a")),P.href=v,P.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class C{static testProp(r){if(!C.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in C.docStyle)return r[l];return r[0]}static create(r,l,d){const f=window.document.createElement(r);return l!==void 0&&(f.className=l),d&&d.appendChild(f),f}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(r,l){r.style[C.transformProp]=l}static addEventListener(r,l,d,f={}){r.addEventListener(l,d,"passive"in f?f:f.capture)}static removeEventListener(r,l,d,f={}){r.removeEventListener(l,d,"passive"in f?f:f.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){const f=l.boundingClientRect;return new u.P((d.clientX-f.left)/l.x-r.clientLeft,(d.clientY-f.top)/l.y-r.clientTop)}static mousePos(r,l){const d=C.getScale(r);return C.getPoint(r,d,l)}static touchPos(r,l){const d=[],f=C.getScale(r);for(let y=0;y<l.length;y++)d.push(C.getPoint(r,f,l[y]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}C.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);const O={supported:!1,testSupport:function(v){!he&&j&&(q?X(v):$=v)}};let $,j,he=!1,q=!1;function X(v){const r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,j),v.isContextLost())return;O.supported=!0}catch{}v.deleteTexture(r),he=!0}var G;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{$&&X($),$=null,q=!0},j.onerror=()=>{he=!0,$=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,l,d,f;v.resetRequestQueue=()=>{r=[],l=0,d=0,f={}},v.addThrottleControl=F=>{const R=d++;return f[R]=F,R},v.removeThrottleControl=F=>{delete f[F],E()},v.getImage=(F,R,Y=!0)=>new Promise((Q,de)=>{O.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*"),u.e(F,{type:"image"}),r.push({abortController:R,requestParameters:F,supportImageRefresh:Y,state:"queued",onError:xe=>{de(xe)},onSuccess:xe=>{Q(xe)}}),E()});const y=F=>u._(this,void 0,void 0,function*(){F.state="running";const{requestParameters:R,supportImageRefresh:Y,onError:Q,onSuccess:de,abortController:xe}=F,Pe=Y===!1&&!u.i(self)&&!u.g(R.url)&&(!R.headers||Object.keys(R.headers).reduce((Le,Xe)=>Le&&Xe==="accept",!0));l++;const Oe=Pe?A(R,xe):u.m(R,xe);try{const Le=yield Oe;delete F.abortController,F.state="completed",Le.data instanceof HTMLImageElement||u.b(Le.data)?de(Le):Le.data&&de({data:yield(je=Le.data,typeof createImageBitmap=="function"?u.d(je):u.f(je)),cacheControl:Le.cacheControl,expires:Le.expires})}catch(Le){delete F.abortController,Q(Le)}finally{l--,E()}var je}),E=()=>{const F=(()=>{for(const R of Object.keys(f))if(f[R]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=l;R<F&&r.length>0;R++){const Y=r.shift();Y.abortController.signal.aborted?R--:y(Y)}},A=(F,R)=>new Promise((Y,Q)=>{const de=new Image,xe=F.url,Pe=F.credentials;Pe&&Pe==="include"?de.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!u.s(xe))&&(de.crossOrigin="anonymous"),R.signal.addEventListener("abort",()=>{de.src="",Q(u.c())}),de.fetchPriority="high",de.onload=()=>{de.onerror=de.onload=null,Y({data:de})},de.onerror=()=>{de.onerror=de.onload=null,R.signal.aborted||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},de.src=xe})}(G||(G={})),G.resetRequestQueue();class ae{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function K(v){var r=new u.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var Z,T=function(v,r,l){return v[0]=r[0]-l[0],v[1]=r[1]-l[1],v[2]=r[2]-l[2],v};Z=new u.A(3),u.A!=Float32Array&&(Z[0]=0,Z[1]=0,Z[2]=0);var L=function(v){var r=v[0],l=v[1];return r*r+l*l};function B(v){const r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){const l=[];for(const{id:d,url:f}of v){const y=`${d}${f}`;l.indexOf(y)===-1&&(l.push(y),r.push({id:d,url:f}))}}return r}function te(v,r,l){const d=v.split("?");return d[0]+=`${r}${l}`,d.join("?")}(function(){var v=new u.A(2);u.A!=Float32Array&&(v[0]=0,v[1]=0)})();class H{constructor(r,l,d,f){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,f)}update(r,l,d){const{width:f,height:y}=r,E=!(this.size&&this.size[0]===f&&this.size[1]===y||d),{context:A}=this,{gl:F}=A;if(this.useMipmap=!!(l&&l.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!l||l.premultiply!==!1)),E)this.size=[f,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,r):F.texImage2D(F.TEXTURE_2D,0,this.format,f,y,0,this.format,F.UNSIGNED_BYTE,r.data);else{const{x:R,y:Y}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?F.texSubImage2D(F.TEXTURE_2D,0,R,Y,F.RGBA,F.UNSIGNED_BYTE,r):F.texSubImage2D(F.TEXTURE_2D,0,R,Y,f,y,F.RGBA,F.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D)}bind(r,l,d){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),d!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;const f=l.data||l.spriteData;return this._validateStretch(l.stretchX,f&&f.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,f&&f.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const f of r){if(f[0]<d||f[1]<f[0]||l<f[1])return!1;d=f[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const d=l.spriteData,f=d&&d.width||l.data.width,y=d&&d.height||l.data.height;return!(r[0]<0||f<r[0]||r[1]<0||y<r[1]||r[2]<0||f<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){const f=this.getImage(r);if(d&&(f.data.width!==l.data.width||f.data.height!==l.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=f.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let f=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(f=!1);this.isLoaded()||f?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const d of r){let f=this.getImage(d);f||(this.fire(new u.k("styleimagemissing",{id:d})),f=this.getImage(d)),f?l[d]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const f={w:d.data.width+2,h:d.data.height+2,x:0,y:0},y=new u.I(f,d);this.patterns[r]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:l,h:d}=u.p(r),f=this.atlasImage;f.resize({width:l||1,height:d||1});for(const y in this.patterns){const{bin:E}=this.patterns[y],A=E.x+1,F=E.y+1,R=this.getImage(y).data,Y=R.width,Q=R.height;u.R.copy(R,f,{x:0,y:0},{x:A,y:F},{width:Y,height:Q}),u.R.copy(R,f,{x:0,y:Q-1},{x:A,y:F-1},{width:Y,height:1}),u.R.copy(R,f,{x:0,y:0},{x:A,y:F+Q},{width:Y,height:1}),u.R.copy(R,f,{x:Y-1,y:0},{x:A-1,y:F},{width:1,height:Q}),u.R.copy(R,f,{x:0,y:0},{x:A+Y,y:F},{width:1,height:Q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||u.w(`Image with ID: "${l}" was not found`),ve(d)&&this.updateImage(l,d)}}}const pe=1e20;function oe(v,r,l,d,f,y,E,A,F){for(let R=r;R<r+d;R++)ce(v,l*y+R,y,f,E,A,F);for(let R=l;R<l+f;R++)ce(v,R*y+r,1,d,E,A,F)}function ce(v,r,l,d,f,y,E){y[0]=0,E[0]=-pe,E[1]=pe,f[0]=v[r];for(let A=1,F=0,R=0;A<d;A++){f[A]=v[r+A*l];const Y=A*A;do{const Q=y[F];R=(f[A]-f[Q]+Y-Q*Q)/(A-Q)/2}while(R<=E[F]&&--F>-1);F++,y[F]=A,E[F]=R,E[F+1]=pe}for(let A=0,F=0;A<d;A++){for(;E[F+1]<A;)F++;const R=y[F],Y=A-R;v[r+A*l]=f[R]+Y*Y}}class ee{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const y in r)for(const E of r[y])l.push(this._getAndCacheGlyphsPromise(y,E));const d=yield Promise.all(l),f={};for(const{stack:y,id:E,glyph:A}of d)f[y]||(f[y]={}),f[y][E]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return f})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let f=d.glyphs[l];if(f!==void 0)return{stack:r,id:l,glyph:f};if(f=this._tinySDF(d,r,l),f)return d.glyphs[l]=f,{stack:r,id:l,glyph:f};const y=Math.floor(l/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[y])return{stack:r,id:l,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[y]){const A=ee.loadGlyphRange(r,y,this.url,this.requestManager);d.requests[y]=A}const E=yield d.requests[y];for(const A in E)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=E[+A]);return d.ranges[y]=!0,{stack:r,id:l,glyph:E[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,d){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let y=r.tinySDF;if(!y){let A="400";/bold/i.test(l)?A="900":/medium/i.test(l)?A="500":/light/i.test(l)&&(A="200"),y=r.tinySDF=new ee.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:A})}const E=y.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}ee.loadGlyphRange=function(v,r,l,d){return u._(this,void 0,void 0,function*(){const f=256*r,y=f+255,E=d.transformRequest(l.replace("{fontstack}",v).replace("{range}",`${f}-${y}`),"Glyphs"),A=yield u.l(E,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${r}, ${f}-${y}`);const F={};for(const R of u.n(A.data))F[R.id]=R;return F})},ee.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:E="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const A=this.size=v+4*r,F=this._createCanvas(A),R=this.ctx=F.getContext("2d",{willReadFrequently:!0});R.font=`${E} ${y} ${v}px ${f}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(v){const r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(v),E=Math.ceil(l),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),F=Math.min(this.size-this.buffer,E+Math.ceil(d)),R=A+2*this.buffer,Y=F+2*this.buffer,Q=Math.max(R*Y,0),de=new Uint8ClampedArray(Q),xe={data:de,width:R,height:Y,glyphWidth:A,glyphHeight:F,glyphTop:E,glyphLeft:0,glyphAdvance:r};if(A===0||F===0)return xe;const{ctx:Pe,buffer:Oe,gridInner:je,gridOuter:Le}=this;Pe.clearRect(Oe,Oe,A,F),Pe.fillText(v,Oe,Oe+E);const Xe=Pe.getImageData(Oe,Oe,A,F);Le.fill(pe,0,Q),je.fill(0,0,Q);for(let ke=0;ke<F;ke++)for(let Je=0;Je<A;Je++){const tt=Xe.data[4*(ke*A+Je)+3]/255;if(tt===0)continue;const at=(ke+Oe)*R+Je+Oe;if(tt===1)Le[at]=0,je[at]=pe;else{const yt=.5-tt;Le[at]=yt>0?yt*yt:0,je[at]=yt<0?yt*yt:0}}oe(Le,0,0,R,Y,R,this.f,this.v,this.z),oe(je,Oe,Oe,A,F,R,this.f,this.v,this.z);for(let ke=0;ke<Q;ke++){const Je=Math.sqrt(Le[ke])-Math.sqrt(je[ke]);de[ke]=Math.round(255-255*(Je/this.radius+this.cutoff))}return xe}};class re{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,d){return{x:u.z.number(r.x,l.x,d),y:u.z.number(r.y,l.y,d),z:u.z.number(r.z,l.z,d)}}}let fe;class Se extends u.E{constructor(r){super(),fe=fe||new u.q({anchor:new u.D(u.v.light.anchor),position:new re,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(fe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const d in r){const f=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ce=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Ue extends u.E{constructor(r){super(),this._transitionable=new u.T(Ce),this.setSky(r),this._transitioning=this._transitionable.untransitioned()}setSky(r,l={}){if(!this._validate(u.B,r,l))for(const d in r){const f=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),f):this._transitionable.setValue(d,f)}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d={}){return(d==null?void 0:d.validate)!==!1&&u.t(this,r.call(u.x,u.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Ae{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const f=[];let y=r.length%2==1?-r[r.length-1]*d:0,E=r[0]*d,A=!0;f.push({left:y,right:E,isDash:A,zeroLength:r[0]===0});let F=r[0];for(let R=1;R<r.length;R++){A=!A;const Y=r[R];y=F*d,F+=Y,E=F*d,f.push({left:y,right:E,isDash:A,zeroLength:Y===0})}return f}addRoundDash(r,l,d){const f=l/2;for(let y=-d;y<=d;y++){const E=this.width*(this.nextRow+d+y);let A=0,F=r[A];for(let R=0;R<this.width;R++){R/F.right>1&&(F=r[++A]);const Y=Math.abs(R-F.left),Q=Math.abs(R-F.right),de=Math.min(Y,Q);let xe;const Pe=y/d*(f+1);if(F.isDash){const Oe=f-Math.abs(Pe);xe=Math.sqrt(de*de+Oe*Oe)}else xe=f-Math.sqrt(de*de+Pe*Pe);this.data[E+R]=Math.max(0,Math.min(255,xe+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){const F=r[A],R=r[A+1];F.zeroLength?r.splice(A,1):R&&R.isDash===F.isDash&&(R.left=F.left,r.splice(A,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const f=this.width*this.nextRow;let y=0,E=r[y];for(let A=0;A<this.width;A++){A/E.right>1&&(E=r[++y]);const F=Math.abs(A-E.left),R=Math.abs(A-E.right),Y=Math.min(F,R);this.data[f+A]=Math.max(0,Math.min(255,(E.isDash?Y:-Y)+128))}}addDash(r,l){const d=l?7:0,f=2*d+1;if(this.nextRow+f>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let A=0;A<r.length;A++)y+=r[A];if(y!==0){const A=this.width/y,F=this.getDashRanges(r,this.width,A);l?this.addRoundDash(F,A,d):this.addRegularDash(F)}const E={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:y};return this.nextRow+=f,this.dirty=!0,E}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Fe="maplibre_preloaded_worker_pool";class Ze{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ze.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fe]}numActive(){return Object.keys(this.active).length}}const We=Math.floor(b.hardwareConcurrency/2);let it,ct;function vt(){return it||(it=new Ze),it}Ze.workerCount=u.C(globalThis)?Math.max(Math.min(We,3),1):1;class Mt{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let f=0;f<d.length;f++){const y=new u.F(d[f],l);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const d=[];for(const f of this.actors)d.push(f.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const d of this.actors)d.registerMessageHandler(r,l)}}function pt(){return ct||(ct=new Mt(vt(),u.G),ct.registerMessageHandler("GR",(v,r,l)=>u.m(r,l))),ct}function xt(v,r){const l=u.H();return u.J(l,l,[1,1,0]),u.K(l,l,[.5*v.width,.5*v.height,1]),u.L(l,l,v.calculatePosMatrix(r.toUnwrapped()))}function Wt(v,r,l,d,f,y){const E=function(Q,de,xe){if(Q)for(const Pe of Q){const Oe=de[Pe];if(Oe&&Oe.source===xe&&Oe.type==="fill-extrusion")return!0}else for(const Pe in de){const Oe=de[Pe];if(Oe.source===xe&&Oe.type==="fill-extrusion")return!0}return!1}(f&&f.layers,r,v.id),A=y.maxPitchScaleFactor(),F=v.tilesIn(d,A,E);F.sort(Ht);const R=[];for(const Q of F)R.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(r,l,v._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,f,y,A,xt(v.transform,Q.tileID))});const Y=function(Q){const de={},xe={};for(const Pe of Q){const Oe=Pe.queryResults,je=Pe.wrappedTileID,Le=xe[je]=xe[je]||{};for(const Xe in Oe){const ke=Oe[Xe],Je=Le[Xe]=Le[Xe]||{},tt=de[Xe]=de[Xe]||[];for(const at of ke)Je[at.featureIndex]||(Je[at.featureIndex]=!0,tt.push(at))}}return de}(R);for(const Q in Y)Y[Q].forEach(de=>{const xe=de.feature,Pe=v.getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=Pe});return Y}function Ht(v,r){const l=v.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function ln(v,r,l){return u._(this,void 0,void 0,function*(){let d=v;if(v.url?d=(yield u.h(r.transformRequest(v.url,"Source"),l)).data:yield b.frameAsync(l),!d)return null;const f=u.M(u.e(d,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(f.vectorLayerIds=d.vector_layers.map(y=>y.id)),f})}class Qe{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const l=this._sw,d=this._ne;let f,y;if(r instanceof u.N)f=r,y=r;else{if(!(r instanceof Qe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Qe.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(f=r._sw,y=r._ne,!f||!y)return this}return l||d?(l.lng=Math.min(f.lng,l.lng),l.lat=Math.min(f.lat,l.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new u.N(f.lng,f.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=u.N.convert(r);let f=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(r){return r instanceof Qe?r:r&&new Qe(r)}static fromLngLat(r,l=0){const d=360*l/40075017,f=d/Math.cos(Math.PI/180*r.lat);return new Qe(new u.N(r.lng-f,r.lat-d),new u.N(r.lng+f,r.lat+d))}}class _n{constructor(r,l,d){this.bounds=Qe.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(u.O(this.bounds.getWest())*l),f=Math.floor(u.Q(this.bounds.getNorth())*l),y=Math.ceil(u.O(this.bounds.getEast())*l),E=Math.ceil(u.Q(this.bounds.getSouth())*l);return r.x>=d&&r.x<y&&r.y>=f&&r.y<E}}class un extends u.E{constructor(r,l,d,f){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new _n(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,E)=>{r.reloadPromise={resolve:y,reject:E}})}else r.actor=this.dispatcher.getActor(),f="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:f,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends u.E{constructor(r,l,d,f){super(),this.id=r,this.dispatcher=d,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.M(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield ln(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new _n(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield G.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const f=this.map.painter.context,y=f.gl,E=d.data;r.texture=this.map.painter.getTileTexture(E.width),r.texture?r.texture.update(E,{useMipmap:!0}):(r.texture=new H(f,E,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Ee extends Vt{constructor(r,l,d,f){super(r,l,d,f),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const f=yield G.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){const y=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const E=u.b(y)&&u.U()?y:yield this.readImageNow(y),A={type:this.type,uid:r.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const F=yield r.actor.sendAsync({type:"LDT",data:A});r.dem=F,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const l=r.width+2,d=r.height+2;try{return new u.R({width:l,height:d},yield u.W(r,-1,-1,l,d))}catch{}}return b.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),f=(l.x-1+d)%d,y=l.x===0?r.wrap-1:r.wrap,E=(l.x+1+d)%d,A=l.x+1===d?r.wrap+1:r.wrap,F={};return F[new u.S(r.overscaledZ,y,l.z,f,l.y).key]={backfilled:!1},F[new u.S(r.overscaledZ,A,l.z,E,l.y).key]={backfilled:!1},l.y>0&&(F[new u.S(r.overscaledZ,y,l.z,f,l.y-1).key]={backfilled:!1},F[new u.S(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},F[new u.S(r.overscaledZ,A,l.z,E,l.y-1).key]={backfilled:!1}),l.y+1<d&&(F[new u.S(r.overscaledZ,y,l.z,f,l.y+1).key]={backfilled:!1},F[new u.S(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},F[new u.S(r.overscaledZ,A,l.z,E,l.y+1).key]={backfilled:!1}),F}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class N extends u.E{constructor(r,l,d,f){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(f),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const y=u.X/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*y,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.X,radius:(l.clusterRadius||50)*y,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let f=null;d.resourceTiming&&d.resourceTiming[this.id]&&(f=d.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&u.e(y,{resourceTiming:f}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const f=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(f,this.map.painter,l==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var D=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ge extends u.E{constructor(r,l,d,f){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield G.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Z.fromLngLat);this.tileID=function(f){let y=1/0,E=1/0,A=-1/0,F=-1/0;for(const de of f)y=Math.min(y,de.x),E=Math.min(E,de.y),A=Math.max(A,de.x),F=Math.max(F,de.y);const R=Math.max(A-y,F-E),Y=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),Q=Math.pow(2,Y);return new u.a1(Y,Math.floor((y+A)/2*Q),Math.floor((E+F)/2*Q))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.X,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.X),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new H(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class He extends ge{constructor(r,l,d,f){super(r,l,d,f),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield u.a3(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new H(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class et extends ge{constructor(r,l,d,f){super(r,l,d,f),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(E=>typeof E!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,D.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(l,this.canvas,d.RGBA,{premultiply:!0});let f=!1;for(const y in this.tiles){const E=this.tiles[y];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const ht={},ue=v=>{switch(v){case"geojson":return N;case"image":return ge;case"raster":return Vt;case"raster-dem":return Ee;case"vector":return un;case"video":return He;case"canvas":return et}return ht[v]},k="RTLPluginLoaded";class V extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=pt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(k))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Te=null;function Ve(){return Te||(Te=new V),Te}class rt{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(f,y){const E={};if(!y)return E;for(const A of f){const F=A.layerIds.map(R=>y.getLayer(R)).filter(Boolean);if(F.length!==0){A.layers=F,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(R=>F.filter(Y=>Y.id===R)[0]));for(const R of F)E[R.id]=A}}return E}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,Ve().lazyLoad();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(f).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,f,y,E,A,F,R,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:E,tileSize:this.tileSize,pixelPosMatrix:Y,transform:F,params:A,queryPadding:this.queryPadding*R},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),y=l&&l.sourceLayer?l.sourceLayer:"",E=f._geojsonTileLayer||f[y];if(!E)return;const A=u.a7(l&&l.filter),{z:F,x:R,y:Y}=this.tileID.canonical,Q={z:F,x:R,y:Y};for(let de=0;de<E.length;de++){const xe=E.feature(de);if(A.needGeometry){const je=u.a8(xe,!0);if(!A.filter(new u.a9(this.tileID.overscaledZ),je,this.tileID.canonical))continue}else if(!A.filter(new u.a9(this.tileID.overscaledZ),xe))continue;const Pe=d.getId(xe,y),Oe=new u.aa(xe,F,R,Y,Pe);Oe.tile=Q,r.push(Oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=u.ab(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(l)if(this.expirationTime<l)f=!0;else{const y=this.expirationTime-l;y?this.expirationTime=d+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!l.style.hasLayer(f))continue;const y=this.buckets[f],E=y.layers[0].sourceLayer||"_geojsonTileLayer",A=d[E],F=r[E];if(!A||!F||Object.keys(F).length===0)continue;y.update(F,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=l&&l.style&&l.style.getLayer(f);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=b.now()+r}setDependencies(r,l){const d={};for(const f of l)d[f]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const f=this.dependencies[d];if(f){for(const y of l)if(f[y])return!0}}return!1}}class Ge{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const f=r.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:l,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},d)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,f=l===void 0?0:this.data[d].indexOf(l),y=this.data[d][f];return this.data[d].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const f of this.data[d])r(f.value)||l.push(f);for(const d of l)this.remove(d.value.tileID,d)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const f=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},u.e(this.stateChanges[r][f],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==f&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][f]===null){this.deletedStates[r][f]={};for(const y in this.state[r][f])d[y]||(this.deletedStates[r][f][y]=null)}else for(const y in d)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][y]===null&&delete this.deletedStates[r][f][y]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const f=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][f])for(d in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][d]=null;else this.deletedStates[r][f]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),f=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][l];if(y===null)return{};for(const E in y)delete f[E]}return f}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const E in this.stateChanges[f])this.state[f][E]||(this.state[f][E]={}),u.e(this.state[f][E],this.stateChanges[f][E]),y[E]=this.state[f][E];d[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const E in this.state[f])y[E]={},this.state[f][E]={};else for(const E in this.deletedStates[f]){if(this.deletedStates[f][E]===null)this.state[f][E]={};else for(const A of Object.keys(this.deletedStates[f][E]))delete this.state[f][E][A];y[E]=this.state[f][E]}d[f]=d[f]||{},u.e(d[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in r)r[f].setFeatureState(d,l)}}class It extends u.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,y,E,A)=>{const F=new(ue(y.type))(f,y,E,A);if(F.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${F.id}`);return F})(r,l,d,this),this._tiles={},this._cache=new Ge(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(f){r.state="errored",f.status!==404?this._source.fire(new u.j(f,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(yn).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,f)=>{const y=d.tileID,E=f.tileID,A=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),F=new u.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-E.overscaledZ||F.y-A.y||F.x-A.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(yn).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=b.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let f=0;f<l.length;f++){const y=l[f];if(r.neighboringTiles&&r.neighboringTiles[y]){const E=this.getTileByID(y);d(r,E),d(E,r)}}function d(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let E=y.tileID.canonical.x-f.tileID.canonical.x;const A=y.tileID.canonical.y-f.tileID.canonical.y,F=Math.pow(2,f.tileID.canonical.z),R=y.tileID.key;E===0&&A===0||Math.abs(A)>1||(Math.abs(E)>1&&(Math.abs(E+F)===1?E+=F:Math.abs(E-F)===1&&(E-=F)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,E,A),f.neighboringTiles&&f.neighboringTiles[R]&&(f.neighboringTiles[R].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,f){for(const y in this._tiles){let E=this._tiles[y];if(f[y]||!E.hasData()||E.tileID.overscaledZ<=l||E.tileID.overscaledZ>d)continue;let A=E.tileID;for(;E&&E.tileID.overscaledZ>l+1;){const R=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[R.key],E&&E.hasData()&&(A=R)}let F=A;for(;F.overscaledZ>l;)if(F=F.scaledTo(F.overscaledZ-1),r[F.key]){f[A.key]=A;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const f=r.scaledTo(d),y=this._getLoadedTile(f);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,f=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),d[y.tileID.key]=y}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(r,l,d,f,y,E){const A={},F={},R=Object.keys(r),Y=b.now();for(const Q of R){const de=r[Q],xe=this._tiles[Q];if(!xe||xe.fadeEndTime!==0&&xe.fadeEndTime<=Y)continue;const Pe=this.findLoadedParent(de,l),Oe=this.findLoadedSibling(de),je=Pe||Oe||null;je&&(this._addTile(je.tileID),A[je.tileID.key]=je.tileID),F[Q]=de}this._retainLoadedChildren(F,f,d,r);for(const Q in A)r[Q]||(this._coveredTiles[Q]=!0,r[Q]=A[Q]);if(E){const Q={},de={};for(const xe of y)this._tiles[xe.key].hasData()?Q[xe.key]=xe:de[xe.key]=xe;for(const xe in de){const Pe=de[xe].children(this._source.maxzoom);this._tiles[Pe[0].key]&&this._tiles[Pe[1].key]&&this._tiles[Pe[2].key]&&this._tiles[Pe[3].key]&&(Q[Pe[0].key]=r[Pe[0].key]=Pe[0],Q[Pe[1].key]=r[Pe[1].key]=Pe[1],Q[Pe[2].key]=r[Pe[2].key]=Pe[2],Q[Pe[3].key]=r[Pe[3].key]=Pe[3],delete de[xe])}for(const xe in de){const Pe=de[xe],Oe=this.findLoadedParent(Pe,this._source.minzoom),je=this.findLoadedSibling(Pe),Le=Oe||je||null;if(Le){Q[Le.tileID.key]=r[Le.tileID.key]=Le.tileID;for(const Xe in Q)Q[Xe].isChildOf(Le.tileID)&&delete Q[Xe]}}for(const xe in this._tiles)Q[xe]||(this._coveredTiles[xe]=!0)}}update(r,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new u.S(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(Y=>this._source.hasTile(Y)))):d=[];const f=r.coveringZoomLevel(this._source),y=Math.max(f-It.maxOverzooming,this._source.minzoom),E=Math.max(f+It.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Y={};for(const Q of d)if(Q.canonical.z>this._source.minzoom){const de=Q.scaledTo(Q.canonical.z-1);Y[de.key]=de;const xe=Q.scaledTo(Math.max(this._source.minzoom,Math.min(Q.canonical.z,5)));Y[xe.key]=xe}d=d.concat(Object.values(Y))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const F=this._updateRetainedTiles(d,f);Sn(this._source.type)&&this._updateCoveredAndRetainedTiles(F,y,E,f,d,l);for(const Y in F)this._tiles[Y].clearFadeHold();const R=u.ac(this._tiles,F);for(const Y of R){const Q=this._tiles[Y];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var d;const f={},y={},E=Math.max(l-It.maxOverzooming,this._source.minzoom),A=Math.max(l+It.maxUnderzooming,this._source.minzoom),F={};for(const R of r){const Y=this._addTile(R);f[R.key]=R,Y.hasData()||l<this._source.maxzoom&&(F[R.key]=R)}this._retainLoadedChildren(F,l,A,f);for(const R of r){let Y=this._tiles[R.key];if(Y.hasData())continue;if(l+1>this._source.maxzoom){const de=R.children(this._source.maxzoom)[0],xe=this.getTile(de);if(xe&&xe.hasData()){f[de.key]=de;continue}}else{const de=R.children(this._source.maxzoom);if(f[de[0].key]&&f[de[1].key]&&f[de[2].key]&&f[de[3].key])continue}let Q=Y.wasRequested();for(let de=R.overscaledZ-1;de>=E;--de){const xe=R.scaledTo(de);if(y[xe.key])break;if(y[xe.key]=!0,Y=this.getTile(xe),!Y&&Q&&(Y=this._addTile(xe)),Y){const Pe=Y.hasData();if((Pe||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||Q)&&(f[xe.key]=xe),Q=Y.wasRequested(),Pe)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,f=this._tiles[r].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}l.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;f=y}for(const y of l)this._loadedParentTiles[y]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const l=this._tiles[r].tileID,d=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new rt(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){const l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const f=[],y=this.transform;if(!y)return f;const E=d?y.getCameraQueryGeometry(r):r,A=r.map(Pe=>y.pointCoordinate(Pe,this.terrain)),F=E.map(Pe=>y.pointCoordinate(Pe,this.terrain)),R=this.getIds();let Y=1/0,Q=1/0,de=-1/0,xe=-1/0;for(const Pe of F)Y=Math.min(Y,Pe.x),Q=Math.min(Q,Pe.y),de=Math.max(de,Pe.x),xe=Math.max(xe,Pe.y);for(let Pe=0;Pe<R.length;Pe++){const Oe=this._tiles[R[Pe]];if(Oe.holdingForFade())continue;const je=Oe.tileID,Le=Math.pow(2,y.zoom-Oe.tileID.overscaledZ),Xe=l*Oe.queryPadding*u.X/Oe.tileSize/Le,ke=[je.getTilePoint(new u.Z(Y,Q)),je.getTilePoint(new u.Z(de,xe))];if(ke[0].x-Xe<u.X&&ke[0].y-Xe<u.X&&ke[1].x+Xe>=0&&ke[1].y+Xe>=0){const Je=A.map(at=>je.getTilePoint(at)),tt=F.map(at=>je.getTilePoint(at));f.push({tile:Oe,tileID:je,queryGeometry:Je,cameraQueryGeometry:tt,scale:Le})}}return f}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Sn(this._source.type)){const r=b.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const f=this._tiles[r];f&&f.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function yn(v,r){const l=Math.abs(2*v.wrap)-+(v.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||d-l||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function Sn(v){return v==="raster"||v==="image"||v==="video"}It.maxOverzooming=10,It.maxUnderzooming=3;class zt{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ad(r,0,1);let l=1,d=this._distances[l];const f=r*this.paddedLength+this.padding;for(;d<f&&l<this._distances.length;)d=this._distances[++l];const y=l-1,E=this._distances[y],A=d-E,F=A>0?(f-E)/A:0;return this.points[y].mult(1-F).add(this.points[l].mult(F))}}function zr(v,r){let l=!0;return v==="always"||v!=="never"&&r!=="never"||(l=!1),l}class ei{constructor(r,l,d){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let E=0;E<this.xCellCount*this.yCellCount;E++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,f,y){this._forEachCell(l,d,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(r,l,d,f){this._forEachCell(l-f,d-f,l+f,d+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(f)}_insertBoxCell(r,l,d,f,y,E){this.boxCells[y].push(E)}_insertCircleCell(r,l,d,f,y,E){this.circleCells[y].push(E)}_query(r,l,d,f,y,E,A){if(d<0||r>this.width||f<0||l>this.height)return[];const F=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=f){if(y)return[{key:null,x1:r,y1:l,x2:d,y2:f}];for(let R=0;R<this.boxKeys.length;R++)F.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const Y=this.circles[3*R],Q=this.circles[3*R+1],de=this.circles[3*R+2];F.push({key:this.circleKeys[R],x1:Y-de,y1:Q-de,x2:Y+de,y2:Q+de})}}else this._forEachCell(r,l,d,f,this._queryCell,F,{hitTest:y,overlapMode:E,seenUids:{box:{},circle:{}}},A);return F}query(r,l,d,f){return this._query(r,l,d,f,!1,null)}hitTest(r,l,d,f,y,E){return this._query(r,l,d,f,!0,y,E).length>0}hitTestCircle(r,l,d,f,y){const E=r-d,A=r+d,F=l-d,R=l+d;if(A<0||E>this.width||R<0||F>this.height)return!1;const Y=[];return this._forEachCell(E,F,A,R,this._queryCellCircle,Y,{hitTest:!0,overlapMode:f,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},y),Y.length>0}_queryCell(r,l,d,f,y,E,A,F){const{seenUids:R,hitTest:Y,overlapMode:Q}=A,de=this.boxCells[y];if(de!==null){const Pe=this.bboxes;for(const Oe of de)if(!R.box[Oe]){R.box[Oe]=!0;const je=4*Oe,Le=this.boxKeys[Oe];if(r<=Pe[je+2]&&l<=Pe[je+3]&&d>=Pe[je+0]&&f>=Pe[je+1]&&(!F||F(Le))&&(!Y||!zr(Q,Le.overlapMode))&&(E.push({key:Le,x1:Pe[je],y1:Pe[je+1],x2:Pe[je+2],y2:Pe[je+3]}),Y))return!0}}const xe=this.circleCells[y];if(xe!==null){const Pe=this.circles;for(const Oe of xe)if(!R.circle[Oe]){R.circle[Oe]=!0;const je=3*Oe,Le=this.circleKeys[Oe];if(this._circleAndRectCollide(Pe[je],Pe[je+1],Pe[je+2],r,l,d,f)&&(!F||F(Le))&&(!Y||!zr(Q,Le.overlapMode))){const Xe=Pe[je],ke=Pe[je+1],Je=Pe[je+2];if(E.push({key:Le,x1:Xe-Je,y1:ke-Je,x2:Xe+Je,y2:ke+Je}),Y)return!0}}}return!1}_queryCellCircle(r,l,d,f,y,E,A,F){const{circle:R,seenUids:Y,overlapMode:Q}=A,de=this.boxCells[y];if(de!==null){const Pe=this.bboxes;for(const Oe of de)if(!Y.box[Oe]){Y.box[Oe]=!0;const je=4*Oe,Le=this.boxKeys[Oe];if(this._circleAndRectCollide(R.x,R.y,R.radius,Pe[je+0],Pe[je+1],Pe[je+2],Pe[je+3])&&(!F||F(Le))&&!zr(Q,Le.overlapMode))return E.push(!0),!0}}const xe=this.circleCells[y];if(xe!==null){const Pe=this.circles;for(const Oe of xe)if(!Y.circle[Oe]){Y.circle[Oe]=!0;const je=3*Oe,Le=this.circleKeys[Oe];if(this._circlesCollide(Pe[je],Pe[je+1],Pe[je+2],R.x,R.y,R.radius)&&(!F||F(Le))&&!zr(Q,Le.overlapMode))return E.push(!0),!0}}}_forEachCell(r,l,d,f,y,E,A,F){const R=this._convertToXCellCoord(r),Y=this._convertToYCellCoord(l),Q=this._convertToXCellCoord(d),de=this._convertToYCellCoord(f);for(let xe=R;xe<=Q;xe++)for(let Pe=Y;Pe<=de;Pe++)if(y.call(this,r,l,d,f,this.xCellCount*Pe+xe,E,A,F))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,f,y,E){const A=f-r,F=y-l,R=d+E;return R*R>A*A+F*F}_circleAndRectCollide(r,l,d,f,y,E,A){const F=(E-f)/2,R=Math.abs(r-(f+F));if(R>F+d)return!1;const Y=(A-y)/2,Q=Math.abs(l-(y+Y));if(Q>Y+d)return!1;if(R<=F||Q<=Y)return!0;const de=R-F,xe=Q-Y;return de*de+xe*xe<=d*d}}function Ii(v,r,l,d,f){const y=u.H();return r?(u.K(y,y,[1/f,1/f,1]),l||u.ae(y,y,d.angle)):u.L(y,d.labelPlaneMatrix,v),y}function Ur(v,r,l,d,f){if(r){const y=u.af(v);return u.K(y,y,[f,f,1]),l||u.ae(y,y,-d.angle),y}return d.glCoordMatrix}function ze(v,r,l){let d;l?(d=[v.x,v.y,l(v.x,v.y),1],u.ag(d,d,r)):(d=[v.x,v.y,0,1],function(y,E,A){const F=E[0],R=E[1];y[0]=A[0]*F+A[4]*R+A[12],y[1]=A[1]*F+A[5]*R+A[13],y[3]=A[3]*F+A[7]*R+A[15]}(d,d,r));const f=d[3];return{point:new u.P(d[0]/f,d[1]/f),signedDistanceFromCamera:f,isOccluded:!1}}function se(v,r){return .5+v/r*.5}function ie(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function we(v,r,l,d,f,y,E,A,F,R,Y,Q,de,xe,Pe){const Oe=d?v.textSizeData:v.iconSizeData,je=u.ah(Oe,l.transform.zoom),Le=[256/l.width*2+1,256/l.height*2+1],Xe=d?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Xe.clear();const ke=v.lineVertexArray,Je=d?v.text.placedSymbolArray:v.icon.placedSymbolArray,tt=l.transform.width/l.transform.height;let at=!1;for(let yt=0;yt<Je.length;yt++){const wt=Je.get(yt);if(wt.hidden||wt.writingMode===u.ai.vertical&&!at){tn(wt.numGlyphs,Xe);continue}at=!1;const Lt=ze(new u.P(wt.anchorX,wt.anchorY),r,Pe);if(!ie(Lt.point,Le)){tn(wt.numGlyphs,Xe);continue}const Bt=se(l.transform.cameraToCenterDistance,Lt.signedDistanceFromCamera),bt=u.aj(Oe,je,wt),Tt=E?bt/Bt:bt*Bt,Zt={getElevation:Pe,labelPlaneMatrix:f,lineVertexArray:ke,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:R,tileAnchorPoint:new u.P(wt.anchorX,wt.anchorY),unwrappedTileID:Y,width:Q,height:de,translation:xe},mn=Be(Zt,wt,Tt,!1,A,r,y,v.glyphOffsetArray,Xe,tt,F);at=mn.useVertical,(mn.notEnoughRoom||at||mn.needsFlipping&&Be(Zt,wt,Tt,!0,A,r,y,v.glyphOffsetArray,Xe,tt,F).notEnoughRoom)&&tn(wt.numGlyphs,Xe)}d?v.text.dynamicLayoutVertexBuffer.updateData(Xe):v.icon.dynamicLayoutVertexBuffer.updateData(Xe)}function Ie(v,r,l,d,f,y,E,A){const F=y.glyphStartIndex+y.numGlyphs,R=y.lineStartIndex,Y=y.lineStartIndex+y.lineLength,Q=r.getoffsetX(y.glyphStartIndex),de=r.getoffsetX(F-1),xe=Ct(v*Q,l,d,f,y.segment,R,Y,A,E);if(!xe)return null;const Pe=Ct(v*de,l,d,f,y.segment,R,Y,A,E);return Pe?A.projectionCache.anyProjectionOccluded?null:{first:xe,last:Pe}:null}function Me(v,r,l,d){return v===u.ai.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(v===u.ai.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Be(v,r,l,d,f,y,E,A,F,R,Y){const Q=l/24,de=r.lineOffsetX*Q,xe=r.lineOffsetY*Q;let Pe;if(r.numGlyphs>1){const Oe=r.glyphStartIndex+r.numGlyphs,je=r.lineStartIndex,Le=r.lineStartIndex+r.lineLength,Xe=Ie(Q,A,de,xe,d,r,Y,v);if(!Xe)return{notEnoughRoom:!0};const ke=ze(Xe.first.point,E,v.getElevation).point,Je=ze(Xe.last.point,E,v.getElevation).point;if(f&&!d){const tt=Me(r.writingMode,ke,Je,R);if(tt)return tt}Pe=[Xe.first];for(let tt=r.glyphStartIndex+1;tt<Oe-1;tt++)Pe.push(Ct(Q*A.getoffsetX(tt),de,xe,d,r.segment,je,Le,v,Y));Pe.push(Xe.last)}else{if(f&&!d){const je=ze(v.tileAnchorPoint,y,v.getElevation).point,Le=r.lineStartIndex+r.segment+1,Xe=new u.P(v.lineVertexArray.getx(Le),v.lineVertexArray.gety(Le)),ke=ze(Xe,y,v.getElevation),Je=ke.signedDistanceFromCamera>0?ke.point:function(at,yt,wt,Lt,Bt,bt){return qe(at,yt,wt,1,Bt,bt)}(v.tileAnchorPoint,Xe,je,0,y,v),tt=Me(r.writingMode,je,Je,R);if(tt)return tt}const Oe=Ct(Q*A.getoffsetX(r.glyphStartIndex),de,xe,d,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,Y);if(!Oe||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Pe=[Oe]}for(const Oe of Pe)u.ak(F,Oe.point,Oe.angle);return{}}function qe(v,r,l,d,f,y){const E=v.add(v.sub(r)._unit()),A=f!==void 0?ze(E,f,y.getElevation).point:st(E.x,E.y,y).point,F=l.sub(A);return l.add(F._mult(d/F.mag()))}function De(v,r,l){const d=r.projectionCache;if(d.projections[v])return d.projections[v];const f=new u.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),y=st(f.x,f.y,r);if(y.signedDistanceFromCamera>0)return d.projections[v]=y.point,d.anyProjectionOccluded=d.anyProjectionOccluded||y.isOccluded,y.point;const E=v-l.direction;return function(A,F,R,Y,Q){return qe(A,F,R,Y,void 0,Q)}(l.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(E),r.lineVertexArray.gety(E)),f,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,r)}function st(v,r,l){const d=v+l.translation[0],f=r+l.translation[1];let y;return!l.pitchWithMap&&l.projection.useSpecialProjectionForSymbols?(y=l.projection.projectTileCoordinates(d,f,l.unwrappedTileID,l.getElevation),y.point.x=(.5*y.point.x+.5)*l.width,y.point.y=(.5*-y.point.y+.5)*l.height):(y=ze(new u.P(d,f),l.labelPlaneMatrix,l.getElevation),y.isOccluded=!1),y}function dt(v,r,l){return v._unit()._perp()._mult(r*l)}function ot(v,r,l,d,f,y,E,A,F){if(A.projectionCache.offsets[v])return A.projectionCache.offsets[v];const R=l.add(r);if(v+F.direction<d||v+F.direction>=f)return A.projectionCache.offsets[v]=R,R;const Y=De(v+F.direction,A,F),Q=dt(Y.sub(l),E,F.direction),de=l.add(Q),xe=Y.add(Q);return A.projectionCache.offsets[v]=u.al(y,R,de,xe)||R,A.projectionCache.offsets[v]}function Ct(v,r,l,d,f,y,E,A,F){const R=d?v-r:v+r;let Y=R>0?1:-1,Q=0;d&&(Y*=-1,Q=Math.PI),Y<0&&(Q+=Math.PI);let de,xe=Y>0?y+f:y+f+1;A.projectionCache.cachedAnchorPoint?de=A.projectionCache.cachedAnchorPoint:(de=st(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=de);let Pe,Oe,je=de,Le=de,Xe=0,ke=0;const Je=Math.abs(R),tt=[];let at;for(;Xe+ke<=Je;){if(xe+=Y,xe<y||xe>=E)return null;Xe+=ke,Le=je,Oe=Pe;const Lt={absOffsetX:Je,direction:Y,distanceFromAnchor:Xe,previousVertex:Le};if(je=De(xe,A,Lt),l===0)tt.push(Le),at=je.sub(Le);else{let Bt;const bt=je.sub(Le);Bt=bt.mag()===0?dt(De(xe+Y,A,Lt).sub(je),l,Y):dt(bt,l,Y),Oe||(Oe=Le.add(Bt)),Pe=ot(xe,Bt,je,y,E,Oe,l,A,Lt),tt.push(Oe),at=Pe.sub(Oe)}ke=at.mag()}const yt=at._mult((Je-Xe)/ke)._add(Oe||Le),wt=Q+Math.atan2(je.y-Le.y,je.x-Le.x);return tt.push(yt),{point:yt,angle:F?wt:0,path:tt}}const Kt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function tn(v,r){for(let l=0;l<v;l++){const d=r.length;r.resize(d+4),r.float32.set(Kt,3*d)}}const pn=100;class En{constructor(r,l,d=new ei(r.width+200,r.height+200,25),f=new ei(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=l,this.grid=d,this.ignoredGrid=f,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+pn,this.screenBottomBoundary=r.height+pn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,f,y,E,A,F,R,Y,Q){const de=r.anchorPointX+F[0],xe=r.anchorPointY+F[1],Pe=this.projectAndGetPerspectiveRatio(f,de,xe,y,Y),Oe=this._projectCollisionBox(r,d,f,y,E,A,F,Pe,Y,Q),[je,Le,Xe,ke]=Oe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(E?Oe.allPointsOccluded:this.mapProjection.isOccluded(de,xe,y))||Pe.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(je,Le,Xe,ke)||l!=="always"&&this.grid.hitTest(je,Le,Xe,ke,l,R)?{box:[je,Le,Xe,ke],placeable:!1,offscreen:!1}:{box:[je,Le,Xe,ke],placeable:!0,offscreen:this.isOffscreen(je,Le,Xe,ke)}}placeCollisionCircles(r,l,d,f,y,E,A,F,R,Y,Q,de,xe,Pe,Oe,je){const Le=[],Xe=new u.P(l.anchorX,l.anchorY),ke=this.getPerspectiveRatio(E,Xe.x,Xe.y,A,je),Je=(Q?y/ke:y*ke)/u.aq,tt={getElevation:je,labelPlaneMatrix:F,lineVertexArray:d,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Xe,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Oe},at=Ie(Je,f,l.lineOffsetX*Je,l.lineOffsetY*Je,!1,l,!1,tt);let yt=!1,wt=!1,Lt=!0;if(at){const Bt=.5*xe*ke+Pe,bt=new u.P(-100,-100),Tt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Zt=new zt,mn=at.first,At=at.last;let jt=[];for(let xn=mn.path.length-1;xn>=1;xn--)jt.push(mn.path[xn]);for(let xn=1;xn<At.path.length;xn++)jt.push(At.path[xn]);const cn=2.5*Bt;if(R){const xn=this.projectPathToScreenSpace(jt,tt,R);jt=xn.some(Cn=>Cn.signedDistanceFromCamera<=0)?[]:xn.map(Cn=>Cn.point)}let ir=[];if(jt.length>0){const xn=jt[0].clone(),Cn=jt[0].clone();for(let or=1;or<jt.length;or++)xn.x=Math.min(xn.x,jt[or].x),xn.y=Math.min(xn.y,jt[or].y),Cn.x=Math.max(Cn.x,jt[or].x),Cn.y=Math.max(Cn.y,jt[or].y);ir=xn.x>=bt.x&&Cn.x<=Tt.x&&xn.y>=bt.y&&Cn.y<=Tt.y?[jt]:Cn.x<bt.x||xn.x>Tt.x||Cn.y<bt.y||xn.y>Tt.y?[]:u.am([jt],bt.x,bt.y,Tt.x,Tt.y)}for(const xn of ir){Zt.reset(xn,.25*Bt);let Cn=0;Cn=Zt.length<=.5*Bt?1:Math.ceil(Zt.paddedLength/cn)+1;for(let or=0;or<Cn;or++){const ti=or/Math.max(Cn-1,1),Co=Zt.lerp(ti),sr=Co.x+pn,zi=Co.y+pn;Le.push(sr,zi,Bt,0);const wi=sr-Bt,ni=zi-Bt,ri=sr+Bt,Po=zi+Bt;if(Lt=Lt&&this.isOffscreen(wi,ni,ri,Po),wt=wt||this.isInsideGrid(wi,ni,ri,Po),r!=="always"&&this.grid.hitTestCircle(sr,zi,Bt,r,de)&&(yt=!0,!Y))return{circles:[],offscreen:!1,collisionDetected:yt}}}}return{circles:!Y&&yt||!wt||ke<this.perspectiveRatioCutoff?[]:Le,offscreen:Lt,collisionDetected:yt}}projectPathToScreenSpace(r,l,d){return r.map(f=>ze(f,d,l.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,f=1/0,y=-1/0,E=-1/0;for(const Y of r){const Q=new u.P(Y.x+pn,Y.y+pn);d=Math.min(d,Q.x),f=Math.min(f,Q.y),y=Math.max(y,Q.x),E=Math.max(E,Q.y),l.push(Q)}const A=this.grid.query(d,f,y,E).concat(this.ignoredGrid.query(d,f,y,E)),F={},R={};for(const Y of A){const Q=Y.key;if(F[Q.bucketInstanceId]===void 0&&(F[Q.bucketInstanceId]={}),F[Q.bucketInstanceId][Q.featureIndex])continue;const de=[new u.P(Y.x1,Y.y1),new u.P(Y.x2,Y.y1),new u.P(Y.x2,Y.y2),new u.P(Y.x1,Y.y2)];u.an(l,de)&&(F[Q.bucketInstanceId][Q.featureIndex]=!0,R[Q.bucketInstanceId]===void 0&&(R[Q.bucketInstanceId]=[]),R[Q.bucketInstanceId].push(Q.featureIndex))}return R}insertCollisionBox(r,l,d,f,y,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:E,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,f,y,E){const A=d?this.ignoredGrid:this.grid,F={bucketInstanceId:f,featureIndex:y,collisionGroupID:E,overlapMode:l};for(let R=0;R<r.length;R+=4)A.insertCircle(F,r[R],r[R+1],r[R+2])}projectAndGetPerspectiveRatio(r,l,d,f,y){const E=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,f,y):ze(new u.P(l,d),r,y);return{point:new u.P((E.point.x+1)/2*this.transform.width+pn,(1-E.point.y)/2*this.transform.height+pn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5,isOccluded:E.isOccluded,signedDistanceFromCamera:E.signedDistanceFromCamera}}getPerspectiveRatio(r,l,d,f,y){const E=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,f,y):ze(new u.P(l,d),r,y);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(r,l,d,f){return d<pn||r>=this.screenRightBoundary||f<pn||l>this.screenBottomBoundary}isInsideGrid(r,l,d,f){return d>=0&&r<this.gridRightBoundary&&f>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.ao([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,l,d,f,y,E,A,F,R,Y){const Q=l*F.perspectiveRatio;let de=new u.P(1,0),xe=new u.P(0,1);const Pe=new u.P(r.anchorPointX+A[0],r.anchorPointY+A[1]);if(E&&!y){const Bt=this.projectAndGetPerspectiveRatio(d,Pe.x+1,Pe.y,f,R).point.sub(F.point).unit(),bt=Math.atan(Bt.y/Bt.x)+(Bt.x<0?Math.PI:0),Tt=Math.sin(bt),Zt=Math.cos(bt);de=new u.P(Zt,Tt),xe=new u.P(-Tt,Zt)}else if(!E&&y){const Bt=-this.transform.angle,bt=Math.sin(Bt),Tt=Math.cos(Bt);de=new u.P(Tt,bt),xe=new u.P(-bt,Tt)}let Oe=F.point,je=Q;if(y){Oe=Pe;const Bt=this.transform.zoom-Math.floor(this.transform.zoom);je=Math.pow(2,-Bt),je*=this.mapProjection.getPitchedTextCorrection(this.transform,Pe,f),Y||(je*=u.ad(.5+F.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}Y&&(Oe=Oe.add(de.mult(Y.x*je)).add(xe.mult(Y.y*je)));const Le=r.x1*je,Xe=r.x2*je,ke=(Le+Xe)/2,Je=r.y1*je,tt=r.y2*je,at=(Je+tt)/2,yt=[{offsetX:Le,offsetY:Je},{offsetX:ke,offsetY:Je},{offsetX:Xe,offsetY:Je},{offsetX:Xe,offsetY:at},{offsetX:Xe,offsetY:tt},{offsetX:ke,offsetY:tt},{offsetX:Le,offsetY:tt},{offsetX:Le,offsetY:at}];let wt=[];for(const{offsetX:Bt,offsetY:bt}of yt)wt.push(new u.P(Oe.x+de.x*Bt+xe.x*bt,Oe.y+de.y*Bt+xe.y*bt));let Lt=!1;if(y){const Bt=wt.map(bt=>this.projectAndGetPerspectiveRatio(d,bt.x,bt.y,f,R));Lt=Bt.some(bt=>!bt.isOccluded),wt=Bt.map(bt=>bt.point)}else Lt=!0;return{box:u.ap(wt),allPointsOccluded:!Lt}}}function hn(v,r,l){return r*(u.X/(v.tileSize*Math.pow(2,l-v.tileID.overscaledZ)))}class Un{constructor(r,l,d,f){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):f&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Jn{constructor(r,l,d,f,y){this.text=new Un(r?r.text:null,l,d,y),this.icon=new Un(r?r.icon:null,l,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class nr{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class wn{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class Bn{constructor(r,l,d,f,y){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=f,this.tileID=y}}class Yn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function Er(v,r,l,d,f){const{horizontalAlign:y,verticalAlign:E}=u.av(v);return new u.P(-(y-.5)*r+d[0]*f,-(E-.5)*l+d[1]*f)}class $r{constructor(r,l,d,f,y,E){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new En(this.transform,l),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Yn(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const l=this.terrain;return l?(d,f)=>l.getElevation(r,d,f):null}getBucketParts(r,l,d,f){const y=d.getBucket(l),E=d.latestFeatureIndex;if(!y||!E||l.id!==y.layerIds[0])return;const A=d.collisionBoxArray,F=y.layers[0].layout,R=y.layers[0].paint,Y=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),Q=d.tileSize/u.X,de=d.tileID.toUnwrapped(),xe=this.transform.calculatePosMatrix(de),Pe=F.get("text-pitch-alignment")==="map",Oe=F.get("text-rotation-alignment")==="map",je=hn(d,1,this.transform.zoom),Le=this.collisionIndex.mapProjection.translatePosition(this.transform,d,R.get("text-translate"),R.get("text-translate-anchor")),Xe=this.collisionIndex.mapProjection.translatePosition(this.transform,d,R.get("icon-translate"),R.get("icon-translate-anchor")),ke=Ii(xe,Pe,Oe,this.transform,je);let Je=null;if(Pe){const at=Ur(xe,Pe,Oe,this.transform,je);Je=u.L([],this.transform.labelPlaneMatrix,at)}this.retainedQueryData[y.bucketInstanceId]=new Bn(y.bucketInstanceId,E,y.sourceLayerIndex,y.index,d.tileID);const tt={bucket:y,layout:F,translationText:Le,translationIcon:Xe,posMatrix:xe,unwrappedTileID:de,textLabelPlaneMatrix:ke,labelToScreenMatrix:Je,scale:Y,textPixelRatio:Q,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:u.ah(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const at of y.sortKeyRanges){const{sortKey:yt,symbolInstanceStart:wt,symbolInstanceEnd:Lt}=at;r.push({sortKey:yt,symbolInstanceStart:wt,symbolInstanceEnd:Lt,parameters:tt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:tt})}attemptAnchorPlacement(r,l,d,f,y,E,A,F,R,Y,Q,de,xe,Pe,Oe,je,Le,Xe,ke){const Je=u.ar[r.textAnchor],tt=[r.textOffset0,r.textOffset1],at=Er(Je,d,f,tt,y),yt=this.collisionIndex.placeCollisionBox(l,de,F,R,Y,A,E,je,Q.predicate,ke,at);if((!Xe||this.collisionIndex.placeCollisionBox(Xe,de,F,R,Y,A,E,Le,Q.predicate,ke,at).placeable)&&yt.placeable){let wt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[xe.crossTileID]&&this.prevPlacement.placements[xe.crossTileID]&&this.prevPlacement.placements[xe.crossTileID].text&&(wt=this.prevPlacement.variableOffsets[xe.crossTileID].anchor),xe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[xe.crossTileID]={textOffset:tt,width:d,height:f,anchor:Je,textBoxScale:y,prevAnchor:wt},this.markUsedJustification(Pe,Je,xe,Oe),Pe.allowVerticalPlacement&&(this.markUsedOrientation(Pe,Oe,xe),this.placedOrientations[xe.crossTileID]=Oe),{shift:at,placedGlyphBoxes:yt}}}placeLayerBucketPart(r,l,d){const{bucket:f,layout:y,translationText:E,translationIcon:A,posMatrix:F,unwrappedTileID:R,textLabelPlaneMatrix:Y,labelToScreenMatrix:Q,textPixelRatio:de,holdingForFade:xe,collisionBoxArray:Pe,partiallyEvaluatedTextSize:Oe,collisionGroup:je}=r.parameters,Le=y.get("text-optional"),Xe=y.get("icon-optional"),ke=u.as(y,"text-overlap","text-allow-overlap"),Je=ke==="always",tt=u.as(y,"icon-overlap","icon-allow-overlap"),at=tt==="always",yt=y.get("text-rotation-alignment")==="map",wt=y.get("text-pitch-alignment")==="map",Lt=y.get("icon-text-fit")!=="none",Bt=y.get("symbol-z-order")==="viewport-y",bt=Je&&(at||!f.hasIconData()||Xe),Tt=at&&(Je||!f.hasTextData()||Le);!f.collisionArrays&&Pe&&f.deserializeCollisionBoxes(Pe);const Zt=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),mn=(At,jt,cn)=>{var ir,xn;if(l[At.crossTileID])return;if(xe)return void(this.placements[At.crossTileID]=new nr(!1,!1,!1));let Cn=!1,or=!1,ti=!0,Co=null,sr={box:null,placeable:!1,offscreen:null},zi={box:null,placeable:!1,offscreen:null},wi=null,ni=null,ri=null,Po=0,Fa=0,Pc=0;jt.textFeatureIndex?Po=jt.textFeatureIndex:At.useRuntimeCollisionCircles&&(Po=At.featureIndex),jt.verticalTextFeatureIndex&&(Fa=jt.verticalTextFeatureIndex);const El=jt.textBox;if(El){const qr=ii=>{let oi=u.ai.horizontal;if(f.allowVerticalPlacement&&!ii&&this.prevPlacement){const Zr=this.prevPlacement.placedOrientations[At.crossTileID];Zr&&(this.placedOrientations[At.crossTileID]=Zr,oi=Zr,this.markUsedOrientation(f,oi,At))}return oi},Io=(ii,oi)=>{if(f.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&jt.verticalTextBox){for(const Zr of f.writingModes)if(Zr===u.ai.vertical?(sr=oi(),zi=sr):sr=ii(),sr&&sr.placeable)break}else sr=ii()},Ys=At.textAnchorOffsetStartIndex,Tl=At.textAnchorOffsetEndIndex;if(Tl===Ys){const ii=(oi,Zr)=>{const ur=this.collisionIndex.placeCollisionBox(oi,ke,de,F,R,wt,yt,E,je.predicate,Zt);return ur&&ur.placeable&&(this.markUsedOrientation(f,Zr,At),this.placedOrientations[At.crossTileID]=Zr),ur};Io(()=>ii(El,u.ai.horizontal),()=>{const oi=jt.verticalTextBox;return f.allowVerticalPlacement&&At.numVerticalGlyphVertices>0&&oi?ii(oi,u.ai.vertical):{box:null,offscreen:null}}),qr(sr&&sr.placeable)}else{let ii=u.ar[(xn=(ir=this.prevPlacement)===null||ir===void 0?void 0:ir.variableOffsets[At.crossTileID])===null||xn===void 0?void 0:xn.anchor];const oi=(ur,Cl,xd)=>{const Dr=ur.x2-ur.x1,bp=ur.y2-ur.y1,Ac=At.textBoxScale,Mc=Lt&&tt==="never"?Cl:null;let Qs=null,Sp=ke==="never"?1:2,wd="never";ii&&Sp++;for(let bd=0;bd<Sp;bd++){for(let Sd=Ys;Sd<Tl;Sd++){const kc=f.textAnchorOffsets.get(Sd);if(ii&&kc.textAnchor!==ii)continue;const Pl=this.attemptAnchorPlacement(kc,ur,Dr,bp,Ac,yt,wt,de,F,R,je,wd,At,f,xd,E,A,Mc,Zt);if(Pl&&(Qs=Pl.placedGlyphBoxes,Qs&&Qs.placeable))return Cn=!0,Co=Pl.shift,Qs}ii?ii=null:wd=ke}return d&&!Qs&&(Qs={box:this.collisionIndex.placeCollisionBox(El,"always",de,F,R,wt,yt,E,je.predicate,Zt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Qs};Io(()=>oi(El,jt.iconBox,u.ai.horizontal),()=>{const ur=jt.verticalTextBox;return f.allowVerticalPlacement&&(!sr||!sr.placeable)&&At.numVerticalGlyphVertices>0&&ur?oi(ur,jt.verticalIconBox,u.ai.vertical):{box:null,occluded:!0,offscreen:null}}),sr&&(Cn=sr.placeable,ti=sr.offscreen);const Zr=qr(sr&&sr.placeable);if(!Cn&&this.prevPlacement){const ur=this.prevPlacement.variableOffsets[At.crossTileID];ur&&(this.variableOffsets[At.crossTileID]=ur,this.markUsedJustification(f,ur.anchor,At,Zr))}}}if(wi=sr,Cn=wi&&wi.placeable,ti=wi&&wi.offscreen,At.useRuntimeCollisionCircles){const qr=f.text.placedSymbolArray.get(At.centerJustifiedTextSymbolIndex),Io=u.aj(f.textSizeData,Oe,qr),Ys=y.get("text-padding");ni=this.collisionIndex.placeCollisionCircles(ke,qr,f.lineVertexArray,f.glyphOffsetArray,Io,F,R,Y,Q,d,wt,je.predicate,At.collisionCircleDiameter,Ys,E,Zt),ni.circles.length&&ni.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),Cn=Je||ni.circles.length>0&&!ni.collisionDetected,ti=ti&&ni.offscreen}if(jt.iconFeatureIndex&&(Pc=jt.iconFeatureIndex),jt.iconBox){const qr=Io=>this.collisionIndex.placeCollisionBox(Io,tt,de,F,R,wt,yt,A,je.predicate,Zt,Lt&&Co?Co:void 0);zi&&zi.placeable&&jt.verticalIconBox?(ri=qr(jt.verticalIconBox),or=ri.placeable):(ri=qr(jt.iconBox),or=ri.placeable),ti=ti&&ri.offscreen}const ja=Le||At.numHorizontalGlyphVertices===0&&At.numVerticalGlyphVertices===0,Ic=Xe||At.numIconVertices===0;ja||Ic?Ic?ja||(or=or&&Cn):Cn=or&&Cn:or=Cn=or&&Cn;const _d=or&&ri.placeable;if(Cn&&wi.placeable&&this.collisionIndex.insertCollisionBox(wi.box,ke,y.get("text-ignore-placement"),f.bucketInstanceId,zi&&zi.placeable&&Fa?Fa:Po,je.ID),_d&&this.collisionIndex.insertCollisionBox(ri.box,tt,y.get("icon-ignore-placement"),f.bucketInstanceId,Pc,je.ID),ni&&Cn&&this.collisionIndex.insertCollisionCircles(ni.circles,ke,y.get("text-ignore-placement"),f.bucketInstanceId,Po,je.ID),d&&this.storeCollisionData(f.bucketInstanceId,cn,jt,wi,ri,ni),At.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[At.crossTileID]=new nr(Cn||bt,or||Tt,ti||f.justReloaded),l[At.crossTileID]=!0};if(Bt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const At=f.getSortedSymbolIndexes(this.transform.angle);for(let jt=At.length-1;jt>=0;--jt){const cn=At[jt];mn(f.symbolInstances.get(cn),f.collisionArrays[cn],cn)}}else for(let At=r.symbolInstanceStart;At<r.symbolInstanceEnd;At++)mn(f.symbolInstances.get(At),f.collisionArrays[At],At);if(d&&f.bucketInstanceId in this.collisionCircleArrays){const At=this.collisionCircleArrays[f.bucketInstanceId];u.at(At.invProjMatrix,F),At.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(r,l,d,f,y,E){if(d.textBox||d.iconBox){let A,F;this.collisionBoxArrays.has(r)?A=this.collisionBoxArrays.get(r):(A=new Map,this.collisionBoxArrays.set(r,A)),A.has(l)?F=A.get(l):(F={text:null,icon:null},A.set(l,F)),d.textBox&&(F.text=f.box),d.iconBox&&(F.icon=y.box)}if(E){let A=this.collisionCircleArrays[r];A===void 0&&(A=this.collisionCircleArrays[r]=new wn);for(let F=0;F<E.circles.length;F+=4)A.circles.push(E.circles[F+0]),A.circles.push(E.circles[F+1]),A.circles.push(E.circles[F+2]),A.circles.push(E.collisionDetected?1:0)}}markUsedJustification(r,l,d,f){let y;y=f===u.ai.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.au(l)];const E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const A of E)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=y>=0&&A!==y?0:d.crossTileID)}markUsedOrientation(r,l,d){const f=l===u.ai.horizontal||l===u.ai.horizontalOnly?l:0,y=l===u.ai.vertical?l:0,E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const A of E)r.text.placedSymbolArray.get(A).placedOrientation=f;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const f=l?l.symbolFadeChange(r):1,y=l?l.opacities:{},E=l?l.variableOffsets:{},A=l?l.placedOrientations:{};for(const F in this.placements){const R=this.placements[F],Y=y[F];Y?(this.opacities[F]=new Jn(Y,f,R.text,R.icon),d=d||R.text!==Y.text.placed||R.icon!==Y.icon.placed):(this.opacities[F]=new Jn(null,f,R.text,R.icon,R.skipFade),d=d||R.text||R.icon)}for(const F in y){const R=y[F];if(!this.opacities[F]){const Y=new Jn(R,f,!1,!1);Y.isHidden()||(this.opacities[F]=Y,d=d||R.text.placed||R.icon.placed)}}for(const F in E)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=E[F]);for(const F in A)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=A[F]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const f of l){const y=f.getBucket(r);y&&f.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,f.tileID,d,f.collisionBoxArray)}}updateBucketOpacities(r,l,d,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],E=y.layout,A=new Jn(null,0,!1,!1,!0),F=E.get("text-allow-overlap"),R=E.get("icon-allow-overlap"),Y=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=E.get("text-rotation-alignment")==="map",de=E.get("text-pitch-alignment")==="map",xe=E.get("icon-text-fit")!=="none",Pe=new Jn(null,0,F&&(R||!r.hasIconData()||E.get("icon-optional")),R&&(F||!r.hasTextData()||E.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const Oe=(Le,Xe,ke)=>{for(let Je=0;Je<Xe/4;Je++)Le.opacityVertexArray.emplaceBack(ke);Le.hasVisibleVertices=Le.hasVisibleVertices||ke!==Gr},je=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Le=0;Le<r.symbolInstances.length;Le++){const Xe=r.symbolInstances.get(Le),{numHorizontalGlyphVertices:ke,numVerticalGlyphVertices:Je,crossTileID:tt}=Xe;let at=this.opacities[tt];d[tt]?at=A:at||(at=Pe,this.opacities[tt]=at),d[tt]=!0;const yt=Xe.numIconVertices>0,wt=this.placedOrientations[Xe.crossTileID],Lt=wt===u.ai.vertical,Bt=wt===u.ai.horizontal||wt===u.ai.horizontalOnly;if(ke>0||Je>0){const Tt=pi(at.text);Oe(r.text,ke,Lt?Gr:Tt),Oe(r.text,Je,Bt?Gr:Tt);const Zt=at.text.isHidden();[Xe.rightJustifiedTextSymbolIndex,Xe.centerJustifiedTextSymbolIndex,Xe.leftJustifiedTextSymbolIndex].forEach(jt=>{jt>=0&&(r.text.placedSymbolArray.get(jt).hidden=Zt||Lt?1:0)}),Xe.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Xe.verticalPlacedTextSymbolIndex).hidden=Zt||Bt?1:0);const mn=this.variableOffsets[Xe.crossTileID];mn&&this.markUsedJustification(r,mn.anchor,Xe,wt);const At=this.placedOrientations[Xe.crossTileID];At&&(this.markUsedJustification(r,"left",Xe,At),this.markUsedOrientation(r,At,Xe))}if(yt){const Tt=pi(at.icon),Zt=!(xe&&Xe.verticalPlacedIconSymbolIndex&&Lt);Xe.placedIconSymbolIndex>=0&&(Oe(r.icon,Xe.numIconVertices,Zt?Tt:Gr),r.icon.placedSymbolArray.get(Xe.placedIconSymbolIndex).hidden=at.icon.isHidden()),Xe.verticalPlacedIconSymbolIndex>=0&&(Oe(r.icon,Xe.numVerticalIconVertices,Zt?Gr:Tt),r.icon.placedSymbolArray.get(Xe.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const bt=je&&je.has(Le)?je.get(Le):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Tt=r.collisionArrays[Le];if(Tt){let Zt=new u.P(0,0);if(Tt.textBox||Tt.verticalTextBox){let mn=!0;if(Y){const At=this.variableOffsets[tt];At?(Zt=Er(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale),Q&&Zt._rotate(de?this.transform.angle:-this.transform.angle)):mn=!1}if(Tt.textBox||Tt.verticalTextBox){let At;Tt.textBox&&(At=Lt),Tt.verticalTextBox&&(At=Bt),Vr(r.textCollisionBox.collisionVertexArray,at.text.placed,!mn||At,bt.text,Zt.x,Zt.y)}}if(Tt.iconBox||Tt.verticalIconBox){const mn=!!(!Bt&&Tt.verticalIconBox);let At;Tt.iconBox&&(At=mn),Tt.verticalIconBox&&(At=!mn),Vr(r.iconCollisionBox.collisionVertexArray,at.icon.placed,At,bt.icon,xe?Zt.x:0,xe?Zt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Le=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Le.invProjMatrix,r.placementViewportMatrix=Le.viewportMatrix,r.collisionCircleArray=Le.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function Vr(v,r,l,d,f,y){d&&d.length!==0||(d=[0,0,0,0]);const E=d[0]-pn,A=d[1]-pn,F=d[2]-pn,R=d[3]-pn;v.emplaceBack(r?1:0,l?1:0,f||0,y||0,E,A),v.emplaceBack(r?1:0,l?1:0,f||0,y||0,F,A),v.emplaceBack(r?1:0,l?1:0,f||0,y||0,F,R),v.emplaceBack(r?1:0,l?1:0,f||0,y||0,E,R)}const Ho=Math.pow(2,25),kn=Math.pow(2,24),nl=Math.pow(2,17),Tn=Math.pow(2,16),Tr=Math.pow(2,9),fi=Math.pow(2,8),Vh=Math.pow(2,1);function pi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const r=v.placed?1:0,l=Math.floor(127*v.opacity);return l*Ho+r*kn+l*nl+r*Tn+l*Tr+r*fi+l*Vh+r}const Gr=0;function rl(){return{isOccluded:(v,r,l)=>!1,getPitchedTextCorrection:(v,r,l)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,l,d){throw new Error("Not implemented.")},translatePosition:(v,r,l,d)=>function(f,y,E,A,F=!1){if(!E[0]&&!E[1])return[0,0];const R=F?A==="map"?f.angle:0:A==="viewport"?-f.angle:0;if(R){const Y=Math.sin(R),Q=Math.cos(R);E=[E[0]*Q-E[1]*Y,E[0]*Y+E[1]*Q]}return[F?E[0]:hn(y,E[0],f.zoom),F?E[1]:hn(y,E[1],f.zoom)]}(v,r,l,d),getCircleRadiusCorrection:v=>1}}class mi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,f,y){const E=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(E,f,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((A,F)=>A.sortKey-F.sortKey));this._currentPartIndex<E.length;)if(l.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,y())return!0;return!1}}class vr{constructor(r,l,d,f,y,E,A,F){this.placement=new $r(r,rl(),l,E,A,F),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const f=b.now(),y=()=>!this._forceFullPlacement&&b.now()-f>2;for(;this._currentPlacementIndex>=0;){const E=l[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=A)&&(!E.maxzoom||E.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new mi(E)),this._inProgressLayer.continuePlacement(d[E.source],this.placement,this._showCollisionBoxes,E,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const go=512/u.X/2;class ps{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const f=new Map;for(let y=0;y<l.length;y++){const E=l.get(y),A=E.key,F=f.get(A);F?F.push(E):f.set(A,[E])}for(const[y,E]of f){const A={positions:E.map(F=>({x:Math.floor(F.anchorX*go),y:Math.floor(F.anchorY*go)})),crossTileIDs:E.map(F=>F.crossTileID)};if(A.positions.length>128){const F=new u.aw(A.positions.length,16,Uint16Array);for(const{x:R,y:Y}of A.positions)F.add(R,Y);F.finish(),delete A.positions,A.index=F}this._symbolsByKey[y]=A}}getScaledCoordinates(r,l){const{x:d,y:f,z:y}=this.tileID.canonical,{x:E,y:A,z:F}=l.canonical,R=go/Math.pow(2,F-y),Y=(A*u.X+r.anchorY)*R,Q=f*u.X*go;return{x:Math.floor((E*u.X+r.anchorX)*R-d*u.X*go),y:Math.floor(Y-Q)}}findMatches(r,l,d){const f=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let y=0;y<r.length;y++){const E=r.get(y);if(E.crossTileID)continue;const A=this._symbolsByKey[E.key];if(!A)continue;const F=this.getScaledCoordinates(E,l);if(A.index){const R=A.index.range(F.x-f,F.y-f,F.x+f,F.y+f).sort();for(const Y of R){const Q=A.crossTileIDs[Y];if(!d[Q]){d[Q]=!0,E.crossTileID=Q;break}}}else if(A.positions)for(let R=0;R<A.positions.length;R++){const Y=A.positions[R],Q=A.crossTileIDs[R];if(Math.abs(Y.x-F.x)<=f&&Math.abs(Y.y-F.y)<=f&&!d[Q]){d[Q]=!0,E.crossTileID=Q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class hr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class il{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const f=this.indexes[d],y={};for(const E in f){const A=f[E];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+l),y[A.tileID.key]=A}this.indexes[d]=y}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<l.symbolInstances.length;y++)l.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const f=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const E=this.indexes[y];if(Number(y)>r.overscaledZ)for(const A in E){const F=E[A];F.tileID.isChildOf(r)&&F.findMatches(l.symbolInstances,r,f)}else{const A=E[r.scaledTo(Number(y)).key];A&&A.findMatches(l.symbolInstances,r,f)}}for(let y=0;y<l.symbolInstances.length;y++){const E=l.symbolInstances.get(y);E.crossTileID||(E.crossTileID=d.generate(),f[E.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new ps(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d of l.getCrossTileIDsLists())for(const f of d)delete this.usedCrossTileIDs[r][f]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const f=this.indexes[d];for(const y in f)r[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,f[y]),delete f[y],l=!0)}return l}}class _r{constructor(){this.layerIndexes={},this.crossTileIDs=new hr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let f=this.layerIndexes[r.id];f===void 0&&(f=this.layerIndexes[r.id]=new il);let y=!1;const E={};f.handleWrapJump(d);for(const A of l){const F=A.getBucket(r);F&&r.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(A.tileID,F,this.crossTileIDs)&&(y=!0),E[F.bucketInstanceId]=!0)}return f.removeStaleBuckets(E)&&(y=!0),y}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const va=(v,r)=>u.t(v,r&&r.filter(l=>l.identifier!=="source.canvas")),Xo=u.ax();class cu extends u.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const f=this.sourceCaches[d].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new Mt(vt(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,f)=>this.getGlyphs(d,f)),this.dispatcher.registerMessageHandler("GI",(d,f)=>this.getImages(d,f)),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new ee(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Ae(256,512),this.crossTileSymbolIndex=new _r,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.az()),Ve().on(k,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const f=this.sourceCaches[d.sourceId];if(!f)return;const y=f.getSource();if(y&&y.vectorLayerIds)for(const E in this._layers){const A=this._layers[E];A.source===y.id&&this._validateLayer(A)}})}loadURL(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const f=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(f,this._loadStyleRequest).then(E=>{this._loadStyleRequest=null,this._load(E.data,l,d)}).catch(E=>{this._loadStyleRequest=null,E&&!y.signal.aborted&&this.fire(new u.j(E))})}loadJSON(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Xo,{validate:!1})}_load(r,l,d){var f;const y=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!va(this,u.x(y))){this._loaded=!0,this.stylesheet=y;for(const E in y.sources)this.addSource(E,y.sources[E],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new Se(this.stylesheet.light),this.sky=new Ue(this.stylesheet.sky),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.aA(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const d=u.aB(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(r,l=!1,d=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,E,A,F){return u._(this,void 0,void 0,function*(){const R=B(y),Y=A>1?"@2x":"",Q={},de={};for(const{id:xe,url:Pe}of R){const Oe=E.transformRequest(te(Pe,Y,".json"),"SpriteJSON");Q[xe]=u.h(Oe,F);const je=E.transformRequest(te(Pe,Y,".png"),"SpriteImage");de[xe]=G.getImage(je,F)}return yield Promise.all([...Object.values(Q),...Object.values(de)]),function(xe,Pe){return u._(this,void 0,void 0,function*(){const Oe={};for(const je in xe){Oe[je]={};const Le=b.getImageCanvasContext((yield Pe[je]).data),Xe=(yield xe[je]).data;for(const ke in Xe){const{width:Je,height:tt,x:at,y:yt,sdf:wt,pixelRatio:Lt,stretchX:Bt,stretchY:bt,content:Tt,textFitWidth:Zt,textFitHeight:mn}=Xe[ke];Oe[je][ke]={data:null,pixelRatio:Lt,sdf:wt,stretchX:Bt,stretchY:bt,content:Tt,textFitWidth:Zt,textFitHeight:mn,spriteData:{width:Je,height:tt,x:at,y:yt,context:Le}}}}return Oe})}(Q,de)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const E in y){this._spritesImagesIds[E]=[];const A=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(F=>!(F in y)):[];for(const F of A)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in y[E]){const R=E==="default"?F:`${E}:${F}`;this._spritesImagesIds[E].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,y[E][F],!1):this.imageManager.addImage(R,y[E][F]),l&&(this._changedImages[R]=!0)}}}).catch(y=>{this._spriteRequest=null,f=y,this.fire(new u.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(f)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const f=l.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${f.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const d=[];for(const f of r)l[f]&&d.push(l[f]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const f=this._layers[d];f.type!=="custom"&&(r[d]=f.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(l){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const E in this._updatedSources){const A=this._updatedSources[E];if(A==="reload")this._reloadSource(E);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const d={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];d[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in d){const y=this.sourceCaches[f];!!d[f]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var d;this._checkLoaded();const f=this.serialize();if(r=l.transformStyle?l.transformStyle(f,r):r,((d=l.validate)===null||d===void 0||d)&&va(this,u.x(r)))return!1;(r=u.aC(r)).layers=u.aA(r.layers);const y=u.aD(f,r),E=this._getOperationsToPerform(y);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const A of E.operations)A();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],d=[];for(const f of r)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":l.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":l.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,f.args));break;case"setSky":l.push(()=>this.setSky.apply(this,f.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":l.push(()=>{});break;default:d.push(f.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const f=this.sourceCaches[r]=new It(r,l,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:r})),f.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const f=r.id;if(this.getLayer(f))return void this.fire(new u.j(new Error(`Layer "${f}" already exists on this map.`)));let y;if(r.type==="custom"){if(va(this,u.aE(r)))return;y=u.aB(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(f,r.source),r=u.aC(r),r=u.e(r,{source:f})),this._validate(u.x.layer,`layers.${f}`,r,{arrayIndex:-1},d))return;y=u.aB(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}const E=l?this._order.indexOf(l):this._order.length;if(l&&E===-1)this.fire(new u.j(new Error(`Cannot add layer "${f}" before non-existing layer "${l}".`)));else{if(this._order.splice(E,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const A=this._removedLayers[f];delete this._removedLayers[f],A.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const f=l?this._order.indexOf(l):this._order.length;l&&f===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(f,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const f=this.getLayer(r);f?f.minzoom===l&&f.maxzoom===d||(l!=null&&(f.minzoom=l),d!=null&&(f.maxzoom=d),this._updateLayer(f)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const f=this.getLayer(r);if(f){if(!u.aF(f.filter,l))return l==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(u.x.filter,`layers.${f.id}.filter`,l,null,d)||(f.filter=u.aC(l),this._updateLayer(f)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aC(this.getLayer(r).filter)}setLayoutProperty(r,l,d,f={}){this._checkLoaded();const y=this.getLayer(r);y?u.aF(y.getLayoutProperty(l),d)||(y.setLayoutProperty(l,d,f),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,f={}){this._checkLoaded();const y=this.getLayer(r);y?u.aF(y.getPaintProperty(l),d)||(y.setPaintProperty(l,d,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,f=r.sourceLayer,y=this.sourceCaches[d];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const E=y.getSource().type;E==="geojson"&&f?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||f?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,f=this.sourceCaches[d];if(f===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const y=f.getSource().type,E=y==="vector"?r.sourceLayer:void 0;y!=="vector"||E?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(E,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,f=this.sourceCaches[l];if(f!==void 0)return f.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aG(this.sourceCaches,y=>y.serialize()),l=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,f=this.stylesheet;return u.aH({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:r,layers:l,terrain:d},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=E=>this._layers[E].type==="fill-extrusion",d={},f=[];for(let E=this._order.length-1;E>=0;E--){const A=this._order[E];if(l(A)){d[A]=E;for(const F of r){const R=F[A];if(R)for(const Y of R)f.push(Y)}}}f.sort((E,A)=>A.intersectionZ-E.intersectionZ);const y=[];for(let E=this._order.length-1;E>=0;E--){const A=this._order[E];if(l(A))for(let F=f.length-1;F>=0;F--){const R=f[F].feature;if(d[R.layer.id]<E)break;y.push(R),f.pop()}else for(const F of r){const R=F[A];if(R)for(const Y of R)y.push(Y.feature)}}return y}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const f={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const A of l.layers){const F=this._layers[A];if(!F)return this.fire(new u.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];f[F.source]=!0}}const y=[];l.availableImages=this._availableImages;const E=this._serializedAllLayers();for(const A in this.sourceCaches)l.layers&&!f[A]||y.push(Wt(this.sourceCaches[A],this._layers,E,r,l,d));return this.placement&&y.push(function(A,F,R,Y,Q,de,xe){const Pe={},Oe=de.queryRenderedSymbols(Y),je=[];for(const Le of Object.keys(Oe).map(Number))je.push(xe[Le]);je.sort(Ht);for(const Le of je){const Xe=Le.featureIndex.lookupSymbolFeatures(Oe[Le.bucketInstanceId],F,Le.bucketIndex,Le.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,A);for(const ke in Xe){const Je=Pe[ke]=Pe[ke]||[],tt=Xe[ke];tt.sort((at,yt)=>{const wt=Le.featureSortOrder;if(wt){const Lt=wt.indexOf(at.featureIndex);return wt.indexOf(yt.featureIndex)-Lt}return yt.featureIndex-at.featureIndex});for(const at of tt)Je.push(at)}}for(const Le in Pe)Pe[Le].forEach(Xe=>{const ke=Xe.feature,Je=R[A[Le].source].getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=Je});return Pe}(this._layers,E,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(f,y){const E=f.getRenderableIds().map(R=>f.getTileByID(R)),A=[],F={};for(let R=0;R<E.length;R++){const Y=E[R],Q=Y.tileID.canonical.key;F[Q]||(F[Q]=!0,Y.querySourceFeatures(A,y))}return A}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let f=!1;for(const E in r)if(!u.aF(r[E],d[E])){f=!0;break}if(!f)return;const y={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,l={}){const d=this.sky.getSky();let f=!1;r||d&&(f=!0);for(const E in r)if(!u.aF(r[E],d[E])){f=!0;break}if(!f)return;const y={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,l),this.sky.updateTransitions(y)}_validate(r,l,d,f,y={}){return(!y||y.validate!==!1)&&va(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:d,styleSpec:u.v},f)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ve().off(k,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,f,y=!1){let E=!1,A=!1;const F={};for(const R of this._order){const Y=this._layers[R];if(Y.type!=="symbol")continue;if(!F[Y.source]){const de=this.sourceCaches[Y.source];F[Y.source]=de.getRenderableIds(!0).map(xe=>de.getTileByID(xe)).sort((xe,Pe)=>Pe.tileID.overscaledZ-xe.tileID.overscaledZ||(xe.tileID.isLessThan(Pe.tileID)?-1:1))}const Q=this.crossTileSymbolIndex.addLayer(Y,F[Y.source],r.center.lng);E=E||Q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),r.zoom))&&(this.pauseablePlacement=new vr(r,this.map.terrain,this._order,y,l,d,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),A=!0),E&&this.pauseablePlacement.placement.setStale()),A||E)for(const R of this._order){const Y=this._layers[R];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,F[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const f=this.sourceCaches[l.source];return f&&f.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),f=this.sourceCaches[l.source];return f&&f.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},f){this._checkLoaded();const y=[{id:r,url:l}],E=[...B(this.stylesheet.sprite),...y];this._validate(u.x.sprite,"sprite",E,null,d)||(this.stylesheet.sprite=E,this._loadSprite(y,!0,f))}removeSprite(r){this._checkLoaded();const l=B(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var _a=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Ko={prelude:In(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:In(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:In(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:In(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:In("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:In(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:In(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:In("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:In("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:In("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:In(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:In(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:In(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:In(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:In(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:In(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:In(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:In(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:In(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:In(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:In(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:In(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:In(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:In(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:In(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:In(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:In("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:In("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:In("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:In("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function In(v,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),f=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=y?y.concat(f):f,A={};return{fragmentSource:v=v.replace(l,(F,R,Y,Q,de)=>(A[de]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${de}
varying ${Y} ${Q} ${de};
#else
uniform ${Y} ${Q} u_${de};
#endif
`:`
#ifdef HAS_UNIFORM_u_${de}
    ${Y} ${Q} ${de} = u_${de};
#endif
`)),vertexSource:r=r.replace(l,(F,R,Y,Q,de)=>{const xe=Q==="float"?"vec2":"vec4",Pe=de.match(/color/)?"color":xe;return A[de]?R==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
attribute ${Y} ${xe} a_${de};
varying ${Y} ${Q} ${de};
#else
uniform ${Y} ${Q} u_${de};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = a_${de};
#else
    ${Y} ${Q} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = unpack_mix_${Pe}(a_${de}, u_${de}_t);
#else
    ${Y} ${Q} ${de} = u_${de};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
attribute ${Y} ${xe} a_${de};
#else
uniform ${Y} ${Q} u_${de};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${Y} ${Q} ${de} = a_${de};
#else
    ${Y} ${Q} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${Y} ${Q} ${de} = unpack_mix_${Pe}(a_${de}, u_${de}_t);
#else
    ${Y} ${Q} ${de} = u_${de};
#endif
`}),staticAttributes:d,staticUniforms:E}}class ol{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,f,y,E,A,F,R){this.context=r;let Y=this.boundPaintVertexBuffers.length!==f.length;for(let Q=0;!Y&&Q<f.length;Q++)this.boundPaintVertexBuffers[Q]!==f[Q]&&(Y=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||Y||this.boundIndexBuffer!==y||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==F||this.boundDynamicVertexBuffer3!==R?this.freshBind(l,d,f,y,E,A,F,R):(r.bindVertexArray.set(this.vao),A&&A.bind(),y&&y.dynamicDraw&&y.bind(),F&&F.bind(),R&&R.bind())}freshBind(r,l,d,f,y,E,A,F){const R=r.numAttributes,Y=this.context,Q=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=F,l.enableAttributes(Q,r);for(const de of d)de.enableAttributes(Q,r);E&&E.enableAttributes(Q,r),A&&A.enableAttributes(Q,r),F&&F.enableAttributes(Q,r),l.bind(),l.setVertexAttribPointers(Q,r,y);for(const de of d)de.bind(),de.setVertexAttribPointers(Q,r,y);E&&(E.bind(),E.setVertexAttribPointers(Q,r,y)),f&&f.bind(),A&&(A.bind(),A.setVertexAttribPointers(Q,r,y)),F&&(F.bind(),F.setVertexAttribPointers(Q,r,y)),Y.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hu=(v,r,l,d,f)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:l,u_fog_color:d?d.properties.get("fog-color"):u.aN.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?d.calculateFogBlendOpacity(f):0,u_horizon_color:d?d.properties.get("horizon-color"):u.aN.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1});function Kr(v){const r=[];for(let l=0;l<v.length;l++){if(v[l]===null)continue;const d=v[l].split(" ");r.push(d.pop())}return r}class sl{constructor(r,l,d,f,y,E){const A=r.gl;this.program=A.createProgram();const F=Kr(l.staticAttributes),R=d?d.getBinderAttributes():[],Y=F.concat(R),Q=Ko.prelude.staticUniforms?Kr(Ko.prelude.staticUniforms):[],de=l.staticUniforms?Kr(l.staticUniforms):[],xe=d?d.getBinderUniforms():[],Pe=Q.concat(de).concat(xe),Oe=[];for(const at of Pe)Oe.indexOf(at)<0&&Oe.push(at);const je=d?d.defines():[];y&&je.push("#define OVERDRAW_INSPECTOR;"),E&&je.push("#define TERRAIN3D;");const Le=je.concat(Ko.prelude.fragmentSource,l.fragmentSource).join(`
`),Xe=je.concat(Ko.prelude.vertexSource,l.vertexSource).join(`
`),ke=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(ke,Le),A.compileShader(ke),!A.getShaderParameter(ke,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(ke)}`);A.attachShader(this.program,ke);const Je=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Je,Xe),A.compileShader(Je),!A.getShaderParameter(Je,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Je)}`);A.attachShader(this.program,Je),this.attributes={};const tt={};this.numAttributes=Y.length;for(let at=0;at<this.numAttributes;at++)Y[at]&&(A.bindAttribLocation(this.program,at,Y[at]),this.attributes[Y[at]]=at);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Je),A.deleteShader(ke);for(let at=0;at<Oe.length;at++){const yt=Oe[at];if(yt&&!tt[yt]){const wt=A.getUniformLocation(this.program,yt);wt&&(tt[yt]=wt)}}this.fixedUniforms=f(r,tt),this.terrainUniforms=((at,yt)=>({u_depth:new u.aI(at,yt.u_depth),u_terrain:new u.aI(at,yt.u_terrain),u_terrain_dim:new u.aJ(at,yt.u_terrain_dim),u_terrain_matrix:new u.aK(at,yt.u_terrain_matrix),u_terrain_unpack:new u.aL(at,yt.u_terrain_unpack),u_terrain_exaggeration:new u.aJ(at,yt.u_terrain_exaggeration)}))(r,tt),this.binderUniforms=d?d.getUniforms(r,tt):[]}draw(r,l,d,f,y,E,A,F,R,Y,Q,de,xe,Pe,Oe,je,Le,Xe){const ke=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(f),r.setColorMode(y),r.setCullFace(E),F){r.activeTexture.set(ke.TEXTURE2),ke.bindTexture(ke.TEXTURE_2D,F.depthTexture),r.activeTexture.set(ke.TEXTURE3),ke.bindTexture(ke.TEXTURE_2D,F.texture);for(const tt in this.terrainUniforms)this.terrainUniforms[tt].set(F[tt])}for(const tt in this.fixedUniforms)this.fixedUniforms[tt].set(A[tt]);Oe&&Oe.setUniforms(r,this.binderUniforms,xe,{zoom:Pe});let Je=0;switch(l){case ke.LINES:Je=2;break;case ke.TRIANGLES:Je=3;break;case ke.LINE_STRIP:Je=1}for(const tt of de.get()){const at=tt.vaos||(tt.vaos={});(at[R]||(at[R]=new ol)).bind(r,this,Y,Oe?Oe.getPaintVertexBuffers():[],Q,tt.vertexOffset,je,Le,Xe),ke.drawElements(l,tt.primitiveLength*Je,ke.UNSIGNED_SHORT,tt.primitiveOffset*Je*2)}}}function al(v,r,l){const d=1/hn(l,1,r.transform.tileZoom),f=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,r.transform.tileZoom)/f,E=y*(l.tileID.canonical.x+l.tileID.wrap*f),A=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[E>>16,A>>16],u_pixel_coord_lower:[65535&E,65535&A]}}const ll=(v,r,l,d)=>{const f=r.style.light,y=f.properties.get("position"),E=[y.x,y.y,y.z],A=function(){var R=new u.A(9);return u.A!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();f.properties.get("anchor")==="viewport"&&function(R,Y){var Q=Math.sin(Y),de=Math.cos(Y);R[0]=de,R[1]=Q,R[2]=0,R[3]=-Q,R[4]=de,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(A,-r.transform.angle),function(R,Y,Q){var de=Y[0],xe=Y[1],Pe=Y[2];R[0]=de*Q[0]+xe*Q[3]+Pe*Q[6],R[1]=de*Q[1]+xe*Q[4]+Pe*Q[7],R[2]=de*Q[2]+xe*Q[5]+Pe*Q[8]}(E,E,A);const F=f.properties.get("color");return{u_matrix:v,u_lightpos:E,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+l,u_opacity:d}},ul=(v,r,l,d,f,y,E)=>u.e(ll(v,r,l,d),al(y,r,E),{u_height_factor:-Math.pow(2,f.overscaledZ)/E.tileSize/8}),xa=v=>({u_matrix:v}),ms=(v,r,l,d)=>u.e(xa(v),al(l,r,d)),du=(v,r)=>({u_matrix:v,u_world:r}),lc=(v,r,l,d,f)=>u.e(ms(v,r,l,d),{u_world:f}),wa=(v,r,l,d)=>{const f=v.transform;let y,E;if(d.paint.get("circle-pitch-alignment")==="map"){const A=hn(l,1,f.zoom);y=!0,E=[A,A]}else y=!1,E=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:E}},Gh=(v,r,l)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:l.cameraToCenterDistance,u_viewport_size:[l.width,l.height]}),gi=(v,r,l=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:l}),ba=v=>({u_matrix:v}),yi=(v,r,l,d)=>({u_matrix:v,u_extrude_scale:hn(r,1,l),u_intensity:d});function vi(v,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Z(0,d/l).toLngLat().lat,new u.Z(0,(d+1)/l).toLngLat().lat]}const Sa=(v,r,l,d)=>{const f=v.transform;return{u_matrix:cl(v,r,l,d),u_ratio:1/hn(r,1,f.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Ea=(v,r,l,d,f)=>u.e(Sa(v,r,l,f),{u_image:0,u_image_height:d}),uc=(v,r,l,d,f)=>{const y=v.transform,E=gs(r,y);return{u_matrix:cl(v,r,l,f),u_texsize:r.imageAtlasTexture.size,u_ratio:1/hn(r,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[E,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},cc=(v,r,l,d,f,y)=>{const E=v.lineAtlas,A=gs(r,v.transform),F=l.layout.get("line-cap")==="round",R=E.getDash(d.from,F),Y=E.getDash(d.to,F),Q=R.width*f.fromScale,de=Y.width*f.toScale;return u.e(Sa(v,r,l,y),{u_patternscale_a:[A/Q,-R.height/2],u_patternscale_b:[A/de,-Y.height/2],u_sdfgamma:E.width/(256*Math.min(Q,de)*v.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:Y.y,u_mix:f.t})};function gs(v,r){return 1/hn(v,1,r.tileZoom)}function cl(v,r,l,d){return v.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Zh=(v,r,l,d,f)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(E=f.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Wh(f.paint.get("raster-hue-rotate"))};var y,E};function Wh(v){v*=Math.PI/180;const r=Math.sin(v),l=Math.cos(v);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const hc=(v,r,l,d,f,y,E,A,F,R,Y,Q,de,xe)=>{const Pe=E.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Pe.cameraToCenterDistance,u_pitch:Pe.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Pe.width/Pe.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:F,u_coord_matrix:R,u_is_text:+Q,u_pitch_with_map:+d,u_is_along_line:f,u_is_variable_anchor:y,u_texsize:de,u_texture:0,u_translation:Y,u_pitched_scale:xe}},dc=(v,r,l,d,f,y,E,A,F,R,Y,Q,de,xe,Pe)=>{const Oe=E.transform;return u.e(hc(v,r,l,d,f,y,E,A,F,R,Y,Q,de,Pe),{u_gamma_scale:d?Math.cos(Oe._pitch)*Oe.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:+xe})},fc=(v,r,l,d,f,y,E,A,F,R,Y,Q,de,xe)=>u.e(dc(v,r,l,d,f,y,E,A,F,R,Y,!0,Q,!0,xe),{u_texsize_icon:de,u_texture_icon:1}),hl=(v,r,l)=>({u_matrix:v,u_opacity:r,u_color:l}),dl=(v,r,l,d,f,y)=>u.e(function(E,A,F,R){const Y=F.imageManager.getPattern(E.from.toString()),Q=F.imageManager.getPattern(E.to.toString()),{width:de,height:xe}=F.imageManager.getPixelSize(),Pe=Math.pow(2,R.tileID.overscaledZ),Oe=R.tileSize*Math.pow(2,F.transform.tileZoom)/Pe,je=Oe*(R.tileID.canonical.x+R.tileID.wrap*Pe),Le=Oe*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[de,xe],u_mix:A.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/hn(R,1,F.transform.tileZoom),u_pixel_coord_upper:[je>>16,Le>>16],u_pixel_coord_lower:[65535&je,65535&Le]}}(d,y,l,f),{u_matrix:v,u_opacity:r}),fl={fillExtrusion:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_lightpos:new u.aO(v,r.u_lightpos),u_lightintensity:new u.aJ(v,r.u_lightintensity),u_lightcolor:new u.aO(v,r.u_lightcolor),u_vertical_gradient:new u.aJ(v,r.u_vertical_gradient),u_opacity:new u.aJ(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_lightpos:new u.aO(v,r.u_lightpos),u_lightintensity:new u.aJ(v,r.u_lightintensity),u_lightcolor:new u.aO(v,r.u_lightcolor),u_vertical_gradient:new u.aJ(v,r.u_vertical_gradient),u_height_factor:new u.aJ(v,r.u_height_factor),u_image:new u.aI(v,r.u_image),u_texsize:new u.aP(v,r.u_texsize),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade),u_opacity:new u.aJ(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_image:new u.aI(v,r.u_image),u_texsize:new u.aP(v,r.u_texsize),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_world:new u.aP(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_world:new u.aP(v,r.u_world),u_image:new u.aI(v,r.u_image),u_texsize:new u.aP(v,r.u_texsize),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_scale_with_map:new u.aI(v,r.u_scale_with_map),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_extrude_scale:new u.aP(v,r.u_extrude_scale),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_matrix:new u.aK(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_pixel_extrude_scale:new u.aP(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_inv_matrix:new u.aK(v,r.u_inv_matrix),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_viewport_size:new u.aP(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new u.aM(v,r.u_color),u_matrix:new u.aK(v,r.u_matrix),u_overlay:new u.aI(v,r.u_overlay),u_overlay_scale:new u.aJ(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new u.aJ(v,r.u_extrude_scale),u_intensity:new u.aJ(v,r.u_intensity),u_matrix:new u.aK(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_world:new u.aP(v,r.u_world),u_image:new u.aI(v,r.u_image),u_color_ramp:new u.aI(v,r.u_color_ramp),u_opacity:new u.aJ(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_image:new u.aI(v,r.u_image),u_latrange:new u.aP(v,r.u_latrange),u_light:new u.aP(v,r.u_light),u_shadow:new u.aM(v,r.u_shadow),u_highlight:new u.aM(v,r.u_highlight),u_accent:new u.aM(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_image:new u.aI(v,r.u_image),u_dimension:new u.aP(v,r.u_dimension),u_zoom:new u.aJ(v,r.u_zoom),u_unpack:new u.aL(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels),u_image:new u.aI(v,r.u_image),u_image_height:new u.aJ(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_texsize:new u.aP(v,r.u_texsize),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_image:new u.aI(v,r.u_image),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels),u_scale:new u.aO(v,r.u_scale),u_fade:new u.aJ(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ratio:new u.aJ(v,r.u_ratio),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aP(v,r.u_units_to_pixels),u_patternscale_a:new u.aP(v,r.u_patternscale_a),u_patternscale_b:new u.aP(v,r.u_patternscale_b),u_sdfgamma:new u.aJ(v,r.u_sdfgamma),u_image:new u.aI(v,r.u_image),u_tex_y_a:new u.aJ(v,r.u_tex_y_a),u_tex_y_b:new u.aJ(v,r.u_tex_y_b),u_mix:new u.aJ(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_tl_parent:new u.aP(v,r.u_tl_parent),u_scale_parent:new u.aJ(v,r.u_scale_parent),u_buffer_scale:new u.aJ(v,r.u_buffer_scale),u_fade_t:new u.aJ(v,r.u_fade_t),u_opacity:new u.aJ(v,r.u_opacity),u_image0:new u.aI(v,r.u_image0),u_image1:new u.aI(v,r.u_image1),u_brightness_low:new u.aJ(v,r.u_brightness_low),u_brightness_high:new u.aJ(v,r.u_brightness_high),u_saturation_factor:new u.aJ(v,r.u_saturation_factor),u_contrast_factor:new u.aJ(v,r.u_contrast_factor),u_spin_weights:new u.aO(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new u.aI(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(v,r.u_is_size_feature_constant),u_size_t:new u.aJ(v,r.u_size_t),u_size:new u.aJ(v,r.u_size),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_pitch:new u.aJ(v,r.u_pitch),u_rotate_symbol:new u.aI(v,r.u_rotate_symbol),u_aspect_ratio:new u.aJ(v,r.u_aspect_ratio),u_fade_change:new u.aJ(v,r.u_fade_change),u_matrix:new u.aK(v,r.u_matrix),u_label_plane_matrix:new u.aK(v,r.u_label_plane_matrix),u_coord_matrix:new u.aK(v,r.u_coord_matrix),u_is_text:new u.aI(v,r.u_is_text),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_is_along_line:new u.aI(v,r.u_is_along_line),u_is_variable_anchor:new u.aI(v,r.u_is_variable_anchor),u_texsize:new u.aP(v,r.u_texsize),u_texture:new u.aI(v,r.u_texture),u_translation:new u.aP(v,r.u_translation),u_pitched_scale:new u.aJ(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new u.aI(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(v,r.u_is_size_feature_constant),u_size_t:new u.aJ(v,r.u_size_t),u_size:new u.aJ(v,r.u_size),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_pitch:new u.aJ(v,r.u_pitch),u_rotate_symbol:new u.aI(v,r.u_rotate_symbol),u_aspect_ratio:new u.aJ(v,r.u_aspect_ratio),u_fade_change:new u.aJ(v,r.u_fade_change),u_matrix:new u.aK(v,r.u_matrix),u_label_plane_matrix:new u.aK(v,r.u_label_plane_matrix),u_coord_matrix:new u.aK(v,r.u_coord_matrix),u_is_text:new u.aI(v,r.u_is_text),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_is_along_line:new u.aI(v,r.u_is_along_line),u_is_variable_anchor:new u.aI(v,r.u_is_variable_anchor),u_texsize:new u.aP(v,r.u_texsize),u_texture:new u.aI(v,r.u_texture),u_gamma_scale:new u.aJ(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_is_halo:new u.aI(v,r.u_is_halo),u_translation:new u.aP(v,r.u_translation),u_pitched_scale:new u.aJ(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new u.aI(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aI(v,r.u_is_size_feature_constant),u_size_t:new u.aJ(v,r.u_size_t),u_size:new u.aJ(v,r.u_size),u_camera_to_center_distance:new u.aJ(v,r.u_camera_to_center_distance),u_pitch:new u.aJ(v,r.u_pitch),u_rotate_symbol:new u.aI(v,r.u_rotate_symbol),u_aspect_ratio:new u.aJ(v,r.u_aspect_ratio),u_fade_change:new u.aJ(v,r.u_fade_change),u_matrix:new u.aK(v,r.u_matrix),u_label_plane_matrix:new u.aK(v,r.u_label_plane_matrix),u_coord_matrix:new u.aK(v,r.u_coord_matrix),u_is_text:new u.aI(v,r.u_is_text),u_pitch_with_map:new u.aI(v,r.u_pitch_with_map),u_is_along_line:new u.aI(v,r.u_is_along_line),u_is_variable_anchor:new u.aI(v,r.u_is_variable_anchor),u_texsize:new u.aP(v,r.u_texsize),u_texsize_icon:new u.aP(v,r.u_texsize_icon),u_texture:new u.aI(v,r.u_texture),u_texture_icon:new u.aI(v,r.u_texture_icon),u_gamma_scale:new u.aJ(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aJ(v,r.u_device_pixel_ratio),u_is_halo:new u.aI(v,r.u_is_halo),u_translation:new u.aP(v,r.u_translation),u_pitched_scale:new u.aJ(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_opacity:new u.aJ(v,r.u_opacity),u_color:new u.aM(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_opacity:new u.aJ(v,r.u_opacity),u_image:new u.aI(v,r.u_image),u_pattern_tl_a:new u.aP(v,r.u_pattern_tl_a),u_pattern_br_a:new u.aP(v,r.u_pattern_br_a),u_pattern_tl_b:new u.aP(v,r.u_pattern_tl_b),u_pattern_br_b:new u.aP(v,r.u_pattern_br_b),u_texsize:new u.aP(v,r.u_texsize),u_mix:new u.aJ(v,r.u_mix),u_pattern_size_a:new u.aP(v,r.u_pattern_size_a),u_pattern_size_b:new u.aP(v,r.u_pattern_size_b),u_scale_a:new u.aJ(v,r.u_scale_a),u_scale_b:new u.aJ(v,r.u_scale_b),u_pixel_coord_upper:new u.aP(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aP(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aJ(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_texture:new u.aI(v,r.u_texture),u_ele_delta:new u.aJ(v,r.u_ele_delta),u_fog_matrix:new u.aK(v,r.u_fog_matrix),u_fog_color:new u.aM(v,r.u_fog_color),u_fog_ground_blend:new u.aJ(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aJ(v,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aM(v,r.u_horizon_color),u_horizon_fog_blend:new u.aJ(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_ele_delta:new u.aJ(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new u.aK(v,r.u_matrix),u_texture:new u.aI(v,r.u_texture),u_terrain_coords_id:new u.aJ(v,r.u_terrain_coords_id),u_ele_delta:new u.aJ(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new u.aM(v,r.u_sky_color),u_horizon_color:new u.aM(v,r.u_horizon_color),u_horizon:new u.aJ(v,r.u_horizon),u_sky_horizon_blend:new u.aJ(v,r.u_sky_horizon_blend)})};class fu{constructor(r,l,d){this.context=r;const f=r.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ro{constructor(r,l,d,f){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=f,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const f=l.attributes[this.attributes[d].name];f!==void 0&&r.enableVertexAttribArray(f)}}setVertexAttribPointers(r,l,d){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],E=l.attributes[y.name];E!==void 0&&r.vertexAttribPointer(E,y.components,r[pl[y.type]],!1,this.itemSize,y.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pu=new WeakMap;function Bs(v){var r;if(pu.has(v))return pu.get(v);{const l=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return pu.set(v,l),l}}class An{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ns extends An{getDefault(){return u.aN.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Hh extends An{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Us extends An{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Xh extends An{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class $s extends An{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Kh extends An{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class pc extends An{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class qh extends An{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class mc extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class ml extends An{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class gl extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class gc extends An{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class yc extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class vc extends An{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class ys extends An{getDefault(){return u.aN.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class mu extends An{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Jh extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class Yh extends An{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class _c extends An{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Ta extends An{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class yl extends An{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class vl extends An{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Vs extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xc extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Gi extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class wc extends An{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class bc extends An{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class gu extends An{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const d=this.gl;Bs(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Sc extends An{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Gs extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class yo extends An{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class qo extends An{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class yu extends qo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class vu extends qo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ca extends qo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _l{constructor(r,l,d,f,y){this.context=r,this.width=l,this.height=d;const E=r.gl,A=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new yu(r,A),f)this.depthAttachment=y?new Ca(r,A):new vu(r,A);else if(y)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Gn{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}Gn.Replace=[1,0],Gn.disabled=new Gn(Gn.Replace,u.aN.transparent,[!1,!1,!1,!1]),Gn.unblended=new Gn(Gn.Replace,u.aN.transparent,[!0,!0,!0,!0]),Gn.alphaBlended=new Gn([1,771],u.aN.transparent,[!0,!0,!0,!0]);class _u{constructor(r){var l,d;if(this.gl=r,this.clearColor=new Ns(this),this.clearDepth=new Hh(this),this.clearStencil=new Us(this),this.colorMask=new Xh(this),this.depthMask=new $s(this),this.stencilMask=new Kh(this),this.stencilFunc=new pc(this),this.stencilOp=new qh(this),this.stencilTest=new mc(this),this.depthRange=new ml(this),this.depthTest=new gl(this),this.depthFunc=new gc(this),this.blend=new yc(this),this.blendFunc=new vc(this),this.blendColor=new ys(this),this.blendEquation=new mu(this),this.cullFace=new Jh(this),this.cullFaceSide=new Yh(this),this.frontFace=new _c(this),this.program=new Ta(this),this.activeTexture=new yl(this),this.viewport=new vl(this),this.bindFramebuffer=new Vs(this),this.bindRenderbuffer=new xc(this),this.bindTexture=new Gi(this),this.bindVertexBuffer=new wc(this),this.bindElementBuffer=new bc(this),this.bindVertexArray=new gu(this),this.pixelStoreUnpack=new Sc(this),this.pixelStoreUnpackPremultiplyAlpha=new Gs(this),this.pixelStoreUnpackFlipY=new yo(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Bs(r)){this.HALF_FLOAT=r.HALF_FLOAT;const f=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:f==null?void 0:f.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:f==null?void 0:f.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const f=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=f==null?void 0:f.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new fu(this,r,l)}createVertexBuffer(r,l,d){return new ro(this,r,l,d)}createRenderbuffer(r,l,d){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),y}createFramebuffer(r,l,d,f){return new _l(this,r,l,d,f)}clear({color:r,depth:l,stencil:d}){const f=this.gl;let y=0;r&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(y|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),f.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aF(r.blendFunction,Gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Bs(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Bs(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class bn{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}bn.ReadOnly=!1,bn.ReadWrite=!0,bn.disabled=new bn(519,bn.ReadOnly,[0,1]);const Zs=7680;class Ln{constructor(r,l,d,f,y,E){this.test=r,this.ref=l,this.mask=d,this.fail=f,this.depthFail=y,this.pass=E}}Ln.disabled=new Ln({func:519,mask:0},0,0,Zs,Zs,Zs);class Kn{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let Ws;function Pa(v,r,l,d,f){const y=v.context,E=y.gl,A=v.useProgram("collisionBox"),F=[];let R=0,Y=0;for(let Le=0;Le<d.length;Le++){const Xe=d[Le],ke=r.getTile(Xe).getBucket(l);if(!ke)continue;const Je=f?ke.textCollisionBox:ke.iconCollisionBox,tt=ke.collisionCircleArray;if(tt.length>0){const at=u.H();u.aR(at,ke.placementInvProjMatrix,v.transform.glCoordMatrix),u.aR(at,at,ke.placementViewportMatrix),F.push({circleArray:tt,circleOffset:Y,transform:Xe.posMatrix,invTransform:at,coord:Xe}),R+=tt.length/4,Y=R}Je&&A.draw(y,E.LINES,bn.disabled,Ln.disabled,v.colorModeForRenderPass(),Kn.disabled,{u_matrix:Xe.posMatrix,u_pixel_extrude_scale:[1/(Q=v.transform).width,1/Q.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(Xe),l.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,v.transform.zoom,null,null,Je.collisionVertexBuffer)}var Q;if(!f||!F.length)return;const de=v.useProgram("collisionCircle"),xe=new u.aS;xe.resize(4*R),xe._trim();let Pe=0;for(const Le of F)for(let Xe=0;Xe<Le.circleArray.length/4;Xe++){const ke=4*Xe,Je=Le.circleArray[ke+0],tt=Le.circleArray[ke+1],at=Le.circleArray[ke+2],yt=Le.circleArray[ke+3];xe.emplace(Pe++,Je,tt,at,yt,0),xe.emplace(Pe++,Je,tt,at,yt,1),xe.emplace(Pe++,Je,tt,at,yt,2),xe.emplace(Pe++,Je,tt,at,yt,3)}(!Ws||Ws.length<2*R)&&(Ws=function(Le){const Xe=2*Le,ke=new u.aU;ke.resize(Xe),ke._trim();for(let Je=0;Je<Xe;Je++){const tt=6*Je;ke.uint16[tt+0]=4*Je+0,ke.uint16[tt+1]=4*Je+1,ke.uint16[tt+2]=4*Je+2,ke.uint16[tt+3]=4*Je+2,ke.uint16[tt+4]=4*Je+3,ke.uint16[tt+5]=4*Je+0}return ke}(R));const Oe=y.createIndexBuffer(Ws,!0),je=y.createVertexBuffer(xe,u.aT.members,!0);for(const Le of F){const Xe=Gh(Le.transform,Le.invTransform,v.transform);de.draw(y,E.TRIANGLES,bn.disabled,Ln.disabled,v.colorModeForRenderPass(),Kn.disabled,Xe,v.style.map.terrain&&v.style.map.terrain.getTerrainData(Le.coord),l.id,je,Oe,u.a0.simpleSegment(0,2*Le.circleOffset,Le.circleArray.length,Le.circleArray.length/2),null,v.transform.zoom,null,null,null)}je.destroy(),Oe.destroy()}Kn.disabled=new Kn(!1,1029,2305),Kn.backCCW=new Kn(!0,1029,2305);const xu=u.ao(new Float32Array(16));function vo(v,r,l,d,f,y){const{horizontalAlign:E,verticalAlign:A}=u.av(v);return new u.P((-(E-.5)*r/f+d[0])*y,(-(A-.5)*l/f+d[1])*y)}function _o(v,r,l,d,f,y){const E=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let A=d.mult(y);return l||(A=A.rotate(-f)),ze(E.add(A),r.labelPlaneMatrix,r.getElevation).point}if(l){const A=st(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),F=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return v.add(d.rotate(F))}return v.add(d)}function Fr(v,r,l,d,f,y,E,A,F,R,Y,Q,de,xe){const Pe=v.text.placedSymbolArray,Oe=v.text.dynamicLayoutVertexArray,je=v.icon.dynamicLayoutVertexArray,Le={};Oe.clear();for(let Xe=0;Xe<Pe.length;Xe++){const ke=Pe.get(Xe),Je=ke.hidden||!ke.crossTileID||v.allowVerticalPlacement&&!ke.placedOrientation?null:d[ke.crossTileID];if(Je){const tt=new u.P(ke.anchorX,ke.anchorY),at={getElevation:xe,width:f.width,height:f.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:l,projection:Y,projectionCache:null,tileAnchorPoint:tt,translation:Q,unwrappedTileID:de},yt=l?ze(tt,E,xe):st(tt.x,tt.y,at),wt=se(f.cameraToCenterDistance,yt.signedDistanceFromCamera);let Lt=u.aj(v.textSizeData,F,ke)*wt/u.aq;l&&(Lt*=v.tilePixelRatio/A);const{width:Bt,height:bt,anchor:Tt,textOffset:Zt,textBoxScale:mn}=Je,At=vo(Tt,Bt,bt,Zt,mn,Lt),jt=Y.getPitchedTextCorrection(f,tt.add(new u.P(Q[0],Q[1])),de),cn=_o(yt.point,at,r,At,f.angle,jt),ir=v.allowVerticalPlacement&&ke.placedOrientation===u.ai.vertical?Math.PI/2:0;for(let xn=0;xn<ke.numGlyphs;xn++)u.ak(Oe,cn,ir);R&&ke.associatedIconIndex>=0&&(Le[ke.associatedIconIndex]={shiftedAnchor:cn,angle:ir})}else tn(ke.numGlyphs,Oe)}if(R){je.clear();const Xe=v.icon.placedSymbolArray;for(let ke=0;ke<Xe.length;ke++){const Je=Xe.get(ke);if(Je.hidden)tn(Je.numGlyphs,je);else{const tt=Le[ke];if(tt)for(let at=0;at<Je.numGlyphs;at++)u.ak(je,tt.shiftedAnchor,tt.angle);else tn(Je.numGlyphs,je)}}v.icon.dynamicLayoutVertexBuffer.updateData(je)}v.text.dynamicLayoutVertexBuffer.updateData(Oe)}function xo(v,r,l){return l.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function io(v,r,l,d,f,y,E,A,F,R,Y,Q){const de=v.context,xe=de.gl,Pe=v.transform,Oe=rl(),je=A==="map",Le=F==="map",Xe=A!=="viewport"&&l.layout.get("symbol-placement")!=="point",ke=je&&!Le&&!Xe,Je=!Le&&Xe,tt=!l.layout.get("symbol-sort-key").isConstant();let at=!1;const yt=v.depthModeForSublayer(0,bn.ReadOnly),wt=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Lt=[],Bt=Oe.getCircleRadiusCorrection(Pe);for(const bt of d){const Tt=r.getTile(bt),Zt=Tt.getBucket(l);if(!Zt)continue;const mn=f?Zt.text:Zt.icon;if(!mn||!mn.segments.get().length||!mn.hasVisibleVertices)continue;const At=mn.programConfigurations.get(l.id),jt=f||Zt.sdfIcons,cn=f?Zt.textSizeData:Zt.iconSizeData,ir=Le||Pe.pitch!==0,xn=v.useProgram(xo(jt,f,Zt),At),Cn=u.ah(cn,Pe.zoom),or=v.style.map.terrain&&v.style.map.terrain.getTerrainData(bt);let ti,Co,sr,zi,wi=[0,0],ni=null;if(f)Co=Tt.glyphAtlasTexture,sr=xe.LINEAR,ti=Tt.glyphAtlasTexture.size,Zt.iconsInText&&(wi=Tt.imageAtlasTexture.size,ni=Tt.imageAtlasTexture,zi=ir||v.options.rotating||v.options.zooming||cn.kind==="composite"||cn.kind==="camera"?xe.LINEAR:xe.NEAREST);else{const ur=l.layout.get("icon-size").constantOr(0)!==1||Zt.iconsNeedLinear;Co=Tt.imageAtlasTexture,sr=jt||v.options.rotating||v.options.zooming||ur||ir?xe.LINEAR:xe.NEAREST,ti=Tt.imageAtlasTexture.size}const ri=hn(Tt,1,v.transform.zoom),Po=Je?bt.posMatrix:xu,Fa=Ii(Po,Le,je,v.transform,ri),Pc=Ur(Po,Le,je,v.transform,ri),El=Ur(bt.posMatrix,Le,je,v.transform,ri),ja=Oe.translatePosition(v.transform,Tt,y,E),Ic=wt&&Zt.hasTextData(),_d=l.layout.get("icon-text-fit")!=="none"&&Ic&&Zt.hasIconData();if(Xe){const ur=v.style.map.terrain?(xd,Dr)=>v.style.map.terrain.getElevation(bt,xd,Dr):null,Cl=l.layout.get("text-rotation-alignment")==="map";we(Zt,bt.posMatrix,v,f,Fa,El,Le,R,Cl,Oe,bt.toUnwrapped(),Pe.width,Pe.height,ja,ur)}const qr=bt.posMatrix,Io=f&&wt||_d,Ys=Xe||Io?xu:Fa,Tl=Pc,ii=jt&&l.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=jt?Zt.iconsInText?fc(cn.kind,Cn,ke,Le,Xe,Io,v,qr,Ys,Tl,ja,ti,wi,Bt):dc(cn.kind,Cn,ke,Le,Xe,Io,v,qr,Ys,Tl,ja,f,ti,!0,Bt):hc(cn.kind,Cn,ke,Le,Xe,Io,v,qr,Ys,Tl,ja,f,ti,Bt);const Zr={program:xn,buffers:mn,uniformValues:oi,atlasTexture:Co,atlasTextureIcon:ni,atlasInterpolation:sr,atlasInterpolationIcon:zi,isSDF:jt,hasHalo:ii};if(tt&&Zt.canOverlap){at=!0;const ur=mn.segments.get();for(const Cl of ur)Lt.push({segments:new u.a0([Cl]),sortKey:Cl.sortKey,state:Zr,terrainData:or})}else Lt.push({segments:mn.segments,sortKey:0,state:Zr,terrainData:or})}at&&Lt.sort((bt,Tt)=>bt.sortKey-Tt.sortKey);for(const bt of Lt){const Tt=bt.state;if(de.activeTexture.set(xe.TEXTURE0),Tt.atlasTexture.bind(Tt.atlasInterpolation,xe.CLAMP_TO_EDGE),Tt.atlasTextureIcon&&(de.activeTexture.set(xe.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,xe.CLAMP_TO_EDGE)),Tt.isSDF){const Zt=Tt.uniformValues;Tt.hasHalo&&(Zt.u_is_halo=1,wo(Tt.buffers,bt.segments,l,v,Tt.program,yt,Y,Q,Zt,bt.terrainData)),Zt.u_is_halo=0}wo(Tt.buffers,bt.segments,l,v,Tt.program,yt,Y,Q,Tt.uniformValues,bt.terrainData)}}function wo(v,r,l,d,f,y,E,A,F,R){const Y=d.context;f.draw(Y,Y.gl.TRIANGLES,y,E,A,Kn.disabled,F,R,l.id,v.layoutVertexBuffer,v.indexBuffer,r,l.paint,d.transform.zoom,v.programConfigurations.get(l.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function _i(v,r,l,d,f){if(!l||!d||!d.imageAtlas)return;const y=d.imageAtlas.patternPositions;let E=y[l.to.toString()],A=y[l.from.toString()];if(!E&&A&&(E=A),!A&&E&&(A=E),!E||!A){const F=f.getPaintProperty(r);E=y[F],A=y[F]}E&&A&&v.setConstantPatternPositions(E,A)}function Hs(v,r,l,d,f,y,E){const A=v.context.gl,F="fill-pattern",R=l.paint.get(F),Y=R&&R.constantOr(1),Q=l.getCrossfadeParameters();let de,xe,Pe,Oe,je;E?(xe=Y&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=A.LINES):(xe=Y?"fillPattern":"fill",de=A.TRIANGLES);const Le=R.constantOr(null);for(const Xe of d){const ke=r.getTile(Xe);if(Y&&!ke.patternsLoaded())continue;const Je=ke.getBucket(l);if(!Je)continue;const tt=Je.programConfigurations.get(l.id),at=v.useProgram(xe,tt),yt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Xe);Y&&(v.context.activeTexture.set(A.TEXTURE0),ke.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),tt.updatePaintBuffers(Q)),_i(tt,F,Le,ke,l);const wt=yt?Xe:null,Lt=v.translatePosMatrix(wt?wt.posMatrix:Xe.posMatrix,ke,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(E){Oe=Je.indexBuffer2,je=Je.segments2;const Bt=[A.drawingBufferWidth,A.drawingBufferHeight];Pe=xe==="fillOutlinePattern"&&Y?lc(Lt,v,Q,ke,Bt):du(Lt,Bt)}else Oe=Je.indexBuffer,je=Je.segments,Pe=Y?ms(Lt,v,Q,ke):xa(Lt);at.draw(v.context,de,f,v.stencilModeForClipping(Xe),y,Kn.disabled,Pe,yt,l.id,Je.layoutVertexBuffer,Oe,je,l.paint,v.transform.zoom,tt)}}function vs(v,r,l,d,f,y,E){const A=v.context,F=A.gl,R="fill-extrusion-pattern",Y=l.paint.get(R),Q=Y.constantOr(1),de=l.getCrossfadeParameters(),xe=l.paint.get("fill-extrusion-opacity"),Pe=Y.constantOr(null);for(const Oe of d){const je=r.getTile(Oe),Le=je.getBucket(l);if(!Le)continue;const Xe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe),ke=Le.programConfigurations.get(l.id),Je=v.useProgram(Q?"fillExtrusionPattern":"fillExtrusion",ke);Q&&(v.context.activeTexture.set(F.TEXTURE0),je.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),ke.updatePaintBuffers(de)),_i(ke,R,Pe,je,l);const tt=v.translatePosMatrix(Oe.posMatrix,je,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),at=l.paint.get("fill-extrusion-vertical-gradient"),yt=Q?ul(tt,v,at,xe,Oe,de,je):ll(tt,v,at,xe);Je.draw(A,A.gl.TRIANGLES,f,y,E,Kn.backCCW,yt,Xe,l.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,l.paint,v.transform.zoom,ke,v.style.map.terrain&&Le.centroidVertexBuffer)}}function xi(v,r,l,d,f,y,E){const A=v.context,F=A.gl,R=l.fbo;if(!R)return;const Y=v.useProgram("hillshade"),Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);A.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,R.colorAttachment.get()),Y.draw(A,F.TRIANGLES,f,y,E,Kn.disabled,((de,xe,Pe,Oe)=>{const je=Pe.paint.get("hillshade-shadow-color"),Le=Pe.paint.get("hillshade-highlight-color"),Xe=Pe.paint.get("hillshade-accent-color");let ke=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(ke-=de.transform.angle);const Je=!de.options.moving;return{u_matrix:Oe?Oe.posMatrix:de.transform.calculatePosMatrix(xe.tileID.toUnwrapped(),Je),u_image:0,u_latrange:vi(0,xe.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),ke],u_shadow:je,u_highlight:Le,u_accent:Xe}})(v,l,d,Q?r:null),Q,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Ai(v,r,l,d,f,y){const E=v.context,A=E.gl,F=r.dem;if(F&&F.data){const R=F.dim,Y=F.stride,Q=F.getPixels();if(E.activeTexture.set(A.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(Y),r.demTexture){const xe=r.demTexture;xe.update(Q,{premultiply:!1}),xe.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else r.demTexture=new H(E,Q,A.RGBA,{premultiply:!1}),r.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);E.activeTexture.set(A.TEXTURE0);let de=r.fbo;if(!de){const xe=new H(E,{width:R,height:R,data:null},A.RGBA);xe.bind(A.LINEAR,A.CLAMP_TO_EDGE),de=r.fbo=E.createFramebuffer(R,R,!0,!1),de.colorAttachment.set(xe.texture)}E.bindFramebuffer.set(de.framebuffer),E.viewport.set([0,0,R,R]),v.useProgram("hillshadePrepare").draw(E,A.TRIANGLES,d,f,y,Kn.disabled,((xe,Pe)=>{const Oe=Pe.stride,je=u.H();return u.aQ(je,0,u.X,-u.X,0,0,1),u.J(je,je,[0,-u.X,0]),{u_matrix:je,u_image:1,u_dimension:[Oe,Oe],u_zoom:xe.overscaledZ,u_unpack:Pe.getUnpackVector()}})(r.tileID,F),null,l.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Ia(v,r,l,d,f,y){const E=d.paint.get("raster-fade-duration");if(!y&&E>0){const A=b.now(),F=(A-v.timeAdded)/E,R=r?(A-r.timeAdded)/E:-1,Y=l.getSource(),Q=f.coveringZoomLevel({tileSize:Y.tileSize,roundZoom:Y.roundZoom}),de=!r||Math.abs(r.tileID.overscaledZ-Q)>Math.abs(v.tileID.overscaledZ-Q),xe=de&&v.refreshedUponExpiration?1:u.ad(de?F:1-R,0,1);return v.refreshedUponExpiration&&F>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-xe}:{opacity:xe,mix:0}}return{opacity:1,mix:0}}const _s=new u.aN(1,0,0,1),Jo=new u.aN(0,1,0,1),Aa=new u.aN(0,0,1,1),wu=new u.aN(1,0,1,1),xs=new u.aN(0,1,1,1);function Yo(v,r,l,d){ws(v,0,r+l/2,v.transform.width,l,d)}function oo(v,r,l,d){ws(v,r-l/2,0,l,v.transform.height,d)}function ws(v,r,l,d,f,y){const E=v.context,A=E.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*v.pixelRatio,l*v.pixelRatio,d*v.pixelRatio,f*v.pixelRatio),E.clear({color:y}),A.disable(A.SCISSOR_TEST)}function zn(v,r,l){const d=v.context,f=d.gl,y=l.posMatrix,E=v.useProgram("debug"),A=bn.disabled,F=Ln.disabled,R=v.colorModeForRenderPass(),Y="$debug",Q=v.style.map.terrain&&v.style.map.terrain.getTerrainData(l);d.activeTexture.set(f.TEXTURE0);const de=r.getTileByID(l.key).latestRawTileData,xe=Math.floor((de&&de.byteLength||0)/1024),Pe=r.getTile(l).tileSize,Oe=512/Math.min(Pe,512)*(l.overscaledZ/v.transform.zoom)*.5;let je=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(je+=` => ${l.overscaledZ}`),function(Le,Xe){Le.initDebugOverlayCanvas();const ke=Le.debugOverlayCanvas,Je=Le.context.gl,tt=Le.debugOverlayCanvas.getContext("2d");tt.clearRect(0,0,ke.width,ke.height),tt.shadowColor="white",tt.shadowBlur=2,tt.lineWidth=1.5,tt.strokeStyle="white",tt.textBaseline="top",tt.font="bold 36px Open Sans, sans-serif",tt.fillText(Xe,5,5),tt.strokeText(Xe,5,5),Le.debugOverlayTexture.update(ke),Le.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(v,`${je} ${xe}kB`),E.draw(d,f.TRIANGLES,A,F,Gn.alphaBlended,Kn.disabled,gi(y,u.aN.transparent,Oe),null,Y,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),E.draw(d,f.LINE_STRIP,A,F,R,Kn.disabled,gi(y,u.aN.red),Q,Y,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Xs(v,r,l){const d=v.context,f=d.gl,y=v.colorModeForRenderPass(),E=new bn(f.LEQUAL,bn.ReadWrite,v.depthRangeFor3D),A=v.useProgram("terrain"),F=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,v.width,v.height]);for(const R of l){const Y=v.renderToTexture.getTexture(R),Q=r.getTerrainData(R.tileID);d.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,Y.texture);const de=v.transform.calculatePosMatrix(R.tileID.toUnwrapped()),xe=r.getMeshFrameDelta(v.transform.zoom),Pe=v.transform.calculateFogMatrix(R.tileID.toUnwrapped()),Oe=hu(de,xe,Pe,v.style.sky,v.transform.pitch);A.draw(d,f.TRIANGLES,E,Ln.disabled,y,Kn.backCCW,Oe,Q,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}}class xl{constructor(r,l,d){this.vertexBuffer=r,this.indexBuffer=l,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class bu{constructor(r,l){this.context=new _u(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ao(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new _r}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const r=this.context,l=new u.aX;l.emplaceBack(0,0),l.emplaceBack(u.X,0),l.emplaceBack(0,u.X),l.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(l,_a.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const d=new u.aX;d.emplaceBack(0,0),d.emplaceBack(u.X,0),d.emplaceBack(0,u.X),d.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(d,_a.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const f=new u.$;f.emplaceBack(0,0,0,0),f.emplaceBack(u.X,0,u.X,0),f.emplaceBack(0,u.X,0,u.X),f.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(f,D.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,_a.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const E=new u.aZ;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(E);const A=new u.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(A);const F=this.context.gl;this.stencilClearMode=new Ln({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.H();u.aQ(d,0,this.width,this.height,0,0,1),u.K(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,bn.disabled,this.stencilClearMode,Gn.disabled,Kn.disabled,ba(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,f=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Gn.disabled),d.setDepthMode(bn.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of l){const A=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);y.draw(d,f.TRIANGLES,bn.disabled,new Ln({func:f.ALWAYS,mask:0},A,255,f.KEEP,f.KEEP,f.REPLACE),Gn.disabled,Kn.disabled,ba(E.posMatrix),F,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new Ln({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new Ln({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((E,A)=>A.overscaledZ-E.overscaledZ),f=d[d.length-1].overscaledZ,y=d[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const E={};for(let A=0;A<y;A++)E[A+f]=new Ln({func:l.GEQUAL,mask:255},A+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=y,[E,d]}return[{[f]:Ln.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Gn([r.CONSTANT_COLOR,r.ONE],new u.aN(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gn.unblended:Gn.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return bn.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new bn(d||this.context.gl.LEQUAL,l,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){var d;this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const f=this.style._order,y=this.style.sourceCaches,E={},A={},F={};for(const R in y){const Y=y[R];Y.used&&Y.prepare(this.context),E[R]=Y.getVisibleCoordinates(),A[R]=E[R].slice().reverse(),F[R]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<f.length;R++)if(this.style._layers[f[R]].is3D()){this.opaquePassCutoff=R;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const R of f){const Y=this.style._layers[R];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const Q=A[Y.source];(Y.type==="custom"||Q.length)&&this.renderLayer(this,y[Y.source],Y,Q)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aN.black:u.aN.transparent,depth:1}),this.clearStencil(),!((d=this.style.stylesheet)===null||d===void 0)&&d.sky&&function(R,Y){const Q=R.context,de=Q.gl,xe=((Xe,ke,Je)=>({u_sky_color:Xe.properties.get("sky-color"),u_horizon_color:Xe.properties.get("horizon-color"),u_horizon:(ke.height/2+ke.getHorizon())*Je,u_sky_horizon_blend:Xe.properties.get("sky-horizon-blend")*ke.height/2*Je}))(Y,R.style.map.transform,R.pixelRatio),Pe=new bn(de.LEQUAL,bn.ReadWrite,[0,1]),Oe=Ln.disabled,je=R.colorModeForRenderPass(),Le=R.useProgram("sky");if(!Y.mesh){const Xe=new u.aX;Xe.emplaceBack(-1,-1),Xe.emplaceBack(1,-1),Xe.emplaceBack(1,1),Xe.emplaceBack(-1,1);const ke=new u.aY;ke.emplaceBack(0,1,2),ke.emplaceBack(0,2,3),Y.mesh=new xl(Q.createVertexBuffer(Xe,_a.members),Q.createIndexBuffer(ke),u.a0.simpleSegment(0,0,Xe.length,ke.length))}Le.draw(Q,de.TRIANGLES,Pe,Oe,je,Kn.disabled,xe,void 0,"sky",Y.mesh.vertexBuffer,Y.mesh.indexBuffer,Y.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[f[this.currentLayer]],Y=y[R.source],Q=E[R.source];this._renderTileClippingMasks(R,Q),this.renderLayer(this,Y,R,Q)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const R=this.style._layers[f[this.currentLayer]],Y=y[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const Q=(R.type==="symbol"?F:A)[R.source];this._renderTileClippingMasks(R,E[R.source]),this.renderLayer(this,Y,R,Q)}if(this.options.showTileBoundaries){const R=function(Y,Q){let de=null;const xe=Object.values(Y._layers).flatMap(Le=>Le.source&&!Le.isHidden(Q)?[Y.sourceCaches[Le.source]]:[]),Pe=xe.filter(Le=>Le.getSource().type==="vector"),Oe=xe.filter(Le=>Le.getSource().type!=="vector"),je=Le=>{(!de||de.getSource().maxzoom<Le.getSource().maxzoom)&&(de=Le)};return Pe.forEach(Le=>je(Le)),de||Oe.forEach(Le=>je(Le)),de}(this.style,this.transform.zoom);R&&function(Y,Q,de){for(let xe=0;xe<de.length;xe++)zn(Y,Q,de[xe])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const Y=R.transform.padding;Yo(R,R.transform.height-(Y.top||0),3,_s),Yo(R,Y.bottom||0,3,Jo),oo(R,Y.left||0,3,Aa),oo(R,R.transform.width-(Y.right||0),3,wu);const Q=R.transform.centerPoint;(function(de,xe,Pe,Oe){ws(de,xe-1,Pe-10,2,20,Oe),ws(de,xe-10,Pe-1,20,2,Oe)})(R,Q.x,R.transform.height-Q.y,xs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let f=this.terrainFacilitator.dirty;f||(f=r?!u.a_(l,d):!u.a$(l,d)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(u.b0(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,E){const A=y.context,F=A.gl,R=Gn.unblended,Y=new bn(F.LEQUAL,bn.ReadWrite,[0,1]),Q=E.getTerrainMesh(),de=E.sourceCache.getRenderableTiles(),xe=y.useProgram("terrainDepth");A.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:u.aN.transparent,depth:1});for(const Pe of de){const Oe=E.getTerrainData(Pe.tileID),je={u_matrix:y.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:E.getMeshFrameDelta(y.transform.zoom)};xe.draw(A,F.TRIANGLES,Y,Ln.disabled,R,Kn.backCCW,je,Oe,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,E){const A=y.context,F=A.gl,R=Gn.unblended,Y=new bn(F.LEQUAL,bn.ReadWrite,[0,1]),Q=E.getTerrainMesh(),de=E.getCoordsTexture(),xe=E.sourceCache.getRenderableTiles(),Pe=y.useProgram("terrainCoords");A.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),A.clear({color:u.aN.transparent,depth:1}),E.coordsIndex=[];for(const Oe of xe){const je=E.getTerrainData(Oe.tileID);A.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,de.texture);const Le={u_matrix:y.transform.calculatePosMatrix(Oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(y.transform.zoom)};Pe.draw(A,F.TRIANGLES,Y,Ln.disabled,R,Kn.backCCW,Le,je,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),E.coordsIndex.push(Oe.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,l,d,f){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(f||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(y,E,A,F,R){if(y.renderPass!=="translucent")return;const Y=Ln.disabled,Q=y.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(de,xe,Pe,Oe,je,Le,Xe,ke,Je){const tt=xe.transform,at=rl(),yt=je==="map",wt=Le==="map";for(const Lt of de){const Bt=Oe.getTile(Lt),bt=Bt.getBucket(Pe);if(!bt||!bt.text||!bt.text.segments.get().length)continue;const Tt=u.ah(bt.textSizeData,tt.zoom),Zt=hn(Bt,1,xe.transform.zoom),mn=Ii(Lt.posMatrix,wt,yt,xe.transform,Zt),At=Pe.layout.get("icon-text-fit")!=="none"&&bt.hasIconData();if(Tt){const jt=Math.pow(2,tt.zoom-Bt.tileID.overscaledZ),cn=xe.style.map.terrain?(xn,Cn)=>xe.style.map.terrain.getElevation(Lt,xn,Cn):null,ir=at.translatePosition(tt,Bt,Xe,ke);Fr(bt,yt,wt,Je,tt,mn,Lt.posMatrix,jt,Tt,At,at,ir,Lt.toUnwrapped(),cn)}}}(F,y,A,E,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),R),A.paint.get("icon-opacity").constantOr(1)!==0&&io(y,E,A,F,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),Y,Q),A.paint.get("text-opacity").constantOr(1)!==0&&io(y,E,A,F,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),Y,Q),E.map.showCollisionBoxes&&(Pa(y,E,A,F,!0),Pa(y,E,A,F,!1))})(r,l,d,f,this.style.placement.variableOffsets);break;case"circle":(function(y,E,A,F){if(y.renderPass!=="translucent")return;const R=A.paint.get("circle-opacity"),Y=A.paint.get("circle-stroke-width"),Q=A.paint.get("circle-stroke-opacity"),de=!A.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(Y.constantOr(1)===0||Q.constantOr(1)===0))return;const xe=y.context,Pe=xe.gl,Oe=y.depthModeForSublayer(0,bn.ReadOnly),je=Ln.disabled,Le=y.colorModeForRenderPass(),Xe=[];for(let ke=0;ke<F.length;ke++){const Je=F[ke],tt=E.getTile(Je),at=tt.getBucket(A);if(!at)continue;const yt=at.programConfigurations.get(A.id),wt=y.useProgram("circle",yt),Lt=at.layoutVertexBuffer,Bt=at.indexBuffer,bt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Je),Tt={programConfiguration:yt,program:wt,layoutVertexBuffer:Lt,indexBuffer:Bt,uniformValues:wa(y,Je,tt,A),terrainData:bt};if(de){const Zt=at.segments.get();for(const mn of Zt)Xe.push({segments:new u.a0([mn]),sortKey:mn.sortKey,state:Tt})}else Xe.push({segments:at.segments,sortKey:0,state:Tt})}de&&Xe.sort((ke,Je)=>ke.sortKey-Je.sortKey);for(const ke of Xe){const{programConfiguration:Je,program:tt,layoutVertexBuffer:at,indexBuffer:yt,uniformValues:wt,terrainData:Lt}=ke.state;tt.draw(xe,Pe.TRIANGLES,Oe,je,Le,Kn.disabled,wt,Lt,A.id,at,yt,ke.segments,A.paint,y.transform.zoom,Je)}})(r,l,d,f);break;case"heatmap":(function(y,E,A,F){if(A.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const R=y.context,Y=R.gl,Q=Ln.disabled,de=new Gn([Y.ONE,Y.ONE],u.aN.transparent,[!0,!0,!0,!0]);(function(xe,Pe,Oe){const je=xe.gl;xe.activeTexture.set(je.TEXTURE1),xe.viewport.set([0,0,Pe.width/4,Pe.height/4]);let Le=Oe.heatmapFbo;if(Le)je.bindTexture(je.TEXTURE_2D,Le.colorAttachment.get()),xe.bindFramebuffer.set(Le.framebuffer);else{const Xe=je.createTexture();je.bindTexture(je.TEXTURE_2D,Xe),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_S,je.CLAMP_TO_EDGE),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_WRAP_T,je.CLAMP_TO_EDGE),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MIN_FILTER,je.LINEAR),je.texParameteri(je.TEXTURE_2D,je.TEXTURE_MAG_FILTER,je.LINEAR),Le=Oe.heatmapFbo=xe.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(ke,Je,tt,at){var yt,wt;const Lt=ke.gl,Bt=(yt=ke.HALF_FLOAT)!==null&&yt!==void 0?yt:Lt.UNSIGNED_BYTE,bt=(wt=ke.RGBA16F)!==null&&wt!==void 0?wt:Lt.RGBA;Lt.texImage2D(Lt.TEXTURE_2D,0,bt,Je.width/4,Je.height/4,0,Lt.RGBA,Bt,null),at.colorAttachment.set(tt)}(xe,Pe,Xe,Le)}})(R,y,A),R.clear({color:u.aN.transparent});for(let xe=0;xe<F.length;xe++){const Pe=F[xe];if(E.hasRenderableParent(Pe))continue;const Oe=E.getTile(Pe),je=Oe.getBucket(A);if(!je)continue;const Le=je.programConfigurations.get(A.id),Xe=y.useProgram("heatmap",Le),{zoom:ke}=y.transform;Xe.draw(R,Y.TRIANGLES,bn.disabled,Q,de,Kn.disabled,yi(Pe.posMatrix,Oe,ke,A.paint.get("heatmap-intensity")),null,A.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,A.paint,y.transform.zoom,Le)}R.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(R,Y){const Q=R.context,de=Q.gl,xe=Y.heatmapFbo;if(!xe)return;Q.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,xe.colorAttachment.get()),Q.activeTexture.set(de.TEXTURE1);let Pe=Y.colorRampTexture;Pe||(Pe=Y.colorRampTexture=new H(Q,Y.colorRamp,de.RGBA)),Pe.bind(de.LINEAR,de.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(Q,de.TRIANGLES,bn.disabled,Ln.disabled,R.colorModeForRenderPass(),Kn.disabled,((Oe,je,Le,Xe)=>{const ke=u.H();u.aQ(ke,0,Oe.width,Oe.height,0,0,1);const Je=Oe.context.gl;return{u_matrix:ke,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:je.paint.get("heatmap-opacity")}})(R,Y),null,Y.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,Y.paint,R.transform.zoom)}(y,A))})(r,l,d,f);break;case"line":(function(y,E,A,F){if(y.renderPass!=="translucent")return;const R=A.paint.get("line-opacity"),Y=A.paint.get("line-width");if(R.constantOr(1)===0||Y.constantOr(1)===0)return;const Q=y.depthModeForSublayer(0,bn.ReadOnly),de=y.colorModeForRenderPass(),xe=A.paint.get("line-dasharray"),Pe=A.paint.get("line-pattern"),Oe=Pe.constantOr(1),je=A.paint.get("line-gradient"),Le=A.getCrossfadeParameters(),Xe=Oe?"linePattern":xe?"lineSDF":je?"lineGradient":"line",ke=y.context,Je=ke.gl;let tt=!0;for(const at of F){const yt=E.getTile(at);if(Oe&&!yt.patternsLoaded())continue;const wt=yt.getBucket(A);if(!wt)continue;const Lt=wt.programConfigurations.get(A.id),Bt=y.context.program.get(),bt=y.useProgram(Xe,Lt),Tt=tt||bt.program!==Bt,Zt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(at),mn=Pe.constantOr(null);if(mn&&yt.imageAtlas){const cn=yt.imageAtlas,ir=cn.patternPositions[mn.to.toString()],xn=cn.patternPositions[mn.from.toString()];ir&&xn&&Lt.setConstantPatternPositions(ir,xn)}const At=Zt?at:null,jt=Oe?uc(y,yt,A,Le,At):xe?cc(y,yt,A,xe,Le,At):je?Ea(y,yt,A,wt.lineClipsArray.length,At):Sa(y,yt,A,At);if(Oe)ke.activeTexture.set(Je.TEXTURE0),yt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Lt.updatePaintBuffers(Le);else if(xe&&(Tt||y.lineAtlas.dirty))ke.activeTexture.set(Je.TEXTURE0),y.lineAtlas.bind(ke);else if(je){const cn=wt.gradients[A.id];let ir=cn.texture;if(A.gradientVersion!==cn.version){let xn=256;if(A.stepInterpolant){const Cn=E.getSource().maxzoom,or=at.canonical.z===Cn?Math.ceil(1<<y.transform.maxZoom-at.canonical.z):1;xn=u.ad(u.aV(wt.maxLineLength/u.X*1024*or),256,ke.maxTextureSize)}cn.gradient=u.aW({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:xn,image:cn.gradient||void 0,clips:wt.lineClipsArray}),cn.texture?cn.texture.update(cn.gradient):cn.texture=new H(ke,cn.gradient,Je.RGBA),cn.version=A.gradientVersion,ir=cn.texture}ke.activeTexture.set(Je.TEXTURE0),ir.bind(A.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}bt.draw(ke,Je.TRIANGLES,Q,y.stencilModeForClipping(at),de,Kn.disabled,jt,Zt,A.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,A.paint,y.transform.zoom,Lt,wt.layoutVertexBuffer2),tt=!1}})(r,l,d,f);break;case"fill":(function(y,E,A,F){const R=A.paint.get("fill-color"),Y=A.paint.get("fill-opacity");if(Y.constantOr(1)===0)return;const Q=y.colorModeForRenderPass(),de=A.paint.get("fill-pattern"),xe=y.opaquePassEnabledForLayer()&&!de.constantOr(1)&&R.constantOr(u.aN.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===xe){const Pe=y.depthModeForSublayer(1,y.renderPass==="opaque"?bn.ReadWrite:bn.ReadOnly);Hs(y,E,A,F,Pe,Q,!1)}if(y.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Pe=y.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,bn.ReadOnly);Hs(y,E,A,F,Pe,Q,!0)}})(r,l,d,f);break;case"fill-extrusion":(function(y,E,A,F){const R=A.paint.get("fill-extrusion-opacity");if(R!==0&&y.renderPass==="translucent"){const Y=new bn(y.context.gl.LEQUAL,bn.ReadWrite,y.depthRangeFor3D);if(R!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))vs(y,E,A,F,Y,Ln.disabled,Gn.disabled),vs(y,E,A,F,Y,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const Q=y.colorModeForRenderPass();vs(y,E,A,F,Y,Ln.disabled,Q)}}})(r,l,d,f);break;case"hillshade":(function(y,E,A,F){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const R=y.context,Y=y.depthModeForSublayer(0,bn.ReadOnly),Q=y.colorModeForRenderPass(),[de,xe]=y.renderPass==="translucent"?y.stencilConfigForOverlap(F):[{},F];for(const Pe of xe){const Oe=E.getTile(Pe);Oe.needsHillshadePrepare!==void 0&&Oe.needsHillshadePrepare&&y.renderPass==="offscreen"?Ai(y,Oe,A,Y,Ln.disabled,Q):y.renderPass==="translucent"&&xi(y,Pe,Oe,A,Y,de[Pe.overscaledZ],Q)}R.viewport.set([0,0,y.width,y.height])})(r,l,d,f);break;case"raster":(function(y,E,A,F){if(y.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!F.length)return;const R=y.context,Y=R.gl,Q=E.getSource(),de=y.useProgram("raster"),xe=y.colorModeForRenderPass(),[Pe,Oe]=Q instanceof ge?[{},F]:y.stencilConfigForOverlap(F),je=Oe[Oe.length-1].overscaledZ,Le=!y.options.moving;for(const Xe of Oe){const ke=y.depthModeForSublayer(Xe.overscaledZ-je,A.paint.get("raster-opacity")===1?bn.ReadWrite:bn.ReadOnly,Y.LESS),Je=E.getTile(Xe);Je.registerFadeDuration(A.paint.get("raster-fade-duration"));const tt=E.findLoadedParent(Xe,0),at=E.findLoadedSibling(Xe),yt=Ia(Je,tt||at||null,E,A,y.transform,y.style.map.terrain);let wt,Lt;const Bt=A.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;R.activeTexture.set(Y.TEXTURE0),Je.texture.bind(Bt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(Y.TEXTURE1),tt?(tt.texture.bind(Bt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),wt=Math.pow(2,tt.tileID.overscaledZ-Je.tileID.overscaledZ),Lt=[Je.tileID.canonical.x*wt%1,Je.tileID.canonical.y*wt%1]):Je.texture.bind(Bt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),Je.texture.useMipmap&&R.extTextureFilterAnisotropic&&y.transform.pitch>20&&Y.texParameterf(Y.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax);const bt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Xe),Tt=bt?Xe:null,Zt=Tt?Tt.posMatrix:y.transform.calculatePosMatrix(Xe.toUnwrapped(),Le),mn=Zh(Zt,Lt||[0,0],wt||1,yt,A);Q instanceof ge?de.draw(R,Y.TRIANGLES,ke,Ln.disabled,xe,Kn.disabled,mn,bt,A.id,Q.boundsBuffer,y.quadTriangleIndexBuffer,Q.boundsSegments):de.draw(R,Y.TRIANGLES,ke,Pe[Xe.overscaledZ],xe,Kn.disabled,mn,bt,A.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,l,d,f);break;case"background":(function(y,E,A,F){const R=A.paint.get("background-color"),Y=A.paint.get("background-opacity");if(Y===0)return;const Q=y.context,de=Q.gl,xe=y.transform,Pe=xe.tileSize,Oe=A.paint.get("background-pattern");if(y.isPatternMissing(Oe))return;const je=!Oe&&R.a===1&&Y===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==je)return;const Le=Ln.disabled,Xe=y.depthModeForSublayer(0,je==="opaque"?bn.ReadWrite:bn.ReadOnly),ke=y.colorModeForRenderPass(),Je=y.useProgram(Oe?"backgroundPattern":"background"),tt=F||xe.coveringTiles({tileSize:Pe,terrain:y.style.map.terrain});Oe&&(Q.activeTexture.set(de.TEXTURE0),y.imageManager.bind(y.context));const at=A.getCrossfadeParameters();for(const yt of tt){const wt=F?yt.posMatrix:y.transform.calculatePosMatrix(yt.toUnwrapped()),Lt=Oe?dl(wt,Y,y,Oe,{tileID:yt,tileSize:Pe},at):hl(wt,Y,R),Bt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(yt);Je.draw(Q,de.TRIANGLES,Xe,Le,ke,Kn.disabled,Lt,Bt,A.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,d,f);break;case"custom":(function(y,E,A){const F=y.context,R=A.implementation;if(y.renderPass==="offscreen"){const Y=R.prerender;Y&&(y.setCustomLayerDefaults(),F.setColorMode(y.colorModeForRenderPass()),Y.call(R,F.gl,y.transform.customLayerMatrix()),F.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),F.setColorMode(y.colorModeForRenderPass()),F.setStencilMode(Ln.disabled);const Y=R.renderingMode==="3d"?new bn(y.context.gl.LEQUAL,bn.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,bn.ReadOnly);F.setDepthMode(Y),R.render(F.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),F.setDirty(),y.setBaseState(),F.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,l,d,f,y){if(!d[0]&&!d[1])return r;const E=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(E){const R=Math.sin(E),Y=Math.cos(E);d=[d[0]*Y-d[1]*R,d[0]*R+d[1]*Y]}const A=[y?d[0]:hn(l,d[0],this.transform.zoom),y?d[1]:hn(l,d[1],this.transform.zoom),0],F=new Float32Array(16);return u.J(F,r,A),F}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new sl(this.context,Ko[r],l,fl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Qo{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const f=Math.pow(2,d),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const F=1/(A=u.ag([],A,r))[3]/l*f;return u.b1(A,A,[F,F,1/A[3],F])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const F=function(de,xe){var Pe=xe[0],Oe=xe[1],je=xe[2],Le=Pe*Pe+Oe*Oe+je*je;return Le>0&&(Le=1/Math.sqrt(Le)),de[0]=xe[0]*Le,de[1]=xe[1]*Le,de[2]=xe[2]*Le,de}([],function(de,xe,Pe){var Oe=xe[0],je=xe[1],Le=xe[2],Xe=Pe[0],ke=Pe[1],Je=Pe[2];return de[0]=je*Je-Le*ke,de[1]=Le*Xe-Oe*Je,de[2]=Oe*ke-je*Xe,de}([],T([],y[A[0]],y[A[1]]),T([],y[A[2]],y[A[1]]))),R=-((Y=F)[0]*(Q=y[A[1]])[0]+Y[1]*Q[1]+Y[2]*Q[2]);var Y,Q;return F.concat(R)});return new Qo(y,E)}}class Ma{constructor(r,l){this.min=r,this.max=l,this.center=function(d,f,y){return d[0]=.5*f[0],d[1]=.5*f[1],d[2]=.5*f[2],d}([],function(d,f,y){return d[0]=f[0]+y[0],d[1]=f[1]+y[1],d[2]=f[2]+y[2],d}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],d=K(this.min),f=K(this.max);for(let y=0;y<l.length;y++)d[y]=l[y]?this.min[y]:this.center[y],f[y]=l[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Ma(d,f)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let f=0;f<r.planes.length;f++){const y=r.planes[f];let E=0;for(let A=0;A<l.length;A++)u.b2(y,l[A])>=0&&E++;if(E===0)return 0;E!==l.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let A=0;A<r.points.length;A++){const F=r.points[A][f]-this.min[f];y=Math.min(y,F),E=Math.max(E,F)}if(E<0||y>this.max[f]-this.min[f])return 0}return 1}}class W{constructor(r=0,l=0,d=0,f=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=f}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,d)),this}getCenter(r,l){const d=u.ad((this.left+r-this.right)/2,0,r),f=u.ad((this.top+l-this.bottom)/2,0,l);return new u.P(d,f)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new W(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ye=85.051129;class $e{constructor(r,l,d,f,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new W,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new $e(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b3(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,f,y){var E=f[0],A=f[1],F=f[2],R=f[3],Y=Math.sin(y),Q=Math.cos(y);d[0]=E*Q+F*Y,d[1]=A*Q+R*Y,d[2]=E*-Y+F*Q,d[3]=A*-Y+R*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ad(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b4(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),f=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),E=this.pointCoordinate(new u.P(0,this.height)),A=Math.floor(Math.min(d.x,f.x,y.x,E.x)),F=Math.floor(Math.max(d.x,f.x,y.x,E.x)),R=1;for(let Y=A-R;Y<=F+R;Y++)Y!==0&&l.push(new u.b4(Y,r))}return l}coveringTiles(r){var l,d;let f=this.coveringZoomLevel(r);const y=f;if(r.minzoom!==void 0&&f<r.minzoom)return[];r.maxzoom!==void 0&&f>r.maxzoom&&(f=r.maxzoom);const E=this.pointCoordinate(this.getCameraPoint()),A=u.Z.fromLngLat(this.center),F=Math.pow(2,f),R=[F*E.x,F*E.y,0],Y=[F*A.x,F*A.y,0],Q=Qo.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f);let de=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(de=f);const xe=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Pe=ke=>({aabb:new Ma([ke*F,0,0],[(ke+1)*F,F,0]),zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Oe=[],je=[],Le=f,Xe=r.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let ke=1;ke<=3;ke++)Oe.push(Pe(-ke)),Oe.push(Pe(ke));for(Oe.push(Pe(0));Oe.length>0;){const ke=Oe.pop(),Je=ke.x,tt=ke.y;let at=ke.fullyVisible;if(!at){const bt=ke.aabb.intersects(Q);if(bt===0)continue;at=bt===2}const yt=r.terrain?R:Y,wt=ke.aabb.distanceX(yt),Lt=ke.aabb.distanceY(yt),Bt=Math.max(Math.abs(wt),Math.abs(Lt));if(ke.zoom===Le||Bt>xe+(1<<Le-ke.zoom)-2&&ke.zoom>=de){const bt=Le-ke.zoom,Tt=R[0]-.5-(Je<<bt),Zt=R[1]-.5-(tt<<bt);je.push({tileID:new u.S(ke.zoom===Le?Xe:ke.zoom,ke.wrap,ke.zoom,Je,tt),distanceSq:L([Y[0]-.5-Je,Y[1]-.5-tt]),tileDistanceToCamera:Math.sqrt(Tt*Tt+Zt*Zt)})}else for(let bt=0;bt<4;bt++){const Tt=(Je<<1)+bt%2,Zt=(tt<<1)+(bt>>1),mn=ke.zoom+1;let At=ke.aabb.quadrant(bt);if(r.terrain){const jt=new u.S(mn,ke.wrap,mn,Tt,Zt),cn=r.terrain.getMinMaxElevation(jt),ir=(l=cn.minElevation)!==null&&l!==void 0?l:this.elevation,xn=(d=cn.maxElevation)!==null&&d!==void 0?d:this.elevation;At=new Ma([At.min[0],At.min[1],ir],[At.max[0],At.max[1],xn])}Oe.push({aabb:At,zoom:mn,x:Tt,y:Zt,wrap:ke.wrap,fullyVisible:at})}}return je.sort((ke,Je)=>ke.distanceSq-Je.distanceSq).map(ke=>ke.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ad(r.lat,-85.051129,ye);return new u.P(u.O(r.lng)*this.worldSize,u.Q(l)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-y))return;const E=d+l-y,A=Math.cos(this._pitch)*this.cameraToCenterDistance/E/u.b5(1,f.lat),F=this.scaleZoom(A/this.tileSize);this._elevation=y,this._center=f,this.zoom=F}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),E=new u.Z(y.x-(d.x-f.x),y.y-(d.y-f.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const de=l.pointCoordinate(r);if(de!=null)return de}const d=[r.x,r.y,0,1],f=[r.x,r.y,1,1];u.ag(d,d,this.pixelMatrixInverse),u.ag(f,f,this.pixelMatrixInverse);const y=d[3],E=f[3],A=d[1]/y,F=f[1]/E,R=d[2]/y,Y=f[2]/E,Q=R===Y?0:(0-R)/(Y-R);return new u.Z(u.z.number(d[0]/y,f[0]/E,Q)/this.worldSize,u.z.number(A,F,Q)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const f=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.ag(f,f,d),new u.P(f[0]/f[3],f[1]/f[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Qe().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Qe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ye])}calculateTileMatrix(r){const l=r.canonical,d=this.worldSize/this.zoomScale(l.z),f=l.x+Math.pow(2,l.z)*r.wrap,y=u.ao(new Float64Array(16));return u.J(y,y,[f*d,l.y*d,0]),u.K(y,y,[d/u.X,d/u.X,1]),y}calculatePosMatrix(r,l=!1){const d=r.key,f=l?this._alignedPosMatrixCache:this._posMatrixCache;if(f[d])return f[d];const y=this.calculateTileMatrix(r);return u.L(y,l?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),f[d]=new Float32Array(y),f[d]}calculateFogMatrix(r){const l=r.key,d=this._fogMatrixCache;if(d[l])return d[l];const f=this.calculateTileMatrix(r);return u.L(f,this.fogMatrix,f),d[l]=new Float32Array(f),d[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=u.ad(+l,this.minZoom,this.maxZoom);const d={center:new u.N(r.lng,r.lat),zoom:l};let f=this.lngRange;if(!this._renderWorldCopies&&f===null){const ke=179.9999999999;f=[-ke,ke]}const y=this.tileSize*this.zoomScale(d.zoom);let E=0,A=y,F=0,R=y,Y=0,Q=0;const{x:de,y:xe}=this.size;if(this.latRange){const ke=this.latRange;E=u.Q(ke[1])*y,A=u.Q(ke[0])*y,A-E<xe&&(Y=xe/(A-E))}f&&(F=u.b3(u.O(f[0])*y,0,y),R=u.b3(u.O(f[1])*y,0,y),R<F&&(R+=y),R-F<de&&(Q=de/(R-F)));const{x:Pe,y:Oe}=this.project.call({worldSize:y},r);let je,Le;const Xe=Math.max(Q||0,Y||0);if(Xe){const ke=new u.P(Q?(R+F)/2:Pe,Y?(A+E)/2:Oe);return d.center=this.unproject.call({worldSize:y},ke).wrap(),d.zoom+=this.scaleZoom(Xe),d}if(this.latRange){const ke=xe/2;Oe-ke<E&&(Le=E+ke),Oe+ke>A&&(Le=A-ke)}if(f){const ke=(F+R)/2;let Je=Pe;this._renderWorldCopies&&(Je=u.b3(Pe,ke-y/2,ke+y/2));const tt=de/2;Je-tt<F&&(je=F+tt),Je+tt>R&&(je=R-tt)}if(je!==void 0||Le!==void 0){const ke=new u.P(je??Pe,Le??Oe);d.center=this.unproject.call({worldSize:y},ke).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let f=u.ao(new Float64Array(16));u.K(f,f,[this.width/2,-this.height/2,1]),u.J(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=u.ao(new Float64Array(16)),u.K(f,f,[1,-1,1]),u.J(f,f,[-1,-1,0]),u.K(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this.minElevationForCurrentTile),A=y-E*this._pixelPerMeter/Math.cos(this._pitch),F=E<0?A:y,R=Math.PI/2+this._pitch,Y=this._fov*(.5+r.y/this.height),Q=Math.sin(Y)*F/Math.sin(u.ad(Math.PI-R-Y,.01,Math.PI-.01)),de=this.getHorizon(),xe=2*Math.atan(de/this.cameraToCenterDistance)*(.5+r.y/(2*de)),Pe=Math.sin(xe)*F/Math.sin(u.ad(Math.PI-R-xe,.01,Math.PI-.01)),Oe=Math.min(Q,Pe);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Oe+F),this.nearZ=this.height/50,f=new Float64Array(16),u.b6(f,this._fov,this.width/this.height,this.nearZ,this.farZ),f[8]=2*-r.x/this.width,f[9]=2*r.y/this.height,this.projectionMatrix=u.af(f),u.K(f,f,[1,-1,1]),u.J(f,f,[0,0,-this.cameraToCenterDistance]),u.b7(f,f,this._pitch),u.ae(f,f,this.angle),u.J(f,f,[-l,-d,0]),this.mercatorMatrix=u.K([],f,[this.worldSize,this.worldSize,this.worldSize]),u.K(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,f),u.J(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=u.at([],f),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ae(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-l,-d,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,f);const je=this.width%2/2,Le=this.height%2/2,Xe=Math.cos(this.angle),ke=Math.sin(this.angle),Je=l-Math.round(l)+Xe*je+ke*Le,tt=d-Math.round(d)+Xe*Le+ke*je,at=new Float64Array(f);if(u.J(at,at,[Je>.5?Je-1:Je,tt>.5?tt-1:tt,0]),this.alignedModelViewProjectionMatrix=at,f=u.at(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.ag(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,f=l.y,y=l.x,E=l.y;for(const A of r)d=Math.min(d,A.x),f=Math.min(f,A.y),y=Math.max(y,A.x),E=Math.max(E,A.y);return[new u.P(d,f),new u.P(y,f),new u.P(y,E),new u.P(d,E),new u.P(d,f)]}}lngLatToCameraDepth(r,l){const d=this.locationCoordinate(r),f=[d.x*this.worldSize,d.y*this.worldSize,l,1];return u.ag(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function ut(v,r){let l,d=!1,f=null,y=null;const E=()=>{f=null,d&&(v.apply(y,l),f=setTimeout(E,r),d=!1)};return(...A)=>(d=!0,y=this,l=A,f||E(),f)}class Ft{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(d=f)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const d=l.join("/");let f=d;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${d}`);let y=window.location.hash.replace(f,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let E=window.location.href.replace(/(#.+)?$/,y);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=ut(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,f=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),E=Math.round(l.lng*y)/y,A=Math.round(l.lat*y)/y,F=this._map.getBearing(),R=this._map.getPitch();let Y="";if(Y+=r?`/${E}/${A}/${d}`:`${d}/${A}/${E}`,(F||R)&&(Y+="/"+Math.round(10*F)/10),R&&(Y+=`/${Math.round(R)}`),this._hashName){const Q=this._hashName;let de=!1;const xe=window.location.hash.slice(1).split("&").map(Pe=>{const Oe=Pe.split("=")[0];return Oe===Q?(de=!0,`${Oe}=${Y}`):Pe}).filter(Pe=>Pe);return de||xe.push(`${Q}=${Y}`),`#${xe.join("&")}`}return`#${Y}`}}const St={linearity:.3,easing:u.b8(0,0,.3,1)},Gt=u.e({deceleration:2500,maxSpeed:1400},St),rn=u.e({deceleration:20,maxSpeed:1400},St),vn=u.e({deceleration:1e3,maxSpeed:360},St),$n=u.e({deceleration:1e3,maxSpeed:90},St);class jn{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=b.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)l.zoom+=y.zoomDelta||0,l.bearing+=y.bearingDelta||0,l.pitch+=y.pitchDelta||0,y.panDelta&&l.pan._add(y.panDelta),y.around&&(l.around=y.around),y.pinchAround&&(l.pinchAround=y.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(l.pan.mag()){const y=dr(l.pan.mag(),d,u.e({},Gt,r||{}));f.offset=l.pan.mult(y.amount/l.pan.mag()),f.center=this._map.transform.center,Zn(f,y)}if(l.zoom){const y=dr(l.zoom,d,rn);f.zoom=this._map.transform.zoom+y.amount,Zn(f,y)}if(l.bearing){const y=dr(l.bearing,d,vn);f.bearing=this._map.transform.bearing+u.ad(y.amount,-179,179),Zn(f,y)}if(l.pitch){const y=dr(l.pitch,d,$n);f.pitch=this._map.transform.pitch+y.amount,Zn(f,y)}if(f.zoom||f.bearing){const y=l.pinchAround===void 0?l.around:l.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(f,{noMoveStart:!0})}}function Zn(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function dr(v,r,l){const{maxSpeed:d,linearity:f,deceleration:y}=l,E=u.ad(v*f/(r/1e3),-d,d),A=Math.abs(E)/(y*f);return{easing:l.easing,duration:1e3*A,amount:E*(A/2)}}class Nn extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,f={}){const y=C.mousePos(l.getCanvas(),d),E=l.unproject(y);super(r,u.e({point:y,lngLat:E,originalEvent:d},f)),this._defaultPrevented=!1,this.target=l}}class fr extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){const f=r==="touchend"?d.changedTouches:d.touches,y=C.touchPos(l.getCanvasContainer(),f),E=y.map(F=>l.unproject(F)),A=y.reduce((F,R,Y,Q)=>F.add(R.div(Q.length)),new u.P(0,0));super(r,{points:y,point:A,lngLats:E,lngLat:l.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class so extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Mi{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new so(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new Nn(r.type,this._map,r))}mouseup(r){this._map.fire(new Nn(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Nn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Nn(r.type,this._map,r))}mouseover(r){this._map.fire(new Nn(r.type,this._map,r))}mouseout(r){this._map.fire(new Nn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new fr(r.type,this._map,r))}touchmove(r){this._map.fire(new fr(r.type,this._map,r))}touchend(r){this._map.fire(new fr(r.type,this._map,r))}touchcancel(r){this._map.fire(new fr(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Nn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Nn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bs{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Ks{constructor(r,l){this._map=r,this._tr=new bs(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(C.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=d,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(f.x,d.x),E=Math.max(f.x,d.x),A=Math.min(f.y,d.y),F=Math.max(f.y,d.y);C.setTransform(this._box,`translate(${y}px,${A}px)`),this._box.style.width=E-y+"px",this._box.style.height=F-A+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,f=l;if(this.reset(),C.suppressClick(),d.x!==f.x||d.y!==f.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(d,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function So(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);const l={};for(let d=0;d<v.length;d++)l[v[d].identifier]=r[d];return l}class Qh{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(f){const y=new u.P(0,0);for(const E of f)y._add(E);return y.div(f.length)}(l),this.touches=So(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const f=So(d,l);for(const y in this.touches){const E=f[y];(!E||E.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class ed{constructor(r){this.singleTap=new Qh(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const f=this.singleTap.touchend(r,l,d);if(f){const y=r.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(f)<30;if(y&&E||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class hp{constructor(r){this._tr=new bs(r),this._zoomIn=new ed({numTouches:1,numTaps:2}),this._zoomOut=new ed({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const f=this._zoomIn.touchend(r,l,d),y=this._zoomOut.touchend(r,l,d),E=this._tr;return f?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(f)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rr{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const f=l.length?l[0]:l;return!this._moved&&f.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(d,f))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&C.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ka={0:1,2:2};class ki{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=C.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){const f=ka[d];return l.buttons===void 0||(l.buttons&f)!==f}(r,this._eventButton)}isValidEndEvent(r){return C.mouseButton(r)===this._eventButton}}class Ec{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Su=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},td=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const d=new ki({checkCorrectEvent:f=>C.mouseButton(f)===0&&f.ctrlKey||C.mouseButton(f)===2});return new rr({clickTolerance:r,move:(f,y)=>({bearingDelta:(y.x-f.x)*l}),moveStateManager:d,enable:v,assignEvents:Su})},za=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new ki({checkCorrectEvent:f=>C.mouseButton(f)===0&&f.ctrlKey||C.mouseButton(f)===2});return new rr({clickTolerance:r,move:(f,y)=>({pitchDelta:(y.y-f.y)*l}),moveStateManager:d,enable:v,assignEvents:Su})};class Eu{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,l,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const f=So(d,l),y=new u.P(0,0),E=new u.P(0,0);let A=0;for(const R in f){const Y=f[R],Q=this._touches[R];Q&&(y._add(Y),E._add(Y.sub(Q)),A++,f[R]=Y)}if(this._touches=f,this._shouldBePrevented(A)||!E.mag())return;const F=E.div(A);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(A),panDelta:F}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[f,y]=this._firstTwoTouches,E=Cu(d,l,f),A=Cu(d,l,y);if(!E||!A)return;const F=this._aroundCenter?null:E.add(A).div(2);return this._move([E,A],F,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,E=Cu(d,l,f),A=Cu(d,l,y);E&&A||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Cu(v,r,l){for(let d=0;d<v.length;d++)if(v[d].identifier===l)return r[d]}function nd(v,r){return Math.log(v/r)/Math.LN2}class rd extends Tu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(nd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:nd(this._distance,d),pinchAround:l}}}function id(v,r){return 180*v.angleWith(r)/Math.PI}class od extends Tu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:id(this._vector,f),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=id(r,this._startVector);return Math.abs(d)<l}}function Ss(v){return Math.abs(v.y)>Math.abs(v.x)}class sd extends Tu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Ss(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const f=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const f=r.mag()>=2,y=l.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const E=r.y>0==l.y>0;return Ss(r)&&Ss(l)&&E}}const dp={panStep:100,bearingStep:15,pitchStep:10};class ad{constructor(r){this._tr=new bs(r);const l=dp;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,f=0,y=0,E=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?f=1:(r.preventDefault(),E=-1);break;case 40:r.shiftKey?f=-1:(r.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,f=0),{cameraAnimation:A=>{const F=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:fp,zoom:l?Math.round(F.zoom)+l*(r.shiftKey?2:1):F.zoom,bearing:F.bearing+d*this._bearingStep,pitch:F.pitch+f*this._pitchStep,offset:[-y*this._panStep,-E*this._panStep],center:F.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fp(v){return v*(2-v)}const ld=4.000244140625;class ud{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new bs(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=b.now(),f=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%ld==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(f*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=C.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?u.N.convert(this._aroundCenter?d.center:d.unproject(l)):u.N.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>ld?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&R!==0&&(R=1/R);const Y=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(Y*R))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,f=this._easing;let y,E=!1;const A=b.now()-this._lastWheelEventTime;if(this._type==="wheel"&&d&&f&&A){const F=Math.min(A/200,1),R=f(F);y=u.z.number(d,l,R),F<1?this._frameId||(this._frameId=!0):E=!0}else y=l,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b9;if(this._prevEase){const d=this._prevEase,f=(b.now()-d.start)/d.duration,y=d.easing(f+.01)-d.easing(f),E=.27/Math.sqrt(y*y+1e-4)*.01,A=Math.sqrt(.0729-E*E);l=u.b8(E,A,.25,1)}return this._prevEase={start:b.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cd{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Pu{constructor(r){this._tr=new bs(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pp{constructor(){this._tap=new ed({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){const f=l[0],y=r.timeStamp-this._tapTime<500,E=this._tapPoint.dist(f)<30;y&&E?d.length>0&&(this._swipePoint=f,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const f=l[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const f=this._tap.touchend(r,l,d);f&&(this._tapTime=r.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ao{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eo{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hd{constructor(r,l,d,f){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class To{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=l,this._container.appendChild(f);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=d,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,l){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:r,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Es=v=>v.zoom||v.drag||v.pitch||v.rotate;class yy extends u.k{}function dd(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class vy{constructor(r,l){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,y)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=f.type==="renderFrame"?void 0:f,A={needsRenderFrame:!1},F={},R={},Y=f.touches,Q=Y?this._getMapTouches(Y):void 0,de=Q?C.touchPos(this._map.getCanvas(),Q):C.mousePos(this._map.getCanvas(),f);for(const{handlerName:Oe,handler:je,allowed:Le}of this._handlers){if(!je.isEnabled())continue;let Xe;this._blockedByActive(R,Le,Oe)?je.reset():je[y||f.type]&&(Xe=je[y||f.type](f,de,Q),this.mergeHandlerResult(A,F,Xe,Oe,E),Xe&&Xe.needsRenderFrame&&this._triggerRenderFrame()),(Xe||je.isActive())&&(R[Oe]=je)}const xe={};for(const Oe in this._previousActiveHandlers)R[Oe]||(xe[Oe]=E);this._previousActiveHandlers=R,(Object.keys(xe).length||dd(A))&&(this._changes.push([A,F,xe]),this._triggerRenderFrame()),(Object.keys(R).length||dd(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=A;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new jn(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,E]of this._listeners)C.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[r,l,d]of this._listeners)C.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new Mi(l,r));const f=l.boxZoom=new Ks(l,r);this._add("boxZoom",f),r.interactive&&r.boxZoom&&f.enable();const y=l.cooperativeGestures=new To(l,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const E=new hp(l),A=new Pu(l);l.doubleClickZoom=new cd(A,E),this._add("tapZoom",E),this._add("clickZoom",A),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const F=new pp;this._add("tapDragZoom",F);const R=l.touchPitch=new sd(l);this._add("touchPitch",R),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const Y=td(r),Q=za(r);l.dragRotate=new Eo(r,Y,Q),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const de=(({enable:Xe,clickTolerance:ke})=>{const Je=new ki({checkCorrectEvent:tt=>C.mouseButton(tt)===0&&!tt.ctrlKey});return new rr({clickTolerance:ke,move:(tt,at)=>({around:at,panDelta:at.sub(tt)}),activateOnStart:!0,moveStateManager:Je,enable:Xe,assignEvents:Su})})(r),xe=new Eu(r,l);l.dragPan=new ao(d,de,xe),this._add("mousePan",de),this._add("touchPan",xe,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const Pe=new od,Oe=new rd;l.touchZoomRotate=new hd(d,Oe,Pe,F),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Oe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const je=l.scrollZoom=new ud(l,()=>this._triggerRenderFrame());this._add("scrollZoom",je,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const Le=l.keyboard=new ad(l);this._add("keyboard",Le),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new bo(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Es(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(const f in r)if(f!==d&&(!l||l.indexOf(f)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,f,y){if(!d)return;u.e(r,d);const E={handlerName:f,originalEvent:d.originalEvent||y};d.zoomDelta!==void 0&&(l.zoom=E),d.panDelta!==void 0&&(l.drag=E),d.pitchDelta!==void 0&&(l.pitch=E),d.bearingDelta!==void 0&&(l.rotate=E)}_applyChanges(){const r={},l={},d={};for(const[f,y,E]of this._changes)f.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(f.panDelta)),f.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(r.around=f.around),f.pinchAround!==void 0&&(r.pinchAround=f.pinchAround),f.noInertia&&(r.noInertia=f.noInertia),u.e(l,y),u.e(d,E);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const f=this._map,y=f._getTransformForUpdate(),E=f.terrain;if(!(dd(r)||E&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:A,zoomDelta:F,bearingDelta:R,pitchDelta:Y,around:Q,pinchAround:de}=r;de!==void 0&&(Q=de),f._stop(!0),Q=Q||f.transform.centerPoint;const xe=y.pointLocation(A?Q.sub(A):Q);R&&(y.bearing+=R),Y&&(y.pitch+=Y),F&&(y.zoom+=F),E?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(A)):y.setLocationAtPoint(xe,Q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(xe,Q)):y.setLocationAtPoint(xe,Q),f._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const f=Es(this._eventsInProgress),y=Es(r),E={};for(const Q in r){const{originalEvent:de}=r[Q];this._eventsInProgress[Q]||(E[`${Q}start`]=de),this._eventsInProgress[Q]=r[Q]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const Q in E)this._fireEvent(Q,E[Q]);y&&this._fireEvent("move",y.originalEvent);for(const Q in r){const{originalEvent:de}=r[Q];this._fireEvent(Q,de)}const A={};let F;for(const Q in this._eventsInProgress){const{handlerName:de,originalEvent:xe}=this._eventsInProgress[Q];this._handlersById[de].isActive()||(delete this._eventsInProgress[Q],F=l[de]||xe,A[`${Q}end`]=F)}for(const Q in A)this._fireEvent(Q,A[Q]);const R=Es(this._eventsInProgress),Y=(f||y)&&!R;if(Y&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Q=this._map._getTransformForUpdate();Q.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(Q)}if(d&&Y){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),de=xe=>xe!==0&&-this._bearingSnap<xe&&xe<this._bearingSnap;!Q||!Q.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:F})),de(this._map.getBearing())&&this._map.resetNorth()):(de(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:F})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new yy("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class _y extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const d=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(u.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(u.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(u.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=Qe.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const bt=f.padding;f.padding={top:bt,bottom:bt,right:bt,left:bt}}f.padding=u.e(y,f.padding);const E=this.transform,A=E.padding,F=new Qe(r,l),R=E.project(F.getNorthWest()),Y=E.project(F.getNorthEast()),Q=E.project(F.getSouthEast()),de=E.project(F.getSouthWest()),xe=u.ba(-d),Pe=R.rotate(xe),Oe=Y.rotate(xe),je=Q.rotate(xe),Le=de.rotate(xe),Xe=new u.P(Math.max(Pe.x,Oe.x,Le.x,je.x),Math.max(Pe.y,Oe.y,Le.y,je.y)),ke=new u.P(Math.min(Pe.x,Oe.x,Le.x,je.x),Math.min(Pe.y,Oe.y,Le.y,je.y)),Je=Xe.sub(ke),tt=(E.width-(A.left+A.right+f.padding.left+f.padding.right))/Je.x,at=(E.height-(A.top+A.bottom+f.padding.top+f.padding.bottom))/Je.y;if(at<0||tt<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const yt=Math.min(E.scaleZoom(E.scale*Math.min(tt,at)),f.maxZoom),wt=u.P.convert(f.offset),Lt=new u.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(u.ba(d)),Bt=wt.add(Lt).mult(E.scale/E.zoomScale(yt));return{center:E.unproject(R.add(Q).div(2).sub(Bt)),zoom:yt,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),d,f),f,y)}_fitInternal(r,l,d){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this._getTransformForUpdate();let f=!1,y=!1,E=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(f=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.N.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(y=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(E=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),f&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),y&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),E&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,d,f=0){const y=u.Z.fromLngLat(r,l),E=u.Z.fromLngLat(d,f),A=E.x-y.x,F=E.y-y.y,R=E.z-y.z,Y=Math.hypot(A,F,R);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const Q=Math.hypot(A,F),de=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),xe=180*Math.atan2(A,-F)/Math.PI;let Pe=180*Math.acos(Q/Y)/Math.PI;return Pe=R<0?90-Pe:90+Pe,{center:E.toLngLat(),zoom:de,pitch:Pe,bearing:xe}}easeTo(r,l){var d;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&b.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),y=f.zoom,E=f.bearing,A=f.pitch,F=f.padding,R="bearing"in r?this._normalizeBearing(r.bearing,E):E,Y="pitch"in r?+r.pitch:A,Q="padding"in r?r.padding:f.padding,de=u.P.convert(r.offset);let xe=f.centerPoint.add(de);const Pe=f.pointLocation(xe),{center:Oe,zoom:je}=f.getConstrained(u.N.convert(r.center||Pe),(d=r.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(Oe,f);const Le=f.project(Pe),Xe=f.project(Oe).sub(Le),ke=f.zoomScale(je-y);let Je,tt;r.around&&(Je=u.N.convert(r.around),tt=f.locationPoint(Je));const at={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||je!==y,this._rotating=this._rotating||E!==R,this._pitching=this._pitching||Y!==A,this._padding=!f.isPaddingEqual(Q),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,at),this.terrain&&this._prepareElevation(Oe),this._ease(yt=>{if(this._zooming&&(f.zoom=u.z.number(y,je,yt)),this._rotating&&(f.bearing=u.z.number(E,R,yt)),this._pitching&&(f.pitch=u.z.number(A,Y,yt)),this._padding&&(f.interpolatePadding(F,Q,yt),xe=f.centerPoint.add(de)),this.terrain&&!r.freezeElevation&&this._updateElevation(yt),Je)f.setLocationAtPoint(Je,tt);else{const wt=f.zoomScale(f.zoom-y),Lt=je>y?Math.min(2,ke):Math.max(.5,ke),Bt=Math.pow(Lt,1-yt),bt=f.unproject(Le.add(Xe.mult(yt*Bt)).mult(wt));f.setLocationAtPoint(f.renderWorldCopies?bt.wrap():bt,xe)}this._applyUpdatedTransform(f),this._fireMoveEvents(l)},yt=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l,yt)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const l=r.getCameraPosition(),d=this.terrain.getElevationForLngLatZoom(l.lngLat,r.zoom);if(l.altitude<d){const f=this.calculateCameraOptionsFromTo(l.lngLat,d,r.center,r.elevation);return{pitch:f.pitch,zoom:f.zoom}}return{}}_applyUpdatedTransform(r){const l=[];if(this.terrain&&l.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&l.push(f=>this.transformCameraUpdate(f)),!l.length)return;const d=r.clone();for(const f of l){const y=d.clone(),{center:E,zoom:A,pitch:F,bearing:R,elevation:Y}=f(y);E&&(y.center=E),A!==void 0&&(y.zoom=A),F!==void 0&&(y.pitch=F),R!==void 0&&(y.bearing=R),Y!==void 0&&(y.elevation=Y),d.apply(y)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),f&&this.fire(new u.k("rotateend",r)),y&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){var d;if(!r.essential&&b.prefersReducedMotion){const jt=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const f=this._getTransformForUpdate(),y=f.zoom,E=f.bearing,A=f.pitch,F=f.padding,R="bearing"in r?this._normalizeBearing(r.bearing,E):E,Y="pitch"in r?+r.pitch:A,Q="padding"in r?r.padding:f.padding,de=u.P.convert(r.offset);let xe=f.centerPoint.add(de);const Pe=f.pointLocation(xe),{center:Oe,zoom:je}=f.getConstrained(u.N.convert(r.center||Pe),(d=r.zoom)!==null&&d!==void 0?d:y);this._normalizeCenter(Oe,f);const Le=f.zoomScale(je-y),Xe=f.project(Pe),ke=f.project(Oe).sub(Xe);let Je=r.curve;const tt=Math.max(f.width,f.height),at=tt/Le,yt=ke.mag();if("minZoom"in r){const jt=u.ad(Math.min(r.minZoom,y,je),f.minZoom,f.maxZoom),cn=tt/f.zoomScale(jt-y);Je=Math.sqrt(cn/yt*2)}const wt=Je*Je;function Lt(jt){const cn=(at*at-tt*tt+(jt?-1:1)*wt*wt*yt*yt)/(2*(jt?at:tt)*wt*yt);return Math.log(Math.sqrt(cn*cn+1)-cn)}function Bt(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function bt(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const Tt=Lt(!1);let Zt=function(jt){return bt(Tt)/bt(Tt+Je*jt)},mn=function(jt){return tt*((bt(Tt)*(Bt(cn=Tt+Je*jt)/bt(cn))-Bt(Tt))/wt)/yt;var cn},At=(Lt(!0)-Tt)/Je;if(Math.abs(yt)<1e-6||!isFinite(At)){if(Math.abs(tt-at)<1e-6)return this.easeTo(r,l);const jt=at<tt?-1:1;At=Math.abs(Math.log(at/tt))/Je,mn=()=>0,Zt=cn=>Math.exp(jt*Je*cn)}return r.duration="duration"in r?+r.duration:1e3*At/("screenSpeed"in r?+r.screenSpeed/Je:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=E!==R,this._pitching=Y!==A,this._padding=!f.isPaddingEqual(Q),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Oe),this._ease(jt=>{const cn=jt*At,ir=1/Zt(cn);f.zoom=jt===1?je:y+f.scaleZoom(ir),this._rotating&&(f.bearing=u.z.number(E,R,jt)),this._pitching&&(f.pitch=u.z.number(A,Y,jt)),this._padding&&(f.interpolatePadding(F,Q,jt),xe=f.centerPoint.add(de)),this.terrain&&!r.freezeElevation&&this._updateElevation(jt);const xn=jt===1?Oe:f.unproject(Xe.add(ke.mult(mn(cn))).mult(ir));f.setLocationAtPoint(f.renderWorldCopies?xn.wrap():xn,xe),this._applyUpdatedTransform(f),this._fireMoveEvents(l)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,l)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=b.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b3(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r,l){if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const fd={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class wl{constructor(r=fd){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const l=this._map.style.sourceCaches;for(const f in l){const y=l[f];if(y.used||y.usedForTerrain){const E=y.getSource();E.attribution&&r.indexOf(E.attribution)<0&&r.push(E.attribution)}}r=r.filter(f=>String(f).trim()),r.sort((f,y)=>f.length-y.length),r=r.filter((f,y)=>{for(let E=y+1;E<r.length;E++)if(r[E].indexOf(f)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class es{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");const l=C.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ut{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const f of d)if(f.id===r)return void(f.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mp=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class pd extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const d={};for(const f of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),u.aQ(f.posMatrix,0,u.X,0,u.X,0,1),this._tiles[f.key]=new rt(f,this.tileSize));for(const f in this._tiles)d[f]||delete this._tiles[f]}freeRtt(r){for(const l in this._tiles){const d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const f=this._tiles[d].tileID;if(f.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),u.aQ(y.posMatrix,0,u.X,0,u.X,0,1),l[d]=y}else if(f.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const E=f.canonical.z-r.canonical.z,A=f.canonical.x-(f.canonical.x>>E<<E),F=f.canonical.y-(f.canonical.y>>E<<E),R=u.X>>E;u.aQ(y.posMatrix,0,R,0,R,0,1),u.J(y.posMatrix,y.posMatrix,[-A*R,-F*R,0]),l[d]=y}else if(r.canonical.isChildOf(f.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const E=r.canonical.z-f.canonical.z,A=r.canonical.x-(r.canonical.x>>E<<E),F=r.canonical.y-(r.canonical.y>>E<<E),R=u.X>>E;u.aQ(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[A*R,F*R,0]),u.K(y.posMatrix,y.posMatrix,[1/2**E,1/2**E,0]),l[d]=y}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let f=r.overscaledZ-this.deltaZoom;if(f>d.maxzoom&&(f=d.maxzoom),f<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&l)for(;f>=d.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(f--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class gp{constructor(r,l,d){this.painter=r,this.sourceCache=new pd(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,f=u.X){var y;if(!(l>=0&&l<f&&d>=0&&d<f))return 0;const E=this.getTerrainData(r),A=(y=E.tile)===null||y===void 0?void 0:y.dem;if(!A)return 0;const F=function(Pe,Oe,je){var Le=Oe[0],Xe=Oe[1];return Pe[0]=je[0]*Le+je[4]*Xe+je[12],Pe[1]=je[1]*Le+je[5]*Xe+je[13],Pe}([],[l/f*u.X,d/f*u.X],E.u_terrain_matrix),R=[F[0]*A.dim,F[1]*A.dim],Y=Math.floor(R[0]),Q=Math.floor(R[1]),de=R[0]-Y,xe=R[1]-Q;return A.get(Y,Q)*(1-de)*(1-xe)+A.get(Y+1,Q)*de*(1-xe)+A.get(Y,Q+1)*(1-de)*xe+A.get(Y+1,Q+1)*de*xe}getElevationForLngLatZoom(r,l){const{tileID:d,mercatorX:f,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,f%u.X,y%u.X,u.X)}getElevation(r,l,d,f=u.X){return this.getDEMElevation(r,l,d,f)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const f=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(f,new u.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ao([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const f=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new H(f,l.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),l.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const f=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=f?y=r.canonical.z-f:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=r.canonical.x-(r.canonical.x>>y<<y),A=r.canonical.y-(r.canonical.y>>y<<y),F=u.bb(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(F,F,[E*u.X,A*u.X,0]),this._demMatrixCache[r.key]={matrix:F,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,d=l.width/devicePixelRatio,f=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(l.context,{width:d,height:f,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(l.context,{width:d,height:f,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,f,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,f))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,E=0;y<this._coordsTextureSize;y++)for(let A=0;A<this._coordsTextureSize;A++,E+=4)l[E+0]=255&A,l[E+1]=255&y,l[E+2]=A>>8<<4|y>>8,l[E+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),f=new H(r,d,r.gl.RGBA,{premultiply:!1});return f.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),d=this.painter.context,f=d.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(y,A-E-1,1,1,f.RGBA,f.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const F=l[0]+(l[2]>>4<<8),R=l[1]+((15&l[2])<<8),Y=this.coordsIndex[255-l[3]],Q=Y&&this.sourceCache.getTileByID(Y);if(!Q)return null;const de=this._coordsTextureSize,xe=(1<<Q.tileID.canonical.z)*de;return new u.Z((Q.tileID.canonical.x*de+F)/xe+Q.tileID.wrap,(Q.tileID.canonical.y*de+R)/xe,this.getElevation(Q.tileID,F,R,de))}depthAtPoint(r){const l=new Uint8Array(4),d=this.painter.context,f=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.bc,d=new u.aY,f=this.meshSize,y=u.X/f,E=f*f;for(let Q=0;Q<=f;Q++)for(let de=0;de<=f;de++)l.emplaceBack(de*y,Q*y,0);for(let Q=0;Q<E;Q+=f+1)for(let de=0;de<f;de++)d.emplaceBack(de+Q,f+de+Q+1,f+de+Q+2),d.emplaceBack(de+Q,f+de+Q+2,de+Q+1);const A=l.length,F=A+2*(f+1);for(const Q of[0,1])for(let de=0;de<=f;de++)for(const xe of[0,1])l.emplaceBack(de*y,Q*u.X,xe);for(let Q=0;Q<2*f;Q+=2)d.emplaceBack(F+Q,F+Q+1,F+Q+3),d.emplaceBack(F+Q,F+Q+3,F+Q+2),d.emplaceBack(A+Q,A+Q+3,A+Q+1),d.emplaceBack(A+Q,A+Q+2,A+Q+3);const R=l.length,Y=R+2*(f+1);for(const Q of[0,1])for(let de=0;de<=f;de++)for(const xe of[0,1])l.emplaceBack(Q*u.X,de*y,xe);for(let Q=0;Q<2*f;Q+=2)d.emplaceBack(R+Q,R+Q+1,R+Q+3),d.emplaceBack(R+Q,R+Q+3,R+Q+2),d.emplaceBack(Y+Q,Y+Q+3,Y+Q+1),d.emplaceBack(Y+Q,Y+Q+2,Y+Q+3);return this._mesh=new xl(r.createVertexBuffer(l,mp.members),r.createIndexBuffer(d),u.a0.simpleSegment(0,0,l.length,d.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.bd/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var d;const{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(f).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){const d=u.Z.fromLngLat(r.wrap()),f=(1<<l)*u.X,y=d.x*f,E=d.y*f,A=Math.floor(y/u.X),F=Math.floor(E/u.X);return{tileID:new u.S(l,0,l,A,F),mercatorX:y,mercatorY:E}}}class Iu{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new H(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ts={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class yp{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Iu(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const f=r.sourceCaches[d].getVisibleCoordinates();for(const y of f){const E=this.terrain.sourceCache.getTerrainCoords(y);for(const A in E)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(E[A])}}this._coordsDescendingInvStr={};for(const d of r._order){const f=r._layers[d],y=f.source;if(ts[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const E in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][E]=this._coordsDescendingInv[y][E].map(A=>A.key).sort().join()}}for(const d of this._renderableTiles)for(const f in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[f][d.tileID.key];y&&y!==d.rttCoords[f]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,d=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ts[l]&&(this._prevType&&ts[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!f))return!0;if(ts[this._prevType]||ts[l]&&f){this._prevType=l;const y=this._stacks.length-1,E=this._stacks[y]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Xs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[y]){const R=this.pool.getObjectForId(A.rtt[y].id);if(R.stamp===A.rtt[y].stamp){this.pool.useObject(R);continue}}const F=this.pool.getOrCreateFreeObject();this.pool.useObject(F),this.pool.stampObject(F),A.rtt[y]={id:F.id,stamp:F.stamp},d.context.bindFramebuffer.set(F.fbo.framebuffer),d.context.clear({color:u.aN.transparent,stencil:0}),d.currentStencilSource=void 0;for(let R=0;R<E.length;R++){const Y=d.style._layers[E[R]],Q=Y.source?this._coordsDescendingInv[Y.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,F.fbo.width,F.fbo.height]),d._renderTileClippingMasks(Y,Q),d.renderLayer(d,d.style.sourceCaches[Y.source],Y,Q),Y.source&&(A.rttCoords[Y.source]=this._coordsDescendingInvStr[Y.source][A.tileID.key])}}return Xs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ts[l]}return!1}}const Ot={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},md=S,xy={hash:!1,interactive:!0,bearingSnap:7,attributionControl:fd,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},vp=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},gd={showCompass:!0,showZoom:!0,visualizePitch:!1};class _p{constructor(r,l,d=!1){this.mousedown=E=>{this.startMouse(u.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),C.mousePos(this.element,E)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,C.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const f=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=td({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:A,bearingDegreesPerPixelMoved:F=.8})=>{const R=new Ec;return new rr({clickTolerance:A,move:(Y,Q)=>({bearingDelta:(Q.x-Y.x)*F}),moveStateManager:R,enable:E,assignEvents:vp})})({clickTolerance:f,enable:!0}),this.map=r,d&&(this.mousePitch=za({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:A,pitchDegreesPerPixelMoved:F=-.5})=>{const R=new Ec;return new rr({clickTolerance:A,move:(Y,Q)=>({pitchDelta:(Q.y-Y.y)*F}),moveStateManager:R,enable:E,assignEvents:vp})})({clickTolerance:y,enable:!0})),C.addEventListener(l,"mousedown",this.mousedown),C.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),C.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),C.disableDrag()}moveMouse(r,l){const d=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(r,l)||{};if(f&&d.setBearing(d.getBearing()+f),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,l)||{};y&&d.setPitch(d.getPitch()+y)}}moveTouch(r,l){const d=this.map,{bearingDelta:f}=this.touchRotate.dragMove(r,l)||{};if(f&&d.setBearing(d.getBearing()+f),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,l)||{};y&&d.setPitch(d.getPitch()+y)}}off(){const r=this.element;C.removeEventListener(r,"mousedown",this.mousedown),C.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let qs;function xp(v,r,l){const d=new u.N(v.lng,v.lat);if(v=new u.N(v.lng,v.lat),r){const f=new u.N(v.lng-360,v.lat),y=new u.N(v.lng+360,v.lat),E=l.locationPoint(v).distSqr(r);l.locationPoint(f).distSqr(r)<E?v=f:l.locationPoint(y).distSqr(r)<E&&(v=y)}for(;Math.abs(v.lng-l.center.lng)>180;){const f=l.locationPoint(v);if(f.x>=0&&f.y>=0&&f.x<=l.width&&f.y<=l.height)break;v.lng>l.center.lng?v.lng-=360:v.lng+=360}return v.lng!==d.lng&&l.locationPoint(v).y>l.height/2-l.getHorizon()?v:d}const yd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Js(v,r,l){const d=v.classList;for(const f in yd)d.remove(`maplibregl-${l}-anchor-${f}`);d.add(`maplibregl-${l}-anchor-${r}`)}class Qn extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const d=l.code,f=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,f=this._element;this._popup&&(d===f||f.contains(d))&&this.togglePopup()},this._update=l=>{var d;if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?xp(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${yd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${y}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");const l=C.createNS("http://www.w3.org/2000/svg","svg"),d=41,f=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${f}px`),l.setAttributeNS(null,"viewBox",`0 0 ${f} ${d}`);const y=C.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const E=C.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const A=C.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Le of F){const Xe=C.createNS("http://www.w3.org/2000/svg","ellipse");Xe.setAttributeNS(null,"opacity","0.04"),Xe.setAttributeNS(null,"cx","10.5"),Xe.setAttributeNS(null,"cy","5.80029008"),Xe.setAttributeNS(null,"rx",Le.rx),Xe.setAttributeNS(null,"ry",Le.ry),A.appendChild(Xe)}const R=C.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const Y=C.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(Y);const Q=C.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const de=C.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(de);const xe=C.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),xe.setAttributeNS(null,"fill","#FFFFFF");const Pe=C.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Oe=C.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#000000"),Oe.setAttributeNS(null,"opacity","0.25"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962");const je=C.createNS("http://www.w3.org/2000/svg","circle");je.setAttributeNS(null,"fill","#FFFFFF"),je.setAttributeNS(null,"cx","5.5"),je.setAttributeNS(null,"cy","5.5"),je.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Oe),Pe.appendChild(je),E.appendChild(A),E.appendChild(R),E.appendChild(Q),E.appendChild(xe),E.appendChild(Pe),l.appendChild(E),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Js(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const f=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,d;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const f=this._map,y=f.terrain.depthAtPoint(this._pos),E=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,E)-y<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/f.transform._pixelPerMeter,F=Math.sin(f.getPitch()*Math.PI/180)*A,R=f.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),Y=f.transform.lngLatToCameraDepth(this._lngLat,E+F)-R>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&Y&&this._popup.remove(),this._element.style.opacity=Y?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Tc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let bl=0,Sl=!1;const wp={maxWidth:100,unit:"metric"};function vd(v,r,l){const d=l&&l.maxWidth||100,f=v._container.clientHeight/2,y=v.unproject([0,f]),E=v.unproject([d,f]),A=y.distanceTo(E);if(l&&l.unit==="imperial"){const F=3.2808*A;F>5280?Au(r,d,F/5280,v._getUIString("ScaleControl.Miles")):Au(r,d,F,v._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Au(r,d,A/1852,v._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Au(r,d,A/1e3,v._getUIString("ScaleControl.Kilometers")):Au(r,d,A,v._getUIString("ScaleControl.Meters"))}function Au(v,r,l,d){const f=function(y){const E=Math.pow(10,`${Math.floor(y)}`.length-1);let A=y/E;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(F){const R=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*R)/R}(A),E*A}(l);v.style.width=r*(f/l)+"px",v.innerHTML=`${f}&nbsp;${d}`}const ns={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Cc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jt(v){if(v){if(typeof v=="number"){const r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-v),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const r=u.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return Jt(new u.P(0,0))}const an=S;m.AJAXError=u.bg,m.Evented=u.E,m.LngLat=u.N,m.MercatorCoordinate=u.Z,m.Point=u.P,m.addProtocol=u.bh,m.config=u.a,m.removeProtocol=u.bi,m.AttributionControl=wl,m.BoxZoomHandler=Ks,m.CanvasSource=et,m.CooperativeGesturesHandler=To,m.DoubleClickZoomHandler=cd,m.DragPanHandler=ao,m.DragRotateHandler=Eo,m.EdgeInsets=W,m.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=N,m.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.N(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,f=this._map.getBearing(),y=u.e({bearing:f},this.options.fitBoundsOptions),E=Qe.fromLngLat(l,d);this._map.fitBounds(E,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Sl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Qn({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Tc,v)}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(r=!1){if(qs!==void 0&&!r)return qs;if(window.navigator.permissions===void 0)return qs=!!window.navigator.geolocation,qs;try{qs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{qs=!!window.navigator.geolocation}return qs})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,bl=0,Sl=!1}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),l=v.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),r=v.getSouthEast(),l=v.getNorthEast(),d=r.distanceTo(l),f=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":bl--,Sl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),bl++,bl>1?(v={maximumAge:6e5,timeout:0},Sl=!0):(v=this.options.positionOptions,Sl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.Hash=Ft,m.ImageSource=ge,m.KeyboardHandler=ad,m.LngLatBounds=Qe,m.LogoControl=es,m.Map=class extends _y{constructor(v){u.be.mark(u.bf.create);const r=Object.assign(Object.assign({},xy),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new $e(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ut,this._controls=[],this._mapId=u.a4(),this._contextLost=l=>{l.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ot),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=G.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let l=!1;const d=ut(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{l?d(f):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new vy(this,r),this._hash=r.hash&&new Ft(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new wl(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new es,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new u.k(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new u.k(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new u.k("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=v.onAdd(this);this._controls.push(v);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,l,d)}resize(v){var r;const l=this._containerDimensions(),d=l[0],f=l[1],y=this._getClampedPixelRatio(d,f);if(this._resizeCanvas(d,f,y),this.painter.resize(d,f,y),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const F=this._getClampedPixelRatio(d,f);this._resizeCanvas(d,f,F),this.painter.resize(d,f,F)}this.transform.resize(d,f),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,f);const E=!this._moving;return E&&(this.stop(),this.fire(new u.k("movestart",v)).fire(new u.k("move",v))),this.fire(new u.k("resize",v)),E&&this.fire(new u.k("moveend",v)),this}_getClampedPixelRatio(v,r){const{0:l,1:d}=this._maxCanvasSize,f=this.getPixelRatio(),y=v*f,E=r*f;return Math.min(y>l?l/y:1,E>d?d/E:1)*f}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Qe.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(u.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,l){if(v==="mouseenter"||v==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:y=>{const E=this.getLayer(r)?this.queryRenderedFeatures(y.point,{layers:[r]}):[];E.length?d||(d=!0,l.call(this,new Nn(v,this,y.originalEvent,{features:E}))):d=!1},mouseout:()=>{d=!1}}}}if(v==="mouseleave"||v==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:E=>{(this.getLayer(r)?this.queryRenderedFeatures(E.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new Nn(v,this,E.originalEvent)))},mouseout:E=>{d&&(d=!1,l.call(this,new Nn(v,this,E.originalEvent)))}}}}{const d=f=>{const y=this.getLayer(r)?this.queryRenderedFeatures(f.point,{layers:[r]}):[];y.length&&(f.features=y,l.call(this,f),delete f.features)};return{layer:r,listener:l,delegates:{[v]:d}}}}on(v,r,l){if(l===void 0)return super.on(v,r);const d=this._createDelegatedListener(v,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(d);for(const f in d.delegates)this.on(f,d.delegates[f]);return this}once(v,r,l){if(l===void 0)return super.once(v,r);const d=this._createDelegatedListener(v,r,l);for(const f in d.delegates)this.once(f,d.delegates[f]);return this}off(v,r,l){return l===void 0?super.off(v,r):(this._delegatedListeners&&this._delegatedListeners[v]&&(d=>{const f=this._delegatedListeners[v];for(let y=0;y<f.length;y++){const E=f[y];if(E.layer===r&&E.listener===l){for(const A in E.delegates)this.off(A,E.delegates[A]);return f.splice(y,1),this}}})(),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let l;const d=v instanceof u.P||Array.isArray(v),f=d?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:v)||{},f instanceof u.P||typeof f[0]=="number")l=[u.P.convert(f)];else{const y=u.P.convert(f[0]),E=u.P.convert(f[1]);l=[y,new u.P(E.x,y.y),E,new u.P(y.x,E.y),y]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new cu(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,l):this.style.loadJSON(v,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new cu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){const l=this._requestManager.transformRequest(v,"Style");u.h(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){const r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new gp(this.painter,r,v),this.painter.renderToTexture=new yp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const r in v){const l=v[r]._tiles;for(const d in l){const f=l[d];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,l={}){const{pixelRatio:d=1,sdf:f=!1,stretchX:y,stretchY:E,content:A,textFitWidth:F,textFitHeight:R}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Y,height:Q,data:de}=r,xe=r;return this.style.addImage(v,{data:new u.R({width:Y,height:Q},new Uint8Array(de)),pixelRatio:d,stretchX:y,stretchY:E,content:A,textFitWidth:F,textFitHeight:R,sdf:f,version:0,userImage:xe}),xe.onAdd&&xe.onAdd(this,v),this}}{const{width:Y,height:Q,data:de}=b.getImageData(r);this.style.addImage(v,{data:new u.R({width:Y,height:Q},de),pixelRatio:d,stretchX:y,stretchY:E,content:A,textFitWidth:F,textFitHeight:R,sdf:f,version:0})}}updateImage(v,r){const l=this.style.getImage(v);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?b.getImageData(r):r,{width:f,height:y,data:E}=d;if(f===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==l.data.width||y!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(E,A),this.style.updateImage(v,l),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return G.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,l){return this.style.setLayerZoomRange(v,r,l),this._update(!0)}setFilter(v,r,l={}){return this.style.setFilter(v,r,l),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,l,d={}){return this.style.setPaintProperty(v,r,l,d),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,l,d={}){return this.style.setLayoutProperty(v,r,l,d),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,l,d=>{d||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,l=>{l||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const r=this._canvasContainer=C.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const f=this._controlContainer=C.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{y[E]=C.create("div",`maplibregl-ctrl-${E} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,l){this._canvas.width=Math.floor(l*v),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:v},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!l){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new bu(l,this.transform),O.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const f=this.transform.zoom,y=b.now();this.style.zoomHistory.update(f,y);const E=new u.a9(f,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=E.crossFadingFactor();A===1&&A===this._crossFadingFactor||(l=!0,this._crossFadingFactor=A),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.be.mark(u.bf.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.be.mark(u.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),G.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.be.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{u.be.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return md}getCameraTargetElevation(){return this.transform.elevation}},m.MapMouseEvent=Nn,m.MapTouchEvent=fr,m.MapWheelEvent=so,m.Marker=Qn,m.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},gd,v),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _p(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){const l=C.create("button",v,this._container);return l.type="button",l.addEventListener("click",r),l}},m.Popup=class extends u.E{constructor(v){super(),this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?xp(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor;const y=Jt(this.options.offset);if(!f){const A=this._container.offsetWidth,F=this._container.offsetHeight;let R;R=d.y+y.bottom.y<F?["top"]:d.y>this._map.transform.height-F?["bottom"]:[],d.x<A/2?R.push("left"):d.x>this._map.transform.width-A/2&&R.push("right"),f=R.length===0?"bottom":R.join("-")}let E=d.add(y[f]);this.options.subpixelPositioning||(E=E.round()),C.setTransform(this._container,`${yd[f]} translate(${E.x}px,${E.y}px)`),Js(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(ns),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=v;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Cc);v&&v.focus()}},m.RasterDEMTileSource=Ee,m.RasterTileSource=Vt,m.ScaleControl=class{constructor(v){this._onMove=()=>{vd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,vd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},wp),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=ud,m.Style=cu,m.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=sd,m.TwoFingersTouchRotateHandler=od,m.TwoFingersTouchZoomHandler=rd,m.TwoFingersTouchZoomRotateHandler=hd,m.VectorTileSource=un,m.VideoSource=He,m.addSourceType=(v,r)=>u._(void 0,void 0,void 0,function*(){if(ue(v))throw new Error(`A source type called "${v}" already exists.`);((l,d)=>{ht[l]=d})(v,r)}),m.clearPrewarmedResources=function(){const v=it;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Fe),it=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Ve().getRTLTextPluginStatus()},m.getVersion=function(){return an},m.getWorkerCount=function(){return Ze.workerCount},m.getWorkerUrl=function(){return u.a.WORKER_URL},m.importScriptInWorkers=function(v){return pt().broadcast("IS",v)},m.prewarm=function(){vt().acquire(Fe)},m.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},m.setRTLTextPlugin=function(v,r){return Ve().setRTLTextPlugin(v,r)},m.setWorkerCount=function(v){Ze.workerCount=v},m.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var p=i;return p})})(zC);var jC=zC.exports;const RC=qf(jC),s4=jM({__proto__:null,default:RC},[jC]),a4="modulepreload",l4=function(e){return"/osm-address-editor-vite/"+e},k2={},u4=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),m=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));c=Promise.all(i.map(u=>{if(u=l4(u),u in k2)return;k2[u]=!0;const S=u.endsWith(".css"),P=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${P}`))return;const M=document.createElement("link");if(M.rel=S?"stylesheet":a4,S||(M.as="script",M.crossOrigin=""),M.href=u,m&&M.setAttribute("nonce",m),document.head.appendChild(M),S)return new Promise((b,C)=>{M.addEventListener("load",b),M.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}return c.then(()=>t()).catch(p=>{const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=p,window.dispatchEvent(m),!m.defaultPrevented)throw p})},c4=gt.createContext(null);function h4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,p=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===p}function Lo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Lo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Lo(e[c],t[c]))return!1;return!0}return!1}function d4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function z2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Lo(i,a)||t.setProjection(i)}function F2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function j2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const f4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function R2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const p=t[a.ref];if(p){c=c||Object.assign({},a),delete c.ref;for(const m of f4)m in p&&(c[m]=p[m])}return c||a});return{...e,layers:i}}var O2={};const L2={version:8,sources:{},layers:[]},D2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},R0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},B2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},p4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],m4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Mh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const p=this.props[B2[c.type]];p?p(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const p=this.props[D2[c.type]];p&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),p(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const p=this.props[R0[c.type]];p&&p(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),p=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||p&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Mh.savedMaps.pop();if(!a)return null;const c=a.map,p=c.getContainer();for(i.className=p.className;p.childNodes.length>0;)i.appendChild(p.childNodes[0]);c._container=i;const m=c._resizeObserver;m&&(m.disconnect(),m.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=L2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||g4()||null,container:t,style:R2(a)},p=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[p.longitude||0,p.latitude||0],zoom:p.zoom||0,pitch:p.pitch||0,bearing:p.bearing||0}),i.gl){const M=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=M,i.gl)}const m=new this._MapClass(c);p.padding&&m.setPadding(p.padding),i.cursor&&(m.getCanvas().style.cursor=i.cursor),this._createShadowTransform(m);const u=m._render;m._render=M=>{this._inRender=!0,u.call(m,M),this._inRender=!1};const S=m._renderTaskQueue.run;m._renderTaskQueue.run=M=>{S.call(m._renderTaskQueue,M),this._onBeforeRepaint()},m.on("render",()=>this._onAfterRepaint());const P=m.fire;m.fire=this._fireEvent.bind(this,P),m.on("resize",()=>{this._renderTransform.resize(m.transform.width,m.transform.height)}),m.on("styledata",()=>{this._updateStyleComponents(this.props,{}),z2(m.transform,this._renderTransform)}),m.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const M in D2)m.on(M,this._onPointerEvent);for(const M in R0)m.on(M,this._onCameraEvent);for(const M in B2)m.on(M,this._onEvent);this._map=m}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Mh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=d4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:p,pitch:m,bearing:u}=c,S=a.isMoving();S&&(c.cameraElevationReference="sea");const P=j2(c,{...F2(a.transform),...t});if(S&&(c.cameraElevationReference="ground"),P&&i){const M=this._deferredEvents;M.move=!0,M.zoom||(M.zoom=p!==c.zoom),M.rotate||(M.rotate=u!==c.bearing),M.pitch||(M.pitch=m!==c.pitch)}return S||j2(a.transform,t),P}_updateSettings(t,i){const a=this._map;let c=!1;for(const p of p4)if(p in t&&!Lo(t[p],i[p])){c=!0;const m=a[`set${p[0].toUpperCase()}${p.slice(1)}`];m==null||m.call(a,t[p])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=L2,styleDiffing:c=!0}=t,p={diff:c};return"localIdeographFontFamily"in t&&(p.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(R2(a),p),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Lo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Lo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Lo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const p=this._map;let m=!1;for(const u of m4){const S=(a=t[u])!==null&&a!==void 0?a:!0,P=(c=i[u])!==null&&c!==void 0?c:!0;Lo(S,P)||(m=!0,S?p[u].enable(S):p[u].disable())}return m}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const p=t.type,m=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),S=u.length>0;!S&&m&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,S&&!m&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=p}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,p=c.transform,m=typeof i=="string"?i:i.type;return m==="move"&&this._updateViewState(this.props,!1),m in R0&&(typeof i=="object"&&(i.viewState=F2(p)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=p,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{z2(this._renderTransform,i),t.transform=i}}}Mh.savedMaps=[];function g4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||O2.MapboxAccessToken}catch{}try{e=e||O2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const y4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function v4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const p=t.project(a);return t.transform=c,p},unproject:a=>{const c=t.transform;t.transform=e.transform;const p=t.unproject(a);return t.transform=c,p},queryTerrainElevation:(a,c)=>{const p=t.transform;t.transform=e.transform;const m=t.queryTerrainElevation(a,c);return t.transform=p,m},queryRenderedFeatures:(a,c)=>{const p=t.transform;t.transform=e.transform;const m=t.queryRenderedFeatures(a,c);return t.transform=p,m}};for(const a of _4(t))!(a in i)&&!y4.includes(a)&&(i[a]=t[a].bind(t));return i}function _4(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const x4=typeof document<"u"?gt.useLayoutEffect:gt.useEffect,w4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function b4(e,t){for(const a of w4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Nh=gt.createContext(null);function S4(e,t,i){const a=gt.useContext(c4),[c,p]=gt.useState(null),m=gt.useRef(),{current:u}=gt.useRef({mapLib:null,map:null});gt.useEffect(()=>{const M=e.mapLib;let b=!0,C;return Promise.resolve(M||i).then(O=>{if(!b)return;if(!O)throw new Error("Invalid mapLib");const $="Map"in O?O:O.default;if(!$.Map)throw new Error("Invalid mapLib");if(b4($,e),!$.supported||$.supported(e))e.reuseMaps&&(C=Mh.reuse(e,m.current)),C||(C=new Mh($.Map,e,m.current)),u.map=v4(C),u.mapLib=$,p(C),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(O=>{const{onError:$}=e;$?$({type:"error",target:null,originalEvent:null,error:O}):console.error(O)}),()=>{b=!1,C&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),x4(()=>{c&&c.setProps(e)}),gt.useImperativeHandle(t,()=>u.map,[c]);const S=gt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),P={height:"100%"};return gt.createElement("div",{id:e.id,ref:m,style:S},c&&gt.createElement(Nh.Provider,{value:u},gt.createElement("div",{"mapboxgl-children":"",style:P},e.children)))}const E4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function oc(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!E4.test(a)?i[a]=`${c}px`:i[a]=c}}function T4(e,t){const{map:i,mapLib:a}=gt.useContext(Nh),c=gt.useRef({props:e});c.current.props=e;const p=gt.useMemo(()=>{let j=!1;gt.Children.forEach(e.children,X=>{X&&(j=!0)});const he={...e,element:j?document.createElement("div"):null},q=new a.Marker(he);return q.setLngLat([e.longitude,e.latitude]),q.getElement().addEventListener("click",X=>{var G,ae;(ae=(G=c.current.props).onClick)===null||ae===void 0||ae.call(G,{type:"click",target:q,originalEvent:X})}),q.on("dragstart",X=>{var G,ae;const K=X;K.lngLat=p.getLngLat(),(ae=(G=c.current.props).onDragStart)===null||ae===void 0||ae.call(G,K)}),q.on("drag",X=>{var G,ae;const K=X;K.lngLat=p.getLngLat(),(ae=(G=c.current.props).onDrag)===null||ae===void 0||ae.call(G,K)}),q.on("dragend",X=>{var G,ae;const K=X;K.lngLat=p.getLngLat(),(ae=(G=c.current.props).onDragEnd)===null||ae===void 0||ae.call(G,K)}),q},[]);gt.useEffect(()=>(p.addTo(i.getMap()),()=>{p.remove()}),[]);const{longitude:m,latitude:u,offset:S,style:P,draggable:M=!1,popup:b=null,rotation:C=0,rotationAlignment:O="auto",pitchAlignment:$="auto"}=e;return gt.useEffect(()=>{oc(p.getElement(),P)},[P]),gt.useImperativeHandle(t,()=>p,[]),(p.getLngLat().lng!==m||p.getLngLat().lat!==u)&&p.setLngLat([m,u]),S&&!h4(p.getOffset(),S)&&p.setOffset(S),p.isDraggable()!==M&&p.setDraggable(M),p.getRotation()!==C&&p.setRotation(C),p.getRotationAlignment()!==O&&p.setRotationAlignment(O),p.getPitchAlignment()!==$&&p.setPitchAlignment($),p.getPopup()!==b&&p.setPopup(b),J1.createPortal(e.children,p.getElement())}const C4=gt.memo(gt.forwardRef(T4));function N2(e){return new Set(e?e.trim().split(/\s+/):[])}function P4(e,t){const{map:i,mapLib:a}=gt.useContext(Nh),c=gt.useMemo(()=>document.createElement("div"),[]),p=gt.useRef({props:e});p.current.props=e;const m=gt.useMemo(()=>{const u={...e},S=new a.Popup(u);return S.setLngLat([e.longitude,e.latitude]),S.once("open",P=>{var M,b;(b=(M=p.current.props).onOpen)===null||b===void 0||b.call(M,P)}),S},[]);if(gt.useEffect(()=>{const u=S=>{var P,M;(M=(P=p.current.props).onClose)===null||M===void 0||M.call(P,S)};return m.on("close",u),m.setDOMContent(c).addTo(i.getMap()),()=>{m.off("close",u),m.isOpen()&&m.remove()}},[]),gt.useEffect(()=>{oc(m.getElement(),e.style)},[e.style]),gt.useImperativeHandle(t,()=>m,[]),m.isOpen()&&((m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!Lo(m.options.offset,e.offset)&&m.setOffset(e.offset),(m.options.anchor!==e.anchor||m.options.maxWidth!==e.maxWidth)&&(m.options.anchor=e.anchor,m.setMaxWidth(e.maxWidth)),m.options.className!==e.className)){const u=N2(m.options.className),S=N2(e.className);for(const P of u)S.has(P)||m.removeClassName(P);for(const P of S)u.has(P)||m.addClassName(P);m.options.className=e.className}return J1.createPortal(e.children,c)}gt.memo(gt.forwardRef(P4));function np(e,t,i,a){const c=gt.useContext(Nh),p=gt.useMemo(()=>e(c),[]);return gt.useEffect(()=>{const m=t,u=typeof t=="function"&&typeof i=="function"?t:null,S=typeof t=="function"?t:null,{map:P}=c;return P.hasControl(p)||(P.addControl(p,m==null?void 0:m.position),u&&u(c)),()=>{S&&S(c),P.hasControl(p)&&P.removeControl(p)}},[]),p}function I4(e){const t=np(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return gt.useEffect(()=>{oc(t._container,e.style)},[e.style]),null}gt.memo(I4);function A4(e){const t=np(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return gt.useEffect(()=>{oc(t._controlContainer,e.style)},[e.style]),null}gt.memo(A4);function M4(e,t){const i=gt.useRef({props:e}),a=np(({mapLib:c})=>{const p=new c.GeolocateControl(e),m=p._setupUI;return p._setupUI=u=>{p._container.hasChildNodes()||m(u)},p.on("geolocate",u=>{var S,P;(P=(S=i.current.props).onGeolocate)===null||P===void 0||P.call(S,u)}),p.on("error",u=>{var S,P;(P=(S=i.current.props).onError)===null||P===void 0||P.call(S,u)}),p.on("outofmaxbounds",u=>{var S,P;(P=(S=i.current.props).onOutOfMaxBounds)===null||P===void 0||P.call(S,u)}),p.on("trackuserlocationstart",u=>{var S,P;(P=(S=i.current.props).onTrackUserLocationStart)===null||P===void 0||P.call(S,u)}),p.on("trackuserlocationend",u=>{var S,P;(P=(S=i.current.props).onTrackUserLocationEnd)===null||P===void 0||P.call(S,u)}),p},{position:e.position});return i.current.props=e,gt.useImperativeHandle(t,()=>a,[]),gt.useEffect(()=>{oc(a._container,e.style)},[e.style]),null}const k4=gt.memo(gt.forwardRef(M4));function z4(e){const t=np(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return gt.useEffect(()=>{oc(t._container,e.style)},[e.style]),null}const F4=gt.memo(z4);function j4(e){const t=np(({mapLib:p})=>new p.ScaleControl(e),{position:e.position}),i=gt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),gt.useEffect(()=>{oc(t._container,c)},[c]),null}gt.memo(j4);function dg(e,t){if(!e)throw new Error(t)}function R4(e,t,i,a){if(dg(i.id===a.id,"layer id changed"),dg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:p={},filter:m,minzoom:u,maxzoom:S,beforeId:P}=i;if(P!==a.beforeId&&e.moveLayer(t,P),c!==a.layout){const M=a.layout||{};for(const b in c)Lo(c[b],M[b])||e.setLayoutProperty(t,b,c[b]);for(const b in M)c.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(p!==a.paint){const M=a.paint||{};for(const b in p)Lo(p[b],M[b])||e.setPaintProperty(t,b,p[b]);for(const b in M)p.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Lo(m,a.filter)||e.setFilter(t,m),(u!==a.minzoom||S!==a.maxzoom)&&e.setLayerZoomRange(t,u,S)}function O4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let L4=0;function D4(e){const t=gt.useContext(Nh).map.getMap(),i=gt.useRef(e),[,a]=gt.useState(0),c=gt.useMemo(()=>e.id||`jsx-layer-${L4++}`,[]);if(gt.useEffect(()=>{if(t){const m=()=>a(u=>u+1);return t.on("styledata",m),m(),()=>{t.off("styledata",m),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{R4(t,c,e,i.current)}catch(m){console.warn(m)}else O4(t,c,e);return i.current=e,null}let B4=0;function N4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function U4(e,t,i){dg(t.id===i.id,"source id changed"),dg(t.type===i.type,"source type changed");let a="",c=0;for(const m in t)m!=="children"&&m!=="id"&&!Lo(i[m],t[m])&&(a=m,c++);if(!c)return;const p=t.type;if(p==="geojson")e.setData(t.data);else if(p==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function $4(e){const t=gt.useContext(Nh).map.getMap(),i=gt.useRef(e),[,a]=gt.useState(0),c=gt.useMemo(()=>e.id||`jsx-source-${B4++}`,[]);gt.useEffect(()=>{if(t){const m=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",m),m(),()=>{var u;if(t.off("styledata",m),t.style&&t.style._loaded&&t.getSource(c)){const S=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(S)for(const P of S)P.source===c&&t.removeLayer(P.id);t.removeSource(c)}}}},[t]);let p=t&&t.style&&t.getSource(c);return p?U4(p,e,i.current):p=N4(t,c,e),i.current=e,p&&gt.Children.map(e.children,m=>m&&gt.cloneElement(m,{source:c}))||null}const V4=u4(()=>Promise.resolve().then(()=>s4),void 0),G4=gt.forwardRef(function(t,i){return S4(t,i,V4)}),Z4=C4,W4=F4,H4=k4,X4=D4,K4=$4,U2=()=>{};let Y1={},OC={},LC=null,DC={mark:U2,measure:U2};try{typeof window<"u"&&(Y1=window),typeof document<"u"&&(OC=document),typeof MutationObserver<"u"&&(LC=MutationObserver),typeof performance<"u"&&(DC=performance)}catch{}const{userAgent:$2=""}=Y1.navigator||{},ru=Y1,yr=OC,V2=LC,um=DC;ru.document;const tl=!!yr.documentElement&&!!yr.head&&typeof yr.addEventListener=="function"&&typeof yr.createElement=="function",BC=~$2.indexOf("MSIE")||~$2.indexOf("Trident/");var Sr="classic",NC="duotone",No="sharp",Uo="sharp-duotone",q4=[Sr,NC,No,Uo],J4={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds"}},G2={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},Y4=["kit"],Q4=/fa(s|r|l|t|d|b|k|kd|ss|sr|sl|st|sds)?[\-\ ]/,ez=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,tz={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},nz={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds"}},rz={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds"}},iz={classic:["fas","far","fal","fat"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds"]},oz={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid"}},sz={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds"}},UC={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid"}},az=["solid","regular","light","thin","duotone","brands"],$C=[1,2,3,4,5,6,7,8,9,10],lz=$C.concat([11,12,13,14,15,16,17,18,19,20]),ef={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},uz=[...Object.keys(iz),...az,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ef.GROUP,ef.SWAP_OPACITY,ef.PRIMARY,ef.SECONDARY].concat($C.map(e=>"".concat(e,"x"))).concat(lz.map(e=>"w-".concat(e))),cz={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},hz={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},dz={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},Z2={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}};const Ja="___FONT_AWESOME___",a_=16,VC="fa",GC="svg-inline--fa",Qu="data-fa-i2svg",l_="data-fa-pseudo-element",fz="data-fa-pseudo-element-pending",Q1="data-prefix",ex="data-icon",W2="fontawesome-i2svg",pz="async",mz=["HTML","HEAD","STYLE","SCRIPT"],ZC=(()=>{try{return!0}catch{return!1}})(),WC=[Sr,No,Uo];function rp(e){return new Proxy(e,{get(t,i){return i in t?t[i]:t[Sr]}})}const HC={...UC};HC[Sr]={...UC[Sr],...G2.kit,...G2["kit-duotone"]};const Wu=rp(HC),u_={...sz};u_[Sr]={...u_[Sr],...Z2.kit,...Z2["kit-duotone"]};const Vf=rp(u_),c_={...oz};c_[Sr]={...c_[Sr],...dz.kit};const Hu=rp(c_),h_={...rz};h_[Sr]={...h_[Sr],...hz.kit};const gz=rp(h_),yz=Q4,XC="fa-layers-text",vz=ez,_z={...J4};rp(_z);const xz=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],O0=ef,kh=new Set;Object.keys(Vf[Sr]).map(kh.add.bind(kh));Object.keys(Vf[No]).map(kh.add.bind(kh));Object.keys(Vf[Uo]).map(kh.add.bind(kh));const wz=[...Y4,...uz],_f=ru.FontAwesomeConfig||{};function bz(e){var t=yr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Sz(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}yr&&typeof yr.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(t=>{let[i,a]=t;const c=Sz(bz(i));c!=null&&(_f[a]=c)});const KC={styleDefault:"solid",familyDefault:"classic",cssPrefix:VC,replacementClass:GC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};_f.familyPrefix&&(_f.cssPrefix=_f.familyPrefix);const zh={...KC,..._f};zh.autoReplaceSvg||(zh.observeMutations=!1);const nn={};Object.keys(KC).forEach(e=>{Object.defineProperty(nn,e,{enumerable:!0,set:function(t){zh[e]=t,xf.forEach(i=>i(nn))},get:function(){return zh[e]}})});Object.defineProperty(nn,"familyPrefix",{enumerable:!0,set:function(e){zh.cssPrefix=e,xf.forEach(t=>t(nn))},get:function(){return zh.cssPrefix}});ru.FontAwesomeConfig=nn;const xf=[];function Ez(e){return xf.push(e),()=>{xf.splice(xf.indexOf(e),1)}}const Ol=a_,ha={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Tz(e){if(!e||!tl)return;const t=yr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const i=yr.head.childNodes;let a=null;for(let c=i.length-1;c>-1;c--){const p=i[c],m=(p.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(m)>-1&&(a=p)}return yr.head.insertBefore(t,a),e}const Cz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Gf(){let e=12,t="";for(;e-- >0;)t+=Cz[Math.random()*62|0];return t}function Uh(e){const t=[];for(let i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function tx(e){return e.classList?Uh(e.classList):(e.getAttribute("class")||"").split(" ").filter(t=>t)}function qC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pz(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,'="').concat(qC(e[i]),'" '),"").trim()}function iy(e){return Object.keys(e||{}).reduce((t,i)=>t+"".concat(i,": ").concat(e[i].trim(),";"),"")}function nx(e){return e.size!==ha.size||e.x!==ha.x||e.y!==ha.y||e.rotate!==ha.rotate||e.flipX||e.flipY}function Iz(e){let{transform:t,containerWidth:i,iconWidth:a}=e;const c={transform:"translate(".concat(i/2," 256)")},p="translate(".concat(t.x*32,", ").concat(t.y*32,") "),m="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),S={transform:"".concat(p," ").concat(m," ").concat(u)},P={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:S,path:P}}function Az(e){let{transform:t,width:i=a_,height:a=a_,startCentered:c=!1}=e,p="";return c&&BC?p+="translate(".concat(t.x/Ol-i/2,"em, ").concat(t.y/Ol-a/2,"em) "):c?p+="translate(calc(-50% + ".concat(t.x/Ol,"em), calc(-50% + ").concat(t.y/Ol,"em)) "):p+="translate(".concat(t.x/Ol,"em, ").concat(t.y/Ol,"em) "),p+="scale(".concat(t.size/Ol*(t.flipX?-1:1),", ").concat(t.size/Ol*(t.flipY?-1:1),") "),p+="rotate(".concat(t.rotate,"deg) "),p}var Mz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function JC(){const e=VC,t=GC,i=nn.cssPrefix,a=nn.replacementClass;let c=Mz;if(i!==e||a!==t){const p=new RegExp("\\.".concat(e,"\\-"),"g"),m=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(p,".".concat(i,"-")).replace(m,"--".concat(i,"-")).replace(u,".".concat(a))}return c}let H2=!1;function L0(){nn.autoAddCss&&!H2&&(Tz(JC()),H2=!0)}var kz={mixout(){return{dom:{css:JC,insertCss:L0}}},hooks(){return{beforeDOMElementCreation(){L0()},beforeI2svg(){L0()}}}};const Ya=ru||{};Ya[Ja]||(Ya[Ja]={});Ya[Ja].styles||(Ya[Ja].styles={});Ya[Ja].hooks||(Ya[Ja].hooks={});Ya[Ja].shims||(Ya[Ja].shims=[]);var da=Ya[Ja];const YC=[],QC=function(){yr.removeEventListener("DOMContentLoaded",QC),fg=1,YC.map(e=>e())};let fg=!1;tl&&(fg=(yr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(yr.readyState),fg||yr.addEventListener("DOMContentLoaded",QC));function zz(e){tl&&(fg?setTimeout(e,0):YC.push(e))}function ip(e){const{tag:t,attributes:i={},children:a=[]}=e;return typeof e=="string"?qC(e):"<".concat(t," ").concat(Pz(i),">").concat(a.map(ip).join(""),"</").concat(t,">")}function X2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var D0=function(t,i,a,c){var p=Object.keys(t),m=p.length,u=i,S,P,M;for(a===void 0?(S=1,M=t[p[0]]):(S=0,M=a);S<m;S++)P=p[S],M=u(M,t[P],P,t);return M};function Fz(e){const t=[];let i=0;const a=e.length;for(;i<a;){const c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){const p=e.charCodeAt(i++);(p&64512)==56320?t.push(((c&1023)<<10)+(p&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function d_(e){const t=Fz(e);return t.length===1?t[0].toString(16):null}function jz(e,t){const i=e.length;let a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function K2(e){return Object.keys(e).reduce((t,i)=>{const a=e[i];return!!a.icon?t[a.iconName]=a.icon:t[i]=a,t},{})}function f_(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:a=!1}=i,c=K2(t);typeof da.hooks.addPack=="function"&&!a?da.hooks.addPack(e,K2(t)):da.styles[e]={...da.styles[e]||{},...c},e==="fas"&&f_("fa",t)}const{styles:Nu,shims:Rz}=da,Oz={[Sr]:Object.values(Hu[Sr]),[No]:Object.values(Hu[No]),[Uo]:Object.values(Hu[Uo])};let rx=null,eP={},tP={},nP={},rP={},iP={};const Lz={[Sr]:Object.keys(Wu[Sr]),[No]:Object.keys(Wu[No]),[Uo]:Object.keys(Wu[Uo])};function Dz(e){return~wz.indexOf(e)}function Bz(e,t){const i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!Dz(c)?c:null}const oP=()=>{const e=a=>D0(Nu,(c,p,m)=>(c[m]=D0(p,a,{}),c),{});eP=e((a,c,p)=>(c[3]&&(a[c[3]]=p),c[2]&&c[2].filter(u=>typeof u=="number").forEach(u=>{a[u.toString(16)]=p}),a)),tP=e((a,c,p)=>(a[p]=p,c[2]&&c[2].filter(u=>typeof u=="string").forEach(u=>{a[u]=p}),a)),iP=e((a,c,p)=>{const m=c[2];return a[p]=p,m.forEach(u=>{a[u]=p}),a});const t="far"in Nu||nn.autoFetchSvg,i=D0(Rz,(a,c)=>{const p=c[0];let m=c[1];const u=c[2];return m==="far"&&!t&&(m="fas"),typeof p=="string"&&(a.names[p]={prefix:m,iconName:u}),typeof p=="number"&&(a.unicodes[p.toString(16)]={prefix:m,iconName:u}),a},{names:{},unicodes:{}});nP=i.names,rP=i.unicodes,rx=oy(nn.styleDefault,{family:nn.familyDefault})};Ez(e=>{rx=oy(e.styleDefault,{family:nn.familyDefault})});oP();function ix(e,t){return(eP[e]||{})[t]}function Nz(e,t){return(tP[e]||{})[t]}function Zl(e,t){return(iP[e]||{})[t]}function sP(e){return nP[e]||{prefix:null,iconName:null}}function Uz(e){const t=rP[e],i=ix("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function iu(){return rx}const ox=()=>({prefix:null,iconName:null,rest:[]});function oy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:i=Sr}=t,a=Wu[i][e],c=Vf[i][e]||Vf[i][a],p=e in da.styles?e:null;return c||p||null}const $z={[Sr]:Object.keys(Hu[Sr]),[No]:Object.keys(Hu[No]),[Uo]:Object.keys(Hu[Uo])};function sy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:i=!1}=t,a={[Sr]:"".concat(nn.cssPrefix,"-").concat(Sr),[No]:"".concat(nn.cssPrefix,"-").concat(No),[Uo]:"".concat(nn.cssPrefix,"-").concat(Uo)};let c=null,p=Sr;const m=q4.filter(S=>S!==NC);m.forEach(S=>{(e.includes(a[S])||e.some(P=>$z[S].includes(P)))&&(p=S)});const u=e.reduce((S,P)=>{const M=Bz(nn.cssPrefix,P);if(Nu[P]?(P=Oz[p].includes(P)?gz[p][P]:P,c=P,S.prefix=P):Lz[p].indexOf(P)>-1?(c=P,S.prefix=oy(P,{family:p})):M?S.iconName=M:P!==nn.replacementClass&&!m.some(b=>P===a[b])&&S.rest.push(P),!i&&S.prefix&&S.iconName){const b=c==="fa"?sP(S.iconName):{},C=Zl(S.prefix,S.iconName);b.prefix&&(c=null),S.iconName=b.iconName||C||S.iconName,S.prefix=b.prefix||S.prefix,S.prefix==="far"&&!Nu.far&&Nu.fas&&!nn.autoFetchSvg&&(S.prefix="fas")}return S},ox());return(e.includes("fa-brands")||e.includes("fab"))&&(u.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(u.prefix="fad"),!u.prefix&&p===No&&(Nu.fass||nn.autoFetchSvg)&&(u.prefix="fass",u.iconName=Zl(u.prefix,u.iconName)||u.iconName),!u.prefix&&p===Uo&&(Nu.fasds||nn.autoFetchSvg)&&(u.prefix="fasds",u.iconName=Zl(u.prefix,u.iconName)||u.iconName),(u.prefix==="fa"||c==="fa")&&(u.prefix=iu()||"fas"),u}class Vz{constructor(){this.definitions={}}add(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];const c=i.reduce(this._pullDefinitions,{});Object.keys(c).forEach(p=>{this.definitions[p]={...this.definitions[p]||{},...c[p]},f_(p,c[p]);const m=Hu[Sr][p];m&&f_(m,c[p]),oP()})}reset(){this.definitions={}}_pullDefinitions(t,i){const a=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(a).map(c=>{const{prefix:p,iconName:m,icon:u}=a[c],S=u[2];t[p]||(t[p]={}),S.length>0&&S.forEach(P=>{typeof P=="string"&&(t[p][P]=u)}),t[p][m]=u}),t}}let q2=[],ch={};const xh={},Gz=Object.keys(xh);function Zz(e,t){let{mixoutsTo:i}=t;return q2=e,ch={},Object.keys(xh).forEach(a=>{Gz.indexOf(a)===-1&&delete xh[a]}),q2.forEach(a=>{const c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(p=>{typeof c[p]=="function"&&(i[p]=c[p]),typeof c[p]=="object"&&Object.keys(c[p]).forEach(m=>{i[p]||(i[p]={}),i[p][m]=c[p][m]})}),a.hooks){const p=a.hooks();Object.keys(p).forEach(m=>{ch[m]||(ch[m]=[]),ch[m].push(p[m])})}a.provides&&a.provides(xh)}),i}function p_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];return(ch[e]||[]).forEach(m=>{t=m.apply(null,[t,...a])}),t}function ec(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];(ch[e]||[]).forEach(p=>{p.apply(null,i)})}function ou(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return xh[e]?xh[e].apply(null,t):void 0}function m_(e){e.prefix==="fa"&&(e.prefix="fas");let{iconName:t}=e;const i=e.prefix||iu();if(t)return t=Zl(i,t)||t,X2(aP.definitions,i,t)||X2(da.styles,i,t)}const aP=new Vz,Wz=()=>{nn.autoReplaceSvg=!1,nn.observeMutations=!1,ec("noAuto")},Hz={i2svg:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tl?(ec("beforeI2svg",e),ou("pseudoElements2svg",e),ou("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;nn.autoReplaceSvg===!1&&(nn.autoReplaceSvg=!0),nn.observeMutations=!0,zz(()=>{Kz({autoReplaceSvgRoot:t}),ec("watch",e)})}},Xz={icon:e=>{if(e===null)return null;if(typeof e=="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Zl(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){const t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=oy(e[0]);return{prefix:i,iconName:Zl(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(nn.cssPrefix,"-"))>-1||e.match(yz))){const t=sy(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||iu(),iconName:Zl(t.prefix,t.iconName)||t.iconName}}if(typeof e=="string"){const t=iu();return{prefix:t,iconName:Zl(t,e)||e}}}},Zo={noAuto:Wz,config:nn,dom:Hz,parse:Xz,library:aP,findIconDefinition:m_,toHtml:ip},Kz=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:t=yr}=e;(Object.keys(da.styles).length>0||nn.autoFetchSvg)&&tl&&nn.autoReplaceSvg&&Zo.dom.i2svg({node:t})};function ay(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(i=>ip(i))}}),Object.defineProperty(e,"node",{get:function(){if(!tl)return;const i=yr.createElement("div");return i.innerHTML=e.html,i.children}}),e}function qz(e){let{children:t,main:i,mask:a,attributes:c,styles:p,transform:m}=e;if(nx(m)&&i.found&&!a.found){const{width:u,height:S}=i,P={x:u/S/2,y:.5};c.style=iy({...p,"transform-origin":"".concat(P.x+m.x/16,"em ").concat(P.y+m.y/16,"em")})}return[{tag:"svg",attributes:c,children:t}]}function Jz(e){let{prefix:t,iconName:i,children:a,attributes:c,symbol:p}=e;const m=p===!0?"".concat(t,"-").concat(nn.cssPrefix,"-").concat(i):p;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:{...c,id:m},children:a}]}]}function sx(e){const{icons:{main:t,mask:i},prefix:a,iconName:c,transform:p,symbol:m,title:u,maskId:S,titleId:P,extra:M,watchable:b=!1}=e,{width:C,height:O}=i.found?i:t,$=a==="fak",j=[nn.replacementClass,c?"".concat(nn.cssPrefix,"-").concat(c):""].filter(K=>M.classes.indexOf(K)===-1).filter(K=>K!==""||!!K).concat(M.classes).join(" ");let he={children:[],attributes:{...M.attributes,"data-prefix":a,"data-icon":c,class:j,role:M.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(C," ").concat(O)}};const q=$&&!~M.classes.indexOf("fa-fw")?{width:"".concat(C/O*16*.0625,"em")}:{};b&&(he.attributes[Qu]=""),u&&(he.children.push({tag:"title",attributes:{id:he.attributes["aria-labelledby"]||"title-".concat(P||Gf())},children:[u]}),delete he.attributes.title);const X={...he,prefix:a,iconName:c,main:t,mask:i,maskId:S,transform:p,symbol:m,styles:{...q,...M.styles}},{children:G,attributes:ae}=i.found&&t.found?ou("generateAbstractMask",X)||{children:[],attributes:{}}:ou("generateAbstractIcon",X)||{children:[],attributes:{}};return X.children=G,X.attributes=ae,m?Jz(X):qz(X)}function J2(e){const{content:t,width:i,height:a,transform:c,title:p,extra:m,watchable:u=!1}=e,S={...m.attributes,...p?{title:p}:{},class:m.classes.join(" ")};u&&(S[Qu]="");const P={...m.styles};nx(c)&&(P.transform=Az({transform:c,startCentered:!0,width:i,height:a}),P["-webkit-transform"]=P.transform);const M=iy(P);M.length>0&&(S.style=M);const b=[];return b.push({tag:"span",attributes:S,children:[t]}),p&&b.push({tag:"span",attributes:{class:"sr-only"},children:[p]}),b}function Yz(e){const{content:t,title:i,extra:a}=e,c={...a.attributes,...i?{title:i}:{},class:a.classes.join(" ")},p=iy(a.styles);p.length>0&&(c.style=p);const m=[];return m.push({tag:"span",attributes:c,children:[t]}),i&&m.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),m}const{styles:B0}=da;function g_(e){const t=e[0],i=e[1],[a]=e.slice(4);let c=null;return Array.isArray(a)?c={tag:"g",attributes:{class:"".concat(nn.cssPrefix,"-").concat(O0.GROUP)},children:[{tag:"path",attributes:{class:"".concat(nn.cssPrefix,"-").concat(O0.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(nn.cssPrefix,"-").concat(O0.PRIMARY),fill:"currentColor",d:a[1]}}]}:c={tag:"path",attributes:{fill:"currentColor",d:a}},{found:!0,width:t,height:i,icon:c}}const Qz={found:!1,width:512,height:512};function eF(e,t){!ZC&&!nn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function y_(e,t){let i=t;return t==="fa"&&nn.styleDefault!==null&&(t=iu()),new Promise((a,c)=>{if(i==="fa"){const p=sP(e)||{};e=p.iconName||e,t=p.prefix||t}if(e&&t&&B0[t]&&B0[t][e]){const p=B0[t][e];return a(g_(p))}eF(e,t),a({...Qz,icon:nn.showMissingIcons&&e?ou("missingIconAbstract")||{}:{}})})}const Y2=()=>{},v_=nn.measurePerformance&&um&&um.mark&&um.measure?um:{mark:Y2,measure:Y2},tf='FA "6.6.0"',tF=e=>(v_.mark("".concat(tf," ").concat(e," begins")),()=>lP(e)),lP=e=>{v_.mark("".concat(tf," ").concat(e," ends")),v_.measure("".concat(tf," ").concat(e),"".concat(tf," ").concat(e," begins"),"".concat(tf," ").concat(e," ends"))};var ax={begin:tF,end:lP};const Fm=()=>{};function Q2(e){return typeof(e.getAttribute?e.getAttribute(Qu):null)=="string"}function nF(e){const t=e.getAttribute?e.getAttribute(Q1):null,i=e.getAttribute?e.getAttribute(ex):null;return t&&i}function rF(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(nn.replacementClass)}function iF(){return nn.autoReplaceSvg===!0?jm.replace:jm[nn.autoReplaceSvg]||jm.replace}function oF(e){return yr.createElementNS("http://www.w3.org/2000/svg",e)}function sF(e){return yr.createElement(e)}function uP(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:i=e.tag==="svg"?oF:sF}=t;if(typeof e=="string")return yr.createTextNode(e);const a=i(e.tag);return Object.keys(e.attributes||[]).forEach(function(p){a.setAttribute(p,e.attributes[p])}),(e.children||[]).forEach(function(p){a.appendChild(uP(p,{ceFn:i}))}),a}function aF(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}const jm={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(i=>{t.parentNode.insertBefore(uP(i),t)}),t.getAttribute(Qu)===null&&nn.keepOriginalSource){let i=yr.createComment(aF(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){const t=e[0],i=e[1];if(~tx(t).indexOf(nn.replacementClass))return jm.replace(e);const a=new RegExp("".concat(nn.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){const p=i[0].attributes.class.split(" ").reduce((m,u)=>(u===nn.replacementClass||u.match(a)?m.toSvg.push(u):m.toNode.push(u),m),{toNode:[],toSvg:[]});i[0].attributes.class=p.toSvg.join(" "),p.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",p.toNode.join(" "))}const c=i.map(p=>ip(p)).join(`
`);t.setAttribute(Qu,""),t.innerHTML=c}};function eS(e){e()}function cP(e,t){const i=typeof t=="function"?t:Fm;if(e.length===0)i();else{let a=eS;nn.mutateApproach===pz&&(a=ru.requestAnimationFrame||eS),a(()=>{const c=iF(),p=ax.begin("mutate");e.map(c),p(),i()})}}let lx=!1;function hP(){lx=!0}function __(){lx=!1}let pg=null;function tS(e){if(!V2||!nn.observeMutations)return;const{treeCallback:t=Fm,nodeCallback:i=Fm,pseudoElementsCallback:a=Fm,observeMutationsRoot:c=yr}=e;pg=new V2(p=>{if(lx)return;const m=iu();Uh(p).forEach(u=>{if(u.type==="childList"&&u.addedNodes.length>0&&!Q2(u.addedNodes[0])&&(nn.searchPseudoElements&&a(u.target),t(u.target)),u.type==="attributes"&&u.target.parentNode&&nn.searchPseudoElements&&a(u.target.parentNode),u.type==="attributes"&&Q2(u.target)&&~xz.indexOf(u.attributeName))if(u.attributeName==="class"&&nF(u.target)){const{prefix:S,iconName:P}=sy(tx(u.target));u.target.setAttribute(Q1,S||m),P&&u.target.setAttribute(ex,P)}else rF(u.target)&&i(u.target)})}),tl&&pg.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function lF(){pg&&pg.disconnect()}function uF(e){const t=e.getAttribute("style");let i=[];return t&&(i=t.split(";").reduce((a,c)=>{const p=c.split(":"),m=p[0],u=p.slice(1);return m&&u.length>0&&(a[m]=u.join(":").trim()),a},{})),i}function cF(e){const t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"";let c=sy(tx(e));return c.prefix||(c.prefix=iu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=Nz(c.prefix,e.innerText)||ix(c.prefix,d_(e.innerText))),!c.iconName&&nn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function hF(e){const t=Uh(e.attributes).reduce((c,p)=>(c.name!=="class"&&c.name!=="style"&&(c[p.name]=p.value),c),{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return nn.autoA11y&&(i?t["aria-labelledby"]="".concat(nn.replacementClass,"-title-").concat(a||Gf()):(t["aria-hidden"]="true",t.focusable="false")),t}function dF(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ha,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function nS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:i,prefix:a,rest:c}=cF(e),p=hF(e),m=p_("parseNodeAttributes",{},e);let u=t.styleParser?uF(e):[];return{iconName:i,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:a,transform:ha,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:c,styles:u,attributes:p},...m}}const{styles:fF}=da;function dP(e){const t=nn.autoReplaceSvg==="nest"?nS(e,{styleParser:!1}):nS(e);return~t.extra.classes.indexOf(XC)?ou("generateLayersText",e,t):ou("generateSvgReplacementMutation",e,t)}let ma=new Set;WC.map(e=>{ma.add("fa-".concat(e))});Object.keys(Wu[Sr]).map(ma.add.bind(ma));Object.keys(Wu[No]).map(ma.add.bind(ma));Object.keys(Wu[Uo]).map(ma.add.bind(ma));ma=[...ma];function rS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!tl)return Promise.resolve();const i=yr.documentElement.classList,a=M=>i.add("".concat(W2,"-").concat(M)),c=M=>i.remove("".concat(W2,"-").concat(M)),p=nn.autoFetchSvg?ma:WC.map(M=>"fa-".concat(M)).concat(Object.keys(fF));p.includes("fa")||p.push("fa");const m=[".".concat(XC,":not([").concat(Qu,"])")].concat(p.map(M=>".".concat(M,":not([").concat(Qu,"])"))).join(", ");if(m.length===0)return Promise.resolve();let u=[];try{u=Uh(e.querySelectorAll(m))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();const S=ax.begin("onTree"),P=u.reduce((M,b)=>{try{const C=dP(b);C&&M.push(C)}catch(C){ZC||C.name==="MissingIcon"&&console.error(C)}return M},[]);return new Promise((M,b)=>{Promise.all(P).then(C=>{cP(C,()=>{a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),S(),M()})}).catch(C=>{S(),b(C)})})}function pF(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;dP(e).then(i=>{i&&cP([i],t)})}function mF(e){return function(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||{}).icon?t:m_(t||{});let{mask:c}=i;return c&&(c=(c||{}).icon?c:m_(c||{})),e(a,{...i,mask:c})}}const gF=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=ha,symbol:a=!1,mask:c=null,maskId:p=null,title:m=null,titleId:u=null,classes:S=[],attributes:P={},styles:M={}}=t;if(!e)return;const{prefix:b,iconName:C,icon:O}=e;return ay({type:"icon",...e},()=>(ec("beforeDOMElementCreation",{iconDefinition:e,params:t}),nn.autoA11y&&(m?P["aria-labelledby"]="".concat(nn.replacementClass,"-title-").concat(u||Gf()):(P["aria-hidden"]="true",P.focusable="false")),sx({icons:{main:g_(O),mask:c?g_(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:C,transform:{...ha,...i},symbol:a,title:m,maskId:p,titleId:u,extra:{attributes:P,styles:M,classes:S}})))};var yF={mixout(){return{icon:mF(gF)}},hooks(){return{mutationObserverCallbacks(e){return e.treeCallback=rS,e.nodeCallback=pF,e}}},provides(e){e.i2svg=function(t){const{node:i=yr,callback:a=()=>{}}=t;return rS(i,a)},e.generateSvgReplacementMutation=function(t,i){const{iconName:a,title:c,titleId:p,prefix:m,transform:u,symbol:S,mask:P,maskId:M,extra:b}=i;return new Promise((C,O)=>{Promise.all([y_(a,m),P.iconName?y_(P.iconName,P.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then($=>{let[j,he]=$;C([t,sx({icons:{main:j,mask:he},prefix:m,iconName:a,transform:u,symbol:S,maskId:M,title:c,titleId:p,extra:b,watchable:!0})])}).catch(O)})},e.generateAbstractIcon=function(t){let{children:i,attributes:a,main:c,transform:p,styles:m}=t;const u=iy(m);u.length>0&&(a.style=u);let S;return nx(p)&&(S=ou("generateAbstractTransformGrouping",{main:c,transform:p,containerWidth:c.width,iconWidth:c.width})),i.push(S||c.icon),{children:i,attributes:a}}}},vF={mixout(){return{layer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:i=[]}=t;return ay({type:"layer"},()=>{ec("beforeDOMElementCreation",{assembler:e,params:t});let a=[];return e(c=>{Array.isArray(c)?c.map(p=>{a=a.concat(p.abstract)}):a=a.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(nn.cssPrefix,"-layers"),...i].join(" ")},children:a}]})}}}},_F={mixout(){return{counter(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:i=null,classes:a=[],attributes:c={},styles:p={}}=t;return ay({type:"counter",content:e},()=>(ec("beforeDOMElementCreation",{content:e,params:t}),Yz({content:e.toString(),title:i,extra:{attributes:c,styles:p,classes:["".concat(nn.cssPrefix,"-layers-counter"),...a]}})))}}}},xF={mixout(){return{text(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:i=ha,title:a=null,classes:c=[],attributes:p={},styles:m={}}=t;return ay({type:"text",content:e},()=>(ec("beforeDOMElementCreation",{content:e,params:t}),J2({content:e,transform:{...ha,...i},title:a,extra:{attributes:p,styles:m,classes:["".concat(nn.cssPrefix,"-layers-text"),...c]}})))}}},provides(e){e.generateLayersText=function(t,i){const{title:a,transform:c,extra:p}=i;let m=null,u=null;if(BC){const S=parseInt(getComputedStyle(t).fontSize,10),P=t.getBoundingClientRect();m=P.width/S,u=P.height/S}return nn.autoA11y&&!a&&(p.attributes["aria-hidden"]="true"),Promise.resolve([t,J2({content:t.innerHTML,width:m,height:u,transform:c,title:a,extra:p,watchable:!0})])}}};const wF=new RegExp('"',"ug"),iS=[1105920,1112319],oS={FontAwesome:{normal:"fas",400:"fas"},...nz,...tz,...cz},x_=Object.keys(oS).reduce((e,t)=>(e[t.toLowerCase()]=oS[t],e),{}),bF=Object.keys(x_).reduce((e,t)=>{const i=x_[t];return e[t]=i[900]||[...Object.entries(i)][0][1],e},{});function SF(e){const t=e.replace(wF,""),i=jz(t,0),a=i>=iS[0]&&i<=iS[1],c=t.length===2?t[0]===t[1]:!1;return{value:d_(c?t[0]:t),isSecondary:a||c}}function EF(e,t){const i=e.replace(/^['"]|['"]$/g,"").toLowerCase(),a=parseInt(t),c=isNaN(a)?"normal":a;return(x_[i]||{})[c]||bF[i]}function sS(e,t){const i="".concat(fz).concat(t.replace(":","-"));return new Promise((a,c)=>{if(e.getAttribute(i)!==null)return a();const m=Uh(e.children).filter(C=>C.getAttribute(l_)===t)[0],u=ru.getComputedStyle(e,t),S=u.getPropertyValue("font-family"),P=S.match(vz),M=u.getPropertyValue("font-weight"),b=u.getPropertyValue("content");if(m&&!P)return e.removeChild(m),a();if(P&&b!=="none"&&b!==""){const C=u.getPropertyValue("content");let O=EF(S,M);const{value:$,isSecondary:j}=SF(C),he=P[0].startsWith("FontAwesome");let q=ix(O,$),X=q;if(he){const G=Uz($);G.iconName&&G.prefix&&(q=G.iconName,O=G.prefix)}if(q&&!j&&(!m||m.getAttribute(Q1)!==O||m.getAttribute(ex)!==X)){e.setAttribute(i,X),m&&e.removeChild(m);const G=dF(),{extra:ae}=G;ae.attributes[l_]=t,y_(q,O).then(K=>{const Z=sx({...G,icons:{main:K,mask:ox()},prefix:O,iconName:X,extra:ae,watchable:!0}),T=yr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(T,e.firstChild):e.appendChild(T),T.outerHTML=Z.map(L=>ip(L)).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function TF(e){return Promise.all([sS(e,"::before"),sS(e,"::after")])}function CF(e){return e.parentNode!==document.head&&!~mz.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(l_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function aS(e){if(tl)return new Promise((t,i)=>{const a=Uh(e.querySelectorAll("*")).filter(CF).map(TF),c=ax.begin("searchPseudoElements");hP(),Promise.all(a).then(()=>{c(),__(),t()}).catch(()=>{c(),__(),i()})})}var PF={hooks(){return{mutationObserverCallbacks(e){return e.pseudoElementsCallback=aS,e}}},provides(e){e.pseudoElements2svg=function(t){const{node:i=yr}=t;nn.searchPseudoElements&&aS(i)}}};let lS=!1;var IF={mixout(){return{dom:{unwatch(){hP(),lS=!0}}}},hooks(){return{bootstrap(){tS(p_("mutationObserverCallbacks",{}))},noAuto(){lF()},watch(e){const{observeMutationsRoot:t}=e;lS?__():tS(p_("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}};const uS=e=>{let t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce((i,a)=>{const c=a.toLowerCase().split("-"),p=c[0];let m=c.slice(1).join("-");if(p&&m==="h")return i.flipX=!0,i;if(p&&m==="v")return i.flipY=!0,i;if(m=parseFloat(m),isNaN(m))return i;switch(p){case"grow":i.size=i.size+m;break;case"shrink":i.size=i.size-m;break;case"left":i.x=i.x-m;break;case"right":i.x=i.x+m;break;case"up":i.y=i.y-m;break;case"down":i.y=i.y+m;break;case"rotate":i.rotate=i.rotate+m;break}return i},t)};var AF={mixout(){return{parse:{transform:e=>uS(e)}}},hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-transform");return i&&(e.transform=uS(i)),e}}},provides(e){e.generateAbstractTransformGrouping=function(t){let{main:i,transform:a,containerWidth:c,iconWidth:p}=t;const m={transform:"translate(".concat(c/2," 256)")},u="translate(".concat(a.x*32,", ").concat(a.y*32,") "),S="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),P="rotate(".concat(a.rotate," 0 0)"),M={transform:"".concat(u," ").concat(S," ").concat(P)},b={transform:"translate(".concat(p/2*-1," -256)")},C={outer:m,inner:M,path:b};return{tag:"g",attributes:{...C.outer},children:[{tag:"g",attributes:{...C.inner},children:[{tag:i.icon.tag,children:i.icon.children,attributes:{...i.icon.attributes,...C.path}}]}]}}}};const N0={x:0,y:0,width:"100%",height:"100%"};function cS(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function MF(e){return e.tag==="g"?e.children:[e]}var kF={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-mask"),a=i?sy(i.split(" ").map(c=>c.trim())):ox();return a.prefix||(a.prefix=iu()),e.mask=a,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides(e){e.generateAbstractMask=function(t){let{children:i,attributes:a,main:c,mask:p,maskId:m,transform:u}=t;const{width:S,icon:P}=c,{width:M,icon:b}=p,C=Iz({transform:u,containerWidth:M,iconWidth:S}),O={tag:"rect",attributes:{...N0,fill:"white"}},$=P.children?{children:P.children.map(cS)}:{},j={tag:"g",attributes:{...C.inner},children:[cS({tag:P.tag,attributes:{...P.attributes,...C.path},...$})]},he={tag:"g",attributes:{...C.outer},children:[j]},q="mask-".concat(m||Gf()),X="clip-".concat(m||Gf()),G={tag:"mask",attributes:{...N0,id:q,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"},children:[O,he]},ae={tag:"defs",children:[{tag:"clipPath",attributes:{id:X},children:MF(b)},G]};return i.push(ae,{tag:"rect",attributes:{fill:"currentColor","clip-path":"url(#".concat(X,")"),mask:"url(#".concat(q,")"),...N0}}),{children:i,attributes:a}}}},zF={provides(e){let t=!1;ru.matchMedia&&(t=ru.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const i=[],a={fill:"currentColor"},c={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:{...a,d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}});const p={...c,attributeName:"opacity"},m={tag:"circle",attributes:{...a,cx:"256",cy:"364",r:"28"},children:[]};return t||m.children.push({tag:"animate",attributes:{...c,attributeName:"r",values:"28;14;28;28;14;28;"}},{tag:"animate",attributes:{...p,values:"1;0;1;1;0;1;"}}),i.push(m),i.push({tag:"path",attributes:{...a,opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"},children:t?[]:[{tag:"animate",attributes:{...p,values:"1;0;0;0;0;1;"}}]}),t||i.push({tag:"path",attributes:{...a,opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"},children:[{tag:"animate",attributes:{...p,values:"0;0;1;1;0;0;"}}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},FF={hooks(){return{parseNodeAttributes(e,t){const i=t.getAttribute("data-fa-symbol"),a=i===null?!1:i===""?!0:i;return e.symbol=a,e}}}},jF=[kz,yF,vF,_F,xF,PF,IF,AF,kF,zF,FF];Zz(jF,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;const w_=Zo.parse;Zo.findIconDefinition;Zo.toHtml;const RF=Zo.icon;Zo.layer;Zo.text;Zo.counter;var fP={exports:{}},OF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",LF=OF,DF=LF;function pP(){}function mP(){}mP.resetWarningCache=pP;var BF=function(){function e(a,c,p,m,u,S){if(S!==DF){var P=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw P.name="Invariant Violation",P}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:mP,resetWarningCache:pP};return i.PropTypes=i,i};fP.exports=BF();var NF=fP.exports;const Fn=qf(NF);function hS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function sa(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(i),!0).forEach(function(a){hh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hS(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function mg(e){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(e)}function hh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function UF(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,p;for(p=0;p<a.length;p++)c=a[p],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function $F(e,t){if(e==null)return{};var i=UF(e,t),a,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(c=0;c<p.length;c++)a=p[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function b_(e){return VF(e)||GF(e)||ZF(e)||WF()}function VF(e){if(Array.isArray(e))return S_(e)}function GF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZF(e,t){if(e){if(typeof e=="string")return S_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S_(e,t)}}function S_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function WF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HF(e){var t,i=e.beat,a=e.fade,c=e.beatFade,p=e.bounce,m=e.shake,u=e.flash,S=e.spin,P=e.spinPulse,M=e.spinReverse,b=e.pulse,C=e.fixedWidth,O=e.inverse,$=e.border,j=e.listItem,he=e.flip,q=e.size,X=e.rotation,G=e.pull,ae=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":p,"fa-shake":m,"fa-flash":u,"fa-spin":S,"fa-spin-reverse":M,"fa-spin-pulse":P,"fa-pulse":b,"fa-fw":C,"fa-inverse":O,"fa-border":$,"fa-li":j,"fa-flip":he===!0,"fa-flip-horizontal":he==="horizontal"||he==="both","fa-flip-vertical":he==="vertical"||he==="both"},hh(t,"fa-".concat(q),typeof q<"u"&&q!==null),hh(t,"fa-rotate-".concat(X),typeof X<"u"&&X!==null&&X!==0),hh(t,"fa-pull-".concat(G),typeof G<"u"&&G!==null),hh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(ae).map(function(K){return ae[K]?K:null}).filter(function(K){return K})}function XF(e){return e=e-0,e===e}function gP(e){return XF(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var KF=["style"];function qF(e){return e.charAt(0).toUpperCase()+e.slice(1)}function JF(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=gP(i.slice(0,a)),p=i.slice(a+1).trim();return c.startsWith("webkit")?t[qF(c)]=p:t[c]=p,t},{})}function yP(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(S){return yP(e,S)}),c=Object.keys(t.attributes||{}).reduce(function(S,P){var M=t.attributes[P];switch(P){case"class":S.attrs.className=M,delete t.attributes.class;break;case"style":S.attrs.style=JF(M);break;default:P.indexOf("aria-")===0||P.indexOf("data-")===0?S.attrs[P.toLowerCase()]=M:S.attrs[gP(P)]=M}return S},{attrs:{}}),p=i.style,m=p===void 0?{}:p,u=$F(i,KF);return c.attrs.style=sa(sa({},c.attrs.style),m),e.apply(void 0,[t.tag,sa(sa({},c.attrs),u)].concat(b_(a)))}var vP=!1;try{vP=!0}catch{}function YF(){if(!vP&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function dS(e){if(e&&mg(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(w_.icon)return w_.icon(e);if(e===null)return null;if(e&&mg(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function U0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?hh({},e,t):{}}var fS={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},eu=s1.forwardRef(function(e,t){var i=sa(sa({},fS),e),a=i.icon,c=i.mask,p=i.symbol,m=i.className,u=i.title,S=i.titleId,P=i.maskId,M=dS(a),b=U0("classes",[].concat(b_(HF(i)),b_((m||"").split(" ")))),C=U0("transform",typeof i.transform=="string"?w_.transform(i.transform):i.transform),O=U0("mask",dS(c)),$=RF(M,sa(sa(sa(sa({},b),C),O),{},{symbol:p,title:u,titleId:S,maskId:P}));if(!$)return YF("Could not find icon",M),null;var j=$.abstract,he={ref:t};return Object.keys(i).forEach(function(q){fS.hasOwnProperty(q)||(he[q]=i[q])}),QF(j[0],he)});eu.displayName="FontAwesomeIcon";eu.propTypes={beat:Fn.bool,border:Fn.bool,beatFade:Fn.bool,bounce:Fn.bool,className:Fn.string,fade:Fn.bool,flash:Fn.bool,mask:Fn.oneOfType([Fn.object,Fn.array,Fn.string]),maskId:Fn.string,fixedWidth:Fn.bool,inverse:Fn.bool,flip:Fn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Fn.oneOfType([Fn.object,Fn.array,Fn.string]),listItem:Fn.bool,pull:Fn.oneOf(["right","left"]),pulse:Fn.bool,rotation:Fn.oneOf([0,90,180,270]),shake:Fn.bool,size:Fn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Fn.bool,spinPulse:Fn.bool,spinReverse:Fn.bool,symbol:Fn.oneOfType([Fn.bool,Fn.string]),title:Fn.string,titleId:Fn.string,transform:Fn.oneOfType([Fn.string,Fn.object]),swapOpacity:Fn.bool};var QF=yP.bind(null,s1.createElement);const ej={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},E_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},tj={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24l0-64 64 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-64 0 0-64c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 64-64 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l64 0 0 64z"]},nj=tj;function cm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _P={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,p){function m(P,M){if(!c[P]){if(!a[P]){var b=typeof cm=="function"&&cm;if(!M&&b)return b(P,!0);if(u)return u(P,!0);var C=new Error("Cannot find module '"+P+"'");throw C.code="MODULE_NOT_FOUND",C}var O=c[P]={exports:{}};a[P][0].call(O.exports,function($){var j=a[P][1][$];return m(j||$)},O,O.exports,i,a,c,p)}return c[P].exports}for(var u=typeof cm=="function"&&cm,S=0;S<p.length;S++)m(p[S]);return m}return i}()({1:[function(i,a,c){c.byteLength=C,c.toByteArray=$,c.fromByteArray=q;for(var p=[],m=[],u=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=0,M=S.length;P<M;++P)p[P]=S[P],m[S.charCodeAt(P)]=P;m[45]=62,m[95]=63;function b(X){var G=X.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=X.indexOf("=");ae===-1&&(ae=G);var K=ae===G?0:4-ae%4;return[ae,K]}function C(X){var G=b(X),ae=G[0],K=G[1];return(ae+K)*3/4-K}function O(X,G,ae){return(G+ae)*3/4-ae}function $(X){var G,ae=b(X),K=ae[0],Z=ae[1],T=new u(O(X,K,Z)),L=0,B=Z>0?K-4:K,te;for(te=0;te<B;te+=4)G=m[X.charCodeAt(te)]<<18|m[X.charCodeAt(te+1)]<<12|m[X.charCodeAt(te+2)]<<6|m[X.charCodeAt(te+3)],T[L++]=G>>16&255,T[L++]=G>>8&255,T[L++]=G&255;return Z===2&&(G=m[X.charCodeAt(te)]<<2|m[X.charCodeAt(te+1)]>>4,T[L++]=G&255),Z===1&&(G=m[X.charCodeAt(te)]<<10|m[X.charCodeAt(te+1)]<<4|m[X.charCodeAt(te+2)]>>2,T[L++]=G>>8&255,T[L++]=G&255),T}function j(X){return p[X>>18&63]+p[X>>12&63]+p[X>>6&63]+p[X&63]}function he(X,G,ae){for(var K,Z=[],T=G;T<ae;T+=3)K=(X[T]<<16&16711680)+(X[T+1]<<8&65280)+(X[T+2]&255),Z.push(j(K));return Z.join("")}function q(X){for(var G,ae=X.length,K=ae%3,Z=[],T=16383,L=0,B=ae-K;L<B;L+=T)Z.push(he(X,L,L+T>B?B:L+T));return K===1?(G=X[ae-1],Z.push(p[G>>2]+p[G<<4&63]+"==")):K===2&&(G=(X[ae-2]<<8)+X[ae-1],Z.push(p[G>>10]+p[G>>4&63]+p[G<<2&63]+"=")),Z.join("")}},{}],2:[function(i,a,c){(function(p){(function(){var m=i("base64-js"),u=i("ieee754");c.Buffer=b,c.SlowBuffer=K,c.INSPECT_MAX_BYTES=50;var S=2147483647;c.kMaxLength=S,b.TYPED_ARRAY_SUPPORT=P(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function P(){try{var Ee=new Uint8Array(1);return Ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ee.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function M(Ee){if(Ee>S)throw new RangeError('The value "'+Ee+'" is invalid for option "size"');var N=new Uint8Array(Ee);return N.__proto__=b.prototype,N}function b(Ee,N,D){if(typeof Ee=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(Ee)}return C(Ee,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function C(Ee,N,D){if(typeof Ee=="string")return he(Ee,N);if(ArrayBuffer.isView(Ee))return q(Ee);if(Ee==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee);if(un(Ee,ArrayBuffer)||Ee&&un(Ee.buffer,ArrayBuffer))return X(Ee,N,D);if(typeof Ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=Ee.valueOf&&Ee.valueOf();if(ge!=null&&ge!==Ee)return b.from(ge,N,D);var He=G(Ee);if(He)return He;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ee[Symbol.toPrimitive]=="function")return b.from(Ee[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ee)}b.from=function(Ee,N,D){return C(Ee,N,D)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function O(Ee){if(typeof Ee!="number")throw new TypeError('"size" argument must be of type number');if(Ee<0)throw new RangeError('The value "'+Ee+'" is invalid for option "size"')}function $(Ee,N,D){return O(Ee),Ee<=0?M(Ee):N!==void 0?typeof D=="string"?M(Ee).fill(N,D):M(Ee).fill(N):M(Ee)}b.alloc=function(Ee,N,D){return $(Ee,N,D)};function j(Ee){return O(Ee),M(Ee<0?0:ae(Ee)|0)}b.allocUnsafe=function(Ee){return j(Ee)},b.allocUnsafeSlow=function(Ee){return j(Ee)};function he(Ee,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=Z(Ee,N)|0,ge=M(D),He=ge.write(Ee,N);return He!==D&&(ge=ge.slice(0,He)),ge}function q(Ee){for(var N=Ee.length<0?0:ae(Ee.length)|0,D=M(N),ge=0;ge<N;ge+=1)D[ge]=Ee[ge]&255;return D}function X(Ee,N,D){if(N<0||Ee.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Ee.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return N===void 0&&D===void 0?ge=new Uint8Array(Ee):D===void 0?ge=new Uint8Array(Ee,N):ge=new Uint8Array(Ee,N,D),ge.__proto__=b.prototype,ge}function G(Ee){if(b.isBuffer(Ee)){var N=ae(Ee.length)|0,D=M(N);return D.length===0||Ee.copy(D,0,0,N),D}if(Ee.length!==void 0)return typeof Ee.length!="number"||Vt(Ee.length)?M(0):q(Ee);if(Ee.type==="Buffer"&&Array.isArray(Ee.data))return q(Ee.data)}function ae(Ee){if(Ee>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Ee|0}function K(Ee){return+Ee!=Ee&&(Ee=0),b.alloc(+Ee)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,D){if(un(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),un(D,Uint8Array)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(N)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var ge=N.length,He=D.length,et=0,ht=Math.min(ge,He);et<ht;++et)if(N[et]!==D[et]){ge=N[et],He=D[et];break}return ge<He?-1:He<ge?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var ge;if(D===void 0)for(D=0,ge=0;ge<N.length;++ge)D+=N[ge].length;var He=b.allocUnsafe(D),et=0;for(ge=0;ge<N.length;++ge){var ht=N[ge];if(un(ht,Uint8Array)&&(ht=b.from(ht)),!b.isBuffer(ht))throw new TypeError('"list" argument must be an Array of Buffers');ht.copy(He,et),et+=ht.length}return He};function Z(Ee,N){if(b.isBuffer(Ee))return Ee.length;if(ArrayBuffer.isView(Ee)||un(Ee,ArrayBuffer))return Ee.byteLength;if(typeof Ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ee);var D=Ee.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&D===0)return 0;for(var He=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Wt(Ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return Qe(Ee).length;default:if(He)return ge?-1:Wt(Ee).length;N=(""+N).toLowerCase(),He=!0}}b.byteLength=Z;function T(Ee,N,D){var ge=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(Ee||(Ee="utf8");;)switch(Ee){case"hex":return Ae(this,N,D);case"utf8":case"utf-8":return re(this,N,D);case"ascii":return Ce(this,N,D);case"latin1":case"binary":return Ue(this,N,D);case"base64":return ee(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,N,D);default:if(ge)throw new TypeError("Unknown encoding: "+Ee);Ee=(Ee+"").toLowerCase(),ge=!0}}b.prototype._isBuffer=!0;function L(Ee,N,D){var ge=Ee[N];Ee[N]=Ee[D],Ee[D]=ge}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)L(this,D,D+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)L(this,D,D+3),L(this,D+1,D+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)L(this,D,D+7),L(this,D+1,D+6),L(this,D+2,D+5),L(this,D+3,D+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?re(this,0,N):T.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",D=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,D,ge,He,et){if(un(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),ge===void 0&&(ge=N?N.length:0),He===void 0&&(He=0),et===void 0&&(et=this.length),D<0||ge>N.length||He<0||et>this.length)throw new RangeError("out of range index");if(He>=et&&D>=ge)return 0;if(He>=et)return-1;if(D>=ge)return 1;if(D>>>=0,ge>>>=0,He>>>=0,et>>>=0,this===N)return 0;for(var ht=et-He,ue=ge-D,k=Math.min(ht,ue),V=this.slice(He,et),Te=N.slice(D,ge),Ve=0;Ve<k;++Ve)if(V[Ve]!==Te[Ve]){ht=V[Ve],ue=Te[Ve];break}return ht<ue?-1:ue<ht?1:0};function B(Ee,N,D,ge,He){if(Ee.length===0)return-1;if(typeof D=="string"?(ge=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,Vt(D)&&(D=He?0:Ee.length-1),D<0&&(D=Ee.length+D),D>=Ee.length){if(He)return-1;D=Ee.length-1}else if(D<0)if(He)D=0;else return-1;if(typeof N=="string"&&(N=b.from(N,ge)),b.isBuffer(N))return N.length===0?-1:te(Ee,N,D,ge,He);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?He?Uint8Array.prototype.indexOf.call(Ee,N,D):Uint8Array.prototype.lastIndexOf.call(Ee,N,D):te(Ee,[N],D,ge,He);throw new TypeError("val must be string, number or Buffer")}function te(Ee,N,D,ge,He){var et=1,ht=Ee.length,ue=N.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(Ee.length<2||N.length<2)return-1;et=2,ht/=2,ue/=2,D/=2}function k(Ge,Et){return et===1?Ge[Et]:Ge.readUInt16BE(Et*et)}var V;if(He){var Te=-1;for(V=D;V<ht;V++)if(k(Ee,V)===k(N,Te===-1?0:V-Te)){if(Te===-1&&(Te=V),V-Te+1===ue)return Te*et}else Te!==-1&&(V-=V-Te),Te=-1}else for(D+ue>ht&&(D=ht-ue),V=D;V>=0;V--){for(var Ve=!0,rt=0;rt<ue;rt++)if(k(Ee,V+rt)!==k(N,rt)){Ve=!1;break}if(Ve)return V}return-1}b.prototype.includes=function(N,D,ge){return this.indexOf(N,D,ge)!==-1},b.prototype.indexOf=function(N,D,ge){return B(this,N,D,ge,!0)},b.prototype.lastIndexOf=function(N,D,ge){return B(this,N,D,ge,!1)};function H(Ee,N,D,ge){D=Number(D)||0;var He=Ee.length-D;ge?(ge=Number(ge),ge>He&&(ge=He)):ge=He;var et=N.length;ge>et/2&&(ge=et/2);for(var ht=0;ht<ge;++ht){var ue=parseInt(N.substr(ht*2,2),16);if(Vt(ue))return ht;Ee[D+ht]=ue}return ht}function ve(Ee,N,D,ge){return _n(Wt(N,Ee.length-D),Ee,D,ge)}function _e(Ee,N,D,ge){return _n(Ht(N),Ee,D,ge)}function pe(Ee,N,D,ge){return _e(Ee,N,D,ge)}function oe(Ee,N,D,ge){return _n(Qe(N),Ee,D,ge)}function ce(Ee,N,D,ge){return _n(ln(N,Ee.length-D),Ee,D,ge)}b.prototype.write=function(N,D,ge,He){if(D===void 0)He="utf8",ge=this.length,D=0;else if(ge===void 0&&typeof D=="string")He=D,ge=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(ge)?(ge=ge>>>0,He===void 0&&(He="utf8")):(He=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var et=this.length-D;if((ge===void 0||ge>et)&&(ge=et),N.length>0&&(ge<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");He||(He="utf8");for(var ht=!1;;)switch(He){case"hex":return H(this,N,D,ge);case"utf8":case"utf-8":return ve(this,N,D,ge);case"ascii":return _e(this,N,D,ge);case"latin1":case"binary":return pe(this,N,D,ge);case"base64":return oe(this,N,D,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,N,D,ge);default:if(ht)throw new TypeError("Unknown encoding: "+He);He=(""+He).toLowerCase(),ht=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(Ee,N,D){return N===0&&D===Ee.length?m.fromByteArray(Ee):m.fromByteArray(Ee.slice(N,D))}function re(Ee,N,D){D=Math.min(Ee.length,D);for(var ge=[],He=N;He<D;){var et=Ee[He],ht=null,ue=et>239?4:et>223?3:et>191?2:1;if(He+ue<=D){var k,V,Te,Ve;switch(ue){case 1:et<128&&(ht=et);break;case 2:k=Ee[He+1],(k&192)===128&&(Ve=(et&31)<<6|k&63,Ve>127&&(ht=Ve));break;case 3:k=Ee[He+1],V=Ee[He+2],(k&192)===128&&(V&192)===128&&(Ve=(et&15)<<12|(k&63)<<6|V&63,Ve>2047&&(Ve<55296||Ve>57343)&&(ht=Ve));break;case 4:k=Ee[He+1],V=Ee[He+2],Te=Ee[He+3],(k&192)===128&&(V&192)===128&&(Te&192)===128&&(Ve=(et&15)<<18|(k&63)<<12|(V&63)<<6|Te&63,Ve>65535&&Ve<1114112&&(ht=Ve))}}ht===null?(ht=65533,ue=1):ht>65535&&(ht-=65536,ge.push(ht>>>10&1023|55296),ht=56320|ht&1023),ge.push(ht),He+=ue}return Se(ge)}var fe=4096;function Se(Ee){var N=Ee.length;if(N<=fe)return String.fromCharCode.apply(String,Ee);for(var D="",ge=0;ge<N;)D+=String.fromCharCode.apply(String,Ee.slice(ge,ge+=fe));return D}function Ce(Ee,N,D){var ge="";D=Math.min(Ee.length,D);for(var He=N;He<D;++He)ge+=String.fromCharCode(Ee[He]&127);return ge}function Ue(Ee,N,D){var ge="";D=Math.min(Ee.length,D);for(var He=N;He<D;++He)ge+=String.fromCharCode(Ee[He]);return ge}function Ae(Ee,N,D){var ge=Ee.length;(!N||N<0)&&(N=0),(!D||D<0||D>ge)&&(D=ge);for(var He="",et=N;et<D;++et)He+=xt(Ee[et]);return He}function Fe(Ee,N,D){for(var ge=Ee.slice(N,D),He="",et=0;et<ge.length;et+=2)He+=String.fromCharCode(ge[et]+ge[et+1]*256);return He}b.prototype.slice=function(N,D){var ge=this.length;N=~~N,D=D===void 0?ge:~~D,N<0?(N+=ge,N<0&&(N=0)):N>ge&&(N=ge),D<0?(D+=ge,D<0&&(D=0)):D>ge&&(D=ge),D<N&&(D=N);var He=this.subarray(N,D);return He.__proto__=b.prototype,He};function Ze(Ee,N,D){if(Ee%1!==0||Ee<0)throw new RangeError("offset is not uint");if(Ee+N>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,D,ge){N=N>>>0,D=D>>>0,ge||Ze(N,D,this.length);for(var He=this[N],et=1,ht=0;++ht<D&&(et*=256);)He+=this[N+ht]*et;return He},b.prototype.readUIntBE=function(N,D,ge){N=N>>>0,D=D>>>0,ge||Ze(N,D,this.length);for(var He=this[N+--D],et=1;D>0&&(et*=256);)He+=this[N+--D]*et;return He},b.prototype.readUInt8=function(N,D){return N=N>>>0,D||Ze(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||Ze(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||Ze(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,D,ge){N=N>>>0,D=D>>>0,ge||Ze(N,D,this.length);for(var He=this[N],et=1,ht=0;++ht<D&&(et*=256);)He+=this[N+ht]*et;return et*=128,He>=et&&(He-=Math.pow(2,8*D)),He},b.prototype.readIntBE=function(N,D,ge){N=N>>>0,D=D>>>0,ge||Ze(N,D,this.length);for(var He=D,et=1,ht=this[N+--He];He>0&&(et*=256);)ht+=this[N+--He]*et;return et*=128,ht>=et&&(ht-=Math.pow(2,8*D)),ht},b.prototype.readInt8=function(N,D){return N=N>>>0,D||Ze(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,D){N=N>>>0,D||Ze(N,2,this.length);var ge=this[N]|this[N+1]<<8;return ge&32768?ge|4294901760:ge},b.prototype.readInt16BE=function(N,D){N=N>>>0,D||Ze(N,2,this.length);var ge=this[N+1]|this[N]<<8;return ge&32768?ge|4294901760:ge},b.prototype.readInt32LE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),u.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,D){return N=N>>>0,D||Ze(N,4,this.length),u.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||Ze(N,8,this.length),u.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||Ze(N,8,this.length),u.read(this,N,!1,52,8)};function We(Ee,N,D,ge,He,et){if(!b.isBuffer(Ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>He||N<et)throw new RangeError('"value" argument is out of bounds');if(D+ge>Ee.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,D,ge,He){if(N=+N,D=D>>>0,ge=ge>>>0,!He){var et=Math.pow(2,8*ge)-1;We(this,N,D,ge,et,0)}var ht=1,ue=0;for(this[D]=N&255;++ue<ge&&(ht*=256);)this[D+ue]=N/ht&255;return D+ge},b.prototype.writeUIntBE=function(N,D,ge,He){if(N=+N,D=D>>>0,ge=ge>>>0,!He){var et=Math.pow(2,8*ge)-1;We(this,N,D,ge,et,0)}var ht=ge-1,ue=1;for(this[D+ht]=N&255;--ht>=0&&(ue*=256);)this[D+ht]=N/ue&255;return D+ge},b.prototype.writeUInt8=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,1,255,0),this[D]=N&255,D+1},b.prototype.writeUInt16LE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeUInt16BE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeUInt32LE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},b.prototype.writeUInt32BE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},b.prototype.writeIntLE=function(N,D,ge,He){if(N=+N,D=D>>>0,!He){var et=Math.pow(2,8*ge-1);We(this,N,D,ge,et-1,-et)}var ht=0,ue=1,k=0;for(this[D]=N&255;++ht<ge&&(ue*=256);)N<0&&k===0&&this[D+ht-1]!==0&&(k=1),this[D+ht]=(N/ue>>0)-k&255;return D+ge},b.prototype.writeIntBE=function(N,D,ge,He){if(N=+N,D=D>>>0,!He){var et=Math.pow(2,8*ge-1);We(this,N,D,ge,et-1,-et)}var ht=ge-1,ue=1,k=0;for(this[D+ht]=N&255;--ht>=0&&(ue*=256);)N<0&&k===0&&this[D+ht+1]!==0&&(k=1),this[D+ht]=(N/ue>>0)-k&255;return D+ge},b.prototype.writeInt8=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},b.prototype.writeInt16LE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeInt16BE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeInt32LE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},b.prototype.writeInt32BE=function(N,D,ge){return N=+N,D=D>>>0,ge||We(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function it(Ee,N,D,ge,He,et){if(D+ge>Ee.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ct(Ee,N,D,ge,He){return N=+N,D=D>>>0,He||it(Ee,N,D,4),u.write(Ee,N,D,ge,23,4),D+4}b.prototype.writeFloatLE=function(N,D,ge){return ct(this,N,D,!0,ge)},b.prototype.writeFloatBE=function(N,D,ge){return ct(this,N,D,!1,ge)};function vt(Ee,N,D,ge,He){return N=+N,D=D>>>0,He||it(Ee,N,D,8),u.write(Ee,N,D,ge,52,8),D+8}b.prototype.writeDoubleLE=function(N,D,ge){return vt(this,N,D,!0,ge)},b.prototype.writeDoubleBE=function(N,D,ge){return vt(this,N,D,!1,ge)},b.prototype.copy=function(N,D,ge,He){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!He&&He!==0&&(He=this.length),D>=N.length&&(D=N.length),D||(D=0),He>0&&He<ge&&(He=ge),He===ge||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(He<0)throw new RangeError("sourceEnd out of bounds");He>this.length&&(He=this.length),N.length-D<He-ge&&(He=N.length-D+ge);var et=He-ge;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,ge,He);else if(this===N&&ge<D&&D<He)for(var ht=et-1;ht>=0;--ht)N[ht+D]=this[ht+ge];else Uint8Array.prototype.set.call(N,this.subarray(ge,He),D);return et},b.prototype.fill=function(N,D,ge,He){if(typeof N=="string"){if(typeof D=="string"?(He=D,D=0,ge=this.length):typeof ge=="string"&&(He=ge,ge=this.length),He!==void 0&&typeof He!="string")throw new TypeError("encoding must be a string");if(typeof He=="string"&&!b.isEncoding(He))throw new TypeError("Unknown encoding: "+He);if(N.length===1){var et=N.charCodeAt(0);(He==="utf8"&&et<128||He==="latin1")&&(N=et)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<ge)throw new RangeError("Out of range index");if(ge<=D)return this;D=D>>>0,ge=ge===void 0?this.length:ge>>>0,N||(N=0);var ht;if(typeof N=="number")for(ht=D;ht<ge;++ht)this[ht]=N;else{var ue=b.isBuffer(N)?N:b.from(N,He),k=ue.length;if(k===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ht=0;ht<ge-D;++ht)this[ht+D]=ue[ht%k]}return this};var Mt=/[^+/0-9A-Za-z-_]/g;function pt(Ee){if(Ee=Ee.split("=")[0],Ee=Ee.trim().replace(Mt,""),Ee.length<2)return"";for(;Ee.length%4!==0;)Ee=Ee+"=";return Ee}function xt(Ee){return Ee<16?"0"+Ee.toString(16):Ee.toString(16)}function Wt(Ee,N){N=N||1/0;for(var D,ge=Ee.length,He=null,et=[],ht=0;ht<ge;++ht){if(D=Ee.charCodeAt(ht),D>55295&&D<57344){if(!He){if(D>56319){(N-=3)>-1&&et.push(239,191,189);continue}else if(ht+1===ge){(N-=3)>-1&&et.push(239,191,189);continue}He=D;continue}if(D<56320){(N-=3)>-1&&et.push(239,191,189),He=D;continue}D=(He-55296<<10|D-56320)+65536}else He&&(N-=3)>-1&&et.push(239,191,189);if(He=null,D<128){if((N-=1)<0)break;et.push(D)}else if(D<2048){if((N-=2)<0)break;et.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;et.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;et.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return et}function Ht(Ee){for(var N=[],D=0;D<Ee.length;++D)N.push(Ee.charCodeAt(D)&255);return N}function ln(Ee,N){for(var D,ge,He,et=[],ht=0;ht<Ee.length&&!((N-=2)<0);++ht)D=Ee.charCodeAt(ht),ge=D>>8,He=D%256,et.push(He),et.push(ge);return et}function Qe(Ee){return m.toByteArray(pt(Ee))}function _n(Ee,N,D,ge){for(var He=0;He<ge&&!(He+D>=N.length||He>=Ee.length);++He)N[He+D]=Ee[He];return He}function un(Ee,N){return Ee instanceof N||Ee!=null&&Ee.constructor!=null&&Ee.constructor.name!=null&&Ee.constructor.name===N.name}function Vt(Ee){return Ee!==Ee}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const p=i("./validator"),m=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:m,XMLValidator:p,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const p=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",m=p+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+p+"]["+m+"]*",S=new RegExp("^"+u+"$"),P=function(b,C){const O=[];let $=C.exec(b);for(;$;){const j=[];j.startIndex=C.lastIndex-$[0].length;const he=$.length;for(let q=0;q<he;q++)j.push($[q]);O.push(j),$=C.exec(b)}return O},M=function(b){const C=S.exec(b);return!(C===null||typeof C>"u")};c.isExist=function(b){return typeof b<"u"},c.isEmptyObject=function(b){return Object.keys(b).length===0},c.merge=function(b,C,O){if(C){const $=Object.keys(C),j=$.length;for(let he=0;he<j;he++)O==="strict"?b[$[he]]=[C[$[he]]]:b[$[he]]=C[$[he]]}},c.getValue=function(b){return c.isExist(b)?b:""},c.isName=M,c.getAllMatches=P,c.nameRegexp=u},{}],5:[function(i,a,c){const p=i("./util"),m={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(Z,T){T=Object.assign({},m,T);const L=[];let B=!1,te=!1;Z[0]==="\uFEFF"&&(Z=Z.substr(1));for(let H=0;H<Z.length;H++)if(Z[H]==="<"&&Z[H+1]==="?"){if(H+=2,H=S(Z,H),H.err)return H}else if(Z[H]==="<"){let ve=H;if(H++,Z[H]==="!"){H=P(Z,H);continue}else{let _e=!1;Z[H]==="/"&&(_e=!0,H++);let pe="";for(;H<Z.length&&Z[H]!==">"&&Z[H]!==" "&&Z[H]!=="	"&&Z[H]!==`
`&&Z[H]!=="\r";H++)pe+=Z[H];if(pe=pe.trim(),pe[pe.length-1]==="/"&&(pe=pe.substring(0,pe.length-1),H--),!G(pe)){let ee;return pe.trim().length===0?ee="Invalid space after '<'.":ee="Tag '"+pe+"' is an invalid name.",q("InvalidTag",ee,ae(Z,H))}const oe=C(Z,H);if(oe===!1)return q("InvalidAttr","Attributes for '"+pe+"' have open quote.",ae(Z,H));let ce=oe.value;if(H=oe.index,ce[ce.length-1]==="/"){const ee=H-ce.length;ce=ce.substring(0,ce.length-1);const re=$(ce,T);if(re===!0)B=!0;else return q(re.err.code,re.err.msg,ae(Z,ee+re.err.line))}else if(_e)if(oe.tagClosed){if(ce.trim().length>0)return q("InvalidTag","Closing tag '"+pe+"' can't have attributes or invalid starting.",ae(Z,ve));{const ee=L.pop();if(pe!==ee.tagName){let re=ae(Z,ee.tagStartPos);return q("InvalidTag","Expected closing tag '"+ee.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+pe+"'.",ae(Z,ve))}L.length==0&&(te=!0)}}else return q("InvalidTag","Closing tag '"+pe+"' doesn't have proper closing.",ae(Z,H));else{const ee=$(ce,T);if(ee!==!0)return q(ee.err.code,ee.err.msg,ae(Z,H-ce.length+ee.err.line));if(te===!0)return q("InvalidXml","Multiple possible root nodes found.",ae(Z,H));T.unpairedTags.indexOf(pe)!==-1||L.push({tagName:pe,tagStartPos:ve}),B=!0}for(H++;H<Z.length;H++)if(Z[H]==="<")if(Z[H+1]==="!"){H++,H=P(Z,H);continue}else if(Z[H+1]==="?"){if(H=S(Z,++H),H.err)return H}else break;else if(Z[H]==="&"){const ee=he(Z,H);if(ee==-1)return q("InvalidChar","char '&' is not expected.",ae(Z,H));H=ee}else if(te===!0&&!u(Z[H]))return q("InvalidXml","Extra text at the end",ae(Z,H));Z[H]==="<"&&H--}}else{if(u(Z[H]))continue;return q("InvalidChar","char '"+Z[H]+"' is not expected.",ae(Z,H))}if(B){if(L.length==1)return q("InvalidTag","Unclosed tag '"+L[0].tagName+"'.",ae(Z,L[0].tagStartPos));if(L.length>0)return q("InvalidXml","Invalid '"+JSON.stringify(L.map(H=>H.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return q("InvalidXml","Start tag expected.",1);return!0};function u(Z){return Z===" "||Z==="	"||Z===`
`||Z==="\r"}function S(Z,T){const L=T;for(;T<Z.length;T++)if(Z[T]=="?"||Z[T]==" "){const B=Z.substr(L,T-L);if(T>5&&B==="xml")return q("InvalidXml","XML declaration allowed only at the start of the document.",ae(Z,T));if(Z[T]=="?"&&Z[T+1]==">"){T++;break}else continue}return T}function P(Z,T){if(Z.length>T+5&&Z[T+1]==="-"&&Z[T+2]==="-"){for(T+=3;T<Z.length;T++)if(Z[T]==="-"&&Z[T+1]==="-"&&Z[T+2]===">"){T+=2;break}}else if(Z.length>T+8&&Z[T+1]==="D"&&Z[T+2]==="O"&&Z[T+3]==="C"&&Z[T+4]==="T"&&Z[T+5]==="Y"&&Z[T+6]==="P"&&Z[T+7]==="E"){let L=1;for(T+=8;T<Z.length;T++)if(Z[T]==="<")L++;else if(Z[T]===">"&&(L--,L===0))break}else if(Z.length>T+9&&Z[T+1]==="["&&Z[T+2]==="C"&&Z[T+3]==="D"&&Z[T+4]==="A"&&Z[T+5]==="T"&&Z[T+6]==="A"&&Z[T+7]==="["){for(T+=8;T<Z.length;T++)if(Z[T]==="]"&&Z[T+1]==="]"&&Z[T+2]===">"){T+=2;break}}return T}const M='"',b="'";function C(Z,T){let L="",B="",te=!1;for(;T<Z.length;T++){if(Z[T]===M||Z[T]===b)B===""?B=Z[T]:B!==Z[T]||(B="");else if(Z[T]===">"&&B===""){te=!0;break}L+=Z[T]}return B!==""?!1:{value:L,index:T,tagClosed:te}}const O=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function $(Z,T){const L=p.getAllMatches(Z,O),B={};for(let te=0;te<L.length;te++){if(L[te][1].length===0)return q("InvalidAttr","Attribute '"+L[te][2]+"' has no space in starting.",K(L[te]));if(L[te][3]!==void 0&&L[te][4]===void 0)return q("InvalidAttr","Attribute '"+L[te][2]+"' is without value.",K(L[te]));if(L[te][3]===void 0&&!T.allowBooleanAttributes)return q("InvalidAttr","boolean attribute '"+L[te][2]+"' is not allowed.",K(L[te]));const H=L[te][2];if(!X(H))return q("InvalidAttr","Attribute '"+H+"' is an invalid name.",K(L[te]));if(!B.hasOwnProperty(H))B[H]=1;else return q("InvalidAttr","Attribute '"+H+"' is repeated.",K(L[te]))}return!0}function j(Z,T){let L=/\d/;for(Z[T]==="x"&&(T++,L=/[\da-fA-F]/);T<Z.length;T++){if(Z[T]===";")return T;if(!Z[T].match(L))break}return-1}function he(Z,T){if(T++,Z[T]===";")return-1;if(Z[T]==="#")return T++,j(Z,T);let L=0;for(;T<Z.length;T++,L++)if(!(Z[T].match(/\w/)&&L<20)){if(Z[T]===";")break;return-1}return T}function q(Z,T,L){return{err:{code:Z,msg:T,line:L.line||L,col:L.col}}}function X(Z){return p.isName(Z)}function G(Z){return p.isName(Z)}function ae(Z,T){const L=Z.substring(0,T).split(/\r?\n/);return{line:L.length,col:L[L.length-1].length+1}}function K(Z){return Z.startIndex+Z[1].length}},{"./util":4}],6:[function(i,a,c){const p=i("./orderedJs2Xml"),m={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,C){return C},attributeValueProcessor:function(b,C){return C},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},m,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=M),this.processTextOrObjNode=S,this.options.format?(this.indentate=P,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?p(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,C){let O="",$="";for(let j in b)if(Object.prototype.hasOwnProperty.call(b,j))if(typeof b[j]>"u")this.isAttribute(j)&&($+="");else if(b[j]===null)this.isAttribute(j)?$+="":j[0]==="?"?$+=this.indentate(C)+"<"+j+"?"+this.tagEndChar:$+=this.indentate(C)+"<"+j+"/"+this.tagEndChar;else if(b[j]instanceof Date)$+=this.buildTextValNode(b[j],j,"",C);else if(typeof b[j]!="object"){const he=this.isAttribute(j);if(he)O+=this.buildAttrPairStr(he,""+b[j]);else if(j===this.options.textNodeName){let q=this.options.tagValueProcessor(j,""+b[j]);$+=this.replaceEntitiesValue(q)}else $+=this.buildTextValNode(b[j],j,"",C)}else if(Array.isArray(b[j])){const he=b[j].length;let q="";for(let X=0;X<he;X++){const G=b[j][X];typeof G>"u"||(G===null?j[0]==="?"?$+=this.indentate(C)+"<"+j+"?"+this.tagEndChar:$+=this.indentate(C)+"<"+j+"/"+this.tagEndChar:typeof G=="object"?this.options.oneListGroup?q+=this.j2x(G,C+1).val:q+=this.processTextOrObjNode(G,j,C):q+=this.buildTextValNode(G,j,"",C))}this.options.oneListGroup&&(q=this.buildObjectNode(q,j,"",C)),$+=q}else if(this.options.attributesGroupName&&j===this.options.attributesGroupName){const he=Object.keys(b[j]),q=he.length;for(let X=0;X<q;X++)O+=this.buildAttrPairStr(he[X],""+b[j][he[X]])}else $+=this.processTextOrObjNode(b[j],j,C);return{attrStr:O,val:$}},u.prototype.buildAttrPairStr=function(b,C){return C=this.options.attributeValueProcessor(b,""+C),C=this.replaceEntitiesValue(C),this.options.suppressBooleanAttributes&&C==="true"?" "+b:" "+b+'="'+C+'"'};function S(b,C,O){const $=this.j2x(b,O+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],C,$.attrStr,O):this.buildObjectNode($.val,C,$.attrStr,O)}u.prototype.buildObjectNode=function(b,C,O,$){if(b==="")return C[0]==="?"?this.indentate($)+"<"+C+O+"?"+this.tagEndChar:this.indentate($)+"<"+C+O+this.closeTag(C)+this.tagEndChar;{let j="</"+C+this.tagEndChar,he="";return C[0]==="?"&&(he="?",j=""),(O||O==="")&&b.indexOf("<")===-1?this.indentate($)+"<"+C+O+he+">"+b+j:this.options.commentPropName!==!1&&C===this.options.commentPropName&&he.length===0?this.indentate($)+`<!--${b}-->`+this.newLine:this.indentate($)+"<"+C+O+he+this.tagEndChar+b+this.indentate($)+j}},u.prototype.closeTag=function(b){let C="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(C="/"):this.options.suppressEmptyNode?C="/":C=`></${b}`,C},u.prototype.buildTextValNode=function(b,C,O,$){if(this.options.cdataPropName!==!1&&C===this.options.cdataPropName)return this.indentate($)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&C===this.options.commentPropName)return this.indentate($)+`<!--${b}-->`+this.newLine;if(C[0]==="?")return this.indentate($)+"<"+C+O+"?"+this.tagEndChar;{let j=this.options.tagValueProcessor(C,b);return j=this.replaceEntitiesValue(j),j===""?this.indentate($)+"<"+C+O+this.closeTag(C)+this.tagEndChar:this.indentate($)+"<"+C+O+">"+j+"</"+C+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let C=0;C<this.options.entities.length;C++){const O=this.options.entities[C];b=b.replace(O.regex,O.val)}return b};function P(b){return this.options.indentBy.repeat(b)}function M(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const p=`
`;function m(C,O){let $="";return O.format&&O.indentBy.length>0&&($=p),u(C,O,"",$)}function u(C,O,$,j){let he="",q=!1;for(let X=0;X<C.length;X++){const G=C[X],ae=S(G);if(ae===void 0)continue;let K="";if($.length===0?K=ae:K=`${$}.${ae}`,ae===O.textNodeName){let te=G[ae];M(K,O)||(te=O.tagValueProcessor(ae,te),te=b(te,O)),q&&(he+=j),he+=te,q=!1;continue}else if(ae===O.cdataPropName){q&&(he+=j),he+=`<![CDATA[${G[ae][0][O.textNodeName]}]]>`,q=!1;continue}else if(ae===O.commentPropName){he+=j+`<!--${G[ae][0][O.textNodeName]}-->`,q=!0;continue}else if(ae[0]==="?"){const te=P(G[":@"],O),H=ae==="?xml"?"":j;let ve=G[ae][0][O.textNodeName];ve=ve.length!==0?" "+ve:"",he+=H+`<${ae}${ve}${te}?>`,q=!0;continue}let Z=j;Z!==""&&(Z+=O.indentBy);const T=P(G[":@"],O),L=j+`<${ae}${T}`,B=u(G[ae],O,K,Z);O.unpairedTags.indexOf(ae)!==-1?O.suppressUnpairedNode?he+=L+">":he+=L+"/>":(!B||B.length===0)&&O.suppressEmptyNode?he+=L+"/>":B&&B.endsWith(">")?he+=L+`>${B}${j}</${ae}>`:(he+=L+">",B&&j!==""&&(B.includes("/>")||B.includes("</"))?he+=j+O.indentBy+B+j:he+=B,he+=`</${ae}>`),q=!0}return he}function S(C){const O=Object.keys(C);for(let $=0;$<O.length;$++){const j=O[$];if(C.hasOwnProperty(j)&&j!==":@")return j}}function P(C,O){let $="";if(C&&!O.ignoreAttributes)for(let j in C){if(!C.hasOwnProperty(j))continue;let he=O.attributeValueProcessor(j,C[j]);he=b(he,O),he===!0&&O.suppressBooleanAttributes?$+=` ${j.substr(O.attributeNamePrefix.length)}`:$+=` ${j.substr(O.attributeNamePrefix.length)}="${he}"`}return $}function M(C,O){C=C.substr(0,C.length-O.textNodeName.length-1);let $=C.substr(C.lastIndexOf(".")+1);for(let j in O.stopNodes)if(O.stopNodes[j]===C||O.stopNodes[j]==="*."+$)return!0;return!1}function b(C,O){if(C&&C.length>0&&O.processEntities)for(let $=0;$<O.entities.length;$++){const j=O.entities[$];C=C.replace(j.regex,j.val)}return C}a.exports=m},{}],8:[function(i,a,c){const p=i("../util");function m($,j){const he={};if($[j+3]==="O"&&$[j+4]==="C"&&$[j+5]==="T"&&$[j+6]==="Y"&&$[j+7]==="P"&&$[j+8]==="E"){j=j+9;let q=1,X=!1,G=!1,ae="";for(;j<$.length;j++)if($[j]==="<"&&!G){if(X&&P($,j))j+=7,[entityName,val,j]=u($,j+1),val.indexOf("&")===-1&&(he[O(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(X&&M($,j))j+=8;else if(X&&b($,j))j+=8;else if(X&&C($,j))j+=9;else if(S)G=!0;else throw new Error("Invalid DOCTYPE");q++,ae=""}else if($[j]===">"){if(G?$[j-1]==="-"&&$[j-2]==="-"&&(G=!1,q--):q--,q===0)break}else $[j]==="["?X=!0:ae+=$[j];if(q!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:he,i:j}}function u($,j){let he="";for(;j<$.length&&$[j]!=="'"&&$[j]!=='"';j++)he+=$[j];if(he=he.trim(),he.indexOf(" ")!==-1)throw new Error("External entites are not supported");const q=$[j++];let X="";for(;j<$.length&&$[j]!==q;j++)X+=$[j];return[he,X,j]}function S($,j){return $[j+1]==="!"&&$[j+2]==="-"&&$[j+3]==="-"}function P($,j){return $[j+1]==="!"&&$[j+2]==="E"&&$[j+3]==="N"&&$[j+4]==="T"&&$[j+5]==="I"&&$[j+6]==="T"&&$[j+7]==="Y"}function M($,j){return $[j+1]==="!"&&$[j+2]==="E"&&$[j+3]==="L"&&$[j+4]==="E"&&$[j+5]==="M"&&$[j+6]==="E"&&$[j+7]==="N"&&$[j+8]==="T"}function b($,j){return $[j+1]==="!"&&$[j+2]==="A"&&$[j+3]==="T"&&$[j+4]==="T"&&$[j+5]==="L"&&$[j+6]==="I"&&$[j+7]==="S"&&$[j+8]==="T"}function C($,j){return $[j+1]==="!"&&$[j+2]==="N"&&$[j+3]==="O"&&$[j+4]==="T"&&$[j+5]==="A"&&$[j+6]==="T"&&$[j+7]==="I"&&$[j+8]==="O"&&$[j+9]==="N"}function O($){if(p.isName($))return $;throw new Error(`Invalid entity name ${$}`)}a.exports=m},{"../util":4}],9:[function(i,a,c){const p={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,S){return S},attributeValueProcessor:function(u,S){return S},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,S,P){return u}},m=function(u){return Object.assign({},p,u)};c.buildOptions=m,c.defaultOptions=p},{}],10:[function(i,a,c){const p=i("../util"),m=i("./xmlNode"),u=i("./DocTypeReader"),S=i("strnum");class P{constructor(te){this.options=te,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=M,this.parseXml=j,this.parseTextData=b,this.resolveNameSpace=C,this.buildAttributesMap=$,this.isItStopNode=G,this.replaceEntitiesValue=q,this.readStopNodeData=T,this.saveTextToParentTag=X,this.addChild=he}}function M(B){const te=Object.keys(B);for(let H=0;H<te.length;H++){const ve=te[H];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:B[ve]}}}function b(B,te,H,ve,_e,pe,oe){if(B!==void 0&&(this.options.trimValues&&!ve&&(B=B.trim()),B.length>0)){oe||(B=this.replaceEntitiesValue(B));const ce=this.options.tagValueProcessor(te,B,H,_e,pe);return ce==null?B:typeof ce!=typeof B||ce!==B?ce:this.options.trimValues?L(B,this.options.parseTagValue,this.options.numberParseOptions):B.trim()===B?L(B,this.options.parseTagValue,this.options.numberParseOptions):B}}function C(B){if(this.options.removeNSPrefix){const te=B.split(":"),H=B.charAt(0)==="/"?"/":"";if(te[0]==="xmlns")return"";te.length===2&&(B=H+te[1])}return B}const O=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function $(B,te,H){if(!this.options.ignoreAttributes&&typeof B=="string"){const ve=p.getAllMatches(B,O),_e=ve.length,pe={};for(let oe=0;oe<_e;oe++){const ce=this.resolveNameSpace(ve[oe][1]);let ee=ve[oe][4],re=this.options.attributeNamePrefix+ce;if(ce.length)if(this.options.transformAttributeName&&(re=this.options.transformAttributeName(re)),re==="__proto__"&&(re="#__proto__"),ee!==void 0){this.options.trimValues&&(ee=ee.trim()),ee=this.replaceEntitiesValue(ee);const fe=this.options.attributeValueProcessor(ce,ee,te);fe==null?pe[re]=ee:typeof fe!=typeof ee||fe!==ee?pe[re]=fe:pe[re]=L(ee,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(pe[re]=!0)}if(!Object.keys(pe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=pe,oe}return pe}}const j=function(B){B=B.replace(/\r\n?/g,`
`);const te=new m("!xml");let H=te,ve="",_e="";for(let pe=0;pe<B.length;pe++)if(B[pe]==="<")if(B[pe+1]==="/"){const ce=K(B,">",pe,"Closing Tag is not closed.");let ee=B.substring(pe+2,ce).trim();if(this.options.removeNSPrefix){const Se=ee.indexOf(":");Se!==-1&&(ee=ee.substr(Se+1))}this.options.transformTagName&&(ee=this.options.transformTagName(ee)),H&&(ve=this.saveTextToParentTag(ve,H,_e));const re=_e.substring(_e.lastIndexOf(".")+1);if(ee&&this.options.unpairedTags.indexOf(ee)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${ee}>`);let fe=0;re&&this.options.unpairedTags.indexOf(re)!==-1?(fe=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):fe=_e.lastIndexOf("."),_e=_e.substring(0,fe),H=this.tagsNodeStack.pop(),ve="",pe=ce}else if(B[pe+1]==="?"){let ce=Z(B,pe,!1,"?>");if(!ce)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,H,_e),!(this.options.ignoreDeclaration&&ce.tagName==="?xml"||this.options.ignorePiTags)){const ee=new m(ce.tagName);ee.add(this.options.textNodeName,""),ce.tagName!==ce.tagExp&&ce.attrExpPresent&&(ee[":@"]=this.buildAttributesMap(ce.tagExp,_e,ce.tagName)),this.addChild(H,ee,_e)}pe=ce.closeIndex+1}else if(B.substr(pe+1,3)==="!--"){const ce=K(B,"-->",pe+4,"Comment is not closed.");if(this.options.commentPropName){const ee=B.substring(pe+4,ce-2);ve=this.saveTextToParentTag(ve,H,_e),H.add(this.options.commentPropName,[{[this.options.textNodeName]:ee}])}pe=ce}else if(B.substr(pe+1,2)==="!D"){const ce=u(B,pe);this.docTypeEntities=ce.entities,pe=ce.i}else if(B.substr(pe+1,2)==="!["){const ce=K(B,"]]>",pe,"CDATA is not closed.")-2,ee=B.substring(pe+9,ce);if(ve=this.saveTextToParentTag(ve,H,_e),this.options.cdataPropName)H.add(this.options.cdataPropName,[{[this.options.textNodeName]:ee}]);else{let re=this.parseTextData(ee,H.tagname,_e,!0,!1,!0);re==null&&(re=""),H.add(this.options.textNodeName,re)}pe=ce+2}else{let ce=Z(B,pe,this.options.removeNSPrefix),ee=ce.tagName;const re=ce.rawTagName;let fe=ce.tagExp,Se=ce.attrExpPresent,Ce=ce.closeIndex;this.options.transformTagName&&(ee=this.options.transformTagName(ee)),H&&ve&&H.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,H,_e,!1));const Ue=H;if(Ue&&this.options.unpairedTags.indexOf(Ue.tagname)!==-1&&(H=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),ee!==te.tagname&&(_e+=_e?"."+ee:ee),this.isItStopNode(this.options.stopNodes,_e,ee)){let Ae="";if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1)pe=ce.closeIndex;else if(this.options.unpairedTags.indexOf(ee)!==-1)pe=ce.closeIndex;else{const Ze=this.readStopNodeData(B,re,Ce+1);if(!Ze)throw new Error(`Unexpected end of ${re}`);pe=Ze.i,Ae=Ze.tagContent}const Fe=new m(ee);ee!==fe&&Se&&(Fe[":@"]=this.buildAttributesMap(fe,_e,ee)),Ae&&(Ae=this.parseTextData(Ae,ee,_e,!0,Se,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),Fe.add(this.options.textNodeName,Ae),this.addChild(H,Fe,_e)}else{if(fe.length>0&&fe.lastIndexOf("/")===fe.length-1){ee[ee.length-1]==="/"?(ee=ee.substr(0,ee.length-1),_e=_e.substr(0,_e.length-1),fe=ee):fe=fe.substr(0,fe.length-1),this.options.transformTagName&&(ee=this.options.transformTagName(ee));const Ae=new m(ee);ee!==fe&&Se&&(Ae[":@"]=this.buildAttributesMap(fe,_e,ee)),this.addChild(H,Ae,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Ae=new m(ee);this.tagsNodeStack.push(H),ee!==fe&&Se&&(Ae[":@"]=this.buildAttributesMap(fe,_e,ee)),this.addChild(H,Ae,_e),H=Ae}ve="",pe=Ce}}else ve+=B[pe];return te.child};function he(B,te,H){const ve=this.options.updateTag(te.tagname,H,te[":@"]);ve===!1||(typeof ve=="string"&&(te.tagname=ve),B.addChild(te))}const q=function(B){if(this.options.processEntities){for(let te in this.docTypeEntities){const H=this.docTypeEntities[te];B=B.replace(H.regx,H.val)}for(let te in this.lastEntities){const H=this.lastEntities[te];B=B.replace(H.regex,H.val)}if(this.options.htmlEntities)for(let te in this.htmlEntities){const H=this.htmlEntities[te];B=B.replace(H.regex,H.val)}B=B.replace(this.ampEntity.regex,this.ampEntity.val)}return B};function X(B,te,H,ve){return B&&(ve===void 0&&(ve=Object.keys(te.child).length===0),B=this.parseTextData(B,te.tagname,H,!1,te[":@"]?Object.keys(te[":@"]).length!==0:!1,ve),B!==void 0&&B!==""&&te.add(this.options.textNodeName,B),B=""),B}function G(B,te,H){const ve="*."+H;for(const _e in B){const pe=B[_e];if(ve===pe||te===pe)return!0}return!1}function ae(B,te,H=">"){let ve,_e="";for(let pe=te;pe<B.length;pe++){let oe=B[pe];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===H[0])if(H[1]){if(B[pe+1]===H[1])return{data:_e,index:pe}}else return{data:_e,index:pe};else oe==="	"&&(oe=" ");_e+=oe}}function K(B,te,H,ve){const _e=B.indexOf(te,H);if(_e===-1)throw new Error(ve);return _e+te.length-1}function Z(B,te,H,ve=">"){const _e=ae(B,te+1,ve);if(!_e)return;let pe=_e.data;const oe=_e.index,ce=pe.search(/\s/);let ee=pe,re=!0;ce!==-1&&(ee=pe.substring(0,ce),pe=pe.substring(ce+1).trimStart());const fe=ee;if(H){const Se=ee.indexOf(":");Se!==-1&&(ee=ee.substr(Se+1),re=ee!==_e.data.substr(Se+1))}return{tagName:ee,tagExp:pe,closeIndex:oe,attrExpPresent:re,rawTagName:fe}}function T(B,te,H){const ve=H;let _e=1;for(;H<B.length;H++)if(B[H]==="<")if(B[H+1]==="/"){const pe=K(B,">",H,`${te} is not closed`);if(B.substring(H+2,pe).trim()===te&&(_e--,_e===0))return{tagContent:B.substring(ve,H),i:pe};H=pe}else if(B[H+1]==="?")H=K(B,"?>",H+1,"StopNode is not closed.");else if(B.substr(H+1,3)==="!--")H=K(B,"-->",H+3,"StopNode is not closed.");else if(B.substr(H+1,2)==="![")H=K(B,"]]>",H,"StopNode is not closed.")-2;else{const pe=Z(B,H,">");pe&&((pe&&pe.tagName)===te&&pe.tagExp[pe.tagExp.length-1]!=="/"&&_e++,H=pe.closeIndex)}}function L(B,te,H){if(te&&typeof B=="string"){const ve=B.trim();return ve==="true"?!0:ve==="false"?!1:S(B,H)}else return p.isExist(B)?B:""}a.exports=P},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:p}=i("./OptionsBuilder"),m=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),S=i("../validator");class P{constructor(b){this.externalEntities={},this.options=p(b)}parse(b,C){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(C){C===!0&&(C={});const j=S.validate(b,C);if(j!==!0)throw Error(`${j.err.msg}:${j.err.line}:${j.err.col}`)}const O=new m(this.options);O.addExternalEntities(this.externalEntities);const $=O.parseXml(b);return this.options.preserveOrder||$===void 0?$:u($,this.options)}addEntity(b,C){if(C.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(C==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=C}}a.exports=P},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function p(M,b){return m(M,b)}function m(M,b,C){let O;const $={};for(let j=0;j<M.length;j++){const he=M[j],q=u(he);let X="";if(C===void 0?X=q:X=C+"."+q,q===b.textNodeName)O===void 0?O=he[q]:O+=""+he[q];else{if(q===void 0)continue;if(he[q]){let G=m(he[q],b,X);const ae=P(G,b);he[":@"]?S(G,he[":@"],X,b):Object.keys(G).length===1&&G[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?G=G[b.textNodeName]:Object.keys(G).length===0&&(b.alwaysCreateTextNode?G[b.textNodeName]="":G=""),$[q]!==void 0&&$.hasOwnProperty(q)?(Array.isArray($[q])||($[q]=[$[q]]),$[q].push(G)):b.isArray(q,X,ae)?$[q]=[G]:$[q]=G}}}return typeof O=="string"?O.length>0&&($[b.textNodeName]=O):O!==void 0&&($[b.textNodeName]=O),$}function u(M){const b=Object.keys(M);for(let C=0;C<b.length;C++){const O=b[C];if(O!==":@")return O}}function S(M,b,C,O){if(b){const $=Object.keys(b),j=$.length;for(let he=0;he<j;he++){const q=$[he];O.isArray(q,C+"."+q,!0,!0)?M[q]=[b[q]]:M[q]=b[q]}}}function P(M,b){const{textNodeName:C}=b,O=Object.keys(M).length;return!!(O===0||O===1&&(M[C]||typeof M[C]=="boolean"||M[C]===0))}c.prettify=p},{}],13:[function(i,a,c){class p{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,S){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:S})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=p},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(p,m,u,S,P){var M,b,C=P*8-S-1,O=(1<<C)-1,$=O>>1,j=-7,he=u?P-1:0,q=u?-1:1,X=p[m+he];for(he+=q,M=X&(1<<-j)-1,X>>=-j,j+=C;j>0;M=M*256+p[m+he],he+=q,j-=8);for(b=M&(1<<-j)-1,M>>=-j,j+=S;j>0;b=b*256+p[m+he],he+=q,j-=8);if(M===0)M=1-$;else{if(M===O)return b?NaN:(X?-1:1)*(1/0);b=b+Math.pow(2,S),M=M-$}return(X?-1:1)*b*Math.pow(2,M-S)},c.write=function(p,m,u,S,P,M){var b,C,O,$=M*8-P-1,j=(1<<$)-1,he=j>>1,q=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=S?0:M-1,G=S?1:-1,ae=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(C=isNaN(m)?1:0,b=j):(b=Math.floor(Math.log(m)/Math.LN2),m*(O=Math.pow(2,-b))<1&&(b--,O*=2),b+he>=1?m+=q/O:m+=q*Math.pow(2,1-he),m*O>=2&&(b++,O/=2),b+he>=j?(C=0,b=j):b+he>=1?(C=(m*O-1)*Math.pow(2,P),b=b+he):(C=m*Math.pow(2,he-1)*Math.pow(2,P),b=0));P>=8;p[u+X]=C&255,X+=G,C/=256,P-=8);for(b=b<<P|C,$+=P;$>0;p[u+X]=b&255,X+=G,b/=256,$-=8);p[u+X-G]|=ae*128}},{}],15:[function(i,a,c){const p=/^[-+]?0x[a-fA-F0-9]+$/,m=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function S(M,b={}){if(b=Object.assign({},u,b),!M||typeof M!="string")return M;let C=M.trim();if(b.skipLike!==void 0&&b.skipLike.test(C))return M;if(b.hex&&p.test(C))return Number.parseInt(C,16);{const O=m.exec(C);if(O){const $=O[1],j=O[2];let he=P(O[3]);const q=O[4]||O[6];if(!b.leadingZeros&&j.length>0&&$&&C[2]!==".")return M;if(!b.leadingZeros&&j.length>0&&!$&&C[1]!==".")return M;{const X=Number(C),G=""+X;return G.search(/[eE]/)!==-1||q?b.eNotation?X:M:C.indexOf(".")!==-1?G==="0"&&he===""||G===he||$&&G==="-"+he?X:M:j?he===G||$+he===G?X:M:C===G||C===$+G?X:M}}else return M}}function P(M){return M&&M.indexOf(".")!==-1&&(M=M.replace(/0+$/,""),M==="."?M="0":M[0]==="."?M="0"+M:M[M.length-1]==="."&&(M=M.substr(0,M.length-1))),M}a.exports=S},{}],16:[function(i,a,c){(function(p){(function(){var m=this&&this.__awaiter||function(C,O,$,j){function he(q){return q instanceof $?q:new $(function(X){X(q)})}return new($||($=Promise))(function(q,X){function G(Z){try{K(j.next(Z))}catch(T){X(T)}}function ae(Z){try{K(j.throw(Z))}catch(T){X(T)}}function K(Z){Z.done?q(Z.value):he(Z.value).then(G,ae)}K((j=j.apply(C,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),S=i("../config"),P=i("./_xml"),M=C=>typeof btoa>"u"?p.from(C,"binary").toString("base64"):btoa(C);function b(C,O,$){return m(this,void 0,void 0,function*(){const{apiUrl:j,authHeader:he,basicAuth:q,userAgent:X}=(0,S.getConfig)(),G=q&&`Basic ${M(`${q.username}:${q.password}`)}`,ae=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let K=new URLSearchParams(O).toString();K&&(K=`?${K}`);const Z=yield fetch(`${j}/api${C}${K}`,Object.assign(Object.assign({},$),{headers:Object.assign({Authorization:he||G||ae||"","User-Agent":X},$==null?void 0:$.headers)})),T=Z.headers.get("Content-Type");if(T!=null&&T.startsWith("application/xml")){const L=yield Z.text();return yield P.xmlParser.parse(L)}if(T!=null&&T.startsWith("application/json"))return Z.json();if(Z.ok)return yield Z.text();throw new Error(`OSM API: ${yield Z.text()}`)})}c.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const p=i("fast-xml-parser");c.xmlParser=new p.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:m=>m!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const p=i("fast-xml-parser"),m=new p.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(M){return m.build({osm:{changeset:{tag:Object.entries(M).map(([b,C])=>({$k:b,$v:C}))}}})}c.createChangesetMetaXml=u;const S=(M,b,C)=>b.reduce((O,$)=>{const j={$id:$.id,$version:C?0:$.version,$changeset:M,tag:Object.entries($.tags||{}).map(([he,q])=>({$k:he,$v:q}))};switch($.type){case"node":{const he=Object.assign(Object.assign({},j),{$lat:$.lat,$lon:$.lon});return Object.assign(Object.assign({},O),{node:[...O.node,he]})}case"way":{if(!$.nodes)throw new Error("Way has no nodes");const he=Object.assign(Object.assign({},j),{nd:$.nodes.map(q=>({$ref:q}))});return Object.assign(Object.assign({},O),{way:[...O.way,he]})}case"relation":{if(!$.members)throw new Error("Relation has no members");const he=Object.assign(Object.assign({},j),{member:$.members.map(q=>({$type:q.type,$ref:q.ref,$role:q.role}))});return Object.assign(Object.assign({},O),{relation:[...O.relation,he]})}default:return O}},{node:[],way:[],relation:[]});function P(M,b,C){return m.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},C),{create:[S(M,b.create,!0)],modify:[S(M,b.modify)],delete:[Object.assign({"$if-unused":!0},S(M,b.delete))]})})}c.createOsmChangeXml=P},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const p=i("../_xml");function m(M){return{changeset:+M.$.changeset,id:+M.$.id,timestamp:M.$.timestamp,uid:+M.$.uid,user:M.$.user,version:+M.$.version,tags:M.tag?Object.fromEntries(M.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=M=>{const b=[];if(M.node){const C=M.node.map(O=>Object.assign(Object.assign({type:"node"},m(O)),{lat:+O.$.lat,lon:+O.$.lon}));b.push(...C)}if(M.way){const C=M.way.map(O=>{var $;return Object.assign(Object.assign({type:"way"},m(O)),{nodes:(($=O.nd)===null||$===void 0?void 0:$.map(j=>+j.$.ref))||[]})});b.push(...C)}if(M.relation){const C=M.relation.map(O=>{var $;return Object.assign(Object.assign({type:"relation"},m(O)),{members:(($=O.member)===null||$===void 0?void 0:$.map(j=>({ref:+j.$.ref,role:j.$.role,type:j.$.type})))||[]})});b.push(...C)}return b};function S(M){var b,C,O;return{create:((b=M.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((C=M.osmChange[0].modify)===null||C===void 0?void 0:C.flatMap(u))||[],delete:((O=M.osmChange[0].delete)===null||O===void 0?void 0:O.flatMap(u))||[]}}c.parseOsmChangeJson=S;function P(M){const b=p.xmlParser.parse(M);return S(b)}c.parseOsmChangeXml=P},{"../_xml":17}],20:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(O){return O instanceof M?O:new M(function($){$(O)})}return new(M||(M=Promise))(function(O,$){function j(X){try{q(b.next(X))}catch(G){$(G)}}function he(X){try{q(b.throw(X))}catch(G){$(G)}}function q(X){X.done?O(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const m=i("../_osmFetch");function u(S,P){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)(`/0.6/changeset/${S}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(P)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var p=this&&this.__awaiter||function(P,M,b,C){function O($){return $ instanceof b?$:new b(function(j){j($)})}return new(b||(b=Promise))(function($,j){function he(G){try{X(C.next(G))}catch(ae){j(ae)}}function q(G){try{X(C.throw(G))}catch(ae){j(ae)}}function X(G){G.done?$(G.value):O(G.value).then(he,q)}X((C=C.apply(P,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const m=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function S(P){return p(this,void 0,void 0,function*(){const M=yield(0,m.osmFetch)(`/0.6/changeset/${P}/download`);return(0,u.parseOsmChangeJson)(M)})}c.getChangesetDiff=S},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var p=this&&this.__awaiter||function(b,C,O,$){function j(he){return he instanceof O?he:new O(function(q){q(he)})}return new(O||(O=Promise))(function(he,q){function X(K){try{ae($.next(K))}catch(Z){q(Z)}}function G(K){try{ae($.throw(K))}catch(Z){q(Z)}}function ae(K){K.done?he(K.value):j(K.value).then(X,G)}ae(($=$.apply(b,C||[])).next())})},m=this&&this.__rest||function(b,C){var O={};for(var $ in b)Object.prototype.hasOwnProperty.call(b,$)&&C.indexOf($)<0&&(O[$]=b[$]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,$=Object.getOwnPropertySymbols(b);j<$.length;j++)C.indexOf($[j])<0&&Object.prototype.propertyIsEnumerable.call(b,$[j])&&(O[$[j]]=b[$[j]]);return O};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),S=b=>{var C;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(O=>[O.$.k,O.$.v])),discussion:(C=b.discussion)===null||C===void 0?void 0:C[0].comment.map(O=>({date:new Date(O.$.date),user:O.$.user,uid:O.$.uid,text:O.text[0]}))}};function P(b){var C;return p(this,void 0,void 0,function*(){const{only:O}=b,$=m(b,["only"]);return((C=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},O&&{[O]:!0}),$))).osm[0].changeset)===null||C===void 0?void 0:C.map(S))||[]})}c.listChangesets=P;function M(b,C=!0){return p(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:C})).osm[0].changeset.map(S)[0]})}c.getChangeset=M},{"../_osmFetch":16}],23:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(P,M,b,C){C===void 0&&(C=b);var O=Object.getOwnPropertyDescriptor(M,b);(!O||("get"in O?!M.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return M[b]}}),Object.defineProperty(P,C,O)}:function(P,M,b,C){C===void 0&&(C=b),P[C]=M[b]}),m=this&&this.__exportStar||function(P,M){for(var b in P)b!=="default"&&!Object.prototype.hasOwnProperty.call(M,b)&&p(M,P,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,m(i("./createChangesetComment"),c),m(i("./getChangesetDiff"),c),m(i("./getChangesets"),c),m(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var S=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return S.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var p=this&&this.__awaiter||function(P,M,b,C){function O($){return $ instanceof b?$:new b(function(j){j($)})}return new(b||(b=Promise))(function($,j){function he(G){try{X(C.next(G))}catch(ae){j(ae)}}function q(G){try{X(C.throw(G))}catch(ae){j(ae)}}function X(G){G.done?$(G.value):O(G.value).then(he,q)}X((C=C.apply(P,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const m=i("../_osmFetch"),u=i("./_createOsmChangeXml");function S(P,M){return p(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(P),C=+(yield(0,m.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),O=(0,u.createOsmChangeXml)(C,M);return yield(0,m.osmFetch)(`/0.6/changeset/${C}/upload`,void 0,{method:"POST",body:O,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,m.osmFetch)(`/0.6/changeset/${C}/close`,void 0,{method:"PUT"}),+C})}c.uploadChangeset=S},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(O){return O instanceof M?O:new M(function($){$(O)})}return new(M||(M=Promise))(function(O,$){function j(X){try{q(b.next(X))}catch(G){$(G)}}function he(X){try{q(b.throw(X))}catch(G){$(G)}}function q(X){X.done?O(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const m=i("./_osmFetch");function u(){var S;return p(this,void 0,void 0,function*(){const P=yield(0,m.osmFetch)("/capabilities");return{limits:{maxArea:+P.osm[0].api[0].area[0].$.maximum,maxNoteArea:+P.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+P.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+P.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+P.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+P.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((S=P.osm[0].policy[0].imagery[0].blacklist)===null||S===void 0?void 0:S.map(b=>b.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var p=this&&this.__awaiter||function(O,$,j,he){function q(X){return X instanceof j?X:new j(function(G){G(X)})}return new(j||(j=Promise))(function(X,G){function ae(T){try{Z(he.next(T))}catch(L){G(L)}}function K(T){try{Z(he.throw(T))}catch(L){G(L)}}function Z(T){T.done?X(T.value):q(T.value).then(ae,K)}Z((he=he.apply(O,$||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const m=i("./_osmFetch");function u(O,$,j){return p(this,void 0,void 0,function*(){const he=j&&O!=="node"?"/full":"";return(yield(0,m.osmFetch)(`/0.6/${O}/${$}${he}.json`)).elements})}c.getFeature=u;function S(O,$){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${O}s.json?${O}s=${$.join(",")}`)).elements})}c.getFeatures=S;function P(O,$,j){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${O}/${$}/${j}.json`)).elements[0]})}c.getFeatureAtVersion=P;function M(O,$){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${O}/${$}/history.json`)).elements})}c.getFeatureHistory=M;function b(O){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/node/${O}/ways.json`)).elements})}c.getWaysForNode=b;function C(O,$){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/${O}/${$}/relations.json`)).elements})}c.getRelationsForElement=C},{"./_osmFetch":16}],27:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(O){return O instanceof M?O:new M(function($){$(O)})}return new(M||(M=Promise))(function(O,$){function j(X){try{q(b.next(X))}catch(G){$(G)}}function he(X){try{q(b.throw(X))}catch(G){$(G)}}function q(X){X.done?O(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const m=i("./_osmFetch");function u(S){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)("/0.6/map.json",{bbox:S})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(O){return O instanceof M?O:new M(function($){$(O)})}return new(M||(M=Promise))(function(O,$){function j(X){try{q(b.next(X))}catch(G){$(G)}}function he(X){try{q(b.throw(X))}catch(G){$(G)}}function q(X){X.done?O(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const m=i("./changesets");function u(S){return p(this,void 0,void 0,function*(){const P=yield(0,m.listChangesets)({display_name:S});if(!P.length)throw new Error("Could not get uid because the user has never edited the map");return P[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var p=this&&this.__awaiter||function(P,M,b,C){function O($){return $ instanceof b?$:new b(function(j){j($)})}return new(b||(b=Promise))(function($,j){function he(G){try{X(C.next(G))}catch(ae){j(ae)}}function q(G){try{X(C.throw(G))}catch(ae){j(ae)}}function X(G){G.done?$(G.value):O(G.value).then(he,q)}X((C=C.apply(P,M||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const m=i("./_osmFetch");function u(P){return p(this,void 0,void 0,function*(){const M=yield(0,m.osmFetch)(`/0.6/user/${P==="me"?"details":P}.json`);return Object.assign(Object.assign({},M.user),{account_created:new Date(M.user.account_created)})})}c.getUser=u;function S(P){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)("/0.6/users",{users:P})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}c.getUsers=S},{"./_osmFetch":16}],30:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./changesets"),c),m(i("./notes"),c),m(i("./getCapabilities"),c),m(i("./getFeature"),c),m(i("./getMapData"),c),m(i("./getUIdFromDisplayName"),c),m(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var p=this&&this.__awaiter||function(C,O,$,j){function he(q){return q instanceof $?q:new $(function(X){X(q)})}return new($||($=Promise))(function(q,X){function G(Z){try{K(j.next(Z))}catch(T){X(T)}}function ae(Z){try{K(j.throw(Z))}catch(T){X(T)}}function K(Z){Z.done?q(Z.value):he(Z.value).then(G,ae)}K((j=j.apply(C,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const m=i("../_osmFetch"),u=C=>{const[O,$]=C.geometry.coordinates;return Object.assign(Object.assign({},C.properties),{location:{lat:$,lng:O}})};function S(C,O){return p(this,void 0,void 0,function*(){return(yield(0,m.osmFetch)(`/0.6/notes${O?"/search":""}.json`,C)).features.map(u)})}function P(C){return S(C,!0)}c.getNotesForQuery=P;function M(C){return S({bbox:C},!1)}c.getNotesForArea=M;function b(C){return p(this,void 0,void 0,function*(){const O=yield(0,m.osmFetch)(`/0.6/notes/${C}.json`);return u(O)})}c.getNote=b},{"../_osmFetch":16}],32:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./getNotes"),c),m(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var p=this&&this.__awaiter||function(M,b,C,O){function $(j){return j instanceof C?j:new C(function(he){he(j)})}return new(C||(C=Promise))(function(j,he){function q(ae){try{G(O.next(ae))}catch(K){he(K)}}function X(ae){try{G(O.throw(ae))}catch(K){he(K)}}function G(ae){ae.done?j(ae.value):$(ae.value).then(q,X)}G((O=O.apply(M,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const m=i("../_osmFetch");function u(M,b,C){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)("/0.6/notes",{lat:M,lon:b,text:C})})}c.createNote=u;function S(M,b){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)(`/0.6/notes/${M}/comment`,{text:b})})}c.commentOnNote=S;function P(M,b){return p(this,void 0,void 0,function*(){yield(0,m.osmFetch)(`/0.6/notes/${M}/reopen`,{text:b})})}c.reopenNote=P},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function p(m){let u=!1;return new Promise((S,P)=>{const[M,b]=[600,550],C=Object.entries({width:M,height:b,left:window.screen.width/2-M/2,top:window.screen.height/2-b/2}).map(([j,he])=>`${j}=${he}`).join(","),O=window.open("about:blank","oauth_window",C);if(!O)throw new Error("Popup was blocked");O.location=m,window.authComplete=j=>{S(j),u=!0};const $=setInterval(()=>{O.closed&&(u||P(new Error("Cancelled")),clearInterval($))},500)})}c.createPopup=p},{}],35:[function(i,a,c){var p=this&&this.__awaiter||function(S,P,M,b){function C(O){return O instanceof M?O:new M(function($){$(O)})}return new(M||(M=Promise))(function(O,$){function j(X){try{q(b.next(X))}catch(G){$(G)}}function he(X){try{q(b.throw(X))}catch(G){$(G)}}function q(X){X.done?O(X.value):C(X.value).then(j,he)}q((b=b.apply(S,P||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const m=i("./helpers");function u(S,{options:P,pkceVerifier:M,state:b}){return p(this,void 0,void 0,function*(){const C=new URL(S).searchParams,O=C.get("error_description"),$=C.get("code"),j=C.get("state");if(O)throw new Error(O);if(!$)throw new Error("No code in OAuth response");if(!M||!b)throw new Error("No login in progress");if(b!==j)throw new Error("State Mismatch");const he={grant_type:"authorization_code",code:$,redirect_uri:P.redirectUrl,client_id:P.clientId,code_verifier:M},q=`${(0,m.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(he).toString()}`,G=yield(yield fetch(q,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in G)throw new Error(G.error_description);const ae={issuedAt:new Date(G.created_at*1e3).toISOString(),accessToken:G.access_token,scopes:G.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ae)),delete window.authComplete,ae})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var p=this&&this.__awaiter||function(M,b,C,O){function $(j){return j instanceof C?j:new C(function(he){he(j)})}return new(C||(C=Promise))(function(j,he){function q(ae){try{G(O.next(ae))}catch(K){he(K)}}function X(ae){try{G(O.throw(ae))}catch(K){he(K)}}function G(ae){ae.done?j(ae.value):$(ae.value).then(q,X)}G((O=O.apply(M,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const m=i("../config");function u(M){return p(this,void 0,void 0,function*(){const b=new TextEncoder().encode(M),C=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(C))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function S(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(M=>`0${M.toString(16)}`.slice(-2)).join("")}c.getRandomString=S;function P(){let M=(0,m.getConfig)().apiUrl;return M==="https://api.openstreetmap.org"&&(M="https://www.openstreetmap.org"),M}c.getOAuthBaseUrl=P},{"../config":39}],37:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var p=this&&this.__awaiter||function(O,$,j,he){function q(X){return X instanceof j?X:new j(function(G){G(X)})}return new(j||(j=Promise))(function(X,G){function ae(T){try{Z(he.next(T))}catch(L){G(L)}}function K(T){try{Z(he.throw(T))}catch(L){G(L)}}function Z(T){T.done?X(T.value):q(T.value).then(ae,K)}Z((he=he.apply(O,$||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const m=i("./createPopup"),u=i("./exchangeCode"),S=i("./helpers");function P(O){return p(this,void 0,void 0,function*(){if(!O.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!O.clientId)throw new Error("You must include the 'clientId' option");if(!O.scopes)throw new Error("You must include the 'scopes' option");const $=(0,S.getRandomString)(),j=(0,S.getRandomString)(),he=yield(0,S.sha256)(j),q={scope:O.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:$,redirect_uri:O.redirectUrl,client_id:O.clientId,code_challenge_method:"S256",code_challenge:he},X=`${(0,S.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(q).toString()}`,G={state:$,pkceVerifier:j,options:O};if(O.mode==="popup"){const ae=yield(0,m.createPopup)(X);return(0,u.exchangeCode)(ae,G)}if(O.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(G)),window.location.replace(X);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=P,c.authReady=p(void 0,void 0,void 0,function*(){var O;if(typeof window>"u")return;const $=window.location.href,j=localStorage.getItem("__osmAuthTemp");if(new URL($).searchParams.get("code")){if(!((O=window.opener)===null||O===void 0)&&O.authComplete)window.opener.authComplete($),window.close();else if(j)try{const he=JSON.parse(j);yield(0,u.exchangeCode)($,he),localStorage.removeItem("__osmAuthTemp")}catch(he){console.error("OSM Auth Error",he)}}});const M=()=>{try{const O=localStorage.getItem("__osmAuth");return O?JSON.parse(O).accessToken:void 0}catch{return}};c.getAuthToken=M;const b=()=>!!(0,c.getAuthToken)();c.isLoggedIn=b;function C(){localStorage.removeItem("__osmAuth")}c.logout=C},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const p={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},m=()=>p;c.getConfig=m;function u(S){Object.assign(p,S)}c.configure=u},{}],40:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./api"),c),m(i("./auth"),c),m(i("./config"),c),m(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var p=this&&this.__createBinding||(Object.create?function(u,S,P,M){M===void 0&&(M=P);var b=Object.getOwnPropertyDescriptor(S,P);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[P]}}),Object.defineProperty(u,M,b)}:function(u,S,P,M){M===void 0&&(M=P),u[M]=S[P]}),m=this&&this.__exportStar||function(u,S){for(var P in u)P!=="default"&&!Object.prototype.hasOwnProperty.call(S,P)&&p(S,u,P)};Object.defineProperty(c,"__esModule",{value:!0}),m(i("./changesets"),c),m(i("./features"),c),m(i("./general"),c),m(i("./notes"),c),m(i("./osmPatch"),c),m(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(_P);var Fs=_P.exports;const xP=()=>{const[e,t]=gt.useState(!1);gt.useEffect(()=>{t(Fs.isLoggedIn())},[]);const i=gt.useCallback(()=>{(async()=>(await Fs.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Fs.isLoggedIn()),window.location.reload()))()},[]),a=gt.useCallback(()=>{(async()=>(Fs.logout(),t(!1)))()},[]);return mt.jsx(mt.Fragment,{children:e?mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},rj=()=>{const[e,t]=gt.useState(!1),[i,a]=gt.useState(void 0);return gt.useEffect(()=>{t(Fs.isLoggedIn())},[]),gt.useEffect(()=>{e&&(async()=>{const c=await Fs.getUser("me");a(c)})()},[e]),mt.jsx(mt.Fragment,{children:i?mt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):mt.jsx("img",{})})},ij=()=>{const[e,t]=gt.useState(!1),[i,a]=gt.useState(void 0);return gt.useEffect(()=>{t(Fs.isLoggedIn())},[]),gt.useEffect(()=>{e&&(async()=>{const c=await Fs.getUser("me");a(c)})()},[e]),mt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[mt.jsxs("div",{children:[mt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?mt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):mt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),mt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[mt.jsx("div",{children:mt.jsx(rj,{})}),mt.jsx("div",{children:mt.jsx(xP,{})})]})]})},wP=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return mt.jsxs(mt.Fragment,{children:[mt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",mt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},oj=({feature:e})=>mt.jsx(mt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return mt.jsxs("div",{className:t,children:[mt.jsx("span",{className:"underline",children:t})," = ",mt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function nf(e,t,i){return parseInt(e.substr(t,i),16)}function bP(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function $0(e,t,i){return i=i<0?i+6:i>6?i-6:i,bP(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function sj(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],p=e[3],m=e[4]||"";t="#"+a+a+c+c+p+p+m+m}return(i==7||i>8)&&(t=e),t}}function aj(e,t,i){let a;if(t==0){const c=bP(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,p=i*2-c;a=$0(p,c,e*6+2)+$0(p,c,e*6)+$0(p,c,e*6-2)}return"#"+a}function Kd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,aj(e,t,i)}const lj=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},pS={V:"jdenticon_config",n:"config"};var uj={};function cj(e,t){const i=uj[pS.n]||lj[pS.V]||{},a=i.lightness||{},c=i.saturation||{},p="color"in c?c.color:c,m=c.grayscale,u=i.backColor,S=i.padding;function P(b,C){let O=a[b];return O&&O.length>1||(O=C),function($){return $=O[0]+$*(O[1]-O[0]),$<0?0:$>1?1:$}}function M(b){const C=i.hues;let O;return C&&C.length>0&&(O=C[0|.999*b*C.length]),typeof O=="number"?(O/360%1+1)%1:b}return{W:M,o:typeof p=="number"?p:.5,D:typeof m=="number"?m:0,p:P("color",[.4,.8]),F:P("grayscale",[.3,.9]),G:sj(u),X:typeof S=="number"?S:t}}let hm=class{constructor(t,i){this.x=t,this.y=i}};class SP{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const p=this.q+this.H,m=this.t+this.H,u=this.Y;return u===1?new hm(p-i-(c||0),this.t+t):u===2?new hm(p-t-(a||0),m-i-(c||0)):u===3?new hm(this.q+i,m-t-(a||0)):new hm(this.q+t,this.t+i)}}const hj=new SP(0,0,0,0);class dj{constructor(t){this.J=t,this.u=hj}g(t,i){const a=i?-2:2,c=[];for(let p=i?t.length-2:0;p<t.length&&p>=0;p+=a)c.push(this.u.I(t[p],t[p+1]));this.J.g(c)}h(t,i,a,c){const p=this.u.I(t,i,a,a);this.J.h(p,a,c)}i(t,i,a,c,p){this.g([t,i,t+a,i,t+a,i+c,t,i+c],p)}j(t,i,a,c,p,m){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((p||0)%4*2,2),this.g(u,m)}K(t,i,a,c,p){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],p)}}function fj(e,t,i,a){e=e%14;let c,p,m,u,S,P;e?e==1?(m=0|i*.5,u=0|i*.8,t.j(i-m,0,m,u,2)):e==2?(m=0|i/3,t.i(m,m,i-m,i-m)):e==3?(S=i*.1,P=i<6?1:i<8?2:0|i*.25,S=S>1?0|S:S>.5?1:S,t.i(P,P,i-S-P,i-S-P)):e==4?(p=0|i*.15,m=0|i*.5,t.h(i-m-p,i-m-p,m)):e==5?(S=i*.1,P=S*4,P>3&&(P=0|P),t.i(0,0,i,i),t.g([P,P,i-S,P,P+(i-P-S)/2,i-S],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(S=i*.14,P=i<4?1:i<6?2:0|i*.35,S=i<8?S:0|S,t.i(0,0,i,i),t.i(P,P,i-P-S,i-P-S,!0)):e==10?(S=i*.12,P=S*3,t.i(0,0,i,i),t.h(P,P,i-S-P,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(p=i*.25,t.i(0,0,i,i),t.K(p,p,i-p,i-p,!0)):!a&&(p=i*.4,m=i*1.2,t.h(p,p,m)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function mS(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function pj(e,t){return e=t.W(e),[Kd(e,t.D,t.F(0)),Kd(e,t.o,t.p(.5)),Kd(e,t.D,t.F(1)),Kd(e,t.o,t.p(1)),Kd(e,t.o,t.p(0))]}function mj(e,t,i){const a=cj(i,.08);a.G&&e.m(a.G);let c=e.k;const p=.5+c*a.X|0;c-=p*2;const m=new dj(e),u=0|c/4,S=0|p+c/2-u*2,P=0|p+c/2-u*2;function M(he,q,X,G,ae){const K=nf(t,X,1);let Z=G?nf(t,G,1):0;e.L(C[O[he]]);for(let T=0;T<ae.length;T++)m.u=new SP(S+ae[T][0]*u,P+ae[T][1]*u,u,Z++%4),q(K,m,u,T);e.M()}const b=nf(t,-7)/268435455,C=pj(b,a),O=[];let $;function j(he){if(he.indexOf($)>=0){for(let q=0;q<he.length;q++)if(O.indexOf(he[q])>=0)return!0}}for(let he=0;he<3;he++)$=nf(t,8+he,1)%C.length,(j([0,4])||j([2,3]))&&($=1),O.push($);M(0,mS,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),M(1,mS,4,5,[[0,0],[3,0],[3,3],[0,3]]),M(2,fj,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function gj(e){var a=0,c=0,p=encodeURI(e)+"%80",m=[],u,S=[],P=1732584193,M=4023233417,b=~P,C=~M,O=3285377520,$=[P,M,b,C,O],j=0,he="";function q(X,G){return X<<G|X>>>32-G}for(;a<p.length;c++)m[c>>2]=m[c>>2]|(p[a]=="%"?parseInt(p.substring(a+1,a+=3),16):p.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,m[u-1]=c*8-8;j<u;j+=16){for(a=0;a<80;a++)c=q(P,5)+O+(a<20?(M&b^~M&C)+1518500249:a<40?(M^b^C)+1859775393:a<60?(M&b^M&C^b&C)+2400959708:(M^b^C)+3395469782)+(S[a]=a<16?m[j+a]|0:q(S[a-3]^S[a-8]^S[a-14]^S[a-16],1)),O=C,C=b,b=q(M,30),M=P,P=c;$[0]=P=$[0]+P|0,$[1]=M=$[1]+M|0,$[2]=b=$[2]+b|0,$[3]=C=$[3]+C|0,$[4]=O=$[4]+O|0}for(a=0;a<40;a++)he+=($[a>>3]>>>(7-(a&7))*4&15).toString(16);return he}function yj(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function vj(e){return gj(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function Zc(e){return(e*10+.5|0)/10}class _j{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Zc(t[a].x)+" "+Zc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,p=Zc(i/2),m=Zc(i),u="a"+p+","+p+" 0 1,"+c+" ";this.v+="M"+Zc(t.x)+" "+Zc(t.y+i/2)+u+m+",0"+u+-m+",0"}}class xj{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?nf(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new _j)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const wj={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class bj{constructor(t){this.k=t,this.C='<svg xmlns="'+wj.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function Sj(e,t,i){const a=new bj(t);return mj(new xj(a),yj(e)||vj(e),i),a.toString()}const Ej=({feature:e,size:t})=>e.properties===null?null:mt.jsx(mt.Fragment,{children:e.properties.userIconHref.length>0?mt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):mt.jsx("span",{dangerouslySetInnerHTML:{__html:Sj(e.properties.user||"noname",t)}})}),Tj=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?mt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null},Cj={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},Pj=({viewState:e})=>{const[t,i]=gt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return gt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),mt.jsx(mt.Fragment,{children:e&&t&&mt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[mt.jsx(eu,{icon:Cj,style:{padding:"0px 3px"}}),mt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var EP={};class $i{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const p=i[c],m=t+p,u=Math.abs(t)<Math.abs(p)?t-(m-p):p-(m-t);u&&(i[a++]=u),t=m}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,p,m=0;if(i>0){for(m=t[--i];i>0&&(a=m,c=t[--i],m=a+c,p=c-(m-a),!p););i>0&&(p<0&&t[i-1]<0||p>0&&t[i-1]>0)&&(c=p*2,a=m+c,c==a-m&&(m=a))}return m}}function*Ij(e){for(const t of e)yield*t}function TP(e){return Array.from(Ij(e))}function dh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,p=new Array(c);++a<c;)p[a]=e+a*i;return p}var fn=1e-6,Zf=1e-12,Mn=Math.PI,Lr=Mn/2,gg=Mn/4,Yi=Mn*2,lr=180/Mn,gn=Mn/180,Dn=Math.abs,$h=Math.atan,Qi=Math.atan2,sn=Math.cos,dm=Math.ceil,CP=Math.exp,T_=Math.hypot,yg=Math.log,V0=Math.pow,Qt=Math.sin,cs=Math.sign||function(e){return e>0?1:e<0?-1:0},di=Math.sqrt,ux=Math.tan;function PP(e){return e>1?0:e<-1?Mn:Math.acos(e)}function eo(e){return e>1?Lr:e<-1?-Lr:Math.asin(e)}function gS(e){return(e=Qt(e/2))*e}function Ar(){}function vg(e,t){e&&vS.hasOwnProperty(e.type)&&vS[e.type](e,t)}var yS={Feature:function(e,t){vg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)vg(i[a].geometry,t)}},vS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){C_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)C_(i[a],t,0)},Polygon:function(e,t){_S(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)_S(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)vg(i[a],t)}};function C_(e,t,i){var a=-1,c=e.length-i,p;for(t.lineStart();++a<c;)p=e[a],t.point(p[0],p[1],p[2]);t.lineEnd()}function _S(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)C_(e[i],t,1);t.polygonEnd()}function zs(e,t){e&&yS.hasOwnProperty(e.type)?yS[e.type](e,t):vg(e,t)}var _g=new $i,xg=new $i,IP,AP,P_,I_,A_,ga={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){_g=new $i,ga.lineStart=Aj,ga.lineEnd=Mj},polygonEnd:function(){var e=+_g;xg.add(e<0?Yi+e:e),this.lineStart=this.lineEnd=this.point=Ar},sphere:function(){xg.add(Yi)}};function Aj(){ga.point=kj}function Mj(){MP(IP,AP)}function kj(e,t){ga.point=MP,IP=e,AP=t,e*=gn,t*=gn,P_=e,I_=sn(t=t/2+gg),A_=Qt(t)}function MP(e,t){e*=gn,t*=gn,t=t/2+gg;var i=e-P_,a=i>=0?1:-1,c=a*i,p=sn(t),m=Qt(t),u=A_*m,S=I_*p+u*sn(c),P=u*a*Qt(c);_g.add(Qi(P,S)),P_=e,I_=p,A_=m}function zj(e){return xg=new $i,zs(e,ga),xg*2}function wg(e){return[Qi(e[1],e[0]),eo(e[2])]}function tc(e){var t=e[0],i=e[1],a=sn(i);return[a*sn(t),a*Qt(t),Qt(i)]}function fm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function G0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function pm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bg(e){var t=di(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pr,co,Rr,Oo,Bu,kP,zP,wh,wf,Bl,Qa,$a={point:M_,lineStart:xS,lineEnd:wS,polygonStart:function(){$a.point=jP,$a.lineStart=Fj,$a.lineEnd=jj,wf=new $i,ga.polygonStart()},polygonEnd:function(){ga.polygonEnd(),$a.point=M_,$a.lineStart=xS,$a.lineEnd=wS,_g<0?(Pr=-(Rr=180),co=-(Oo=90)):wf>fn?Oo=90:wf<-fn&&(co=-90),Qa[0]=Pr,Qa[1]=Rr},sphere:function(){Pr=-(Rr=180),co=-(Oo=90)}};function M_(e,t){Bl.push(Qa=[Pr=e,Rr=e]),t<co&&(co=t),t>Oo&&(Oo=t)}function FP(e,t){var i=tc([e*gn,t*gn]);if(wh){var a=Fh(wh,i),c=[a[1],-a[0],0],p=Fh(c,a);bg(p),p=wg(p);var m=e-Bu,u=m>0?1:-1,S=p[0]*lr*u,P,M=Dn(m)>180;M^(u*Bu<S&&S<u*e)?(P=p[1]*lr,P>Oo&&(Oo=P)):(S=(S+360)%360-180,M^(u*Bu<S&&S<u*e)?(P=-p[1]*lr,P<co&&(co=P)):(t<co&&(co=t),t>Oo&&(Oo=t))),M?e<Bu?Ro(Pr,e)>Ro(Pr,Rr)&&(Rr=e):Ro(e,Rr)>Ro(Pr,Rr)&&(Pr=e):Rr>=Pr?(e<Pr&&(Pr=e),e>Rr&&(Rr=e)):e>Bu?Ro(Pr,e)>Ro(Pr,Rr)&&(Rr=e):Ro(e,Rr)>Ro(Pr,Rr)&&(Pr=e)}else Bl.push(Qa=[Pr=e,Rr=e]);t<co&&(co=t),t>Oo&&(Oo=t),wh=i,Bu=e}function xS(){$a.point=FP}function wS(){Qa[0]=Pr,Qa[1]=Rr,$a.point=M_,wh=null}function jP(e,t){if(wh){var i=e-Bu;wf.add(Dn(i)>180?i+(i>0?360:-360):i)}else kP=e,zP=t;ga.point(e,t),FP(e,t)}function Fj(){ga.lineStart()}function jj(){jP(kP,zP),ga.lineEnd(),Dn(wf)>fn&&(Pr=-(Rr=180)),Qa[0]=Pr,Qa[1]=Rr,wh=null}function Ro(e,t){return(t-=e)<0?t+360:t}function Rj(e,t){return e[0]-t[0]}function bS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Oj(e){var t,i,a,c,p,m,u;if(Oo=Rr=-(Pr=co=1/0),Bl=[],zs(e,$a),i=Bl.length){for(Bl.sort(Rj),t=1,a=Bl[0],p=[a];t<i;++t)c=Bl[t],bS(a,c[0])||bS(a,c[1])?(Ro(a[0],c[1])>Ro(a[0],a[1])&&(a[1]=c[1]),Ro(c[0],a[1])>Ro(a[0],a[1])&&(a[0]=c[0])):p.push(a=c);for(m=-1/0,i=p.length-1,t=0,a=p[i];t<=i;a=c,++t)c=p[t],(u=Ro(a[1],c[0]))>m&&(m=u,Pr=c[0],Rr=a[1])}return Bl=Qa=null,Pr===1/0||co===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pr,co],[Rr,Oo]]}var rf,Sg,Eg,Tg,Cg,Pg,Ig,Ag,k_,z_,F_,RP,OP,Xi,Ki,qi,js={sphere:Ar,point:cx,lineStart:SS,lineEnd:ES,polygonStart:function(){js.lineStart=Bj,js.lineEnd=Nj},polygonEnd:function(){js.lineStart=SS,js.lineEnd=ES}};function cx(e,t){e*=gn,t*=gn;var i=sn(t);op(i*sn(e),i*Qt(e),Qt(t))}function op(e,t,i){++rf,Eg+=(e-Eg)/rf,Tg+=(t-Tg)/rf,Cg+=(i-Cg)/rf}function SS(){js.point=Lj}function Lj(e,t){e*=gn,t*=gn;var i=sn(t);Xi=i*sn(e),Ki=i*Qt(e),qi=Qt(t),js.point=Dj,op(Xi,Ki,qi)}function Dj(e,t){e*=gn,t*=gn;var i=sn(t),a=i*sn(e),c=i*Qt(e),p=Qt(t),m=Qi(di((m=Ki*p-qi*c)*m+(m=qi*a-Xi*p)*m+(m=Xi*c-Ki*a)*m),Xi*a+Ki*c+qi*p);Sg+=m,Pg+=m*(Xi+(Xi=a)),Ig+=m*(Ki+(Ki=c)),Ag+=m*(qi+(qi=p)),op(Xi,Ki,qi)}function ES(){js.point=cx}function Bj(){js.point=Uj}function Nj(){LP(RP,OP),js.point=cx}function Uj(e,t){RP=e,OP=t,e*=gn,t*=gn,js.point=LP;var i=sn(t);Xi=i*sn(e),Ki=i*Qt(e),qi=Qt(t),op(Xi,Ki,qi)}function LP(e,t){e*=gn,t*=gn;var i=sn(t),a=i*sn(e),c=i*Qt(e),p=Qt(t),m=Ki*p-qi*c,u=qi*a-Xi*p,S=Xi*c-Ki*a,P=T_(m,u,S),M=eo(P),b=P&&-M/P;k_.add(b*m),z_.add(b*u),F_.add(b*S),Sg+=M,Pg+=M*(Xi+(Xi=a)),Ig+=M*(Ki+(Ki=c)),Ag+=M*(qi+(qi=p)),op(Xi,Ki,qi)}function $j(e){rf=Sg=Eg=Tg=Cg=Pg=Ig=Ag=0,k_=new $i,z_=new $i,F_=new $i,zs(e,js);var t=+k_,i=+z_,a=+F_,c=T_(t,i,a);return c<Zf&&(t=Pg,i=Ig,a=Ag,Sg<fn&&(t=Eg,i=Tg,a=Cg),c=T_(t,i,a),c<Zf)?[NaN,NaN]:[Qi(i,t)*lr,eo(a/c)*lr]}function Wc(e){return function(){return e}}function j_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function R_(e,t){return[Dn(e)>Mn?e+Math.round(-e/Yi)*Yi:e,t]}R_.invert=R_;function hx(e,t,i){return(e%=Yi)?t||i?j_(CS(e),PS(t,i)):CS(e):t||i?PS(t,i):R_}function TS(e){return function(t,i){return t+=e,[t>Mn?t-Yi:t<-Mn?t+Yi:t,i]}}function CS(e){var t=TS(e);return t.invert=TS(-e),t}function PS(e,t){var i=sn(e),a=Qt(e),c=sn(t),p=Qt(t);function m(u,S){var P=sn(S),M=sn(u)*P,b=Qt(u)*P,C=Qt(S),O=C*i+M*a;return[Qi(b*c-O*p,M*i-C*a),eo(O*c+b*p)]}return m.invert=function(u,S){var P=sn(S),M=sn(u)*P,b=Qt(u)*P,C=Qt(S),O=C*c-b*p;return[Qi(b*c+C*p,M*i+O*a),eo(O*i-M*a)]},m}function DP(e){e=hx(e[0]*gn,e[1]*gn,e.length>2?e[2]*gn:0);function t(i){return i=e(i[0]*gn,i[1]*gn),i[0]*=lr,i[1]*=lr,i}return t.invert=function(i){return i=e.invert(i[0]*gn,i[1]*gn),i[0]*=lr,i[1]*=lr,i},t}function BP(e,t,i,a,c,p){if(i){var m=sn(t),u=Qt(t),S=a*i;c==null?(c=t+a*Yi,p=t-S/2):(c=IS(m,c),p=IS(m,p),(a>0?c<p:c>p)&&(c+=a*Yi));for(var P,M=c;a>0?M>p:M<p;M-=S)P=wg([m,-u*sn(M),-u*Qt(M)]),e.point(P[0],P[1])}}function IS(e,t){t=tc(t),t[0]-=e,bg(t);var i=PP(-t[1]);return((-t[2]<0?-i:i)+Yi-fn)%Yi}function Vj(){var e=Wc([0,0]),t=Wc(90),i=Wc(6),a,c,p={point:m};function m(S,P){a.push(S=c(S,P)),S[0]*=lr,S[1]*=lr}function u(){var S=e.apply(this,arguments),P=t.apply(this,arguments)*gn,M=i.apply(this,arguments)*gn;return a=[],c=hx(-S[0]*gn,-S[1]*gn,0).invert,BP(p,P,M,1),S={type:"Polygon",coordinates:[a]},a=c=null,S}return u.center=function(S){return arguments.length?(e=typeof S=="function"?S:Wc([+S[0],+S[1]]),u):e},u.radius=function(S){return arguments.length?(t=typeof S=="function"?S:Wc(+S),u):t},u.precision=function(S){return arguments.length?(i=typeof S=="function"?S:Wc(+S),u):i},u}function NP(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Ar,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Rm(e,t){return Dn(e[0]-t[0])<fn&&Dn(e[1]-t[1])<fn}function mm(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function UP(e,t,i,a,c){var p=[],m=[],u,S;if(e.forEach(function($){if(!((j=$.length-1)<=0)){var j,he=$[0],q=$[j],X;if(Rm(he,q)){if(!he[2]&&!q[2]){for(c.lineStart(),u=0;u<j;++u)c.point((he=$[u])[0],he[1]);c.lineEnd();return}q[0]+=2*fn}p.push(X=new mm(he,$,null,!0)),m.push(X.o=new mm(he,null,X,!1)),p.push(X=new mm(q,$,null,!1)),m.push(X.o=new mm(q,null,X,!0))}}),!!p.length){for(m.sort(t),AS(p),AS(m),u=0,S=m.length;u<S;++u)m[u].e=i=!i;for(var P=p[0],M,b;;){for(var C=P,O=!0;C.v;)if((C=C.n)===P)return;M=C.z,c.lineStart();do{if(C.v=C.o.v=!0,C.e){if(O)for(u=0,S=M.length;u<S;++u)c.point((b=M[u])[0],b[1]);else a(C.x,C.n.x,1,c);C=C.n}else{if(O)for(M=C.p.z,u=M.length-1;u>=0;--u)c.point((b=M[u])[0],b[1]);else a(C.x,C.p.x,-1,c);C=C.p}C=C.o,M=C.z,O=!O}while(!C.v);c.lineEnd()}}}function AS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function Z0(e){return Dn(e[0])<=Mn?e[0]:cs(e[0])*((Dn(e[0])+Mn)%Yi-Mn)}function $P(e,t){var i=Z0(t),a=t[1],c=Qt(a),p=[Qt(i),-sn(i),0],m=0,u=0,S=new $i;c===1?a=Lr+fn:c===-1&&(a=-Lr-fn);for(var P=0,M=e.length;P<M;++P)if(C=(b=e[P]).length)for(var b,C,O=b[C-1],$=Z0(O),j=O[1]/2+gg,he=Qt(j),q=sn(j),X=0;X<C;++X,$=ae,he=Z,q=T,O=G){var G=b[X],ae=Z0(G),K=G[1]/2+gg,Z=Qt(K),T=sn(K),L=ae-$,B=L>=0?1:-1,te=B*L,H=te>Mn,ve=he*Z;if(S.add(Qi(ve*B*Qt(te),q*T+ve*sn(te))),m+=H?L+B*Yi:L,H^$>=i^ae>=i){var _e=Fh(tc(O),tc(G));bg(_e);var pe=Fh(p,_e);bg(pe);var oe=(H^L>=0?-1:1)*eo(pe[2]);(a>oe||a===oe&&(_e[0]||_e[1]))&&(u+=H^L>=0?1:-1)}}return(m<-fn||m<fn&&S<-Zf)^u&1}function VP(e,t,i,a){return function(c){var p=t(c),m=NP(),u=t(m),S=!1,P,M,b,C={point:O,lineStart:j,lineEnd:he,polygonStart:function(){C.point=q,C.lineStart=X,C.lineEnd=G,M=[],P=[]},polygonEnd:function(){C.point=O,C.lineStart=j,C.lineEnd=he,M=TP(M);var ae=$P(P,a);M.length?(S||(c.polygonStart(),S=!0),UP(M,Zj,ae,i,c)):ae&&(S||(c.polygonStart(),S=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),S&&(c.polygonEnd(),S=!1),M=P=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function O(ae,K){e(ae,K)&&c.point(ae,K)}function $(ae,K){p.point(ae,K)}function j(){C.point=$,p.lineStart()}function he(){C.point=O,p.lineEnd()}function q(ae,K){b.push([ae,K]),u.point(ae,K)}function X(){u.lineStart(),b=[]}function G(){q(b[0][0],b[0][1]),u.lineEnd();var ae=u.clean(),K=m.result(),Z,T=K.length,L,B,te;if(b.pop(),P.push(b),b=null,!!T){if(ae&1){if(B=K[0],(L=B.length-1)>0){for(S||(c.polygonStart(),S=!0),c.lineStart(),Z=0;Z<L;++Z)c.point((te=B[Z])[0],te[1]);c.lineEnd()}return}T>1&&ae&2&&K.push(K.pop().concat(K.shift())),M.push(K.filter(Gj))}}return C}}function Gj(e){return e.length>1}function Zj(e,t){return((e=e.x)[0]<0?e[1]-Lr-fn:Lr-e[1])-((t=t.x)[0]<0?t[1]-Lr-fn:Lr-t[1])}const O_=VP(function(){return!0},Wj,Xj,[-Mn,-Lr]);function Wj(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(p,m){var u=p>0?Mn:-Mn,S=Dn(p-t);Dn(S-Mn)<fn?(e.point(t,i=(i+m)/2>0?Lr:-Lr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(p,i),c=0):a!==u&&S>=Mn&&(Dn(t-a)<fn&&(t-=a*fn),Dn(p-u)<fn&&(p-=u*fn),i=Hj(t,i,p,m),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=p,i=m),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function Hj(e,t,i,a){var c,p,m=Qt(e-i);return Dn(m)>fn?$h((Qt(t)*(p=sn(a))*Qt(i)-Qt(a)*(c=sn(t))*Qt(e))/(c*p*m)):(t+a)/2}function Xj(e,t,i,a){var c;if(e==null)c=i*Lr,a.point(-Mn,c),a.point(0,c),a.point(Mn,c),a.point(Mn,0),a.point(Mn,-c),a.point(0,-c),a.point(-Mn,-c),a.point(-Mn,0),a.point(-Mn,c);else if(Dn(e[0]-t[0])>fn){var p=e[0]<t[0]?Mn:-Mn;c=i*p/2,a.point(-p,c),a.point(0,c),a.point(p,c)}else a.point(t[0],t[1])}function GP(e){var t=sn(e),i=6*gn,a=t>0,c=Dn(t)>fn;function p(M,b,C,O){BP(O,e,i,C,M,b)}function m(M,b){return sn(M)*sn(b)>t}function u(M){var b,C,O,$,j;return{lineStart:function(){$=O=!1,j=1},point:function(he,q){var X=[he,q],G,ae=m(he,q),K=a?ae?0:P(he,q):ae?P(he+(he<0?Mn:-Mn),q):0;if(!b&&($=O=ae)&&M.lineStart(),ae!==O&&(G=S(b,X),(!G||Rm(b,G)||Rm(X,G))&&(X[2]=1)),ae!==O)j=0,ae?(M.lineStart(),G=S(X,b),M.point(G[0],G[1])):(G=S(b,X),M.point(G[0],G[1],2),M.lineEnd()),b=G;else if(c&&b&&a^ae){var Z;!(K&C)&&(Z=S(X,b,!0))&&(j=0,a?(M.lineStart(),M.point(Z[0][0],Z[0][1]),M.point(Z[1][0],Z[1][1]),M.lineEnd()):(M.point(Z[1][0],Z[1][1]),M.lineEnd(),M.lineStart(),M.point(Z[0][0],Z[0][1],3)))}ae&&(!b||!Rm(b,X))&&M.point(X[0],X[1]),b=X,O=ae,C=K},lineEnd:function(){O&&M.lineEnd(),b=null},clean:function(){return j|($&&O)<<1}}}function S(M,b,C){var O=tc(M),$=tc(b),j=[1,0,0],he=Fh(O,$),q=fm(he,he),X=he[0],G=q-X*X;if(!G)return!C&&M;var ae=t*q/G,K=-t*X/G,Z=Fh(j,he),T=pm(j,ae),L=pm(he,K);G0(T,L);var B=Z,te=fm(T,B),H=fm(B,B),ve=te*te-H*(fm(T,T)-1);if(!(ve<0)){var _e=di(ve),pe=pm(B,(-te-_e)/H);if(G0(pe,T),pe=wg(pe),!C)return pe;var oe=M[0],ce=b[0],ee=M[1],re=b[1],fe;ce<oe&&(fe=oe,oe=ce,ce=fe);var Se=ce-oe,Ce=Dn(Se-Mn)<fn,Ue=Ce||Se<fn;if(!Ce&&re<ee&&(fe=ee,ee=re,re=fe),Ue?Ce?ee+re>0^pe[1]<(Dn(pe[0]-oe)<fn?ee:re):ee<=pe[1]&&pe[1]<=re:Se>Mn^(oe<=pe[0]&&pe[0]<=ce)){var Ae=pm(B,(-te+_e)/H);return G0(Ae,T),[pe,wg(Ae)]}}}function P(M,b){var C=a?e:Mn-e,O=0;return M<-C?O|=1:M>C&&(O|=2),b<-C?O|=4:b>C&&(O|=8),O}return VP(m,u,p,a?[0,-e]:[-Mn,e-Mn])}function Kj(e,t,i,a,c,p){var m=e[0],u=e[1],S=t[0],P=t[1],M=0,b=1,C=S-m,O=P-u,$;if($=i-m,!(!C&&$>0)){if($/=C,C<0){if($<M)return;$<b&&(b=$)}else if(C>0){if($>b)return;$>M&&(M=$)}if($=c-m,!(!C&&$<0)){if($/=C,C<0){if($>b)return;$>M&&(M=$)}else if(C>0){if($<M)return;$<b&&(b=$)}if($=a-u,!(!O&&$>0)){if($/=O,O<0){if($<M)return;$<b&&(b=$)}else if(O>0){if($>b)return;$>M&&(M=$)}if($=p-u,!(!O&&$<0)){if($/=O,O<0){if($>b)return;$>M&&(M=$)}else if(O>0){if($<M)return;$<b&&(b=$)}return M>0&&(e[0]=m+M*C,e[1]=u+M*O),b<1&&(t[0]=m+b*C,t[1]=u+b*O),!0}}}}}var of=1e9,gm=-of;function ly(e,t,i,a){function c(P,M){return e<=P&&P<=i&&t<=M&&M<=a}function p(P,M,b,C){var O=0,$=0;if(P==null||(O=m(P,b))!==($=m(M,b))||S(P,M)<0^b>0)do C.point(O===0||O===3?e:i,O>1?a:t);while((O=(O+b+4)%4)!==$);else C.point(M[0],M[1])}function m(P,M){return Dn(P[0]-e)<fn?M>0?0:3:Dn(P[0]-i)<fn?M>0?2:1:Dn(P[1]-t)<fn?M>0?1:0:M>0?3:2}function u(P,M){return S(P.x,M.x)}function S(P,M){var b=m(P,1),C=m(M,1);return b!==C?b-C:b===0?M[1]-P[1]:b===1?P[0]-M[0]:b===2?P[1]-M[1]:M[0]-P[0]}return function(P){var M=P,b=NP(),C,O,$,j,he,q,X,G,ae,K,Z,T={point:L,lineStart:ve,lineEnd:_e,polygonStart:te,polygonEnd:H};function L(oe,ce){c(oe,ce)&&M.point(oe,ce)}function B(){for(var oe=0,ce=0,ee=O.length;ce<ee;++ce)for(var re=O[ce],fe=1,Se=re.length,Ce=re[0],Ue,Ae,Fe=Ce[0],Ze=Ce[1];fe<Se;++fe)Ue=Fe,Ae=Ze,Ce=re[fe],Fe=Ce[0],Ze=Ce[1],Ae<=a?Ze>a&&(Fe-Ue)*(a-Ae)>(Ze-Ae)*(e-Ue)&&++oe:Ze<=a&&(Fe-Ue)*(a-Ae)<(Ze-Ae)*(e-Ue)&&--oe;return oe}function te(){M=b,C=[],O=[],Z=!0}function H(){var oe=B(),ce=Z&&oe,ee=(C=TP(C)).length;(ce||ee)&&(P.polygonStart(),ce&&(P.lineStart(),p(null,null,1,P),P.lineEnd()),ee&&UP(C,u,oe,p,P),P.polygonEnd()),M=P,C=O=$=null}function ve(){T.point=pe,O&&O.push($=[]),K=!0,ae=!1,X=G=NaN}function _e(){C&&(pe(j,he),q&&ae&&b.rejoin(),C.push(b.result())),T.point=L,ae&&M.lineEnd()}function pe(oe,ce){var ee=c(oe,ce);if(O&&$.push([oe,ce]),K)j=oe,he=ce,q=ee,K=!1,ee&&(M.lineStart(),M.point(oe,ce));else if(ee&&ae)M.point(oe,ce);else{var re=[X=Math.max(gm,Math.min(of,X)),G=Math.max(gm,Math.min(of,G))],fe=[oe=Math.max(gm,Math.min(of,oe)),ce=Math.max(gm,Math.min(of,ce))];Kj(re,fe,e,t,i,a)?(ae||(M.lineStart(),M.point(re[0],re[1])),M.point(fe[0],fe[1]),ee||M.lineEnd(),Z=!1):ee&&(M.lineStart(),M.point(oe,ce),Z=!1)}X=oe,G=ce,ae=ee}return T}}function qj(){var e=0,t=0,i=960,a=500,c,p,m;return m={stream:function(u){return c&&p===u?c:c=ly(e,t,i,a)(p=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=p=null,m):[[e,t],[i,a]]}}}var L_,D_,Om,Lm,jh={sphere:Ar,point:Ar,lineStart:Jj,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar};function Jj(){jh.point=Qj,jh.lineEnd=Yj}function Yj(){jh.point=jh.lineEnd=Ar}function Qj(e,t){e*=gn,t*=gn,D_=e,Om=Qt(t),Lm=sn(t),jh.point=eR}function eR(e,t){e*=gn,t*=gn;var i=Qt(t),a=sn(t),c=Dn(e-D_),p=sn(c),m=Qt(c),u=a*m,S=Lm*i-Om*a*p,P=Om*i+Lm*a*p;L_.add(Qi(di(u*u+S*S),P)),D_=e,Om=i,Lm=a}function ZP(e){return L_=new $i,zs(e,jh),+L_}var B_=[null,null],tR={type:"LineString",coordinates:B_};function Mg(e,t){return B_[0]=e,B_[1]=t,ZP(tR)}var MS={Feature:function(e,t){return kg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(kg(i[a].geometry,t))return!0;return!1}},kS={Sphere:function(){return!0},Point:function(e,t){return zS(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(zS(i[a],t))return!0;return!1},LineString:function(e,t){return FS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(FS(i[a],t))return!0;return!1},Polygon:function(e,t){return jS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(jS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(kg(i[a],t))return!0;return!1}};function kg(e,t){return e&&kS.hasOwnProperty(e.type)?kS[e.type](e,t):!1}function zS(e,t){return Mg(e,t)===0}function FS(e,t){for(var i,a,c,p=0,m=e.length;p<m;p++){if(a=Mg(e[p],t),a===0||p>0&&(c=Mg(e[p],e[p-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Zf*c))return!0;i=a}return!1}function jS(e,t){return!!$P(e.map(nR),WP(t))}function nR(e){return e=e.map(WP),e.pop(),e}function WP(e){return[e[0]*gn,e[1]*gn]}function rR(e,t){return(e&&MS.hasOwnProperty(e.type)?MS[e.type]:kg)(e,t)}function RS(e,t,i){var a=dh(e,t-fn,i).concat(t);return function(c){return a.map(function(p){return[c,p]})}}function OS(e,t,i){var a=dh(e,t-fn,i).concat(t);return function(c){return a.map(function(p){return[p,c]})}}function HP(){var e,t,i,a,c,p,m,u,S=10,P=S,M=90,b=360,C,O,$,j,he=2.5;function q(){return{type:"MultiLineString",coordinates:X()}}function X(){return dh(dm(a/M)*M,i,M).map($).concat(dh(dm(u/b)*b,m,b).map(j)).concat(dh(dm(t/S)*S,e,S).filter(function(G){return Dn(G%M)>fn}).map(C)).concat(dh(dm(p/P)*P,c,P).filter(function(G){return Dn(G%b)>fn}).map(O))}return q.lines=function(){return X().map(function(G){return{type:"LineString",coordinates:G}})},q.outline=function(){return{type:"Polygon",coordinates:[$(a).concat(j(m).slice(1),$(i).reverse().slice(1),j(u).reverse().slice(1))]}},q.extent=function(G){return arguments.length?q.extentMajor(G).extentMinor(G):q.extentMinor()},q.extentMajor=function(G){return arguments.length?(a=+G[0][0],i=+G[1][0],u=+G[0][1],m=+G[1][1],a>i&&(G=a,a=i,i=G),u>m&&(G=u,u=m,m=G),q.precision(he)):[[a,u],[i,m]]},q.extentMinor=function(G){return arguments.length?(t=+G[0][0],e=+G[1][0],p=+G[0][1],c=+G[1][1],t>e&&(G=t,t=e,e=G),p>c&&(G=p,p=c,c=G),q.precision(he)):[[t,p],[e,c]]},q.step=function(G){return arguments.length?q.stepMajor(G).stepMinor(G):q.stepMinor()},q.stepMajor=function(G){return arguments.length?(M=+G[0],b=+G[1],q):[M,b]},q.stepMinor=function(G){return arguments.length?(S=+G[0],P=+G[1],q):[S,P]},q.precision=function(G){return arguments.length?(he=+G,C=RS(p,c,90),O=OS(t,e,he),$=RS(u,m,90),j=OS(a,i,he),q):he},q.extentMajor([[-180,-90+fn],[180,90-fn]]).extentMinor([[-180,-80-fn],[180,80+fn]])}function iR(){return HP()()}function oR(e,t){var i=e[0]*gn,a=e[1]*gn,c=t[0]*gn,p=t[1]*gn,m=sn(a),u=Qt(a),S=sn(p),P=Qt(p),M=m*sn(i),b=m*Qt(i),C=S*sn(c),O=S*Qt(c),$=2*eo(di(gS(p-a)+m*S*gS(c-i))),j=Qt($),he=$?function(q){var X=Qt(q*=$)/j,G=Qt($-q)/j,ae=G*M+X*C,K=G*b+X*O,Z=G*u+X*P;return[Qi(K,ae)*lr,Qi(Z,di(ae*ae+K*K))*lr]}:function(){return[i*lr,a*lr]};return he.distance=$,he}const Wf=e=>e;var W0=new $i,N_=new $i,XP,KP,U_,$_,Va={point:Ar,lineStart:Ar,lineEnd:Ar,polygonStart:function(){Va.lineStart=sR,Va.lineEnd=lR},polygonEnd:function(){Va.lineStart=Va.lineEnd=Va.point=Ar,W0.add(Dn(N_)),N_=new $i},result:function(){var e=W0/2;return W0=new $i,e}};function sR(){Va.point=aR}function aR(e,t){Va.point=qP,XP=U_=e,KP=$_=t}function qP(e,t){N_.add($_*e-U_*t),U_=e,$_=t}function lR(){qP(XP,KP)}var Rh=1/0,zg=Rh,Hf=-Rh,Fg=Hf,jg={point:uR,lineStart:Ar,lineEnd:Ar,polygonStart:Ar,polygonEnd:Ar,result:function(){var e=[[Rh,zg],[Hf,Fg]];return Hf=Fg=-(zg=Rh=1/0),e}};function uR(e,t){e<Rh&&(Rh=e),e>Hf&&(Hf=e),t<zg&&(zg=t),t>Fg&&(Fg=t)}var V_=0,G_=0,sf=0,Rg=0,Og=0,fh=0,Z_=0,W_=0,af=0,JP,YP,la,ua,ls={point:nc,lineStart:LS,lineEnd:DS,polygonStart:function(){ls.lineStart=dR,ls.lineEnd=fR},polygonEnd:function(){ls.point=nc,ls.lineStart=LS,ls.lineEnd=DS},result:function(){var e=af?[Z_/af,W_/af]:fh?[Rg/fh,Og/fh]:sf?[V_/sf,G_/sf]:[NaN,NaN];return V_=G_=sf=Rg=Og=fh=Z_=W_=af=0,e}};function nc(e,t){V_+=e,G_+=t,++sf}function LS(){ls.point=cR}function cR(e,t){ls.point=hR,nc(la=e,ua=t)}function hR(e,t){var i=e-la,a=t-ua,c=di(i*i+a*a);Rg+=c*(la+e)/2,Og+=c*(ua+t)/2,fh+=c,nc(la=e,ua=t)}function DS(){ls.point=nc}function dR(){ls.point=pR}function fR(){QP(JP,YP)}function pR(e,t){ls.point=QP,nc(JP=la=e,YP=ua=t)}function QP(e,t){var i=e-la,a=t-ua,c=di(i*i+a*a);Rg+=c*(la+e)/2,Og+=c*(ua+t)/2,fh+=c,c=ua*e-la*t,Z_+=c*(la+e),W_+=c*(ua+t),af+=c*3,nc(la=e,ua=t)}function eI(e){this._context=e}eI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yi);break}}},result:Ar};var H_=new $i,H0,tI,nI,lf,uf,Xf={point:Ar,lineStart:function(){Xf.point=mR},lineEnd:function(){H0&&rI(tI,nI),Xf.point=Ar},polygonStart:function(){H0=!0},polygonEnd:function(){H0=null},result:function(){var e=+H_;return H_=new $i,e}};function mR(e,t){Xf.point=rI,tI=lf=e,nI=uf=t}function rI(e,t){lf-=e,uf-=t,H_.add(di(lf*lf+uf*uf)),lf=e,uf=t}function iI(){this._string=[]}iI.prototype={_radius:4.5,_circle:BS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=BS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function BS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function gR(e,t){var i=4.5,a,c;function p(m){return m&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),zs(m,a(c))),c.result()}return p.area=function(m){return zs(m,a(Va)),Va.result()},p.measure=function(m){return zs(m,a(Xf)),Xf.result()},p.bounds=function(m){return zs(m,a(jg)),jg.result()},p.centroid=function(m){return zs(m,a(ls)),ls.result()},p.projection=function(m){return arguments.length?(a=m==null?(e=null,Wf):(e=m).stream,p):e},p.context=function(m){return arguments.length?(c=m==null?(t=null,new iI):new eI(t=m),typeof i!="function"&&c.pointRadius(i),p):t},p.pointRadius=function(m){return arguments.length?(i=typeof m=="function"?m:(c.pointRadius(+m),+m),p):i},p.projection(e).context(t)}function yR(e){return{stream:sp(e)}}function sp(e){return function(t){var i=new X_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function X_(){}X_.prototype={constructor:X_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function dx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),zs(i,e.stream(jg)),t(jg.result()),a!=null&&e.clipExtent(a),e}function uy(e,t,i){return dx(e,function(a){var c=t[1][0]-t[0][0],p=t[1][1]-t[0][1],m=Math.min(c/(a[1][0]-a[0][0]),p/(a[1][1]-a[0][1])),u=+t[0][0]+(c-m*(a[1][0]+a[0][0]))/2,S=+t[0][1]+(p-m*(a[1][1]+a[0][1]))/2;e.scale(150*m).translate([u,S])},i)}function fx(e,t,i){return uy(e,[[0,0],t],i)}function px(e,t,i){return dx(e,function(a){var c=+t,p=c/(a[1][0]-a[0][0]),m=(c-p*(a[1][0]+a[0][0]))/2,u=-p*a[0][1];e.scale(150*p).translate([m,u])},i)}function mx(e,t,i){return dx(e,function(a){var c=+t,p=c/(a[1][1]-a[0][1]),m=-p*a[0][0],u=(c-p*(a[1][1]+a[0][1]))/2;e.scale(150*p).translate([m,u])},i)}var NS=16,vR=sn(30*gn);function US(e,t){return+t?xR(e,t):_R(e)}function _R(e){return sp({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function xR(e,t){function i(a,c,p,m,u,S,P,M,b,C,O,$,j,he){var q=P-a,X=M-c,G=q*q+X*X;if(G>4*t&&j--){var ae=m+C,K=u+O,Z=S+$,T=di(ae*ae+K*K+Z*Z),L=eo(Z/=T),B=Dn(Dn(Z)-1)<fn||Dn(p-b)<fn?(p+b)/2:Qi(K,ae),te=e(B,L),H=te[0],ve=te[1],_e=H-a,pe=ve-c,oe=X*_e-q*pe;(oe*oe/G>t||Dn((q*_e+X*pe)/G-.5)>.3||m*C+u*O+S*$<vR)&&(i(a,c,p,m,u,S,H,ve,B,ae/=T,K/=T,Z,j,he),he.point(H,ve),i(H,ve,B,ae,K,Z,P,M,b,C,O,$,j,he))}}return function(a){var c,p,m,u,S,P,M,b,C,O,$,j,he={point:q,lineStart:X,lineEnd:ae,polygonStart:function(){a.polygonStart(),he.lineStart=K},polygonEnd:function(){a.polygonEnd(),he.lineStart=X}};function q(L,B){L=e(L,B),a.point(L[0],L[1])}function X(){b=NaN,he.point=G,a.lineStart()}function G(L,B){var te=tc([L,B]),H=e(L,B);i(b,C,M,O,$,j,b=H[0],C=H[1],M=L,O=te[0],$=te[1],j=te[2],NS,a),a.point(b,C)}function ae(){he.point=q,a.lineEnd()}function K(){X(),he.point=Z,he.lineEnd=T}function Z(L,B){G(c=L,B),p=b,m=C,u=O,S=$,P=j,he.point=G}function T(){i(b,C,M,O,$,j,p,m,c,u,S,P,NS,a),he.lineEnd=ae,ae()}return he}}var wR=sp({point:function(e,t){this.stream.point(e*gn,t*gn)}});function bR(e){return sp({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function SR(e,t,i,a,c){function p(m,u){return m*=a,u*=c,[t+e*m,i-e*u]}return p.invert=function(m,u){return[(m-t)/e*a,(i-u)/e*c]},p}function $S(e,t,i,a,c,p){if(!p)return SR(e,t,i,a,c);var m=sn(p),u=Qt(p),S=m*e,P=u*e,M=m/e,b=u/e,C=(u*i-m*t)/e,O=(u*t+m*i)/e;function $(j,he){return j*=a,he*=c,[S*j-P*he+t,i-P*j-S*he]}return $.invert=function(j,he){return[a*(M*j-b*he+C),c*(O-b*j-M*he)]},$}function ya(e){return gx(function(){return e})()}function gx(e){var t,i=150,a=480,c=250,p=0,m=0,u=0,S=0,P=0,M,b=0,C=1,O=1,$=null,j=O_,he=null,q,X,G,ae=Wf,K=.5,Z,T,L,B,te;function H(oe){return L(oe[0]*gn,oe[1]*gn)}function ve(oe){return oe=L.invert(oe[0],oe[1]),oe&&[oe[0]*lr,oe[1]*lr]}H.stream=function(oe){return B&&te===oe?B:B=wR(bR(M)(j(Z(ae(te=oe)))))},H.preclip=function(oe){return arguments.length?(j=oe,$=void 0,pe()):j},H.postclip=function(oe){return arguments.length?(ae=oe,he=q=X=G=null,pe()):ae},H.clipAngle=function(oe){return arguments.length?(j=+oe?GP($=oe*gn):($=null,O_),pe()):$*lr},H.clipExtent=function(oe){return arguments.length?(ae=oe==null?(he=q=X=G=null,Wf):ly(he=+oe[0][0],q=+oe[0][1],X=+oe[1][0],G=+oe[1][1]),pe()):he==null?null:[[he,q],[X,G]]},H.scale=function(oe){return arguments.length?(i=+oe,_e()):i},H.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],_e()):[a,c]},H.center=function(oe){return arguments.length?(p=oe[0]%360*gn,m=oe[1]%360*gn,_e()):[p*lr,m*lr]},H.rotate=function(oe){return arguments.length?(u=oe[0]%360*gn,S=oe[1]%360*gn,P=oe.length>2?oe[2]%360*gn:0,_e()):[u*lr,S*lr,P*lr]},H.angle=function(oe){return arguments.length?(b=oe%360*gn,_e()):b*lr},H.reflectX=function(oe){return arguments.length?(C=oe?-1:1,_e()):C<0},H.reflectY=function(oe){return arguments.length?(O=oe?-1:1,_e()):O<0},H.precision=function(oe){return arguments.length?(Z=US(T,K=oe*oe),pe()):di(K)},H.fitExtent=function(oe,ce){return uy(H,oe,ce)},H.fitSize=function(oe,ce){return fx(H,oe,ce)},H.fitWidth=function(oe,ce){return px(H,oe,ce)},H.fitHeight=function(oe,ce){return mx(H,oe,ce)};function _e(){var oe=$S(i,0,0,C,O,b).apply(null,t(p,m)),ce=$S(i,a-oe[0],c-oe[1],C,O,b);return M=hx(u,S,P),T=j_(t,ce),L=j_(M,T),Z=US(T,K),pe()}function pe(){return B=te=null,H}return function(){return t=e.apply(this,arguments),H.invert=t.invert&&ve,_e()}}function yx(e){var t=0,i=Mn/3,a=gx(e),c=a(t,i);return c.parallels=function(p){return arguments.length?a(t=p[0]*gn,i=p[1]*gn):[t*lr,i*lr]},c}function ER(e){var t=sn(e);function i(a,c){return[a*t,Qt(c)/t]}return i.invert=function(a,c){return[a/t,eo(c*t)]},i}function oI(e,t){var i=Qt(e),a=(i+Qt(t))/2;if(Dn(a)<fn)return ER(e);var c=1+i*(2*a-i),p=di(c)/a;function m(u,S){var P=di(c-2*a*Qt(S))/a;return[P*Qt(u*=a),p-P*sn(u)]}return m.invert=function(u,S){var P=p-S,M=Qi(u,Dn(P))*cs(P);return P*a<0&&(M-=Mn*cs(u)*cs(P)),[M/a,eo((c-(u*u+P*P)*a*a)/(2*a))]},m}function Lg(){return yx(oI).scale(155.424).center([0,33.6442])}function sI(){return Lg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function TR(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function CR(){var e,t,i=sI(),a,c=Lg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p,m=Lg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,S,P={point:function(C,O){S=[C,O]}};function M(C){var O=C[0],$=C[1];return S=null,a.point(O,$),S||(p.point(O,$),S)||(u.point(O,$),S)}M.invert=function(C){var O=i.scale(),$=i.translate(),j=(C[0]-$[0])/O,he=(C[1]-$[1])/O;return(he>=.12&&he<.234&&j>=-.425&&j<-.214?c:he>=.166&&he<.234&&j>=-.214&&j<-.115?m:i).invert(C)},M.stream=function(C){return e&&t===C?e:e=TR([i.stream(t=C),c.stream(C),m.stream(C)])},M.precision=function(C){return arguments.length?(i.precision(C),c.precision(C),m.precision(C),b()):i.precision()},M.scale=function(C){return arguments.length?(i.scale(C),c.scale(C*.35),m.scale(C),M.translate(i.translate())):i.scale()},M.translate=function(C){if(!arguments.length)return i.translate();var O=i.scale(),$=+C[0],j=+C[1];return a=i.translate(C).clipExtent([[$-.455*O,j-.238*O],[$+.455*O,j+.238*O]]).stream(P),p=c.translate([$-.307*O,j+.201*O]).clipExtent([[$-.425*O+fn,j+.12*O+fn],[$-.214*O-fn,j+.234*O-fn]]).stream(P),u=m.translate([$-.205*O,j+.212*O]).clipExtent([[$-.214*O+fn,j+.166*O+fn],[$-.115*O-fn,j+.234*O-fn]]).stream(P),b()},M.fitExtent=function(C,O){return uy(M,C,O)},M.fitSize=function(C,O){return fx(M,C,O)},M.fitWidth=function(C,O){return px(M,C,O)},M.fitHeight=function(C,O){return mx(M,C,O)};function b(){return e=t=null,M}return M.scale(1070)}function aI(e){return function(t,i){var a=sn(t),c=sn(i),p=e(a*c);return p===1/0?[2,0]:[p*c*Qt(t),p*Qt(i)]}}function ap(e){return function(t,i){var a=di(t*t+i*i),c=e(a),p=Qt(c),m=sn(c);return[Qi(t*p,a*m),eo(a&&i*p/a)]}}var vx=aI(function(e){return di(2/(1+e))});vx.invert=ap(function(e){return 2*eo(e/2)});function PR(){return ya(vx).scale(124.75).clipAngle(180-.001)}var _x=aI(function(e){return(e=PP(e))&&e/Qt(e)});_x.invert=ap(function(e){return e});function IR(){return ya(_x).scale(79.4188).clipAngle(180-.001)}function lp(e,t){return[e,yg(ux((Lr+t)/2))]}lp.invert=function(e,t){return[e,2*$h(CP(t))-Lr]};function AR(){return lI(lp).scale(961/Yi)}function lI(e){var t=ya(e),i=t.center,a=t.scale,c=t.translate,p=t.clipExtent,m=null,u,S,P;t.scale=function(b){return arguments.length?(a(b),M()):a()},t.translate=function(b){return arguments.length?(c(b),M()):c()},t.center=function(b){return arguments.length?(i(b),M()):i()},t.clipExtent=function(b){return arguments.length?(b==null?m=u=S=P=null:(m=+b[0][0],u=+b[0][1],S=+b[1][0],P=+b[1][1]),M()):m==null?null:[[m,u],[S,P]]};function M(){var b=Mn*a(),C=t(DP(t.rotate()).invert([0,0]));return p(m==null?[[C[0]-b,C[1]-b],[C[0]+b,C[1]+b]]:e===lp?[[Math.max(C[0]-b,m),u],[Math.min(C[0]+b,S),P]]:[[m,Math.max(C[1]-b,u)],[S,Math.min(C[1]+b,P)]])}return M()}function ym(e){return ux((Lr+e)/2)}function uI(e,t){var i=sn(e),a=e===t?Qt(e):yg(i/sn(t))/yg(ym(t)/ym(e)),c=i*V0(ym(e),a)/a;if(!a)return lp;function p(m,u){c>0?u<-Lr+fn&&(u=-Lr+fn):u>Lr-fn&&(u=Lr-fn);var S=c/V0(ym(u),a);return[S*Qt(a*m),c-S*sn(a*m)]}return p.invert=function(m,u){var S=c-u,P=cs(a)*di(m*m+S*S),M=Qi(m,Dn(S))*cs(S);return S*a<0&&(M-=Mn*cs(m)*cs(S)),[M/a,2*$h(V0(c/P,1/a))-Lr]},p}function MR(){return yx(uI).scale(109.5).parallels([30,30])}function Kf(e,t){return[e,t]}Kf.invert=Kf;function kR(){return ya(Kf).scale(152.63)}function cI(e,t){var i=sn(e),a=e===t?Qt(e):(i-sn(t))/(t-e),c=i/a+e;if(Dn(a)<fn)return Kf;function p(m,u){var S=c-u,P=a*m;return[S*Qt(P),c-S*sn(P)]}return p.invert=function(m,u){var S=c-u,P=Qi(m,Dn(S))*cs(S);return S*a<0&&(P-=Mn*cs(m)*cs(S)),[P/a,c-cs(a)*di(m*m+S*S)]},p}function zR(){return yx(cI).scale(131.154).center([0,13.9389])}var bf=1.340264,Sf=-.081106,Ef=893e-6,Tf=.003796,Dg=di(3)/2,FR=12;function xx(e,t){var i=eo(Dg*Qt(t)),a=i*i,c=a*a*a;return[e*sn(i)/(Dg*(bf+3*Sf*a+c*(7*Ef+9*Tf*a))),i*(bf+Sf*a+c*(Ef+Tf*a))]}xx.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,p=0,m,u,S;p<FR&&(u=i*(bf+Sf*a+c*(Ef+Tf*a))-t,S=bf+3*Sf*a+c*(7*Ef+9*Tf*a),i-=m=u/S,a=i*i,c=a*a*a,!(Dn(m)<Zf));++p);return[Dg*e*(bf+3*Sf*a+c*(7*Ef+9*Tf*a))/sn(i),eo(Qt(i)/Dg)]};function jR(){return ya(xx).scale(177.158)}function wx(e,t){var i=sn(t),a=sn(e)*i;return[i*Qt(e)/a,Qt(t)/a]}wx.invert=ap($h);function RR(){return ya(wx).scale(144.049).clipAngle(60)}function OR(){var e=1,t=0,i=0,a=1,c=1,p=0,m,u,S=null,P,M,b,C=1,O=1,$=sp({point:function(ae,K){var Z=G([ae,K]);this.stream.point(Z[0],Z[1])}}),j=Wf,he,q;function X(){return C=e*a,O=e*c,he=q=null,G}function G(ae){var K=ae[0]*C,Z=ae[1]*O;if(p){var T=Z*m-K*u;K=K*m+Z*u,Z=T}return[K+t,Z+i]}return G.invert=function(ae){var K=ae[0]-t,Z=ae[1]-i;if(p){var T=Z*m+K*u;K=K*m-Z*u,Z=T}return[K/C,Z/O]},G.stream=function(ae){return he&&q===ae?he:he=$(j(q=ae))},G.postclip=function(ae){return arguments.length?(j=ae,S=P=M=b=null,X()):j},G.clipExtent=function(ae){return arguments.length?(j=ae==null?(S=P=M=b=null,Wf):ly(S=+ae[0][0],P=+ae[0][1],M=+ae[1][0],b=+ae[1][1]),X()):S==null?null:[[S,P],[M,b]]},G.scale=function(ae){return arguments.length?(e=+ae,X()):e},G.translate=function(ae){return arguments.length?(t=+ae[0],i=+ae[1],X()):[t,i]},G.angle=function(ae){return arguments.length?(p=ae%360*gn,u=Qt(p),m=sn(p),X()):p*lr},G.reflectX=function(ae){return arguments.length?(a=ae?-1:1,X()):a<0},G.reflectY=function(ae){return arguments.length?(c=ae?-1:1,X()):c<0},G.fitExtent=function(ae,K){return uy(G,ae,K)},G.fitSize=function(ae,K){return fx(G,ae,K)},G.fitWidth=function(ae,K){return px(G,ae,K)},G.fitHeight=function(ae,K){return mx(G,ae,K)},G}function bx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}bx.invert=function(e,t){var i=t,a=25,c;do{var p=i*i,m=p*p;i-=c=(i*(1.007226+p*(.015085+m*(-.044475+.028874*p-.005916*m)))-t)/(1.007226+p*(.015085*3+m*(-.044475*7+.028874*9*p-.005916*11*m)))}while(Dn(c)>fn&&--a>0);return[e/(.8707+(p=i*i)*(-.131979+p*(-.013791+p*p*p*(.003971-.001529*p)))),i]};function LR(){return ya(bx).scale(175.295)}function Sx(e,t){return[sn(t)*Qt(e),Qt(t)]}Sx.invert=ap(eo);function DR(){return ya(Sx).scale(249.5).clipAngle(90+fn)}function Ex(e,t){var i=sn(t),a=1+sn(e)*i;return[i*Qt(e)/a,Qt(t)/a]}Ex.invert=ap(function(e){return 2*$h(e)});function BR(){return ya(Ex).scale(250).clipAngle(142)}function Tx(e,t){return[yg(ux((Lr+t)/2)),-e]}Tx.invert=function(e,t){return[-t,2*$h(CP(e))-Lr]};function NR(){var e=lI(Tx),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const UR=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:sI,geoAlbersUsa:CR,geoArea:zj,geoAzimuthalEqualArea:PR,geoAzimuthalEqualAreaRaw:vx,geoAzimuthalEquidistant:IR,geoAzimuthalEquidistantRaw:_x,geoBounds:Oj,geoCentroid:$j,geoCircle:Vj,geoClipAntimeridian:O_,geoClipCircle:GP,geoClipExtent:qj,geoClipRectangle:ly,geoConicConformal:MR,geoConicConformalRaw:uI,geoConicEqualArea:Lg,geoConicEqualAreaRaw:oI,geoConicEquidistant:zR,geoConicEquidistantRaw:cI,geoContains:rR,geoDistance:Mg,geoEqualEarth:jR,geoEqualEarthRaw:xx,geoEquirectangular:kR,geoEquirectangularRaw:Kf,geoGnomonic:RR,geoGnomonicRaw:wx,geoGraticule:HP,geoGraticule10:iR,geoIdentity:OR,geoInterpolate:oR,geoLength:ZP,geoMercator:AR,geoMercatorRaw:lp,geoNaturalEarth1:LR,geoNaturalEarth1Raw:bx,geoOrthographic:DR,geoOrthographicRaw:Sx,geoPath:gR,geoProjection:ya,geoProjectionMutator:gx,geoRotation:DP,geoStereographic:BR,geoStereographicRaw:Ex,geoStream:zs,geoTransform:yR,geoTransverseMercator:NR,geoTransverseMercatorRaw:Tx},Symbol.toStringTag,{value:"Module"})),$R=t1(UR);var su=2*Math.PI*6378137/2,VR=Math.PI/180;function hI(e){return e=e||256,2*Math.PI*6378137/e}function GR(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function K_(e,t,i){var a=dI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function dI(e,t,i){var a=t,c=Fx(e[0]),p=zx(e[1]),m=Math.sin(p*VR),u=Math.pow(2,a),S=u*(c/360+.5),P=u*(.5-.25*Math.log((1+m)/(1-m))/Math.PI);return sc([S,P,a],i)}function ZR(e,t=6){var i=e[0],a=e[1],c=e[2],p=e[3],m=(i-c)/2+c,u=(a-p)/2+p;return t!=null&&(m=Number(m.toFixed(t)),u=Number(u.toFixed(t))),[m,u]}function Bg(e,t,i={enable:!0,decimal:1}){e=cy(e,t);var a=e[0],c=e[1],p=a*su/180,m=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return m=m*su/180,i.enable&&(p=Number(p.toFixed(i.decimal)),m=Number(m.toFixed(i.decimal))),[p,m]}function q_(e,t=6){var i=e[0],a=e[1],c=i/su*180,p=a/su*180;return p=180/Math.PI*(2*Math.atan(Math.exp(p*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),p=Number(p.toFixed(t))),[c,p]}function Cx(e,t,i){var a=e[0],c=e[1],p=Mx(t,i),m=(a+su)/p,u=(c+su)/p;return[m,u,t]}function fI(e,t,i){e=cy(e,i);var a=Bg(e),c=Cx(a,t);return Px(c)}function WR(e,t,i){if(e=cy(e,i),t===0)return[0,0,0];var a=fI(e,t);return mI(a)}function HR(e,t){if(t===0)return[0,0,0];var i=Cx(e,t);return Px(i)}function J_(e,t,i=1){var a=e[0],c=e[1],p=e[2],m=Mx(p,t),u=a*m-su,S=c*m-su;return i!=null&&(u=Number(u.toFixed(i)),S=Number(S.toFixed(i))),[u,S]}function Px(e,t,i){t=t||256;var a=e[0],c=e[1],p=e[2];if(p===0)return[0,0,0];Ax(p);var m=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return m<0&&(m=0),u<0&&(u=0),[m,u,p]}function Ix(e,t,i){sc(e,i),t=t||256;var a=e[0],c=e[1],p=e[2],m=J_([a*t,c*t,p]),u=J_([(a+1)*t,(c+1)*t,p]);return[m[0],m[1],u[0],u[1]]}function pI(e,t){sc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var p=Ix([i,a,c]),m=p[0],u=p[1],S=p[2],P=p[3],M=q_([m,u,c]),b=q_([S,P,c]);return[M[0],M[1],b[0],b[1]]}function XR(e){var t=up(e);return Ix(t)}function KR(e){var t=up(e);return pI(t)}function mI(e,t){sc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var p=i,m=Math.pow(2,c)-1-a;return[p,m,c]}function up(e){var t=e[0],i=e[1],a=e[2],c=t,p=Math.pow(2,a)-i-1;return[c,p,a]}function qR(e){var t=up(e);return gI(t)}function gI(e,t){sc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var p="";return a=Math.pow(2,c)-1-a,kx(c,0,-1).map(function(m){var u=0,S=1<<m-1;i&S&&(u+=1),a&S&&(u+=2),p=p.concat(u)}),p}function JR(e){var t=yI(e);return up(t)}function yI(e){var t=0,i=0,a=e.length;return kx(a,0,-1).map(function(c){var p=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=p;break;case 2:i+=p;break;case 3:t+=p,i+=p;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function YR(e){var t=Bg([e[0],e[1]]),i=Bg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function sc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=Ax(c),e=vI(e),e}function vI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function Ax(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function cy(e,t){if(t===!1)return e;var i=Fx(e[0]),a=zx(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Mx(e,t){return hI(t)/Math.pow(2,e)}function kx(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),p=0;p<a;p++,e+=i)c[p]=e;return c}function QR(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(p){p[0]<t&&(t=p[0]),p[1]<i&&(i=p[1]),p[2]>a&&(a=p[2]),p[3]>c&&(c=p[3])}),[t,i,a,c]}}function eO(e){try{return sc(e),!0}catch{return!1}}function zx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Fx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function tO(e){var t=K_([e[0],e[1]],32),i=K_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=nO(a);if(c===0)return[0,0,0];var p=a[0]>>>32-c,m=a[1]>>>32-c;return[p,m,c]}function nO(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const rO=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:ZR,bboxToMeters:YR,bboxToTile:tO,googleToBBox:KR,googleToBBoxMeters:XR,googleToQuadkey:qR,googleToTile:up,hash:GR,initialResolution:hI,latitude:zx,lngLatToGoogle:WR,lngLatToMeters:Bg,lngLatToTile:fI,longitude:Fx,maxBBox:QR,metersToLngLat:q_,metersToPixels:Cx,metersToTile:HR,pixelsToMeters:J_,pixelsToTile:Px,pointToTile:K_,pointToTileFraction:dI,quadkeyToGoogle:yI,quadkeyToTile:JR,range:kx,resolution:Mx,tileToBBox:pI,tileToBBoxMeters:Ix,tileToGoogle:mI,tileToQuadkey:gI,validTile:eO,validateLngLat:cy,validateTile:sc,validateZoom:Ax,wrapTile:vI},Symbol.toStringTag,{value:"Module"})),iO=t1(rO);var hy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */hy.read=function(e,t,i,a,c){var p,m,u=c*8-a-1,S=(1<<u)-1,P=S>>1,M=-7,b=i?c-1:0,C=i?-1:1,O=e[t+b];for(b+=C,p=O&(1<<-M)-1,O>>=-M,M+=u;M>0;p=p*256+e[t+b],b+=C,M-=8);for(m=p&(1<<-M)-1,p>>=-M,M+=a;M>0;m=m*256+e[t+b],b+=C,M-=8);if(p===0)p=1-P;else{if(p===S)return m?NaN:(O?-1:1)*(1/0);m=m+Math.pow(2,a),p=p-P}return(O?-1:1)*m*Math.pow(2,p-a)};hy.write=function(e,t,i,a,c,p){var m,u,S,P=p*8-c-1,M=(1<<P)-1,b=M>>1,C=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:p-1,$=a?1:-1,j=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,m=M):(m=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-m))<1&&(m--,S*=2),m+b>=1?t+=C/S:t+=C*Math.pow(2,1-b),t*S>=2&&(m++,S/=2),m+b>=M?(u=0,m=M):m+b>=1?(u=(t*S-1)*Math.pow(2,c),m=m+b):(u=t*Math.pow(2,b-1)*Math.pow(2,c),m=0));c>=8;e[i+O]=u&255,O+=$,u/=256,c-=8);for(m=m<<c|u,P+=c;P>0;e[i+O]=m&255,O+=$,m/=256,P-=8);e[i+O-$]|=j*128};var oO=Xn,vm=hy;function Xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0;Xn.Fixed64=1;Xn.Bytes=2;Xn.Fixed32=5;var Y_=65536*65536,VS=1/Y_,sO=12,_I=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");Xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,p=this.pos;this.type=a&7,e(c,t,this),this.pos===p&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=_m(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ZS(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=_m(this.buf,this.pos)+_m(this.buf,this.pos+4)*Y_;return this.pos+=8,e},readSFixed64:function(){var e=_m(this.buf,this.pos)+ZS(this.buf,this.pos+4)*Y_;return this.pos+=8,e},readFloat:function(){var e=vm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=vm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,aO(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=sO&&_I?wO(this.buf,t,e):xO(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xn.Bytes)return e.push(this.readVarint(t));var i=Ba(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSVarint());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xn.Bytes)return e.push(this.readBoolean());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFloat());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xn.Bytes)return e.push(this.readDouble());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed32());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed32());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed64());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed64());var t=Ba(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xn.Fixed32)this.pos+=4;else if(t===Xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Xc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Xc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Xc(this.buf,e&-1,this.pos),Xc(this.buf,Math.floor(e*VS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Xc(this.buf,e&-1,this.pos),Xc(this.buf,Math.floor(e*VS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){lO(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=bO(this.buf,e,this.pos);var i=this.pos-t;i>=128&&GS(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),vm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),vm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&GS(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Xn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,hO,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dO,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,mO,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,fO,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,pO,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,gO,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,yO,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,vO,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,_O,t)},writeBytesField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function aO(e,t,i){var a=i.buf,c,p;if(p=a[i.pos++],c=(p&112)>>4,p<128||(p=a[i.pos++],c|=(p&127)<<3,p<128)||(p=a[i.pos++],c|=(p&127)<<10,p<128)||(p=a[i.pos++],c|=(p&127)<<17,p<128)||(p=a[i.pos++],c|=(p&127)<<24,p<128)||(p=a[i.pos++],c|=(p&1)<<31,p<128))return Hc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Ba(e){return e.type===Xn.Bytes?e.readVarint()+e.pos:e.pos+1}function Hc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function lO(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),uO(i,a,t),cO(a,t)}function uO(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function cO(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function GS(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function hO(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function dO(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function fO(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function pO(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function mO(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function gO(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function yO(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function vO(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function _O(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function _m(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Xc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function ZS(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function xO(e,t,i){for(var a="",c=t;c<i;){var p=e[c],m=null,u=p>239?4:p>223?3:p>191?2:1;if(c+u>i)break;var S,P,M;u===1?p<128&&(m=p):u===2?(S=e[c+1],(S&192)===128&&(m=(p&31)<<6|S&63,m<=127&&(m=null))):u===3?(S=e[c+1],P=e[c+2],(S&192)===128&&(P&192)===128&&(m=(p&15)<<12|(S&63)<<6|P&63,(m<=2047||m>=55296&&m<=57343)&&(m=null))):u===4&&(S=e[c+1],P=e[c+2],M=e[c+3],(S&192)===128&&(P&192)===128&&(M&192)===128&&(m=(p&15)<<18|(S&63)<<12|(P&63)<<6|M&63,(m<=65535||m>=1114112)&&(m=null))),m===null?(m=65533,u=1):m>65535&&(m-=65536,a+=String.fromCharCode(m>>>10&1023|55296),m=56320|m&1023),a+=String.fromCharCode(m),c+=u}return a}function wO(e,t,i){return _I.decode(e.subarray(t,i))}function bO(e,t,i){for(var a=0,c,p;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(p)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,p=c;continue}else c=p-55296<<10|c-56320|65536,p=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):p=c;continue}else p&&(e[i++]=239,e[i++]=191,e[i++]=189,p=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var jx={exports:{}},xI=function(t,i){return function(){for(var c=new Array(arguments.length),p=0;p<c.length;p++)c[p]=arguments[p];return t.apply(i,c)}},SO=xI,ac=Object.prototype.toString;function Rx(e){return ac.call(e)==="[object Array]"}function Q_(e){return typeof e>"u"}function EO(e){return e!==null&&!Q_(e)&&e.constructor!==null&&!Q_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function TO(e){return ac.call(e)==="[object ArrayBuffer]"}function CO(e){return typeof FormData<"u"&&e instanceof FormData}function PO(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function IO(e){return typeof e=="string"}function AO(e){return typeof e=="number"}function wI(e){return e!==null&&typeof e=="object"}function Dm(e){if(ac.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function MO(e){return ac.call(e)==="[object Date]"}function kO(e){return ac.call(e)==="[object File]"}function zO(e){return ac.call(e)==="[object Blob]"}function bI(e){return ac.call(e)==="[object Function]"}function FO(e){return wI(e)&&bI(e.pipe)}function jO(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function RO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function OO(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ox(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Rx(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function e1(){var e={};function t(c,p){Dm(e[p])&&Dm(c)?e[p]=e1(e[p],c):Dm(c)?e[p]=e1({},c):Rx(c)?e[p]=c.slice():e[p]=c}for(var i=0,a=arguments.length;i<a;i++)Ox(arguments[i],t);return e}function LO(e,t,i){return Ox(t,function(c,p){i&&typeof c=="function"?e[p]=SO(c,i):e[p]=c}),e}function DO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Wo={isArray:Rx,isArrayBuffer:TO,isBuffer:EO,isFormData:CO,isArrayBufferView:PO,isString:IO,isNumber:AO,isObject:wI,isPlainObject:Dm,isUndefined:Q_,isDate:MO,isFile:kO,isBlob:zO,isFunction:bI,isStream:FO,isURLSearchParams:jO,isStandardBrowserEnv:OO,forEach:Ox,merge:e1,extend:LO,trim:RO,stripBOM:DO},Kc=Wo;function WS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var SI=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Kc.isURLSearchParams(i))c=i.toString();else{var p=[];Kc.forEach(i,function(S,P){S===null||typeof S>"u"||(Kc.isArray(S)?P=P+"[]":S=[S],Kc.forEach(S,function(b){Kc.isDate(b)?b=b.toISOString():Kc.isObject(b)&&(b=JSON.stringify(b)),p.push(WS(P)+"="+WS(b))}))}),c=p.join("&")}if(c){var m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},BO=Wo;function dy(){this.handlers=[]}dy.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};dy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};dy.prototype.forEach=function(t){BO.forEach(this.handlers,function(a){a!==null&&t(a)})};var NO=dy,UO=Wo,$O=function(t,i){UO.forEach(t,function(c,p){p!==i&&p.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[p])})},EI=function(t,i,a,c,p){return t.config=i,a&&(t.code=a),t.request=c,t.response=p,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},X0,HS;function TI(){if(HS)return X0;HS=1;var e=EI;return X0=function(i,a,c,p,m){var u=new Error(i);return e(u,a,c,p,m)},X0}var K0,XS;function VO(){if(XS)return K0;XS=1;var e=TI();return K0=function(i,a,c){var p=c.config.validateStatus;!c.status||!p||p(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},K0}var q0,KS;function GO(){if(KS)return q0;KS=1;var e=Wo;return q0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,p,m,u,S){var P=[];P.push(a+"="+encodeURIComponent(c)),e.isNumber(p)&&P.push("expires="+new Date(p).toGMTString()),e.isString(m)&&P.push("path="+m),e.isString(u)&&P.push("domain="+u),S===!0&&P.push("secure"),document.cookie=P.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),q0}var J0,qS;function ZO(){return qS||(qS=1,J0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),J0}var Y0,JS;function WO(){return JS||(JS=1,Y0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),Y0}var Q0,YS;function HO(){if(YS)return Q0;YS=1;var e=ZO(),t=WO();return Q0=function(a,c){return a&&!e(c)?t(a,c):c},Q0}var ev,QS;function XO(){if(QS)return ev;QS=1;var e=Wo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ev=function(a){var c={},p,m,u;return a&&e.forEach(a.split(`
`),function(P){if(u=P.indexOf(":"),p=e.trim(P.substr(0,u)).toLowerCase(),m=e.trim(P.substr(u+1)),p){if(c[p]&&t.indexOf(p)>=0)return;p==="set-cookie"?c[p]=(c[p]?c[p]:[]).concat([m]):c[p]=c[p]?c[p]+", "+m:m}}),c},ev}var tv,eE;function KO(){if(eE)return tv;eE=1;var e=Wo;return tv=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function p(m){var u=m;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=p(window.location.href),function(u){var S=e.isString(u)?p(u):u;return S.protocol===c.protocol&&S.host===c.host}}():function(){return function(){return!0}}(),tv}var nv,tE;function nE(){if(tE)return nv;tE=1;var e=Wo,t=VO(),i=GO(),a=SI,c=HO(),p=XO(),m=KO(),u=TI();return nv=function(P){return new Promise(function(b,C){var O=P.data,$=P.headers,j=P.responseType;e.isFormData(O)&&delete $["Content-Type"];var he=new XMLHttpRequest;if(P.auth){var q=P.auth.username||"",X=P.auth.password?unescape(encodeURIComponent(P.auth.password)):"";$.Authorization="Basic "+btoa(q+":"+X)}var G=c(P.baseURL,P.url);he.open(P.method.toUpperCase(),a(G,P.params,P.paramsSerializer),!0),he.timeout=P.timeout;function ae(){if(he){var Z="getAllResponseHeaders"in he?p(he.getAllResponseHeaders()):null,T=!j||j==="text"||j==="json"?he.responseText:he.response,L={data:T,status:he.status,statusText:he.statusText,headers:Z,config:P,request:he};t(b,C,L),he=null}}if("onloadend"in he?he.onloadend=ae:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(ae)},he.onabort=function(){he&&(C(u("Request aborted",P,"ECONNABORTED",he)),he=null)},he.onerror=function(){C(u("Network Error",P,null,he)),he=null},he.ontimeout=function(){var T="timeout of "+P.timeout+"ms exceeded";P.timeoutErrorMessage&&(T=P.timeoutErrorMessage),C(u(T,P,P.transitional&&P.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",he)),he=null},e.isStandardBrowserEnv()){var K=(P.withCredentials||m(G))&&P.xsrfCookieName?i.read(P.xsrfCookieName):void 0;K&&($[P.xsrfHeaderName]=K)}"setRequestHeader"in he&&e.forEach($,function(T,L){typeof O>"u"&&L.toLowerCase()==="content-type"?delete $[L]:he.setRequestHeader(L,T)}),e.isUndefined(P.withCredentials)||(he.withCredentials=!!P.withCredentials),j&&j!=="json"&&(he.responseType=P.responseType),typeof P.onDownloadProgress=="function"&&he.addEventListener("progress",P.onDownloadProgress),typeof P.onUploadProgress=="function"&&he.upload&&he.upload.addEventListener("progress",P.onUploadProgress),P.cancelToken&&P.cancelToken.promise.then(function(T){he&&(he.abort(),C(T),he=null)}),O||(O=null),he.send(O)})},nv}var Ti=Wo,rE=$O,qO=EI,JO={"Content-Type":"application/x-www-form-urlencoded"};function iE(e,t){!Ti.isUndefined(e)&&Ti.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function YO(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=nE()),e}function QO(e,t,i){if(Ti.isString(e))try{return(t||JSON.parse)(e),Ti.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(0,JSON.stringify)(e)}var fy={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:YO(),transformRequest:[function(t,i){return rE(i,"Accept"),rE(i,"Content-Type"),Ti.isFormData(t)||Ti.isArrayBuffer(t)||Ti.isBuffer(t)||Ti.isStream(t)||Ti.isFile(t)||Ti.isBlob(t)?t:Ti.isArrayBufferView(t)?t.buffer:Ti.isURLSearchParams(t)?(iE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ti.isObject(t)||i&&i["Content-Type"]==="application/json"?(iE(i,"application/json"),QO(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,p=!a&&this.responseType==="json";if(p||c&&Ti.isString(t)&&t.length)try{return JSON.parse(t)}catch(m){if(p)throw m.name==="SyntaxError"?qO(m,this,"E_JSON_PARSE"):m}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};fy.headers={common:{Accept:"application/json, text/plain, */*"}};Ti.forEach(["delete","get","head"],function(t){fy.headers[t]={}});Ti.forEach(["post","put","patch"],function(t){fy.headers[t]=Ti.merge(JO)});var Lx=fy,eL=Wo,tL=Lx,nL=function(t,i,a){var c=this||tL;return eL.forEach(a,function(m){t=m.call(c,t,i)}),t},rv,oE;function CI(){return oE||(oE=1,rv=function(t){return!!(t&&t.__CANCEL__)}),rv}var sE=Wo,iv=nL,rL=CI(),iL=Lx;function ov(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var oL=function(t){ov(t),t.headers=t.headers||{},t.data=iv.call(t,t.data,t.headers,t.transformRequest),t.headers=sE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),sE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||iL.adapter;return i(t).then(function(c){return ov(t),c.data=iv.call(t,c.data,c.headers,t.transformResponse),c},function(c){return rL(c)||(ov(t),c&&c.response&&(c.response.data=iv.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Ni=Wo,PI=function(t,i){i=i||{};var a={},c=["url","method","data"],p=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function S(C,O){return Ni.isPlainObject(C)&&Ni.isPlainObject(O)?Ni.merge(C,O):Ni.isPlainObject(O)?Ni.merge({},O):Ni.isArray(O)?O.slice():O}function P(C){Ni.isUndefined(i[C])?Ni.isUndefined(t[C])||(a[C]=S(void 0,t[C])):a[C]=S(t[C],i[C])}Ni.forEach(c,function(O){Ni.isUndefined(i[O])||(a[O]=S(void 0,i[O]))}),Ni.forEach(p,P),Ni.forEach(m,function(O){Ni.isUndefined(i[O])?Ni.isUndefined(t[O])||(a[O]=S(void 0,t[O])):a[O]=S(void 0,i[O])}),Ni.forEach(u,function(O){O in i?a[O]=S(t[O],i[O]):O in t&&(a[O]=S(void 0,t[O]))});var M=c.concat(p).concat(m).concat(u),b=Object.keys(t).concat(Object.keys(i)).filter(function(O){return M.indexOf(O)===-1});return Ni.forEach(b,P),a};const sL="axios",aL="0.21.4",lL="Promise based HTTP client for the browser and node.js",uL="index.js",cL={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},hL={type:"git",url:"https://github.com/axios/axios.git"},dL=["xhr","http","ajax","promise","node"],fL="Matt Zabriskie",pL="MIT",mL={url:"https://github.com/axios/axios/issues"},gL="https://axios-http.com",yL={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},vL={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},_L="dist/axios.min.js",xL="dist/axios.min.js",wL="./index.d.ts",bL={"follow-redirects":"^1.14.0"},SL=[{path:"./dist/axios.min.js",threshold:"5kB"}],EL={name:sL,version:aL,description:lL,main:uL,scripts:cL,repository:hL,keywords:dL,author:fL,license:pL,bugs:mL,homepage:gL,devDependencies:yL,browser:vL,jsdelivr:_L,unpkg:xL,typings:wL,dependencies:bL,bundlesize:SL};var II=EL,Dx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Dx[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var aE={},TL=II.version.split(".");function AI(e,t){for(var i=t?t.split("."):TL,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}Dx.transitional=function(t,i,a){var c=i&&AI(i);function p(m,u){return"[Axios v"+II.version+"] Transitional option '"+m+"'"+u+(a?". "+a:"")}return function(m,u,S){if(t===!1)throw new Error(p(u," has been removed in "+i));return c&&!aE[u]&&(aE[u]=!0,console.warn(p(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(m,u,S):!0}};function CL(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var p=a[c],m=t[p];if(m){var u=e[p],S=u===void 0||m(u,p,e);if(S!==!0)throw new TypeError("option "+p+" must be "+S);continue}if(i!==!0)throw Error("Unknown option "+p)}}var PL={isOlderVersion:AI,assertOptions:CL,validators:Dx},MI=Wo,IL=SI,lE=NO,uE=oL,py=PI,kI=PL,qc=kI.validators;function cp(e){this.defaults=e,this.interceptors={request:new lE,response:new lE}}cp.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=py(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&kI.assertOptions(i,{silentJSONParsing:qc.transitional(qc.boolean,"1.0.0"),forcedJSONParsing:qc.transitional(qc.boolean,"1.0.0"),clarifyTimeoutError:qc.transitional(qc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(c=c&&C.synchronous,a.unshift(C.fulfilled,C.rejected))});var p=[];this.interceptors.response.forEach(function(C){p.push(C.fulfilled,C.rejected)});var m;if(!c){var u=[uE,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(p),m=Promise.resolve(t);u.length;)m=m.then(u.shift(),u.shift());return m}for(var S=t;a.length;){var P=a.shift(),M=a.shift();try{S=P(S)}catch(b){M(b);break}}try{m=uE(S)}catch(b){return Promise.reject(b)}for(;p.length;)m=m.then(p.shift(),p.shift());return m};cp.prototype.getUri=function(t){return t=py(this.defaults,t),IL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};MI.forEach(["delete","get","head","options"],function(t){cp.prototype[t]=function(i,a){return this.request(py(a||{},{method:t,url:i,data:(a||{}).data}))}});MI.forEach(["post","put","patch"],function(t){cp.prototype[t]=function(i,a,c){return this.request(py(c||{},{method:t,url:i,data:a}))}});var AL=cp,sv,cE;function zI(){if(cE)return sv;cE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,sv=e,sv}var av,hE;function ML(){if(hE)return av;hE=1;var e=zI();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(m){a=m});var c=this;i(function(m){c.reason||(c.reason=new e(m),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(m){a=m});return{token:c,cancel:a}},av=t,av}var lv,dE;function kL(){return dE||(dE=1,lv=function(t){return function(a){return t.apply(null,a)}}),lv}var uv,fE;function zL(){return fE||(fE=1,uv=function(t){return typeof t=="object"&&t.isAxiosError===!0}),uv}var pE=Wo,FL=xI,Bm=AL,jL=PI,RL=Lx;function FI(e){var t=new Bm(e),i=FL(Bm.prototype.request,t);return pE.extend(i,Bm.prototype,t),pE.extend(i,t),i}var Ds=FI(RL);Ds.Axios=Bm;Ds.create=function(t){return FI(jL(Ds.defaults,t))};Ds.Cancel=zI();Ds.CancelToken=ML();Ds.isCancel=CI();Ds.all=function(t){return Promise.all(t)};Ds.spread=kL();Ds.isAxiosError=zL();jx.exports=Ds;jx.exports.default=Ds;var OL=jx.exports,LL=OL;const DL={},BL=Object.freeze(Object.defineProperty({__proto__:null,default:DL},Symbol.toStringTag,{value:"Module"})),NL=t1(BL);var my={},UL=bh;function bh(e,t){this.x=e,this.y=t}bh.prototype={clone:function(){return new bh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),p=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};bh.convert=function(e){return e instanceof bh?e:Array.isArray(e)?new bh(e[0],e[1]):e};var $L=UL,jI=Oh;function Oh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(VL,this,t)}function VL(e,t,i){e==1?t.id=i.readVarint():e==2?GL(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function GL(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Oh.types=["Unknown","Point","LineString","Polygon"];Oh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,m=[],u;e.pos<t;){if(a<=0){var S=e.readVarint();i=S&7,a=S>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),i===1&&(u&&m.push(u),u=[]),u.push(new $L(c,p));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&m.push(u),m};Oh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,p=0,m=1/0,u=-1/0,S=1/0,P=-1/0;e.pos<t;){if(a<=0){var M=e.readVarint();i=M&7,a=M>>3}if(a--,i===1||i===2)c+=e.readSVarint(),p+=e.readSVarint(),c<m&&(m=c),c>u&&(u=c),p<S&&(S=p),p>P&&(P=p);else if(i!==7)throw new Error("unknown command "+i)}return[m,S,u,P]};Oh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,p=this.extent*t,m=this.loadGeometry(),u=Oh.types[this.type],S,P;function M(O){for(var $=0;$<O.length;$++){var j=O[$],he=180-(j.y+p)*360/a;O[$]=[(j.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(he*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(S=0;S<m.length;S++)b[S]=m[S][0];m=b,M(m);break;case 2:for(S=0;S<m.length;S++)M(m[S]);break;case 3:for(m=ZL(m),S=0;S<m.length;S++)for(P=0;P<m[S].length;P++)M(m[S][P]);break}m.length===1?m=m[0]:u="Multi"+u;var C={type:"Feature",geometry:{type:u,coordinates:m},properties:this.properties};return"id"in this&&(C.id=this.id),C};function ZL(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,p=0;p<t;p++){var m=WL(e[p]);m!==0&&(c===void 0&&(c=m<0),c===m<0?(a&&i.push(a),a=[e[p]]):a.push(e[p]))}return a&&i.push(a),i}function WL(e){for(var t=0,i=0,a=e.length,c=a-1,p,m;i<a;c=i++)p=e[i],m=e[c],t+=(m.x-p.x)*(p.y+m.y);return t}var HL=jI,RI=OI;function OI(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(XL,this,t),this.length=this._features.length}function XL(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(KL(i))}function KL(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}OI.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new HL(this._pbf,t,this.extent,this._keys,this._values)};var qL=RI,JL=YL;function YL(e,t){this.layers=e.readFields(QL,{},t)}function QL(e,t,i){if(e===3){var a=new qL(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}my.VectorTile=JL;my.VectorTileFeature=jI;my.VectorTileLayer=RI;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=$R,i=iO,a=oO,c=LL,p=NL,m=my;function u(X){return X&&typeof X=="object"&&"default"in X?X:{default:X}}var S=u(a),P=u(c),M=u(p),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Nl<"u"?Nl:typeof self<"u"?self:{};function C(X){var G={exports:{}};return X(G,G.exports),G.exports}var O=C(function(X,G){(function(K,Z){X.exports=Z(P.default)})(b,function(ae){return function(K){var Z={};function T(L){if(Z[L])return Z[L].exports;var B=Z[L]={i:L,l:!1,exports:{}};return K[L].call(B.exports,B,B.exports,T),B.l=!0,B.exports}return T.m=K,T.c=Z,T.d=function(L,B,te){T.o(L,B)||Object.defineProperty(L,B,{enumerable:!0,get:te})},T.r=function(L){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})},T.t=function(L,B){if(B&1&&(L=T(L)),B&8||B&4&&typeof L=="object"&&L&&L.__esModule)return L;var te=Object.create(null);if(T.r(te),Object.defineProperty(te,"default",{enumerable:!0,value:L}),B&2&&typeof L!="string")for(var H in L)T.d(te,H,(function(ve){return L[ve]}).bind(null,H));return te},T.n=function(L){var B=L&&L.__esModule?function(){return L.default}:function(){return L};return T.d(B,"a",B),B},T.o=function(L,B){return Object.prototype.hasOwnProperty.call(L,B)},T.p="",T(T.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(K,Z,T){T.r(Z),T.d(Z,"CacheControl",function(){return Ce}),T.d(Z,"parse",function(){return Ue}),T.d(Z,"format",function(){return Ae}),T("./node_modules/core-js/modules/es6.array.from.js"),T("./node_modules/core-js/modules/es6.function.name.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/core-js/modules/web.dom.iterable.js"),T("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.regexp.split.js"),T("./node_modules/core-js/modules/es6.number.is-finite.js");function L(Fe,Ze){return _e(Fe)||ve(Fe,Ze)||te(Fe,Ze)||B()}function B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(Fe,Ze){if(Fe){if(typeof Fe=="string")return H(Fe,Ze);var We=Object.prototype.toString.call(Fe).slice(8,-1);if(We==="Object"&&Fe.constructor&&(We=Fe.constructor.name),We==="Map"||We==="Set")return Array.from(Fe);if(We==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(We))return H(Fe,Ze)}}function H(Fe,Ze){(Ze==null||Ze>Fe.length)&&(Ze=Fe.length);for(var We=0,it=new Array(Ze);We<Ze;We++)it[We]=Fe[We];return it}function ve(Fe,Ze){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Fe)))){var We=[],it=!0,ct=!1,vt=void 0;try{for(var Mt=Fe[Symbol.iterator](),pt;!(it=(pt=Mt.next()).done)&&(We.push(pt.value),!(Ze&&We.length===Ze));it=!0);}catch(xt){ct=!0,vt=xt}finally{try{!it&&Mt.return!=null&&Mt.return()}finally{if(ct)throw vt}}return We}}function _e(Fe){if(Array.isArray(Fe))return Fe}function pe(Fe,Ze){if(!(Fe instanceof Ze))throw new TypeError("Cannot call a class as a function")}function oe(Fe,Ze){for(var We=0;We<Ze.length;We++){var it=Ze[We];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Fe,it.key,it)}}function ce(Fe,Ze,We){return Ze&&oe(Fe.prototype,Ze),Fe}var ee=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function fe(Fe){return Fe===null}function Se(Fe){if(!Fe)return null;var Ze=parseInt(Fe,10);return!Number.isFinite(Ze)||Ze<0?null:Ze}var Ce=function(){function Fe(){pe(this,Fe),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ce(Fe,[{key:"parse",value:function(We){if(!We||We.length===0)return this;var it={},ct=We.match(ee)||[];return Array.prototype.forEach.call(ct,function(vt){var Mt=vt.split("=",2),pt=L(Mt,1),xt=pt[0],Wt=null;Mt.length>1&&(Wt=Mt[1].trim()),it[xt.toLowerCase()]=Wt}),this.maxAge=Se(it[re.maxAge]),this.sharedMaxAge=Se(it[re.sharedMaxAge]),this.maxStale=fe(it[re.maxStale]),this.maxStaleDuration=Se(it[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Se(it[re.minFresh]),this.immutable=fe(it[re.immutable]),this.mustRevalidate=fe(it[re.mustRevalidate]),this.noCache=fe(it[re.noCache]),this.noStore=fe(it[re.noStore]),this.noTransform=fe(it[re.noTransform]),this.onlyIfCached=fe(it[re.onlyIfCached]),this.private=fe(it[re.private]),this.proxyRevalidate=fe(it[re.proxyRevalidate]),this.public=fe(it[re.public]),this}},{key:"format",value:function(){var We=[];return this.maxAge&&We.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&We.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?We.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):We.push(re.maxStale)),this.minFresh&&We.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&We.push(re.immutable),this.mustRevalidate&&We.push(re.mustRevalidate),this.noCache&&We.push(re.noCache),this.noStore&&We.push(re.noStore),this.noTransform&&We.push(re.noTransform),this.onlyIfCached&&We.push(re.onlyIfCached),this.private&&We.push(re.private),this.proxyRevalidate&&We.push(re.proxyRevalidate),this.public&&We.push(re.public),We.join(", ")}}]),Fe}();function Ue(Fe){var Ze=new Ce;return Ze.parse(Fe)}function Ae(Fe){return Fe instanceof Ce?Fe.format():Ce.prototype.format.call(Fe)}Z.default={CacheControl:Ce,parse:Ue,format:Ae}},"./node_modules/charenc/charenc.js":function(K,Z){var T={utf8:{stringToBytes:function(L){return T.bin.stringToBytes(unescape(encodeURIComponent(L)))},bytesToString:function(L){return decodeURIComponent(escape(T.bin.bytesToString(L)))}},bin:{stringToBytes:function(L){for(var B=[],te=0;te<L.length;te++)B.push(L.charCodeAt(te)&255);return B},bytesToString:function(L){for(var B=[],te=0;te<L.length;te++)B.push(String.fromCharCode(L[te]));return B.join("")}}};K.exports=T},"./node_modules/core-js/modules/_a-function.js":function(K,Z){K.exports=function(T){if(typeof T!="function")throw TypeError(T+" is not a function!");return T}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_wks.js")("unscopables"),B=Array.prototype;B[L]==null&&T("./node_modules/core-js/modules/_hide.js")(B,L,{}),K.exports=function(te){B[L][te]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_string-at.js")(!0);K.exports=function(B,te,H){return te+(H?L(B,te).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_is-object.js");K.exports=function(B){if(!L(B))throw TypeError(B+" is not an object!");return B}},"./node_modules/core-js/modules/_array-includes.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_to-iobject.js"),B=T("./node_modules/core-js/modules/_to-length.js"),te=T("./node_modules/core-js/modules/_to-absolute-index.js");K.exports=function(H){return function(ve,_e,pe){var oe=L(ve),ce=B(oe.length),ee=te(pe,ce),re;if(H&&_e!=_e){for(;ce>ee;)if(re=oe[ee++],re!=re)return!0}else for(;ce>ee;ee++)if((H||ee in oe)&&oe[ee]===_e)return H||ee||0;return!H&&-1}}},"./node_modules/core-js/modules/_bind.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_a-function.js"),B=T("./node_modules/core-js/modules/_is-object.js"),te=T("./node_modules/core-js/modules/_invoke.js"),H=[].slice,ve={},_e=function(pe,oe,ce){if(!(oe in ve)){for(var ee=[],re=0;re<oe;re++)ee[re]="a["+re+"]";ve[oe]=Function("F,a","return new F("+ee.join(",")+")")}return ve[oe](pe,ce)};K.exports=Function.bind||function(oe){var ce=L(this),ee=H.call(arguments,1),re=function(){var fe=ee.concat(H.call(arguments));return this instanceof re?_e(ce,fe.length,fe):te(ce,fe,oe)};return B(ce.prototype)&&(re.prototype=ce.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_cof.js"),B=T("./node_modules/core-js/modules/_wks.js")("toStringTag"),te=L(function(){return arguments}())=="Arguments",H=function(ve,_e){try{return ve[_e]}catch{}};K.exports=function(ve){var _e,pe,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(pe=H(_e=Object(ve),B))=="string"?pe:te?L(_e):(oe=L(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(K,Z){var T={}.toString;K.exports=function(L){return T.call(L).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(K,Z){var T=K.exports={version:"2.6.12"};typeof __e=="number"&&(__e=T)},"./node_modules/core-js/modules/_create-property.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-dp.js"),B=T("./node_modules/core-js/modules/_property-desc.js");K.exports=function(te,H,ve){H in te?L.f(te,H,B(0,ve)):te[H]=ve}},"./node_modules/core-js/modules/_ctx.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_a-function.js");K.exports=function(B,te,H){if(L(B),te===void 0)return B;switch(H){case 1:return function(ve){return B.call(te,ve)};case 2:return function(ve,_e){return B.call(te,ve,_e)};case 3:return function(ve,_e,pe){return B.call(te,ve,_e,pe)}}return function(){return B.apply(te,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(K,Z){K.exports=function(T){if(T==null)throw TypeError("Can't call method on  "+T);return T}},"./node_modules/core-js/modules/_descriptors.js":function(K,Z,T){K.exports=!T("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_is-object.js"),B=T("./node_modules/core-js/modules/_global.js").document,te=L(B)&&L(B.createElement);K.exports=function(H){return te?B.createElement(H):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(K,Z){K.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-keys.js"),B=T("./node_modules/core-js/modules/_object-gops.js"),te=T("./node_modules/core-js/modules/_object-pie.js");K.exports=function(H){var ve=L(H),_e=B.f;if(_e)for(var pe=_e(H),oe=te.f,ce=0,ee;pe.length>ce;)oe.call(H,ee=pe[ce++])&&ve.push(ee);return ve}},"./node_modules/core-js/modules/_export.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_global.js"),B=T("./node_modules/core-js/modules/_core.js"),te=T("./node_modules/core-js/modules/_hide.js"),H=T("./node_modules/core-js/modules/_redefine.js"),ve=T("./node_modules/core-js/modules/_ctx.js"),_e="prototype",pe=function(oe,ce,ee){var re=oe&pe.F,fe=oe&pe.G,Se=oe&pe.S,Ce=oe&pe.P,Ue=oe&pe.B,Ae=fe?L:Se?L[ce]||(L[ce]={}):(L[ce]||{})[_e],Fe=fe?B:B[ce]||(B[ce]={}),Ze=Fe[_e]||(Fe[_e]={}),We,it,ct,vt;fe&&(ee=ce);for(We in ee)it=!re&&Ae&&Ae[We]!==void 0,ct=(it?Ae:ee)[We],vt=Ue&&it?ve(ct,L):Ce&&typeof ct=="function"?ve(Function.call,ct):ct,Ae&&H(Ae,We,ct,oe&pe.U),Fe[We]!=ct&&te(Fe,We,vt),Ce&&Ze[We]!=ct&&(Ze[We]=ct)};L.core=B,pe.F=1,pe.G=2,pe.S=4,pe.P=8,pe.B=16,pe.W=32,pe.U=64,pe.R=128,K.exports=pe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_wks.js")("match");K.exports=function(B){var te=/./;try{"/./"[B](te)}catch{try{return te[L]=!1,!"/./"[B](te)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(K,Z){K.exports=function(T){try{return!!T()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(K,Z,T){T("./node_modules/core-js/modules/es6.regexp.exec.js");var L=T("./node_modules/core-js/modules/_redefine.js"),B=T("./node_modules/core-js/modules/_hide.js"),te=T("./node_modules/core-js/modules/_fails.js"),H=T("./node_modules/core-js/modules/_defined.js"),ve=T("./node_modules/core-js/modules/_wks.js"),_e=T("./node_modules/core-js/modules/_regexp-exec.js"),pe=ve("species"),oe=!te(function(){var ee=/./;return ee.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(ee,"$<a>")!=="7"}),ce=function(){var ee=/(?:)/,re=ee.exec;ee.exec=function(){return re.apply(this,arguments)};var fe="ab".split(ee);return fe.length===2&&fe[0]==="a"&&fe[1]==="b"}();K.exports=function(ee,re,fe){var Se=ve(ee),Ce=!te(function(){var it={};return it[Se]=function(){return 7},""[ee](it)!=7}),Ue=Ce?!te(function(){var it=!1,ct=/a/;return ct.exec=function(){return it=!0,null},ee==="split"&&(ct.constructor={},ct.constructor[pe]=function(){return ct}),ct[Se](""),!it}):void 0;if(!Ce||!Ue||ee==="replace"&&!oe||ee==="split"&&!ce){var Ae=/./[Se],Fe=fe(H,Se,""[ee],function(ct,vt,Mt,pt,xt){return vt.exec===_e?Ce&&!xt?{done:!0,value:Ae.call(vt,Mt,pt)}:{done:!0,value:ct.call(Mt,vt,pt)}:{done:!1}}),Ze=Fe[0],We=Fe[1];L(String.prototype,ee,Ze),B(RegExp.prototype,Se,re==2?function(it,ct){return We.call(it,this,ct)}:function(it){return We.call(it,this)})}}},"./node_modules/core-js/modules/_flags.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_an-object.js");K.exports=function(){var B=L(this),te="";return B.global&&(te+="g"),B.ignoreCase&&(te+="i"),B.multiline&&(te+="m"),B.unicode&&(te+="u"),B.sticky&&(te+="y"),te}},"./node_modules/core-js/modules/_function-to-string.js":function(K,Z,T){K.exports=T("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(K,Z){var T=K.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=T)},"./node_modules/core-js/modules/_has.js":function(K,Z){var T={}.hasOwnProperty;K.exports=function(L,B){return T.call(L,B)}},"./node_modules/core-js/modules/_hide.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-dp.js"),B=T("./node_modules/core-js/modules/_property-desc.js");K.exports=T("./node_modules/core-js/modules/_descriptors.js")?function(te,H,ve){return L.f(te,H,B(1,ve))}:function(te,H,ve){return te[H]=ve,te}},"./node_modules/core-js/modules/_html.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_global.js").document;K.exports=L&&L.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(K,Z,T){K.exports=!T("./node_modules/core-js/modules/_descriptors.js")&&!T("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(T("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(K,Z){K.exports=function(T,L,B){var te=B===void 0;switch(L.length){case 0:return te?T():T.call(B);case 1:return te?T(L[0]):T.call(B,L[0]);case 2:return te?T(L[0],L[1]):T.call(B,L[0],L[1]);case 3:return te?T(L[0],L[1],L[2]):T.call(B,L[0],L[1],L[2]);case 4:return te?T(L[0],L[1],L[2],L[3]):T.call(B,L[0],L[1],L[2],L[3])}return T.apply(B,L)}},"./node_modules/core-js/modules/_iobject.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_cof.js");K.exports=Object("z").propertyIsEnumerable(0)?Object:function(B){return L(B)=="String"?B.split(""):Object(B)}},"./node_modules/core-js/modules/_is-array-iter.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_iterators.js"),B=T("./node_modules/core-js/modules/_wks.js")("iterator"),te=Array.prototype;K.exports=function(H){return H!==void 0&&(L.Array===H||te[B]===H)}},"./node_modules/core-js/modules/_is-array.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_cof.js");K.exports=Array.isArray||function(te){return L(te)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(K,Z){K.exports=function(T){return typeof T=="object"?T!==null:typeof T=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_is-object.js"),B=T("./node_modules/core-js/modules/_cof.js"),te=T("./node_modules/core-js/modules/_wks.js")("match");K.exports=function(H){var ve;return L(H)&&((ve=H[te])!==void 0?!!ve:B(H)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_an-object.js");K.exports=function(B,te,H,ve){try{return ve?te(L(H)[0],H[1]):te(H)}catch(pe){var _e=B.return;throw _e!==void 0&&L(_e.call(B)),pe}}},"./node_modules/core-js/modules/_iter-create.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-create.js"),B=T("./node_modules/core-js/modules/_property-desc.js"),te=T("./node_modules/core-js/modules/_set-to-string-tag.js"),H={};T("./node_modules/core-js/modules/_hide.js")(H,T("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),K.exports=function(ve,_e,pe){ve.prototype=L(H,{next:B(1,pe)}),te(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_library.js"),B=T("./node_modules/core-js/modules/_export.js"),te=T("./node_modules/core-js/modules/_redefine.js"),H=T("./node_modules/core-js/modules/_hide.js"),ve=T("./node_modules/core-js/modules/_iterators.js"),_e=T("./node_modules/core-js/modules/_iter-create.js"),pe=T("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=T("./node_modules/core-js/modules/_object-gpo.js"),ce=T("./node_modules/core-js/modules/_wks.js")("iterator"),ee=!([].keys&&"next"in[].keys()),re="@@iterator",fe="keys",Se="values",Ce=function(){return this};K.exports=function(Ue,Ae,Fe,Ze,We,it,ct){_e(Fe,Ae,Ze);var vt=function(N){if(!ee&&N in Wt)return Wt[N];switch(N){case fe:return function(){return new Fe(this,N)};case Se:return function(){return new Fe(this,N)}}return function(){return new Fe(this,N)}},Mt=Ae+" Iterator",pt=We==Se,xt=!1,Wt=Ue.prototype,Ht=Wt[ce]||Wt[re]||We&&Wt[We],ln=Ht||vt(We),Qe=We?pt?vt("entries"):ln:void 0,_n=Ae=="Array"&&Wt.entries||Ht,un,Vt,Ee;if(_n&&(Ee=oe(_n.call(new Ue)),Ee!==Object.prototype&&Ee.next&&(pe(Ee,Mt,!0),!L&&typeof Ee[ce]!="function"&&H(Ee,ce,Ce))),pt&&Ht&&Ht.name!==Se&&(xt=!0,ln=function(){return Ht.call(this)}),(!L||ct)&&(ee||xt||!Wt[ce])&&H(Wt,ce,ln),ve[Ae]=ln,ve[Mt]=Ce,We)if(un={values:pt?ln:vt(Se),keys:it?ln:vt(fe),entries:Qe},ct)for(Vt in un)Vt in Wt||te(Wt,Vt,un[Vt]);else B(B.P+B.F*(ee||xt),Ae,un);return un}},"./node_modules/core-js/modules/_iter-detect.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_wks.js")("iterator"),B=!1;try{var te=[7][L]();te.return=function(){B=!0},Array.from(te,function(){throw 2})}catch{}K.exports=function(H,ve){if(!ve&&!B)return!1;var _e=!1;try{var pe=[7],oe=pe[L]();oe.next=function(){return{done:_e=!0}},pe[L]=function(){return oe},H(pe)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(K,Z){K.exports=function(T,L){return{value:L,done:!!T}}},"./node_modules/core-js/modules/_iterators.js":function(K,Z){K.exports={}},"./node_modules/core-js/modules/_library.js":function(K,Z){K.exports=!1},"./node_modules/core-js/modules/_meta.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_uid.js")("meta"),B=T("./node_modules/core-js/modules/_is-object.js"),te=T("./node_modules/core-js/modules/_has.js"),H=T("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},pe=!T("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(Se){H(Se,L,{value:{i:"O"+ ++ve,w:{}}})},ce=function(Se,Ce){if(!B(Se))return typeof Se=="symbol"?Se:(typeof Se=="string"?"S":"P")+Se;if(!te(Se,L)){if(!_e(Se))return"F";if(!Ce)return"E";oe(Se)}return Se[L].i},ee=function(Se,Ce){if(!te(Se,L)){if(!_e(Se))return!0;if(!Ce)return!1;oe(Se)}return Se[L].w},re=function(Se){return pe&&fe.NEED&&_e(Se)&&!te(Se,L)&&oe(Se),Se},fe=K.exports={KEY:L,NEED:!1,fastKey:ce,getWeak:ee,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_an-object.js"),B=T("./node_modules/core-js/modules/_object-dps.js"),te=T("./node_modules/core-js/modules/_enum-bug-keys.js"),H=T("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",pe=function(){var oe=T("./node_modules/core-js/modules/_dom-create.js")("iframe"),ce=te.length,ee="<",re=">",fe;for(oe.style.display="none",T("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",fe=oe.contentWindow.document,fe.open(),fe.write(ee+"script"+re+"document.F=Object"+ee+"/script"+re),fe.close(),pe=fe.F;ce--;)delete pe[_e][te[ce]];return pe()};K.exports=Object.create||function(ce,ee){var re;return ce!==null?(ve[_e]=L(ce),re=new ve,ve[_e]=null,re[H]=ce):re=pe(),ee===void 0?re:B(re,ee)}},"./node_modules/core-js/modules/_object-dp.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_an-object.js"),B=T("./node_modules/core-js/modules/_ie8-dom-define.js"),te=T("./node_modules/core-js/modules/_to-primitive.js"),H=Object.defineProperty;Z.f=T("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,pe,oe){if(L(_e),pe=te(pe,!0),L(oe),B)try{return H(_e,pe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[pe]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-dp.js"),B=T("./node_modules/core-js/modules/_an-object.js"),te=T("./node_modules/core-js/modules/_object-keys.js");K.exports=T("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){B(ve);for(var pe=te(_e),oe=pe.length,ce=0,ee;oe>ce;)L.f(ve,ee=pe[ce++],_e[ee]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-pie.js"),B=T("./node_modules/core-js/modules/_property-desc.js"),te=T("./node_modules/core-js/modules/_to-iobject.js"),H=T("./node_modules/core-js/modules/_to-primitive.js"),ve=T("./node_modules/core-js/modules/_has.js"),_e=T("./node_modules/core-js/modules/_ie8-dom-define.js"),pe=Object.getOwnPropertyDescriptor;Z.f=T("./node_modules/core-js/modules/_descriptors.js")?pe:function(ce,ee){if(ce=te(ce),ee=H(ee,!0),_e)try{return pe(ce,ee)}catch{}if(ve(ce,ee))return B(!L.f.call(ce,ee),ce[ee])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_to-iobject.js"),B=T("./node_modules/core-js/modules/_object-gopn.js").f,te={}.toString,H=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return B(_e)}catch{return H.slice()}};K.exports.f=function(pe){return H&&te.call(pe)=="[object Window]"?ve(pe):B(L(pe))}},"./node_modules/core-js/modules/_object-gopn.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-keys-internal.js"),B=T("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");Z.f=Object.getOwnPropertyNames||function(H){return L(H,B)}},"./node_modules/core-js/modules/_object-gops.js":function(K,Z){Z.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_has.js"),B=T("./node_modules/core-js/modules/_to-object.js"),te=T("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),H=Object.prototype;K.exports=Object.getPrototypeOf||function(ve){return ve=B(ve),L(ve,te)?ve[te]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?H:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_has.js"),B=T("./node_modules/core-js/modules/_to-iobject.js"),te=T("./node_modules/core-js/modules/_array-includes.js")(!1),H=T("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");K.exports=function(ve,_e){var pe=B(ve),oe=0,ce=[],ee;for(ee in pe)ee!=H&&L(pe,ee)&&ce.push(ee);for(;_e.length>oe;)L(pe,ee=_e[oe++])&&(~te(ce,ee)||ce.push(ee));return ce}},"./node_modules/core-js/modules/_object-keys.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-keys-internal.js"),B=T("./node_modules/core-js/modules/_enum-bug-keys.js");K.exports=Object.keys||function(H){return L(H,B)}},"./node_modules/core-js/modules/_object-pie.js":function(K,Z){Z.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-gopn.js"),B=T("./node_modules/core-js/modules/_object-gops.js"),te=T("./node_modules/core-js/modules/_an-object.js"),H=T("./node_modules/core-js/modules/_global.js").Reflect;K.exports=H&&H.ownKeys||function(_e){var pe=L.f(te(_e)),oe=B.f;return oe?pe.concat(oe(_e)):pe}},"./node_modules/core-js/modules/_property-desc.js":function(K,Z){K.exports=function(T,L){return{enumerable:!(T&1),configurable:!(T&2),writable:!(T&4),value:L}}},"./node_modules/core-js/modules/_redefine.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_global.js"),B=T("./node_modules/core-js/modules/_hide.js"),te=T("./node_modules/core-js/modules/_has.js"),H=T("./node_modules/core-js/modules/_uid.js")("src"),ve=T("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",pe=(""+ve).split(_e);T("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(K.exports=function(oe,ce,ee,re){var fe=typeof ee=="function";fe&&(te(ee,"name")||B(ee,"name",ce)),oe[ce]!==ee&&(fe&&(te(ee,H)||B(ee,H,oe[ce]?""+oe[ce]:pe.join(String(ce)))),oe===L?oe[ce]=ee:re?oe[ce]?oe[ce]=ee:B(oe,ce,ee):(delete oe[ce],B(oe,ce,ee)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[H]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_classof.js"),B=RegExp.prototype.exec;K.exports=function(te,H){var ve=te.exec;if(typeof ve=="function"){var _e=ve.call(te,H);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(L(te)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return B.call(te,H)}},"./node_modules/core-js/modules/_regexp-exec.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_flags.js"),B=RegExp.prototype.exec,te=String.prototype.replace,H=B,ve="lastIndex",_e=function(){var ce=/a/,ee=/b*/g;return B.call(ce,"a"),B.call(ee,"a"),ce[ve]!==0||ee[ve]!==0}(),pe=/()??/.exec("")[1]!==void 0,oe=_e||pe;oe&&(H=function(ee){var re=this,fe,Se,Ce,Ue;return pe&&(Se=new RegExp("^"+re.source+"$(?!\\s)",L.call(re))),_e&&(fe=re[ve]),Ce=B.call(re,ee),_e&&Ce&&(re[ve]=re.global?Ce.index+Ce[0].length:fe),pe&&Ce&&Ce.length>1&&te.call(Ce[0],Se,function(){for(Ue=1;Ue<arguments.length-2;Ue++)arguments[Ue]===void 0&&(Ce[Ue]=void 0)}),Ce}),K.exports=H},"./node_modules/core-js/modules/_set-to-string-tag.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-dp.js").f,B=T("./node_modules/core-js/modules/_has.js"),te=T("./node_modules/core-js/modules/_wks.js")("toStringTag");K.exports=function(H,ve,_e){H&&!B(H=_e?H:H.prototype,te)&&L(H,te,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_shared.js")("keys"),B=T("./node_modules/core-js/modules/_uid.js");K.exports=function(te){return L[te]||(L[te]=B(te))}},"./node_modules/core-js/modules/_shared.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_core.js"),B=T("./node_modules/core-js/modules/_global.js"),te="__core-js_shared__",H=B[te]||(B[te]={});(K.exports=function(ve,_e){return H[ve]||(H[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:L.version,mode:T("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_an-object.js"),B=T("./node_modules/core-js/modules/_a-function.js"),te=T("./node_modules/core-js/modules/_wks.js")("species");K.exports=function(H,ve){var _e=L(H).constructor,pe;return _e===void 0||(pe=L(_e)[te])==null?ve:B(pe)}},"./node_modules/core-js/modules/_string-at.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_to-integer.js"),B=T("./node_modules/core-js/modules/_defined.js");K.exports=function(te){return function(H,ve){var _e=String(B(H)),pe=L(ve),oe=_e.length,ce,ee;return pe<0||pe>=oe?te?"":void 0:(ce=_e.charCodeAt(pe),ce<55296||ce>56319||pe+1===oe||(ee=_e.charCodeAt(pe+1))<56320||ee>57343?te?_e.charAt(pe):ce:te?_e.slice(pe,pe+2):(ce-55296<<10)+(ee-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_is-regexp.js"),B=T("./node_modules/core-js/modules/_defined.js");K.exports=function(te,H,ve){if(L(H))throw TypeError("String#"+ve+" doesn't accept regex!");return String(B(te))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_to-integer.js"),B=Math.max,te=Math.min;K.exports=function(H,ve){return H=L(H),H<0?B(H+ve,0):te(H,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(K,Z){var T=Math.ceil,L=Math.floor;K.exports=function(B){return isNaN(B=+B)?0:(B>0?L:T)(B)}},"./node_modules/core-js/modules/_to-iobject.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_iobject.js"),B=T("./node_modules/core-js/modules/_defined.js");K.exports=function(te){return L(B(te))}},"./node_modules/core-js/modules/_to-length.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_to-integer.js"),B=Math.min;K.exports=function(te){return te>0?B(L(te),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_defined.js");K.exports=function(B){return Object(L(B))}},"./node_modules/core-js/modules/_to-primitive.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_is-object.js");K.exports=function(B,te){if(!L(B))return B;var H,ve;if(te&&typeof(H=B.toString)=="function"&&!L(ve=H.call(B))||typeof(H=B.valueOf)=="function"&&!L(ve=H.call(B))||!te&&typeof(H=B.toString)=="function"&&!L(ve=H.call(B)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(K,Z){var T=0,L=Math.random();K.exports=function(B){return"Symbol(".concat(B===void 0?"":B,")_",(++T+L).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_global.js"),B=T("./node_modules/core-js/modules/_core.js"),te=T("./node_modules/core-js/modules/_library.js"),H=T("./node_modules/core-js/modules/_wks-ext.js"),ve=T("./node_modules/core-js/modules/_object-dp.js").f;K.exports=function(_e){var pe=B.Symbol||(B.Symbol=te?{}:L.Symbol||{});_e.charAt(0)!="_"&&!(_e in pe)&&ve(pe,_e,{value:H.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(K,Z,T){Z.f=T("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_shared.js")("wks"),B=T("./node_modules/core-js/modules/_uid.js"),te=T("./node_modules/core-js/modules/_global.js").Symbol,H=typeof te=="function",ve=K.exports=function(_e){return L[_e]||(L[_e]=H&&te[_e]||(H?te:B)("Symbol."+_e))};ve.store=L},"./node_modules/core-js/modules/core.get-iterator-method.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_classof.js"),B=T("./node_modules/core-js/modules/_wks.js")("iterator"),te=T("./node_modules/core-js/modules/_iterators.js");K.exports=T("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(H){if(H!=null)return H[B]||H["@@iterator"]||te[L(H)]}},"./node_modules/core-js/modules/es6.array.from.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_ctx.js"),B=T("./node_modules/core-js/modules/_export.js"),te=T("./node_modules/core-js/modules/_to-object.js"),H=T("./node_modules/core-js/modules/_iter-call.js"),ve=T("./node_modules/core-js/modules/_is-array-iter.js"),_e=T("./node_modules/core-js/modules/_to-length.js"),pe=T("./node_modules/core-js/modules/_create-property.js"),oe=T("./node_modules/core-js/modules/core.get-iterator-method.js");B(B.S+B.F*!T("./node_modules/core-js/modules/_iter-detect.js")(function(ce){Array.from(ce)}),"Array",{from:function(ee){var re=te(ee),fe=typeof this=="function"?this:Array,Se=arguments.length,Ce=Se>1?arguments[1]:void 0,Ue=Ce!==void 0,Ae=0,Fe=oe(re),Ze,We,it,ct;if(Ue&&(Ce=L(Ce,Se>2?arguments[2]:void 0,2)),Fe!=null&&!(fe==Array&&ve(Fe)))for(ct=Fe.call(re),We=new fe;!(it=ct.next()).done;Ae++)pe(We,Ae,Ue?H(ct,Ce,[it.value,Ae],!0):it.value);else for(Ze=_e(re.length),We=new fe(Ze);Ze>Ae;Ae++)pe(We,Ae,Ue?Ce(re[Ae],Ae):re[Ae]);return We.length=Ae,We}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_add-to-unscopables.js"),B=T("./node_modules/core-js/modules/_iter-step.js"),te=T("./node_modules/core-js/modules/_iterators.js"),H=T("./node_modules/core-js/modules/_to-iobject.js");K.exports=T("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=H(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,pe=this._i++;return!ve||pe>=ve.length?(this._t=void 0,B(1)):_e=="keys"?B(0,pe):_e=="values"?B(0,ve[pe]):B(0,[pe,ve[pe]])},"values"),te.Arguments=te.Array,L("keys"),L("values"),L("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_export.js");L(L.P,"Function",{bind:T("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_object-dp.js").f,B=Function.prototype,te=/^\s*function ([^ (]*)/,H="name";H in B||T("./node_modules/core-js/modules/_descriptors.js")&&L(B,H,{configurable:!0,get:function(){try{return(""+this).match(te)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_export.js"),B=T("./node_modules/core-js/modules/_global.js").isFinite;L(L.S,"Number",{isFinite:function(H){return typeof H=="number"&&B(H)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_classof.js"),B={};B[T("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",B+""!="[object z]"&&T("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+L(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_regexp-exec.js");T("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:L!==/./.exec},{exec:L})},"./node_modules/core-js/modules/es6.regexp.split.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_is-regexp.js"),B=T("./node_modules/core-js/modules/_an-object.js"),te=T("./node_modules/core-js/modules/_species-constructor.js"),H=T("./node_modules/core-js/modules/_advance-string-index.js"),ve=T("./node_modules/core-js/modules/_to-length.js"),_e=T("./node_modules/core-js/modules/_regexp-exec-abstract.js"),pe=T("./node_modules/core-js/modules/_regexp-exec.js"),oe=T("./node_modules/core-js/modules/_fails.js"),ce=Math.min,ee=[].push,re="split",fe="length",Se="lastIndex",Ce=4294967295,Ue=!oe(function(){});T("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Ae,Fe,Ze,We){var it;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[fe]!=4||"ab"[re](/(?:ab)*/)[fe]!=2||"."[re](/(.?)(.?)/)[fe]!=4||"."[re](/()()/)[fe]>1||""[re](/.?/)[fe]?it=function(ct,vt){var Mt=String(this);if(ct===void 0&&vt===0)return[];if(!L(ct))return Ze.call(Mt,ct,vt);for(var pt=[],xt=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Wt=0,Ht=vt===void 0?Ce:vt>>>0,ln=new RegExp(ct.source,xt+"g"),Qe,_n,un;(Qe=pe.call(ln,Mt))&&(_n=ln[Se],!(_n>Wt&&(pt.push(Mt.slice(Wt,Qe.index)),Qe[fe]>1&&Qe.index<Mt[fe]&&ee.apply(pt,Qe.slice(1)),un=Qe[0][fe],Wt=_n,pt[fe]>=Ht)));)ln[Se]===Qe.index&&ln[Se]++;return Wt===Mt[fe]?(un||!ln.test(""))&&pt.push(""):pt.push(Mt.slice(Wt)),pt[fe]>Ht?pt.slice(0,Ht):pt}:"0"[re](void 0,0)[fe]?it=function(ct,vt){return ct===void 0&&vt===0?[]:Ze.call(this,ct,vt)}:it=Ze,[function(vt,Mt){var pt=Ae(this),xt=vt==null?void 0:vt[Fe];return xt!==void 0?xt.call(vt,pt,Mt):it.call(String(pt),vt,Mt)},function(ct,vt){var Mt=We(it,ct,this,vt,it!==Ze);if(Mt.done)return Mt.value;var pt=B(ct),xt=String(this),Wt=te(pt,RegExp),Ht=pt.unicode,ln=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+(Ue?"y":"g"),Qe=new Wt(Ue?pt:"^(?:"+pt.source+")",ln),_n=vt===void 0?Ce:vt>>>0;if(_n===0)return[];if(xt.length===0)return _e(Qe,xt)===null?[xt]:[];for(var un=0,Vt=0,Ee=[];Vt<xt.length;){Qe.lastIndex=Ue?Vt:0;var N=_e(Qe,Ue?xt:xt.slice(Vt)),D;if(N===null||(D=ce(ve(Qe.lastIndex+(Ue?0:Vt)),xt.length))===un)Vt=H(xt,Vt,Ht);else{if(Ee.push(xt.slice(un,Vt)),Ee.length===_n)return Ee;for(var ge=1;ge<=N.length-1;ge++)if(Ee.push(N[ge]),Ee.length===_n)return Ee;Vt=un=D}}return Ee.push(xt.slice(un)),Ee}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_export.js"),B=T("./node_modules/core-js/modules/_string-context.js"),te="includes";L(L.P+L.F*T("./node_modules/core-js/modules/_fails-is-regexp.js")(te),"String",{includes:function(ve){return!!~B(this,ve,te).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_global.js"),B=T("./node_modules/core-js/modules/_has.js"),te=T("./node_modules/core-js/modules/_descriptors.js"),H=T("./node_modules/core-js/modules/_export.js"),ve=T("./node_modules/core-js/modules/_redefine.js"),_e=T("./node_modules/core-js/modules/_meta.js").KEY,pe=T("./node_modules/core-js/modules/_fails.js"),oe=T("./node_modules/core-js/modules/_shared.js"),ce=T("./node_modules/core-js/modules/_set-to-string-tag.js"),ee=T("./node_modules/core-js/modules/_uid.js"),re=T("./node_modules/core-js/modules/_wks.js"),fe=T("./node_modules/core-js/modules/_wks-ext.js"),Se=T("./node_modules/core-js/modules/_wks-define.js"),Ce=T("./node_modules/core-js/modules/_enum-keys.js"),Ue=T("./node_modules/core-js/modules/_is-array.js"),Ae=T("./node_modules/core-js/modules/_an-object.js"),Fe=T("./node_modules/core-js/modules/_is-object.js"),Ze=T("./node_modules/core-js/modules/_to-object.js"),We=T("./node_modules/core-js/modules/_to-iobject.js"),it=T("./node_modules/core-js/modules/_to-primitive.js"),ct=T("./node_modules/core-js/modules/_property-desc.js"),vt=T("./node_modules/core-js/modules/_object-create.js"),Mt=T("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=T("./node_modules/core-js/modules/_object-gopd.js"),xt=T("./node_modules/core-js/modules/_object-gops.js"),Wt=T("./node_modules/core-js/modules/_object-dp.js"),Ht=T("./node_modules/core-js/modules/_object-keys.js"),ln=pt.f,Qe=Wt.f,_n=Mt.f,un=L.Symbol,Vt=L.JSON,Ee=Vt&&Vt.stringify,N="prototype",D=re("_hidden"),ge=re("toPrimitive"),He={}.propertyIsEnumerable,et=oe("symbol-registry"),ht=oe("symbols"),ue=oe("op-symbols"),k=Object[N],V=typeof un=="function"&&!!xt.f,Te=L.QObject,Ve=!Te||!Te[N]||!Te[N].findChild,rt=te&&pe(function(){return vt(Qe({},"a",{get:function(){return Qe(this,"a",{value:7}).a}})).a!=7})?function(Ie,Me,Be){var qe=ln(k,Me);qe&&delete k[Me],Qe(Ie,Me,Be),qe&&Ie!==k&&Qe(k,Me,qe)}:Qe,Ge=function(Ie){var Me=ht[Ie]=vt(un[N]);return Me._k=Ie,Me},Et=V&&typeof un.iterator=="symbol"?function(Ie){return typeof Ie=="symbol"}:function(Ie){return Ie instanceof un},It=function(Me,Be,qe){return Me===k&&It(ue,Be,qe),Ae(Me),Be=it(Be,!0),Ae(qe),B(ht,Be)?(qe.enumerable?(B(Me,D)&&Me[D][Be]&&(Me[D][Be]=!1),qe=vt(qe,{enumerable:ct(0,!1)})):(B(Me,D)||Qe(Me,D,ct(1,{})),Me[D][Be]=!0),rt(Me,Be,qe)):Qe(Me,Be,qe)},yn=function(Me,Be){Ae(Me);for(var qe=Ce(Be=We(Be)),De=0,st=qe.length,dt;st>De;)It(Me,dt=qe[De++],Be[dt]);return Me},Sn=function(Me,Be){return Be===void 0?vt(Me):yn(vt(Me),Be)},zt=function(Me){var Be=He.call(this,Me=it(Me,!0));return this===k&&B(ht,Me)&&!B(ue,Me)?!1:Be||!B(this,Me)||!B(ht,Me)||B(this,D)&&this[D][Me]?Be:!0},zr=function(Me,Be){if(Me=We(Me),Be=it(Be,!0),!(Me===k&&B(ht,Be)&&!B(ue,Be))){var qe=ln(Me,Be);return qe&&B(ht,Be)&&!(B(Me,D)&&Me[D][Be])&&(qe.enumerable=!0),qe}},ei=function(Me){for(var Be=_n(We(Me)),qe=[],De=0,st;Be.length>De;)!B(ht,st=Be[De++])&&st!=D&&st!=_e&&qe.push(st);return qe},Ii=function(Me){for(var Be=Me===k,qe=_n(Be?ue:We(Me)),De=[],st=0,dt;qe.length>st;)B(ht,dt=qe[st++])&&(!Be||B(k,dt))&&De.push(ht[dt]);return De};V||(un=function(){if(this instanceof un)throw TypeError("Symbol is not a constructor!");var Me=ee(arguments.length>0?arguments[0]:void 0),Be=function(qe){this===k&&Be.call(ue,qe),B(this,D)&&B(this[D],Me)&&(this[D][Me]=!1),rt(this,Me,ct(1,qe))};return te&&Ve&&rt(k,Me,{configurable:!0,set:Be}),Ge(Me)},ve(un[N],"toString",function(){return this._k}),pt.f=zr,Wt.f=It,T("./node_modules/core-js/modules/_object-gopn.js").f=Mt.f=ei,T("./node_modules/core-js/modules/_object-pie.js").f=zt,xt.f=Ii,te&&!T("./node_modules/core-js/modules/_library.js")&&ve(k,"propertyIsEnumerable",zt,!0),fe.f=function(Ie){return Ge(re(Ie))}),H(H.G+H.W+H.F*!V,{Symbol:un});for(var Ur="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ze=0;Ur.length>ze;)re(Ur[ze++]);for(var se=Ht(re.store),ie=0;se.length>ie;)Se(se[ie++]);H(H.S+H.F*!V,"Symbol",{for:function(Ie){return B(et,Ie+="")?et[Ie]:et[Ie]=un(Ie)},keyFor:function(Me){if(!Et(Me))throw TypeError(Me+" is not a symbol!");for(var Be in et)if(et[Be]===Me)return Be},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),H(H.S+H.F*!V,"Object",{create:Sn,defineProperty:It,defineProperties:yn,getOwnPropertyDescriptor:zr,getOwnPropertyNames:ei,getOwnPropertySymbols:Ii});var we=pe(function(){xt.f(1)});H(H.S+H.F*we,"Object",{getOwnPropertySymbols:function(Me){return xt.f(Ze(Me))}}),Vt&&H(H.S+H.F*(!V||pe(function(){var Ie=un();return Ee([Ie])!="[null]"||Ee({a:Ie})!="{}"||Ee(Object(Ie))!="{}"})),"JSON",{stringify:function(Me){for(var Be=[Me],qe=1,De,st;arguments.length>qe;)Be.push(arguments[qe++]);if(st=De=Be[1],!(!Fe(De)&&Me===void 0||Et(Me)))return Ue(De)||(De=function(dt,ot){if(typeof st=="function"&&(ot=st.call(this,dt,ot)),!Et(ot))return ot}),Be[1]=De,Ee.apply(Vt,Be)}}),un[N][ge]||T("./node_modules/core-js/modules/_hide.js")(un[N],ge,un[N].valueOf),ce(un,"Symbol"),ce(Math,"Math",!0),ce(L.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_export.js"),B=T("./node_modules/core-js/modules/_array-includes.js")(!0);L(L.P,"Array",{includes:function(H){return B(this,H,arguments.length>1?arguments[1]:void 0)}}),T("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(K,Z,T){var L=T("./node_modules/core-js/modules/_export.js"),B=T("./node_modules/core-js/modules/_own-keys.js"),te=T("./node_modules/core-js/modules/_to-iobject.js"),H=T("./node_modules/core-js/modules/_object-gopd.js"),ve=T("./node_modules/core-js/modules/_create-property.js");L(L.S,"Object",{getOwnPropertyDescriptors:function(pe){for(var oe=te(pe),ce=H.f,ee=B(oe),re={},fe=0,Se,Ce;ee.length>fe;)Ce=ce(oe,Se=ee[fe++]),Ce!==void 0&&ve(re,Se,Ce);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(K,Z,T){T("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(K,Z,T){for(var L=T("./node_modules/core-js/modules/es6.array.iterator.js"),B=T("./node_modules/core-js/modules/_object-keys.js"),te=T("./node_modules/core-js/modules/_redefine.js"),H=T("./node_modules/core-js/modules/_global.js"),ve=T("./node_modules/core-js/modules/_hide.js"),_e=T("./node_modules/core-js/modules/_iterators.js"),pe=T("./node_modules/core-js/modules/_wks.js"),oe=pe("iterator"),ce=pe("toStringTag"),ee=_e.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},fe=B(re),Se=0;Se<fe.length;Se++){var Ce=fe[Se],Ue=re[Ce],Ae=H[Ce],Fe=Ae&&Ae.prototype,Ze;if(Fe&&(Fe[oe]||ve(Fe,oe,ee),Fe[ce]||ve(Fe,ce,Ce),_e[Ce]=ee,Ue))for(Ze in L)Fe[Ze]||te(Fe,Ze,L[Ze],!0)}},"./node_modules/crypt/crypt.js":function(K,Z){(function(){var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L={rotl:function(B,te){return B<<te|B>>>32-te},rotr:function(B,te){return B<<32-te|B>>>te},endian:function(B){if(B.constructor==Number)return L.rotl(B,8)&16711935|L.rotl(B,24)&4278255360;for(var te=0;te<B.length;te++)B[te]=L.endian(B[te]);return B},randomBytes:function(B){for(var te=[];B>0;B--)te.push(Math.floor(Math.random()*256));return te},bytesToWords:function(B){for(var te=[],H=0,ve=0;H<B.length;H++,ve+=8)te[ve>>>5]|=B[H]<<24-ve%32;return te},wordsToBytes:function(B){for(var te=[],H=0;H<B.length*32;H+=8)te.push(B[H>>>5]>>>24-H%32&255);return te},bytesToHex:function(B){for(var te=[],H=0;H<B.length;H++)te.push((B[H]>>>4).toString(16)),te.push((B[H]&15).toString(16));return te.join("")},hexToBytes:function(B){for(var te=[],H=0;H<B.length;H+=2)te.push(parseInt(B.substr(H,2),16));return te},bytesToBase64:function(B){for(var te=[],H=0;H<B.length;H+=3)for(var ve=B[H]<<16|B[H+1]<<8|B[H+2],_e=0;_e<4;_e++)H*8+_e*6<=B.length*8?te.push(T.charAt(ve>>>6*(3-_e)&63)):te.push("=");return te.join("")},base64ToBytes:function(B){B=B.replace(/[^A-Z0-9+\/]/ig,"");for(var te=[],H=0,ve=0;H<B.length;ve=++H%4)ve!=0&&te.push((T.indexOf(B.charAt(H-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|T.indexOf(B.charAt(H))>>>6-ve*2);return te}};K.exports=L})()},"./node_modules/is-buffer/index.js":function(K,Z){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */K.exports=function(B){return B!=null&&(T(B)||L(B)||!!B._isBuffer)};function T(B){return!!B.constructor&&typeof B.constructor.isBuffer=="function"&&B.constructor.isBuffer(B)}function L(B){return typeof B.readFloatLE=="function"&&typeof B.slice=="function"&&T(B.slice(0,0))}},"./node_modules/md5/md5.js":function(K,Z,T){(function(){var L=T("./node_modules/crypt/crypt.js"),B=T("./node_modules/charenc/charenc.js").utf8,te=T("./node_modules/is-buffer/index.js"),H=T("./node_modules/charenc/charenc.js").bin,ve=function(_e,pe){_e.constructor==String?pe&&pe.encoding==="binary"?_e=H.stringToBytes(_e):_e=B.stringToBytes(_e):te(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=L.bytesToWords(_e),ce=_e.length*8,ee=1732584193,re=-271733879,fe=-1732584194,Se=271733878,Ce=0;Ce<oe.length;Ce++)oe[Ce]=(oe[Ce]<<8|oe[Ce]>>>24)&16711935|(oe[Ce]<<24|oe[Ce]>>>8)&4278255360;oe[ce>>>5]|=128<<ce%32,oe[(ce+64>>>9<<4)+14]=ce;for(var Ue=ve._ff,Ae=ve._gg,Fe=ve._hh,Ze=ve._ii,Ce=0;Ce<oe.length;Ce+=16){var We=ee,it=re,ct=fe,vt=Se;ee=Ue(ee,re,fe,Se,oe[Ce+0],7,-680876936),Se=Ue(Se,ee,re,fe,oe[Ce+1],12,-389564586),fe=Ue(fe,Se,ee,re,oe[Ce+2],17,606105819),re=Ue(re,fe,Se,ee,oe[Ce+3],22,-1044525330),ee=Ue(ee,re,fe,Se,oe[Ce+4],7,-176418897),Se=Ue(Se,ee,re,fe,oe[Ce+5],12,1200080426),fe=Ue(fe,Se,ee,re,oe[Ce+6],17,-1473231341),re=Ue(re,fe,Se,ee,oe[Ce+7],22,-45705983),ee=Ue(ee,re,fe,Se,oe[Ce+8],7,1770035416),Se=Ue(Se,ee,re,fe,oe[Ce+9],12,-1958414417),fe=Ue(fe,Se,ee,re,oe[Ce+10],17,-42063),re=Ue(re,fe,Se,ee,oe[Ce+11],22,-1990404162),ee=Ue(ee,re,fe,Se,oe[Ce+12],7,1804603682),Se=Ue(Se,ee,re,fe,oe[Ce+13],12,-40341101),fe=Ue(fe,Se,ee,re,oe[Ce+14],17,-1502002290),re=Ue(re,fe,Se,ee,oe[Ce+15],22,1236535329),ee=Ae(ee,re,fe,Se,oe[Ce+1],5,-165796510),Se=Ae(Se,ee,re,fe,oe[Ce+6],9,-1069501632),fe=Ae(fe,Se,ee,re,oe[Ce+11],14,643717713),re=Ae(re,fe,Se,ee,oe[Ce+0],20,-373897302),ee=Ae(ee,re,fe,Se,oe[Ce+5],5,-701558691),Se=Ae(Se,ee,re,fe,oe[Ce+10],9,38016083),fe=Ae(fe,Se,ee,re,oe[Ce+15],14,-660478335),re=Ae(re,fe,Se,ee,oe[Ce+4],20,-405537848),ee=Ae(ee,re,fe,Se,oe[Ce+9],5,568446438),Se=Ae(Se,ee,re,fe,oe[Ce+14],9,-1019803690),fe=Ae(fe,Se,ee,re,oe[Ce+3],14,-187363961),re=Ae(re,fe,Se,ee,oe[Ce+8],20,1163531501),ee=Ae(ee,re,fe,Se,oe[Ce+13],5,-1444681467),Se=Ae(Se,ee,re,fe,oe[Ce+2],9,-51403784),fe=Ae(fe,Se,ee,re,oe[Ce+7],14,1735328473),re=Ae(re,fe,Se,ee,oe[Ce+12],20,-1926607734),ee=Fe(ee,re,fe,Se,oe[Ce+5],4,-378558),Se=Fe(Se,ee,re,fe,oe[Ce+8],11,-2022574463),fe=Fe(fe,Se,ee,re,oe[Ce+11],16,1839030562),re=Fe(re,fe,Se,ee,oe[Ce+14],23,-35309556),ee=Fe(ee,re,fe,Se,oe[Ce+1],4,-1530992060),Se=Fe(Se,ee,re,fe,oe[Ce+4],11,1272893353),fe=Fe(fe,Se,ee,re,oe[Ce+7],16,-155497632),re=Fe(re,fe,Se,ee,oe[Ce+10],23,-1094730640),ee=Fe(ee,re,fe,Se,oe[Ce+13],4,681279174),Se=Fe(Se,ee,re,fe,oe[Ce+0],11,-358537222),fe=Fe(fe,Se,ee,re,oe[Ce+3],16,-722521979),re=Fe(re,fe,Se,ee,oe[Ce+6],23,76029189),ee=Fe(ee,re,fe,Se,oe[Ce+9],4,-640364487),Se=Fe(Se,ee,re,fe,oe[Ce+12],11,-421815835),fe=Fe(fe,Se,ee,re,oe[Ce+15],16,530742520),re=Fe(re,fe,Se,ee,oe[Ce+2],23,-995338651),ee=Ze(ee,re,fe,Se,oe[Ce+0],6,-198630844),Se=Ze(Se,ee,re,fe,oe[Ce+7],10,1126891415),fe=Ze(fe,Se,ee,re,oe[Ce+14],15,-1416354905),re=Ze(re,fe,Se,ee,oe[Ce+5],21,-57434055),ee=Ze(ee,re,fe,Se,oe[Ce+12],6,1700485571),Se=Ze(Se,ee,re,fe,oe[Ce+3],10,-1894986606),fe=Ze(fe,Se,ee,re,oe[Ce+10],15,-1051523),re=Ze(re,fe,Se,ee,oe[Ce+1],21,-2054922799),ee=Ze(ee,re,fe,Se,oe[Ce+8],6,1873313359),Se=Ze(Se,ee,re,fe,oe[Ce+15],10,-30611744),fe=Ze(fe,Se,ee,re,oe[Ce+6],15,-1560198380),re=Ze(re,fe,Se,ee,oe[Ce+13],21,1309151649),ee=Ze(ee,re,fe,Se,oe[Ce+4],6,-145523070),Se=Ze(Se,ee,re,fe,oe[Ce+11],10,-1120210379),fe=Ze(fe,Se,ee,re,oe[Ce+2],15,718787259),re=Ze(re,fe,Se,ee,oe[Ce+9],21,-343485551),ee=ee+We>>>0,re=re+it>>>0,fe=fe+ct>>>0,Se=Se+vt>>>0}return L.endian([ee,re,fe,Se])};ve._ff=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(pe&oe|~pe&ce)+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._gg=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(pe&ce|oe&~ce)+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._hh=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(pe^oe^ce)+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._ii=function(_e,pe,oe,ce,ee,re,fe){var Se=_e+(oe^(pe|~ce))+(ee>>>0)+fe;return(Se<<re|Se>>>32-re)+pe},ve._blocksize=16,ve._digestsize=16,K.exports=function(_e,pe){if(_e==null)throw new Error("Illegal argument "+_e);var oe=L.wordsToBytes(ve(_e,pe));return pe&&pe.asBytes?oe:pe&&pe.asString?H.bytesToString(oe):L.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(K,Z,T){var L=function(B){var te=Object.prototype,H=te.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},pe=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",ce=_e.toStringTag||"@@toStringTag";function ee(N,D,ge){return Object.defineProperty(N,D,{value:ge,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{ee({},"")}catch{ee=function(D,ge,He){return D[ge]=He}}function re(N,D,ge,He){var et=D&&D.prototype instanceof Ze?D:Ze,ht=Object.create(et.prototype),ue=new un(He||[]);return ht._invoke=Ht(N,ge,ue),ht}B.wrap=re;function fe(N,D,ge){try{return{type:"normal",arg:N.call(D,ge)}}catch(He){return{type:"throw",arg:He}}}var Se="suspendedStart",Ce="suspendedYield",Ue="executing",Ae="completed",Fe={};function Ze(){}function We(){}function it(){}var ct={};ct[pe]=function(){return this};var vt=Object.getPrototypeOf,Mt=vt&&vt(vt(Vt([])));Mt&&Mt!==te&&H.call(Mt,pe)&&(ct=Mt);var pt=it.prototype=Ze.prototype=Object.create(ct);We.prototype=pt.constructor=it,it.constructor=We,We.displayName=ee(it,ce,"GeneratorFunction");function xt(N){["next","throw","return"].forEach(function(D){ee(N,D,function(ge){return this._invoke(D,ge)})})}B.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===We||(D.displayName||D.name)==="GeneratorFunction":!1},B.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,it):(N.__proto__=it,ee(N,ce,"GeneratorFunction")),N.prototype=Object.create(pt),N},B.awrap=function(N){return{__await:N}};function Wt(N,D){function ge(ht,ue,k,V){var Te=fe(N[ht],N,ue);if(Te.type==="throw")V(Te.arg);else{var Ve=Te.arg,rt=Ve.value;return rt&&typeof rt=="object"&&H.call(rt,"__await")?D.resolve(rt.__await).then(function(Ge){ge("next",Ge,k,V)},function(Ge){ge("throw",Ge,k,V)}):D.resolve(rt).then(function(Ge){Ve.value=Ge,k(Ve)},function(Ge){return ge("throw",Ge,k,V)})}}var He;function et(ht,ue){function k(){return new D(function(V,Te){ge(ht,ue,V,Te)})}return He=He?He.then(k,k):k()}this._invoke=et}xt(Wt.prototype),Wt.prototype[oe]=function(){return this},B.AsyncIterator=Wt,B.async=function(N,D,ge,He,et){et===void 0&&(et=Promise);var ht=new Wt(re(N,D,ge,He),et);return B.isGeneratorFunction(D)?ht:ht.next().then(function(ue){return ue.done?ue.value:ht.next()})};function Ht(N,D,ge){var He=Se;return function(ht,ue){if(He===Ue)throw new Error("Generator is already running");if(He===Ae){if(ht==="throw")throw ue;return Ee()}for(ge.method=ht,ge.arg=ue;;){var k=ge.delegate;if(k){var V=ln(k,ge);if(V){if(V===Fe)continue;return V}}if(ge.method==="next")ge.sent=ge._sent=ge.arg;else if(ge.method==="throw"){if(He===Se)throw He=Ae,ge.arg;ge.dispatchException(ge.arg)}else ge.method==="return"&&ge.abrupt("return",ge.arg);He=Ue;var Te=fe(N,D,ge);if(Te.type==="normal"){if(He=ge.done?Ae:Ce,Te.arg===Fe)continue;return{value:Te.arg,done:ge.done}}else Te.type==="throw"&&(He=Ae,ge.method="throw",ge.arg=Te.arg)}}}function ln(N,D){var ge=N.iterator[D.method];if(ge===ve){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=ve,ln(N,D),D.method==="throw"))return Fe;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return Fe}var He=fe(ge,N.iterator,D.arg);if(He.type==="throw")return D.method="throw",D.arg=He.arg,D.delegate=null,Fe;var et=He.arg;if(!et)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,Fe;if(et.done)D[N.resultName]=et.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=ve);else return et;return D.delegate=null,Fe}xt(pt),ee(pt,ce,"Generator"),pt[pe]=function(){return this},pt.toString=function(){return"[object Generator]"};function Qe(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function _n(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function un(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(Qe,this),this.reset(!0)}B.keys=function(N){var D=[];for(var ge in N)D.push(ge);return D.reverse(),function He(){for(;D.length;){var et=D.pop();if(et in N)return He.value=et,He.done=!1,He}return He.done=!0,He}};function Vt(N){if(N){var D=N[pe];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var ge=-1,He=function et(){for(;++ge<N.length;)if(H.call(N,ge))return et.value=N[ge],et.done=!1,et;return et.value=ve,et.done=!0,et};return He.next=He}}return{next:Ee}}B.values=Vt;function Ee(){return{value:ve,done:!0}}return un.prototype={constructor:un,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(_n),!N)for(var D in this)D.charAt(0)==="t"&&H.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function ge(V,Te){return ht.type="throw",ht.arg=N,D.next=V,Te&&(D.method="next",D.arg=ve),!!Te}for(var He=this.tryEntries.length-1;He>=0;--He){var et=this.tryEntries[He],ht=et.completion;if(et.tryLoc==="root")return ge("end");if(et.tryLoc<=this.prev){var ue=H.call(et,"catchLoc"),k=H.call(et,"finallyLoc");if(ue&&k){if(this.prev<et.catchLoc)return ge(et.catchLoc,!0);if(this.prev<et.finallyLoc)return ge(et.finallyLoc)}else if(ue){if(this.prev<et.catchLoc)return ge(et.catchLoc,!0)}else if(k){if(this.prev<et.finallyLoc)return ge(et.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var He=this.tryEntries[ge];if(He.tryLoc<=this.prev&&H.call(He,"finallyLoc")&&this.prev<He.finallyLoc){var et=He;break}}et&&(N==="break"||N==="continue")&&et.tryLoc<=D&&D<=et.finallyLoc&&(et=null);var ht=et?et.completion:{};return ht.type=N,ht.arg=D,et?(this.method="next",this.next=et.finallyLoc,Fe):this.complete(ht)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),Fe},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var ge=this.tryEntries[D];if(ge.finallyLoc===N)return this.complete(ge.completion,ge.afterLoc),_n(ge),Fe}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var ge=this.tryEntries[D];if(ge.tryLoc===N){var He=ge.completion;if(He.type==="throw"){var et=He.arg;_n(ge)}return et}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,ge){return this.delegate={iterator:Vt(N),resultName:D,nextLoc:ge},this.method==="next"&&(this.arg=ve),Fe}},B}(K.exports);try{regeneratorRuntime=L}catch{Function("r","regeneratorRuntime = r")(L)}},"./src/api.js":function(K,Z,T){T.r(Z),T.d(Z,"setup",function(){return Ue}),T.d(Z,"setupCache",function(){return Ce}),T("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js");var L=T("axios"),B=T.n(L),te=T("./src/request.js"),H=T("./src/cache.js");T.d(Z,"serializeQuery",function(){return H.serializeQuery});var ve=T("./src/config.js"),_e=T("./src/utilities.js");function pe(Ae,Fe){if(Ae==null)return{};var Ze=oe(Ae,Fe),We,it;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ae);for(it=0;it<ct.length;it++)We=ct[it],!(Fe.indexOf(We)>=0)&&Object.prototype.propertyIsEnumerable.call(Ae,We)&&(Ze[We]=Ae[We])}return Ze}function oe(Ae,Fe){if(Ae==null)return{};var Ze={},We=Object.keys(Ae),it,ct;for(ct=0;ct<We.length;ct++)it=We[ct],!(Fe.indexOf(it)>=0)&&(Ze[it]=Ae[it]);return Ze}function ce(Ae,Fe){var Ze=Object.keys(Ae);if(Object.getOwnPropertySymbols){var We=Object.getOwnPropertySymbols(Ae);Fe&&(We=We.filter(function(it){return Object.getOwnPropertyDescriptor(Ae,it).enumerable})),Ze.push.apply(Ze,We)}return Ze}function ee(Ae){for(var Fe=1;Fe<arguments.length;Fe++){var Ze=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?ce(Object(Ze),!0).forEach(function(We){re(Ae,We,Ze[We])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(Ze)):ce(Object(Ze)).forEach(function(We){Object.defineProperty(Ae,We,Object.getOwnPropertyDescriptor(Ze,We))})}return Ae}function re(Ae,Fe,Ze){return Fe in Ae?Object.defineProperty(Ae,Fe,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Ae[Fe]=Ze,Ae}function fe(Ae,Fe,Ze,We,it,ct,vt){try{var Mt=Ae[ct](vt),pt=Mt.value}catch(xt){Ze(xt);return}Mt.done?Fe(pt):Promise.resolve(pt).then(We,it)}function Se(Ae){return function(){var Fe=this,Ze=arguments;return new Promise(function(We,it){var ct=Ae.apply(Fe,Ze);function vt(pt){fe(ct,We,it,vt,Mt,"next",pt)}function Mt(pt){fe(ct,We,it,vt,Mt,"throw",pt)}vt(void 0)})}}function Ce(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae=Object(ve.makeConfig)(Ae);function Fe(We){return Ze.apply(this,arguments)}function Ze(){return Ze=Se(regeneratorRuntime.mark(function We(it){var ct,vt,Mt,pt,xt;return regeneratorRuntime.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return ct=Object(ve.mergeRequestConfig)(Ae,it),Ht.next=3,Object(te.default)(ct,it);case 3:if(vt=Ht.sent,Mt=vt.next,Object(_e.isFunction)(Mt)){Ht.next=7;break}return Ht.abrupt("return",Mt);case 7:return Ht.prev=7,Ht.next=10,ct.adapter(it);case 10:vt=Ht.sent,Ht.next=16;break;case 13:Ht.prev=13,Ht.t0=Ht.catch(7),pt=Ht.t0;case 16:if(!pt){Ht.next=31;break}if(xt=Object(_e.isFunction)(ct.readOnError)?ct.readOnError(pt,it):ct.readOnError,!xt){Ht.next=30;break}return Ht.prev=19,ct.acceptStale=!0,Ht.next=23,Object(te.default)(ct,it);case 23:return vt=Ht.sent,vt.next.request.stale=!0,Ht.abrupt("return",vt.next);case 28:Ht.prev=28,Ht.t1=Ht.catch(19);case 30:throw pt;case 31:return Ht.abrupt("return",Mt(vt));case 32:case"end":return Ht.stop()}},We,null,[[7,13],[19,28]])})),Ze.apply(this,arguments)}return{adapter:Fe,config:Ae,store:Ae.store}}function Ue(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fe=ee(ee(ee({},ve.defaults.axios),Ae),{},{cache:ee(ee({},ve.defaults.axios.cache),Ae.cache)}),Ze=Ce(Fe.cache);Fe.cache;var We=pe(Fe,["cache"]),it=B.a.create(ee(ee({},We),{},{adapter:Ze.adapter}));return it.cache=Ze.store,it}Z.default={setup:Ue,setupCache:Ce,serializeQuery:H.serializeQuery}},"./src/cache.js":function(K,Z,T){T.r(Z),T.d(Z,"read",function(){return ce}),T.d(Z,"write",function(){return pe}),T.d(Z,"key",function(){return re}),T.d(Z,"invalidate",function(){return Ce}),T.d(Z,"serializeQuery",function(){return Ue}),T("./node_modules/core-js/modules/es7.array.includes.js"),T("./node_modules/core-js/modules/es6.string.includes.js"),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var L=T("./src/utilities.js"),B=T("./node_modules/md5/md5.js"),te=T.n(B),H=T("./src/serialize.js");function ve(Ae,Fe,Ze,We,it,ct,vt){try{var Mt=Ae[ct](vt),pt=Mt.value}catch(xt){Ze(xt);return}Mt.done?Fe(pt):Promise.resolve(pt).then(We,it)}function _e(Ae){return function(){var Fe=this,Ze=arguments;return new Promise(function(We,it){var ct=Ae.apply(Fe,Ze);function vt(pt){ve(ct,We,it,vt,Mt,"next",pt)}function Mt(pt){ve(ct,We,it,vt,Mt,"throw",pt)}vt(void 0)})}}function pe(Ae,Fe,Ze){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function Ae(Fe,Ze,We){var it;return regeneratorRuntime.wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.prev=0,it={expires:Fe.expires,data:Object(H.default)(Fe,Ze,We)},vt.next=4,Fe.store.setItem(Fe.uuid,it);case 4:vt.next=19;break;case 6:if(vt.prev=6,vt.t0=vt.catch(0),Fe.debug("Could not store response",vt.t0),!Fe.clearOnError){vt.next=18;break}return vt.prev=10,vt.next=13,Fe.store.clear();case 13:vt.next=18;break;case 15:vt.prev=15,vt.t1=vt.catch(10),Fe.debug("Could not clear store",vt.t1);case 18:return vt.abrupt("return",!1);case 19:return vt.abrupt("return",!0);case 20:case"end":return vt.stop()}},Ae,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ce(Ae,Fe){return ee.apply(this,arguments)}function ee(){return ee=_e(regeneratorRuntime.mark(function Ae(Fe,Ze){var We,it,ct,vt,Mt,pt,xt,Wt;return regeneratorRuntime.wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:return We=Fe.uuid,it=Fe.ignoreCache,ln.next=3,Fe.store.getItem(We);case 3:if(ct=ln.sent,!(it||!ct||!ct.data)){ln.next=10;break}throw Fe.debug("cache-miss",Ze.url),vt=new Error,vt.reason="cache-miss",vt.message="Entry not found from cache",vt;case 10:if(Mt=ct.expires,pt=ct.data,xt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!xt&&!Fe.acceptStale&&Mt!==0&&Mt<Date.now())){ln.next=18;break}throw Fe.debug("cache-stale",Ze.url),Wt=new Error,Wt.reason="cache-stale",Wt.message="Entry is stale",Wt;case 18:return Fe.debug(Fe.acceptStale?"cache-hit-stale":"cache-hit",Ze.url),ln.abrupt("return",pt);case 20:case"end":return ln.stop()}},Ae)})),ee.apply(this,arguments)}function re(Ae){if(Object(L.isFunction)(Ae.key))return Ae.key;var Fe;return Object(L.isString)(Ae.key)?Fe=function(We){var it="".concat(We.baseURL?We.baseURL:"").concat(We.url),ct="".concat(Ae.key,"/").concat(it).concat(Ue(We));return We.data?ct+te()(We.data):ct}:Fe=function(We){var it="".concat(We.baseURL?We.baseURL:"").concat(We.url),ct=it+Ue(We);return We.data?ct+te()(We.data):ct},Fe}function fe(Ae,Fe){return Se.apply(this,arguments)}function Se(){return Se=_e(regeneratorRuntime.mark(function Ae(Fe,Ze){var We;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(We=Ze.method.toLowerCase(),!Fe.exclude.methods.includes(We)){ct.next=4;break}return ct.next=4,Fe.store.removeItem(Fe.uuid);case 4:case"end":return ct.stop()}},Ae)})),Se.apply(this,arguments)}function Ce(){var Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(L.isFunction)(Ae.invalidate)?Ae.invalidate:fe}function Ue(Ae){if(!Ae.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Ae.params);var Fe=Ae.params,Ze=Ae.params instanceof URLSearchParams;return Ze||(Fe=new URLSearchParams,Object.keys(Ae.params).forEach(function(We){return Fe.append(We,Ae.params[We])})),"?".concat(Fe.toString())}Z.default={read:ce,write:pe,key:re,invalidate:Ce,serializeQuery:Ue}},"./src/config.js":function(K,Z,T){T.r(Z),T.d(Z,"defaults",function(){return ee}),T.d(Z,"makeConfig",function(){return fe}),T.d(Z,"mergeRequestConfig",function(){return Se}),T("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var L=T("axios"),B=T.n(L),te=T("./src/memory.js"),H=T("./src/cache.js");function ve(Ce,Ue){var Ae=Object.keys(Ce);if(Object.getOwnPropertySymbols){var Fe=Object.getOwnPropertySymbols(Ce);Ue&&(Fe=Fe.filter(function(Ze){return Object.getOwnPropertyDescriptor(Ce,Ze).enumerable})),Ae.push.apply(Ae,Fe)}return Ae}function _e(Ce){for(var Ue=1;Ue<arguments.length;Ue++){var Ae=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ve(Object(Ae),!0).forEach(function(Fe){pe(Ce,Fe,Ae[Fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ce,Object.getOwnPropertyDescriptors(Ae)):ve(Object(Ae)).forEach(function(Fe){Object.defineProperty(Ce,Fe,Object.getOwnPropertyDescriptor(Ae,Fe))})}return Ce}function pe(Ce,Ue,Ae){return Ue in Ce?Object.defineProperty(Ce,Ue,{value:Ae,enumerable:!0,configurable:!0,writable:!0}):Ce[Ue]=Ae,Ce}var oe=function(){},ce=function(){for(var Ue,Ae=arguments.length,Fe=new Array(Ae),Ze=0;Ze<Ae;Ze++)Fe[Ze]=arguments[Ze];return(Ue=console).log.apply(Ue,["[axios-cache-adapter]"].concat(Fe))},ee={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:B.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],fe=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ae=_e(_e(_e({},ee.cache),Ue),{},{exclude:_e(_e({},ee.cache.exclude),Ue.exclude)});return Ae.key=Object(H.key)(Ae),Ae.invalidate=Object(H.invalidate)(Ae),Ae.debug!==!1?Ae.debug=typeof Ae.debug=="function"?Ae.debug:ce:Ae.debug=oe,Ae.store||(Ae.store=new te.default),Ae.debug("Global cache config",Ae),Ae},Se=function(Ue,Ae){var Fe=Ae.cache||{};Fe&&re.forEach(function(We){return Fe[We]?delete Fe[We]:void 0});var Ze=_e(_e(_e({},Ue),Fe),{},{exclude:_e(_e({},Ue.exclude),Fe.exclude)});return Ze.debug===!0&&(Ze.debug=ce),Fe.key&&(Ze.key=Object(H.key)(Fe)),Ze.uuid=Ze.key(Ae),Ue.debug("Request config for ".concat(Ae.url),Ze),Ze};Z.default={defaults:ee,makeConfig:fe,mergeRequestConfig:Se}},"./src/exclude.js":function(K,Z,T){T.r(Z),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/core-js/modules/es7.array.includes.js"),T("./node_modules/core-js/modules/es6.string.includes.js");var L=T("./src/utilities.js");function B(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1?arguments[1]:void 0,ve=te.exclude,_e=ve===void 0?{}:ve,pe=te.debug,oe=H.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return pe("Excluding request by HTTP method ".concat(H.url)),!0;if(typeof _e.filter=="function"&&_e.filter(H))return pe("Excluding request by filter ".concat(H.url)),!0;var ce=/\?.*$/.test(H.url)||Object(L.isObject)(H.params)&&Object.keys(H.params).length!==0||typeof URLSearchParams<"u"&&H.params instanceof URLSearchParams;if(_e.query&&ce)return pe("Excluding request by query ".concat(H.url)),!0;var ee=_e.paths||[],re=ee.some(function(fe){return H.url.match(fe)});return re?(pe("Excluding request by url match ".concat(H.url)),!0):!1}Z.default=B},"./src/index.node.js":function(K,Z,T){T.r(Z);var L=T("./src/api.js");T.d(Z,"setup",function(){return L.setup}),T.d(Z,"setupCache",function(){return L.setupCache}),T.d(Z,"serializeQuery",function(){return L.serializeQuery});var B=T("./src/redis.js");T.d(Z,"RedisStore",function(){return B.default});var te=T("./src/redis-default.js");T.d(Z,"RedisDefaultStore",function(){return te.default}),Z.default={setup:L.setup,setupCache:L.setupCache,serializeQuery:L.serializeQuery,RedisStore:B.default,RedisDefaultStore:te.default}},"./src/limit.js":function(K,Z,T){T.r(Z),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");function L(ve,_e,pe,oe,ce,ee,re){try{var fe=ve[ee](re),Se=fe.value}catch(Ce){pe(Ce);return}fe.done?_e(Se):Promise.resolve(Se).then(oe,ce)}function B(ve){return function(){var _e=this,pe=arguments;return new Promise(function(oe,ce){var ee=ve.apply(_e,pe);function re(Se){L(ee,oe,ce,re,fe,"next",Se)}function fe(Se){L(ee,oe,ce,re,fe,"throw",Se)}re(void 0)})}}function te(ve){return H.apply(this,arguments)}function H(){return H=B(regeneratorRuntime.mark(function ve(_e){var pe,oe;return regeneratorRuntime.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,_e.store.length();case 2:if(pe=ee.sent,!(pe<_e.limit)){ee.next=5;break}return ee.abrupt("return");case 5:return _e.debug("Current store size: ".concat(pe)),ee.next=8,_e.store.iterate(function(re,fe){oe||(oe={value:re,key:fe}),re.expires<oe.value.expires&&(oe={value:re,key:fe})});case 8:if(!oe){ee.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),ee.next=12,_e.store.removeItem(oe.key);case 12:case"end":return ee.stop()}},ve)})),H.apply(this,arguments)}Z.default=te},"./src/memory.js":function(K,Z,T){T.r(Z),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js");var L=T("./src/utilities.js");function B(oe,ce,ee,re,fe,Se,Ce){try{var Ue=oe[Se](Ce),Ae=Ue.value}catch(Fe){ee(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function te(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ce(Ae){B(Se,re,fe,Ce,Ue,"next",Ae)}function Ue(Ae){B(Se,re,fe,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function H(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var ee=0;ee<ce.length;ee++){var re=ce[ee];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function _e(oe,ce,ee){return ce&&ve(oe.prototype,ce),oe}var pe=function(){function oe(){H(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Se=this.store[fe]||null,Ue.abrupt("return",JSON.parse(Se));case 2:case"end":return Ue.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"setItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe,Se){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return this.store[fe]=JSON.stringify(Se),Ue.abrupt("return",Se);case 2:case"end":return Ue.stop()}},re,this)}));function ee(re,fe){return ce.apply(this,arguments)}return ee}()},{key:"removeItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:delete this.store[fe];case 1:case"end":return Ce.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"clear",value:function(){var ce=te(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:this.store={};case 1:case"end":return Se.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"length",value:function(){var ce=te(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Se.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"iterate",value:function(ee){return Promise.all(Object(L.mapObject)(this.store,ee))}}]),oe}();Z.default=pe},"./src/redis-default.js":function(K,Z,T){T.r(Z),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.function.bind.js"),T("./node_modules/core-js/modules/es6.function.name.js");var L=T("util");function B(oe,ce,ee,re,fe,Se,Ce){try{var Ue=oe[Se](Ce),Ae=Ue.value}catch(Fe){ee(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function te(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ce(Ae){B(Se,re,fe,Ce,Ue,"next",Ae)}function Ue(Ae){B(Se,re,fe,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function H(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var ee=0;ee<ce.length;ee++){var re=ce[ee];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(oe,re.key,re)}}function _e(oe,ce,ee){return ce&&ve(oe.prototype,ce),oe}var pe=function(){function oe(ce){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};H(this,oe);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ce.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=ce,this.prefix=ee.prefix||"axios-cache",this.maxScanCount=ee.maxScanCount||1e3,this.getAsync=Object(L.promisify)(ce.get).bind(ce),this.psetexAsync=Object(L.promisify)(ce.psetex).bind(ce),this.delAsync=Object(L.promisify)(ce.del).bind(ce),this.scanAsync=Object(L.promisify)(ce.scan).bind(ce)}return _e(oe,[{key:"calculateTTL",value:function(ee){var re=Date.now();return ee.expires&&ee.expires>re?ee.expires-re:-1}},{key:"transformKey",value:function(ee){return this.prefix+"_"+ee}},{key:"getItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.getAsync(this.transformKey(fe));case 2:if(Ue.t0=Ue.sent,Ue.t0){Ue.next=5;break}Ue.t0=null;case 5:return Se=Ue.t0,Ue.abrupt("return",JSON.parse(Se));case 7:case"end":return Ue.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"setItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe,Se){var Ce,Ue;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(Ce=this.transformKey(fe),Ue=this.calculateTTL(Se),!(Ue>0)){Fe.next=5;break}return Fe.next=5,this.psetexAsync(Ce,Ue,JSON.stringify(Se));case 5:return Fe.abrupt("return",Se);case 6:case"end":return Fe.stop()}},re,this)}));function ee(re,fe){return ce.apply(this,arguments)}return ee}()},{key:"removeItem",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.delAsync(this.transformKey(fe));case 2:case"end":return Ce.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"scan",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se,Ce;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:Se="0";case 1:return Ae.next=3,this.scanAsync(Se,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Ce=Ae.sent,Se=Ce[0],Ae.next=7,fe(Ce[1]);case 7:if(Se!=="0"){Ae.next=1;break}case 8:case"end":return Ae.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()},{key:"clear",value:function(){var ce=te(regeneratorRuntime.mark(function re(){var fe=this;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.scan(function(Ue){return fe.delAsync(Ue)});case 2:case"end":return Ce.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"length",value:function(){var ce=te(regeneratorRuntime.mark(function re(){var fe;return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return fe=0,Ce.next=3,this.scan(function(Ue){fe+=Ue.length});case 3:return Ce.abrupt("return",fe);case 4:case"end":return Ce.stop()}},re,this)}));function ee(){return ce.apply(this,arguments)}return ee}()},{key:"iterate",value:function(){var ce=te(regeneratorRuntime.mark(function re(fe){var Se=this,Ce,Ue;return regeneratorRuntime.wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Ue=function(){return Ue=te(regeneratorRuntime.mark(function We(it){var ct,vt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(it);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ct=pt.t0,vt=JSON.parse(ct),pt.next=9,fe(vt,it);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},We,this)})),Ue.apply(this,arguments)},Ce=function(We){return Ue.apply(this,arguments)},Fe.next=4,this.scan(function(Ze){return Promise.all(Ze.map(Ce.bind(Se)))});case 4:return Fe.abrupt("return",Promise.resolve([]));case 5:case"end":return Fe.stop()}},re,this)}));function ee(re){return ce.apply(this,arguments)}return ee}()}]),oe}();Z.default=pe},"./src/redis.js":function(K,Z,T){T.r(Z),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js"),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.function.bind.js"),T("./node_modules/core-js/modules/es6.function.name.js");var L=T("util"),B=T("./src/utilities.js");function te(ce,ee,re,fe,Se,Ce,Ue){try{var Ae=ce[Ce](Ue),Fe=Ae.value}catch(Ze){re(Ze);return}Ae.done?ee(Fe):Promise.resolve(Fe).then(fe,Se)}function H(ce){return function(){var ee=this,re=arguments;return new Promise(function(fe,Se){var Ce=ce.apply(ee,re);function Ue(Fe){te(Ce,fe,Se,Ue,Ae,"next",Fe)}function Ae(Fe){te(Ce,fe,Se,Ue,Ae,"throw",Fe)}Ue(void 0)})}}function ve(ce,ee){if(!(ce instanceof ee))throw new TypeError("Cannot call a class as a function")}function _e(ce,ee){for(var re=0;re<ee.length;re++){var fe=ee[re];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(ce,fe.key,fe)}}function pe(ce,ee,re){return ee&&_e(ce.prototype,ee),ce}var oe=function(){function ce(ee){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ce);var fe=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ee.constructor.name!=="RedisClient")throw fe}catch{throw fe}this.client=ee,this.HASH_KEY=re,this.hgetAsync=Object(L.promisify)(ee.hget).bind(ee),this.hsetAsync=Object(L.promisify)(ee.hset).bind(ee),this.hdelAsync=Object(L.promisify)(ee.hdel).bind(ee),this.delAsync=Object(L.promisify)(ee.del).bind(ee),this.hlenAsync=Object(L.promisify)(ee.hlen).bind(ee),this.hgetallAsync=Object(L.promisify)(ee.hgetall).bind(ee)}return pe(ce,[{key:"getItem",value:function(){var ee=H(regeneratorRuntime.mark(function fe(Se){var Ce;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetAsync(this.HASH_KEY,Se);case 2:if(Ae.t0=Ae.sent,Ae.t0){Ae.next=5;break}Ae.t0=null;case 5:return Ce=Ae.t0,Ae.abrupt("return",JSON.parse(Ce));case 7:case"end":return Ae.stop()}},fe,this)}));function re(fe){return ee.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ee=H(regeneratorRuntime.mark(function fe(Se,Ce){return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hsetAsync(this.HASH_KEY,Se,JSON.stringify(Ce));case 2:return Ae.abrupt("return",Ce);case 3:case"end":return Ae.stop()}},fe,this)}));function re(fe,Se){return ee.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ee=H(regeneratorRuntime.mark(function fe(Se){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.hdelAsync(this.HASH_KEY,Se);case 2:case"end":return Ue.stop()}},fe,this)}));function re(fe){return ee.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ee=H(regeneratorRuntime.mark(function fe(){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Ce.stop()}},fe,this)}));function re(){return ee.apply(this,arguments)}return re}()},{key:"length",value:function(){var ee=H(regeneratorRuntime.mark(function fe(){return regeneratorRuntime.wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Ce.stop()}},fe,this)}));function re(){return ee.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var ee=H(regeneratorRuntime.mark(function fe(Se){var Ce;return regeneratorRuntime.wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Ce=Ae.sent,Ae.abrupt("return",Promise.all(Object(B.mapObject)(Ce,Se)));case 4:case"end":return Ae.stop()}},fe,this)}));function re(fe){return ee.apply(this,arguments)}return re}()}]),ce}();Z.default=oe},"./src/request.js":function(K,Z,T){T.r(Z),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var L=T("./src/response.js"),B=T("./src/exclude.js"),te=T("./src/cache.js");function H(oe,ce,ee,re,fe,Se,Ce){try{var Ue=oe[Se](Ce),Ae=Ue.value}catch(Fe){ee(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function ve(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ce(Ae){H(Se,re,fe,Ce,Ue,"next",Ae)}function Ue(Ae){H(Se,re,fe,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function _e(oe,ce){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,ee){var re,fe,Se;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Se=function(){return ce.excludeFromCache=!0,{config:ce,next:re}},ce.debug("uuid",ce.uuid),re=function(){for(var Fe=arguments.length,Ze=new Array(Fe),We=0;We<Fe;We++)Ze[We]=arguments[We];return L.default.apply(void 0,[ce,ee].concat(Ze))},Ue.next=5,ce.invalidate(ce,ee);case 5:if(!Object(B.default)(ce,ee)){Ue.next=7;break}return Ue.abrupt("return",Se());case 7:return Ue.prev=7,Ue.next=10,Object(te.read)(ce,ee);case 10:return fe=Ue.sent,fe.config=ee,fe.request={fromCache:!0},Ue.abrupt("return",{config:ce,next:fe});case 16:if(Ue.prev=16,Ue.t0=Ue.catch(7),!(ce.clearOnStale&&Ue.t0.reason==="cache-stale")){Ue.next=21;break}return Ue.next=21,ce.store.removeItem(ce.uuid);case 21:return Ue.abrupt("return",{config:ce,next:re});case 22:case"end":return Ue.stop()}},oe,null,[[7,16]])})),pe.apply(this,arguments)}Z.default=_e},"./src/response.js":function(K,Z,T){T.r(Z),T("./node_modules/regenerator-runtime/runtime.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");var L=T("./src/limit.js"),B=T("./src/cache.js"),te=T("./node_modules/cache-control-esm/index.js");function H(oe,ce,ee,re,fe,Se,Ce){try{var Ue=oe[Se](Ce),Ae=Ue.value}catch(Fe){ee(Fe);return}Ue.done?ce(Ae):Promise.resolve(Ae).then(re,fe)}function ve(oe){return function(){var ce=this,ee=arguments;return new Promise(function(re,fe){var Se=oe.apply(ce,ee);function Ce(Ae){H(Se,re,fe,Ce,Ue,"next",Ae)}function Ue(Ae){H(Se,re,fe,Ce,Ue,"throw",Ae)}Ce(void 0)})}}function _e(oe,ce,ee){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,ee,re){var fe,Se,Ce,Ue,Ae;return regeneratorRuntime.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(fe=re.request,Se=fe===void 0?{}:fe,Ce=re.headers,Ue=Ce===void 0?{}:Ce,!(["arraybuffer","blob"].indexOf(Se.responseType)>-1)){Ze.next=3;break}return Ze.abrupt("return",re);case 3:if(Ae={},ce.readHeaders&&(Ue["cache-control"]?(Ae=Object(te.parse)(Ue["cache-control"]),(Ae.noCache||Ae.noStore)&&(ce.excludeFromCache=!0)):Ue.expires?ce.expires=new Date(Ue.expires).getTime():ce.expires=new Date().getTime()),ce.excludeFromCache){Ze.next=15;break}if(Ae.maxAge||Ae.maxAge===0?ce.expires=Date.now()+Ae.maxAge*1e3:ce.readHeaders||(ce.expires=ce.maxAge===0?Date.now():Date.now()+ce.maxAge),!ce.limit){Ze.next=11;break}return ce.debug("Detected limit: ".concat(ce.limit)),Ze.next=11,Object(L.default)(ce);case 11:return Ze.next=13,Object(B.write)(ce,ee,re);case 13:Ze.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return Ze.abrupt("return",re);case 17:case"end":return Ze.stop()}},oe)})),pe.apply(this,arguments)}Z.default=_e},"./src/serialize.js":function(K,Z,T){T.r(Z),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");function L(H,ve){if(H==null)return{};var _e=B(H,ve),pe,oe;if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(H);for(oe=0;oe<ce.length;oe++)pe=ce[oe],!(ve.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(H,pe)&&(_e[pe]=H[pe])}return _e}function B(H,ve){if(H==null)return{};var _e={},pe=Object.keys(H),oe,ce;for(ce=0;ce<pe.length;ce++)oe=pe[ce],!(ve.indexOf(oe)>=0)&&(_e[oe]=H[oe]);return _e}function te(H,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){H.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var pe=L(_e,["request","config"]);return pe}Z.default=te},"./src/utilities.js":function(K,Z,T){T.r(Z),T.d(Z,"isObject",function(){return B}),T.d(Z,"getTag",function(){return te}),T.d(Z,"isFunction",function(){return H}),T.d(Z,"isString",function(){return ve}),T.d(Z,"mapObject",function(){return _e}),T("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),T("./node_modules/core-js/modules/es6.symbol.js"),T("./node_modules/core-js/modules/es6.array.iterator.js"),T("./node_modules/core-js/modules/es6.object.to-string.js");function L(pe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(ce){return typeof ce}:L=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},L(pe)}function B(pe){var oe=L(pe);return pe!=null&&(oe==="object"||oe==="function")}function te(pe){return pe===null?pe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(pe)}function H(pe){if(!B(pe))return!1;var oe=te(pe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(pe){var oe=L(pe);return oe==="string"||oe==="object"&&pe!=null&&!Array.isArray(pe)&&te(pe)==="[object String]"}function _e(pe,oe){return B(pe)?Object.keys(pe).map(function(ce){return oe(pe[ce],ce)}):[]}},axios:function(K,Z){K.exports=ae},util:function(K,Z){K.exports=M.default}})})});const $={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},j=O.setupCache({maxAge:60*60*24*1e3}),he=P.default.create({adapter:j.adapter}),q=async(X,G={})=>{const ae={...$,...G},[K,Z]=i.lngLatToGoogle(X,ae.zoomBase),T=ae.tileUrl.replace("{z}",String(ae.zoomBase)).replace("{x}",String(K)).replace("{y}",String(Z)),L={code:"",prefecture:"",city:""};let B;try{const ve=await he.get(T,{responseType:"arraybuffer"});B=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const te=new m.VectorTile(new S.default(B));let H=Object.keys(te.layers);return Array.isArray(H)||(H=[H]),H.forEach(ve=>{const _e=te.layers[ve];if(_e&&ae.layer===_e.name)for(let pe=0;pe<_e.length;pe++){const oe=_e.feature(pe).toGeoJSON(K,Z,ae.zoomBase);H.length>1&&(oe.properties.vt_layer=ve);const ce={type:"FeatureCollection",features:[oe]};t.geoContains(ce,X)&&(L.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,L.prefecture=oe.properties.prefecture,L.city=oe.properties.city)}}),L};e.openReverseGeocoder=q})(EP);const e5={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},t5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},n5={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},r5={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},mE={JPN:n5,CHN:e5,DEU:t5,KOR:r5};function LI(e,t,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function i5(e,t,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gE(e[0])||!gE(e[1]))throw new Error("coordinates must contain numbers");return LI({type:"Point",coordinates:e},t,i)}function o5(e,t,i={}){for(const c of e){if(c.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(c[c.length-1].length!==c[0].length)throw new Error("First and last Position are not equivalent.");for(let p=0;p<c[c.length-1].length;p++)if(c[c.length-1][p]!==c[0][p])throw new Error("First and last Position are not equivalent.")}return LI({type:"Polygon",coordinates:e},t,i)}function gE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function s5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function a5(e){return e.type==="Feature"?e.geometry:e}function DI(e,t,i){if(e!==null)for(var a,c,p,m,u,S,P,M=0,b=0,C,O=e.type,$=O==="FeatureCollection",j=O==="Feature",he=$?e.features.length:1,q=0;q<he;q++){P=$?e.features[q].geometry:j?e.geometry:e,C=P?P.type==="GeometryCollection":!1,u=C?P.geometries.length:1;for(var X=0;X<u;X++){var G=0,ae=0;if(m=C?P.geometries[X]:P,m!==null){S=m.coordinates;var K=m.type;switch(M=K==="Polygon"||K==="MultiPolygon"?1:0,K){case null:break;case"Point":if(t(S,b,q,G,ae)===!1)return!1;b++,G++;break;case"LineString":case"MultiPoint":for(a=0;a<S.length;a++){if(t(S[a],b,q,G,ae)===!1)return!1;b++,K==="MultiPoint"&&G++}K==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(a=0;a<S.length;a++){for(c=0;c<S[a].length-M;c++){if(t(S[a][c],b,q,G,ae)===!1)return!1;b++}K==="MultiLineString"&&G++,K==="Polygon"&&ae++}K==="Polygon"&&G++;break;case"MultiPolygon":for(a=0;a<S.length;a++){for(ae=0,c=0;c<S[a].length;c++){for(p=0;p<S[a][c].length-M;p++){if(t(S[a][c][p],b,q,G,ae)===!1)return!1;b++}ae++}G++}break;case"GeometryCollection":for(a=0;a<m.geometries.length;a++)if(DI(m.geometries[a],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l5(e,t){var i=0,a=0,c=0,p=0,m=0,u=0,S=0,P=0,M=null,b=null,C=e[0],O=e[1],$=t.length;for(i;i<$;i++){a=0;var j=t[i].length-1,he=t[i];if(M=he[0],M[0]!==he[j][0]&&M[1]!==he[j][1])throw new Error("First and last coordinates in a ring must be the same");for(m=M[0]-C,u=M[1]-O,a;a<j;a++){if(b=he[a+1],P=b[1]-O,u<0&&P<0||u>0&&P>0){M=b,u=P,m=M[0]-C;continue}if(S=b[0]-e[0],P>0&&u<=0){if(p=m*P-S*u,p>0)c=c+1;else if(p===0)return 0}else if(u>0&&P<=0){if(p=m*P-S*u,p<0)c=c+1;else if(p===0)return 0}else if(P===0&&u<0){if(p=m*P-S*u,p===0)return 0}else if(u===0&&P<0){if(p=m*P-S*u,p===0)return 0}else if(u===0&&P===0){if(S<=0&&m>=0)return 0;if(m<=0&&S>=0)return 0}M=b,u=P,m=S}}return c%2!==0}function u5(e,t,i={}){if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");const a=s5(e),c=a5(t),p=c.type,m=t.bbox;let u=c.coordinates;if(m&&c5(a,m)===!1)return!1;p==="Polygon"&&(u=[u]);let S=!1;for(var P=0;P<u.length;++P){const M=l5(a,u[P]);if(M===0)return!i.ignoreBoundary;M&&(S=!0)}return S}function c5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function h5(e,t={}){let i=0,a=0,c=0;return DI(e,function(p){i+=p[0],a+=p[1],c++}),i5([i/c,a/c],t.properties)}const d5=()=>{const[e,t]=gt.useState(!1);return{detectCountry:gt.useCallback(async(a,c)=>{t(!0);const m=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of m.features)if(u5([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},cv=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,p]=gt.useState((u=e.properties)==null?void 0:u[t.key]);gt.useEffect(()=>{var S;p((S=e.properties)==null?void 0:S[t.key])},[e]);const m=gt.useCallback(S=>{p(S.currentTarget.value),a&&a(S)},[]);return mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:m}),mt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(S=>{if(parseInt(S.tags.admin_level)===t.adminLevel)return mt.jsx("option",{value:S.tags.name},S.id);if(S.type==="node"&&t.adminLevel===9)return mt.jsx("option",{value:S.tags.name},S.id)})})]})},f5=({feature:e,fields:t})=>e.properties?mt.jsxs(mt.Fragment,{children:[t.postcodeField&&mt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,p5=({placeholder:e,defaultValue:t})=>{const[i,a]=gt.useState(t);gt.useEffect(()=>{a(t)},[t]);const c=gt.useCallback(p=>{a(p.currentTarget.value)},[]);return mt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Ng={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ng.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,p="Expected a function",m="__lodash_hash_undefined__",u=1,S=2,P=1/0,M=9007199254740991,b="[object Arguments]",C="[object Array]",O="[object Boolean]",$="[object Date]",j="[object Error]",he="[object Function]",q="[object GeneratorFunction]",X="[object Map]",G="[object Number]",ae="[object Object]",K="[object Promise]",Z="[object RegExp]",T="[object Set]",L="[object String]",B="[object Symbol]",te="[object WeakMap]",H="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",pe="[object Float64Array]",oe="[object Int8Array]",ce="[object Int16Array]",ee="[object Int32Array]",re="[object Uint8Array]",fe="[object Uint8ClampedArray]",Se="[object Uint16Array]",Ce="[object Uint32Array]",Ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Fe=/^\./,Ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,We=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,ct=/\w*$/,vt=/^\[object .+?Constructor\]$/,Mt=/^(?:0|[1-9]\d*)$/,pt={};pt[_e]=pt[pe]=pt[oe]=pt[ce]=pt[ee]=pt[re]=pt[fe]=pt[Se]=pt[Ce]=!0,pt[b]=pt[C]=pt[H]=pt[O]=pt[ve]=pt[$]=pt[j]=pt[he]=pt[X]=pt[G]=pt[ae]=pt[Z]=pt[T]=pt[L]=pt[te]=!1;var xt={};xt[b]=xt[C]=xt[H]=xt[ve]=xt[O]=xt[$]=xt[_e]=xt[pe]=xt[oe]=xt[ce]=xt[ee]=xt[X]=xt[G]=xt[ae]=xt[Z]=xt[T]=xt[L]=xt[B]=xt[re]=xt[fe]=xt[Se]=xt[Ce]=!0,xt[j]=xt[he]=xt[te]=!1;var Wt=typeof Nl=="object"&&Nl&&Nl.Object===Object&&Nl,Ht=typeof self=="object"&&self&&self.Object===Object&&self,ln=Wt||Ht||Function("return this")(),Qe=t&&!t.nodeType&&t,_n=Qe&&!0&&e&&!e.nodeType&&e,un=_n&&_n.exports===Qe,Vt=un&&Wt.process,Ee=function(){try{return Vt&&Vt.binding("util")}catch{}}(),N=Ee&&Ee.isTypedArray;function D(W,ye){return W.set(ye[0],ye[1]),W}function ge(W,ye){return W.add(ye),W}function He(W,ye,$e){switch($e.length){case 0:return W.call(ye);case 1:return W.call(ye,$e[0]);case 2:return W.call(ye,$e[0],$e[1]);case 3:return W.call(ye,$e[0],$e[1],$e[2])}return W.apply(ye,$e)}function et(W,ye){for(var $e=-1,ut=W?W.length:0;++$e<ut&&ye(W[$e],$e,W)!==!1;);return W}function ht(W,ye){for(var $e=-1,ut=ye.length,Ft=W.length;++$e<ut;)W[Ft+$e]=ye[$e];return W}function ue(W,ye,$e,ut){for(var Ft=-1,St=W?W.length:0;++Ft<St;)$e=ye($e,W[Ft],Ft,W);return $e}function k(W,ye){for(var $e=-1,ut=W?W.length:0;++$e<ut;)if(ye(W[$e],$e,W))return!0;return!1}function V(W){return function(ye){return ye==null?i:ye[W]}}function Te(W,ye){for(var $e=-1,ut=Array(W);++$e<W;)ut[$e]=ye($e);return ut}function Ve(W){return function(ye){return W(ye)}}function rt(W,ye){return W==null?i:W[ye]}function Ge(W){var ye=!1;if(W!=null&&typeof W.toString!="function")try{ye=!!(W+"")}catch{}return ye}function Et(W){var ye=-1,$e=Array(W.size);return W.forEach(function(ut,Ft){$e[++ye]=[Ft,ut]}),$e}function It(W,ye){return function($e){return W(ye($e))}}function yn(W){var ye=-1,$e=Array(W.size);return W.forEach(function(ut){$e[++ye]=ut}),$e}var Sn=Array.prototype,zt=Function.prototype,zr=Object.prototype,ei=ln["__core-js_shared__"],Ii=function(){var W=/[^.]+$/.exec(ei&&ei.keys&&ei.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}(),Ur=zt.toString,ze=zr.hasOwnProperty,se=Ur.call(Object),ie=zr.toString,we=RegExp("^"+Ur.call(ze).replace(We,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=un?ln.Buffer:i,Me=ln.Symbol,Be=ln.Uint8Array,qe=It(Object.getPrototypeOf,Object),De=Object.create,st=zr.propertyIsEnumerable,dt=Sn.splice,ot=Object.getOwnPropertySymbols,Ct=Ie?Ie.isBuffer:i,Kt=It(Object.keys,Object),tn=Math.max,pn=Vs(ln,"DataView"),En=Vs(ln,"Map"),hn=Vs(ln,"Promise"),Un=Vs(ln,"Set"),Jn=Vs(ln,"WeakMap"),nr=Vs(Object,"create"),wn=!st.call({valueOf:1},"valueOf"),Bn=Ln(pn),Yn=Ln(En),Er=Ln(hn),$r=Ln(Un),Vr=Ln(Jn),Ho=Me?Me.prototype:i,kn=Ho?Ho.valueOf:i,nl=Ho?Ho.toString:i;function Tn(){}function Tr(W){var ye=-1,$e=W?W.length:0;for(this.clear();++ye<$e;){var ut=W[ye];this.set(ut[0],ut[1])}}function fi(){this.__data__=nr?nr(null):{}}function Vh(W){return this.has(W)&&delete this.__data__[W]}function pi(W){var ye=this.__data__;if(nr){var $e=ye[W];return $e===m?i:$e}return ze.call(ye,W)?ye[W]:i}function Gr(W){var ye=this.__data__;return nr?ye[W]!==i:ze.call(ye,W)}function rl(W,ye){var $e=this.__data__;return $e[W]=nr&&ye===i?m:ye,this}Tr.prototype.clear=fi,Tr.prototype.delete=Vh,Tr.prototype.get=pi,Tr.prototype.has=Gr,Tr.prototype.set=rl;function mi(W){var ye=-1,$e=W?W.length:0;for(this.clear();++ye<$e;){var ut=W[ye];this.set(ut[0],ut[1])}}function vr(){this.__data__=[]}function go(W){var ye=this.__data__,$e=wa(ye,W);if($e<0)return!1;var ut=ye.length-1;return $e==ut?ye.pop():dt.call(ye,$e,1),!0}function ps(W){var ye=this.__data__,$e=wa(ye,W);return $e<0?i:ye[$e][1]}function hr(W){return wa(this.__data__,W)>-1}function il(W,ye){var $e=this.__data__,ut=wa($e,W);return ut<0?$e.push([W,ye]):$e[ut][1]=ye,this}mi.prototype.clear=vr,mi.prototype.delete=go,mi.prototype.get=ps,mi.prototype.has=hr,mi.prototype.set=il;function _r(W){var ye=-1,$e=W?W.length:0;for(this.clear();++ye<$e;){var ut=W[ye];this.set(ut[0],ut[1])}}function va(){this.__data__={hash:new Tr,map:new(En||mi),string:new Tr}}function Xo(W){return yl(this,W).delete(W)}function cu(W){return yl(this,W).get(W)}function _a(W){return yl(this,W).has(W)}function Ko(W,ye){return yl(this,W).set(W,ye),this}_r.prototype.clear=va,_r.prototype.delete=Xo,_r.prototype.get=cu,_r.prototype.has=_a,_r.prototype.set=Ko;function In(W){var ye=-1,$e=W?W.length:0;for(this.__data__=new _r;++ye<$e;)this.add(W[ye])}function ol(W){return this.__data__.set(W,m),this}function hu(W){return this.__data__.has(W)}In.prototype.add=In.prototype.push=ol,In.prototype.has=hu;function Kr(W){this.__data__=new mi(W)}function sl(){this.__data__=new mi}function al(W){return this.__data__.delete(W)}function ll(W){return this.__data__.get(W)}function ul(W){return this.__data__.has(W)}function xa(W,ye){var $e=this.__data__;if($e instanceof mi){var ut=$e.__data__;if(!En||ut.length<c-1)return ut.push([W,ye]),this;$e=this.__data__=new _r(ut)}return $e.set(W,ye),this}Kr.prototype.clear=sl,Kr.prototype.delete=al,Kr.prototype.get=ll,Kr.prototype.has=ul,Kr.prototype.set=xa;function ms(W,ye){var $e=Fr(W)||_o(W)?Te(W.length,String):[],ut=$e.length,Ft=!!ut;for(var St in W)(ye||ze.call(W,St))&&!(Ft&&(St=="length"||Gs(St,ut)))&&$e.push(St);return $e}function du(W,ye,$e){($e!==i&&!vo(W[ye],$e)||typeof ye=="number"&&$e===i&&!(ye in W))&&(W[ye]=$e)}function lc(W,ye,$e){var ut=W[ye];(!(ze.call(W,ye)&&vo(ut,$e))||$e===i&&!(ye in W))&&(W[ye]=$e)}function wa(W,ye){for(var $e=W.length;$e--;)if(vo(W[$e][0],ye))return $e;return-1}function Gh(W,ye){return W&&gl(ye,oo(ye),W)}function gi(W,ye,$e,ut,Ft,St,Gt){var rn;if(ut&&(rn=St?ut(W,Ft,St,Gt):ut(W)),rn!==i)return rn;if(!xi(W))return W;var vn=Fr(W);if(vn){if(rn=bc(W),!ye)return ml(W,rn)}else{var $n=Gi(W),jn=$n==he||$n==q;if(wo(W))return Hh(W,ye);if($n==ae||$n==b||jn&&!St){if(Ge(W))return St?W:{};if(rn=gu(jn?{}:W),!ye)return gc(W,Gh(rn,W))}else{if(!xt[$n])return St?W:{};rn=Sc(W,$n,gi,ye)}}Gt||(Gt=new Kr);var Zn=Gt.get(W);if(Zn)return Zn;if(Gt.set(W,rn),!vn)var dr=$e?_c(W):oo(W);return et(dr||W,function(Nn,fr){dr&&(fr=Nn,Nn=W[fr]),lc(rn,fr,gi(Nn,ye,$e,ut,fr,W,Gt))}),rn}function ba(W){return xi(W)?De(W):{}}var yi=vc(Sa),vi=ys();function Sa(W,ye){return W&&vi(W,ye,oo)}function Ea(W,ye){ye=qo(ye,W)?[ye]:Ns(ye);for(var $e=0,ut=ye.length;W!=null&&$e<ut;)W=W[Zs(ye[$e++])];return $e&&$e==ut?W:i}function uc(W,ye,$e){var ut=ye(W);return Fr(W)?ut:ht(ut,$e(W))}function cc(W){return ie.call(W)}function gs(W,ye){return W!=null&&ye in Object(W)}function cl(W,ye,$e,ut,Ft){return W===ye?!0:W==null||ye==null||!xi(W)&&!Ai(ye)?W!==W&&ye!==ye:Zh(W,ye,cl,$e,ut,Ft)}function Zh(W,ye,$e,ut,Ft,St){var Gt=Fr(W),rn=Fr(ye),vn=C,$n=C;Gt||(vn=Gi(W),vn=vn==b?ae:vn),rn||($n=Gi(ye),$n=$n==b?ae:$n);var jn=vn==ae&&!Ge(W),Zn=$n==ae&&!Ge(ye),dr=vn==$n;if(dr&&!jn)return St||(St=new Kr),Gt||Jo(W)?mu(W,ye,$e,ut,Ft,St):Jh(W,ye,vn,$e,ut,Ft,St);if(!(Ft&S)){var Nn=jn&&ze.call(W,"__wrapped__"),fr=Zn&&ze.call(ye,"__wrapped__");if(Nn||fr){var so=Nn?W.value():W,Mi=fr?ye.value():ye;return St||(St=new Kr),$e(so,Mi,ut,Ft,St)}}return dr?(St||(St=new Kr),Yh(W,ye,$e,ut,Ft,St)):!1}function Wh(W,ye,$e,ut){var Ft=$e.length,St=Ft;if(W==null)return!St;for(W=Object(W);Ft--;){var Gt=$e[Ft];if(Gt[2]?Gt[1]!==W[Gt[0]]:!(Gt[0]in W))return!1}for(;++Ft<St;){Gt=$e[Ft];var rn=Gt[0],vn=W[rn],$n=Gt[1];if(Gt[2]){if(vn===i&&!(rn in W))return!1}else{var jn=new Kr,Zn;if(!(Zn===i?cl($n,vn,ut,u|S,jn):Zn))return!1}}return!0}function hc(W){if(!xi(W)||vu(W))return!1;var ye=Hs(W)||Ge(W)?we:vt;return ye.test(Ln(W))}function dc(W){return Ai(W)&&vs(W.length)&&!!pt[ie.call(W)]}function fc(W){return typeof W=="function"?W:W==null?Xs:typeof W=="object"?Fr(W)?fu(W[0],W[1]):fl(W):bu(W)}function hl(W){if(!Ca(W))return Kt(W);var ye=[];for(var $e in Object(W))ze.call(W,$e)&&$e!="constructor"&&ye.push($e);return ye}function dl(W){if(!xi(W))return _u(W);var ye=Ca(W),$e=[];for(var ut in W)ut=="constructor"&&(ye||!ze.call(W,ut))||$e.push(ut);return $e}function fl(W){var ye=vl(W);return ye.length==1&&ye[0][2]?Gn(ye[0][0],ye[0][1]):function($e){return $e===W||Wh($e,W,ye)}}function fu(W,ye){return qo(W)&&_l(ye)?Gn(Zs(W),ye):function($e){var ut=xs($e,W);return ut===i&&ut===ye?Yo($e,W):cl(ye,ut,i,u|S)}}function pl(W,ye,$e,ut,Ft){if(W!==ye){if(!(Fr(ye)||Jo(ye)))var St=dl(ye);et(St||ye,function(Gt,rn){if(St&&(rn=Gt,Gt=ye[rn]),xi(Gt))Ft||(Ft=new Kr),ro(W,ye,rn,$e,pl,ut,Ft);else{var vn=ut?ut(W[rn],Gt,rn+"",W,ye,Ft):i;vn===i&&(vn=Gt),du(W,rn,vn)}})}}function ro(W,ye,$e,ut,Ft,St,Gt){var rn=W[$e],vn=ye[$e],$n=Gt.get(vn);if($n){du(W,$e,$n);return}var jn=St?St(rn,vn,$e+"",W,ye,Gt):i,Zn=jn===i;Zn&&(jn=vn,Fr(vn)||Jo(vn)?Fr(rn)?jn=rn:io(rn)?jn=ml(rn):(Zn=!1,jn=gi(vn,!0)):Ia(vn)||_o(vn)?_o(rn)?jn=Aa(rn):!xi(rn)||ut&&Hs(rn)?(Zn=!1,jn=gi(vn,!0)):jn=rn:Zn=!1),Zn&&(Gt.set(vn,jn),Ft(jn,vn,ut,St,Gt),Gt.delete(vn)),du(W,$e,jn)}function pu(W){return function(ye){return Ea(ye,W)}}function Bs(W,ye){return ye=tn(ye===i?W.length-1:ye,0),function(){for(var $e=arguments,ut=-1,Ft=tn($e.length-ye,0),St=Array(Ft);++ut<Ft;)St[ut]=$e[ye+ut];ut=-1;for(var Gt=Array(ye+1);++ut<ye;)Gt[ut]=$e[ut];return Gt[ye]=St,He(W,this,Gt)}}function An(W){if(typeof W=="string")return W;if(_s(W))return nl?nl.call(W):"";var ye=W+"";return ye=="0"&&1/W==-P?"-0":ye}function Ns(W){return Fr(W)?W:bn(W)}function Hh(W,ye){if(ye)return W.slice();var $e=new W.constructor(W.length);return W.copy($e),$e}function Us(W){var ye=new W.constructor(W.byteLength);return new Be(ye).set(new Be(W)),ye}function Xh(W,ye){var $e=ye?Us(W.buffer):W.buffer;return new W.constructor($e,W.byteOffset,W.byteLength)}function $s(W,ye,$e){var ut=ye?$e(Et(W),!0):Et(W);return ue(ut,D,new W.constructor)}function Kh(W){var ye=new W.constructor(W.source,ct.exec(W));return ye.lastIndex=W.lastIndex,ye}function pc(W,ye,$e){var ut=ye?$e(yn(W),!0):yn(W);return ue(ut,ge,new W.constructor)}function qh(W){return kn?Object(kn.call(W)):{}}function mc(W,ye){var $e=ye?Us(W.buffer):W.buffer;return new W.constructor($e,W.byteOffset,W.length)}function ml(W,ye){var $e=-1,ut=W.length;for(ye||(ye=Array(ut));++$e<ut;)ye[$e]=W[$e];return ye}function gl(W,ye,$e,ut){$e||($e={});for(var Ft=-1,St=ye.length;++Ft<St;){var Gt=ye[Ft],rn=i;lc($e,Gt,rn===i?W[Gt]:rn)}return $e}function gc(W,ye){return gl(W,xc(W),ye)}function yc(W){return Bs(function(ye,$e){var ut=-1,Ft=$e.length,St=Ft>1?$e[Ft-1]:i,Gt=Ft>2?$e[2]:i;for(St=W.length>3&&typeof St=="function"?(Ft--,St):i,Gt&&yo($e[0],$e[1],Gt)&&(St=Ft<3?i:St,Ft=1),ye=Object(ye);++ut<Ft;){var rn=$e[ut];rn&&W(ye,rn,ut,St)}return ye})}function vc(W,ye){return function($e,ut){if($e==null)return $e;if(!xo($e))return W($e,ut);for(var Ft=$e.length,St=-1,Gt=Object($e);++St<Ft&&ut(Gt[St],St,Gt)!==!1;);return $e}}function ys(W){return function(ye,$e,ut){for(var Ft=-1,St=Object(ye),Gt=ut(ye),rn=Gt.length;rn--;){var vn=Gt[++Ft];if($e(St[vn],vn,St)===!1)break}return ye}}function mu(W,ye,$e,ut,Ft,St){var Gt=Ft&S,rn=W.length,vn=ye.length;if(rn!=vn&&!(Gt&&vn>rn))return!1;var $n=St.get(W);if($n&&St.get(ye))return $n==ye;var jn=-1,Zn=!0,dr=Ft&u?new In:i;for(St.set(W,ye),St.set(ye,W);++jn<rn;){var Nn=W[jn],fr=ye[jn];if(ut)var so=Gt?ut(fr,Nn,jn,ye,W,St):ut(Nn,fr,jn,W,ye,St);if(so!==i){if(so)continue;Zn=!1;break}if(dr){if(!k(ye,function(Mi,bo){if(!dr.has(bo)&&(Nn===Mi||$e(Nn,Mi,ut,Ft,St)))return dr.add(bo)})){Zn=!1;break}}else if(!(Nn===fr||$e(Nn,fr,ut,Ft,St))){Zn=!1;break}}return St.delete(W),St.delete(ye),Zn}function Jh(W,ye,$e,ut,Ft,St,Gt){switch($e){case ve:if(W.byteLength!=ye.byteLength||W.byteOffset!=ye.byteOffset)return!1;W=W.buffer,ye=ye.buffer;case H:return!(W.byteLength!=ye.byteLength||!ut(new Be(W),new Be(ye)));case O:case $:case G:return vo(+W,+ye);case j:return W.name==ye.name&&W.message==ye.message;case Z:case L:return W==ye+"";case X:var rn=Et;case T:var vn=St&S;if(rn||(rn=yn),W.size!=ye.size&&!vn)return!1;var $n=Gt.get(W);if($n)return $n==ye;St|=u,Gt.set(W,ye);var jn=mu(rn(W),rn(ye),ut,Ft,St,Gt);return Gt.delete(W),jn;case B:if(kn)return kn.call(W)==kn.call(ye)}return!1}function Yh(W,ye,$e,ut,Ft,St){var Gt=Ft&S,rn=oo(W),vn=rn.length,$n=oo(ye),jn=$n.length;if(vn!=jn&&!Gt)return!1;for(var Zn=vn;Zn--;){var dr=rn[Zn];if(!(Gt?dr in ye:ze.call(ye,dr)))return!1}var Nn=St.get(W);if(Nn&&St.get(ye))return Nn==ye;var fr=!0;St.set(W,ye),St.set(ye,W);for(var so=Gt;++Zn<vn;){dr=rn[Zn];var Mi=W[dr],bo=ye[dr];if(ut)var bs=Gt?ut(bo,Mi,dr,ye,W,St):ut(Mi,bo,dr,W,ye,St);if(!(bs===i?Mi===bo||$e(Mi,bo,ut,Ft,St):bs)){fr=!1;break}so||(so=dr=="constructor")}if(fr&&!so){var Ks=W.constructor,So=ye.constructor;Ks!=So&&"constructor"in W&&"constructor"in ye&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof So=="function"&&So instanceof So)&&(fr=!1)}return St.delete(W),St.delete(ye),fr}function _c(W){return uc(W,oo,xc)}function Ta(){var W=Tn.iteratee||xl;return W=W===xl?fc:W,arguments.length?W(arguments[0],arguments[1]):W}function yl(W,ye){var $e=W.__data__;return yu(ye)?$e[typeof ye=="string"?"string":"hash"]:$e.map}function vl(W){for(var ye=oo(W),$e=ye.length;$e--;){var ut=ye[$e],Ft=W[ut];ye[$e]=[ut,Ft,_l(Ft)]}return ye}function Vs(W,ye){var $e=rt(W,ye);return hc($e)?$e:i}var xc=ot?It(ot,Object):Qo,Gi=cc;(pn&&Gi(new pn(new ArrayBuffer(1)))!=ve||En&&Gi(new En)!=X||hn&&Gi(hn.resolve())!=K||Un&&Gi(new Un)!=T||Jn&&Gi(new Jn)!=te)&&(Gi=function(W){var ye=ie.call(W),$e=ye==ae?W.constructor:i,ut=$e?Ln($e):i;if(ut)switch(ut){case Bn:return ve;case Yn:return X;case Er:return K;case $r:return T;case Vr:return te}return ye});function wc(W,ye,$e){ye=qo(ye,W)?[ye]:Ns(ye);for(var ut,Ft=-1,Gt=ye.length;++Ft<Gt;){var St=Zs(ye[Ft]);if(!(ut=W!=null&&$e(W,St)))break;W=W[St]}if(ut)return ut;var Gt=W?W.length:0;return!!Gt&&vs(Gt)&&Gs(St,Gt)&&(Fr(W)||_o(W))}function bc(W){var ye=W.length,$e=W.constructor(ye);return ye&&typeof W[0]=="string"&&ze.call(W,"index")&&($e.index=W.index,$e.input=W.input),$e}function gu(W){return typeof W.constructor=="function"&&!Ca(W)?ba(qe(W)):{}}function Sc(W,ye,$e,ut){var Ft=W.constructor;switch(ye){case H:return Us(W);case O:case $:return new Ft(+W);case ve:return Xh(W,ut);case _e:case pe:case oe:case ce:case ee:case re:case fe:case Se:case Ce:return mc(W,ut);case X:return $s(W,ut,$e);case G:case L:return new Ft(W);case Z:return Kh(W);case T:return pc(W,ut,$e);case B:return qh(W)}}function Gs(W,ye){return ye=ye??M,!!ye&&(typeof W=="number"||Mt.test(W))&&W>-1&&W%1==0&&W<ye}function yo(W,ye,$e){if(!xi($e))return!1;var ut=typeof ye;return(ut=="number"?xo($e)&&Gs(ye,$e.length):ut=="string"&&ye in $e)?vo($e[ye],W):!1}function qo(W,ye){if(Fr(W))return!1;var $e=typeof W;return $e=="number"||$e=="symbol"||$e=="boolean"||W==null||_s(W)?!0:Ae.test(W)||!Ue.test(W)||ye!=null&&W in Object(ye)}function yu(W){var ye=typeof W;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?W!=="__proto__":W===null}function vu(W){return!!Ii&&Ii in W}function Ca(W){var ye=W&&W.constructor,$e=typeof ye=="function"&&ye.prototype||zr;return W===$e}function _l(W){return W===W&&!xi(W)}function Gn(W,ye){return function($e){return $e==null?!1:$e[W]===ye&&(ye!==i||W in Object($e))}}function _u(W){var ye=[];if(W!=null)for(var $e in Object(W))ye.push($e);return ye}var bn=Pa(function(W){W=wu(W);var ye=[];return Fe.test(W)&&ye.push(""),W.replace(Ze,function($e,ut,Ft,St){ye.push(Ft?St.replace(it,"$1"):ut||$e)}),ye});function Zs(W){if(typeof W=="string"||_s(W))return W;var ye=W+"";return ye=="0"&&1/W==-P?"-0":ye}function Ln(W){if(W!=null){try{return Ur.call(W)}catch{}try{return W+""}catch{}}return""}function Kn(W){for(var ye=-1,$e=W?W.length:0,ut=0,Ft=[];++ye<$e;){var St=W[ye];St&&(Ft[ut++]=St)}return Ft}function Ws(W,ye){var $e=Fr(W)?et:yi;return $e(W,Ta(ye,3))}function Pa(W,ye){if(typeof W!="function"||ye&&typeof ye!="function")throw new TypeError(p);var $e=function(){var ut=arguments,Ft=ye?ye.apply(this,ut):ut[0],St=$e.cache;if(St.has(Ft))return St.get(Ft);var Gt=W.apply(this,ut);return $e.cache=St.set(Ft,Gt),Gt};return $e.cache=new(Pa.Cache||_r),$e}Pa.Cache=_r;function xu(W){return gi(W,!1,!0)}function vo(W,ye){return W===ye||W!==W&&ye!==ye}function _o(W){return io(W)&&ze.call(W,"callee")&&(!st.call(W,"callee")||ie.call(W)==b)}var Fr=Array.isArray;function xo(W){return W!=null&&vs(W.length)&&!Hs(W)}function io(W){return Ai(W)&&xo(W)}var wo=Ct||Ma;function _i(W){if(xo(W)&&(Fr(W)||typeof W=="string"||typeof W.splice=="function"||wo(W)||_o(W)))return!W.length;var ye=Gi(W);if(ye==X||ye==T)return!W.size;if(wn||Ca(W))return!Kt(W).length;for(var $e in W)if(ze.call(W,$e))return!1;return!0}function Hs(W){var ye=xi(W)?ie.call(W):"";return ye==he||ye==q}function vs(W){return typeof W=="number"&&W>-1&&W%1==0&&W<=M}function xi(W){var ye=typeof W;return!!W&&(ye=="object"||ye=="function")}function Ai(W){return!!W&&typeof W=="object"}function Ia(W){if(!Ai(W)||ie.call(W)!=ae||Ge(W))return!1;var ye=qe(W);if(ye===null)return!0;var $e=ze.call(ye,"constructor")&&ye.constructor;return typeof $e=="function"&&$e instanceof $e&&Ur.call($e)==se}function _s(W){return typeof W=="symbol"||Ai(W)&&ie.call(W)==B}var Jo=N?Ve(N):dc;function Aa(W){return gl(W,ws(W))}function wu(W){return W==null?"":An(W)}function xs(W,ye,$e){var ut=W==null?i:Ea(W,ye);return ut===i?$e:ut}function Yo(W,ye){return W!=null&&wc(W,ye,gs)}function oo(W){return xo(W)?ms(W):hl(W)}function ws(W){return xo(W)?ms(W,!0):dl(W)}var zn=yc(function(W,ye,$e){pl(W,ye,$e)});function Xs(W){return W}function xl(W){return fc(typeof W=="function"?W:gi(W,!0))}function bu(W){return qo(W)?V(Zs(W)):pu(W)}function Qo(){return[]}function Ma(){return!1}Tn.compact=Kn,Tn.iteratee=xl,Tn.keys=oo,Tn.keysIn=ws,Tn.memoize=Pa,Tn.merge=zn,Tn.property=bu,Tn.toPlainObject=Aa,Tn.clone=xu,Tn.eq=vo,Tn.forEach=Ws,Tn.get=xs,Tn.hasIn=Yo,Tn.identity=Xs,Tn.isArguments=_o,Tn.isArray=Fr,Tn.isArrayLike=xo,Tn.isArrayLikeObject=io,Tn.isBuffer=wo,Tn.isEmpty=_i,Tn.isFunction=Hs,Tn.isLength=vs,Tn.isObject=xi,Tn.isObjectLike=Ai,Tn.isPlainObject=Ia,Tn.isSymbol=_s,Tn.isTypedArray=Jo,Tn.stubArray=Qo,Tn.stubFalse=Ma,Tn.toString=wu,Tn.each=Ws,Tn.VERSION=a,_n&&((_n.exports=Tn)._=Tn,Qe._=Tn)}).call(Nl)})(Ng,Ng.exports);var m5=Ng.exports,g5=Nm;function Nm(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Nm(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Nm(e.geometries[a],t);else if(i==="Feature")Nm(e.geometry,t);else if(i==="Polygon")yE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)yE(e.coordinates[a],t);return e}function yE(e,t){if(e.length!==0){vE(e[0],t);for(var i=1;i<e.length;i++)vE(e[i],!t)}}function vE(e,t){for(var i=0,a=0,c=0,p=e.length,m=p-1;c<p;m=c++){var u=(e[c][0]-e[m][0])*(e[m][1]+e[c][1]),S=i+u;a+=Math.abs(i)>=Math.abs(u)?i-S+u:u-S+i,i=S}i+a>=0!=!!t&&e.reverse()}const y5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var v5=y5,Pn=m5,xm=g5,Um={};v5.forEach(function(e){if(e.polygon==="all")Um[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Um[e.key]={},Um[e.key][t]=i}});function _5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Pn.merge(e,t)}var Ug={};Ug=function(e,t,i){t=Pn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Um,deduplicator:_5},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=p(e):a=c(e),a;function c(S){var P=new Array,M=new Array,b=new Array;function C(K){var Z=Pn.clone(K);Z.lat=K.center.lat,Z.lon=K.center.lon,Z.__is_center_placeholder=!0,P.push(Z)}function O(K){var Z=Pn.clone(K);Z.nodes=[];function T(L,B,te){var H={type:"node",id:"_"+Z.type+"/"+Z.id+"bounds"+te,lat:L,lon:B};Z.nodes.push(H.id),P.push(H)}T(Z.bounds.minlat,Z.bounds.minlon,1),T(Z.bounds.maxlat,Z.bounds.minlon,2),T(Z.bounds.maxlat,Z.bounds.maxlon,3),T(Z.bounds.minlat,Z.bounds.maxlon,4),Z.nodes.push(Z.nodes[0]),Z.__is_bounds_placeholder=!0,M.push(Z)}function $(K){function Z(T,L,B){var te={type:"node",id:B,lat:T,lon:L};P.push(te)}Pn.isArray(K.nodes)||(K.nodes=K.geometry.map(function(T){return T!==null?"_anonymous@"+T.lat+"/"+T.lon:"_anonymous@unknown_location"})),K.geometry.forEach(function(T,L){T&&Z(T.lat,T.lon,K.nodes[L])})}function j(K){function Z(L,B,te){var H={type:"node",id:te,lat:L,lon:B};P.push(H)}function T(L,B){if(M.some(function(ve){return ve.type=="way"&&ve.id==B}))return;var te={type:"way",id:B,nodes:[]};function H(ve,_e){var pe={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};te.nodes.push(pe.id),P.push(pe)}L.forEach(function(ve){ve?H(ve.lat,ve.lon):te.nodes.push(void 0)}),M.push(te)}K.members.forEach(function(L,B){L.type=="node"?L.lat&&Z(L.lat,L.lon,L.ref):L.type=="way"&&L.geometry&&(L.ref="_fullGeom"+L.ref,T(L.geometry,L.ref))})}for(var he=0;he<S.elements.length;he++)switch(S.elements[he].type){case"node":var q=S.elements[he];P.push(q);break;case"way":var X=Pn.clone(S.elements[he]);X.nodes=Pn.clone(X.nodes),M.push(X),X.center&&C(X),X.geometry?$(X):X.bounds&&O(X);break;case"relation":var G=Pn.clone(S.elements[he]);G.members=Pn.clone(G.members),b.push(G);var ae=G.members&&G.members.some(function(K){return K.type=="node"&&K.lat||K.type=="way"&&K.geometry&&K.geometry.length>0});G.center&&C(G),ae?j(G):G.bounds&&O(G);break}return m(P,M,b)}function p(S){var P=new Array,M=new Array,b=new Array;function C(G,ae,K){G.hasAttribute(K)&&(ae[K]=G.getAttribute(K))}function O(G,ae){var K=Pn.clone(G);C(ae,K,"lat"),C(ae,K,"lon"),K.__is_center_placeholder=!0,P.push(K)}function $(G,ae){var K=Pn.clone(G);K.nodes=[];function Z(T,L,B){var te={type:"node",id:"_"+K.type+"/"+K.id+"bounds"+B,lat:T,lon:L};K.nodes.push(te.id),P.push(te)}Z(ae.getAttribute("minlat"),ae.getAttribute("minlon"),1),Z(ae.getAttribute("maxlat"),ae.getAttribute("minlon"),2),Z(ae.getAttribute("maxlat"),ae.getAttribute("maxlon"),3),Z(ae.getAttribute("minlat"),ae.getAttribute("maxlon"),4),K.nodes.push(K.nodes[0]),K.__is_bounds_placeholder=!0,M.push(K)}function j(G,ae){function K(Z,T,L){var B={type:"node",id:L,lat:Z,lon:T};return P.push(B),B.id}Pn.isArray(G.nodes)||(G.nodes=[],Pn.each(ae,function(Z,T){G.nodes.push("_anonymous@"+Z.getAttribute("lat")+"/"+Z.getAttribute("lon"))})),Pn.each(ae,function(Z,T){Z.getAttribute("lat")&&K(Z.getAttribute("lat"),Z.getAttribute("lon"),G.nodes[T])})}function he(G,ae){function K(T,L,B){var te={type:"node",id:B,lat:T,lon:L};P.push(te)}function Z(T,L){if(M.some(function(H){return H.type=="way"&&H.id==L}))return;var B={type:"way",id:L,nodes:[]};function te(H,ve){var _e={type:"node",id:"_anonymous@"+H+"/"+ve,lat:H,lon:ve};B.nodes.push(_e.id),P.push(_e)}Pn.each(T,function(H){H.getAttribute("lat")?te(H.getAttribute("lat"),H.getAttribute("lon")):B.nodes.push(void 0)}),M.push(B)}Pn.each(ae,function(T,L){G.members[L].type=="node"?T.getAttribute("lat")&&K(T.getAttribute("lat"),T.getAttribute("lon"),G.members[L].ref):G.members[L].type=="way"&&T.getElementsByTagName("nd").length>0&&(G.members[L].ref="_fullGeom"+G.members[L].ref,Z(T.getElementsByTagName("nd"),G.members[L].ref))})}Pn.each(S.getElementsByTagName("node"),function(G,ae){var K={};Pn.each(G.getElementsByTagName("tag"),function(T){K[T.getAttribute("k")]=T.getAttribute("v")});var Z={type:"node"};C(G,Z,"id"),C(G,Z,"lat"),C(G,Z,"lon"),C(G,Z,"version"),C(G,Z,"timestamp"),C(G,Z,"changeset"),C(G,Z,"uid"),C(G,Z,"user"),Pn.isEmpty(K)||(Z.tags=K),P.push(Z)});var q,X;return Pn.each(S.getElementsByTagName("way"),function(G,ae){var K={},Z=[];Pn.each(G.getElementsByTagName("tag"),function(B){K[B.getAttribute("k")]=B.getAttribute("v")});var T=!1;Pn.each(G.getElementsByTagName("nd"),function(B,te){var H;(H=B.getAttribute("ref"))&&(Z[te]=H),!T&&B.getAttribute("lat")&&(T=!0)});var L={type:"way"};C(G,L,"id"),C(G,L,"version"),C(G,L,"timestamp"),C(G,L,"changeset"),C(G,L,"uid"),C(G,L,"user"),Z.length>0&&(L.nodes=Z),Pn.isEmpty(K)||(L.tags=K),(q=G.getElementsByTagName("center")[0])&&O(L,q),T?j(L,G.getElementsByTagName("nd")):(X=G.getElementsByTagName("bounds")[0])&&$(L,X),M.push(L)}),Pn.each(S.getElementsByTagName("relation"),function(G,ae){var K={},Z=[];Pn.each(G.getElementsByTagName("tag"),function(B){K[B.getAttribute("k")]=B.getAttribute("v")});var T=!1;Pn.each(G.getElementsByTagName("member"),function(B,te){Z[te]={},C(B,Z[te],"ref"),C(B,Z[te],"role"),C(B,Z[te],"type"),(!T&&Z[te].type=="node"&&B.getAttribute("lat")||Z[te].type=="way"&&B.getElementsByTagName("nd").length>0)&&(T=!0)});var L={type:"relation"};C(G,L,"id"),C(G,L,"version"),C(G,L,"timestamp"),C(G,L,"changeset"),C(G,L,"uid"),C(G,L,"user"),Z.length>0&&(L.members=Z),Pn.isEmpty(K)||(L.tags=K),(q=G.getElementsByTagName("center")[0])&&O(L,q),T?he(L,G.getElementsByTagName("member")):(X=G.getElementsByTagName("bounds")[0])&&$(L,X),b.push(L)}),m(P,M,b)}function m(S,P,M){function b(Fe,Ze){if(typeof Ze!="object"&&(Ze={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Fe,Ze);for(var We in Fe)if(t.uninterestingTags[We]!==!0&&!(Ze[We]===!0||Ze[We]===Fe[We]))return!0;return!1}function C(Fe){var Ze={timestamp:Fe.timestamp,version:Fe.version,changeset:Fe.changeset,user:Fe.user,uid:Fe.uid};for(var We in Ze)Ze[We]===void 0&&delete Ze[We];return Ze}for(var O=new Object,$=new Object,j=0;j<S.length;j++){var he=S[j];O[he.id]!==void 0&&(he=t.deduplicator(he,O[he.id])),O[he.id]=he,typeof he.tags<"u"&&b(he.tags)&&($[he.id]=!0)}for(var j=0;j<M.length;j++)if(Pn.isArray(M[j].members))for(var q=0;q<M[j].members.length;q++)M[j].members[q].type=="node"&&($[M[j].members[q].ref]=!0);for(var X=new Object,G=new Object,j=0;j<P.length;j++){var ae=P[j];if(X[ae.id]&&(ae=t.deduplicator(ae,X[ae.id])),X[ae.id]=ae,Pn.isArray(ae.nodes))for(var q=0;q<ae.nodes.length;q++)typeof ae.nodes[q]!="object"&&(G[ae.nodes[q]]=!0,ae.nodes[q]=O[ae.nodes[q]])}var K=new Array;for(var Z in O){var he=O[Z];(!G[Z]||$[Z])&&K.push(he)}for(var T=new Array,j=0;j<M.length;j++){var L=M[j];T[L.id]&&(L=t.deduplicator(L,T[L.id])),T[L.id]=L}var B={node:{},way:{},relation:{}};for(var Z in T){var L=T[Z];if(!Pn.isArray(L.members)){t.verbose&&console.warn("Relation",L.type+"/"+L.id,"ignored because it has no members");continue}for(var q=0;q<L.members.length;q++){var te=L.members[q].type,H=L.members[q].ref;if(typeof H!="number"&&(H=H.replace("_fullGeom","")),!B[te]){t.verbose&&console.warn("Relation",L.type+"/"+L.id,"member",te+"/"+H,"ignored because it has an invalid type");continue}typeof B[te][H]>"u"&&(B[te][H]=[]),B[te][H].push({role:L.members[q].role,rel:L.id,reltags:L.tags})}}var ve,_e=[];for(j=0;j<K.length;j++){if(typeof K[j].lon>"u"||typeof K[j].lat>"u"){t.verbose&&console.warn("POI",K[j].type+"/"+K[j].id,"ignored because it lacks coordinates");continue}var pe={type:"Feature",id:K[j].type+"/"+K[j].id,properties:{type:K[j].type,id:K[j].id,tags:K[j].tags||{},relations:B.node[K[j].id]||[],meta:C(K[j])},geometry:{type:"Point",coordinates:[+K[j].lon,+K[j].lat]}};K[j].__is_center_placeholder&&(pe.properties.geometry="center"),i?i(pe):_e.push(pe)}for(var oe=[],ce=[],j=0;j<M.length;j++)if(T[M[j].id]===M[j]){if(typeof M[j].tags<"u"&&(M[j].tags.type=="route"||M[j].tags.type=="waterway")){let Ze=function(We){var it=!1,ct;ct=We.members.filter(function(xt){return xt.type==="way"}),ct=ct.map(function(xt){var Wt=X[xt.ref];if(Wt===void 0||Wt.nodes===void 0){t.verbose&&console.warn("Route "+We.type+"/"+We.id,"tainted by a missing or incomplete  way",xt.type+"/"+xt.ref),it=!0;return}return{id:xt.ref,role:xt.role,way:Wt,nodes:Wt.nodes.filter(function(Ht){return Ht!==void 0?!0:(it=!0,t.verbose&&console.warn("Route",We.type+"/"+We.id,"tainted by a way",xt.type+"/"+xt.ref,"with a missing node"),!1)})}}),ct=Pn.compact(ct);var vt;vt=hv(ct);var Mt=[];if(Mt=Pn.compact(vt.map(function(xt){return Pn.compact(xt.map(function(Wt){return[+Wt.lon,+Wt.lat]}))})),Mt.length==0)return t.verbose&&console.warn("Route",We.type+"/"+We.id,"contains no coordinates"),!1;var pt={type:"Feature",id:We.type+"/"+We.id,properties:{type:We.type,id:We.id,tags:We.tags||{},relations:B[We.type][We.id]||[],meta:C(We)},geometry:{type:Mt.length===1?"LineString":"MultiLineString",coordinates:Mt.length===1?Mt[0]:Mt}};return it&&(t.verbose&&console.warn("Route",We.type+"/"+We.id,"is tainted"),pt.properties.tainted=!0),pt};var Ue=Ze;if(!Pn.isArray(M[j].members)){t.verbose&&console.warn("Route",M[j].type+"/"+M[j].id,"ignored because it has no members");continue}if(M[j].members.forEach(function(We){X[We.ref]&&!b(X[We.ref].tags)&&(X[We.ref].is_skippablerelationmember=!0)}),pe=Ze(M[j]),pe===!1){t.verbose&&console.warn("Route relation",M[j].type+"/"+M[j].id,"ignored because it has invalid geometry");continue}i?i(xm(pe)):ce.push(pe)}if(typeof M[j].tags<"u"&&(M[j].tags.type=="multipolygon"||M[j].tags.type=="boundary")){let We=function(it,ct){var vt=!1,Mt=re?"way":"relation",pt=typeof it.id=="number"?it.id:+it.id.replace("_fullGeom",""),xt;xt=ct.members.filter(function(D){return D.type==="way"}),xt=xt.map(function(D){var ge=X[D.ref];if(ge===void 0||ge.nodes===void 0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),vt=!0;return}return{id:D.ref,role:D.role||"outer",way:ge,nodes:ge.nodes.filter(function(He){return He!==void 0?!0:(vt=!0,t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),xt=Pn.compact(xt);var Wt,Ht;Wt=hv(xt.filter(function(D){return D.role==="outer"})),Ht=hv(xt.filter(function(D){return D.role==="inner"}));var ln;function Qe(D){var ge=function(k,V){for(var Te=0;Te<V.length;Te++)if(et(V[Te],k))return!0;return!1},He=function(k){return k.map(function(V){return[+V.lat,+V.lon]})},et=function(k,V){for(var Te=k[0],Ve=k[1],rt=!1,Ge=0,Et=V.length-1;Ge<V.length;Et=Ge++){var It=V[Ge][0],yn=V[Ge][1],Sn=V[Et][0],zt=V[Et][1],zr=yn>Ve!=zt>Ve&&Te<(Sn-It)*(Ve-yn)/(zt-yn)+It;zr&&(rt=!rt)}return rt},ht,ue;for(D=He(D),ht=0;ht<Wt.length;ht++)if(ue=He(Wt[ht]),ge(ue,D))return ht}ln=Wt.map(function(D){return[D]});for(var _n=0;_n<Ht.length;_n++){var un=Qe(Ht[_n]);un!==void 0?ln[un].push(Ht[_n]):t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an inner ring with no containing outer")}var Vt=[];if(Vt=Pn.compact(ln.map(function(D){var ge=Pn.compact(D.map(function(He){if(He.length<4){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains a ring with less than four nodes");return}return Pn.compact(He.map(function(et){return[+et.lon,+et.lat]}))}));if(ge.length==0){t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains an empty ring cluster");return}return ge})),Vt.length==0)return t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"contains no coordinates"),!1;var Ee="MultiPolygon";Vt.length===1&&(Ee="Polygon",Vt=Vt[0]);var N={type:"Feature",id:it.type+"/"+pt,properties:{type:it.type,id:pt,tags:it.tags||{},relations:B[it.type][it.id]||[],meta:C(it)},geometry:{type:Ee,coordinates:Vt}};return vt&&(t.verbose&&console.warn("Multipolygon",Mt+"/"+pt,"is tainted"),N.properties.tainted=!0),N};var Ae=We;if(!Pn.isArray(M[j].members)){t.verbose&&console.warn("Multipolygon",M[j].type+"/"+M[j].id,"ignored because it has no members");continue}for(var ee=0,q=0;q<M[j].members.length;q++)M[j].members[q].role=="outer"?ee++:t.verbose&&M[j].members[q].role!="inner"&&console.warn("Multipolygon",M[j].type+"/"+M[j].id,"member",M[j].members[q].type+"/"+M[j].members[q].ref,'ignored because it has an invalid role: "'+M[j].members[q].role+'"');if(M[j].members.forEach(function(it){X[it.ref]&&(it.role==="outer"&&!b(X[it.ref].tags,M[j].tags)&&(X[it.ref].is_skippablerelationmember=!0),it.role==="inner"&&!b(X[it.ref].tags)&&(X[it.ref].is_skippablerelationmember=!0))}),ee==0){t.verbose&&console.warn("Multipolygon relation",M[j].type+"/"+M[j].id,"ignored because it has no outer ways");continue}var re=!1;ee==1&&!b(M[j].tags,{type:!0})&&(re=!0);var pe=null;if(!re)pe=We(M[j],M[j]);else{var fe=M[j].members.filter(function(it){return it.role==="outer"})[0];if(fe=X[fe.ref],fe===void 0){t.verbose&&console.warn("Multipolygon relation",M[j].type+"/"+M[j].id,"ignored because outer way",fe.type+"/"+fe.ref,"is missing");continue}fe.is_skippablerelationmember=!0,pe=We(fe,M[j])}if(pe===!1){t.verbose&&console.warn("Multipolygon relation",M[j].type+"/"+M[j].id,"ignored because it has invalid geometry");continue}i?i(xm(pe)):ce.push(pe)}}for(var j=0;j<P.length;j++)if(X[P[j].id]===P[j]){if(!Pn.isArray(P[j].nodes)){t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"ignored because it has no nodes");continue}if(!P[j].is_skippablerelationmember){typeof P[j].id!="number"&&(P[j].id=+P[j].id.replace("_fullGeom","")),P[j].tainted=!1,P[j].hidden=!1;var Se=new Array;for(q=0;q<P[j].nodes.length;q++)typeof P[j].nodes[q]=="object"?Se.push([+P[j].nodes[q].lon,+P[j].nodes[q].lat]):(t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"is tainted by an invalid node"),P[j].tainted=!0);if(Se.length<=1){t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"ignored because it contains too few nodes");continue}var Ce="LineString";typeof P[j].nodes[0]<"u"&&typeof P[j].nodes[P[j].nodes.length-1]<"u"&&P[j].nodes[0].id===P[j].nodes[P[j].nodes.length-1].id&&(typeof P[j].tags<"u"&&u(P[j].tags)||P[j].__is_bounds_placeholder)&&(Ce="Polygon",Se=[Se]);var pe={type:"Feature",id:P[j].type+"/"+P[j].id,properties:{type:P[j].type,id:P[j].id,tags:P[j].tags||{},relations:B.way[P[j].id]||[],meta:C(P[j])},geometry:{type:Ce,coordinates:Se}};P[j].tainted&&(t.verbose&&console.warn("Way",P[j].type+"/"+P[j].id,"is tainted"),pe.properties.tainted=!0),P[j].__is_bounds_placeholder&&(pe.properties.geometry="bounds"),i?i(xm(pe)):Ce=="LineString"?oe.push(pe):ce.push(pe)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ce),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(Fe){Fe.properties=Pn.merge(Fe.properties.meta,Fe.properties.tags,{id:Fe.properties.type+"/"+Fe.properties.id})}),ve=xm(ve),ve)}function u(S){var P=t.polygonFeatures;if(typeof P=="function")return P(S);if(S.area==="no")return!1;for(var M in S){var b=S[M],C=P[M];if(!(typeof C>"u")&&b!=="no"&&(C===!0||C.included_values&&C.included_values[b]===!0||C.excluded_values&&C.excluded_values[b]!==!0))return!0}return!1}};function hv(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,C){return b!==void 0&&C!==void 0&&b.id===C.id},c=[],p,m,u,S,P,M;e.length;)for(p=e.pop().nodes.slice(),c.push(p);e.length&&!a(t(p),i(p));){for(m=t(p),u=i(p),S=0;S<e.length;S++)if(M=e[S].nodes,a(u,t(M))){P=p.push,M=M.slice(1);break}else if(a(u,i(M))){P=p.push,M=M.slice(0,-1).reverse();break}else if(a(m,i(M))){P=p.unshift,M=M.slice(0,-1);break}else if(a(m,t(M))){P=p.unshift,M=M.slice(1).reverse();break}else M=P=null;if(!M)break;e.splice(S,1),P.apply(p,M)}return c}Ug.toGeojson=Ug;var x5=Ug;const w5=qf(x5),dv={type:"FeatureCollection",features:[]},BI=()=>{const[e,t]=gt.useState(!1),i=gt.useCallback(async(m,u,S)=>{var j,he;if(e||(console.log(S),S<16))return dv;t(!0);let P=300;S>17&&(P=200),S>18&&(P=100),S>19&&(P=50),console.log("overpass: loading...");let M="[out:json]";M+=`[timeout:25];
`,M+='nwr["building"]',M+=`(around:${P},${m},${u});
`,M+="out meta geom;",console.log(M);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(M)}`,{});if(b.status!==200)return t(!1),dv;const C=await b.json();console.log("overpass json elements: ",C.elements);const O=w5(C);console.log("overpass osmtogeojson raw: ",O);for await(const q of O.features){if(!q.properties)continue;q.id=q.properties.id.split("/")[1];const X=(j=C.elements.filter(ae=>q.id?typeof q.id=="number"?ae.id===q.id:ae.id===parseInt(q.id):!1))==null?void 0:j[0];if(X&&(q.properties.tags=X.tags,q.properties.nodes=X.nodes),q.geometry.type==="Polygon"){const ae=o5(q.geometry.coordinates);var $=h5(ae);q.properties.center=$.geometry.coordinates}q.geometry.type==="Point"&&(q.properties.center=q.geometry.coordinates);const G=q.properties.uid;if(G){let ae=localStorage.getItem(G+"-icon");if(ae===null){const K=await Fs.getUser(G);(he=K.img)!=null&&he.href?(ae=K.img.href,localStorage.setItem(G+"-icon",K.img.href)):localStorage.setItem(G+"-icon","")}q.properties.userIconHref=ae||""}}return console.log("overpass osmtogeojson converted: ",O),console.log("overpass: loaded."),t(!1),O},[]),[a,c]=gt.useState(!1),p=gt.useCallback(async m=>{console.log("overpass: loading...",m),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${m.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(S.status!==200){c(!1);return}const P=await S.json();console.log("overpass json parent elements: ",P.elements);const M=250,b=`
      [out:json]
      [timeout:25];
      node(id:${m.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${M});
      out;
      `;console.log(b);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(C.status!==200){c(!1);return}const O=await C.json();console.log("overpass json child elements: ",O.elements);const $=`
      [out:json]
      [timeout:25];
      node(id:${m.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${M});
      out;
      `;console.log($);const j=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent($)}`,{});if(j.status!==200){c(!1);return}const he=await j.json();return console.log("overpass json neighbour elements: ",he.elements),c(!1),[...P.elements,...O.elements,...he.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:p,loadingOverpass:e,loadingOverpassAdmin:a}},b5=()=>mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),mt.jsxs("datalist",{id:"source-list",children:[mt.jsx("option",{value:"survey"}),mt.jsx("option",{value:"local knowledge"}),mt.jsx("option",{value:"extrapolation"}),mt.jsx("option",{value:"estimation from existing data"})]})]}),fv={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},S5=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,pe,oe;const{detectCountry:a,loadingCountry:c}=d5(),{fetchOverpassAdmin:p,loadingOverpassAdmin:m}=BI(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[S,P]=gt.useState(void 0),[M,b]=gt.useState(),[C,O]=gt.useState(e),[$,j]=gt.useState(!1),[he,q]=gt.useState(!1),[X,G]=gt.useState(!1),[ae,K]=gt.useState(),[Z,T]=gt.useState();gt.useEffect(()=>{j(Fs.isLoggedIn())},[]),gt.useEffect(()=>{(async()=>{var ee,re;const ce=await a(u[0],u[1]);if(P(ce),(ee=ce==null?void 0:ce.properties)!=null&&ee.ISO_A3&&mE[ce.properties.ISO_A3]){const fe=mE[ce.properties.ISO_A3];b(fe);const Se=fe.defaultComment+" "+((re=e.properties)==null?void 0:re.id);T(Se)}})()},[e]),gt.useEffect(()=>{console.log(C.properties)},[C]);const L=gt.useCallback(async()=>{const ce=await EP.openReverseGeocoder([u[0],u[1]]);O(ee=>{const re={properties:{"addr:province":ce.prefecture,"addr:city":ce.city,...ee.properties}};return ee.properties=re.properties,ee})},[]),B=gt.useCallback(async()=>{if(!C.properties)return;C.properties.nodes;const ce=await p(JSON.parse(C.properties.nodes));console.log("onOverpassReverseGeocode",ce),K(ce)},[C]),te=gt.useCallback(async ce=>{var Ae,Fe,Ze;G(!0),ce.preventDefault();const ee=new FormData(ce.currentTarget),re=JSON.parse((Ae=e.properties)==null?void 0:Ae.tags);ee.forEach((We,it)=>{typeof We=="string"&&We.length>0&&it!=="comment"&&it!=="source"&&(re[it]=We)});const fe={type:"way",id:e.id,version:(Fe=e.properties)==null?void 0:Fe.version,tags:re,nodes:JSON.parse((Ze=e.properties)==null?void 0:Ze.nodes)};console.info(JSON.stringify(fe,null,2));const Se={create:[],modify:[fe],delete:[]},Ce=ee.get("comment");Ce&&(fv.comment=Ce.toString());const Ue=ee.get("source");Ue&&(fv.source=Ue.toString()),await Fs.uploadChangeset(fv,Se),G(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),H=gt.useCallback(()=>{q(!0)},[]);return C.properties?mt.jsxs("div",{children:[mt.jsxs("div",{children:["OSM:"," ",mt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+C.properties.id,target:"_blank",children:C.properties.id})," | ",mt.jsx(wP,{feature:C}),M&&mt.jsxs("span",{children:[" | ","Address:"," ",mt.jsx(f5,{feature:C,fields:M})]})]}),c?mt.jsx(eu,{icon:E_,spin:!0}):mt.jsx(mt.Fragment,{children:M?mt.jsxs("form",{onSubmit:te,children:[mt.jsx("div",{className:"flex flex-wrap",children:mt.jsx(cv,{feature:C,fieldOption:M.postcodeField,onChange:H})}),mt.jsx("div",{className:"flex flex-wrap",children:M.mainFields.map(ce=>mt.jsx(cv,{feature:C,fieldOption:ce,onChange:H,suggestList:ae},ce.key))}),mt.jsx("div",{className:"flex flex-wrap",children:M.detailFields.map(ce=>mt.jsx(cv,{feature:C,fieldOption:ce,onChange:H},ce.key))}),mt.jsxs("div",{className:"flex flex-wrap",children:[mt.jsx(b5,{}),mt.jsx(p5,{defaultValue:Z})]}),mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=S==null?void 0:S.properties)==null?void 0:_e.ISO_A3)==="JPN"&&mt.jsx("button",{type:"button",onClick:L,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),mt.jsxs("button",{type:"button",disabled:m,onClick:B,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",m&&mt.jsx(eu,{icon:E_,spin:!0})]}),mt.jsx("button",{disabled:!$||X||!he,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!$&&mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),mt.jsx(xP,{})]})]})})]}):mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[mt.jsxs("div",{className:"py-2",children:[mt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(pe=S==null?void 0:S.properties)==null?void 0:pe.NAME," (ISO code:",(oe=S==null?void 0:S.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),mt.jsx("p",{children:mt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function E5(e,t){const[i,a]=gt.useState(e);return gt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const T5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},C5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function P5(){const e=gt.useRef(null),[t,i]=gt.useState(),a=E5(t,2500),c=gt.useRef(null),[p,m]=gt.useState({type:"FeatureCollection",features:[]}),[u,S]=gt.useState("auto"),[P,M]=gt.useState(),[b,C]=gt.useState([]),{fetchOverpassBuildings:O,loadingOverpass:$}=BI();gt.useEffect(()=>{setTimeout(()=>{var T;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(T=c.current)==null||T.trigger())},500)},[]);const j=gt.useCallback(T=>{const L=T.target.getCenter(),B=T.target.getZoom();i({zoom:B,latitude:L.lat,longitude:L.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),he=gt.useCallback(T=>{i(T.viewState)},[]),q=gt.useCallback(T=>{i(T.viewState)},[]);gt.useEffect(()=>{(async()=>{if(!a)return;const T=a,L=await O(T.latitude,T.longitude,T.zoom);m(L)})()},[a]);const X=gt.useCallback(T=>{var ve;S("pointer");const{features:L,point:{x:B,y:te}}=T,H=L&&L[0];H?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:H.id},{hover:!0}),M({feature:H,x:B,y:te})):M(void 0)},[]),G=gt.useCallback(T=>{var L;S("auto"),(L=e.current)==null||L.querySourceFeatures("buildings-source").map(B=>{var te;(te=e.current)==null||te.setFeatureState({source:"buildings-source",id:B.id},{hover:!1})}),M(void 0)},[]),ae=gt.useCallback(T=>{var B;K();const L=T.features&&T.features[0];L&&((B=e.current)==null||B.setFeatureState({source:"buildings-source",id:L.id},{select:!0}),C([L]))},[]),K=gt.useCallback(()=>{var T;(T=e.current)==null||T.querySourceFeatures("buildings-source").map(L=>{var B;(B=e.current)==null||B.setFeatureState({source:"buildings-source",id:L.id},{select:!1})}),C([])},[]),Z=gt.useMemo(()=>{let T=25;return t&&(T=t.zoom<18?20:t.zoom<19?25:35),p.features.map((L,B)=>!L.properties||!L.properties.center?null:mt.jsx(Z4,{style:{cursor:"pointer"},longitude:L.properties.center[0],latitude:L.properties.center[1],anchor:"center",children:mt.jsx(Ej,{feature:L,size:T})},`marker-${B}`))},[p,t]);return mt.jsxs("div",{children:[mt.jsx(ij,{}),mt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:mt.jsx(Pj,{viewState:t})}),mt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&mt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:mt.jsx("div",{style:{padding:"10px"},children:b.map(T=>mt.jsx(S5,{feature:T,onCancel:K,onSubmit:K},T.id))})}),mt.jsxs(G4,{ref:e,...t,onMove:he,onMoveEnd:q,onLoad:j,interactiveLayerIds:["buildings-layer-fill"],onClick:ae,onMouseEnter:X,onMouseLeave:G,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:RC,style:{width:"100%",height:"100%"},mapStyle:T5,children:[mt.jsx(K4,{id:"buildings-source",type:"geojson",data:p,children:mt.jsx(X4,{...C5})}),mt.jsx(W4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),mt.jsx(H4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),mt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?mt.jsx(eu,{size:"2x",icon:nj}):$?mt.jsx(eu,{size:"2x",icon:E_,spin:!0}):mt.jsx(eu,{size:"2x",icon:ej})}),Z,P&&mt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:P.x+5,top:P.y+5},children:[mt.jsx(wP,{feature:P.feature}),mt.jsx("br",{}),mt.jsx(Tj,{feature:P.feature}),mt.jsx(oj,{feature:P.feature})]})]})]})]})}var NI={},gy={};gy.byteLength=M5;gy.toByteArray=z5;gy.fromByteArray=R5;var ca=[],os=[],I5=typeof Uint8Array<"u"?Uint8Array:Array,pv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Jc=0,A5=pv.length;Jc<A5;++Jc)ca[Jc]=pv[Jc],os[pv.charCodeAt(Jc)]=Jc;os[45]=62;os[95]=63;function UI(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function M5(e){var t=UI(e),i=t[0],a=t[1];return(i+a)*3/4-a}function k5(e,t,i){return(t+i)*3/4-i}function z5(e){var t,i=UI(e),a=i[0],c=i[1],p=new I5(k5(e,a,c)),m=0,u=c>0?a-4:a,S;for(S=0;S<u;S+=4)t=os[e.charCodeAt(S)]<<18|os[e.charCodeAt(S+1)]<<12|os[e.charCodeAt(S+2)]<<6|os[e.charCodeAt(S+3)],p[m++]=t>>16&255,p[m++]=t>>8&255,p[m++]=t&255;return c===2&&(t=os[e.charCodeAt(S)]<<2|os[e.charCodeAt(S+1)]>>4,p[m++]=t&255),c===1&&(t=os[e.charCodeAt(S)]<<10|os[e.charCodeAt(S+1)]<<4|os[e.charCodeAt(S+2)]>>2,p[m++]=t>>8&255,p[m++]=t&255),p}function F5(e){return ca[e>>18&63]+ca[e>>12&63]+ca[e>>6&63]+ca[e&63]}function j5(e,t,i){for(var a,c=[],p=t;p<i;p+=3)a=(e[p]<<16&16711680)+(e[p+1]<<8&65280)+(e[p+2]&255),c.push(F5(a));return c.join("")}function R5(e){for(var t,i=e.length,a=i%3,c=[],p=16383,m=0,u=i-a;m<u;m+=p)c.push(j5(e,m,m+p>u?u:m+p));return a===1?(t=e[i-1],c.push(ca[t>>2]+ca[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ca[t>>10]+ca[t>>4&63]+ca[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=gy,i=hy,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=X,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=p(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function p(){try{const ue=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(ue,k),ue.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function m(ue){if(ue>c)throw new RangeError('The value "'+ue+'" is invalid for option "size"');const k=new Uint8Array(ue);return Object.setPrototypeOf(k,u.prototype),k}function u(ue,k,V){if(typeof ue=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ue)}return S(ue,k,V)}u.poolSize=8192;function S(ue,k,V){if(typeof ue=="string")return C(ue,k);if(ArrayBuffer.isView(ue))return $(ue);if(ue==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(D(ue,ArrayBuffer)||ue&&D(ue.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(ue,SharedArrayBuffer)||ue&&D(ue.buffer,SharedArrayBuffer)))return j(ue,k,V);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Te=ue.valueOf&&ue.valueOf();if(Te!=null&&Te!==ue)return u.from(Te,k,V);const Ve=he(ue);if(Ve)return Ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return u.from(ue[Symbol.toPrimitive]("string"),k,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}u.from=function(ue,k,V){return S(ue,k,V)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function P(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function M(ue,k,V){return P(ue),ue<=0?m(ue):k!==void 0?typeof V=="string"?m(ue).fill(k,V):m(ue).fill(k):m(ue)}u.alloc=function(ue,k,V){return M(ue,k,V)};function b(ue){return P(ue),m(ue<0?0:q(ue)|0)}u.allocUnsafe=function(ue){return b(ue)},u.allocUnsafeSlow=function(ue){return b(ue)};function C(ue,k){if((typeof k!="string"||k==="")&&(k="utf8"),!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const V=G(ue,k)|0;let Te=m(V);const Ve=Te.write(ue,k);return Ve!==V&&(Te=Te.slice(0,Ve)),Te}function O(ue){const k=ue.length<0?0:q(ue.length)|0,V=m(k);for(let Te=0;Te<k;Te+=1)V[Te]=ue[Te]&255;return V}function $(ue){if(D(ue,Uint8Array)){const k=new Uint8Array(ue);return j(k.buffer,k.byteOffset,k.byteLength)}return O(ue)}function j(ue,k,V){if(k<0||ue.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<k+(V||0))throw new RangeError('"length" is outside of buffer bounds');let Te;return k===void 0&&V===void 0?Te=new Uint8Array(ue):V===void 0?Te=new Uint8Array(ue,k):Te=new Uint8Array(ue,k,V),Object.setPrototypeOf(Te,u.prototype),Te}function he(ue){if(u.isBuffer(ue)){const k=q(ue.length)|0,V=m(k);return V.length===0||ue.copy(V,0,0,k),V}if(ue.length!==void 0)return typeof ue.length!="number"||ge(ue.length)?m(0):O(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return O(ue.data)}function q(ue){if(ue>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ue|0}function X(ue){return+ue!=ue&&(ue=0),u.alloc(+ue)}u.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==u.prototype},u.compare=function(k,V){if(D(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),D(V,Uint8Array)&&(V=u.from(V,V.offset,V.byteLength)),!u.isBuffer(k)||!u.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===V)return 0;let Te=k.length,Ve=V.length;for(let rt=0,Ge=Math.min(Te,Ve);rt<Ge;++rt)if(k[rt]!==V[rt]){Te=k[rt],Ve=V[rt];break}return Te<Ve?-1:Ve<Te?1:0},u.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(k,V){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return u.alloc(0);let Te;if(V===void 0)for(V=0,Te=0;Te<k.length;++Te)V+=k[Te].length;const Ve=u.allocUnsafe(V);let rt=0;for(Te=0;Te<k.length;++Te){let Ge=k[Te];if(D(Ge,Uint8Array))rt+Ge.length>Ve.length?(u.isBuffer(Ge)||(Ge=u.from(Ge)),Ge.copy(Ve,rt)):Uint8Array.prototype.set.call(Ve,Ge,rt);else if(u.isBuffer(Ge))Ge.copy(Ve,rt);else throw new TypeError('"list" argument must be an Array of Buffers');rt+=Ge.length}return Ve};function G(ue,k){if(u.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||D(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);const V=ue.length,Te=arguments.length>2&&arguments[2]===!0;if(!Te&&V===0)return 0;let Ve=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return _n(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return Ee(ue).length;default:if(Ve)return Te?-1:_n(ue).length;k=(""+k).toLowerCase(),Ve=!0}}u.byteLength=G;function ae(ue,k,V){let Te=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,k>>>=0,V<=k))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return fe(this,k,V);case"utf8":case"utf-8":return pe(this,k,V);case"ascii":return ee(this,k,V);case"latin1":case"binary":return re(this,k,V);case"base64":return _e(this,k,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,k,V);default:if(Te)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),Te=!0}}u.prototype._isBuffer=!0;function K(ue,k,V){const Te=ue[k];ue[k]=ue[V],ue[V]=Te}u.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<k;V+=2)K(this,V,V+1);return this},u.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<k;V+=4)K(this,V,V+3),K(this,V+1,V+2);return this},u.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<k;V+=8)K(this,V,V+7),K(this,V+1,V+6),K(this,V+2,V+5),K(this,V+3,V+4);return this},u.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?pe(this,0,k):ae.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(k){if(!u.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:u.compare(this,k)===0},u.prototype.inspect=function(){let k="";const V=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(k+=" ... "),"<Buffer "+k+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(k,V,Te,Ve,rt){if(D(k,Uint8Array)&&(k=u.from(k,k.offset,k.byteLength)),!u.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(V===void 0&&(V=0),Te===void 0&&(Te=k?k.length:0),Ve===void 0&&(Ve=0),rt===void 0&&(rt=this.length),V<0||Te>k.length||Ve<0||rt>this.length)throw new RangeError("out of range index");if(Ve>=rt&&V>=Te)return 0;if(Ve>=rt)return-1;if(V>=Te)return 1;if(V>>>=0,Te>>>=0,Ve>>>=0,rt>>>=0,this===k)return 0;let Ge=rt-Ve,Et=Te-V;const It=Math.min(Ge,Et),yn=this.slice(Ve,rt),Sn=k.slice(V,Te);for(let zt=0;zt<It;++zt)if(yn[zt]!==Sn[zt]){Ge=yn[zt],Et=Sn[zt];break}return Ge<Et?-1:Et<Ge?1:0};function Z(ue,k,V,Te,Ve){if(ue.length===0)return-1;if(typeof V=="string"?(Te=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,ge(V)&&(V=Ve?0:ue.length-1),V<0&&(V=ue.length+V),V>=ue.length){if(Ve)return-1;V=ue.length-1}else if(V<0)if(Ve)V=0;else return-1;if(typeof k=="string"&&(k=u.from(k,Te)),u.isBuffer(k))return k.length===0?-1:T(ue,k,V,Te,Ve);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?Ve?Uint8Array.prototype.indexOf.call(ue,k,V):Uint8Array.prototype.lastIndexOf.call(ue,k,V):T(ue,[k],V,Te,Ve);throw new TypeError("val must be string, number or Buffer")}function T(ue,k,V,Te,Ve){let rt=1,Ge=ue.length,Et=k.length;if(Te!==void 0&&(Te=String(Te).toLowerCase(),Te==="ucs2"||Te==="ucs-2"||Te==="utf16le"||Te==="utf-16le")){if(ue.length<2||k.length<2)return-1;rt=2,Ge/=2,Et/=2,V/=2}function It(Sn,zt){return rt===1?Sn[zt]:Sn.readUInt16BE(zt*rt)}let yn;if(Ve){let Sn=-1;for(yn=V;yn<Ge;yn++)if(It(ue,yn)===It(k,Sn===-1?0:yn-Sn)){if(Sn===-1&&(Sn=yn),yn-Sn+1===Et)return Sn*rt}else Sn!==-1&&(yn-=yn-Sn),Sn=-1}else for(V+Et>Ge&&(V=Ge-Et),yn=V;yn>=0;yn--){let Sn=!0;for(let zt=0;zt<Et;zt++)if(It(ue,yn+zt)!==It(k,zt)){Sn=!1;break}if(Sn)return yn}return-1}u.prototype.includes=function(k,V,Te){return this.indexOf(k,V,Te)!==-1},u.prototype.indexOf=function(k,V,Te){return Z(this,k,V,Te,!0)},u.prototype.lastIndexOf=function(k,V,Te){return Z(this,k,V,Te,!1)};function L(ue,k,V,Te){V=Number(V)||0;const Ve=ue.length-V;Te?(Te=Number(Te),Te>Ve&&(Te=Ve)):Te=Ve;const rt=k.length;Te>rt/2&&(Te=rt/2);let Ge;for(Ge=0;Ge<Te;++Ge){const Et=parseInt(k.substr(Ge*2,2),16);if(ge(Et))return Ge;ue[V+Ge]=Et}return Ge}function B(ue,k,V,Te){return N(_n(k,ue.length-V),ue,V,Te)}function te(ue,k,V,Te){return N(un(k),ue,V,Te)}function H(ue,k,V,Te){return N(Ee(k),ue,V,Te)}function ve(ue,k,V,Te){return N(Vt(k,ue.length-V),ue,V,Te)}u.prototype.write=function(k,V,Te,Ve){if(V===void 0)Ve="utf8",Te=this.length,V=0;else if(Te===void 0&&typeof V=="string")Ve=V,Te=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(Te)?(Te=Te>>>0,Ve===void 0&&(Ve="utf8")):(Ve=Te,Te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const rt=this.length-V;if((Te===void 0||Te>rt)&&(Te=rt),k.length>0&&(Te<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ve||(Ve="utf8");let Ge=!1;for(;;)switch(Ve){case"hex":return L(this,k,V,Te);case"utf8":case"utf-8":return B(this,k,V,Te);case"ascii":case"latin1":case"binary":return te(this,k,V,Te);case"base64":return H(this,k,V,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,k,V,Te);default:if(Ge)throw new TypeError("Unknown encoding: "+Ve);Ve=(""+Ve).toLowerCase(),Ge=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ue,k,V){return k===0&&V===ue.length?t.fromByteArray(ue):t.fromByteArray(ue.slice(k,V))}function pe(ue,k,V){V=Math.min(ue.length,V);const Te=[];let Ve=k;for(;Ve<V;){const rt=ue[Ve];let Ge=null,Et=rt>239?4:rt>223?3:rt>191?2:1;if(Ve+Et<=V){let It,yn,Sn,zt;switch(Et){case 1:rt<128&&(Ge=rt);break;case 2:It=ue[Ve+1],(It&192)===128&&(zt=(rt&31)<<6|It&63,zt>127&&(Ge=zt));break;case 3:It=ue[Ve+1],yn=ue[Ve+2],(It&192)===128&&(yn&192)===128&&(zt=(rt&15)<<12|(It&63)<<6|yn&63,zt>2047&&(zt<55296||zt>57343)&&(Ge=zt));break;case 4:It=ue[Ve+1],yn=ue[Ve+2],Sn=ue[Ve+3],(It&192)===128&&(yn&192)===128&&(Sn&192)===128&&(zt=(rt&15)<<18|(It&63)<<12|(yn&63)<<6|Sn&63,zt>65535&&zt<1114112&&(Ge=zt))}}Ge===null?(Ge=65533,Et=1):Ge>65535&&(Ge-=65536,Te.push(Ge>>>10&1023|55296),Ge=56320|Ge&1023),Te.push(Ge),Ve+=Et}return ce(Te)}const oe=4096;function ce(ue){const k=ue.length;if(k<=oe)return String.fromCharCode.apply(String,ue);let V="",Te=0;for(;Te<k;)V+=String.fromCharCode.apply(String,ue.slice(Te,Te+=oe));return V}function ee(ue,k,V){let Te="";V=Math.min(ue.length,V);for(let Ve=k;Ve<V;++Ve)Te+=String.fromCharCode(ue[Ve]&127);return Te}function re(ue,k,V){let Te="";V=Math.min(ue.length,V);for(let Ve=k;Ve<V;++Ve)Te+=String.fromCharCode(ue[Ve]);return Te}function fe(ue,k,V){const Te=ue.length;(!k||k<0)&&(k=0),(!V||V<0||V>Te)&&(V=Te);let Ve="";for(let rt=k;rt<V;++rt)Ve+=He[ue[rt]];return Ve}function Se(ue,k,V){const Te=ue.slice(k,V);let Ve="";for(let rt=0;rt<Te.length-1;rt+=2)Ve+=String.fromCharCode(Te[rt]+Te[rt+1]*256);return Ve}u.prototype.slice=function(k,V){const Te=this.length;k=~~k,V=V===void 0?Te:~~V,k<0?(k+=Te,k<0&&(k=0)):k>Te&&(k=Te),V<0?(V+=Te,V<0&&(V=0)):V>Te&&(V=Te),V<k&&(V=k);const Ve=this.subarray(k,V);return Object.setPrototypeOf(Ve,u.prototype),Ve};function Ce(ue,k,V){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+k>V)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(k,V,Te){k=k>>>0,V=V>>>0,Te||Ce(k,V,this.length);let Ve=this[k],rt=1,Ge=0;for(;++Ge<V&&(rt*=256);)Ve+=this[k+Ge]*rt;return Ve},u.prototype.readUintBE=u.prototype.readUIntBE=function(k,V,Te){k=k>>>0,V=V>>>0,Te||Ce(k,V,this.length);let Ve=this[k+--V],rt=1;for(;V>0&&(rt*=256);)Ve+=this[k+--V]*rt;return Ve},u.prototype.readUint8=u.prototype.readUInt8=function(k,V){return k=k>>>0,V||Ce(k,1,this.length),this[k]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(k,V){return k=k>>>0,V||Ce(k,2,this.length),this[k]|this[k+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(k,V){return k=k>>>0,V||Ce(k,2,this.length),this[k]<<8|this[k+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(k,V){return k=k>>>0,V||Ce(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(k,V){return k=k>>>0,V||Ce(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},u.prototype.readBigUInt64LE=et(function(k){k=k>>>0,Wt(k,"offset");const V=this[k],Te=this[k+7];(V===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=V+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,rt=this[++k]+this[++k]*2**8+this[++k]*2**16+Te*2**24;return BigInt(Ve)+(BigInt(rt)<<BigInt(32))}),u.prototype.readBigUInt64BE=et(function(k){k=k>>>0,Wt(k,"offset");const V=this[k],Te=this[k+7];(V===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=V*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],rt=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Te;return(BigInt(Ve)<<BigInt(32))+BigInt(rt)}),u.prototype.readIntLE=function(k,V,Te){k=k>>>0,V=V>>>0,Te||Ce(k,V,this.length);let Ve=this[k],rt=1,Ge=0;for(;++Ge<V&&(rt*=256);)Ve+=this[k+Ge]*rt;return rt*=128,Ve>=rt&&(Ve-=Math.pow(2,8*V)),Ve},u.prototype.readIntBE=function(k,V,Te){k=k>>>0,V=V>>>0,Te||Ce(k,V,this.length);let Ve=V,rt=1,Ge=this[k+--Ve];for(;Ve>0&&(rt*=256);)Ge+=this[k+--Ve]*rt;return rt*=128,Ge>=rt&&(Ge-=Math.pow(2,8*V)),Ge},u.prototype.readInt8=function(k,V){return k=k>>>0,V||Ce(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},u.prototype.readInt16LE=function(k,V){k=k>>>0,V||Ce(k,2,this.length);const Te=this[k]|this[k+1]<<8;return Te&32768?Te|4294901760:Te},u.prototype.readInt16BE=function(k,V){k=k>>>0,V||Ce(k,2,this.length);const Te=this[k+1]|this[k]<<8;return Te&32768?Te|4294901760:Te},u.prototype.readInt32LE=function(k,V){return k=k>>>0,V||Ce(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},u.prototype.readInt32BE=function(k,V){return k=k>>>0,V||Ce(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},u.prototype.readBigInt64LE=et(function(k){k=k>>>0,Wt(k,"offset");const V=this[k],Te=this[k+7];(V===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(Te<<24);return(BigInt(Ve)<<BigInt(32))+BigInt(V+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),u.prototype.readBigInt64BE=et(function(k){k=k>>>0,Wt(k,"offset");const V=this[k],Te=this[k+7];(V===void 0||Te===void 0)&&Ht(k,this.length-8);const Ve=(V<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(Ve)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+Te)}),u.prototype.readFloatLE=function(k,V){return k=k>>>0,V||Ce(k,4,this.length),i.read(this,k,!0,23,4)},u.prototype.readFloatBE=function(k,V){return k=k>>>0,V||Ce(k,4,this.length),i.read(this,k,!1,23,4)},u.prototype.readDoubleLE=function(k,V){return k=k>>>0,V||Ce(k,8,this.length),i.read(this,k,!0,52,8)},u.prototype.readDoubleBE=function(k,V){return k=k>>>0,V||Ce(k,8,this.length),i.read(this,k,!1,52,8)};function Ue(ue,k,V,Te,Ve,rt){if(!u.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>Ve||k<rt)throw new RangeError('"value" argument is out of bounds');if(V+Te>ue.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(k,V,Te,Ve){if(k=+k,V=V>>>0,Te=Te>>>0,!Ve){const Et=Math.pow(2,8*Te)-1;Ue(this,k,V,Te,Et,0)}let rt=1,Ge=0;for(this[V]=k&255;++Ge<Te&&(rt*=256);)this[V+Ge]=k/rt&255;return V+Te},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(k,V,Te,Ve){if(k=+k,V=V>>>0,Te=Te>>>0,!Ve){const Et=Math.pow(2,8*Te)-1;Ue(this,k,V,Te,Et,0)}let rt=Te-1,Ge=1;for(this[V+rt]=k&255;--rt>=0&&(Ge*=256);)this[V+rt]=k/Ge&255;return V+Te},u.prototype.writeUint8=u.prototype.writeUInt8=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,1,255,0),this[V]=k&255,V+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,2,65535,0),this[V]=k&255,this[V+1]=k>>>8,V+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,2,65535,0),this[V]=k>>>8,this[V+1]=k&255,V+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,4,4294967295,0),this[V+3]=k>>>24,this[V+2]=k>>>16,this[V+1]=k>>>8,this[V]=k&255,V+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,4,4294967295,0),this[V]=k>>>24,this[V+1]=k>>>16,this[V+2]=k>>>8,this[V+3]=k&255,V+4};function Ae(ue,k,V,Te,Ve){xt(k,Te,Ve,ue,V,7);let rt=Number(k&BigInt(4294967295));ue[V++]=rt,rt=rt>>8,ue[V++]=rt,rt=rt>>8,ue[V++]=rt,rt=rt>>8,ue[V++]=rt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return ue[V++]=Ge,Ge=Ge>>8,ue[V++]=Ge,Ge=Ge>>8,ue[V++]=Ge,Ge=Ge>>8,ue[V++]=Ge,V}function Fe(ue,k,V,Te,Ve){xt(k,Te,Ve,ue,V,7);let rt=Number(k&BigInt(4294967295));ue[V+7]=rt,rt=rt>>8,ue[V+6]=rt,rt=rt>>8,ue[V+5]=rt,rt=rt>>8,ue[V+4]=rt;let Ge=Number(k>>BigInt(32)&BigInt(4294967295));return ue[V+3]=Ge,Ge=Ge>>8,ue[V+2]=Ge,Ge=Ge>>8,ue[V+1]=Ge,Ge=Ge>>8,ue[V]=Ge,V+8}u.prototype.writeBigUInt64LE=et(function(k,V=0){return Ae(this,k,V,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=et(function(k,V=0){return Fe(this,k,V,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(k,V,Te,Ve){if(k=+k,V=V>>>0,!Ve){const It=Math.pow(2,8*Te-1);Ue(this,k,V,Te,It-1,-It)}let rt=0,Ge=1,Et=0;for(this[V]=k&255;++rt<Te&&(Ge*=256);)k<0&&Et===0&&this[V+rt-1]!==0&&(Et=1),this[V+rt]=(k/Ge>>0)-Et&255;return V+Te},u.prototype.writeIntBE=function(k,V,Te,Ve){if(k=+k,V=V>>>0,!Ve){const It=Math.pow(2,8*Te-1);Ue(this,k,V,Te,It-1,-It)}let rt=Te-1,Ge=1,Et=0;for(this[V+rt]=k&255;--rt>=0&&(Ge*=256);)k<0&&Et===0&&this[V+rt+1]!==0&&(Et=1),this[V+rt]=(k/Ge>>0)-Et&255;return V+Te},u.prototype.writeInt8=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,1,127,-128),k<0&&(k=255+k+1),this[V]=k&255,V+1},u.prototype.writeInt16LE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,2,32767,-32768),this[V]=k&255,this[V+1]=k>>>8,V+2},u.prototype.writeInt16BE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,2,32767,-32768),this[V]=k>>>8,this[V+1]=k&255,V+2},u.prototype.writeInt32LE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,4,2147483647,-2147483648),this[V]=k&255,this[V+1]=k>>>8,this[V+2]=k>>>16,this[V+3]=k>>>24,V+4},u.prototype.writeInt32BE=function(k,V,Te){return k=+k,V=V>>>0,Te||Ue(this,k,V,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[V]=k>>>24,this[V+1]=k>>>16,this[V+2]=k>>>8,this[V+3]=k&255,V+4},u.prototype.writeBigInt64LE=et(function(k,V=0){return Ae(this,k,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=et(function(k,V=0){return Fe(this,k,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ze(ue,k,V,Te,Ve,rt){if(V+Te>ue.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function We(ue,k,V,Te,Ve){return k=+k,V=V>>>0,Ve||Ze(ue,k,V,4),i.write(ue,k,V,Te,23,4),V+4}u.prototype.writeFloatLE=function(k,V,Te){return We(this,k,V,!0,Te)},u.prototype.writeFloatBE=function(k,V,Te){return We(this,k,V,!1,Te)};function it(ue,k,V,Te,Ve){return k=+k,V=V>>>0,Ve||Ze(ue,k,V,8),i.write(ue,k,V,Te,52,8),V+8}u.prototype.writeDoubleLE=function(k,V,Te){return it(this,k,V,!0,Te)},u.prototype.writeDoubleBE=function(k,V,Te){return it(this,k,V,!1,Te)},u.prototype.copy=function(k,V,Te,Ve){if(!u.isBuffer(k))throw new TypeError("argument should be a Buffer");if(Te||(Te=0),!Ve&&Ve!==0&&(Ve=this.length),V>=k.length&&(V=k.length),V||(V=0),Ve>0&&Ve<Te&&(Ve=Te),Ve===Te||k.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("sourceEnd out of bounds");Ve>this.length&&(Ve=this.length),k.length-V<Ve-Te&&(Ve=k.length-V+Te);const rt=Ve-Te;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(V,Te,Ve):Uint8Array.prototype.set.call(k,this.subarray(Te,Ve),V),rt},u.prototype.fill=function(k,V,Te,Ve){if(typeof k=="string"){if(typeof V=="string"?(Ve=V,V=0,Te=this.length):typeof Te=="string"&&(Ve=Te,Te=this.length),Ve!==void 0&&typeof Ve!="string")throw new TypeError("encoding must be a string");if(typeof Ve=="string"&&!u.isEncoding(Ve))throw new TypeError("Unknown encoding: "+Ve);if(k.length===1){const Ge=k.charCodeAt(0);(Ve==="utf8"&&Ge<128||Ve==="latin1")&&(k=Ge)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(V<0||this.length<V||this.length<Te)throw new RangeError("Out of range index");if(Te<=V)return this;V=V>>>0,Te=Te===void 0?this.length:Te>>>0,k||(k=0);let rt;if(typeof k=="number")for(rt=V;rt<Te;++rt)this[rt]=k;else{const Ge=u.isBuffer(k)?k:u.from(k,Ve),Et=Ge.length;if(Et===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(rt=0;rt<Te-V;++rt)this[rt+V]=Ge[rt%Et]}return this};const ct={};function vt(ue,k,V){ct[ue]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ue}]`,this.stack,delete this.name}get code(){return ue}set code(Ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ve,writable:!0})}toString(){return`${this.name} [${ue}]: ${this.message}`}}}vt("ERR_BUFFER_OUT_OF_BOUNDS",function(ue){return ue?`${ue} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),vt("ERR_INVALID_ARG_TYPE",function(ue,k){return`The "${ue}" argument must be of type number. Received type ${typeof k}`},TypeError),vt("ERR_OUT_OF_RANGE",function(ue,k,V){let Te=`The value of "${ue}" is out of range.`,Ve=V;return Number.isInteger(V)&&Math.abs(V)>2**32?Ve=Mt(String(V)):typeof V=="bigint"&&(Ve=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(Ve=Mt(Ve)),Ve+="n"),Te+=` It must be ${k}. Received ${Ve}`,Te},RangeError);function Mt(ue){let k="",V=ue.length;const Te=ue[0]==="-"?1:0;for(;V>=Te+4;V-=3)k=`_${ue.slice(V-3,V)}${k}`;return`${ue.slice(0,V)}${k}`}function pt(ue,k,V){Wt(k,"offset"),(ue[k]===void 0||ue[k+V]===void 0)&&Ht(k,ue.length-(V+1))}function xt(ue,k,V,Te,Ve,rt){if(ue>V||ue<k){const Ge=typeof k=="bigint"?"n":"";let Et;throw k===0||k===BigInt(0)?Et=`>= 0${Ge} and < 2${Ge} ** ${(rt+1)*8}${Ge}`:Et=`>= -(2${Ge} ** ${(rt+1)*8-1}${Ge}) and < 2 ** ${(rt+1)*8-1}${Ge}`,new ct.ERR_OUT_OF_RANGE("value",Et,ue)}pt(Te,Ve,rt)}function Wt(ue,k){if(typeof ue!="number")throw new ct.ERR_INVALID_ARG_TYPE(k,"number",ue)}function Ht(ue,k,V){throw Math.floor(ue)!==ue?(Wt(ue,V),new ct.ERR_OUT_OF_RANGE("offset","an integer",ue)):k<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${k}`,ue)}const ln=/[^+/0-9A-Za-z-_]/g;function Qe(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(ln,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function _n(ue,k){k=k||1/0;let V;const Te=ue.length;let Ve=null;const rt=[];for(let Ge=0;Ge<Te;++Ge){if(V=ue.charCodeAt(Ge),V>55295&&V<57344){if(!Ve){if(V>56319){(k-=3)>-1&&rt.push(239,191,189);continue}else if(Ge+1===Te){(k-=3)>-1&&rt.push(239,191,189);continue}Ve=V;continue}if(V<56320){(k-=3)>-1&&rt.push(239,191,189),Ve=V;continue}V=(Ve-55296<<10|V-56320)+65536}else Ve&&(k-=3)>-1&&rt.push(239,191,189);if(Ve=null,V<128){if((k-=1)<0)break;rt.push(V)}else if(V<2048){if((k-=2)<0)break;rt.push(V>>6|192,V&63|128)}else if(V<65536){if((k-=3)<0)break;rt.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((k-=4)<0)break;rt.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return rt}function un(ue){const k=[];for(let V=0;V<ue.length;++V)k.push(ue.charCodeAt(V)&255);return k}function Vt(ue,k){let V,Te,Ve;const rt=[];for(let Ge=0;Ge<ue.length&&!((k-=2)<0);++Ge)V=ue.charCodeAt(Ge),Te=V>>8,Ve=V%256,rt.push(Ve),rt.push(Te);return rt}function Ee(ue){return t.toByteArray(Qe(ue))}function N(ue,k,V,Te){let Ve;for(Ve=0;Ve<Te&&!(Ve+V>=k.length||Ve>=ue.length);++Ve)k[Ve+V]=ue[Ve];return Ve}function D(ue,k){return ue instanceof k||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===k.name}function ge(ue){return ue!==ue}const He=function(){const ue="0123456789abcdef",k=new Array(256);for(let V=0;V<16;++V){const Te=V*16;for(let Ve=0;Ve<16;++Ve)k[Te+Ve]=ue[V]+ue[Ve]}return k}();function et(ue){return typeof BigInt>"u"?ht:ue}function ht(){throw new Error("BigInt not supported")}})(NI);window.Buffer=NI.Buffer;o4.render(mt.jsx(s1.StrictMode,{children:mt.jsx(P5,{})}),document.getElementById("root"));

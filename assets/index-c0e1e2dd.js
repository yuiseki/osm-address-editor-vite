function kP(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var d=Function.bind.apply(t,c);return new d}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var EE={exports:{}},ng={},SE={exports:{}},jn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd=Symbol.for("react.element"),zP=Symbol.for("react.portal"),LP=Symbol.for("react.fragment"),RP=Symbol.for("react.strict_mode"),OP=Symbol.for("react.profiler"),FP=Symbol.for("react.provider"),jP=Symbol.for("react.context"),DP=Symbol.for("react.forward_ref"),BP=Symbol.for("react.suspense"),NP=Symbol.for("react.memo"),UP=Symbol.for("react.lazy"),Iw=Symbol.iterator;function $P(e){return e===null||typeof e!="object"?null:(e=Iw&&e[Iw]||e["@@iterator"],typeof e=="function"?e:null)}var TE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CE=Object.assign,IE={};function mh(e,t,i){this.props=e,this.context=t,this.refs=IE,this.updater=i||TE}mh.prototype.isReactComponent={};mh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function AE(){}AE.prototype=mh.prototype;function f_(e,t,i){this.props=e,this.context=t,this.refs=IE,this.updater=i||TE}var d_=f_.prototype=new AE;d_.constructor=f_;CE(d_,mh.prototype);d_.isPureReactComponent=!0;var Aw=Array.isArray,PE=Object.prototype.hasOwnProperty,p_={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function kE(e,t,i){var a,c={},d=null,y=null;if(t!=null)for(a in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(d=""+t.key),t)PE.call(t,a)&&!ME.hasOwnProperty(a)&&(c[a]=t[a]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(a in l=e.defaultProps,l)c[a]===void 0&&(c[a]=l[a]);return{$$typeof:dd,type:e,key:d,ref:y,props:c,_owner:p_.current}}function VP(e,t){return{$$typeof:dd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function m_(e){return typeof e=="object"&&e!==null&&e.$$typeof===dd}function GP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Pw=/\/+/g;function Ey(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GP(""+e.key):t.toString(36)}function kp(e,t,i,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(d){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case dd:case zP:y=!0}}if(y)return y=e,c=c(y),e=a===""?"."+Ey(y,0):a,Aw(c)?(i="",e!=null&&(i=e.replace(Pw,"$&/")+"/"),kp(c,t,i,"",function(w){return w})):c!=null&&(m_(c)&&(c=VP(c,i+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(Pw,"$&/")+"/")+e)),t.push(c)),1;if(y=0,a=a===""?".":a+":",Aw(e))for(var l=0;l<e.length;l++){d=e[l];var b=a+Ey(d,l);y+=kp(d,t,i,b,c)}else if(b=$P(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=a+Ey(d,l++),y+=kp(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function np(e,t,i){if(e==null)return e;var a=[],c=0;return kp(e,a,"","",function(d){return t.call(i,d,c++)}),a}function ZP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var eo={current:null},zp={transition:null},WP={ReactCurrentDispatcher:eo,ReactCurrentBatchConfig:zp,ReactCurrentOwner:p_};jn.Children={map:np,forEach:function(e,t,i){np(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return np(e,function(){t++}),t},toArray:function(e){return np(e,function(t){return t})||[]},only:function(e){if(!m_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jn.Component=mh;jn.Fragment=LP;jn.Profiler=OP;jn.PureComponent=f_;jn.StrictMode=RP;jn.Suspense=BP;jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WP;jn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=CE({},e.props),c=e.key,d=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,y=p_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)PE.call(t,b)&&!ME.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=i;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];a.children=l}return{$$typeof:dd,type:e.type,key:c,ref:d,props:a,_owner:y}};jn.createContext=function(e){return e={$$typeof:jP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FP,_context:e},e.Consumer=e};jn.createElement=kE;jn.createFactory=function(e){var t=kE.bind(null,e);return t.type=e,t};jn.createRef=function(){return{current:null}};jn.forwardRef=function(e){return{$$typeof:DP,render:e}};jn.isValidElement=m_;jn.lazy=function(e){return{$$typeof:UP,_payload:{_status:-1,_result:e},_init:ZP}};jn.memo=function(e,t){return{$$typeof:NP,type:e,compare:t===void 0?null:t}};jn.startTransition=function(e){var t=zp.transition;zp.transition={};try{e()}finally{zp.transition=t}};jn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jn.useCallback=function(e,t){return eo.current.useCallback(e,t)};jn.useContext=function(e){return eo.current.useContext(e)};jn.useDebugValue=function(){};jn.useDeferredValue=function(e){return eo.current.useDeferredValue(e)};jn.useEffect=function(e,t){return eo.current.useEffect(e,t)};jn.useId=function(){return eo.current.useId()};jn.useImperativeHandle=function(e,t,i){return eo.current.useImperativeHandle(e,t,i)};jn.useInsertionEffect=function(e,t){return eo.current.useInsertionEffect(e,t)};jn.useLayoutEffect=function(e,t){return eo.current.useLayoutEffect(e,t)};jn.useMemo=function(e,t){return eo.current.useMemo(e,t)};jn.useReducer=function(e,t,i){return eo.current.useReducer(e,t,i)};jn.useRef=function(e){return eo.current.useRef(e)};jn.useState=function(e){return eo.current.useState(e)};jn.useSyncExternalStore=function(e,t,i){return eo.current.useSyncExternalStore(e,t,i)};jn.useTransition=function(){return eo.current.useTransition()};jn.version="18.2.0";SE.exports=jn;var yt=SE.exports;const zE=fd(yt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HP=yt,XP=Symbol.for("react.element"),qP=Symbol.for("react.fragment"),KP=Object.prototype.hasOwnProperty,YP=HP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JP={key:!0,ref:!0,__self:!0,__source:!0};function LE(e,t,i){var a,c={},d=null,y=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(y=t.ref);for(a in t)KP.call(t,a)&&!JP.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:XP,type:e,key:d,ref:y,props:c,_owner:YP.current}}ng.Fragment=qP;ng.jsx=LE;ng.jsxs=LE;EE.exports=ng;var mt=EE.exports,RE={exports:{}},zo={},OE={exports:{}},FE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,me){var we=ie.length;ie.push(me);e:for(;0<we;){var _e=we-1>>>1,$e=ie[_e];if(0<c($e,me))ie[_e]=me,ie[we]=$e,we=_e;else break e}}function i(ie){return ie.length===0?null:ie[0]}function a(ie){if(ie.length===0)return null;var me=ie[0],we=ie.pop();if(we!==me){ie[0]=we;e:for(var _e=0,$e=ie.length,ke=$e>>>1;_e<ke;){var Le=2*(_e+1)-1,Xe=ie[Le],Ve=Le+1,ot=ie[Ve];if(0>c(Xe,we))Ve<$e&&0>c(ot,Xe)?(ie[_e]=ot,ie[Ve]=we,_e=Ve):(ie[_e]=Xe,ie[Le]=we,_e=Le);else if(Ve<$e&&0>c(ot,we))ie[_e]=ot,ie[Ve]=we,_e=Ve;else break e}}return me}function c(ie,me){var we=ie.sortIndex-me.sortIndex;return we!==0?we:ie.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var b=[],w=[],C=1,E=null,z=3,O=!1,Q=!1,K=!1,pe=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(ie){for(var me=i(w);me!==null;){if(me.callback===null)a(w);else if(me.startTime<=ie)a(w),me.sortIndex=me.expirationTime,t(b,me);else break;me=i(w)}}function oe(ie){if(K=!1,B(ie),!Q)if(i(b)!==null)Q=!0,ae(W);else{var me=i(w);me!==null&&re(oe,me.startTime-ie)}}function W(ie,me){Q=!1,K&&(K=!1,G(P),P=-1),O=!0;var we=z;try{for(B(me),E=i(b);E!==null&&(!(E.expirationTime>me)||ie&&!H());){var _e=E.callback;if(typeof _e=="function"){E.callback=null,z=E.priorityLevel;var $e=_e(E.expirationTime<=me);me=e.unstable_now(),typeof $e=="function"?E.callback=$e:E===i(b)&&a(b),B(me)}else a(b);E=i(b)}if(E!==null)var ke=!0;else{var Le=i(w);Le!==null&&re(oe,Le.startTime-me),ke=!1}return ke}finally{E=null,z=we,O=!1}}var D=!1,S=null,P=-1,Z=5,J=-1;function H(){return!(e.unstable_now()-J<Z)}function ye(){if(S!==null){var ie=e.unstable_now();J=ie;var me=!0;try{me=S(!0,ie)}finally{me?ve():(D=!1,S=null)}}else D=!1}var ve;if(typeof V=="function")ve=function(){V(ye)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,te=xe.port2;xe.port1.onmessage=ye,ve=function(){te.postMessage(null)}}else ve=function(){pe(ye,0)};function ae(ie){S=ie,D||(D=!0,ve())}function re(ie,me){P=pe(function(){ie(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){Q||O||(Q=!0,ae(W))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(ie){switch(z){case 1:case 2:case 3:var me=3;break;default:me=z}var we=z;z=me;try{return ie()}finally{z=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,me){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var we=z;z=ie;try{return me()}finally{z=we}},e.unstable_scheduleCallback=function(ie,me,we){var _e=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?_e+we:_e):we=_e,ie){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=we+$e,ie={id:C++,callback:me,priorityLevel:ie,startTime:we,expirationTime:$e,sortIndex:-1},we>_e?(ie.sortIndex=we,t(w,ie),i(b)===null&&ie===i(w)&&(K?(G(P),P=-1):K=!0,re(oe,we-_e))):(ie.sortIndex=$e,t(b,ie),Q||O||(Q=!0,ae(W))),ie},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(ie){var me=z;return function(){var we=z;z=me;try{return ie.apply(this,arguments)}finally{z=we}}}})(FE);OE.exports=FE;var QP=OE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE=yt,ko=QP;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DE=new Set,Gf={};function Lu(e,t){rh(e,t),rh(e+"Capture",t)}function rh(e,t){for(Gf[e]=t,e=0;e<t.length;e++)DE.add(t[e])}var Ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A0=Object.prototype.hasOwnProperty,eM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mw={},kw={};function tM(e){return A0.call(kw,e)?!0:A0.call(Mw,e)?!1:eM.test(e)?kw[e]=!0:(Mw[e]=!0,!1)}function nM(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function rM(e,t,i,a){if(t===null||typeof t>"u"||nM(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function to(e,t,i,a,c,d,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=y}var bi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bi[e]=new to(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bi[t]=new to(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bi[e]=new to(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bi[e]=new to(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bi[e]=new to(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bi[e]=new to(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bi[e]=new to(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bi[e]=new to(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bi[e]=new to(e,5,!1,e.toLowerCase(),null,!1,!1)});var g_=/[\-:]([a-z])/g;function y_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g_,y_);bi[t]=new to(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g_,y_);bi[t]=new to(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g_,y_);bi[t]=new to(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bi[e]=new to(e,1,!1,e.toLowerCase(),null,!1,!1)});bi.xlinkHref=new to("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bi[e]=new to(e,1,!1,e.toLowerCase(),null,!0,!0)});function v_(e,t,i,a){var c=bi.hasOwnProperty(t)?bi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(rM(t,i,c,a)&&(i=null),a||c===null?tM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var Oa=jE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rp=Symbol.for("react.element"),kc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),__=Symbol.for("react.strict_mode"),P0=Symbol.for("react.profiler"),BE=Symbol.for("react.provider"),NE=Symbol.for("react.context"),x_=Symbol.for("react.forward_ref"),M0=Symbol.for("react.suspense"),k0=Symbol.for("react.suspense_list"),w_=Symbol.for("react.memo"),hl=Symbol.for("react.lazy"),UE=Symbol.for("react.offscreen"),zw=Symbol.iterator;function af(e){return e===null||typeof e!="object"?null:(e=zw&&e[zw]||e["@@iterator"],typeof e=="function"?e:null)}var Ir=Object.assign,Sy;function gf(e){if(Sy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Sy=t&&t[1]||""}return`
`+Sy+e}var Ty=!1;function Cy(e,t){if(!e||Ty)return"";Ty=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=a.stack.split(`
`),y=c.length-1,l=d.length-1;1<=y&&0<=l&&c[y]!==d[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==d[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==d[l]){var b=`
`+c[y].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=y&&0<=l);break}}}finally{Ty=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?gf(e):""}function iM(e){switch(e.tag){case 5:return gf(e.type);case 16:return gf("Lazy");case 13:return gf("Suspense");case 19:return gf("SuspenseList");case 0:case 2:case 15:return e=Cy(e.type,!1),e;case 11:return e=Cy(e.type.render,!1),e;case 1:return e=Cy(e.type,!0),e;default:return""}}function z0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zc:return"Fragment";case kc:return"Portal";case P0:return"Profiler";case __:return"StrictMode";case M0:return"Suspense";case k0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NE:return(e.displayName||"Context")+".Consumer";case BE:return(e._context.displayName||"Context")+".Provider";case x_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case w_:return t=e.displayName||null,t!==null?t:z0(e.type)||"Memo";case hl:t=e._payload,e=e._init;try{return z0(e(t))}catch{}}return null}function oM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z0(t);case 8:return t===__?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $E(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sM(e){var t=$E(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){a=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(y){a=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ip(e){e._valueTracker||(e._valueTracker=sM(e))}function VE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=$E(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Qp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function L0(e,t){var i=t.checked;return Ir({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Lw(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=Pl(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GE(e,t){t=t.checked,t!=null&&v_(e,"checked",t,!1)}function R0(e,t){GE(e,t);var i=Pl(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?O0(e,t.type,i):t.hasOwnProperty("defaultValue")&&O0(e,t.type,Pl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function O0(e,t,i){(t!=="number"||Qp(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var yf=Array.isArray;function Xc(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Pl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function F0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Ir({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ow(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(yf(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Pl(i)}}function ZE(e,t){var i=Pl(t.value),a=Pl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Fw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function WE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?WE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var op,HE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(op=op||document.createElement("div"),op.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=op.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Af={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aM=["Webkit","ms","Moz","O"];Object.keys(Af).forEach(function(e){aM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Af[t]=Af[e]})});function XE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Af.hasOwnProperty(e)&&Af[e]?(""+t).trim():t+"px"}function qE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=XE(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var lM=Ir({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D0(e,t){if(t){if(lM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function B0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N0=null;function b_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var U0=null,qc=null,Kc=null;function jw(e){if(e=gd(e)){if(typeof U0!="function")throw Error(At(280));var t=e.stateNode;t&&(t=ag(t),U0(e.stateNode,e.type,t))}}function KE(e){qc?Kc?Kc.push(e):Kc=[e]:qc=e}function YE(){if(qc){var e=qc,t=Kc;if(Kc=qc=null,jw(e),t)for(e=0;e<t.length;e++)jw(t[e])}}function JE(e,t){return e(t)}function QE(){}var Iy=!1;function eS(e,t,i){if(Iy)return e(t,i);Iy=!0;try{return JE(e,t,i)}finally{Iy=!1,(qc!==null||Kc!==null)&&(QE(),YE())}}function Wf(e,t){var i=e.stateNode;if(i===null)return null;var a=ag(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var $0=!1;if(Ia)try{var lf={};Object.defineProperty(lf,"passive",{get:function(){$0=!0}}),window.addEventListener("test",lf,lf),window.removeEventListener("test",lf,lf)}catch{$0=!1}function uM(e,t,i,a,c,d,y,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(C){this.onError(C)}}var Pf=!1,em=null,tm=!1,V0=null,cM={onError:function(e){Pf=!0,em=e}};function hM(e,t,i,a,c,d,y,l,b){Pf=!1,em=null,uM.apply(cM,arguments)}function fM(e,t,i,a,c,d,y,l,b){if(hM.apply(this,arguments),Pf){if(Pf){var w=em;Pf=!1,em=null}else throw Error(At(198));tm||(tm=!0,V0=w)}}function Ru(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function tS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dw(e){if(Ru(e)!==e)throw Error(At(188))}function dM(e){var t=e.alternate;if(!t){if(t=Ru(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return Dw(c),e;if(d===a)return Dw(c),t;d=d.sibling}throw Error(At(188))}if(i.return!==a.return)i=c,a=d;else{for(var y=!1,l=c.child;l;){if(l===i){y=!0,i=c,a=d;break}if(l===a){y=!0,a=c,i=d;break}l=l.sibling}if(!y){for(l=d.child;l;){if(l===i){y=!0,i=d,a=c;break}if(l===a){y=!0,a=d,i=c;break}l=l.sibling}if(!y)throw Error(At(189))}}if(i.alternate!==a)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function nS(e){return e=dM(e),e!==null?rS(e):null}function rS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rS(e);if(t!==null)return t;e=e.sibling}return null}var iS=ko.unstable_scheduleCallback,Bw=ko.unstable_cancelCallback,pM=ko.unstable_shouldYield,mM=ko.unstable_requestPaint,Ur=ko.unstable_now,gM=ko.unstable_getCurrentPriorityLevel,E_=ko.unstable_ImmediatePriority,oS=ko.unstable_UserBlockingPriority,nm=ko.unstable_NormalPriority,yM=ko.unstable_LowPriority,sS=ko.unstable_IdlePriority,rg=null,Ws=null;function vM(e){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(rg,e,void 0,(e.current.flags&128)===128)}catch{}}var bs=Math.clz32?Math.clz32:wM,_M=Math.log,xM=Math.LN2;function wM(e){return e>>>=0,e===0?32:31-(_M(e)/xM|0)|0}var sp=64,ap=4194304;function vf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rm(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,d=e.pingedLanes,y=i&268435455;if(y!==0){var l=y&~c;l!==0?a=vf(l):(d&=y,d!==0&&(a=vf(d)))}else y=i&~c,y!==0?a=vf(y):d!==0&&(a=vf(d));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-bs(t),c=1<<i,a|=e[i],t&=~c;return a}function bM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var y=31-bs(d),l=1<<y,b=c[y];b===-1?(!(l&i)||l&a)&&(c[y]=bM(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function G0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aS(){var e=sp;return sp<<=1,!(sp&4194240)&&(sp=64),e}function Ay(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function pd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bs(t),e[t]=i}function SM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-bs(i),d=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~d}}function S_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-bs(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Qn=0;function lS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uS,T_,cS,hS,fS,Z0=!1,lp=[],wl=null,bl=null,El=null,Hf=new Map,Xf=new Map,ml=[],TM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nw(e,t){switch(e){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":bl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":Hf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xf.delete(t.pointerId)}}function uf(e,t,i,a,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[c]},t!==null&&(t=gd(t),t!==null&&T_(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function CM(e,t,i,a,c){switch(t){case"focusin":return wl=uf(wl,e,t,i,a,c),!0;case"dragenter":return bl=uf(bl,e,t,i,a,c),!0;case"mouseover":return El=uf(El,e,t,i,a,c),!0;case"pointerover":var d=c.pointerId;return Hf.set(d,uf(Hf.get(d)||null,e,t,i,a,c)),!0;case"gotpointercapture":return d=c.pointerId,Xf.set(d,uf(Xf.get(d)||null,e,t,i,a,c)),!0}return!1}function dS(e){var t=vu(e.target);if(t!==null){var i=Ru(t);if(i!==null){if(t=i.tag,t===13){if(t=tS(i),t!==null){e.blockedOn=t,fS(e.priority,function(){cS(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=W0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);N0=a,i.target.dispatchEvent(a),N0=null}else return t=gd(i),t!==null&&T_(t),e.blockedOn=i,!1;t.shift()}return!0}function Uw(e,t,i){Lp(e)&&i.delete(t)}function IM(){Z0=!1,wl!==null&&Lp(wl)&&(wl=null),bl!==null&&Lp(bl)&&(bl=null),El!==null&&Lp(El)&&(El=null),Hf.forEach(Uw),Xf.forEach(Uw)}function cf(e,t){e.blockedOn===t&&(e.blockedOn=null,Z0||(Z0=!0,ko.unstable_scheduleCallback(ko.unstable_NormalPriority,IM)))}function qf(e){function t(c){return cf(c,e)}if(0<lp.length){cf(lp[0],e);for(var i=1;i<lp.length;i++){var a=lp[i];a.blockedOn===e&&(a.blockedOn=null)}}for(wl!==null&&cf(wl,e),bl!==null&&cf(bl,e),El!==null&&cf(El,e),Hf.forEach(t),Xf.forEach(t),i=0;i<ml.length;i++)a=ml[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<ml.length&&(i=ml[0],i.blockedOn===null);)dS(i),i.blockedOn===null&&ml.shift()}var Yc=Oa.ReactCurrentBatchConfig,im=!0;function AM(e,t,i,a){var c=Qn,d=Yc.transition;Yc.transition=null;try{Qn=1,C_(e,t,i,a)}finally{Qn=c,Yc.transition=d}}function PM(e,t,i,a){var c=Qn,d=Yc.transition;Yc.transition=null;try{Qn=4,C_(e,t,i,a)}finally{Qn=c,Yc.transition=d}}function C_(e,t,i,a){if(im){var c=W0(e,t,i,a);if(c===null)Dy(e,t,a,om,i),Nw(e,a);else if(CM(c,e,t,i,a))a.stopPropagation();else if(Nw(e,a),t&4&&-1<TM.indexOf(e)){for(;c!==null;){var d=gd(c);if(d!==null&&uS(d),d=W0(e,t,i,a),d===null&&Dy(e,t,a,om,i),d===c)break;c=d}c!==null&&a.stopPropagation()}else Dy(e,t,a,null,i)}}var om=null;function W0(e,t,i,a){if(om=null,e=b_(a),e=vu(e),e!==null)if(t=Ru(e),t===null)e=null;else if(i=t.tag,i===13){if(e=tS(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return om=e,null}function pS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gM()){case E_:return 1;case oS:return 4;case nm:case yM:return 16;case sS:return 536870912;default:return 16}default:return 16}}var vl=null,I_=null,Rp=null;function mS(){if(Rp)return Rp;var e,t=I_,i=t.length,a,c="value"in vl?vl.value:vl.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var y=i-e;for(a=1;a<=y&&t[i-a]===c[d-a];a++);return Rp=c.slice(e,1<a?1-a:void 0)}function Op(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function up(){return!0}function $w(){return!1}function Lo(e){function t(i,a,c,d,y){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?up:$w,this.isPropagationStopped=$w,this}return Ir(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=up)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=up)},persist:function(){},isPersistent:up}),t}var gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},A_=Lo(gh),md=Ir({},gh,{view:0,detail:0}),MM=Lo(md),Py,My,hf,ig=Ir({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hf&&(hf&&e.type==="mousemove"?(Py=e.screenX-hf.screenX,My=e.screenY-hf.screenY):My=Py=0,hf=e),Py)},movementY:function(e){return"movementY"in e?e.movementY:My}}),Vw=Lo(ig),kM=Ir({},ig,{dataTransfer:0}),zM=Lo(kM),LM=Ir({},md,{relatedTarget:0}),ky=Lo(LM),RM=Ir({},gh,{animationName:0,elapsedTime:0,pseudoElement:0}),OM=Lo(RM),FM=Ir({},gh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jM=Lo(FM),DM=Ir({},gh,{data:0}),Gw=Lo(DM),BM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $M(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=UM[e])?!!t[e]:!1}function P_(){return $M}var VM=Ir({},md,{key:function(e){if(e.key){var t=BM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Op(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?NM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P_,charCode:function(e){return e.type==="keypress"?Op(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Op(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),GM=Lo(VM),ZM=Ir({},ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zw=Lo(ZM),WM=Ir({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P_}),HM=Lo(WM),XM=Ir({},gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),qM=Lo(XM),KM=Ir({},ig,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),YM=Lo(KM),JM=[9,13,27,32],M_=Ia&&"CompositionEvent"in window,Mf=null;Ia&&"documentMode"in document&&(Mf=document.documentMode);var QM=Ia&&"TextEvent"in window&&!Mf,gS=Ia&&(!M_||Mf&&8<Mf&&11>=Mf),Ww=String.fromCharCode(32),Hw=!1;function yS(e,t){switch(e){case"keyup":return JM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lc=!1;function ek(e,t){switch(e){case"compositionend":return vS(t);case"keypress":return t.which!==32?null:(Hw=!0,Ww);case"textInput":return e=t.data,e===Ww&&Hw?null:e;default:return null}}function tk(e,t){if(Lc)return e==="compositionend"||!M_&&yS(e,t)?(e=mS(),Rp=I_=vl=null,Lc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gS&&t.locale!=="ko"?null:t.data;default:return null}}var nk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nk[e.type]:t==="textarea"}function _S(e,t,i,a){KE(a),t=sm(t,"onChange"),0<t.length&&(i=new A_("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var kf=null,Kf=null;function rk(e){MS(e,0)}function og(e){var t=Fc(e);if(VE(t))return e}function ik(e,t){if(e==="change")return t}var xS=!1;if(Ia){var zy;if(Ia){var Ly="oninput"in document;if(!Ly){var qw=document.createElement("div");qw.setAttribute("oninput","return;"),Ly=typeof qw.oninput=="function"}zy=Ly}else zy=!1;xS=zy&&(!document.documentMode||9<document.documentMode)}function Kw(){kf&&(kf.detachEvent("onpropertychange",wS),Kf=kf=null)}function wS(e){if(e.propertyName==="value"&&og(Kf)){var t=[];_S(t,Kf,e,b_(e)),eS(rk,t)}}function ok(e,t,i){e==="focusin"?(Kw(),kf=t,Kf=i,kf.attachEvent("onpropertychange",wS)):e==="focusout"&&Kw()}function sk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return og(Kf)}function ak(e,t){if(e==="click")return og(t)}function lk(e,t){if(e==="input"||e==="change")return og(t)}function uk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ss=typeof Object.is=="function"?Object.is:uk;function Yf(e,t){if(Ss(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!A0.call(t,c)||!Ss(e[c],t[c]))return!1}return!0}function Yw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jw(e,t){var i=Yw(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Yw(i)}}function bS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ES(){for(var e=window,t=Qp();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Qp(e.document)}return t}function k_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ck(e){var t=ES(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&bS(i.ownerDocument.documentElement,i)){if(a!==null&&k_(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(a.start,c);a=a.end===void 0?d:Math.min(a.end,c),!e.extend&&d>a&&(c=a,a=d,d=c),c=Jw(i,d);var y=Jw(i,a);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hk=Ia&&"documentMode"in document&&11>=document.documentMode,Rc=null,H0=null,zf=null,X0=!1;function Qw(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;X0||Rc==null||Rc!==Qp(a)||(a=Rc,"selectionStart"in a&&k_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),zf&&Yf(zf,a)||(zf=a,a=sm(H0,"onSelect"),0<a.length&&(t=new A_("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Rc)))}function cp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Oc={animationend:cp("Animation","AnimationEnd"),animationiteration:cp("Animation","AnimationIteration"),animationstart:cp("Animation","AnimationStart"),transitionend:cp("Transition","TransitionEnd")},Ry={},SS={};Ia&&(SS=document.createElement("div").style,"AnimationEvent"in window||(delete Oc.animationend.animation,delete Oc.animationiteration.animation,delete Oc.animationstart.animation),"TransitionEvent"in window||delete Oc.transitionend.transition);function sg(e){if(Ry[e])return Ry[e];if(!Oc[e])return e;var t=Oc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in SS)return Ry[e]=t[i];return e}var TS=sg("animationend"),CS=sg("animationiteration"),IS=sg("animationstart"),AS=sg("transitionend"),PS=new Map,eb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(e,t){PS.set(e,t),Lu(t,[e])}for(var Oy=0;Oy<eb.length;Oy++){var Fy=eb[Oy],fk=Fy.toLowerCase(),dk=Fy[0].toUpperCase()+Fy.slice(1);Rl(fk,"on"+dk)}Rl(TS,"onAnimationEnd");Rl(CS,"onAnimationIteration");Rl(IS,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(AS,"onTransitionEnd");rh("onMouseEnter",["mouseout","mouseover"]);rh("onMouseLeave",["mouseout","mouseover"]);rh("onPointerEnter",["pointerout","pointerover"]);rh("onPointerLeave",["pointerout","pointerover"]);Lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _f="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pk=new Set("cancel close invalid load scroll toggle".split(" ").concat(_f));function tb(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,fM(a,t,void 0,e),e.currentTarget=null}function MS(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var y=a.length-1;0<=y;y--){var l=a[y],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;tb(c,l,w),d=b}else for(y=0;y<a.length;y++){if(l=a[y],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;tb(c,l,w),d=b}}}if(tm)throw e=V0,tm=!1,V0=null,e}function fr(e,t){var i=t[Q0];i===void 0&&(i=t[Q0]=new Set);var a=e+"__bubble";i.has(a)||(kS(t,e,2,!1),i.add(a))}function jy(e,t,i){var a=0;t&&(a|=4),kS(i,e,a,t)}var hp="_reactListening"+Math.random().toString(36).slice(2);function Jf(e){if(!e[hp]){e[hp]=!0,DE.forEach(function(i){i!=="selectionchange"&&(pk.has(i)||jy(i,!1,e),jy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hp]||(t[hp]=!0,jy("selectionchange",!1,t))}}function kS(e,t,i,a){switch(pS(t)){case 1:var c=AM;break;case 4:c=PM;break;default:c=C_}i=c.bind(null,t,i,e),c=void 0,!$0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Dy(e,t,i,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var y=a.tag;if(y===3||y===4){var l=a.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=a.return;y!==null;){var b=y.tag;if((b===3||b===4)&&(b=y.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;y=y.return}for(;l!==null;){if(y=vu(l),y===null)return;if(b=y.tag,b===5||b===6){a=d=y;continue e}l=l.parentNode}}a=a.return}eS(function(){var w=d,C=b_(i),E=[];e:{var z=PS.get(e);if(z!==void 0){var O=A_,Q=e;switch(e){case"keypress":if(Op(i)===0)break e;case"keydown":case"keyup":O=GM;break;case"focusin":Q="focus",O=ky;break;case"focusout":Q="blur",O=ky;break;case"beforeblur":case"afterblur":O=ky;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Vw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=zM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=HM;break;case TS:case CS:case IS:O=OM;break;case AS:O=qM;break;case"scroll":O=MM;break;case"wheel":O=YM;break;case"copy":case"cut":case"paste":O=jM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Zw}var K=(t&4)!==0,pe=!K&&e==="scroll",G=K?z!==null?z+"Capture":null:z;K=[];for(var V=w,B;V!==null;){B=V;var oe=B.stateNode;if(B.tag===5&&oe!==null&&(B=oe,G!==null&&(oe=Wf(V,G),oe!=null&&K.push(Qf(V,oe,B)))),pe)break;V=V.return}0<K.length&&(z=new O(z,Q,null,i,C),E.push({event:z,listeners:K}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",z&&i!==N0&&(Q=i.relatedTarget||i.fromElement)&&(vu(Q)||Q[Aa]))break e;if((O||z)&&(z=C.window===C?C:(z=C.ownerDocument)?z.defaultView||z.parentWindow:window,O?(Q=i.relatedTarget||i.toElement,O=w,Q=Q?vu(Q):null,Q!==null&&(pe=Ru(Q),Q!==pe||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(O=null,Q=w),O!==Q)){if(K=Vw,oe="onMouseLeave",G="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(K=Zw,oe="onPointerLeave",G="onPointerEnter",V="pointer"),pe=O==null?z:Fc(O),B=Q==null?z:Fc(Q),z=new K(oe,V+"leave",O,i,C),z.target=pe,z.relatedTarget=B,oe=null,vu(C)===w&&(K=new K(G,V+"enter",Q,i,C),K.target=B,K.relatedTarget=pe,oe=K),pe=oe,O&&Q)t:{for(K=O,G=Q,V=0,B=K;B;B=Ec(B))V++;for(B=0,oe=G;oe;oe=Ec(oe))B++;for(;0<V-B;)K=Ec(K),V--;for(;0<B-V;)G=Ec(G),B--;for(;V--;){if(K===G||G!==null&&K===G.alternate)break t;K=Ec(K),G=Ec(G)}K=null}else K=null;O!==null&&nb(E,z,O,K,!1),Q!==null&&pe!==null&&nb(E,pe,Q,K,!0)}}e:{if(z=w?Fc(w):window,O=z.nodeName&&z.nodeName.toLowerCase(),O==="select"||O==="input"&&z.type==="file")var W=ik;else if(Xw(z))if(xS)W=lk;else{W=sk;var D=ok}else(O=z.nodeName)&&O.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(W=ak);if(W&&(W=W(e,w))){_S(E,W,i,C);break e}D&&D(e,z,w),e==="focusout"&&(D=z._wrapperState)&&D.controlled&&z.type==="number"&&O0(z,"number",z.value)}switch(D=w?Fc(w):window,e){case"focusin":(Xw(D)||D.contentEditable==="true")&&(Rc=D,H0=w,zf=null);break;case"focusout":zf=H0=Rc=null;break;case"mousedown":X0=!0;break;case"contextmenu":case"mouseup":case"dragend":X0=!1,Qw(E,i,C);break;case"selectionchange":if(hk)break;case"keydown":case"keyup":Qw(E,i,C)}var S;if(M_)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Lc?yS(e,i)&&(P="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(P="onCompositionStart");P&&(gS&&i.locale!=="ko"&&(Lc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Lc&&(S=mS()):(vl=C,I_="value"in vl?vl.value:vl.textContent,Lc=!0)),D=sm(w,P),0<D.length&&(P=new Gw(P,e,null,i,C),E.push({event:P,listeners:D}),S?P.data=S:(S=vS(i),S!==null&&(P.data=S)))),(S=QM?ek(e,i):tk(e,i))&&(w=sm(w,"onBeforeInput"),0<w.length&&(C=new Gw("onBeforeInput","beforeinput",null,i,C),E.push({event:C,listeners:w}),C.data=S))}MS(E,t)})}function Qf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function sm(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Wf(e,i),d!=null&&a.unshift(Qf(e,d,c)),d=Wf(e,t),d!=null&&a.push(Qf(e,d,c))),e=e.return}return a}function Ec(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nb(e,t,i,a,c){for(var d=t._reactName,y=[];i!==null&&i!==a;){var l=i,b=l.alternate,w=l.stateNode;if(b!==null&&b===a)break;l.tag===5&&w!==null&&(l=w,c?(b=Wf(i,d),b!=null&&y.unshift(Qf(i,b,l))):c||(b=Wf(i,d),b!=null&&y.push(Qf(i,b,l)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var mk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function rb(e){return(typeof e=="string"?e:""+e).replace(mk,`
`).replace(gk,"")}function fp(e,t,i){if(t=rb(t),rb(e)!==t&&i)throw Error(At(425))}function am(){}var q0=null,K0=null;function Y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var J0=typeof setTimeout=="function"?setTimeout:void 0,yk=typeof clearTimeout=="function"?clearTimeout:void 0,ib=typeof Promise=="function"?Promise:void 0,vk=typeof queueMicrotask=="function"?queueMicrotask:typeof ib<"u"?function(e){return ib.resolve(null).then(e).catch(_k)}:J0;function _k(e){setTimeout(function(){throw e})}function By(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),qf(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);qf(t)}function Sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ob(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var yh=Math.random().toString(36).slice(2),Us="__reactFiber$"+yh,ed="__reactProps$"+yh,Aa="__reactContainer$"+yh,Q0="__reactEvents$"+yh,xk="__reactListeners$"+yh,wk="__reactHandles$"+yh;function vu(e){var t=e[Us];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Aa]||i[Us]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=ob(e);e!==null;){if(i=e[Us])return i;e=ob(e)}return t}e=i,i=e.parentNode}return null}function gd(e){return e=e[Us]||e[Aa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function ag(e){return e[ed]||null}var ev=[],jc=-1;function Ol(e){return{current:e}}function dr(e){0>jc||(e.current=ev[jc],ev[jc]=null,jc--)}function ur(e,t){jc++,ev[jc]=e.current,e.current=t}var Ml={},Oi=Ol(Ml),po=Ol(!1),Su=Ml;function ih(e,t){var i=e.type.contextTypes;if(!i)return Ml;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function mo(e){return e=e.childContextTypes,e!=null}function lm(){dr(po),dr(Oi)}function sb(e,t,i){if(Oi.current!==Ml)throw Error(At(168));ur(Oi,t),ur(po,i)}function zS(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(At(108,oM(e)||"Unknown",c));return Ir({},i,a)}function um(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ml,Su=Oi.current,ur(Oi,e),ur(po,po.current),!0}function ab(e,t,i){var a=e.stateNode;if(!a)throw Error(At(169));i?(e=zS(e,t,Su),a.__reactInternalMemoizedMergedChildContext=e,dr(po),dr(Oi),ur(Oi,e)):dr(po),ur(po,i)}var ba=null,lg=!1,Ny=!1;function LS(e){ba===null?ba=[e]:ba.push(e)}function bk(e){lg=!0,LS(e)}function Fl(){if(!Ny&&ba!==null){Ny=!0;var e=0,t=Qn;try{var i=ba;for(Qn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}ba=null,lg=!1}catch(c){throw ba!==null&&(ba=ba.slice(e+1)),iS(E_,Fl),c}finally{Qn=t,Ny=!1}}return null}var Dc=[],Bc=0,cm=null,hm=0,Zo=[],Wo=0,Tu=null,Sa=1,Ta="";function mu(e,t){Dc[Bc++]=hm,Dc[Bc++]=cm,cm=e,hm=t}function RS(e,t,i){Zo[Wo++]=Sa,Zo[Wo++]=Ta,Zo[Wo++]=Tu,Tu=e;var a=Sa;e=Ta;var c=32-bs(a)-1;a&=~(1<<c),i+=1;var d=32-bs(t)+c;if(30<d){var y=c-c%5;d=(a&(1<<y)-1).toString(32),a>>=y,c-=y,Sa=1<<32-bs(t)+c|i<<c|a,Ta=d+e}else Sa=1<<d|i<<c|a,Ta=e}function z_(e){e.return!==null&&(mu(e,1),RS(e,1,0))}function L_(e){for(;e===cm;)cm=Dc[--Bc],Dc[Bc]=null,hm=Dc[--Bc],Dc[Bc]=null;for(;e===Tu;)Tu=Zo[--Wo],Zo[Wo]=null,Ta=Zo[--Wo],Zo[Wo]=null,Sa=Zo[--Wo],Zo[Wo]=null}var Mo=null,Po=null,_r=!1,gs=null;function OS(e,t){var i=Xo(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function lb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mo=e,Po=Sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mo=e,Po=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Tu!==null?{id:Sa,overflow:Ta}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Xo(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Mo=e,Po=null,!0):!1;default:return!1}}function tv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nv(e){if(_r){var t=Po;if(t){var i=t;if(!lb(e,t)){if(tv(e))throw Error(At(418));t=Sl(i.nextSibling);var a=Mo;t&&lb(e,t)?OS(a,i):(e.flags=e.flags&-4097|2,_r=!1,Mo=e)}}else{if(tv(e))throw Error(At(418));e.flags=e.flags&-4097|2,_r=!1,Mo=e}}}function ub(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mo=e}function dp(e){if(e!==Mo)return!1;if(!_r)return ub(e),_r=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Y0(e.type,e.memoizedProps)),t&&(t=Po)){if(tv(e))throw FS(),Error(At(418));for(;t;)OS(e,t),t=Sl(t.nextSibling)}if(ub(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Po=Sl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Po=null}}else Po=Mo?Sl(e.stateNode.nextSibling):null;return!0}function FS(){for(var e=Po;e;)e=Sl(e.nextSibling)}function oh(){Po=Mo=null,_r=!1}function R_(e){gs===null?gs=[e]:gs.push(e)}var Ek=Oa.ReactCurrentBatchConfig;function ps(e,t){if(e&&e.defaultProps){t=Ir({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var fm=Ol(null),dm=null,Nc=null,O_=null;function F_(){O_=Nc=dm=null}function j_(e){var t=fm.current;dr(fm),e._currentValue=t}function rv(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Jc(e,t){dm=e,O_=Nc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fo=!0),e.firstContext=null)}function Yo(e){var t=e._currentValue;if(O_!==e)if(e={context:e,memoizedValue:t,next:null},Nc===null){if(dm===null)throw Error(At(308));Nc=e,dm.dependencies={lanes:0,firstContext:e}}else Nc=Nc.next=e;return t}var _u=null;function D_(e){_u===null?_u=[e]:_u.push(e)}function jS(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,D_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Pa(e,a)}function Pa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var fl=!1;function B_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Gn&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Pa(e,i)}return c=a.interleaved,c===null?(t.next=t,D_(a)):(t.next=c.next,c.next=t),a.interleaved=t,Pa(e,i)}function Fp(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,S_(e,i)}}function cb(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function pm(e,t,i,a){var c=e.updateQueue;fl=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,y===null?d=w:y.next=w,y=b;var C=e.alternate;C!==null&&(C=C.updateQueue,l=C.lastBaseUpdate,l!==y&&(l===null?C.firstBaseUpdate=w:l.next=w,C.lastBaseUpdate=b))}if(d!==null){var E=c.baseState;y=0,C=w=b=null,l=d;do{var z=l.lane,O=l.eventTime;if((a&z)===z){C!==null&&(C=C.next={eventTime:O,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var Q=e,K=l;switch(z=t,O=i,K.tag){case 1:if(Q=K.payload,typeof Q=="function"){E=Q.call(O,E,z);break e}E=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=K.payload,z=typeof Q=="function"?Q.call(O,E,z):Q,z==null)break e;E=Ir({},E,z);break e;case 2:fl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,z=c.effects,z===null?c.effects=[l]:z.push(l))}else O={eventTime:O,lane:z,tag:l.tag,payload:l.payload,callback:l.callback,next:null},C===null?(w=C=O,b=E):C=C.next=O,y|=z;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;z=l,l=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(1);if(C===null&&(b=E),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=C,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);Iu|=y,e.lanes=y,e.memoizedState=E}}function hb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(At(191,c));c.call(a)}}}var BS=new jE.Component().refs;function iv(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Ir({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ug={isMounted:function(e){return(e=e._reactInternals)?Ru(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=Ki(),c=Il(e),d=Ca(a,c);d.payload=t,i!=null&&(d.callback=i),t=Tl(e,d,c),t!==null&&(Es(t,e,c,a),Fp(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=Ki(),c=Il(e),d=Ca(a,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=Tl(e,d,c),t!==null&&(Es(t,e,c,a),Fp(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ki(),a=Il(e),c=Ca(i,a);c.tag=2,t!=null&&(c.callback=t),t=Tl(e,c,a),t!==null&&(Es(t,e,a,i),Fp(t,e,a))}};function fb(e,t,i,a,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,y):t.prototype&&t.prototype.isPureReactComponent?!Yf(i,a)||!Yf(c,d):!0}function NS(e,t,i){var a=!1,c=Ml,d=t.contextType;return typeof d=="object"&&d!==null?d=Yo(d):(c=mo(t)?Su:Oi.current,a=t.contextTypes,d=(a=a!=null)?ih(e,c):Ml),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ug,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function db(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&ug.enqueueReplaceState(t,t.state,null)}function ov(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=BS,B_(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=Yo(d):(d=mo(t)?Su:Oi.current,c.context=ih(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(iv(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&ug.enqueueReplaceState(c,c.state,null),pm(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ff(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var a=i.stateNode}if(!a)throw Error(At(147,e));var c=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(y){var l=c.refs;l===BS&&(l=c.refs={}),y===null?delete l[d]:l[d]=y},t._stringRef=d,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function pp(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pb(e){var t=e._init;return t(e._payload)}function US(e){function t(G,V){if(e){var B=G.deletions;B===null?(G.deletions=[V],G.flags|=16):B.push(V)}}function i(G,V){if(!e)return null;for(;V!==null;)t(G,V),V=V.sibling;return null}function a(G,V){for(G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function c(G,V){return G=Al(G,V),G.index=0,G.sibling=null,G}function d(G,V,B){return G.index=B,e?(B=G.alternate,B!==null?(B=B.index,B<V?(G.flags|=2,V):B):(G.flags|=2,V)):(G.flags|=1048576,V)}function y(G){return e&&G.alternate===null&&(G.flags|=2),G}function l(G,V,B,oe){return V===null||V.tag!==6?(V=Hy(B,G.mode,oe),V.return=G,V):(V=c(V,B),V.return=G,V)}function b(G,V,B,oe){var W=B.type;return W===zc?C(G,V,B.props.children,oe,B.key):V!==null&&(V.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===hl&&pb(W)===V.type)?(oe=c(V,B.props),oe.ref=ff(G,V,B),oe.return=G,oe):(oe=$p(B.type,B.key,B.props,null,G.mode,oe),oe.ref=ff(G,V,B),oe.return=G,oe)}function w(G,V,B,oe){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Xy(B,G.mode,oe),V.return=G,V):(V=c(V,B.children||[]),V.return=G,V)}function C(G,V,B,oe,W){return V===null||V.tag!==7?(V=Eu(B,G.mode,oe,W),V.return=G,V):(V=c(V,B),V.return=G,V)}function E(G,V,B){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Hy(""+V,G.mode,B),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case rp:return B=$p(V.type,V.key,V.props,null,G.mode,B),B.ref=ff(G,null,V),B.return=G,B;case kc:return V=Xy(V,G.mode,B),V.return=G,V;case hl:var oe=V._init;return E(G,oe(V._payload),B)}if(yf(V)||af(V))return V=Eu(V,G.mode,B,null),V.return=G,V;pp(G,V)}return null}function z(G,V,B,oe){var W=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return W!==null?null:l(G,V,""+B,oe);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case rp:return B.key===W?b(G,V,B,oe):null;case kc:return B.key===W?w(G,V,B,oe):null;case hl:return W=B._init,z(G,V,W(B._payload),oe)}if(yf(B)||af(B))return W!==null?null:C(G,V,B,oe,null);pp(G,B)}return null}function O(G,V,B,oe,W){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G=G.get(B)||null,l(V,G,""+oe,W);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case rp:return G=G.get(oe.key===null?B:oe.key)||null,b(V,G,oe,W);case kc:return G=G.get(oe.key===null?B:oe.key)||null,w(V,G,oe,W);case hl:var D=oe._init;return O(G,V,B,D(oe._payload),W)}if(yf(oe)||af(oe))return G=G.get(B)||null,C(V,G,oe,W,null);pp(V,oe)}return null}function Q(G,V,B,oe){for(var W=null,D=null,S=V,P=V=0,Z=null;S!==null&&P<B.length;P++){S.index>P?(Z=S,S=null):Z=S.sibling;var J=z(G,S,B[P],oe);if(J===null){S===null&&(S=Z);break}e&&S&&J.alternate===null&&t(G,S),V=d(J,V,P),D===null?W=J:D.sibling=J,D=J,S=Z}if(P===B.length)return i(G,S),_r&&mu(G,P),W;if(S===null){for(;P<B.length;P++)S=E(G,B[P],oe),S!==null&&(V=d(S,V,P),D===null?W=S:D.sibling=S,D=S);return _r&&mu(G,P),W}for(S=a(G,S);P<B.length;P++)Z=O(S,G,P,B[P],oe),Z!==null&&(e&&Z.alternate!==null&&S.delete(Z.key===null?P:Z.key),V=d(Z,V,P),D===null?W=Z:D.sibling=Z,D=Z);return e&&S.forEach(function(H){return t(G,H)}),_r&&mu(G,P),W}function K(G,V,B,oe){var W=af(B);if(typeof W!="function")throw Error(At(150));if(B=W.call(B),B==null)throw Error(At(151));for(var D=W=null,S=V,P=V=0,Z=null,J=B.next();S!==null&&!J.done;P++,J=B.next()){S.index>P?(Z=S,S=null):Z=S.sibling;var H=z(G,S,J.value,oe);if(H===null){S===null&&(S=Z);break}e&&S&&H.alternate===null&&t(G,S),V=d(H,V,P),D===null?W=H:D.sibling=H,D=H,S=Z}if(J.done)return i(G,S),_r&&mu(G,P),W;if(S===null){for(;!J.done;P++,J=B.next())J=E(G,J.value,oe),J!==null&&(V=d(J,V,P),D===null?W=J:D.sibling=J,D=J);return _r&&mu(G,P),W}for(S=a(G,S);!J.done;P++,J=B.next())J=O(S,G,P,J.value,oe),J!==null&&(e&&J.alternate!==null&&S.delete(J.key===null?P:J.key),V=d(J,V,P),D===null?W=J:D.sibling=J,D=J);return e&&S.forEach(function(ye){return t(G,ye)}),_r&&mu(G,P),W}function pe(G,V,B,oe){if(typeof B=="object"&&B!==null&&B.type===zc&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case rp:e:{for(var W=B.key,D=V;D!==null;){if(D.key===W){if(W=B.type,W===zc){if(D.tag===7){i(G,D.sibling),V=c(D,B.props.children),V.return=G,G=V;break e}}else if(D.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===hl&&pb(W)===D.type){i(G,D.sibling),V=c(D,B.props),V.ref=ff(G,D,B),V.return=G,G=V;break e}i(G,D);break}else t(G,D);D=D.sibling}B.type===zc?(V=Eu(B.props.children,G.mode,oe,B.key),V.return=G,G=V):(oe=$p(B.type,B.key,B.props,null,G.mode,oe),oe.ref=ff(G,V,B),oe.return=G,G=oe)}return y(G);case kc:e:{for(D=B.key;V!==null;){if(V.key===D)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){i(G,V.sibling),V=c(V,B.children||[]),V.return=G,G=V;break e}else{i(G,V);break}else t(G,V);V=V.sibling}V=Xy(B,G.mode,oe),V.return=G,G=V}return y(G);case hl:return D=B._init,pe(G,V,D(B._payload),oe)}if(yf(B))return Q(G,V,B,oe);if(af(B))return K(G,V,B,oe);pp(G,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,V!==null&&V.tag===6?(i(G,V.sibling),V=c(V,B),V.return=G,G=V):(i(G,V),V=Hy(B,G.mode,oe),V.return=G,G=V),y(G)):i(G,V)}return pe}var sh=US(!0),$S=US(!1),yd={},Hs=Ol(yd),td=Ol(yd),nd=Ol(yd);function xu(e){if(e===yd)throw Error(At(174));return e}function N_(e,t){switch(ur(nd,t),ur(td,e),ur(Hs,yd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:j0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=j0(t,e)}dr(Hs),ur(Hs,t)}function ah(){dr(Hs),dr(td),dr(nd)}function VS(e){xu(nd.current);var t=xu(Hs.current),i=j0(t,e.type);t!==i&&(ur(td,e),ur(Hs,i))}function U_(e){td.current===e&&(dr(Hs),dr(td))}var Sr=Ol(0);function mm(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uy=[];function $_(){for(var e=0;e<Uy.length;e++)Uy[e]._workInProgressVersionPrimary=null;Uy.length=0}var jp=Oa.ReactCurrentDispatcher,$y=Oa.ReactCurrentBatchConfig,Cu=0,Cr=null,Yr=null,ci=null,gm=!1,Lf=!1,rd=0,Sk=0;function Mi(){throw Error(At(321))}function V_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ss(e[i],t[i]))return!1;return!0}function G_(e,t,i,a,c,d){if(Cu=d,Cr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jp.current=e===null||e.memoizedState===null?Ak:Pk,e=i(a,c),Lf){d=0;do{if(Lf=!1,rd=0,25<=d)throw Error(At(301));d+=1,ci=Yr=null,t.updateQueue=null,jp.current=Mk,e=i(a,c)}while(Lf)}if(jp.current=ym,t=Yr!==null&&Yr.next!==null,Cu=0,ci=Yr=Cr=null,gm=!1,t)throw Error(At(300));return e}function Z_(){var e=rd!==0;return rd=0,e}function Ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Cr.memoizedState=ci=e:ci=ci.next=e,ci}function Jo(){if(Yr===null){var e=Cr.alternate;e=e!==null?e.memoizedState:null}else e=Yr.next;var t=ci===null?Cr.memoizedState:ci.next;if(t!==null)ci=t,Yr=e;else{if(e===null)throw Error(At(310));Yr=e,e={memoizedState:Yr.memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},ci===null?Cr.memoizedState=ci=e:ci=ci.next=e}return ci}function id(e,t){return typeof t=="function"?t(e):t}function Vy(e){var t=Jo(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=Yr,c=a.baseQueue,d=i.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}a.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,a=a.baseState;var l=y=null,b=null,w=d;do{var C=w.lane;if((Cu&C)===C)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var E={lane:C,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=E,y=a):b=b.next=E,Cr.lanes|=C,Iu|=C}w=w.next}while(w!==null&&w!==d);b===null?y=a:b.next=l,Ss(a,t.memoizedState)||(fo=!0),t.memoizedState=a,t.baseState=y,t.baseQueue=b,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do d=c.lane,Cr.lanes|=d,Iu|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Gy(e){var t=Jo(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);Ss(d,t.memoizedState)||(fo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function GS(){}function ZS(e,t){var i=Cr,a=Jo(),c=t(),d=!Ss(a.memoizedState,c);if(d&&(a.memoizedState=c,fo=!0),a=a.queue,W_(XS.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||ci!==null&&ci.memoizedState.tag&1){if(i.flags|=2048,od(9,HS.bind(null,i,a,c,t),void 0,null),hi===null)throw Error(At(349));Cu&30||WS(i,t,c)}return c}function WS(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Cr.updateQueue,t===null?(t={lastEffect:null,stores:null},Cr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function HS(e,t,i,a){t.value=i,t.getSnapshot=a,qS(t)&&KS(e)}function XS(e,t,i){return i(function(){qS(t)&&KS(e)})}function qS(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ss(e,i)}catch{return!0}}function KS(e){var t=Pa(e,1);t!==null&&Es(t,e,1,-1)}function mb(e){var t=Ns();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:id,lastRenderedState:e},t.queue=e,e=e.dispatch=Ik.bind(null,Cr,e),[t.memoizedState,e]}function od(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Cr.updateQueue,t===null?(t={lastEffect:null,stores:null},Cr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function YS(){return Jo().memoizedState}function Dp(e,t,i,a){var c=Ns();Cr.flags|=e,c.memoizedState=od(1|t,i,void 0,a===void 0?null:a)}function cg(e,t,i,a){var c=Jo();a=a===void 0?null:a;var d=void 0;if(Yr!==null){var y=Yr.memoizedState;if(d=y.destroy,a!==null&&V_(a,y.deps)){c.memoizedState=od(t,i,d,a);return}}Cr.flags|=e,c.memoizedState=od(1|t,i,d,a)}function gb(e,t){return Dp(8390656,8,e,t)}function W_(e,t){return cg(2048,8,e,t)}function JS(e,t){return cg(4,2,e,t)}function QS(e,t){return cg(4,4,e,t)}function eT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tT(e,t,i){return i=i!=null?i.concat([e]):null,cg(4,4,eT.bind(null,t,e),i)}function H_(){}function nT(e,t){var i=Jo();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&V_(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function rT(e,t){var i=Jo();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&V_(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function iT(e,t,i){return Cu&21?(Ss(i,t)||(i=aS(),Cr.lanes|=i,Iu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fo=!0),e.memoizedState=i)}function Tk(e,t){var i=Qn;Qn=i!==0&&4>i?i:4,e(!0);var a=$y.transition;$y.transition={};try{e(!1),t()}finally{Qn=i,$y.transition=a}}function oT(){return Jo().memoizedState}function Ck(e,t,i){var a=Il(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},sT(e))aT(t,i);else if(i=jS(e,t,i,a),i!==null){var c=Ki();Es(i,e,a,c),lT(i,t,a)}}function Ik(e,t,i){var a=Il(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(sT(e))aT(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,l=d(y,i);if(c.hasEagerState=!0,c.eagerState=l,Ss(l,y)){var b=t.interleaved;b===null?(c.next=c,D_(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=jS(e,t,c,a),i!==null&&(c=Ki(),Es(i,e,a,c),lT(i,t,a))}}function sT(e){var t=e.alternate;return e===Cr||t!==null&&t===Cr}function aT(e,t){Lf=gm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function lT(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,S_(e,i)}}var ym={readContext:Yo,useCallback:Mi,useContext:Mi,useEffect:Mi,useImperativeHandle:Mi,useInsertionEffect:Mi,useLayoutEffect:Mi,useMemo:Mi,useReducer:Mi,useRef:Mi,useState:Mi,useDebugValue:Mi,useDeferredValue:Mi,useTransition:Mi,useMutableSource:Mi,useSyncExternalStore:Mi,useId:Mi,unstable_isNewReconciler:!1},Ak={readContext:Yo,useCallback:function(e,t){return Ns().memoizedState=[e,t===void 0?null:t],e},useContext:Yo,useEffect:gb,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Dp(4194308,4,eT.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Dp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dp(4,2,e,t)},useMemo:function(e,t){var i=Ns();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=Ns();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Ck.bind(null,Cr,e),[a.memoizedState,e]},useRef:function(e){var t=Ns();return e={current:e},t.memoizedState=e},useState:mb,useDebugValue:H_,useDeferredValue:function(e){return Ns().memoizedState=e},useTransition:function(){var e=mb(!1),t=e[0];return e=Tk.bind(null,e[1]),Ns().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Cr,c=Ns();if(_r){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),hi===null)throw Error(At(349));Cu&30||WS(a,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,gb(XS.bind(null,a,d,e),[e]),a.flags|=2048,od(9,HS.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=Ns(),t=hi.identifierPrefix;if(_r){var i=Ta,a=Sa;i=(a&~(1<<32-bs(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=rd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Sk++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pk={readContext:Yo,useCallback:nT,useContext:Yo,useEffect:W_,useImperativeHandle:tT,useInsertionEffect:JS,useLayoutEffect:QS,useMemo:rT,useReducer:Vy,useRef:YS,useState:function(){return Vy(id)},useDebugValue:H_,useDeferredValue:function(e){var t=Jo();return iT(t,Yr.memoizedState,e)},useTransition:function(){var e=Vy(id)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:GS,useSyncExternalStore:ZS,useId:oT,unstable_isNewReconciler:!1},Mk={readContext:Yo,useCallback:nT,useContext:Yo,useEffect:W_,useImperativeHandle:tT,useInsertionEffect:JS,useLayoutEffect:QS,useMemo:rT,useReducer:Gy,useRef:YS,useState:function(){return Gy(id)},useDebugValue:H_,useDeferredValue:function(e){var t=Jo();return Yr===null?t.memoizedState=e:iT(t,Yr.memoizedState,e)},useTransition:function(){var e=Gy(id)[0],t=Jo().memoizedState;return[e,t]},useMutableSource:GS,useSyncExternalStore:ZS,useId:oT,unstable_isNewReconciler:!1};function lh(e,t){try{var i="",a=t;do i+=iM(a),a=a.return;while(a);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function Zy(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function sv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var kk=typeof WeakMap=="function"?WeakMap:Map;function uT(e,t,i){i=Ca(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){_m||(_m=!0,gv=a),sv(e,t)},i}function cT(e,t,i){i=Ca(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){sv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){sv(e,t),typeof a!="function"&&(Cl===null?Cl=new Set([this]):Cl.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function yb(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new kk;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=Zk.bind(null,e,t,i),t.then(e,e))}function vb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _b(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ca(-1,1),t.tag=2,Tl(i,t,1))),i.lanes|=1),e)}var zk=Oa.ReactCurrentOwner,fo=!1;function Wi(e,t,i,a){t.child=e===null?$S(t,null,i,a):sh(t,e.child,i,a)}function xb(e,t,i,a,c){i=i.render;var d=t.ref;return Jc(t,c),a=G_(e,t,i,a,d,c),i=Z_(),e!==null&&!fo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ma(e,t,c)):(_r&&i&&z_(t),t.flags|=1,Wi(e,t,a,c),t.child)}function wb(e,t,i,a,c){if(e===null){var d=i.type;return typeof d=="function"&&!t1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,hT(e,t,d,a,c)):(e=$p(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:Yf,i(y,a)&&e.ref===t.ref)return Ma(e,t,c)}return t.flags|=1,e=Al(d,a),e.ref=t.ref,e.return=t,t.child=e}function hT(e,t,i,a,c){if(e!==null){var d=e.memoizedProps;if(Yf(d,a)&&e.ref===t.ref)if(fo=!1,t.pendingProps=a=d,(e.lanes&c)!==0)e.flags&131072&&(fo=!0);else return t.lanes=e.lanes,Ma(e,t,c)}return av(e,t,i,a,c)}function fT(e,t,i){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur($c,Co),Co|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ur($c,Co),Co|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,ur($c,Co),Co|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,ur($c,Co),Co|=a;return Wi(e,t,c,i),t.child}function dT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function av(e,t,i,a,c){var d=mo(i)?Su:Oi.current;return d=ih(t,d),Jc(t,c),i=G_(e,t,i,a,d,c),a=Z_(),e!==null&&!fo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ma(e,t,c)):(_r&&a&&z_(t),t.flags|=1,Wi(e,t,i,c),t.child)}function bb(e,t,i,a,c){if(mo(i)){var d=!0;um(t)}else d=!1;if(Jc(t,c),t.stateNode===null)Bp(e,t),NS(t,i,a),ov(t,i,a,c),a=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var b=y.context,w=i.contextType;typeof w=="object"&&w!==null?w=Yo(w):(w=mo(i)?Su:Oi.current,w=ih(t,w));var C=i.getDerivedStateFromProps,E=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function";E||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==a||b!==w)&&db(t,y,a,w),fl=!1;var z=t.memoizedState;y.state=z,pm(t,a,y,c),b=t.memoizedState,l!==a||z!==b||po.current||fl?(typeof C=="function"&&(iv(t,i,C,a),b=t.memoizedState),(l=fl||fb(t,i,l,a,z,b,w))?(E||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),y.props=a,y.state=b,y.context=w,a=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{y=t.stateNode,DS(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:ps(t.type,l),y.props=w,E=t.pendingProps,z=y.context,b=i.contextType,typeof b=="object"&&b!==null?b=Yo(b):(b=mo(i)?Su:Oi.current,b=ih(t,b));var O=i.getDerivedStateFromProps;(C=typeof O=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==E||z!==b)&&db(t,y,a,b),fl=!1,z=t.memoizedState,y.state=z,pm(t,a,y,c);var Q=t.memoizedState;l!==E||z!==Q||po.current||fl?(typeof O=="function"&&(iv(t,i,O,a),Q=t.memoizedState),(w=fl||fb(t,i,w,a,z,Q,b)||!1)?(C||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(a,Q,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(a,Q,b)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=Q),y.props=a,y.state=Q,y.context=b,a=w):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),a=!1)}return lv(e,t,i,a,d,c)}function lv(e,t,i,a,c,d){dT(e,t);var y=(t.flags&128)!==0;if(!a&&!y)return c&&ab(t,i,!1),Ma(e,t,d);a=t.stateNode,zk.current=t;var l=y&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&y?(t.child=sh(t,e.child,null,d),t.child=sh(t,null,l,d)):Wi(e,t,l,d),t.memoizedState=a.state,c&&ab(t,i,!0),t.child}function pT(e){var t=e.stateNode;t.pendingContext?sb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&sb(e,t.context,!1),N_(e,t.containerInfo)}function Eb(e,t,i,a,c){return oh(),R_(c),t.flags|=256,Wi(e,t,i,a),t.child}var uv={dehydrated:null,treeContext:null,retryLane:0};function cv(e){return{baseLanes:e,cachePool:null,transitions:null}}function mT(e,t,i){var a=t.pendingProps,c=Sr.current,d=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ur(Sr,c&1),e===null)return nv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=a.children,e=a.fallback,d?(a=t.mode,d=t.child,y={mode:"hidden",children:y},!(a&1)&&d!==null?(d.childLanes=0,d.pendingProps=y):d=dg(y,a,0,null),e=Eu(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=cv(i),t.memoizedState=uv,e):X_(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return Lk(e,t,y,a,l,c,i);if(d){d=a.fallback,y=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:a.children};return!(y&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=Al(c,b),a.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=Al(l,d):(d=Eu(d,y,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,y=e.child.memoizedState,y=y===null?cv(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},d.memoizedState=y,d.childLanes=e.childLanes&~i,t.memoizedState=uv,a}return d=e.child,e=d.sibling,a=Al(d,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function X_(e,t){return t=dg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mp(e,t,i,a){return a!==null&&R_(a),sh(t,e.child,null,i),e=X_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lk(e,t,i,a,c,d,y){if(i)return t.flags&256?(t.flags&=-257,a=Zy(Error(At(422))),mp(e,t,y,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,c=t.mode,a=dg({mode:"visible",children:a.children},c,0,null),d=Eu(d,c,y,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,t.mode&1&&sh(t,e.child,null,y),t.child.memoizedState=cv(y),t.memoizedState=uv,d);if(!(t.mode&1))return mp(e,t,y,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var l=a.dgst;return a=l,d=Error(At(419)),a=Zy(d,a,void 0),mp(e,t,y,a)}if(l=(y&e.childLanes)!==0,fo||l){if(a=hi,a!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|y)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Pa(e,c),Es(a,e,c,-1))}return e1(),a=Zy(Error(At(421))),mp(e,t,y,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Wk.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,Po=Sl(c.nextSibling),Mo=t,_r=!0,gs=null,e!==null&&(Zo[Wo++]=Sa,Zo[Wo++]=Ta,Zo[Wo++]=Tu,Sa=e.id,Ta=e.overflow,Tu=t),t=X_(t,a.children),t.flags|=4096,t)}function Sb(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),rv(e.return,t,i)}function Wy(e,t,i,a,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=c)}function gT(e,t,i){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(Wi(e,t,a.children,i),a=Sr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sb(e,i,t);else if(e.tag===19)Sb(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ur(Sr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&mm(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Wy(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&mm(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Wy(t,!0,i,null,d);break;case"together":Wy(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ma(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Iu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=Al(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Al(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Rk(e,t,i){switch(t.tag){case 3:pT(t),oh();break;case 5:VS(t);break;case 1:mo(t.type)&&um(t);break;case 4:N_(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;ur(fm,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ur(Sr,Sr.current&1),t.flags|=128,null):i&t.child.childLanes?mT(e,t,i):(ur(Sr,Sr.current&1),e=Ma(e,t,i),e!==null?e.sibling:null);ur(Sr,Sr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return gT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ur(Sr,Sr.current),a)break;return null;case 22:case 23:return t.lanes=0,fT(e,t,i)}return Ma(e,t,i)}var yT,hv,vT,_T;yT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};hv=function(){};vT=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,xu(Hs.current);var d=null;switch(i){case"input":c=L0(e,c),a=L0(e,a),d=[];break;case"select":c=Ir({},c,{value:void 0}),a=Ir({},a,{value:void 0}),d=[];break;case"textarea":c=F0(e,c),a=F0(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=am)}D0(i,a);var y;i=null;for(w in c)if(!a.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(y in l)l.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Gf.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in a){var b=a[w];if(l=c!=null?c[w]:void 0,a.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(y in l)!l.hasOwnProperty(y)||b&&b.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in b)b.hasOwnProperty(y)&&l[y]!==b[y]&&(i||(i={}),i[y]=b[y])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Gf.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&fr("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};_T=function(e,t,i,a){i!==a&&(t.flags|=4)};function df(e,t){if(!_r)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ki(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function Ok(e,t,i){var a=t.pendingProps;switch(L_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ki(t),null;case 1:return mo(t.type)&&lm(),ki(t),null;case 3:return a=t.stateNode,ah(),dr(po),dr(Oi),$_(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(dp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gs!==null&&(_v(gs),gs=null))),hv(e,t),ki(t),null;case 5:U_(t);var c=xu(nd.current);if(i=t.type,e!==null&&t.stateNode!=null)vT(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(At(166));return ki(t),null}if(e=xu(Hs.current),dp(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[Us]=t,a[ed]=d,e=(t.mode&1)!==0,i){case"dialog":fr("cancel",a),fr("close",a);break;case"iframe":case"object":case"embed":fr("load",a);break;case"video":case"audio":for(c=0;c<_f.length;c++)fr(_f[c],a);break;case"source":fr("error",a);break;case"img":case"image":case"link":fr("error",a),fr("load",a);break;case"details":fr("toggle",a);break;case"input":Lw(a,d),fr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},fr("invalid",a);break;case"textarea":Ow(a,d),fr("invalid",a)}D0(i,d),c=null;for(var y in d)if(d.hasOwnProperty(y)){var l=d[y];y==="children"?typeof l=="string"?a.textContent!==l&&(d.suppressHydrationWarning!==!0&&fp(a.textContent,l,e),c=["children",l]):typeof l=="number"&&a.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&fp(a.textContent,l,e),c=["children",""+l]):Gf.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&fr("scroll",a)}switch(i){case"input":ip(a),Rw(a,d,!0);break;case"textarea":ip(a),Fw(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=am)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=WE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=y.createElement(i,{is:a.is}):(e=y.createElement(i),i==="select"&&(y=e,a.multiple?y.multiple=!0:a.size&&(y.size=a.size))):e=y.createElementNS(e,i),e[Us]=t,e[ed]=a,yT(e,t,!1,!1),t.stateNode=e;e:{switch(y=B0(i,a),i){case"dialog":fr("cancel",e),fr("close",e),c=a;break;case"iframe":case"object":case"embed":fr("load",e),c=a;break;case"video":case"audio":for(c=0;c<_f.length;c++)fr(_f[c],e);c=a;break;case"source":fr("error",e),c=a;break;case"img":case"image":case"link":fr("error",e),fr("load",e),c=a;break;case"details":fr("toggle",e),c=a;break;case"input":Lw(e,a),c=L0(e,a),fr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Ir({},a,{value:void 0}),fr("invalid",e);break;case"textarea":Ow(e,a),c=F0(e,a),fr("invalid",e);break;default:c=a}D0(i,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?qE(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&HE(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&Zf(e,b):typeof b=="number"&&Zf(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Gf.hasOwnProperty(d)?b!=null&&d==="onScroll"&&fr("scroll",e):b!=null&&v_(e,d,b,y))}switch(i){case"input":ip(e),Rw(e,a,!1);break;case"textarea":ip(e),Fw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Pl(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?Xc(e,!!a.multiple,d,!1):a.defaultValue!=null&&Xc(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=am)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ki(t),null;case 6:if(e&&t.stateNode!=null)_T(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(At(166));if(i=xu(nd.current),xu(Hs.current),dp(t)){if(a=t.stateNode,i=t.memoizedProps,a[Us]=t,(d=a.nodeValue!==i)&&(e=Mo,e!==null))switch(e.tag){case 3:fp(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fp(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Us]=t,t.stateNode=a}return ki(t),null;case 13:if(dr(Sr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_r&&Po!==null&&t.mode&1&&!(t.flags&128))FS(),oh(),t.flags|=98560,d=!1;else if(d=dp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(At(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(At(317));d[Us]=t}else oh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ki(t),d=!1}else gs!==null&&(_v(gs),gs=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Sr.current&1?Jr===0&&(Jr=3):e1())),t.updateQueue!==null&&(t.flags|=4),ki(t),null);case 4:return ah(),hv(e,t),e===null&&Jf(t.stateNode.containerInfo),ki(t),null;case 10:return j_(t.type._context),ki(t),null;case 17:return mo(t.type)&&lm(),ki(t),null;case 19:if(dr(Sr),d=t.memoizedState,d===null)return ki(t),null;if(a=(t.flags&128)!==0,y=d.rendering,y===null)if(a)df(d,!1);else{if(Jr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=mm(e),y!==null){for(t.flags|=128,df(d,!1),a=y.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return ur(Sr,Sr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Ur()>uh&&(t.flags|=128,a=!0,df(d,!1),t.lanes=4194304)}else{if(!a)if(e=mm(y),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),df(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!_r)return ki(t),null}else 2*Ur()-d.renderingStartTime>uh&&i!==1073741824&&(t.flags|=128,a=!0,df(d,!1),t.lanes=4194304);d.isBackwards?(y.sibling=t.child,t.child=y):(i=d.last,i!==null?i.sibling=y:t.child=y,d.last=y)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Ur(),t.sibling=null,i=Sr.current,ur(Sr,a?i&1|2:i&1),t):(ki(t),null);case 22:case 23:return Q_(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Co&1073741824&&(ki(t),t.subtreeFlags&6&&(t.flags|=8192)):ki(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function Fk(e,t){switch(L_(t),t.tag){case 1:return mo(t.type)&&lm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ah(),dr(po),dr(Oi),$_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return U_(t),null;case 13:if(dr(Sr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));oh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dr(Sr),null;case 4:return ah(),null;case 10:return j_(t.type._context),null;case 22:case 23:return Q_(),null;case 24:return null;default:return null}}var gp=!1,Li=!1,jk=typeof WeakSet=="function"?WeakSet:Set,en=null;function Uc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Rr(e,t,a)}else i.current=null}function fv(e,t,i){try{i()}catch(a){Rr(e,t,a)}}var Tb=!1;function Dk(e,t){if(q0=im,e=ES(),k_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,l=-1,b=-1,w=0,C=0,E=e,z=null;t:for(;;){for(var O;E!==i||c!==0&&E.nodeType!==3||(l=y+c),E!==d||a!==0&&E.nodeType!==3||(b=y+a),E.nodeType===3&&(y+=E.nodeValue.length),(O=E.firstChild)!==null;)z=E,E=O;for(;;){if(E===e)break t;if(z===i&&++w===c&&(l=y),z===d&&++C===a&&(b=y),(O=E.nextSibling)!==null)break;E=z,z=E.parentNode}E=O}i=l===-1||b===-1?null:{start:l,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(K0={focusedElem:e,selectionRange:i},im=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var Q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var K=Q.memoizedProps,pe=Q.memoizedState,G=t.stateNode,V=G.getSnapshotBeforeUpdate(t.elementType===t.type?K:ps(t.type,K),pe);G.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(oe){Rr(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return Q=Tb,Tb=!1,Q}function Rf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&fv(t,i,d)}c=c.next}while(c!==a)}}function hg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function dv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function xT(e){var t=e.alternate;t!==null&&(e.alternate=null,xT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Us],delete t[ed],delete t[Q0],delete t[xk],delete t[wk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wT(e){return e.tag===5||e.tag===3||e.tag===4}function Cb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=am));else if(a!==4&&(e=e.child,e!==null))for(pv(e,t,i),e=e.sibling;e!==null;)pv(e,t,i),e=e.sibling}function mv(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(mv(e,t,i),e=e.sibling;e!==null;)mv(e,t,i),e=e.sibling}var _i=null,ms=!1;function ul(e,t,i){for(i=i.child;i!==null;)bT(e,t,i),i=i.sibling}function bT(e,t,i){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(rg,i)}catch{}switch(i.tag){case 5:Li||Uc(i,t);case 6:var a=_i,c=ms;_i=null,ul(e,t,i),_i=a,ms=c,_i!==null&&(ms?(e=_i,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):_i.removeChild(i.stateNode));break;case 18:_i!==null&&(ms?(e=_i,i=i.stateNode,e.nodeType===8?By(e.parentNode,i):e.nodeType===1&&By(e,i),qf(e)):By(_i,i.stateNode));break;case 4:a=_i,c=ms,_i=i.stateNode.containerInfo,ms=!0,ul(e,t,i),_i=a,ms=c;break;case 0:case 11:case 14:case 15:if(!Li&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var d=c,y=d.destroy;d=d.tag,y!==void 0&&(d&2||d&4)&&fv(i,t,y),c=c.next}while(c!==a)}ul(e,t,i);break;case 1:if(!Li&&(Uc(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(l){Rr(i,t,l)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:i.mode&1?(Li=(a=Li)||i.memoizedState!==null,ul(e,t,i),Li=a):ul(e,t,i);break;default:ul(e,t,i)}}function Ib(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new jk),t.forEach(function(a){var c=Hk.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function ds(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var d=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:_i=l.stateNode,ms=!1;break e;case 3:_i=l.stateNode.containerInfo,ms=!0;break e;case 4:_i=l.stateNode.containerInfo,ms=!0;break e}l=l.return}if(_i===null)throw Error(At(160));bT(d,y,c),_i=null,ms=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){Rr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ET(t,e),t=t.sibling}function ET(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ds(t,e),Bs(e),a&4){try{Rf(3,e,e.return),hg(3,e)}catch(K){Rr(e,e.return,K)}try{Rf(5,e,e.return)}catch(K){Rr(e,e.return,K)}}break;case 1:ds(t,e),Bs(e),a&512&&i!==null&&Uc(i,i.return);break;case 5:if(ds(t,e),Bs(e),a&512&&i!==null&&Uc(i,i.return),e.flags&32){var c=e.stateNode;try{Zf(c,"")}catch(K){Rr(e,e.return,K)}}if(a&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,y=i!==null?i.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&GE(c,d),B0(l,y);var w=B0(l,d);for(y=0;y<b.length;y+=2){var C=b[y],E=b[y+1];C==="style"?qE(c,E):C==="dangerouslySetInnerHTML"?HE(c,E):C==="children"?Zf(c,E):v_(c,C,E,w)}switch(l){case"input":R0(c,d);break;case"textarea":ZE(c,d);break;case"select":var z=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var O=d.value;O!=null?Xc(c,!!d.multiple,O,!1):z!==!!d.multiple&&(d.defaultValue!=null?Xc(c,!!d.multiple,d.defaultValue,!0):Xc(c,!!d.multiple,d.multiple?[]:"",!1))}c[ed]=d}catch(K){Rr(e,e.return,K)}}break;case 6:if(ds(t,e),Bs(e),a&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(K){Rr(e,e.return,K)}}break;case 3:if(ds(t,e),Bs(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{qf(t.containerInfo)}catch(K){Rr(e,e.return,K)}break;case 4:ds(t,e),Bs(e);break;case 13:ds(t,e),Bs(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(Y_=Ur())),a&4&&Ib(e);break;case 22:if(C=i!==null&&i.memoizedState!==null,e.mode&1?(Li=(w=Li)||C,ds(t,e),Li=w):ds(t,e),Bs(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!C&&e.mode&1)for(en=e,C=e.child;C!==null;){for(E=en=C;en!==null;){switch(z=en,O=z.child,z.tag){case 0:case 11:case 14:case 15:Rf(4,z,z.return);break;case 1:Uc(z,z.return);var Q=z.stateNode;if(typeof Q.componentWillUnmount=="function"){a=z,i=z.return;try{t=a,Q.props=t.memoizedProps,Q.state=t.memoizedState,Q.componentWillUnmount()}catch(K){Rr(a,i,K)}}break;case 5:Uc(z,z.return);break;case 22:if(z.memoizedState!==null){Pb(E);continue}}O!==null?(O.return=z,en=O):Pb(E)}C=C.sibling}e:for(C=null,E=e;;){if(E.tag===5){if(C===null){C=E;try{c=E.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=E.stateNode,b=E.memoizedProps.style,y=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=XE("display",y))}catch(K){Rr(e,e.return,K)}}}else if(E.tag===6){if(C===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(K){Rr(e,e.return,K)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;C===E&&(C=null),E=E.return}C===E&&(C=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ds(t,e),Bs(e),a&4&&Ib(e);break;case 21:break;default:ds(t,e),Bs(e)}}function Bs(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(wT(i)){var a=i;break e}i=i.return}throw Error(At(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Zf(c,""),a.flags&=-33);var d=Cb(e);mv(e,d,c);break;case 3:case 4:var y=a.stateNode.containerInfo,l=Cb(e);pv(e,l,y);break;default:throw Error(At(161))}}catch(b){Rr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bk(e,t,i){en=e,ST(e)}function ST(e,t,i){for(var a=(e.mode&1)!==0;en!==null;){var c=en,d=c.child;if(c.tag===22&&a){var y=c.memoizedState!==null||gp;if(!y){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Li;l=gp;var w=Li;if(gp=y,(Li=b)&&!w)for(en=c;en!==null;)y=en,b=y.child,y.tag===22&&y.memoizedState!==null?Mb(c):b!==null?(b.return=y,en=b):Mb(c);for(;d!==null;)en=d,ST(d),d=d.sibling;en=c,gp=l,Li=w}Ab(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,en=d):Ab(e)}}function Ab(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Li||hg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Li)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:ps(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&hb(t,d,a);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}hb(t,y,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var C=w.memoizedState;if(C!==null){var E=C.dehydrated;E!==null&&qf(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Li||t.flags&512&&dv(t)}catch(z){Rr(t,t.return,z)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function Pb(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function Mb(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{hg(4,t)}catch(b){Rr(t,i,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(b){Rr(t,c,b)}}var d=t.return;try{dv(t)}catch(b){Rr(t,d,b)}break;case 5:var y=t.return;try{dv(t)}catch(b){Rr(t,y,b)}}}catch(b){Rr(t,t.return,b)}if(t===e){en=null;break}var l=t.sibling;if(l!==null){l.return=t.return,en=l;break}en=t.return}}var Nk=Math.ceil,vm=Oa.ReactCurrentDispatcher,q_=Oa.ReactCurrentOwner,Ko=Oa.ReactCurrentBatchConfig,Gn=0,hi=null,Xr=null,wi=0,Co=0,$c=Ol(0),Jr=0,sd=null,Iu=0,fg=0,K_=0,Of=null,co=null,Y_=0,uh=1/0,wa=null,_m=!1,gv=null,Cl=null,yp=!1,_l=null,xm=0,Ff=0,yv=null,Np=-1,Up=0;function Ki(){return Gn&6?Ur():Np!==-1?Np:Np=Ur()}function Il(e){return e.mode&1?Gn&2&&wi!==0?wi&-wi:Ek.transition!==null?(Up===0&&(Up=aS()),Up):(e=Qn,e!==0||(e=window.event,e=e===void 0?16:pS(e.type)),e):1}function Es(e,t,i,a){if(50<Ff)throw Ff=0,yv=null,Error(At(185));pd(e,i,a),(!(Gn&2)||e!==hi)&&(e===hi&&(!(Gn&2)&&(fg|=i),Jr===4&&gl(e,wi)),go(e,a),i===1&&Gn===0&&!(t.mode&1)&&(uh=Ur()+500,lg&&Fl()))}function go(e,t){var i=e.callbackNode;EM(e,t);var a=rm(e,e===hi?wi:0);if(a===0)i!==null&&Bw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Bw(i),t===1)e.tag===0?bk(kb.bind(null,e)):LS(kb.bind(null,e)),vk(function(){!(Gn&6)&&Fl()}),i=null;else{switch(lS(a)){case 1:i=E_;break;case 4:i=oS;break;case 16:i=nm;break;case 536870912:i=sS;break;default:i=nm}i=zT(i,TT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function TT(e,t){if(Np=-1,Up=0,Gn&6)throw Error(At(327));var i=e.callbackNode;if(Qc()&&e.callbackNode!==i)return null;var a=rm(e,e===hi?wi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=wm(e,a);else{t=a;var c=Gn;Gn|=2;var d=IT();(hi!==e||wi!==t)&&(wa=null,uh=Ur()+500,bu(e,t));do try{Vk();break}catch(l){CT(e,l)}while(1);F_(),vm.current=d,Gn=c,Xr!==null?t=0:(hi=null,wi=0,t=Jr)}if(t!==0){if(t===2&&(c=G0(e),c!==0&&(a=c,t=vv(e,c))),t===1)throw i=sd,bu(e,0),gl(e,a),go(e,Ur()),i;if(t===6)gl(e,a);else{if(c=e.current.alternate,!(a&30)&&!Uk(c)&&(t=wm(e,a),t===2&&(d=G0(e),d!==0&&(a=d,t=vv(e,d))),t===1))throw i=sd,bu(e,0),gl(e,a),go(e,Ur()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(At(345));case 2:gu(e,co,wa);break;case 3:if(gl(e,a),(a&130023424)===a&&(t=Y_+500-Ur(),10<t)){if(rm(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){Ki(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=J0(gu.bind(null,e,co,wa),t);break}gu(e,co,wa);break;case 4:if(gl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var y=31-bs(a);d=1<<y,y=t[y],y>c&&(c=y),a&=~d}if(a=c,a=Ur()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Nk(a/1960))-a,10<a){e.timeoutHandle=J0(gu.bind(null,e,co,wa),a);break}gu(e,co,wa);break;case 5:gu(e,co,wa);break;default:throw Error(At(329))}}}return go(e,Ur()),e.callbackNode===i?TT.bind(null,e):null}function vv(e,t){var i=Of;return e.current.memoizedState.isDehydrated&&(bu(e,t).flags|=256),e=wm(e,t),e!==2&&(t=co,co=i,t!==null&&_v(t)),e}function _v(e){co===null?co=e:co.push.apply(co,e)}function Uk(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],d=c.getSnapshot;c=c.value;try{if(!Ss(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gl(e,t){for(t&=~K_,t&=~fg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-bs(t),a=1<<i;e[i]=-1,t&=~a}}function kb(e){if(Gn&6)throw Error(At(327));Qc();var t=rm(e,0);if(!(t&1))return go(e,Ur()),null;var i=wm(e,t);if(e.tag!==0&&i===2){var a=G0(e);a!==0&&(t=a,i=vv(e,a))}if(i===1)throw i=sd,bu(e,0),gl(e,t),go(e,Ur()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gu(e,co,wa),go(e,Ur()),null}function J_(e,t){var i=Gn;Gn|=1;try{return e(t)}finally{Gn=i,Gn===0&&(uh=Ur()+500,lg&&Fl())}}function Au(e){_l!==null&&_l.tag===0&&!(Gn&6)&&Qc();var t=Gn;Gn|=1;var i=Ko.transition,a=Qn;try{if(Ko.transition=null,Qn=1,e)return e()}finally{Qn=a,Ko.transition=i,Gn=t,!(Gn&6)&&Fl()}}function Q_(){Co=$c.current,dr($c)}function bu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,yk(i)),Xr!==null)for(i=Xr.return;i!==null;){var a=i;switch(L_(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&lm();break;case 3:ah(),dr(po),dr(Oi),$_();break;case 5:U_(a);break;case 4:ah();break;case 13:dr(Sr);break;case 19:dr(Sr);break;case 10:j_(a.type._context);break;case 22:case 23:Q_()}i=i.return}if(hi=e,Xr=e=Al(e.current,null),wi=Co=t,Jr=0,sd=null,K_=fg=Iu=0,co=Of=null,_u!==null){for(t=0;t<_u.length;t++)if(i=_u[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,d=i.pending;if(d!==null){var y=d.next;d.next=c,a.next=y}i.pending=a}_u=null}return e}function CT(e,t){do{var i=Xr;try{if(F_(),jp.current=ym,gm){for(var a=Cr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}gm=!1}if(Cu=0,ci=Yr=Cr=null,Lf=!1,rd=0,q_.current=null,i===null||i.return===null){Jr=1,sd=t,Xr=null;break}e:{var d=e,y=i.return,l=i,b=t;if(t=wi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,C=l,E=C.tag;if(!(C.mode&1)&&(E===0||E===11||E===15)){var z=C.alternate;z?(C.updateQueue=z.updateQueue,C.memoizedState=z.memoizedState,C.lanes=z.lanes):(C.updateQueue=null,C.memoizedState=null)}var O=vb(y);if(O!==null){O.flags&=-257,_b(O,y,l,d,t),O.mode&1&&yb(d,w,t),t=O,b=w;var Q=t.updateQueue;if(Q===null){var K=new Set;K.add(b),t.updateQueue=K}else Q.add(b);break e}else{if(!(t&1)){yb(d,w,t),e1();break e}b=Error(At(426))}}else if(_r&&l.mode&1){var pe=vb(y);if(pe!==null){!(pe.flags&65536)&&(pe.flags|=256),_b(pe,y,l,d,t),R_(lh(b,l));break e}}d=b=lh(b,l),Jr!==4&&(Jr=2),Of===null?Of=[d]:Of.push(d),d=y;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=uT(d,b,t);cb(d,G);break e;case 1:l=b;var V=d.type,B=d.stateNode;if(!(d.flags&128)&&(typeof V.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Cl===null||!Cl.has(B)))){d.flags|=65536,t&=-t,d.lanes|=t;var oe=cT(d,l,t);cb(d,oe);break e}}d=d.return}while(d!==null)}PT(i)}catch(W){t=W,Xr===i&&i!==null&&(Xr=i=i.return);continue}break}while(1)}function IT(){var e=vm.current;return vm.current=ym,e===null?ym:e}function e1(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),hi===null||!(Iu&268435455)&&!(fg&268435455)||gl(hi,wi)}function wm(e,t){var i=Gn;Gn|=2;var a=IT();(hi!==e||wi!==t)&&(wa=null,bu(e,t));do try{$k();break}catch(c){CT(e,c)}while(1);if(F_(),Gn=i,vm.current=a,Xr!==null)throw Error(At(261));return hi=null,wi=0,Jr}function $k(){for(;Xr!==null;)AT(Xr)}function Vk(){for(;Xr!==null&&!pM();)AT(Xr)}function AT(e){var t=kT(e.alternate,e,Co);e.memoizedProps=e.pendingProps,t===null?PT(e):Xr=t,q_.current=null}function PT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=Fk(i,t),i!==null){i.flags&=32767,Xr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Jr=6,Xr=null;return}}else if(i=Ok(i,t,Co),i!==null){Xr=i;return}if(t=t.sibling,t!==null){Xr=t;return}Xr=t=e}while(t!==null);Jr===0&&(Jr=5)}function gu(e,t,i){var a=Qn,c=Ko.transition;try{Ko.transition=null,Qn=1,Gk(e,t,i,a)}finally{Ko.transition=c,Qn=a}return null}function Gk(e,t,i,a){do Qc();while(_l!==null);if(Gn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(SM(e,d),e===hi&&(Xr=hi=null,wi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||yp||(yp=!0,zT(nm,function(){return Qc(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=Ko.transition,Ko.transition=null;var y=Qn;Qn=1;var l=Gn;Gn|=4,q_.current=null,Dk(e,i),ET(i,e),ck(K0),im=!!q0,K0=q0=null,e.current=i,Bk(i),mM(),Gn=l,Qn=y,Ko.transition=d}else e.current=i;if(yp&&(yp=!1,_l=e,xm=c),d=e.pendingLanes,d===0&&(Cl=null),vM(i.stateNode),go(e,Ur()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(_m)throw _m=!1,e=gv,gv=null,e;return xm&1&&e.tag!==0&&Qc(),d=e.pendingLanes,d&1?e===yv?Ff++:(Ff=0,yv=e):Ff=0,Fl(),null}function Qc(){if(_l!==null){var e=lS(xm),t=Ko.transition,i=Qn;try{if(Ko.transition=null,Qn=16>e?16:e,_l===null)var a=!1;else{if(e=_l,_l=null,xm=0,Gn&6)throw Error(At(331));var c=Gn;for(Gn|=4,en=e.current;en!==null;){var d=en,y=d.child;if(en.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(en=w;en!==null;){var C=en;switch(C.tag){case 0:case 11:case 15:Rf(8,C,d)}var E=C.child;if(E!==null)E.return=C,en=E;else for(;en!==null;){C=en;var z=C.sibling,O=C.return;if(xT(C),C===w){en=null;break}if(z!==null){z.return=O,en=z;break}en=O}}}var Q=d.alternate;if(Q!==null){var K=Q.child;if(K!==null){Q.child=null;do{var pe=K.sibling;K.sibling=null,K=pe}while(K!==null)}}en=d}}if(d.subtreeFlags&2064&&y!==null)y.return=d,en=y;else e:for(;en!==null;){if(d=en,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Rf(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,en=G;break e}en=d.return}}var V=e.current;for(en=V;en!==null;){y=en;var B=y.child;if(y.subtreeFlags&2064&&B!==null)B.return=y,en=B;else e:for(y=V;en!==null;){if(l=en,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hg(9,l)}}catch(W){Rr(l,l.return,W)}if(l===y){en=null;break e}var oe=l.sibling;if(oe!==null){oe.return=l.return,en=oe;break e}en=l.return}}if(Gn=c,Fl(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(rg,e)}catch{}a=!0}return a}finally{Qn=i,Ko.transition=t}}return!1}function zb(e,t,i){t=lh(i,t),t=uT(e,t,1),e=Tl(e,t,1),t=Ki(),e!==null&&(pd(e,1,t),go(e,t))}function Rr(e,t,i){if(e.tag===3)zb(e,e,i);else for(;t!==null;){if(t.tag===3){zb(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Cl===null||!Cl.has(a))){e=lh(i,e),e=cT(t,e,1),t=Tl(t,e,1),e=Ki(),t!==null&&(pd(t,1,e),go(t,e));break}}t=t.return}}function Zk(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=Ki(),e.pingedLanes|=e.suspendedLanes&i,hi===e&&(wi&i)===i&&(Jr===4||Jr===3&&(wi&130023424)===wi&&500>Ur()-Y_?bu(e,0):K_|=i),go(e,t)}function MT(e,t){t===0&&(e.mode&1?(t=ap,ap<<=1,!(ap&130023424)&&(ap=4194304)):t=1);var i=Ki();e=Pa(e,t),e!==null&&(pd(e,t,i),go(e,i))}function Wk(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),MT(e,i)}function Hk(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(At(314))}a!==null&&a.delete(t),MT(e,i)}var kT;kT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||po.current)fo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return fo=!1,Rk(e,t,i);fo=!!(e.flags&131072)}else fo=!1,_r&&t.flags&1048576&&RS(t,hm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Bp(e,t),e=t.pendingProps;var c=ih(t,Oi.current);Jc(t,i),c=G_(null,t,a,e,c,i);var d=Z_();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mo(a)?(d=!0,um(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,B_(t),c.updater=ug,t.stateNode=c,c._reactInternals=t,ov(t,a,e,i),t=lv(null,t,a,!0,d,i)):(t.tag=0,_r&&d&&z_(t),Wi(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Bp(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=qk(a),e=ps(a,e),c){case 0:t=av(null,t,a,e,i);break e;case 1:t=bb(null,t,a,e,i);break e;case 11:t=xb(null,t,a,e,i);break e;case 14:t=wb(null,t,a,ps(a.type,e),i);break e}throw Error(At(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ps(a,c),av(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ps(a,c),bb(e,t,a,c,i);case 3:e:{if(pT(t),e===null)throw Error(At(387));a=t.pendingProps,d=t.memoizedState,c=d.element,DS(e,t),pm(t,a,null,i);var y=t.memoizedState;if(a=y.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=lh(Error(At(423)),t),t=Eb(e,t,a,i,c);break e}else if(a!==c){c=lh(Error(At(424)),t),t=Eb(e,t,a,i,c);break e}else for(Po=Sl(t.stateNode.containerInfo.firstChild),Mo=t,_r=!0,gs=null,i=$S(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(oh(),a===c){t=Ma(e,t,i);break e}Wi(e,t,a,i)}t=t.child}return t;case 5:return VS(t),e===null&&nv(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,Y0(a,c)?y=null:d!==null&&Y0(a,d)&&(t.flags|=32),dT(e,t),Wi(e,t,y,i),t.child;case 6:return e===null&&nv(t),null;case 13:return mT(e,t,i);case 4:return N_(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=sh(t,null,a,i):Wi(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ps(a,c),xb(e,t,a,c,i);case 7:return Wi(e,t,t.pendingProps,i),t.child;case 8:return Wi(e,t,t.pendingProps.children,i),t.child;case 12:return Wi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,d=t.memoizedProps,y=c.value,ur(fm,a._currentValue),a._currentValue=y,d!==null)if(Ss(d.value,y)){if(d.children===c.children&&!po.current){t=Ma(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){y=d.child;for(var b=l.firstContext;b!==null;){if(b.context===a){if(d.tag===1){b=Ca(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var C=w.pending;C===null?b.next=b:(b.next=C.next,C.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),rv(d.return,i,t),l.lanes|=i;break}b=b.next}}else if(d.tag===10)y=d.type===t.type?null:d.child;else if(d.tag===18){if(y=d.return,y===null)throw Error(At(341));y.lanes|=i,l=y.alternate,l!==null&&(l.lanes|=i),rv(y,i,t),y=d.sibling}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}Wi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Jc(t,i),c=Yo(c),a=a(c),t.flags|=1,Wi(e,t,a,i),t.child;case 14:return a=t.type,c=ps(a,t.pendingProps),c=ps(a.type,c),wb(e,t,a,c,i);case 15:return hT(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:ps(a,c),Bp(e,t),t.tag=1,mo(a)?(e=!0,um(t)):e=!1,Jc(t,i),NS(t,a,c),ov(t,a,c,i),lv(null,t,a,!0,e,i);case 19:return gT(e,t,i);case 22:return fT(e,t,i)}throw Error(At(156,t.tag))};function zT(e,t){return iS(e,t)}function Xk(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(e,t,i,a){return new Xk(e,t,i,a)}function t1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qk(e){if(typeof e=="function")return t1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===x_)return 11;if(e===w_)return 14}return 2}function Al(e,t){var i=e.alternate;return i===null?(i=Xo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function $p(e,t,i,a,c,d){var y=2;if(a=e,typeof e=="function")t1(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case zc:return Eu(i.children,c,d,t);case __:y=8,c|=8;break;case P0:return e=Xo(12,i,t,c|2),e.elementType=P0,e.lanes=d,e;case M0:return e=Xo(13,i,t,c),e.elementType=M0,e.lanes=d,e;case k0:return e=Xo(19,i,t,c),e.elementType=k0,e.lanes=d,e;case UE:return dg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BE:y=10;break e;case NE:y=9;break e;case x_:y=11;break e;case w_:y=14;break e;case hl:y=16,a=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=Xo(y,i,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function Eu(e,t,i,a){return e=Xo(7,e,a,t),e.lanes=i,e}function dg(e,t,i,a){return e=Xo(22,e,a,t),e.elementType=UE,e.lanes=i,e.stateNode={isHidden:!1},e}function Hy(e,t,i){return e=Xo(6,e,null,t),e.lanes=i,e}function Xy(e,t,i){return t=Xo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kk(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ay(0),this.expirationTimes=Ay(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ay(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function n1(e,t,i,a,c,d,y,l,b){return e=new Kk(e,t,i,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Xo(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},B_(d),e}function Yk(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function LT(e){if(!e)return Ml;e=e._reactInternals;e:{if(Ru(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(mo(i))return zS(e,i,t)}return t}function RT(e,t,i,a,c,d,y,l,b){return e=n1(i,a,!0,e,c,d,y,l,b),e.context=LT(null),i=e.current,a=Ki(),c=Il(i),d=Ca(a,c),d.callback=t??null,Tl(i,d,c),e.current.lanes=c,pd(e,c,a),go(e,a),e}function pg(e,t,i,a){var c=t.current,d=Ki(),y=Il(c);return i=LT(i),t.context===null?t.context=i:t.pendingContext=i,t=Ca(d,y),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Tl(c,t,y),e!==null&&(Es(e,c,y,d),Fp(e,c,y)),y}function bm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function r1(e,t){Lb(e,t),(e=e.alternate)&&Lb(e,t)}function Jk(){return null}var OT=typeof reportError=="function"?reportError:function(e){console.error(e)};function i1(e){this._internalRoot=e}mg.prototype.render=i1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));pg(e,t,null,null)};mg.prototype.unmount=i1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Au(function(){pg(null,e,null,null)}),t[Aa]=null}};function mg(e){this._internalRoot=e}mg.prototype.unstable_scheduleHydration=function(e){if(e){var t=hS();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ml.length&&t!==0&&t<ml[i].priority;i++);ml.splice(i,0,e),i===0&&dS(e)}};function o1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rb(){}function Qk(e,t,i,a,c){if(c){if(typeof a=="function"){var d=a;a=function(){var w=bm(y);d.call(w)}}var y=RT(t,a,e,0,null,!1,!1,"",Rb);return e._reactRootContainer=y,e[Aa]=y.current,Jf(e.nodeType===8?e.parentNode:e),Au(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var l=a;a=function(){var w=bm(b);l.call(w)}}var b=n1(e,0,!1,null,null,!1,!1,"",Rb);return e._reactRootContainer=b,e[Aa]=b.current,Jf(e.nodeType===8?e.parentNode:e),Au(function(){pg(t,b,i,a)}),b}function yg(e,t,i,a,c){var d=i._reactRootContainer;if(d){var y=d;if(typeof c=="function"){var l=c;c=function(){var b=bm(y);l.call(b)}}pg(t,y,e,c)}else y=Qk(i,t,e,c,a);return bm(y)}uS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=vf(t.pendingLanes);i!==0&&(S_(t,i|1),go(t,Ur()),!(Gn&6)&&(uh=Ur()+500,Fl()))}break;case 13:Au(function(){var a=Pa(e,1);if(a!==null){var c=Ki();Es(a,e,1,c)}}),r1(e,1)}};T_=function(e){if(e.tag===13){var t=Pa(e,134217728);if(t!==null){var i=Ki();Es(t,e,134217728,i)}r1(e,134217728)}};cS=function(e){if(e.tag===13){var t=Il(e),i=Pa(e,t);if(i!==null){var a=Ki();Es(i,e,t,a)}r1(e,t)}};hS=function(){return Qn};fS=function(e,t){var i=Qn;try{return Qn=e,t()}finally{Qn=i}};U0=function(e,t,i){switch(t){case"input":if(R0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=ag(a);if(!c)throw Error(At(90));VE(a),R0(a,c)}}}break;case"textarea":ZE(e,i);break;case"select":t=i.value,t!=null&&Xc(e,!!i.multiple,t,!1)}};JE=J_;QE=Au;var e3={usingClientEntryPoint:!1,Events:[gd,Fc,ag,KE,YE,J_]},pf={findFiberByHostInstance:vu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},t3={bundleType:pf.bundleType,version:pf.version,rendererPackageName:pf.rendererPackageName,rendererConfig:pf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nS(e),e===null?null:e.stateNode},findFiberByHostInstance:pf.findFiberByHostInstance||Jk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vp.isDisabled&&vp.supportsFiber)try{rg=vp.inject(t3),Ws=vp}catch{}}zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e3;zo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!o1(t))throw Error(At(200));return Yk(e,t,null,i)};zo.createRoot=function(e,t){if(!o1(e))throw Error(At(299));var i=!1,a="",c=OT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=n1(e,1,!1,null,null,i,!1,a,c),e[Aa]=t.current,Jf(e.nodeType===8?e.parentNode:e),new i1(t)};zo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=nS(t),e=e===null?null:e.stateNode,e};zo.flushSync=function(e){return Au(e)};zo.hydrate=function(e,t,i){if(!gg(t))throw Error(At(200));return yg(null,e,t,!0,i)};zo.hydrateRoot=function(e,t,i){if(!o1(e))throw Error(At(405));var a=i!=null&&i.hydratedSources||null,c=!1,d="",y=OT;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=RT(t,null,e,1,i??null,c,!1,d,y),e[Aa]=t.current,Jf(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new mg(t)};zo.render=function(e,t,i){if(!gg(t))throw Error(At(200));return yg(null,e,t,!1,i)};zo.unmountComponentAtNode=function(e){if(!gg(e))throw Error(At(40));return e._reactRootContainer?(Au(function(){yg(null,null,e,!1,function(){e._reactRootContainer=null,e[Aa]=null})}),!0):!1};zo.unstable_batchedUpdates=J_;zo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!gg(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return yg(e,t,i,!1,a)};zo.version="18.2.0-next-9e3b772b8-20220608";function FT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FT)}catch(e){console.error(e)}}FT(),RE.exports=zo;var s1=RE.exports;const n3=fd(s1);var jT={exports:{}};(function(e,t){(function(i,a){e.exports=a()})(pl,function(){var i,a,c;function d(l,b){if(!i)i=b;else if(!a)a=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",C={};i(C),c=b(C),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var w=C;function C(o,n){this.x=o,this.y=n}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),m=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var E=b(w),z=O;function O(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}O.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var _=0,T=1;for(s=o,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<n));h++)o>m?_=s:T=s,s=.5*(T-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Q=b(z);function K(o,n,s,h){const m=new Q(o,n,s,h);return function(v){return m.solve(v)}}const pe=K(.25,.1,.25,1);function G(o,n,s){return Math.min(s,Math.max(n,o))}function V(o,n,s){const h=s-n,m=((o-n)%h+h)%h+n;return m===n?s:m}function B(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let oe=1;function W(o,n){o.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function D(o,n,s){const h={};for(const m in o)h[m]=n.call(s||this,o[m],m,o);return h}function S(o,n,s){const h={};for(const m in o)n.call(s||this,o[m],m,o)&&(h[m]=o[m]);return h}function P(o){return Array.isArray(o)?o.map(P):typeof o=="object"&&o?D(o,P):o}const Z={};function J(o){Z[o]||(typeof console<"u"&&console.warn(o),Z[o]=!0)}function H(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ye(o){let n=0;for(let s,h,m=0,v=o.length,_=v-1;m<v;_=m++)s=o[m],h=o[_],n+=(h.x-s.x)*(s.y+h.y);return n}function ve(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let xe=null;function te(o){if(xe==null){const n=o.navigator?o.navigator.userAgent:null;xe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return xe}function ae(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ie,me;const we={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(ie||(ie=document.createElement("a")),ie.href=o,ie.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(me==null&&(me=matchMedia("(prefers-reduced-motion: reduce)")),me.matches)}},_e={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class $e extends Error{constructor(n,s,h,m){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=m}}const ke=ve()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Le=o=>_e.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Xe(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:ke(),signal:s.signal});let m=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(_=>_.ok?(T=>{(o.type==="arrayBuffer"||o.type==="image"?T.arrayBuffer():o.type==="json"?T.json():T.text()).then(A=>{v||(m=!0,n(null,A,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(A=>{v||n(new Error(A.message))})})(_):_.blob().then(T=>n(new $e(_.status,_.statusText,o.url,T)))).catch(_=>{_.code!==20&&n(new Error(_.message))}),{cancel:()=>{v=!0,m||s.abort()}}}const Ve=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!ve())return(Le(o.url)||Xe)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ke())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Xe(o,n);if(ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,m){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const _ in h.headers)v.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let _=v.response;if(h.type==="json")try{_=JSON.parse(v.response)}catch(T){return m(T)}m(null,_,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const _=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new $e(v.status,v.statusText,h.url,_))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},ot=function(o,n){return Ve(B(o,{type:"arrayBuffer"}),n)};function ht(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function gt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function Lt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class ft{constructor(n,s={}){B(this,s),this.type=n}}class wt extends ft{constructor(n,s={}){super("error",B({error:n},s))}}class Nt{on(n,s){return this._listeners=this._listeners||{},gt(n,s,this._listeners),this}off(n,s){return Lt(n,s,this._listeners),Lt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},gt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new ft(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const T of m)T.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const T of v)Lt(h,T,this._oneTimeListeners),T.call(this,n);const _=this._eventedParent;_&&(B(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof wt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Je={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const sn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wn(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return sn.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Ht(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Ht(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Ht(o[s],n[s]))return!1;return!0}return o===n}const Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function un(o,n,s){s.push({command:Ft.addSource,args:[o,n[o]]})}function Se(o,n,s){n.push({command:Ft.removeSource,args:[o]}),s[o]=!0}function F(o,n,s,h){Se(o,s,h),un(o,n,s)}function R(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Ht(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Ht(o[s][h],n[s][h]))return!1;return!0}function ge(o,n,s,h,m,v){let _;for(_ in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,_)&&(Ht(o[_],n[_])||s.push({command:v,args:[h,_,n[_],m]}));for(_ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(Ht(o[_],n[_])||s.push({command:v,args:[h,_,n[_],m]}))}function Ge(o){return o.id}function tt(o,n){return o[n.id]=n,o}class We{constructor(n,s,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function se(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class L extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class j{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(n){return new j(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const be={kind:"null"},Te={kind:"number"},Ke={kind:"string"},et={kind:"boolean"},$t={kind:"color"},vn={kind:"object"},Tt={kind:"value"},An={kind:"collator"},_n={kind:"formatted"},Qr={kind:"padding"},di={kind:"resolvedImage"};function cr(o,n){return{kind:"array",itemType:o,N:n}}function Ce(o){if(o.kind==="array"){const n=Ce(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ne=[be,Te,Ke,et,$t,_n,vn,cr(Tt),Qr,di];function ue(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!ue(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of ne)if(!ue(s,n))return null}}return`Expected ${Ce(o)} but found ${Ce(n)} instead.`}function Ee(o,n){return n.some(s=>s.kind===o.kind)}function Be(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function Re(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const De=.96422,Oe=.82521,Fe=4/29,Ye=6/29,ct=3*Ye*Ye,ut=Math.PI/180,pt=180/Math.PI;function Jt(o){return(o%=360)<0&&(o+=360),o}function hn([o,n,s,h]){let m,v;const _=Xt((.2225045*(o=Vt(o))+.7168786*(n=Vt(n))+.0606169*(s=Vt(s)))/1);o===n&&n===s?m=v=_:(m=Xt((.4360747*o+.3850649*n+.1430804*s)/De),v=Xt((.0139322*o+.0971045*n+.7141733*s)/Oe));const T=116*_-16;return[T<0?0:T,500*(m-_),200*(_-v),h]}function Vt(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Xt(o){return o>.008856451679035631?Math.pow(o,1/3):o/ct+Fe}function ln([o,n,s,h]){let m=(o+16)/116,v=isNaN(n)?m:m+n/500,_=isNaN(s)?m:m-s/200;return m=1*mn(m),v=De*mn(v),_=Oe*mn(_),[bn(3.1338561*v-1.6168667*m-.4906146*_),bn(-.9787684*v+1.9161415*m+.033454*_),bn(.0719453*v-.2289914*m+1.4052427*_),h]}function bn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function mn(o){return o>Ye?o*o*o:ct*(o-Fe)}function zn(o){return parseInt(o.padEnd(2,o),16)/255}function Pn(o,n){return Yn(n?o/100:o,0,1)}function Yn(o,n,s){return Math.min(Math.max(n,o),s)}function er(o){return!o.some(Number.isNaN)}const hr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Ln{constructor(n,s,h,m=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,s,h,m]))}static parse(n){if(n instanceof Ln)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase())==="transparent")return[0,0,0,0];const m=hr[h];if(m){const[T,A,U]=m;return[T/255,A/255,U/255,1]}if(/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const T=h.length<6?1:2;let A=1;return[zn(h.slice(A,A+=T)),zn(h.slice(A,A+=T)),zn(h.slice(A,A+=T)),zn(h.slice(A,A+T)||"ff")]}const v=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[T,A,U,X,ee,le,ce,fe,ze,Ae,qe,Qe]=v,Ze=[X||" ",ce||" ",Ae].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const nt=[U,le,ze].join(""),at=nt==="%%%"?100:nt===""?255:0;if(at){const dt=[Yn(+A/at,0,1),Yn(+ee/at,0,1),Yn(+fe/at,0,1),qe?Pn(+qe,Qe):1];if(er(dt))return dt}}return}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[T,A,U,X,ee,le,ce,fe,ze]=_,Ae=[U||" ",ee||" ",ce].join("");if(Ae==="  "||Ae==="  /"||Ae===",,"||Ae===",,,"){const qe=[+A,Yn(+X,0,100),Yn(+le,0,100),fe?Pn(+fe,ze):1];if(er(qe))return function([Qe,Ze,nt,at]){function dt(Ut){const Gt=(Ut+Qe/30)%12,Ot=Ze*Math.min(nt,1-nt);return nt-Ot*Math.max(-1,Math.min(Gt-3,9-Gt,1))}return Qe=Jt(Qe),Ze/=100,nt/=100,[dt(0),dt(8),dt(4),at]}(qe)}}}(n);return s?new Ln(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,m,v]=hn(n),_=Math.sqrt(h*h+m*m);return[Math.round(1e4*_)?Jt(Math.atan2(m,h)*pt):NaN,_,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,m]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${m})`}}Ln.black=new Ln(0,0,0,1),Ln.white=new Ln(1,1,1,1),Ln.transparent=new Ln(0,0,0,0),Ln.red=new Ln(1,0,0,1);class jl{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Dl{constructor(n,s,h,m,v){this.text=n,this.image=s,this.scale=h,this.fontStack=m,this.textColor=v}}class $r{constructor(n){this.sections=n}static fromString(n){return new $r([new Dl(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof $r?n:$r.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Ar{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Ar)return n;if(typeof n=="number")return new Ar([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Ar(n)}}toString(){return JSON.stringify(this.values)}}class Fr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Fr({name:n,available:!1}):null}}function Cn(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function no(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Ln||o instanceof jl||o instanceof $r||o instanceof Ar||o instanceof Fr)return!0;if(Array.isArray(o)){for(const n of o)if(!no(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!no(o[n]))return!1;return!0}return!1}function tr(o){if(o===null)return be;if(typeof o=="string")return Ke;if(typeof o=="boolean")return et;if(typeof o=="number")return Te;if(o instanceof Ln)return $t;if(o instanceof jl)return An;if(o instanceof $r)return _n;if(o instanceof Ar)return Qr;if(o instanceof Fr)return di;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const m=tr(h);if(s){if(s===m)continue;s=Tt;break}s=m}return cr(s||Tt,n)}return vn}function Ys(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Ln||o instanceof $r||o instanceof Ar||o instanceof Fr?o.toString():JSON.stringify(o)}class Qo{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!no(n[1]))return s.error("invalid value");const h=n[1];let m=tr(h);const v=s.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Qo(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Pr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Js={string:Ke,number:Te,boolean:et,object:vn};class lr{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,m=1;const v=n[0];if(v==="array"){let T,A;if(n.length>2){const U=n[1];if(typeof U!="string"||!(U in Js)||U==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);T=Js[U],m++}else T=Tt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);A=n[2],m++}h=cr(T,A)}else{if(!Js[v])throw new Error(`Types doesn't contain name = ${v}`);h=Js[v]}const _=[];for(;m<n.length;m++){const T=s.parse(n[m],m,Tt);if(!T)return null;_.push(T)}return new lr(h,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!ue(this.type,tr(h)))return h;if(s===this.args.length-1)throw new Pr(`Expected value to be of type ${Ce(this.type)}, but found ${Ce(tr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Du={"to-boolean":et,"to-color":$t,"to-number":Te,"to-string":Ke};class Fo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!Du[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const m=Du[h],v=[];for(let _=1;_<n.length;_++){const T=s.parse(n[_],_,Tt);if(!T)return null;v.push(T)}return new Fo(m,v)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,h;for(const m of this.args){if(s=m.evaluate(n),h=null,s instanceof Ln)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Cn(s[0],s[1],s[2],s[3]),!h))return new Ln(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Pr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="padding"){let s;for(const h of this.args){s=h.evaluate(n);const m=Ar.parse(s);if(m)return m}throw new Pr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="number"){let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new Pr(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?$r.fromString(Ys(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Fr.fromString(Ys(this.args[0].evaluate(n))):Ys(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const wh=["Unknown","Point","LineString","Polygon"];class Fi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?wh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Ln.parse(n)),s}}class Cs{constructor(n,s,h=[],m,v=new j,_=[]){this.registry=n,this.path=h,this.key=h.map(T=>`[${T}]`).join(""),this.scope=v,this.errors=_,this.expectedType=m,this._isConstant=s}parse(n,s,h,m,v={}){return s?this.concat(s,h,m)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(m,v,_){return _==="assert"?new lr(v,[m]):_==="coerce"?new Fo(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const T=this.expectedType,A=_.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||A.kind!=="value")if(T.kind!=="color"&&T.kind!=="formatted"&&T.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string")if(T.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array"){if(this.checkSubtype(T,A))return null}else _=h(_,T,s.typeAnnotation||"coerce");else _=h(_,T,s.typeAnnotation||"coerce");else _=h(_,T,s.typeAnnotation||"assert")}if(!(_ instanceof Qo)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const T=new Fi;try{_=new Qo(_.type,_.evaluate(T))}catch(A){return this.error(A.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const m=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Cs(this.registry,this._isConstant,m,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new L(h,n))}checkSubtype(n,s){const h=ue(n,s);return h&&this.error(h),h}}class ei{constructor(n,s,h){this.type=An,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,et);if(!m)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,et);if(!v)return null;let _=null;return h.locale&&(_=s.parse(h.locale,1,Ke),!_)?null:new ei(m,v,_)}evaluate(n){return new jl(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Ei=8192;function Dn(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ja(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Bl(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(s*m*Ei),Math.round(h*m*Ei)]}function bh(o,n,s){const h=o[0]-n[0],m=o[1]-n[1],v=o[0]-s[0],_=o[1]-s[1];return h*_-v*m==0&&h*v<=0&&m*_<=0}function es(o,n){let s=!1;for(let _=0,T=n.length;_<T;_++){const A=n[_];for(let U=0,X=A.length;U<X-1;U++){if(bh(o,A[U],A[U+1]))return!1;(m=A[U])[1]>(h=o)[1]!=(v=A[U+1])[1]>h[1]&&h[0]<(v[0]-m[0])*(h[1]-m[1])/(v[1]-m[1])+m[0]&&(s=!s)}}var h,m,v;return s}function Bu(o,n){for(let s=0;s<n.length;s++)if(es(o,n[s]))return!0;return!1}function Nu(o,n,s,h){const m=h[0]-s[0],v=h[1]-s[1],_=(o[0]-s[0])*v-m*(o[1]-s[1]),T=(n[0]-s[0])*v-m*(n[1]-s[1]);return _>0&&T<0||_<0&&T>0}function Si(o,n,s){for(const U of s)for(let X=0;X<U.length-1;++X)if((T=[(_=U[X+1])[0]-(v=U[X])[0],_[1]-v[1]])[0]*(A=[(m=n)[0]-(h=o)[0],m[1]-h[1]])[1]-T[1]*A[0]!=0&&Nu(h,m,v,_)&&Nu(v,_,h,m))return!0;var h,m,v,_,T,A;return!1}function Nl(o,n){for(let s=0;s<o.length;++s)if(!es(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(Si(o[s],o[s+1],n))return!1;return!0}function Eh(o,n){for(let s=0;s<n.length;s++)if(Nl(o,n[s]))return!0;return!1}function Ul(o,n,s){const h=[];for(let m=0;m<o.length;m++){const v=[];for(let _=0;_<o[m].length;_++){const T=Bl(o[m][_],s);Dn(n,T),v.push(T)}h.push(v)}return h}function Uu(o,n,s){const h=[];for(let m=0;m<o.length;m++){const v=Ul(o[m],n,s);h.push(v)}return h}function $u(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const m=.5*h;let v=o[0]-s[0]>m?-h:s[0]-o[0]>m?h:0;v===0&&(v=o[0]-s[2]>m?-h:s[2]-o[0]>m?h:0),o[0]+=v}Dn(n,o)}function Da(o,n,s,h){const m=Math.pow(2,h.z)*Ei,v=[h.x*Ei,h.y*Ei],_=[];for(const T of o)for(const A of T){const U=[A.x+v[0],A.y+v[1]];$u(U,n,s,m),_.push(U)}return _}function Qs(o,n,s,h){const m=Math.pow(2,h.z)*Ei,v=[h.x*Ei,h.y*Ei],_=[];for(const A of o){const U=[];for(const X of A){const ee=[X.x+v[0],X.y+v[1]];Dn(n,ee),U.push(ee)}_.push(U)}if(n[2]-n[0]<=m/2){(T=n)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const A of _)for(const U of A)$u(U,n,s,m)}var T;return _}class jo{constructor(n,s){this.type=et,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(no(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const v=h.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new jo(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new jo(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new jo(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const T=Ul(h.coordinates,v,_),A=Da(s.geometry(),m,v,_);if(!ja(m,v))return!1;for(const U of A)if(!es(U,T))return!1}if(h.type==="MultiPolygon"){const T=Uu(h.coordinates,v,_),A=Da(s.geometry(),m,v,_);if(!ja(m,v))return!1;for(const U of A)if(!Bu(U,T))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(h.type==="Polygon"){const T=Ul(h.coordinates,v,_),A=Qs(s.geometry(),m,v,_);if(!ja(m,v))return!1;for(const U of A)if(!Nl(U,T))return!1}if(h.type==="MultiPolygon"){const T=Uu(h.coordinates,v,_),A=Qs(s.geometry(),m,v,_);if(!ja(m,v))return!1;for(const U of A)if(!Eh(U,T))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class ts{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new ts(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ti{constructor(n,s,h,m){this.name=n,this.type=s,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],m=ti.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,T=_.filter(([U])=>!Array.isArray(U)||U.length===n.length-1);let A=null;for(const[U,X]of T){A=new Cs(s.registry,yo,s.path,null,s.scope);const ee=[];let le=!1;for(let ce=1;ce<n.length;ce++){const fe=n[ce],ze=Array.isArray(U)?U[ce-1]:U.type,Ae=A.parse(fe,1+ee.length,ze);if(!Ae){le=!0;break}ee.push(Ae)}if(!le)if(Array.isArray(U)&&U.length!==ee.length)A.error(`Expected ${U.length} arguments, but found ${ee.length} instead.`);else{for(let ce=0;ce<ee.length;ce++){const fe=Array.isArray(U)?U[ce]:U.type,ze=ee[ce];A.concat(ce+1).checkSubtype(fe,ze.type)}if(A.errors.length===0)return new ti(h,v,X,ee)}}if(T.length===1)s.errors.push(...A.errors);else{const U=(T.length?T:_).map(([ee])=>{return le=ee,Array.isArray(le)?`(${le.map(Ce).join(", ")})`:`(${Ce(le.type)}...)`;var le}).join(" | "),X=[];for(let ee=1;ee<n.length;ee++){const le=s.parse(n[ee],1+X.length);if(!le)return null;X.push(Ce(le.type))}s.error(`Expected arguments of type ${U}, but found (${X.join(", ")}) instead.`)}return null}static register(n,s){ti.definitions=s;for(const h in s)n[h]=ti}}function yo(o){if(o instanceof ts)return yo(o.boundExpression);if(o instanceof ti&&o.name==="error"||o instanceof ei||o instanceof jo)return!1;const n=o instanceof Fo||o instanceof lr;let s=!0;return o.eachChild(h=>{s=n?s&&yo(h):s&&h instanceof Qo}),!!s&&Ba(o)&&ta(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ba(o){if(o instanceof ti&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof jo)return!1;let n=!0;return o.eachChild(s=>{n&&!Ba(s)&&(n=!1)}),n}function ea(o){if(o instanceof ti&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!ea(s)&&(n=!1)}),n}function ta(o,n){if(o instanceof ti&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ta(h,n)&&(s=!1)}),s}function na(o,n){const s=o.length-1;let h,m,v=0,_=s,T=0;for(;v<=_;)if(T=Math.floor((v+_)/2),h=o[T],m=o[T+1],h<=n){if(T===s||n<m)return T;v=T+1}else{if(!(h>n))throw new Pr("Input is not a number.");_=T-1}return 0}class Is{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Te);if(!h)return null;const m=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<n.length;_+=2){const T=_===1?-1/0:n[_],A=n[_+1],U=_,X=_+1;if(typeof T!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(m.length&&m[m.length-1][0]>=T)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const ee=s.parse(A,X,v);if(!ee)return null;v=v||ee.type,m.push([T,ee])}return new Is(v,h,m)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const v=s.length;return m>=s[v-1]?h[v-1].evaluate(n):h[na(s,m)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ra(o,n,s){return o+s*(n-o)}function ia(o,n,s){return o.map((h,m)=>ra(h,n[m],s))}const ni={number:ra,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[m,v,_,T]=ia(o.rgb,n.rgb,s);return new Ln(m,v,_,T,!1)}case"hcl":{const[m,v,_,T]=o.hcl,[A,U,X,ee]=n.hcl;let le,ce;if(isNaN(m)||isNaN(A))isNaN(m)?isNaN(A)?le=NaN:(le=A,_!==1&&_!==0||(ce=U)):(le=m,X!==1&&X!==0||(ce=v));else{let Qe=A-m;A>m&&Qe>180?Qe-=360:A<m&&m-A>180&&(Qe+=360),le=m+s*Qe}const[fe,ze,Ae,qe]=function([Qe,Ze,nt,at]){return Qe=isNaN(Qe)?0:Qe*ut,ln([nt,Math.cos(Qe)*Ze,Math.sin(Qe)*Ze,at])}([le,ce??ra(v,U,s),ra(_,X,s),ra(T,ee,s)]);return new Ln(fe,ze,Ae,qe,!1)}case"lab":{const[m,v,_,T]=ln(ia(o.lab,n.lab,s));return new Ln(m,v,_,T,!1)}}},array:ia,padding:function(o,n,s){return new Ar(ia(o.values,n.values,s))}};class qr{constructor(n,s,h,m,v){this.type=n,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[_,T]of v)this.labels.push(_),this.outputs.push(T)}static interpolationFactor(n,s,h,m){let v=0;if(n.name==="exponential")v=$l(s,n.base,h,m);else if(n.name==="linear")v=$l(s,1,h,m);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new Q(_[0],_[1],_[2],_[3]).solve($l(s,1,h,m))}return v}static parse(n,s){let[h,m,v,..._]=n;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const U=m[1];if(typeof U!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:U}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const U=m.slice(1);if(U.length!==4||U.some(X=>typeof X!="number"||X<0||X>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:U}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Te),!v)return null;const T=[];let A=null;h==="interpolate-hcl"||h==="interpolate-lab"?A=$t:s.expectedType&&s.expectedType.kind!=="value"&&(A=s.expectedType);for(let U=0;U<_.length;U+=2){const X=_[U],ee=_[U+1],le=U+3,ce=U+4;if(typeof X!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(T.length&&T[T.length-1][0]>=X)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',le);const fe=s.parse(ee,ce,A);if(!fe)return null;A=A||fe.type,T.push([X,fe])}return Re(A,Te)||Re(A,$t)||Re(A,Qr)||Re(A,cr(Te))?new qr(A,h,m,v,T):s.error(`Type ${Ce(A)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const v=s.length;if(m>=s[v-1])return h[v-1].evaluate(n);const _=na(s,m),T=qr.interpolationFactor(this.interpolation,m,s[_],s[_+1]),A=h[_].evaluate(n),U=h[_+1].evaluate(n);switch(this.operator){case"interpolate":return ni[this.type.kind](A,U,T);case"interpolate-hcl":return ni.color(A,U,T,"hcl");case"interpolate-lab":return ni.color(A,U,T,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function $l(o,n,s,h){const m=h-s,v=o-s;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class Na{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const T of n.slice(1)){const A=s.parse(T,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,v.push(A)}if(!h)throw new Error("No output type");const _=m&&v.some(T=>ue(m,T.type));return new Na(_?Tt:h,v)}evaluate(n){let s,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(n),h&&h instanceof Fr&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Ua{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const T=s.parse(n[v+1],v+1);if(!T)return null;h.push([_,T])}const m=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return m?new Ua(h,m):null}outputDefined(){return this.result.outputDefined()}}class Vl{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Te),m=s.parse(n[2],2,cr(s.expectedType||Tt));return h&&m?new Vl(m.type.itemType,h,m):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new Pr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Pr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Pr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class $a{constructor(n,s){this.type=et,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Tt),m=s.parse(n[2],2,Tt);return h&&m?Ee(h.type,[et,Ke,Te,be,Tt])?new $a(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Be(s,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(tr(s))} instead.`);if(!Be(h,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${Ce(tr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Va{constructor(n,s,h){this.type=Te,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Tt),m=s.parse(n[2],2,Tt);if(!h||!m)return null;if(!Ee(h.type,[et,Ke,Te,be,Tt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Te);return v?new Va(h,m,v):null}return new Va(h,m)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Be(s,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${Ce(tr(s))} instead.`);if(!Be(h,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${Ce(tr(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Mn{constructor(n,s,h,m,v,_){this.inputType=n,this.type=s,this.input=h,this.cases=m,this.outputs=v,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const v={},_=[];for(let U=2;U<n.length-1;U+=2){let X=n[U];const ee=n[U+1];Array.isArray(X)||(X=[X]);const le=s.concat(U);if(X.length===0)return le.error("Expected at least one branch label.");for(const fe of X){if(typeof fe!="number"&&typeof fe!="string")return le.error("Branch labels must be numbers or strings.");if(typeof fe=="number"&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return le.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof fe=="number"&&Math.floor(fe)!==fe)return le.error("Numeric branch labels must be integer values.");if(h){if(le.checkSubtype(h,tr(fe)))return null}else h=tr(fe);if(v[String(fe)]!==void 0)return le.error("Branch labels must be unique.");v[String(fe)]=_.length}const ce=s.parse(ee,U,m);if(!ce)return null;m=m||ce.type,_.push(ce)}const T=s.parse(n[1],1,Tt);if(!T)return null;const A=s.parse(n[n.length-1],n.length-1,m);return A?T.type.kind!=="value"&&s.concat(1).checkSubtype(h,T.type)?null:new Mn(h,m,T,v,_,A):null}evaluate(n){const s=this.input.evaluate(n);return(tr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Gl{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let _=1;_<n.length-1;_+=2){const T=s.parse(n[_],_,et);if(!T)return null;const A=s.parse(n[_+1],_+1,h);if(!A)return null;m.push([T,A]),h=h||A.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new Gl(h,m,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Ga{constructor(n,s,h,m){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Tt),m=s.parse(n[2],2,Te);if(!h||!m)return null;if(!Ee(h.type,[cr(Tt),Ke,Tt]))return s.error(`Expected first argument to be of type array or string, but found ${Ce(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Te);return v?new Ga(h.type,h,m,v):null}return new Ga(h.type,h,m)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Be(s,["string","array"]))throw new Pr(`Expected first argument to be of type array or string, but found ${Ce(tr(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return s.slice(h,m)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Zl(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Vu(o,n,s,h){return h.compare(n,s)===0}function As(o,n,s){const h=o!=="=="&&o!=="!=";return class DT{constructor(v,_,T){this.type=et,this.lhs=v,this.rhs=_,this.collator=T,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const T=v[0];let A=_.parse(v[1],1,Tt);if(!A)return null;if(!Zl(T,A.type))return _.concat(1).error(`"${T}" comparisons are not supported for type '${Ce(A.type)}'.`);let U=_.parse(v[2],2,Tt);if(!U)return null;if(!Zl(T,U.type))return _.concat(2).error(`"${T}" comparisons are not supported for type '${Ce(U.type)}'.`);if(A.type.kind!==U.type.kind&&A.type.kind!=="value"&&U.type.kind!=="value")return _.error(`Cannot compare types '${Ce(A.type)}' and '${Ce(U.type)}'.`);h&&(A.type.kind==="value"&&U.type.kind!=="value"?A=new lr(U.type,[A]):A.type.kind!=="value"&&U.type.kind==="value"&&(U=new lr(A.type,[U])));let X=null;if(v.length===4){if(A.type.kind!=="string"&&U.type.kind!=="string"&&A.type.kind!=="value"&&U.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(X=_.parse(v[3],3,An),!X)return null}return new DT(A,U,X)}evaluate(v){const _=this.lhs.evaluate(v),T=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const A=tr(_),U=tr(T);if(A.kind!==U.kind||A.kind!=="string"&&A.kind!=="number")throw new Pr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${A.kind}, ${U.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const A=tr(_),U=tr(T);if(A.kind!=="string"||U.kind!=="string")return n(v,_,T)}return this.collator?s(v,_,T,this.collator.evaluate(v)):n(v,_,T)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Sh=As("==",function(o,n,s){return n===s},Vu),Th=As("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!Vu(0,n,s,h)}),Gu=As("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Ch=As(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Wl=As("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Ih=As(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class Hl{constructor(n,s,h,m,v){this.type=Ke,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Te);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=s.parse(m.locale,1,Ke),!v))return null;let _=null;if(m.currency&&(_=s.parse(m.currency,1,Ke),!_))return null;let T=null;if(m["min-fraction-digits"]&&(T=s.parse(m["min-fraction-digits"],1,Te),!T))return null;let A=null;return m["max-fraction-digits"]&&(A=s.parse(m["max-fraction-digits"],1,Te),!A)?null:new Hl(h,v,_,T,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Za{constructor(n){this.type=_n,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let v=!1;for(let _=1;_<=n.length-1;++_){const T=n[_];if(v&&typeof T=="object"&&!Array.isArray(T)){v=!1;let A=null;if(T["font-scale"]&&(A=s.parse(T["font-scale"],1,Te),!A))return null;let U=null;if(T["text-font"]&&(U=s.parse(T["text-font"],1,cr(Ke)),!U))return null;let X=null;if(T["text-color"]&&(X=s.parse(T["text-color"],1,$t),!X))return null;const ee=m[m.length-1];ee.scale=A,ee.font=U,ee.textColor=X}else{const A=s.parse(n[_],1,Tt);if(!A)return null;const U=A.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:A,scale:null,font:null,textColor:null})}}return new Za(m)}evaluate(n){return new $r(this.sections.map(s=>{const h=s.content.evaluate(n);return tr(h)===di?new Dl("",h,null,null,null):new Dl(Ys(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class Xl{constructor(n){this.type=di,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ke);return h?new Xl(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Fr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class ql{constructor(n){this.type=Te,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ce(h.type)} instead.`):new ql(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Pr(`Expected value to be of type string or array, but found ${Ce(tr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ps={"==":Sh,"!=":Th,">":Ch,"<":Gu,">=":Ih,"<=":Wl,array:lr,at:Vl,boolean:lr,case:Gl,coalesce:Na,collator:ei,format:Za,image:Xl,in:$a,"index-of":Va,interpolate:qr,"interpolate-hcl":qr,"interpolate-lab":qr,length:ql,let:Ua,literal:Qo,match:Mn,number:lr,"number-format":Hl,object:lr,slice:Ga,step:Is,string:lr,"to-boolean":Fo,"to-color":Fo,"to-number":Fo,"to-string":Fo,var:ts,within:jo};function Kl(o,[n,s,h,m]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=m?m.evaluate(o):1,_=Cn(n,s,h,v);if(_)throw new Pr(_);return new Ln(n/255,s/255,h/255,v,!1)}function Wa(o,n){return o in n}function Yl(o,n){const s=n[o];return s===void 0?null:s}function ns(o){return{type:o}}function Zu(o){return{result:"success",value:o}}function Ms(o){return{result:"error",value:o}}function rs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Wu(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Jl(o){return!!o.expression&&o.expression.interpolated}function Bn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ha(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Xa(o){return o}function Hu(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),v=o.type||(Jl(n)?"exponential":"interval");if(s||n.type==="padding"){const X=s?Ln.parse:Ar.parse;(o=se({},o)).stops&&(o.stops=o.stops.map(ee=>[ee[0],X(ee[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let T,A,U;if(v==="exponential")T=qu;else if(v==="interval")T=Ti;else if(v==="categorical"){T=Xu,A=Object.create(null);for(const X of o.stops)A[X[0]]=X[1];U=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);T=Ah}if(h){const X={},ee=[];for(let fe=0;fe<o.stops.length;fe++){const ze=o.stops[fe],Ae=ze[0].zoom;X[Ae]===void 0&&(X[Ae]={zoom:Ae,type:o.type,property:o.property,default:o.default,stops:[]},ee.push(Ae)),X[Ae].stops.push([ze[0].value,ze[1]])}const le=[];for(const fe of ee)le.push([X[fe].zoom,Hu(X[fe],n)]);const ce={name:"linear"};return{kind:"composite",interpolationType:ce,interpolationFactor:qr.interpolationFactor.bind(void 0,ce),zoomStops:le.map(fe=>fe[0]),evaluate:({zoom:fe},ze)=>qu({stops:le,base:o.base},n,fe).evaluate(fe,ze)}}if(m){const X=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:qr.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>T(o,n,ee,A,U)}}return{kind:"source",evaluate(X,ee){const le=ee&&ee.properties?ee.properties[o.property]:void 0;return le===void 0?ro(o.default,n.default):T(o,n,le,A,U)}}}function ro(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Xu(o,n,s,h,m){return ro(typeof s===m?h[s]:void 0,o.default,n.default)}function Ti(o,n,s){if(Bn(s)!=="number")return ro(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const m=na(o.stops.map(v=>v[0]),s);return o.stops[m][1]}function qu(o,n,s){const h=o.base!==void 0?o.base:1;if(Bn(s)!=="number")return ro(o.default,n.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const v=na(o.stops.map(X=>X[0]),s),_=function(X,ee,le,ce){const fe=ce-le,ze=X-le;return fe===0?0:ee===1?ze/fe:(Math.pow(ee,ze)-1)/(Math.pow(ee,fe)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),T=o.stops[v][1],A=o.stops[v+1][1],U=ni[n.type]||Xa;return typeof T.evaluate=="function"?{evaluate(...X){const ee=T.evaluate.apply(void 0,X),le=A.evaluate.apply(void 0,X);if(ee!==void 0&&le!==void 0)return U(ee,le,_,o.colorSpace)}}:U(T,A,_,o.colorSpace)}function Ah(o,n,s){switch(n.type){case"color":s=Ln.parse(s);break;case"formatted":s=$r.fromString(s.toString());break;case"resolvedImage":s=Fr.fromString(s.toString());break;case"padding":s=Ar.parse(s);break;default:Bn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return ro(s,o.default,n.default)}ti.register(Ps,{error:[{kind:"error"},[Ke],(o,[n])=>{throw new Pr(n.evaluate(o))}],typeof:[Ke,[Tt],(o,[n])=>Ce(tr(n.evaluate(o)))],"to-rgba":[cr(Te,4),[$t],(o,[n])=>{const[s,h,m,v]=n.evaluate(o).rgb;return[255*s,255*h,255*m,v]}],rgb:[$t,[Te,Te,Te],Kl],rgba:[$t,[Te,Te,Te,Te],Kl],has:{type:et,overloads:[[[Ke],(o,[n])=>Wa(n.evaluate(o),o.properties())],[[Ke,vn],(o,[n,s])=>Wa(n.evaluate(o),s.evaluate(o))]]},get:{type:Tt,overloads:[[[Ke],(o,[n])=>Yl(n.evaluate(o),o.properties())],[[Ke,vn],(o,[n,s])=>Yl(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Tt,[Ke],(o,[n])=>Yl(n.evaluate(o),o.featureState||{})],properties:[vn,[],o=>o.properties()],"geometry-type":[Ke,[],o=>o.geometryType()],id:[Tt,[],o=>o.id()],zoom:[Te,[],o=>o.globals.zoom],"heatmap-density":[Te,[],o=>o.globals.heatmapDensity||0],"line-progress":[Te,[],o=>o.globals.lineProgress||0],accumulated:[Tt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Te,ns(Te),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Te,ns(Te),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Te,overloads:[[[Te,Te],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Te],(o,[n])=>-n.evaluate(o)]]},"/":[Te,[Te,Te],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Te,[Te,Te],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Te,[],()=>Math.LN2],pi:[Te,[],()=>Math.PI],e:[Te,[],()=>Math.E],"^":[Te,[Te,Te],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Te,[Te],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Te,[Te],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Te,[Te],(o,[n])=>Math.log(n.evaluate(o))],log2:[Te,[Te],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Te,[Te],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Te,[Te],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Te,[Te],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Te,[Te],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Te,[Te],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Te,[Te],(o,[n])=>Math.atan(n.evaluate(o))],min:[Te,ns(Te),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Te,ns(Te),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Te,[Te],(o,[n])=>Math.abs(n.evaluate(o))],round:[Te,[Te],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Te,[Te],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Te,[Te],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[et,[Ke,Tt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[et,[Tt],(o,[n])=>o.id()===n.value],"filter-type-==":[et,[Ke],(o,[n])=>o.geometryType()===n.value],"filter-<":[et,[Ke,Tt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[et,[Tt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[et,[Ke,Tt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[et,[Tt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[et,[Ke,Tt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[et,[Tt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[et,[Ke,Tt],(o,[n,s])=>{const h=o.properties()[n.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[et,[Tt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[et,[Tt],(o,[n])=>n.value in o.properties()],"filter-has-id":[et,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[et,[cr(Ke)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[et,[cr(Tt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[et,[Ke,cr(Tt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[et,[Ke,cr(Tt)],(o,[n,s])=>function(h,m,v,_){for(;v<=_;){const T=v+_>>1;if(m[T]===h)return!0;m[T]>h?_=T-1:v=T+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:et,overloads:[[[et,et],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[ns(et),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:et,overloads:[[[et,et],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[ns(et),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[et,[et],(o,[n])=>!n.evaluate(o)],"is-supported-script":[et,[Ke],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Ke,[Ke],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Ke,[Ke],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Ke,ns(Tt),(o,n)=>n.map(s=>Ys(s.evaluate(o))).join("")],"resolved-locale":[Ke,[An],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Ql{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Fi,this._defaultValue=s?(h=s).type==="color"&&Ha(h.default)?new Ln(0,0,0,0):h.type==="color"?Ln.parse(h.default)||null:h.type==="padding"?Ar.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,m,v,_){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,m,v,_){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Pr(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function qa(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ps}function Kn(o,n){const s=new Cs(Ps,yo,[],n?function(m){const v={color:$t,string:Ke,number:Te,enum:Ke,boolean:et,formatted:_n,padding:Qr,resolvedImage:di};return m.type==="array"?cr(v[m.value]||Tt,m.length):v[m.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Zu(new Ql(h,n)):Ms(s.errors)}class eu{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!ea(s.expression)}evaluateWithoutErrorHandling(n,s,h,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,v,_)}evaluate(n,s,h,m,v,_){return this._styleExpression.evaluate(n,s,h,m,v,_)}}class xn{constructor(n,s,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!ea(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,s,h,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,v,_)}evaluate(n,s,h,m,v,_){return this._styleExpression.evaluate(n,s,h,m,v,_)}interpolationFactor(n,s,h){return this.interpolationType?qr.interpolationFactor(this.interpolationType,n,s,h):0}}function Ka(o,n){const s=Kn(o,n);if(s.result==="error")return s;const h=s.value.expression,m=Ba(h);if(!m&&!rs(n))return Ms([new L("","data expressions not supported")]);const v=ta(h,["zoom"]);if(!v&&!Wu(n))return Ms([new L("","zoom expressions not supported")]);const _=Nn(h);return _||v?_ instanceof L?Ms([_]):_ instanceof qr&&!Jl(n)?Ms([new L("",'"interpolate" expressions cannot be used with this property')]):Zu(_?new xn(m?"camera":"composite",s.value,_.labels,_ instanceof qr?_.interpolation:void 0):new eu(m?"constant":"source",s.value)):Ms([new L("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Wn{constructor(n,s){this._parameters=n,this._specification=s,se(this,Hu(this._parameters,this._specification))}static deserialize(n){return new Wn(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Nn(o){let n=null;if(o instanceof Ua)n=Nn(o.result);else if(o instanceof Na){for(const s of o.args)if(n=Nn(s),n)break}else(o instanceof Is||o instanceof qr)&&o.input instanceof ti&&o.input.name==="zoom"&&(n=o);return n instanceof L||o.eachChild(s=>{const h=Nn(s);h instanceof L?n=h:!n&&h?n=new L("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new L("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function is(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!is(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const tu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nu(o){if(o==null)return{filter:()=>!0,needGeometry:!1};is(o)||(o=io(o));const n=Kn(o,tu);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>n.value.evaluate(s,h,{},m),needGeometry:oa(o)}}function Ph(o,n){return o<n?-1:o>n?1:0}function oa(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(oa(o[n]))return!0;return!1}function io(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Ya(o[1],o[2],"=="):n==="!="?sa(Ya(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Ya(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(io))):n==="all"?["all"].concat(o.slice(1).map(io)):n==="none"?["all"].concat(o.slice(1).map(io).map(sa)):n==="in"?Ja(o[1],o.slice(2)):n==="!in"?sa(Ja(o[1],o.slice(2))):n==="has"?ks(o[1]):n==="!has"?sa(ks(o[1])):n!=="within"||o;var s}function Ya(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ja(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Ph)]]:["filter-in-small",o,["literal",n]]}}function ks(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function sa(o){return["!",o]}function oo(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const v of o)m+=`${oo(v)},`;return`${m}]`}const s=Object.keys(o).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${oo(o[s[m]])},`;return`${h}}`}function zs(o){let n="";for(const s of sn)n+=`/${oo(o[s])}`;return n}function Vr(o){const n=o.value;return n?[new We(o.key,n,"constants have been deprecated as of v8")]:[]}function Hn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function vo(o){if(Array.isArray(o))return o.map(vo);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=vo(o[s]);return n}return Hn(o)}function ri(o){const n=o.key,s=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},v=o.style,_=o.styleSpec,T=o.validateSpec;let A=[];const U=Bn(s);if(U!=="object")return[new We(n,s,`object expected, ${U} found`)];for(const X in s){const ee=X.split(".")[0],le=h[ee]||h["*"];let ce;if(m[ee])ce=m[ee];else if(h[ee])ce=T;else if(m["*"])ce=m["*"];else{if(!h["*"]){A.push(new We(n,s[X],`unknown property "${X}"`));continue}ce=T}A=A.concat(ce({key:(n&&`${n}.`)+X,value:s[X],valueSpec:le,style:v,styleSpec:_,object:s,objectKey:X,validateSpec:T},s))}for(const X in h)m[X]||h[X].required&&h[X].default===void 0&&s[X]===void 0&&A.push(new We(n,s,`missing required property "${X}"`));return A}function Ku(o){const n=o.value,s=o.valueSpec,h=o.style,m=o.styleSpec,v=o.key,_=o.arrayElementValidator||o.validateSpec;if(Bn(n)!=="array")return[new We(v,n,`array expected, ${Bn(n)} found`)];if(s.length&&n.length!==s.length)return[new We(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new We(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let T={type:s.value,values:s.values};m.$version<7&&(T.function=s.function),Bn(s.value)==="object"&&(T=s.value);let A=[];for(let U=0;U<n.length;U++)A=A.concat(_({array:n,arrayIndex:U,value:n[U],valueSpec:T,validateSpec:o.validateSpec,style:h,styleSpec:m,key:`${v}[${U}]`}));return A}function Ls(o){const n=o.key,s=o.value,h=o.valueSpec;let m=Bn(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new We(n,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new We(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new We(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function aa(o){const n=o.valueSpec,s=Hn(o.value.type);let h,m,v,_={};const T=s!=="categorical"&&o.value.property===void 0,A=!T,U=Bn(o.value.stops)==="array"&&Bn(o.value.stops[0])==="array"&&Bn(o.value.stops[0][0])==="object",X=ri({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ce){if(s==="identity")return[new We(ce.key,ce.value,'identity function may not have a "stops" property')];let fe=[];const ze=ce.value;return fe=fe.concat(Ku({key:ce.key,value:ze,valueSpec:ce.valueSpec,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:ee})),Bn(ze)==="array"&&ze.length===0&&fe.push(new We(ce.key,ze,"array must have at least one stop")),fe},default:function(ce){return ce.validateSpec({key:ce.key,value:ce.value,valueSpec:n,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec})}}});return s==="identity"&&T&&X.push(new We(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||X.push(new We(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Jl(o.valueSpec)&&X.push(new We(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(A&&!rs(o.valueSpec)?X.push(new We(o.key,o.value,"property functions not supported")):T&&!Wu(o.valueSpec)&&X.push(new We(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!U||o.value.property!==void 0||X.push(new We(o.key,o.value,'"property" property is required')),X;function ee(ce){let fe=[];const ze=ce.value,Ae=ce.key;if(Bn(ze)!=="array")return[new We(Ae,ze,`array expected, ${Bn(ze)} found`)];if(ze.length!==2)return[new We(Ae,ze,`array length 2 expected, length ${ze.length} found`)];if(U){if(Bn(ze[0])!=="object")return[new We(Ae,ze,`object expected, ${Bn(ze[0])} found`)];if(ze[0].zoom===void 0)return[new We(Ae,ze,"object stop key must have zoom")];if(ze[0].value===void 0)return[new We(Ae,ze,"object stop key must have value")];if(v&&v>Hn(ze[0].zoom))return[new We(Ae,ze[0].zoom,"stop zoom values must appear in ascending order")];Hn(ze[0].zoom)!==v&&(v=Hn(ze[0].zoom),m=void 0,_={}),fe=fe.concat(ri({key:`${Ae}[0]`,value:ze[0],valueSpec:{zoom:{}},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Ls,value:le}}))}else fe=fe.concat(le({key:`${Ae}[0]`,value:ze[0],valueSpec:{},validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec},ze));return qa(vo(ze[1]))?fe.concat([new We(`${Ae}[1]`,ze[1],"expressions are not allowed in function stops.")]):fe.concat(ce.validateSpec({key:`${Ae}[1]`,value:ze[1],valueSpec:n,validateSpec:ce.validateSpec,style:ce.style,styleSpec:ce.styleSpec}))}function le(ce,fe){const ze=Bn(ce.value),Ae=Hn(ce.value),qe=ce.value!==null?ce.value:fe;if(h){if(ze!==h)return[new We(ce.key,qe,`${ze} stop domain type must match previous stop domain type ${h}`)]}else h=ze;if(ze!=="number"&&ze!=="string"&&ze!=="boolean")return[new We(ce.key,qe,"stop domain value must be a number, string, or boolean")];if(ze!=="number"&&s!=="categorical"){let Qe=`number expected, ${ze} found`;return rs(n)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(ce.key,qe,Qe)]}return s!=="categorical"||ze!=="number"||isFinite(Ae)&&Math.floor(Ae)===Ae?s!=="categorical"&&ze==="number"&&m!==void 0&&Ae<m?[new We(ce.key,qe,"stop domain values must appear in ascending order")]:(m=Ae,s==="categorical"&&Ae in _?[new We(ce.key,qe,"stop domain values must be unique")]:(_[Ae]=!0,[])):[new We(ce.key,qe,`integer expected, found ${Ae}`)]}}function jr(o){const n=(o.expressionContext==="property"?Ka:Kn)(vo(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new We(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new We(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ea(s))return[new We(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ea(s))return[new We(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ta(s,["zoom","feature-state"]))return[new We(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ba(s))return[new We(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function so(o){const n=o.key,s=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Hn(s))===-1&&m.push(new We(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Hn(s))===-1&&m.push(new We(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function os(o){return is(vo(o.value))?jr(se({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):la(o)}function la(o){const n=o.value,s=o.key;if(Bn(n)!=="array")return[new We(s,n,`array expected, ${Bn(n)} found`)];const h=o.styleSpec;let m,v=[];if(n.length<1)return[new We(s,n,"filter array must have at least 1 element")];switch(v=v.concat(so({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),Hn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Hn(n[1])==="$type"&&v.push(new We(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new We(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Bn(n[1]),m!=="string"&&v.push(new We(`${s}[1]`,n[1],`string expected, ${m} found`)));for(let _=2;_<n.length;_++)m=Bn(n[_]),Hn(n[1])==="$type"?v=v.concat(so({key:`${s}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new We(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(la({key:`${s}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Bn(n[1]),n.length!==2?v.push(new We(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new We(`${s}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Bn(n[1]),n.length!==2?v.push(new We(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new We(`${s}[1]`,n[1],`object expected, ${m} found`))}return v}function Rs(o,n){const s=o.key,h=o.validateSpec,m=o.style,v=o.styleSpec,_=o.value,T=o.objectKey,A=v[`${n}_${o.layerType}`];if(!A)return[];const U=T.match(/^(.*)-transition$/);if(n==="paint"&&U&&A[U[1]]&&A[U[1]].transition)return h({key:s,value:_,valueSpec:v.transition,style:m,styleSpec:v});const X=o.valueSpec||A[T];if(!X)return[new We(s,_,`unknown property "${T}"`)];let ee;if(Bn(_)==="string"&&rs(X)&&!X.tokens&&(ee=/^{([^}]+)}$/.exec(_)))return[new We(s,_,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const le=[];return o.layerType==="symbol"&&(T==="text-field"&&m&&!m.glyphs&&le.push(new We(s,_,'use of "text-field" requires a style "glyphs" property')),T==="text-font"&&Ha(vo(_))&&Hn(_.type)==="identity"&&le.push(new We(s,_,'"text-font" does not support identity functions'))),le.concat(h({key:o.key,value:_,valueSpec:X,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:T}))}function Qa(o){return Rs(o,"paint")}function ru(o){return Rs(o,"layout")}function ua(o){let n=[];const s=o.value,h=o.key,m=o.style,v=o.styleSpec;s.type||s.ref||n.push(new We(h,s,'either "type" or "ref" is required'));let _=Hn(s.type);const T=Hn(s.ref);if(s.id){const A=Hn(s.id);for(let U=0;U<o.arrayIndex;U++){const X=m.layers[U];Hn(X.id)===A&&n.push(new We(h,s.id,`duplicate layer id "${s.id}", previously used at line ${X.id.__line__}`))}}if("ref"in s){let A;["type","source","source-layer","filter","layout"].forEach(U=>{U in s&&n.push(new We(h,s[U],`"${U}" is prohibited for ref layers`))}),m.layers.forEach(U=>{Hn(U.id)===T&&(A=U)}),A?A.ref?n.push(new We(h,s.ref,"ref cannot reference another ref layer")):_=Hn(A.type):n.push(new We(h,s.ref,`ref layer "${T}" not found`))}else if(_!=="background")if(s.source){const A=m.sources&&m.sources[s.source],U=A&&Hn(A.type);A?U==="vector"&&_==="raster"?n.push(new We(h,s.source,`layer "${s.id}" requires a raster source`)):U==="raster"&&_!=="raster"?n.push(new We(h,s.source,`layer "${s.id}" requires a vector source`)):U!=="vector"||s["source-layer"]?U==="raster-dem"&&_!=="hillshade"?n.push(new We(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||U==="geojson"&&A.lineMetrics||n.push(new We(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new We(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new We(h,s.source,`source "${s.source}" not found`))}else n.push(new We(h,s,'missing required property "source"'));return n=n.concat(ri({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:os,layout:A=>ri({layer:s,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":U=>ru(se({layerType:_},U))}}),paint:A=>ri({layer:s,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":U=>Qa(se({layerType:_},U))}})}})),n}function ji(o){const n=o.value,s=o.key,h=Bn(n);return h!=="string"?[new We(s,n,`string expected, ${h} found`)]:[]}const Di={promoteId:function({key:o,value:n}){if(Bn(n)==="string")return ji({key:o,value:n});{const s=[];for(const h in n)s.push(...ji({key:`${o}.${h}`,value:n[h]}));return s}}};function ca(o){const n=o.value,s=o.key,h=o.styleSpec,m=o.style,v=o.validateSpec;if(!n.type)return[new We(s,n,'"type" is required')];const _=Hn(n.type);let T;switch(_){case"vector":case"raster":case"raster-dem":return T=ri({key:s,value:n,valueSpec:h[`source_${_.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:Di,validateSpec:v}),T;case"geojson":if(T=ri({key:s,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:v,objectElementValidators:Di}),n.cluster)for(const A in n.clusterProperties){const[U,X]=n.clusterProperties[A],ee=typeof U=="string"?[U,["accumulated"],["get",A]]:U;T.push(...jr({key:`${s}.${A}.map`,value:X,validateSpec:v,expressionContext:"cluster-map"})),T.push(...jr({key:`${s}.${A}.reduce`,value:ee,validateSpec:v,expressionContext:"cluster-reduce"}))}return T;case"video":return ri({key:s,value:n,valueSpec:h.source_video,style:m,validateSpec:v,styleSpec:h});case"image":return ri({key:s,value:n,valueSpec:h.source_image,style:m,validateSpec:v,styleSpec:h});case"canvas":return[new We(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return so({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:h})}}function Yu(o){const n=o.value,s=o.styleSpec,h=s.light,m=o.style;let v=[];const _=Bn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new We("light",n,`object expected, ${_} found`)]),v;for(const T in n){const A=T.match(/^(.*)-transition$/);v=v.concat(A&&h[A[1]]&&h[A[1]].transition?o.validateSpec({key:T,value:n[T],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new We(T,n[T],`unknown property "${T}"`)])}return v}function Os(o){const n=o.value,s=o.styleSpec,h=s.terrain,m=o.style;let v=[];const _=Bn(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new We("terrain",n,`object expected, ${_} found`)]),v;for(const T in n)v=v.concat(h[T]?o.validateSpec({key:T,value:n[T],valueSpec:h[T],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new We(T,n[T],`unknown property "${T}"`)]);return v}function el(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const m=[],v=[];for(const _ in s)s[_].id&&m.includes(s[_].id)&&n.push(new We(h,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),m.push(s[_].id),s[_].url&&v.includes(s[_].url)&&n.push(new We(h,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),n=n.concat(ri({key:`${h}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ji({key:h,value:s})}const iu={"*":()=>[],array:Ku,boolean:function(o){const n=o.value,s=o.key,h=Bn(n);return h!=="boolean"?[new We(s,n,`boolean expected, ${h} found`)]:[]},number:Ls,color:function(o){const n=o.key,s=o.value,h=Bn(s);return h!=="string"?[new We(n,s,`color expected, ${h} found`)]:Ln.parse(String(s))?[]:[new We(n,s,`color expected, "${s}" found`)]},constants:Vr,enum:so,filter:os,function:aa,layer:ua,object:ri,source:ca,light:Yu,terrain:Os,string:ji,formatted:function(o){return ji(o).length===0?[]:jr(o)},resolvedImage:function(o){return ji(o).length===0?[]:jr(o)},padding:function(o){const n=o.key,s=o.value;if(Bn(s)==="array"){if(s.length<1||s.length>4)return[new We(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<s.length;v++)m=m.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return m}return Ls({key:n,value:s,valueSpec:{}})},sprite:el};function Fs(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Fs,s.expression&&Ha(Hn(n))?aa(o):s.expression&&qa(vo(n))?jr(o):s.type&&iu[s.type]?iu[s.type](o):ri(se({},o,{valueSpec:s.type?h[s.type]:s}))}function ou(o){const n=o.value,s=o.key,h=ji(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new We(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new We(s,n,'"glyphs" url must include a "{range}" token'))),h}function N(o,n=Je){let s=[];return s=s.concat(Fs({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Fs,objectElementValidators:{glyphs:ou,"*":()=>[]}})),o.constants&&(s=s.concat(Vr({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Fs}))),Ue(s)}function de(o){return function(n){return o({...n,validateSpec:Fs})}}function Ue(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function st(o){return function(...n){return Ue(o.apply(this,n))}}N.source=st(de(ca)),N.sprite=st(de(el)),N.glyphs=st(de(ou)),N.light=st(de(Yu)),N.terrain=st(de(Os)),N.layer=st(de(ua)),N.filter=st(de(os)),N.paintProperty=st(de(Qa)),N.layoutProperty=st(de(ru));const Mt=N,Ct=Mt.light,Zt=Mt.paintProperty,Qt=Mt.layoutProperty;function dn(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new wt(new Error(h.message))),s=!0;return s}class Rn{constructor(n,s,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(s=_[1])+2*(h=_[2]);for(let A=0;A<this.d*this.d;A++){const U=_[3+A],X=_[3+A+1];m.push(U===X?null:_.subarray(U,X))}const T=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],T),this.bboxes=_.subarray(T),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,m,v){this._forEachCell(s,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,m,v,_){this.cells[v].push(_)}query(n,s,h,m,v){const _=this.min,T=this.max;if(n<=_&&s<=_&&T<=h&&T<=m&&!v)return Array.prototype.slice.call(this.keys);{const A=[];return this._forEachCell(n,s,h,m,this._queryCell,A,{},v),A}}_queryCell(n,s,h,m,v,_,T,A){const U=this.cells[v];if(U!==null){const X=this.keys,ee=this.bboxes;for(let le=0;le<U.length;le++){const ce=U[le];if(T[ce]===void 0){const fe=4*ce;(A?A(ee[fe+0],ee[fe+1],ee[fe+2],ee[fe+3]):n<=ee[fe+2]&&s<=ee[fe+3]&&h>=ee[fe+0]&&m>=ee[fe+1])?(T[ce]=!0,_.push(X[ce])):T[ce]=!1}}}}_forEachCell(n,s,h,m,v,_,T,A){const U=this._convertToCellCoord(n),X=this._convertToCellCoord(s),ee=this._convertToCellCoord(h),le=this._convertToCellCoord(m);for(let ce=U;ce<=ee;ce++)for(let fe=X;fe<=le;fe++){const ze=this.d*fe+ce;if((!A||A(this._convertFromCellCoord(ce),this._convertFromCellCoord(fe),this._convertFromCellCoord(ce+1),this._convertFromCellCoord(fe+1)))&&v.call(this,n,s,h,m,ze,_,T,A))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=s;for(let _=0;_<n.length;_++){const T=n[_];m[3+_]=v,m.set(T,v),v+=T.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Rn(n.buffer)}}const En={};function St(o,n,s={}){if(En[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),En[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}St("Object",Object),St("TransferableGridIndex",Rn),St("Color",Ln),St("Error",Error),St("AJAXError",$e),St("ResolvedImage",Fr),St("StylePropertyFunction",Wn),St("StyleExpression",Ql,{omit:["_evaluator"]}),St("ZoomDependentExpression",xn),St("ZoomConstantExpression",eu),St("CompoundExpression",ti,{omit:["_evaluate"]});for(const o in Ps)Ps[o]._classRegistryKey||St(`Expression_${o}`,Ps[o]);function nr(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function mr(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(nr(o)||ae(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(mr(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!En[h])throw new Error(`${h} is not registered.`);const m=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||En[h].omit.indexOf(v)>=0)continue;const _=o[v];m[v]=En[h].shallow.indexOf(v)>=0?_:mr(_,n)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function Jn(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||nr(o)||ae(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Jn);if(typeof o=="object"){const n=o.$name||"Object";if(!En[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=En[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const v=o[m];h[m]=En[n].shallow.indexOf(m)>=0?v:Jn(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class _o{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const It={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ao(o){for(const n of o)if(ss(n.charCodeAt(0)))return!0;return!1}function tl(o){for(const n of o)if(!ha(n.charCodeAt(0)))return!1;return!0}function ha(o){return!(It.Arabic(o)||It["Arabic Supplement"](o)||It["Arabic Extended-A"](o)||It["Arabic Presentation Forms-A"](o)||It["Arabic Presentation Forms-B"](o))}function ss(o){return!(o!==746&&o!==747&&(o<4352||!(It["Bopomofo Extended"](o)||It.Bopomofo(o)||It["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||It["CJK Compatibility Ideographs"](o)||It["CJK Compatibility"](o)||It["CJK Radicals Supplement"](o)||It["CJK Strokes"](o)||!(!It["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||It["CJK Unified Ideographs Extension A"](o)||It["CJK Unified Ideographs"](o)||It["Enclosed CJK Letters and Months"](o)||It["Hangul Compatibility Jamo"](o)||It["Hangul Jamo Extended-A"](o)||It["Hangul Jamo Extended-B"](o)||It["Hangul Jamo"](o)||It["Hangul Syllables"](o)||It.Hiragana(o)||It["Ideographic Description Characters"](o)||It.Kanbun(o)||It["Kangxi Radicals"](o)||It["Katakana Phonetic Extensions"](o)||It.Katakana(o)&&o!==12540||!(!It["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!It["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||It["Unified Canadian Aboriginal Syllabics"](o)||It["Unified Canadian Aboriginal Syllabics Extended"](o)||It["Vertical Forms"](o)||It["Yijing Hexagram Symbols"](o)||It["Yi Syllables"](o)||It["Yi Radicals"](o))))}function Cd(o){return!(ss(o)||function(n){return!!(It["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||It["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||It["Letterlike Symbols"](n)||It["Number Forms"](n)||It["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||It["Control Pictures"](n)&&n!==9251||It["Optical Character Recognition"](n)||It["Enclosed Alphanumerics"](n)||It["Geometric Shapes"](n)||It["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||It["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||It["CJK Symbols and Punctuation"](n)||It.Katakana(n)||It["Private Use Area"](n)||It["CJK Compatibility Forms"](n)||It["Small Form Variants"](n)||It["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Ju(o){return o>=1424&&o<=2303||It["Arabic Presentation Forms-A"](o)||It["Arabic Presentation Forms-B"](o)}function Qu(o,n){return!(!n&&Ju(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||It.Khmer(o))}function Id(o){for(const n of o)if(Ju(n.charCodeAt(0)))return!0;return!1}const Mh="deferred",ec="loading",kh="loaded";let su=null,Ci="unavailable",js=null;const Ad=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Ci="error"),su&&su(o)};function zh(){tc.fire(new ft("pluginStateChange",{pluginStatus:Ci,pluginURL:js}))}const tc=new Nt,Lh=function(){return Ci},Pd=function(){if(Ci!==Mh||!js)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ci=ec,zh(),js&&ot({url:js},o=>{o?Ad(o):(Ci=kh,zh())})},lo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ci===kh||lo.applyArabicShaping!=null,isLoading:()=>Ci===ec,setState(o){if(!ve())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ci=o.pluginStatus,js=o.pluginURL},isParsed(){if(!ve())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return lo.applyArabicShaping!=null&&lo.processBidirectionalText!=null&&lo.processStyledBidirectionalText!=null},getPluginURL(){if(!ve())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return js}};class ir{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _o,this.transition={})}isSupportedScript(n){return function(s,h){for(const m of s)if(!Qu(m.charCodeAt(0),h))return!1;return!0}(n,lo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class nc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,m){if(Ha(h))return new Wn(h,m);if(qa(h)){const v=Ka(h,m);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=Ln.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(v=Ar.parse(h)),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Rh{constructor(n){this.property=n,this.value=new nc(n,void 0)}transitioned(n,s){return new au(this.property,this.value,s,B({},n.transition,this.transition),n.now)}untransitioned(){return new au(this.property,this.value,null,{},0)}}class Md{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return P(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Rh(this._values[n].property)),this._values[n].value=new nc(this._values[n].property,s===null?void 0:P(s))}getTransition(n){return P(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Rh(this._values[n].property)),this._values[n].transition=P(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const m=this.getTransition(s);m!==void 0&&(n[`${s}-transition`]=m)}return n}transitioned(n,s){const h=new kd(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,s._values[m]);return h}untransitioned(){const n=new kd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class au{constructor(n,s,h,m,v){this.property=n,this.value=s,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const m=n.now||0,v=this.value.possiblyEvaluate(n,s,h),_=this.prior;if(_){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return _.possiblyEvaluate(n,s,h);{const T=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,h),v,function(A){if(A<=0)return 0;if(A>=1)return 1;const U=A*A,X=U*A;return 4*(A<.5?X:3*(A-U)+X-.75)}(T))}}return v}}class kd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const m=new rc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Oh{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return P(this._values[n].value)}setValue(n,s){this._values[n]=new nc(this._values[n].property,s===null?void 0:P(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const m=new rc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,h);return m}}class Do{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,m){return this.property.evaluate(this.value,this.parameters,n,s,h,m)}}class rc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const m=ni[this.specification.type];return m?m(n,s,h):n}}class on{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,m){return new Do(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,m)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Do(this,{kind:"constant",value:void 0},n.parameters);const m=ni[this.specification.type];if(m){const v=m(n.value.value,s.value.value,h);return new Do(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,m,v,_){return n.kind==="constant"?n.value:n.evaluate(s,h,m,v,_)}}class lu extends on{possiblyEvaluate(n,s,h,m){if(n.value===void 0)return new Do(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,m),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,T=this._calculate(_,_,_,s);return new Do(this,{kind:"constant",value:T},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Do(this,{kind:"constant",value:v},s)}return new Do(this,n.expression,s)}evaluate(n,s,h,m,v,_){if(n.kind==="source"){const T=n.evaluate(s,h,m,v,_);return this._calculate(T,T,T,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,m),n.evaluate({zoom:Math.floor(s.zoom)},h,m),n.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):n.value}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Fh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,m);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new ir(Math.floor(s.zoom-1),s)),n.expression.evaluate(new ir(Math.floor(s.zoom),s)),n.expression.evaluate(new ir(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class jh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){return!!n.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class Ii{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new nc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Rh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}St("DataDrivenProperty",on),St("DataConstantProperty",qt),St("CrossFadedDataDrivenProperty",lu),St("CrossFadedProperty",Fh),St("ColorRampProperty",jh);const ic="-transition";class Bo extends Nt{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Oh(s.layout)),s.paint)){this._transitionablePaint=new Md(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Qt,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(ic)?this._transitionablePaint.getTransition(n.slice(0,-ic.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Zt,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(ic))return this._transitionablePaint.setTransition(n.slice(0,-ic.length),s||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const A=this._transitionablePaint._values[n].value;return A.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,T,A)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),S(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,m,v={}){return(!v||v.validate!==!1)&&dn(this,n.call(Mt,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:Je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Do&&rs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const zg={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class as{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Mr(o,n=1){let s=0,h=0;return{members:o.map(m=>{const v=zg[m.type].BYTES_PER_ELEMENT,_=s=zd(s,Math.max(n,v)),T=m.components||1;return h=Math.max(h,v),s+=v*T,{name:m.name,type:m.type,components:T,offset:_}}),size:zd(s,Math.max(h,n)),alignment:n}}function zd(o,n){return Math.ceil(o/n)*n}class nl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.int16[m+0]=s,this.int16[m+1]=h,n}}nl.prototype.bytesPerElement=4,St("StructArrayLayout2i4",nl);class oc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=m,n}}oc.prototype.bytesPerElement=6,St("StructArrayLayout3i6",oc);class Dh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=m,this.int16[_+3]=v,n}}Dh.prototype.bytesPerElement=8,St("StructArrayLayout4i8",Dh);class No extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,m,v,_)}emplace(n,s,h,m,v,_,T){const A=6*n;return this.int16[A+0]=s,this.int16[A+1]=h,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=_,this.int16[A+5]=T,n}}No.prototype.bytesPerElement=12,St("StructArrayLayout2i4i12",No);class sc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,m,v,_)}emplace(n,s,h,m,v,_,T){const A=4*n,U=8*n;return this.int16[A+0]=s,this.int16[A+1]=h,this.uint8[U+4]=m,this.uint8[U+5]=v,this.uint8[U+6]=_,this.uint8[U+7]=T,n}}sc.prototype.bytesPerElement=8,St("StructArrayLayout2i4ub8",sc);class fa extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.float32[m+0]=s,this.float32[m+1]=h,n}}fa.prototype.bytesPerElement=8,St("StructArrayLayout2f8",fa);class ac extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,A,U,X){const ee=this.length;return this.resize(ee+1),this.emplace(ee,n,s,h,m,v,_,T,A,U,X)}emplace(n,s,h,m,v,_,T,A,U,X,ee){const le=10*n;return this.uint16[le+0]=s,this.uint16[le+1]=h,this.uint16[le+2]=m,this.uint16[le+3]=v,this.uint16[le+4]=_,this.uint16[le+5]=T,this.uint16[le+6]=A,this.uint16[le+7]=U,this.uint16[le+8]=X,this.uint16[le+9]=ee,n}}ac.prototype.bytesPerElement=20,St("StructArrayLayout10ui20",ac);class uu extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,A,U,X,ee,le){const ce=this.length;return this.resize(ce+1),this.emplace(ce,n,s,h,m,v,_,T,A,U,X,ee,le)}emplace(n,s,h,m,v,_,T,A,U,X,ee,le,ce){const fe=12*n;return this.int16[fe+0]=s,this.int16[fe+1]=h,this.int16[fe+2]=m,this.int16[fe+3]=v,this.uint16[fe+4]=_,this.uint16[fe+5]=T,this.uint16[fe+6]=A,this.uint16[fe+7]=U,this.int16[fe+8]=X,this.int16[fe+9]=ee,this.int16[fe+10]=le,this.int16[fe+11]=ce,n}}uu.prototype.bytesPerElement=24,St("StructArrayLayout4i4ui4i24",uu);class Bh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=m,n}}Bh.prototype.bytesPerElement=12,St("StructArrayLayout3f12",Bh);class rl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}rl.prototype.bytesPerElement=4,St("StructArrayLayout1ul4",rl);class da extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,A,U){const X=this.length;return this.resize(X+1),this.emplace(X,n,s,h,m,v,_,T,A,U)}emplace(n,s,h,m,v,_,T,A,U,X){const ee=10*n,le=5*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=m,this.int16[ee+3]=v,this.int16[ee+4]=_,this.int16[ee+5]=T,this.uint32[le+3]=A,this.uint16[ee+8]=U,this.uint16[ee+9]=X,n}}da.prototype.bytesPerElement=20,St("StructArrayLayout6i1ul2ui20",da);class Nh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_){const T=this.length;return this.resize(T+1),this.emplace(T,n,s,h,m,v,_)}emplace(n,s,h,m,v,_,T){const A=6*n;return this.int16[A+0]=s,this.int16[A+1]=h,this.int16[A+2]=m,this.int16[A+3]=v,this.int16[A+4]=_,this.int16[A+5]=T,n}}Nh.prototype.bytesPerElement=12,St("StructArrayLayout2i2i2i12",Nh);class lc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,m,v)}emplace(n,s,h,m,v,_){const T=4*n,A=8*n;return this.float32[T+0]=s,this.float32[T+1]=h,this.float32[T+2]=m,this.int16[A+6]=v,this.int16[A+7]=_,n}}lc.prototype.bytesPerElement=16,St("StructArrayLayout2f1f2i16",lc);class pa extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const _=12*n,T=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=h,this.float32[T+1]=m,this.float32[T+2]=v,n}}pa.prototype.bytesPerElement=12,St("StructArrayLayout2ub2f12",pa);class uc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=m,n}}uc.prototype.bytesPerElement=6,St("StructArrayLayout3ui6",uc);class Uh extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze,Ae,qe){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze,Ae,qe)}emplace(n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze,Ae,qe,Qe){const Ze=24*n,nt=12*n,at=48*n;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=m,this.uint16[Ze+3]=v,this.uint32[nt+2]=_,this.uint32[nt+3]=T,this.uint32[nt+4]=A,this.uint16[Ze+10]=U,this.uint16[Ze+11]=X,this.uint16[Ze+12]=ee,this.float32[nt+7]=le,this.float32[nt+8]=ce,this.uint8[at+36]=fe,this.uint8[at+37]=ze,this.uint8[at+38]=Ae,this.uint32[nt+10]=qe,this.int16[Ze+22]=Qe,n}}Uh.prototype.bytesPerElement=48,St("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Uh);class cc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze,Ae,qe,Qe,Ze,nt,at,dt,Ut,Gt,Ot,zt,Pt,jt){const Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze,Ae,qe,Qe,Ze,nt,at,dt,Ut,Gt,Ot,zt,Pt,jt)}emplace(n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze,Ae,qe,Qe,Ze,nt,at,dt,Ut,Gt,Ot,zt,Pt,jt,Rt){const bt=34*n,nn=17*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=m,this.int16[bt+3]=v,this.int16[bt+4]=_,this.int16[bt+5]=T,this.int16[bt+6]=A,this.int16[bt+7]=U,this.uint16[bt+8]=X,this.uint16[bt+9]=ee,this.uint16[bt+10]=le,this.uint16[bt+11]=ce,this.uint16[bt+12]=fe,this.uint16[bt+13]=ze,this.uint16[bt+14]=Ae,this.uint16[bt+15]=qe,this.uint16[bt+16]=Qe,this.uint16[bt+17]=Ze,this.uint16[bt+18]=nt,this.uint16[bt+19]=at,this.uint16[bt+20]=dt,this.uint16[bt+21]=Ut,this.uint16[bt+22]=Gt,this.uint32[nn+12]=Ot,this.float32[nn+13]=zt,this.float32[nn+14]=Pt,this.float32[nn+15]=jt,this.float32[nn+16]=Rt,n}}cc.prototype.bytesPerElement=68,St("StructArrayLayout8i15ui1ul4f68",cc);class hc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}hc.prototype.bytesPerElement=4,St("StructArrayLayout1f4",hc);class fc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}fc.prototype.bytesPerElement=8,St("StructArrayLayout1ul2ui8",fc);class p extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.uint16[m+0]=s,this.uint16[m+1]=h,n}}p.prototype.bytesPerElement=4,St("StructArrayLayout2ui4",p);class r extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}r.prototype.bytesPerElement=2,St("StructArrayLayout1ui2",r);class u extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=m,this.float32[_+3]=v,n}}u.prototype.bytesPerElement=16,St("StructArrayLayout4f16",u);class f extends as{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}f.prototype.size=20;class g extends da{get(n){return new f(this,n)}}St("CollisionBoxArray",g);class x extends as{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}x.prototype.size=48;class I extends Uh{get(n){return new x(this,n)}}St("PlacedSymbolArray",I);class k extends as{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}k.prototype.size=68;class M extends cc{get(n){return new k(this,n)}}St("SymbolInstanceArray",M);class $ extends hc{getoffsetX(n){return this.float32[1*n+0]}}St("GlyphOffsetArray",$);class Y extends oc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}St("SymbolLineVertexArray",Y);class q extends as{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class he extends fc{get(n){return new q(this,n)}}St("FeatureIndexArray",he);class Me extends nl{}class Ie extends nl{}class Pe extends nl{}class Ne extends No{}class He extends sc{}class it extends fa{}class je extends ac{}class rt extends uu{}class lt extends Bh{}class vt extends rl{}class xt extends Nh{}class Et extends pa{}class _t extends uc{}class Dt extends p{}const tn=Mr([{name:"a_pos",components:2,type:"Int16"}],4),{members:gn}=tn;class kt{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,m){let v=this.segments[this.segments.length-1];return n>kt.MAX_VERTEX_ARRAY_LENGTH&&J(`Max vertices per segment is ${kt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>kt.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,m){return new kt([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function an(o,n){return 256*(o=G(Math.floor(o),0,255))+G(Math.floor(n),0,255)}kt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,St("SegmentVector",kt);const Bt=Mr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var On={exports:{}},xr={exports:{}};xr.exports=function(o,n){var s,h,m,v,_,T,A,U;for(h=o.length-(s=3&o.length),m=n,_=3432918353,T=461845907,U=0;U<h;)A=255&o.charCodeAt(U)|(255&o.charCodeAt(++U))<<8|(255&o.charCodeAt(++U))<<16|(255&o.charCodeAt(++U))<<24,++U,m=27492+(65535&(v=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(A=0,s){case 3:A^=(255&o.charCodeAt(U+2))<<16;case 2:A^=(255&o.charCodeAt(U+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&o.charCodeAt(U)))*_+(((A>>>16)*_&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Fn=xr.exports,yn={exports:{}};yn.exports=function(o,n){for(var s,h=o.length,m=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var yr=Fn,pi=yn.exports;On.exports=yr,On.exports.murmur3=yr,On.exports.murmur2=pi;var wr=b(On.exports);class Gr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,m){this.ids.push(Bi(n)),this.positions.push(s,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Bi(n);let h=0,m=this.ids.length-1;for(;h<m;){const _=h+m>>1;this.ids[_]>=s?m=_:h=_+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return xo(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const s=new Gr;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Bi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:wr(String(o))}function xo(o,n,s,h){for(;s<h;){const m=o[s+h>>1];let v=s-1,_=h+1;for(;;){do v++;while(o[v]<m);do _--;while(o[_]>m);if(v>=_)break;wo(o,v,_),wo(n,3*v,3*_),wo(n,3*v+1,3*_+1),wo(n,3*v+2,3*_+2)}_-s<h-_?(xo(o,n,s,_),s=_+1):(xo(o,n,_+1,h),h=_)}}function wo(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}St("FeaturePositionMap",Gr);class mi{constructor(n,s){this.gl=n.gl,this.location=s}}class Uo extends mi{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class cu extends mi{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class ii extends mi{constructor(n,s){super(n,s),this.current=Ln.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Zr=new Float32Array(16);function Un(o){return[an(255*o.r,255*o.g),an(255*o.b,255*o.a)]}class Dr{constructor(n,s,h){this.value=n,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new ii(n,s):new Uo(n,s)}}class Wr{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new cu(n,s):new Uo(n,s)}}class Vn{constructor(n,s,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,s,h,m,v){const _=this.paintVertexArray.length,T=this.expression.evaluate(new ir(0),s,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,T)}updatePaintArray(n,s,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const m=Un(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Br{constructor(n,s,h,m,v,_){this.expression=n,this.uniformNames=s.map(T=>`u_${T}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(T=>({name:`a_${T}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,h,m,v){const _=this.expression.evaluate(new ir(this.zoom),s,{},m,[],v),T=this.expression.evaluate(new ir(this.zoom+1),s,{},m,[],v),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,_,T)}updatePaintArray(n,s,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),_=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,s,v,_)}_setPaintValue(n,s,h,m){if(this.type==="color"){const v=Un(h),_=Un(m);for(let T=n;T<s;T++)this.paintVertexArray.emplace(T,v[0],v[1],_[0],_[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=G(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,s,h){return new Uo(n,s)}}class Ni{constructor(n,s,h,m,v,_){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,m,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,m){if(!m||!h)return;const{min:v,mid:_,max:T}=h,A=m[v],U=m[_],X=m[T];if(A&&U&&X)for(let ee=n;ee<s;ee++)this.zoomInPaintVertexArray.emplace(ee,U.tl[0],U.tl[1],U.br[0],U.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],U.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,U.tl[0],U.tl[1],U.br[0],U.br[1],X.tl[0],X.tl[1],X.br[0],X.br[1],U.pixelRatio,X.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Bt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Bt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class dc{constructor(n,s,h){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!h(v))continue;const _=n.paint.get(v);if(!(_ instanceof Do&&rs(_.property.specification)))continue;const T=Lg(v,n.type),A=_.value,U=_.property.specification.type,X=_.property.useIntegerZoom,ee=_.property.specification["property-type"],le=ee==="cross-faded"||ee==="cross-faded-data-driven";if(A.kind==="constant")this.binders[v]=le?new Wr(A.value,T):new Dr(A.value,T,U),m.push(`/u_${v}`);else if(A.kind==="source"||le){const ce=Ld(v,U,"source");this.binders[v]=le?new Ni(A,U,X,s,ce,n.id):new Vn(A,T,U,ce),m.push(`/a_${v}`)}else{const ce=Ld(v,U,"composite");this.binders[v]=new Br(A,T,U,X,s,ce),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Vn||s instanceof Br?s.maxValue:0}populatePaintArrays(n,s,h,m,v){for(const _ in this.binders){const T=this.binders[_];(T instanceof Vn||T instanceof Br||T instanceof Ni)&&T.populatePaintArray(n,s,h,m,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const m=this.binders[h];m instanceof Wr&&m.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,m,v){let _=!1;for(const T in n){const A=s.getPositions(T);for(const U of A){const X=h.feature(U.index);for(const ee in this.binders){const le=this.binders[ee];if((le instanceof Vn||le instanceof Br||le instanceof Ni)&&le.expression.isStateDependent===!0){const ce=m.paint.get(ee);le.expression=ce.value,le.updatePaintArray(U.start,U.end,X,n[T],v),_=!0}}}}return _}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Dr||h instanceof Wr)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Vn||h instanceof Br)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof Ni)for(let m=0;m<Bt.members.length;m++)n.push(Bt.members[m].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Dr||h instanceof Wr||h instanceof Br)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Dr||v instanceof Wr||v instanceof Br){for(const _ of v.uniformNames)if(s[_]){const T=v.getBinding(n,s[_],_);h.push({name:_,property:m,binding:T})}}}return h}setUniforms(n,s,h,m){for(const{name:v,property:_,binding:T}of s)this.binders[_].setUniform(T,m,h.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Ni){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Vn||h instanceof Br)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Vn||h instanceof Br||h instanceof Ni)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Vn||s instanceof Br||s instanceof Ni)&&s.destroy()}}}class ls{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new dc(m,s,h);this.needsUpload=!1,this._featureMap=new Gr,this._bufferOffset=0}populatePaintArrays(n,s,h,m,v,_){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(n,s,m,v,_);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Lg(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Ld(o,n,s){const h={color:{source:fa,composite:u},number:{source:hc,composite:fa}},m=function(v){return{"line-pattern":{source:je,composite:je},"fill-pattern":{source:je,composite:je},"fill-extrusion-pattern":{source:je,composite:je}}[v]}(o);return m&&m[s]||h[n][s]}St("ConstantBinder",Dr),St("CrossFadedConstantBinder",Wr),St("SourceExpressionBinder",Vn),St("CrossFadedCompositeBinder",Ni),St("CompositeExpressionBinder",Br),St("ProgramConfiguration",dc,{omit:["_buffers"]}),St("ProgramConfigurationSet",ls);var or=8192;const $h=Math.pow(2,14)-1,hu=-$h-1;function us(o){const n=or/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let v=0;v<m.length;v++){const _=m[v],T=Math.round(_.x*n),A=Math.round(_.y*n);_.x=G(T,hu,$h),_.y=G(A,hu,$h),(T<_.x||T>_.x+1||A<_.y||A>_.y+1)&&J("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function fu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?us(o):[]}}function Rd(o,n,s,h,m){o.emplaceBack(2*n+(h+1)/2,2*s+(m+1)/2)}class Rg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ie,this.indexArray=new _t,this.segments=new kt,this.programConfigurations=new ls(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const m=this.layers[0],v=[];let _=null,T=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),T=!_.isConstant());for(const{feature:A,id:U,index:X,sourceLayerIndex:ee}of n){const le=this.layers[0]._featureFilter.needGeometry,ce=fu(A,le);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),ce,h))continue;const fe=T?_.evaluate(ce,{},h):void 0,ze={id:U,properties:A.properties,type:A.type,sourceLayerIndex:ee,index:X,geometry:le?ce.geometry:us(A),patterns:{},sortKey:fe};v.push(ze)}T&&v.sort((A,U)=>A.sortKey-U.sortKey);for(const A of v){const{geometry:U,index:X,sourceLayerIndex:ee}=A,le=n[X].feature;this.addFeature(A,U,X,h),s.featureIndex.insert(le,U,X,ee,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,m){for(const v of s)for(const _ of v){const T=_.x,A=_.y;if(T<0||T>=or||A<0||A>=or)continue;const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),X=U.vertexLength;Rd(this.layoutVertexArray,T,A,-1,-1),Rd(this.layoutVertexArray,T,A,1,-1),Rd(this.layoutVertexArray,T,A,1,1),Rd(this.layoutVertexArray,T,A,-1,1),this.indexArray.emplaceBack(X,X+1,X+2),this.indexArray.emplaceBack(X,X+3,X+2),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function Y1(o,n){for(let s=0;s<o.length;s++)if(pc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(pc(o,n[s]))return!0;return!!Og(o,n)}function XI(o,n,s){return!!pc(o,n)||!!Fg(n,o,s)}function J1(o,n){if(o.length===1)return ex(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let m=0;m<h.length;m++)if(pc(o,h[m]))return!0}for(let s=0;s<o.length;s++)if(ex(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Og(o,n[s]))return!0;return!1}function qI(o,n,s){if(o.length>1){if(Og(o,n))return!0;for(let h=0;h<n.length;h++)if(Fg(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Fg(o[h],n,s))return!0;return!1}function Og(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],m=o[s+1];for(let v=0;v<n.length-1;v++)if(KI(h,m,n[v],n[v+1]))return!0}return!1}function KI(o,n,s,h){return H(o,s,h)!==H(n,s,h)&&H(o,n,s)!==H(o,n,h)}function Fg(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(Q1(o,n[m-1],n[m])<h)return!0;return!1}function Q1(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const m=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(m<0?n:m>1?s:s.sub(n)._mult(m)._add(n))}function ex(o,n){let s,h,m,v=!1;for(let _=0;_<o.length;_++){s=o[_];for(let T=0,A=s.length-1;T<s.length;A=T++)h=s[T],m=s[A],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function pc(o,n){let s=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const v=o[h],_=o[m];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function YI(o,n,s){const h=s[0],m=s[2];if(o.x<h.x&&n.x<h.x||o.x>m.x&&n.x>m.x||o.y<h.y&&n.y<h.y||o.y>m.y&&n.y>m.y)return!1;const v=H(o,n,s[0]);return v!==H(o,n,s[1])||v!==H(o,n,s[2])||v!==H(o,n,s[3])}function Vh(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Od(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Fd(o,n,s,h,m){if(!n[0]&&!n[1])return o;const v=E.convert(n)._mult(m);s==="viewport"&&v._rotate(-h);const _=[];for(let T=0;T<o.length;T++)_.push(o[T].sub(v));return _}let tx,nx;St("CircleBucket",Rg,{omit:["layers"]});var JI={get paint(){return nx=nx||new Ii({"circle-radius":new on(Je.paint_circle["circle-radius"]),"circle-color":new on(Je.paint_circle["circle-color"]),"circle-blur":new on(Je.paint_circle["circle-blur"]),"circle-opacity":new on(Je.paint_circle["circle-opacity"]),"circle-translate":new qt(Je.paint_circle["circle-translate"]),"circle-translate-anchor":new qt(Je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qt(Je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qt(Je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new on(Je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new on(Je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new on(Je.paint_circle["circle-stroke-opacity"])})},get layout(){return tx=tx||new Ii({"circle-sort-key":new on(Je.layout_circle["circle-sort-key"])})}},Ai=1e-6,mc=typeof Float32Array<"u"?Float32Array:Array;function jg(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function rx(o,n,s){var h=n[0],m=n[1],v=n[2],_=n[3],T=n[4],A=n[5],U=n[6],X=n[7],ee=n[8],le=n[9],ce=n[10],fe=n[11],ze=n[12],Ae=n[13],qe=n[14],Qe=n[15],Ze=s[0],nt=s[1],at=s[2],dt=s[3];return o[0]=Ze*h+nt*T+at*ee+dt*ze,o[1]=Ze*m+nt*A+at*le+dt*Ae,o[2]=Ze*v+nt*U+at*ce+dt*qe,o[3]=Ze*_+nt*X+at*fe+dt*Qe,o[4]=(Ze=s[4])*h+(nt=s[5])*T+(at=s[6])*ee+(dt=s[7])*ze,o[5]=Ze*m+nt*A+at*le+dt*Ae,o[6]=Ze*v+nt*U+at*ce+dt*qe,o[7]=Ze*_+nt*X+at*fe+dt*Qe,o[8]=(Ze=s[8])*h+(nt=s[9])*T+(at=s[10])*ee+(dt=s[11])*ze,o[9]=Ze*m+nt*A+at*le+dt*Ae,o[10]=Ze*v+nt*U+at*ce+dt*qe,o[11]=Ze*_+nt*X+at*fe+dt*Qe,o[12]=(Ze=s[12])*h+(nt=s[13])*T+(at=s[14])*ee+(dt=s[15])*ze,o[13]=Ze*m+nt*A+at*le+dt*Ae,o[14]=Ze*v+nt*U+at*ce+dt*qe,o[15]=Ze*_+nt*X+at*fe+dt*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Gh,QI=rx;function jd(o,n,s){var h=n[0],m=n[1],v=n[2],_=n[3];return o[0]=s[0]*h+s[4]*m+s[8]*v+s[12]*_,o[1]=s[1]*h+s[5]*m+s[9]*v+s[13]*_,o[2]=s[2]*h+s[6]*m+s[10]*v+s[14]*_,o[3]=s[3]*h+s[7]*m+s[11]*v+s[15]*_,o}function ix(o,n){const s=jd([],[o.x,o.y,0,1],n);return new E(s[0]/s[3],s[1]/s[3])}Gh=new mc(4),mc!=Float32Array&&(Gh[0]=0,Gh[1]=0,Gh[2]=0,Gh[3]=0);class ox extends Rg{}let sx;St("HeatmapBucket",ox,{omit:["layers"]});var eA={get paint(){return sx=sx||new Ii({"heatmap-radius":new on(Je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new on(Je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qt(Je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jh(Je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qt(Je.paint_heatmap["heatmap-opacity"])})}};function Dg(o,{width:n,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*s*h}`)}else m=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=m,o}function ax(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const m=Dg({},{width:n,height:s},h);Bg(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=m.data}function Bg(o,n,s,h,m,v){if(m.width===0||m.height===0)return n;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,T=n.data;if(_===T)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<m.height;A++){const U=((s.y+A)*o.width+s.x)*v,X=((h.y+A)*n.width+h.x)*v;for(let ee=0;ee<m.width*v;ee++)T[X+ee]=_[U+ee]}return n}class Zh{constructor(n,s){Dg(this,n,1,s)}resize(n){ax(this,n,1)}clone(){return new Zh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,v){Bg(n,s,h,m,v,1)}}class bo{constructor(n,s){Dg(this,n,4,s)}resize(n){ax(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new bo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,v){Bg(n,s,h,m,v,4)}}function lx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new bo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,T,A)=>{n[o.evaluationKey]=A;const U=o.expression.evaluate(n);m.data[_+T+0]=Math.floor(255*U.r/U.a),m.data[_+T+1]=Math.floor(255*U.g/U.a),m.data[_+T+2]=Math.floor(255*U.b/U.a),m.data[_+T+3]=Math.floor(255*U.a)};if(o.clips)for(let _=0,T=0;_<h;++_,T+=4*s)for(let A=0,U=0;A<s;A++,U+=4){const X=A/(s-1),{start:ee,end:le}=o.clips[_];v(T,U,ee*(1-X)+le*X)}else for(let _=0,T=0;_<s;_++,T+=4)v(0,T,_/(s-1));return m}let ux;St("AlphaImage",Zh),St("RGBAImage",bo);var tA={get paint(){return ux=ux||new Ii({"hillshade-illumination-direction":new qt(Je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qt(Je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qt(Je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qt(Je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qt(Je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qt(Je.paint_hillshade["hillshade-accent-color"])})}};const nA=Mr([{name:"a_pos",components:2,type:"Int16"}],4),{members:rA}=nA;var Ng={exports:{}};function Dd(o,n,s){s=s||2;var h,m,v,_,T,A,U,X=n&&n.length,ee=X?n[0]*s:o.length,le=cx(o,0,ee,s,!0),ce=[];if(!le||le.next===le.prev)return ce;if(X&&(le=function(ze,Ae,qe,Qe){var Ze,nt,at,dt=[];for(Ze=0,nt=Ae.length;Ze<nt;Ze++)(at=cx(ze,Ae[Ze]*Qe,Ze<nt-1?Ae[Ze+1]*Qe:ze.length,Qe,!1))===at.next&&(at.steiner=!0),dt.push(hA(at));for(dt.sort(lA),Ze=0;Ze<dt.length;Ze++)qe=uA(dt[Ze],qe);return qe}(o,n,le,s)),o.length>80*s){h=v=o[0],m=_=o[1];for(var fe=s;fe<ee;fe+=s)(T=o[fe])<h&&(h=T),(A=o[fe+1])<m&&(m=A),T>v&&(v=T),A>_&&(_=A);U=(U=Math.max(v-h,_-m))!==0?32767/U:0}return Wh(le,ce,s,h,m,U,0),ce}function cx(o,n,s,h,m){var v,_;if(m===Vg(o,n,s,h)>0)for(v=n;v<s;v+=h)_=dx(v,o[v],o[v+1],_);else for(v=s-h;v>=n;v-=h)_=dx(v,o[v],o[v+1],_);return _&&Bd(_,_.next)&&(Xh(_),_=_.next),_}function du(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Bd(h,h.next)&&br(h.prev,h,h.next)!==0)h=h.next;else{if(Xh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function Wh(o,n,s,h,m,v,_){if(o){!_&&v&&function(X,ee,le,ce){var fe=X;do fe.z===0&&(fe.z=Ug(fe.x,fe.y,ee,le,ce)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==X);fe.prevZ.nextZ=null,fe.prevZ=null,function(ze){var Ae,qe,Qe,Ze,nt,at,dt,Ut,Gt=1;do{for(qe=ze,ze=null,nt=null,at=0;qe;){for(at++,Qe=qe,dt=0,Ae=0;Ae<Gt&&(dt++,Qe=Qe.nextZ);Ae++);for(Ut=Gt;dt>0||Ut>0&&Qe;)dt!==0&&(Ut===0||!Qe||qe.z<=Qe.z)?(Ze=qe,qe=qe.nextZ,dt--):(Ze=Qe,Qe=Qe.nextZ,Ut--),nt?nt.nextZ=Ze:ze=Ze,Ze.prevZ=nt,nt=Ze;qe=Qe}nt.nextZ=null,Gt*=2}while(at>1)}(fe)}(o,h,m,v);for(var T,A,U=o;o.prev!==o.next;)if(T=o.prev,A=o.next,v?oA(o,h,m,v):iA(o))n.push(T.i/s|0),n.push(o.i/s|0),n.push(A.i/s|0),Xh(o),o=A.next,U=A.next;else if((o=A)===U){_?_===1?Wh(o=sA(du(o),n,s),n,s,h,m,v,2):_===2&&aA(o,n,s,h,m,v):Wh(du(o),n,s,h,m,v,1);break}}}function iA(o){var n=o.prev,s=o,h=o.next;if(br(n,s,h)>=0)return!1;for(var m=n.x,v=s.x,_=h.x,T=n.y,A=s.y,U=h.y,X=m<v?m<_?m:_:v<_?v:_,ee=T<A?T<U?T:U:A<U?A:U,le=m>v?m>_?m:_:v>_?v:_,ce=T>A?T>U?T:U:A>U?A:U,fe=h.next;fe!==n;){if(fe.x>=X&&fe.x<=le&&fe.y>=ee&&fe.y<=ce&&gc(m,T,v,A,_,U,fe.x,fe.y)&&br(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function oA(o,n,s,h){var m=o.prev,v=o,_=o.next;if(br(m,v,_)>=0)return!1;for(var T=m.x,A=v.x,U=_.x,X=m.y,ee=v.y,le=_.y,ce=T<A?T<U?T:U:A<U?A:U,fe=X<ee?X<le?X:le:ee<le?ee:le,ze=T>A?T>U?T:U:A>U?A:U,Ae=X>ee?X>le?X:le:ee>le?ee:le,qe=Ug(ce,fe,n,s,h),Qe=Ug(ze,Ae,n,s,h),Ze=o.prevZ,nt=o.nextZ;Ze&&Ze.z>=qe&&nt&&nt.z<=Qe;){if(Ze.x>=ce&&Ze.x<=ze&&Ze.y>=fe&&Ze.y<=Ae&&Ze!==m&&Ze!==_&&gc(T,X,A,ee,U,le,Ze.x,Ze.y)&&br(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,nt.x>=ce&&nt.x<=ze&&nt.y>=fe&&nt.y<=Ae&&nt!==m&&nt!==_&&gc(T,X,A,ee,U,le,nt.x,nt.y)&&br(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;Ze&&Ze.z>=qe;){if(Ze.x>=ce&&Ze.x<=ze&&Ze.y>=fe&&Ze.y<=Ae&&Ze!==m&&Ze!==_&&gc(T,X,A,ee,U,le,Ze.x,Ze.y)&&br(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;nt&&nt.z<=Qe;){if(nt.x>=ce&&nt.x<=ze&&nt.y>=fe&&nt.y<=Ae&&nt!==m&&nt!==_&&gc(T,X,A,ee,U,le,nt.x,nt.y)&&br(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function sA(o,n,s){var h=o;do{var m=h.prev,v=h.next.next;!Bd(m,v)&&hx(m,h,h.next,v)&&Hh(m,v)&&Hh(v,m)&&(n.push(m.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),Xh(h),Xh(h.next),h=o=v),h=h.next}while(h!==o);return du(h)}function aA(o,n,s,h,m,v){var _=o;do{for(var T=_.next.next;T!==_.prev;){if(_.i!==T.i&&fA(_,T)){var A=fx(_,T);return _=du(_,_.next),A=du(A,A.next),Wh(_,n,s,h,m,v,0),void Wh(A,n,s,h,m,v,0)}T=T.next}_=_.next}while(_!==o)}function lA(o,n){return o.x-n.x}function uA(o,n){var s=function(m,v){var _,T=v,A=m.x,U=m.y,X=-1/0;do{if(U<=T.y&&U>=T.next.y&&T.next.y!==T.y){var ee=T.x+(U-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(ee<=A&&ee>X&&(X=ee,_=T.x<T.next.x?T:T.next,ee===A))return _}T=T.next}while(T!==v);if(!_)return null;var le,ce=_,fe=_.x,ze=_.y,Ae=1/0;T=_;do A>=T.x&&T.x>=fe&&A!==T.x&&gc(U<ze?A:X,U,fe,ze,U<ze?X:A,U,T.x,T.y)&&(le=Math.abs(U-T.y)/(A-T.x),Hh(T,m)&&(le<Ae||le===Ae&&(T.x>_.x||T.x===_.x&&cA(_,T)))&&(_=T,Ae=le)),T=T.next;while(T!==ce);return _}(o,n);if(!s)return n;var h=fx(s,o);return du(h,h.next),du(s,s.next)}function cA(o,n){return br(o.prev,o,n.prev)<0&&br(n.next,o,o.next)<0}function Ug(o,n,s,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function hA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function gc(o,n,s,h,m,v,_,T){return(m-_)*(n-T)>=(o-_)*(v-T)&&(o-_)*(h-T)>=(s-_)*(n-T)&&(s-_)*(v-T)>=(m-_)*(h-T)}function fA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&hx(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(o,n)&&(Hh(o,n)&&Hh(n,o)&&function(s,h){var m=s,v=!1,_=(s.x+h.x)/2,T=(s.y+h.y)/2;do m.y>T!=m.next.y>T&&m.next.y!==m.y&&_<(m.next.x-m.x)*(T-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==s);return v}(o,n)&&(br(o.prev,o,n.prev)||br(o,n.prev,n))||Bd(o,n)&&br(o.prev,o,o.next)>0&&br(n.prev,n,n.next)>0)}function br(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Bd(o,n){return o.x===n.x&&o.y===n.y}function hx(o,n,s,h){var m=Ud(br(o,n,s)),v=Ud(br(o,n,h)),_=Ud(br(s,h,o)),T=Ud(br(s,h,n));return m!==v&&_!==T||!(m!==0||!Nd(o,s,n))||!(v!==0||!Nd(o,h,n))||!(_!==0||!Nd(s,o,h))||!(T!==0||!Nd(s,n,h))}function Nd(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Ud(o){return o>0?1:o<0?-1:0}function Hh(o,n){return br(o.prev,o,o.next)<0?br(o,n,o.next)>=0&&br(o,o.prev,n)>=0:br(o,n,o.prev)<0||br(o,o.next,n)<0}function fx(o,n){var s=new $g(o.i,o.x,o.y),h=new $g(n.i,n.x,n.y),m=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=m,m.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function dx(o,n,s,h){var m=new $g(o,n,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Xh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function $g(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vg(o,n,s,h){for(var m=0,v=n,_=s-h;v<s;v+=h)m+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return m}Ng.exports=Dd,Ng.exports.default=Dd,Dd.deviation=function(o,n,s,h){var m=n&&n.length,v=Math.abs(Vg(o,0,m?n[0]*s:o.length,s));if(m)for(var _=0,T=n.length;_<T;_++)v-=Math.abs(Vg(o,n[_]*s,_<T-1?n[_+1]*s:o.length,s));var A=0;for(_=0;_<h.length;_+=3){var U=h[_]*s,X=h[_+1]*s,ee=h[_+2]*s;A+=Math.abs((o[U]-o[ee])*(o[X+1]-o[U+1])-(o[U]-o[X])*(o[ee+1]-o[U+1]))}return v===0&&A===0?0:Math.abs((A-v)/v)},Dd.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,m=0;m<o.length;m++){for(var v=0;v<o[m].length;v++)for(var _=0;_<n;_++)s.vertices.push(o[m][v][_]);m>0&&s.holes.push(h+=o[m-1].length)}return s};var px=b(Ng.exports);function dA(o,n,s,h,m){mx(o,n,s||0,h||o.length-1,m||pA)}function mx(o,n,s,h,m){for(;h>s;){if(h-s>600){var v=h-s+1,_=n-s+1,T=Math.log(v),A=.5*Math.exp(2*T/3),U=.5*Math.sqrt(T*A*(v-A)/v)*(_-v/2<0?-1:1);mx(o,n,Math.max(s,Math.floor(n-_*A/v+U)),Math.min(h,Math.floor(n+(v-_)*A/v+U)),m)}var X=o[n],ee=s,le=h;for(qh(o,s,n),m(o[h],X)>0&&qh(o,s,h);ee<le;){for(qh(o,ee,le),ee++,le--;m(o[ee],X)<0;)ee++;for(;m(o[le],X)>0;)le--}m(o[s],X)===0?qh(o,s,le):qh(o,++le,h),le<=n&&(s=le+1),n<=le&&(h=le-1)}}function qh(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function pA(o,n){return o<n?-1:o>n?1:0}function Gg(o,n){const s=o.length;if(s<=1)return[o];const h=[];let m,v;for(let _=0;_<s;_++){const T=ye(o[_]);T!==0&&(o[_].area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(m&&h.push(m),m=[o[_]]):m.push(o[_]))}if(m&&h.push(m),n>1)for(let _=0;_<h.length;_++)h[_].length<=n||(dA(h[_],n,1,h[_].length-1,mA),h[_]=h[_].slice(0,n));return h}function mA(o,n){return n.area-o.area}function Zg(o,n,s){const h=s.patternDependencies;let m=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(m=!0);const T=_.constantOr(null);T&&(m=!0,h[T.to]=!0,h[T.from]=!0)}return m}function Wg(o,n,s,h,m){const v=m.patternDependencies;for(const _ of n){const T=_.paint.get(`${o}-pattern`).value;if(T.kind!=="constant"){let A=T.evaluate({zoom:h-1},s,{},m.availableImages),U=T.evaluate({zoom:h},s,{},m.availableImages),X=T.evaluate({zoom:h+1},s,{},m.availableImages);A=A&&A.name?A.name:A,U=U&&U.name?U.name:U,X=X&&X.name?X.name:X,v[A]=!0,v[U]=!0,v[X]=!0,s.patterns[_.id]={min:A,mid:U,max:X}}}return s}class Hg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pe,this.indexArray=new _t,this.indexArray2=new Dt,this.programConfigurations=new ls(n.layers,n.zoom),this.segments=new kt,this.segments2=new kt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Zg("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),_=[];for(const{feature:T,id:A,index:U,sourceLayerIndex:X}of n){const ee=this.layers[0]._featureFilter.needGeometry,le=fu(T,ee);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),le,h))continue;const ce=v?m.evaluate(le,{},h,s.availableImages):void 0,fe={id:A,properties:T.properties,type:T.type,sourceLayerIndex:X,index:U,geometry:ee?le.geometry:us(T),patterns:{},sortKey:ce};_.push(fe)}v&&_.sort((T,A)=>T.sortKey-A.sortKey);for(const T of _){const{geometry:A,index:U,sourceLayerIndex:X}=T;if(this.hasPattern){const ee=Wg("fill",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,A,U,h,{});s.featureIndex.insert(n[U].feature,A,U,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,rA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,m,v){for(const _ of Gg(s,500)){let T=0;for(const ce of _)T+=ce.length;const A=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),U=A.vertexLength,X=[],ee=[];for(const ce of _){if(ce.length===0)continue;ce!==_[0]&&ee.push(X.length/2);const fe=this.segments2.prepareSegment(ce.length,this.layoutVertexArray,this.indexArray2),ze=fe.vertexLength;this.layoutVertexArray.emplaceBack(ce[0].x,ce[0].y),this.indexArray2.emplaceBack(ze+ce.length-1,ze),X.push(ce[0].x),X.push(ce[0].y);for(let Ae=1;Ae<ce.length;Ae++)this.layoutVertexArray.emplaceBack(ce[Ae].x,ce[Ae].y),this.indexArray2.emplaceBack(ze+Ae-1,ze+Ae),X.push(ce[Ae].x),X.push(ce[Ae].y);fe.vertexLength+=ce.length,fe.primitiveLength+=ce.length}const le=px(X,ee);for(let ce=0;ce<le.length;ce+=3)this.indexArray.emplaceBack(U+le[ce],U+le[ce+1],U+le[ce+2]);A.vertexLength+=T,A.primitiveLength+=le.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}let gx,yx;St("FillBucket",Hg,{omit:["layers","patternFeatures"]});var gA={get paint(){return yx=yx||new Ii({"fill-antialias":new qt(Je.paint_fill["fill-antialias"]),"fill-opacity":new on(Je.paint_fill["fill-opacity"]),"fill-color":new on(Je.paint_fill["fill-color"]),"fill-outline-color":new on(Je.paint_fill["fill-outline-color"]),"fill-translate":new qt(Je.paint_fill["fill-translate"]),"fill-translate-anchor":new qt(Je.paint_fill["fill-translate-anchor"]),"fill-pattern":new lu(Je.paint_fill["fill-pattern"])})},get layout(){return gx=gx||new Ii({"fill-sort-key":new on(Je.layout_fill["fill-sort-key"])})}};const yA=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vA=Mr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_A}=yA;var il={},xA=w,vx=yc;function yc(o,n,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(wA,this,n)}function wA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var _=m._keys[h.readVarint()],T=m._values[h.readVarint()];m.properties[_]=T}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function bA(o){for(var n,s,h=0,m=0,v=o.length,_=v-1;m<v;_=m++)h+=((s=o[_]).x-(n=o[m]).x)*(n.y+s.y);return h}yc.types=["Unknown","Point","LineString","Polygon"],yc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,m=0,v=0,_=0,T=[];o.pos<s;){if(m<=0){var A=o.readVarint();h=7&A,m=A>>3}if(m--,h===1||h===2)v+=o.readSVarint(),_+=o.readSVarint(),h===1&&(n&&T.push(n),n=[]),n.push(new xA(v,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&T.push(n),T},yc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,m=0,v=0,_=1/0,T=-1/0,A=1/0,U=-1/0;o.pos<n;){if(h<=0){var X=o.readVarint();s=7&X,h=X>>3}if(h--,s===1||s===2)(m+=o.readSVarint())<_&&(_=m),m>T&&(T=m),(v+=o.readSVarint())<A&&(A=v),v>U&&(U=v);else if(s!==7)throw new Error("unknown command "+s)}return[_,A,T,U]},yc.prototype.toGeoJSON=function(o,n,s){var h,m,v=this.extent*Math.pow(2,s),_=this.extent*o,T=this.extent*n,A=this.loadGeometry(),U=yc.types[this.type];function X(ce){for(var fe=0;fe<ce.length;fe++){var ze=ce[fe];ce[fe]=[360*(ze.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(ze.y+T)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(h=0;h<A.length;h++)ee[h]=A[h][0];X(A=ee);break;case 2:for(h=0;h<A.length;h++)X(A[h]);break;case 3:for(A=function(ce){var fe=ce.length;if(fe<=1)return[ce];for(var ze,Ae,qe=[],Qe=0;Qe<fe;Qe++){var Ze=bA(ce[Qe]);Ze!==0&&(Ae===void 0&&(Ae=Ze<0),Ae===Ze<0?(ze&&qe.push(ze),ze=[ce[Qe]]):ze.push(ce[Qe]))}return ze&&qe.push(ze),qe}(A),h=0;h<A.length;h++)for(m=0;m<A[h].length;m++)X(A[h][m])}A.length===1?A=A[0]:U="Multi"+U;var le={type:"Feature",geometry:{type:U,coordinates:A},properties:this.properties};return"id"in this&&(le.id=this.id),le};var EA=vx,_x=xx;function xx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(SA,this,n),this.length=this._features.length}function SA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(s))}xx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new EA(this._pbf,n,this.extent,this._keys,this._values)};var TA=_x;function CA(o,n,s){if(o===3){var h=new TA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}il.VectorTile=function(o,n){this.layers=o.readFields(CA,{},n)},il.VectorTileFeature=vx,il.VectorTileLayer=_x;const IA=il.VectorTileFeature.types,Xg=Math.pow(2,13);function Kh(o,n,s,h,m,v,_,T){o.emplaceBack(n,s,2*Math.floor(h*Xg)+_,m*Xg*2,v*Xg*2,Math.round(T))}class qg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ne,this.centroidVertexArray=new Me,this.indexArray=new _t,this.programConfigurations=new ls(n.layers,n.zoom),this.segments=new kt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Zg("fill-extrusion",this.layers,s);for(const{feature:m,id:v,index:_,sourceLayerIndex:T}of n){const A=this.layers[0]._featureFilter.needGeometry,U=fu(m,A);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),U,h))continue;const X={id:v,sourceLayerIndex:T,index:_,geometry:A?U.geometry:us(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Wg("fill-extrusion",this.layers,X,this.zoom,s)):this.addFeature(X,X.geometry,_,h,{}),s.featureIndex.insert(m,X.geometry,_,T,this.index,!0)}}addFeatures(n,s,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,_A),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,vA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,m,v){const _={x:0,y:0,vertexCount:0};for(const T of Gg(s,500)){let A=0;for(const fe of T)A+=fe.length;let U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const fe of T){if(fe.length===0||PA(fe))continue;let ze=0;for(let Ae=0;Ae<fe.length;Ae++){const qe=fe[Ae];if(Ae>=1){const Qe=fe[Ae-1];if(!AA(qe,Qe)){U.vertexLength+4>kt.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=qe.sub(Qe)._perp()._unit(),nt=Qe.dist(qe);ze+nt>32768&&(ze=0),Kh(this.layoutVertexArray,qe.x,qe.y,Ze.x,Ze.y,0,0,ze),Kh(this.layoutVertexArray,qe.x,qe.y,Ze.x,Ze.y,0,1,ze),_.x+=2*qe.x,_.y+=2*qe.y,_.vertexCount+=2,ze+=nt,Kh(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,0,ze),Kh(this.layoutVertexArray,Qe.x,Qe.y,Ze.x,Ze.y,0,1,ze),_.x+=2*Qe.x,_.y+=2*Qe.y,_.vertexCount+=2;const at=U.vertexLength;this.indexArray.emplaceBack(at,at+2,at+1),this.indexArray.emplaceBack(at+1,at+2,at+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+A>kt.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),IA[n.type]!=="Polygon")continue;const X=[],ee=[],le=U.vertexLength;for(const fe of T)if(fe.length!==0){fe!==T[0]&&ee.push(X.length/2);for(let ze=0;ze<fe.length;ze++){const Ae=fe[ze];Kh(this.layoutVertexArray,Ae.x,Ae.y,0,0,1,1,0),_.x+=Ae.x,_.y+=Ae.y,_.vertexCount+=1,X.push(Ae.x),X.push(Ae.y)}}const ce=px(X,ee);for(let fe=0;fe<ce.length;fe+=3)this.indexArray.emplaceBack(le+ce[fe],le+ce[fe+2],le+ce[fe+1]);U.primitiveLength+=ce.length/3,U.vertexLength+=A}for(let T=0;T<_.vertexCount;T++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}function AA(o,n){return o.x===n.x&&(o.x<0||o.x>or)||o.y===n.y&&(o.y<0||o.y>or)}function PA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>or)||o.every(n=>n.y<0)||o.every(n=>n.y>or)}let wx;St("FillExtrusionBucket",qg,{omit:["layers","features"]});var MA={get paint(){return wx=wx||new Ii({"fill-extrusion-opacity":new qt(Je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new on(Je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qt(Je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qt(Je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new lu(Je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new on(Je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new on(Je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qt(Je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function Yh(o,n){return o.x*n.x+o.y*n.y}function bx(o,n){if(o.length===1){let s=0;const h=n[s++];let m;for(;!m||h.equals(m);)if(m=n[s++],!m)return 1/0;for(;s<n.length;s++){const v=n[s],_=o[0],T=m.sub(h),A=v.sub(h),U=_.sub(h),X=Yh(T,T),ee=Yh(T,A),le=Yh(A,A),ce=Yh(U,T),fe=Yh(U,A),ze=X*le-ee*ee,Ae=(le*ce-ee*fe)/ze,qe=(X*fe-ee*ce)/ze,Qe=h.z*(1-Ae-qe)+m.z*Ae+v.z*qe;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const kA=Mr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:zA}=kA,LA=Mr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:RA}=LA,OA=il.VectorTileFeature.types,FA=Math.cos(Math.PI/180*37.5),Ex=Math.pow(2,14)/.5;class Kg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new He,this.layoutVertexArray2=new it,this.indexArray=new _t,this.programConfigurations=new ls(n.layers,n.zoom),this.segments=new kt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Zg("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),_=[];for(const{feature:T,id:A,index:U,sourceLayerIndex:X}of n){const ee=this.layers[0]._featureFilter.needGeometry,le=fu(T,ee);if(!this.layers[0]._featureFilter.filter(new ir(this.zoom),le,h))continue;const ce=v?m.evaluate(le,{},h):void 0,fe={id:A,properties:T.properties,type:T.type,sourceLayerIndex:X,index:U,geometry:ee?le.geometry:us(T),patterns:{},sortKey:ce};_.push(fe)}v&&_.sort((T,A)=>T.sortKey-A.sortKey);for(const T of _){const{geometry:A,index:U,sourceLayerIndex:X}=T;if(this.hasPattern){const ee=Wg("line",this.layers,T,this.zoom,s);this.patternFeatures.push(ee)}else this.addFeature(T,A,U,h,{});s.featureIndex.insert(n[U].feature,A,U,X,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,RA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,zA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,m,v){const _=this.layers[0].layout,T=_.get("line-join").evaluate(n,{}),A=_.get("line-cap"),U=_.get("line-miter-limit"),X=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ee of s)this.addLine(ee,n,T,A,U,X);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}addLine(n,s,h,m,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let qe=0;qe<n.length-1;qe++)this.totalDistance+=n[qe].dist(n[qe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const T=OA[s.type]==="Polygon";let A=n.length;for(;A>=2&&n[A-1].equals(n[A-2]);)A--;let U=0;for(;U<A-1&&n[U].equals(n[U+1]);)U++;if(A<(T?3:2))return;h==="bevel"&&(v=1.05);const X=this.overscaling<=16?122880/(512*this.overscaling):0,ee=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let le,ce,fe,ze,Ae;this.e1=this.e2=-1,T&&(le=n[A-2],Ae=n[U].sub(le)._unit()._perp());for(let qe=U;qe<A;qe++){if(fe=qe===A-1?T?n[U+1]:void 0:n[qe+1],fe&&n[qe].equals(fe))continue;Ae&&(ze=Ae),le&&(ce=le),le=n[qe],Ae=fe?fe.sub(le)._unit()._perp():ze,ze=ze||Ae;let Qe=ze.add(Ae);Qe.x===0&&Qe.y===0||Qe._unit();const Ze=ze.x*Ae.x+ze.y*Ae.y,nt=Qe.x*Ae.x+Qe.y*Ae.y,at=nt!==0?1/nt:1/0,dt=2*Math.sqrt(2-2*nt),Ut=nt<FA&&ce&&fe,Gt=ze.x*Ae.y-ze.y*Ae.x>0;if(Ut&&qe>U){const Pt=le.dist(ce);if(Pt>2*X){const jt=le.sub(le.sub(ce)._mult(X/Pt)._round());this.updateDistance(ce,jt),this.addCurrentVertex(jt,ze,0,0,ee),ce=jt}}const Ot=ce&&fe;let zt=Ot?h:T?"butt":m;if(Ot&&zt==="round"&&(at<_?zt="miter":at<=2&&(zt="fakeround")),zt==="miter"&&at>v&&(zt="bevel"),zt==="bevel"&&(at>2&&(zt="flipbevel"),at<v&&(zt="miter")),ce&&this.updateDistance(ce,le),zt==="miter")Qe._mult(at),this.addCurrentVertex(le,Qe,0,0,ee);else if(zt==="flipbevel"){if(at>100)Qe=Ae.mult(-1);else{const Pt=at*ze.add(Ae).mag()/ze.sub(Ae).mag();Qe._perp()._mult(Pt*(Gt?-1:1))}this.addCurrentVertex(le,Qe,0,0,ee),this.addCurrentVertex(le,Qe.mult(-1),0,0,ee)}else if(zt==="bevel"||zt==="fakeround"){const Pt=-Math.sqrt(at*at-1),jt=Gt?Pt:0,Rt=Gt?0:Pt;if(ce&&this.addCurrentVertex(le,ze,jt,Rt,ee),zt==="fakeround"){const bt=Math.round(180*dt/Math.PI/20);for(let nn=1;nn<bt;nn++){let Wt=nn/bt;if(Wt!==.5){const rr=Wt-.5;Wt+=Wt*rr*(Wt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*rr*rr+(.848013+Ze*(.215638*Ze-1.06021)))}const Sn=Ae.sub(ze)._mult(Wt)._add(ze)._unit()._mult(Gt?-1:1);this.addHalfVertex(le,Sn.x,Sn.y,!1,Gt,0,ee)}}fe&&this.addCurrentVertex(le,Ae,-jt,-Rt,ee)}else if(zt==="butt")this.addCurrentVertex(le,Qe,0,0,ee);else if(zt==="square"){const Pt=ce?1:-1;this.addCurrentVertex(le,Qe,Pt,Pt,ee)}else zt==="round"&&(ce&&(this.addCurrentVertex(le,ze,0,0,ee),this.addCurrentVertex(le,ze,1,1,ee,!0)),fe&&(this.addCurrentVertex(le,Ae,-1,-1,ee,!0),this.addCurrentVertex(le,Ae,0,0,ee)));if(Ut&&qe<A-1){const Pt=le.dist(fe);if(Pt>2*X){const jt=le.add(fe.sub(le)._mult(X/Pt)._round());this.updateDistance(le,jt),this.addCurrentVertex(jt,Ae,0,0,ee),le=jt}}}}addCurrentVertex(n,s,h,m,v,_=!1){const T=s.y*m-s.x,A=-s.y-s.x*m;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,_,!1,h,v),this.addHalfVertex(n,T,A,_,!0,-m,v),this.distance>Ex/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,m,v,_))}addHalfVertex({x:n,y:s},h,m,v,_,T,A){const U=.5*(this.lineClips?this.scaledDistance*(Ex-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(T===0?0:T<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const X=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,X),A.primitiveLength++),_?this.e2=X:this.e1=X}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Sx,Tx;St("LineBucket",Kg,{omit:["layers","patternFeatures"]});var Cx={get paint(){return Tx=Tx||new Ii({"line-opacity":new on(Je.paint_line["line-opacity"]),"line-color":new on(Je.paint_line["line-color"]),"line-translate":new qt(Je.paint_line["line-translate"]),"line-translate-anchor":new qt(Je.paint_line["line-translate-anchor"]),"line-width":new on(Je.paint_line["line-width"]),"line-gap-width":new on(Je.paint_line["line-gap-width"]),"line-offset":new on(Je.paint_line["line-offset"]),"line-blur":new on(Je.paint_line["line-blur"]),"line-dasharray":new Fh(Je.paint_line["line-dasharray"]),"line-pattern":new lu(Je.paint_line["line-pattern"]),"line-gradient":new jh(Je.paint_line["line-gradient"])})},get layout(){return Sx=Sx||new Ii({"line-cap":new qt(Je.layout_line["line-cap"]),"line-join":new on(Je.layout_line["line-join"]),"line-miter-limit":new qt(Je.layout_line["line-miter-limit"]),"line-round-limit":new qt(Je.layout_line["line-round-limit"]),"line-sort-key":new on(Je.layout_line["line-sort-key"])})}};class jA extends on{possiblyEvaluate(n,s){return s=new ir(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,m){return s=B({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,m)}}let $d;function Ix(o,n){return n>0?n+2*o:o}const DA=Mr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BA=Mr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Mr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const NA=Mr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Mr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ax=Mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),UA=Mr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function $A(o,n,s){return o.sections.forEach(h=>{h.text=function(m,v,_){const T=v.layout.get("text-transform").evaluate(_,{});return T==="uppercase"?m=m.toLocaleUpperCase():T==="lowercase"&&(m=m.toLocaleLowerCase()),lo.applyArabicShaping&&(m=lo.applyArabicShaping(m)),m}(h.text,n,s)}),o}Mr([{name:"triangle",components:3,type:"Uint16"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Mr([{type:"Float32",name:"offsetX"}]),Mr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Jh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Kr=24,Px=Xn,Mx=function(o,n,s,h,m){var v,_,T=8*m-h-1,A=(1<<T)-1,U=A>>1,X=-7,ee=s?m-1:0,le=s?-1:1,ce=o[n+ee];for(ee+=le,v=ce&(1<<-X)-1,ce>>=-X,X+=T;X>0;v=256*v+o[n+ee],ee+=le,X-=8);for(_=v&(1<<-X)-1,v>>=-X,X+=h;X>0;_=256*_+o[n+ee],ee+=le,X-=8);if(v===0)v=1-U;else{if(v===A)return _?NaN:1/0*(ce?-1:1);_+=Math.pow(2,h),v-=U}return(ce?-1:1)*_*Math.pow(2,v-h)},kx=function(o,n,s,h,m,v){var _,T,A,U=8*v-m-1,X=(1<<U)-1,ee=X>>1,le=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ce=h?0:v-1,fe=h?1:-1,ze=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,_=X):(_=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-_))<1&&(_--,A*=2),(n+=_+ee>=1?le/A:le*Math.pow(2,1-ee))*A>=2&&(_++,A/=2),_+ee>=X?(T=0,_=X):_+ee>=1?(T=(n*A-1)*Math.pow(2,m),_+=ee):(T=n*Math.pow(2,ee-1)*Math.pow(2,m),_=0));m>=8;o[s+ce]=255&T,ce+=fe,T/=256,m-=8);for(_=_<<m|T,U+=m;U>0;o[s+ce]=255&_,ce+=fe,_/=256,U-=8);o[s+ce-fe]|=128*ze};function Xn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0,Xn.Fixed64=1,Xn.Bytes=2,Xn.Fixed32=5;var Yg=4294967296,zx=1/Yg,Lx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ma(o){return o.type===Xn.Bytes?o.readVarint()+o.pos:o.pos+1}function vc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Rx(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=o;m--)s.buf[m+h]=s.buf[m]}function VA(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function GA(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function ZA(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function WA(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function HA(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function XA(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function qA(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function KA(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function YA(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Vd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function _c(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Ox(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Xn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,o(m,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Vd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Ox(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Vd(this.buf,this.pos)+Vd(this.buf,this.pos+4)*Yg;return this.pos+=8,o},readSFixed64:function(){var o=Vd(this.buf,this.pos)+Ox(this.buf,this.pos+4)*Yg;return this.pos+=8,o},readFloat:function(){var o=Mx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Mx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(m,v,_){var T,A,U=_.buf;if(T=(112&(A=U[_.pos++]))>>4,A<128||(T|=(127&(A=U[_.pos++]))<<3,A<128)||(T|=(127&(A=U[_.pos++]))<<10,A<128)||(T|=(127&(A=U[_.pos++]))<<17,A<128)||(T|=(127&(A=U[_.pos++]))<<24,A<128)||(T|=(1&(A=U[_.pos++]))<<31,A<128))return vc(m,T,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Lx?function(s,h,m){return Lx.decode(s.subarray(h,m))}(this.buf,n,o):function(s,h,m){for(var v="",_=h;_<m;){var T,A,U,X=s[_],ee=null,le=X>239?4:X>223?3:X>191?2:1;if(_+le>m)break;le===1?X<128&&(ee=X):le===2?(192&(T=s[_+1]))==128&&(ee=(31&X)<<6|63&T)<=127&&(ee=null):le===3?(A=s[_+2],(192&(T=s[_+1]))==128&&(192&A)==128&&((ee=(15&X)<<12|(63&T)<<6|63&A)<=2047||ee>=55296&&ee<=57343)&&(ee=null)):le===4&&(A=s[_+2],U=s[_+3],(192&(T=s[_+1]))==128&&(192&A)==128&&(192&U)==128&&((ee=(15&X)<<18|(63&T)<<12|(63&A)<<6|63&U)<=65535||ee>=1114112)&&(ee=null)),ee===null?(ee=65533,le=1):ee>65535&&(ee-=65536,v+=String.fromCharCode(ee>>>10&1023|55296),ee=56320|1023&ee),v+=String.fromCharCode(ee),_+=le}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Xn.Bytes)return o.push(this.readVarint(n));var s=ma(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSVarint());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Xn.Bytes)return o.push(this.readBoolean());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFloat());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Xn.Bytes)return o.push(this.readDouble());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFixed32());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSFixed32());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Xn.Bytes)return o.push(this.readFixed64());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Xn.Bytes)return o.push(this.readSFixed64());var n=ma(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Xn.Fixed32)this.pos+=4;else{if(n!==Xn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),_c(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),_c(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),_c(this.buf,-1&o,this.pos),_c(this.buf,Math.floor(o*zx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),_c(this.buf,-1&o,this.pos),_c(this.buf,Math.floor(o*zx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,_,T){T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,v>>>=7,T.buf[T.pos++]=127&v|128,T.buf[T.pos]=127&(v>>>=7)}(h,0,s),function(v,_){var T=(7&v)<<4;_.buf[_.pos++]|=T|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,m,v){for(var _,T,A=0;A<m.length;A++){if((_=m.charCodeAt(A))>55295&&_<57344){if(!T){_>56319||A+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):T=_;continue}if(_<56320){h[v++]=239,h[v++]=191,h[v++]=189,T=_;continue}_=T-55296<<10|_-56320|65536,T=null}else T&&(h[v++]=239,h[v++]=191,h[v++]=189,T=null);_<128?h[v++]=_:(_<2048?h[v++]=_>>6|192:(_<65536?h[v++]=_>>12|224:(h[v++]=_>>18|240,h[v++]=_>>12&63|128),h[v++]=_>>6&63|128),h[v++]=63&_|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Rx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),kx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),kx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Rx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Xn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,VA,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,GA,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,HA,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,ZA,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,WA,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,XA,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,qA,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,KA,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,YA,n)},writeBytesField:function(o,n){this.writeTag(o,Xn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Xn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Xn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Xn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Xn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Xn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var ol,Jg=b(Px);function JA(o,n,s){o===1&&s.readMessage(QA,n)}function QA(o,n,s){if(o===3){const{id:h,bitmap:m,width:v,height:_,left:T,top:A,advance:U}=s.readMessage(eP,{});n.push({id:h,bitmap:new Zh({width:v+6,height:_+6},m),metrics:{width:v,height:_,left:T,top:A,advance:U}})}}function eP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}function Fx(o){let n=0,s=0;for(const _ of o)n+=_.w*_.h,s=Math.max(s,_.w);o.sort((_,T)=>T.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let m=0,v=0;for(const _ of o)for(let T=h.length-1;T>=0;T--){const A=h[T];if(!(_.w>A.w||_.h>A.h)){if(_.x=A.x,_.y=A.y,v=Math.max(v,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===A.w&&_.h===A.h){const U=h.pop();T<h.length&&(h[T]=U)}else _.h===A.h?(A.x+=_.w,A.w-=_.w):_.w===A.w?(A.y+=_.h,A.h-=_.h):(h.push({x:A.x+_.w,y:A.y,w:A.w-_.w,h:_.h}),A.y+=_.h,A.h-=_.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}class Qg{constructor(n,{pixelRatio:s,version:h,stretchX:m,stretchY:v,content:_}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class jx{constructor(n,s){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,m,v);const{w:_,h:T}=Fx(v),A=new bo({width:_||1,height:T||1});for(const U in n){const X=n[U],ee=h[U].paddedRect;bo.copy(X.data,A,{x:0,y:0},{x:ee.x+1,y:ee.y+1},X.data)}for(const U in s){const X=s[U],ee=m[U].paddedRect,le=ee.x+1,ce=ee.y+1,fe=X.data.width,ze=X.data.height;bo.copy(X.data,A,{x:0,y:0},{x:le,y:ce},X.data),bo.copy(X.data,A,{x:0,y:ze-1},{x:le,y:ce-1},{width:fe,height:1}),bo.copy(X.data,A,{x:0,y:0},{x:le,y:ce+ze},{width:fe,height:1}),bo.copy(X.data,A,{x:fe-1,y:0},{x:le-1,y:ce},{width:1,height:ze}),bo.copy(X.data,A,{x:0,y:0},{x:le+fe,y:ce},{width:1,height:ze})}this.image=A,this.iconPositions=h,this.patternPositions=m}addImages(n,s,h){for(const m in n){const v=n[m],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(_),s[m]=new Qg(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[m,v]=n.tl;h.update(s.data,void 0,{x:m,y:v})}}St("ImagePosition",Qg),St("ImageAtlas",jx),l.WritingMode=void 0,(ol=l.WritingMode||(l.WritingMode={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const Gd=-17;class Qh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new Qh;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new Qh;return s.imageName=n,s}}class xc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new xc;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=m&&Cd(m)&&!Jh[n[h+1]]||v&&Cd(v)&&!Jh[n[h-1]]||!Jh[n[h]]?n[h]:Jh[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Wd[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Wd[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new xc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Qh.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void J("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Qh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):J("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zd(o,n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe,ze){const Ae=xc.fromFeature(o,m);let qe;ee===l.WritingMode.vertical&&Ae.verticalizePunctuation();const{processBidirectionalText:Qe,processStyledBidirectionalText:Ze}=lo;if(Qe&&Ae.sections.length===1){qe=[];const dt=Qe(Ae.toString(),ey(Ae,U,v,n,h,ce,fe));for(const Ut of dt){const Gt=new xc;Gt.text=Ut,Gt.sections=Ae.sections;for(let Ot=0;Ot<Ut.length;Ot++)Gt.sectionIndex.push(0);qe.push(Gt)}}else if(Ze){qe=[];const dt=Ze(Ae.text,Ae.sectionIndex,ey(Ae,U,v,n,h,ce,fe));for(const Ut of dt){const Gt=new xc;Gt.text=Ut[0],Gt.sectionIndex=Ut[1],Gt.sections=Ae.sections,qe.push(Gt)}}else qe=function(dt,Ut){const Gt=[],Ot=dt.text;let zt=0;for(const Pt of Ut)Gt.push(dt.substring(zt,Pt)),zt=Pt;return zt<Ot.length&&Gt.push(dt.substring(zt,Ot.length)),Gt}(Ae,ey(Ae,U,v,n,h,ce,fe));const nt=[],at={positionedLines:nt,text:Ae.toString(),top:X[1],bottom:X[1],left:X[0],right:X[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(dt,Ut,Gt,Ot,zt,Pt,jt,Rt,bt,nn,Wt,Sn){let rr=0,sr=Gd,Nr=0,So=0;const oi=Rt==="right"?1:Rt==="left"?0:.5;let kr=0;for(const zr of zt){zr.trim();const ai=zr.getMaxScale(),yi=(ai-1)*Kr,Pi={positionedGlyphs:[],lineOffset:0};dt.positionedLines[kr]=Pi;const $i=Pi.positionedGlyphs;let Vi=0;if(!zr.length()){sr+=Pt,++kr;continue}for(let li=0;li<zr.length();li++){const Tn=zr.getSection(li),uo=zr.getSectionIndex(li),ui=zr.getCharCode(li);let vi=0,$o=null,cs=null,hs=null,ya=Kr;const Vo=!(bt===l.WritingMode.horizontal||!Wt&&!ss(ui)||Wt&&(Wd[ui]||(Hr=ui,It.Arabic(Hr)||It["Arabic Supplement"](Hr)||It["Arabic Extended-A"](Hr)||It["Arabic Presentation Forms-A"](Hr)||It["Arabic Presentation Forms-B"](Hr))));if(Tn.imageName){const To=Ot[Tn.imageName];if(!To)continue;hs=Tn.imageName,dt.iconsInText=dt.iconsInText||!0,cs=To.paddedRect;const Gi=To.displaySize;Tn.scale=Tn.scale*Kr/Sn,$o={width:Gi[0],height:Gi[1],left:1,top:-3,advance:Vo?Gi[1]:Gi[0]},vi=yi+(Kr-Gi[1]*Tn.scale),ya=$o.advance;const va=Vo?Gi[0]*Tn.scale-Kr*ai:Gi[1]*Tn.scale-Kr*ai;va>0&&va>Vi&&(Vi=va)}else{const To=Gt[Tn.fontStack],Gi=To&&To[ui];if(Gi&&Gi.rect)cs=Gi.rect,$o=Gi.metrics;else{const va=Ut[Tn.fontStack],rf=va&&va[ui];if(!rf)continue;$o=rf.metrics}vi=(ai-Tn.scale)*Kr}Vo?(dt.verticalizable=!0,$i.push({glyph:ui,imageName:hs,x:rr,y:sr+vi,vertical:Vo,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:uo,metrics:$o,rect:cs}),rr+=ya*Tn.scale+nn):($i.push({glyph:ui,imageName:hs,x:rr,y:sr+vi,vertical:Vo,scale:Tn.scale,fontStack:Tn.fontStack,sectionIndex:uo,metrics:$o,rect:cs}),rr+=$o.advance*Tn.scale+nn)}$i.length!==0&&(Nr=Math.max(rr-nn,Nr),rP($i,0,$i.length-1,oi,Vi)),rr=0;const vr=Pt*ai+Vi;Pi.lineOffset=Math.max(Vi,yi),sr+=vr,So=Math.max(vr,So),++kr}var Hr;const si=sr-Gd,{horizontalAlign:gi,verticalAlign:Ui}=ty(jt);(function(zr,ai,yi,Pi,$i,Vi,vr,li,Tn){const uo=(ai-yi)*$i;let ui=0;ui=Vi!==vr?-li*Pi-Gd:(-Pi*Tn+.5)*vr;for(const vi of zr)for(const $o of vi.positionedGlyphs)$o.x+=uo,$o.y+=ui})(dt.positionedLines,oi,gi,Ui,Nr,So,Pt,si,zt.length),dt.top+=-Ui*si,dt.bottom=dt.top+si,dt.left+=-gi*Nr,dt.right=dt.left+Nr}(at,n,s,h,qe,_,T,A,ee,U,le,ze),!function(dt){for(const Ut of dt)if(Ut.positionedGlyphs.length!==0)return!1;return!0}(nt)&&at}const Wd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Dx(o,n,s,h,m,v){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*Kr/v+m:0}{const _=s[n.fontStack],T=_&&_[o];return T?T.metrics.advance*n.scale+m:0}}function Bx(o,n,s,h){const m=Math.pow(o-n,2);return h?o<n?m/2:2*m:m+Math.abs(s)*s}function nP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Nx(o,n,s,h,m,v){let _=null,T=Bx(n,s,m,v);for(const A of h){const U=Bx(n-A.x,s,m,v)+A.badness;U<=T&&(_=A,T=U)}return{index:o,x:n,priorBreak:_,badness:T}}function Ux(o){return o?Ux(o.priorBreak).concat(o.index):[]}function ey(o,n,s,h,m,v,_){if(v!=="point")return[];if(!o)return[];const T=[],A=function(le,ce,fe,ze,Ae,qe){let Qe=0;for(let Ze=0;Ze<le.length();Ze++){const nt=le.getSection(Ze);Qe+=Dx(le.getCharCode(Ze),nt,ze,Ae,ce,qe)}return Qe/Math.max(1,Math.ceil(Qe/fe))}(o,n,s,h,m,_),U=o.text.indexOf("​")>=0;let X=0;for(let le=0;le<o.length();le++){const ce=o.getSection(le),fe=o.getCharCode(le);if(Wd[fe]||(X+=Dx(fe,ce,h,m,n,_)),le<o.length()-1){const ze=!((ee=fe)<11904||!(It["Bopomofo Extended"](ee)||It.Bopomofo(ee)||It["CJK Compatibility Forms"](ee)||It["CJK Compatibility Ideographs"](ee)||It["CJK Compatibility"](ee)||It["CJK Radicals Supplement"](ee)||It["CJK Strokes"](ee)||It["CJK Symbols and Punctuation"](ee)||It["CJK Unified Ideographs Extension A"](ee)||It["CJK Unified Ideographs"](ee)||It["Enclosed CJK Letters and Months"](ee)||It["Halfwidth and Fullwidth Forms"](ee)||It.Hiragana(ee)||It["Ideographic Description Characters"](ee)||It["Kangxi Radicals"](ee)||It["Katakana Phonetic Extensions"](ee)||It.Katakana(ee)||It["Vertical Forms"](ee)||It["Yi Radicals"](ee)||It["Yi Syllables"](ee)));(tP[fe]||ze||ce.imageName)&&T.push(Nx(le+1,X,A,T,nP(fe,o.getCharCode(le+1),ze&&U),!1))}}var ee;return Ux(Nx(o.length(),X,A,T,0,!0))}function ty(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function rP(o,n,s,h,m){if(!h&&!m)return;const v=o[s],_=(o[s].x+v.metrics.advance*v.scale)*h;for(let T=n;T<=s;T++)o[T].x-=_,o[T].y+=m}function iP(o,n,s){const{horizontalAlign:h,verticalAlign:m}=ty(s),v=n[0]-o.displaySize[0]*h,_=n[1]-o.displaySize[1]*m;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function $x(o,n,s,h,m,v){const _=o.image;let T;if(_.content){const Ae=_.content,qe=_.pixelRatio||1;T=[Ae[0]/qe,Ae[1]/qe,_.displaySize[0]-Ae[2]/qe,_.displaySize[1]-Ae[3]/qe]}const A=n.left*v,U=n.right*v;let X,ee,le,ce;s==="width"||s==="both"?(ce=m[0]+A-h[3],ee=m[0]+U+h[1]):(ce=m[0]+(A+U-_.displaySize[0])/2,ee=ce+_.displaySize[0]);const fe=n.top*v,ze=n.bottom*v;return s==="height"||s==="both"?(X=m[1]+fe-h[0],le=m[1]+ze+h[2]):(X=m[1]+(fe+ze-_.displaySize[1])/2,le=X+_.displaySize[1]),{image:_,top:X,right:ee,bottom:le,left:ce,collisionPadding:T}}const ga=128,sl=32640;function Vx(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new ir(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<h.length&&h[_]<o+1;)_++;_=Math.min(h.length-1,_);const T=h[v],A=h[_];return s.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:A,interpolationType:m}:{kind:"camera",minZoom:T,maxZoom:A,minSize:s.evaluate(new ir(T)),maxSize:s.evaluate(new ir(A)),interpolationType:m}}}function ny(o,n,s){let h="never";const m=o.get(n);return m?h=m:o.get(s)&&(h="always"),h}const oP=il.VectorTileFeature.types,sP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hd(o,n,s,h,m,v,_,T,A,U,X,ee,le){const ce=T?Math.min(sl,Math.round(T[0])):0,fe=T?Math.min(sl,Math.round(T[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*m),v,_,(ce<<1)+(A?1:0),fe,16*U,16*X,256*ee,256*le)}function ry(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function aP(o){for(const n of o.sections)if(Id(n.text))return!0;return!1}class iy{constructor(n){this.layoutVertexArray=new rt,this.indexArray=new _t,this.programConfigurations=n,this.segments=new kt,this.dynamicLayoutVertexArray=new lt,this.opacityVertexArray=new vt,this.hasVisibleVertices=!1,this.placedSymbolArray=new I}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,DA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,BA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,sP,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}St("SymbolBuffers",iy);class oy{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new kt,this.collisionVertexArray=new Et}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,NA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}St("CollisionBuffers",oy);class wc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jg([]),this.placementViewportMatrix=jg([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vx(this.zoom,s["text-size"]),this.iconSizeData=Vx(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=ny(h,"text-overlap","text-allow-overlap")!=="never"||ny(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>l.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new iy(new ls(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new iy(new ls(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new $,this.lineVertexArray=new Y,this.symbolInstances=new M}calculateGlyphDependencies(n,s,h,m,v){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,(h||m)&&v){const T=Jh[n.charAt(_)];T&&(s[T.charCodeAt(0)]=!0)}}populate(n,s,h){const m=this.layers[0],v=m.layout,_=v.get("text-font"),T=v.get("text-field"),A=v.get("icon-image"),U=(T.value.kind!=="constant"||T.value.value instanceof $r&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),X=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,ee=v.get("symbol-sort-key");if(this.features=[],!U&&!X)return;const le=s.iconDependencies,ce=s.glyphDependencies,fe=s.availableImages,ze=new ir(this.zoom);for(const{feature:Ae,id:qe,index:Qe,sourceLayerIndex:Ze}of n){const nt=m._featureFilter.needGeometry,at=fu(Ae,nt);if(!m._featureFilter.filter(ze,at,h))continue;let dt,Ut;if(nt||(at.geometry=us(Ae)),U){const Ot=m.getValueAndResolveTokens("text-field",at,h,fe),zt=$r.factory(Ot);aP(zt)&&(this.hasRTLText=!0),(!this.hasRTLText||Lh()==="unavailable"||this.hasRTLText&&lo.isParsed())&&(dt=$A(zt,m,at))}if(X){const Ot=m.getValueAndResolveTokens("icon-image",at,h,fe);Ut=Ot instanceof Fr?Ot:Fr.fromString(Ot)}if(!dt&&!Ut)continue;const Gt=this.sortFeaturesByKey?ee.evaluate(at,{},h):void 0;if(this.features.push({id:qe,text:dt,icon:Ut,index:Qe,sourceLayerIndex:Ze,geometry:at.geometry,properties:Ae.properties,type:oP[Ae.type],sortKey:Gt}),Ut&&(le[Ut.name]=!0),dt){const Ot=_.evaluate(at,{},h).join(","),zt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Pt of dt.sections)if(Pt.image)le[Pt.image.name]=!0;else{const jt=ao(dt.toString()),Rt=Pt.fontStack||Ot,bt=ce[Rt]=ce[Rt]||{};this.calculateGlyphDependencies(Pt.text,bt,zt,this.allowVerticalPlacement,jt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Ae){const qe={},Qe={},Ze=[];let nt=0;function at(Ot){Ze.push(Ae[Ot]),nt++}function dt(Ot,zt,Pt){const jt=Qe[Ot];return delete Qe[Ot],Qe[zt]=jt,Ze[jt].geometry[0].pop(),Ze[jt].geometry[0]=Ze[jt].geometry[0].concat(Pt[0]),jt}function Ut(Ot,zt,Pt){const jt=qe[zt];return delete qe[zt],qe[Ot]=jt,Ze[jt].geometry[0].shift(),Ze[jt].geometry[0]=Pt[0].concat(Ze[jt].geometry[0]),jt}function Gt(Ot,zt,Pt){const jt=Pt?zt[0][zt[0].length-1]:zt[0][0];return`${Ot}:${jt.x}:${jt.y}`}for(let Ot=0;Ot<Ae.length;Ot++){const zt=Ae[Ot],Pt=zt.geometry,jt=zt.text?zt.text.toString():null;if(!jt){at(Ot);continue}const Rt=Gt(jt,Pt),bt=Gt(jt,Pt,!0);if(Rt in Qe&&bt in qe&&Qe[Rt]!==qe[bt]){const nn=Ut(Rt,bt,Pt),Wt=dt(Rt,bt,Ze[nn].geometry);delete qe[Rt],delete Qe[bt],Qe[Gt(jt,Ze[Wt].geometry,!0)]=Wt,Ze[nn].geometry=null}else Rt in Qe?dt(Rt,bt,Pt):bt in qe?Ut(Rt,bt,Pt):(at(Ot),qe[Rt]=nt-1,Qe[bt]=nt-1)}return Ze.filter(Ot=>Ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ae,qe)=>Ae.sortKey-qe.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const _={};for(let T=n.segment+1;T<s.length;T++)_[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:m},T<s.length-1&&(m+=s[T+1].dist(s[T]));for(let T=n.segment||0;T>=0;T--)_[T]={x:s[T].x,y:s[T].y,tileUnitDistanceFromAnchor:v},T>0&&(v+=s[T-1].dist(s[T]));for(let T=0;T<s.length;T++){const A=_[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,m,v,_,T,A,U,X,ee,le){const ce=n.indexArray,fe=n.layoutVertexArray,ze=n.segments.prepareSegment(4*s.length,fe,ce,this.canOverlap?_.sortKey:void 0),Ae=this.glyphOffsetArray.length,qe=ze.vertexLength,Qe=this.allowVerticalPlacement&&T===l.WritingMode.vertical?Math.PI/2:0,Ze=_.text&&_.text.sections;for(let nt=0;nt<s.length;nt++){const{tl:at,tr:dt,bl:Ut,br:Gt,tex:Ot,pixelOffsetTL:zt,pixelOffsetBR:Pt,minFontScaleX:jt,minFontScaleY:Rt,glyphOffset:bt,isSDF:nn,sectionIndex:Wt}=s[nt],Sn=ze.vertexLength,rr=bt[1];Hd(fe,A.x,A.y,at.x,rr+at.y,Ot.x,Ot.y,h,nn,zt.x,zt.y,jt,Rt),Hd(fe,A.x,A.y,dt.x,rr+dt.y,Ot.x+Ot.w,Ot.y,h,nn,Pt.x,zt.y,jt,Rt),Hd(fe,A.x,A.y,Ut.x,rr+Ut.y,Ot.x,Ot.y+Ot.h,h,nn,zt.x,Pt.y,jt,Rt),Hd(fe,A.x,A.y,Gt.x,rr+Gt.y,Ot.x+Ot.w,Ot.y+Ot.h,h,nn,Pt.x,Pt.y,jt,Rt),ry(n.dynamicLayoutVertexArray,A,Qe),ce.emplaceBack(Sn,Sn+1,Sn+2),ce.emplaceBack(Sn+1,Sn+2,Sn+3),ze.vertexLength+=4,ze.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),nt!==s.length-1&&Wt===s[nt+1].sectionIndex||n.programConfigurations.populatePaintArrays(fe.length,_,_.index,{},le,Ze&&Ze[Wt])}n.placedSymbolArray.emplaceBack(A.x,A.y,Ae,this.glyphOffsetArray.length-Ae,qe,U,X,A.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],T,0,!1,0,ee)}_addCollisionDebugVertex(n,s,h,m,v,_){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,s,h,m,v,_,T){const A=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=A.vertexLength,X=v.layoutVertexArray,ee=v.collisionVertexArray,le=T.anchorX,ce=T.anchorY;this._addCollisionDebugVertex(X,ee,_,le,ce,new E(n,s)),this._addCollisionDebugVertex(X,ee,_,le,ce,new E(h,s)),this._addCollisionDebugVertex(X,ee,_,le,ce,new E(h,m)),this._addCollisionDebugVertex(X,ee,_,le,ce,new E(n,m)),A.vertexLength+=4;const fe=v.indexArray;fe.emplaceBack(U,U+1),fe.emplaceBack(U+1,U+2),fe.emplaceBack(U+2,U+3),fe.emplaceBack(U+3,U),A.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,m){for(let v=n;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new oy(xt,Ax.members,Dt),this.iconCollisionBox=new oy(xt,Ax.members,Dt);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,m,v,_,T,A,U){const X={};for(let ee=s;ee<h;ee++){const le=n.get(ee);X.textBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},X.textFeatureIndex=le.featureIndex;break}for(let ee=m;ee<v;ee++){const le=n.get(ee);X.verticalTextBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},X.verticalTextFeatureIndex=le.featureIndex;break}for(let ee=_;ee<T;ee++){const le=n.get(ee);X.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},X.iconFeatureIndex=le.featureIndex;break}for(let ee=A;ee<U;ee++){const le=n.get(ee);X.verticalIconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},X.verticalIconFeatureIndex=le.featureIndex;break}return X}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),m=[],v=[],_=[];for(let T=0;T<this.symbolInstances.length;++T){_.push(T);const A=this.symbolInstances.get(T);m.push(0|Math.round(s*A.anchorX+h*A.anchorY)),v.push(A.featureIndex)}return _.sort((T,A)=>m[T]-m[A]||v[A]-v[T]),_}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,_)=>{m>=0&&_.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Gx,Zx;St("SymbolBucket",wc,{omit:["layers","collisionBoxArray","features","compareText"]}),wc.MAX_GLYPHS=65535,wc.addDynamicAttributes=ry;var sy={get paint(){return Zx=Zx||new Ii({"icon-opacity":new on(Je.paint_symbol["icon-opacity"]),"icon-color":new on(Je.paint_symbol["icon-color"]),"icon-halo-color":new on(Je.paint_symbol["icon-halo-color"]),"icon-halo-width":new on(Je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new on(Je.paint_symbol["icon-halo-blur"]),"icon-translate":new qt(Je.paint_symbol["icon-translate"]),"icon-translate-anchor":new qt(Je.paint_symbol["icon-translate-anchor"]),"text-opacity":new on(Je.paint_symbol["text-opacity"]),"text-color":new on(Je.paint_symbol["text-color"],{runtimeType:$t,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new on(Je.paint_symbol["text-halo-color"]),"text-halo-width":new on(Je.paint_symbol["text-halo-width"]),"text-halo-blur":new on(Je.paint_symbol["text-halo-blur"]),"text-translate":new qt(Je.paint_symbol["text-translate"]),"text-translate-anchor":new qt(Je.paint_symbol["text-translate-anchor"])})},get layout(){return Gx=Gx||new Ii({"symbol-placement":new qt(Je.layout_symbol["symbol-placement"]),"symbol-spacing":new qt(Je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qt(Je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new on(Je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qt(Je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qt(Je.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qt(Je.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qt(Je.layout_symbol["icon-ignore-placement"]),"icon-optional":new qt(Je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qt(Je.layout_symbol["icon-rotation-alignment"]),"icon-size":new on(Je.layout_symbol["icon-size"]),"icon-text-fit":new qt(Je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qt(Je.layout_symbol["icon-text-fit-padding"]),"icon-image":new on(Je.layout_symbol["icon-image"]),"icon-rotate":new on(Je.layout_symbol["icon-rotate"]),"icon-padding":new on(Je.layout_symbol["icon-padding"]),"icon-keep-upright":new qt(Je.layout_symbol["icon-keep-upright"]),"icon-offset":new on(Je.layout_symbol["icon-offset"]),"icon-anchor":new on(Je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qt(Je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qt(Je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qt(Je.layout_symbol["text-rotation-alignment"]),"text-field":new on(Je.layout_symbol["text-field"]),"text-font":new on(Je.layout_symbol["text-font"]),"text-size":new on(Je.layout_symbol["text-size"]),"text-max-width":new on(Je.layout_symbol["text-max-width"]),"text-line-height":new qt(Je.layout_symbol["text-line-height"]),"text-letter-spacing":new on(Je.layout_symbol["text-letter-spacing"]),"text-justify":new on(Je.layout_symbol["text-justify"]),"text-radial-offset":new on(Je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qt(Je.layout_symbol["text-variable-anchor"]),"text-anchor":new on(Je.layout_symbol["text-anchor"]),"text-max-angle":new qt(Je.layout_symbol["text-max-angle"]),"text-writing-mode":new qt(Je.layout_symbol["text-writing-mode"]),"text-rotate":new on(Je.layout_symbol["text-rotate"]),"text-padding":new qt(Je.layout_symbol["text-padding"]),"text-keep-upright":new qt(Je.layout_symbol["text-keep-upright"]),"text-transform":new on(Je.layout_symbol["text-transform"]),"text-offset":new on(Je.layout_symbol["text-offset"]),"text-allow-overlap":new qt(Je.layout_symbol["text-allow-overlap"]),"text-overlap":new qt(Je.layout_symbol["text-overlap"]),"text-ignore-placement":new qt(Je.layout_symbol["text-ignore-placement"]),"text-optional":new qt(Je.layout_symbol["text-optional"])})}};class Wx{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:be,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}St("FormatSectionOverride",Wx,{omit:["defaultValue"]});class Xd extends Bo{constructor(n){super(n,sy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,m){const v=this.layout.get(n).evaluate(s,{},h,m),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||qa(_.value)||!v?v:function(T,A){return A.replace(/{([^{}]+)}/g,(U,X)=>X in T?String(T[X]):"")}(s.properties,v)}createBucket(n){return new wc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of sy.paint.overridableProperties){if(!Xd.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Wx(s),m=new Ql(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new eu("source",m):new xn("composite",m,s.value.zoomStops),this.paint._values[n]=new Do(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Xd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),m=sy.paint.properties[s];let v=!1;const _=T=>{for(const A of T)if(m.overrides&&m.overrides.hasOverride(A))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof $r)_(h.value.value.sections);else if(h.value.kind==="source"){const T=U=>{v||(U instanceof Qo&&tr(U.value)===_n?_(U.value.sections):U instanceof Za?_(U.sections):U.eachChild(T))},A=h.value;A._styleExpression&&T(A._styleExpression.expression)}return v}}let Hx;var lP={get paint(){return Hx=Hx||new Ii({"background-color":new qt(Je.paint_background["background-color"]),"background-pattern":new Fh(Je.paint_background["background-pattern"]),"background-opacity":new qt(Je.paint_background["background-opacity"])})}};let Xx;var uP={get paint(){return Xx=Xx||new Ii({"raster-opacity":new qt(Je.paint_raster["raster-opacity"]),"raster-hue-rotate":new qt(Je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qt(Je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qt(Je.paint_raster["raster-brightness-max"]),"raster-saturation":new qt(Je.paint_raster["raster-saturation"]),"raster-contrast":new qt(Je.paint_raster["raster-contrast"]),"raster-resampling":new qt(Je.paint_raster["raster-resampling"]),"raster-fade-duration":new qt(Je.paint_raster["raster-fade-duration"])})}};class cP extends Bo{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const hP={circle:class extends Bo{constructor(o){super(o,JI)}createBucket(o){return new Rg(o)}queryRadius(o){const n=o;return Vh("circle-radius",this,n)+Vh("circle-stroke-width",this,n)+Od(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,s,h,m,v,_,T){const A=Fd(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,_),U=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),X=this.paint.get("circle-pitch-alignment")==="map",ee=X?A:function(ce,fe){return ce.map(ze=>ix(ze,fe))}(A,T),le=X?U*_:U;for(const ce of h)for(const fe of ce){const ze=X?fe:ix(fe,T);let Ae=le;const qe=jd([],[fe.x,fe.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ae*=qe[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ae*=v.cameraToCenterDistance/qe[3]),XI(ee,ze,Ae))return!0}return!1}},heatmap:class extends Bo{createBucket(o){return new ox(o)}constructor(o){super(o,eA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Bo{constructor(o){super(o,tA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Bo{constructor(o){super(o,gA)}recalculate(o,n){super.recalculate(o,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Hg(o)}queryRadius(){return Od(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,s,h,m,v,_){return J1(Fd(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,_),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Bo{constructor(o){super(o,MA)}createBucket(o){return new qg(o)}queryRadius(){return Od(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,s,h,m,v,_,T){const A=Fd(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,_),U=this.paint.get("fill-extrusion-height").evaluate(n,s),X=this.paint.get("fill-extrusion-base").evaluate(n,s),ee=function(ce,fe,ze,Ae){const qe=[];for(const Qe of ce){const Ze=[Qe.x,Qe.y,0,1];jd(Ze,Ze,fe),qe.push(new E(Ze[0]/Ze[3],Ze[1]/Ze[3]))}return qe}(A,T),le=function(ce,fe,ze,Ae){const qe=[],Qe=[],Ze=Ae[8]*fe,nt=Ae[9]*fe,at=Ae[10]*fe,dt=Ae[11]*fe,Ut=Ae[8]*ze,Gt=Ae[9]*ze,Ot=Ae[10]*ze,zt=Ae[11]*ze;for(const Pt of ce){const jt=[],Rt=[];for(const bt of Pt){const nn=bt.x,Wt=bt.y,Sn=Ae[0]*nn+Ae[4]*Wt+Ae[12],rr=Ae[1]*nn+Ae[5]*Wt+Ae[13],sr=Ae[2]*nn+Ae[6]*Wt+Ae[14],Nr=Ae[3]*nn+Ae[7]*Wt+Ae[15],So=sr+at,oi=Nr+dt,kr=Sn+Ut,Hr=rr+Gt,si=sr+Ot,gi=Nr+zt,Ui=new E((Sn+Ze)/oi,(rr+nt)/oi);Ui.z=So/oi,jt.push(Ui);const zr=new E(kr/gi,Hr/gi);zr.z=si/gi,Rt.push(zr)}qe.push(jt),Qe.push(Rt)}return[qe,Qe]}(h,X,U,T);return function(ce,fe,ze){let Ae=1/0;J1(ze,fe)&&(Ae=bx(ze,fe[0]));for(let qe=0;qe<fe.length;qe++){const Qe=fe[qe],Ze=ce[qe];for(let nt=0;nt<Qe.length-1;nt++){const at=Qe[nt],dt=[at,Qe[nt+1],Ze[nt+1],Ze[nt],at];Y1(ze,dt)&&(Ae=Math.min(Ae,bx(ze,dt)))}}return Ae!==1/0&&Ae}(le[0],le[1],ee)}},line:class extends Bo{constructor(o){super(o,Cx),this.gradientVersion=0,$d||($d=new jA(Cx.paint.properties["line-width"].specification),$d.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Is,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=$d.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Kg(o)}queryRadius(o){const n=o,s=Ix(Vh("line-width",this,n),Vh("line-gap-width",this,n)),h=Vh("line-offset",this,n);return s/2+Math.abs(h)+Od(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,s,h,m,v,_){const T=Fd(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,_),A=_/2*Ix(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),U=this.paint.get("line-offset").evaluate(n,s);return U&&(h=function(X,ee){const le=[];for(let ce=0;ce<X.length;ce++){const fe=X[ce],ze=[];for(let Ae=0;Ae<fe.length;Ae++){const qe=fe[Ae-1],Qe=fe[Ae],Ze=fe[Ae+1],nt=Ae===0?new E(0,0):Qe.sub(qe)._unit()._perp(),at=Ae===fe.length-1?new E(0,0):Ze.sub(Qe)._unit()._perp(),dt=nt._add(at)._unit(),Ut=dt.x*at.x+dt.y*at.y;Ut!==0&&dt._mult(1/Ut),ze.push(dt._mult(ee)._add(Qe))}le.push(ze)}return le}(h,U*_)),function(X,ee,le){for(let ce=0;ce<ee.length;ce++){const fe=ee[ce];if(X.length>=3){for(let ze=0;ze<fe.length;ze++)if(pc(X,fe[ze]))return!0}if(qI(X,fe,le))return!0}return!1}(T,h,A)}isTileClipped(){return!0}},symbol:Xd,background:class extends Bo{constructor(o){super(o,lP)}},raster:class extends Bo{constructor(o){super(o,uP)}}};class fP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const ay=63710088e-1;class al{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new al(V(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,m=n.lat*s,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*s);return ay*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof al)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new al(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new al(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const qx=2*Math.PI*ay;function Kx(o){return qx*Math.cos(o*Math.PI/180)}function Yx(o){return(180+o)/360}function Jx(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Qx(o,n){return o/Kx(n)}function ly(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class qd{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=al.convert(n);return new qd(Yx(h.lng),Jx(h.lat),Qx(s,h.lat))}toLngLat(){return new al(360*this.x-180,ly(this.y))}toAltitude(){return this.z*Kx(ly(this.y))}meterInMercatorCoordinateUnits(){return 1/qx*(n=ly(this.y),1/Math.cos(n*Math.PI/180));var n}}function ew(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class uy{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=ef(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const m=(_=this.y,T=this.z,A=ew(256*(v=this.x),256*(_=Math.pow(2,T)-_-1),T),U=ew(256*(v+1),256*(_+1),T),A[0]+","+A[1]+","+U[0]+","+U[1]);var v,_,T,A,U;const X=function(ee,le,ce){let fe,ze="";for(let Ae=ee;Ae>0;Ae--)fe=1<<Ae-1,ze+=(le&fe?1:0)+(ce&fe?2:0);return ze}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,X).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new E((n.x*s-this.x)*or,(n.y*s-this.y)*or)}toString(){return`${this.z}/${this.x}/${this.y}`}}class tw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=ef(n,s.z,s.z,s.x,s.y)}}class Eo{constructor(n,s,h,m,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new uy(h,+m,+v),this.key=ef(s,n,h,m,v)}clone(){return new Eo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Eo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?ef(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):ef(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Eo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Eo(s,this.wrap,s,h,m),new Eo(s,this.wrap,s,h+1,m),new Eo(s,this.wrap,s,h,m+1),new Eo(s,this.wrap,s,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Eo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Eo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new tw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new qd(n.x-this.wrap,n.y))}}function ef(o,n,s,h,m){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*m+h).toString(36)+s.toString(36)+n.toString(36)}St("CanonicalTileID",uy),St("OverscaledTileID",Eo,{omit:["posMatrix"]});class nw{constructor(n,s,h){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void J(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const m=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<m;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(m,v)]=this.data[this._idx(m-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,m)]=this.data[this._idx(v,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let v=0;v<m;v++)for(let _=0;_<m;_++){const T=this.get(v,_);T>this.max&&(this.max=T),T<this.min&&(this.min=T)}}get(n,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[m],h[m+1],h[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,h){return(256*n*256+256*s+h)/10-1e4}_unpackTerrarium(n,s,h){return 256*n+s+h/256-32768}getPixels(){return new bo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,v=s*this.dim+this.dim,_=h*this.dim,T=h*this.dim+this.dim;switch(s){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:_=T-1;break;case 1:T=_+1}const A=-s*this.dim,U=-h*this.dim;for(let X=_;X<T;X++)for(let ee=m;ee<v;ee++)this.data[this._idx(ee,X)]=n.data[this._idx(ee+A,X+U)]}}St("DEMData",nw);class rw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class iw{constructor(n,s,h,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class ow{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Rn(or,16,0),this.grid3D=new Rn(or,16,0),this.featureIndexArray=new he,this.promoteId=s}insert(n,s,h,m,v,_){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const A=_?this.grid3D:this.grid;for(let U=0;U<s.length;U++){const X=s[U],ee=[1/0,1/0,-1/0,-1/0];for(let le=0;le<X.length;le++){const ce=X[le];ee[0]=Math.min(ee[0],ce.x),ee[1]=Math.min(ee[1],ce.y),ee[2]=Math.max(ee[2],ce.x),ee[3]=Math.max(ee[3],ce.y)}ee[0]<or&&ee[1]<or&&ee[2]>=0&&ee[3]>=0&&A.insert(T,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new Jg(this.rawTileData)).layers,this.sourceLayerCoder=new rw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,m){this.loadVTLayers();const v=n.params||{},_=or/n.tileSize/n.scale,T=nu(v.filter),A=n.queryGeometry,U=n.queryPadding*_,X=aw(A),ee=this.grid.query(X.minX-U,X.minY-U,X.maxX+U,X.maxY+U),le=aw(n.cameraQueryGeometry),ce=this.grid3D.query(le.minX-U,le.minY-U,le.maxX+U,le.maxY+U,(Ae,qe,Qe,Ze)=>function(nt,at,dt,Ut,Gt){for(const zt of nt)if(at<=zt.x&&dt<=zt.y&&Ut>=zt.x&&Gt>=zt.y)return!0;const Ot=[new E(at,dt),new E(at,Gt),new E(Ut,Gt),new E(Ut,dt)];if(nt.length>2){for(const zt of Ot)if(pc(nt,zt))return!0}for(let zt=0;zt<nt.length-1;zt++)if(YI(nt[zt],nt[zt+1],Ot))return!0;return!1}(n.cameraQueryGeometry,Ae-U,qe-U,Qe+U,Ze+U));for(const Ae of ce)ee.push(Ae);ee.sort(dP);const fe={};let ze;for(let Ae=0;Ae<ee.length;Ae++){const qe=ee[Ae];if(qe===ze)continue;ze=qe;const Qe=this.featureIndexArray.get(qe);let Ze=null;this.loadMatchingFeature(fe,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,T,v.layers,v.availableImages,s,h,m,(nt,at,dt)=>(Ze||(Ze=us(nt)),at.queryIntersectsFeature(A,nt,dt,Ze,this.z,n.transform,_,n.pixelPosMatrix)))}return fe}loadMatchingFeature(n,s,h,m,v,_,T,A,U,X,ee){const le=this.bucketLayerIDs[s];if(_&&!function(Ae,qe){for(let Qe=0;Qe<Ae.length;Qe++)if(qe.indexOf(Ae[Qe])>=0)return!0;return!1}(_,le))return;const ce=this.sourceLayerCoder.decode(h),fe=this.vtLayers[ce].feature(m);if(v.needGeometry){const Ae=fu(fe,!0);if(!v.filter(new ir(this.tileID.overscaledZ),Ae,this.tileID.canonical))return}else if(!v.filter(new ir(this.tileID.overscaledZ),fe))return;const ze=this.getId(fe,ce);for(let Ae=0;Ae<le.length;Ae++){const qe=le[Ae];if(_&&_.indexOf(qe)<0)continue;const Qe=A[qe];if(!Qe)continue;let Ze={};ze&&X&&(Ze=X.getState(Qe.sourceLayer||"_geojsonTileLayer",ze));const nt=B({},U[qe]);nt.paint=sw(nt.paint,Qe.paint,fe,Ze,T),nt.layout=sw(nt.layout,Qe.layout,fe,Ze,T);const at=!ee||ee(fe,Qe,Ze);if(!at)continue;const dt=new iw(fe,this.z,this.x,this.y,ze);dt.layer=nt;let Ut=n[qe];Ut===void 0&&(Ut=n[qe]=[]),Ut.push({featureIndex:m,feature:dt,intersectionZ:at})}}lookupSymbolFeatures(n,s,h,m,v,_,T,A){const U={};this.loadVTLayers();const X=nu(v);for(const ee of n)this.loadMatchingFeature(U,h,m,ee,X,_,T,A,s);return U}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function sw(o,n,s,h,m){return D(o,(v,_)=>{const T=n instanceof rc?n.get(_):null;return T&&T.evaluate?T.evaluate(s,h,m):T})}function aw(o){let n=1/0,s=1/0,h=-1/0,m=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:n,minY:s,maxX:h,maxY:m}}function dP(o,n){return n-o}function lw(o,n,s,h,m){const v=[];for(let _=0;_<o.length;_++){const T=o[_];let A;for(let U=0;U<T.length-1;U++){let X=T[U],ee=T[U+1];X.x<n&&ee.x<n||(X.x<n?X=new E(n,X.y+(n-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x<n&&(ee=new E(n,X.y+(n-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y<s&&ee.y<s||(X.y<s?X=new E(X.x+(s-X.y)/(ee.y-X.y)*(ee.x-X.x),s)._round():ee.y<s&&(ee=new E(X.x+(s-X.y)/(ee.y-X.y)*(ee.x-X.x),s)._round()),X.x>=h&&ee.x>=h||(X.x>=h?X=new E(h,X.y+(h-X.x)/(ee.x-X.x)*(ee.y-X.y))._round():ee.x>=h&&(ee=new E(h,X.y+(h-X.x)/(ee.x-X.x)*(ee.y-X.y))._round()),X.y>=m&&ee.y>=m||(X.y>=m?X=new E(X.x+(m-X.y)/(ee.y-X.y)*(ee.x-X.x),m)._round():ee.y>=m&&(ee=new E(X.x+(m-X.y)/(ee.y-X.y)*(ee.x-X.x),m)._round()),A&&X.equals(A[A.length-1])||(A=[X],v.push(A)),A.push(ee)))))}}return v}St("FeatureIndex",ow,{omit:["rawTileData","sourceLayerCoder"]});class ll extends E{constructor(n,s,h,m){super(n,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new ll(this.x,this.y,this.angle,this.segment)}}function uw(o,n,s,h,m){if(n.segment===void 0)return!0;let v=n,_=n.segment+1,T=0;for(;T>-s/2;){if(_--,_<0)return!1;T-=o[_].dist(v),v=o[_]}T+=o[_].dist(o[_+1]),_++;const A=[];let U=0;for(;T<s/2;){const X=o[_],ee=o[_+1];if(!ee)return!1;let le=o[_-1].angleTo(X)-X.angleTo(ee);for(le=Math.abs((le+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:T,angleDelta:le}),U+=le;T-A[0].distance>h;)U-=A.shift().angleDelta;if(U>m)return!1;_++,T+=X.dist(ee)}return!0}function cw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function hw(o,n,s){return o?.6*n*s:0}function fw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function pP(o,n,s,h,m,v){const _=hw(s,m,v),T=fw(s,h)*v;let A=0;const U=cw(o)/2;for(let X=0;X<o.length-1;X++){const ee=o[X],le=o[X+1],ce=ee.dist(le);if(A+ce>U){const fe=(U-A)/ce,ze=ni.number(ee.x,le.x,fe),Ae=ni.number(ee.y,le.y,fe),qe=new ll(ze,Ae,le.angleTo(ee),X);return qe._round(),!_||uw(o,qe,T,_,n)?qe:void 0}A+=ce}}function mP(o,n,s,h,m,v,_,T,A){const U=hw(h,v,_),X=fw(h,m),ee=X*_,le=o[0].x===0||o[0].x===A||o[0].y===0||o[0].y===A;return n-ee<n/4&&(n=ee+n/4),dw(o,le?n/2*T%n:(X/2+2*v)*_*T%n,n,U,s,ee,le,!1,A)}function dw(o,n,s,h,m,v,_,T,A){const U=v/2,X=cw(o);let ee=0,le=n-s,ce=[];for(let fe=0;fe<o.length-1;fe++){const ze=o[fe],Ae=o[fe+1],qe=ze.dist(Ae),Qe=Ae.angleTo(ze);for(;le+s<ee+qe;){le+=s;const Ze=(le-ee)/qe,nt=ni.number(ze.x,Ae.x,Ze),at=ni.number(ze.y,Ae.y,Ze);if(nt>=0&&nt<A&&at>=0&&at<A&&le-U>=0&&le+U<=X){const dt=new ll(nt,at,Qe,fe);dt._round(),h&&!uw(o,dt,v,h,m)||ce.push(dt)}}ee+=qe}return T||ce.length||_||(ce=dw(o,ee/2,s,h,m,v,_,!0,A)),ce}function pw(o,n,s,h){const m=[],v=o.image,_=v.pixelRatio,T=v.paddedRect.w-2,A=v.paddedRect.h-2,U=o.right-o.left,X=o.bottom-o.top,ee=v.stretchX||[[0,T]],le=v.stretchY||[[0,A]],ce=(Pt,jt)=>Pt+jt[1]-jt[0],fe=ee.reduce(ce,0),ze=le.reduce(ce,0),Ae=T-fe,qe=A-ze;let Qe=0,Ze=fe,nt=0,at=ze,dt=0,Ut=Ae,Gt=0,Ot=qe;if(v.content&&h){const Pt=v.content;Qe=Kd(ee,0,Pt[0]),nt=Kd(le,0,Pt[1]),Ze=Kd(ee,Pt[0],Pt[2]),at=Kd(le,Pt[1],Pt[3]),dt=Pt[0]-Qe,Gt=Pt[1]-nt,Ut=Pt[2]-Pt[0]-Ze,Ot=Pt[3]-Pt[1]-at}const zt=(Pt,jt,Rt,bt)=>{const nn=Yd(Pt.stretch-Qe,Ze,U,o.left),Wt=Jd(Pt.fixed-dt,Ut,Pt.stretch,fe),Sn=Yd(jt.stretch-nt,at,X,o.top),rr=Jd(jt.fixed-Gt,Ot,jt.stretch,ze),sr=Yd(Rt.stretch-Qe,Ze,U,o.left),Nr=Jd(Rt.fixed-dt,Ut,Rt.stretch,fe),So=Yd(bt.stretch-nt,at,X,o.top),oi=Jd(bt.fixed-Gt,Ot,bt.stretch,ze),kr=new E(nn,Sn),Hr=new E(sr,Sn),si=new E(sr,So),gi=new E(nn,So),Ui=new E(Wt/_,rr/_),zr=new E(Nr/_,oi/_),ai=n*Math.PI/180;if(ai){const $i=Math.sin(ai),Vi=Math.cos(ai),vr=[Vi,-$i,$i,Vi];kr._matMult(vr),Hr._matMult(vr),gi._matMult(vr),si._matMult(vr)}const yi=Pt.stretch+Pt.fixed,Pi=jt.stretch+jt.fixed;return{tl:kr,tr:Hr,bl:gi,br:si,tex:{x:v.paddedRect.x+1+yi,y:v.paddedRect.y+1+Pi,w:Rt.stretch+Rt.fixed-yi,h:bt.stretch+bt.fixed-Pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ui,pixelOffsetBR:zr,minFontScaleX:Ut/_/U,minFontScaleY:Ot/_/X,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const Pt=mw(ee,Ae,fe),jt=mw(le,qe,ze);for(let Rt=0;Rt<Pt.length-1;Rt++){const bt=Pt[Rt],nn=Pt[Rt+1];for(let Wt=0;Wt<jt.length-1;Wt++)m.push(zt(bt,jt[Wt],nn,jt[Wt+1]))}}else m.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:A+1}));return m}function Kd(o,n,s){let h=0;for(const m of o)h+=Math.max(n,Math.min(s,m[1]))-Math.max(n,Math.min(s,m[0]));return h}function mw(o,n,s){const h=[{fixed:-1,stretch:0}];for(const[m,v]of o){const _=h[h.length-1];h.push({fixed:m-_.stretch,stretch:_.stretch}),h.push({fixed:m-_.stretch,stretch:_.stretch+(v-m)})}return h.push({fixed:n+1,stretch:s}),h}function Yd(o,n,s,h){return o/n*s+h}function Jd(o,n,s,h){return o-n*s/h}St("Anchor",ll);class Qd{constructor(n,s,h,m,v,_,T,A,U,X){if(this.boxStartIndex=n.length,U){let ee=_.top,le=_.bottom;const ce=_.collisionPadding;ce&&(ee-=ce[1],le+=ce[3]);let fe=le-ee;fe>0&&(fe=Math.max(10,fe),this.circleDiameter=fe)}else{let ee=_.top*T-A[0],le=_.bottom*T+A[2],ce=_.left*T-A[3],fe=_.right*T+A[1];const ze=_.collisionPadding;if(ze&&(ce-=ze[0]*T,ee-=ze[1]*T,fe+=ze[2]*T,le+=ze[3]*T),X){const Ae=new E(ce,ee),qe=new E(fe,ee),Qe=new E(ce,le),Ze=new E(fe,le),nt=X*Math.PI/180;Ae._rotate(nt),qe._rotate(nt),Qe._rotate(nt),Ze._rotate(nt),ce=Math.min(Ae.x,qe.x,Qe.x,Ze.x),fe=Math.max(Ae.x,qe.x,Qe.x,Ze.x),ee=Math.min(Ae.y,qe.y,Qe.y,Ze.y),le=Math.max(Ae.y,qe.y,Qe.y,Ze.y)}n.emplaceBack(s.x,s.y,ce,ee,fe,le,h,m,v)}this.boxEndIndex=n.length}}class gP{constructor(n=[],s=yP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,m=s[n];for(;n>0;){const v=n-1>>1,_=s[v];if(h(m,_)>=0)break;s[n]=_,n=v}s[n]=m}_down(n){const{data:s,compare:h}=this,m=this.length>>1,v=s[n];for(;n<m;){let _=1+(n<<1),T=s[_];const A=_+1;if(A<this.length&&h(s[A],T)<0&&(_=A,T=s[A]),h(T,v)>=0)break;s[n]=T,n=_}s[n]=v}}function yP(o,n){return o<n?-1:o>n?1:0}function vP(o,n=1,s=!1){let h=1/0,m=1/0,v=-1/0,_=-1/0;const T=o[0];for(let ce=0;ce<T.length;ce++){const fe=T[ce];(!ce||fe.x<h)&&(h=fe.x),(!ce||fe.y<m)&&(m=fe.y),(!ce||fe.x>v)&&(v=fe.x),(!ce||fe.y>_)&&(_=fe.y)}const A=Math.min(v-h,_-m);let U=A/2;const X=new gP([],_P);if(A===0)return new E(h,m);for(let ce=h;ce<v;ce+=A)for(let fe=m;fe<_;fe+=A)X.push(new bc(ce+U,fe+U,U,o));let ee=function(ce){let fe=0,ze=0,Ae=0;const qe=ce[0];for(let Qe=0,Ze=qe.length,nt=Ze-1;Qe<Ze;nt=Qe++){const at=qe[Qe],dt=qe[nt],Ut=at.x*dt.y-dt.x*at.y;ze+=(at.x+dt.x)*Ut,Ae+=(at.y+dt.y)*Ut,fe+=3*Ut}return new bc(ze/fe,Ae/fe,0,ce)}(o),le=X.length;for(;X.length;){const ce=X.pop();(ce.d>ee.d||!ee.d)&&(ee=ce,s&&console.log("found best %d after %d probes",Math.round(1e4*ce.d)/1e4,le)),ce.max-ee.d<=n||(U=ce.h/2,X.push(new bc(ce.p.x-U,ce.p.y-U,U,o)),X.push(new bc(ce.p.x+U,ce.p.y-U,U,o)),X.push(new bc(ce.p.x-U,ce.p.y+U,U,o)),X.push(new bc(ce.p.x+U,ce.p.y+U,U,o)),le+=4)}return s&&(console.log(`num probes: ${le}`),console.log(`best distance: ${ee.d}`)),ee.p}function _P(o,n){return n.max-o.max}function bc(o,n,s,h){this.p=new E(o,n),this.h=s,this.d=function(m,v){let _=!1,T=1/0;for(let A=0;A<v.length;A++){const U=v[A];for(let X=0,ee=U.length,le=ee-1;X<ee;le=X++){const ce=U[X],fe=U[le];ce.y>m.y!=fe.y>m.y&&m.x<(fe.x-ce.x)*(m.y-ce.y)/(fe.y-ce.y)+ce.x&&(_=!_),T=Math.min(T,Q1(m,ce,fe))}}return(_?1:-1)*Math.sqrt(T)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const cy=Number.POSITIVE_INFINITY;function gw(o,n){return n[1]!==cy?function(s,h,m){let v=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,_]}(o,n[0],n[1]):function(s,h){let m=0,v=0;h<0&&(h=0);const _=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(o,n[0])}function hy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xP(o,n,s,h,m,v,_,T,A,U,X){let ee=v.textMaxSize.evaluate(n,{});ee===void 0&&(ee=_);const le=o.layers[0].layout,ce=le.get("icon-offset").evaluate(n,{},X),fe=vw(s.horizontal),ze=_/24,Ae=o.tilePixelRatio*ze,qe=o.tilePixelRatio*ee/24,Qe=o.tilePixelRatio*T,Ze=o.tilePixelRatio*le.get("symbol-spacing"),nt=le.get("text-padding")*o.tilePixelRatio,at=function(bt,nn,Wt,Sn=1){const rr=bt.get("icon-padding").evaluate(nn,{},Wt),sr=rr&&rr.values;return[sr[0]*Sn,sr[1]*Sn,sr[2]*Sn,sr[3]*Sn]}(le,n,X,o.tilePixelRatio),dt=le.get("text-max-angle")/180*Math.PI,Ut=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",Gt=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",Ot=le.get("symbol-placement"),zt=Ze/2,Pt=le.get("icon-text-fit");let jt;h&&Pt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(jt=$x(h,s.vertical,Pt,le.get("icon-text-fit-padding"),ce,ze)),fe&&(h=$x(h,fe,Pt,le.get("icon-text-fit-padding"),ce,ze)));const Rt=(bt,nn)=>{nn.x<0||nn.x>=or||nn.y<0||nn.y>=or||function(Wt,Sn,rr,sr,Nr,So,oi,kr,Hr,si,gi,Ui,zr,ai,yi,Pi,$i,Vi,vr,li,Tn,uo,ui,vi,$o){const cs=Wt.addToLineVertexArray(Sn,rr);let hs,ya,Vo,To,Gi=0,va=0,rf=0,bw=0,_y=-1,xy=-1;const _a={};let Ew=wr(""),wy=0,by=0;if(kr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[wy,by]=kr.layout.get("text-offset").evaluate(Tn,{},vi).map(Zi=>Zi*Kr):(wy=kr.layout.get("text-radial-offset").evaluate(Tn,{},vi)*Kr,by=cy),Wt.allowVerticalPlacement&&sr.vertical){const Zi=kr.layout.get("text-rotate").evaluate(Tn,{},vi)+90;Vo=new Qd(Hr,Sn,si,gi,Ui,sr.vertical,zr,ai,yi,Zi),oi&&(To=new Qd(Hr,Sn,si,gi,Ui,oi,$i,Vi,yi,Zi))}if(Nr){const Zi=kr.layout.get("icon-rotate").evaluate(Tn,{}),Ds=kr.layout.get("icon-text-fit")!=="none",of=pw(Nr,Zi,ui,Ds),sf=oi?pw(oi,Zi,ui,Ds):void 0;ya=new Qd(Hr,Sn,si,gi,Ui,Nr,$i,Vi,!1,Zi),Gi=4*of.length;const Cw=Wt.iconSizeData;let pu=null;Cw.kind==="source"?(pu=[ga*kr.layout.get("icon-size").evaluate(Tn,{})],pu[0]>sl&&J(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Cw.kind==="composite"&&(pu=[ga*uo.compositeIconSizes[0].evaluate(Tn,{},vi),ga*uo.compositeIconSizes[1].evaluate(Tn,{},vi)],(pu[0]>sl||pu[1]>sl)&&J(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,of,pu,li,vr,Tn,l.WritingMode.none,Sn,cs.lineStartIndex,cs.lineLength,-1,vi),_y=Wt.icon.placedSymbolArray.length-1,sf&&(va=4*sf.length,Wt.addSymbols(Wt.icon,sf,pu,li,vr,Tn,l.WritingMode.vertical,Sn,cs.lineStartIndex,cs.lineLength,-1,vi),xy=Wt.icon.placedSymbolArray.length-1)}const Sw=Object.keys(sr.horizontal);for(const Zi of Sw){const Ds=sr.horizontal[Zi];if(!hs){Ew=wr(Ds.text);const sf=kr.layout.get("text-rotate").evaluate(Tn,{},vi);hs=new Qd(Hr,Sn,si,gi,Ui,Ds,zr,ai,yi,sf)}const of=Ds.positionedLines.length===1;if(rf+=yw(Wt,Sn,Ds,So,kr,yi,Tn,Pi,cs,sr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,of?Sw:[Zi],_a,_y,uo,vi),of)break}sr.vertical&&(bw+=yw(Wt,Sn,sr.vertical,So,kr,yi,Tn,Pi,cs,l.WritingMode.vertical,["vertical"],_a,xy,uo,vi));const EP=hs?hs.boxStartIndex:Wt.collisionBoxArray.length,SP=hs?hs.boxEndIndex:Wt.collisionBoxArray.length,TP=Vo?Vo.boxStartIndex:Wt.collisionBoxArray.length,CP=Vo?Vo.boxEndIndex:Wt.collisionBoxArray.length,IP=ya?ya.boxStartIndex:Wt.collisionBoxArray.length,AP=ya?ya.boxEndIndex:Wt.collisionBoxArray.length,PP=To?To.boxStartIndex:Wt.collisionBoxArray.length,MP=To?To.boxEndIndex:Wt.collisionBoxArray.length;let fs=-1;const tp=(Zi,Ds)=>Zi&&Zi.circleDiameter?Math.max(Zi.circleDiameter,Ds):Ds;fs=tp(hs,fs),fs=tp(Vo,fs),fs=tp(ya,fs),fs=tp(To,fs);const Tw=fs>-1?1:0;Tw&&(fs*=$o/Kr),Wt.glyphOffsetArray.length>=wc.MAX_GLYPHS&&J("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Tn.sortKey),Wt.symbolInstances.emplaceBack(Sn.x,Sn.y,_a.right>=0?_a.right:-1,_a.center>=0?_a.center:-1,_a.left>=0?_a.left:-1,_a.vertical||-1,_y,xy,Ew,EP,SP,TP,CP,IP,AP,PP,MP,si,rf,bw,Gi,va,Tw,0,zr,wy,by,fs)}(o,nn,bt,s,h,m,jt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Ae,[nt,nt,nt,nt],Ut,A,Qe,at,Gt,ce,n,v,U,X,_)};if(Ot==="line")for(const bt of lw(n.geometry,0,0,or,or)){const nn=mP(bt,Ze,dt,s.vertical||fe,h,24,qe,o.overscaling,or);for(const Wt of nn)fe&&wP(o,fe.text,zt,Wt)||Rt(bt,Wt)}else if(Ot==="line-center"){for(const bt of n.geometry)if(bt.length>1){const nn=pP(bt,dt,s.vertical||fe,h,24,qe);nn&&Rt(bt,nn)}}else if(n.type==="Polygon")for(const bt of Gg(n.geometry,0)){const nn=vP(bt,16);Rt(bt[0],new ll(nn.x,nn.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Rt(bt,new ll(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const nn of bt)Rt([nn],new ll(nn.x,nn.y,0))}function yw(o,n,s,h,m,v,_,T,A,U,X,ee,le,ce,fe){const ze=function(Qe,Ze,nt,at,dt,Ut,Gt,Ot){const zt=at.layout.get("text-rotate").evaluate(Ut,{})*Math.PI/180,Pt=[];for(const jt of Ze.positionedLines)for(const Rt of jt.positionedGlyphs){if(!Rt.rect)continue;const bt=Rt.rect||{};let nn=4,Wt=!0,Sn=1,rr=0;const sr=(dt||Ot)&&Rt.vertical,Nr=Rt.metrics.advance*Rt.scale/2;if(Ot&&Ze.verticalizable&&(rr=jt.lineOffset/2-(Rt.imageName?-(Kr-Rt.metrics.width*Rt.scale)/2:(Rt.scale-1)*Kr)),Rt.imageName){const vr=Gt[Rt.imageName];Wt=vr.sdf,Sn=vr.pixelRatio,nn=1/Sn}const So=dt?[Rt.x+Nr,Rt.y]:[0,0];let oi=dt?[0,0]:[Rt.x+Nr+nt[0],Rt.y+nt[1]-rr],kr=[0,0];sr&&(kr=oi,oi=[0,0]);const Hr=(Rt.metrics.left-nn)*Rt.scale-Nr+oi[0],si=(-Rt.metrics.top-nn)*Rt.scale+oi[1],gi=Hr+bt.w*Rt.scale/Sn,Ui=si+bt.h*Rt.scale/Sn,zr=new E(Hr,si),ai=new E(gi,si),yi=new E(Hr,Ui),Pi=new E(gi,Ui);if(sr){const vr=new E(-Nr,Nr-Gd),li=-Math.PI/2,Tn=12-Nr,uo=new E(22-Tn,-(Rt.imageName?Tn:0)),ui=new E(...kr);zr._rotateAround(li,vr)._add(uo)._add(ui),ai._rotateAround(li,vr)._add(uo)._add(ui),yi._rotateAround(li,vr)._add(uo)._add(ui),Pi._rotateAround(li,vr)._add(uo)._add(ui)}if(zt){const vr=Math.sin(zt),li=Math.cos(zt),Tn=[li,-vr,vr,li];zr._matMult(Tn),ai._matMult(Tn),yi._matMult(Tn),Pi._matMult(Tn)}const $i=new E(0,0),Vi=new E(0,0);Pt.push({tl:zr,tr:ai,bl:yi,br:Pi,tex:bt,writingMode:Ze.writingMode,glyphOffset:So,sectionIndex:Rt.sectionIndex,isSDF:Wt,pixelOffsetTL:$i,pixelOffsetBR:Vi,minFontScaleX:0,minFontScaleY:0})}return Pt}(0,s,T,m,v,_,h,o.allowVerticalPlacement),Ae=o.textSizeData;let qe=null;Ae.kind==="source"?(qe=[ga*m.layout.get("text-size").evaluate(_,{})],qe[0]>sl&&J(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ae.kind==="composite"&&(qe=[ga*ce.compositeTextSizes[0].evaluate(_,{},fe),ga*ce.compositeTextSizes[1].evaluate(_,{},fe)],(qe[0]>sl||qe[1]>sl)&&J(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,ze,qe,T,v,_,U,n,A.lineStartIndex,A.lineLength,le,fe);for(const Qe of X)ee[Qe]=o.text.placedSymbolArray.length-1;return 4*ze.length}function vw(o){for(const n in o)return o[n];return null}function wP(o,n,s,h){const m=o.compareText;if(n in m){const v=m[n];for(let _=v.length-1;_>=0;_--)if(h.dist(v[_])<s)return!0}else m[n]=[];return m[n].push(h),!1}const _w=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class fy{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=_w[15&h];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(n,2,1),[T]=new Uint32Array(n,4,1);return new fy(T,_,v,n)}constructor(n,s=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=_w.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,T=n*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-T%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+A,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+T+A),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+T+A,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return dy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:T}=this,A=[0,v.length-1,0],U=[];for(;A.length;){const X=A.pop()||0,ee=A.pop()||0,le=A.pop()||0;if(ee-le<=T){for(let Ae=le;Ae<=ee;Ae++){const qe=_[2*Ae],Qe=_[2*Ae+1];qe>=n&&qe<=h&&Qe>=s&&Qe<=m&&U.push(v[Ae])}continue}const ce=le+ee>>1,fe=_[2*ce],ze=_[2*ce+1];fe>=n&&fe<=h&&ze>=s&&ze<=m&&U.push(v[ce]),(X===0?n<=fe:s<=ze)&&(A.push(le),A.push(ce-1),A.push(1-X)),(X===0?h>=fe:m>=ze)&&(A.push(ce+1),A.push(ee),A.push(1-X))}return U}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:_}=this,T=[0,m.length-1,0],A=[],U=h*h;for(;T.length;){const X=T.pop()||0,ee=T.pop()||0,le=T.pop()||0;if(ee-le<=_){for(let Ae=le;Ae<=ee;Ae++)ww(v[2*Ae],v[2*Ae+1],n,s)<=U&&A.push(m[Ae]);continue}const ce=le+ee>>1,fe=v[2*ce],ze=v[2*ce+1];ww(fe,ze,n,s)<=U&&A.push(m[ce]),(X===0?n-h<=fe:s-h<=ze)&&(T.push(le),T.push(ce-1),T.push(1-X)),(X===0?n+h>=fe:s+h>=ze)&&(T.push(ce+1),T.push(ee),T.push(1-X))}return A}}function dy(o,n,s,h,m,v){if(m-h<=s)return;const _=h+m>>1;xw(o,n,_,h,m,v),dy(o,n,s,h,_-1,1-v),dy(o,n,s,_+1,m,1-v)}function xw(o,n,s,h,m,v){for(;m>h;){if(m-h>600){const U=m-h+1,X=s-h+1,ee=Math.log(U),le=.5*Math.exp(2*ee/3),ce=.5*Math.sqrt(ee*le*(U-le)/U)*(X-U/2<0?-1:1);xw(o,n,s,Math.max(h,Math.floor(s-X*le/U+ce)),Math.min(m,Math.floor(s+(U-X)*le/U+ce)),v)}const _=n[2*s+v];let T=h,A=m;for(tf(o,n,h,s),n[2*m+v]>_&&tf(o,n,h,m);T<A;){for(tf(o,n,T,A),T++,A--;n[2*T+v]<_;)T++;for(;n[2*A+v]>_;)A--}n[2*h+v]===_?tf(o,n,h,A):(A++,tf(o,n,A,m)),A<=s&&(h=A+1),s<=A&&(m=A-1)}}function tf(o,n,s,h){py(o,s,h),py(n,2*s,2*h),py(n,2*s+1,2*h+1)}function py(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function ww(o,n,s,h){const m=o-s,v=n-h;return m*m+v*v}var my;l.PerformanceMarkers=void 0,(my=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",my.load="load",my.fullLoad="fullLoad";let ep=null,nf=[];const gy=1e3/60,yy="loadTime",vy="fullLoadTime",bP={mark(o){performance.mark(o)},frame(o){const n=o;ep!=null&&nf.push(n-ep),ep=n},clearMetrics(){ep=null,nf=[],performance.clearMeasures(yy),performance.clearMeasures(vy);for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(yy,l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure(vy,l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(yy)[0].duration,n=performance.getEntriesByName(vy)[0].duration,s=nf.length,h=1/(nf.reduce((v,_)=>v+_,0)/s/1e3),m=nf.filter(v=>v>gy).reduce((v,_)=>v+(_-gy)/gy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};l.AJAXError=$e,l.ARRAY_TYPE=mc,l.Actor=class{constructor(o,n,s){this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},W(["receive","process"],this),this.invoker=new fP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ve()?o:window}send(o,n,s,h,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const _=te(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:mr(n,_)},_),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[s];const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else ve()||n.mustQueue?(this.tasks[s]=n,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Jn(n.error)):s(null,Jn(n.data)))}else{let s=!1;const h=te(this.globalScope)?void 0:[],m=n.hasCallback?(T,A)=>{s=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:T?mr(T):null,data:mr(A,h)},h)}:T=>{s=!0};let v=null;const _=Jn(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,_,m);else if(this.parent.getWorkerSource){const T=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,T[0],_.source)[T[1]](_,m)}else m(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Zh,l.CanonicalTileID=uy,l.CollisionBoxArray=g,l.CollisionCircleLayoutArray=class extends lc{},l.Color=Ln,l.DEMData=nw,l.DataConstantProperty=qt,l.DictionaryCoder=rw,l.EXTENT=or,l.ErrorEvent=wt,l.EvaluationParameters=ir,l.Event=ft,l.Evented=Nt,l.FeatureIndex=ow,l.FillBucket=Hg,l.FillExtrusionBucket=qg,l.GeoJSONFeature=iw,l.ImageAtlas=jx,l.ImagePosition=Qg,l.KDBush=fy,l.LineBucket=Kg,l.LineStripIndexArray=class extends r{},l.LngLat=al,l.MercatorCoordinate=qd,l.ONE_EM=Kr,l.OverscaledTileID=Eo,l.PerformanceUtils=bP,l.Point=E,l.Pos3dArray=class extends oc{},l.PosArray=Me,l.Properties=Ii,l.Protobuf=Jg,l.QuadTriangleArray=class extends uc{},l.RGBAImage=bo,l.RasterBoundsArray=class extends Dh{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.SegmentVector=kt,l.SymbolBucket=wc,l.Transitionable=Md,l.TriangleIndexArray=_t,l.Uniform1f=Uo,l.Uniform1i=class extends mi{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends mi{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends mi{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=cu,l.UniformColor=ii,l.UniformMatrix4f=class extends mi{constructor(o,n){super(o,n),this.current=Zr}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=tw,l.ValidationError=We,l.ZoomHistory=_o,l.addDynamicAttributes=ry,l.arrayBufferToImage=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=re})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):re},l.arrayBufferToImageBitmap=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.asyncAll=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const m=new Array(o.length);let v=null;o.forEach((_,T)=>{n(_,(A,U)=>{A&&(v=A),m[T]=U,--h==0&&s(v,m)})})},l.bezier=K,l.bindAll=W,l.clamp=G,l.clipLine=lw,l.clone=function(o){var n=new mc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.clone$1=P,l.collisionCircleLayout=UA,l.config=_e,l.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.create=function(){var o=new mc(16);return mc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.createExpression=Kn,l.createFilter=nu,l.createLayout=Mr,l.createStyleLayer=function(o){return o.type==="custom"?new cP(o):new hP[o.type](o)},l.deepEqual=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},l.derefLayers=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=wn(o[s],n[o[s].ref]));return o},l.diffStyles=function(o,n){if(!o)return[{command:Ft.setStyle,args:[n]}];let s=[];try{if(!Ht(o.version,n.version))return[{command:Ft.setStyle,args:[n]}];Ht(o.center,n.center)||s.push({command:Ft.setCenter,args:[n.center]}),Ht(o.zoom,n.zoom)||s.push({command:Ft.setZoom,args:[n.zoom]}),Ht(o.bearing,n.bearing)||s.push({command:Ft.setBearing,args:[n.bearing]}),Ht(o.pitch,n.pitch)||s.push({command:Ft.setPitch,args:[n.pitch]}),Ht(o.sprite,n.sprite)||s.push({command:Ft.setSprite,args:[n.sprite]}),Ht(o.glyphs,n.glyphs)||s.push({command:Ft.setGlyphs,args:[n.glyphs]}),Ht(o.transition,n.transition)||s.push({command:Ft.setTransition,args:[n.transition]}),Ht(o.light,n.light)||s.push({command:Ft.setLight,args:[n.light]});const h={},m=[];(function(_,T,A,U){let X;for(X in T=T||{},_=_||{})Object.prototype.hasOwnProperty.call(_,X)&&(Object.prototype.hasOwnProperty.call(T,X)||Se(X,A,U));for(X in T)Object.prototype.hasOwnProperty.call(T,X)&&(Object.prototype.hasOwnProperty.call(_,X)?Ht(_[X],T[X])||(_[X].type==="geojson"&&T[X].type==="geojson"&&R(_,T,X)?A.push({command:Ft.setGeoJSONSourceData,args:[X,T[X].data]}):F(X,T,A,U)):un(X,T,A))})(o.sources,n.sources,m,h);const v=[];o.layers&&o.layers.forEach(_=>{h[_.source]?s.push({command:Ft.removeLayer,args:[_.id]}):v.push(_)}),s=s.concat(m),function(_,T,A){T=T||[];const U=(_=_||[]).map(Ge),X=T.map(Ge),ee=_.reduce(tt,{}),le=T.reduce(tt,{}),ce=U.slice(),fe=Object.create(null);let ze,Ae,qe,Qe,Ze,nt,at;for(ze=0,Ae=0;ze<U.length;ze++)qe=U[ze],Object.prototype.hasOwnProperty.call(le,qe)?Ae++:(A.push({command:Ft.removeLayer,args:[qe]}),ce.splice(ce.indexOf(qe,Ae),1));for(ze=0,Ae=0;ze<X.length;ze++)qe=X[X.length-1-ze],ce[ce.length-1-ze]!==qe&&(Object.prototype.hasOwnProperty.call(ee,qe)?(A.push({command:Ft.removeLayer,args:[qe]}),ce.splice(ce.lastIndexOf(qe,ce.length-Ae),1)):Ae++,nt=ce[ce.length-ze],A.push({command:Ft.addLayer,args:[le[qe],nt]}),ce.splice(ce.length-ze,0,qe),fe[qe]=!0);for(ze=0;ze<X.length;ze++)if(qe=X[ze],Qe=ee[qe],Ze=le[qe],!fe[qe]&&!Ht(Qe,Ze))if(Ht(Qe.source,Ze.source)&&Ht(Qe["source-layer"],Ze["source-layer"])&&Ht(Qe.type,Ze.type)){for(at in ge(Qe.layout,Ze.layout,A,qe,null,Ft.setLayoutProperty),ge(Qe.paint,Ze.paint,A,qe,null,Ft.setPaintProperty),Ht(Qe.filter,Ze.filter)||A.push({command:Ft.setFilter,args:[qe,Ze.filter]}),Ht(Qe.minzoom,Ze.minzoom)&&Ht(Qe.maxzoom,Ze.maxzoom)||A.push({command:Ft.setLayerZoomRange,args:[qe,Ze.minzoom,Ze.maxzoom]}),Qe)Object.prototype.hasOwnProperty.call(Qe,at)&&at!=="layout"&&at!=="paint"&&at!=="filter"&&at!=="metadata"&&at!=="minzoom"&&at!=="maxzoom"&&(at.indexOf("paint.")===0?ge(Qe[at],Ze[at],A,qe,at.slice(6),Ft.setPaintProperty):Ht(Qe[at],Ze[at])||A.push({command:Ft.setLayerProperty,args:[qe,at,Ze[at]]}));for(at in Ze)Object.prototype.hasOwnProperty.call(Ze,at)&&!Object.prototype.hasOwnProperty.call(Qe,at)&&at!=="layout"&&at!=="paint"&&at!=="filter"&&at!=="metadata"&&at!=="minzoom"&&at!=="maxzoom"&&(at.indexOf("paint.")===0?ge(Qe[at],Ze[at],A,qe,at.slice(6),Ft.setPaintProperty):Ht(Qe[at],Ze[at])||A.push({command:Ft.setLayerProperty,args:[qe,at,Ze[at]]}))}else A.push({command:Ft.removeLayer,args:[qe]}),nt=ce[ce.lastIndexOf(qe)+1],A.push({command:Ft.addLayer,args:[Ze,nt]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:Ft.setStyle,args:[n]}]}return s},l.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.earthRadius=ay,l.ease=pe,l.emitValidationErrors=dn,l.emptyStyle=function(){const o={},n=Je.$version;for(const s in Je.$root){const h=Je.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},l.equals=function(o,n){var s=o[0],h=o[1],m=o[2],v=o[3],_=o[4],T=o[5],A=o[6],U=o[7],X=o[8],ee=o[9],le=o[10],ce=o[11],fe=o[12],ze=o[13],Ae=o[14],qe=o[15],Qe=n[0],Ze=n[1],nt=n[2],at=n[3],dt=n[4],Ut=n[5],Gt=n[6],Ot=n[7],zt=n[8],Pt=n[9],jt=n[10],Rt=n[11],bt=n[12],nn=n[13],Wt=n[14],Sn=n[15];return Math.abs(s-Qe)<=Ai*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-Ze)<=Ai*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(m-nt)<=Ai*Math.max(1,Math.abs(m),Math.abs(nt))&&Math.abs(v-at)<=Ai*Math.max(1,Math.abs(v),Math.abs(at))&&Math.abs(_-dt)<=Ai*Math.max(1,Math.abs(_),Math.abs(dt))&&Math.abs(T-Ut)<=Ai*Math.max(1,Math.abs(T),Math.abs(Ut))&&Math.abs(A-Gt)<=Ai*Math.max(1,Math.abs(A),Math.abs(Gt))&&Math.abs(U-Ot)<=Ai*Math.max(1,Math.abs(U),Math.abs(Ot))&&Math.abs(X-zt)<=Ai*Math.max(1,Math.abs(X),Math.abs(zt))&&Math.abs(ee-Pt)<=Ai*Math.max(1,Math.abs(ee),Math.abs(Pt))&&Math.abs(le-jt)<=Ai*Math.max(1,Math.abs(le),Math.abs(jt))&&Math.abs(ce-Rt)<=Ai*Math.max(1,Math.abs(ce),Math.abs(Rt))&&Math.abs(fe-bt)<=Ai*Math.max(1,Math.abs(fe),Math.abs(bt))&&Math.abs(ze-nn)<=Ai*Math.max(1,Math.abs(ze),Math.abs(nn))&&Math.abs(Ae-Wt)<=Ai*Math.max(1,Math.abs(Ae),Math.abs(Wt))&&Math.abs(qe-Sn)<=Ai*Math.max(1,Math.abs(qe),Math.abs(Sn))},l.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/ga:o.kind==="composite"?ni.number(h/ga,m/ga,s):n},l.evaluateSizeForZoom=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:_}=o,T=m?G(qr.interpolationFactor(m,n,v,_),0,1):0;o.kind==="camera"?h=ni.number(o.minSize,o.maxSize,T):s=T}return{uSizeT:s,uSize:h}},l.evaluateVariableOffset=gw,l.evented=tc,l.exported=we,l.extend=B,l.filterObject=S,l.findLineIntersection=function(o,n,s,h){const m=n.y-o.y,v=n.x-o.x,_=h.y-s.y,T=h.x-s.x,A=_*v-T*m;if(A===0)return null;const U=(T*(o.y-s.y)-_*(o.x-s.x))/A;return new E(o.x+U*v,o.y+U*m)},l.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.getAnchorAlignment=ty,l.getAnchorJustification=hy,l.getArrayBuffer=ot,l.getDefaultExportFromCjs=b,l.getJSON=function(o,n){return Ve(B(o,{type:"json"}),n)},l.getOverlapMode=ny,l.getProtocolAction=Le,l.getRTLTextPluginStatus=Lh,l.getReferrer=ke,l.getVideo=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const m=window.document.createElement("source");ht(o[h])||(s.crossOrigin="Anonymous"),m.src=o[h],s.appendChild(m)}return{cancel:()=>{}}},l.groupByLayout=function(o,n){const s={};for(let m=0;m<o.length;m++){const v=n&&n[o[m].id]||zs(o[m]);n&&(n[o[m].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(o[m])}const h=[];for(const m in s)h.push(s[m]);return h},l.identity=jg,l.interpolate=ni,l.invert=function(o,n){var s=n[0],h=n[1],m=n[2],v=n[3],_=n[4],T=n[5],A=n[6],U=n[7],X=n[8],ee=n[9],le=n[10],ce=n[11],fe=n[12],ze=n[13],Ae=n[14],qe=n[15],Qe=s*T-h*_,Ze=s*A-m*_,nt=s*U-v*_,at=h*A-m*T,dt=h*U-v*T,Ut=m*U-v*A,Gt=X*ze-ee*fe,Ot=X*Ae-le*fe,zt=X*qe-ce*fe,Pt=ee*Ae-le*ze,jt=ee*qe-ce*ze,Rt=le*qe-ce*Ae,bt=Qe*Rt-Ze*jt+nt*Pt+at*zt-dt*Ot+Ut*Gt;return bt?(o[0]=(T*Rt-A*jt+U*Pt)*(bt=1/bt),o[1]=(m*jt-h*Rt-v*Pt)*bt,o[2]=(ze*Ut-Ae*dt+qe*at)*bt,o[3]=(le*dt-ee*Ut-ce*at)*bt,o[4]=(A*zt-_*Rt-U*Ot)*bt,o[5]=(s*Rt-m*zt+v*Ot)*bt,o[6]=(Ae*nt-fe*Ut-qe*Ze)*bt,o[7]=(X*Ut-le*nt+ce*Ze)*bt,o[8]=(_*jt-T*zt+U*Gt)*bt,o[9]=(h*zt-s*jt-v*Gt)*bt,o[10]=(fe*dt-ze*nt+qe*Qe)*bt,o[11]=(ee*nt-X*dt-ce*Qe)*bt,o[12]=(T*Ot-_*Pt-A*Gt)*bt,o[13]=(s*Pt-h*Ot+m*Gt)*bt,o[14]=(ze*Ze-fe*at-Ae*Qe)*bt,o[15]=(X*at-ee*Ze+le*Qe)*bt,o):null},l.isImageBitmap=ae,l.isSafari=te,l.isWorker=ve,l.keysDifference=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},l.lazyLoadRTLTextPlugin=function(){lo.isLoading()||lo.isLoaded()||Lh()!=="deferred"||Pd()},l.makeRequest=Ve,l.mapObject=D,l.mercatorXfromLng=Yx,l.mercatorYfromLat=Jx,l.mercatorZfromAltitude=Qx,l.mul=QI,l.mul$1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},l.multiply=rx,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.operations=Ft,l.ortho=function(o,n,s,h,m,v,_){var T=1/(n-s),A=1/(h-m),U=1/(v-_);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*A,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*U,o[11]=0,o[12]=(n+s)*T,o[13]=(m+h)*A,o[14]=(_+v)*U,o[15]=1,o},l.parseCacheControl=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,v)=>{const _=m||v;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.parseGlyphPbf=function(o){return new Jg(o).readFields(JA,[])},l.pbf=Px,l.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=or/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,s=o.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:s["icon-size"].possiblyEvaluate(new ir(o.bucket.zoom+1),o.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new ir(o.bucket.zoom+1),o.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new ir(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:U}=o.bucket.textSizeData;h.compositeTextSizes=[s["text-size"].possiblyEvaluate(new ir(A),o.canonical),s["text-size"].possiblyEvaluate(new ir(U),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:U}=o.bucket.iconSizeData;h.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new ir(A),o.canonical),s["icon-size"].possiblyEvaluate(new ir(U),o.canonical)]}const m=n.get("text-line-height")*Kr,v=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",_=n.get("text-keep-upright"),T=n.get("text-size");for(const A of o.bucket.features){const U=n.get("text-font").evaluate(A,{},o.canonical).join(","),X=T.evaluate(A,{},o.canonical),ee=h.layoutTextSize.evaluate(A,{},o.canonical),le=h.layoutIconSize.evaluate(A,{},o.canonical),ce={horizontal:{},vertical:void 0},fe=A.text;let ze,Ae=[0,0];if(fe){const Ze=fe.toString(),nt=n.get("text-letter-spacing").evaluate(A,{},o.canonical)*Kr,at=tl(Ze)?nt:0,dt=n.get("text-anchor").evaluate(A,{},o.canonical),Ut=n.get("text-variable-anchor");if(!Ut){const jt=n.get("text-radial-offset").evaluate(A,{},o.canonical);Ae=jt?gw(dt,[jt*Kr,cy]):n.get("text-offset").evaluate(A,{},o.canonical).map(Rt=>Rt*Kr)}let Gt=v?"center":n.get("text-justify").evaluate(A,{},o.canonical);const Ot=n.get("symbol-placement"),zt=Ot==="point"?n.get("text-max-width").evaluate(A,{},o.canonical)*Kr:0,Pt=()=>{o.bucket.allowVerticalPlacement&&ao(Ze)&&(ce.vertical=Zd(fe,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,dt,"left",at,Ae,l.WritingMode.vertical,!0,Ot,ee,X))};if(!v&&Ut){const jt=Gt==="auto"?Ut.map(bt=>hy(bt)):[Gt];let Rt=!1;for(let bt=0;bt<jt.length;bt++){const nn=jt[bt];if(!ce.horizontal[nn])if(Rt)ce.horizontal[nn]=ce.horizontal[0];else{const Wt=Zd(fe,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,"center",nn,at,Ae,l.WritingMode.horizontal,!1,Ot,ee,X);Wt&&(ce.horizontal[nn]=Wt,Rt=Wt.positionedLines.length===1)}}Pt()}else{Gt==="auto"&&(Gt=hy(dt));const jt=Zd(fe,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,dt,Gt,at,Ae,l.WritingMode.horizontal,!1,Ot,ee,X);jt&&(ce.horizontal[Gt]=jt),Pt(),ao(Ze)&&v&&_&&(ce.vertical=Zd(fe,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,dt,Gt,at,Ae,l.WritingMode.vertical,!1,Ot,ee,X))}}let qe=!1;if(A.icon&&A.icon.name){const Ze=o.imageMap[A.icon.name];Ze&&(ze=iP(o.imagePositions[A.icon.name],n.get("icon-offset").evaluate(A,{},o.canonical),n.get("icon-anchor").evaluate(A,{},o.canonical)),qe=!!Ze.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=qe:o.bucket.sdfIcons!==qe&&J("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ze.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Qe=vw(ce.horizontal)||ce.vertical;o.bucket.iconsInText=!!Qe&&Qe.iconsInText,(Qe||ze)&&xP(o.bucket,A,ce,ze,o.imageMap,h,ee,le,Ae,qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.perspective=function(o,n,s,h,m){var v,_=1/Math.tan(n/2);return o[0]=_/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(v=1/(h-m)),o[14]=2*m*h*v):(o[10]=-1,o[14]=-2*h),o},l.pick=function(o,n){const s={};for(let h=0;h<n.length;h++){const m=n[h];m in o&&(s[m]=o[m])}return s},l.plugin=lo,l.pointGeometry=w,l.polygonIntersectsPolygon=Y1,l.potpack=Fx,l.register=St,l.registerForPluginStateChange=function(o){return o({pluginStatus:Ci,pluginURL:js}),tc.on("pluginStateChange",o),o},l.renderColorRamp=lx,l.rotateX=function(o,n,s){var h=Math.sin(s),m=Math.cos(s),v=n[4],_=n[5],T=n[6],A=n[7],U=n[8],X=n[9],ee=n[10],le=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*m+U*h,o[5]=_*m+X*h,o[6]=T*m+ee*h,o[7]=A*m+le*h,o[8]=U*m-v*h,o[9]=X*m-_*h,o[10]=ee*m-T*h,o[11]=le*m-A*h,o},l.rotateZ=function(o,n,s){var h=Math.sin(s),m=Math.cos(s),v=n[0],_=n[1],T=n[2],A=n[3],U=n[4],X=n[5],ee=n[6],le=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*m+U*h,o[1]=_*m+X*h,o[2]=T*m+ee*h,o[3]=A*m+le*h,o[4]=U*m-v*h,o[5]=X*m-_*h,o[6]=ee*m-T*h,o[7]=le*m-A*h,o},l.sameOrigin=ht,l.scale=function(o,n,s){var h=s[0],m=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*m,o[5]=n[5]*m,o[6]=n[6]*m,o[7]=n[7]*m,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.setRTLTextPlugin=function(o,n,s=!1){if(Ci===Mh||Ci===ec||Ci===kh)throw new Error("setRTLTextPlugin cannot be called multiple times.");js=we.resolveURL(o),Ci=Mh,su=n,zh(),s||Pd()},l.sphericalToCartesian=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},l.toEvaluationFeature=fu,l.transformMat4=jd,l.translate=function(o,n,s){var h,m,v,_,T,A,U,X,ee,le,ce,fe,ze=s[0],Ae=s[1],qe=s[2];return n===o?(o[12]=n[0]*ze+n[4]*Ae+n[8]*qe+n[12],o[13]=n[1]*ze+n[5]*Ae+n[9]*qe+n[13],o[14]=n[2]*ze+n[6]*Ae+n[10]*qe+n[14],o[15]=n[3]*ze+n[7]*Ae+n[11]*qe+n[15]):(m=n[1],v=n[2],_=n[3],T=n[4],A=n[5],U=n[6],X=n[7],ee=n[8],le=n[9],ce=n[10],fe=n[11],o[0]=h=n[0],o[1]=m,o[2]=v,o[3]=_,o[4]=T,o[5]=A,o[6]=U,o[7]=X,o[8]=ee,o[9]=le,o[10]=ce,o[11]=fe,o[12]=h*ze+T*Ae+ee*qe+n[12],o[13]=m*ze+A*Ae+le*qe+n[13],o[14]=v*ze+U*Ae+ce*qe+n[14],o[15]=_*ze+X*Ae+fe*qe+n[15]),o},l.triggerPluginCompletionEvent=Ad,l.unicodeBlockLookup=It,l.uniqueId=function(){return oe++},l.v8Spec=Je,l.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=Ct,l.validateStyle=Mt,l.vectorTile=il,l.warnOnce=J,l.wrap=V}),d(["./shared"],function(l){class b{constructor(ne){this.keyCache={},ne&&this.replace(ne)}replace(ne){this._layerConfigs={},this._layers={},this.update(ne,[])}update(ne,ue){for(const Be of ne){this._layerConfigs[Be.id]=Be;const Re=this._layers[Be.id]=l.createStyleLayer(Be);Re._featureFilter=l.createFilter(Re.filter),this.keyCache[Be.id]&&delete this.keyCache[Be.id]}for(const Be of ue)delete this.keyCache[Be],delete this._layerConfigs[Be],delete this._layers[Be];this.familiesBySource={};const Ee=l.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const Be of Ee){const Re=Be.map(ut=>this._layers[ut.id]),De=Re[0];if(De.visibility==="none")continue;const Oe=De.source||"";let Fe=this.familiesBySource[Oe];Fe||(Fe=this.familiesBySource[Oe]={});const Ye=De.sourceLayer||"_geojsonTileLayer";let ct=Fe[Ye];ct||(ct=Fe[Ye]=[]),ct.push(Re)}}}class w{constructor(ne){const ue={},Ee=[];for(const Oe in ne){const Fe=ne[Oe],Ye=ue[Oe]={};for(const ct in Fe){const ut=Fe[+ct];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const pt={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};Ee.push(pt),Ye[ct]={rect:pt,metrics:ut.metrics}}}const{w:Be,h:Re}=l.potpack(Ee),De=new l.AlphaImage({width:Be||1,height:Re||1});for(const Oe in ne){const Fe=ne[Oe];for(const Ye in Fe){const ct=Fe[+Ye];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const ut=ue[Oe][Ye].rect;l.AlphaImage.copy(ct.bitmap,De,{x:0,y:0},{x:ut.x+1,y:ut.y+1},ct.bitmap)}}this.image=De,this.positions=ue}}l.register("GlyphAtlas",w);class C{constructor(ne){this.tileID=new l.OverscaledTileID(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId}parse(ne,ue,Ee,Be,Re){this.status="parsing",this.data=ne,this.collisionBoxArray=new l.CollisionBoxArray;const De=new l.DictionaryCoder(Object.keys(ne.layers).sort()),Oe=new l.FeatureIndex(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const Fe={},Ye={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ee},ct=ue.familiesBySource[this.source];for(const mn in ct){const zn=ne.layers[mn];if(!zn)continue;zn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pn=De.encode(mn),Yn=[];for(let er=0;er<zn.length;er++){const hr=zn.feature(er),Ln=Oe.getId(hr,mn);Yn.push({feature:hr,id:Ln,index:er,sourceLayerIndex:Pn})}for(const er of ct[mn]){const hr=er[0];hr.source!==this.source&&l.warnOnce(`layer.source = ${hr.source} does not equal this.source = ${this.source}`),hr.minzoom&&this.zoom<Math.floor(hr.minzoom)||hr.maxzoom&&this.zoom>=hr.maxzoom||hr.visibility!=="none"&&(E(er,this.zoom,Ee),(Fe[hr.id]=hr.createBucket({index:Oe.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pn,sourceID:this.source})).populate(Yn,Ye,this.tileID.canonical),Oe.bucketLayerIDs.push(er.map(Ln=>Ln.id)))}}let ut,pt,Jt,hn;const Vt=l.mapObject(Ye.glyphDependencies,mn=>Object.keys(mn).map(Number));Object.keys(Vt).length?Be.send("getGlyphs",{uid:this.uid,stacks:Vt,source:this.source,tileID:this.tileID,type:"glyphs"},(mn,zn)=>{ut||(ut=mn,pt=zn,bn.call(this))}):pt={};const Xt=Object.keys(Ye.iconDependencies);Xt.length?Be.send("getImages",{icons:Xt,source:this.source,tileID:this.tileID,type:"icons"},(mn,zn)=>{ut||(ut=mn,Jt=zn,bn.call(this))}):Jt={};const ln=Object.keys(Ye.patternDependencies);function bn(){if(ut)return Re(ut);if(pt&&Jt&&hn){const mn=new w(pt),zn=new l.ImageAtlas(Jt,hn);for(const Pn in Fe){const Yn=Fe[Pn];Yn instanceof l.SymbolBucket?(E(Yn.layers,this.zoom,Ee),l.performSymbolLayout({bucket:Yn,glyphMap:pt,glyphPositions:mn.positions,imageMap:Jt,imagePositions:zn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Yn.hasPattern&&(Yn instanceof l.LineBucket||Yn instanceof l.FillBucket||Yn instanceof l.FillExtrusionBucket)&&(E(Yn.layers,this.zoom,Ee),Yn.addFeatures(Ye,this.tileID.canonical,zn.patternPositions))}this.status="done",Re(null,{buckets:Object.values(Fe).filter(Pn=>!Pn.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mn.image,imageAtlas:zn,glyphMap:this.returnDependencies?pt:null,iconMap:this.returnDependencies?Jt:null,glyphPositions:this.returnDependencies?mn.positions:null})}}ln.length?Be.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"patterns"},(mn,zn)=>{ut||(ut=mn,hn=zn,bn.call(this))}):hn={},bn.call(this)}}function E(Ce,ne,ue){const Ee=new l.EvaluationParameters(ne);for(const Be of Ce)Be.recalculate(Ee,ue)}function z(Ce,ne){const ue=l.getArrayBuffer(Ce.request,(Ee,Be,Re,De)=>{Ee?ne(Ee):Be&&ne(null,{vectorTile:new l.vectorTile.VectorTile(new l.Protobuf(Be)),rawData:Be,cacheControl:Re,expires:De})});return()=>{ue.cancel(),ne()}}class O{constructor(ne,ue,Ee,Be){this.actor=ne,this.layerIndex=ue,this.availableImages=Ee,this.loadVectorData=Be||z,this.loading={},this.loaded={}}loadTile(ne,ue){const Ee=ne.uid;this.loading||(this.loading={});const Be=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new l.RequestPerformance(ne.request),Re=this.loading[Ee]=new C(ne);Re.abort=this.loadVectorData(ne,(De,Oe)=>{if(delete this.loading[Ee],De||!Oe)return Re.status="done",this.loaded[Ee]=Re,ue(De);const Fe=Oe.rawData,Ye={};Oe.expires&&(Ye.expires=Oe.expires),Oe.cacheControl&&(Ye.cacheControl=Oe.cacheControl);const ct={};if(Be){const ut=Be.finish();ut&&(ct.resourceTiming=JSON.parse(JSON.stringify(ut)))}Re.vectorTile=Oe.vectorTile,Re.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor,(ut,pt)=>{if(ut||!pt)return ue(ut);ue(null,l.extend({rawTileData:Fe.slice(0)},pt,Ye,ct))}),this.loaded=this.loaded||{},this.loaded[Ee]=Re})}reloadTile(ne,ue){const Ee=this.loaded,Be=ne.uid,Re=this;if(Ee&&Ee[Be]){const De=Ee[Be];De.showCollisionBoxes=ne.showCollisionBoxes;const Oe=(Fe,Ye)=>{const ct=De.reloadCallback;ct&&(delete De.reloadCallback,De.parse(De.vectorTile,Re.layerIndex,this.availableImages,Re.actor,ct)),ue(Fe,Ye)};De.status==="parsing"?De.reloadCallback=Oe:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Oe):Oe())}}abortTile(ne,ue){const Ee=this.loading,Be=ne.uid;Ee&&Ee[Be]&&Ee[Be].abort&&(Ee[Be].abort(),delete Ee[Be]),ue()}removeTile(ne,ue){const Ee=this.loaded,Be=ne.uid;Ee&&Ee[Be]&&delete Ee[Be],ue()}}class Q{constructor(){this.loaded={}}loadTile(ne,ue){const{uid:Ee,encoding:Be,rawImageData:Re}=ne,De=l.isImageBitmap(Re)?this.getImageData(Re):Re,Oe=new l.DEMData(Ee,De,Be);this.loaded=this.loaded||{},this.loaded[Ee]=Oe,ue(null,Oe)}getImageData(ne){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ne.width,ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ne.width,this.offscreenCanvas.height=ne.height,this.offscreenCanvasContext.drawImage(ne,0,0,ne.width,ne.height);const ue=this.offscreenCanvasContext.getImageData(-1,-1,ne.width+2,ne.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:ue.width,height:ue.height},ue.data)}removeTile(ne){const ue=this.loaded,Ee=ne.uid;ue&&ue[Ee]&&delete ue[Ee]}}function K(Ce,ne){if(Ce.length!==0){pe(Ce[0],ne);for(var ue=1;ue<Ce.length;ue++)pe(Ce[ue],!ne)}}function pe(Ce,ne){for(var ue=0,Ee=0,Be=0,Re=Ce.length,De=Re-1;Be<Re;De=Be++){var Oe=(Ce[Be][0]-Ce[De][0])*(Ce[De][1]+Ce[Be][1]),Fe=ue+Oe;Ee+=Math.abs(ue)>=Math.abs(Oe)?ue-Fe+Oe:Oe-Fe+ue,ue=Fe}ue+Ee>=0!=!!ne&&Ce.reverse()}var G=l.getDefaultExportFromCjs(function Ce(ne,ue){var Ee,Be=ne&&ne.type;if(Be==="FeatureCollection")for(Ee=0;Ee<ne.features.length;Ee++)Ce(ne.features[Ee],ue);else if(Be==="GeometryCollection")for(Ee=0;Ee<ne.geometries.length;Ee++)Ce(ne.geometries[Ee],ue);else if(Be==="Feature")Ce(ne.geometry,ue);else if(Be==="Polygon")K(ne.coordinates,ue);else if(Be==="MultiPolygon")for(Ee=0;Ee<ne.coordinates.length;Ee++)K(ne.coordinates[Ee],ue);return ne});const V=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;var B={exports:{}},oe=l.pointGeometry,W=l.vectorTile.VectorTileFeature,D=S;function S(Ce,ne){this.options=ne||{},this.features=Ce,this.length=Ce.length}function P(Ce,ne){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=ne||4096}S.prototype.feature=function(Ce){return new P(this.features[Ce],this.options.extent)},P.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var ne=0;ne<Ce.length;ne++){for(var ue=Ce[ne],Ee=[],Be=0;Be<ue.length;Be++)Ee.push(new oe(ue[Be][0],ue[Be][1]));this.geometry.push(Ee)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,ne=1/0,ue=-1/0,Ee=1/0,Be=-1/0,Re=0;Re<Ce.length;Re++)for(var De=Ce[Re],Oe=0;Oe<De.length;Oe++){var Fe=De[Oe];ne=Math.min(ne,Fe.x),ue=Math.max(ue,Fe.x),Ee=Math.min(Ee,Fe.y),Be=Math.max(Be,Fe.y)}return[ne,Ee,ue,Be]},P.prototype.toGeoJSON=W.prototype.toGeoJSON;var Z=l.pbf,J=D;function H(Ce){var ne=new Z;return function(ue,Ee){for(var Be in ue.layers)Ee.writeMessage(3,ye,ue.layers[Be])}(Ce,ne),ne.finish()}function ye(Ce,ne){var ue;ne.writeVarintField(15,Ce.version||1),ne.writeStringField(1,Ce.name||""),ne.writeVarintField(5,Ce.extent||4096);var Ee={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<Ce.length;ue++)Ee.feature=Ce.feature(ue),ne.writeMessage(2,ve,Ee);var Be=Ee.keys;for(ue=0;ue<Be.length;ue++)ne.writeStringField(3,Be[ue]);var Re=Ee.values;for(ue=0;ue<Re.length;ue++)ne.writeMessage(4,ie,Re[ue])}function ve(Ce,ne){var ue=Ce.feature;ue.id!==void 0&&ne.writeVarintField(1,ue.id),ne.writeMessage(2,xe,Ce),ne.writeVarintField(3,ue.type),ne.writeMessage(4,re,ue)}function xe(Ce,ne){var ue=Ce.feature,Ee=Ce.keys,Be=Ce.values,Re=Ce.keycache,De=Ce.valuecache;for(var Oe in ue.properties){var Fe=ue.properties[Oe],Ye=Re[Oe];if(Fe!==null){Ye===void 0&&(Ee.push(Oe),Re[Oe]=Ye=Ee.length-1),ne.writeVarint(Ye);var ct=typeof Fe;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(Fe=JSON.stringify(Fe));var ut=ct+":"+Fe,pt=De[ut];pt===void 0&&(Be.push(Fe),De[ut]=pt=Be.length-1),ne.writeVarint(pt)}}}function te(Ce,ne){return(ne<<3)+(7&Ce)}function ae(Ce){return Ce<<1^Ce>>31}function re(Ce,ne){for(var ue=Ce.loadGeometry(),Ee=Ce.type,Be=0,Re=0,De=ue.length,Oe=0;Oe<De;Oe++){var Fe=ue[Oe],Ye=1;Ee===1&&(Ye=Fe.length),ne.writeVarint(te(1,Ye));for(var ct=Ee===3?Fe.length-1:Fe.length,ut=0;ut<ct;ut++){ut===1&&Ee!==1&&ne.writeVarint(te(2,ct-1));var pt=Fe[ut].x-Be,Jt=Fe[ut].y-Re;ne.writeVarint(ae(pt)),ne.writeVarint(ae(Jt)),Be+=pt,Re+=Jt}Ee===3&&ne.writeVarint(te(7,1))}}function ie(Ce,ne){var ue=typeof Ce;ue==="string"?ne.writeStringField(1,Ce):ue==="boolean"?ne.writeBooleanField(7,Ce):ue==="number"&&(Ce%1!=0?ne.writeDoubleField(3,Ce):Ce<0?ne.writeSVarintField(6,Ce):ne.writeVarintField(5,Ce))}B.exports=H,B.exports.fromVectorTileJs=H,B.exports.fromGeojsonVt=function(Ce,ne){ne=ne||{};var ue={};for(var Ee in Ce)ue[Ee]=new J(Ce[Ee].features,ne),ue[Ee].name=Ee,ue[Ee].version=ne.version,ue[Ee].extent=ne.extent;return H({layers:ue})},B.exports.GeoJSONWrapper=J;var me=l.getDefaultExportFromCjs(B.exports);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},_e=Math.fround||($e=new Float32Array(1),Ce=>($e[0]=+Ce,$e[0]));var $e;class ke{constructor(ne){this.options=Object.assign(Object.create(we),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:ue,minZoom:Ee,maxZoom:Be}=this.options;ue&&console.time("total time");const Re=`prepare ${ne.length} points`;ue&&console.time(Re),this.points=ne;const De=[];for(let Fe=0;Fe<ne.length;Fe++){const Ye=ne[Fe];if(!Ye.geometry)continue;const[ct,ut]=Ye.geometry.coordinates,pt=_e(Ve(ct)),Jt=_e(ot(ut));De.push(pt,Jt,1/0,Fe,-1,1),this.options.reduce&&De.push(0)}let Oe=this.trees[Be+1]=this._createTree(De);ue&&console.timeEnd(Re);for(let Fe=Be;Fe>=Ee;Fe--){const Ye=+Date.now();Oe=this.trees[Fe]=this._createTree(this._cluster(Oe,Fe)),ue&&console.log("z%d: %d clusters in %dms",Fe,Oe.numItems,+Date.now()-Ye)}return ue&&console.timeEnd("total time"),this}getClusters(ne,ue){let Ee=((ne[0]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,ne[1]));let Re=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)Ee=-180,Re=180;else if(Ee>Re){const ut=this.getClusters([Ee,Be,180,De],ue),pt=this.getClusters([-180,Be,Re,De],ue);return ut.concat(pt)}const Oe=this.trees[this._limitZoom(ue)],Fe=Oe.range(Ve(Ee),ot(De),Ve(Re),ot(Be)),Ye=Oe.data,ct=[];for(const ut of Fe){const pt=this.stride*ut;ct.push(Ye[pt+5]>1?Le(Ye,pt,this.clusterProps):this.points[Ye[pt+3]])}return ct}getChildren(ne){const ue=this._getOriginId(ne),Ee=this._getOriginZoom(ne),Be="No cluster with the specified id.",Re=this.trees[Ee];if(!Re)throw new Error(Be);const De=Re.data;if(ue*this.stride>=De.length)throw new Error(Be);const Oe=this.options.radius/(this.options.extent*Math.pow(2,Ee-1)),Fe=Re.within(De[ue*this.stride],De[ue*this.stride+1],Oe),Ye=[];for(const ct of Fe){const ut=ct*this.stride;De[ut+4]===ne&&Ye.push(De[ut+5]>1?Le(De,ut,this.clusterProps):this.points[De[ut+3]])}if(Ye.length===0)throw new Error(Be);return Ye}getLeaves(ne,ue,Ee){const Be=[];return this._appendLeaves(Be,ne,ue=ue||10,Ee=Ee||0,0),Be}getTile(ne,ue,Ee){const Be=this.trees[this._limitZoom(ne)],Re=Math.pow(2,ne),{extent:De,radius:Oe}=this.options,Fe=Oe/De,Ye=(Ee-Fe)/Re,ct=(Ee+1+Fe)/Re,ut={features:[]};return this._addTileFeatures(Be.range((ue-Fe)/Re,Ye,(ue+1+Fe)/Re,ct),Be.data,ue,Ee,Re,ut),ue===0&&this._addTileFeatures(Be.range(1-Fe/Re,Ye,1,ct),Be.data,Re,Ee,Re,ut),ue===Re-1&&this._addTileFeatures(Be.range(0,Ye,Fe/Re,ct),Be.data,-1,Ee,Re,ut),ut.features.length?ut:null}getClusterExpansionZoom(ne){let ue=this._getOriginZoom(ne)-1;for(;ue<=this.options.maxZoom;){const Ee=this.getChildren(ne);if(ue++,Ee.length!==1)break;ne=Ee[0].properties.cluster_id}return ue}_appendLeaves(ne,ue,Ee,Be,Re){const De=this.getChildren(ue);for(const Oe of De){const Fe=Oe.properties;if(Fe&&Fe.cluster?Re+Fe.point_count<=Be?Re+=Fe.point_count:Re=this._appendLeaves(ne,Fe.cluster_id,Ee,Be,Re):Re<Be?Re++:ne.push(Oe),ne.length===Ee)break}return Re}_createTree(ne){const ue=new l.KDBush(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ee=0;Ee<ne.length;Ee+=this.stride)ue.add(ne[Ee],ne[Ee+1]);return ue.finish(),ue.data=ne,ue}_addTileFeatures(ne,ue,Ee,Be,Re,De){for(const Oe of ne){const Fe=Oe*this.stride,Ye=ue[Fe+5]>1;let ct,ut,pt;if(Ye)ct=Xe(ue,Fe,this.clusterProps),ut=ue[Fe],pt=ue[Fe+1];else{const Vt=this.points[ue[Fe+3]];ct=Vt.properties;const[Xt,ln]=Vt.geometry.coordinates;ut=Ve(Xt),pt=ot(ln)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(ut*Re-Ee)),Math.round(this.options.extent*(pt*Re-Be))]],tags:ct};let hn;hn=Ye||this.options.generateId?ue[Fe+3]:this.points[ue[Fe+3]].id,hn!==void 0&&(Jt.id=hn),De.features.push(Jt)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,ue){const{radius:Ee,extent:Be,reduce:Re,minPoints:De}=this.options,Oe=Ee/(Be*Math.pow(2,ue)),Fe=ne.data,Ye=[],ct=this.stride;for(let ut=0;ut<Fe.length;ut+=ct){if(Fe[ut+2]<=ue)continue;Fe[ut+2]=ue;const pt=Fe[ut],Jt=Fe[ut+1],hn=ne.within(Fe[ut],Fe[ut+1],Oe),Vt=Fe[ut+5];let Xt=Vt;for(const ln of hn){const bn=ln*ct;Fe[bn+2]>ue&&(Xt+=Fe[bn+5])}if(Xt>Vt&&Xt>=De){let ln,bn=pt*Vt,mn=Jt*Vt,zn=-1;const Pn=((ut/ct|0)<<5)+(ue+1)+this.points.length;for(const Yn of hn){const er=Yn*ct;if(Fe[er+2]<=ue)continue;Fe[er+2]=ue;const hr=Fe[er+5];bn+=Fe[er]*hr,mn+=Fe[er+1]*hr,Fe[er+4]=Pn,Re&&(ln||(ln=this._map(Fe,ut,!0),zn=this.clusterProps.length,this.clusterProps.push(ln)),Re(ln,this._map(Fe,er)))}Fe[ut+4]=Pn,Ye.push(bn/Xt,mn/Xt,1/0,Pn,-1,Xt),Re&&Ye.push(zn)}else{for(let ln=0;ln<ct;ln++)Ye.push(Fe[ut+ln]);if(Xt>1)for(const ln of hn){const bn=ln*ct;if(!(Fe[bn+2]<=ue)){Fe[bn+2]=ue;for(let mn=0;mn<ct;mn++)Ye.push(Fe[bn+mn])}}}}return Ye}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,ue,Ee){if(ne[ue+5]>1){const De=this.clusterProps[ne[ue+6]];return Ee?Object.assign({},De):De}const Be=this.points[ne[ue+3]].properties,Re=this.options.map(Be);return Ee&&Re===Be?Object.assign({},Re):Re}}function Le(Ce,ne,ue){return{type:"Feature",id:Ce[ne+3],properties:Xe(Ce,ne,ue),geometry:{type:"Point",coordinates:[(Ee=Ce[ne],360*(Ee-.5)),ht(Ce[ne+1])]}};var Ee}function Xe(Ce,ne,ue){const Ee=Ce[ne+5],Be=Ee>=1e4?`${Math.round(Ee/1e3)}k`:Ee>=1e3?Math.round(Ee/100)/10+"k":Ee,Re=Ce[ne+6],De=Re===-1?{}:Object.assign({},ue[Re]);return Object.assign(De,{cluster:!0,cluster_id:Ce[ne+3],point_count:Ee,point_count_abbreviated:Be})}function Ve(Ce){return Ce/360+.5}function ot(Ce){const ne=Math.sin(Ce*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function ht(Ce){const ne=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function gt(Ce,ne,ue,Ee){for(var Be,Re=Ee,De=ue-ne>>1,Oe=ue-ne,Fe=Ce[ne],Ye=Ce[ne+1],ct=Ce[ue],ut=Ce[ue+1],pt=ne+3;pt<ue;pt+=3){var Jt=Lt(Ce[pt],Ce[pt+1],Fe,Ye,ct,ut);if(Jt>Re)Be=pt,Re=Jt;else if(Jt===Re){var hn=Math.abs(pt-De);hn<Oe&&(Be=pt,Oe=hn)}}Re>Ee&&(Be-ne>3&&gt(Ce,ne,Be,Ee),Ce[Be+2]=Re,ue-Be>3&&gt(Ce,Be,ue,Ee))}function Lt(Ce,ne,ue,Ee,Be,Re){var De=Be-ue,Oe=Re-Ee;if(De!==0||Oe!==0){var Fe=((Ce-ue)*De+(ne-Ee)*Oe)/(De*De+Oe*Oe);Fe>1?(ue=Be,Ee=Re):Fe>0&&(ue+=De*Fe,Ee+=Oe*Fe)}return(De=Ce-ue)*De+(Oe=ne-Ee)*Oe}function ft(Ce,ne,ue,Ee){var Be={id:Ce===void 0?null:Ce,type:ne,geometry:ue,tags:Ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Re){var De=Re.geometry,Oe=Re.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")wt(Re,De);else if(Oe==="Polygon"||Oe==="MultiLineString")for(var Fe=0;Fe<De.length;Fe++)wt(Re,De[Fe]);else if(Oe==="MultiPolygon")for(Fe=0;Fe<De.length;Fe++)for(var Ye=0;Ye<De[Fe].length;Ye++)wt(Re,De[Fe][Ye])}(Be),Be}function wt(Ce,ne){for(var ue=0;ue<ne.length;ue+=3)Ce.minX=Math.min(Ce.minX,ne[ue]),Ce.minY=Math.min(Ce.minY,ne[ue+1]),Ce.maxX=Math.max(Ce.maxX,ne[ue]),Ce.maxY=Math.max(Ce.maxY,ne[ue+1])}function Nt(Ce,ne,ue,Ee){if(ne.geometry){var Be=ne.geometry.coordinates,Re=ne.geometry.type,De=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),Oe=[],Fe=ne.id;if(ue.promoteId?Fe=ne.properties[ue.promoteId]:ue.generateId&&(Fe=Ee||0),Re==="Point")Je(Be,Oe);else if(Re==="MultiPoint")for(var Ye=0;Ye<Be.length;Ye++)Je(Be[Ye],Oe);else if(Re==="LineString")sn(Be,Oe,De,!1);else if(Re==="MultiLineString"){if(ue.lineMetrics){for(Ye=0;Ye<Be.length;Ye++)sn(Be[Ye],Oe=[],De,!1),Ce.push(ft(Fe,"LineString",Oe,ne.properties));return}wn(Be,Oe,De,!1)}else if(Re==="Polygon")wn(Be,Oe,De,!0);else{if(Re!=="MultiPolygon"){if(Re==="GeometryCollection"){for(Ye=0;Ye<ne.geometry.geometries.length;Ye++)Nt(Ce,{id:Fe,geometry:ne.geometry.geometries[Ye],properties:ne.properties},ue,Ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<Be.length;Ye++){var ct=[];wn(Be[Ye],ct,De,!0),Oe.push(ct)}}Ce.push(ft(Fe,Re,Oe,ne.properties))}}function Je(Ce,ne){ne.push(Ht(Ce[0])),ne.push(Ft(Ce[1])),ne.push(0)}function sn(Ce,ne,ue,Ee){for(var Be,Re,De=0,Oe=0;Oe<Ce.length;Oe++){var Fe=Ht(Ce[Oe][0]),Ye=Ft(Ce[Oe][1]);ne.push(Fe),ne.push(Ye),ne.push(0),Oe>0&&(De+=Ee?(Be*Ye-Fe*Re)/2:Math.sqrt(Math.pow(Fe-Be,2)+Math.pow(Ye-Re,2))),Be=Fe,Re=Ye}var ct=ne.length-3;ne[2]=1,gt(ne,0,ct,ue),ne[ct+2]=1,ne.size=Math.abs(De),ne.start=0,ne.end=ne.size}function wn(Ce,ne,ue,Ee){for(var Be=0;Be<Ce.length;Be++){var Re=[];sn(Ce[Be],Re,ue,Ee),ne.push(Re)}}function Ht(Ce){return Ce/360+.5}function Ft(Ce){var ne=Math.sin(Ce*Math.PI/180),ue=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ue<0?0:ue>1?1:ue}function un(Ce,ne,ue,Ee,Be,Re,De,Oe){if(Ee/=ne,Re>=(ue/=ne)&&De<Ee)return Ce;if(De<ue||Re>=Ee)return null;for(var Fe=[],Ye=0;Ye<Ce.length;Ye++){var ct=Ce[Ye],ut=ct.geometry,pt=ct.type,Jt=Be===0?ct.minX:ct.minY,hn=Be===0?ct.maxX:ct.maxY;if(Jt>=ue&&hn<Ee)Fe.push(ct);else if(!(hn<ue||Jt>=Ee)){var Vt=[];if(pt==="Point"||pt==="MultiPoint")Se(ut,Vt,ue,Ee,Be);else if(pt==="LineString")F(ut,Vt,ue,Ee,Be,!1,Oe.lineMetrics);else if(pt==="MultiLineString")ge(ut,Vt,ue,Ee,Be,!1);else if(pt==="Polygon")ge(ut,Vt,ue,Ee,Be,!0);else if(pt==="MultiPolygon")for(var Xt=0;Xt<ut.length;Xt++){var ln=[];ge(ut[Xt],ln,ue,Ee,Be,!0),ln.length&&Vt.push(ln)}if(Vt.length){if(Oe.lineMetrics&&pt==="LineString"){for(Xt=0;Xt<Vt.length;Xt++)Fe.push(ft(ct.id,pt,Vt[Xt],ct.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(Vt.length===1?(pt="LineString",Vt=Vt[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=Vt.length===3?"Point":"MultiPoint"),Fe.push(ft(ct.id,pt,Vt,ct.tags))}}}return Fe.length?Fe:null}function Se(Ce,ne,ue,Ee,Be){for(var Re=0;Re<Ce.length;Re+=3){var De=Ce[Re+Be];De>=ue&&De<=Ee&&(ne.push(Ce[Re]),ne.push(Ce[Re+1]),ne.push(Ce[Re+2]))}}function F(Ce,ne,ue,Ee,Be,Re,De){for(var Oe,Fe,Ye=R(Ce),ct=Be===0?tt:We,ut=Ce.start,pt=0;pt<Ce.length-3;pt+=3){var Jt=Ce[pt],hn=Ce[pt+1],Vt=Ce[pt+2],Xt=Ce[pt+3],ln=Ce[pt+4],bn=Be===0?Jt:hn,mn=Be===0?Xt:ln,zn=!1;De&&(Oe=Math.sqrt(Math.pow(Jt-Xt,2)+Math.pow(hn-ln,2))),bn<ue?mn>ue&&(Fe=ct(Ye,Jt,hn,Xt,ln,ue),De&&(Ye.start=ut+Oe*Fe)):bn>Ee?mn<Ee&&(Fe=ct(Ye,Jt,hn,Xt,ln,Ee),De&&(Ye.start=ut+Oe*Fe)):Ge(Ye,Jt,hn,Vt),mn<ue&&bn>=ue&&(Fe=ct(Ye,Jt,hn,Xt,ln,ue),zn=!0),mn>Ee&&bn<=Ee&&(Fe=ct(Ye,Jt,hn,Xt,ln,Ee),zn=!0),!Re&&zn&&(De&&(Ye.end=ut+Oe*Fe),ne.push(Ye),Ye=R(Ce)),De&&(ut+=Oe)}var Pn=Ce.length-3;Jt=Ce[Pn],hn=Ce[Pn+1],Vt=Ce[Pn+2],(bn=Be===0?Jt:hn)>=ue&&bn<=Ee&&Ge(Ye,Jt,hn,Vt),Pn=Ye.length-3,Re&&Pn>=3&&(Ye[Pn]!==Ye[0]||Ye[Pn+1]!==Ye[1])&&Ge(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&ne.push(Ye)}function R(Ce){var ne=[];return ne.size=Ce.size,ne.start=Ce.start,ne.end=Ce.end,ne}function ge(Ce,ne,ue,Ee,Be,Re){for(var De=0;De<Ce.length;De++)F(Ce[De],ne,ue,Ee,Be,Re,!1)}function Ge(Ce,ne,ue,Ee){Ce.push(ne),Ce.push(ue),Ce.push(Ee)}function tt(Ce,ne,ue,Ee,Be,Re){var De=(Re-ne)/(Ee-ne);return Ce.push(Re),Ce.push(ue+(Be-ue)*De),Ce.push(1),De}function We(Ce,ne,ue,Ee,Be,Re){var De=(Re-ue)/(Be-ue);return Ce.push(ne+(Ee-ne)*De),Ce.push(Re),Ce.push(1),De}function se(Ce,ne){for(var ue=[],Ee=0;Ee<Ce.length;Ee++){var Be,Re=Ce[Ee],De=Re.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")Be=L(Re.geometry,ne);else if(De==="MultiLineString"||De==="Polygon"){Be=[];for(var Oe=0;Oe<Re.geometry.length;Oe++)Be.push(L(Re.geometry[Oe],ne))}else if(De==="MultiPolygon")for(Be=[],Oe=0;Oe<Re.geometry.length;Oe++){for(var Fe=[],Ye=0;Ye<Re.geometry[Oe].length;Ye++)Fe.push(L(Re.geometry[Oe][Ye],ne));Be.push(Fe)}ue.push(ft(Re.id,De,Be,Re.tags))}return ue}function L(Ce,ne){var ue=[];ue.size=Ce.size,Ce.start!==void 0&&(ue.start=Ce.start,ue.end=Ce.end);for(var Ee=0;Ee<Ce.length;Ee+=3)ue.push(Ce[Ee]+ne,Ce[Ee+1],Ce[Ee+2]);return ue}function j(Ce,ne){if(Ce.transformed)return Ce;var ue,Ee,Be,Re=1<<Ce.z,De=Ce.x,Oe=Ce.y;for(ue=0;ue<Ce.features.length;ue++){var Fe=Ce.features[ue],Ye=Fe.geometry,ct=Fe.type;if(Fe.geometry=[],ct===1)for(Ee=0;Ee<Ye.length;Ee+=2)Fe.geometry.push(be(Ye[Ee],Ye[Ee+1],ne,Re,De,Oe));else for(Ee=0;Ee<Ye.length;Ee++){var ut=[];for(Be=0;Be<Ye[Ee].length;Be+=2)ut.push(be(Ye[Ee][Be],Ye[Ee][Be+1],ne,Re,De,Oe));Fe.geometry.push(ut)}}return Ce.transformed=!0,Ce}function be(Ce,ne,ue,Ee,Be,Re){return[Math.round(ue*(Ce*Ee-Be)),Math.round(ue*(ne*Ee-Re))]}function Te(Ce,ne,ue,Ee,Be){for(var Re=ne===Be.maxZoom?0:Be.tolerance/((1<<ne)*Be.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:Ee,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Oe=0;Oe<Ce.length;Oe++){De.numFeatures++,Ke(De,Ce[Oe],Re,Be);var Fe=Ce[Oe].minX,Ye=Ce[Oe].minY,ct=Ce[Oe].maxX,ut=Ce[Oe].maxY;Fe<De.minX&&(De.minX=Fe),Ye<De.minY&&(De.minY=Ye),ct>De.maxX&&(De.maxX=ct),ut>De.maxY&&(De.maxY=ut)}return De}function Ke(Ce,ne,ue,Ee){var Be=ne.geometry,Re=ne.type,De=[];if(Re==="Point"||Re==="MultiPoint")for(var Oe=0;Oe<Be.length;Oe+=3)De.push(Be[Oe]),De.push(Be[Oe+1]),Ce.numPoints++,Ce.numSimplified++;else if(Re==="LineString")et(De,Be,Ce,ue,!1,!1);else if(Re==="MultiLineString"||Re==="Polygon")for(Oe=0;Oe<Be.length;Oe++)et(De,Be[Oe],Ce,ue,Re==="Polygon",Oe===0);else if(Re==="MultiPolygon")for(var Fe=0;Fe<Be.length;Fe++){var Ye=Be[Fe];for(Oe=0;Oe<Ye.length;Oe++)et(De,Ye[Oe],Ce,ue,!0,Oe===0)}if(De.length){var ct=ne.tags||null;if(Re==="LineString"&&Ee.lineMetrics){for(var ut in ct={},ne.tags)ct[ut]=ne.tags[ut];ct.mapbox_clip_start=Be.start/Be.size,ct.mapbox_clip_end=Be.end/Be.size}var pt={geometry:De,type:Re==="Polygon"||Re==="MultiPolygon"?3:Re==="LineString"||Re==="MultiLineString"?2:1,tags:ct};ne.id!==null&&(pt.id=ne.id),Ce.features.push(pt)}}function et(Ce,ne,ue,Ee,Be,Re){var De=Ee*Ee;if(Ee>0&&ne.size<(Be?De:Ee))ue.numPoints+=ne.length/3;else{for(var Oe=[],Fe=0;Fe<ne.length;Fe+=3)(Ee===0||ne[Fe+2]>De)&&(ue.numSimplified++,Oe.push(ne[Fe]),Oe.push(ne[Fe+1])),ue.numPoints++;Be&&function(Ye,ct){for(var ut=0,pt=0,Jt=Ye.length,hn=Jt-2;pt<Jt;hn=pt,pt+=2)ut+=(Ye[pt]-Ye[hn])*(Ye[pt+1]+Ye[hn+1]);if(ut>0===ct)for(pt=0,Jt=Ye.length;pt<Jt/2;pt+=2){var Vt=Ye[pt],Xt=Ye[pt+1];Ye[pt]=Ye[Jt-2-pt],Ye[pt+1]=Ye[Jt-1-pt],Ye[Jt-2-pt]=Vt,Ye[Jt-1-pt]=Xt}}(Oe,Re),Ce.push(Oe)}}function $t(Ce,ne){var ue=(ne=this.options=function(Be,Re){for(var De in Re)Be[De]=Re[De];return Be}(Object.create(this.options),ne)).debug;if(ue&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ee=function(Be,Re){var De=[];if(Be.type==="FeatureCollection")for(var Oe=0;Oe<Be.features.length;Oe++)Nt(De,Be.features[Oe],Re,Oe);else Nt(De,Be.type==="Feature"?Be:{geometry:Be},Re);return De}(Ce,ne);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=function(Be,Re){var De=Re.buffer/Re.extent,Oe=Be,Fe=un(Be,1,-1-De,De,0,-1,2,Re),Ye=un(Be,1,1-De,2+De,0,-1,2,Re);return(Fe||Ye)&&(Oe=un(Be,1,-De,1+De,0,-1,2,Re)||[],Fe&&(Oe=se(Fe,1).concat(Oe)),Ye&&(Oe=Oe.concat(se(Ye,-1)))),Oe}(Ee,ne),Ee.length&&this.splitTile(Ee,0,0,0),ue&&(Ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vn(Ce,ne,ue){return 32*((1<<Ce)*ue+ne)+Ce}function Tt(Ce,ne){return ne?Ce.properties[ne]:Ce.id}function An(Ce,ne){if(Ce==null)return!0;if(Ce.type==="Feature")return Tt(Ce,ne)!=null;if(Ce.type==="FeatureCollection"){const ue=new Set;for(const Ee of Ce.features){const Be=Tt(Ee,ne);if(Be==null||ue.has(Be))return!1;ue.add(Be)}return!0}return!1}function _n(Ce,ne){const ue=new Map;if(Ce!=null)if(Ce.type==="Feature")ue.set(Tt(Ce,ne),Ce);else for(const Ee of Ce.features)ue.set(Tt(Ee,ne),Ee);return ue}function Qr(Ce,ne){const ue=Ce.tileID.canonical;if(!this._geoJSONIndex)return ne(null,null);const Ee=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!Ee)return ne(null,null);const Be=new class{constructor(De){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=De.length,this._features=De}feature(De){return new class{constructor(Oe){this._feature=Oe,this.extent=l.EXTENT,this.type=Oe.type,this.properties=Oe.tags,"id"in Oe&&!isNaN(Oe.id)&&(this.id=parseInt(Oe.id,10))}loadGeometry(){if(this._feature.type===1){const Oe=[];for(const Fe of this._feature.geometry)Oe.push([new l.Point(Fe[0],Fe[1])]);return Oe}{const Oe=[];for(const Fe of this._feature.geometry){const Ye=[];for(const ct of Fe)Ye.push(new l.Point(ct[0],ct[1]));Oe.push(Ye)}return Oe}}toGeoJSON(Oe,Fe,Ye){return V.call(this,Oe,Fe,Ye)}}(this._features[De])}}(Ee.features);let Re=me(Be);Re.byteOffset===0&&Re.byteLength===Re.buffer.byteLength||(Re=new Uint8Array(Re)),ne(null,{vectorTile:Be,rawData:Re.buffer})}$t.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$t.prototype.splitTile=function(Ce,ne,ue,Ee,Be,Re,De){for(var Oe=[Ce,ne,ue,Ee],Fe=this.options,Ye=Fe.debug;Oe.length;){Ee=Oe.pop(),ue=Oe.pop(),ne=Oe.pop(),Ce=Oe.pop();var ct=1<<ne,ut=vn(ne,ue,Ee),pt=this.tiles[ut];if(!pt&&(Ye>1&&console.time("creation"),pt=this.tiles[ut]=Te(Ce,ne,ue,Ee,Fe),this.tileCoords.push({z:ne,x:ue,y:Ee}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,ue,Ee,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var Jt="z"+ne;this.stats[Jt]=(this.stats[Jt]||0)+1,this.total++}if(pt.source=Ce,Be){if(ne===Fe.maxZoom||ne===Be)continue;var hn=1<<Be-ne;if(ue!==Math.floor(Re/hn)||Ee!==Math.floor(De/hn))continue}else if(ne===Fe.indexMaxZoom||pt.numPoints<=Fe.indexMaxPoints)continue;if(pt.source=null,Ce.length!==0){Ye>1&&console.time("clipping");var Vt,Xt,ln,bn,mn,zn,Pn=.5*Fe.buffer/Fe.extent,Yn=.5-Pn,er=.5+Pn,hr=1+Pn;Vt=Xt=ln=bn=null,mn=un(Ce,ct,ue-Pn,ue+er,0,pt.minX,pt.maxX,Fe),zn=un(Ce,ct,ue+Yn,ue+hr,0,pt.minX,pt.maxX,Fe),Ce=null,mn&&(Vt=un(mn,ct,Ee-Pn,Ee+er,1,pt.minY,pt.maxY,Fe),Xt=un(mn,ct,Ee+Yn,Ee+hr,1,pt.minY,pt.maxY,Fe),mn=null),zn&&(ln=un(zn,ct,Ee-Pn,Ee+er,1,pt.minY,pt.maxY,Fe),bn=un(zn,ct,Ee+Yn,Ee+hr,1,pt.minY,pt.maxY,Fe),zn=null),Ye>1&&console.timeEnd("clipping"),Oe.push(Vt||[],ne+1,2*ue,2*Ee),Oe.push(Xt||[],ne+1,2*ue,2*Ee+1),Oe.push(ln||[],ne+1,2*ue+1,2*Ee),Oe.push(bn||[],ne+1,2*ue+1,2*Ee+1)}}},$t.prototype.getTile=function(Ce,ne,ue){var Ee=this.options,Be=Ee.extent,Re=Ee.debug;if(Ce<0||Ce>24)return null;var De=1<<Ce,Oe=vn(Ce,ne=(ne%De+De)%De,ue);if(this.tiles[Oe])return j(this.tiles[Oe],Be);Re>1&&console.log("drilling down to z%d-%d-%d",Ce,ne,ue);for(var Fe,Ye=Ce,ct=ne,ut=ue;!Fe&&Ye>0;)Ye--,ct=Math.floor(ct/2),ut=Math.floor(ut/2),Fe=this.tiles[vn(Ye,ct,ut)];return Fe&&Fe.source?(Re>1&&console.log("found parent tile z%d-%d-%d",Ye,ct,ut),Re>1&&console.time("drilling down"),this.splitTile(Fe.source,Ye,ct,ut,Ce,ne,ue),Re>1&&console.timeEnd("drilling down"),this.tiles[Oe]?j(this.tiles[Oe],Be):null):null};class di extends O{constructor(ne,ue,Ee,Be){super(ne,ue,Ee,Qr),this._dataUpdateable=new Map,this.loadGeoJSON=(Re,De)=>{const{promoteId:Oe}=Re;if(Re.request)return l.getJSON(Re.request,(Fe,Ye,ct,ut)=>{this._dataUpdateable=An(Ye,Oe)?_n(Ye,Oe):void 0,De(Fe,Ye,ct,ut)});if(typeof Re.data=="string")try{const Fe=JSON.parse(Re.data);this._dataUpdateable=An(Fe,Oe)?_n(Fe,Oe):void 0,De(null,Fe)}catch{De(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`))}else Re.dataDiff?this._dataUpdateable?(function(Fe,Ye,ct){var ut,pt,Jt,hn;if(Ye.removeAll&&Fe.clear(),Ye.remove)for(const Vt of Ye.remove)Fe.delete(Vt);if(Ye.add)for(const Vt of Ye.add){const Xt=Tt(Vt,ct);Xt!=null&&Fe.set(Xt,Vt)}if(Ye.update)for(const Vt of Ye.update){let Xt=Fe.get(Vt.id);if(Xt==null)continue;const ln=!Vt.removeAllProperties&&(((ut=Vt.removeProperties)===null||ut===void 0?void 0:ut.length)>0||((pt=Vt.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0);if((Vt.newGeometry||Vt.removeAllProperties||ln)&&(Xt={...Xt},Fe.set(Vt.id,Xt),ln&&(Xt.properties={...Xt.properties})),Vt.newGeometry&&(Xt.geometry=Vt.newGeometry),Vt.removeAllProperties)Xt.properties={};else if(((Jt=Vt.removeProperties)===null||Jt===void 0?void 0:Jt.length)>0)for(const bn of Vt.removeProperties)Object.prototype.hasOwnProperty.call(Xt.properties,bn)&&delete Xt.properties[bn];if(((hn=Vt.addOrUpdateProperties)===null||hn===void 0?void 0:hn.length)>0)for(const{key:bn,value:mn}of Vt.addOrUpdateProperties)Xt.properties[bn]=mn}}(this._dataUpdateable,Re.dataDiff,Oe),De(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):De(new Error(`Cannot update existing geojson data in ${Re.source}`)):De(new Error(`Input data given to '${Re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},Be&&(this.loadGeoJSON=Be)}loadData(ne,ue){var Ee;(Ee=this._pendingRequest)===null||Ee===void 0||Ee.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Be=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new l.RequestPerformance(ne.request);this._pendingCallback=ue,this._pendingRequest=this.loadGeoJSON(ne,(Re,De)=>{if(delete this._pendingCallback,delete this._pendingRequest,Re||!De)return ue(Re);if(typeof De!="object")return ue(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));{G(De,!0);try{if(ne.filter){const Fe=l.createExpression(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(ct=>`${ct.key}: ${ct.message}`).join(", "));De={type:"FeatureCollection",features:De.features.filter(ct=>Fe.value.evaluate({zoom:0},ct))}}this._geoJSONIndex=ne.cluster?new ke(function({superclusterOptions:Fe,clusterProperties:Ye}){if(!Ye||!Fe)return Fe;const ct={},ut={},pt={accumulated:null,zoom:0},Jt={properties:null},hn=Object.keys(Ye);for(const Vt of hn){const[Xt,ln]=Ye[Vt],bn=l.createExpression(ln),mn=l.createExpression(typeof Xt=="string"?[Xt,["accumulated"],["get",Vt]]:Xt);ct[Vt]=bn.value,ut[Vt]=mn.value}return Fe.map=Vt=>{Jt.properties=Vt;const Xt={};for(const ln of hn)Xt[ln]=ct[ln].evaluate(pt,Jt);return Xt},Fe.reduce=(Vt,Xt)=>{Jt.properties=Xt;for(const ln of hn)pt.accumulated=Vt[ln],Vt[ln]=ut[ln].evaluate(pt,Jt)},Fe}(ne)).load(De.features):function(Fe,Ye){return new $t(Fe,Ye)}(De,ne.geojsonVtOptions)}catch(Fe){return ue(Fe)}this.loaded={};const Oe={};if(Be){const Fe=Be.finish();Fe&&(Oe.resourceTiming={},Oe.resourceTiming[ne.source]=JSON.parse(JSON.stringify(Fe)))}ue(null,Oe)}})}reloadTile(ne,ue){const Ee=this.loaded;return Ee&&Ee[ne.uid]?super.reloadTile(ne,ue):this.loadTile(ne,ue)}removeSource(ne,ue){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ue()}getClusterExpansionZoom(ne,ue){try{ue(null,this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId))}catch(Ee){ue(Ee)}}getClusterChildren(ne,ue){try{ue(null,this._geoJSONIndex.getChildren(ne.clusterId))}catch(Ee){ue(Ee)}}getClusterLeaves(ne,ue){try{ue(null,this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset))}catch(Ee){ue(Ee)}}}class cr{constructor(ne){this.self=ne,this.actor=new l.Actor(ne,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:O,geojson:di},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ue,Ee)=>{if(this.workerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.workerSourceTypes[ue]=Ee},this.self.registerRTLTextPlugin=ue=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=ue.applyArabicShaping,l.plugin.processBidirectionalText=ue.processBidirectionalText,l.plugin.processStyledBidirectionalText=ue.processStyledBidirectionalText}}setReferrer(ne,ue){this.referrer=ue}setImages(ne,ue,Ee){this.availableImages[ne]=ue;for(const Be in this.workerSources[ne]){const Re=this.workerSources[ne][Be];for(const De in Re)Re[De].availableImages=ue}Ee()}setLayers(ne,ue,Ee){this.getLayerIndex(ne).replace(ue),Ee()}updateLayers(ne,ue,Ee){this.getLayerIndex(ne).update(ue.layers,ue.removedIds),Ee()}loadTile(ne,ue,Ee){this.getWorkerSource(ne,ue.type,ue.source).loadTile(ue,Ee)}loadDEMTile(ne,ue,Ee){this.getDEMWorkerSource(ne,ue.source).loadTile(ue,Ee)}reloadTile(ne,ue,Ee){this.getWorkerSource(ne,ue.type,ue.source).reloadTile(ue,Ee)}abortTile(ne,ue,Ee){this.getWorkerSource(ne,ue.type,ue.source).abortTile(ue,Ee)}removeTile(ne,ue,Ee){this.getWorkerSource(ne,ue.type,ue.source).removeTile(ue,Ee)}removeDEMTile(ne,ue){this.getDEMWorkerSource(ne,ue.source).removeTile(ue)}removeSource(ne,ue,Ee){if(!this.workerSources[ne]||!this.workerSources[ne][ue.type]||!this.workerSources[ne][ue.type][ue.source])return;const Be=this.workerSources[ne][ue.type][ue.source];delete this.workerSources[ne][ue.type][ue.source],Be.removeSource!==void 0?Be.removeSource(ue,Ee):Ee()}loadWorkerSource(ne,ue,Ee){try{this.self.importScripts(ue.url),Ee()}catch(Be){Ee(Be.toString())}}syncRTLPluginState(ne,ue,Ee){try{l.plugin.setState(ue);const Be=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Be!=null){this.self.importScripts(Be);const Re=l.plugin.isParsed();Ee(Re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Be}`),Re)}}catch(Be){Ee(Be.toString())}}getAvailableImages(ne){let ue=this.availableImages[ne];return ue||(ue=[]),ue}getLayerIndex(ne){let ue=this.layerIndexes[ne];return ue||(ue=this.layerIndexes[ne]=new b),ue}getWorkerSource(ne,ue,Ee){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ue]||(this.workerSources[ne][ue]={}),!this.workerSources[ne][ue][Ee]){const Be={send:(Re,De,Oe)=>{this.actor.send(Re,De,Oe,ne)}};this.workerSources[ne][ue][Ee]=new this.workerSourceTypes[ue](Be,this.getLayerIndex(ne),this.getAvailableImages(ne))}return this.workerSources[ne][ue][Ee]}getDEMWorkerSource(ne,ue){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ue]||(this.demWorkerSources[ne][ue]=new Q),this.demWorkerSources[ne][ue]}}return l.isWorker()&&(self.worker=new cr(self)),cr}),d(["./shared"],function(l){var b="3.0.0";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const g=window.document.createElement(r);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,g={}){r.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(r,u,f,g={}){r.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new l.Point(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),g=[];for(let x=0;x<u.length;x++)g.push(new l.Point(u[x].clientX-f.left-r.clientLeft,u[x].clientY-f.top-r.clientTop));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const C={supported:!1,testSupport:function(p){!O&&z&&(Q?K(p):E=p)}};let E,z,O=!1,Q=!1;function K(p){const r=p.createTexture();p.bindTexture(p.TEXTURE_2D,r);try{if(p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,z),p.isContextLost())return;C.supported=!0}catch{}p.deleteTexture(r),O=!0}var pe;typeof document<"u"&&(z=document.createElement("img"),z.onload=function(){E&&K(E),E=null,Q=!0},z.onerror=function(){O=!0,E=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(p){let r,u,f,g;p.resetRequestQueue=()=>{r=[],u=0,f=0,g={}},p.addThrottleControl=$=>{const Y=f++;return g[Y]=$,Y},p.removeThrottleControl=$=>{delete g[$],k()},p.getImage=($,Y,q=!0)=>{C.supported&&($.headers||($.headers={}),$.headers.accept="image/webp,*/*");const he={requestParameters:$,supportImageRefresh:q,callback:Y,cancelled:!1,completed:!1,cancel:()=>{he.completed||he.cancelled||(he.cancelled=!0,he.innerRequest&&(he.innerRequest.cancel(),u--),k())}};return r.push(he),k(),he};const x=$=>{const{requestParameters:Y,supportImageRefresh:q,callback:he}=$;return l.extend(Y,{type:"image"}),(q!==!1||l.isWorker()||l.getProtocolAction(Y.url)||Y.headers&&!Object.keys(Y.headers).reduce((Me,Ie)=>Me&&Ie==="accept",!0)?l.makeRequest:M)(Y,(Me,Ie,Pe,Ne)=>{I($,he,Me,Ie,Pe,Ne)})},I=($,Y,q,he,Me,Ie)=>{q?Y(q):he instanceof HTMLImageElement||he instanceof ImageBitmap?Y(null,he):he&&((Pe,Ne)=>{typeof createImageBitmap=="function"?l.arrayBufferToImageBitmap(Pe,Ne):l.arrayBufferToImage(Pe,Ne)})(he,(Pe,Ne)=>{Pe!=null?Y(Pe):Ne!=null&&Y(null,Ne,{cacheControl:Me,expires:Ie})}),$.cancelled||($.completed=!0,u--,k())},k=()=>{const $=(()=>{const Y=Object.keys(g);let q=!1;if(Y.length>0){for(const he of Y)if(q=g[he](),q)break}return q})()?l.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let Y=u;Y<$&&r.length>0;Y++){const q=r.shift();if(q.cancelled){Y--;continue}const he=x(q);u++,q.innerRequest=he}},M=($,Y)=>{const q=new Image,he=$.url;let Me=!1;const Ie=$.credentials;return Ie&&Ie==="include"?q.crossOrigin="use-credentials":(Ie&&Ie==="same-origin"||!l.sameOrigin(he))&&(q.crossOrigin="anonymous"),q.fetchPriority="high",q.onload=()=>{Y(null,q),q.onerror=q.onload=null},q.onerror=()=>{Me||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),q.onerror=q.onload=null},q.src=he,{cancel:()=>{Me=!0,q.src=""}}}}(pe||(pe={})),pe.resetRequestQueue();var G,V=pe;(function(p){p.Glyphs="Glyphs",p.Image="Image",p.Source="Source",p.SpriteImage="SpriteImage",p.SpriteJSON="SpriteJSON",p.Style="Style",p.Tile="Tile",p.Unknown="Unknown"})(G||(G={}));class B{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const g=function(x){const I=x.match(oe);if(!I)throw new Error(`Unable to parse URL "${x}"`);return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}(r);return g.path+=`${u}${f}`,function(x){const I=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${I}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const oe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function W(p){var r=new l.ARRAY_TYPE(3);return r[0]=p[0],r[1]=p[1],r[2]=p[2],r}var D,S=function(p,r,u){return p[0]=r[0]-u[0],p[1]=r[1]-u[1],p[2]=r[2]-u[2],p};D=new l.ARRAY_TYPE(3),l.ARRAY_TYPE!=Float32Array&&(D[0]=0,D[1]=0,D[2]=0);var P=function(p){var r=p[0],u=p[1];return r*r+u*u};function Z(p){const r=[];if(typeof p=="string")r.push({id:"default",url:p});else if(p&&p.length>0){const u=[];for(const{id:f,url:g}of p){const x=`${f}${g}`;u.indexOf(x)===-1&&(u.push(x),r.push({id:f,url:g}))}}return r}function J(p,r,u,f,g){if(f)return void p(f);if(g!==Object.values(r).length||g!==Object.values(u).length)return;const x={};for(const I in r){x[I]={};const k=l.exported.getImageCanvasContext(u[I]),M=r[I];for(const $ in M){const{width:Y,height:q,x:he,y:Me,sdf:Ie,pixelRatio:Pe,stretchX:Ne,stretchY:He,content:it}=M[$];x[I][$]={data:null,pixelRatio:Pe,sdf:Ie,stretchX:Ne,stretchY:He,content:it,spriteData:{width:Y,height:q,x:he,y:Me,context:k}}}}p(null,x)}(function(){var p=new l.ARRAY_TYPE(2);l.ARRAY_TYPE!=Float32Array&&(p[0]=0,p[1]=0)})();class H{constructor(r,u,f,g){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,g)}update(r,u,f){const{width:g,height:x}=r,I=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:k}=this,{gl:M}=k;if(this.useMipmap=!!(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||u.premultiply!==!1)),I)this.size=[g,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,g,x,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:$,y:Y}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?M.texSubImage2D(M.TEXTURE_2D,0,$,Y,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,$,Y,g,x,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,u,f){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ye(p){const{userImage:r}=p;return!!(r&&r.render&&r.render())&&(p.data.replace(new Uint8Array(r.data.buffer)),!0)}class ve extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new l.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const g of r){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,g=f&&f.width||u.data.width,x=f&&f.height||u.data.height;return!(r[0]<0||g<r[0]||r[1]<0||x<r[1]||r[2]<0||g<r[2]||r[3]<0||x<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const g=this.getImage(r);if(f&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const g of r)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const g of r){let x=this.getImage(g);x||(this.fire(new l.Event("styleimagemissing",{id:g})),x=this.getImage(g)),x?f[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:l.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new l.ImagePosition(g,f);this.patterns[r]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const x in this.patterns)r.push(this.patterns[x].bin);const{w:u,h:f}=l.potpack(r),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const x in this.patterns){const{bin:I}=this.patterns[x],k=I.x+1,M=I.y+1,$=this.getImage(x).data,Y=$.width,q=$.height;l.RGBAImage.copy($,g,{x:0,y:0},{x:k,y:M},{width:Y,height:q}),l.RGBAImage.copy($,g,{x:0,y:q-1},{x:k,y:M-1},{width:Y,height:1}),l.RGBAImage.copy($,g,{x:0,y:0},{x:k,y:M+q},{width:Y,height:1}),l.RGBAImage.copy($,g,{x:Y-1,y:0},{x:k-1,y:M},{width:1,height:q}),l.RGBAImage.copy($,g,{x:0,y:0},{x:k+Y,y:M},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||l.warnOnce(`Image with ID: "${u}" was not found`),ye(f)&&this.updateImage(u,f)}}}const xe=1e20;function te(p,r,u,f,g,x,I,k,M){for(let $=r;$<r+f;$++)ae(p,u*x+$,x,g,I,k,M);for(let $=u;$<u+g;$++)ae(p,$*x+r,1,f,I,k,M)}function ae(p,r,u,f,g,x,I){x[0]=0,I[0]=-xe,I[1]=xe,g[0]=p[r];for(let k=1,M=0,$=0;k<f;k++){g[k]=p[r+k*u];const Y=k*k;do{const q=x[M];$=(g[k]-g[q]+Y-q*q)/(k-q)/2}while($<=I[M]&&--M>-1);M++,x[M]=k,I[M]=$,I[M+1]=xe}for(let k=0,M=0;k<f;k++){for(;I[M+1]<k;)M++;const $=x[M],Y=k-$;p[r+k*u]=g[$]+Y*Y}}class re{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const g in r)for(const x of r[g])f.push({stack:g,id:x});l.asyncAll(f,({stack:g,id:x},I)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let M=k.glyphs[x];if(M!==void 0)return void I(null,{stack:g,id:x,glyph:M});if(M=this._tinySDF(k,g,x),M)return k.glyphs[x]=M,void I(null,{stack:g,id:x,glyph:M});const $=Math.floor(x/256);if(256*$>65535)return void I(new Error("glyphs > 65535 not supported"));if(k.ranges[$])return void I(null,{stack:g,id:x,glyph:M});if(!this.url)return void I(new Error("glyphsUrl is not set"));let Y=k.requests[$];Y||(Y=k.requests[$]=[],re.loadGlyphRange(g,$,this.url,this.requestManager,(q,he)=>{if(he){for(const Me in he)this._doesCharSupportLocalGlyph(+Me)||(k.glyphs[+Me]=he[+Me]);k.ranges[$]=!0}for(const Me of Y)Me(q,he);delete k.requests[$]})),Y.push((q,he)=>{q?I(q):he&&I(null,{stack:g,id:x,glyph:he[x]||null})})},(g,x)=>{if(g)u(g);else if(x){const I={};for(const{stack:k,id:M,glyph:$}of x)(I[k]||(I[k]={}))[M]=$&&{id:$.id,bitmap:$.bitmap.clone(),metrics:$.metrics};u(null,I)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](r)||l.unicodeBlockLookup["Hangul Syllables"](r)||l.unicodeBlockLookup.Hiragana(r)||l.unicodeBlockLookup.Katakana(r))}_tinySDF(r,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=r.tinySDF;if(!x){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),x=r.tinySDF=new re.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:k})}const I=x.draw(String.fromCharCode(f));return{id:f,bitmap:new l.AlphaImage({width:I.width||30,height:I.height||30},I.data),metrics:{width:I.glyphWidth||24,height:I.glyphHeight||24,left:I.glyphLeft||0,top:I.glyphTop-27||-8,advance:I.glyphAdvance||24}}}}re.loadGlyphRange=function(p,r,u,f,g){const x=256*r,I=x+255,k=f.transformRequest(u.replace("{fontstack}",p).replace("{range}",`${x}-${I}`),G.Glyphs);l.getArrayBuffer(k,(M,$)=>{if(M)g(M);else if($){const Y={};for(const q of l.parseGlyphPbf($))Y[q.id]=q;g(null,Y)}})},re.TinySDF=class{constructor({fontSize:p=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:I="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const k=this.size=p+4*r,M=this._createCanvas(k),$=this.ctx=M.getContext("2d",{willReadFrequently:!0});$.font=`${I} ${x} ${p}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(p){const r=document.createElement("canvas");return r.width=r.height=p,r}draw(p){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(p),I=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,I+Math.ceil(f)),$=k+2*this.buffer,Y=M+2*this.buffer,q=Math.max($*Y,0),he=new Uint8ClampedArray(q),Me={data:he,width:$,height:Y,glyphWidth:k,glyphHeight:M,glyphTop:I,glyphLeft:0,glyphAdvance:r};if(k===0||M===0)return Me;const{ctx:Ie,buffer:Pe,gridInner:Ne,gridOuter:He}=this;Ie.clearRect(Pe,Pe,k,M),Ie.fillText(p,Pe,Pe+I);const it=Ie.getImageData(Pe,Pe,k,M);He.fill(xe,0,q),Ne.fill(0,0,q);for(let je=0;je<M;je++)for(let rt=0;rt<k;rt++){const lt=it.data[4*(je*k+rt)+3]/255;if(lt===0)continue;const vt=(je+Pe)*$+rt+Pe;if(lt===1)He[vt]=0,Ne[vt]=xe;else{const xt=.5-lt;He[vt]=xt>0?xt*xt:0,Ne[vt]=xt<0?xt*xt:0}}te(He,0,0,$,Y,$,this.f,this.v,this.z),te(Ne,Pe,Pe,k,M,$,this.f,this.v,this.z);for(let je=0;je<q;je++){const rt=Math.sqrt(He[je])-Math.sqrt(Ne[je]);he[je]=Math.round(255-255*(rt/this.radius+this.cutoff))}return Me}};class ie{constructor(){this.specification=l.v8Spec.light.position}possiblyEvaluate(r,u){return l.sphericalToCartesian(r.expression.evaluate(u))}interpolate(r,u,f){return{x:l.interpolate.number(r.x,u.x,f),y:l.interpolate.number(r.y,u.y,f),z:l.interpolate.number(r.z,u.z,f)}}}const me="-transition";let we,_e;class $e extends l.Evented{constructor(r){super(),we=we||new l.Properties({anchor:new l.DataConstantProperty(l.v8Spec.light.anchor),position:new ie,color:new l.DataConstantProperty(l.v8Spec.light.color),intensity:new l.DataConstantProperty(l.v8Spec.light.intensity)}),this._transitionable=new l.Transitionable(we),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.validateLight,r,u))for(const f in r){const g=r[f];f.endsWith(me)?this._transitionable.setTransition(f.slice(0,-me.length),g):this._transitionable.setValue(f,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&l.emitValidationErrors(this,r.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v8Spec})))}}class ke{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const g=[];let x=r.length%2==1?-r[r.length-1]*f:0,I=r[0]*f,k=!0;g.push({left:x,right:I,isDash:k,zeroLength:r[0]===0});let M=r[0];for(let $=1;$<r.length;$++){k=!k;const Y=r[$];x=M*f,M+=Y,I=M*f,g.push({left:x,right:I,isDash:k,zeroLength:Y===0})}return g}addRoundDash(r,u,f){const g=u/2;for(let x=-f;x<=f;x++){const I=this.width*(this.nextRow+f+x);let k=0,M=r[k];for(let $=0;$<this.width;$++){$/M.right>1&&(M=r[++k]);const Y=Math.abs($-M.left),q=Math.abs($-M.right),he=Math.min(Y,q);let Me;const Ie=x/f*(g+1);if(M.isDash){const Pe=g-Math.abs(Ie);Me=Math.sqrt(he*he+Pe*Pe)}else Me=g-Math.sqrt(he*he+Ie*Ie);this.data[I+$]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(r){for(let k=r.length-1;k>=0;--k){const M=r[k],$=r[k+1];M.zeroLength?r.splice(k,1):$&&$.isDash===M.isDash&&($.left=M.left,r.splice(k,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let x=0,I=r[x];for(let k=0;k<this.width;k++){k/I.right>1&&(I=r[++x]);const M=Math.abs(k-I.left),$=Math.abs(k-I.right),Y=Math.min(M,$);this.data[g+k]=Math.max(0,Math.min(255,(I.isDash?Y:-Y)+128))}}addDash(r,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return l.warnOnce("LineAtlas out of space"),null;let x=0;for(let k=0;k<r.length;k++)x+=r[k];if(x!==0){const k=this.width/x,M=this.getDashRanges(r,this.width,k);u?this.addRoundDash(M,k,f):this.addRegularDash(M)}const I={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,I}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Le{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let x=0;x<g.length;x++){const I=new Le.Actor(g[x],u,f);I.name=`Worker ${x}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){l.asyncAll(this.actors,(g,x)=>{g.send(r,u,x)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function Xe(p,r,u){const f=function(g,x){if(g)return u(g);if(x){const I=l.pick(l.extend(x,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);x.vector_layers&&(I.vectorLayers=x.vector_layers,I.vectorLayerIds=I.vectorLayers.map(k=>k.id)),u(null,I)}};return p.url?l.getJSON(r.transformRequest(p.url,G.Source),f):l.exported.frame(()=>f(null,p))}Le.Actor=l.Actor;class Ve{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof l.LngLat?new l.LngLat(r.lng,r.lat):l.LngLat.convert(r),this}setSouthWest(r){return this._sw=r instanceof l.LngLat?new l.LngLat(r.lng,r.lat):l.LngLat.convert(r),this}extend(r){const u=this._sw,f=this._ne;let g,x;if(r instanceof l.LngLat)g=r,x=r;else{if(!(r instanceof Ve))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ve.convert(r)):this.extend(l.LngLat.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(l.LngLat.convert(r)):this;if(g=r._sw,x=r._ne,!g||!x)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new l.LngLat(g.lng,g.lat),this._ne=new l.LngLat(x.lng,x.lat)),this}getCenter(){return new l.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new l.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=l.LngLat.convert(r);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(r){return r instanceof Ve?r:r&&new Ve(r)}static fromLngLat(r,u=0){const f=360*u/40075017,g=f/Math.cos(Math.PI/180*r.lat);return new Ve(new l.LngLat(r.lng-g,r.lat-f),new l.LngLat(r.lng+g,r.lat+f))}}class ot{constructor(r,u,f){this.bounds=Ve.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),g=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),x=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),I=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return r.x>=f&&r.x<x&&r.y>=g&&r.y<I}}class ht extends l.Evented{constructor(r,u,f,g){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Xe(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r?this.fire(new l.ErrorEvent(r)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new ot(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function x(I,k){return delete r.request,r.aborted?u(null):I&&I.status!==404?u(I):(k&&k.resourceTiming&&(r.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&r.setExpiryData(k),r.loadVectorData(k,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",g,x.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,x.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class gt extends l.Evented{constructor(r,u,f,g){super(),this.id=r,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Xe(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.ErrorEvent(r)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new ot(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=V.getImage(this.map._requestManager.transformRequest(f,G.Tile),(g,x,I)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(g)r.state="errored",u(g);else if(x){this.map._refreshExpiredTiles&&I&&r.setExpiryData(I);const k=this.map.painter.context,M=k.gl;r.texture=this.map.painter.getTileTexture(x.width),r.texture?r.texture.update(x,{useMipmap:!0}):(r.texture=new H(k,x,M.RGBA,{useMipmap:!0}),r.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class Lt extends gt{constructor(r,u,f,g){super(r,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(x,I){x&&(r.state="errored",u(x)),I&&(r.dem=I,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.request=V.getImage(this.map._requestManager.transformRequest(f,G.Tile),function(x,I){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(x)r.state="errored",u(x);else if(I){this.map._refreshExpiredTiles&&r.setExpiryData(I),delete I.cacheControl,delete I.expires;const k=l.isImageBitmap(I)&&(_e==null&&(_e=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),_e)?I:l.exported.getImageData(I,1),M={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:k,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",M,g.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,x=u.x===0?r.wrap-1:r.wrap,I=(u.x+1+f)%f,k=u.x+1===f?r.wrap+1:r.wrap,M={};return M[new l.OverscaledTileID(r.overscaledZ,x,u.z,g,u.y).key]={backfilled:!1},M[new l.OverscaledTileID(r.overscaledZ,k,u.z,I,u.y).key]={backfilled:!1},u.y>0&&(M[new l.OverscaledTileID(r.overscaledZ,x,u.z,g,u.y-1).key]={backfilled:!1},M[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},M[new l.OverscaledTileID(r.overscaledZ,k,u.z,I,u.y-1).key]={backfilled:!1}),u.y+1<f&&(M[new l.OverscaledTileID(r.overscaledZ,x,u.z,g,u.y+1).key]={backfilled:!1},M[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},M[new l.OverscaledTileID(r.overscaledZ,k,u.z,I,u.y+1).key]={backfilled:!1}),M}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class ft extends l.Evented{constructor(r,u,f,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const x=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*x,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*x,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*x,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},g),this}_updateWorkerData(r){const u=l.extend({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.exported.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source"}));let x=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(x=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new l.ErrorEvent(f));const I={dataType:"source"};this._collectResourceTiming&&x&&x.length>0&&l.extend(I,{resourceTiming:x}),this.fire(new l.Event("data",{...I,sourceDataType:"metadata"})),this.fire(new l.Event("data",{...I,sourceDataType:"content"}))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,g,(x,I)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):x?u(x):(r.loadVectorData(I,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var wt=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Nt extends l.Evented{constructor(r,u,f,g){super(),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}load(r,u){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=V.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(f,g)=>{this._request=null,this._loaded=!0,f?this.fire(new l.ErrorEvent(f)):g&&(this.image=g,r&&(this.coordinates=r),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(g){let x=1/0,I=1/0,k=-1/0,M=-1/0;for(const he of g)x=Math.min(x,he.x),I=Math.min(I,he.y),k=Math.max(k,he.x),M=Math.max(M,he.y);const $=Math.max(k-x,M-I),Y=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),q=Math.pow(2,Y);return new l.CanonicalTileID(Y,Math.floor((x+k)/2*q),Math.floor((I+M)/2*q))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new H(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Je extends Nt{constructor(r,u,f,g){super(r,u,f,g),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,G.Source).url);l.getVideo(this.urls,(u,f)=>{this._loaded=!0,u?this.fire(new l.ErrorEvent(u)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new H(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class sn extends Nt{constructor(r,u,f,g){super(r,u,f,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(I=>typeof I!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,f=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,wt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(u,this.canvas,f.RGBA,{premultiply:!0});let g=!1;for(const x in this.tiles){const I=this.tiles[x];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,g=!0)}g&&this.fire(new l.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const wn={vector:ht,raster:gt,"raster-dem":Lt,geojson:ft,video:Je,image:Nt,canvas:sn};function Ht(p,r){const u=l.create();return l.translate(u,u,[1,1,0]),l.scale(u,u,[.5*p.width,.5*p.height,1]),l.multiply(u,u,p.calculatePosMatrix(r.toUnwrapped()))}function Ft(p,r,u,f,g,x){const I=function(q,he,Me){if(q)for(const Ie of q){const Pe=he[Ie];if(Pe&&Pe.source===Me&&Pe.type==="fill-extrusion")return!0}else for(const Ie in he){const Pe=he[Ie];if(Pe.source===Me&&Pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,p.id),k=x.maxPitchScaleFactor(),M=p.tilesIn(f,k,I);M.sort(un);const $=[];for(const q of M)$.push({wrappedTileID:q.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(r,u,p._state,q.queryGeometry,q.cameraQueryGeometry,q.scale,g,x,k,Ht(p.transform,q.tileID))});const Y=function(q){const he={},Me={};for(const Ie of q){const Pe=Ie.queryResults,Ne=Ie.wrappedTileID,He=Me[Ne]=Me[Ne]||{};for(const it in Pe){const je=Pe[it],rt=He[it]=He[it]||{},lt=he[it]=he[it]||[];for(const vt of je)rt[vt.featureIndex]||(rt[vt.featureIndex]=!0,lt.push(vt))}}return he}($);for(const q in Y)Y[q].forEach(he=>{const Me=he.feature,Ie=p.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=Ie});return Y}function un(p,r){const u=p.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class Se{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=l.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,x){const I={};if(!x)return I;for(const k of g){const M=k.layerIds.map($=>x.getLayer($)).filter(Boolean);if(M.length!==0){k.layers=M,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map($=>M.filter(Y=>Y.id===$)[0]));for(const $ of M)I[$.id]=k}}return I}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof l.SymbolBucket&&x.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(x))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,g,x,I,k,M,$,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:I,tileSize:this.tileSize,pixelPosMatrix:Y,transform:M,params:k,queryPadding:this.queryPadding*$},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=u&&u.sourceLayer?u.sourceLayer:"",I=g._geojsonTileLayer||g[x];if(!I)return;const k=l.createFilter(u&&u.filter),{z:M,x:$,y:Y}=this.tileID.canonical,q={z:M,x:$,y:Y};for(let he=0;he<I.length;he++){const Me=I.feature(he);if(k.needGeometry){const Ne=l.toEvaluationFeature(Me,!0);if(!k.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ne,this.tileID.canonical))continue}else if(!k.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Me))continue;const Ie=f.getId(Me,x),Pe=new l.GeoJSONFeature(Me,M,$,Y,Ie);Pe.tile=q,r.push(Pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=l.parseCacheControl(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const x=this.expirationTime-u;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const x=this.buckets[g],I=x.layers[0].sourceLayer||"_geojsonTileLayer",k=f[I],M=r[I];if(!k||!M||Object.keys(M).length===0)continue;x.update(M,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=u&&u.style&&u.style.getLayer(g);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.exported.now()+r}setDependencies(r,u){const f={};for(const g of u)f[g]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const g=this.dependencies[f];if(g){for(const x of u)if(g[x])return!0}}return!1}}class F{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:u,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(r,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const g of this.data[f])r(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class R{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const g=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},l.extend(this.stateChanges[r][g],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const x in this.state[r])x!==g&&(this.deletedStates[r][x]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const x in this.state[r][g])f[x]||(this.deletedStates[r][g][x]=null)}else for(const x in f)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][x]===null&&delete this.deletedStates[r][g][x]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const g=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(f in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][f]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),g=l.extend({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const x=this.deletedStates[r][u];if(x===null)return{};for(const I in x)delete g[I]}return g}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const I in this.stateChanges[g])this.state[g][I]||(this.state[g][I]={}),l.extend(this.state[g][I],this.stateChanges[g][I]),x[I]=this.state[g][I];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const I in this.state[g])x[I]={},this.state[g][I]={};else for(const I in this.deletedStates[g]){if(this.deletedStates[g][I]===null)this.state[g][I]={};else for(const k of Object.keys(this.deletedStates[g][I]))delete this.state[g][I][k];x[I]=this.state[g][I]}f[g]=f[g]||{},l.extend(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in r)r[g].setFeatureState(f,u)}}class ge extends l.Evented{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(g,x,I,k){const M=new wn[x.type](g,x,I,k);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],M),M}(r,u,f,this),this._tiles={},this._cache=new F(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new R,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ge).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,g)=>{const x=f.tileID,I=g.tileID,k=new l.Point(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new l.Point(I.canonical.x,I.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-I.overscaledZ||M.y-k.y||M.x-k.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Ge).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new l.ErrorEvent(g,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.exported.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const x=u[g];if(r.neighboringTiles&&r.neighboringTiles[x]){const I=this.getTileByID(x);f(r,I),f(I,r)}}function f(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let I=x.tileID.canonical.x-g.tileID.canonical.x;const k=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),$=x.tileID.key;I===0&&k===0||Math.abs(k)>1||(Math.abs(I)>1&&(Math.abs(I+M)===1?I+=M:Math.abs(I-M)===1&&(I-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,I,k),g.neighboringTiles&&g.neighboringTiles[$]&&(g.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,g){for(const x in this._tiles){let I=this._tiles[x];if(g[x]||!I.hasData()||I.tileID.overscaledZ<=u||I.tileID.overscaledZ>f)continue;let k=I.tileID;for(;I&&I.tileID.overscaledZ>u+1;){const $=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[$.key],I&&I.hasData()&&(k=$)}let M=k;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){g[k.key]=k;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const g=r.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(u*f*5),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new l.OverscaledTileID(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(Y=>this._source.hasTile(Y)))):f=[];const g=r.coveringZoomLevel(this._source),x=Math.max(g-ge.maxOverzooming,this._source.minzoom),I=Math.max(g+ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Y={};for(const q of f)if(q.canonical.z>this._source.minzoom){const he=q.scaledTo(q.canonical.z-1);Y[he.key]=he;const Me=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));Y[Me.key]=Me}f=f.concat(Object.values(Y))}const k=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new l.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,g);if(tt(this._source.type)){const Y={},q={},he=Object.keys(M),Me=l.exported.now();for(const Ie of he){const Pe=M[Ie],Ne=this._tiles[Ie];if(!Ne||Ne.fadeEndTime!==0&&Ne.fadeEndTime<=Me)continue;const He=this.findLoadedParent(Pe,x);He&&(this._addTile(He.tileID),Y[He.tileID.key]=He.tileID),q[Ie]=Pe}this._retainLoadedChildren(q,g,I,M);for(const Ie in Y)M[Ie]||(this._coveredTiles[Ie]=!0,M[Ie]=Y[Ie]);if(u){const Ie={},Pe={};for(const Ne of f)this._tiles[Ne.key].hasData()?Ie[Ne.key]=Ne:Pe[Ne.key]=Ne;for(const Ne in Pe){const He=Pe[Ne].children(this._source.maxzoom);this._tiles[He[0].key]&&this._tiles[He[1].key]&&this._tiles[He[2].key]&&this._tiles[He[3].key]&&(Ie[He[0].key]=M[He[0].key]=He[0],Ie[He[1].key]=M[He[1].key]=He[1],Ie[He[2].key]=M[He[2].key]=He[2],Ie[He[3].key]=M[He[3].key]=He[3],delete Pe[Ne])}for(const Ne in Pe){const He=this.findLoadedParent(Pe[Ne],this._source.minzoom);if(He){Ie[He.tileID.key]=M[He.tileID.key]=He.tileID;for(const it in Ie)Ie[it].isChildOf(He.tileID)&&delete Ie[it]}}for(const Ne in this._tiles)Ie[Ne]||(this._coveredTiles[Ne]=!0)}}for(const Y in M)this._tiles[Y].clearFadeHold();const $=l.keysDifference(this._tiles,M);for(const Y of $){const q=this._tiles[Y];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},g={},x=Math.max(u-ge.maxOverzooming,this._source.minzoom),I=Math.max(u+ge.maxUnderzooming,this._source.minzoom),k={};for(const M of r){const $=this._addTile(M);f[M.key]=M,$.hasData()||u<this._source.maxzoom&&(k[M.key]=M)}this._retainLoadedChildren(k,u,I,f);for(const M of r){let $=this._tiles[M.key];if($.hasData())continue;if(u+1>this._source.maxzoom){const q=M.children(this._source.maxzoom)[0],he=this.getTile(q);if(he&&he.hasData()){f[q.key]=q;continue}}else{const q=M.children(this._source.maxzoom);if(f[q[0].key]&&f[q[1].key]&&f[q[2].key]&&f[q[3].key])continue}let Y=$.wasRequested();for(let q=M.overscaledZ-1;q>=x;--q){const he=M.scaledTo(q);if(g[he.key])break;if(g[he.key]=!0,$=this.getTile(he),!$&&Y&&($=this._addTile(he)),$){const Me=$.hasData();if((Y||Me)&&(f[he.key]=he),Y=$.wasRequested(),Me)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of u)this._loadedParentTiles[x]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new Se(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const g=[],x=this.transform;if(!x)return g;const I=f?x.getCameraQueryGeometry(r):r,k=r.map(Ie=>x.pointCoordinate(Ie,this.terrain)),M=I.map(Ie=>x.pointCoordinate(Ie,this.terrain)),$=this.getIds();let Y=1/0,q=1/0,he=-1/0,Me=-1/0;for(const Ie of M)Y=Math.min(Y,Ie.x),q=Math.min(q,Ie.y),he=Math.max(he,Ie.x),Me=Math.max(Me,Ie.y);for(let Ie=0;Ie<$.length;Ie++){const Pe=this._tiles[$[Ie]];if(Pe.holdingForFade())continue;const Ne=Pe.tileID,He=Math.pow(2,x.zoom-Pe.tileID.overscaledZ),it=u*Pe.queryPadding*l.EXTENT/Pe.tileSize/He,je=[Ne.getTilePoint(new l.MercatorCoordinate(Y,q)),Ne.getTilePoint(new l.MercatorCoordinate(he,Me))];if(je[0].x-it<l.EXTENT&&je[0].y-it<l.EXTENT&&je[1].x+it>=0&&je[1].y+it>=0){const rt=k.map(vt=>Ne.getTilePoint(vt)),lt=M.map(vt=>Ne.getTilePoint(vt));g.push({tile:Pe,tileID:Ne,queryGeometry:rt,cameraQueryGeometry:lt,scale:He})}}return g}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(tt(this._source.type)){const r=l.exported.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const g=this._tiles[r];g&&g.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function Ge(p,r){const u=Math.abs(2*p.wrap)-+(p.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return p.overscaledZ-r.overscaledZ||f-u||r.canonical.y-p.canonical.y||r.canonical.x-p.canonical.x}function tt(p){return p==="raster"||p==="image"||p==="video"}ge.maxOverzooming=10,ge.maxUnderzooming=3;const We="mapboxgl_preloaded_worker_pool";class se{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<se.workerCount;)this.workers.push(new Worker(l.config.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[We]}numActive(){return Object.keys(this.active).length}}const L=Math.floor(l.exported.hardwareConcurrency/2);let j;function be(){return j||(j=new se),j}se.workerCount=l.isSafari(globalThis)?Math.max(Math.min(L,3),1):1;class Te{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.clamp(r,0,1);let u=1,f=this._distances[u];const g=r*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const x=u-1,I=this._distances[x],k=f-I,M=k>0?(g-I)/k:0;return this.points[x].mult(1-M).add(this.points[u].mult(M))}}function Ke(p,r){let u=!0;return p==="always"||p!=="never"&&r!=="never"||(u=!1),u}class et{constructor(r,u,f){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let I=0;I<this.xCellCount*this.yCellCount;I++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,g,x){this._forEachCell(u,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(r,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(r,u,f,g,x,I){this.boxCells[x].push(I)}_insertCircleCell(r,u,f,g,x,I){this.circleCells[x].push(I)}_query(r,u,f,g,x,I,k){if(f<0||r>this.width||g<0||u>this.height)return[];const M=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=g){if(x)return[{key:null,x1:r,y1:u,x2:f,y2:g}];for(let $=0;$<this.boxKeys.length;$++)M.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const Y=this.circles[3*$],q=this.circles[3*$+1],he=this.circles[3*$+2];M.push({key:this.circleKeys[$],x1:Y-he,y1:q-he,x2:Y+he,y2:q+he})}}else this._forEachCell(r,u,f,g,this._queryCell,M,{hitTest:x,overlapMode:I,seenUids:{box:{},circle:{}}},k);return M}query(r,u,f,g){return this._query(r,u,f,g,!1,null)}hitTest(r,u,f,g,x,I){return this._query(r,u,f,g,!0,x,I).length>0}hitTestCircle(r,u,f,g,x){const I=r-f,k=r+f,M=u-f,$=u+f;if(k<0||I>this.width||$<0||M>this.height)return!1;const Y=[];return this._forEachCell(I,M,k,$,this._queryCellCircle,Y,{hitTest:!0,overlapMode:g,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},x),Y.length>0}_queryCell(r,u,f,g,x,I,k,M){const{seenUids:$,hitTest:Y,overlapMode:q}=k,he=this.boxCells[x];if(he!==null){const Ie=this.bboxes;for(const Pe of he)if(!$.box[Pe]){$.box[Pe]=!0;const Ne=4*Pe,He=this.boxKeys[Pe];if(r<=Ie[Ne+2]&&u<=Ie[Ne+3]&&f>=Ie[Ne+0]&&g>=Ie[Ne+1]&&(!M||M(He))&&(!Y||!Ke(q,He.overlapMode))&&(I.push({key:He,x1:Ie[Ne],y1:Ie[Ne+1],x2:Ie[Ne+2],y2:Ie[Ne+3]}),Y))return!0}}const Me=this.circleCells[x];if(Me!==null){const Ie=this.circles;for(const Pe of Me)if(!$.circle[Pe]){$.circle[Pe]=!0;const Ne=3*Pe,He=this.circleKeys[Pe];if(this._circleAndRectCollide(Ie[Ne],Ie[Ne+1],Ie[Ne+2],r,u,f,g)&&(!M||M(He))&&(!Y||!Ke(q,He.overlapMode))){const it=Ie[Ne],je=Ie[Ne+1],rt=Ie[Ne+2];if(I.push({key:He,x1:it-rt,y1:je-rt,x2:it+rt,y2:je+rt}),Y)return!0}}}return!1}_queryCellCircle(r,u,f,g,x,I,k,M){const{circle:$,seenUids:Y,overlapMode:q}=k,he=this.boxCells[x];if(he!==null){const Ie=this.bboxes;for(const Pe of he)if(!Y.box[Pe]){Y.box[Pe]=!0;const Ne=4*Pe,He=this.boxKeys[Pe];if(this._circleAndRectCollide($.x,$.y,$.radius,Ie[Ne+0],Ie[Ne+1],Ie[Ne+2],Ie[Ne+3])&&(!M||M(He))&&!Ke(q,He.overlapMode))return I.push(!0),!0}}const Me=this.circleCells[x];if(Me!==null){const Ie=this.circles;for(const Pe of Me)if(!Y.circle[Pe]){Y.circle[Pe]=!0;const Ne=3*Pe,He=this.circleKeys[Pe];if(this._circlesCollide(Ie[Ne],Ie[Ne+1],Ie[Ne+2],$.x,$.y,$.radius)&&(!M||M(He))&&!Ke(q,He.overlapMode))return I.push(!0),!0}}}_forEachCell(r,u,f,g,x,I,k,M){const $=this._convertToXCellCoord(r),Y=this._convertToYCellCoord(u),q=this._convertToXCellCoord(f),he=this._convertToYCellCoord(g);for(let Me=$;Me<=q;Me++)for(let Ie=Y;Ie<=he;Ie++)if(x.call(this,r,u,f,g,this.xCellCount*Ie+Me,I,k,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,g,x,I){const k=g-r,M=x-u,$=f+I;return $*$>k*k+M*M}_circleAndRectCollide(r,u,f,g,x,I,k){const M=(I-g)/2,$=Math.abs(r-(g+M));if($>M+f)return!1;const Y=(k-x)/2,q=Math.abs(u-(x+Y));if(q>Y+f)return!1;if($<=M||q<=Y)return!0;const he=$-M,Me=q-Y;return he*he+Me*Me<=f*f}}function $t(p,r,u,f,g){const x=l.create();return r?(l.scale(x,x,[1/g,1/g,1]),u||l.rotateZ(x,x,f.angle)):l.multiply(x,f.labelPlaneMatrix,p),x}function vn(p,r,u,f,g){if(r){const x=l.clone(p);return l.scale(x,x,[g,g,1]),u||l.rotateZ(x,x,-f.angle),x}return f.glCoordMatrix}function Tt(p,r,u){let f;u?(f=[p.x,p.y,u(p.x,p.y),1],l.transformMat4(f,f,r)):(f=[p.x,p.y,0,1],Fe(f,f,r));const g=f[3];return{point:new l.Point(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function An(p,r){return .5+p/r*.5}function _n(p,r){const u=p[0]/p[3],f=p[1]/p[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function Qr(p,r,u,f,g,x,I,k,M,$){const Y=f?p.textSizeData:p.iconSizeData,q=l.evaluateSizeForZoom(Y,u.transform.zoom),he=[256/u.width*2+1,256/u.height*2+1],Me=f?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;Me.clear();const Ie=p.lineVertexArray,Pe=f?p.text.placedSymbolArray:p.icon.placedSymbolArray,Ne=u.transform.width/u.transform.height;let He=!1;for(let it=0;it<Pe.length;it++){const je=Pe.get(it);if(je.hidden||je.writingMode===l.WritingMode.vertical&&!He){Oe(je.numGlyphs,Me);continue}let rt;if(He=!1,$?(rt=[je.anchorX,je.anchorY,$(je.anchorX,je.anchorY),1],l.transformMat4(rt,rt,r)):(rt=[je.anchorX,je.anchorY,0,1],Fe(rt,rt,r)),!_n(rt,he)){Oe(je.numGlyphs,Me);continue}const lt=An(u.transform.cameraToCenterDistance,rt[3]),vt=l.evaluateSizeForFeature(Y,q,je),xt=I?vt/lt:vt*lt,Et=new l.Point(je.anchorX,je.anchorY),_t=Tt(Et,g,$).point,Dt={projections:{},offsets:{}},tn=Ce(je,xt,!1,k,r,g,x,p.glyphOffsetArray,Ie,Me,_t,Et,Dt,Ne,M,$);He=tn.useVertical,(tn.notEnoughRoom||He||tn.needsFlipping&&Ce(je,xt,!0,k,r,g,x,p.glyphOffsetArray,Ie,Me,_t,Et,Dt,Ne,M,$).notEnoughRoom)&&Oe(je.numGlyphs,Me)}f?p.text.dynamicLayoutVertexBuffer.updateData(Me):p.icon.dynamicLayoutVertexBuffer.updateData(Me)}function di(p,r,u,f,g,x,I,k,M,$,Y,q,he){const Me=k.glyphStartIndex+k.numGlyphs,Ie=k.lineStartIndex,Pe=k.lineStartIndex+k.lineLength,Ne=r.getoffsetX(k.glyphStartIndex),He=r.getoffsetX(Me-1),it=Re(p*Ne,u,f,g,x,I,k.segment,Ie,Pe,M,$,Y,q,he);if(!it)return null;const je=Re(p*He,u,f,g,x,I,k.segment,Ie,Pe,M,$,Y,q,he);return je?{first:it,last:je}:null}function cr(p,r,u,f){return p===l.WritingMode.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(p===l.WritingMode.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function Ce(p,r,u,f,g,x,I,k,M,$,Y,q,he,Me,Ie,Pe){const Ne=r/24,He=p.lineOffsetX*Ne,it=p.lineOffsetY*Ne;let je;if(p.numGlyphs>1){const rt=p.glyphStartIndex+p.numGlyphs,lt=p.lineStartIndex,vt=p.lineStartIndex+p.lineLength,xt=di(Ne,k,He,it,u,Y,q,p,M,x,he,Ie,Pe);if(!xt)return{notEnoughRoom:!0};const Et=Tt(xt.first.point,I,Pe).point,_t=Tt(xt.last.point,I,Pe).point;if(f&&!u){const Dt=cr(p.writingMode,Et,_t,Me);if(Dt)return Dt}je=[xt.first];for(let Dt=p.glyphStartIndex+1;Dt<rt-1;Dt++)je.push(Re(Ne*k.getoffsetX(Dt),He,it,u,Y,q,p.segment,lt,vt,M,x,he,Ie,Pe));je.push(xt.last)}else{if(f&&!u){const lt=Tt(q,g,Pe).point,vt=p.lineStartIndex+p.segment+1,xt=new l.Point(M.getx(vt),M.gety(vt)),Et=Tt(xt,g,Pe),_t=Et.signedDistanceFromCamera>0?Et.point:ne(q,xt,lt,1,g,Pe),Dt=cr(p.writingMode,lt,_t,Me);if(Dt)return Dt}const rt=Re(Ne*k.getoffsetX(p.glyphStartIndex),He,it,u,Y,q,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,M,x,he,Ie,Pe);if(!rt)return{notEnoughRoom:!0};je=[rt]}for(const rt of je)l.addDynamicAttributes($,rt.point,rt.angle);return{}}function ne(p,r,u,f,g,x){const I=Tt(p.add(p.sub(r)._unit()),g,x).point,k=u.sub(I);return u.add(k._mult(f/k.mag()))}function ue(p,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:I,getElevation:k,previousVertex:M,direction:$,absOffsetX:Y}=r;if(u.projections[p])return u.projections[p];const q=new l.Point(f.getx(p),f.gety(p)),he=Tt(q,g,k);if(he.signedDistanceFromCamera>0)return u.projections[p]=he.point,he.point;const Me=p-$;return ne(I===0?x:new l.Point(f.getx(Me),f.gety(Me)),q,M,Y-I+1,g,k)}function Ee(p,r,u){return p._unit()._perp()._mult(r*u)}function Be(p,r,u,f,g,x,I,k){const{projectionCache:M,direction:$}=k;if(M.offsets[p])return M.offsets[p];const Y=u.add(r);if(p+$<f||p+$>=g)return M.offsets[p]=Y,Y;const q=ue(p+$,k),he=Ee(q.sub(u),I,$),Me=u.add(he),Ie=q.add(he);return M.offsets[p]=l.findLineIntersection(x,Y,Me,Ie)||Y,M.offsets[p]}function Re(p,r,u,f,g,x,I,k,M,$,Y,q,he,Me){const Ie=f?p-r:p+r;let Pe=Ie>0?1:-1,Ne=0;f&&(Pe*=-1,Ne=Math.PI),Pe<0&&(Ne+=Math.PI);let He,it,je=Pe>0?k+I:k+I+1,rt=g,lt=g,vt=0,xt=0;const Et=Math.abs(Ie),_t=[];let Dt;for(;vt+xt<=Et;){if(je+=Pe,je<k||je>=M)return null;vt+=xt,lt=rt,it=He;const kt={projectionCache:q,lineVertexArray:$,labelPlaneMatrix:Y,tileAnchorPoint:x,distanceFromAnchor:vt,getElevation:Me,previousVertex:lt,direction:Pe,absOffsetX:Et};if(rt=ue(je,kt),u===0)_t.push(lt),Dt=rt.sub(lt);else{let an;const Bt=rt.sub(lt);an=Bt.mag()===0?Ee(ue(je+Pe,kt).sub(rt),u,Pe):Ee(Bt,u,Pe),it||(it=lt.add(an)),He=Be(je,an,rt,k,M,it,u,kt),_t.push(it),Dt=He.sub(it)}xt=Dt.mag()}const tn=Dt._mult((Et-vt)/xt)._add(it||lt),gn=Ne+Math.atan2(rt.y-lt.y,rt.x-lt.x);return _t.push(tn),{point:tn,angle:he?gn:0,path:_t}}const De=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Oe(p,r){for(let u=0;u<p;u++){const f=r.length;r.resize(f+4),r.float32.set(De,3*f)}}function Fe(p,r,u){const f=r[0],g=r[1];return p[0]=u[0]*f+u[4]*g+u[12],p[1]=u[1]*f+u[5]*g+u[13],p[3]=u[3]*f+u[7]*g+u[15],p}const Ye=100;class ct{constructor(r,u=new et(r.width+200,r.height+200,25),f=new et(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ye,this.screenBottomBoundary=r.height+Ye,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,g,x,I){const k=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,I),M=f*k.perspectiveRatio,$=r.x1*M+k.point.x,Y=r.y1*M+k.point.y,q=r.x2*M+k.point.x,he=r.y2*M+k.point.y;return!this.isInsideGrid($,Y,q,he)||u!=="always"&&this.grid.hitTest($,Y,q,he,u,x)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[$,Y,q,he],offscreen:this.isOffscreen($,Y,q,he)}}placeCollisionCircles(r,u,f,g,x,I,k,M,$,Y,q,he,Me,Ie){const Pe=[],Ne=new l.Point(u.anchorX,u.anchorY),He=Tt(Ne,I,Ie),it=An(this.transform.cameraToCenterDistance,He.signedDistanceFromCamera),je=(Y?x/it:x*it)/l.ONE_EM,rt=Tt(Ne,k,Ie).point,lt=di(je,g,u.lineOffsetX*je,u.lineOffsetY*je,!1,rt,Ne,u,f,k,{projections:{},offsets:{}},!1,Ie);let vt=!1,xt=!1,Et=!0;if(lt){const _t=.5*he*it+Me,Dt=new l.Point(-100,-100),tn=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),gn=new Te,kt=lt.first,an=lt.last;let Bt=[];for(let Fn=kt.path.length-1;Fn>=1;Fn--)Bt.push(kt.path[Fn]);for(let Fn=1;Fn<an.path.length;Fn++)Bt.push(an.path[Fn]);const On=2.5*_t;if(M){const Fn=Bt.map(yn=>Tt(yn,M,Ie));Bt=Fn.some(yn=>yn.signedDistanceFromCamera<=0)?[]:Fn.map(yn=>yn.point)}let xr=[];if(Bt.length>0){const Fn=Bt[0].clone(),yn=Bt[0].clone();for(let yr=1;yr<Bt.length;yr++)Fn.x=Math.min(Fn.x,Bt[yr].x),Fn.y=Math.min(Fn.y,Bt[yr].y),yn.x=Math.max(yn.x,Bt[yr].x),yn.y=Math.max(yn.y,Bt[yr].y);xr=Fn.x>=Dt.x&&yn.x<=tn.x&&Fn.y>=Dt.y&&yn.y<=tn.y?[Bt]:yn.x<Dt.x||Fn.x>tn.x||yn.y<Dt.y||Fn.y>tn.y?[]:l.clipLine([Bt],Dt.x,Dt.y,tn.x,tn.y)}for(const Fn of xr){gn.reset(Fn,.25*_t);let yn=0;yn=gn.length<=.5*_t?1:Math.ceil(gn.paddedLength/On)+1;for(let yr=0;yr<yn;yr++){const pi=yr/Math.max(yn-1,1),wr=gn.lerp(pi),Gr=wr.x+Ye,Bi=wr.y+Ye;Pe.push(Gr,Bi,_t,0);const xo=Gr-_t,wo=Bi-_t,mi=Gr+_t,Uo=Bi+_t;if(Et=Et&&this.isOffscreen(xo,wo,mi,Uo),xt=xt||this.isInsideGrid(xo,wo,mi,Uo),r!=="always"&&this.grid.hitTestCircle(Gr,Bi,_t,r,q)&&(vt=!0,!$))return{circles:[],offscreen:!1,collisionDetected:vt}}}}return{circles:!$&&vt||!xt||it<this.perspectiveRatioCutoff?[]:Pe,offscreen:Et,collisionDetected:vt}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,x=-1/0,I=-1/0;for(const Y of r){const q=new l.Point(Y.x+Ye,Y.y+Ye);f=Math.min(f,q.x),g=Math.min(g,q.y),x=Math.max(x,q.x),I=Math.max(I,q.y),u.push(q)}const k=this.grid.query(f,g,x,I).concat(this.ignoredGrid.query(f,g,x,I)),M={},$={};for(const Y of k){const q=Y.key;if(M[q.bucketInstanceId]===void 0&&(M[q.bucketInstanceId]={}),M[q.bucketInstanceId][q.featureIndex])continue;const he=[new l.Point(Y.x1,Y.y1),new l.Point(Y.x2,Y.y1),new l.Point(Y.x2,Y.y2),new l.Point(Y.x1,Y.y2)];l.polygonIntersectsPolygon(u,he)&&(M[q.bucketInstanceId][q.featureIndex]=!0,$[q.bucketInstanceId]===void 0&&($[q.bucketInstanceId]=[]),$[q.bucketInstanceId].push(q.featureIndex))}return $}insertCollisionBox(r,u,f,g,x,I){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:I,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,g,x,I){const k=f?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:x,collisionGroupID:I,overlapMode:u};for(let $=0;$<r.length;$+=4)k.insertCircle(M,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,u,f,g){let x;return g?(x=[u,f,g(u,f),1],l.transformMat4(x,x,r)):(x=[u,f,0,1],Fe(x,x,r)),{point:new l.Point((x[0]/x[3]+1)/2*this.transform.width+Ye,(-x[1]/x[3]+1)/2*this.transform.height+Ye),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(r,u,f,g){return f<Ye||r>=this.screenRightBoundary||g<Ye||u>this.screenBottomBoundary}isInsideGrid(r,u,f,g){return f>=0&&r<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.identity([]);return l.translate(r,r,[-100,-100,0]),r}}function ut(p,r,u){return r*(l.EXTENT/(p.tileSize*Math.pow(2,u-p.tileID.overscaledZ)))}class pt{constructor(r,u,f,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Jt{constructor(r,u,f,g,x){this.text=new pt(r?r.text:null,u,f,x),this.icon=new pt(r?r.icon:null,u,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hn{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class Vt{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class Xt{constructor(r,u,f,g,x){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}}class ln{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function bn(p,r,u,f,g){const{horizontalAlign:x,verticalAlign:I}=l.getAnchorAlignment(p),k=-(x-.5)*r,M=-(I-.5)*u,$=l.evaluateVariableOffset(p,f);return new l.Point(k+$[0]*g,M+$[1]*g)}function mn(p,r,u,f,g,x){const{x1:I,x2:k,y1:M,y2:$,anchorPointX:Y,anchorPointY:q}=p,he=new l.Point(r,u);return f&&he._rotate(g?x:-x),{x1:I+he.x,y1:M+he.y,x2:k+he.x,y2:$+he.y,anchorPointX:Y,anchorPointY:q}}class zn{constructor(r,u,f,g,x){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new ct(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ln(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,g){const x=f.getBucket(u),I=f.latestFeatureIndex;if(!x||!I||u.id!==x.layerIds[0])return;const k=f.collisionBoxArray,M=x.layers[0].layout,$=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Y=f.tileSize/l.EXTENT,q=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),he=M.get("text-pitch-alignment")==="map",Me=M.get("text-rotation-alignment")==="map",Ie=ut(f,1,this.transform.zoom),Pe=$t(q,he,Me,this.transform,Ie);let Ne=null;if(he){const it=vn(q,he,Me,this.transform,Ie);Ne=l.multiply([],this.transform.labelPlaneMatrix,it)}this.retainedQueryData[x.bucketInstanceId]=new Xt(x.bucketInstanceId,I,x.sourceLayerIndex,x.index,f.tileID);const He={bucket:x,layout:M,posMatrix:q,textLabelPlaneMatrix:Pe,labelToScreenMatrix:Ne,scale:$,textPixelRatio:Y,holdingForFade:f.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const it of x.sortKeyRanges){const{sortKey:je,symbolInstanceStart:rt,symbolInstanceEnd:lt}=it;r.push({sortKey:je,symbolInstanceStart:rt,symbolInstanceEnd:lt,parameters:He})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:He})}attemptAnchorPlacement(r,u,f,g,x,I,k,M,$,Y,q,he,Me,Ie,Pe,Ne){const He=[he.textOffset0,he.textOffset1],it=bn(r,f,g,He,x),je=this.collisionIndex.placeCollisionBox(mn(u,it.x,it.y,I,k,this.transform.angle),q,M,$,Y.predicate,Ne);if((!Pe||this.collisionIndex.placeCollisionBox(mn(Pe,it.x,it.y,I,k,this.transform.angle),q,M,$,Y.predicate,Ne).box.length!==0)&&je.box.length>0){let rt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(rt=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:He,width:f,height:g,anchor:r,textBoxScale:x,prevAnchor:rt},this.markUsedJustification(Me,r,he,Ie),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,Ie,he),this.placedOrientations[he.crossTileID]=Ie),{shift:it,placedGlyphBoxes:je}}}placeLayerBucketPart(r,u,f){const{bucket:g,layout:x,posMatrix:I,textLabelPlaneMatrix:k,labelToScreenMatrix:M,textPixelRatio:$,holdingForFade:Y,collisionBoxArray:q,partiallyEvaluatedTextSize:he,collisionGroup:Me}=r.parameters,Ie=x.get("text-optional"),Pe=x.get("icon-optional"),Ne=l.getOverlapMode(x,"text-overlap","text-allow-overlap"),He=Ne==="always",it=l.getOverlapMode(x,"icon-overlap","icon-allow-overlap"),je=it==="always",rt=x.get("text-rotation-alignment")==="map",lt=x.get("text-pitch-alignment")==="map",vt=x.get("icon-text-fit")!=="none",xt=x.get("symbol-z-order")==="viewport-y",Et=He&&(je||!g.hasIconData()||Pe),_t=je&&(He||!g.hasTextData()||Ie);!g.collisionArrays&&q&&g.deserializeCollisionBoxes(q);const Dt=this.retainedQueryData[g.bucketInstanceId].tileID,tn=this.terrain?(kt,an)=>this.terrain.getElevation(Dt,kt,an):null,gn=(kt,an)=>{if(u[kt.crossTileID])return;if(Y)return void(this.placements[kt.crossTileID]=new hn(!1,!1,!1));let Bt=!1,On=!1,xr=!0,Fn=null,yn={box:null,offscreen:null},yr={box:null,offscreen:null},pi=null,wr=null,Gr=null,Bi=0,xo=0,wo=0;an.textFeatureIndex?Bi=an.textFeatureIndex:kt.useRuntimeCollisionCircles&&(Bi=kt.featureIndex),an.verticalTextFeatureIndex&&(xo=an.verticalTextFeatureIndex);const mi=an.textBox;if(mi){const ii=Un=>{let Dr=l.WritingMode.horizontal;if(g.allowVerticalPlacement&&!Un&&this.prevPlacement){const Wr=this.prevPlacement.placedOrientations[kt.crossTileID];Wr&&(this.placedOrientations[kt.crossTileID]=Wr,Dr=Wr,this.markUsedOrientation(g,Dr,kt))}return Dr},Zr=(Un,Dr)=>{if(g.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&an.verticalTextBox){for(const Wr of g.writingModes)if(Wr===l.WritingMode.vertical?(yn=Dr(),yr=yn):yn=Un(),yn&&yn.box&&yn.box.length)break}else yn=Un()};if(x.get("text-variable-anchor")){let Un=x.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[kt.crossTileID]){const Vn=this.prevPlacement.variableOffsets[kt.crossTileID];Un.indexOf(Vn.anchor)>0&&(Un=Un.filter(Br=>Br!==Vn.anchor),Un.unshift(Vn.anchor))}const Dr=(Vn,Br,Ni)=>{const dc=Vn.x2-Vn.x1,ls=Vn.y2-Vn.y1,Lg=kt.textBoxScale,Ld=vt&&it==="never"?Br:null;let or={box:[],offscreen:!1};const $h=Ne!=="never"?2*Un.length:Un.length;for(let hu=0;hu<$h;++hu){const us=this.attemptAnchorPlacement(Un[hu%Un.length],Vn,dc,ls,Lg,rt,lt,$,I,Me,hu>=Un.length?Ne:"never",kt,g,Ni,Ld,tn);if(us&&(or=us.placedGlyphBoxes,or&&or.box&&or.box.length)){Bt=!0,Fn=us.shift;break}}return or};Zr(()=>Dr(mi,an.iconBox,l.WritingMode.horizontal),()=>{const Vn=an.verticalTextBox;return g.allowVerticalPlacement&&!(yn&&yn.box&&yn.box.length)&&kt.numVerticalGlyphVertices>0&&Vn?Dr(Vn,an.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),yn&&(Bt=yn.box,xr=yn.offscreen);const Wr=ii(yn&&yn.box);if(!Bt&&this.prevPlacement){const Vn=this.prevPlacement.variableOffsets[kt.crossTileID];Vn&&(this.variableOffsets[kt.crossTileID]=Vn,this.markUsedJustification(g,Vn.anchor,kt,Wr))}}else{const Un=(Dr,Wr)=>{const Vn=this.collisionIndex.placeCollisionBox(Dr,Ne,$,I,Me.predicate,tn);return Vn&&Vn.box&&Vn.box.length&&(this.markUsedOrientation(g,Wr,kt),this.placedOrientations[kt.crossTileID]=Wr),Vn};Zr(()=>Un(mi,l.WritingMode.horizontal),()=>{const Dr=an.verticalTextBox;return g.allowVerticalPlacement&&kt.numVerticalGlyphVertices>0&&Dr?Un(Dr,l.WritingMode.vertical):{box:null,offscreen:null}}),ii(yn&&yn.box&&yn.box.length)}}if(pi=yn,Bt=pi&&pi.box&&pi.box.length>0,xr=pi&&pi.offscreen,kt.useRuntimeCollisionCircles){const ii=g.text.placedSymbolArray.get(kt.centerJustifiedTextSymbolIndex),Zr=l.evaluateSizeForFeature(g.textSizeData,he,ii),Un=x.get("text-padding");wr=this.collisionIndex.placeCollisionCircles(Ne,ii,g.lineVertexArray,g.glyphOffsetArray,Zr,I,k,M,f,lt,Me.predicate,kt.collisionCircleDiameter,Un,tn),wr.circles.length&&wr.collisionDetected&&!f&&l.warnOnce("Collisions detected, but collision boxes are not shown"),Bt=He||wr.circles.length>0&&!wr.collisionDetected,xr=xr&&wr.offscreen}if(an.iconFeatureIndex&&(wo=an.iconFeatureIndex),an.iconBox){const ii=Zr=>{const Un=vt&&Fn?mn(Zr,Fn.x,Fn.y,rt,lt,this.transform.angle):Zr;return this.collisionIndex.placeCollisionBox(Un,it,$,I,Me.predicate,tn)};yr&&yr.box&&yr.box.length&&an.verticalIconBox?(Gr=ii(an.verticalIconBox),On=Gr.box.length>0):(Gr=ii(an.iconBox),On=Gr.box.length>0),xr=xr&&Gr.offscreen}const Uo=Ie||kt.numHorizontalGlyphVertices===0&&kt.numVerticalGlyphVertices===0,cu=Pe||kt.numIconVertices===0;if(Uo||cu?cu?Uo||(On=On&&Bt):Bt=On&&Bt:On=Bt=On&&Bt,Bt&&pi&&pi.box&&this.collisionIndex.insertCollisionBox(pi.box,Ne,x.get("text-ignore-placement"),g.bucketInstanceId,yr&&yr.box&&xo?xo:Bi,Me.ID),On&&Gr&&this.collisionIndex.insertCollisionBox(Gr.box,it,x.get("icon-ignore-placement"),g.bucketInstanceId,wo,Me.ID),wr&&(Bt&&this.collisionIndex.insertCollisionCircles(wr.circles,Ne,x.get("text-ignore-placement"),g.bucketInstanceId,Bi,Me.ID),f)){const ii=g.bucketInstanceId;let Zr=this.collisionCircleArrays[ii];Zr===void 0&&(Zr=this.collisionCircleArrays[ii]=new Vt);for(let Un=0;Un<wr.circles.length;Un+=4)Zr.circles.push(wr.circles[Un+0]),Zr.circles.push(wr.circles[Un+1]),Zr.circles.push(wr.circles[Un+2]),Zr.circles.push(wr.collisionDetected?1:0)}if(kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[kt.crossTileID]=new hn(Bt||Et,On||_t,xr||g.justReloaded),u[kt.crossTileID]=!0};if(xt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const kt=g.getSortedSymbolIndexes(this.transform.angle);for(let an=kt.length-1;an>=0;--an){const Bt=kt[an];gn(g.symbolInstances.get(Bt),g.collisionArrays[Bt])}}else for(let kt=r.symbolInstanceStart;kt<r.symbolInstanceEnd;kt++)gn(g.symbolInstances.get(kt),g.collisionArrays[kt]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[g.bucketInstanceId];l.invert(kt.invProjMatrix,I),kt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,u,f,g){let x;x=g===l.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const k of I)k>=0&&(r.text.placedSymbolArray.get(k).crossTileID=x>=0&&k!==x?0:f.crossTileID)}markUsedOrientation(r,u,f){const g=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,x=u===l.WritingMode.vertical?u:0,I=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const k of I)r.text.placedSymbolArray.get(k).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(r):1,x=u?u.opacities:{},I=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const M in this.placements){const $=this.placements[M],Y=x[M];Y?(this.opacities[M]=new Jt(Y,g,$.text,$.icon),f=f||$.text!==Y.text.placed||$.icon!==Y.icon.placed):(this.opacities[M]=new Jt(null,g,$.text,$.icon,$.skipFade),f=f||$.text||$.icon)}for(const M in x){const $=x[M];if(!this.opacities[M]){const Y=new Jt($,g,!1,!1);Y.isHidden()||(this.opacities[M]=Y,f=f||$.text.placed||$.icon.placed)}}for(const M in I)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=I[M]);for(const M in k)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=k[M]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const g of u){const x=g.getBucket(r);x&&g.latestFeatureIndex&&r.id===x.layerIds[0]&&this.updateBucketOpacities(x,f,g.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0].layout,x=new Jt(null,0,!1,!1,!0),I=g.get("text-allow-overlap"),k=g.get("icon-allow-overlap"),M=g.get("text-variable-anchor"),$=g.get("text-rotation-alignment")==="map",Y=g.get("text-pitch-alignment")==="map",q=g.get("icon-text-fit")!=="none",he=new Jt(null,0,I&&(k||!r.hasIconData()||g.get("icon-optional")),k&&(I||!r.hasTextData()||g.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const Me=(Ie,Pe,Ne)=>{for(let He=0;He<Pe/4;He++)Ie.opacityVertexArray.emplaceBack(Ne);Ie.hasVisibleVertices=Ie.hasVisibleVertices||Ne!==Fr};for(let Ie=0;Ie<r.symbolInstances.length;Ie++){const Pe=r.symbolInstances.get(Ie),{numHorizontalGlyphVertices:Ne,numVerticalGlyphVertices:He,crossTileID:it}=Pe;let je=this.opacities[it];u[it]?je=x:je||(je=he,this.opacities[it]=je),u[it]=!0;const rt=Pe.numIconVertices>0,lt=this.placedOrientations[Pe.crossTileID],vt=lt===l.WritingMode.vertical,xt=lt===l.WritingMode.horizontal||lt===l.WritingMode.horizontalOnly;if(Ne>0||He>0){const Et=Ar(je.text);Me(r.text,Ne,vt?Fr:Et),Me(r.text,He,xt?Fr:Et);const _t=je.text.isHidden();[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach(gn=>{gn>=0&&(r.text.placedSymbolArray.get(gn).hidden=_t||vt?1:0)}),Pe.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Pe.verticalPlacedTextSymbolIndex).hidden=_t||xt?1:0);const Dt=this.variableOffsets[Pe.crossTileID];Dt&&this.markUsedJustification(r,Dt.anchor,Pe,lt);const tn=this.placedOrientations[Pe.crossTileID];tn&&(this.markUsedJustification(r,"left",Pe,tn),this.markUsedOrientation(r,tn,Pe))}if(rt){const Et=Ar(je.icon),_t=!(q&&Pe.verticalPlacedIconSymbolIndex&&vt);Pe.placedIconSymbolIndex>=0&&(Me(r.icon,Pe.numIconVertices,_t?Et:Fr),r.icon.placedSymbolArray.get(Pe.placedIconSymbolIndex).hidden=je.icon.isHidden()),Pe.verticalPlacedIconSymbolIndex>=0&&(Me(r.icon,Pe.numVerticalIconVertices,_t?Fr:Et),r.icon.placedSymbolArray.get(Pe.verticalPlacedIconSymbolIndex).hidden=je.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Et=r.collisionArrays[Ie];if(Et){let _t=new l.Point(0,0);if(Et.textBox||Et.verticalTextBox){let tn=!0;if(M){const gn=this.variableOffsets[it];gn?(_t=bn(gn.anchor,gn.width,gn.height,gn.textOffset,gn.textBoxScale),$&&_t._rotate(Y?this.transform.angle:-this.transform.angle)):tn=!1}Et.textBox&&Pn(r.textCollisionBox.collisionVertexArray,je.text.placed,!tn||vt,_t.x,_t.y),Et.verticalTextBox&&Pn(r.textCollisionBox.collisionVertexArray,je.text.placed,!tn||xt,_t.x,_t.y)}const Dt=!!(!xt&&Et.verticalIconBox);Et.iconBox&&Pn(r.iconCollisionBox.collisionVertexArray,je.icon.placed,Dt,q?_t.x:0,q?_t.y:0),Et.verticalIconBox&&Pn(r.iconCollisionBox.collisionVertexArray,je.icon.placed,!Dt,q?_t.x:0,q?_t.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Ie=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Ie.invProjMatrix,r.placementViewportMatrix=Ie.viewportMatrix,r.collisionCircleArray=Ie.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function Pn(p,r,u,f,g){p.emplaceBack(r?1:0,u?1:0,f||0,g||0),p.emplaceBack(r?1:0,u?1:0,f||0,g||0),p.emplaceBack(r?1:0,u?1:0,f||0,g||0),p.emplaceBack(r?1:0,u?1:0,f||0,g||0)}const Yn=Math.pow(2,25),er=Math.pow(2,24),hr=Math.pow(2,17),Ln=Math.pow(2,16),jl=Math.pow(2,9),Dl=Math.pow(2,8),$r=Math.pow(2,1);function Ar(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const r=p.placed?1:0,u=Math.floor(127*p.opacity);return u*Yn+r*er+u*hr+r*Ln+u*jl+r*Dl+u*$r+r}const Fr=0;class Cn{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,g,x){const I=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(I,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((k,M)=>k.sortKey-M.sortKey));this._currentPartIndex<I.length;)if(u.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class no{constructor(r,u,f,g,x,I,k,M){this.placement=new zn(r,u,I,k,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const g=l.exported.now(),x=()=>!this._forceFullPlacement&&l.exported.now()-g>2;for(;this._currentPlacementIndex>=0;){const I=u[r[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=k)&&(!I.maxzoom||I.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new Cn(I)),this._inProgressLayer.continuePlacement(f[I.source],this.placement,this._showCollisionBoxes,I,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const tr=512/l.EXTENT/2;class Ys{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let x=0;x<u.length;x++){const I=u.get(x),k=I.key,M=g.get(k);M?M.push(I):g.set(k,[I])}for(const[x,I]of g){const k={positions:I.map(M=>({x:Math.floor(M.anchorX*tr),y:Math.floor(M.anchorY*tr)})),crossTileIDs:I.map(M=>M.crossTileID)};if(k.positions.length>128){const M=new l.KDBush(k.positions.length,16,Uint16Array);for(const{x:$,y:Y}of k.positions)M.add($,Y);M.finish(),delete k.positions,k.index=M}this._symbolsByKey[x]=k}}getScaledCoordinates(r,u){const{x:f,y:g,z:x}=this.tileID.canonical,{x:I,y:k,z:M}=u.canonical,$=tr/Math.pow(2,M-x),Y=(k*l.EXTENT+r.anchorY)*$,q=g*l.EXTENT*tr;return{x:Math.floor((I*l.EXTENT+r.anchorX)*$-f*l.EXTENT*tr),y:Math.floor(Y-q)}}findMatches(r,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let x=0;x<r.length;x++){const I=r.get(x);if(I.crossTileID)continue;const k=this._symbolsByKey[I.key];if(!k)continue;const M=this.getScaledCoordinates(I,u);if(k.index){const $=k.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const Y of $){const q=k.crossTileIDs[Y];if(!f[q]){f[q]=!0,I.crossTileID=q;break}}}else if(k.positions)for(let $=0;$<k.positions.length;$++){const Y=k.positions[$],q=k.crossTileIDs[$];if(Math.abs(Y.x-M.x)<=g&&Math.abs(Y.y-M.y)<=g&&!f[q]){f[q]=!0,I.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Qo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Pr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],x={};for(const I in g){const k=g[I];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),x[k.tileID.key]=k}this.indexes[f]=x}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let x=0;x<u.symbolInstances.length;x++)u.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const x in this.indexes){const I=this.indexes[x];if(Number(x)>r.overscaledZ)for(const k in I){const M=I[k];M.tileID.isChildOf(r)&&M.findMatches(u.symbolInstances,r,g)}else{const k=I[r.scaledTo(Number(x)).key];k&&k.findMatches(u.symbolInstances,r,g)}}for(let x=0;x<u.symbolInstances.length;x++){const I=u.symbolInstances.get(x);I.crossTileID||(I.crossTileID=f.generate(),g[I.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ys(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const x in g)r[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],u=!0)}return u}}class Js{constructor(){this.layerIndexes={},this.crossTileIDs=new Qo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new Pr);let x=!1;const I={};g.handleWrapJump(f);for(const k of u){const M=k.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,M,this.crossTileIDs)&&(x=!0),I[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(I)&&(x=!0),x}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const lr=(p,r)=>l.emitValidationErrors(p,r&&r.filter(u=>u.identifier!=="source.canvas")),Du=l.pick(l.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Fo=l.pick(l.operations,["setCenter","setZoom","setBearing","setPitch"]),wh=l.emptyStyle();class Fi extends l.Evented{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Le(be(),this,r._getMapId()),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new re(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new ke(256,512),this.crossTileSymbolIndex=new Js,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const f=this;this._rtlTextPluginCallback=Fi.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(x,I)=>{if(l.triggerPluginCompletionEvent(x),I&&I.every(k=>k))for(const k in f.sourceCaches){const M=f.sourceCaches[k].getSource().type;M!=="vector"&&M!=="geojson"||f.sourceCaches[k].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const x=this.sourceCaches[g.sourceId];if(!x)return;const I=x.getSource();if(I&&I.vectorLayerIds)for(const k in this._layers){const M=this._layers[k];M.source===I.id&&this._validateLayer(M)}})}loadURL(r,u={},f){this.fire(new l.Event("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(r,G.Style);this._request=l.getJSON(g,(x,I)=>{this._request=null,x?this.fire(new l.ErrorEvent(x)):I&&this._load(I,u,f)})}loadJSON(r,u={},f){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(wh,{validate:!1})}_load(r,u,f){const g=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!lr(this,l.validateStyle(g))){this._loaded=!0,this.stylesheet=g;for(const x in g.sources)this.addSource(x,g.sources[x],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new $e(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}}_createLayers(){const r=l.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=l.createStyleLayer(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,x,I,k){const M=Z(g),$=M.length,Y=I>1?"@2x":"",q={},he={},Me={};for(const{id:Ie,url:Pe}of M){const Ne=x.transformRequest(x.normalizeSpriteURL(Pe,Y,".json"),G.SpriteJSON),He=`${Ie}_${Ne.url}`;q[He]=l.getJSON(Ne,(rt,lt)=>{delete q[He],he[Ie]=lt,J(k,he,Me,rt,$)});const it=x.transformRequest(x.normalizeSpriteURL(Pe,Y,".png"),G.SpriteImage),je=`${Ie}_${it.url}`;q[je]=V.getImage(it,(rt,lt)=>{delete q[je],Me[Ie]=lt,J(k,he,Me,rt,$)})}return{cancel(){for(const Ie of Object.values(q))Ie.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(g,x)=>{if(this._spriteRequest=null,g)this.fire(new l.ErrorEvent(g));else if(x)for(const I in x){this._spritesImagesIds[I]=[];const k=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(M=>!(M in x)):[];for(const M of k)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[I]){const $=I==="default"?M:`${I}:${M}`;this._spritesImagesIds[I].push($),$ in this.imageManager.images?this.imageManager.updateImage($,x[I][M],!1):this.imageManager.addImage($,x[I][M]),u&&(this._changedImages[$]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const g of r)u[g]&&f.push(u[g]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const g=this._layers[f];g.type!=="custom"&&(r[f]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const I in this._updatedSources){const k=this._updatedSources[I];if(k==="reload")this._reloadSource(I);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];f[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(r,this._availableImages),!x.isHidden(r.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in f){const x=this.sourceCaches[g];f[g]!==x.used&&x.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,lr(this,l.validateStyle(r)))return!1;(r=l.clone$1(r)).layers=l.derefLayers(r.layers);const g=l.diffStyles(f,r).filter(I=>!(I.command in Fo));if(g.length===0)return!1;const x=g.filter(I=>!(I.command in Du));if(x.length>0)throw new Error(`Unimplemented: ${x.map(I=>I.command).join(", ")}.`);for(const I of g)I.command!=="setTransition"&&this[I.command].apply(this,I.args);return this.stylesheet=r,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[r]=new ge(r,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new l.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new l.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let x;if(r.type==="custom"){if(lr(this,l.validateCustomStyleLayer(r)))return;x=l.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(g,r.source),r=l.clone$1(r),r=l.extend(r,{source:g})),this._validate(l.validateStyle.layer,`layers.${g}`,r,{arrayIndex:-1},f))return;x=l.createStyleLayer(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const I=u?this._order.indexOf(u):this._order.length;if(u&&I===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(I,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!l.deepEqual(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.validateStyle.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=l.clone$1(u),this._updateLayer(g)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,u,f,g={}){this._checkLoaded();const x=this.getLayer(r);x?l.deepEqual(x.getLayoutProperty(u),f)||(x.setLayoutProperty(u,f,g),this._updateLayer(x)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,g={}){this._checkLoaded();const x=this.getLayer(r);x?l.deepEqual(x.getPaintProperty(u),f)||(x.setPaintProperty(u,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,g=r.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const I=x.getSource().type;I==="geojson"&&g?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||g?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,r.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const x=g.getSource().type,I=x==="vector"?r.sourceLayer:void 0;x!=="vector"||I?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(I,r.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,r.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const r=l.mapObject(this.sourceCaches,g=>g.serialize()),u=this._serializeByIds(this._order),f=this.stylesheet;return l.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:r,layers:u},g=>g!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=I=>this._layers[I].type==="fill-extrusion",f={},g=[];for(let I=this._order.length-1;I>=0;I--){const k=this._order[I];if(u(k)){f[k]=I;for(const M of r){const $=M[k];if($)for(const Y of $)g.push(Y)}}}g.sort((I,k)=>k.intersectionZ-I.intersectionZ);const x=[];for(let I=this._order.length-1;I>=0;I--){const k=this._order[I];if(u(k))for(let M=g.length-1;M>=0;M--){const $=g[M].feature;if(f[$.layer.id]<I)break;x.push($),g.pop()}else for(const M of r){const $=M[k];if($)for(const Y of $)x.push(Y.feature)}}return x}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of u.layers){const M=this._layers[k];if(!M)return this.fire(new l.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const x=[];u.availableImages=this._availableImages;const I=this._serializedAllLayers();for(const k in this.sourceCaches)u.layers&&!g[k]||x.push(Ft(this.sourceCaches[k],this._layers,I,r,u,f));return this.placement&&x.push(function(k,M,$,Y,q,he,Me){const Ie={},Pe=he.queryRenderedSymbols(Y),Ne=[];for(const He of Object.keys(Pe).map(Number))Ne.push(Me[He]);Ne.sort(un);for(const He of Ne){const it=He.featureIndex.lookupSymbolFeatures(Pe[He.bucketInstanceId],M,He.bucketIndex,He.sourceLayerIndex,q.filter,q.layers,q.availableImages,k);for(const je in it){const rt=Ie[je]=Ie[je]||[],lt=it[je];lt.sort((vt,xt)=>{const Et=He.featureSortOrder;if(Et){const _t=Et.indexOf(vt.featureIndex);return Et.indexOf(xt.featureIndex)-_t}return xt.featureIndex-vt.featureIndex});for(const vt of lt)rt.push(vt)}}for(const He in Ie)Ie[He].forEach(it=>{const je=it.feature,rt=$[k[He].source].getFeatureState(je.layer["source-layer"],je.id);je.source=je.layer.source,je.layer["source-layer"]&&(je.sourceLayer=je.layer["source-layer"]),je.state=rt});return Ie}(this._layers,I,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(g,x){const I=g.getRenderableIds().map($=>g.getTileByID($)),k=[],M={};for(let $=0;$<I.length;$++){const Y=I[$],q=Y.tileID.canonical.key;M[q]||(M[q]=!0,Y.querySourceFeatures(k,x))}return k}(f,u):[]}addSourceType(r,u,f){return Fi.getSourceType(r)?f(new Error(`A source type called "${r}" already exists.`)):(Fi.setSourceType(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const I in r)if(!l.deepEqual(r[I],f[I])){g=!0;break}if(!g)return;const x={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(x)}_validate(r,u,f,g,x={}){return(!x||x.validate!==!1)&&lr(this,r.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:f,styleSpec:l.v8Spec},g)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,g,x=!1){let I=!1,k=!1;const M={};for(const $ of this._order){const Y=this._layers[$];if(Y.type!=="symbol")continue;if(!M[Y.source]){const he=this.sourceCaches[Y.source];M[Y.source]=he.getRenderableIds(!0).map(Me=>he.getTileByID(Me)).sort((Me,Ie)=>Ie.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(Ie.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(Y,M[Y.source],r.center.lng);I=I||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),r.zoom))&&(this.pauseablePlacement=new no(r,this.map.terrain,this._order,x,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),k=!0),I&&this.pauseablePlacement.placement.setStale()),k||I)for(const $ of this._order){const Y=this._layers[$];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,M[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return l.makeRequest(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(l.validateStyle.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},g){this._checkLoaded();const x=[{id:r,url:u}],I=[...Z(this.stylesheet.sprite),...x];this._validate(l.validateStyle.sprite,"sprite",I,null,f)||(this.stylesheet.sprite=I,this._loadSprite(x,!0,g))}removeSprite(r){this._checkLoaded();const u=Z(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}else this.fire(new l.ErrorEvent(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(l.validateStyle.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}Fi.getSourceType=function(p){return wn[p]},Fi.setSourceType=function(p,r){wn[p]=r},Fi.registerForPluginStateChange=l.registerForPluginStateChange;var Cs=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ei="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ei={prelude:Dn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Dn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Dn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Dn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Dn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Dn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Dn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Dn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Dn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Dn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Dn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Dn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Dn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Dn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Dn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Dn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Dn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Dn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Dn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Dn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Dn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Dn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Dn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Dn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ei),terrainDepth:Dn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ei),terrainCoords:Dn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ei)};function Dn(p,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),g=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=x?x.concat(g):g,k={};return{fragmentSource:p=p.replace(u,(M,$,Y,q,he)=>(k[he]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${he}
varying ${Y} ${q} ${he};
#else
uniform ${Y} ${q} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${Y} ${q} ${he} = u_${he};
#endif
`)),vertexSource:r=r.replace(u,(M,$,Y,q,he)=>{const Me=q==="float"?"vec2":"vec4",Ie=he.match(/color/)?"color":Me;return k[he]?$==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${Y} ${Me} a_${he};
varying ${Y} ${q} ${he};
#else
uniform ${Y} ${q} u_${he};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${Y} ${q} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${Ie}(a_${he}, u_${he}_t);
#else
    ${Y} ${q} ${he} = u_${he};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${Y} ${Me} a_${he};
#else
uniform ${Y} ${q} u_${he};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${Y} ${q} ${he} = a_${he};
#else
    ${Y} ${q} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${Y} ${q} ${he} = unpack_mix_${Ie}(a_${he}, u_${he}_t);
#else
    ${Y} ${q} ${he} = u_${he};
#endif
`}),staticAttributes:f,staticUniforms:I}}class ja{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,g,x,I,k,M,$){this.context=r;let Y=this.boundPaintVertexBuffers.length!==g.length;for(let q=0;!Y&&q<g.length;q++)this.boundPaintVertexBuffers[q]!==g[q]&&(Y=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||Y||this.boundIndexBuffer!==x||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==$?this.freshBind(u,f,g,x,I,k,M,$):(r.bindVertexArray.set(this.vao),k&&k.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),$&&$.bind())}freshBind(r,u,f,g,x,I,k,M){const $=r.numAttributes,Y=this.context,q=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=M,u.enableAttributes(q,r);for(const he of f)he.enableAttributes(q,r);I&&I.enableAttributes(q,r),k&&k.enableAttributes(q,r),M&&M.enableAttributes(q,r),u.bind(),u.setVertexAttribPointers(q,r,x);for(const he of f)he.bind(),he.setVertexAttribPointers(q,r,x);I&&(I.bind(),I.setVertexAttribPointers(q,r,x)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(q,r,x)),M&&(M.bind(),M.setVertexAttribPointers(q,r,x)),Y.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Bl(p){const r=[];for(let u=0;u<p.length;u++){if(p[u]===null)continue;const f=p[u].split(" ");r.push(f.pop())}return r}class bh{constructor(r,u,f,g,x,I,k){const M=r.gl;this.program=M.createProgram();const $=Bl(f.staticAttributes),Y=g?g.getBinderAttributes():[],q=$.concat(Y),he=Ei.prelude.staticUniforms?Bl(Ei.prelude.staticUniforms):[],Me=f.staticUniforms?Bl(f.staticUniforms):[],Ie=g?g.getBinderUniforms():[],Pe=he.concat(Me).concat(Ie),Ne=[];for(const xt of Pe)Ne.indexOf(xt)<0&&Ne.push(xt);const He=g?g.defines():[];I&&He.push("#define OVERDRAW_INSPECTOR;"),k&&He.push("#define TERRAIN3D;");const it=He.concat(Ei.prelude.fragmentSource,f.fragmentSource).join(`
`),je=He.concat(Ei.prelude.vertexSource,f.vertexSource).join(`
`),rt=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(rt,it),M.compileShader(rt),M.attachShader(this.program,rt);const lt=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(lt,je),M.compileShader(lt),M.attachShader(this.program,lt),this.attributes={};const vt={};this.numAttributes=q.length;for(let xt=0;xt<this.numAttributes;xt++)q[xt]&&(M.bindAttribLocation(this.program,xt,q[xt]),this.attributes[q[xt]]=xt);M.linkProgram(this.program),M.deleteShader(lt),M.deleteShader(rt);for(let xt=0;xt<Ne.length;xt++){const Et=Ne[xt];if(Et&&!vt[Et]){const _t=M.getUniformLocation(this.program,Et);_t&&(vt[Et]=_t)}}this.fixedUniforms=x(r,vt),this.terrainUniforms=((xt,Et)=>({u_depth:new l.Uniform1i(xt,Et.u_depth),u_terrain:new l.Uniform1i(xt,Et.u_terrain),u_terrain_dim:new l.Uniform1f(xt,Et.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(xt,Et.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(xt,Et.u_terrain_unpack),u_terrain_exaggeration:new l.Uniform1f(xt,Et.u_terrain_exaggeration)}))(r,vt),this.binderUniforms=g?g.getUniforms(r,vt):[]}draw(r,u,f,g,x,I,k,M,$,Y,q,he,Me,Ie,Pe,Ne,He,it){const je=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(g),r.setColorMode(x),r.setCullFace(I),M){r.activeTexture.set(je.TEXTURE2),je.bindTexture(je.TEXTURE_2D,M.depthTexture),r.activeTexture.set(je.TEXTURE3),je.bindTexture(je.TEXTURE_2D,M.texture);for(const lt in this.terrainUniforms)this.terrainUniforms[lt].set(M[lt])}for(const lt in this.fixedUniforms)this.fixedUniforms[lt].set(k[lt]);Pe&&Pe.setUniforms(r,this.binderUniforms,Me,{zoom:Ie});let rt=0;switch(u){case je.LINES:rt=2;break;case je.TRIANGLES:rt=3;break;case je.LINE_STRIP:rt=1}for(const lt of he.get()){const vt=lt.vaos||(lt.vaos={});(vt[$]||(vt[$]=new ja)).bind(r,this,Y,Pe?Pe.getPaintVertexBuffers():[],q,lt.vertexOffset,Ne,He,it),je.drawElements(u,lt.primitiveLength*rt,je.UNSIGNED_SHORT,lt.primitiveOffset*rt*2)}}}function es(p,r,u){const f=1/ut(u,1,r.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),x=u.tileSize*Math.pow(2,r.transform.tileZoom)/g,I=x*(u.tileID.canonical.x+u.tileID.wrap*g),k=x*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[I>>16,k>>16],u_pixel_coord_lower:[65535&I,65535&k]}}const Bu=(p,r,u,f)=>{const g=r.style.light,x=g.properties.get("position"),I=[x.x,x.y,x.z],k=function(){var $=new l.ARRAY_TYPE(9);return l.ARRAY_TYPE!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}();g.properties.get("anchor")==="viewport"&&function($,Y){var q=Math.sin(Y),he=Math.cos(Y);$[0]=he,$[1]=q,$[2]=0,$[3]=-q,$[4]=he,$[5]=0,$[6]=0,$[7]=0,$[8]=1}(k,-r.transform.angle),function($,Y,q){var he=Y[0],Me=Y[1],Ie=Y[2];$[0]=he*q[0]+Me*q[3]+Ie*q[6],$[1]=he*q[1]+Me*q[4]+Ie*q[7],$[2]=he*q[2]+Me*q[5]+Ie*q[8]}(I,I,k);const M=g.properties.get("color");return{u_matrix:p,u_lightpos:I,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:f}},Nu=(p,r,u,f,g,x,I)=>l.extend(Bu(p,r,u,f),es(x,r,I),{u_height_factor:-Math.pow(2,g.overscaledZ)/I.tileSize/8}),Si=p=>({u_matrix:p}),Nl=(p,r,u,f)=>l.extend(Si(p),es(u,r,f)),Eh=(p,r)=>({u_matrix:p,u_world:r}),Ul=(p,r,u,f,g)=>l.extend(Nl(p,r,u,f),{u_world:g}),Uu=(p,r,u,f)=>{const g=p.transform;let x,I;if(f.paint.get("circle-pitch-alignment")==="map"){const k=ut(u,1,g.zoom);x=!0,I=[k,k]}else x=!1,I=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:I}},$u=(p,r,u)=>{const f=ut(u,1,r.zoom),g=Math.pow(2,r.zoom-u.tileID.overscaledZ),x=u.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*g),r.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:x}},Da=(p,r,u=1)=>({u_matrix:p,u_color:r,u_overlay:0,u_overlay_scale:u}),Qs=p=>({u_matrix:p}),jo=(p,r,u,f)=>({u_matrix:p,u_extrude_scale:ut(r,1,u),u_intensity:f});function ts(p,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new l.MercatorCoordinate(0,f/u).toLngLat().lat,new l.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const ti=(p,r,u,f)=>{const g=p.transform;return{u_matrix:na(p,r,u,f),u_ratio:1/ut(r,1,g.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},yo=(p,r,u,f,g)=>l.extend(ti(p,r,u,g),{u_image:0,u_image_height:f}),Ba=(p,r,u,f,g)=>{const x=p.transform,I=ta(r,x);return{u_matrix:na(p,r,u,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/ut(r,1,x.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[I,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},ea=(p,r,u,f,g,x)=>{const I=p.lineAtlas,k=ta(r,p.transform),M=u.layout.get("line-cap")==="round",$=I.getDash(f.from,M),Y=I.getDash(f.to,M),q=$.width*g.fromScale,he=Y.width*g.toScale;return l.extend(ti(p,r,u,x),{u_patternscale_a:[k/q,-$.height/2],u_patternscale_b:[k/he,-Y.height/2],u_sdfgamma:I.width/(256*Math.min(q,he)*p.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:Y.y,u_mix:g.t})};function ta(p,r){return 1/ut(p,1,r.tileZoom)}function na(p,r,u,f){return p.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Is=(p,r,u,f,g)=>{return{u_matrix:p,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(I=g.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:ra(g.paint.get("raster-hue-rotate"))};var x,I};function ra(p){p*=Math.PI/180;const r=Math.sin(p),u=Math.cos(p);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const ia=(p,r,u,f,g,x,I,k,M,$)=>{const Y=g.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:Y.width/Y.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:I,u_coord_matrix:k,u_is_text:+M,u_pitch_with_map:+f,u_texsize:$,u_texture:0}},ni=(p,r,u,f,g,x,I,k,M,$,Y)=>{const q=g.transform;return l.extend(ia(p,r,u,f,g,x,I,k,M,$),{u_gamma_scale:f?Math.cos(q._pitch)*q.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+Y})},qr=(p,r,u,f,g,x,I,k,M,$)=>l.extend(ni(p,r,u,f,g,x,I,k,!0,M,!0),{u_texsize_icon:$,u_texture_icon:1}),$l=(p,r,u)=>({u_matrix:p,u_opacity:r,u_color:u}),Na=(p,r,u,f,g,x)=>l.extend(function(I,k,M,$){const Y=M.imageManager.getPattern(I.from.toString()),q=M.imageManager.getPattern(I.to.toString()),{width:he,height:Me}=M.imageManager.getPixelSize(),Ie=Math.pow(2,$.tileID.overscaledZ),Pe=$.tileSize*Math.pow(2,M.transform.tileZoom)/Ie,Ne=Pe*($.tileID.canonical.x+$.tileID.wrap*Ie),He=Pe*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[he,Me],u_mix:k.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/ut($,1,M.transform.tileZoom),u_pixel_coord_upper:[Ne>>16,He>>16],u_pixel_coord_lower:[65535&Ne,65535&He]}}(f,x,u,g),{u_matrix:p,u_opacity:r}),Ua={fillExtrusion:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fillExtrusionPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_height_factor:new l.Uniform1f(p,r.u_height_factor),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fill:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),fillPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),fillOutline:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world)}),fillOutlinePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),circle:(p,r)=>({u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(p,r.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),collisionBox:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(p,r.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_overscale_factor:new l.Uniform1f(p,r.u_overscale_factor)}),collisionCircle:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_inv_matrix:new l.UniformMatrix4f(p,r.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(p,r.u_viewport_size)}),debug:(p,r)=>({u_color:new l.UniformColor(p,r.u_color),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_overlay:new l.Uniform1i(p,r.u_overlay),u_overlay_scale:new l.Uniform1f(p,r.u_overlay_scale)}),clippingMask:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmap:(p,r)=>({u_extrude_scale:new l.Uniform1f(p,r.u_extrude_scale),u_intensity:new l.Uniform1f(p,r.u_intensity),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmapTexture:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_color_ramp:new l.Uniform1i(p,r.u_color_ramp),u_opacity:new l.Uniform1f(p,r.u_opacity)}),hillshade:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_latrange:new l.Uniform2f(p,r.u_latrange),u_light:new l.Uniform2f(p,r.u_light),u_shadow:new l.UniformColor(p,r.u_shadow),u_highlight:new l.UniformColor(p,r.u_highlight),u_accent:new l.UniformColor(p,r.u_accent)}),hillshadePrepare:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_dimension:new l.Uniform2f(p,r.u_dimension),u_zoom:new l.Uniform1f(p,r.u_zoom),u_unpack:new l.Uniform4f(p,r.u_unpack)}),line:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels)}),lineGradient:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_image:new l.Uniform1i(p,r.u_image),u_image_height:new l.Uniform1f(p,r.u_image_height)}),linePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texsize:new l.Uniform2f(p,r.u_texsize),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_image:new l.Uniform1i(p,r.u_image),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),lineSDF:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(p,r.u_patternscale_a),u_patternscale_b:new l.Uniform2f(p,r.u_patternscale_b),u_sdfgamma:new l.Uniform1f(p,r.u_sdfgamma),u_image:new l.Uniform1i(p,r.u_image),u_tex_y_a:new l.Uniform1f(p,r.u_tex_y_a),u_tex_y_b:new l.Uniform1f(p,r.u_tex_y_b),u_mix:new l.Uniform1f(p,r.u_mix)}),raster:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_tl_parent:new l.Uniform2f(p,r.u_tl_parent),u_scale_parent:new l.Uniform1f(p,r.u_scale_parent),u_buffer_scale:new l.Uniform1f(p,r.u_buffer_scale),u_fade_t:new l.Uniform1f(p,r.u_fade_t),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image0:new l.Uniform1i(p,r.u_image0),u_image1:new l.Uniform1i(p,r.u_image1),u_brightness_low:new l.Uniform1f(p,r.u_brightness_low),u_brightness_high:new l.Uniform1f(p,r.u_brightness_high),u_saturation_factor:new l.Uniform1f(p,r.u_saturation_factor),u_contrast_factor:new l.Uniform1f(p,r.u_contrast_factor),u_spin_weights:new l.Uniform3f(p,r.u_spin_weights)}),symbolIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture)}),symbolSDF:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),symbolTextAndIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texsize_icon:new l.Uniform2f(p,r.u_texsize_icon),u_texture:new l.Uniform1i(p,r.u_texture),u_texture_icon:new l.Uniform1i(p,r.u_texture_icon),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),background:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_color:new l.UniformColor(p,r.u_color)}),backgroundPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image:new l.Uniform1i(p,r.u_image),u_pattern_tl_a:new l.Uniform2f(p,r.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(p,r.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(p,r.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(p,r.u_pattern_br_b),u_texsize:new l.Uniform2f(p,r.u_texsize),u_mix:new l.Uniform1f(p,r.u_mix),u_pattern_size_a:new l.Uniform2f(p,r.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(p,r.u_pattern_size_b),u_scale_a:new l.Uniform1f(p,r.u_scale_a),u_scale_b:new l.Uniform1f(p,r.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(p,r.u_tile_units_to_pixels)}),terrain:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texture:new l.Uniform1i(p,r.u_texture),u_ele_delta:new l.Uniform1f(p,r.u_ele_delta)}),terrainDepth:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ele_delta:new l.Uniform1f(p,r.u_ele_delta)}),terrainCoords:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texture:new l.Uniform1i(p,r.u_texture),u_terrain_coords_id:new l.Uniform1f(p,r.u_terrain_coords_id),u_ele_delta:new l.Uniform1f(p,r.u_ele_delta)})};class Vl{constructor(r,u,f){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $a={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Va{constructor(r,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=r;const x=r.gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,u,f){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],I=u.attributes[x.name];I!==void 0&&r.vertexAttribPointer(I,x.components,r[$a[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Gl extends Mn{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ga extends Mn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Zl extends Mn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Vu extends Mn{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class As extends Mn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Sh extends Mn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Th extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Gu extends Mn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Ch extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Wl extends Mn{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ih extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class Hl extends Mn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Za extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class Xl extends Mn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class ql extends Mn{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ps extends Mn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Kl extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Wa extends Mn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Yl extends Mn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ns extends Mn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Zu extends Mn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Ms extends Mn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class rs extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Wu extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Jl extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Bn extends Mn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ha extends Mn{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Xa extends Mn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.bindVertexArray(r),this.current=r,this.dirty=!1)}}class Hu extends Mn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class ro extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Xu extends Mn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ti extends Mn{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class qu extends Ti{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ah extends Ti{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ql extends Ti{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class qa{constructor(r,u,f,g,x){this.context=r,this.width=u,this.height=f;const I=r.gl,k=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new qu(r,k),g)this.depthAttachment=x?new Ql(r,k):new Ah(r,k);else if(x)throw new Error("Stencil cannot be setted without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Kn{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}Kn.Replace=[1,0],Kn.disabled=new Kn(Kn.Replace,l.Color.transparent,[!1,!1,!1,!1]),Kn.unblended=new Kn(Kn.Replace,l.Color.transparent,[!0,!0,!0,!0]),Kn.alphaBlended=new Kn([1,771],l.Color.transparent,[!0,!0,!0,!0]);class eu{constructor(r){this.gl=r,this.clearColor=new Gl(this),this.clearDepth=new Ga(this),this.clearStencil=new Zl(this),this.colorMask=new Vu(this),this.depthMask=new As(this),this.stencilMask=new Sh(this),this.stencilFunc=new Th(this),this.stencilOp=new Gu(this),this.stencilTest=new Ch(this),this.depthRange=new Wl(this),this.depthTest=new Ih(this),this.depthFunc=new Hl(this),this.blend=new Za(this),this.blendFunc=new Xl(this),this.blendColor=new ql(this),this.blendEquation=new Ps(this),this.cullFace=new Kl(this),this.cullFaceSide=new Wa(this),this.frontFace=new Yl(this),this.program=new ns(this),this.activeTexture=new Zu(this),this.viewport=new Ms(this),this.bindFramebuffer=new rs(this),this.bindRenderbuffer=new Wu(this),this.bindTexture=new Jl(this),this.bindVertexBuffer=new Bn(this),this.bindElementBuffer=new Ha(this),this.bindVertexArray=new Xa(this),this.pixelStoreUnpack=new Hu(this),this.pixelStoreUnpackPremultiplyAlpha=new ro(this),this.pixelStoreUnpackFlipY=new Xu(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.HALF_FLOAT=r.HALF_FLOAT,r.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=r.RGBA16F,this.RGB16F=r.RGB16F}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Vl(this,r,u)}createVertexBuffer(r,u,f){return new Va(this,r,u,f)}createRenderbuffer(r,u,f){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),x}createFramebuffer(r,u,f,g){return new qa(this,r,u,f,g)}clear({color:r,depth:u,stencil:f}){const g=this.gl;let x=0;r&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(x)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){l.deepEqual(r.blendFunction,Kn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){return this.gl.createVertexArray()}deleteVertexArray(r){return this.gl.deleteVertexArray(r)}unbindVAO(){this.bindVertexArray.set(null)}}class xn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}xn.ReadOnly=!1,xn.ReadWrite=!0,xn.disabled=new xn(519,xn.ReadOnly,[0,1]);const Ka=7680;class Wn{constructor(r,u,f,g,x,I){this.test=r,this.ref=u,this.mask=f,this.fail=g,this.depthFail=x,this.pass=I}}Wn.disabled=new Wn({func:519,mask:0},0,0,Ka,Ka,Ka);class Nn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let is;function tu(p,r,u,f,g,x,I){const k=p.context,M=k.gl,$=p.useProgram("collisionBox"),Y=[];let q=0,he=0;for(let je=0;je<f.length;je++){const rt=f[je],lt=r.getTile(rt),vt=lt.getBucket(u);if(!vt)continue;let xt=rt.posMatrix;g[0]===0&&g[1]===0||(xt=p.translatePosMatrix(rt.posMatrix,lt,g,x));const Et=I?vt.textCollisionBox:vt.iconCollisionBox,_t=vt.collisionCircleArray;if(_t.length>0){const Dt=l.create(),tn=xt;l.mul(Dt,vt.placementInvProjMatrix,p.transform.glCoordMatrix),l.mul(Dt,Dt,vt.placementViewportMatrix),Y.push({circleArray:_t,circleOffset:he,transform:tn,invTransform:Dt,coord:rt}),q+=_t.length/4,he=q}Et&&$.draw(k,M.LINES,xn.disabled,Wn.disabled,p.colorModeForRenderPass(),Nn.disabled,$u(xt,p.transform,lt),p.style.map.terrain&&p.style.map.terrain.getTerrainData(rt),u.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,null,p.transform.zoom,null,null,Et.collisionVertexBuffer)}if(!I||!Y.length)return;const Me=p.useProgram("collisionCircle"),Ie=new l.CollisionCircleLayoutArray;Ie.resize(4*q),Ie._trim();let Pe=0;for(const je of Y)for(let rt=0;rt<je.circleArray.length/4;rt++){const lt=4*rt,vt=je.circleArray[lt+0],xt=je.circleArray[lt+1],Et=je.circleArray[lt+2],_t=je.circleArray[lt+3];Ie.emplace(Pe++,vt,xt,Et,_t,0),Ie.emplace(Pe++,vt,xt,Et,_t,1),Ie.emplace(Pe++,vt,xt,Et,_t,2),Ie.emplace(Pe++,vt,xt,Et,_t,3)}(!is||is.length<2*q)&&(is=function(je){const rt=2*je,lt=new l.QuadTriangleArray;lt.resize(rt),lt._trim();for(let vt=0;vt<rt;vt++){const xt=6*vt;lt.uint16[xt+0]=4*vt+0,lt.uint16[xt+1]=4*vt+1,lt.uint16[xt+2]=4*vt+2,lt.uint16[xt+3]=4*vt+2,lt.uint16[xt+4]=4*vt+3,lt.uint16[xt+5]=4*vt+0}return lt}(q));const Ne=k.createIndexBuffer(is,!0),He=k.createVertexBuffer(Ie,l.collisionCircleLayout.members,!0);for(const je of Y){const rt={u_matrix:je.transform,u_inv_matrix:je.invTransform,u_camera_to_center_distance:(it=p.transform).cameraToCenterDistance,u_viewport_size:[it.width,it.height]};Me.draw(k,M.TRIANGLES,xn.disabled,Wn.disabled,p.colorModeForRenderPass(),Nn.disabled,rt,p.style.map.terrain&&p.style.map.terrain.getTerrainData(je.coord),u.id,He,Ne,l.SegmentVector.simpleSegment(0,2*je.circleOffset,je.circleArray.length,je.circleArray.length/2),null,p.transform.zoom,null,null,null)}var it;He.destroy(),Ne.destroy()}Nn.disabled=new Nn(!1,1029,2305),Nn.backCCW=new Nn(!0,1029,2305);const nu=l.identity(new Float32Array(16));function Ph(p,r,u,f,g,x){const{horizontalAlign:I,verticalAlign:k}=l.getAnchorAlignment(p),M=-(I-.5)*r,$=-(k-.5)*u,Y=l.evaluateVariableOffset(p,f);return new l.Point((M/g+Y[0])*x,($/g+Y[1])*x)}function oa(p,r,u,f,g,x,I,k,M,$,Y){const q=p.text.placedSymbolArray,he=p.text.dynamicLayoutVertexArray,Me=p.icon.dynamicLayoutVertexArray,Ie={};he.clear();for(let Pe=0;Pe<q.length;Pe++){const Ne=q.get(Pe),He=Ne.hidden||!Ne.crossTileID||p.allowVerticalPlacement&&!Ne.placedOrientation?null:f[Ne.crossTileID];if(He){const it=new l.Point(Ne.anchorX,Ne.anchorY),je=Tt(it,u?I:x,Y),rt=An(g.cameraToCenterDistance,je.signedDistanceFromCamera);let lt=l.evaluateSizeForFeature(p.textSizeData,M,Ne)*rt/l.ONE_EM;u&&(lt*=p.tilePixelRatio/k);const{width:vt,height:xt,anchor:Et,textOffset:_t,textBoxScale:Dt}=He,tn=Ph(Et,vt,xt,_t,Dt,lt),gn=u?Tt(it.add(tn),x,Y).point:je.point.add(r?tn.rotate(-g.angle):tn),kt=p.allowVerticalPlacement&&Ne.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let an=0;an<Ne.numGlyphs;an++)l.addDynamicAttributes(he,gn,kt);$&&Ne.associatedIconIndex>=0&&(Ie[Ne.associatedIconIndex]={shiftedAnchor:gn,angle:kt})}else Oe(Ne.numGlyphs,he)}if($){Me.clear();const Pe=p.icon.placedSymbolArray;for(let Ne=0;Ne<Pe.length;Ne++){const He=Pe.get(Ne);if(He.hidden)Oe(He.numGlyphs,Me);else{const it=Ie[Ne];if(it)for(let je=0;je<He.numGlyphs;je++)l.addDynamicAttributes(Me,it.shiftedAnchor,it.angle);else Oe(He.numGlyphs,Me)}}p.icon.dynamicLayoutVertexBuffer.updateData(Me)}p.text.dynamicLayoutVertexBuffer.updateData(he)}function io(p,r,u){return u.iconsInText&&r?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function Ya(p,r,u,f,g,x,I,k,M,$,Y,q){const he=p.context,Me=he.gl,Ie=p.transform,Pe=k==="map",Ne=M==="map",He=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",it=Pe&&!Ne&&!He,je=!u.layout.get("symbol-sort-key").isConstant();let rt=!1;const lt=p.depthModeForSublayer(0,xn.ReadOnly),vt=u.layout.get("text-variable-anchor"),xt=[];for(const Et of f){const _t=r.getTile(Et),Dt=_t.getBucket(u);if(!Dt)continue;const tn=g?Dt.text:Dt.icon;if(!tn||!tn.segments.get().length||!tn.hasVisibleVertices)continue;const gn=tn.programConfigurations.get(u.id),kt=g||Dt.sdfIcons,an=g?Dt.textSizeData:Dt.iconSizeData,Bt=Ne||Ie.pitch!==0,On=p.useProgram(io(kt,g,Dt),gn),xr=l.evaluateSizeForZoom(an,Ie.zoom),Fn=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Et);let yn,yr,pi,wr,Gr=[0,0],Bi=null;if(g)yr=_t.glyphAtlasTexture,pi=Me.LINEAR,yn=_t.glyphAtlasTexture.size,Dt.iconsInText&&(Gr=_t.imageAtlasTexture.size,Bi=_t.imageAtlasTexture,wr=Bt||p.options.rotating||p.options.zooming||an.kind==="composite"||an.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const Br=u.layout.get("icon-size").constantOr(0)!==1||Dt.iconsNeedLinear;yr=_t.imageAtlasTexture,pi=kt||p.options.rotating||p.options.zooming||Br||Bt?Me.LINEAR:Me.NEAREST,yn=_t.imageAtlasTexture.size}const xo=ut(_t,1,p.transform.zoom),wo=$t(Et.posMatrix,Ne,Pe,p.transform,xo),mi=vn(Et.posMatrix,Ne,Pe,p.transform,xo),Uo=vt&&Dt.hasTextData(),cu=u.layout.get("icon-text-fit")!=="none"&&Uo&&Dt.hasIconData();if(He){const Br=p.style.map.terrain?(dc,ls)=>p.style.map.terrain.getElevation(Et,dc,ls):null,Ni=u.layout.get("text-rotation-alignment")==="map";Qr(Dt,Et.posMatrix,p,g,wo,mi,Ne,$,Ni,Br)}const ii=p.translatePosMatrix(Et.posMatrix,_t,x,I),Zr=He||g&&vt||cu?nu:wo,Un=p.translatePosMatrix(mi,_t,x,I,!0),Dr=kt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Wr;Wr=kt?Dt.iconsInText?qr(an.kind,xr,it,Ne,p,ii,Zr,Un,yn,Gr):ni(an.kind,xr,it,Ne,p,ii,Zr,Un,g,yn,!0):ia(an.kind,xr,it,Ne,p,ii,Zr,Un,g,yn);const Vn={program:On,buffers:tn,uniformValues:Wr,atlasTexture:yr,atlasTextureIcon:Bi,atlasInterpolation:pi,atlasInterpolationIcon:wr,isSDF:kt,hasHalo:Dr};if(je&&Dt.canOverlap){rt=!0;const Br=tn.segments.get();for(const Ni of Br)xt.push({segments:new l.SegmentVector([Ni]),sortKey:Ni.sortKey,state:Vn,terrainData:Fn})}else xt.push({segments:tn.segments,sortKey:0,state:Vn,terrainData:Fn})}rt&&xt.sort((Et,_t)=>Et.sortKey-_t.sortKey);for(const Et of xt){const _t=Et.state;if(he.activeTexture.set(Me.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,Me.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(he.activeTexture.set(Me.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),_t.isSDF){const Dt=_t.uniformValues;_t.hasHalo&&(Dt.u_is_halo=1,Ja(_t.buffers,Et.segments,u,p,_t.program,lt,Y,q,Dt,Et.terrainData)),Dt.u_is_halo=0}Ja(_t.buffers,Et.segments,u,p,_t.program,lt,Y,q,_t.uniformValues,Et.terrainData)}}function Ja(p,r,u,f,g,x,I,k,M,$){const Y=f.context;g.draw(Y,Y.gl.TRIANGLES,x,I,k,Nn.disabled,M,$,u.id,p.layoutVertexBuffer,p.indexBuffer,r,u.paint,f.transform.zoom,p.programConfigurations.get(u.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function ks(p,r,u,f,g){if(!u||!f||!f.imageAtlas)return;const x=f.imageAtlas.patternPositions;let I=x[u.to.toString()],k=x[u.from.toString()];if(!I||!k){const M=g.getPaintProperty(r);I=x[M],k=x[M]}I&&k&&p.setConstantPatternPositions(I,k)}function sa(p,r,u,f,g,x,I){const k=p.context.gl,M="fill-pattern",$=u.paint.get(M),Y=$&&$.constantOr(1),q=u.getCrossfadeParameters();let he,Me,Ie,Pe,Ne;I?(Me=Y&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",he=k.LINES):(Me=Y?"fillPattern":"fill",he=k.TRIANGLES);const He=$.constantOr(null);for(const it of f){const je=r.getTile(it);if(Y&&!je.patternsLoaded())continue;const rt=je.getBucket(u);if(!rt)continue;const lt=rt.programConfigurations.get(u.id),vt=p.useProgram(Me,lt),xt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(it);Y&&(p.context.activeTexture.set(k.TEXTURE0),je.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),lt.updatePaintBuffers(q)),ks(lt,M,He,je,u);const Et=xt?it:null,_t=p.translatePosMatrix(Et?Et.posMatrix:it.posMatrix,je,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(I){Pe=rt.indexBuffer2,Ne=rt.segments2;const Dt=[k.drawingBufferWidth,k.drawingBufferHeight];Ie=Me==="fillOutlinePattern"&&Y?Ul(_t,p,q,je,Dt):Eh(_t,Dt)}else Pe=rt.indexBuffer,Ne=rt.segments,Ie=Y?Nl(_t,p,q,je):Si(_t);vt.draw(p.context,he,g,p.stencilModeForClipping(it),x,Nn.disabled,Ie,xt,u.id,rt.layoutVertexBuffer,Pe,Ne,u.paint,p.transform.zoom,lt)}}function oo(p,r,u,f,g,x,I){const k=p.context,M=k.gl,$="fill-extrusion-pattern",Y=u.paint.get($),q=Y.constantOr(1),he=u.getCrossfadeParameters(),Me=u.paint.get("fill-extrusion-opacity"),Ie=Y.constantOr(null);for(const Pe of f){const Ne=r.getTile(Pe),He=Ne.getBucket(u);if(!He)continue;const it=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Pe),je=He.programConfigurations.get(u.id),rt=p.useProgram(q?"fillExtrusionPattern":"fillExtrusion",je);q&&(p.context.activeTexture.set(M.TEXTURE0),Ne.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),je.updatePaintBuffers(he)),ks(je,$,Ie,Ne,u);const lt=p.translatePosMatrix(Pe.posMatrix,Ne,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),vt=u.paint.get("fill-extrusion-vertical-gradient"),xt=q?Nu(lt,p,vt,Me,Pe,he,Ne):Bu(lt,p,vt,Me);rt.draw(k,k.gl.TRIANGLES,g,x,I,Nn.backCCW,xt,it,u.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,u.paint,p.transform.zoom,je,p.style.map.terrain&&He.centroidVertexBuffer)}}function zs(p,r,u,f,g,x,I){const k=p.context,M=k.gl,$=u.fbo;if(!$)return;const Y=p.useProgram("hillshade"),q=p.style.map.terrain&&p.style.map.terrain.getTerrainData(r);k.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.colorAttachment.get()),Y.draw(k,M.TRIANGLES,g,x,I,Nn.disabled,((he,Me,Ie,Pe)=>{const Ne=Ie.paint.get("hillshade-shadow-color"),He=Ie.paint.get("hillshade-highlight-color"),it=Ie.paint.get("hillshade-accent-color");let je=Ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=he.transform.angle);const rt=!he.options.moving;return{u_matrix:Pe?Pe.posMatrix:he.transform.calculatePosMatrix(Me.tileID.toUnwrapped(),rt),u_image:0,u_latrange:ts(0,Me.tileID),u_light:[Ie.paint.get("hillshade-exaggeration"),je],u_shadow:Ne,u_highlight:He,u_accent:it}})(p,u,f,q?r:null),q,f.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function Vr(p,r,u,f,g,x){const I=p.context,k=I.gl,M=r.dem;if(M&&M.data){const $=M.dim,Y=M.stride,q=M.getPixels();if(I.activeTexture.set(k.TEXTURE1),I.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||p.getTileTexture(Y),r.demTexture){const Me=r.demTexture;Me.update(q,{premultiply:!1}),Me.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else r.demTexture=new H(I,q,k.RGBA,{premultiply:!1}),r.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);I.activeTexture.set(k.TEXTURE0);let he=r.fbo;if(!he){const Me=new H(I,{width:$,height:$,data:null},k.RGBA);Me.bind(k.LINEAR,k.CLAMP_TO_EDGE),he=r.fbo=I.createFramebuffer($,$,!0,!1),he.colorAttachment.set(Me.texture)}I.bindFramebuffer.set(he.framebuffer),I.viewport.set([0,0,$,$]),p.useProgram("hillshadePrepare").draw(I,k.TRIANGLES,f,g,x,Nn.disabled,((Me,Ie)=>{const Pe=Ie.stride,Ne=l.create();return l.ortho(Ne,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ne,Ne,[0,-l.EXTENT,0]),{u_matrix:Ne,u_image:1,u_dimension:[Pe,Pe],u_zoom:Me.overscaledZ,u_unpack:Ie.getUnpackVector()}})(r.tileID,M),null,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Hn(p,r,u,f,g,x){const I=f.paint.get("raster-fade-duration");if(!x&&I>0){const k=l.exported.now(),M=(k-p.timeAdded)/I,$=r?(k-r.timeAdded)/I:-1,Y=u.getSource(),q=g.coveringZoomLevel({tileSize:Y.tileSize,roundZoom:Y.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-q)>Math.abs(p.tileID.overscaledZ-q),Me=he&&p.refreshedUponExpiration?1:l.clamp(he?M:1-$,0,1);return p.refreshedUponExpiration&&M>=1&&(p.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}const vo=new l.Color(1,0,0,1),ri=new l.Color(0,1,0,1),Ku=new l.Color(0,0,1,1),Ls=new l.Color(1,0,1,1),aa=new l.Color(0,1,1,1);function jr(p,r,u,f){os(p,0,r+u/2,p.transform.width,u,f)}function so(p,r,u,f){os(p,r-u/2,0,u,p.transform.height,f)}function os(p,r,u,f,g,x){const I=p.context,k=I.gl;k.enable(k.SCISSOR_TEST),k.scissor(r*p.pixelRatio,u*p.pixelRatio,f*p.pixelRatio,g*p.pixelRatio),I.clear({color:x}),k.disable(k.SCISSOR_TEST)}function la(p,r,u){const f=p.context,g=f.gl,x=u.posMatrix,I=p.useProgram("debug"),k=xn.disabled,M=Wn.disabled,$=p.colorModeForRenderPass(),Y="$debug",q=p.style.map.terrain&&p.style.map.terrain.getTerrainData(u);f.activeTexture.set(g.TEXTURE0);const he=r.getTileByID(u.key).latestRawTileData,Me=Math.floor((he&&he.byteLength||0)/1024),Ie=r.getTile(u).tileSize,Pe=512/Math.min(Ie,512)*(u.overscaledZ/p.transform.zoom)*.5;let Ne=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ne+=` => ${u.overscaledZ}`),function(He,it){He.initDebugOverlayCanvas();const je=He.debugOverlayCanvas,rt=He.context.gl,lt=He.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,je.width,je.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText(it,5,5),lt.strokeText(it,5,5),He.debugOverlayTexture.update(je),He.debugOverlayTexture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)}(p,`${Ne} ${Me}kB`),I.draw(f,g.TRIANGLES,k,M,Kn.alphaBlended,Nn.disabled,Da(x,l.Color.transparent,Pe),null,Y,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),I.draw(f,g.LINE_STRIP,k,M,$,Nn.disabled,Da(x,l.Color.red),q,Y,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function Rs(p,r,u){const f=p.context,g=f.gl,x=p.colorModeForRenderPass(),I=new xn(g.LEQUAL,xn.ReadWrite,p.depthRangeFor3D),k=p.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,p.width,p.height]);for(const $ of u){const Y=p.renderToTexture.getTexture($),q=r.getTerrainData($.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,Y.texture);const he={u_matrix:p.transform.calculatePosMatrix($.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(p.transform.zoom)};k.draw(f,g.TRIANGLES,I,Wn.disabled,x,Nn.backCCW,he,q,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}const Qa={symbol:function(p,r,u,f,g){if(p.renderPass!=="translucent")return;const x=Wn.disabled,I=p.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,M,$,Y,q,he,Me){const Ie=M.transform,Pe=q==="map",Ne=he==="map";for(const He of k){const it=Y.getTile(He),je=it.getBucket($);if(!je||!je.text||!je.text.segments.get().length)continue;const rt=l.evaluateSizeForZoom(je.textSizeData,Ie.zoom),lt=ut(it,1,M.transform.zoom),vt=$t(He.posMatrix,Ne,Pe,M.transform,lt),xt=$.layout.get("icon-text-fit")!=="none"&&je.hasIconData();if(rt){const Et=Math.pow(2,Ie.zoom-it.tileID.overscaledZ);oa(je,Pe,Ne,Me,Ie,vt,He.posMatrix,Et,rt,xt,M.style.map.terrain?(_t,Dt)=>M.style.map.terrain.getElevation(He,_t,Dt):null)}}}(f,p,u,r,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&Ya(p,r,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),x,I),u.paint.get("text-opacity").constantOr(1)!==0&&Ya(p,r,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),x,I),r.map.showCollisionBoxes&&(tu(p,r,u,f,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),tu(p,r,u,f,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(p,r,u,f){if(p.renderPass!=="translucent")return;const g=u.paint.get("circle-opacity"),x=u.paint.get("circle-stroke-width"),I=u.paint.get("circle-stroke-opacity"),k=!u.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(x.constantOr(1)===0||I.constantOr(1)===0))return;const M=p.context,$=M.gl,Y=p.depthModeForSublayer(0,xn.ReadOnly),q=Wn.disabled,he=p.colorModeForRenderPass(),Me=[];for(let Ie=0;Ie<f.length;Ie++){const Pe=f[Ie],Ne=r.getTile(Pe),He=Ne.getBucket(u);if(!He)continue;const it=He.programConfigurations.get(u.id),je=p.useProgram("circle",it),rt=He.layoutVertexBuffer,lt=He.indexBuffer,vt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Pe),xt={programConfiguration:it,program:je,layoutVertexBuffer:rt,indexBuffer:lt,uniformValues:Uu(p,Pe,Ne,u),terrainData:vt};if(k){const Et=He.segments.get();for(const _t of Et)Me.push({segments:new l.SegmentVector([_t]),sortKey:_t.sortKey,state:xt})}else Me.push({segments:He.segments,sortKey:0,state:xt})}k&&Me.sort((Ie,Pe)=>Ie.sortKey-Pe.sortKey);for(const Ie of Me){const{programConfiguration:Pe,program:Ne,layoutVertexBuffer:He,indexBuffer:it,uniformValues:je,terrainData:rt}=Ie.state;Ne.draw(M,$.TRIANGLES,Y,q,he,Nn.disabled,je,rt,u.id,He,it,Ie.segments,u.paint,p.transform.zoom,Pe)}},heatmap:function(p,r,u,f){if(u.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const g=p.context,x=g.gl,I=Wn.disabled,k=new Kn([x.ONE,x.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(M,$,Y){const q=M.gl;M.activeTexture.set(q.TEXTURE1),M.viewport.set([0,0,$.width/4,$.height/4]);let he=Y.heatmapFbo;if(he)q.bindTexture(q.TEXTURE_2D,he.colorAttachment.get()),M.bindFramebuffer.set(he.framebuffer);else{const Me=q.createTexture();q.bindTexture(q.TEXTURE_2D,Me),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),he=Y.heatmapFbo=M.createFramebuffer($.width/4,$.height/4,!1,!1),function(Ie,Pe,Ne,He){var it,je;const rt=Ie.gl,lt=(it=Ie.HALF_FLOAT)!==null&&it!==void 0?it:rt.UNSIGNED_BYTE,vt=(je=Ie.RGBA16F)!==null&&je!==void 0?je:rt.RGBA;rt.texImage2D(rt.TEXTURE_2D,0,vt,Pe.width/4,Pe.height/4,0,rt.RGBA,lt,null),He.colorAttachment.set(Ne)}(M,$,Me,he)}})(g,p,u),g.clear({color:l.Color.transparent});for(let M=0;M<f.length;M++){const $=f[M];if(r.hasRenderableParent($))continue;const Y=r.getTile($),q=Y.getBucket(u);if(!q)continue;const he=q.programConfigurations.get(u.id),Me=p.useProgram("heatmap",he),{zoom:Ie}=p.transform;Me.draw(g,x.TRIANGLES,xn.disabled,I,k,Nn.disabled,jo($.posMatrix,Y,Ie,u.paint.get("heatmap-intensity")),null,u.id,q.layoutVertexBuffer,q.indexBuffer,q.segments,u.paint,p.transform.zoom,he)}g.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(g,x){const I=g.context,k=I.gl,M=x.heatmapFbo;if(!M)return;I.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,M.colorAttachment.get()),I.activeTexture.set(k.TEXTURE1);let $=x.colorRampTexture;$||($=x.colorRampTexture=new H(I,x.colorRamp,k.RGBA)),$.bind(k.LINEAR,k.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(I,k.TRIANGLES,xn.disabled,Wn.disabled,g.colorModeForRenderPass(),Nn.disabled,((Y,q,he,Me)=>{const Ie=l.create();l.ortho(Ie,0,Y.width,Y.height,0,0,1);const Pe=Y.context.gl;return{u_matrix:Ie,u_world:[Pe.drawingBufferWidth,Pe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}})(g,x),null,x.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,x.paint,g.transform.zoom)}(p,u))},line:function(p,r,u,f){if(p.renderPass!=="translucent")return;const g=u.paint.get("line-opacity"),x=u.paint.get("line-width");if(g.constantOr(1)===0||x.constantOr(1)===0)return;const I=p.depthModeForSublayer(0,xn.ReadOnly),k=p.colorModeForRenderPass(),M=u.paint.get("line-dasharray"),$=u.paint.get("line-pattern"),Y=$.constantOr(1),q=u.paint.get("line-gradient"),he=u.getCrossfadeParameters(),Me=Y?"linePattern":M?"lineSDF":q?"lineGradient":"line",Ie=p.context,Pe=Ie.gl;let Ne=!0;for(const He of f){const it=r.getTile(He);if(Y&&!it.patternsLoaded())continue;const je=it.getBucket(u);if(!je)continue;const rt=je.programConfigurations.get(u.id),lt=p.context.program.get(),vt=p.useProgram(Me,rt),xt=Ne||vt.program!==lt,Et=p.style.map.terrain&&p.style.map.terrain.getTerrainData(He),_t=$.constantOr(null);if(_t&&it.imageAtlas){const gn=it.imageAtlas,kt=gn.patternPositions[_t.to.toString()],an=gn.patternPositions[_t.from.toString()];kt&&an&&rt.setConstantPatternPositions(kt,an)}const Dt=Et?He:null,tn=Y?Ba(p,it,u,he,Dt):M?ea(p,it,u,M,he,Dt):q?yo(p,it,u,je.lineClipsArray.length,Dt):ti(p,it,u,Dt);if(Y)Ie.activeTexture.set(Pe.TEXTURE0),it.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),rt.updatePaintBuffers(he);else if(M&&(xt||p.lineAtlas.dirty))Ie.activeTexture.set(Pe.TEXTURE0),p.lineAtlas.bind(Ie);else if(q){const gn=je.gradients[u.id];let kt=gn.texture;if(u.gradientVersion!==gn.version){let an=256;if(u.stepInterpolant){const Bt=r.getSource().maxzoom,On=He.canonical.z===Bt?Math.ceil(1<<p.transform.maxZoom-He.canonical.z):1;an=l.clamp(l.nextPowerOfTwo(je.maxLineLength/l.EXTENT*1024*On),256,Ie.maxTextureSize)}gn.gradient=l.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:an,image:gn.gradient||void 0,clips:je.lineClipsArray}),gn.texture?gn.texture.update(gn.gradient):gn.texture=new H(Ie,gn.gradient,Pe.RGBA),gn.version=u.gradientVersion,kt=gn.texture}Ie.activeTexture.set(Pe.TEXTURE0),kt.bind(u.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}vt.draw(Ie,Pe.TRIANGLES,I,p.stencilModeForClipping(He),k,Nn.disabled,tn,Et,u.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,u.paint,p.transform.zoom,rt,je.layoutVertexBuffer2),Ne=!1}},fill:function(p,r,u,f){const g=u.paint.get("fill-color"),x=u.paint.get("fill-opacity");if(x.constantOr(1)===0)return;const I=p.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),M=p.opaquePassEnabledForLayer()&&!k.constantOr(1)&&g.constantOr(l.Color.transparent).a===1&&x.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===M){const $=p.depthModeForSublayer(1,p.renderPass==="opaque"?xn.ReadWrite:xn.ReadOnly);sa(p,r,u,f,$,I,!1)}if(p.renderPass==="translucent"&&u.paint.get("fill-antialias")){const $=p.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,xn.ReadOnly);sa(p,r,u,f,$,I,!0)}},"fill-extrusion":function(p,r,u,f){const g=u.paint.get("fill-extrusion-opacity");if(g!==0&&p.renderPass==="translucent"){const x=new xn(p.context.gl.LEQUAL,xn.ReadWrite,p.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))oo(p,r,u,f,x,Wn.disabled,Kn.disabled),oo(p,r,u,f,x,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const I=p.colorModeForRenderPass();oo(p,r,u,f,x,Wn.disabled,I)}}},hillshade:function(p,r,u,f){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const g=p.context,x=p.depthModeForSublayer(0,xn.ReadOnly),I=p.colorModeForRenderPass(),[k,M]=p.renderPass==="translucent"?p.stencilConfigForOverlap(f):[{},f];for(const $ of M){const Y=r.getTile($);Y.needsHillshadePrepare!==void 0&&Y.needsHillshadePrepare&&p.renderPass==="offscreen"?Vr(p,Y,u,x,Wn.disabled,I):p.renderPass==="translucent"&&zs(p,$,Y,u,x,k[$.overscaledZ],I)}g.viewport.set([0,0,p.width,p.height])},raster:function(p,r,u,f){if(p.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!f.length)return;const g=p.context,x=g.gl,I=r.getSource(),k=p.useProgram("raster"),M=p.colorModeForRenderPass(),[$,Y]=I instanceof Nt?[{},f]:p.stencilConfigForOverlap(f),q=Y[Y.length-1].overscaledZ,he=!p.options.moving;for(const Me of Y){const Ie=p.depthModeForSublayer(Me.overscaledZ-q,u.paint.get("raster-opacity")===1?xn.ReadWrite:xn.ReadOnly,x.LESS),Pe=r.getTile(Me);Pe.registerFadeDuration(u.paint.get("raster-fade-duration"));const Ne=r.findLoadedParent(Me,0),He=Hn(Pe,Ne,r,u,p.transform,p.style.map.terrain);let it,je;const rt=u.paint.get("raster-resampling")==="nearest"?x.NEAREST:x.LINEAR;g.activeTexture.set(x.TEXTURE0),Pe.texture.bind(rt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(x.TEXTURE1),Ne?(Ne.texture.bind(rt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),it=Math.pow(2,Ne.tileID.overscaledZ-Pe.tileID.overscaledZ),je=[Pe.tileID.canonical.x*it%1,Pe.tileID.canonical.y*it%1]):Pe.texture.bind(rt,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST);const lt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(Me),vt=lt?Me:null,xt=vt?vt.posMatrix:p.transform.calculatePosMatrix(Me.toUnwrapped(),he),Et=Is(xt,je||[0,0],it||1,He,u);I instanceof Nt?k.draw(g,x.TRIANGLES,Ie,Wn.disabled,M,Nn.disabled,Et,lt,u.id,I.boundsBuffer,p.quadTriangleIndexBuffer,I.boundsSegments):k.draw(g,x.TRIANGLES,Ie,$[Me.overscaledZ],M,Nn.disabled,Et,lt,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,r,u,f){const g=u.paint.get("background-color"),x=u.paint.get("background-opacity");if(x===0)return;const I=p.context,k=I.gl,M=p.transform,$=M.tileSize,Y=u.paint.get("background-pattern");if(p.isPatternMissing(Y))return;const q=!Y&&g.a===1&&x===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==q)return;const he=Wn.disabled,Me=p.depthModeForSublayer(0,q==="opaque"?xn.ReadWrite:xn.ReadOnly),Ie=p.colorModeForRenderPass(),Pe=p.useProgram(Y?"backgroundPattern":"background"),Ne=f||M.coveringTiles({tileSize:$,terrain:p.style.map.terrain});Y&&(I.activeTexture.set(k.TEXTURE0),p.imageManager.bind(p.context));const He=u.getCrossfadeParameters();for(const it of Ne){const je=f?it.posMatrix:p.transform.calculatePosMatrix(it.toUnwrapped()),rt=Y?Na(je,x,p,Y,{tileID:it,tileSize:$},He):$l(je,x,g),lt=p.style.map.terrain&&p.style.map.terrain.getTerrainData(it);Pe.draw(I,k.TRIANGLES,Me,he,Ie,Nn.disabled,rt,lt,u.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,r,u){for(let f=0;f<u.length;f++)la(p,r,u[f])},custom:function(p,r,u){const f=p.context,g=u.implementation;if(p.renderPass==="offscreen"){const x=g.prerender;x&&(p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),x.call(g,f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),f.setColorMode(p.colorModeForRenderPass()),f.setStencilMode(Wn.disabled);const x=g.renderingMode==="3d"?new xn(p.context.gl.LEQUAL,xn.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,xn.ReadOnly);f.setDepthMode(x),g.render(f.gl,p.transform.customLayerMatrix()),f.setDirty(),p.setBaseState(),f.bindFramebuffer.set(null)}}};class ru{constructor(r,u){this.context=new eu(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=ge.maxUnderzooming+ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Js}resize(r,u,f){if(this.width=r*f,this.height=u*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,u=new l.PosArray;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(u,Cs.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const f=new l.PosArray;f.emplaceBack(0,0),f.emplaceBack(l.EXTENT,0),f.emplaceBack(0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(f,Cs.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const g=new l.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(l.EXTENT,0,l.EXTENT,0),g.emplaceBack(0,l.EXTENT,0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(g,wt.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const x=new l.PosArray;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,Cs.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const I=new l.LineStripIndexArray;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(I);const k=new l.TriangleIndexArray;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(k);const M=this.context.gl;this.stencilClearMode=new Wn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.create();l.ortho(f,0,this.width,this.height,0,0,1),l.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,xn.disabled,this.stencilClearMode,Kn.disabled,Nn.disabled,Qs(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Kn.disabled),f.setDepthMode(xn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of u){const k=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(I);x.draw(f,g.TRIANGLES,xn.disabled,new Wn({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),Kn.disabled,Nn.disabled,Qs(I.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new Wn({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new Wn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((I,k)=>k.overscaledZ-I.overscaledZ),g=f[f.length-1].overscaledZ,x=f[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const I={};for(let k=0;k<x;k++)I[k+g]=new Wn({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=x,[I,f]}return[{[g]:Wn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Kn([r.CONSTANT_COLOR,r.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Kn.unblended:Kn.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return xn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new xn(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,x={},I={},k={};for(const M in g){const $=g[M];$.used&&$.prepare(this.context),x[M]=$.getVisibleCoordinates(),I[M]=x[M].slice().reverse(),k[M]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const M=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||M.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function($,Y){const q=$.context,he=q.gl,Me=Kn.unblended,Ie=new xn(he.LEQUAL,xn.ReadWrite,[0,1]),Pe=Y.getTerrainMesh(),Ne=Y.sourceCache.getRenderableTiles(),He=$.useProgram("terrainDepth");q.bindFramebuffer.set(Y.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,$.width/devicePixelRatio,$.height/devicePixelRatio]),q.clear({color:l.Color.transparent,depth:1});for(const it of Ne){const je=Y.getTerrainData(it.tileID),rt={u_matrix:$.transform.calculatePosMatrix(it.tileID.toUnwrapped()),u_ele_delta:Y.getMeshFrameDelta($.transform.zoom)};He.draw(q,he.TRIANGLES,Ie,Wn.disabled,Me,Nn.backCCW,rt,je,"terrain",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,$.width,$.height])}(this,this.style.map.terrain),function($,Y){const q=$.context,he=q.gl,Me=Kn.unblended,Ie=new xn(he.LEQUAL,xn.ReadWrite,[0,1]),Pe=Y.getTerrainMesh(),Ne=Y.getCoordsTexture(),He=Y.sourceCache.getRenderableTiles(),it=$.useProgram("terrainCoords");q.bindFramebuffer.set(Y.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,$.width/devicePixelRatio,$.height/devicePixelRatio]),q.clear({color:l.Color.transparent,depth:1}),Y.coordsIndex=[];for(const je of He){const rt=Y.getTerrainData(je.tileID);q.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ne.texture);const lt={u_matrix:$.transform.calculatePosMatrix(je.tileID.toUnwrapped()),u_terrain_coords_id:(255-Y.coordsIndex.length)/255,u_texture:0,u_ele_delta:Y.getMeshFrameDelta($.transform.zoom)};it.draw(q,he.TRIANGLES,Ie,Wn.disabled,Me,Nn.backCCW,lt,rt,"terrain",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments),Y.coordsIndex.push(je.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,$.width,$.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const M of f){const $=this.style._layers[M];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const Y=I[$.source];($.type==="custom"||Y.length)&&this.renderLayer(this,g[$.source],$,Y)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],$=g[M.source],Y=x[M.source];this._renderTileClippingMasks(M,Y),this.renderLayer(this,$,M,Y)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],$=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const Y=(M.type==="symbol"?k:I)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,$,M,Y)}if(this.options.showTileBoundaries){const M=function($,Y){let q=null;const he=Object.values($._layers).flatMap(Ne=>Ne.source&&!Ne.isHidden(Y)?[$.sourceCaches[Ne.source]]:[]),Me=he.filter(Ne=>Ne.getSource().type==="vector"),Ie=he.filter(Ne=>Ne.getSource().type!=="vector"),Pe=Ne=>{(!q||q.getSource().maxzoom<Ne.getSource().maxzoom)&&(q=Ne)};return Me.forEach(Ne=>Pe(Ne)),q||Ie.forEach(Ne=>Pe(Ne)),q}(this.style,this.transform.zoom);M&&Qa.debug(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const $=M.transform.padding;jr(M,M.transform.height-($.top||0),3,vo),jr(M,$.bottom||0,3,ri),so(M,$.left||0,3,Ku),so(M,M.transform.width-($.right||0),3,Ls);const Y=M.transform.centerPoint;(function(q,he,Me,Ie){os(q,he-1,Me-10,2,20,Ie),os(q,he-10,Me-1,20,2,Ie)})(M,Y.x,M.transform.height-Y.y,aa)}(this),this.context.setDefault()}renderLayer(r,u,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(g||[]).length)&&(this.id=f.id,Qa[f.type](r,u,f,g,this.style.placement.variableOffsets))}translatePosMatrix(r,u,f,g,x){if(!f[0]&&!f[1])return r;const I=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(I){const $=Math.sin(I),Y=Math.cos(I);f=[f[0]*Y-f[1]*$,f[0]*$+f[1]*Y]}const k=[x?f[0]:ut(u,f[0],this.transform.zoom),x?f[1]:ut(u,f[1],this.transform.zoom),0],M=new Float32Array(16);return l.translate(M,r,k),M}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new bh(this.context,r,Ei[r],u,Ua[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ua{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const M=1/(k=l.transformMat4([],k,r))[3]/u*g;return l.mul$1(k,k,[M,M,1/k[3],M])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const M=function(he,Me){var Ie=Me[0],Pe=Me[1],Ne=Me[2],He=Ie*Ie+Pe*Pe+Ne*Ne;return He>0&&(He=1/Math.sqrt(He)),he[0]=Me[0]*He,he[1]=Me[1]*He,he[2]=Me[2]*He,he}([],function(he,Me,Ie){var Pe=Me[0],Ne=Me[1],He=Me[2],it=Ie[0],je=Ie[1],rt=Ie[2];return he[0]=Ne*rt-He*je,he[1]=He*it-Pe*rt,he[2]=Pe*je-Ne*it,he}([],S([],x[k[0]],x[k[1]]),S([],x[k[2]],x[k[1]]))),$=-((Y=M)[0]*(q=x[k[1]])[0]+Y[1]*q[1]+Y[2]*q[2]);var Y,q;return M.concat($)});return new ua(x,I)}}class ji{constructor(r,u){this.min=r,this.max=u,this.center=function(f,g,x){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,x){return f[0]=g[0]+x[0],f[1]=g[1]+x[1],f[2]=g[2]+x[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=W(this.min),g=W(this.max);for(let x=0;x<u.length;x++)f[x]=u[x]?this.min[x]:this.center[x],g[x]=u[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new ji(f,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<r.planes.length;g++){const x=r.planes[g];let I=0;for(let k=0;k<u.length;k++)l.dot(x,u[k])>=0&&I++;if(I===0)return 0;I!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,I=-Number.MAX_VALUE;for(let k=0;k<r.points.length;k++){const M=r.points[k][g]-this.min[g];x=Math.min(x,M),I=Math.max(I,M)}if(I<0||x>this.max[g]-this.min[g])return 0}return 1}}class Di{constructor(r=0,u=0,f=0,g=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=g}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=l.interpolate.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.interpolate.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=l.interpolate.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=l.interpolate.number(r.right,u.right,f)),this}getCenter(r,u){const f=l.clamp((this.left+r-this.right)/2,0,r),g=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.Point(f,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Di(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ca{constructor(r,u,f,g,x){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=x===void 0||!!x,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Di,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new ca(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.wrap(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.ARRAY_TYPE(4);return l.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,x){var I=g[0],k=g[1],M=g[2],$=g[3],Y=Math.sin(x),q=Math.cos(x);f[0]=I*q+M*Y,f[1]=k*q+$*Y,f[2]=I*-Y+M*q,f[3]=k*-Y+$*q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.Point(0,0)),g=this.pointCoordinate(new l.Point(this.width,0)),x=this.pointCoordinate(new l.Point(this.width,this.height)),I=this.pointCoordinate(new l.Point(0,this.height)),k=Math.floor(Math.min(f.x,g.x,x.x,I.x)),M=Math.floor(Math.max(f.x,g.x,x.x,I.x)),$=1;for(let Y=k-$;Y<=M+$;Y++)Y!==0&&u.push(new l.UnwrappedTileID(Y,r))}return u}coveringTiles(r){var u,f;let g=this.coveringZoomLevel(r);const x=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const I=this.pointCoordinate(this.getCameraPoint()),k=l.MercatorCoordinate.fromLngLat(this.center),M=Math.pow(2,g),$=[M*I.x,M*I.y,0],Y=[M*k.x,M*k.y,0],q=ua.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let he=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(he=g);const Me=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ie=je=>({aabb:new ji([je*M,0,0],[(je+1)*M,M,0]),zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),Pe=[],Ne=[],He=g,it=r.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let je=1;je<=3;je++)Pe.push(Ie(-je)),Pe.push(Ie(je));for(Pe.push(Ie(0));Pe.length>0;){const je=Pe.pop(),rt=je.x,lt=je.y;let vt=je.fullyVisible;if(!vt){const tn=je.aabb.intersects(q);if(tn===0)continue;vt=tn===2}const xt=r.terrain?$:Y,Et=je.aabb.distanceX(xt),_t=je.aabb.distanceY(xt),Dt=Math.max(Math.abs(Et),Math.abs(_t));if(je.zoom===He||Dt>Me+(1<<He-je.zoom)-2&&je.zoom>=he){const tn=He-je.zoom,gn=$[0]-.5-(rt<<tn),kt=$[1]-.5-(lt<<tn);Ne.push({tileID:new l.OverscaledTileID(je.zoom===He?it:je.zoom,je.wrap,je.zoom,rt,lt),distanceSq:P([Y[0]-.5-rt,Y[1]-.5-lt]),tileDistanceToCamera:Math.sqrt(gn*gn+kt*kt)})}else for(let tn=0;tn<4;tn++){const gn=(rt<<1)+tn%2,kt=(lt<<1)+(tn>>1),an=je.zoom+1;let Bt=je.aabb.quadrant(tn);if(r.terrain){const On=new l.OverscaledTileID(an,je.wrap,an,gn,kt),xr=r.terrain.getMinMaxElevation(On),Fn=(u=xr.minElevation)!==null&&u!==void 0?u:this.elevation,yn=(f=xr.maxElevation)!==null&&f!==void 0?f:this.elevation;Bt=new ji([Bt.min[0],Bt.min[1],Fn],[Bt.max[0],Bt.max[1],yn])}Pe.push({aabb:Bt,zoom:an,x:gn,y:kt,wrap:je.wrap,fullyVisible:vt})}}return Ne.sort((je,rt)=>je.distanceSq-rt.distanceSq).map(je=>je.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)}unproject(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(r){this.freezeElevation||(this.elevation=r?this.getElevation(this._center,r):0)}getElevation(r,u){const f=l.MercatorCoordinate.fromLngLat(r.wrap()),g=(1<<this.tileZoom)*l.EXTENT,x=f.x*g,I=f.y*g,k=Math.floor(x/l.EXTENT),M=Math.floor(I/l.EXTENT),$=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,k,M);return u.getElevation($,x%l.EXTENT,I%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=this.getElevation(u,r);if(!(this.elevation-f))return;const g=this.getCameraPosition(),x=l.MercatorCoordinate.fromLngLat(g.lngLat,g.altitude),I=l.MercatorCoordinate.fromLngLat(u,f),k=x.x-I.x,M=x.y-I.y,$=x.z-I.z,Y=Math.sqrt(k*k+M*M+$*$),q=this.scaleZoom(this.cameraToCenterDistance/Y/this.tileSize);this._elevation=f,this._center=u,this.zoom=q}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),I=new l.MercatorCoordinate(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(I),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),this.getElevation(r,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const he=u.pointCoordinate(r);if(he!=null)return he}const f=[r.x,r.y,0,1],g=[r.x,r.y,1,1];l.transformMat4(f,f,this.pixelMatrixInverse),l.transformMat4(g,g,this.pixelMatrixInverse);const x=f[3],I=g[3],k=f[1]/x,M=g[1]/I,$=f[2]/x,Y=g[2]/I,q=$===Y?0:(0-$)/(Y-$);return new l.MercatorCoordinate(l.interpolate.number(f[0]/x,g[0]/I,q)/this.worldSize,l.interpolate.number(k,M,q)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.transformMat4(g,g,f),new l.Point(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Ve().extend(this.pointLocation(new l.Point(0,r))).extend(this.pointLocation(new l.Point(this.width,r))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ve([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const x=r.canonical,I=this.worldSize/this.zoomScale(x.z),k=x.x+Math.pow(2,x.z)*r.wrap,M=l.identity(new Float64Array(16));return l.translate(M,M,[k*I,x.y*I,0]),l.scale(M,M,[I/l.EXTENT,I/l.EXTENT,1]),l.multiply(M,u?this.alignedProjMatrix:this.projMatrix,M),g[f]=new Float32Array(M),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,g,x=-90,I=90,k=-180,M=180;const $=this.size,Y=this._unmodified;if(this.latRange){const Me=this.latRange;x=l.mercatorYfromLat(Me[1])*this.worldSize,I=l.mercatorYfromLat(Me[0])*this.worldSize,r=I-x<$.y?$.y/(I-x):0}if(this.lngRange){const Me=this.lngRange;k=l.wrap(l.mercatorXfromLng(Me[0])*this.worldSize,0,this.worldSize),M=l.wrap(l.mercatorXfromLng(Me[1])*this.worldSize,0,this.worldSize),M<k&&(M+=this.worldSize),u=M-k<$.x?$.x/(M-k):0}const q=this.point,he=Math.max(u||0,r||0);if(he)return this.center=this.unproject(new l.Point(u?(M+k)/2:q.x,r?(I+x)/2:q.y)),this.zoom+=this.scaleZoom(he),this._unmodified=Y,void(this._constraining=!1);if(this.latRange){const Me=q.y,Ie=$.y/2;Me-Ie<x&&(g=x+Ie),Me+Ie>I&&(g=I-Ie)}if(this.lngRange){const Me=(k+M)/2,Ie=l.wrap(q.x,Me-this.worldSize/2,Me+this.worldSize/2),Pe=$.x/2;Ie-Pe<k&&(f=k+Pe),Ie+Pe>M&&(f=M-Pe)}f===void 0&&g===void 0||(this.center=this.unproject(new l.Point(f!==void 0?f:q.x,g!==void 0?g:q.y)).wrap()),this._unmodified=Y,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let g=l.identity(new Float64Array(16));l.scale(g,g,[this.width/2,-this.height/2,1]),l.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.identity(new Float64Array(16)),l.scale(g,g,[1,-1,1]),l.translate(g,g,[-1,-1,0]),l.scale(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const x=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,I=Math.PI/2+this._pitch,k=this._fov*(.5+r.y/this.height),M=Math.sin(k)*x/Math.sin(l.clamp(Math.PI-I-k,.01,Math.PI-.01)),$=this.getHorizon(),Y=2*Math.atan($/this.cameraToCenterDistance)*(.5+r.y/(2*$)),q=Math.sin(Y)*x/Math.sin(l.clamp(Math.PI-I-Y,.01,Math.PI-.01)),he=Math.min(M,q),Me=1.01*(Math.cos(Math.PI/2-this._pitch)*he+x),Ie=this.height/50;g=new Float64Array(16),l.perspective(g,this._fov,this.width/this.height,Ie,Me),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,l.scale(g,g,[1,-1,1]),l.translate(g,g,[0,0,-this.cameraToCenterDistance]),l.rotateX(g,g,this._pitch),l.rotateZ(g,g,this.angle),l.translate(g,g,[-u,-f,0]),this.mercatorMatrix=l.scale([],g,[this.worldSize,this.worldSize,this.worldSize]),l.scale(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,g),l.translate(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.invert([],g),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,g);const Pe=this.width%2/2,Ne=this.height%2/2,He=Math.cos(this.angle),it=Math.sin(this.angle),je=u-Math.round(u)+He*Pe+it*Ne,rt=f-Math.round(f)+He*Ne+it*Pe,lt=new Float64Array(g);if(l.translate(lt,lt,[je>.5?je-1:je,rt>.5?rt-1:rt,0]),this.alignedProjMatrix=lt,g=l.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.Point(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,g=u.y,x=u.x,I=u.y;for(const k of r)f=Math.min(f,k.x),g=Math.min(g,k.y),x=Math.max(x,k.x),I=Math.max(I,k.y);return[new l.Point(f,g),new l.Point(x,g),new l.Point(x,I),new l.Point(f,I),new l.Point(f,g)]}}}class Yu{constructor(r){this._hashName=r&&encodeURIComponent(r),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,f){let g=!1,x=null;const I=()=>{x=null,g&&(u(),x=setTimeout(I,300),g=!1)};return()=>(g=!0,x||I(),x)}(this._updateHashUnthrottled.bind(this))}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),I=Math.round(u.lng*x)/x,k=Math.round(u.lat*x)/x,M=this._map.getBearing(),$=this._map.getPitch();let Y="";if(Y+=r?`/${I}/${k}/${f}`:`${f}/${k}/${I}`,(M||$)&&(Y+="/"+Math.round(10*M)/10),$&&(Y+=`/${Math.round($)}`),this._hashName){const q=this._hashName;let he=!1;const Me=window.location.hash.slice(1).split("&").map(Ie=>{const Pe=Ie.split("=")[0];return Pe===q?(he=!0,`${Pe}=${Y}`):Ie}).filter(Ie=>Ie);return he||Me.push(`${q}=${Y}`),`#${Me.join("&")}`}return`#${Y}`}_getCurrentHash(){const r=window.location.hash.replace("#","");if(this._hashName){let u;return r.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(u=f)}),(u&&u[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._getCurrentHash();if(r.length>=3&&!r.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:u,pitch:+(r[4]||0)}),!0}return!1}_updateHashUnthrottled(){const r=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,r)}catch{}}}const Os={linearity:.3,easing:l.bezier(0,0,.3,1)},el=l.extend({deceleration:2500,maxSpeed:1400},Os),iu=l.extend({deceleration:20,maxSpeed:1400},Os),Fs=l.extend({deceleration:1e3,maxSpeed:360},Os),ou=l.extend({deceleration:1e3,maxSpeed:90},Os);class N{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.exported.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)u.zoom+=x.zoomDelta||0,u.bearing+=x.bearingDelta||0,u.pitch+=x.pitchDelta||0,x.panDelta&&u.pan._add(x.panDelta),x.around&&(u.around=x.around),x.pinchAround&&(u.pinchAround=x.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const x=Ue(u.pan.mag(),f,l.extend({},el,r||{}));g.offset=u.pan.mult(x.amount/u.pan.mag()),g.center=this._map.transform.center,de(g,x)}if(u.zoom){const x=Ue(u.zoom,f,iu);g.zoom=this._map.transform.zoom+x.amount,de(g,x)}if(u.bearing){const x=Ue(u.bearing,f,Fs);g.bearing=this._map.transform.bearing+l.clamp(x.amount,-179,179),de(g,x)}if(u.pitch){const x=Ue(u.pitch,f,ou);g.pitch=this._map.transform.pitch+x.amount,de(g,x)}if(g.zoom||g.bearing){const x=u.pinchAround===void 0?u.around:u.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),l.extend(g,{noMoveStart:!0})}}function de(p,r){(!p.duration||p.duration<r.duration)&&(p.duration=r.duration,p.easing=r.easing)}function Ue(p,r,u){const{maxSpeed:f,linearity:g,deceleration:x}=u,I=l.clamp(p*g/(r/1e3),-f,f),k=Math.abs(I)/(x*g);return{easing:u.easing,duration:1e3*k,amount:I*(k/2)}}class st extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,g={}){const x=w.mousePos(u.getCanvasContainer(),f),I=u.unproject(x);super(r,l.extend({point:x,lngLat:I,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}}class Mt extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const g=r==="touchend"?f.changedTouches:f.touches,x=w.touchPos(u.getCanvasContainer(),g),I=x.map(M=>u.unproject(M)),k=x.reduce((M,$,Y,q)=>M.add($.div(q.length)),new l.Point(0,0));super(r,{points:x,point:k,lngLats:I,lngLat:u.unproject(k),originalEvent:f}),this._defaultPrevented=!1}}class Ct extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Zt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Ct(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new st(r.type,this._map,r))}mouseup(r){this._map.fire(new st(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new st(r.type,this._map,r))}dblclick(r){return this._firePreventable(new st(r.type,this._map,r))}mouseover(r){this._map.fire(new st(r.type,this._map,r))}mouseout(r){this._map.fire(new st(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Mt(r.type,this._map,r))}touchmove(r){this._map.fire(new Mt(r.type,this._map,r))}touchend(r){this._map.fire(new Mt(r.type,this._map,r))}touchcancel(r){this._map.fire(new Mt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qt{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new st(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new st("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new st(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(l.Point.convert(r),this._map.terrain)}}class Rn{constructor(r,u){this._map=r,this._tr=new dn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const x=Math.min(g.x,f.x),I=Math.max(g.x,f.x),k=Math.min(g.y,f.y),M=Math.max(g.y,f.y);w.setTransform(this._box,`translate(${x}px,${k}px)`),this._box.style.width=I-x+"px",this._box.style.height=M-k+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,g=u;if(this.reset(),w.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:x=>x.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.Event(r,{originalEvent:u}))}}function En(p,r){if(p.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${r.length}`);const u={};for(let f=0;f<p.length;f++)u[p[f].identifier]=r[f];return u}class St{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const x=new l.Point(0,0);for(const I of g)x._add(I);return x.div(g.length)}(u),this.touches=En(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const g=En(f,u);for(const x in this.touches){const I=g[x];(!I||I.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class nr{constructor(r){this.singleTap=new St(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const g=this.singleTap.touchend(r,u,f);if(g){const x=r.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(g)<30;if(x&&I||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class mr{constructor(r){this._tr=new dn(r),this._zoomIn=new nr({numTouches:1,numTaps:2}),this._zoomOut=new nr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const g=this._zoomIn.touchend(r,u,f),x=this._zoomOut.touchend(r,u,f),I=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(g)},{originalEvent:r})}):x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(x)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jn{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=u.length?u[0]:u;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _o={0:1,2:2};class It{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const g=_o[f];return u.buttons===void 0||(u.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class ao{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const tl=p=>{p.mousedown=p.dragStart,p.mousemoveWindow=p.dragMove,p.mouseup=p.dragEnd,p.contextmenu=function(r){r.preventDefault()}},ha=({enable:p,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new It({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Jn({clickTolerance:r,move:(g,x)=>({bearingDelta:(x.x-g.x)*u}),moveStateManager:f,enable:p,assignEvents:tl})},ss=({enable:p,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new It({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new Jn({clickTolerance:r,move:(g,x)=>({pitchDelta:(x.y-g.y)*u}),moveStateManager:f,enable:p,assignEvents:tl})};class Cd{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const g=En(f,u),x=new l.Point(0,0),I=new l.Point(0,0);let k=0;for(const $ in g){const Y=g[$],q=this._touches[$];q&&(x._add(Y),I._add(Y.sub(q)),k++,g[$]=Y)}if(this._touches=g,k<this._minTouches||!I.mag())return;const M=I.div(k);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(k),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ju{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(r){}_move(r,u,f){return{}}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[g,x]=this._firstTwoTouches,I=Qu(f,u,g),k=Qu(f,u,x);if(!I||!k)return;const M=this._aroundCenter?null:I.add(k).div(2);return this._move([I,k],M,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,I=Qu(f,u,g),k=Qu(f,u,x);I&&k||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Qu(p,r,u){for(let f=0;f<p.length;f++)if(p[f].identifier===u)return r[f]}function Id(p,r){return Math.log(p/r)/Math.LN2}class Mh extends Ju{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Id(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Id(this._distance,f),pinchAround:u}}}function ec(p,r){return 180*p.angleWith(r)/Math.PI}class kh extends Ju{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ec(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=ec(r,this._startVector);return Math.abs(f)<u}}function su(p){return Math.abs(p.y)>Math.abs(p.x)}class Ci extends Ju{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,su(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,x=u.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const I=r.y>0==u.y>0;return su(r)&&su(u)&&I}}const js={panStep:100,bearingStep:15,pitchStep:10};class Ad{constructor(r){this._tr=new dn(r);const u=js;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,g=0,x=0,I=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),x=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),x=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),I=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:k=>{const M=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:zh,zoom:u?Math.round(M.zoom)+u*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-x*this._panStep,-I*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zh(p){return p*(2-p)}const tc=4.000244140625;class Lh{constructor(r,u){this._map=r,this._tr=new dn(r),this._el=r.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=l.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%tc==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=l.LngLat.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>tc?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&M!==0&&(M=1/M);const $=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom($*M))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,g=this._easing;let x,I=!1;if(this._type==="wheel"&&f&&g){const k=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),M=g(k);x=l.interpolate.number(f,u,M),k<1?this._frameId||(this._frameId=!0):I=!0}else x=u,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:x-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.ease;if(this._prevEase){const f=this._prevEase,g=(l.exported.now()-f.start)/f.duration,x=f.easing(g+.01)-f.easing(g),I=.27/Math.sqrt(x*x+1e-4)*.01,k=Math.sqrt(.0729-I*I);u=l.bezier(I,k,.25,1)}return this._prevEase={start:l.exported.now(),duration:r,easing:u},u}reset(){this._active=!1}}class Pd{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lo{constructor(r){this._tr=new dn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ir{constructor(){this._tap=new nr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(r,u,f){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=u[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(r,u,f))}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(r,u,f)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nc{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Rh{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Md{constructor(r,u,f,g){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const au=p=>p.zoom||p.drag||p.pitch||p.rotate;class kd extends l.Event{}function Oh(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Do{constructor(r,u){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new N(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),l.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,I]of this._listeners)w.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Zt(u,r));const g=u.boxZoom=new Rn(u,r);this._add("boxZoom",g);const x=new mr(u),I=new lo(u);u.doubleClickZoom=new Pd(I,x),this._add("tapZoom",x),this._add("clickZoom",I);const k=new ir;this._add("tapDragZoom",k);const M=u.touchPitch=new Ci(u);this._add("touchPitch",M);const $=ha(r),Y=ss(r);u.dragRotate=new Rh(r,$,Y),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]);const q=(({enable:He,clickTolerance:it})=>{const je=new It({checkCorrectEvent:rt=>w.mouseButton(rt)===0&&!rt.ctrlKey});return new Jn({clickTolerance:it,move:(rt,lt)=>({around:lt,panDelta:lt.sub(rt)}),activateOnStart:!0,moveStateManager:je,enable:He,assignEvents:tl})})(r),he=new Cd(r,u);u.dragPan=new nc(f,q,he),this._add("mousePan",q),this._add("touchPan",he,["touchZoom","touchRotate"]);const Me=new kh,Ie=new Mh;u.touchZoomRotate=new Md(f,Ie,Me,k),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",Ie,["touchPan","touchRotate"]);const Pe=u.scrollZoom=new Lh(u,this);this._add("scrollZoom",Pe,["mousePan"]);const Ne=u.keyboard=new Ad(u);this._add("keyboard",Ne),this._add("blockableMapEvent",new Qt(u));for(const He of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[He]&&u[He].enable(r[He])}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!au(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const g in r)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}handleEvent(r,u){if(r.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=r.type==="renderFrame"?void 0:r,g={needsRenderFrame:!1},x={},I={},k=r.touches,M=k?this._getMapTouches(k):void 0,$=M?w.touchPos(this._el,M):w.mousePos(this._el,r);for(const{handlerName:he,handler:Me,allowed:Ie}of this._handlers){if(!Me.isEnabled())continue;let Pe;this._blockedByActive(I,Ie,he)?Me.reset():Me[u||r.type]&&(Pe=Me[u||r.type](r,$,M),this.mergeHandlerResult(g,x,Pe,he,f),Pe&&Pe.needsRenderFrame&&this._triggerRenderFrame()),(Pe||Me.isActive())&&(I[he]=Me)}const Y={};for(const he in this._previousActiveHandlers)I[he]||(Y[he]=f);this._previousActiveHandlers=I,(Object.keys(Y).length||Oh(g))&&(this._changes.push([g,x,Y]),this._triggerRenderFrame()),(Object.keys(I).length||Oh(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=g;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(r,u,f,g,x){if(!f)return;l.extend(r,f);const I={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(u.zoom=I),f.panDelta!==void 0&&(u.drag=I),f.pitchDelta!==void 0&&(u.pitch=I),f.bearingDelta!==void 0&&(u.rotate=I)}_applyChanges(){const r={},u={},f={};for(const[g,x,I]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new l.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),l.extend(u,x),l.extend(f,I);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const g=this._map,x=g._getTransformForUpdate(),I=g.terrain;if(!(Oh(r)||I&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:k,zoomDelta:M,bearingDelta:$,pitchDelta:Y,around:q,pinchAround:he}=r;he!==void 0&&(q=he),g._stop(!0),q=q||g.transform.centerPoint;const Me=x.pointLocation(k?q.sub(k):q);$&&(x.bearing+=$),Y&&(x.pitch+=Y),M&&(x.zoom+=M),I?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(k)):x.setLocationAtPoint(Me,q):(this._terrainMovement=!0,x.freezeElevation=!0,x.setLocationAtPoint(Me,q),this._map.once("moveend",()=>{x.freezeElevation=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(Me,q),g._applyUpdatedTransform(x),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const g=au(this._eventsInProgress),x=au(r),I={};for(const Y in r){const{originalEvent:q}=r[Y];this._eventsInProgress[Y]||(I[`${Y}start`]=q),this._eventsInProgress[Y]=r[Y]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const Y in I)this._fireEvent(Y,I[Y]);x&&this._fireEvent("move",x.originalEvent);for(const Y in r){const{originalEvent:q}=r[Y];this._fireEvent(Y,q)}const k={};let M;for(const Y in this._eventsInProgress){const{handlerName:q,originalEvent:he}=this._eventsInProgress[Y];this._handlersById[q].isActive()||(delete this._eventsInProgress[Y],M=u[q]||he,k[`${Y}end`]=M)}for(const Y in k)this._fireEvent(Y,k[Y]);const $=au(this._eventsInProgress);if(f&&(g||x)&&!$){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;Y?(q(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:M})):(this._map.fire(new l.Event("moveend",{originalEvent:M})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.Event(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new kd("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const rc={extend:(p,...r)=>l.extend(p,...r),run(p){p()},logToElement(p,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${p}`)}};class qt extends l.Evented{constructor(r,u){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,l.bindAll(["_renderFrameCallback"],this),this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=l.Point.convert(r).mult(-1),this.panTo(this.transform.center,l.extend({offset:r},u),f)}panTo(r,u,f){return this.easeTo(l.extend({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(l.extend({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(l.extend({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,l.extend({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Ve.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=l.extend({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const lt=g.padding;g.padding={top:lt,bottom:lt,right:lt,left:lt}}g.padding=l.extend(x,g.padding);const I=this.transform,k=I.padding,M=I.project(l.LngLat.convert(r)),$=I.project(l.LngLat.convert(u)),Y=M.rotate(-f*Math.PI/180),q=$.rotate(-f*Math.PI/180),he=new l.Point(Math.max(Y.x,q.x),Math.max(Y.y,q.y)),Me=new l.Point(Math.min(Y.x,q.x),Math.min(Y.y,q.y)),Ie=he.sub(Me),Pe=(I.width-(k.left+k.right+g.padding.left+g.padding.right))/Ie.x,Ne=(I.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/Ie.y;if(Ne<0||Pe<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const He=Math.min(I.scaleZoom(I.scale*Math.min(Pe,Ne)),g.maxZoom),it=l.Point.convert(g.offset),je=new l.Point((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),rt=it.add(je).mult(I.scale/I.zoomScale(He));return{center:I.unproject(M.add($).div(2).sub(rt)),zoom:He,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(r)),this.transform.pointLocation(l.Point.convert(u)),f,g),g,x)}_fitInternal(r,u,f){return r?(delete(u=l.extend(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let g=!1,x=!1,I=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(g=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=l.LngLat.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(x=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(I=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),g&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),x&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),I&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))}calculateCameraOptionsFromTo(r,u,f,g=0){const x=l.MercatorCoordinate.fromLngLat(r,u),I=l.MercatorCoordinate.fromLngLat(f,g),k=I.x-x.x,M=I.y-x.y,$=I.z-x.z,Y=Math.hypot(k,M,$);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(k,M),he=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),Me=180*Math.atan2(k,-M)/Math.PI;let Ie=180*Math.acos(q/Y)/Math.PI;return Ie=$<0?90-Ie:90+Ie,{center:I.toLngLat(),zoom:he,pitch:Ie,bearing:Me}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.extend({offset:[0,0],duration:500,easing:l.ease},r)).animate===!1||!r.essential&&l.exported.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),I=this.getPitch(),k=this.getPadding(),M="zoom"in r?+r.zoom:g,$="bearing"in r?this._normalizeBearing(r.bearing,x):x,Y="pitch"in r?+r.pitch:I,q="padding"in r?r.padding:f.padding,he=l.Point.convert(r.offset);let Me=f.centerPoint.add(he);const Ie=f.pointLocation(Me),Pe=l.LngLat.convert(r.center||Ie);this._normalizeCenter(Pe);const Ne=f.project(Ie),He=f.project(Pe).sub(Ne),it=f.zoomScale(M-g);let je,rt;r.around&&(je=l.LngLat.convert(r.around),rt=f.locationPoint(je));const lt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==g,this._rotating=this._rotating||x!==$,this._pitching=this._pitching||Y!==I,this._padding=!f.isPaddingEqual(q),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,lt),this.terrain&&this._prepareElevation(Pe),this._ease(vt=>{if(this._zooming&&(f.zoom=l.interpolate.number(g,M,vt)),this._rotating&&(f.bearing=l.interpolate.number(x,$,vt)),this._pitching&&(f.pitch=l.interpolate.number(I,Y,vt)),this._padding&&(f.interpolatePadding(k,q,vt),Me=f.centerPoint.add(he)),this.terrain&&!r.freezeElevation&&this._updateElevation(vt),je)f.setLocationAtPoint(je,rt);else{const xt=f.zoomScale(f.zoom-g),Et=M>g?Math.min(2,it):Math.max(.5,it),_t=Math.pow(Et,1-vt),Dt=f.unproject(Ne.add(He.mult(vt*_t)).mult(xt));f.setLocationAtPoint(f.renderWorldCopies?Dt.wrap():Dt,Me)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},vt=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,vt)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new l.Event("movestart",r)),this._zooming&&!f.zooming&&this.fire(new l.Event("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new l.Event("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new l.Event("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(r,this.terrain),this.transform.freezeElevation=!0}_updateElevation(r){const u=this.transform.getElevation(this._elevationCenter,this.terrain);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=l.interpolate.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:g,pitch:x,bearing:I,elevation:k}=this.transformCameraUpdate(u);f&&(u.center=f),g!==void 0&&(u.zoom=g),x!==void 0&&(u.pitch=x),I!==void 0&&(u.bearing=I),k!==void 0&&(u.elevation=k),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new l.Event("move",r)),this._zooming&&this.fire(new l.Event("zoom",r)),this._rotating&&this.fire(new l.Event("rotate",r)),this._pitching&&this.fire(new l.Event("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.Event("zoomend",r)),g&&this.fire(new l.Event("rotateend",r)),x&&this.fire(new l.Event("pitchend",r)),this.fire(new l.Event("moveend",r))}flyTo(r,u){if(!r.essential&&l.exported.prefersReducedMotion){const Bt=l.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Bt,u)}this.stop(),r=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},r);const f=this._getTransformForUpdate(),g=this.getZoom(),x=this.getBearing(),I=this.getPitch(),k=this.getPadding(),M="zoom"in r?l.clamp(+r.zoom,f.minZoom,f.maxZoom):g,$="bearing"in r?this._normalizeBearing(r.bearing,x):x,Y="pitch"in r?+r.pitch:I,q="padding"in r?r.padding:f.padding,he=f.zoomScale(M-g),Me=l.Point.convert(r.offset);let Ie=f.centerPoint.add(Me);const Pe=f.pointLocation(Ie),Ne=l.LngLat.convert(r.center||Pe);this._normalizeCenter(Ne);const He=f.project(Pe),it=f.project(Ne).sub(He);let je=r.curve;const rt=Math.max(f.width,f.height),lt=rt/he,vt=it.mag();if("minZoom"in r){const Bt=l.clamp(Math.min(r.minZoom,g,M),f.minZoom,f.maxZoom),On=rt/f.zoomScale(Bt-g);je=Math.sqrt(On/vt*2)}const xt=je*je;function Et(Bt){const On=(lt*lt-rt*rt+(Bt?-1:1)*xt*xt*vt*vt)/(2*(Bt?lt:rt)*xt*vt);return Math.log(Math.sqrt(On*On+1)-On)}function _t(Bt){return(Math.exp(Bt)-Math.exp(-Bt))/2}function Dt(Bt){return(Math.exp(Bt)+Math.exp(-Bt))/2}const tn=Et(0);let gn=function(Bt){return Dt(tn)/Dt(tn+je*Bt)},kt=function(Bt){return rt*((Dt(tn)*(_t(On=tn+je*Bt)/Dt(On))-_t(tn))/xt)/vt;var On},an=(Et(1)-tn)/je;if(Math.abs(vt)<1e-6||!isFinite(an)){if(Math.abs(rt-lt)<1e-6)return this.easeTo(r,u);const Bt=lt<rt?-1:1;an=Math.abs(Math.log(lt/rt))/je,kt=function(){return 0},gn=function(On){return Math.exp(Bt*je*On)}}return r.duration="duration"in r?+r.duration:1e3*an/("screenSpeed"in r?+r.screenSpeed/je:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=x!==$,this._pitching=Y!==I,this._padding=!f.isPaddingEqual(q),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ne),this._ease(Bt=>{const On=Bt*an,xr=1/gn(On);f.zoom=Bt===1?M:g+f.scaleZoom(xr),this._rotating&&(f.bearing=l.interpolate.number(x,$,Bt)),this._pitching&&(f.pitch=l.interpolate.number(I,Y,Bt)),this._padding&&(f.interpolatePadding(k,q,Bt),Ie=f.centerPoint.add(Me)),this.terrain&&!r.freezeElevation&&this._updateElevation(Bt);const Fn=Bt===1?Ne:f.unproject(He.add(it.mult(kt(On))).mult(xr));f.setLocationAtPoint(f.renderWorldCopies?Fn.wrap():Fn,Ie),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=l.exported.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,u){r=l.wrap(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.transform.getElevation(l.LngLat.convert(r),this.terrain)-this.transform.elevation:null}}class on{constructor(r={}){this.options=r,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(r){!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const x=u[g];if(x.used||x.usedForTerrain){const I=x.getSource();I.attribution&&r.indexOf(I.attribution)<0&&r.push(I.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,x)=>g.length-x.length),r=r.filter((g,x)=>{for(let I=x+1;I<r.length;I++)if(r[I].indexOf(g)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class lu{constructor(r={}){this.options=r,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const r=this._container.children;if(r.length){const u=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}}}class Fh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const jh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Ii=l.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class ic extends l.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.ortho(g.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[g.key]=new Se(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16),l.ortho(x.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),u[f]=x}else if(g.canonical.isChildOf(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const I=g.canonical.z-r.canonical.z,k=g.canonical.x-(g.canonical.x>>I<<I),M=g.canonical.y-(g.canonical.y>>I<<I),$=l.EXTENT>>I;l.ortho(x.posMatrix,0,$,0,$,0,1),l.translate(x.posMatrix,x.posMatrix,[-k*$,-M*$,0]),u[f]=x}else if(r.canonical.isChildOf(g.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const I=r.canonical.z-g.canonical.z,k=r.canonical.x-(r.canonical.x>>I<<I),M=r.canonical.y-(r.canonical.y>>I<<I),$=l.EXTENT>>I;l.ortho(x.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(x.posMatrix,x.posMatrix,[k*$,M*$,0]),l.scale(x.posMatrix,x.posMatrix,[1/2**I,1/2**I,0]),u[f]=x}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!x||!x.dem)&&u)for(;g>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(r.scaledTo(g--).key);return x}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class Bo{constructor(r,u,f){this.painter=r,this.sourceCache=new ic(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,g=l.EXTENT){if(!(u>=0&&u<g&&f>=0&&f<g))return 0;let x=0;const I=this.getTerrainData(r);if(I.tile&&I.tile.dem){const k=function(Ie,Pe,Ne){var He=Pe[0],it=Pe[1];return Ie[0]=Ne[0]*He+Ne[4]*it+Ne[12],Ie[1]=Ne[1]*He+Ne[5]*it+Ne[13],Ie}([],[u/g*l.EXTENT,f/g*l.EXTENT],I.u_terrain_matrix),M=[k[0]*I.tile.dem.dim,k[1]*I.tile.dem.dim],$=[Math.floor(M[0]),Math.floor(M[1])],Y=I.tile.dem.get($[0],$[1]),q=I.tile.dem.get($[0],$[1]+1),he=I.tile.dem.get($[0]+1,$[1]),Me=I.tile.dem.get($[0]+1,$[1]+1);x=l.interpolate.number(l.interpolate.number(Y,q,M[0]-$[0]),l.interpolate.number(he,Me,M[0]-$[0]),M[1]-$[1])}return x}getElevation(r,u,f,g=l.EXTENT){return this.getDEMElevation(r,u,f,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,x=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(g,new l.RGBAImage({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new H(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?x=r.canonical.z-g:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=r.canonical.x-(r.canonical.x>>x<<x),k=r.canonical.y-(r.canonical.y>>x<<x),M=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<x),1/(l.EXTENT<<x),0]);l.translate(M,M,[I*l.EXTENT,k*l.EXTENT,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,I=0;x<this._coordsTextureSize;x++)for(let k=0;k<this._coordsTextureSize;k++,I+=4)u[I+0]=255&k,u[I+1]=255&x,u[I+2]=k>>8<<4|x>>8,u[I+3]=0;const f=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new H(r,f,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const x=u[0]+(u[2]>>4<<8),I=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],M=k&&this.sourceCache.getTileByID(k);if(!M)return null;const $=this._coordsTextureSize,Y=(1<<M.tileID.canonical.z)*$;return new l.MercatorCoordinate((M.tileID.canonical.x*$+x)/Y,(M.tileID.canonical.y*$+I)/Y,this.getElevation(M.tileID,x,I,$))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new l.Pos3dArray,f=new l.TriangleIndexArray,g=this.meshSize,x=l.EXTENT/g,I=g*g;for(let q=0;q<=g;q++)for(let he=0;he<=g;he++)u.emplaceBack(he*x,q*x,0);for(let q=0;q<I;q+=g+1)for(let he=0;he<g;he++)f.emplaceBack(he+q,g+he+q+1,g+he+q+2),f.emplaceBack(he+q,g+he+q+2,he+q+1);const k=u.length,M=k+2*(g+1);for(const q of[0,1])for(let he=0;he<=g;he++)for(const Me of[0,1])u.emplaceBack(he*x,q*l.EXTENT,Me);for(let q=0;q<2*g;q+=2)f.emplaceBack(M+q,M+q+1,M+q+3),f.emplaceBack(M+q,M+q+3,M+q+2),f.emplaceBack(k+q,k+q+3,k+q+1),f.emplaceBack(k+q,k+q+2,k+q+3);const $=u.length,Y=$+2*(g+1);for(const q of[0,1])for(let he=0;he<=g;he++)for(const Me of[0,1])u.emplaceBack(q*l.EXTENT,he*x,Me);for(let q=0;q<2*g;q+=2)f.emplaceBack($+q,$+q+1,$+q+3),f.emplaceBack($+q,$+q+3,$+q+2),f.emplaceBack(Y+q,Y+q+3,Y+q+1),f.emplaceBack(Y+q,Y+q+2,Y+q+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,Ii.members),segments:l.SegmentVector.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*l.earthRadius/Math.pow(2,r)/5}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}}class zg{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new H(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const as={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class gr{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new zg(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const g=r.sourceCaches[f].getVisibleCoordinates();for(const x of g){const I=this.terrain.sourceCache.getTerrainCoords(x);for(const k in I)this._coordsDescendingInv[f][k]||(this._coordsDescendingInv[f][k]=[]),this._coordsDescendingInv[f][k].push(I[k])}}this._coordsDescendingInvStr={};for(const f of r._order){const g=r._layers[f],x=g.source;if(as[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const I in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][I]=this._coordsDescendingInv[x][I].map(k=>k.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][f.tileID.key];x&&x!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(as[u]&&(this._prevType&&as[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(as[this._prevType]||as[u]&&g){this._prevType=u;const x=this._stacks.length-1,I=this._stacks[x]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(Rs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[x]){const $=this.pool.getObjectForId(k.rtt[x].id);if($.stamp===k.rtt[x].stamp){this.pool.useObject($);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),k.rtt[x]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:l.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let $=0;$<I.length;$++){const Y=f.style._layers[I[$]],q=Y.source?this._coordsDescendingInv[Y.source][k.tileID.key]:[k.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(Y,q),f.renderLayer(f,f.style.sourceCaches[Y.source],Y,q),Y.source&&(k.rttCoords[Y.source]=this._coordsDescendingInvStr[Y.source][k.tileID.key])}}return Rs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),as[u]}return!1}}const Mr=b,zd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},nl=p=>{p.touchstart=p.dragStart,p.touchmoveWindow=p.dragMove,p.touchend=p.dragEnd},oc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dh{constructor(r,u,f=!1){this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),x=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=ha({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:I,clickTolerance:k,bearingDegreesPerPixelMoved:M=.8})=>{const $=new ao;return new Jn({clickTolerance:k,move:(Y,q)=>({bearingDelta:(q.x-Y.x)*M}),moveStateManager:$,enable:I,assignEvents:nl})})({clickTolerance:g,enable:!0}),this.map=r,f&&(this.mousePitch=ss({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:I,clickTolerance:k,pitchDegreesPerPixelMoved:M=-.5})=>{const $=new ao;return new Jn({clickTolerance:k,move:(Y,q)=>({pitchDelta:(q.y-Y.y)*M}),moveStateManager:$,enable:I,assignEvents:nl})})({clickTolerance:x,enable:!0})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(r,u)||{};x&&f.setPitch(f.getPitch()+x)}}moveTouch(r,u){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(r,u)||{};x&&f.setPitch(f.getPitch()+x)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}mousedown(r){this.startMouse(l.extend({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),w.mousePos(this.element,r)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(r){this.moveMouse(r,w.mousePos(this.element,r))}mouseup(r){this.mouseRotate.dragEnd(r),this.mousePitch&&this.mousePitch.dragEnd(r),this.offTemp()}touchstart(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,r.targetTouches)[0],this.startTouch(r,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))}touchmove(r){r.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,r.targetTouches)[0],this.moveTouch(r,this._lastPos))}touchend(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let No;function sc(p,r,u){if(p=new l.LngLat(p.lng,p.lat),r){const f=new l.LngLat(p.lng-360,p.lat),g=new l.LngLat(p.lng+360,p.lat),x=u.locationPoint(p).distSqr(r);u.locationPoint(f).distSqr(r)<x?p=f:u.locationPoint(g).distSqr(r)<x&&(p=g)}for(;Math.abs(p.lng-u.center.lng)>180;){const f=u.locationPoint(p);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;p.lng>u.center.lng?p.lng-=360:p.lng+=360}return p}const fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ac(p,r,u){const f=p.classList;for(const g in fa)f.remove(`maplibregl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${r}`)}class uu extends l.Evented{constructor(r,u){if(super(),(r instanceof HTMLElement||u)&&(r=l.extend({element:r},u)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const f=w.createNS("http://www.w3.org/2000/svg","svg"),g=41,x=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${g}px`),f.setAttributeNS(null,"width",`${x}px`),f.setAttributeNS(null,"viewBox",`0 0 ${x} ${g}`);const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const k=w.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const M=w.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const $=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const it of $){const je=w.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",it.rx),je.setAttributeNS(null,"ry",it.ry),M.appendChild(je)}const Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const q=w.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(q);const he=w.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"fill","#000000");const Me=w.createNS("http://www.w3.org/2000/svg","path");Me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),he.appendChild(Me);const Ie=w.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ie.setAttributeNS(null,"fill","#FFFFFF");const Pe=w.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ne=w.createNS("http://www.w3.org/2000/svg","circle");Ne.setAttributeNS(null,"fill","#000000"),Ne.setAttributeNS(null,"opacity","0.25"),Ne.setAttributeNS(null,"cx","5.5"),Ne.setAttributeNS(null,"cy","5.5"),Ne.setAttributeNS(null,"r","5.4999962");const He=w.createNS("http://www.w3.org/2000/svg","circle");He.setAttributeNS(null,"fill","#FFFFFF"),He.setAttributeNS(null,"cx","5.5"),He.setAttributeNS(null,"cy","5.5"),He.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Ne),Pe.appendChild(He),k.appendChild(M),k.appendChild(Y),k.appendChild(he),k.appendChild(Ie),k.appendChild(Pe),f.appendChild(k),f.setAttributeNS(null,"height",g*this._scale+"px"),f.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(f),this._offset=l.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),ac(this._element,this._anchor,"marker"),this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(r){const u=r.code,f=r.charCode||r.keyCode;u!=="Space"&&u!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(r){const u=r.originalEvent.target,f=this._element;this._popup&&(u===f||f.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_update(r){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=sc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),r&&r.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${fa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${u}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const g=this._map.unproject(this._pos),x=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=g.distanceTo(this._lngLat)>20*x?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(r){return this._offset=l.Point.convert(r),this._update(),this}_onMove(r){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Bh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let rl=0,da=!1;const Nh={maxWidth:100,unit:"metric"};function lc(p,r,u){const f=u&&u.maxWidth||100,g=p._container.clientHeight/2,x=p.unproject([0,g]),I=p.unproject([f,g]),k=x.distanceTo(I);if(u&&u.unit==="imperial"){const M=3.2808*k;M>5280?pa(r,f,M/5280,p._getUIString("ScaleControl.Miles")):pa(r,f,M,p._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?pa(r,f,k/1852,p._getUIString("ScaleControl.NauticalMiles")):k>=1e3?pa(r,f,k/1e3,p._getUIString("ScaleControl.Kilometers")):pa(r,f,k,p._getUIString("ScaleControl.Meters"))}function pa(p,r,u,f){const g=function(x){const I=Math.pow(10,`${Math.floor(x)}`.length-1);let k=x/I;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(M){const $=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*$)/$}(k),I*k}(u);p.style.width=r*(g/u)+"px",p.innerHTML=`${g}&nbsp;${f}`}const uc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Uh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function cc(p){if(p){if(typeof p=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new l.Point(0,0),top:new l.Point(0,p),"top-left":new l.Point(r,r),"top-right":new l.Point(-r,r),bottom:new l.Point(0,-p),"bottom-left":new l.Point(r,-r),"bottom-right":new l.Point(-r,-r),left:new l.Point(p,0),right:new l.Point(-p,0)}}if(p instanceof l.Point||Array.isArray(p)){const r=l.Point.convert(p);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.Point.convert(p.center||[0,0]),top:l.Point.convert(p.top||[0,0]),"top-left":l.Point.convert(p["top-left"]||[0,0]),"top-right":l.Point.convert(p["top-right"]||[0,0]),bottom:l.Point.convert(p.bottom||[0,0]),"bottom-left":l.Point.convert(p["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(p["bottom-right"]||[0,0]),left:l.Point.convert(p.left||[0,0]),right:l.Point.convert(p.right||[0,0])}}return cc(new l.Point(0,0))}const hc=b,fc={setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends qt{constructor(p){var r;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},zd,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ca(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._cooperativeGestures=p.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new Fh,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},jh,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(r=p.pixelRatio)!==null&&r!==void 0?r:devicePixelRatio,this.transformCameraUpdate=p.transformCameraUpdate,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new B(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;this._resizeObserver=new ResizeObserver(f=>{u?this._trackResize&&this.resize(f)._update():u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Do(this,p),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=p.hash&&new Yu(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new on({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new lu,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new l.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new l.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new l.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(p,r){if(r===void 0&&(r=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=p.onAdd(this);this._controls.push(p);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(p);return r>-1&&this._controls.splice(r,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}calculateCameraOptionsFromTo(p,r,u,f){return f==null&&this.terrain&&(f=this.transform.getElevation(u,this.terrain)),super.calculateCameraOptionsFromTo(p,r,u,f)}resize(p){var r;const u=this._containerDimensions(),f=u[0],g=u[1];this._resizeCanvas(f,g,this.getPixelRatio()),this.transform.resize(f,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,g),this.painter.resize(f,g,this.getPixelRatio());const x=!this._moving;return x&&(this.stop(),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p))),this.fire(new l.Event("resize",p)),x&&this.fire(new l.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[r,u]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(r,u,p),this.painter.resize(r,u,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(Ve.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(p){return this._cooperativeGestures=p,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(p){return this.transform.locationPoint(l.LngLat.convert(p),this.style&&this.terrain)}unproject(p){return this.transform.pointLocation(l.Point.convert(p),this.terrain)}isMoving(){var p;return this._moving||((p=this.handlers)===null||p===void 0?void 0:p.isMoving())}isZooming(){var p;return this._zooming||((p=this.handlers)===null||p===void 0?void 0:p.isZooming())}isRotating(){var p;return this._rotating||((p=this.handlers)===null||p===void 0?void 0:p.isRotating())}_createDelegatedListener(p,r,u){if(p==="mouseenter"||p==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:x=>{const I=this.getLayer(r)?this.queryRenderedFeatures(x.point,{layers:[r]}):[];I.length?f||(f=!0,u.call(this,new st(p,this,x.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(p==="mouseleave"||p==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:I=>{(this.getLayer(r)?this.queryRenderedFeatures(I.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new st(p,this,I.originalEvent)))},mouseout:I=>{f&&(f=!1,u.call(this,new st(p,this,I.originalEvent)))}}}}{const f=g=>{const x=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];x.length&&(g.features=x,u.call(this,g),delete g.features)};return{layer:r,listener:u,delegates:{[p]:f}}}}on(p,r,u){if(u===void 0)return super.on(p,r);const f=this._createDelegatedListener(p,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(p,r,u){if(u===void 0)return super.once(p,r);const f=this._createDelegatedListener(p,r,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(p,r,u){return u===void 0?super.off(p,r):(this._delegatedListeners&&this._delegatedListeners[p]&&(f=>{const g=this._delegatedListeners[p];for(let x=0;x<g.length;x++){const I=g[x];if(I.layer===r&&I.listener===u){for(const k in I.delegates)this.off(k,I.delegates[k]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(p,r){if(!this.style)return[];let u;const f=p instanceof l.Point||Array.isArray(p),g=f?p:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:p)||{},g instanceof l.Point||typeof g[0]=="number")u=[l.Point.convert(g)];else{const x=l.Point.convert(g[0]),I=l.Point.convert(g[1]);u=[x,new l.Point(I.x,x.y),I,new l.Point(x.x,I.y),x]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(p,r){return this.style.querySourceFeatures(p,r)}setStyle(p,r){return(r=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(p,r))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const r=this._locale[p];if(r==null)throw new Error(`Missing UI string '${p}'`);return r}_updateStyle(p,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(p,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!p)),p?(this.style=new Fi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p,r,u):this.style.loadJSON(p,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Fi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,r){if(typeof p=="string"){const u=this._requestManager.transformRequest(p,G.Style);l.getJSON(u,(f,g)=>{f?this.fire(new l.ErrorEvent(f)):g&&this._updateDiff(g,r)})}else typeof p=="object"&&this._updateDiff(p,r)}_updateDiff(p,r){try{this.style.setState(p,r)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(p,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(p,r){return this._lazyInitEmptyStyle(),this.style.addSource(p,r),this._update(!0)}isSourceLoaded(p){const r=this.style&&this.style.sourceCaches[p];if(r!==void 0)return r.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),p){const r=this.style.sourceCaches[p.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${p.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===p.source&&l.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bo(this.painter,r,p),this.painter.renderToTexture=new gr(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId===p.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new l.Event("terrain",{terrain:p})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const r in p){const u=p[r]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(p,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,r,u)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,r,{pixelRatio:u=1,sdf:f=!1,stretchX:g,stretchY:x,content:I}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||l.isImageBitmap(r)){const{width:k,height:M,data:$}=l.exported.getImageData(r);this.style.addImage(p,{data:new l.RGBAImage({width:k,height:M},$),pixelRatio:u,stretchX:g,stretchY:x,content:I,sdf:f,version:0})}else{if(r.width===void 0||r.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:k,height:M,data:$}=r,Y=r;this.style.addImage(p,{data:new l.RGBAImage({width:k,height:M},new Uint8Array($)),pixelRatio:u,stretchX:g,stretchY:x,content:I,sdf:f,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,p)}}}updateImage(p,r){const u=this.style.getImage(p);if(!u)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||l.isImageBitmap(r)?l.exported.getImageData(r):r,{width:g,height:x,data:I}=f;if(g===void 0||x===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||x!==u.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(r instanceof HTMLImageElement||l.isImageBitmap(r));u.data.replace(I,k),this.style.updateImage(p,u)}getImage(p){return this.style.getImage(p)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,r){V.getImage(this._requestManager.transformRequest(p,G.Image),r)}listImages(){return this.style.listImages()}addLayer(p,r){return this._lazyInitEmptyStyle(),this.style.addLayer(p,r),this._update(!0)}moveLayer(p,r){return this.style.moveLayer(p,r),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,r,u){return this.style.setLayerZoomRange(p,r,u),this._update(!0)}setFilter(p,r,u={}){return this.style.setFilter(p,r,u),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,r,u,f={}){return this.style.setPaintProperty(p,r,u,f),this._update(!0)}getPaintProperty(p,r){return this.style.getPaintProperty(p,r)}setLayoutProperty(p,r,u,f={}){return this.style.setLayoutProperty(p,r,u,f),this._update(!0)}getLayoutProperty(p,r){return this.style.getLayoutProperty(p,r)}setGlyphs(p,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(p,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(p,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(p,r,u,f=>{f||this._update(!0)}),this}removeSprite(p){return this._lazyInitEmptyStyle(),this.style.removeSprite(p),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(p,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(p,r,u=>{u||this._update(!0)}),this}setLight(p,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,r){return this.style.setFeatureState(p,r),this._update()}removeFeatureState(p,r){return this.style.removeFeatureState(p,r),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,r=0;return this._container&&(p=this._container.clientWidth||400,r=this._container.clientHeight||300),[p,r]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",p);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const f=this._controlContainer=w.create("div","maplibregl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{g[x]=w.create("div",`maplibregl-ctrl-${x} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(p){this._onCooperativeGesture(p,p[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(p,r,u){this._canvas.width=u*p,this._canvas.height=u*r,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const p={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:p},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",p);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new ru(u,this.transform),C.testSupport(u)}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(p,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=l.exported.now();this.style.zoomHistory.update(g,x);const I=new l.EvaluationParameters(g,{now:x,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=I.crossFadingFactor();k===1&&k===this._crossFadingFactor||(u=!0,this._crossFadingFactor=k),this.style.update(I)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var p;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(p=this._resizeObserver)===null||p===void 0||p.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(p=>{l.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get version(){return Mr}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(p){this.options=l.extend({},oc,p),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),r=p===this._map.getMaxZoom(),u=p===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,r){const u=w.create("button",p,this._container);return u.type="button",u.addEventListener("click",r),u}_setButtonTitle(p,r){const u=this._map._getUIString(`NavigationControl.${r}`);p.title=u,p.setAttribute("aria-label",u)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({},Bh,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){No===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{No=f.state!=="denied",r(No)}).catch(()=>{No=!!window.navigator.geolocation,r(No)}):(No=!!window.navigator.geolocation,r(No)):r(No)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rl=0,da=!1}_isOutOfMapMaxBounds(p){const r=this._map.getMaxBounds(),u=p.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude),u=p.coords.accuracy,f=this._map.getBearing(),g=l.extend({bearing:f},this.options.fitBoundsOptions),x=Ve.fromLngLat(r,u);this._map.fitBounds(x,g,{geolocateSource:!0})}_updateMarker(p){if(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.getBounds(),r=p.getSouthEast(),u=p.getNorthEast(),f=r.distanceTo(u),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&da)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new uu(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rl--,da=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rl++,rl>1?(p={maximumAge:6e5,timeout:0},da=!0):(p=this.options.positionOptions,da=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:on,LogoControl:lu,ScaleControl:class{constructor(p){this.options=l.extend({},Nh,p),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){lc(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,lc(this._map,this._container,this.options)}},FullscreenControl:class extends l.Evented{constructor(p={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const p=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(p){this.options=p,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(p){return this._map=p,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(uc),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=p;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(x=>this._container.classList.add(x)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const r=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let u=this.options.anchor;const f=cc(this.options.offset);if(!u){const x=this._container.offsetWidth,I=this._container.offsetHeight;let k;k=r.y+f.bottom.y<I?["top"]:r.y>this._map.transform.height-I?["bottom"]:[],r.x<x/2?k.push("left"):r.x>this._map.transform.width-x/2&&k.push("right"),u=k.length===0?"bottom":k.join("-")}const g=r.add(f[u]).round();w.setTransform(this._container,`${fa[u]} translate(${g.x}px,${g.y}px)`),ac(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Uh);p&&p.focus()}_onClose(){this.remove()}},Marker:uu,Style:Fi,LngLat:l.LngLat,LngLatBounds:Ve,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:sn,GeoJSONSource:ft,ImageSource:Nt,RasterDEMTileSource:Lt,RasterTileSource:gt,VectorTileSource:ht,VideoSource:Je,prewarm:function(){be().acquire(We)},clearPrewarmedResources:function(){const p=j;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(We),j=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return hc},get workerCount(){return se.workerCount},set workerCount(p){se.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},get workerUrl(){return l.config.WORKER_URL},set workerUrl(p){l.config.WORKER_URL=p},addProtocol(p,r){l.config.REGISTERED_PROTOCOLS[p]=r},removeProtocol(p){delete l.config.REGISTERED_PROTOCOLS[p]}};return rc.extend(fc,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),fc});var y=c;return y})})(jT);var BT=jT.exports;const NT=fd(BT),r3=kP({__proto__:null,default:NT},[BT]);const i3="modulepreload",o3=function(e){return"/osm-address-editor-vite/"+e},Ob={},s3=function(t,i,a){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=o3(d),d in Ob)return;Ob[d]=!0;const y=d.endsWith(".css"),l=y?'[rel="stylesheet"]':"";if(!!a)for(let C=c.length-1;C>=0;C--){const E=c[C];if(E.href===d&&(!y||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${l}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":i3,y||(w.as="script",w.crossOrigin=""),w.href=d,document.head.appendChild(w),y)return new Promise((C,E)=>{w.addEventListener("load",C),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t())},a3=yt.createContext(null);function l3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Fb(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function jb(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const u3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Db(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{const c=t[a.ref];let d=null;if("interactive"in a&&(d={...a},delete d.interactive),c){d=d||{...a},delete d.ref;for(const y of u3)y in c&&(d[y]=c[y])}return d||a});return{...e,layers:i}}function c3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===d}function Ho(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ho(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Ho(e[c],t[c]))return!1;return!0}return!1}const Bb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},qy={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Nb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},h3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],f3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ch{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[Nb[c.type]];d&&d(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[Bb[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[qy[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=ch.savedMaps.pop();if(!a)return null;const c=a.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i,a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:y}=t;return y&&(y.bounds?c.fitBounds(y.bounds,{...y.fitBoundsOptions,duration:0}):a._updateViewState(y,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c.triggerRepaint(),a}_initialize(t){const{props:i}=this,a={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||d3()||null,container:t,style:Db(i.mapStyle)},c=a.initialViewState||a.viewState||a;if(Object.assign(a,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),i.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,i.gl)}const d=new this._MapClass(a);c.padding&&d.setPadding(c.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const y=d._render;d._render=w=>{this._inRender=!0,y.call(d,w),this._inRender=!1};const l=d._renderTaskQueue.run;d._renderTaskQueue.run=w=>{l.call(d._renderTaskQueue,w),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const b=d.fire;d.fire=this._fireEvent.bind(this,b),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>this._updateStyleComponents(this.props,{})),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in Bb)d.on(w,this._onPointerEvent);for(const w in qy)d.on(w,this._onCameraEvent);for(const w in Nb)d.on(w,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),ch.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=l3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:d,pitch:y,bearing:l}=c,b=a.isMoving();b&&(c.cameraElevationReference="sea");const w=jb(c,{...Fb(a.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const C=this._deferredEvents;C.move=!0,C.zoom||(C.zoom=d!==c.zoom),C.rotate||(C.rotate=l!==c.bearing),C.pitch||(C.pitch=y!==c.pitch)}return b||jb(a.transform,t),w}_updateSettings(t,i){const a=this._map;let c=!1;for(const d of h3)d in t&&!Ho(t[d],i[d])&&(c=!0,a[`set${d[0].toUpperCase()}${d.slice(1)}`](t[d]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==i.mapStyle){const a={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(a.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Db(t.mapStyle),a),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.style.loaded()&&("light"in t&&!Ho(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&!Ho(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&!Ho(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){const a=this._map;let c=!1;for(const d of f3){const y=t[d];Ho(y,i[d])||(c=!0,y?a[d].enable(y):a[d].disable())}return c}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:a=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:a.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const d=t.type,y=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,d=c.transform,y=typeof i=="string"?i:i.type;return y==="move"&&this._updateViewState(this.props,!1),y in qy&&(typeof i=="object"&&(i.viewState=Fb(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=d,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=i}}}ch.savedMaps=[];function d3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const p3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function m3(e,t){if(!e)return null;const i=e.map,a={getMap:()=>i,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,d)=>{const y=i.transform;i.transform=e.transform;const l=i.queryTerrainElevation(c,d);return i.transform=y,l}};for(const c of g3(i))!(c in a)&&!p3.includes(c)&&(a[c]=i[c].bind(i));return a}function g3(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const y3=typeof document<"u"?yt.useLayoutEffect:yt.useEffect,v3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function _3(e,t){for(const i of v3)i in t&&(e[i]=t[i]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,i=>{i&&console.error(i)},!1)}const vh=yt.createContext(null),x3={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},a1=yt.forwardRef((e,t)=>{const i=yt.useContext(a3),[a,c]=yt.useState(null),d=yt.useRef(),{current:y}=yt.useRef({mapLib:null,map:null});yt.useEffect(()=>{const w=e.mapLib;let C=!0,E;return Promise.resolve(w||s3(()=>Promise.resolve().then(()=>r3),void 0)).then(z=>{if(C){if(z.Map||(z=z.default),!z||!z.Map)throw new Error("Invalid mapLib");if(_3(z,e),z.supported(e))e.reuseMaps&&(E=ch.reuse(e,d.current)),E||(E=new ch(z.Map,e,d.current)),y.map=m3(E,z),y.mapLib=z,c(E),i==null||i.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(z=>{e.onError({type:"error",target:null,originalEvent:null,error:z})}),()=>{C=!1,E&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?E.recycle():E.destroy())}},[]),y3(()=>{a&&a.setProps(e)}),yt.useImperativeHandle(t,()=>y.map,[a]);const l=yt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return yt.createElement("div",{id:e.id,ref:d,style:l},a&&yt.createElement(vh.Provider,{value:y},yt.createElement("div",{"mapboxgl-children":"",style:b},e.children)))});a1.displayName="Map";a1.defaultProps=x3;const w3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ou(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!w3.test(a)?i[a]=`${c}px`:i[a]=c}}const b3={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function UT(e){const{map:t,mapLib:i}=yt.useContext(vh),a=yt.useRef({props:e});a.current.props=e;const c=yt.useMemo(()=>{let d=!1;yt.Children.forEach(e.children,b=>{b&&(d=!0)});const y={...e,element:d?document.createElement("div"):null},l=new i.Marker(y).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",b=>{var w,C;(C=(w=a.current.props).onClick)===null||C===void 0||C.call(w,{type:"click",target:l,originalEvent:b})}),l.on("dragstart",b=>{var w,C;const E=b;E.lngLat=c.getLngLat(),(C=(w=a.current.props).onDragStart)===null||C===void 0||C.call(w,E)}),l.on("drag",b=>{var w,C;const E=b;E.lngLat=c.getLngLat(),(C=(w=a.current.props).onDrag)===null||C===void 0||C.call(w,E)}),l.on("dragend",b=>{var w,C;const E=b;E.lngLat=c.getLngLat(),(C=(w=a.current.props).onDragEnd)===null||C===void 0||C.call(w,E)}),l},[]);return yt.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),yt.useEffect(()=>{Ou(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!c3(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),s1.createPortal(e.children,c.getElement())}UT.defaultProps=b3;const E3=yt.memo(UT);function Ub(e){return new Set(e?e.trim().split(/\s+/):[])}function S3(e){const{map:t,mapLib:i}=yt.useContext(vh),a=yt.useMemo(()=>document.createElement("div"),[]),c=yt.useRef({props:e});c.current.props=e;const d=yt.useMemo(()=>{const y={...e},l=new i.Popup(y).setLngLat([e.longitude,e.latitude]);return l.once("open",b=>{var w,C;(C=(w=c.current.props).onOpen)===null||C===void 0||C.call(w,b)}),l},[]);if(yt.useEffect(()=>{const y=l=>{var b,w;(w=(b=c.current.props).onClose)===null||w===void 0||w.call(b,l)};return d.on("close",y),d.setDOMContent(a).addTo(t.getMap()),()=>{d.off("close",y),d.isOpen()&&d.remove()}},[]),yt.useEffect(()=>{Ou(d.getElement(),e.style)},[e.style]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!Ho(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const y=Ub(d.options.className),l=Ub(e.className);for(const b of y)l.has(b)||d.removeClassName(b);for(const b of l)y.has(b)||d.addClassName(b);d.options.className=e.className}return s1.createPortal(e.children,a)}yt.memo(S3);function vd(e,t,i,a){const c=yt.useContext(vh),d=yt.useMemo(()=>e(c),[]);return yt.useEffect(()=>{const y=a||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,y==null?void 0:y.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function T3(e){const t=vd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return yt.useEffect(()=>{Ou(t._container,e.style)},[e.style]),null}yt.memo(T3);function C3(e){const t=vd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return yt.useEffect(()=>{Ou(t._controlContainer,e.style)},[e.style]),null}yt.memo(C3);const $T=yt.forwardRef((e,t)=>{const i=yt.useRef({props:e}),a=vd(({mapLib:c})=>{const d=new c.GeolocateControl(e),y=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||y(l)},d.on("geolocate",l=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return i.current.props=e,yt.useImperativeHandle(t,()=>({trigger:()=>a.trigger()}),[]),yt.useEffect(()=>{Ou(a._container,e.style)},[e.style]),null});$T.displayName="GeolocateControl";const I3=yt.memo($T);function A3(e){const t=vd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return yt.useEffect(()=>{Ou(t._container,e.style)},[e.style]),null}const P3=yt.memo(A3),M3={unit:"metric",maxWidth:100};function VT(e){const t=vd(({mapLib:i})=>new i.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),yt.useEffect(()=>{Ou(t._container,e.style)},[e.style]),null}VT.defaultProps=M3;yt.memo(VT);function Em(e,t){if(!e)throw new Error(t)}let k3=0;function z3(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function L3(e,t,i){Em(t.id===i.id,"source id changed"),Em(t.type===i.type,"source type changed");let a="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!Ho(i[y],t[y])&&(a=y,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((d==="canvas"||d==="video")&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if(d==="vector"&&"setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function R3(e){const t=yt.useContext(vh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-source-${k3++}`,[]);yt.useEffect(()=>{if(t){const y=()=>setTimeout(()=>a(l=>l+1),0);return t.on("styledata",y),y(),()=>{var l;if(t.off("styledata",y),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?L3(d,e,i.current):d=z3(t,c,e),i.current=e,d&&yt.Children.map(e.children,y=>y&&yt.cloneElement(y,{source:c}))||null}function O3(e,t,i,a){if(Em(i.id===a.id,"layer id changed"),Em(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:d={},filter:y,minzoom:l,maxzoom:b,beforeId:w}=i;if(w!==a.beforeId&&e.moveLayer(t,w),c!==a.layout){const C=a.layout||{};for(const E in c)Ho(c[E],C[E])||e.setLayoutProperty(t,E,c[E]);for(const E in C)c.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(d!==a.paint){const C=a.paint||{};for(const E in d)Ho(d[E],C[E])||e.setPaintProperty(t,E,d[E]);for(const E in C)d.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}Ho(y,a.filter)||e.setFilter(t,y),(l!==a.minzoom||b!==a.maxzoom)&&e.setLayerZoomRange(t,l,b)}function F3(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let j3=0;function D3(e){const t=yt.useContext(vh).map.getMap(),i=yt.useRef(e),[,a]=yt.useState(0),c=yt.useMemo(()=>e.id||`jsx-layer-${j3++}`,[]);if(yt.useEffect(()=>{if(t){const y=()=>a(l=>l+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{O3(t,c,e,i.current)}catch(y){console.warn(y)}else F3(t,c,e);return i.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function $b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function Kt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?$b(Object(i),!0).forEach(function(a){U3(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$b(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Sm(e){return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function B3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vb(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N3(e,t,i){return t&&Vb(e.prototype,t),i&&Vb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function U3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l1(e,t){return V3(e)||Z3(e,t)||GT(e,t)||H3()}function vg(e){return $3(e)||G3(e)||GT(e)||W3()}function $3(e){if(Array.isArray(e))return xv(e)}function V3(e){if(Array.isArray(e))return e}function G3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z3(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,d=!1,y,l;try{for(i=i.call(e);!(c=(y=i.next()).done)&&(a.push(y.value),!(t&&a.length===t));c=!0);}catch(b){d=!0,l=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw l}}return a}}function GT(e,t){if(e){if(typeof e=="string")return xv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xv(e,t)}}function xv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function W3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Gb=function(){},u1={},ZT={},WT=null,HT={mark:Gb,measure:Gb};try{typeof window<"u"&&(u1=window),typeof document<"u"&&(ZT=document),typeof MutationObserver<"u"&&(WT=MutationObserver),typeof performance<"u"&&(HT=performance)}catch{}var X3=u1.navigator||{},Zb=X3.userAgent,Wb=Zb===void 0?"":Zb,kl=u1,pr=ZT,Hb=WT,_p=HT;kl.document;var Fa=!!pr.documentElement&&!!pr.head&&typeof pr.addEventListener=="function"&&typeof pr.createElement=="function",XT=~Wb.indexOf("MSIE")||~Wb.indexOf("Trident/"),ka="___FONT_AWESOME___",wv=16,qT="fa",KT="svg-inline--fa",Pu="data-fa-i2svg",bv="data-fa-pseudo-element",q3="data-fa-pseudo-element-pending",c1="data-prefix",h1="data-icon",Xb="fontawesome-i2svg",K3="async",Y3=["HTML","HEAD","STYLE","SCRIPT"],YT=function(){try{return!0}catch{return!1}}(),f1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Tm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},JT={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},J3={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},Q3=/fa[srltdbk\-\ ]/,QT="fa-layers-text",e4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,t4={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},eC=[1,2,3,4,5,6,7,8,9,10],n4=eC.concat([11,12,13,14,15,16,17,18,19,20]),r4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],wu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},i4=[].concat(vg(Object.keys(Tm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",wu.GROUP,wu.SWAP_OPACITY,wu.PRIMARY,wu.SECONDARY]).concat(eC.map(function(e){return"".concat(e,"x")})).concat(n4.map(function(e){return"w-".concat(e)})),tC=kl.FontAwesomeConfig||{};function o4(e){var t=pr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function s4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(pr&&typeof pr.querySelector=="function"){var a4=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];a4.forEach(function(e){var t=l1(e,2),i=t[0],a=t[1],c=s4(o4(i));c!=null&&(tC[a]=c)})}var l4={familyPrefix:qT,styleDefault:"solid",replacementClass:KT,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},jf=Kt(Kt({},l4),tC);jf.autoReplaceSvg||(jf.observeMutations=!1);var pn={};Object.keys(jf).forEach(function(e){Object.defineProperty(pn,e,{enumerable:!0,set:function(i){jf[e]=i,Vp.forEach(function(a){return a(pn)})},get:function(){return jf[e]}})});kl.FontAwesomeConfig=pn;var Vp=[];function u4(e){return Vp.push(e),function(){Vp.splice(Vp.indexOf(e),1)}}var cl=wv,Zs={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function c4(e){if(!(!e||!Fa)){var t=pr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=pr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var d=i[c],y=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(a=d)}return pr.head.insertBefore(t,a),e}}var h4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ad(){for(var e=12,t="";e-- >0;)t+=h4[Math.random()*62|0];return t}function _h(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function d1(e){return e.classList?_h(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function nC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(nC(e[i]),'" ')},"").trim()}function _g(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function p1(e){return e.size!==Zs.size||e.x!==Zs.x||e.y!==Zs.y||e.rotate!==Zs.rotate||e.flipX||e.flipY}function d4(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(y," ").concat(l)},w={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:b,path:w}}function p4(e){var t=e.transform,i=e.width,a=i===void 0?wv:i,c=e.height,d=c===void 0?wv:c,y=e.startCentered,l=y===void 0?!1:y,b="";return l&&XT?b+="translate(".concat(t.x/cl-a/2,"em, ").concat(t.y/cl-d/2,"em) "):l?b+="translate(calc(-50% + ".concat(t.x/cl,"em), calc(-50% + ").concat(t.y/cl,"em)) "):b+="translate(".concat(t.x/cl,"em, ").concat(t.y/cl,"em) "),b+="scale(".concat(t.size/cl*(t.flipX?-1:1),", ").concat(t.size/cl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var m4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function rC(){var e=qT,t=KT,i=pn.familyPrefix,a=pn.replacementClass,c=m4;if(i!==e||a!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(y,"--".concat(i,"-")).replace(l,".".concat(a))}return c}var qb=!1;function Ky(){pn.autoAddCss&&!qb&&(c4(rC()),qb=!0)}var g4={mixout:function(){return{dom:{css:rC,insertCss:Ky}}},hooks:function(){return{beforeDOMElementCreation:function(){Ky()},beforeI2svg:function(){Ky()}}}},za=kl||{};za[ka]||(za[ka]={});za[ka].styles||(za[ka].styles={});za[ka].hooks||(za[ka].hooks={});za[ka].shims||(za[ka].shims=[]);var _s=za[ka],iC=[],y4=function e(){pr.removeEventListener("DOMContentLoaded",e),Cm=1,iC.map(function(t){return t()})},Cm=!1;Fa&&(Cm=(pr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(pr.readyState),Cm||pr.addEventListener("DOMContentLoaded",y4));function v4(e){Fa&&(Cm?setTimeout(e,0):iC.push(e))}function _d(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?nC(e):"<".concat(t," ").concat(f4(a),">").concat(d.map(_d).join(""),"</").concat(t,">")}function Kb(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var _4=function(t,i){return function(a,c,d,y){return t.call(i,a,c,d,y)}},Yy=function(t,i,a,c){var d=Object.keys(t),y=d.length,l=c!==void 0?_4(i,c):i,b,w,C;for(a===void 0?(b=1,C=t[d[0]]):(b=0,C=a);b<y;b++)w=d[b],C=l(C,t[w],w,t);return C};function x4(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function Ev(e){var t=x4(e);return t.length===1?t[0].toString(16):null}function w4(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function Yb(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function Sv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,d=Yb(t);typeof _s.hooks.addPack=="function"&&!c?_s.hooks.addPack(e,Yb(t)):_s.styles[e]=Kt(Kt({},_s.styles[e]||{}),d),e==="fas"&&Sv("fa",t)}var Df=_s.styles,b4=_s.shims,E4=Object.values(JT),m1=null,oC={},sC={},aC={},lC={},uC={},S4=Object.keys(f1);function T4(e){return~i4.indexOf(e)}function C4(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!T4(c)?c:null}var cC=function(){var t=function(d){return Yy(Df,function(y,l,b){return y[b]=Yy(l,d,{}),y},{})};oC=t(function(c,d,y){if(d[3]&&(c[d[3]]=y),d[2]){var l=d[2].filter(function(b){return typeof b=="number"});l.forEach(function(b){c[b.toString(16)]=y})}return c}),sC=t(function(c,d,y){if(c[y]=y,d[2]){var l=d[2].filter(function(b){return typeof b=="string"});l.forEach(function(b){c[b]=y})}return c}),uC=t(function(c,d,y){var l=d[2];return c[y]=y,l.forEach(function(b){c[b]=y}),c});var i="far"in Df||pn.autoFetchSvg,a=Yy(b4,function(c,d){var y=d[0],l=d[1],b=d[2];return l==="far"&&!i&&(l="fas"),typeof y=="string"&&(c.names[y]={prefix:l,iconName:b}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:l,iconName:b}),c},{names:{},unicodes:{}});aC=a.names,lC=a.unicodes,m1=xg(pn.styleDefault)};u4(function(e){m1=xg(e.styleDefault)});cC();function g1(e,t){return(oC[e]||{})[t]}function I4(e,t){return(sC[e]||{})[t]}function Vc(e,t){return(uC[e]||{})[t]}function hC(e){return aC[e]||{prefix:null,iconName:null}}function A4(e){var t=lC[e],i=g1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function zl(){return m1}var y1=function(){return{prefix:null,iconName:null,rest:[]}};function xg(e){var t=f1[e],i=Tm[e]||Tm[t],a=e in _s.styles?e:null;return i||a||null}function wg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,a=i===void 0?!1:i,c=null,d=e.reduce(function(y,l){var b=C4(pn.familyPrefix,l);if(Df[l]?(l=E4.includes(l)?J3[l]:l,c=l,y.prefix=l):S4.indexOf(l)>-1?(c=l,y.prefix=xg(l)):b?y.iconName=b:l!==pn.replacementClass&&y.rest.push(l),!a&&y.prefix&&y.iconName){var w=c==="fa"?hC(y.iconName):{},C=Vc(y.prefix,y.iconName);w.prefix&&(c=null),y.iconName=w.iconName||C||y.iconName,y.prefix=w.prefix||y.prefix,y.prefix==="far"&&!Df.far&&Df.fas&&!pn.autoFetchSvg&&(y.prefix="fas")}return y},y1());return(d.prefix==="fa"||c==="fa")&&(d.prefix=zl()||"fas"),d}var P4=function(){function e(){B3(this,e),this.definitions={}}return N3(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(l){i.definitions[l]=Kt(Kt({},i.definitions[l]||{}),y[l]),Sv(l,y[l]);var b=JT[l];b&&Sv(b,y[l]),cC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(d){var y=c[d],l=y.prefix,b=y.iconName,w=y.icon,C=w[2];i[l]||(i[l]={}),C.length>0&&C.forEach(function(E){typeof E=="string"&&(i[l][E]=w)}),i[l][b]=w}),i}}]),e}(),Jb=[],Gc={},eh={},M4=Object.keys(eh);function k4(e,t){var i=t.mixoutsTo;return Jb=e,Gc={},Object.keys(eh).forEach(function(a){M4.indexOf(a)===-1&&delete eh[a]}),Jb.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(i[y]=c[y]),Sm(c[y])==="object"&&Object.keys(c[y]).forEach(function(l){i[y]||(i[y]={}),i[y][l]=c[y][l]})}),a.hooks){var d=a.hooks();Object.keys(d).forEach(function(y){Gc[y]||(Gc[y]=[]),Gc[y].push(d[y])})}a.provides&&a.provides(eh)}),i}function Tv(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var d=Gc[e]||[];return d.forEach(function(y){t=y.apply(null,[t].concat(a))}),t}function Mu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=Gc[e]||[];c.forEach(function(d){d.apply(null,i)})}function La(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return eh[e]?eh[e].apply(null,t):void 0}function Cv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||zl();if(t)return t=Vc(i,t)||t,Kb(fC.definitions,i,t)||Kb(_s.styles,i,t)}var fC=new P4,z4=function(){pn.autoReplaceSvg=!1,pn.observeMutations=!1,Mu("noAuto")},L4={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Fa?(Mu("beforeI2svg",t),La("pseudoElements2svg",t),La("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;pn.autoReplaceSvg===!1&&(pn.autoReplaceSvg=!0),pn.observeMutations=!0,v4(function(){O4({autoReplaceSvgRoot:i}),Mu("watch",t)})}},R4={icon:function(t){if(t===null)return null;if(Sm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Vc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=xg(t[0]);return{prefix:a,iconName:Vc(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(pn.familyPrefix,"-"))>-1||t.match(Q3))){var c=wg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||zl(),iconName:Vc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=zl();return{prefix:d,iconName:Vc(d,t)||t}}}},Ro={noAuto:z4,config:pn,dom:L4,parse:R4,library:fC,findIconDefinition:Cv,toHtml:_d},O4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?pr:i;(Object.keys(_s.styles).length>0||pn.autoFetchSvg)&&Fa&&pn.autoReplaceSvg&&Ro.dom.i2svg({node:a})};function bg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return _d(a)})}}),Object.defineProperty(e,"node",{get:function(){if(Fa){var a=pr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function F4(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,d=e.styles,y=e.transform;if(p1(y)&&i.found&&!a.found){var l=i.width,b=i.height,w={x:l/b/2,y:.5};c.style=_g(Kt(Kt({},d),{},{"transform-origin":"".concat(w.x+y.x/16,"em ").concat(w.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function j4(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,d=e.symbol,y=d===!0?"".concat(t,"-").concat(pn.familyPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Kt(Kt({},c),{},{id:y}),children:a}]}]}function v1(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,d=e.iconName,y=e.transform,l=e.symbol,b=e.title,w=e.maskId,C=e.titleId,E=e.extra,z=e.watchable,O=z===void 0?!1:z,Q=a.found?a:i,K=Q.width,pe=Q.height,G=c==="fak",V=[pn.replacementClass,d?"".concat(pn.familyPrefix,"-").concat(d):""].filter(function(Z){return E.classes.indexOf(Z)===-1}).filter(function(Z){return Z!==""||!!Z}).concat(E.classes).join(" "),B={children:[],attributes:Kt(Kt({},E.attributes),{},{"data-prefix":c,"data-icon":d,class:V,role:E.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(K," ").concat(pe)})},oe=G&&!~E.classes.indexOf("fa-fw")?{width:"".concat(K/pe*16*.0625,"em")}:{};O&&(B.attributes[Pu]=""),b&&(B.children.push({tag:"title",attributes:{id:B.attributes["aria-labelledby"]||"title-".concat(C||ad())},children:[b]}),delete B.attributes.title);var W=Kt(Kt({},B),{},{prefix:c,iconName:d,main:i,mask:a,maskId:w,transform:y,symbol:l,styles:Kt(Kt({},oe),E.styles)}),D=a.found&&i.found?La("generateAbstractMask",W)||{children:[],attributes:{}}:La("generateAbstractIcon",W)||{children:[],attributes:{}},S=D.children,P=D.attributes;return W.children=S,W.attributes=P,l?j4(W):F4(W)}function Qb(e){var t=e.content,i=e.width,a=e.height,c=e.transform,d=e.title,y=e.extra,l=e.watchable,b=l===void 0?!1:l,w=Kt(Kt(Kt({},y.attributes),d?{title:d}:{}),{},{class:y.classes.join(" ")});b&&(w[Pu]="");var C=Kt({},y.styles);p1(c)&&(C.transform=p4({transform:c,startCentered:!0,width:i,height:a}),C["-webkit-transform"]=C.transform);var E=_g(C);E.length>0&&(w.style=E);var z=[];return z.push({tag:"span",attributes:w,children:[t]}),d&&z.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),z}function D4(e){var t=e.content,i=e.title,a=e.extra,c=Kt(Kt(Kt({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),d=_g(a.styles);d.length>0&&(c.style=d);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),i&&y.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),y}var Jy=_s.styles;function Iv(e){var t=e[0],i=e[1],a=e.slice(4),c=l1(a,1),d=c[0],y=null;return Array.isArray(d)?y={tag:"g",attributes:{class:"".concat(pn.familyPrefix,"-").concat(wu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(pn.familyPrefix,"-").concat(wu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(pn.familyPrefix,"-").concat(wu.PRIMARY),fill:"currentColor",d:d[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:y}}var B4={found:!1,width:512,height:512};function N4(e,t){!YT&&!pn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Av(e,t){var i=t;return t==="fa"&&pn.styleDefault!==null&&(t=zl()),new Promise(function(a,c){if(La("missingIconAbstract"),i==="fa"){var d=hC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&Jy[t]&&Jy[t][e]){var y=Jy[t][e];return a(Iv(y))}N4(e,t),a(Kt(Kt({},B4),{},{icon:pn.showMissingIcons&&e?La("missingIconAbstract")||{}:{}}))})}var e2=function(){},Pv=pn.measurePerformance&&_p&&_p.mark&&_p.measure?_p:{mark:e2,measure:e2},xf='FA "6.0.0"',U4=function(t){return Pv.mark("".concat(xf," ").concat(t," begins")),function(){return dC(t)}},dC=function(t){Pv.mark("".concat(xf," ").concat(t," ends")),Pv.measure("".concat(xf," ").concat(t),"".concat(xf," ").concat(t," begins"),"".concat(xf," ").concat(t," ends"))},_1={begin:U4,end:dC},Gp=function(){};function t2(e){var t=e.getAttribute?e.getAttribute(Pu):null;return typeof t=="string"}function $4(e){var t=e.getAttribute?e.getAttribute(c1):null,i=e.getAttribute?e.getAttribute(h1):null;return t&&i}function V4(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(pn.replacementClass)}function G4(){if(pn.autoReplaceSvg===!0)return Zp.replace;var e=Zp[pn.autoReplaceSvg];return e||Zp.replace}function Z4(e){return pr.createElementNS("http://www.w3.org/2000/svg",e)}function W4(e){return pr.createElement(e)}function pC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?Z4:W4:i;if(typeof e=="string")return pr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var d=e.children||[];return d.forEach(function(y){c.appendChild(pC(y,{ceFn:a}))}),c}function H4(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Zp={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(pC(c),i)}),i.getAttribute(Pu)===null&&pn.keepOriginalSource){var a=pr.createComment(H4(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~d1(i).indexOf(pn.replacementClass))return Zp.replace(t);var c=new RegExp("".concat(pn.familyPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var d=a[0].attributes.class.split(" ").reduce(function(l,b){return b===pn.replacementClass||b.match(c)?l.toSvg.push(b):l.toNode.push(b),l},{toNode:[],toSvg:[]});a[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var y=a.map(function(l){return _d(l)}).join(`
`);i.setAttribute(Pu,""),i.innerHTML=y}};function n2(e){e()}function mC(e,t){var i=typeof t=="function"?t:Gp;if(e.length===0)i();else{var a=n2;pn.mutateApproach===K3&&(a=kl.requestAnimationFrame||n2),a(function(){var c=G4(),d=_1.begin("mutate");e.map(c),d(),i()})}}var x1=!1;function gC(){x1=!0}function Mv(){x1=!1}var Im=null;function r2(e){if(Hb&&pn.observeMutations){var t=e.treeCallback,i=t===void 0?Gp:t,a=e.nodeCallback,c=a===void 0?Gp:a,d=e.pseudoElementsCallback,y=d===void 0?Gp:d,l=e.observeMutationsRoot,b=l===void 0?pr:l;Im=new Hb(function(w){if(!x1){var C=zl();_h(w).forEach(function(E){if(E.type==="childList"&&E.addedNodes.length>0&&!t2(E.addedNodes[0])&&(pn.searchPseudoElements&&y(E.target),i(E.target)),E.type==="attributes"&&E.target.parentNode&&pn.searchPseudoElements&&y(E.target.parentNode),E.type==="attributes"&&t2(E.target)&&~r4.indexOf(E.attributeName))if(E.attributeName==="class"&&$4(E.target)){var z=wg(d1(E.target)),O=z.prefix,Q=z.iconName;E.target.setAttribute(c1,O||C),Q&&E.target.setAttribute(h1,Q)}else V4(E.target)&&c(E.target)})}}),Fa&&Im.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function X4(){Im&&Im.disconnect()}function q4(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var d=c.split(":"),y=d[0],l=d.slice(1);return y&&l.length>0&&(a[y]=l.join(":").trim()),a},{})),i}function K4(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=wg(d1(e));return c.prefix||(c.prefix=zl()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&a.length>0&&(c.iconName=I4(c.prefix,e.innerText)||g1(c.prefix,Ev(e.innerText))),c}function Y4(e){var t=_h(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return pn.autoA11y&&(i?t["aria-labelledby"]="".concat(pn.replacementClass,"-title-").concat(a||ad()):(t["aria-hidden"]="true",t.focusable="false")),t}function J4(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Zs,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function i2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=K4(e),a=i.iconName,c=i.prefix,d=i.rest,y=Y4(e),l=Tv("parseNodeAttributes",{},e),b=t.styleParser?q4(e):[];return Kt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:Zs,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:y}},l)}var Q4=_s.styles;function yC(e){var t=pn.autoReplaceSvg==="nest"?i2(e,{styleParser:!1}):i2(e);return~t.extra.classes.indexOf(QT)?La("generateLayersText",e,t):La("generateSvgReplacementMutation",e,t)}function o2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Fa)return Promise.resolve();var i=pr.documentElement.classList,a=function(E){return i.add("".concat(Xb,"-").concat(E))},c=function(E){return i.remove("".concat(Xb,"-").concat(E))},d=pn.autoFetchSvg?Object.keys(f1):Object.keys(Q4),y=[".".concat(QT,":not([").concat(Pu,"])")].concat(d.map(function(C){return".".concat(C,":not([").concat(Pu,"])")})).join(", ");if(y.length===0)return Promise.resolve();var l=[];try{l=_h(e.querySelectorAll(y))}catch{}if(l.length>0)a("pending"),c("complete");else return Promise.resolve();var b=_1.begin("onTree"),w=l.reduce(function(C,E){try{var z=yC(E);z&&C.push(z)}catch(O){YT||O.name==="MissingIcon"&&console.error(O)}return C},[]);return new Promise(function(C,E){Promise.all(w).then(function(z){mC(z,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),b(),C()})}).catch(function(z){b(),E(z)})})}function e5(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;yC(e).then(function(i){i&&mC([i],t)})}function t5(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:Cv(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:Cv(c||{})),e(a,Kt(Kt({},i),{},{mask:c}))}}var n5=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?Zs:a,d=i.symbol,y=d===void 0?!1:d,l=i.mask,b=l===void 0?null:l,w=i.maskId,C=w===void 0?null:w,E=i.title,z=E===void 0?null:E,O=i.titleId,Q=O===void 0?null:O,K=i.classes,pe=K===void 0?[]:K,G=i.attributes,V=G===void 0?{}:G,B=i.styles,oe=B===void 0?{}:B;if(t){var W=t.prefix,D=t.iconName,S=t.icon;return bg(Kt({type:"icon"},t),function(){return Mu("beforeDOMElementCreation",{iconDefinition:t,params:i}),pn.autoA11y&&(z?V["aria-labelledby"]="".concat(pn.replacementClass,"-title-").concat(Q||ad()):(V["aria-hidden"]="true",V.focusable="false")),v1({icons:{main:Iv(S),mask:b?Iv(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:W,iconName:D,transform:Kt(Kt({},Zs),c),symbol:y,title:z,maskId:C,titleId:Q,extra:{attributes:V,styles:oe,classes:pe}})})}},r5={mixout:function(){return{icon:t5(n5)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=o2,i.nodeCallback=e5,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?pr:a,d=i.callback,y=d===void 0?function(){}:d;return o2(c,y)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,d=a.title,y=a.titleId,l=a.prefix,b=a.transform,w=a.symbol,C=a.mask,E=a.maskId,z=a.extra;return new Promise(function(O,Q){Promise.all([Av(c,l),C.iconName?Av(C.iconName,C.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(K){var pe=l1(K,2),G=pe[0],V=pe[1];O([i,v1({icons:{main:G,mask:V},prefix:l,iconName:c,transform:b,symbol:w,maskId:E,title:d,titleId:y,extra:z,watchable:!0})])}).catch(Q)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,d=i.main,y=i.transform,l=i.styles,b=_g(l);b.length>0&&(c.style=b);var w;return p1(y)&&(w=La("generateAbstractTransformGrouping",{main:d,transform:y,containerWidth:d.width,iconWidth:d.width})),a.push(w||d.icon),{children:a,attributes:c}}}},i5={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,d=c===void 0?[]:c;return bg({type:"layer"},function(){Mu("beforeDOMElementCreation",{assembler:i,params:a});var y=[];return i(function(l){Array.isArray(l)?l.map(function(b){y=y.concat(b.abstract)}):y=y.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(pn.familyPrefix,"-layers")].concat(vg(d)).join(" ")},children:y}]})}}}},o5={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,d=c===void 0?null:c,y=a.classes,l=y===void 0?[]:y,b=a.attributes,w=b===void 0?{}:b,C=a.styles,E=C===void 0?{}:C;return bg({type:"counter",content:i},function(){return Mu("beforeDOMElementCreation",{content:i,params:a}),D4({content:i.toString(),title:d,extra:{attributes:w,styles:E,classes:["".concat(pn.familyPrefix,"-layers-counter")].concat(vg(l))}})})}}}},s5={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,d=c===void 0?Zs:c,y=a.title,l=y===void 0?null:y,b=a.classes,w=b===void 0?[]:b,C=a.attributes,E=C===void 0?{}:C,z=a.styles,O=z===void 0?{}:z;return bg({type:"text",content:i},function(){return Mu("beforeDOMElementCreation",{content:i,params:a}),Qb({content:i,transform:Kt(Kt({},Zs),d),title:l,extra:{attributes:E,styles:O,classes:["".concat(pn.familyPrefix,"-layers-text")].concat(vg(w))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,d=a.transform,y=a.extra,l=null,b=null;if(XT){var w=parseInt(getComputedStyle(i).fontSize,10),C=i.getBoundingClientRect();l=C.width/w,b=C.height/w}return pn.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([i,Qb({content:i.innerHTML,width:l,height:b,transform:d,title:c,extra:y,watchable:!0})])}}},a5=new RegExp('"',"ug"),s2=[1105920,1112319];function l5(e){var t=e.replace(a5,""),i=w4(t,0),a=i>=s2[0]&&i<=s2[1],c=t.length===2?t[0]===t[1]:!1;return{value:Ev(c?t[0]:t),isSecondary:a||c}}function a2(e,t){var i="".concat(q3).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var d=_h(e.children),y=d.filter(function(D){return D.getAttribute(bv)===t})[0],l=kl.getComputedStyle(e,t),b=l.getPropertyValue("font-family").match(e4),w=l.getPropertyValue("font-weight"),C=l.getPropertyValue("content");if(y&&!b)return e.removeChild(y),a();if(b&&C!=="none"&&C!==""){var E=l.getPropertyValue("content"),z=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Tm[b[2].toLowerCase()]:t4[w],O=l5(E),Q=O.value,K=O.isSecondary,pe=b[0].startsWith("FontAwesome"),G=g1(z,Q),V=G;if(pe){var B=A4(Q);B.iconName&&B.prefix&&(G=B.iconName,z=B.prefix)}if(G&&!K&&(!y||y.getAttribute(c1)!==z||y.getAttribute(h1)!==V)){e.setAttribute(i,V),y&&e.removeChild(y);var oe=J4(),W=oe.extra;W.attributes[bv]=t,Av(G,z).then(function(D){var S=v1(Kt(Kt({},oe),{},{icons:{main:D,mask:y1()},prefix:z,iconName:V,extra:W,watchable:!0})),P=pr.createElement("svg");t==="::before"?e.insertBefore(P,e.firstChild):e.appendChild(P),P.outerHTML=S.map(function(Z){return _d(Z)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function u5(e){return Promise.all([a2(e,"::before"),a2(e,"::after")])}function c5(e){return e.parentNode!==document.head&&!~Y3.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(bv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function l2(e){if(Fa)return new Promise(function(t,i){var a=_h(e.querySelectorAll("*")).filter(c5).map(u5),c=_1.begin("searchPseudoElements");gC(),Promise.all(a).then(function(){c(),Mv(),t()}).catch(function(){c(),Mv(),i()})})}var h5={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=l2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?pr:a;pn.searchPseudoElements&&l2(c)}}},u2=!1,f5={mixout:function(){return{dom:{unwatch:function(){gC(),u2=!0}}}},hooks:function(){return{bootstrap:function(){r2(Tv("mutationObserverCallbacks",{}))},noAuto:function(){X4()},watch:function(i){var a=i.observeMutationsRoot;u2?Mv():r2(Tv("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},c2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var d=c.toLowerCase().split("-"),y=d[0],l=d.slice(1).join("-");if(y&&l==="h")return a.flipX=!0,a;if(y&&l==="v")return a.flipY=!0,a;if(l=parseFloat(l),isNaN(l))return a;switch(y){case"grow":a.size=a.size+l;break;case"shrink":a.size=a.size-l;break;case"left":a.x=a.x-l;break;case"right":a.x=a.x+l;break;case"up":a.y=a.y-l;break;case"down":a.y=a.y+l;break;case"rotate":a.rotate=a.rotate+l;break}return a},i)},d5={mixout:function(){return{parse:{transform:function(i){return c2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=c2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,d=i.containerWidth,y=i.iconWidth,l={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),C="rotate(".concat(c.rotate," 0 0)"),E={transform:"".concat(b," ").concat(w," ").concat(C)},z={transform:"translate(".concat(y/2*-1," -256)")},O={outer:l,inner:E,path:z};return{tag:"g",attributes:Kt({},O.outer),children:[{tag:"g",attributes:Kt({},O.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:Kt(Kt({},a.icon.attributes),O.path)}]}]}}}},Qy={x:0,y:0,width:"100%",height:"100%"};function h2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function p5(e){return e.tag==="g"?e.children:[e]}var m5={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),d=c?wg(c.split(" ").map(function(y){return y.trim()})):y1();return d.prefix||(d.prefix=zl()),i.mask=d,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,d=i.main,y=i.mask,l=i.maskId,b=i.transform,w=d.width,C=d.icon,E=y.width,z=y.icon,O=d4({transform:b,containerWidth:E,iconWidth:w}),Q={tag:"rect",attributes:Kt(Kt({},Qy),{},{fill:"white"})},K=C.children?{children:C.children.map(h2)}:{},pe={tag:"g",attributes:Kt({},O.inner),children:[h2(Kt({tag:C.tag,attributes:Kt(Kt({},C.attributes),O.path)},K))]},G={tag:"g",attributes:Kt({},O.outer),children:[pe]},V="mask-".concat(l||ad()),B="clip-".concat(l||ad()),oe={tag:"mask",attributes:Kt(Kt({},Qy),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Q,G]},W={tag:"defs",children:[{tag:"clipPath",attributes:{id:B},children:p5(z)},oe]};return a.push(W,{tag:"rect",attributes:Kt({fill:"currentColor","clip-path":"url(#".concat(B,")"),mask:"url(#".concat(V,")")},Qy)}),{children:a,attributes:c}}}},g5={provides:function(t){var i=!1;kl.matchMedia&&(i=kl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:Kt(Kt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Kt(Kt({},d),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Kt(Kt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Kt(Kt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Kt(Kt({},y),{},{values:"1;0;1;1;0;1;"})}),a.push(l),a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Kt(Kt({},y),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:Kt(Kt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Kt(Kt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},y5={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},v5=[g4,r5,i5,o5,s5,h5,f5,d5,m5,g5,y5];k4(v5,{mixoutsTo:Ro});Ro.noAuto;Ro.config;Ro.library;Ro.dom;var kv=Ro.parse;Ro.findIconDefinition;Ro.toHtml;var _5=Ro.icon;Ro.layer;Ro.text;Ro.counter;var vC={exports:{}},x5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",w5=x5,b5=w5;function _C(){}function xC(){}xC.resetWarningCache=_C;var E5=function(){function e(a,c,d,y,l,b){if(b!==b5){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xC,resetWarningCache:_C};return i.PropTypes=i,i};vC.exports=E5();var S5=vC.exports;const Zn=fd(S5);function f2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function xl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(i),!0).forEach(function(a){Zc(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Am(e){return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function Zc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function T5(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function wC(e,t){if(e==null)return{};var i=T5(e,t),a,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)a=d[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function zv(e){return C5(e)||I5(e)||A5(e)||P5()}function C5(e){if(Array.isArray(e))return Lv(e)}function I5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A5(e,t){if(e){if(typeof e=="string")return Lv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Lv(e,t)}}function Lv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function P5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5(e){var t,i=e.beat,a=e.fade,c=e.flash,d=e.spin,y=e.spinPulse,l=e.spinReverse,b=e.pulse,w=e.fixedWidth,C=e.inverse,E=e.border,z=e.listItem,O=e.flip,Q=e.size,K=e.rotation,pe=e.pull,G=(t={"fa-beat":i,"fa-fade":a,"fa-flash":c,"fa-spin":d,"fa-spin-reverse":l,"fa-spin-pulse":y,"fa-pulse":b,"fa-fw":w,"fa-inverse":C,"fa-border":E,"fa-li":z,"fa-flip-horizontal":O==="horizontal"||O==="both","fa-flip-vertical":O==="vertical"||O==="both"},Zc(t,"fa-".concat(Q),typeof Q<"u"&&Q!==null),Zc(t,"fa-rotate-".concat(K),typeof K<"u"&&K!==null&&K!==0),Zc(t,"fa-pull-".concat(pe),typeof pe<"u"&&pe!==null),Zc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(G).map(function(V){return G[V]?V:null}).filter(function(V){return V})}function k5(e){return e=e-0,e===e}function bC(e){return k5(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var z5=["style"];function L5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function R5(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=bC(i.slice(0,a)),d=i.slice(a+1).trim();return c.startsWith("webkit")?t[L5(c)]=d:t[c]=d,t},{})}function EC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(b){return EC(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var C=t.attributes[w];switch(w){case"class":b.attrs.className=C,delete t.attributes.class;break;case"style":b.attrs.style=R5(C);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=C:b.attrs[bC(w)]=C}return b},{attrs:{}}),d=i.style,y=d===void 0?{}:d,l=wC(i,z5);return c.attrs.style=xl(xl({},c.attrs.style),y),e.apply(void 0,[t.tag,xl(xl({},c.attrs),l)].concat(zv(a)))}var SC=!1;try{SC=!0}catch{}function O5(){if(!SC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function d2(e){if(e&&Am(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(kv.icon)return kv.icon(e);if(e===null)return null;if(e&&Am(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function e0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Zc({},e,t):{}}var F5=["forwardedRef"];function Xs(e){var t=e.forwardedRef,i=wC(e,F5),a=i.icon,c=i.mask,d=i.symbol,y=i.className,l=i.title,b=i.titleId,w=d2(a),C=e0("classes",[].concat(zv(M5(i)),zv(y.split(" ")))),E=e0("transform",typeof i.transform=="string"?kv.transform(i.transform):i.transform),z=e0("mask",d2(c)),O=_5(w,xl(xl(xl(xl({},C),E),z),{},{symbol:d,title:l,titleId:b}));if(!O)return O5("Could not find icon",w),null;var Q=O.abstract,K={ref:t};return Object.keys(i).forEach(function(pe){Xs.defaultProps.hasOwnProperty(pe)||(K[pe]=i[pe])}),j5(Q[0],K)}Xs.displayName="FontAwesomeIcon";Xs.propTypes={beat:Zn.bool,border:Zn.bool,className:Zn.string,fade:Zn.bool,flash:Zn.bool,mask:Zn.oneOfType([Zn.object,Zn.array,Zn.string]),fixedWidth:Zn.bool,inverse:Zn.bool,flip:Zn.oneOf(["horizontal","vertical","both"]),icon:Zn.oneOfType([Zn.object,Zn.array,Zn.string]),listItem:Zn.bool,pull:Zn.oneOf(["right","left"]),pulse:Zn.bool,rotation:Zn.oneOf([0,90,180,270]),size:Zn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Zn.bool,spinPulse:Zn.bool,spinReverse:Zn.bool,symbol:Zn.oneOfType([Zn.bool,Zn.string]),title:Zn.string,transform:Zn.oneOfType([Zn.string,Zn.object]),swapOpacity:Zn.bool};Xs.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var j5=EC.bind(null,zE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var D5={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},B5=D5,Rv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},N5={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function xp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var TC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,d){function y(w,C){if(!c[w]){if(!a[w]){var E=typeof xp=="function"&&xp;if(!C&&E)return E(w,!0);if(l)return l(w,!0);var z=new Error("Cannot find module '"+w+"'");throw z.code="MODULE_NOT_FOUND",z}var O=c[w]={exports:{}};a[w][0].call(O.exports,function(Q){var K=a[w][1][Q];return y(K||Q)},O,O.exports,i,a,c,d)}return c[w].exports}for(var l=typeof xp=="function"&&xp,b=0;b<d.length;b++)y(d[b]);return y}return i}()({1:[function(i,a,c){c.byteLength=z,c.toByteArray=Q,c.fromByteArray=G;for(var d=[],y=[],l=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,C=b.length;w<C;++w)d[w]=b[w],y[b.charCodeAt(w)]=w;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function E(V){var B=V.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=V.indexOf("=");oe===-1&&(oe=B);var W=oe===B?0:4-oe%4;return[oe,W]}function z(V){var B=E(V),oe=B[0],W=B[1];return(oe+W)*3/4-W}function O(V,B,oe){return(B+oe)*3/4-oe}function Q(V){var B,oe=E(V),W=oe[0],D=oe[1],S=new l(O(V,W,D)),P=0,Z=D>0?W-4:W,J;for(J=0;J<Z;J+=4)B=y[V.charCodeAt(J)]<<18|y[V.charCodeAt(J+1)]<<12|y[V.charCodeAt(J+2)]<<6|y[V.charCodeAt(J+3)],S[P++]=B>>16&255,S[P++]=B>>8&255,S[P++]=B&255;return D===2&&(B=y[V.charCodeAt(J)]<<2|y[V.charCodeAt(J+1)]>>4,S[P++]=B&255),D===1&&(B=y[V.charCodeAt(J)]<<10|y[V.charCodeAt(J+1)]<<4|y[V.charCodeAt(J+2)]>>2,S[P++]=B>>8&255,S[P++]=B&255),S}function K(V){return d[V>>18&63]+d[V>>12&63]+d[V>>6&63]+d[V&63]}function pe(V,B,oe){for(var W,D=[],S=B;S<oe;S+=3)W=(V[S]<<16&16711680)+(V[S+1]<<8&65280)+(V[S+2]&255),D.push(K(W));return D.join("")}function G(V){for(var B,oe=V.length,W=oe%3,D=[],S=16383,P=0,Z=oe-W;P<Z;P+=S)D.push(pe(V,P,P+S>Z?Z:P+S));return W===1?(B=V[oe-1],D.push(d[B>>2]+d[B<<4&63]+"==")):W===2&&(B=(V[oe-2]<<8)+V[oe-1],D.push(d[B>>10]+d[B>>4&63]+d[B<<2&63]+"=")),D.join("")}},{}],2:[function(i,a,c){(function(d){(function(){var y=i("base64-js"),l=i("ieee754");c.Buffer=E,c.SlowBuffer=W,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,E.TYPED_ARRAY_SUPPORT=w(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function C(Se){if(Se>b)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var F=new Uint8Array(Se);return F.__proto__=E.prototype,F}function E(Se,F,R){if(typeof Se=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return K(Se)}return z(Se,F,R)}typeof Symbol<"u"&&Symbol.species!=null&&E[Symbol.species]===E&&Object.defineProperty(E,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),E.poolSize=8192;function z(Se,F,R){if(typeof Se=="string")return pe(Se,F);if(ArrayBuffer.isView(Se))return G(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(Ft(Se,ArrayBuffer)||Se&&Ft(Se.buffer,ArrayBuffer))return V(Se,F,R);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=Se.valueOf&&Se.valueOf();if(ge!=null&&ge!==Se)return E.from(ge,F,R);var Ge=B(Se);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return E.from(Se[Symbol.toPrimitive]("string"),F,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}E.from=function(Se,F,R){return z(Se,F,R)},E.prototype.__proto__=Uint8Array.prototype,E.__proto__=Uint8Array;function O(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function Q(Se,F,R){return O(Se),Se<=0?C(Se):F!==void 0?typeof R=="string"?C(Se).fill(F,R):C(Se).fill(F):C(Se)}E.alloc=function(Se,F,R){return Q(Se,F,R)};function K(Se){return O(Se),C(Se<0?0:oe(Se)|0)}E.allocUnsafe=function(Se){return K(Se)},E.allocUnsafeSlow=function(Se){return K(Se)};function pe(Se,F){if((typeof F!="string"||F==="")&&(F="utf8"),!E.isEncoding(F))throw new TypeError("Unknown encoding: "+F);var R=D(Se,F)|0,ge=C(R),Ge=ge.write(Se,F);return Ge!==R&&(ge=ge.slice(0,Ge)),ge}function G(Se){for(var F=Se.length<0?0:oe(Se.length)|0,R=C(F),ge=0;ge<F;ge+=1)R[ge]=Se[ge]&255;return R}function V(Se,F,R){if(F<0||Se.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<F+(R||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return F===void 0&&R===void 0?ge=new Uint8Array(Se):R===void 0?ge=new Uint8Array(Se,F):ge=new Uint8Array(Se,F,R),ge.__proto__=E.prototype,ge}function B(Se){if(E.isBuffer(Se)){var F=oe(Se.length)|0,R=C(F);return R.length===0||Se.copy(R,0,0,F),R}if(Se.length!==void 0)return typeof Se.length!="number"||un(Se.length)?C(0):G(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return G(Se.data)}function oe(Se){if(Se>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return Se|0}function W(Se){return+Se!=Se&&(Se=0),E.alloc(+Se)}E.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==E.prototype},E.compare=function(F,R){if(Ft(F,Uint8Array)&&(F=E.from(F,F.offset,F.byteLength)),Ft(R,Uint8Array)&&(R=E.from(R,R.offset,R.byteLength)),!E.isBuffer(F)||!E.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===R)return 0;for(var ge=F.length,Ge=R.length,tt=0,We=Math.min(ge,Ge);tt<We;++tt)if(F[tt]!==R[tt]){ge=F[tt],Ge=R[tt];break}return ge<Ge?-1:Ge<ge?1:0},E.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(F,R){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return E.alloc(0);var ge;if(R===void 0)for(R=0,ge=0;ge<F.length;++ge)R+=F[ge].length;var Ge=E.allocUnsafe(R),tt=0;for(ge=0;ge<F.length;++ge){var We=F[ge];if(Ft(We,Uint8Array)&&(We=E.from(We)),!E.isBuffer(We))throw new TypeError('"list" argument must be an Array of Buffers');We.copy(Ge,tt),tt+=We.length}return Ge};function D(Se,F){if(E.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||Ft(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var R=Se.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&R===0)return 0;for(var Ge=!1;;)switch(F){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Nt(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return wn(Se).length;default:if(Ge)return ge?-1:Nt(Se).length;F=(""+F).toLowerCase(),Ge=!0}}E.byteLength=D;function S(Se,F,R){var ge=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,F>>>=0,R<=F))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return ke(this,F,R);case"utf8":case"utf-8":return ie(this,F,R);case"ascii":return _e(this,F,R);case"latin1":case"binary":return $e(this,F,R);case"base64":return re(this,F,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,F,R);default:if(ge)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),ge=!0}}E.prototype._isBuffer=!0;function P(Se,F,R){var ge=Se[F];Se[F]=Se[R],Se[R]=ge}E.prototype.swap16=function(){var F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<F;R+=2)P(this,R,R+1);return this},E.prototype.swap32=function(){var F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<F;R+=4)P(this,R,R+3),P(this,R+1,R+2);return this},E.prototype.swap64=function(){var F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<F;R+=8)P(this,R,R+7),P(this,R+1,R+6),P(this,R+2,R+5),P(this,R+3,R+4);return this},E.prototype.toString=function(){var F=this.length;return F===0?"":arguments.length===0?ie(this,0,F):S.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(F){if(!E.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:E.compare(this,F)===0},E.prototype.inspect=function(){var F="",R=c.INSPECT_MAX_BYTES;return F=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(F+=" ... "),"<Buffer "+F+">"},E.prototype.compare=function(F,R,ge,Ge,tt){if(Ft(F,Uint8Array)&&(F=E.from(F,F.offset,F.byteLength)),!E.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(R===void 0&&(R=0),ge===void 0&&(ge=F?F.length:0),Ge===void 0&&(Ge=0),tt===void 0&&(tt=this.length),R<0||ge>F.length||Ge<0||tt>this.length)throw new RangeError("out of range index");if(Ge>=tt&&R>=ge)return 0;if(Ge>=tt)return-1;if(R>=ge)return 1;if(R>>>=0,ge>>>=0,Ge>>>=0,tt>>>=0,this===F)return 0;for(var We=tt-Ge,se=ge-R,L=Math.min(We,se),j=this.slice(Ge,tt),be=F.slice(R,ge),Te=0;Te<L;++Te)if(j[Te]!==be[Te]){We=j[Te],se=be[Te];break}return We<se?-1:se<We?1:0};function Z(Se,F,R,ge,Ge){if(Se.length===0)return-1;if(typeof R=="string"?(ge=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,un(R)&&(R=Ge?0:Se.length-1),R<0&&(R=Se.length+R),R>=Se.length){if(Ge)return-1;R=Se.length-1}else if(R<0)if(Ge)R=0;else return-1;if(typeof F=="string"&&(F=E.from(F,ge)),E.isBuffer(F))return F.length===0?-1:J(Se,F,R,ge,Ge);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(Se,F,R):Uint8Array.prototype.lastIndexOf.call(Se,F,R):J(Se,[F],R,ge,Ge);throw new TypeError("val must be string, number or Buffer")}function J(Se,F,R,ge,Ge){var tt=1,We=Se.length,se=F.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(Se.length<2||F.length<2)return-1;tt=2,We/=2,se/=2,R/=2}function L(et,$t){return tt===1?et[$t]:et.readUInt16BE($t*tt)}var j;if(Ge){var be=-1;for(j=R;j<We;j++)if(L(Se,j)===L(F,be===-1?0:j-be)){if(be===-1&&(be=j),j-be+1===se)return be*tt}else be!==-1&&(j-=j-be),be=-1}else for(R+se>We&&(R=We-se),j=R;j>=0;j--){for(var Te=!0,Ke=0;Ke<se;Ke++)if(L(Se,j+Ke)!==L(F,Ke)){Te=!1;break}if(Te)return j}return-1}E.prototype.includes=function(F,R,ge){return this.indexOf(F,R,ge)!==-1},E.prototype.indexOf=function(F,R,ge){return Z(this,F,R,ge,!0)},E.prototype.lastIndexOf=function(F,R,ge){return Z(this,F,R,ge,!1)};function H(Se,F,R,ge){R=Number(R)||0;var Ge=Se.length-R;ge?(ge=Number(ge),ge>Ge&&(ge=Ge)):ge=Ge;var tt=F.length;ge>tt/2&&(ge=tt/2);for(var We=0;We<ge;++We){var se=parseInt(F.substr(We*2,2),16);if(un(se))return We;Se[R+We]=se}return We}function ye(Se,F,R,ge){return Ht(Nt(F,Se.length-R),Se,R,ge)}function ve(Se,F,R,ge){return Ht(Je(F),Se,R,ge)}function xe(Se,F,R,ge){return ve(Se,F,R,ge)}function te(Se,F,R,ge){return Ht(wn(F),Se,R,ge)}function ae(Se,F,R,ge){return Ht(sn(F,Se.length-R),Se,R,ge)}E.prototype.write=function(F,R,ge,Ge){if(R===void 0)Ge="utf8",ge=this.length,R=0;else if(ge===void 0&&typeof R=="string")Ge=R,ge=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(ge)?(ge=ge>>>0,Ge===void 0&&(Ge="utf8")):(Ge=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-R;if((ge===void 0||ge>tt)&&(ge=tt),F.length>0&&(ge<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");for(var We=!1;;)switch(Ge){case"hex":return H(this,F,R,ge);case"utf8":case"utf-8":return ye(this,F,R,ge);case"ascii":return ve(this,F,R,ge);case"latin1":case"binary":return xe(this,F,R,ge);case"base64":return te(this,F,R,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,F,R,ge);default:if(We)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),We=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(Se,F,R){return F===0&&R===Se.length?y.fromByteArray(Se):y.fromByteArray(Se.slice(F,R))}function ie(Se,F,R){R=Math.min(Se.length,R);for(var ge=[],Ge=F;Ge<R;){var tt=Se[Ge],We=null,se=tt>239?4:tt>223?3:tt>191?2:1;if(Ge+se<=R){var L,j,be,Te;switch(se){case 1:tt<128&&(We=tt);break;case 2:L=Se[Ge+1],(L&192)===128&&(Te=(tt&31)<<6|L&63,Te>127&&(We=Te));break;case 3:L=Se[Ge+1],j=Se[Ge+2],(L&192)===128&&(j&192)===128&&(Te=(tt&15)<<12|(L&63)<<6|j&63,Te>2047&&(Te<55296||Te>57343)&&(We=Te));break;case 4:L=Se[Ge+1],j=Se[Ge+2],be=Se[Ge+3],(L&192)===128&&(j&192)===128&&(be&192)===128&&(Te=(tt&15)<<18|(L&63)<<12|(j&63)<<6|be&63,Te>65535&&Te<1114112&&(We=Te))}}We===null?(We=65533,se=1):We>65535&&(We-=65536,ge.push(We>>>10&1023|55296),We=56320|We&1023),ge.push(We),Ge+=se}return we(ge)}var me=4096;function we(Se){var F=Se.length;if(F<=me)return String.fromCharCode.apply(String,Se);for(var R="",ge=0;ge<F;)R+=String.fromCharCode.apply(String,Se.slice(ge,ge+=me));return R}function _e(Se,F,R){var ge="";R=Math.min(Se.length,R);for(var Ge=F;Ge<R;++Ge)ge+=String.fromCharCode(Se[Ge]&127);return ge}function $e(Se,F,R){var ge="";R=Math.min(Se.length,R);for(var Ge=F;Ge<R;++Ge)ge+=String.fromCharCode(Se[Ge]);return ge}function ke(Se,F,R){var ge=Se.length;(!F||F<0)&&(F=0),(!R||R<0||R>ge)&&(R=ge);for(var Ge="",tt=F;tt<R;++tt)Ge+=wt(Se[tt]);return Ge}function Le(Se,F,R){for(var ge=Se.slice(F,R),Ge="",tt=0;tt<ge.length;tt+=2)Ge+=String.fromCharCode(ge[tt]+ge[tt+1]*256);return Ge}E.prototype.slice=function(F,R){var ge=this.length;F=~~F,R=R===void 0?ge:~~R,F<0?(F+=ge,F<0&&(F=0)):F>ge&&(F=ge),R<0?(R+=ge,R<0&&(R=0)):R>ge&&(R=ge),R<F&&(R=F);var Ge=this.subarray(F,R);return Ge.__proto__=E.prototype,Ge};function Xe(Se,F,R){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+F>R)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUIntLE=function(F,R,ge){F=F>>>0,R=R>>>0,ge||Xe(F,R,this.length);for(var Ge=this[F],tt=1,We=0;++We<R&&(tt*=256);)Ge+=this[F+We]*tt;return Ge},E.prototype.readUIntBE=function(F,R,ge){F=F>>>0,R=R>>>0,ge||Xe(F,R,this.length);for(var Ge=this[F+--R],tt=1;R>0&&(tt*=256);)Ge+=this[F+--R]*tt;return Ge},E.prototype.readUInt8=function(F,R){return F=F>>>0,R||Xe(F,1,this.length),this[F]},E.prototype.readUInt16LE=function(F,R){return F=F>>>0,R||Xe(F,2,this.length),this[F]|this[F+1]<<8},E.prototype.readUInt16BE=function(F,R){return F=F>>>0,R||Xe(F,2,this.length),this[F]<<8|this[F+1]},E.prototype.readUInt32LE=function(F,R){return F=F>>>0,R||Xe(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},E.prototype.readUInt32BE=function(F,R){return F=F>>>0,R||Xe(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},E.prototype.readIntLE=function(F,R,ge){F=F>>>0,R=R>>>0,ge||Xe(F,R,this.length);for(var Ge=this[F],tt=1,We=0;++We<R&&(tt*=256);)Ge+=this[F+We]*tt;return tt*=128,Ge>=tt&&(Ge-=Math.pow(2,8*R)),Ge},E.prototype.readIntBE=function(F,R,ge){F=F>>>0,R=R>>>0,ge||Xe(F,R,this.length);for(var Ge=R,tt=1,We=this[F+--Ge];Ge>0&&(tt*=256);)We+=this[F+--Ge]*tt;return tt*=128,We>=tt&&(We-=Math.pow(2,8*R)),We},E.prototype.readInt8=function(F,R){return F=F>>>0,R||Xe(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},E.prototype.readInt16LE=function(F,R){F=F>>>0,R||Xe(F,2,this.length);var ge=this[F]|this[F+1]<<8;return ge&32768?ge|4294901760:ge},E.prototype.readInt16BE=function(F,R){F=F>>>0,R||Xe(F,2,this.length);var ge=this[F+1]|this[F]<<8;return ge&32768?ge|4294901760:ge},E.prototype.readInt32LE=function(F,R){return F=F>>>0,R||Xe(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},E.prototype.readInt32BE=function(F,R){return F=F>>>0,R||Xe(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},E.prototype.readFloatLE=function(F,R){return F=F>>>0,R||Xe(F,4,this.length),l.read(this,F,!0,23,4)},E.prototype.readFloatBE=function(F,R){return F=F>>>0,R||Xe(F,4,this.length),l.read(this,F,!1,23,4)},E.prototype.readDoubleLE=function(F,R){return F=F>>>0,R||Xe(F,8,this.length),l.read(this,F,!0,52,8)},E.prototype.readDoubleBE=function(F,R){return F=F>>>0,R||Xe(F,8,this.length),l.read(this,F,!1,52,8)};function Ve(Se,F,R,ge,Ge,tt){if(!E.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>Ge||F<tt)throw new RangeError('"value" argument is out of bounds');if(R+ge>Se.length)throw new RangeError("Index out of range")}E.prototype.writeUIntLE=function(F,R,ge,Ge){if(F=+F,R=R>>>0,ge=ge>>>0,!Ge){var tt=Math.pow(2,8*ge)-1;Ve(this,F,R,ge,tt,0)}var We=1,se=0;for(this[R]=F&255;++se<ge&&(We*=256);)this[R+se]=F/We&255;return R+ge},E.prototype.writeUIntBE=function(F,R,ge,Ge){if(F=+F,R=R>>>0,ge=ge>>>0,!Ge){var tt=Math.pow(2,8*ge)-1;Ve(this,F,R,ge,tt,0)}var We=ge-1,se=1;for(this[R+We]=F&255;--We>=0&&(se*=256);)this[R+We]=F/se&255;return R+ge},E.prototype.writeUInt8=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,1,255,0),this[R]=F&255,R+1},E.prototype.writeUInt16LE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,2,65535,0),this[R]=F&255,this[R+1]=F>>>8,R+2},E.prototype.writeUInt16BE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,2,65535,0),this[R]=F>>>8,this[R+1]=F&255,R+2},E.prototype.writeUInt32LE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,4,4294967295,0),this[R+3]=F>>>24,this[R+2]=F>>>16,this[R+1]=F>>>8,this[R]=F&255,R+4},E.prototype.writeUInt32BE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,4,4294967295,0),this[R]=F>>>24,this[R+1]=F>>>16,this[R+2]=F>>>8,this[R+3]=F&255,R+4},E.prototype.writeIntLE=function(F,R,ge,Ge){if(F=+F,R=R>>>0,!Ge){var tt=Math.pow(2,8*ge-1);Ve(this,F,R,ge,tt-1,-tt)}var We=0,se=1,L=0;for(this[R]=F&255;++We<ge&&(se*=256);)F<0&&L===0&&this[R+We-1]!==0&&(L=1),this[R+We]=(F/se>>0)-L&255;return R+ge},E.prototype.writeIntBE=function(F,R,ge,Ge){if(F=+F,R=R>>>0,!Ge){var tt=Math.pow(2,8*ge-1);Ve(this,F,R,ge,tt-1,-tt)}var We=ge-1,se=1,L=0;for(this[R+We]=F&255;--We>=0&&(se*=256);)F<0&&L===0&&this[R+We+1]!==0&&(L=1),this[R+We]=(F/se>>0)-L&255;return R+ge},E.prototype.writeInt8=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,1,127,-128),F<0&&(F=255+F+1),this[R]=F&255,R+1},E.prototype.writeInt16LE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,2,32767,-32768),this[R]=F&255,this[R+1]=F>>>8,R+2},E.prototype.writeInt16BE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,2,32767,-32768),this[R]=F>>>8,this[R+1]=F&255,R+2},E.prototype.writeInt32LE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,4,2147483647,-2147483648),this[R]=F&255,this[R+1]=F>>>8,this[R+2]=F>>>16,this[R+3]=F>>>24,R+4},E.prototype.writeInt32BE=function(F,R,ge){return F=+F,R=R>>>0,ge||Ve(this,F,R,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[R]=F>>>24,this[R+1]=F>>>16,this[R+2]=F>>>8,this[R+3]=F&255,R+4};function ot(Se,F,R,ge,Ge,tt){if(R+ge>Se.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ht(Se,F,R,ge,Ge){return F=+F,R=R>>>0,Ge||ot(Se,F,R,4),l.write(Se,F,R,ge,23,4),R+4}E.prototype.writeFloatLE=function(F,R,ge){return ht(this,F,R,!0,ge)},E.prototype.writeFloatBE=function(F,R,ge){return ht(this,F,R,!1,ge)};function gt(Se,F,R,ge,Ge){return F=+F,R=R>>>0,Ge||ot(Se,F,R,8),l.write(Se,F,R,ge,52,8),R+8}E.prototype.writeDoubleLE=function(F,R,ge){return gt(this,F,R,!0,ge)},E.prototype.writeDoubleBE=function(F,R,ge){return gt(this,F,R,!1,ge)},E.prototype.copy=function(F,R,ge,Ge){if(!E.isBuffer(F))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!Ge&&Ge!==0&&(Ge=this.length),R>=F.length&&(R=F.length),R||(R=0),Ge>0&&Ge<ge&&(Ge=ge),Ge===ge||F.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),F.length-R<Ge-ge&&(Ge=F.length-R+ge);var tt=Ge-ge;if(this===F&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,ge,Ge);else if(this===F&&ge<R&&R<Ge)for(var We=tt-1;We>=0;--We)F[We+R]=this[We+ge];else Uint8Array.prototype.set.call(F,this.subarray(ge,Ge),R);return tt},E.prototype.fill=function(F,R,ge,Ge){if(typeof F=="string"){if(typeof R=="string"?(Ge=R,R=0,ge=this.length):typeof ge=="string"&&(Ge=ge,ge=this.length),Ge!==void 0&&typeof Ge!="string")throw new TypeError("encoding must be a string");if(typeof Ge=="string"&&!E.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(F.length===1){var tt=F.charCodeAt(0);(Ge==="utf8"&&tt<128||Ge==="latin1")&&(F=tt)}}else typeof F=="number"&&(F=F&255);if(R<0||this.length<R||this.length<ge)throw new RangeError("Out of range index");if(ge<=R)return this;R=R>>>0,ge=ge===void 0?this.length:ge>>>0,F||(F=0);var We;if(typeof F=="number")for(We=R;We<ge;++We)this[We]=F;else{var se=E.isBuffer(F)?F:E.from(F,Ge),L=se.length;if(L===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(We=0;We<ge-R;++We)this[We+R]=se[We%L]}return this};var Lt=/[^+/0-9A-Za-z-_]/g;function ft(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(Lt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function wt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Nt(Se,F){F=F||1/0;for(var R,ge=Se.length,Ge=null,tt=[],We=0;We<ge;++We){if(R=Se.charCodeAt(We),R>55295&&R<57344){if(!Ge){if(R>56319){(F-=3)>-1&&tt.push(239,191,189);continue}else if(We+1===ge){(F-=3)>-1&&tt.push(239,191,189);continue}Ge=R;continue}if(R<56320){(F-=3)>-1&&tt.push(239,191,189),Ge=R;continue}R=(Ge-55296<<10|R-56320)+65536}else Ge&&(F-=3)>-1&&tt.push(239,191,189);if(Ge=null,R<128){if((F-=1)<0)break;tt.push(R)}else if(R<2048){if((F-=2)<0)break;tt.push(R>>6|192,R&63|128)}else if(R<65536){if((F-=3)<0)break;tt.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((F-=4)<0)break;tt.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return tt}function Je(Se){for(var F=[],R=0;R<Se.length;++R)F.push(Se.charCodeAt(R)&255);return F}function sn(Se,F){for(var R,ge,Ge,tt=[],We=0;We<Se.length&&!((F-=2)<0);++We)R=Se.charCodeAt(We),ge=R>>8,Ge=R%256,tt.push(Ge),tt.push(ge);return tt}function wn(Se){return y.toByteArray(ft(Se))}function Ht(Se,F,R,ge){for(var Ge=0;Ge<ge&&!(Ge+R>=F.length||Ge>=Se.length);++Ge)F[Ge+R]=Se[Ge];return Ge}function Ft(Se,F){return Se instanceof F||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===F.name}function un(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const d=i("./validator"),y=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");a.exports={XMLParser:y,XMLValidator:d,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+d+"]["+y+"]*",b=new RegExp("^"+l+"$"),w=function(E,z){const O=[];let Q=z.exec(E);for(;Q;){const K=[];K.startIndex=z.lastIndex-Q[0].length;const pe=Q.length;for(let G=0;G<pe;G++)K.push(Q[G]);O.push(K),Q=z.exec(E)}return O},C=function(E){const z=b.exec(E);return!(z===null||typeof z>"u")};c.isExist=function(E){return typeof E<"u"},c.isEmptyObject=function(E){return Object.keys(E).length===0},c.merge=function(E,z,O){if(z){const Q=Object.keys(z),K=Q.length;for(let pe=0;pe<K;pe++)O==="strict"?E[Q[pe]]=[z[Q[pe]]]:E[Q[pe]]=z[Q[pe]]}},c.getValue=function(E){return c.isExist(E)?E:""},c.isName=C,c.getAllMatches=w,c.nameRegexp=l},{}],5:[function(i,a,c){const d=i("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(D,S){S=Object.assign({},y,S);const P=[];let Z=!1,J=!1;D[0]==="\uFEFF"&&(D=D.substr(1));for(let H=0;H<D.length;H++)if(D[H]==="<"&&D[H+1]==="?"){if(H+=2,H=b(D,H),H.err)return H}else if(D[H]==="<"){let ye=H;if(H++,D[H]==="!"){H=w(D,H);continue}else{let ve=!1;D[H]==="/"&&(ve=!0,H++);let xe="";for(;H<D.length&&D[H]!==">"&&D[H]!==" "&&D[H]!=="	"&&D[H]!==`
`&&D[H]!=="\r";H++)xe+=D[H];if(xe=xe.trim(),xe[xe.length-1]==="/"&&(xe=xe.substring(0,xe.length-1),H--),!B(xe)){let re;return xe.trim().length===0?re="Invalid space after '<'.":re="Tag '"+xe+"' is an invalid name.",G("InvalidTag",re,oe(D,H))}const te=z(D,H);if(te===!1)return G("InvalidAttr","Attributes for '"+xe+"' have open quote.",oe(D,H));let ae=te.value;if(H=te.index,ae[ae.length-1]==="/"){const re=H-ae.length;ae=ae.substring(0,ae.length-1);const ie=Q(ae,S);if(ie===!0)Z=!0;else return G(ie.err.code,ie.err.msg,oe(D,re+ie.err.line))}else if(ve)if(te.tagClosed){if(ae.trim().length>0)return G("InvalidTag","Closing tag '"+xe+"' can't have attributes or invalid starting.",oe(D,ye));{const re=P.pop();if(xe!==re.tagName){let ie=oe(D,re.tagStartPos);return G("InvalidTag","Expected closing tag '"+re.tagName+"' (opened in line "+ie.line+", col "+ie.col+") instead of closing tag '"+xe+"'.",oe(D,ye))}P.length==0&&(J=!0)}}else return G("InvalidTag","Closing tag '"+xe+"' doesn't have proper closing.",oe(D,H));else{const re=Q(ae,S);if(re!==!0)return G(re.err.code,re.err.msg,oe(D,H-ae.length+re.err.line));if(J===!0)return G("InvalidXml","Multiple possible root nodes found.",oe(D,H));S.unpairedTags.indexOf(xe)!==-1||P.push({tagName:xe,tagStartPos:ye}),Z=!0}for(H++;H<D.length;H++)if(D[H]==="<")if(D[H+1]==="!"){H++,H=w(D,H);continue}else if(D[H+1]==="?"){if(H=b(D,++H),H.err)return H}else break;else if(D[H]==="&"){const re=pe(D,H);if(re==-1)return G("InvalidChar","char '&' is not expected.",oe(D,H));H=re}else if(J===!0&&!l(D[H]))return G("InvalidXml","Extra text at the end",oe(D,H));D[H]==="<"&&H--}}else{if(l(D[H]))continue;return G("InvalidChar","char '"+D[H]+"' is not expected.",oe(D,H))}if(Z){if(P.length==1)return G("InvalidTag","Unclosed tag '"+P[0].tagName+"'.",oe(D,P[0].tagStartPos));if(P.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(P.map(H=>H.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function l(D){return D===" "||D==="	"||D===`
`||D==="\r"}function b(D,S){const P=S;for(;S<D.length;S++)if(D[S]=="?"||D[S]==" "){const Z=D.substr(P,S-P);if(S>5&&Z==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",oe(D,S));if(D[S]=="?"&&D[S+1]==">"){S++;break}else continue}return S}function w(D,S){if(D.length>S+5&&D[S+1]==="-"&&D[S+2]==="-"){for(S+=3;S<D.length;S++)if(D[S]==="-"&&D[S+1]==="-"&&D[S+2]===">"){S+=2;break}}else if(D.length>S+8&&D[S+1]==="D"&&D[S+2]==="O"&&D[S+3]==="C"&&D[S+4]==="T"&&D[S+5]==="Y"&&D[S+6]==="P"&&D[S+7]==="E"){let P=1;for(S+=8;S<D.length;S++)if(D[S]==="<")P++;else if(D[S]===">"&&(P--,P===0))break}else if(D.length>S+9&&D[S+1]==="["&&D[S+2]==="C"&&D[S+3]==="D"&&D[S+4]==="A"&&D[S+5]==="T"&&D[S+6]==="A"&&D[S+7]==="["){for(S+=8;S<D.length;S++)if(D[S]==="]"&&D[S+1]==="]"&&D[S+2]===">"){S+=2;break}}return S}const C='"',E="'";function z(D,S){let P="",Z="",J=!1;for(;S<D.length;S++){if(D[S]===C||D[S]===E)Z===""?Z=D[S]:Z!==D[S]||(Z="");else if(D[S]===">"&&Z===""){J=!0;break}P+=D[S]}return Z!==""?!1:{value:P,index:S,tagClosed:J}}const O=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Q(D,S){const P=d.getAllMatches(D,O),Z={};for(let J=0;J<P.length;J++){if(P[J][1].length===0)return G("InvalidAttr","Attribute '"+P[J][2]+"' has no space in starting.",W(P[J]));if(P[J][3]!==void 0&&P[J][4]===void 0)return G("InvalidAttr","Attribute '"+P[J][2]+"' is without value.",W(P[J]));if(P[J][3]===void 0&&!S.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+P[J][2]+"' is not allowed.",W(P[J]));const H=P[J][2];if(!V(H))return G("InvalidAttr","Attribute '"+H+"' is an invalid name.",W(P[J]));if(!Z.hasOwnProperty(H))Z[H]=1;else return G("InvalidAttr","Attribute '"+H+"' is repeated.",W(P[J]))}return!0}function K(D,S){let P=/\d/;for(D[S]==="x"&&(S++,P=/[\da-fA-F]/);S<D.length;S++){if(D[S]===";")return S;if(!D[S].match(P))break}return-1}function pe(D,S){if(S++,D[S]===";")return-1;if(D[S]==="#")return S++,K(D,S);let P=0;for(;S<D.length;S++,P++)if(!(D[S].match(/\w/)&&P<20)){if(D[S]===";")break;return-1}return S}function G(D,S,P){return{err:{code:D,msg:S,line:P.line||P,col:P.col}}}function V(D){return d.isName(D)}function B(D){return d.isName(D)}function oe(D,S){const P=D.substring(0,S).split(/\r?\n/);return{line:P.length,col:P[P.length-1].length+1}}function W(D){return D.startIndex+D[1].length}},{"./util":4}],6:[function(i,a,c){const d=i("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,V){return V},attributeValueProcessor:function(G,V){return V},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function l(G){this.options=Object.assign({},y,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=pe),this.processTextOrObjNode=w,this.options.format?(this.indentate=K,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=Q,this.buildObjNode=E):(this.buildTextNode=z,this.buildObjNode=C),this.buildTextValNode=z,this.buildObjectNode=C,this.replaceEntitiesValue=O,this.buildAttrPairStr=b}l.prototype.build=function(G){return this.options.preserveOrder?d(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},l.prototype.j2x=function(G,V){let B="",oe="";for(let W in G)if(!(typeof G[W]>"u"))if(G[W]===null)W[0]==="?"?oe+=this.indentate(V)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate(V)+"<"+W+"/"+this.tagEndChar;else if(G[W]instanceof Date)oe+=this.buildTextNode(G[W],W,"",V);else if(typeof G[W]!="object"){const D=this.isAttribute(W);if(D)B+=this.buildAttrPairStr(D,""+G[W]);else if(W===this.options.textNodeName){let S=this.options.tagValueProcessor(W,""+G[W]);oe+=this.replaceEntitiesValue(S)}else oe+=this.buildTextNode(G[W],W,"",V)}else if(Array.isArray(G[W])){const D=G[W].length;for(let S=0;S<D;S++){const P=G[W][S];typeof P>"u"||(P===null?W[0]==="?"?oe+=this.indentate(V)+"<"+W+"?"+this.tagEndChar:oe+=this.indentate(V)+"<"+W+"/"+this.tagEndChar:typeof P=="object"?oe+=this.processTextOrObjNode(P,W,V):oe+=this.buildTextNode(P,W,"",V))}}else if(this.options.attributesGroupName&&W===this.options.attributesGroupName){const D=Object.keys(G[W]),S=D.length;for(let P=0;P<S;P++)B+=this.buildAttrPairStr(D[P],""+G[W][D[P]])}else oe+=this.processTextOrObjNode(G[W],W,V);return{attrStr:B,val:oe}};function b(G,V){return V=this.options.attributeValueProcessor(G,""+V),V=this.replaceEntitiesValue(V),this.options.suppressBooleanAttributes&&V==="true"?" "+G:" "+G+'="'+V+'"'}function w(G,V,B){const oe=this.j2x(G,B+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],V,oe.attrStr,B):this.buildObjNode(oe.val,V,oe.attrStr,B)}function C(G,V,B,oe){let W="</"+V+this.tagEndChar,D="";return V[0]==="?"&&(D="?",W=""),B&&G.indexOf("<")===-1?this.indentate(oe)+"<"+V+B+D+">"+G+W:this.options.commentPropName!==!1&&V===this.options.commentPropName&&D.length===0?this.indentate(oe)+`<!--${G}-->`+this.newLine:this.indentate(oe)+"<"+V+B+D+this.tagEndChar+G+this.indentate(oe)+W}function E(G,V,B,oe){return G!==""?this.buildObjectNode(G,V,B,oe):V[0]==="?"?this.indentate(oe)+"<"+V+B+"?"+this.tagEndChar:this.indentate(oe)+"<"+V+B+"/"+this.tagEndChar}function z(G,V,B,oe){if(this.options.cdataPropName!==!1&&V===this.options.cdataPropName)return this.indentate(oe)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&V===this.options.commentPropName)return this.indentate(oe)+`<!--${G}-->`+this.newLine;{let W=this.options.tagValueProcessor(V,G);return W=this.replaceEntitiesValue(W),W===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+V+this.tagEndChar:this.indentate(oe)+"<"+V+"/"+this.tagEndChar:this.indentate(oe)+"<"+V+B+">"+W+"</"+V+this.tagEndChar}}function O(G){if(G&&G.length>0&&this.options.processEntities)for(let V=0;V<this.options.entities.length;V++){const B=this.options.entities[V];G=G.replace(B.regex,B.val)}return G}function Q(G,V,B,oe){return G===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+V+this.tagEndChar:this.indentate(oe)+"<"+V+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,V,B,oe):V[0]==="?"?this.indentate(oe)+"<"+V+B+"?"+this.tagEndChar:this.indentate(oe)+"<"+V+B+"/"+this.tagEndChar}function K(G){return this.options.indentBy.repeat(G)}function pe(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}a.exports=l},{"./orderedJs2Xml":7}],7:[function(i,a,c){const d=`
`;function y(z,O){return l(z,O,"",0)}function l(z,O,Q,K){let pe="",G="";O.format&&O.indentBy.length>0&&(G=d+""+O.indentBy.repeat(K));for(let V=0;V<z.length;V++){const B=z[V],oe=b(B);let W="";if(Q.length===0?W=oe:W=`${Q}.${oe}`,oe===O.textNodeName){let Z=B[oe];C(W,O)||(Z=O.tagValueProcessor(oe,Z),Z=E(Z,O)),pe+=G+Z;continue}else if(oe===O.cdataPropName){pe+=G+`<![CDATA[${B[oe][0][O.textNodeName]}]]>`;continue}else if(oe===O.commentPropName){pe+=G+`<!--${B[oe][0][O.textNodeName]}-->`;continue}else if(oe[0]==="?"){const Z=w(B[":@"],O),J=oe==="?xml"?"":G;let H=B[oe][0][O.textNodeName];H=H.length!==0?" "+H:"",pe+=J+`<${oe}${H}${Z}?>`;continue}const D=w(B[":@"],O);let S=G+`<${oe}${D}`,P=l(B[oe],O,W,K+1);O.unpairedTags.indexOf(oe)!==-1?O.suppressUnpairedNode?pe+=S+">":pe+=S+"/>":(!P||P.length===0)&&O.suppressEmptyNode?pe+=S+"/>":pe+=S+`>${P}${G}</${oe}>`}return pe}function b(z){const O=Object.keys(z);for(let Q=0;Q<O.length;Q++){const K=O[Q];if(K!==":@")return K}}function w(z,O){let Q="";if(z&&!O.ignoreAttributes)for(let K in z){let pe=O.attributeValueProcessor(K,z[K]);pe=E(pe,O),pe===!0&&O.suppressBooleanAttributes?Q+=` ${K.substr(O.attributeNamePrefix.length)}`:Q+=` ${K.substr(O.attributeNamePrefix.length)}="${pe}"`}return Q}function C(z,O){z=z.substr(0,z.length-O.textNodeName.length-1);let Q=z.substr(z.lastIndexOf(".")+1);for(let K in O.stopNodes)if(O.stopNodes[K]===z||O.stopNodes[K]==="*."+Q)return!0;return!1}function E(z,O){if(z&&z.length>0&&O.processEntities)for(let Q=0;Q<O.entities.length;Q++){const K=O.entities[Q];z=z.replace(K.regex,K.val)}return z}a.exports=y},{}],8:[function(i,a,c){function d(b,w){const C={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let E=1,z=!1,O=!1,Q=!1,K="";for(;w<b.length;w++)if(b[w]==="<"){if(z&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,O=!0;else if(z&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")Q=!0;else throw new Error("Invalid DOCTYPE");E++,K=""}else if(b[w]===">"){if(Q)if(b[w-1]==="-"&&b[w-2]==="-")Q=!1;else throw new Error("Invalid XML comment in DOCTYPE");else O&&(l(K,C),O=!1);if(E--,E===0)break}else b[w]==="["?z=!0:K+=b[w];if(E!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:C,i:w}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(b,w){const C=y.exec(b);C&&(w[C[1]]={regx:RegExp(`&${C[1]};`,"g"),val:C[3]})}a.exports=d},{}],9:[function(i,a,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,b){return b},attributeValueProcessor:function(l,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},y=function(l){return Object.assign({},d,l)};c.buildOptions=y,c.defaultOptions=d},{}],10:[function(i,a,c){const d=i("../util"),y=i("./xmlNode"),l=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class w{constructor(Z){this.options=Z,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=C,this.parseXml=K,this.parseTextData=E,this.resolveNameSpace=z,this.buildAttributesMap=Q,this.isItStopNode=V,this.replaceEntitiesValue=pe,this.readStopNodeData=D,this.saveTextToParentTag=G}}function C(P){const Z=Object.keys(P);for(let J=0;J<Z.length;J++){const H=Z[J];this.lastEntities[H]={regex:new RegExp("&"+H+";","g"),val:P[H]}}}function E(P,Z,J,H,ye,ve,xe){if(P!==void 0&&(this.options.trimValues&&!H&&(P=P.trim()),P.length>0)){xe||(P=this.replaceEntitiesValue(P));const te=this.options.tagValueProcessor(Z,P,J,ye,ve);return te==null?P:typeof te!=typeof P||te!==P?te:this.options.trimValues?S(P,this.options.parseTagValue,this.options.numberParseOptions):P.trim()===P?S(P,this.options.parseTagValue,this.options.numberParseOptions):P}}function z(P){if(this.options.removeNSPrefix){const Z=P.split(":"),J=P.charAt(0)==="/"?"/":"";if(Z[0]==="xmlns")return"";Z.length===2&&(P=J+Z[1])}return P}const O=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Q(P,Z){if(!this.options.ignoreAttributes&&typeof P=="string"){const J=d.getAllMatches(P,O),H=J.length,ye={};for(let ve=0;ve<H;ve++){const xe=this.resolveNameSpace(J[ve][1]);let te=J[ve][4];const ae=this.options.attributeNamePrefix+xe;if(xe.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const re=this.options.attributeValueProcessor(xe,te,Z);re==null?ye[ae]=te:typeof re!=typeof te||re!==te?ye[ae]=re:ye[ae]=S(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ye[ae]=!0)}if(!Object.keys(ye).length)return;if(this.options.attributesGroupName){const ve={};return ve[this.options.attributesGroupName]=ye,ve}return ye}}const K=function(P){P=P.replace(/\r\n?/g,`
`);const Z=new y("!xml");let J=Z,H="",ye="";for(let ve=0;ve<P.length;ve++)if(P[ve]==="<")if(P[ve+1]==="/"){const te=oe(P,">",ve,"Closing Tag is not closed.");let ae=P.substring(ve+2,te).trim();if(this.options.removeNSPrefix){const re=ae.indexOf(":");re!==-1&&(ae=ae.substr(re+1))}J&&(H=this.saveTextToParentTag(H,J,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),J=this.tagsNodeStack.pop(),H="",ve=te}else if(P[ve+1]==="?"){let te=W(P,ve,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(H=this.saveTextToParentTag(H,J,ye),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const ae=new y(te.tagName);ae.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(ae[":@"]=this.buildAttributesMap(te.tagExp,ye)),J.addChild(ae)}ve=te.closeIndex+1}else if(P.substr(ve+1,3)==="!--"){const te=oe(P,"-->",ve+4,"Comment is not closed.");if(this.options.commentPropName){const ae=P.substring(ve+4,te-2);H=this.saveTextToParentTag(H,J,ye),J.add(this.options.commentPropName,[{[this.options.textNodeName]:ae}])}ve=te}else if(P.substr(ve+1,2)==="!D"){const te=l(P,ve);this.docTypeEntities=te.entities,ve=te.i}else if(P.substr(ve+1,2)==="!["){const te=oe(P,"]]>",ve,"CDATA is not closed.")-2,ae=P.substring(ve+9,te);if(H=this.saveTextToParentTag(H,J,ye),this.options.cdataPropName)J.add(this.options.cdataPropName,[{[this.options.textNodeName]:ae}]);else{let re=this.parseTextData(ae,J.tagname,ye,!0,!1,!0);re||(re=""),J.add(this.options.textNodeName,re)}ve=te+2}else{let te=W(P,ve,this.options.removeNSPrefix),ae=te.tagName,re=te.tagExp,ie=te.attrExpPresent,me=te.closeIndex;J&&H&&J.tagname!=="!xml"&&(H=this.saveTextToParentTag(H,J,ye,!1)),ae!==Z.tagname&&(ye+=ye?"."+ae:ae);const we=J;if(we&&this.options.unpairedTags.indexOf(we.tagname)!==-1&&(J=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ye,ae)){let _e="";if(re.length>0&&re.lastIndexOf("/")===re.length-1)ve=te.closeIndex;else if(this.options.unpairedTags.indexOf(ae)!==-1)ve=te.closeIndex;else{const ke=this.readStopNodeData(P,ae,me+1);if(!ke)throw new Error(`Unexpected end of ${ae}`);ve=ke.i,_e=ke.tagContent}const $e=new y(ae);ae!==re&&ie&&($e[":@"]=this.buildAttributesMap(re,ye)),_e&&(_e=this.parseTextData(_e,ae,ye,!0,ie,!0,!0)),ye=ye.substr(0,ye.lastIndexOf(".")),$e.add(this.options.textNodeName,_e),J.addChild($e)}else{if(re.length>0&&re.lastIndexOf("/")===re.length-1){ae[ae.length-1]==="/"?(ae=ae.substr(0,ae.length-1),re=ae):re=re.substr(0,re.length-1);const _e=new y(ae);ae!==re&&ie&&(_e[":@"]=this.buildAttributesMap(re,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),J.addChild(_e)}else{const _e=new y(ae);this.tagsNodeStack.push(J),ae!==re&&ie&&(_e[":@"]=this.buildAttributesMap(re,ye)),J.addChild(_e),J=_e}H="",ve=me}}else H+=P[ve];return Z.child},pe=function(P){if(this.options.processEntities){for(let Z in this.docTypeEntities){const J=this.docTypeEntities[Z];P=P.replace(J.regx,J.val)}for(let Z in this.lastEntities){const J=this.lastEntities[Z];P=P.replace(J.regex,J.val)}if(this.options.htmlEntities)for(let Z in this.htmlEntities){const J=this.htmlEntities[Z];P=P.replace(J.regex,J.val)}}return P};function G(P,Z,J,H){return P&&(H===void 0&&(H=Object.keys(Z.child).length===0),P=this.parseTextData(P,Z.tagname,J,!1,Z[":@"]?Object.keys(Z[":@"]).length!==0:!1,H),P!==void 0&&P!==""&&Z.add(this.options.textNodeName,P),P=""),P}function V(P,Z,J){const H="*."+J;for(const ye in P){const ve=P[ye];if(H===ve||Z===ve)return!0}return!1}function B(P,Z,J=">"){let H,ye="";for(let ve=Z;ve<P.length;ve++){let xe=P[ve];if(H)xe===H&&(H="");else if(xe==='"'||xe==="'")H=xe;else if(xe===J[0])if(J[1]){if(P[ve+1]===J[1])return{data:ye,index:ve}}else return{data:ye,index:ve};else xe==="	"&&(xe=" ");ye+=xe}}function oe(P,Z,J,H){const ye=P.indexOf(Z,J);if(ye===-1)throw new Error(H);return ye+Z.length-1}function W(P,Z,J,H=">"){const ye=B(P,Z+1,H);if(!ye)return;let ve=ye.data;const xe=ye.index,te=ve.search(/\s/);let ae=ve,re=!0;if(te!==-1&&(ae=ve.substr(0,te).replace(/\s\s*$/,""),ve=ve.substr(te+1)),J){const ie=ae.indexOf(":");ie!==-1&&(ae=ae.substr(ie+1),re=ae!==ye.data.substr(ie+1))}return{tagName:ae,tagExp:ve,closeIndex:xe,attrExpPresent:re}}function D(P,Z,J){const H=J;for(;J<P.length;J++)if(P[J]==="<"&&P[J+1]==="/"){const ye=oe(P,">",J,`${Z} is not closed`);if(P.substring(J+2,ye).trim()===Z)return{tagContent:P.substring(H,J),i:ye};J=ye}}function S(P,Z,J){if(Z&&typeof P=="string"){const H=P.trim();return H==="true"?!0:H==="false"?!1:b(P,J)}else return d.isExist(P)?P:""}a.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:d}=i("./OptionsBuilder"),y=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),b=i("../validator");class w{constructor(E){this.externalEntities={},this.options=d(E)}parse(E,z){if(typeof E!="string")if(E.toString)E=E.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(z){z===!0&&(z={});const K=b.validate(E,z);if(K!==!0)throw Error(`${K.err.msg}:${K.err.line}:${K.err.col}`)}const O=new y(this.options);O.addExternalEntities(this.externalEntities);const Q=O.parseXml(E);return this.options.preserveOrder||Q===void 0?Q:l(Q,this.options)}addEntity(E,z){if(z.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(E.indexOf("&")!==-1||E.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[E]=z}}a.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function d(C,E){return y(C,E)}function y(C,E,z){let O;const Q={};for(let K=0;K<C.length;K++){const pe=C[K],G=l(pe);let V="";if(z===void 0?V=G:V=z+"."+G,G===E.textNodeName)O===void 0?O=pe[G]:O+=""+pe[G];else{if(G===void 0)continue;if(pe[G]){let B=y(pe[G],E,V);const oe=w(B,E);pe[":@"]?b(B,pe[":@"],V,E):Object.keys(B).length===1&&B[E.textNodeName]!==void 0&&!E.alwaysCreateTextNode?B=B[E.textNodeName]:Object.keys(B).length===0&&(E.alwaysCreateTextNode?B[E.textNodeName]="":B=""),Q[G]!==void 0?(Array.isArray(Q[G])||(Q[G]=[Q[G]]),Q[G].push(B)):E.isArray(G,V,oe)?Q[G]=[B]:Q[G]=B}}}return typeof O=="string"?O.length>0&&(Q[E.textNodeName]=O):O!==void 0&&(Q[E.textNodeName]=O),Q}function l(C){const E=Object.keys(C);for(let z=0;z<E.length;z++){const O=E[z];if(O!==":@")return O}}function b(C,E,z,O){if(E){const Q=Object.keys(E),K=Q.length;for(let pe=0;pe<K;pe++){const G=Q[pe];O.isArray(G,z+"."+G,!0,!0)?C[G]=[E[G]]:C[G]=E[G]}}}function w(C,E){const z=Object.keys(C).length;return!!(z===0||z===1&&C[E.textNodeName])}c.prettify=d},{}],13:[function(i,a,c){class d{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,b){this.child.push({[l]:b})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,[":@"]:l[":@"]}):this.child.push({[l.tagname]:l.child})}}a.exports=d},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,y,l,b,w){var C,E,z=w*8-b-1,O=(1<<z)-1,Q=O>>1,K=-7,pe=l?w-1:0,G=l?-1:1,V=d[y+pe];for(pe+=G,C=V&(1<<-K)-1,V>>=-K,K+=z;K>0;C=C*256+d[y+pe],pe+=G,K-=8);for(E=C&(1<<-K)-1,C>>=-K,K+=b;K>0;E=E*256+d[y+pe],pe+=G,K-=8);if(C===0)C=1-Q;else{if(C===O)return E?NaN:(V?-1:1)*(1/0);E=E+Math.pow(2,b),C=C-Q}return(V?-1:1)*E*Math.pow(2,C-b)},c.write=function(d,y,l,b,w,C){var E,z,O,Q=C*8-w-1,K=(1<<Q)-1,pe=K>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=b?0:C-1,B=b?1:-1,oe=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(z=isNaN(y)?1:0,E=K):(E=Math.floor(Math.log(y)/Math.LN2),y*(O=Math.pow(2,-E))<1&&(E--,O*=2),E+pe>=1?y+=G/O:y+=G*Math.pow(2,1-pe),y*O>=2&&(E++,O/=2),E+pe>=K?(z=0,E=K):E+pe>=1?(z=(y*O-1)*Math.pow(2,w),E=E+pe):(z=y*Math.pow(2,pe-1)*Math.pow(2,w),E=0));w>=8;d[l+V]=z&255,V+=B,z/=256,w-=8);for(E=E<<w|z,Q+=w;Q>0;d[l+V]=E&255,V+=B,E/=256,Q-=8);d[l+V-B]|=oe*128}},{}],15:[function(i,a,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(C,E={}){if(E=Object.assign({},l,E),!C||typeof C!="string")return C;let z=C.trim();if(E.skipLike!==void 0&&E.skipLike.test(z))return C;if(E.hex&&d.test(z))return Number.parseInt(z,16);{const O=y.exec(z);if(O){const Q=O[1],K=O[2];let pe=w(O[3]);const G=O[4]||O[6];if(!E.leadingZeros&&K.length>0&&Q&&z[2]!==".")return C;if(!E.leadingZeros&&K.length>0&&!Q&&z[1]!==".")return C;{const V=Number(z),B=""+V;return B.search(/[eE]/)!==-1||G?E.eNotation?V:C:z.indexOf(".")!==-1?B==="0"&&pe===""||B===pe||Q&&B==="-"+pe?V:C:K?pe===B||Q+pe===B?V:C:z===B||z===Q+B?V:C}}else return C}}function w(C){return C&&C.indexOf(".")!==-1&&(C=C.replace(/0+$/,""),C==="."?C="0":C[0]==="."?C="0"+C:C[C.length-1]==="."&&(C=C.substr(0,C.length-1))),C}a.exports=b},{}],16:[function(i,a,c){(function(d){(function(){var y=this&&this.__awaiter||function(z,O,Q,K){function pe(G){return G instanceof Q?G:new Q(function(V){V(G)})}return new(Q||(Q=Promise))(function(G,V){function B(D){try{W(K.next(D))}catch(S){V(S)}}function oe(D){try{W(K.throw(D))}catch(S){V(S)}}function W(D){D.done?G(D.value):pe(D.value).then(B,oe)}W((K=K.apply(z,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),b=i("../config"),w=i("./_xml"),C=z=>typeof btoa>"u"?d.from(z,"binary").toString("base64"):btoa(z);function E(z,O,Q){return y(this,void 0,void 0,function*(){const{apiUrl:K,authHeader:pe,basicAuth:G,userAgent:V}=(0,b.getConfig)(),B=G&&`Basic ${C(`${G.username}:${G.password}`)}`,oe=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let W=new URLSearchParams(O).toString();W&&(W=`?${W}`);const D=yield fetch(`${K}/api${z}${W}`,Object.assign(Object.assign({},Q),{headers:Object.assign({Authorization:pe||B||oe||"","User-Agent":V},Q==null?void 0:Q.headers)})),S=D.headers.get("Content-Type");if(S!=null&&S.startsWith("application/xml")){const P=yield D.text();return yield w.xmlParser.parse(P)}if(S!=null&&S.startsWith("application/json"))return D.json();if(D.ok)return yield D.text();throw new Error(`OSM API: ${yield D.text()}`)})}c.osmFetch=E}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),y=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(C){return y.build({osm:{changeset:{tag:Object.entries(C).map(([E,z])=>({$k:E,$v:z}))}}})}c.createChangesetMetaXml=l;const b=(C,E,z)=>E.reduce((O,Q)=>{const K={$id:Q.id,$version:z?0:Q.version,$changeset:C,tag:Object.entries(Q.tags||{}).map(([pe,G])=>({$k:pe,$v:G}))};switch(Q.type){case"node":{const pe=Object.assign(Object.assign({},K),{$lat:Q.lat,$lon:Q.lon});return Object.assign(Object.assign({},O),{node:[...O.node,pe]})}case"way":{if(!Q.nodes)throw new Error("Way has no nodes");const pe=Object.assign(Object.assign({},K),{nd:Q.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},O),{way:[...O.way,pe]})}case"relation":{if(!Q.members)throw new Error("Relation has no members");const pe=Object.assign(Object.assign({},K),{member:Q.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},O),{relation:[...O.relation,pe]})}default:return O}},{node:[],way:[],relation:[]});function w(C,E,z){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},z),{create:[b(C,E.create,!0)],modify:[b(C,E.modify)],delete:[Object.assign({"$if-unused":!0},b(C,E.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function y(C){return{changeset:+C.$.changeset,id:+C.$.id,timestamp:C.$.timestamp,uid:+C.$.uid,user:C.$.user,version:+C.$.version,tags:C.tag?Object.fromEntries(C.tag.map(E=>[E.$.k,E.$.v])):void 0}}const l=C=>{const E=[];if(C.node){const z=C.node.map(O=>Object.assign(Object.assign({type:"node"},y(O)),{lat:+O.$.lat,lon:+O.$.lon}));E.push(...z)}if(C.way){const z=C.way.map(O=>{var Q;return Object.assign(Object.assign({type:"way"},y(O)),{nodes:((Q=O.nd)===null||Q===void 0?void 0:Q.map(K=>+K.$.ref))||[]})});E.push(...z)}if(C.relation){const z=C.relation.map(O=>{var Q;return Object.assign(Object.assign({type:"relation"},y(O)),{members:((Q=O.member)===null||Q===void 0?void 0:Q.map(K=>({ref:+K.$.ref,role:K.$.role,type:K.$.type})))||[]})});E.push(...z)}return E};function b(C){var E,z,O;return{create:((E=C.osmChange[0].create)===null||E===void 0?void 0:E.flatMap(l))||[],modify:((z=C.osmChange[0].modify)===null||z===void 0?void 0:z.flatMap(l))||[],delete:((O=C.osmChange[0].delete)===null||O===void 0?void 0:O.flatMap(l))||[]}}c.parseOsmChangeJson=b;function w(C){const E=d.xmlParser.parse(C);return b(E)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(O){return O instanceof C?O:new C(function(Q){Q(O)})}return new(C||(C=Promise))(function(O,Q){function K(V){try{G(E.next(V))}catch(B){Q(B)}}function pe(V){try{G(E.throw(V))}catch(B){Q(B)}}function G(V){V.done?O(V.value):z(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=i("../_osmFetch");function l(b,w){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,a,c){var d=this&&this.__awaiter||function(w,C,E,z){function O(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(B){try{V(z.next(B))}catch(oe){K(oe)}}function G(B){try{V(z.throw(B))}catch(oe){K(oe)}}function V(B){B.done?Q(B.value):O(B.value).then(pe,G)}V((z=z.apply(w,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const C=yield(0,y.osmFetch)(`/0.6/changeset/${w}/download`);return(0,l.parseOsmChangeJson)(C)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var d=this&&this.__awaiter||function(E,z,O,Q){function K(pe){return pe instanceof O?pe:new O(function(G){G(pe)})}return new(O||(O=Promise))(function(pe,G){function V(W){try{oe(Q.next(W))}catch(D){G(D)}}function B(W){try{oe(Q.throw(W))}catch(D){G(D)}}function oe(W){W.done?pe(W.value):K(W.value).then(V,B)}oe((Q=Q.apply(E,z||[])).next())})},y=this&&this.__rest||function(E,z){var O={};for(var Q in E)Object.prototype.hasOwnProperty.call(E,Q)&&z.indexOf(Q)<0&&(O[Q]=E[Q]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var K=0,Q=Object.getOwnPropertySymbols(E);K<Q.length;K++)z.indexOf(Q[K])<0&&Object.prototype.propertyIsEnumerable.call(E,Q[K])&&(O[Q[K]]=E[Q[K]]);return O};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),b=E=>{var z;return{id:+E.$.id,created_at:new Date(E.$.created_at),closed_at:new Date(E.$.closed_at),open:E.$.open==="true",comments_count:+E.$.comments_count,changes_count:+E.$.changes_count,min_lat:+E.$.min_lat,min_lon:+E.$.min_lon,max_lat:+E.$.max_lat,max_lon:+E.$.max_lon,uid:+E.$.uid,user:E.$.user,tags:Object.fromEntries(E.tag.map(O=>[O.$.k,O.$.v])),discussion:(z=E.discussion)===null||z===void 0?void 0:z[0].comment.map(O=>({date:new Date(O.$.date),user:O.$.user,uid:O.$.uid,text:O.text[0]}))}};function w(E){var z;return d(this,void 0,void 0,function*(){const{only:O}=E,Q=y(E,["only"]);return((z=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},O&&{[O]:!0}),Q))).osm[0].changeset)===null||z===void 0?void 0:z.map(b))||[]})}c.listChangesets=w;function C(E,z=!0){return d(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${E}`,{include_discussion:z})).osm[0].changeset.map(b)[0]})}c.getChangeset=C},{"../_osmFetch":16}],23:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(w,C,E,z){z===void 0&&(z=E);var O=Object.getOwnPropertyDescriptor(C,E);(!O||("get"in O?!C.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return C[E]}}),Object.defineProperty(w,z,O)}:function(w,C,E,z){z===void 0&&(z=E),w[z]=C[E]}),y=this&&this.__exportStar||function(w,C){for(var E in w)E!=="default"&&!Object.prototype.hasOwnProperty.call(C,E)&&d(C,w,E)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(i("./createChangesetComment"),c),y(i("./getChangesetDiff"),c),y(i("./getChangesets"),c),y(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var d=this&&this.__awaiter||function(w,C,E,z){function O(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(B){try{V(z.next(B))}catch(oe){K(oe)}}function G(B){try{V(z.throw(B))}catch(oe){K(oe)}}function V(B){B.done?Q(B.value):O(B.value).then(pe,G)}V((z=z.apply(w,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=i("../_osmFetch"),l=i("./_createOsmChangeXml");function b(w,C){return d(this,void 0,void 0,function*(){const E=(0,l.createChangesetMetaXml)(w),z=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:E,headers:{"content-type":"application/xml; charset=utf-8"}})),O=(0,l.createOsmChangeXml)(z,C);return yield(0,y.osmFetch)(`/0.6/changeset/${z}/upload`,void 0,{method:"POST",body:O,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${z}/close`,void 0,{method:"PUT"}),+z})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(O){return O instanceof C?O:new C(function(Q){Q(O)})}return new(C||(C=Promise))(function(O,Q){function K(V){try{G(E.next(V))}catch(B){Q(B)}}function pe(V){try{G(E.throw(V))}catch(B){Q(B)}}function G(V){V.done?O(V.value):z(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=i("./_osmFetch");function l(){return d(this,void 0,void 0,function*(){const b=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(C=>C.$.regex)}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,a,c){var d=this&&this.__awaiter||function(O,Q,K,pe){function G(V){return V instanceof K?V:new K(function(B){B(V)})}return new(K||(K=Promise))(function(V,B){function oe(S){try{D(pe.next(S))}catch(P){B(P)}}function W(S){try{D(pe.throw(S))}catch(P){B(P)}}function D(S){S.done?V(S.value):G(S.value).then(oe,W)}D((pe=pe.apply(O,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=i("./_osmFetch");function l(O,Q,K){return d(this,void 0,void 0,function*(){const pe=K&&O!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}${pe}.json`)).elements})}c.getFeature=l;function b(O,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}s.json?${O}s=${Q.join(",")}`)).elements})}c.getFeatures=b;function w(O,Q,K){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}/${K}.json`)).elements[0]})}c.getFeatureAtVersion=w;function C(O,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}/history.json`)).elements})}c.getFeatureHistory=C;function E(O){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${O}/ways.json`)).elements})}c.getWaysForNode=E;function z(O,Q){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${O}/${Q}/relations.json`)).elements})}c.getRelationsForElement=z},{"./_osmFetch":16}],27:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(O){return O instanceof C?O:new C(function(Q){Q(O)})}return new(C||(C=Promise))(function(O,Q){function K(V){try{G(E.next(V))}catch(B){Q(B)}}function pe(V){try{G(E.throw(V))}catch(B){Q(B)}}function G(V){V.done?O(V.value):z(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=i("./_osmFetch");function l(b){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(O){return O instanceof C?O:new C(function(Q){Q(O)})}return new(C||(C=Promise))(function(O,Q){function K(V){try{G(E.next(V))}catch(B){Q(B)}}function pe(V){try{G(E.throw(V))}catch(B){Q(B)}}function G(V){V.done?O(V.value):z(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=i("./changesets");function l(b){return d(this,void 0,void 0,function*(){const w=yield(0,y.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,a,c){var d=this&&this.__awaiter||function(w,C,E,z){function O(Q){return Q instanceof E?Q:new E(function(K){K(Q)})}return new(E||(E=Promise))(function(Q,K){function pe(B){try{V(z.next(B))}catch(oe){K(oe)}}function G(B){try{V(z.throw(B))}catch(oe){K(oe)}}function V(B){B.done?Q(B.value):O(B.value).then(pe,G)}V((z=z.apply(w,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=i("./_osmFetch");function l(w){return d(this,void 0,void 0,function*(){const C=yield(0,y.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},C.user),{account_created:new Date(C.user.account_created)})})}c.getUser=l;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:w})).users.map(E=>Object.assign(Object.assign({},E),{account_created:new Date(E.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,C,E)}:function(l,b,w,C){C===void 0&&(C=w),l[C]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./notes"),c),y(i("./getCapabilities"),c),y(i("./getFeature"),c),y(i("./getMapData"),c),y(i("./getUIdFromDisplayName"),c),y(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var d=this&&this.__awaiter||function(z,O,Q,K){function pe(G){return G instanceof Q?G:new Q(function(V){V(G)})}return new(Q||(Q=Promise))(function(G,V){function B(D){try{W(K.next(D))}catch(S){V(S)}}function oe(D){try{W(K.throw(D))}catch(S){V(S)}}function W(D){D.done?G(D.value):pe(D.value).then(B,oe)}W((K=K.apply(z,O||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=i("../_osmFetch"),l=z=>{const[O,Q]=z.geometry.coordinates;return Object.assign(Object.assign({},z.properties),{location:{lat:Q,lng:O}})};function b(z,O){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${O?"/search":""}.json`,z)).features.map(l)})}function w(z){return b(z,!0)}c.getNotesForQuery=w;function C(z){return b({bbox:z},!1)}c.getNotesForArea=C;function E(z){return d(this,void 0,void 0,function*(){const O=yield(0,y.osmFetch)(`/0.6/notes/${z}.json`);return l(O)})}c.getNote=E},{"../_osmFetch":16}],32:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,C,E)}:function(l,b,w,C){C===void 0&&(C=w),l[C]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./getNotes"),c),y(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var d=this&&this.__awaiter||function(C,E,z,O){function Q(K){return K instanceof z?K:new z(function(pe){pe(K)})}return new(z||(z=Promise))(function(K,pe){function G(oe){try{B(O.next(oe))}catch(W){pe(W)}}function V(oe){try{B(O.throw(oe))}catch(W){pe(W)}}function B(oe){oe.done?K(oe.value):Q(oe.value).then(G,V)}B((O=O.apply(C,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=i("../_osmFetch");function l(C,E,z){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:C,lon:E,text:z})})}c.createNote=l;function b(C,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${C}/comment`,{text:E})})}c.commentOnNote=b;function w(C,E){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${C}/reopen`,{text:E})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(y){let l=!1;return new Promise((b,w)=>{const[C,E]=[600,550],z=Object.entries({width:C,height:E,left:window.screen.width/2-C/2,top:window.screen.height/2-E/2}).map(([K,pe])=>`${K}=${pe}`).join(","),O=window.open("about:blank","oauth_window",z);if(!O)throw new Error("Popup was blocked");O.location=y,window.authComplete=K=>{b(K),l=!0};const Q=setInterval(()=>{O.closed&&(l||w(new Error("Cancelled")),clearInterval(Q))},500)})}c.createPopup=d},{}],35:[function(i,a,c){var d=this&&this.__awaiter||function(b,w,C,E){function z(O){return O instanceof C?O:new C(function(Q){Q(O)})}return new(C||(C=Promise))(function(O,Q){function K(V){try{G(E.next(V))}catch(B){Q(B)}}function pe(V){try{G(E.throw(V))}catch(B){Q(B)}}function G(V){V.done?O(V.value):z(V.value).then(K,pe)}G((E=E.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=i("./helpers");function l(b,{options:w,pkceVerifier:C,state:E}){return d(this,void 0,void 0,function*(){const z=new URL(b).searchParams,O=z.get("error_description"),Q=z.get("code"),K=z.get("state");if(O)throw new Error(O);if(!Q)throw new Error("No code in OAuth response");if(!C||!E)throw new Error("No login in progress");if(E!==K)throw new Error("State Mismatch");const pe={grant_type:"authorization_code",code:Q,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:C},G=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(pe).toString()}`,B=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in B)throw new Error(B.error_description);const oe={issuedAt:new Date(B.created_at*1e3).toISOString(),accessToken:B.access_token,scopes:B.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(oe)),delete window.authComplete,oe})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,a,c){var d=this&&this.__awaiter||function(C,E,z,O){function Q(K){return K instanceof z?K:new z(function(pe){pe(K)})}return new(z||(z=Promise))(function(K,pe){function G(oe){try{B(O.next(oe))}catch(W){pe(W)}}function V(oe){try{B(O.throw(oe))}catch(W){pe(W)}}function B(oe){oe.done?K(oe.value):Q(oe.value).then(G,V)}B((O=O.apply(C,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=i("../config");function l(C){return d(this,void 0,void 0,function*(){const E=new TextEncoder().encode(C),z=yield window.crypto.subtle.digest("SHA-256",E);return btoa(String.fromCharCode(...new Uint8Array(z))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=l;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(C=>`0${C.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let C=(0,y.getConfig)().apiUrl;return C==="https://api.openstreetmap.org"&&(C="https://www.openstreetmap.org"),C}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,C,E)}:function(l,b,w,C){C===void 0&&(C=w),l[C]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var d=this&&this.__awaiter||function(O,Q,K,pe){function G(V){return V instanceof K?V:new K(function(B){B(V)})}return new(K||(K=Promise))(function(V,B){function oe(S){try{D(pe.next(S))}catch(P){B(P)}}function W(S){try{D(pe.throw(S))}catch(P){B(P)}}function D(S){S.done?V(S.value):G(S.value).then(oe,W)}D((pe=pe.apply(O,Q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=i("./createPopup"),l=i("./exchangeCode"),b=i("./helpers");function w(O){return d(this,void 0,void 0,function*(){if(!O.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!O.clientId)throw new Error("You must include the 'clientId' option");if(!O.scopes)throw new Error("You must include the 'scopes' option");const Q=(0,b.getRandomString)(),K=(0,b.getRandomString)(),pe=yield(0,b.sha256)(K),G={scope:O.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:Q,redirect_uri:O.redirectUrl,client_id:O.clientId,code_challenge_method:"S256",code_challenge:pe},V=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,B={state:Q,pkceVerifier:K,options:O};if(O.mode==="popup"){const oe=yield(0,y.createPopup)(V);return(0,l.exchangeCode)(oe,B)}if(O.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(B)),window.location.replace(V);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=(()=>d(void 0,void 0,void 0,function*(){var O;if(typeof window>"u")return;const Q=window.location.href,K=localStorage.getItem("__osmAuthTemp");if(new URL(Q).searchParams.get("code")){if(!((O=window.opener)===null||O===void 0)&&O.authComplete)window.opener.authComplete(Q),window.close();else if(K)try{const pe=JSON.parse(K);yield(0,l.exchangeCode)(Q,pe),localStorage.removeItem("__osmAuthTemp")}catch(pe){console.error("OSM Auth Error",pe)}}}))();const C=()=>{try{const O=localStorage.getItem("__osmAuth");return O?JSON.parse(O).accessToken:void 0}catch{return}};c.getAuthToken=C;const E=()=>!!(0,c.getAuthToken)();c.isLoggedIn=E;function z(){localStorage.removeItem("__osmAuth")}c.logout=z},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>d;c.getConfig=y;function l(b){Object.assign(d,b)}c.configure=l},{}],40:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,C,E)}:function(l,b,w,C){C===void 0&&(C=w),l[C]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),y(i("./api"),c),y(i("./auth"),c),y(i("./config"),c),y(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,a,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,a,c){var d=this&&this.__createBinding||(Object.create?function(l,b,w,C){C===void 0&&(C=w);var E=Object.getOwnPropertyDescriptor(b,w);(!E||("get"in E?!b.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(l,C,E)}:function(l,b,w,C){C===void 0&&(C=w),l[C]=b[w]}),y=this&&this.__exportStar||function(l,b){for(var w in l)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,l,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./features"),c),y(i("./general"),c),y(i("./notes"),c),y(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,a,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(TC);var xs=TC.exports;const CC=()=>{const[e,t]=yt.useState(!1);yt.useEffect(()=>{t(xs.isLoggedIn())},[]);const i=yt.useCallback(()=>{(async()=>(await xs.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(xs.isLoggedIn()),window.location.reload()))()},[]),a=yt.useCallback(()=>{(async()=>(xs.logout(),t(!1)))()},[]);return mt.jsx(mt.Fragment,{children:e?mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},U5=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(xs.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await xs.getUser("me");a(c)})()},[e]),mt.jsx(mt.Fragment,{children:i?mt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):mt.jsx("img",{})})},$5=()=>{const[e,t]=yt.useState(!1),[i,a]=yt.useState(void 0);return yt.useEffect(()=>{t(xs.isLoggedIn())},[]),yt.useEffect(()=>{e&&(async()=>{const c=await xs.getUser("me");a(c)})()},[e]),mt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[mt.jsxs("div",{children:[mt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?mt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):mt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),mt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[mt.jsx("div",{children:mt.jsx(U5,{})}),mt.jsx("div",{children:mt.jsx(CC,{})})]})]})},IC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return mt.jsxs(mt.Fragment,{children:[mt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",mt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},V5=({feature:e})=>mt.jsx(mt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return mt.jsxs("div",{className:t,children:[mt.jsx("span",{className:"underline",children:t})," = ",mt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function wf(e,t,i){return parseInt(e.substr(t,i),16)}function AC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function t0(e,t,i){return i=i<0?i+6:i>6?i-6:i,AC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function G5(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],d=e[3],y=e[4]||"";t="#"+a+a+c+c+d+d+y+y}return(i==7||i>8)&&(t=e),t}}function Z5(e,t,i){let a;if(t==0){const c=AC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;a=t0(d,c,e*6+2)+t0(d,c,e*6)+t0(d,c,e*6-2)}return"#"+a}function mf(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,Z5(e,t,i)}const W5=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},p2={V:"jdenticon_config",n:"config"};var H5={};function X5(e,t){const i=typeof e=="object"&&e||H5[p2.n]||W5[p2.V]||{},a=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,y=c.grayscale,l=i.backColor,b=i.padding;function w(E,z){let O=a[E];return O&&O.length>1||(O=z),function(Q){return Q=O[0]+Q*(O[1]-O[0]),Q<0?0:Q>1?1:Q}}function C(E){const z=i.hues;let O;return z&&z.length>0&&(O=z[0|.999*E*z.length]),typeof O=="number"?(O/360%1+1)%1:E}return{W:C,o:typeof d=="number"?d:.5,D:typeof y=="number"?y:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:G5(l),X:typeof e=="number"?e:typeof b=="number"?b:t}}let wp=class{constructor(t,i){this.x=t,this.y=i}};class PC{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const d=this.q+this.H,y=this.t+this.H,l=this.Y;return l===1?new wp(d-i-(c||0),this.t+t):l===2?new wp(d-t-(a||0),y-i-(c||0)):l===3?new wp(this.q+i,y-t-(a||0)):new wp(this.q+t,this.t+i)}}const q5=new PC(0,0,0,0);class K5{constructor(t){this.J=t,this.u=q5}g(t,i){const a=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=a)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,a,c){const d=this.u.I(t,i,a,a);this.J.h(d,a,c)}i(t,i,a,c,d){this.g([t,i,t+a,i,t+a,i+c,t,i+c],d)}j(t,i,a,c,d,y){const l=[t+a,i,t+a,i+c,t,i+c,t,i];l.splice((d||0)%4*2,2),this.g(l,y)}K(t,i,a,c,d){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],d)}}function Y5(e,t,i,a){e=e%14;let c,d,y,l,b,w;e?e==1?(y=0|i*.5,l=0|i*.8,t.j(i-y,0,y,l,2)):e==2?(y=0|i/3,t.i(y,y,i-y,i-y)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,y=0|i*.5,t.h(i-y-d,i-y-d,y)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!a&&(d=i*.4,y=i*1.2,t.h(d,d,y)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function m2(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function J5(e,t){return e=t.W(e),[mf(e,t.D,t.F(0)),mf(e,t.o,t.p(.5)),mf(e,t.D,t.F(1)),mf(e,t.o,t.p(1)),mf(e,t.o,t.p(0))]}function Q5(e,t,i){const a=X5(i,.08);a.G&&e.m(a.G);let c=e.k;const d=.5+c*a.X|0;c-=d*2;const y=new K5(e),l=0|c/4,b=0|d+c/2-l*2,w=0|d+c/2-l*2;function C(pe,G,V,B,oe){const W=wf(t,V,1);let D=B?wf(t,B,1):0;e.L(z[O[pe]]);for(let S=0;S<oe.length;S++)y.u=new PC(b+oe[S][0]*l,w+oe[S][1]*l,l,D++%4),G(W,y,l,S);e.M()}const E=wf(t,-7)/268435455,z=J5(E,a),O=[];let Q;function K(pe){if(pe.indexOf(Q)>=0){for(let G=0;G<pe.length;G++)if(O.indexOf(pe[G])>=0)return!0}}for(let pe=0;pe<3;pe++)Q=wf(t,8+pe,1)%z.length,(K([0,4])||K([2,3]))&&(Q=1),O.push(Q);C(0,m2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),C(1,m2,4,5,[[0,0],[3,0],[3,3],[0,3]]),C(2,Y5,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function ez(e){var a=0,c=0,d=encodeURI(e)+"%80",y=[],l,b=[],w=1732584193,C=4023233417,E=~w,z=~C,O=3285377520,Q=[w,C,E,z,O],K=0,pe="";function G(V,B){return V<<B|V>>>32-B}for(;a<d.length;c++)y[c>>2]=y[c>>2]|(d[a]=="%"?parseInt(d.substring(a+1,a+=3),16):d.charCodeAt(a++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,y[l-1]=c*8-8;K<l;K+=16){for(a=0;a<80;a++)c=G(w,5)+O+(a<20?(C&E^~C&z)+1518500249:a<40?(C^E^z)+1859775393:a<60?(C&E^C&z^E&z)+2400959708:(C^E^z)+3395469782)+(b[a]=a<16?y[K+a]|0:G(b[a-3]^b[a-8]^b[a-14]^b[a-16],1)),O=z,z=E,E=G(C,30),C=w,w=c;Q[0]=w=Q[0]+w|0,Q[1]=C=Q[1]+C|0,Q[2]=E=Q[2]+E|0,Q[3]=z=Q[3]+z|0,Q[4]=O=Q[4]+O|0}for(a=0;a<40;a++)pe+=(Q[a>>3]>>>(7-(a&7))*4&15).toString(16);return pe}function tz(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function nz(e){return ez(e==null?"":""+e)}function Sc(e){return(e*10+.5|0)/10}class rz{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Sc(t[a].x)+" "+Sc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,d=Sc(i/2),y=Sc(i),l="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+Sc(t.x)+" "+Sc(t.y+i/2)+l+y+",0"+l+-y+",0"}}class iz{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?wf(i[2],0)/255:1;this.N.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new rz)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const oz={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class sz{constructor(t){this.k=t,this.C='<svg xmlns="'+oz.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function az(e,t,i){const a=new sz(t);return Q5(new iz(a),tz(e)||nz(e),i),a.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const lz=({feature:e,size:t})=>e.properties===null?null:mt.jsx(mt.Fragment,{children:e.properties.userIconHref.length>0?mt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):mt.jsx("span",{dangerouslySetInnerHTML:{__html:az(e.properties.user||"noname",t)}})}),uz=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?mt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var cz={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const hz=({viewState:e})=>{const[t,i]=yt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return yt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),mt.jsx(mt.Fragment,{children:e&&t&&mt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[mt.jsx(Xs,{icon:cz,style:{padding:"0px 3px"}}),mt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var MC={};class Ri{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],y=t+d,l=Math.abs(t)<Math.abs(d)?t-(y-d):d-(y-t);l&&(i[a++]=l),t=y}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,d,y=0;if(i>0){for(y=t[--i];i>0&&(a=y,c=t[--i],y=a+c,d=c-(y-a),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,a=y+c,c==a-y&&(y=a))}return y}}function*fz(e){for(const t of e)yield*t}function kC(e){return Array.from(fz(e))}function Wc(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++a<c;)d[a]=e+a*i;return d}var cn=1e-6,ld=1e-12,kn=Math.PI,Or=kn/2,Pm=kn/4,Yi=kn*2,ar=180/kn,fn=kn/180,$n=Math.abs,xh=Math.atan,Ji=Math.atan2,rn=Math.cos,bp=Math.ceil,zC=Math.exp,Ov=Math.hypot,Mm=Math.log,n0=Math.pow,Yt=Math.sin,qo=Math.sign||function(e){return e>0?1:e<0?-1:0},fi=Math.sqrt,w1=Math.tan;function LC(e){return e>1?0:e<-1?kn:Math.acos(e)}function Qi(e){return e>1?Or:e<-1?-Or:Math.asin(e)}function g2(e){return(e=Yt(e/2))*e}function Tr(){}function km(e,t){e&&v2.hasOwnProperty(e.type)&&v2[e.type](e,t)}var y2={Feature:function(e,t){km(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)km(i[a].geometry,t)}},v2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Fv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)Fv(i[a],t,0)},Polygon:function(e,t){_2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)_2(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)km(i[a],t)}};function Fv(e,t,i){var a=-1,c=e.length-i,d;for(t.lineStart();++a<c;)d=e[a],t.point(d[0],d[1],d[2]);t.lineEnd()}function _2(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)Fv(e[i],t,1);t.polygonEnd()}function ys(e,t){e&&y2.hasOwnProperty(e.type)?y2[e.type](e,t):km(e,t)}var zm=new Ri,Lm=new Ri,RC,OC,jv,Dv,Bv,qs={point:Tr,lineStart:Tr,lineEnd:Tr,polygonStart:function(){zm=new Ri,qs.lineStart=dz,qs.lineEnd=pz},polygonEnd:function(){var e=+zm;Lm.add(e<0?Yi+e:e),this.lineStart=this.lineEnd=this.point=Tr},sphere:function(){Lm.add(Yi)}};function dz(){qs.point=mz}function pz(){FC(RC,OC)}function mz(e,t){qs.point=FC,RC=e,OC=t,e*=fn,t*=fn,jv=e,Dv=rn(t=t/2+Pm),Bv=Yt(t)}function FC(e,t){e*=fn,t*=fn,t=t/2+Pm;var i=e-jv,a=i>=0?1:-1,c=a*i,d=rn(t),y=Yt(t),l=Bv*y,b=Dv*d+l*rn(c),w=l*a*Yt(c);zm.add(Ji(w,b)),jv=e,Dv=d,Bv=y}function gz(e){return Lm=new Ri,ys(e,qs),Lm*2}function Rm(e){return[Ji(e[1],e[0]),Qi(e[2])]}function ku(e){var t=e[0],i=e[1],a=rn(i);return[a*rn(t),a*Yt(t),Yt(i)]}function Ep(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function r0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Sp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Om(e){var t=fi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Er,ho,Lr,Ao,yu,jC,DC,th,Bf,dl,Ra,Ea={point:Nv,lineStart:x2,lineEnd:w2,polygonStart:function(){Ea.point=NC,Ea.lineStart=yz,Ea.lineEnd=vz,Bf=new Ri,qs.polygonStart()},polygonEnd:function(){qs.polygonEnd(),Ea.point=Nv,Ea.lineStart=x2,Ea.lineEnd=w2,zm<0?(Er=-(Lr=180),ho=-(Ao=90)):Bf>cn?Ao=90:Bf<-cn&&(ho=-90),Ra[0]=Er,Ra[1]=Lr},sphere:function(){Er=-(Lr=180),ho=-(Ao=90)}};function Nv(e,t){dl.push(Ra=[Er=e,Lr=e]),t<ho&&(ho=t),t>Ao&&(Ao=t)}function BC(e,t){var i=ku([e*fn,t*fn]);if(th){var a=hh(th,i),c=[a[1],-a[0],0],d=hh(c,a);Om(d),d=Rm(d);var y=e-yu,l=y>0?1:-1,b=d[0]*ar*l,w,C=$n(y)>180;C^(l*yu<b&&b<l*e)?(w=d[1]*ar,w>Ao&&(Ao=w)):(b=(b+360)%360-180,C^(l*yu<b&&b<l*e)?(w=-d[1]*ar,w<ho&&(ho=w)):(t<ho&&(ho=t),t>Ao&&(Ao=t))),C?e<yu?Io(Er,e)>Io(Er,Lr)&&(Lr=e):Io(e,Lr)>Io(Er,Lr)&&(Er=e):Lr>=Er?(e<Er&&(Er=e),e>Lr&&(Lr=e)):e>yu?Io(Er,e)>Io(Er,Lr)&&(Lr=e):Io(e,Lr)>Io(Er,Lr)&&(Er=e)}else dl.push(Ra=[Er=e,Lr=e]);t<ho&&(ho=t),t>Ao&&(Ao=t),th=i,yu=e}function x2(){Ea.point=BC}function w2(){Ra[0]=Er,Ra[1]=Lr,Ea.point=Nv,th=null}function NC(e,t){if(th){var i=e-yu;Bf.add($n(i)>180?i+(i>0?360:-360):i)}else jC=e,DC=t;qs.point(e,t),BC(e,t)}function yz(){qs.lineStart()}function vz(){NC(jC,DC),qs.lineEnd(),$n(Bf)>cn&&(Er=-(Lr=180)),Ra[0]=Er,Ra[1]=Lr,th=null}function Io(e,t){return(t-=e)<0?t+360:t}function _z(e,t){return e[0]-t[0]}function b2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function xz(e){var t,i,a,c,d,y,l;if(Ao=Lr=-(Er=ho=1/0),dl=[],ys(e,Ea),i=dl.length){for(dl.sort(_z),t=1,a=dl[0],d=[a];t<i;++t)c=dl[t],b2(a,c[0])||b2(a,c[1])?(Io(a[0],c[1])>Io(a[0],a[1])&&(a[1]=c[1]),Io(c[0],a[1])>Io(a[0],a[1])&&(a[0]=c[0])):d.push(a=c);for(y=-1/0,i=d.length-1,t=0,a=d[i];t<=i;a=c,++t)c=d[t],(l=Io(a[1],c[0]))>y&&(y=l,Er=c[0],Lr=a[1])}return dl=Ra=null,Er===1/0||ho===1/0?[[NaN,NaN],[NaN,NaN]]:[[Er,ho],[Lr,Ao]]}var bf,Fm,jm,Dm,Bm,Nm,Um,$m,Uv,$v,Vv,UC,$C,Hi,Xi,qi,ws={sphere:Tr,point:b1,lineStart:E2,lineEnd:S2,polygonStart:function(){ws.lineStart=Ez,ws.lineEnd=Sz},polygonEnd:function(){ws.lineStart=E2,ws.lineEnd=S2}};function b1(e,t){e*=fn,t*=fn;var i=rn(t);xd(i*rn(e),i*Yt(e),Yt(t))}function xd(e,t,i){++bf,jm+=(e-jm)/bf,Dm+=(t-Dm)/bf,Bm+=(i-Bm)/bf}function E2(){ws.point=wz}function wz(e,t){e*=fn,t*=fn;var i=rn(t);Hi=i*rn(e),Xi=i*Yt(e),qi=Yt(t),ws.point=bz,xd(Hi,Xi,qi)}function bz(e,t){e*=fn,t*=fn;var i=rn(t),a=i*rn(e),c=i*Yt(e),d=Yt(t),y=Ji(fi((y=Xi*d-qi*c)*y+(y=qi*a-Hi*d)*y+(y=Hi*c-Xi*a)*y),Hi*a+Xi*c+qi*d);Fm+=y,Nm+=y*(Hi+(Hi=a)),Um+=y*(Xi+(Xi=c)),$m+=y*(qi+(qi=d)),xd(Hi,Xi,qi)}function S2(){ws.point=b1}function Ez(){ws.point=Tz}function Sz(){VC(UC,$C),ws.point=b1}function Tz(e,t){UC=e,$C=t,e*=fn,t*=fn,ws.point=VC;var i=rn(t);Hi=i*rn(e),Xi=i*Yt(e),qi=Yt(t),xd(Hi,Xi,qi)}function VC(e,t){e*=fn,t*=fn;var i=rn(t),a=i*rn(e),c=i*Yt(e),d=Yt(t),y=Xi*d-qi*c,l=qi*a-Hi*d,b=Hi*c-Xi*a,w=Ov(y,l,b),C=Qi(w),E=w&&-C/w;Uv.add(E*y),$v.add(E*l),Vv.add(E*b),Fm+=C,Nm+=C*(Hi+(Hi=a)),Um+=C*(Xi+(Xi=c)),$m+=C*(qi+(qi=d)),xd(Hi,Xi,qi)}function Cz(e){bf=Fm=jm=Dm=Bm=Nm=Um=$m=0,Uv=new Ri,$v=new Ri,Vv=new Ri,ys(e,ws);var t=+Uv,i=+$v,a=+Vv,c=Ov(t,i,a);return c<ld&&(t=Nm,i=Um,a=$m,Fm<cn&&(t=jm,i=Dm,a=Bm),c=Ov(t,i,a),c<ld)?[NaN,NaN]:[Ji(i,t)*ar,Qi(a/c)*ar]}function Tc(e){return function(){return e}}function Gv(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function Zv(e,t){return[$n(e)>kn?e+Math.round(-e/Yi)*Yi:e,t]}Zv.invert=Zv;function E1(e,t,i){return(e%=Yi)?t||i?Gv(C2(e),I2(t,i)):C2(e):t||i?I2(t,i):Zv}function T2(e){return function(t,i){return t+=e,[t>kn?t-Yi:t<-kn?t+Yi:t,i]}}function C2(e){var t=T2(e);return t.invert=T2(-e),t}function I2(e,t){var i=rn(e),a=Yt(e),c=rn(t),d=Yt(t);function y(l,b){var w=rn(b),C=rn(l)*w,E=Yt(l)*w,z=Yt(b),O=z*i+C*a;return[Ji(E*c-O*d,C*i-z*a),Qi(O*c+E*d)]}return y.invert=function(l,b){var w=rn(b),C=rn(l)*w,E=Yt(l)*w,z=Yt(b),O=z*c-E*d;return[Ji(E*c+z*d,C*i+O*a),Qi(O*i-C*a)]},y}function GC(e){e=E1(e[0]*fn,e[1]*fn,e.length>2?e[2]*fn:0);function t(i){return i=e(i[0]*fn,i[1]*fn),i[0]*=ar,i[1]*=ar,i}return t.invert=function(i){return i=e.invert(i[0]*fn,i[1]*fn),i[0]*=ar,i[1]*=ar,i},t}function ZC(e,t,i,a,c,d){if(i){var y=rn(t),l=Yt(t),b=a*i;c==null?(c=t+a*Yi,d=t-b/2):(c=A2(y,c),d=A2(y,d),(a>0?c<d:c>d)&&(c+=a*Yi));for(var w,C=c;a>0?C>d:C<d;C-=b)w=Rm([y,-l*rn(C),-l*Yt(C)]),e.point(w[0],w[1])}}function A2(e,t){t=ku(t),t[0]-=e,Om(t);var i=LC(-t[1]);return((-t[2]<0?-i:i)+Yi-cn)%Yi}function Iz(){var e=Tc([0,0]),t=Tc(90),i=Tc(6),a,c,d={point:y};function y(b,w){a.push(b=c(b,w)),b[0]*=ar,b[1]*=ar}function l(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*fn,C=i.apply(this,arguments)*fn;return a=[],c=E1(-b[0]*fn,-b[1]*fn,0).invert,ZC(d,w,C,1),b={type:"Polygon",coordinates:[a]},a=c=null,b}return l.center=function(b){return arguments.length?(e=typeof b=="function"?b:Tc([+b[0],+b[1]]),l):e},l.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Tc(+b),l):t},l.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Tc(+b),l):i},l}function WC(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Tr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Wp(e,t){return $n(e[0]-t[0])<cn&&$n(e[1]-t[1])<cn}function Tp(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function HC(e,t,i,a,c){var d=[],y=[],l,b;if(e.forEach(function(Q){if(!((K=Q.length-1)<=0)){var K,pe=Q[0],G=Q[K],V;if(Wp(pe,G)){if(!pe[2]&&!G[2]){for(c.lineStart(),l=0;l<K;++l)c.point((pe=Q[l])[0],pe[1]);c.lineEnd();return}G[0]+=2*cn}d.push(V=new Tp(pe,Q,null,!0)),y.push(V.o=new Tp(pe,null,V,!1)),d.push(V=new Tp(G,Q,null,!1)),y.push(V.o=new Tp(G,null,V,!0))}}),!!d.length){for(y.sort(t),P2(d),P2(y),l=0,b=y.length;l<b;++l)y[l].e=i=!i;for(var w=d[0],C,E;;){for(var z=w,O=!0;z.v;)if((z=z.n)===w)return;C=z.z,c.lineStart();do{if(z.v=z.o.v=!0,z.e){if(O)for(l=0,b=C.length;l<b;++l)c.point((E=C[l])[0],E[1]);else a(z.x,z.n.x,1,c);z=z.n}else{if(O)for(C=z.p.z,l=C.length-1;l>=0;--l)c.point((E=C[l])[0],E[1]);else a(z.x,z.p.x,-1,c);z=z.p}z=z.o,C=z.z,O=!O}while(!z.v);c.lineEnd()}}}function P2(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function i0(e){return $n(e[0])<=kn?e[0]:qo(e[0])*(($n(e[0])+kn)%Yi-kn)}function XC(e,t){var i=i0(t),a=t[1],c=Yt(a),d=[Yt(i),-rn(i),0],y=0,l=0,b=new Ri;c===1?a=Or+cn:c===-1&&(a=-Or-cn);for(var w=0,C=e.length;w<C;++w)if(z=(E=e[w]).length)for(var E,z,O=E[z-1],Q=i0(O),K=O[1]/2+Pm,pe=Yt(K),G=rn(K),V=0;V<z;++V,Q=oe,pe=D,G=S,O=B){var B=E[V],oe=i0(B),W=B[1]/2+Pm,D=Yt(W),S=rn(W),P=oe-Q,Z=P>=0?1:-1,J=Z*P,H=J>kn,ye=pe*D;if(b.add(Ji(ye*Z*Yt(J),G*S+ye*rn(J))),y+=H?P+Z*Yi:P,H^Q>=i^oe>=i){var ve=hh(ku(O),ku(B));Om(ve);var xe=hh(d,ve);Om(xe);var te=(H^P>=0?-1:1)*Qi(xe[2]);(a>te||a===te&&(ve[0]||ve[1]))&&(l+=H^P>=0?1:-1)}}return(y<-cn||y<cn&&b<-ld)^l&1}function qC(e,t,i,a){return function(c){var d=t(c),y=WC(),l=t(y),b=!1,w,C,E,z={point:O,lineStart:K,lineEnd:pe,polygonStart:function(){z.point=G,z.lineStart=V,z.lineEnd=B,C=[],w=[]},polygonEnd:function(){z.point=O,z.lineStart=K,z.lineEnd=pe,C=kC(C);var oe=XC(w,a);C.length?(b||(c.polygonStart(),b=!0),HC(C,Pz,oe,i,c)):oe&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),C=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function O(oe,W){e(oe,W)&&c.point(oe,W)}function Q(oe,W){d.point(oe,W)}function K(){z.point=Q,d.lineStart()}function pe(){z.point=O,d.lineEnd()}function G(oe,W){E.push([oe,W]),l.point(oe,W)}function V(){l.lineStart(),E=[]}function B(){G(E[0][0],E[0][1]),l.lineEnd();var oe=l.clean(),W=y.result(),D,S=W.length,P,Z,J;if(E.pop(),w.push(E),E=null,!!S){if(oe&1){if(Z=W[0],(P=Z.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),D=0;D<P;++D)c.point((J=Z[D])[0],J[1]);c.lineEnd()}return}S>1&&oe&2&&W.push(W.pop().concat(W.shift())),C.push(W.filter(Az))}}return z}}function Az(e){return e.length>1}function Pz(e,t){return((e=e.x)[0]<0?e[1]-Or-cn:Or-e[1])-((t=t.x)[0]<0?t[1]-Or-cn:Or-t[1])}const Wv=qC(function(){return!0},Mz,zz,[-kn,-Or]);function Mz(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,y){var l=d>0?kn:-kn,b=$n(d-t);$n(b-kn)<cn?(e.point(t,i=(i+y)/2>0?Or:-Or),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(d,i),c=0):a!==l&&b>=kn&&($n(t-a)<cn&&(t-=a*cn),$n(d-l)<cn&&(d-=l*cn),i=kz(t,i,d,y),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=d,i=y),a=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function kz(e,t,i,a){var c,d,y=Yt(e-i);return $n(y)>cn?xh((Yt(t)*(d=rn(a))*Yt(i)-Yt(a)*(c=rn(t))*Yt(e))/(c*d*y)):(t+a)/2}function zz(e,t,i,a){var c;if(e==null)c=i*Or,a.point(-kn,c),a.point(0,c),a.point(kn,c),a.point(kn,0),a.point(kn,-c),a.point(0,-c),a.point(-kn,-c),a.point(-kn,0),a.point(-kn,c);else if($n(e[0]-t[0])>cn){var d=e[0]<t[0]?kn:-kn;c=i*d/2,a.point(-d,c),a.point(0,c),a.point(d,c)}else a.point(t[0],t[1])}function KC(e){var t=rn(e),i=6*fn,a=t>0,c=$n(t)>cn;function d(C,E,z,O){ZC(O,e,i,z,C,E)}function y(C,E){return rn(C)*rn(E)>t}function l(C){var E,z,O,Q,K;return{lineStart:function(){Q=O=!1,K=1},point:function(pe,G){var V=[pe,G],B,oe=y(pe,G),W=a?oe?0:w(pe,G):oe?w(pe+(pe<0?kn:-kn),G):0;if(!E&&(Q=O=oe)&&C.lineStart(),oe!==O&&(B=b(E,V),(!B||Wp(E,B)||Wp(V,B))&&(V[2]=1)),oe!==O)K=0,oe?(C.lineStart(),B=b(V,E),C.point(B[0],B[1])):(B=b(E,V),C.point(B[0],B[1],2),C.lineEnd()),E=B;else if(c&&E&&a^oe){var D;!(W&z)&&(D=b(V,E,!0))&&(K=0,a?(C.lineStart(),C.point(D[0][0],D[0][1]),C.point(D[1][0],D[1][1]),C.lineEnd()):(C.point(D[1][0],D[1][1]),C.lineEnd(),C.lineStart(),C.point(D[0][0],D[0][1],3)))}oe&&(!E||!Wp(E,V))&&C.point(V[0],V[1]),E=V,O=oe,z=W},lineEnd:function(){O&&C.lineEnd(),E=null},clean:function(){return K|(Q&&O)<<1}}}function b(C,E,z){var O=ku(C),Q=ku(E),K=[1,0,0],pe=hh(O,Q),G=Ep(pe,pe),V=pe[0],B=G-V*V;if(!B)return!z&&C;var oe=t*G/B,W=-t*V/B,D=hh(K,pe),S=Sp(K,oe),P=Sp(pe,W);r0(S,P);var Z=D,J=Ep(S,Z),H=Ep(Z,Z),ye=J*J-H*(Ep(S,S)-1);if(!(ye<0)){var ve=fi(ye),xe=Sp(Z,(-J-ve)/H);if(r0(xe,S),xe=Rm(xe),!z)return xe;var te=C[0],ae=E[0],re=C[1],ie=E[1],me;ae<te&&(me=te,te=ae,ae=me);var we=ae-te,_e=$n(we-kn)<cn,$e=_e||we<cn;if(!_e&&ie<re&&(me=re,re=ie,ie=me),$e?_e?re+ie>0^xe[1]<($n(xe[0]-te)<cn?re:ie):re<=xe[1]&&xe[1]<=ie:we>kn^(te<=xe[0]&&xe[0]<=ae)){var ke=Sp(Z,(-J+ve)/H);return r0(ke,S),[xe,Rm(ke)]}}}function w(C,E){var z=a?e:kn-e,O=0;return C<-z?O|=1:C>z&&(O|=2),E<-z?O|=4:E>z&&(O|=8),O}return qC(y,l,d,a?[0,-e]:[-kn,e-kn])}function Lz(e,t,i,a,c,d){var y=e[0],l=e[1],b=t[0],w=t[1],C=0,E=1,z=b-y,O=w-l,Q;if(Q=i-y,!(!z&&Q>0)){if(Q/=z,z<0){if(Q<C)return;Q<E&&(E=Q)}else if(z>0){if(Q>E)return;Q>C&&(C=Q)}if(Q=c-y,!(!z&&Q<0)){if(Q/=z,z<0){if(Q>E)return;Q>C&&(C=Q)}else if(z>0){if(Q<C)return;Q<E&&(E=Q)}if(Q=a-l,!(!O&&Q>0)){if(Q/=O,O<0){if(Q<C)return;Q<E&&(E=Q)}else if(O>0){if(Q>E)return;Q>C&&(C=Q)}if(Q=d-l,!(!O&&Q<0)){if(Q/=O,O<0){if(Q>E)return;Q>C&&(C=Q)}else if(O>0){if(Q<C)return;Q<E&&(E=Q)}return C>0&&(e[0]=y+C*z,e[1]=l+C*O),E<1&&(t[0]=y+E*z,t[1]=l+E*O),!0}}}}}var Ef=1e9,Cp=-Ef;function Eg(e,t,i,a){function c(w,C){return e<=w&&w<=i&&t<=C&&C<=a}function d(w,C,E,z){var O=0,Q=0;if(w==null||(O=y(w,E))!==(Q=y(C,E))||b(w,C)<0^E>0)do z.point(O===0||O===3?e:i,O>1?a:t);while((O=(O+E+4)%4)!==Q);else z.point(C[0],C[1])}function y(w,C){return $n(w[0]-e)<cn?C>0?0:3:$n(w[0]-i)<cn?C>0?2:1:$n(w[1]-t)<cn?C>0?1:0:C>0?3:2}function l(w,C){return b(w.x,C.x)}function b(w,C){var E=y(w,1),z=y(C,1);return E!==z?E-z:E===0?C[1]-w[1]:E===1?w[0]-C[0]:E===2?w[1]-C[1]:C[0]-w[0]}return function(w){var C=w,E=WC(),z,O,Q,K,pe,G,V,B,oe,W,D,S={point:P,lineStart:ye,lineEnd:ve,polygonStart:J,polygonEnd:H};function P(te,ae){c(te,ae)&&C.point(te,ae)}function Z(){for(var te=0,ae=0,re=O.length;ae<re;++ae)for(var ie=O[ae],me=1,we=ie.length,_e=ie[0],$e,ke,Le=_e[0],Xe=_e[1];me<we;++me)$e=Le,ke=Xe,_e=ie[me],Le=_e[0],Xe=_e[1],ke<=a?Xe>a&&(Le-$e)*(a-ke)>(Xe-ke)*(e-$e)&&++te:Xe<=a&&(Le-$e)*(a-ke)<(Xe-ke)*(e-$e)&&--te;return te}function J(){C=E,z=[],O=[],D=!0}function H(){var te=Z(),ae=D&&te,re=(z=kC(z)).length;(ae||re)&&(w.polygonStart(),ae&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),re&&HC(z,l,te,d,w),w.polygonEnd()),C=w,z=O=Q=null}function ye(){S.point=xe,O&&O.push(Q=[]),W=!0,oe=!1,V=B=NaN}function ve(){z&&(xe(K,pe),G&&oe&&E.rejoin(),z.push(E.result())),S.point=P,oe&&C.lineEnd()}function xe(te,ae){var re=c(te,ae);if(O&&Q.push([te,ae]),W)K=te,pe=ae,G=re,W=!1,re&&(C.lineStart(),C.point(te,ae));else if(re&&oe)C.point(te,ae);else{var ie=[V=Math.max(Cp,Math.min(Ef,V)),B=Math.max(Cp,Math.min(Ef,B))],me=[te=Math.max(Cp,Math.min(Ef,te)),ae=Math.max(Cp,Math.min(Ef,ae))];Lz(ie,me,e,t,i,a)?(oe||(C.lineStart(),C.point(ie[0],ie[1])),C.point(me[0],me[1]),re||C.lineEnd(),D=!1):re&&(C.lineStart(),C.point(te,ae),D=!1)}V=te,B=ae,oe=re}return S}}function Rz(){var e=0,t=0,i=960,a=500,c,d,y;return y={stream:function(l){return c&&d===l?c:c=Eg(e,t,i,a)(d=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],a=+l[1][1],c=d=null,y):[[e,t],[i,a]]}}}var Hv,Xv,Hp,Xp,fh={sphere:Tr,point:Tr,lineStart:Oz,lineEnd:Tr,polygonStart:Tr,polygonEnd:Tr};function Oz(){fh.point=jz,fh.lineEnd=Fz}function Fz(){fh.point=fh.lineEnd=Tr}function jz(e,t){e*=fn,t*=fn,Xv=e,Hp=Yt(t),Xp=rn(t),fh.point=Dz}function Dz(e,t){e*=fn,t*=fn;var i=Yt(t),a=rn(t),c=$n(e-Xv),d=rn(c),y=Yt(c),l=a*y,b=Xp*i-Hp*a*d,w=Hp*i+Xp*a*d;Hv.add(Ji(fi(l*l+b*b),w)),Xv=e,Hp=i,Xp=a}function YC(e){return Hv=new Ri,ys(e,fh),+Hv}var qv=[null,null],Bz={type:"LineString",coordinates:qv};function Vm(e,t){return qv[0]=e,qv[1]=t,YC(Bz)}var M2={Feature:function(e,t){return Gm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if(Gm(i[a].geometry,t))return!0;return!1}},k2={Sphere:function(){return!0},Point:function(e,t){return z2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(z2(i[a],t))return!0;return!1},LineString:function(e,t){return L2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(L2(i[a],t))return!0;return!1},Polygon:function(e,t){return R2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(R2(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if(Gm(i[a],t))return!0;return!1}};function Gm(e,t){return e&&k2.hasOwnProperty(e.type)?k2[e.type](e,t):!1}function z2(e,t){return Vm(e,t)===0}function L2(e,t){for(var i,a,c,d=0,y=e.length;d<y;d++){if(a=Vm(e[d],t),a===0||d>0&&(c=Vm(e[d],e[d-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<ld*c))return!0;i=a}return!1}function R2(e,t){return!!XC(e.map(Nz),JC(t))}function Nz(e){return e=e.map(JC),e.pop(),e}function JC(e){return[e[0]*fn,e[1]*fn]}function Uz(e,t){return(e&&M2.hasOwnProperty(e.type)?M2[e.type]:Gm)(e,t)}function O2(e,t,i){var a=Wc(e,t-cn,i).concat(t);return function(c){return a.map(function(d){return[c,d]})}}function F2(e,t,i){var a=Wc(e,t-cn,i).concat(t);return function(c){return a.map(function(d){return[d,c]})}}function QC(){var e,t,i,a,c,d,y,l,b=10,w=b,C=90,E=360,z,O,Q,K,pe=2.5;function G(){return{type:"MultiLineString",coordinates:V()}}function V(){return Wc(bp(a/C)*C,i,C).map(Q).concat(Wc(bp(l/E)*E,y,E).map(K)).concat(Wc(bp(t/b)*b,e,b).filter(function(B){return $n(B%C)>cn}).map(z)).concat(Wc(bp(d/w)*w,c,w).filter(function(B){return $n(B%E)>cn}).map(O))}return G.lines=function(){return V().map(function(B){return{type:"LineString",coordinates:B}})},G.outline=function(){return{type:"Polygon",coordinates:[Q(a).concat(K(y).slice(1),Q(i).reverse().slice(1),K(l).reverse().slice(1))]}},G.extent=function(B){return arguments.length?G.extentMajor(B).extentMinor(B):G.extentMinor()},G.extentMajor=function(B){return arguments.length?(a=+B[0][0],i=+B[1][0],l=+B[0][1],y=+B[1][1],a>i&&(B=a,a=i,i=B),l>y&&(B=l,l=y,y=B),G.precision(pe)):[[a,l],[i,y]]},G.extentMinor=function(B){return arguments.length?(t=+B[0][0],e=+B[1][0],d=+B[0][1],c=+B[1][1],t>e&&(B=t,t=e,e=B),d>c&&(B=d,d=c,c=B),G.precision(pe)):[[t,d],[e,c]]},G.step=function(B){return arguments.length?G.stepMajor(B).stepMinor(B):G.stepMinor()},G.stepMajor=function(B){return arguments.length?(C=+B[0],E=+B[1],G):[C,E]},G.stepMinor=function(B){return arguments.length?(b=+B[0],w=+B[1],G):[b,w]},G.precision=function(B){return arguments.length?(pe=+B,z=O2(d,c,90),O=F2(t,e,pe),Q=O2(l,y,90),K=F2(a,i,pe),G):pe},G.extentMajor([[-180,-90+cn],[180,90-cn]]).extentMinor([[-180,-80-cn],[180,80+cn]])}function $z(){return QC()()}function Vz(e,t){var i=e[0]*fn,a=e[1]*fn,c=t[0]*fn,d=t[1]*fn,y=rn(a),l=Yt(a),b=rn(d),w=Yt(d),C=y*rn(i),E=y*Yt(i),z=b*rn(c),O=b*Yt(c),Q=2*Qi(fi(g2(d-a)+y*b*g2(c-i))),K=Yt(Q),pe=Q?function(G){var V=Yt(G*=Q)/K,B=Yt(Q-G)/K,oe=B*C+V*z,W=B*E+V*O,D=B*l+V*w;return[Ji(W,oe)*ar,Ji(D,fi(oe*oe+W*W))*ar]}:function(){return[i*ar,a*ar]};return pe.distance=Q,pe}const ud=e=>e;var o0=new Ri,Kv=new Ri,eI,tI,Yv,Jv,yl={point:Tr,lineStart:Tr,lineEnd:Tr,polygonStart:function(){yl.lineStart=Gz,yl.lineEnd=Wz},polygonEnd:function(){yl.lineStart=yl.lineEnd=yl.point=Tr,o0.add($n(Kv)),Kv=new Ri},result:function(){var e=o0/2;return o0=new Ri,e}};function Gz(){yl.point=Zz}function Zz(e,t){yl.point=nI,eI=Yv=e,tI=Jv=t}function nI(e,t){Kv.add(Jv*e-Yv*t),Yv=e,Jv=t}function Wz(){nI(eI,tI)}const j2=yl;var dh=1/0,Zm=dh,cd=-dh,Wm=cd,Hz={point:Xz,lineStart:Tr,lineEnd:Tr,polygonStart:Tr,polygonEnd:Tr,result:function(){var e=[[dh,Zm],[cd,Wm]];return cd=Wm=-(Zm=dh=1/0),e}};function Xz(e,t){e<dh&&(dh=e),e>cd&&(cd=e),t<Zm&&(Zm=t),t>Wm&&(Wm=t)}const Hm=Hz;var Qv=0,e_=0,Sf=0,Xm=0,qm=0,Hc=0,t_=0,n_=0,Tf=0,rI,iI,$s,Vs,vs={point:zu,lineStart:D2,lineEnd:B2,polygonStart:function(){vs.lineStart=Yz,vs.lineEnd=Jz},polygonEnd:function(){vs.point=zu,vs.lineStart=D2,vs.lineEnd=B2},result:function(){var e=Tf?[t_/Tf,n_/Tf]:Hc?[Xm/Hc,qm/Hc]:Sf?[Qv/Sf,e_/Sf]:[NaN,NaN];return Qv=e_=Sf=Xm=qm=Hc=t_=n_=Tf=0,e}};function zu(e,t){Qv+=e,e_+=t,++Sf}function D2(){vs.point=qz}function qz(e,t){vs.point=Kz,zu($s=e,Vs=t)}function Kz(e,t){var i=e-$s,a=t-Vs,c=fi(i*i+a*a);Xm+=c*($s+e)/2,qm+=c*(Vs+t)/2,Hc+=c,zu($s=e,Vs=t)}function B2(){vs.point=zu}function Yz(){vs.point=Qz}function Jz(){oI(rI,iI)}function Qz(e,t){vs.point=oI,zu(rI=$s=e,iI=Vs=t)}function oI(e,t){var i=e-$s,a=t-Vs,c=fi(i*i+a*a);Xm+=c*($s+e)/2,qm+=c*(Vs+t)/2,Hc+=c,c=Vs*e-$s*t,t_+=c*($s+e),n_+=c*(Vs+t),Tf+=c*3,zu($s=e,Vs=t)}const N2=vs;function sI(e){this._context=e}sI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Yi);break}}},result:Tr};var r_=new Ri,s0,aI,lI,Cf,If,Km={point:Tr,lineStart:function(){Km.point=eL},lineEnd:function(){s0&&uI(aI,lI),Km.point=Tr},polygonStart:function(){s0=!0},polygonEnd:function(){s0=null},result:function(){var e=+r_;return r_=new Ri,e}};function eL(e,t){Km.point=uI,aI=Cf=e,lI=If=t}function uI(e,t){Cf-=e,If-=t,r_.add(fi(Cf*Cf+If*If)),Cf=e,If=t}const U2=Km;function cI(){this._string=[]}cI.prototype={_radius:4.5,_circle:$2(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=$2(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function $2(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function tL(e,t){var i=4.5,a,c;function d(y){return y&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),ys(y,a(c))),c.result()}return d.area=function(y){return ys(y,a(j2)),j2.result()},d.measure=function(y){return ys(y,a(U2)),U2.result()},d.bounds=function(y){return ys(y,a(Hm)),Hm.result()},d.centroid=function(y){return ys(y,a(N2)),N2.result()},d.projection=function(y){return arguments.length?(a=y==null?(e=null,ud):(e=y).stream,d):e},d.context=function(y){return arguments.length?(c=y==null?(t=null,new cI):new sI(t=y),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(y){return arguments.length?(i=typeof y=="function"?y:(c.pointRadius(+y),+y),d):i},d.projection(e).context(t)}function nL(e){return{stream:wd(e)}}function wd(e){return function(t){var i=new i_;for(var a in e)i[a]=e[a];return i.stream=t,i}}function i_(){}i_.prototype={constructor:i_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function S1(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),ys(i,e.stream(Hm)),t(Hm.result()),a!=null&&e.clipExtent(a),e}function Sg(e,t,i){return S1(e,function(a){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],y=Math.min(c/(a[1][0]-a[0][0]),d/(a[1][1]-a[0][1])),l=+t[0][0]+(c-y*(a[1][0]+a[0][0]))/2,b=+t[0][1]+(d-y*(a[1][1]+a[0][1]))/2;e.scale(150*y).translate([l,b])},i)}function T1(e,t,i){return Sg(e,[[0,0],t],i)}function C1(e,t,i){return S1(e,function(a){var c=+t,d=c/(a[1][0]-a[0][0]),y=(c-d*(a[1][0]+a[0][0]))/2,l=-d*a[0][1];e.scale(150*d).translate([y,l])},i)}function I1(e,t,i){return S1(e,function(a){var c=+t,d=c/(a[1][1]-a[0][1]),y=-d*a[0][0],l=(c-d*(a[1][1]+a[0][1]))/2;e.scale(150*d).translate([y,l])},i)}var V2=16,rL=rn(30*fn);function G2(e,t){return+t?oL(e,t):iL(e)}function iL(e){return wd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function oL(e,t){function i(a,c,d,y,l,b,w,C,E,z,O,Q,K,pe){var G=w-a,V=C-c,B=G*G+V*V;if(B>4*t&&K--){var oe=y+z,W=l+O,D=b+Q,S=fi(oe*oe+W*W+D*D),P=Qi(D/=S),Z=$n($n(D)-1)<cn||$n(d-E)<cn?(d+E)/2:Ji(W,oe),J=e(Z,P),H=J[0],ye=J[1],ve=H-a,xe=ye-c,te=V*ve-G*xe;(te*te/B>t||$n((G*ve+V*xe)/B-.5)>.3||y*z+l*O+b*Q<rL)&&(i(a,c,d,y,l,b,H,ye,Z,oe/=S,W/=S,D,K,pe),pe.point(H,ye),i(H,ye,Z,oe,W,D,w,C,E,z,O,Q,K,pe))}}return function(a){var c,d,y,l,b,w,C,E,z,O,Q,K,pe={point:G,lineStart:V,lineEnd:oe,polygonStart:function(){a.polygonStart(),pe.lineStart=W},polygonEnd:function(){a.polygonEnd(),pe.lineStart=V}};function G(P,Z){P=e(P,Z),a.point(P[0],P[1])}function V(){E=NaN,pe.point=B,a.lineStart()}function B(P,Z){var J=ku([P,Z]),H=e(P,Z);i(E,z,C,O,Q,K,E=H[0],z=H[1],C=P,O=J[0],Q=J[1],K=J[2],V2,a),a.point(E,z)}function oe(){pe.point=G,a.lineEnd()}function W(){V(),pe.point=D,pe.lineEnd=S}function D(P,Z){B(c=P,Z),d=E,y=z,l=O,b=Q,w=K,pe.point=B}function S(){i(E,z,C,O,Q,K,d,y,c,l,b,w,V2,a),pe.lineEnd=oe,oe()}return pe}}var sL=wd({point:function(e,t){this.stream.point(e*fn,t*fn)}});function aL(e){return wd({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function lL(e,t,i,a,c){function d(y,l){return y*=a,l*=c,[t+e*y,i-e*l]}return d.invert=function(y,l){return[(y-t)/e*a,(i-l)/e*c]},d}function Z2(e,t,i,a,c,d){if(!d)return lL(e,t,i,a,c);var y=rn(d),l=Yt(d),b=y*e,w=l*e,C=y/e,E=l/e,z=(l*i-y*t)/e,O=(l*t+y*i)/e;function Q(K,pe){return K*=a,pe*=c,[b*K-w*pe+t,i-w*K-b*pe]}return Q.invert=function(K,pe){return[a*(C*K-E*pe+z),c*(O-E*K-C*pe)]},Q}function Ks(e){return A1(function(){return e})()}function A1(e){var t,i=150,a=480,c=250,d=0,y=0,l=0,b=0,w=0,C,E=0,z=1,O=1,Q=null,K=Wv,pe=null,G,V,B,oe=ud,W=.5,D,S,P,Z,J;function H(te){return P(te[0]*fn,te[1]*fn)}function ye(te){return te=P.invert(te[0],te[1]),te&&[te[0]*ar,te[1]*ar]}H.stream=function(te){return Z&&J===te?Z:Z=sL(aL(C)(K(D(oe(J=te)))))},H.preclip=function(te){return arguments.length?(K=te,Q=void 0,xe()):K},H.postclip=function(te){return arguments.length?(oe=te,pe=G=V=B=null,xe()):oe},H.clipAngle=function(te){return arguments.length?(K=+te?KC(Q=te*fn):(Q=null,Wv),xe()):Q*ar},H.clipExtent=function(te){return arguments.length?(oe=te==null?(pe=G=V=B=null,ud):Eg(pe=+te[0][0],G=+te[0][1],V=+te[1][0],B=+te[1][1]),xe()):pe==null?null:[[pe,G],[V,B]]},H.scale=function(te){return arguments.length?(i=+te,ve()):i},H.translate=function(te){return arguments.length?(a=+te[0],c=+te[1],ve()):[a,c]},H.center=function(te){return arguments.length?(d=te[0]%360*fn,y=te[1]%360*fn,ve()):[d*ar,y*ar]},H.rotate=function(te){return arguments.length?(l=te[0]%360*fn,b=te[1]%360*fn,w=te.length>2?te[2]%360*fn:0,ve()):[l*ar,b*ar,w*ar]},H.angle=function(te){return arguments.length?(E=te%360*fn,ve()):E*ar},H.reflectX=function(te){return arguments.length?(z=te?-1:1,ve()):z<0},H.reflectY=function(te){return arguments.length?(O=te?-1:1,ve()):O<0},H.precision=function(te){return arguments.length?(D=G2(S,W=te*te),xe()):fi(W)},H.fitExtent=function(te,ae){return Sg(H,te,ae)},H.fitSize=function(te,ae){return T1(H,te,ae)},H.fitWidth=function(te,ae){return C1(H,te,ae)},H.fitHeight=function(te,ae){return I1(H,te,ae)};function ve(){var te=Z2(i,0,0,z,O,E).apply(null,t(d,y)),ae=Z2(i,a-te[0],c-te[1],z,O,E);return C=E1(l,b,w),S=Gv(t,ae),P=Gv(C,S),D=G2(S,W),xe()}function xe(){return Z=J=null,H}return function(){return t=e.apply(this,arguments),H.invert=t.invert&&ye,ve()}}function P1(e){var t=0,i=kn/3,a=A1(e),c=a(t,i);return c.parallels=function(d){return arguments.length?a(t=d[0]*fn,i=d[1]*fn):[t*ar,i*ar]},c}function uL(e){var t=rn(e);function i(a,c){return[a*t,Yt(c)/t]}return i.invert=function(a,c){return[a/t,Qi(c*t)]},i}function hI(e,t){var i=Yt(e),a=(i+Yt(t))/2;if($n(a)<cn)return uL(e);var c=1+i*(2*a-i),d=fi(c)/a;function y(l,b){var w=fi(c-2*a*Yt(b))/a;return[w*Yt(l*=a),d-w*rn(l)]}return y.invert=function(l,b){var w=d-b,C=Ji(l,$n(w))*qo(w);return w*a<0&&(C-=kn*qo(l)*qo(w)),[C/a,Qi((c-(l*l+w*w)*a*a)/(2*a))]},y}function Ym(){return P1(hI).scale(155.424).center([0,33.6442])}function fI(){return Ym().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function cL(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function hL(){var e,t,i=fI(),a,c=Ym().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,y=Ym().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,b,w={point:function(z,O){b=[z,O]}};function C(z){var O=z[0],Q=z[1];return b=null,a.point(O,Q),b||(d.point(O,Q),b)||(l.point(O,Q),b)}C.invert=function(z){var O=i.scale(),Q=i.translate(),K=(z[0]-Q[0])/O,pe=(z[1]-Q[1])/O;return(pe>=.12&&pe<.234&&K>=-.425&&K<-.214?c:pe>=.166&&pe<.234&&K>=-.214&&K<-.115?y:i).invert(z)},C.stream=function(z){return e&&t===z?e:e=cL([i.stream(t=z),c.stream(z),y.stream(z)])},C.precision=function(z){return arguments.length?(i.precision(z),c.precision(z),y.precision(z),E()):i.precision()},C.scale=function(z){return arguments.length?(i.scale(z),c.scale(z*.35),y.scale(z),C.translate(i.translate())):i.scale()},C.translate=function(z){if(!arguments.length)return i.translate();var O=i.scale(),Q=+z[0],K=+z[1];return a=i.translate(z).clipExtent([[Q-.455*O,K-.238*O],[Q+.455*O,K+.238*O]]).stream(w),d=c.translate([Q-.307*O,K+.201*O]).clipExtent([[Q-.425*O+cn,K+.12*O+cn],[Q-.214*O-cn,K+.234*O-cn]]).stream(w),l=y.translate([Q-.205*O,K+.212*O]).clipExtent([[Q-.214*O+cn,K+.166*O+cn],[Q-.115*O-cn,K+.234*O-cn]]).stream(w),E()},C.fitExtent=function(z,O){return Sg(C,z,O)},C.fitSize=function(z,O){return T1(C,z,O)},C.fitWidth=function(z,O){return C1(C,z,O)},C.fitHeight=function(z,O){return I1(C,z,O)};function E(){return e=t=null,C}return C.scale(1070)}function dI(e){return function(t,i){var a=rn(t),c=rn(i),d=e(a*c);return d===1/0?[2,0]:[d*c*Yt(t),d*Yt(i)]}}function bd(e){return function(t,i){var a=fi(t*t+i*i),c=e(a),d=Yt(c),y=rn(c);return[Ji(t*d,a*y),Qi(a&&i*d/a)]}}var M1=dI(function(e){return fi(2/(1+e))});M1.invert=bd(function(e){return 2*Qi(e/2)});function fL(){return Ks(M1).scale(124.75).clipAngle(180-.001)}var k1=dI(function(e){return(e=LC(e))&&e/Yt(e)});k1.invert=bd(function(e){return e});function dL(){return Ks(k1).scale(79.4188).clipAngle(180-.001)}function Ed(e,t){return[e,Mm(w1((Or+t)/2))]}Ed.invert=function(e,t){return[e,2*xh(zC(t))-Or]};function pL(){return pI(Ed).scale(961/Yi)}function pI(e){var t=Ks(e),i=t.center,a=t.scale,c=t.translate,d=t.clipExtent,y=null,l,b,w;t.scale=function(E){return arguments.length?(a(E),C()):a()},t.translate=function(E){return arguments.length?(c(E),C()):c()},t.center=function(E){return arguments.length?(i(E),C()):i()},t.clipExtent=function(E){return arguments.length?(E==null?y=l=b=w=null:(y=+E[0][0],l=+E[0][1],b=+E[1][0],w=+E[1][1]),C()):y==null?null:[[y,l],[b,w]]};function C(){var E=kn*a(),z=t(GC(t.rotate()).invert([0,0]));return d(y==null?[[z[0]-E,z[1]-E],[z[0]+E,z[1]+E]]:e===Ed?[[Math.max(z[0]-E,y),l],[Math.min(z[0]+E,b),w]]:[[y,Math.max(z[1]-E,l)],[b,Math.min(z[1]+E,w)]])}return C()}function Ip(e){return w1((Or+e)/2)}function mI(e,t){var i=rn(e),a=e===t?Yt(e):Mm(i/rn(t))/Mm(Ip(t)/Ip(e)),c=i*n0(Ip(e),a)/a;if(!a)return Ed;function d(y,l){c>0?l<-Or+cn&&(l=-Or+cn):l>Or-cn&&(l=Or-cn);var b=c/n0(Ip(l),a);return[b*Yt(a*y),c-b*rn(a*y)]}return d.invert=function(y,l){var b=c-l,w=qo(a)*fi(y*y+b*b),C=Ji(y,$n(b))*qo(b);return b*a<0&&(C-=kn*qo(y)*qo(b)),[C/a,2*xh(n0(c/w,1/a))-Or]},d}function mL(){return P1(mI).scale(109.5).parallels([30,30])}function hd(e,t){return[e,t]}hd.invert=hd;function gL(){return Ks(hd).scale(152.63)}function gI(e,t){var i=rn(e),a=e===t?Yt(e):(i-rn(t))/(t-e),c=i/a+e;if($n(a)<cn)return hd;function d(y,l){var b=c-l,w=a*y;return[b*Yt(w),c-b*rn(w)]}return d.invert=function(y,l){var b=c-l,w=Ji(y,$n(b))*qo(b);return b*a<0&&(w-=kn*qo(y)*qo(b)),[w/a,c-qo(a)*fi(y*y+b*b)]},d}function yL(){return P1(gI).scale(131.154).center([0,13.9389])}var Nf=1.340264,Uf=-.081106,$f=893e-6,Vf=.003796,Jm=fi(3)/2,vL=12;function z1(e,t){var i=Qi(Jm*Yt(t)),a=i*i,c=a*a*a;return[e*rn(i)/(Jm*(Nf+3*Uf*a+c*(7*$f+9*Vf*a))),i*(Nf+Uf*a+c*($f+Vf*a))]}z1.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,d=0,y,l,b;d<vL&&(l=i*(Nf+Uf*a+c*($f+Vf*a))-t,b=Nf+3*Uf*a+c*(7*$f+9*Vf*a),i-=y=l/b,a=i*i,c=a*a*a,!($n(y)<ld));++d);return[Jm*e*(Nf+3*Uf*a+c*(7*$f+9*Vf*a))/rn(i),Qi(Yt(i)/Jm)]};function _L(){return Ks(z1).scale(177.158)}function L1(e,t){var i=rn(t),a=rn(e)*i;return[i*Yt(e)/a,Yt(t)/a]}L1.invert=bd(xh);function xL(){return Ks(L1).scale(144.049).clipAngle(60)}function wL(){var e=1,t=0,i=0,a=1,c=1,d=0,y,l,b=null,w,C,E,z=1,O=1,Q=wd({point:function(oe,W){var D=B([oe,W]);this.stream.point(D[0],D[1])}}),K=ud,pe,G;function V(){return z=e*a,O=e*c,pe=G=null,B}function B(oe){var W=oe[0]*z,D=oe[1]*O;if(d){var S=D*y-W*l;W=W*y+D*l,D=S}return[W+t,D+i]}return B.invert=function(oe){var W=oe[0]-t,D=oe[1]-i;if(d){var S=D*y+W*l;W=W*y-D*l,D=S}return[W/z,D/O]},B.stream=function(oe){return pe&&G===oe?pe:pe=Q(K(G=oe))},B.postclip=function(oe){return arguments.length?(K=oe,b=w=C=E=null,V()):K},B.clipExtent=function(oe){return arguments.length?(K=oe==null?(b=w=C=E=null,ud):Eg(b=+oe[0][0],w=+oe[0][1],C=+oe[1][0],E=+oe[1][1]),V()):b==null?null:[[b,w],[C,E]]},B.scale=function(oe){return arguments.length?(e=+oe,V()):e},B.translate=function(oe){return arguments.length?(t=+oe[0],i=+oe[1],V()):[t,i]},B.angle=function(oe){return arguments.length?(d=oe%360*fn,l=Yt(d),y=rn(d),V()):d*ar},B.reflectX=function(oe){return arguments.length?(a=oe?-1:1,V()):a<0},B.reflectY=function(oe){return arguments.length?(c=oe?-1:1,V()):c<0},B.fitExtent=function(oe,W){return Sg(B,oe,W)},B.fitSize=function(oe,W){return T1(B,oe,W)},B.fitWidth=function(oe,W){return C1(B,oe,W)},B.fitHeight=function(oe,W){return I1(B,oe,W)},B}function R1(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}R1.invert=function(e,t){var i=t,a=25,c;do{var d=i*i,y=d*d;i-=c=(i*(1.007226+d*(.015085+y*(-.044475+.028874*d-.005916*y)))-t)/(1.007226+d*(.015085*3+y*(-.044475*7+.028874*9*d-.005916*11*y)))}while($n(c)>cn&&--a>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function bL(){return Ks(R1).scale(175.295)}function O1(e,t){return[rn(t)*Yt(e),Yt(t)]}O1.invert=bd(Qi);function EL(){return Ks(O1).scale(249.5).clipAngle(90+cn)}function F1(e,t){var i=rn(t),a=1+rn(e)*i;return[i*Yt(e)/a,Yt(t)/a]}F1.invert=bd(function(e){return 2*xh(e)});function SL(){return Ks(F1).scale(250).clipAngle(142)}function j1(e,t){return[Mm(w1((Or+t)/2)),-e]}j1.invert=function(e,t){return[-t,2*xh(zC(e))-Or]};function TL(){var e=pI(j1),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const CL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:fI,geoAlbersUsa:hL,geoArea:gz,geoAzimuthalEqualArea:fL,geoAzimuthalEqualAreaRaw:M1,geoAzimuthalEquidistant:dL,geoAzimuthalEquidistantRaw:k1,geoBounds:xz,geoCentroid:Cz,geoCircle:Iz,geoClipAntimeridian:Wv,geoClipCircle:KC,geoClipExtent:Rz,geoClipRectangle:Eg,geoConicConformal:mL,geoConicConformalRaw:mI,geoConicEqualArea:Ym,geoConicEqualAreaRaw:hI,geoConicEquidistant:yL,geoConicEquidistantRaw:gI,geoContains:Uz,geoDistance:Vm,geoEqualEarth:_L,geoEqualEarthRaw:z1,geoEquirectangular:gL,geoEquirectangularRaw:hd,geoGnomonic:xL,geoGnomonicRaw:L1,geoGraticule:QC,geoGraticule10:$z,geoIdentity:wL,geoInterpolate:Vz,geoLength:YC,geoMercator:pL,geoMercatorRaw:Ed,geoNaturalEarth1:bL,geoNaturalEarth1Raw:R1,geoOrthographic:EL,geoOrthographicRaw:O1,geoPath:tL,geoProjection:Ks,geoProjectionMutator:A1,geoRotation:GC,geoStereographic:SL,geoStereographicRaw:F1,geoStream:ys,geoTransform:nL,geoTransverseMercator:TL,geoTransverseMercatorRaw:j1},Symbol.toStringTag,{value:"Module"})),IL=h_(CL);var Ll=2*Math.PI*6378137/2,AL=Math.PI/180;function yI(e){return e=e||256,2*Math.PI*6378137/e}function PL(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function o_(e,t,i){var a=vI(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function vI(e,t,i){var a=t,c=Z1(e[0]),d=G1(e[1]),y=Math.sin(d*AL),l=Math.pow(2,a),b=l*(c/360+.5),w=l*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return Fu([b,w,a],i)}function ML(e,t=6){var i=e[0],a=e[1],c=e[2],d=e[3],y=(i-c)/2+c,l=(a-d)/2+d;return t!=null&&(y=Number(y.toFixed(t)),l=Number(l.toFixed(t))),[y,l]}function Qm(e,t,i={enable:!0,decimal:1}){e=Tg(e,t);var a=e[0],c=e[1],d=a*Ll/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*Ll/180,i.enable&&(d=Number(d.toFixed(i.decimal)),y=Number(y.toFixed(i.decimal))),[d,y]}function s_(e,t=6){var i=e[0],a=e[1],c=i/Ll*180,d=a/Ll*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function D1(e,t,i){var a=e[0],c=e[1],d=$1(t,i),y=(a+Ll)/d,l=(c+Ll)/d;return[y,l,t]}function _I(e,t,i){e=Tg(e,i);var a=Qm(e),c=D1(a,t);return B1(c)}function kL(e,t,i){if(e=Tg(e,i),t===0)return[0,0,0];var a=_I(e,t);return wI(a)}function zL(e,t){if(t===0)return[0,0,0];var i=D1(e,t);return B1(i)}function a_(e,t,i=1){var a=e[0],c=e[1],d=e[2],y=$1(d,t),l=a*y-Ll,b=c*y-Ll;return i!=null&&(l=Number(l.toFixed(i)),b=Number(b.toFixed(i))),[l,b]}function B1(e,t,i){t=t||256;var a=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];U1(d);var y=Math.ceil(a/t)-1,l=Math.ceil(c/t)-1;return y<0&&(y=0),l<0&&(l=0),[y,l,d]}function N1(e,t,i){Fu(e,i),t=t||256;var a=e[0],c=e[1],d=e[2],y=a_([a*t,c*t,d]),l=a_([(a+1)*t,(c+1)*t,d]);return[y[0],y[1],l[0],l[1]]}function xI(e,t){Fu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=N1([i,a,c]),y=d[0],l=d[1],b=d[2],w=d[3],C=s_([y,l,c]),E=s_([b,w,c]);return[C[0],C[1],E[0],E[1]]}function LL(e){var t=Sd(e);return N1(t)}function RL(e){var t=Sd(e);return xI(t)}function wI(e,t){Fu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,y=Math.pow(2,c)-1-a;return[d,y,c]}function Sd(e){var t=e[0],i=e[1],a=e[2],c=t,d=Math.pow(2,a)-i-1;return[c,d,a]}function OL(e){var t=Sd(e);return bI(t)}function bI(e,t){Fu(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var d="";return a=Math.pow(2,c)-1-a,V1(c,0,-1).map(function(y){var l=0,b=1<<y-1;i&b&&(l+=1),a&b&&(l+=2),d=d.concat(l)}),d}function FL(e){var t=EI(e);return Sd(t)}function EI(e){var t=0,i=0,a=e.length;return V1(a,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function jL(e){var t=Qm([e[0],e[1]]),i=Qm([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Fu(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=U1(c),e=SI(e),e}function SI(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function U1(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Tg(e,t){if(t===!1)return e;var i=Z1(e[0]),a=G1(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function $1(e,t){return yI(t)/Math.pow(2,e)}function V1(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),d=0;d<a;d++,e+=i)c[d]=e;return c}function DL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>a&&(a=d[2]),d[3]>c&&(c=d[3])}),[t,i,a,c]}}function BL(e){try{return Fu(e),!0}catch{return!1}}function G1(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Z1(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function NL(e){var t=o_([e[0],e[1]],32),i=o_([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=UL(a);if(c===0)return[0,0,0];var d=a[0]>>>32-c,y=a[1]>>>32-c;return[d,y,c]}function UL(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const $L=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:ML,bboxToMeters:jL,bboxToTile:NL,googleToBBox:RL,googleToBBoxMeters:LL,googleToQuadkey:OL,googleToTile:Sd,hash:PL,initialResolution:yI,latitude:G1,lngLatToGoogle:kL,lngLatToMeters:Qm,lngLatToTile:_I,longitude:Z1,maxBBox:DL,metersToLngLat:s_,metersToPixels:D1,metersToTile:zL,pixelsToMeters:a_,pixelsToTile:B1,pointToTile:o_,pointToTileFraction:vI,quadkeyToGoogle:EI,quadkeyToTile:FL,range:V1,resolution:$1,tileToBBox:xI,tileToBBoxMeters:N1,tileToGoogle:wI,tileToQuadkey:bI,validTile:BL,validateLngLat:Tg,validateTile:Fu,validateZoom:U1,wrapTile:SI},Symbol.toStringTag,{value:"Module"})),VL=h_($L);var Cg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Cg.read=function(e,t,i,a,c){var d,y,l=c*8-a-1,b=(1<<l)-1,w=b>>1,C=-7,E=i?c-1:0,z=i?-1:1,O=e[t+E];for(E+=z,d=O&(1<<-C)-1,O>>=-C,C+=l;C>0;d=d*256+e[t+E],E+=z,C-=8);for(y=d&(1<<-C)-1,d>>=-C,C+=a;C>0;y=y*256+e[t+E],E+=z,C-=8);if(d===0)d=1-w;else{if(d===b)return y?NaN:(O?-1:1)*(1/0);y=y+Math.pow(2,a),d=d-w}return(O?-1:1)*y*Math.pow(2,d-a)};Cg.write=function(e,t,i,a,c,d){var y,l,b,w=d*8-c-1,C=(1<<w)-1,E=C>>1,z=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=a?0:d-1,Q=a?1:-1,K=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,y=C):(y=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-y))<1&&(y--,b*=2),y+E>=1?t+=z/b:t+=z*Math.pow(2,1-E),t*b>=2&&(y++,b/=2),y+E>=C?(l=0,y=C):y+E>=1?(l=(t*b-1)*Math.pow(2,c),y=y+E):(l=t*Math.pow(2,E-1)*Math.pow(2,c),y=0));c>=8;e[i+O]=l&255,O+=Q,l/=256,c-=8);for(y=y<<c|l,w+=c;w>0;e[i+O]=y&255,O+=Q,y/=256,w-=8);e[i+O-Q]|=K*128};var GL=qn,Ap=Cg;function qn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0;qn.Fixed64=1;qn.Bytes=2;qn.Fixed32=5;var l_=(1<<16)*(1<<16),W2=1/l_,ZL=12,TI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,d=this.pos;this.type=a&7,e(c,t,this),this.pos===d&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Pp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=X2(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Pp(this.buf,this.pos)+Pp(this.buf,this.pos+4)*l_;return this.pos+=8,e},readSFixed64:function(){var e=Pp(this.buf,this.pos)+X2(this.buf,this.pos+4)*l_;return this.pos+=8,e},readFloat:function(){var e=Ap.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ap.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,WL(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=ZL&&TI?sR(this.buf,t,e):oR(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qn.Bytes)return e.push(this.readVarint(t));var i=xa(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qn.Bytes)return e.push(this.readSVarint());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qn.Bytes)return e.push(this.readBoolean());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qn.Bytes)return e.push(this.readFloat());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qn.Bytes)return e.push(this.readDouble());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed32());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed32());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed64());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed64());var t=xa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qn.Varint)for(;this.buf[this.pos++]>127;);else if(t===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qn.Fixed32)this.pos+=4;else if(t===qn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Ic(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Ic(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Ic(this.buf,e&-1,this.pos),Ic(this.buf,Math.floor(e*W2),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Ic(this.buf,e&-1,this.pos),Ic(this.buf,Math.floor(e*W2),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){HL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=aR(this.buf,e,this.pos);var i=this.pos-t;i>=128&&H2(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Ap.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Ap.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&H2(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,qn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,KL,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,YL,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,eR,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,JL,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,QL,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,tR,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,nR,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,rR,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,iR,t)},writeBytesField:function(e,t){this.writeTag(e,qn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function WL(e,t,i){var a=i.buf,c,d;if(d=a[i.pos++],c=(d&112)>>4,d<128||(d=a[i.pos++],c|=(d&127)<<3,d<128)||(d=a[i.pos++],c|=(d&127)<<10,d<128)||(d=a[i.pos++],c|=(d&127)<<17,d<128)||(d=a[i.pos++],c|=(d&127)<<24,d<128)||(d=a[i.pos++],c|=(d&1)<<31,d<128))return Cc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function xa(e){return e.type===qn.Bytes?e.readVarint()+e.pos:e.pos+1}function Cc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function HL(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),XL(i,a,t),qL(a,t)}function XL(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function qL(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function H2(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function KL(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function YL(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function JL(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function QL(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function eR(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function tR(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function nR(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function rR(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function iR(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Pp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Ic(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function X2(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function oR(e,t,i){for(var a="",c=t;c<i;){var d=e[c],y=null,l=d>239?4:d>223?3:d>191?2:1;if(c+l>i)break;var b,w,C;l===1?d<128&&(y=d):l===2?(b=e[c+1],(b&192)===128&&(y=(d&31)<<6|b&63,y<=127&&(y=null))):l===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(y=(d&15)<<12|(b&63)<<6|w&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):l===4&&(b=e[c+1],w=e[c+2],C=e[c+3],(b&192)===128&&(w&192)===128&&(C&192)===128&&(y=(d&15)<<18|(b&63)<<12|(w&63)<<6|C&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,l=1):y>65535&&(y-=65536,a+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),a+=String.fromCharCode(y),c+=l}return a}function sR(e,t,i){return TI.decode(e.subarray(t,i))}function aR(e,t,i){for(var a=0,c,d;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var W1={exports:{}},CI=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},lR=CI,ju=Object.prototype.toString;function H1(e){return ju.call(e)==="[object Array]"}function u_(e){return typeof e>"u"}function uR(e){return e!==null&&!u_(e)&&e.constructor!==null&&!u_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function cR(e){return ju.call(e)==="[object ArrayBuffer]"}function hR(e){return typeof FormData<"u"&&e instanceof FormData}function fR(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function dR(e){return typeof e=="string"}function pR(e){return typeof e=="number"}function II(e){return e!==null&&typeof e=="object"}function qp(e){if(ju.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function mR(e){return ju.call(e)==="[object Date]"}function gR(e){return ju.call(e)==="[object File]"}function yR(e){return ju.call(e)==="[object Blob]"}function AI(e){return ju.call(e)==="[object Function]"}function vR(e){return II(e)&&AI(e.pipe)}function _R(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function xR(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function wR(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function X1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),H1(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function c_(){var e={};function t(c,d){qp(e[d])&&qp(c)?e[d]=c_(e[d],c):qp(c)?e[d]=c_({},c):H1(c)?e[d]=c.slice():e[d]=c}for(var i=0,a=arguments.length;i<a;i++)X1(arguments[i],t);return e}function bR(e,t,i){return X1(t,function(c,d){i&&typeof c=="function"?e[d]=lR(c,i):e[d]=c}),e}function ER(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Oo={isArray:H1,isArrayBuffer:cR,isBuffer:uR,isFormData:hR,isArrayBufferView:fR,isString:dR,isNumber:pR,isObject:II,isPlainObject:qp,isUndefined:u_,isDate:mR,isFile:gR,isBlob:yR,isFunction:AI,isStream:vR,isURLSearchParams:_R,isStandardBrowserEnv:wR,forEach:X1,merge:c_,extend:bR,trim:xR,stripBOM:ER},Ac=Oo;function q2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var PI=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Ac.isURLSearchParams(i))c=i.toString();else{var d=[];Ac.forEach(i,function(b,w){b===null||typeof b>"u"||(Ac.isArray(b)?w=w+"[]":b=[b],Ac.forEach(b,function(E){Ac.isDate(E)?E=E.toISOString():Ac.isObject(E)&&(E=JSON.stringify(E)),d.push(q2(w)+"="+q2(E))}))}),c=d.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},SR=Oo;function Ig(){this.handlers=[]}Ig.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Ig.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Ig.prototype.forEach=function(t){SR.forEach(this.handlers,function(a){a!==null&&t(a)})};var TR=Ig,CR=Oo,IR=function(t,i){CR.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},MI=function(t,i,a,c,d){return t.config=i,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},a0,K2;function kI(){if(K2)return a0;K2=1;var e=MI;return a0=function(i,a,c,d,y){var l=new Error(i);return e(l,a,c,d,y)},a0}var l0,Y2;function AR(){if(Y2)return l0;Y2=1;var e=kI();return l0=function(i,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},l0}var u0,J2;function PR(){if(J2)return u0;J2=1;var e=Oo;return u0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,y,l,b){var w=[];w.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(y)&&w.push("path="+y),e.isString(l)&&w.push("domain="+l),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),u0}var c0,Q2;function MR(){return Q2||(Q2=1,c0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),c0}var h0,eE;function kR(){return eE||(eE=1,h0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),h0}var f0,tE;function zR(){if(tE)return f0;tE=1;var e=MR(),t=kR();return f0=function(a,c){return a&&!e(c)?t(a,c):c},f0}var d0,nE;function LR(){if(nE)return d0;nE=1;var e=Oo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return d0=function(a){var c={},d,y,l;return a&&e.forEach(a.split(`
`),function(w){if(l=w.indexOf(":"),d=e.trim(w.substr(0,l)).toLowerCase(),y=e.trim(w.substr(l+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([y]):c[d]=c[d]?c[d]+", "+y:y}}),c},d0}var p0,rE;function RR(){if(rE)return p0;rE=1;var e=Oo;return p0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(y){var l=y;return i&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(l){var b=e.isString(l)?d(l):l;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),p0}var m0,iE;function oE(){if(iE)return m0;iE=1;var e=Oo,t=AR(),i=PR(),a=PI,c=zR(),d=LR(),y=RR(),l=kI();return m0=function(w){return new Promise(function(E,z){var O=w.data,Q=w.headers,K=w.responseType;e.isFormData(O)&&delete Q["Content-Type"];var pe=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",V=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";Q.Authorization="Basic "+btoa(G+":"+V)}var B=c(w.baseURL,w.url);pe.open(w.method.toUpperCase(),a(B,w.params,w.paramsSerializer),!0),pe.timeout=w.timeout;function oe(){if(pe){var D="getAllResponseHeaders"in pe?d(pe.getAllResponseHeaders()):null,S=!K||K==="text"||K==="json"?pe.responseText:pe.response,P={data:S,status:pe.status,statusText:pe.statusText,headers:D,config:w,request:pe};t(E,z,P),pe=null}}if("onloadend"in pe?pe.onloadend=oe:pe.onreadystatechange=function(){!pe||pe.readyState!==4||pe.status===0&&!(pe.responseURL&&pe.responseURL.indexOf("file:")===0)||setTimeout(oe)},pe.onabort=function(){pe&&(z(l("Request aborted",w,"ECONNABORTED",pe)),pe=null)},pe.onerror=function(){z(l("Network Error",w,null,pe)),pe=null},pe.ontimeout=function(){var S="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(S=w.timeoutErrorMessage),z(l(S,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",pe)),pe=null},e.isStandardBrowserEnv()){var W=(w.withCredentials||y(B))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;W&&(Q[w.xsrfHeaderName]=W)}"setRequestHeader"in pe&&e.forEach(Q,function(S,P){typeof O>"u"&&P.toLowerCase()==="content-type"?delete Q[P]:pe.setRequestHeader(P,S)}),e.isUndefined(w.withCredentials)||(pe.withCredentials=!!w.withCredentials),K&&K!=="json"&&(pe.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&pe.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&pe.upload&&pe.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(S){pe&&(pe.abort(),z(S),pe=null)}),O||(O=null),pe.send(O)})},m0}var xi=Oo,sE=IR,OR=MI,FR={"Content-Type":"application/x-www-form-urlencoded"};function aE(e,t){!xi.isUndefined(e)&&xi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function jR(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=oE()),e}function DR(e,t,i){if(xi.isString(e))try{return(t||JSON.parse)(e),xi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var Ag={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:jR(),transformRequest:[function(t,i){return sE(i,"Accept"),sE(i,"Content-Type"),xi.isFormData(t)||xi.isArrayBuffer(t)||xi.isBuffer(t)||xi.isStream(t)||xi.isFile(t)||xi.isBlob(t)?t:xi.isArrayBufferView(t)?t.buffer:xi.isURLSearchParams(t)?(aE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):xi.isObject(t)||i&&i["Content-Type"]==="application/json"?(aE(i,"application/json"),DR(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&xi.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(d)throw y.name==="SyntaxError"?OR(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Ag.headers={common:{Accept:"application/json, text/plain, */*"}};xi.forEach(["delete","get","head"],function(t){Ag.headers[t]={}});xi.forEach(["post","put","patch"],function(t){Ag.headers[t]=xi.merge(FR)});var q1=Ag,BR=Oo,NR=q1,UR=function(t,i,a){var c=this||NR;return BR.forEach(a,function(y){t=y.call(c,t,i)}),t},g0,lE;function zI(){return lE||(lE=1,g0=function(t){return!!(t&&t.__CANCEL__)}),g0}var uE=Oo,y0=UR,$R=zI(),VR=q1;function v0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var GR=function(t){v0(t),t.headers=t.headers||{},t.data=y0.call(t,t.data,t.headers,t.transformRequest),t.headers=uE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),uE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||VR.adapter;return i(t).then(function(c){return v0(t),c.data=y0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return $R(c)||(v0(t),c&&c.response&&(c.response.data=y0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},zi=Oo,LI=function(t,i){i=i||{};var a={},c=["url","method","data"],d=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function b(z,O){return zi.isPlainObject(z)&&zi.isPlainObject(O)?zi.merge(z,O):zi.isPlainObject(O)?zi.merge({},O):zi.isArray(O)?O.slice():O}function w(z){zi.isUndefined(i[z])?zi.isUndefined(t[z])||(a[z]=b(void 0,t[z])):a[z]=b(t[z],i[z])}zi.forEach(c,function(O){zi.isUndefined(i[O])||(a[O]=b(void 0,i[O]))}),zi.forEach(d,w),zi.forEach(y,function(O){zi.isUndefined(i[O])?zi.isUndefined(t[O])||(a[O]=b(void 0,t[O])):a[O]=b(void 0,i[O])}),zi.forEach(l,function(O){O in i?a[O]=b(t[O],i[O]):O in t&&(a[O]=b(void 0,t[O]))});var C=c.concat(d).concat(y).concat(l),E=Object.keys(t).concat(Object.keys(i)).filter(function(O){return C.indexOf(O)===-1});return zi.forEach(E,w),a};const ZR="axios",WR="0.21.4",HR="Promise based HTTP client for the browser and node.js",XR="index.js",qR={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},KR={type:"git",url:"https://github.com/axios/axios.git"},YR=["xhr","http","ajax","promise","node"],JR="Matt Zabriskie",QR="MIT",eO={url:"https://github.com/axios/axios/issues"},tO="https://axios-http.com",nO={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},rO={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},iO="dist/axios.min.js",oO="dist/axios.min.js",sO="./index.d.ts",aO={"follow-redirects":"^1.14.0"},lO=[{path:"./dist/axios.min.js",threshold:"5kB"}],uO={name:ZR,version:WR,description:HR,main:XR,scripts:qR,repository:KR,keywords:YR,author:JR,license:QR,bugs:eO,homepage:tO,devDependencies:nO,browser:rO,jsdelivr:iO,unpkg:oO,typings:sO,dependencies:aO,bundlesize:lO};var RI=uO,K1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){K1[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var cE={},cO=RI.version.split(".");function OI(e,t){for(var i=t?t.split("."):cO,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}K1.transitional=function(t,i,a){var c=i&&OI(i);function d(y,l){return"[Axios v"+RI.version+"] Transitional option '"+y+"'"+l+(a?". "+a:"")}return function(y,l,b){if(t===!1)throw new Error(d(l," has been removed in "+i));return c&&!cE[l]&&(cE[l]=!0,console.warn(d(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(y,l,b):!0}};function hO(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],y=t[d];if(y){var l=e[d],b=l===void 0||y(l,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var fO={isOlderVersion:OI,assertOptions:hO,validators:K1},FI=Oo,dO=PI,hE=TR,fE=GR,Pg=LI,jI=fO,Pc=jI.validators;function Td(e){this.defaults=e,this.interceptors={request:new hE,response:new hE}}Td.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Pg(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&jI.assertOptions(i,{silentJSONParsing:Pc.transitional(Pc.boolean,"1.0.0"),forcedJSONParsing:Pc.transitional(Pc.boolean,"1.0.0"),clarifyTimeoutError:Pc.transitional(Pc.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(t)===!1||(c=c&&z.synchronous,a.unshift(z.fulfilled,z.rejected))});var d=[];this.interceptors.response.forEach(function(z){d.push(z.fulfilled,z.rejected)});var y;if(!c){var l=[fE,void 0];for(Array.prototype.unshift.apply(l,a),l=l.concat(d),y=Promise.resolve(t);l.length;)y=y.then(l.shift(),l.shift());return y}for(var b=t;a.length;){var w=a.shift(),C=a.shift();try{b=w(b)}catch(E){C(E);break}}try{y=fE(b)}catch(E){return Promise.reject(E)}for(;d.length;)y=y.then(d.shift(),d.shift());return y};Td.prototype.getUri=function(t){return t=Pg(this.defaults,t),dO(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};FI.forEach(["delete","get","head","options"],function(t){Td.prototype[t]=function(i,a){return this.request(Pg(a||{},{method:t,url:i,data:(a||{}).data}))}});FI.forEach(["post","put","patch"],function(t){Td.prototype[t]=function(i,a,c){return this.request(Pg(c||{},{method:t,url:i,data:a}))}});var pO=Td,_0,dE;function DI(){if(dE)return _0;dE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,_0=e,_0}var x0,pE;function mO(){if(pE)return x0;pE=1;var e=DI();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(y){a=y});var c=this;i(function(y){c.reason||(c.reason=new e(y),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(y){a=y});return{token:c,cancel:a}},x0=t,x0}var w0,mE;function gO(){return mE||(mE=1,w0=function(t){return function(a){return t.apply(null,a)}}),w0}var b0,gE;function yO(){return gE||(gE=1,b0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),b0}var yE=Oo,vO=CI,Kp=pO,_O=LI,xO=q1;function BI(e){var t=new Kp(e),i=vO(Kp.prototype.request,t);return yE.extend(i,Kp.prototype,t),yE.extend(i,t),i}var Ts=BI(xO);Ts.Axios=Kp;Ts.create=function(t){return BI(_O(Ts.defaults,t))};Ts.Cancel=DI();Ts.CancelToken=mO();Ts.isCancel=zI();Ts.all=function(t){return Promise.all(t)};Ts.spread=gO();Ts.isAxiosError=yO();W1.exports=Ts;W1.exports.default=Ts;var wO=W1.exports,bO=wO;const EO={},SO=Object.freeze(Object.defineProperty({__proto__:null,default:EO},Symbol.toStringTag,{value:"Module"})),TO=h_(SO);var Mg={},CO=nh;function nh(e,t){this.x=e,this.y=t}nh.prototype={clone:function(){return new nh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),d=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};nh.convert=function(e){return e instanceof nh?e:Array.isArray(e)?new nh(e[0],e[1]):e};var IO=CO,NI=ph;function ph(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(AO,this,t)}function AO(e,t,i){e==1?t.id=i.readVarint():e==2?PO(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function PO(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}ph.types=["Unknown","Point","LineString","Polygon"];ph.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,y=[],l;e.pos<t;){if(a<=0){var b=e.readVarint();i=b&7,a=b>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(l&&y.push(l),l=[]),l.push(new IO(c,d));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&y.push(l),y};ph.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,d=0,y=1/0,l=-1/0,b=1/0,w=-1/0;e.pos<t;){if(a<=0){var C=e.readVarint();i=C&7,a=C>>3}if(a--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<y&&(y=c),c>l&&(l=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[y,b,l,w]};ph.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,y=this.loadGeometry(),l=ph.types[this.type],b,w;function C(O){for(var Q=0;Q<O.length;Q++){var K=O[Q],pe=180-(K.y+d)*360/a;O[Q]=[(K.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(pe*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(b=0;b<y.length;b++)E[b]=y[b][0];y=E,C(y);break;case 2:for(b=0;b<y.length;b++)C(y[b]);break;case 3:for(y=MO(y),b=0;b<y.length;b++)for(w=0;w<y[b].length;w++)C(y[b][w]);break}y.length===1?y=y[0]:l="Multi"+l;var z={type:"Feature",geometry:{type:l,coordinates:y},properties:this.properties};return"id"in this&&(z.id=this.id),z};function MO(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,d=0;d<t;d++){var y=kO(e[d]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(a&&i.push(a),a=[e[d]]):a.push(e[d]))}return a&&i.push(a),i}function kO(e){for(var t=0,i=0,a=e.length,c=a-1,d,y;i<a;c=i++)d=e[i],y=e[c],t+=(y.x-d.x)*(d.y+y.y);return t}var zO=NI,UI=$I;function $I(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(LO,this,t),this.length=this._features.length}function LO(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(RO(i))}function RO(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}$I.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new zO(this._pbf,t,this.extent,this._keys,this._values)};var OO=UI,FO=jO;function jO(e,t){this.layers=e.readFields(DO,{},t)}function DO(e,t,i){if(e===3){var a=new OO(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}Mg.VectorTile=FO;Mg.VectorTileFeature=NI;Mg.VectorTileLayer=UI;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=IL,i=VL,a=GL,c=bO,d=TO,y=Mg;function l(V){return V&&typeof V=="object"&&"default"in V?V:{default:V}}var b=l(a),w=l(c),C=l(d),E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof pl<"u"?pl:typeof self<"u"?self:{};function z(V){var B={exports:{}};return V(B,B.exports),B.exports}var O=z(function(V,B){(function(W,D){V.exports=D(w.default)})(E,function(oe){return function(W){var D={};function S(P){if(D[P])return D[P].exports;var Z=D[P]={i:P,l:!1,exports:{}};return W[P].call(Z.exports,Z,Z.exports,S),Z.l=!0,Z.exports}return S.m=W,S.c=D,S.d=function(P,Z,J){S.o(P,Z)||Object.defineProperty(P,Z,{enumerable:!0,get:J})},S.r=function(P){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(P,"__esModule",{value:!0})},S.t=function(P,Z){if(Z&1&&(P=S(P)),Z&8||Z&4&&typeof P=="object"&&P&&P.__esModule)return P;var J=Object.create(null);if(S.r(J),Object.defineProperty(J,"default",{enumerable:!0,value:P}),Z&2&&typeof P!="string")for(var H in P)S.d(J,H,function(ye){return P[ye]}.bind(null,H));return J},S.n=function(P){var Z=P&&P.__esModule?function(){return P.default}:function(){return P};return S.d(Z,"a",Z),Z},S.o=function(P,Z){return Object.prototype.hasOwnProperty.call(P,Z)},S.p="",S(S.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(W,D,S){S.r(D),S.d(D,"CacheControl",function(){return _e}),S.d(D,"parse",function(){return $e}),S.d(D,"format",function(){return ke}),S("./node_modules/core-js/modules/es6.array.from.js"),S("./node_modules/core-js/modules/es6.function.name.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/web.dom.iterable.js"),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.regexp.split.js"),S("./node_modules/core-js/modules/es6.number.is-finite.js");function P(Le,Xe){return ve(Le)||ye(Le,Xe)||J(Le,Xe)||Z()}function Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(Le,Xe){if(Le){if(typeof Le=="string")return H(Le,Xe);var Ve=Object.prototype.toString.call(Le).slice(8,-1);if(Ve==="Object"&&Le.constructor&&(Ve=Le.constructor.name),Ve==="Map"||Ve==="Set")return Array.from(Le);if(Ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ve))return H(Le,Xe)}}function H(Le,Xe){(Xe==null||Xe>Le.length)&&(Xe=Le.length);for(var Ve=0,ot=new Array(Xe);Ve<Xe;Ve++)ot[Ve]=Le[Ve];return ot}function ye(Le,Xe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Le)))){var Ve=[],ot=!0,ht=!1,gt=void 0;try{for(var Lt=Le[Symbol.iterator](),ft;!(ot=(ft=Lt.next()).done)&&(Ve.push(ft.value),!(Xe&&Ve.length===Xe));ot=!0);}catch(wt){ht=!0,gt=wt}finally{try{!ot&&Lt.return!=null&&Lt.return()}finally{if(ht)throw gt}}return Ve}}function ve(Le){if(Array.isArray(Le))return Le}function xe(Le,Xe){if(!(Le instanceof Xe))throw new TypeError("Cannot call a class as a function")}function te(Le,Xe){for(var Ve=0;Ve<Xe.length;Ve++){var ot=Xe[Ve];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Le,ot.key,ot)}}function ae(Le,Xe,Ve){return Xe&&te(Le.prototype,Xe),Ve&&te(Le,Ve),Le}var re=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ie={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function me(Le){return Le===null}function we(Le){if(!Le)return null;var Xe=parseInt(Le,10);return!Number.isFinite(Xe)||Xe<0?null:Xe}var _e=function(){function Le(){xe(this,Le),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ae(Le,[{key:"parse",value:function(Ve){if(!Ve||Ve.length===0)return this;var ot={},ht=Ve.match(re)||[];return Array.prototype.forEach.call(ht,function(gt){var Lt=gt.split("=",2),ft=P(Lt,1),wt=ft[0],Nt=null;Lt.length>1&&(Nt=Lt[1].trim()),ot[wt.toLowerCase()]=Nt}),this.maxAge=we(ot[ie.maxAge]),this.sharedMaxAge=we(ot[ie.sharedMaxAge]),this.maxStale=me(ot[ie.maxStale]),this.maxStaleDuration=we(ot[ie.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=we(ot[ie.minFresh]),this.immutable=me(ot[ie.immutable]),this.mustRevalidate=me(ot[ie.mustRevalidate]),this.noCache=me(ot[ie.noCache]),this.noStore=me(ot[ie.noStore]),this.noTransform=me(ot[ie.noTransform]),this.onlyIfCached=me(ot[ie.onlyIfCached]),this.private=me(ot[ie.private]),this.proxyRevalidate=me(ot[ie.proxyRevalidate]),this.public=me(ot[ie.public]),this}},{key:"format",value:function(){var Ve=[];return this.maxAge&&Ve.push("".concat(ie.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ve.push("".concat(ie.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ve.push("".concat(ie.maxStale,"=").concat(this.maxStaleDuration)):Ve.push(ie.maxStale)),this.minFresh&&Ve.push("".concat(ie.minFresh,"=").concat(this.minFresh)),this.immutable&&Ve.push(ie.immutable),this.mustRevalidate&&Ve.push(ie.mustRevalidate),this.noCache&&Ve.push(ie.noCache),this.noStore&&Ve.push(ie.noStore),this.noTransform&&Ve.push(ie.noTransform),this.onlyIfCached&&Ve.push(ie.onlyIfCached),this.private&&Ve.push(ie.private),this.proxyRevalidate&&Ve.push(ie.proxyRevalidate),this.public&&Ve.push(ie.public),Ve.join(", ")}}]),Le}();function $e(Le){var Xe=new _e;return Xe.parse(Le)}function ke(Le){return Le instanceof _e?Le.format():_e.prototype.format.call(Le)}D.default={CacheControl:_e,parse:$e,format:ke}},"./node_modules/charenc/charenc.js":function(W,D){var S={utf8:{stringToBytes:function(P){return S.bin.stringToBytes(unescape(encodeURIComponent(P)))},bytesToString:function(P){return decodeURIComponent(escape(S.bin.bytesToString(P)))}},bin:{stringToBytes:function(P){for(var Z=[],J=0;J<P.length;J++)Z.push(P.charCodeAt(J)&255);return Z},bytesToString:function(P){for(var Z=[],J=0;J<P.length;J++)Z.push(String.fromCharCode(P[J]));return Z.join("")}}};W.exports=S},"./node_modules/core-js/modules/_a-function.js":function(W,D){W.exports=function(S){if(typeof S!="function")throw TypeError(S+" is not a function!");return S}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_wks.js")("unscopables"),Z=Array.prototype;Z[P]==null&&S("./node_modules/core-js/modules/_hide.js")(Z,P,{}),W.exports=function(J){Z[P][J]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_string-at.js")(!0);W.exports=function(Z,J,H){return J+(H?P(Z,J).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z){if(!P(Z))throw TypeError(Z+" is not an object!");return Z}},"./node_modules/core-js/modules/_array-includes.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_to-length.js"),J=S("./node_modules/core-js/modules/_to-absolute-index.js");W.exports=function(H){return function(ye,ve,xe){var te=P(ye),ae=Z(te.length),re=J(xe,ae),ie;if(H&&ve!=ve){for(;ae>re;)if(ie=te[re++],ie!=ie)return!0}else for(;ae>re;re++)if((H||re in te)&&te[re]===ve)return H||re||0;return!H&&-1}}},"./node_modules/core-js/modules/_bind.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_a-function.js"),Z=S("./node_modules/core-js/modules/_is-object.js"),J=S("./node_modules/core-js/modules/_invoke.js"),H=[].slice,ye={},ve=function(xe,te,ae){if(!(te in ye)){for(var re=[],ie=0;ie<te;ie++)re[ie]="a["+ie+"]";ye[te]=Function("F,a","return new F("+re.join(",")+")")}return ye[te](xe,ae)};W.exports=Function.bind||function(te){var ae=P(this),re=H.call(arguments,1),ie=function(){var me=re.concat(H.call(arguments));return this instanceof ie?ve(ae,me.length,me):J(ae,me,te)};return Z(ae.prototype)&&(ie.prototype=ae.prototype),ie}},"./node_modules/core-js/modules/_classof.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_cof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("toStringTag"),J=P(function(){return arguments}())=="Arguments",H=function(ye,ve){try{return ye[ve]}catch{}};W.exports=function(ye){var ve,xe,te;return ye===void 0?"Undefined":ye===null?"Null":typeof(xe=H(ve=Object(ye),Z))=="string"?xe:J?P(ve):(te=P(ve))=="Object"&&typeof ve.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(W,D){var S={}.toString;W.exports=function(P){return S.call(P).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(W,D){var S=W.exports={version:"2.6.12"};typeof __e=="number"&&(__e=S)},"./node_modules/core-js/modules/_create-property.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=function(J,H,ye){H in J?P.f(J,H,Z(0,ye)):J[H]=ye}},"./node_modules/core-js/modules/_ctx.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_a-function.js");W.exports=function(Z,J,H){if(P(Z),J===void 0)return Z;switch(H){case 1:return function(ye){return Z.call(J,ye)};case 2:return function(ye,ve){return Z.call(J,ye,ve)};case 3:return function(ye,ve,xe){return Z.call(J,ye,ve,xe)}}return function(){return Z.apply(J,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(W,D){W.exports=function(S){if(S==null)throw TypeError("Can't call method on  "+S);return S}},"./node_modules/core-js/modules/_descriptors.js":function(W,D,S){W.exports=!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_global.js").document,J=P(Z)&&P(Z.createElement);W.exports=function(H){return J?Z.createElement(H):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(W,D){W.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-keys.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),J=S("./node_modules/core-js/modules/_object-pie.js");W.exports=function(H){var ye=P(H),ve=Z.f;if(ve)for(var xe=ve(H),te=J.f,ae=0,re;xe.length>ae;)te.call(H,re=xe[ae++])&&ye.push(re);return ye}},"./node_modules/core-js/modules/_export.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),J=S("./node_modules/core-js/modules/_hide.js"),H=S("./node_modules/core-js/modules/_redefine.js"),ye=S("./node_modules/core-js/modules/_ctx.js"),ve="prototype",xe=function(te,ae,re){var ie=te&xe.F,me=te&xe.G,we=te&xe.S,_e=te&xe.P,$e=te&xe.B,ke=me?P:we?P[ae]||(P[ae]={}):(P[ae]||{})[ve],Le=me?Z:Z[ae]||(Z[ae]={}),Xe=Le[ve]||(Le[ve]={}),Ve,ot,ht,gt;me&&(re=ae);for(Ve in re)ot=!ie&&ke&&ke[Ve]!==void 0,ht=(ot?ke:re)[Ve],gt=$e&&ot?ye(ht,P):_e&&typeof ht=="function"?ye(Function.call,ht):ht,ke&&H(ke,Ve,ht,te&xe.U),Le[Ve]!=ht&&J(Le,Ve,gt),_e&&Xe[Ve]!=ht&&(Xe[Ve]=ht)};P.core=Z,xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128,W.exports=xe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(Z){var J=/./;try{"/./"[Z](J)}catch{try{return J[P]=!1,!"/./"[Z](J)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(W,D){W.exports=function(S){try{return!!S()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(W,D,S){S("./node_modules/core-js/modules/es6.regexp.exec.js");var P=S("./node_modules/core-js/modules/_redefine.js"),Z=S("./node_modules/core-js/modules/_hide.js"),J=S("./node_modules/core-js/modules/_fails.js"),H=S("./node_modules/core-js/modules/_defined.js"),ye=S("./node_modules/core-js/modules/_wks.js"),ve=S("./node_modules/core-js/modules/_regexp-exec.js"),xe=ye("species"),te=!J(function(){var re=/./;return re.exec=function(){var ie=[];return ie.groups={a:"7"},ie},"".replace(re,"$<a>")!=="7"}),ae=function(){var re=/(?:)/,ie=re.exec;re.exec=function(){return ie.apply(this,arguments)};var me="ab".split(re);return me.length===2&&me[0]==="a"&&me[1]==="b"}();W.exports=function(re,ie,me){var we=ye(re),_e=!J(function(){var ot={};return ot[we]=function(){return 7},""[re](ot)!=7}),$e=_e?!J(function(){var ot=!1,ht=/a/;return ht.exec=function(){return ot=!0,null},re==="split"&&(ht.constructor={},ht.constructor[xe]=function(){return ht}),ht[we](""),!ot}):void 0;if(!_e||!$e||re==="replace"&&!te||re==="split"&&!ae){var ke=/./[we],Le=me(H,we,""[re],function(ht,gt,Lt,ft,wt){return gt.exec===ve?_e&&!wt?{done:!0,value:ke.call(gt,Lt,ft)}:{done:!0,value:ht.call(Lt,gt,ft)}:{done:!1}}),Xe=Le[0],Ve=Le[1];P(String.prototype,re,Xe),Z(RegExp.prototype,we,ie==2?function(ot,ht){return Ve.call(ot,this,ht)}:function(ot){return Ve.call(ot,this)})}}},"./node_modules/core-js/modules/_flags.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(){var Z=P(this),J="";return Z.global&&(J+="g"),Z.ignoreCase&&(J+="i"),Z.multiline&&(J+="m"),Z.unicode&&(J+="u"),Z.sticky&&(J+="y"),J}},"./node_modules/core-js/modules/_function-to-string.js":function(W,D,S){W.exports=S("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(W,D){var S=W.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=S)},"./node_modules/core-js/modules/_has.js":function(W,D){var S={}.hasOwnProperty;W.exports=function(P,Z){return S.call(P,Z)}},"./node_modules/core-js/modules/_hide.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_property-desc.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?function(J,H,ye){return P.f(J,H,Z(1,ye))}:function(J,H,ye){return J[H]=ye,J}},"./node_modules/core-js/modules/_html.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js").document;W.exports=P&&P.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(W,D,S){W.exports=!S("./node_modules/core-js/modules/_descriptors.js")&&!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(S("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(W,D){W.exports=function(S,P,Z){var J=Z===void 0;switch(P.length){case 0:return J?S():S.call(Z);case 1:return J?S(P[0]):S.call(Z,P[0]);case 2:return J?S(P[0],P[1]):S.call(Z,P[0],P[1]);case 3:return J?S(P[0],P[1],P[2]):S.call(Z,P[0],P[1],P[2]);case 4:return J?S(P[0],P[1],P[2],P[3]):S.call(Z,P[0],P[1],P[2],P[3])}return S.apply(Z,P)}},"./node_modules/core-js/modules/_iobject.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_cof.js");W.exports=Object("z").propertyIsEnumerable(0)?Object:function(Z){return P(Z)=="String"?Z.split(""):Object(Z)}},"./node_modules/core-js/modules/_is-array-iter.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_iterators.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),J=Array.prototype;W.exports=function(H){return H!==void 0&&(P.Array===H||J[Z]===H)}},"./node_modules/core-js/modules/_is-array.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_cof.js");W.exports=Array.isArray||function(J){return P(J)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(W,D){W.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js"),Z=S("./node_modules/core-js/modules/_cof.js"),J=S("./node_modules/core-js/modules/_wks.js")("match");W.exports=function(H){var ye;return P(H)&&((ye=H[J])!==void 0?!!ye:Z(H)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js");W.exports=function(Z,J,H,ye){try{return ye?J(P(H)[0],H[1]):J(H)}catch(xe){var ve=Z.return;throw ve!==void 0&&P(ve.call(Z)),xe}}},"./node_modules/core-js/modules/_iter-create.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-create.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),J=S("./node_modules/core-js/modules/_set-to-string-tag.js"),H={};S("./node_modules/core-js/modules/_hide.js")(H,S("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),W.exports=function(ye,ve,xe){ye.prototype=P(H,{next:Z(1,xe)}),J(ye,ve+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_library.js"),Z=S("./node_modules/core-js/modules/_export.js"),J=S("./node_modules/core-js/modules/_redefine.js"),H=S("./node_modules/core-js/modules/_hide.js"),ye=S("./node_modules/core-js/modules/_iterators.js"),ve=S("./node_modules/core-js/modules/_iter-create.js"),xe=S("./node_modules/core-js/modules/_set-to-string-tag.js"),te=S("./node_modules/core-js/modules/_object-gpo.js"),ae=S("./node_modules/core-js/modules/_wks.js")("iterator"),re=!([].keys&&"next"in[].keys()),ie="@@iterator",me="keys",we="values",_e=function(){return this};W.exports=function($e,ke,Le,Xe,Ve,ot,ht){ve(Le,ke,Xe);var gt=function(F){if(!re&&F in Nt)return Nt[F];switch(F){case me:return function(){return new Le(this,F)};case we:return function(){return new Le(this,F)}}return function(){return new Le(this,F)}},Lt=ke+" Iterator",ft=Ve==we,wt=!1,Nt=$e.prototype,Je=Nt[ae]||Nt[ie]||Ve&&Nt[Ve],sn=Je||gt(Ve),wn=Ve?ft?gt("entries"):sn:void 0,Ht=ke=="Array"&&Nt.entries||Je,Ft,un,Se;if(Ht&&(Se=te(Ht.call(new $e)),Se!==Object.prototype&&Se.next&&(xe(Se,Lt,!0),!P&&typeof Se[ae]!="function"&&H(Se,ae,_e))),ft&&Je&&Je.name!==we&&(wt=!0,sn=function(){return Je.call(this)}),(!P||ht)&&(re||wt||!Nt[ae])&&H(Nt,ae,sn),ye[ke]=sn,ye[Lt]=_e,Ve)if(Ft={values:ft?sn:gt(we),keys:ot?sn:gt(me),entries:wn},ht)for(un in Ft)un in Nt||J(Nt,un,Ft[un]);else Z(Z.P+Z.F*(re||wt),ke,Ft);return Ft}},"./node_modules/core-js/modules/_iter-detect.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_wks.js")("iterator"),Z=!1;try{var J=[7][P]();J.return=function(){Z=!0},Array.from(J,function(){throw 2})}catch{}W.exports=function(H,ye){if(!ye&&!Z)return!1;var ve=!1;try{var xe=[7],te=xe[P]();te.next=function(){return{done:ve=!0}},xe[P]=function(){return te},H(xe)}catch{}return ve}},"./node_modules/core-js/modules/_iter-step.js":function(W,D){W.exports=function(S,P){return{value:P,done:!!S}}},"./node_modules/core-js/modules/_iterators.js":function(W,D){W.exports={}},"./node_modules/core-js/modules/_library.js":function(W,D){W.exports=!1},"./node_modules/core-js/modules/_meta.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_uid.js")("meta"),Z=S("./node_modules/core-js/modules/_is-object.js"),J=S("./node_modules/core-js/modules/_has.js"),H=S("./node_modules/core-js/modules/_object-dp.js").f,ye=0,ve=Object.isExtensible||function(){return!0},xe=!S("./node_modules/core-js/modules/_fails.js")(function(){return ve(Object.preventExtensions({}))}),te=function(we){H(we,P,{value:{i:"O"+ ++ye,w:{}}})},ae=function(we,_e){if(!Z(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!J(we,P)){if(!ve(we))return"F";if(!_e)return"E";te(we)}return we[P].i},re=function(we,_e){if(!J(we,P)){if(!ve(we))return!0;if(!_e)return!1;te(we)}return we[P].w},ie=function(we){return xe&&me.NEED&&ve(we)&&!J(we,P)&&te(we),we},me=W.exports={KEY:P,NEED:!1,fastKey:ae,getWeak:re,onFreeze:ie}},"./node_modules/core-js/modules/_object-create.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_object-dps.js"),J=S("./node_modules/core-js/modules/_enum-bug-keys.js"),H=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ye=function(){},ve="prototype",xe=function(){var te=S("./node_modules/core-js/modules/_dom-create.js")("iframe"),ae=J.length,re="<",ie=">",me;for(te.style.display="none",S("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",me=te.contentWindow.document,me.open(),me.write(re+"script"+ie+"document.F=Object"+re+"/script"+ie),me.close(),xe=me.F;ae--;)delete xe[ve][J[ae]];return xe()};W.exports=Object.create||function(ae,re){var ie;return ae!==null?(ye[ve]=P(ae),ie=new ye,ye[ve]=null,ie[H]=ae):ie=xe(),re===void 0?ie:Z(ie,re)}},"./node_modules/core-js/modules/_object-dp.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_ie8-dom-define.js"),J=S("./node_modules/core-js/modules/_to-primitive.js"),H=Object.defineProperty;D.f=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(ve,xe,te){if(P(ve),xe=J(xe,!0),P(te),Z)try{return H(ve,xe,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(ve[xe]=te.value),ve}},"./node_modules/core-js/modules/_object-dps.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),J=S("./node_modules/core-js/modules/_object-keys.js");W.exports=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ye,ve){Z(ye);for(var xe=J(ve),te=xe.length,ae=0,re;te>ae;)P.f(ye,re=xe[ae++],ve[re]);return ye}},"./node_modules/core-js/modules/_object-gopd.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-pie.js"),Z=S("./node_modules/core-js/modules/_property-desc.js"),J=S("./node_modules/core-js/modules/_to-iobject.js"),H=S("./node_modules/core-js/modules/_to-primitive.js"),ye=S("./node_modules/core-js/modules/_has.js"),ve=S("./node_modules/core-js/modules/_ie8-dom-define.js"),xe=Object.getOwnPropertyDescriptor;D.f=S("./node_modules/core-js/modules/_descriptors.js")?xe:function(ae,re){if(ae=J(ae),re=H(re,!0),ve)try{return xe(ae,re)}catch{}if(ye(ae,re))return Z(!P.f.call(ae,re),ae[re])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-iobject.js"),Z=S("./node_modules/core-js/modules/_object-gopn.js").f,J={}.toString,H=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ye=function(ve){try{return Z(ve)}catch{return H.slice()}};W.exports.f=function(xe){return H&&J.call(xe)=="[object Window]"?ye(xe):Z(P(xe))}},"./node_modules/core-js/modules/_object-gopn.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");D.f=Object.getOwnPropertyNames||function(H){return P(H,Z)}},"./node_modules/core-js/modules/_object-gops.js":function(W,D){D.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-object.js"),J=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),H=Object.prototype;W.exports=Object.getPrototypeOf||function(ye){return ye=Z(ye),P(ye,J)?ye[J]:typeof ye.constructor=="function"&&ye instanceof ye.constructor?ye.constructor.prototype:ye instanceof Object?H:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_has.js"),Z=S("./node_modules/core-js/modules/_to-iobject.js"),J=S("./node_modules/core-js/modules/_array-includes.js")(!1),H=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");W.exports=function(ye,ve){var xe=Z(ye),te=0,ae=[],re;for(re in xe)re!=H&&P(xe,re)&&ae.push(re);for(;ve.length>te;)P(xe,re=ve[te++])&&(~J(ae,re)||ae.push(re));return ae}},"./node_modules/core-js/modules/_object-keys.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-keys-internal.js"),Z=S("./node_modules/core-js/modules/_enum-bug-keys.js");W.exports=Object.keys||function(H){return P(H,Z)}},"./node_modules/core-js/modules/_object-pie.js":function(W,D){D.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-gopn.js"),Z=S("./node_modules/core-js/modules/_object-gops.js"),J=S("./node_modules/core-js/modules/_an-object.js"),H=S("./node_modules/core-js/modules/_global.js").Reflect;W.exports=H&&H.ownKeys||function(ve){var xe=P.f(J(ve)),te=Z.f;return te?xe.concat(te(ve)):xe}},"./node_modules/core-js/modules/_property-desc.js":function(W,D){W.exports=function(S,P){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:P}}},"./node_modules/core-js/modules/_redefine.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_hide.js"),J=S("./node_modules/core-js/modules/_has.js"),H=S("./node_modules/core-js/modules/_uid.js")("src"),ye=S("./node_modules/core-js/modules/_function-to-string.js"),ve="toString",xe=(""+ye).split(ve);S("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ye.call(te)},(W.exports=function(te,ae,re,ie){var me=typeof re=="function";me&&(J(re,"name")||Z(re,"name",ae)),te[ae]!==re&&(me&&(J(re,H)||Z(re,H,te[ae]?""+te[ae]:xe.join(String(ae)))),te===P?te[ae]=re:ie?te[ae]?te[ae]=re:Z(te,ae,re):(delete te[ae],Z(te,ae,re)))})(Function.prototype,ve,function(){return typeof this=="function"&&this[H]||ye.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_classof.js"),Z=RegExp.prototype.exec;W.exports=function(J,H){var ye=J.exec;if(typeof ye=="function"){var ve=ye.call(J,H);if(typeof ve!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return ve}if(P(J)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return Z.call(J,H)}},"./node_modules/core-js/modules/_regexp-exec.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_flags.js"),Z=RegExp.prototype.exec,J=String.prototype.replace,H=Z,ye="lastIndex",ve=function(){var ae=/a/,re=/b*/g;return Z.call(ae,"a"),Z.call(re,"a"),ae[ye]!==0||re[ye]!==0}(),xe=/()??/.exec("")[1]!==void 0,te=ve||xe;te&&(H=function(re){var ie=this,me,we,_e,$e;return xe&&(we=new RegExp("^"+ie.source+"$(?!\\s)",P.call(ie))),ve&&(me=ie[ye]),_e=Z.call(ie,re),ve&&_e&&(ie[ye]=ie.global?_e.index+_e[0].length:me),xe&&_e&&_e.length>1&&J.call(_e[0],we,function(){for($e=1;$e<arguments.length-2;$e++)arguments[$e]===void 0&&(_e[$e]=void 0)}),_e}),W.exports=H},"./node_modules/core-js/modules/_set-to-string-tag.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js").f,Z=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_wks.js")("toStringTag");W.exports=function(H,ye,ve){H&&!Z(H=ve?H:H.prototype,J)&&P(H,J,{configurable:!0,value:ye})}},"./node_modules/core-js/modules/_shared-key.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_shared.js")("keys"),Z=S("./node_modules/core-js/modules/_uid.js");W.exports=function(J){return P[J]||(P[J]=Z(J))}},"./node_modules/core-js/modules/_shared.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_core.js"),Z=S("./node_modules/core-js/modules/_global.js"),J="__core-js_shared__",H=Z[J]||(Z[J]={});(W.exports=function(ye,ve){return H[ye]||(H[ye]=ve!==void 0?ve:{})})("versions",[]).push({version:P.version,mode:S("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_an-object.js"),Z=S("./node_modules/core-js/modules/_a-function.js"),J=S("./node_modules/core-js/modules/_wks.js")("species");W.exports=function(H,ye){var ve=P(H).constructor,xe;return ve===void 0||(xe=P(ve)[J])==null?ye:Z(xe)}},"./node_modules/core-js/modules/_string-at.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-integer.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(J){return function(H,ye){var ve=String(Z(H)),xe=P(ye),te=ve.length,ae,re;return xe<0||xe>=te?J?"":void 0:(ae=ve.charCodeAt(xe),ae<55296||ae>56319||xe+1===te||(re=ve.charCodeAt(xe+1))<56320||re>57343?J?ve.charAt(xe):ae:J?ve.slice(xe,xe+2):(ae-55296<<10)+(re-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(J,H,ye){if(P(H))throw TypeError("String#"+ye+" doesn't accept regex!");return String(Z(J))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.max,J=Math.min;W.exports=function(H,ye){return H=P(H),H<0?Z(H+ye,0):J(H,ye)}},"./node_modules/core-js/modules/_to-integer.js":function(W,D){var S=Math.ceil,P=Math.floor;W.exports=function(Z){return isNaN(Z=+Z)?0:(Z>0?P:S)(Z)}},"./node_modules/core-js/modules/_to-iobject.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_iobject.js"),Z=S("./node_modules/core-js/modules/_defined.js");W.exports=function(J){return P(Z(J))}},"./node_modules/core-js/modules/_to-length.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_to-integer.js"),Z=Math.min;W.exports=function(J){return J>0?Z(P(J),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_defined.js");W.exports=function(Z){return Object(P(Z))}},"./node_modules/core-js/modules/_to-primitive.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-object.js");W.exports=function(Z,J){if(!P(Z))return Z;var H,ye;if(J&&typeof(H=Z.toString)=="function"&&!P(ye=H.call(Z))||typeof(H=Z.valueOf)=="function"&&!P(ye=H.call(Z))||!J&&typeof(H=Z.toString)=="function"&&!P(ye=H.call(Z)))return ye;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(W,D){var S=0,P=Math.random();W.exports=function(Z){return"Symbol(".concat(Z===void 0?"":Z,")_",(++S+P).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_core.js"),J=S("./node_modules/core-js/modules/_library.js"),H=S("./node_modules/core-js/modules/_wks-ext.js"),ye=S("./node_modules/core-js/modules/_object-dp.js").f;W.exports=function(ve){var xe=Z.Symbol||(Z.Symbol=J?{}:P.Symbol||{});ve.charAt(0)!="_"&&!(ve in xe)&&ye(xe,ve,{value:H.f(ve)})}},"./node_modules/core-js/modules/_wks-ext.js":function(W,D,S){D.f=S("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_shared.js")("wks"),Z=S("./node_modules/core-js/modules/_uid.js"),J=S("./node_modules/core-js/modules/_global.js").Symbol,H=typeof J=="function",ye=W.exports=function(ve){return P[ve]||(P[ve]=H&&J[ve]||(H?J:Z)("Symbol."+ve))};ye.store=P},"./node_modules/core-js/modules/core.get-iterator-method.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_classof.js"),Z=S("./node_modules/core-js/modules/_wks.js")("iterator"),J=S("./node_modules/core-js/modules/_iterators.js");W.exports=S("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(H){if(H!=null)return H[Z]||H["@@iterator"]||J[P(H)]}},"./node_modules/core-js/modules/es6.array.from.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_ctx.js"),Z=S("./node_modules/core-js/modules/_export.js"),J=S("./node_modules/core-js/modules/_to-object.js"),H=S("./node_modules/core-js/modules/_iter-call.js"),ye=S("./node_modules/core-js/modules/_is-array-iter.js"),ve=S("./node_modules/core-js/modules/_to-length.js"),xe=S("./node_modules/core-js/modules/_create-property.js"),te=S("./node_modules/core-js/modules/core.get-iterator-method.js");Z(Z.S+Z.F*!S("./node_modules/core-js/modules/_iter-detect.js")(function(ae){Array.from(ae)}),"Array",{from:function(re){var ie=J(re),me=typeof this=="function"?this:Array,we=arguments.length,_e=we>1?arguments[1]:void 0,$e=_e!==void 0,ke=0,Le=te(ie),Xe,Ve,ot,ht;if($e&&(_e=P(_e,we>2?arguments[2]:void 0,2)),Le!=null&&!(me==Array&&ye(Le)))for(ht=Le.call(ie),Ve=new me;!(ot=ht.next()).done;ke++)xe(Ve,ke,$e?H(ht,_e,[ot.value,ke],!0):ot.value);else for(Xe=ve(ie.length),Ve=new me(Xe);Xe>ke;ke++)xe(Ve,ke,$e?_e(ie[ke],ke):ie[ke]);return Ve.length=ke,Ve}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_add-to-unscopables.js"),Z=S("./node_modules/core-js/modules/_iter-step.js"),J=S("./node_modules/core-js/modules/_iterators.js"),H=S("./node_modules/core-js/modules/_to-iobject.js");W.exports=S("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ye,ve){this._t=H(ye),this._i=0,this._k=ve},function(){var ye=this._t,ve=this._k,xe=this._i++;return!ye||xe>=ye.length?(this._t=void 0,Z(1)):ve=="keys"?Z(0,xe):ve=="values"?Z(0,ye[xe]):Z(0,[xe,ye[xe]])},"values"),J.Arguments=J.Array,P("keys"),P("values"),P("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js");P(P.P,"Function",{bind:S("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_object-dp.js").f,Z=Function.prototype,J=/^\s*function ([^ (]*)/,H="name";H in Z||S("./node_modules/core-js/modules/_descriptors.js")&&P(Z,H,{configurable:!0,get:function(){try{return(""+this).match(J)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_global.js").isFinite;P(P.S,"Number",{isFinite:function(H){return typeof H=="number"&&Z(H)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_classof.js"),Z={};Z[S("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",Z+""!="[object z]"&&S("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+P(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_regexp-exec.js");S("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:P!==/./.exec},{exec:P})},"./node_modules/core-js/modules/es6.regexp.split.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_is-regexp.js"),Z=S("./node_modules/core-js/modules/_an-object.js"),J=S("./node_modules/core-js/modules/_species-constructor.js"),H=S("./node_modules/core-js/modules/_advance-string-index.js"),ye=S("./node_modules/core-js/modules/_to-length.js"),ve=S("./node_modules/core-js/modules/_regexp-exec-abstract.js"),xe=S("./node_modules/core-js/modules/_regexp-exec.js"),te=S("./node_modules/core-js/modules/_fails.js"),ae=Math.min,re=[].push,ie="split",me="length",we="lastIndex",_e=4294967295,$e=!te(function(){});S("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(ke,Le,Xe,Ve){var ot;return"abbc"[ie](/(b)*/)[1]=="c"||"test"[ie](/(?:)/,-1)[me]!=4||"ab"[ie](/(?:ab)*/)[me]!=2||"."[ie](/(.?)(.?)/)[me]!=4||"."[ie](/()()/)[me]>1||""[ie](/.?/)[me]?ot=function(ht,gt){var Lt=String(this);if(ht===void 0&&gt===0)return[];if(!P(ht))return Xe.call(Lt,ht,gt);for(var ft=[],wt=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(ht.sticky?"y":""),Nt=0,Je=gt===void 0?_e:gt>>>0,sn=new RegExp(ht.source,wt+"g"),wn,Ht,Ft;(wn=xe.call(sn,Lt))&&(Ht=sn[we],!(Ht>Nt&&(ft.push(Lt.slice(Nt,wn.index)),wn[me]>1&&wn.index<Lt[me]&&re.apply(ft,wn.slice(1)),Ft=wn[0][me],Nt=Ht,ft[me]>=Je)));)sn[we]===wn.index&&sn[we]++;return Nt===Lt[me]?(Ft||!sn.test(""))&&ft.push(""):ft.push(Lt.slice(Nt)),ft[me]>Je?ft.slice(0,Je):ft}:"0"[ie](void 0,0)[me]?ot=function(ht,gt){return ht===void 0&&gt===0?[]:Xe.call(this,ht,gt)}:ot=Xe,[function(gt,Lt){var ft=ke(this),wt=gt==null?void 0:gt[Le];return wt!==void 0?wt.call(gt,ft,Lt):ot.call(String(ft),gt,Lt)},function(ht,gt){var Lt=Ve(ot,ht,this,gt,ot!==Xe);if(Lt.done)return Lt.value;var ft=Z(ht),wt=String(this),Nt=J(ft,RegExp),Je=ft.unicode,sn=(ft.ignoreCase?"i":"")+(ft.multiline?"m":"")+(ft.unicode?"u":"")+($e?"y":"g"),wn=new Nt($e?ft:"^(?:"+ft.source+")",sn),Ht=gt===void 0?_e:gt>>>0;if(Ht===0)return[];if(wt.length===0)return ve(wn,wt)===null?[wt]:[];for(var Ft=0,un=0,Se=[];un<wt.length;){wn.lastIndex=$e?un:0;var F=ve(wn,$e?wt:wt.slice(un)),R;if(F===null||(R=ae(ye(wn.lastIndex+($e?0:un)),wt.length))===Ft)un=H(wt,un,Je);else{if(Se.push(wt.slice(Ft,un)),Se.length===Ht)return Se;for(var ge=1;ge<=F.length-1;ge++)if(Se.push(F[ge]),Se.length===Ht)return Se;un=Ft=R}}return Se.push(wt.slice(Ft)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_string-context.js"),J="includes";P(P.P+P.F*S("./node_modules/core-js/modules/_fails-is-regexp.js")(J),"String",{includes:function(ye){return!!~Z(this,ye,J).indexOf(ye,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_global.js"),Z=S("./node_modules/core-js/modules/_has.js"),J=S("./node_modules/core-js/modules/_descriptors.js"),H=S("./node_modules/core-js/modules/_export.js"),ye=S("./node_modules/core-js/modules/_redefine.js"),ve=S("./node_modules/core-js/modules/_meta.js").KEY,xe=S("./node_modules/core-js/modules/_fails.js"),te=S("./node_modules/core-js/modules/_shared.js"),ae=S("./node_modules/core-js/modules/_set-to-string-tag.js"),re=S("./node_modules/core-js/modules/_uid.js"),ie=S("./node_modules/core-js/modules/_wks.js"),me=S("./node_modules/core-js/modules/_wks-ext.js"),we=S("./node_modules/core-js/modules/_wks-define.js"),_e=S("./node_modules/core-js/modules/_enum-keys.js"),$e=S("./node_modules/core-js/modules/_is-array.js"),ke=S("./node_modules/core-js/modules/_an-object.js"),Le=S("./node_modules/core-js/modules/_is-object.js"),Xe=S("./node_modules/core-js/modules/_to-object.js"),Ve=S("./node_modules/core-js/modules/_to-iobject.js"),ot=S("./node_modules/core-js/modules/_to-primitive.js"),ht=S("./node_modules/core-js/modules/_property-desc.js"),gt=S("./node_modules/core-js/modules/_object-create.js"),Lt=S("./node_modules/core-js/modules/_object-gopn-ext.js"),ft=S("./node_modules/core-js/modules/_object-gopd.js"),wt=S("./node_modules/core-js/modules/_object-gops.js"),Nt=S("./node_modules/core-js/modules/_object-dp.js"),Je=S("./node_modules/core-js/modules/_object-keys.js"),sn=ft.f,wn=Nt.f,Ht=Lt.f,Ft=P.Symbol,un=P.JSON,Se=un&&un.stringify,F="prototype",R=ie("_hidden"),ge=ie("toPrimitive"),Ge={}.propertyIsEnumerable,tt=te("symbol-registry"),We=te("symbols"),se=te("op-symbols"),L=Object[F],j=typeof Ft=="function"&&!!wt.f,be=P.QObject,Te=!be||!be[F]||!be[F].findChild,Ke=J&&xe(function(){return gt(wn({},"a",{get:function(){return wn(this,"a",{value:7}).a}})).a!=7})?function(Re,De,Oe){var Fe=sn(L,De);Fe&&delete L[De],wn(Re,De,Oe),Fe&&Re!==L&&wn(L,De,Fe)}:wn,et=function(Re){var De=We[Re]=gt(Ft[F]);return De._k=Re,De},$t=j&&typeof Ft.iterator=="symbol"?function(Re){return typeof Re=="symbol"}:function(Re){return Re instanceof Ft},vn=function(De,Oe,Fe){return De===L&&vn(se,Oe,Fe),ke(De),Oe=ot(Oe,!0),ke(Fe),Z(We,Oe)?(Fe.enumerable?(Z(De,R)&&De[R][Oe]&&(De[R][Oe]=!1),Fe=gt(Fe,{enumerable:ht(0,!1)})):(Z(De,R)||wn(De,R,ht(1,{})),De[R][Oe]=!0),Ke(De,Oe,Fe)):wn(De,Oe,Fe)},Tt=function(De,Oe){ke(De);for(var Fe=_e(Oe=Ve(Oe)),Ye=0,ct=Fe.length,ut;ct>Ye;)vn(De,ut=Fe[Ye++],Oe[ut]);return De},An=function(De,Oe){return Oe===void 0?gt(De):Tt(gt(De),Oe)},_n=function(De){var Oe=Ge.call(this,De=ot(De,!0));return this===L&&Z(We,De)&&!Z(se,De)?!1:Oe||!Z(this,De)||!Z(We,De)||Z(this,R)&&this[R][De]?Oe:!0},Qr=function(De,Oe){if(De=Ve(De),Oe=ot(Oe,!0),!(De===L&&Z(We,Oe)&&!Z(se,Oe))){var Fe=sn(De,Oe);return Fe&&Z(We,Oe)&&!(Z(De,R)&&De[R][Oe])&&(Fe.enumerable=!0),Fe}},di=function(De){for(var Oe=Ht(Ve(De)),Fe=[],Ye=0,ct;Oe.length>Ye;)!Z(We,ct=Oe[Ye++])&&ct!=R&&ct!=ve&&Fe.push(ct);return Fe},cr=function(De){for(var Oe=De===L,Fe=Ht(Oe?se:Ve(De)),Ye=[],ct=0,ut;Fe.length>ct;)Z(We,ut=Fe[ct++])&&(!Oe||Z(L,ut))&&Ye.push(We[ut]);return Ye};j||(Ft=function(){if(this instanceof Ft)throw TypeError("Symbol is not a constructor!");var De=re(arguments.length>0?arguments[0]:void 0),Oe=function(Fe){this===L&&Oe.call(se,Fe),Z(this,R)&&Z(this[R],De)&&(this[R][De]=!1),Ke(this,De,ht(1,Fe))};return J&&Te&&Ke(L,De,{configurable:!0,set:Oe}),et(De)},ye(Ft[F],"toString",function(){return this._k}),ft.f=Qr,Nt.f=vn,S("./node_modules/core-js/modules/_object-gopn.js").f=Lt.f=di,S("./node_modules/core-js/modules/_object-pie.js").f=_n,wt.f=cr,J&&!S("./node_modules/core-js/modules/_library.js")&&ye(L,"propertyIsEnumerable",_n,!0),me.f=function(Re){return et(ie(Re))}),H(H.G+H.W+H.F*!j,{Symbol:Ft});for(var Ce="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;Ce.length>ne;)ie(Ce[ne++]);for(var ue=Je(ie.store),Ee=0;ue.length>Ee;)we(ue[Ee++]);H(H.S+H.F*!j,"Symbol",{for:function(Re){return Z(tt,Re+="")?tt[Re]:tt[Re]=Ft(Re)},keyFor:function(De){if(!$t(De))throw TypeError(De+" is not a symbol!");for(var Oe in tt)if(tt[Oe]===De)return Oe},useSetter:function(){Te=!0},useSimple:function(){Te=!1}}),H(H.S+H.F*!j,"Object",{create:An,defineProperty:vn,defineProperties:Tt,getOwnPropertyDescriptor:Qr,getOwnPropertyNames:di,getOwnPropertySymbols:cr});var Be=xe(function(){wt.f(1)});H(H.S+H.F*Be,"Object",{getOwnPropertySymbols:function(De){return wt.f(Xe(De))}}),un&&H(H.S+H.F*(!j||xe(function(){var Re=Ft();return Se([Re])!="[null]"||Se({a:Re})!="{}"||Se(Object(Re))!="{}"})),"JSON",{stringify:function(De){for(var Oe=[De],Fe=1,Ye,ct;arguments.length>Fe;)Oe.push(arguments[Fe++]);if(ct=Ye=Oe[1],!(!Le(Ye)&&De===void 0||$t(De)))return $e(Ye)||(Ye=function(ut,pt){if(typeof ct=="function"&&(pt=ct.call(this,ut,pt)),!$t(pt))return pt}),Oe[1]=Ye,Se.apply(un,Oe)}}),Ft[F][ge]||S("./node_modules/core-js/modules/_hide.js")(Ft[F],ge,Ft[F].valueOf),ae(Ft,"Symbol"),ae(Math,"Math",!0),ae(P.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_array-includes.js")(!0);P(P.P,"Array",{includes:function(H){return Z(this,H,arguments.length>1?arguments[1]:void 0)}}),S("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(W,D,S){var P=S("./node_modules/core-js/modules/_export.js"),Z=S("./node_modules/core-js/modules/_own-keys.js"),J=S("./node_modules/core-js/modules/_to-iobject.js"),H=S("./node_modules/core-js/modules/_object-gopd.js"),ye=S("./node_modules/core-js/modules/_create-property.js");P(P.S,"Object",{getOwnPropertyDescriptors:function(xe){for(var te=J(xe),ae=H.f,re=Z(te),ie={},me=0,we,_e;re.length>me;)_e=ae(te,we=re[me++]),_e!==void 0&&ye(ie,we,_e);return ie}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(W,D,S){S("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(W,D,S){for(var P=S("./node_modules/core-js/modules/es6.array.iterator.js"),Z=S("./node_modules/core-js/modules/_object-keys.js"),J=S("./node_modules/core-js/modules/_redefine.js"),H=S("./node_modules/core-js/modules/_global.js"),ye=S("./node_modules/core-js/modules/_hide.js"),ve=S("./node_modules/core-js/modules/_iterators.js"),xe=S("./node_modules/core-js/modules/_wks.js"),te=xe("iterator"),ae=xe("toStringTag"),re=ve.Array,ie={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},me=Z(ie),we=0;we<me.length;we++){var _e=me[we],$e=ie[_e],ke=H[_e],Le=ke&&ke.prototype,Xe;if(Le&&(Le[te]||ye(Le,te,re),Le[ae]||ye(Le,ae,_e),ve[_e]=re,$e))for(Xe in P)Le[Xe]||J(Le,Xe,P[Xe],!0)}},"./node_modules/crypt/crypt.js":function(W,D){(function(){var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P={rotl:function(Z,J){return Z<<J|Z>>>32-J},rotr:function(Z,J){return Z<<32-J|Z>>>J},endian:function(Z){if(Z.constructor==Number)return P.rotl(Z,8)&16711935|P.rotl(Z,24)&4278255360;for(var J=0;J<Z.length;J++)Z[J]=P.endian(Z[J]);return Z},randomBytes:function(Z){for(var J=[];Z>0;Z--)J.push(Math.floor(Math.random()*256));return J},bytesToWords:function(Z){for(var J=[],H=0,ye=0;H<Z.length;H++,ye+=8)J[ye>>>5]|=Z[H]<<24-ye%32;return J},wordsToBytes:function(Z){for(var J=[],H=0;H<Z.length*32;H+=8)J.push(Z[H>>>5]>>>24-H%32&255);return J},bytesToHex:function(Z){for(var J=[],H=0;H<Z.length;H++)J.push((Z[H]>>>4).toString(16)),J.push((Z[H]&15).toString(16));return J.join("")},hexToBytes:function(Z){for(var J=[],H=0;H<Z.length;H+=2)J.push(parseInt(Z.substr(H,2),16));return J},bytesToBase64:function(Z){for(var J=[],H=0;H<Z.length;H+=3)for(var ye=Z[H]<<16|Z[H+1]<<8|Z[H+2],ve=0;ve<4;ve++)H*8+ve*6<=Z.length*8?J.push(S.charAt(ye>>>6*(3-ve)&63)):J.push("=");return J.join("")},base64ToBytes:function(Z){Z=Z.replace(/[^A-Z0-9+\/]/ig,"");for(var J=[],H=0,ye=0;H<Z.length;ye=++H%4)ye!=0&&J.push((S.indexOf(Z.charAt(H-1))&Math.pow(2,-2*ye+8)-1)<<ye*2|S.indexOf(Z.charAt(H))>>>6-ye*2);return J}};W.exports=P})()},"./node_modules/is-buffer/index.js":function(W,D){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */W.exports=function(Z){return Z!=null&&(S(Z)||P(Z)||!!Z._isBuffer)};function S(Z){return!!Z.constructor&&typeof Z.constructor.isBuffer=="function"&&Z.constructor.isBuffer(Z)}function P(Z){return typeof Z.readFloatLE=="function"&&typeof Z.slice=="function"&&S(Z.slice(0,0))}},"./node_modules/md5/md5.js":function(W,D,S){(function(){var P=S("./node_modules/crypt/crypt.js"),Z=S("./node_modules/charenc/charenc.js").utf8,J=S("./node_modules/is-buffer/index.js"),H=S("./node_modules/charenc/charenc.js").bin,ye=function(ve,xe){ve.constructor==String?xe&&xe.encoding==="binary"?ve=H.stringToBytes(ve):ve=Z.stringToBytes(ve):J(ve)?ve=Array.prototype.slice.call(ve,0):!Array.isArray(ve)&&ve.constructor!==Uint8Array&&(ve=ve.toString());for(var te=P.bytesToWords(ve),ae=ve.length*8,re=1732584193,ie=-271733879,me=-1732584194,we=271733878,_e=0;_e<te.length;_e++)te[_e]=(te[_e]<<8|te[_e]>>>24)&16711935|(te[_e]<<24|te[_e]>>>8)&4278255360;te[ae>>>5]|=128<<ae%32,te[(ae+64>>>9<<4)+14]=ae;for(var $e=ye._ff,ke=ye._gg,Le=ye._hh,Xe=ye._ii,_e=0;_e<te.length;_e+=16){var Ve=re,ot=ie,ht=me,gt=we;re=$e(re,ie,me,we,te[_e+0],7,-680876936),we=$e(we,re,ie,me,te[_e+1],12,-389564586),me=$e(me,we,re,ie,te[_e+2],17,606105819),ie=$e(ie,me,we,re,te[_e+3],22,-1044525330),re=$e(re,ie,me,we,te[_e+4],7,-176418897),we=$e(we,re,ie,me,te[_e+5],12,1200080426),me=$e(me,we,re,ie,te[_e+6],17,-1473231341),ie=$e(ie,me,we,re,te[_e+7],22,-45705983),re=$e(re,ie,me,we,te[_e+8],7,1770035416),we=$e(we,re,ie,me,te[_e+9],12,-1958414417),me=$e(me,we,re,ie,te[_e+10],17,-42063),ie=$e(ie,me,we,re,te[_e+11],22,-1990404162),re=$e(re,ie,me,we,te[_e+12],7,1804603682),we=$e(we,re,ie,me,te[_e+13],12,-40341101),me=$e(me,we,re,ie,te[_e+14],17,-1502002290),ie=$e(ie,me,we,re,te[_e+15],22,1236535329),re=ke(re,ie,me,we,te[_e+1],5,-165796510),we=ke(we,re,ie,me,te[_e+6],9,-1069501632),me=ke(me,we,re,ie,te[_e+11],14,643717713),ie=ke(ie,me,we,re,te[_e+0],20,-373897302),re=ke(re,ie,me,we,te[_e+5],5,-701558691),we=ke(we,re,ie,me,te[_e+10],9,38016083),me=ke(me,we,re,ie,te[_e+15],14,-660478335),ie=ke(ie,me,we,re,te[_e+4],20,-405537848),re=ke(re,ie,me,we,te[_e+9],5,568446438),we=ke(we,re,ie,me,te[_e+14],9,-1019803690),me=ke(me,we,re,ie,te[_e+3],14,-187363961),ie=ke(ie,me,we,re,te[_e+8],20,1163531501),re=ke(re,ie,me,we,te[_e+13],5,-1444681467),we=ke(we,re,ie,me,te[_e+2],9,-51403784),me=ke(me,we,re,ie,te[_e+7],14,1735328473),ie=ke(ie,me,we,re,te[_e+12],20,-1926607734),re=Le(re,ie,me,we,te[_e+5],4,-378558),we=Le(we,re,ie,me,te[_e+8],11,-2022574463),me=Le(me,we,re,ie,te[_e+11],16,1839030562),ie=Le(ie,me,we,re,te[_e+14],23,-35309556),re=Le(re,ie,me,we,te[_e+1],4,-1530992060),we=Le(we,re,ie,me,te[_e+4],11,1272893353),me=Le(me,we,re,ie,te[_e+7],16,-155497632),ie=Le(ie,me,we,re,te[_e+10],23,-1094730640),re=Le(re,ie,me,we,te[_e+13],4,681279174),we=Le(we,re,ie,me,te[_e+0],11,-358537222),me=Le(me,we,re,ie,te[_e+3],16,-722521979),ie=Le(ie,me,we,re,te[_e+6],23,76029189),re=Le(re,ie,me,we,te[_e+9],4,-640364487),we=Le(we,re,ie,me,te[_e+12],11,-421815835),me=Le(me,we,re,ie,te[_e+15],16,530742520),ie=Le(ie,me,we,re,te[_e+2],23,-995338651),re=Xe(re,ie,me,we,te[_e+0],6,-198630844),we=Xe(we,re,ie,me,te[_e+7],10,1126891415),me=Xe(me,we,re,ie,te[_e+14],15,-1416354905),ie=Xe(ie,me,we,re,te[_e+5],21,-57434055),re=Xe(re,ie,me,we,te[_e+12],6,1700485571),we=Xe(we,re,ie,me,te[_e+3],10,-1894986606),me=Xe(me,we,re,ie,te[_e+10],15,-1051523),ie=Xe(ie,me,we,re,te[_e+1],21,-2054922799),re=Xe(re,ie,me,we,te[_e+8],6,1873313359),we=Xe(we,re,ie,me,te[_e+15],10,-30611744),me=Xe(me,we,re,ie,te[_e+6],15,-1560198380),ie=Xe(ie,me,we,re,te[_e+13],21,1309151649),re=Xe(re,ie,me,we,te[_e+4],6,-145523070),we=Xe(we,re,ie,me,te[_e+11],10,-1120210379),me=Xe(me,we,re,ie,te[_e+2],15,718787259),ie=Xe(ie,me,we,re,te[_e+9],21,-343485551),re=re+Ve>>>0,ie=ie+ot>>>0,me=me+ht>>>0,we=we+gt>>>0}return P.endian([re,ie,me,we])};ye._ff=function(ve,xe,te,ae,re,ie,me){var we=ve+(xe&te|~xe&ae)+(re>>>0)+me;return(we<<ie|we>>>32-ie)+xe},ye._gg=function(ve,xe,te,ae,re,ie,me){var we=ve+(xe&ae|te&~ae)+(re>>>0)+me;return(we<<ie|we>>>32-ie)+xe},ye._hh=function(ve,xe,te,ae,re,ie,me){var we=ve+(xe^te^ae)+(re>>>0)+me;return(we<<ie|we>>>32-ie)+xe},ye._ii=function(ve,xe,te,ae,re,ie,me){var we=ve+(te^(xe|~ae))+(re>>>0)+me;return(we<<ie|we>>>32-ie)+xe},ye._blocksize=16,ye._digestsize=16,W.exports=function(ve,xe){if(ve==null)throw new Error("Illegal argument "+ve);var te=P.wordsToBytes(ye(ve,xe));return xe&&xe.asBytes?te:xe&&xe.asString?H.bytesToString(te):P.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(W,D,S){var P=function(Z){var J=Object.prototype,H=J.hasOwnProperty,ye,ve=typeof Symbol=="function"?Symbol:{},xe=ve.iterator||"@@iterator",te=ve.asyncIterator||"@@asyncIterator",ae=ve.toStringTag||"@@toStringTag";function re(F,R,ge){return Object.defineProperty(F,R,{value:ge,enumerable:!0,configurable:!0,writable:!0}),F[R]}try{re({},"")}catch{re=function(R,ge,Ge){return R[ge]=Ge}}function ie(F,R,ge,Ge){var tt=R&&R.prototype instanceof Xe?R:Xe,We=Object.create(tt.prototype),se=new Ft(Ge||[]);return We._invoke=Je(F,ge,se),We}Z.wrap=ie;function me(F,R,ge){try{return{type:"normal",arg:F.call(R,ge)}}catch(Ge){return{type:"throw",arg:Ge}}}var we="suspendedStart",_e="suspendedYield",$e="executing",ke="completed",Le={};function Xe(){}function Ve(){}function ot(){}var ht={};ht[xe]=function(){return this};var gt=Object.getPrototypeOf,Lt=gt&&gt(gt(un([])));Lt&&Lt!==J&&H.call(Lt,xe)&&(ht=Lt);var ft=ot.prototype=Xe.prototype=Object.create(ht);Ve.prototype=ft.constructor=ot,ot.constructor=Ve,Ve.displayName=re(ot,ae,"GeneratorFunction");function wt(F){["next","throw","return"].forEach(function(R){re(F,R,function(ge){return this._invoke(R,ge)})})}Z.isGeneratorFunction=function(F){var R=typeof F=="function"&&F.constructor;return R?R===Ve||(R.displayName||R.name)==="GeneratorFunction":!1},Z.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,ot):(F.__proto__=ot,re(F,ae,"GeneratorFunction")),F.prototype=Object.create(ft),F},Z.awrap=function(F){return{__await:F}};function Nt(F,R){function ge(We,se,L,j){var be=me(F[We],F,se);if(be.type==="throw")j(be.arg);else{var Te=be.arg,Ke=Te.value;return Ke&&typeof Ke=="object"&&H.call(Ke,"__await")?R.resolve(Ke.__await).then(function(et){ge("next",et,L,j)},function(et){ge("throw",et,L,j)}):R.resolve(Ke).then(function(et){Te.value=et,L(Te)},function(et){return ge("throw",et,L,j)})}}var Ge;function tt(We,se){function L(){return new R(function(j,be){ge(We,se,j,be)})}return Ge=Ge?Ge.then(L,L):L()}this._invoke=tt}wt(Nt.prototype),Nt.prototype[te]=function(){return this},Z.AsyncIterator=Nt,Z.async=function(F,R,ge,Ge,tt){tt===void 0&&(tt=Promise);var We=new Nt(ie(F,R,ge,Ge),tt);return Z.isGeneratorFunction(R)?We:We.next().then(function(se){return se.done?se.value:We.next()})};function Je(F,R,ge){var Ge=we;return function(We,se){if(Ge===$e)throw new Error("Generator is already running");if(Ge===ke){if(We==="throw")throw se;return Se()}for(ge.method=We,ge.arg=se;;){var L=ge.delegate;if(L){var j=sn(L,ge);if(j){if(j===Le)continue;return j}}if(ge.method==="next")ge.sent=ge._sent=ge.arg;else if(ge.method==="throw"){if(Ge===we)throw Ge=ke,ge.arg;ge.dispatchException(ge.arg)}else ge.method==="return"&&ge.abrupt("return",ge.arg);Ge=$e;var be=me(F,R,ge);if(be.type==="normal"){if(Ge=ge.done?ke:_e,be.arg===Le)continue;return{value:be.arg,done:ge.done}}else be.type==="throw"&&(Ge=ke,ge.method="throw",ge.arg=be.arg)}}}function sn(F,R){var ge=F.iterator[R.method];if(ge===ye){if(R.delegate=null,R.method==="throw"){if(F.iterator.return&&(R.method="return",R.arg=ye,sn(F,R),R.method==="throw"))return Le;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return Le}var Ge=me(ge,F.iterator,R.arg);if(Ge.type==="throw")return R.method="throw",R.arg=Ge.arg,R.delegate=null,Le;var tt=Ge.arg;if(!tt)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,Le;if(tt.done)R[F.resultName]=tt.value,R.next=F.nextLoc,R.method!=="return"&&(R.method="next",R.arg=ye);else return tt;return R.delegate=null,Le}wt(ft),re(ft,ae,"Generator"),ft[xe]=function(){return this},ft.toString=function(){return"[object Generator]"};function wn(F){var R={tryLoc:F[0]};1 in F&&(R.catchLoc=F[1]),2 in F&&(R.finallyLoc=F[2],R.afterLoc=F[3]),this.tryEntries.push(R)}function Ht(F){var R=F.completion||{};R.type="normal",delete R.arg,F.completion=R}function Ft(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(wn,this),this.reset(!0)}Z.keys=function(F){var R=[];for(var ge in F)R.push(ge);return R.reverse(),function Ge(){for(;R.length;){var tt=R.pop();if(tt in F)return Ge.value=tt,Ge.done=!1,Ge}return Ge.done=!0,Ge}};function un(F){if(F){var R=F[xe];if(R)return R.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var ge=-1,Ge=function tt(){for(;++ge<F.length;)if(H.call(F,ge))return tt.value=F[ge],tt.done=!1,tt;return tt.value=ye,tt.done=!0,tt};return Ge.next=Ge}}return{next:Se}}Z.values=un;function Se(){return{value:ye,done:!0}}return Ft.prototype={constructor:Ft,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(Ht),!F)for(var R in this)R.charAt(0)==="t"&&H.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=ye)},stop:function(){this.done=!0;var F=this.tryEntries[0],R=F.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var R=this;function ge(j,be){return We.type="throw",We.arg=F,R.next=j,be&&(R.method="next",R.arg=ye),!!be}for(var Ge=this.tryEntries.length-1;Ge>=0;--Ge){var tt=this.tryEntries[Ge],We=tt.completion;if(tt.tryLoc==="root")return ge("end");if(tt.tryLoc<=this.prev){var se=H.call(tt,"catchLoc"),L=H.call(tt,"finallyLoc");if(se&&L){if(this.prev<tt.catchLoc)return ge(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return ge(tt.finallyLoc)}else if(se){if(this.prev<tt.catchLoc)return ge(tt.catchLoc,!0)}else if(L){if(this.prev<tt.finallyLoc)return ge(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,R){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Ge=this.tryEntries[ge];if(Ge.tryLoc<=this.prev&&H.call(Ge,"finallyLoc")&&this.prev<Ge.finallyLoc){var tt=Ge;break}}tt&&(F==="break"||F==="continue")&&tt.tryLoc<=R&&R<=tt.finallyLoc&&(tt=null);var We=tt?tt.completion:{};return We.type=F,We.arg=R,tt?(this.method="next",this.next=tt.finallyLoc,Le):this.complete(We)},complete:function(F,R){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&R&&(this.next=R),Le},finish:function(F){for(var R=this.tryEntries.length-1;R>=0;--R){var ge=this.tryEntries[R];if(ge.finallyLoc===F)return this.complete(ge.completion,ge.afterLoc),Ht(ge),Le}},catch:function(F){for(var R=this.tryEntries.length-1;R>=0;--R){var ge=this.tryEntries[R];if(ge.tryLoc===F){var Ge=ge.completion;if(Ge.type==="throw"){var tt=Ge.arg;Ht(ge)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(F,R,ge){return this.delegate={iterator:un(F),resultName:R,nextLoc:ge},this.method==="next"&&(this.arg=ye),Le}},Z}(W.exports);try{regeneratorRuntime=P}catch{Function("r","regeneratorRuntime = r")(P)}},"./src/api.js":function(W,D,S){S.r(D),S.d(D,"setup",function(){return $e}),S.d(D,"setupCache",function(){return _e}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var P=S("axios"),Z=S.n(P),J=S("./src/request.js"),H=S("./src/cache.js");S.d(D,"serializeQuery",function(){return H.serializeQuery});var ye=S("./src/config.js"),ve=S("./src/utilities.js");function xe(ke,Le){if(ke==null)return{};var Xe=te(ke,Le),Ve,ot;if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(ke);for(ot=0;ot<ht.length;ot++)Ve=ht[ot],!(Le.indexOf(Ve)>=0)&&Object.prototype.propertyIsEnumerable.call(ke,Ve)&&(Xe[Ve]=ke[Ve])}return Xe}function te(ke,Le){if(ke==null)return{};var Xe={},Ve=Object.keys(ke),ot,ht;for(ht=0;ht<Ve.length;ht++)ot=Ve[ht],!(Le.indexOf(ot)>=0)&&(Xe[ot]=ke[ot]);return Xe}function ae(ke,Le){var Xe=Object.keys(ke);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols(ke);Le&&(Ve=Ve.filter(function(ot){return Object.getOwnPropertyDescriptor(ke,ot).enumerable})),Xe.push.apply(Xe,Ve)}return Xe}function re(ke){for(var Le=1;Le<arguments.length;Le++){var Xe=arguments[Le]!=null?arguments[Le]:{};Le%2?ae(Object(Xe),!0).forEach(function(Ve){ie(ke,Ve,Xe[Ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(Xe)):ae(Object(Xe)).forEach(function(Ve){Object.defineProperty(ke,Ve,Object.getOwnPropertyDescriptor(Xe,Ve))})}return ke}function ie(ke,Le,Xe){return Le in ke?Object.defineProperty(ke,Le,{value:Xe,enumerable:!0,configurable:!0,writable:!0}):ke[Le]=Xe,ke}function me(ke,Le,Xe,Ve,ot,ht,gt){try{var Lt=ke[ht](gt),ft=Lt.value}catch(wt){Xe(wt);return}Lt.done?Le(ft):Promise.resolve(ft).then(Ve,ot)}function we(ke){return function(){var Le=this,Xe=arguments;return new Promise(function(Ve,ot){var ht=ke.apply(Le,Xe);function gt(ft){me(ht,Ve,ot,gt,Lt,"next",ft)}function Lt(ft){me(ht,Ve,ot,gt,Lt,"throw",ft)}gt(void 0)})}}function _e(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ke=Object(ye.makeConfig)(ke);function Le(Ve){return Xe.apply(this,arguments)}function Xe(){return Xe=we(regeneratorRuntime.mark(function Ve(ot){var ht,gt,Lt,ft,wt;return regeneratorRuntime.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return ht=Object(ye.mergeRequestConfig)(ke,ot),Je.next=3,Object(J.default)(ht,ot);case 3:if(gt=Je.sent,Lt=gt.next,Object(ve.isFunction)(Lt)){Je.next=7;break}return Je.abrupt("return",Lt);case 7:return Je.prev=7,Je.next=10,ht.adapter(ot);case 10:gt=Je.sent,Je.next=16;break;case 13:Je.prev=13,Je.t0=Je.catch(7),ft=Je.t0;case 16:if(!ft){Je.next=31;break}if(wt=Object(ve.isFunction)(ht.readOnError)?ht.readOnError(ft,ot):ht.readOnError,!wt){Je.next=30;break}return Je.prev=19,ht.acceptStale=!0,Je.next=23,Object(J.default)(ht,ot);case 23:return gt=Je.sent,gt.next.request.stale=!0,Je.abrupt("return",gt.next);case 28:Je.prev=28,Je.t1=Je.catch(19);case 30:throw ft;case 31:return Je.abrupt("return",Lt(gt));case 32:case"end":return Je.stop()}},Ve,null,[[7,13],[19,28]])})),Xe.apply(this,arguments)}return{adapter:Le,config:ke,store:ke.store}}function $e(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Le=re(re(re({},ye.defaults.axios),ke),{},{cache:re(re({},ye.defaults.axios.cache),ke.cache)}),Xe=_e(Le.cache);Le.cache;var Ve=xe(Le,["cache"]),ot=Z.a.create(re(re({},Ve),{},{adapter:Xe.adapter}));return ot.cache=Xe.store,ot}D.default={setup:$e,setupCache:_e,serializeQuery:H.serializeQuery}},"./src/cache.js":function(W,D,S){S.r(D),S.d(D,"read",function(){return ae}),S.d(D,"write",function(){return xe}),S.d(D,"key",function(){return ie}),S.d(D,"invalidate",function(){return _e}),S.d(D,"serializeQuery",function(){return $e}),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("./src/utilities.js"),Z=S("./node_modules/md5/md5.js"),J=S.n(Z),H=S("./src/serialize.js");function ye(ke,Le,Xe,Ve,ot,ht,gt){try{var Lt=ke[ht](gt),ft=Lt.value}catch(wt){Xe(wt);return}Lt.done?Le(ft):Promise.resolve(ft).then(Ve,ot)}function ve(ke){return function(){var Le=this,Xe=arguments;return new Promise(function(Ve,ot){var ht=ke.apply(Le,Xe);function gt(ft){ye(ht,Ve,ot,gt,Lt,"next",ft)}function Lt(ft){ye(ht,Ve,ot,gt,Lt,"throw",ft)}gt(void 0)})}}function xe(ke,Le,Xe){return te.apply(this,arguments)}function te(){return te=ve(regeneratorRuntime.mark(function ke(Le,Xe,Ve){var ot;return regeneratorRuntime.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.prev=0,ot={expires:Le.expires,data:Object(H.default)(Le,Xe,Ve)},gt.next=4,Le.store.setItem(Le.uuid,ot);case 4:gt.next=19;break;case 6:if(gt.prev=6,gt.t0=gt.catch(0),Le.debug("Could not store response",gt.t0),!Le.clearOnError){gt.next=18;break}return gt.prev=10,gt.next=13,Le.store.clear();case 13:gt.next=18;break;case 15:gt.prev=15,gt.t1=gt.catch(10),Le.debug("Could not clear store",gt.t1);case 18:return gt.abrupt("return",!1);case 19:return gt.abrupt("return",!0);case 20:case"end":return gt.stop()}},ke,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function ae(ke,Le){return re.apply(this,arguments)}function re(){return re=ve(regeneratorRuntime.mark(function ke(Le,Xe){var Ve,ot,ht,gt,Lt,ft,wt,Nt;return regeneratorRuntime.wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return Ve=Le.uuid,ot=Le.ignoreCache,sn.next=3,Le.store.getItem(Ve);case 3:if(ht=sn.sent,!(ot||!ht||!ht.data)){sn.next=10;break}throw Le.debug("cache-miss",Xe.url),gt=new Error,gt.reason="cache-miss",gt.message="Entry not found from cache",gt;case 10:if(Lt=ht.expires,ft=ht.data,wt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!wt&&!Le.acceptStale&&Lt!==0&&Lt<Date.now())){sn.next=18;break}throw Le.debug("cache-stale",Xe.url),Nt=new Error,Nt.reason="cache-stale",Nt.message="Entry is stale",Nt;case 18:return Le.debug(Le.acceptStale?"cache-hit-stale":"cache-hit",Xe.url),sn.abrupt("return",ft);case 20:case"end":return sn.stop()}},ke)})),re.apply(this,arguments)}function ie(ke){if(Object(P.isFunction)(ke.key))return ke.key;var Le;return Object(P.isString)(ke.key)?Le=function(Ve){var ot="".concat(Ve.baseURL?Ve.baseURL:"").concat(Ve.url),ht="".concat(ke.key,"/").concat(ot).concat($e(Ve));return Ve.data?ht+J()(Ve.data):ht}:Le=function(Ve){var ot="".concat(Ve.baseURL?Ve.baseURL:"").concat(Ve.url),ht=ot+$e(Ve);return Ve.data?ht+J()(Ve.data):ht},Le}function me(ke,Le){return we.apply(this,arguments)}function we(){return we=ve(regeneratorRuntime.mark(function ke(Le,Xe){var Ve;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(Ve=Xe.method.toLowerCase(),!Le.exclude.methods.includes(Ve)){ht.next=4;break}return ht.next=4,Le.store.removeItem(Le.uuid);case 4:case"end":return ht.stop()}},ke)})),we.apply(this,arguments)}function _e(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(P.isFunction)(ke.invalidate)?ke.invalidate:me}function $e(ke){if(!ke.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(ke.params);var Le=ke.params,Xe=ke.params instanceof URLSearchParams;return Xe||(Le=new URLSearchParams,Object.keys(ke.params).forEach(function(Ve){return Le.append(Ve,ke.params[Ve])})),"?".concat(Le.toString())}D.default={read:ae,write:xe,key:ie,invalidate:_e,serializeQuery:$e}},"./src/config.js":function(W,D,S){S.r(D),S.d(D,"defaults",function(){return re}),S.d(D,"makeConfig",function(){return me}),S.d(D,"mergeRequestConfig",function(){return we}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("axios"),Z=S.n(P),J=S("./src/memory.js"),H=S("./src/cache.js");function ye(_e,$e){var ke=Object.keys(_e);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(_e);$e&&(Le=Le.filter(function(Xe){return Object.getOwnPropertyDescriptor(_e,Xe).enumerable})),ke.push.apply(ke,Le)}return ke}function ve(_e){for(var $e=1;$e<arguments.length;$e++){var ke=arguments[$e]!=null?arguments[$e]:{};$e%2?ye(Object(ke),!0).forEach(function(Le){xe(_e,Le,ke[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(ke)):ye(Object(ke)).forEach(function(Le){Object.defineProperty(_e,Le,Object.getOwnPropertyDescriptor(ke,Le))})}return _e}function xe(_e,$e,ke){return $e in _e?Object.defineProperty(_e,$e,{value:ke,enumerable:!0,configurable:!0,writable:!0}):_e[$e]=ke,_e}var te=function(){},ae=function(){for(var $e,ke=arguments.length,Le=new Array(ke),Xe=0;Xe<ke;Xe++)Le[Xe]=arguments[Xe];return($e=console).log.apply($e,["[axios-cache-adapter]"].concat(Le))},re={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:Z.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ie=["limit","store","adapter","uuid","acceptStale"],me=function(){var $e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=ve(ve(ve({},re.cache),$e),{},{exclude:ve(ve({},re.cache.exclude),$e.exclude)});return ke.key=Object(H.key)(ke),ke.invalidate=Object(H.invalidate)(ke),ke.debug!==!1?ke.debug=typeof ke.debug=="function"?ke.debug:ae:ke.debug=te,ke.store||(ke.store=new J.default),ke.debug("Global cache config",ke),ke},we=function($e,ke){var Le=ke.cache||{};Le&&ie.forEach(function(Ve){return Le[Ve]?delete Le[Ve]:void 0});var Xe=ve(ve(ve({},$e),Le),{},{exclude:ve(ve({},$e.exclude),Le.exclude)});return Xe.debug===!0&&(Xe.debug=ae),Le.key&&(Xe.key=Object(H.key)(Le)),Xe.uuid=Xe.key(ke),$e.debug("Request config for ".concat(ke.url),Xe),Xe};D.default={defaults:re,makeConfig:me,mergeRequestConfig:we}},"./src/exclude.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js");var P=S("./src/utilities.js");function Z(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=arguments.length>1?arguments[1]:void 0,ye=J.exclude,ve=ye===void 0?{}:ye,xe=J.debug,te=H.method.toLowerCase();if(te==="head"||ve.methods.includes(te))return xe("Excluding request by HTTP method ".concat(H.url)),!0;if(typeof ve.filter=="function"&&ve.filter(H))return xe("Excluding request by filter ".concat(H.url)),!0;var ae=/\?.*$/.test(H.url)||Object(P.isObject)(H.params)&&Object.keys(H.params).length!==0||typeof URLSearchParams<"u"&&H.params instanceof URLSearchParams;if(ve.query&&ae)return xe("Excluding request by query ".concat(H.url)),!0;var re=ve.paths||[],ie=re.some(function(me){return H.url.match(me)});return ie?(xe("Excluding request by url match ".concat(H.url)),!0):!1}D.default=Z},"./src/index.node.js":function(W,D,S){S.r(D);var P=S("./src/api.js");S.d(D,"setup",function(){return P.setup}),S.d(D,"setupCache",function(){return P.setupCache}),S.d(D,"serializeQuery",function(){return P.serializeQuery});var Z=S("./src/redis.js");S.d(D,"RedisStore",function(){return Z.default});var J=S("./src/redis-default.js");S.d(D,"RedisDefaultStore",function(){return J.default}),D.default={setup:P.setup,setupCache:P.setupCache,serializeQuery:P.serializeQuery,RedisStore:Z.default,RedisDefaultStore:J.default}},"./src/limit.js":function(W,D,S){S.r(D),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function P(ye,ve,xe,te,ae,re,ie){try{var me=ye[re](ie),we=me.value}catch(_e){xe(_e);return}me.done?ve(we):Promise.resolve(we).then(te,ae)}function Z(ye){return function(){var ve=this,xe=arguments;return new Promise(function(te,ae){var re=ye.apply(ve,xe);function ie(we){P(re,te,ae,ie,me,"next",we)}function me(we){P(re,te,ae,ie,me,"throw",we)}ie(void 0)})}}function J(ye){return H.apply(this,arguments)}function H(){return H=Z(regeneratorRuntime.mark(function ye(ve){var xe,te;return regeneratorRuntime.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,ve.store.length();case 2:if(xe=re.sent,!(xe<ve.limit)){re.next=5;break}return re.abrupt("return");case 5:return ve.debug("Current store size: ".concat(xe)),re.next=8,ve.store.iterate(function(ie,me){te||(te={value:ie,key:me}),ie.expires<te.value.expires&&(te={value:ie,key:me})});case 8:if(!te){re.next=12;break}return ve.debug("Removing item: ".concat(te.key)),re.next=12,ve.store.removeItem(te.key);case 12:case"end":return re.stop()}},ye)})),H.apply(this,arguments)}D.default=J},"./src/memory.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var P=S("./src/utilities.js");function Z(te,ae,re,ie,me,we,_e){try{var $e=te[we](_e),ke=$e.value}catch(Le){re(Le);return}$e.done?ae(ke):Promise.resolve(ke).then(ie,me)}function J(te){return function(){var ae=this,re=arguments;return new Promise(function(ie,me){var we=te.apply(ae,re);function _e(ke){Z(we,ie,me,_e,$e,"next",ke)}function $e(ke){Z(we,ie,me,_e,$e,"throw",ke)}_e(void 0)})}}function H(te,ae){if(!(te instanceof ae))throw new TypeError("Cannot call a class as a function")}function ye(te,ae){for(var re=0;re<ae.length;re++){var ie=ae[re];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}function ve(te,ae,re){return ae&&ye(te.prototype,ae),re&&ye(te,re),te}var xe=function(){function te(){H(this,te),this.store={}}return ve(te,[{key:"getItem",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me){var we;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return we=this.store[me]||null,$e.abrupt("return",JSON.parse(we));case 2:case"end":return $e.stop()}},ie,this)}));function re(ie){return ae.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me,we){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return this.store[me]=JSON.stringify(we),$e.abrupt("return",we);case 2:case"end":return $e.stop()}},ie,this)}));function re(ie,me){return ae.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:delete this.store[me];case 1:case"end":return _e.stop()}},ie,this)}));function re(ie){return ae.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ae=J(regeneratorRuntime.mark(function ie(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:this.store={};case 1:case"end":return we.stop()}},ie,this)}));function re(){return ae.apply(this,arguments)}return re}()},{key:"length",value:function(){var ae=J(regeneratorRuntime.mark(function ie(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",Object.keys(this.store).length);case 1:case"end":return we.stop()}},ie,this)}));function re(){return ae.apply(this,arguments)}return re}()},{key:"iterate",value:function(re){return Promise.all(Object(P.mapObject)(this.store,re))}}]),te}();D.default=xe},"./src/redis-default.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var P=S("util");function Z(te,ae,re,ie,me,we,_e){try{var $e=te[we](_e),ke=$e.value}catch(Le){re(Le);return}$e.done?ae(ke):Promise.resolve(ke).then(ie,me)}function J(te){return function(){var ae=this,re=arguments;return new Promise(function(ie,me){var we=te.apply(ae,re);function _e(ke){Z(we,ie,me,_e,$e,"next",ke)}function $e(ke){Z(we,ie,me,_e,$e,"throw",ke)}_e(void 0)})}}function H(te,ae){if(!(te instanceof ae))throw new TypeError("Cannot call a class as a function")}function ye(te,ae){for(var re=0;re<ae.length;re++){var ie=ae[re];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}function ve(te,ae,re){return ae&&ye(te.prototype,ae),re&&ye(te,re),te}var xe=function(){function te(ae){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};H(this,te);var ie=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ae.constructor.name!=="RedisClient")throw ie}catch{throw ie}this.client=ae,this.prefix=re.prefix||"axios-cache",this.maxScanCount=re.maxScanCount||1e3,this.getAsync=Object(P.promisify)(ae.get).bind(ae),this.psetexAsync=Object(P.promisify)(ae.psetex).bind(ae),this.delAsync=Object(P.promisify)(ae.del).bind(ae),this.scanAsync=Object(P.promisify)(ae.scan).bind(ae)}return ve(te,[{key:"calculateTTL",value:function(re){var ie=Date.now();return re.expires&&re.expires>ie?re.expires-ie:-1}},{key:"transformKey",value:function(re){return this.prefix+"_"+re}},{key:"getItem",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me){var we;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.getAsync(this.transformKey(me));case 2:if($e.t0=$e.sent,$e.t0){$e.next=5;break}$e.t0=null;case 5:return we=$e.t0,$e.abrupt("return",JSON.parse(we));case 7:case"end":return $e.stop()}},ie,this)}));function re(ie){return ae.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me,we){var _e,$e;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(_e=this.transformKey(me),$e=this.calculateTTL(we),!($e>0)){Le.next=5;break}return Le.next=5,this.psetexAsync(_e,$e,JSON.stringify(we));case 5:return Le.abrupt("return",we);case 6:case"end":return Le.stop()}},ie,this)}));function re(ie,me){return ae.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.delAsync(this.transformKey(me));case 2:case"end":return _e.stop()}},ie,this)}));function re(ie){return ae.apply(this,arguments)}return re}()},{key:"scan",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me){var we,_e;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:we="0";case 1:return ke.next=3,this.scanAsync(we,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return _e=ke.sent,we=_e[0],ke.next=7,me(_e[1]);case 7:if(we!=="0"){ke.next=1;break}case 8:case"end":return ke.stop()}},ie,this)}));function re(ie){return ae.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ae=J(regeneratorRuntime.mark(function ie(){var me=this;return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.scan(function($e){return me.delAsync($e)});case 2:case"end":return _e.stop()}},ie,this)}));function re(){return ae.apply(this,arguments)}return re}()},{key:"length",value:function(){var ae=J(regeneratorRuntime.mark(function ie(){var me;return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return me=0,_e.next=3,this.scan(function($e){me+=$e.length});case 3:return _e.abrupt("return",me);case 4:case"end":return _e.stop()}},ie,this)}));function re(){return ae.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var ae=J(regeneratorRuntime.mark(function ie(me){var we=this,_e,$e;return regeneratorRuntime.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return $e=function(){return $e=J(regeneratorRuntime.mark(function Ve(ot){var ht,gt;return regeneratorRuntime.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return ft.next=2,this.getAsync(ot);case 2:if(ft.t0=ft.sent,ft.t0){ft.next=5;break}ft.t0=null;case 5:return ht=ft.t0,gt=JSON.parse(ht),ft.next=9,me(gt,ot);case 9:return ft.abrupt("return",ft.sent);case 10:case"end":return ft.stop()}},Ve,this)})),$e.apply(this,arguments)},_e=function(Ve){return $e.apply(this,arguments)},Le.next=4,this.scan(function(Xe){return Promise.all(Xe.map(_e.bind(we)))});case 4:return Le.abrupt("return",Promise.resolve([]));case 5:case"end":return Le.stop()}},ie,this)}));function re(ie){return ae.apply(this,arguments)}return re}()}]),te}();D.default=xe},"./src/redis.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var P=S("util"),Z=S("./src/utilities.js");function J(ae,re,ie,me,we,_e,$e){try{var ke=ae[_e]($e),Le=ke.value}catch(Xe){ie(Xe);return}ke.done?re(Le):Promise.resolve(Le).then(me,we)}function H(ae){return function(){var re=this,ie=arguments;return new Promise(function(me,we){var _e=ae.apply(re,ie);function $e(Le){J(_e,me,we,$e,ke,"next",Le)}function ke(Le){J(_e,me,we,$e,ke,"throw",Le)}$e(void 0)})}}function ye(ae,re){if(!(ae instanceof re))throw new TypeError("Cannot call a class as a function")}function ve(ae,re){for(var ie=0;ie<re.length;ie++){var me=re[ie];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(ae,me.key,me)}}function xe(ae,re,ie){return re&&ve(ae.prototype,re),ie&&ve(ae,ie),ae}var te=function(){function ae(re){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ye(this,ae);var me=new TypeError("First parameter must be a valid RedisClient instance.");try{if(re.constructor.name!=="RedisClient")throw me}catch{throw me}this.client=re,this.HASH_KEY=ie,this.hgetAsync=Object(P.promisify)(re.hget).bind(re),this.hsetAsync=Object(P.promisify)(re.hset).bind(re),this.hdelAsync=Object(P.promisify)(re.hdel).bind(re),this.delAsync=Object(P.promisify)(re.del).bind(re),this.hlenAsync=Object(P.promisify)(re.hlen).bind(re),this.hgetallAsync=Object(P.promisify)(re.hgetall).bind(re)}return xe(ae,[{key:"getItem",value:function(){var re=H(regeneratorRuntime.mark(function me(we){var _e;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hgetAsync(this.HASH_KEY,we);case 2:if(ke.t0=ke.sent,ke.t0){ke.next=5;break}ke.t0=null;case 5:return _e=ke.t0,ke.abrupt("return",JSON.parse(_e));case 7:case"end":return ke.stop()}},me,this)}));function ie(me){return re.apply(this,arguments)}return ie}()},{key:"setItem",value:function(){var re=H(regeneratorRuntime.mark(function me(we,_e){return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hsetAsync(this.HASH_KEY,we,JSON.stringify(_e));case 2:return ke.abrupt("return",_e);case 3:case"end":return ke.stop()}},me,this)}));function ie(me,we){return re.apply(this,arguments)}return ie}()},{key:"removeItem",value:function(){var re=H(regeneratorRuntime.mark(function me(we){return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,this.hdelAsync(this.HASH_KEY,we);case 2:case"end":return $e.stop()}},me,this)}));function ie(me){return re.apply(this,arguments)}return ie}()},{key:"clear",value:function(){var re=H(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return _e.stop()}},me,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"length",value:function(){var re=H(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return _e.stop()}},me,this)}));function ie(){return re.apply(this,arguments)}return ie}()},{key:"iterate",value:function(){var re=H(regeneratorRuntime.mark(function me(we){var _e;return regeneratorRuntime.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return _e=ke.sent,ke.abrupt("return",Promise.all(Object(Z.mapObject)(_e,we)));case 4:case"end":return ke.stop()}},me,this)}));function ie(me){return re.apply(this,arguments)}return ie}()}]),ae}();D.default=te},"./src/request.js":function(W,D,S){S.r(D),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("./src/response.js"),Z=S("./src/exclude.js"),J=S("./src/cache.js");function H(te,ae,re,ie,me,we,_e){try{var $e=te[we](_e),ke=$e.value}catch(Le){re(Le);return}$e.done?ae(ke):Promise.resolve(ke).then(ie,me)}function ye(te){return function(){var ae=this,re=arguments;return new Promise(function(ie,me){var we=te.apply(ae,re);function _e(ke){H(we,ie,me,_e,$e,"next",ke)}function $e(ke){H(we,ie,me,_e,$e,"throw",ke)}_e(void 0)})}}function ve(te,ae){return xe.apply(this,arguments)}function xe(){return xe=ye(regeneratorRuntime.mark(function te(ae,re){var ie,me,we;return regeneratorRuntime.wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return we=function(){return ae.excludeFromCache=!0,{config:ae,next:ie}},ae.debug("uuid",ae.uuid),ie=function(){for(var Le=arguments.length,Xe=new Array(Le),Ve=0;Ve<Le;Ve++)Xe[Ve]=arguments[Ve];return P.default.apply(void 0,[ae,re].concat(Xe))},$e.next=5,ae.invalidate(ae,re);case 5:if(!Object(Z.default)(ae,re)){$e.next=7;break}return $e.abrupt("return",we());case 7:return $e.prev=7,$e.next=10,Object(J.read)(ae,re);case 10:return me=$e.sent,me.config=re,me.request={fromCache:!0},$e.abrupt("return",{config:ae,next:me});case 16:if($e.prev=16,$e.t0=$e.catch(7),!(ae.clearOnStale&&$e.t0.reason==="cache-stale")){$e.next=21;break}return $e.next=21,ae.store.removeItem(ae.uuid);case 21:return $e.abrupt("return",{config:ae,next:ie});case 22:case"end":return $e.stop()}},te,null,[[7,16]])})),xe.apply(this,arguments)}D.default=ve},"./src/response.js":function(W,D,S){S.r(D),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var P=S("./src/limit.js"),Z=S("./src/cache.js"),J=S("./node_modules/cache-control-esm/index.js");function H(te,ae,re,ie,me,we,_e){try{var $e=te[we](_e),ke=$e.value}catch(Le){re(Le);return}$e.done?ae(ke):Promise.resolve(ke).then(ie,me)}function ye(te){return function(){var ae=this,re=arguments;return new Promise(function(ie,me){var we=te.apply(ae,re);function _e(ke){H(we,ie,me,_e,$e,"next",ke)}function $e(ke){H(we,ie,me,_e,$e,"throw",ke)}_e(void 0)})}}function ve(te,ae,re){return xe.apply(this,arguments)}function xe(){return xe=ye(regeneratorRuntime.mark(function te(ae,re,ie){var me,we,_e,$e,ke;return regeneratorRuntime.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(me=ie.request,we=me===void 0?{}:me,_e=ie.headers,$e=_e===void 0?{}:_e,!(["arraybuffer","blob"].indexOf(we.responseType)>-1)){Xe.next=3;break}return Xe.abrupt("return",ie);case 3:if(ke={},ae.readHeaders&&($e["cache-control"]?(ke=Object(J.parse)($e["cache-control"]),(ke.noCache||ke.noStore)&&(ae.excludeFromCache=!0)):$e.expires?ae.expires=new Date($e.expires).getTime():ae.expires=new Date().getTime()),ae.excludeFromCache){Xe.next=15;break}if(ke.maxAge||ke.maxAge===0?ae.expires=Date.now()+ke.maxAge*1e3:ae.readHeaders||(ae.expires=ae.maxAge===0?Date.now():Date.now()+ae.maxAge),!ae.limit){Xe.next=11;break}return ae.debug("Detected limit: ".concat(ae.limit)),Xe.next=11,Object(P.default)(ae);case 11:return Xe.next=13,Object(Z.write)(ae,re,ie);case 13:Xe.next=16;break;case 15:ie.request.excludedFromCache=!0;case 16:return Xe.abrupt("return",ie);case 17:case"end":return Xe.stop()}},te)})),xe.apply(this,arguments)}D.default=ve},"./src/serialize.js":function(W,D,S){S.r(D),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function P(H,ye){if(H==null)return{};var ve=Z(H,ye),xe,te;if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(H);for(te=0;te<ae.length;te++)xe=ae[te],!(ye.indexOf(xe)>=0)&&Object.prototype.propertyIsEnumerable.call(H,xe)&&(ve[xe]=H[xe])}return ve}function Z(H,ye){if(H==null)return{};var ve={},xe=Object.keys(H),te,ae;for(ae=0;ae<xe.length;ae++)te=xe[ae],!(ye.indexOf(te)>=0)&&(ve[te]=H[te]);return ve}function J(H,ye,ve){if(ve.data)try{ve.data=JSON.parse(ve.data)}catch(te){H.debug("Could not parse data as JSON",te)}ve.request,ve.config;var xe=P(ve,["request","config"]);return xe}D.default=J},"./src/utilities.js":function(W,D,S){S.r(D),S.d(D,"isObject",function(){return Z}),S.d(D,"getTag",function(){return J}),S.d(D,"isFunction",function(){return H}),S.d(D,"isString",function(){return ye}),S.d(D,"mapObject",function(){return ve}),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function P(xe){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(ae){return typeof ae}:P=function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},P(xe)}function Z(xe){var te=P(xe);return xe!=null&&(te==="object"||te==="function")}function J(xe){return xe===null?xe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(xe)}function H(xe){if(!Z(xe))return!1;var te=J(xe);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ye(xe){var te=P(xe);return te==="string"||te==="object"&&xe!=null&&!Array.isArray(xe)&&J(xe)==="[object String]"}function ve(xe,te){return Z(xe)?Object.keys(xe).map(function(ae){return te(xe[ae],ae)}):[]}},axios:function(W,D){W.exports=oe},util:function(W,D){W.exports=C.default}})})});const Q={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},K=O.setupCache({maxAge:60*60*24*1e3}),pe=w.default.create({adapter:K.adapter}),G=async(V,B={})=>{const oe={...Q,...B},[W,D]=i.lngLatToGoogle(V,oe.zoomBase),S=oe.tileUrl.replace("{z}",String(oe.zoomBase)).replace("{x}",String(W)).replace("{y}",String(D)),P={code:"",prefecture:"",city:""};let Z;try{const ye=await pe.get(S,{responseType:"arraybuffer"});Z=Buffer.from(ye.data,"binary")}catch(ye){throw new Error(ye)}const J=new y.VectorTile(new b.default(Z));let H=Object.keys(J.layers);return Array.isArray(H)||(H=[H]),H.forEach(ye=>{const ve=J.layers[ye];if(ve&&oe.layer===ve.name)for(let xe=0;xe<ve.length;xe++){const te=ve.feature(xe).toGeoJSON(W,D,oe.zoomBase);H.length>1&&(te.properties.vt_layer=ye);const ae={type:"FeatureCollection",features:[te]};t.geoContains(ae,V)&&(P.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,P.prefecture=te.properties.prefecture,P.city=te.properties.city)}}),P};e.openReverseGeocoder=G})(MC);const BO={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},NO={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},UO={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},$O={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},vE={JPN:UO,CHN:BO,DEU:NO,KOR:$O};function VI(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function VO(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_E(e[0])||!_E(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return VI(a,t,i)}function GO(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var d=c[a];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<d[d.length-1].length;y++)if(d[d.length-1][y]!==d[0][y])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return VI(l,t,i)}function _E(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function GI(e,t,i){if(e!==null)for(var a,c,d,y,l,b,w,C=0,E=0,z,O=e.type,Q=O==="FeatureCollection",K=O==="Feature",pe=Q?e.features.length:1,G=0;G<pe;G++){w=Q?e.features[G].geometry:K?e.geometry:e,z=w?w.type==="GeometryCollection":!1,l=z?w.geometries.length:1;for(var V=0;V<l;V++){var B=0,oe=0;if(y=z?w.geometries[V]:w,y!==null){b=y.coordinates;var W=y.type;switch(C=i&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(t(b,E,G,B,oe)===!1)return!1;E++,B++;break;case"LineString":case"MultiPoint":for(a=0;a<b.length;a++){if(t(b[a],E,G,B,oe)===!1)return!1;E++,W==="MultiPoint"&&B++}W==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(a=0;a<b.length;a++){for(c=0;c<b[a].length-C;c++){if(t(b[a][c],E,G,B,oe)===!1)return!1;E++}W==="MultiLineString"&&B++,W==="Polygon"&&oe++}W==="Polygon"&&B++;break;case"MultiPolygon":for(a=0;a<b.length;a++){for(oe=0,c=0;c<b[a].length;c++){for(d=0;d<b[a][c].length-C;d++){if(t(b[a][c][d],E,G,B,oe)===!1)return!1;E++}oe++}B++}break;case"GeometryCollection":for(a=0;a<y.geometries.length;a++)if(GI(y.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ZO(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function WO(e){return e.type==="Feature"?e.geometry:e}function HO(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=ZO(e),c=WO(t),d=c.type,y=t.bbox,l=c.coordinates;if(y&&XO(a,y)===!1)return!1;d==="Polygon"&&(l=[l]);for(var b=!1,w=0;w<l.length&&!b;w++)if(xE(a,l[w][0],i.ignoreBoundary)){for(var C=!1,E=1;E<l[w].length&&!C;)xE(a,l[w][E],!i.ignoreBoundary)&&(C=!0),E++;C||(b=!0)}return b}function xE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var y=t[c][0],l=t[c][1],b=t[d][0],w=t[d][1],C=e[1]*(y-b)+l*(b-e[0])+w*(e[0]-y)===0&&(y-e[0])*(b-e[0])<=0&&(l-e[1])*(w-e[1])<=0;if(C)return!i;var E=l>e[1]!=w>e[1]&&e[0]<(b-y)*(e[1]-l)/(w-l)+y;E&&(a=!a)}return a}function XO(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function qO(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return GI(e,function(d){i+=d[0],a+=d[1],c++},!0),VO([i/c,a/c],t.properties)}const KO=()=>{const[e,t]=yt.useState(!1);return{detectCountry:yt.useCallback(async(a,c)=>{t(!0);const y=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of y.features)if(HO([a,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},E0=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var l;const[c,d]=yt.useState((l=e.properties)==null?void 0:l[t.key]);yt.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const y=yt.useCallback(b=>{d(b.currentTarget.value),a&&a(b)},[]);return mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:y}),mt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return mt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return mt.jsx("option",{value:b.tags.name},b.id)})})]})},YO=({feature:e,fields:t})=>e.properties?mt.jsxs(mt.Fragment,{children:[t.postcodeField&&mt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,JO=({placeholder:e,defaultValue:t})=>{const[i,a]=yt.useState(t);yt.useEffect(()=>{a(t)},[t]);const c=yt.useCallback(d=>{a(d.currentTarget.value)},[]);return mt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var eg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */eg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,d="Expected a function",y="__lodash_hash_undefined__",l=1,b=2,w=1/0,C=9007199254740991,E="[object Arguments]",z="[object Array]",O="[object Boolean]",Q="[object Date]",K="[object Error]",pe="[object Function]",G="[object GeneratorFunction]",V="[object Map]",B="[object Number]",oe="[object Object]",W="[object Promise]",D="[object RegExp]",S="[object Set]",P="[object String]",Z="[object Symbol]",J="[object WeakMap]",H="[object ArrayBuffer]",ye="[object DataView]",ve="[object Float32Array]",xe="[object Float64Array]",te="[object Int8Array]",ae="[object Int16Array]",re="[object Int32Array]",ie="[object Uint8Array]",me="[object Uint8ClampedArray]",we="[object Uint16Array]",_e="[object Uint32Array]",$e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ke=/^\w*$/,Le=/^\./,Xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/[\\^$.*+?()[\]{}|]/g,ot=/\\(\\)?/g,ht=/\w*$/,gt=/^\[object .+?Constructor\]$/,Lt=/^(?:0|[1-9]\d*)$/,ft={};ft[ve]=ft[xe]=ft[te]=ft[ae]=ft[re]=ft[ie]=ft[me]=ft[we]=ft[_e]=!0,ft[E]=ft[z]=ft[H]=ft[O]=ft[ye]=ft[Q]=ft[K]=ft[pe]=ft[V]=ft[B]=ft[oe]=ft[D]=ft[S]=ft[P]=ft[J]=!1;var wt={};wt[E]=wt[z]=wt[H]=wt[ye]=wt[O]=wt[Q]=wt[ve]=wt[xe]=wt[te]=wt[ae]=wt[re]=wt[V]=wt[B]=wt[oe]=wt[D]=wt[S]=wt[P]=wt[Z]=wt[ie]=wt[me]=wt[we]=wt[_e]=!0,wt[K]=wt[pe]=wt[J]=!1;var Nt=typeof pl=="object"&&pl&&pl.Object===Object&&pl,Je=typeof self=="object"&&self&&self.Object===Object&&self,sn=Nt||Je||Function("return this")(),wn=t&&!t.nodeType&&t,Ht=wn&&!0&&e&&!e.nodeType&&e,Ft=Ht&&Ht.exports===wn,un=Ft&&Nt.process,Se=function(){try{return un&&un.binding("util")}catch{}}(),F=Se&&Se.isTypedArray;function R(N,de){return N.set(de[0],de[1]),N}function ge(N,de){return N.add(de),N}function Ge(N,de,Ue){switch(Ue.length){case 0:return N.call(de);case 1:return N.call(de,Ue[0]);case 2:return N.call(de,Ue[0],Ue[1]);case 3:return N.call(de,Ue[0],Ue[1],Ue[2])}return N.apply(de,Ue)}function tt(N,de){for(var Ue=-1,st=N?N.length:0;++Ue<st&&de(N[Ue],Ue,N)!==!1;);return N}function We(N,de){for(var Ue=-1,st=de.length,Mt=N.length;++Ue<st;)N[Mt+Ue]=de[Ue];return N}function se(N,de,Ue,st){var Mt=-1,Ct=N?N.length:0;for(st&&Ct&&(Ue=N[++Mt]);++Mt<Ct;)Ue=de(Ue,N[Mt],Mt,N);return Ue}function L(N,de){for(var Ue=-1,st=N?N.length:0;++Ue<st;)if(de(N[Ue],Ue,N))return!0;return!1}function j(N){return function(de){return de==null?i:de[N]}}function be(N,de){for(var Ue=-1,st=Array(N);++Ue<N;)st[Ue]=de(Ue);return st}function Te(N){return function(de){return N(de)}}function Ke(N,de){return N==null?i:N[de]}function et(N){var de=!1;if(N!=null&&typeof N.toString!="function")try{de=!!(N+"")}catch{}return de}function $t(N){var de=-1,Ue=Array(N.size);return N.forEach(function(st,Mt){Ue[++de]=[Mt,st]}),Ue}function vn(N,de){return function(Ue){return N(de(Ue))}}function Tt(N){var de=-1,Ue=Array(N.size);return N.forEach(function(st){Ue[++de]=st}),Ue}var An=Array.prototype,_n=Function.prototype,Qr=Object.prototype,di=sn["__core-js_shared__"],cr=function(){var N=/[^.]+$/.exec(di&&di.keys&&di.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),Ce=_n.toString,ne=Qr.hasOwnProperty,ue=Ce.call(Object),Ee=Qr.toString,Be=RegExp("^"+Ce.call(ne).replace(Ve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Ft?sn.Buffer:i,De=sn.Symbol,Oe=sn.Uint8Array,Fe=vn(Object.getPrototypeOf,Object),Ye=Object.create,ct=Qr.propertyIsEnumerable,ut=An.splice,pt=Object.getOwnPropertySymbols,Jt=Re?Re.isBuffer:i,hn=vn(Object.keys,Object),Vt=Math.max,Xt=ro(sn,"DataView"),ln=ro(sn,"Map"),bn=ro(sn,"Promise"),mn=ro(sn,"Set"),zn=ro(sn,"WeakMap"),Pn=ro(Object,"create"),Yn=!ct.call({valueOf:1},"valueOf"),er=io(Xt),hr=io(ln),Ln=io(bn),jl=io(mn),Dl=io(zn),$r=De?De.prototype:i,Ar=$r?$r.valueOf:i,Fr=$r?$r.toString:i;function Cn(){}function no(N){var de=-1,Ue=N?N.length:0;for(this.clear();++de<Ue;){var st=N[de];this.set(st[0],st[1])}}function tr(){this.__data__=Pn?Pn(null):{}}function Ys(N){return this.has(N)&&delete this.__data__[N]}function Qo(N){var de=this.__data__;if(Pn){var Ue=de[N];return Ue===y?i:Ue}return ne.call(de,N)?de[N]:i}function Pr(N){var de=this.__data__;return Pn?de[N]!==i:ne.call(de,N)}function Js(N,de){var Ue=this.__data__;return Ue[N]=Pn&&de===i?y:de,this}no.prototype.clear=tr,no.prototype.delete=Ys,no.prototype.get=Qo,no.prototype.has=Pr,no.prototype.set=Js;function lr(N){var de=-1,Ue=N?N.length:0;for(this.clear();++de<Ue;){var st=N[de];this.set(st[0],st[1])}}function Du(){this.__data__=[]}function Fo(N){var de=this.__data__,Ue=ts(de,N);if(Ue<0)return!1;var st=de.length-1;return Ue==st?de.pop():ut.call(de,Ue,1),!0}function wh(N){var de=this.__data__,Ue=ts(de,N);return Ue<0?i:de[Ue][1]}function Fi(N){return ts(this.__data__,N)>-1}function Cs(N,de){var Ue=this.__data__,st=ts(Ue,N);return st<0?Ue.push([N,de]):Ue[st][1]=de,this}lr.prototype.clear=Du,lr.prototype.delete=Fo,lr.prototype.get=wh,lr.prototype.has=Fi,lr.prototype.set=Cs;function ei(N){var de=-1,Ue=N?N.length:0;for(this.clear();++de<Ue;){var st=N[de];this.set(st[0],st[1])}}function Ei(){this.__data__={hash:new no,map:new(ln||lr),string:new no}}function Dn(N){return Xa(this,N).delete(N)}function ja(N){return Xa(this,N).get(N)}function Bl(N){return Xa(this,N).has(N)}function bh(N,de){return Xa(this,N).set(N,de),this}ei.prototype.clear=Ei,ei.prototype.delete=Dn,ei.prototype.get=ja,ei.prototype.has=Bl,ei.prototype.set=bh;function es(N){var de=-1,Ue=N?N.length:0;for(this.__data__=new ei;++de<Ue;)this.add(N[de])}function Bu(N){return this.__data__.set(N,y),this}function Nu(N){return this.__data__.has(N)}es.prototype.add=es.prototype.push=Bu,es.prototype.has=Nu;function Si(N){this.__data__=new lr(N)}function Nl(){this.__data__=new lr}function Eh(N){return this.__data__.delete(N)}function Ul(N){return this.__data__.get(N)}function Uu(N){return this.__data__.has(N)}function $u(N,de){var Ue=this.__data__;if(Ue instanceof lr){var st=Ue.__data__;if(!ln||st.length<c-1)return st.push([N,de]),this;Ue=this.__data__=new ei(st)}return Ue.set(N,de),this}Si.prototype.clear=Nl,Si.prototype.delete=Eh,Si.prototype.get=Ul,Si.prototype.has=Uu,Si.prototype.set=$u;function Da(N,de){var Ue=Vr(N)||zs(N)?be(N.length,String):[],st=Ue.length,Mt=!!st;for(var Ct in N)(de||ne.call(N,Ct))&&!(Mt&&(Ct=="length"||Kn(Ct,st)))&&Ue.push(Ct);return Ue}function Qs(N,de,Ue){(Ue!==i&&!oo(N[de],Ue)||typeof de=="number"&&Ue===i&&!(de in N))&&(N[de]=Ue)}function jo(N,de,Ue){var st=N[de];(!(ne.call(N,de)&&oo(st,Ue))||Ue===i&&!(de in N))&&(N[de]=Ue)}function ts(N,de){for(var Ue=N.length;Ue--;)if(oo(N[Ue][0],de))return Ue;return-1}function ti(N,de){return N&&Wa(de,Di(de),N)}function yo(N,de,Ue,st,Mt,Ct,Zt){var Qt;if(st&&(Qt=Ct?st(N,Mt,Ct,Zt):st(N)),Qt!==i)return Qt;if(!jr(N))return N;var dn=Vr(N);if(dn){if(Qt=Ah(N),!de)return Kl(N,Qt)}else{var Rn=Ti(N),En=Rn==pe||Rn==G;if(ri(N))return Ch(N,de);if(Rn==oe||Rn==E||En&&!Ct){if(et(N))return Ct?N:{};if(Qt=Ql(En?{}:N),!de)return Yl(N,ti(Qt,N))}else{if(!wt[Rn])return Ct?N:{};Qt=qa(N,Rn,yo,de)}}Zt||(Zt=new Si);var St=Zt.get(N);if(St)return St;if(Zt.set(N,Qt),!dn)var nr=Ue?Bn(N):Di(N);return tt(nr||N,function(mr,Jn){nr&&(Jn=mr,mr=N[Jn]),jo(Qt,Jn,yo(mr,de,Ue,st,Jn,N,Zt))}),Qt}function Ba(N){return jr(N)?Ye(N):{}}var ea=Zu(na),ta=Ms();function na(N,de){return N&&ta(N,de,Di)}function Is(N,de){de=xn(de,N)?[de]:Gu(de);for(var Ue=0,st=de.length;N!=null&&Ue<st;)N=N[oa(de[Ue++])];return Ue&&Ue==st?N:i}function ra(N,de,Ue){var st=de(N);return Vr(N)?st:We(st,Ue(N))}function ia(N){return Ee.call(N)}function ni(N,de){return N!=null&&de in Object(N)}function qr(N,de,Ue,st,Mt){return N===de?!0:N==null||de==null||!jr(N)&&!so(de)?N!==N&&de!==de:$l(N,de,qr,Ue,st,Mt)}function $l(N,de,Ue,st,Mt,Ct){var Zt=Vr(N),Qt=Vr(de),dn=z,Rn=z;Zt||(dn=Ti(N),dn=dn==E?oe:dn),Qt||(Rn=Ti(de),Rn=Rn==E?oe:Rn);var En=dn==oe&&!et(N),St=Rn==oe&&!et(de),nr=dn==Rn;if(nr&&!En)return Ct||(Ct=new Si),Zt||Rs(N)?rs(N,de,Ue,st,Mt,Ct):Wu(N,de,dn,Ue,st,Mt,Ct);if(!(Mt&b)){var mr=En&&ne.call(N,"__wrapped__"),Jn=St&&ne.call(de,"__wrapped__");if(mr||Jn){var _o=mr?N.value():N,It=Jn?de.value():de;return Ct||(Ct=new Si),Ue(_o,It,st,Mt,Ct)}}return nr?(Ct||(Ct=new Si),Jl(N,de,Ue,st,Mt,Ct)):!1}function Na(N,de,Ue,st){var Mt=Ue.length,Ct=Mt,Zt=!st;if(N==null)return!Ct;for(N=Object(N);Mt--;){var Qt=Ue[Mt];if(Zt&&Qt[2]?Qt[1]!==N[Qt[0]]:!(Qt[0]in N))return!1}for(;++Mt<Ct;){Qt=Ue[Mt];var dn=Qt[0],Rn=N[dn],En=Qt[1];if(Zt&&Qt[2]){if(Rn===i&&!(dn in N))return!1}else{var St=new Si;if(st)var nr=st(Rn,En,dn,N,de,St);if(!(nr===i?qr(En,Rn,st,l|b,St):nr))return!1}}return!0}function Ua(N){if(!jr(N)||Wn(N))return!1;var de=Ls(N)||et(N)?Be:gt;return de.test(io(N))}function Vl(N){return so(N)&&aa(N.length)&&!!ft[Ee.call(N)]}function $a(N){return typeof N=="function"?N:N==null?Os:typeof N=="object"?Vr(N)?Ga(N[0],N[1]):Gl(N):iu(N)}function Va(N){if(!Nn(N))return hn(N);var de=[];for(var Ue in Object(N))ne.call(N,Ue)&&Ue!="constructor"&&de.push(Ue);return de}function Mn(N){if(!jr(N))return nu(N);var de=Nn(N),Ue=[];for(var st in N)st=="constructor"&&(de||!ne.call(N,st))||Ue.push(st);return Ue}function Gl(N){var de=Hu(N);return de.length==1&&de[0][2]?tu(de[0][0],de[0][1]):function(Ue){return Ue===N||Na(Ue,N,de)}}function Ga(N,de){return xn(N)&&is(de)?tu(oa(N),de):function(Ue){var st=ua(Ue,N);return st===i&&st===de?ji(Ue,N):qr(de,st,i,l|b)}}function Zl(N,de,Ue,st,Mt){if(N!==de){if(!(Vr(de)||Rs(de)))var Ct=Mn(de);tt(Ct||de,function(Zt,Qt){if(Ct&&(Qt=Zt,Zt=de[Qt]),jr(Zt))Mt||(Mt=new Si),Vu(N,de,Qt,Ue,Zl,st,Mt);else{var dn=st?st(N[Qt],Zt,Qt+"",N,de,Mt):i;dn===i&&(dn=Zt),Qs(N,Qt,dn)}})}}function Vu(N,de,Ue,st,Mt,Ct,Zt){var Qt=N[Ue],dn=de[Ue],Rn=Zt.get(dn);if(Rn){Qs(N,Ue,Rn);return}var En=Ct?Ct(Qt,dn,Ue+"",N,de,Zt):i,St=En===i;St&&(En=dn,Vr(dn)||Rs(dn)?Vr(Qt)?En=Qt:vo(Qt)?En=Kl(Qt):(St=!1,En=yo(dn,!0)):os(dn)||zs(dn)?zs(Qt)?En=Qa(Qt):!jr(Qt)||st&&Ls(Qt)?(St=!1,En=yo(dn,!0)):En=Qt:St=!1),St&&(Zt.set(dn,En),Mt(En,dn,st,Ct,Zt),Zt.delete(dn)),Qs(N,Ue,En)}function As(N){return function(de){return Is(de,N)}}function Sh(N,de){return de=Vt(de===i?N.length-1:de,0),function(){for(var Ue=arguments,st=-1,Mt=Vt(Ue.length-de,0),Ct=Array(Mt);++st<Mt;)Ct[st]=Ue[de+st];st=-1;for(var Zt=Array(de+1);++st<de;)Zt[st]=Ue[st];return Zt[de]=Ct,Ge(N,this,Zt)}}function Th(N){if(typeof N=="string")return N;if(la(N))return Fr?Fr.call(N):"";var de=N+"";return de=="0"&&1/N==-w?"-0":de}function Gu(N){return Vr(N)?N:Ph(N)}function Ch(N,de){if(de)return N.slice();var Ue=new N.constructor(N.length);return N.copy(Ue),Ue}function Wl(N){var de=new N.constructor(N.byteLength);return new Oe(de).set(new Oe(N)),de}function Ih(N,de){var Ue=de?Wl(N.buffer):N.buffer;return new N.constructor(Ue,N.byteOffset,N.byteLength)}function Hl(N,de,Ue){var st=de?Ue($t(N),!0):$t(N);return se(st,R,new N.constructor)}function Za(N){var de=new N.constructor(N.source,ht.exec(N));return de.lastIndex=N.lastIndex,de}function Xl(N,de,Ue){var st=de?Ue(Tt(N),!0):Tt(N);return se(st,ge,new N.constructor)}function ql(N){return Ar?Object(Ar.call(N)):{}}function Ps(N,de){var Ue=de?Wl(N.buffer):N.buffer;return new N.constructor(Ue,N.byteOffset,N.length)}function Kl(N,de){var Ue=-1,st=N.length;for(de||(de=Array(st));++Ue<st;)de[Ue]=N[Ue];return de}function Wa(N,de,Ue,st){Ue||(Ue={});for(var Mt=-1,Ct=de.length;++Mt<Ct;){var Zt=de[Mt],Qt=st?st(Ue[Zt],N[Zt],Zt,Ue,N):i;jo(Ue,Zt,Qt===i?N[Zt]:Qt)}return Ue}function Yl(N,de){return Wa(N,Xu(N),de)}function ns(N){return Sh(function(de,Ue){var st=-1,Mt=Ue.length,Ct=Mt>1?Ue[Mt-1]:i,Zt=Mt>2?Ue[2]:i;for(Ct=N.length>3&&typeof Ct=="function"?(Mt--,Ct):i,Zt&&eu(Ue[0],Ue[1],Zt)&&(Ct=Mt<3?i:Ct,Mt=1),de=Object(de);++st<Mt;){var Qt=Ue[st];Qt&&N(de,Qt,st,Ct)}return de})}function Zu(N,de){return function(Ue,st){if(Ue==null)return Ue;if(!Hn(Ue))return N(Ue,st);for(var Mt=Ue.length,Ct=de?Mt:-1,Zt=Object(Ue);(de?Ct--:++Ct<Mt)&&st(Zt[Ct],Ct,Zt)!==!1;);return Ue}}function Ms(N){return function(de,Ue,st){for(var Mt=-1,Ct=Object(de),Zt=st(de),Qt=Zt.length;Qt--;){var dn=Zt[N?Qt:++Mt];if(Ue(Ct[dn],dn,Ct)===!1)break}return de}}function rs(N,de,Ue,st,Mt,Ct){var Zt=Mt&b,Qt=N.length,dn=de.length;if(Qt!=dn&&!(Zt&&dn>Qt))return!1;var Rn=Ct.get(N);if(Rn&&Ct.get(de))return Rn==de;var En=-1,St=!0,nr=Mt&l?new es:i;for(Ct.set(N,de),Ct.set(de,N);++En<Qt;){var mr=N[En],Jn=de[En];if(st)var _o=Zt?st(Jn,mr,En,de,N,Ct):st(mr,Jn,En,N,de,Ct);if(_o!==i){if(_o)continue;St=!1;break}if(nr){if(!L(de,function(It,ao){if(!nr.has(ao)&&(mr===It||Ue(mr,It,st,Mt,Ct)))return nr.add(ao)})){St=!1;break}}else if(!(mr===Jn||Ue(mr,Jn,st,Mt,Ct))){St=!1;break}}return Ct.delete(N),Ct.delete(de),St}function Wu(N,de,Ue,st,Mt,Ct,Zt){switch(Ue){case ye:if(N.byteLength!=de.byteLength||N.byteOffset!=de.byteOffset)return!1;N=N.buffer,de=de.buffer;case H:return!(N.byteLength!=de.byteLength||!st(new Oe(N),new Oe(de)));case O:case Q:case B:return oo(+N,+de);case K:return N.name==de.name&&N.message==de.message;case D:case P:return N==de+"";case V:var Qt=$t;case S:var dn=Ct&b;if(Qt||(Qt=Tt),N.size!=de.size&&!dn)return!1;var Rn=Zt.get(N);if(Rn)return Rn==de;Ct|=l,Zt.set(N,de);var En=rs(Qt(N),Qt(de),st,Mt,Ct,Zt);return Zt.delete(N),En;case Z:if(Ar)return Ar.call(N)==Ar.call(de)}return!1}function Jl(N,de,Ue,st,Mt,Ct){var Zt=Mt&b,Qt=Di(N),dn=Qt.length,Rn=Di(de),En=Rn.length;if(dn!=En&&!Zt)return!1;for(var St=dn;St--;){var nr=Qt[St];if(!(Zt?nr in de:ne.call(de,nr)))return!1}var mr=Ct.get(N);if(mr&&Ct.get(de))return mr==de;var Jn=!0;Ct.set(N,de),Ct.set(de,N);for(var _o=Zt;++St<dn;){nr=Qt[St];var It=N[nr],ao=de[nr];if(st)var tl=Zt?st(ao,It,nr,de,N,Ct):st(It,ao,nr,N,de,Ct);if(!(tl===i?It===ao||Ue(It,ao,st,Mt,Ct):tl)){Jn=!1;break}_o||(_o=nr=="constructor")}if(Jn&&!_o){var ha=N.constructor,ss=de.constructor;ha!=ss&&"constructor"in N&&"constructor"in de&&!(typeof ha=="function"&&ha instanceof ha&&typeof ss=="function"&&ss instanceof ss)&&(Jn=!1)}return Ct.delete(N),Ct.delete(de),Jn}function Bn(N){return ra(N,Di,Xu)}function Ha(){var N=Cn.iteratee||el;return N=N===el?$a:N,arguments.length?N(arguments[0],arguments[1]):N}function Xa(N,de){var Ue=N.__data__;return Ka(de)?Ue[typeof de=="string"?"string":"hash"]:Ue.map}function Hu(N){for(var de=Di(N),Ue=de.length;Ue--;){var st=de[Ue],Mt=N[st];de[Ue]=[st,Mt,is(Mt)]}return de}function ro(N,de){var Ue=Ke(N,de);return Ua(Ue)?Ue:i}var Xu=pt?vn(pt,Object):Fs,Ti=ia;(Xt&&Ti(new Xt(new ArrayBuffer(1)))!=ye||ln&&Ti(new ln)!=V||bn&&Ti(bn.resolve())!=W||mn&&Ti(new mn)!=S||zn&&Ti(new zn)!=J)&&(Ti=function(N){var de=Ee.call(N),Ue=de==oe?N.constructor:i,st=Ue?io(Ue):i;if(st)switch(st){case er:return ye;case hr:return V;case Ln:return W;case jl:return S;case Dl:return J}return de});function qu(N,de,Ue){de=xn(de,N)?[de]:Gu(de);for(var st,Mt=-1,Zt=de.length;++Mt<Zt;){var Ct=oa(de[Mt]);if(!(st=N!=null&&Ue(N,Ct)))break;N=N[Ct]}if(st)return st;var Zt=N?N.length:0;return!!Zt&&aa(Zt)&&Kn(Ct,Zt)&&(Vr(N)||zs(N))}function Ah(N){var de=N.length,Ue=N.constructor(de);return de&&typeof N[0]=="string"&&ne.call(N,"index")&&(Ue.index=N.index,Ue.input=N.input),Ue}function Ql(N){return typeof N.constructor=="function"&&!Nn(N)?Ba(Fe(N)):{}}function qa(N,de,Ue,st){var Mt=N.constructor;switch(de){case H:return Wl(N);case O:case Q:return new Mt(+N);case ye:return Ih(N,st);case ve:case xe:case te:case ae:case re:case ie:case me:case we:case _e:return Ps(N,st);case V:return Hl(N,st,Ue);case B:case P:return new Mt(N);case D:return Za(N);case S:return Xl(N,st,Ue);case Z:return ql(N)}}function Kn(N,de){return de=de??C,!!de&&(typeof N=="number"||Lt.test(N))&&N>-1&&N%1==0&&N<de}function eu(N,de,Ue){if(!jr(Ue))return!1;var st=typeof de;return(st=="number"?Hn(Ue)&&Kn(de,Ue.length):st=="string"&&de in Ue)?oo(Ue[de],N):!1}function xn(N,de){if(Vr(N))return!1;var Ue=typeof N;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||N==null||la(N)?!0:ke.test(N)||!$e.test(N)||de!=null&&N in Object(de)}function Ka(N){var de=typeof N;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?N!=="__proto__":N===null}function Wn(N){return!!cr&&cr in N}function Nn(N){var de=N&&N.constructor,Ue=typeof de=="function"&&de.prototype||Qr;return N===Ue}function is(N){return N===N&&!jr(N)}function tu(N,de){return function(Ue){return Ue==null?!1:Ue[N]===de&&(de!==i||N in Object(Ue))}}function nu(N){var de=[];if(N!=null)for(var Ue in Object(N))de.push(Ue);return de}var Ph=ks(function(N){N=ru(N);var de=[];return Le.test(N)&&de.push(""),N.replace(Xe,function(Ue,st,Mt,Ct){de.push(Mt?Ct.replace(ot,"$1"):st||Ue)}),de});function oa(N){if(typeof N=="string"||la(N))return N;var de=N+"";return de=="0"&&1/N==-w?"-0":de}function io(N){if(N!=null){try{return Ce.call(N)}catch{}try{return N+""}catch{}}return""}function Ya(N){for(var de=-1,Ue=N?N.length:0,st=0,Mt=[];++de<Ue;){var Ct=N[de];Ct&&(Mt[st++]=Ct)}return Mt}function Ja(N,de){var Ue=Vr(N)?tt:ea;return Ue(N,Ha(de,3))}function ks(N,de){if(typeof N!="function"||de&&typeof de!="function")throw new TypeError(d);var Ue=function(){var st=arguments,Mt=de?de.apply(this,st):st[0],Ct=Ue.cache;if(Ct.has(Mt))return Ct.get(Mt);var Zt=N.apply(this,st);return Ue.cache=Ct.set(Mt,Zt),Zt};return Ue.cache=new(ks.Cache||ei),Ue}ks.Cache=ei;function sa(N){return yo(N,!1,!0)}function oo(N,de){return N===de||N!==N&&de!==de}function zs(N){return vo(N)&&ne.call(N,"callee")&&(!ct.call(N,"callee")||Ee.call(N)==E)}var Vr=Array.isArray;function Hn(N){return N!=null&&aa(N.length)&&!Ls(N)}function vo(N){return so(N)&&Hn(N)}var ri=Jt||ou;function Ku(N){if(Hn(N)&&(Vr(N)||typeof N=="string"||typeof N.splice=="function"||ri(N)||zs(N)))return!N.length;var de=Ti(N);if(de==V||de==S)return!N.size;if(Yn||Nn(N))return!hn(N).length;for(var Ue in N)if(ne.call(N,Ue))return!1;return!0}function Ls(N){var de=jr(N)?Ee.call(N):"";return de==pe||de==G}function aa(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=C}function jr(N){var de=typeof N;return!!N&&(de=="object"||de=="function")}function so(N){return!!N&&typeof N=="object"}function os(N){if(!so(N)||Ee.call(N)!=oe||et(N))return!1;var de=Fe(N);if(de===null)return!0;var Ue=ne.call(de,"constructor")&&de.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&Ce.call(Ue)==ue}function la(N){return typeof N=="symbol"||so(N)&&Ee.call(N)==Z}var Rs=F?Te(F):Vl;function Qa(N){return Wa(N,ca(N))}function ru(N){return N==null?"":Th(N)}function ua(N,de,Ue){var st=N==null?i:Is(N,de);return st===i?Ue:st}function ji(N,de){return N!=null&&qu(N,de,ni)}function Di(N){return Hn(N)?Da(N):Va(N)}function ca(N){return Hn(N)?Da(N,!0):Mn(N)}var Yu=ns(function(N,de,Ue){Zl(N,de,Ue)});function Os(N){return N}function el(N){return $a(typeof N=="function"?N:yo(N,!0))}function iu(N){return xn(N)?j(oa(N)):As(N)}function Fs(){return[]}function ou(){return!1}Cn.compact=Ya,Cn.iteratee=el,Cn.keys=Di,Cn.keysIn=ca,Cn.memoize=ks,Cn.merge=Yu,Cn.property=iu,Cn.toPlainObject=Qa,Cn.clone=sa,Cn.eq=oo,Cn.forEach=Ja,Cn.get=ua,Cn.hasIn=ji,Cn.identity=Os,Cn.isArguments=zs,Cn.isArray=Vr,Cn.isArrayLike=Hn,Cn.isArrayLikeObject=vo,Cn.isBuffer=ri,Cn.isEmpty=Ku,Cn.isFunction=Ls,Cn.isLength=aa,Cn.isObject=jr,Cn.isObjectLike=so,Cn.isPlainObject=os,Cn.isSymbol=la,Cn.isTypedArray=Rs,Cn.stubArray=Fs,Cn.stubFalse=ou,Cn.toString=ru,Cn.each=Ja,Cn.VERSION=a,Ht&&((Ht.exports=Cn)._=Cn,wn._=Cn)}).call(pl)})(eg,eg.exports);var QO=eg.exports,eF=Yp;function Yp(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Yp(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Yp(e.geometries[a],t);else if(i==="Feature")Yp(e.geometry,t);else if(i==="Polygon")wE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)wE(e.coordinates[a],t);return e}function wE(e,t){if(e.length!==0){bE(e[0],t);for(var i=1;i<e.length;i++)bE(e[i],!t)}}function bE(e,t){for(var i=0,a=0,c=0,d=e.length,y=d-1;c<d;y=c++){var l=(e[c][0]-e[y][0])*(e[y][1]+e[c][1]),b=i+l;a+=Math.abs(i)>=Math.abs(l)?i-b+l:l-b+i,i=b}i+a>=0!=!!t&&e.reverse()}const tF=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var nF=tF,In=QO,Mp=eF,Jp={};nF.forEach(function(e){if(e.polygon==="all")Jp[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Jp[e.key]={},Jp[e.key][t]=i}});function rF(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:In.merge(e,t)}var tg={};tg=function(e,t,i){t=In.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Jp,deduplicator:rF},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=d(e):a=c(e),a;function c(b){var w=new Array,C=new Array,E=new Array;function z(W){var D=In.clone(W);D.lat=W.center.lat,D.lon=W.center.lon,D.__is_center_placeholder=!0,w.push(D)}function O(W){var D=In.clone(W);D.nodes=[];function S(P,Z,J){var H={type:"node",id:"_"+D.type+"/"+D.id+"bounds"+J,lat:P,lon:Z};D.nodes.push(H.id),w.push(H)}S(D.bounds.minlat,D.bounds.minlon,1),S(D.bounds.maxlat,D.bounds.minlon,2),S(D.bounds.maxlat,D.bounds.maxlon,3),S(D.bounds.minlat,D.bounds.maxlon,4),D.nodes.push(D.nodes[0]),D.__is_bounds_placeholder=!0,C.push(D)}function Q(W){function D(S,P,Z){var J={type:"node",id:Z,lat:S,lon:P};w.push(J)}In.isArray(W.nodes)||(W.nodes=W.geometry.map(function(S){return S!==null?"_anonymous@"+S.lat+"/"+S.lon:"_anonymous@unknown_location"})),W.geometry.forEach(function(S,P){S&&D(S.lat,S.lon,W.nodes[P])})}function K(W){function D(P,Z,J){var H={type:"node",id:J,lat:P,lon:Z};w.push(H)}function S(P,Z){if(C.some(function(ye){return ye.type=="way"&&ye.id==Z}))return;var J={type:"way",id:Z,nodes:[]};function H(ye,ve){var xe={type:"node",id:"_anonymous@"+ye+"/"+ve,lat:ye,lon:ve};J.nodes.push(xe.id),w.push(xe)}P.forEach(function(ye){ye?H(ye.lat,ye.lon):J.nodes.push(void 0)}),C.push(J)}W.members.forEach(function(P,Z){P.type=="node"?P.lat&&D(P.lat,P.lon,P.ref):P.type=="way"&&P.geometry&&(P.ref="_fullGeom"+P.ref,S(P.geometry,P.ref))})}for(var pe=0;pe<b.elements.length;pe++)switch(b.elements[pe].type){case"node":var G=b.elements[pe];w.push(G);break;case"way":var V=In.clone(b.elements[pe]);V.nodes=In.clone(V.nodes),C.push(V),V.center&&z(V),V.geometry?Q(V):V.bounds&&O(V);break;case"relation":var B=In.clone(b.elements[pe]);B.members=In.clone(B.members),E.push(B);var oe=B.members&&B.members.some(function(W){return W.type=="node"&&W.lat||W.type=="way"&&W.geometry&&W.geometry.length>0});B.center&&z(B),oe?K(B):B.bounds&&O(B);break}return y(w,C,E)}function d(b){var w=new Array,C=new Array,E=new Array;function z(B,oe,W){B.hasAttribute(W)&&(oe[W]=B.getAttribute(W))}function O(B,oe){var W=In.clone(B);z(oe,W,"lat"),z(oe,W,"lon"),W.__is_center_placeholder=!0,w.push(W)}function Q(B,oe){var W=In.clone(B);W.nodes=[];function D(S,P,Z){var J={type:"node",id:"_"+W.type+"/"+W.id+"bounds"+Z,lat:S,lon:P};W.nodes.push(J.id),w.push(J)}D(oe.getAttribute("minlat"),oe.getAttribute("minlon"),1),D(oe.getAttribute("maxlat"),oe.getAttribute("minlon"),2),D(oe.getAttribute("maxlat"),oe.getAttribute("maxlon"),3),D(oe.getAttribute("minlat"),oe.getAttribute("maxlon"),4),W.nodes.push(W.nodes[0]),W.__is_bounds_placeholder=!0,C.push(W)}function K(B,oe){function W(D,S,P){var Z={type:"node",id:P,lat:D,lon:S};return w.push(Z),Z.id}In.isArray(B.nodes)||(B.nodes=[],In.each(oe,function(D,S){B.nodes.push("_anonymous@"+D.getAttribute("lat")+"/"+D.getAttribute("lon"))})),In.each(oe,function(D,S){D.getAttribute("lat")&&W(D.getAttribute("lat"),D.getAttribute("lon"),B.nodes[S])})}function pe(B,oe){function W(S,P,Z){var J={type:"node",id:Z,lat:S,lon:P};w.push(J)}function D(S,P){if(C.some(function(H){return H.type=="way"&&H.id==P}))return;var Z={type:"way",id:P,nodes:[]};function J(H,ye){var ve={type:"node",id:"_anonymous@"+H+"/"+ye,lat:H,lon:ye};Z.nodes.push(ve.id),w.push(ve)}In.each(S,function(H){H.getAttribute("lat")?J(H.getAttribute("lat"),H.getAttribute("lon")):Z.nodes.push(void 0)}),C.push(Z)}In.each(oe,function(S,P){B.members[P].type=="node"?S.getAttribute("lat")&&W(S.getAttribute("lat"),S.getAttribute("lon"),B.members[P].ref):B.members[P].type=="way"&&S.getElementsByTagName("nd").length>0&&(B.members[P].ref="_fullGeom"+B.members[P].ref,D(S.getElementsByTagName("nd"),B.members[P].ref))})}In.each(b.getElementsByTagName("node"),function(B,oe){var W={};In.each(B.getElementsByTagName("tag"),function(S){W[S.getAttribute("k")]=S.getAttribute("v")});var D={type:"node"};z(B,D,"id"),z(B,D,"lat"),z(B,D,"lon"),z(B,D,"version"),z(B,D,"timestamp"),z(B,D,"changeset"),z(B,D,"uid"),z(B,D,"user"),In.isEmpty(W)||(D.tags=W),w.push(D)});var G,V;return In.each(b.getElementsByTagName("way"),function(B,oe){var W={},D=[];In.each(B.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;In.each(B.getElementsByTagName("nd"),function(Z,J){var H;(H=Z.getAttribute("ref"))&&(D[J]=H),!S&&Z.getAttribute("lat")&&(S=!0)});var P={type:"way"};z(B,P,"id"),z(B,P,"version"),z(B,P,"timestamp"),z(B,P,"changeset"),z(B,P,"uid"),z(B,P,"user"),D.length>0&&(P.nodes=D),In.isEmpty(W)||(P.tags=W),(G=B.getElementsByTagName("center")[0])&&O(P,G),S?K(P,B.getElementsByTagName("nd")):(V=B.getElementsByTagName("bounds")[0])&&Q(P,V),C.push(P)}),In.each(b.getElementsByTagName("relation"),function(B,oe){var W={},D=[];In.each(B.getElementsByTagName("tag"),function(Z){W[Z.getAttribute("k")]=Z.getAttribute("v")});var S=!1;In.each(B.getElementsByTagName("member"),function(Z,J){D[J]={},z(Z,D[J],"ref"),z(Z,D[J],"role"),z(Z,D[J],"type"),(!S&&D[J].type=="node"&&Z.getAttribute("lat")||D[J].type=="way"&&Z.getElementsByTagName("nd").length>0)&&(S=!0)});var P={type:"relation"};z(B,P,"id"),z(B,P,"version"),z(B,P,"timestamp"),z(B,P,"changeset"),z(B,P,"uid"),z(B,P,"user"),D.length>0&&(P.members=D),In.isEmpty(W)||(P.tags=W),(G=B.getElementsByTagName("center")[0])&&O(P,G),S?pe(P,B.getElementsByTagName("member")):(V=B.getElementsByTagName("bounds")[0])&&Q(P,V),E.push(P)}),y(w,C,E)}function y(b,w,C){function E(Le,Xe){if(typeof Xe!="object"&&(Xe={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Le,Xe);for(var Ve in Le)if(t.uninterestingTags[Ve]!==!0&&!(Xe[Ve]===!0||Xe[Ve]===Le[Ve]))return!0;return!1}function z(Le){var Xe={timestamp:Le.timestamp,version:Le.version,changeset:Le.changeset,user:Le.user,uid:Le.uid};for(var Ve in Xe)Xe[Ve]===void 0&&delete Xe[Ve];return Xe}for(var O=new Object,Q=new Object,K=0;K<b.length;K++){var pe=b[K];O[pe.id]!==void 0&&(pe=t.deduplicator(pe,O[pe.id])),O[pe.id]=pe,typeof pe.tags<"u"&&E(pe.tags)&&(Q[pe.id]=!0)}for(var K=0;K<C.length;K++)if(In.isArray(C[K].members))for(var G=0;G<C[K].members.length;G++)C[K].members[G].type=="node"&&(Q[C[K].members[G].ref]=!0);for(var V=new Object,B=new Object,K=0;K<w.length;K++){var oe=w[K];if(V[oe.id]&&(oe=t.deduplicator(oe,V[oe.id])),V[oe.id]=oe,In.isArray(oe.nodes))for(var G=0;G<oe.nodes.length;G++)typeof oe.nodes[G]!="object"&&(B[oe.nodes[G]]=!0,oe.nodes[G]=O[oe.nodes[G]])}var W=new Array;for(var D in O){var pe=O[D];(!B[D]||Q[D])&&W.push(pe)}for(var S=new Array,K=0;K<C.length;K++){var P=C[K];S[P.id]&&(P=t.deduplicator(P,S[P.id])),S[P.id]=P}var Z={node:{},way:{},relation:{}};for(var D in S){var P=S[D];if(!In.isArray(P.members)){t.verbose&&console.warn("Relation",P.type+"/"+P.id,"ignored because it has no members");continue}for(var G=0;G<P.members.length;G++){var J=P.members[G].type,H=P.members[G].ref;if(typeof H!="number"&&(H=H.replace("_fullGeom","")),!Z[J]){t.verbose&&console.warn("Relation",P.type+"/"+P.id,"member",J+"/"+H,"ignored because it has an invalid type");continue}typeof Z[J][H]>"u"&&(Z[J][H]=[]),Z[J][H].push({role:P.members[G].role,rel:P.id,reltags:P.tags})}}var ye,ve=[];for(K=0;K<W.length;K++){if(typeof W[K].lon>"u"||typeof W[K].lat>"u"){t.verbose&&console.warn("POI",W[K].type+"/"+W[K].id,"ignored because it lacks coordinates");continue}var xe={type:"Feature",id:W[K].type+"/"+W[K].id,properties:{type:W[K].type,id:W[K].id,tags:W[K].tags||{},relations:Z.node[W[K].id]||[],meta:z(W[K])},geometry:{type:"Point",coordinates:[+W[K].lon,+W[K].lat]}};W[K].__is_center_placeholder&&(xe.properties.geometry="center"),i?i(xe):ve.push(xe)}for(var te=[],ae=[],K=0;K<C.length;K++)if(S[C[K].id]===C[K]){if(typeof C[K].tags<"u"&&(C[K].tags.type=="route"||C[K].tags.type=="waterway")){let Xe=function(Ve){var ot=!1,ht;ht=Ve.members.filter(function(wt){return wt.type==="way"}),ht=ht.map(function(wt){var Nt=V[wt.ref];if(Nt===void 0||Nt.nodes===void 0){t.verbose&&console.warn("Route "+Ve.type+"/"+Ve.id,"tainted by a missing or incomplete  way",wt.type+"/"+wt.ref),ot=!0;return}return{id:wt.ref,role:wt.role,way:Nt,nodes:Nt.nodes.filter(function(Je){return Je!==void 0?!0:(ot=!0,t.verbose&&console.warn("Route",Ve.type+"/"+Ve.id,"tainted by a way",wt.type+"/"+wt.ref,"with a missing node"),!1)})}}),ht=In.compact(ht);var gt;gt=S0(ht);var Lt=[];if(Lt=In.compact(gt.map(function(wt){return In.compact(wt.map(function(Nt){return[+Nt.lon,+Nt.lat]}))})),Lt.length==0)return t.verbose&&console.warn("Route",Ve.type+"/"+Ve.id,"contains no coordinates"),!1;var ft={type:"Feature",id:Ve.type+"/"+Ve.id,properties:{type:Ve.type,id:Ve.id,tags:Ve.tags||{},relations:Z[Ve.type][Ve.id]||[],meta:z(Ve)},geometry:{type:Lt.length===1?"LineString":"MultiLineString",coordinates:Lt.length===1?Lt[0]:Lt}};return ot&&(t.verbose&&console.warn("Route",Ve.type+"/"+Ve.id,"is tainted"),ft.properties.tainted=!0),ft};var $e=Xe;if(!In.isArray(C[K].members)){t.verbose&&console.warn("Route",C[K].type+"/"+C[K].id,"ignored because it has no members");continue}if(C[K].members.forEach(function(Ve){V[Ve.ref]&&!E(V[Ve.ref].tags)&&(V[Ve.ref].is_skippablerelationmember=!0)}),xe=Xe(C[K]),xe===!1){t.verbose&&console.warn("Route relation",C[K].type+"/"+C[K].id,"ignored because it has invalid geometry");continue}i?i(Mp(xe)):ae.push(xe)}if(typeof C[K].tags<"u"&&(C[K].tags.type=="multipolygon"||C[K].tags.type=="boundary")){let Ve=function(ot,ht){var gt=!1,Lt=ie?"way":"relation",ft=typeof ot.id=="number"?ot.id:+ot.id.replace("_fullGeom",""),wt;wt=ht.members.filter(function(R){return R.type==="way"}),wt=wt.map(function(R){var ge=V[R.ref];if(ge===void 0||ge.nodes===void 0){t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"tainted by a missing or incomplete way",R.type+"/"+R.ref),gt=!0;return}return{id:R.ref,role:R.role||"outer",way:ge,nodes:ge.nodes.filter(function(Ge){return Ge!==void 0?!0:(gt=!0,t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"tainted by a way",R.type+"/"+R.ref,"with a missing node"),!1)})}}),wt=In.compact(wt);var Nt,Je;Nt=S0(wt.filter(function(R){return R.role==="outer"})),Je=S0(wt.filter(function(R){return R.role==="inner"}));var sn;function wn(R){var ge=function(L,j){for(var be=0;be<j.length;be++)if(tt(j[be],L))return!0;return!1},Ge=function(L){return L.map(function(j){return[+j.lat,+j.lon]})},tt=function(L,j){for(var be=L[0],Te=L[1],Ke=!1,et=0,$t=j.length-1;et<j.length;$t=et++){var vn=j[et][0],Tt=j[et][1],An=j[$t][0],_n=j[$t][1],Qr=Tt>Te!=_n>Te&&be<(An-vn)*(Te-Tt)/(_n-Tt)+vn;Qr&&(Ke=!Ke)}return Ke},We,se;for(R=Ge(R),We=0;We<Nt.length;We++)if(se=Ge(Nt[We]),ge(se,R))return We}sn=Nt.map(function(R){return[R]});for(var Ht=0;Ht<Je.length;Ht++){var Ft=wn(Je[Ht]);Ft!==void 0?sn[Ft].push(Je[Ht]):t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"contains an inner ring with no containing outer")}var un=[];if(un=In.compact(sn.map(function(R){var ge=In.compact(R.map(function(Ge){if(Ge.length<4){t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"contains a ring with less than four nodes");return}return In.compact(Ge.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(ge.length==0){t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"contains an empty ring cluster");return}return ge})),un.length==0)return t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"contains no coordinates"),!1;var Se="MultiPolygon";un.length===1&&(Se="Polygon",un=un[0]);var F={type:"Feature",id:ot.type+"/"+ft,properties:{type:ot.type,id:ft,tags:ot.tags||{},relations:Z[ot.type][ot.id]||[],meta:z(ot)},geometry:{type:Se,coordinates:un}};return gt&&(t.verbose&&console.warn("Multipolygon",Lt+"/"+ft,"is tainted"),F.properties.tainted=!0),F};var ke=Ve;if(!In.isArray(C[K].members)){t.verbose&&console.warn("Multipolygon",C[K].type+"/"+C[K].id,"ignored because it has no members");continue}for(var re=0,G=0;G<C[K].members.length;G++)C[K].members[G].role=="outer"?re++:t.verbose&&C[K].members[G].role!="inner"&&console.warn("Multipolygon",C[K].type+"/"+C[K].id,"member",C[K].members[G].type+"/"+C[K].members[G].ref,'ignored because it has an invalid role: "'+C[K].members[G].role+'"');if(C[K].members.forEach(function(ot){V[ot.ref]&&(ot.role==="outer"&&!E(V[ot.ref].tags,C[K].tags)&&(V[ot.ref].is_skippablerelationmember=!0),ot.role==="inner"&&!E(V[ot.ref].tags)&&(V[ot.ref].is_skippablerelationmember=!0))}),re==0){t.verbose&&console.warn("Multipolygon relation",C[K].type+"/"+C[K].id,"ignored because it has no outer ways");continue}var ie=!1;re==1&&!E(C[K].tags,{type:!0})&&(ie=!0);var xe=null;if(!ie)xe=Ve(C[K],C[K]);else{var me=C[K].members.filter(function(ot){return ot.role==="outer"})[0];if(me=V[me.ref],me===void 0){t.verbose&&console.warn("Multipolygon relation",C[K].type+"/"+C[K].id,"ignored because outer way",me.type+"/"+me.ref,"is missing");continue}me.is_skippablerelationmember=!0,xe=Ve(me,C[K])}if(xe===!1){t.verbose&&console.warn("Multipolygon relation",C[K].type+"/"+C[K].id,"ignored because it has invalid geometry");continue}i?i(Mp(xe)):ae.push(xe)}}for(var K=0;K<w.length;K++)if(V[w[K].id]===w[K]){if(!In.isArray(w[K].nodes)){t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"ignored because it has no nodes");continue}if(!w[K].is_skippablerelationmember){typeof w[K].id!="number"&&(w[K].id=+w[K].id.replace("_fullGeom","")),w[K].tainted=!1,w[K].hidden=!1;var we=new Array;for(G=0;G<w[K].nodes.length;G++)typeof w[K].nodes[G]=="object"?we.push([+w[K].nodes[G].lon,+w[K].nodes[G].lat]):(t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"is tainted by an invalid node"),w[K].tainted=!0);if(we.length<=1){t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"ignored because it contains too few nodes");continue}var _e="LineString";typeof w[K].nodes[0]<"u"&&typeof w[K].nodes[w[K].nodes.length-1]<"u"&&w[K].nodes[0].id===w[K].nodes[w[K].nodes.length-1].id&&(typeof w[K].tags<"u"&&l(w[K].tags)||w[K].__is_bounds_placeholder)&&(_e="Polygon",we=[we]);var xe={type:"Feature",id:w[K].type+"/"+w[K].id,properties:{type:w[K].type,id:w[K].id,tags:w[K].tags||{},relations:Z.way[w[K].id]||[],meta:z(w[K])},geometry:{type:_e,coordinates:we}};w[K].tainted&&(t.verbose&&console.warn("Way",w[K].type+"/"+w[K].id,"is tainted"),xe.properties.tainted=!0),w[K].__is_bounds_placeholder&&(xe.properties.geometry="bounds"),i?i(Mp(xe)):_e=="LineString"?te.push(xe):ae.push(xe)}}return i?!0:(ye={type:"FeatureCollection",features:[]},ye.features=ye.features.concat(ae),ye.features=ye.features.concat(te),ye.features=ye.features.concat(ve),t.flatProperties&&ye.features.forEach(function(Le){Le.properties=In.merge(Le.properties.meta,Le.properties.tags,{id:Le.properties.type+"/"+Le.properties.id})}),ye=Mp(ye),ye)}function l(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var C in b){var E=b[C],z=w[C];if(!(typeof z>"u")&&E!=="no"&&(z===!0||z.included_values&&z.included_values[E]===!0||z.excluded_values&&z.excluded_values[E]!==!0))return!0}return!1}};function S0(e){for(var t=function(E){return E[0]},i=function(E){return E[E.length-1]},a=function(E,z){return E!==void 0&&z!==void 0&&E.id===z.id},c=[],d,y,l,b,w,C;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!a(t(d),i(d));){for(y=t(d),l=i(d),b=0;b<e.length;b++)if(C=e[b].nodes,a(l,t(C))){w=d.push,C=C.slice(1);break}else if(a(l,i(C))){w=d.push,C=C.slice(0,-1).reverse();break}else if(a(y,i(C))){w=d.unshift,C=C.slice(0,-1);break}else if(a(y,t(C))){w=d.unshift,C=C.slice(1).reverse();break}else C=w=null;if(!C)break;e.splice(b,1),w.apply(d,C)}return c}tg.toGeojson=tg;var iF=tg;const oF=fd(iF),T0={type:"FeatureCollection",features:[]},ZI=()=>{const[e,t]=yt.useState(!1),i=yt.useCallback(async(y,l,b)=>{var K,pe;if(e||(console.log(b),b<16))return T0;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let C="[out:json]";C+=`[timeout:25];
`,C+='nwr["building"]',C+=`(around:${w},${y},${l});
`,C+="out meta geom;",console.log(C);const E=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(E.status!==200)return t(!1),T0;const z=await E.json();console.log("overpass json elements: ",z.elements);const O=oF(z);console.log("overpass osmtogeojson raw: ",O);for await(const G of O.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const V=(K=z.elements.filter(oe=>G.id?typeof G.id=="number"?oe.id===G.id:oe.id===parseInt(G.id):!1))==null?void 0:K[0];if(V&&(G.properties.tags=V.tags,G.properties.nodes=V.nodes),G.geometry.type==="Polygon"){const oe=GO(G.geometry.coordinates);var Q=qO(oe);G.properties.center=Q.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const B=G.properties.uid;if(B){let oe=localStorage.getItem(B+"-icon");if(oe===null){const W=await xs.getUser(B);(pe=W.img)!=null&&pe.href?(oe=W.img.href,localStorage.setItem(B+"-icon",W.img.href)):localStorage.setItem(B+"-icon","")}G.properties.userIconHref=oe||""}}return console.log("overpass osmtogeojson converted: ",O),console.log("overpass: loaded."),t(!1),O},[]),[a,c]=yt.useState(!1),d=yt.useCallback(async y=>{console.log("overpass: loading...",y),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const C=250,E=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${C});
      out;
      `;console.log(E);const z=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(E)}`,{});if(z.status!==200){c(!1);return}const O=await z.json();console.log("overpass json child elements: ",O.elements);const Q=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${C});
      out;
      `;console.log(Q);const K=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(Q)}`,{});if(K.status!==200){c(!1);return}const pe=await K.json();return console.log("overpass json neighbour elements: ",pe.elements),c(!1),[...w.elements,...O.elements,...pe.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:a}},sF=()=>mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),mt.jsxs("datalist",{id:"source-list",children:[mt.jsx("option",{value:"survey"}),mt.jsx("option",{value:"local knowledge"}),mt.jsx("option",{value:"extrapolation"}),mt.jsx("option",{value:"estimation from existing data"})]})]}),C0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},aF=({feature:e,onCancel:t,onSubmit:i})=>{var ye,ve,xe,te;const{detectCountry:a,loadingCountry:c}=KO(),{fetchOverpassAdmin:d,loadingOverpassAdmin:y}=ZI(),l=JSON.parse((ye=e.properties)==null?void 0:ye.center),[b,w]=yt.useState(void 0),[C,E]=yt.useState(),[z,O]=yt.useState(e),[Q,K]=yt.useState(!1),[pe,G]=yt.useState(!1),[V,B]=yt.useState(!1),[oe,W]=yt.useState(),[D,S]=yt.useState();yt.useEffect(()=>{K(xs.isLoggedIn())},[]),yt.useEffect(()=>{(async()=>{var re,ie;const ae=await a(l[0],l[1]);if(w(ae),(re=ae==null?void 0:ae.properties)!=null&&re.ISO_A3&&vE[ae.properties.ISO_A3]){const me=vE[ae.properties.ISO_A3];E(me);const we=me.defaultComment+" "+((ie=e.properties)==null?void 0:ie.id);S(we)}})()},[e]),yt.useEffect(()=>{console.log(z.properties)},[z]);const P=yt.useCallback(async()=>{const ae=await MC.openReverseGeocoder([l[0],l[1]]);O(re=>{const ie={properties:{"addr:province":ae.prefecture,"addr:city":ae.city,...re.properties}};return{...re,...ie}})},[]),Z=yt.useCallback(async()=>{if(!z.properties)return;z.properties.nodes;const ae=await d(JSON.parse(z.properties.nodes));console.log("onOverpassReverseGeocode",ae),W(ae)},[z]),J=yt.useCallback(async ae=>{var ke,Le,Xe;B(!0),ae.preventDefault();const re=new FormData(ae.currentTarget),ie=JSON.parse((ke=e.properties)==null?void 0:ke.tags);re.forEach((Ve,ot)=>{typeof Ve=="string"&&Ve.length>0&&ot!=="comment"&&ot!=="source"&&(ie[ot]=Ve)});const me={type:"way",id:e.id,version:(Le=e.properties)==null?void 0:Le.version,tags:ie,nodes:JSON.parse((Xe=e.properties)==null?void 0:Xe.nodes)};console.info(JSON.stringify(me,null,2));const we={create:[],modify:[me],delete:[]},_e=re.get("comment");_e&&(C0.comment=_e.toString());const $e=re.get("source");$e&&(C0.source=$e.toString()),await xs.uploadChangeset(C0,we),B(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),H=yt.useCallback(()=>{G(!0)},[]);return z.properties?mt.jsxs("div",{children:[mt.jsxs("div",{children:["OSM:"," ",mt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+z.properties.id,target:"_blank",children:z.properties.id})," | ",mt.jsx(IC,{feature:z}),C&&mt.jsxs("span",{children:[" | ","Address:"," ",mt.jsx(YO,{feature:z,fields:C})]})]}),c?mt.jsx(Xs,{icon:Rv,spin:!0}):mt.jsx(mt.Fragment,{children:C?mt.jsxs("form",{onSubmit:J,children:[mt.jsx("div",{className:"flex flex-wrap",children:mt.jsx(E0,{feature:z,fieldOption:C.postcodeField,onChange:H})}),mt.jsx("div",{className:"flex flex-wrap",children:C.mainFields.map(ae=>mt.jsx(E0,{feature:z,fieldOption:ae,onChange:H,suggestList:oe},ae.key))}),mt.jsx("div",{className:"flex flex-wrap",children:C.detailFields.map(ae=>mt.jsx(E0,{feature:z,fieldOption:ae,onChange:H},ae.key))}),mt.jsxs("div",{className:"flex flex-wrap",children:[mt.jsx(sF,{}),mt.jsx(JO,{defaultValue:D})]}),mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((ve=b==null?void 0:b.properties)==null?void 0:ve.ISO_A3)==="JPN"&&mt.jsx("button",{type:"button",onClick:P,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),mt.jsxs("button",{type:"button",disabled:y,onClick:Z,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",y&&mt.jsx(Xs,{icon:Rv,spin:!0})]}),mt.jsx("button",{disabled:!Q||V||!pe,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!Q&&mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),mt.jsx(CC,{})]})]})})]}):mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[mt.jsxs("div",{className:"py-2",children:[mt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(xe=b==null?void 0:b.properties)==null?void 0:xe.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),mt.jsx("p",{children:mt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function lF(e,t){const[i,a]=yt.useState(e);return yt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const uF={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},cF={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function hF(){const e=yt.useRef(null),[t,i]=yt.useState(),a=lF(t,2500),c=yt.useRef(null),[d,y]=yt.useState({type:"FeatureCollection",features:[]}),[l,b]=yt.useState("auto"),[w,C]=yt.useState(),[E,z]=yt.useState([]),{fetchOverpassBuildings:O,loadingOverpass:Q}=ZI();yt.useEffect(()=>{setTimeout(()=>{var S;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(S=c.current)==null||S.trigger())},500)},[]);const K=yt.useCallback(S=>{const P=S.target.getCenter(),Z=S.target.getZoom();i({zoom:Z,latitude:P.lat,longitude:P.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),pe=yt.useCallback(S=>{i(S.viewState)},[]),G=yt.useCallback(S=>{i(S.viewState)},[]);yt.useEffect(()=>{(async()=>{if(!a)return;const S=a,P=await O(S.latitude,S.longitude,S.zoom);y(P)})()},[a]);const V=yt.useCallback(S=>{var ye;b("pointer");const{features:P,point:{x:Z,y:J}}=S,H=P&&P[0];H?((ye=e.current)==null||ye.setFeatureState({source:"buildings-source",id:H.id},{hover:!0}),C({feature:H,x:Z,y:J})):C(void 0)},[]),B=yt.useCallback(S=>{var P;b("auto"),(P=e.current)==null||P.querySourceFeatures("buildings-source").map(Z=>{var J;(J=e.current)==null||J.setFeatureState({source:"buildings-source",id:Z.id},{hover:!1})}),C(void 0)},[]),oe=yt.useCallback(S=>{var Z;W();const P=S.features&&S.features[0];P&&((Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:P.id},{select:!0}),z([P]))},[]),W=yt.useCallback(()=>{var S;(S=e.current)==null||S.querySourceFeatures("buildings-source").map(P=>{var Z;(Z=e.current)==null||Z.setFeatureState({source:"buildings-source",id:P.id},{select:!1})}),z([])},[]),D=yt.useMemo(()=>{let S=25;return t&&(S=t.zoom<18?20:t.zoom<19?25:35),d.features.map((P,Z)=>!P.properties||!P.properties.center?null:mt.jsx(E3,{style:{cursor:"pointer"},longitude:P.properties.center[0],latitude:P.properties.center[1],anchor:"center",children:mt.jsx(lz,{feature:P,size:S})},`marker-${Z}`))},[d,t]);return mt.jsxs("div",{children:[mt.jsx($5,{}),mt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:mt.jsx(hz,{viewState:t})}),mt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[E.length>0&&mt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:mt.jsx("div",{style:{padding:"10px"},children:E.map(S=>mt.jsx(aF,{feature:S,onCancel:W,onSubmit:W},S.id))})}),mt.jsxs(a1,{ref:e,...t,onMove:pe,onMoveEnd:G,onLoad:K,interactiveLayerIds:["buildings-layer-fill"],onClick:oe,onMouseEnter:V,onMouseLeave:B,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:NT,style:{width:"100%",height:"100%"},mapStyle:uF,children:[mt.jsx(R3,{id:"buildings-source",type:"geojson",data:d,children:mt.jsx(D3,{...cF})}),mt.jsx(P3,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),mt.jsx(I3,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),mt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?mt.jsx(Xs,{size:"2x",icon:B5}):Q?mt.jsx(Xs,{size:"2x",icon:Rv,spin:!0}):mt.jsx(Xs,{size:"2x",icon:N5})}),D,w&&mt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[mt.jsx(IC,{feature:w.feature}),mt.jsx("br",{}),mt.jsx(uz,{feature:w.feature}),mt.jsx(V5,{feature:w.feature})]})]})]})]})}var WI={},kg={};kg.byteLength=pF;kg.toByteArray=gF;kg.fromByteArray=_F;var Gs=[],Go=[],fF=typeof Uint8Array<"u"?Uint8Array:Array,I0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Mc=0,dF=I0.length;Mc<dF;++Mc)Gs[Mc]=I0[Mc],Go[I0.charCodeAt(Mc)]=Mc;Go["-".charCodeAt(0)]=62;Go["_".charCodeAt(0)]=63;function HI(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function pF(e){var t=HI(e),i=t[0],a=t[1];return(i+a)*3/4-a}function mF(e,t,i){return(t+i)*3/4-i}function gF(e){var t,i=HI(e),a=i[0],c=i[1],d=new fF(mF(e,a,c)),y=0,l=c>0?a-4:a,b;for(b=0;b<l;b+=4)t=Go[e.charCodeAt(b)]<<18|Go[e.charCodeAt(b+1)]<<12|Go[e.charCodeAt(b+2)]<<6|Go[e.charCodeAt(b+3)],d[y++]=t>>16&255,d[y++]=t>>8&255,d[y++]=t&255;return c===2&&(t=Go[e.charCodeAt(b)]<<2|Go[e.charCodeAt(b+1)]>>4,d[y++]=t&255),c===1&&(t=Go[e.charCodeAt(b)]<<10|Go[e.charCodeAt(b+1)]<<4|Go[e.charCodeAt(b+2)]>>2,d[y++]=t>>8&255,d[y++]=t&255),d}function yF(e){return Gs[e>>18&63]+Gs[e>>12&63]+Gs[e>>6&63]+Gs[e&63]}function vF(e,t,i){for(var a,c=[],d=t;d<i;d+=3)a=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(yF(a));return c.join("")}function _F(e){for(var t,i=e.length,a=i%3,c=[],d=16383,y=0,l=i-a;y<l;y+=d)c.push(vF(e,y,y+d>l?l:y+d));return a===1?(t=e[i-1],c.push(Gs[t>>2]+Gs[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(Gs[t>>10]+Gs[t>>4&63]+Gs[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=kg,i=Cg,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=V,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=d(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const se=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(se,L),se.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function y(se){if(se>c)throw new RangeError('The value "'+se+'" is invalid for option "size"');const L=new Uint8Array(se);return Object.setPrototypeOf(L,l.prototype),L}function l(se,L,j){if(typeof se=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(se)}return b(se,L,j)}l.poolSize=8192;function b(se,L,j){if(typeof se=="string")return z(se,L);if(ArrayBuffer.isView(se))return Q(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(R(se,ArrayBuffer)||se&&R(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(se,SharedArrayBuffer)||se&&R(se.buffer,SharedArrayBuffer)))return K(se,L,j);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const be=se.valueOf&&se.valueOf();if(be!=null&&be!==se)return l.from(be,L,j);const Te=pe(se);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return l.from(se[Symbol.toPrimitive]("string"),L,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}l.from=function(se,L,j){return b(se,L,j)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function w(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function C(se,L,j){return w(se),se<=0?y(se):L!==void 0?typeof j=="string"?y(se).fill(L,j):y(se).fill(L):y(se)}l.alloc=function(se,L,j){return C(se,L,j)};function E(se){return w(se),y(se<0?0:G(se)|0)}l.allocUnsafe=function(se){return E(se)},l.allocUnsafeSlow=function(se){return E(se)};function z(se,L){if((typeof L!="string"||L==="")&&(L="utf8"),!l.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const j=B(se,L)|0;let be=y(j);const Te=be.write(se,L);return Te!==j&&(be=be.slice(0,Te)),be}function O(se){const L=se.length<0?0:G(se.length)|0,j=y(L);for(let be=0;be<L;be+=1)j[be]=se[be]&255;return j}function Q(se){if(R(se,Uint8Array)){const L=new Uint8Array(se);return K(L.buffer,L.byteOffset,L.byteLength)}return O(se)}function K(se,L,j){if(L<0||se.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<L+(j||0))throw new RangeError('"length" is outside of buffer bounds');let be;return L===void 0&&j===void 0?be=new Uint8Array(se):j===void 0?be=new Uint8Array(se,L):be=new Uint8Array(se,L,j),Object.setPrototypeOf(be,l.prototype),be}function pe(se){if(l.isBuffer(se)){const L=G(se.length)|0,j=y(L);return j.length===0||se.copy(j,0,0,L),j}if(se.length!==void 0)return typeof se.length!="number"||ge(se.length)?y(0):O(se);if(se.type==="Buffer"&&Array.isArray(se.data))return O(se.data)}function G(se){if(se>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return se|0}function V(se){return+se!=se&&(se=0),l.alloc(+se)}l.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==l.prototype},l.compare=function(L,j){if(R(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),R(j,Uint8Array)&&(j=l.from(j,j.offset,j.byteLength)),!l.isBuffer(L)||!l.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===j)return 0;let be=L.length,Te=j.length;for(let Ke=0,et=Math.min(be,Te);Ke<et;++Ke)if(L[Ke]!==j[Ke]){be=L[Ke],Te=j[Ke];break}return be<Te?-1:Te<be?1:0},l.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(L,j){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return l.alloc(0);let be;if(j===void 0)for(j=0,be=0;be<L.length;++be)j+=L[be].length;const Te=l.allocUnsafe(j);let Ke=0;for(be=0;be<L.length;++be){let et=L[be];if(R(et,Uint8Array))Ke+et.length>Te.length?(l.isBuffer(et)||(et=l.from(et)),et.copy(Te,Ke)):Uint8Array.prototype.set.call(Te,et,Ke);else if(l.isBuffer(et))et.copy(Te,Ke);else throw new TypeError('"list" argument must be an Array of Buffers');Ke+=et.length}return Te};function B(se,L){if(l.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||R(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const j=se.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&j===0)return 0;let Te=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return Ht(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return Se(se).length;default:if(Te)return be?-1:Ht(se).length;L=(""+L).toLowerCase(),Te=!0}}l.byteLength=B;function oe(se,L,j){let be=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,L>>>=0,j<=L))return"";for(se||(se="utf8");;)switch(se){case"hex":return me(this,L,j);case"utf8":case"utf-8":return xe(this,L,j);case"ascii":return re(this,L,j);case"latin1":case"binary":return ie(this,L,j);case"base64":return ve(this,L,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,L,j);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),be=!0}}l.prototype._isBuffer=!0;function W(se,L,j){const be=se[L];se[L]=se[j],se[j]=be}l.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let j=0;j<L;j+=2)W(this,j,j+1);return this},l.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let j=0;j<L;j+=4)W(this,j,j+3),W(this,j+1,j+2);return this},l.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let j=0;j<L;j+=8)W(this,j,j+7),W(this,j+1,j+6),W(this,j+2,j+5),W(this,j+3,j+4);return this},l.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?xe(this,0,L):oe.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(L){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:l.compare(this,L)===0},l.prototype.inspect=function(){let L="";const j=e.INSPECT_MAX_BYTES;return L=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(L+=" ... "),"<Buffer "+L+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(L,j,be,Te,Ke){if(R(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),!l.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(j===void 0&&(j=0),be===void 0&&(be=L?L.length:0),Te===void 0&&(Te=0),Ke===void 0&&(Ke=this.length),j<0||be>L.length||Te<0||Ke>this.length)throw new RangeError("out of range index");if(Te>=Ke&&j>=be)return 0;if(Te>=Ke)return-1;if(j>=be)return 1;if(j>>>=0,be>>>=0,Te>>>=0,Ke>>>=0,this===L)return 0;let et=Ke-Te,$t=be-j;const vn=Math.min(et,$t),Tt=this.slice(Te,Ke),An=L.slice(j,be);for(let _n=0;_n<vn;++_n)if(Tt[_n]!==An[_n]){et=Tt[_n],$t=An[_n];break}return et<$t?-1:$t<et?1:0};function D(se,L,j,be,Te){if(se.length===0)return-1;if(typeof j=="string"?(be=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,ge(j)&&(j=Te?0:se.length-1),j<0&&(j=se.length+j),j>=se.length){if(Te)return-1;j=se.length-1}else if(j<0)if(Te)j=0;else return-1;if(typeof L=="string"&&(L=l.from(L,be)),l.isBuffer(L))return L.length===0?-1:S(se,L,j,be,Te);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call(se,L,j):Uint8Array.prototype.lastIndexOf.call(se,L,j):S(se,[L],j,be,Te);throw new TypeError("val must be string, number or Buffer")}function S(se,L,j,be,Te){let Ke=1,et=se.length,$t=L.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(se.length<2||L.length<2)return-1;Ke=2,et/=2,$t/=2,j/=2}function vn(An,_n){return Ke===1?An[_n]:An.readUInt16BE(_n*Ke)}let Tt;if(Te){let An=-1;for(Tt=j;Tt<et;Tt++)if(vn(se,Tt)===vn(L,An===-1?0:Tt-An)){if(An===-1&&(An=Tt),Tt-An+1===$t)return An*Ke}else An!==-1&&(Tt-=Tt-An),An=-1}else for(j+$t>et&&(j=et-$t),Tt=j;Tt>=0;Tt--){let An=!0;for(let _n=0;_n<$t;_n++)if(vn(se,Tt+_n)!==vn(L,_n)){An=!1;break}if(An)return Tt}return-1}l.prototype.includes=function(L,j,be){return this.indexOf(L,j,be)!==-1},l.prototype.indexOf=function(L,j,be){return D(this,L,j,be,!0)},l.prototype.lastIndexOf=function(L,j,be){return D(this,L,j,be,!1)};function P(se,L,j,be){j=Number(j)||0;const Te=se.length-j;be?(be=Number(be),be>Te&&(be=Te)):be=Te;const Ke=L.length;be>Ke/2&&(be=Ke/2);let et;for(et=0;et<be;++et){const $t=parseInt(L.substr(et*2,2),16);if(ge($t))return et;se[j+et]=$t}return et}function Z(se,L,j,be){return F(Ht(L,se.length-j),se,j,be)}function J(se,L,j,be){return F(Ft(L),se,j,be)}function H(se,L,j,be){return F(Se(L),se,j,be)}function ye(se,L,j,be){return F(un(L,se.length-j),se,j,be)}l.prototype.write=function(L,j,be,Te){if(j===void 0)Te="utf8",be=this.length,j=0;else if(be===void 0&&typeof j=="string")Te=j,be=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(be)?(be=be>>>0,Te===void 0&&(Te="utf8")):(Te=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ke=this.length-j;if((be===void 0||be>Ke)&&(be=Ke),L.length>0&&(be<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");let et=!1;for(;;)switch(Te){case"hex":return P(this,L,j,be);case"utf8":case"utf-8":return Z(this,L,j,be);case"ascii":case"latin1":case"binary":return J(this,L,j,be);case"base64":return H(this,L,j,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,L,j,be);default:if(et)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),et=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ve(se,L,j){return L===0&&j===se.length?t.fromByteArray(se):t.fromByteArray(se.slice(L,j))}function xe(se,L,j){j=Math.min(se.length,j);const be=[];let Te=L;for(;Te<j;){const Ke=se[Te];let et=null,$t=Ke>239?4:Ke>223?3:Ke>191?2:1;if(Te+$t<=j){let vn,Tt,An,_n;switch($t){case 1:Ke<128&&(et=Ke);break;case 2:vn=se[Te+1],(vn&192)===128&&(_n=(Ke&31)<<6|vn&63,_n>127&&(et=_n));break;case 3:vn=se[Te+1],Tt=se[Te+2],(vn&192)===128&&(Tt&192)===128&&(_n=(Ke&15)<<12|(vn&63)<<6|Tt&63,_n>2047&&(_n<55296||_n>57343)&&(et=_n));break;case 4:vn=se[Te+1],Tt=se[Te+2],An=se[Te+3],(vn&192)===128&&(Tt&192)===128&&(An&192)===128&&(_n=(Ke&15)<<18|(vn&63)<<12|(Tt&63)<<6|An&63,_n>65535&&_n<1114112&&(et=_n))}}et===null?(et=65533,$t=1):et>65535&&(et-=65536,be.push(et>>>10&1023|55296),et=56320|et&1023),be.push(et),Te+=$t}return ae(be)}const te=4096;function ae(se){const L=se.length;if(L<=te)return String.fromCharCode.apply(String,se);let j="",be=0;for(;be<L;)j+=String.fromCharCode.apply(String,se.slice(be,be+=te));return j}function re(se,L,j){let be="";j=Math.min(se.length,j);for(let Te=L;Te<j;++Te)be+=String.fromCharCode(se[Te]&127);return be}function ie(se,L,j){let be="";j=Math.min(se.length,j);for(let Te=L;Te<j;++Te)be+=String.fromCharCode(se[Te]);return be}function me(se,L,j){const be=se.length;(!L||L<0)&&(L=0),(!j||j<0||j>be)&&(j=be);let Te="";for(let Ke=L;Ke<j;++Ke)Te+=Ge[se[Ke]];return Te}function we(se,L,j){const be=se.slice(L,j);let Te="";for(let Ke=0;Ke<be.length-1;Ke+=2)Te+=String.fromCharCode(be[Ke]+be[Ke+1]*256);return Te}l.prototype.slice=function(L,j){const be=this.length;L=~~L,j=j===void 0?be:~~j,L<0?(L+=be,L<0&&(L=0)):L>be&&(L=be),j<0?(j+=be,j<0&&(j=0)):j>be&&(j=be),j<L&&(j=L);const Te=this.subarray(L,j);return Object.setPrototypeOf(Te,l.prototype),Te};function _e(se,L,j){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+L>j)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(L,j,be){L=L>>>0,j=j>>>0,be||_e(L,j,this.length);let Te=this[L],Ke=1,et=0;for(;++et<j&&(Ke*=256);)Te+=this[L+et]*Ke;return Te},l.prototype.readUintBE=l.prototype.readUIntBE=function(L,j,be){L=L>>>0,j=j>>>0,be||_e(L,j,this.length);let Te=this[L+--j],Ke=1;for(;j>0&&(Ke*=256);)Te+=this[L+--j]*Ke;return Te},l.prototype.readUint8=l.prototype.readUInt8=function(L,j){return L=L>>>0,j||_e(L,1,this.length),this[L]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(L,j){return L=L>>>0,j||_e(L,2,this.length),this[L]|this[L+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(L,j){return L=L>>>0,j||_e(L,2,this.length),this[L]<<8|this[L+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(L,j){return L=L>>>0,j||_e(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(L,j){return L=L>>>0,j||_e(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},l.prototype.readBigUInt64LE=tt(function(L){L=L>>>0,Nt(L,"offset");const j=this[L],be=this[L+7];(j===void 0||be===void 0)&&Je(L,this.length-8);const Te=j+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,Ke=this[++L]+this[++L]*2**8+this[++L]*2**16+be*2**24;return BigInt(Te)+(BigInt(Ke)<<BigInt(32))}),l.prototype.readBigUInt64BE=tt(function(L){L=L>>>0,Nt(L,"offset");const j=this[L],be=this[L+7];(j===void 0||be===void 0)&&Je(L,this.length-8);const Te=j*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],Ke=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+be;return(BigInt(Te)<<BigInt(32))+BigInt(Ke)}),l.prototype.readIntLE=function(L,j,be){L=L>>>0,j=j>>>0,be||_e(L,j,this.length);let Te=this[L],Ke=1,et=0;for(;++et<j&&(Ke*=256);)Te+=this[L+et]*Ke;return Ke*=128,Te>=Ke&&(Te-=Math.pow(2,8*j)),Te},l.prototype.readIntBE=function(L,j,be){L=L>>>0,j=j>>>0,be||_e(L,j,this.length);let Te=j,Ke=1,et=this[L+--Te];for(;Te>0&&(Ke*=256);)et+=this[L+--Te]*Ke;return Ke*=128,et>=Ke&&(et-=Math.pow(2,8*j)),et},l.prototype.readInt8=function(L,j){return L=L>>>0,j||_e(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},l.prototype.readInt16LE=function(L,j){L=L>>>0,j||_e(L,2,this.length);const be=this[L]|this[L+1]<<8;return be&32768?be|4294901760:be},l.prototype.readInt16BE=function(L,j){L=L>>>0,j||_e(L,2,this.length);const be=this[L+1]|this[L]<<8;return be&32768?be|4294901760:be},l.prototype.readInt32LE=function(L,j){return L=L>>>0,j||_e(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},l.prototype.readInt32BE=function(L,j){return L=L>>>0,j||_e(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},l.prototype.readBigInt64LE=tt(function(L){L=L>>>0,Nt(L,"offset");const j=this[L],be=this[L+7];(j===void 0||be===void 0)&&Je(L,this.length-8);const Te=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(be<<24);return(BigInt(Te)<<BigInt(32))+BigInt(j+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),l.prototype.readBigInt64BE=tt(function(L){L=L>>>0,Nt(L,"offset");const j=this[L],be=this[L+7];(j===void 0||be===void 0)&&Je(L,this.length-8);const Te=(j<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(Te)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+be)}),l.prototype.readFloatLE=function(L,j){return L=L>>>0,j||_e(L,4,this.length),i.read(this,L,!0,23,4)},l.prototype.readFloatBE=function(L,j){return L=L>>>0,j||_e(L,4,this.length),i.read(this,L,!1,23,4)},l.prototype.readDoubleLE=function(L,j){return L=L>>>0,j||_e(L,8,this.length),i.read(this,L,!0,52,8)},l.prototype.readDoubleBE=function(L,j){return L=L>>>0,j||_e(L,8,this.length),i.read(this,L,!1,52,8)};function $e(se,L,j,be,Te,Ke){if(!l.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Te||L<Ke)throw new RangeError('"value" argument is out of bounds');if(j+be>se.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(L,j,be,Te){if(L=+L,j=j>>>0,be=be>>>0,!Te){const $t=Math.pow(2,8*be)-1;$e(this,L,j,be,$t,0)}let Ke=1,et=0;for(this[j]=L&255;++et<be&&(Ke*=256);)this[j+et]=L/Ke&255;return j+be},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(L,j,be,Te){if(L=+L,j=j>>>0,be=be>>>0,!Te){const $t=Math.pow(2,8*be)-1;$e(this,L,j,be,$t,0)}let Ke=be-1,et=1;for(this[j+Ke]=L&255;--Ke>=0&&(et*=256);)this[j+Ke]=L/et&255;return j+be},l.prototype.writeUint8=l.prototype.writeUInt8=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,1,255,0),this[j]=L&255,j+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,2,65535,0),this[j]=L&255,this[j+1]=L>>>8,j+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,2,65535,0),this[j]=L>>>8,this[j+1]=L&255,j+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,4,4294967295,0),this[j+3]=L>>>24,this[j+2]=L>>>16,this[j+1]=L>>>8,this[j]=L&255,j+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,4,4294967295,0),this[j]=L>>>24,this[j+1]=L>>>16,this[j+2]=L>>>8,this[j+3]=L&255,j+4};function ke(se,L,j,be,Te){wt(L,be,Te,se,j,7);let Ke=Number(L&BigInt(4294967295));se[j++]=Ke,Ke=Ke>>8,se[j++]=Ke,Ke=Ke>>8,se[j++]=Ke,Ke=Ke>>8,se[j++]=Ke;let et=Number(L>>BigInt(32)&BigInt(4294967295));return se[j++]=et,et=et>>8,se[j++]=et,et=et>>8,se[j++]=et,et=et>>8,se[j++]=et,j}function Le(se,L,j,be,Te){wt(L,be,Te,se,j,7);let Ke=Number(L&BigInt(4294967295));se[j+7]=Ke,Ke=Ke>>8,se[j+6]=Ke,Ke=Ke>>8,se[j+5]=Ke,Ke=Ke>>8,se[j+4]=Ke;let et=Number(L>>BigInt(32)&BigInt(4294967295));return se[j+3]=et,et=et>>8,se[j+2]=et,et=et>>8,se[j+1]=et,et=et>>8,se[j]=et,j+8}l.prototype.writeBigUInt64LE=tt(function(L,j=0){return ke(this,L,j,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=tt(function(L,j=0){return Le(this,L,j,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(L,j,be,Te){if(L=+L,j=j>>>0,!Te){const vn=Math.pow(2,8*be-1);$e(this,L,j,be,vn-1,-vn)}let Ke=0,et=1,$t=0;for(this[j]=L&255;++Ke<be&&(et*=256);)L<0&&$t===0&&this[j+Ke-1]!==0&&($t=1),this[j+Ke]=(L/et>>0)-$t&255;return j+be},l.prototype.writeIntBE=function(L,j,be,Te){if(L=+L,j=j>>>0,!Te){const vn=Math.pow(2,8*be-1);$e(this,L,j,be,vn-1,-vn)}let Ke=be-1,et=1,$t=0;for(this[j+Ke]=L&255;--Ke>=0&&(et*=256);)L<0&&$t===0&&this[j+Ke+1]!==0&&($t=1),this[j+Ke]=(L/et>>0)-$t&255;return j+be},l.prototype.writeInt8=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,1,127,-128),L<0&&(L=255+L+1),this[j]=L&255,j+1},l.prototype.writeInt16LE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,2,32767,-32768),this[j]=L&255,this[j+1]=L>>>8,j+2},l.prototype.writeInt16BE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,2,32767,-32768),this[j]=L>>>8,this[j+1]=L&255,j+2},l.prototype.writeInt32LE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,4,2147483647,-2147483648),this[j]=L&255,this[j+1]=L>>>8,this[j+2]=L>>>16,this[j+3]=L>>>24,j+4},l.prototype.writeInt32BE=function(L,j,be){return L=+L,j=j>>>0,be||$e(this,L,j,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[j]=L>>>24,this[j+1]=L>>>16,this[j+2]=L>>>8,this[j+3]=L&255,j+4},l.prototype.writeBigInt64LE=tt(function(L,j=0){return ke(this,L,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=tt(function(L,j=0){return Le(this,L,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xe(se,L,j,be,Te,Ke){if(j+be>se.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function Ve(se,L,j,be,Te){return L=+L,j=j>>>0,Te||Xe(se,L,j,4),i.write(se,L,j,be,23,4),j+4}l.prototype.writeFloatLE=function(L,j,be){return Ve(this,L,j,!0,be)},l.prototype.writeFloatBE=function(L,j,be){return Ve(this,L,j,!1,be)};function ot(se,L,j,be,Te){return L=+L,j=j>>>0,Te||Xe(se,L,j,8),i.write(se,L,j,be,52,8),j+8}l.prototype.writeDoubleLE=function(L,j,be){return ot(this,L,j,!0,be)},l.prototype.writeDoubleBE=function(L,j,be){return ot(this,L,j,!1,be)},l.prototype.copy=function(L,j,be,Te){if(!l.isBuffer(L))throw new TypeError("argument should be a Buffer");if(be||(be=0),!Te&&Te!==0&&(Te=this.length),j>=L.length&&(j=L.length),j||(j=0),Te>0&&Te<be&&(Te=be),Te===be||L.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),L.length-j<Te-be&&(Te=L.length-j+be);const Ke=Te-be;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,be,Te):Uint8Array.prototype.set.call(L,this.subarray(be,Te),j),Ke},l.prototype.fill=function(L,j,be,Te){if(typeof L=="string"){if(typeof j=="string"?(Te=j,j=0,be=this.length):typeof be=="string"&&(Te=be,be=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!l.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(L.length===1){const et=L.charCodeAt(0);(Te==="utf8"&&et<128||Te==="latin1")&&(L=et)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(j<0||this.length<j||this.length<be)throw new RangeError("Out of range index");if(be<=j)return this;j=j>>>0,be=be===void 0?this.length:be>>>0,L||(L=0);let Ke;if(typeof L=="number")for(Ke=j;Ke<be;++Ke)this[Ke]=L;else{const et=l.isBuffer(L)?L:l.from(L,Te),$t=et.length;if($t===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(Ke=0;Ke<be-j;++Ke)this[Ke+j]=et[Ke%$t]}return this};const ht={};function gt(se,L,j){ht[se]=class extends j{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(se,L){return`The "${se}" argument must be of type number. Received type ${typeof L}`},TypeError),gt("ERR_OUT_OF_RANGE",function(se,L,j){let be=`The value of "${se}" is out of range.`,Te=j;return Number.isInteger(j)&&Math.abs(j)>2**32?Te=Lt(String(j)):typeof j=="bigint"&&(Te=String(j),(j>BigInt(2)**BigInt(32)||j<-(BigInt(2)**BigInt(32)))&&(Te=Lt(Te)),Te+="n"),be+=` It must be ${L}. Received ${Te}`,be},RangeError);function Lt(se){let L="",j=se.length;const be=se[0]==="-"?1:0;for(;j>=be+4;j-=3)L=`_${se.slice(j-3,j)}${L}`;return`${se.slice(0,j)}${L}`}function ft(se,L,j){Nt(L,"offset"),(se[L]===void 0||se[L+j]===void 0)&&Je(L,se.length-(j+1))}function wt(se,L,j,be,Te,Ke){if(se>j||se<L){const et=typeof L=="bigint"?"n":"";let $t;throw Ke>3?L===0||L===BigInt(0)?$t=`>= 0${et} and < 2${et} ** ${(Ke+1)*8}${et}`:$t=`>= -(2${et} ** ${(Ke+1)*8-1}${et}) and < 2 ** ${(Ke+1)*8-1}${et}`:$t=`>= ${L}${et} and <= ${j}${et}`,new ht.ERR_OUT_OF_RANGE("value",$t,se)}ft(be,Te,Ke)}function Nt(se,L){if(typeof se!="number")throw new ht.ERR_INVALID_ARG_TYPE(L,"number",se)}function Je(se,L,j){throw Math.floor(se)!==se?(Nt(se,j),new ht.ERR_OUT_OF_RANGE(j||"offset","an integer",se)):L<0?new ht.ERR_BUFFER_OUT_OF_BOUNDS:new ht.ERR_OUT_OF_RANGE(j||"offset",`>= ${j?1:0} and <= ${L}`,se)}const sn=/[^+/0-9A-Za-z-_]/g;function wn(se){if(se=se.split("=")[0],se=se.trim().replace(sn,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function Ht(se,L){L=L||1/0;let j;const be=se.length;let Te=null;const Ke=[];for(let et=0;et<be;++et){if(j=se.charCodeAt(et),j>55295&&j<57344){if(!Te){if(j>56319){(L-=3)>-1&&Ke.push(239,191,189);continue}else if(et+1===be){(L-=3)>-1&&Ke.push(239,191,189);continue}Te=j;continue}if(j<56320){(L-=3)>-1&&Ke.push(239,191,189),Te=j;continue}j=(Te-55296<<10|j-56320)+65536}else Te&&(L-=3)>-1&&Ke.push(239,191,189);if(Te=null,j<128){if((L-=1)<0)break;Ke.push(j)}else if(j<2048){if((L-=2)<0)break;Ke.push(j>>6|192,j&63|128)}else if(j<65536){if((L-=3)<0)break;Ke.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((L-=4)<0)break;Ke.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return Ke}function Ft(se){const L=[];for(let j=0;j<se.length;++j)L.push(se.charCodeAt(j)&255);return L}function un(se,L){let j,be,Te;const Ke=[];for(let et=0;et<se.length&&!((L-=2)<0);++et)j=se.charCodeAt(et),be=j>>8,Te=j%256,Ke.push(Te),Ke.push(be);return Ke}function Se(se){return t.toByteArray(wn(se))}function F(se,L,j,be){let Te;for(Te=0;Te<be&&!(Te+j>=L.length||Te>=se.length);++Te)L[Te+j]=se[Te];return Te}function R(se,L){return se instanceof L||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===L.name}function ge(se){return se!==se}const Ge=function(){const se="0123456789abcdef",L=new Array(256);for(let j=0;j<16;++j){const be=j*16;for(let Te=0;Te<16;++Te)L[be+Te]=se[j]+se[Te]}return L}();function tt(se){return typeof BigInt>"u"?We:se}function We(){throw new Error("BigInt not supported")}})(WI);window.Buffer=WI.Buffer;n3.render(mt.jsx(zE.StrictMode,{children:mt.jsx(hF,{})}),document.getElementById("root"));

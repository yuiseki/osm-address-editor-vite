function Uk(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const m=Object.getOwnPropertyDescriptor(a,c);m&&Object.defineProperty(e,c,m.get?m:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const f of m.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(c){if(c.ep)return;c.ep=!0;const m=i(c);fetch(c.href,m)}})();var $l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),i}var kE={exports:{}},Qg={},ME={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Symbol.for("react.element"),$k=Symbol.for("react.portal"),Vk=Symbol.for("react.fragment"),Gk=Symbol.for("react.strict_mode"),Wk=Symbol.for("react.profiler"),Hk=Symbol.for("react.provider"),Zk=Symbol.for("react.context"),qk=Symbol.for("react.forward_ref"),Xk=Symbol.for("react.suspense"),Kk=Symbol.for("react.memo"),Yk=Symbol.for("react.lazy"),zb=Symbol.iterator;function Jk(e){return e===null||typeof e!="object"?null:(e=zb&&e[zb]||e["@@iterator"],typeof e=="function"?e:null)}var zE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FE=Object.assign,RE={};function Uh(e,t,i){this.props=e,this.context=t,this.refs=RE,this.updater=i||zE}Uh.prototype.isReactComponent={};Uh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Uh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OE(){}OE.prototype=Uh.prototype;function c1(e,t,i){this.props=e,this.context=t,this.refs=RE,this.updater=i||zE}var h1=c1.prototype=new OE;h1.constructor=c1;FE(h1,Uh.prototype);h1.isPureReactComponent=!0;var Fb=Array.isArray,jE=Object.prototype.hasOwnProperty,d1={current:null},LE={key:!0,ref:!0,__self:!0,__source:!0};function DE(e,t,i){var a,c={},m=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(m=""+t.key),t)jE.call(t,a)&&!LE.hasOwnProperty(a)&&(c[a]=t[a]);var u=arguments.length-2;if(u===1)c.children=i;else if(1<u){for(var S=Array(u),C=0;C<u;C++)S[C]=arguments[C+2];c.children=S}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)c[a]===void 0&&(c[a]=u[a]);return{$$typeof:Xf,type:e,key:m,ref:f,props:c,_owner:d1.current}}function Qk(e,t){return{$$typeof:Xf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function f1(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xf}function eM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Rb=/\/+/g;function w0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?eM(""+e.key):t.toString(36)}function Mm(e,t,i,a,c){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(m){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Xf:case $k:f=!0}}if(f)return f=e,c=c(f),e=a===""?"."+w0(f,0):a,Fb(c)?(i="",e!=null&&(i=e.replace(Rb,"$&/")+"/"),Mm(c,t,i,"",function(C){return C})):c!=null&&(f1(c)&&(c=Qk(c,i+(!c.key||f&&f.key===c.key?"":(""+c.key).replace(Rb,"$&/")+"/")+e)),t.push(c)),1;if(f=0,a=a===""?".":a+":",Fb(e))for(var u=0;u<e.length;u++){m=e[u];var S=a+w0(m,u);f+=Mm(m,t,i,S,c)}else if(S=Jk(e),typeof S=="function")for(e=S.call(e),u=0;!(m=e.next()).done;)m=m.value,S=a+w0(m,u++),f+=Mm(m,t,i,S,c);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function qp(e,t,i){if(e==null)return e;var a=[],c=0;return Mm(e,a,"","",function(m){return t.call(i,m,c++)}),a}function tM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lo={current:null},zm={transition:null},nM={ReactCurrentDispatcher:lo,ReactCurrentBatchConfig:zm,ReactCurrentOwner:d1};Dn.Children={map:qp,forEach:function(e,t,i){qp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return qp(e,function(){t++}),t},toArray:function(e){return qp(e,function(t){return t})||[]},only:function(e){if(!f1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dn.Component=Uh;Dn.Fragment=Vk;Dn.Profiler=Wk;Dn.PureComponent=c1;Dn.StrictMode=Gk;Dn.Suspense=Xk;Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nM;Dn.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=FE({},e.props),c=e.key,m=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,f=d1.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(S in t)jE.call(t,S)&&!LE.hasOwnProperty(S)&&(a[S]=t[S]===void 0&&u!==void 0?u[S]:t[S])}var S=arguments.length-2;if(S===1)a.children=i;else if(1<S){u=Array(S);for(var C=0;C<S;C++)u[C]=arguments[C+2];a.children=u}return{$$typeof:Xf,type:e.type,key:c,ref:m,props:a,_owner:f}};Dn.createContext=function(e){return e={$$typeof:Zk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hk,_context:e},e.Consumer=e};Dn.createElement=DE;Dn.createFactory=function(e){var t=DE.bind(null,e);return t.type=e,t};Dn.createRef=function(){return{current:null}};Dn.forwardRef=function(e){return{$$typeof:qk,render:e}};Dn.isValidElement=f1;Dn.lazy=function(e){return{$$typeof:Yk,_payload:{_status:-1,_result:e},_init:tM}};Dn.memo=function(e,t){return{$$typeof:Kk,type:e,compare:t===void 0?null:t}};Dn.startTransition=function(e){var t=zm.transition;zm.transition={};try{e()}finally{zm.transition=t}};Dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Dn.useCallback=function(e,t){return lo.current.useCallback(e,t)};Dn.useContext=function(e){return lo.current.useContext(e)};Dn.useDebugValue=function(){};Dn.useDeferredValue=function(e){return lo.current.useDeferredValue(e)};Dn.useEffect=function(e,t){return lo.current.useEffect(e,t)};Dn.useId=function(){return lo.current.useId()};Dn.useImperativeHandle=function(e,t,i){return lo.current.useImperativeHandle(e,t,i)};Dn.useInsertionEffect=function(e,t){return lo.current.useInsertionEffect(e,t)};Dn.useLayoutEffect=function(e,t){return lo.current.useLayoutEffect(e,t)};Dn.useMemo=function(e,t){return lo.current.useMemo(e,t)};Dn.useReducer=function(e,t,i){return lo.current.useReducer(e,t,i)};Dn.useRef=function(e){return lo.current.useRef(e)};Dn.useState=function(e){return lo.current.useState(e)};Dn.useSyncExternalStore=function(e,t,i){return lo.current.useSyncExternalStore(e,t,i)};Dn.useTransition=function(){return lo.current.useTransition()};Dn.version="18.2.0";ME.exports=Dn;var vt=ME.exports;const p1=qf(vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=vt,iM=Symbol.for("react.element"),oM=Symbol.for("react.fragment"),sM=Object.prototype.hasOwnProperty,aM=rM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lM={key:!0,ref:!0,__self:!0,__source:!0};function BE(e,t,i){var a,c={},m=null,f=null;i!==void 0&&(m=""+i),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)sM.call(t,a)&&!lM.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:iM,type:e,key:m,ref:f,props:c,_owner:aM.current}}Qg.Fragment=oM;Qg.jsx=BE;Qg.jsxs=BE;kE.exports=Qg;var yt=kE.exports,NE={exports:{}},Wo={},UE={exports:{}},$E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,de){var we=ne.length;ne.push(de);e:for(;0<we;){var Te=we-1>>>1,Ne=ne[Te];if(0<c(Ne,de))ne[Te]=de,ne[we]=Ne,we=Te;else break e}}function i(ne){return ne.length===0?null:ne[0]}function a(ne){if(ne.length===0)return null;var de=ne[0],we=ne.pop();if(we!==de){ne[0]=we;e:for(var Te=0,Ne=ne.length,Pe=Ne>>>1;Te<Pe;){var ze=2*(Te+1)-1,qe=ne[ze],He=ze+1,ot=ne[He];if(0>c(qe,we))He<Ne&&0>c(ot,qe)?(ne[Te]=ot,ne[He]=we,Te=He):(ne[Te]=qe,ne[ze]=we,Te=ze);else if(He<Ne&&0>c(ot,we))ne[Te]=ot,ne[He]=we,Te=He;else break e}}return de}function c(ne,de){var we=ne.sortIndex-de.sortIndex;return we!==0?we:ne.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var f=Date,u=f.now();e.unstable_now=function(){return f.now()-u}}var S=[],C=[],k=1,b=null,I=3,R=!1,B=!1,O=!1,he=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(ne){for(var de=i(C);de!==null;){if(de.callback===null)a(C);else if(de.startTime<=ne)a(C),de.sortIndex=de.expirationTime,t(S,de);else break;de=i(C)}}function se(ne){if(O=!1,V(ne),!B)if(i(S)!==null)B=!0,ce(X);else{var de=i(C);de!==null&&J(se,de.startTime-ne)}}function X(ne,de){B=!1,O&&(O=!1,Y(j),j=-1),R=!0;var we=I;try{for(V(de),b=i(S);b!==null&&(!(b.expirationTime>de)||ne&&!Z());){var Te=b.callback;if(typeof Te=="function"){b.callback=null,I=b.priorityLevel;var Ne=Te(b.expirationTime<=de);de=e.unstable_now(),typeof Ne=="function"?b.callback=Ne:b===i(S)&&a(S),V(de)}else a(S);b=i(S)}if(b!==null)var Pe=!0;else{var ze=i(C);ze!==null&&J(se,ze.startTime-de),Pe=!1}return Pe}finally{b=null,I=we,R=!1}}var G=!1,E=null,j=-1,L=5,ee=-1;function Z(){return!(e.unstable_now()-ee<L)}function ve(){if(E!==null){var ne=e.unstable_now();ee=ne;var de=!0;try{de=E(!0,ne)}finally{de?_e():(G=!1,E=null)}}else G=!1}var _e;if(typeof q=="function")_e=function(){q(ve)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,oe=pe.port2;pe.port1.onmessage=ve,_e=function(){oe.postMessage(null)}}else _e=function(){he(ve,0)};function ce(ne){E=ne,G||(G=!0,_e())}function J(ne,de){j=he(function(){ne(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){B||R||(B=!0,ce(X))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return i(S)},e.unstable_next=function(ne){switch(I){case 1:case 2:case 3:var de=3;break;default:de=I}var we=I;I=de;try{return ne()}finally{I=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=I;I=ne;try{return de()}finally{I=we}},e.unstable_scheduleCallback=function(ne,de,we){var Te=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Te+we:Te):we=Te,ne){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=we+Ne,ne={id:k++,callback:de,priorityLevel:ne,startTime:we,expirationTime:Ne,sortIndex:-1},we>Te?(ne.sortIndex=we,t(C,ne),i(S)===null&&ne===i(C)&&(O?(Y(j),j=-1):O=!0,J(se,we-Te))):(ne.sortIndex=Ne,t(S,ne),B||R||(B=!0,ce(X))),ne},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(ne){var de=I;return function(){var we=I;I=de;try{return ne.apply(this,arguments)}finally{I=we}}}})($E);UE.exports=$E;var uM=UE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE=vt,Go=uM;function Ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GE=new Set,wf={};function nc(e,t){Ph(e,t),Ph(e+"Capture",t)}function Ph(e,t){for(wf[e]=t,e=0;e<t.length;e++)GE.add(t[e])}var qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iv=Object.prototype.hasOwnProperty,cM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ob={},jb={};function hM(e){return Iv.call(jb,e)?!0:Iv.call(Ob,e)?!1:cM.test(e)?jb[e]=!0:(Ob[e]=!0,!1)}function dM(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fM(e,t,i,a){if(t===null||typeof t>"u"||dM(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function uo(e,t,i,a,c,m,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=f}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zi[e]=new uo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zi[t]=new uo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zi[e]=new uo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zi[e]=new uo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zi[e]=new uo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zi[e]=new uo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zi[e]=new uo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zi[e]=new uo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zi[e]=new uo(e,5,!1,e.toLowerCase(),null,!1,!1)});var m1=/[\-:]([a-z])/g;function g1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m1,g1);zi[t]=new uo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m1,g1);zi[t]=new uo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m1,g1);zi[t]=new uo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zi[e]=new uo(e,1,!1,e.toLowerCase(),null,!1,!1)});zi.xlinkHref=new uo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zi[e]=new uo(e,1,!1,e.toLowerCase(),null,!0,!0)});function y1(e,t,i,a){var c=zi.hasOwnProperty(t)?zi[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fM(t,i,c,a)&&(i=null),a||c===null?hM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,a=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var nl=VE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xp=Symbol.for("react.element"),nh=Symbol.for("react.portal"),rh=Symbol.for("react.fragment"),v1=Symbol.for("react.strict_mode"),Cv=Symbol.for("react.profiler"),WE=Symbol.for("react.provider"),HE=Symbol.for("react.context"),_1=Symbol.for("react.forward_ref"),Pv=Symbol.for("react.suspense"),Av=Symbol.for("react.suspense_list"),x1=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),ZE=Symbol.for("react.offscreen"),Lb=Symbol.iterator;function Ld(e){return e===null||typeof e!="object"?null:(e=Lb&&e[Lb]||e["@@iterator"],typeof e=="function"?e:null)}var Pr=Object.assign,b0;function Hd(e){if(b0===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);b0=t&&t[1]||""}return`
`+b0+e}var S0=!1;function E0(e,t){if(!e||S0)return"";S0=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var c=C.stack.split(`
`),m=a.stack.split(`
`),f=c.length-1,u=m.length-1;1<=f&&0<=u&&c[f]!==m[u];)u--;for(;1<=f&&0<=u;f--,u--)if(c[f]!==m[u]){if(f!==1||u!==1)do if(f--,u--,0>u||c[f]!==m[u]){var S=`
`+c[f].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=f&&0<=u);break}}}finally{S0=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Hd(e):""}function pM(e){switch(e.tag){case 5:return Hd(e.type);case 16:return Hd("Lazy");case 13:return Hd("Suspense");case 19:return Hd("SuspenseList");case 0:case 2:case 15:return e=E0(e.type,!1),e;case 11:return e=E0(e.type.render,!1),e;case 1:return e=E0(e.type,!0),e;default:return""}}function kv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rh:return"Fragment";case nh:return"Portal";case Cv:return"Profiler";case v1:return"StrictMode";case Pv:return"Suspense";case Av:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HE:return(e.displayName||"Context")+".Consumer";case WE:return(e._context.displayName||"Context")+".Provider";case _1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x1:return t=e.displayName||null,t!==null?t:kv(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return kv(e(t))}catch{}}return null}function mM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kv(t);case 8:return t===v1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function nu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gM(e){var t=qE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,m=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(f){a=""+f,m.call(this,f)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kp(e){e._valueTracker||(e._valueTracker=gM(e))}function XE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=qE(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Jm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mv(e,t){var i=t.checked;return Pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Db(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=nu(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function KE(e,t){t=t.checked,t!=null&&y1(e,"checked",t,!1)}function zv(e,t){KE(e,t);var i=nu(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fv(e,t.type,i):t.hasOwnProperty("defaultValue")&&Fv(e,t.type,nu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Fv(e,t,i){(t!=="number"||Jm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Zd=Array.isArray;function _h(e,t,i,a){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&a&&(e[i].defaultSelected=!0)}else{for(i=""+nu(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Rv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ct(91));return Pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(Ct(92));if(Zd(i)){if(1<i.length)throw Error(Ct(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:nu(i)}}function YE(e,t){var i=nu(t.value),a=nu(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Ub(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function JE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ov(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?JE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yp,QE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yp=Yp||document.createElement("div"),Yp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bf(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yM=["Webkit","ms","Moz","O"];Object.keys(of).forEach(function(e){yM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),of[t]=of[e]})});function eT(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||of.hasOwnProperty(e)&&of[e]?(""+t).trim():t+"px"}function tT(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,c=eT(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,c):e[i]=c}}var vM=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jv(e,t){if(t){if(vM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ct(62))}}function Lv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dv=null;function w1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bv=null,xh=null,wh=null;function $b(e){if(e=Jf(e)){if(typeof Bv!="function")throw Error(Ct(280));var t=e.stateNode;t&&(t=iy(t),Bv(e.stateNode,e.type,t))}}function nT(e){xh?wh?wh.push(e):wh=[e]:xh=e}function rT(){if(xh){var e=xh,t=wh;if(wh=xh=null,$b(e),t)for(e=0;e<t.length;e++)$b(t[e])}}function iT(e,t){return e(t)}function oT(){}var T0=!1;function sT(e,t,i){if(T0)return e(t,i);T0=!0;try{return iT(e,t,i)}finally{T0=!1,(xh!==null||wh!==null)&&(oT(),rT())}}function Sf(e,t){var i=e.stateNode;if(i===null)return null;var a=iy(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(Ct(231,t,typeof i));return i}var Nv=!1;if(qa)try{var Dd={};Object.defineProperty(Dd,"passive",{get:function(){Nv=!0}}),window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch{Nv=!1}function _M(e,t,i,a,c,m,f,u,S){var C=Array.prototype.slice.call(arguments,3);try{t.apply(i,C)}catch(k){this.onError(k)}}var sf=!1,Qm=null,eg=!1,Uv=null,xM={onError:function(e){sf=!0,Qm=e}};function wM(e,t,i,a,c,m,f,u,S){sf=!1,Qm=null,_M.apply(xM,arguments)}function bM(e,t,i,a,c,m,f,u,S){if(wM.apply(this,arguments),sf){if(sf){var C=Qm;sf=!1,Qm=null}else throw Error(Ct(198));eg||(eg=!0,Uv=C)}}function rc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function aT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vb(e){if(rc(e)!==e)throw Error(Ct(188))}function SM(e){var t=e.alternate;if(!t){if(t=rc(e),t===null)throw Error(Ct(188));return t!==e?null:e}for(var i=e,a=t;;){var c=i.return;if(c===null)break;var m=c.alternate;if(m===null){if(a=c.return,a!==null){i=a;continue}break}if(c.child===m.child){for(m=c.child;m;){if(m===i)return Vb(c),e;if(m===a)return Vb(c),t;m=m.sibling}throw Error(Ct(188))}if(i.return!==a.return)i=c,a=m;else{for(var f=!1,u=c.child;u;){if(u===i){f=!0,i=c,a=m;break}if(u===a){f=!0,a=c,i=m;break}u=u.sibling}if(!f){for(u=m.child;u;){if(u===i){f=!0,i=m,a=c;break}if(u===a){f=!0,a=m,i=c;break}u=u.sibling}if(!f)throw Error(Ct(189))}}if(i.alternate!==a)throw Error(Ct(190))}if(i.tag!==3)throw Error(Ct(188));return i.stateNode.current===i?e:t}function lT(e){return e=SM(e),e!==null?uT(e):null}function uT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uT(e);if(t!==null)return t;e=e.sibling}return null}var cT=Go.unstable_scheduleCallback,Gb=Go.unstable_cancelCallback,EM=Go.unstable_shouldYield,TM=Go.unstable_requestPaint,Wr=Go.unstable_now,IM=Go.unstable_getCurrentPriorityLevel,b1=Go.unstable_ImmediatePriority,hT=Go.unstable_UserBlockingPriority,tg=Go.unstable_NormalPriority,CM=Go.unstable_LowPriority,dT=Go.unstable_IdlePriority,ey=null,ma=null;function PM(e){if(ma&&typeof ma.onCommitFiberRoot=="function")try{ma.onCommitFiberRoot(ey,e,void 0,(e.current.flags&128)===128)}catch{}}var Os=Math.clz32?Math.clz32:MM,AM=Math.log,kM=Math.LN2;function MM(e){return e>>>=0,e===0?32:31-(AM(e)/kM|0)|0}var Jp=64,Qp=4194304;function qd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ng(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,c=e.suspendedLanes,m=e.pingedLanes,f=i&268435455;if(f!==0){var u=f&~c;u!==0?a=qd(u):(m&=f,m!==0&&(a=qd(m)))}else f=i&~c,f!==0?a=qd(f):m!==0&&(a=qd(m));if(a===0)return 0;if(t!==0&&t!==a&&!(t&c)&&(c=a&-a,m=t&-t,c>=m||c===16&&(m&4194240)!==0))return t;if(a&4&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-Os(t),c=1<<i,a|=e[i],t&=~c;return a}function zM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FM(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,m=e.pendingLanes;0<m;){var f=31-Os(m),u=1<<f,S=c[f];S===-1?(!(u&i)||u&a)&&(c[f]=zM(u,t)):S<=t&&(e.expiredLanes|=u),m&=~u}}function $v(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fT(){var e=Jp;return Jp<<=1,!(Jp&4194240)&&(Jp=64),e}function I0(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Kf(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Os(t),e[t]=i}function RM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Os(i),m=1<<c;t[c]=0,a[c]=-1,e[c]=-1,i&=~m}}function S1(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-Os(i),c=1<<a;c&t|e[a]&t&&(e[a]|=t),i&=~c}}var Yn=0;function pT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var mT,E1,gT,yT,vT,Vv=!1,em=[],Zl=null,ql=null,Xl=null,Ef=new Map,Tf=new Map,Vl=[],OM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wb(e,t){switch(e){case"focusin":case"focusout":Zl=null;break;case"dragenter":case"dragleave":ql=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":Ef.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tf.delete(t.pointerId)}}function Bd(e,t,i,a,c,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:m,targetContainers:[c]},t!==null&&(t=Jf(t),t!==null&&E1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function jM(e,t,i,a,c){switch(t){case"focusin":return Zl=Bd(Zl,e,t,i,a,c),!0;case"dragenter":return ql=Bd(ql,e,t,i,a,c),!0;case"mouseover":return Xl=Bd(Xl,e,t,i,a,c),!0;case"pointerover":var m=c.pointerId;return Ef.set(m,Bd(Ef.get(m)||null,e,t,i,a,c)),!0;case"gotpointercapture":return m=c.pointerId,Tf.set(m,Bd(Tf.get(m)||null,e,t,i,a,c)),!0}return!1}function _T(e){var t=Nu(e.target);if(t!==null){var i=rc(t);if(i!==null){if(t=i.tag,t===13){if(t=aT(i),t!==null){e.blockedOn=t,vT(e.priority,function(){gT(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Gv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);Dv=a,i.target.dispatchEvent(a),Dv=null}else return t=Jf(i),t!==null&&E1(t),e.blockedOn=i,!1;t.shift()}return!0}function Hb(e,t,i){Fm(e)&&i.delete(t)}function LM(){Vv=!1,Zl!==null&&Fm(Zl)&&(Zl=null),ql!==null&&Fm(ql)&&(ql=null),Xl!==null&&Fm(Xl)&&(Xl=null),Ef.forEach(Hb),Tf.forEach(Hb)}function Nd(e,t){e.blockedOn===t&&(e.blockedOn=null,Vv||(Vv=!0,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,LM)))}function If(e){function t(c){return Nd(c,e)}if(0<em.length){Nd(em[0],e);for(var i=1;i<em.length;i++){var a=em[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Zl!==null&&Nd(Zl,e),ql!==null&&Nd(ql,e),Xl!==null&&Nd(Xl,e),Ef.forEach(t),Tf.forEach(t),i=0;i<Vl.length;i++)a=Vl[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Vl.length&&(i=Vl[0],i.blockedOn===null);)_T(i),i.blockedOn===null&&Vl.shift()}var bh=nl.ReactCurrentBatchConfig,rg=!0;function DM(e,t,i,a){var c=Yn,m=bh.transition;bh.transition=null;try{Yn=1,T1(e,t,i,a)}finally{Yn=c,bh.transition=m}}function BM(e,t,i,a){var c=Yn,m=bh.transition;bh.transition=null;try{Yn=4,T1(e,t,i,a)}finally{Yn=c,bh.transition=m}}function T1(e,t,i,a){if(rg){var c=Gv(e,t,i,a);if(c===null)j0(e,t,a,ig,i),Wb(e,a);else if(jM(c,e,t,i,a))a.stopPropagation();else if(Wb(e,a),t&4&&-1<OM.indexOf(e)){for(;c!==null;){var m=Jf(c);if(m!==null&&mT(m),m=Gv(e,t,i,a),m===null&&j0(e,t,a,ig,i),m===c)break;c=m}c!==null&&a.stopPropagation()}else j0(e,t,a,null,i)}}var ig=null;function Gv(e,t,i,a){if(ig=null,e=w1(a),e=Nu(e),e!==null)if(t=rc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=aT(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ig=e,null}function xT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IM()){case b1:return 1;case hT:return 4;case tg:case CM:return 16;case dT:return 536870912;default:return 16}default:return 16}}var Wl=null,I1=null,Rm=null;function wT(){if(Rm)return Rm;var e,t=I1,i=t.length,a,c="value"in Wl?Wl.value:Wl.textContent,m=c.length;for(e=0;e<i&&t[e]===c[e];e++);var f=i-e;for(a=1;a<=f&&t[i-a]===c[m-a];a++);return Rm=c.slice(e,1<a?1-a:void 0)}function Om(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tm(){return!0}function Zb(){return!1}function Ho(e){function t(i,a,c,m,f){this._reactName=i,this._targetInst=c,this.type=a,this.nativeEvent=m,this.target=f,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(i=e[u],this[u]=i?i(m):m[u]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?tm:Zb,this.isPropagationStopped=Zb,this}return Pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=tm)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=tm)},persist:function(){},isPersistent:tm}),t}var $h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C1=Ho($h),Yf=Pr({},$h,{view:0,detail:0}),NM=Ho(Yf),C0,P0,Ud,ty=Pr({},Yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ud&&(Ud&&e.type==="mousemove"?(C0=e.screenX-Ud.screenX,P0=e.screenY-Ud.screenY):P0=C0=0,Ud=e),C0)},movementY:function(e){return"movementY"in e?e.movementY:P0}}),qb=Ho(ty),UM=Pr({},ty,{dataTransfer:0}),$M=Ho(UM),VM=Pr({},Yf,{relatedTarget:0}),A0=Ho(VM),GM=Pr({},$h,{animationName:0,elapsedTime:0,pseudoElement:0}),WM=Ho(GM),HM=Pr({},$h,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZM=Ho(HM),qM=Pr({},$h,{data:0}),Xb=Ho(qM),XM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=YM[e])?!!t[e]:!1}function P1(){return JM}var QM=Pr({},Yf,{key:function(e){if(e.key){var t=XM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Om(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P1,charCode:function(e){return e.type==="keypress"?Om(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Om(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),e3=Ho(QM),t3=Pr({},ty,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kb=Ho(t3),n3=Pr({},Yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P1}),r3=Ho(n3),i3=Pr({},$h,{propertyName:0,elapsedTime:0,pseudoElement:0}),o3=Ho(i3),s3=Pr({},ty,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a3=Ho(s3),l3=[9,13,27,32],A1=qa&&"CompositionEvent"in window,af=null;qa&&"documentMode"in document&&(af=document.documentMode);var u3=qa&&"TextEvent"in window&&!af,bT=qa&&(!A1||af&&8<af&&11>=af),Yb=" ",Jb=!1;function ST(e,t){switch(e){case"keyup":return l3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ET(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ih=!1;function c3(e,t){switch(e){case"compositionend":return ET(t);case"keypress":return t.which!==32?null:(Jb=!0,Yb);case"textInput":return e=t.data,e===Yb&&Jb?null:e;default:return null}}function h3(e,t){if(ih)return e==="compositionend"||!A1&&ST(e,t)?(e=wT(),Rm=I1=Wl=null,ih=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bT&&t.locale!=="ko"?null:t.data;default:return null}}var d3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!d3[e.type]:t==="textarea"}function TT(e,t,i,a){nT(a),t=og(t,"onChange"),0<t.length&&(i=new C1("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var lf=null,Cf=null;function f3(e){jT(e,0)}function ny(e){var t=ah(e);if(XE(t))return e}function p3(e,t){if(e==="change")return t}var IT=!1;if(qa){var k0;if(qa){var M0="oninput"in document;if(!M0){var e2=document.createElement("div");e2.setAttribute("oninput","return;"),M0=typeof e2.oninput=="function"}k0=M0}else k0=!1;IT=k0&&(!document.documentMode||9<document.documentMode)}function t2(){lf&&(lf.detachEvent("onpropertychange",CT),Cf=lf=null)}function CT(e){if(e.propertyName==="value"&&ny(Cf)){var t=[];TT(t,Cf,e,w1(e)),sT(f3,t)}}function m3(e,t,i){e==="focusin"?(t2(),lf=t,Cf=i,lf.attachEvent("onpropertychange",CT)):e==="focusout"&&t2()}function g3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ny(Cf)}function y3(e,t){if(e==="click")return ny(t)}function v3(e,t){if(e==="input"||e==="change")return ny(t)}function _3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ls=typeof Object.is=="function"?Object.is:_3;function Pf(e,t){if(Ls(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var c=i[a];if(!Iv.call(t,c)||!Ls(e[c],t[c]))return!1}return!0}function n2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r2(e,t){var i=n2(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=n2(i)}}function PT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function AT(){for(var e=window,t=Jm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Jm(e.document)}return t}function k1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function x3(e){var t=AT(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&PT(i.ownerDocument.documentElement,i)){if(a!==null&&k1(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,m=Math.min(a.start,c);a=a.end===void 0?m:Math.min(a.end,c),!e.extend&&m>a&&(c=a,a=m,m=c),c=r2(i,m);var f=r2(i,a);c&&f&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),m>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var w3=qa&&"documentMode"in document&&11>=document.documentMode,oh=null,Wv=null,uf=null,Hv=!1;function i2(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Hv||oh==null||oh!==Jm(a)||(a=oh,"selectionStart"in a&&k1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),uf&&Pf(uf,a)||(uf=a,a=og(Wv,"onSelect"),0<a.length&&(t=new C1("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=oh)))}function nm(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var sh={animationend:nm("Animation","AnimationEnd"),animationiteration:nm("Animation","AnimationIteration"),animationstart:nm("Animation","AnimationStart"),transitionend:nm("Transition","TransitionEnd")},z0={},kT={};qa&&(kT=document.createElement("div").style,"AnimationEvent"in window||(delete sh.animationend.animation,delete sh.animationiteration.animation,delete sh.animationstart.animation),"TransitionEvent"in window||delete sh.transitionend.transition);function ry(e){if(z0[e])return z0[e];if(!sh[e])return e;var t=sh[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in kT)return z0[e]=t[i];return e}var MT=ry("animationend"),zT=ry("animationiteration"),FT=ry("animationstart"),RT=ry("transitionend"),OT=new Map,o2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lu(e,t){OT.set(e,t),nc(t,[e])}for(var F0=0;F0<o2.length;F0++){var R0=o2[F0],b3=R0.toLowerCase(),S3=R0[0].toUpperCase()+R0.slice(1);lu(b3,"on"+S3)}lu(MT,"onAnimationEnd");lu(zT,"onAnimationIteration");lu(FT,"onAnimationStart");lu("dblclick","onDoubleClick");lu("focusin","onFocus");lu("focusout","onBlur");lu(RT,"onTransitionEnd");Ph("onMouseEnter",["mouseout","mouseover"]);Ph("onMouseLeave",["mouseout","mouseover"]);Ph("onPointerEnter",["pointerout","pointerover"]);Ph("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xd));function s2(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,bM(a,t,void 0,e),e.currentTarget=null}function jT(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],c=a.event;a=a.listeners;e:{var m=void 0;if(t)for(var f=a.length-1;0<=f;f--){var u=a[f],S=u.instance,C=u.currentTarget;if(u=u.listener,S!==m&&c.isPropagationStopped())break e;s2(c,u,C),m=S}else for(f=0;f<a.length;f++){if(u=a[f],S=u.instance,C=u.currentTarget,u=u.listener,S!==m&&c.isPropagationStopped())break e;s2(c,u,C),m=S}}}if(eg)throw e=Uv,eg=!1,Uv=null,e}function hr(e,t){var i=t[Yv];i===void 0&&(i=t[Yv]=new Set);var a=e+"__bubble";i.has(a)||(LT(t,e,2,!1),i.add(a))}function O0(e,t,i){var a=0;t&&(a|=4),LT(i,e,a,t)}var rm="_reactListening"+Math.random().toString(36).slice(2);function Af(e){if(!e[rm]){e[rm]=!0,GE.forEach(function(i){i!=="selectionchange"&&(E3.has(i)||O0(i,!1,e),O0(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rm]||(t[rm]=!0,O0("selectionchange",!1,t))}}function LT(e,t,i,a){switch(xT(t)){case 1:var c=DM;break;case 4:c=BM;break;default:c=T1}i=c.bind(null,t,i,e),c=void 0,!Nv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function j0(e,t,i,a,c){var m=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var u=a.stateNode.containerInfo;if(u===c||u.nodeType===8&&u.parentNode===c)break;if(f===4)for(f=a.return;f!==null;){var S=f.tag;if((S===3||S===4)&&(S=f.stateNode.containerInfo,S===c||S.nodeType===8&&S.parentNode===c))return;f=f.return}for(;u!==null;){if(f=Nu(u),f===null)return;if(S=f.tag,S===5||S===6){a=m=f;continue e}u=u.parentNode}}a=a.return}sT(function(){var C=m,k=w1(i),b=[];e:{var I=OT.get(e);if(I!==void 0){var R=C1,B=e;switch(e){case"keypress":if(Om(i)===0)break e;case"keydown":case"keyup":R=e3;break;case"focusin":B="focus",R=A0;break;case"focusout":B="blur",R=A0;break;case"beforeblur":case"afterblur":R=A0;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=$M;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=r3;break;case MT:case zT:case FT:R=WM;break;case RT:R=o3;break;case"scroll":R=NM;break;case"wheel":R=a3;break;case"copy":case"cut":case"paste":R=ZM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Kb}var O=(t&4)!==0,he=!O&&e==="scroll",Y=O?I!==null?I+"Capture":null:I;O=[];for(var q=C,V;q!==null;){V=q;var se=V.stateNode;if(V.tag===5&&se!==null&&(V=se,Y!==null&&(se=Sf(q,Y),se!=null&&O.push(kf(q,se,V)))),he)break;q=q.return}0<O.length&&(I=new R(I,B,null,i,k),b.push({event:I,listeners:O}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",I&&i!==Dv&&(B=i.relatedTarget||i.fromElement)&&(Nu(B)||B[Xa]))break e;if((R||I)&&(I=k.window===k?k:(I=k.ownerDocument)?I.defaultView||I.parentWindow:window,R?(B=i.relatedTarget||i.toElement,R=C,B=B?Nu(B):null,B!==null&&(he=rc(B),B!==he||B.tag!==5&&B.tag!==6)&&(B=null)):(R=null,B=C),R!==B)){if(O=qb,se="onMouseLeave",Y="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(O=Kb,se="onPointerLeave",Y="onPointerEnter",q="pointer"),he=R==null?I:ah(R),V=B==null?I:ah(B),I=new O(se,q+"leave",R,i,k),I.target=he,I.relatedTarget=V,se=null,Nu(k)===C&&(O=new O(Y,q+"enter",B,i,k),O.target=V,O.relatedTarget=he,se=O),he=se,R&&B)t:{for(O=R,Y=B,q=0,V=O;V;V=qc(V))q++;for(V=0,se=Y;se;se=qc(se))V++;for(;0<q-V;)O=qc(O),q--;for(;0<V-q;)Y=qc(Y),V--;for(;q--;){if(O===Y||Y!==null&&O===Y.alternate)break t;O=qc(O),Y=qc(Y)}O=null}else O=null;R!==null&&a2(b,I,R,O,!1),B!==null&&he!==null&&a2(b,he,B,O,!0)}}e:{if(I=C?ah(C):window,R=I.nodeName&&I.nodeName.toLowerCase(),R==="select"||R==="input"&&I.type==="file")var X=p3;else if(Qb(I))if(IT)X=v3;else{X=g3;var G=m3}else(R=I.nodeName)&&R.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(X=y3);if(X&&(X=X(e,C))){TT(b,X,i,k);break e}G&&G(e,I,C),e==="focusout"&&(G=I._wrapperState)&&G.controlled&&I.type==="number"&&Fv(I,"number",I.value)}switch(G=C?ah(C):window,e){case"focusin":(Qb(G)||G.contentEditable==="true")&&(oh=G,Wv=C,uf=null);break;case"focusout":uf=Wv=oh=null;break;case"mousedown":Hv=!0;break;case"contextmenu":case"mouseup":case"dragend":Hv=!1,i2(b,i,k);break;case"selectionchange":if(w3)break;case"keydown":case"keyup":i2(b,i,k)}var E;if(A1)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else ih?ST(e,i)&&(j="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(j="onCompositionStart");j&&(bT&&i.locale!=="ko"&&(ih||j!=="onCompositionStart"?j==="onCompositionEnd"&&ih&&(E=wT()):(Wl=k,I1="value"in Wl?Wl.value:Wl.textContent,ih=!0)),G=og(C,j),0<G.length&&(j=new Xb(j,e,null,i,k),b.push({event:j,listeners:G}),E?j.data=E:(E=ET(i),E!==null&&(j.data=E)))),(E=u3?c3(e,i):h3(e,i))&&(C=og(C,"onBeforeInput"),0<C.length&&(k=new Xb("onBeforeInput","beforeinput",null,i,k),b.push({event:k,listeners:C}),k.data=E))}jT(b,t)})}function kf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function og(e,t){for(var i=t+"Capture",a=[];e!==null;){var c=e,m=c.stateNode;c.tag===5&&m!==null&&(c=m,m=Sf(e,i),m!=null&&a.unshift(kf(e,m,c)),m=Sf(e,t),m!=null&&a.push(kf(e,m,c))),e=e.return}return a}function qc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function a2(e,t,i,a,c){for(var m=t._reactName,f=[];i!==null&&i!==a;){var u=i,S=u.alternate,C=u.stateNode;if(S!==null&&S===a)break;u.tag===5&&C!==null&&(u=C,c?(S=Sf(i,m),S!=null&&f.unshift(kf(i,S,u))):c||(S=Sf(i,m),S!=null&&f.push(kf(i,S,u)))),i=i.return}f.length!==0&&e.push({event:t,listeners:f})}var T3=/\r\n?/g,I3=/\u0000|\uFFFD/g;function l2(e){return(typeof e=="string"?e:""+e).replace(T3,`
`).replace(I3,"")}function im(e,t,i){if(t=l2(t),l2(e)!==t&&i)throw Error(Ct(425))}function sg(){}var Zv=null,qv=null;function Xv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kv=typeof setTimeout=="function"?setTimeout:void 0,C3=typeof clearTimeout=="function"?clearTimeout:void 0,u2=typeof Promise=="function"?Promise:void 0,P3=typeof queueMicrotask=="function"?queueMicrotask:typeof u2<"u"?function(e){return u2.resolve(null).then(e).catch(A3)}:Kv;function A3(e){setTimeout(function(){throw e})}function L0(e,t){var i=t,a=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(a===0){e.removeChild(c),If(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=c}while(i);If(t)}function Kl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function c2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Vh=Math.random().toString(36).slice(2),ca="__reactFiber$"+Vh,Mf="__reactProps$"+Vh,Xa="__reactContainer$"+Vh,Yv="__reactEvents$"+Vh,k3="__reactListeners$"+Vh,M3="__reactHandles$"+Vh;function Nu(e){var t=e[ca];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Xa]||i[ca]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=c2(e);e!==null;){if(i=e[ca])return i;e=c2(e)}return t}e=i,i=e.parentNode}return null}function Jf(e){return e=e[ca]||e[Xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ah(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ct(33))}function iy(e){return e[Mf]||null}var Jv=[],lh=-1;function uu(e){return{current:e}}function fr(e){0>lh||(e.current=Jv[lh],Jv[lh]=null,lh--)}function ur(e,t){lh++,Jv[lh]=e.current,e.current=t}var ru={},Wi=uu(ru),wo=uu(!1),Zu=ru;function Ah(e,t){var i=e.type.contextTypes;if(!i)return ru;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},m;for(m in i)c[m]=t[m];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function bo(e){return e=e.childContextTypes,e!=null}function ag(){fr(wo),fr(Wi)}function h2(e,t,i){if(Wi.current!==ru)throw Error(Ct(168));ur(Wi,t),ur(wo,i)}function DT(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(Ct(108,mM(e)||"Unknown",c));return Pr({},i,a)}function lg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ru,Zu=Wi.current,ur(Wi,e),ur(wo,wo.current),!0}function d2(e,t,i){var a=e.stateNode;if(!a)throw Error(Ct(169));i?(e=DT(e,t,Zu),a.__reactInternalMemoizedMergedChildContext=e,fr(wo),fr(Wi),ur(Wi,e)):fr(wo),ur(wo,i)}var $a=null,oy=!1,D0=!1;function BT(e){$a===null?$a=[e]:$a.push(e)}function z3(e){oy=!0,BT(e)}function cu(){if(!D0&&$a!==null){D0=!0;var e=0,t=Yn;try{var i=$a;for(Yn=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}$a=null,oy=!1}catch(c){throw $a!==null&&($a=$a.slice(e+1)),cT(b1,cu),c}finally{Yn=t,D0=!1}}return null}var uh=[],ch=0,ug=null,cg=0,rs=[],is=0,qu=null,Wa=1,Ha="";function Lu(e,t){uh[ch++]=cg,uh[ch++]=ug,ug=e,cg=t}function NT(e,t,i){rs[is++]=Wa,rs[is++]=Ha,rs[is++]=qu,qu=e;var a=Wa;e=Ha;var c=32-Os(a)-1;a&=~(1<<c),i+=1;var m=32-Os(t)+c;if(30<m){var f=c-c%5;m=(a&(1<<f)-1).toString(32),a>>=f,c-=f,Wa=1<<32-Os(t)+c|i<<c|a,Ha=m+e}else Wa=1<<m|i<<c|a,Ha=e}function M1(e){e.return!==null&&(Lu(e,1),NT(e,1,0))}function z1(e){for(;e===ug;)ug=uh[--ch],uh[ch]=null,cg=uh[--ch],uh[ch]=null;for(;e===qu;)qu=rs[--is],rs[is]=null,Ha=rs[--is],rs[is]=null,Wa=rs[--is],rs[is]=null}var Vo=null,$o=null,yr=!1,ks=null;function UT(e,t){var i=ss(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function f2(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vo=e,$o=Kl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vo=e,$o=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=qu!==null?{id:Wa,overflow:Ha}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ss(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Vo=e,$o=null,!0):!1;default:return!1}}function Qv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function e_(e){if(yr){var t=$o;if(t){var i=t;if(!f2(e,t)){if(Qv(e))throw Error(Ct(418));t=Kl(i.nextSibling);var a=Vo;t&&f2(e,t)?UT(a,i):(e.flags=e.flags&-4097|2,yr=!1,Vo=e)}}else{if(Qv(e))throw Error(Ct(418));e.flags=e.flags&-4097|2,yr=!1,Vo=e}}}function p2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vo=e}function om(e){if(e!==Vo)return!1;if(!yr)return p2(e),yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xv(e.type,e.memoizedProps)),t&&(t=$o)){if(Qv(e))throw $T(),Error(Ct(418));for(;t;)UT(e,t),t=Kl(t.nextSibling)}if(p2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){$o=Kl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}$o=null}}else $o=Vo?Kl(e.stateNode.nextSibling):null;return!0}function $T(){for(var e=$o;e;)e=Kl(e.nextSibling)}function kh(){$o=Vo=null,yr=!1}function F1(e){ks===null?ks=[e]:ks.push(e)}var F3=nl.ReactCurrentBatchConfig;function Ps(e,t){if(e&&e.defaultProps){t=Pr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var hg=uu(null),dg=null,hh=null,R1=null;function O1(){R1=hh=dg=null}function j1(e){var t=hg.current;fr(hg),e._currentValue=t}function t_(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function Sh(e,t){dg=e,R1=hh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xo=!0),e.firstContext=null)}function us(e){var t=e._currentValue;if(R1!==e)if(e={context:e,memoizedValue:t,next:null},hh===null){if(dg===null)throw Error(Ct(308));hh=e,dg.dependencies={lanes:0,firstContext:e}}else hh=hh.next=e;return t}var Uu=null;function L1(e){Uu===null?Uu=[e]:Uu.push(e)}function VT(e,t,i,a){var c=t.interleaved;return c===null?(i.next=i,L1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ka(e,a)}function Ka(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Nl=!1;function D1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yl(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,$n&2){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,Ka(e,i)}return c=a.interleaved,c===null?(t.next=t,L1(a)):(t.next=c.next,c.next=t),a.interleaved=t,Ka(e,i)}function jm(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,S1(e,i)}}function m2(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var c=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var f={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};m===null?c=m=f:m=m.next=f,i=i.next}while(i!==null);m===null?c=m=t:m=m.next=t}else c=m=t;i={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:m,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function fg(e,t,i,a){var c=e.updateQueue;Nl=!1;var m=c.firstBaseUpdate,f=c.lastBaseUpdate,u=c.shared.pending;if(u!==null){c.shared.pending=null;var S=u,C=S.next;S.next=null,f===null?m=C:f.next=C,f=S;var k=e.alternate;k!==null&&(k=k.updateQueue,u=k.lastBaseUpdate,u!==f&&(u===null?k.firstBaseUpdate=C:u.next=C,k.lastBaseUpdate=S))}if(m!==null){var b=c.baseState;f=0,k=C=S=null,u=m;do{var I=u.lane,R=u.eventTime;if((a&I)===I){k!==null&&(k=k.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var B=e,O=u;switch(I=t,R=i,O.tag){case 1:if(B=O.payload,typeof B=="function"){b=B.call(R,b,I);break e}b=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=O.payload,I=typeof B=="function"?B.call(R,b,I):B,I==null)break e;b=Pr({},b,I);break e;case 2:Nl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,I=c.effects,I===null?c.effects=[u]:I.push(u))}else R={eventTime:R,lane:I,tag:u.tag,payload:u.payload,callback:u.callback,next:null},k===null?(C=k=R,S=b):k=k.next=R,f|=I;if(u=u.next,u===null){if(u=c.shared.pending,u===null)break;I=u,u=I.next,I.next=null,c.lastBaseUpdate=I,c.shared.pending=null}}while(!0);if(k===null&&(S=b),c.baseState=S,c.firstBaseUpdate=C,c.lastBaseUpdate=k,t=c.shared.interleaved,t!==null){c=t;do f|=c.lane,c=c.next;while(c!==t)}else m===null&&(c.shared.lanes=0);Ku|=f,e.lanes=f,e.memoizedState=b}}function g2(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=i,typeof c!="function")throw Error(Ct(191,c));c.call(a)}}}var WT=new VE.Component().refs;function n_(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:Pr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var sy={isMounted:function(e){return(e=e._reactInternals)?rc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=io(),c=Ql(e),m=Za(a,c);m.payload=t,i!=null&&(m.callback=i),t=Yl(e,m,c),t!==null&&(js(t,e,c,a),jm(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=io(),c=Ql(e),m=Za(a,c);m.tag=1,m.payload=t,i!=null&&(m.callback=i),t=Yl(e,m,c),t!==null&&(js(t,e,c,a),jm(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=io(),a=Ql(e),c=Za(i,a);c.tag=2,t!=null&&(c.callback=t),t=Yl(e,c,a),t!==null&&(js(t,e,a,i),jm(t,e,a))}};function y2(e,t,i,a,c,m,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,m,f):t.prototype&&t.prototype.isPureReactComponent?!Pf(i,a)||!Pf(c,m):!0}function HT(e,t,i){var a=!1,c=ru,m=t.contextType;return typeof m=="object"&&m!==null?m=us(m):(c=bo(t)?Zu:Wi.current,a=t.contextTypes,m=(a=a!=null)?Ah(e,c):ru),t=new t(i,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sy,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=m),t}function v2(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&sy.enqueueReplaceState(t,t.state,null)}function r_(e,t,i,a){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=WT,D1(e);var m=t.contextType;typeof m=="object"&&m!==null?c.context=us(m):(m=bo(t)?Zu:Wi.current,c.context=Ah(e,m)),c.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(n_(e,t,m,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&sy.enqueueReplaceState(c,c.state,null),fg(e,i,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function $d(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Ct(309));var a=i.stateNode}if(!a)throw Error(Ct(147,e));var c=a,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(f){var u=c.refs;u===WT&&(u=c.refs={}),f===null?delete u[m]:u[m]=f},t._stringRef=m,t)}if(typeof e!="string")throw Error(Ct(284));if(!i._owner)throw Error(Ct(290,e))}return e}function sm(e,t){throw e=Object.prototype.toString.call(t),Error(Ct(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _2(e){var t=e._init;return t(e._payload)}function ZT(e){function t(Y,q){if(e){var V=Y.deletions;V===null?(Y.deletions=[q],Y.flags|=16):V.push(q)}}function i(Y,q){if(!e)return null;for(;q!==null;)t(Y,q),q=q.sibling;return null}function a(Y,q){for(Y=new Map;q!==null;)q.key!==null?Y.set(q.key,q):Y.set(q.index,q),q=q.sibling;return Y}function c(Y,q){return Y=eu(Y,q),Y.index=0,Y.sibling=null,Y}function m(Y,q,V){return Y.index=V,e?(V=Y.alternate,V!==null?(V=V.index,V<q?(Y.flags|=2,q):V):(Y.flags|=2,q)):(Y.flags|=1048576,q)}function f(Y){return e&&Y.alternate===null&&(Y.flags|=2),Y}function u(Y,q,V,se){return q===null||q.tag!==6?(q=W0(V,Y.mode,se),q.return=Y,q):(q=c(q,V),q.return=Y,q)}function S(Y,q,V,se){var X=V.type;return X===rh?k(Y,q,V.props.children,se,V.key):q!==null&&(q.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Bl&&_2(X)===q.type)?(se=c(q,V.props),se.ref=$d(Y,q,V),se.return=Y,se):(se=$m(V.type,V.key,V.props,null,Y.mode,se),se.ref=$d(Y,q,V),se.return=Y,se)}function C(Y,q,V,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==V.containerInfo||q.stateNode.implementation!==V.implementation?(q=H0(V,Y.mode,se),q.return=Y,q):(q=c(q,V.children||[]),q.return=Y,q)}function k(Y,q,V,se,X){return q===null||q.tag!==7?(q=Hu(V,Y.mode,se,X),q.return=Y,q):(q=c(q,V),q.return=Y,q)}function b(Y,q,V){if(typeof q=="string"&&q!==""||typeof q=="number")return q=W0(""+q,Y.mode,V),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Xp:return V=$m(q.type,q.key,q.props,null,Y.mode,V),V.ref=$d(Y,null,q),V.return=Y,V;case nh:return q=H0(q,Y.mode,V),q.return=Y,q;case Bl:var se=q._init;return b(Y,se(q._payload),V)}if(Zd(q)||Ld(q))return q=Hu(q,Y.mode,V,null),q.return=Y,q;sm(Y,q)}return null}function I(Y,q,V,se){var X=q!==null?q.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return X!==null?null:u(Y,q,""+V,se);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Xp:return V.key===X?S(Y,q,V,se):null;case nh:return V.key===X?C(Y,q,V,se):null;case Bl:return X=V._init,I(Y,q,X(V._payload),se)}if(Zd(V)||Ld(V))return X!==null?null:k(Y,q,V,se,null);sm(Y,V)}return null}function R(Y,q,V,se,X){if(typeof se=="string"&&se!==""||typeof se=="number")return Y=Y.get(V)||null,u(q,Y,""+se,X);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Xp:return Y=Y.get(se.key===null?V:se.key)||null,S(q,Y,se,X);case nh:return Y=Y.get(se.key===null?V:se.key)||null,C(q,Y,se,X);case Bl:var G=se._init;return R(Y,q,V,G(se._payload),X)}if(Zd(se)||Ld(se))return Y=Y.get(V)||null,k(q,Y,se,X,null);sm(q,se)}return null}function B(Y,q,V,se){for(var X=null,G=null,E=q,j=q=0,L=null;E!==null&&j<V.length;j++){E.index>j?(L=E,E=null):L=E.sibling;var ee=I(Y,E,V[j],se);if(ee===null){E===null&&(E=L);break}e&&E&&ee.alternate===null&&t(Y,E),q=m(ee,q,j),G===null?X=ee:G.sibling=ee,G=ee,E=L}if(j===V.length)return i(Y,E),yr&&Lu(Y,j),X;if(E===null){for(;j<V.length;j++)E=b(Y,V[j],se),E!==null&&(q=m(E,q,j),G===null?X=E:G.sibling=E,G=E);return yr&&Lu(Y,j),X}for(E=a(Y,E);j<V.length;j++)L=R(E,Y,j,V[j],se),L!==null&&(e&&L.alternate!==null&&E.delete(L.key===null?j:L.key),q=m(L,q,j),G===null?X=L:G.sibling=L,G=L);return e&&E.forEach(function(Z){return t(Y,Z)}),yr&&Lu(Y,j),X}function O(Y,q,V,se){var X=Ld(V);if(typeof X!="function")throw Error(Ct(150));if(V=X.call(V),V==null)throw Error(Ct(151));for(var G=X=null,E=q,j=q=0,L=null,ee=V.next();E!==null&&!ee.done;j++,ee=V.next()){E.index>j?(L=E,E=null):L=E.sibling;var Z=I(Y,E,ee.value,se);if(Z===null){E===null&&(E=L);break}e&&E&&Z.alternate===null&&t(Y,E),q=m(Z,q,j),G===null?X=Z:G.sibling=Z,G=Z,E=L}if(ee.done)return i(Y,E),yr&&Lu(Y,j),X;if(E===null){for(;!ee.done;j++,ee=V.next())ee=b(Y,ee.value,se),ee!==null&&(q=m(ee,q,j),G===null?X=ee:G.sibling=ee,G=ee);return yr&&Lu(Y,j),X}for(E=a(Y,E);!ee.done;j++,ee=V.next())ee=R(E,Y,j,ee.value,se),ee!==null&&(e&&ee.alternate!==null&&E.delete(ee.key===null?j:ee.key),q=m(ee,q,j),G===null?X=ee:G.sibling=ee,G=ee);return e&&E.forEach(function(ve){return t(Y,ve)}),yr&&Lu(Y,j),X}function he(Y,q,V,se){if(typeof V=="object"&&V!==null&&V.type===rh&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Xp:e:{for(var X=V.key,G=q;G!==null;){if(G.key===X){if(X=V.type,X===rh){if(G.tag===7){i(Y,G.sibling),q=c(G,V.props.children),q.return=Y,Y=q;break e}}else if(G.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Bl&&_2(X)===G.type){i(Y,G.sibling),q=c(G,V.props),q.ref=$d(Y,G,V),q.return=Y,Y=q;break e}i(Y,G);break}else t(Y,G);G=G.sibling}V.type===rh?(q=Hu(V.props.children,Y.mode,se,V.key),q.return=Y,Y=q):(se=$m(V.type,V.key,V.props,null,Y.mode,se),se.ref=$d(Y,q,V),se.return=Y,Y=se)}return f(Y);case nh:e:{for(G=V.key;q!==null;){if(q.key===G)if(q.tag===4&&q.stateNode.containerInfo===V.containerInfo&&q.stateNode.implementation===V.implementation){i(Y,q.sibling),q=c(q,V.children||[]),q.return=Y,Y=q;break e}else{i(Y,q);break}else t(Y,q);q=q.sibling}q=H0(V,Y.mode,se),q.return=Y,Y=q}return f(Y);case Bl:return G=V._init,he(Y,q,G(V._payload),se)}if(Zd(V))return B(Y,q,V,se);if(Ld(V))return O(Y,q,V,se);sm(Y,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,q!==null&&q.tag===6?(i(Y,q.sibling),q=c(q,V),q.return=Y,Y=q):(i(Y,q),q=W0(V,Y.mode,se),q.return=Y,Y=q),f(Y)):i(Y,q)}return he}var Mh=ZT(!0),qT=ZT(!1),Qf={},ga=uu(Qf),zf=uu(Qf),Ff=uu(Qf);function $u(e){if(e===Qf)throw Error(Ct(174));return e}function B1(e,t){switch(ur(Ff,t),ur(zf,e),ur(ga,Qf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ov(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ov(t,e)}fr(ga),ur(ga,t)}function zh(){fr(ga),fr(zf),fr(Ff)}function XT(e){$u(Ff.current);var t=$u(ga.current),i=Ov(t,e.type);t!==i&&(ur(zf,e),ur(ga,i))}function N1(e){zf.current===e&&(fr(ga),fr(zf))}var Tr=uu(0);function pg(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var B0=[];function U1(){for(var e=0;e<B0.length;e++)B0[e]._workInProgressVersionPrimary=null;B0.length=0}var Lm=nl.ReactCurrentDispatcher,N0=nl.ReactCurrentBatchConfig,Xu=0,Cr=null,Jr=null,mi=null,mg=!1,cf=!1,Rf=0,R3=0;function Ni(){throw Error(Ct(321))}function $1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Ls(e[i],t[i]))return!1;return!0}function V1(e,t,i,a,c,m){if(Xu=m,Cr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lm.current=e===null||e.memoizedState===null?D3:B3,e=i(a,c),cf){m=0;do{if(cf=!1,Rf=0,25<=m)throw Error(Ct(301));m+=1,mi=Jr=null,t.updateQueue=null,Lm.current=N3,e=i(a,c)}while(cf)}if(Lm.current=gg,t=Jr!==null&&Jr.next!==null,Xu=0,mi=Jr=Cr=null,mg=!1,t)throw Error(Ct(300));return e}function G1(){var e=Rf!==0;return Rf=0,e}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Cr.memoizedState=mi=e:mi=mi.next=e,mi}function cs(){if(Jr===null){var e=Cr.alternate;e=e!==null?e.memoizedState:null}else e=Jr.next;var t=mi===null?Cr.memoizedState:mi.next;if(t!==null)mi=t,Jr=e;else{if(e===null)throw Error(Ct(310));Jr=e,e={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},mi===null?Cr.memoizedState=mi=e:mi=mi.next=e}return mi}function Of(e,t){return typeof t=="function"?t(e):t}function U0(e){var t=cs(),i=t.queue;if(i===null)throw Error(Ct(311));i.lastRenderedReducer=e;var a=Jr,c=a.baseQueue,m=i.pending;if(m!==null){if(c!==null){var f=c.next;c.next=m.next,m.next=f}a.baseQueue=c=m,i.pending=null}if(c!==null){m=c.next,a=a.baseState;var u=f=null,S=null,C=m;do{var k=C.lane;if((Xu&k)===k)S!==null&&(S=S.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var b={lane:k,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};S===null?(u=S=b,f=a):S=S.next=b,Cr.lanes|=k,Ku|=k}C=C.next}while(C!==null&&C!==m);S===null?f=a:S.next=u,Ls(a,t.memoizedState)||(xo=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=S,i.lastRenderedState=a}if(e=i.interleaved,e!==null){c=e;do m=c.lane,Cr.lanes|=m,Ku|=m,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function $0(e){var t=cs(),i=t.queue;if(i===null)throw Error(Ct(311));i.lastRenderedReducer=e;var a=i.dispatch,c=i.pending,m=t.memoizedState;if(c!==null){i.pending=null;var f=c=c.next;do m=e(m,f.action),f=f.next;while(f!==c);Ls(m,t.memoizedState)||(xo=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),i.lastRenderedState=m}return[m,a]}function KT(){}function YT(e,t){var i=Cr,a=cs(),c=t(),m=!Ls(a.memoizedState,c);if(m&&(a.memoizedState=c,xo=!0),a=a.queue,W1(eI.bind(null,i,a,e),[e]),a.getSnapshot!==t||m||mi!==null&&mi.memoizedState.tag&1){if(i.flags|=2048,jf(9,QT.bind(null,i,a,c,t),void 0,null),gi===null)throw Error(Ct(349));Xu&30||JT(i,t,c)}return c}function JT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Cr.updateQueue,t===null?(t={lastEffect:null,stores:null},Cr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function QT(e,t,i,a){t.value=i,t.getSnapshot=a,tI(t)&&nI(e)}function eI(e,t,i){return i(function(){tI(t)&&nI(e)})}function tI(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Ls(e,i)}catch{return!0}}function nI(e){var t=Ka(e,1);t!==null&&js(t,e,1,-1)}function x2(e){var t=la();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Of,lastRenderedState:e},t.queue=e,e=e.dispatch=L3.bind(null,Cr,e),[t.memoizedState,e]}function jf(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Cr.updateQueue,t===null?(t={lastEffect:null,stores:null},Cr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function rI(){return cs().memoizedState}function Dm(e,t,i,a){var c=la();Cr.flags|=e,c.memoizedState=jf(1|t,i,void 0,a===void 0?null:a)}function ay(e,t,i,a){var c=cs();a=a===void 0?null:a;var m=void 0;if(Jr!==null){var f=Jr.memoizedState;if(m=f.destroy,a!==null&&$1(a,f.deps)){c.memoizedState=jf(t,i,m,a);return}}Cr.flags|=e,c.memoizedState=jf(1|t,i,m,a)}function w2(e,t){return Dm(8390656,8,e,t)}function W1(e,t){return ay(2048,8,e,t)}function iI(e,t){return ay(4,2,e,t)}function oI(e,t){return ay(4,4,e,t)}function sI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aI(e,t,i){return i=i!=null?i.concat([e]):null,ay(4,4,sI.bind(null,t,e),i)}function H1(){}function lI(e,t){var i=cs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&$1(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function uI(e,t){var i=cs();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&$1(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function cI(e,t,i){return Xu&21?(Ls(i,t)||(i=fT(),Cr.lanes|=i,Ku|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=i)}function O3(e,t){var i=Yn;Yn=i!==0&&4>i?i:4,e(!0);var a=N0.transition;N0.transition={};try{e(!1),t()}finally{Yn=i,N0.transition=a}}function hI(){return cs().memoizedState}function j3(e,t,i){var a=Ql(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},dI(e))fI(t,i);else if(i=VT(e,t,i,a),i!==null){var c=io();js(i,e,a,c),pI(i,t,a)}}function L3(e,t,i){var a=Ql(e),c={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(dI(e))fI(t,c);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var f=t.lastRenderedState,u=m(f,i);if(c.hasEagerState=!0,c.eagerState=u,Ls(u,f)){var S=t.interleaved;S===null?(c.next=c,L1(t)):(c.next=S.next,S.next=c),t.interleaved=c;return}}catch{}finally{}i=VT(e,t,c,a),i!==null&&(c=io(),js(i,e,a,c),pI(i,t,a))}}function dI(e){var t=e.alternate;return e===Cr||t!==null&&t===Cr}function fI(e,t){cf=mg=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function pI(e,t,i){if(i&4194240){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,S1(e,i)}}var gg={readContext:us,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},D3={readContext:us,useCallback:function(e,t){return la().memoizedState=[e,t===void 0?null:t],e},useContext:us,useEffect:w2,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Dm(4194308,4,sI.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Dm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dm(4,2,e,t)},useMemo:function(e,t){var i=la();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=la();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=j3.bind(null,Cr,e),[a.memoizedState,e]},useRef:function(e){var t=la();return e={current:e},t.memoizedState=e},useState:x2,useDebugValue:H1,useDeferredValue:function(e){return la().memoizedState=e},useTransition:function(){var e=x2(!1),t=e[0];return e=O3.bind(null,e[1]),la().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Cr,c=la();if(yr){if(i===void 0)throw Error(Ct(407));i=i()}else{if(i=t(),gi===null)throw Error(Ct(349));Xu&30||JT(a,t,i)}c.memoizedState=i;var m={value:i,getSnapshot:t};return c.queue=m,w2(eI.bind(null,a,m,e),[e]),a.flags|=2048,jf(9,QT.bind(null,a,m,i,t),void 0,null),i},useId:function(){var e=la(),t=gi.identifierPrefix;if(yr){var i=Ha,a=Wa;i=(a&~(1<<32-Os(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=Rf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=R3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B3={readContext:us,useCallback:lI,useContext:us,useEffect:W1,useImperativeHandle:aI,useInsertionEffect:iI,useLayoutEffect:oI,useMemo:uI,useReducer:U0,useRef:rI,useState:function(){return U0(Of)},useDebugValue:H1,useDeferredValue:function(e){var t=cs();return cI(t,Jr.memoizedState,e)},useTransition:function(){var e=U0(Of)[0],t=cs().memoizedState;return[e,t]},useMutableSource:KT,useSyncExternalStore:YT,useId:hI,unstable_isNewReconciler:!1},N3={readContext:us,useCallback:lI,useContext:us,useEffect:W1,useImperativeHandle:aI,useInsertionEffect:iI,useLayoutEffect:oI,useMemo:uI,useReducer:$0,useRef:rI,useState:function(){return $0(Of)},useDebugValue:H1,useDeferredValue:function(e){var t=cs();return Jr===null?t.memoizedState=e:cI(t,Jr.memoizedState,e)},useTransition:function(){var e=$0(Of)[0],t=cs().memoizedState;return[e,t]},useMutableSource:KT,useSyncExternalStore:YT,useId:hI,unstable_isNewReconciler:!1};function Fh(e,t){try{var i="",a=t;do i+=pM(a),a=a.return;while(a);var c=i}catch(m){c=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:c,digest:null}}function V0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function i_(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var U3=typeof WeakMap=="function"?WeakMap:Map;function mI(e,t,i){i=Za(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){vg||(vg=!0,p_=a),i_(e,t)},i}function gI(e,t,i){i=Za(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;i.payload=function(){return a(c)},i.callback=function(){i_(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(i.callback=function(){i_(e,t),typeof a!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),i}function b2(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new U3;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(i)||(c.add(i),e=t4.bind(null,e,t,i),t.then(e,e))}function S2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function E2(e,t,i,a,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Za(-1,1),t.tag=2,Yl(i,t,1))),i.lanes|=1),e)}var $3=nl.ReactCurrentOwner,xo=!1;function eo(e,t,i,a){t.child=e===null?qT(t,null,i,a):Mh(t,e.child,i,a)}function T2(e,t,i,a,c){i=i.render;var m=t.ref;return Sh(t,c),a=V1(e,t,i,a,m,c),i=G1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ya(e,t,c)):(yr&&i&&M1(t),t.flags|=1,eo(e,t,a,c),t.child)}function I2(e,t,i,a,c){if(e===null){var m=i.type;return typeof m=="function"&&!ex(m)&&m.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=m,yI(e,t,m,a,c)):(e=$m(i.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&c)){var f=m.memoizedProps;if(i=i.compare,i=i!==null?i:Pf,i(f,a)&&e.ref===t.ref)return Ya(e,t,c)}return t.flags|=1,e=eu(m,a),e.ref=t.ref,e.return=t,t.child=e}function yI(e,t,i,a,c){if(e!==null){var m=e.memoizedProps;if(Pf(m,a)&&e.ref===t.ref)if(xo=!1,t.pendingProps=a=m,(e.lanes&c)!==0)e.flags&131072&&(xo=!0);else return t.lanes=e.lanes,Ya(e,t,c)}return o_(e,t,i,a,c)}function vI(e,t,i){var a=t.pendingProps,c=a.children,m=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur(fh,Do),Do|=i;else{if(!(i&1073741824))return e=m!==null?m.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ur(fh,Do),Do|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=m!==null?m.baseLanes:i,ur(fh,Do),Do|=a}else m!==null?(a=m.baseLanes|i,t.memoizedState=null):a=i,ur(fh,Do),Do|=a;return eo(e,t,c,i),t.child}function _I(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function o_(e,t,i,a,c){var m=bo(i)?Zu:Wi.current;return m=Ah(t,m),Sh(t,c),i=V1(e,t,i,a,m,c),a=G1(),e!==null&&!xo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ya(e,t,c)):(yr&&a&&M1(t),t.flags|=1,eo(e,t,i,c),t.child)}function C2(e,t,i,a,c){if(bo(i)){var m=!0;lg(t)}else m=!1;if(Sh(t,c),t.stateNode===null)Bm(e,t),HT(t,i,a),r_(t,i,a,c),a=!0;else if(e===null){var f=t.stateNode,u=t.memoizedProps;f.props=u;var S=f.context,C=i.contextType;typeof C=="object"&&C!==null?C=us(C):(C=bo(i)?Zu:Wi.current,C=Ah(t,C));var k=i.getDerivedStateFromProps,b=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function";b||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==a||S!==C)&&v2(t,f,a,C),Nl=!1;var I=t.memoizedState;f.state=I,fg(t,a,f,c),S=t.memoizedState,u!==a||I!==S||wo.current||Nl?(typeof k=="function"&&(n_(t,i,k,a),S=t.memoizedState),(u=Nl||y2(t,i,u,a,I,S,C))?(b||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=S),f.props=a,f.state=S,f.context=C,a=u):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,GT(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:Ps(t.type,u),f.props=C,b=t.pendingProps,I=f.context,S=i.contextType,typeof S=="object"&&S!==null?S=us(S):(S=bo(i)?Zu:Wi.current,S=Ah(t,S));var R=i.getDerivedStateFromProps;(k=typeof R=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==b||I!==S)&&v2(t,f,a,S),Nl=!1,I=t.memoizedState,f.state=I,fg(t,a,f,c);var B=t.memoizedState;u!==b||I!==B||wo.current||Nl?(typeof R=="function"&&(n_(t,i,R,a),B=t.memoizedState),(C=Nl||y2(t,i,C,a,I,B,S)||!1)?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,B,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,B,S)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=B),f.props=a,f.state=B,f.context=S,a=C):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),a=!1)}return s_(e,t,i,a,m,c)}function s_(e,t,i,a,c,m){_I(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return c&&d2(t,i,!1),Ya(e,t,m);a=t.stateNode,$3.current=t;var u=f&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=Mh(t,e.child,null,m),t.child=Mh(t,null,u,m)):eo(e,t,u,m),t.memoizedState=a.state,c&&d2(t,i,!0),t.child}function xI(e){var t=e.stateNode;t.pendingContext?h2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&h2(e,t.context,!1),B1(e,t.containerInfo)}function P2(e,t,i,a,c){return kh(),F1(c),t.flags|=256,eo(e,t,i,a),t.child}var a_={dehydrated:null,treeContext:null,retryLane:0};function l_(e){return{baseLanes:e,cachePool:null,transitions:null}}function wI(e,t,i){var a=t.pendingProps,c=Tr.current,m=!1,f=(t.flags&128)!==0,u;if((u=f)||(u=e!==null&&e.memoizedState===null?!1:(c&2)!==0),u?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ur(Tr,c&1),e===null)return e_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,m?(a=t.mode,m=t.child,f={mode:"hidden",children:f},!(a&1)&&m!==null?(m.childLanes=0,m.pendingProps=f):m=cy(f,a,0,null),e=Hu(e,a,i,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=l_(i),t.memoizedState=a_,e):Z1(t,f));if(c=e.memoizedState,c!==null&&(u=c.dehydrated,u!==null))return V3(e,t,f,a,u,c,i);if(m){m=a.fallback,f=t.mode,c=e.child,u=c.sibling;var S={mode:"hidden",children:a.children};return!(f&1)&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=S,t.deletions=null):(a=eu(c,S),a.subtreeFlags=c.subtreeFlags&14680064),u!==null?m=eu(u,m):(m=Hu(m,f,i,null),m.flags|=2),m.return=t,a.return=t,a.sibling=m,t.child=a,a=m,m=t.child,f=e.child.memoizedState,f=f===null?l_(i):{baseLanes:f.baseLanes|i,cachePool:null,transitions:f.transitions},m.memoizedState=f,m.childLanes=e.childLanes&~i,t.memoizedState=a_,a}return m=e.child,e=m.sibling,a=eu(m,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function Z1(e,t){return t=cy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function am(e,t,i,a){return a!==null&&F1(a),Mh(t,e.child,null,i),e=Z1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function V3(e,t,i,a,c,m,f){if(i)return t.flags&256?(t.flags&=-257,a=V0(Error(Ct(422))),am(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=a.fallback,c=t.mode,a=cy({mode:"visible",children:a.children},c,0,null),m=Hu(m,c,f,null),m.flags|=2,a.return=t,m.return=t,a.sibling=m,t.child=a,t.mode&1&&Mh(t,e.child,null,f),t.child.memoizedState=l_(f),t.memoizedState=a_,m);if(!(t.mode&1))return am(e,t,f,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var u=a.dgst;return a=u,m=Error(Ct(419)),a=V0(m,a,void 0),am(e,t,f,a)}if(u=(f&e.childLanes)!==0,xo||u){if(a=gi,a!==null){switch(f&-f){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(a.suspendedLanes|f)?0:c,c!==0&&c!==m.retryLane&&(m.retryLane=c,Ka(e,c),js(a,e,c,-1))}return Q1(),a=V0(Error(Ct(421))),am(e,t,f,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=n4.bind(null,e),c._reactRetry=t,null):(e=m.treeContext,$o=Kl(c.nextSibling),Vo=t,yr=!0,ks=null,e!==null&&(rs[is++]=Wa,rs[is++]=Ha,rs[is++]=qu,Wa=e.id,Ha=e.overflow,qu=t),t=Z1(t,a.children),t.flags|=4096,t)}function A2(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),t_(e.return,t,i)}function G0(e,t,i,a,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=a,m.tail=i,m.tailMode=c)}function bI(e,t,i){var a=t.pendingProps,c=a.revealOrder,m=a.tail;if(eo(e,t,a.children,i),a=Tr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&A2(e,i,t);else if(e.tag===19)A2(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ur(Tr,a),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&pg(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),G0(t,!1,c,i,m);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&pg(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}G0(t,!0,i,null,m);break;case"together":G0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ku|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ct(153));if(t.child!==null){for(e=t.child,i=eu(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=eu(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function G3(e,t,i){switch(t.tag){case 3:xI(t),kh();break;case 5:XT(t);break;case 1:bo(t.type)&&lg(t);break;case 4:B1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;ur(hg,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ur(Tr,Tr.current&1),t.flags|=128,null):i&t.child.childLanes?wI(e,t,i):(ur(Tr,Tr.current&1),e=Ya(e,t,i),e!==null?e.sibling:null);ur(Tr,Tr.current&1);break;case 19:if(a=(i&t.childLanes)!==0,e.flags&128){if(a)return bI(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ur(Tr,Tr.current),a)break;return null;case 22:case 23:return t.lanes=0,vI(e,t,i)}return Ya(e,t,i)}var SI,u_,EI,TI;SI=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};u_=function(){};EI=function(e,t,i,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,$u(ga.current);var m=null;switch(i){case"input":c=Mv(e,c),a=Mv(e,a),m=[];break;case"select":c=Pr({},c,{value:void 0}),a=Pr({},a,{value:void 0}),m=[];break;case"textarea":c=Rv(e,c),a=Rv(e,a),m=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=sg)}jv(i,a);var f;i=null;for(C in c)if(!a.hasOwnProperty(C)&&c.hasOwnProperty(C)&&c[C]!=null)if(C==="style"){var u=c[C];for(f in u)u.hasOwnProperty(f)&&(i||(i={}),i[f]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(wf.hasOwnProperty(C)?m||(m=[]):(m=m||[]).push(C,null));for(C in a){var S=a[C];if(u=c!=null?c[C]:void 0,a.hasOwnProperty(C)&&S!==u&&(S!=null||u!=null))if(C==="style")if(u){for(f in u)!u.hasOwnProperty(f)||S&&S.hasOwnProperty(f)||(i||(i={}),i[f]="");for(f in S)S.hasOwnProperty(f)&&u[f]!==S[f]&&(i||(i={}),i[f]=S[f])}else i||(m||(m=[]),m.push(C,i)),i=S;else C==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,u=u?u.__html:void 0,S!=null&&u!==S&&(m=m||[]).push(C,S)):C==="children"?typeof S!="string"&&typeof S!="number"||(m=m||[]).push(C,""+S):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(wf.hasOwnProperty(C)?(S!=null&&C==="onScroll"&&hr("scroll",e),m||u===S||(m=[])):(m=m||[]).push(C,S))}i&&(m=m||[]).push("style",i);var C=m;(t.updateQueue=C)&&(t.flags|=4)}};TI=function(e,t,i,a){i!==a&&(t.flags|=4)};function Vd(e,t){if(!yr)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ui(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function W3(e,t,i){var a=t.pendingProps;switch(z1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(t),null;case 1:return bo(t.type)&&ag(),Ui(t),null;case 3:return a=t.stateNode,zh(),fr(wo),fr(Wi),U1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(om(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ks!==null&&(y_(ks),ks=null))),u_(e,t),Ui(t),null;case 5:N1(t);var c=$u(Ff.current);if(i=t.type,e!==null&&t.stateNode!=null)EI(e,t,i,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Ct(166));return Ui(t),null}if(e=$u(ga.current),om(t)){a=t.stateNode,i=t.type;var m=t.memoizedProps;switch(a[ca]=t,a[Mf]=m,e=(t.mode&1)!==0,i){case"dialog":hr("cancel",a),hr("close",a);break;case"iframe":case"object":case"embed":hr("load",a);break;case"video":case"audio":for(c=0;c<Xd.length;c++)hr(Xd[c],a);break;case"source":hr("error",a);break;case"img":case"image":case"link":hr("error",a),hr("load",a);break;case"details":hr("toggle",a);break;case"input":Db(a,m),hr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!m.multiple},hr("invalid",a);break;case"textarea":Nb(a,m),hr("invalid",a)}jv(i,m),c=null;for(var f in m)if(m.hasOwnProperty(f)){var u=m[f];f==="children"?typeof u=="string"?a.textContent!==u&&(m.suppressHydrationWarning!==!0&&im(a.textContent,u,e),c=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(m.suppressHydrationWarning!==!0&&im(a.textContent,u,e),c=["children",""+u]):wf.hasOwnProperty(f)&&u!=null&&f==="onScroll"&&hr("scroll",a)}switch(i){case"input":Kp(a),Bb(a,m,!0);break;case"textarea":Kp(a),Ub(a);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(a.onclick=sg)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(i,{is:a.is}):(e=f.createElement(i),i==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,i),e[ca]=t,e[Mf]=a,SI(e,t,!1,!1),t.stateNode=e;e:{switch(f=Lv(i,a),i){case"dialog":hr("cancel",e),hr("close",e),c=a;break;case"iframe":case"object":case"embed":hr("load",e),c=a;break;case"video":case"audio":for(c=0;c<Xd.length;c++)hr(Xd[c],e);c=a;break;case"source":hr("error",e),c=a;break;case"img":case"image":case"link":hr("error",e),hr("load",e),c=a;break;case"details":hr("toggle",e),c=a;break;case"input":Db(e,a),c=Mv(e,a),hr("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Pr({},a,{value:void 0}),hr("invalid",e);break;case"textarea":Nb(e,a),c=Rv(e,a),hr("invalid",e);break;default:c=a}jv(i,c),u=c;for(m in u)if(u.hasOwnProperty(m)){var S=u[m];m==="style"?tT(e,S):m==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&QE(e,S)):m==="children"?typeof S=="string"?(i!=="textarea"||S!=="")&&bf(e,S):typeof S=="number"&&bf(e,""+S):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(wf.hasOwnProperty(m)?S!=null&&m==="onScroll"&&hr("scroll",e):S!=null&&y1(e,m,S,f))}switch(i){case"input":Kp(e),Bb(e,a,!1);break;case"textarea":Kp(e),Ub(e);break;case"option":a.value!=null&&e.setAttribute("value",""+nu(a.value));break;case"select":e.multiple=!!a.multiple,m=a.value,m!=null?_h(e,!!a.multiple,m,!1):a.defaultValue!=null&&_h(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=sg)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ui(t),null;case 6:if(e&&t.stateNode!=null)TI(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Ct(166));if(i=$u(Ff.current),$u(ga.current),om(t)){if(a=t.stateNode,i=t.memoizedProps,a[ca]=t,(m=a.nodeValue!==i)&&(e=Vo,e!==null))switch(e.tag){case 3:im(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&im(a.nodeValue,i,(e.mode&1)!==0)}m&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[ca]=t,t.stateNode=a}return Ui(t),null;case 13:if(fr(Tr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yr&&$o!==null&&t.mode&1&&!(t.flags&128))$T(),kh(),t.flags|=98560,m=!1;else if(m=om(t),a!==null&&a.dehydrated!==null){if(e===null){if(!m)throw Error(Ct(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(Ct(317));m[ca]=t}else kh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ui(t),m=!1}else ks!==null&&(y_(ks),ks=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Tr.current&1?Qr===0&&(Qr=3):Q1())),t.updateQueue!==null&&(t.flags|=4),Ui(t),null);case 4:return zh(),u_(e,t),e===null&&Af(t.stateNode.containerInfo),Ui(t),null;case 10:return j1(t.type._context),Ui(t),null;case 17:return bo(t.type)&&ag(),Ui(t),null;case 19:if(fr(Tr),m=t.memoizedState,m===null)return Ui(t),null;if(a=(t.flags&128)!==0,f=m.rendering,f===null)if(a)Vd(m,!1);else{if(Qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=pg(e),f!==null){for(t.flags|=128,Vd(m,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)m=i,e=a,m.flags&=14680066,f=m.alternate,f===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=f.childLanes,m.lanes=f.lanes,m.child=f.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=f.memoizedProps,m.memoizedState=f.memoizedState,m.updateQueue=f.updateQueue,m.type=f.type,e=f.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return ur(Tr,Tr.current&1|2),t.child}e=e.sibling}m.tail!==null&&Wr()>Rh&&(t.flags|=128,a=!0,Vd(m,!1),t.lanes=4194304)}else{if(!a)if(e=pg(f),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Vd(m,!0),m.tail===null&&m.tailMode==="hidden"&&!f.alternate&&!yr)return Ui(t),null}else 2*Wr()-m.renderingStartTime>Rh&&i!==1073741824&&(t.flags|=128,a=!0,Vd(m,!1),t.lanes=4194304);m.isBackwards?(f.sibling=t.child,t.child=f):(i=m.last,i!==null?i.sibling=f:t.child=f,m.last=f)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=Wr(),t.sibling=null,i=Tr.current,ur(Tr,a?i&1|2:i&1),t):(Ui(t),null);case 22:case 23:return J1(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Do&1073741824&&(Ui(t),t.subtreeFlags&6&&(t.flags|=8192)):Ui(t),null;case 24:return null;case 25:return null}throw Error(Ct(156,t.tag))}function H3(e,t){switch(z1(t),t.tag){case 1:return bo(t.type)&&ag(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zh(),fr(wo),fr(Wi),U1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return N1(t),null;case 13:if(fr(Tr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ct(340));kh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fr(Tr),null;case 4:return zh(),null;case 10:return j1(t.type._context),null;case 22:case 23:return J1(),null;case 24:return null;default:return null}}var lm=!1,Vi=!1,Z3=typeof WeakSet=="function"?WeakSet:Set,on=null;function dh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Or(e,t,a)}else i.current=null}function c_(e,t,i){try{i()}catch(a){Or(e,t,a)}}var k2=!1;function q3(e,t){if(Zv=rg,e=AT(),k1(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var c=a.anchorOffset,m=a.focusNode;a=a.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var f=0,u=-1,S=-1,C=0,k=0,b=e,I=null;t:for(;;){for(var R;b!==i||c!==0&&b.nodeType!==3||(u=f+c),b!==m||a!==0&&b.nodeType!==3||(S=f+a),b.nodeType===3&&(f+=b.nodeValue.length),(R=b.firstChild)!==null;)I=b,b=R;for(;;){if(b===e)break t;if(I===i&&++C===c&&(u=f),I===m&&++k===a&&(S=f),(R=b.nextSibling)!==null)break;b=I,I=b.parentNode}b=R}i=u===-1||S===-1?null:{start:u,end:S}}else i=null}i=i||{start:0,end:0}}else i=null;for(qv={focusedElem:e,selectionRange:i},rg=!1,on=t;on!==null;)if(t=on,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,on=e;else for(;on!==null;){t=on;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var O=B.memoizedProps,he=B.memoizedState,Y=t.stateNode,q=Y.getSnapshotBeforeUpdate(t.elementType===t.type?O:Ps(t.type,O),he);Y.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ct(163))}}catch(se){Or(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,on=e;break}on=t.return}return B=k2,k2=!1,B}function hf(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var m=c.destroy;c.destroy=void 0,m!==void 0&&c_(t,i,m)}c=c.next}while(c!==a)}}function ly(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function h_(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function II(e){var t=e.alternate;t!==null&&(e.alternate=null,II(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ca],delete t[Mf],delete t[Yv],delete t[k3],delete t[M3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function CI(e){return e.tag===5||e.tag===3||e.tag===4}function M2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||CI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function d_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=sg));else if(a!==4&&(e=e.child,e!==null))for(d_(e,t,i),e=e.sibling;e!==null;)d_(e,t,i),e=e.sibling}function f_(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(f_(e,t,i),e=e.sibling;e!==null;)f_(e,t,i),e=e.sibling}var Ai=null,As=!1;function Ll(e,t,i){for(i=i.child;i!==null;)PI(e,t,i),i=i.sibling}function PI(e,t,i){if(ma&&typeof ma.onCommitFiberUnmount=="function")try{ma.onCommitFiberUnmount(ey,i)}catch{}switch(i.tag){case 5:Vi||dh(i,t);case 6:var a=Ai,c=As;Ai=null,Ll(e,t,i),Ai=a,As=c,Ai!==null&&(As?(e=Ai,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ai.removeChild(i.stateNode));break;case 18:Ai!==null&&(As?(e=Ai,i=i.stateNode,e.nodeType===8?L0(e.parentNode,i):e.nodeType===1&&L0(e,i),If(e)):L0(Ai,i.stateNode));break;case 4:a=Ai,c=As,Ai=i.stateNode.containerInfo,As=!0,Ll(e,t,i),Ai=a,As=c;break;case 0:case 11:case 14:case 15:if(!Vi&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var m=c,f=m.destroy;m=m.tag,f!==void 0&&(m&2||m&4)&&c_(i,t,f),c=c.next}while(c!==a)}Ll(e,t,i);break;case 1:if(!Vi&&(dh(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(u){Or(i,t,u)}Ll(e,t,i);break;case 21:Ll(e,t,i);break;case 22:i.mode&1?(Vi=(a=Vi)||i.memoizedState!==null,Ll(e,t,i),Vi=a):Ll(e,t,i);break;default:Ll(e,t,i)}}function z2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Z3),t.forEach(function(a){var c=r4.bind(null,e,a);i.has(a)||(i.add(a),a.then(c,c))})}}function Cs(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];try{var m=e,f=t,u=f;e:for(;u!==null;){switch(u.tag){case 5:Ai=u.stateNode,As=!1;break e;case 3:Ai=u.stateNode.containerInfo,As=!0;break e;case 4:Ai=u.stateNode.containerInfo,As=!0;break e}u=u.return}if(Ai===null)throw Error(Ct(160));PI(m,f,c),Ai=null,As=!1;var S=c.alternate;S!==null&&(S.return=null),c.return=null}catch(C){Or(c,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AI(t,e),t=t.sibling}function AI(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cs(t,e),aa(e),a&4){try{hf(3,e,e.return),ly(3,e)}catch(O){Or(e,e.return,O)}try{hf(5,e,e.return)}catch(O){Or(e,e.return,O)}}break;case 1:Cs(t,e),aa(e),a&512&&i!==null&&dh(i,i.return);break;case 5:if(Cs(t,e),aa(e),a&512&&i!==null&&dh(i,i.return),e.flags&32){var c=e.stateNode;try{bf(c,"")}catch(O){Or(e,e.return,O)}}if(a&4&&(c=e.stateNode,c!=null)){var m=e.memoizedProps,f=i!==null?i.memoizedProps:m,u=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{u==="input"&&m.type==="radio"&&m.name!=null&&KE(c,m),Lv(u,f);var C=Lv(u,m);for(f=0;f<S.length;f+=2){var k=S[f],b=S[f+1];k==="style"?tT(c,b):k==="dangerouslySetInnerHTML"?QE(c,b):k==="children"?bf(c,b):y1(c,k,b,C)}switch(u){case"input":zv(c,m);break;case"textarea":YE(c,m);break;case"select":var I=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!m.multiple;var R=m.value;R!=null?_h(c,!!m.multiple,R,!1):I!==!!m.multiple&&(m.defaultValue!=null?_h(c,!!m.multiple,m.defaultValue,!0):_h(c,!!m.multiple,m.multiple?[]:"",!1))}c[Mf]=m}catch(O){Or(e,e.return,O)}}break;case 6:if(Cs(t,e),aa(e),a&4){if(e.stateNode===null)throw Error(Ct(162));c=e.stateNode,m=e.memoizedProps;try{c.nodeValue=m}catch(O){Or(e,e.return,O)}}break;case 3:if(Cs(t,e),aa(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{If(t.containerInfo)}catch(O){Or(e,e.return,O)}break;case 4:Cs(t,e),aa(e);break;case 13:Cs(t,e),aa(e),c=e.child,c.flags&8192&&(m=c.memoizedState!==null,c.stateNode.isHidden=m,!m||c.alternate!==null&&c.alternate.memoizedState!==null||(K1=Wr())),a&4&&z2(e);break;case 22:if(k=i!==null&&i.memoizedState!==null,e.mode&1?(Vi=(C=Vi)||k,Cs(t,e),Vi=C):Cs(t,e),aa(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!k&&e.mode&1)for(on=e,k=e.child;k!==null;){for(b=on=k;on!==null;){switch(I=on,R=I.child,I.tag){case 0:case 11:case 14:case 15:hf(4,I,I.return);break;case 1:dh(I,I.return);var B=I.stateNode;if(typeof B.componentWillUnmount=="function"){a=I,i=I.return;try{t=a,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(O){Or(a,i,O)}}break;case 5:dh(I,I.return);break;case 22:if(I.memoizedState!==null){R2(b);continue}}R!==null?(R.return=I,on=R):R2(b)}k=k.sibling}e:for(k=null,b=e;;){if(b.tag===5){if(k===null){k=b;try{c=b.stateNode,C?(m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(u=b.stateNode,S=b.memoizedProps.style,f=S!=null&&S.hasOwnProperty("display")?S.display:null,u.style.display=eT("display",f))}catch(O){Or(e,e.return,O)}}}else if(b.tag===6){if(k===null)try{b.stateNode.nodeValue=C?"":b.memoizedProps}catch(O){Or(e,e.return,O)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;k===b&&(k=null),b=b.return}k===b&&(k=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Cs(t,e),aa(e),a&4&&z2(e);break;case 21:break;default:Cs(t,e),aa(e)}}function aa(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(CI(i)){var a=i;break e}i=i.return}throw Error(Ct(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(bf(c,""),a.flags&=-33);var m=M2(e);f_(e,m,c);break;case 3:case 4:var f=a.stateNode.containerInfo,u=M2(e);d_(e,u,f);break;default:throw Error(Ct(161))}}catch(S){Or(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function X3(e,t,i){on=e,kI(e)}function kI(e,t,i){for(var a=(e.mode&1)!==0;on!==null;){var c=on,m=c.child;if(c.tag===22&&a){var f=c.memoizedState!==null||lm;if(!f){var u=c.alternate,S=u!==null&&u.memoizedState!==null||Vi;u=lm;var C=Vi;if(lm=f,(Vi=S)&&!C)for(on=c;on!==null;)f=on,S=f.child,f.tag===22&&f.memoizedState!==null?O2(c):S!==null?(S.return=f,on=S):O2(c);for(;m!==null;)on=m,kI(m),m=m.sibling;on=c,lm=u,Vi=C}F2(e)}else c.subtreeFlags&8772&&m!==null?(m.return=c,on=m):F2(e)}}function F2(e){for(;on!==null;){var t=on;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vi||ly(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Vi)if(i===null)a.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ps(t.type,i.memoizedProps);a.componentDidUpdate(c,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&g2(t,m,a);break;case 3:var f=t.updateQueue;if(f!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}g2(t,f,i)}break;case 5:var u=t.stateNode;if(i===null&&t.flags&4){i=u;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&i.focus();break;case"img":S.src&&(i.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var k=C.memoizedState;if(k!==null){var b=k.dehydrated;b!==null&&If(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ct(163))}Vi||t.flags&512&&h_(t)}catch(I){Or(t,t.return,I)}}if(t===e){on=null;break}if(i=t.sibling,i!==null){i.return=t.return,on=i;break}on=t.return}}function R2(e){for(;on!==null;){var t=on;if(t===e){on=null;break}var i=t.sibling;if(i!==null){i.return=t.return,on=i;break}on=t.return}}function O2(e){for(;on!==null;){var t=on;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{ly(4,t)}catch(S){Or(t,i,S)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(S){Or(t,c,S)}}var m=t.return;try{h_(t)}catch(S){Or(t,m,S)}break;case 5:var f=t.return;try{h_(t)}catch(S){Or(t,f,S)}}}catch(S){Or(t,t.return,S)}if(t===e){on=null;break}var u=t.sibling;if(u!==null){u.return=t.return,on=u;break}on=t.return}}var K3=Math.ceil,yg=nl.ReactCurrentDispatcher,q1=nl.ReactCurrentOwner,ls=nl.ReactCurrentBatchConfig,$n=0,gi=null,qr=null,Mi=0,Do=0,fh=uu(0),Qr=0,Lf=null,Ku=0,uy=0,X1=0,df=null,vo=null,K1=0,Rh=1/0,Ua=null,vg=!1,p_=null,Jl=null,um=!1,Hl=null,_g=0,ff=0,m_=null,Nm=-1,Um=0;function io(){return $n&6?Wr():Nm!==-1?Nm:Nm=Wr()}function Ql(e){return e.mode&1?$n&2&&Mi!==0?Mi&-Mi:F3.transition!==null?(Um===0&&(Um=fT()),Um):(e=Yn,e!==0||(e=window.event,e=e===void 0?16:xT(e.type)),e):1}function js(e,t,i,a){if(50<ff)throw ff=0,m_=null,Error(Ct(185));Kf(e,i,a),(!($n&2)||e!==gi)&&(e===gi&&(!($n&2)&&(uy|=i),Qr===4&&Gl(e,Mi)),So(e,a),i===1&&$n===0&&!(t.mode&1)&&(Rh=Wr()+500,oy&&cu()))}function So(e,t){var i=e.callbackNode;FM(e,t);var a=ng(e,e===gi?Mi:0);if(a===0)i!==null&&Gb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Gb(i),t===1)e.tag===0?z3(j2.bind(null,e)):BT(j2.bind(null,e)),P3(function(){!($n&6)&&cu()}),i=null;else{switch(pT(a)){case 1:i=b1;break;case 4:i=hT;break;case 16:i=tg;break;case 536870912:i=dT;break;default:i=tg}i=DI(i,MI.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function MI(e,t){if(Nm=-1,Um=0,$n&6)throw Error(Ct(327));var i=e.callbackNode;if(Eh()&&e.callbackNode!==i)return null;var a=ng(e,e===gi?Mi:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=xg(e,a);else{t=a;var c=$n;$n|=2;var m=FI();(gi!==e||Mi!==t)&&(Ua=null,Rh=Wr()+500,Wu(e,t));do try{Q3();break}catch(u){zI(e,u)}while(!0);O1(),yg.current=m,$n=c,qr!==null?t=0:(gi=null,Mi=0,t=Qr)}if(t!==0){if(t===2&&(c=$v(e),c!==0&&(a=c,t=g_(e,c))),t===1)throw i=Lf,Wu(e,0),Gl(e,a),So(e,Wr()),i;if(t===6)Gl(e,a);else{if(c=e.current.alternate,!(a&30)&&!Y3(c)&&(t=xg(e,a),t===2&&(m=$v(e),m!==0&&(a=m,t=g_(e,m))),t===1))throw i=Lf,Wu(e,0),Gl(e,a),So(e,Wr()),i;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(Ct(345));case 2:Du(e,vo,Ua);break;case 3:if(Gl(e,a),(a&130023424)===a&&(t=K1+500-Wr(),10<t)){if(ng(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){io(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Kv(Du.bind(null,e,vo,Ua),t);break}Du(e,vo,Ua);break;case 4:if(Gl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var f=31-Os(a);m=1<<f,f=t[f],f>c&&(c=f),a&=~m}if(a=c,a=Wr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*K3(a/1960))-a,10<a){e.timeoutHandle=Kv(Du.bind(null,e,vo,Ua),a);break}Du(e,vo,Ua);break;case 5:Du(e,vo,Ua);break;default:throw Error(Ct(329))}}}return So(e,Wr()),e.callbackNode===i?MI.bind(null,e):null}function g_(e,t){var i=df;return e.current.memoizedState.isDehydrated&&(Wu(e,t).flags|=256),e=xg(e,t),e!==2&&(t=vo,vo=i,t!==null&&y_(t)),e}function y_(e){vo===null?vo=e:vo.push.apply(vo,e)}function Y3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var c=i[a],m=c.getSnapshot;c=c.value;try{if(!Ls(m(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gl(e,t){for(t&=~X1,t&=~uy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Os(t),a=1<<i;e[i]=-1,t&=~a}}function j2(e){if($n&6)throw Error(Ct(327));Eh();var t=ng(e,0);if(!(t&1))return So(e,Wr()),null;var i=xg(e,t);if(e.tag!==0&&i===2){var a=$v(e);a!==0&&(t=a,i=g_(e,a))}if(i===1)throw i=Lf,Wu(e,0),Gl(e,t),So(e,Wr()),i;if(i===6)throw Error(Ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e,vo,Ua),So(e,Wr()),null}function Y1(e,t){var i=$n;$n|=1;try{return e(t)}finally{$n=i,$n===0&&(Rh=Wr()+500,oy&&cu())}}function Yu(e){Hl!==null&&Hl.tag===0&&!($n&6)&&Eh();var t=$n;$n|=1;var i=ls.transition,a=Yn;try{if(ls.transition=null,Yn=1,e)return e()}finally{Yn=a,ls.transition=i,$n=t,!($n&6)&&cu()}}function J1(){Do=fh.current,fr(fh)}function Wu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,C3(i)),qr!==null)for(i=qr.return;i!==null;){var a=i;switch(z1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ag();break;case 3:zh(),fr(wo),fr(Wi),U1();break;case 5:N1(a);break;case 4:zh();break;case 13:fr(Tr);break;case 19:fr(Tr);break;case 10:j1(a.type._context);break;case 22:case 23:J1()}i=i.return}if(gi=e,qr=e=eu(e.current,null),Mi=Do=t,Qr=0,Lf=null,X1=uy=Ku=0,vo=df=null,Uu!==null){for(t=0;t<Uu.length;t++)if(i=Uu[t],a=i.interleaved,a!==null){i.interleaved=null;var c=a.next,m=i.pending;if(m!==null){var f=m.next;m.next=c,a.next=f}i.pending=a}Uu=null}return e}function zI(e,t){do{var i=qr;try{if(O1(),Lm.current=gg,mg){for(var a=Cr.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}mg=!1}if(Xu=0,mi=Jr=Cr=null,cf=!1,Rf=0,q1.current=null,i===null||i.return===null){Qr=1,Lf=t,qr=null;break}e:{var m=e,f=i.return,u=i,S=t;if(t=Mi,u.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var C=S,k=u,b=k.tag;if(!(k.mode&1)&&(b===0||b===11||b===15)){var I=k.alternate;I?(k.updateQueue=I.updateQueue,k.memoizedState=I.memoizedState,k.lanes=I.lanes):(k.updateQueue=null,k.memoizedState=null)}var R=S2(f);if(R!==null){R.flags&=-257,E2(R,f,u,m,t),R.mode&1&&b2(m,C,t),t=R,S=C;var B=t.updateQueue;if(B===null){var O=new Set;O.add(S),t.updateQueue=O}else B.add(S);break e}else{if(!(t&1)){b2(m,C,t),Q1();break e}S=Error(Ct(426))}}else if(yr&&u.mode&1){var he=S2(f);if(he!==null){!(he.flags&65536)&&(he.flags|=256),E2(he,f,u,m,t),F1(Fh(S,u));break e}}m=S=Fh(S,u),Qr!==4&&(Qr=2),df===null?df=[m]:df.push(m),m=f;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var Y=mI(m,S,t);m2(m,Y);break e;case 1:u=S;var q=m.type,V=m.stateNode;if(!(m.flags&128)&&(typeof q.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Jl===null||!Jl.has(V)))){m.flags|=65536,t&=-t,m.lanes|=t;var se=gI(m,u,t);m2(m,se);break e}}m=m.return}while(m!==null)}OI(i)}catch(X){t=X,qr===i&&i!==null&&(qr=i=i.return);continue}break}while(!0)}function FI(){var e=yg.current;return yg.current=gg,e===null?gg:e}function Q1(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),gi===null||!(Ku&268435455)&&!(uy&268435455)||Gl(gi,Mi)}function xg(e,t){var i=$n;$n|=2;var a=FI();(gi!==e||Mi!==t)&&(Ua=null,Wu(e,t));do try{J3();break}catch(c){zI(e,c)}while(!0);if(O1(),$n=i,yg.current=a,qr!==null)throw Error(Ct(261));return gi=null,Mi=0,Qr}function J3(){for(;qr!==null;)RI(qr)}function Q3(){for(;qr!==null&&!EM();)RI(qr)}function RI(e){var t=LI(e.alternate,e,Do);e.memoizedProps=e.pendingProps,t===null?OI(e):qr=t,q1.current=null}function OI(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=H3(i,t),i!==null){i.flags&=32767,qr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qr=6,qr=null;return}}else if(i=W3(i,t,Do),i!==null){qr=i;return}if(t=t.sibling,t!==null){qr=t;return}qr=t=e}while(t!==null);Qr===0&&(Qr=5)}function Du(e,t,i){var a=Yn,c=ls.transition;try{ls.transition=null,Yn=1,e4(e,t,i,a)}finally{ls.transition=c,Yn=a}return null}function e4(e,t,i,a){do Eh();while(Hl!==null);if($n&6)throw Error(Ct(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(Ct(177));e.callbackNode=null,e.callbackPriority=0;var m=i.lanes|i.childLanes;if(RM(e,m),e===gi&&(qr=gi=null,Mi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||um||(um=!0,DI(tg,function(){return Eh(),null})),m=(i.flags&15990)!==0,i.subtreeFlags&15990||m){m=ls.transition,ls.transition=null;var f=Yn;Yn=1;var u=$n;$n|=4,q1.current=null,q3(e,i),AI(i,e),x3(qv),rg=!!Zv,qv=Zv=null,e.current=i,X3(i),TM(),$n=u,Yn=f,ls.transition=m}else e.current=i;if(um&&(um=!1,Hl=e,_g=c),m=e.pendingLanes,m===0&&(Jl=null),PM(i.stateNode),So(e,Wr()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],a(c.value,{componentStack:c.stack,digest:c.digest});if(vg)throw vg=!1,e=p_,p_=null,e;return _g&1&&e.tag!==0&&Eh(),m=e.pendingLanes,m&1?e===m_?ff++:(ff=0,m_=e):ff=0,cu(),null}function Eh(){if(Hl!==null){var e=pT(_g),t=ls.transition,i=Yn;try{if(ls.transition=null,Yn=16>e?16:e,Hl===null)var a=!1;else{if(e=Hl,Hl=null,_g=0,$n&6)throw Error(Ct(331));var c=$n;for($n|=4,on=e.current;on!==null;){var m=on,f=m.child;if(on.flags&16){var u=m.deletions;if(u!==null){for(var S=0;S<u.length;S++){var C=u[S];for(on=C;on!==null;){var k=on;switch(k.tag){case 0:case 11:case 15:hf(8,k,m)}var b=k.child;if(b!==null)b.return=k,on=b;else for(;on!==null;){k=on;var I=k.sibling,R=k.return;if(II(k),k===C){on=null;break}if(I!==null){I.return=R,on=I;break}on=R}}}var B=m.alternate;if(B!==null){var O=B.child;if(O!==null){B.child=null;do{var he=O.sibling;O.sibling=null,O=he}while(O!==null)}}on=m}}if(m.subtreeFlags&2064&&f!==null)f.return=m,on=f;else e:for(;on!==null;){if(m=on,m.flags&2048)switch(m.tag){case 0:case 11:case 15:hf(9,m,m.return)}var Y=m.sibling;if(Y!==null){Y.return=m.return,on=Y;break e}on=m.return}}var q=e.current;for(on=q;on!==null;){f=on;var V=f.child;if(f.subtreeFlags&2064&&V!==null)V.return=f,on=V;else e:for(f=q;on!==null;){if(u=on,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ly(9,u)}}catch(X){Or(u,u.return,X)}if(u===f){on=null;break e}var se=u.sibling;if(se!==null){se.return=u.return,on=se;break e}on=u.return}}if($n=c,cu(),ma&&typeof ma.onPostCommitFiberRoot=="function")try{ma.onPostCommitFiberRoot(ey,e)}catch{}a=!0}return a}finally{Yn=i,ls.transition=t}}return!1}function L2(e,t,i){t=Fh(i,t),t=mI(e,t,1),e=Yl(e,t,1),t=io(),e!==null&&(Kf(e,1,t),So(e,t))}function Or(e,t,i){if(e.tag===3)L2(e,e,i);else for(;t!==null;){if(t.tag===3){L2(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Jl===null||!Jl.has(a))){e=Fh(i,e),e=gI(t,e,1),t=Yl(t,e,1),e=io(),t!==null&&(Kf(t,1,e),So(t,e));break}}t=t.return}}function t4(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=io(),e.pingedLanes|=e.suspendedLanes&i,gi===e&&(Mi&i)===i&&(Qr===4||Qr===3&&(Mi&130023424)===Mi&&500>Wr()-K1?Wu(e,0):X1|=i),So(e,t)}function jI(e,t){t===0&&(e.mode&1?(t=Qp,Qp<<=1,!(Qp&130023424)&&(Qp=4194304)):t=1);var i=io();e=Ka(e,t),e!==null&&(Kf(e,t,i),So(e,i))}function n4(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),jI(e,i)}function r4(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Ct(314))}a!==null&&a.delete(t),jI(e,i)}var LI;LI=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||wo.current)xo=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return xo=!1,G3(e,t,i);xo=!!(e.flags&131072)}else xo=!1,yr&&t.flags&1048576&&NT(t,cg,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Bm(e,t),e=t.pendingProps;var c=Ah(t,Wi.current);Sh(t,i),c=V1(null,t,a,e,c,i);var m=G1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(a)?(m=!0,lg(t)):m=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,D1(t),c.updater=sy,t.stateNode=c,c._reactInternals=t,r_(t,a,e,i),t=s_(null,t,a,!0,m,i)):(t.tag=0,yr&&m&&M1(t),eo(null,t,c,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Bm(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=o4(a),e=Ps(a,e),c){case 0:t=o_(null,t,a,e,i);break e;case 1:t=C2(null,t,a,e,i);break e;case 11:t=T2(null,t,a,e,i);break e;case 14:t=I2(null,t,a,Ps(a.type,e),i);break e}throw Error(Ct(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),o_(e,t,a,c,i);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),C2(e,t,a,c,i);case 3:e:{if(xI(t),e===null)throw Error(Ct(387));a=t.pendingProps,m=t.memoizedState,c=m.element,GT(e,t),fg(t,a,null,i);var f=t.memoizedState;if(a=f.element,m.isDehydrated)if(m={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){c=Fh(Error(Ct(423)),t),t=P2(e,t,a,i,c);break e}else if(a!==c){c=Fh(Error(Ct(424)),t),t=P2(e,t,a,i,c);break e}else for($o=Kl(t.stateNode.containerInfo.firstChild),Vo=t,yr=!0,ks=null,i=qT(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(kh(),a===c){t=Ya(e,t,i);break e}eo(e,t,a,i)}t=t.child}return t;case 5:return XT(t),e===null&&e_(t),a=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,f=c.children,Xv(a,c)?f=null:m!==null&&Xv(a,m)&&(t.flags|=32),_I(e,t),eo(e,t,f,i),t.child;case 6:return e===null&&e_(t),null;case 13:return wI(e,t,i);case 4:return B1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Mh(t,null,a,i):eo(e,t,a,i),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),T2(e,t,a,c,i);case 7:return eo(e,t,t.pendingProps,i),t.child;case 8:return eo(e,t,t.pendingProps.children,i),t.child;case 12:return eo(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,m=t.memoizedProps,f=c.value,ur(hg,a._currentValue),a._currentValue=f,m!==null)if(Ls(m.value,f)){if(m.children===c.children&&!wo.current){t=Ya(e,t,i);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var u=m.dependencies;if(u!==null){f=m.child;for(var S=u.firstContext;S!==null;){if(S.context===a){if(m.tag===1){S=Za(-1,i&-i),S.tag=2;var C=m.updateQueue;if(C!==null){C=C.shared;var k=C.pending;k===null?S.next=S:(S.next=k.next,k.next=S),C.pending=S}}m.lanes|=i,S=m.alternate,S!==null&&(S.lanes|=i),t_(m.return,i,t),u.lanes|=i;break}S=S.next}}else if(m.tag===10)f=m.type===t.type?null:m.child;else if(m.tag===18){if(f=m.return,f===null)throw Error(Ct(341));f.lanes|=i,u=f.alternate,u!==null&&(u.lanes|=i),t_(f,i,t),f=m.sibling}else f=m.child;if(f!==null)f.return=m;else for(f=m;f!==null;){if(f===t){f=null;break}if(m=f.sibling,m!==null){m.return=f.return,f=m;break}f=f.return}m=f}eo(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,Sh(t,i),c=us(c),a=a(c),t.flags|=1,eo(e,t,a,i),t.child;case 14:return a=t.type,c=Ps(a,t.pendingProps),c=Ps(a.type,c),I2(e,t,a,c,i);case 15:return yI(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:Ps(a,c),Bm(e,t),t.tag=1,bo(a)?(e=!0,lg(t)):e=!1,Sh(t,i),HT(t,a,c),r_(t,a,c,i),s_(null,t,a,!0,e,i);case 19:return bI(e,t,i);case 22:return vI(e,t,i)}throw Error(Ct(156,t.tag))};function DI(e,t){return cT(e,t)}function i4(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(e,t,i,a){return new i4(e,t,i,a)}function ex(e){return e=e.prototype,!(!e||!e.isReactComponent)}function o4(e){if(typeof e=="function")return ex(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_1)return 11;if(e===x1)return 14}return 2}function eu(e,t){var i=e.alternate;return i===null?(i=ss(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function $m(e,t,i,a,c,m){var f=2;if(a=e,typeof e=="function")ex(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case rh:return Hu(i.children,c,m,t);case v1:f=8,c|=8;break;case Cv:return e=ss(12,i,t,c|2),e.elementType=Cv,e.lanes=m,e;case Pv:return e=ss(13,i,t,c),e.elementType=Pv,e.lanes=m,e;case Av:return e=ss(19,i,t,c),e.elementType=Av,e.lanes=m,e;case ZE:return cy(i,c,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WE:f=10;break e;case HE:f=9;break e;case _1:f=11;break e;case x1:f=14;break e;case Bl:f=16,a=null;break e}throw Error(Ct(130,e==null?e:typeof e,""))}return t=ss(f,i,t,c),t.elementType=e,t.type=a,t.lanes=m,t}function Hu(e,t,i,a){return e=ss(7,e,a,t),e.lanes=i,e}function cy(e,t,i,a){return e=ss(22,e,a,t),e.elementType=ZE,e.lanes=i,e.stateNode={isHidden:!1},e}function W0(e,t,i){return e=ss(6,e,null,t),e.lanes=i,e}function H0(e,t,i){return t=ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function s4(e,t,i,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=I0(0),this.expirationTimes=I0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I0(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function tx(e,t,i,a,c,m,f,u,S){return e=new s4(e,t,i,u,S),t===1?(t=1,m===!0&&(t|=8)):t=0,m=ss(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},D1(m),e}function a4(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nh,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function BI(e){if(!e)return ru;e=e._reactInternals;e:{if(rc(e)!==e||e.tag!==1)throw Error(Ct(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ct(171))}if(e.tag===1){var i=e.type;if(bo(i))return DT(e,i,t)}return t}function NI(e,t,i,a,c,m,f,u,S){return e=tx(i,a,!0,e,c,m,f,u,S),e.context=BI(null),i=e.current,a=io(),c=Ql(i),m=Za(a,c),m.callback=t??null,Yl(i,m,c),e.current.lanes=c,Kf(e,c,a),So(e,a),e}function hy(e,t,i,a){var c=t.current,m=io(),f=Ql(c);return i=BI(i),t.context===null?t.context=i:t.pendingContext=i,t=Za(m,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Yl(c,t,f),e!==null&&(js(e,c,f,m),jm(e,c,f)),f}function wg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function D2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function nx(e,t){D2(e,t),(e=e.alternate)&&D2(e,t)}function l4(){return null}var UI=typeof reportError=="function"?reportError:function(e){console.error(e)};function rx(e){this._internalRoot=e}dy.prototype.render=rx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ct(409));hy(e,t,null,null)};dy.prototype.unmount=rx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yu(function(){hy(null,e,null,null)}),t[Xa]=null}};function dy(e){this._internalRoot=e}dy.prototype.unstable_scheduleHydration=function(e){if(e){var t=yT();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Vl.length&&t!==0&&t<Vl[i].priority;i++);Vl.splice(i,0,e),i===0&&_T(e)}};function ix(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function B2(){}function u4(e,t,i,a,c){if(c){if(typeof a=="function"){var m=a;a=function(){var C=wg(f);m.call(C)}}var f=NI(t,a,e,0,null,!1,!1,"",B2);return e._reactRootContainer=f,e[Xa]=f.current,Af(e.nodeType===8?e.parentNode:e),Yu(),f}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var u=a;a=function(){var C=wg(S);u.call(C)}}var S=tx(e,0,!1,null,null,!1,!1,"",B2);return e._reactRootContainer=S,e[Xa]=S.current,Af(e.nodeType===8?e.parentNode:e),Yu(function(){hy(t,S,i,a)}),S}function py(e,t,i,a,c){var m=i._reactRootContainer;if(m){var f=m;if(typeof c=="function"){var u=c;c=function(){var S=wg(f);u.call(S)}}hy(t,f,e,c)}else f=u4(i,t,e,c,a);return wg(f)}mT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=qd(t.pendingLanes);i!==0&&(S1(t,i|1),So(t,Wr()),!($n&6)&&(Rh=Wr()+500,cu()))}break;case 13:Yu(function(){var a=Ka(e,1);if(a!==null){var c=io();js(a,e,1,c)}}),nx(e,1)}};E1=function(e){if(e.tag===13){var t=Ka(e,134217728);if(t!==null){var i=io();js(t,e,134217728,i)}nx(e,134217728)}};gT=function(e){if(e.tag===13){var t=Ql(e),i=Ka(e,t);if(i!==null){var a=io();js(i,e,t,a)}nx(e,t)}};yT=function(){return Yn};vT=function(e,t){var i=Yn;try{return Yn=e,t()}finally{Yn=i}};Bv=function(e,t,i){switch(t){case"input":if(zv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var c=iy(a);if(!c)throw Error(Ct(90));XE(a),zv(a,c)}}}break;case"textarea":YE(e,i);break;case"select":t=i.value,t!=null&&_h(e,!!i.multiple,t,!1)}};iT=Y1;oT=Yu;var c4={usingClientEntryPoint:!1,Events:[Jf,ah,iy,nT,rT,Y1]},Gd={findFiberByHostInstance:Nu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},h4={bundleType:Gd.bundleType,version:Gd.version,rendererPackageName:Gd.rendererPackageName,rendererConfig:Gd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lT(e),e===null?null:e.stateNode},findFiberByHostInstance:Gd.findFiberByHostInstance||l4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{ey=cm.inject(h4),ma=cm}catch{}}Wo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c4;Wo.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ix(t))throw Error(Ct(200));return a4(e,t,null,i)};Wo.createRoot=function(e,t){if(!ix(e))throw Error(Ct(299));var i=!1,a="",c=UI;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=tx(e,1,!1,null,null,i,!1,a,c),e[Xa]=t.current,Af(e.nodeType===8?e.parentNode:e),new rx(t)};Wo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ct(188)):(e=Object.keys(e).join(","),Error(Ct(268,e)));return e=lT(t),e=e===null?null:e.stateNode,e};Wo.flushSync=function(e){return Yu(e)};Wo.hydrate=function(e,t,i){if(!fy(t))throw Error(Ct(200));return py(null,e,t,!0,i)};Wo.hydrateRoot=function(e,t,i){if(!ix(e))throw Error(Ct(405));var a=i!=null&&i.hydratedSources||null,c=!1,m="",f=UI;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),t=NI(t,null,e,1,i??null,c,!1,m,f),e[Xa]=t.current,Af(e),a)for(e=0;e<a.length;e++)i=a[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new dy(t)};Wo.render=function(e,t,i){if(!fy(t))throw Error(Ct(200));return py(null,e,t,!1,i)};Wo.unmountComponentAtNode=function(e){if(!fy(e))throw Error(Ct(40));return e._reactRootContainer?(Yu(function(){py(null,null,e,!1,function(){e._reactRootContainer=null,e[Xa]=null})}),!0):!1};Wo.unstable_batchedUpdates=Y1;Wo.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!fy(i))throw Error(Ct(200));if(e==null||e._reactInternals===void 0)throw Error(Ct(38));return py(e,t,i,!1,a)};Wo.version="18.2.0-next-9e3b772b8-20220608";function $I(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($I)}catch(e){console.error(e)}}$I(),NE.exports=Wo;var ox=NE.exports;const d4=qf(ox);var VI={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.3.2/LICENSE.txt
 */(function(e,t){(function(i,a){e.exports=a()})($l,function(){var i={},a={};function c(f,u,S){if(a[f]=S,f==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",k={};return a.shared(k),a.index(i,k),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(f){function u(o,n,s,h){return new(s||(s=Promise))(function(p,v){function x(F){try{P(h.next(F))}catch(H){v(H)}}function w(F){try{P(h.throw(F))}catch(H){v(H)}}function P(F){var H;F.done?p(F.value):(H=F.value,H instanceof s?H:new s(function(K){K(H)})).then(x,w)}P((h=h.apply(o,n||[])).next())})}function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=k;function k(o,n){this.x=o,this.y=n}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(o){return o instanceof k?o:Array.isArray(o)?new k(o[0],o[1]):o};var b=S(C),I=R;function R(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}R.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,w=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var B=S(I);let O,he;function Y(){return O==null&&(O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),O}function q(){if(he==null&&(he=!1,Y())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){he=!0;break}}}return he||!1}function V(o,n,s,h){const p=new B(o,n,s,h);return v=>p.solve(v)}const se=V(.25,.1,.25,1);function X(o,n,s){return Math.min(s,Math.max(n,o))}function G(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function E(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let j=1;function L(o,n,s){const h={};for(const p in o)h[p]=n.call(this,o[p],p,o);return h}function ee(o,n,s){const h={};for(const p in o)n.call(this,o[p],p,o)&&(h[p]=o[p]);return h}function Z(o){return Array.isArray(o)?o.map(Z):typeof o=="object"&&o?L(o,Z):o}const ve={};function _e(o){ve[o]||(typeof console<"u"&&console.warn(o),ve[o]=!0)}function pe(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function oe(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let ce=null;function J(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function de(o,n,s,h,p){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),P=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(P,function(F,H,K,re,ue){const ge=4*Math.max(-H,0),Ie=(Math.max(0,K)-K)*re*4+ge,Me=4*re,Be=Math.max(0,H),et=Math.max(0,K);return{rect:{x:Be,y:et,width:Math.min(F.width,H+re)-Be,height:Math.min(F.height,K+ue)-et},layout:[{offset:Ie,stride:Me}]}}(o,n,s,h,p)),w)for(let F=0;F<P.length;F+=4){const H=P[F];P[F]=P[F+2],P[F+2]=H}return P}finally{v.close()}})}let we,Te;const Ne="AbortError";function Pe(){return new Error(Ne)}const ze={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function qe(o){return ze.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const He="global-dispatcher";class ot extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const ht=()=>oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,xt=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const h=qe(o.url);if(h)return h(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:He},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(ht())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return u(this,void 0,void 0,function*(){const v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:ht(),signal:p.signal});h.type==="json"&&v.headers.set("Accept","application/json");const x=yield fetch(v);if(!x.ok){const F=yield x.blob();throw new ot(x.status,x.statusText,h.url,F)}let w;w=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const P=yield w;if(p.signal.aborted)throw Pe();return{data:P,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(o,n);if(oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:He},n)}var s;return function(h,p){return new Promise((v,x)=>{const w=new XMLHttpRequest;w.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(w.responseType="arraybuffer");for(const P in h.headers)w.setRequestHeader(P,h.headers[P]);h.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=h.credentials==="include",w.onerror=()=>{x(new Error(w.statusText))},w.onload=()=>{if(!p.signal.aborted)if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let P=w.response;if(h.type==="json")try{P=JSON.parse(w.response)}catch(F){return void x(F)}v({data:P,cacheControl:w.getResponseHeader("Cache-Control"),expires:w.getResponseHeader("Expires")})}else{const P=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});x(new ot(w.status,w.statusText,h.url,P))}},p.signal.addEventListener("abort",()=>{w.abort(),x(Pe())}),w.send(h.body)})}(o,n)};function kt(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function pt(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function wt(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class Ht{constructor(n,s={}){E(this,s),this.type=n}}class Lt extends Ht{constructor(n,s={}){super("error",E({error:n},s))}}class cn{on(n,s){return this._listeners=this._listeners||{},pt(n,s,this._listeners),this}off(n,s){return wt(n,s,this._listeners),wt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},pt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Ht(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const w of p)w.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const w of v)wt(h,w,this._oneTimeListeners),w.call(this,n);const x=this._eventedParent;x&&(E(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Lt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const bn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hn(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return bn.forEach(h=>{h in n&&(s[h]=n[h])}),s}function qt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!qt(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!qt(o[s],n[s]))return!1;return!0}return o===n}function Se(o,n){o.push(n)}function N(o,n,s){Se(s,{command:"addSource",args:[o,n[o]]})}function D(o,n,s){Se(n,{command:"removeSource",args:[o]}),s[o]=!0}function xe(o,n,s,h){D(o,s,h),N(o,n,s)}function Xe(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!qt(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!qt(o[s][h],n[s][h]))return!1;return!0}function tt(o,n,s,h,p,v){o=o||{},n=n||{};for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&(qt(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}));for(const x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(qt(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}))}function ct(o){return o.id}function ae(o,n){return o[n.id]=n,o}class M{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function U(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class Ee extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class We{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new We(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const rt={kind:"null"},Ve={kind:"number"},Et={kind:"string"},zt={kind:"boolean"},pn={kind:"color"},Sn={kind:"object"},Ft={kind:"value"},Dr={kind:"collator"},ti={kind:"formatted"},ir={kind:"padding"},ke={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function le(o,n){return{kind:"array",itemType:o,N:n}}function fe(o){if(o.kind==="array"){const n=fe(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Fe=[rt,Ve,Et,zt,pn,ti,Sn,le(Ft),ir,ke,ie];function De(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!De(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Fe)if(!De(s,n))return null}}return`Expected ${fe(o)} but found ${fe(n)} instead.`}function Oe(o,n){return n.some(s=>s.kind===o.kind)}function $e(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function je(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const Qe=.96422,dt=.82521,lt=4/29,ut=6/29,rn=3*ut*ut,Yt=ut*ut*ut,Tn=Math.PI/180,un=180/Math.PI;function In(o){return(o%=360)<0&&(o+=360),o}function Bn([o,n,s,h]){let p,v;const x=or((.2225045*(o=Vn(o))+.7168786*(n=Vn(n))+.0606169*(s=Vn(s)))/1);o===n&&n===s?p=v=x:(p=or((.4360747*o+.3850649*n+.1430804*s)/Qe),v=or((.0139322*o+.0971045*n+.7141733*s)/dt));const w=116*x-16;return[w<0?0:w,500*(p-x),200*(x-v),h]}function Vn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function or(o){return o>Yt?Math.pow(o,1/3):o/rn+lt}function mn([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*vr(p),v=Qe*vr(v),x=dt*vr(x),[Jn(3.1338561*v-1.6168667*p-.4906146*x),Jn(-.9787684*v+1.9161415*p+.033454*x),Jn(.0719453*v-.2289914*p+1.4052427*x),h]}function Jn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function vr(o){return o>ut?o*o*o:rn*(o-lt)}function ni(o){return parseInt(o.padEnd(2,o),16)/255}function vi(o,n){return _r(n?o/100:o,0,1)}function _r(o,n,s){return Math.min(Math.max(n,o),s)}function Bs(o){return!o.some(Number.isNaN)}const il={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class zn{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof zn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=il[h];if(p){const[x,w,P]=p;return[x/255,w/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let w=1;return[ni(h.slice(w,w+=x)),ni(h.slice(w,w+=x)),ni(h.slice(w,w+=x)),ni(h.slice(w,w+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,P,F,H,K,re,ue,ge,Ie,Me,Be,et]=x,Ze=[H||" ",ue||" ",Me].join("");if(Ze==="  "||Ze==="  /"||Ze===",,"||Ze===",,,"){const Je=[F,re,Ie].join(""),ft=Je==="%%%"?100:Je===""?255:0;if(ft){const gt=[_r(+P/ft,0,1),_r(+K/ft,0,1),_r(+ge/ft,0,1),Be?vi(+Be,et):1];if(Bs(gt))return gt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,P,F,H,K,re,ue,ge]=v,Ie=[P||" ",H||" ",re].join("");if(Ie==="  "||Ie==="  /"||Ie===",,"||Ie===",,,"){const Me=[+w,_r(+F,0,100),_r(+K,0,100),ue?vi(+ue,ge):1];if(Bs(Me))return function([Be,et,Ze,Je]){function ft(gt){const Bt=(gt+Be/30)%12,Xt=et*Math.min(Ze,1-Ze);return Ze-Xt*Math.max(-1,Math.min(Bt-3,9-Bt,1))}return Be=In(Be),et/=100,Ze/=100,[ft(0),ft(8),ft(4),Je]}(Me)}}}(n);return s?new zn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=Bn(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?In(Math.atan2(p,h)*un):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Bn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}zn.black=new zn(0,0,0,1),zn.white=new zn(1,1,1,1),zn.transparent=new zn(0,0,0,0),zn.red=new zn(1,0,0,1);class ol{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Pn{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class xr{constructor(n){this.sections=n}static fromString(n){return new xr([new Pn(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof xr?n:xr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ri{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ri)return n;if(typeof n=="number")return new ri([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ri(n)}}toString(){return JSON.stringify(this.values)}}const _a=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ii{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ii)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!_a.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new ii(n)}}toString(){return JSON.stringify(this.values)}}class Fi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Fi({name:n,available:!1}):null}}function ac(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Br(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof zn||o instanceof ol||o instanceof xr||o instanceof ri||o instanceof ii||o instanceof Fi)return!0;if(Array.isArray(o)){for(const n of o)if(!Br(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Br(o[n]))return!1;return!0}return!1}function mr(o){if(o===null)return rt;if(typeof o=="string")return Et;if(typeof o=="boolean")return zt;if(typeof o=="number")return Ve;if(o instanceof zn)return pn;if(o instanceof ol)return Dr;if(o instanceof xr)return ti;if(o instanceof ri)return ir;if(o instanceof ii)return ie;if(o instanceof Fi)return ke;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=mr(h);if(s){if(s===p)continue;s=Ft;break}s=p}return le(s||Ft,n)}return Sn}function xa(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof zn||o instanceof xr||o instanceof ri||o instanceof ii||o instanceof Fi?o.toString():JSON.stringify(o)}class hs{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Br(n[1]))return s.error("invalid value");const h=n[1];let p=mr(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new hs(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class sr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ds={string:Et,number:Ve,boolean:zt,object:Sn};class wr{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let w,P;if(n.length>2){const F=n[1];if(typeof F!="string"||!(F in ds)||F==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);w=ds[F],p++}else w=Ft;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=le(w,P)}else{if(!ds[v])throw new Error(`Types doesn't contain name = ${v}`);h=ds[v]}const x=[];for(;p<n.length;p++){const w=s.parse(n[p],p,Ft);if(!w)return null;x.push(w)}return new wr(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!De(this.type,mr(h)))return h;if(s===this.args.length-1)throw new sr(`Expected value to be of type ${fe(this.type)}, but found ${fe(mr(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const sl={"to-boolean":zt,"to-color":pn,"to-number":Ve,"to-string":Et};class co{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!sl[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=sl[h],v=[];for(let x=1;x<n.length;x++){const w=s.parse(n[x],x,Ft);if(!w)return null;v.push(w)}return new co(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof zn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:ac(s[0],s[1],s[2],s[3]),!h))return new zn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new sr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=ri.parse(s);if(p)return p}throw new sr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=ii.parse(s);if(p)return p}throw new sr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new sr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return xr.fromString(xa(this.args[0].evaluate(n)));case"resolvedImage":return Fi.fromString(xa(this.args[0].evaluate(n)));default:return xa(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const hu=["Unknown","Point","LineString","Polygon"];class Ns{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?hu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=zn.parse(n)),s}}class jn{constructor(n,s,h=[],p,v=new We,x=[]){this.registry=n,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,x){return x==="assert"?new wr(v,[p]):x==="coerce"?new co(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,P=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||P.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(w.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(w,P))return null}else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"coerce");else x=h(x,w,s.typeAnnotation||"assert")}if(!(x instanceof hs)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Ns;try{x=new hs(x.type,x.evaluate(w))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new jn(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Ee(h,n))}checkSubtype(n,s){const h=De(n,s);return h&&this.error(h),h}}class fs{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=s.parse(n[v+1],v+1);if(!w)return null;h.push([x,w])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new fs(h,p):null}outputDefined(){return this.result.outputDefined()}}class Us{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Us(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class du{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ve),p=s.parse(n[2],2,le(s.expectedType||Ft));return h&&p?new du(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new sr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new sr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new sr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class oi{constructor(n,s){this.type=zt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ft),p=s.parse(n[2],2,Ft);return h&&p?Oe(h.type,[zt,Et,Ve,rt,Ft])?new oi(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!$e(s,["boolean","string","number","null"]))throw new sr(`Expected first argument to be of type boolean, string, number or null, but found ${fe(mr(s))} instead.`);if(!$e(h,["string","array"]))throw new sr(`Expected second argument to be of type array or string, but found ${fe(mr(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class wa{constructor(n,s,h){this.type=Ve,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ft),p=s.parse(n[2],2,Ft);if(!h||!p)return null;if(!Oe(h.type,[zt,Et,Ve,rt,Ft]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Ve);return v?new wa(h,p,v):null}return new wa(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!$e(s,["boolean","string","number","null"]))throw new sr(`Expected first argument to be of type boolean, string, number or null, but found ${fe(mr(s))} instead.`);if(!$e(h,["string","array"]))throw new sr(`Expected second argument to be of type array or string, but found ${fe(mr(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class fu{constructor(n,s,h,p,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let F=2;F<n.length-1;F+=2){let H=n[F];const K=n[F+1];Array.isArray(H)||(H=[H]);const re=s.concat(F);if(H.length===0)return re.error("Expected at least one branch label.");for(const ge of H){if(typeof ge!="number"&&typeof ge!="string")return re.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return re.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return re.error("Numeric branch labels must be integer values.");if(h){if(re.checkSubtype(h,mr(ge)))return null}else h=mr(ge);if(v[String(ge)]!==void 0)return re.error("Branch labels must be unique.");v[String(ge)]=x.length}const ue=s.parse(K,F,p);if(!ue)return null;p=p||ue.type,x.push(ue)}const w=s.parse(n[1],1,Ft);if(!w)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?w.type.kind!=="value"&&s.concat(1).checkSubtype(h,w.type)?null:new fu(h,p,w,v,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(mr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class al{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const w=s.parse(n[x],x,zt);if(!w)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([w,P]),h=h||P.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new al(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class ba{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Ft),p=s.parse(n[2],2,Ve);if(!h||!p)return null;if(!Oe(h.type,[le(Ft),Et,Ft]))return s.error(`Expected first argument to be of type array or string, but found ${fe(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Ve);return v?new ba(h.type,h,p,v):null}return new ba(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!$e(s,["string","array"]))throw new sr(`Expected first argument to be of type array or string, but found ${fe(mr(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function ll(o,n){const s=o.length-1;let h,p,v=0,x=s,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),h=o[w],p=o[w+1],h<=n){if(w===s||n<p)return w;v=w+1}else{if(!(h>n))throw new sr("Input is not a number.");x=w-1}return 0}class $s{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Ve);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const w=x===1?-1/0:n[x],P=n[x+1],F=x,H=x+1;if(typeof w!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(p.length&&p[p.length-1][0]>=w)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const K=s.parse(P,H,v);if(!K)return null;v=v||K.type,p.push([w,K])}return new $s(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[ll(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function pu(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var lc=Vs;function Vs(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}Vs.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,w=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:w=s,s=.5*(w-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var uc=pu(lc);function Ri(o,n,s){return o+s*(n-o)}function ul(o,n,s){return o.map((h,p)=>Ri(h,n[p],s))}const Xr={number:Ri,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,x,w]=ul(o.rgb,n.rgb,s);return new zn(p,v,x,w,!1)}case"hcl":{const[p,v,x,w]=o.hcl,[P,F,H,K]=n.hcl;let re,ue;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?re=NaN:(re=P,x!==1&&x!==0||(ue=F)):(re=p,H!==1&&H!==0||(ue=v));else{let et=P-p;P>p&&et>180?et-=360:P<p&&p-P>180&&(et+=360),re=p+s*et}const[ge,Ie,Me,Be]=function([et,Ze,Je,ft]){return et=isNaN(et)?0:et*Tn,mn([Je,Math.cos(et)*Ze,Math.sin(et)*Ze,ft])}([re,ue??Ri(v,F,s),Ri(x,H,s),Ri(w,K,s)]);return new zn(ge,Ie,Me,Be,!1)}case"lab":{const[p,v,x,w]=mn(ul(o.lab,n.lab,s));return new zn(p,v,x,w,!1)}}},array:ul,padding:function(o,n,s){return new ri(ul(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new sr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new sr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[w,P]=h[x+1],[F,H]=p[x+1];v.push([Ri(w,F,s),Ri(P,H,s)])}return new ii(v)}};class _i{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=mu(s,n.base,h,p);else if(n.name==="linear")v=mu(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new uc(x[0],x[1],x[2],x[3]).solve(mu(s,1,h,p))}return v}static parse(n,s){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const F=p[1];if(typeof F!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:F}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const F=p.slice(1);if(F.length!==4||F.some(H=>typeof H!="number"||H<0||H>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:F}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Ve),!v)return null;const w=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=pn:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let F=0;F<x.length;F+=2){const H=x[F],K=x[F+1],re=F+3,ue=F+4;if(typeof H!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',re);if(w.length&&w[w.length-1][0]>=H)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',re);const ge=s.parse(K,ue,P);if(!ge)return null;P=P||ge.type,w.push([H,ge])}return je(P,Ve)||je(P,pn)||je(P,ir)||je(P,ie)||je(P,le(Ve))?new _i(P,h,p,v,w):s.error(`Type ${fe(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const x=ll(s,p),w=_i.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),F=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Xr[this.type.kind](P,F,w);case"interpolate-hcl":return Xr.color(P,F,w,"hcl");case"interpolate-lab":return Xr.color(P,F,w,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function mu(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class Sa{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const w of n.slice(1)){const P=s.parse(w,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=p&&v.some(w=>De(p,w.type));return new Sa(x?Ft:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof Fi&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function gu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function yu(o,n,s,h){return h.compare(n,s)===0}function Gs(o,n,s){const h=o!=="=="&&o!=="!=";return class GI{constructor(v,x,w){this.type=zt,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let P=x.parse(v[1],1,Ft);if(!P)return null;if(!gu(w,P.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${fe(P.type)}'.`);let F=x.parse(v[2],2,Ft);if(!F)return null;if(!gu(w,F.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${fe(F.type)}'.`);if(P.type.kind!==F.type.kind&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error(`Cannot compare types '${fe(P.type)}' and '${fe(F.type)}'.`);h&&(P.type.kind==="value"&&F.type.kind!=="value"?P=new wr(F.type,[P]):P.type.kind!=="value"&&F.type.kind==="value"&&(F=new wr(P.type,[F])));let H=null;if(v.length===4){if(P.type.kind!=="string"&&F.type.kind!=="string"&&P.type.kind!=="value"&&F.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(H=x.parse(v[3],3,Dr),!H)return null}return new GI(P,F,H)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=mr(x),F=mr(w);if(P.kind!==F.kind||P.kind!=="string"&&P.kind!=="number")throw new sr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${F.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=mr(x),F=mr(w);if(P.kind!=="string"||F.kind!=="string")return n(v,x,w)}return this.collator?s(v,x,w,this.collator.evaluate(v)):n(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const vu=Gs("==",function(o,n,s){return n===s},yu),cc=Gs("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!yu(0,n,s,h)}),hc=Gs("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),Zh=Gs(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),qh=Gs("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),dc=Gs(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class cl{constructor(n,s,h){this.type=Dr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,zt);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,zt);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Et),!x)?null:new cl(p,v,x)}evaluate(n){return new ol(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class hl{constructor(n,s,h,p,v){this.type=Et,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Ve);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,Et),!v))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,Et),!x))return null;let w=null;if(p["min-fraction-digits"]&&(w=s.parse(p["min-fraction-digits"],1,Ve),!w))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,Ve),!P)?null:new hl(h,v,x,w,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class dl{constructor(n){this.type=ti,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const w=n[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let P=null;if(w["font-scale"]&&(P=s.parse(w["font-scale"],1,Ve),!P))return null;let F=null;if(w["text-font"]&&(F=s.parse(w["text-font"],1,le(Et)),!F))return null;let H=null;if(w["text-color"]&&(H=s.parse(w["text-color"],1,pn),!H))return null;const K=p[p.length-1];K.scale=P,K.font=F,K.textColor=H}else{const P=s.parse(n[x],1,Ft);if(!P)return null;const F=P.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new dl(p)}evaluate(n){return new xr(this.sections.map(s=>{const h=s.content.evaluate(n);return mr(h)===ke?new Pn("",h,null,null,null):new Pn(xa(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class _u{constructor(n){this.type=ke,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Et);return h?new _u(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=Fi.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Ws{constructor(n){this.type=Ve,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${fe(h.type)} instead.`):new Ws(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new sr(`Expected value to be of type string or array, but found ${fe(mr(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const xi=8192;function Ln(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*xi),Math.round(h*p*xi)]}function xu(o,n){const s=Math.pow(2,n.z);return[(p=(o[0]/xi+n.x)/s,360*p-180),(h=(o[1]/xi+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function Ea(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Hs(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Xh(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function Zs(o,n,s,h){return(p=[h[0]-s[0],h[1]-s[1]])[0]*(v=[n[0]-o[0],n[1]-o[1]])[1]-p[1]*v[0]!=0&&!(!pc(o,n,s,h)||!pc(s,h,o,n));var p,v}function Kh(o,n,s){for(const h of s)for(let p=0;p<h.length-1;++p)if(Zs(o,n,h[p],h[p+1]))return!0;return!1}function qs(o,n,s=!1){let h=!1;for(const w of n)for(let P=0;P<w.length-1;P++){if(Xh(o,w[P],w[P+1]))return s;(v=w[P])[1]>(p=o)[1]!=(x=w[P+1])[1]>p[1]&&p[0]<(x[0]-v[0])*(p[1]-v[1])/(x[1]-v[1])+v[0]&&(h=!h)}var p,v,x;return h}function Yh(o,n){for(const s of n)if(qs(o,s))return!0;return!1}function fc(o,n){for(const s of o)if(!qs(s,n))return!1;for(let s=0;s<o.length-1;++s)if(Kh(o[s],o[s+1],n))return!1;return!0}function Jh(o,n){for(const s of n)if(fc(o,s))return!0;return!1}function pc(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-p*(o[1]-s[1]),w=(n[0]-s[0])*v-p*(n[1]-s[1]);return x>0&&w<0||x<0&&w>0}function fl(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const w=Ln(o[p][x],s);Ea(n,w),v.push(w)}h.push(v)}return h}function pl(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=fl(o[p],n,s);h.push(v)}return h}function mc(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}Ea(n,o)}function gc(o,n,s,h){const p=Math.pow(2,h.z)*xi,v=[h.x*xi,h.y*xi],x=[];for(const w of o)for(const P of w){const F=[P.x+v[0],P.y+v[1]];mc(F,n,s,p),x.push(F)}return x}function yc(o,n,s,h){const p=Math.pow(2,h.z)*xi,v=[h.x*xi,h.y*xi],x=[];for(const P of o){const F=[];for(const H of P){const K=[H.x+v[0],H.y+v[1]];Ea(n,K),F.push(K)}x.push(F)}if(n[2]-n[0]<=p/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const P of x)for(const F of P)mc(F,n,s,p)}var w;return x}class ps{constructor(n,s){this.type=zt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Br(n[1])){const h=n[1];if(h.type==="FeatureCollection"){const p=[];for(const v of h.features){const{type:x,coordinates:w}=v.geometry;x==="Polygon"&&p.push(w),x==="MultiPolygon"&&p.push(...w)}if(p.length)return new ps(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ps(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ps(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=fl(h.coordinates,v,x),P=gc(s.geometry(),p,v,x);if(!Hs(p,v))return!1;for(const F of P)if(!qs(F,w))return!1}if(h.type==="MultiPolygon"){const w=pl(h.coordinates,v,x),P=gc(s.geometry(),p,v,x);if(!Hs(p,v))return!1;for(const F of P)if(!Yh(F,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const w=fl(h.coordinates,v,x),P=yc(s.geometry(),p,v,x);if(!Hs(p,v))return!1;for(const F of P)if(!fc(F,w))return!1}if(h.type==="MultiPolygon"){const w=pl(h.coordinates,v,x),P=yc(s.geometry(),p,v,x);if(!Hs(p,v))return!1;for(const F of P)if(!Jh(F,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wu=class{constructor(o=[],n=Qh){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:s}=this,h=n[o];for(;o>0;){const p=o-1>>1,v=n[p];if(s(h,v)>=0)break;n[o]=v,o=p}n[o]=h}_down(o){const{data:n,compare:s}=this,h=this.length>>1,p=n[o];for(;o<h;){let v=1+(o<<1),x=n[v];const w=v+1;if(w<this.length&&s(n[w],x)<0&&(v=w,x=n[w]),s(x,p)>=0)break;n[o]=x,o=v}n[o]=p}};function Qh(o,n){return o<n?-1:o>n?1:0}function ed(o,n,s,h,p){vc(o,n,s,h||o.length-1,p||ml)}function vc(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,w=Math.log(v),P=.5*Math.exp(2*w/3),F=.5*Math.sqrt(w*P*(v-P)/v)*(x-v/2<0?-1:1);vc(o,n,Math.max(s,Math.floor(n-x*P/v+F)),Math.min(h,Math.floor(n+(v-x)*P/v+F)),p)}var H=o[n],K=s,re=h;for(Ta(o,s,n),p(o[h],H)>0&&Ta(o,s,h);K<re;){for(Ta(o,K,re),K++,re--;p(o[K],H)<0;)K++;for(;p(o[re],H)>0;)re--}p(o[s],H)===0?Ta(o,s,re):Ta(o,++re,h),re<=n&&(s=re+1),n<=re&&(h=re-1)}}function Ta(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function ml(o,n){return o<n?-1:o>n?1:0}function gl(o,n){if(o.length<=1)return[o];const s=[];let h,p;for(const v of o){const x=_c(v);x!==0&&(v.area=Math.abs(x),p===void 0&&(p=x<0),p===x<0?(h&&s.push(h),h=[v]):h.push(v))}if(h&&s.push(h),n>1)for(let v=0;v<s.length;v++)s[v].length<=n||(ed(s[v],n,1,s[v].length-1,Xs),s[v]=s[v].slice(0,n));return s}function Xs(o,n){return n.area-o.area}function _c(o){let n=0;for(let s,h,p=0,v=o.length,x=v-1;p<v;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}const Hi=1/298.257223563,xc=Hi*(2-Hi),wc=Math.PI/180;class bu{constructor(n){const s=6378.137*wc*1e3,h=Math.cos(n*wc),p=1/(1-xc*(1-h*h)),v=Math.sqrt(p);this.kx=s*v*h,this.ky=s*v*p*(1-xc)}distance(n,s){const h=this.wrap(n[0]-s[0])*this.kx,p=(n[1]-s[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(n,s){let h,p,v,x,w=1/0;for(let P=0;P<n.length-1;P++){let F=n[P][0],H=n[P][1],K=this.wrap(n[P+1][0]-F)*this.kx,re=(n[P+1][1]-H)*this.ky,ue=0;K===0&&re===0||(ue=(this.wrap(s[0]-F)*this.kx*K+(s[1]-H)*this.ky*re)/(K*K+re*re),ue>1?(F=n[P+1][0],H=n[P+1][1]):ue>0&&(F+=K/this.kx*ue,H+=re/this.ky*ue)),K=this.wrap(s[0]-F)*this.kx,re=(s[1]-H)*this.ky;const ge=K*K+re*re;ge<w&&(w=ge,h=F,p=H,v=P,x=ue)}return{point:[h,p],index:v,t:Math.max(0,Math.min(1,x))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function bc(o,n){return n[0]-o[0]}function Xo(o){return o[1]-o[0]+1}function Eo(o,n){return o[1]>=o[0]&&o[1]<n}function Ks(o,n){if(o[0]>o[1])return[null,null];const s=Xo(o);if(n){if(s===2)return[o,null];const p=Math.floor(s/2);return[[o[0],o[0]+p],[o[0]+p,o[1]]]}if(s===1)return[o,null];const h=Math.floor(s/2)-1;return[[o[0],o[0]+h],[o[0]+h+1,o[1]]]}function Su(o,n){if(!Eo(n,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let h=n[0];h<=n[1];++h)Ea(s,o[h]);return s}function Eu(o){const n=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const h of s)Ea(n,h);return n}function Xn(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function yl(o,n,s){if(!Xn(o)||!Xn(n))return NaN;let h=0,p=0;return o[2]<n[0]&&(h=n[0]-o[2]),o[0]>n[2]&&(h=o[0]-n[2]),o[1]>n[3]&&(p=o[1]-n[3]),o[3]<n[1]&&(p=n[1]-o[3]),s.distance([0,0],[h,p])}function wn(o,n,s){const h=s.pointOnLine(n,o);return s.distance(o,h.point)}function Ia(o,n,s,h,p){const v=Math.min(wn(o,[s,h],p),wn(n,[s,h],p)),x=Math.min(wn(s,[o,n],p),wn(h,[o,n],p));return Math.min(v,x)}function Qn(o,n,s,h,p){if(!Eo(n,o.length)||!Eo(h,s.length))return 1/0;let v=1/0;for(let x=n[0];x<n[1];++x){const w=o[x],P=o[x+1];for(let F=h[0];F<h[1];++F){const H=s[F],K=s[F+1];if(Zs(w,P,H,K))return 0;v=Math.min(v,Ia(w,P,H,K,p))}}return v}function Gn(o,n,s,h,p){if(!Eo(n,o.length)||!Eo(h,s.length))return NaN;let v=1/0;for(let x=n[0];x<=n[1];++x)for(let w=h[0];w<=h[1];++w)if(v=Math.min(v,p.distance(o[x],s[w])),v===0)return v;return v}function ho(o,n,s){if(qs(o,n,!0))return 0;let h=1/0;for(const p of n){const v=p[0],x=p[p.length-1];if(v!==x&&(h=Math.min(h,wn(o,[x,v],s)),h===0))return h;const w=s.pointOnLine(p,o);if(h=Math.min(h,s.distance(o,w.point)),h===0)return h}return h}function Sc(o,n,s,h){if(!Eo(n,o.length))return NaN;for(let v=n[0];v<=n[1];++v)if(qs(o[v],s,!0))return 0;let p=1/0;for(let v=n[0];v<n[1];++v){const x=o[v],w=o[v+1];for(const P of s)for(let F=0,H=P.length,K=H-1;F<H;K=F++){const re=P[K],ue=P[F];if(Zs(x,w,re,ue))return 0;p=Math.min(p,Ia(x,w,re,ue,h))}}return p}function vl(o,n){for(const s of o)for(const h of s)if(qs(h,n,!0))return!0;return!1}function _l(o,n,s,h=1/0){const p=Eu(o),v=Eu(n);if(h!==1/0&&yl(p,v,s)>=h)return h;if(Hs(p,v)){if(vl(o,n))return 0}else if(vl(n,o))return 0;let x=1/0;for(const w of o)for(let P=0,F=w.length,H=F-1;P<F;H=P++){const K=w[H],re=w[P];for(const ue of n)for(let ge=0,Ie=ue.length,Me=Ie-1;ge<Ie;Me=ge++){const Be=ue[Me],et=ue[ge];if(Zs(K,re,Be,et))return 0;x=Math.min(x,Ia(K,re,Be,et,s))}}return x}function Ec(o,n,s,h,p,v){if(!v)return;const x=yl(Su(h,v),p,s);x<n&&o.push([x,v,[0,0]])}function To(o,n,s,h,p,v,x){if(!v||!x)return;const w=yl(Su(h,v),Su(p,x),s);w<n&&o.push([w,v,x])}function Io(o,n,s,h,p=1/0){let v=Math.min(h.distance(o[0],s[0][0]),p);if(v===0)return v;const x=new wu([[0,[0,o.length-1],[0,0]]],bc),w=Eu(s);for(;x.length>0;){const P=x.pop();if(P[0]>=v)continue;const F=P[1],H=n?50:100;if(Xo(F)<=H){if(!Eo(F,o.length))return NaN;if(n){const K=Sc(o,F,s,h);if(isNaN(K)||K===0)return K;v=Math.min(v,K)}else for(let K=F[0];K<=F[1];++K){const re=ho(o[K],s,h);if(v=Math.min(v,re),v===0)return 0}}else{const K=Ks(F,n);Ec(x,v,h,o,w,K[0]),Ec(x,v,h,o,w,K[1])}}return v}function br(o,n,s,h,p,v=1/0){let x=Math.min(v,p.distance(o[0],s[0]));if(x===0)return x;const w=new wu([[0,[0,o.length-1],[0,s.length-1]]],bc);for(;w.length>0;){const P=w.pop();if(P[0]>=x)continue;const F=P[1],H=P[2],K=n?50:100,re=h?50:100;if(Xo(F)<=K&&Xo(H)<=re){if(!Eo(F,o.length)&&Eo(H,s.length))return NaN;let ue;if(n&&h)ue=Qn(o,F,s,H,p),x=Math.min(x,ue);else if(n&&!h){const ge=o.slice(F[0],F[1]+1);for(let Ie=H[0];Ie<=H[1];++Ie)if(ue=wn(s[Ie],ge,p),x=Math.min(x,ue),x===0)return x}else if(!n&&h){const ge=s.slice(H[0],H[1]+1);for(let Ie=F[0];Ie<=F[1];++Ie)if(ue=wn(o[Ie],ge,p),x=Math.min(x,ue),x===0)return x}else ue=Gn(o,F,s,H,p),x=Math.min(x,ue)}else{const ue=Ks(F,n),ge=Ks(H,h);To(w,x,p,o,s,ue[0],ge[0]),To(w,x,p,o,s,ue[0],ge[1]),To(w,x,p,o,s,ue[1],ge[0]),To(w,x,p,o,s,ue[1],ge[1])}}return x}function fo(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class po{constructor(n,s){this.type=Ve,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Br(n[1])){const h=n[1];if(h.type==="FeatureCollection")return new po(h,h.features.map(p=>fo(p.geometry)).flat());if(h.type==="Feature")return new po(h,fo(h.geometry));if("type"in h&&"coordinates"in h)return new po(h,fo(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=s.geometry(),v=p.flat().map(P=>xu([P.x,P.y],s.canonical));if(p.length===0)return NaN;const x=new bu(v[0][1]);let w=1/0;for(const P of h){switch(P.type){case"Point":w=Math.min(w,br(v,!1,[P.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,br(v,!1,P.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Io(v,!1,P.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=s.geometry(),v=p.flat().map(P=>xu([P.x,P.y],s.canonical));if(p.length===0)return NaN;const x=new bu(v[0][1]);let w=1/0;for(const P of h){switch(P.type){case"Point":w=Math.min(w,br(v,!0,[P.coordinates],!1,x,w));break;case"LineString":w=Math.min(w,br(v,!0,P.coordinates,!0,x,w));break;case"Polygon":w=Math.min(w,Io(v,!0,P.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,h){const p=s.geometry();if(p.length===0||p[0].length===0)return NaN;const v=gl(p,0).map(P=>P.map(F=>F.map(H=>xu([H.x,H.y],s.canonical)))),x=new bu(v[0][0][0][1]);let w=1/0;for(const P of h)for(const F of v){switch(P.type){case"Point":w=Math.min(w,Io([P.coordinates],!1,F,x,w));break;case"LineString":w=Math.min(w,Io(P.coordinates,!0,F,x,w));break;case"Polygon":w=Math.min(w,_l(F,P.coordinates,x,w))}if(w===0)return w}return w}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Co={"==":vu,"!=":cc,">":Zh,"<":hc,">=":dc,"<=":qh,array:wr,at:du,boolean:wr,case:al,coalesce:Sa,collator:cl,format:dl,image:_u,in:oi,"index-of":wa,interpolate:_i,"interpolate-hcl":_i,"interpolate-lab":_i,length:Ws,let:fs,literal:hs,match:fu,number:wr,"number-format":hl,object:wr,slice:ba,step:$s,string:wr,"to-boolean":co,"to-color":co,"to-number":co,"to-string":co,var:Us,within:ps,distance:po};class si{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=si.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=x.filter(([F])=>!Array.isArray(F)||F.length===n.length-1);let P=null;for(const[F,H]of w){P=new jn(s.registry,Aa,s.path,null,s.scope);const K=[];let re=!1;for(let ue=1;ue<n.length;ue++){const ge=n[ue],Ie=Array.isArray(F)?F[ue-1]:F.type,Me=P.parse(ge,1+K.length,Ie);if(!Me){re=!0;break}K.push(Me)}if(!re)if(Array.isArray(F)&&F.length!==K.length)P.error(`Expected ${F.length} arguments, but found ${K.length} instead.`);else{for(let ue=0;ue<K.length;ue++){const ge=Array.isArray(F)?F[ue]:F.type,Ie=K[ue];P.concat(ue+1).checkSubtype(ge,Ie.type)}if(P.errors.length===0)return new si(h,v,H,K)}}if(w.length===1)s.errors.push(...P.errors);else{const F=(w.length?w:x).map(([K])=>{return re=K,Array.isArray(re)?`(${re.map(fe).join(", ")})`:`(${fe(re.type)}...)`;var re}).join(" | "),H=[];for(let K=1;K<n.length;K++){const re=s.parse(n[K],1+H.length);if(!re)return null;H.push(fe(re.type))}s.error(`Expected arguments of type ${F}, but found (${H.join(", ")}) instead.`)}return null}static register(n,s){si.definitions=s;for(const h in s)n[h]=si}}function Ca(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=ac(n,s,h,v);if(x)throw new sr(x);return new zn(n/255,s/255,h/255,v,!1)}function Pa(o,n){return o in n}function wi(o,n){const s=n[o];return s===void 0?null:s}function Oi(o){return{type:o}}function Aa(o){if(o instanceof Us)return Aa(o.boundExpression);if(o instanceof si&&o.name==="error"||o instanceof cl||o instanceof ps||o instanceof po)return!1;const n=o instanceof co||o instanceof wr;let s=!0;return o.eachChild(h=>{s=n?s&&Aa(h):s&&h instanceof hs}),!!s&&ms(o)&&ka(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ms(o){if(o instanceof si&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ps||o instanceof po)return!1;let n=!0;return o.eachChild(s=>{n&&!ms(s)&&(n=!1)}),n}function Ko(o){if(o instanceof si&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!Ko(s)&&(n=!1)}),n}function ka(o,n){if(o instanceof si&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ka(h,n)&&(s=!1)}),s}function xl(o){return{result:"success",value:o}}function Yo(o){return{result:"error",value:o}}function mo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Po(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ma(o){return!!o.expression&&o.expression.interpolated}function Rn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function gs(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Ys(o){return o}function Js(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(Ma(n)?"exponential":"interval");if(s||n.type==="padding"){const H=s?zn.parse:ri.parse;(o=U({},o)).stops&&(o.stops=o.stops.map(K=>[K[0],H(K[1])])),o.default=H(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let w,P,F;if(v==="exponential")w=ye;else if(v==="interval")w=W;else if(v==="categorical"){w=wl,P=Object.create(null);for(const H of o.stops)P[H[0]]=H[1];F=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Ue}if(h){const H={},K=[];for(let ge=0;ge<o.stops.length;ge++){const Ie=o.stops[ge],Me=Ie[0].zoom;H[Me]===void 0&&(H[Me]={zoom:Me,type:o.type,property:o.property,default:o.default,stops:[]},K.push(Me)),H[Me].stops.push([Ie[0].value,Ie[1]])}const re=[];for(const ge of K)re.push([H[ge].zoom,Js(H[ge],n)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:_i.interpolationFactor.bind(void 0,ue),zoomStops:re.map(ge=>ge[0]),evaluate:({zoom:ge},Ie)=>ye({stops:re,base:o.base},n,ge).evaluate(ge,Ie)}}if(p){const H=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:_i.interpolationFactor.bind(void 0,H),zoomStops:o.stops.map(K=>K[0]),evaluate:({zoom:K})=>w(o,n,K,P,F)}}return{kind:"source",evaluate(H,K){const re=K&&K.properties?K.properties[o.property]:void 0;return re===void 0?ys(o.default,n.default):w(o,n,re,P,F)}}}function ys(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function wl(o,n,s,h,p){return ys(typeof s===p?h[s]:void 0,o.default,n.default)}function W(o,n,s){if(Rn(s)!=="number")return ys(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=ll(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function ye(o,n,s){const h=o.base!==void 0?o.base:1;if(Rn(s)!=="number")return ys(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=ll(o.stops.map(H=>H[0]),s),x=function(H,K,re,ue){const ge=ue-re,Ie=H-re;return ge===0?0:K===1?Ie/ge:(Math.pow(K,Ie)-1)/(Math.pow(K,ge)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),w=o.stops[v][1],P=o.stops[v+1][1],F=Xr[n.type]||Ys;return typeof w.evaluate=="function"?{evaluate(...H){const K=w.evaluate.apply(void 0,H),re=P.evaluate.apply(void 0,H);if(K!==void 0&&re!==void 0)return F(K,re,x,o.colorSpace)}}:F(w,P,x,o.colorSpace)}function Ue(o,n,s){switch(n.type){case"color":s=zn.parse(s);break;case"formatted":s=xr.fromString(s.toString());break;case"resolvedImage":s=Fi.fromString(s.toString());break;case"padding":s=ri.parse(s);break;default:Rn(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return ys(s,o.default,n.default)}si.register(Co,{error:[{kind:"error"},[Et],(o,[n])=>{throw new sr(n.evaluate(o))}],typeof:[Et,[Ft],(o,[n])=>fe(mr(n.evaluate(o)))],"to-rgba":[le(Ve,4),[pn],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[pn,[Ve,Ve,Ve],Ca],rgba:[pn,[Ve,Ve,Ve,Ve],Ca],has:{type:zt,overloads:[[[Et],(o,[n])=>Pa(n.evaluate(o),o.properties())],[[Et,Sn],(o,[n,s])=>Pa(n.evaluate(o),s.evaluate(o))]]},get:{type:Ft,overloads:[[[Et],(o,[n])=>wi(n.evaluate(o),o.properties())],[[Et,Sn],(o,[n,s])=>wi(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Ft,[Et],(o,[n])=>wi(n.evaluate(o),o.featureState||{})],properties:[Sn,[],o=>o.properties()],"geometry-type":[Et,[],o=>o.geometryType()],id:[Ft,[],o=>o.id()],zoom:[Ve,[],o=>o.globals.zoom],"heatmap-density":[Ve,[],o=>o.globals.heatmapDensity||0],"line-progress":[Ve,[],o=>o.globals.lineProgress||0],accumulated:[Ft,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Ve,Oi(Ve),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[Ve,Oi(Ve),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[Ve],(o,[n])=>-n.evaluate(o)]]},"/":[Ve,[Ve,Ve],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[Ve,[Ve,Ve],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[Ve,[],()=>Math.LN2],pi:[Ve,[],()=>Math.PI],e:[Ve,[],()=>Math.E],"^":[Ve,[Ve,Ve],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[Ve,[Ve],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Ve,[Ve],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Ve,[Ve],(o,[n])=>Math.log(n.evaluate(o))],log2:[Ve,[Ve],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Ve,[Ve],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Ve,[Ve],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Ve,[Ve],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Ve,[Ve],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Ve,[Ve],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Ve,[Ve],(o,[n])=>Math.atan(n.evaluate(o))],min:[Ve,Oi(Ve),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[Ve,Oi(Ve),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[Ve,[Ve],(o,[n])=>Math.abs(n.evaluate(o))],round:[Ve,[Ve],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Ve,[Ve],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[zt,[Et,Ft],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[zt,[Ft],(o,[n])=>o.id()===n.value],"filter-type-==":[zt,[Et],(o,[n])=>o.geometryType()===n.value],"filter-<":[zt,[Et,Ft],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[zt,[Ft],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[zt,[Et,Ft],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[zt,[Ft],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[zt,[Et,Ft],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[zt,[Ft],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[zt,[Et,Ft],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[zt,[Ft],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[zt,[Ft],(o,[n])=>n.value in o.properties()],"filter-has-id":[zt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[zt,[le(Et)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[zt,[le(Ft)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[zt,[Et,le(Ft)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[zt,[Et,le(Ft)],(o,[n,s])=>function(h,p,v,x){for(;v<=x;){const w=v+x>>1;if(p[w]===h)return!0;p[w]>h?x=w-1:v=w+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:zt,overloads:[[[zt,zt],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Oi(zt),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:zt,overloads:[[[zt,zt],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Oi(zt),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[zt,[zt],(o,[n])=>!n.evaluate(o)],"is-supported-script":[zt,[Et],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Et,[Et],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Et,[Et],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Et,Oi(Ft),(o,n)=>n.map(s=>xa(s.evaluate(o))).join("")],"resolved-locale":[Et,[Dr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class at{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Ns,this._defaultValue=s?(h=s).type==="color"&&gs(h.default)?new zn(0,0,0,0):h.type==="color"?zn.parse(h.default)||null:h.type==="padding"?ri.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?ii.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new sr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Mt(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Co}function Tt(o,n){const s=new jn(Co,Aa,[],n?function(p){const v={color:pn,string:Et,number:Ve,enum:Et,boolean:zt,formatted:ti,padding:ir,resolvedImage:ke,variableAnchorOffsetCollection:ie};return p.type==="array"?le(v[p.value]||Ft,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?xl(new at(h,n)):Yo(s.errors)}class Kt{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Ko(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}}class Jt{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Ko(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}interpolationFactor(n,s,h){return this.interpolationType?_i.interpolationFactor(this.interpolationType,n,s,h):0}}function vn(o,n){const s=Tt(o,n);if(s.result==="error")return s;const h=s.value.expression,p=ms(h);if(!p&&!mo(n))return Yo([new Ee("","data expressions not supported")]);const v=ka(h,["zoom"]);if(!v&&!Po(n))return Yo([new Ee("","zoom expressions not supported")]);const x=_n(h);return x||v?x instanceof Ee?Yo([x]):x instanceof _i&&!Ma(n)?Yo([new Ee("",'"interpolate" expressions cannot be used with this property')]):xl(x?new Jt(p?"camera":"composite",s.value,x.labels,x instanceof _i?x.interpolation:void 0):new Kt(p?"constant":"source",s.value)):Yo([new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fn{constructor(n,s){this._parameters=n,this._specification=s,U(this,Js(this._parameters,this._specification))}static deserialize(n){return new Fn(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function _n(o){let n=null;if(o instanceof fs)n=_n(o.result);else if(o instanceof Sa){for(const s of o.args)if(n=_n(s),n)break}else(o instanceof $s||o instanceof _i)&&o.input instanceof si&&o.input.name==="zoom"&&(n=o);return n instanceof Ee||o.eachChild(s=>{const h=_n(s);h instanceof Ee?n=h:!n&&h?n=new Ee("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Ee("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Un(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Un(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const ar={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ar(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Un(o)||(o=Si(o));const n=Tt(o,ar);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:bi(o)}}function Nr(o,n){return o<n?-1:o>n?1:0}function bi(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(bi(o[n]))return!0;return!1}function Si(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Zi(o[1],o[2],"=="):n==="!="?_s(Zi(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Zi(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(Si))):n==="all"?["all"].concat(o.slice(1).map(Si)):n==="none"?["all"].concat(o.slice(1).map(Si).map(_s)):n==="in"?Tu(o[1],o.slice(2)):n==="!in"?_s(Tu(o[1],o.slice(2))):n==="has"?vs(o[1]):n!=="!has"||_s(vs(o[1]));var s}function Zi(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Tu(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Nr)]]:["filter-in-small",o,["literal",n]]}}function vs(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function _s(o){return["!",o]}function za(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${za(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${za(o[s[p]])},`;return`${h}}`}function Py(o){let n="";for(const s of bn)n+=`/${za(o[s])}`;return n}function Tc(o){const n=o.value;return n?[new M(o.key,n,"constants have been deprecated as of v8")]:[]}function cr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function xs(o){if(Array.isArray(o))return o.map(xs);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=xs(o[s]);return n}return cr(o)}function qi(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,w=o.validateSpec;let P=[];const F=Rn(s);if(F!=="object")return[new M(n,s,`object expected, ${F} found`)];for(const H in s){const K=H.split(".")[0],re=h[K]||h["*"];let ue;if(p[K])ue=p[K];else if(h[K])ue=w;else if(p["*"])ue=p["*"];else{if(!h["*"]){P.push(new M(n,s[H],`unknown property "${H}"`));continue}ue=w}P=P.concat(ue({key:(n&&`${n}.`)+H,value:s[H],valueSpec:re,style:v,styleSpec:x,object:s,objectKey:H,validateSpec:w},s))}for(const H in h)p[H]||h[H].required&&h[H].default===void 0&&s[H]===void 0&&P.push(new M(n,s,`missing required property "${H}"`));return P}function Ic(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(Rn(n)!=="array")return[new M(v,n,`array expected, ${Rn(n)} found`)];if(s.length&&n.length!==s.length)return[new M(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new M(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let w={type:s.value,values:s.values};p.$version<7&&(w.function=s.function),Rn(s.value)==="object"&&(w=s.value);let P=[];for(let F=0;F<n.length;F++)P=P.concat(x({array:n,arrayIndex:F,value:n[F],valueSpec:w,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${F}]`}));return P}function td(o){const n=o.key,s=o.value,h=o.valueSpec;let p=Rn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new M(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new M(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new M(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Cc(o){const n=o.valueSpec,s=cr(o.value.type);let h,p,v,x={};const w=s!=="categorical"&&o.value.property===void 0,P=!w,F=Rn(o.value.stops)==="array"&&Rn(o.value.stops[0])==="array"&&Rn(o.value.stops[0][0])==="object",H=qi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(ue){if(s==="identity")return[new M(ue.key,ue.value,'identity function may not have a "stops" property')];let ge=[];const Ie=ue.value;return ge=ge.concat(Ic({key:ue.key,value:Ie,valueSpec:ue.valueSpec,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:K})),Rn(Ie)==="array"&&Ie.length===0&&ge.push(new M(ue.key,Ie,"array must have at least one stop")),ge},default:function(ue){return ue.validateSpec({key:ue.key,value:ue.value,valueSpec:n,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec})}}});return s==="identity"&&w&&H.push(new M(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||H.push(new M(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!Ma(o.valueSpec)&&H.push(new M(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!mo(o.valueSpec)?H.push(new M(o.key,o.value,"property functions not supported")):w&&!Po(o.valueSpec)&&H.push(new M(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!F||o.value.property!==void 0||H.push(new M(o.key,o.value,'"property" property is required')),H;function K(ue){let ge=[];const Ie=ue.value,Me=ue.key;if(Rn(Ie)!=="array")return[new M(Me,Ie,`array expected, ${Rn(Ie)} found`)];if(Ie.length!==2)return[new M(Me,Ie,`array length 2 expected, length ${Ie.length} found`)];if(F){if(Rn(Ie[0])!=="object")return[new M(Me,Ie,`object expected, ${Rn(Ie[0])} found`)];if(Ie[0].zoom===void 0)return[new M(Me,Ie,"object stop key must have zoom")];if(Ie[0].value===void 0)return[new M(Me,Ie,"object stop key must have value")];if(v&&v>cr(Ie[0].zoom))return[new M(Me,Ie[0].zoom,"stop zoom values must appear in ascending order")];cr(Ie[0].zoom)!==v&&(v=cr(Ie[0].zoom),p=void 0,x={}),ge=ge.concat(qi({key:`${Me}[0]`,value:Ie[0],valueSpec:{zoom:{}},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:td,value:re}}))}else ge=ge.concat(re({key:`${Me}[0]`,value:Ie[0],valueSpec:{},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec},Ie));return Mt(xs(Ie[1]))?ge.concat([new M(`${Me}[1]`,Ie[1],"expressions are not allowed in function stops.")]):ge.concat(ue.validateSpec({key:`${Me}[1]`,value:Ie[1],valueSpec:n,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec}))}function re(ue,ge){const Ie=Rn(ue.value),Me=cr(ue.value),Be=ue.value!==null?ue.value:ge;if(h){if(Ie!==h)return[new M(ue.key,Be,`${Ie} stop domain type must match previous stop domain type ${h}`)]}else h=Ie;if(Ie!=="number"&&Ie!=="string"&&Ie!=="boolean")return[new M(ue.key,Be,"stop domain value must be a number, string, or boolean")];if(Ie!=="number"&&s!=="categorical"){let et=`number expected, ${Ie} found`;return mo(n)&&s===void 0&&(et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new M(ue.key,Be,et)]}return s!=="categorical"||Ie!=="number"||isFinite(Me)&&Math.floor(Me)===Me?s!=="categorical"&&Ie==="number"&&p!==void 0&&Me<p?[new M(ue.key,Be,"stop domain values must appear in ascending order")]:(p=Me,s==="categorical"&&Me in x?[new M(ue.key,Be,"stop domain values must be unique")]:(x[Me]=!0,[])):[new M(ue.key,Be,`integer expected, found ${Me}`)]}}function ws(o){const n=(o.expressionContext==="property"?vn:Tt)(xs(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new M(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new M(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Ko(s))return[new M(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Ko(s))return[new M(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ka(s,["zoom","feature-state"]))return[new M(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ms(s))return[new M(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bl(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(cr(s))===-1&&p.push(new M(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(cr(s))===-1&&p.push(new M(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Pc(o){return Un(xs(o.value))?ws(U({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):nd(o)}function nd(o){const n=o.value,s=o.key;if(Rn(n)!=="array")return[new M(s,n,`array expected, ${Rn(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new M(s,n,"filter array must have at least 1 element")];switch(v=v.concat(bl({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),cr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&cr(n[1])==="$type"&&v.push(new M(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new M(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Rn(n[1]),p!=="string"&&v.push(new M(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=Rn(n[x]),cr(n[1])==="$type"?v=v.concat(bl({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new M(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(nd({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=Rn(n[1]),n.length!==2?v.push(new M(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new M(`${s}[1]`,n[1],`string expected, ${p} found`))}return v}function rd(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,w=o.objectKey,P=v[`${n}_${o.layerType}`];if(!P)return[];const F=w.match(/^(.*)-transition$/);if(n==="paint"&&F&&P[F[1]]&&P[F[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:p,styleSpec:v});const H=o.valueSpec||P[w];if(!H)return[new M(s,x,`unknown property "${w}"`)];let K;if(Rn(x)==="string"&&mo(H)&&!H.tokens&&(K=/^{([^}]+)}$/.exec(x)))return[new M(s,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const re=[];return o.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&re.push(new M(s,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&gs(xs(x))&&cr(x.type)==="identity"&&re.push(new M(s,x,'"text-font" does not support identity functions'))),re.concat(h({key:o.key,value:x,valueSpec:H,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:w}))}function Ac(o){return rd(o,"paint")}function id(o){return rd(o,"layout")}function cp(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new M(h,s,'either "type" or "ref" is required'));let x=cr(s.type);const w=cr(s.ref);if(s.id){const P=cr(s.id);for(let F=0;F<o.arrayIndex;F++){const H=p.layers[F];cr(H.id)===P&&n.push(new M(h,s.id,`duplicate layer id "${s.id}", previously used at line ${H.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(F=>{F in s&&n.push(new M(h,s[F],`"${F}" is prohibited for ref layers`))}),p.layers.forEach(F=>{cr(F.id)===w&&(P=F)}),P?P.ref?n.push(new M(h,s.ref,"ref cannot reference another ref layer")):x=cr(P.type):n.push(new M(h,s.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],F=P&&cr(P.type);P?F==="vector"&&x==="raster"?n.push(new M(h,s.source,`layer "${s.id}" requires a raster source`)):F!=="raster-dem"&&x==="hillshade"?n.push(new M(h,s.source,`layer "${s.id}" requires a raster-dem source`)):F==="raster"&&x!=="raster"?n.push(new M(h,s.source,`layer "${s.id}" requires a vector source`)):F!=="vector"||s["source-layer"]?F==="raster-dem"&&x!=="hillshade"?n.push(new M(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||F==="geojson"&&P.lineMetrics||n.push(new M(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new M(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new M(h,s.source,`source "${s.source}" not found`))}else n.push(new M(h,s,'missing required property "source"'));return n=n.concat(qi({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Pc,layout:P=>qi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>id(U({layerType:x},F))}}),paint:P=>qi({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":F=>Ac(U({layerType:x},F))}})}})),n}function Qs(o){const n=o.value,s=o.key,h=Rn(n);return h!=="string"?[new M(s,n,`string expected, ${h} found`)]:[]}const hp={promoteId:function({key:o,value:n}){if(Rn(n)==="string")return Qs({key:o,value:n});{const s=[];for(const h in n)s.push(...Qs({key:`${o}.${h}`,value:n[h]}));return s}}};function od(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new M(s,n,'"type" is required')];const x=cr(n.type);let w;switch(x){case"vector":case"raster":return w=qi({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:hp,validateSpec:v}),w;case"raster-dem":return w=function(P){var F;const H=(F=P.sourceName)!==null&&F!==void 0?F:"",K=P.value,re=P.styleSpec,ue=re.source_raster_dem,ge=P.style;let Ie=[];const Me=Rn(K);if(K===void 0)return Ie;if(Me!=="object")return Ie.push(new M("source_raster_dem",K,`object expected, ${Me} found`)),Ie;const Be=cr(K.encoding)==="custom",et=["redFactor","greenFactor","blueFactor","baseShift"],Ze=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Je in K)!Be&&et.includes(Je)?Ie.push(new M(Je,K[Je],`In "${H}": "${Je}" is only valid when "encoding" is set to "custom". ${Ze} encoding found`)):ue[Je]?Ie=Ie.concat(P.validateSpec({key:Je,value:K[Je],valueSpec:ue[Je],validateSpec:P.validateSpec,style:ge,styleSpec:re})):Ie.push(new M(Je,K[Je],`unknown property "${Je}"`));return Ie}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:v}),w;case"geojson":if(w=qi({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:hp}),n.cluster)for(const P in n.clusterProperties){const[F,H]=n.clusterProperties[P],K=typeof F=="string"?[F,["accumulated"],["get",P]]:F;w.push(...ws({key:`${s}.${P}.map`,value:H,validateSpec:v,expressionContext:"cluster-map"})),w.push(...ws({key:`${s}.${P}.reduce`,value:K,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return qi({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return qi({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new M(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return bl({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function sd(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const x=Rn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new M("light",n,`object expected, ${x} found`)]),v;for(const w in n){const P=w.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:w,value:n[w],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new M(w,n[w],`unknown property "${w}"`)])}return v}function ad(o){const n=o.value,s=o.styleSpec,h=s.sky,p=o.style,v=Rn(n);if(n===void 0)return[];if(v!=="object")return[new M("sky",n,`object expected, ${v} found`)];let x=[];for(const w in n)x=x.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],style:p,styleSpec:s}):[new M(w,n[w],`unknown property "${w}"`)]);return x}function dp(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const x=Rn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new M("terrain",n,`object expected, ${x} found`)]),v;for(const w in n)v=v.concat(h[w]?o.validateSpec({key:w,value:n[w],valueSpec:h[w],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new M(w,n[w],`unknown property "${w}"`)]);return v}function fp(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new M(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new M(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(qi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Qs({key:h,value:s})}const ld={"*":()=>[],array:Ic,boolean:function(o){const n=o.value,s=o.key,h=Rn(n);return h!=="boolean"?[new M(s,n,`boolean expected, ${h} found`)]:[]},number:td,color:function(o){const n=o.key,s=o.value,h=Rn(s);return h!=="string"?[new M(n,s,`color expected, ${h} found`)]:zn.parse(String(s))?[]:[new M(n,s,`color expected, "${s}" found`)]},constants:Tc,enum:bl,filter:Pc,function:Cc,layer:cp,object:qi,source:od,light:sd,sky:ad,terrain:dp,string:Qs,formatted:function(o){return Qs(o).length===0?[]:ws(o)},resolvedImage:function(o){return Qs(o).length===0?[]:ws(o)},padding:function(o){const n=o.key,s=o.value;if(Rn(s)==="array"){if(s.length<1||s.length>4)return[new M(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return td({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=Rn(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new M(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(bl({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Ic({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:fp};function Sl(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Sl,s.expression&&gs(cr(n))?Cc(o):s.expression&&Mt(xs(n))?ws(o):s.type&&ld[s.type]?ld[s.type](o):qi(U({},o,{valueSpec:s.type?h[s.type]:s}))}function ud(o){const n=o.value,s=o.key,h=Qs(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new M(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new M(s,n,'"glyphs" url must include a "{range}" token'))),h}function go(o,n=it){let s=[];return s=s.concat(Sl({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Sl,objectElementValidators:{glyphs:ud,"*":()=>[]}})),o.constants&&(s=s.concat(Tc({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Sl}))),pp(s)}function Xi(o){return function(n){return o({...n,validateSpec:Sl})}}function pp(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function yo(o){return function(...n){return pp(o.apply(this,n))}}go.source=yo(Xi(od)),go.sprite=yo(Xi(fp)),go.glyphs=yo(Xi(ud)),go.light=yo(Xi(sd)),go.sky=yo(Xi(ad)),go.terrain=yo(Xi(dp)),go.layer=yo(Xi(cp)),go.filter=yo(Xi(Pc)),go.paintProperty=yo(Xi(Ac)),go.layoutProperty=yo(Xi(id));const Iu=go,Ay=Iu.light,mp=Iu.paintProperty,gp=Iu.layoutProperty;function cd(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new Lt(new Error(h.message))),s=!0;return s}class Cu{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const F=x[3+P],H=x[3+P+1];p.push(F===H?null:x.subarray(F,H))}const w=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,x){this.cells[v].push(x)}query(n,s,h,p,v){const x=this.min,w=this.max;if(n<=x&&s<=x&&w<=h&&w<=p&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},v),P}}_queryCell(n,s,h,p,v,x,w,P){const F=this.cells[v];if(F!==null){const H=this.keys,K=this.bboxes;for(let re=0;re<F.length;re++){const ue=F[re];if(w[ue]===void 0){const ge=4*ue;(P?P(K[ge+0],K[ge+1],K[ge+2],K[ge+3]):n<=K[ge+2]&&s<=K[ge+3]&&h>=K[ge+0]&&p>=K[ge+1])?(w[ue]=!0,x.push(H[ue])):w[ue]=!1}}}}_forEachCell(n,s,h,p,v,x,w,P){const F=this._convertToCellCoord(n),H=this._convertToCellCoord(s),K=this._convertToCellCoord(h),re=this._convertToCellCoord(p);for(let ue=F;ue<=K;ue++)for(let ge=H;ge<=re;ge++){const Ie=this.d*ge+ue;if((!P||P(this._convertFromCellCoord(ue),this._convertFromCellCoord(ge),this._convertFromCellCoord(ue+1),this._convertFromCellCoord(ge+1)))&&v.call(this,n,s,h,p,Ie,x,w,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const w=n[x];p[3+x]=v,p.set(w,v),v+=w.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Cu(n.buffer)}}const ea={};function $t(o,n,s={}){if(ea[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),ea[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}$t("Object",Object),$t("TransferableGridIndex",Cu),$t("Color",zn),$t("Error",Error),$t("AJAXError",ot),$t("ResolvedImage",Fi),$t("StylePropertyFunction",Fn),$t("StyleExpression",at,{omit:["_evaluator"]}),$t("ZoomDependentExpression",Jt),$t("ZoomConstantExpression",Kt),$t("CompoundExpression",si,{omit:["_evaluate"]});for(const o in Co)Co[o]._classRegistryKey||$t(`Expression_${o}`,Co[o]);function yp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Pu(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(yp(o)||J(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(Pu(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!ea[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||ea[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=ea[h].shallow.indexOf(v)>=0?x:Pu(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Jo(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||yp(o)||J(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Jo);if(typeof o=="object"){const n=o.$name||"Object";if(!ea[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=ea[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=ea[n].shallow.indexOf(p)>=0?v:Jo(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class vp{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Dt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function hd(o){for(const n of o)if(dd(n.charCodeAt(0)))return!0;return!1}function ky(o){for(const n of o)if(!_p(n.charCodeAt(0)))return!1;return!0}function _p(o){return!(Dt.Arabic(o)||Dt["Arabic Supplement"](o)||Dt["Arabic Extended-A"](o)||Dt["Arabic Presentation Forms-A"](o)||Dt["Arabic Presentation Forms-B"](o))}function dd(o){return!(o!==746&&o!==747&&(o<4352||!(Dt["Bopomofo Extended"](o)||Dt.Bopomofo(o)||Dt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Dt["CJK Compatibility Ideographs"](o)||Dt["CJK Compatibility"](o)||Dt["CJK Radicals Supplement"](o)||Dt["CJK Strokes"](o)||!(!Dt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Dt["CJK Unified Ideographs Extension A"](o)||Dt["CJK Unified Ideographs"](o)||Dt["Enclosed CJK Letters and Months"](o)||Dt["Hangul Compatibility Jamo"](o)||Dt["Hangul Jamo Extended-A"](o)||Dt["Hangul Jamo Extended-B"](o)||Dt["Hangul Jamo"](o)||Dt["Hangul Syllables"](o)||Dt.Hiragana(o)||Dt["Ideographic Description Characters"](o)||Dt.Kanbun(o)||Dt["Kangxi Radicals"](o)||Dt["Katakana Phonetic Extensions"](o)||Dt.Katakana(o)&&o!==12540||!(!Dt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Dt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Dt["Unified Canadian Aboriginal Syllabics"](o)||Dt["Unified Canadian Aboriginal Syllabics Extended"](o)||Dt["Vertical Forms"](o)||Dt["Yijing Hexagram Symbols"](o)||Dt["Yi Syllables"](o)||Dt["Yi Radicals"](o))))}function xp(o){return!(dd(o)||function(n){return!!(Dt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Dt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Dt["Letterlike Symbols"](n)||Dt["Number Forms"](n)||Dt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Dt["Control Pictures"](n)&&n!==9251||Dt["Optical Character Recognition"](n)||Dt["Enclosed Alphanumerics"](n)||Dt["Geometric Shapes"](n)||Dt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Dt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Dt["CJK Symbols and Punctuation"](n)||Dt.Katakana(n)||Dt["Private Use Area"](n)||Dt["CJK Compatibility Forms"](n)||Dt["Small Form Variants"](n)||Dt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function ta(o){return o>=1424&&o<=2303||Dt["Arabic Presentation Forms-A"](o)||Dt["Arabic Presentation Forms-B"](o)}function wp(o,n){return!(!n&&ta(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Dt.Khmer(o))}function fd(o){for(const n of o)if(ta(n.charCodeAt(0)))return!0;return!1}const na=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Kn{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vp,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!wp(p.charCodeAt(0),h))return!1;return!0}(n,na.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class kc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(gs(h))return new Fn(h,p);if(Mt(h)){const v=vn(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=zn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=ii.parse(h)):v=ri.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class El{constructor(n){this.property=n,this.value=new kc(n,void 0)}transitioned(n,s){return new bp(this.property,this.value,s,E({},n.transition,this.transition),n.now)}untransitioned(){return new bp(this.property,this.value,null,{},0)}}class Tl{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Z(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new El(this._values[n].property)),this._values[n].value=new kc(this._values[n].property,s===null?void 0:Z(s))}getTransition(n){return Z(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new El(this._values[n].property)),this._values[n].transition=Z(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new pd(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new pd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class bp{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const F=P*P,H=F*P;return 4*(P<.5?H:3*(P-F)+H-.75)}(w))}}return v}}class pd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new Mc(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Au{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Z(this._values[n].value)}setValue(n,s){this._values[n]=new kc(this._values[n].property,s===null?void 0:Z(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new Mc(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class Qo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class Mc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Qt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=Xr[this.specification.type];return p?p(n,s,h):n}}class ln{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Qo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Qo(this,{kind:"constant",value:void 0},n.parameters);const p=Xr[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new Qo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,x)}}class y extends ln{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Qo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,s);return new Qo(this,{kind:"constant",value:w},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Qo(this,{kind:"constant",value:v},s)}return new Qo(this,n.expression,s)}evaluate(n,s,h,p,v,x){if(n.kind==="source"){const w=n.evaluate(s,h,p,v,x);return this._calculate(w,w,w,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class r{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new Kn(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Kn(Math.floor(s.zoom),s)),n.expression.evaluate(new Kn(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class l{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class d{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new kc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new El(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}$t("DataDrivenProperty",ln),$t("DataConstantProperty",Qt),$t("CrossFadedDataDrivenProperty",y),$t("CrossFadedProperty",r),$t("ColorRampProperty",l);const g="-transition";class _ extends cn{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Au(s.layout)),s.paint)){this._transitionablePaint=new Tl(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Mc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(gp,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(g)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(mp,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(g))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,w,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&cd(this,n.call(Iu,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Qo&&mo(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const T={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class A{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class z{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=T[p.type].BYTES_PER_ELEMENT,x=s=te(s,Math.max(n,v)),w=p.components||1;return h=Math.max(h,v),s+=v*w,{name:p.name,type:p.type,components:w,offset:x}}),size:te(s,Math.max(h,n)),alignment:n}}function te(o,n){return Math.ceil(o/n)*n}class Q extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}Q.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",Q);class me extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}me.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",me);class be extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}be.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",be);class Ce extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,w){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=w,n}}Ce.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",Ce);class Le extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,w){const P=4*n,F=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[F+4]=p,this.uint8[F+5]=v,this.uint8[F+6]=x,this.uint8[F+7]=w,n}}Le.prototype.bytesPerElement=8,$t("StructArrayLayout2i4ub8",Le);class Ae extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}Ae.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",Ae);class Ge extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,w,P,F,H){const K=this.length;return this.resize(K+1),this.emplace(K,n,s,h,p,v,x,w,P,F,H)}emplace(n,s,h,p,v,x,w,P,F,H,K){const re=10*n;return this.uint16[re+0]=s,this.uint16[re+1]=h,this.uint16[re+2]=p,this.uint16[re+3]=v,this.uint16[re+4]=x,this.uint16[re+5]=w,this.uint16[re+6]=P,this.uint16[re+7]=F,this.uint16[re+8]=H,this.uint16[re+9]=K,n}}Ge.prototype.bytesPerElement=20,$t("StructArrayLayout10ui20",Ge);class Ke extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,w,P,F,H,K,re){const ue=this.length;return this.resize(ue+1),this.emplace(ue,n,s,h,p,v,x,w,P,F,H,K,re)}emplace(n,s,h,p,v,x,w,P,F,H,K,re,ue){const ge=12*n;return this.int16[ge+0]=s,this.int16[ge+1]=h,this.int16[ge+2]=p,this.int16[ge+3]=v,this.uint16[ge+4]=x,this.uint16[ge+5]=w,this.uint16[ge+6]=P,this.uint16[ge+7]=F,this.int16[ge+8]=H,this.int16[ge+9]=K,this.int16[ge+10]=re,this.int16[ge+11]=ue,n}}Ke.prototype.bytesPerElement=24,$t("StructArrayLayout4i4ui4i24",Ke);class Re extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}Re.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",Re);class Ye extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Ye.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",Ye);class nt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,w,P,F){const H=this.length;return this.resize(H+1),this.emplace(H,n,s,h,p,v,x,w,P,F)}emplace(n,s,h,p,v,x,w,P,F,H){const K=10*n,re=5*n;return this.int16[K+0]=s,this.int16[K+1]=h,this.int16[K+2]=p,this.int16[K+3]=v,this.int16[K+4]=x,this.int16[K+5]=w,this.uint32[re+3]=P,this.uint16[K+8]=F,this.uint16[K+9]=H,n}}nt.prototype.bytesPerElement=20,$t("StructArrayLayout6i1ul2ui20",nt);class st extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,w){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=w,n}}st.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",st);class mt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,v)}emplace(n,s,h,p,v,x){const w=4*n,P=8*n;return this.float32[w+0]=s,this.float32[w+1]=h,this.float32[w+2]=p,this.int16[P+6]=v,this.int16[P+7]=x,n}}mt.prototype.bytesPerElement=16,$t("StructArrayLayout2f1f2i16",mt);class bt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,w){const P=16*n,F=4*n,H=8*n;return this.uint8[P+0]=s,this.uint8[P+1]=h,this.float32[F+1]=p,this.float32[F+2]=v,this.int16[H+6]=x,this.int16[H+7]=w,n}}bt.prototype.bytesPerElement=16,$t("StructArrayLayout2ub2f2i16",bt);class Nt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}Nt.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",Nt);class Ut extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie,Me,Be){const et=this.length;return this.resize(et+1),this.emplace(et,n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie,Me,Be)}emplace(n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie,Me,Be,et){const Ze=24*n,Je=12*n,ft=48*n;return this.int16[Ze+0]=s,this.int16[Ze+1]=h,this.uint16[Ze+2]=p,this.uint16[Ze+3]=v,this.uint32[Je+2]=x,this.uint32[Je+3]=w,this.uint32[Je+4]=P,this.uint16[Ze+10]=F,this.uint16[Ze+11]=H,this.uint16[Ze+12]=K,this.float32[Je+7]=re,this.float32[Je+8]=ue,this.uint8[ft+36]=ge,this.uint8[ft+37]=Ie,this.uint8[ft+38]=Me,this.uint32[Je+10]=Be,this.int16[Ze+22]=et,n}}Ut.prototype.bytesPerElement=48,$t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ut);class St extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie,Me,Be,et,Ze,Je,ft,gt,Bt,Xt,Ot,At,Vt,en){const jt=this.length;return this.resize(jt+1),this.emplace(jt,n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie,Me,Be,et,Ze,Je,ft,gt,Bt,Xt,Ot,At,Vt,en)}emplace(n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie,Me,Be,et,Ze,Je,ft,gt,Bt,Xt,Ot,At,Vt,en,jt){const _t=32*n,Zt=16*n;return this.int16[_t+0]=s,this.int16[_t+1]=h,this.int16[_t+2]=p,this.int16[_t+3]=v,this.int16[_t+4]=x,this.int16[_t+5]=w,this.int16[_t+6]=P,this.int16[_t+7]=F,this.uint16[_t+8]=H,this.uint16[_t+9]=K,this.uint16[_t+10]=re,this.uint16[_t+11]=ue,this.uint16[_t+12]=ge,this.uint16[_t+13]=Ie,this.uint16[_t+14]=Me,this.uint16[_t+15]=Be,this.uint16[_t+16]=et,this.uint16[_t+17]=Ze,this.uint16[_t+18]=Je,this.uint16[_t+19]=ft,this.uint16[_t+20]=gt,this.uint16[_t+21]=Bt,this.uint16[_t+22]=Xt,this.uint32[Zt+12]=Ot,this.float32[Zt+13]=At,this.float32[Zt+14]=Vt,this.uint16[_t+30]=en,this.uint16[_t+31]=jt,n}}St.prototype.bytesPerElement=64,$t("StructArrayLayout8i15ui1ul2f2ui64",St);class It extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}It.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",It);class Wt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}Wt.prototype.bytesPerElement=12,$t("StructArrayLayout1ui2f12",Wt);class gn extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}gn.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",gn);class Pt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}Pt.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",Pt);class Rt extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Rt.prototype.bytesPerElement=2,$t("StructArrayLayout1ui2",Rt);class dn extends z{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}dn.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",dn);class er extends A{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}er.prototype.size=20;class En extends nt{get(n){return new er(this,n)}}$t("CollisionBoxArray",En);class An extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}An.prototype.size=48;class tr extends Ut{get(n){return new An(this,n)}}$t("PlacedSymbolArray",tr);class ai extends A{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ai.prototype.size=64;class Ao extends St{get(n){return new ai(this,n)}}$t("SymbolInstanceArray",Ao);class nr extends It{getoffsetX(n){return this.float32[1*n+0]}}$t("GlyphOffsetArray",nr);class ji extends me{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}$t("SymbolLineVertexArray",ji);class Ei extends A{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ei.prototype.size=12;class li extends Wt{get(n){return new Ei(this,n)}}$t("TextAnchorOffsetArray",li);class ui extends A{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ui.prototype.size=8;class ko extends gn{get(n){return new ui(this,n)}}$t("FeatureIndexArray",ko);class Fa extends Q{}class zc extends Q{}class Il extends Q{}class Ra extends Ce{}class Fc extends Le{}class md extends Ae{}class Kr extends Ge{}class Mo extends Ke{}class ra extends Re{}class Cl extends Ye{}class ci extends st{}class hi extends bt{}class Hr extends Nt{}class lr extends Pt{}const Pl=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:gd}=Pl;class Ur{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>Ur.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${Ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Ur.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new Ur([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function Sp(o,n){return 256*(o=X(Math.floor(o),0,255))+X(Math.floor(n),0,255)}Ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",Ur);const Rc=$([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Oc={exports:{}},ia={exports:{}};ia.exports=function(o,n){var s,h,p,v,x,w,P,F;for(h=o.length-(s=3&o.length),p=n,x=3432918353,w=461845907,F=0;F<h;)P=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,p=27492+(65535&(v=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*w+(((P>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(F+2))<<16;case 2:P^=(255&o.charCodeAt(F+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(F)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*w+(((P>>>16)*w&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Ep=ia.exports,yd={exports:{}};yd.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var vd=Ep,_d=yd.exports;Oc.exports=vd,Oc.exports.murmur3=vd,Oc.exports.murmur2=_d;var jc=S(Oc.exports);class Al{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Xx(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Xx(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return My(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new Al;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Xx(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:jc(String(o))}function My(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Tp(o,v,x),Tp(n,3*v,3*x),Tp(n,3*v+1,3*x+1),Tp(n,3*v+2,3*x+2)}x-s<h-x?(My(o,n,s,x),s=x+1):(My(o,n,x+1,h),h=x)}}function Tp(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}$t("FeaturePositionMap",Al);class ku{constructor(n,s){this.gl=n.gl,this.location=s}}class Ip extends ku{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Kx extends ku{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Yx extends ku{constructor(n,s){super(n,s),this.current=zn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const XP=new Float32Array(16);function zy(o){return[Sp(255*o.r,255*o.g),Sp(255*o.b,255*o.a)]}class xd{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Yx(n,s):new Ip(n,s)}}class Lc{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Kx(n,s):new Ip(n,s)}}class Oa{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Kn(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,w)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=zy(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bs{constructor(n,s,h,p,v,x){this.expression=n,this.uniformNames=s.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,v){const x=this.expression.evaluate(new Kn(this.zoom),s,{},p,[],v),w=this.expression.evaluate(new Kn(this.zoom+1),s,{},p,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,w)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=zy(h),x=zy(p);for(let w=n;w<s;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=X(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new Ip(n,s)}}class kl{constructor(n,s,h,p,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:x,max:w}=h,P=p[v],F=p[x],H=p[w];if(P&&F&&H)for(let K=n;K<s;K++)this.zoomInPaintVertexArray.emplace(K,F.tl[0],F.tl[1],F.br[0],F.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],F.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(K,F.tl[0],F.tl[1],F.br[0],F.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],F.pixelRatio,H.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Rc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Rc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Jx{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Qo&&mo(x.property.specification)))continue;const w=KP(v,n.type),P=x.value,F=x.property.specification.type,H=x.property.useIntegerZoom,K=x.property.specification["property-type"],re=K==="cross-faded"||K==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=re?new Lc(P.value,w):new xd(P.value,w,F),p.push(`/u_${v}`);else if(P.kind==="source"||re){const ue=Qx(v,F,"source");this.binders[v]=re?new kl(P,F,H,s,ue,n.id):new Oa(P,w,F,ue),p.push(`/a_${v}`)}else{const ue=Qx(v,F,"composite");this.binders[v]=new bs(P,w,F,H,s,ue),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Oa||s instanceof bs?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const x in this.binders){const w=this.binders[x];(w instanceof Oa||w instanceof bs||w instanceof kl)&&w.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof Lc&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let x=!1;for(const w in n){const P=s.getPositions(w);for(const F of P){const H=h.feature(F.index);for(const K in this.binders){const re=this.binders[K];if((re instanceof Oa||re instanceof bs||re instanceof kl)&&re.expression.isStateDependent===!0){const ue=p.paint.get(K);re.expression=ue.value,re.updatePaintArray(F.start,F.end,H,n[w],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof xd||h instanceof Lc)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Oa||h instanceof bs)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof kl)for(let p=0;p<Rc.members.length;p++)n.push(Rc.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof xd||h instanceof Lc||h instanceof bs)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof xd||v instanceof Lc||v instanceof bs){for(const x of v.uniformNames)if(s[x]){const w=v.getBinding(n,s[x],x);h.push({name:x,property:p,binding:w})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:x,binding:w}of s)this.binders[x].setUniform(w,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof kl){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof Oa||h instanceof bs)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Oa||h instanceof bs||h instanceof kl)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Oa||s instanceof bs||s instanceof kl)&&s.destroy()}}}class Mu{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Jx(p,s,h);this.needsUpload=!1,this._featureMap=new Al,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,s,p,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function KP(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Qx(o,n,s){const h={color:{source:Ae,composite:dn},number:{source:It,composite:Ae}},p=function(v){return{"line-pattern":{source:Kr,composite:Kr},"fill-pattern":{source:Kr,composite:Kr},"fill-extrusion-pattern":{source:Kr,composite:Kr}}[v]}(o);return p&&p[s]||h[n][s]}$t("ConstantBinder",xd),$t("CrossFadedConstantBinder",Lc),$t("SourceExpressionBinder",Oa),$t("CrossFadedCompositeBinder",kl),$t("CompositeExpressionBinder",bs),$t("ProgramConfiguration",Jx,{omit:["_buffers"]}),$t("ProgramConfigurationSet",Mu);const kr=8192,Fy=Math.pow(2,14)-1,ew=-Fy-1;function zu(o){const n=kr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const x=p[v],w=Math.round(x.x*n),P=Math.round(x.y*n);x.x=X(w,ew,Fy),x.y=X(P,ew,Fy),(w<x.x||w>x.x+1||P<x.y||P>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Fu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?zu(o):[]}}function Cp(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class Ry{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new zc,this.indexArray=new Hr,this.segments=new Ur,this.programConfigurations=new Mu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let x=null,w=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:P,id:F,index:H,sourceLayerIndex:K}of n){const re=this.layers[0]._featureFilter.needGeometry,ue=Fu(P,re);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),ue,h))continue;const ge=w?x.evaluate(ue,{},h):void 0,Ie={id:F,properties:P.properties,type:P.type,sourceLayerIndex:K,index:H,geometry:re?ue.geometry:zu(P),patterns:{},sortKey:ge};v.push(Ie)}w&&v.sort((P,F)=>P.sortKey-F.sortKey);for(const P of v){const{geometry:F,index:H,sourceLayerIndex:K}=P,re=n[H].feature;this.addFeature(P,F,H,h),s.featureIndex.insert(re,F,H,K,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gd),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const x of v){const w=x.x,P=x.y;if(w<0||w>=kr||P<0||P>=kr)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),H=F.vertexLength;Cp(this.layoutVertexArray,w,P,-1,-1),Cp(this.layoutVertexArray,w,P,1,-1),Cp(this.layoutVertexArray,w,P,1,1),Cp(this.layoutVertexArray,w,P,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+3,H+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function tw(o,n){for(let s=0;s<o.length;s++)if(Dc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Dc(o,n[s]))return!0;return!!Oy(o,n)}function YP(o,n,s){return!!Dc(o,n)||!!jy(n,o,s)}function nw(o,n){if(o.length===1)return iw(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(Dc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(iw(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Oy(o,n[s]))return!0;return!1}function JP(o,n,s){if(o.length>1){if(Oy(o,n))return!0;for(let h=0;h<n.length;h++)if(jy(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(jy(o[h],n,s))return!0;return!1}function Oy(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(QP(h,p,n[v],n[v+1]))return!0}return!1}function QP(o,n,s,h){return pe(o,s,h)!==pe(n,s,h)&&pe(o,n,s)!==pe(o,n,h)}function jy(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(rw(o,n[p-1],n[p])<h)return!0;return!1}function rw(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function iw(o,n){let s,h,p,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let w=0,P=s.length-1;w<s.length;P=w++)h=s[w],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Dc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function eA(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=pe(o,n,s[0]);return v!==pe(o,n,s[1])||v!==pe(o,n,s[2])||v!==pe(o,n,s[3])}function wd(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function Pp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ap(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=b.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let w=0;w<o.length;w++)x.push(o[w].sub(v));return x}let ow,sw;$t("CircleBucket",Ry,{omit:["layers"]});var tA={get paint(){return sw=sw||new d({"circle-radius":new ln(it.paint_circle["circle-radius"]),"circle-color":new ln(it.paint_circle["circle-color"]),"circle-blur":new ln(it.paint_circle["circle-blur"]),"circle-opacity":new ln(it.paint_circle["circle-opacity"]),"circle-translate":new Qt(it.paint_circle["circle-translate"]),"circle-translate-anchor":new Qt(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qt(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qt(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ln(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ln(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ln(it.paint_circle["circle-stroke-opacity"])})},get layout(){return ow=ow||new d({"circle-sort-key":new ln(it.layout_circle["circle-sort-key"])})}},Li=1e-6,Bc=typeof Float32Array<"u"?Float32Array:Array;function Ly(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function aw(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3],w=n[4],P=n[5],F=n[6],H=n[7],K=n[8],re=n[9],ue=n[10],ge=n[11],Ie=n[12],Me=n[13],Be=n[14],et=n[15],Ze=s[0],Je=s[1],ft=s[2],gt=s[3];return o[0]=Ze*h+Je*w+ft*K+gt*Ie,o[1]=Ze*p+Je*P+ft*re+gt*Me,o[2]=Ze*v+Je*F+ft*ue+gt*Be,o[3]=Ze*x+Je*H+ft*ge+gt*et,o[4]=(Ze=s[4])*h+(Je=s[5])*w+(ft=s[6])*K+(gt=s[7])*Ie,o[5]=Ze*p+Je*P+ft*re+gt*Me,o[6]=Ze*v+Je*F+ft*ue+gt*Be,o[7]=Ze*x+Je*H+ft*ge+gt*et,o[8]=(Ze=s[8])*h+(Je=s[9])*w+(ft=s[10])*K+(gt=s[11])*Ie,o[9]=Ze*p+Je*P+ft*re+gt*Me,o[10]=Ze*v+Je*F+ft*ue+gt*Be,o[11]=Ze*x+Je*H+ft*ge+gt*et,o[12]=(Ze=s[12])*h+(Je=s[13])*w+(ft=s[14])*K+(gt=s[15])*Ie,o[13]=Ze*p+Je*P+ft*re+gt*Me,o[14]=Ze*v+Je*F+ft*ue+gt*Be,o[15]=Ze*x+Je*H+ft*ge+gt*et,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var bd,nA=aw;function kp(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,o}bd=new Bc(4),Bc!=Float32Array&&(bd[0]=0,bd[1]=0,bd[2]=0,bd[3]=0);class rA extends _{constructor(n){super(n,tA)}createBucket(n){return new Ry(n)}queryRadius(n){const s=n;return wd("circle-radius",this,s)+wd("circle-stroke-width",this,s)+Pp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,x,w,P){const F=Ap(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),H=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),K=this.paint.get("circle-pitch-alignment")==="map",re=K?F:function(ge,Ie){return ge.map(Me=>lw(Me,Ie))}(F,P),ue=K?H*w:H;for(const ge of p)for(const Ie of ge){const Me=K?Ie:lw(Ie,P);let Be=ue;const et=kp([],[Ie.x,Ie.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=et[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=x.cameraToCenterDistance/et[3]),YP(re,Me,Be))return!0}return!1}}function lw(o,n){const s=kp([],[o.x,o.y,0,1],n);return new b(s[0]/s[3],s[1]/s[3])}class uw extends Ry{}let cw;$t("HeatmapBucket",uw,{omit:["layers"]});var iA={get paint(){return cw=cw||new d({"heatmap-radius":new ln(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ln(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qt(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qt(it.paint_heatmap["heatmap-opacity"])})}};function Dy(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function hw(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=Dy({},{width:n,height:s},h);By(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function By(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,w=n.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const F=((s.y+P)*o.width+s.x)*v,H=((h.y+P)*n.width+h.x)*v;for(let K=0;K<p.width*v;K++)w[H+K]=x[F+K]}return n}class Sd{constructor(n,s){Dy(this,n,1,s)}resize(n){hw(this,n,1)}clone(){return new Sd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){By(n,s,h,p,v,1)}}class zo{constructor(n,s){Dy(this,n,4,s)}resize(n){hw(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){By(n,s,h,p,v,4)}}function dw(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new zo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,w,P)=>{n[o.evaluationKey]=P;const F=o.expression.evaluate(n);p.data[x+w+0]=Math.floor(255*F.r/F.a),p.data[x+w+1]=Math.floor(255*F.g/F.a),p.data[x+w+2]=Math.floor(255*F.b/F.a),p.data[x+w+3]=Math.floor(255*F.a)};if(o.clips)for(let x=0,w=0;x<h;++x,w+=4*s)for(let P=0,F=0;P<s;P++,F+=4){const H=P/(s-1),{start:K,end:re}=o.clips[x];v(w,F,K*(1-H)+re*H)}else for(let x=0,w=0;x<s;x++,w+=4)v(0,w,x/(s-1));return p}$t("AlphaImage",Sd),$t("RGBAImage",zo);class oA extends _{createBucket(n){return new uw(n)}constructor(n){super(n,iA),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let fw;var sA={get paint(){return fw=fw||new d({"hillshade-illumination-direction":new Qt(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qt(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qt(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qt(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qt(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qt(it.paint_hillshade["hillshade-accent-color"])})}};class aA extends _{constructor(n){super(n,sA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const lA=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:uA}=lA;var Ny={exports:{}};function Mp(o,n,s){s=s||2;var h,p,v,x,w,P,F,H=n&&n.length,K=H?n[0]*s:o.length,re=pw(o,0,K,s,!0),ue=[];if(!re||re.next===re.prev)return ue;if(H&&(re=function(Ie,Me,Be,et){var Ze,Je,ft,gt=[];for(Ze=0,Je=Me.length;Ze<Je;Ze++)(ft=pw(Ie,Me[Ze]*et,Ze<Je-1?Me[Ze+1]*et:Ie.length,et,!1))===ft.next&&(ft.steiner=!0),gt.push(yA(ft));for(gt.sort(pA),Ze=0;Ze<gt.length;Ze++)Be=mA(gt[Ze],Be);return Be}(o,n,re,s)),o.length>80*s){h=v=o[0],p=x=o[1];for(var ge=s;ge<K;ge+=s)(w=o[ge])<h&&(h=w),(P=o[ge+1])<p&&(p=P),w>v&&(v=w),P>x&&(x=P);F=(F=Math.max(v-h,x-p))!==0?32767/F:0}return Ed(re,ue,s,h,p,F,0),ue}function pw(o,n,s,h,p){var v,x;if(p===Vy(o,n,s,h)>0)for(v=n;v<s;v+=h)x=yw(v,o[v],o[v+1],x);else for(v=s-h;v>=n;v-=h)x=yw(v,o[v],o[v+1],x);return x&&zp(x,x.next)&&(Id(x),x=x.next),x}function Ru(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!zp(h,h.next)&&Sr(h.prev,h,h.next)!==0)h=h.next;else{if(Id(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function Ed(o,n,s,h,p,v,x){if(o){!x&&v&&function(H,K,re,ue){var ge=H;do ge.z===0&&(ge.z=Uy(ge.x,ge.y,K,re,ue)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==H);ge.prevZ.nextZ=null,ge.prevZ=null,function(Ie){var Me,Be,et,Ze,Je,ft,gt,Bt,Xt=1;do{for(Be=Ie,Ie=null,Je=null,ft=0;Be;){for(ft++,et=Be,gt=0,Me=0;Me<Xt&&(gt++,et=et.nextZ);Me++);for(Bt=Xt;gt>0||Bt>0&&et;)gt!==0&&(Bt===0||!et||Be.z<=et.z)?(Ze=Be,Be=Be.nextZ,gt--):(Ze=et,et=et.nextZ,Bt--),Je?Je.nextZ=Ze:Ie=Ze,Ze.prevZ=Je,Je=Ze;Be=et}Je.nextZ=null,Xt*=2}while(ft>1)}(ge)}(o,h,p,v);for(var w,P,F=o;o.prev!==o.next;)if(w=o.prev,P=o.next,v?hA(o,h,p,v):cA(o))n.push(w.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),Id(o),o=P.next,F=P.next;else if((o=P)===F){x?x===1?Ed(o=dA(Ru(o),n,s),n,s,h,p,v,2):x===2&&fA(o,n,s,h,p,v):Ed(Ru(o),n,s,h,p,v,1);break}}}function cA(o){var n=o.prev,s=o,h=o.next;if(Sr(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,x=h.x,w=n.y,P=s.y,F=h.y,H=p<v?p<x?p:x:v<x?v:x,K=w<P?w<F?w:F:P<F?P:F,re=p>v?p>x?p:x:v>x?v:x,ue=w>P?w>F?w:F:P>F?P:F,ge=h.next;ge!==n;){if(ge.x>=H&&ge.x<=re&&ge.y>=K&&ge.y<=ue&&Nc(p,w,v,P,x,F,ge.x,ge.y)&&Sr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function hA(o,n,s,h){var p=o.prev,v=o,x=o.next;if(Sr(p,v,x)>=0)return!1;for(var w=p.x,P=v.x,F=x.x,H=p.y,K=v.y,re=x.y,ue=w<P?w<F?w:F:P<F?P:F,ge=H<K?H<re?H:re:K<re?K:re,Ie=w>P?w>F?w:F:P>F?P:F,Me=H>K?H>re?H:re:K>re?K:re,Be=Uy(ue,ge,n,s,h),et=Uy(Ie,Me,n,s,h),Ze=o.prevZ,Je=o.nextZ;Ze&&Ze.z>=Be&&Je&&Je.z<=et;){if(Ze.x>=ue&&Ze.x<=Ie&&Ze.y>=ge&&Ze.y<=Me&&Ze!==p&&Ze!==x&&Nc(w,H,P,K,F,re,Ze.x,Ze.y)&&Sr(Ze.prev,Ze,Ze.next)>=0||(Ze=Ze.prevZ,Je.x>=ue&&Je.x<=Ie&&Je.y>=ge&&Je.y<=Me&&Je!==p&&Je!==x&&Nc(w,H,P,K,F,re,Je.x,Je.y)&&Sr(Je.prev,Je,Je.next)>=0))return!1;Je=Je.nextZ}for(;Ze&&Ze.z>=Be;){if(Ze.x>=ue&&Ze.x<=Ie&&Ze.y>=ge&&Ze.y<=Me&&Ze!==p&&Ze!==x&&Nc(w,H,P,K,F,re,Ze.x,Ze.y)&&Sr(Ze.prev,Ze,Ze.next)>=0)return!1;Ze=Ze.prevZ}for(;Je&&Je.z<=et;){if(Je.x>=ue&&Je.x<=Ie&&Je.y>=ge&&Je.y<=Me&&Je!==p&&Je!==x&&Nc(w,H,P,K,F,re,Je.x,Je.y)&&Sr(Je.prev,Je,Je.next)>=0)return!1;Je=Je.nextZ}return!0}function dA(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!zp(p,v)&&mw(p,h,h.next,v)&&Td(p,v)&&Td(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),Id(h),Id(h.next),h=o=v),h=h.next}while(h!==o);return Ru(h)}function fA(o,n,s,h,p,v){var x=o;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&vA(x,w)){var P=gw(x,w);return x=Ru(x,x.next),P=Ru(P,P.next),Ed(x,n,s,h,p,v,0),void Ed(P,n,s,h,p,v,0)}w=w.next}x=x.next}while(x!==o)}function pA(o,n){return o.x-n.x}function mA(o,n){var s=function(p,v){var x,w=v,P=p.x,F=p.y,H=-1/0;do{if(F<=w.y&&F>=w.next.y&&w.next.y!==w.y){var K=w.x+(F-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(K<=P&&K>H&&(H=K,x=w.x<w.next.x?w:w.next,K===P))return x}w=w.next}while(w!==v);if(!x)return null;var re,ue=x,ge=x.x,Ie=x.y,Me=1/0;w=x;do P>=w.x&&w.x>=ge&&P!==w.x&&Nc(F<Ie?P:H,F,ge,Ie,F<Ie?H:P,F,w.x,w.y)&&(re=Math.abs(F-w.y)/(P-w.x),Td(w,p)&&(re<Me||re===Me&&(w.x>x.x||w.x===x.x&&gA(x,w)))&&(x=w,Me=re)),w=w.next;while(w!==ue);return x}(o,n);if(!s)return n;var h=gw(s,o);return Ru(h,h.next),Ru(s,s.next)}function gA(o,n){return Sr(o.prev,o,n.prev)<0&&Sr(n.next,o,o.next)<0}function Uy(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function yA(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Nc(o,n,s,h,p,v,x,w){return(p-x)*(n-w)>=(o-x)*(v-w)&&(o-x)*(h-w)>=(s-x)*(n-w)&&(s-x)*(v-w)>=(p-x)*(h-w)}function vA(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&mw(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(Td(o,n)&&Td(n,o)&&function(s,h){var p=s,v=!1,x=(s.x+h.x)/2,w=(s.y+h.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&x<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Sr(o.prev,o,n.prev)||Sr(o,n.prev,n))||zp(o,n)&&Sr(o.prev,o,o.next)>0&&Sr(n.prev,n,n.next)>0)}function Sr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function zp(o,n){return o.x===n.x&&o.y===n.y}function mw(o,n,s,h){var p=Rp(Sr(o,n,s)),v=Rp(Sr(o,n,h)),x=Rp(Sr(s,h,o)),w=Rp(Sr(s,h,n));return p!==v&&x!==w||!(p!==0||!Fp(o,s,n))||!(v!==0||!Fp(o,h,n))||!(x!==0||!Fp(s,o,h))||!(w!==0||!Fp(s,n,h))}function Fp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Rp(o){return o>0?1:o<0?-1:0}function Td(o,n){return Sr(o.prev,o,o.next)<0?Sr(o,n,o.next)>=0&&Sr(o,o.prev,n)>=0:Sr(o,n,o.prev)<0||Sr(o,o.next,n)<0}function gw(o,n){var s=new $y(o.i,o.x,o.y),h=new $y(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function yw(o,n,s,h){var p=new $y(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Id(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function $y(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vy(o,n,s,h){for(var p=0,v=n,x=s-h;v<s;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}Ny.exports=Mp,Ny.exports.default=Mp,Mp.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(Vy(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,w=n.length;x<w;x++)v-=Math.abs(Vy(o,n[x]*s,x<w-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var F=h[x]*s,H=h[x+1]*s,K=h[x+2]*s;P+=Math.abs((o[F]-o[K])*(o[H+1]-o[F+1])-(o[F]-o[H])*(o[K+1]-o[F+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Mp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)s.vertices.push(o[p][v][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var vw=S(Ny.exports);function Gy(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const w=x.constantOr(null);w&&(p=!0,h[w.to]=!0,h[w.from]=!0)}return p}function Wy(o,n,s,h,p){const v=p.patternDependencies;for(const x of n){const w=x.paint.get(`${o}-pattern`).value;if(w.kind!=="constant"){let P=w.evaluate({zoom:h-1},s,{},p.availableImages),F=w.evaluate({zoom:h},s,{},p.availableImages),H=w.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,F=F&&F.name?F.name:F,H=H&&H.name?H.name:H,v[P]=!0,v[F]=!0,v[H]=!0,s.patterns[x.id]={min:P,mid:F,max:H}}}return s}class Hy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Il,this.indexArray=new Hr,this.indexArray2=new lr,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Ur,this.segments2=new Ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Gy("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:w,id:P,index:F,sourceLayerIndex:H}of n){const K=this.layers[0]._featureFilter.needGeometry,re=Fu(w,K);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),re,h))continue;const ue=v?p.evaluate(re,{},h,s.availableImages):void 0,ge={id:P,properties:w.properties,type:w.type,sourceLayerIndex:H,index:F,geometry:K?re.geometry:zu(w),patterns:{},sortKey:ue};x.push(ge)}v&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:F,sourceLayerIndex:H}=w;if(this.hasPattern){const K=Wy("fill",this.layers,w,this.zoom,s);this.patternFeatures.push(K)}else this.addFeature(w,P,F,h,{});s.featureIndex.insert(n[F].feature,P,F,H,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const x of gl(s,500)){let w=0;for(const ue of x)w+=ue.length;const P=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),F=P.vertexLength,H=[],K=[];for(const ue of x){if(ue.length===0)continue;ue!==x[0]&&K.push(H.length/2);const ge=this.segments2.prepareSegment(ue.length,this.layoutVertexArray,this.indexArray2),Ie=ge.vertexLength;this.layoutVertexArray.emplaceBack(ue[0].x,ue[0].y),this.indexArray2.emplaceBack(Ie+ue.length-1,Ie),H.push(ue[0].x),H.push(ue[0].y);for(let Me=1;Me<ue.length;Me++)this.layoutVertexArray.emplaceBack(ue[Me].x,ue[Me].y),this.indexArray2.emplaceBack(Ie+Me-1,Ie+Me),H.push(ue[Me].x),H.push(ue[Me].y);ge.vertexLength+=ue.length,ge.primitiveLength+=ue.length}const re=vw(H,K);for(let ue=0;ue<re.length;ue+=3)this.indexArray.emplaceBack(F+re[ue],F+re[ue+1],F+re[ue+2]);P.vertexLength+=w,P.primitiveLength+=re.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let _w,xw;$t("FillBucket",Hy,{omit:["layers","patternFeatures"]});var _A={get paint(){return xw=xw||new d({"fill-antialias":new Qt(it.paint_fill["fill-antialias"]),"fill-opacity":new ln(it.paint_fill["fill-opacity"]),"fill-color":new ln(it.paint_fill["fill-color"]),"fill-outline-color":new ln(it.paint_fill["fill-outline-color"]),"fill-translate":new Qt(it.paint_fill["fill-translate"]),"fill-translate-anchor":new Qt(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new y(it.paint_fill["fill-pattern"])})},get layout(){return _w=_w||new d({"fill-sort-key":new ln(it.layout_fill["fill-sort-key"])})}};class xA extends _{constructor(n){super(n,_A)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Hy(n)}queryRadius(){return Pp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,x,w){return nw(Ap(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),p)}isTileClipped(){return!0}}const wA=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bA=$([{name:"a_centroid",components:2,type:"Int16"}],4),{members:SA}=wA;var Ml={},EA=C,ww=Uc;function Uc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(TA,this,n)}function TA(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],w=p._values[h.readVarint()];p.properties[x]=w}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function IA(o){for(var n,s,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}Uc.types=["Unknown","Point","LineString","Polygon"],Uc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,w=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&w.push(n),n=[]),n.push(new EA(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&w.push(n),w},Uc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,x=1/0,w=-1/0,P=1/0,F=-1/0;o.pos<n;){if(h<=0){var H=o.readVarint();s=7&H,h=H>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>w&&(w=p),(v+=o.readSVarint())<P&&(P=v),v>F&&(F=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,w,F]},Uc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),x=this.extent*o,w=this.extent*n,P=this.loadGeometry(),F=Uc.types[this.type];function H(ue){for(var ge=0;ge<ue.length;ge++){var Ie=ue[ge];ue[ge]=[360*(Ie.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ie.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var K=[];for(h=0;h<P.length;h++)K[h]=P[h][0];H(P=K);break;case 2:for(h=0;h<P.length;h++)H(P[h]);break;case 3:for(P=function(ue){var ge=ue.length;if(ge<=1)return[ue];for(var Ie,Me,Be=[],et=0;et<ge;et++){var Ze=IA(ue[et]);Ze!==0&&(Me===void 0&&(Me=Ze<0),Me===Ze<0?(Ie&&Be.push(Ie),Ie=[ue[et]]):Ie.push(ue[et]))}return Ie&&Be.push(Ie),Be}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)H(P[h][p])}P.length===1?P=P[0]:F="Multi"+F;var re={type:"Feature",geometry:{type:F,coordinates:P},properties:this.properties};return"id"in this&&(re.id=this.id),re};var CA=ww,bw=Sw;function Sw(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(PA,this,n),this.length=this._features.length}function PA(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}Sw.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new CA(this._pbf,n,this.extent,this._keys,this._values)};var AA=bw;function kA(o,n,s){if(o===3){var h=new AA(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Ml.VectorTile=function(o,n){this.layers=o.readFields(kA,{},n)},Ml.VectorTileFeature=ww,Ml.VectorTileLayer=bw;const MA=Ml.VectorTileFeature.types,Zy=Math.pow(2,13);function Cd(o,n,s,h,p,v,x,w){o.emplaceBack(n,s,2*Math.floor(h*Zy)+x,p*Zy*2,v*Zy*2,Math.round(w))}class qy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ra,this.centroidVertexArray=new Fa,this.indexArray=new Hr,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Ur,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Gy("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:x,sourceLayerIndex:w}of n){const P=this.layers[0]._featureFilter.needGeometry,F=Fu(p,P);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),F,h))continue;const H={id:v,sourceLayerIndex:w,index:x,geometry:P?F.geometry:zu(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Wy("fill-extrusion",this.layers,H,this.zoom,s)):this.addFeature(H,H.geometry,x,h,{}),s.featureIndex.insert(p,H.geometry,x,w,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,SA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,bA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const x={x:0,y:0,vertexCount:0};for(const w of gl(s,500)){let P=0;for(const ge of w)P+=ge.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of w){if(ge.length===0||FA(ge))continue;let Ie=0;for(let Me=0;Me<ge.length;Me++){const Be=ge[Me];if(Me>=1){const et=ge[Me-1];if(!zA(Be,et)){F.vertexLength+4>Ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ze=Be.sub(et)._perp()._unit(),Je=et.dist(Be);Ie+Je>32768&&(Ie=0),Cd(this.layoutVertexArray,Be.x,Be.y,Ze.x,Ze.y,0,0,Ie),Cd(this.layoutVertexArray,Be.x,Be.y,Ze.x,Ze.y,0,1,Ie),x.x+=2*Be.x,x.y+=2*Be.y,x.vertexCount+=2,Ie+=Je,Cd(this.layoutVertexArray,et.x,et.y,Ze.x,Ze.y,0,0,Ie),Cd(this.layoutVertexArray,et.x,et.y,Ze.x,Ze.y,0,1,Ie),x.x+=2*et.x,x.y+=2*et.y,x.vertexCount+=2;const ft=F.vertexLength;this.indexArray.emplaceBack(ft,ft+2,ft+1),this.indexArray.emplaceBack(ft+1,ft+2,ft+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+P>Ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),MA[n.type]!=="Polygon")continue;const H=[],K=[],re=F.vertexLength;for(const ge of w)if(ge.length!==0){ge!==w[0]&&K.push(H.length/2);for(let Ie=0;Ie<ge.length;Ie++){const Me=ge[Ie];Cd(this.layoutVertexArray,Me.x,Me.y,0,0,1,1,0),x.x+=Me.x,x.y+=Me.y,x.vertexCount+=1,H.push(Me.x),H.push(Me.y)}}const ue=vw(H,K);for(let ge=0;ge<ue.length;ge+=3)this.indexArray.emplaceBack(re+ue[ge],re+ue[ge+2],re+ue[ge+1]);F.primitiveLength+=ue.length/3,F.vertexLength+=P}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function zA(o,n){return o.x===n.x&&(o.x<0||o.x>kr)||o.y===n.y&&(o.y<0||o.y>kr)}function FA(o){return o.every(n=>n.x<0)||o.every(n=>n.x>kr)||o.every(n=>n.y<0)||o.every(n=>n.y>kr)}let Ew;$t("FillExtrusionBucket",qy,{omit:["layers","features"]});var RA={get paint(){return Ew=Ew||new d({"fill-extrusion-opacity":new Qt(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ln(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qt(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qt(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new y(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ln(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ln(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qt(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class OA extends _{constructor(n){super(n,RA)}createBucket(n){return new qy(n)}queryRadius(){return Pp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,x,w,P){const F=Ap(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),H=this.paint.get("fill-extrusion-height").evaluate(s,h),K=this.paint.get("fill-extrusion-base").evaluate(s,h),re=function(ge,Ie,Me,Be){const et=[];for(const Ze of ge){const Je=[Ze.x,Ze.y,0,1];kp(Je,Je,Ie),et.push(new b(Je[0]/Je[3],Je[1]/Je[3]))}return et}(F,P),ue=function(ge,Ie,Me,Be){const et=[],Ze=[],Je=Be[8]*Ie,ft=Be[9]*Ie,gt=Be[10]*Ie,Bt=Be[11]*Ie,Xt=Be[8]*Me,Ot=Be[9]*Me,At=Be[10]*Me,Vt=Be[11]*Me;for(const en of ge){const jt=[],_t=[];for(const Zt of en){const Gt=Zt.x,xn=Zt.y,Hn=Be[0]*Gt+Be[4]*xn+Be[12],Zn=Be[1]*Gt+Be[5]*xn+Be[13],Mr=Be[2]*Gt+Be[6]*xn+Be[14],Ro=Be[3]*Gt+Be[7]*xn+Be[15],Ti=Mr+gt,Vr=Ro+Bt,Yr=Hn+Xt,Ii=Zn+Ot,Di=Mr+At,Ci=Ro+Vt,zr=new b((Hn+Je)/Vr,(Zn+ft)/Vr);zr.z=Ti/Vr,jt.push(zr);const Zr=new b(Yr/Ci,Ii/Ci);Zr.z=Di/Ci,_t.push(Zr)}et.push(jt),Ze.push(_t)}return[et,Ze]}(p,K,H,P);return function(ge,Ie,Me){let Be=1/0;nw(Me,Ie)&&(Be=Tw(Me,Ie[0]));for(let et=0;et<Ie.length;et++){const Ze=Ie[et],Je=ge[et];for(let ft=0;ft<Ze.length-1;ft++){const gt=Ze[ft],Bt=[gt,Ze[ft+1],Je[ft+1],Je[ft],gt];tw(Me,Bt)&&(Be=Math.min(Be,Tw(Me,Bt)))}}return Be!==1/0&&Be}(ue[0],ue[1],re)}}function Pd(o,n){return o.x*n.x+o.y*n.y}function Tw(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],x=o[0],w=p.sub(h),P=v.sub(h),F=x.sub(h),H=Pd(w,w),K=Pd(w,P),re=Pd(P,P),ue=Pd(F,w),ge=Pd(F,P),Ie=H*re-K*K,Me=(re*ue-K*ge)/Ie,Be=(H*ge-K*ue)/Ie,et=h.z*(1-Me-Be)+p.z*Me+v.z*Be;if(isFinite(et))return et}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const jA=$([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:LA}=jA,DA=$([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:BA}=DA,NA=Ml.VectorTileFeature.types,UA=Math.cos(Math.PI/180*37.5),Iw=Math.pow(2,14)/.5;class Xy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Fc,this.layoutVertexArray2=new md,this.indexArray=new Hr,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Gy("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:w,id:P,index:F,sourceLayerIndex:H}of n){const K=this.layers[0]._featureFilter.needGeometry,re=Fu(w,K);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),re,h))continue;const ue=v?p.evaluate(re,{},h):void 0,ge={id:P,properties:w.properties,type:w.type,sourceLayerIndex:H,index:F,geometry:K?re.geometry:zu(w),patterns:{},sortKey:ue};x.push(ge)}v&&x.sort((w,P)=>w.sortKey-P.sortKey);for(const w of x){const{geometry:P,index:F,sourceLayerIndex:H}=w;if(this.hasPattern){const K=Wy("line",this.layers,w,this.zoom,s);this.patternFeatures.push(K)}else this.addFeature(w,P,F,h,{});s.featureIndex.insert(n[F].feature,P,F,H,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,BA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,LA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),F=x.get("line-miter-limit"),H=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const K of s)this.addLine(K,n,w,P,F,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<n.length-1;Be++)this.totalDistance+=n[Be].dist(n[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=NA[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let F=0;for(;F<P-1&&n[F].equals(n[F+1]);)F++;if(P<(w?3:2))return;h==="bevel"&&(v=1.05);const H=this.overscaling<=16?15*kr/(512*this.overscaling):0,K=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let re,ue,ge,Ie,Me;this.e1=this.e2=-1,w&&(re=n[P-2],Me=n[F].sub(re)._unit()._perp());for(let Be=F;Be<P;Be++){if(ge=Be===P-1?w?n[F+1]:void 0:n[Be+1],ge&&n[Be].equals(ge))continue;Me&&(Ie=Me),re&&(ue=re),re=n[Be],Me=ge?ge.sub(re)._unit()._perp():Ie,Ie=Ie||Me;let et=Ie.add(Me);et.x===0&&et.y===0||et._unit();const Ze=Ie.x*Me.x+Ie.y*Me.y,Je=et.x*Me.x+et.y*Me.y,ft=Je!==0?1/Je:1/0,gt=2*Math.sqrt(2-2*Je),Bt=Je<UA&&ue&&ge,Xt=Ie.x*Me.y-Ie.y*Me.x>0;if(Bt&&Be>F){const Vt=re.dist(ue);if(Vt>2*H){const en=re.sub(re.sub(ue)._mult(H/Vt)._round());this.updateDistance(ue,en),this.addCurrentVertex(en,Ie,0,0,K),ue=en}}const Ot=ue&&ge;let At=Ot?h:w?"butt":p;if(Ot&&At==="round"&&(ft<x?At="miter":ft<=2&&(At="fakeround")),At==="miter"&&ft>v&&(At="bevel"),At==="bevel"&&(ft>2&&(At="flipbevel"),ft<v&&(At="miter")),ue&&this.updateDistance(ue,re),At==="miter")et._mult(ft),this.addCurrentVertex(re,et,0,0,K);else if(At==="flipbevel"){if(ft>100)et=Me.mult(-1);else{const Vt=ft*Ie.add(Me).mag()/Ie.sub(Me).mag();et._perp()._mult(Vt*(Xt?-1:1))}this.addCurrentVertex(re,et,0,0,K),this.addCurrentVertex(re,et.mult(-1),0,0,K)}else if(At==="bevel"||At==="fakeround"){const Vt=-Math.sqrt(ft*ft-1),en=Xt?Vt:0,jt=Xt?0:Vt;if(ue&&this.addCurrentVertex(re,Ie,en,jt,K),At==="fakeround"){const _t=Math.round(180*gt/Math.PI/20);for(let Zt=1;Zt<_t;Zt++){let Gt=Zt/_t;if(Gt!==.5){const Hn=Gt-.5;Gt+=Gt*Hn*(Gt-1)*((1.0904+Ze*(Ze*(3.55645-1.43519*Ze)-3.2452))*Hn*Hn+(.848013+Ze*(.215638*Ze-1.06021)))}const xn=Me.sub(Ie)._mult(Gt)._add(Ie)._unit()._mult(Xt?-1:1);this.addHalfVertex(re,xn.x,xn.y,!1,Xt,0,K)}}ge&&this.addCurrentVertex(re,Me,-en,-jt,K)}else if(At==="butt")this.addCurrentVertex(re,et,0,0,K);else if(At==="square"){const Vt=ue?1:-1;this.addCurrentVertex(re,et,Vt,Vt,K)}else At==="round"&&(ue&&(this.addCurrentVertex(re,Ie,0,0,K),this.addCurrentVertex(re,Ie,1,1,K,!0)),ge&&(this.addCurrentVertex(re,Me,-1,-1,K,!0),this.addCurrentVertex(re,Me,0,0,K)));if(Bt&&Be<P-1){const Vt=re.dist(ge);if(Vt>2*H){const en=re.add(ge.sub(re)._mult(H/Vt)._round());this.updateDistance(re,en),this.addCurrentVertex(en,Me,0,0,K),re=en}}}}addCurrentVertex(n,s,h,p,v,x=!1){const w=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,w,P,x,!0,-p,v),this.distance>Iw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,x))}addHalfVertex({x:n,y:s},h,p,v,x,w,P){const F=.5*(this.lineClips?this.scaledDistance*(Iw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,H),P.primitiveLength++),x?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Cw,Pw;$t("LineBucket",Xy,{omit:["layers","patternFeatures"]});var Aw={get paint(){return Pw=Pw||new d({"line-opacity":new ln(it.paint_line["line-opacity"]),"line-color":new ln(it.paint_line["line-color"]),"line-translate":new Qt(it.paint_line["line-translate"]),"line-translate-anchor":new Qt(it.paint_line["line-translate-anchor"]),"line-width":new ln(it.paint_line["line-width"]),"line-gap-width":new ln(it.paint_line["line-gap-width"]),"line-offset":new ln(it.paint_line["line-offset"]),"line-blur":new ln(it.paint_line["line-blur"]),"line-dasharray":new r(it.paint_line["line-dasharray"]),"line-pattern":new y(it.paint_line["line-pattern"]),"line-gradient":new l(it.paint_line["line-gradient"])})},get layout(){return Cw=Cw||new d({"line-cap":new Qt(it.layout_line["line-cap"]),"line-join":new ln(it.layout_line["line-join"]),"line-miter-limit":new Qt(it.layout_line["line-miter-limit"]),"line-round-limit":new Qt(it.layout_line["line-round-limit"]),"line-sort-key":new ln(it.layout_line["line-sort-key"])})}};class $A extends ln{possiblyEvaluate(n,s){return s=new Kn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let Op;class VA extends _{constructor(n){super(n,Aw),this.gradientVersion=0,Op||(Op=new $A(Aw.paint.properties["line-width"].specification),Op.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof $s,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Op.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Xy(n)}queryRadius(n){const s=n,h=kw(wd("line-width",this,s),wd("line-gap-width",this,s)),p=wd("line-offset",this,s);return h/2+Math.abs(p)+Pp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,x,w){const P=Ap(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),F=w/2*kw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),H=this.paint.get("line-offset").evaluate(s,h);return H&&(p=function(K,re){const ue=[];for(let ge=0;ge<K.length;ge++){const Ie=K[ge],Me=[];for(let Be=0;Be<Ie.length;Be++){const et=Ie[Be-1],Ze=Ie[Be],Je=Ie[Be+1],ft=Be===0?new b(0,0):Ze.sub(et)._unit()._perp(),gt=Be===Ie.length-1?new b(0,0):Je.sub(Ze)._unit()._perp(),Bt=ft._add(gt)._unit(),Xt=Bt.x*gt.x+Bt.y*gt.y;Xt!==0&&Bt._mult(1/Xt),Me.push(Bt._mult(re)._add(Ze))}ue.push(Me)}return ue}(p,H*w)),function(K,re,ue){for(let ge=0;ge<re.length;ge++){const Ie=re[ge];if(K.length>=3){for(let Me=0;Me<Ie.length;Me++)if(Dc(K,Ie[Me]))return!0}if(JP(K,Ie,ue))return!0}return!1}(P,p,F)}isTileClipped(){return!0}}function kw(o,n){return n>0?n+2*o:o}const GA=$([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),WA=$([{name:"a_projected_pos",components:3,type:"Float32"}],4);$([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const HA=$([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);$([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Mw=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ZA=$([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qA(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),na.applyArabicShaping&&(p=na.applyArabicShaping(p)),p}(h.text,n,s)}),o}$([{name:"triangle",components:3,type:"Uint16"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$([{type:"Float32",name:"offsetX"}]),$([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ad={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var $r=24,zw=Wn,Fw=function(o,n,s,h,p){var v,x,w=8*p-h-1,P=(1<<w)-1,F=P>>1,H=-7,K=s?p-1:0,re=s?-1:1,ue=o[n+K];for(K+=re,v=ue&(1<<-H)-1,ue>>=-H,H+=w;H>0;v=256*v+o[n+K],K+=re,H-=8);for(x=v&(1<<-H)-1,v>>=-H,H+=h;H>0;x=256*x+o[n+K],K+=re,H-=8);if(v===0)v=1-F;else{if(v===P)return x?NaN:1/0*(ue?-1:1);x+=Math.pow(2,h),v-=F}return(ue?-1:1)*x*Math.pow(2,v-h)},Rw=function(o,n,s,h,p,v){var x,w,P,F=8*v-p-1,H=(1<<F)-1,K=H>>1,re=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=h?0:v-1,ge=h?1:-1,Ie=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,x=H):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+K>=1?re/P:re*Math.pow(2,1-K))*P>=2&&(x++,P/=2),x+K>=H?(w=0,x=H):x+K>=1?(w=(n*P-1)*Math.pow(2,p),x+=K):(w=n*Math.pow(2,K-1)*Math.pow(2,p),x=0));p>=8;o[s+ue]=255&w,ue+=ge,w/=256,p-=8);for(x=x<<p|w,F+=p;F>0;o[s+ue]=255&x,ue+=ge,x/=256,F-=8);o[s+ue-ge]|=128*Ie};function Wn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Wn.Varint=0,Wn.Fixed64=1,Wn.Bytes=2,Wn.Fixed32=5;var Ky=4294967296,Ow=1/Ky,jw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ja(o){return o.type===Wn.Bytes?o.readVarint()+o.pos:o.pos+1}function $c(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Lw(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function XA(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function KA(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function YA(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function JA(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function QA(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function ek(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function tk(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function nk(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function rk(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function jp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Vc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Dw(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Wn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=jp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Dw(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=jp(this.buf,this.pos)+jp(this.buf,this.pos+4)*Ky;return this.pos+=8,o},readSFixed64:function(){var o=jp(this.buf,this.pos)+Dw(this.buf,this.pos+4)*Ky;return this.pos+=8,o},readFloat:function(){var o=Fw(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Fw(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,x){var w,P,F=x.buf;if(w=(112&(P=F[x.pos++]))>>4,P<128||(w|=(127&(P=F[x.pos++]))<<3,P<128)||(w|=(127&(P=F[x.pos++]))<<10,P<128)||(w|=(127&(P=F[x.pos++]))<<17,P<128)||(w|=(127&(P=F[x.pos++]))<<24,P<128)||(w|=(1&(P=F[x.pos++]))<<31,P<128))return $c(p,w,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&jw?function(s,h,p){return jw.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",x=h;x<p;){var w,P,F,H=s[x],K=null,re=H>239?4:H>223?3:H>191?2:1;if(x+re>p)break;re===1?H<128&&(K=H):re===2?(192&(w=s[x+1]))==128&&(K=(31&H)<<6|63&w)<=127&&(K=null):re===3?(P=s[x+2],(192&(w=s[x+1]))==128&&(192&P)==128&&((K=(15&H)<<12|(63&w)<<6|63&P)<=2047||K>=55296&&K<=57343)&&(K=null)):re===4&&(P=s[x+2],F=s[x+3],(192&(w=s[x+1]))==128&&(192&P)==128&&(192&F)==128&&((K=(15&H)<<18|(63&w)<<12|(63&P)<<6|63&F)<=65535||K>=1114112)&&(K=null)),K===null?(K=65533,re=1):K>65535&&(K-=65536,v+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),v+=String.fromCharCode(K),x+=re}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Wn.Bytes)return o.push(this.readVarint(n));var s=ja(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSVarint());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Wn.Bytes)return o.push(this.readBoolean());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFloat());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Wn.Bytes)return o.push(this.readDouble());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFixed32());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSFixed32());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Wn.Bytes)return o.push(this.readFixed64());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Wn.Bytes)return o.push(this.readSFixed64());var n=ja(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Wn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Wn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Wn.Fixed32)this.pos+=4;else{if(n!==Wn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Vc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Vc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Vc(this.buf,-1&o,this.pos),Vc(this.buf,Math.floor(o*Ow),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Vc(this.buf,-1&o,this.pos),Vc(this.buf,Math.floor(o*Ow),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,w,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!w){x>56319||P+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):w=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(h[v++]=239,h[v++]=191,h[v++]=189,w=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Lw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),Rw(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Rw(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Lw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Wn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,XA,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,KA,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,QA,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,YA,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,JA,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,ek,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,tk,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,nk,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,rk,n)},writeBytesField:function(o,n){this.writeTag(o,Wn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Wn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Wn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Wn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Wn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Wn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var Yy=S(zw);const Jy=3;function ik(o,n,s){o===1&&s.readMessage(ok,n)}function ok(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:w,top:P,advance:F}=s.readMessage(sk,{});n.push({id:h,bitmap:new Sd({width:v+2*Jy,height:x+2*Jy},p),metrics:{width:v,height:x,left:w,top:P,advance:F}})}}function sk(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Bw=Jy;function Nw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,w)=>w.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const x of o)for(let w=h.length-1;w>=0;w--){const P=h[w];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const F=h.pop();w<h.length&&(h[w]=F)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const Ki=1;class Qy{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:x,textFitWidth:w,textFitHeight:P}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h,this.textFitWidth=w,this.textFitHeight=P}get tl(){return[this.paddedRect.x+Ki,this.paddedRect.y+Ki]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ki,this.paddedRect.y+this.paddedRect.h-Ki]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ki)/this.pixelRatio,(this.paddedRect.h-2*Ki)/this.pixelRatio]}}class Uw{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:x,h:w}=Nw(v),P=new zo({width:x||1,height:w||1});for(const F in n){const H=n[F],K=h[F].paddedRect;zo.copy(H.data,P,{x:0,y:0},{x:K.x+Ki,y:K.y+Ki},H.data)}for(const F in s){const H=s[F],K=p[F].paddedRect,re=K.x+Ki,ue=K.y+Ki,ge=H.data.width,Ie=H.data.height;zo.copy(H.data,P,{x:0,y:0},{x:re,y:ue},H.data),zo.copy(H.data,P,{x:0,y:Ie-1},{x:re,y:ue-1},{width:ge,height:1}),zo.copy(H.data,P,{x:0,y:0},{x:re,y:ue+Ie},{width:ge,height:1}),zo.copy(H.data,P,{x:ge-1,y:0},{x:re-1,y:ue},{width:1,height:Ie}),zo.copy(H.data,P,{x:0,y:0},{x:re+ge,y:ue},{width:1,height:Ie})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*Ki,h:v.data.height+2*Ki};h.push(x),s[p]=new Qy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var zl;$t("ImagePosition",Qy),$t("ImageAtlas",Uw),f.ah=void 0,(zl=f.ah||(f.ah={}))[zl.none=0]="none",zl[zl.horizontal=1]="horizontal",zl[zl.vertical=2]="vertical",zl[zl.horizontalOnly=3]="horizontalOnly";const kd=-17;class Md{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new Md;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new Md;return s.imageName=n,s}}class Gc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Gc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&xp(p)&&!Ad[n[h+1]]||v&&xp(v)&&!Ad[n[h-1]]||!Ad[n[h]]?n[h]:Ad[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Dp[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Dp[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Gc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Md.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Md.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lp(o,n,s,h,p,v,x,w,P,F,H,K,re,ue,ge,Ie){const Me=Gc.fromFeature(o,p);let Be;K===f.ah.vertical&&Me.verticalizePunctuation();const{processBidirectionalText:et,processStyledBidirectionalText:Ze}=na;if(et&&Me.sections.length===1){Be=[];const gt=et(Me.toString(),e0(Me,F,v,n,h,ue,ge));for(const Bt of gt){const Xt=new Gc;Xt.text=Bt,Xt.sections=Me.sections;for(let Ot=0;Ot<Bt.length;Ot++)Xt.sectionIndex.push(0);Be.push(Xt)}}else if(Ze){Be=[];const gt=Ze(Me.text,Me.sectionIndex,e0(Me,F,v,n,h,ue,ge));for(const Bt of gt){const Xt=new Gc;Xt.text=Bt[0],Xt.sectionIndex=Bt[1],Xt.sections=Me.sections,Be.push(Xt)}}else Be=function(gt,Bt){const Xt=[],Ot=gt.text;let At=0;for(const Vt of Bt)Xt.push(gt.substring(At,Vt)),At=Vt;return At<Ot.length&&Xt.push(gt.substring(At,Ot.length)),Xt}(Me,e0(Me,F,v,n,h,ue,ge));const Je=[],ft={positionedLines:Je,text:Me.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:K,iconsInText:!1,verticalizable:!1};return function(gt,Bt,Xt,Ot,At,Vt,en,jt,_t,Zt,Gt,xn){let Hn=0,Zn=kd,Mr=0,Ro=0;const Ti=jt==="right"?1:jt==="left"?0:.5;let Vr=0;for(const zr of At){zr.trim();const Zr=zr.getMaxScale(),Bi=(Zr-1)*$r,Yi={positionedGlyphs:[],lineOffset:0};gt.positionedLines[Vr]=Yi;const fi=Yi.positionedGlyphs;let Ji=0;if(!zr.length()){Zn+=Vt,++Vr;continue}for(let gr=0;gr<zr.length();gr++){const Cn=zr.getSection(gr),Fr=zr.getSectionIndex(gr),pi=zr.getCharCode(gr);let Gr=0,es=null,Ss=null,Es=null,La=$r;const ts=!(_t===f.ah.horizontal||!Gt&&!dd(pi)||Gt&&(Dp[pi]||(Yr=pi,Dt.Arabic(Yr)||Dt["Arabic Supplement"](Yr)||Dt["Arabic Extended-A"](Yr)||Dt["Arabic Presentation Forms-A"](Yr)||Dt["Arabic Presentation Forms-B"](Yr))));if(Cn.imageName){const jo=Ot[Cn.imageName];if(!jo)continue;Es=Cn.imageName,gt.iconsInText=gt.iconsInText||!0,Ss=jo.paddedRect;const Qi=jo.displaySize;Cn.scale=Cn.scale*$r/xn,es={width:Qi[0],height:Qi[1],left:Ki,top:-Bw,advance:ts?Qi[1]:Qi[0]},Gr=Bi+($r-Qi[1]*Cn.scale),La=es.advance;const Da=ts?Qi[0]*Cn.scale-$r*Zr:Qi[1]*Cn.scale-$r*Zr;Da>0&&Da>Ji&&(Ji=Da)}else{const jo=Xt[Cn.fontStack],Qi=jo&&jo[pi];if(Qi&&Qi.rect)Ss=Qi.rect,es=Qi.metrics;else{const Da=Bt[Cn.fontStack],jd=Da&&Da[pi];if(!jd)continue;es=jd.metrics}Gr=(Zr-Cn.scale)*$r}ts?(gt.verticalizable=!0,fi.push({glyph:pi,imageName:Es,x:Hn,y:Zn+Gr,vertical:ts,scale:Cn.scale,fontStack:Cn.fontStack,sectionIndex:Fr,metrics:es,rect:Ss}),Hn+=La*Cn.scale+Zt):(fi.push({glyph:pi,imageName:Es,x:Hn,y:Zn+Gr,vertical:ts,scale:Cn.scale,fontStack:Cn.fontStack,sectionIndex:Fr,metrics:es,rect:Ss}),Hn+=es.advance*Cn.scale+Zt)}fi.length!==0&&(Mr=Math.max(Hn-Zt,Mr),uk(fi,0,fi.length-1,Ti,Ji)),Hn=0;const Oo=Vt*Zr+Ji;Yi.lineOffset=Math.max(Ji,Bi),Zn+=Oo,Ro=Math.max(Oo,Ro),++Vr}var Yr;const Ii=Zn-kd,{horizontalAlign:Di,verticalAlign:Ci}=t0(en);(function(zr,Zr,Bi,Yi,fi,Ji,Oo,gr,Cn){const Fr=(Zr-Bi)*fi;let pi=0;pi=Ji!==Oo?-gr*Yi-kd:(-Yi*Cn+.5)*Oo;for(const Gr of zr)for(const es of Gr.positionedGlyphs)es.x+=Fr,es.y+=pi})(gt.positionedLines,Ti,Di,Ci,Mr,Ro,Vt,Ii,At.length),gt.top+=-Ci*Ii,gt.bottom=gt.top+Ii,gt.left+=-Di*Mr,gt.right=gt.left+Mr}(ft,n,s,h,Be,x,w,P,K,F,re,Ie),!function(gt){for(const Bt of gt)if(Bt.positionedGlyphs.length!==0)return!1;return!0}(Je)&&ft}const Dp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ak={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function $w(o,n,s,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*$r/v+p:0}{const x=s[n.fontStack],w=x&&x[o];return w?w.metrics.advance*n.scale+p:0}}function Vw(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function lk(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Gw(o,n,s,h,p,v){let x=null,w=Vw(n,s,p,v);for(const P of h){const F=Vw(n-P.x,s,p,v)+P.badness;F<=w&&(x=P,w=F)}return{index:o,x:n,priorBreak:x,badness:w}}function Ww(o){return o?Ww(o.priorBreak).concat(o.index):[]}function e0(o,n,s,h,p,v,x){if(v!=="point")return[];if(!o)return[];const w=[],P=function(re,ue,ge,Ie,Me,Be){let et=0;for(let Ze=0;Ze<re.length();Ze++){const Je=re.getSection(Ze);et+=$w(re.getCharCode(Ze),Je,Ie,Me,ue,Be)}return et/Math.max(1,Math.ceil(et/ge))}(o,n,s,h,p,x),F=o.text.indexOf("​")>=0;let H=0;for(let re=0;re<o.length();re++){const ue=o.getSection(re),ge=o.getCharCode(re);if(Dp[ge]||(H+=$w(ge,ue,h,p,n,x)),re<o.length()-1){const Ie=!((K=ge)<11904||!(Dt["Bopomofo Extended"](K)||Dt.Bopomofo(K)||Dt["CJK Compatibility Forms"](K)||Dt["CJK Compatibility Ideographs"](K)||Dt["CJK Compatibility"](K)||Dt["CJK Radicals Supplement"](K)||Dt["CJK Strokes"](K)||Dt["CJK Symbols and Punctuation"](K)||Dt["CJK Unified Ideographs Extension A"](K)||Dt["CJK Unified Ideographs"](K)||Dt["Enclosed CJK Letters and Months"](K)||Dt["Halfwidth and Fullwidth Forms"](K)||Dt.Hiragana(K)||Dt["Ideographic Description Characters"](K)||Dt["Kangxi Radicals"](K)||Dt["Katakana Phonetic Extensions"](K)||Dt.Katakana(K)||Dt["Vertical Forms"](K)||Dt["Yi Radicals"](K)||Dt["Yi Syllables"](K)));(ak[ge]||Ie||ue.imageName)&&w.push(Gw(re+1,H,P,w,lk(ge,o.getCharCode(re+1),Ie&&F),!1))}}var K;return Ww(Gw(o.length(),H,P,w,0,!0))}function t0(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function uk(o,n,s,h,p){if(!h&&!p)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let w=n;w<=s;w++)o[w].x-=x,o[w].y+=p}function ck(o,n,s){const{horizontalAlign:h,verticalAlign:p}=t0(s),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Hw(o){var n,s;let h=o.left,p=o.top,v=o.right-h,x=o.bottom-p;const w=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",P=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",F=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(P==="proportional"){if(w==="stretchOnly"&&v/x<F||w==="proportional"){const H=Math.ceil(x*F);h*=H/v,v=H}}else if(w==="proportional"&&P==="stretchOnly"&&F!==0&&v/x>F){const H=Math.ceil(v/F);p*=H/x,x=H}return{x1:h,y1:p,x2:h+v,y2:p+x}}function Zw(o,n,s,h,p,v){const x=o.image;let w;if(x.content){const Me=x.content,Be=x.pixelRatio||1;w=[Me[0]/Be,Me[1]/Be,x.displaySize[0]-Me[2]/Be,x.displaySize[1]-Me[3]/Be]}const P=n.left*v,F=n.right*v;let H,K,re,ue;s==="width"||s==="both"?(ue=p[0]+P-h[3],K=p[0]+F+h[1]):(ue=p[0]+(P+F-x.displaySize[0])/2,K=ue+x.displaySize[0]);const ge=n.top*v,Ie=n.bottom*v;return s==="height"||s==="both"?(H=p[1]+ge-h[0],re=p[1]+Ie+h[2]):(H=p[1]+(ge+Ie-x.displaySize[1])/2,re=H+x.displaySize[1]),{image:x,top:H,right:K,bottom:re,left:ue,collisionPadding:w}}const zd=255,oa=128,Fl=zd*oa;function qw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Kn(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const w=h[v],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:P,minSize:s.evaluate(new Kn(w)),maxSize:s.evaluate(new Kn(P)),interpolationType:p}}}function n0(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const hk=Ml.VectorTileFeature.types,dk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Bp(o,n,s,h,p,v,x,w,P,F,H,K,re){const ue=w?Math.min(Fl,Math.round(w[0])):0,ge=w?Math.min(Fl,Math.round(w[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,x,(ue<<1)+(P?1:0),ge,16*F,16*H,256*K,256*re)}function r0(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function fk(o){for(const n of o.sections)if(fd(n.text))return!0;return!1}class i0{constructor(n){this.layoutVertexArray=new Mo,this.indexArray=new Hr,this.programConfigurations=n,this.segments=new Ur,this.dynamicLayoutVertexArray=new ra,this.opacityVertexArray=new Cl,this.hasVisibleVertices=!1,this.placedSymbolArray=new tr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,GA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,WA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,dk,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$t("SymbolBuffers",i0);class o0{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Ur,this.collisionVertexArray=new hi}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,HA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$t("CollisionBuffers",o0);class Wc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ly([]),this.placementViewportMatrix=Ly([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=qw(this.zoom,s["text-size"]),this.iconSizeData=qw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=n0(h,"text-overlap","text-allow-overlap")!=="never"||n0(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>f.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new i0(new Mu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new i0(new Mu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new nr,this.lineVertexArray=new ji,this.symbolInstances=new Ao,this.textAnchorOffsets=new li}calculateGlyphDependencies(n,s,h,p,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&v){const w=Ad[n.charAt(x)];w&&(s[w.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),w=v.get("text-field"),P=v.get("icon-image"),F=(w.value.kind!=="constant"||w.value.value instanceof xr&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),H=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,K=v.get("symbol-sort-key");if(this.features=[],!F&&!H)return;const re=s.iconDependencies,ue=s.glyphDependencies,ge=s.availableImages,Ie=new Kn(this.zoom);for(const{feature:Me,id:Be,index:et,sourceLayerIndex:Ze}of n){const Je=p._featureFilter.needGeometry,ft=Fu(Me,Je);if(!p._featureFilter.filter(Ie,ft,h))continue;let gt,Bt;if(Je||(ft.geometry=zu(Me)),F){const Ot=p.getValueAndResolveTokens("text-field",ft,h,ge),At=xr.factory(Ot),Vt=this.hasRTLText=this.hasRTLText||fk(At);(!Vt||na.getRTLTextPluginStatus()==="unavailable"||Vt&&na.isParsed())&&(gt=qA(At,p,ft))}if(H){const Ot=p.getValueAndResolveTokens("icon-image",ft,h,ge);Bt=Ot instanceof Fi?Ot:Fi.fromString(Ot)}if(!gt&&!Bt)continue;const Xt=this.sortFeaturesByKey?K.evaluate(ft,{},h):void 0;if(this.features.push({id:Be,text:gt,icon:Bt,index:et,sourceLayerIndex:Ze,geometry:ft.geometry,properties:Me.properties,type:hk[Me.type],sortKey:Xt}),Bt&&(re[Bt.name]=!0),gt){const Ot=x.evaluate(ft,{},h).join(","),At=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ah.vertical)>=0;for(const Vt of gt.sections)if(Vt.image)re[Vt.image.name]=!0;else{const en=hd(gt.toString()),jt=Vt.fontStack||Ot,_t=ue[jt]=ue[jt]||{};this.calculateGlyphDependencies(Vt.text,_t,At,this.allowVerticalPlacement,en)}}}v.get("symbol-placement")==="line"&&(this.features=function(Me){const Be={},et={},Ze=[];let Je=0;function ft(Ot){Ze.push(Me[Ot]),Je++}function gt(Ot,At,Vt){const en=et[Ot];return delete et[Ot],et[At]=en,Ze[en].geometry[0].pop(),Ze[en].geometry[0]=Ze[en].geometry[0].concat(Vt[0]),en}function Bt(Ot,At,Vt){const en=Be[At];return delete Be[At],Be[Ot]=en,Ze[en].geometry[0].shift(),Ze[en].geometry[0]=Vt[0].concat(Ze[en].geometry[0]),en}function Xt(Ot,At,Vt){const en=Vt?At[0][At[0].length-1]:At[0][0];return`${Ot}:${en.x}:${en.y}`}for(let Ot=0;Ot<Me.length;Ot++){const At=Me[Ot],Vt=At.geometry,en=At.text?At.text.toString():null;if(!en){ft(Ot);continue}const jt=Xt(en,Vt),_t=Xt(en,Vt,!0);if(jt in et&&_t in Be&&et[jt]!==Be[_t]){const Zt=Bt(jt,_t,Vt),Gt=gt(jt,_t,Ze[Zt].geometry);delete Be[jt],delete et[_t],et[Xt(en,Ze[Gt].geometry,!0)]=Gt,Ze[Zt].geometry=null}else jt in et?gt(jt,_t,Vt):_t in Be?Bt(jt,_t,Vt):(ft(Ot),Be[jt]=Je-1,et[_t]=Je-1)}return Ze.filter(Ot=>Ot.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Me,Be)=>Me.sortKey-Be.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let w=n.segment+1;w<s.length;w++)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:p},w<s.length-1&&(p+=s[w+1].dist(s[w]));for(let w=n.segment||0;w>=0;w--)x[w]={x:s[w].x,y:s[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=s[w-1].dist(s[w]));for(let w=0;w<s.length;w++){const P=x[w];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,x,w,P,F,H,K,re){const ue=n.indexArray,ge=n.layoutVertexArray,Ie=n.segments.prepareSegment(4*s.length,ge,ue,this.canOverlap?x.sortKey:void 0),Me=this.glyphOffsetArray.length,Be=Ie.vertexLength,et=this.allowVerticalPlacement&&w===f.ah.vertical?Math.PI/2:0,Ze=x.text&&x.text.sections;for(let Je=0;Je<s.length;Je++){const{tl:ft,tr:gt,bl:Bt,br:Xt,tex:Ot,pixelOffsetTL:At,pixelOffsetBR:Vt,minFontScaleX:en,minFontScaleY:jt,glyphOffset:_t,isSDF:Zt,sectionIndex:Gt}=s[Je],xn=Ie.vertexLength,Hn=_t[1];Bp(ge,P.x,P.y,ft.x,Hn+ft.y,Ot.x,Ot.y,h,Zt,At.x,At.y,en,jt),Bp(ge,P.x,P.y,gt.x,Hn+gt.y,Ot.x+Ot.w,Ot.y,h,Zt,Vt.x,At.y,en,jt),Bp(ge,P.x,P.y,Bt.x,Hn+Bt.y,Ot.x,Ot.y+Ot.h,h,Zt,At.x,Vt.y,en,jt),Bp(ge,P.x,P.y,Xt.x,Hn+Xt.y,Ot.x+Ot.w,Ot.y+Ot.h,h,Zt,Vt.x,Vt.y,en,jt),r0(n.dynamicLayoutVertexArray,P,et),ue.emplaceBack(xn,xn+1,xn+2),ue.emplaceBack(xn+1,xn+2,xn+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_t[0]),Je!==s.length-1&&Gt===s[Je+1].sectionIndex||n.programConfigurations.populatePaintArrays(ge.length,x,x.index,{},re,Ze&&Ze[Gt])}n.placedSymbolArray.emplaceBack(P.x,P.y,Me,this.glyphOffsetArray.length-Me,Be,F,H,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],w,0,!1,0,K)}_addCollisionDebugVertex(n,s,h,p,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,v,x,w){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),F=P.vertexLength,H=v.layoutVertexArray,K=v.collisionVertexArray,re=w.anchorX,ue=w.anchorY;this._addCollisionDebugVertex(H,K,x,re,ue,new b(n,s)),this._addCollisionDebugVertex(H,K,x,re,ue,new b(h,s)),this._addCollisionDebugVertex(H,K,x,re,ue,new b(h,p)),this._addCollisionDebugVertex(H,K,x,re,ue,new b(n,p)),P.vertexLength+=4;const ge=v.indexArray;ge.emplaceBack(F,F+1),ge.emplaceBack(F+1,F+2),ge.emplaceBack(F+2,F+3),ge.emplaceBack(F+3,F),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new o0(ci,Mw.members,lr),this.iconCollisionBox=new o0(ci,Mw.members,lr);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,x,w,P,F){const H={};for(let K=s;K<h;K++){const re=n.get(K);H.textBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},H.textFeatureIndex=re.featureIndex;break}for(let K=p;K<v;K++){const re=n.get(K);H.verticalTextBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},H.verticalTextFeatureIndex=re.featureIndex;break}for(let K=x;K<w;K++){const re=n.get(K);H.iconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},H.iconFeatureIndex=re.featureIndex;break}for(let K=P;K<F;K++){const re=n.get(K);H.verticalIconBox={x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,anchorPointX:re.anchorPointX,anchorPointY:re.anchorPointY},H.verticalIconFeatureIndex=re.featureIndex;break}return H}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const P=this.symbolInstances.get(w);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((w,P)=>p[w]-p[P]||v[P]-v[w]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Xw,Kw;$t("SymbolBucket",Wc,{omit:["layers","collisionBoxArray","features","compareText"]}),Wc.MAX_GLYPHS=65535,Wc.addDynamicAttributes=r0;var s0={get paint(){return Kw=Kw||new d({"icon-opacity":new ln(it.paint_symbol["icon-opacity"]),"icon-color":new ln(it.paint_symbol["icon-color"]),"icon-halo-color":new ln(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new ln(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ln(it.paint_symbol["icon-halo-blur"]),"icon-translate":new Qt(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qt(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new ln(it.paint_symbol["text-opacity"]),"text-color":new ln(it.paint_symbol["text-color"],{runtimeType:pn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ln(it.paint_symbol["text-halo-color"]),"text-halo-width":new ln(it.paint_symbol["text-halo-width"]),"text-halo-blur":new ln(it.paint_symbol["text-halo-blur"]),"text-translate":new Qt(it.paint_symbol["text-translate"]),"text-translate-anchor":new Qt(it.paint_symbol["text-translate-anchor"])})},get layout(){return Xw=Xw||new d({"symbol-placement":new Qt(it.layout_symbol["symbol-placement"]),"symbol-spacing":new Qt(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qt(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ln(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qt(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qt(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qt(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qt(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qt(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qt(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new ln(it.layout_symbol["icon-size"]),"icon-text-fit":new Qt(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qt(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new ln(it.layout_symbol["icon-image"]),"icon-rotate":new ln(it.layout_symbol["icon-rotate"]),"icon-padding":new ln(it.layout_symbol["icon-padding"]),"icon-keep-upright":new Qt(it.layout_symbol["icon-keep-upright"]),"icon-offset":new ln(it.layout_symbol["icon-offset"]),"icon-anchor":new ln(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qt(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qt(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qt(it.layout_symbol["text-rotation-alignment"]),"text-field":new ln(it.layout_symbol["text-field"]),"text-font":new ln(it.layout_symbol["text-font"]),"text-size":new ln(it.layout_symbol["text-size"]),"text-max-width":new ln(it.layout_symbol["text-max-width"]),"text-line-height":new Qt(it.layout_symbol["text-line-height"]),"text-letter-spacing":new ln(it.layout_symbol["text-letter-spacing"]),"text-justify":new ln(it.layout_symbol["text-justify"]),"text-radial-offset":new ln(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qt(it.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ln(it.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ln(it.layout_symbol["text-anchor"]),"text-max-angle":new Qt(it.layout_symbol["text-max-angle"]),"text-writing-mode":new Qt(it.layout_symbol["text-writing-mode"]),"text-rotate":new ln(it.layout_symbol["text-rotate"]),"text-padding":new Qt(it.layout_symbol["text-padding"]),"text-keep-upright":new Qt(it.layout_symbol["text-keep-upright"]),"text-transform":new ln(it.layout_symbol["text-transform"]),"text-offset":new ln(it.layout_symbol["text-offset"]),"text-allow-overlap":new Qt(it.layout_symbol["text-allow-overlap"]),"text-overlap":new Qt(it.layout_symbol["text-overlap"]),"text-ignore-placement":new Qt(it.layout_symbol["text-ignore-placement"]),"text-optional":new Qt(it.layout_symbol["text-optional"])})}};class Yw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:rt,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t("FormatSectionOverride",Yw,{omit:["defaultValue"]});class Np extends _{constructor(n){super(n,s0)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Mt(x.value)||!v?v:function(w,P){return P.replace(/{([^{}]+)}/g,(F,H)=>w&&H in w?String(w[H]):"")}(s.properties,v)}createBucket(n){return new Wc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of s0.paint.overridableProperties){if(!Np.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Yw(s),p=new at(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Kt("source",p):new Jt("composite",p,s.value.zoomStops),this.paint._values[n]=new Qo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&Np.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=s0.paint.properties[s];let v=!1;const x=w=>{for(const P of w)if(p.overrides&&p.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof xr)x(h.value.value.sections);else if(h.value.kind==="source"){const w=F=>{v||(F instanceof hs&&mr(F.value)===ti?x(F.value.sections):F instanceof dl?x(F.sections):F.eachChild(w))},P=h.value;P._styleExpression&&w(P._styleExpression.expression)}return v}}let Jw;var pk={get paint(){return Jw=Jw||new d({"background-color":new Qt(it.paint_background["background-color"]),"background-pattern":new r(it.paint_background["background-pattern"]),"background-opacity":new Qt(it.paint_background["background-opacity"])})}};class mk extends _{constructor(n){super(n,pk)}}let Qw;var gk={get paint(){return Qw=Qw||new d({"raster-opacity":new Qt(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qt(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qt(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qt(it.paint_raster["raster-brightness-max"]),"raster-saturation":new Qt(it.paint_raster["raster-saturation"]),"raster-contrast":new Qt(it.paint_raster["raster-contrast"]),"raster-resampling":new Qt(it.paint_raster["raster-resampling"]),"raster-fade-duration":new Qt(it.paint_raster["raster-fade-duration"])})}};class yk extends _{constructor(n){super(n,gk)}}class vk extends _{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class _k{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const a0=63710088e-1;class Rl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Rl(G(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return a0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Rl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Rl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Rl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const eb=2*Math.PI*a0;function tb(o){return eb*Math.cos(o*Math.PI/180)}function nb(o){return(180+o)/360}function rb(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function ib(o,n){return o/tb(n)}function l0(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Up{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Rl.convert(n);return new Up(nb(h.lng),rb(h.lat),ib(s,h.lat))}toLngLat(){return new Rl(360*this.x-180,l0(this.y))}toAltitude(){return this.z*tb(l0(this.y))}meterInMercatorCoordinateUnits(){return 1/eb*(n=l0(this.y),1/Math.cos(n*Math.PI/180));var n}}function ob(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class u0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Fd(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,w=this.z,P=ob(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),F=ob(256*(v+1),256*(x+1),w),P[0]+","+P[1]+","+F[0]+","+F[1]);var v,x,w,P,F;const H=function(K,re,ue){let ge,Ie="";for(let Me=K;Me>0;Me--)ge=1<<Me-1,Ie+=(re&ge?1:0)+(ue&ge?2:0);return Ie}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new b((n.x*s-this.x)*kr,(n.y*s-this.y)*kr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sb{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Fd(n,s.z,s.z,s.x,s.y)}}class Fo{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new u0(h,+p,+v),this.key=Fd(s,n,h,p,v)}clone(){return new Fo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Fo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fo(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Fd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Fd(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Fo(s,this.wrap,s,h,p),new Fo(s,this.wrap,s,h+1,p),new Fo(s,this.wrap,s,h,p+1),new Fo(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Fo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Up(n.x-this.wrap,n.y))}}function Fd(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}$t("CanonicalTileID",u0),$t("OverscaledTileID",Fo,{omit:["posMatrix"]});class ab{constructor(n,s,h,p=1,v=1,x=1,w=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void _e(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<P;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(P,F)]=this.data[this._idx(P-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,P)]=this.data[this._idx(F,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<P;F++)for(let H=0;H<P;H++){const K=this.get(F,H);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new zo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,w=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=w-1;break;case 1:w=x+1}const P=-s*this.dim,F=-h*this.dim;for(let H=x;H<w;H++)for(let K=p;K<v;K++)this.data[this._idx(K,H)]=n.data[this._idx(K+P,H+F)]}}$t("DEMData",ab);class lb{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class ub{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class cb{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Cu(kr,16,0),this.grid3D=new Cu(kr,16,0),this.featureIndexArray=new ko,this.promoteId=s}insert(n,s,h,p,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const P=x?this.grid3D:this.grid;for(let F=0;F<s.length;F++){const H=s[F],K=[1/0,1/0,-1/0,-1/0];for(let re=0;re<H.length;re++){const ue=H[re];K[0]=Math.min(K[0],ue.x),K[1]=Math.min(K[1],ue.y),K[2]=Math.max(K[2],ue.x),K[3]=Math.max(K[3],ue.y)}K[0]<kr&&K[1]<kr&&K[2]>=0&&K[3]>=0&&P.insert(w,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ml.VectorTile(new Yy(this.rawTileData)).layers,this.sourceLayerCoder=new lb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},x=kr/n.tileSize/n.scale,w=Ar(v.filter),P=n.queryGeometry,F=n.queryPadding*x,H=db(P),K=this.grid.query(H.minX-F,H.minY-F,H.maxX+F,H.maxY+F),re=db(n.cameraQueryGeometry),ue=this.grid3D.query(re.minX-F,re.minY-F,re.maxX+F,re.maxY+F,(Me,Be,et,Ze)=>function(Je,ft,gt,Bt,Xt){for(const At of Je)if(ft<=At.x&&gt<=At.y&&Bt>=At.x&&Xt>=At.y)return!0;const Ot=[new b(ft,gt),new b(ft,Xt),new b(Bt,Xt),new b(Bt,gt)];if(Je.length>2){for(const At of Ot)if(Dc(Je,At))return!0}for(let At=0;At<Je.length-1;At++)if(eA(Je[At],Je[At+1],Ot))return!0;return!1}(n.cameraQueryGeometry,Me-F,Be-F,et+F,Ze+F));for(const Me of ue)K.push(Me);K.sort(xk);const ge={};let Ie;for(let Me=0;Me<K.length;Me++){const Be=K[Me];if(Be===Ie)continue;Ie=Be;const et=this.featureIndexArray.get(Be);let Ze=null;this.loadMatchingFeature(ge,et.bucketIndex,et.sourceLayerIndex,et.featureIndex,w,v.layers,v.availableImages,s,h,p,(Je,ft,gt)=>(Ze||(Ze=zu(Je)),ft.queryIntersectsFeature(P,Je,gt,Ze,this.z,n.transform,x,n.pixelPosMatrix)))}return ge}loadMatchingFeature(n,s,h,p,v,x,w,P,F,H,K){const re=this.bucketLayerIDs[s];if(x&&!function(Me,Be){for(let et=0;et<Me.length;et++)if(Be.indexOf(Me[et])>=0)return!0;return!1}(x,re))return;const ue=this.sourceLayerCoder.decode(h),ge=this.vtLayers[ue].feature(p);if(v.needGeometry){const Me=Fu(ge,!0);if(!v.filter(new Kn(this.tileID.overscaledZ),Me,this.tileID.canonical))return}else if(!v.filter(new Kn(this.tileID.overscaledZ),ge))return;const Ie=this.getId(ge,ue);for(let Me=0;Me<re.length;Me++){const Be=re[Me];if(x&&x.indexOf(Be)<0)continue;const et=P[Be];if(!et)continue;let Ze={};Ie&&H&&(Ze=H.getState(et.sourceLayer||"_geojsonTileLayer",Ie));const Je=E({},F[Be]);Je.paint=hb(Je.paint,et.paint,ge,Ze,w),Je.layout=hb(Je.layout,et.layout,ge,Ze,w);const ft=!K||K(ge,et,Ze);if(!ft)continue;const gt=new ub(ge,this.z,this.x,this.y,Ie);gt.layer=Je;let Bt=n[Be];Bt===void 0&&(Bt=n[Be]=[]),Bt.push({featureIndex:p,feature:gt,intersectionZ:ft})}}lookupSymbolFeatures(n,s,h,p,v,x,w,P){const F={};this.loadVTLayers();const H=Ar(v);for(const K of n)this.loadMatchingFeature(F,h,p,K,H,x,w,P,s);return F}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function hb(o,n,s,h,p){return L(o,(v,x)=>{const w=n instanceof Mc?n.get(x):null;return w&&w.evaluate?w.evaluate(s,h,p):w})}function db(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function xk(o,n){return n-o}function fb(o,n,s,h,p){const v=[];for(let x=0;x<o.length;x++){const w=o[x];let P;for(let F=0;F<w.length-1;F++){let H=w[F],K=w[F+1];H.x<n&&K.x<n||(H.x<n?H=new b(n,H.y+(n-H.x)/(K.x-H.x)*(K.y-H.y))._round():K.x<n&&(K=new b(n,H.y+(n-H.x)/(K.x-H.x)*(K.y-H.y))._round()),H.y<s&&K.y<s||(H.y<s?H=new b(H.x+(s-H.y)/(K.y-H.y)*(K.x-H.x),s)._round():K.y<s&&(K=new b(H.x+(s-H.y)/(K.y-H.y)*(K.x-H.x),s)._round()),H.x>=h&&K.x>=h||(H.x>=h?H=new b(h,H.y+(h-H.x)/(K.x-H.x)*(K.y-H.y))._round():K.x>=h&&(K=new b(h,H.y+(h-H.x)/(K.x-H.x)*(K.y-H.y))._round()),H.y>=p&&K.y>=p||(H.y>=p?H=new b(H.x+(p-H.y)/(K.y-H.y)*(K.x-H.x),p)._round():K.y>=p&&(K=new b(H.x+(p-H.y)/(K.y-H.y)*(K.x-H.x),p)._round()),P&&H.equals(P[P.length-1])||(P=[H],v.push(P)),P.push(K)))))}}return v}$t("FeatureIndex",cb,{omit:["rawTileData","sourceLayerCoder"]});class Ol extends b{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Ol(this.x,this.y,this.angle,this.segment)}}function pb(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,w=0;for(;w>-s/2;){if(x--,x<0)return!1;w-=o[x].dist(v),v=o[x]}w+=o[x].dist(o[x+1]),x++;const P=[];let F=0;for(;w<s/2;){const H=o[x],K=o[x+1];if(!K)return!1;let re=o[x-1].angleTo(H)-H.angleTo(K);for(re=Math.abs((re+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:w,angleDelta:re}),F+=re;w-P[0].distance>h;)F-=P.shift().angleDelta;if(F>p)return!1;x++,w+=H.dist(K)}return!0}function mb(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function gb(o,n,s){return o?.6*n*s:0}function yb(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function wk(o,n,s,h,p,v){const x=gb(s,p,v),w=yb(s,h)*v;let P=0;const F=mb(o)/2;for(let H=0;H<o.length-1;H++){const K=o[H],re=o[H+1],ue=K.dist(re);if(P+ue>F){const ge=(F-P)/ue,Ie=Xr.number(K.x,re.x,ge),Me=Xr.number(K.y,re.y,ge),Be=new Ol(Ie,Me,re.angleTo(K),H);return Be._round(),!x||pb(o,Be,w,x,n)?Be:void 0}P+=ue}}function bk(o,n,s,h,p,v,x,w,P){const F=gb(h,v,x),H=yb(h,p),K=H*x,re=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-K<n/4&&(n=K+n/4),vb(o,re?n/2*w%n:(H/2+2*v)*x*w%n,n,F,s,K,re,!1,P)}function vb(o,n,s,h,p,v,x,w,P){const F=v/2,H=mb(o);let K=0,re=n-s,ue=[];for(let ge=0;ge<o.length-1;ge++){const Ie=o[ge],Me=o[ge+1],Be=Ie.dist(Me),et=Me.angleTo(Ie);for(;re+s<K+Be;){re+=s;const Ze=(re-K)/Be,Je=Xr.number(Ie.x,Me.x,Ze),ft=Xr.number(Ie.y,Me.y,Ze);if(Je>=0&&Je<P&&ft>=0&&ft<P&&re-F>=0&&re+F<=H){const gt=new Ol(Je,ft,et,ge);gt._round(),h&&!pb(o,gt,v,h,p)||ue.push(gt)}}K+=Be}return w||ue.length||x||(ue=vb(o,K/2,s,h,p,v,x,!0,P)),ue}$t("Anchor",Ol);const Hc=Ki;function _b(o,n,s,h){const p=[],v=o.image,x=v.pixelRatio,w=v.paddedRect.w-2*Hc,P=v.paddedRect.h-2*Hc;let F={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const H=v.stretchX||[[0,w]],K=v.stretchY||[[0,P]],re=(_t,Zt)=>_t+Zt[1]-Zt[0],ue=H.reduce(re,0),ge=K.reduce(re,0),Ie=w-ue,Me=P-ge;let Be=0,et=ue,Ze=0,Je=ge,ft=0,gt=Ie,Bt=0,Xt=Me;if(v.content&&h){const _t=v.content,Zt=_t[2]-_t[0],Gt=_t[3]-_t[1];(v.textFitWidth||v.textFitHeight)&&(F=Hw(o)),Be=$p(H,0,_t[0]),Ze=$p(K,0,_t[1]),et=$p(H,_t[0],_t[2]),Je=$p(K,_t[1],_t[3]),ft=_t[0]-Be,Bt=_t[1]-Ze,gt=Zt-et,Xt=Gt-Je}const Ot=F.x1,At=F.y1,Vt=F.x2-Ot,en=F.y2-At,jt=(_t,Zt,Gt,xn)=>{const Hn=Vp(_t.stretch-Be,et,Vt,Ot),Zn=Gp(_t.fixed-ft,gt,_t.stretch,ue),Mr=Vp(Zt.stretch-Ze,Je,en,At),Ro=Gp(Zt.fixed-Bt,Xt,Zt.stretch,ge),Ti=Vp(Gt.stretch-Be,et,Vt,Ot),Vr=Gp(Gt.fixed-ft,gt,Gt.stretch,ue),Yr=Vp(xn.stretch-Ze,Je,en,At),Ii=Gp(xn.fixed-Bt,Xt,xn.stretch,ge),Di=new b(Hn,Mr),Ci=new b(Ti,Mr),zr=new b(Ti,Yr),Zr=new b(Hn,Yr),Bi=new b(Zn/x,Ro/x),Yi=new b(Vr/x,Ii/x),fi=n*Math.PI/180;if(fi){const gr=Math.sin(fi),Cn=Math.cos(fi),Fr=[Cn,-gr,gr,Cn];Di._matMult(Fr),Ci._matMult(Fr),Zr._matMult(Fr),zr._matMult(Fr)}const Ji=_t.stretch+_t.fixed,Oo=Zt.stretch+Zt.fixed;return{tl:Di,tr:Ci,bl:Zr,br:zr,tex:{x:v.paddedRect.x+Hc+Ji,y:v.paddedRect.y+Hc+Oo,w:Gt.stretch+Gt.fixed-Ji,h:xn.stretch+xn.fixed-Oo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bi,pixelOffsetBR:Yi,minFontScaleX:gt/x/Vt,minFontScaleY:Xt/x/en,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const _t=xb(H,Ie,ue),Zt=xb(K,Me,ge);for(let Gt=0;Gt<_t.length-1;Gt++){const xn=_t[Gt],Hn=_t[Gt+1];for(let Zn=0;Zn<Zt.length-1;Zn++)p.push(jt(xn,Zt[Zn],Hn,Zt[Zn+1]))}}else p.push(jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:P+1}));return p}function $p(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function xb(o,n,s){const h=[{fixed:-Hc,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+Hc,stretch:s}),h}function Vp(o,n,s,h){return o/n*s+h}function Gp(o,n,s,h){return o-n*s/h}class Wp{constructor(n,s,h,p,v,x,w,P,F,H){var K;if(this.boxStartIndex=n.length,F){let re=x.top,ue=x.bottom;const ge=x.collisionPadding;ge&&(re-=ge[1],ue+=ge[3]);let Ie=ue-re;Ie>0&&(Ie=Math.max(10,Ie),this.circleDiameter=Ie)}else{const re=!((K=x.image)===null||K===void 0)&&K.content&&(x.image.textFitWidth||x.image.textFitHeight)?Hw(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};re.y1=re.y1*w-P[0],re.y2=re.y2*w+P[2],re.x1=re.x1*w-P[3],re.x2=re.x2*w+P[1];const ue=x.collisionPadding;if(ue&&(re.x1-=ue[0]*w,re.y1-=ue[1]*w,re.x2+=ue[2]*w,re.y2+=ue[3]*w),H){const ge=new b(re.x1,re.y1),Ie=new b(re.x2,re.y1),Me=new b(re.x1,re.y2),Be=new b(re.x2,re.y2),et=H*Math.PI/180;ge._rotate(et),Ie._rotate(et),Me._rotate(et),Be._rotate(et),re.x1=Math.min(ge.x,Ie.x,Me.x,Be.x),re.x2=Math.max(ge.x,Ie.x,Me.x,Be.x),re.y1=Math.min(ge.y,Ie.y,Me.y,Be.y),re.y2=Math.max(ge.y,Ie.y,Me.y,Be.y)}n.emplaceBack(s.x,s.y,re.x1,re.y1,re.x2,re.y2,h,p,v)}this.boxEndIndex=n.length}}class Sk{constructor(n=[],s=Ek){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(p,x)>=0)break;s[n]=x,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let x=1+(n<<1),w=s[x];const P=x+1;if(P<this.length&&h(s[P],w)<0&&(x=P,w=s[P]),h(w,v)>=0)break;s[n]=w,n=x}s[n]=v}}function Ek(o,n){return o<n?-1:o>n?1:0}function Tk(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const w=o[0];for(let ue=0;ue<w.length;ue++){const ge=w[ue];(!ue||ge.x<h)&&(h=ge.x),(!ue||ge.y<p)&&(p=ge.y),(!ue||ge.x>v)&&(v=ge.x),(!ue||ge.y>x)&&(x=ge.y)}const P=Math.min(v-h,x-p);let F=P/2;const H=new Sk([],Ik);if(P===0)return new b(h,p);for(let ue=h;ue<v;ue+=P)for(let ge=p;ge<x;ge+=P)H.push(new Zc(ue+F,ge+F,F,o));let K=function(ue){let ge=0,Ie=0,Me=0;const Be=ue[0];for(let et=0,Ze=Be.length,Je=Ze-1;et<Ze;Je=et++){const ft=Be[et],gt=Be[Je],Bt=ft.x*gt.y-gt.x*ft.y;Ie+=(ft.x+gt.x)*Bt,Me+=(ft.y+gt.y)*Bt,ge+=3*Bt}return new Zc(Ie/ge,Me/ge,0,ue)}(o),re=H.length;for(;H.length;){const ue=H.pop();(ue.d>K.d||!K.d)&&(K=ue,s&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,re)),ue.max-K.d<=n||(F=ue.h/2,H.push(new Zc(ue.p.x-F,ue.p.y-F,F,o)),H.push(new Zc(ue.p.x+F,ue.p.y-F,F,o)),H.push(new Zc(ue.p.x-F,ue.p.y+F,F,o)),H.push(new Zc(ue.p.x+F,ue.p.y+F,F,o)),re+=4)}return s&&(console.log(`num probes: ${re}`),console.log(`best distance: ${K.d}`)),K.p}function Ik(o,n){return n.max-o.max}function Zc(o,n,s,h){this.p=new b(o,n),this.h=s,this.d=function(p,v){let x=!1,w=1/0;for(let P=0;P<v.length;P++){const F=v[P];for(let H=0,K=F.length,re=K-1;H<K;re=H++){const ue=F[H],ge=F[re];ue.y>p.y!=ge.y>p.y&&p.x<(ge.x-ue.x)*(p.y-ue.y)/(ge.y-ue.y)+ue.x&&(x=!x),w=Math.min(w,rw(p,ue,ge))}}return(x?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var di;f.aq=void 0,(di=f.aq||(f.aq={}))[di.center=1]="center",di[di.left=2]="left",di[di.right=3]="right",di[di.top=4]="top",di[di.bottom=5]="bottom",di[di["top-left"]=6]="top-left",di[di["top-right"]=7]="top-right",di[di["bottom-left"]=8]="bottom-left",di[di["bottom-right"]=9]="bottom-right";const jl=7,c0=Number.POSITIVE_INFINITY;function wb(o,n){return n[1]!==c0?function(s,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-jl;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+jl}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-jl;break;case"bottom-right":case"bottom-left":v=-x+jl;break;case"bottom":v=-h+jl;break;case"top":v=h-jl}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function bb(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const w=v.values,P=[];for(let F=0;F<w.length;F+=2){const H=P[F]=w[F],K=w[F+1].map(re=>re*$r);H.startsWith("top")?K[1]-=jl:H.startsWith("bottom")&&(K[1]+=jl),P[F+1]=K}return new ii(P)}const x=p.get("text-variable-anchor");if(x){let w;w=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*$r,c0]:p.get("text-offset").evaluate(n,{},s).map(F=>F*$r);const P=[];for(const F of x)P.push(F,wb(F,w));return new ii(P)}return null}function h0(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ck(o,n,s,h,p,v,x,w,P,F,H){let K=v.textMaxSize.evaluate(n,{});K===void 0&&(K=x);const re=o.layers[0].layout,ue=re.get("icon-offset").evaluate(n,{},H),ge=Eb(s.horizontal),Ie=x/24,Me=o.tilePixelRatio*Ie,Be=o.tilePixelRatio*K/24,et=o.tilePixelRatio*w,Ze=o.tilePixelRatio*re.get("symbol-spacing"),Je=re.get("text-padding")*o.tilePixelRatio,ft=function(_t,Zt,Gt,xn=1){const Hn=_t.get("icon-padding").evaluate(Zt,{},Gt),Zn=Hn&&Hn.values;return[Zn[0]*xn,Zn[1]*xn,Zn[2]*xn,Zn[3]*xn]}(re,n,H,o.tilePixelRatio),gt=re.get("text-max-angle")/180*Math.PI,Bt=re.get("text-rotation-alignment")!=="viewport"&&re.get("symbol-placement")!=="point",Xt=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Ot=re.get("symbol-placement"),At=Ze/2,Vt=re.get("icon-text-fit");let en;h&&Vt!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(en=Zw(h,s.vertical,Vt,re.get("icon-text-fit-padding"),ue,Ie)),ge&&(h=Zw(h,ge,Vt,re.get("icon-text-fit-padding"),ue,Ie)));const jt=(_t,Zt)=>{Zt.x<0||Zt.x>=kr||Zt.y<0||Zt.y>=kr||function(Gt,xn,Hn,Zn,Mr,Ro,Ti,Vr,Yr,Ii,Di,Ci,zr,Zr,Bi,Yi,fi,Ji,Oo,gr,Cn,Fr,pi,Gr,es){const Ss=Gt.addToLineVertexArray(xn,Hn);let Es,La,ts,jo,Qi=0,Da=0,jd=0,Pb=0,_0=-1,x0=-1;const Ba={};let Ab=jc("");if(Gt.allowVerticalPlacement&&Zn.vertical){const Pi=Vr.layout.get("text-rotate").evaluate(Cn,{},Gr)+90;ts=new Wp(Yr,xn,Ii,Di,Ci,Zn.vertical,zr,Zr,Bi,Pi),Ti&&(jo=new Wp(Yr,xn,Ii,Di,Ci,Ti,fi,Ji,Bi,Pi))}if(Mr){const Pi=Vr.layout.get("icon-rotate").evaluate(Cn,{}),Lo=Vr.layout.get("icon-text-fit")!=="none",Ou=_b(Mr,Pi,pi,Lo),Is=Ti?_b(Ti,Pi,pi,Lo):void 0;La=new Wp(Yr,xn,Ii,Di,Ci,Mr,fi,Ji,!1,Pi),Qi=4*Ou.length;const ju=Gt.iconSizeData;let sa=null;ju.kind==="source"?(sa=[oa*Vr.layout.get("icon-size").evaluate(Cn,{})],sa[0]>Fl&&_e(`${Gt.layerIds[0]}: Value for "icon-size" is >= ${zd}. Reduce your "icon-size".`)):ju.kind==="composite"&&(sa=[oa*Fr.compositeIconSizes[0].evaluate(Cn,{},Gr),oa*Fr.compositeIconSizes[1].evaluate(Cn,{},Gr)],(sa[0]>Fl||sa[1]>Fl)&&_e(`${Gt.layerIds[0]}: Value for "icon-size" is >= ${zd}. Reduce your "icon-size".`)),Gt.addSymbols(Gt.icon,Ou,sa,gr,Oo,Cn,f.ah.none,xn,Ss.lineStartIndex,Ss.lineLength,-1,Gr),_0=Gt.icon.placedSymbolArray.length-1,Is&&(Da=4*Is.length,Gt.addSymbols(Gt.icon,Is,sa,gr,Oo,Cn,f.ah.vertical,xn,Ss.lineStartIndex,Ss.lineLength,-1,Gr),x0=Gt.icon.placedSymbolArray.length-1)}const kb=Object.keys(Zn.horizontal);for(const Pi of kb){const Lo=Zn.horizontal[Pi];if(!Es){Ab=jc(Lo.text);const Is=Vr.layout.get("text-rotate").evaluate(Cn,{},Gr);Es=new Wp(Yr,xn,Ii,Di,Ci,Lo,zr,Zr,Bi,Is)}const Ou=Lo.positionedLines.length===1;if(jd+=Sb(Gt,xn,Lo,Ro,Vr,Bi,Cn,Yi,Ss,Zn.vertical?f.ah.horizontal:f.ah.horizontalOnly,Ou?kb:[Pi],Ba,_0,Fr,Gr),Ou)break}Zn.vertical&&(Pb+=Sb(Gt,xn,Zn.vertical,Ro,Vr,Bi,Cn,Yi,Ss,f.ah.vertical,["vertical"],Ba,x0,Fr,Gr));const kk=Es?Es.boxStartIndex:Gt.collisionBoxArray.length,Mk=Es?Es.boxEndIndex:Gt.collisionBoxArray.length,zk=ts?ts.boxStartIndex:Gt.collisionBoxArray.length,Fk=ts?ts.boxEndIndex:Gt.collisionBoxArray.length,Rk=La?La.boxStartIndex:Gt.collisionBoxArray.length,Ok=La?La.boxEndIndex:Gt.collisionBoxArray.length,jk=jo?jo.boxStartIndex:Gt.collisionBoxArray.length,Lk=jo?jo.boxEndIndex:Gt.collisionBoxArray.length;let Ts=-1;const Zp=(Pi,Lo)=>Pi&&Pi.circleDiameter?Math.max(Pi.circleDiameter,Lo):Lo;Ts=Zp(Es,Ts),Ts=Zp(ts,Ts),Ts=Zp(La,Ts),Ts=Zp(jo,Ts);const Mb=Ts>-1?1:0;Mb&&(Ts*=es/$r),Gt.glyphOffsetArray.length>=Wc.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&Gt.addToSortKeyRanges(Gt.symbolInstances.length,Cn.sortKey);const Dk=bb(Vr,Cn,Gr),[Bk,Nk]=function(Pi,Lo){const Ou=Pi.length,Is=Lo==null?void 0:Lo.values;if((Is==null?void 0:Is.length)>0)for(let ju=0;ju<Is.length;ju+=2){const sa=Is[ju+1];Pi.emplaceBack(f.aq[Is[ju]],sa[0],sa[1])}return[Ou,Pi.length]}(Gt.textAnchorOffsets,Dk);Gt.symbolInstances.emplaceBack(xn.x,xn.y,Ba.right>=0?Ba.right:-1,Ba.center>=0?Ba.center:-1,Ba.left>=0?Ba.left:-1,Ba.vertical||-1,_0,x0,Ab,kk,Mk,zk,Fk,Rk,Ok,jk,Lk,Ii,jd,Pb,Qi,Da,Mb,0,zr,Ts,Bk,Nk)}(o,Zt,_t,s,h,p,en,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Me,[Je,Je,Je,Je],Bt,P,et,ft,Xt,ue,n,v,F,H,x)};if(Ot==="line")for(const _t of fb(n.geometry,0,0,kr,kr)){const Zt=bk(_t,Ze,gt,s.vertical||ge,h,24,Be,o.overscaling,kr);for(const Gt of Zt)ge&&Pk(o,ge.text,At,Gt)||jt(_t,Gt)}else if(Ot==="line-center"){for(const _t of n.geometry)if(_t.length>1){const Zt=wk(_t,gt,s.vertical||ge,h,24,Be);Zt&&jt(_t,Zt)}}else if(n.type==="Polygon")for(const _t of gl(n.geometry,0)){const Zt=Tk(_t,16);jt(_t[0],new Ol(Zt.x,Zt.y,0))}else if(n.type==="LineString")for(const _t of n.geometry)jt(_t,new Ol(_t[0].x,_t[0].y,0));else if(n.type==="Point")for(const _t of n.geometry)for(const Zt of _t)jt([Zt],new Ol(Zt.x,Zt.y,0))}function Sb(o,n,s,h,p,v,x,w,P,F,H,K,re,ue,ge){const Ie=function(et,Ze,Je,ft,gt,Bt,Xt,Ot){const At=ft.layout.get("text-rotate").evaluate(Bt,{})*Math.PI/180,Vt=[];for(const en of Ze.positionedLines)for(const jt of en.positionedGlyphs){if(!jt.rect)continue;const _t=jt.rect||{};let Zt=Bw+1,Gt=!0,xn=1,Hn=0;const Zn=(gt||Ot)&&jt.vertical,Mr=jt.metrics.advance*jt.scale/2;if(Ot&&Ze.verticalizable&&(Hn=en.lineOffset/2-(jt.imageName?-($r-jt.metrics.width*jt.scale)/2:(jt.scale-1)*$r)),jt.imageName){const gr=Xt[jt.imageName];Gt=gr.sdf,xn=gr.pixelRatio,Zt=Ki/xn}const Ro=gt?[jt.x+Mr,jt.y]:[0,0];let Ti=gt?[0,0]:[jt.x+Mr+Je[0],jt.y+Je[1]-Hn],Vr=[0,0];Zn&&(Vr=Ti,Ti=[0,0]);const Yr=jt.metrics.isDoubleResolution?2:1,Ii=(jt.metrics.left-Zt)*jt.scale-Mr+Ti[0],Di=(-jt.metrics.top-Zt)*jt.scale+Ti[1],Ci=Ii+_t.w/Yr*jt.scale/xn,zr=Di+_t.h/Yr*jt.scale/xn,Zr=new b(Ii,Di),Bi=new b(Ci,Di),Yi=new b(Ii,zr),fi=new b(Ci,zr);if(Zn){const gr=new b(-Mr,Mr-kd),Cn=-Math.PI/2,Fr=$r/2-Mr,pi=new b(5-kd-Fr,-(jt.imageName?Fr:0)),Gr=new b(...Vr);Zr._rotateAround(Cn,gr)._add(pi)._add(Gr),Bi._rotateAround(Cn,gr)._add(pi)._add(Gr),Yi._rotateAround(Cn,gr)._add(pi)._add(Gr),fi._rotateAround(Cn,gr)._add(pi)._add(Gr)}if(At){const gr=Math.sin(At),Cn=Math.cos(At),Fr=[Cn,-gr,gr,Cn];Zr._matMult(Fr),Bi._matMult(Fr),Yi._matMult(Fr),fi._matMult(Fr)}const Ji=new b(0,0),Oo=new b(0,0);Vt.push({tl:Zr,tr:Bi,bl:Yi,br:fi,tex:_t,writingMode:Ze.writingMode,glyphOffset:Ro,sectionIndex:jt.sectionIndex,isSDF:Gt,pixelOffsetTL:Ji,pixelOffsetBR:Oo,minFontScaleX:0,minFontScaleY:0})}return Vt}(0,s,w,p,v,x,h,o.allowVerticalPlacement),Me=o.textSizeData;let Be=null;Me.kind==="source"?(Be=[oa*p.layout.get("text-size").evaluate(x,{})],Be[0]>Fl&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${zd}. Reduce your "text-size".`)):Me.kind==="composite"&&(Be=[oa*ue.compositeTextSizes[0].evaluate(x,{},ge),oa*ue.compositeTextSizes[1].evaluate(x,{},ge)],(Be[0]>Fl||Be[1]>Fl)&&_e(`${o.layerIds[0]}: Value for "text-size" is >= ${zd}. Reduce your "text-size".`)),o.addSymbols(o.text,Ie,Be,w,v,x,F,n,P.lineStartIndex,P.lineLength,re,ge);for(const et of H)K[et]=o.text.placedSymbolArray.length-1;return 4*Ie.length}function Eb(o){for(const n in o)return o[n];return null}function Pk(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const Tb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class d0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=Tb[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new d0(w,x,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Tb.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return f0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,P=[0,v.length-1,0],F=[];for(;P.length;){const H=P.pop()||0,K=P.pop()||0,re=P.pop()||0;if(K-re<=w){for(let Me=re;Me<=K;Me++){const Be=x[2*Me],et=x[2*Me+1];Be>=n&&Be<=h&&et>=s&&et<=p&&F.push(v[Me])}continue}const ue=re+K>>1,ge=x[2*ue],Ie=x[2*ue+1];ge>=n&&ge<=h&&Ie>=s&&Ie<=p&&F.push(v[ue]),(H===0?n<=ge:s<=Ie)&&(P.push(re),P.push(ue-1),P.push(1-H)),(H===0?h>=ge:p>=Ie)&&(P.push(ue+1),P.push(K),P.push(1-H))}return F}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,w=[0,p.length-1,0],P=[],F=h*h;for(;w.length;){const H=w.pop()||0,K=w.pop()||0,re=w.pop()||0;if(K-re<=x){for(let Me=re;Me<=K;Me++)Cb(v[2*Me],v[2*Me+1],n,s)<=F&&P.push(p[Me]);continue}const ue=re+K>>1,ge=v[2*ue],Ie=v[2*ue+1];Cb(ge,Ie,n,s)<=F&&P.push(p[ue]),(H===0?n-h<=ge:s-h<=Ie)&&(w.push(re),w.push(ue-1),w.push(1-H)),(H===0?n+h>=ge:s+h>=Ie)&&(w.push(ue+1),w.push(K),w.push(1-H))}return P}}function f0(o,n,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;Ib(o,n,x,h,p,v),f0(o,n,s,h,x-1,1-v),f0(o,n,s,x+1,p,1-v)}function Ib(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const F=p-h+1,H=s-h+1,K=Math.log(F),re=.5*Math.exp(2*K/3),ue=.5*Math.sqrt(K*re*(F-re)/F)*(H-F/2<0?-1:1);Ib(o,n,s,Math.max(h,Math.floor(s-H*re/F+ue)),Math.min(p,Math.floor(s+(F-H)*re/F+ue)),v)}const x=n[2*s+v];let w=h,P=p;for(Rd(o,n,h,s),n[2*p+v]>x&&Rd(o,n,h,p);w<P;){for(Rd(o,n,w,P),w++,P--;n[2*w+v]<x;)w++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?Rd(o,n,h,P):(P++,Rd(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function Rd(o,n,s,h){p0(o,s,h),p0(n,2*s,2*h),p0(n,2*s+1,2*h+1)}function p0(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Cb(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var m0;f.be=void 0,(m0=f.be||(f.be={})).create="create",m0.load="load",m0.fullLoad="fullLoad";let Hp=null,Od=[];const g0=1e3/60,y0="loadTime",v0="fullLoadTime",Ak={mark(o){performance.mark(o)},frame(o){const n=o;Hp!=null&&Od.push(n-Hp),Hp=n},clearMetrics(){Hp=null,Od=[],performance.clearMeasures(y0),performance.clearMeasures(v0);for(const o in f.be)performance.clearMarks(f.be[o])},getPerformanceMetrics(){performance.measure(y0,f.be.create,f.be.load),performance.measure(v0,f.be.create,f.be.fullLoad);const o=performance.getEntriesByName(y0)[0].duration,n=performance.getEntriesByName(v0)[0].duration,s=Od.length,h=1/(Od.reduce((v,x)=>v+x,0)/s/1e3),p=Od.filter(v=>v>g0).reduce((v,x)=>v+(x-g0)/g0,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};f.$=Ur,f.A=Bc,f.B=function(o){if(ce==null){const n=o.navigator?o.navigator.userAgent:null;ce=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ce},f.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new _k(()=>this.process()),this.subscription=function(s,h,p,v){return s.addEventListener(h,p,!1),{unsubscribe:()=>{s.removeEventListener(h,p,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=oe(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,h)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:s,reject:h},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];const w={id:p,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(w)},{once:!0});const v=[],x=Object.assign(Object.assign({},o),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Pu(o.data,v)});this.target.postMessage(x,{transfer:v})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(oe(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const p=this.resolveRejects[o];return delete this.resolveRejects[o],p?void(n.error?p.reject(Jo(n.error)):p.resolve(Jo(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Jo(n.data),h=new AbortController;this.abortControllers[o]=h;try{const p=yield this.messageHandlers[n.type](n.sourceMapId,s,h);this.completeTask(o,null,p)}catch(p){this.completeTask(o,p)}})}completeTask(o,n,s){const h=[];delete this.abortControllers[o];const p={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?Pu(n):null,data:Pu(s,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.D=Qt,f.E=cn,f.F=function(){var o=new Bc(16);return Bc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},f.G=He,f.H=function(o,n,s){var h,p,v,x,w,P,F,H,K,re,ue,ge,Ie=s[0],Me=s[1],Be=s[2];return n===o?(o[12]=n[0]*Ie+n[4]*Me+n[8]*Be+n[12],o[13]=n[1]*Ie+n[5]*Me+n[9]*Be+n[13],o[14]=n[2]*Ie+n[6]*Me+n[10]*Be+n[14],o[15]=n[3]*Ie+n[7]*Me+n[11]*Be+n[15]):(p=n[1],v=n[2],x=n[3],w=n[4],P=n[5],F=n[6],H=n[7],K=n[8],re=n[9],ue=n[10],ge=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=w,o[5]=P,o[6]=F,o[7]=H,o[8]=K,o[9]=re,o[10]=ue,o[11]=ge,o[12]=h*Ie+w*Me+K*Be+n[12],o[13]=p*Ie+P*Me+re*Be+n[13],o[14]=v*Ie+F*Me+ue*Be+n[14],o[15]=x*Ie+H*Me+ge*Be+n[15]),o},f.I=Qy,f.J=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.K=aw,f.L=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},f.M=Rl,f.N=nb,f.O=rb,f.P=b,f.Q=Fo,f.R=zo,f.S=Y,f.T=Tl,f.U=q,f.V=de,f.W=kr,f.X=$,f.Y=Up,f.Z=class extends be{},f._=u,f.a=ze,f.a$=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.a0=u0,f.a1=M,f.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const h of o){const p=window.document.createElement("source");kt(h)||(n.crossOrigin="Anonymous"),p.src=h,n.appendChild(p)}})},f.a3=function(){return j++},f.a4=En,f.a5=Wc,f.a6=Ar,f.a7=Fu,f.a8=Kn,f.a9=ub,f.aA=function(o){if(o.type==="custom")return new vk(o);switch(o.type){case"background":return new mk(o);case"circle":return new rA(o);case"fill":return new xA(o);case"fill-extrusion":return new OA(o);case"heatmap":return new oA(o);case"hillshade":return new aA(o);case"line":return new VA(o);case"raster":return new yk(o);case"symbol":return new Np(o)}},f.aB=Z,f.aC=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!qt(o.version,n.version))return[{command:"setStyle",args:[n]}];qt(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),qt(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),qt(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),qt(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),qt(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),qt(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),qt(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),qt(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),qt(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),qt(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]});const h={},p=[];(function(x,w,P,F){let H;for(H in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,H)&&(Object.prototype.hasOwnProperty.call(w,H)||D(H,P,F));for(H in w)Object.prototype.hasOwnProperty.call(w,H)&&(Object.prototype.hasOwnProperty.call(x,H)?qt(x[H],w[H])||(x[H].type==="geojson"&&w[H].type==="geojson"&&Xe(x,w,H)?Se(P,{command:"setGeoJSONSourceData",args:[H,w[H].data]}):xe(H,w,P,F)):N(H,w,P))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{"source"in x&&h[x.source]?s.push({command:"removeLayer",args:[x.id]}):v.push(x)}),s=s.concat(p),function(x,w,P){w=w||[];const F=(x=x||[]).map(ct),H=w.map(ct),K=x.reduce(ae,{}),re=w.reduce(ae,{}),ue=F.slice(),ge=Object.create(null);let Ie,Me,Be,et,Ze;for(let Je=0,ft=0;Je<F.length;Je++)Ie=F[Je],Object.prototype.hasOwnProperty.call(re,Ie)?ft++:(Se(P,{command:"removeLayer",args:[Ie]}),ue.splice(ue.indexOf(Ie,ft),1));for(let Je=0,ft=0;Je<H.length;Je++)Ie=H[H.length-1-Je],ue[ue.length-1-Je]!==Ie&&(Object.prototype.hasOwnProperty.call(K,Ie)?(Se(P,{command:"removeLayer",args:[Ie]}),ue.splice(ue.lastIndexOf(Ie,ue.length-ft),1)):ft++,et=ue[ue.length-Je],Se(P,{command:"addLayer",args:[re[Ie],et]}),ue.splice(ue.length-Je,0,Ie),ge[Ie]=!0);for(let Je=0;Je<H.length;Je++)if(Ie=H[Je],Me=K[Ie],Be=re[Ie],!ge[Ie]&&!qt(Me,Be))if(qt(Me.source,Be.source)&&qt(Me["source-layer"],Be["source-layer"])&&qt(Me.type,Be.type)){for(Ze in tt(Me.layout,Be.layout,P,Ie,null,"setLayoutProperty"),tt(Me.paint,Be.paint,P,Ie,null,"setPaintProperty"),qt(Me.filter,Be.filter)||Se(P,{command:"setFilter",args:[Ie,Be.filter]}),qt(Me.minzoom,Be.minzoom)&&qt(Me.maxzoom,Be.maxzoom)||Se(P,{command:"setLayerZoomRange",args:[Ie,Be.minzoom,Be.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(Me[Ze],Be[Ze],P,Ie,Ze.slice(6),"setPaintProperty"):qt(Me[Ze],Be[Ze])||Se(P,{command:"setLayerProperty",args:[Ie,Ze,Be[Ze]]}));for(Ze in Be)Object.prototype.hasOwnProperty.call(Be,Ze)&&!Object.prototype.hasOwnProperty.call(Me,Ze)&&Ze!=="layout"&&Ze!=="paint"&&Ze!=="filter"&&Ze!=="metadata"&&Ze!=="minzoom"&&Ze!=="maxzoom"&&(Ze.indexOf("paint.")===0?tt(Me[Ze],Be[Ze],P,Ie,Ze.slice(6),"setPaintProperty"):qt(Me[Ze],Be[Ze])||Se(P,{command:"setLayerProperty",args:[Ie,Ze,Be[Ze]]}))}else Se(P,{command:"removeLayer",args:[Ie]}),et=ue[ue.lastIndexOf(Ie)+1],Se(P,{command:"addLayer",args:[Be,et]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[n]}]}return s},f.aD=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},f.aE=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},f.aF=L,f.aG=ee,f.aH=class extends ku{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},f.aI=Ip,f.aJ=class extends ku{constructor(o,n){super(o,n),this.current=XP}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},f.aK=Kx,f.aL=class extends ku{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},f.aM=class extends ku{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},f.aN=Yx,f.aO=function(o,n,s,h,p,v,x){var w=1/(n-s),P=1/(h-p),F=1/(v-x);return o[0]=-2*w,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*F,o[11]=0,o[12]=(n+s)*w,o[13]=(p+h)*P,o[14]=(x+v)*F,o[15]=1,o},f.aP=zn,f.aQ=nA,f.aR=class extends mt{},f.aS=ZA,f.aT=class extends Nt{},f.aU=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},f.aV=dw,f.aW=Fa,f.aX=class extends Rt{},f.aY=Hr,f.aZ=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},f.a_=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],x=o[4],w=o[5],P=o[6],F=o[7],H=o[8],K=o[9],re=o[10],ue=o[11],ge=o[12],Ie=o[13],Me=o[14],Be=o[15],et=n[0],Ze=n[1],Je=n[2],ft=n[3],gt=n[4],Bt=n[5],Xt=n[6],Ot=n[7],At=n[8],Vt=n[9],en=n[10],jt=n[11],_t=n[12],Zt=n[13],Gt=n[14],xn=n[15];return Math.abs(s-et)<=Li*Math.max(1,Math.abs(s),Math.abs(et))&&Math.abs(h-Ze)<=Li*Math.max(1,Math.abs(h),Math.abs(Ze))&&Math.abs(p-Je)<=Li*Math.max(1,Math.abs(p),Math.abs(Je))&&Math.abs(v-ft)<=Li*Math.max(1,Math.abs(v),Math.abs(ft))&&Math.abs(x-gt)<=Li*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(w-Bt)<=Li*Math.max(1,Math.abs(w),Math.abs(Bt))&&Math.abs(P-Xt)<=Li*Math.max(1,Math.abs(P),Math.abs(Xt))&&Math.abs(F-Ot)<=Li*Math.max(1,Math.abs(F),Math.abs(Ot))&&Math.abs(H-At)<=Li*Math.max(1,Math.abs(H),Math.abs(At))&&Math.abs(K-Vt)<=Li*Math.max(1,Math.abs(K),Math.abs(Vt))&&Math.abs(re-en)<=Li*Math.max(1,Math.abs(re),Math.abs(en))&&Math.abs(ue-jt)<=Li*Math.max(1,Math.abs(ue),Math.abs(jt))&&Math.abs(ge-_t)<=Li*Math.max(1,Math.abs(ge),Math.abs(_t))&&Math.abs(Ie-Zt)<=Li*Math.max(1,Math.abs(Ie),Math.abs(Zt))&&Math.abs(Me-Gt)<=Li*Math.max(1,Math.abs(Me),Math.abs(Gt))&&Math.abs(Be-xn)<=Li*Math.max(1,Math.abs(Be),Math.abs(xn))},f.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},f.ab=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},f.ac=X,f.ad=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],x=n[1],w=n[2],P=n[3],F=n[4],H=n[5],K=n[6],re=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+F*h,o[1]=x*p+H*h,o[2]=w*p+K*h,o[3]=P*p+re*h,o[4]=F*p-v*h,o[5]=H*p-x*h,o[6]=K*p-w*h,o[7]=re*p-P*h,o},f.ae=function(o){var n=new Bc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},f.af=kp,f.ag=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,w=p?X(_i.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=Xr.number(o.minSize,o.maxSize,w):s=w}return{uSizeT:s,uSize:h}},f.ai=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/oa:o.kind==="composite"?Xr.number(h/oa,p/oa,s):n},f.aj=r0,f.ak=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,x=h.y-s.y,w=h.x-s.x,P=x*v-w*p;if(P===0)return null;const F=(w*(o.y-s.y)-x*(o.x-s.x))/P;return new b(o.x+F*v,o.y+F*p)},f.al=fb,f.am=tw,f.an=Ly,f.ao=function(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return[n,s,h,p]},f.ap=$r,f.ar=n0,f.as=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],x=n[4],w=n[5],P=n[6],F=n[7],H=n[8],K=n[9],re=n[10],ue=n[11],ge=n[12],Ie=n[13],Me=n[14],Be=n[15],et=s*w-h*x,Ze=s*P-p*x,Je=s*F-v*x,ft=h*P-p*w,gt=h*F-v*w,Bt=p*F-v*P,Xt=H*Ie-K*ge,Ot=H*Me-re*ge,At=H*Be-ue*ge,Vt=K*Me-re*Ie,en=K*Be-ue*Ie,jt=re*Be-ue*Me,_t=et*jt-Ze*en+Je*Vt+ft*At-gt*Ot+Bt*Xt;return _t?(o[0]=(w*jt-P*en+F*Vt)*(_t=1/_t),o[1]=(p*en-h*jt-v*Vt)*_t,o[2]=(Ie*Bt-Me*gt+Be*ft)*_t,o[3]=(re*gt-K*Bt-ue*ft)*_t,o[4]=(P*At-x*jt-F*Ot)*_t,o[5]=(s*jt-p*At+v*Ot)*_t,o[6]=(Me*Je-ge*Bt-Be*Ze)*_t,o[7]=(H*Bt-re*Je+ue*Ze)*_t,o[8]=(x*en-w*At+F*Xt)*_t,o[9]=(h*At-s*en-v*Xt)*_t,o[10]=(ge*gt-Ie*Je+Be*et)*_t,o[11]=(K*Je-H*gt-ue*et)*_t,o[12]=(w*Ot-x*Vt-P*Xt)*_t,o[13]=(s*Vt-h*Ot+p*Xt)*_t,o[14]=(Ie*Ze-ge*ft-Me*et)*_t,o[15]=(H*ft-K*Ze+re*et)*_t,o):null},f.at=h0,f.au=t0,f.av=d0,f.aw=function(){const o={},n=it.$version;for(const s in it.$root){const h=it.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},f.ax=vp,f.ay=ht,f.az=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=hn(o[s],n[o[s].ref]));return o},f.b=J,f.b0=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},f.b1=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},f.b2=G,f.b3=sb,f.b4=ib,f.b5=function(o,n,s,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},f.b6=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],x=n[5],w=n[6],P=n[7],F=n[8],H=n[9],K=n[10],re=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+F*h,o[5]=x*p+H*h,o[6]=w*p+K*h,o[7]=P*p+re*h,o[8]=F*p-v*h,o[9]=H*p-x*h,o[10]=K*p-w*h,o[11]=re*p-P*h,o},f.b7=V,f.b8=se,f.b9=function(o){return o*Math.PI/180},f.bA=Tt,f.bB=na,f.ba=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},f.bb=class extends me{},f.bc=a0,f.bd=Ak,f.bf=ot,f.bg=function(o,n){ze.REGISTERED_PROTOCOLS[o]=n},f.bh=function(o){delete ze.REGISTERED_PROTOCOLS[o]},f.bi=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||Py(o[p]);n&&(n[o[p].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},f.bj=$t,f.bk=lb,f.bl=cb,f.bm=Uw,f.bn=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=kr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new Kn(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Kn(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Kn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:H}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Kn(F),o.canonical),h["text-size"].possiblyEvaluate(new Kn(H),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:H}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Kn(F),o.canonical),h["icon-size"].possiblyEvaluate(new Kn(H),o.canonical)]}const v=s.get("text-line-height")*$r,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",w=s.get("text-keep-upright"),P=s.get("text-size");for(const F of o.bucket.features){const H=s.get("text-font").evaluate(F,{},o.canonical).join(","),K=P.evaluate(F,{},o.canonical),re=p.layoutTextSize.evaluate(F,{},o.canonical),ue=p.layoutIconSize.evaluate(F,{},o.canonical),ge={horizontal:{},vertical:void 0},Ie=F.text;let Me,Be=[0,0];if(Ie){const Je=Ie.toString(),ft=s.get("text-letter-spacing").evaluate(F,{},o.canonical)*$r,gt=ky(Je)?ft:0,Bt=s.get("text-anchor").evaluate(F,{},o.canonical),Xt=bb(n,F,o.canonical);if(!Xt){const jt=s.get("text-radial-offset").evaluate(F,{},o.canonical);Be=jt?wb(Bt,[jt*$r,c0]):s.get("text-offset").evaluate(F,{},o.canonical).map(_t=>_t*$r)}let Ot=x?"center":s.get("text-justify").evaluate(F,{},o.canonical);const At=s.get("symbol-placement"),Vt=At==="point"?s.get("text-max-width").evaluate(F,{},o.canonical)*$r:0,en=()=>{o.bucket.allowVerticalPlacement&&hd(Je)&&(ge.vertical=Lp(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,Bt,"left",gt,Be,f.ah.vertical,!0,At,re,K))};if(!x&&Xt){const jt=new Set;if(Ot==="auto")for(let Zt=0;Zt<Xt.values.length;Zt+=2)jt.add(h0(Xt.values[Zt]));else jt.add(Ot);let _t=!1;for(const Zt of jt)if(!ge.horizontal[Zt])if(_t)ge.horizontal[Zt]=ge.horizontal[0];else{const Gt=Lp(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,"center",Zt,gt,Be,f.ah.horizontal,!1,At,re,K);Gt&&(ge.horizontal[Zt]=Gt,_t=Gt.positionedLines.length===1)}en()}else{Ot==="auto"&&(Ot=h0(Bt));const jt=Lp(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,Bt,Ot,gt,Be,f.ah.horizontal,!1,At,re,K);jt&&(ge.horizontal[Ot]=jt),en(),hd(Je)&&x&&w&&(ge.vertical=Lp(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,Vt,v,Bt,Ot,gt,Be,f.ah.vertical,!1,At,re,K))}}let et=!1;if(F.icon&&F.icon.name){const Je=o.imageMap[F.icon.name];Je&&(Me=ck(o.imagePositions[F.icon.name],s.get("icon-offset").evaluate(F,{},o.canonical),s.get("icon-anchor").evaluate(F,{},o.canonical)),et=!!Je.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=et:o.bucket.sdfIcons!==et&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Je.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Ze=Eb(ge.horizontal)||ge.vertical;o.bucket.iconsInText=!!Ze&&Ze.iconsInText,(Ze||Me)&&Ck(o.bucket,F,ge,Me,o.imageMap,p,re,ue,Be,et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},f.bo=Xy,f.bp=Hy,f.bq=qy,f.br=Ml,f.bs=Yy,f.bt=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},f.bu=function(o,n,s,h,p){return u(this,void 0,void 0,function*(){if(q())try{return yield de(o,n,s,h,p)}catch{}return function(v,x,w,P,F){const H=v.width,K=v.height;we&&Te||(we=new OffscreenCanvas(H,K),Te=we.getContext("2d",{willReadFrequently:!0})),we.width=H,we.height=K,Te.drawImage(v,0,0,H,K);const re=Te.getImageData(x,w,P,F);return Te.clearRect(0,0,H,K),re.data}(o,n,s,h,p)})},f.bv=ab,f.bw=S,f.bx=C,f.by=zw,f.bz=function(o){return o.message===Ne},f.c=Pe,f.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=E,f.f=o=>new Promise((n,s)=>{const h=new Image;h.onload=()=>{n(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ne})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});h.src=o.byteLength?URL.createObjectURL(p):ne}),f.g=qe,f.h=(o,n)=>xt(E(o,{type:"json"}),n),f.i=oe,f.j=Lt,f.k=Ht,f.l=(o,n)=>xt(E(o,{type:"arrayBuffer"}),n),f.m=xt,f.n=function(o){return new Yy(o).readFields(ik,[])},f.o=Sd,f.p=Nw,f.q=d,f.r=Ay,f.s=kt,f.t=cd,f.u=Dt,f.v=it,f.w=_e,f.x=Iu,f.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},f.z=Xr}),c("worker",["./shared"],function(f){class u{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,le){for(const Fe of ie){this._layerConfigs[Fe.id]=Fe;const De=this._layers[Fe.id]=f.aA(Fe);De._featureFilter=f.a6(De.filter),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id]}for(const Fe of le)delete this.keyCache[Fe],delete this._layerConfigs[Fe],delete this._layers[Fe];this.familiesBySource={};const fe=f.bi(Object.values(this._layerConfigs),this.keyCache);for(const Fe of fe){const De=Fe.map(lt=>this._layers[lt.id]),Oe=De[0];if(Oe.visibility==="none")continue;const $e=Oe.source||"";let je=this.familiesBySource[$e];je||(je=this.familiesBySource[$e]={});const Qe=Oe.sourceLayer||"_geojsonTileLayer";let dt=je[Qe];dt||(dt=je[Qe]=[]),dt.push(De)}}}class S{constructor(ie){const le={},fe=[];for(const $e in ie){const je=ie[$e],Qe=le[$e]={};for(const dt in je){const lt=je[+dt];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const ut={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};fe.push(ut),Qe[dt]={rect:ut,metrics:lt.metrics}}}const{w:Fe,h:De}=f.p(fe),Oe=new f.o({width:Fe||1,height:De||1});for(const $e in ie){const je=ie[$e];for(const Qe in je){const dt=je[+Qe];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const lt=le[$e][Qe].rect;f.o.copy(dt.bitmap,Oe,{x:0,y:0},{x:lt.x+1,y:lt.y+1},dt.bitmap)}}this.image=Oe,this.positions=le}}f.bj("GlyphAtlas",S);class C{constructor(ie){this.tileID=new f.Q(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,le,fe,Fe){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new f.a4;const De=new f.bk(Object.keys(ie.layers).sort()),Oe=new f.bl(this.tileID,this.promoteId);Oe.bucketLayerIDs=[];const $e={},je={featureIndex:Oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},Qe=le.familiesBySource[this.source];for(const mn in Qe){const Jn=ie.layers[mn];if(!Jn)continue;Jn.version===1&&f.w(`Vector tile source "${this.source}" layer "${mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const vr=De.encode(mn),ni=[];for(let vi=0;vi<Jn.length;vi++){const _r=Jn.feature(vi),Bs=Oe.getId(_r,mn);ni.push({feature:_r,id:Bs,index:vi,sourceLayerIndex:vr})}for(const vi of Qe[mn]){const _r=vi[0];_r.source!==this.source&&f.w(`layer.source = ${_r.source} does not equal this.source = ${this.source}`),_r.minzoom&&this.zoom<Math.floor(_r.minzoom)||_r.maxzoom&&this.zoom>=_r.maxzoom||_r.visibility!=="none"&&(k(vi,this.zoom,fe),($e[_r.id]=_r.createBucket({index:Oe.bucketLayerIDs.length,layers:vi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vr,sourceID:this.source})).populate(ni,je,this.tileID.canonical),Oe.bucketLayerIDs.push(vi.map(Bs=>Bs.id)))}}const dt=f.aF(je.glyphDependencies,mn=>Object.keys(mn).map(Number));this.inFlightDependencies.forEach(mn=>mn==null?void 0:mn.abort()),this.inFlightDependencies=[];let lt=Promise.resolve({});if(Object.keys(dt).length){const mn=new AbortController;this.inFlightDependencies.push(mn),lt=Fe.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},mn)}const ut=Object.keys(je.iconDependencies);let rn=Promise.resolve({});if(ut.length){const mn=new AbortController;this.inFlightDependencies.push(mn),rn=Fe.sendAsync({type:"GI",data:{icons:ut,source:this.source,tileID:this.tileID,type:"icons"}},mn)}const Yt=Object.keys(je.patternDependencies);let Tn=Promise.resolve({});if(Yt.length){const mn=new AbortController;this.inFlightDependencies.push(mn),Tn=Fe.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"patterns"}},mn)}const[un,In,Bn]=yield Promise.all([lt,rn,Tn]),Vn=new S(un),or=new f.bm(In,Bn);for(const mn in $e){const Jn=$e[mn];Jn instanceof f.a5?(k(Jn.layers,this.zoom,fe),f.bn({bucket:Jn,glyphMap:un,glyphPositions:Vn.positions,imageMap:In,imagePositions:or.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Jn.hasPattern&&(Jn instanceof f.bo||Jn instanceof f.bp||Jn instanceof f.bq)&&(k(Jn.layers,this.zoom,fe),Jn.addFeatures(je,this.tileID.canonical,or.patternPositions))}return this.status="done",{buckets:Object.values($e).filter(mn=>!mn.isEmpty()),featureIndex:Oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vn.image,imageAtlas:or,glyphMap:this.returnDependencies?un:null,iconMap:this.returnDependencies?In:null,glyphPositions:this.returnDependencies?Vn.positions:null}})}}function k(ke,ie,le){const fe=new f.a8(ie);for(const Fe of ke)Fe.recalculate(fe,le)}class b{constructor(ie,le,fe){this.actor=ie,this.layerIndex=le,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,le){return f._(this,void 0,void 0,function*(){const fe=yield f.l(ie.request,le);try{return{vectorTile:new f.br.VectorTile(new f.bs(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(Fe){const De=new Uint8Array(fe.data);let Oe=`Unable to parse the tile at ${ie.request.url}, `;throw Oe+=De[0]===31&&De[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Fe.messge}`,new Error(Oe)}})}loadTile(ie){return f._(this,void 0,void 0,function*(){const le=ie.uid,fe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new f.bt(ie.request),Fe=new C(ie);this.loading[le]=Fe;const De=new AbortController;Fe.abort=De;try{const Oe=yield this.loadVectorTile(ie,De);if(delete this.loading[le],!Oe)return null;const $e=Oe.rawData,je={};Oe.expires&&(je.expires=Oe.expires),Oe.cacheControl&&(je.cacheControl=Oe.cacheControl);const Qe={};if(fe){const lt=fe.finish();lt&&(Qe.resourceTiming=JSON.parse(JSON.stringify(lt)))}Fe.vectorTile=Oe.vectorTile;const dt=Fe.parse(Oe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[le]=Fe,this.fetching[le]={rawTileData:$e,cacheControl:je,resourceTiming:Qe};try{const lt=yield dt;return f.e({rawTileData:$e.slice(0)},lt,je,Qe)}finally{delete this.fetching[le]}}catch(Oe){throw delete this.loading[le],Fe.status="done",this.loaded[le]=Fe,Oe}})}reloadTile(ie){return f._(this,void 0,void 0,function*(){const le=ie.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[le];if(fe.showCollisionBoxes=ie.showCollisionBoxes,fe.status==="parsing"){const Fe=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor);let De;if(this.fetching[le]){const{rawTileData:Oe,cacheControl:$e,resourceTiming:je}=this.fetching[le];delete this.fetching[le],De=f.e({rawTileData:Oe.slice(0)},Fe,$e,je)}else De=Fe;return De}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ie){return f._(this,void 0,void 0,function*(){const le=this.loading,fe=ie.uid;le&&le[fe]&&le[fe].abort&&(le[fe].abort.abort(),delete le[fe])})}removeTile(ie){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class I{constructor(){this.loaded={}}loadTile(ie){return f._(this,void 0,void 0,function*(){const{uid:le,encoding:fe,rawImageData:Fe,redFactor:De,greenFactor:Oe,blueFactor:$e,baseShift:je}=ie,Qe=Fe.width+2,dt=Fe.height+2,lt=f.b(Fe)?new f.R({width:Qe,height:dt},yield f.bu(Fe,-1,-1,Qe,dt)):Fe,ut=new f.bv(le,lt,fe,De,Oe,$e,je);return this.loaded=this.loaded||{},this.loaded[le]=ut,ut})}removeTile(ie){const le=this.loaded,fe=ie.uid;le&&le[fe]&&delete le[fe]}}function R(ke,ie){if(ke.length!==0){B(ke[0],ie);for(var le=1;le<ke.length;le++)B(ke[le],!ie)}}function B(ke,ie){for(var le=0,fe=0,Fe=0,De=ke.length,Oe=De-1;Fe<De;Oe=Fe++){var $e=(ke[Fe][0]-ke[Oe][0])*(ke[Oe][1]+ke[Fe][1]),je=le+$e;fe+=Math.abs(le)>=Math.abs($e)?le-je+$e:$e-je+le,le=je}le+fe>=0!=!!ie&&ke.reverse()}var O=f.bw(function ke(ie,le){var fe,Fe=ie&&ie.type;if(Fe==="FeatureCollection")for(fe=0;fe<ie.features.length;fe++)ke(ie.features[fe],le);else if(Fe==="GeometryCollection")for(fe=0;fe<ie.geometries.length;fe++)ke(ie.geometries[fe],le);else if(Fe==="Feature")ke(ie.geometry,le);else if(Fe==="Polygon")R(ie.coordinates,le);else if(Fe==="MultiPolygon")for(fe=0;fe<ie.coordinates.length;fe++)R(ie.coordinates[fe],le);return ie});const he=f.br.VectorTileFeature.prototype.toGeoJSON;var Y={exports:{}},q=f.bx,V=f.br.VectorTileFeature,se=X;function X(ke,ie){this.options=ie||{},this.features=ke,this.length=ke.length}function G(ke,ie){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=ie||4096}X.prototype.feature=function(ke){return new G(this.features[ke],this.options.extent)},G.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var ie=0;ie<ke.length;ie++){for(var le=ke[ie],fe=[],Fe=0;Fe<le.length;Fe++)fe.push(new q(le[Fe][0],le[Fe][1]));this.geometry.push(fe)}return this.geometry},G.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,ie=1/0,le=-1/0,fe=1/0,Fe=-1/0,De=0;De<ke.length;De++)for(var Oe=ke[De],$e=0;$e<Oe.length;$e++){var je=Oe[$e];ie=Math.min(ie,je.x),le=Math.max(le,je.x),fe=Math.min(fe,je.y),Fe=Math.max(Fe,je.y)}return[ie,fe,le,Fe]},G.prototype.toGeoJSON=V.prototype.toGeoJSON;var E=f.by,j=se;function L(ke){var ie=new E;return function(le,fe){for(var Fe in le.layers)fe.writeMessage(3,ee,le.layers[Fe])}(ke,ie),ie.finish()}function ee(ke,ie){var le;ie.writeVarintField(15,ke.version||1),ie.writeStringField(1,ke.name||""),ie.writeVarintField(5,ke.extent||4096);var fe={keys:[],values:[],keycache:{},valuecache:{}};for(le=0;le<ke.length;le++)fe.feature=ke.feature(le),ie.writeMessage(2,Z,fe);var Fe=fe.keys;for(le=0;le<Fe.length;le++)ie.writeStringField(3,Fe[le]);var De=fe.values;for(le=0;le<De.length;le++)ie.writeMessage(4,ce,De[le])}function Z(ke,ie){var le=ke.feature;le.id!==void 0&&ie.writeVarintField(1,le.id),ie.writeMessage(2,ve,ke),ie.writeVarintField(3,le.type),ie.writeMessage(4,oe,le)}function ve(ke,ie){var le=ke.feature,fe=ke.keys,Fe=ke.values,De=ke.keycache,Oe=ke.valuecache;for(var $e in le.properties){var je=le.properties[$e],Qe=De[$e];if(je!==null){Qe===void 0&&(fe.push($e),De[$e]=Qe=fe.length-1),ie.writeVarint(Qe);var dt=typeof je;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(je=JSON.stringify(je));var lt=dt+":"+je,ut=Oe[lt];ut===void 0&&(Fe.push(je),Oe[lt]=ut=Fe.length-1),ie.writeVarint(ut)}}}function _e(ke,ie){return(ie<<3)+(7&ke)}function pe(ke){return ke<<1^ke>>31}function oe(ke,ie){for(var le=ke.loadGeometry(),fe=ke.type,Fe=0,De=0,Oe=le.length,$e=0;$e<Oe;$e++){var je=le[$e],Qe=1;fe===1&&(Qe=je.length),ie.writeVarint(_e(1,Qe));for(var dt=fe===3?je.length-1:je.length,lt=0;lt<dt;lt++){lt===1&&fe!==1&&ie.writeVarint(_e(2,dt-1));var ut=je[lt].x-Fe,rn=je[lt].y-De;ie.writeVarint(pe(ut)),ie.writeVarint(pe(rn)),Fe+=ut,De+=rn}fe===3&&ie.writeVarint(_e(7,1))}}function ce(ke,ie){var le=typeof ke;le==="string"?ie.writeStringField(1,ke):le==="boolean"?ie.writeBooleanField(7,ke):le==="number"&&(ke%1!=0?ie.writeDoubleField(3,ke):ke<0?ie.writeSVarintField(6,ke):ie.writeVarintField(5,ke))}Y.exports=L,Y.exports.fromVectorTileJs=L,Y.exports.fromGeojsonVt=function(ke,ie){ie=ie||{};var le={};for(var fe in ke)le[fe]=new j(ke[fe].features,ie),le[fe].name=fe,le[fe].version=ie.version,le[fe].extent=ie.extent;return L({layers:le})},Y.exports.GeoJSONWrapper=j;var J=f.bw(Y.exports);const ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},de=Math.fround||(we=new Float32Array(1),ke=>(we[0]=+ke,we[0]));var we;const Te=3,Ne=5,Pe=6;class ze{constructor(ie){this.options=Object.assign(Object.create(ne),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:le,minZoom:fe,maxZoom:Fe}=this.options;le&&console.time("total time");const De=`prepare ${ie.length} points`;le&&console.time(De),this.points=ie;const Oe=[];for(let je=0;je<ie.length;je++){const Qe=ie[je];if(!Qe.geometry)continue;const[dt,lt]=Qe.geometry.coordinates,ut=de(ot(dt)),rn=de(ht(lt));Oe.push(ut,rn,1/0,je,-1,1),this.options.reduce&&Oe.push(0)}let $e=this.trees[Fe+1]=this._createTree(Oe);le&&console.timeEnd(De);for(let je=Fe;je>=fe;je--){const Qe=+Date.now();$e=this.trees[je]=this._createTree(this._cluster($e,je)),le&&console.log("z%d: %d clusters in %dms",je,$e.numItems,+Date.now()-Qe)}return le&&console.timeEnd("total time"),this}getClusters(ie,le){let fe=((ie[0]+180)%360+360)%360-180;const Fe=Math.max(-90,Math.min(90,ie[1]));let De=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)fe=-180,De=180;else if(fe>De){const lt=this.getClusters([fe,Fe,180,Oe],le),ut=this.getClusters([-180,Fe,De,Oe],le);return lt.concat(ut)}const $e=this.trees[this._limitZoom(le)],je=$e.range(ot(fe),ht(Oe),ot(De),ht(Fe)),Qe=$e.data,dt=[];for(const lt of je){const ut=this.stride*lt;dt.push(Qe[ut+Ne]>1?qe(Qe,ut,this.clusterProps):this.points[Qe[ut+Te]])}return dt}getChildren(ie){const le=this._getOriginId(ie),fe=this._getOriginZoom(ie),Fe="No cluster with the specified id.",De=this.trees[fe];if(!De)throw new Error(Fe);const Oe=De.data;if(le*this.stride>=Oe.length)throw new Error(Fe);const $e=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),je=De.within(Oe[le*this.stride],Oe[le*this.stride+1],$e),Qe=[];for(const dt of je){const lt=dt*this.stride;Oe[lt+4]===ie&&Qe.push(Oe[lt+Ne]>1?qe(Oe,lt,this.clusterProps):this.points[Oe[lt+Te]])}if(Qe.length===0)throw new Error(Fe);return Qe}getLeaves(ie,le,fe){const Fe=[];return this._appendLeaves(Fe,ie,le=le||10,fe=fe||0,0),Fe}getTile(ie,le,fe){const Fe=this.trees[this._limitZoom(ie)],De=Math.pow(2,ie),{extent:Oe,radius:$e}=this.options,je=$e/Oe,Qe=(fe-je)/De,dt=(fe+1+je)/De,lt={features:[]};return this._addTileFeatures(Fe.range((le-je)/De,Qe,(le+1+je)/De,dt),Fe.data,le,fe,De,lt),le===0&&this._addTileFeatures(Fe.range(1-je/De,Qe,1,dt),Fe.data,De,fe,De,lt),le===De-1&&this._addTileFeatures(Fe.range(0,Qe,je/De,dt),Fe.data,-1,fe,De,lt),lt.features.length?lt:null}getClusterExpansionZoom(ie){let le=this._getOriginZoom(ie)-1;for(;le<=this.options.maxZoom;){const fe=this.getChildren(ie);if(le++,fe.length!==1)break;ie=fe[0].properties.cluster_id}return le}_appendLeaves(ie,le,fe,Fe,De){const Oe=this.getChildren(le);for(const $e of Oe){const je=$e.properties;if(je&&je.cluster?De+je.point_count<=Fe?De+=je.point_count:De=this._appendLeaves(ie,je.cluster_id,fe,Fe,De):De<Fe?De++:ie.push($e),ie.length===fe)break}return De}_createTree(ie){const le=new f.av(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<ie.length;fe+=this.stride)le.add(ie[fe],ie[fe+1]);return le.finish(),le.data=ie,le}_addTileFeatures(ie,le,fe,Fe,De,Oe){for(const $e of ie){const je=$e*this.stride,Qe=le[je+Ne]>1;let dt,lt,ut;if(Qe)dt=He(le,je,this.clusterProps),lt=le[je],ut=le[je+1];else{const Tn=this.points[le[je+Te]];dt=Tn.properties;const[un,In]=Tn.geometry.coordinates;lt=ot(un),ut=ht(In)}const rn={type:1,geometry:[[Math.round(this.options.extent*(lt*De-fe)),Math.round(this.options.extent*(ut*De-Fe))]],tags:dt};let Yt;Yt=Qe||this.options.generateId?le[je+Te]:this.points[le[je+Te]].id,Yt!==void 0&&(rn.id=Yt),Oe.features.push(rn)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,le){const{radius:fe,extent:Fe,reduce:De,minPoints:Oe}=this.options,$e=fe/(Fe*Math.pow(2,le)),je=ie.data,Qe=[],dt=this.stride;for(let lt=0;lt<je.length;lt+=dt){if(je[lt+2]<=le)continue;je[lt+2]=le;const ut=je[lt],rn=je[lt+1],Yt=ie.within(je[lt],je[lt+1],$e),Tn=je[lt+Ne];let un=Tn;for(const In of Yt){const Bn=In*dt;je[Bn+2]>le&&(un+=je[Bn+Ne])}if(un>Tn&&un>=Oe){let In,Bn=ut*Tn,Vn=rn*Tn,or=-1;const mn=((lt/dt|0)<<5)+(le+1)+this.points.length;for(const Jn of Yt){const vr=Jn*dt;if(je[vr+2]<=le)continue;je[vr+2]=le;const ni=je[vr+Ne];Bn+=je[vr]*ni,Vn+=je[vr+1]*ni,je[vr+4]=mn,De&&(In||(In=this._map(je,lt,!0),or=this.clusterProps.length,this.clusterProps.push(In)),De(In,this._map(je,vr)))}je[lt+4]=mn,Qe.push(Bn/un,Vn/un,1/0,mn,-1,un),De&&Qe.push(or)}else{for(let In=0;In<dt;In++)Qe.push(je[lt+In]);if(un>1)for(const In of Yt){const Bn=In*dt;if(!(je[Bn+2]<=le)){je[Bn+2]=le;for(let Vn=0;Vn<dt;Vn++)Qe.push(je[Bn+Vn])}}}}return Qe}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,le,fe){if(ie[le+Ne]>1){const Oe=this.clusterProps[ie[le+Pe]];return fe?Object.assign({},Oe):Oe}const Fe=this.points[ie[le+Te]].properties,De=this.options.map(Fe);return fe&&De===Fe?Object.assign({},De):De}}function qe(ke,ie,le){return{type:"Feature",id:ke[ie+Te],properties:He(ke,ie,le),geometry:{type:"Point",coordinates:[(fe=ke[ie],360*(fe-.5)),xt(ke[ie+1])]}};var fe}function He(ke,ie,le){const fe=ke[ie+Ne],Fe=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,De=ke[ie+Pe],Oe=De===-1?{}:Object.assign({},le[De]);return Object.assign(Oe,{cluster:!0,cluster_id:ke[ie+Te],point_count:fe,point_count_abbreviated:Fe})}function ot(ke){return ke/360+.5}function ht(ke){const ie=Math.sin(ke*Math.PI/180),le=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return le<0?0:le>1?1:le}function xt(ke){const ie=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function kt(ke,ie,le,fe){for(var Fe,De=fe,Oe=le-ie>>1,$e=le-ie,je=ke[ie],Qe=ke[ie+1],dt=ke[le],lt=ke[le+1],ut=ie+3;ut<le;ut+=3){var rn=pt(ke[ut],ke[ut+1],je,Qe,dt,lt);if(rn>De)Fe=ut,De=rn;else if(rn===De){var Yt=Math.abs(ut-Oe);Yt<$e&&(Fe=ut,$e=Yt)}}De>fe&&(Fe-ie>3&&kt(ke,ie,Fe,fe),ke[Fe+2]=De,le-Fe>3&&kt(ke,Fe,le,fe))}function pt(ke,ie,le,fe,Fe,De){var Oe=Fe-le,$e=De-fe;if(Oe!==0||$e!==0){var je=((ke-le)*Oe+(ie-fe)*$e)/(Oe*Oe+$e*$e);je>1?(le=Fe,fe=De):je>0&&(le+=Oe*je,fe+=$e*je)}return(Oe=ke-le)*Oe+($e=ie-fe)*$e}function wt(ke,ie,le,fe){var Fe={id:ke===void 0?null:ke,type:ie,geometry:le,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(De){var Oe=De.geometry,$e=De.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")Ht(De,Oe);else if($e==="Polygon"||$e==="MultiLineString")for(var je=0;je<Oe.length;je++)Ht(De,Oe[je]);else if($e==="MultiPolygon")for(je=0;je<Oe.length;je++)for(var Qe=0;Qe<Oe[je].length;Qe++)Ht(De,Oe[je][Qe])}(Fe),Fe}function Ht(ke,ie){for(var le=0;le<ie.length;le+=3)ke.minX=Math.min(ke.minX,ie[le]),ke.minY=Math.min(ke.minY,ie[le+1]),ke.maxX=Math.max(ke.maxX,ie[le]),ke.maxY=Math.max(ke.maxY,ie[le+1])}function Lt(ke,ie,le,fe){if(ie.geometry){var Fe=ie.geometry.coordinates,De=ie.geometry.type,Oe=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2),$e=[],je=ie.id;if(le.promoteId?je=ie.properties[le.promoteId]:le.generateId&&(je=fe||0),De==="Point")cn(Fe,$e);else if(De==="MultiPoint")for(var Qe=0;Qe<Fe.length;Qe++)cn(Fe[Qe],$e);else if(De==="LineString")it(Fe,$e,Oe,!1);else if(De==="MultiLineString"){if(le.lineMetrics){for(Qe=0;Qe<Fe.length;Qe++)it(Fe[Qe],$e=[],Oe,!1),ke.push(wt(je,"LineString",$e,ie.properties));return}bn(Fe,$e,Oe,!1)}else if(De==="Polygon")bn(Fe,$e,Oe,!0);else{if(De!=="MultiPolygon"){if(De==="GeometryCollection"){for(Qe=0;Qe<ie.geometry.geometries.length;Qe++)Lt(ke,{id:je,geometry:ie.geometry.geometries[Qe],properties:ie.properties},le,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<Fe.length;Qe++){var dt=[];bn(Fe[Qe],dt,Oe,!0),$e.push(dt)}}ke.push(wt(je,De,$e,ie.properties))}}function cn(ke,ie){ie.push(hn(ke[0])),ie.push(qt(ke[1])),ie.push(0)}function it(ke,ie,le,fe){for(var Fe,De,Oe=0,$e=0;$e<ke.length;$e++){var je=hn(ke[$e][0]),Qe=qt(ke[$e][1]);ie.push(je),ie.push(Qe),ie.push(0),$e>0&&(Oe+=fe?(Fe*Qe-je*De)/2:Math.sqrt(Math.pow(je-Fe,2)+Math.pow(Qe-De,2))),Fe=je,De=Qe}var dt=ie.length-3;ie[2]=1,kt(ie,0,dt,le),ie[dt+2]=1,ie.size=Math.abs(Oe),ie.start=0,ie.end=ie.size}function bn(ke,ie,le,fe){for(var Fe=0;Fe<ke.length;Fe++){var De=[];it(ke[Fe],De,le,fe),ie.push(De)}}function hn(ke){return ke/360+.5}function qt(ke){var ie=Math.sin(ke*Math.PI/180),le=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return le<0?0:le>1?1:le}function Se(ke,ie,le,fe,Fe,De,Oe,$e){if(fe/=ie,De>=(le/=ie)&&Oe<fe)return ke;if(Oe<le||De>=fe)return null;for(var je=[],Qe=0;Qe<ke.length;Qe++){var dt=ke[Qe],lt=dt.geometry,ut=dt.type,rn=Fe===0?dt.minX:dt.minY,Yt=Fe===0?dt.maxX:dt.maxY;if(rn>=le&&Yt<fe)je.push(dt);else if(!(Yt<le||rn>=fe)){var Tn=[];if(ut==="Point"||ut==="MultiPoint")N(lt,Tn,le,fe,Fe);else if(ut==="LineString")D(lt,Tn,le,fe,Fe,!1,$e.lineMetrics);else if(ut==="MultiLineString")Xe(lt,Tn,le,fe,Fe,!1);else if(ut==="Polygon")Xe(lt,Tn,le,fe,Fe,!0);else if(ut==="MultiPolygon")for(var un=0;un<lt.length;un++){var In=[];Xe(lt[un],In,le,fe,Fe,!0),In.length&&Tn.push(In)}if(Tn.length){if($e.lineMetrics&&ut==="LineString"){for(un=0;un<Tn.length;un++)je.push(wt(dt.id,ut,Tn[un],dt.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(Tn.length===1?(ut="LineString",Tn=Tn[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=Tn.length===3?"Point":"MultiPoint"),je.push(wt(dt.id,ut,Tn,dt.tags))}}}return je.length?je:null}function N(ke,ie,le,fe,Fe){for(var De=0;De<ke.length;De+=3){var Oe=ke[De+Fe];Oe>=le&&Oe<=fe&&(ie.push(ke[De]),ie.push(ke[De+1]),ie.push(ke[De+2]))}}function D(ke,ie,le,fe,Fe,De,Oe){for(var $e,je,Qe=xe(ke),dt=Fe===0?ct:ae,lt=ke.start,ut=0;ut<ke.length-3;ut+=3){var rn=ke[ut],Yt=ke[ut+1],Tn=ke[ut+2],un=ke[ut+3],In=ke[ut+4],Bn=Fe===0?rn:Yt,Vn=Fe===0?un:In,or=!1;Oe&&($e=Math.sqrt(Math.pow(rn-un,2)+Math.pow(Yt-In,2))),Bn<le?Vn>le&&(je=dt(Qe,rn,Yt,un,In,le),Oe&&(Qe.start=lt+$e*je)):Bn>fe?Vn<fe&&(je=dt(Qe,rn,Yt,un,In,fe),Oe&&(Qe.start=lt+$e*je)):tt(Qe,rn,Yt,Tn),Vn<le&&Bn>=le&&(je=dt(Qe,rn,Yt,un,In,le),or=!0),Vn>fe&&Bn<=fe&&(je=dt(Qe,rn,Yt,un,In,fe),or=!0),!De&&or&&(Oe&&(Qe.end=lt+$e*je),ie.push(Qe),Qe=xe(ke)),Oe&&(lt+=$e)}var mn=ke.length-3;rn=ke[mn],Yt=ke[mn+1],Tn=ke[mn+2],(Bn=Fe===0?rn:Yt)>=le&&Bn<=fe&&tt(Qe,rn,Yt,Tn),mn=Qe.length-3,De&&mn>=3&&(Qe[mn]!==Qe[0]||Qe[mn+1]!==Qe[1])&&tt(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&ie.push(Qe)}function xe(ke){var ie=[];return ie.size=ke.size,ie.start=ke.start,ie.end=ke.end,ie}function Xe(ke,ie,le,fe,Fe,De){for(var Oe=0;Oe<ke.length;Oe++)D(ke[Oe],ie,le,fe,Fe,De,!1)}function tt(ke,ie,le,fe){ke.push(ie),ke.push(le),ke.push(fe)}function ct(ke,ie,le,fe,Fe,De){var Oe=(De-ie)/(fe-ie);return ke.push(De),ke.push(le+(Fe-le)*Oe),ke.push(1),Oe}function ae(ke,ie,le,fe,Fe,De){var Oe=(De-le)/(Fe-le);return ke.push(ie+(fe-ie)*Oe),ke.push(De),ke.push(1),Oe}function M(ke,ie){for(var le=[],fe=0;fe<ke.length;fe++){var Fe,De=ke[fe],Oe=De.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")Fe=U(De.geometry,ie);else if(Oe==="MultiLineString"||Oe==="Polygon"){Fe=[];for(var $e=0;$e<De.geometry.length;$e++)Fe.push(U(De.geometry[$e],ie))}else if(Oe==="MultiPolygon")for(Fe=[],$e=0;$e<De.geometry.length;$e++){for(var je=[],Qe=0;Qe<De.geometry[$e].length;Qe++)je.push(U(De.geometry[$e][Qe],ie));Fe.push(je)}le.push(wt(De.id,Oe,Fe,De.tags))}return le}function U(ke,ie){var le=[];le.size=ke.size,ke.start!==void 0&&(le.start=ke.start,le.end=ke.end);for(var fe=0;fe<ke.length;fe+=3)le.push(ke[fe]+ie,ke[fe+1],ke[fe+2]);return le}function Ee(ke,ie){if(ke.transformed)return ke;var le,fe,Fe,De=1<<ke.z,Oe=ke.x,$e=ke.y;for(le=0;le<ke.features.length;le++){var je=ke.features[le],Qe=je.geometry,dt=je.type;if(je.geometry=[],dt===1)for(fe=0;fe<Qe.length;fe+=2)je.geometry.push(We(Qe[fe],Qe[fe+1],ie,De,Oe,$e));else for(fe=0;fe<Qe.length;fe++){var lt=[];for(Fe=0;Fe<Qe[fe].length;Fe+=2)lt.push(We(Qe[fe][Fe],Qe[fe][Fe+1],ie,De,Oe,$e));je.geometry.push(lt)}}return ke.transformed=!0,ke}function We(ke,ie,le,fe,Fe,De){return[Math.round(le*(ke*fe-Fe)),Math.round(le*(ie*fe-De))]}function rt(ke,ie,le,fe,Fe){for(var De=ie===Fe.maxZoom?0:Fe.tolerance/((1<<ie)*Fe.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:le,y:fe,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<ke.length;$e++){Oe.numFeatures++,Ve(Oe,ke[$e],De,Fe);var je=ke[$e].minX,Qe=ke[$e].minY,dt=ke[$e].maxX,lt=ke[$e].maxY;je<Oe.minX&&(Oe.minX=je),Qe<Oe.minY&&(Oe.minY=Qe),dt>Oe.maxX&&(Oe.maxX=dt),lt>Oe.maxY&&(Oe.maxY=lt)}return Oe}function Ve(ke,ie,le,fe){var Fe=ie.geometry,De=ie.type,Oe=[];if(De==="Point"||De==="MultiPoint")for(var $e=0;$e<Fe.length;$e+=3)Oe.push(Fe[$e]),Oe.push(Fe[$e+1]),ke.numPoints++,ke.numSimplified++;else if(De==="LineString")Et(Oe,Fe,ke,le,!1,!1);else if(De==="MultiLineString"||De==="Polygon")for($e=0;$e<Fe.length;$e++)Et(Oe,Fe[$e],ke,le,De==="Polygon",$e===0);else if(De==="MultiPolygon")for(var je=0;je<Fe.length;je++){var Qe=Fe[je];for($e=0;$e<Qe.length;$e++)Et(Oe,Qe[$e],ke,le,!0,$e===0)}if(Oe.length){var dt=ie.tags||null;if(De==="LineString"&&fe.lineMetrics){for(var lt in dt={},ie.tags)dt[lt]=ie.tags[lt];dt.mapbox_clip_start=Fe.start/Fe.size,dt.mapbox_clip_end=Fe.end/Fe.size}var ut={geometry:Oe,type:De==="Polygon"||De==="MultiPolygon"?3:De==="LineString"||De==="MultiLineString"?2:1,tags:dt};ie.id!==null&&(ut.id=ie.id),ke.features.push(ut)}}function Et(ke,ie,le,fe,Fe,De){var Oe=fe*fe;if(fe>0&&ie.size<(Fe?Oe:fe))le.numPoints+=ie.length/3;else{for(var $e=[],je=0;je<ie.length;je+=3)(fe===0||ie[je+2]>Oe)&&(le.numSimplified++,$e.push(ie[je]),$e.push(ie[je+1])),le.numPoints++;Fe&&function(Qe,dt){for(var lt=0,ut=0,rn=Qe.length,Yt=rn-2;ut<rn;Yt=ut,ut+=2)lt+=(Qe[ut]-Qe[Yt])*(Qe[ut+1]+Qe[Yt+1]);if(lt>0===dt)for(ut=0,rn=Qe.length;ut<rn/2;ut+=2){var Tn=Qe[ut],un=Qe[ut+1];Qe[ut]=Qe[rn-2-ut],Qe[ut+1]=Qe[rn-1-ut],Qe[rn-2-ut]=Tn,Qe[rn-1-ut]=un}}($e,De),ke.push($e)}}function zt(ke,ie){var le=(ie=this.options=function(Fe,De){for(var Oe in De)Fe[Oe]=De[Oe];return Fe}(Object.create(this.options),ie)).debug;if(le&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe=function(Fe,De){var Oe=[];if(Fe.type==="FeatureCollection")for(var $e=0;$e<Fe.features.length;$e++)Lt(Oe,Fe.features[$e],De,$e);else Lt(Oe,Fe.type==="Feature"?Fe:{geometry:Fe},De);return Oe}(ke,ie);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=function(Fe,De){var Oe=De.buffer/De.extent,$e=Fe,je=Se(Fe,1,-1-Oe,Oe,0,-1,2,De),Qe=Se(Fe,1,1-Oe,2+Oe,0,-1,2,De);return(je||Qe)&&($e=Se(Fe,1,-Oe,1+Oe,0,-1,2,De)||[],je&&($e=M(je,1).concat($e)),Qe&&($e=$e.concat(M(Qe,-1)))),$e}(fe,ie),fe.length&&this.splitTile(fe,0,0,0),le&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pn(ke,ie,le){return 32*((1<<ke)*le+ie)+ke}function Sn(ke,ie){return ie?ke.properties[ie]:ke.id}function Ft(ke,ie){if(ke==null)return!0;if(ke.type==="Feature")return Sn(ke,ie)!=null;if(ke.type==="FeatureCollection"){const le=new Set;for(const fe of ke.features){const Fe=Sn(fe,ie);if(Fe==null||le.has(Fe))return!1;le.add(Fe)}return!0}return!1}function Dr(ke,ie){const le=new Map;if(ke!=null)if(ke.type==="Feature")le.set(Sn(ke,ie),ke);else for(const fe of ke.features)le.set(Sn(fe,ie),fe);return le}zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},zt.prototype.splitTile=function(ke,ie,le,fe,Fe,De,Oe){for(var $e=[ke,ie,le,fe],je=this.options,Qe=je.debug;$e.length;){fe=$e.pop(),le=$e.pop(),ie=$e.pop(),ke=$e.pop();var dt=1<<ie,lt=pn(ie,le,fe),ut=this.tiles[lt];if(!ut&&(Qe>1&&console.time("creation"),ut=this.tiles[lt]=rt(ke,ie,le,fe,je),this.tileCoords.push({z:ie,x:le,y:fe}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,le,fe,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var rn="z"+ie;this.stats[rn]=(this.stats[rn]||0)+1,this.total++}if(ut.source=ke,Fe){if(ie===je.maxZoom||ie===Fe)continue;var Yt=1<<Fe-ie;if(le!==Math.floor(De/Yt)||fe!==Math.floor(Oe/Yt))continue}else if(ie===je.indexMaxZoom||ut.numPoints<=je.indexMaxPoints)continue;if(ut.source=null,ke.length!==0){Qe>1&&console.time("clipping");var Tn,un,In,Bn,Vn,or,mn=.5*je.buffer/je.extent,Jn=.5-mn,vr=.5+mn,ni=1+mn;Tn=un=In=Bn=null,Vn=Se(ke,dt,le-mn,le+vr,0,ut.minX,ut.maxX,je),or=Se(ke,dt,le+Jn,le+ni,0,ut.minX,ut.maxX,je),ke=null,Vn&&(Tn=Se(Vn,dt,fe-mn,fe+vr,1,ut.minY,ut.maxY,je),un=Se(Vn,dt,fe+Jn,fe+ni,1,ut.minY,ut.maxY,je),Vn=null),or&&(In=Se(or,dt,fe-mn,fe+vr,1,ut.minY,ut.maxY,je),Bn=Se(or,dt,fe+Jn,fe+ni,1,ut.minY,ut.maxY,je),or=null),Qe>1&&console.timeEnd("clipping"),$e.push(Tn||[],ie+1,2*le,2*fe),$e.push(un||[],ie+1,2*le,2*fe+1),$e.push(In||[],ie+1,2*le+1,2*fe),$e.push(Bn||[],ie+1,2*le+1,2*fe+1)}}},zt.prototype.getTile=function(ke,ie,le){var fe=this.options,Fe=fe.extent,De=fe.debug;if(ke<0||ke>24)return null;var Oe=1<<ke,$e=pn(ke,ie=(ie%Oe+Oe)%Oe,le);if(this.tiles[$e])return Ee(this.tiles[$e],Fe);De>1&&console.log("drilling down to z%d-%d-%d",ke,ie,le);for(var je,Qe=ke,dt=ie,lt=le;!je&&Qe>0;)Qe--,dt=Math.floor(dt/2),lt=Math.floor(lt/2),je=this.tiles[pn(Qe,dt,lt)];return je&&je.source?(De>1&&console.log("found parent tile z%d-%d-%d",Qe,dt,lt),De>1&&console.time("drilling down"),this.splitTile(je.source,Qe,dt,lt,ke,ie,le),De>1&&console.timeEnd("drilling down"),this.tiles[$e]?Ee(this.tiles[$e],Fe):null):null};class ti extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,le){return f._(this,void 0,void 0,function*(){const fe=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Fe=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!Fe)return null;const De=new class{constructor($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.W,this.length=$e.length,this._features=$e}feature($e){return new class{constructor(je){this._feature=je,this.extent=f.W,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))}loadGeometry(){if(this._feature.type===1){const je=[];for(const Qe of this._feature.geometry)je.push([new f.P(Qe[0],Qe[1])]);return je}{const je=[];for(const Qe of this._feature.geometry){const dt=[];for(const lt of Qe)dt.push(new f.P(lt[0],lt[1]));je.push(dt)}return je}}toGeoJSON(je,Qe,dt){return he.call(this,je,Qe,dt)}}(this._features[$e])}}(Fe.features);let Oe=J(De);return Oe.byteOffset===0&&Oe.byteLength===Oe.buffer.byteLength||(Oe=new Uint8Array(Oe)),{vectorTile:De,rawData:Oe.buffer}})}loadData(ie){return f._(this,void 0,void 0,function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const fe=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new f.bt(ie.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ie,this._pendingRequest),this._geoJSONIndex=ie.cluster?new ze(function({superclusterOptions:De,clusterProperties:Oe}){if(!Oe||!De)return De;const $e={},je={},Qe={accumulated:null,zoom:0},dt={properties:null},lt=Object.keys(Oe);for(const ut of lt){const[rn,Yt]=Oe[ut],Tn=f.bA(Yt),un=f.bA(typeof rn=="string"?[rn,["accumulated"],["get",ut]]:rn);$e[ut]=Tn.value,je[ut]=un.value}return De.map=ut=>{dt.properties=ut;const rn={};for(const Yt of lt)rn[Yt]=$e[Yt].evaluate(Qe,dt);return rn},De.reduce=(ut,rn)=>{dt.properties=rn;for(const Yt of lt)Qe.accumulated=ut[Yt],ut[Yt]=je[Yt].evaluate(Qe,dt)},De}(ie)).load((yield this._pendingData).features):new zt(yield this._pendingData,ie.geojsonVtOptions),this.loaded={};const Fe={};if(fe){const De=fe.finish();De&&(Fe.resourceTiming={},Fe.resourceTiming[ie.source]=JSON.parse(JSON.stringify(De)))}return Fe}catch(Fe){if(delete this._pendingRequest,f.bz(Fe))return{abandoned:!0};throw Fe}})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ie){const le=this.loaded;return le&&le[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadAndProcessGeoJSON(ie,le){return f._(this,void 0,void 0,function*(){let fe=yield this.loadGeoJSON(ie,le);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(O(fe,!0),ie.filter){const Fe=f.bA(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Fe.result==="error")throw new Error(Fe.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(Oe=>Fe.value.evaluate({zoom:0},Oe))}}return fe})}loadGeoJSON(ie,le){return f._(this,void 0,void 0,function*(){const{promoteId:fe}=ie;if(ie.request){const Fe=yield f.h(ie.request,le);return this._dataUpdateable=Ft(Fe.data,fe)?Dr(Fe.data,fe):void 0,Fe.data}if(typeof ie.data=="string")try{const Fe=JSON.parse(ie.data);return this._dataUpdateable=Ft(Fe,fe)?Dr(Fe,fe):void 0,Fe}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(Fe,De,Oe){var $e,je,Qe,dt;if(De.removeAll&&Fe.clear(),De.remove)for(const lt of De.remove)Fe.delete(lt);if(De.add)for(const lt of De.add){const ut=Sn(lt,Oe);ut!=null&&Fe.set(ut,lt)}if(De.update)for(const lt of De.update){let ut=Fe.get(lt.id);if(ut==null)continue;const rn=!lt.removeAllProperties&&((($e=lt.removeProperties)===null||$e===void 0?void 0:$e.length)>0||((je=lt.addOrUpdateProperties)===null||je===void 0?void 0:je.length)>0);if((lt.newGeometry||lt.removeAllProperties||rn)&&(ut=Object.assign({},ut),Fe.set(lt.id,ut),rn&&(ut.properties=Object.assign({},ut.properties))),lt.newGeometry&&(ut.geometry=lt.newGeometry),lt.removeAllProperties)ut.properties={};else if(((Qe=lt.removeProperties)===null||Qe===void 0?void 0:Qe.length)>0)for(const Yt of lt.removeProperties)Object.prototype.hasOwnProperty.call(ut.properties,Yt)&&delete ut.properties[Yt];if(((dt=lt.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:Yt,value:Tn}of lt.addOrUpdateProperties)ut.properties[Yt]=Tn}}(this._dataUpdateable,ie.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class ir{constructor(ie){this.self=ie,this.actor=new f.C(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(le,fe)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=fe},this.self.addProtocol=f.bg,this.self.removeProtocol=f.bh,this.self.registerRTLTextPlugin=le=>{if(f.bB.isParsed())throw new Error("RTL text plugin already registered.");f.bB.setMethods(le)},this.actor.registerMessageHandler("LDT",(le,fe)=>this._getDEMWorkerSource(le,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RDT",(le,fe)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(le,fe.source).removeTile(fe)})),this.actor.registerMessageHandler("GCEZ",(le,fe)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterExpansionZoom(fe)})),this.actor.registerMessageHandler("GCC",(le,fe)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterChildren(fe)})),this.actor.registerMessageHandler("GCL",(le,fe)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(le,fe.type,fe.source).getClusterLeaves(fe)})),this.actor.registerMessageHandler("LD",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).loadData(fe)),this.actor.registerMessageHandler("GD",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).getData()),this.actor.registerMessageHandler("LT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).loadTile(fe)),this.actor.registerMessageHandler("RT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).reloadTile(fe)),this.actor.registerMessageHandler("AT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).abortTile(fe)),this.actor.registerMessageHandler("RMT",(le,fe)=>this._getWorkerSource(le,fe.type,fe.source).removeTile(fe)),this.actor.registerMessageHandler("RS",(le,fe)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[le]||!this.workerSources[le][fe.type]||!this.workerSources[le][fe.type][fe.source])return;const Fe=this.workerSources[le][fe.type][fe.source];delete this.workerSources[le][fe.type][fe.source],Fe.removeSource!==void 0&&Fe.removeSource(fe)})),this.actor.registerMessageHandler("RM",le=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le]})),this.actor.registerMessageHandler("SR",(le,fe)=>f._(this,void 0,void 0,function*(){this.referrer=fe})),this.actor.registerMessageHandler("SRPS",(le,fe)=>this._syncRTLPluginState(le,fe)),this.actor.registerMessageHandler("IS",(le,fe)=>f._(this,void 0,void 0,function*(){this.self.importScripts(fe)})),this.actor.registerMessageHandler("SI",(le,fe)=>this._setImages(le,fe)),this.actor.registerMessageHandler("UL",(le,fe)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(le).update(fe.layers,fe.removedIds)})),this.actor.registerMessageHandler("SL",(le,fe)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(le).replace(fe)}))}_setImages(ie,le){return f._(this,void 0,void 0,function*(){this.availableImages[ie]=le;for(const fe in this.workerSources[ie]){const Fe=this.workerSources[ie][fe];for(const De in Fe)Fe[De].availableImages=le}})}_syncRTLPluginState(ie,le){return f._(this,void 0,void 0,function*(){if(f.bB.isParsed())return f.bB.getState();if(le.pluginStatus!=="loading")return f.bB.setState(le),le;const fe=le.pluginURL;if(this.self.importScripts(fe),f.bB.isParsed()){const Fe={pluginStatus:"loaded",pluginURL:fe};return f.bB.setState(Fe),Fe}throw f.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${fe}`)})}_getAvailableImages(ie){let le=this.availableImages[ie];return le||(le=[]),le}_getLayerIndex(ie){let le=this.layerIndexes[ie];return le||(le=this.layerIndexes[ie]=new u),le}_getWorkerSource(ie,le,fe){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][le]||(this.workerSources[ie][le]={}),!this.workerSources[ie][le][fe]){const Fe={sendAsync:(De,Oe)=>(De.targetMapId=ie,this.actor.sendAsync(De,Oe))};switch(le){case"vector":this.workerSources[ie][le][fe]=new b(Fe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][le][fe]=new ti(Fe,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][le][fe]=new this.externalWorkerSourceTypes[le](Fe,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][le][fe]}_getDEMWorkerSource(ie,le){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][le]||(this.demWorkerSources[ie][le]=new I),this.demWorkerSources[ie][le]}}return f.i(self)&&(self.worker=new ir(self)),ir}),c("index",["exports","./shared"],function(f,u){var S="4.3.2";let C,k;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,l)=>{const d=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(u.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(C||(C=document.createElement("a")),C.href=y,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class I{static testProp(r){if(!I.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in I.docStyle)return r[l];return r[0]}static create(r,l,d){const g=window.document.createElement(r);return l!==void 0&&(g.className=l),d&&d.appendChild(g),g}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(r,l){r.style[I.transformProp]=l}static addEventListener(r,l,d,g={}){r.addEventListener(l,d,"passive"in g?g:g.capture)}static removeEventListener(r,l,d,g={}){r.removeEventListener(l,d,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){const g=l.boundingClientRect;return new u.P((d.clientX-g.left)/l.x-r.clientLeft,(d.clientY-g.top)/l.y-r.clientTop)}static mousePos(r,l){const d=I.getScale(r);return I.getPoint(r,d,l)}static touchPos(r,l){const d=[],g=I.getScale(r);for(let _=0;_<l.length;_++)d.push(I.getPoint(r,g,l[_]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(y){!he&&O&&(Y?q(y):B=y)}};let B,O,he=!1,Y=!1;function q(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,O),y.isContextLost())return;R.supported=!0}catch{}y.deleteTexture(r),he=!0}var V;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{B&&q(B),B=null,Y=!0},O.onerror=()=>{he=!0,B=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,l,d,g;y.resetRequestQueue=()=>{r=[],l=0,d=0,g={}},y.addThrottleControl=z=>{const $=d++;return g[$]=z,$},y.removeThrottleControl=z=>{delete g[z],T()},y.getImage=(z,$,te=!0)=>new Promise((Q,me)=>{R.supported&&(z.headers||(z.headers={}),z.headers.accept="image/webp,*/*"),u.e(z,{type:"image"}),r.push({abortController:$,requestParameters:z,supportImageRefresh:te,state:"queued",onError:be=>{me(be)},onSuccess:be=>{Q(be)}}),T()});const _=z=>u._(this,void 0,void 0,function*(){z.state="running";const{requestParameters:$,supportImageRefresh:te,onError:Q,onSuccess:me,abortController:be}=z,Ce=te===!1&&!u.i(self)&&!u.g($.url)&&(!$.headers||Object.keys($.headers).reduce((Ge,Ke)=>Ge&&Ke==="accept",!0));l++;const Le=Ce?A($,be):u.m($,be);try{const Ge=yield Le;delete z.abortController,z.state="completed",Ge.data instanceof HTMLImageElement||u.b(Ge.data)?me(Ge):Ge.data&&me({data:yield(Ae=Ge.data,typeof createImageBitmap=="function"?u.d(Ae):u.f(Ae)),cacheControl:Ge.cacheControl,expires:Ge.expires})}catch(Ge){delete z.abortController,Q(Ge)}finally{l--,T()}var Ae}),T=()=>{const z=(()=>{for(const $ of Object.keys(g))if(g[$]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let $=l;$<z&&r.length>0;$++){const te=r.shift();te.abortController.signal.aborted?$--:_(te)}},A=(z,$)=>new Promise((te,Q)=>{const me=new Image,be=z.url,Ce=z.credentials;Ce&&Ce==="include"?me.crossOrigin="use-credentials":(Ce&&Ce==="same-origin"||!u.s(be))&&(me.crossOrigin="anonymous"),$.signal.addEventListener("abort",()=>{me.src="",Q(u.c())}),me.fetchPriority="high",me.onload=()=>{me.onerror=me.onload=null,te({data:me})},me.onerror=()=>{me.onerror=me.onload=null,$.signal.aborted||Q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},me.src=be})}(V||(V={})),V.resetRequestQueue();class se{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function X(y){var r=new u.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var G,E=function(y,r,l){return y[0]=r[0]-l[0],y[1]=r[1]-l[1],y[2]=r[2]-l[2],y};G=new u.A(3),u.A!=Float32Array&&(G[0]=0,G[1]=0,G[2]=0);var j=function(y){var r=y[0],l=y[1];return r*r+l*l};function L(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:d,url:g}of y){const _=`${d}${g}`;l.indexOf(_)===-1&&(l.push(_),r.push({id:d,url:g}))}}return r}function ee(y,r,l){const d=y.split("?");return d[0]+=`${r}${l}`,d.join("?")}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Z{constructor(r,l,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,g)}update(r,l,d){const{width:g,height:_}=r,T=!(this.size&&this.size[0]===g&&this.size[1]===_||d),{context:A}=this,{gl:z}=A;if(this.useMipmap=!!(l&&l.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[g,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,r):z.texImage2D(z.TEXTURE_2D,0,this.format,g,_,0,this.format,z.UNSIGNED_BYTE,r.data);else{const{x:$,y:te}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?z.texSubImage2D(z.TEXTURE_2D,0,$,te,z.RGBA,z.UNSIGNED_BYTE,r):z.texSubImage2D(z.TEXTURE_2D,0,$,te,g,_,z.RGBA,z.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(r,l,d){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ve(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new u.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;const g=l.data||l.spriteData;return this._validateStretch(l.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const g of r){if(g[0]<d||g[1]<g[0]||l<g[1])return!1;d=g[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const d=l.spriteData,g=d&&d.width||l.data.width,_=d&&d.height||l.data.height;return!(r[0]<0||g<r[0]||r[1]<0||_<r[1]||r[2]<0||g<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){const g=this.getImage(r);if(d&&(g.data.width!==l.data.width||g.data.height!==l.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=g.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let g=!0;if(!this.isLoaded())for(const _ of r)this.images[_]||(g=!1);this.isLoaded()||g?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const d of r){let g=this.getImage(d);g||(this.fire(new u.k("styleimagemissing",{id:d})),g=this.getImage(d)),g?l[d]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new u.I(g,d);this.patterns[r]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Z(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:l,h:d}=u.p(r),g=this.atlasImage;g.resize({width:l||1,height:d||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],A=T.x+1,z=T.y+1,$=this.getImage(_).data,te=$.width,Q=$.height;u.R.copy($,g,{x:0,y:0},{x:A,y:z},{width:te,height:Q}),u.R.copy($,g,{x:0,y:Q-1},{x:A,y:z-1},{width:te,height:1}),u.R.copy($,g,{x:0,y:0},{x:A,y:z+Q},{width:te,height:1}),u.R.copy($,g,{x:te-1,y:0},{x:A-1,y:z},{width:1,height:Q}),u.R.copy($,g,{x:0,y:0},{x:A+te,y:z},{width:1,height:Q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||u.w(`Image with ID: "${l}" was not found`),ve(d)&&this.updateImage(l,d)}}}const pe=1e20;function oe(y,r,l,d,g,_,T,A,z){for(let $=r;$<r+d;$++)ce(y,l*_+$,_,g,T,A,z);for(let $=l;$<l+g;$++)ce(y,$*_+r,1,d,T,A,z)}function ce(y,r,l,d,g,_,T){_[0]=0,T[0]=-pe,T[1]=pe,g[0]=y[r];for(let A=1,z=0,$=0;A<d;A++){g[A]=y[r+A*l];const te=A*A;do{const Q=_[z];$=(g[A]-g[Q]+te-Q*Q)/(A-Q)/2}while($<=T[z]&&--z>-1);z++,_[z]=A,T[z]=$,T[z+1]=pe}for(let A=0,z=0;A<d;A++){for(;T[z+1]<A;)z++;const $=_[z],te=A-$;y[r+A*l]=g[$]+te*te}}class J{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const l=[];for(const _ in r)for(const T of r[_])l.push(this._getAndCacheGlyphsPromise(_,T));const d=yield Promise.all(l),g={};for(const{stack:_,id:T,glyph:A}of d)g[_]||(g[_]={}),g[_][T]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return g})}_getAndCacheGlyphsPromise(r,l){return u._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let g=d.glyphs[l];if(g!==void 0)return{stack:r,id:l,glyph:g};if(g=this._tinySDF(d,r,l),g)return d.glyphs[l]=g,{stack:r,id:l,glyph:g};const _=Math.floor(l/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[_])return{stack:r,id:l,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[_]){const A=J.loadGlyphRange(r,_,this.url,this.requestManager);d.requests[_]=A}const T=yield d.requests[_];for(const A in T)this._doesCharSupportLocalGlyph(+A)||(d.glyphs[+A]=T[+A]);return d.ranges[_]=!0,{stack:r,id:l,glyph:T[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](r)||u.u["Hangul Syllables"](r)||u.u.Hiragana(r)||u.u.Katakana(r))}_tinySDF(r,l,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let _=r.tinySDF;if(!_){let A="400";/bold/i.test(l)?A="900":/medium/i.test(l)?A="500":/light/i.test(l)&&(A="200"),_=r.tinySDF=new J.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:A})}const T=_.draw(String.fromCharCode(d));return{id:d,bitmap:new u.o({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}J.loadGlyphRange=function(y,r,l,d){return u._(this,void 0,void 0,function*(){const g=256*r,_=g+255,T=d.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${g}-${_}`),"Glyphs"),A=yield u.l(T,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${r}, ${g}-${_}`);const z={};for(const $ of u.n(A.data))z[$.id]=$;return z})},J.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const A=this.size=y+4*r,z=this._createCanvas(A),$=this.ctx=z.getContext("2d",{willReadFrequently:!0});$.font=`${T} ${_} ${y}px ${g}`,$.textBaseline="alphabetic",$.textAlign="left",$.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),T=Math.ceil(l),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),z=Math.min(this.size-this.buffer,T+Math.ceil(d)),$=A+2*this.buffer,te=z+2*this.buffer,Q=Math.max($*te,0),me=new Uint8ClampedArray(Q),be={data:me,width:$,height:te,glyphWidth:A,glyphHeight:z,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(A===0||z===0)return be;const{ctx:Ce,buffer:Le,gridInner:Ae,gridOuter:Ge}=this;Ce.clearRect(Le,Le,A,z),Ce.fillText(y,Le,Le+T);const Ke=Ce.getImageData(Le,Le,A,z);Ge.fill(pe,0,Q),Ae.fill(0,0,Q);for(let Re=0;Re<z;Re++)for(let Ye=0;Ye<A;Ye++){const nt=Ke.data[4*(Re*A+Ye)+3]/255;if(nt===0)continue;const st=(Re+Le)*$+Ye+Le;if(nt===1)Ge[st]=0,Ae[st]=pe;else{const mt=.5-nt;Ge[st]=mt>0?mt*mt:0,Ae[st]=mt<0?mt*mt:0}}oe(Ge,0,0,$,te,$,this.f,this.v,this.z),oe(Ae,Le,Le,A,z,$,this.f,this.v,this.z);for(let Re=0;Re<Q;Re++){const Ye=Math.sqrt(Ge[Re])-Math.sqrt(Ae[Re]);me[Re]=Math.round(255-255*(Ye/this.radius+this.cutoff))}return be}};class ne{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,l){return u.y(r.expression.evaluate(l))}interpolate(r,l,d){return{x:u.z.number(r.x,l.x,d),y:u.z.number(r.y,l.y,d),z:u.z.number(r.z,l.z,d)}}}let de;class we extends u.E{constructor(r){super(),de=de||new u.q({anchor:new u.D(u.v.light.anchor),position:new ne,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(de),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(u.r,r,l))for(const d in r){const g=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),g):this._transitionable.setValue(d,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&u.t(this,r.call(u.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Te{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const g=[];let _=r.length%2==1?-r[r.length-1]*d:0,T=r[0]*d,A=!0;g.push({left:_,right:T,isDash:A,zeroLength:r[0]===0});let z=r[0];for(let $=1;$<r.length;$++){A=!A;const te=r[$];_=z*d,z+=te,T=z*d,g.push({left:_,right:T,isDash:A,zeroLength:te===0})}return g}addRoundDash(r,l,d){const g=l/2;for(let _=-d;_<=d;_++){const T=this.width*(this.nextRow+d+_);let A=0,z=r[A];for(let $=0;$<this.width;$++){$/z.right>1&&(z=r[++A]);const te=Math.abs($-z.left),Q=Math.abs($-z.right),me=Math.min(te,Q);let be;const Ce=_/d*(g+1);if(z.isDash){const Le=g-Math.abs(Ce);be=Math.sqrt(me*me+Le*Le)}else be=g-Math.sqrt(me*me+Ce*Ce);this.data[T+$]=Math.max(0,Math.min(255,be+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){const z=r[A],$=r[A+1];z.zeroLength?r.splice(A,1):$&&$.isDash===z.isDash&&($.left=z.left,r.splice(A,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const g=this.width*this.nextRow;let _=0,T=r[_];for(let A=0;A<this.width;A++){A/T.right>1&&(T=r[++_]);const z=Math.abs(A-T.left),$=Math.abs(A-T.right),te=Math.min(z,$);this.data[g+A]=Math.max(0,Math.min(255,(T.isDash?te:-te)+128))}}addDash(r,l){const d=l?7:0,g=2*d+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let _=0;for(let A=0;A<r.length;A++)_+=r[A];if(_!==0){const A=this.width/_,z=this.getDashRanges(r,this.width,A);l?this.addRoundDash(z,A,d):this.addRegularDash(z)}const T={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=g,this.dirty=!0,T}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Ne="maplibre_preloaded_worker_pool";class Pe{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Pe.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const ze=Math.floor(b.hardwareConcurrency/2);let qe,He;function ot(){return qe||(qe=new Pe),qe}Pe.workerCount=u.B(globalThis)?Math.max(Math.min(ze,3),1):1;class ht{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let g=0;g<d.length;g++){const _=new u.C(d[g],l);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const d=[];for(const g of this.actors)d.push(g.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const d of this.actors)d.registerMessageHandler(r,l)}}function xt(){return He||(He=new ht(ot(),u.G),He.registerMessageHandler("GR",(y,r,l)=>u.m(r,l))),He}function kt(y,r){const l=u.F();return u.H(l,l,[1,1,0]),u.J(l,l,[.5*y.width,.5*y.height,1]),u.K(l,l,y.calculatePosMatrix(r.toUnwrapped()))}function pt(y,r,l,d,g,_){const T=function(Q,me,be){if(Q)for(const Ce of Q){const Le=me[Ce];if(Le&&Le.source===be&&Le.type==="fill-extrusion")return!0}else for(const Ce in me){const Le=me[Ce];if(Le.source===be&&Le.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,y.id),A=_.maxPitchScaleFactor(),z=y.tilesIn(d,A,T);z.sort(wt);const $=[];for(const Q of z)$.push({wrappedTileID:Q.tileID.wrapped().key,queryResults:Q.tile.queryRenderedFeatures(r,l,y._state,Q.queryGeometry,Q.cameraQueryGeometry,Q.scale,g,_,A,kt(y.transform,Q.tileID))});const te=function(Q){const me={},be={};for(const Ce of Q){const Le=Ce.queryResults,Ae=Ce.wrappedTileID,Ge=be[Ae]=be[Ae]||{};for(const Ke in Le){const Re=Le[Ke],Ye=Ge[Ke]=Ge[Ke]||{},nt=me[Ke]=me[Ke]||[];for(const st of Re)Ye[st.featureIndex]||(Ye[st.featureIndex]=!0,nt.push(st))}}return me}($);for(const Q in te)te[Q].forEach(me=>{const be=me.feature,Ce=y.getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=Ce});return te}function wt(y,r){const l=y.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function Ht(y,r,l){return u._(this,void 0,void 0,function*(){let d=y;if(y.url?d=(yield u.h(r.transformRequest(y.url,"Source"),l)).data:yield b.frameAsync(l),!d)return null;const g=u.L(u.e(d,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(g.vectorLayerIds=d.vector_layers.map(_=>_.id)),g})}class Lt{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.M?new u.M(r.lng,r.lat):u.M.convert(r),this}extend(r){const l=this._sw,d=this._ne;let g,_;if(r instanceof u.M)g=r,_=r;else{if(!(r instanceof Lt))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Lt.convert(r)):this.extend(u.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.M.convert(r)):this;if(g=r._sw,_=r._ne,!g||!_)return this}return l||d?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(_.lng,_.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=u.M.convert(r);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(r){return r instanceof Lt?r:r&&new Lt(r)}static fromLngLat(r,l=0){const d=360*l/40075017,g=d/Math.cos(Math.PI/180*r.lat);return new Lt(new u.M(r.lng-g,r.lat-d),new u.M(r.lng+g,r.lat+d))}}class cn{constructor(r,l,d){this.bounds=Lt.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(u.N(this.bounds.getWest())*l),g=Math.floor(u.O(this.bounds.getNorth())*l),_=Math.ceil(u.N(this.bounds.getEast())*l),T=Math.ceil(u.O(this.bounds.getSouth())*l);return r.x>=d&&r.x<_&&r.y>=g&&r.y<T}}class it extends u.E{constructor(r,l,d,g){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(l,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ht(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new cn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((_,T)=>{r.reloadPromise={resolve:_,reject:T}})}else r.actor=this.dispatcher.getActor(),g="LT";r.abortController=new AbortController;try{const _=yield r.actor.sendAsync({type:g,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,_)}catch(_){if(delete r.abortController,r.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class bn extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},l),u.e(this,u.L(l,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ht(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new cn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield V.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const g=this.map.painter.context,_=g.gl,T=d.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new Z(g,T,_.RGBA,{useMipmap:!0}),r.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&_.texParameterf(_.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class hn extends bn{constructor(r,l,d,g){super(r,l,d,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const g=yield V.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(g&&g.data){const _=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&r.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const T=u.b(_)&&u.S()?_:yield this.readImageNow(_),A={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const z=yield r.actor.sendAsync({type:"LDT",data:A});r.dem=z,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(g){if(delete r.abortController,r.aborted)r.state="unloaded";else if(g)throw r.state="errored",g}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const l=r.width+2,d=r.height+2;try{return new u.R({width:l,height:d},yield u.V(r,-1,-1,l,d))}catch{}}return b.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),g=(l.x-1+d)%d,_=l.x===0?r.wrap-1:r.wrap,T=(l.x+1+d)%d,A=l.x+1===d?r.wrap+1:r.wrap,z={};return z[new u.Q(r.overscaledZ,_,l.z,g,l.y).key]={backfilled:!1},z[new u.Q(r.overscaledZ,A,l.z,T,l.y).key]={backfilled:!1},l.y>0&&(z[new u.Q(r.overscaledZ,_,l.z,g,l.y-1).key]={backfilled:!1},z[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},z[new u.Q(r.overscaledZ,A,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<d&&(z[new u.Q(r.overscaledZ,_,l.z,g,l.y+1).key]={backfilled:!1},z[new u.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},z[new u.Q(r.overscaledZ,A,l.z,T,l.y+1).key]={backfilled:!1}),z}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class qt extends u.E{constructor(r,l,d,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=l.data,this._options=u.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const _=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*_,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*_,extent:u.W,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.W,radius:(l.clusterRadius||50)*_,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const l=u.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;d.resourceTiming&&d.resourceTiming[this.id]&&(g=d.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(_,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const l=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const g=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(g,this.map.painter,l==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Se=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class N extends u.E{constructor(r,l,d,g){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield V.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new u.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(u.Y.fromLngLat);this.tileID=function(g){let _=1/0,T=1/0,A=-1/0,z=-1/0;for(const me of g)_=Math.min(_,me.x),T=Math.min(T,me.y),A=Math.max(A,me.x),z=Math.max(z,me.y);const $=Math.max(A-_,z-T),te=Math.max(0,Math.floor(-Math.log($)/Math.LN2)),Q=Math.pow(2,te);return new u.a0(te,Math.floor((_+A)/2*Q),Math.floor((T+z)/2*Q))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,u.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,u.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Z(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class D extends N{constructor(r,l,d,g){super(r,l,d,g),this.roundZoom=!0,this.type="video",this.options=l}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield u.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new u.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Z(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,d=!0)}d&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xe extends N{constructor(r,l,d,g){super(r,l,d,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Z(l,this.canvas,d.RGBA,{premultiply:!0});let g=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Xe={},tt=y=>{switch(y){case"geojson":return qt;case"image":return N;case"raster":return bn;case"raster-dem":return hn;case"vector":return it;case"video":return D;case"canvas":return xe}return Xe[y]},ct="RTLPluginLoaded";class ae extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=xt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(ct))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let M=null;function U(){return M||(M=new ae),M}class Ee{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a3(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,_){const T={};if(!_)return T;for(const A of g){const z=A.layerIds.map($=>_.getLayer($)).filter(Boolean);if(z.length!==0){A.layers=z,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map($=>z.filter(te=>te.id===$)[0]));for(const $ of z)T[$.id]=A}}return T}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a5){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof u.a5&&_.hasRTLText){this.hasRTLText=!0,U().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Z(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Z(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,g,_,T,A,z,$,te){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:te,transform:z,params:A,queryPadding:this.queryPadding*$},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),_=l&&l.sourceLayer?l.sourceLayer:"",T=g._geojsonTileLayer||g[_];if(!T)return;const A=u.a6(l&&l.filter),{z,x:$,y:te}=this.tileID.canonical,Q={z,x:$,y:te};for(let me=0;me<T.length;me++){const be=T.feature(me);if(A.needGeometry){const Ae=u.a7(be,!0);if(!A.filter(new u.a8(this.tileID.overscaledZ),Ae,this.tileID.canonical))continue}else if(!A.filter(new u.a8(this.tileID.overscaledZ),be))continue;const Ce=d.getId(be,_),Le=new u.a9(be,z,$,te,Ce);Le.tile=Q,r.push(Le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=u.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const _=this.expirationTime-l;_?this.expirationTime=d+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const _=this.buckets[g],T=_.layers[0].sourceLayer||"_geojsonTileLayer",A=d[T],z=r[T];if(!A||!z||Object.keys(z).length===0)continue;_.update(z,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const $=l&&l.style&&l.style.getLayer(g);$&&(this.queryPadding=Math.max(this.queryPadding,$.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=b.now()+r}setDependencies(r,l){const d={};for(const g of l)d[g]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const g=this.dependencies[d];if(g){for(const _ of l)if(g[_])return!0}}return!1}}class We{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:l,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},d)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,g=l===void 0?0:this.data[d].indexOf(l),_=this.data[d][g];return this.data[d].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const g of this.data[d])r(g.value)||l.push(g);for(const d of l)this.remove(d.value.tileID,d)}}class rt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const g=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},u.e(this.stateChanges[r][g],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==g&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const _ in this.state[r][g])d[_]||(this.deletedStates[r][g][_]=null)}else for(const _ in d)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][_]===null&&delete this.deletedStates[r][g][_]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const g=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(d in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][d]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),g=u.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][l];if(_===null)return{};for(const T in _)delete g[T]}return g}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const T in this.stateChanges[g])this.state[g][T]||(this.state[g][T]={}),u.e(this.state[g][T],this.stateChanges[g][T]),_[T]=this.state[g][T];d[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const T in this.state[g])_[T]={},this.state[g][T]={};else for(const T in this.deletedStates[g]){if(this.deletedStates[g][T]===null)this.state[g][T]={};else for(const A of Object.keys(this.deletedStates[g][T]))delete this.state[g][T][A];_[T]=this.state[g][T]}d[g]=d[g]||{},u.e(d[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in r)r[g].setFeatureState(d,l)}}class Ve extends u.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,T,A)=>{const z=new(tt(_.type))(g,_,T,A);if(z.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${z.id}`);return z})(r,l,d,this),this._tiles={},this._cache=new We(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new rt,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(g){r.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Et).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,g)=>{const _=d.tileID,T=g.tileID,A=new u.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),z=new u.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||z.y-A.y||z.x-A.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(Et).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return u._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=b.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let g=0;g<l.length;g++){const _=l[g];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);d(r,T),d(T,r)}}function d(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-g.tileID.canonical.x;const A=_.tileID.canonical.y-g.tileID.canonical.y,z=Math.pow(2,g.tileID.canonical.z),$=_.tileID.key;T===0&&A===0||Math.abs(A)>1||(Math.abs(T)>1&&(Math.abs(T+z)===1?T+=z:Math.abs(T-z)===1&&(T-=z)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,T,A),g.neighboringTiles&&g.neighboringTiles[$]&&(g.neighboringTiles[$].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,g){for(const _ in this._tiles){let T=this._tiles[_];if(g[_]||!T.hasData()||T.tileID.overscaledZ<=l||T.tileID.overscaledZ>d)continue;let A=T.tileID;for(;T&&T.tileID.overscaledZ>l+1;){const $=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[$.key],T&&T.hasData()&&(A=$)}let z=A;for(;z.overscaledZ>l;)if(z=z.scaledTo(z.overscaledZ-1),r[z.key]){g[A.key]=A;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const g=r.scaledTo(d),_=this._getLoadedTile(g);if(_)return _}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+l),d[_.tileID.key]=_}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(r,l,d,g,_,T){const A={},z={},$=Object.keys(r),te=b.now();for(const Q of $){const me=r[Q],be=this._tiles[Q];if(!be||be.fadeEndTime!==0&&be.fadeEndTime<=te)continue;const Ce=this.findLoadedParent(me,l),Le=this.findLoadedSibling(me),Ae=Ce||Le||null;Ae&&(this._addTile(Ae.tileID),A[Ae.tileID.key]=Ae.tileID),z[Q]=me}this._retainLoadedChildren(z,g,d,r);for(const Q in A)r[Q]||(this._coveredTiles[Q]=!0,r[Q]=A[Q]);if(T){const Q={},me={};for(const be of _)this._tiles[be.key].hasData()?Q[be.key]=be:me[be.key]=be;for(const be in me){const Ce=me[be].children(this._source.maxzoom);this._tiles[Ce[0].key]&&this._tiles[Ce[1].key]&&this._tiles[Ce[2].key]&&this._tiles[Ce[3].key]&&(Q[Ce[0].key]=r[Ce[0].key]=Ce[0],Q[Ce[1].key]=r[Ce[1].key]=Ce[1],Q[Ce[2].key]=r[Ce[2].key]=Ce[2],Q[Ce[3].key]=r[Ce[3].key]=Ce[3],delete me[be])}for(const be in me){const Ce=me[be],Le=this.findLoadedParent(Ce,this._source.minzoom),Ae=this.findLoadedSibling(Ce),Ge=Le||Ae||null;if(Ge){Q[Ge.tileID.key]=r[Ge.tileID.key]=Ge.tileID;for(const Ke in Q)Q[Ke].isChildOf(Ge.tileID)&&delete Q[Ke]}}for(const be in this._tiles)Q[be]||(this._coveredTiles[be]=!0)}}update(r,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new u.Q(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(te=>this._source.hasTile(te)))):d=[];const g=r.coveringZoomLevel(this._source),_=Math.max(g-Ve.maxOverzooming,this._source.minzoom),T=Math.max(g+Ve.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const te={};for(const Q of d)if(Q.canonical.z>this._source.minzoom){const me=Q.scaledTo(Q.canonical.z-1);te[me.key]=me;const be=Q.scaledTo(Math.max(this._source.minzoom,Math.min(Q.canonical.z,5)));te[be.key]=be}d=d.concat(Object.values(te))}const A=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(d,g);zt(this._source.type)&&this._updateCoveredAndRetainedTiles(z,_,T,g,d,l);for(const te in z)this._tiles[te].clearFadeHold();const $=u.ab(this._tiles,z);for(const te of $){const Q=this._tiles[te];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var d;const g={},_={},T=Math.max(l-Ve.maxOverzooming,this._source.minzoom),A=Math.max(l+Ve.maxUnderzooming,this._source.minzoom),z={};for(const $ of r){const te=this._addTile($);g[$.key]=$,te.hasData()||l<this._source.maxzoom&&(z[$.key]=$)}this._retainLoadedChildren(z,l,A,g);for(const $ of r){let te=this._tiles[$.key];if(te.hasData())continue;if(l+1>this._source.maxzoom){const me=$.children(this._source.maxzoom)[0],be=this.getTile(me);if(be&&be.hasData()){g[me.key]=me;continue}}else{const me=$.children(this._source.maxzoom);if(g[me[0].key]&&g[me[1].key]&&g[me[2].key]&&g[me[3].key])continue}let Q=te.wasRequested();for(let me=$.overscaledZ-1;me>=T;--me){const be=$.scaledTo(me);if(_[be.key])break;if(_[be.key]=!0,te=this.getTile(be),!te&&Q&&(te=this._addTile(be)),te){const Ce=te.hasData();if((Ce||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||Q)&&(g[be.key]=be),Q=te.wasRequested(),Ce)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}l.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;g=_}for(const _ of l)this._loadedParentTiles[_]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const l=this._tiles[r].tileID,d=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new Ee(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new u.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){const l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const g=[],_=this.transform;if(!_)return g;const T=d?_.getCameraQueryGeometry(r):r,A=r.map(Ce=>_.pointCoordinate(Ce,this.terrain)),z=T.map(Ce=>_.pointCoordinate(Ce,this.terrain)),$=this.getIds();let te=1/0,Q=1/0,me=-1/0,be=-1/0;for(const Ce of z)te=Math.min(te,Ce.x),Q=Math.min(Q,Ce.y),me=Math.max(me,Ce.x),be=Math.max(be,Ce.y);for(let Ce=0;Ce<$.length;Ce++){const Le=this._tiles[$[Ce]];if(Le.holdingForFade())continue;const Ae=Le.tileID,Ge=Math.pow(2,_.zoom-Le.tileID.overscaledZ),Ke=l*Le.queryPadding*u.W/Le.tileSize/Ge,Re=[Ae.getTilePoint(new u.Y(te,Q)),Ae.getTilePoint(new u.Y(me,be))];if(Re[0].x-Ke<u.W&&Re[0].y-Ke<u.W&&Re[1].x+Ke>=0&&Re[1].y+Ke>=0){const Ye=A.map(st=>Ae.getTilePoint(st)),nt=z.map(st=>Ae.getTilePoint(st));g.push({tile:Le,tileID:Ae,queryGeometry:Ye,cameraQueryGeometry:nt,scale:Ge})}}return g}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(zt(this._source.type)){const r=b.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const g=this._tiles[r];g&&g.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function Et(y,r){const l=Math.abs(2*y.wrap)-+(y.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||d-l||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function zt(y){return y==="raster"||y==="image"||y==="video"}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;class pn{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let l=1,d=this._distances[l];const g=r*this.paddedLength+this.padding;for(;d<g&&l<this._distances.length;)d=this._distances[++l];const _=l-1,T=this._distances[_],A=d-T,z=A>0?(g-T)/A:0;return this.points[_].mult(1-z).add(this.points[l].mult(z))}}function Sn(y,r){let l=!0;return y==="always"||y!=="never"&&r!=="never"||(l=!1),l}class Ft{constructor(r,l,d){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let T=0;T<this.xCellCount*this.yCellCount;T++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,g,_){this._forEachCell(l,d,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(r,l,d,g){this._forEachCell(l-g,d-g,l+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(g)}_insertBoxCell(r,l,d,g,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,l,d,g,_,T){this.circleCells[_].push(T)}_query(r,l,d,g,_,T,A){if(d<0||r>this.width||g<0||l>this.height)return[];const z=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=g){if(_)return[{key:null,x1:r,y1:l,x2:d,y2:g}];for(let $=0;$<this.boxKeys.length;$++)z.push({key:this.boxKeys[$],x1:this.bboxes[4*$],y1:this.bboxes[4*$+1],x2:this.bboxes[4*$+2],y2:this.bboxes[4*$+3]});for(let $=0;$<this.circleKeys.length;$++){const te=this.circles[3*$],Q=this.circles[3*$+1],me=this.circles[3*$+2];z.push({key:this.circleKeys[$],x1:te-me,y1:Q-me,x2:te+me,y2:Q+me})}}else this._forEachCell(r,l,d,g,this._queryCell,z,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},A);return z}query(r,l,d,g){return this._query(r,l,d,g,!1,null)}hitTest(r,l,d,g,_,T){return this._query(r,l,d,g,!0,_,T).length>0}hitTestCircle(r,l,d,g,_){const T=r-d,A=r+d,z=l-d,$=l+d;if(A<0||T>this.width||$<0||z>this.height)return!1;const te=[];return this._forEachCell(T,z,A,$,this._queryCellCircle,te,{hitTest:!0,overlapMode:g,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},_),te.length>0}_queryCell(r,l,d,g,_,T,A,z){const{seenUids:$,hitTest:te,overlapMode:Q}=A,me=this.boxCells[_];if(me!==null){const Ce=this.bboxes;for(const Le of me)if(!$.box[Le]){$.box[Le]=!0;const Ae=4*Le,Ge=this.boxKeys[Le];if(r<=Ce[Ae+2]&&l<=Ce[Ae+3]&&d>=Ce[Ae+0]&&g>=Ce[Ae+1]&&(!z||z(Ge))&&(!te||!Sn(Q,Ge.overlapMode))&&(T.push({key:Ge,x1:Ce[Ae],y1:Ce[Ae+1],x2:Ce[Ae+2],y2:Ce[Ae+3]}),te))return!0}}const be=this.circleCells[_];if(be!==null){const Ce=this.circles;for(const Le of be)if(!$.circle[Le]){$.circle[Le]=!0;const Ae=3*Le,Ge=this.circleKeys[Le];if(this._circleAndRectCollide(Ce[Ae],Ce[Ae+1],Ce[Ae+2],r,l,d,g)&&(!z||z(Ge))&&(!te||!Sn(Q,Ge.overlapMode))){const Ke=Ce[Ae],Re=Ce[Ae+1],Ye=Ce[Ae+2];if(T.push({key:Ge,x1:Ke-Ye,y1:Re-Ye,x2:Ke+Ye,y2:Re+Ye}),te)return!0}}}return!1}_queryCellCircle(r,l,d,g,_,T,A,z){const{circle:$,seenUids:te,overlapMode:Q}=A,me=this.boxCells[_];if(me!==null){const Ce=this.bboxes;for(const Le of me)if(!te.box[Le]){te.box[Le]=!0;const Ae=4*Le,Ge=this.boxKeys[Le];if(this._circleAndRectCollide($.x,$.y,$.radius,Ce[Ae+0],Ce[Ae+1],Ce[Ae+2],Ce[Ae+3])&&(!z||z(Ge))&&!Sn(Q,Ge.overlapMode))return T.push(!0),!0}}const be=this.circleCells[_];if(be!==null){const Ce=this.circles;for(const Le of be)if(!te.circle[Le]){te.circle[Le]=!0;const Ae=3*Le,Ge=this.circleKeys[Le];if(this._circlesCollide(Ce[Ae],Ce[Ae+1],Ce[Ae+2],$.x,$.y,$.radius)&&(!z||z(Ge))&&!Sn(Q,Ge.overlapMode))return T.push(!0),!0}}}_forEachCell(r,l,d,g,_,T,A,z){const $=this._convertToXCellCoord(r),te=this._convertToYCellCoord(l),Q=this._convertToXCellCoord(d),me=this._convertToYCellCoord(g);for(let be=$;be<=Q;be++)for(let Ce=te;Ce<=me;Ce++)if(_.call(this,r,l,d,g,this.xCellCount*Ce+be,T,A,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,g,_,T){const A=g-r,z=_-l,$=d+T;return $*$>A*A+z*z}_circleAndRectCollide(r,l,d,g,_,T,A){const z=(T-g)/2,$=Math.abs(r-(g+z));if($>z+d)return!1;const te=(A-_)/2,Q=Math.abs(l-(_+te));if(Q>te+d)return!1;if($<=z||Q<=te)return!0;const me=$-z,be=Q-te;return me*me+be*be<=d*d}}function Dr(y,r,l,d,g){const _=u.F();return r?(u.J(_,_,[1/g,1/g,1]),l||u.ad(_,_,d.angle)):u.K(_,d.labelPlaneMatrix,y),_}function ti(y,r,l,d,g){if(r){const _=u.ae(y);return u.J(_,_,[g,g,1]),l||u.ad(_,_,-d.angle),_}return d.glCoordMatrix}function ir(y,r,l){let d;l?(d=[y.x,y.y,l(y.x,y.y),1],u.af(d,d,r)):(d=[y.x,y.y,0,1],function(_,T,A){const z=T[0],$=T[1];_[0]=A[0]*z+A[4]*$+A[12],_[1]=A[1]*z+A[5]*$+A[13],_[3]=A[3]*z+A[7]*$+A[15]}(d,d,r));const g=d[3];return{point:new u.P(d[0]/g,d[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function ke(y,r){return .5+y/r*.5}function ie(y,r){return y.x>=-r[0]&&y.x<=r[0]&&y.y>=-r[1]&&y.y<=r[1]}function le(y,r,l,d,g,_,T,A,z,$,te,Q,me,be,Ce){const Le=d?y.textSizeData:y.iconSizeData,Ae=u.ag(Le,l.transform.zoom),Ge=[256/l.width*2+1,256/l.height*2+1],Ke=d?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;Ke.clear();const Re=y.lineVertexArray,Ye=d?y.text.placedSymbolArray:y.icon.placedSymbolArray,nt=l.transform.width/l.transform.height;let st=!1;for(let mt=0;mt<Ye.length;mt++){const bt=Ye.get(mt);if(bt.hidden||bt.writingMode===u.ah.vertical&&!st){rn(bt.numGlyphs,Ke);continue}st=!1;const Nt=ir(new u.P(bt.anchorX,bt.anchorY),r,Ce);if(!ie(Nt.point,Ge)){rn(bt.numGlyphs,Ke);continue}const Ut=ke(l.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),St=u.ai(Le,Ae,bt),It=T?St/Ut:St*Ut,Wt={getElevation:Ce,labelPlaneMatrix:g,lineVertexArray:Re,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:$,tileAnchorPoint:new u.P(bt.anchorX,bt.anchorY),unwrappedTileID:te,width:Q,height:me,translation:be},gn=De(Wt,bt,It,!1,A,r,_,y.glyphOffsetArray,Ke,nt,z);st=gn.useVertical,(gn.notEnoughRoom||st||gn.needsFlipping&&De(Wt,bt,It,!0,A,r,_,y.glyphOffsetArray,Ke,nt,z).notEnoughRoom)&&rn(bt.numGlyphs,Ke)}d?y.text.dynamicLayoutVertexBuffer.updateData(Ke):y.icon.dynamicLayoutVertexBuffer.updateData(Ke)}function fe(y,r,l,d,g,_,T,A){const z=_.glyphStartIndex+_.numGlyphs,$=_.lineStartIndex,te=_.lineStartIndex+_.lineLength,Q=r.getoffsetX(_.glyphStartIndex),me=r.getoffsetX(z-1),be=lt(y*Q,l,d,g,_.segment,$,te,A,T);if(!be)return null;const Ce=lt(y*me,l,d,g,_.segment,$,te,A,T);return Ce?A.projectionCache.anyProjectionOccluded?null:{first:be,last:Ce}:null}function Fe(y,r,l,d){return y===u.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(y===u.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function De(y,r,l,d,g,_,T,A,z,$,te){const Q=l/24,me=r.lineOffsetX*Q,be=r.lineOffsetY*Q;let Ce;if(r.numGlyphs>1){const Le=r.glyphStartIndex+r.numGlyphs,Ae=r.lineStartIndex,Ge=r.lineStartIndex+r.lineLength,Ke=fe(Q,A,me,be,d,r,te,y);if(!Ke)return{notEnoughRoom:!0};const Re=ir(Ke.first.point,T,y.getElevation).point,Ye=ir(Ke.last.point,T,y.getElevation).point;if(g&&!d){const nt=Fe(r.writingMode,Re,Ye,$);if(nt)return nt}Ce=[Ke.first];for(let nt=r.glyphStartIndex+1;nt<Le-1;nt++)Ce.push(lt(Q*A.getoffsetX(nt),me,be,d,r.segment,Ae,Ge,y,te));Ce.push(Ke.last)}else{if(g&&!d){const Ae=ir(y.tileAnchorPoint,_,y.getElevation).point,Ge=r.lineStartIndex+r.segment+1,Ke=new u.P(y.lineVertexArray.getx(Ge),y.lineVertexArray.gety(Ge)),Re=ir(Ke,_,y.getElevation),Ye=Re.signedDistanceFromCamera>0?Re.point:function(st,mt,bt,Nt,Ut,St){return Oe(st,mt,bt,1,Ut,St)}(y.tileAnchorPoint,Ke,Ae,0,_,y),nt=Fe(r.writingMode,Ae,Ye,$);if(nt)return nt}const Le=lt(Q*A.getoffsetX(r.glyphStartIndex),me,be,d,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,y,te);if(!Le||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Ce=[Le]}for(const Le of Ce)u.aj(z,Le.point,Le.angle);return{}}function Oe(y,r,l,d,g,_){const T=y.add(y.sub(r)._unit()),A=g!==void 0?ir(T,g,_.getElevation).point:je(T.x,T.y,_).point,z=l.sub(A);return l.add(z._mult(d/z.mag()))}function $e(y,r,l){const d=r.projectionCache;if(d.projections[y])return d.projections[y];const g=new u.P(r.lineVertexArray.getx(y),r.lineVertexArray.gety(y)),_=je(g.x,g.y,r);if(_.signedDistanceFromCamera>0)return d.projections[y]=_.point,d.anyProjectionOccluded=d.anyProjectionOccluded||_.isOccluded,_.point;const T=y-l.direction;return function(A,z,$,te,Q){return Oe(A,z,$,te,void 0,Q)}(l.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),g,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,r)}function je(y,r,l){const d=y+l.translation[0],g=r+l.translation[1];let _;return!l.pitchWithMap&&l.projection.useSpecialProjectionForSymbols?(_=l.projection.projectTileCoordinates(d,g,l.unwrappedTileID,l.getElevation),_.point.x=(.5*_.point.x+.5)*l.width,_.point.y=(.5*-_.point.y+.5)*l.height):(_=ir(new u.P(d,g),l.labelPlaneMatrix,l.getElevation),_.isOccluded=!1),_}function Qe(y,r,l){return y._unit()._perp()._mult(r*l)}function dt(y,r,l,d,g,_,T,A,z){if(A.projectionCache.offsets[y])return A.projectionCache.offsets[y];const $=l.add(r);if(y+z.direction<d||y+z.direction>=g)return A.projectionCache.offsets[y]=$,$;const te=$e(y+z.direction,A,z),Q=Qe(te.sub(l),T,z.direction),me=l.add(Q),be=te.add(Q);return A.projectionCache.offsets[y]=u.ak(_,$,me,be)||$,A.projectionCache.offsets[y]}function lt(y,r,l,d,g,_,T,A,z){const $=d?y-r:y+r;let te=$>0?1:-1,Q=0;d&&(te*=-1,Q=Math.PI),te<0&&(Q+=Math.PI);let me,be=te>0?_+g:_+g+1;A.projectionCache.cachedAnchorPoint?me=A.projectionCache.cachedAnchorPoint:(me=je(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=me);let Ce,Le,Ae=me,Ge=me,Ke=0,Re=0;const Ye=Math.abs($),nt=[];let st;for(;Ke+Re<=Ye;){if(be+=te,be<_||be>=T)return null;Ke+=Re,Ge=Ae,Le=Ce;const Nt={absOffsetX:Ye,direction:te,distanceFromAnchor:Ke,previousVertex:Ge};if(Ae=$e(be,A,Nt),l===0)nt.push(Ge),st=Ae.sub(Ge);else{let Ut;const St=Ae.sub(Ge);Ut=St.mag()===0?Qe($e(be+te,A,Nt).sub(Ae),l,te):Qe(St,l,te),Le||(Le=Ge.add(Ut)),Ce=dt(be,Ut,Ae,_,T,Le,l,A,Nt),nt.push(Le),st=Ce.sub(Le)}Re=st.mag()}const mt=st._mult((Ye-Ke)/Re)._add(Le||Ge),bt=Q+Math.atan2(Ae.y-Ge.y,Ae.x-Ge.x);return nt.push(mt),{point:mt,angle:z?bt:0,path:nt}}const ut=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rn(y,r){for(let l=0;l<y;l++){const d=r.length;r.resize(d+4),r.float32.set(ut,3*d)}}const Yt=100;class Tn{constructor(r,l,d=new Ft(r.width+200,r.height+200,25),g=new Ft(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=l,this.grid=d,this.ignoredGrid=g,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Yt,this.screenBottomBoundary=r.height+Yt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,g,_,T,A,z,$,te,Q){const me=r.anchorPointX+z[0],be=r.anchorPointY+z[1],Ce=this.projectAndGetPerspectiveRatio(g,me,be,_,te),Le=this._projectCollisionBox(r,d,g,_,T,A,z,Ce,te,Q),[Ae,Ge,Ke,Re]=Le.box;return this.mapProjection.useSpecialProjectionForSymbols&&(T?Le.allPointsOccluded:this.mapProjection.isOccluded(me,be,_))||Ce.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Ae,Ge,Ke,Re)||l!=="always"&&this.grid.hitTest(Ae,Ge,Ke,Re,l,$)?{box:[Ae,Ge,Ke,Re],placeable:!1,offscreen:!1}:{box:[Ae,Ge,Ke,Re],placeable:!0,offscreen:this.isOffscreen(Ae,Ge,Ke,Re)}}placeCollisionCircles(r,l,d,g,_,T,A,z,$,te,Q,me,be,Ce,Le,Ae){const Ge=[],Ke=new u.P(l.anchorX,l.anchorY),Re=this.getPerspectiveRatio(T,Ke.x,Ke.y,A,Ae),Ye=(Q?_/Re:_*Re)/u.ap,nt={getElevation:Ae,labelPlaneMatrix:z,lineVertexArray:d,pitchWithMap:Q,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ke,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:Le},st=fe(Ye,g,l.lineOffsetX*Ye,l.lineOffsetY*Ye,!1,l,!1,nt);let mt=!1,bt=!1,Nt=!0;if(st){const Ut=.5*be*Re+Ce,St=new u.P(-100,-100),It=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Wt=new pn,gn=st.first,Pt=st.last;let Rt=[];for(let En=gn.path.length-1;En>=1;En--)Rt.push(gn.path[En]);for(let En=1;En<Pt.path.length;En++)Rt.push(Pt.path[En]);const dn=2.5*Ut;if($){const En=this.projectPathToScreenSpace(Rt,nt,$);Rt=En.some(An=>An.signedDistanceFromCamera<=0)?[]:En.map(An=>An.point)}let er=[];if(Rt.length>0){const En=Rt[0].clone(),An=Rt[0].clone();for(let tr=1;tr<Rt.length;tr++)En.x=Math.min(En.x,Rt[tr].x),En.y=Math.min(En.y,Rt[tr].y),An.x=Math.max(An.x,Rt[tr].x),An.y=Math.max(An.y,Rt[tr].y);er=En.x>=St.x&&An.x<=It.x&&En.y>=St.y&&An.y<=It.y?[Rt]:An.x<St.x||En.x>It.x||An.y<St.y||En.y>It.y?[]:u.al([Rt],St.x,St.y,It.x,It.y)}for(const En of er){Wt.reset(En,.25*Ut);let An=0;An=Wt.length<=.5*Ut?1:Math.ceil(Wt.paddedLength/dn)+1;for(let tr=0;tr<An;tr++){const ai=tr/Math.max(An-1,1),Ao=Wt.lerp(ai),nr=Ao.x+Yt,ji=Ao.y+Yt;Ge.push(nr,ji,Ut,0);const Ei=nr-Ut,li=ji-Ut,ui=nr+Ut,ko=ji+Ut;if(Nt=Nt&&this.isOffscreen(Ei,li,ui,ko),bt=bt||this.isInsideGrid(Ei,li,ui,ko),r!=="always"&&this.grid.hitTestCircle(nr,ji,Ut,r,me)&&(mt=!0,!te))return{circles:[],offscreen:!1,collisionDetected:mt}}}}return{circles:!te&&mt||!bt||Re<this.perspectiveRatioCutoff?[]:Ge,offscreen:Nt,collisionDetected:mt}}projectPathToScreenSpace(r,l,d){return r.map(g=>ir(g,d,l.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,g=1/0,_=-1/0,T=-1/0;for(const te of r){const Q=new u.P(te.x+Yt,te.y+Yt);d=Math.min(d,Q.x),g=Math.min(g,Q.y),_=Math.max(_,Q.x),T=Math.max(T,Q.y),l.push(Q)}const A=this.grid.query(d,g,_,T).concat(this.ignoredGrid.query(d,g,_,T)),z={},$={};for(const te of A){const Q=te.key;if(z[Q.bucketInstanceId]===void 0&&(z[Q.bucketInstanceId]={}),z[Q.bucketInstanceId][Q.featureIndex])continue;const me=[new u.P(te.x1,te.y1),new u.P(te.x2,te.y1),new u.P(te.x2,te.y2),new u.P(te.x1,te.y2)];u.am(l,me)&&(z[Q.bucketInstanceId][Q.featureIndex]=!0,$[Q.bucketInstanceId]===void 0&&($[Q.bucketInstanceId]=[]),$[Q.bucketInstanceId].push(Q.featureIndex))}return $}insertCollisionBox(r,l,d,g,_,T){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:T,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,g,_,T){const A=d?this.ignoredGrid:this.grid,z={bucketInstanceId:g,featureIndex:_,collisionGroupID:T,overlapMode:l};for(let $=0;$<r.length;$+=4)A.insertCircle(z,r[$],r[$+1],r[$+2])}projectAndGetPerspectiveRatio(r,l,d,g,_){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,g,_):ir(new u.P(l,d),r,_);return{point:new u.P((T.point.x+1)/2*this.transform.width+Yt,(1-T.point.y)/2*this.transform.height+Yt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}getPerspectiveRatio(r,l,d,g,_){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,d,g,_):ir(new u.P(l,d),r,_);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(r,l,d,g){return d<Yt||r>=this.screenRightBoundary||g<Yt||l>this.screenBottomBoundary}isInsideGrid(r,l,d,g){return d>=0&&r<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.H(r,r,[-100,-100,0]),r}_projectCollisionBox(r,l,d,g,_,T,A,z,$,te){const Q=l*z.perspectiveRatio;let me=new u.P(1,0),be=new u.P(0,1);const Ce=new u.P(r.anchorPointX+A[0],r.anchorPointY+A[1]);if(T&&!_){const Ut=this.projectAndGetPerspectiveRatio(d,Ce.x+1,Ce.y,g,$).point.sub(z.point).unit(),St=Math.atan(Ut.y/Ut.x)+(Ut.x<0?Math.PI:0),It=Math.sin(St),Wt=Math.cos(St);me=new u.P(Wt,It),be=new u.P(-It,Wt)}else if(!T&&_){const Ut=-this.transform.angle,St=Math.sin(Ut),It=Math.cos(Ut);me=new u.P(It,St),be=new u.P(-St,It)}let Le=z.point,Ae=Q;if(_){Le=Ce;const Ut=this.transform.zoom-Math.floor(this.transform.zoom);Ae=Math.pow(2,-Ut),Ae*=this.mapProjection.getPitchedTextCorrection(this.transform,Ce,g),te||(Ae*=u.ac(.5+z.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}te&&(Le=Le.add(me.mult(te.x*Ae)).add(be.mult(te.y*Ae)));const Ge=r.x1*Ae,Ke=r.x2*Ae,Re=(Ge+Ke)/2,Ye=r.y1*Ae,nt=r.y2*Ae,st=(Ye+nt)/2,mt=[{offsetX:Ge,offsetY:Ye},{offsetX:Re,offsetY:Ye},{offsetX:Ke,offsetY:Ye},{offsetX:Ke,offsetY:st},{offsetX:Ke,offsetY:nt},{offsetX:Re,offsetY:nt},{offsetX:Ge,offsetY:nt},{offsetX:Ge,offsetY:st}];let bt=[];for(const{offsetX:Ut,offsetY:St}of mt)bt.push(new u.P(Le.x+me.x*Ut+be.x*St,Le.y+me.y*Ut+be.y*St));let Nt=!1;if(_){const Ut=bt.map(St=>this.projectAndGetPerspectiveRatio(d,St.x,St.y,g,$));Nt=Ut.some(St=>!St.isOccluded),bt=Ut.map(St=>St.point)}else Nt=!0;return{box:u.ao(bt),allPointsOccluded:!Nt}}}function un(y,r,l){return r*(u.W/(y.tileSize*Math.pow(2,l-y.tileID.overscaledZ)))}class In{constructor(r,l,d,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Bn{constructor(r,l,d,g,_){this.text=new In(r?r.text:null,l,d,_),this.icon=new In(r?r.icon:null,l,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vn{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class or{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class mn{constructor(r,l,d,g,_){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=_}}class Jn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function vr(y,r,l,d,g){const{horizontalAlign:_,verticalAlign:T}=u.au(y);return new u.P(-(_-.5)*r+d[0]*g,-(T-.5)*l+d[1]*g)}class ni{constructor(r,l,d,g,_,T){this.transform=r.clone(),this.terrain=d,this.collisionIndex=new Tn(this.transform,l),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Jn(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const l=this.terrain;return l?(d,g)=>l.getElevation(r,d,g):null}getBucketParts(r,l,d,g){const _=d.getBucket(l),T=d.latestFeatureIndex;if(!_||!T||l.id!==_.layerIds[0])return;const A=d.collisionBoxArray,z=_.layers[0].layout,$=_.layers[0].paint,te=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),Q=d.tileSize/u.W,me=d.tileID.toUnwrapped(),be=this.transform.calculatePosMatrix(me),Ce=z.get("text-pitch-alignment")==="map",Le=z.get("text-rotation-alignment")==="map",Ae=un(d,1,this.transform.zoom),Ge=this.collisionIndex.mapProjection.translatePosition(this.transform,d,$.get("text-translate"),$.get("text-translate-anchor")),Ke=this.collisionIndex.mapProjection.translatePosition(this.transform,d,$.get("icon-translate"),$.get("icon-translate-anchor")),Re=Dr(be,Ce,Le,this.transform,Ae);let Ye=null;if(Ce){const st=ti(be,Ce,Le,this.transform,Ae);Ye=u.K([],this.transform.labelPlaneMatrix,st)}this.retainedQueryData[_.bucketInstanceId]=new mn(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,d.tileID);const nt={bucket:_,layout:z,translationText:Ge,translationIcon:Ke,posMatrix:be,unwrappedTileID:me,textLabelPlaneMatrix:Re,labelToScreenMatrix:Ye,scale:te,textPixelRatio:Q,holdingForFade:d.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:u.ag(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const st of _.sortKeyRanges){const{sortKey:mt,symbolInstanceStart:bt,symbolInstanceEnd:Nt}=st;r.push({sortKey:mt,symbolInstanceStart:bt,symbolInstanceEnd:Nt,parameters:nt})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:nt})}attemptAnchorPlacement(r,l,d,g,_,T,A,z,$,te,Q,me,be,Ce,Le,Ae,Ge,Ke,Re){const Ye=u.aq[r.textAnchor],nt=[r.textOffset0,r.textOffset1],st=vr(Ye,d,g,nt,_),mt=this.collisionIndex.placeCollisionBox(l,me,z,$,te,A,T,Ae,Q.predicate,Re,st);if((!Ke||this.collisionIndex.placeCollisionBox(Ke,me,z,$,te,A,T,Ge,Q.predicate,Re,st).placeable)&&mt.placeable){let bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:nt,width:d,height:g,anchor:Ye,textBoxScale:_,prevAnchor:bt},this.markUsedJustification(Ce,Ye,be,Le),Ce.allowVerticalPlacement&&(this.markUsedOrientation(Ce,Le,be),this.placedOrientations[be.crossTileID]=Le),{shift:st,placedGlyphBoxes:mt}}}placeLayerBucketPart(r,l,d){const{bucket:g,layout:_,translationText:T,translationIcon:A,posMatrix:z,unwrappedTileID:$,textLabelPlaneMatrix:te,labelToScreenMatrix:Q,textPixelRatio:me,holdingForFade:be,collisionBoxArray:Ce,partiallyEvaluatedTextSize:Le,collisionGroup:Ae}=r.parameters,Ge=_.get("text-optional"),Ke=_.get("icon-optional"),Re=u.ar(_,"text-overlap","text-allow-overlap"),Ye=Re==="always",nt=u.ar(_,"icon-overlap","icon-allow-overlap"),st=nt==="always",mt=_.get("text-rotation-alignment")==="map",bt=_.get("text-pitch-alignment")==="map",Nt=_.get("icon-text-fit")!=="none",Ut=_.get("symbol-z-order")==="viewport-y",St=Ye&&(st||!g.hasIconData()||Ke),It=st&&(Ye||!g.hasTextData()||Ge);!g.collisionArrays&&Ce&&g.deserializeCollisionBoxes(Ce);const Wt=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),gn=(Pt,Rt,dn)=>{var er,En;if(l[Pt.crossTileID])return;if(be)return void(this.placements[Pt.crossTileID]=new Vn(!1,!1,!1));let An=!1,tr=!1,ai=!0,Ao=null,nr={box:null,placeable:!1,offscreen:null},ji={box:null,placeable:!1,offscreen:null},Ei=null,li=null,ui=null,ko=0,Fa=0,zc=0;Rt.textFeatureIndex?ko=Rt.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(ko=Pt.featureIndex),Rt.verticalTextFeatureIndex&&(Fa=Rt.verticalTextFeatureIndex);const Il=Rt.textBox;if(Il){const Kr=ci=>{let hi=u.ah.horizontal;if(g.allowVerticalPlacement&&!ci&&this.prevPlacement){const Hr=this.prevPlacement.placedOrientations[Pt.crossTileID];Hr&&(this.placedOrientations[Pt.crossTileID]=Hr,hi=Hr,this.markUsedOrientation(g,hi,Pt))}return hi},Mo=(ci,hi)=>{if(g.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&Rt.verticalTextBox){for(const Hr of g.writingModes)if(Hr===u.ah.vertical?(nr=hi(),ji=nr):nr=ci(),nr&&nr.placeable)break}else nr=ci()},ra=Pt.textAnchorOffsetStartIndex,Cl=Pt.textAnchorOffsetEndIndex;if(Cl===ra){const ci=(hi,Hr)=>{const lr=this.collisionIndex.placeCollisionBox(hi,Re,me,z,$,bt,mt,T,Ae.predicate,Wt);return lr&&lr.placeable&&(this.markUsedOrientation(g,Hr,Pt),this.placedOrientations[Pt.crossTileID]=Hr),lr};Mo(()=>ci(Il,u.ah.horizontal),()=>{const hi=Rt.verticalTextBox;return g.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&hi?ci(hi,u.ah.vertical):{box:null,offscreen:null}}),Kr(nr&&nr.placeable)}else{let ci=u.aq[(En=(er=this.prevPlacement)===null||er===void 0?void 0:er.variableOffsets[Pt.crossTileID])===null||En===void 0?void 0:En.anchor];const hi=(lr,Pl,gd)=>{const Ur=lr.x2-lr.x1,Sp=lr.y2-lr.y1,Rc=Pt.textBoxScale,Oc=Nt&&nt==="never"?Pl:null;let ia=null,Ep=Re==="never"?1:2,yd="never";ci&&Ep++;for(let vd=0;vd<Ep;vd++){for(let _d=ra;_d<Cl;_d++){const jc=g.textAnchorOffsets.get(_d);if(ci&&jc.textAnchor!==ci)continue;const Al=this.attemptAnchorPlacement(jc,lr,Ur,Sp,Rc,mt,bt,me,z,$,Ae,yd,Pt,g,gd,T,A,Oc,Wt);if(Al&&(ia=Al.placedGlyphBoxes,ia&&ia.placeable))return An=!0,Ao=Al.shift,ia}ci?ci=null:yd=Re}return d&&!ia&&(ia={box:this.collisionIndex.placeCollisionBox(Il,"always",me,z,$,bt,mt,T,Ae.predicate,Wt,new u.P(0,0)).box,offscreen:!1,placeable:!1}),ia};Mo(()=>hi(Il,Rt.iconBox,u.ah.horizontal),()=>{const lr=Rt.verticalTextBox;return g.allowVerticalPlacement&&(!nr||!nr.placeable)&&Pt.numVerticalGlyphVertices>0&&lr?hi(lr,Rt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),nr&&(An=nr.placeable,ai=nr.offscreen);const Hr=Kr(nr&&nr.placeable);if(!An&&this.prevPlacement){const lr=this.prevPlacement.variableOffsets[Pt.crossTileID];lr&&(this.variableOffsets[Pt.crossTileID]=lr,this.markUsedJustification(g,lr.anchor,Pt,Hr))}}}if(Ei=nr,An=Ei&&Ei.placeable,ai=Ei&&Ei.offscreen,Pt.useRuntimeCollisionCircles){const Kr=g.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),Mo=u.ai(g.textSizeData,Le,Kr),ra=_.get("text-padding");li=this.collisionIndex.placeCollisionCircles(Re,Kr,g.lineVertexArray,g.glyphOffsetArray,Mo,z,$,te,Q,d,bt,Ae.predicate,Pt.collisionCircleDiameter,ra,T,Wt),li.circles.length&&li.collisionDetected&&!d&&u.w("Collisions detected, but collision boxes are not shown"),An=Ye||li.circles.length>0&&!li.collisionDetected,ai=ai&&li.offscreen}if(Rt.iconFeatureIndex&&(zc=Rt.iconFeatureIndex),Rt.iconBox){const Kr=Mo=>this.collisionIndex.placeCollisionBox(Mo,nt,me,z,$,bt,mt,A,Ae.predicate,Wt,Nt&&Ao?Ao:void 0);ji&&ji.placeable&&Rt.verticalIconBox?(ui=Kr(Rt.verticalIconBox),tr=ui.placeable):(ui=Kr(Rt.iconBox),tr=ui.placeable),ai=ai&&ui.offscreen}const Ra=Ge||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,Fc=Ke||Pt.numIconVertices===0;Ra||Fc?Fc?Ra||(tr=tr&&An):An=tr&&An:tr=An=tr&&An;const md=tr&&ui.placeable;if(An&&Ei.placeable&&this.collisionIndex.insertCollisionBox(Ei.box,Re,_.get("text-ignore-placement"),g.bucketInstanceId,ji&&ji.placeable&&Fa?Fa:ko,Ae.ID),md&&this.collisionIndex.insertCollisionBox(ui.box,nt,_.get("icon-ignore-placement"),g.bucketInstanceId,zc,Ae.ID),li&&An&&this.collisionIndex.insertCollisionCircles(li.circles,Re,_.get("text-ignore-placement"),g.bucketInstanceId,ko,Ae.ID),d&&this.storeCollisionData(g.bucketInstanceId,dn,Rt,Ei,ui,li),Pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Pt.crossTileID]=new Vn(An||St,tr||It,ai||g.justReloaded),l[Pt.crossTileID]=!0};if(Ut){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Pt=g.getSortedSymbolIndexes(this.transform.angle);for(let Rt=Pt.length-1;Rt>=0;--Rt){const dn=Pt[Rt];gn(g.symbolInstances.get(dn),g.collisionArrays[dn],dn)}}else for(let Pt=r.symbolInstanceStart;Pt<r.symbolInstanceEnd;Pt++)gn(g.symbolInstances.get(Pt),g.collisionArrays[Pt],Pt);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const Pt=this.collisionCircleArrays[g.bucketInstanceId];u.as(Pt.invProjMatrix,z),Pt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(r,l,d,g,_,T){if(d.textBox||d.iconBox){let A,z;this.collisionBoxArrays.has(r)?A=this.collisionBoxArrays.get(r):(A=new Map,this.collisionBoxArrays.set(r,A)),A.has(l)?z=A.get(l):(z={text:null,icon:null},A.set(l,z)),d.textBox&&(z.text=g.box),d.iconBox&&(z.icon=_.box)}if(T){let A=this.collisionCircleArrays[r];A===void 0&&(A=this.collisionCircleArrays[r]=new or);for(let z=0;z<T.circles.length;z+=4)A.circles.push(T.circles[z+0]),A.circles.push(T.circles[z+1]),A.circles.push(T.circles[z+2]),A.circles.push(T.collisionDetected?1:0)}}markUsedJustification(r,l,d,g){let _;_=g===u.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[u.at(l)];const T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const A of T)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=_>=0&&A!==_?0:d.crossTileID)}markUsedOrientation(r,l,d){const g=l===u.ah.horizontal||l===u.ah.horizontalOnly?l:0,_=l===u.ah.vertical?l:0,T=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const A of T)r.text.placedSymbolArray.get(A).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(r):1,_=l?l.opacities:{},T=l?l.variableOffsets:{},A=l?l.placedOrientations:{};for(const z in this.placements){const $=this.placements[z],te=_[z];te?(this.opacities[z]=new Bn(te,g,$.text,$.icon),d=d||$.text!==te.text.placed||$.icon!==te.icon.placed):(this.opacities[z]=new Bn(null,g,$.text,$.icon,$.skipFade),d=d||$.text||$.icon)}for(const z in _){const $=_[z];if(!this.opacities[z]){const te=new Bn($,g,!1,!1);te.isHidden()||(this.opacities[z]=te,d=d||$.text.placed||$.icon.placed)}}for(const z in T)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=T[z]);for(const z in A)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=A[z]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const g of l){const _=g.getBucket(r);_&&g.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,g.tileID,d,g.collisionBoxArray)}}updateBucketOpacities(r,l,d,g){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const _=r.layers[0],T=_.layout,A=new Bn(null,0,!1,!1,!0),z=T.get("text-allow-overlap"),$=T.get("icon-allow-overlap"),te=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Q=T.get("text-rotation-alignment")==="map",me=T.get("text-pitch-alignment")==="map",be=T.get("icon-text-fit")!=="none",Ce=new Bn(null,0,z&&($||!r.hasIconData()||T.get("icon-optional")),$&&(z||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&g&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(g);const Le=(Ge,Ke,Re)=>{for(let Ye=0;Ye<Ke/4;Ye++)Ge.opacityVertexArray.emplaceBack(Re);Ge.hasVisibleVertices=Ge.hasVisibleVertices||Re!==_a},Ae=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Ge=0;Ge<r.symbolInstances.length;Ge++){const Ke=r.symbolInstances.get(Ge),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Ye,crossTileID:nt}=Ke;let st=this.opacities[nt];d[nt]?st=A:st||(st=Ce,this.opacities[nt]=st),d[nt]=!0;const mt=Ke.numIconVertices>0,bt=this.placedOrientations[Ke.crossTileID],Nt=bt===u.ah.vertical,Ut=bt===u.ah.horizontal||bt===u.ah.horizontalOnly;if(Re>0||Ye>0){const It=ri(st.text);Le(r.text,Re,Nt?_a:It),Le(r.text,Ye,Ut?_a:It);const Wt=st.text.isHidden();[Ke.rightJustifiedTextSymbolIndex,Ke.centerJustifiedTextSymbolIndex,Ke.leftJustifiedTextSymbolIndex].forEach(Rt=>{Rt>=0&&(r.text.placedSymbolArray.get(Rt).hidden=Wt||Nt?1:0)}),Ke.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ke.verticalPlacedTextSymbolIndex).hidden=Wt||Ut?1:0);const gn=this.variableOffsets[Ke.crossTileID];gn&&this.markUsedJustification(r,gn.anchor,Ke,bt);const Pt=this.placedOrientations[Ke.crossTileID];Pt&&(this.markUsedJustification(r,"left",Ke,Pt),this.markUsedOrientation(r,Pt,Ke))}if(mt){const It=ri(st.icon),Wt=!(be&&Ke.verticalPlacedIconSymbolIndex&&Nt);Ke.placedIconSymbolIndex>=0&&(Le(r.icon,Ke.numIconVertices,Wt?It:_a),r.icon.placedSymbolArray.get(Ke.placedIconSymbolIndex).hidden=st.icon.isHidden()),Ke.verticalPlacedIconSymbolIndex>=0&&(Le(r.icon,Ke.numVerticalIconVertices,Wt?_a:It),r.icon.placedSymbolArray.get(Ke.verticalPlacedIconSymbolIndex).hidden=st.icon.isHidden())}const St=Ae&&Ae.has(Ge)?Ae.get(Ge):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const It=r.collisionArrays[Ge];if(It){let Wt=new u.P(0,0);if(It.textBox||It.verticalTextBox){let gn=!0;if(te){const Pt=this.variableOffsets[nt];Pt?(Wt=vr(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textBoxScale),Q&&Wt._rotate(me?this.transform.angle:-this.transform.angle)):gn=!1}if(It.textBox||It.verticalTextBox){let Pt;It.textBox&&(Pt=Nt),It.verticalTextBox&&(Pt=Ut),vi(r.textCollisionBox.collisionVertexArray,st.text.placed,!gn||Pt,St.text,Wt.x,Wt.y)}}if(It.iconBox||It.verticalIconBox){const gn=!!(!Ut&&It.verticalIconBox);let Pt;It.iconBox&&(Pt=gn),It.verticalIconBox&&(Pt=!gn),vi(r.iconCollisionBox.collisionVertexArray,st.icon.placed,Pt,St.icon,be?Wt.x:0,be?Wt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Ge=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Ge.invProjMatrix,r.placementViewportMatrix=Ge.viewportMatrix,r.collisionCircleArray=Ge.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function vi(y,r,l,d,g,_){d&&d.length!==0||(d=[0,0,0,0]);const T=d[0]-Yt,A=d[1]-Yt,z=d[2]-Yt,$=d[3]-Yt;y.emplaceBack(r?1:0,l?1:0,g||0,_||0,T,A),y.emplaceBack(r?1:0,l?1:0,g||0,_||0,z,A),y.emplaceBack(r?1:0,l?1:0,g||0,_||0,z,$),y.emplaceBack(r?1:0,l?1:0,g||0,_||0,T,$)}const _r=Math.pow(2,25),Bs=Math.pow(2,24),il=Math.pow(2,17),zn=Math.pow(2,16),ol=Math.pow(2,9),Pn=Math.pow(2,8),xr=Math.pow(2,1);function ri(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,l=Math.floor(127*y.opacity);return l*_r+r*Bs+l*il+r*zn+l*ol+r*Pn+l*xr+r}const _a=0;function ii(){return{isOccluded:(y,r,l)=>!1,getPitchedTextCorrection:(y,r,l)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,r,l,d){throw new Error("Not implemented.")},translatePosition:(y,r,l,d)=>function(g,_,T,A,z=!1){if(!T[0]&&!T[1])return[0,0];const $=z?A==="map"?g.angle:0:A==="viewport"?-g.angle:0;if($){const te=Math.sin($),Q=Math.cos($);T=[T[0]*Q-T[1]*te,T[0]*te+T[1]*Q]}return[z?T[0]:un(_,T[0],g.zoom),z?T[1]:un(_,T[1],g.zoom)]}(y,r,l,d),getCircleRadiusCorrection:y=>1}}class Fi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,g,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(T,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((A,z)=>A.sortKey-z.sortKey));this._currentPartIndex<T.length;)if(l.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class ac{constructor(r,l,d,g,_,T,A,z){this.placement=new ni(r,ii(),l,T,A,z),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const g=b.now(),_=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){const T=l[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=A)&&(!T.maxzoom||T.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Fi(T)),this._inProgressLayer.continuePlacement(d[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Br=512/u.W/2;class mr{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const g=new Map;for(let _=0;_<l.length;_++){const T=l.get(_),A=T.key,z=g.get(A);z?z.push(T):g.set(A,[T])}for(const[_,T]of g){const A={positions:T.map(z=>({x:Math.floor(z.anchorX*Br),y:Math.floor(z.anchorY*Br)})),crossTileIDs:T.map(z=>z.crossTileID)};if(A.positions.length>128){const z=new u.av(A.positions.length,16,Uint16Array);for(const{x:$,y:te}of A.positions)z.add($,te);z.finish(),delete A.positions,A.index=z}this._symbolsByKey[_]=A}}getScaledCoordinates(r,l){const{x:d,y:g,z:_}=this.tileID.canonical,{x:T,y:A,z}=l.canonical,$=Br/Math.pow(2,z-_),te=(A*u.W+r.anchorY)*$,Q=g*u.W*Br;return{x:Math.floor((T*u.W+r.anchorX)*$-d*u.W*Br),y:Math.floor(te-Q)}}findMatches(r,l,d){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const A=this._symbolsByKey[T.key];if(!A)continue;const z=this.getScaledCoordinates(T,l);if(A.index){const $=A.index.range(z.x-g,z.y-g,z.x+g,z.y+g).sort();for(const te of $){const Q=A.crossTileIDs[te];if(!d[Q]){d[Q]=!0,T.crossTileID=Q;break}}}else if(A.positions)for(let $=0;$<A.positions.length;$++){const te=A.positions[$],Q=A.crossTileIDs[$];if(Math.abs(te.x-z.x)<=g&&Math.abs(te.y-z.y)<=g&&!d[Q]){d[Q]=!0,T.crossTileID=Q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class xa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const g=this.indexes[d],_={};for(const T in g){const A=g[T];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+l),_[A.tileID.key]=A}this.indexes[d]=_}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<l.symbolInstances.length;_++)l.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const A in T){const z=T[A];z.tileID.isChildOf(r)&&z.findMatches(l.symbolInstances,r,g)}else{const A=T[r.scaledTo(Number(_)).key];A&&A.findMatches(l.symbolInstances,r,g)}}for(let _=0;_<l.symbolInstances.length;_++){const T=l.symbolInstances.get(_);T.crossTileID||(T.crossTileID=d.generate(),g[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new mr(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d of l.getCrossTileIDsLists())for(const g of d)delete this.usedCrossTileIDs[r][g]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const g=this.indexes[d];for(const _ in g)r[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[_]),delete g[_],l=!0)}return l}}class sr{constructor(){this.layerIndexes={},this.crossTileIDs=new xa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new hs);let _=!1;const T={};g.handleWrapJump(d);for(const A of l){const z=A.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(A.tileID,z,this.crossTileIDs)&&(_=!0),T[z.bucketInstanceId]=!0)}return g.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const ds=(y,r)=>u.t(y,r&&r.filter(l=>l.identifier!=="source.canvas")),wr=u.aw();class sl extends u.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const g=this.sourceCaches[d].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new ht(ot(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,g)=>this.getGlyphs(d,g)),this.dispatcher.registerMessageHandler("GI",(d,g)=>this.getImages(d,g)),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new J(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Te(256,512),this.crossTileSymbolIndex=new sr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),U().on(ct,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const g=this.sourceCaches[d.sourceId];if(!g)return;const _=g.getSource();if(_&&_.vectorLayerIds)for(const T in this._layers){const A=this._layers[T];A.source===_.id&&this._validateLayer(A)}})}loadURL(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const g=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(_=>{this._loadStyleRequest=null,this._load(_.data,l,d)}).catch(_=>{this._loadStyleRequest=null,_&&this.fire(new u.j(_))})}loadJSON(r,l={},d){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(wr,{validate:!1})}_load(r,l,d){var g;const _=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!ds(this,u.x(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new we(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const d=u.aA(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(r,l=!1,d=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,T,A,z){return u._(this,void 0,void 0,function*(){const $=L(_),te=A>1?"@2x":"",Q={},me={};for(const{id:be,url:Ce}of $){const Le=T.transformRequest(ee(Ce,te,".json"),"SpriteJSON");Q[be]=u.h(Le,z);const Ae=T.transformRequest(ee(Ce,te,".png"),"SpriteImage");me[be]=V.getImage(Ae,z)}return yield Promise.all([...Object.values(Q),...Object.values(me)]),function(be,Ce){return u._(this,void 0,void 0,function*(){const Le={};for(const Ae in be){Le[Ae]={};const Ge=b.getImageCanvasContext((yield Ce[Ae]).data),Ke=(yield be[Ae]).data;for(const Re in Ke){const{width:Ye,height:nt,x:st,y:mt,sdf:bt,pixelRatio:Nt,stretchX:Ut,stretchY:St,content:It,textFitWidth:Wt,textFitHeight:gn}=Ke[Re];Le[Ae][Re]={data:null,pixelRatio:Nt,sdf:bt,stretchX:Ut,stretchY:St,content:It,textFitWidth:Wt,textFitHeight:gn,spriteData:{width:Ye,height:nt,x:st,y:mt,context:Ge}}}}return Le})}(Q,me)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const T in _){this._spritesImagesIds[T]=[];const A=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(z=>!(z in _)):[];for(const z of A)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in _[T]){const $=T==="default"?z:`${T}:${z}`;this._spritesImagesIds[T].push($),$ in this.imageManager.images?this.imageManager.updateImage($,_[T][z],!1):this.imageManager.addImage($,_[T][z]),l&&(this._changedImages[$]=!0)}}}).catch(_=>{this._spriteRequest=null,g=_,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),d&&d(g)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new u.j(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const d=[];for(const g of r)l[g]&&d.push(l[g]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const g=this._layers[d];g.type!=="custom"&&(r[d]=g.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(l){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const T in this._updatedSources){const A=this._updatedSources[T];if(A==="reload")this._reloadSource(T);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];d[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in d){const _=this.sourceCaches[g];!!d[g]!=!!_.used&&_.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var d;this._checkLoaded();const g=this.serialize();if(r=l.transformStyle?l.transformStyle(g,r):r,((d=l.validate)===null||d===void 0||d)&&ds(this,u.x(r)))return!1;(r=u.aB(r)).layers=u.az(r.layers);const _=u.aC(g,r),T=this._getOperationsToPerform(_);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const A of T.operations)A();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],d=[];for(const g of r)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":l.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":l.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":l.push(()=>{});break;default:d.push(g.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.x.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.sourceCaches[r]=new Ve(r,l,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(r.type==="custom"){if(ds(this,u.aD(r)))return;_=u.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(g,r.source),r=u.aB(r),r=u.e(r,{source:g})),this._validate(u.x.layer,`layers.${g}`,r,{arrayIndex:-1},d))return;_=u.aA(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(T,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const A=this._removedLayers[g];delete this._removedLayers[g],A.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===l&&g.maxzoom===d||(l!=null&&(g.minzoom=l),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!u.aE(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,l,null,d)||(g.filter=u.aB(l),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aB(this.getLayer(r).filter)}setLayoutProperty(r,l,d,g={}){this._checkLoaded();const _=this.getLayer(r);_?u.aE(_.getLayoutProperty(l),d)||(_.setLayoutProperty(l,d,g),this._updateLayer(_)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,g={}){this._checkLoaded();const _=this.getLayer(r);_?u.aE(_.getPaintProperty(l),d)||(_.setPaintProperty(l,d,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,g=r.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||g?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,r.id,l)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${d}' does not exist in the map's style.`)));const _=g.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(T,r.id,l):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,g=this.sourceCaches[l];if(g!==void 0)return g.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aF(this.sourceCaches,_=>_.serialize()),l=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aG({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:r,layers:l,terrain:d},_=>_!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=T=>this._layers[T].type==="fill-extrusion",d={},g=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(l(A)){d[A]=T;for(const z of r){const $=z[A];if($)for(const te of $)g.push(te)}}}g.sort((T,A)=>A.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(l(A))for(let z=g.length-1;z>=0;z--){const $=g[z].feature;if(d[$.layer.id]<T)break;_.push($),g.pop()}else for(const z of r){const $=z[A];if($)for(const te of $)_.push(te.feature)}}return _}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const A of l.layers){const z=this._layers[A];if(!z)return this.fire(new u.j(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];g[z.source]=!0}}const _=[];l.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const A in this.sourceCaches)l.layers&&!g[A]||_.push(pt(this.sourceCaches[A],this._layers,T,r,l,d));return this.placement&&_.push(function(A,z,$,te,Q,me,be){const Ce={},Le=me.queryRenderedSymbols(te),Ae=[];for(const Ge of Object.keys(Le).map(Number))Ae.push(be[Ge]);Ae.sort(wt);for(const Ge of Ae){const Ke=Ge.featureIndex.lookupSymbolFeatures(Le[Ge.bucketInstanceId],z,Ge.bucketIndex,Ge.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,A);for(const Re in Ke){const Ye=Ce[Re]=Ce[Re]||[],nt=Ke[Re];nt.sort((st,mt)=>{const bt=Ge.featureSortOrder;if(bt){const Nt=bt.indexOf(st.featureIndex);return bt.indexOf(mt.featureIndex)-Nt}return mt.featureIndex-st.featureIndex});for(const st of nt)Ye.push(st)}}for(const Ge in Ce)Ce[Ge].forEach(Ke=>{const Re=Ke.feature,Ye=$[A[Ge].source].getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=Ye});return Ce}(this._layers,T,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,l){l&&l.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(g,_){const T=g.getRenderableIds().map($=>g.getTileByID($)),A=[],z={};for(let $=0;$<T.length;$++){const te=T[$],Q=te.tileID.canonical.key;z[Q]||(z[Q]=!0,te.querySourceFeatures(A,_))}return A}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const T in r)if(!u.aE(r[T],d[T])){g=!0;break}if(!g)return;const _={now:b.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(_)}_validate(r,l,d,g,_={}){return(!_||_.validate!==!1)&&ds(this,r.call(u.x,u.e({key:l,style:this.serialize(),value:d,styleSpec:u.v},g)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),U().off(ct,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,g,_=!1){let T=!1,A=!1;const z={};for(const $ of this._order){const te=this._layers[$];if(te.type!=="symbol")continue;if(!z[te.source]){const me=this.sourceCaches[te.source];z[te.source]=me.getRenderableIds(!0).map(be=>me.getTileByID(be)).sort((be,Ce)=>Ce.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ce.tileID)?-1:1))}const Q=this.crossTileSymbolIndex.addLayer(te,z[te.source],r.center.lng);T=T||Q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),r.zoom))&&(this.pauseablePlacement=new ac(r,this.map.terrain,this._order,_,l,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),A=!0),T&&this.pauseablePlacement.placement.setStale()),A||T)for(const $ of this._order){const te=this._layers[$];te.type==="symbol"&&this.placement.updateLayerOpacities(te,z[te.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return u._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),g=this.sourceCaches[l.source];return g&&g.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(u.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},g){this._checkLoaded();const _=[{id:r,url:l}],T=[...L(this.stylesheet.sprite),..._];this._validate(u.x.sprite,"sprite",T,null,d)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,g))}removeSprite(r){this._checkLoaded();const l=L(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return L(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(u.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var co=u.X([{name:"a_pos",type:"Int16",components:2}]),hu="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ns={prelude:jn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:jn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:jn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:jn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:jn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:jn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:jn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:jn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:jn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:jn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:jn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:jn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:jn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:jn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:jn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:jn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:jn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:jn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:jn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:jn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:jn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:jn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:jn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:jn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:jn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:jn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:jn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",hu),terrainDepth:jn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",hu),terrainCoords:jn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",hu)};function jn(y,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(g):g,A={};return{fragmentSource:y=y.replace(l,(z,$,te,Q,me)=>(A[me]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_${me}
varying ${te} ${Q} ${me};
#else
uniform ${te} ${Q} u_${me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${me}
    ${te} ${Q} ${me} = u_${me};
#endif
`)),vertexSource:r=r.replace(l,(z,$,te,Q,me)=>{const be=Q==="float"?"vec2":"vec4",Ce=me.match(/color/)?"color":be;return A[me]?$==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${te} ${be} a_${me};
varying ${te} ${Q} ${me};
#else
uniform ${te} ${Q} u_${me};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = a_${me};
#else
    ${te} ${Q} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = unpack_mix_${Ce}(a_${me}, u_${me}_t);
#else
    ${te} ${Q} ${me} = u_${me};
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${te} ${be} a_${me};
#else
uniform ${te} ${Q} u_${me};
#endif
`:Ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${te} ${Q} ${me} = a_${me};
#else
    ${te} ${Q} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${te} ${Q} ${me} = unpack_mix_${Ce}(a_${me}, u_${me}_t);
#else
    ${te} ${Q} ${me} = u_${me};
#endif
`}),staticAttributes:d,staticUniforms:T}}class fs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,g,_,T,A,z,$){this.context=r;let te=this.boundPaintVertexBuffers.length!==g.length;for(let Q=0;!te&&Q<g.length;Q++)this.boundPaintVertexBuffers[Q]!==g[Q]&&(te=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||te||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==$?this.freshBind(l,d,g,_,T,A,z,$):(r.bindVertexArray.set(this.vao),A&&A.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind(),$&&$.bind())}freshBind(r,l,d,g,_,T,A,z){const $=r.numAttributes,te=this.context,Q=te.gl;this.vao&&this.destroy(),this.vao=te.createVertexArray(),te.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=z,l.enableAttributes(Q,r);for(const me of d)me.enableAttributes(Q,r);T&&T.enableAttributes(Q,r),A&&A.enableAttributes(Q,r),z&&z.enableAttributes(Q,r),l.bind(),l.setVertexAttribPointers(Q,r,_);for(const me of d)me.bind(),me.setVertexAttribPointers(Q,r,_);T&&(T.bind(),T.setVertexAttribPointers(Q,r,_)),g&&g.bind(),A&&(A.bind(),A.setVertexAttribPointers(Q,r,_)),z&&(z.bind(),z.setVertexAttribPointers(Q,r,_)),te.currentNumAttributes=$}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Us(y){const r=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const d=y[l].split(" ");r.push(d.pop())}return r}class du{constructor(r,l,d,g,_,T){const A=r.gl;this.program=A.createProgram();const z=Us(l.staticAttributes),$=d?d.getBinderAttributes():[],te=z.concat($),Q=Ns.prelude.staticUniforms?Us(Ns.prelude.staticUniforms):[],me=l.staticUniforms?Us(l.staticUniforms):[],be=d?d.getBinderUniforms():[],Ce=Q.concat(me).concat(be),Le=[];for(const st of Ce)Le.indexOf(st)<0&&Le.push(st);const Ae=d?d.defines():[];_&&Ae.push("#define OVERDRAW_INSPECTOR;"),T&&Ae.push("#define TERRAIN3D;");const Ge=Ae.concat(Ns.prelude.fragmentSource,l.fragmentSource).join(`
`),Ke=Ae.concat(Ns.prelude.vertexSource,l.vertexSource).join(`
`),Re=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Re,Ge),A.compileShader(Re),!A.getShaderParameter(Re,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Re)}`);A.attachShader(this.program,Re);const Ye=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Ye,Ke),A.compileShader(Ye),!A.getShaderParameter(Ye,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Ye)}`);A.attachShader(this.program,Ye),this.attributes={};const nt={};this.numAttributes=te.length;for(let st=0;st<this.numAttributes;st++)te[st]&&(A.bindAttribLocation(this.program,st,te[st]),this.attributes[te[st]]=st);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Ye),A.deleteShader(Re);for(let st=0;st<Le.length;st++){const mt=Le[st];if(mt&&!nt[mt]){const bt=A.getUniformLocation(this.program,mt);bt&&(nt[mt]=bt)}}this.fixedUniforms=g(r,nt),this.terrainUniforms=((st,mt)=>({u_depth:new u.aH(st,mt.u_depth),u_terrain:new u.aH(st,mt.u_terrain),u_terrain_dim:new u.aI(st,mt.u_terrain_dim),u_terrain_matrix:new u.aJ(st,mt.u_terrain_matrix),u_terrain_unpack:new u.aK(st,mt.u_terrain_unpack),u_terrain_exaggeration:new u.aI(st,mt.u_terrain_exaggeration)}))(r,nt),this.binderUniforms=d?d.getUniforms(r,nt):[]}draw(r,l,d,g,_,T,A,z,$,te,Q,me,be,Ce,Le,Ae,Ge,Ke){const Re=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(g),r.setColorMode(_),r.setCullFace(T),z){r.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,z.depthTexture),r.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,z.texture);for(const nt in this.terrainUniforms)this.terrainUniforms[nt].set(z[nt])}for(const nt in this.fixedUniforms)this.fixedUniforms[nt].set(A[nt]);Le&&Le.setUniforms(r,this.binderUniforms,be,{zoom:Ce});let Ye=0;switch(l){case Re.LINES:Ye=2;break;case Re.TRIANGLES:Ye=3;break;case Re.LINE_STRIP:Ye=1}for(const nt of me.get()){const st=nt.vaos||(nt.vaos={});(st[$]||(st[$]=new fs)).bind(r,this,te,Le?Le.getPaintVertexBuffers():[],Q,nt.vertexOffset,Ae,Ge,Ke),Re.drawElements(l,nt.primitiveLength*Ye,Re.UNSIGNED_SHORT,nt.primitiveOffset*Ye*2)}}}function oi(y,r,l){const d=1/un(l,1,r.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,r.transform.tileZoom)/g,T=_*(l.tileID.canonical.x+l.tileID.wrap*g),A=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[T>>16,A>>16],u_pixel_coord_lower:[65535&T,65535&A]}}const wa=(y,r,l,d)=>{const g=r.style.light,_=g.properties.get("position"),T=[_.x,_.y,_.z],A=function(){var $=new u.A(9);return u.A!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}();g.properties.get("anchor")==="viewport"&&function($,te){var Q=Math.sin(te),me=Math.cos(te);$[0]=me,$[1]=Q,$[2]=0,$[3]=-Q,$[4]=me,$[5]=0,$[6]=0,$[7]=0,$[8]=1}(A,-r.transform.angle),function($,te,Q){var me=te[0],be=te[1],Ce=te[2];$[0]=me*Q[0]+be*Q[3]+Ce*Q[6],$[1]=me*Q[1]+be*Q[4]+Ce*Q[7],$[2]=me*Q[2]+be*Q[5]+Ce*Q[8]}(T,T,A);const z=g.properties.get("color");return{u_matrix:y,u_lightpos:T,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+l,u_opacity:d}},fu=(y,r,l,d,g,_,T)=>u.e(wa(y,r,l,d),oi(_,r,T),{u_height_factor:-Math.pow(2,g.overscaledZ)/T.tileSize/8}),al=y=>({u_matrix:y}),ba=(y,r,l,d)=>u.e(al(y),oi(l,r,d)),ll=(y,r)=>({u_matrix:y,u_world:r}),$s=(y,r,l,d,g)=>u.e(ba(y,r,l,d),{u_world:g}),pu=(y,r,l,d)=>{const g=y.transform;let _,T;if(d.paint.get("circle-pitch-alignment")==="map"){const A=un(l,1,g.zoom);_=!0,T=[A,A]}else _=!1,T=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:T}},lc=(y,r,l)=>({u_matrix:y,u_inv_matrix:r,u_camera_to_center_distance:l.cameraToCenterDistance,u_viewport_size:[l.width,l.height]}),Vs=(y,r,l=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:l}),uc=y=>({u_matrix:y}),Ri=(y,r,l,d)=>({u_matrix:y,u_extrude_scale:un(r,1,l),u_intensity:d});function ul(y,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new u.Y(0,d/l).toLngLat().lat,new u.Y(0,(d+1)/l).toLngLat().lat]}const Xr=(y,r,l,d)=>{const g=y.transform;return{u_matrix:yu(y,r,l,d),u_ratio:1/un(r,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},_i=(y,r,l,d,g)=>u.e(Xr(y,r,l,g),{u_image:0,u_image_height:d}),mu=(y,r,l,d,g)=>{const _=y.transform,T=gu(r,_);return{u_matrix:yu(y,r,l,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/un(r,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[T,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Sa=(y,r,l,d,g,_)=>{const T=y.lineAtlas,A=gu(r,y.transform),z=l.layout.get("line-cap")==="round",$=T.getDash(d.from,z),te=T.getDash(d.to,z),Q=$.width*g.fromScale,me=te.width*g.toScale;return u.e(Xr(y,r,l,_),{u_patternscale_a:[A/Q,-$.height/2],u_patternscale_b:[A/me,-te.height/2],u_sdfgamma:T.width/(256*Math.min(Q,me)*y.pixelRatio)/2,u_image:0,u_tex_y_a:$.y,u_tex_y_b:te.y,u_mix:g.t})};function gu(y,r){return 1/un(y,1,r.tileZoom)}function yu(y,r,l,d){return y.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Gs=(y,r,l,d,g)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(T=g.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:vu(g.paint.get("raster-hue-rotate"))};var _,T};function vu(y){y*=Math.PI/180;const r=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const cc=(y,r,l,d,g,_,T,A,z,$,te,Q,me,be)=>{const Ce=T.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Ce.cameraToCenterDistance,u_pitch:Ce.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Ce.width/Ce.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:A,u_label_plane_matrix:z,u_coord_matrix:$,u_is_text:+Q,u_pitch_with_map:+d,u_is_along_line:g,u_is_variable_anchor:_,u_texsize:me,u_texture:0,u_translation:te,u_pitched_scale:be}},hc=(y,r,l,d,g,_,T,A,z,$,te,Q,me,be,Ce)=>{const Le=T.transform;return u.e(cc(y,r,l,d,g,_,T,A,z,$,te,Q,me,Ce),{u_gamma_scale:d?Math.cos(Le._pitch)*Le.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:+be})},Zh=(y,r,l,d,g,_,T,A,z,$,te,Q,me,be)=>u.e(hc(y,r,l,d,g,_,T,A,z,$,te,!0,Q,!0,be),{u_texsize_icon:me,u_texture_icon:1}),qh=(y,r,l)=>({u_matrix:y,u_opacity:r,u_color:l}),dc=(y,r,l,d,g,_)=>u.e(function(T,A,z,$){const te=z.imageManager.getPattern(T.from.toString()),Q=z.imageManager.getPattern(T.to.toString()),{width:me,height:be}=z.imageManager.getPixelSize(),Ce=Math.pow(2,$.tileID.overscaledZ),Le=$.tileSize*Math.pow(2,z.transform.tileZoom)/Ce,Ae=Le*($.tileID.canonical.x+$.tileID.wrap*Ce),Ge=Le*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:te.tl,u_pattern_br_a:te.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[me,be],u_mix:A.t,u_pattern_size_a:te.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/un($,1,z.transform.tileZoom),u_pixel_coord_upper:[Ae>>16,Ge>>16],u_pixel_coord_lower:[65535&Ae,65535&Ge]}}(d,_,l,g),{u_matrix:y,u_opacity:r}),cl={fillExtrusion:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_lightpos:new u.aL(y,r.u_lightpos),u_lightintensity:new u.aI(y,r.u_lightintensity),u_lightcolor:new u.aL(y,r.u_lightcolor),u_vertical_gradient:new u.aI(y,r.u_vertical_gradient),u_opacity:new u.aI(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_lightpos:new u.aL(y,r.u_lightpos),u_lightintensity:new u.aI(y,r.u_lightintensity),u_lightcolor:new u.aL(y,r.u_lightcolor),u_vertical_gradient:new u.aI(y,r.u_vertical_gradient),u_height_factor:new u.aI(y,r.u_height_factor),u_image:new u.aH(y,r.u_image),u_texsize:new u.aM(y,r.u_texsize),u_pixel_coord_upper:new u.aM(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,r.u_pixel_coord_lower),u_scale:new u.aL(y,r.u_scale),u_fade:new u.aI(y,r.u_fade),u_opacity:new u.aI(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_image:new u.aH(y,r.u_image),u_texsize:new u.aM(y,r.u_texsize),u_pixel_coord_upper:new u.aM(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,r.u_pixel_coord_lower),u_scale:new u.aL(y,r.u_scale),u_fade:new u.aI(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_world:new u.aM(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_world:new u.aM(y,r.u_world),u_image:new u.aH(y,r.u_image),u_texsize:new u.aM(y,r.u_texsize),u_pixel_coord_upper:new u.aM(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,r.u_pixel_coord_lower),u_scale:new u.aL(y,r.u_scale),u_fade:new u.aI(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new u.aI(y,r.u_camera_to_center_distance),u_scale_with_map:new u.aH(y,r.u_scale_with_map),u_pitch_with_map:new u.aH(y,r.u_pitch_with_map),u_extrude_scale:new u.aM(y,r.u_extrude_scale),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_matrix:new u.aJ(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_pixel_extrude_scale:new u.aM(y,r.u_pixel_extrude_scale)}),collisionCircle:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_inv_matrix:new u.aJ(y,r.u_inv_matrix),u_camera_to_center_distance:new u.aI(y,r.u_camera_to_center_distance),u_viewport_size:new u.aM(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new u.aN(y,r.u_color),u_matrix:new u.aJ(y,r.u_matrix),u_overlay:new u.aH(y,r.u_overlay),u_overlay_scale:new u.aI(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new u.aI(y,r.u_extrude_scale),u_intensity:new u.aI(y,r.u_intensity),u_matrix:new u.aJ(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_world:new u.aM(y,r.u_world),u_image:new u.aH(y,r.u_image),u_color_ramp:new u.aH(y,r.u_color_ramp),u_opacity:new u.aI(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_image:new u.aH(y,r.u_image),u_latrange:new u.aM(y,r.u_latrange),u_light:new u.aM(y,r.u_light),u_shadow:new u.aN(y,r.u_shadow),u_highlight:new u.aN(y,r.u_highlight),u_accent:new u.aN(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_image:new u.aH(y,r.u_image),u_dimension:new u.aM(y,r.u_dimension),u_zoom:new u.aI(y,r.u_zoom),u_unpack:new u.aK(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_ratio:new u.aI(y,r.u_ratio),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aM(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_ratio:new u.aI(y,r.u_ratio),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aM(y,r.u_units_to_pixels),u_image:new u.aH(y,r.u_image),u_image_height:new u.aI(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_texsize:new u.aM(y,r.u_texsize),u_ratio:new u.aI(y,r.u_ratio),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_image:new u.aH(y,r.u_image),u_units_to_pixels:new u.aM(y,r.u_units_to_pixels),u_scale:new u.aL(y,r.u_scale),u_fade:new u.aI(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_ratio:new u.aI(y,r.u_ratio),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_units_to_pixels:new u.aM(y,r.u_units_to_pixels),u_patternscale_a:new u.aM(y,r.u_patternscale_a),u_patternscale_b:new u.aM(y,r.u_patternscale_b),u_sdfgamma:new u.aI(y,r.u_sdfgamma),u_image:new u.aH(y,r.u_image),u_tex_y_a:new u.aI(y,r.u_tex_y_a),u_tex_y_b:new u.aI(y,r.u_tex_y_b),u_mix:new u.aI(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_tl_parent:new u.aM(y,r.u_tl_parent),u_scale_parent:new u.aI(y,r.u_scale_parent),u_buffer_scale:new u.aI(y,r.u_buffer_scale),u_fade_t:new u.aI(y,r.u_fade_t),u_opacity:new u.aI(y,r.u_opacity),u_image0:new u.aH(y,r.u_image0),u_image1:new u.aH(y,r.u_image1),u_brightness_low:new u.aI(y,r.u_brightness_low),u_brightness_high:new u.aI(y,r.u_brightness_high),u_saturation_factor:new u.aI(y,r.u_saturation_factor),u_contrast_factor:new u.aI(y,r.u_contrast_factor),u_spin_weights:new u.aL(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new u.aH(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(y,r.u_is_size_feature_constant),u_size_t:new u.aI(y,r.u_size_t),u_size:new u.aI(y,r.u_size),u_camera_to_center_distance:new u.aI(y,r.u_camera_to_center_distance),u_pitch:new u.aI(y,r.u_pitch),u_rotate_symbol:new u.aH(y,r.u_rotate_symbol),u_aspect_ratio:new u.aI(y,r.u_aspect_ratio),u_fade_change:new u.aI(y,r.u_fade_change),u_matrix:new u.aJ(y,r.u_matrix),u_label_plane_matrix:new u.aJ(y,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(y,r.u_coord_matrix),u_is_text:new u.aH(y,r.u_is_text),u_pitch_with_map:new u.aH(y,r.u_pitch_with_map),u_is_along_line:new u.aH(y,r.u_is_along_line),u_is_variable_anchor:new u.aH(y,r.u_is_variable_anchor),u_texsize:new u.aM(y,r.u_texsize),u_texture:new u.aH(y,r.u_texture),u_translation:new u.aM(y,r.u_translation),u_pitched_scale:new u.aI(y,r.u_pitched_scale)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new u.aH(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(y,r.u_is_size_feature_constant),u_size_t:new u.aI(y,r.u_size_t),u_size:new u.aI(y,r.u_size),u_camera_to_center_distance:new u.aI(y,r.u_camera_to_center_distance),u_pitch:new u.aI(y,r.u_pitch),u_rotate_symbol:new u.aH(y,r.u_rotate_symbol),u_aspect_ratio:new u.aI(y,r.u_aspect_ratio),u_fade_change:new u.aI(y,r.u_fade_change),u_matrix:new u.aJ(y,r.u_matrix),u_label_plane_matrix:new u.aJ(y,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(y,r.u_coord_matrix),u_is_text:new u.aH(y,r.u_is_text),u_pitch_with_map:new u.aH(y,r.u_pitch_with_map),u_is_along_line:new u.aH(y,r.u_is_along_line),u_is_variable_anchor:new u.aH(y,r.u_is_variable_anchor),u_texsize:new u.aM(y,r.u_texsize),u_texture:new u.aH(y,r.u_texture),u_gamma_scale:new u.aI(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_is_halo:new u.aH(y,r.u_is_halo),u_translation:new u.aM(y,r.u_translation),u_pitched_scale:new u.aI(y,r.u_pitched_scale)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new u.aH(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(y,r.u_is_size_feature_constant),u_size_t:new u.aI(y,r.u_size_t),u_size:new u.aI(y,r.u_size),u_camera_to_center_distance:new u.aI(y,r.u_camera_to_center_distance),u_pitch:new u.aI(y,r.u_pitch),u_rotate_symbol:new u.aH(y,r.u_rotate_symbol),u_aspect_ratio:new u.aI(y,r.u_aspect_ratio),u_fade_change:new u.aI(y,r.u_fade_change),u_matrix:new u.aJ(y,r.u_matrix),u_label_plane_matrix:new u.aJ(y,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(y,r.u_coord_matrix),u_is_text:new u.aH(y,r.u_is_text),u_pitch_with_map:new u.aH(y,r.u_pitch_with_map),u_is_along_line:new u.aH(y,r.u_is_along_line),u_is_variable_anchor:new u.aH(y,r.u_is_variable_anchor),u_texsize:new u.aM(y,r.u_texsize),u_texsize_icon:new u.aM(y,r.u_texsize_icon),u_texture:new u.aH(y,r.u_texture),u_texture_icon:new u.aH(y,r.u_texture_icon),u_gamma_scale:new u.aI(y,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(y,r.u_device_pixel_ratio),u_is_halo:new u.aH(y,r.u_is_halo),u_translation:new u.aM(y,r.u_translation),u_pitched_scale:new u.aI(y,r.u_pitched_scale)}),background:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_opacity:new u.aI(y,r.u_opacity),u_color:new u.aN(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_opacity:new u.aI(y,r.u_opacity),u_image:new u.aH(y,r.u_image),u_pattern_tl_a:new u.aM(y,r.u_pattern_tl_a),u_pattern_br_a:new u.aM(y,r.u_pattern_br_a),u_pattern_tl_b:new u.aM(y,r.u_pattern_tl_b),u_pattern_br_b:new u.aM(y,r.u_pattern_br_b),u_texsize:new u.aM(y,r.u_texsize),u_mix:new u.aI(y,r.u_mix),u_pattern_size_a:new u.aM(y,r.u_pattern_size_a),u_pattern_size_b:new u.aM(y,r.u_pattern_size_b),u_scale_a:new u.aI(y,r.u_scale_a),u_scale_b:new u.aI(y,r.u_scale_b),u_pixel_coord_upper:new u.aM(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aM(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_texture:new u.aH(y,r.u_texture),u_ele_delta:new u.aI(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_ele_delta:new u.aI(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new u.aJ(y,r.u_matrix),u_texture:new u.aH(y,r.u_texture),u_terrain_coords_id:new u.aI(y,r.u_terrain_coords_id),u_ele_delta:new u.aI(y,r.u_ele_delta)})};class hl{constructor(r,l,d){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const dl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _u{constructor(r,l,d,g){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const g=l.attributes[this.attributes[d].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,l,d){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],T=l.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[dl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ws=new WeakMap;function xi(y){var r;if(Ws.has(y))return Ws.get(y);{const l=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ws.set(y,l),l}}class Ln{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xu extends Ln{getDefault(){return u.aP.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ea extends Ln{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Hs extends Ln{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Xh extends Ln{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Zs extends Ln{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Kh extends Ln{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class qs extends Ln{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Yh extends Ln{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class fc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class Jh extends Ln{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class pc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class fl extends Ln{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class pl extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class mc extends Ln{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class gc extends Ln{getDefault(){return u.aP.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class yc extends Ln{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ps extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class wu extends Ln{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Qh extends Ln{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class ed extends Ln{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class vc extends Ln{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Ta extends Ln{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ml extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class gl extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Xs extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class _c extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Hi extends Ln{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class xc extends Ln{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const d=this.gl;xi(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class wc extends Ln{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class bu extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class bc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Xo extends Ln{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class Eo extends Xo{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ks extends Xo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Su extends Xo{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Eu{constructor(r,l,d,g,_){this.context=r,this.width=l,this.height=d;const T=r.gl,A=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Eo(r,A),g)this.depthAttachment=_?new Su(r,A):new Ks(r,A);else if(_)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class Xn{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}Xn.Replace=[1,0],Xn.disabled=new Xn(Xn.Replace,u.aP.transparent,[!1,!1,!1,!1]),Xn.unblended=new Xn(Xn.Replace,u.aP.transparent,[!0,!0,!0,!0]),Xn.alphaBlended=new Xn([1,771],u.aP.transparent,[!0,!0,!0,!0]);class yl{constructor(r){var l,d;if(this.gl=r,this.clearColor=new xu(this),this.clearDepth=new Ea(this),this.clearStencil=new Hs(this),this.colorMask=new Xh(this),this.depthMask=new Zs(this),this.stencilMask=new Kh(this),this.stencilFunc=new qs(this),this.stencilOp=new Yh(this),this.stencilTest=new fc(this),this.depthRange=new Jh(this),this.depthTest=new pc(this),this.depthFunc=new fl(this),this.blend=new pl(this),this.blendFunc=new mc(this),this.blendColor=new gc(this),this.blendEquation=new yc(this),this.cullFace=new ps(this),this.cullFaceSide=new wu(this),this.frontFace=new Qh(this),this.program=new ed(this),this.activeTexture=new vc(this),this.viewport=new Ta(this),this.bindFramebuffer=new ml(this),this.bindRenderbuffer=new gl(this),this.bindTexture=new Xs(this),this.bindVertexBuffer=new _c(this),this.bindElementBuffer=new Hi(this),this.bindVertexArray=new xc(this),this.pixelStoreUnpack=new wc(this),this.pixelStoreUnpackPremultiplyAlpha=new bu(this),this.pixelStoreUnpackFlipY=new bc(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),xi(r)){this.HALF_FLOAT=r.HALF_FLOAT;const g=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:g==null?void 0:g.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const g=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new hl(this,r,l)}createVertexBuffer(r,l,d){return new _u(this,r,l,d)}createRenderbuffer(r,l,d){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),_}createFramebuffer(r,l,d,g){return new Eu(this,r,l,d,g)}clear({color:r,depth:l,stencil:d}){const g=this.gl;let _=0;r&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),g.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aE(r.blendFunction,Xn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return xi(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return xi(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class wn{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}wn.ReadOnly=!1,wn.ReadWrite=!0,wn.disabled=new wn(519,wn.ReadOnly,[0,1]);const Ia=7680;class Qn{constructor(r,l,d,g,_,T){this.test=r,this.ref=l,this.mask=d,this.fail=g,this.depthFail=_,this.pass=T}}Qn.disabled=new Qn({func:519,mask:0},0,0,Ia,Ia,Ia);class Gn{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let ho;function Sc(y,r,l,d,g){const _=y.context,T=_.gl,A=y.useProgram("collisionBox"),z=[];let $=0,te=0;for(let Ge=0;Ge<d.length;Ge++){const Ke=d[Ge],Re=r.getTile(Ke).getBucket(l);if(!Re)continue;const Ye=g?Re.textCollisionBox:Re.iconCollisionBox,nt=Re.collisionCircleArray;if(nt.length>0){const st=u.F();u.aQ(st,Re.placementInvProjMatrix,y.transform.glCoordMatrix),u.aQ(st,st,Re.placementViewportMatrix),z.push({circleArray:nt,circleOffset:te,transform:Ke.posMatrix,invTransform:st,coord:Ke}),$+=nt.length/4,te=$}Ye&&A.draw(_,T.LINES,wn.disabled,Qn.disabled,y.colorModeForRenderPass(),Gn.disabled,{u_matrix:Ke.posMatrix,u_pixel_extrude_scale:[1/(Q=y.transform).width,1/Q.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke),l.id,Ye.layoutVertexBuffer,Ye.indexBuffer,Ye.segments,null,y.transform.zoom,null,null,Ye.collisionVertexBuffer)}var Q;if(!g||!z.length)return;const me=y.useProgram("collisionCircle"),be=new u.aR;be.resize(4*$),be._trim();let Ce=0;for(const Ge of z)for(let Ke=0;Ke<Ge.circleArray.length/4;Ke++){const Re=4*Ke,Ye=Ge.circleArray[Re+0],nt=Ge.circleArray[Re+1],st=Ge.circleArray[Re+2],mt=Ge.circleArray[Re+3];be.emplace(Ce++,Ye,nt,st,mt,0),be.emplace(Ce++,Ye,nt,st,mt,1),be.emplace(Ce++,Ye,nt,st,mt,2),be.emplace(Ce++,Ye,nt,st,mt,3)}(!ho||ho.length<2*$)&&(ho=function(Ge){const Ke=2*Ge,Re=new u.aT;Re.resize(Ke),Re._trim();for(let Ye=0;Ye<Ke;Ye++){const nt=6*Ye;Re.uint16[nt+0]=4*Ye+0,Re.uint16[nt+1]=4*Ye+1,Re.uint16[nt+2]=4*Ye+2,Re.uint16[nt+3]=4*Ye+2,Re.uint16[nt+4]=4*Ye+3,Re.uint16[nt+5]=4*Ye+0}return Re}($));const Le=_.createIndexBuffer(ho,!0),Ae=_.createVertexBuffer(be,u.aS.members,!0);for(const Ge of z){const Ke=lc(Ge.transform,Ge.invTransform,y.transform);me.draw(_,T.TRIANGLES,wn.disabled,Qn.disabled,y.colorModeForRenderPass(),Gn.disabled,Ke,y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ge.coord),l.id,Ae,Le,u.$.simpleSegment(0,2*Ge.circleOffset,Ge.circleArray.length,Ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}Ae.destroy(),Le.destroy()}Gn.disabled=new Gn(!1,1029,2305),Gn.backCCW=new Gn(!0,1029,2305);const vl=u.an(new Float32Array(16));function _l(y,r,l,d,g,_){const{horizontalAlign:T,verticalAlign:A}=u.au(y);return new u.P((-(T-.5)*r/g+d[0])*_,(-(A-.5)*l/g+d[1])*_)}function Ec(y,r,l,d,g,_){const T=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let A=d.mult(_);return l||(A=A.rotate(-g)),ir(T.add(A),r.labelPlaneMatrix,r.getElevation).point}if(l){const A=je(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(y),z=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return y.add(d.rotate(z))}return y.add(d)}function To(y,r,l,d,g,_,T,A,z,$,te,Q,me,be){const Ce=y.text.placedSymbolArray,Le=y.text.dynamicLayoutVertexArray,Ae=y.icon.dynamicLayoutVertexArray,Ge={};Le.clear();for(let Ke=0;Ke<Ce.length;Ke++){const Re=Ce.get(Ke),Ye=Re.hidden||!Re.crossTileID||y.allowVerticalPlacement&&!Re.placedOrientation?null:d[Re.crossTileID];if(Ye){const nt=new u.P(Re.anchorX,Re.anchorY),st={getElevation:be,width:g.width,height:g.height,labelPlaneMatrix:_,lineVertexArray:null,pitchWithMap:l,projection:te,projectionCache:null,tileAnchorPoint:nt,translation:Q,unwrappedTileID:me},mt=l?ir(nt,T,be):je(nt.x,nt.y,st),bt=ke(g.cameraToCenterDistance,mt.signedDistanceFromCamera);let Nt=u.ai(y.textSizeData,z,Re)*bt/u.ap;l&&(Nt*=y.tilePixelRatio/A);const{width:Ut,height:St,anchor:It,textOffset:Wt,textBoxScale:gn}=Ye,Pt=_l(It,Ut,St,Wt,gn,Nt),Rt=te.getPitchedTextCorrection(g,nt.add(new u.P(Q[0],Q[1])),me),dn=Ec(mt.point,st,r,Pt,g.angle,Rt),er=y.allowVerticalPlacement&&Re.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let En=0;En<Re.numGlyphs;En++)u.aj(Le,dn,er);$&&Re.associatedIconIndex>=0&&(Ge[Re.associatedIconIndex]={shiftedAnchor:dn,angle:er})}else rn(Re.numGlyphs,Le)}if($){Ae.clear();const Ke=y.icon.placedSymbolArray;for(let Re=0;Re<Ke.length;Re++){const Ye=Ke.get(Re);if(Ye.hidden)rn(Ye.numGlyphs,Ae);else{const nt=Ge[Re];if(nt)for(let st=0;st<Ye.numGlyphs;st++)u.aj(Ae,nt.shiftedAnchor,nt.angle);else rn(Ye.numGlyphs,Ae)}}y.icon.dynamicLayoutVertexBuffer.updateData(Ae)}y.text.dynamicLayoutVertexBuffer.updateData(Le)}function Io(y,r,l){return l.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function br(y,r,l,d,g,_,T,A,z,$,te,Q){const me=y.context,be=me.gl,Ce=y.transform,Le=ii(),Ae=A==="map",Ge=z==="map",Ke=A!=="viewport"&&l.layout.get("symbol-placement")!=="point",Re=Ae&&!Ge&&!Ke,Ye=!Ge&&Ke,nt=!l.layout.get("symbol-sort-key").isConstant();let st=!1;const mt=y.depthModeForSublayer(0,wn.ReadOnly),bt=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Nt=[],Ut=Le.getCircleRadiusCorrection(Ce);for(const St of d){const It=r.getTile(St),Wt=It.getBucket(l);if(!Wt)continue;const gn=g?Wt.text:Wt.icon;if(!gn||!gn.segments.get().length||!gn.hasVisibleVertices)continue;const Pt=gn.programConfigurations.get(l.id),Rt=g||Wt.sdfIcons,dn=g?Wt.textSizeData:Wt.iconSizeData,er=Ge||Ce.pitch!==0,En=y.useProgram(Io(Rt,g,Wt),Pt),An=u.ag(dn,Ce.zoom),tr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(St);let ai,Ao,nr,ji,Ei=[0,0],li=null;if(g)Ao=It.glyphAtlasTexture,nr=be.LINEAR,ai=It.glyphAtlasTexture.size,Wt.iconsInText&&(Ei=It.imageAtlasTexture.size,li=It.imageAtlasTexture,ji=er||y.options.rotating||y.options.zooming||dn.kind==="composite"||dn.kind==="camera"?be.LINEAR:be.NEAREST);else{const lr=l.layout.get("icon-size").constantOr(0)!==1||Wt.iconsNeedLinear;Ao=It.imageAtlasTexture,nr=Rt||y.options.rotating||y.options.zooming||lr||er?be.LINEAR:be.NEAREST,ai=It.imageAtlasTexture.size}const ui=un(It,1,y.transform.zoom),ko=Ye?St.posMatrix:vl,Fa=Dr(ko,Ge,Ae,y.transform,ui),zc=ti(ko,Ge,Ae,y.transform,ui),Il=ti(St.posMatrix,Ge,Ae,y.transform,ui),Ra=Le.translatePosition(y.transform,It,_,T),Fc=bt&&Wt.hasTextData(),md=l.layout.get("icon-text-fit")!=="none"&&Fc&&Wt.hasIconData();if(Ke){const lr=y.style.map.terrain?(gd,Ur)=>y.style.map.terrain.getElevation(St,gd,Ur):null,Pl=l.layout.get("text-rotation-alignment")==="map";le(Wt,St.posMatrix,y,g,Fa,Il,Ge,$,Pl,Le,St.toUnwrapped(),Ce.width,Ce.height,Ra,lr)}const Kr=St.posMatrix,Mo=g&&bt||md,ra=Ke||Mo?vl:Fa,Cl=zc,ci=Rt&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let hi;hi=Rt?Wt.iconsInText?Zh(dn.kind,An,Re,Ge,Ke,Mo,y,Kr,ra,Cl,Ra,ai,Ei,Ut):hc(dn.kind,An,Re,Ge,Ke,Mo,y,Kr,ra,Cl,Ra,g,ai,!0,Ut):cc(dn.kind,An,Re,Ge,Ke,Mo,y,Kr,ra,Cl,Ra,g,ai,Ut);const Hr={program:En,buffers:gn,uniformValues:hi,atlasTexture:Ao,atlasTextureIcon:li,atlasInterpolation:nr,atlasInterpolationIcon:ji,isSDF:Rt,hasHalo:ci};if(nt&&Wt.canOverlap){st=!0;const lr=gn.segments.get();for(const Pl of lr)Nt.push({segments:new u.$([Pl]),sortKey:Pl.sortKey,state:Hr,terrainData:tr})}else Nt.push({segments:gn.segments,sortKey:0,state:Hr,terrainData:tr})}st&&Nt.sort((St,It)=>St.sortKey-It.sortKey);for(const St of Nt){const It=St.state;if(me.activeTexture.set(be.TEXTURE0),It.atlasTexture.bind(It.atlasInterpolation,be.CLAMP_TO_EDGE),It.atlasTextureIcon&&(me.activeTexture.set(be.TEXTURE1),It.atlasTextureIcon&&It.atlasTextureIcon.bind(It.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),It.isSDF){const Wt=It.uniformValues;It.hasHalo&&(Wt.u_is_halo=1,fo(It.buffers,St.segments,l,y,It.program,mt,te,Q,Wt,St.terrainData)),Wt.u_is_halo=0}fo(It.buffers,St.segments,l,y,It.program,mt,te,Q,It.uniformValues,St.terrainData)}}function fo(y,r,l,d,g,_,T,A,z,$){const te=d.context;g.draw(te,te.gl.TRIANGLES,_,T,A,Gn.disabled,z,$,l.id,y.layoutVertexBuffer,y.indexBuffer,r,l.paint,d.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function po(y,r,l,d,g){if(!l||!d||!d.imageAtlas)return;const _=d.imageAtlas.patternPositions;let T=_[l.to.toString()],A=_[l.from.toString()];if(!T&&A&&(T=A),!A&&T&&(A=T),!T||!A){const z=g.getPaintProperty(r);T=_[z],A=_[z]}T&&A&&y.setConstantPatternPositions(T,A)}function Co(y,r,l,d,g,_,T){const A=y.context.gl,z="fill-pattern",$=l.paint.get(z),te=$&&$.constantOr(1),Q=l.getCrossfadeParameters();let me,be,Ce,Le,Ae;T?(be=te&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",me=A.LINES):(be=te?"fillPattern":"fill",me=A.TRIANGLES);const Ge=$.constantOr(null);for(const Ke of d){const Re=r.getTile(Ke);if(te&&!Re.patternsLoaded())continue;const Ye=Re.getBucket(l);if(!Ye)continue;const nt=Ye.programConfigurations.get(l.id),st=y.useProgram(be,nt),mt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);te&&(y.context.activeTexture.set(A.TEXTURE0),Re.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),nt.updatePaintBuffers(Q)),po(nt,z,Ge,Re,l);const bt=mt?Ke:null,Nt=y.translatePosMatrix(bt?bt.posMatrix:Ke.posMatrix,Re,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(T){Le=Ye.indexBuffer2,Ae=Ye.segments2;const Ut=[A.drawingBufferWidth,A.drawingBufferHeight];Ce=be==="fillOutlinePattern"&&te?$s(Nt,y,Q,Re,Ut):ll(Nt,Ut)}else Le=Ye.indexBuffer,Ae=Ye.segments,Ce=te?ba(Nt,y,Q,Re):al(Nt);st.draw(y.context,me,g,y.stencilModeForClipping(Ke),_,Gn.disabled,Ce,mt,l.id,Ye.layoutVertexBuffer,Le,Ae,l.paint,y.transform.zoom,nt)}}function si(y,r,l,d,g,_,T){const A=y.context,z=A.gl,$="fill-extrusion-pattern",te=l.paint.get($),Q=te.constantOr(1),me=l.getCrossfadeParameters(),be=l.paint.get("fill-extrusion-opacity"),Ce=te.constantOr(null);for(const Le of d){const Ae=r.getTile(Le),Ge=Ae.getBucket(l);if(!Ge)continue;const Ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Le),Re=Ge.programConfigurations.get(l.id),Ye=y.useProgram(Q?"fillExtrusionPattern":"fillExtrusion",Re);Q&&(y.context.activeTexture.set(z.TEXTURE0),Ae.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Re.updatePaintBuffers(me)),po(Re,$,Ce,Ae,l);const nt=y.translatePosMatrix(Le.posMatrix,Ae,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),st=l.paint.get("fill-extrusion-vertical-gradient"),mt=Q?fu(nt,y,st,be,Le,me,Ae):wa(nt,y,st,be);Ye.draw(A,A.gl.TRIANGLES,g,_,T,Gn.backCCW,mt,Ke,l.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,l.paint,y.transform.zoom,Re,y.style.map.terrain&&Ge.centroidVertexBuffer)}}function Ca(y,r,l,d,g,_,T){const A=y.context,z=A.gl,$=l.fbo;if(!$)return;const te=y.useProgram("hillshade"),Q=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,$.colorAttachment.get()),te.draw(A,z.TRIANGLES,g,_,T,Gn.disabled,((me,be,Ce,Le)=>{const Ae=Ce.paint.get("hillshade-shadow-color"),Ge=Ce.paint.get("hillshade-highlight-color"),Ke=Ce.paint.get("hillshade-accent-color");let Re=Ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=me.transform.angle);const Ye=!me.options.moving;return{u_matrix:Le?Le.posMatrix:me.transform.calculatePosMatrix(be.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:ul(0,be.tileID),u_light:[Ce.paint.get("hillshade-exaggeration"),Re],u_shadow:Ae,u_highlight:Ge,u_accent:Ke}})(y,l,d,Q?r:null),Q,d.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Pa(y,r,l,d,g,_){const T=y.context,A=T.gl,z=r.dem;if(z&&z.data){const $=z.dim,te=z.stride,Q=z.getPixels();if(T.activeTexture.set(A.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(te),r.demTexture){const be=r.demTexture;be.update(Q,{premultiply:!1}),be.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else r.demTexture=new Z(T,Q,A.RGBA,{premultiply:!1}),r.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);T.activeTexture.set(A.TEXTURE0);let me=r.fbo;if(!me){const be=new Z(T,{width:$,height:$,data:null},A.RGBA);be.bind(A.LINEAR,A.CLAMP_TO_EDGE),me=r.fbo=T.createFramebuffer($,$,!0,!1),me.colorAttachment.set(be.texture)}T.bindFramebuffer.set(me.framebuffer),T.viewport.set([0,0,$,$]),y.useProgram("hillshadePrepare").draw(T,A.TRIANGLES,d,g,_,Gn.disabled,((be,Ce)=>{const Le=Ce.stride,Ae=u.F();return u.aO(Ae,0,u.W,-u.W,0,0,1),u.H(Ae,Ae,[0,-u.W,0]),{u_matrix:Ae,u_image:1,u_dimension:[Le,Le],u_zoom:be.overscaledZ,u_unpack:Ce.getUnpackVector()}})(r.tileID,z),null,l.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function wi(y,r,l,d,g,_){const T=d.paint.get("raster-fade-duration");if(!_&&T>0){const A=b.now(),z=(A-y.timeAdded)/T,$=r?(A-r.timeAdded)/T:-1,te=l.getSource(),Q=g.coveringZoomLevel({tileSize:te.tileSize,roundZoom:te.roundZoom}),me=!r||Math.abs(r.tileID.overscaledZ-Q)>Math.abs(y.tileID.overscaledZ-Q),be=me&&y.refreshedUponExpiration?1:u.ac(me?z:1-$,0,1);return y.refreshedUponExpiration&&z>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-be}:{opacity:be,mix:0}}return{opacity:1,mix:0}}const Oi=new u.aP(1,0,0,1),Aa=new u.aP(0,1,0,1),ms=new u.aP(0,0,1,1),Ko=new u.aP(1,0,1,1),ka=new u.aP(0,1,1,1);function xl(y,r,l,d){mo(y,0,r+l/2,y.transform.width,l,d)}function Yo(y,r,l,d){mo(y,r-l/2,0,l,y.transform.height,d)}function mo(y,r,l,d,g,_){const T=y.context,A=T.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*y.pixelRatio,l*y.pixelRatio,d*y.pixelRatio,g*y.pixelRatio),T.clear({color:_}),A.disable(A.SCISSOR_TEST)}function Po(y,r,l){const d=y.context,g=d.gl,_=l.posMatrix,T=y.useProgram("debug"),A=wn.disabled,z=Qn.disabled,$=y.colorModeForRenderPass(),te="$debug",Q=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);d.activeTexture.set(g.TEXTURE0);const me=r.getTileByID(l.key).latestRawTileData,be=Math.floor((me&&me.byteLength||0)/1024),Ce=r.getTile(l).tileSize,Le=512/Math.min(Ce,512)*(l.overscaledZ/y.transform.zoom)*.5;let Ae=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Ae+=` => ${l.overscaledZ}`),function(Ge,Ke){Ge.initDebugOverlayCanvas();const Re=Ge.debugOverlayCanvas,Ye=Ge.context.gl,nt=Ge.debugOverlayCanvas.getContext("2d");nt.clearRect(0,0,Re.width,Re.height),nt.shadowColor="white",nt.shadowBlur=2,nt.lineWidth=1.5,nt.strokeStyle="white",nt.textBaseline="top",nt.font="bold 36px Open Sans, sans-serif",nt.fillText(Ke,5,5),nt.strokeText(Ke,5,5),Ge.debugOverlayTexture.update(Re),Ge.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(y,`${Ae} ${be}kB`),T.draw(d,g.TRIANGLES,A,z,Xn.alphaBlended,Gn.disabled,Vs(_,u.aP.transparent,Le),null,te,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),T.draw(d,g.LINE_STRIP,A,z,$,Gn.disabled,Vs(_,u.aP.red),Q,te,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Ma(y,r,l){const d=y.context,g=d.gl,_=y.colorModeForRenderPass(),T=new wn(g.LEQUAL,wn.ReadWrite,y.depthRangeFor3D),A=y.useProgram("terrain"),z=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,y.width,y.height]);for(const $ of l){const te=y.renderToTexture.getTexture($),Q=r.getTerrainData($.tileID);d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,te.texture);const me={u_matrix:y.transform.calculatePosMatrix($.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};A.draw(d,g.TRIANGLES,T,Qn.disabled,_,Gn.backCCW,me,Q,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class Rn{constructor(r,l){this.context=new yl(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new sr}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,l=new u.aW;l.emplaceBack(0,0),l.emplaceBack(u.W,0),l.emplaceBack(0,u.W),l.emplaceBack(u.W,u.W),this.tileExtentBuffer=r.createVertexBuffer(l,co.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const d=new u.aW;d.emplaceBack(0,0),d.emplaceBack(u.W,0),d.emplaceBack(0,u.W),d.emplaceBack(u.W,u.W),this.debugBuffer=r.createVertexBuffer(d,co.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=r.createVertexBuffer(g,Se.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const _=new u.aW;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,co.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const T=new u.aX;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const A=new u.aY;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(A);const z=this.context.gl;this.stencilClearMode=new Qn({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=u.F();u.aO(d,0,this.width,this.height,0,0,1),u.J(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,wn.disabled,this.stencilClearMode,Xn.disabled,Gn.disabled,uc(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,g=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(Xn.disabled),d.setDepthMode(wn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of l){const A=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(d,g.TRIANGLES,wn.disabled,new Qn({func:g.ALWAYS,mask:0},A,255,g.KEEP,g.KEEP,g.REPLACE),Xn.disabled,Gn.disabled,uc(T.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new Qn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new Qn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((T,A)=>A.overscaledZ-T.overscaledZ),g=d[d.length-1].overscaledZ,_=d[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let A=0;A<_;A++)T[A+g]=new Qn({func:l.GEQUAL,mask:255},A+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=_,[T,d]}return[{[g]:Qn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Xn([r.CONSTANT_COLOR,r.ONE],new u.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xn.unblended:Xn.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return wn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new wn(d||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,_={},T={},A={};for(const z in g){const $=g[z];$.used&&$.prepare(this.context),_[z]=$.getVisibleCoordinates(),T[z]=_[z].slice().reverse(),A[z]=$.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<d.length;z++)if(this.style._layers[d[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of d){const $=this.style._layers[z];if(!$.hasOffscreenPass()||$.isHidden(this.transform.zoom))continue;const te=T[$.source];($.type==="custom"||te.length)&&this.renderLayer(this,g[$.source],$,te)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.aP.black:u.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[d[this.currentLayer]],$=g[z.source],te=_[z.source];this._renderTileClippingMasks(z,te),this.renderLayer(this,$,z,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const z=this.style._layers[d[this.currentLayer]],$=g[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const te=(z.type==="symbol"?A:T)[z.source];this._renderTileClippingMasks(z,_[z.source]),this.renderLayer(this,$,z,te)}if(this.options.showTileBoundaries){const z=function($,te){let Q=null;const me=Object.values($._layers).flatMap(Ae=>Ae.source&&!Ae.isHidden(te)?[$.sourceCaches[Ae.source]]:[]),be=me.filter(Ae=>Ae.getSource().type==="vector"),Ce=me.filter(Ae=>Ae.getSource().type!=="vector"),Le=Ae=>{(!Q||Q.getSource().maxzoom<Ae.getSource().maxzoom)&&(Q=Ae)};return be.forEach(Ae=>Le(Ae)),Q||Ce.forEach(Ae=>Le(Ae)),Q}(this.style,this.transform.zoom);z&&function($,te,Q){for(let me=0;me<Q.length;me++)Po($,te,Q[me])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const $=z.transform.padding;xl(z,z.transform.height-($.top||0),3,Oi),xl(z,$.bottom||0,3,Aa),Yo(z,$.left||0,3,ms),Yo(z,z.transform.width-($.right||0),3,Ko);const te=z.transform.centerPoint;(function(Q,me,be,Ce){mo(Q,me-1,be-10,2,20,Ce),mo(Q,me-10,be-1,20,2,Ce)})(z,te.x,z.transform.height-te.y,ka)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,d=this.transform.projMatrix;let g=this.terrainFacilitator.dirty;g||(g=r?!u.aZ(l,d):!u.a_(l,d)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.a$(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,T){const A=_.context,z=A.gl,$=Xn.unblended,te=new wn(z.LEQUAL,wn.ReadWrite,[0,1]),Q=T.getTerrainMesh(),me=T.sourceCache.getRenderableTiles(),be=_.useProgram("terrainDepth");A.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),A.clear({color:u.aP.transparent,depth:1});for(const Ce of me){const Le=T.getTerrainData(Ce.tileID),Ae={u_matrix:_.transform.calculatePosMatrix(Ce.tileID.toUnwrapped()),u_ele_delta:T.getMeshFrameDelta(_.transform.zoom)};be.draw(A,z.TRIANGLES,te,Qn.disabled,$,Gn.backCCW,Ae,Le,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,T){const A=_.context,z=A.gl,$=Xn.unblended,te=new wn(z.LEQUAL,wn.ReadWrite,[0,1]),Q=T.getTerrainMesh(),me=T.getCoordsTexture(),be=T.sourceCache.getRenderableTiles(),Ce=_.useProgram("terrainCoords");A.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),A.clear({color:u.aP.transparent,depth:1}),T.coordsIndex=[];for(const Le of be){const Ae=T.getTerrainData(Le.tileID);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,me.texture);const Ge={u_matrix:_.transform.calculatePosMatrix(Le.tileID.toUnwrapped()),u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(_.transform.zoom)};Ce.draw(A,z.TRIANGLES,te,Qn.disabled,$,Gn.backCCW,Ge,Ae,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),T.coordsIndex.push(Le.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(r,l,d,g){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(g||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(_,T,A,z,$){if(_.renderPass!=="translucent")return;const te=Qn.disabled,Q=_.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(me,be,Ce,Le,Ae,Ge,Ke,Re,Ye){const nt=be.transform,st=ii(),mt=Ae==="map",bt=Ge==="map";for(const Nt of me){const Ut=Le.getTile(Nt),St=Ut.getBucket(Ce);if(!St||!St.text||!St.text.segments.get().length)continue;const It=u.ag(St.textSizeData,nt.zoom),Wt=un(Ut,1,be.transform.zoom),gn=Dr(Nt.posMatrix,bt,mt,be.transform,Wt),Pt=Ce.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(It){const Rt=Math.pow(2,nt.zoom-Ut.tileID.overscaledZ),dn=be.style.map.terrain?(En,An)=>be.style.map.terrain.getElevation(Nt,En,An):null,er=st.translatePosition(nt,Ut,Ke,Re);To(St,mt,bt,Ye,nt,gn,Nt.posMatrix,Rt,It,Pt,st,er,Nt.toUnwrapped(),dn)}}}(z,_,A,T,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),$),A.paint.get("icon-opacity").constantOr(1)!==0&&br(_,T,A,z,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),te,Q),A.paint.get("text-opacity").constantOr(1)!==0&&br(_,T,A,z,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),te,Q),T.map.showCollisionBoxes&&(Sc(_,T,A,z,!0),Sc(_,T,A,z,!1))})(r,l,d,g,this.style.placement.variableOffsets);break;case"circle":(function(_,T,A,z){if(_.renderPass!=="translucent")return;const $=A.paint.get("circle-opacity"),te=A.paint.get("circle-stroke-width"),Q=A.paint.get("circle-stroke-opacity"),me=!A.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(te.constantOr(1)===0||Q.constantOr(1)===0))return;const be=_.context,Ce=be.gl,Le=_.depthModeForSublayer(0,wn.ReadOnly),Ae=Qn.disabled,Ge=_.colorModeForRenderPass(),Ke=[];for(let Re=0;Re<z.length;Re++){const Ye=z[Re],nt=T.getTile(Ye),st=nt.getBucket(A);if(!st)continue;const mt=st.programConfigurations.get(A.id),bt=_.useProgram("circle",mt),Nt=st.layoutVertexBuffer,Ut=st.indexBuffer,St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ye),It={programConfiguration:mt,program:bt,layoutVertexBuffer:Nt,indexBuffer:Ut,uniformValues:pu(_,Ye,nt,A),terrainData:St};if(me){const Wt=st.segments.get();for(const gn of Wt)Ke.push({segments:new u.$([gn]),sortKey:gn.sortKey,state:It})}else Ke.push({segments:st.segments,sortKey:0,state:It})}me&&Ke.sort((Re,Ye)=>Re.sortKey-Ye.sortKey);for(const Re of Ke){const{programConfiguration:Ye,program:nt,layoutVertexBuffer:st,indexBuffer:mt,uniformValues:bt,terrainData:Nt}=Re.state;nt.draw(be,Ce.TRIANGLES,Le,Ae,Ge,Gn.disabled,bt,Nt,A.id,st,mt,Re.segments,A.paint,_.transform.zoom,Ye)}})(r,l,d,g);break;case"heatmap":(function(_,T,A,z){if(A.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const $=_.context,te=$.gl,Q=Qn.disabled,me=new Xn([te.ONE,te.ONE],u.aP.transparent,[!0,!0,!0,!0]);(function(be,Ce,Le){const Ae=be.gl;be.activeTexture.set(Ae.TEXTURE1),be.viewport.set([0,0,Ce.width/4,Ce.height/4]);let Ge=Le.heatmapFbo;if(Ge)Ae.bindTexture(Ae.TEXTURE_2D,Ge.colorAttachment.get()),be.bindFramebuffer.set(Ge.framebuffer);else{const Ke=Ae.createTexture();Ae.bindTexture(Ae.TEXTURE_2D,Ke),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR),Ge=Le.heatmapFbo=be.createFramebuffer(Ce.width/4,Ce.height/4,!1,!1),function(Re,Ye,nt,st){var mt,bt;const Nt=Re.gl,Ut=(mt=Re.HALF_FLOAT)!==null&&mt!==void 0?mt:Nt.UNSIGNED_BYTE,St=(bt=Re.RGBA16F)!==null&&bt!==void 0?bt:Nt.RGBA;Nt.texImage2D(Nt.TEXTURE_2D,0,St,Ye.width/4,Ye.height/4,0,Nt.RGBA,Ut,null),st.colorAttachment.set(nt)}(be,Ce,Ke,Ge)}})($,_,A),$.clear({color:u.aP.transparent});for(let be=0;be<z.length;be++){const Ce=z[be];if(T.hasRenderableParent(Ce))continue;const Le=T.getTile(Ce),Ae=Le.getBucket(A);if(!Ae)continue;const Ge=Ae.programConfigurations.get(A.id),Ke=_.useProgram("heatmap",Ge),{zoom:Re}=_.transform;Ke.draw($,te.TRIANGLES,wn.disabled,Q,me,Gn.disabled,Ri(Ce.posMatrix,Le,Re,A.paint.get("heatmap-intensity")),null,A.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,A.paint,_.transform.zoom,Ge)}$.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function($,te){const Q=$.context,me=Q.gl,be=te.heatmapFbo;if(!be)return;Q.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_2D,be.colorAttachment.get()),Q.activeTexture.set(me.TEXTURE1);let Ce=te.colorRampTexture;Ce||(Ce=te.colorRampTexture=new Z(Q,te.colorRamp,me.RGBA)),Ce.bind(me.LINEAR,me.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(Q,me.TRIANGLES,wn.disabled,Qn.disabled,$.colorModeForRenderPass(),Gn.disabled,((Le,Ae,Ge,Ke)=>{const Re=u.F();u.aO(Re,0,Le.width,Le.height,0,0,1);const Ye=Le.context.gl;return{u_matrix:Re,u_world:[Ye.drawingBufferWidth,Ye.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ae.paint.get("heatmap-opacity")}})($,te),null,te.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,te.paint,$.transform.zoom)}(_,A))})(r,l,d,g);break;case"line":(function(_,T,A,z){if(_.renderPass!=="translucent")return;const $=A.paint.get("line-opacity"),te=A.paint.get("line-width");if($.constantOr(1)===0||te.constantOr(1)===0)return;const Q=_.depthModeForSublayer(0,wn.ReadOnly),me=_.colorModeForRenderPass(),be=A.paint.get("line-dasharray"),Ce=A.paint.get("line-pattern"),Le=Ce.constantOr(1),Ae=A.paint.get("line-gradient"),Ge=A.getCrossfadeParameters(),Ke=Le?"linePattern":be?"lineSDF":Ae?"lineGradient":"line",Re=_.context,Ye=Re.gl;let nt=!0;for(const st of z){const mt=T.getTile(st);if(Le&&!mt.patternsLoaded())continue;const bt=mt.getBucket(A);if(!bt)continue;const Nt=bt.programConfigurations.get(A.id),Ut=_.context.program.get(),St=_.useProgram(Ke,Nt),It=nt||St.program!==Ut,Wt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(st),gn=Ce.constantOr(null);if(gn&&mt.imageAtlas){const dn=mt.imageAtlas,er=dn.patternPositions[gn.to.toString()],En=dn.patternPositions[gn.from.toString()];er&&En&&Nt.setConstantPatternPositions(er,En)}const Pt=Wt?st:null,Rt=Le?mu(_,mt,A,Ge,Pt):be?Sa(_,mt,A,be,Ge,Pt):Ae?_i(_,mt,A,bt.lineClipsArray.length,Pt):Xr(_,mt,A,Pt);if(Le)Re.activeTexture.set(Ye.TEXTURE0),mt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),Nt.updatePaintBuffers(Ge);else if(be&&(It||_.lineAtlas.dirty))Re.activeTexture.set(Ye.TEXTURE0),_.lineAtlas.bind(Re);else if(Ae){const dn=bt.gradients[A.id];let er=dn.texture;if(A.gradientVersion!==dn.version){let En=256;if(A.stepInterpolant){const An=T.getSource().maxzoom,tr=st.canonical.z===An?Math.ceil(1<<_.transform.maxZoom-st.canonical.z):1;En=u.ac(u.aU(bt.maxLineLength/u.W*1024*tr),256,Re.maxTextureSize)}dn.gradient=u.aV({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:En,image:dn.gradient||void 0,clips:bt.lineClipsArray}),dn.texture?dn.texture.update(dn.gradient):dn.texture=new Z(Re,dn.gradient,Ye.RGBA),dn.version=A.gradientVersion,er=dn.texture}Re.activeTexture.set(Ye.TEXTURE0),er.bind(A.stepInterpolant?Ye.NEAREST:Ye.LINEAR,Ye.CLAMP_TO_EDGE)}St.draw(Re,Ye.TRIANGLES,Q,_.stencilModeForClipping(st),me,Gn.disabled,Rt,Wt,A.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,A.paint,_.transform.zoom,Nt,bt.layoutVertexBuffer2),nt=!1}})(r,l,d,g);break;case"fill":(function(_,T,A,z){const $=A.paint.get("fill-color"),te=A.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const Q=_.colorModeForRenderPass(),me=A.paint.get("fill-pattern"),be=_.opaquePassEnabledForLayer()&&!me.constantOr(1)&&$.constantOr(u.aP.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===be){const Ce=_.depthModeForSublayer(1,_.renderPass==="opaque"?wn.ReadWrite:wn.ReadOnly);Co(_,T,A,z,Ce,Q,!1)}if(_.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Ce=_.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,wn.ReadOnly);Co(_,T,A,z,Ce,Q,!0)}})(r,l,d,g);break;case"fill-extrusion":(function(_,T,A,z){const $=A.paint.get("fill-extrusion-opacity");if($!==0&&_.renderPass==="translucent"){const te=new wn(_.context.gl.LEQUAL,wn.ReadWrite,_.depthRangeFor3D);if($!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))si(_,T,A,z,te,Qn.disabled,Xn.disabled),si(_,T,A,z,te,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const Q=_.colorModeForRenderPass();si(_,T,A,z,te,Qn.disabled,Q)}}})(r,l,d,g);break;case"hillshade":(function(_,T,A,z){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const $=_.context,te=_.depthModeForSublayer(0,wn.ReadOnly),Q=_.colorModeForRenderPass(),[me,be]=_.renderPass==="translucent"?_.stencilConfigForOverlap(z):[{},z];for(const Ce of be){const Le=T.getTile(Ce);Le.needsHillshadePrepare!==void 0&&Le.needsHillshadePrepare&&_.renderPass==="offscreen"?Pa(_,Le,A,te,Qn.disabled,Q):_.renderPass==="translucent"&&Ca(_,Ce,Le,A,te,me[Ce.overscaledZ],Q)}$.viewport.set([0,0,_.width,_.height])})(r,l,d,g);break;case"raster":(function(_,T,A,z){if(_.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!z.length)return;const $=_.context,te=$.gl,Q=T.getSource(),me=_.useProgram("raster"),be=_.colorModeForRenderPass(),[Ce,Le]=Q instanceof N?[{},z]:_.stencilConfigForOverlap(z),Ae=Le[Le.length-1].overscaledZ,Ge=!_.options.moving;for(const Ke of Le){const Re=_.depthModeForSublayer(Ke.overscaledZ-Ae,A.paint.get("raster-opacity")===1?wn.ReadWrite:wn.ReadOnly,te.LESS),Ye=T.getTile(Ke);Ye.registerFadeDuration(A.paint.get("raster-fade-duration"));const nt=T.findLoadedParent(Ke,0),st=T.findLoadedSibling(Ke),mt=wi(Ye,nt||st||null,T,A,_.transform,_.style.map.terrain);let bt,Nt;const Ut=A.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;$.activeTexture.set(te.TEXTURE0),Ye.texture.bind(Ut,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(te.TEXTURE1),nt?(nt.texture.bind(Ut,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),bt=Math.pow(2,nt.tileID.overscaledZ-Ye.tileID.overscaledZ),Nt=[Ye.tileID.canonical.x*bt%1,Ye.tileID.canonical.y*bt%1]):Ye.texture.bind(Ut,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);const St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ke),It=St?Ke:null,Wt=It?It.posMatrix:_.transform.calculatePosMatrix(Ke.toUnwrapped(),Ge),gn=Gs(Wt,Nt||[0,0],bt||1,mt,A);Q instanceof N?me.draw($,te.TRIANGLES,Re,Qn.disabled,be,Gn.disabled,gn,St,A.id,Q.boundsBuffer,_.quadTriangleIndexBuffer,Q.boundsSegments):me.draw($,te.TRIANGLES,Re,Ce[Ke.overscaledZ],be,Gn.disabled,gn,St,A.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,l,d,g);break;case"background":(function(_,T,A,z){const $=A.paint.get("background-color"),te=A.paint.get("background-opacity");if(te===0)return;const Q=_.context,me=Q.gl,be=_.transform,Ce=be.tileSize,Le=A.paint.get("background-pattern");if(_.isPatternMissing(Le))return;const Ae=!Le&&$.a===1&&te===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ae)return;const Ge=Qn.disabled,Ke=_.depthModeForSublayer(0,Ae==="opaque"?wn.ReadWrite:wn.ReadOnly),Re=_.colorModeForRenderPass(),Ye=_.useProgram(Le?"backgroundPattern":"background"),nt=z||be.coveringTiles({tileSize:Ce,terrain:_.style.map.terrain});Le&&(Q.activeTexture.set(me.TEXTURE0),_.imageManager.bind(_.context));const st=A.getCrossfadeParameters();for(const mt of nt){const bt=z?mt.posMatrix:_.transform.calculatePosMatrix(mt.toUnwrapped()),Nt=Le?dc(bt,te,_,Le,{tileID:mt,tileSize:Ce},st):qh(bt,te,$),Ut=_.style.map.terrain&&_.style.map.terrain.getTerrainData(mt);Ye.draw(Q,me.TRIANGLES,Ke,Ge,Re,Gn.disabled,Nt,Ut,A.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,d,g);break;case"custom":(function(_,T,A){const z=_.context,$=A.implementation;if(_.renderPass==="offscreen"){const te=$.prerender;te&&(_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),te.call($,z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),z.setStencilMode(Qn.disabled);const te=$.renderingMode==="3d"?new wn(_.context.gl.LEQUAL,wn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,wn.ReadOnly);z.setDepthMode(te),$.render(z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState(),z.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,l,d,g,_){if(!d[0]&&!d[1])return r;const T=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(T){const $=Math.sin(T),te=Math.cos(T);d=[d[0]*te-d[1]*$,d[0]*$+d[1]*te]}const A=[_?d[0]:un(l,d[0],this.transform.zoom),_?d[1]:un(l,d[1],this.transform.zoom),0],z=new Float32Array(16);return u.H(z,r,A),z}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new du(this.context,Ns[r],l,cl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Z(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class gs{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const g=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const z=1/(A=u.af([],A,r))[3]/l*g;return u.b0(A,A,[z,z,1/A[3],z])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const z=function(me,be){var Ce=be[0],Le=be[1],Ae=be[2],Ge=Ce*Ce+Le*Le+Ae*Ae;return Ge>0&&(Ge=1/Math.sqrt(Ge)),me[0]=be[0]*Ge,me[1]=be[1]*Ge,me[2]=be[2]*Ge,me}([],function(me,be,Ce){var Le=be[0],Ae=be[1],Ge=be[2],Ke=Ce[0],Re=Ce[1],Ye=Ce[2];return me[0]=Ae*Ye-Ge*Re,me[1]=Ge*Ke-Le*Ye,me[2]=Le*Re-Ae*Ke,me}([],E([],_[A[0]],_[A[1]]),E([],_[A[2]],_[A[1]]))),$=-((te=z)[0]*(Q=_[A[1]])[0]+te[1]*Q[1]+te[2]*Q[2]);var te,Q;return z.concat($)});return new gs(_,T)}}class Ys{constructor(r,l){this.min=r,this.max=l,this.center=function(d,g,_){return d[0]=.5*g[0],d[1]=.5*g[1],d[2]=.5*g[2],d}([],function(d,g,_){return d[0]=g[0]+_[0],d[1]=g[1]+_[1],d[2]=g[2]+_[2],d}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],d=X(this.min),g=X(this.max);for(let _=0;_<l.length;_++)d[_]=l[_]?this.min[_]:this.center[_],g[_]=l[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Ys(d,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<r.planes.length;g++){const _=r.planes[g];let T=0;for(let A=0;A<l.length;A++)u.b1(_,l[A])>=0&&T++;if(T===0)return 0;T!==l.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let A=0;A<r.points.length;A++){const z=r.points[A][g]-this.min[g];_=Math.min(_,z),T=Math.max(T,z)}if(T<0||_>this.max[g]-this.min[g])return 0}return 1}}class Js{constructor(r=0,l=0,d=0,g=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=g}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=u.z.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=u.z.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=u.z.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=u.z.number(r.right,l.right,d)),this}getCenter(r,l){const d=u.ac((this.left+r-this.right)/2,0,r),g=u.ac((this.top+l-this.bottom)/2,0,l);return new u.P(d,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Js(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ys=85.051129;class wl{constructor(r,l,d,g,_){this.tileSize=512,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Js,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new wl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-u.b2(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new u.A(4);return u.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,g,_){var T=g[0],A=g[1],z=g[2],$=g[3],te=Math.sin(_),Q=Math.cos(_);d[0]=T*Q+z*te,d[1]=A*Q+$*te,d[2]=T*-te+z*Q,d[3]=A*-te+$*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new u.b3(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),_=this.pointCoordinate(new u.P(this.width,this.height)),T=this.pointCoordinate(new u.P(0,this.height)),A=Math.floor(Math.min(d.x,g.x,_.x,T.x)),z=Math.floor(Math.max(d.x,g.x,_.x,T.x)),$=1;for(let te=A-$;te<=z+$;te++)te!==0&&l.push(new u.b3(te,r))}return l}coveringTiles(r){var l,d;let g=this.coveringZoomLevel(r);const _=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),A=u.Y.fromLngLat(this.center),z=Math.pow(2,g),$=[z*T.x,z*T.y,0],te=[z*A.x,z*A.y,0],Q=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let me=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(me=g);const be=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ce=Re=>({aabb:new Ys([Re*z,0,0],[(Re+1)*z,z,0]),zoom:0,x:0,y:0,wrap:Re,fullyVisible:!1}),Le=[],Ae=[],Ge=g,Ke=r.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let Re=1;Re<=3;Re++)Le.push(Ce(-Re)),Le.push(Ce(Re));for(Le.push(Ce(0));Le.length>0;){const Re=Le.pop(),Ye=Re.x,nt=Re.y;let st=Re.fullyVisible;if(!st){const St=Re.aabb.intersects(Q);if(St===0)continue;st=St===2}const mt=r.terrain?$:te,bt=Re.aabb.distanceX(mt),Nt=Re.aabb.distanceY(mt),Ut=Math.max(Math.abs(bt),Math.abs(Nt));if(Re.zoom===Ge||Ut>be+(1<<Ge-Re.zoom)-2&&Re.zoom>=me){const St=Ge-Re.zoom,It=$[0]-.5-(Ye<<St),Wt=$[1]-.5-(nt<<St);Ae.push({tileID:new u.Q(Re.zoom===Ge?Ke:Re.zoom,Re.wrap,Re.zoom,Ye,nt),distanceSq:j([te[0]-.5-Ye,te[1]-.5-nt]),tileDistanceToCamera:Math.sqrt(It*It+Wt*Wt)})}else for(let St=0;St<4;St++){const It=(Ye<<1)+St%2,Wt=(nt<<1)+(St>>1),gn=Re.zoom+1;let Pt=Re.aabb.quadrant(St);if(r.terrain){const Rt=new u.Q(gn,Re.wrap,gn,It,Wt),dn=r.terrain.getMinMaxElevation(Rt),er=(l=dn.minElevation)!==null&&l!==void 0?l:this.elevation,En=(d=dn.maxElevation)!==null&&d!==void 0?d:this.elevation;Pt=new Ys([Pt.min[0],Pt.min[1],er],[Pt.max[0],Pt.max[1],En])}Le.push({aabb:Pt,zoom:gn,x:It,y:Wt,wrap:Re.wrap,fullyVisible:st})}}return Ae.sort((Re,Ye)=>Re.distanceSq-Ye.distanceSq).map(Re=>Re.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=u.ac(r.lat,-85.051129,ys);return new u.P(u.N(r.lng)*this.worldSize,u.O(l)*this.worldSize)}unproject(r){return new u.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,r),_=r.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-_))return;const T=d+l-_,A=Math.cos(this._pitch)*this.cameraToCenterDistance/T/u.b4(1,g.lat),z=this.scaleZoom(A/this.tileSize);this._elevation=_,this._center=g,this.zoom=z}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new u.Y(_.x-(d.x-g.x),_.y-(d.y-g.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return u.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const me=l.pointCoordinate(r);if(me!=null)return me}const d=[r.x,r.y,0,1],g=[r.x,r.y,1,1];u.af(d,d,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const _=d[3],T=g[3],A=d[1]/_,z=g[1]/T,$=d[2]/_,te=g[2]/T,Q=$===te?0:(0-$)/(te-$);return new u.Y(u.z.number(d[0]/_,g[0]/T,Q)/this.worldSize,u.z.number(A,z,Q)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,l,1];return u.af(g,g,d),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Lt().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Lt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ys])}calculatePosMatrix(r,l=!1){const d=r.key,g=l?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),A=_.x+Math.pow(2,_.z)*r.wrap,z=u.an(new Float64Array(16));return u.H(z,z,[A*T,_.y*T,0]),u.J(z,z,[T/u.W,T/u.W,1]),u.K(z,l?this.alignedProjMatrix:this.projMatrix,z),g[d]=new Float32Array(z),g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=u.ac(+l,this.minZoom,this.maxZoom);const d={center:new u.M(r.lng,r.lat),zoom:l};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const Re=179.9999999999;g=[-Re,Re]}const _=this.tileSize*this.zoomScale(d.zoom);let T=0,A=_,z=0,$=_,te=0,Q=0;const{x:me,y:be}=this.size;if(this.latRange){const Re=this.latRange;T=u.O(Re[1])*_,A=u.O(Re[0])*_,A-T<be&&(te=be/(A-T))}g&&(z=u.b2(u.N(g[0])*_,0,_),$=u.b2(u.N(g[1])*_,0,_),$<z&&($+=_),$-z<me&&(Q=me/($-z)));const{x:Ce,y:Le}=this.project.call({worldSize:_},r);let Ae,Ge;const Ke=Math.max(Q||0,te||0);if(Ke){const Re=new u.P(Q?($+z)/2:Ce,te?(A+T)/2:Le);return d.center=this.unproject.call({worldSize:_},Re).wrap(),d.zoom+=this.scaleZoom(Ke),d}if(this.latRange){const Re=be/2;Le-Re<T&&(Ge=T+Re),Le+Re>A&&(Ge=A-Re)}if(g){const Re=(z+$)/2;let Ye=Ce;this._renderWorldCopies&&(Ye=u.b2(Ce,Re-_/2,Re+_/2));const nt=me/2;Ye-nt<z&&(Ae=z+nt),Ye+nt>$&&(Ae=$-nt)}if(Ae!==void 0||Ge!==void 0){const Re=new u.P(Ae??Ce,Ge??Le);d.center=this.unproject.call({worldSize:_},Re).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b4(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this.minElevationForCurrentTile),A=_-T*this._pixelPerMeter/Math.cos(this._pitch),z=T<0?A:_,$=Math.PI/2+this._pitch,te=this._fov*(.5+r.y/this.height),Q=Math.sin(te)*z/Math.sin(u.ac(Math.PI-$-te,.01,Math.PI-.01)),me=this.getHorizon(),be=2*Math.atan(me/this.cameraToCenterDistance)*(.5+r.y/(2*me)),Ce=Math.sin(be)*z/Math.sin(u.ac(Math.PI-$-be,.01,Math.PI-.01)),Le=Math.min(Q,Ce),Ae=1.01*(Math.cos(Math.PI/2-this._pitch)*Le+z),Ge=this.height/50;g=new Float64Array(16),u.b5(g,this._fov,this.width/this.height,Ge,Ae),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b6(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-l,-d,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.as([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const Ke=this.width%2/2,Re=this.height%2/2,Ye=Math.cos(this.angle),nt=Math.sin(this.angle),st=l-Math.round(l)+Ye*Ke+nt*Re,mt=d-Math.round(d)+Ye*Re+nt*Ke,bt=new Float64Array(g);if(u.H(bt,bt,[st>.5?st-1:st,mt>.5?mt-1:mt,0]),this.alignedProjMatrix=bt,g=u.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,g=l.y,_=l.x,T=l.y;for(const A of r)d=Math.min(d,A.x),g=Math.min(g,A.y),_=Math.max(_,A.x),T=Math.max(T,A.y);return[new u.P(d,g),new u.P(_,g),new u.P(_,T),new u.P(d,T),new u.P(d,g)]}}lngLatToCameraDepth(r,l){const d=this.locationCoordinate(r),g=[d.x*this.worldSize,d.y*this.worldSize,l,1];return u.af(g,g,this.projMatrix),g[2]/g[3]}}function W(y,r){let l,d=!1,g=null,_=null;const T=()=>{g=null,d&&(y.apply(_,l),g=setTimeout(T,r),d=!1)};return(...A)=>(d=!0,_=this,l=A,g||T(),g)}class ye{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=W(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),T=Math.round(l.lng*_)/_,A=Math.round(l.lat*_)/_,z=this._map.getBearing(),$=this._map.getPitch();let te="";if(te+=r?`/${T}/${A}/${d}`:`${d}/${A}/${T}`,(z||$)&&(te+="/"+Math.round(10*z)/10),$&&(te+=`/${Math.round($)}`),this._hashName){const Q=this._hashName;let me=!1;const be=window.location.hash.slice(1).split("&").map(Ce=>{const Le=Ce.split("=")[0];return Le===Q?(me=!0,`${Le}=${te}`):Ce}).filter(Ce=>Ce);return me||be.push(`${Q}=${te}`),`#${be.join("&")}`}return`#${te}`}}const Ue={linearity:.3,easing:u.b7(0,0,.3,1)},at=u.e({deceleration:2500,maxSpeed:1400},Ue),Mt=u.e({deceleration:20,maxSpeed:1400},Ue),Tt=u.e({deceleration:1e3,maxSpeed:360},Ue),Kt=u.e({deceleration:1e3,maxSpeed:90},Ue);class Jt{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=b.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)l.zoom+=_.zoomDelta||0,l.bearing+=_.bearingDelta||0,l.pitch+=_.pitchDelta||0,_.panDelta&&l.pan._add(_.panDelta),_.around&&(l.around=_.around),_.pinchAround&&(l.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const _=Fn(l.pan.mag(),d,u.e({},at,r||{}));g.offset=l.pan.mult(_.amount/l.pan.mag()),g.center=this._map.transform.center,vn(g,_)}if(l.zoom){const _=Fn(l.zoom,d,Mt);g.zoom=this._map.transform.zoom+_.amount,vn(g,_)}if(l.bearing){const _=Fn(l.bearing,d,Tt);g.bearing=this._map.transform.bearing+u.ac(_.amount,-179,179),vn(g,_)}if(l.pitch){const _=Fn(l.pitch,d,Kt);g.pitch=this._map.transform.pitch+_.amount,vn(g,_)}if(g.zoom||g.bearing){const _=l.pinchAround===void 0?l.around:l.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function vn(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Fn(y,r,l){const{maxSpeed:d,linearity:g,deceleration:_}=l,T=u.ac(y*g/(r/1e3),-d,d),A=Math.abs(T)/(_*g);return{easing:l.easing,duration:1e3*A,amount:T*(A/2)}}class _n extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,g={}){const _=I.mousePos(l.getCanvas(),d),T=l.unproject(_);super(r,u.e({point:_,lngLat:T,originalEvent:d},g)),this._defaultPrevented=!1,this.target=l}}class Un extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){const g=r==="touchend"?d.changedTouches:d.touches,_=I.touchPos(l.getCanvasContainer(),g),T=_.map(z=>l.unproject(z)),A=_.reduce((z,$,te,Q)=>z.add($.div(Q.length)),new u.P(0,0));super(r,{points:_,point:A,lngLats:T,lngLat:l.unproject(A),originalEvent:d}),this._defaultPrevented=!1}}class ar extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Ar{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new ar(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new _n(r.type,this._map,r))}mouseup(r){this._map.fire(new _n(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new _n(r.type,this._map,r))}dblclick(r){return this._firePreventable(new _n(r.type,this._map,r))}mouseover(r){this._map.fire(new _n(r.type,this._map,r))}mouseout(r){this._map.fire(new _n(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Un(r.type,this._map,r))}touchmove(r){this._map.fire(new Un(r.type,this._map,r))}touchend(r){this._map.fire(new Un(r.type,this._map,r))}touchcancel(r){this._map.fire(new Un(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Nr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new _n(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _n("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new _n(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bi{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Si{constructor(r,l){this._map=r,this._tr=new bi(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(I.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(g.x,d.x),T=Math.max(g.x,d.x),A=Math.min(g.y,d.y),z=Math.max(g.y,d.y);I.setTransform(this._box,`translate(${_}px,${A}px)`),this._box.style.width=T-_+"px",this._box.style.height=z-A+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,g=l;if(this.reset(),I.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(d,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new u.k(r,{originalEvent:l}))}}function Zi(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const l={};for(let d=0;d<y.length;d++)l[y[d].identifier]=r[d];return l}class Tu{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const _=new u.P(0,0);for(const T of g)_._add(T);return _.div(g.length)}(l),this.touches=Zi(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const g=Zi(d,l);for(const _ in this.touches){const T=g[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class vs{constructor(r){this.singleTap=new Tu(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const g=this.singleTap.touchend(r,l,d);if(g){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(g)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class _s{constructor(r){this._tr=new bi(r),this._zoomIn=new vs({numTouches:1,numTaps:2}),this._zoomOut=new vs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const g=this._zoomIn.touchend(r,l,d),_=this._zoomOut.touchend(r,l,d),T=this._tr;return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(g)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class za{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const g=l.length?l[0]:l;return!this._moved&&g.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(d,g))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&I.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Py={0:1,2:2};class Tc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=I.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){const g=Py[d];return l.buttons===void 0||(l.buttons&g)!==g}(r,this._eventButton)}isValidEndEvent(r){return I.mouseButton(r)===this._eventButton}}class cr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const xs=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=r=>{r.preventDefault()}},qi=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const d=new Tc({checkCorrectEvent:g=>I.mouseButton(g)===0&&g.ctrlKey||I.mouseButton(g)===2});return new za({clickTolerance:r,move:(g,_)=>({bearingDelta:(_.x-g.x)*l}),moveStateManager:d,enable:y,assignEvents:xs})},Ic=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new Tc({checkCorrectEvent:g=>I.mouseButton(g)===0&&g.ctrlKey||I.mouseButton(g)===2});return new za({clickTolerance:r,move:(g,_)=>({pitchDelta:(_.y-g.y)*l}),moveStateManager:d,enable:y,assignEvents:xs})};class td{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active&&!(d.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,d)}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const g=Zi(d,l),_=new u.P(0,0),T=new u.P(0,0);let A=0;for(const $ in g){const te=g[$],Q=this._touches[$];Q&&(_._add(te),T._add(te.sub(Q)),A++,g[$]=te)}if(this._touches=g,A<this.minTouchs()||!T.mag())return;const z=T.div(A);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(A),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[g,_]=this._firstTwoTouches,T=ws(d,l,g),A=ws(d,l,_);if(!T||!A)return;const z=this._aroundCenter?null:T.add(A).div(2);return this._move([T,A],z,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,T=ws(d,l,g),A=ws(d,l,_);T&&A||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ws(y,r,l){for(let d=0;d<y.length;d++)if(y[d].identifier===l)return r[d]}function bl(y,r){return Math.log(y/r)/Math.LN2}class Pc extends Cc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(bl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bl(this._distance,d),pinchAround:l}}}function nd(y,r){return 180*y.angleWith(r)/Math.PI}class rd extends Cc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){const g=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nd(this._vector,g),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=nd(r,this._startVector);return Math.abs(d)<l}}function Ac(y){return Math.abs(y.y)>Math.abs(y.x)}class id extends Cc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Ac(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,_=l.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const T=r.y>0==l.y>0;return Ac(r)&&Ac(l)&&T}}const cp={panStep:100,bearingStep:15,pitchStep:10};class Qs{constructor(r){this._tr=new bi(r);const l=cp;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,g=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:A=>{const z=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:hp,zoom:l?Math.round(z.zoom)+l*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+d*this._bearingStep,pitch:z.pitch+g*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function hp(y){return y*(2-y)}const od=4.000244140625;class sd{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new bi(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=b.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%od==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=I.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?u.M.convert(this._aroundCenter?d.center:d.unproject(l)):u.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>od?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&z!==0&&(z=1/z);const $=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom($*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,g=this._easing;let _,T=!1;if(this._type==="wheel"&&d&&g){const A=Math.min((b.now()-this._lastWheelEventTime)/200,1),z=g(A);_=u.z.number(d,l,z),A<1?this._frameId||(this._frameId=!0):T=!0}else _=l,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=u.b8;if(this._prevEase){const d=this._prevEase,g=(b.now()-d.start)/d.duration,_=d.easing(g+.01)-d.easing(g),T=.27/Math.sqrt(_*_+1e-4)*.01,A=Math.sqrt(.0729-T*T);l=u.b7(T,A,.25,1)}return this._prevEase={start:b.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ad{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class dp{constructor(r){this._tr=new bi(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fp{constructor(){this._tap=new vs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){const g=l[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(g)<30;_&&T?d.length>0&&(this._swipePoint=g,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=l[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const g=this._tap.touchend(r,l,d);g&&(this._tapTime=r.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ld{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Sl{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ud{constructor(r,l,d,g){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class go{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=l,this._container.appendChild(g);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=d,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Xi=y=>y.zoom||y.drag||y.pitch||y.rotate;class pp extends u.k{}function yo(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Iu{constructor(r,l){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=g.type==="renderFrame"?void 0:g,A={needsRenderFrame:!1},z={},$={},te=g.touches,Q=te?this._getMapTouches(te):void 0,me=Q?I.touchPos(this._map.getCanvas(),Q):I.mousePos(this._map.getCanvas(),g);for(const{handlerName:Le,handler:Ae,allowed:Ge}of this._handlers){if(!Ae.isEnabled())continue;let Ke;this._blockedByActive($,Ge,Le)?Ae.reset():Ae[_||g.type]&&(Ke=Ae[_||g.type](g,me,Q),this.mergeHandlerResult(A,z,Ke,Le,T),Ke&&Ke.needsRenderFrame&&this._triggerRenderFrame()),(Ke||Ae.isActive())&&($[Le]=Ae)}const be={};for(const Le in this._previousActiveHandlers)$[Le]||(be[Le]=T);this._previousActiveHandlers=$,(Object.keys(be).length||yo(A))&&(this._changes.push([A,z,be]),this._triggerRenderFrame()),(Object.keys($).length||yo(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ce}=A;Ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ce(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jt(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,T]of this._listeners)I.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,l,d]of this._listeners)I.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new Ar(l,r));const g=l.boxZoom=new Si(l,r);this._add("boxZoom",g),r.interactive&&r.boxZoom&&g.enable();const _=l.cooperativeGestures=new go(l,r.cooperativeGestures);this._add("cooperativeGestures",_),r.cooperativeGestures&&_.enable();const T=new _s(l),A=new dp(l);l.doubleClickZoom=new ad(A,T),this._add("tapZoom",T),this._add("clickZoom",A),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const z=new fp;this._add("tapDragZoom",z);const $=l.touchPitch=new id(l);this._add("touchPitch",$),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const te=qi(r),Q=Ic(r);l.dragRotate=new Sl(r,te,Q),this._add("mouseRotate",te,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const me=(({enable:Ke,clickTolerance:Re})=>{const Ye=new Tc({checkCorrectEvent:nt=>I.mouseButton(nt)===0&&!nt.ctrlKey});return new za({clickTolerance:Re,move:(nt,st)=>({around:st,panDelta:st.sub(nt)}),activateOnStart:!0,moveStateManager:Ye,enable:Ke,assignEvents:xs})})(r),be=new td(r,l);l.dragPan=new ld(d,me,be),this._add("mousePan",me),this._add("touchPan",be,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const Ce=new rd,Le=new Pc;l.touchZoomRotate=new ud(d,Le,Ce,z),this._add("touchRotate",Ce,["touchPan","touchZoom"]),this._add("touchZoom",Le,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const Ae=l.scrollZoom=new sd(l,()=>this._triggerRenderFrame());this._add("scrollZoom",Ae,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const Ge=l.keyboard=new Qs(l);this._add("keyboard",Ge),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Nr(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Xi(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(const g in r)if(g!==d&&(!l||l.indexOf(g)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,g,_){if(!d)return;u.e(r,d);const T={handlerName:g,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(l.zoom=T),d.panDelta!==void 0&&(l.drag=T),d.pitchDelta!==void 0&&(l.pitch=T),d.bearingDelta!==void 0&&(l.rotate=T)}_applyChanges(){const r={},l={},d={};for(const[g,_,T]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),u.e(l,_),u.e(d,T);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const g=this._map,_=g._getTransformForUpdate(),T=g.terrain;if(!(yo(r)||T&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:A,zoomDelta:z,bearingDelta:$,pitchDelta:te,around:Q,pinchAround:me}=r;me!==void 0&&(Q=me),g._stop(!0),Q=Q||g.transform.centerPoint;const be=_.pointLocation(A?Q.sub(A):Q);$&&(_.bearing+=$),te&&(_.pitch+=te),z&&(_.zoom+=z),T?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(A)):_.setLocationAtPoint(be,Q):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(be,Q)):_.setLocationAtPoint(be,Q),g._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const g=Xi(this._eventsInProgress),_=Xi(r),T={};for(const Q in r){const{originalEvent:me}=r[Q];this._eventsInProgress[Q]||(T[`${Q}start`]=me),this._eventsInProgress[Q]=r[Q]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const Q in T)this._fireEvent(Q,T[Q]);_&&this._fireEvent("move",_.originalEvent);for(const Q in r){const{originalEvent:me}=r[Q];this._fireEvent(Q,me)}const A={};let z;for(const Q in this._eventsInProgress){const{handlerName:me,originalEvent:be}=this._eventsInProgress[Q];this._handlersById[me].isActive()||(delete this._eventsInProgress[Q],z=l[me]||be,A[`${Q}end`]=z)}for(const Q in A)this._fireEvent(Q,A[Q]);const $=Xi(this._eventsInProgress),te=(g||_)&&!$;if(te&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),d&&te){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;!Q||!Q.essential&&b.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:z})),me(this._map.getBearing())&&this._map.resetNorth()):(me(Q.bearing||this._map.getBearing())&&(Q.bearing=0),Q.freezeElevation=!0,this._map.easeTo(Q,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new u.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new pp("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ay extends u.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const d=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(u.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(u.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(u.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,u.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=Lt.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const St=g.padding;g.padding={top:St,bottom:St,right:St,left:St}}g.padding=u.e(_,g.padding);const T=this.transform,A=T.padding,z=new Lt(r,l),$=T.project(z.getNorthWest()),te=T.project(z.getNorthEast()),Q=T.project(z.getSouthEast()),me=T.project(z.getSouthWest()),be=u.b9(-d),Ce=$.rotate(be),Le=te.rotate(be),Ae=Q.rotate(be),Ge=me.rotate(be),Ke=new u.P(Math.max(Ce.x,Le.x,Ge.x,Ae.x),Math.max(Ce.y,Le.y,Ge.y,Ae.y)),Re=new u.P(Math.min(Ce.x,Le.x,Ge.x,Ae.x),Math.min(Ce.y,Le.y,Ge.y,Ae.y)),Ye=Ke.sub(Re),nt=(T.width-(A.left+A.right+g.padding.left+g.padding.right))/Ye.x,st=(T.height-(A.top+A.bottom+g.padding.top+g.padding.bottom))/Ye.y;if(st<0||nt<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const mt=Math.min(T.scaleZoom(T.scale*Math.min(nt,st)),g.maxZoom),bt=u.P.convert(g.offset),Nt=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b9(d)),Ut=bt.add(Nt).mult(T.scale/T.zoomScale(mt));return{center:T.unproject($.add(Q).div(2).sub(Ut)),zoom:mt,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(l)),d,g),g,_)}_fitInternal(r,l,d){return r?(delete(l=u.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this._getTransformForUpdate();let g=!1,_=!1,T=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(g=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=u.M.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(_=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(T=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new u.k("movestart",l)).fire(new u.k("move",l)),g&&this.fire(new u.k("zoomstart",l)).fire(new u.k("zoom",l)).fire(new u.k("zoomend",l)),_&&this.fire(new u.k("rotatestart",l)).fire(new u.k("rotate",l)).fire(new u.k("rotateend",l)),T&&this.fire(new u.k("pitchstart",l)).fire(new u.k("pitch",l)).fire(new u.k("pitchend",l)),this.fire(new u.k("moveend",l))}calculateCameraOptionsFromTo(r,l,d,g=0){const _=u.Y.fromLngLat(r,l),T=u.Y.fromLngLat(d,g),A=T.x-_.x,z=T.y-_.y,$=T.z-_.z,te=Math.hypot(A,z,$);if(te===0)throw new Error("Can't calculate camera options with same From and To");const Q=Math.hypot(A,z),me=this.transform.scaleZoom(this.transform.cameraToCenterDistance/te/this.transform.tileSize),be=180*Math.atan2(A,-z)/Math.PI;let Ce=180*Math.acos(Q/te)/Math.PI;return Ce=$<0?90-Ce:90+Ce,{center:T.toLngLat(),zoom:me,pitch:Ce,bearing:be}}easeTo(r,l){var d;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b8},r)).animate===!1||!r.essential&&b.prefersReducedMotion)&&(r.duration=0);const g=this._getTransformForUpdate(),_=this.getZoom(),T=this.getBearing(),A=this.getPitch(),z=this.getPadding(),$="bearing"in r?this._normalizeBearing(r.bearing,T):T,te="pitch"in r?+r.pitch:A,Q="padding"in r?r.padding:g.padding,me=u.P.convert(r.offset);let be=g.centerPoint.add(me);const Ce=g.pointLocation(be),{center:Le,zoom:Ae}=g.getConstrained(u.M.convert(r.center||Ce),(d=r.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(Le);const Ge=g.project(Ce),Ke=g.project(Le).sub(Ge),Re=g.zoomScale(Ae-_);let Ye,nt;r.around&&(Ye=u.M.convert(r.around),nt=g.locationPoint(Ye));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ae!==_,this._rotating=this._rotating||T!==$,this._pitching=this._pitching||te!==A,this._padding=!g.isPaddingEqual(Q),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,st),this.terrain&&this._prepareElevation(Le),this._ease(mt=>{if(this._zooming&&(g.zoom=u.z.number(_,Ae,mt)),this._rotating&&(g.bearing=u.z.number(T,$,mt)),this._pitching&&(g.pitch=u.z.number(A,te,mt)),this._padding&&(g.interpolatePadding(z,Q,mt),be=g.centerPoint.add(me)),this.terrain&&!r.freezeElevation&&this._updateElevation(mt),Ye)g.setLocationAtPoint(Ye,nt);else{const bt=g.zoomScale(g.zoom-_),Nt=Ae>_?Math.min(2,Re):Math.max(.5,Re),Ut=Math.pow(Nt,1-mt),St=g.unproject(Ge.add(Ke.mult(mt*Ut)).mult(bt));g.setLocationAtPoint(g.renderWorldCopies?St.wrap():St,be)}this._applyUpdatedTransform(g),this._fireMoveEvents(l)},mt=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l,mt)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new u.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:d,zoom:g,pitch:_,bearing:T,elevation:A}=this.transformCameraUpdate(l);d&&(l.center=d),g!==void 0&&(l.zoom=g),_!==void 0&&(l.pitch=_),T!==void 0&&(l.bearing=T),A!==void 0&&(l.elevation=A),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new u.k("zoomend",r)),g&&this.fire(new u.k("rotateend",r)),_&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,l){var d;if(!r.essential&&b.prefersReducedMotion){const Rt=u.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Rt,l)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b8},r);const g=this._getTransformForUpdate(),_=this.getZoom(),T=this.getBearing(),A=this.getPitch(),z=this.getPadding(),$="bearing"in r?this._normalizeBearing(r.bearing,T):T,te="pitch"in r?+r.pitch:A,Q="padding"in r?r.padding:g.padding,me=u.P.convert(r.offset);let be=g.centerPoint.add(me);const Ce=g.pointLocation(be),{center:Le,zoom:Ae}=g.getConstrained(u.M.convert(r.center||Ce),(d=r.zoom)!==null&&d!==void 0?d:_);this._normalizeCenter(Le);const Ge=g.zoomScale(Ae-_),Ke=g.project(Ce),Re=g.project(Le).sub(Ke);let Ye=r.curve;const nt=Math.max(g.width,g.height),st=nt/Ge,mt=Re.mag();if("minZoom"in r){const Rt=u.ac(Math.min(r.minZoom,_,Ae),g.minZoom,g.maxZoom),dn=nt/g.zoomScale(Rt-_);Ye=Math.sqrt(dn/mt*2)}const bt=Ye*Ye;function Nt(Rt){const dn=(st*st-nt*nt+(Rt?-1:1)*bt*bt*mt*mt)/(2*(Rt?st:nt)*bt*mt);return Math.log(Math.sqrt(dn*dn+1)-dn)}function Ut(Rt){return(Math.exp(Rt)-Math.exp(-Rt))/2}function St(Rt){return(Math.exp(Rt)+Math.exp(-Rt))/2}const It=Nt(!1);let Wt=function(Rt){return St(It)/St(It+Ye*Rt)},gn=function(Rt){return nt*((St(It)*(Ut(dn=It+Ye*Rt)/St(dn))-Ut(It))/bt)/mt;var dn},Pt=(Nt(!0)-It)/Ye;if(Math.abs(mt)<1e-6||!isFinite(Pt)){if(Math.abs(nt-st)<1e-6)return this.easeTo(r,l);const Rt=st<nt?-1:1;Pt=Math.abs(Math.log(st/nt))/Ye,gn=()=>0,Wt=dn=>Math.exp(Rt*Ye*dn)}return r.duration="duration"in r?+r.duration:1e3*Pt/("screenSpeed"in r?+r.screenSpeed/Ye:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=T!==$,this._pitching=te!==A,this._padding=!g.isPaddingEqual(Q),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Le),this._ease(Rt=>{const dn=Rt*Pt,er=1/Wt(dn);g.zoom=Rt===1?Ae:_+g.scaleZoom(er),this._rotating&&(g.bearing=u.z.number(T,$,Rt)),this._pitching&&(g.pitch=u.z.number(A,te,Rt)),this._padding&&(g.interpolatePadding(z,Q,Rt),be=g.centerPoint.add(me)),this.terrain&&!r.freezeElevation&&this._updateElevation(Rt);const En=Rt===1?Le:g.unproject(Ke.add(Re.mult(gn(dn))).mult(er));g.setLocationAtPoint(g.renderWorldCopies?En.wrap():En,be),this._applyUpdatedTransform(g),this._fireMoveEvents(l)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,l)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=b.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=u.b2(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const mp={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class gp{constructor(r=mp){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.sourceCaches;for(const g in l){const _=l[g];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,_)=>g.length-_.length),r=r.filter((g,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(g)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class cd{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const l=I.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Cu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const g of d)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var ea=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class $t extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const d={};for(const g of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aO(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Ee(g,this.tileSize));for(const g in this._tiles)d[g]||delete this._tiles[g]}freeRtt(r){for(const l in this._tiles){const d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),u.aO(_.posMatrix,0,u.W,0,u.W,0,1),l[d]=_}else if(g.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=g.canonical.z-r.canonical.z,A=g.canonical.x-(g.canonical.x>>T<<T),z=g.canonical.y-(g.canonical.y>>T<<T),$=u.W>>T;u.aO(_.posMatrix,0,$,0,$,0,1),u.H(_.posMatrix,_.posMatrix,[-A*$,-z*$,0]),l[d]=_}else if(r.canonical.isChildOf(g.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-g.canonical.z,A=r.canonical.x-(r.canonical.x>>T<<T),z=r.canonical.y-(r.canonical.y>>T<<T),$=u.W>>T;u.aO(_.posMatrix,0,u.W,0,u.W,0,1),u.H(_.posMatrix,_.posMatrix,[A*$,z*$,0]),u.J(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),l[d]=_}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&l)for(;g>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(g--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class yp{constructor(r,l,d){this.painter=r,this.sourceCache=new $t(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,g=u.W){var _;if(!(l>=0&&l<g&&d>=0&&d<g))return 0;const T=this.getTerrainData(r),A=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!A)return 0;const z=function(Ce,Le,Ae){var Ge=Le[0],Ke=Le[1];return Ce[0]=Ae[0]*Ge+Ae[4]*Ke+Ae[12],Ce[1]=Ae[1]*Ge+Ae[5]*Ke+Ae[13],Ce}([],[l/g*u.W,d/g*u.W],T.u_terrain_matrix),$=[z[0]*A.dim,z[1]*A.dim],te=Math.floor($[0]),Q=Math.floor($[1]),me=$[0]-te,be=$[1]-Q;return A.get(te,Q)*(1-me)*(1-be)+A.get(te+1,Q)*me*(1-be)+A.get(te,Q+1)*(1-me)*be+A.get(te+1,Q+1)*me*be}getElevationForLngLatZoom(r,l){const{tileID:d,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,g%u.W,_%u.W,u.W)}getElevation(r,l,d,g=u.W){return this.getDEMElevation(r,l,d,g)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.painter.context,_=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Z(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Z(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Z(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?_=r.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),A=r.canonical.y-(r.canonical.y>>_<<_),z=u.ba(new Float64Array(16),[1/(u.W<<_),1/(u.W<<_),0]);u.H(z,z,[T*u.W,A*u.W,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,d=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Z(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Z(l.context,{width:d,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,g,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let A=0;A<this._coordsTextureSize;A++,T+=4)l[T+0]=255&A,l[T+1]=255&_,l[T+2]=A>>8<<4|_>>8,l[T+3]=0;const d=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new Z(r,d,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),d=this.painter.context,g=d.gl,_=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(_,A-T-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const z=l[0]+(l[2]>>4<<8),$=l[1]+((15&l[2])<<8),te=this.coordsIndex[255-l[3]],Q=te&&this.sourceCache.getTileByID(te);if(!Q)return null;const me=this._coordsTextureSize,be=(1<<Q.tileID.canonical.z)*me;return new u.Y((Q.tileID.canonical.x*me+z)/be+Q.tileID.wrap,(Q.tileID.canonical.y*me+$)/be,this.getElevation(Q.tileID,z,$,me))}depthAtPoint(r){const l=new Uint8Array(4),d=this.painter.context,g=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new u.bb,d=new u.aY,g=this.meshSize,_=u.W/g,T=g*g;for(let Q=0;Q<=g;Q++)for(let me=0;me<=g;me++)l.emplaceBack(me*_,Q*_,0);for(let Q=0;Q<T;Q+=g+1)for(let me=0;me<g;me++)d.emplaceBack(me+Q,g+me+Q+1,g+me+Q+2),d.emplaceBack(me+Q,g+me+Q+2,me+Q+1);const A=l.length,z=A+2*(g+1);for(const Q of[0,1])for(let me=0;me<=g;me++)for(const be of[0,1])l.emplaceBack(me*_,Q*u.W,be);for(let Q=0;Q<2*g;Q+=2)d.emplaceBack(z+Q,z+Q+1,z+Q+3),d.emplaceBack(z+Q,z+Q+3,z+Q+2),d.emplaceBack(A+Q,A+Q+3,A+Q+1),d.emplaceBack(A+Q,A+Q+2,A+Q+3);const $=l.length,te=$+2*(g+1);for(const Q of[0,1])for(let me=0;me<=g;me++)for(const be of[0,1])l.emplaceBack(Q*u.W,me*_,be);for(let Q=0;Q<2*g;Q+=2)d.emplaceBack($+Q,$+Q+1,$+Q+3),d.emplaceBack($+Q,$+Q+3,$+Q+2),d.emplaceBack(te+Q,te+Q+3,te+Q+1),d.emplaceBack(te+Q,te+Q+2,te+Q+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(l,ea.members),segments:u.$.simpleSegment(0,0,l.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.bc/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var d;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(g).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){const d=u.Y.fromLngLat(r.wrap()),g=(1<<l)*u.W,_=d.x*g,T=d.y*g,A=Math.floor(_/u.W),z=Math.floor(T/u.W);return{tileID:new u.Q(l,0,l,A,z),mercatorX:_,mercatorY:T}}}class Pu{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Z(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Jo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class vp{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Pu(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const g=r.sourceCaches[d].getVisibleCoordinates();for(const _ of g){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const A in T)this._coordsDescendingInv[d][A]||(this._coordsDescendingInv[d][A]=[]),this._coordsDescendingInv[d][A].push(T[A])}}this._coordsDescendingInvStr={};for(const d of r._order){const g=r._layers[d],_=g.source;if(Jo[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(A=>A.key).sort().join()}}for(const d of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][d.tileID.key];_&&_!==d.rttCoords[g]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,d=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Jo[l]&&(this._prevType&&Jo[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!g))return!0;if(Jo[this._prevType]||Jo[l]&&g){this._prevType=l;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Ma(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[_]){const $=this.pool.getObjectForId(A.rtt[_].id);if($.stamp===A.rtt[_].stamp){this.pool.useObject($);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),A.rtt[_]={id:z.id,stamp:z.stamp},d.context.bindFramebuffer.set(z.fbo.framebuffer),d.context.clear({color:u.aP.transparent,stencil:0}),d.currentStencilSource=void 0;for(let $=0;$<T.length;$++){const te=d.style._layers[T[$]],Q=te.source?this._coordsDescendingInv[te.source][A.tileID.key]:[A.tileID];d.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),d._renderTileClippingMasks(te,Q),d.renderLayer(d,d.style.sourceCaches[te.source],te,Q),te.source&&(A.rttCoords[te.source]=this._coordsDescendingInvStr[te.source][A.tileID.key])}}return Ma(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Jo[l]}return!1}}const Dt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},hd=S,ky={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:mp,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},_p=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},dd={showCompass:!0,showZoom:!0,visualizePitch:!1};class xp{constructor(r,l,d=!1){this.mousedown=T=>{this.startMouse(u.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),I.mousePos(this.element,T)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,I.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=qi({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:A,bearingDegreesPerPixelMoved:z=.8})=>{const $=new cr;return new za({clickTolerance:A,move:(te,Q)=>({bearingDelta:(Q.x-te.x)*z}),moveStateManager:$,enable:T,assignEvents:_p})})({clickTolerance:g,enable:!0}),this.map=r,d&&(this.mousePitch=Ic({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:A,pitchDegreesPerPixelMoved:z=-.5})=>{const $=new cr;return new za({clickTolerance:A,move:(te,Q)=>({pitchDelta:(Q.y-te.y)*z}),moveStateManager:$,enable:T,assignEvents:_p})})({clickTolerance:_,enable:!0})),I.addEventListener(l,"mousedown",this.mousedown),I.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),I.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),I.disableDrag()}moveMouse(r,l){const d=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,l)||{};_&&d.setPitch(d.getPitch()+_)}}moveTouch(r,l){const d=this.map,{bearingDelta:g}=this.touchRotate.dragMove(r,l)||{};if(g&&d.setBearing(d.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,l)||{};_&&d.setPitch(d.getPitch()+_)}}off(){const r=this.element;I.removeEventListener(r,"mousedown",this.mousedown),I.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let ta;function wp(y,r,l){const d=new u.M(y.lng,y.lat);if(y=new u.M(y.lng,y.lat),r){const g=new u.M(y.lng-360,y.lat),_=new u.M(y.lng+360,y.lat),T=l.locationPoint(y).distSqr(r);l.locationPoint(g).distSqr(r)<T?y=g:l.locationPoint(_).distSqr(r)<T&&(y=_)}for(;Math.abs(y.lng-l.center.lng)>180;){const g=l.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=l.width&&g.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y.lng!==d.lng&&l.locationPoint(y).y>l.height/2-l.getHorizon()?y:d}const fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function na(y,r,l){const d=y.classList;for(const g in fd)d.remove(`maplibregl-${l}-anchor-${g}`);d.add(`maplibregl-${l}-anchor-${r}`)}class Kn extends u.E{constructor(r){if(super(),this._onKeyPress=l=>{const d=l.code,g=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()},this._update=l=>{var d;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?wp(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${fd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${_}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");const l=I.createNS("http://www.w3.org/2000/svg","svg"),d=41,g=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${g}px`),l.setAttributeNS(null,"viewBox",`0 0 ${g} ${d}`);const _=I.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=I.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const A=I.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ge of z){const Ke=I.createNS("http://www.w3.org/2000/svg","ellipse");Ke.setAttributeNS(null,"opacity","0.04"),Ke.setAttributeNS(null,"cx","10.5"),Ke.setAttributeNS(null,"cy","5.80029008"),Ke.setAttributeNS(null,"rx",Ge.rx),Ke.setAttributeNS(null,"ry",Ge.ry),A.appendChild(Ke)}const $=I.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill",this._color);const te=I.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),$.appendChild(te);const Q=I.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const me=I.createNS("http://www.w3.org/2000/svg","path");me.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(me);const be=I.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(6.0, 7.0)"),be.setAttributeNS(null,"fill","#FFFFFF");const Ce=I.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Le=I.createNS("http://www.w3.org/2000/svg","circle");Le.setAttributeNS(null,"fill","#000000"),Le.setAttributeNS(null,"opacity","0.25"),Le.setAttributeNS(null,"cx","5.5"),Le.setAttributeNS(null,"cy","5.5"),Le.setAttributeNS(null,"r","5.4999962");const Ae=I.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),Ce.appendChild(Le),Ce.appendChild(Ae),T.appendChild(A),T.appendChild($),T.appendChild(Q),T.appendChild(be),T.appendChild(Ce),l.appendChild(T),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(l),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),na(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,d;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,_=g.terrain.depthAtPoint(this._pos),T=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,T)-_<.006)return void(this._element.style.opacity=this._opacity);const A=-this._offset.y/g.transform._pixelPerMeter,z=Math.sin(g.getPitch()*Math.PI/180)*A,$=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),te=g.transform.lngLatToCameraDepth(this._lngLat,T+z)-$>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const kc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let El=0,Tl=!1;const bp={maxWidth:100,unit:"metric"};function pd(y,r,l){const d=l&&l.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),T=y.unproject([d,g]),A=_.distanceTo(T);if(l&&l.unit==="imperial"){const z=3.2808*A;z>5280?Au(r,d,z/5280,y._getUIString("ScaleControl.Miles")):Au(r,d,z,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Au(r,d,A/1852,y._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Au(r,d,A/1e3,y._getUIString("ScaleControl.Kilometers")):Au(r,d,A,y._getUIString("ScaleControl.Meters"))}function Au(y,r,l,d){const g=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let A=_/T;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(z){const $=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*$)/$}(A),T*A}(l);y.style.width=r*(g/l)+"px",y.innerHTML=`${g}&nbsp;${d}`}const Qo={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Mc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qt(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-y),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const r=u.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return Qt(new u.P(0,0))}const ln=S;f.AJAXError=u.bf,f.Evented=u.E,f.LngLat=u.M,f.MercatorCoordinate=u.Y,f.Point=u.P,f.addProtocol=u.bg,f.config=u.a,f.removeProtocol=u.bh,f.AttributionControl=gp,f.BoxZoomHandler=Si,f.CanvasSource=xe,f.CooperativeGesturesHandler=go,f.DoubleClickZoomHandler=ad,f.DragPanHandler=ld,f.DragRotateHandler=Sl,f.EdgeInsets=Js,f.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=qt,f.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new u.M(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,g=this._map.getBearing(),_=u.e({bearing:g},this.options.fitBoundsOptions),T=Lt.fromLngLat(l,d);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new u.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Tl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Kn({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Kn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},kc,y)}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(r=!1){if(ta!==void 0&&!r)return ta;if(window.navigator.permissions===void 0)return ta=!!window.navigator.geolocation,ta;try{ta=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ta=!!window.navigator.geolocation}return ta})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,El=0,Tl=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),l=y.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),l=y.getNorthEast(),d=r.distanceTo(l),g=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":El--,Tl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),El++,El>1?(y={maximumAge:6e5,timeout:0},Tl=!0):(y=this.options.positionOptions,Tl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.Hash=ye,f.ImageSource=N,f.KeyboardHandler=Qs,f.LngLatBounds=Lt,f.LogoControl=cd,f.Map=class extends Ay{constructor(y){if(u.bd.mark(u.be.create),(y=u.e({},ky,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new wl(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Cu,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},Dt,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new se(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const l=W(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{r?l(d):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Iu(this,y),this._hash=y.hash&&new ye(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new gp(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new cd,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new u.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new u.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new u.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,l,d)}resize(y){var r;const l=this._containerDimensions(),d=l[0],g=l[1],_=this._getClampedPixelRatio(d,g);if(this._resizeCanvas(d,g,_),this.painter.resize(d,g,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const z=this._getClampedPixelRatio(d,g);this._resizeCanvas(d,g,z),this.painter.resize(d,g,z)}this.transform.resize(d,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,g);const T=!this._moving;return T&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),T&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:l,1:d}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,T=r*g;return Math.min(_>l?l/_:1,T>d?d/T:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Lt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,l){if(y==="mouseenter"||y==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?d||(d=!0,l.call(this,new _n(y,this,_.originalEvent,{features:T}))):d=!1},mouseout:()=>{d=!1}}}}if(y==="mouseleave"||y==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new _n(y,this,T.originalEvent)))},mouseout:T=>{d&&(d=!1,l.call(this,new _n(y,this,T.originalEvent)))}}}}{const d=g=>{const _=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];_.length&&(g.features=_,l.call(this,g),delete g.features)};return{layer:r,listener:l,delegates:{[y]:d}}}}on(y,r,l){if(l===void 0)return super.on(y,r);const d=this._createDelegatedListener(y,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(y,r,l){if(l===void 0)return super.once(y,r);const d=this._createDelegatedListener(y,r,l);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(y,r,l){return l===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(d=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const T=g[_];if(T.layer===r&&T.listener===l){for(const A in T.delegates)this.off(A,T.delegates[A]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let l;const d=y instanceof u.P||Array.isArray(y),g=d?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:y)||{},g instanceof u.P||typeof g[0]=="number")l=[u.P.convert(g)];else{const _=u.P.convert(g[0]),T=u.P.convert(g[1]);l=[_,new u.P(T.x,_.y),T,new u.P(_.x,T.y),_]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new sl(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,l):this.style.loadJSON(y,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new sl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,"Style");u.h(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new u.j(d))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(l){u.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new yp(this.painter,r,y),this.painter.renderToTexture=new vp(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const l=y[r]._tiles;for(const d in l){const g=l[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,l={}){const{pixelRatio:d=1,sdf:g=!1,stretchX:_,stretchY:T,content:A,textFitWidth:z,textFitHeight:$}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:te,height:Q,data:me}=r,be=r;return this.style.addImage(y,{data:new u.R({width:te,height:Q},new Uint8Array(me)),pixelRatio:d,stretchX:_,stretchY:T,content:A,textFitWidth:z,textFitHeight:$,sdf:g,version:0,userImage:be}),be.onAdd&&be.onAdd(this,y),this}}{const{width:te,height:Q,data:me}=b.getImageData(r);this.style.addImage(y,{data:new u.R({width:te,height:Q},me),pixelRatio:d,stretchX:_,stretchY:T,content:A,textFitWidth:z,textFitHeight:$,sdf:g,version:0})}}updateImage(y,r){const l=this.style.getImage(y);if(!l)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||u.b(r)?b.getImageData(r):r,{width:g,height:_,data:T}=d;if(g===void 0||_===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||_!==l.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(r instanceof HTMLImageElement||u.b(r));return l.data.replace(T,A),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return V.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,l){return this.style.setLayerZoomRange(y,r,l),this._update(!0)}setFilter(y,r,l={}){return this.style.setFilter(y,r,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,l,d={}){return this.style.setPaintProperty(y,r,l,d),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,l,d={}){return this.style.setLayoutProperty(y,r,l,d),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,l,d=>{d||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,l=>{l||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=I.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const g=this._controlContainer=I.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=I.create("div",`maplibregl-ctrl-${T} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:y},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!l){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new Rn(l,this.transform),R.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=b.now();this.style.zoomHistory.update(g,_);const T=new u.a8(g,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=T.crossFadingFactor();A===1&&A===this._crossFadingFactor||(l=!0,this._crossFadingFactor=A),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bd.mark(u.be.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,u.bd.mark(u.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bd.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(y=>{u.bd.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return hd}getCameraTargetElevation(){return this.transform.elevation}},f.MapMouseEvent=_n,f.MapTouchEvent=Un,f.MapWheelEvent=ar,f.Marker=Kn,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=u.e({},dd,y),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const l=I.create("button",y,this._container);return l.type="button",l.addEventListener("click",r),l}},f.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?wp(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const _=Qt(this.options.offset);if(!g){const A=this._container.offsetWidth,z=this._container.offsetHeight;let $;$=d.y+_.bottom.y<z?["top"]:d.y>this._map.transform.height-z?["bottom"]:[],d.x<A/2?$.push("left"):d.x>this._map.transform.width-A/2&&$.push("right"),g=$.length===0?"bottom":$.join("-")}let T=d.add(_[g]);this.options.subpixelPositioning||(T=T.round()),I.setTransform(this._container,`${fd[g]} translate(${T.x}px,${T.y}px)`),na(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Qo),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=y;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Mc);y&&y.focus()}},f.RasterDEMTileSource=hn,f.RasterTileSource=bn,f.ScaleControl=class{constructor(y){this._onMove=()=>{pd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,pd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},bp),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=sd,f.Style=sl,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=id,f.TwoFingersTouchRotateHandler=rd,f.TwoFingersTouchZoomHandler=Pc,f.TwoFingersTouchZoomRotateHandler=ud,f.VectorTileSource=it,f.VideoSource=D,f.addSourceType=(y,r)=>u._(void 0,void 0,void 0,function*(){if(tt(y))throw new Error(`A source type called "${y}" already exists.`);((l,d)=>{Xe[l]=d})(y,r)}),f.clearPrewarmedResources=function(){const y=qe;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ne),qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return U().getRTLTextPluginStatus()},f.getVersion=function(){return ln},f.getWorkerCount=function(){return Pe.workerCount},f.getWorkerUrl=function(){return u.a.WORKER_URL},f.importScriptInWorkers=function(y){return xt().broadcast("IS",y)},f.prewarm=function(){ot().acquire(Ne)},f.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,r){return U().setRTLTextPlugin(y,r)},f.setWorkerCount=function(y){Pe.workerCount=y},f.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var m=i;return m})})(VI);var WI=VI.exports;const HI=qf(WI),f4=Uk({__proto__:null,default:HI},[WI]),p4="modulepreload",m4=function(e){return"/osm-address-editor-vite/"+e},N2={},g4=function(t,i,a){let c=Promise.resolve();if(i&&i.length>0){const m=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),u=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));c=Promise.all(i.map(S=>{if(S=m4(S),S in N2)return;N2[S]=!0;const C=S.endsWith(".css"),k=C?'[rel="stylesheet"]':"";if(!!a)for(let R=m.length-1;R>=0;R--){const B=m[R];if(B.href===S&&(!C||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${k}`))return;const I=document.createElement("link");if(I.rel=C?"stylesheet":p4,C||(I.as="script",I.crossOrigin=""),I.href=S,u&&I.setAttribute("nonce",u),document.head.appendChild(I),C)return new Promise((R,B)=>{I.addEventListener("load",R),I.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${S}`)))})}))}return c.then(()=>t()).catch(m=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=m,window.dispatchEvent(f),!f.defaultPrevented)throw m})},y4=vt.createContext(null);function v4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,m=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&a===m}function Uo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Uo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Uo(e[c],t[c]))return!1;return!0}return!1}function _4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function U2(e,t){if(!e.getProjection)return;const i=e.getProjection(),a=t.getProjection();Uo(i,a)||t.setProjection(i)}function $2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function V2(e,t){const i=t.viewState||t;let a=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),a=a||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,a=a||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,a=a||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,a=a||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(a=!0,e.padding=i.padding),a}const x4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function G2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const i=e.layers.map(a=>{let c=null;"interactive"in a&&(c=Object.assign({},a),delete c.interactive);const m=t[a.ref];if(m){c=c||Object.assign({},a),delete c.ref;for(const f of x4)f in m&&(c[f]=m[f])}return c||a});return{...e,layers:i}}var W2={};const H2={version:8,sources:{},layers:[]},Z2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Z0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},q2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},w4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],b4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Oh{constructor(t,i,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const m=this.props[q2[c.type]];m?m(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const m=this.props[Z2[c.type]];m&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),m(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const m=this.props[Z0[c.type]];m&&m(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const a=this._updateSettings(t,i);a&&this._createShadowTransform(this._map);const c=this._updateSize(t),m=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(a||c||m&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const a=Oh.savedMaps.pop();if(!a)return null;const c=a.map,m=c.getContainer();for(i.className=m.className;m.childNodes.length>0;)i.appendChild(m.childNodes[0]);c._container=i;const f=c._resizeObserver;f&&(f.disconnect(),f.observe(i)),a.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:u}=t;return u&&(u.bounds?c.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),a}_initialize(t){const{props:i}=this,{mapStyle:a=H2}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||S4()||null,container:t,style:G2(a)},m=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[m.longitude||0,m.latitude||0],zoom:m.zoom||0,pitch:m.pitch||0,bearing:m.bearing||0}),i.gl){const k=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=k,i.gl)}const f=new this._MapClass(c);m.padding&&f.setPadding(m.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),this._createShadowTransform(f);const u=f._render;f._render=k=>{this._inRender=!0,u.call(f,k),this._inRender=!1};const S=f._renderTaskQueue.run;f._renderTaskQueue.run=k=>{S.call(f._renderTaskQueue,k),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const C=f.fire;f.fire=this._fireEvent.bind(this,C),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),U2(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const k in Z2)f.on(k,this._onPointerEvent);for(const k in Z0)f.on(k,this._onCameraEvent);for(const k in q2)f.on(k,this._onEvent);this._map=f}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Oh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=_4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const a=this._map;if(i.width!==a.transform.width||i.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const a=this._map,c=this._renderTransform,{zoom:m,pitch:f,bearing:u}=c,S=a.isMoving();S&&(c.cameraElevationReference="sea");const C=V2(c,{...$2(a.transform),...t});if(S&&(c.cameraElevationReference="ground"),C&&i){const k=this._deferredEvents;k.move=!0,k.zoom||(k.zoom=m!==c.zoom),k.rotate||(k.rotate=u!==c.bearing),k.pitch||(k.pitch=f!==c.pitch)}return S||V2(a.transform,t),C}_updateSettings(t,i){const a=this._map;let c=!1;for(const m of w4)if(m in t&&!Uo(t[m],i[m])){c=!0;const f=a[`set${m[0].toUpperCase()}${m.slice(1)}`];f==null||f.call(a,t[m])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:a=H2,styleDiffing:c=!0}=t,m={diff:c};return"localIdeographFontFamily"in t&&(m.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(G2(a),m),!0}return!1}_updateStyleComponents(t,i){const a=this._map;let c=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Uo(t.light,i.light)&&(c=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Uo(t.fog,i.fog)&&(c=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Uo(t.terrain,i.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(c=!0,a.setTerrain(t.terrain))),c}_updateHandlers(t,i){var a,c;const m=this._map;let f=!1;for(const u of b4){const S=(a=t[u])!==null&&a!==void 0?a:!0,C=(c=i[u])!==null&&c!==void 0?c:!0;Uo(S,C)||(f=!0,S?m[u].enable(S):m[u].disable())}return f}_queryRenderedFeatures(t){const i=this._map,a=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=a}}_updateHover(t){var i;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const m=t.type,f=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,u=this._queryRenderedFeatures(t.point),S=u.length>0;!S&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,S&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=m}else this._hoveredFeatures=null}_fireEvent(t,i,a){const c=this._map,m=c.transform,f=typeof i=="string"?i:i.type;return f==="move"&&this._updateViewState(this.props,!1),f in Z0&&(typeof i=="object"&&(i.viewState=$2(m)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,a),c.transform=m,c):(t.call(c,i,a),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{U2(this._renderTransform,i),t.transform=i}}}Oh.savedMaps=[];function S4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||W2.MapboxAccessToken}catch{}try{e=e||W2.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const E4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function T4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const c=t.transform;t.transform=e.transform;const m=t.project(a);return t.transform=c,m},unproject:a=>{const c=t.transform;t.transform=e.transform;const m=t.unproject(a);return t.transform=c,m},queryTerrainElevation:(a,c)=>{const m=t.transform;t.transform=e.transform;const f=t.queryTerrainElevation(a,c);return t.transform=m,f},queryRenderedFeatures:(a,c)=>{const m=t.transform;t.transform=e.transform;const f=t.queryRenderedFeatures(a,c);return t.transform=m,f}};for(const a of I4(t))!(a in i)&&!E4.includes(a)&&(i[a]=t[a].bind(t));return i}function I4(e){const t=new Set;let i=e;for(;i;){for(const a of Object.getOwnPropertyNames(i))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);i=Object.getPrototypeOf(i)}return Array.from(t)}const C4=typeof document<"u"?vt.useLayoutEffect:vt.useEffect,P4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function A4(e,t){for(const a of P4)a in t&&(e[a]=t[a]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,a=>{a&&console.error(a)},!0)}const Gh=vt.createContext(null);function k4(e,t,i){const a=vt.useContext(y4),[c,m]=vt.useState(null),f=vt.useRef(),{current:u}=vt.useRef({mapLib:null,map:null});vt.useEffect(()=>{const k=e.mapLib;let b=!0,I;return Promise.resolve(k||i).then(R=>{if(!b)return;if(!R)throw new Error("Invalid mapLib");const B="Map"in R?R:R.default;if(!B.Map)throw new Error("Invalid mapLib");if(A4(B,e),!B.supported||B.supported(e))e.reuseMaps&&(I=Oh.reuse(e,f.current)),I||(I=new Oh(B.Map,e,f.current)),u.map=T4(I),u.mapLib=B,m(I),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(R=>{const{onError:B}=e;B?B({type:"error",target:null,originalEvent:null,error:R}):console.error(R)}),()=>{b=!1,I&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?I.recycle():I.destroy())}},[]),C4(()=>{c&&c.setProps(e)}),vt.useImperativeHandle(t,()=>u.map,[c]);const S=vt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return vt.createElement("div",{id:e.id,ref:f,style:S},c&&vt.createElement(Gh.Provider,{value:u},vt.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const M4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ic(e,t){if(!e||!t)return;const i=e.style;for(const a in t){const c=t[a];Number.isFinite(c)&&!M4.test(a)?i[a]=`${c}px`:i[a]=c}}function z4(e,t){const{map:i,mapLib:a}=vt.useContext(Gh),c=vt.useRef({props:e});c.current.props=e;const m=vt.useMemo(()=>{let O=!1;vt.Children.forEach(e.children,q=>{q&&(O=!0)});const he={...e,element:O?document.createElement("div"):null},Y=new a.Marker(he);return Y.setLngLat([e.longitude,e.latitude]),Y.getElement().addEventListener("click",q=>{var V,se;(se=(V=c.current.props).onClick)===null||se===void 0||se.call(V,{type:"click",target:Y,originalEvent:q})}),Y.on("dragstart",q=>{var V,se;const X=q;X.lngLat=m.getLngLat(),(se=(V=c.current.props).onDragStart)===null||se===void 0||se.call(V,X)}),Y.on("drag",q=>{var V,se;const X=q;X.lngLat=m.getLngLat(),(se=(V=c.current.props).onDrag)===null||se===void 0||se.call(V,X)}),Y.on("dragend",q=>{var V,se;const X=q;X.lngLat=m.getLngLat(),(se=(V=c.current.props).onDragEnd)===null||se===void 0||se.call(V,X)}),Y},[]);vt.useEffect(()=>(m.addTo(i.getMap()),()=>{m.remove()}),[]);const{longitude:f,latitude:u,offset:S,style:C,draggable:k=!1,popup:b=null,rotation:I=0,rotationAlignment:R="auto",pitchAlignment:B="auto"}=e;return vt.useEffect(()=>{ic(m.getElement(),C)},[C]),vt.useImperativeHandle(t,()=>m,[]),(m.getLngLat().lng!==f||m.getLngLat().lat!==u)&&m.setLngLat([f,u]),S&&!v4(m.getOffset(),S)&&m.setOffset(S),m.isDraggable()!==k&&m.setDraggable(k),m.getRotation()!==I&&m.setRotation(I),m.getRotationAlignment()!==R&&m.setRotationAlignment(R),m.getPitchAlignment()!==B&&m.setPitchAlignment(B),m.getPopup()!==b&&m.setPopup(b),ox.createPortal(e.children,m.getElement())}const F4=vt.memo(vt.forwardRef(z4));function X2(e){return new Set(e?e.trim().split(/\s+/):[])}function R4(e,t){const{map:i,mapLib:a}=vt.useContext(Gh),c=vt.useMemo(()=>document.createElement("div"),[]),m=vt.useRef({props:e});m.current.props=e;const f=vt.useMemo(()=>{const u={...e},S=new a.Popup(u);return S.setLngLat([e.longitude,e.latitude]),S.once("open",C=>{var k,b;(b=(k=m.current.props).onOpen)===null||b===void 0||b.call(k,C)}),S},[]);if(vt.useEffect(()=>{const u=S=>{var C,k;(k=(C=m.current.props).onClose)===null||k===void 0||k.call(C,S)};return f.on("close",u),f.setDOMContent(c).addTo(i.getMap()),()=>{f.off("close",u),f.isOpen()&&f.remove()}},[]),vt.useEffect(()=>{ic(f.getElement(),e.style)},[e.style]),vt.useImperativeHandle(t,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Uo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const u=X2(f.options.className),S=X2(e.className);for(const C of u)S.has(C)||f.removeClassName(C);for(const C of S)u.has(C)||f.addClassName(C);f.options.className=e.className}return ox.createPortal(e.children,c)}vt.memo(vt.forwardRef(R4));function ep(e,t,i,a){const c=vt.useContext(Gh),m=vt.useMemo(()=>e(c),[]);return vt.useEffect(()=>{const f=a||i||t,u=typeof t=="function"&&typeof i=="function"?t:null,S=typeof i=="function"?i:typeof t=="function"?t:null,{map:C}=c;return C.hasControl(m)||(C.addControl(m,f==null?void 0:f.position),u&&u(c)),()=>{S&&S(c),C.hasControl(m)&&C.removeControl(m)}},[]),m}function O4(e){const t=ep(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return vt.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}vt.memo(O4);function j4(e){const t=ep(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return vt.useEffect(()=>{ic(t._controlContainer,e.style)},[e.style]),null}vt.memo(j4);function L4(e,t){const i=vt.useRef({props:e}),a=ep(({mapLib:c})=>{const m=new c.GeolocateControl(e),f=m._setupUI;return m._setupUI=u=>{m._container.hasChildNodes()||f(u)},m.on("geolocate",u=>{var S,C;(C=(S=i.current.props).onGeolocate)===null||C===void 0||C.call(S,u)}),m.on("error",u=>{var S,C;(C=(S=i.current.props).onError)===null||C===void 0||C.call(S,u)}),m.on("outofmaxbounds",u=>{var S,C;(C=(S=i.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(S,u)}),m.on("trackuserlocationstart",u=>{var S,C;(C=(S=i.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(S,u)}),m.on("trackuserlocationend",u=>{var S,C;(C=(S=i.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(S,u)}),m},{position:e.position});return i.current.props=e,vt.useImperativeHandle(t,()=>a,[]),vt.useEffect(()=>{ic(a._container,e.style)},[e.style]),null}const D4=vt.memo(vt.forwardRef(L4));function B4(e){const t=ep(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return vt.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}const N4=vt.memo(B4);function U4(e){const t=ep(({mapLib:m})=>new m.ScaleControl(e),{position:e.position}),i=vt.useRef(e),a=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),vt.useEffect(()=>{ic(t._container,c)},[c]),null}vt.memo(U4);function bg(e,t){if(!e)throw new Error(t)}function $4(e,t,i,a){if(bg(i.id===a.id,"layer id changed"),bg(i.type===a.type,"layer type changed"),i.type==="custom"||a.type==="custom")return;const{layout:c={},paint:m={},filter:f,minzoom:u,maxzoom:S,beforeId:C}=i;if(C!==a.beforeId&&e.moveLayer(t,C),c!==a.layout){const k=a.layout||{};for(const b in c)Uo(c[b],k[b])||e.setLayoutProperty(t,b,c[b]);for(const b in k)c.hasOwnProperty(b)||e.setLayoutProperty(t,b,void 0)}if(m!==a.paint){const k=a.paint||{};for(const b in m)Uo(m[b],k[b])||e.setPaintProperty(t,b,m[b]);for(const b in k)m.hasOwnProperty(b)||e.setPaintProperty(t,b,void 0)}Uo(f,a.filter)||e.setFilter(t,f),(u!==a.minzoom||S!==a.maxzoom)&&e.setLayerZoomRange(t,u,S)}function V4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const a={...i,id:t};delete a.beforeId,e.addLayer(a,i.beforeId)}}let G4=0;function W4(e){const t=vt.useContext(Gh).map.getMap(),i=vt.useRef(e),[,a]=vt.useState(0),c=vt.useMemo(()=>e.id||`jsx-layer-${G4++}`,[]);if(vt.useEffect(()=>{if(t){const f=()=>a(u=>u+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{$4(t,c,e,i.current)}catch(f){console.warn(f)}else V4(t,c,e);return i.current=e,null}let H4=0;function Z4(e,t,i){if(e.style&&e.style._loaded){const a={...i};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function q4(e,t,i){bg(t.id===i.id,"source id changed"),bg(t.type===i.type,"source type changed");let a="",c=0;for(const f in t)f!=="children"&&f!=="id"&&!Uo(i[f],t[f])&&(a=f,c++);if(!c)return;const m=t.type;if(m==="geojson")e.setData(t.data);else if(m==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function X4(e){const t=vt.useContext(Gh).map.getMap(),i=vt.useRef(e),[,a]=vt.useState(0),c=vt.useMemo(()=>e.id||`jsx-source-${H4++}`,[]);vt.useEffect(()=>{if(t){const f=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",f),f(),()=>{var u;if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(c)){const S=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(S)for(const C of S)C.source===c&&t.removeLayer(C.id);t.removeSource(c)}}}},[t]);let m=t&&t.style&&t.getSource(c);return m?q4(m,e,i.current):m=Z4(t,c,e),i.current=e,m&&vt.Children.map(e.children,f=>f&&vt.cloneElement(f,{source:c}))||null}const K4=g4(()=>Promise.resolve().then(()=>f4),void 0),Y4=vt.forwardRef(function(t,i){return k4(t,i,K4)}),J4=F4,Q4=N4,ez=D4,tz=W4,nz=X4;function K2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function tn(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(i),!0).forEach(function(a){ei(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Sg(e){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sg(e)}function rz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function iz(e,t,i){return t&&Y2(e.prototype,t),i&&Y2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function ei(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sx(e,t){return sz(e)||lz(e,t)||ZI(e,t)||cz()}function tp(e){return oz(e)||az(e)||ZI(e)||uz()}function oz(e){if(Array.isArray(e))return v_(e)}function sz(e){if(Array.isArray(e))return e}function az(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lz(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a=[],c=!0,m=!1,f,u;try{for(i=i.call(e);!(c=(f=i.next()).done)&&(a.push(f.value),!(t&&a.length===t));c=!0);}catch(S){m=!0,u=S}finally{try{!c&&i.return!=null&&i.return()}finally{if(m)throw u}}return a}}function ZI(e,t){if(e){if(typeof e=="string")return v_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v_(e,t)}}function v_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function uz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J2=function(){},ax={},qI={},XI=null,KI={mark:J2,measure:J2};try{typeof window<"u"&&(ax=window),typeof document<"u"&&(qI=document),typeof MutationObserver<"u"&&(XI=MutationObserver),typeof performance<"u"&&(KI=performance)}catch{}var hz=ax.navigator||{},Q2=hz.userAgent,eS=Q2===void 0?"":Q2,iu=ax,pr=qI,tS=XI,hm=KI;iu.document;var rl=!!pr.documentElement&&!!pr.head&&typeof pr.addEventListener=="function"&&typeof pr.createElement=="function",YI=~eS.indexOf("MSIE")||~eS.indexOf("Trident/"),dm,fm,pm,mm,gm,Ja="___FONT_AWESOME___",__=16,JI="fa",QI="svg-inline--fa",Ju="data-fa-i2svg",x_="data-fa-pseudo-element",dz="data-fa-pseudo-element-pending",lx="data-prefix",ux="data-icon",nS="fontawesome-i2svg",fz="async",pz=["HTML","HEAD","STYLE","SCRIPT"],eC=function(){try{return!0}catch{return!1}}(),dr="classic",jr="sharp",cx=[dr,jr];function np(e){return new Proxy(e,{get:function(i,a){return a in i?i[a]:i[dr]}})}var Df=np((dm={},ei(dm,dr,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),ei(dm,jr,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),dm)),Bf=np((fm={},ei(fm,dr,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),ei(fm,jr,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),fm)),Nf=np((pm={},ei(pm,dr,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),ei(pm,jr,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),pm)),mz=np((mm={},ei(mm,dr,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),ei(mm,jr,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),mm)),gz=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,tC="fa-layers-text",yz=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,vz=np((gm={},ei(gm,dr,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),ei(gm,jr,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),gm)),nC=[1,2,3,4,5,6,7,8,9,10],_z=nC.concat([11,12,13,14,15,16,17,18,19,20]),xz=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Vu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Uf=new Set;Object.keys(Bf[dr]).map(Uf.add.bind(Uf));Object.keys(Bf[jr]).map(Uf.add.bind(Uf));var wz=[].concat(cx,tp(Uf),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Vu.GROUP,Vu.SWAP_OPACITY,Vu.PRIMARY,Vu.SECONDARY]).concat(nC.map(function(e){return"".concat(e,"x")})).concat(_z.map(function(e){return"w-".concat(e)})),pf=iu.FontAwesomeConfig||{};function bz(e){var t=pr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function Sz(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(pr&&typeof pr.querySelector=="function"){var Ez=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];Ez.forEach(function(e){var t=sx(e,2),i=t[0],a=t[1],c=Sz(bz(i));c!=null&&(pf[a]=c)})}var rC={styleDefault:"solid",familyDefault:"classic",cssPrefix:JI,replacementClass:QI,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};pf.familyPrefix&&(pf.cssPrefix=pf.familyPrefix);var jh=tn(tn({},rC),pf);jh.autoReplaceSvg||(jh.observeMutations=!1);var sn={};Object.keys(rC).forEach(function(e){Object.defineProperty(sn,e,{enumerable:!0,set:function(i){jh[e]=i,mf.forEach(function(a){return a(sn)})},get:function(){return jh[e]}})});Object.defineProperty(sn,"familyPrefix",{enumerable:!0,set:function(t){jh.cssPrefix=t,mf.forEach(function(i){return i(sn)})},get:function(){return jh.cssPrefix}});iu.FontAwesomeConfig=sn;var mf=[];function Tz(e){return mf.push(e),function(){mf.splice(mf.indexOf(e),1)}}var Dl=__,pa={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Iz(e){if(!(!e||!rl)){var t=pr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=pr.head.childNodes,a=null,c=i.length-1;c>-1;c--){var m=i[c],f=(m.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(f)>-1&&(a=m)}return pr.head.insertBefore(t,a),e}}var Cz="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function $f(){for(var e=12,t="";e-- >0;)t+=Cz[Math.random()*62|0];return t}function Wh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function hx(e){return e.classList?Wh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function iC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pz(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(iC(e[i]),'" ')},"").trim()}function my(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function dx(e){return e.size!==pa.size||e.x!==pa.x||e.y!==pa.y||e.rotate!==pa.rotate||e.flipX||e.flipY}function Az(e){var t=e.transform,i=e.containerWidth,a=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},m="translate(".concat(t.x*32,", ").concat(t.y*32,") "),f="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)"),S={transform:"".concat(m," ").concat(f," ").concat(u)},C={transform:"translate(".concat(a/2*-1," -256)")};return{outer:c,inner:S,path:C}}function kz(e){var t=e.transform,i=e.width,a=i===void 0?__:i,c=e.height,m=c===void 0?__:c,f=e.startCentered,u=f===void 0?!1:f,S="";return u&&YI?S+="translate(".concat(t.x/Dl-a/2,"em, ").concat(t.y/Dl-m/2,"em) "):u?S+="translate(calc(-50% + ".concat(t.x/Dl,"em), calc(-50% + ").concat(t.y/Dl,"em)) "):S+="translate(".concat(t.x/Dl,"em, ").concat(t.y/Dl,"em) "),S+="scale(".concat(t.size/Dl*(t.flipX?-1:1),", ").concat(t.size/Dl*(t.flipY?-1:1),") "),S+="rotate(".concat(t.rotate,"deg) "),S}var Mz=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function oC(){var e=JI,t=QI,i=sn.cssPrefix,a=sn.replacementClass,c=Mz;if(i!==e||a!==t){var m=new RegExp("\\.".concat(e,"\\-"),"g"),f=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");c=c.replace(m,".".concat(i,"-")).replace(f,"--".concat(i,"-")).replace(u,".".concat(a))}return c}var rS=!1;function q0(){sn.autoAddCss&&!rS&&(Iz(oC()),rS=!0)}var zz={mixout:function(){return{dom:{css:oC,insertCss:q0}}},hooks:function(){return{beforeDOMElementCreation:function(){q0()},beforeI2svg:function(){q0()}}}},Qa=iu||{};Qa[Ja]||(Qa[Ja]={});Qa[Ja].styles||(Qa[Ja].styles={});Qa[Ja].hooks||(Qa[Ja].hooks={});Qa[Ja].shims||(Qa[Ja].shims=[]);var zs=Qa[Ja],sC=[],Fz=function e(){pr.removeEventListener("DOMContentLoaded",e),Eg=1,sC.map(function(t){return t()})},Eg=!1;rl&&(Eg=(pr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(pr.readyState),Eg||pr.addEventListener("DOMContentLoaded",Fz));function Rz(e){rl&&(Eg?setTimeout(e,0):sC.push(e))}function rp(e){var t=e.tag,i=e.attributes,a=i===void 0?{}:i,c=e.children,m=c===void 0?[]:c;return typeof e=="string"?iC(e):"<".concat(t," ").concat(Pz(a),">").concat(m.map(rp).join(""),"</").concat(t,">")}function iS(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var Oz=function(t,i){return function(a,c,m,f){return t.call(i,a,c,m,f)}},X0=function(t,i,a,c){var m=Object.keys(t),f=m.length,u=c!==void 0?Oz(i,c):i,S,C,k;for(a===void 0?(S=1,k=t[m[0]]):(S=0,k=a);S<f;S++)C=m[S],k=u(k,t[C],C,t);return k};function jz(e){for(var t=[],i=0,a=e.length;i<a;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<a){var m=e.charCodeAt(i++);(m&64512)==56320?t.push(((c&1023)<<10)+(m&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function w_(e){var t=jz(e);return t.length===1?t[0].toString(16):null}function Lz(e,t){var i=e.length,a=e.charCodeAt(t),c;return a>=55296&&a<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(a-55296)*1024+c-56320+65536:a}function oS(e){return Object.keys(e).reduce(function(t,i){var a=e[i],c=!!a.icon;return c?t[a.iconName]=a.icon:t[i]=a,t},{})}function b_(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.skipHooks,c=a===void 0?!1:a,m=oS(t);typeof zs.hooks.addPack=="function"&&!c?zs.hooks.addPack(e,oS(t)):zs.styles[e]=tn(tn({},zs.styles[e]||{}),m),e==="fas"&&b_("fa",t)}var ym,vm,_m,ph=zs.styles,Dz=zs.shims,Bz=(ym={},ei(ym,dr,Object.values(Nf[dr])),ei(ym,jr,Object.values(Nf[jr])),ym),fx=null,aC={},lC={},uC={},cC={},hC={},Nz=(vm={},ei(vm,dr,Object.keys(Df[dr])),ei(vm,jr,Object.keys(Df[jr])),vm);function Uz(e){return~wz.indexOf(e)}function $z(e,t){var i=t.split("-"),a=i[0],c=i.slice(1).join("-");return a===e&&c!==""&&!Uz(c)?c:null}var dC=function(){var t=function(m){return X0(ph,function(f,u,S){return f[S]=X0(u,m,{}),f},{})};aC=t(function(c,m,f){if(m[3]&&(c[m[3]]=f),m[2]){var u=m[2].filter(function(S){return typeof S=="number"});u.forEach(function(S){c[S.toString(16)]=f})}return c}),lC=t(function(c,m,f){if(c[f]=f,m[2]){var u=m[2].filter(function(S){return typeof S=="string"});u.forEach(function(S){c[S]=f})}return c}),hC=t(function(c,m,f){var u=m[2];return c[f]=f,u.forEach(function(S){c[S]=f}),c});var i="far"in ph||sn.autoFetchSvg,a=X0(Dz,function(c,m){var f=m[0],u=m[1],S=m[2];return u==="far"&&!i&&(u="fas"),typeof f=="string"&&(c.names[f]={prefix:u,iconName:S}),typeof f=="number"&&(c.unicodes[f.toString(16)]={prefix:u,iconName:S}),c},{names:{},unicodes:{}});uC=a.names,cC=a.unicodes,fx=gy(sn.styleDefault,{family:sn.familyDefault})};Tz(function(e){fx=gy(e.styleDefault,{family:sn.familyDefault})});dC();function px(e,t){return(aC[e]||{})[t]}function Vz(e,t){return(lC[e]||{})[t]}function Gu(e,t){return(hC[e]||{})[t]}function fC(e){return uC[e]||{prefix:null,iconName:null}}function Gz(e){var t=cC[e],i=px("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function ou(){return fx}var mx=function(){return{prefix:null,iconName:null,rest:[]}};function gy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.family,a=i===void 0?dr:i,c=Df[a][e],m=Bf[a][e]||Bf[a][c],f=e in zs.styles?e:null;return m||f||null}var sS=(_m={},ei(_m,dr,Object.keys(Nf[dr])),ei(_m,jr,Object.keys(Nf[jr])),_m);function yy(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipLookups,c=a===void 0?!1:a,m=(t={},ei(t,dr,"".concat(sn.cssPrefix,"-").concat(dr)),ei(t,jr,"".concat(sn.cssPrefix,"-").concat(jr)),t),f=null,u=dr;(e.includes(m[dr])||e.some(function(C){return sS[dr].includes(C)}))&&(u=dr),(e.includes(m[jr])||e.some(function(C){return sS[jr].includes(C)}))&&(u=jr);var S=e.reduce(function(C,k){var b=$z(sn.cssPrefix,k);if(ph[k]?(k=Bz[u].includes(k)?mz[u][k]:k,f=k,C.prefix=k):Nz[u].indexOf(k)>-1?(f=k,C.prefix=gy(k,{family:u})):b?C.iconName=b:k!==sn.replacementClass&&k!==m[dr]&&k!==m[jr]&&C.rest.push(k),!c&&C.prefix&&C.iconName){var I=f==="fa"?fC(C.iconName):{},R=Gu(C.prefix,C.iconName);I.prefix&&(f=null),C.iconName=I.iconName||R||C.iconName,C.prefix=I.prefix||C.prefix,C.prefix==="far"&&!ph.far&&ph.fas&&!sn.autoFetchSvg&&(C.prefix="fas")}return C},mx());return(e.includes("fa-brands")||e.includes("fab"))&&(S.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(S.prefix="fad"),!S.prefix&&u===jr&&(ph.fass||sn.autoFetchSvg)&&(S.prefix="fass",S.iconName=Gu(S.prefix,S.iconName)||S.iconName),(S.prefix==="fa"||f==="fa")&&(S.prefix=ou()||"fas"),S}var Wz=function(){function e(){rz(this,e),this.definitions={}}return iz(e,[{key:"add",value:function(){for(var i=this,a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];var f=c.reduce(this._pullDefinitions,{});Object.keys(f).forEach(function(u){i.definitions[u]=tn(tn({},i.definitions[u]||{}),f[u]),b_(u,f[u]);var S=Nf[dr][u];S&&b_(S,f[u]),dC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,a){var c=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(c).map(function(m){var f=c[m],u=f.prefix,S=f.iconName,C=f.icon,k=C[2];i[u]||(i[u]={}),k.length>0&&k.forEach(function(b){typeof b=="string"&&(i[u][b]=C)}),i[u][S]=C}),i}}]),e}(),aS=[],mh={},Th={},Hz=Object.keys(Th);function Zz(e,t){var i=t.mixoutsTo;return aS=e,mh={},Object.keys(Th).forEach(function(a){Hz.indexOf(a)===-1&&delete Th[a]}),aS.forEach(function(a){var c=a.mixout?a.mixout():{};if(Object.keys(c).forEach(function(f){typeof c[f]=="function"&&(i[f]=c[f]),Sg(c[f])==="object"&&Object.keys(c[f]).forEach(function(u){i[f]||(i[f]={}),i[f][u]=c[f][u]})}),a.hooks){var m=a.hooks();Object.keys(m).forEach(function(f){mh[f]||(mh[f]=[]),mh[f].push(m[f])})}a.provides&&a.provides(Th)}),i}function S_(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var m=mh[e]||[];return m.forEach(function(f){t=f.apply(null,[t].concat(a))}),t}function Qu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var c=mh[e]||[];c.forEach(function(m){m.apply(null,i)})}function el(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Th[e]?Th[e].apply(null,t):void 0}function E_(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||ou();if(t)return t=Gu(i,t)||t,iS(pC.definitions,i,t)||iS(zs.styles,i,t)}var pC=new Wz,qz=function(){sn.autoReplaceSvg=!1,sn.observeMutations=!1,Qu("noAuto")},Xz={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return rl?(Qu("beforeI2svg",t),el("pseudoElements2svg",t),el("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;sn.autoReplaceSvg===!1&&(sn.autoReplaceSvg=!0),sn.observeMutations=!0,Rz(function(){Yz({autoReplaceSvgRoot:i}),Qu("watch",t)})}},Kz={icon:function(t){if(t===null)return null;if(Sg(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Gu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],a=gy(t[0]);return{prefix:a,iconName:Gu(a,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(sn.cssPrefix,"-"))>-1||t.match(gz))){var c=yy(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||ou(),iconName:Gu(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var m=ou();return{prefix:m,iconName:Gu(m,t)||t}}}},Zo={noAuto:qz,config:sn,dom:Xz,parse:Kz,library:pC,findIconDefinition:E_,toHtml:rp},Yz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,a=i===void 0?pr:i;(Object.keys(zs.styles).length>0||sn.autoFetchSvg)&&rl&&sn.autoReplaceSvg&&Zo.dom.i2svg({node:a})};function vy(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(a){return rp(a)})}}),Object.defineProperty(e,"node",{get:function(){if(rl){var a=pr.createElement("div");return a.innerHTML=e.html,a.children}}}),e}function Jz(e){var t=e.children,i=e.main,a=e.mask,c=e.attributes,m=e.styles,f=e.transform;if(dx(f)&&i.found&&!a.found){var u=i.width,S=i.height,C={x:u/S/2,y:.5};c.style=my(tn(tn({},m),{},{"transform-origin":"".concat(C.x+f.x/16,"em ").concat(C.y+f.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function Qz(e){var t=e.prefix,i=e.iconName,a=e.children,c=e.attributes,m=e.symbol,f=m===!0?"".concat(t,"-").concat(sn.cssPrefix,"-").concat(i):m;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:tn(tn({},c),{},{id:f}),children:a}]}]}function gx(e){var t=e.icons,i=t.main,a=t.mask,c=e.prefix,m=e.iconName,f=e.transform,u=e.symbol,S=e.title,C=e.maskId,k=e.titleId,b=e.extra,I=e.watchable,R=I===void 0?!1:I,B=a.found?a:i,O=B.width,he=B.height,Y=c==="fak",q=[sn.replacementClass,m?"".concat(sn.cssPrefix,"-").concat(m):""].filter(function(L){return b.classes.indexOf(L)===-1}).filter(function(L){return L!==""||!!L}).concat(b.classes).join(" "),V={children:[],attributes:tn(tn({},b.attributes),{},{"data-prefix":c,"data-icon":m,class:q,role:b.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(O," ").concat(he)})},se=Y&&!~b.classes.indexOf("fa-fw")?{width:"".concat(O/he*16*.0625,"em")}:{};R&&(V.attributes[Ju]=""),S&&(V.children.push({tag:"title",attributes:{id:V.attributes["aria-labelledby"]||"title-".concat(k||$f())},children:[S]}),delete V.attributes.title);var X=tn(tn({},V),{},{prefix:c,iconName:m,main:i,mask:a,maskId:C,transform:f,symbol:u,styles:tn(tn({},se),b.styles)}),G=a.found&&i.found?el("generateAbstractMask",X)||{children:[],attributes:{}}:el("generateAbstractIcon",X)||{children:[],attributes:{}},E=G.children,j=G.attributes;return X.children=E,X.attributes=j,u?Qz(X):Jz(X)}function lS(e){var t=e.content,i=e.width,a=e.height,c=e.transform,m=e.title,f=e.extra,u=e.watchable,S=u===void 0?!1:u,C=tn(tn(tn({},f.attributes),m?{title:m}:{}),{},{class:f.classes.join(" ")});S&&(C[Ju]="");var k=tn({},f.styles);dx(c)&&(k.transform=kz({transform:c,startCentered:!0,width:i,height:a}),k["-webkit-transform"]=k.transform);var b=my(k);b.length>0&&(C.style=b);var I=[];return I.push({tag:"span",attributes:C,children:[t]}),m&&I.push({tag:"span",attributes:{class:"sr-only"},children:[m]}),I}function eF(e){var t=e.content,i=e.title,a=e.extra,c=tn(tn(tn({},a.attributes),i?{title:i}:{}),{},{class:a.classes.join(" ")}),m=my(a.styles);m.length>0&&(c.style=m);var f=[];return f.push({tag:"span",attributes:c,children:[t]}),i&&f.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),f}var K0=zs.styles;function T_(e){var t=e[0],i=e[1],a=e.slice(4),c=sx(a,1),m=c[0],f=null;return Array.isArray(m)?f={tag:"g",attributes:{class:"".concat(sn.cssPrefix,"-").concat(Vu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(sn.cssPrefix,"-").concat(Vu.SECONDARY),fill:"currentColor",d:m[0]}},{tag:"path",attributes:{class:"".concat(sn.cssPrefix,"-").concat(Vu.PRIMARY),fill:"currentColor",d:m[1]}}]}:f={tag:"path",attributes:{fill:"currentColor",d:m}},{found:!0,width:t,height:i,icon:f}}var tF={found:!1,width:512,height:512};function nF(e,t){!eC&&!sn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function I_(e,t){var i=t;return t==="fa"&&sn.styleDefault!==null&&(t=ou()),new Promise(function(a,c){if(el("missingIconAbstract"),i==="fa"){var m=fC(e)||{};e=m.iconName||e,t=m.prefix||t}if(e&&t&&K0[t]&&K0[t][e]){var f=K0[t][e];return a(T_(f))}nF(e,t),a(tn(tn({},tF),{},{icon:sn.showMissingIcons&&e?el("missingIconAbstract")||{}:{}}))})}var uS=function(){},C_=sn.measurePerformance&&hm&&hm.mark&&hm.measure?hm:{mark:uS,measure:uS},Kd='FA "6.5.2"',rF=function(t){return C_.mark("".concat(Kd," ").concat(t," begins")),function(){return mC(t)}},mC=function(t){C_.mark("".concat(Kd," ").concat(t," ends")),C_.measure("".concat(Kd," ").concat(t),"".concat(Kd," ").concat(t," begins"),"".concat(Kd," ").concat(t," ends"))},yx={begin:rF,end:mC},Vm=function(){};function cS(e){var t=e.getAttribute?e.getAttribute(Ju):null;return typeof t=="string"}function iF(e){var t=e.getAttribute?e.getAttribute(lx):null,i=e.getAttribute?e.getAttribute(ux):null;return t&&i}function oF(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(sn.replacementClass)}function sF(){if(sn.autoReplaceSvg===!0)return Gm.replace;var e=Gm[sn.autoReplaceSvg];return e||Gm.replace}function aF(e){return pr.createElementNS("http://www.w3.org/2000/svg",e)}function lF(e){return pr.createElement(e)}function gC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,a=i===void 0?e.tag==="svg"?aF:lF:i;if(typeof e=="string")return pr.createTextNode(e);var c=a(e.tag);Object.keys(e.attributes||[]).forEach(function(f){c.setAttribute(f,e.attributes[f])});var m=e.children||[];return m.forEach(function(f){c.appendChild(gC(f,{ceFn:a}))}),c}function uF(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Gm={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(gC(c),i)}),i.getAttribute(Ju)===null&&sn.keepOriginalSource){var a=pr.createComment(uF(i));i.parentNode.replaceChild(a,i)}else i.remove()},nest:function(t){var i=t[0],a=t[1];if(~hx(i).indexOf(sn.replacementClass))return Gm.replace(t);var c=new RegExp("".concat(sn.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){var m=a[0].attributes.class.split(" ").reduce(function(u,S){return S===sn.replacementClass||S.match(c)?u.toSvg.push(S):u.toNode.push(S),u},{toNode:[],toSvg:[]});a[0].attributes.class=m.toSvg.join(" "),m.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",m.toNode.join(" "))}var f=a.map(function(u){return rp(u)}).join(`
`);i.setAttribute(Ju,""),i.innerHTML=f}};function hS(e){e()}function yC(e,t){var i=typeof t=="function"?t:Vm;if(e.length===0)i();else{var a=hS;sn.mutateApproach===fz&&(a=iu.requestAnimationFrame||hS),a(function(){var c=sF(),m=yx.begin("mutate");e.map(c),m(),i()})}}var vx=!1;function vC(){vx=!0}function P_(){vx=!1}var Tg=null;function dS(e){if(tS&&sn.observeMutations){var t=e.treeCallback,i=t===void 0?Vm:t,a=e.nodeCallback,c=a===void 0?Vm:a,m=e.pseudoElementsCallback,f=m===void 0?Vm:m,u=e.observeMutationsRoot,S=u===void 0?pr:u;Tg=new tS(function(C){if(!vx){var k=ou();Wh(C).forEach(function(b){if(b.type==="childList"&&b.addedNodes.length>0&&!cS(b.addedNodes[0])&&(sn.searchPseudoElements&&f(b.target),i(b.target)),b.type==="attributes"&&b.target.parentNode&&sn.searchPseudoElements&&f(b.target.parentNode),b.type==="attributes"&&cS(b.target)&&~xz.indexOf(b.attributeName))if(b.attributeName==="class"&&iF(b.target)){var I=yy(hx(b.target)),R=I.prefix,B=I.iconName;b.target.setAttribute(lx,R||k),B&&b.target.setAttribute(ux,B)}else oF(b.target)&&c(b.target)})}}),rl&&Tg.observe(S,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function cF(){Tg&&Tg.disconnect()}function hF(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(a,c){var m=c.split(":"),f=m[0],u=m.slice(1);return f&&u.length>0&&(a[f]=u.join(":").trim()),a},{})),i}function dF(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),a=e.innerText!==void 0?e.innerText.trim():"",c=yy(hx(e));return c.prefix||(c.prefix=ou()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||(c.prefix&&a.length>0&&(c.iconName=Vz(c.prefix,e.innerText)||px(c.prefix,w_(e.innerText))),!c.iconName&&sn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(c.iconName=e.firstChild.data)),c}function fF(e){var t=Wh(e.attributes).reduce(function(c,m){return c.name!=="class"&&c.name!=="style"&&(c[m.name]=m.value),c},{}),i=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return sn.autoA11y&&(i?t["aria-labelledby"]="".concat(sn.replacementClass,"-title-").concat(a||$f()):(t["aria-hidden"]="true",t.focusable="false")),t}function pF(){return{iconName:null,title:null,titleId:null,prefix:null,transform:pa,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function fS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=dF(e),a=i.iconName,c=i.prefix,m=i.rest,f=fF(e),u=S_("parseNodeAttributes",{},e),S=t.styleParser?hF(e):[];return tn({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:pa,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:m,styles:S,attributes:f}},u)}var mF=zs.styles;function _C(e){var t=sn.autoReplaceSvg==="nest"?fS(e,{styleParser:!1}):fS(e);return~t.extra.classes.indexOf(tC)?el("generateLayersText",e,t):el("generateSvgReplacementMutation",e,t)}var su=new Set;cx.map(function(e){su.add("fa-".concat(e))});Object.keys(Df[dr]).map(su.add.bind(su));Object.keys(Df[jr]).map(su.add.bind(su));su=tp(su);function pS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!rl)return Promise.resolve();var i=pr.documentElement.classList,a=function(b){return i.add("".concat(nS,"-").concat(b))},c=function(b){return i.remove("".concat(nS,"-").concat(b))},m=sn.autoFetchSvg?su:cx.map(function(k){return"fa-".concat(k)}).concat(Object.keys(mF));m.includes("fa")||m.push("fa");var f=[".".concat(tC,":not([").concat(Ju,"])")].concat(m.map(function(k){return".".concat(k,":not([").concat(Ju,"])")})).join(", ");if(f.length===0)return Promise.resolve();var u=[];try{u=Wh(e.querySelectorAll(f))}catch{}if(u.length>0)a("pending"),c("complete");else return Promise.resolve();var S=yx.begin("onTree"),C=u.reduce(function(k,b){try{var I=_C(b);I&&k.push(I)}catch(R){eC||R.name==="MissingIcon"&&console.error(R)}return k},[]);return new Promise(function(k,b){Promise.all(C).then(function(I){yC(I,function(){a("active"),a("complete"),c("pending"),typeof t=="function"&&t(),S(),k()})}).catch(function(I){S(),b(I)})})}function gF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_C(e).then(function(i){i&&yC([i],t)})}function yF(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(t||{}).icon?t:E_(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:E_(c||{})),e(a,tn(tn({},i),{},{mask:c}))}}var vF=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.transform,c=a===void 0?pa:a,m=i.symbol,f=m===void 0?!1:m,u=i.mask,S=u===void 0?null:u,C=i.maskId,k=C===void 0?null:C,b=i.title,I=b===void 0?null:b,R=i.titleId,B=R===void 0?null:R,O=i.classes,he=O===void 0?[]:O,Y=i.attributes,q=Y===void 0?{}:Y,V=i.styles,se=V===void 0?{}:V;if(t){var X=t.prefix,G=t.iconName,E=t.icon;return vy(tn({type:"icon"},t),function(){return Qu("beforeDOMElementCreation",{iconDefinition:t,params:i}),sn.autoA11y&&(I?q["aria-labelledby"]="".concat(sn.replacementClass,"-title-").concat(B||$f()):(q["aria-hidden"]="true",q.focusable="false")),gx({icons:{main:T_(E),mask:S?T_(S.icon):{found:!1,width:null,height:null,icon:{}}},prefix:X,iconName:G,transform:tn(tn({},pa),c),symbol:f,title:I,maskId:k,titleId:B,extra:{attributes:q,styles:se,classes:he}})})}},_F={mixout:function(){return{icon:yF(vF)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=pS,i.nodeCallback=gF,i}}},provides:function(t){t.i2svg=function(i){var a=i.node,c=a===void 0?pr:a,m=i.callback,f=m===void 0?function(){}:m;return pS(c,f)},t.generateSvgReplacementMutation=function(i,a){var c=a.iconName,m=a.title,f=a.titleId,u=a.prefix,S=a.transform,C=a.symbol,k=a.mask,b=a.maskId,I=a.extra;return new Promise(function(R,B){Promise.all([I_(c,u),k.iconName?I_(k.iconName,k.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(O){var he=sx(O,2),Y=he[0],q=he[1];R([i,gx({icons:{main:Y,mask:q},prefix:u,iconName:c,transform:S,symbol:C,maskId:b,title:m,titleId:f,extra:I,watchable:!0})])}).catch(B)})},t.generateAbstractIcon=function(i){var a=i.children,c=i.attributes,m=i.main,f=i.transform,u=i.styles,S=my(u);S.length>0&&(c.style=S);var C;return dx(f)&&(C=el("generateAbstractTransformGrouping",{main:m,transform:f,containerWidth:m.width,iconWidth:m.width})),a.push(C||m.icon),{children:a,attributes:c}}}},xF={mixout:function(){return{layer:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.classes,m=c===void 0?[]:c;return vy({type:"layer"},function(){Qu("beforeDOMElementCreation",{assembler:i,params:a});var f=[];return i(function(u){Array.isArray(u)?u.map(function(S){f=f.concat(S.abstract)}):f=f.concat(u.abstract)}),[{tag:"span",attributes:{class:["".concat(sn.cssPrefix,"-layers")].concat(tp(m)).join(" ")},children:f}]})}}}},wF={mixout:function(){return{counter:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.title,m=c===void 0?null:c,f=a.classes,u=f===void 0?[]:f,S=a.attributes,C=S===void 0?{}:S,k=a.styles,b=k===void 0?{}:k;return vy({type:"counter",content:i},function(){return Qu("beforeDOMElementCreation",{content:i,params:a}),eF({content:i.toString(),title:m,extra:{attributes:C,styles:b,classes:["".concat(sn.cssPrefix,"-layers-counter")].concat(tp(u))}})})}}}},bF={mixout:function(){return{text:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=a.transform,m=c===void 0?pa:c,f=a.title,u=f===void 0?null:f,S=a.classes,C=S===void 0?[]:S,k=a.attributes,b=k===void 0?{}:k,I=a.styles,R=I===void 0?{}:I;return vy({type:"text",content:i},function(){return Qu("beforeDOMElementCreation",{content:i,params:a}),lS({content:i,transform:tn(tn({},pa),m),title:u,extra:{attributes:b,styles:R,classes:["".concat(sn.cssPrefix,"-layers-text")].concat(tp(C))}})})}}},provides:function(t){t.generateLayersText=function(i,a){var c=a.title,m=a.transform,f=a.extra,u=null,S=null;if(YI){var C=parseInt(getComputedStyle(i).fontSize,10),k=i.getBoundingClientRect();u=k.width/C,S=k.height/C}return sn.autoA11y&&!c&&(f.attributes["aria-hidden"]="true"),Promise.resolve([i,lS({content:i.innerHTML,width:u,height:S,transform:m,title:c,extra:f,watchable:!0})])}}},SF=new RegExp('"',"ug"),mS=[1105920,1112319];function EF(e){var t=e.replace(SF,""),i=Lz(t,0),a=i>=mS[0]&&i<=mS[1],c=t.length===2?t[0]===t[1]:!1;return{value:w_(c?t[0]:t),isSecondary:a||c}}function gS(e,t){var i="".concat(dz).concat(t.replace(":","-"));return new Promise(function(a,c){if(e.getAttribute(i)!==null)return a();var m=Wh(e.children),f=m.filter(function(E){return E.getAttribute(x_)===t})[0],u=iu.getComputedStyle(e,t),S=u.getPropertyValue("font-family").match(yz),C=u.getPropertyValue("font-weight"),k=u.getPropertyValue("content");if(f&&!S)return e.removeChild(f),a();if(S&&k!=="none"&&k!==""){var b=u.getPropertyValue("content"),I=~["Sharp"].indexOf(S[2])?jr:dr,R=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(S[2])?Bf[I][S[2].toLowerCase()]:vz[I][C],B=EF(b),O=B.value,he=B.isSecondary,Y=S[0].startsWith("FontAwesome"),q=px(R,O),V=q;if(Y){var se=Gz(O);se.iconName&&se.prefix&&(q=se.iconName,R=se.prefix)}if(q&&!he&&(!f||f.getAttribute(lx)!==R||f.getAttribute(ux)!==V)){e.setAttribute(i,V),f&&e.removeChild(f);var X=pF(),G=X.extra;G.attributes[x_]=t,I_(q,R).then(function(E){var j=gx(tn(tn({},X),{},{icons:{main:E,mask:mx()},prefix:R,iconName:V,extra:G,watchable:!0})),L=pr.createElementNS("http://www.w3.org/2000/svg","svg");t==="::before"?e.insertBefore(L,e.firstChild):e.appendChild(L),L.outerHTML=j.map(function(ee){return rp(ee)}).join(`
`),e.removeAttribute(i),a()}).catch(c)}else a()}else a()})}function TF(e){return Promise.all([gS(e,"::before"),gS(e,"::after")])}function IF(e){return e.parentNode!==document.head&&!~pz.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(x_)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function yS(e){if(rl)return new Promise(function(t,i){var a=Wh(e.querySelectorAll("*")).filter(IF).map(TF),c=yx.begin("searchPseudoElements");vC(),Promise.all(a).then(function(){c(),P_(),t()}).catch(function(){c(),P_(),i()})})}var CF={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=yS,i}}},provides:function(t){t.pseudoElements2svg=function(i){var a=i.node,c=a===void 0?pr:a;sn.searchPseudoElements&&yS(c)}}},vS=!1,PF={mixout:function(){return{dom:{unwatch:function(){vC(),vS=!0}}}},hooks:function(){return{bootstrap:function(){dS(S_("mutationObserverCallbacks",{}))},noAuto:function(){cF()},watch:function(i){var a=i.observeMutationsRoot;vS?P_():dS(S_("mutationObserverCallbacks",{observeMutationsRoot:a}))}}}},_S=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(a,c){var m=c.toLowerCase().split("-"),f=m[0],u=m.slice(1).join("-");if(f&&u==="h")return a.flipX=!0,a;if(f&&u==="v")return a.flipY=!0,a;if(u=parseFloat(u),isNaN(u))return a;switch(f){case"grow":a.size=a.size+u;break;case"shrink":a.size=a.size-u;break;case"left":a.x=a.x-u;break;case"right":a.x=a.x+u;break;case"up":a.y=a.y-u;break;case"down":a.y=a.y+u;break;case"rotate":a.rotate=a.rotate+u;break}return a},i)},AF={mixout:function(){return{parse:{transform:function(i){return _S(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-transform");return c&&(i.transform=_S(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var a=i.main,c=i.transform,m=i.containerWidth,f=i.iconWidth,u={transform:"translate(".concat(m/2," 256)")},S="translate(".concat(c.x*32,", ").concat(c.y*32,") "),C="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),k="rotate(".concat(c.rotate," 0 0)"),b={transform:"".concat(S," ").concat(C," ").concat(k)},I={transform:"translate(".concat(f/2*-1," -256)")},R={outer:u,inner:b,path:I};return{tag:"g",attributes:tn({},R.outer),children:[{tag:"g",attributes:tn({},R.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:tn(tn({},a.icon.attributes),R.path)}]}]}}}},Y0={x:0,y:0,width:"100%",height:"100%"};function xS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function kF(e){return e.tag==="g"?e.children:[e]}var MF={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-mask"),m=c?yy(c.split(" ").map(function(f){return f.trim()})):mx();return m.prefix||(m.prefix=ou()),i.mask=m,i.maskId=a.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var a=i.children,c=i.attributes,m=i.main,f=i.mask,u=i.maskId,S=i.transform,C=m.width,k=m.icon,b=f.width,I=f.icon,R=Az({transform:S,containerWidth:b,iconWidth:C}),B={tag:"rect",attributes:tn(tn({},Y0),{},{fill:"white"})},O=k.children?{children:k.children.map(xS)}:{},he={tag:"g",attributes:tn({},R.inner),children:[xS(tn({tag:k.tag,attributes:tn(tn({},k.attributes),R.path)},O))]},Y={tag:"g",attributes:tn({},R.outer),children:[he]},q="mask-".concat(u||$f()),V="clip-".concat(u||$f()),se={tag:"mask",attributes:tn(tn({},Y0),{},{id:q,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[B,Y]},X={tag:"defs",children:[{tag:"clipPath",attributes:{id:V},children:kF(I)},se]};return a.push(X,{tag:"rect",attributes:tn({fill:"currentColor","clip-path":"url(#".concat(V,")"),mask:"url(#".concat(q,")")},Y0)}),{children:a,attributes:c}}}},zF={provides:function(t){var i=!1;iu.matchMedia&&(i=iu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var a=[],c={fill:"currentColor"},m={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};a.push({tag:"path",attributes:tn(tn({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var f=tn(tn({},m),{},{attributeName:"opacity"}),u={tag:"circle",attributes:tn(tn({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||u.children.push({tag:"animate",attributes:tn(tn({},m),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:tn(tn({},f),{},{values:"1;0;1;1;0;1;"})}),a.push(u),a.push({tag:"path",attributes:tn(tn({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:tn(tn({},f),{},{values:"1;0;0;0;0;1;"})}]}),i||a.push({tag:"path",attributes:tn(tn({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:tn(tn({},f),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:a}}}},FF={hooks:function(){return{parseNodeAttributes:function(i,a){var c=a.getAttribute("data-fa-symbol"),m=c===null?!1:c===""?!0:c;return i.symbol=m,i}}}},RF=[zz,_F,xF,wF,bF,CF,PF,AF,MF,zF,FF];Zz(RF,{mixoutsTo:Zo});Zo.noAuto;Zo.config;Zo.library;Zo.dom;var A_=Zo.parse;Zo.findIconDefinition;Zo.toHtml;var OF=Zo.icon;Zo.layer;Zo.text;Zo.counter;var xC={exports:{}},jF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",LF=jF,DF=LF;function wC(){}function bC(){}bC.resetWarningCache=wC;var BF=function(){function e(a,c,m,f,u,S){if(S!==DF){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:bC,resetWarningCache:wC};return i.PropTypes=i,i};xC.exports=BF();var NF=xC.exports;const On=qf(NF);function wS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,a)}return i}function ua(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(i),!0).forEach(function(a){gh(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wS(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Ig(e){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ig(e)}function gh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function UF(e,t){if(e==null)return{};var i={},a=Object.keys(e),c,m;for(m=0;m<a.length;m++)c=a[m],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function $F(e,t){if(e==null)return{};var i=UF(e,t),a,c;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(c=0;c<m.length;c++)a=m[c],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function k_(e){return VF(e)||GF(e)||WF(e)||HF()}function VF(e){if(Array.isArray(e))return M_(e)}function GF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WF(e,t){if(e){if(typeof e=="string")return M_(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return M_(e,t)}}function M_(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function HF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZF(e){var t,i=e.beat,a=e.fade,c=e.beatFade,m=e.bounce,f=e.shake,u=e.flash,S=e.spin,C=e.spinPulse,k=e.spinReverse,b=e.pulse,I=e.fixedWidth,R=e.inverse,B=e.border,O=e.listItem,he=e.flip,Y=e.size,q=e.rotation,V=e.pull,se=(t={"fa-beat":i,"fa-fade":a,"fa-beat-fade":c,"fa-bounce":m,"fa-shake":f,"fa-flash":u,"fa-spin":S,"fa-spin-reverse":k,"fa-spin-pulse":C,"fa-pulse":b,"fa-fw":I,"fa-inverse":R,"fa-border":B,"fa-li":O,"fa-flip":he===!0,"fa-flip-horizontal":he==="horizontal"||he==="both","fa-flip-vertical":he==="vertical"||he==="both"},gh(t,"fa-".concat(Y),typeof Y<"u"&&Y!==null),gh(t,"fa-rotate-".concat(q),typeof q<"u"&&q!==null&&q!==0),gh(t,"fa-pull-".concat(V),typeof V<"u"&&V!==null),gh(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(se).map(function(X){return se[X]?X:null}).filter(function(X){return X})}function qF(e){return e=e-0,e===e}function SC(e){return qF(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var XF=["style"];function KF(e){return e.charAt(0).toUpperCase()+e.slice(1)}function YF(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var a=i.indexOf(":"),c=SC(i.slice(0,a)),m=i.slice(a+1).trim();return c.startsWith("webkit")?t[KF(c)]=m:t[c]=m,t},{})}function EC(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var a=(t.children||[]).map(function(S){return EC(e,S)}),c=Object.keys(t.attributes||{}).reduce(function(S,C){var k=t.attributes[C];switch(C){case"class":S.attrs.className=k,delete t.attributes.class;break;case"style":S.attrs.style=YF(k);break;default:C.indexOf("aria-")===0||C.indexOf("data-")===0?S.attrs[C.toLowerCase()]=k:S.attrs[SC(C)]=k}return S},{attrs:{}}),m=i.style,f=m===void 0?{}:m,u=$F(i,XF);return c.attrs.style=ua(ua({},c.attrs.style),f),e.apply(void 0,[t.tag,ua(ua({},c.attrs),u)].concat(k_(a)))}var TC=!1;try{TC=!0}catch{}function JF(){if(!TC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function bS(e){if(e&&Ig(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(A_.icon)return A_.icon(e);if(e===null)return null;if(e&&Ig(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function J0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?gh({},e,t):{}}var SS={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},tu=p1.forwardRef(function(e,t){var i=ua(ua({},SS),e),a=i.icon,c=i.mask,m=i.symbol,f=i.className,u=i.title,S=i.titleId,C=i.maskId,k=bS(a),b=J0("classes",[].concat(k_(ZF(i)),k_((f||"").split(" ")))),I=J0("transform",typeof i.transform=="string"?A_.transform(i.transform):i.transform),R=J0("mask",bS(c)),B=OF(k,ua(ua(ua(ua({},b),I),R),{},{symbol:m,title:u,titleId:S,maskId:C}));if(!B)return JF("Could not find icon",k),null;var O=B.abstract,he={ref:t};return Object.keys(i).forEach(function(Y){SS.hasOwnProperty(Y)||(he[Y]=i[Y])}),QF(O[0],he)});tu.displayName="FontAwesomeIcon";tu.propTypes={beat:On.bool,border:On.bool,beatFade:On.bool,bounce:On.bool,className:On.string,fade:On.bool,flash:On.bool,mask:On.oneOfType([On.object,On.array,On.string]),maskId:On.string,fixedWidth:On.bool,inverse:On.bool,flip:On.oneOf([!0,!1,"horizontal","vertical","both"]),icon:On.oneOfType([On.object,On.array,On.string]),listItem:On.bool,pull:On.oneOf(["right","left"]),pulse:On.bool,rotation:On.oneOf([0,90,180,270]),shake:On.bool,size:On.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:On.bool,spinPulse:On.bool,spinReverse:On.bool,symbol:On.oneOfType([On.bool,On.string]),title:On.string,titleId:On.string,transform:On.oneOfType([On.string,On.object]),swapOpacity:On.bool};var QF=EC.bind(null,p1.createElement),eR={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},z_={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},tR={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"]},nR=tR;function xm(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var IC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(a,c,m){function f(C,k){if(!c[C]){if(!a[C]){var b=typeof xm=="function"&&xm;if(!k&&b)return b(C,!0);if(u)return u(C,!0);var I=new Error("Cannot find module '"+C+"'");throw I.code="MODULE_NOT_FOUND",I}var R=c[C]={exports:{}};a[C][0].call(R.exports,function(B){var O=a[C][1][B];return f(O||B)},R,R.exports,i,a,c,m)}return c[C].exports}for(var u=typeof xm=="function"&&xm,S=0;S<m.length;S++)f(m[S]);return f}return i}()({1:[function(i,a,c){c.byteLength=I,c.toByteArray=B,c.fromByteArray=Y;for(var m=[],f=[],u=typeof Uint8Array<"u"?Uint8Array:Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,k=S.length;C<k;++C)m[C]=S[C],f[S.charCodeAt(C)]=C;f[45]=62,f[95]=63;function b(q){var V=q.length;if(V%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var se=q.indexOf("=");se===-1&&(se=V);var X=se===V?0:4-se%4;return[se,X]}function I(q){var V=b(q),se=V[0],X=V[1];return(se+X)*3/4-X}function R(q,V,se){return(V+se)*3/4-se}function B(q){var V,se=b(q),X=se[0],G=se[1],E=new u(R(q,X,G)),j=0,L=G>0?X-4:X,ee;for(ee=0;ee<L;ee+=4)V=f[q.charCodeAt(ee)]<<18|f[q.charCodeAt(ee+1)]<<12|f[q.charCodeAt(ee+2)]<<6|f[q.charCodeAt(ee+3)],E[j++]=V>>16&255,E[j++]=V>>8&255,E[j++]=V&255;return G===2&&(V=f[q.charCodeAt(ee)]<<2|f[q.charCodeAt(ee+1)]>>4,E[j++]=V&255),G===1&&(V=f[q.charCodeAt(ee)]<<10|f[q.charCodeAt(ee+1)]<<4|f[q.charCodeAt(ee+2)]>>2,E[j++]=V>>8&255,E[j++]=V&255),E}function O(q){return m[q>>18&63]+m[q>>12&63]+m[q>>6&63]+m[q&63]}function he(q,V,se){for(var X,G=[],E=V;E<se;E+=3)X=(q[E]<<16&16711680)+(q[E+1]<<8&65280)+(q[E+2]&255),G.push(O(X));return G.join("")}function Y(q){for(var V,se=q.length,X=se%3,G=[],E=16383,j=0,L=se-X;j<L;j+=E)G.push(he(q,j,j+E>L?L:j+E));return X===1?(V=q[se-1],G.push(m[V>>2]+m[V<<4&63]+"==")):X===2&&(V=(q[se-2]<<8)+q[se-1],G.push(m[V>>10]+m[V>>4&63]+m[V<<2&63]+"=")),G.join("")}},{}],2:[function(i,a,c){(function(m){(function(){var f=i("base64-js"),u=i("ieee754");c.Buffer=b,c.SlowBuffer=X,c.INSPECT_MAX_BYTES=50;var S=2147483647;c.kMaxLength=S,b.TYPED_ARRAY_SUPPORT=C(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{var Se=new Uint8Array(1);return Se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Se.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function k(Se){if(Se>S)throw new RangeError('The value "'+Se+'" is invalid for option "size"');var N=new Uint8Array(Se);return N.__proto__=b.prototype,N}function b(Se,N,D){if(typeof Se=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(Se)}return I(Se,N,D)}typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192;function I(Se,N,D){if(typeof Se=="string")return he(Se,N);if(ArrayBuffer.isView(Se))return Y(Se);if(Se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se);if(hn(Se,ArrayBuffer)||Se&&hn(Se.buffer,ArrayBuffer))return q(Se,N,D);if(typeof Se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var xe=Se.valueOf&&Se.valueOf();if(xe!=null&&xe!==Se)return b.from(xe,N,D);var Xe=V(Se);if(Xe)return Xe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Se[Symbol.toPrimitive]=="function")return b.from(Se[Symbol.toPrimitive]("string"),N,D);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Se)}b.from=function(Se,N,D){return I(Se,N,D)},b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array;function R(Se){if(typeof Se!="number")throw new TypeError('"size" argument must be of type number');if(Se<0)throw new RangeError('The value "'+Se+'" is invalid for option "size"')}function B(Se,N,D){return R(Se),Se<=0?k(Se):N!==void 0?typeof D=="string"?k(Se).fill(N,D):k(Se).fill(N):k(Se)}b.alloc=function(Se,N,D){return B(Se,N,D)};function O(Se){return R(Se),k(Se<0?0:se(Se)|0)}b.allocUnsafe=function(Se){return O(Se)},b.allocUnsafeSlow=function(Se){return O(Se)};function he(Se,N){if((typeof N!="string"||N==="")&&(N="utf8"),!b.isEncoding(N))throw new TypeError("Unknown encoding: "+N);var D=G(Se,N)|0,xe=k(D),Xe=xe.write(Se,N);return Xe!==D&&(xe=xe.slice(0,Xe)),xe}function Y(Se){for(var N=Se.length<0?0:se(Se.length)|0,D=k(N),xe=0;xe<N;xe+=1)D[xe]=Se[xe]&255;return D}function q(Se,N,D){if(N<0||Se.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(Se.byteLength<N+(D||0))throw new RangeError('"length" is outside of buffer bounds');var xe;return N===void 0&&D===void 0?xe=new Uint8Array(Se):D===void 0?xe=new Uint8Array(Se,N):xe=new Uint8Array(Se,N,D),xe.__proto__=b.prototype,xe}function V(Se){if(b.isBuffer(Se)){var N=se(Se.length)|0,D=k(N);return D.length===0||Se.copy(D,0,0,N),D}if(Se.length!==void 0)return typeof Se.length!="number"||qt(Se.length)?k(0):Y(Se);if(Se.type==="Buffer"&&Array.isArray(Se.data))return Y(Se.data)}function se(Se){if(Se>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Se|0}function X(Se){return+Se!=Se&&(Se=0),b.alloc(+Se)}b.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==b.prototype},b.compare=function(N,D){if(hn(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),hn(D,Uint8Array)&&(D=b.from(D,D.offset,D.byteLength)),!b.isBuffer(N)||!b.isBuffer(D))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===D)return 0;for(var xe=N.length,Xe=D.length,tt=0,ct=Math.min(xe,Xe);tt<ct;++tt)if(N[tt]!==D[tt]){xe=N[tt],Xe=D[tt];break}return xe<Xe?-1:Xe<xe?1:0},b.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(N,D){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return b.alloc(0);var xe;if(D===void 0)for(D=0,xe=0;xe<N.length;++xe)D+=N[xe].length;var Xe=b.allocUnsafe(D),tt=0;for(xe=0;xe<N.length;++xe){var ct=N[xe];if(hn(ct,Uint8Array)&&(ct=b.from(ct)),!b.isBuffer(ct))throw new TypeError('"list" argument must be an Array of Buffers');ct.copy(Xe,tt),tt+=ct.length}return Xe};function G(Se,N){if(b.isBuffer(Se))return Se.length;if(ArrayBuffer.isView(Se)||hn(Se,ArrayBuffer))return Se.byteLength;if(typeof Se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Se);var D=Se.length,xe=arguments.length>2&&arguments[2]===!0;if(!xe&&D===0)return 0;for(var Xe=!1;;)switch(N){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":return Ht(Se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return it(Se).length;default:if(Xe)return xe?-1:Ht(Se).length;N=(""+N).toLowerCase(),Xe=!0}}b.byteLength=G;function E(Se,N,D){var xe=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,N>>>=0,D<=N))return"";for(Se||(Se="utf8");;)switch(Se){case"hex":return Pe(this,N,D);case"utf8":case"utf-8":return ne(this,N,D);case"ascii":return Te(this,N,D);case"latin1":case"binary":return Ne(this,N,D);case"base64":return J(this,N,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,N,D);default:if(xe)throw new TypeError("Unknown encoding: "+Se);Se=(Se+"").toLowerCase(),xe=!0}}b.prototype._isBuffer=!0;function j(Se,N,D){var xe=Se[N];Se[N]=Se[D],Se[D]=xe}b.prototype.swap16=function(){var N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<N;D+=2)j(this,D,D+1);return this},b.prototype.swap32=function(){var N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<N;D+=4)j(this,D,D+3),j(this,D+1,D+2);return this},b.prototype.swap64=function(){var N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<N;D+=8)j(this,D,D+7),j(this,D+1,D+6),j(this,D+2,D+5),j(this,D+3,D+4);return this},b.prototype.toString=function(){var N=this.length;return N===0?"":arguments.length===0?ne(this,0,N):E.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(N){if(!b.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:b.compare(this,N)===0},b.prototype.inspect=function(){var N="",D=c.INSPECT_MAX_BYTES;return N=this.toString("hex",0,D).replace(/(.{2})/g,"$1 ").trim(),this.length>D&&(N+=" ... "),"<Buffer "+N+">"},b.prototype.compare=function(N,D,xe,Xe,tt){if(hn(N,Uint8Array)&&(N=b.from(N,N.offset,N.byteLength)),!b.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(D===void 0&&(D=0),xe===void 0&&(xe=N?N.length:0),Xe===void 0&&(Xe=0),tt===void 0&&(tt=this.length),D<0||xe>N.length||Xe<0||tt>this.length)throw new RangeError("out of range index");if(Xe>=tt&&D>=xe)return 0;if(Xe>=tt)return-1;if(D>=xe)return 1;if(D>>>=0,xe>>>=0,Xe>>>=0,tt>>>=0,this===N)return 0;for(var ct=tt-Xe,ae=xe-D,M=Math.min(ct,ae),U=this.slice(Xe,tt),Ee=N.slice(D,xe),We=0;We<M;++We)if(U[We]!==Ee[We]){ct=U[We],ae=Ee[We];break}return ct<ae?-1:ae<ct?1:0};function L(Se,N,D,xe,Xe){if(Se.length===0)return-1;if(typeof D=="string"?(xe=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,qt(D)&&(D=Xe?0:Se.length-1),D<0&&(D=Se.length+D),D>=Se.length){if(Xe)return-1;D=Se.length-1}else if(D<0)if(Xe)D=0;else return-1;if(typeof N=="string"&&(N=b.from(N,xe)),b.isBuffer(N))return N.length===0?-1:ee(Se,N,D,xe,Xe);if(typeof N=="number")return N=N&255,typeof Uint8Array.prototype.indexOf=="function"?Xe?Uint8Array.prototype.indexOf.call(Se,N,D):Uint8Array.prototype.lastIndexOf.call(Se,N,D):ee(Se,[N],D,xe,Xe);throw new TypeError("val must be string, number or Buffer")}function ee(Se,N,D,xe,Xe){var tt=1,ct=Se.length,ae=N.length;if(xe!==void 0&&(xe=String(xe).toLowerCase(),xe==="ucs2"||xe==="ucs-2"||xe==="utf16le"||xe==="utf-16le")){if(Se.length<2||N.length<2)return-1;tt=2,ct/=2,ae/=2,D/=2}function M(Ve,Et){return tt===1?Ve[Et]:Ve.readUInt16BE(Et*tt)}var U;if(Xe){var Ee=-1;for(U=D;U<ct;U++)if(M(Se,U)===M(N,Ee===-1?0:U-Ee)){if(Ee===-1&&(Ee=U),U-Ee+1===ae)return Ee*tt}else Ee!==-1&&(U-=U-Ee),Ee=-1}else for(D+ae>ct&&(D=ct-ae),U=D;U>=0;U--){for(var We=!0,rt=0;rt<ae;rt++)if(M(Se,U+rt)!==M(N,rt)){We=!1;break}if(We)return U}return-1}b.prototype.includes=function(N,D,xe){return this.indexOf(N,D,xe)!==-1},b.prototype.indexOf=function(N,D,xe){return L(this,N,D,xe,!0)},b.prototype.lastIndexOf=function(N,D,xe){return L(this,N,D,xe,!1)};function Z(Se,N,D,xe){D=Number(D)||0;var Xe=Se.length-D;xe?(xe=Number(xe),xe>Xe&&(xe=Xe)):xe=Xe;var tt=N.length;xe>tt/2&&(xe=tt/2);for(var ct=0;ct<xe;++ct){var ae=parseInt(N.substr(ct*2,2),16);if(qt(ae))return ct;Se[D+ct]=ae}return ct}function ve(Se,N,D,xe){return bn(Ht(N,Se.length-D),Se,D,xe)}function _e(Se,N,D,xe){return bn(Lt(N),Se,D,xe)}function pe(Se,N,D,xe){return _e(Se,N,D,xe)}function oe(Se,N,D,xe){return bn(it(N),Se,D,xe)}function ce(Se,N,D,xe){return bn(cn(N,Se.length-D),Se,D,xe)}b.prototype.write=function(N,D,xe,Xe){if(D===void 0)Xe="utf8",xe=this.length,D=0;else if(xe===void 0&&typeof D=="string")Xe=D,xe=this.length,D=0;else if(isFinite(D))D=D>>>0,isFinite(xe)?(xe=xe>>>0,Xe===void 0&&(Xe="utf8")):(Xe=xe,xe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var tt=this.length-D;if((xe===void 0||xe>tt)&&(xe=tt),N.length>0&&(xe<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");Xe||(Xe="utf8");for(var ct=!1;;)switch(Xe){case"hex":return Z(this,N,D,xe);case"utf8":case"utf-8":return ve(this,N,D,xe);case"ascii":return _e(this,N,D,xe);case"latin1":case"binary":return pe(this,N,D,xe);case"base64":return oe(this,N,D,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ce(this,N,D,xe);default:if(ct)throw new TypeError("Unknown encoding: "+Xe);Xe=(""+Xe).toLowerCase(),ct=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(Se,N,D){return N===0&&D===Se.length?f.fromByteArray(Se):f.fromByteArray(Se.slice(N,D))}function ne(Se,N,D){D=Math.min(Se.length,D);for(var xe=[],Xe=N;Xe<D;){var tt=Se[Xe],ct=null,ae=tt>239?4:tt>223?3:tt>191?2:1;if(Xe+ae<=D){var M,U,Ee,We;switch(ae){case 1:tt<128&&(ct=tt);break;case 2:M=Se[Xe+1],(M&192)===128&&(We=(tt&31)<<6|M&63,We>127&&(ct=We));break;case 3:M=Se[Xe+1],U=Se[Xe+2],(M&192)===128&&(U&192)===128&&(We=(tt&15)<<12|(M&63)<<6|U&63,We>2047&&(We<55296||We>57343)&&(ct=We));break;case 4:M=Se[Xe+1],U=Se[Xe+2],Ee=Se[Xe+3],(M&192)===128&&(U&192)===128&&(Ee&192)===128&&(We=(tt&15)<<18|(M&63)<<12|(U&63)<<6|Ee&63,We>65535&&We<1114112&&(ct=We))}}ct===null?(ct=65533,ae=1):ct>65535&&(ct-=65536,xe.push(ct>>>10&1023|55296),ct=56320|ct&1023),xe.push(ct),Xe+=ae}return we(xe)}var de=4096;function we(Se){var N=Se.length;if(N<=de)return String.fromCharCode.apply(String,Se);for(var D="",xe=0;xe<N;)D+=String.fromCharCode.apply(String,Se.slice(xe,xe+=de));return D}function Te(Se,N,D){var xe="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(Se[Xe]&127);return xe}function Ne(Se,N,D){var xe="";D=Math.min(Se.length,D);for(var Xe=N;Xe<D;++Xe)xe+=String.fromCharCode(Se[Xe]);return xe}function Pe(Se,N,D){var xe=Se.length;(!N||N<0)&&(N=0),(!D||D<0||D>xe)&&(D=xe);for(var Xe="",tt=N;tt<D;++tt)Xe+=wt(Se[tt]);return Xe}function ze(Se,N,D){for(var xe=Se.slice(N,D),Xe="",tt=0;tt<xe.length;tt+=2)Xe+=String.fromCharCode(xe[tt]+xe[tt+1]*256);return Xe}b.prototype.slice=function(N,D){var xe=this.length;N=~~N,D=D===void 0?xe:~~D,N<0?(N+=xe,N<0&&(N=0)):N>xe&&(N=xe),D<0?(D+=xe,D<0&&(D=0)):D>xe&&(D=xe),D<N&&(D=N);var Xe=this.subarray(N,D);return Xe.__proto__=b.prototype,Xe};function qe(Se,N,D){if(Se%1!==0||Se<0)throw new RangeError("offset is not uint");if(Se+N>D)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=this[N],tt=1,ct=0;++ct<D&&(tt*=256);)Xe+=this[N+ct]*tt;return Xe},b.prototype.readUIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=this[N+--D],tt=1;D>0&&(tt*=256);)Xe+=this[N+--D]*tt;return Xe},b.prototype.readUInt8=function(N,D){return N=N>>>0,D||qe(N,1,this.length),this[N]},b.prototype.readUInt16LE=function(N,D){return N=N>>>0,D||qe(N,2,this.length),this[N]|this[N+1]<<8},b.prototype.readUInt16BE=function(N,D){return N=N>>>0,D||qe(N,2,this.length),this[N]<<8|this[N+1]},b.prototype.readUInt32LE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},b.prototype.readUInt32BE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},b.prototype.readIntLE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=this[N],tt=1,ct=0;++ct<D&&(tt*=256);)Xe+=this[N+ct]*tt;return tt*=128,Xe>=tt&&(Xe-=Math.pow(2,8*D)),Xe},b.prototype.readIntBE=function(N,D,xe){N=N>>>0,D=D>>>0,xe||qe(N,D,this.length);for(var Xe=D,tt=1,ct=this[N+--Xe];Xe>0&&(tt*=256);)ct+=this[N+--Xe]*tt;return tt*=128,ct>=tt&&(ct-=Math.pow(2,8*D)),ct},b.prototype.readInt8=function(N,D){return N=N>>>0,D||qe(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},b.prototype.readInt16LE=function(N,D){N=N>>>0,D||qe(N,2,this.length);var xe=this[N]|this[N+1]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt16BE=function(N,D){N=N>>>0,D||qe(N,2,this.length);var xe=this[N+1]|this[N]<<8;return xe&32768?xe|4294901760:xe},b.prototype.readInt32LE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},b.prototype.readInt32BE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},b.prototype.readFloatLE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),u.read(this,N,!0,23,4)},b.prototype.readFloatBE=function(N,D){return N=N>>>0,D||qe(N,4,this.length),u.read(this,N,!1,23,4)},b.prototype.readDoubleLE=function(N,D){return N=N>>>0,D||qe(N,8,this.length),u.read(this,N,!0,52,8)},b.prototype.readDoubleBE=function(N,D){return N=N>>>0,D||qe(N,8,this.length),u.read(this,N,!1,52,8)};function He(Se,N,D,xe,Xe,tt){if(!b.isBuffer(Se))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>Xe||N<tt)throw new RangeError('"value" argument is out of bounds');if(D+xe>Se.length)throw new RangeError("Index out of range")}b.prototype.writeUIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var tt=Math.pow(2,8*xe)-1;He(this,N,D,xe,tt,0)}var ct=1,ae=0;for(this[D]=N&255;++ae<xe&&(ct*=256);)this[D+ae]=N/ct&255;return D+xe},b.prototype.writeUIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,xe=xe>>>0,!Xe){var tt=Math.pow(2,8*xe)-1;He(this,N,D,xe,tt,0)}var ct=xe-1,ae=1;for(this[D+ct]=N&255;--ct>=0&&(ae*=256);)this[D+ct]=N/ae&255;return D+xe},b.prototype.writeUInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,255,0),this[D]=N&255,D+1},b.prototype.writeUInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeUInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,65535,0),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeUInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D+3]=N>>>24,this[D+2]=N>>>16,this[D+1]=N>>>8,this[D]=N&255,D+4},b.prototype.writeUInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,4294967295,0),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4},b.prototype.writeIntLE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*xe-1);He(this,N,D,xe,tt-1,-tt)}var ct=0,ae=1,M=0;for(this[D]=N&255;++ct<xe&&(ae*=256);)N<0&&M===0&&this[D+ct-1]!==0&&(M=1),this[D+ct]=(N/ae>>0)-M&255;return D+xe},b.prototype.writeIntBE=function(N,D,xe,Xe){if(N=+N,D=D>>>0,!Xe){var tt=Math.pow(2,8*xe-1);He(this,N,D,xe,tt-1,-tt)}var ct=xe-1,ae=1,M=0;for(this[D+ct]=N&255;--ct>=0&&(ae*=256);)N<0&&M===0&&this[D+ct+1]!==0&&(M=1),this[D+ct]=(N/ae>>0)-M&255;return D+xe},b.prototype.writeInt8=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,1,127,-128),N<0&&(N=255+N+1),this[D]=N&255,D+1},b.prototype.writeInt16LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N&255,this[D+1]=N>>>8,D+2},b.prototype.writeInt16BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,2,32767,-32768),this[D]=N>>>8,this[D+1]=N&255,D+2},b.prototype.writeInt32LE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),this[D]=N&255,this[D+1]=N>>>8,this[D+2]=N>>>16,this[D+3]=N>>>24,D+4},b.prototype.writeInt32BE=function(N,D,xe){return N=+N,D=D>>>0,xe||He(this,N,D,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[D]=N>>>24,this[D+1]=N>>>16,this[D+2]=N>>>8,this[D+3]=N&255,D+4};function ot(Se,N,D,xe,Xe,tt){if(D+xe>Se.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function ht(Se,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||ot(Se,N,D,4),u.write(Se,N,D,xe,23,4),D+4}b.prototype.writeFloatLE=function(N,D,xe){return ht(this,N,D,!0,xe)},b.prototype.writeFloatBE=function(N,D,xe){return ht(this,N,D,!1,xe)};function xt(Se,N,D,xe,Xe){return N=+N,D=D>>>0,Xe||ot(Se,N,D,8),u.write(Se,N,D,xe,52,8),D+8}b.prototype.writeDoubleLE=function(N,D,xe){return xt(this,N,D,!0,xe)},b.prototype.writeDoubleBE=function(N,D,xe){return xt(this,N,D,!1,xe)},b.prototype.copy=function(N,D,xe,Xe){if(!b.isBuffer(N))throw new TypeError("argument should be a Buffer");if(xe||(xe=0),!Xe&&Xe!==0&&(Xe=this.length),D>=N.length&&(D=N.length),D||(D=0),Xe>0&&Xe<xe&&(Xe=xe),Xe===xe||N.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(xe<0||xe>=this.length)throw new RangeError("Index out of range");if(Xe<0)throw new RangeError("sourceEnd out of bounds");Xe>this.length&&(Xe=this.length),N.length-D<Xe-xe&&(Xe=N.length-D+xe);var tt=Xe-xe;if(this===N&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(D,xe,Xe);else if(this===N&&xe<D&&D<Xe)for(var ct=tt-1;ct>=0;--ct)N[ct+D]=this[ct+xe];else Uint8Array.prototype.set.call(N,this.subarray(xe,Xe),D);return tt},b.prototype.fill=function(N,D,xe,Xe){if(typeof N=="string"){if(typeof D=="string"?(Xe=D,D=0,xe=this.length):typeof xe=="string"&&(Xe=xe,xe=this.length),Xe!==void 0&&typeof Xe!="string")throw new TypeError("encoding must be a string");if(typeof Xe=="string"&&!b.isEncoding(Xe))throw new TypeError("Unknown encoding: "+Xe);if(N.length===1){var tt=N.charCodeAt(0);(Xe==="utf8"&&tt<128||Xe==="latin1")&&(N=tt)}}else typeof N=="number"&&(N=N&255);if(D<0||this.length<D||this.length<xe)throw new RangeError("Out of range index");if(xe<=D)return this;D=D>>>0,xe=xe===void 0?this.length:xe>>>0,N||(N=0);var ct;if(typeof N=="number")for(ct=D;ct<xe;++ct)this[ct]=N;else{var ae=b.isBuffer(N)?N:b.from(N,Xe),M=ae.length;if(M===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ct=0;ct<xe-D;++ct)this[ct+D]=ae[ct%M]}return this};var kt=/[^+/0-9A-Za-z-_]/g;function pt(Se){if(Se=Se.split("=")[0],Se=Se.trim().replace(kt,""),Se.length<2)return"";for(;Se.length%4!==0;)Se=Se+"=";return Se}function wt(Se){return Se<16?"0"+Se.toString(16):Se.toString(16)}function Ht(Se,N){N=N||1/0;for(var D,xe=Se.length,Xe=null,tt=[],ct=0;ct<xe;++ct){if(D=Se.charCodeAt(ct),D>55295&&D<57344){if(!Xe){if(D>56319){(N-=3)>-1&&tt.push(239,191,189);continue}else if(ct+1===xe){(N-=3)>-1&&tt.push(239,191,189);continue}Xe=D;continue}if(D<56320){(N-=3)>-1&&tt.push(239,191,189),Xe=D;continue}D=(Xe-55296<<10|D-56320)+65536}else Xe&&(N-=3)>-1&&tt.push(239,191,189);if(Xe=null,D<128){if((N-=1)<0)break;tt.push(D)}else if(D<2048){if((N-=2)<0)break;tt.push(D>>6|192,D&63|128)}else if(D<65536){if((N-=3)<0)break;tt.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((N-=4)<0)break;tt.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return tt}function Lt(Se){for(var N=[],D=0;D<Se.length;++D)N.push(Se.charCodeAt(D)&255);return N}function cn(Se,N){for(var D,xe,Xe,tt=[],ct=0;ct<Se.length&&!((N-=2)<0);++ct)D=Se.charCodeAt(ct),xe=D>>8,Xe=D%256,tt.push(Xe),tt.push(xe);return tt}function it(Se){return f.toByteArray(pt(Se))}function bn(Se,N,D,xe){for(var Xe=0;Xe<xe&&!(Xe+D>=N.length||Xe>=Se.length);++Xe)N[Xe+D]=Se[Xe];return Xe}function hn(Se,N){return Se instanceof N||Se!=null&&Se.constructor!=null&&Se.constructor.name!=null&&Se.constructor.name===N.name}function qt(Se){return Se!==Se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,a,c){const m=i("./validator"),f=i("./xmlparser/XMLParser"),u=i("./xmlbuilder/json2xml");a.exports={XMLParser:f,XMLValidator:m,XMLBuilder:u}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,a,c){const m=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",f=m+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",u="["+m+"]["+f+"]*",S=new RegExp("^"+u+"$"),C=function(b,I){const R=[];let B=I.exec(b);for(;B;){const O=[];O.startIndex=I.lastIndex-B[0].length;const he=B.length;for(let Y=0;Y<he;Y++)O.push(B[Y]);R.push(O),B=I.exec(b)}return R},k=function(b){const I=S.exec(b);return!(I===null||typeof I>"u")};c.isExist=function(b){return typeof b<"u"},c.isEmptyObject=function(b){return Object.keys(b).length===0},c.merge=function(b,I,R){if(I){const B=Object.keys(I),O=B.length;for(let he=0;he<O;he++)R==="strict"?b[B[he]]=[I[B[he]]]:b[B[he]]=I[B[he]]}},c.getValue=function(b){return c.isExist(b)?b:""},c.isName=k,c.getAllMatches=C,c.nameRegexp=u},{}],5:[function(i,a,c){const m=i("./util"),f={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(G,E){E=Object.assign({},f,E);const j=[];let L=!1,ee=!1;G[0]==="\uFEFF"&&(G=G.substr(1));for(let Z=0;Z<G.length;Z++)if(G[Z]==="<"&&G[Z+1]==="?"){if(Z+=2,Z=S(G,Z),Z.err)return Z}else if(G[Z]==="<"){let ve=Z;if(Z++,G[Z]==="!"){Z=C(G,Z);continue}else{let _e=!1;G[Z]==="/"&&(_e=!0,Z++);let pe="";for(;Z<G.length&&G[Z]!==">"&&G[Z]!==" "&&G[Z]!=="	"&&G[Z]!==`
`&&G[Z]!=="\r";Z++)pe+=G[Z];if(pe=pe.trim(),pe[pe.length-1]==="/"&&(pe=pe.substring(0,pe.length-1),Z--),!V(pe)){let J;return pe.trim().length===0?J="Invalid space after '<'.":J="Tag '"+pe+"' is an invalid name.",Y("InvalidTag",J,se(G,Z))}const oe=I(G,Z);if(oe===!1)return Y("InvalidAttr","Attributes for '"+pe+"' have open quote.",se(G,Z));let ce=oe.value;if(Z=oe.index,ce[ce.length-1]==="/"){const J=Z-ce.length;ce=ce.substring(0,ce.length-1);const ne=B(ce,E);if(ne===!0)L=!0;else return Y(ne.err.code,ne.err.msg,se(G,J+ne.err.line))}else if(_e)if(oe.tagClosed){if(ce.trim().length>0)return Y("InvalidTag","Closing tag '"+pe+"' can't have attributes or invalid starting.",se(G,ve));{const J=j.pop();if(pe!==J.tagName){let ne=se(G,J.tagStartPos);return Y("InvalidTag","Expected closing tag '"+J.tagName+"' (opened in line "+ne.line+", col "+ne.col+") instead of closing tag '"+pe+"'.",se(G,ve))}j.length==0&&(ee=!0)}}else return Y("InvalidTag","Closing tag '"+pe+"' doesn't have proper closing.",se(G,Z));else{const J=B(ce,E);if(J!==!0)return Y(J.err.code,J.err.msg,se(G,Z-ce.length+J.err.line));if(ee===!0)return Y("InvalidXml","Multiple possible root nodes found.",se(G,Z));E.unpairedTags.indexOf(pe)!==-1||j.push({tagName:pe,tagStartPos:ve}),L=!0}for(Z++;Z<G.length;Z++)if(G[Z]==="<")if(G[Z+1]==="!"){Z++,Z=C(G,Z);continue}else if(G[Z+1]==="?"){if(Z=S(G,++Z),Z.err)return Z}else break;else if(G[Z]==="&"){const J=he(G,Z);if(J==-1)return Y("InvalidChar","char '&' is not expected.",se(G,Z));Z=J}else if(ee===!0&&!u(G[Z]))return Y("InvalidXml","Extra text at the end",se(G,Z));G[Z]==="<"&&Z--}}else{if(u(G[Z]))continue;return Y("InvalidChar","char '"+G[Z]+"' is not expected.",se(G,Z))}if(L){if(j.length==1)return Y("InvalidTag","Unclosed tag '"+j[0].tagName+"'.",se(G,j[0].tagStartPos));if(j.length>0)return Y("InvalidXml","Invalid '"+JSON.stringify(j.map(Z=>Z.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Y("InvalidXml","Start tag expected.",1);return!0};function u(G){return G===" "||G==="	"||G===`
`||G==="\r"}function S(G,E){const j=E;for(;E<G.length;E++)if(G[E]=="?"||G[E]==" "){const L=G.substr(j,E-j);if(E>5&&L==="xml")return Y("InvalidXml","XML declaration allowed only at the start of the document.",se(G,E));if(G[E]=="?"&&G[E+1]==">"){E++;break}else continue}return E}function C(G,E){if(G.length>E+5&&G[E+1]==="-"&&G[E+2]==="-"){for(E+=3;E<G.length;E++)if(G[E]==="-"&&G[E+1]==="-"&&G[E+2]===">"){E+=2;break}}else if(G.length>E+8&&G[E+1]==="D"&&G[E+2]==="O"&&G[E+3]==="C"&&G[E+4]==="T"&&G[E+5]==="Y"&&G[E+6]==="P"&&G[E+7]==="E"){let j=1;for(E+=8;E<G.length;E++)if(G[E]==="<")j++;else if(G[E]===">"&&(j--,j===0))break}else if(G.length>E+9&&G[E+1]==="["&&G[E+2]==="C"&&G[E+3]==="D"&&G[E+4]==="A"&&G[E+5]==="T"&&G[E+6]==="A"&&G[E+7]==="["){for(E+=8;E<G.length;E++)if(G[E]==="]"&&G[E+1]==="]"&&G[E+2]===">"){E+=2;break}}return E}const k='"',b="'";function I(G,E){let j="",L="",ee=!1;for(;E<G.length;E++){if(G[E]===k||G[E]===b)L===""?L=G[E]:L!==G[E]||(L="");else if(G[E]===">"&&L===""){ee=!0;break}j+=G[E]}return L!==""?!1:{value:j,index:E,tagClosed:ee}}const R=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function B(G,E){const j=m.getAllMatches(G,R),L={};for(let ee=0;ee<j.length;ee++){if(j[ee][1].length===0)return Y("InvalidAttr","Attribute '"+j[ee][2]+"' has no space in starting.",X(j[ee]));if(j[ee][3]!==void 0&&j[ee][4]===void 0)return Y("InvalidAttr","Attribute '"+j[ee][2]+"' is without value.",X(j[ee]));if(j[ee][3]===void 0&&!E.allowBooleanAttributes)return Y("InvalidAttr","boolean attribute '"+j[ee][2]+"' is not allowed.",X(j[ee]));const Z=j[ee][2];if(!q(Z))return Y("InvalidAttr","Attribute '"+Z+"' is an invalid name.",X(j[ee]));if(!L.hasOwnProperty(Z))L[Z]=1;else return Y("InvalidAttr","Attribute '"+Z+"' is repeated.",X(j[ee]))}return!0}function O(G,E){let j=/\d/;for(G[E]==="x"&&(E++,j=/[\da-fA-F]/);E<G.length;E++){if(G[E]===";")return E;if(!G[E].match(j))break}return-1}function he(G,E){if(E++,G[E]===";")return-1;if(G[E]==="#")return E++,O(G,E);let j=0;for(;E<G.length;E++,j++)if(!(G[E].match(/\w/)&&j<20)){if(G[E]===";")break;return-1}return E}function Y(G,E,j){return{err:{code:G,msg:E,line:j.line||j,col:j.col}}}function q(G){return m.isName(G)}function V(G){return m.isName(G)}function se(G,E){const j=G.substring(0,E).split(/\r?\n/);return{line:j.length,col:j[j.length-1].length+1}}function X(G){return G.startIndex+G[1].length}},{"./util":4}],6:[function(i,a,c){const m=i("./orderedJs2Xml"),f={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(b,I){return I},attributeValueProcessor:function(b,I){return I},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(b){this.options=Object.assign({},f,b),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=k),this.processTextOrObjNode=S,this.options.format?(this.indentate=C,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}u.prototype.build=function(b){return this.options.preserveOrder?m(b,this.options):(Array.isArray(b)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(b={[this.options.arrayNodeName]:b}),this.j2x(b,0).val)},u.prototype.j2x=function(b,I){let R="",B="";for(let O in b)if(Object.prototype.hasOwnProperty.call(b,O))if(typeof b[O]>"u")this.isAttribute(O)&&(B+="");else if(b[O]===null)this.isAttribute(O)?B+="":O[0]==="?"?B+=this.indentate(I)+"<"+O+"?"+this.tagEndChar:B+=this.indentate(I)+"<"+O+"/"+this.tagEndChar;else if(b[O]instanceof Date)B+=this.buildTextValNode(b[O],O,"",I);else if(typeof b[O]!="object"){const he=this.isAttribute(O);if(he)R+=this.buildAttrPairStr(he,""+b[O]);else if(O===this.options.textNodeName){let Y=this.options.tagValueProcessor(O,""+b[O]);B+=this.replaceEntitiesValue(Y)}else B+=this.buildTextValNode(b[O],O,"",I)}else if(Array.isArray(b[O])){const he=b[O].length;let Y="";for(let q=0;q<he;q++){const V=b[O][q];typeof V>"u"||(V===null?O[0]==="?"?B+=this.indentate(I)+"<"+O+"?"+this.tagEndChar:B+=this.indentate(I)+"<"+O+"/"+this.tagEndChar:typeof V=="object"?this.options.oneListGroup?Y+=this.j2x(V,I+1).val:Y+=this.processTextOrObjNode(V,O,I):Y+=this.buildTextValNode(V,O,"",I))}this.options.oneListGroup&&(Y=this.buildObjectNode(Y,O,"",I)),B+=Y}else if(this.options.attributesGroupName&&O===this.options.attributesGroupName){const he=Object.keys(b[O]),Y=he.length;for(let q=0;q<Y;q++)R+=this.buildAttrPairStr(he[q],""+b[O][he[q]])}else B+=this.processTextOrObjNode(b[O],O,I);return{attrStr:R,val:B}},u.prototype.buildAttrPairStr=function(b,I){return I=this.options.attributeValueProcessor(b,""+I),I=this.replaceEntitiesValue(I),this.options.suppressBooleanAttributes&&I==="true"?" "+b:" "+b+'="'+I+'"'};function S(b,I,R){const B=this.j2x(b,R+1);return b[this.options.textNodeName]!==void 0&&Object.keys(b).length===1?this.buildTextValNode(b[this.options.textNodeName],I,B.attrStr,R):this.buildObjectNode(B.val,I,B.attrStr,R)}u.prototype.buildObjectNode=function(b,I,R,B){if(b==="")return I[0]==="?"?this.indentate(B)+"<"+I+R+"?"+this.tagEndChar:this.indentate(B)+"<"+I+R+this.closeTag(I)+this.tagEndChar;{let O="</"+I+this.tagEndChar,he="";return I[0]==="?"&&(he="?",O=""),(R||R==="")&&b.indexOf("<")===-1?this.indentate(B)+"<"+I+R+he+">"+b+O:this.options.commentPropName!==!1&&I===this.options.commentPropName&&he.length===0?this.indentate(B)+`<!--${b}-->`+this.newLine:this.indentate(B)+"<"+I+R+he+this.tagEndChar+b+this.indentate(B)+O}},u.prototype.closeTag=function(b){let I="";return this.options.unpairedTags.indexOf(b)!==-1?this.options.suppressUnpairedNode||(I="/"):this.options.suppressEmptyNode?I="/":I=`></${b}`,I},u.prototype.buildTextValNode=function(b,I,R,B){if(this.options.cdataPropName!==!1&&I===this.options.cdataPropName)return this.indentate(B)+`<![CDATA[${b}]]>`+this.newLine;if(this.options.commentPropName!==!1&&I===this.options.commentPropName)return this.indentate(B)+`<!--${b}-->`+this.newLine;if(I[0]==="?")return this.indentate(B)+"<"+I+R+"?"+this.tagEndChar;{let O=this.options.tagValueProcessor(I,b);return O=this.replaceEntitiesValue(O),O===""?this.indentate(B)+"<"+I+R+this.closeTag(I)+this.tagEndChar:this.indentate(B)+"<"+I+R+">"+O+"</"+I+this.tagEndChar}},u.prototype.replaceEntitiesValue=function(b){if(b&&b.length>0&&this.options.processEntities)for(let I=0;I<this.options.entities.length;I++){const R=this.options.entities[I];b=b.replace(R.regex,R.val)}return b};function C(b){return this.options.indentBy.repeat(b)}function k(b){return b.startsWith(this.options.attributeNamePrefix)&&b!==this.options.textNodeName?b.substr(this.attrPrefixLen):!1}a.exports=u},{"./orderedJs2Xml":7}],7:[function(i,a,c){const m=`
`;function f(I,R){let B="";return R.format&&R.indentBy.length>0&&(B=m),u(I,R,"",B)}function u(I,R,B,O){let he="",Y=!1;for(let q=0;q<I.length;q++){const V=I[q],se=S(V);if(se===void 0)continue;let X="";if(B.length===0?X=se:X=`${B}.${se}`,se===R.textNodeName){let ee=V[se];k(X,R)||(ee=R.tagValueProcessor(se,ee),ee=b(ee,R)),Y&&(he+=O),he+=ee,Y=!1;continue}else if(se===R.cdataPropName){Y&&(he+=O),he+=`<![CDATA[${V[se][0][R.textNodeName]}]]>`,Y=!1;continue}else if(se===R.commentPropName){he+=O+`<!--${V[se][0][R.textNodeName]}-->`,Y=!0;continue}else if(se[0]==="?"){const ee=C(V[":@"],R),Z=se==="?xml"?"":O;let ve=V[se][0][R.textNodeName];ve=ve.length!==0?" "+ve:"",he+=Z+`<${se}${ve}${ee}?>`,Y=!0;continue}let G=O;G!==""&&(G+=R.indentBy);const E=C(V[":@"],R),j=O+`<${se}${E}`,L=u(V[se],R,X,G);R.unpairedTags.indexOf(se)!==-1?R.suppressUnpairedNode?he+=j+">":he+=j+"/>":(!L||L.length===0)&&R.suppressEmptyNode?he+=j+"/>":L&&L.endsWith(">")?he+=j+`>${L}${O}</${se}>`:(he+=j+">",L&&O!==""&&(L.includes("/>")||L.includes("</"))?he+=O+R.indentBy+L+O:he+=L,he+=`</${se}>`),Y=!0}return he}function S(I){const R=Object.keys(I);for(let B=0;B<R.length;B++){const O=R[B];if(I.hasOwnProperty(O)&&O!==":@")return O}}function C(I,R){let B="";if(I&&!R.ignoreAttributes)for(let O in I){if(!I.hasOwnProperty(O))continue;let he=R.attributeValueProcessor(O,I[O]);he=b(he,R),he===!0&&R.suppressBooleanAttributes?B+=` ${O.substr(R.attributeNamePrefix.length)}`:B+=` ${O.substr(R.attributeNamePrefix.length)}="${he}"`}return B}function k(I,R){I=I.substr(0,I.length-R.textNodeName.length-1);let B=I.substr(I.lastIndexOf(".")+1);for(let O in R.stopNodes)if(R.stopNodes[O]===I||R.stopNodes[O]==="*."+B)return!0;return!1}function b(I,R){if(I&&I.length>0&&R.processEntities)for(let B=0;B<R.entities.length;B++){const O=R.entities[B];I=I.replace(O.regex,O.val)}return I}a.exports=f},{}],8:[function(i,a,c){const m=i("../util");function f(B,O){const he={};if(B[O+3]==="O"&&B[O+4]==="C"&&B[O+5]==="T"&&B[O+6]==="Y"&&B[O+7]==="P"&&B[O+8]==="E"){O=O+9;let Y=1,q=!1,V=!1,se="";for(;O<B.length;O++)if(B[O]==="<"&&!V){if(q&&C(B,O))O+=7,[entityName,val,O]=u(B,O+1),val.indexOf("&")===-1&&(he[R(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(q&&k(B,O))O+=8;else if(q&&b(B,O))O+=8;else if(q&&I(B,O))O+=9;else if(S)V=!0;else throw new Error("Invalid DOCTYPE");Y++,se=""}else if(B[O]===">"){if(V?B[O-1]==="-"&&B[O-2]==="-"&&(V=!1,Y--):Y--,Y===0)break}else B[O]==="["?q=!0:se+=B[O];if(Y!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:he,i:O}}function u(B,O){let he="";for(;O<B.length&&B[O]!=="'"&&B[O]!=='"';O++)he+=B[O];if(he=he.trim(),he.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Y=B[O++];let q="";for(;O<B.length&&B[O]!==Y;O++)q+=B[O];return[he,q,O]}function S(B,O){return B[O+1]==="!"&&B[O+2]==="-"&&B[O+3]==="-"}function C(B,O){return B[O+1]==="!"&&B[O+2]==="E"&&B[O+3]==="N"&&B[O+4]==="T"&&B[O+5]==="I"&&B[O+6]==="T"&&B[O+7]==="Y"}function k(B,O){return B[O+1]==="!"&&B[O+2]==="E"&&B[O+3]==="L"&&B[O+4]==="E"&&B[O+5]==="M"&&B[O+6]==="E"&&B[O+7]==="N"&&B[O+8]==="T"}function b(B,O){return B[O+1]==="!"&&B[O+2]==="A"&&B[O+3]==="T"&&B[O+4]==="T"&&B[O+5]==="L"&&B[O+6]==="I"&&B[O+7]==="S"&&B[O+8]==="T"}function I(B,O){return B[O+1]==="!"&&B[O+2]==="N"&&B[O+3]==="O"&&B[O+4]==="T"&&B[O+5]==="A"&&B[O+6]==="T"&&B[O+7]==="I"&&B[O+8]==="O"&&B[O+9]==="N"}function R(B){if(m.isName(B))return B;throw new Error(`Invalid entity name ${B}`)}a.exports=f},{"../util":4}],9:[function(i,a,c){const m={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(u,S){return S},attributeValueProcessor:function(u,S){return S},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(u,S,C){return u}},f=function(u){return Object.assign({},m,u)};c.buildOptions=f,c.defaultOptions=m},{}],10:[function(i,a,c){const m=i("../util"),f=i("./xmlNode"),u=i("./DocTypeReader"),S=i("strnum");class C{constructor(ee){this.options=ee,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=k,this.parseXml=O,this.parseTextData=b,this.resolveNameSpace=I,this.buildAttributesMap=B,this.isItStopNode=V,this.replaceEntitiesValue=Y,this.readStopNodeData=E,this.saveTextToParentTag=q,this.addChild=he}}function k(L){const ee=Object.keys(L);for(let Z=0;Z<ee.length;Z++){const ve=ee[Z];this.lastEntities[ve]={regex:new RegExp("&"+ve+";","g"),val:L[ve]}}}function b(L,ee,Z,ve,_e,pe,oe){if(L!==void 0&&(this.options.trimValues&&!ve&&(L=L.trim()),L.length>0)){oe||(L=this.replaceEntitiesValue(L));const ce=this.options.tagValueProcessor(ee,L,Z,_e,pe);return ce==null?L:typeof ce!=typeof L||ce!==L?ce:this.options.trimValues?j(L,this.options.parseTagValue,this.options.numberParseOptions):L.trim()===L?j(L,this.options.parseTagValue,this.options.numberParseOptions):L}}function I(L){if(this.options.removeNSPrefix){const ee=L.split(":"),Z=L.charAt(0)==="/"?"/":"";if(ee[0]==="xmlns")return"";ee.length===2&&(L=Z+ee[1])}return L}const R=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function B(L,ee,Z){if(!this.options.ignoreAttributes&&typeof L=="string"){const ve=m.getAllMatches(L,R),_e=ve.length,pe={};for(let oe=0;oe<_e;oe++){const ce=this.resolveNameSpace(ve[oe][1]);let J=ve[oe][4],ne=this.options.attributeNamePrefix+ce;if(ce.length)if(this.options.transformAttributeName&&(ne=this.options.transformAttributeName(ne)),ne==="__proto__"&&(ne="#__proto__"),J!==void 0){this.options.trimValues&&(J=J.trim()),J=this.replaceEntitiesValue(J);const de=this.options.attributeValueProcessor(ce,J,ee);de==null?pe[ne]=J:typeof de!=typeof J||de!==J?pe[ne]=de:pe[ne]=j(J,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(pe[ne]=!0)}if(!Object.keys(pe).length)return;if(this.options.attributesGroupName){const oe={};return oe[this.options.attributesGroupName]=pe,oe}return pe}}const O=function(L){L=L.replace(/\r\n?/g,`
`);const ee=new f("!xml");let Z=ee,ve="",_e="";for(let pe=0;pe<L.length;pe++)if(L[pe]==="<")if(L[pe+1]==="/"){const ce=X(L,">",pe,"Closing Tag is not closed.");let J=L.substring(pe+2,ce).trim();if(this.options.removeNSPrefix){const we=J.indexOf(":");we!==-1&&(J=J.substr(we+1))}this.options.transformTagName&&(J=this.options.transformTagName(J)),Z&&(ve=this.saveTextToParentTag(ve,Z,_e));const ne=_e.substring(_e.lastIndexOf(".")+1);if(J&&this.options.unpairedTags.indexOf(J)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${J}>`);let de=0;ne&&this.options.unpairedTags.indexOf(ne)!==-1?(de=_e.lastIndexOf(".",_e.lastIndexOf(".")-1),this.tagsNodeStack.pop()):de=_e.lastIndexOf("."),_e=_e.substring(0,de),Z=this.tagsNodeStack.pop(),ve="",pe=ce}else if(L[pe+1]==="?"){let ce=G(L,pe,!1,"?>");if(!ce)throw new Error("Pi Tag is not closed.");if(ve=this.saveTextToParentTag(ve,Z,_e),!(this.options.ignoreDeclaration&&ce.tagName==="?xml"||this.options.ignorePiTags)){const J=new f(ce.tagName);J.add(this.options.textNodeName,""),ce.tagName!==ce.tagExp&&ce.attrExpPresent&&(J[":@"]=this.buildAttributesMap(ce.tagExp,_e,ce.tagName)),this.addChild(Z,J,_e)}pe=ce.closeIndex+1}else if(L.substr(pe+1,3)==="!--"){const ce=X(L,"-->",pe+4,"Comment is not closed.");if(this.options.commentPropName){const J=L.substring(pe+4,ce-2);ve=this.saveTextToParentTag(ve,Z,_e),Z.add(this.options.commentPropName,[{[this.options.textNodeName]:J}])}pe=ce}else if(L.substr(pe+1,2)==="!D"){const ce=u(L,pe);this.docTypeEntities=ce.entities,pe=ce.i}else if(L.substr(pe+1,2)==="!["){const ce=X(L,"]]>",pe,"CDATA is not closed.")-2,J=L.substring(pe+9,ce);if(ve=this.saveTextToParentTag(ve,Z,_e),this.options.cdataPropName)Z.add(this.options.cdataPropName,[{[this.options.textNodeName]:J}]);else{let ne=this.parseTextData(J,Z.tagname,_e,!0,!1,!0);ne==null&&(ne=""),Z.add(this.options.textNodeName,ne)}pe=ce+2}else{let ce=G(L,pe,this.options.removeNSPrefix),J=ce.tagName;const ne=ce.rawTagName;let de=ce.tagExp,we=ce.attrExpPresent,Te=ce.closeIndex;this.options.transformTagName&&(J=this.options.transformTagName(J)),Z&&ve&&Z.tagname!=="!xml"&&(ve=this.saveTextToParentTag(ve,Z,_e,!1));const Ne=Z;if(Ne&&this.options.unpairedTags.indexOf(Ne.tagname)!==-1&&(Z=this.tagsNodeStack.pop(),_e=_e.substring(0,_e.lastIndexOf("."))),J!==ee.tagname&&(_e+=_e?"."+J:J),this.isItStopNode(this.options.stopNodes,_e,J)){let Pe="";if(de.length>0&&de.lastIndexOf("/")===de.length-1)pe=ce.closeIndex;else if(this.options.unpairedTags.indexOf(J)!==-1)pe=ce.closeIndex;else{const qe=this.readStopNodeData(L,ne,Te+1);if(!qe)throw new Error(`Unexpected end of ${ne}`);pe=qe.i,Pe=qe.tagContent}const ze=new f(J);J!==de&&we&&(ze[":@"]=this.buildAttributesMap(de,_e,J)),Pe&&(Pe=this.parseTextData(Pe,J,_e,!0,we,!0,!0)),_e=_e.substr(0,_e.lastIndexOf(".")),ze.add(this.options.textNodeName,Pe),this.addChild(Z,ze,_e)}else{if(de.length>0&&de.lastIndexOf("/")===de.length-1){J[J.length-1]==="/"?(J=J.substr(0,J.length-1),_e=_e.substr(0,_e.length-1),de=J):de=de.substr(0,de.length-1),this.options.transformTagName&&(J=this.options.transformTagName(J));const Pe=new f(J);J!==de&&we&&(Pe[":@"]=this.buildAttributesMap(de,_e,J)),this.addChild(Z,Pe,_e),_e=_e.substr(0,_e.lastIndexOf("."))}else{const Pe=new f(J);this.tagsNodeStack.push(Z),J!==de&&we&&(Pe[":@"]=this.buildAttributesMap(de,_e,J)),this.addChild(Z,Pe,_e),Z=Pe}ve="",pe=Te}}else ve+=L[pe];return ee.child};function he(L,ee,Z){const ve=this.options.updateTag(ee.tagname,Z,ee[":@"]);ve===!1||(typeof ve=="string"&&(ee.tagname=ve),L.addChild(ee))}const Y=function(L){if(this.options.processEntities){for(let ee in this.docTypeEntities){const Z=this.docTypeEntities[ee];L=L.replace(Z.regx,Z.val)}for(let ee in this.lastEntities){const Z=this.lastEntities[ee];L=L.replace(Z.regex,Z.val)}if(this.options.htmlEntities)for(let ee in this.htmlEntities){const Z=this.htmlEntities[ee];L=L.replace(Z.regex,Z.val)}L=L.replace(this.ampEntity.regex,this.ampEntity.val)}return L};function q(L,ee,Z,ve){return L&&(ve===void 0&&(ve=Object.keys(ee.child).length===0),L=this.parseTextData(L,ee.tagname,Z,!1,ee[":@"]?Object.keys(ee[":@"]).length!==0:!1,ve),L!==void 0&&L!==""&&ee.add(this.options.textNodeName,L),L=""),L}function V(L,ee,Z){const ve="*."+Z;for(const _e in L){const pe=L[_e];if(ve===pe||ee===pe)return!0}return!1}function se(L,ee,Z=">"){let ve,_e="";for(let pe=ee;pe<L.length;pe++){let oe=L[pe];if(ve)oe===ve&&(ve="");else if(oe==='"'||oe==="'")ve=oe;else if(oe===Z[0])if(Z[1]){if(L[pe+1]===Z[1])return{data:_e,index:pe}}else return{data:_e,index:pe};else oe==="	"&&(oe=" ");_e+=oe}}function X(L,ee,Z,ve){const _e=L.indexOf(ee,Z);if(_e===-1)throw new Error(ve);return _e+ee.length-1}function G(L,ee,Z,ve=">"){const _e=se(L,ee+1,ve);if(!_e)return;let pe=_e.data;const oe=_e.index,ce=pe.search(/\s/);let J=pe,ne=!0;ce!==-1&&(J=pe.substring(0,ce),pe=pe.substring(ce+1).trimStart());const de=J;if(Z){const we=J.indexOf(":");we!==-1&&(J=J.substr(we+1),ne=J!==_e.data.substr(we+1))}return{tagName:J,tagExp:pe,closeIndex:oe,attrExpPresent:ne,rawTagName:de}}function E(L,ee,Z){const ve=Z;let _e=1;for(;Z<L.length;Z++)if(L[Z]==="<")if(L[Z+1]==="/"){const pe=X(L,">",Z,`${ee} is not closed`);if(L.substring(Z+2,pe).trim()===ee&&(_e--,_e===0))return{tagContent:L.substring(ve,Z),i:pe};Z=pe}else if(L[Z+1]==="?")Z=X(L,"?>",Z+1,"StopNode is not closed.");else if(L.substr(Z+1,3)==="!--")Z=X(L,"-->",Z+3,"StopNode is not closed.");else if(L.substr(Z+1,2)==="![")Z=X(L,"]]>",Z,"StopNode is not closed.")-2;else{const pe=G(L,Z,">");pe&&((pe&&pe.tagName)===ee&&pe.tagExp[pe.tagExp.length-1]!=="/"&&_e++,Z=pe.closeIndex)}}function j(L,ee,Z){if(ee&&typeof L=="string"){const ve=L.trim();return ve==="true"?!0:ve==="false"?!1:S(L,Z)}else return m.isExist(L)?L:""}a.exports=C},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,a,c){const{buildOptions:m}=i("./OptionsBuilder"),f=i("./OrderedObjParser"),{prettify:u}=i("./node2json"),S=i("../validator");class C{constructor(b){this.externalEntities={},this.options=m(b)}parse(b,I){if(typeof b!="string")if(b.toString)b=b.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(I){I===!0&&(I={});const O=S.validate(b,I);if(O!==!0)throw Error(`${O.err.msg}:${O.err.line}:${O.err.col}`)}const R=new f(this.options);R.addExternalEntities(this.externalEntities);const B=R.parseXml(b);return this.options.preserveOrder||B===void 0?B:u(B,this.options)}addEntity(b,I){if(I.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(b.indexOf("&")!==-1||b.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(I==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[b]=I}}a.exports=C},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,a,c){function m(k,b){return f(k,b)}function f(k,b,I){let R;const B={};for(let O=0;O<k.length;O++){const he=k[O],Y=u(he);let q="";if(I===void 0?q=Y:q=I+"."+Y,Y===b.textNodeName)R===void 0?R=he[Y]:R+=""+he[Y];else{if(Y===void 0)continue;if(he[Y]){let V=f(he[Y],b,q);const se=C(V,b);he[":@"]?S(V,he[":@"],q,b):Object.keys(V).length===1&&V[b.textNodeName]!==void 0&&!b.alwaysCreateTextNode?V=V[b.textNodeName]:Object.keys(V).length===0&&(b.alwaysCreateTextNode?V[b.textNodeName]="":V=""),B[Y]!==void 0&&B.hasOwnProperty(Y)?(Array.isArray(B[Y])||(B[Y]=[B[Y]]),B[Y].push(V)):b.isArray(Y,q,se)?B[Y]=[V]:B[Y]=V}}}return typeof R=="string"?R.length>0&&(B[b.textNodeName]=R):R!==void 0&&(B[b.textNodeName]=R),B}function u(k){const b=Object.keys(k);for(let I=0;I<b.length;I++){const R=b[I];if(R!==":@")return R}}function S(k,b,I,R){if(b){const B=Object.keys(b),O=B.length;for(let he=0;he<O;he++){const Y=B[he];R.isArray(Y,I+"."+Y,!0,!0)?k[Y]=[b[Y]]:k[Y]=b[Y]}}}function C(k,b){const{textNodeName:I}=b,R=Object.keys(k).length;return!!(R===0||R===1&&(k[I]||typeof k[I]=="boolean"||k[I]===0))}c.prettify=m},{}],13:[function(i,a,c){class m{constructor(u){this.tagname=u,this.child=[],this[":@"]={}}add(u,S){u==="__proto__"&&(u="#__proto__"),this.child.push({[u]:S})}addChild(u){u.tagname==="__proto__"&&(u.tagname="#__proto__"),u[":@"]&&Object.keys(u[":@"]).length>0?this.child.push({[u.tagname]:u.child,":@":u[":@"]}):this.child.push({[u.tagname]:u.child})}}a.exports=m},{}],14:[function(i,a,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(m,f,u,S,C){var k,b,I=C*8-S-1,R=(1<<I)-1,B=R>>1,O=-7,he=u?C-1:0,Y=u?-1:1,q=m[f+he];for(he+=Y,k=q&(1<<-O)-1,q>>=-O,O+=I;O>0;k=k*256+m[f+he],he+=Y,O-=8);for(b=k&(1<<-O)-1,k>>=-O,O+=S;O>0;b=b*256+m[f+he],he+=Y,O-=8);if(k===0)k=1-B;else{if(k===R)return b?NaN:(q?-1:1)*(1/0);b=b+Math.pow(2,S),k=k-B}return(q?-1:1)*b*Math.pow(2,k-S)},c.write=function(m,f,u,S,C,k){var b,I,R,B=k*8-C-1,O=(1<<B)-1,he=O>>1,Y=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=S?0:k-1,V=S?1:-1,se=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(I=isNaN(f)?1:0,b=O):(b=Math.floor(Math.log(f)/Math.LN2),f*(R=Math.pow(2,-b))<1&&(b--,R*=2),b+he>=1?f+=Y/R:f+=Y*Math.pow(2,1-he),f*R>=2&&(b++,R/=2),b+he>=O?(I=0,b=O):b+he>=1?(I=(f*R-1)*Math.pow(2,C),b=b+he):(I=f*Math.pow(2,he-1)*Math.pow(2,C),b=0));C>=8;m[u+q]=I&255,q+=V,I/=256,C-=8);for(b=b<<C|I,B+=C;B>0;m[u+q]=b&255,q+=V,b/=256,B-=8);m[u+q-V]|=se*128}},{}],15:[function(i,a,c){const m=/^[-+]?0x[a-fA-F0-9]+$/,f=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const u={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function S(k,b={}){if(b=Object.assign({},u,b),!k||typeof k!="string")return k;let I=k.trim();if(b.skipLike!==void 0&&b.skipLike.test(I))return k;if(b.hex&&m.test(I))return Number.parseInt(I,16);{const R=f.exec(I);if(R){const B=R[1],O=R[2];let he=C(R[3]);const Y=R[4]||R[6];if(!b.leadingZeros&&O.length>0&&B&&I[2]!==".")return k;if(!b.leadingZeros&&O.length>0&&!B&&I[1]!==".")return k;{const q=Number(I),V=""+q;return V.search(/[eE]/)!==-1||Y?b.eNotation?q:k:I.indexOf(".")!==-1?V==="0"&&he===""||V===he||B&&V==="-"+he?q:k:O?he===V||B+he===V?q:k:I===V||I===B+V?q:k}}else return k}}function C(k){return k&&k.indexOf(".")!==-1&&(k=k.replace(/0+$/,""),k==="."?k="0":k[0]==="."?k="0"+k:k[k.length-1]==="."&&(k=k.substr(0,k.length-1))),k}a.exports=S},{}],16:[function(i,a,c){(function(m){(function(){var f=this&&this.__awaiter||function(I,R,B,O){function he(Y){return Y instanceof B?Y:new B(function(q){q(Y)})}return new(B||(B=Promise))(function(Y,q){function V(G){try{X(O.next(G))}catch(E){q(E)}}function se(G){try{X(O.throw(G))}catch(E){q(E)}}function X(G){G.done?Y(G.value):he(G.value).then(V,se)}X((O=O.apply(I,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const u=i("../auth"),S=i("../config"),C=i("./_xml"),k=I=>typeof btoa>"u"?m.from(I,"binary").toString("base64"):btoa(I);function b(I,R,B){return f(this,void 0,void 0,function*(){const{apiUrl:O,authHeader:he,basicAuth:Y,userAgent:q}=(0,S.getConfig)(),V=Y&&`Basic ${k(`${Y.username}:${Y.password}`)}`,se=(0,u.getAuthToken)()&&`Bearer ${(0,u.getAuthToken)()}`;let X=new URLSearchParams(R).toString();X&&(X=`?${X}`);const G=yield fetch(`${O}/api${I}${X}`,Object.assign(Object.assign({},B),{headers:Object.assign({Authorization:he||V||se||"","User-Agent":q},B==null?void 0:B.headers)})),E=G.headers.get("Content-Type");if(E!=null&&E.startsWith("application/xml")){const j=yield G.text();return yield C.xmlParser.parse(j)}if(E!=null&&E.startsWith("application/json"))return G.json();if(G.ok)return yield G.text();throw new Error(`OSM API: ${yield G.text()}`)})}c.osmFetch=b}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const m=i("fast-xml-parser");c.xmlParser=new m.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:f=>f!=="$"})},{"fast-xml-parser":3}],18:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const m=i("fast-xml-parser"),f=new m.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function u(k){return f.build({osm:{changeset:{tag:Object.entries(k).map(([b,I])=>({$k:b,$v:I}))}}})}c.createChangesetMetaXml=u;const S=(k,b,I)=>b.reduce((R,B)=>{const O={$id:B.id,$version:I?0:B.version,$changeset:k,tag:Object.entries(B.tags||{}).map(([he,Y])=>({$k:he,$v:Y}))};switch(B.type){case"node":{const he=Object.assign(Object.assign({},O),{$lat:B.lat,$lon:B.lon});return Object.assign(Object.assign({},R),{node:[...R.node,he]})}case"way":{if(!B.nodes)throw new Error("Way has no nodes");const he=Object.assign(Object.assign({},O),{nd:B.nodes.map(Y=>({$ref:Y}))});return Object.assign(Object.assign({},R),{way:[...R.way,he]})}case"relation":{if(!B.members)throw new Error("Relation has no members");const he=Object.assign(Object.assign({},O),{member:B.members.map(Y=>({$type:Y.type,$ref:Y.ref,$role:Y.role}))});return Object.assign(Object.assign({},R),{relation:[...R.relation,he]})}default:return R}},{node:[],way:[],relation:[]});function C(k,b,I){return f.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},I),{create:[S(k,b.create,!0)],modify:[S(k,b.modify)],delete:[Object.assign({"$if-unused":!0},S(k,b.delete))]})})}c.createOsmChangeXml=C},{"fast-xml-parser":3}],19:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const m=i("../_xml");function f(k){return{changeset:+k.$.changeset,id:+k.$.id,timestamp:k.$.timestamp,uid:+k.$.uid,user:k.$.user,version:+k.$.version,tags:k.tag?Object.fromEntries(k.tag.map(b=>[b.$.k,b.$.v])):void 0}}const u=k=>{const b=[];if(k.node){const I=k.node.map(R=>Object.assign(Object.assign({type:"node"},f(R)),{lat:+R.$.lat,lon:+R.$.lon}));b.push(...I)}if(k.way){const I=k.way.map(R=>{var B;return Object.assign(Object.assign({type:"way"},f(R)),{nodes:((B=R.nd)===null||B===void 0?void 0:B.map(O=>+O.$.ref))||[]})});b.push(...I)}if(k.relation){const I=k.relation.map(R=>{var B;return Object.assign(Object.assign({type:"relation"},f(R)),{members:((B=R.member)===null||B===void 0?void 0:B.map(O=>({ref:+O.$.ref,role:O.$.role,type:O.$.type})))||[]})});b.push(...I)}return b};function S(k){var b,I,R;return{create:((b=k.osmChange[0].create)===null||b===void 0?void 0:b.flatMap(u))||[],modify:((I=k.osmChange[0].modify)===null||I===void 0?void 0:I.flatMap(u))||[],delete:((R=k.osmChange[0].delete)===null||R===void 0?void 0:R.flatMap(u))||[]}}c.parseOsmChangeJson=S;function C(k){const b=m.xmlParser.parse(k);return S(b)}c.parseOsmChangeXml=C},{"../_xml":17}],20:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,k,b){function I(R){return R instanceof k?R:new k(function(B){B(R)})}return new(k||(k=Promise))(function(R,B){function O(q){try{Y(b.next(q))}catch(V){B(V)}}function he(q){try{Y(b.throw(q))}catch(V){B(V)}}function Y(q){q.done?R(q.value):I(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const f=i("../_osmFetch");function u(S,C){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/changeset/${S}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(C)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=u},{"../_osmFetch":16}],21:[function(i,a,c){var m=this&&this.__awaiter||function(C,k,b,I){function R(B){return B instanceof b?B:new b(function(O){O(B)})}return new(b||(b=Promise))(function(B,O){function he(V){try{q(I.next(V))}catch(se){O(se)}}function Y(V){try{q(I.throw(V))}catch(se){O(se)}}function q(V){V.done?B(V.value):R(V.value).then(he,Y)}q((I=I.apply(C,k||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const f=i("../_osmFetch"),u=i("./_parseOsmChangeXml");function S(C){return m(this,void 0,void 0,function*(){const k=yield(0,f.osmFetch)(`/0.6/changeset/${C}/download`);return(0,u.parseOsmChangeJson)(k)})}c.getChangesetDiff=S},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,a,c){var m=this&&this.__awaiter||function(b,I,R,B){function O(he){return he instanceof R?he:new R(function(Y){Y(he)})}return new(R||(R=Promise))(function(he,Y){function q(X){try{se(B.next(X))}catch(G){Y(G)}}function V(X){try{se(B.throw(X))}catch(G){Y(G)}}function se(X){X.done?he(X.value):O(X.value).then(q,V)}se((B=B.apply(b,I||[])).next())})},f=this&&this.__rest||function(b,I){var R={};for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&I.indexOf(B)<0&&(R[B]=b[B]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,B=Object.getOwnPropertySymbols(b);O<B.length;O++)I.indexOf(B[O])<0&&Object.prototype.propertyIsEnumerable.call(b,B[O])&&(R[B[O]]=b[B[O]]);return R};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const u=i("../_osmFetch"),S=b=>{var I;return{id:+b.$.id,created_at:new Date(b.$.created_at),closed_at:new Date(b.$.closed_at),open:b.$.open==="true",comments_count:+b.$.comments_count,changes_count:+b.$.changes_count,min_lat:+b.$.min_lat,min_lon:+b.$.min_lon,max_lat:+b.$.max_lat,max_lon:+b.$.max_lon,uid:+b.$.uid,user:b.$.user,tags:Object.fromEntries(b.tag.map(R=>[R.$.k,R.$.v])),discussion:(I=b.discussion)===null||I===void 0?void 0:I[0].comment.map(R=>({date:new Date(R.$.date),user:R.$.user,uid:R.$.uid,text:R.text[0]}))}};function C(b){var I;return m(this,void 0,void 0,function*(){const{only:R}=b,B=f(b,["only"]);return((I=(yield(0,u.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},R&&{[R]:!0}),B))).osm[0].changeset)===null||I===void 0?void 0:I.map(S))||[]})}c.listChangesets=C;function k(b,I=!0){return m(this,void 0,void 0,function*(){return(yield(0,u.osmFetch)(`/0.6/changeset/${b}`,{include_discussion:I})).osm[0].changeset.map(S)[0]})}c.getChangeset=k},{"../_osmFetch":16}],23:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(C,k,b,I){I===void 0&&(I=b);var R=Object.getOwnPropertyDescriptor(k,b);(!R||("get"in R?!k.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return k[b]}}),Object.defineProperty(C,I,R)}:function(C,k,b,I){I===void 0&&(I=b),C[I]=k[b]}),f=this&&this.__exportStar||function(C,k){for(var b in C)b!=="default"&&!Object.prototype.hasOwnProperty.call(k,b)&&m(k,C,b)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,f(i("./createChangesetComment"),c),f(i("./getChangesetDiff"),c),f(i("./getChangesets"),c),f(i("./uploadChangeset"),c);var u=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return u.parseOsmChangeXml}});var S=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return S.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,a,c){var m=this&&this.__awaiter||function(C,k,b,I){function R(B){return B instanceof b?B:new b(function(O){O(B)})}return new(b||(b=Promise))(function(B,O){function he(V){try{q(I.next(V))}catch(se){O(se)}}function Y(V){try{q(I.throw(V))}catch(se){O(se)}}function q(V){V.done?B(V.value):R(V.value).then(he,Y)}q((I=I.apply(C,k||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const f=i("../_osmFetch"),u=i("./_createOsmChangeXml");function S(C,k){return m(this,void 0,void 0,function*(){const b=(0,u.createChangesetMetaXml)(C),I=+(yield(0,f.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:b,headers:{"content-type":"application/xml; charset=utf-8"}})),R=(0,u.createOsmChangeXml)(I,k);return yield(0,f.osmFetch)(`/0.6/changeset/${I}/upload`,void 0,{method:"POST",body:R,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,f.osmFetch)(`/0.6/changeset/${I}/close`,void 0,{method:"PUT"}),+I})}c.uploadChangeset=S},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,k,b){function I(R){return R instanceof k?R:new k(function(B){B(R)})}return new(k||(k=Promise))(function(R,B){function O(q){try{Y(b.next(q))}catch(V){B(V)}}function he(q){try{Y(b.throw(q))}catch(V){B(V)}}function Y(q){q.done?R(q.value):I(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const f=i("./_osmFetch");function u(){var S;return m(this,void 0,void 0,function*(){const C=yield(0,f.osmFetch)("/capabilities");return{limits:{maxArea:+C.osm[0].api[0].area[0].$.maximum,maxNoteArea:+C.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+C.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+C.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+C.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+C.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:((S=C.osm[0].policy[0].imagery[0].blacklist)===null||S===void 0?void 0:S.map(b=>b.$.regex))||[]}}})}c.getCapabilities=u},{"./_osmFetch":16}],26:[function(i,a,c){var m=this&&this.__awaiter||function(R,B,O,he){function Y(q){return q instanceof O?q:new O(function(V){V(q)})}return new(O||(O=Promise))(function(q,V){function se(E){try{G(he.next(E))}catch(j){V(j)}}function X(E){try{G(he.throw(E))}catch(j){V(j)}}function G(E){E.done?q(E.value):Y(E.value).then(se,X)}G((he=he.apply(R,B||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const f=i("./_osmFetch");function u(R,B,O){return m(this,void 0,void 0,function*(){const he=O&&R!=="node"?"/full":"";return(yield(0,f.osmFetch)(`/0.6/${R}/${B}${he}.json`)).elements})}c.getFeature=u;function S(R,B){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${R}s.json?${R}s=${B.join(",")}`)).elements})}c.getFeatures=S;function C(R,B,O){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${R}/${B}/${O}.json`)).elements[0]})}c.getFeatureAtVersion=C;function k(R,B){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${R}/${B}/history.json`)).elements})}c.getFeatureHistory=k;function b(R){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/node/${R}/ways.json`)).elements})}c.getWaysForNode=b;function I(R,B){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/${R}/${B}/relations.json`)).elements})}c.getRelationsForElement=I},{"./_osmFetch":16}],27:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,k,b){function I(R){return R instanceof k?R:new k(function(B){B(R)})}return new(k||(k=Promise))(function(R,B){function O(q){try{Y(b.next(q))}catch(V){B(V)}}function he(q){try{Y(b.throw(q))}catch(V){B(V)}}function Y(q){q.done?R(q.value):I(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const f=i("./_osmFetch");function u(S){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)("/0.6/map.json",{bbox:S})).elements})}c.getMapData=u},{"./_osmFetch":16}],28:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,k,b){function I(R){return R instanceof k?R:new k(function(B){B(R)})}return new(k||(k=Promise))(function(R,B){function O(q){try{Y(b.next(q))}catch(V){B(V)}}function he(q){try{Y(b.throw(q))}catch(V){B(V)}}function Y(q){q.done?R(q.value):I(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const f=i("./changesets");function u(S){return m(this,void 0,void 0,function*(){const C=yield(0,f.listChangesets)({display_name:S});if(!C.length)throw new Error("Could not get uid because the user has never edited the map");return C[0].uid})}c.getUIdFromDisplayName=u},{"./changesets":23}],29:[function(i,a,c){var m=this&&this.__awaiter||function(C,k,b,I){function R(B){return B instanceof b?B:new b(function(O){O(B)})}return new(b||(b=Promise))(function(B,O){function he(V){try{q(I.next(V))}catch(se){O(se)}}function Y(V){try{q(I.throw(V))}catch(se){O(se)}}function q(V){V.done?B(V.value):R(V.value).then(he,Y)}q((I=I.apply(C,k||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const f=i("./_osmFetch");function u(C){return m(this,void 0,void 0,function*(){const k=yield(0,f.osmFetch)(`/0.6/user/${C==="me"?"details":C}.json`);return Object.assign(Object.assign({},k.user),{account_created:new Date(k.user.account_created)})})}c.getUser=u;function S(C){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)("/0.6/users",{users:C})).users.map(b=>Object.assign(Object.assign({},b),{account_created:new Date(b.account_created)}))})}c.getUsers=S},{"./_osmFetch":16}],30:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,k){k===void 0&&(k=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,k,b)}:function(u,S,C,k){k===void 0&&(k=C),u[k]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./changesets"),c),f(i("./notes"),c),f(i("./getCapabilities"),c),f(i("./getFeature"),c),f(i("./getMapData"),c),f(i("./getUIdFromDisplayName"),c),f(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,a,c){var m=this&&this.__awaiter||function(I,R,B,O){function he(Y){return Y instanceof B?Y:new B(function(q){q(Y)})}return new(B||(B=Promise))(function(Y,q){function V(G){try{X(O.next(G))}catch(E){q(E)}}function se(G){try{X(O.throw(G))}catch(E){q(E)}}function X(G){G.done?Y(G.value):he(G.value).then(V,se)}X((O=O.apply(I,R||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const f=i("../_osmFetch"),u=I=>{const[R,B]=I.geometry.coordinates;return Object.assign(Object.assign({},I.properties),{location:{lat:B,lng:R}})};function S(I,R){return m(this,void 0,void 0,function*(){return(yield(0,f.osmFetch)(`/0.6/notes${R?"/search":""}.json`,I)).features.map(u)})}function C(I){return S(I,!0)}c.getNotesForQuery=C;function k(I){return S({bbox:I},!1)}c.getNotesForArea=k;function b(I){return m(this,void 0,void 0,function*(){const R=yield(0,f.osmFetch)(`/0.6/notes/${I}.json`);return u(R)})}c.getNote=b},{"../_osmFetch":16}],32:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,k){k===void 0&&(k=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,k,b)}:function(u,S,C,k){k===void 0&&(k=C),u[k]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./getNotes"),c),f(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,a,c){var m=this&&this.__awaiter||function(k,b,I,R){function B(O){return O instanceof I?O:new I(function(he){he(O)})}return new(I||(I=Promise))(function(O,he){function Y(se){try{V(R.next(se))}catch(X){he(X)}}function q(se){try{V(R.throw(se))}catch(X){he(X)}}function V(se){se.done?O(se.value):B(se.value).then(Y,q)}V((R=R.apply(k,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const f=i("../_osmFetch");function u(k,b,I){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)("/0.6/notes",{lat:k,lon:b,text:I})})}c.createNote=u;function S(k,b){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/notes/${k}/comment`,{text:b})})}c.commentOnNote=S;function C(k,b){return m(this,void 0,void 0,function*(){yield(0,f.osmFetch)(`/0.6/notes/${k}/reopen`,{text:b})})}c.reopenNote=C},{"../_osmFetch":16}],34:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function m(f){let u=!1;return new Promise((S,C)=>{const[k,b]=[600,550],I=Object.entries({width:k,height:b,left:window.screen.width/2-k/2,top:window.screen.height/2-b/2}).map(([O,he])=>`${O}=${he}`).join(","),R=window.open("about:blank","oauth_window",I);if(!R)throw new Error("Popup was blocked");R.location=f,window.authComplete=O=>{S(O),u=!0};const B=setInterval(()=>{R.closed&&(u||C(new Error("Cancelled")),clearInterval(B))},500)})}c.createPopup=m},{}],35:[function(i,a,c){var m=this&&this.__awaiter||function(S,C,k,b){function I(R){return R instanceof k?R:new k(function(B){B(R)})}return new(k||(k=Promise))(function(R,B){function O(q){try{Y(b.next(q))}catch(V){B(V)}}function he(q){try{Y(b.throw(q))}catch(V){B(V)}}function Y(q){q.done?R(q.value):I(q.value).then(O,he)}Y((b=b.apply(S,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const f=i("./helpers");function u(S,{options:C,pkceVerifier:k,state:b}){return m(this,void 0,void 0,function*(){const I=new URL(S).searchParams,R=I.get("error_description"),B=I.get("code"),O=I.get("state");if(R)throw new Error(R);if(!B)throw new Error("No code in OAuth response");if(!k||!b)throw new Error("No login in progress");if(b!==O)throw new Error("State Mismatch");const he={grant_type:"authorization_code",code:B,redirect_uri:C.redirectUrl,client_id:C.clientId,code_verifier:k},Y=`${(0,f.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(he).toString()}`,V=yield(yield fetch(Y,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in V)throw new Error(V.error_description);const se={issuedAt:new Date(V.created_at*1e3).toISOString(),accessToken:V.access_token,scopes:V.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(se)),delete window.authComplete,se})}c.exchangeCode=u},{"./helpers":36}],36:[function(i,a,c){var m=this&&this.__awaiter||function(k,b,I,R){function B(O){return O instanceof I?O:new I(function(he){he(O)})}return new(I||(I=Promise))(function(O,he){function Y(se){try{V(R.next(se))}catch(X){he(X)}}function q(se){try{V(R.throw(se))}catch(X){he(X)}}function V(se){se.done?O(se.value):B(se.value).then(Y,q)}V((R=R.apply(k,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const f=i("../config");function u(k){return m(this,void 0,void 0,function*(){const b=new TextEncoder().encode(k),I=yield window.crypto.subtle.digest("SHA-256",b);return btoa(String.fromCharCode(...new Uint8Array(I))).replaceAll("+","-").replaceAll("/","_").replaceAll("=","")})}c.sha256=u;function S(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(k=>`0${k.toString(16)}`.slice(-2)).join("")}c.getRandomString=S;function C(){let k=(0,f.getConfig)().apiUrl;return k==="https://api.openstreetmap.org"&&(k="https://www.openstreetmap.org"),k}c.getOAuthBaseUrl=C},{"../config":39}],37:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,k){k===void 0&&(k=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,k,b)}:function(u,S,C,k){k===void 0&&(k=C),u[k]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,a,c){var m=this&&this.__awaiter||function(R,B,O,he){function Y(q){return q instanceof O?q:new O(function(V){V(q)})}return new(O||(O=Promise))(function(q,V){function se(E){try{G(he.next(E))}catch(j){V(j)}}function X(E){try{G(he.throw(E))}catch(j){V(j)}}function G(E){E.done?q(E.value):Y(E.value).then(se,X)}G((he=he.apply(R,B||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const f=i("./createPopup"),u=i("./exchangeCode"),S=i("./helpers");function C(R){return m(this,void 0,void 0,function*(){if(!R.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!R.clientId)throw new Error("You must include the 'clientId' option");if(!R.scopes)throw new Error("You must include the 'scopes' option");const B=(0,S.getRandomString)(),O=(0,S.getRandomString)(),he=yield(0,S.sha256)(O),Y={scope:R.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:B,redirect_uri:R.redirectUrl,client_id:R.clientId,code_challenge_method:"S256",code_challenge:he},q=`${(0,S.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(Y).toString()}`,V={state:B,pkceVerifier:O,options:R};if(R.mode==="popup"){const se=yield(0,f.createPopup)(q);return(0,u.exchangeCode)(se,V)}if(R.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(V)),window.location.replace(q);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=C,c.authReady=m(void 0,void 0,void 0,function*(){var R;if(typeof window>"u")return;const B=window.location.href,O=localStorage.getItem("__osmAuthTemp");if(new URL(B).searchParams.get("code")){if(!((R=window.opener)===null||R===void 0)&&R.authComplete)window.opener.authComplete(B),window.close();else if(O)try{const he=JSON.parse(O);yield(0,u.exchangeCode)(B,he),localStorage.removeItem("__osmAuthTemp")}catch(he){console.error("OSM Auth Error",he)}}});const k=()=>{try{const R=localStorage.getItem("__osmAuth");return R?JSON.parse(R).accessToken:void 0}catch{return}};c.getAuthToken=k;const b=()=>!!(0,c.getAuthToken)();c.isLoggedIn=b;function I(){localStorage.removeItem("__osmAuth")}c.logout=I},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const m={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},f=()=>m;c.getConfig=f;function u(S){Object.assign(m,S)}c.configure=u},{}],40:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,k){k===void 0&&(k=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,k,b)}:function(u,S,C,k){k===void 0&&(k=C),u[k]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./api"),c),f(i("./auth"),c),f(i("./config"),c),f(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./types":44}],41:[function(i,a,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],42:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],43:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],44:[function(i,a,c){var m=this&&this.__createBinding||(Object.create?function(u,S,C,k){k===void 0&&(k=C);var b=Object.getOwnPropertyDescriptor(S,C);(!b||("get"in b?!S.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(u,k,b)}:function(u,S,C,k){k===void 0&&(k=C),u[k]=S[C]}),f=this&&this.__exportStar||function(u,S){for(var C in u)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&m(S,u,C)};Object.defineProperty(c,"__esModule",{value:!0}),f(i("./changesets"),c),f(i("./features"),c),f(i("./general"),c),f(i("./notes"),c),f(i("./osmPatch"),c),f(i("./user"),c)},{"./changesets":41,"./features":42,"./general":43,"./notes":45,"./osmPatch":46,"./user":47}],45:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],46:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}],47:[function(i,a,c){arguments[4][41][0].apply(c,arguments)},{dup:41}]},{},[40])(40)})})(IC);var Fs=IC.exports;const CC=()=>{const[e,t]=vt.useState(!1);vt.useEffect(()=>{t(Fs.isLoggedIn())},[]);const i=vt.useCallback(()=>{(async()=>(await Fs.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Fs.isLoggedIn()),window.location.reload()))()},[]),a=vt.useCallback(()=>{(async()=>(Fs.logout(),t(!1)))()},[]);return yt.jsx(yt.Fragment,{children:e?yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:a,children:"logout"}):yt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},rR=()=>{const[e,t]=vt.useState(!1),[i,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Fs.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const c=await Fs.getUser("me");a(c)})()},[e]),yt.jsx(yt.Fragment,{children:i?yt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):yt.jsx("img",{})})},iR=()=>{const[e,t]=vt.useState(!1),[i,a]=vt.useState(void 0);return vt.useEffect(()=>{t(Fs.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const c=await Fs.getUser("me");a(c)})()},[e]),yt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[yt.jsxs("div",{children:[yt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?yt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):yt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),yt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[yt.jsx("div",{children:yt.jsx(rR,{})}),yt.jsx("div",{children:yt.jsx(CC,{})})]})]})},PC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return yt.jsxs(yt.Fragment,{children:[yt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",yt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},oR=({feature:e})=>yt.jsx(yt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return yt.jsxs("div",{className:t,children:[yt.jsx("span",{className:"underline",children:t})," = ",yt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Yd(e,t,i){return parseInt(e.substr(t,i),16)}function AC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Q0(e,t,i){return i=i<0?i+6:i>6?i-6:i,AC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function sR(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const a=e[1],c=e[2],m=e[3],f=e[4]||"";t="#"+a+a+c+c+m+m+f+f}return(i==7||i>8)&&(t=e),t}}function aR(e,t,i){let a;if(t==0){const c=AC(i*255);a=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,m=i*2-c;a=Q0(m,c,e*6+2)+Q0(m,c,e*6)+Q0(m,c,e*6-2)}return"#"+a}function Wd(e,t,i){const a=[.55,.5,.5,.46,.6,.55,.55],c=a[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,aR(e,t,i)}const lR=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},ES={V:"jdenticon_config",n:"config"};var uR={};function cR(e,t){const i=typeof e=="object"&&e||uR[ES.n]||lR[ES.V]||{},a=i.lightness||{},c=i.saturation||{},m="color"in c?c.color:c,f=c.grayscale,u=i.backColor,S=i.padding;function C(b,I){let R=a[b];return R&&R.length>1||(R=I),function(B){return B=R[0]+B*(R[1]-R[0]),B<0?0:B>1?1:B}}function k(b){const I=i.hues;let R;return I&&I.length>0&&(R=I[0|.999*b*I.length]),typeof R=="number"?(R/360%1+1)%1:b}return{W:k,o:typeof m=="number"?m:.5,D:typeof f=="number"?f:0,p:C("color",[.4,.8]),F:C("grayscale",[.3,.9]),G:sR(u),X:typeof e=="number"?e:typeof S=="number"?S:t}}let wm=class{constructor(t,i){this.x=t,this.y=i}};class kC{constructor(t,i,a,c){this.q=t,this.t=i,this.H=a,this.Y=c}I(t,i,a,c){const m=this.q+this.H,f=this.t+this.H,u=this.Y;return u===1?new wm(m-i-(c||0),this.t+t):u===2?new wm(m-t-(a||0),f-i-(c||0)):u===3?new wm(this.q+i,f-t-(a||0)):new wm(this.q+t,this.t+i)}}const hR=new kC(0,0,0,0);class dR{constructor(t){this.J=t,this.u=hR}g(t,i){const a=i?-2:2,c=[];for(let m=i?t.length-2:0;m<t.length&&m>=0;m+=a)c.push(this.u.I(t[m],t[m+1]));this.J.g(c)}h(t,i,a,c){const m=this.u.I(t,i,a,a);this.J.h(m,a,c)}i(t,i,a,c,m){this.g([t,i,t+a,i,t+a,i+c,t,i+c],m)}j(t,i,a,c,m,f){const u=[t+a,i,t+a,i+c,t,i+c,t,i];u.splice((m||0)%4*2,2),this.g(u,f)}K(t,i,a,c,m){this.g([t+a/2,i,t+a,i+c/2,t+a/2,i+c,t,i+c/2],m)}}function fR(e,t,i,a){e=e%14;let c,m,f,u,S,C;e?e==1?(f=0|i*.5,u=0|i*.8,t.j(i-f,0,f,u,2)):e==2?(f=0|i/3,t.i(f,f,i-f,i-f)):e==3?(S=i*.1,C=i<6?1:i<8?2:0|i*.25,S=S>1?0|S:S>.5?1:S,t.i(C,C,i-S-C,i-S-C)):e==4?(m=0|i*.15,f=0|i*.5,t.h(i-f-m,i-f-m,f)):e==5?(S=i*.1,C=S*4,C>3&&(C=0|C),t.i(0,0,i,i),t.g([C,C,i-S,C,C+(i-C-S)/2,i-S],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(S=i*.14,C=i<4?1:i<6?2:0|i*.35,S=i<8?S:0|S,t.i(0,0,i,i),t.i(C,C,i-C-S,i-C-S,!0)):e==10?(S=i*.12,C=S*3,t.i(0,0,i,i),t.h(C,C,i-S-C,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(m=i*.25,t.i(0,0,i,i),t.K(m,m,i-m,i-m,!0)):!a&&(m=i*.4,f=i*1.2,t.h(m,m,f)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function TS(e,t,i){e=e%4;let a;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(a=i/6,t.h(a,a,i-2*a)):t.j(0,0,i,i,0)}function pR(e,t){return e=t.W(e),[Wd(e,t.D,t.F(0)),Wd(e,t.o,t.p(.5)),Wd(e,t.D,t.F(1)),Wd(e,t.o,t.p(1)),Wd(e,t.o,t.p(0))]}function mR(e,t,i){const a=cR(i,.08);a.G&&e.m(a.G);let c=e.k;const m=.5+c*a.X|0;c-=m*2;const f=new dR(e),u=0|c/4,S=0|m+c/2-u*2,C=0|m+c/2-u*2;function k(he,Y,q,V,se){const X=Yd(t,q,1);let G=V?Yd(t,V,1):0;e.L(I[R[he]]);for(let E=0;E<se.length;E++)f.u=new kC(S+se[E][0]*u,C+se[E][1]*u,u,G++%4),Y(X,f,u,E);e.M()}const b=Yd(t,-7)/268435455,I=pR(b,a),R=[];let B;function O(he){if(he.indexOf(B)>=0){for(let Y=0;Y<he.length;Y++)if(R.indexOf(he[Y])>=0)return!0}}for(let he=0;he<3;he++)B=Yd(t,8+he,1)%I.length,(O([0,4])||O([2,3]))&&(B=1),R.push(B);k(0,TS,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),k(1,TS,4,5,[[0,0],[3,0],[3,3],[0,3]]),k(2,fR,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function gR(e){var a=0,c=0,m=encodeURI(e)+"%80",f=[],u,S=[],C=1732584193,k=4023233417,b=~C,I=~k,R=3285377520,B=[C,k,b,I,R],O=0,he="";function Y(q,V){return q<<V|q>>>32-V}for(;a<m.length;c++)f[c>>2]=f[c>>2]|(m[a]=="%"?parseInt(m.substring(a+1,a+=3),16):m.charCodeAt(a++))<<(3-(c&3))*8;for(u=((c+7>>6)+1)*16,f[u-1]=c*8-8;O<u;O+=16){for(a=0;a<80;a++)c=Y(C,5)+R+(a<20?(k&b^~k&I)+1518500249:a<40?(k^b^I)+1859775393:a<60?(k&b^k&I^b&I)+2400959708:(k^b^I)+3395469782)+(S[a]=a<16?f[O+a]|0:Y(S[a-3]^S[a-8]^S[a-14]^S[a-16],1)),R=I,I=b,b=Y(k,30),k=C,C=c;B[0]=C=B[0]+C|0,B[1]=k=B[1]+k|0,B[2]=b=B[2]+b|0,B[3]=I=B[3]+I|0,B[4]=R=B[4]+R|0}for(a=0;a<40;a++)he+=(B[a>>3]>>>(7-(a&7))*4&15).toString(16);return he}function yR(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function vR(e){return gR(e==null?"":""+e)}typeof document<"u"&&document.querySelectorAll.bind(document);function Xc(e){return(e*10+.5|0)/10}class _R{constructor(){this.v=""}g(t){let i="";for(let a=0;a<t.length;a++)i+=(a?"L":"M")+Xc(t[a].x)+" "+Xc(t[a].y);this.v+=i+"Z"}h(t,i,a){const c=a?0:1,m=Xc(i/2),f=Xc(i),u="a"+m+","+m+" 0 1,"+c+" ";this.v+="M"+Xc(t.x)+" "+Xc(t.y+i/2)+u+f+",0"+u+-f+",0"}}class xR{constructor(t){this.A,this.B={},this.O=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),a=i[2]?Yd(i[2],0)/255:1;this.O.m(i[1],a)}L(t){this.A=this.B[t]||(this.B[t]=new _R)}M(){}g(t){this.A.g(t)}h(t,i,a){this.A.h(t,i,a)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.O.P(i,t[i].v)}}const wR={R:"http://www.w3.org/2000/svg",S:"width",T:"height"};class bR{constructor(t){this.k=t,this.C='<svg xmlns="'+wR.R+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}P(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function SR(e,t,i){const a=new bR(t);return mR(new xR(a),yR(e)||vR(e),i),a.toString()}const ER=({feature:e,size:t})=>e.properties===null?null:yt.jsx(yt.Fragment,{children:e.properties.userIconHref.length>0?yt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):yt.jsx("span",{dangerouslySetInnerHTML:{__html:SR(e.properties.user||"noname",t)}})}),TR=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?yt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};var IR={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const CR=({viewState:e})=>{const[t,i]=vt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return vt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),yt.jsx(yt.Fragment,{children:e&&t&&yt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[yt.jsx(tu,{icon:IR,style:{padding:"0px 3px"}}),yt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var MC={};class Gi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let a=0;for(let c=0;c<this._n&&c<32;c++){const m=i[c],f=t+m,u=Math.abs(t)<Math.abs(m)?t-(f-m):m-(f-t);u&&(i[a++]=u),t=f}return i[a]=t,this._n=a+1,this}valueOf(){const t=this._partials;let i=this._n,a,c,m,f=0;if(i>0){for(f=t[--i];i>0&&(a=f,c=t[--i],f=a+c,m=c-(f-a),!m););i>0&&(m<0&&t[i-1]<0||m>0&&t[i-1]>0)&&(c=m*2,a=f+c,c==a-f&&(f=a))}return f}}function*PR(e){for(const t of e)yield*t}function zC(e){return Array.from(PR(e))}function yh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var a=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,m=new Array(c);++a<c;)m[a]=e+a*i;return m}var fn=1e-6,Vf=1e-12,Mn=Math.PI,Lr=Mn/2,Cg=Mn/4,oo=Mn*2,rr=180/Mn,yn=Mn/180,Nn=Math.abs,Hh=Math.atan,so=Math.atan2,an=Math.cos,bm=Math.ceil,FC=Math.exp,F_=Math.hypot,Pg=Math.log,ev=Math.pow,nn=Math.sin,as=Math.sign||function(e){return e>0?1:e<0?-1:0},yi=Math.sqrt,_x=Math.tan;function RC(e){return e>1?0:e<-1?Mn:Math.acos(e)}function ao(e){return e>1?Lr:e<-1?-Lr:Math.asin(e)}function IS(e){return(e=nn(e/2))*e}function Ir(){}function Ag(e,t){e&&PS.hasOwnProperty(e.type)&&PS[e.type](e,t)}var CS={Feature:function(e,t){Ag(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)Ag(i[a].geometry,t)}},PS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)e=i[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){R_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)R_(i[a],t,0)},Polygon:function(e,t){AS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)AS(i[a],t)},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)Ag(i[a],t)}};function R_(e,t,i){var a=-1,c=e.length-i,m;for(t.lineStart();++a<c;)m=e[a],t.point(m[0],m[1],m[2]);t.lineEnd()}function AS(e,t){var i=-1,a=e.length;for(t.polygonStart();++i<a;)R_(e[i],t,1);t.polygonEnd()}function Ms(e,t){e&&CS.hasOwnProperty(e.type)?CS[e.type](e,t):Ag(e,t)}var kg=new Gi,Mg=new Gi,OC,jC,O_,j_,L_,ya={point:Ir,lineStart:Ir,lineEnd:Ir,polygonStart:function(){kg=new Gi,ya.lineStart=AR,ya.lineEnd=kR},polygonEnd:function(){var e=+kg;Mg.add(e<0?oo+e:e),this.lineStart=this.lineEnd=this.point=Ir},sphere:function(){Mg.add(oo)}};function AR(){ya.point=MR}function kR(){LC(OC,jC)}function MR(e,t){ya.point=LC,OC=e,jC=t,e*=yn,t*=yn,O_=e,j_=an(t=t/2+Cg),L_=nn(t)}function LC(e,t){e*=yn,t*=yn,t=t/2+Cg;var i=e-O_,a=i>=0?1:-1,c=a*i,m=an(t),f=nn(t),u=L_*f,S=j_*m+u*an(c),C=u*a*nn(c);kg.add(so(C,S)),O_=e,j_=m,L_=f}function zR(e){return Mg=new Gi,Ms(e,ya),Mg*2}function zg(e){return[so(e[1],e[0]),ao(e[2])]}function ec(e){var t=e[0],i=e[1],a=an(i);return[a*an(t),a*nn(t),nn(i)]}function Sm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Lh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function tv(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Em(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Fg(e){var t=yi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Er,_o,Rr,No,Bu,DC,BC,Ih,gf,Ul,tl,Va={point:D_,lineStart:kS,lineEnd:MS,polygonStart:function(){Va.point=UC,Va.lineStart=FR,Va.lineEnd=RR,gf=new Gi,ya.polygonStart()},polygonEnd:function(){ya.polygonEnd(),Va.point=D_,Va.lineStart=kS,Va.lineEnd=MS,kg<0?(Er=-(Rr=180),_o=-(No=90)):gf>fn?No=90:gf<-fn&&(_o=-90),tl[0]=Er,tl[1]=Rr},sphere:function(){Er=-(Rr=180),_o=-(No=90)}};function D_(e,t){Ul.push(tl=[Er=e,Rr=e]),t<_o&&(_o=t),t>No&&(No=t)}function NC(e,t){var i=ec([e*yn,t*yn]);if(Ih){var a=Lh(Ih,i),c=[a[1],-a[0],0],m=Lh(c,a);Fg(m),m=zg(m);var f=e-Bu,u=f>0?1:-1,S=m[0]*rr*u,C,k=Nn(f)>180;k^(u*Bu<S&&S<u*e)?(C=m[1]*rr,C>No&&(No=C)):(S=(S+360)%360-180,k^(u*Bu<S&&S<u*e)?(C=-m[1]*rr,C<_o&&(_o=C)):(t<_o&&(_o=t),t>No&&(No=t))),k?e<Bu?Bo(Er,e)>Bo(Er,Rr)&&(Rr=e):Bo(e,Rr)>Bo(Er,Rr)&&(Er=e):Rr>=Er?(e<Er&&(Er=e),e>Rr&&(Rr=e)):e>Bu?Bo(Er,e)>Bo(Er,Rr)&&(Rr=e):Bo(e,Rr)>Bo(Er,Rr)&&(Er=e)}else Ul.push(tl=[Er=e,Rr=e]);t<_o&&(_o=t),t>No&&(No=t),Ih=i,Bu=e}function kS(){Va.point=NC}function MS(){tl[0]=Er,tl[1]=Rr,Va.point=D_,Ih=null}function UC(e,t){if(Ih){var i=e-Bu;gf.add(Nn(i)>180?i+(i>0?360:-360):i)}else DC=e,BC=t;ya.point(e,t),NC(e,t)}function FR(){ya.lineStart()}function RR(){UC(DC,BC),ya.lineEnd(),Nn(gf)>fn&&(Er=-(Rr=180)),tl[0]=Er,tl[1]=Rr,Ih=null}function Bo(e,t){return(t-=e)<0?t+360:t}function OR(e,t){return e[0]-t[0]}function zS(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function jR(e){var t,i,a,c,m,f,u;if(No=Rr=-(Er=_o=1/0),Ul=[],Ms(e,Va),i=Ul.length){for(Ul.sort(OR),t=1,a=Ul[0],m=[a];t<i;++t)c=Ul[t],zS(a,c[0])||zS(a,c[1])?(Bo(a[0],c[1])>Bo(a[0],a[1])&&(a[1]=c[1]),Bo(c[0],a[1])>Bo(a[0],a[1])&&(a[0]=c[0])):m.push(a=c);for(f=-1/0,i=m.length-1,t=0,a=m[i];t<=i;a=c,++t)c=m[t],(u=Bo(a[1],c[0]))>f&&(f=u,Er=c[0],Rr=a[1])}return Ul=tl=null,Er===1/0||_o===1/0?[[NaN,NaN],[NaN,NaN]]:[[Er,_o],[Rr,No]]}var Jd,Rg,Og,jg,Lg,Dg,Bg,Ng,B_,N_,U_,$C,VC,to,no,ro,Rs={sphere:Ir,point:xx,lineStart:FS,lineEnd:RS,polygonStart:function(){Rs.lineStart=BR,Rs.lineEnd=NR},polygonEnd:function(){Rs.lineStart=FS,Rs.lineEnd=RS}};function xx(e,t){e*=yn,t*=yn;var i=an(t);ip(i*an(e),i*nn(e),nn(t))}function ip(e,t,i){++Jd,Og+=(e-Og)/Jd,jg+=(t-jg)/Jd,Lg+=(i-Lg)/Jd}function FS(){Rs.point=LR}function LR(e,t){e*=yn,t*=yn;var i=an(t);to=i*an(e),no=i*nn(e),ro=nn(t),Rs.point=DR,ip(to,no,ro)}function DR(e,t){e*=yn,t*=yn;var i=an(t),a=i*an(e),c=i*nn(e),m=nn(t),f=so(yi((f=no*m-ro*c)*f+(f=ro*a-to*m)*f+(f=to*c-no*a)*f),to*a+no*c+ro*m);Rg+=f,Dg+=f*(to+(to=a)),Bg+=f*(no+(no=c)),Ng+=f*(ro+(ro=m)),ip(to,no,ro)}function RS(){Rs.point=xx}function BR(){Rs.point=UR}function NR(){GC($C,VC),Rs.point=xx}function UR(e,t){$C=e,VC=t,e*=yn,t*=yn,Rs.point=GC;var i=an(t);to=i*an(e),no=i*nn(e),ro=nn(t),ip(to,no,ro)}function GC(e,t){e*=yn,t*=yn;var i=an(t),a=i*an(e),c=i*nn(e),m=nn(t),f=no*m-ro*c,u=ro*a-to*m,S=to*c-no*a,C=F_(f,u,S),k=ao(C),b=C&&-k/C;B_.add(b*f),N_.add(b*u),U_.add(b*S),Rg+=k,Dg+=k*(to+(to=a)),Bg+=k*(no+(no=c)),Ng+=k*(ro+(ro=m)),ip(to,no,ro)}function $R(e){Jd=Rg=Og=jg=Lg=Dg=Bg=Ng=0,B_=new Gi,N_=new Gi,U_=new Gi,Ms(e,Rs);var t=+B_,i=+N_,a=+U_,c=F_(t,i,a);return c<Vf&&(t=Dg,i=Bg,a=Ng,Rg<fn&&(t=Og,i=jg,a=Lg),c=F_(t,i,a),c<Vf)?[NaN,NaN]:[so(i,t)*rr,ao(a/c)*rr]}function Kc(e){return function(){return e}}function $_(e,t){function i(a,c){return a=e(a,c),t(a[0],a[1])}return e.invert&&t.invert&&(i.invert=function(a,c){return a=t.invert(a,c),a&&e.invert(a[0],a[1])}),i}function V_(e,t){return[Nn(e)>Mn?e+Math.round(-e/oo)*oo:e,t]}V_.invert=V_;function wx(e,t,i){return(e%=oo)?t||i?$_(jS(e),LS(t,i)):jS(e):t||i?LS(t,i):V_}function OS(e){return function(t,i){return t+=e,[t>Mn?t-oo:t<-Mn?t+oo:t,i]}}function jS(e){var t=OS(e);return t.invert=OS(-e),t}function LS(e,t){var i=an(e),a=nn(e),c=an(t),m=nn(t);function f(u,S){var C=an(S),k=an(u)*C,b=nn(u)*C,I=nn(S),R=I*i+k*a;return[so(b*c-R*m,k*i-I*a),ao(R*c+b*m)]}return f.invert=function(u,S){var C=an(S),k=an(u)*C,b=nn(u)*C,I=nn(S),R=I*c-b*m;return[so(b*c+I*m,k*i+R*a),ao(R*i-k*a)]},f}function WC(e){e=wx(e[0]*yn,e[1]*yn,e.length>2?e[2]*yn:0);function t(i){return i=e(i[0]*yn,i[1]*yn),i[0]*=rr,i[1]*=rr,i}return t.invert=function(i){return i=e.invert(i[0]*yn,i[1]*yn),i[0]*=rr,i[1]*=rr,i},t}function HC(e,t,i,a,c,m){if(i){var f=an(t),u=nn(t),S=a*i;c==null?(c=t+a*oo,m=t-S/2):(c=DS(f,c),m=DS(f,m),(a>0?c<m:c>m)&&(c+=a*oo));for(var C,k=c;a>0?k>m:k<m;k-=S)C=zg([f,-u*an(k),-u*nn(k)]),e.point(C[0],C[1])}}function DS(e,t){t=ec(t),t[0]-=e,Fg(t);var i=RC(-t[1]);return((-t[2]<0?-i:i)+oo-fn)%oo}function VR(){var e=Kc([0,0]),t=Kc(90),i=Kc(6),a,c,m={point:f};function f(S,C){a.push(S=c(S,C)),S[0]*=rr,S[1]*=rr}function u(){var S=e.apply(this,arguments),C=t.apply(this,arguments)*yn,k=i.apply(this,arguments)*yn;return a=[],c=wx(-S[0]*yn,-S[1]*yn,0).invert,HC(m,C,k,1),S={type:"Polygon",coordinates:[a]},a=c=null,S}return u.center=function(S){return arguments.length?(e=typeof S=="function"?S:Kc([+S[0],+S[1]]),u):e},u.radius=function(S){return arguments.length?(t=typeof S=="function"?S:Kc(+S),u):t},u.precision=function(S){return arguments.length?(i=typeof S=="function"?S:Kc(+S),u):i},u}function ZC(){var e=[],t;return{point:function(i,a,c){t.push([i,a,c])},lineStart:function(){e.push(t=[])},lineEnd:Ir,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function Wm(e,t){return Nn(e[0]-t[0])<fn&&Nn(e[1]-t[1])<fn}function Tm(e,t,i,a){this.x=e,this.z=t,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}function qC(e,t,i,a,c){var m=[],f=[],u,S;if(e.forEach(function(B){if(!((O=B.length-1)<=0)){var O,he=B[0],Y=B[O],q;if(Wm(he,Y)){if(!he[2]&&!Y[2]){for(c.lineStart(),u=0;u<O;++u)c.point((he=B[u])[0],he[1]);c.lineEnd();return}Y[0]+=2*fn}m.push(q=new Tm(he,B,null,!0)),f.push(q.o=new Tm(he,null,q,!1)),m.push(q=new Tm(Y,B,null,!1)),f.push(q.o=new Tm(Y,null,q,!0))}}),!!m.length){for(f.sort(t),BS(m),BS(f),u=0,S=f.length;u<S;++u)f[u].e=i=!i;for(var C=m[0],k,b;;){for(var I=C,R=!0;I.v;)if((I=I.n)===C)return;k=I.z,c.lineStart();do{if(I.v=I.o.v=!0,I.e){if(R)for(u=0,S=k.length;u<S;++u)c.point((b=k[u])[0],b[1]);else a(I.x,I.n.x,1,c);I=I.n}else{if(R)for(k=I.p.z,u=k.length-1;u>=0;--u)c.point((b=k[u])[0],b[1]);else a(I.x,I.p.x,-1,c);I=I.p}I=I.o,k=I.z,R=!R}while(!I.v);c.lineEnd()}}}function BS(e){if(t=e.length){for(var t,i=0,a=e[0],c;++i<t;)a.n=c=e[i],c.p=a,a=c;a.n=c=e[0],c.p=a}}function nv(e){return Nn(e[0])<=Mn?e[0]:as(e[0])*((Nn(e[0])+Mn)%oo-Mn)}function XC(e,t){var i=nv(t),a=t[1],c=nn(a),m=[nn(i),-an(i),0],f=0,u=0,S=new Gi;c===1?a=Lr+fn:c===-1&&(a=-Lr-fn);for(var C=0,k=e.length;C<k;++C)if(I=(b=e[C]).length)for(var b,I,R=b[I-1],B=nv(R),O=R[1]/2+Cg,he=nn(O),Y=an(O),q=0;q<I;++q,B=se,he=G,Y=E,R=V){var V=b[q],se=nv(V),X=V[1]/2+Cg,G=nn(X),E=an(X),j=se-B,L=j>=0?1:-1,ee=L*j,Z=ee>Mn,ve=he*G;if(S.add(so(ve*L*nn(ee),Y*E+ve*an(ee))),f+=Z?j+L*oo:j,Z^B>=i^se>=i){var _e=Lh(ec(R),ec(V));Fg(_e);var pe=Lh(m,_e);Fg(pe);var oe=(Z^j>=0?-1:1)*ao(pe[2]);(a>oe||a===oe&&(_e[0]||_e[1]))&&(u+=Z^j>=0?1:-1)}}return(f<-fn||f<fn&&S<-Vf)^u&1}function KC(e,t,i,a){return function(c){var m=t(c),f=ZC(),u=t(f),S=!1,C,k,b,I={point:R,lineStart:O,lineEnd:he,polygonStart:function(){I.point=Y,I.lineStart=q,I.lineEnd=V,k=[],C=[]},polygonEnd:function(){I.point=R,I.lineStart=O,I.lineEnd=he,k=zC(k);var se=XC(C,a);k.length?(S||(c.polygonStart(),S=!0),qC(k,WR,se,i,c)):se&&(S||(c.polygonStart(),S=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),S&&(c.polygonEnd(),S=!1),k=C=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function R(se,X){e(se,X)&&c.point(se,X)}function B(se,X){m.point(se,X)}function O(){I.point=B,m.lineStart()}function he(){I.point=R,m.lineEnd()}function Y(se,X){b.push([se,X]),u.point(se,X)}function q(){u.lineStart(),b=[]}function V(){Y(b[0][0],b[0][1]),u.lineEnd();var se=u.clean(),X=f.result(),G,E=X.length,j,L,ee;if(b.pop(),C.push(b),b=null,!!E){if(se&1){if(L=X[0],(j=L.length-1)>0){for(S||(c.polygonStart(),S=!0),c.lineStart(),G=0;G<j;++G)c.point((ee=L[G])[0],ee[1]);c.lineEnd()}return}E>1&&se&2&&X.push(X.pop().concat(X.shift())),k.push(X.filter(GR))}}return I}}function GR(e){return e.length>1}function WR(e,t){return((e=e.x)[0]<0?e[1]-Lr-fn:Lr-e[1])-((t=t.x)[0]<0?t[1]-Lr-fn:Lr-t[1])}const G_=KC(function(){return!0},HR,qR,[-Mn,-Lr]);function HR(e){var t=NaN,i=NaN,a=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(m,f){var u=m>0?Mn:-Mn,S=Nn(m-t);Nn(S-Mn)<fn?(e.point(t,i=(i+f)/2>0?Lr:-Lr),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),e.point(m,i),c=0):a!==u&&S>=Mn&&(Nn(t-a)<fn&&(t-=a*fn),Nn(m-u)<fn&&(m-=u*fn),i=ZR(t,i,m,f),e.point(a,i),e.lineEnd(),e.lineStart(),e.point(u,i),c=0),e.point(t=m,i=f),a=u},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function ZR(e,t,i,a){var c,m,f=nn(e-i);return Nn(f)>fn?Hh((nn(t)*(m=an(a))*nn(i)-nn(a)*(c=an(t))*nn(e))/(c*m*f)):(t+a)/2}function qR(e,t,i,a){var c;if(e==null)c=i*Lr,a.point(-Mn,c),a.point(0,c),a.point(Mn,c),a.point(Mn,0),a.point(Mn,-c),a.point(0,-c),a.point(-Mn,-c),a.point(-Mn,0),a.point(-Mn,c);else if(Nn(e[0]-t[0])>fn){var m=e[0]<t[0]?Mn:-Mn;c=i*m/2,a.point(-m,c),a.point(0,c),a.point(m,c)}else a.point(t[0],t[1])}function YC(e){var t=an(e),i=6*yn,a=t>0,c=Nn(t)>fn;function m(k,b,I,R){HC(R,e,i,I,k,b)}function f(k,b){return an(k)*an(b)>t}function u(k){var b,I,R,B,O;return{lineStart:function(){B=R=!1,O=1},point:function(he,Y){var q=[he,Y],V,se=f(he,Y),X=a?se?0:C(he,Y):se?C(he+(he<0?Mn:-Mn),Y):0;if(!b&&(B=R=se)&&k.lineStart(),se!==R&&(V=S(b,q),(!V||Wm(b,V)||Wm(q,V))&&(q[2]=1)),se!==R)O=0,se?(k.lineStart(),V=S(q,b),k.point(V[0],V[1])):(V=S(b,q),k.point(V[0],V[1],2),k.lineEnd()),b=V;else if(c&&b&&a^se){var G;!(X&I)&&(G=S(q,b,!0))&&(O=0,a?(k.lineStart(),k.point(G[0][0],G[0][1]),k.point(G[1][0],G[1][1]),k.lineEnd()):(k.point(G[1][0],G[1][1]),k.lineEnd(),k.lineStart(),k.point(G[0][0],G[0][1],3)))}se&&(!b||!Wm(b,q))&&k.point(q[0],q[1]),b=q,R=se,I=X},lineEnd:function(){R&&k.lineEnd(),b=null},clean:function(){return O|(B&&R)<<1}}}function S(k,b,I){var R=ec(k),B=ec(b),O=[1,0,0],he=Lh(R,B),Y=Sm(he,he),q=he[0],V=Y-q*q;if(!V)return!I&&k;var se=t*Y/V,X=-t*q/V,G=Lh(O,he),E=Em(O,se),j=Em(he,X);tv(E,j);var L=G,ee=Sm(E,L),Z=Sm(L,L),ve=ee*ee-Z*(Sm(E,E)-1);if(!(ve<0)){var _e=yi(ve),pe=Em(L,(-ee-_e)/Z);if(tv(pe,E),pe=zg(pe),!I)return pe;var oe=k[0],ce=b[0],J=k[1],ne=b[1],de;ce<oe&&(de=oe,oe=ce,ce=de);var we=ce-oe,Te=Nn(we-Mn)<fn,Ne=Te||we<fn;if(!Te&&ne<J&&(de=J,J=ne,ne=de),Ne?Te?J+ne>0^pe[1]<(Nn(pe[0]-oe)<fn?J:ne):J<=pe[1]&&pe[1]<=ne:we>Mn^(oe<=pe[0]&&pe[0]<=ce)){var Pe=Em(L,(-ee+_e)/Z);return tv(Pe,E),[pe,zg(Pe)]}}}function C(k,b){var I=a?e:Mn-e,R=0;return k<-I?R|=1:k>I&&(R|=2),b<-I?R|=4:b>I&&(R|=8),R}return KC(f,u,m,a?[0,-e]:[-Mn,e-Mn])}function XR(e,t,i,a,c,m){var f=e[0],u=e[1],S=t[0],C=t[1],k=0,b=1,I=S-f,R=C-u,B;if(B=i-f,!(!I&&B>0)){if(B/=I,I<0){if(B<k)return;B<b&&(b=B)}else if(I>0){if(B>b)return;B>k&&(k=B)}if(B=c-f,!(!I&&B<0)){if(B/=I,I<0){if(B>b)return;B>k&&(k=B)}else if(I>0){if(B<k)return;B<b&&(b=B)}if(B=a-u,!(!R&&B>0)){if(B/=R,R<0){if(B<k)return;B<b&&(b=B)}else if(R>0){if(B>b)return;B>k&&(k=B)}if(B=m-u,!(!R&&B<0)){if(B/=R,R<0){if(B>b)return;B>k&&(k=B)}else if(R>0){if(B<k)return;B<b&&(b=B)}return k>0&&(e[0]=f+k*I,e[1]=u+k*R),b<1&&(t[0]=f+b*I,t[1]=u+b*R),!0}}}}}var Qd=1e9,Im=-Qd;function _y(e,t,i,a){function c(C,k){return e<=C&&C<=i&&t<=k&&k<=a}function m(C,k,b,I){var R=0,B=0;if(C==null||(R=f(C,b))!==(B=f(k,b))||S(C,k)<0^b>0)do I.point(R===0||R===3?e:i,R>1?a:t);while((R=(R+b+4)%4)!==B);else I.point(k[0],k[1])}function f(C,k){return Nn(C[0]-e)<fn?k>0?0:3:Nn(C[0]-i)<fn?k>0?2:1:Nn(C[1]-t)<fn?k>0?1:0:k>0?3:2}function u(C,k){return S(C.x,k.x)}function S(C,k){var b=f(C,1),I=f(k,1);return b!==I?b-I:b===0?k[1]-C[1]:b===1?C[0]-k[0]:b===2?C[1]-k[1]:k[0]-C[0]}return function(C){var k=C,b=ZC(),I,R,B,O,he,Y,q,V,se,X,G,E={point:j,lineStart:ve,lineEnd:_e,polygonStart:ee,polygonEnd:Z};function j(oe,ce){c(oe,ce)&&k.point(oe,ce)}function L(){for(var oe=0,ce=0,J=R.length;ce<J;++ce)for(var ne=R[ce],de=1,we=ne.length,Te=ne[0],Ne,Pe,ze=Te[0],qe=Te[1];de<we;++de)Ne=ze,Pe=qe,Te=ne[de],ze=Te[0],qe=Te[1],Pe<=a?qe>a&&(ze-Ne)*(a-Pe)>(qe-Pe)*(e-Ne)&&++oe:qe<=a&&(ze-Ne)*(a-Pe)<(qe-Pe)*(e-Ne)&&--oe;return oe}function ee(){k=b,I=[],R=[],G=!0}function Z(){var oe=L(),ce=G&&oe,J=(I=zC(I)).length;(ce||J)&&(C.polygonStart(),ce&&(C.lineStart(),m(null,null,1,C),C.lineEnd()),J&&qC(I,u,oe,m,C),C.polygonEnd()),k=C,I=R=B=null}function ve(){E.point=pe,R&&R.push(B=[]),X=!0,se=!1,q=V=NaN}function _e(){I&&(pe(O,he),Y&&se&&b.rejoin(),I.push(b.result())),E.point=j,se&&k.lineEnd()}function pe(oe,ce){var J=c(oe,ce);if(R&&B.push([oe,ce]),X)O=oe,he=ce,Y=J,X=!1,J&&(k.lineStart(),k.point(oe,ce));else if(J&&se)k.point(oe,ce);else{var ne=[q=Math.max(Im,Math.min(Qd,q)),V=Math.max(Im,Math.min(Qd,V))],de=[oe=Math.max(Im,Math.min(Qd,oe)),ce=Math.max(Im,Math.min(Qd,ce))];XR(ne,de,e,t,i,a)?(se||(k.lineStart(),k.point(ne[0],ne[1])),k.point(de[0],de[1]),J||k.lineEnd(),G=!1):J&&(k.lineStart(),k.point(oe,ce),G=!1)}q=oe,V=ce,se=J}return E}}function KR(){var e=0,t=0,i=960,a=500,c,m,f;return f={stream:function(u){return c&&m===u?c:c=_y(e,t,i,a)(m=u)},extent:function(u){return arguments.length?(e=+u[0][0],t=+u[0][1],i=+u[1][0],a=+u[1][1],c=m=null,f):[[e,t],[i,a]]}}}var W_,H_,Hm,Zm,Dh={sphere:Ir,point:Ir,lineStart:YR,lineEnd:Ir,polygonStart:Ir,polygonEnd:Ir};function YR(){Dh.point=QR,Dh.lineEnd=JR}function JR(){Dh.point=Dh.lineEnd=Ir}function QR(e,t){e*=yn,t*=yn,H_=e,Hm=nn(t),Zm=an(t),Dh.point=eO}function eO(e,t){e*=yn,t*=yn;var i=nn(t),a=an(t),c=Nn(e-H_),m=an(c),f=nn(c),u=a*f,S=Zm*i-Hm*a*m,C=Hm*i+Zm*a*m;W_.add(so(yi(u*u+S*S),C)),H_=e,Hm=i,Zm=a}function JC(e){return W_=new Gi,Ms(e,Dh),+W_}var Z_=[null,null],tO={type:"LineString",coordinates:Z_};function Ug(e,t){return Z_[0]=e,Z_[1]=t,JC(tO)}var NS={Feature:function(e,t){return $g(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,a=-1,c=i.length;++a<c;)if($g(i[a].geometry,t))return!0;return!1}},US={Sphere:function(){return!0},Point:function(e,t){return $S(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if($S(i[a],t))return!0;return!1},LineString:function(e,t){return VS(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(VS(i[a],t))return!0;return!1},Polygon:function(e,t){return GS(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,a=-1,c=i.length;++a<c;)if(GS(i[a],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,a=-1,c=i.length;++a<c;)if($g(i[a],t))return!0;return!1}};function $g(e,t){return e&&US.hasOwnProperty(e.type)?US[e.type](e,t):!1}function $S(e,t){return Ug(e,t)===0}function VS(e,t){for(var i,a,c,m=0,f=e.length;m<f;m++){if(a=Ug(e[m],t),a===0||m>0&&(c=Ug(e[m],e[m-1]),c>0&&i<=c&&a<=c&&(i+a-c)*(1-Math.pow((i-a)/c,2))<Vf*c))return!0;i=a}return!1}function GS(e,t){return!!XC(e.map(nO),QC(t))}function nO(e){return e=e.map(QC),e.pop(),e}function QC(e){return[e[0]*yn,e[1]*yn]}function rO(e,t){return(e&&NS.hasOwnProperty(e.type)?NS[e.type]:$g)(e,t)}function WS(e,t,i){var a=yh(e,t-fn,i).concat(t);return function(c){return a.map(function(m){return[c,m]})}}function HS(e,t,i){var a=yh(e,t-fn,i).concat(t);return function(c){return a.map(function(m){return[m,c]})}}function eP(){var e,t,i,a,c,m,f,u,S=10,C=S,k=90,b=360,I,R,B,O,he=2.5;function Y(){return{type:"MultiLineString",coordinates:q()}}function q(){return yh(bm(a/k)*k,i,k).map(B).concat(yh(bm(u/b)*b,f,b).map(O)).concat(yh(bm(t/S)*S,e,S).filter(function(V){return Nn(V%k)>fn}).map(I)).concat(yh(bm(m/C)*C,c,C).filter(function(V){return Nn(V%b)>fn}).map(R))}return Y.lines=function(){return q().map(function(V){return{type:"LineString",coordinates:V}})},Y.outline=function(){return{type:"Polygon",coordinates:[B(a).concat(O(f).slice(1),B(i).reverse().slice(1),O(u).reverse().slice(1))]}},Y.extent=function(V){return arguments.length?Y.extentMajor(V).extentMinor(V):Y.extentMinor()},Y.extentMajor=function(V){return arguments.length?(a=+V[0][0],i=+V[1][0],u=+V[0][1],f=+V[1][1],a>i&&(V=a,a=i,i=V),u>f&&(V=u,u=f,f=V),Y.precision(he)):[[a,u],[i,f]]},Y.extentMinor=function(V){return arguments.length?(t=+V[0][0],e=+V[1][0],m=+V[0][1],c=+V[1][1],t>e&&(V=t,t=e,e=V),m>c&&(V=m,m=c,c=V),Y.precision(he)):[[t,m],[e,c]]},Y.step=function(V){return arguments.length?Y.stepMajor(V).stepMinor(V):Y.stepMinor()},Y.stepMajor=function(V){return arguments.length?(k=+V[0],b=+V[1],Y):[k,b]},Y.stepMinor=function(V){return arguments.length?(S=+V[0],C=+V[1],Y):[S,C]},Y.precision=function(V){return arguments.length?(he=+V,I=WS(m,c,90),R=HS(t,e,he),B=WS(u,f,90),O=HS(a,i,he),Y):he},Y.extentMajor([[-180,-90+fn],[180,90-fn]]).extentMinor([[-180,-80-fn],[180,80+fn]])}function iO(){return eP()()}function oO(e,t){var i=e[0]*yn,a=e[1]*yn,c=t[0]*yn,m=t[1]*yn,f=an(a),u=nn(a),S=an(m),C=nn(m),k=f*an(i),b=f*nn(i),I=S*an(c),R=S*nn(c),B=2*ao(yi(IS(m-a)+f*S*IS(c-i))),O=nn(B),he=B?function(Y){var q=nn(Y*=B)/O,V=nn(B-Y)/O,se=V*k+q*I,X=V*b+q*R,G=V*u+q*C;return[so(X,se)*rr,so(G,yi(se*se+X*X))*rr]}:function(){return[i*rr,a*rr]};return he.distance=B,he}const Gf=e=>e;var rv=new Gi,q_=new Gi,tP,nP,X_,K_,Ga={point:Ir,lineStart:Ir,lineEnd:Ir,polygonStart:function(){Ga.lineStart=sO,Ga.lineEnd=lO},polygonEnd:function(){Ga.lineStart=Ga.lineEnd=Ga.point=Ir,rv.add(Nn(q_)),q_=new Gi},result:function(){var e=rv/2;return rv=new Gi,e}};function sO(){Ga.point=aO}function aO(e,t){Ga.point=rP,tP=X_=e,nP=K_=t}function rP(e,t){q_.add(K_*e-X_*t),X_=e,K_=t}function lO(){rP(tP,nP)}var Bh=1/0,Vg=Bh,Wf=-Bh,Gg=Wf,Wg={point:uO,lineStart:Ir,lineEnd:Ir,polygonStart:Ir,polygonEnd:Ir,result:function(){var e=[[Bh,Vg],[Wf,Gg]];return Wf=Gg=-(Vg=Bh=1/0),e}};function uO(e,t){e<Bh&&(Bh=e),e>Wf&&(Wf=e),t<Vg&&(Vg=t),t>Gg&&(Gg=t)}var Y_=0,J_=0,ef=0,Hg=0,Zg=0,vh=0,Q_=0,e1=0,tf=0,iP,oP,ha,da,os={point:tc,lineStart:ZS,lineEnd:qS,polygonStart:function(){os.lineStart=dO,os.lineEnd=fO},polygonEnd:function(){os.point=tc,os.lineStart=ZS,os.lineEnd=qS},result:function(){var e=tf?[Q_/tf,e1/tf]:vh?[Hg/vh,Zg/vh]:ef?[Y_/ef,J_/ef]:[NaN,NaN];return Y_=J_=ef=Hg=Zg=vh=Q_=e1=tf=0,e}};function tc(e,t){Y_+=e,J_+=t,++ef}function ZS(){os.point=cO}function cO(e,t){os.point=hO,tc(ha=e,da=t)}function hO(e,t){var i=e-ha,a=t-da,c=yi(i*i+a*a);Hg+=c*(ha+e)/2,Zg+=c*(da+t)/2,vh+=c,tc(ha=e,da=t)}function qS(){os.point=tc}function dO(){os.point=pO}function fO(){sP(iP,oP)}function pO(e,t){os.point=sP,tc(iP=ha=e,oP=da=t)}function sP(e,t){var i=e-ha,a=t-da,c=yi(i*i+a*a);Hg+=c*(ha+e)/2,Zg+=c*(da+t)/2,vh+=c,c=da*e-ha*t,Q_+=c*(ha+e),e1+=c*(da+t),tf+=c*3,tc(ha=e,da=t)}function aP(e){this._context=e}aP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,oo);break}}},result:Ir};var t1=new Gi,iv,lP,uP,nf,rf,Hf={point:Ir,lineStart:function(){Hf.point=mO},lineEnd:function(){iv&&cP(lP,uP),Hf.point=Ir},polygonStart:function(){iv=!0},polygonEnd:function(){iv=null},result:function(){var e=+t1;return t1=new Gi,e}};function mO(e,t){Hf.point=cP,lP=nf=e,uP=rf=t}function cP(e,t){nf-=e,rf-=t,t1.add(yi(nf*nf+rf*rf)),nf=e,rf=t}function hP(){this._string=[]}hP.prototype={_radius:4.5,_circle:XS(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=XS(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function XS(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function gO(e,t){var i=4.5,a,c;function m(f){return f&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Ms(f,a(c))),c.result()}return m.area=function(f){return Ms(f,a(Ga)),Ga.result()},m.measure=function(f){return Ms(f,a(Hf)),Hf.result()},m.bounds=function(f){return Ms(f,a(Wg)),Wg.result()},m.centroid=function(f){return Ms(f,a(os)),os.result()},m.projection=function(f){return arguments.length?(a=f==null?(e=null,Gf):(e=f).stream,m):e},m.context=function(f){return arguments.length?(c=f==null?(t=null,new hP):new aP(t=f),typeof i!="function"&&c.pointRadius(i),m):t},m.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(c.pointRadius(+f),+f),m):i},m.projection(e).context(t)}function yO(e){return{stream:op(e)}}function op(e){return function(t){var i=new n1;for(var a in e)i[a]=e[a];return i.stream=t,i}}function n1(){}n1.prototype={constructor:n1,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bx(e,t,i){var a=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),a!=null&&e.clipExtent(null),Ms(i,e.stream(Wg)),t(Wg.result()),a!=null&&e.clipExtent(a),e}function xy(e,t,i){return bx(e,function(a){var c=t[1][0]-t[0][0],m=t[1][1]-t[0][1],f=Math.min(c/(a[1][0]-a[0][0]),m/(a[1][1]-a[0][1])),u=+t[0][0]+(c-f*(a[1][0]+a[0][0]))/2,S=+t[0][1]+(m-f*(a[1][1]+a[0][1]))/2;e.scale(150*f).translate([u,S])},i)}function Sx(e,t,i){return xy(e,[[0,0],t],i)}function Ex(e,t,i){return bx(e,function(a){var c=+t,m=c/(a[1][0]-a[0][0]),f=(c-m*(a[1][0]+a[0][0]))/2,u=-m*a[0][1];e.scale(150*m).translate([f,u])},i)}function Tx(e,t,i){return bx(e,function(a){var c=+t,m=c/(a[1][1]-a[0][1]),f=-m*a[0][0],u=(c-m*(a[1][1]+a[0][1]))/2;e.scale(150*m).translate([f,u])},i)}var KS=16,vO=an(30*yn);function YS(e,t){return+t?xO(e,t):_O(e)}function _O(e){return op({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function xO(e,t){function i(a,c,m,f,u,S,C,k,b,I,R,B,O,he){var Y=C-a,q=k-c,V=Y*Y+q*q;if(V>4*t&&O--){var se=f+I,X=u+R,G=S+B,E=yi(se*se+X*X+G*G),j=ao(G/=E),L=Nn(Nn(G)-1)<fn||Nn(m-b)<fn?(m+b)/2:so(X,se),ee=e(L,j),Z=ee[0],ve=ee[1],_e=Z-a,pe=ve-c,oe=q*_e-Y*pe;(oe*oe/V>t||Nn((Y*_e+q*pe)/V-.5)>.3||f*I+u*R+S*B<vO)&&(i(a,c,m,f,u,S,Z,ve,L,se/=E,X/=E,G,O,he),he.point(Z,ve),i(Z,ve,L,se,X,G,C,k,b,I,R,B,O,he))}}return function(a){var c,m,f,u,S,C,k,b,I,R,B,O,he={point:Y,lineStart:q,lineEnd:se,polygonStart:function(){a.polygonStart(),he.lineStart=X},polygonEnd:function(){a.polygonEnd(),he.lineStart=q}};function Y(j,L){j=e(j,L),a.point(j[0],j[1])}function q(){b=NaN,he.point=V,a.lineStart()}function V(j,L){var ee=ec([j,L]),Z=e(j,L);i(b,I,k,R,B,O,b=Z[0],I=Z[1],k=j,R=ee[0],B=ee[1],O=ee[2],KS,a),a.point(b,I)}function se(){he.point=Y,a.lineEnd()}function X(){q(),he.point=G,he.lineEnd=E}function G(j,L){V(c=j,L),m=b,f=I,u=R,S=B,C=O,he.point=V}function E(){i(b,I,k,R,B,O,m,f,c,u,S,C,KS,a),he.lineEnd=se,se()}return he}}var wO=op({point:function(e,t){this.stream.point(e*yn,t*yn)}});function bO(e){return op({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}})}function SO(e,t,i,a,c){function m(f,u){return f*=a,u*=c,[t+e*f,i-e*u]}return m.invert=function(f,u){return[(f-t)/e*a,(i-u)/e*c]},m}function JS(e,t,i,a,c,m){if(!m)return SO(e,t,i,a,c);var f=an(m),u=nn(m),S=f*e,C=u*e,k=f/e,b=u/e,I=(u*i-f*t)/e,R=(u*t+f*i)/e;function B(O,he){return O*=a,he*=c,[S*O-C*he+t,i-C*O-S*he]}return B.invert=function(O,he){return[a*(k*O-b*he+I),c*(R-b*O-k*he)]},B}function va(e){return Ix(function(){return e})()}function Ix(e){var t,i=150,a=480,c=250,m=0,f=0,u=0,S=0,C=0,k,b=0,I=1,R=1,B=null,O=G_,he=null,Y,q,V,se=Gf,X=.5,G,E,j,L,ee;function Z(oe){return j(oe[0]*yn,oe[1]*yn)}function ve(oe){return oe=j.invert(oe[0],oe[1]),oe&&[oe[0]*rr,oe[1]*rr]}Z.stream=function(oe){return L&&ee===oe?L:L=wO(bO(k)(O(G(se(ee=oe)))))},Z.preclip=function(oe){return arguments.length?(O=oe,B=void 0,pe()):O},Z.postclip=function(oe){return arguments.length?(se=oe,he=Y=q=V=null,pe()):se},Z.clipAngle=function(oe){return arguments.length?(O=+oe?YC(B=oe*yn):(B=null,G_),pe()):B*rr},Z.clipExtent=function(oe){return arguments.length?(se=oe==null?(he=Y=q=V=null,Gf):_y(he=+oe[0][0],Y=+oe[0][1],q=+oe[1][0],V=+oe[1][1]),pe()):he==null?null:[[he,Y],[q,V]]},Z.scale=function(oe){return arguments.length?(i=+oe,_e()):i},Z.translate=function(oe){return arguments.length?(a=+oe[0],c=+oe[1],_e()):[a,c]},Z.center=function(oe){return arguments.length?(m=oe[0]%360*yn,f=oe[1]%360*yn,_e()):[m*rr,f*rr]},Z.rotate=function(oe){return arguments.length?(u=oe[0]%360*yn,S=oe[1]%360*yn,C=oe.length>2?oe[2]%360*yn:0,_e()):[u*rr,S*rr,C*rr]},Z.angle=function(oe){return arguments.length?(b=oe%360*yn,_e()):b*rr},Z.reflectX=function(oe){return arguments.length?(I=oe?-1:1,_e()):I<0},Z.reflectY=function(oe){return arguments.length?(R=oe?-1:1,_e()):R<0},Z.precision=function(oe){return arguments.length?(G=YS(E,X=oe*oe),pe()):yi(X)},Z.fitExtent=function(oe,ce){return xy(Z,oe,ce)},Z.fitSize=function(oe,ce){return Sx(Z,oe,ce)},Z.fitWidth=function(oe,ce){return Ex(Z,oe,ce)},Z.fitHeight=function(oe,ce){return Tx(Z,oe,ce)};function _e(){var oe=JS(i,0,0,I,R,b).apply(null,t(m,f)),ce=JS(i,a-oe[0],c-oe[1],I,R,b);return k=wx(u,S,C),E=$_(t,ce),j=$_(k,E),G=YS(E,X),pe()}function pe(){return L=ee=null,Z}return function(){return t=e.apply(this,arguments),Z.invert=t.invert&&ve,_e()}}function Cx(e){var t=0,i=Mn/3,a=Ix(e),c=a(t,i);return c.parallels=function(m){return arguments.length?a(t=m[0]*yn,i=m[1]*yn):[t*rr,i*rr]},c}function EO(e){var t=an(e);function i(a,c){return[a*t,nn(c)/t]}return i.invert=function(a,c){return[a/t,ao(c*t)]},i}function dP(e,t){var i=nn(e),a=(i+nn(t))/2;if(Nn(a)<fn)return EO(e);var c=1+i*(2*a-i),m=yi(c)/a;function f(u,S){var C=yi(c-2*a*nn(S))/a;return[C*nn(u*=a),m-C*an(u)]}return f.invert=function(u,S){var C=m-S,k=so(u,Nn(C))*as(C);return C*a<0&&(k-=Mn*as(u)*as(C)),[k/a,ao((c-(u*u+C*C)*a*a)/(2*a))]},f}function qg(){return Cx(dP).scale(155.424).center([0,33.6442])}function fP(){return qg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function TO(e){var t=e.length;return{point:function(i,a){for(var c=-1;++c<t;)e[c].point(i,a)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function IO(){var e,t,i=fP(),a,c=qg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),m,f=qg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,S,C={point:function(I,R){S=[I,R]}};function k(I){var R=I[0],B=I[1];return S=null,a.point(R,B),S||(m.point(R,B),S)||(u.point(R,B),S)}k.invert=function(I){var R=i.scale(),B=i.translate(),O=(I[0]-B[0])/R,he=(I[1]-B[1])/R;return(he>=.12&&he<.234&&O>=-.425&&O<-.214?c:he>=.166&&he<.234&&O>=-.214&&O<-.115?f:i).invert(I)},k.stream=function(I){return e&&t===I?e:e=TO([i.stream(t=I),c.stream(I),f.stream(I)])},k.precision=function(I){return arguments.length?(i.precision(I),c.precision(I),f.precision(I),b()):i.precision()},k.scale=function(I){return arguments.length?(i.scale(I),c.scale(I*.35),f.scale(I),k.translate(i.translate())):i.scale()},k.translate=function(I){if(!arguments.length)return i.translate();var R=i.scale(),B=+I[0],O=+I[1];return a=i.translate(I).clipExtent([[B-.455*R,O-.238*R],[B+.455*R,O+.238*R]]).stream(C),m=c.translate([B-.307*R,O+.201*R]).clipExtent([[B-.425*R+fn,O+.12*R+fn],[B-.214*R-fn,O+.234*R-fn]]).stream(C),u=f.translate([B-.205*R,O+.212*R]).clipExtent([[B-.214*R+fn,O+.166*R+fn],[B-.115*R-fn,O+.234*R-fn]]).stream(C),b()},k.fitExtent=function(I,R){return xy(k,I,R)},k.fitSize=function(I,R){return Sx(k,I,R)},k.fitWidth=function(I,R){return Ex(k,I,R)},k.fitHeight=function(I,R){return Tx(k,I,R)};function b(){return e=t=null,k}return k.scale(1070)}function pP(e){return function(t,i){var a=an(t),c=an(i),m=e(a*c);return m===1/0?[2,0]:[m*c*nn(t),m*nn(i)]}}function sp(e){return function(t,i){var a=yi(t*t+i*i),c=e(a),m=nn(c),f=an(c);return[so(t*m,a*f),ao(a&&i*m/a)]}}var Px=pP(function(e){return yi(2/(1+e))});Px.invert=sp(function(e){return 2*ao(e/2)});function CO(){return va(Px).scale(124.75).clipAngle(180-.001)}var Ax=pP(function(e){return(e=RC(e))&&e/nn(e)});Ax.invert=sp(function(e){return e});function PO(){return va(Ax).scale(79.4188).clipAngle(180-.001)}function ap(e,t){return[e,Pg(_x((Lr+t)/2))]}ap.invert=function(e,t){return[e,2*Hh(FC(t))-Lr]};function AO(){return mP(ap).scale(961/oo)}function mP(e){var t=va(e),i=t.center,a=t.scale,c=t.translate,m=t.clipExtent,f=null,u,S,C;t.scale=function(b){return arguments.length?(a(b),k()):a()},t.translate=function(b){return arguments.length?(c(b),k()):c()},t.center=function(b){return arguments.length?(i(b),k()):i()},t.clipExtent=function(b){return arguments.length?(b==null?f=u=S=C=null:(f=+b[0][0],u=+b[0][1],S=+b[1][0],C=+b[1][1]),k()):f==null?null:[[f,u],[S,C]]};function k(){var b=Mn*a(),I=t(WC(t.rotate()).invert([0,0]));return m(f==null?[[I[0]-b,I[1]-b],[I[0]+b,I[1]+b]]:e===ap?[[Math.max(I[0]-b,f),u],[Math.min(I[0]+b,S),C]]:[[f,Math.max(I[1]-b,u)],[S,Math.min(I[1]+b,C)]])}return k()}function Cm(e){return _x((Lr+e)/2)}function gP(e,t){var i=an(e),a=e===t?nn(e):Pg(i/an(t))/Pg(Cm(t)/Cm(e)),c=i*ev(Cm(e),a)/a;if(!a)return ap;function m(f,u){c>0?u<-Lr+fn&&(u=-Lr+fn):u>Lr-fn&&(u=Lr-fn);var S=c/ev(Cm(u),a);return[S*nn(a*f),c-S*an(a*f)]}return m.invert=function(f,u){var S=c-u,C=as(a)*yi(f*f+S*S),k=so(f,Nn(S))*as(S);return S*a<0&&(k-=Mn*as(f)*as(S)),[k/a,2*Hh(ev(c/C,1/a))-Lr]},m}function kO(){return Cx(gP).scale(109.5).parallels([30,30])}function Zf(e,t){return[e,t]}Zf.invert=Zf;function MO(){return va(Zf).scale(152.63)}function yP(e,t){var i=an(e),a=e===t?nn(e):(i-an(t))/(t-e),c=i/a+e;if(Nn(a)<fn)return Zf;function m(f,u){var S=c-u,C=a*f;return[S*nn(C),c-S*an(C)]}return m.invert=function(f,u){var S=c-u,C=so(f,Nn(S))*as(S);return S*a<0&&(C-=Mn*as(f)*as(S)),[C/a,c-as(a)*yi(f*f+S*S)]},m}function zO(){return Cx(yP).scale(131.154).center([0,13.9389])}var yf=1.340264,vf=-.081106,_f=893e-6,xf=.003796,Xg=yi(3)/2,FO=12;function kx(e,t){var i=ao(Xg*nn(t)),a=i*i,c=a*a*a;return[e*an(i)/(Xg*(yf+3*vf*a+c*(7*_f+9*xf*a))),i*(yf+vf*a+c*(_f+xf*a))]}kx.invert=function(e,t){for(var i=t,a=i*i,c=a*a*a,m=0,f,u,S;m<FO&&(u=i*(yf+vf*a+c*(_f+xf*a))-t,S=yf+3*vf*a+c*(7*_f+9*xf*a),i-=f=u/S,a=i*i,c=a*a*a,!(Nn(f)<Vf));++m);return[Xg*e*(yf+3*vf*a+c*(7*_f+9*xf*a))/an(i),ao(nn(i)/Xg)]};function RO(){return va(kx).scale(177.158)}function Mx(e,t){var i=an(t),a=an(e)*i;return[i*nn(e)/a,nn(t)/a]}Mx.invert=sp(Hh);function OO(){return va(Mx).scale(144.049).clipAngle(60)}function jO(){var e=1,t=0,i=0,a=1,c=1,m=0,f,u,S=null,C,k,b,I=1,R=1,B=op({point:function(se,X){var G=V([se,X]);this.stream.point(G[0],G[1])}}),O=Gf,he,Y;function q(){return I=e*a,R=e*c,he=Y=null,V}function V(se){var X=se[0]*I,G=se[1]*R;if(m){var E=G*f-X*u;X=X*f+G*u,G=E}return[X+t,G+i]}return V.invert=function(se){var X=se[0]-t,G=se[1]-i;if(m){var E=G*f+X*u;X=X*f-G*u,G=E}return[X/I,G/R]},V.stream=function(se){return he&&Y===se?he:he=B(O(Y=se))},V.postclip=function(se){return arguments.length?(O=se,S=C=k=b=null,q()):O},V.clipExtent=function(se){return arguments.length?(O=se==null?(S=C=k=b=null,Gf):_y(S=+se[0][0],C=+se[0][1],k=+se[1][0],b=+se[1][1]),q()):S==null?null:[[S,C],[k,b]]},V.scale=function(se){return arguments.length?(e=+se,q()):e},V.translate=function(se){return arguments.length?(t=+se[0],i=+se[1],q()):[t,i]},V.angle=function(se){return arguments.length?(m=se%360*yn,u=nn(m),f=an(m),q()):m*rr},V.reflectX=function(se){return arguments.length?(a=se?-1:1,q()):a<0},V.reflectY=function(se){return arguments.length?(c=se?-1:1,q()):c<0},V.fitExtent=function(se,X){return xy(V,se,X)},V.fitSize=function(se,X){return Sx(V,se,X)},V.fitWidth=function(se,X){return Ex(V,se,X)},V.fitHeight=function(se,X){return Tx(V,se,X)},V}function zx(e,t){var i=t*t,a=i*i;return[e*(.8707-.131979*i+a*(-.013791+a*(.003971*i-.001529*a))),t*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))]}zx.invert=function(e,t){var i=t,a=25,c;do{var m=i*i,f=m*m;i-=c=(i*(1.007226+m*(.015085+f*(-.044475+.028874*m-.005916*f)))-t)/(1.007226+m*(.015085*3+f*(-.044475*7+.028874*9*m-.005916*11*f)))}while(Nn(c)>fn&&--a>0);return[e/(.8707+(m=i*i)*(-.131979+m*(-.013791+m*m*m*(.003971-.001529*m)))),i]};function LO(){return va(zx).scale(175.295)}function Fx(e,t){return[an(t)*nn(e),nn(t)]}Fx.invert=sp(ao);function DO(){return va(Fx).scale(249.5).clipAngle(90+fn)}function Rx(e,t){var i=an(t),a=1+an(e)*i;return[i*nn(e)/a,nn(t)/a]}Rx.invert=sp(function(e){return 2*Hh(e)});function BO(){return va(Rx).scale(250).clipAngle(142)}function Ox(e,t){return[Pg(_x((Lr+t)/2)),-e]}Ox.invert=function(e,t){return[-t,2*Hh(FC(e))-Lr]};function NO(){var e=mP(Ox),t=e.center,i=e.rotate;return e.center=function(a){return arguments.length?t([-a[1],a[0]]):(a=t(),[a[1],-a[0]])},e.rotate=function(a){return arguments.length?i([a[0],a[1],a.length>2?a[2]+90:90]):(a=i(),[a[0],a[1],a[2]-90])},i([0,0,90]).scale(159.155)}const UO=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:fP,geoAlbersUsa:IO,geoArea:zR,geoAzimuthalEqualArea:CO,geoAzimuthalEqualAreaRaw:Px,geoAzimuthalEquidistant:PO,geoAzimuthalEquidistantRaw:Ax,geoBounds:jR,geoCentroid:$R,geoCircle:VR,geoClipAntimeridian:G_,geoClipCircle:YC,geoClipExtent:KR,geoClipRectangle:_y,geoConicConformal:kO,geoConicConformalRaw:gP,geoConicEqualArea:qg,geoConicEqualAreaRaw:dP,geoConicEquidistant:zO,geoConicEquidistantRaw:yP,geoContains:rO,geoDistance:Ug,geoEqualEarth:RO,geoEqualEarthRaw:kx,geoEquirectangular:MO,geoEquirectangularRaw:Zf,geoGnomonic:OO,geoGnomonicRaw:Mx,geoGraticule:eP,geoGraticule10:iO,geoIdentity:jO,geoInterpolate:oO,geoLength:JC,geoMercator:AO,geoMercatorRaw:ap,geoNaturalEarth1:LO,geoNaturalEarth1Raw:zx,geoOrthographic:DO,geoOrthographicRaw:Fx,geoPath:gO,geoProjection:va,geoProjectionMutator:Ix,geoRotation:WC,geoStereographic:BO,geoStereographicRaw:Rx,geoStream:Ms,geoTransform:yO,geoTransverseMercator:NO,geoTransverseMercatorRaw:Ox},Symbol.toStringTag,{value:"Module"})),$O=u1(UO);var au=2*Math.PI*6378137/2,VO=Math.PI/180;function vP(e){return e=e||256,2*Math.PI*6378137/e}function GO(e){var t=e[0],i=e[1],a=e[2];return(1<<a)*((1<<a)+t)+i}function r1(e,t,i){var a=_P(e,t,i);return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a}function _P(e,t,i){var a=t,c=Vx(e[0]),m=$x(e[1]),f=Math.sin(m*VO),u=Math.pow(2,a),S=u*(c/360+.5),C=u*(.5-.25*Math.log((1+f)/(1-f))/Math.PI);return oc([S,C,a],i)}function WO(e,t=6){var i=e[0],a=e[1],c=e[2],m=e[3],f=(i-c)/2+c,u=(a-m)/2+m;return t!=null&&(f=Number(f.toFixed(t)),u=Number(u.toFixed(t))),[f,u]}function Kg(e,t,i={enable:!0,decimal:1}){e=wy(e,t);var a=e[0],c=e[1],m=a*au/180,f=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return f=f*au/180,i.enable&&(m=Number(m.toFixed(i.decimal)),f=Number(f.toFixed(i.decimal))),[m,f]}function i1(e,t=6){var i=e[0],a=e[1],c=i/au*180,m=a/au*180;return m=180/Math.PI*(2*Math.atan(Math.exp(m*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),m=Number(m.toFixed(t))),[c,m]}function jx(e,t,i){var a=e[0],c=e[1],m=Nx(t,i),f=(a+au)/m,u=(c+au)/m;return[f,u,t]}function xP(e,t,i){e=wy(e,i);var a=Kg(e),c=jx(a,t);return Lx(c)}function HO(e,t,i){if(e=wy(e,i),t===0)return[0,0,0];var a=xP(e,t);return bP(a)}function ZO(e,t){if(t===0)return[0,0,0];var i=jx(e,t);return Lx(i)}function o1(e,t,i=1){var a=e[0],c=e[1],m=e[2],f=Nx(m,t),u=a*f-au,S=c*f-au;return i!=null&&(u=Number(u.toFixed(i)),S=Number(S.toFixed(i))),[u,S]}function Lx(e,t,i){t=t||256;var a=e[0],c=e[1],m=e[2];if(m===0)return[0,0,0];Bx(m);var f=Math.ceil(a/t)-1,u=Math.ceil(c/t)-1;return f<0&&(f=0),u<0&&(u=0),[f,u,m]}function Dx(e,t,i){oc(e,i),t=t||256;var a=e[0],c=e[1],m=e[2],f=o1([a*t,c*t,m]),u=o1([(a+1)*t,(c+1)*t,m]);return[f[0],f[1],u[0],u[1]]}function wP(e,t){oc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var m=Dx([i,a,c]),f=m[0],u=m[1],S=m[2],C=m[3],k=i1([f,u,c]),b=i1([S,C,c]);return[k[0],k[1],b[0],b[1]]}function qO(e){var t=lp(e);return Dx(t)}function XO(e){var t=lp(e);return wP(t)}function bP(e,t){oc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return[0,0,0];var m=i,f=Math.pow(2,c)-1-a;return[m,f,c]}function lp(e){var t=e[0],i=e[1],a=e[2],c=t,m=Math.pow(2,a)-i-1;return[c,m,a]}function KO(e){var t=lp(e);return SP(t)}function SP(e,t){oc(e,t);var i=e[0],a=e[1],c=e[2];if(c===0)return"";var m="";return a=Math.pow(2,c)-1-a,Ux(c,0,-1).map(function(f){var u=0,S=1<<f-1;i&S&&(u+=1),a&S&&(u+=2),m=m.concat(u)}),m}function YO(e){var t=EP(e);return lp(t)}function EP(e){var t=0,i=0,a=e.length;return Ux(a,0,-1).map(function(c){var m=1<<c-1;switch(parseInt(e[a-c],0)){case 0:break;case 1:t+=m;break;case 2:i+=m;break;case 3:t+=m,i+=m;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,a]}function JO(e){var t=Kg([e[0],e[1]]),i=Kg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function oc(e,t){var i=e[0],a=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(a==null)throw new Error("<y> is required");return c=Bx(c),e=TP(e),e}function TP(e){var t=e[0],i=e[1],a=e[2],c=Math.pow(2,a);return t=t%c,t<0&&(t=t+c),[t,i,a]}function Bx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function wy(e,t){if(t===!1)return e;var i=Vx(e[0]),a=$x(e[1]);return a>85&&(a=85),a<-85&&(a=-85),[i,a]}function Nx(e,t){return vP(t)/Math.pow(2,e)}function Ux(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/i),0),c=Array(a),m=0;m<a;m++,e+=i)c[m]=e;return c}function QO(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],a=e[0][2],c=e[0][3];return e.map(function(m){m[0]<t&&(t=m[0]),m[1]<i&&(i=m[1]),m[2]>a&&(a=m[2]),m[3]>c&&(c=m[3])}),[t,i,a,c]}}function ej(e){try{return oc(e),!0}catch{return!1}}function $x(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function Vx(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function tj(e){var t=r1([e[0],e[1]],32),i=r1([e[2],e[3]],32),a=[t[0],t[1],i[0],i[1]],c=nj(a);if(c===0)return[0,0,0];var m=a[0]>>>32-c,f=a[1]>>>32-c;return[m,f,c]}function nj(e){for(var t=28,i=0;i<t;i++){var a=1<<32-(i+1);if((e[0]&a)!==(e[2]&a)||(e[1]&a)!==(e[3]&a))return i}return t}const rj=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:WO,bboxToMeters:JO,bboxToTile:tj,googleToBBox:XO,googleToBBoxMeters:qO,googleToQuadkey:KO,googleToTile:lp,hash:GO,initialResolution:vP,latitude:$x,lngLatToGoogle:HO,lngLatToMeters:Kg,lngLatToTile:xP,longitude:Vx,maxBBox:QO,metersToLngLat:i1,metersToPixels:jx,metersToTile:ZO,pixelsToMeters:o1,pixelsToTile:Lx,pointToTile:r1,pointToTileFraction:_P,quadkeyToGoogle:EP,quadkeyToTile:YO,range:Ux,resolution:Nx,tileToBBox:wP,tileToBBoxMeters:Dx,tileToGoogle:bP,tileToQuadkey:SP,validTile:ej,validateLngLat:wy,validateTile:oc,validateZoom:Bx,wrapTile:TP},Symbol.toStringTag,{value:"Module"})),ij=u1(rj);var by={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */by.read=function(e,t,i,a,c){var m,f,u=c*8-a-1,S=(1<<u)-1,C=S>>1,k=-7,b=i?c-1:0,I=i?-1:1,R=e[t+b];for(b+=I,m=R&(1<<-k)-1,R>>=-k,k+=u;k>0;m=m*256+e[t+b],b+=I,k-=8);for(f=m&(1<<-k)-1,m>>=-k,k+=a;k>0;f=f*256+e[t+b],b+=I,k-=8);if(m===0)m=1-C;else{if(m===S)return f?NaN:(R?-1:1)*(1/0);f=f+Math.pow(2,a),m=m-C}return(R?-1:1)*f*Math.pow(2,m-a)};by.write=function(e,t,i,a,c,m){var f,u,S,C=m*8-c-1,k=(1<<C)-1,b=k>>1,I=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=a?0:m-1,B=a?1:-1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,f=k):(f=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-f))<1&&(f--,S*=2),f+b>=1?t+=I/S:t+=I*Math.pow(2,1-b),t*S>=2&&(f++,S/=2),f+b>=k?(u=0,f=k):f+b>=1?(u=(t*S-1)*Math.pow(2,c),f=f+b):(u=t*Math.pow(2,b-1)*Math.pow(2,c),f=0));c>=8;e[i+R]=u&255,R+=B,u/=256,c-=8);for(f=f<<c|u,C+=c;C>0;e[i+R]=f&255,R+=B,f/=256,C-=8);e[i+R-B]|=O*128};var oj=qn,Pm=by;function qn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}qn.Varint=0;qn.Fixed64=1;qn.Bytes=2;qn.Fixed32=5;var s1=65536*65536,QS=1/s1,sj=12,IP=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),c=a>>3,m=this.pos;this.type=a&7,e(c,t,this),this.pos===m&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Am(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=tE(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Am(this.buf,this.pos)+Am(this.buf,this.pos+4)*s1;return this.pos+=8,e},readSFixed64:function(){var e=Am(this.buf,this.pos)+tE(this.buf,this.pos+4)*s1;return this.pos+=8,e},readFloat:function(){var e=Pm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Pm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,a;return a=t[this.pos++],i=a&127,a<128||(a=t[this.pos++],i|=(a&127)<<7,a<128)||(a=t[this.pos++],i|=(a&127)<<14,a<128)||(a=t[this.pos++],i|=(a&127)<<21,a<128)?i:(a=t[this.pos],i|=(a&15)<<28,aj(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=sj&&IP?wj(this.buf,t,e):xj(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==qn.Bytes)return e.push(this.readVarint(t));var i=Na(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==qn.Bytes)return e.push(this.readSVarint());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==qn.Bytes)return e.push(this.readBoolean());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==qn.Bytes)return e.push(this.readFloat());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==qn.Bytes)return e.push(this.readDouble());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed32());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed32());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readFixed64());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==qn.Bytes)return e.push(this.readSFixed64());var t=Na(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===qn.Varint)for(;this.buf[this.pos++]>127;);else if(t===qn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===qn.Fixed32)this.pos+=4;else if(t===qn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Jc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Jc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Jc(this.buf,e&-1,this.pos),Jc(this.buf,Math.floor(e*QS),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Jc(this.buf,e&-1,this.pos),Jc(this.buf,Math.floor(e*QS),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){lj(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=bj(this.buf,e,this.pos);var i=this.pos-t;i>=128&&eE(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Pm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Pm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&eE(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,qn.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,hj,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dj,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,mj,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,fj,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,pj,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,gj,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,yj,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,vj,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,_j,t)},writeBytesField:function(e,t){this.writeTag(e,qn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,qn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,qn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,qn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,qn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,qn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,qn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function aj(e,t,i){var a=i.buf,c,m;if(m=a[i.pos++],c=(m&112)>>4,m<128||(m=a[i.pos++],c|=(m&127)<<3,m<128)||(m=a[i.pos++],c|=(m&127)<<10,m<128)||(m=a[i.pos++],c|=(m&127)<<17,m<128)||(m=a[i.pos++],c|=(m&127)<<24,m<128)||(m=a[i.pos++],c|=(m&1)<<31,m<128))return Yc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Na(e){return e.type===qn.Bytes?e.readVarint()+e.pos:e.pos+1}function Yc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function lj(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(i=~(-e%4294967296),a=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,a=a+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),uj(i,a,t),cj(a,t)}function uj(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function cj(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function eE(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(a);for(var c=i.pos-1;c>=e;c--)i.buf[c+a]=i.buf[c]}function hj(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function dj(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function fj(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function pj(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function mj(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function gj(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function yj(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function vj(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function _j(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Am(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Jc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function tE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function xj(e,t,i){for(var a="",c=t;c<i;){var m=e[c],f=null,u=m>239?4:m>223?3:m>191?2:1;if(c+u>i)break;var S,C,k;u===1?m<128&&(f=m):u===2?(S=e[c+1],(S&192)===128&&(f=(m&31)<<6|S&63,f<=127&&(f=null))):u===3?(S=e[c+1],C=e[c+2],(S&192)===128&&(C&192)===128&&(f=(m&15)<<12|(S&63)<<6|C&63,(f<=2047||f>=55296&&f<=57343)&&(f=null))):u===4&&(S=e[c+1],C=e[c+2],k=e[c+3],(S&192)===128&&(C&192)===128&&(k&192)===128&&(f=(m&15)<<18|(S&63)<<12|(C&63)<<6|k&63,(f<=65535||f>=1114112)&&(f=null))),f===null?(f=65533,u=1):f>65535&&(f-=65536,a+=String.fromCharCode(f>>>10&1023|55296),f=56320|f&1023),a+=String.fromCharCode(f),c+=u}return a}function wj(e,t,i){return IP.decode(e.subarray(t,i))}function bj(e,t,i){for(var a=0,c,m;a<t.length;a++){if(c=t.charCodeAt(a),c>55295&&c<57344)if(m)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,m=c;continue}else c=m-55296<<10|c-56320|65536,m=null;else{c>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):m=c;continue}else m&&(e[i++]=239,e[i++]=191,e[i++]=189,m=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Gx={exports:{}},CP=function(t,i){return function(){for(var c=new Array(arguments.length),m=0;m<c.length;m++)c[m]=arguments[m];return t.apply(i,c)}},Sj=CP,sc=Object.prototype.toString;function Wx(e){return sc.call(e)==="[object Array]"}function a1(e){return typeof e>"u"}function Ej(e){return e!==null&&!a1(e)&&e.constructor!==null&&!a1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Tj(e){return sc.call(e)==="[object ArrayBuffer]"}function Ij(e){return typeof FormData<"u"&&e instanceof FormData}function Cj(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Pj(e){return typeof e=="string"}function Aj(e){return typeof e=="number"}function PP(e){return e!==null&&typeof e=="object"}function qm(e){if(sc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function kj(e){return sc.call(e)==="[object Date]"}function Mj(e){return sc.call(e)==="[object File]"}function zj(e){return sc.call(e)==="[object Blob]"}function AP(e){return sc.call(e)==="[object Function]"}function Fj(e){return PP(e)&&AP(e.pipe)}function Rj(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function Oj(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function jj(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Hx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Wx(e))for(var i=0,a=e.length;i<a;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function l1(){var e={};function t(c,m){qm(e[m])&&qm(c)?e[m]=l1(e[m],c):qm(c)?e[m]=l1({},c):Wx(c)?e[m]=c.slice():e[m]=c}for(var i=0,a=arguments.length;i<a;i++)Hx(arguments[i],t);return e}function Lj(e,t,i){return Hx(t,function(c,m){i&&typeof c=="function"?e[m]=Sj(c,i):e[m]=c}),e}function Dj(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var qo={isArray:Wx,isArrayBuffer:Tj,isBuffer:Ej,isFormData:Ij,isArrayBufferView:Cj,isString:Pj,isNumber:Aj,isObject:PP,isPlainObject:qm,isUndefined:a1,isDate:kj,isFile:Mj,isBlob:zj,isFunction:AP,isStream:Fj,isURLSearchParams:Rj,isStandardBrowserEnv:jj,forEach:Hx,merge:l1,extend:Lj,trim:Oj,stripBOM:Dj},Qc=qo;function nE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var kP=function(t,i,a){if(!i)return t;var c;if(a)c=a(i);else if(Qc.isURLSearchParams(i))c=i.toString();else{var m=[];Qc.forEach(i,function(S,C){S===null||typeof S>"u"||(Qc.isArray(S)?C=C+"[]":S=[S],Qc.forEach(S,function(b){Qc.isDate(b)?b=b.toISOString():Qc.isObject(b)&&(b=JSON.stringify(b)),m.push(nE(C)+"="+nE(b))}))}),c=m.join("&")}if(c){var f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},Bj=qo;function Sy(){this.handlers=[]}Sy.prototype.use=function(t,i,a){return this.handlers.push({fulfilled:t,rejected:i,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Sy.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Sy.prototype.forEach=function(t){Bj.forEach(this.handlers,function(a){a!==null&&t(a)})};var Nj=Sy,Uj=qo,$j=function(t,i){Uj.forEach(t,function(c,m){m!==i&&m.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[m])})},MP=function(t,i,a,c,m){return t.config=i,a&&(t.code=a),t.request=c,t.response=m,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},ov,rE;function zP(){if(rE)return ov;rE=1;var e=MP;return ov=function(i,a,c,m,f){var u=new Error(i);return e(u,a,c,m,f)},ov}var sv,iE;function Vj(){if(iE)return sv;iE=1;var e=zP();return sv=function(i,a,c){var m=c.config.validateStatus;!c.status||!m||m(c.status)?i(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},sv}var av,oE;function Gj(){if(oE)return av;oE=1;var e=qo;return av=e.isStandardBrowserEnv()?function(){return{write:function(a,c,m,f,u,S){var C=[];C.push(a+"="+encodeURIComponent(c)),e.isNumber(m)&&C.push("expires="+new Date(m).toGMTString()),e.isString(f)&&C.push("path="+f),e.isString(u)&&C.push("domain="+u),S===!0&&C.push("secure"),document.cookie=C.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),av}var lv,sE;function Wj(){return sE||(sE=1,lv=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),lv}var uv,aE;function Hj(){return aE||(aE=1,uv=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),uv}var cv,lE;function Zj(){if(lE)return cv;lE=1;var e=Wj(),t=Hj();return cv=function(a,c){return a&&!e(c)?t(a,c):c},cv}var hv,uE;function qj(){if(uE)return hv;uE=1;var e=qo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return hv=function(a){var c={},m,f,u;return a&&e.forEach(a.split(`
`),function(C){if(u=C.indexOf(":"),m=e.trim(C.substr(0,u)).toLowerCase(),f=e.trim(C.substr(u+1)),m){if(c[m]&&t.indexOf(m)>=0)return;m==="set-cookie"?c[m]=(c[m]?c[m]:[]).concat([f]):c[m]=c[m]?c[m]+", "+f:f}}),c},hv}var dv,cE;function Xj(){if(cE)return dv;cE=1;var e=qo;return dv=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function m(f){var u=f;return i&&(a.setAttribute("href",u),u=a.href),a.setAttribute("href",u),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=m(window.location.href),function(u){var S=e.isString(u)?m(u):u;return S.protocol===c.protocol&&S.host===c.host}}():function(){return function(){return!0}}(),dv}var fv,hE;function dE(){if(hE)return fv;hE=1;var e=qo,t=Vj(),i=Gj(),a=kP,c=Zj(),m=qj(),f=Xj(),u=zP();return fv=function(C){return new Promise(function(b,I){var R=C.data,B=C.headers,O=C.responseType;e.isFormData(R)&&delete B["Content-Type"];var he=new XMLHttpRequest;if(C.auth){var Y=C.auth.username||"",q=C.auth.password?unescape(encodeURIComponent(C.auth.password)):"";B.Authorization="Basic "+btoa(Y+":"+q)}var V=c(C.baseURL,C.url);he.open(C.method.toUpperCase(),a(V,C.params,C.paramsSerializer),!0),he.timeout=C.timeout;function se(){if(he){var G="getAllResponseHeaders"in he?m(he.getAllResponseHeaders()):null,E=!O||O==="text"||O==="json"?he.responseText:he.response,j={data:E,status:he.status,statusText:he.statusText,headers:G,config:C,request:he};t(b,I,j),he=null}}if("onloadend"in he?he.onloadend=se:he.onreadystatechange=function(){!he||he.readyState!==4||he.status===0&&!(he.responseURL&&he.responseURL.indexOf("file:")===0)||setTimeout(se)},he.onabort=function(){he&&(I(u("Request aborted",C,"ECONNABORTED",he)),he=null)},he.onerror=function(){I(u("Network Error",C,null,he)),he=null},he.ontimeout=function(){var E="timeout of "+C.timeout+"ms exceeded";C.timeoutErrorMessage&&(E=C.timeoutErrorMessage),I(u(E,C,C.transitional&&C.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",he)),he=null},e.isStandardBrowserEnv()){var X=(C.withCredentials||f(V))&&C.xsrfCookieName?i.read(C.xsrfCookieName):void 0;X&&(B[C.xsrfHeaderName]=X)}"setRequestHeader"in he&&e.forEach(B,function(E,j){typeof R>"u"&&j.toLowerCase()==="content-type"?delete B[j]:he.setRequestHeader(j,E)}),e.isUndefined(C.withCredentials)||(he.withCredentials=!!C.withCredentials),O&&O!=="json"&&(he.responseType=C.responseType),typeof C.onDownloadProgress=="function"&&he.addEventListener("progress",C.onDownloadProgress),typeof C.onUploadProgress=="function"&&he.upload&&he.upload.addEventListener("progress",C.onUploadProgress),C.cancelToken&&C.cancelToken.promise.then(function(E){he&&(he.abort(),I(E),he=null)}),R||(R=null),he.send(R)})},fv}var ki=qo,fE=$j,Kj=MP,Yj={"Content-Type":"application/x-www-form-urlencoded"};function pE(e,t){!ki.isUndefined(e)&&ki.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Jj(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=dE()),e}function Qj(e,t,i){if(ki.isString(e))try{return(t||JSON.parse)(e),ki.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(i||JSON.stringify)(e)}var Ey={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Jj(),transformRequest:[function(t,i){return fE(i,"Accept"),fE(i,"Content-Type"),ki.isFormData(t)||ki.isArrayBuffer(t)||ki.isBuffer(t)||ki.isStream(t)||ki.isFile(t)||ki.isBlob(t)?t:ki.isArrayBufferView(t)?t.buffer:ki.isURLSearchParams(t)?(pE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ki.isObject(t)||i&&i["Content-Type"]==="application/json"?(pE(i,"application/json"),Qj(t)):t}],transformResponse:[function(t){var i=this.transitional,a=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,m=!a&&this.responseType==="json";if(m||c&&ki.isString(t)&&t.length)try{return JSON.parse(t)}catch(f){if(m)throw f.name==="SyntaxError"?Kj(f,this,"E_JSON_PARSE"):f}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Ey.headers={common:{Accept:"application/json, text/plain, */*"}};ki.forEach(["delete","get","head"],function(t){Ey.headers[t]={}});ki.forEach(["post","put","patch"],function(t){Ey.headers[t]=ki.merge(Yj)});var Zx=Ey,eL=qo,tL=Zx,nL=function(t,i,a){var c=this||tL;return eL.forEach(a,function(f){t=f.call(c,t,i)}),t},pv,mE;function FP(){return mE||(mE=1,pv=function(t){return!!(t&&t.__CANCEL__)}),pv}var gE=qo,mv=nL,rL=FP(),iL=Zx;function gv(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var oL=function(t){gv(t),t.headers=t.headers||{},t.data=mv.call(t,t.data,t.headers,t.transformRequest),t.headers=gE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),gE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||iL.adapter;return i(t).then(function(c){return gv(t),c.data=mv.call(t,c.data,c.headers,t.transformResponse),c},function(c){return rL(c)||(gv(t),c&&c.response&&(c.response.data=mv.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},$i=qo,RP=function(t,i){i=i||{};var a={},c=["url","method","data"],m=["headers","auth","proxy","params"],f=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],u=["validateStatus"];function S(I,R){return $i.isPlainObject(I)&&$i.isPlainObject(R)?$i.merge(I,R):$i.isPlainObject(R)?$i.merge({},R):$i.isArray(R)?R.slice():R}function C(I){$i.isUndefined(i[I])?$i.isUndefined(t[I])||(a[I]=S(void 0,t[I])):a[I]=S(t[I],i[I])}$i.forEach(c,function(R){$i.isUndefined(i[R])||(a[R]=S(void 0,i[R]))}),$i.forEach(m,C),$i.forEach(f,function(R){$i.isUndefined(i[R])?$i.isUndefined(t[R])||(a[R]=S(void 0,t[R])):a[R]=S(void 0,i[R])}),$i.forEach(u,function(R){R in i?a[R]=S(t[R],i[R]):R in t&&(a[R]=S(void 0,t[R]))});var k=c.concat(m).concat(f).concat(u),b=Object.keys(t).concat(Object.keys(i)).filter(function(R){return k.indexOf(R)===-1});return $i.forEach(b,C),a};const sL="axios",aL="0.21.4",lL="Promise based HTTP client for the browser and node.js",uL="index.js",cL={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},hL={type:"git",url:"https://github.com/axios/axios.git"},dL=["xhr","http","ajax","promise","node"],fL="Matt Zabriskie",pL="MIT",mL={url:"https://github.com/axios/axios/issues"},gL="https://axios-http.com",yL={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},vL={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},_L="dist/axios.min.js",xL="dist/axios.min.js",wL="./index.d.ts",bL={"follow-redirects":"^1.14.0"},SL=[{path:"./dist/axios.min.js",threshold:"5kB"}],EL={name:sL,version:aL,description:lL,main:uL,scripts:cL,repository:hL,keywords:dL,author:fL,license:pL,bugs:mL,homepage:gL,devDependencies:yL,browser:vL,jsdelivr:_L,unpkg:xL,typings:wL,dependencies:bL,bundlesize:SL};var OP=EL,qx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){qx[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var yE={},TL=OP.version.split(".");function jP(e,t){for(var i=t?t.split("."):TL,a=e.split("."),c=0;c<3;c++){if(i[c]>a[c])return!0;if(i[c]<a[c])return!1}return!1}qx.transitional=function(t,i,a){var c=i&&jP(i);function m(f,u){return"[Axios v"+OP.version+"] Transitional option '"+f+"'"+u+(a?". "+a:"")}return function(f,u,S){if(t===!1)throw new Error(m(u," has been removed in "+i));return c&&!yE[u]&&(yE[u]=!0,console.warn(m(u," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(f,u,S):!0}};function IL(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var m=a[c],f=t[m];if(f){var u=e[m],S=u===void 0||f(u,m,e);if(S!==!0)throw new TypeError("option "+m+" must be "+S);continue}if(i!==!0)throw Error("Unknown option "+m)}}var CL={isOlderVersion:jP,assertOptions:IL,validators:qx},LP=qo,PL=kP,vE=Nj,_E=oL,Ty=RP,DP=CL,eh=DP.validators;function up(e){this.defaults=e,this.interceptors={request:new vE,response:new vE}}up.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=Ty(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&DP.assertOptions(i,{silentJSONParsing:eh.transitional(eh.boolean,"1.0.0"),forcedJSONParsing:eh.transitional(eh.boolean,"1.0.0"),clarifyTimeoutError:eh.transitional(eh.boolean,"1.0.0")},!1);var a=[],c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(t)===!1||(c=c&&I.synchronous,a.unshift(I.fulfilled,I.rejected))});var m=[];this.interceptors.response.forEach(function(I){m.push(I.fulfilled,I.rejected)});var f;if(!c){var u=[_E,void 0];for(Array.prototype.unshift.apply(u,a),u=u.concat(m),f=Promise.resolve(t);u.length;)f=f.then(u.shift(),u.shift());return f}for(var S=t;a.length;){var C=a.shift(),k=a.shift();try{S=C(S)}catch(b){k(b);break}}try{f=_E(S)}catch(b){return Promise.reject(b)}for(;m.length;)f=f.then(m.shift(),m.shift());return f};up.prototype.getUri=function(t){return t=Ty(this.defaults,t),PL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};LP.forEach(["delete","get","head","options"],function(t){up.prototype[t]=function(i,a){return this.request(Ty(a||{},{method:t,url:i,data:(a||{}).data}))}});LP.forEach(["post","put","patch"],function(t){up.prototype[t]=function(i,a,c){return this.request(Ty(c||{},{method:t,url:i,data:a}))}});var AL=up,yv,xE;function BP(){if(xE)return yv;xE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,yv=e,yv}var vv,wE;function kL(){if(wE)return vv;wE=1;var e=BP();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(f){a=f});var c=this;i(function(f){c.reason||(c.reason=new e(f),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var a,c=new t(function(f){a=f});return{token:c,cancel:a}},vv=t,vv}var _v,bE;function ML(){return bE||(bE=1,_v=function(t){return function(a){return t.apply(null,a)}}),_v}var xv,SE;function zL(){return SE||(SE=1,xv=function(t){return typeof t=="object"&&t.isAxiosError===!0}),xv}var EE=qo,FL=CP,Xm=AL,RL=RP,OL=Zx;function NP(e){var t=new Xm(e),i=FL(Xm.prototype.request,t);return EE.extend(i,Xm.prototype,t),EE.extend(i,t),i}var Ds=NP(OL);Ds.Axios=Xm;Ds.create=function(t){return NP(RL(Ds.defaults,t))};Ds.Cancel=BP();Ds.CancelToken=kL();Ds.isCancel=FP();Ds.all=function(t){return Promise.all(t)};Ds.spread=ML();Ds.isAxiosError=zL();Gx.exports=Ds;Gx.exports.default=Ds;var jL=Gx.exports,LL=jL;const DL={},BL=Object.freeze(Object.defineProperty({__proto__:null,default:DL},Symbol.toStringTag,{value:"Module"})),NL=u1(BL);var Iy={},UL=Ch;function Ch(e,t){this.x=e,this.y=t}Ch.prototype={clone:function(){return new Ch(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=a,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),c=t.x+i*(this.x-t.x)-a*(this.y-t.y),m=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};Ch.convert=function(e){return e instanceof Ch?e:Array.isArray(e)?new Ch(e[0],e[1]):e};var $L=UL,UP=Nh;function Nh(e,t,i,a,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=c,e.readFields(VL,this,t)}function VL(e,t,i){e==1?t.id=i.readVarint():e==2?GL(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function GL(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[a]=c}}Nh.types=["Unknown","Point","LineString","Polygon"];Nh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,m=0,f=[],u;e.pos<t;){if(a<=0){var S=e.readVarint();i=S&7,a=S>>3}if(a--,i===1||i===2)c+=e.readSVarint(),m+=e.readSVarint(),i===1&&(u&&f.push(u),u=[]),u.push(new $L(c,m));else if(i===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+i)}return u&&f.push(u),f};Nh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,c=0,m=0,f=1/0,u=-1/0,S=1/0,C=-1/0;e.pos<t;){if(a<=0){var k=e.readVarint();i=k&7,a=k>>3}if(a--,i===1||i===2)c+=e.readSVarint(),m+=e.readSVarint(),c<f&&(f=c),c>u&&(u=c),m<S&&(S=m),m>C&&(C=m);else if(i!==7)throw new Error("unknown command "+i)}return[f,S,u,C]};Nh.prototype.toGeoJSON=function(e,t,i){var a=this.extent*Math.pow(2,i),c=this.extent*e,m=this.extent*t,f=this.loadGeometry(),u=Nh.types[this.type],S,C;function k(R){for(var B=0;B<R.length;B++){var O=R[B],he=180-(O.y+m)*360/a;R[B]=[(O.x+c)*360/a-180,360/Math.PI*Math.atan(Math.exp(he*Math.PI/180))-90]}}switch(this.type){case 1:var b=[];for(S=0;S<f.length;S++)b[S]=f[S][0];f=b,k(f);break;case 2:for(S=0;S<f.length;S++)k(f[S]);break;case 3:for(f=WL(f),S=0;S<f.length;S++)for(C=0;C<f[S].length;C++)k(f[S][C]);break}f.length===1?f=f[0]:u="Multi"+u;var I={type:"Feature",geometry:{type:u,coordinates:f},properties:this.properties};return"id"in this&&(I.id=this.id),I};function WL(e){var t=e.length;if(t<=1)return[e];for(var i=[],a,c,m=0;m<t;m++){var f=HL(e[m]);f!==0&&(c===void 0&&(c=f<0),c===f<0?(a&&i.push(a),a=[e[m]]):a.push(e[m]))}return a&&i.push(a),i}function HL(e){for(var t=0,i=0,a=e.length,c=a-1,m,f;i<a;c=i++)m=e[i],f=e[c],t+=(f.x-m.x)*(m.y+f.y);return t}var ZL=UP,$P=VP;function VP(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(qL,this,t),this.length=this._features.length}function qL(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(XL(i))}function XL(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=a===1?e.readString():a===2?e.readFloat():a===3?e.readDouble():a===4?e.readVarint64():a===5?e.readVarint():a===6?e.readSVarint():a===7?e.readBoolean():null}return t}VP.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new ZL(this._pbf,t,this.extent,this._keys,this._values)};var KL=$P,YL=JL;function JL(e,t){this.layers=e.readFields(QL,{},t)}function QL(e,t,i){if(e===3){var a=new KL(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}Iy.VectorTile=YL;Iy.VectorTileFeature=UP;Iy.VectorTileLayer=$P;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=$O,i=ij,a=oj,c=LL,m=NL,f=Iy;function u(q){return q&&typeof q=="object"&&"default"in q?q:{default:q}}var S=u(a),C=u(c),k=u(m),b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof $l<"u"?$l:typeof self<"u"?self:{};function I(q){var V={exports:{}};return q(V,V.exports),V.exports}var R=I(function(q,V){(function(X,G){q.exports=G(C.default)})(b,function(se){return function(X){var G={};function E(j){if(G[j])return G[j].exports;var L=G[j]={i:j,l:!1,exports:{}};return X[j].call(L.exports,L,L.exports,E),L.l=!0,L.exports}return E.m=X,E.c=G,E.d=function(j,L,ee){E.o(j,L)||Object.defineProperty(j,L,{enumerable:!0,get:ee})},E.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})},E.t=function(j,L){if(L&1&&(j=E(j)),L&8||L&4&&typeof j=="object"&&j&&j.__esModule)return j;var ee=Object.create(null);if(E.r(ee),Object.defineProperty(ee,"default",{enumerable:!0,value:j}),L&2&&typeof j!="string")for(var Z in j)E.d(ee,Z,(function(ve){return j[ve]}).bind(null,Z));return ee},E.n=function(j){var L=j&&j.__esModule?function(){return j.default}:function(){return j};return E.d(L,"a",L),L},E.o=function(j,L){return Object.prototype.hasOwnProperty.call(j,L)},E.p="",E(E.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(X,G,E){E.r(G),E.d(G,"CacheControl",function(){return Te}),E.d(G,"parse",function(){return Ne}),E.d(G,"format",function(){return Pe}),E("./node_modules/core-js/modules/es6.array.from.js"),E("./node_modules/core-js/modules/es6.function.name.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/web.dom.iterable.js"),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.regexp.split.js"),E("./node_modules/core-js/modules/es6.number.is-finite.js");function j(ze,qe){return _e(ze)||ve(ze,qe)||ee(ze,qe)||L()}function L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(ze,qe){if(ze){if(typeof ze=="string")return Z(ze,qe);var He=Object.prototype.toString.call(ze).slice(8,-1);if(He==="Object"&&ze.constructor&&(He=ze.constructor.name),He==="Map"||He==="Set")return Array.from(ze);if(He==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(He))return Z(ze,qe)}}function Z(ze,qe){(qe==null||qe>ze.length)&&(qe=ze.length);for(var He=0,ot=new Array(qe);He<qe;He++)ot[He]=ze[He];return ot}function ve(ze,qe){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ze)))){var He=[],ot=!0,ht=!1,xt=void 0;try{for(var kt=ze[Symbol.iterator](),pt;!(ot=(pt=kt.next()).done)&&(He.push(pt.value),!(qe&&He.length===qe));ot=!0);}catch(wt){ht=!0,xt=wt}finally{try{!ot&&kt.return!=null&&kt.return()}finally{if(ht)throw xt}}return He}}function _e(ze){if(Array.isArray(ze))return ze}function pe(ze,qe){if(!(ze instanceof qe))throw new TypeError("Cannot call a class as a function")}function oe(ze,qe){for(var He=0;He<qe.length;He++){var ot=qe[He];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(ze,ot.key,ot)}}function ce(ze,qe,He){return qe&&oe(ze.prototype,qe),He&&oe(ze,He),ze}var J=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,ne={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function de(ze){return ze===null}function we(ze){if(!ze)return null;var qe=parseInt(ze,10);return!Number.isFinite(qe)||qe<0?null:qe}var Te=function(){function ze(){pe(this,ze),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ce(ze,[{key:"parse",value:function(He){if(!He||He.length===0)return this;var ot={},ht=He.match(J)||[];return Array.prototype.forEach.call(ht,function(xt){var kt=xt.split("=",2),pt=j(kt,1),wt=pt[0],Ht=null;kt.length>1&&(Ht=kt[1].trim()),ot[wt.toLowerCase()]=Ht}),this.maxAge=we(ot[ne.maxAge]),this.sharedMaxAge=we(ot[ne.sharedMaxAge]),this.maxStale=de(ot[ne.maxStale]),this.maxStaleDuration=we(ot[ne.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=we(ot[ne.minFresh]),this.immutable=de(ot[ne.immutable]),this.mustRevalidate=de(ot[ne.mustRevalidate]),this.noCache=de(ot[ne.noCache]),this.noStore=de(ot[ne.noStore]),this.noTransform=de(ot[ne.noTransform]),this.onlyIfCached=de(ot[ne.onlyIfCached]),this.private=de(ot[ne.private]),this.proxyRevalidate=de(ot[ne.proxyRevalidate]),this.public=de(ot[ne.public]),this}},{key:"format",value:function(){var He=[];return this.maxAge&&He.push("".concat(ne.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&He.push("".concat(ne.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?He.push("".concat(ne.maxStale,"=").concat(this.maxStaleDuration)):He.push(ne.maxStale)),this.minFresh&&He.push("".concat(ne.minFresh,"=").concat(this.minFresh)),this.immutable&&He.push(ne.immutable),this.mustRevalidate&&He.push(ne.mustRevalidate),this.noCache&&He.push(ne.noCache),this.noStore&&He.push(ne.noStore),this.noTransform&&He.push(ne.noTransform),this.onlyIfCached&&He.push(ne.onlyIfCached),this.private&&He.push(ne.private),this.proxyRevalidate&&He.push(ne.proxyRevalidate),this.public&&He.push(ne.public),He.join(", ")}}]),ze}();function Ne(ze){var qe=new Te;return qe.parse(ze)}function Pe(ze){return ze instanceof Te?ze.format():Te.prototype.format.call(ze)}G.default={CacheControl:Te,parse:Ne,format:Pe}},"./node_modules/charenc/charenc.js":function(X,G){var E={utf8:{stringToBytes:function(j){return E.bin.stringToBytes(unescape(encodeURIComponent(j)))},bytesToString:function(j){return decodeURIComponent(escape(E.bin.bytesToString(j)))}},bin:{stringToBytes:function(j){for(var L=[],ee=0;ee<j.length;ee++)L.push(j.charCodeAt(ee)&255);return L},bytesToString:function(j){for(var L=[],ee=0;ee<j.length;ee++)L.push(String.fromCharCode(j[ee]));return L.join("")}}};X.exports=E},"./node_modules/core-js/modules/_a-function.js":function(X,G){X.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_wks.js")("unscopables"),L=Array.prototype;L[j]==null&&E("./node_modules/core-js/modules/_hide.js")(L,j,{}),X.exports=function(ee){L[j][ee]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_string-at.js")(!0);X.exports=function(L,ee,Z){return ee+(Z?j(L,ee).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(L){if(!j(L))throw TypeError(L+" is not an object!");return L}},"./node_modules/core-js/modules/_array-includes.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),L=E("./node_modules/core-js/modules/_to-length.js"),ee=E("./node_modules/core-js/modules/_to-absolute-index.js");X.exports=function(Z){return function(ve,_e,pe){var oe=j(ve),ce=L(oe.length),J=ee(pe,ce),ne;if(Z&&_e!=_e){for(;ce>J;)if(ne=oe[J++],ne!=ne)return!0}else for(;ce>J;J++)if((Z||J in oe)&&oe[J]===_e)return Z||J||0;return!Z&&-1}}},"./node_modules/core-js/modules/_bind.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_a-function.js"),L=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_invoke.js"),Z=[].slice,ve={},_e=function(pe,oe,ce){if(!(oe in ve)){for(var J=[],ne=0;ne<oe;ne++)J[ne]="a["+ne+"]";ve[oe]=Function("F,a","return new F("+J.join(",")+")")}return ve[oe](pe,ce)};X.exports=Function.bind||function(oe){var ce=j(this),J=Z.call(arguments,1),ne=function(){var de=J.concat(Z.call(arguments));return this instanceof ne?_e(ce,de.length,de):ee(ce,de,oe)};return L(ce.prototype)&&(ne.prototype=ce.prototype),ne}},"./node_modules/core-js/modules/_classof.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_cof.js"),L=E("./node_modules/core-js/modules/_wks.js")("toStringTag"),ee=j(function(){return arguments}())=="Arguments",Z=function(ve,_e){try{return ve[_e]}catch{}};X.exports=function(ve){var _e,pe,oe;return ve===void 0?"Undefined":ve===null?"Null":typeof(pe=Z(_e=Object(ve),L))=="string"?pe:ee?j(_e):(oe=j(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":oe}},"./node_modules/core-js/modules/_cof.js":function(X,G){var E={}.toString;X.exports=function(j){return E.call(j).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(X,G){var E=X.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},"./node_modules/core-js/modules/_create-property.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),L=E("./node_modules/core-js/modules/_property-desc.js");X.exports=function(ee,Z,ve){Z in ee?j.f(ee,Z,L(0,ve)):ee[Z]=ve}},"./node_modules/core-js/modules/_ctx.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_a-function.js");X.exports=function(L,ee,Z){if(j(L),ee===void 0)return L;switch(Z){case 1:return function(ve){return L.call(ee,ve)};case 2:return function(ve,_e){return L.call(ee,ve,_e)};case 3:return function(ve,_e,pe){return L.call(ee,ve,_e,pe)}}return function(){return L.apply(ee,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(X,G){X.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},"./node_modules/core-js/modules/_descriptors.js":function(X,G,E){X.exports=!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_is-object.js"),L=E("./node_modules/core-js/modules/_global.js").document,ee=j(L)&&j(L.createElement);X.exports=function(Z){return ee?L.createElement(Z):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(X,G){X.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-keys.js"),L=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_object-pie.js");X.exports=function(Z){var ve=j(Z),_e=L.f;if(_e)for(var pe=_e(Z),oe=ee.f,ce=0,J;pe.length>ce;)oe.call(Z,J=pe[ce++])&&ve.push(J);return ve}},"./node_modules/core-js/modules/_export.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_global.js"),L=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_hide.js"),Z=E("./node_modules/core-js/modules/_redefine.js"),ve=E("./node_modules/core-js/modules/_ctx.js"),_e="prototype",pe=function(oe,ce,J){var ne=oe&pe.F,de=oe&pe.G,we=oe&pe.S,Te=oe&pe.P,Ne=oe&pe.B,Pe=de?j:we?j[ce]||(j[ce]={}):(j[ce]||{})[_e],ze=de?L:L[ce]||(L[ce]={}),qe=ze[_e]||(ze[_e]={}),He,ot,ht,xt;de&&(J=ce);for(He in J)ot=!ne&&Pe&&Pe[He]!==void 0,ht=(ot?Pe:J)[He],xt=Ne&&ot?ve(ht,j):Te&&typeof ht=="function"?ve(Function.call,ht):ht,Pe&&Z(Pe,He,ht,oe&pe.U),ze[He]!=ht&&ee(ze,He,xt),Te&&qe[He]!=ht&&(qe[He]=ht)};j.core=L,pe.F=1,pe.G=2,pe.S=4,pe.P=8,pe.B=16,pe.W=32,pe.U=64,pe.R=128,X.exports=pe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(L){var ee=/./;try{"/./"[L](ee)}catch{try{return ee[j]=!1,!"/./"[L](ee)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(X,G){X.exports=function(E){try{return!!E()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(X,G,E){E("./node_modules/core-js/modules/es6.regexp.exec.js");var j=E("./node_modules/core-js/modules/_redefine.js"),L=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_fails.js"),Z=E("./node_modules/core-js/modules/_defined.js"),ve=E("./node_modules/core-js/modules/_wks.js"),_e=E("./node_modules/core-js/modules/_regexp-exec.js"),pe=ve("species"),oe=!ee(function(){var J=/./;return J.exec=function(){var ne=[];return ne.groups={a:"7"},ne},"".replace(J,"$<a>")!=="7"}),ce=function(){var J=/(?:)/,ne=J.exec;J.exec=function(){return ne.apply(this,arguments)};var de="ab".split(J);return de.length===2&&de[0]==="a"&&de[1]==="b"}();X.exports=function(J,ne,de){var we=ve(J),Te=!ee(function(){var ot={};return ot[we]=function(){return 7},""[J](ot)!=7}),Ne=Te?!ee(function(){var ot=!1,ht=/a/;return ht.exec=function(){return ot=!0,null},J==="split"&&(ht.constructor={},ht.constructor[pe]=function(){return ht}),ht[we](""),!ot}):void 0;if(!Te||!Ne||J==="replace"&&!oe||J==="split"&&!ce){var Pe=/./[we],ze=de(Z,we,""[J],function(ht,xt,kt,pt,wt){return xt.exec===_e?Te&&!wt?{done:!0,value:Pe.call(xt,kt,pt)}:{done:!0,value:ht.call(kt,xt,pt)}:{done:!1}}),qe=ze[0],He=ze[1];j(String.prototype,J,qe),L(RegExp.prototype,we,ne==2?function(ot,ht){return He.call(ot,this,ht)}:function(ot){return He.call(ot,this)})}}},"./node_modules/core-js/modules/_flags.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(){var L=j(this),ee="";return L.global&&(ee+="g"),L.ignoreCase&&(ee+="i"),L.multiline&&(ee+="m"),L.unicode&&(ee+="u"),L.sticky&&(ee+="y"),ee}},"./node_modules/core-js/modules/_function-to-string.js":function(X,G,E){X.exports=E("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(X,G){var E=X.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},"./node_modules/core-js/modules/_has.js":function(X,G){var E={}.hasOwnProperty;X.exports=function(j,L){return E.call(j,L)}},"./node_modules/core-js/modules/_hide.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),L=E("./node_modules/core-js/modules/_property-desc.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?function(ee,Z,ve){return j.f(ee,Z,L(1,ve))}:function(ee,Z,ve){return ee[Z]=ve,ee}},"./node_modules/core-js/modules/_html.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_global.js").document;X.exports=j&&j.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(X,G,E){X.exports=!E("./node_modules/core-js/modules/_descriptors.js")&&!E("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(E("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(X,G){X.exports=function(E,j,L){var ee=L===void 0;switch(j.length){case 0:return ee?E():E.call(L);case 1:return ee?E(j[0]):E.call(L,j[0]);case 2:return ee?E(j[0],j[1]):E.call(L,j[0],j[1]);case 3:return ee?E(j[0],j[1],j[2]):E.call(L,j[0],j[1],j[2]);case 4:return ee?E(j[0],j[1],j[2],j[3]):E.call(L,j[0],j[1],j[2],j[3])}return E.apply(L,j)}},"./node_modules/core-js/modules/_iobject.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_cof.js");X.exports=Object("z").propertyIsEnumerable(0)?Object:function(L){return j(L)=="String"?L.split(""):Object(L)}},"./node_modules/core-js/modules/_is-array-iter.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_iterators.js"),L=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=Array.prototype;X.exports=function(Z){return Z!==void 0&&(j.Array===Z||ee[L]===Z)}},"./node_modules/core-js/modules/_is-array.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_cof.js");X.exports=Array.isArray||function(ee){return j(ee)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(X,G){X.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_is-object.js"),L=E("./node_modules/core-js/modules/_cof.js"),ee=E("./node_modules/core-js/modules/_wks.js")("match");X.exports=function(Z){var ve;return j(Z)&&((ve=Z[ee])!==void 0?!!ve:L(Z)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_an-object.js");X.exports=function(L,ee,Z,ve){try{return ve?ee(j(Z)[0],Z[1]):ee(Z)}catch(pe){var _e=L.return;throw _e!==void 0&&j(_e.call(L)),pe}}},"./node_modules/core-js/modules/_iter-create.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-create.js"),L=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_set-to-string-tag.js"),Z={};E("./node_modules/core-js/modules/_hide.js")(Z,E("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),X.exports=function(ve,_e,pe){ve.prototype=j(Z,{next:L(1,pe)}),ee(ve,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_library.js"),L=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),Z=E("./node_modules/core-js/modules/_hide.js"),ve=E("./node_modules/core-js/modules/_iterators.js"),_e=E("./node_modules/core-js/modules/_iter-create.js"),pe=E("./node_modules/core-js/modules/_set-to-string-tag.js"),oe=E("./node_modules/core-js/modules/_object-gpo.js"),ce=E("./node_modules/core-js/modules/_wks.js")("iterator"),J=!([].keys&&"next"in[].keys()),ne="@@iterator",de="keys",we="values",Te=function(){return this};X.exports=function(Ne,Pe,ze,qe,He,ot,ht){_e(ze,Pe,qe);var xt=function(N){if(!J&&N in Ht)return Ht[N];switch(N){case de:return function(){return new ze(this,N)};case we:return function(){return new ze(this,N)}}return function(){return new ze(this,N)}},kt=Pe+" Iterator",pt=He==we,wt=!1,Ht=Ne.prototype,Lt=Ht[ce]||Ht[ne]||He&&Ht[He],cn=Lt||xt(He),it=He?pt?xt("entries"):cn:void 0,bn=Pe=="Array"&&Ht.entries||Lt,hn,qt,Se;if(bn&&(Se=oe(bn.call(new Ne)),Se!==Object.prototype&&Se.next&&(pe(Se,kt,!0),!j&&typeof Se[ce]!="function"&&Z(Se,ce,Te))),pt&&Lt&&Lt.name!==we&&(wt=!0,cn=function(){return Lt.call(this)}),(!j||ht)&&(J||wt||!Ht[ce])&&Z(Ht,ce,cn),ve[Pe]=cn,ve[kt]=Te,He)if(hn={values:pt?cn:xt(we),keys:ot?cn:xt(de),entries:it},ht)for(qt in hn)qt in Ht||ee(Ht,qt,hn[qt]);else L(L.P+L.F*(J||wt),Pe,hn);return hn}},"./node_modules/core-js/modules/_iter-detect.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_wks.js")("iterator"),L=!1;try{var ee=[7][j]();ee.return=function(){L=!0},Array.from(ee,function(){throw 2})}catch{}X.exports=function(Z,ve){if(!ve&&!L)return!1;var _e=!1;try{var pe=[7],oe=pe[j]();oe.next=function(){return{done:_e=!0}},pe[j]=function(){return oe},Z(pe)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(X,G){X.exports=function(E,j){return{value:j,done:!!E}}},"./node_modules/core-js/modules/_iterators.js":function(X,G){X.exports={}},"./node_modules/core-js/modules/_library.js":function(X,G){X.exports=!1},"./node_modules/core-js/modules/_meta.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_uid.js")("meta"),L=E("./node_modules/core-js/modules/_is-object.js"),ee=E("./node_modules/core-js/modules/_has.js"),Z=E("./node_modules/core-js/modules/_object-dp.js").f,ve=0,_e=Object.isExtensible||function(){return!0},pe=!E("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),oe=function(we){Z(we,j,{value:{i:"O"+ ++ve,w:{}}})},ce=function(we,Te){if(!L(we))return typeof we=="symbol"?we:(typeof we=="string"?"S":"P")+we;if(!ee(we,j)){if(!_e(we))return"F";if(!Te)return"E";oe(we)}return we[j].i},J=function(we,Te){if(!ee(we,j)){if(!_e(we))return!0;if(!Te)return!1;oe(we)}return we[j].w},ne=function(we){return pe&&de.NEED&&_e(we)&&!ee(we,j)&&oe(we),we},de=X.exports={KEY:j,NEED:!1,fastKey:ce,getWeak:J,onFreeze:ne}},"./node_modules/core-js/modules/_object-create.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_an-object.js"),L=E("./node_modules/core-js/modules/_object-dps.js"),ee=E("./node_modules/core-js/modules/_enum-bug-keys.js"),Z=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ve=function(){},_e="prototype",pe=function(){var oe=E("./node_modules/core-js/modules/_dom-create.js")("iframe"),ce=ee.length,J="<",ne=">",de;for(oe.style.display="none",E("./node_modules/core-js/modules/_html.js").appendChild(oe),oe.src="javascript:",de=oe.contentWindow.document,de.open(),de.write(J+"script"+ne+"document.F=Object"+J+"/script"+ne),de.close(),pe=de.F;ce--;)delete pe[_e][ee[ce]];return pe()};X.exports=Object.create||function(ce,J){var ne;return ce!==null?(ve[_e]=j(ce),ne=new ve,ve[_e]=null,ne[Z]=ce):ne=pe(),J===void 0?ne:L(ne,J)}},"./node_modules/core-js/modules/_object-dp.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_an-object.js"),L=E("./node_modules/core-js/modules/_ie8-dom-define.js"),ee=E("./node_modules/core-js/modules/_to-primitive.js"),Z=Object.defineProperty;G.f=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,pe,oe){if(j(_e),pe=ee(pe,!0),j(oe),L)try{return Z(_e,pe,oe)}catch{}if("get"in oe||"set"in oe)throw TypeError("Accessors not supported!");return"value"in oe&&(_e[pe]=oe.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-dp.js"),L=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_object-keys.js");X.exports=E("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ve,_e){L(ve);for(var pe=ee(_e),oe=pe.length,ce=0,J;oe>ce;)j.f(ve,J=pe[ce++],_e[J]);return ve}},"./node_modules/core-js/modules/_object-gopd.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-pie.js"),L=E("./node_modules/core-js/modules/_property-desc.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),Z=E("./node_modules/core-js/modules/_to-primitive.js"),ve=E("./node_modules/core-js/modules/_has.js"),_e=E("./node_modules/core-js/modules/_ie8-dom-define.js"),pe=Object.getOwnPropertyDescriptor;G.f=E("./node_modules/core-js/modules/_descriptors.js")?pe:function(ce,J){if(ce=ee(ce),J=Z(J,!0),_e)try{return pe(ce,J)}catch{}if(ve(ce,J))return L(!j.f.call(ce,J),ce[J])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_to-iobject.js"),L=E("./node_modules/core-js/modules/_object-gopn.js").f,ee={}.toString,Z=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ve=function(_e){try{return L(_e)}catch{return Z.slice()}};X.exports.f=function(pe){return Z&&ee.call(pe)=="[object Window]"?ve(pe):L(j(pe))}},"./node_modules/core-js/modules/_object-gopn.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),L=E("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");G.f=Object.getOwnPropertyNames||function(Z){return j(Z,L)}},"./node_modules/core-js/modules/_object-gops.js":function(X,G){G.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_has.js"),L=E("./node_modules/core-js/modules/_to-object.js"),ee=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),Z=Object.prototype;X.exports=Object.getPrototypeOf||function(ve){return ve=L(ve),j(ve,ee)?ve[ee]:typeof ve.constructor=="function"&&ve instanceof ve.constructor?ve.constructor.prototype:ve instanceof Object?Z:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_has.js"),L=E("./node_modules/core-js/modules/_to-iobject.js"),ee=E("./node_modules/core-js/modules/_array-includes.js")(!1),Z=E("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");X.exports=function(ve,_e){var pe=L(ve),oe=0,ce=[],J;for(J in pe)J!=Z&&j(pe,J)&&ce.push(J);for(;_e.length>oe;)j(pe,J=_e[oe++])&&(~ee(ce,J)||ce.push(J));return ce}},"./node_modules/core-js/modules/_object-keys.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-keys-internal.js"),L=E("./node_modules/core-js/modules/_enum-bug-keys.js");X.exports=Object.keys||function(Z){return j(Z,L)}},"./node_modules/core-js/modules/_object-pie.js":function(X,G){G.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-gopn.js"),L=E("./node_modules/core-js/modules/_object-gops.js"),ee=E("./node_modules/core-js/modules/_an-object.js"),Z=E("./node_modules/core-js/modules/_global.js").Reflect;X.exports=Z&&Z.ownKeys||function(_e){var pe=j.f(ee(_e)),oe=L.f;return oe?pe.concat(oe(_e)):pe}},"./node_modules/core-js/modules/_property-desc.js":function(X,G){X.exports=function(E,j){return{enumerable:!(E&1),configurable:!(E&2),writable:!(E&4),value:j}}},"./node_modules/core-js/modules/_redefine.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_global.js"),L=E("./node_modules/core-js/modules/_hide.js"),ee=E("./node_modules/core-js/modules/_has.js"),Z=E("./node_modules/core-js/modules/_uid.js")("src"),ve=E("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",pe=(""+ve).split(_e);E("./node_modules/core-js/modules/_core.js").inspectSource=function(oe){return ve.call(oe)},(X.exports=function(oe,ce,J,ne){var de=typeof J=="function";de&&(ee(J,"name")||L(J,"name",ce)),oe[ce]!==J&&(de&&(ee(J,Z)||L(J,Z,oe[ce]?""+oe[ce]:pe.join(String(ce)))),oe===j?oe[ce]=J:ne?oe[ce]?oe[ce]=J:L(oe,ce,J):(delete oe[ce],L(oe,ce,J)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[Z]||ve.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_classof.js"),L=RegExp.prototype.exec;X.exports=function(ee,Z){var ve=ee.exec;if(typeof ve=="function"){var _e=ve.call(ee,Z);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(j(ee)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return L.call(ee,Z)}},"./node_modules/core-js/modules/_regexp-exec.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_flags.js"),L=RegExp.prototype.exec,ee=String.prototype.replace,Z=L,ve="lastIndex",_e=function(){var ce=/a/,J=/b*/g;return L.call(ce,"a"),L.call(J,"a"),ce[ve]!==0||J[ve]!==0}(),pe=/()??/.exec("")[1]!==void 0,oe=_e||pe;oe&&(Z=function(J){var ne=this,de,we,Te,Ne;return pe&&(we=new RegExp("^"+ne.source+"$(?!\\s)",j.call(ne))),_e&&(de=ne[ve]),Te=L.call(ne,J),_e&&Te&&(ne[ve]=ne.global?Te.index+Te[0].length:de),pe&&Te&&Te.length>1&&ee.call(Te[0],we,function(){for(Ne=1;Ne<arguments.length-2;Ne++)arguments[Ne]===void 0&&(Te[Ne]=void 0)}),Te}),X.exports=Z},"./node_modules/core-js/modules/_set-to-string-tag.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,L=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_wks.js")("toStringTag");X.exports=function(Z,ve,_e){Z&&!L(Z=_e?Z:Z.prototype,ee)&&j(Z,ee,{configurable:!0,value:ve})}},"./node_modules/core-js/modules/_shared-key.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_shared.js")("keys"),L=E("./node_modules/core-js/modules/_uid.js");X.exports=function(ee){return j[ee]||(j[ee]=L(ee))}},"./node_modules/core-js/modules/_shared.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_core.js"),L=E("./node_modules/core-js/modules/_global.js"),ee="__core-js_shared__",Z=L[ee]||(L[ee]={});(X.exports=function(ve,_e){return Z[ve]||(Z[ve]=_e!==void 0?_e:{})})("versions",[]).push({version:j.version,mode:E("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_an-object.js"),L=E("./node_modules/core-js/modules/_a-function.js"),ee=E("./node_modules/core-js/modules/_wks.js")("species");X.exports=function(Z,ve){var _e=j(Z).constructor,pe;return _e===void 0||(pe=j(_e)[ee])==null?ve:L(pe)}},"./node_modules/core-js/modules/_string-at.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),L=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return function(Z,ve){var _e=String(L(Z)),pe=j(ve),oe=_e.length,ce,J;return pe<0||pe>=oe?ee?"":void 0:(ce=_e.charCodeAt(pe),ce<55296||ce>56319||pe+1===oe||(J=_e.charCodeAt(pe+1))<56320||J>57343?ee?_e.charAt(pe):ce:ee?_e.slice(pe,pe+2):(ce-55296<<10)+(J-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),L=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee,Z,ve){if(j(Z))throw TypeError("String#"+ve+" doesn't accept regex!");return String(L(ee))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),L=Math.max,ee=Math.min;X.exports=function(Z,ve){return Z=j(Z),Z<0?L(Z+ve,0):ee(Z,ve)}},"./node_modules/core-js/modules/_to-integer.js":function(X,G){var E=Math.ceil,j=Math.floor;X.exports=function(L){return isNaN(L=+L)?0:(L>0?j:E)(L)}},"./node_modules/core-js/modules/_to-iobject.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_iobject.js"),L=E("./node_modules/core-js/modules/_defined.js");X.exports=function(ee){return j(L(ee))}},"./node_modules/core-js/modules/_to-length.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_to-integer.js"),L=Math.min;X.exports=function(ee){return ee>0?L(j(ee),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_defined.js");X.exports=function(L){return Object(j(L))}},"./node_modules/core-js/modules/_to-primitive.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_is-object.js");X.exports=function(L,ee){if(!j(L))return L;var Z,ve;if(ee&&typeof(Z=L.toString)=="function"&&!j(ve=Z.call(L))||typeof(Z=L.valueOf)=="function"&&!j(ve=Z.call(L))||!ee&&typeof(Z=L.toString)=="function"&&!j(ve=Z.call(L)))return ve;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(X,G){var E=0,j=Math.random();X.exports=function(L){return"Symbol(".concat(L===void 0?"":L,")_",(++E+j).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_global.js"),L=E("./node_modules/core-js/modules/_core.js"),ee=E("./node_modules/core-js/modules/_library.js"),Z=E("./node_modules/core-js/modules/_wks-ext.js"),ve=E("./node_modules/core-js/modules/_object-dp.js").f;X.exports=function(_e){var pe=L.Symbol||(L.Symbol=ee?{}:j.Symbol||{});_e.charAt(0)!="_"&&!(_e in pe)&&ve(pe,_e,{value:Z.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(X,G,E){G.f=E("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_shared.js")("wks"),L=E("./node_modules/core-js/modules/_uid.js"),ee=E("./node_modules/core-js/modules/_global.js").Symbol,Z=typeof ee=="function",ve=X.exports=function(_e){return j[_e]||(j[_e]=Z&&ee[_e]||(Z?ee:L)("Symbol."+_e))};ve.store=j},"./node_modules/core-js/modules/core.get-iterator-method.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_classof.js"),L=E("./node_modules/core-js/modules/_wks.js")("iterator"),ee=E("./node_modules/core-js/modules/_iterators.js");X.exports=E("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(Z){if(Z!=null)return Z[L]||Z["@@iterator"]||ee[j(Z)]}},"./node_modules/core-js/modules/es6.array.from.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_ctx.js"),L=E("./node_modules/core-js/modules/_export.js"),ee=E("./node_modules/core-js/modules/_to-object.js"),Z=E("./node_modules/core-js/modules/_iter-call.js"),ve=E("./node_modules/core-js/modules/_is-array-iter.js"),_e=E("./node_modules/core-js/modules/_to-length.js"),pe=E("./node_modules/core-js/modules/_create-property.js"),oe=E("./node_modules/core-js/modules/core.get-iterator-method.js");L(L.S+L.F*!E("./node_modules/core-js/modules/_iter-detect.js")(function(ce){Array.from(ce)}),"Array",{from:function(J){var ne=ee(J),de=typeof this=="function"?this:Array,we=arguments.length,Te=we>1?arguments[1]:void 0,Ne=Te!==void 0,Pe=0,ze=oe(ne),qe,He,ot,ht;if(Ne&&(Te=j(Te,we>2?arguments[2]:void 0,2)),ze!=null&&!(de==Array&&ve(ze)))for(ht=ze.call(ne),He=new de;!(ot=ht.next()).done;Pe++)pe(He,Pe,Ne?Z(ht,Te,[ot.value,Pe],!0):ot.value);else for(qe=_e(ne.length),He=new de(qe);qe>Pe;Pe++)pe(He,Pe,Ne?Te(ne[Pe],Pe):ne[Pe]);return He.length=Pe,He}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_add-to-unscopables.js"),L=E("./node_modules/core-js/modules/_iter-step.js"),ee=E("./node_modules/core-js/modules/_iterators.js"),Z=E("./node_modules/core-js/modules/_to-iobject.js");X.exports=E("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ve,_e){this._t=Z(ve),this._i=0,this._k=_e},function(){var ve=this._t,_e=this._k,pe=this._i++;return!ve||pe>=ve.length?(this._t=void 0,L(1)):_e=="keys"?L(0,pe):_e=="values"?L(0,ve[pe]):L(0,[pe,ve[pe]])},"values"),ee.Arguments=ee.Array,j("keys"),j("values"),j("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_export.js");j(j.P,"Function",{bind:E("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_object-dp.js").f,L=Function.prototype,ee=/^\s*function ([^ (]*)/,Z="name";Z in L||E("./node_modules/core-js/modules/_descriptors.js")&&j(L,Z,{configurable:!0,get:function(){try{return(""+this).match(ee)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_export.js"),L=E("./node_modules/core-js/modules/_global.js").isFinite;j(j.S,"Number",{isFinite:function(Z){return typeof Z=="number"&&L(Z)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_classof.js"),L={};L[E("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",L+""!="[object z]"&&E("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+j(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_regexp-exec.js");E("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:j!==/./.exec},{exec:j})},"./node_modules/core-js/modules/es6.regexp.split.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_is-regexp.js"),L=E("./node_modules/core-js/modules/_an-object.js"),ee=E("./node_modules/core-js/modules/_species-constructor.js"),Z=E("./node_modules/core-js/modules/_advance-string-index.js"),ve=E("./node_modules/core-js/modules/_to-length.js"),_e=E("./node_modules/core-js/modules/_regexp-exec-abstract.js"),pe=E("./node_modules/core-js/modules/_regexp-exec.js"),oe=E("./node_modules/core-js/modules/_fails.js"),ce=Math.min,J=[].push,ne="split",de="length",we="lastIndex",Te=4294967295,Ne=!oe(function(){});E("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Pe,ze,qe,He){var ot;return"abbc"[ne](/(b)*/)[1]=="c"||"test"[ne](/(?:)/,-1)[de]!=4||"ab"[ne](/(?:ab)*/)[de]!=2||"."[ne](/(.?)(.?)/)[de]!=4||"."[ne](/()()/)[de]>1||""[ne](/.?/)[de]?ot=function(ht,xt){var kt=String(this);if(ht===void 0&&xt===0)return[];if(!j(ht))return qe.call(kt,ht,xt);for(var pt=[],wt=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(ht.sticky?"y":""),Ht=0,Lt=xt===void 0?Te:xt>>>0,cn=new RegExp(ht.source,wt+"g"),it,bn,hn;(it=pe.call(cn,kt))&&(bn=cn[we],!(bn>Ht&&(pt.push(kt.slice(Ht,it.index)),it[de]>1&&it.index<kt[de]&&J.apply(pt,it.slice(1)),hn=it[0][de],Ht=bn,pt[de]>=Lt)));)cn[we]===it.index&&cn[we]++;return Ht===kt[de]?(hn||!cn.test(""))&&pt.push(""):pt.push(kt.slice(Ht)),pt[de]>Lt?pt.slice(0,Lt):pt}:"0"[ne](void 0,0)[de]?ot=function(ht,xt){return ht===void 0&&xt===0?[]:qe.call(this,ht,xt)}:ot=qe,[function(xt,kt){var pt=Pe(this),wt=xt==null?void 0:xt[ze];return wt!==void 0?wt.call(xt,pt,kt):ot.call(String(pt),xt,kt)},function(ht,xt){var kt=He(ot,ht,this,xt,ot!==qe);if(kt.done)return kt.value;var pt=L(ht),wt=String(this),Ht=ee(pt,RegExp),Lt=pt.unicode,cn=(pt.ignoreCase?"i":"")+(pt.multiline?"m":"")+(pt.unicode?"u":"")+(Ne?"y":"g"),it=new Ht(Ne?pt:"^(?:"+pt.source+")",cn),bn=xt===void 0?Te:xt>>>0;if(bn===0)return[];if(wt.length===0)return _e(it,wt)===null?[wt]:[];for(var hn=0,qt=0,Se=[];qt<wt.length;){it.lastIndex=Ne?qt:0;var N=_e(it,Ne?wt:wt.slice(qt)),D;if(N===null||(D=ce(ve(it.lastIndex+(Ne?0:qt)),wt.length))===hn)qt=Z(wt,qt,Lt);else{if(Se.push(wt.slice(hn,qt)),Se.length===bn)return Se;for(var xe=1;xe<=N.length-1;xe++)if(Se.push(N[xe]),Se.length===bn)return Se;qt=hn=D}}return Se.push(wt.slice(hn)),Se}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_export.js"),L=E("./node_modules/core-js/modules/_string-context.js"),ee="includes";j(j.P+j.F*E("./node_modules/core-js/modules/_fails-is-regexp.js")(ee),"String",{includes:function(ve){return!!~L(this,ve,ee).indexOf(ve,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_global.js"),L=E("./node_modules/core-js/modules/_has.js"),ee=E("./node_modules/core-js/modules/_descriptors.js"),Z=E("./node_modules/core-js/modules/_export.js"),ve=E("./node_modules/core-js/modules/_redefine.js"),_e=E("./node_modules/core-js/modules/_meta.js").KEY,pe=E("./node_modules/core-js/modules/_fails.js"),oe=E("./node_modules/core-js/modules/_shared.js"),ce=E("./node_modules/core-js/modules/_set-to-string-tag.js"),J=E("./node_modules/core-js/modules/_uid.js"),ne=E("./node_modules/core-js/modules/_wks.js"),de=E("./node_modules/core-js/modules/_wks-ext.js"),we=E("./node_modules/core-js/modules/_wks-define.js"),Te=E("./node_modules/core-js/modules/_enum-keys.js"),Ne=E("./node_modules/core-js/modules/_is-array.js"),Pe=E("./node_modules/core-js/modules/_an-object.js"),ze=E("./node_modules/core-js/modules/_is-object.js"),qe=E("./node_modules/core-js/modules/_to-object.js"),He=E("./node_modules/core-js/modules/_to-iobject.js"),ot=E("./node_modules/core-js/modules/_to-primitive.js"),ht=E("./node_modules/core-js/modules/_property-desc.js"),xt=E("./node_modules/core-js/modules/_object-create.js"),kt=E("./node_modules/core-js/modules/_object-gopn-ext.js"),pt=E("./node_modules/core-js/modules/_object-gopd.js"),wt=E("./node_modules/core-js/modules/_object-gops.js"),Ht=E("./node_modules/core-js/modules/_object-dp.js"),Lt=E("./node_modules/core-js/modules/_object-keys.js"),cn=pt.f,it=Ht.f,bn=kt.f,hn=j.Symbol,qt=j.JSON,Se=qt&&qt.stringify,N="prototype",D=ne("_hidden"),xe=ne("toPrimitive"),Xe={}.propertyIsEnumerable,tt=oe("symbol-registry"),ct=oe("symbols"),ae=oe("op-symbols"),M=Object[N],U=typeof hn=="function"&&!!wt.f,Ee=j.QObject,We=!Ee||!Ee[N]||!Ee[N].findChild,rt=ee&&pe(function(){return xt(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a!=7})?function(De,Oe,$e){var je=cn(M,Oe);je&&delete M[Oe],it(De,Oe,$e),je&&De!==M&&it(M,Oe,je)}:it,Ve=function(De){var Oe=ct[De]=xt(hn[N]);return Oe._k=De,Oe},Et=U&&typeof hn.iterator=="symbol"?function(De){return typeof De=="symbol"}:function(De){return De instanceof hn},zt=function(Oe,$e,je){return Oe===M&&zt(ae,$e,je),Pe(Oe),$e=ot($e,!0),Pe(je),L(ct,$e)?(je.enumerable?(L(Oe,D)&&Oe[D][$e]&&(Oe[D][$e]=!1),je=xt(je,{enumerable:ht(0,!1)})):(L(Oe,D)||it(Oe,D,ht(1,{})),Oe[D][$e]=!0),rt(Oe,$e,je)):it(Oe,$e,je)},pn=function(Oe,$e){Pe(Oe);for(var je=Te($e=He($e)),Qe=0,dt=je.length,lt;dt>Qe;)zt(Oe,lt=je[Qe++],$e[lt]);return Oe},Sn=function(Oe,$e){return $e===void 0?xt(Oe):pn(xt(Oe),$e)},Ft=function(Oe){var $e=Xe.call(this,Oe=ot(Oe,!0));return this===M&&L(ct,Oe)&&!L(ae,Oe)?!1:$e||!L(this,Oe)||!L(ct,Oe)||L(this,D)&&this[D][Oe]?$e:!0},Dr=function(Oe,$e){if(Oe=He(Oe),$e=ot($e,!0),!(Oe===M&&L(ct,$e)&&!L(ae,$e))){var je=cn(Oe,$e);return je&&L(ct,$e)&&!(L(Oe,D)&&Oe[D][$e])&&(je.enumerable=!0),je}},ti=function(Oe){for(var $e=bn(He(Oe)),je=[],Qe=0,dt;$e.length>Qe;)!L(ct,dt=$e[Qe++])&&dt!=D&&dt!=_e&&je.push(dt);return je},ir=function(Oe){for(var $e=Oe===M,je=bn($e?ae:He(Oe)),Qe=[],dt=0,lt;je.length>dt;)L(ct,lt=je[dt++])&&(!$e||L(M,lt))&&Qe.push(ct[lt]);return Qe};U||(hn=function(){if(this instanceof hn)throw TypeError("Symbol is not a constructor!");var Oe=J(arguments.length>0?arguments[0]:void 0),$e=function(je){this===M&&$e.call(ae,je),L(this,D)&&L(this[D],Oe)&&(this[D][Oe]=!1),rt(this,Oe,ht(1,je))};return ee&&We&&rt(M,Oe,{configurable:!0,set:$e}),Ve(Oe)},ve(hn[N],"toString",function(){return this._k}),pt.f=Dr,Ht.f=zt,E("./node_modules/core-js/modules/_object-gopn.js").f=kt.f=ti,E("./node_modules/core-js/modules/_object-pie.js").f=Ft,wt.f=ir,ee&&!E("./node_modules/core-js/modules/_library.js")&&ve(M,"propertyIsEnumerable",Ft,!0),de.f=function(De){return Ve(ne(De))}),Z(Z.G+Z.W+Z.F*!U,{Symbol:hn});for(var ke="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;ke.length>ie;)ne(ke[ie++]);for(var le=Lt(ne.store),fe=0;le.length>fe;)we(le[fe++]);Z(Z.S+Z.F*!U,"Symbol",{for:function(De){return L(tt,De+="")?tt[De]:tt[De]=hn(De)},keyFor:function(Oe){if(!Et(Oe))throw TypeError(Oe+" is not a symbol!");for(var $e in tt)if(tt[$e]===Oe)return $e},useSetter:function(){We=!0},useSimple:function(){We=!1}}),Z(Z.S+Z.F*!U,"Object",{create:Sn,defineProperty:zt,defineProperties:pn,getOwnPropertyDescriptor:Dr,getOwnPropertyNames:ti,getOwnPropertySymbols:ir});var Fe=pe(function(){wt.f(1)});Z(Z.S+Z.F*Fe,"Object",{getOwnPropertySymbols:function(Oe){return wt.f(qe(Oe))}}),qt&&Z(Z.S+Z.F*(!U||pe(function(){var De=hn();return Se([De])!="[null]"||Se({a:De})!="{}"||Se(Object(De))!="{}"})),"JSON",{stringify:function(Oe){for(var $e=[Oe],je=1,Qe,dt;arguments.length>je;)$e.push(arguments[je++]);if(dt=Qe=$e[1],!(!ze(Qe)&&Oe===void 0||Et(Oe)))return Ne(Qe)||(Qe=function(lt,ut){if(typeof dt=="function"&&(ut=dt.call(this,lt,ut)),!Et(ut))return ut}),$e[1]=Qe,Se.apply(qt,$e)}}),hn[N][xe]||E("./node_modules/core-js/modules/_hide.js")(hn[N],xe,hn[N].valueOf),ce(hn,"Symbol"),ce(Math,"Math",!0),ce(j.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_export.js"),L=E("./node_modules/core-js/modules/_array-includes.js")(!0);j(j.P,"Array",{includes:function(Z){return L(this,Z,arguments.length>1?arguments[1]:void 0)}}),E("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(X,G,E){var j=E("./node_modules/core-js/modules/_export.js"),L=E("./node_modules/core-js/modules/_own-keys.js"),ee=E("./node_modules/core-js/modules/_to-iobject.js"),Z=E("./node_modules/core-js/modules/_object-gopd.js"),ve=E("./node_modules/core-js/modules/_create-property.js");j(j.S,"Object",{getOwnPropertyDescriptors:function(pe){for(var oe=ee(pe),ce=Z.f,J=L(oe),ne={},de=0,we,Te;J.length>de;)Te=ce(oe,we=J[de++]),Te!==void 0&&ve(ne,we,Te);return ne}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(X,G,E){E("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(X,G,E){for(var j=E("./node_modules/core-js/modules/es6.array.iterator.js"),L=E("./node_modules/core-js/modules/_object-keys.js"),ee=E("./node_modules/core-js/modules/_redefine.js"),Z=E("./node_modules/core-js/modules/_global.js"),ve=E("./node_modules/core-js/modules/_hide.js"),_e=E("./node_modules/core-js/modules/_iterators.js"),pe=E("./node_modules/core-js/modules/_wks.js"),oe=pe("iterator"),ce=pe("toStringTag"),J=_e.Array,ne={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},de=L(ne),we=0;we<de.length;we++){var Te=de[we],Ne=ne[Te],Pe=Z[Te],ze=Pe&&Pe.prototype,qe;if(ze&&(ze[oe]||ve(ze,oe,J),ze[ce]||ve(ze,ce,Te),_e[Te]=J,Ne))for(qe in j)ze[qe]||ee(ze,qe,j[qe],!0)}},"./node_modules/crypt/crypt.js":function(X,G){(function(){var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j={rotl:function(L,ee){return L<<ee|L>>>32-ee},rotr:function(L,ee){return L<<32-ee|L>>>ee},endian:function(L){if(L.constructor==Number)return j.rotl(L,8)&16711935|j.rotl(L,24)&4278255360;for(var ee=0;ee<L.length;ee++)L[ee]=j.endian(L[ee]);return L},randomBytes:function(L){for(var ee=[];L>0;L--)ee.push(Math.floor(Math.random()*256));return ee},bytesToWords:function(L){for(var ee=[],Z=0,ve=0;Z<L.length;Z++,ve+=8)ee[ve>>>5]|=L[Z]<<24-ve%32;return ee},wordsToBytes:function(L){for(var ee=[],Z=0;Z<L.length*32;Z+=8)ee.push(L[Z>>>5]>>>24-Z%32&255);return ee},bytesToHex:function(L){for(var ee=[],Z=0;Z<L.length;Z++)ee.push((L[Z]>>>4).toString(16)),ee.push((L[Z]&15).toString(16));return ee.join("")},hexToBytes:function(L){for(var ee=[],Z=0;Z<L.length;Z+=2)ee.push(parseInt(L.substr(Z,2),16));return ee},bytesToBase64:function(L){for(var ee=[],Z=0;Z<L.length;Z+=3)for(var ve=L[Z]<<16|L[Z+1]<<8|L[Z+2],_e=0;_e<4;_e++)Z*8+_e*6<=L.length*8?ee.push(E.charAt(ve>>>6*(3-_e)&63)):ee.push("=");return ee.join("")},base64ToBytes:function(L){L=L.replace(/[^A-Z0-9+\/]/ig,"");for(var ee=[],Z=0,ve=0;Z<L.length;ve=++Z%4)ve!=0&&ee.push((E.indexOf(L.charAt(Z-1))&Math.pow(2,-2*ve+8)-1)<<ve*2|E.indexOf(L.charAt(Z))>>>6-ve*2);return ee}};X.exports=j})()},"./node_modules/is-buffer/index.js":function(X,G){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */X.exports=function(L){return L!=null&&(E(L)||j(L)||!!L._isBuffer)};function E(L){return!!L.constructor&&typeof L.constructor.isBuffer=="function"&&L.constructor.isBuffer(L)}function j(L){return typeof L.readFloatLE=="function"&&typeof L.slice=="function"&&E(L.slice(0,0))}},"./node_modules/md5/md5.js":function(X,G,E){(function(){var j=E("./node_modules/crypt/crypt.js"),L=E("./node_modules/charenc/charenc.js").utf8,ee=E("./node_modules/is-buffer/index.js"),Z=E("./node_modules/charenc/charenc.js").bin,ve=function(_e,pe){_e.constructor==String?pe&&pe.encoding==="binary"?_e=Z.stringToBytes(_e):_e=L.stringToBytes(_e):ee(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var oe=j.bytesToWords(_e),ce=_e.length*8,J=1732584193,ne=-271733879,de=-1732584194,we=271733878,Te=0;Te<oe.length;Te++)oe[Te]=(oe[Te]<<8|oe[Te]>>>24)&16711935|(oe[Te]<<24|oe[Te]>>>8)&4278255360;oe[ce>>>5]|=128<<ce%32,oe[(ce+64>>>9<<4)+14]=ce;for(var Ne=ve._ff,Pe=ve._gg,ze=ve._hh,qe=ve._ii,Te=0;Te<oe.length;Te+=16){var He=J,ot=ne,ht=de,xt=we;J=Ne(J,ne,de,we,oe[Te+0],7,-680876936),we=Ne(we,J,ne,de,oe[Te+1],12,-389564586),de=Ne(de,we,J,ne,oe[Te+2],17,606105819),ne=Ne(ne,de,we,J,oe[Te+3],22,-1044525330),J=Ne(J,ne,de,we,oe[Te+4],7,-176418897),we=Ne(we,J,ne,de,oe[Te+5],12,1200080426),de=Ne(de,we,J,ne,oe[Te+6],17,-1473231341),ne=Ne(ne,de,we,J,oe[Te+7],22,-45705983),J=Ne(J,ne,de,we,oe[Te+8],7,1770035416),we=Ne(we,J,ne,de,oe[Te+9],12,-1958414417),de=Ne(de,we,J,ne,oe[Te+10],17,-42063),ne=Ne(ne,de,we,J,oe[Te+11],22,-1990404162),J=Ne(J,ne,de,we,oe[Te+12],7,1804603682),we=Ne(we,J,ne,de,oe[Te+13],12,-40341101),de=Ne(de,we,J,ne,oe[Te+14],17,-1502002290),ne=Ne(ne,de,we,J,oe[Te+15],22,1236535329),J=Pe(J,ne,de,we,oe[Te+1],5,-165796510),we=Pe(we,J,ne,de,oe[Te+6],9,-1069501632),de=Pe(de,we,J,ne,oe[Te+11],14,643717713),ne=Pe(ne,de,we,J,oe[Te+0],20,-373897302),J=Pe(J,ne,de,we,oe[Te+5],5,-701558691),we=Pe(we,J,ne,de,oe[Te+10],9,38016083),de=Pe(de,we,J,ne,oe[Te+15],14,-660478335),ne=Pe(ne,de,we,J,oe[Te+4],20,-405537848),J=Pe(J,ne,de,we,oe[Te+9],5,568446438),we=Pe(we,J,ne,de,oe[Te+14],9,-1019803690),de=Pe(de,we,J,ne,oe[Te+3],14,-187363961),ne=Pe(ne,de,we,J,oe[Te+8],20,1163531501),J=Pe(J,ne,de,we,oe[Te+13],5,-1444681467),we=Pe(we,J,ne,de,oe[Te+2],9,-51403784),de=Pe(de,we,J,ne,oe[Te+7],14,1735328473),ne=Pe(ne,de,we,J,oe[Te+12],20,-1926607734),J=ze(J,ne,de,we,oe[Te+5],4,-378558),we=ze(we,J,ne,de,oe[Te+8],11,-2022574463),de=ze(de,we,J,ne,oe[Te+11],16,1839030562),ne=ze(ne,de,we,J,oe[Te+14],23,-35309556),J=ze(J,ne,de,we,oe[Te+1],4,-1530992060),we=ze(we,J,ne,de,oe[Te+4],11,1272893353),de=ze(de,we,J,ne,oe[Te+7],16,-155497632),ne=ze(ne,de,we,J,oe[Te+10],23,-1094730640),J=ze(J,ne,de,we,oe[Te+13],4,681279174),we=ze(we,J,ne,de,oe[Te+0],11,-358537222),de=ze(de,we,J,ne,oe[Te+3],16,-722521979),ne=ze(ne,de,we,J,oe[Te+6],23,76029189),J=ze(J,ne,de,we,oe[Te+9],4,-640364487),we=ze(we,J,ne,de,oe[Te+12],11,-421815835),de=ze(de,we,J,ne,oe[Te+15],16,530742520),ne=ze(ne,de,we,J,oe[Te+2],23,-995338651),J=qe(J,ne,de,we,oe[Te+0],6,-198630844),we=qe(we,J,ne,de,oe[Te+7],10,1126891415),de=qe(de,we,J,ne,oe[Te+14],15,-1416354905),ne=qe(ne,de,we,J,oe[Te+5],21,-57434055),J=qe(J,ne,de,we,oe[Te+12],6,1700485571),we=qe(we,J,ne,de,oe[Te+3],10,-1894986606),de=qe(de,we,J,ne,oe[Te+10],15,-1051523),ne=qe(ne,de,we,J,oe[Te+1],21,-2054922799),J=qe(J,ne,de,we,oe[Te+8],6,1873313359),we=qe(we,J,ne,de,oe[Te+15],10,-30611744),de=qe(de,we,J,ne,oe[Te+6],15,-1560198380),ne=qe(ne,de,we,J,oe[Te+13],21,1309151649),J=qe(J,ne,de,we,oe[Te+4],6,-145523070),we=qe(we,J,ne,de,oe[Te+11],10,-1120210379),de=qe(de,we,J,ne,oe[Te+2],15,718787259),ne=qe(ne,de,we,J,oe[Te+9],21,-343485551),J=J+He>>>0,ne=ne+ot>>>0,de=de+ht>>>0,we=we+xt>>>0}return j.endian([J,ne,de,we])};ve._ff=function(_e,pe,oe,ce,J,ne,de){var we=_e+(pe&oe|~pe&ce)+(J>>>0)+de;return(we<<ne|we>>>32-ne)+pe},ve._gg=function(_e,pe,oe,ce,J,ne,de){var we=_e+(pe&ce|oe&~ce)+(J>>>0)+de;return(we<<ne|we>>>32-ne)+pe},ve._hh=function(_e,pe,oe,ce,J,ne,de){var we=_e+(pe^oe^ce)+(J>>>0)+de;return(we<<ne|we>>>32-ne)+pe},ve._ii=function(_e,pe,oe,ce,J,ne,de){var we=_e+(oe^(pe|~ce))+(J>>>0)+de;return(we<<ne|we>>>32-ne)+pe},ve._blocksize=16,ve._digestsize=16,X.exports=function(_e,pe){if(_e==null)throw new Error("Illegal argument "+_e);var oe=j.wordsToBytes(ve(_e,pe));return pe&&pe.asBytes?oe:pe&&pe.asString?Z.bytesToString(oe):j.bytesToHex(oe)}})()},"./node_modules/regenerator-runtime/runtime.js":function(X,G,E){var j=function(L){var ee=Object.prototype,Z=ee.hasOwnProperty,ve,_e=typeof Symbol=="function"?Symbol:{},pe=_e.iterator||"@@iterator",oe=_e.asyncIterator||"@@asyncIterator",ce=_e.toStringTag||"@@toStringTag";function J(N,D,xe){return Object.defineProperty(N,D,{value:xe,enumerable:!0,configurable:!0,writable:!0}),N[D]}try{J({},"")}catch{J=function(D,xe,Xe){return D[xe]=Xe}}function ne(N,D,xe,Xe){var tt=D&&D.prototype instanceof qe?D:qe,ct=Object.create(tt.prototype),ae=new hn(Xe||[]);return ct._invoke=Lt(N,xe,ae),ct}L.wrap=ne;function de(N,D,xe){try{return{type:"normal",arg:N.call(D,xe)}}catch(Xe){return{type:"throw",arg:Xe}}}var we="suspendedStart",Te="suspendedYield",Ne="executing",Pe="completed",ze={};function qe(){}function He(){}function ot(){}var ht={};ht[pe]=function(){return this};var xt=Object.getPrototypeOf,kt=xt&&xt(xt(qt([])));kt&&kt!==ee&&Z.call(kt,pe)&&(ht=kt);var pt=ot.prototype=qe.prototype=Object.create(ht);He.prototype=pt.constructor=ot,ot.constructor=He,He.displayName=J(ot,ce,"GeneratorFunction");function wt(N){["next","throw","return"].forEach(function(D){J(N,D,function(xe){return this._invoke(D,xe)})})}L.isGeneratorFunction=function(N){var D=typeof N=="function"&&N.constructor;return D?D===He||(D.displayName||D.name)==="GeneratorFunction":!1},L.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,ot):(N.__proto__=ot,J(N,ce,"GeneratorFunction")),N.prototype=Object.create(pt),N},L.awrap=function(N){return{__await:N}};function Ht(N,D){function xe(ct,ae,M,U){var Ee=de(N[ct],N,ae);if(Ee.type==="throw")U(Ee.arg);else{var We=Ee.arg,rt=We.value;return rt&&typeof rt=="object"&&Z.call(rt,"__await")?D.resolve(rt.__await).then(function(Ve){xe("next",Ve,M,U)},function(Ve){xe("throw",Ve,M,U)}):D.resolve(rt).then(function(Ve){We.value=Ve,M(We)},function(Ve){return xe("throw",Ve,M,U)})}}var Xe;function tt(ct,ae){function M(){return new D(function(U,Ee){xe(ct,ae,U,Ee)})}return Xe=Xe?Xe.then(M,M):M()}this._invoke=tt}wt(Ht.prototype),Ht.prototype[oe]=function(){return this},L.AsyncIterator=Ht,L.async=function(N,D,xe,Xe,tt){tt===void 0&&(tt=Promise);var ct=new Ht(ne(N,D,xe,Xe),tt);return L.isGeneratorFunction(D)?ct:ct.next().then(function(ae){return ae.done?ae.value:ct.next()})};function Lt(N,D,xe){var Xe=we;return function(ct,ae){if(Xe===Ne)throw new Error("Generator is already running");if(Xe===Pe){if(ct==="throw")throw ae;return Se()}for(xe.method=ct,xe.arg=ae;;){var M=xe.delegate;if(M){var U=cn(M,xe);if(U){if(U===ze)continue;return U}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(Xe===we)throw Xe=Pe,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);Xe=Ne;var Ee=de(N,D,xe);if(Ee.type==="normal"){if(Xe=xe.done?Pe:Te,Ee.arg===ze)continue;return{value:Ee.arg,done:xe.done}}else Ee.type==="throw"&&(Xe=Pe,xe.method="throw",xe.arg=Ee.arg)}}}function cn(N,D){var xe=N.iterator[D.method];if(xe===ve){if(D.delegate=null,D.method==="throw"){if(N.iterator.return&&(D.method="return",D.arg=ve,cn(N,D),D.method==="throw"))return ze;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return ze}var Xe=de(xe,N.iterator,D.arg);if(Xe.type==="throw")return D.method="throw",D.arg=Xe.arg,D.delegate=null,ze;var tt=Xe.arg;if(!tt)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,ze;if(tt.done)D[N.resultName]=tt.value,D.next=N.nextLoc,D.method!=="return"&&(D.method="next",D.arg=ve);else return tt;return D.delegate=null,ze}wt(pt),J(pt,ce,"Generator"),pt[pe]=function(){return this},pt.toString=function(){return"[object Generator]"};function it(N){var D={tryLoc:N[0]};1 in N&&(D.catchLoc=N[1]),2 in N&&(D.finallyLoc=N[2],D.afterLoc=N[3]),this.tryEntries.push(D)}function bn(N){var D=N.completion||{};D.type="normal",delete D.arg,N.completion=D}function hn(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(it,this),this.reset(!0)}L.keys=function(N){var D=[];for(var xe in N)D.push(xe);return D.reverse(),function Xe(){for(;D.length;){var tt=D.pop();if(tt in N)return Xe.value=tt,Xe.done=!1,Xe}return Xe.done=!0,Xe}};function qt(N){if(N){var D=N[pe];if(D)return D.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var xe=-1,Xe=function tt(){for(;++xe<N.length;)if(Z.call(N,xe))return tt.value=N[xe],tt.done=!1,tt;return tt.value=ve,tt.done=!0,tt};return Xe.next=Xe}}return{next:Se}}L.values=qt;function Se(){return{value:ve,done:!0}}return hn.prototype={constructor:hn,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=ve,this.done=!1,this.delegate=null,this.method="next",this.arg=ve,this.tryEntries.forEach(bn),!N)for(var D in this)D.charAt(0)==="t"&&Z.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=ve)},stop:function(){this.done=!0;var N=this.tryEntries[0],D=N.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var D=this;function xe(U,Ee){return ct.type="throw",ct.arg=N,D.next=U,Ee&&(D.method="next",D.arg=ve),!!Ee}for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var tt=this.tryEntries[Xe],ct=tt.completion;if(tt.tryLoc==="root")return xe("end");if(tt.tryLoc<=this.prev){var ae=Z.call(tt,"catchLoc"),M=Z.call(tt,"finallyLoc");if(ae&&M){if(this.prev<tt.catchLoc)return xe(tt.catchLoc,!0);if(this.prev<tt.finallyLoc)return xe(tt.finallyLoc)}else if(ae){if(this.prev<tt.catchLoc)return xe(tt.catchLoc,!0)}else if(M){if(this.prev<tt.finallyLoc)return xe(tt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(N,D){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var Xe=this.tryEntries[xe];if(Xe.tryLoc<=this.prev&&Z.call(Xe,"finallyLoc")&&this.prev<Xe.finallyLoc){var tt=Xe;break}}tt&&(N==="break"||N==="continue")&&tt.tryLoc<=D&&D<=tt.finallyLoc&&(tt=null);var ct=tt?tt.completion:{};return ct.type=N,ct.arg=D,tt?(this.method="next",this.next=tt.finallyLoc,ze):this.complete(ct)},complete:function(N,D){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&D&&(this.next=D),ze},finish:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.finallyLoc===N)return this.complete(xe.completion,xe.afterLoc),bn(xe),ze}},catch:function(N){for(var D=this.tryEntries.length-1;D>=0;--D){var xe=this.tryEntries[D];if(xe.tryLoc===N){var Xe=xe.completion;if(Xe.type==="throw"){var tt=Xe.arg;bn(xe)}return tt}}throw new Error("illegal catch attempt")},delegateYield:function(N,D,xe){return this.delegate={iterator:qt(N),resultName:D,nextLoc:xe},this.method==="next"&&(this.arg=ve),ze}},L}(X.exports);try{regeneratorRuntime=j}catch{Function("r","regeneratorRuntime = r")(j)}},"./src/api.js":function(X,G,E){E.r(G),E.d(G,"setup",function(){return Ne}),E.d(G,"setupCache",function(){return Te}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("axios"),L=E.n(j),ee=E("./src/request.js"),Z=E("./src/cache.js");E.d(G,"serializeQuery",function(){return Z.serializeQuery});var ve=E("./src/config.js"),_e=E("./src/utilities.js");function pe(Pe,ze){if(Pe==null)return{};var qe=oe(Pe,ze),He,ot;if(Object.getOwnPropertySymbols){var ht=Object.getOwnPropertySymbols(Pe);for(ot=0;ot<ht.length;ot++)He=ht[ot],!(ze.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,He)&&(qe[He]=Pe[He])}return qe}function oe(Pe,ze){if(Pe==null)return{};var qe={},He=Object.keys(Pe),ot,ht;for(ht=0;ht<He.length;ht++)ot=He[ht],!(ze.indexOf(ot)>=0)&&(qe[ot]=Pe[ot]);return qe}function ce(Pe,ze){var qe=Object.keys(Pe);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Pe);ze&&(He=He.filter(function(ot){return Object.getOwnPropertyDescriptor(Pe,ot).enumerable})),qe.push.apply(qe,He)}return qe}function J(Pe){for(var ze=1;ze<arguments.length;ze++){var qe=arguments[ze]!=null?arguments[ze]:{};ze%2?ce(Object(qe),!0).forEach(function(He){ne(Pe,He,qe[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(qe)):ce(Object(qe)).forEach(function(He){Object.defineProperty(Pe,He,Object.getOwnPropertyDescriptor(qe,He))})}return Pe}function ne(Pe,ze,qe){return ze in Pe?Object.defineProperty(Pe,ze,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Pe[ze]=qe,Pe}function de(Pe,ze,qe,He,ot,ht,xt){try{var kt=Pe[ht](xt),pt=kt.value}catch(wt){qe(wt);return}kt.done?ze(pt):Promise.resolve(pt).then(He,ot)}function we(Pe){return function(){var ze=this,qe=arguments;return new Promise(function(He,ot){var ht=Pe.apply(ze,qe);function xt(pt){de(ht,He,ot,xt,kt,"next",pt)}function kt(pt){de(ht,He,ot,xt,kt,"throw",pt)}xt(void 0)})}}function Te(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pe=Object(ve.makeConfig)(Pe);function ze(He){return qe.apply(this,arguments)}function qe(){return qe=we(regeneratorRuntime.mark(function He(ot){var ht,xt,kt,pt,wt;return regeneratorRuntime.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:return ht=Object(ve.mergeRequestConfig)(Pe,ot),Lt.next=3,Object(ee.default)(ht,ot);case 3:if(xt=Lt.sent,kt=xt.next,Object(_e.isFunction)(kt)){Lt.next=7;break}return Lt.abrupt("return",kt);case 7:return Lt.prev=7,Lt.next=10,ht.adapter(ot);case 10:xt=Lt.sent,Lt.next=16;break;case 13:Lt.prev=13,Lt.t0=Lt.catch(7),pt=Lt.t0;case 16:if(!pt){Lt.next=31;break}if(wt=Object(_e.isFunction)(ht.readOnError)?ht.readOnError(pt,ot):ht.readOnError,!wt){Lt.next=30;break}return Lt.prev=19,ht.acceptStale=!0,Lt.next=23,Object(ee.default)(ht,ot);case 23:return xt=Lt.sent,xt.next.request.stale=!0,Lt.abrupt("return",xt.next);case 28:Lt.prev=28,Lt.t1=Lt.catch(19);case 30:throw pt;case 31:return Lt.abrupt("return",kt(xt));case 32:case"end":return Lt.stop()}},He,null,[[7,13],[19,28]])})),qe.apply(this,arguments)}return{adapter:ze,config:Pe,store:Pe.store}}function Ne(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=J(J(J({},ve.defaults.axios),Pe),{},{cache:J(J({},ve.defaults.axios.cache),Pe.cache)}),qe=Te(ze.cache);ze.cache;var He=pe(ze,["cache"]),ot=L.a.create(J(J({},He),{},{adapter:qe.adapter}));return ot.cache=qe.store,ot}G.default={setup:Ne,setupCache:Te,serializeQuery:Z.serializeQuery}},"./src/cache.js":function(X,G,E){E.r(G),E.d(G,"read",function(){return ce}),E.d(G,"write",function(){return pe}),E.d(G,"key",function(){return ne}),E.d(G,"invalidate",function(){return Te}),E.d(G,"serializeQuery",function(){return Ne}),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/utilities.js"),L=E("./node_modules/md5/md5.js"),ee=E.n(L),Z=E("./src/serialize.js");function ve(Pe,ze,qe,He,ot,ht,xt){try{var kt=Pe[ht](xt),pt=kt.value}catch(wt){qe(wt);return}kt.done?ze(pt):Promise.resolve(pt).then(He,ot)}function _e(Pe){return function(){var ze=this,qe=arguments;return new Promise(function(He,ot){var ht=Pe.apply(ze,qe);function xt(pt){ve(ht,He,ot,xt,kt,"next",pt)}function kt(pt){ve(ht,He,ot,xt,kt,"throw",pt)}xt(void 0)})}}function pe(Pe,ze,qe){return oe.apply(this,arguments)}function oe(){return oe=_e(regeneratorRuntime.mark(function Pe(ze,qe,He){var ot;return regeneratorRuntime.wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return xt.prev=0,ot={expires:ze.expires,data:Object(Z.default)(ze,qe,He)},xt.next=4,ze.store.setItem(ze.uuid,ot);case 4:xt.next=19;break;case 6:if(xt.prev=6,xt.t0=xt.catch(0),ze.debug("Could not store response",xt.t0),!ze.clearOnError){xt.next=18;break}return xt.prev=10,xt.next=13,ze.store.clear();case 13:xt.next=18;break;case 15:xt.prev=15,xt.t1=xt.catch(10),ze.debug("Could not clear store",xt.t1);case 18:return xt.abrupt("return",!1);case 19:return xt.abrupt("return",!0);case 20:case"end":return xt.stop()}},Pe,null,[[0,6],[10,15]])})),oe.apply(this,arguments)}function ce(Pe,ze){return J.apply(this,arguments)}function J(){return J=_e(regeneratorRuntime.mark(function Pe(ze,qe){var He,ot,ht,xt,kt,pt,wt,Ht;return regeneratorRuntime.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return He=ze.uuid,ot=ze.ignoreCache,cn.next=3,ze.store.getItem(He);case 3:if(ht=cn.sent,!(ot||!ht||!ht.data)){cn.next=10;break}throw ze.debug("cache-miss",qe.url),xt=new Error,xt.reason="cache-miss",xt.message="Entry not found from cache",xt;case 10:if(kt=ht.expires,pt=ht.data,wt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!wt&&!ze.acceptStale&&kt!==0&&kt<Date.now())){cn.next=18;break}throw ze.debug("cache-stale",qe.url),Ht=new Error,Ht.reason="cache-stale",Ht.message="Entry is stale",Ht;case 18:return ze.debug(ze.acceptStale?"cache-hit-stale":"cache-hit",qe.url),cn.abrupt("return",pt);case 20:case"end":return cn.stop()}},Pe)})),J.apply(this,arguments)}function ne(Pe){if(Object(j.isFunction)(Pe.key))return Pe.key;var ze;return Object(j.isString)(Pe.key)?ze=function(He){var ot="".concat(He.baseURL?He.baseURL:"").concat(He.url),ht="".concat(Pe.key,"/").concat(ot).concat(Ne(He));return He.data?ht+ee()(He.data):ht}:ze=function(He){var ot="".concat(He.baseURL?He.baseURL:"").concat(He.url),ht=ot+Ne(He);return He.data?ht+ee()(He.data):ht},ze}function de(Pe,ze){return we.apply(this,arguments)}function we(){return we=_e(regeneratorRuntime.mark(function Pe(ze,qe){var He;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(He=qe.method.toLowerCase(),!ze.exclude.methods.includes(He)){ht.next=4;break}return ht.next=4,ze.store.removeItem(ze.uuid);case 4:case"end":return ht.stop()}},Pe)})),we.apply(this,arguments)}function Te(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(j.isFunction)(Pe.invalidate)?Pe.invalidate:de}function Ne(Pe){if(!Pe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Pe.params);var ze=Pe.params,qe=Pe.params instanceof URLSearchParams;return qe||(ze=new URLSearchParams,Object.keys(Pe.params).forEach(function(He){return ze.append(He,Pe.params[He])})),"?".concat(ze.toString())}G.default={read:ce,write:pe,key:ne,invalidate:Te,serializeQuery:Ne}},"./src/config.js":function(X,G,E){E.r(G),E.d(G,"defaults",function(){return J}),E.d(G,"makeConfig",function(){return de}),E.d(G,"mergeRequestConfig",function(){return we}),E("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("axios"),L=E.n(j),ee=E("./src/memory.js"),Z=E("./src/cache.js");function ve(Te,Ne){var Pe=Object.keys(Te);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(Te);Ne&&(ze=ze.filter(function(qe){return Object.getOwnPropertyDescriptor(Te,qe).enumerable})),Pe.push.apply(Pe,ze)}return Pe}function _e(Te){for(var Ne=1;Ne<arguments.length;Ne++){var Pe=arguments[Ne]!=null?arguments[Ne]:{};Ne%2?ve(Object(Pe),!0).forEach(function(ze){pe(Te,ze,Pe[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors(Pe)):ve(Object(Pe)).forEach(function(ze){Object.defineProperty(Te,ze,Object.getOwnPropertyDescriptor(Pe,ze))})}return Te}function pe(Te,Ne,Pe){return Ne in Te?Object.defineProperty(Te,Ne,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):Te[Ne]=Pe,Te}var oe=function(){},ce=function(){for(var Ne,Pe=arguments.length,ze=new Array(Pe),qe=0;qe<Pe;qe++)ze[qe]=arguments[qe];return(Ne=console).log.apply(Ne,["[axios-cache-adapter]"].concat(ze))},J={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:L.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},ne=["limit","store","adapter","uuid","acceptStale"],de=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=_e(_e(_e({},J.cache),Ne),{},{exclude:_e(_e({},J.cache.exclude),Ne.exclude)});return Pe.key=Object(Z.key)(Pe),Pe.invalidate=Object(Z.invalidate)(Pe),Pe.debug!==!1?Pe.debug=typeof Pe.debug=="function"?Pe.debug:ce:Pe.debug=oe,Pe.store||(Pe.store=new ee.default),Pe.debug("Global cache config",Pe),Pe},we=function(Ne,Pe){var ze=Pe.cache||{};ze&&ne.forEach(function(He){return ze[He]?delete ze[He]:void 0});var qe=_e(_e(_e({},Ne),ze),{},{exclude:_e(_e({},Ne.exclude),ze.exclude)});return qe.debug===!0&&(qe.debug=ce),ze.key&&(qe.key=Object(Z.key)(ze)),qe.uuid=qe.key(Pe),Ne.debug("Request config for ".concat(Pe.url),qe),qe};G.default={defaults:J,makeConfig:de,mergeRequestConfig:we}},"./src/exclude.js":function(X,G,E){E.r(G),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/core-js/modules/es7.array.includes.js"),E("./node_modules/core-js/modules/es6.string.includes.js");var j=E("./src/utilities.js");function L(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Z=arguments.length>1?arguments[1]:void 0,ve=ee.exclude,_e=ve===void 0?{}:ve,pe=ee.debug,oe=Z.method.toLowerCase();if(oe==="head"||_e.methods.includes(oe))return pe("Excluding request by HTTP method ".concat(Z.url)),!0;if(typeof _e.filter=="function"&&_e.filter(Z))return pe("Excluding request by filter ".concat(Z.url)),!0;var ce=/\?.*$/.test(Z.url)||Object(j.isObject)(Z.params)&&Object.keys(Z.params).length!==0||typeof URLSearchParams<"u"&&Z.params instanceof URLSearchParams;if(_e.query&&ce)return pe("Excluding request by query ".concat(Z.url)),!0;var J=_e.paths||[],ne=J.some(function(de){return Z.url.match(de)});return ne?(pe("Excluding request by url match ".concat(Z.url)),!0):!1}G.default=L},"./src/index.node.js":function(X,G,E){E.r(G);var j=E("./src/api.js");E.d(G,"setup",function(){return j.setup}),E.d(G,"setupCache",function(){return j.setupCache}),E.d(G,"serializeQuery",function(){return j.serializeQuery});var L=E("./src/redis.js");E.d(G,"RedisStore",function(){return L.default});var ee=E("./src/redis-default.js");E.d(G,"RedisDefaultStore",function(){return ee.default}),G.default={setup:j.setup,setupCache:j.setupCache,serializeQuery:j.serializeQuery,RedisStore:L.default,RedisDefaultStore:ee.default}},"./src/limit.js":function(X,G,E){E.r(G),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(ve,_e,pe,oe,ce,J,ne){try{var de=ve[J](ne),we=de.value}catch(Te){pe(Te);return}de.done?_e(we):Promise.resolve(we).then(oe,ce)}function L(ve){return function(){var _e=this,pe=arguments;return new Promise(function(oe,ce){var J=ve.apply(_e,pe);function ne(we){j(J,oe,ce,ne,de,"next",we)}function de(we){j(J,oe,ce,ne,de,"throw",we)}ne(void 0)})}}function ee(ve){return Z.apply(this,arguments)}function Z(){return Z=L(regeneratorRuntime.mark(function ve(_e){var pe,oe;return regeneratorRuntime.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,_e.store.length();case 2:if(pe=J.sent,!(pe<_e.limit)){J.next=5;break}return J.abrupt("return");case 5:return _e.debug("Current store size: ".concat(pe)),J.next=8,_e.store.iterate(function(ne,de){oe||(oe={value:ne,key:de}),ne.expires<oe.value.expires&&(oe={value:ne,key:de})});case 8:if(!oe){J.next=12;break}return _e.debug("Removing item: ".concat(oe.key)),J.next=12,_e.store.removeItem(oe.key);case 12:case"end":return J.stop()}},ve)})),Z.apply(this,arguments)}G.default=ee},"./src/memory.js":function(X,G,E){E.r(G),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js");var j=E("./src/utilities.js");function L(oe,ce,J,ne,de,we,Te){try{var Ne=oe[we](Te),Pe=Ne.value}catch(ze){J(ze);return}Ne.done?ce(Pe):Promise.resolve(Pe).then(ne,de)}function ee(oe){return function(){var ce=this,J=arguments;return new Promise(function(ne,de){var we=oe.apply(ce,J);function Te(Pe){L(we,ne,de,Te,Ne,"next",Pe)}function Ne(Pe){L(we,ne,de,Te,Ne,"throw",Pe)}Te(void 0)})}}function Z(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var J=0;J<ce.length;J++){var ne=ce[J];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function _e(oe,ce,J){return ce&&ve(oe.prototype,ce),J&&ve(oe,J),oe}var pe=function(){function oe(){Z(this,oe),this.store={}}return _e(oe,[{key:"getItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=this.store[de]||null,Ne.abrupt("return",JSON.parse(we));case 2:case"end":return Ne.stop()}},ne,this)}));function J(ne){return ce.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de,we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return this.store[de]=JSON.stringify(we),Ne.abrupt("return",we);case 2:case"end":return Ne.stop()}},ne,this)}));function J(ne,de){return ce.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:delete this.store[de];case 1:case"end":return Te.stop()}},ne,this)}));function J(ne){return ce.apply(this,arguments)}return J}()},{key:"clear",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:this.store={};case 1:case"end":return we.stop()}},ne,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"length",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",Object.keys(this.store).length);case 1:case"end":return we.stop()}},ne,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"iterate",value:function(J){return Promise.all(Object(j.mapObject)(this.store,J))}}]),oe}();G.default=pe},"./src/redis-default.js":function(X,G,E){E.r(G),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util");function L(oe,ce,J,ne,de,we,Te){try{var Ne=oe[we](Te),Pe=Ne.value}catch(ze){J(ze);return}Ne.done?ce(Pe):Promise.resolve(Pe).then(ne,de)}function ee(oe){return function(){var ce=this,J=arguments;return new Promise(function(ne,de){var we=oe.apply(ce,J);function Te(Pe){L(we,ne,de,Te,Ne,"next",Pe)}function Ne(Pe){L(we,ne,de,Te,Ne,"throw",Pe)}Te(void 0)})}}function Z(oe,ce){if(!(oe instanceof ce))throw new TypeError("Cannot call a class as a function")}function ve(oe,ce){for(var J=0;J<ce.length;J++){var ne=ce[J];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(oe,ne.key,ne)}}function _e(oe,ce,J){return ce&&ve(oe.prototype,ce),J&&ve(oe,J),oe}var pe=function(){function oe(ce){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z(this,oe);var ne=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ce.constructor.name!=="RedisClient")throw ne}catch{throw ne}this.client=ce,this.prefix=J.prefix||"axios-cache",this.maxScanCount=J.maxScanCount||1e3,this.getAsync=Object(j.promisify)(ce.get).bind(ce),this.psetexAsync=Object(j.promisify)(ce.psetex).bind(ce),this.delAsync=Object(j.promisify)(ce.del).bind(ce),this.scanAsync=Object(j.promisify)(ce.scan).bind(ce)}return _e(oe,[{key:"calculateTTL",value:function(J){var ne=Date.now();return J.expires&&J.expires>ne?J.expires-ne:-1}},{key:"transformKey",value:function(J){return this.prefix+"_"+J}},{key:"getItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.getAsync(this.transformKey(de));case 2:if(Ne.t0=Ne.sent,Ne.t0){Ne.next=5;break}Ne.t0=null;case 5:return we=Ne.t0,Ne.abrupt("return",JSON.parse(we));case 7:case"end":return Ne.stop()}},ne,this)}));function J(ne){return ce.apply(this,arguments)}return J}()},{key:"setItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de,we){var Te,Ne;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(Te=this.transformKey(de),Ne=this.calculateTTL(we),!(Ne>0)){ze.next=5;break}return ze.next=5,this.psetexAsync(Te,Ne,JSON.stringify(we));case 5:return ze.abrupt("return",we);case 6:case"end":return ze.stop()}},ne,this)}));function J(ne,de){return ce.apply(this,arguments)}return J}()},{key:"removeItem",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.delAsync(this.transformKey(de));case 2:case"end":return Te.stop()}},ne,this)}));function J(ne){return ce.apply(this,arguments)}return J}()},{key:"scan",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var we,Te;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:we="0";case 1:return Pe.next=3,this.scanAsync(we,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return Te=Pe.sent,we=Te[0],Pe.next=7,de(Te[1]);case 7:if(we!=="0"){Pe.next=1;break}case 8:case"end":return Pe.stop()}},ne,this)}));function J(ne){return ce.apply(this,arguments)}return J}()},{key:"clear",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){var de=this;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.scan(function(Ne){return de.delAsync(Ne)});case 2:case"end":return Te.stop()}},ne,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"length",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(){var de;return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return de=0,Te.next=3,this.scan(function(Ne){de+=Ne.length});case 3:return Te.abrupt("return",de);case 4:case"end":return Te.stop()}},ne,this)}));function J(){return ce.apply(this,arguments)}return J}()},{key:"iterate",value:function(){var ce=ee(regeneratorRuntime.mark(function ne(de){var we=this,Te,Ne;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Ne=function(){return Ne=ee(regeneratorRuntime.mark(function He(ot){var ht,xt;return regeneratorRuntime.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,this.getAsync(ot);case 2:if(pt.t0=pt.sent,pt.t0){pt.next=5;break}pt.t0=null;case 5:return ht=pt.t0,xt=JSON.parse(ht),pt.next=9,de(xt,ot);case 9:return pt.abrupt("return",pt.sent);case 10:case"end":return pt.stop()}},He,this)})),Ne.apply(this,arguments)},Te=function(He){return Ne.apply(this,arguments)},ze.next=4,this.scan(function(qe){return Promise.all(qe.map(Te.bind(we)))});case 4:return ze.abrupt("return",Promise.resolve([]));case 5:case"end":return ze.stop()}},ne,this)}));function J(ne){return ce.apply(this,arguments)}return J}()}]),oe}();G.default=pe},"./src/redis.js":function(X,G,E){E.r(G),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js"),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.function.bind.js"),E("./node_modules/core-js/modules/es6.function.name.js");var j=E("util"),L=E("./src/utilities.js");function ee(ce,J,ne,de,we,Te,Ne){try{var Pe=ce[Te](Ne),ze=Pe.value}catch(qe){ne(qe);return}Pe.done?J(ze):Promise.resolve(ze).then(de,we)}function Z(ce){return function(){var J=this,ne=arguments;return new Promise(function(de,we){var Te=ce.apply(J,ne);function Ne(ze){ee(Te,de,we,Ne,Pe,"next",ze)}function Pe(ze){ee(Te,de,we,Ne,Pe,"throw",ze)}Ne(void 0)})}}function ve(ce,J){if(!(ce instanceof J))throw new TypeError("Cannot call a class as a function")}function _e(ce,J){for(var ne=0;ne<J.length;ne++){var de=J[ne];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(ce,de.key,de)}}function pe(ce,J,ne){return J&&_e(ce.prototype,J),ne&&_e(ce,ne),ce}var oe=function(){function ce(J){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ve(this,ce);var de=new TypeError("First parameter must be a valid RedisClient instance.");try{if(J.constructor.name!=="RedisClient")throw de}catch{throw de}this.client=J,this.HASH_KEY=ne,this.hgetAsync=Object(j.promisify)(J.hget).bind(J),this.hsetAsync=Object(j.promisify)(J.hset).bind(J),this.hdelAsync=Object(j.promisify)(J.hdel).bind(J),this.delAsync=Object(j.promisify)(J.del).bind(J),this.hlenAsync=Object(j.promisify)(J.hlen).bind(J),this.hgetallAsync=Object(j.promisify)(J.hgetall).bind(J)}return pe(ce,[{key:"getItem",value:function(){var J=Z(regeneratorRuntime.mark(function de(we){var Te;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetAsync(this.HASH_KEY,we);case 2:if(Pe.t0=Pe.sent,Pe.t0){Pe.next=5;break}Pe.t0=null;case 5:return Te=Pe.t0,Pe.abrupt("return",JSON.parse(Te));case 7:case"end":return Pe.stop()}},de,this)}));function ne(de){return J.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var J=Z(regeneratorRuntime.mark(function de(we,Te){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hsetAsync(this.HASH_KEY,we,JSON.stringify(Te));case 2:return Pe.abrupt("return",Te);case 3:case"end":return Pe.stop()}},de,this)}));function ne(de,we){return J.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var J=Z(regeneratorRuntime.mark(function de(we){return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Ne.next=2,this.hdelAsync(this.HASH_KEY,we);case 2:case"end":return Ne.stop()}},de,this)}));function ne(de){return J.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var J=Z(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return Te.stop()}},de,this)}));function ne(){return J.apply(this,arguments)}return ne}()},{key:"length",value:function(){var J=Z(regeneratorRuntime.mark(function de(){return regeneratorRuntime.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return Te.stop()}},de,this)}));function ne(){return J.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var J=Z(regeneratorRuntime.mark(function de(we){var Te;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return Te=Pe.sent,Pe.abrupt("return",Promise.all(Object(L.mapObject)(Te,we)));case 4:case"end":return Pe.stop()}},de,this)}));function ne(de){return J.apply(this,arguments)}return ne}()}]),ce}();G.default=oe},"./src/request.js":function(X,G,E){E.r(G),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/response.js"),L=E("./src/exclude.js"),ee=E("./src/cache.js");function Z(oe,ce,J,ne,de,we,Te){try{var Ne=oe[we](Te),Pe=Ne.value}catch(ze){J(ze);return}Ne.done?ce(Pe):Promise.resolve(Pe).then(ne,de)}function ve(oe){return function(){var ce=this,J=arguments;return new Promise(function(ne,de){var we=oe.apply(ce,J);function Te(Pe){Z(we,ne,de,Te,Ne,"next",Pe)}function Ne(Pe){Z(we,ne,de,Te,Ne,"throw",Pe)}Te(void 0)})}}function _e(oe,ce){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,J){var ne,de,we;return regeneratorRuntime.wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return we=function(){return ce.excludeFromCache=!0,{config:ce,next:ne}},ce.debug("uuid",ce.uuid),ne=function(){for(var ze=arguments.length,qe=new Array(ze),He=0;He<ze;He++)qe[He]=arguments[He];return j.default.apply(void 0,[ce,J].concat(qe))},Ne.next=5,ce.invalidate(ce,J);case 5:if(!Object(L.default)(ce,J)){Ne.next=7;break}return Ne.abrupt("return",we());case 7:return Ne.prev=7,Ne.next=10,Object(ee.read)(ce,J);case 10:return de=Ne.sent,de.config=J,de.request={fromCache:!0},Ne.abrupt("return",{config:ce,next:de});case 16:if(Ne.prev=16,Ne.t0=Ne.catch(7),!(ce.clearOnStale&&Ne.t0.reason==="cache-stale")){Ne.next=21;break}return Ne.next=21,ce.store.removeItem(ce.uuid);case 21:return Ne.abrupt("return",{config:ce,next:ne});case 22:case"end":return Ne.stop()}},oe,null,[[7,16]])})),pe.apply(this,arguments)}G.default=_e},"./src/response.js":function(X,G,E){E.r(G),E("./node_modules/regenerator-runtime/runtime.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");var j=E("./src/limit.js"),L=E("./src/cache.js"),ee=E("./node_modules/cache-control-esm/index.js");function Z(oe,ce,J,ne,de,we,Te){try{var Ne=oe[we](Te),Pe=Ne.value}catch(ze){J(ze);return}Ne.done?ce(Pe):Promise.resolve(Pe).then(ne,de)}function ve(oe){return function(){var ce=this,J=arguments;return new Promise(function(ne,de){var we=oe.apply(ce,J);function Te(Pe){Z(we,ne,de,Te,Ne,"next",Pe)}function Ne(Pe){Z(we,ne,de,Te,Ne,"throw",Pe)}Te(void 0)})}}function _e(oe,ce,J){return pe.apply(this,arguments)}function pe(){return pe=ve(regeneratorRuntime.mark(function oe(ce,J,ne){var de,we,Te,Ne,Pe;return regeneratorRuntime.wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(de=ne.request,we=de===void 0?{}:de,Te=ne.headers,Ne=Te===void 0?{}:Te,!(["arraybuffer","blob"].indexOf(we.responseType)>-1)){qe.next=3;break}return qe.abrupt("return",ne);case 3:if(Pe={},ce.readHeaders&&(Ne["cache-control"]?(Pe=Object(ee.parse)(Ne["cache-control"]),(Pe.noCache||Pe.noStore)&&(ce.excludeFromCache=!0)):Ne.expires?ce.expires=new Date(Ne.expires).getTime():ce.expires=new Date().getTime()),ce.excludeFromCache){qe.next=15;break}if(Pe.maxAge||Pe.maxAge===0?ce.expires=Date.now()+Pe.maxAge*1e3:ce.readHeaders||(ce.expires=ce.maxAge===0?Date.now():Date.now()+ce.maxAge),!ce.limit){qe.next=11;break}return ce.debug("Detected limit: ".concat(ce.limit)),qe.next=11,Object(j.default)(ce);case 11:return qe.next=13,Object(L.write)(ce,J,ne);case 13:qe.next=16;break;case 15:ne.request.excludedFromCache=!0;case 16:return qe.abrupt("return",ne);case 17:case"end":return qe.stop()}},oe)})),pe.apply(this,arguments)}G.default=_e},"./src/serialize.js":function(X,G,E){E.r(G),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(Z,ve){if(Z==null)return{};var _e=L(Z,ve),pe,oe;if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(Z);for(oe=0;oe<ce.length;oe++)pe=ce[oe],!(ve.indexOf(pe)>=0)&&Object.prototype.propertyIsEnumerable.call(Z,pe)&&(_e[pe]=Z[pe])}return _e}function L(Z,ve){if(Z==null)return{};var _e={},pe=Object.keys(Z),oe,ce;for(ce=0;ce<pe.length;ce++)oe=pe[ce],!(ve.indexOf(oe)>=0)&&(_e[oe]=Z[oe]);return _e}function ee(Z,ve,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(oe){Z.debug("Could not parse data as JSON",oe)}_e.request,_e.config;var pe=j(_e,["request","config"]);return pe}G.default=ee},"./src/utilities.js":function(X,G,E){E.r(G),E.d(G,"isObject",function(){return L}),E.d(G,"getTag",function(){return ee}),E.d(G,"isFunction",function(){return Z}),E.d(G,"isString",function(){return ve}),E.d(G,"mapObject",function(){return _e}),E("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),E("./node_modules/core-js/modules/es6.symbol.js"),E("./node_modules/core-js/modules/es6.array.iterator.js"),E("./node_modules/core-js/modules/es6.object.to-string.js");function j(pe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(ce){return typeof ce}:j=function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},j(pe)}function L(pe){var oe=j(pe);return pe!=null&&(oe==="object"||oe==="function")}function ee(pe){return pe===null?pe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(pe)}function Z(pe){if(!L(pe))return!1;var oe=ee(pe);return oe==="[object Function]"||oe==="[object AsyncFunction]"||oe==="[object GeneratorFunction]"||oe==="[object Proxy]"}function ve(pe){var oe=j(pe);return oe==="string"||oe==="object"&&pe!=null&&!Array.isArray(pe)&&ee(pe)==="[object String]"}function _e(pe,oe){return L(pe)?Object.keys(pe).map(function(ce){return oe(pe[ce],ce)}):[]}},axios:function(X,G){X.exports=se},util:function(X,G){X.exports=k.default}})})});const B={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},O=R.setupCache({maxAge:60*60*24*1e3}),he=C.default.create({adapter:O.adapter}),Y=async(q,V={})=>{const se={...B,...V},[X,G]=i.lngLatToGoogle(q,se.zoomBase),E=se.tileUrl.replace("{z}",String(se.zoomBase)).replace("{x}",String(X)).replace("{y}",String(G)),j={code:"",prefecture:"",city:""};let L;try{const ve=await he.get(E,{responseType:"arraybuffer"});L=Buffer.from(ve.data,"binary")}catch(ve){throw new Error(ve)}const ee=new f.VectorTile(new S.default(L));let Z=Object.keys(ee.layers);return Array.isArray(Z)||(Z=[Z]),Z.forEach(ve=>{const _e=ee.layers[ve];if(_e&&se.layer===_e.name)for(let pe=0;pe<_e.length;pe++){const oe=_e.feature(pe).toGeoJSON(X,G,se.zoomBase);Z.length>1&&(oe.properties.vt_layer=ve);const ce={type:"FeatureCollection",features:[oe]};t.geoContains(ce,q)&&(j.code=String(oe.id).length===5?String(oe.id):`0${String(oe.id)}`,j.prefecture=oe.properties.prefecture,j.city=oe.properties.city)}}),j};e.openReverseGeocoder=Y})(MC);const e5={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},t5={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},n5={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},r5={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},TE={JPN:n5,CHN:e5,DEU:t5,KOR:r5};function GP(e,t,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function i5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!IE(e[0])||!IE(e[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:e};return GP(a,t,i)}function o5(e,t,i){i===void 0&&(i={});for(var a=0,c=e;a<c.length;a++){var m=c[a];if(m.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var f=0;f<m[m.length-1].length;f++)if(m[m.length-1][f]!==m[0][f])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:e};return GP(u,t,i)}function IE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function WP(e,t,i){if(e!==null)for(var a,c,m,f,u,S,C,k=0,b=0,I,R=e.type,B=R==="FeatureCollection",O=R==="Feature",he=B?e.features.length:1,Y=0;Y<he;Y++){C=B?e.features[Y].geometry:O?e.geometry:e,I=C?C.type==="GeometryCollection":!1,u=I?C.geometries.length:1;for(var q=0;q<u;q++){var V=0,se=0;if(f=I?C.geometries[q]:C,f!==null){S=f.coordinates;var X=f.type;switch(k=i&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(S,b,Y,V,se)===!1)return!1;b++,V++;break;case"LineString":case"MultiPoint":for(a=0;a<S.length;a++){if(t(S[a],b,Y,V,se)===!1)return!1;b++,X==="MultiPoint"&&V++}X==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(a=0;a<S.length;a++){for(c=0;c<S[a].length-k;c++){if(t(S[a][c],b,Y,V,se)===!1)return!1;b++}X==="MultiLineString"&&V++,X==="Polygon"&&se++}X==="Polygon"&&V++;break;case"MultiPolygon":for(a=0;a<S.length;a++){for(se=0,c=0;c<S[a].length;c++){for(m=0;m<S[a][c].length-k;m++){if(t(S[a][c][m],b,Y,V,se)===!1)return!1;b++}se++}V++}break;case"GeometryCollection":for(a=0;a<f.geometries.length;a++)if(WP(f.geometries[a],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s5(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function a5(e){return e.type==="Feature"?e.geometry:e}function l5(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=s5(e),c=a5(t),m=c.type,f=t.bbox,u=c.coordinates;if(f&&u5(a,f)===!1)return!1;m==="Polygon"&&(u=[u]);for(var S=!1,C=0;C<u.length&&!S;C++)if(CE(a,u[C][0],i.ignoreBoundary)){for(var k=!1,b=1;b<u[C].length&&!k;)CE(a,u[C][b],!i.ignoreBoundary)&&(k=!0),b++;k||(S=!0)}return S}function CE(e,t,i){var a=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,m=t.length-1;c<t.length;m=c++){var f=t[c][0],u=t[c][1],S=t[m][0],C=t[m][1],k=e[1]*(f-S)+u*(S-e[0])+C*(e[0]-f)===0&&(f-e[0])*(S-e[0])<=0&&(u-e[1])*(C-e[1])<=0;if(k)return!i;var b=u>e[1]!=C>e[1]&&e[0]<(S-f)*(e[1]-u)/(C-u)+f;b&&(a=!a)}return a}function u5(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function c5(e,t){t===void 0&&(t={});var i=0,a=0,c=0;return WP(e,function(m){i+=m[0],a+=m[1],c++},!0),i5([i/c,a/c],t.properties)}const h5=()=>{const[e,t]=vt.useState(!1);return{detectCountry:vt.useCallback(async(a,c)=>{t(!0);const f=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const u of f.features)if(l5([a,c],u.geometry))return console.log("country: ",u.properties),t(!1),u;t(!1)},[]),loadingCountry:e}},wv=({feature:e,fieldOption:t,suggestList:i,onChange:a})=>{var u;const[c,m]=vt.useState((u=e.properties)==null?void 0:u[t.key]);vt.useEffect(()=>{var S;m((S=e.properties)==null?void 0:S[t.key])},[e]);const f=vt.useCallback(S=>{m(S.currentTarget.value),a&&a(S)},[]);return yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:f}),yt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(S=>{if(parseInt(S.tags.admin_level)===t.adminLevel)return yt.jsx("option",{value:S.tags.name},S.id);if(S.type==="node"&&t.adminLevel===9)return yt.jsx("option",{value:S.tags.name},S.id)})})]})},d5=({feature:e,fields:t})=>e.properties?yt.jsxs(yt.Fragment,{children:[t.postcodeField&&yt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var a;return yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{children:(a=e.properties)==null?void 0:a[i.key]})," "]})})]}):null,f5=({placeholder:e,defaultValue:t})=>{const[i,a]=vt.useState(t);vt.useEffect(()=>{a(t)},[t]);const c=vt.useCallback(m=>{a(m.currentTarget.value)},[]);return yt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Yg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Yg.exports;(function(e,t){(function(){var i,a="4.15.0",c=200,m="Expected a function",f="__lodash_hash_undefined__",u=1,S=2,C=1/0,k=9007199254740991,b="[object Arguments]",I="[object Array]",R="[object Boolean]",B="[object Date]",O="[object Error]",he="[object Function]",Y="[object GeneratorFunction]",q="[object Map]",V="[object Number]",se="[object Object]",X="[object Promise]",G="[object RegExp]",E="[object Set]",j="[object String]",L="[object Symbol]",ee="[object WeakMap]",Z="[object ArrayBuffer]",ve="[object DataView]",_e="[object Float32Array]",pe="[object Float64Array]",oe="[object Int8Array]",ce="[object Int16Array]",J="[object Int32Array]",ne="[object Uint8Array]",de="[object Uint8ClampedArray]",we="[object Uint16Array]",Te="[object Uint32Array]",Ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,ze=/^\./,qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,ot=/\\(\\)?/g,ht=/\w*$/,xt=/^\[object .+?Constructor\]$/,kt=/^(?:0|[1-9]\d*)$/,pt={};pt[_e]=pt[pe]=pt[oe]=pt[ce]=pt[J]=pt[ne]=pt[de]=pt[we]=pt[Te]=!0,pt[b]=pt[I]=pt[Z]=pt[R]=pt[ve]=pt[B]=pt[O]=pt[he]=pt[q]=pt[V]=pt[se]=pt[G]=pt[E]=pt[j]=pt[ee]=!1;var wt={};wt[b]=wt[I]=wt[Z]=wt[ve]=wt[R]=wt[B]=wt[_e]=wt[pe]=wt[oe]=wt[ce]=wt[J]=wt[q]=wt[V]=wt[se]=wt[G]=wt[E]=wt[j]=wt[L]=wt[ne]=wt[de]=wt[we]=wt[Te]=!0,wt[O]=wt[he]=wt[ee]=!1;var Ht=typeof $l=="object"&&$l&&$l.Object===Object&&$l,Lt=typeof self=="object"&&self&&self.Object===Object&&self,cn=Ht||Lt||Function("return this")(),it=t&&!t.nodeType&&t,bn=it&&!0&&e&&!e.nodeType&&e,hn=bn&&bn.exports===it,qt=hn&&Ht.process,Se=function(){try{return qt&&qt.binding("util")}catch{}}(),N=Se&&Se.isTypedArray;function D(W,ye){return W.set(ye[0],ye[1]),W}function xe(W,ye){return W.add(ye),W}function Xe(W,ye,Ue){switch(Ue.length){case 0:return W.call(ye);case 1:return W.call(ye,Ue[0]);case 2:return W.call(ye,Ue[0],Ue[1]);case 3:return W.call(ye,Ue[0],Ue[1],Ue[2])}return W.apply(ye,Ue)}function tt(W,ye){for(var Ue=-1,at=W?W.length:0;++Ue<at&&ye(W[Ue],Ue,W)!==!1;);return W}function ct(W,ye){for(var Ue=-1,at=ye.length,Mt=W.length;++Ue<at;)W[Mt+Ue]=ye[Ue];return W}function ae(W,ye,Ue,at){var Mt=-1,Tt=W?W.length:0;for(at&&Tt&&(Ue=W[++Mt]);++Mt<Tt;)Ue=ye(Ue,W[Mt],Mt,W);return Ue}function M(W,ye){for(var Ue=-1,at=W?W.length:0;++Ue<at;)if(ye(W[Ue],Ue,W))return!0;return!1}function U(W){return function(ye){return ye==null?i:ye[W]}}function Ee(W,ye){for(var Ue=-1,at=Array(W);++Ue<W;)at[Ue]=ye(Ue);return at}function We(W){return function(ye){return W(ye)}}function rt(W,ye){return W==null?i:W[ye]}function Ve(W){var ye=!1;if(W!=null&&typeof W.toString!="function")try{ye=!!(W+"")}catch{}return ye}function Et(W){var ye=-1,Ue=Array(W.size);return W.forEach(function(at,Mt){Ue[++ye]=[Mt,at]}),Ue}function zt(W,ye){return function(Ue){return W(ye(Ue))}}function pn(W){var ye=-1,Ue=Array(W.size);return W.forEach(function(at){Ue[++ye]=at}),Ue}var Sn=Array.prototype,Ft=Function.prototype,Dr=Object.prototype,ti=cn["__core-js_shared__"],ir=function(){var W=/[^.]+$/.exec(ti&&ti.keys&&ti.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}(),ke=Ft.toString,ie=Dr.hasOwnProperty,le=ke.call(Object),fe=Dr.toString,Fe=RegExp("^"+ke.call(ie).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),De=hn?cn.Buffer:i,Oe=cn.Symbol,$e=cn.Uint8Array,je=zt(Object.getPrototypeOf,Object),Qe=Object.create,dt=Dr.propertyIsEnumerable,lt=Sn.splice,ut=Object.getOwnPropertySymbols,rn=De?De.isBuffer:i,Yt=zt(Object.keys,Object),Tn=Math.max,un=Xs(cn,"DataView"),In=Xs(cn,"Map"),Bn=Xs(cn,"Promise"),Vn=Xs(cn,"Set"),or=Xs(cn,"WeakMap"),mn=Xs(Object,"create"),Jn=!dt.call({valueOf:1},"valueOf"),vr=ho(un),ni=ho(In),vi=ho(Bn),_r=ho(Vn),Bs=ho(or),il=Oe?Oe.prototype:i,zn=il?il.valueOf:i,ol=il?il.toString:i;function Pn(){}function xr(W){var ye=-1,Ue=W?W.length:0;for(this.clear();++ye<Ue;){var at=W[ye];this.set(at[0],at[1])}}function ri(){this.__data__=mn?mn(null):{}}function _a(W){return this.has(W)&&delete this.__data__[W]}function ii(W){var ye=this.__data__;if(mn){var Ue=ye[W];return Ue===f?i:Ue}return ie.call(ye,W)?ye[W]:i}function Fi(W){var ye=this.__data__;return mn?ye[W]!==i:ie.call(ye,W)}function ac(W,ye){var Ue=this.__data__;return Ue[W]=mn&&ye===i?f:ye,this}xr.prototype.clear=ri,xr.prototype.delete=_a,xr.prototype.get=ii,xr.prototype.has=Fi,xr.prototype.set=ac;function Br(W){var ye=-1,Ue=W?W.length:0;for(this.clear();++ye<Ue;){var at=W[ye];this.set(at[0],at[1])}}function mr(){this.__data__=[]}function xa(W){var ye=this.__data__,Ue=Vs(ye,W);if(Ue<0)return!1;var at=ye.length-1;return Ue==at?ye.pop():lt.call(ye,Ue,1),!0}function hs(W){var ye=this.__data__,Ue=Vs(ye,W);return Ue<0?i:ye[Ue][1]}function sr(W){return Vs(this.__data__,W)>-1}function ds(W,ye){var Ue=this.__data__,at=Vs(Ue,W);return at<0?Ue.push([W,ye]):Ue[at][1]=ye,this}Br.prototype.clear=mr,Br.prototype.delete=xa,Br.prototype.get=hs,Br.prototype.has=sr,Br.prototype.set=ds;function wr(W){var ye=-1,Ue=W?W.length:0;for(this.clear();++ye<Ue;){var at=W[ye];this.set(at[0],at[1])}}function sl(){this.__data__={hash:new xr,map:new(In||Br),string:new xr}}function co(W){return ml(this,W).delete(W)}function hu(W){return ml(this,W).get(W)}function Ns(W){return ml(this,W).has(W)}function jn(W,ye){return ml(this,W).set(W,ye),this}wr.prototype.clear=sl,wr.prototype.delete=co,wr.prototype.get=hu,wr.prototype.has=Ns,wr.prototype.set=jn;function fs(W){var ye=-1,Ue=W?W.length:0;for(this.__data__=new wr;++ye<Ue;)this.add(W[ye])}function Us(W){return this.__data__.set(W,f),this}function du(W){return this.__data__.has(W)}fs.prototype.add=fs.prototype.push=Us,fs.prototype.has=du;function oi(W){this.__data__=new Br(W)}function wa(){this.__data__=new Br}function fu(W){return this.__data__.delete(W)}function al(W){return this.__data__.get(W)}function ba(W){return this.__data__.has(W)}function ll(W,ye){var Ue=this.__data__;if(Ue instanceof Br){var at=Ue.__data__;if(!In||at.length<c-1)return at.push([W,ye]),this;Ue=this.__data__=new wr(at)}return Ue.set(W,ye),this}oi.prototype.clear=wa,oi.prototype.delete=fu,oi.prototype.get=al,oi.prototype.has=ba,oi.prototype.set=ll;function $s(W,ye){var Ue=br(W)||Io(W)?Ee(W.length,String):[],at=Ue.length,Mt=!!at;for(var Tt in W)(ye||ie.call(W,Tt))&&!(Mt&&(Tt=="length"||Xo(Tt,at)))&&Ue.push(Tt);return Ue}function pu(W,ye,Ue){(Ue!==i&&!To(W[ye],Ue)||typeof ye=="number"&&Ue===i&&!(ye in W))&&(W[ye]=Ue)}function lc(W,ye,Ue){var at=W[ye];(!(ie.call(W,ye)&&To(at,Ue))||Ue===i&&!(ye in W))&&(W[ye]=Ue)}function Vs(W,ye){for(var Ue=W.length;Ue--;)if(To(W[Ue][0],ye))return Ue;return-1}function uc(W,ye){return W&&pl(ye,Po(ye),W)}function Ri(W,ye,Ue,at,Mt,Tt,Kt){var Jt;if(at&&(Jt=Tt?at(W,Mt,Tt,Kt):at(W)),Jt!==i)return Jt;if(!wi(W))return W;var vn=br(W);if(vn){if(Jt=wc(W),!ye)return fl(W,Jt)}else{var Fn=Hi(W),_n=Fn==he||Fn==Y;if(Co(W))return Xh(W,ye);if(Fn==se||Fn==b||_n&&!Tt){if(Ve(W))return Tt?W:{};if(Jt=bu(_n?{}:W),!ye)return mc(W,uc(Jt,W))}else{if(!wt[Fn])return Tt?W:{};Jt=bc(W,Fn,Ri,ye)}}Kt||(Kt=new oi);var Un=Kt.get(W);if(Un)return Un;if(Kt.set(W,Jt),!vn)var ar=Ue?vc(W):Po(W);return tt(ar||W,function(Ar,Nr){ar&&(Nr=Ar,Ar=W[Nr]),lc(Jt,Nr,Ri(Ar,ye,Ue,at,Nr,W,Kt))}),Jt}function ul(W){return wi(W)?Qe(W):{}}var Xr=yc(mu),_i=ps();function mu(W,ye){return W&&_i(W,ye,Po)}function Sa(W,ye){ye=Ks(ye,W)?[ye]:Hs(ye);for(var Ue=0,at=ye.length;W!=null&&Ue<at;)W=W[Gn(ye[Ue++])];return Ue&&Ue==at?W:i}function gu(W,ye,Ue){var at=ye(W);return br(W)?at:ct(at,Ue(W))}function yu(W){return fe.call(W)}function Gs(W,ye){return W!=null&&ye in Object(W)}function vu(W,ye,Ue,at,Mt){return W===ye?!0:W==null||ye==null||!wi(W)&&!Oi(ye)?W!==W&&ye!==ye:cc(W,ye,vu,Ue,at,Mt)}function cc(W,ye,Ue,at,Mt,Tt){var Kt=br(W),Jt=br(ye),vn=I,Fn=I;Kt||(vn=Hi(W),vn=vn==b?se:vn),Jt||(Fn=Hi(ye),Fn=Fn==b?se:Fn);var _n=vn==se&&!Ve(W),Un=Fn==se&&!Ve(ye),ar=vn==Fn;if(ar&&!_n)return Tt||(Tt=new oi),Kt||Ko(W)?wu(W,ye,Ue,at,Mt,Tt):Qh(W,ye,vn,Ue,at,Mt,Tt);if(!(Mt&S)){var Ar=_n&&ie.call(W,"__wrapped__"),Nr=Un&&ie.call(ye,"__wrapped__");if(Ar||Nr){var bi=Ar?W.value():W,Si=Nr?ye.value():ye;return Tt||(Tt=new oi),Ue(bi,Si,at,Mt,Tt)}}return ar?(Tt||(Tt=new oi),ed(W,ye,Ue,at,Mt,Tt)):!1}function hc(W,ye,Ue,at){var Mt=Ue.length,Tt=Mt,Kt=!at;if(W==null)return!Tt;for(W=Object(W);Mt--;){var Jt=Ue[Mt];if(Kt&&Jt[2]?Jt[1]!==W[Jt[0]]:!(Jt[0]in W))return!1}for(;++Mt<Tt;){Jt=Ue[Mt];var vn=Jt[0],Fn=W[vn],_n=Jt[1];if(Kt&&Jt[2]){if(Fn===i&&!(vn in W))return!1}else{var Un=new oi;if(at)var ar=at(Fn,_n,vn,W,ye,Un);if(!(ar===i?vu(_n,Fn,at,u|S,Un):ar))return!1}}return!0}function Zh(W){if(!wi(W)||Eu(W))return!1;var ye=Ca(W)||Ve(W)?Fe:xt;return ye.test(ho(W))}function qh(W){return Oi(W)&&Pa(W.length)&&!!pt[fe.call(W)]}function dc(W){return typeof W=="function"?W:W==null?gs:typeof W=="object"?br(W)?_u(W[0],W[1]):dl(W):Js(W)}function cl(W){if(!Xn(W))return Yt(W);var ye=[];for(var Ue in Object(W))ie.call(W,Ue)&&Ue!="constructor"&&ye.push(Ue);return ye}function hl(W){if(!wi(W))return Ia(W);var ye=Xn(W),Ue=[];for(var at in W)at=="constructor"&&(ye||!ie.call(W,at))||Ue.push(at);return Ue}function dl(W){var ye=gl(W);return ye.length==1&&ye[0][2]?wn(ye[0][0],ye[0][1]):function(Ue){return Ue===W||hc(Ue,W,ye)}}function _u(W,ye){return Ks(W)&&yl(ye)?wn(Gn(W),ye):function(Ue){var at=Yo(Ue,W);return at===i&&at===ye?mo(Ue,W):vu(ye,at,i,u|S)}}function Ws(W,ye,Ue,at,Mt){if(W!==ye){if(!(br(ye)||Ko(ye)))var Tt=hl(ye);tt(Tt||ye,function(Kt,Jt){if(Tt&&(Jt=Kt,Kt=ye[Jt]),wi(Kt))Mt||(Mt=new oi),xi(W,ye,Jt,Ue,Ws,at,Mt);else{var vn=at?at(W[Jt],Kt,Jt+"",W,ye,Mt):i;vn===i&&(vn=Kt),pu(W,Jt,vn)}})}}function xi(W,ye,Ue,at,Mt,Tt,Kt){var Jt=W[Ue],vn=ye[Ue],Fn=Kt.get(vn);if(Fn){pu(W,Ue,Fn);return}var _n=Tt?Tt(Jt,vn,Ue+"",W,ye,Kt):i,Un=_n===i;Un&&(_n=vn,br(vn)||Ko(vn)?br(Jt)?_n=Jt:po(Jt)?_n=fl(Jt):(Un=!1,_n=Ri(vn,!0)):Aa(vn)||Io(vn)?Io(Jt)?_n=ka(Jt):!wi(Jt)||at&&Ca(Jt)?(Un=!1,_n=Ri(vn,!0)):_n=Jt:Un=!1),Un&&(Kt.set(vn,_n),Mt(_n,vn,at,Tt,Kt),Kt.delete(vn)),pu(W,Ue,_n)}function Ln(W){return function(ye){return Sa(ye,W)}}function xu(W,ye){return ye=Tn(ye===i?W.length-1:ye,0),function(){for(var Ue=arguments,at=-1,Mt=Tn(Ue.length-ye,0),Tt=Array(Mt);++at<Mt;)Tt[at]=Ue[ye+at];at=-1;for(var Kt=Array(ye+1);++at<ye;)Kt[at]=Ue[at];return Kt[ye]=Tt,Xe(W,this,Kt)}}function Ea(W){if(typeof W=="string")return W;if(ms(W))return ol?ol.call(W):"";var ye=W+"";return ye=="0"&&1/W==-C?"-0":ye}function Hs(W){return br(W)?W:Qn(W)}function Xh(W,ye){if(ye)return W.slice();var Ue=new W.constructor(W.length);return W.copy(Ue),Ue}function Zs(W){var ye=new W.constructor(W.byteLength);return new $e(ye).set(new $e(W)),ye}function Kh(W,ye){var Ue=ye?Zs(W.buffer):W.buffer;return new W.constructor(Ue,W.byteOffset,W.byteLength)}function qs(W,ye,Ue){var at=ye?Ue(Et(W),!0):Et(W);return ae(at,D,new W.constructor)}function Yh(W){var ye=new W.constructor(W.source,ht.exec(W));return ye.lastIndex=W.lastIndex,ye}function fc(W,ye,Ue){var at=ye?Ue(pn(W),!0):pn(W);return ae(at,xe,new W.constructor)}function Jh(W){return zn?Object(zn.call(W)):{}}function pc(W,ye){var Ue=ye?Zs(W.buffer):W.buffer;return new W.constructor(Ue,W.byteOffset,W.length)}function fl(W,ye){var Ue=-1,at=W.length;for(ye||(ye=Array(at));++Ue<at;)ye[Ue]=W[Ue];return ye}function pl(W,ye,Ue,at){Ue||(Ue={});for(var Mt=-1,Tt=ye.length;++Mt<Tt;){var Kt=ye[Mt],Jt=at?at(Ue[Kt],W[Kt],Kt,Ue,W):i;lc(Ue,Kt,Jt===i?W[Kt]:Jt)}return Ue}function mc(W,ye){return pl(W,_c(W),ye)}function gc(W){return xu(function(ye,Ue){var at=-1,Mt=Ue.length,Tt=Mt>1?Ue[Mt-1]:i,Kt=Mt>2?Ue[2]:i;for(Tt=W.length>3&&typeof Tt=="function"?(Mt--,Tt):i,Kt&&Eo(Ue[0],Ue[1],Kt)&&(Tt=Mt<3?i:Tt,Mt=1),ye=Object(ye);++at<Mt;){var Jt=Ue[at];Jt&&W(ye,Jt,at,Tt)}return ye})}function yc(W,ye){return function(Ue,at){if(Ue==null)return Ue;if(!fo(Ue))return W(Ue,at);for(var Mt=Ue.length,Tt=ye?Mt:-1,Kt=Object(Ue);(ye?Tt--:++Tt<Mt)&&at(Kt[Tt],Tt,Kt)!==!1;);return Ue}}function ps(W){return function(ye,Ue,at){for(var Mt=-1,Tt=Object(ye),Kt=at(ye),Jt=Kt.length;Jt--;){var vn=Kt[W?Jt:++Mt];if(Ue(Tt[vn],vn,Tt)===!1)break}return ye}}function wu(W,ye,Ue,at,Mt,Tt){var Kt=Mt&S,Jt=W.length,vn=ye.length;if(Jt!=vn&&!(Kt&&vn>Jt))return!1;var Fn=Tt.get(W);if(Fn&&Tt.get(ye))return Fn==ye;var _n=-1,Un=!0,ar=Mt&u?new fs:i;for(Tt.set(W,ye),Tt.set(ye,W);++_n<Jt;){var Ar=W[_n],Nr=ye[_n];if(at)var bi=Kt?at(Nr,Ar,_n,ye,W,Tt):at(Ar,Nr,_n,W,ye,Tt);if(bi!==i){if(bi)continue;Un=!1;break}if(ar){if(!M(ye,function(Si,Zi){if(!ar.has(Zi)&&(Ar===Si||Ue(Ar,Si,at,Mt,Tt)))return ar.add(Zi)})){Un=!1;break}}else if(!(Ar===Nr||Ue(Ar,Nr,at,Mt,Tt))){Un=!1;break}}return Tt.delete(W),Tt.delete(ye),Un}function Qh(W,ye,Ue,at,Mt,Tt,Kt){switch(Ue){case ve:if(W.byteLength!=ye.byteLength||W.byteOffset!=ye.byteOffset)return!1;W=W.buffer,ye=ye.buffer;case Z:return!(W.byteLength!=ye.byteLength||!at(new $e(W),new $e(ye)));case R:case B:case V:return To(+W,+ye);case O:return W.name==ye.name&&W.message==ye.message;case G:case j:return W==ye+"";case q:var Jt=Et;case E:var vn=Tt&S;if(Jt||(Jt=pn),W.size!=ye.size&&!vn)return!1;var Fn=Kt.get(W);if(Fn)return Fn==ye;Tt|=u,Kt.set(W,ye);var _n=wu(Jt(W),Jt(ye),at,Mt,Tt,Kt);return Kt.delete(W),_n;case L:if(zn)return zn.call(W)==zn.call(ye)}return!1}function ed(W,ye,Ue,at,Mt,Tt){var Kt=Mt&S,Jt=Po(W),vn=Jt.length,Fn=Po(ye),_n=Fn.length;if(vn!=_n&&!Kt)return!1;for(var Un=vn;Un--;){var ar=Jt[Un];if(!(Kt?ar in ye:ie.call(ye,ar)))return!1}var Ar=Tt.get(W);if(Ar&&Tt.get(ye))return Ar==ye;var Nr=!0;Tt.set(W,ye),Tt.set(ye,W);for(var bi=Kt;++Un<vn;){ar=Jt[Un];var Si=W[ar],Zi=ye[ar];if(at)var Tu=Kt?at(Zi,Si,ar,ye,W,Tt):at(Si,Zi,ar,W,ye,Tt);if(!(Tu===i?Si===Zi||Ue(Si,Zi,at,Mt,Tt):Tu)){Nr=!1;break}bi||(bi=ar=="constructor")}if(Nr&&!bi){var vs=W.constructor,_s=ye.constructor;vs!=_s&&"constructor"in W&&"constructor"in ye&&!(typeof vs=="function"&&vs instanceof vs&&typeof _s=="function"&&_s instanceof _s)&&(Nr=!1)}return Tt.delete(W),Tt.delete(ye),Nr}function vc(W){return gu(W,Po,_c)}function Ta(){var W=Pn.iteratee||Ys;return W=W===Ys?dc:W,arguments.length?W(arguments[0],arguments[1]):W}function ml(W,ye){var Ue=W.__data__;return Su(ye)?Ue[typeof ye=="string"?"string":"hash"]:Ue.map}function gl(W){for(var ye=Po(W),Ue=ye.length;Ue--;){var at=ye[Ue],Mt=W[at];ye[Ue]=[at,Mt,yl(Mt)]}return ye}function Xs(W,ye){var Ue=rt(W,ye);return Zh(Ue)?Ue:i}var _c=ut?zt(ut,Object):ys,Hi=yu;(un&&Hi(new un(new ArrayBuffer(1)))!=ve||In&&Hi(new In)!=q||Bn&&Hi(Bn.resolve())!=X||Vn&&Hi(new Vn)!=E||or&&Hi(new or)!=ee)&&(Hi=function(W){var ye=fe.call(W),Ue=ye==se?W.constructor:i,at=Ue?ho(Ue):i;if(at)switch(at){case vr:return ve;case ni:return q;case vi:return X;case _r:return E;case Bs:return ee}return ye});function xc(W,ye,Ue){ye=Ks(ye,W)?[ye]:Hs(ye);for(var at,Mt=-1,Kt=ye.length;++Mt<Kt;){var Tt=Gn(ye[Mt]);if(!(at=W!=null&&Ue(W,Tt)))break;W=W[Tt]}if(at)return at;var Kt=W?W.length:0;return!!Kt&&Pa(Kt)&&Xo(Tt,Kt)&&(br(W)||Io(W))}function wc(W){var ye=W.length,Ue=W.constructor(ye);return ye&&typeof W[0]=="string"&&ie.call(W,"index")&&(Ue.index=W.index,Ue.input=W.input),Ue}function bu(W){return typeof W.constructor=="function"&&!Xn(W)?ul(je(W)):{}}function bc(W,ye,Ue,at){var Mt=W.constructor;switch(ye){case Z:return Zs(W);case R:case B:return new Mt(+W);case ve:return Kh(W,at);case _e:case pe:case oe:case ce:case J:case ne:case de:case we:case Te:return pc(W,at);case q:return qs(W,at,Ue);case V:case j:return new Mt(W);case G:return Yh(W);case E:return fc(W,at,Ue);case L:return Jh(W)}}function Xo(W,ye){return ye=ye??k,!!ye&&(typeof W=="number"||kt.test(W))&&W>-1&&W%1==0&&W<ye}function Eo(W,ye,Ue){if(!wi(Ue))return!1;var at=typeof ye;return(at=="number"?fo(Ue)&&Xo(ye,Ue.length):at=="string"&&ye in Ue)?To(Ue[ye],W):!1}function Ks(W,ye){if(br(W))return!1;var Ue=typeof W;return Ue=="number"||Ue=="symbol"||Ue=="boolean"||W==null||ms(W)?!0:Pe.test(W)||!Ne.test(W)||ye!=null&&W in Object(ye)}function Su(W){var ye=typeof W;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?W!=="__proto__":W===null}function Eu(W){return!!ir&&ir in W}function Xn(W){var ye=W&&W.constructor,Ue=typeof ye=="function"&&ye.prototype||Dr;return W===Ue}function yl(W){return W===W&&!wi(W)}function wn(W,ye){return function(Ue){return Ue==null?!1:Ue[W]===ye&&(ye!==i||W in Object(Ue))}}function Ia(W){var ye=[];if(W!=null)for(var Ue in Object(W))ye.push(Ue);return ye}var Qn=_l(function(W){W=xl(W);var ye=[];return ze.test(W)&&ye.push(""),W.replace(qe,function(Ue,at,Mt,Tt){ye.push(Mt?Tt.replace(ot,"$1"):at||Ue)}),ye});function Gn(W){if(typeof W=="string"||ms(W))return W;var ye=W+"";return ye=="0"&&1/W==-C?"-0":ye}function ho(W){if(W!=null){try{return ke.call(W)}catch{}try{return W+""}catch{}}return""}function Sc(W){for(var ye=-1,Ue=W?W.length:0,at=0,Mt=[];++ye<Ue;){var Tt=W[ye];Tt&&(Mt[at++]=Tt)}return Mt}function vl(W,ye){var Ue=br(W)?tt:Xr;return Ue(W,Ta(ye,3))}function _l(W,ye){if(typeof W!="function"||ye&&typeof ye!="function")throw new TypeError(m);var Ue=function(){var at=arguments,Mt=ye?ye.apply(this,at):at[0],Tt=Ue.cache;if(Tt.has(Mt))return Tt.get(Mt);var Kt=W.apply(this,at);return Ue.cache=Tt.set(Mt,Kt),Kt};return Ue.cache=new(_l.Cache||wr),Ue}_l.Cache=wr;function Ec(W){return Ri(W,!1,!0)}function To(W,ye){return W===ye||W!==W&&ye!==ye}function Io(W){return po(W)&&ie.call(W,"callee")&&(!dt.call(W,"callee")||fe.call(W)==b)}var br=Array.isArray;function fo(W){return W!=null&&Pa(W.length)&&!Ca(W)}function po(W){return Oi(W)&&fo(W)}var Co=rn||wl;function si(W){if(fo(W)&&(br(W)||typeof W=="string"||typeof W.splice=="function"||Co(W)||Io(W)))return!W.length;var ye=Hi(W);if(ye==q||ye==E)return!W.size;if(Jn||Xn(W))return!Yt(W).length;for(var Ue in W)if(ie.call(W,Ue))return!1;return!0}function Ca(W){var ye=wi(W)?fe.call(W):"";return ye==he||ye==Y}function Pa(W){return typeof W=="number"&&W>-1&&W%1==0&&W<=k}function wi(W){var ye=typeof W;return!!W&&(ye=="object"||ye=="function")}function Oi(W){return!!W&&typeof W=="object"}function Aa(W){if(!Oi(W)||fe.call(W)!=se||Ve(W))return!1;var ye=je(W);if(ye===null)return!0;var Ue=ie.call(ye,"constructor")&&ye.constructor;return typeof Ue=="function"&&Ue instanceof Ue&&ke.call(Ue)==le}function ms(W){return typeof W=="symbol"||Oi(W)&&fe.call(W)==L}var Ko=N?We(N):qh;function ka(W){return pl(W,Ma(W))}function xl(W){return W==null?"":Ea(W)}function Yo(W,ye,Ue){var at=W==null?i:Sa(W,ye);return at===i?Ue:at}function mo(W,ye){return W!=null&&xc(W,ye,Gs)}function Po(W){return fo(W)?$s(W):cl(W)}function Ma(W){return fo(W)?$s(W,!0):hl(W)}var Rn=gc(function(W,ye,Ue){Ws(W,ye,Ue)});function gs(W){return W}function Ys(W){return dc(typeof W=="function"?W:Ri(W,!0))}function Js(W){return Ks(W)?U(Gn(W)):Ln(W)}function ys(){return[]}function wl(){return!1}Pn.compact=Sc,Pn.iteratee=Ys,Pn.keys=Po,Pn.keysIn=Ma,Pn.memoize=_l,Pn.merge=Rn,Pn.property=Js,Pn.toPlainObject=ka,Pn.clone=Ec,Pn.eq=To,Pn.forEach=vl,Pn.get=Yo,Pn.hasIn=mo,Pn.identity=gs,Pn.isArguments=Io,Pn.isArray=br,Pn.isArrayLike=fo,Pn.isArrayLikeObject=po,Pn.isBuffer=Co,Pn.isEmpty=si,Pn.isFunction=Ca,Pn.isLength=Pa,Pn.isObject=wi,Pn.isObjectLike=Oi,Pn.isPlainObject=Aa,Pn.isSymbol=ms,Pn.isTypedArray=Ko,Pn.stubArray=ys,Pn.stubFalse=wl,Pn.toString=xl,Pn.each=vl,Pn.VERSION=a,bn&&((bn.exports=Pn)._=Pn,it._=Pn)}).call($l)})(Yg,Yg.exports);var p5=Yg.exports,m5=Km;function Km(e,t){var i=e&&e.type,a;if(i==="FeatureCollection")for(a=0;a<e.features.length;a++)Km(e.features[a],t);else if(i==="GeometryCollection")for(a=0;a<e.geometries.length;a++)Km(e.geometries[a],t);else if(i==="Feature")Km(e.geometry,t);else if(i==="Polygon")PE(e.coordinates,t);else if(i==="MultiPolygon")for(a=0;a<e.coordinates.length;a++)PE(e.coordinates[a],t);return e}function PE(e,t){if(e.length!==0){AE(e[0],t);for(var i=1;i<e.length;i++)AE(e[i],!t)}}function AE(e,t){for(var i=0,a=0,c=0,m=e.length,f=m-1;c<m;f=c++){var u=(e[c][0]-e[f][0])*(e[f][1]+e[c][1]),S=i+u;a+=Math.abs(i)>=Math.abs(u)?i-S+u:u-S+i,i=S}i+a>=0!=!!t&&e.reverse()}const g5=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var y5=g5,kn=p5,km=m5,Ym={};y5.forEach(function(e){if(e.polygon==="all")Ym[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(a){i[a]=!0}),Ym[e.key]={},Ym[e.key][t]=i}});function v5(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:kn.merge(e,t)}var Jg={};Jg=function(e,t,i){t=kn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Ym,deduplicator:v5},t);var a;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?a=m(e):a=c(e),a;function c(S){var C=new Array,k=new Array,b=new Array;function I(X){var G=kn.clone(X);G.lat=X.center.lat,G.lon=X.center.lon,G.__is_center_placeholder=!0,C.push(G)}function R(X){var G=kn.clone(X);G.nodes=[];function E(j,L,ee){var Z={type:"node",id:"_"+G.type+"/"+G.id+"bounds"+ee,lat:j,lon:L};G.nodes.push(Z.id),C.push(Z)}E(G.bounds.minlat,G.bounds.minlon,1),E(G.bounds.maxlat,G.bounds.minlon,2),E(G.bounds.maxlat,G.bounds.maxlon,3),E(G.bounds.minlat,G.bounds.maxlon,4),G.nodes.push(G.nodes[0]),G.__is_bounds_placeholder=!0,k.push(G)}function B(X){function G(E,j,L){var ee={type:"node",id:L,lat:E,lon:j};C.push(ee)}kn.isArray(X.nodes)||(X.nodes=X.geometry.map(function(E){return E!==null?"_anonymous@"+E.lat+"/"+E.lon:"_anonymous@unknown_location"})),X.geometry.forEach(function(E,j){E&&G(E.lat,E.lon,X.nodes[j])})}function O(X){function G(j,L,ee){var Z={type:"node",id:ee,lat:j,lon:L};C.push(Z)}function E(j,L){if(k.some(function(ve){return ve.type=="way"&&ve.id==L}))return;var ee={type:"way",id:L,nodes:[]};function Z(ve,_e){var pe={type:"node",id:"_anonymous@"+ve+"/"+_e,lat:ve,lon:_e};ee.nodes.push(pe.id),C.push(pe)}j.forEach(function(ve){ve?Z(ve.lat,ve.lon):ee.nodes.push(void 0)}),k.push(ee)}X.members.forEach(function(j,L){j.type=="node"?j.lat&&G(j.lat,j.lon,j.ref):j.type=="way"&&j.geometry&&(j.ref="_fullGeom"+j.ref,E(j.geometry,j.ref))})}for(var he=0;he<S.elements.length;he++)switch(S.elements[he].type){case"node":var Y=S.elements[he];C.push(Y);break;case"way":var q=kn.clone(S.elements[he]);q.nodes=kn.clone(q.nodes),k.push(q),q.center&&I(q),q.geometry?B(q):q.bounds&&R(q);break;case"relation":var V=kn.clone(S.elements[he]);V.members=kn.clone(V.members),b.push(V);var se=V.members&&V.members.some(function(X){return X.type=="node"&&X.lat||X.type=="way"&&X.geometry&&X.geometry.length>0});V.center&&I(V),se?O(V):V.bounds&&R(V);break}return f(C,k,b)}function m(S){var C=new Array,k=new Array,b=new Array;function I(V,se,X){V.hasAttribute(X)&&(se[X]=V.getAttribute(X))}function R(V,se){var X=kn.clone(V);I(se,X,"lat"),I(se,X,"lon"),X.__is_center_placeholder=!0,C.push(X)}function B(V,se){var X=kn.clone(V);X.nodes=[];function G(E,j,L){var ee={type:"node",id:"_"+X.type+"/"+X.id+"bounds"+L,lat:E,lon:j};X.nodes.push(ee.id),C.push(ee)}G(se.getAttribute("minlat"),se.getAttribute("minlon"),1),G(se.getAttribute("maxlat"),se.getAttribute("minlon"),2),G(se.getAttribute("maxlat"),se.getAttribute("maxlon"),3),G(se.getAttribute("minlat"),se.getAttribute("maxlon"),4),X.nodes.push(X.nodes[0]),X.__is_bounds_placeholder=!0,k.push(X)}function O(V,se){function X(G,E,j){var L={type:"node",id:j,lat:G,lon:E};return C.push(L),L.id}kn.isArray(V.nodes)||(V.nodes=[],kn.each(se,function(G,E){V.nodes.push("_anonymous@"+G.getAttribute("lat")+"/"+G.getAttribute("lon"))})),kn.each(se,function(G,E){G.getAttribute("lat")&&X(G.getAttribute("lat"),G.getAttribute("lon"),V.nodes[E])})}function he(V,se){function X(E,j,L){var ee={type:"node",id:L,lat:E,lon:j};C.push(ee)}function G(E,j){if(k.some(function(Z){return Z.type=="way"&&Z.id==j}))return;var L={type:"way",id:j,nodes:[]};function ee(Z,ve){var _e={type:"node",id:"_anonymous@"+Z+"/"+ve,lat:Z,lon:ve};L.nodes.push(_e.id),C.push(_e)}kn.each(E,function(Z){Z.getAttribute("lat")?ee(Z.getAttribute("lat"),Z.getAttribute("lon")):L.nodes.push(void 0)}),k.push(L)}kn.each(se,function(E,j){V.members[j].type=="node"?E.getAttribute("lat")&&X(E.getAttribute("lat"),E.getAttribute("lon"),V.members[j].ref):V.members[j].type=="way"&&E.getElementsByTagName("nd").length>0&&(V.members[j].ref="_fullGeom"+V.members[j].ref,G(E.getElementsByTagName("nd"),V.members[j].ref))})}kn.each(S.getElementsByTagName("node"),function(V,se){var X={};kn.each(V.getElementsByTagName("tag"),function(E){X[E.getAttribute("k")]=E.getAttribute("v")});var G={type:"node"};I(V,G,"id"),I(V,G,"lat"),I(V,G,"lon"),I(V,G,"version"),I(V,G,"timestamp"),I(V,G,"changeset"),I(V,G,"uid"),I(V,G,"user"),kn.isEmpty(X)||(G.tags=X),C.push(G)});var Y,q;return kn.each(S.getElementsByTagName("way"),function(V,se){var X={},G=[];kn.each(V.getElementsByTagName("tag"),function(L){X[L.getAttribute("k")]=L.getAttribute("v")});var E=!1;kn.each(V.getElementsByTagName("nd"),function(L,ee){var Z;(Z=L.getAttribute("ref"))&&(G[ee]=Z),!E&&L.getAttribute("lat")&&(E=!0)});var j={type:"way"};I(V,j,"id"),I(V,j,"version"),I(V,j,"timestamp"),I(V,j,"changeset"),I(V,j,"uid"),I(V,j,"user"),G.length>0&&(j.nodes=G),kn.isEmpty(X)||(j.tags=X),(Y=V.getElementsByTagName("center")[0])&&R(j,Y),E?O(j,V.getElementsByTagName("nd")):(q=V.getElementsByTagName("bounds")[0])&&B(j,q),k.push(j)}),kn.each(S.getElementsByTagName("relation"),function(V,se){var X={},G=[];kn.each(V.getElementsByTagName("tag"),function(L){X[L.getAttribute("k")]=L.getAttribute("v")});var E=!1;kn.each(V.getElementsByTagName("member"),function(L,ee){G[ee]={},I(L,G[ee],"ref"),I(L,G[ee],"role"),I(L,G[ee],"type"),(!E&&G[ee].type=="node"&&L.getAttribute("lat")||G[ee].type=="way"&&L.getElementsByTagName("nd").length>0)&&(E=!0)});var j={type:"relation"};I(V,j,"id"),I(V,j,"version"),I(V,j,"timestamp"),I(V,j,"changeset"),I(V,j,"uid"),I(V,j,"user"),G.length>0&&(j.members=G),kn.isEmpty(X)||(j.tags=X),(Y=V.getElementsByTagName("center")[0])&&R(j,Y),E?he(j,V.getElementsByTagName("member")):(q=V.getElementsByTagName("bounds")[0])&&B(j,q),b.push(j)}),f(C,k,b)}function f(S,C,k){function b(ze,qe){if(typeof qe!="object"&&(qe={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ze,qe);for(var He in ze)if(t.uninterestingTags[He]!==!0&&!(qe[He]===!0||qe[He]===ze[He]))return!0;return!1}function I(ze){var qe={timestamp:ze.timestamp,version:ze.version,changeset:ze.changeset,user:ze.user,uid:ze.uid};for(var He in qe)qe[He]===void 0&&delete qe[He];return qe}for(var R=new Object,B=new Object,O=0;O<S.length;O++){var he=S[O];R[he.id]!==void 0&&(he=t.deduplicator(he,R[he.id])),R[he.id]=he,typeof he.tags<"u"&&b(he.tags)&&(B[he.id]=!0)}for(var O=0;O<k.length;O++)if(kn.isArray(k[O].members))for(var Y=0;Y<k[O].members.length;Y++)k[O].members[Y].type=="node"&&(B[k[O].members[Y].ref]=!0);for(var q=new Object,V=new Object,O=0;O<C.length;O++){var se=C[O];if(q[se.id]&&(se=t.deduplicator(se,q[se.id])),q[se.id]=se,kn.isArray(se.nodes))for(var Y=0;Y<se.nodes.length;Y++)typeof se.nodes[Y]!="object"&&(V[se.nodes[Y]]=!0,se.nodes[Y]=R[se.nodes[Y]])}var X=new Array;for(var G in R){var he=R[G];(!V[G]||B[G])&&X.push(he)}for(var E=new Array,O=0;O<k.length;O++){var j=k[O];E[j.id]&&(j=t.deduplicator(j,E[j.id])),E[j.id]=j}var L={node:{},way:{},relation:{}};for(var G in E){var j=E[G];if(!kn.isArray(j.members)){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"ignored because it has no members");continue}for(var Y=0;Y<j.members.length;Y++){var ee=j.members[Y].type,Z=j.members[Y].ref;if(typeof Z!="number"&&(Z=Z.replace("_fullGeom","")),!L[ee]){t.verbose&&console.warn("Relation",j.type+"/"+j.id,"member",ee+"/"+Z,"ignored because it has an invalid type");continue}typeof L[ee][Z]>"u"&&(L[ee][Z]=[]),L[ee][Z].push({role:j.members[Y].role,rel:j.id,reltags:j.tags})}}var ve,_e=[];for(O=0;O<X.length;O++){if(typeof X[O].lon>"u"||typeof X[O].lat>"u"){t.verbose&&console.warn("POI",X[O].type+"/"+X[O].id,"ignored because it lacks coordinates");continue}var pe={type:"Feature",id:X[O].type+"/"+X[O].id,properties:{type:X[O].type,id:X[O].id,tags:X[O].tags||{},relations:L.node[X[O].id]||[],meta:I(X[O])},geometry:{type:"Point",coordinates:[+X[O].lon,+X[O].lat]}};X[O].__is_center_placeholder&&(pe.properties.geometry="center"),i?i(pe):_e.push(pe)}for(var oe=[],ce=[],O=0;O<k.length;O++)if(E[k[O].id]===k[O]){if(typeof k[O].tags<"u"&&(k[O].tags.type=="route"||k[O].tags.type=="waterway")){let qe=function(He){var ot=!1,ht;ht=He.members.filter(function(wt){return wt.type==="way"}),ht=ht.map(function(wt){var Ht=q[wt.ref];if(Ht===void 0||Ht.nodes===void 0){t.verbose&&console.warn("Route "+He.type+"/"+He.id,"tainted by a missing or incomplete  way",wt.type+"/"+wt.ref),ot=!0;return}return{id:wt.ref,role:wt.role,way:Ht,nodes:Ht.nodes.filter(function(Lt){return Lt!==void 0?!0:(ot=!0,t.verbose&&console.warn("Route",He.type+"/"+He.id,"tainted by a way",wt.type+"/"+wt.ref,"with a missing node"),!1)})}}),ht=kn.compact(ht);var xt;xt=bv(ht);var kt=[];if(kt=kn.compact(xt.map(function(wt){return kn.compact(wt.map(function(Ht){return[+Ht.lon,+Ht.lat]}))})),kt.length==0)return t.verbose&&console.warn("Route",He.type+"/"+He.id,"contains no coordinates"),!1;var pt={type:"Feature",id:He.type+"/"+He.id,properties:{type:He.type,id:He.id,tags:He.tags||{},relations:L[He.type][He.id]||[],meta:I(He)},geometry:{type:kt.length===1?"LineString":"MultiLineString",coordinates:kt.length===1?kt[0]:kt}};return ot&&(t.verbose&&console.warn("Route",He.type+"/"+He.id,"is tainted"),pt.properties.tainted=!0),pt};var Ne=qe;if(!kn.isArray(k[O].members)){t.verbose&&console.warn("Route",k[O].type+"/"+k[O].id,"ignored because it has no members");continue}if(k[O].members.forEach(function(He){q[He.ref]&&!b(q[He.ref].tags)&&(q[He.ref].is_skippablerelationmember=!0)}),pe=qe(k[O]),pe===!1){t.verbose&&console.warn("Route relation",k[O].type+"/"+k[O].id,"ignored because it has invalid geometry");continue}i?i(km(pe)):ce.push(pe)}if(typeof k[O].tags<"u"&&(k[O].tags.type=="multipolygon"||k[O].tags.type=="boundary")){let He=function(ot,ht){var xt=!1,kt=ne?"way":"relation",pt=typeof ot.id=="number"?ot.id:+ot.id.replace("_fullGeom",""),wt;wt=ht.members.filter(function(D){return D.type==="way"}),wt=wt.map(function(D){var xe=q[D.ref];if(xe===void 0||xe.nodes===void 0){t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"tainted by a missing or incomplete way",D.type+"/"+D.ref),xt=!0;return}return{id:D.ref,role:D.role||"outer",way:xe,nodes:xe.nodes.filter(function(Xe){return Xe!==void 0?!0:(xt=!0,t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"tainted by a way",D.type+"/"+D.ref,"with a missing node"),!1)})}}),wt=kn.compact(wt);var Ht,Lt;Ht=bv(wt.filter(function(D){return D.role==="outer"})),Lt=bv(wt.filter(function(D){return D.role==="inner"}));var cn;function it(D){var xe=function(M,U){for(var Ee=0;Ee<U.length;Ee++)if(tt(U[Ee],M))return!0;return!1},Xe=function(M){return M.map(function(U){return[+U.lat,+U.lon]})},tt=function(M,U){for(var Ee=M[0],We=M[1],rt=!1,Ve=0,Et=U.length-1;Ve<U.length;Et=Ve++){var zt=U[Ve][0],pn=U[Ve][1],Sn=U[Et][0],Ft=U[Et][1],Dr=pn>We!=Ft>We&&Ee<(Sn-zt)*(We-pn)/(Ft-pn)+zt;Dr&&(rt=!rt)}return rt},ct,ae;for(D=Xe(D),ct=0;ct<Ht.length;ct++)if(ae=Xe(Ht[ct]),xe(ae,D))return ct}cn=Ht.map(function(D){return[D]});for(var bn=0;bn<Lt.length;bn++){var hn=it(Lt[bn]);hn!==void 0?cn[hn].push(Lt[bn]):t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains an inner ring with no containing outer")}var qt=[];if(qt=kn.compact(cn.map(function(D){var xe=kn.compact(D.map(function(Xe){if(Xe.length<4){t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains a ring with less than four nodes");return}return kn.compact(Xe.map(function(tt){return[+tt.lon,+tt.lat]}))}));if(xe.length==0){t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains an empty ring cluster");return}return xe})),qt.length==0)return t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"contains no coordinates"),!1;var Se="MultiPolygon";qt.length===1&&(Se="Polygon",qt=qt[0]);var N={type:"Feature",id:ot.type+"/"+pt,properties:{type:ot.type,id:pt,tags:ot.tags||{},relations:L[ot.type][ot.id]||[],meta:I(ot)},geometry:{type:Se,coordinates:qt}};return xt&&(t.verbose&&console.warn("Multipolygon",kt+"/"+pt,"is tainted"),N.properties.tainted=!0),N};var Pe=He;if(!kn.isArray(k[O].members)){t.verbose&&console.warn("Multipolygon",k[O].type+"/"+k[O].id,"ignored because it has no members");continue}for(var J=0,Y=0;Y<k[O].members.length;Y++)k[O].members[Y].role=="outer"?J++:t.verbose&&k[O].members[Y].role!="inner"&&console.warn("Multipolygon",k[O].type+"/"+k[O].id,"member",k[O].members[Y].type+"/"+k[O].members[Y].ref,'ignored because it has an invalid role: "'+k[O].members[Y].role+'"');if(k[O].members.forEach(function(ot){q[ot.ref]&&(ot.role==="outer"&&!b(q[ot.ref].tags,k[O].tags)&&(q[ot.ref].is_skippablerelationmember=!0),ot.role==="inner"&&!b(q[ot.ref].tags)&&(q[ot.ref].is_skippablerelationmember=!0))}),J==0){t.verbose&&console.warn("Multipolygon relation",k[O].type+"/"+k[O].id,"ignored because it has no outer ways");continue}var ne=!1;J==1&&!b(k[O].tags,{type:!0})&&(ne=!0);var pe=null;if(!ne)pe=He(k[O],k[O]);else{var de=k[O].members.filter(function(ot){return ot.role==="outer"})[0];if(de=q[de.ref],de===void 0){t.verbose&&console.warn("Multipolygon relation",k[O].type+"/"+k[O].id,"ignored because outer way",de.type+"/"+de.ref,"is missing");continue}de.is_skippablerelationmember=!0,pe=He(de,k[O])}if(pe===!1){t.verbose&&console.warn("Multipolygon relation",k[O].type+"/"+k[O].id,"ignored because it has invalid geometry");continue}i?i(km(pe)):ce.push(pe)}}for(var O=0;O<C.length;O++)if(q[C[O].id]===C[O]){if(!kn.isArray(C[O].nodes)){t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"ignored because it has no nodes");continue}if(!C[O].is_skippablerelationmember){typeof C[O].id!="number"&&(C[O].id=+C[O].id.replace("_fullGeom","")),C[O].tainted=!1,C[O].hidden=!1;var we=new Array;for(Y=0;Y<C[O].nodes.length;Y++)typeof C[O].nodes[Y]=="object"?we.push([+C[O].nodes[Y].lon,+C[O].nodes[Y].lat]):(t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"is tainted by an invalid node"),C[O].tainted=!0);if(we.length<=1){t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"ignored because it contains too few nodes");continue}var Te="LineString";typeof C[O].nodes[0]<"u"&&typeof C[O].nodes[C[O].nodes.length-1]<"u"&&C[O].nodes[0].id===C[O].nodes[C[O].nodes.length-1].id&&(typeof C[O].tags<"u"&&u(C[O].tags)||C[O].__is_bounds_placeholder)&&(Te="Polygon",we=[we]);var pe={type:"Feature",id:C[O].type+"/"+C[O].id,properties:{type:C[O].type,id:C[O].id,tags:C[O].tags||{},relations:L.way[C[O].id]||[],meta:I(C[O])},geometry:{type:Te,coordinates:we}};C[O].tainted&&(t.verbose&&console.warn("Way",C[O].type+"/"+C[O].id,"is tainted"),pe.properties.tainted=!0),C[O].__is_bounds_placeholder&&(pe.properties.geometry="bounds"),i?i(km(pe)):Te=="LineString"?oe.push(pe):ce.push(pe)}}return i?!0:(ve={type:"FeatureCollection",features:[]},ve.features=ve.features.concat(ce),ve.features=ve.features.concat(oe),ve.features=ve.features.concat(_e),t.flatProperties&&ve.features.forEach(function(ze){ze.properties=kn.merge(ze.properties.meta,ze.properties.tags,{id:ze.properties.type+"/"+ze.properties.id})}),ve=km(ve),ve)}function u(S){var C=t.polygonFeatures;if(typeof C=="function")return C(S);if(S.area==="no")return!1;for(var k in S){var b=S[k],I=C[k];if(!(typeof I>"u")&&b!=="no"&&(I===!0||I.included_values&&I.included_values[b]===!0||I.excluded_values&&I.excluded_values[b]!==!0))return!0}return!1}};function bv(e){for(var t=function(b){return b[0]},i=function(b){return b[b.length-1]},a=function(b,I){return b!==void 0&&I!==void 0&&b.id===I.id},c=[],m,f,u,S,C,k;e.length;)for(m=e.pop().nodes.slice(),c.push(m);e.length&&!a(t(m),i(m));){for(f=t(m),u=i(m),S=0;S<e.length;S++)if(k=e[S].nodes,a(u,t(k))){C=m.push,k=k.slice(1);break}else if(a(u,i(k))){C=m.push,k=k.slice(0,-1).reverse();break}else if(a(f,i(k))){C=m.unshift,k=k.slice(0,-1);break}else if(a(f,t(k))){C=m.unshift,k=k.slice(1).reverse();break}else k=C=null;if(!k)break;e.splice(S,1),C.apply(m,k)}return c}Jg.toGeojson=Jg;var _5=Jg;const x5=qf(_5),Sv={type:"FeatureCollection",features:[]},HP=()=>{const[e,t]=vt.useState(!1),i=vt.useCallback(async(f,u,S)=>{var O,he;if(e||(console.log(S),S<16))return Sv;t(!0);let C=300;S>17&&(C=200),S>18&&(C=100),S>19&&(C=50),console.log("overpass: loading...");let k="[out:json]";k+=`[timeout:25];
`,k+='nwr["building"]',k+=`(around:${C},${f},${u});
`,k+="out meta geom;",console.log(k);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(k)}`,{});if(b.status!==200)return t(!1),Sv;const I=await b.json();console.log("overpass json elements: ",I.elements);const R=x5(I);console.log("overpass osmtogeojson raw: ",R);for await(const Y of R.features){if(!Y.properties)continue;Y.id=Y.properties.id.split("/")[1];const q=(O=I.elements.filter(se=>Y.id?typeof Y.id=="number"?se.id===Y.id:se.id===parseInt(Y.id):!1))==null?void 0:O[0];if(q&&(Y.properties.tags=q.tags,Y.properties.nodes=q.nodes),Y.geometry.type==="Polygon"){const se=o5(Y.geometry.coordinates);var B=c5(se);Y.properties.center=B.geometry.coordinates}Y.geometry.type==="Point"&&(Y.properties.center=Y.geometry.coordinates);const V=Y.properties.uid;if(V){let se=localStorage.getItem(V+"-icon");if(se===null){const X=await Fs.getUser(V);(he=X.img)!=null&&he.href?(se=X.img.href,localStorage.setItem(V+"-icon",X.img.href)):localStorage.setItem(V+"-icon","")}Y.properties.userIconHref=se||""}}return console.log("overpass osmtogeojson converted: ",R),console.log("overpass: loaded."),t(!1),R},[]),[a,c]=vt.useState(!1),m=vt.useCallback(async f=>{console.log("overpass: loading...",f),c(!0);const u=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(u);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(u)}`,{});if(S.status!==200){c(!1);return}const C=await S.json();console.log("overpass json parent elements: ",C.elements);const k=250,b=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${k});
      out;
      `;console.log(b);const I=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(b)}`,{});if(I.status!==200){c(!1);return}const R=await I.json();console.log("overpass json child elements: ",R.elements);const B=`
      [out:json]
      [timeout:25];
      node(id:${f.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${k});
      out;
      `;console.log(B);const O=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(B)}`,{});if(O.status!==200){c(!1);return}const he=await O.json();return console.log("overpass json neighbour elements: ",he.elements),c(!1),[...C.elements,...R.elements,...he.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:m,loadingOverpass:e,loadingOverpassAdmin:a}},w5=()=>yt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[yt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),yt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),yt.jsxs("datalist",{id:"source-list",children:[yt.jsx("option",{value:"survey"}),yt.jsx("option",{value:"local knowledge"}),yt.jsx("option",{value:"extrapolation"}),yt.jsx("option",{value:"estimation from existing data"})]})]}),Ev={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},b5=({feature:e,onCancel:t,onSubmit:i})=>{var ve,_e,pe,oe;const{detectCountry:a,loadingCountry:c}=h5(),{fetchOverpassAdmin:m,loadingOverpassAdmin:f}=HP(),u=JSON.parse((ve=e.properties)==null?void 0:ve.center),[S,C]=vt.useState(void 0),[k,b]=vt.useState(),[I,R]=vt.useState(e),[B,O]=vt.useState(!1),[he,Y]=vt.useState(!1),[q,V]=vt.useState(!1),[se,X]=vt.useState(),[G,E]=vt.useState();vt.useEffect(()=>{O(Fs.isLoggedIn())},[]),vt.useEffect(()=>{(async()=>{var J,ne;const ce=await a(u[0],u[1]);if(C(ce),(J=ce==null?void 0:ce.properties)!=null&&J.ISO_A3&&TE[ce.properties.ISO_A3]){const de=TE[ce.properties.ISO_A3];b(de);const we=de.defaultComment+" "+((ne=e.properties)==null?void 0:ne.id);E(we)}})()},[e]),vt.useEffect(()=>{console.log(I.properties)},[I]);const j=vt.useCallback(async()=>{const ce=await MC.openReverseGeocoder([u[0],u[1]]);R(J=>{const ne={properties:{"addr:province":ce.prefecture,"addr:city":ce.city,...J.properties}};return J.properties=ne.properties,J})},[]),L=vt.useCallback(async()=>{if(!I.properties)return;I.properties.nodes;const ce=await m(JSON.parse(I.properties.nodes));console.log("onOverpassReverseGeocode",ce),X(ce)},[I]),ee=vt.useCallback(async ce=>{var Pe,ze,qe;V(!0),ce.preventDefault();const J=new FormData(ce.currentTarget),ne=JSON.parse((Pe=e.properties)==null?void 0:Pe.tags);J.forEach((He,ot)=>{typeof He=="string"&&He.length>0&&ot!=="comment"&&ot!=="source"&&(ne[ot]=He)});const de={type:"way",id:e.id,version:(ze=e.properties)==null?void 0:ze.version,tags:ne,nodes:JSON.parse((qe=e.properties)==null?void 0:qe.nodes)};console.info(JSON.stringify(de,null,2));const we={create:[],modify:[de],delete:[]},Te=J.get("comment");Te&&(Ev.comment=Te.toString());const Ne=J.get("source");Ne&&(Ev.source=Ne.toString()),await Fs.uploadChangeset(Ev,we),V(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),Z=vt.useCallback(()=>{Y(!0)},[]);return I.properties?yt.jsxs("div",{children:[yt.jsxs("div",{children:["OSM:"," ",yt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+I.properties.id,target:"_blank",children:I.properties.id})," | ",yt.jsx(PC,{feature:I}),k&&yt.jsxs("span",{children:[" | ","Address:"," ",yt.jsx(d5,{feature:I,fields:k})]})]}),c?yt.jsx(tu,{icon:z_,spin:!0}):yt.jsx(yt.Fragment,{children:k?yt.jsxs("form",{onSubmit:ee,children:[yt.jsx("div",{className:"flex flex-wrap",children:yt.jsx(wv,{feature:I,fieldOption:k.postcodeField,onChange:Z})}),yt.jsx("div",{className:"flex flex-wrap",children:k.mainFields.map(ce=>yt.jsx(wv,{feature:I,fieldOption:ce,onChange:Z,suggestList:se},ce.key))}),yt.jsx("div",{className:"flex flex-wrap",children:k.detailFields.map(ce=>yt.jsx(wv,{feature:I,fieldOption:ce,onChange:Z},ce.key))}),yt.jsxs("div",{className:"flex flex-wrap",children:[yt.jsx(w5,{}),yt.jsx(f5,{defaultValue:G})]}),yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=S==null?void 0:S.properties)==null?void 0:_e.ISO_A3)==="JPN"&&yt.jsx("button",{type:"button",onClick:j,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),yt.jsxs("button",{type:"button",disabled:f,onClick:L,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",f&&yt.jsx(tu,{icon:z_,spin:!0})]}),yt.jsx("button",{disabled:!B||q||!he,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!B&&yt.jsxs(yt.Fragment,{children:[yt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),yt.jsx(CC,{})]})]})})]}):yt.jsx("div",{className:"flex flex-wrap",children:yt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[yt.jsxs("div",{className:"py-2",children:[yt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(pe=S==null?void 0:S.properties)==null?void 0:pe.NAME," (ISO code:",(oe=S==null?void 0:S.properties)==null?void 0:oe.ISO_A3,") does not support yet."]}),yt.jsx("p",{children:yt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),yt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function S5(e,t){const[i,a]=vt.useState(e);return vt.useEffect(()=>{const c=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const E5={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},T5={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function I5(){const e=vt.useRef(null),[t,i]=vt.useState(),a=S5(t,2500),c=vt.useRef(null),[m,f]=vt.useState({type:"FeatureCollection",features:[]}),[u,S]=vt.useState("auto"),[C,k]=vt.useState(),[b,I]=vt.useState([]),{fetchOverpassBuildings:R,loadingOverpass:B}=HP();vt.useEffect(()=>{setTimeout(()=>{var E;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(E=c.current)==null||E.trigger())},500)},[]);const O=vt.useCallback(E=>{const j=E.target.getCenter(),L=E.target.getZoom();i({zoom:L,latitude:j.lat,longitude:j.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),he=vt.useCallback(E=>{i(E.viewState)},[]),Y=vt.useCallback(E=>{i(E.viewState)},[]);vt.useEffect(()=>{(async()=>{if(!a)return;const E=a,j=await R(E.latitude,E.longitude,E.zoom);f(j)})()},[a]);const q=vt.useCallback(E=>{var ve;S("pointer");const{features:j,point:{x:L,y:ee}}=E,Z=j&&j[0];Z?((ve=e.current)==null||ve.setFeatureState({source:"buildings-source",id:Z.id},{hover:!0}),k({feature:Z,x:L,y:ee})):k(void 0)},[]),V=vt.useCallback(E=>{var j;S("auto"),(j=e.current)==null||j.querySourceFeatures("buildings-source").map(L=>{var ee;(ee=e.current)==null||ee.setFeatureState({source:"buildings-source",id:L.id},{hover:!1})}),k(void 0)},[]),se=vt.useCallback(E=>{var L;X();const j=E.features&&E.features[0];j&&((L=e.current)==null||L.setFeatureState({source:"buildings-source",id:j.id},{select:!0}),I([j]))},[]),X=vt.useCallback(()=>{var E;(E=e.current)==null||E.querySourceFeatures("buildings-source").map(j=>{var L;(L=e.current)==null||L.setFeatureState({source:"buildings-source",id:j.id},{select:!1})}),I([])},[]),G=vt.useMemo(()=>{let E=25;return t&&(E=t.zoom<18?20:t.zoom<19?25:35),m.features.map((j,L)=>!j.properties||!j.properties.center?null:yt.jsx(J4,{style:{cursor:"pointer"},longitude:j.properties.center[0],latitude:j.properties.center[1],anchor:"center",children:yt.jsx(ER,{feature:j,size:E})},`marker-${L}`))},[m,t]);return yt.jsxs("div",{children:[yt.jsx(iR,{}),yt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:yt.jsx(CR,{viewState:t})}),yt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[b.length>0&&yt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:yt.jsx("div",{style:{padding:"10px"},children:b.map(E=>yt.jsx(b5,{feature:E,onCancel:X,onSubmit:X},E.id))})}),yt.jsxs(Y4,{ref:e,...t,onMove:he,onMoveEnd:Y,onLoad:O,interactiveLayerIds:["buildings-layer-fill"],onClick:se,onMouseEnter:q,onMouseLeave:V,dragRotate:!1,boxZoom:!1,hash:!0,cursor:u,mapLib:HI,style:{width:"100%",height:"100%"},mapStyle:E5,children:[yt.jsx(nz,{id:"buildings-source",type:"geojson",data:m,children:yt.jsx(tz,{...T5})}),yt.jsx(Q4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),yt.jsx(ez,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),yt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?yt.jsx(tu,{size:"2x",icon:nR}):B?yt.jsx(tu,{size:"2x",icon:z_,spin:!0}):yt.jsx(tu,{size:"2x",icon:eR})}),G,C&&yt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:C.x+5,top:C.y+5},children:[yt.jsx(PC,{feature:C.feature}),yt.jsx("br",{}),yt.jsx(TR,{feature:C.feature}),yt.jsx(oR,{feature:C.feature})]})]})]})]})}var ZP={},Cy={};Cy.byteLength=A5;Cy.toByteArray=M5;Cy.fromByteArray=R5;var fa=[],ns=[],C5=typeof Uint8Array<"u"?Uint8Array:Array,Tv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var th=0,P5=Tv.length;th<P5;++th)fa[th]=Tv[th],ns[Tv.charCodeAt(th)]=th;ns[45]=62;ns[95]=63;function qP(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var a=i===t?0:4-i%4;return[i,a]}function A5(e){var t=qP(e),i=t[0],a=t[1];return(i+a)*3/4-a}function k5(e,t,i){return(t+i)*3/4-i}function M5(e){var t,i=qP(e),a=i[0],c=i[1],m=new C5(k5(e,a,c)),f=0,u=c>0?a-4:a,S;for(S=0;S<u;S+=4)t=ns[e.charCodeAt(S)]<<18|ns[e.charCodeAt(S+1)]<<12|ns[e.charCodeAt(S+2)]<<6|ns[e.charCodeAt(S+3)],m[f++]=t>>16&255,m[f++]=t>>8&255,m[f++]=t&255;return c===2&&(t=ns[e.charCodeAt(S)]<<2|ns[e.charCodeAt(S+1)]>>4,m[f++]=t&255),c===1&&(t=ns[e.charCodeAt(S)]<<10|ns[e.charCodeAt(S+1)]<<4|ns[e.charCodeAt(S+2)]>>2,m[f++]=t>>8&255,m[f++]=t&255),m}function z5(e){return fa[e>>18&63]+fa[e>>12&63]+fa[e>>6&63]+fa[e&63]}function F5(e,t,i){for(var a,c=[],m=t;m<i;m+=3)a=(e[m]<<16&16711680)+(e[m+1]<<8&65280)+(e[m+2]&255),c.push(z5(a));return c.join("")}function R5(e){for(var t,i=e.length,a=i%3,c=[],m=16383,f=0,u=i-a;f<u;f+=m)c.push(F5(e,f,f+m>u?u:f+m));return a===1?(t=e[i-1],c.push(fa[t>>2]+fa[t<<4&63]+"==")):a===2&&(t=(e[i-2]<<8)+e[i-1],c.push(fa[t>>10]+fa[t>>4&63]+fa[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Cy,i=by,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=q,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,u.TYPED_ARRAY_SUPPORT=m(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const ae=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(ae,M),ae.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function f(ae){if(ae>c)throw new RangeError('The value "'+ae+'" is invalid for option "size"');const M=new Uint8Array(ae);return Object.setPrototypeOf(M,u.prototype),M}function u(ae,M,U){if(typeof ae=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(ae)}return S(ae,M,U)}u.poolSize=8192;function S(ae,M,U){if(typeof ae=="string")return I(ae,M);if(ArrayBuffer.isView(ae))return B(ae);if(ae==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae);if(D(ae,ArrayBuffer)||ae&&D(ae.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(ae,SharedArrayBuffer)||ae&&D(ae.buffer,SharedArrayBuffer)))return O(ae,M,U);if(typeof ae=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=ae.valueOf&&ae.valueOf();if(Ee!=null&&Ee!==ae)return u.from(Ee,M,U);const We=he(ae);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ae[Symbol.toPrimitive]=="function")return u.from(ae[Symbol.toPrimitive]("string"),M,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ae)}u.from=function(ae,M,U){return S(ae,M,U)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function C(ae){if(typeof ae!="number")throw new TypeError('"size" argument must be of type number');if(ae<0)throw new RangeError('The value "'+ae+'" is invalid for option "size"')}function k(ae,M,U){return C(ae),ae<=0?f(ae):M!==void 0?typeof U=="string"?f(ae).fill(M,U):f(ae).fill(M):f(ae)}u.alloc=function(ae,M,U){return k(ae,M,U)};function b(ae){return C(ae),f(ae<0?0:Y(ae)|0)}u.allocUnsafe=function(ae){return b(ae)},u.allocUnsafeSlow=function(ae){return b(ae)};function I(ae,M){if((typeof M!="string"||M==="")&&(M="utf8"),!u.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const U=V(ae,M)|0;let Ee=f(U);const We=Ee.write(ae,M);return We!==U&&(Ee=Ee.slice(0,We)),Ee}function R(ae){const M=ae.length<0?0:Y(ae.length)|0,U=f(M);for(let Ee=0;Ee<M;Ee+=1)U[Ee]=ae[Ee]&255;return U}function B(ae){if(D(ae,Uint8Array)){const M=new Uint8Array(ae);return O(M.buffer,M.byteOffset,M.byteLength)}return R(ae)}function O(ae,M,U){if(M<0||ae.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(ae.byteLength<M+(U||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return M===void 0&&U===void 0?Ee=new Uint8Array(ae):U===void 0?Ee=new Uint8Array(ae,M):Ee=new Uint8Array(ae,M,U),Object.setPrototypeOf(Ee,u.prototype),Ee}function he(ae){if(u.isBuffer(ae)){const M=Y(ae.length)|0,U=f(M);return U.length===0||ae.copy(U,0,0,M),U}if(ae.length!==void 0)return typeof ae.length!="number"||xe(ae.length)?f(0):R(ae);if(ae.type==="Buffer"&&Array.isArray(ae.data))return R(ae.data)}function Y(ae){if(ae>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return ae|0}function q(ae){return+ae!=ae&&(ae=0),u.alloc(+ae)}u.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==u.prototype},u.compare=function(M,U){if(D(M,Uint8Array)&&(M=u.from(M,M.offset,M.byteLength)),D(U,Uint8Array)&&(U=u.from(U,U.offset,U.byteLength)),!u.isBuffer(M)||!u.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===U)return 0;let Ee=M.length,We=U.length;for(let rt=0,Ve=Math.min(Ee,We);rt<Ve;++rt)if(M[rt]!==U[rt]){Ee=M[rt],We=U[rt];break}return Ee<We?-1:We<Ee?1:0},u.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(M,U){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return u.alloc(0);let Ee;if(U===void 0)for(U=0,Ee=0;Ee<M.length;++Ee)U+=M[Ee].length;const We=u.allocUnsafe(U);let rt=0;for(Ee=0;Ee<M.length;++Ee){let Ve=M[Ee];if(D(Ve,Uint8Array))rt+Ve.length>We.length?(u.isBuffer(Ve)||(Ve=u.from(Ve)),Ve.copy(We,rt)):Uint8Array.prototype.set.call(We,Ve,rt);else if(u.isBuffer(Ve))Ve.copy(We,rt);else throw new TypeError('"list" argument must be an Array of Buffers');rt+=Ve.length}return We};function V(ae,M){if(u.isBuffer(ae))return ae.length;if(ArrayBuffer.isView(ae)||D(ae,ArrayBuffer))return ae.byteLength;if(typeof ae!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ae);const U=ae.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&U===0)return 0;let We=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return bn(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U*2;case"hex":return U>>>1;case"base64":return Se(ae).length;default:if(We)return Ee?-1:bn(ae).length;M=(""+M).toLowerCase(),We=!0}}u.byteLength=V;function se(ae,M,U){let Ee=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0,M>>>=0,U<=M))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return de(this,M,U);case"utf8":case"utf-8":return pe(this,M,U);case"ascii":return J(this,M,U);case"latin1":case"binary":return ne(this,M,U);case"base64":return _e(this,M,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,M,U);default:if(Ee)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),Ee=!0}}u.prototype._isBuffer=!0;function X(ae,M,U){const Ee=ae[M];ae[M]=ae[U],ae[U]=Ee}u.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let U=0;U<M;U+=2)X(this,U,U+1);return this},u.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let U=0;U<M;U+=4)X(this,U,U+3),X(this,U+1,U+2);return this},u.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let U=0;U<M;U+=8)X(this,U,U+7),X(this,U+1,U+6),X(this,U+2,U+5),X(this,U+3,U+4);return this},u.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?pe(this,0,M):se.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(M){if(!u.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:u.compare(this,M)===0},u.prototype.inspect=function(){let M="";const U=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(M+=" ... "),"<Buffer "+M+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(M,U,Ee,We,rt){if(D(M,Uint8Array)&&(M=u.from(M,M.offset,M.byteLength)),!u.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(U===void 0&&(U=0),Ee===void 0&&(Ee=M?M.length:0),We===void 0&&(We=0),rt===void 0&&(rt=this.length),U<0||Ee>M.length||We<0||rt>this.length)throw new RangeError("out of range index");if(We>=rt&&U>=Ee)return 0;if(We>=rt)return-1;if(U>=Ee)return 1;if(U>>>=0,Ee>>>=0,We>>>=0,rt>>>=0,this===M)return 0;let Ve=rt-We,Et=Ee-U;const zt=Math.min(Ve,Et),pn=this.slice(We,rt),Sn=M.slice(U,Ee);for(let Ft=0;Ft<zt;++Ft)if(pn[Ft]!==Sn[Ft]){Ve=pn[Ft],Et=Sn[Ft];break}return Ve<Et?-1:Et<Ve?1:0};function G(ae,M,U,Ee,We){if(ae.length===0)return-1;if(typeof U=="string"?(Ee=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),U=+U,xe(U)&&(U=We?0:ae.length-1),U<0&&(U=ae.length+U),U>=ae.length){if(We)return-1;U=ae.length-1}else if(U<0)if(We)U=0;else return-1;if(typeof M=="string"&&(M=u.from(M,Ee)),u.isBuffer(M))return M.length===0?-1:E(ae,M,U,Ee,We);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(ae,M,U):Uint8Array.prototype.lastIndexOf.call(ae,M,U):E(ae,[M],U,Ee,We);throw new TypeError("val must be string, number or Buffer")}function E(ae,M,U,Ee,We){let rt=1,Ve=ae.length,Et=M.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(ae.length<2||M.length<2)return-1;rt=2,Ve/=2,Et/=2,U/=2}function zt(Sn,Ft){return rt===1?Sn[Ft]:Sn.readUInt16BE(Ft*rt)}let pn;if(We){let Sn=-1;for(pn=U;pn<Ve;pn++)if(zt(ae,pn)===zt(M,Sn===-1?0:pn-Sn)){if(Sn===-1&&(Sn=pn),pn-Sn+1===Et)return Sn*rt}else Sn!==-1&&(pn-=pn-Sn),Sn=-1}else for(U+Et>Ve&&(U=Ve-Et),pn=U;pn>=0;pn--){let Sn=!0;for(let Ft=0;Ft<Et;Ft++)if(zt(ae,pn+Ft)!==zt(M,Ft)){Sn=!1;break}if(Sn)return pn}return-1}u.prototype.includes=function(M,U,Ee){return this.indexOf(M,U,Ee)!==-1},u.prototype.indexOf=function(M,U,Ee){return G(this,M,U,Ee,!0)},u.prototype.lastIndexOf=function(M,U,Ee){return G(this,M,U,Ee,!1)};function j(ae,M,U,Ee){U=Number(U)||0;const We=ae.length-U;Ee?(Ee=Number(Ee),Ee>We&&(Ee=We)):Ee=We;const rt=M.length;Ee>rt/2&&(Ee=rt/2);let Ve;for(Ve=0;Ve<Ee;++Ve){const Et=parseInt(M.substr(Ve*2,2),16);if(xe(Et))return Ve;ae[U+Ve]=Et}return Ve}function L(ae,M,U,Ee){return N(bn(M,ae.length-U),ae,U,Ee)}function ee(ae,M,U,Ee){return N(hn(M),ae,U,Ee)}function Z(ae,M,U,Ee){return N(Se(M),ae,U,Ee)}function ve(ae,M,U,Ee){return N(qt(M,ae.length-U),ae,U,Ee)}u.prototype.write=function(M,U,Ee,We){if(U===void 0)We="utf8",Ee=this.length,U=0;else if(Ee===void 0&&typeof U=="string")We=U,Ee=this.length,U=0;else if(isFinite(U))U=U>>>0,isFinite(Ee)?(Ee=Ee>>>0,We===void 0&&(We="utf8")):(We=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const rt=this.length-U;if((Ee===void 0||Ee>rt)&&(Ee=rt),M.length>0&&(Ee<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let Ve=!1;for(;;)switch(We){case"hex":return j(this,M,U,Ee);case"utf8":case"utf-8":return L(this,M,U,Ee);case"ascii":case"latin1":case"binary":return ee(this,M,U,Ee);case"base64":return Z(this,M,U,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,M,U,Ee);default:if(Ve)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Ve=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(ae,M,U){return M===0&&U===ae.length?t.fromByteArray(ae):t.fromByteArray(ae.slice(M,U))}function pe(ae,M,U){U=Math.min(ae.length,U);const Ee=[];let We=M;for(;We<U;){const rt=ae[We];let Ve=null,Et=rt>239?4:rt>223?3:rt>191?2:1;if(We+Et<=U){let zt,pn,Sn,Ft;switch(Et){case 1:rt<128&&(Ve=rt);break;case 2:zt=ae[We+1],(zt&192)===128&&(Ft=(rt&31)<<6|zt&63,Ft>127&&(Ve=Ft));break;case 3:zt=ae[We+1],pn=ae[We+2],(zt&192)===128&&(pn&192)===128&&(Ft=(rt&15)<<12|(zt&63)<<6|pn&63,Ft>2047&&(Ft<55296||Ft>57343)&&(Ve=Ft));break;case 4:zt=ae[We+1],pn=ae[We+2],Sn=ae[We+3],(zt&192)===128&&(pn&192)===128&&(Sn&192)===128&&(Ft=(rt&15)<<18|(zt&63)<<12|(pn&63)<<6|Sn&63,Ft>65535&&Ft<1114112&&(Ve=Ft))}}Ve===null?(Ve=65533,Et=1):Ve>65535&&(Ve-=65536,Ee.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),Ee.push(Ve),We+=Et}return ce(Ee)}const oe=4096;function ce(ae){const M=ae.length;if(M<=oe)return String.fromCharCode.apply(String,ae);let U="",Ee=0;for(;Ee<M;)U+=String.fromCharCode.apply(String,ae.slice(Ee,Ee+=oe));return U}function J(ae,M,U){let Ee="";U=Math.min(ae.length,U);for(let We=M;We<U;++We)Ee+=String.fromCharCode(ae[We]&127);return Ee}function ne(ae,M,U){let Ee="";U=Math.min(ae.length,U);for(let We=M;We<U;++We)Ee+=String.fromCharCode(ae[We]);return Ee}function de(ae,M,U){const Ee=ae.length;(!M||M<0)&&(M=0),(!U||U<0||U>Ee)&&(U=Ee);let We="";for(let rt=M;rt<U;++rt)We+=Xe[ae[rt]];return We}function we(ae,M,U){const Ee=ae.slice(M,U);let We="";for(let rt=0;rt<Ee.length-1;rt+=2)We+=String.fromCharCode(Ee[rt]+Ee[rt+1]*256);return We}u.prototype.slice=function(M,U){const Ee=this.length;M=~~M,U=U===void 0?Ee:~~U,M<0?(M+=Ee,M<0&&(M=0)):M>Ee&&(M=Ee),U<0?(U+=Ee,U<0&&(U=0)):U>Ee&&(U=Ee),U<M&&(U=M);const We=this.subarray(M,U);return Object.setPrototypeOf(We,u.prototype),We};function Te(ae,M,U){if(ae%1!==0||ae<0)throw new RangeError("offset is not uint");if(ae+M>U)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Te(M,U,this.length);let We=this[M],rt=1,Ve=0;for(;++Ve<U&&(rt*=256);)We+=this[M+Ve]*rt;return We},u.prototype.readUintBE=u.prototype.readUIntBE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Te(M,U,this.length);let We=this[M+--U],rt=1;for(;U>0&&(rt*=256);)We+=this[M+--U]*rt;return We},u.prototype.readUint8=u.prototype.readUInt8=function(M,U){return M=M>>>0,U||Te(M,1,this.length),this[M]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(M,U){return M=M>>>0,U||Te(M,2,this.length),this[M]|this[M+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(M,U){return M=M>>>0,U||Te(M,2,this.length),this[M]<<8|this[M+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(M,U){return M=M>>>0,U||Te(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(M,U){return M=M>>>0,U||Te(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},u.prototype.readBigUInt64LE=tt(function(M){M=M>>>0,Ht(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Lt(M,this.length-8);const We=U+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,rt=this[++M]+this[++M]*2**8+this[++M]*2**16+Ee*2**24;return BigInt(We)+(BigInt(rt)<<BigInt(32))}),u.prototype.readBigUInt64BE=tt(function(M){M=M>>>0,Ht(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Lt(M,this.length-8);const We=U*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],rt=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+Ee;return(BigInt(We)<<BigInt(32))+BigInt(rt)}),u.prototype.readIntLE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Te(M,U,this.length);let We=this[M],rt=1,Ve=0;for(;++Ve<U&&(rt*=256);)We+=this[M+Ve]*rt;return rt*=128,We>=rt&&(We-=Math.pow(2,8*U)),We},u.prototype.readIntBE=function(M,U,Ee){M=M>>>0,U=U>>>0,Ee||Te(M,U,this.length);let We=U,rt=1,Ve=this[M+--We];for(;We>0&&(rt*=256);)Ve+=this[M+--We]*rt;return rt*=128,Ve>=rt&&(Ve-=Math.pow(2,8*U)),Ve},u.prototype.readInt8=function(M,U){return M=M>>>0,U||Te(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},u.prototype.readInt16LE=function(M,U){M=M>>>0,U||Te(M,2,this.length);const Ee=this[M]|this[M+1]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt16BE=function(M,U){M=M>>>0,U||Te(M,2,this.length);const Ee=this[M+1]|this[M]<<8;return Ee&32768?Ee|4294901760:Ee},u.prototype.readInt32LE=function(M,U){return M=M>>>0,U||Te(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},u.prototype.readInt32BE=function(M,U){return M=M>>>0,U||Te(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},u.prototype.readBigInt64LE=tt(function(M){M=M>>>0,Ht(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Lt(M,this.length-8);const We=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(Ee<<24);return(BigInt(We)<<BigInt(32))+BigInt(U+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),u.prototype.readBigInt64BE=tt(function(M){M=M>>>0,Ht(M,"offset");const U=this[M],Ee=this[M+7];(U===void 0||Ee===void 0)&&Lt(M,this.length-8);const We=(U<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(We)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+Ee)}),u.prototype.readFloatLE=function(M,U){return M=M>>>0,U||Te(M,4,this.length),i.read(this,M,!0,23,4)},u.prototype.readFloatBE=function(M,U){return M=M>>>0,U||Te(M,4,this.length),i.read(this,M,!1,23,4)},u.prototype.readDoubleLE=function(M,U){return M=M>>>0,U||Te(M,8,this.length),i.read(this,M,!0,52,8)},u.prototype.readDoubleBE=function(M,U){return M=M>>>0,U||Te(M,8,this.length),i.read(this,M,!1,52,8)};function Ne(ae,M,U,Ee,We,rt){if(!u.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>We||M<rt)throw new RangeError('"value" argument is out of bounds');if(U+Ee>ae.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(M,U,Ee,We){if(M=+M,U=U>>>0,Ee=Ee>>>0,!We){const Et=Math.pow(2,8*Ee)-1;Ne(this,M,U,Ee,Et,0)}let rt=1,Ve=0;for(this[U]=M&255;++Ve<Ee&&(rt*=256);)this[U+Ve]=M/rt&255;return U+Ee},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(M,U,Ee,We){if(M=+M,U=U>>>0,Ee=Ee>>>0,!We){const Et=Math.pow(2,8*Ee)-1;Ne(this,M,U,Ee,Et,0)}let rt=Ee-1,Ve=1;for(this[U+rt]=M&255;--rt>=0&&(Ve*=256);)this[U+rt]=M/Ve&255;return U+Ee},u.prototype.writeUint8=u.prototype.writeUInt8=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,1,255,0),this[U]=M&255,U+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,2,65535,0),this[U]=M&255,this[U+1]=M>>>8,U+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,2,65535,0),this[U]=M>>>8,this[U+1]=M&255,U+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,4,4294967295,0),this[U+3]=M>>>24,this[U+2]=M>>>16,this[U+1]=M>>>8,this[U]=M&255,U+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,4,4294967295,0),this[U]=M>>>24,this[U+1]=M>>>16,this[U+2]=M>>>8,this[U+3]=M&255,U+4};function Pe(ae,M,U,Ee,We){wt(M,Ee,We,ae,U,7);let rt=Number(M&BigInt(4294967295));ae[U++]=rt,rt=rt>>8,ae[U++]=rt,rt=rt>>8,ae[U++]=rt,rt=rt>>8,ae[U++]=rt;let Ve=Number(M>>BigInt(32)&BigInt(4294967295));return ae[U++]=Ve,Ve=Ve>>8,ae[U++]=Ve,Ve=Ve>>8,ae[U++]=Ve,Ve=Ve>>8,ae[U++]=Ve,U}function ze(ae,M,U,Ee,We){wt(M,Ee,We,ae,U,7);let rt=Number(M&BigInt(4294967295));ae[U+7]=rt,rt=rt>>8,ae[U+6]=rt,rt=rt>>8,ae[U+5]=rt,rt=rt>>8,ae[U+4]=rt;let Ve=Number(M>>BigInt(32)&BigInt(4294967295));return ae[U+3]=Ve,Ve=Ve>>8,ae[U+2]=Ve,Ve=Ve>>8,ae[U+1]=Ve,Ve=Ve>>8,ae[U]=Ve,U+8}u.prototype.writeBigUInt64LE=tt(function(M,U=0){return Pe(this,M,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=tt(function(M,U=0){return ze(this,M,U,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(M,U,Ee,We){if(M=+M,U=U>>>0,!We){const zt=Math.pow(2,8*Ee-1);Ne(this,M,U,Ee,zt-1,-zt)}let rt=0,Ve=1,Et=0;for(this[U]=M&255;++rt<Ee&&(Ve*=256);)M<0&&Et===0&&this[U+rt-1]!==0&&(Et=1),this[U+rt]=(M/Ve>>0)-Et&255;return U+Ee},u.prototype.writeIntBE=function(M,U,Ee,We){if(M=+M,U=U>>>0,!We){const zt=Math.pow(2,8*Ee-1);Ne(this,M,U,Ee,zt-1,-zt)}let rt=Ee-1,Ve=1,Et=0;for(this[U+rt]=M&255;--rt>=0&&(Ve*=256);)M<0&&Et===0&&this[U+rt+1]!==0&&(Et=1),this[U+rt]=(M/Ve>>0)-Et&255;return U+Ee},u.prototype.writeInt8=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,1,127,-128),M<0&&(M=255+M+1),this[U]=M&255,U+1},u.prototype.writeInt16LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,2,32767,-32768),this[U]=M&255,this[U+1]=M>>>8,U+2},u.prototype.writeInt16BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,2,32767,-32768),this[U]=M>>>8,this[U+1]=M&255,U+2},u.prototype.writeInt32LE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,4,2147483647,-2147483648),this[U]=M&255,this[U+1]=M>>>8,this[U+2]=M>>>16,this[U+3]=M>>>24,U+4},u.prototype.writeInt32BE=function(M,U,Ee){return M=+M,U=U>>>0,Ee||Ne(this,M,U,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[U]=M>>>24,this[U+1]=M>>>16,this[U+2]=M>>>8,this[U+3]=M&255,U+4},u.prototype.writeBigInt64LE=tt(function(M,U=0){return Pe(this,M,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=tt(function(M,U=0){return ze(this,M,U,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qe(ae,M,U,Ee,We,rt){if(U+Ee>ae.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function He(ae,M,U,Ee,We){return M=+M,U=U>>>0,We||qe(ae,M,U,4),i.write(ae,M,U,Ee,23,4),U+4}u.prototype.writeFloatLE=function(M,U,Ee){return He(this,M,U,!0,Ee)},u.prototype.writeFloatBE=function(M,U,Ee){return He(this,M,U,!1,Ee)};function ot(ae,M,U,Ee,We){return M=+M,U=U>>>0,We||qe(ae,M,U,8),i.write(ae,M,U,Ee,52,8),U+8}u.prototype.writeDoubleLE=function(M,U,Ee){return ot(this,M,U,!0,Ee)},u.prototype.writeDoubleBE=function(M,U,Ee){return ot(this,M,U,!1,Ee)},u.prototype.copy=function(M,U,Ee,We){if(!u.isBuffer(M))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!We&&We!==0&&(We=this.length),U>=M.length&&(U=M.length),U||(U=0),We>0&&We<Ee&&(We=Ee),We===Ee||M.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),M.length-U<We-Ee&&(We=M.length-U+Ee);const rt=We-Ee;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(U,Ee,We):Uint8Array.prototype.set.call(M,this.subarray(Ee,We),U),rt},u.prototype.fill=function(M,U,Ee,We){if(typeof M=="string"){if(typeof U=="string"?(We=U,U=0,Ee=this.length):typeof Ee=="string"&&(We=Ee,Ee=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!u.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(M.length===1){const Ve=M.charCodeAt(0);(We==="utf8"&&Ve<128||We==="latin1")&&(M=Ve)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(U<0||this.length<U||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=U)return this;U=U>>>0,Ee=Ee===void 0?this.length:Ee>>>0,M||(M=0);let rt;if(typeof M=="number")for(rt=U;rt<Ee;++rt)this[rt]=M;else{const Ve=u.isBuffer(M)?M:u.from(M,We),Et=Ve.length;if(Et===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(rt=0;rt<Ee-U;++rt)this[rt+U]=Ve[rt%Et]}return this};const ht={};function xt(ae,M,U){ht[ae]=class extends U{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ae}]`,this.stack,delete this.name}get code(){return ae}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${ae}]: ${this.message}`}}}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(ae){return ae?`${ae} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(ae,M){return`The "${ae}" argument must be of type number. Received type ${typeof M}`},TypeError),xt("ERR_OUT_OF_RANGE",function(ae,M,U){let Ee=`The value of "${ae}" is out of range.`,We=U;return Number.isInteger(U)&&Math.abs(U)>2**32?We=kt(String(U)):typeof U=="bigint"&&(We=String(U),(U>BigInt(2)**BigInt(32)||U<-(BigInt(2)**BigInt(32)))&&(We=kt(We)),We+="n"),Ee+=` It must be ${M}. Received ${We}`,Ee},RangeError);function kt(ae){let M="",U=ae.length;const Ee=ae[0]==="-"?1:0;for(;U>=Ee+4;U-=3)M=`_${ae.slice(U-3,U)}${M}`;return`${ae.slice(0,U)}${M}`}function pt(ae,M,U){Ht(M,"offset"),(ae[M]===void 0||ae[M+U]===void 0)&&Lt(M,ae.length-(U+1))}function wt(ae,M,U,Ee,We,rt){if(ae>U||ae<M){const Ve=typeof M=="bigint"?"n":"";let Et;throw rt>3?M===0||M===BigInt(0)?Et=`>= 0${Ve} and < 2${Ve} ** ${(rt+1)*8}${Ve}`:Et=`>= -(2${Ve} ** ${(rt+1)*8-1}${Ve}) and < 2 ** ${(rt+1)*8-1}${Ve}`:Et=`>= ${M}${Ve} and <= ${U}${Ve}`,new ht.ERR_OUT_OF_RANGE("value",Et,ae)}pt(Ee,We,rt)}function Ht(ae,M){if(typeof ae!="number")throw new ht.ERR_INVALID_ARG_TYPE(M,"number",ae)}function Lt(ae,M,U){throw Math.floor(ae)!==ae?(Ht(ae,U),new ht.ERR_OUT_OF_RANGE(U||"offset","an integer",ae)):M<0?new ht.ERR_BUFFER_OUT_OF_BOUNDS:new ht.ERR_OUT_OF_RANGE(U||"offset",`>= ${U?1:0} and <= ${M}`,ae)}const cn=/[^+/0-9A-Za-z-_]/g;function it(ae){if(ae=ae.split("=")[0],ae=ae.trim().replace(cn,""),ae.length<2)return"";for(;ae.length%4!==0;)ae=ae+"=";return ae}function bn(ae,M){M=M||1/0;let U;const Ee=ae.length;let We=null;const rt=[];for(let Ve=0;Ve<Ee;++Ve){if(U=ae.charCodeAt(Ve),U>55295&&U<57344){if(!We){if(U>56319){(M-=3)>-1&&rt.push(239,191,189);continue}else if(Ve+1===Ee){(M-=3)>-1&&rt.push(239,191,189);continue}We=U;continue}if(U<56320){(M-=3)>-1&&rt.push(239,191,189),We=U;continue}U=(We-55296<<10|U-56320)+65536}else We&&(M-=3)>-1&&rt.push(239,191,189);if(We=null,U<128){if((M-=1)<0)break;rt.push(U)}else if(U<2048){if((M-=2)<0)break;rt.push(U>>6|192,U&63|128)}else if(U<65536){if((M-=3)<0)break;rt.push(U>>12|224,U>>6&63|128,U&63|128)}else if(U<1114112){if((M-=4)<0)break;rt.push(U>>18|240,U>>12&63|128,U>>6&63|128,U&63|128)}else throw new Error("Invalid code point")}return rt}function hn(ae){const M=[];for(let U=0;U<ae.length;++U)M.push(ae.charCodeAt(U)&255);return M}function qt(ae,M){let U,Ee,We;const rt=[];for(let Ve=0;Ve<ae.length&&!((M-=2)<0);++Ve)U=ae.charCodeAt(Ve),Ee=U>>8,We=U%256,rt.push(We),rt.push(Ee);return rt}function Se(ae){return t.toByteArray(it(ae))}function N(ae,M,U,Ee){let We;for(We=0;We<Ee&&!(We+U>=M.length||We>=ae.length);++We)M[We+U]=ae[We];return We}function D(ae,M){return ae instanceof M||ae!=null&&ae.constructor!=null&&ae.constructor.name!=null&&ae.constructor.name===M.name}function xe(ae){return ae!==ae}const Xe=function(){const ae="0123456789abcdef",M=new Array(256);for(let U=0;U<16;++U){const Ee=U*16;for(let We=0;We<16;++We)M[Ee+We]=ae[U]+ae[We]}return M}();function tt(ae){return typeof BigInt>"u"?ct:ae}function ct(){throw new Error("BigInt not supported")}})(ZP);window.Buffer=ZP.Buffer;d4.render(yt.jsx(p1.StrictMode,{children:yt.jsx(I5,{})}),document.getElementById("root"));

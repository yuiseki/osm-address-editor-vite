function uP(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(s,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function s(){if(this instanceof s){var c=[null];c.push.apply(c,arguments);var f=Function.bind.apply(t,c);return new f}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var c=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(i,s,c.get?c:{enumerable:!0,get:function(){return e[s]}})}),i}var pt={},cP={get exports(){return pt},set exports(e){pt=e}},qm={},vt={},hP={get exports(){return vt},set exports(e){vt=e}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Symbol.for("react.element"),fP=Symbol.for("react.portal"),dP=Symbol.for("react.fragment"),pP=Symbol.for("react.strict_mode"),mP=Symbol.for("react.profiler"),gP=Symbol.for("react.provider"),yP=Symbol.for("react.context"),vP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),xP=Symbol.for("react.memo"),wP=Symbol.for("react.lazy"),lw=Symbol.iterator;function bP(e){return e===null||typeof e!="object"?null:(e=lw&&e[lw]||e["@@iterator"],typeof e=="function"?e:null)}var oE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aE=Object.assign,sE={};function lh(e,t,i){this.props=e,this.context=t,this.refs=sE,this.updater=i||oE}lh.prototype.isReactComponent={};lh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lE(){}lE.prototype=lh.prototype;function r_(e,t,i){this.props=e,this.context=t,this.refs=sE,this.updater=i||oE}var i_=r_.prototype=new lE;i_.constructor=r_;aE(i_,lh.prototype);i_.isPureReactComponent=!0;var uw=Array.isArray,uE=Object.prototype.hasOwnProperty,o_={current:null},cE={key:!0,ref:!0,__self:!0,__source:!0};function hE(e,t,i){var s,c={},f=null,y=null;if(t!=null)for(s in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(f=""+t.key),t)uE.call(t,s)&&!cE.hasOwnProperty(s)&&(c[s]=t[s]);var l=arguments.length-2;if(l===1)c.children=i;else if(1<l){for(var w=Array(l),E=0;E<l;E++)w[E]=arguments[E+2];c.children=w}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)c[s]===void 0&&(c[s]=l[s]);return{$$typeof:nd,type:e,key:f,ref:y,props:c,_owner:o_.current}}function EP(e,t){return{$$typeof:nd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function a_(e){return typeof e=="object"&&e!==null&&e.$$typeof===nd}function SP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var cw=/\/+/g;function hy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SP(""+e.key):t.toString(36)}function bp(e,t,i,s,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case nd:case fP:y=!0}}if(y)return y=e,c=c(y),e=s===""?"."+hy(y,0):s,uw(c)?(i="",e!=null&&(i=e.replace(cw,"$&/")+"/"),bp(c,t,i,"",function(E){return E})):c!=null&&(a_(c)&&(c=EP(c,i+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(cw,"$&/")+"/")+e)),t.push(c)),1;if(y=0,s=s===""?".":s+":",uw(e))for(var l=0;l<e.length;l++){f=e[l];var w=s+hy(f,l);y+=bp(f,t,i,w,c)}else if(w=bP(e),typeof w=="function")for(e=w.call(e),l=0;!(f=e.next()).done;)f=f.value,w=s+hy(f,l++),y+=bp(f,t,i,w,c);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Hd(e,t,i){if(e==null)return e;var s=[],c=0;return bp(e,s,"","",function(f){return t.call(i,f,c++)}),s}function TP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var to={current:null},Ep={transition:null},CP={ReactCurrentDispatcher:to,ReactCurrentBatchConfig:Ep,ReactCurrentOwner:o_};Un.Children={map:Hd,forEach:function(e,t,i){Hd(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Hd(e,function(){t++}),t},toArray:function(e){return Hd(e,function(t){return t})||[]},only:function(e){if(!a_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Un.Component=lh;Un.Fragment=dP;Un.Profiler=mP;Un.PureComponent=r_;Un.StrictMode=pP;Un.Suspense=_P;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CP;Un.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=aE({},e.props),c=e.key,f=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,y=o_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(w in t)uE.call(t,w)&&!cE.hasOwnProperty(w)&&(s[w]=t[w]===void 0&&l!==void 0?l[w]:t[w])}var w=arguments.length-2;if(w===1)s.children=i;else if(1<w){l=Array(w);for(var E=0;E<w;E++)l[E]=arguments[E+2];s.children=l}return{$$typeof:nd,type:e.type,key:c,ref:f,props:s,_owner:y}};Un.createContext=function(e){return e={$$typeof:yP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gP,_context:e},e.Consumer=e};Un.createElement=hE;Un.createFactory=function(e){var t=hE.bind(null,e);return t.type=e,t};Un.createRef=function(){return{current:null}};Un.forwardRef=function(e){return{$$typeof:vP,render:e}};Un.isValidElement=a_;Un.lazy=function(e){return{$$typeof:wP,_payload:{_status:-1,_result:e},_init:TP}};Un.memo=function(e,t){return{$$typeof:xP,type:e,compare:t===void 0?null:t}};Un.startTransition=function(e){var t=Ep.transition;Ep.transition={};try{e()}finally{Ep.transition=t}};Un.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Un.useCallback=function(e,t){return to.current.useCallback(e,t)};Un.useContext=function(e){return to.current.useContext(e)};Un.useDebugValue=function(){};Un.useDeferredValue=function(e){return to.current.useDeferredValue(e)};Un.useEffect=function(e,t){return to.current.useEffect(e,t)};Un.useId=function(){return to.current.useId()};Un.useImperativeHandle=function(e,t,i){return to.current.useImperativeHandle(e,t,i)};Un.useInsertionEffect=function(e,t){return to.current.useInsertionEffect(e,t)};Un.useLayoutEffect=function(e,t){return to.current.useLayoutEffect(e,t)};Un.useMemo=function(e,t){return to.current.useMemo(e,t)};Un.useReducer=function(e,t,i){return to.current.useReducer(e,t,i)};Un.useRef=function(e){return to.current.useRef(e)};Un.useState=function(e){return to.current.useState(e)};Un.useSyncExternalStore=function(e,t,i){return to.current.useSyncExternalStore(e,t,i)};Un.useTransition=function(){return to.current.useTransition()};Un.version="18.2.0";(function(e){e.exports=Un})(hP);const fE=iE(vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AP=vt,IP=Symbol.for("react.element"),PP=Symbol.for("react.fragment"),kP=Object.prototype.hasOwnProperty,MP=AP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zP={key:!0,ref:!0,__self:!0,__source:!0};function dE(e,t,i){var s,c={},f=null,y=null;i!==void 0&&(f=""+i),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(y=t.ref);for(s in t)kP.call(t,s)&&!zP.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:IP,type:e,key:f,ref:y,props:c,_owner:MP.current}}qm.Fragment=PP;qm.jsx=dE;qm.jsxs=dE;(function(e){e.exports=qm})(cP);var Lf={},LP={get exports(){return Lf},set exports(e){Lf=e}},ko={},g0={},RP={get exports(){return g0},set exports(e){g0=e}},pE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(te,ce){var xe=te.length;te.push(ce);e:for(;0<xe;){var we=xe-1>>>1,De=te[we];if(0<c(De,ce))te[we]=ce,te[xe]=De,xe=we;else break e}}function i(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var ce=te[0],xe=te.pop();if(xe!==ce){te[0]=xe;e:for(var we=0,De=te.length,Pe=De>>>1;we<Pe;){var Me=2*(we+1)-1,Ve=te[Me],Ne=Me+1,Qe=te[Ne];if(0>c(Ve,xe))Ne<De&&0>c(Qe,Ve)?(te[we]=Qe,te[Ne]=xe,we=Ne):(te[we]=Ve,te[Me]=xe,we=Me);else if(Ne<De&&0>c(Qe,xe))te[we]=Qe,te[Ne]=xe,we=Ne;else break e}}return ce}function c(te,ce){var xe=te.sortIndex-ce.sortIndex;return xe!==0?xe:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,l=y.now();e.unstable_now=function(){return y.now()-l}}var w=[],E=[],T=1,S=null,I=3,j=!1,q=!1,H=!1,fe=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(te){for(var ce=i(E);ce!==null;){if(ce.callback===null)s(E);else if(ce.startTime<=te)s(E),ce.sortIndex=ce.expirationTime,t(w,ce);else break;ce=i(E)}}function oe(te){if(H=!1,N(te),!q)if(i(w)!==null)q=!0,re(V);else{var ce=i(E);ce!==null&&ne(oe,ce.startTime-te)}}function V(te,ce){q=!1,H&&(H=!1,Z(k),k=-1),j=!0;var xe=I;try{for(N(ce),S=i(w);S!==null&&(!(S.expirationTime>ce)||te&&!K());){var we=S.callback;if(typeof we=="function"){S.callback=null,I=S.priorityLevel;var De=we(S.expirationTime<=ce);ce=e.unstable_now(),typeof De=="function"?S.callback=De:S===i(w)&&s(w),N(ce)}else s(w);S=i(w)}if(S!==null)var Pe=!0;else{var Me=i(E);Me!==null&&ne(oe,Me.startTime-ce),Pe=!1}return Pe}finally{S=null,I=xe,j=!1}}var D=!1,b=null,k=-1,G=5,Y=-1;function K(){return!(e.unstable_now()-Y<G)}function pe(){if(b!==null){var te=e.unstable_now();Y=te;var ce=!0;try{ce=b(!0,te)}finally{ce?_e():(D=!1,b=null)}}else D=!1}var _e;if(typeof $=="function")_e=function(){$(pe)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Q=be.port2;be.port1.onmessage=pe,_e=function(){Q.postMessage(null)}}else _e=function(){fe(pe,0)};function re(te){b=te,D||(D=!0,_e())}function ne(te,ce){k=fe(function(){te(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){q||j||(q=!0,re(V))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(te){switch(I){case 1:case 2:case 3:var ce=3;break;default:ce=I}var xe=I;I=ce;try{return te()}finally{I=xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var xe=I;I=te;try{return ce()}finally{I=xe}},e.unstable_scheduleCallback=function(te,ce,xe){var we=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?we+xe:we):xe=we,te){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=xe+De,te={id:T++,callback:ce,priorityLevel:te,startTime:xe,expirationTime:De,sortIndex:-1},xe>we?(te.sortIndex=xe,t(E,te),i(w)===null&&te===i(E)&&(H?(Z(k),k=-1):H=!0,ne(oe,xe-we))):(te.sortIndex=De,t(w,te),q||j||(q=!0,re(V))),te},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(te){var ce=I;return function(){var xe=I;I=ce;try{return te.apply(this,arguments)}finally{I=xe}}}})(pE);(function(e){e.exports=pE})(RP);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE=vt,Po=g0;function At(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gE=new Set,Rf={};function Du(e,t){Kc(e,t),Kc(e+"Capture",t)}function Kc(e,t){for(Rf[e]=t,e=0;e<t.length;e++)gE.add(t[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y0=Object.prototype.hasOwnProperty,OP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hw={},fw={};function FP(e){return y0.call(fw,e)?!0:y0.call(hw,e)?!1:OP.test(e)?fw[e]=!0:(hw[e]=!0,!1)}function jP(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function DP(e,t,i,s){if(t===null||typeof t>"u"||jP(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function no(e,t,i,s,c,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var Ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ti[e]=new no(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ti[t]=new no(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ti[e]=new no(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ti[e]=new no(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ti[e]=new no(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ti[e]=new no(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ti[e]=new no(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ti[e]=new no(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ti[e]=new no(e,5,!1,e.toLowerCase(),null,!1,!1)});var s_=/[\-:]([a-z])/g;function l_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(s_,l_);Ti[t]=new no(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(s_,l_);Ti[t]=new no(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(s_,l_);Ti[t]=new no(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ti[e]=new no(e,1,!1,e.toLowerCase(),null,!1,!1)});Ti.xlinkHref=new no("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ti[e]=new no(e,1,!1,e.toLowerCase(),null,!0,!0)});function u_(e,t,i,s){var c=Ti.hasOwnProperty(t)?Ti[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(DP(t,i,c,s)&&(i=null),s||c===null?FP(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,s=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var Gs=mE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xd=Symbol.for("react.element"),Sc=Symbol.for("react.portal"),Tc=Symbol.for("react.fragment"),c_=Symbol.for("react.strict_mode"),v0=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),vE=Symbol.for("react.context"),h_=Symbol.for("react.forward_ref"),_0=Symbol.for("react.suspense"),x0=Symbol.for("react.suspense_list"),f_=Symbol.for("react.memo"),vl=Symbol.for("react.lazy"),_E=Symbol.for("react.offscreen"),dw=Symbol.iterator;function qh(e){return e===null||typeof e!="object"?null:(e=dw&&e[dw]||e["@@iterator"],typeof e=="function"?e:null)}var Rr=Object.assign,fy;function of(e){if(fy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);fy=t&&t[1]||""}return`
`+fy+e}var dy=!1;function py(e,t){if(!e||dy)return"";dy=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var s=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){s=E}e.call(t.prototype)}else{try{throw Error()}catch(E){s=E}e()}}catch(E){if(E&&s&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),f=s.stack.split(`
`),y=c.length-1,l=f.length-1;1<=y&&0<=l&&c[y]!==f[l];)l--;for(;1<=y&&0<=l;y--,l--)if(c[y]!==f[l]){if(y!==1||l!==1)do if(y--,l--,0>l||c[y]!==f[l]){var w=`
`+c[y].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=y&&0<=l);break}}}finally{dy=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?of(e):""}function BP(e){switch(e.tag){case 5:return of(e.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return e=py(e.type,!1),e;case 11:return e=py(e.type.render,!1),e;case 1:return e=py(e.type,!0),e;default:return""}}function w0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tc:return"Fragment";case Sc:return"Portal";case v0:return"Profiler";case c_:return"StrictMode";case _0:return"Suspense";case x0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vE:return(e.displayName||"Context")+".Consumer";case yE:return(e._context.displayName||"Context")+".Provider";case h_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case f_:return t=e.displayName||null,t!==null?t:w0(e.type)||"Memo";case vl:t=e._payload,e=e._init;try{return w0(e(t))}catch{}}return null}function NP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w0(t);case 8:return t===c_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function UP(e){var t=xE(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,f=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){s=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qd(e){e._valueTracker||(e._valueTracker=UP(e))}function wE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=xE(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function Gp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function b0(e,t){var i=t.checked;return Rr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function pw(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=Fl(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bE(e,t){t=t.checked,t!=null&&u_(e,"checked",t,!1)}function E0(e,t){bE(e,t);var i=Fl(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?S0(e,t.type,i):t.hasOwnProperty("defaultValue")&&S0(e,t.type,Fl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function S0(e,t,i){(t!=="number"||Gp(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var af=Array.isArray;function Uc(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Fl(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function T0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(At(91));return Rr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gw(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(At(92));if(af(i)){if(1<i.length)throw Error(At(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Fl(i)}}function EE(e,t){var i=Fl(t.value),s=Fl(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function yw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kd,TE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kd=Kd||document.createElement("div"),Kd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Of(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var yf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$P=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(e){$P.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yf[t]=yf[e]})});function CE(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||yf.hasOwnProperty(e)&&yf[e]?(""+t).trim():t+"px"}function AE(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,c=CE(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,c):e[i]=c}}var VP=Rr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A0(e,t){if(t){if(VP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(At(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(At(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(At(61))}if(t.style!=null&&typeof t.style!="object")throw Error(At(62))}}function I0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P0=null;function d_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var k0=null,$c=null,Vc=null;function vw(e){if(e=od(e)){if(typeof k0!="function")throw Error(At(280));var t=e.stateNode;t&&(t=eg(t),k0(e.stateNode,e.type,t))}}function IE(e){$c?Vc?Vc.push(e):Vc=[e]:$c=e}function PE(){if($c){var e=$c,t=Vc;if(Vc=$c=null,vw(e),t)for(e=0;e<t.length;e++)vw(t[e])}}function kE(e,t){return e(t)}function ME(){}var my=!1;function zE(e,t,i){if(my)return e(t,i);my=!0;try{return kE(e,t,i)}finally{my=!1,($c!==null||Vc!==null)&&(ME(),PE())}}function Ff(e,t){var i=e.stateNode;if(i===null)return null;var s=eg(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(At(231,t,typeof i));return i}var M0=!1;if(Fs)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){M0=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{M0=!1}function GP(e,t,i,s,c,f,y,l,w){var E=Array.prototype.slice.call(arguments,3);try{t.apply(i,E)}catch(T){this.onError(T)}}var vf=!1,Zp=null,Wp=!1,z0=null,ZP={onError:function(e){vf=!0,Zp=e}};function WP(e,t,i,s,c,f,y,l,w){vf=!1,Zp=null,GP.apply(ZP,arguments)}function HP(e,t,i,s,c,f,y,l,w){if(WP.apply(this,arguments),vf){if(vf){var E=Zp;vf=!1,Zp=null}else throw Error(At(198));Wp||(Wp=!0,z0=E)}}function Bu(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function LE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _w(e){if(Bu(e)!==e)throw Error(At(188))}function XP(e){var t=e.alternate;if(!t){if(t=Bu(e),t===null)throw Error(At(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var f=c.alternate;if(f===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===i)return _w(c),e;if(f===s)return _w(c),t;f=f.sibling}throw Error(At(188))}if(i.return!==s.return)i=c,s=f;else{for(var y=!1,l=c.child;l;){if(l===i){y=!0,i=c,s=f;break}if(l===s){y=!0,s=c,i=f;break}l=l.sibling}if(!y){for(l=f.child;l;){if(l===i){y=!0,i=f,s=c;break}if(l===s){y=!0,s=f,i=c;break}l=l.sibling}if(!y)throw Error(At(189))}}if(i.alternate!==s)throw Error(At(190))}if(i.tag!==3)throw Error(At(188));return i.stateNode.current===i?e:t}function RE(e){return e=XP(e),e!==null?OE(e):null}function OE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=OE(e);if(t!==null)return t;e=e.sibling}return null}var FE=Po.unstable_scheduleCallback,xw=Po.unstable_cancelCallback,qP=Po.unstable_shouldYield,KP=Po.unstable_requestPaint,Hr=Po.unstable_now,YP=Po.unstable_getCurrentPriorityLevel,p_=Po.unstable_ImmediatePriority,jE=Po.unstable_UserBlockingPriority,Hp=Po.unstable_NormalPriority,JP=Po.unstable_LowPriority,DE=Po.unstable_IdlePriority,Km=null,Qa=null;function QP(e){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Km,e,void 0,(e.current.flags&128)===128)}catch{}}var ya=Math.clz32?Math.clz32:nk,ek=Math.log,tk=Math.LN2;function nk(e){return e>>>=0,e===0?32:31-(ek(e)/tk|0)|0}var Yd=64,Jd=4194304;function sf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xp(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,c=e.suspendedLanes,f=e.pingedLanes,y=i&268435455;if(y!==0){var l=y&~c;l!==0?s=sf(l):(f&=y,f!==0&&(s=sf(f)))}else y=i&~c,y!==0?s=sf(y):f!==0&&(s=sf(f));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-ya(t),c=1<<i,s|=e[i],t&=~c;return s}function rk(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ik(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-ya(f),l=1<<y,w=c[y];w===-1?(!(l&i)||l&s)&&(c[y]=rk(l,t)):w<=t&&(e.expiredLanes|=l),f&=~l}}function L0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BE(){var e=Yd;return Yd<<=1,!(Yd&4194240)&&(Yd=64),e}function gy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function rd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ya(t),e[t]=i}function ok(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-ya(i),f=1<<c;t[c]=0,s[c]=-1,e[c]=-1,i&=~f}}function m_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-ya(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}var sr=0;function NE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UE,g_,$E,VE,GE,R0=!1,Qd=[],Il=null,Pl=null,kl=null,jf=new Map,Df=new Map,bl=[],ak="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ww(e,t){switch(e){case"focusin":case"focusout":Il=null;break;case"dragenter":case"dragleave":Pl=null;break;case"mouseover":case"mouseout":kl=null;break;case"pointerover":case"pointerout":jf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(t.pointerId)}}function Yh(e,t,i,s,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:f,targetContainers:[c]},t!==null&&(t=od(t),t!==null&&g_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function sk(e,t,i,s,c){switch(t){case"focusin":return Il=Yh(Il,e,t,i,s,c),!0;case"dragenter":return Pl=Yh(Pl,e,t,i,s,c),!0;case"mouseover":return kl=Yh(kl,e,t,i,s,c),!0;case"pointerover":var f=c.pointerId;return jf.set(f,Yh(jf.get(f)||null,e,t,i,s,c)),!0;case"gotpointercapture":return f=c.pointerId,Df.set(f,Yh(Df.get(f)||null,e,t,i,s,c)),!0}return!1}function ZE(e){var t=Eu(e.target);if(t!==null){var i=Bu(t);if(i!==null){if(t=i.tag,t===13){if(t=LE(i),t!==null){e.blockedOn=t,GE(e.priority,function(){$E(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=O0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);P0=s,i.target.dispatchEvent(s),P0=null}else return t=od(i),t!==null&&g_(t),e.blockedOn=i,!1;t.shift()}return!0}function bw(e,t,i){Sp(e)&&i.delete(t)}function lk(){R0=!1,Il!==null&&Sp(Il)&&(Il=null),Pl!==null&&Sp(Pl)&&(Pl=null),kl!==null&&Sp(kl)&&(kl=null),jf.forEach(bw),Df.forEach(bw)}function Jh(e,t){e.blockedOn===t&&(e.blockedOn=null,R0||(R0=!0,Po.unstable_scheduleCallback(Po.unstable_NormalPriority,lk)))}function Bf(e){function t(c){return Jh(c,e)}if(0<Qd.length){Jh(Qd[0],e);for(var i=1;i<Qd.length;i++){var s=Qd[i];s.blockedOn===e&&(s.blockedOn=null)}}for(Il!==null&&Jh(Il,e),Pl!==null&&Jh(Pl,e),kl!==null&&Jh(kl,e),jf.forEach(t),Df.forEach(t),i=0;i<bl.length;i++)s=bl[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<bl.length&&(i=bl[0],i.blockedOn===null);)ZE(i),i.blockedOn===null&&bl.shift()}var Gc=Gs.ReactCurrentBatchConfig,qp=!0;function uk(e,t,i,s){var c=sr,f=Gc.transition;Gc.transition=null;try{sr=1,y_(e,t,i,s)}finally{sr=c,Gc.transition=f}}function ck(e,t,i,s){var c=sr,f=Gc.transition;Gc.transition=null;try{sr=4,y_(e,t,i,s)}finally{sr=c,Gc.transition=f}}function y_(e,t,i,s){if(qp){var c=O0(e,t,i,s);if(c===null)Cy(e,t,s,Kp,i),ww(e,s);else if(sk(c,e,t,i,s))s.stopPropagation();else if(ww(e,s),t&4&&-1<ak.indexOf(e)){for(;c!==null;){var f=od(c);if(f!==null&&UE(f),f=O0(e,t,i,s),f===null&&Cy(e,t,s,Kp,i),f===c)break;c=f}c!==null&&s.stopPropagation()}else Cy(e,t,s,null,i)}}var Kp=null;function O0(e,t,i,s){if(Kp=null,e=d_(s),e=Eu(e),e!==null)if(t=Bu(e),t===null)e=null;else if(i=t.tag,i===13){if(e=LE(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kp=e,null}function WE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YP()){case p_:return 1;case jE:return 4;case Hp:case JP:return 16;case DE:return 536870912;default:return 16}default:return 16}}var Tl=null,v_=null,Tp=null;function HE(){if(Tp)return Tp;var e,t=v_,i=t.length,s,c="value"in Tl?Tl.value:Tl.textContent,f=c.length;for(e=0;e<i&&t[e]===c[e];e++);var y=i-e;for(s=1;s<=y&&t[i-s]===c[f-s];s++);return Tp=c.slice(e,1<s?1-s:void 0)}function Cp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ep(){return!0}function Ew(){return!1}function Mo(e){function t(i,s,c,f,y){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(f):f[l]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ep:Ew,this.isPropagationStopped=Ew,this}return Rr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ep)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ep)},persist:function(){},isPersistent:ep}),t}var uh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},__=Mo(uh),id=Rr({},uh,{view:0,detail:0}),hk=Mo(id),yy,vy,Qh,Ym=Rr({},id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qh&&(Qh&&e.type==="mousemove"?(yy=e.screenX-Qh.screenX,vy=e.screenY-Qh.screenY):vy=yy=0,Qh=e),yy)},movementY:function(e){return"movementY"in e?e.movementY:vy}}),Sw=Mo(Ym),fk=Rr({},Ym,{dataTransfer:0}),dk=Mo(fk),pk=Rr({},id,{relatedTarget:0}),_y=Mo(pk),mk=Rr({},uh,{animationName:0,elapsedTime:0,pseudoElement:0}),gk=Mo(mk),yk=Rr({},uh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vk=Mo(yk),_k=Rr({},uh,{data:0}),Tw=Mo(_k),xk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ek(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bk[e])?!!t[e]:!1}function x_(){return Ek}var Sk=Rr({},id,{key:function(e){if(e.key){var t=xk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x_,charCode:function(e){return e.type==="keypress"?Cp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tk=Mo(Sk),Ck=Rr({},Ym,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cw=Mo(Ck),Ak=Rr({},id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x_}),Ik=Mo(Ak),Pk=Rr({},uh,{propertyName:0,elapsedTime:0,pseudoElement:0}),kk=Mo(Pk),Mk=Rr({},Ym,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zk=Mo(Mk),Lk=[9,13,27,32],w_=Fs&&"CompositionEvent"in window,_f=null;Fs&&"documentMode"in document&&(_f=document.documentMode);var Rk=Fs&&"TextEvent"in window&&!_f,XE=Fs&&(!w_||_f&&8<_f&&11>=_f),Aw=String.fromCharCode(32),Iw=!1;function qE(e,t){switch(e){case"keyup":return Lk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cc=!1;function Ok(e,t){switch(e){case"compositionend":return KE(t);case"keypress":return t.which!==32?null:(Iw=!0,Aw);case"textInput":return e=t.data,e===Aw&&Iw?null:e;default:return null}}function Fk(e,t){if(Cc)return e==="compositionend"||!w_&&qE(e,t)?(e=HE(),Tp=v_=Tl=null,Cc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XE&&t.locale!=="ko"?null:t.data;default:return null}}var jk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jk[e.type]:t==="textarea"}function YE(e,t,i,s){IE(s),t=Yp(t,"onChange"),0<t.length&&(i=new __("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var xf=null,Nf=null;function Dk(e){lS(e,0)}function Jm(e){var t=Pc(e);if(wE(t))return e}function Bk(e,t){if(e==="change")return t}var JE=!1;if(Fs){var xy;if(Fs){var wy="oninput"in document;if(!wy){var kw=document.createElement("div");kw.setAttribute("oninput","return;"),wy=typeof kw.oninput=="function"}xy=wy}else xy=!1;JE=xy&&(!document.documentMode||9<document.documentMode)}function Mw(){xf&&(xf.detachEvent("onpropertychange",QE),Nf=xf=null)}function QE(e){if(e.propertyName==="value"&&Jm(Nf)){var t=[];YE(t,Nf,e,d_(e)),zE(Dk,t)}}function Nk(e,t,i){e==="focusin"?(Mw(),xf=t,Nf=i,xf.attachEvent("onpropertychange",QE)):e==="focusout"&&Mw()}function Uk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jm(Nf)}function $k(e,t){if(e==="click")return Jm(t)}function Vk(e,t){if(e==="input"||e==="change")return Jm(t)}function Gk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _a=typeof Object.is=="function"?Object.is:Gk;function Uf(e,t){if(_a(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!y0.call(t,c)||!_a(e[c],t[c]))return!1}return!0}function zw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lw(e,t){var i=zw(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=zw(i)}}function eS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tS(){for(var e=window,t=Gp();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Gp(e.document)}return t}function b_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zk(e){var t=tS(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&eS(i.ownerDocument.documentElement,i)){if(s!==null&&b_(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,f=Math.min(s.start,c);s=s.end===void 0?f:Math.min(s.end,c),!e.extend&&f>s&&(c=s,s=f,f=c),c=Lw(i,f);var y=Lw(i,s);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>s?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wk=Fs&&"documentMode"in document&&11>=document.documentMode,Ac=null,F0=null,wf=null,j0=!1;function Rw(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;j0||Ac==null||Ac!==Gp(s)||(s=Ac,"selectionStart"in s&&b_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wf&&Uf(wf,s)||(wf=s,s=Yp(F0,"onSelect"),0<s.length&&(t=new __("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Ac)))}function tp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Ic={animationend:tp("Animation","AnimationEnd"),animationiteration:tp("Animation","AnimationIteration"),animationstart:tp("Animation","AnimationStart"),transitionend:tp("Transition","TransitionEnd")},by={},nS={};Fs&&(nS=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function Qm(e){if(by[e])return by[e];if(!Ic[e])return e;var t=Ic[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in nS)return by[e]=t[i];return e}var rS=Qm("animationend"),iS=Qm("animationiteration"),oS=Qm("animationstart"),aS=Qm("transitionend"),sS=new Map,Ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ul(e,t){sS.set(e,t),Du(t,[e])}for(var Ey=0;Ey<Ow.length;Ey++){var Sy=Ow[Ey],Hk=Sy.toLowerCase(),Xk=Sy[0].toUpperCase()+Sy.slice(1);Ul(Hk,"on"+Xk)}Ul(rS,"onAnimationEnd");Ul(iS,"onAnimationIteration");Ul(oS,"onAnimationStart");Ul("dblclick","onDoubleClick");Ul("focusin","onFocus");Ul("focusout","onBlur");Ul(aS,"onTransitionEnd");Kc("onMouseEnter",["mouseout","mouseover"]);Kc("onMouseLeave",["mouseout","mouseover"]);Kc("onPointerEnter",["pointerout","pointerover"]);Kc("onPointerLeave",["pointerout","pointerover"]);Du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Du("onBeforeInput",["compositionend","keypress","textInput","paste"]);Du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function Fw(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,HP(s,t,void 0,e),e.currentTarget=null}function lS(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var f=void 0;if(t)for(var y=s.length-1;0<=y;y--){var l=s[y],w=l.instance,E=l.currentTarget;if(l=l.listener,w!==f&&c.isPropagationStopped())break e;Fw(c,l,E),f=w}else for(y=0;y<s.length;y++){if(l=s[y],w=l.instance,E=l.currentTarget,l=l.listener,w!==f&&c.isPropagationStopped())break e;Fw(c,l,E),f=w}}}if(Wp)throw e=z0,Wp=!1,z0=null,e}function Er(e,t){var i=t[$0];i===void 0&&(i=t[$0]=new Set);var s=e+"__bubble";i.has(s)||(uS(t,e,2,!1),i.add(s))}function Ty(e,t,i){var s=0;t&&(s|=4),uS(i,e,s,t)}var np="_reactListening"+Math.random().toString(36).slice(2);function $f(e){if(!e[np]){e[np]=!0,gE.forEach(function(i){i!=="selectionchange"&&(qk.has(i)||Ty(i,!1,e),Ty(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[np]||(t[np]=!0,Ty("selectionchange",!1,t))}}function uS(e,t,i,s){switch(WE(t)){case 1:var c=uk;break;case 4:c=ck;break;default:c=y_}i=c.bind(null,t,i,e),c=void 0,!M0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Cy(e,t,i,s,c){var f=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var l=s.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(y===4)for(y=s.return;y!==null;){var w=y.tag;if((w===3||w===4)&&(w=y.stateNode.containerInfo,w===c||w.nodeType===8&&w.parentNode===c))return;y=y.return}for(;l!==null;){if(y=Eu(l),y===null)return;if(w=y.tag,w===5||w===6){s=f=y;continue e}l=l.parentNode}}s=s.return}zE(function(){var E=f,T=d_(i),S=[];e:{var I=sS.get(e);if(I!==void 0){var j=__,q=e;switch(e){case"keypress":if(Cp(i)===0)break e;case"keydown":case"keyup":j=Tk;break;case"focusin":q="focus",j=_y;break;case"focusout":q="blur",j=_y;break;case"beforeblur":case"afterblur":j=_y;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Sw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Ik;break;case rS:case iS:case oS:j=gk;break;case aS:j=kk;break;case"scroll":j=hk;break;case"wheel":j=zk;break;case"copy":case"cut":case"paste":j=vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Cw}var H=(t&4)!==0,fe=!H&&e==="scroll",Z=H?I!==null?I+"Capture":null:I;H=[];for(var $=E,N;$!==null;){N=$;var oe=N.stateNode;if(N.tag===5&&oe!==null&&(N=oe,Z!==null&&(oe=Ff($,Z),oe!=null&&H.push(Vf($,oe,N)))),fe)break;$=$.return}0<H.length&&(I=new j(I,q,null,i,T),S.push({event:I,listeners:H}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",I&&i!==P0&&(q=i.relatedTarget||i.fromElement)&&(Eu(q)||q[js]))break e;if((j||I)&&(I=T.window===T?T:(I=T.ownerDocument)?I.defaultView||I.parentWindow:window,j?(q=i.relatedTarget||i.toElement,j=E,q=q?Eu(q):null,q!==null&&(fe=Bu(q),q!==fe||q.tag!==5&&q.tag!==6)&&(q=null)):(j=null,q=E),j!==q)){if(H=Sw,oe="onMouseLeave",Z="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(H=Cw,oe="onPointerLeave",Z="onPointerEnter",$="pointer"),fe=j==null?I:Pc(j),N=q==null?I:Pc(q),I=new H(oe,$+"leave",j,i,T),I.target=fe,I.relatedTarget=N,oe=null,Eu(T)===E&&(H=new H(Z,$+"enter",q,i,T),H.target=N,H.relatedTarget=fe,oe=H),fe=oe,j&&q)t:{for(H=j,Z=q,$=0,N=H;N;N=gc(N))$++;for(N=0,oe=Z;oe;oe=gc(oe))N++;for(;0<$-N;)H=gc(H),$--;for(;0<N-$;)Z=gc(Z),N--;for(;$--;){if(H===Z||Z!==null&&H===Z.alternate)break t;H=gc(H),Z=gc(Z)}H=null}else H=null;j!==null&&jw(S,I,j,H,!1),q!==null&&fe!==null&&jw(S,fe,q,H,!0)}}e:{if(I=E?Pc(E):window,j=I.nodeName&&I.nodeName.toLowerCase(),j==="select"||j==="input"&&I.type==="file")var V=Bk;else if(Pw(I))if(JE)V=Vk;else{V=Uk;var D=Nk}else(j=I.nodeName)&&j.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(V=$k);if(V&&(V=V(e,E))){YE(S,V,i,T);break e}D&&D(e,I,E),e==="focusout"&&(D=I._wrapperState)&&D.controlled&&I.type==="number"&&S0(I,"number",I.value)}switch(D=E?Pc(E):window,e){case"focusin":(Pw(D)||D.contentEditable==="true")&&(Ac=D,F0=E,wf=null);break;case"focusout":wf=F0=Ac=null;break;case"mousedown":j0=!0;break;case"contextmenu":case"mouseup":case"dragend":j0=!1,Rw(S,i,T);break;case"selectionchange":if(Wk)break;case"keydown":case"keyup":Rw(S,i,T)}var b;if(w_)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Cc?qE(e,i)&&(k="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(k="onCompositionStart");k&&(XE&&i.locale!=="ko"&&(Cc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Cc&&(b=HE()):(Tl=T,v_="value"in Tl?Tl.value:Tl.textContent,Cc=!0)),D=Yp(E,k),0<D.length&&(k=new Tw(k,e,null,i,T),S.push({event:k,listeners:D}),b?k.data=b:(b=KE(i),b!==null&&(k.data=b)))),(b=Rk?Ok(e,i):Fk(e,i))&&(E=Yp(E,"onBeforeInput"),0<E.length&&(T=new Tw("onBeforeInput","beforeinput",null,i,T),S.push({event:T,listeners:E}),T.data=b))}lS(S,t)})}function Vf(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Yp(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Ff(e,i),f!=null&&s.unshift(Vf(e,f,c)),f=Ff(e,t),f!=null&&s.push(Vf(e,f,c))),e=e.return}return s}function gc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jw(e,t,i,s,c){for(var f=t._reactName,y=[];i!==null&&i!==s;){var l=i,w=l.alternate,E=l.stateNode;if(w!==null&&w===s)break;l.tag===5&&E!==null&&(l=E,c?(w=Ff(i,f),w!=null&&y.unshift(Vf(i,w,l))):c||(w=Ff(i,f),w!=null&&y.push(Vf(i,w,l)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var Kk=/\r\n?/g,Yk=/\u0000|\uFFFD/g;function Dw(e){return(typeof e=="string"?e:""+e).replace(Kk,`
`).replace(Yk,"")}function rp(e,t,i){if(t=Dw(t),Dw(e)!==t&&i)throw Error(At(425))}function Jp(){}var D0=null,B0=null;function N0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U0=typeof setTimeout=="function"?setTimeout:void 0,Jk=typeof clearTimeout=="function"?clearTimeout:void 0,Bw=typeof Promise=="function"?Promise:void 0,Qk=typeof queueMicrotask=="function"?queueMicrotask:typeof Bw<"u"?function(e){return Bw.resolve(null).then(e).catch(eM)}:U0;function eM(e){setTimeout(function(){throw e})}function Ay(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(s===0){e.removeChild(c),Bf(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=c}while(i);Bf(t)}function Ml(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var ch=Math.random().toString(36).slice(2),Xa="__reactFiber$"+ch,Gf="__reactProps$"+ch,js="__reactContainer$"+ch,$0="__reactEvents$"+ch,tM="__reactListeners$"+ch,nM="__reactHandles$"+ch;function Eu(e){var t=e[Xa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[js]||i[Xa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Nw(e);e!==null;){if(i=e[Xa])return i;e=Nw(e)}return t}e=i,i=e.parentNode}return null}function od(e){return e=e[Xa]||e[js],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(At(33))}function eg(e){return e[Gf]||null}var V0=[],kc=-1;function $l(e){return{current:e}}function Sr(e){0>kc||(e.current=V0[kc],V0[kc]=null,kc--)}function xr(e,t){kc++,V0[kc]=e.current,e.current=t}var jl={},ji=$l(jl),fo=$l(!1),Pu=jl;function Yc(e,t){var i=e.type.contextTypes;if(!i)return jl;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in i)c[f]=t[f];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function po(e){return e=e.childContextTypes,e!=null}function Qp(){Sr(fo),Sr(ji)}function Uw(e,t,i){if(ji.current!==jl)throw Error(At(168));xr(ji,t),xr(fo,i)}function cS(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(At(108,NP(e)||"Unknown",c));return Rr({},i,s)}function em(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jl,Pu=ji.current,xr(ji,e),xr(fo,fo.current),!0}function $w(e,t,i){var s=e.stateNode;if(!s)throw Error(At(169));i?(e=cS(e,t,Pu),s.__reactInternalMemoizedMergedChildContext=e,Sr(fo),Sr(ji),xr(ji,e)):Sr(fo),xr(fo,i)}var Ms=null,tg=!1,Iy=!1;function hS(e){Ms===null?Ms=[e]:Ms.push(e)}function rM(e){tg=!0,hS(e)}function Vl(){if(!Iy&&Ms!==null){Iy=!0;var e=0,t=sr;try{var i=Ms;for(sr=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}Ms=null,tg=!1}catch(c){throw Ms!==null&&(Ms=Ms.slice(e+1)),FE(p_,Vl),c}finally{sr=t,Iy=!1}}return null}var Mc=[],zc=0,tm=null,nm=0,Wo=[],Ho=0,ku=null,Ls=1,Rs="";function xu(e,t){Mc[zc++]=nm,Mc[zc++]=tm,tm=e,nm=t}function fS(e,t,i){Wo[Ho++]=Ls,Wo[Ho++]=Rs,Wo[Ho++]=ku,ku=e;var s=Ls;e=Rs;var c=32-ya(s)-1;s&=~(1<<c),i+=1;var f=32-ya(t)+c;if(30<f){var y=c-c%5;f=(s&(1<<y)-1).toString(32),s>>=y,c-=y,Ls=1<<32-ya(t)+c|i<<c|s,Rs=f+e}else Ls=1<<f|i<<c|s,Rs=e}function E_(e){e.return!==null&&(xu(e,1),fS(e,1,0))}function S_(e){for(;e===tm;)tm=Mc[--zc],Mc[zc]=null,nm=Mc[--zc],Mc[zc]=null;for(;e===ku;)ku=Wo[--Ho],Wo[Ho]=null,Rs=Wo[--Ho],Wo[Ho]=null,Ls=Wo[--Ho],Wo[Ho]=null}var Io=null,Co=null,Ir=!1,fa=null;function dS(e,t){var i=qo(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Vw(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Io=e,Co=Ml(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Io=e,Co=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=ku!==null?{id:Ls,overflow:Rs}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=qo(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Io=e,Co=null,!0):!1;default:return!1}}function G0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Z0(e){if(Ir){var t=Co;if(t){var i=t;if(!Vw(e,t)){if(G0(e))throw Error(At(418));t=Ml(i.nextSibling);var s=Io;t&&Vw(e,t)?dS(s,i):(e.flags=e.flags&-4097|2,Ir=!1,Io=e)}}else{if(G0(e))throw Error(At(418));e.flags=e.flags&-4097|2,Ir=!1,Io=e}}}function Gw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Io=e}function ip(e){if(e!==Io)return!1;if(!Ir)return Gw(e),Ir=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!N0(e.type,e.memoizedProps)),t&&(t=Co)){if(G0(e))throw pS(),Error(At(418));for(;t;)dS(e,t),t=Ml(t.nextSibling)}if(Gw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(At(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Co=Ml(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Co=null}}else Co=Io?Ml(e.stateNode.nextSibling):null;return!0}function pS(){for(var e=Co;e;)e=Ml(e.nextSibling)}function Jc(){Co=Io=null,Ir=!1}function T_(e){fa===null?fa=[e]:fa.push(e)}var iM=Gs.ReactCurrentBatchConfig;function ca(e,t){if(e&&e.defaultProps){t=Rr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var rm=$l(null),im=null,Lc=null,C_=null;function A_(){C_=Lc=im=null}function I_(e){var t=rm.current;Sr(rm),e._currentValue=t}function W0(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Zc(e,t){im=e,C_=Lc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ho=!0),e.firstContext=null)}function Jo(e){var t=e._currentValue;if(C_!==e)if(e={context:e,memoizedValue:t,next:null},Lc===null){if(im===null)throw Error(At(308));Lc=e,im.dependencies={lanes:0,firstContext:e}}else Lc=Lc.next=e;return t}var Su=null;function P_(e){Su===null?Su=[e]:Su.push(e)}function mS(e,t,i,s){var c=t.interleaved;return c===null?(i.next=i,P_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ds(e,s)}function Ds(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var _l=!1;function k_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zl(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Yn&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,Ds(e,i)}return c=s.interleaved,c===null?(t.next=t,P_(s)):(t.next=c.next,c.next=t),s.interleaved=t,Ds(e,i)}function Ap(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,m_(e,i)}}function Zw(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};f===null?c=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?c=f=t:f=f.next=t}else c=f=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function om(e,t,i,s){var c=e.updateQueue;_l=!1;var f=c.firstBaseUpdate,y=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var w=l,E=w.next;w.next=null,y===null?f=E:y.next=E,y=w;var T=e.alternate;T!==null&&(T=T.updateQueue,l=T.lastBaseUpdate,l!==y&&(l===null?T.firstBaseUpdate=E:l.next=E,T.lastBaseUpdate=w))}if(f!==null){var S=c.baseState;y=0,T=E=w=null,l=f;do{var I=l.lane,j=l.eventTime;if((s&I)===I){T!==null&&(T=T.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var q=e,H=l;switch(I=t,j=i,H.tag){case 1:if(q=H.payload,typeof q=="function"){S=q.call(j,S,I);break e}S=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=H.payload,I=typeof q=="function"?q.call(j,S,I):q,I==null)break e;S=Rr({},S,I);break e;case 2:_l=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,I=c.effects,I===null?c.effects=[l]:I.push(l))}else j={eventTime:j,lane:I,tag:l.tag,payload:l.payload,callback:l.callback,next:null},T===null?(E=T=j,w=S):T=T.next=j,y|=I;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;I=l,l=I.next,I.next=null,c.lastBaseUpdate=I,c.shared.pending=null}}while(1);if(T===null&&(w=S),c.baseState=w,c.firstBaseUpdate=E,c.lastBaseUpdate=T,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);zu|=y,e.lanes=y,e.memoizedState=S}}function Ww(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=i,typeof c!="function")throw Error(At(191,c));c.call(s)}}}var yS=new mE.Component().refs;function H0(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Rr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ng={isMounted:function(e){return(e=e._reactInternals)?Bu(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=Yi(),c=Rl(e),f=Os(s,c);f.payload=t,i!=null&&(f.callback=i),t=zl(e,f,c),t!==null&&(va(t,e,c,s),Ap(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=Yi(),c=Rl(e),f=Os(s,c);f.tag=1,f.payload=t,i!=null&&(f.callback=i),t=zl(e,f,c),t!==null&&(va(t,e,c,s),Ap(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Yi(),s=Rl(e),c=Os(i,s);c.tag=2,t!=null&&(c.callback=t),t=zl(e,c,s),t!==null&&(va(t,e,s,i),Ap(t,e,s))}};function Hw(e,t,i,s,c,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,f,y):t.prototype&&t.prototype.isPureReactComponent?!Uf(i,s)||!Uf(c,f):!0}function vS(e,t,i){var s=!1,c=jl,f=t.contextType;return typeof f=="object"&&f!==null?f=Jo(f):(c=po(t)?Pu:ji.current,s=t.contextTypes,f=(s=s!=null)?Yc(e,c):jl),t=new t(i,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ng,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function Xw(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&ng.enqueueReplaceState(t,t.state,null)}function X0(e,t,i,s){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=yS,k_(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=Jo(f):(f=po(t)?Pu:ji.current,c.context=Yc(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(H0(e,t,f,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&ng.enqueueReplaceState(c,c.state,null),om(e,i,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ef(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(At(309));var s=i.stateNode}if(!s)throw Error(At(147,e));var c=s,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var l=c.refs;l===yS&&(l=c.refs={}),y===null?delete l[f]:l[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(At(284));if(!i._owner)throw Error(At(290,e))}return e}function op(e,t){throw e=Object.prototype.toString.call(t),Error(At(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qw(e){var t=e._init;return t(e._payload)}function _S(e){function t(Z,$){if(e){var N=Z.deletions;N===null?(Z.deletions=[$],Z.flags|=16):N.push($)}}function i(Z,$){if(!e)return null;for(;$!==null;)t(Z,$),$=$.sibling;return null}function s(Z,$){for(Z=new Map;$!==null;)$.key!==null?Z.set($.key,$):Z.set($.index,$),$=$.sibling;return Z}function c(Z,$){return Z=Ol(Z,$),Z.index=0,Z.sibling=null,Z}function f(Z,$,N){return Z.index=N,e?(N=Z.alternate,N!==null?(N=N.index,N<$?(Z.flags|=2,$):N):(Z.flags|=2,$)):(Z.flags|=1048576,$)}function y(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function l(Z,$,N,oe){return $===null||$.tag!==6?($=Oy(N,Z.mode,oe),$.return=Z,$):($=c($,N),$.return=Z,$)}function w(Z,$,N,oe){var V=N.type;return V===Tc?T(Z,$,N.props.children,oe,N.key):$!==null&&($.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vl&&qw(V)===$.type)?(oe=c($,N.props),oe.ref=ef(Z,$,N),oe.return=Z,oe):(oe=Lp(N.type,N.key,N.props,null,Z.mode,oe),oe.ref=ef(Z,$,N),oe.return=Z,oe)}function E(Z,$,N,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==N.containerInfo||$.stateNode.implementation!==N.implementation?($=Fy(N,Z.mode,oe),$.return=Z,$):($=c($,N.children||[]),$.return=Z,$)}function T(Z,$,N,oe,V){return $===null||$.tag!==7?($=Iu(N,Z.mode,oe,V),$.return=Z,$):($=c($,N),$.return=Z,$)}function S(Z,$,N){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Oy(""+$,Z.mode,N),$.return=Z,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Xd:return N=Lp($.type,$.key,$.props,null,Z.mode,N),N.ref=ef(Z,null,$),N.return=Z,N;case Sc:return $=Fy($,Z.mode,N),$.return=Z,$;case vl:var oe=$._init;return S(Z,oe($._payload),N)}if(af($)||qh($))return $=Iu($,Z.mode,N,null),$.return=Z,$;op(Z,$)}return null}function I(Z,$,N,oe){var V=$!==null?$.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return V!==null?null:l(Z,$,""+N,oe);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xd:return N.key===V?w(Z,$,N,oe):null;case Sc:return N.key===V?E(Z,$,N,oe):null;case vl:return V=N._init,I(Z,$,V(N._payload),oe)}if(af(N)||qh(N))return V!==null?null:T(Z,$,N,oe,null);op(Z,N)}return null}function j(Z,$,N,oe,V){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return Z=Z.get(N)||null,l($,Z,""+oe,V);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Xd:return Z=Z.get(oe.key===null?N:oe.key)||null,w($,Z,oe,V);case Sc:return Z=Z.get(oe.key===null?N:oe.key)||null,E($,Z,oe,V);case vl:var D=oe._init;return j(Z,$,N,D(oe._payload),V)}if(af(oe)||qh(oe))return Z=Z.get(N)||null,T($,Z,oe,V,null);op($,oe)}return null}function q(Z,$,N,oe){for(var V=null,D=null,b=$,k=$=0,G=null;b!==null&&k<N.length;k++){b.index>k?(G=b,b=null):G=b.sibling;var Y=I(Z,b,N[k],oe);if(Y===null){b===null&&(b=G);break}e&&b&&Y.alternate===null&&t(Z,b),$=f(Y,$,k),D===null?V=Y:D.sibling=Y,D=Y,b=G}if(k===N.length)return i(Z,b),Ir&&xu(Z,k),V;if(b===null){for(;k<N.length;k++)b=S(Z,N[k],oe),b!==null&&($=f(b,$,k),D===null?V=b:D.sibling=b,D=b);return Ir&&xu(Z,k),V}for(b=s(Z,b);k<N.length;k++)G=j(b,Z,k,N[k],oe),G!==null&&(e&&G.alternate!==null&&b.delete(G.key===null?k:G.key),$=f(G,$,k),D===null?V=G:D.sibling=G,D=G);return e&&b.forEach(function(K){return t(Z,K)}),Ir&&xu(Z,k),V}function H(Z,$,N,oe){var V=qh(N);if(typeof V!="function")throw Error(At(150));if(N=V.call(N),N==null)throw Error(At(151));for(var D=V=null,b=$,k=$=0,G=null,Y=N.next();b!==null&&!Y.done;k++,Y=N.next()){b.index>k?(G=b,b=null):G=b.sibling;var K=I(Z,b,Y.value,oe);if(K===null){b===null&&(b=G);break}e&&b&&K.alternate===null&&t(Z,b),$=f(K,$,k),D===null?V=K:D.sibling=K,D=K,b=G}if(Y.done)return i(Z,b),Ir&&xu(Z,k),V;if(b===null){for(;!Y.done;k++,Y=N.next())Y=S(Z,Y.value,oe),Y!==null&&($=f(Y,$,k),D===null?V=Y:D.sibling=Y,D=Y);return Ir&&xu(Z,k),V}for(b=s(Z,b);!Y.done;k++,Y=N.next())Y=j(b,Z,k,Y.value,oe),Y!==null&&(e&&Y.alternate!==null&&b.delete(Y.key===null?k:Y.key),$=f(Y,$,k),D===null?V=Y:D.sibling=Y,D=Y);return e&&b.forEach(function(pe){return t(Z,pe)}),Ir&&xu(Z,k),V}function fe(Z,$,N,oe){if(typeof N=="object"&&N!==null&&N.type===Tc&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Xd:e:{for(var V=N.key,D=$;D!==null;){if(D.key===V){if(V=N.type,V===Tc){if(D.tag===7){i(Z,D.sibling),$=c(D,N.props.children),$.return=Z,Z=$;break e}}else if(D.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vl&&qw(V)===D.type){i(Z,D.sibling),$=c(D,N.props),$.ref=ef(Z,D,N),$.return=Z,Z=$;break e}i(Z,D);break}else t(Z,D);D=D.sibling}N.type===Tc?($=Iu(N.props.children,Z.mode,oe,N.key),$.return=Z,Z=$):(oe=Lp(N.type,N.key,N.props,null,Z.mode,oe),oe.ref=ef(Z,$,N),oe.return=Z,Z=oe)}return y(Z);case Sc:e:{for(D=N.key;$!==null;){if($.key===D)if($.tag===4&&$.stateNode.containerInfo===N.containerInfo&&$.stateNode.implementation===N.implementation){i(Z,$.sibling),$=c($,N.children||[]),$.return=Z,Z=$;break e}else{i(Z,$);break}else t(Z,$);$=$.sibling}$=Fy(N,Z.mode,oe),$.return=Z,Z=$}return y(Z);case vl:return D=N._init,fe(Z,$,D(N._payload),oe)}if(af(N))return q(Z,$,N,oe);if(qh(N))return H(Z,$,N,oe);op(Z,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,$!==null&&$.tag===6?(i(Z,$.sibling),$=c($,N),$.return=Z,Z=$):(i(Z,$),$=Oy(N,Z.mode,oe),$.return=Z,Z=$),y(Z)):i(Z,$)}return fe}var Qc=_S(!0),xS=_S(!1),ad={},es=$l(ad),Zf=$l(ad),Wf=$l(ad);function Tu(e){if(e===ad)throw Error(At(174));return e}function M_(e,t){switch(xr(Wf,t),xr(Zf,e),xr(es,ad),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C0(t,e)}Sr(es),xr(es,t)}function eh(){Sr(es),Sr(Zf),Sr(Wf)}function wS(e){Tu(Wf.current);var t=Tu(es.current),i=C0(t,e.type);t!==i&&(xr(Zf,e),xr(es,i))}function z_(e){Zf.current===e&&(Sr(es),Sr(Zf))}var Mr=$l(0);function am(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Py=[];function L_(){for(var e=0;e<Py.length;e++)Py[e]._workInProgressVersionPrimary=null;Py.length=0}var Ip=Gs.ReactCurrentDispatcher,ky=Gs.ReactCurrentBatchConfig,Mu=0,Lr=null,ai=null,pi=null,sm=!1,bf=!1,Hf=0,oM=0;function zi(){throw Error(At(321))}function R_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!_a(e[i],t[i]))return!1;return!0}function O_(e,t,i,s,c,f){if(Mu=f,Lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ip.current=e===null||e.memoizedState===null?uM:cM,e=i(s,c),bf){f=0;do{if(bf=!1,Hf=0,25<=f)throw Error(At(301));f+=1,pi=ai=null,t.updateQueue=null,Ip.current=hM,e=i(s,c)}while(bf)}if(Ip.current=lm,t=ai!==null&&ai.next!==null,Mu=0,pi=ai=Lr=null,sm=!1,t)throw Error(At(300));return e}function F_(){var e=Hf!==0;return Hf=0,e}function Ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?Lr.memoizedState=pi=e:pi=pi.next=e,pi}function Qo(){if(ai===null){var e=Lr.alternate;e=e!==null?e.memoizedState:null}else e=ai.next;var t=pi===null?Lr.memoizedState:pi.next;if(t!==null)pi=t,ai=e;else{if(e===null)throw Error(At(310));ai=e,e={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},pi===null?Lr.memoizedState=pi=e:pi=pi.next=e}return pi}function Xf(e,t){return typeof t=="function"?t(e):t}function My(e){var t=Qo(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var s=ai,c=s.baseQueue,f=i.pending;if(f!==null){if(c!==null){var y=c.next;c.next=f.next,f.next=y}s.baseQueue=c=f,i.pending=null}if(c!==null){f=c.next,s=s.baseState;var l=y=null,w=null,E=f;do{var T=E.lane;if((Mu&T)===T)w!==null&&(w=w.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),s=E.hasEagerState?E.eagerState:e(s,E.action);else{var S={lane:T,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};w===null?(l=w=S,y=s):w=w.next=S,Lr.lanes|=T,zu|=T}E=E.next}while(E!==null&&E!==f);w===null?y=s:w.next=l,_a(s,t.memoizedState)||(ho=!0),t.memoizedState=s,t.baseState=y,t.baseQueue=w,i.lastRenderedState=s}if(e=i.interleaved,e!==null){c=e;do f=c.lane,Lr.lanes|=f,zu|=f,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function zy(e){var t=Qo(),i=t.queue;if(i===null)throw Error(At(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,f=t.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do f=e(f,y.action),y=y.next;while(y!==c);_a(f,t.memoizedState)||(ho=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),i.lastRenderedState=f}return[f,s]}function bS(){}function ES(e,t){var i=Lr,s=Qo(),c=t(),f=!_a(s.memoizedState,c);if(f&&(s.memoizedState=c,ho=!0),s=s.queue,j_(CS.bind(null,i,s,e),[e]),s.getSnapshot!==t||f||pi!==null&&pi.memoizedState.tag&1){if(i.flags|=2048,qf(9,TS.bind(null,i,s,c,t),void 0,null),mi===null)throw Error(At(349));Mu&30||SS(i,t,c)}return c}function SS(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function TS(e,t,i,s){t.value=i,t.getSnapshot=s,AS(t)&&IS(e)}function CS(e,t,i){return i(function(){AS(t)&&IS(e)})}function AS(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!_a(e,i)}catch{return!0}}function IS(e){var t=Ds(e,1);t!==null&&va(t,e,1,-1)}function Kw(e){var t=Ha();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xf,lastRenderedState:e},t.queue=e,e=e.dispatch=lM.bind(null,Lr,e),[t.memoizedState,e]}function qf(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function PS(){return Qo().memoizedState}function Pp(e,t,i,s){var c=Ha();Lr.flags|=e,c.memoizedState=qf(1|t,i,void 0,s===void 0?null:s)}function rg(e,t,i,s){var c=Qo();s=s===void 0?null:s;var f=void 0;if(ai!==null){var y=ai.memoizedState;if(f=y.destroy,s!==null&&R_(s,y.deps)){c.memoizedState=qf(t,i,f,s);return}}Lr.flags|=e,c.memoizedState=qf(1|t,i,f,s)}function Yw(e,t){return Pp(8390656,8,e,t)}function j_(e,t){return rg(2048,8,e,t)}function kS(e,t){return rg(4,2,e,t)}function MS(e,t){return rg(4,4,e,t)}function zS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function LS(e,t,i){return i=i!=null?i.concat([e]):null,rg(4,4,zS.bind(null,t,e),i)}function D_(){}function RS(e,t){var i=Qo();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&R_(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function OS(e,t){var i=Qo();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&R_(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function FS(e,t,i){return Mu&21?(_a(i,t)||(i=BE(),Lr.lanes|=i,zu|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ho=!0),e.memoizedState=i)}function aM(e,t){var i=sr;sr=i!==0&&4>i?i:4,e(!0);var s=ky.transition;ky.transition={};try{e(!1),t()}finally{sr=i,ky.transition=s}}function jS(){return Qo().memoizedState}function sM(e,t,i){var s=Rl(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},DS(e))BS(t,i);else if(i=mS(e,t,i,s),i!==null){var c=Yi();va(i,e,s,c),NS(i,t,s)}}function lM(e,t,i){var s=Rl(e),c={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(DS(e))BS(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,l=f(y,i);if(c.hasEagerState=!0,c.eagerState=l,_a(l,y)){var w=t.interleaved;w===null?(c.next=c,P_(t)):(c.next=w.next,w.next=c),t.interleaved=c;return}}catch{}finally{}i=mS(e,t,c,s),i!==null&&(c=Yi(),va(i,e,s,c),NS(i,t,s))}}function DS(e){var t=e.alternate;return e===Lr||t!==null&&t===Lr}function BS(e,t){bf=sm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function NS(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,m_(e,i)}}var lm={readContext:Jo,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},uM={readContext:Jo,useCallback:function(e,t){return Ha().memoizedState=[e,t===void 0?null:t],e},useContext:Jo,useEffect:Yw,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Pp(4194308,4,zS.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Pp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pp(4,2,e,t)},useMemo:function(e,t){var i=Ha();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=Ha();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=sM.bind(null,Lr,e),[s.memoizedState,e]},useRef:function(e){var t=Ha();return e={current:e},t.memoizedState=e},useState:Kw,useDebugValue:D_,useDeferredValue:function(e){return Ha().memoizedState=e},useTransition:function(){var e=Kw(!1),t=e[0];return e=aM.bind(null,e[1]),Ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Lr,c=Ha();if(Ir){if(i===void 0)throw Error(At(407));i=i()}else{if(i=t(),mi===null)throw Error(At(349));Mu&30||SS(s,t,i)}c.memoizedState=i;var f={value:i,getSnapshot:t};return c.queue=f,Yw(CS.bind(null,s,f,e),[e]),s.flags|=2048,qf(9,TS.bind(null,s,f,i,t),void 0,null),i},useId:function(){var e=Ha(),t=mi.identifierPrefix;if(Ir){var i=Rs,s=Ls;i=(s&~(1<<32-ya(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=Hf++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=oM++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cM={readContext:Jo,useCallback:RS,useContext:Jo,useEffect:j_,useImperativeHandle:LS,useInsertionEffect:kS,useLayoutEffect:MS,useMemo:OS,useReducer:My,useRef:PS,useState:function(){return My(Xf)},useDebugValue:D_,useDeferredValue:function(e){var t=Qo();return FS(t,ai.memoizedState,e)},useTransition:function(){var e=My(Xf)[0],t=Qo().memoizedState;return[e,t]},useMutableSource:bS,useSyncExternalStore:ES,useId:jS,unstable_isNewReconciler:!1},hM={readContext:Jo,useCallback:RS,useContext:Jo,useEffect:j_,useImperativeHandle:LS,useInsertionEffect:kS,useLayoutEffect:MS,useMemo:OS,useReducer:zy,useRef:PS,useState:function(){return zy(Xf)},useDebugValue:D_,useDeferredValue:function(e){var t=Qo();return ai===null?t.memoizedState=e:FS(t,ai.memoizedState,e)},useTransition:function(){var e=zy(Xf)[0],t=Qo().memoizedState;return[e,t]},useMutableSource:bS,useSyncExternalStore:ES,useId:jS,unstable_isNewReconciler:!1};function th(e,t){try{var i="",s=t;do i+=BP(s),s=s.return;while(s);var c=i}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Ly(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function q0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var fM=typeof WeakMap=="function"?WeakMap:Map;function US(e,t,i){i=Os(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){cm||(cm=!0,ov=s),q0(e,t)},i}function $S(e,t,i){i=Os(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;i.payload=function(){return s(c)},i.callback=function(){q0(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(i.callback=function(){q0(e,t),typeof s!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function Jw(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new fM;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||(c.add(i),e=CM.bind(null,e,t,i),t.then(e,e))}function Qw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function eb(e,t,i,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Os(-1,1),t.tag=2,zl(i,t,1))),i.lanes|=1),e)}var dM=Gs.ReactCurrentOwner,ho=!1;function Hi(e,t,i,s){t.child=e===null?xS(t,null,i,s):Qc(t,e.child,i,s)}function tb(e,t,i,s,c){i=i.render;var f=t.ref;return Zc(t,c),s=O_(e,t,i,s,f,c),i=F_(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Bs(e,t,c)):(Ir&&i&&E_(t),t.flags|=1,Hi(e,t,s,c),t.child)}function nb(e,t,i,s,c){if(e===null){var f=i.type;return typeof f=="function"&&!W_(f)&&f.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=f,VS(e,t,f,s,c)):(e=Lp(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&c)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:Uf,i(y,s)&&e.ref===t.ref)return Bs(e,t,c)}return t.flags|=1,e=Ol(f,s),e.ref=t.ref,e.return=t,t.child=e}function VS(e,t,i,s,c){if(e!==null){var f=e.memoizedProps;if(Uf(f,s)&&e.ref===t.ref)if(ho=!1,t.pendingProps=s=f,(e.lanes&c)!==0)e.flags&131072&&(ho=!0);else return t.lanes=e.lanes,Bs(e,t,c)}return K0(e,t,i,s,c)}function GS(e,t,i){var s=t.pendingProps,c=s.children,f=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xr(Oc,Eo),Eo|=i;else{if(!(i&1073741824))return e=f!==null?f.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xr(Oc,Eo),Eo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=f!==null?f.baseLanes:i,xr(Oc,Eo),Eo|=s}else f!==null?(s=f.baseLanes|i,t.memoizedState=null):s=i,xr(Oc,Eo),Eo|=s;return Hi(e,t,c,i),t.child}function ZS(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function K0(e,t,i,s,c){var f=po(i)?Pu:ji.current;return f=Yc(t,f),Zc(t,c),i=O_(e,t,i,s,f,c),s=F_(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Bs(e,t,c)):(Ir&&s&&E_(t),t.flags|=1,Hi(e,t,i,c),t.child)}function rb(e,t,i,s,c){if(po(i)){var f=!0;em(t)}else f=!1;if(Zc(t,c),t.stateNode===null)kp(e,t),vS(t,i,s),X0(t,i,s,c),s=!0;else if(e===null){var y=t.stateNode,l=t.memoizedProps;y.props=l;var w=y.context,E=i.contextType;typeof E=="object"&&E!==null?E=Jo(E):(E=po(i)?Pu:ji.current,E=Yc(t,E));var T=i.getDerivedStateFromProps,S=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function";S||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==s||w!==E)&&Xw(t,y,s,E),_l=!1;var I=t.memoizedState;y.state=I,om(t,s,y,c),w=t.memoizedState,l!==s||I!==w||fo.current||_l?(typeof T=="function"&&(H0(t,i,T,s),w=t.memoizedState),(l=_l||Hw(t,i,l,s,I,w,E))?(S||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=w),y.props=s,y.state=w,y.context=E,s=l):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{y=t.stateNode,gS(e,t),l=t.memoizedProps,E=t.type===t.elementType?l:ca(t.type,l),y.props=E,S=t.pendingProps,I=y.context,w=i.contextType,typeof w=="object"&&w!==null?w=Jo(w):(w=po(i)?Pu:ji.current,w=Yc(t,w));var j=i.getDerivedStateFromProps;(T=typeof j=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(l!==S||I!==w)&&Xw(t,y,s,w),_l=!1,I=t.memoizedState,y.state=I,om(t,s,y,c);var q=t.memoizedState;l!==S||I!==q||fo.current||_l?(typeof j=="function"&&(H0(t,i,j,s),q=t.memoizedState),(E=_l||Hw(t,i,E,s,I,q,w)||!1)?(T||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,q,w),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,q,w)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=q),y.props=s,y.state=q,y.context=w,s=E):(typeof y.componentDidUpdate!="function"||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),s=!1)}return Y0(e,t,i,s,f,c)}function Y0(e,t,i,s,c,f){ZS(e,t);var y=(t.flags&128)!==0;if(!s&&!y)return c&&$w(t,i,!1),Bs(e,t,f);s=t.stateNode,dM.current=t;var l=y&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&y?(t.child=Qc(t,e.child,null,f),t.child=Qc(t,null,l,f)):Hi(e,t,l,f),t.memoizedState=s.state,c&&$w(t,i,!0),t.child}function WS(e){var t=e.stateNode;t.pendingContext?Uw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Uw(e,t.context,!1),M_(e,t.containerInfo)}function ib(e,t,i,s,c){return Jc(),T_(c),t.flags|=256,Hi(e,t,i,s),t.child}var J0={dehydrated:null,treeContext:null,retryLane:0};function Q0(e){return{baseLanes:e,cachePool:null,transitions:null}}function HS(e,t,i){var s=t.pendingProps,c=Mr.current,f=!1,y=(t.flags&128)!==0,l;if((l=y)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),xr(Mr,c&1),e===null)return Z0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=s.children,e=s.fallback,f?(s=t.mode,f=t.child,y={mode:"hidden",children:y},!(s&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=ag(y,s,0,null),e=Iu(e,s,i,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Q0(i),t.memoizedState=J0,e):B_(t,y));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return pM(e,t,y,s,l,c,i);if(f){f=s.fallback,y=t.mode,c=e.child,l=c.sibling;var w={mode:"hidden",children:s.children};return!(y&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=w,t.deletions=null):(s=Ol(c,w),s.subtreeFlags=c.subtreeFlags&14680064),l!==null?f=Ol(l,f):(f=Iu(f,y,i,null),f.flags|=2),f.return=t,s.return=t,s.sibling=f,t.child=s,s=f,f=t.child,y=e.child.memoizedState,y=y===null?Q0(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~i,t.memoizedState=J0,s}return f=e.child,e=f.sibling,s=Ol(f,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function B_(e,t){return t=ag({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ap(e,t,i,s){return s!==null&&T_(s),Qc(t,e.child,null,i),e=B_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pM(e,t,i,s,c,f,y){if(i)return t.flags&256?(t.flags&=-257,s=Ly(Error(At(422))),ap(e,t,y,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=s.fallback,c=t.mode,s=ag({mode:"visible",children:s.children},c,0,null),f=Iu(f,c,y,null),f.flags|=2,s.return=t,f.return=t,s.sibling=f,t.child=s,t.mode&1&&Qc(t,e.child,null,y),t.child.memoizedState=Q0(y),t.memoizedState=J0,f);if(!(t.mode&1))return ap(e,t,y,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var l=s.dgst;return s=l,f=Error(At(419)),s=Ly(f,s,void 0),ap(e,t,y,s)}if(l=(y&e.childLanes)!==0,ho||l){if(s=mi,s!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|y)?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,Ds(e,c),va(s,e,c,-1))}return Z_(),s=Ly(Error(At(421))),ap(e,t,y,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=AM.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,Co=Ml(c.nextSibling),Io=t,Ir=!0,fa=null,e!==null&&(Wo[Ho++]=Ls,Wo[Ho++]=Rs,Wo[Ho++]=ku,Ls=e.id,Rs=e.overflow,ku=t),t=B_(t,s.children),t.flags|=4096,t)}function ob(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),W0(e.return,t,i)}function Ry(e,t,i,s,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=i,f.tailMode=c)}function XS(e,t,i){var s=t.pendingProps,c=s.revealOrder,f=s.tail;if(Hi(e,t,s.children,i),s=Mr.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ob(e,i,t);else if(e.tag===19)ob(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(xr(Mr,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&am(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),Ry(t,!1,c,i,f);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&am(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Ry(t,!0,i,null,f);break;case"together":Ry(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bs(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),zu|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(At(153));if(t.child!==null){for(e=t.child,i=Ol(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ol(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function mM(e,t,i){switch(t.tag){case 3:WS(t),Jc();break;case 5:wS(t);break;case 1:po(t.type)&&em(t);break;case 4:M_(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;xr(rm,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(xr(Mr,Mr.current&1),t.flags|=128,null):i&t.child.childLanes?HS(e,t,i):(xr(Mr,Mr.current&1),e=Bs(e,t,i),e!==null?e.sibling:null);xr(Mr,Mr.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return XS(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),xr(Mr,Mr.current),s)break;return null;case 22:case 23:return t.lanes=0,GS(e,t,i)}return Bs(e,t,i)}var qS,ev,KS,YS;qS=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ev=function(){};KS=function(e,t,i,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,Tu(es.current);var f=null;switch(i){case"input":c=b0(e,c),s=b0(e,s),f=[];break;case"select":c=Rr({},c,{value:void 0}),s=Rr({},s,{value:void 0}),f=[];break;case"textarea":c=T0(e,c),s=T0(e,s),f=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Jp)}A0(i,s);var y;i=null;for(E in c)if(!s.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var l=c[E];for(y in l)l.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Rf.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in s){var w=s[E];if(l=c!=null?c[E]:void 0,s.hasOwnProperty(E)&&w!==l&&(w!=null||l!=null))if(E==="style")if(l){for(y in l)!l.hasOwnProperty(y)||w&&w.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in w)w.hasOwnProperty(y)&&l[y]!==w[y]&&(i||(i={}),i[y]=w[y])}else i||(f||(f=[]),f.push(E,i)),i=w;else E==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,l=l?l.__html:void 0,w!=null&&l!==w&&(f=f||[]).push(E,w)):E==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(E,""+w):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Rf.hasOwnProperty(E)?(w!=null&&E==="onScroll"&&Er("scroll",e),f||l===w||(f=[])):(f=f||[]).push(E,w))}i&&(f=f||[]).push("style",i);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};YS=function(e,t,i,s){i!==s&&(t.flags|=4)};function tf(e,t){if(!Ir)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Li(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function gM(e,t,i){var s=t.pendingProps;switch(S_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(t),null;case 1:return po(t.type)&&Qp(),Li(t),null;case 3:return s=t.stateNode,eh(),Sr(fo),Sr(ji),L_(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ip(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fa!==null&&(lv(fa),fa=null))),ev(e,t),Li(t),null;case 5:z_(t);var c=Tu(Wf.current);if(i=t.type,e!==null&&t.stateNode!=null)KS(e,t,i,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(At(166));return Li(t),null}if(e=Tu(es.current),ip(t)){s=t.stateNode,i=t.type;var f=t.memoizedProps;switch(s[Xa]=t,s[Gf]=f,e=(t.mode&1)!==0,i){case"dialog":Er("cancel",s),Er("close",s);break;case"iframe":case"object":case"embed":Er("load",s);break;case"video":case"audio":for(c=0;c<lf.length;c++)Er(lf[c],s);break;case"source":Er("error",s);break;case"img":case"image":case"link":Er("error",s),Er("load",s);break;case"details":Er("toggle",s);break;case"input":pw(s,f),Er("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!f.multiple},Er("invalid",s);break;case"textarea":gw(s,f),Er("invalid",s)}A0(i,f),c=null;for(var y in f)if(f.hasOwnProperty(y)){var l=f[y];y==="children"?typeof l=="string"?s.textContent!==l&&(f.suppressHydrationWarning!==!0&&rp(s.textContent,l,e),c=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(f.suppressHydrationWarning!==!0&&rp(s.textContent,l,e),c=["children",""+l]):Rf.hasOwnProperty(y)&&l!=null&&y==="onScroll"&&Er("scroll",s)}switch(i){case"input":qd(s),mw(s,f,!0);break;case"textarea":qd(s),yw(s);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(s.onclick=Jp)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SE(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=y.createElement(i,{is:s.is}):(e=y.createElement(i),i==="select"&&(y=e,s.multiple?y.multiple=!0:s.size&&(y.size=s.size))):e=y.createElementNS(e,i),e[Xa]=t,e[Gf]=s,qS(e,t,!1,!1),t.stateNode=e;e:{switch(y=I0(i,s),i){case"dialog":Er("cancel",e),Er("close",e),c=s;break;case"iframe":case"object":case"embed":Er("load",e),c=s;break;case"video":case"audio":for(c=0;c<lf.length;c++)Er(lf[c],e);c=s;break;case"source":Er("error",e),c=s;break;case"img":case"image":case"link":Er("error",e),Er("load",e),c=s;break;case"details":Er("toggle",e),c=s;break;case"input":pw(e,s),c=b0(e,s),Er("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Rr({},s,{value:void 0}),Er("invalid",e);break;case"textarea":gw(e,s),c=T0(e,s),Er("invalid",e);break;default:c=s}A0(i,c),l=c;for(f in l)if(l.hasOwnProperty(f)){var w=l[f];f==="style"?AE(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&TE(e,w)):f==="children"?typeof w=="string"?(i!=="textarea"||w!=="")&&Of(e,w):typeof w=="number"&&Of(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Rf.hasOwnProperty(f)?w!=null&&f==="onScroll"&&Er("scroll",e):w!=null&&u_(e,f,w,y))}switch(i){case"input":qd(e),mw(e,s,!1);break;case"textarea":qd(e),yw(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Fl(s.value));break;case"select":e.multiple=!!s.multiple,f=s.value,f!=null?Uc(e,!!s.multiple,f,!1):s.defaultValue!=null&&Uc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Jp)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Li(t),null;case 6:if(e&&t.stateNode!=null)YS(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(At(166));if(i=Tu(Wf.current),Tu(es.current),ip(t)){if(s=t.stateNode,i=t.memoizedProps,s[Xa]=t,(f=s.nodeValue!==i)&&(e=Io,e!==null))switch(e.tag){case 3:rp(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rp(s.nodeValue,i,(e.mode&1)!==0)}f&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[Xa]=t,t.stateNode=s}return Li(t),null;case 13:if(Sr(Mr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ir&&Co!==null&&t.mode&1&&!(t.flags&128))pS(),Jc(),t.flags|=98560,f=!1;else if(f=ip(t),s!==null&&s.dehydrated!==null){if(e===null){if(!f)throw Error(At(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(At(317));f[Xa]=t}else Jc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Li(t),f=!1}else fa!==null&&(lv(fa),fa=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Mr.current&1?si===0&&(si=3):Z_())),t.updateQueue!==null&&(t.flags|=4),Li(t),null);case 4:return eh(),ev(e,t),e===null&&$f(t.stateNode.containerInfo),Li(t),null;case 10:return I_(t.type._context),Li(t),null;case 17:return po(t.type)&&Qp(),Li(t),null;case 19:if(Sr(Mr),f=t.memoizedState,f===null)return Li(t),null;if(s=(t.flags&128)!==0,y=f.rendering,y===null)if(s)tf(f,!1);else{if(si!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=am(e),y!==null){for(t.flags|=128,tf(f,!1),s=y.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)f=i,e=s,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return xr(Mr,Mr.current&1|2),t.child}e=e.sibling}f.tail!==null&&Hr()>nh&&(t.flags|=128,s=!0,tf(f,!1),t.lanes=4194304)}else{if(!s)if(e=am(y),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),tf(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Ir)return Li(t),null}else 2*Hr()-f.renderingStartTime>nh&&i!==1073741824&&(t.flags|=128,s=!0,tf(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(i=f.last,i!==null?i.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Hr(),t.sibling=null,i=Mr.current,xr(Mr,s?i&1|2:i&1),t):(Li(t),null);case 22:case 23:return G_(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Eo&1073741824&&(Li(t),t.subtreeFlags&6&&(t.flags|=8192)):Li(t),null;case 24:return null;case 25:return null}throw Error(At(156,t.tag))}function yM(e,t){switch(S_(t),t.tag){case 1:return po(t.type)&&Qp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eh(),Sr(fo),Sr(ji),L_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return z_(t),null;case 13:if(Sr(Mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(At(340));Jc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Sr(Mr),null;case 4:return eh(),null;case 10:return I_(t.type._context),null;case 22:case 23:return G_(),null;case 24:return null;default:return null}}var sp=!1,Oi=!1,vM=typeof WeakSet=="function"?WeakSet:Set,nn=null;function Rc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){Nr(e,t,s)}else i.current=null}function tv(e,t,i){try{i()}catch(s){Nr(e,t,s)}}var ab=!1;function _M(e,t){if(D0=qp,e=tS(),b_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,f=s.focusNode;s=s.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,l=-1,w=-1,E=0,T=0,S=e,I=null;t:for(;;){for(var j;S!==i||c!==0&&S.nodeType!==3||(l=y+c),S!==f||s!==0&&S.nodeType!==3||(w=y+s),S.nodeType===3&&(y+=S.nodeValue.length),(j=S.firstChild)!==null;)I=S,S=j;for(;;){if(S===e)break t;if(I===i&&++E===c&&(l=y),I===f&&++T===s&&(w=y),(j=S.nextSibling)!==null)break;S=I,I=S.parentNode}S=j}i=l===-1||w===-1?null:{start:l,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(B0={focusedElem:e,selectionRange:i},qp=!1,nn=t;nn!==null;)if(t=nn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nn=e;else for(;nn!==null;){t=nn;try{var q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(q!==null){var H=q.memoizedProps,fe=q.memoizedState,Z=t.stateNode,$=Z.getSnapshotBeforeUpdate(t.elementType===t.type?H:ca(t.type,H),fe);Z.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(At(163))}}catch(oe){Nr(t,t.return,oe)}if(e=t.sibling,e!==null){e.return=t.return,nn=e;break}nn=t.return}return q=ab,ab=!1,q}function Ef(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&tv(t,i,f)}c=c.next}while(c!==s)}}function ig(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function nv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function JS(e){var t=e.alternate;t!==null&&(e.alternate=null,JS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xa],delete t[Gf],delete t[$0],delete t[tM],delete t[nM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QS(e){return e.tag===5||e.tag===3||e.tag===4}function sb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rv(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Jp));else if(s!==4&&(e=e.child,e!==null))for(rv(e,t,i),e=e.sibling;e!==null;)rv(e,t,i),e=e.sibling}function iv(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(iv(e,t,i),e=e.sibling;e!==null;)iv(e,t,i),e=e.sibling}var bi=null,ha=!1;function gl(e,t,i){for(i=i.child;i!==null;)eT(e,t,i),i=i.sibling}function eT(e,t,i){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Km,i)}catch{}switch(i.tag){case 5:Oi||Rc(i,t);case 6:var s=bi,c=ha;bi=null,gl(e,t,i),bi=s,ha=c,bi!==null&&(ha?(e=bi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):bi.removeChild(i.stateNode));break;case 18:bi!==null&&(ha?(e=bi,i=i.stateNode,e.nodeType===8?Ay(e.parentNode,i):e.nodeType===1&&Ay(e,i),Bf(e)):Ay(bi,i.stateNode));break;case 4:s=bi,c=ha,bi=i.stateNode.containerInfo,ha=!0,gl(e,t,i),bi=s,ha=c;break;case 0:case 11:case 14:case 15:if(!Oi&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var f=c,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&tv(i,t,y),c=c.next}while(c!==s)}gl(e,t,i);break;case 1:if(!Oi&&(Rc(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(l){Nr(i,t,l)}gl(e,t,i);break;case 21:gl(e,t,i);break;case 22:i.mode&1?(Oi=(s=Oi)||i.memoizedState!==null,gl(e,t,i),Oi=s):gl(e,t,i);break;default:gl(e,t,i)}}function lb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new vM),t.forEach(function(s){var c=IM.bind(null,e,s);i.has(s)||(i.add(s),s.then(c,c))})}}function ua(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s];try{var f=e,y=t,l=y;e:for(;l!==null;){switch(l.tag){case 5:bi=l.stateNode,ha=!1;break e;case 3:bi=l.stateNode.containerInfo,ha=!0;break e;case 4:bi=l.stateNode.containerInfo,ha=!0;break e}l=l.return}if(bi===null)throw Error(At(160));eT(f,y,c),bi=null,ha=!1;var w=c.alternate;w!==null&&(w.return=null),c.return=null}catch(E){Nr(c,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tT(t,e),t=t.sibling}function tT(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ua(t,e),Wa(e),s&4){try{Ef(3,e,e.return),ig(3,e)}catch(H){Nr(e,e.return,H)}try{Ef(5,e,e.return)}catch(H){Nr(e,e.return,H)}}break;case 1:ua(t,e),Wa(e),s&512&&i!==null&&Rc(i,i.return);break;case 5:if(ua(t,e),Wa(e),s&512&&i!==null&&Rc(i,i.return),e.flags&32){var c=e.stateNode;try{Of(c,"")}catch(H){Nr(e,e.return,H)}}if(s&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,y=i!==null?i.memoizedProps:f,l=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{l==="input"&&f.type==="radio"&&f.name!=null&&bE(c,f),I0(l,y);var E=I0(l,f);for(y=0;y<w.length;y+=2){var T=w[y],S=w[y+1];T==="style"?AE(c,S):T==="dangerouslySetInnerHTML"?TE(c,S):T==="children"?Of(c,S):u_(c,T,S,E)}switch(l){case"input":E0(c,f);break;case"textarea":EE(c,f);break;case"select":var I=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var j=f.value;j!=null?Uc(c,!!f.multiple,j,!1):I!==!!f.multiple&&(f.defaultValue!=null?Uc(c,!!f.multiple,f.defaultValue,!0):Uc(c,!!f.multiple,f.multiple?[]:"",!1))}c[Gf]=f}catch(H){Nr(e,e.return,H)}}break;case 6:if(ua(t,e),Wa(e),s&4){if(e.stateNode===null)throw Error(At(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(H){Nr(e,e.return,H)}}break;case 3:if(ua(t,e),Wa(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Bf(t.containerInfo)}catch(H){Nr(e,e.return,H)}break;case 4:ua(t,e),Wa(e);break;case 13:ua(t,e),Wa(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||($_=Hr())),s&4&&lb(e);break;case 22:if(T=i!==null&&i.memoizedState!==null,e.mode&1?(Oi=(E=Oi)||T,ua(t,e),Oi=E):ua(t,e),Wa(e),s&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!T&&e.mode&1)for(nn=e,T=e.child;T!==null;){for(S=nn=T;nn!==null;){switch(I=nn,j=I.child,I.tag){case 0:case 11:case 14:case 15:Ef(4,I,I.return);break;case 1:Rc(I,I.return);var q=I.stateNode;if(typeof q.componentWillUnmount=="function"){s=I,i=I.return;try{t=s,q.props=t.memoizedProps,q.state=t.memoizedState,q.componentWillUnmount()}catch(H){Nr(s,i,H)}}break;case 5:Rc(I,I.return);break;case 22:if(I.memoizedState!==null){cb(S);continue}}j!==null?(j.return=I,nn=j):cb(S)}T=T.sibling}e:for(T=null,S=e;;){if(S.tag===5){if(T===null){T=S;try{c=S.stateNode,E?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(l=S.stateNode,w=S.memoizedProps.style,y=w!=null&&w.hasOwnProperty("display")?w.display:null,l.style.display=CE("display",y))}catch(H){Nr(e,e.return,H)}}}else if(S.tag===6){if(T===null)try{S.stateNode.nodeValue=E?"":S.memoizedProps}catch(H){Nr(e,e.return,H)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;T===S&&(T=null),S=S.return}T===S&&(T=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:ua(t,e),Wa(e),s&4&&lb(e);break;case 21:break;default:ua(t,e),Wa(e)}}function Wa(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(QS(i)){var s=i;break e}i=i.return}throw Error(At(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(Of(c,""),s.flags&=-33);var f=sb(e);iv(e,f,c);break;case 3:case 4:var y=s.stateNode.containerInfo,l=sb(e);rv(e,l,y);break;default:throw Error(At(161))}}catch(w){Nr(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xM(e,t,i){nn=e,nT(e)}function nT(e,t,i){for(var s=(e.mode&1)!==0;nn!==null;){var c=nn,f=c.child;if(c.tag===22&&s){var y=c.memoizedState!==null||sp;if(!y){var l=c.alternate,w=l!==null&&l.memoizedState!==null||Oi;l=sp;var E=Oi;if(sp=y,(Oi=w)&&!E)for(nn=c;nn!==null;)y=nn,w=y.child,y.tag===22&&y.memoizedState!==null?hb(c):w!==null?(w.return=y,nn=w):hb(c);for(;f!==null;)nn=f,nT(f),f=f.sibling;nn=c,sp=l,Oi=E}ub(e)}else c.subtreeFlags&8772&&f!==null?(f.return=c,nn=f):ub(e)}}function ub(e){for(;nn!==null;){var t=nn;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Oi||ig(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Oi)if(i===null)s.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:ca(t.type,i.memoizedProps);s.componentDidUpdate(c,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Ww(t,f,s);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Ww(t,y,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&i.focus();break;case"img":w.src&&(i.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var T=E.memoizedState;if(T!==null){var S=T.dehydrated;S!==null&&Bf(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(At(163))}Oi||t.flags&512&&nv(t)}catch(I){Nr(t,t.return,I)}}if(t===e){nn=null;break}if(i=t.sibling,i!==null){i.return=t.return,nn=i;break}nn=t.return}}function cb(e){for(;nn!==null;){var t=nn;if(t===e){nn=null;break}var i=t.sibling;if(i!==null){i.return=t.return,nn=i;break}nn=t.return}}function hb(e){for(;nn!==null;){var t=nn;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{ig(4,t)}catch(w){Nr(t,i,w)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(w){Nr(t,c,w)}}var f=t.return;try{nv(t)}catch(w){Nr(t,f,w)}break;case 5:var y=t.return;try{nv(t)}catch(w){Nr(t,y,w)}}}catch(w){Nr(t,t.return,w)}if(t===e){nn=null;break}var l=t.sibling;if(l!==null){l.return=t.return,nn=l;break}nn=t.return}}var wM=Math.ceil,um=Gs.ReactCurrentDispatcher,N_=Gs.ReactCurrentOwner,Yo=Gs.ReactCurrentBatchConfig,Yn=0,mi=null,Qr=null,Si=0,Eo=0,Oc=$l(0),si=0,Kf=null,zu=0,og=0,U_=0,Sf=null,uo=null,$_=0,nh=1/0,ks=null,cm=!1,ov=null,Ll=null,lp=!1,Cl=null,hm=0,Tf=0,av=null,Mp=-1,zp=0;function Yi(){return Yn&6?Hr():Mp!==-1?Mp:Mp=Hr()}function Rl(e){return e.mode&1?Yn&2&&Si!==0?Si&-Si:iM.transition!==null?(zp===0&&(zp=BE()),zp):(e=sr,e!==0||(e=window.event,e=e===void 0?16:WE(e.type)),e):1}function va(e,t,i,s){if(50<Tf)throw Tf=0,av=null,Error(At(185));rd(e,i,s),(!(Yn&2)||e!==mi)&&(e===mi&&(!(Yn&2)&&(og|=i),si===4&&El(e,Si)),mo(e,s),i===1&&Yn===0&&!(t.mode&1)&&(nh=Hr()+500,tg&&Vl()))}function mo(e,t){var i=e.callbackNode;ik(e,t);var s=Xp(e,e===mi?Si:0);if(s===0)i!==null&&xw(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&xw(i),t===1)e.tag===0?rM(fb.bind(null,e)):hS(fb.bind(null,e)),Qk(function(){!(Yn&6)&&Vl()}),i=null;else{switch(NE(s)){case 1:i=p_;break;case 4:i=jE;break;case 16:i=Hp;break;case 536870912:i=DE;break;default:i=Hp}i=cT(i,rT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function rT(e,t){if(Mp=-1,zp=0,Yn&6)throw Error(At(327));var i=e.callbackNode;if(Wc()&&e.callbackNode!==i)return null;var s=Xp(e,e===mi?Si:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=fm(e,s);else{t=s;var c=Yn;Yn|=2;var f=oT();(mi!==e||Si!==t)&&(ks=null,nh=Hr()+500,Au(e,t));do try{SM();break}catch(l){iT(e,l)}while(1);A_(),um.current=f,Yn=c,Qr!==null?t=0:(mi=null,Si=0,t=si)}if(t!==0){if(t===2&&(c=L0(e),c!==0&&(s=c,t=sv(e,c))),t===1)throw i=Kf,Au(e,0),El(e,s),mo(e,Hr()),i;if(t===6)El(e,s);else{if(c=e.current.alternate,!(s&30)&&!bM(c)&&(t=fm(e,s),t===2&&(f=L0(e),f!==0&&(s=f,t=sv(e,f))),t===1))throw i=Kf,Au(e,0),El(e,s),mo(e,Hr()),i;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(At(345));case 2:wu(e,uo,ks);break;case 3:if(El(e,s),(s&130023424)===s&&(t=$_+500-Hr(),10<t)){if(Xp(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){Yi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=U0(wu.bind(null,e,uo,ks),t);break}wu(e,uo,ks);break;case 4:if(El(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var y=31-ya(s);f=1<<y,y=t[y],y>c&&(c=y),s&=~f}if(s=c,s=Hr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*wM(s/1960))-s,10<s){e.timeoutHandle=U0(wu.bind(null,e,uo,ks),s);break}wu(e,uo,ks);break;case 5:wu(e,uo,ks);break;default:throw Error(At(329))}}}return mo(e,Hr()),e.callbackNode===i?rT.bind(null,e):null}function sv(e,t){var i=Sf;return e.current.memoizedState.isDehydrated&&(Au(e,t).flags|=256),e=fm(e,t),e!==2&&(t=uo,uo=i,t!==null&&lv(t)),e}function lv(e){uo===null?uo=e:uo.push.apply(uo,e)}function bM(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var c=i[s],f=c.getSnapshot;c=c.value;try{if(!_a(f(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function El(e,t){for(t&=~U_,t&=~og,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-ya(t),s=1<<i;e[i]=-1,t&=~s}}function fb(e){if(Yn&6)throw Error(At(327));Wc();var t=Xp(e,0);if(!(t&1))return mo(e,Hr()),null;var i=fm(e,t);if(e.tag!==0&&i===2){var s=L0(e);s!==0&&(t=s,i=sv(e,s))}if(i===1)throw i=Kf,Au(e,0),El(e,t),mo(e,Hr()),i;if(i===6)throw Error(At(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,uo,ks),mo(e,Hr()),null}function V_(e,t){var i=Yn;Yn|=1;try{return e(t)}finally{Yn=i,Yn===0&&(nh=Hr()+500,tg&&Vl())}}function Lu(e){Cl!==null&&Cl.tag===0&&!(Yn&6)&&Wc();var t=Yn;Yn|=1;var i=Yo.transition,s=sr;try{if(Yo.transition=null,sr=1,e)return e()}finally{sr=s,Yo.transition=i,Yn=t,!(Yn&6)&&Vl()}}function G_(){Eo=Oc.current,Sr(Oc)}function Au(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Jk(i)),Qr!==null)for(i=Qr.return;i!==null;){var s=i;switch(S_(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Qp();break;case 3:eh(),Sr(fo),Sr(ji),L_();break;case 5:z_(s);break;case 4:eh();break;case 13:Sr(Mr);break;case 19:Sr(Mr);break;case 10:I_(s.type._context);break;case 22:case 23:G_()}i=i.return}if(mi=e,Qr=e=Ol(e.current,null),Si=Eo=t,si=0,Kf=null,U_=og=zu=0,uo=Sf=null,Su!==null){for(t=0;t<Su.length;t++)if(i=Su[t],s=i.interleaved,s!==null){i.interleaved=null;var c=s.next,f=i.pending;if(f!==null){var y=f.next;f.next=c,s.next=y}i.pending=s}Su=null}return e}function iT(e,t){do{var i=Qr;try{if(A_(),Ip.current=lm,sm){for(var s=Lr.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}sm=!1}if(Mu=0,pi=ai=Lr=null,bf=!1,Hf=0,N_.current=null,i===null||i.return===null){si=1,Kf=t,Qr=null;break}e:{var f=e,y=i.return,l=i,w=t;if(t=Si,l.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var E=w,T=l,S=T.tag;if(!(T.mode&1)&&(S===0||S===11||S===15)){var I=T.alternate;I?(T.updateQueue=I.updateQueue,T.memoizedState=I.memoizedState,T.lanes=I.lanes):(T.updateQueue=null,T.memoizedState=null)}var j=Qw(y);if(j!==null){j.flags&=-257,eb(j,y,l,f,t),j.mode&1&&Jw(f,E,t),t=j,w=E;var q=t.updateQueue;if(q===null){var H=new Set;H.add(w),t.updateQueue=H}else q.add(w);break e}else{if(!(t&1)){Jw(f,E,t),Z_();break e}w=Error(At(426))}}else if(Ir&&l.mode&1){var fe=Qw(y);if(fe!==null){!(fe.flags&65536)&&(fe.flags|=256),eb(fe,y,l,f,t),T_(th(w,l));break e}}f=w=th(w,l),si!==4&&(si=2),Sf===null?Sf=[f]:Sf.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var Z=US(f,w,t);Zw(f,Z);break e;case 1:l=w;var $=f.type,N=f.stateNode;if(!(f.flags&128)&&(typeof $.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Ll===null||!Ll.has(N)))){f.flags|=65536,t&=-t,f.lanes|=t;var oe=$S(f,l,t);Zw(f,oe);break e}}f=f.return}while(f!==null)}sT(i)}catch(V){t=V,Qr===i&&i!==null&&(Qr=i=i.return);continue}break}while(1)}function oT(){var e=um.current;return um.current=lm,e===null?lm:e}function Z_(){(si===0||si===3||si===2)&&(si=4),mi===null||!(zu&268435455)&&!(og&268435455)||El(mi,Si)}function fm(e,t){var i=Yn;Yn|=2;var s=oT();(mi!==e||Si!==t)&&(ks=null,Au(e,t));do try{EM();break}catch(c){iT(e,c)}while(1);if(A_(),Yn=i,um.current=s,Qr!==null)throw Error(At(261));return mi=null,Si=0,si}function EM(){for(;Qr!==null;)aT(Qr)}function SM(){for(;Qr!==null&&!qP();)aT(Qr)}function aT(e){var t=uT(e.alternate,e,Eo);e.memoizedProps=e.pendingProps,t===null?sT(e):Qr=t,N_.current=null}function sT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=yM(i,t),i!==null){i.flags&=32767,Qr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{si=6,Qr=null;return}}else if(i=gM(i,t,Eo),i!==null){Qr=i;return}if(t=t.sibling,t!==null){Qr=t;return}Qr=t=e}while(t!==null);si===0&&(si=5)}function wu(e,t,i){var s=sr,c=Yo.transition;try{Yo.transition=null,sr=1,TM(e,t,i,s)}finally{Yo.transition=c,sr=s}return null}function TM(e,t,i,s){do Wc();while(Cl!==null);if(Yn&6)throw Error(At(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(At(177));e.callbackNode=null,e.callbackPriority=0;var f=i.lanes|i.childLanes;if(ok(e,f),e===mi&&(Qr=mi=null,Si=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||lp||(lp=!0,cT(Hp,function(){return Wc(),null})),f=(i.flags&15990)!==0,i.subtreeFlags&15990||f){f=Yo.transition,Yo.transition=null;var y=sr;sr=1;var l=Yn;Yn|=4,N_.current=null,_M(e,i),tT(i,e),Zk(B0),qp=!!D0,B0=D0=null,e.current=i,xM(i),KP(),Yn=l,sr=y,Yo.transition=f}else e.current=i;if(lp&&(lp=!1,Cl=e,hm=c),f=e.pendingLanes,f===0&&(Ll=null),QP(i.stateNode),mo(e,Hr()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],s(c.value,{componentStack:c.stack,digest:c.digest});if(cm)throw cm=!1,e=ov,ov=null,e;return hm&1&&e.tag!==0&&Wc(),f=e.pendingLanes,f&1?e===av?Tf++:(Tf=0,av=e):Tf=0,Vl(),null}function Wc(){if(Cl!==null){var e=NE(hm),t=Yo.transition,i=sr;try{if(Yo.transition=null,sr=16>e?16:e,Cl===null)var s=!1;else{if(e=Cl,Cl=null,hm=0,Yn&6)throw Error(At(331));var c=Yn;for(Yn|=4,nn=e.current;nn!==null;){var f=nn,y=f.child;if(nn.flags&16){var l=f.deletions;if(l!==null){for(var w=0;w<l.length;w++){var E=l[w];for(nn=E;nn!==null;){var T=nn;switch(T.tag){case 0:case 11:case 15:Ef(8,T,f)}var S=T.child;if(S!==null)S.return=T,nn=S;else for(;nn!==null;){T=nn;var I=T.sibling,j=T.return;if(JS(T),T===E){nn=null;break}if(I!==null){I.return=j,nn=I;break}nn=j}}}var q=f.alternate;if(q!==null){var H=q.child;if(H!==null){q.child=null;do{var fe=H.sibling;H.sibling=null,H=fe}while(H!==null)}}nn=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,nn=y;else e:for(;nn!==null;){if(f=nn,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Ef(9,f,f.return)}var Z=f.sibling;if(Z!==null){Z.return=f.return,nn=Z;break e}nn=f.return}}var $=e.current;for(nn=$;nn!==null;){y=nn;var N=y.child;if(y.subtreeFlags&2064&&N!==null)N.return=y,nn=N;else e:for(y=$;nn!==null;){if(l=nn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ig(9,l)}}catch(V){Nr(l,l.return,V)}if(l===y){nn=null;break e}var oe=l.sibling;if(oe!==null){oe.return=l.return,nn=oe;break e}nn=l.return}}if(Yn=c,Vl(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Km,e)}catch{}s=!0}return s}finally{sr=i,Yo.transition=t}}return!1}function db(e,t,i){t=th(i,t),t=US(e,t,1),e=zl(e,t,1),t=Yi(),e!==null&&(rd(e,1,t),mo(e,t))}function Nr(e,t,i){if(e.tag===3)db(e,e,i);else for(;t!==null;){if(t.tag===3){db(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ll===null||!Ll.has(s))){e=th(i,e),e=$S(t,e,1),t=zl(t,e,1),e=Yi(),t!==null&&(rd(t,1,e),mo(t,e));break}}t=t.return}}function CM(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=Yi(),e.pingedLanes|=e.suspendedLanes&i,mi===e&&(Si&i)===i&&(si===4||si===3&&(Si&130023424)===Si&&500>Hr()-$_?Au(e,0):U_|=i),mo(e,t)}function lT(e,t){t===0&&(e.mode&1?(t=Jd,Jd<<=1,!(Jd&130023424)&&(Jd=4194304)):t=1);var i=Yi();e=Ds(e,t),e!==null&&(rd(e,t,i),mo(e,i))}function AM(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),lT(e,i)}function IM(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(At(314))}s!==null&&s.delete(t),lT(e,i)}var uT;uT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||fo.current)ho=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return ho=!1,mM(e,t,i);ho=!!(e.flags&131072)}else ho=!1,Ir&&t.flags&1048576&&fS(t,nm,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;kp(e,t),e=t.pendingProps;var c=Yc(t,ji.current);Zc(t,i),c=O_(null,t,s,e,c,i);var f=F_();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,po(s)?(f=!0,em(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,k_(t),c.updater=ng,t.stateNode=c,c._reactInternals=t,X0(t,s,e,i),t=Y0(null,t,s,!0,f,i)):(t.tag=0,Ir&&f&&E_(t),Hi(null,t,c,i),t=t.child),t;case 16:s=t.elementType;e:{switch(kp(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=kM(s),e=ca(s,e),c){case 0:t=K0(null,t,s,e,i);break e;case 1:t=rb(null,t,s,e,i);break e;case 11:t=tb(null,t,s,e,i);break e;case 14:t=nb(null,t,s,ca(s.type,e),i);break e}throw Error(At(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ca(s,c),K0(e,t,s,c,i);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ca(s,c),rb(e,t,s,c,i);case 3:e:{if(WS(t),e===null)throw Error(At(387));s=t.pendingProps,f=t.memoizedState,c=f.element,gS(e,t),om(t,s,null,i);var y=t.memoizedState;if(s=y.element,f.isDehydrated)if(f={element:s,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=th(Error(At(423)),t),t=ib(e,t,s,i,c);break e}else if(s!==c){c=th(Error(At(424)),t),t=ib(e,t,s,i,c);break e}else for(Co=Ml(t.stateNode.containerInfo.firstChild),Io=t,Ir=!0,fa=null,i=xS(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Jc(),s===c){t=Bs(e,t,i);break e}Hi(e,t,s,i)}t=t.child}return t;case 5:return wS(t),e===null&&Z0(t),s=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,y=c.children,N0(s,c)?y=null:f!==null&&N0(s,f)&&(t.flags|=32),ZS(e,t),Hi(e,t,y,i),t.child;case 6:return e===null&&Z0(t),null;case 13:return HS(e,t,i);case 4:return M_(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Qc(t,null,s,i):Hi(e,t,s,i),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ca(s,c),tb(e,t,s,c,i);case 7:return Hi(e,t,t.pendingProps,i),t.child;case 8:return Hi(e,t,t.pendingProps.children,i),t.child;case 12:return Hi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,f=t.memoizedProps,y=c.value,xr(rm,s._currentValue),s._currentValue=y,f!==null)if(_a(f.value,y)){if(f.children===c.children&&!fo.current){t=Bs(e,t,i);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var l=f.dependencies;if(l!==null){y=f.child;for(var w=l.firstContext;w!==null;){if(w.context===s){if(f.tag===1){w=Os(-1,i&-i),w.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var T=E.pending;T===null?w.next=w:(w.next=T.next,T.next=w),E.pending=w}}f.lanes|=i,w=f.alternate,w!==null&&(w.lanes|=i),W0(f.return,i,t),l.lanes|=i;break}w=w.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(At(341));y.lanes|=i,l=y.alternate,l!==null&&(l.lanes|=i),W0(y,i,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}Hi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,Zc(t,i),c=Jo(c),s=s(c),t.flags|=1,Hi(e,t,s,i),t.child;case 14:return s=t.type,c=ca(s,t.pendingProps),c=ca(s.type,c),nb(e,t,s,c,i);case 15:return VS(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:ca(s,c),kp(e,t),t.tag=1,po(s)?(e=!0,em(t)):e=!1,Zc(t,i),vS(t,s,c),X0(t,s,c,i),Y0(null,t,s,!0,e,i);case 19:return XS(e,t,i);case 22:return GS(e,t,i)}throw Error(At(156,t.tag))};function cT(e,t){return FE(e,t)}function PM(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qo(e,t,i,s){return new PM(e,t,i,s)}function W_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kM(e){if(typeof e=="function")return W_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h_)return 11;if(e===f_)return 14}return 2}function Ol(e,t){var i=e.alternate;return i===null?(i=qo(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Lp(e,t,i,s,c,f){var y=2;if(s=e,typeof e=="function")W_(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Tc:return Iu(i.children,c,f,t);case c_:y=8,c|=8;break;case v0:return e=qo(12,i,t,c|2),e.elementType=v0,e.lanes=f,e;case _0:return e=qo(13,i,t,c),e.elementType=_0,e.lanes=f,e;case x0:return e=qo(19,i,t,c),e.elementType=x0,e.lanes=f,e;case _E:return ag(i,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yE:y=10;break e;case vE:y=9;break e;case h_:y=11;break e;case f_:y=14;break e;case vl:y=16,s=null;break e}throw Error(At(130,e==null?e:typeof e,""))}return t=qo(y,i,t,c),t.elementType=e,t.type=s,t.lanes=f,t}function Iu(e,t,i,s){return e=qo(7,e,s,t),e.lanes=i,e}function ag(e,t,i,s){return e=qo(22,e,s,t),e.elementType=_E,e.lanes=i,e.stateNode={isHidden:!1},e}function Oy(e,t,i){return e=qo(6,e,null,t),e.lanes=i,e}function Fy(e,t,i){return t=qo(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MM(e,t,i,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gy(0),this.expirationTimes=gy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gy(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function H_(e,t,i,s,c,f,y,l,w){return e=new MM(e,t,i,l,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=qo(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},k_(f),e}function zM(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function hT(e){if(!e)return jl;e=e._reactInternals;e:{if(Bu(e)!==e||e.tag!==1)throw Error(At(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(At(171))}if(e.tag===1){var i=e.type;if(po(i))return cS(e,i,t)}return t}function fT(e,t,i,s,c,f,y,l,w){return e=H_(i,s,!0,e,c,f,y,l,w),e.context=hT(null),i=e.current,s=Yi(),c=Rl(i),f=Os(s,c),f.callback=t??null,zl(i,f,c),e.current.lanes=c,rd(e,c,s),mo(e,s),e}function sg(e,t,i,s){var c=t.current,f=Yi(),y=Rl(c);return i=hT(i),t.context===null?t.context=i:t.pendingContext=i,t=Os(f,y),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=zl(c,t,y),e!==null&&(va(e,c,y,f),Ap(e,c,y)),y}function dm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function X_(e,t){pb(e,t),(e=e.alternate)&&pb(e,t)}function LM(){return null}var dT=typeof reportError=="function"?reportError:function(e){console.error(e)};function q_(e){this._internalRoot=e}lg.prototype.render=q_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(At(409));sg(e,t,null,null)};lg.prototype.unmount=q_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lu(function(){sg(null,e,null,null)}),t[js]=null}};function lg(e){this._internalRoot=e}lg.prototype.unstable_scheduleHydration=function(e){if(e){var t=VE();e={blockedOn:null,target:e,priority:t};for(var i=0;i<bl.length&&t!==0&&t<bl[i].priority;i++);bl.splice(i,0,e),i===0&&ZE(e)}};function K_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ug(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mb(){}function RM(e,t,i,s,c){if(c){if(typeof s=="function"){var f=s;s=function(){var E=dm(y);f.call(E)}}var y=fT(t,s,e,0,null,!1,!1,"",mb);return e._reactRootContainer=y,e[js]=y.current,$f(e.nodeType===8?e.parentNode:e),Lu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var l=s;s=function(){var E=dm(w);l.call(E)}}var w=H_(e,0,!1,null,null,!1,!1,"",mb);return e._reactRootContainer=w,e[js]=w.current,$f(e.nodeType===8?e.parentNode:e),Lu(function(){sg(t,w,i,s)}),w}function cg(e,t,i,s,c){var f=i._reactRootContainer;if(f){var y=f;if(typeof c=="function"){var l=c;c=function(){var w=dm(y);l.call(w)}}sg(t,y,e,c)}else y=RM(i,t,e,c,s);return dm(y)}UE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=sf(t.pendingLanes);i!==0&&(m_(t,i|1),mo(t,Hr()),!(Yn&6)&&(nh=Hr()+500,Vl()))}break;case 13:Lu(function(){var s=Ds(e,1);if(s!==null){var c=Yi();va(s,e,1,c)}}),X_(e,1)}};g_=function(e){if(e.tag===13){var t=Ds(e,134217728);if(t!==null){var i=Yi();va(t,e,134217728,i)}X_(e,134217728)}};$E=function(e){if(e.tag===13){var t=Rl(e),i=Ds(e,t);if(i!==null){var s=Yi();va(i,e,t,s)}X_(e,t)}};VE=function(){return sr};GE=function(e,t){var i=sr;try{return sr=e,t()}finally{sr=i}};k0=function(e,t,i){switch(t){case"input":if(E0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=eg(s);if(!c)throw Error(At(90));wE(s),E0(s,c)}}}break;case"textarea":EE(e,i);break;case"select":t=i.value,t!=null&&Uc(e,!!i.multiple,t,!1)}};kE=V_;ME=Lu;var OM={usingClientEntryPoint:!1,Events:[od,Pc,eg,IE,PE,V_]},nf={findFiberByHostInstance:Eu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},FM={bundleType:nf.bundleType,version:nf.version,rendererPackageName:nf.rendererPackageName,rendererConfig:nf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RE(e),e===null?null:e.stateNode},findFiberByHostInstance:nf.findFiberByHostInstance||LM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!up.isDisabled&&up.supportsFiber)try{Km=up.inject(FM),Qa=up}catch{}}ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OM;ko.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K_(t))throw Error(At(200));return zM(e,t,null,i)};ko.createRoot=function(e,t){if(!K_(e))throw Error(At(299));var i=!1,s="",c=dT;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=H_(e,1,!1,null,null,i,!1,s,c),e[js]=t.current,$f(e.nodeType===8?e.parentNode:e),new q_(t)};ko.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(At(188)):(e=Object.keys(e).join(","),Error(At(268,e)));return e=RE(t),e=e===null?null:e.stateNode,e};ko.flushSync=function(e){return Lu(e)};ko.hydrate=function(e,t,i){if(!ug(t))throw Error(At(200));return cg(null,e,t,!0,i)};ko.hydrateRoot=function(e,t,i){if(!K_(e))throw Error(At(405));var s=i!=null&&i.hydratedSources||null,c=!1,f="",y=dT;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=fT(t,null,e,1,i??null,c,!1,f,y),e[js]=t.current,$f(e),s)for(e=0;e<s.length;e++)i=s[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new lg(t)};ko.render=function(e,t,i){if(!ug(t))throw Error(At(200));return cg(null,e,t,!1,i)};ko.unmountComponentAtNode=function(e){if(!ug(e))throw Error(At(40));return e._reactRootContainer?(Lu(function(){cg(null,null,e,!1,function(){e._reactRootContainer=null,e[js]=null})}),!0):!1};ko.unstable_batchedUpdates=V_;ko.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!ug(i))throw Error(At(200));if(e==null||e._reactInternals===void 0)throw Error(At(38));return cg(e,t,i,!1,s)};ko.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=ko})(LP);const jM=iE(Lf);var pm={},DM={get exports(){return pm},set exports(e){pm=e}};(function(e,t){(function(i,s){e.exports=s()})(wl,function(){var i,s,c;function f(l,w){if(!i)i=w;else if(!s)s=w;else{var E="var sharedChunk = {}; ("+i+")(sharedChunk); ("+s+")(sharedChunk);",T={};i(T),c=w(T),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([E],{type:"text/javascript"})))}}f(["exports"],function(l){var w=E;function E(o,n,a,h){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=h}function T(o,n,a,h){const m=new w(o,n,a,h);return function(v){return m.solve(v)}}E.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,h=0;h<8;h++){var m=this.sampleCurveX(a)-o;if(Math.abs(m)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=m/v}var x=0,A=1;for(a=o,h=0;h<20&&(m=this.sampleCurveX(a),!(Math.abs(m-o)<n));h++)o>m?x=a:A=a,a=.5*(A-x)+x;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const S=T(.25,.1,.25,1);function I(o,n,a){return Math.min(a,Math.max(n,o))}function j(o,n,a){const h=a-n,m=((o-n)%h+h)%h+n;return m===n?a:m}function q(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}let H=1;function fe(o,n){o.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function Z(o,n,a){const h={};for(const m in o)h[m]=n.call(a||this,o[m],m,o);return h}function $(o,n,a){const h={};for(const m in o)n.call(a||this,o[m],m,o)&&(h[m]=o[m]);return h}function N(o){return Array.isArray(o)?o.map(N):typeof o=="object"&&o?Z(o,N):o}const oe={};function V(o){oe[o]||(typeof console<"u"&&console.warn(o),oe[o]=!0)}function D(o,n,a){return(a.y-o.y)*(n.x-o.x)>(n.y-o.y)*(a.x-o.x)}function b(o){let n=0;for(let a,h,m=0,v=o.length,x=v-1;m<v;x=m++)a=o[m],h=o[x],n+=(h.x-a.x)*(a.y+h.y);return n}function k(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function G(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,m,v)=>{const x=m||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let Y,K,pe=null;function _e(o){if(pe==null){const n=o.navigator?o.navigator.userAgent:null;pe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return pe}function be(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Q={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const a=window.document.createElement("canvas"),h=a.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return a.width=o.width,a.height=o.height,h.drawImage(o,0,0,o.width,o.height),h.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(Y||(Y=document.createElement("a")),Y.href=o,Y.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(K==null&&(K=matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}};var re=ne;function ne(o,n){this.x=o,this.y=n}ne.prototype={clone:function(){return new ne(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,a=o.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),a=Math.sin(o),h=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=h,this},_rotateAround:function(o,n){var a=Math.cos(o),h=Math.sin(o),m=n.y+h*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ne.convert=function(o){return o instanceof ne?o:Array.isArray(o)?new ne(o[0],o[1]):o};const te={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},ce="mapbox-tiles";let xe,we,De=500,Pe=50;function Me(){typeof caches>"u"||xe||(xe=caches.open(ce))}let Ve=1/0;const Ne={supported:!1,testSupport:function(o){!mt&&ct&&(Lt?dt(o):Qe=o)}};let Qe,ct,mt=!1,Lt=!1;function dt(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,ct),o.isContextLost())return;Ne.supported=!0}catch{}o.deleteTexture(n),mt=!0}typeof document<"u"&&(ct=document.createElement("img"),ct.onload=function(){Qe&&dt(Qe),Qe=null,Lt=!0},ct.onerror=function(){mt=!0,Qe=null},ct.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const bt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(bt);class Nt extends Error{constructor(n,a,h,m){super(`AJAXError: ${a} (${n}): ${h}`),this.status=n,this.statusText=a,this.url=h,this.body=m}}const Yt=k()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function dn(o,n){const a=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:Yt(),signal:a.signal});let m=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),((x,A,M)=>{if(v)return;const U=Date.now();fetch(h).then(J=>J.ok?((ie,ue,de)=>{(o.type==="arrayBuffer"?ie.arrayBuffer():o.type==="json"?ie.json():ie.text()).then(ge=>{v||(ue&&de&&function(Fe,Le,Ke){if(Me(),!xe)return;const rt={status:Le.status,statusText:Le.statusText,headers:new Headers};Le.headers.forEach((tt,yt)=>rt.headers.set(yt,tt));const qe=G(Le.headers.get("Cache-Control")||"");qe["no-store"]||(qe["max-age"]&&rt.headers.set("Expires",new Date(Ke+1e3*qe["max-age"]).toUTCString()),new Date(rt.headers.get("Expires")).getTime()-Ke<42e4||function(tt,yt){if(we===void 0)try{new Response(new ReadableStream),we=!0}catch{we=!1}we?yt(tt.body):tt.blob().then(yt)}(Le,tt=>{const yt=new Response(tt,rt);Me(),xe&&xe.then(gt=>gt.put(function($t){const Ht=$t.indexOf("?");return Ht<0?$t:$t.slice(0,Ht)}(Fe.url),yt)).catch(gt=>V(gt.message))}))}(h,ue,de),m=!0,n(null,ge,ie.headers.get("Cache-Control"),ie.headers.get("Expires")))}).catch(ge=>{v||n(new Error(ge.message))})})(J,null,U):J.blob().then(ie=>n(new Nt(J.status,J.statusText,o.url,ie)))).catch(J=>{J.code!==20&&n(new Error(J.message))})})(),{cancel:()=>{v=!0,m||a.abort()}}}const Pn=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!k()){const h=o.url.substring(0,o.url.indexOf("://"));return(te.REGISTERED_PROTOCOLS[h]||dn)(o,n)}}if(!(/^file:/.test(a=o.url)||/^file:/.test(Yt())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return dn(o,n);if(k()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var a;return function(h,m){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(A){return m(A)}m(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new Nt(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},Cn=function(o,n){return Pn(q(o,{type:"arrayBuffer"}),n)};function mn(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Te,F;Te=[],F=0;const R=function(o,n){if(Ne.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),F>=te.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Te.push(v),v}F++;let a=!1;const h=()=>{if(!a)for(a=!0,F--;Te.length&&F<te.MAX_PARALLEL_IMAGE_REQUESTS;){const v=Te.shift(),{requestParameters:x,callback:A,cancelled:M}=v;M||(v.cancel=R(x,A).cancel)}},m=Cn(o,(v,x,A,M)=>{h(),v?n(v):x&&function(U,J){typeof createImageBitmap=="function"?function(ie,ue){const de=new Blob([new Uint8Array(ie)],{type:"image/png"});createImageBitmap(de).then(ge=>{ue(null,ge)}).catch(ge=>{ue(new Error(`Could not load image because of ${ge.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(U,J):function(ie,ue){const de=new Image;de.onload=()=>{ue(null,de),URL.revokeObjectURL(de.src),de.onload=null,window.requestAnimationFrame(()=>{de.src=Vt})},de.onerror=()=>ue(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ge=new Blob([new Uint8Array(ie)],{type:"image/png"});de.src=ie.byteLength?URL.createObjectURL(ge):Vt}(U,J)}(x,(U,J)=>{U!=null?n(U):J!=null&&n(null,J,{cacheControl:A,expires:M})})});return{cancel:()=>{m.cancel(),h()}}};function ye(o,n,a){a[o]&&a[o].indexOf(n)!==-1||(a[o]=a[o]||[],a[o].push(n))}function $e(o,n,a){if(a&&a[o]){const h=a[o].indexOf(n);h!==-1&&a[o].splice(h,1)}}class Ye{constructor(n,a={}){q(this,a),this.type=n}}class ut extends Ye{constructor(n,a={}){super("error",q({error:n},a))}}class se{on(n,a){return this._listeners=this._listeners||{},ye(n,a,this._listeners),this}off(n,a){return $e(n,a,this._listeners),$e(n,a,this._oneTimeListeners),this}once(n,a){return this._oneTimeListeners=this._oneTimeListeners||{},ye(n,a,this._oneTimeListeners),this}fire(n,a){typeof n=="string"&&(n=new Ye(n,a||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const A of m)A.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const A of v)$e(h,A,this._oneTimeListeners),A.call(this,n);const x=this._eventedParent;x&&(q(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof ut&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var P={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class L{constructor(n,a,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),a!=null&&a.__line__&&(this.line=a.__line__)}}function Se(o){const n=o.value;return n?[new L(o.key,n,"constants have been deprecated as of v8")]:[]}function Be(o,...n){for(const a of n)for(const h in a)o[h]=a[h];return o}function We(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function it(o){if(Array.isArray(o))return o.map(it);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const a in o)n[a]=it(o[a]);return n}return We(o)}class qt extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class xn{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[h,m]of a)this.bindings[h]=m}concat(n){return new xn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Sn={kind:"null"},_t={kind:"number"},Dt={kind:"string"},cn={kind:"boolean"},mr={kind:"color"},Ci={kind:"object"},hn={kind:"value"},ir={kind:"collator"},wr={kind:"formatted"},ei={kind:"padding"},gr={kind:"resolvedImage"};function yn(o,n){return{kind:"array",itemType:o,N:n}}function Ct(o){if(o.kind==="array"){const n=Ct(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const sn=[Sn,_t,Dt,cn,mr,wr,Ci,yn(hn),ei,gr];function Tn(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Tn(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const a of sn)if(!Tn(a,n))return null}}return`Expected ${Ct(o)} but found ${Ct(n)} instead.`}function yr(o,n){return n.some(a=>a.kind===o.kind)}function vr(o,n){return n.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var ti,yi={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ce(o){return(o=Math.round(o))<0?0:o>255?255:o}function X(o){return Ce(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function ae(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function ve(o,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(n-o)*a*6:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}try{ti={}.parseCSSColor=function(o){var n,a=o.replace(/ /g,"").toLowerCase();if(a in yi)return yi[a].slice();if(a[0]==="#")return a.length===4?(n=parseInt(a.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:a.length===7&&(n=parseInt(a.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=a.indexOf("("),m=a.indexOf(")");if(h!==-1&&m+1===a.length){var v=a.substr(0,h),x=a.substr(h+1,m-(h+1)).split(","),A=1;switch(v){case"rgba":if(x.length!==4)return null;A=ae(x.pop());case"rgb":return x.length!==3?null:[X(x[0]),X(x[1]),X(x[2]),A];case"hsla":if(x.length!==4)return null;A=ae(x.pop());case"hsl":if(x.length!==3)return null;var M=(parseFloat(x[0])%360+360)%360/360,U=ae(x[1]),J=ae(x[2]),ie=J<=.5?J*(U+1):J+U-J*U,ue=2*J-ie;return[Ce(255*ve(ue,ie,M+1/3)),Ce(255*ve(ue,ie,M)),Ce(255*ve(ue,ie,M-1/3)),A];default:return null}}return null}}catch{}class Ee{constructor(n,a,h,m=1){this.r=n,this.g=a,this.b=h,this.a=m}static parse(n){if(!n)return;if(n instanceof Ee)return n;if(typeof n!="string")return;const a=ti(n);return a?new Ee(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,h,m]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(h)},${m})`}toArray(){const{r:n,g:a,b:h,a:m}=this;return m===0?[0,0,0,0]:[255*n/m,255*a/m,255*h/m,m]}}Ee.black=new Ee(0,0,0,1),Ee.white=new Ee(1,1,1,1),Ee.transparent=new Ee(0,0,0,0),Ee.red=new Ee(1,0,0,1);class je{constructor(n,a,h){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ze{constructor(n,a,h,m,v){this.text=n,this.image=a,this.scale=h,this.fontStack=m,this.textColor=v}}class Ue{constructor(n){this.sections=n}static fromString(n){return new Ue([new Ze(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Ue?n:Ue.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Oe{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Oe)return n;if(typeof n=="number")return new Oe([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Oe(n)}}toString(){return JSON.stringify(this.values)}}class He{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new He({name:n,available:!1}):null}}function st(o,n,a,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,a,h]:[o,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xt(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Ee||o instanceof je||o instanceof Ue||o instanceof Oe||o instanceof He)return!0;if(Array.isArray(o)){for(const n of o)if(!xt(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!xt(o[n]))return!1;return!0}return!1}function at(o){if(o===null)return Sn;if(typeof o=="string")return Dt;if(typeof o=="boolean")return cn;if(typeof o=="number")return _t;if(o instanceof Ee)return mr;if(o instanceof je)return ir;if(o instanceof Ue)return wr;if(o instanceof Oe)return ei;if(o instanceof He)return gr;if(Array.isArray(o)){const n=o.length;let a;for(const h of o){const m=at(h);if(a){if(a===m)continue;a=hn;break}a=m}return yn(a||hn,n)}return Ci}function Zt(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Ee||o instanceof Ue||o instanceof Oe||o instanceof He?o.toString():JSON.stringify(o)}class Wt{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!xt(n[1]))return a.error("invalid value");const h=n[1];let m=at(h);const v=a.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Wt(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Rt{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const rn={string:Dt,number:_t,boolean:cn,object:Ci};class pn{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let h,m=1;const v=n[0];if(v==="array"){let A,M;if(n.length>2){const U=n[1];if(typeof U!="string"||!(U in rn)||U==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);A=rn[U],m++}else A=hn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);M=n[2],m++}h=yn(A,M)}else{if(!rn[v])throw new Error(`Types doesn't contain name = ${v}`);h=rn[v]}const x=[];for(;m<n.length;m++){const A=a.parse(n[m],m,hn);if(!A)return null;x.push(A)}return new pn(h,x)}evaluate(n){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(n);if(!Tn(this.type,at(h)))return h;if(a===this.args.length-1)throw new Rt(`Expected value to be of type ${Ct(this.type)}, but found ${Ct(at(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Gt={"to-boolean":cn,"to-color":mr,"to-number":_t,"to-string":Dt};class ln{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[0];if(!Gt[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return a.error("Expected one argument.");const m=Gt[h],v=[];for(let x=1;x<n.length;x++){const A=a.parse(n[x],x,hn);if(!A)return null;v.push(A)}return new ln(m,v)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let a,h;for(const m of this.args){if(a=m.evaluate(n),h=null,a instanceof Ee)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:st(a[0],a[1],a[2],a[3]),!h))return new Ee(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Rt(h||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="padding"){let a;for(const h of this.args){a=h.evaluate(n);const m=Oe.parse(a);if(m)return m}throw new Rt(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(n),a===null)return 0;const m=Number(a);if(!isNaN(m))return m}throw new Rt(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?Ue.fromString(Zt(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?He.fromString(Zt(this.args[0].evaluate(n))):Zt(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const bn=["Unknown","Point","LineString","Polygon"];class Rn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=Ee.parse(n)),a}}class Hn{constructor(n,a,h,m){this.name=n,this.type=a,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const h=n[0],m=Hn.definitions[h];if(!m)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,A=x.filter(([U])=>!Array.isArray(U)||U.length===n.length-1);let M=null;for(const[U,J]of A){M=new Ea(a.registry,a.path,null,a.scope);const ie=[];let ue=!1;for(let de=1;de<n.length;de++){const ge=n[de],Fe=Array.isArray(U)?U[de-1]:U.type,Le=M.parse(ge,1+ie.length,Fe);if(!Le){ue=!0;break}ie.push(Le)}if(!ue)if(Array.isArray(U)&&U.length!==ie.length)M.error(`Expected ${U.length} arguments, but found ${ie.length} instead.`);else{for(let de=0;de<ie.length;de++){const ge=Array.isArray(U)?U[de]:U.type,Fe=ie[de];M.concat(de+1).checkSubtype(ge,Fe.type)}if(M.errors.length===0)return new Hn(h,v,J,ie)}}if(A.length===1)a.errors.push(...M.errors);else{const U=(A.length?A:x).map(([ie])=>{return ue=ie,Array.isArray(ue)?`(${ue.map(Ct).join(", ")})`:`(${Ct(ue.type)}...)`;var ue}).join(" | "),J=[];for(let ie=1;ie<n.length;ie++){const ue=a.parse(n[ie],1+J.length);if(!ue)return null;J.push(Ct(ue.type))}a.error(`Expected arguments of type ${U}, but found (${J.join(", ")}) instead.`)}return null}static register(n,a){Hn.definitions=a;for(const h in a)n[h]=Hn}}class Or{constructor(n,a,h){this.type=ir,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const m=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,cn);if(!m)return null;const v=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,cn);if(!v)return null;let x=null;return h.locale&&(x=a.parse(h.locale,1,Dt),!x)?null:new Or(m,v,x)}evaluate(n){return new je(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const or=8192;function lr(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function wa(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function is(o,n){const a=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(a*m*or),Math.round(h*m*or)]}function Xn(o,n,a){const h=o[0]-n[0],m=o[1]-n[1],v=o[0]-a[0],x=o[1]-a[1];return h*x-v*m==0&&h*v<=0&&m*x<=0}function Gl(o,n){let a=!1;for(let x=0,A=n.length;x<A;x++){const M=n[x];for(let U=0,J=M.length;U<J-1;U++){if(Xn(o,M[U],M[U+1]))return!1;(m=M[U])[1]>(h=o)[1]!=(v=M[U+1])[1]>h[1]&&h[0]<(v[0]-m[0])*(h[1]-m[1])/(v[1]-m[1])+m[0]&&(a=!a)}}var h,m,v;return a}function Zl(o,n){for(let a=0;a<n.length;a++)if(Gl(o,n[a]))return!0;return!1}function ro(o,n,a,h){const m=h[0]-a[0],v=h[1]-a[1],x=(o[0]-a[0])*v-m*(o[1]-a[1]),A=(n[0]-a[0])*v-m*(n[1]-a[1]);return x>0&&A<0||x<0&&A>0}function Vu(o,n,a){for(const U of a)for(let J=0;J<U.length-1;++J)if((A=[(x=U[J+1])[0]-(v=U[J])[0],x[1]-v[1]])[0]*(M=[(m=n)[0]-(h=o)[0],m[1]-h[1]])[1]-A[1]*M[0]!=0&&ro(h,m,v,x)&&ro(v,x,h,m))return!0;var h,m,v,x,A,M;return!1}function Wl(o,n){for(let a=0;a<o.length;++a)if(!Gl(o[a],n))return!1;for(let a=0;a<o.length-1;++a)if(Vu(o[a],o[a+1],n))return!1;return!0}function ph(o,n){for(let a=0;a<n.length;a++)if(Wl(o,n[a]))return!0;return!1}function Ws(o,n,a){const h=[];for(let m=0;m<o.length;m++){const v=[];for(let x=0;x<o[m].length;x++){const A=is(o[m][x],a);lr(n,A),v.push(A)}h.push(v)}return h}function Hl(o,n,a){const h=[];for(let m=0;m<o.length;m++){const v=Ws(o[m],n,a);h.push(v)}return h}function os(o,n,a,h){if(o[0]<a[0]||o[0]>a[2]){const m=.5*h;let v=o[0]-a[0]>m?-h:a[0]-o[0]>m?h:0;v===0&&(v=o[0]-a[2]>m?-h:a[2]-o[0]>m?h:0),o[0]+=v}lr(n,o)}function Gu(o,n,a,h){const m=Math.pow(2,h.z)*or,v=[h.x*or,h.y*or],x=[];for(const A of o)for(const M of A){const U=[M.x+v[0],M.y+v[1]];os(U,n,a,m),x.push(U)}return x}function Zu(o,n,a,h){const m=Math.pow(2,h.z)*or,v=[h.x*or,h.y*or],x=[];for(const M of o){const U=[];for(const J of M){const ie=[J.x+v[0],J.y+v[1]];lr(n,ie),U.push(ie)}x.push(U)}if(n[2]-n[0]<=m/2){(A=n)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const M of x)for(const U of M)os(U,n,a,m)}var A;return x}class $r{constructor(n,a){this.type=cn,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(xt(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const v=h.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new $r(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new $r(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new $r(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const A=Ws(h.coordinates,v,x),M=Gu(a.geometry(),m,v,x);if(!wa(m,v))return!1;for(const U of M)if(!Gl(U,A))return!1}if(h.type==="MultiPolygon"){const A=Hl(h.coordinates,v,x),M=Gu(a.geometry(),m,v,x);if(!wa(m,v))return!1;for(const U of M)if(!Zl(U,A))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(h.type==="Polygon"){const A=Ws(h.coordinates,v,x),M=Zu(a.geometry(),m,v,x);if(!wa(m,v))return!1;for(const U of M)if(!Wl(U,A))return!1}if(h.type==="MultiPolygon"){const A=Hl(h.coordinates,v,x),M=Zu(a.geometry(),m,v,x);if(!wa(m,v))return!1;for(const U of M)if(!ph(U,A))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function as(o){if(o instanceof Hn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof $r)return!1;let n=!0;return o.eachChild(a=>{n&&!as(a)&&(n=!1)}),n}function ba(o){if(o instanceof Hn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(a=>{n&&!ba(a)&&(n=!1)}),n}function Hs(o,n){if(o instanceof Hn&&n.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(h=>{a&&!Hs(h,n)&&(a=!1)}),a}class Xs{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=n[1];return a.scope.has(h)?new Xs(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Ea{constructor(n,a=[],h,m=new xn,v=[]){this.registry=n,this.path=a,this.key=a.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=v,this.expectedType=h}parse(n,a,h,m,v={}){return a?this.concat(a,h,m)._parse(n,v):this._parse(n,v)}_parse(n,a){function h(m,v,x){return x==="assert"?new pn(v,[m]):x==="coerce"?new ln(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const A=this.expectedType,M=x.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||M.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(A.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array"){if(this.checkSubtype(A,M))return null}else x=h(x,A,a.typeAnnotation||"coerce");else x=h(x,A,a.typeAnnotation||"coerce");else x=h(x,A,a.typeAnnotation||"assert")}if(!(x instanceof Wt)&&x.type.kind!=="resolvedImage"&&qs(x)){const A=new Rn;try{x=new Wt(x.type,x.evaluate(A))}catch(M){return this.error(M.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,h){const m=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Ea(this.registry,m,a||null,v,this.errors)}error(n,...a){const h=`${this.key}${a.map(m=>`[${m}]`).join("")}`;this.errors.push(new qt(h,n))}checkSubtype(n,a){const h=Tn(n,a);return h&&this.error(h),h}}function qs(o){if(o instanceof Xs)return qs(o.boundExpression);if(o instanceof Hn&&o.name==="error"||o instanceof Or||o instanceof $r)return!1;const n=o instanceof ln||o instanceof pn;let a=!0;return o.eachChild(h=>{a=n?a&&qs(h):a&&h instanceof Wt}),!!a&&as(o)&&Hs(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Sa(o,n){const a=o.length-1;let h,m,v=0,x=a,A=0;for(;v<=x;)if(A=Math.floor((v+x)/2),h=o[A],m=o[A+1],h<=n){if(A===a||n<m)return A;v=A+1}else{if(!(h>n))throw new Rt("Input is not a number.");x=A-1}return 0}class Ta{constructor(n,a,h){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(n[1],1,_t);if(!h)return null;const m=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<n.length;x+=2){const A=x===1?-1/0:n[x],M=n[x+1],U=x,J=x+1;if(typeof A!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(m.length&&m[m.length-1][0]>=A)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const ie=a.parse(M,J,v);if(!ie)return null;v=v||ie.type,m.push([A,ie])}return new Ta(v,h,m)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=a[0])return h[0].evaluate(n);const v=a.length;return m>=a[v-1]?h[v-1].evaluate(n):h[Sa(a,m)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Jn(o,n,a){return o*(1-a)+n*a}var ss=Object.freeze({__proto__:null,number:Jn,color:function(o,n,a){return new Ee(Jn(o.r,n.r,a),Jn(o.g,n.g,a),Jn(o.b,n.b,a),Jn(o.a,n.a,a))},array:function(o,n,a){return o.map((h,m)=>Jn(h,n[m],a))},padding:function(o,n,a){const h=o.values,m=n.values;return new Oe([Jn(h[0],m[0],a),Jn(h[1],m[1],a),Jn(h[2],m[2],a),Jn(h[3],m[3],a)])}});const ea=.95047,Wu=1.08883,Xl=4/29,Ks=6/29,Hu=3*Ks*Ks,Xu=Math.PI/180,mh=180/Math.PI;function ql(o){return o>.008856451679035631?Math.pow(o,1/3):o/Hu+Xl}function Kl(o){return o>Ks?o*o*o:Hu*(o-Xl)}function ls(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Yl(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Bn(o){const n=Yl(o.r),a=Yl(o.g),h=Yl(o.b),m=ql((.4124564*n+.3575761*a+.1804375*h)/ea),v=ql((.2126729*n+.7151522*a+.072175*h)/1);return{l:116*v-16,a:500*(m-v),b:200*(v-ql((.0193339*n+.119192*a+.9503041*h)/Wu)),alpha:o.a}}function qu(o){let n=(o.l+16)/116,a=isNaN(o.a)?n:n+o.a/500,h=isNaN(o.b)?n:n-o.b/200;return n=1*Kl(n),a=ea*Kl(a),h=Wu*Kl(h),new Ee(ls(3.2404542*a-1.5371385*n-.4985314*h),ls(-.969266*a+1.8760108*n+.041556*h),ls(.0556434*a-.2040259*n+1.0572252*h),o.alpha)}function gh(o,n,a){const h=n-o;return o+a*(h>180||h<-180?h-360*Math.round(h/360):h)}const Ca={forward:Bn,reverse:qu,interpolate:function(o,n,a){return{l:Jn(o.l,n.l,a),a:Jn(o.a,n.a,a),b:Jn(o.b,n.b,a),alpha:Jn(o.alpha,n.alpha,a)}}},us={forward:function(o){const{l:n,a,b:h}=Bn(o),m=Math.atan2(h,a)*mh;return{h:m<0?m+360:m,c:Math.sqrt(a*a+h*h),l:n,alpha:o.a}},reverse:function(o){const n=o.h*Xu,a=o.c;return qu({l:o.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:o.alpha})},interpolate:function(o,n,a){return{h:gh(o.h,n.h,a),c:Jn(o.c,n.c,a),l:Jn(o.l,n.l,a),alpha:Jn(o.alpha,n.alpha,a)}}};var Jl=Object.freeze({__proto__:null,lab:Ca,hcl:us});class vi{constructor(n,a,h,m,v){this.type=n,this.operator=a,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,A]of v)this.labels.push(x),this.outputs.push(A)}static interpolationFactor(n,a,h,m){let v=0;if(n.name==="exponential")v=Ql(a,n.base,h,m);else if(n.name==="linear")v=Ql(a,1,h,m);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new w(x[0],x[1],x[2],x[3]).solve(Ql(a,1,h,m))}return v}static parse(n,a){let[h,m,v,...x]=n;if(!Array.isArray(m)||m.length===0)return a.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const U=m[1];if(typeof U!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:U}}else{if(m[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const U=m.slice(1);if(U.length!==4||U.some(J=>typeof J!="number"||J<0||J>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:U}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,_t),!v)return null;const A=[];let M=null;h==="interpolate-hcl"||h==="interpolate-lab"?M=mr:a.expectedType&&a.expectedType.kind!=="value"&&(M=a.expectedType);for(let U=0;U<x.length;U+=2){const J=x[U],ie=x[U+1],ue=U+3,de=U+4;if(typeof J!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ue);if(A.length&&A[A.length-1][0]>=J)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ue);const ge=a.parse(ie,de,M);if(!ge)return null;M=M||ge.type,A.push([J,ge])}return M.kind==="number"||M.kind==="color"||M.kind==="padding"||M.kind==="array"&&M.itemType.kind==="number"&&typeof M.N=="number"?new vi(M,h,m,v,A):a.error(`Type ${Ct(M)} is not interpolatable.`)}evaluate(n){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=a[0])return h[0].evaluate(n);const v=a.length;if(m>=a[v-1])return h[v-1].evaluate(n);const x=Sa(a,m),A=vi.interpolationFactor(this.interpolation,m,a[x],a[x+1]),M=h[x].evaluate(n),U=h[x+1].evaluate(n);return this.operator==="interpolate"?ss[this.type.kind.toLowerCase()](M,U,A):this.operator==="interpolate-hcl"?us.reverse(us.interpolate(us.forward(M),us.forward(U),A)):Ca.reverse(Ca.interpolate(Ca.forward(M),Ca.forward(U),A))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Ql(o,n,a,h){const m=h-a,v=o-a;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class cs{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let h=null;const m=a.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const A of n.slice(1)){const M=a.parse(A,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!M)return null;h=h||M.type,v.push(M)}if(!h)throw new Error("No output type");const x=m&&v.some(A=>Tn(m,A.type));return new cs(x?hn:h,v)}evaluate(n){let a,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(n),h&&h instanceof He&&!h.available&&(a||(a=h.name),h=null,m===this.args.length&&(h=a)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Ys{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const A=a.parse(n[v+1],v+1);if(!A)return null;h.push([x,A])}const m=a.parse(n[n.length-1],n.length-1,a.expectedType,h);return m?new Ys(h,m):null}outputDefined(){return this.result.outputDefined()}}class eu{constructor(n,a,h){this.type=n,this.index=a,this.input=h}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,_t),m=a.parse(n[2],2,yn(a.expectedType||hn));return h&&m?new eu(m.type.itemType,h,m):null}evaluate(n){const a=this.index.evaluate(n),h=this.input.evaluate(n);if(a<0)throw new Rt(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new Rt(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new Rt(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class tu{constructor(n,a){this.type=cn,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),m=a.parse(n[2],2,hn);return h&&m?yr(h.type,[cn,Dt,_t,Sn,hn])?new tu(h,m):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ct(h.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!vr(a,["boolean","string","number","null"]))throw new Rt(`Expected first argument to be of type boolean, string, number or null, but found ${Ct(at(a))} instead.`);if(!vr(h,["string","array"]))throw new Rt(`Expected second argument to be of type array or string, but found ${Ct(at(h))} instead.`);return h.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Js{constructor(n,a,h){this.type=_t,this.needle=n,this.haystack=a,this.fromIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),m=a.parse(n[2],2,hn);if(!h||!m)return null;if(!yr(h.type,[cn,Dt,_t,Sn,hn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ct(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,_t);return v?new Js(h,m,v):null}return new Js(h,m)}evaluate(n){const a=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!vr(a,["boolean","string","number","null"]))throw new Rt(`Expected first argument to be of type boolean, string, number or null, but found ${Ct(at(a))} instead.`);if(!vr(h,["string","array"]))throw new Rt(`Expected second argument to be of type array or string, but found ${Ct(at(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(a,m)}return h.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Qs{constructor(n,a,h,m,v,x){this.inputType=n,this.type=a,this.input=h,this.cases=m,this.outputs=v,this.otherwise=x}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let h,m;a.expectedType&&a.expectedType.kind!=="value"&&(m=a.expectedType);const v={},x=[];for(let U=2;U<n.length-1;U+=2){let J=n[U];const ie=n[U+1];Array.isArray(J)||(J=[J]);const ue=a.concat(U);if(J.length===0)return ue.error("Expected at least one branch label.");for(const ge of J){if(typeof ge!="number"&&typeof ge!="string")return ue.error("Branch labels must be numbers or strings.");if(typeof ge=="number"&&Math.abs(ge)>Number.MAX_SAFE_INTEGER)return ue.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ge=="number"&&Math.floor(ge)!==ge)return ue.error("Numeric branch labels must be integer values.");if(h){if(ue.checkSubtype(h,at(ge)))return null}else h=at(ge);if(v[String(ge)]!==void 0)return ue.error("Branch labels must be unique.");v[String(ge)]=x.length}const de=a.parse(ie,U,m);if(!de)return null;m=m||de.type,x.push(de)}const A=a.parse(n[1],1,hn);if(!A)return null;const M=a.parse(n[n.length-1],n.length-1,m);return M?A.type.kind!=="value"&&a.concat(1).checkSubtype(h,A.type)?null:new Qs(h,m,A,v,x,M):null}evaluate(n){const a=this.input.evaluate(n);return(at(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class nu{constructor(n,a,h){this.type=n,this.branches=a,this.otherwise=h}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const m=[];for(let x=1;x<n.length-1;x+=2){const A=a.parse(n[x],x,cn);if(!A)return null;const M=a.parse(n[x+1],x+1,h);if(!M)return null;m.push([A,M]),h=h||M.type}const v=a.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new nu(h,m,v)}evaluate(n){for(const[a,h]of this.branches)if(a.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,h]of this.branches)n(a),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Aa{constructor(n,a,h,m){this.type=n,this.input=a,this.beginIndex=h,this.endIndex=m}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=a.parse(n[1],1,hn),m=a.parse(n[2],2,_t);if(!h||!m)return null;if(!yr(h.type,[yn(hn),Dt,hn]))return a.error(`Expected first argument to be of type array or string, but found ${Ct(h.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,_t);return v?new Aa(h.type,h,m,v):null}return new Aa(h.type,h,m)}evaluate(n){const a=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!vr(a,["string","array"]))throw new Rt(`Expected first argument to be of type array or string, but found ${Ct(at(a))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return a.slice(h,m)}return a.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Ku(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Yu(o,n,a,h){return h.compare(n,a)===0}function Ia(o,n,a){const h=o!=="=="&&o!=="!=";return class pT{constructor(v,x,A){this.type=cn,this.lhs=v,this.rhs=x,this.collator=A,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const A=v[0];let M=x.parse(v[1],1,hn);if(!M)return null;if(!Ku(A,M.type))return x.concat(1).error(`"${A}" comparisons are not supported for type '${Ct(M.type)}'.`);let U=x.parse(v[2],2,hn);if(!U)return null;if(!Ku(A,U.type))return x.concat(2).error(`"${A}" comparisons are not supported for type '${Ct(U.type)}'.`);if(M.type.kind!==U.type.kind&&M.type.kind!=="value"&&U.type.kind!=="value")return x.error(`Cannot compare types '${Ct(M.type)}' and '${Ct(U.type)}'.`);h&&(M.type.kind==="value"&&U.type.kind!=="value"?M=new pn(U.type,[M]):M.type.kind!=="value"&&U.type.kind==="value"&&(U=new pn(M.type,[U])));let J=null;if(v.length===4){if(M.type.kind!=="string"&&U.type.kind!=="string"&&M.type.kind!=="value"&&U.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(J=x.parse(v[3],3,ir),!J)return null}return new pT(M,U,J)}evaluate(v){const x=this.lhs.evaluate(v),A=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const M=at(x),U=at(A);if(M.kind!==U.kind||M.kind!=="string"&&M.kind!=="number")throw new Rt(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${U.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const M=at(x),U=at(A);if(M.kind!=="string"||U.kind!=="string")return n(v,x,A)}return this.collator?a(v,x,A,this.collator.evaluate(v)):n(v,x,A)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const yh=Ia("==",function(o,n,a){return n===a},Yu),vh=Ia("!=",function(o,n,a){return n!==a},function(o,n,a,h){return!Yu(0,n,a,h)}),_h=Ia("<",function(o,n,a){return n<a},function(o,n,a,h){return h.compare(n,a)<0}),Ju=Ia(">",function(o,n,a){return n>a},function(o,n,a,h){return h.compare(n,a)>0}),ru=Ia("<=",function(o,n,a){return n<=a},function(o,n,a,h){return h.compare(n,a)<=0}),xh=Ia(">=",function(o,n,a){return n>=a},function(o,n,a,h){return h.compare(n,a)>=0});class iu{constructor(n,a,h,m,v){this.type=Dt,this.number=n,this.locale=a,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const h=a.parse(n[1],1,_t);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return a.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=a.parse(m.locale,1,Dt),!v))return null;let x=null;if(m.currency&&(x=a.parse(m.currency,1,Dt),!x))return null;let A=null;if(m["min-fraction-digits"]&&(A=a.parse(m["min-fraction-digits"],1,_t),!A))return null;let M=null;return m["max-fraction-digits"]&&(M=a.parse(m["max-fraction-digits"],1,_t),!M)?null:new iu(h,v,x,A,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class el{constructor(n){this.type=wr,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=n.length-1;++x){const A=n[x];if(v&&typeof A=="object"&&!Array.isArray(A)){v=!1;let M=null;if(A["font-scale"]&&(M=a.parse(A["font-scale"],1,_t),!M))return null;let U=null;if(A["text-font"]&&(U=a.parse(A["text-font"],1,yn(Dt)),!U))return null;let J=null;if(A["text-color"]&&(J=a.parse(A["text-color"],1,mr),!J))return null;const ie=m[m.length-1];ie.scale=M,ie.font=U,ie.textColor=J}else{const M=a.parse(n[x],1,hn);if(!M)return null;const U=M.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:M,scale:null,font:null,textColor:null})}}return new el(m)}evaluate(n){return new Ue(this.sections.map(a=>{const h=a.content.evaluate(n);return at(h)===gr?new Ze("",h,null,null,null):new Ze(Zt(h),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}}class ou{constructor(n){this.type=gr,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const h=a.parse(n[1],1,Dt);return h?new ou(h):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),h=He.fromString(a);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(a)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class tl{constructor(n){this.type=_t,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=a.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Ct(h.type)} instead.`):new tl(h):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Rt(`Expected value to be of type string or array, but found ${Ct(at(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Pa={"==":yh,"!=":vh,">":Ju,"<":_h,">=":xh,"<=":ru,array:pn,at:eu,boolean:pn,case:nu,coalesce:cs,collator:Or,format:el,image:ou,in:tu,"index-of":Js,interpolate:vi,"interpolate-hcl":vi,"interpolate-lab":vi,length:tl,let:Ys,literal:Wt,match:Qs,number:pn,"number-format":iu,object:pn,slice:Aa,step:Ta,string:pn,"to-boolean":ln,"to-color":ln,"to-number":ln,"to-string":ln,var:Xs,within:$r};function Qu(o,[n,a,h,m]){n=n.evaluate(o),a=a.evaluate(o),h=h.evaluate(o);const v=m?m.evaluate(o):1,x=st(n,a,h,v);if(x)throw new Rt(x);return new Ee(n/255*v,a/255*v,h/255*v,v)}function ec(o,n){return o in n}function nl(o,n){const a=n[o];return a===void 0?null:a}function io(o){return{type:o}}function tc(o){return{result:"success",value:o}}function Di(o){return{result:"error",value:o}}function er(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Bi(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function kn(o){return!!o.expression&&o.expression.interpolated}function Nn(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function tr(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ar(o){return o}function ta(o,n){const a=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",m=h||!(h||o.property!==void 0),v=o.type||(kn(n)?"exponential":"interval");if(a||n.type==="padding"){const U=a?Ee.parse:Oe.parse;(o=Be({},o)).stops&&(o.stops=o.stops.map(J=>[J[0],U(J[1])])),o.default=U(o.default?o.default:n.default)}if(o.colorSpace&&o.colorSpace!=="rgb"&&!Jl[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let x,A,M;if(v==="exponential")x=nc;else if(v==="interval")x=wh;else if(v==="categorical"){x=rl,A=Object.create(null);for(const U of o.stops)A[U[0]]=U[1];M=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=il}if(h){const U={},J=[];for(let de=0;de<o.stops.length;de++){const ge=o.stops[de],Fe=ge[0].zoom;U[Fe]===void 0&&(U[Fe]={zoom:Fe,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Fe)),U[Fe].stops.push([ge[0].value,ge[1]])}const ie=[];for(const de of J)ie.push([U[de].zoom,ta(U[de],n)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:vi.interpolationFactor.bind(void 0,ue),zoomStops:ie.map(de=>de[0]),evaluate:({zoom:de},ge)=>nc({stops:ie,base:o.base},n,de).evaluate(de,ge)}}if(m){const U=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:vi.interpolationFactor.bind(void 0,U),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>x(o,n,J,A,M)}}return{kind:"source",evaluate(U,J){const ie=J&&J.properties?J.properties[o.property]:void 0;return ie===void 0?ka(o.default,n.default):x(o,n,ie,A,M)}}}function ka(o,n,a){return o!==void 0?o:n!==void 0?n:a!==void 0?a:void 0}function rl(o,n,a,h,m){return ka(typeof a===m?h[a]:void 0,o.default,n.default)}function wh(o,n,a){if(Nn(a)!=="number")return ka(o.default,n.default);const h=o.stops.length;if(h===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[h-1][0])return o.stops[h-1][1];const m=Sa(o.stops.map(v=>v[0]),a);return o.stops[m][1]}function nc(o,n,a){const h=o.base!==void 0?o.base:1;if(Nn(a)!=="number")return ka(o.default,n.default);const m=o.stops.length;if(m===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[m-1][0])return o.stops[m-1][1];const v=Sa(o.stops.map(J=>J[0]),a),x=function(J,ie,ue,de){const ge=de-ue,Fe=J-ue;return ge===0?0:ie===1?Fe/ge:(Math.pow(ie,Fe)-1)/(Math.pow(ie,ge)-1)}(a,h,o.stops[v][0],o.stops[v+1][0]),A=o.stops[v][1],M=o.stops[v+1][1];let U=ss[n.type]||ar;if(o.colorSpace&&o.colorSpace!=="rgb"){const J=Jl[o.colorSpace];U=(ie,ue)=>J.reverse(J.interpolate(J.forward(ie),J.forward(ue),x))}return typeof A.evaluate=="function"?{evaluate(...J){const ie=A.evaluate.apply(void 0,J),ue=M.evaluate.apply(void 0,J);if(ie!==void 0&&ue!==void 0)return U(ie,ue,x)}}:U(A,M,x)}function il(o,n,a){switch(n.type){case"color":a=Ee.parse(a);break;case"formatted":a=Ue.fromString(a.toString());break;case"resolvedImage":a=He.fromString(a.toString());break;case"padding":a=Oe.parse(a);break;default:Nn(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return ka(a,o.default,n.default)}Hn.register(Pa,{error:[{kind:"error"},[Dt],(o,[n])=>{throw new Rt(n.evaluate(o))}],typeof:[Dt,[hn],(o,[n])=>Ct(at(n.evaluate(o)))],"to-rgba":[yn(_t,4),[mr],(o,[n])=>n.evaluate(o).toArray()],rgb:[mr,[_t,_t,_t],Qu],rgba:[mr,[_t,_t,_t,_t],Qu],has:{type:cn,overloads:[[[Dt],(o,[n])=>ec(n.evaluate(o),o.properties())],[[Dt,Ci],(o,[n,a])=>ec(n.evaluate(o),a.evaluate(o))]]},get:{type:hn,overloads:[[[Dt],(o,[n])=>nl(n.evaluate(o),o.properties())],[[Dt,Ci],(o,[n,a])=>nl(n.evaluate(o),a.evaluate(o))]]},"feature-state":[hn,[Dt],(o,[n])=>nl(n.evaluate(o),o.featureState||{})],properties:[Ci,[],o=>o.properties()],"geometry-type":[Dt,[],o=>o.geometryType()],id:[hn,[],o=>o.id()],zoom:[_t,[],o=>o.globals.zoom],"heatmap-density":[_t,[],o=>o.globals.heatmapDensity||0],"line-progress":[_t,[],o=>o.globals.lineProgress||0],accumulated:[hn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[_t,io(_t),(o,n)=>{let a=0;for(const h of n)a+=h.evaluate(o);return a}],"*":[_t,io(_t),(o,n)=>{let a=1;for(const h of n)a*=h.evaluate(o);return a}],"-":{type:_t,overloads:[[[_t,_t],(o,[n,a])=>n.evaluate(o)-a.evaluate(o)],[[_t],(o,[n])=>-n.evaluate(o)]]},"/":[_t,[_t,_t],(o,[n,a])=>n.evaluate(o)/a.evaluate(o)],"%":[_t,[_t,_t],(o,[n,a])=>n.evaluate(o)%a.evaluate(o)],ln2:[_t,[],()=>Math.LN2],pi:[_t,[],()=>Math.PI],e:[_t,[],()=>Math.E],"^":[_t,[_t,_t],(o,[n,a])=>Math.pow(n.evaluate(o),a.evaluate(o))],sqrt:[_t,[_t],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))],log2:[_t,[_t],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[_t,[_t],(o,[n])=>Math.sin(n.evaluate(o))],cos:[_t,[_t],(o,[n])=>Math.cos(n.evaluate(o))],tan:[_t,[_t],(o,[n])=>Math.tan(n.evaluate(o))],asin:[_t,[_t],(o,[n])=>Math.asin(n.evaluate(o))],acos:[_t,[_t],(o,[n])=>Math.acos(n.evaluate(o))],atan:[_t,[_t],(o,[n])=>Math.atan(n.evaluate(o))],min:[_t,io(_t),(o,n)=>Math.min(...n.map(a=>a.evaluate(o)))],max:[_t,io(_t),(o,n)=>Math.max(...n.map(a=>a.evaluate(o)))],abs:[_t,[_t],(o,[n])=>Math.abs(n.evaluate(o))],round:[_t,[_t],(o,[n])=>{const a=n.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[_t,[_t],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[_t,[_t],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[cn,[Dt,hn],(o,[n,a])=>o.properties()[n.value]===a.value],"filter-id-==":[cn,[hn],(o,[n])=>o.id()===n.value],"filter-type-==":[cn,[Dt],(o,[n])=>o.geometryType()===n.value],"filter-<":[cn,[Dt,hn],(o,[n,a])=>{const h=o.properties()[n.value],m=a.value;return typeof h==typeof m&&h<m}],"filter-id-<":[cn,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<h}],"filter->":[cn,[Dt,hn],(o,[n,a])=>{const h=o.properties()[n.value],m=a.value;return typeof h==typeof m&&h>m}],"filter-id->":[cn,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>h}],"filter-<=":[cn,[Dt,hn],(o,[n,a])=>{const h=o.properties()[n.value],m=a.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[cn,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a<=h}],"filter->=":[cn,[Dt,hn],(o,[n,a])=>{const h=o.properties()[n.value],m=a.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[cn,[hn],(o,[n])=>{const a=o.id(),h=n.value;return typeof a==typeof h&&a>=h}],"filter-has":[cn,[hn],(o,[n])=>n.value in o.properties()],"filter-has-id":[cn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[cn,[yn(Dt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[cn,[yn(hn)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[cn,[Dt,yn(hn)],(o,[n,a])=>a.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[cn,[Dt,yn(hn)],(o,[n,a])=>function(h,m,v,x){for(;v<=x;){const A=v+x>>1;if(m[A]===h)return!0;m[A]>h?x=A-1:v=A+1}return!1}(o.properties()[n.value],a.value,0,a.value.length-1)],all:{type:cn,overloads:[[[cn,cn],(o,[n,a])=>n.evaluate(o)&&a.evaluate(o)],[io(cn),(o,n)=>{for(const a of n)if(!a.evaluate(o))return!1;return!0}]]},any:{type:cn,overloads:[[[cn,cn],(o,[n,a])=>n.evaluate(o)||a.evaluate(o)],[io(cn),(o,n)=>{for(const a of n)if(a.evaluate(o))return!0;return!1}]]},"!":[cn,[cn],(o,[n])=>!n.evaluate(o)],"is-supported-script":[cn,[Dt],(o,[n])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(n.evaluate(o))}],upcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Dt,[Dt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Dt,io(hn),(o,n)=>n.map(a=>Zt(a.evaluate(o))).join("")],"resolved-locale":[Dt,[ir],(o,[n])=>n.evaluate(o).resolvedLocale()]});class hs{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new Rn,this._defaultValue=a?function(h){return h.type==="color"&&tr(h.default)?new Ee(0,0,0,0):h.type==="color"?Ee.parse(h.default)||null:h.type==="padding"?Oe.parse(h.default)||null:h.default===void 0?null:h.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,h,m,v,x){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,a,h,m,v,x){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Rt(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function Ma(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Pa}function fs(o,n){const a=new Ea(Pa,[],n?function(m){const v={color:mr,string:Dt,number:_t,enum:Dt,boolean:cn,formatted:wr,padding:ei,resolvedImage:gr};return m.type==="array"?yn(v[m.value]||hn,m.length):v[m.type]}(n):void 0),h=a.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?tc(new hs(h,n)):Di(a.errors)}class ds{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!ba(a.expression)}evaluateWithoutErrorHandling(n,a,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,m,v,x)}evaluate(n,a,h,m,v,x){return this._styleExpression.evaluate(n,a,h,m,v,x)}}class za{constructor(n,a,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!ba(a.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,a,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,h,m,v,x)}evaluate(n,a,h,m,v,x){return this._styleExpression.evaluate(n,a,h,m,v,x)}interpolationFactor(n,a,h){return this.interpolationType?vi.interpolationFactor(this.interpolationType,n,a,h):0}}function Ro(o,n){const a=fs(o,n);if(a.result==="error")return a;const h=a.value.expression,m=as(h);if(!m&&!er(n))return Di([new qt("","data expressions not supported")]);const v=Hs(h,["zoom"]);if(!v&&!Bi(n))return Di([new qt("","zoom expressions not supported")]);const x=ps(h);return x||v?x instanceof qt?Di([x]):x instanceof vi&&!kn(n)?Di([new qt("",'"interpolate" expressions cannot be used with this property')]):tc(x?new za(m?"camera":"composite",a.value,x.labels,x instanceof vi?x.interpolation:void 0):new ds(m?"constant":"source",a.value)):Di([new qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ol{constructor(n,a){this._parameters=n,this._specification=a,Be(this,ta(this._parameters,this._specification))}static deserialize(n){return new ol(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ps(o){let n=null;if(o instanceof Ys)n=ps(o.result);else if(o instanceof cs){for(const a of o.args)if(n=ps(a),n)break}else(o instanceof Ta||o instanceof vi)&&o.input instanceof Hn&&o.input.name==="zoom"&&(n=o);return n instanceof qt||o.eachChild(a=>{const h=ps(a);h instanceof qt?n=h:!n&&h?n=new qt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new qt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function li(o){const n=o.key,a=o.value,h=o.valueSpec||{},m=o.objectElementValidators||{},v=o.style,x=o.styleSpec;let A=[];const M=Nn(a);if(M!=="object")return[new L(n,a,`object expected, ${M} found`)];for(const U in a){const J=U.split(".")[0],ie=h[J]||h["*"];let ue;if(m[J])ue=m[J];else if(h[J])ue=B;else if(m["*"])ue=m["*"];else{if(!h["*"]){A.push(new L(n,a[U],`unknown property "${U}"`));continue}ue=B}A=A.concat(ue({key:(n&&`${n}.`)+U,value:a[U],valueSpec:ie,style:v,styleSpec:x,object:a,objectKey:U},a))}for(const U in h)m[U]||h[U].required&&h[U].default===void 0&&a[U]===void 0&&A.push(new L(n,a,`missing required property "${U}"`));return A}function rc(o){const n=o.value,a=o.valueSpec,h=o.style,m=o.styleSpec,v=o.key,x=o.arrayElementValidator||B;if(Nn(n)!=="array")return[new L(v,n,`array expected, ${Nn(n)} found`)];if(a.length&&n.length!==a.length)return[new L(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new L(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let A={type:a.value,values:a.values};m.$version<7&&(A.function=a.function),Nn(a.value)==="object"&&(A=a.value);let M=[];for(let U=0;U<n.length;U++)M=M.concat(x({array:n,arrayIndex:U,value:n[U],valueSpec:A,style:h,styleSpec:m,key:`${v}[${U}]`}));return M}function Oo(o){const n=o.key,a=o.value,h=o.valueSpec;let m=Nn(a);return m==="number"&&a!=a&&(m="NaN"),m!=="number"?[new L(n,a,`number expected, ${m} found`)]:"minimum"in h&&a<h.minimum?[new L(n,a,`${a} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&a>h.maximum?[new L(n,a,`${a} is greater than the maximum value ${h.maximum}`)]:[]}function na(o){const n=o.valueSpec,a=We(o.value.type);let h,m,v,x={};const A=a!=="categorical"&&o.value.property===void 0,M=!A,U=Nn(o.value.stops)==="array"&&Nn(o.value.stops[0])==="array"&&Nn(o.value.stops[0][0])==="object",J=li({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(de){if(a==="identity")return[new L(de.key,de.value,'identity function may not have a "stops" property')];let ge=[];const Fe=de.value;return ge=ge.concat(rc({key:de.key,value:Fe,valueSpec:de.valueSpec,style:de.style,styleSpec:de.styleSpec,arrayElementValidator:ie})),Nn(Fe)==="array"&&Fe.length===0&&ge.push(new L(de.key,Fe,"array must have at least one stop")),ge},default:function(de){return B({key:de.key,value:de.value,valueSpec:n,style:de.style,styleSpec:de.styleSpec})}}});return a==="identity"&&A&&J.push(new L(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||J.push(new L(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!kn(o.valueSpec)&&J.push(new L(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!er(o.valueSpec)?J.push(new L(o.key,o.value,"property functions not supported")):A&&!Bi(o.valueSpec)&&J.push(new L(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!U||o.value.property!==void 0||J.push(new L(o.key,o.value,'"property" property is required')),J;function ie(de){let ge=[];const Fe=de.value,Le=de.key;if(Nn(Fe)!=="array")return[new L(Le,Fe,`array expected, ${Nn(Fe)} found`)];if(Fe.length!==2)return[new L(Le,Fe,`array length 2 expected, length ${Fe.length} found`)];if(U){if(Nn(Fe[0])!=="object")return[new L(Le,Fe,`object expected, ${Nn(Fe[0])} found`)];if(Fe[0].zoom===void 0)return[new L(Le,Fe,"object stop key must have zoom")];if(Fe[0].value===void 0)return[new L(Le,Fe,"object stop key must have value")];if(v&&v>We(Fe[0].zoom))return[new L(Le,Fe[0].zoom,"stop zoom values must appear in ascending order")];We(Fe[0].zoom)!==v&&(v=We(Fe[0].zoom),m=void 0,x={}),ge=ge.concat(li({key:`${Le}[0]`,value:Fe[0],valueSpec:{zoom:{}},style:de.style,styleSpec:de.styleSpec,objectElementValidators:{zoom:Oo,value:ue}}))}else ge=ge.concat(ue({key:`${Le}[0]`,value:Fe[0],valueSpec:{},style:de.style,styleSpec:de.styleSpec},Fe));return Ma(it(Fe[1]))?ge.concat([new L(`${Le}[1]`,Fe[1],"expressions are not allowed in function stops.")]):ge.concat(B({key:`${Le}[1]`,value:Fe[1],valueSpec:n,style:de.style,styleSpec:de.styleSpec}))}function ue(de,ge){const Fe=Nn(de.value),Le=We(de.value),Ke=de.value!==null?de.value:ge;if(h){if(Fe!==h)return[new L(de.key,Ke,`${Fe} stop domain type must match previous stop domain type ${h}`)]}else h=Fe;if(Fe!=="number"&&Fe!=="string"&&Fe!=="boolean")return[new L(de.key,Ke,"stop domain value must be a number, string, or boolean")];if(Fe!=="number"&&a!=="categorical"){let rt=`number expected, ${Fe} found`;return er(n)&&a===void 0&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new L(de.key,Ke,rt)]}return a!=="categorical"||Fe!=="number"||isFinite(Le)&&Math.floor(Le)===Le?a!=="categorical"&&Fe==="number"&&m!==void 0&&Le<m?[new L(de.key,Ke,"stop domain values must appear in ascending order")]:(m=Le,a==="categorical"&&Le in x?[new L(de.key,Ke,"stop domain values must be unique")]:(x[Le]=!0,[])):[new L(de.key,Ke,`integer expected, found ${Le}`)]}}function br(o){const n=(o.expressionContext==="property"?Ro:fs)(it(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new L(`${o.key}${h.key}`,o.value,h.message));const a=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new L(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!ba(a))return[new L(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!ba(a))return[new L(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Hs(a,["zoom","feature-state"]))return[new L(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!as(a))return[new L(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ni(o){const n=o.key,a=o.value,h=o.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(We(a))===-1&&m.push(new L(n,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(We(a))===-1&&m.push(new L(n,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),m}function Fo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Fo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const au={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function al(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Fo(o)||(o=ni(o));const n=fs(o,au);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,h,m)=>n.value.evaluate(a,h,{},m),needGeometry:gs(o)}}function ms(o,n){return o<n?-1:o>n?1:0}function gs(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(gs(o[n]))return!0;return!1}function ni(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?jo(o[1],o[2],"=="):n==="!="?go(jo(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?jo(o[1],o[2],n):n==="any"?(a=o.slice(1),["any"].concat(a.map(ni))):n==="all"?["all"].concat(o.slice(1).map(ni)):n==="none"?["all"].concat(o.slice(1).map(ni).map(go)):n==="in"?ys(o[1],o.slice(2)):n==="!in"?go(ys(o[1],o.slice(2))):n==="has"?Do(o[1]):n==="!has"?go(Do(o[1])):n!=="within"||o;var a}function jo(o,n,a){switch(o){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,o,n]}}function ys(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",o,["literal",n.sort(ms)]]:["filter-in-small",o,["literal",n]]}}function Do(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function go(o){return["!",o]}function La(o){return Fo(it(o.value))?br(Be({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):su(o)}function su(o){const n=o.value,a=o.key;if(Nn(n)!=="array")return[new L(a,n,`array expected, ${Nn(n)} found`)];const h=o.styleSpec;let m,v=[];if(n.length<1)return[new L(a,n,"filter array must have at least 1 element")];switch(v=v.concat(Ni({key:`${a}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),We(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&We(n[1])==="$type"&&v.push(new L(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new L(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Nn(n[1]),m!=="string"&&v.push(new L(`${a}[1]`,n[1],`string expected, ${m} found`)));for(let x=2;x<n.length;x++)m=Nn(n[x]),We(n[1])==="$type"?v=v.concat(Ni({key:`${a}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new L(`${a}[${x}]`,n[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(su({key:`${a}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=Nn(n[1]),n.length!==2?v.push(new L(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new L(`${a}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Nn(n[1]),n.length!==2?v.push(new L(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new L(`${a}[1]`,n[1],`object expected, ${m} found`))}return v}function Ra(o,n){const a=o.key,h=o.style,m=o.styleSpec,v=o.value,x=o.objectKey,A=m[`${n}_${o.layerType}`];if(!A)return[];const M=x.match(/^(.*)-transition$/);if(n==="paint"&&M&&A[M[1]]&&A[M[1]].transition)return B({key:a,value:v,valueSpec:m.transition,style:h,styleSpec:m});const U=o.valueSpec||A[x];if(!U)return[new L(a,v,`unknown property "${x}"`)];let J;if(Nn(v)==="string"&&er(U)&&!U.tokens&&(J=/^{([^}]+)}$/.exec(v)))return[new L(a,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const ie=[];return o.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&ie.push(new L(a,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&tr(it(v))&&We(v.type)==="identity"&&ie.push(new L(a,v,'"text-font" does not support identity functions'))),ie.concat(B({key:o.key,value:v,valueSpec:U,style:h,styleSpec:m,expressionContext:"property",propertyType:n,propertyKey:x}))}function lu(o){return Ra(o,"paint")}function yo(o){return Ra(o,"layout")}function uu(o){let n=[];const a=o.value,h=o.key,m=o.style,v=o.styleSpec;a.type||a.ref||n.push(new L(h,a,'either "type" or "ref" is required'));let x=We(a.type);const A=We(a.ref);if(a.id){const M=We(a.id);for(let U=0;U<o.arrayIndex;U++){const J=m.layers[U];We(J.id)===M&&n.push(new L(h,a.id,`duplicate layer id "${a.id}", previously used at line ${J.id.__line__}`))}}if("ref"in a){let M;["type","source","source-layer","filter","layout"].forEach(U=>{U in a&&n.push(new L(h,a[U],`"${U}" is prohibited for ref layers`))}),m.layers.forEach(U=>{We(U.id)===A&&(M=U)}),M?M.ref?n.push(new L(h,a.ref,"ref cannot reference another ref layer")):x=We(M.type):n.push(new L(h,a.ref,`ref layer "${A}" not found`))}else if(x!=="background")if(a.source){const M=m.sources&&m.sources[a.source],U=M&&We(M.type);M?U==="vector"&&x==="raster"?n.push(new L(h,a.source,`layer "${a.id}" requires a raster source`)):U==="raster"&&x!=="raster"?n.push(new L(h,a.source,`layer "${a.id}" requires a vector source`)):U!=="vector"||a["source-layer"]?U==="raster-dem"&&x!=="hillshade"?n.push(new L(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||U==="geojson"&&M.lineMetrics||n.push(new L(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new L(h,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new L(h,a.source,`source "${a.source}" not found`))}else n.push(new L(h,a,'missing required property "source"'));return n=n.concat(li({key:h,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>B({key:`${h}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:La,layout:M=>li({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":U=>yo(Be({layerType:x},U))}}),paint:M=>li({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":U=>lu(Be({layerType:x},U))}})}})),n}function Oa(o){const n=o.value,a=o.key,h=Nn(n);return h!=="string"?[new L(a,n,`string expected, ${h} found`)]:[]}const cu={promoteId:function({key:o,value:n}){if(Nn(n)==="string")return Oa({key:o,value:n});{const a=[];for(const h in n)a.push(...Oa({key:`${o}.${h}`,value:n[h]}));return a}}};function ra(o){const n=o.value,a=o.key,h=o.styleSpec,m=o.style;if(!n.type)return[new L(a,n,'"type" is required')];const v=We(n.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=li({key:a,value:n,valueSpec:h[`source_${v.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:cu}),x;case"geojson":if(x=li({key:a,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,objectElementValidators:cu}),n.cluster)for(const A in n.clusterProperties){const[M,U]=n.clusterProperties[A],J=typeof M=="string"?[M,["accumulated"],["get",A]]:M;x.push(...br({key:`${a}.${A}.map`,value:U,expressionContext:"cluster-map"})),x.push(...br({key:`${a}.${A}.reduce`,value:J,expressionContext:"cluster-reduce"}))}return x;case"video":return li({key:a,value:n,valueSpec:h.source_video,style:m,styleSpec:h});case"image":return li({key:a,value:n,valueSpec:h.source_image,style:m,styleSpec:h});case"canvas":return[new L(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ni({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:h})}}function Fa(o){const n=o.value,a=o.styleSpec,h=a.light,m=o.style;let v=[];const x=Nn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new L("light",n,`object expected, ${x} found`)]),v;for(const A in n){const M=A.match(/^(.*)-transition$/);v=v.concat(M&&h[M[1]]&&h[M[1]].transition?B({key:A,value:n[A],valueSpec:a.transition,style:m,styleSpec:a}):h[A]?B({key:A,value:n[A],valueSpec:h[A],style:m,styleSpec:a}):[new L(A,n[A],`unknown property "${A}"`)])}return v}function ui(o){const n=o.value,a=o.styleSpec,h=a.terrain,m=o.style;let v=[];const x=Nn(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new L("terrain",n,`object expected, ${x} found`)]),v;for(const A in n)v=v.concat(h[A]?B({key:A,value:n[A],valueSpec:h[A],style:m,styleSpec:a}):[new L(A,n[A],`unknown property "${A}"`)]);return v}const ja={"*":()=>[],array:rc,boolean:function(o){const n=o.value,a=o.key,h=Nn(n);return h!=="boolean"?[new L(a,n,`boolean expected, ${h} found`)]:[]},number:Oo,color:function(o){const n=o.key,a=o.value,h=Nn(a);return h!=="string"?[new L(n,a,`color expected, ${h} found`)]:ti(a)===null?[new L(n,a,`color expected, "${a}" found`)]:[]},constants:Se,enum:Ni,filter:La,function:na,layer:uu,object:li,source:ra,light:Fa,terrain:ui,string:Oa,formatted:function(o){return Oa(o).length===0?[]:br(o)},resolvedImage:function(o){return Oa(o).length===0?[]:br(o)},padding:function(o){const n=o.key,a=o.value;if(Nn(a)==="array"){if(a.length<1||a.length>4)return[new L(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<a.length;v++)m=m.concat(B({key:`${n}[${v}]`,value:a[v],valueSpec:h}));return m}return Oo({key:n,value:a,valueSpec:{}})}};function B(o){const n=o.value,a=o.valueSpec,h=o.styleSpec;return a.expression&&tr(We(n))?na(o):a.expression&&Ma(it(n))?br(o):a.type&&ja[a.type]?ja[a.type](o):li(Be({},o,{valueSpec:a.type?h[a.type]:a}))}function me(o){const n=o.value,a=o.key,h=Oa(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new L(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new L(a,n,'"glyphs" url must include a "{range}" token'))),h}function Re(o,n=P){let a=[];return a=a.concat(B({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:me,"*":()=>[]}})),o.constants&&(a=a.concat(Se({key:"constants",value:o.constants,style:o,styleSpec:n}))),ot(a)}function ot(o){return[].concat(o).sort((n,a)=>n.line-a.line)}function It(o){return function(...n){return ot(o.apply(this,n))}}Re.source=It(ra),Re.light=It(Fa),Re.terrain=It(ui),Re.layer=It(uu),Re.filter=It(La),Re.paintProperty=It(lu),Re.layoutProperty=It(yo);const St=Re,Xt=St.light,tn=St.paintProperty,En=St.layoutProperty;function $n(o,n){let a=!1;if(n&&n.length)for(const h of n)o.fire(new ut(new Error(h.message))),a=!0;return a}class jn{constructor(n,a,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(a=x[1])+2*(h=x[2]);for(let M=0;M<this.d*this.d;M++){const U=x[3+M],J=x[3+M+1];m.push(U===J?null:x.subarray(U,J))}const A=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],A),this.bboxes=x.subarray(A),this.insert=this._insertReadonly}else{this.d=a+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=h,this.scale=a/n,this.uid=0;const v=h/a*n;this.min=-v,this.max=n+v}insert(n,a,h,m,v){this._forEachCell(a,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,h,m,v,x){this.cells[v].push(x)}query(n,a,h,m,v){const x=this.min,A=this.max;if(n<=x&&a<=x&&A<=h&&A<=m&&!v)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(n,a,h,m,this._queryCell,M,{},v),M}}_queryCell(n,a,h,m,v,x,A,M){const U=this.cells[v];if(U!==null){const J=this.keys,ie=this.bboxes;for(let ue=0;ue<U.length;ue++){const de=U[ue];if(A[de]===void 0){const ge=4*de;(M?M(ie[ge+0],ie[ge+1],ie[ge+2],ie[ge+3]):n<=ie[ge+2]&&a<=ie[ge+3]&&h>=ie[ge+0]&&m>=ie[ge+1])?(A[de]=!0,x.push(J[de])):A[de]=!1}}}}_forEachCell(n,a,h,m,v,x,A,M){const U=this._convertToCellCoord(n),J=this._convertToCellCoord(a),ie=this._convertToCellCoord(h),ue=this._convertToCellCoord(m);for(let de=U;de<=ie;de++)for(let ge=J;ge<=ue;ge++){const Fe=this.d*ge+de;if((!M||M(this._convertFromCellCoord(de),this._convertFromCellCoord(ge),this._convertFromCellCoord(de+1),this._convertFromCellCoord(ge+1)))&&v.call(this,n,a,h,m,Fe,x,A,M))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(a+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=a;for(let x=0;x<n.length;x++){const A=n[x];m[3+x]=v,m.set(A,v),v+=A.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,a){const h=n.toArrayBuffer();return a&&a.push(h),{buffer:h}}static deserialize(n){return new jn(n.buffer)}}const Vn={};function Tt(o,n,a={}){if(Vn[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Vn[o]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}Tt("Object",Object),Tt("TransferableGridIndex",jn),Tt("Color",Ee),Tt("Error",Error),Tt("AJAXError",Nt),Tt("ResolvedImage",He),Tt("StylePropertyFunction",ol),Tt("StyleExpression",hs,{omit:["_evaluator"]}),Tt("ZoomDependentExpression",za),Tt("ZoomConstantExpression",ds),Tt("CompoundExpression",Hn,{omit:["_evaluate"]});for(const o in Pa)Pa[o]._classRegistryKey||Tt(`Expression_${o}`,Pa[o]);function Vr(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function cr(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Vr(o)||be(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return n&&n.push(a.buffer),a}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const h of o)a.push(cr(h,n));return a}if(typeof o=="object"){const a=o.constructor,h=a._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Vn[h])throw new Error(`${h} is not registered.`);const m=a.serialize?a.serialize(o,n):{};if(a.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Vn[h].omit.indexOf(v)>=0)continue;const x=o[v];m[v]=Vn[h].shallow.indexOf(v)>=0?x:cr(x,n)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof o)}function ri(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Vr(o)||be(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(ri);if(typeof o=="object"){const n=o.$name||"Object";if(!Vn[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=Vn[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(o);const h=Object.create(a.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const v=o[m];h[m]=Vn[n].shallow.indexOf(m)>=0?v:ri(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Ui{constructor(){this.first=!0}update(n,a){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const kt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function vs(o){for(const n of o)if(bh(n.charCodeAt(0)))return!0;return!1}function sl(o){for(const n of o)if(!Da(n.charCodeAt(0)))return!1;return!0}function Da(o){return!(kt.Arabic(o)||kt["Arabic Supplement"](o)||kt["Arabic Extended-A"](o)||kt["Arabic Presentation Forms-A"](o)||kt["Arabic Presentation Forms-B"](o))}function bh(o){return!(o!==746&&o!==747&&(o<4352||!(kt["Bopomofo Extended"](o)||kt.Bopomofo(o)||kt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||kt["CJK Compatibility Ideographs"](o)||kt["CJK Compatibility"](o)||kt["CJK Radicals Supplement"](o)||kt["CJK Strokes"](o)||!(!kt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||kt["CJK Unified Ideographs Extension A"](o)||kt["CJK Unified Ideographs"](o)||kt["Enclosed CJK Letters and Months"](o)||kt["Hangul Compatibility Jamo"](o)||kt["Hangul Jamo Extended-A"](o)||kt["Hangul Jamo Extended-B"](o)||kt["Hangul Jamo"](o)||kt["Hangul Syllables"](o)||kt.Hiragana(o)||kt["Ideographic Description Characters"](o)||kt.Kanbun(o)||kt["Kangxi Radicals"](o)||kt["Katakana Phonetic Extensions"](o)||kt.Katakana(o)&&o!==12540||!(!kt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!kt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||kt["Unified Canadian Aboriginal Syllabics"](o)||kt["Unified Canadian Aboriginal Syllabics Extended"](o)||kt["Vertical Forms"](o)||kt["Yijing Hexagram Symbols"](o)||kt["Yi Syllables"](o)||kt["Yi Radicals"](o))))}function md(o){return!(bh(o)||function(n){return!!(kt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||kt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||kt["Letterlike Symbols"](n)||kt["Number Forms"](n)||kt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||kt["Control Pictures"](n)&&n!==9251||kt["Optical Character Recognition"](n)||kt["Enclosed Alphanumerics"](n)||kt["Geometric Shapes"](n)||kt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||kt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||kt["CJK Symbols and Punctuation"](n)||kt.Katakana(n)||kt["Private Use Area"](n)||kt["CJK Compatibility Forms"](n)||kt["Small Form Variants"](n)||kt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function gd(o){return o>=1424&&o<=2303||kt["Arabic Presentation Forms-A"](o)||kt["Arabic Presentation Forms-B"](o)}function Tg(o,n){return!(!n&&gd(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||kt.Khmer(o))}function yd(o){for(const n of o)if(gd(n.charCodeAt(0)))return!0;return!1}const Eh="deferred",Sh="loading",Th="loaded";let Ch=null,Ai="unavailable",Ba=null;const vd=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Ai="error"),Ch&&Ch(o)};function ll(){Ah.fire(new Ye("pluginStateChange",{pluginStatus:Ai,pluginURL:Ba}))}const Ah=new se,hu=function(){return Ai},_d=function(){if(Ai!==Eh||!Ba)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ai=Sh,ll(),Ba&&Cn({url:Ba},o=>{o?vd(o):(Ai=Th,ll())})},oo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ai===Th||oo.applyArabicShaping!=null,isLoading:()=>Ai===Sh,setState(o){if(!k())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ai=o.pluginStatus,Ba=o.pluginURL},isParsed(){if(!k())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return oo.applyArabicShaping!=null&&oo.processBidirectionalText!=null&&oo.processStyledBidirectionalText!=null},getPluginURL(){if(!k())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ba}};class hr{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ui,this.transition={})}isSupportedScript(n){return function(a,h){for(const m of a)if(!Tg(m.charCodeAt(0),h))return!1;return!0}(n,oo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class fu{constructor(n,a){this.property=n,this.value=a,this.expression=function(h,m){if(tr(h))return new ol(h,m);if(Ma(h)){const v=Ro(h,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=Ee.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)||(v=Oe.parse(h)),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,h){return this.property.possiblyEvaluate(this,n,a,h)}}class ic{constructor(n){this.property=n,this.value=new fu(n,void 0)}transitioned(n,a){return new wd(this.property,this.value,a,q({},n.transition,this.transition),n.now)}untransitioned(){return new wd(this.property,this.value,null,{},0)}}class xd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return N(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ic(this._values[n].property)),this._values[n].value=new fu(this._values[n].property,a===null?void 0:N(a))}getTransition(n){return N(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ic(this._values[n].property)),this._values[n].transition=N(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h);const m=this.getTransition(a);m!==void 0&&(n[`${a}-transition`]=m)}return n}transitioned(n,a){const h=new bd(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,a._values[m]);return h}untransitioned(){const n=new bd(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class wd{constructor(n,a,h,m,v){this.property=n,this.value=a,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,a,h){const m=n.now||0,v=this.value.possiblyEvaluate(n,a,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(n,a,h);{const A=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,a,h),v,function(M){if(M<=0)return 0;if(M>=1)return 1;const U=M*M,J=U*M;return 4*(M<.5?J:3*(M-U)+J-.75)}(A))}}return v}}class bd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,h){const m=new du(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,a,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Cg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return N(this._values[n].value)}setValue(n,a){this._values[n]=new fu(this._values[n].property,a===null?void 0:N(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(n[a]=h)}return n}possiblyEvaluate(n,a,h){const m=new du(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,a,h);return m}}class Bo{constructor(n,a,h){this.property=n,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,h,m){return this.property.evaluate(this.value,this.parameters,n,a,h,m)}}class du{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Kt{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,h){const m=ss[this.specification.type];return m?m(n,a,h):n}}class fn{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,h,m){return new Bo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},h,m)}:n.expression,a)}interpolate(n,a,h){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Bo(this,{kind:"constant",value:void 0},n.parameters);const m=ss[this.specification.type];return m?new Bo(this,{kind:"constant",value:m(n.value.value,a.value.value,h)},n.parameters):n}evaluate(n,a,h,m,v,x){return n.kind==="constant"?n.value:n.evaluate(a,h,m,v,x)}}class ul extends fn{possiblyEvaluate(n,a,h,m){if(n.value===void 0)return new Bo(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,m),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,A=this._calculate(x,x,x,a);return new Bo(this,{kind:"constant",value:A},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Bo(this,{kind:"constant",value:v},a)}return new Bo(this,n.expression,a)}evaluate(n,a,h,m,v,x){if(n.kind==="source"){const A=n.evaluate(a,h,m,v,x);return this._calculate(A,A,A,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},h,m),n.evaluate({zoom:Math.floor(a.zoom)},h,m),n.evaluate({zoom:Math.floor(a.zoom)+1},h,m),a):n.value}_calculate(n,a,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Ih{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},h,m);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new hr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new hr(Math.floor(a.zoom),a)),n.expression.evaluate(new hr(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:h,to:a}}interpolate(n){return n}}class Na{constructor(n){this.specification=n}possiblyEvaluate(n,a,h,m){return!!n.expression.evaluate(a,null,{},h,m)}interpolate(){return!1}}class ii{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const h=n[a];h.specification.overridable&&this.overridableProperties.push(a);const m=this.defaultPropertyValues[a]=new fu(h,void 0),v=this.defaultTransitionablePropertyValues[a]=new ic(h);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=m.possiblyEvaluate({})}}}Tt("DataDrivenProperty",fn),Tt("DataConstantProperty",Kt),Tt("CrossFadedDataDrivenProperty",ul),Tt("CrossFadedProperty",Ih),Tt("ColorRampProperty",Na);const Ua="-transition";class No extends se{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new Cg(a.layout)),a.paint)){this._transitionablePaint=new xd(a.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new du(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,h={}){a!=null&&this._validate(En,`layers.${this.id}.layout.${n}`,n,a,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(Ua)?this._transitionablePaint.getTransition(n.slice(0,-Ua.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,h={}){if(a!=null&&this._validate(tn,`layers.${this.id}.paint.${n}`,n,a,h))return!1;if(n.endsWith(Ua))return this._transitionablePaint.setTransition(n.slice(0,-Ua.length),a||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),A=m.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const M=this._transitionablePaint._values[n].value;return M.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,A,M)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),$(n,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(n,a,h,m,v={}){return(!v||v.validate!==!1)&&$n(this,n.call(St,{key:a,layerType:this.type,objectKey:h,value:m,styleSpec:P,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Bo&&er(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const Ed={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $a{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Cr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Fr(o,n=1){let a=0,h=0;return{members:o.map(m=>{const v=Ed[m.type].BYTES_PER_ELEMENT,x=a=Ph(a,Math.max(n,v)),A=m.components||1;return h=Math.max(h,v),a+=v*A,{name:m.name,type:m.type,components:A,offset:x}}),size:Ph(a,Math.max(h,n)),alignment:n}}function Ph(o,n){return Math.ceil(o/n)*n}class _s extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const m=2*n;return this.int16[m+0]=a,this.int16[m+1]=h,n}}_s.prototype.bytesPerElement=4,Tt("StructArrayLayout2i4",_s);class p extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,m)}emplace(n,a,h,m,v){const x=4*n;return this.int16[x+0]=a,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=v,n}}p.prototype.bytesPerElement=8,Tt("StructArrayLayout4i8",p);class r extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,m,v,x)}emplace(n,a,h,m,v,x,A){const M=6*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.int16[M+2]=m,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=A,n}}r.prototype.bytesPerElement=12,Tt("StructArrayLayout2i4i12",r);class u extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,m,v,x)}emplace(n,a,h,m,v,x,A){const M=4*n,U=8*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.uint8[U+4]=m,this.uint8[U+5]=v,this.uint8[U+6]=x,this.uint8[U+7]=A,n}}u.prototype.bytesPerElement=8,Tt("StructArrayLayout2i4ub8",u);class d extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const m=2*n;return this.float32[m+0]=a,this.float32[m+1]=h,n}}d.prototype.bytesPerElement=8,Tt("StructArrayLayout2f8",d);class g extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x,A,M,U,J){const ie=this.length;return this.resize(ie+1),this.emplace(ie,n,a,h,m,v,x,A,M,U,J)}emplace(n,a,h,m,v,x,A,M,U,J,ie){const ue=10*n;return this.uint16[ue+0]=a,this.uint16[ue+1]=h,this.uint16[ue+2]=m,this.uint16[ue+3]=v,this.uint16[ue+4]=x,this.uint16[ue+5]=A,this.uint16[ue+6]=M,this.uint16[ue+7]=U,this.uint16[ue+8]=J,this.uint16[ue+9]=ie,n}}g.prototype.bytesPerElement=20,Tt("StructArrayLayout10ui20",g);class _ extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x,A,M,U,J,ie,ue){const de=this.length;return this.resize(de+1),this.emplace(de,n,a,h,m,v,x,A,M,U,J,ie,ue)}emplace(n,a,h,m,v,x,A,M,U,J,ie,ue,de){const ge=12*n;return this.int16[ge+0]=a,this.int16[ge+1]=h,this.int16[ge+2]=m,this.int16[ge+3]=v,this.uint16[ge+4]=x,this.uint16[ge+5]=A,this.uint16[ge+6]=M,this.uint16[ge+7]=U,this.int16[ge+8]=J,this.int16[ge+9]=ie,this.int16[ge+10]=ue,this.int16[ge+11]=de,n}}_.prototype.bytesPerElement=24,Tt("StructArrayLayout4i4ui4i24",_);class C extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,h)}emplace(n,a,h,m){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=m,n}}C.prototype.bytesPerElement=12,Tt("StructArrayLayout3f12",C);class z extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}z.prototype.bytesPerElement=4,Tt("StructArrayLayout1ul4",z);class O extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x,A,M,U){const J=this.length;return this.resize(J+1),this.emplace(J,n,a,h,m,v,x,A,M,U)}emplace(n,a,h,m,v,x,A,M,U,J){const ie=10*n,ue=5*n;return this.int16[ie+0]=a,this.int16[ie+1]=h,this.int16[ie+2]=m,this.int16[ie+3]=v,this.int16[ie+4]=x,this.int16[ie+5]=A,this.uint32[ue+3]=M,this.uint16[ie+8]=U,this.uint16[ie+9]=J,n}}O.prototype.bytesPerElement=20,Tt("StructArrayLayout6i1ul2ui20",O);class W extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x){const A=this.length;return this.resize(A+1),this.emplace(A,n,a,h,m,v,x)}emplace(n,a,h,m,v,x,A){const M=6*n;return this.int16[M+0]=a,this.int16[M+1]=h,this.int16[M+2]=m,this.int16[M+3]=v,this.int16[M+4]=x,this.int16[M+5]=A,n}}W.prototype.bytesPerElement=12,Tt("StructArrayLayout2i2i2i12",W);class ee extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,h,m,v)}emplace(n,a,h,m,v,x){const A=4*n,M=8*n;return this.float32[A+0]=a,this.float32[A+1]=h,this.float32[A+2]=m,this.int16[M+6]=v,this.int16[M+7]=x,n}}ee.prototype.bytesPerElement=16,Tt("StructArrayLayout2f1f2i16",ee);class le extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,m)}emplace(n,a,h,m,v){const x=12*n,A=3*n;return this.uint8[x+0]=a,this.uint8[x+1]=h,this.float32[A+1]=m,this.float32[A+2]=v,n}}le.prototype.bytesPerElement=12,Tt("StructArrayLayout2ub2f12",le);class he extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,h)}emplace(n,a,h,m){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=h,this.uint16[v+2]=m,n}}he.prototype.bytesPerElement=6,Tt("StructArrayLayout3ui6",he);class ke extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe,Le,Ke){const rt=this.length;return this.resize(rt+1),this.emplace(rt,n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe,Le,Ke)}emplace(n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe,Le,Ke,rt){const qe=24*n,tt=12*n,yt=48*n;return this.int16[qe+0]=a,this.int16[qe+1]=h,this.uint16[qe+2]=m,this.uint16[qe+3]=v,this.uint32[tt+2]=x,this.uint32[tt+3]=A,this.uint32[tt+4]=M,this.uint16[qe+10]=U,this.uint16[qe+11]=J,this.uint16[qe+12]=ie,this.float32[tt+7]=ue,this.float32[tt+8]=de,this.uint8[yt+36]=ge,this.uint8[yt+37]=Fe,this.uint8[yt+38]=Le,this.uint32[tt+10]=Ke,this.int16[qe+22]=rt,n}}ke.prototype.bytesPerElement=48,Tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ke);class Ae extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe,Le,Ke,rt,qe,tt,yt,gt,$t,Ht,Ft,zt,Pt,jt){const Ot=this.length;return this.resize(Ot+1),this.emplace(Ot,n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe,Le,Ke,rt,qe,tt,yt,gt,$t,Ht,Ft,zt,Pt,jt)}emplace(n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe,Le,Ke,rt,qe,tt,yt,gt,$t,Ht,Ft,zt,Pt,jt,Ot){const Et=34*n,an=17*n;return this.int16[Et+0]=a,this.int16[Et+1]=h,this.int16[Et+2]=m,this.int16[Et+3]=v,this.int16[Et+4]=x,this.int16[Et+5]=A,this.int16[Et+6]=M,this.int16[Et+7]=U,this.uint16[Et+8]=J,this.uint16[Et+9]=ie,this.uint16[Et+10]=ue,this.uint16[Et+11]=de,this.uint16[Et+12]=ge,this.uint16[Et+13]=Fe,this.uint16[Et+14]=Le,this.uint16[Et+15]=Ke,this.uint16[Et+16]=rt,this.uint16[Et+17]=qe,this.uint16[Et+18]=tt,this.uint16[Et+19]=yt,this.uint16[Et+20]=gt,this.uint16[Et+21]=$t,this.uint16[Et+22]=Ht,this.uint32[an+12]=Ft,this.float32[an+13]=zt,this.float32[an+14]=Pt,this.float32[an+15]=jt,this.float32[an+16]=Ot,n}}Ae.prototype.bytesPerElement=68,Tt("StructArrayLayout8i15ui1ul4f68",Ae);class Ie extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}Ie.prototype.bytesPerElement=4,Tt("StructArrayLayout1f4",Ie);class Ge extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,h)}emplace(n,a,h,m){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=m,n}}Ge.prototype.bytesPerElement=6,Tt("StructArrayLayout3i6",Ge);class Xe extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,a,h)}emplace(n,a,h,m){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}Xe.prototype.bytesPerElement=8,Tt("StructArrayLayout1ul2ui8",Xe);class Je extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const h=this.length;return this.resize(h+1),this.emplace(h,n,a)}emplace(n,a,h){const m=2*n;return this.uint16[m+0]=a,this.uint16[m+1]=h,n}}Je.prototype.bytesPerElement=4,Tt("StructArrayLayout2ui4",Je);class ze extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}ze.prototype.bytesPerElement=2,Tt("StructArrayLayout1ui2",ze);class nt extends Cr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,h,m)}emplace(n,a,h,m,v){const x=4*n;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=v,n}}nt.prototype.bytesPerElement=16,Tt("StructArrayLayout4f16",nt);class et extends $a{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new re(this.anchorPointX,this.anchorPointY)}}et.prototype.size=20;class ht extends O{get(n){return new et(this,n)}}Tt("CollisionBoxArray",ht);class ft extends $a{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ft.prototype.size=48;class wt extends ke{get(n){return new ft(this,n)}}Tt("PlacedSymbolArray",wt);class lt extends $a{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}lt.prototype.size=68;class Bt extends Ae{get(n){return new lt(this,n)}}Tt("SymbolInstanceArray",Bt);class Mt extends Ie{getoffsetX(n){return this.float32[1*n+0]}}Tt("GlyphOffsetArray",Mt);class Ut extends Ge{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Tt("SymbolLineVertexArray",Ut);class wn extends $a{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}wn.prototype.size=8;class An extends Xe{get(n){return new wn(this,n)}}Tt("FeatureIndexArray",An);class on extends _s{}class qn extends _s{}class Kn extends _s{}class On extends r{}class Dn extends u{}class Qn extends d{}class Xr extends g{}class Uo extends _{}class vo extends C{}class $o extends z{}class Va extends W{}class ao extends le{}class Ii extends he{}class ia extends Je{}const oc=Fr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gr}=oc;class Mn{constructor(n=[]){this.segments=n}prepareSegment(n,a,h,m){let v=this.segments[this.segments.length-1];return n>Mn.MAX_VERTEX_ARRAY_LENGTH&&V(`Max vertices per segment is ${Mn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>Mn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,h,m){return new Mn([{vertexOffset:n,primitiveOffset:a,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Zn(o,n){return 256*(o=I(Math.floor(o),0,255))+I(Math.floor(n),0,255)}Mn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tt("SegmentVector",Mn);const qr=Fr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Kr={exports:{}},fr={exports:{}};fr.exports=function(o,n){var a,h,m,v,x,A,M,U;for(h=o.length-(a=3&o.length),m=n,x=3432918353,A=461845907,U=0;U<h;)M=255&o.charCodeAt(U)|(255&o.charCodeAt(++U))<<8|(255&o.charCodeAt(++U))<<16|(255&o.charCodeAt(++U))<<24,++U,m=27492+(65535&(v=5*(65535&(m=(m^=M=(65535&(M=(M=(65535&M)*x+(((M>>>16)*x&65535)<<16)&4294967295)<<15|M>>>17))*A+(((M>>>16)*A&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(M=0,a){case 3:M^=(255&o.charCodeAt(U+2))<<16;case 2:M^=(255&o.charCodeAt(U+1))<<8;case 1:m^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt(U)))*x+(((M>>>16)*x&65535)<<16)&4294967295)<<15|M>>>17))*A+(((M>>>16)*A&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var so={exports:{}};so.exports=function(o,n){for(var a,h=o.length,m=n^h,v=0;h>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var xs=fr.exports,kh=so.exports;Kr.exports=xs,Kr.exports.murmur3=xs,Kr.exports.murmur2=kh;class cl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,h,m){this.ids.push(Sd(n)),this.positions.push(a,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=Sd(n);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=a?m=x:h=x+1}const v=[];for(;this.ids[h]===a;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,a){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Mh(h,m,0,h.length-1),a&&a.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const a=new cl;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function Sd(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Kr.exports(String(o))}function Mh(o,n,a,h){for(;a<h;){const m=o[a+h>>1];let v=a-1,x=h+1;for(;;){do v++;while(o[v]<m);do x--;while(o[x]>m);if(v>=x)break;Ga(o,v,x),Ga(n,3*v,3*x),Ga(n,3*v+1,3*x+1),Ga(n,3*v+2,3*x+2)}x-a<h-x?(Mh(o,n,a,x),a=x+1):(Mh(o,n,x+1,h),h=x)}}function Ga(o,n,a){const h=o[n];o[n]=o[a],o[a]=h}Tt("FeaturePositionMap",cl);class ws{constructor(n,a){this.gl=n.gl,this.location=a}}class bs extends ws{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ac extends ws{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class N1 extends ws{constructor(n,a){super(n,a),this.current=Ee.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const wA=new Float32Array(16);function Ag(o){return[Zn(255*o.r,255*o.g),Zn(255*o.b,255*o.a)]}class zh{constructor(n,a,h){this.value=n,this.uniformNames=a.map(m=>`u_${m}`),this.type=h}setUniform(n,a,h){n.set(h.constantOr(this.value))}getBinding(n,a,h){return this.type==="color"?new N1(n,a):new bs(n,a)}}class sc{constructor(n,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,h){return h.substr(0,9)==="u_pattern"?new ac(n,a):new bs(n,a)}}class Es{constructor(n,a,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,a,h,m,v){const x=this.paintVertexArray.length,A=this.expression.evaluate(new hr(0),a,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,A)}updatePaintArray(n,a,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,a,v)}_setPaintValue(n,a,h){if(this.type==="color"){const m=Ag(h);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<a;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oa{constructor(n,a,h,m,v,x){this.expression=n,this.uniformNames=a.map(A=>`u_${A}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(A=>({name:`a_${A}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,a,h,m,v){const x=this.expression.evaluate(new hr(this.zoom),a,{},m,[],v),A=this.expression.evaluate(new hr(this.zoom+1),a,{},m,[],v),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,x,A)}updatePaintArray(n,a,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,h,m){if(this.type==="color"){const v=Ag(h),x=Ag(m);for(let A=n;A<a;A++)this.paintVertexArray.emplace(A,v[0],v[1],x[0],x[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const h=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,m=I(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,a,h){return new bs(n,a)}}class hl{constructor(n,a,h,m,v,x){this.expression=n,this.type=a,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(n,a,h,m,v){this._setPaintValues(n,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,a,h,m){if(!m||!h)return;const{min:v,mid:x,max:A}=h,M=m[v],U=m[x],J=m[A];if(M&&U&&J)for(let ie=n;ie<a;ie++)this.zoomInPaintVertexArray.emplace(ie,U.tl[0],U.tl[1],U.br[0],U.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],U.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(ie,U.tl[0],U.tl[1],U.br[0],U.br[1],J.tl[0],J.tl[1],J.br[0],J.br[1],U.pixelRatio,J.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,qr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,qr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class U1{constructor(n,a,h){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Bo&&er(x.property.specification)))continue;const A=bA(v,n.type),M=x.value,U=x.property.specification.type,J=x.property.useIntegerZoom,ie=x.property.specification["property-type"],ue=ie==="cross-faded"||ie==="cross-faded-data-driven";if(M.kind==="constant")this.binders[v]=ue?new sc(M.value,A):new zh(M.value,A,U),m.push(`/u_${v}`);else if(M.kind==="source"||ue){const de=$1(v,U,"source");this.binders[v]=ue?new hl(M,U,J,a,de,n.id):new Es(M,A,U,de),m.push(`/a_${v}`)}else{const de=$1(v,U,"composite");this.binders[v]=new oa(M,A,U,J,a,de),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof Es||a instanceof oa?a.maxValue:0}populatePaintArrays(n,a,h,m,v){for(const x in this.binders){const A=this.binders[x];(A instanceof Es||A instanceof oa||A instanceof hl)&&A.populatePaintArray(n,a,h,m,v)}}setConstantPatternPositions(n,a){for(const h in this.binders){const m=this.binders[h];m instanceof sc&&m.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,h,m,v){let x=!1;for(const A in n){const M=a.getPositions(A);for(const U of M){const J=h.feature(U.index);for(const ie in this.binders){const ue=this.binders[ie];if((ue instanceof Es||ue instanceof oa||ue instanceof hl)&&ue.expression.isStateDependent===!0){const de=m.paint.get(ie);ue.expression=de.value,ue.updatePaintArray(U.start,U.end,J,n[A],v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const h=this.binders[a];(h instanceof zh||h instanceof sc)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Es||h instanceof oa)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof hl)for(let m=0;m<qr.members.length;m++)n.push(qr.members[m].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof zh||h instanceof sc||h instanceof oa)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof zh||v instanceof sc||v instanceof oa){for(const x of v.uniformNames)if(a[x]){const A=v.getBinding(n,a[x],x);h.push({name:x,property:m,binding:A})}}}return h}setUniforms(n,a,h,m){for(const{name:v,property:x,binding:A}of a)this.binders[x].setUniform(A,m,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(n&&h instanceof hl){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Es||h instanceof oa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const a in this.binders){const h=this.binders[a];(h instanceof Es||h instanceof oa||h instanceof hl)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof Es||a instanceof oa||a instanceof hl)&&a.destroy()}}}class pu{constructor(n,a,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new U1(m,a,h);this.needsUpload=!1,this._featureMap=new cl,this._bufferOffset=0}populatePaintArrays(n,a,h,m,v,x){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(n,a,m,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function bA(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function $1(o,n,a){const h={color:{source:d,composite:nt},number:{source:Ie,composite:d}},m=function(v){return{"line-pattern":{source:Xr,composite:Xr},"fill-pattern":{source:Xr,composite:Xr},"fill-extrusion-pattern":{source:Xr,composite:Xr}}[v]}(o);return m&&m[a]||h[n][a]}Tt("ConstantBinder",zh),Tt("CrossFadedConstantBinder",sc),Tt("SourceExpressionBinder",Es),Tt("CrossFadedCompositeBinder",hl),Tt("CompositeExpressionBinder",oa),Tt("ProgramConfiguration",U1,{omit:["_buffers"]}),Tt("ProgramConfigurationSet",pu);var Zr=8192;const Ig=Math.pow(2,14)-1,V1=-Ig-1;function mu(o){const n=Zr/o.extent,a=o.loadGeometry();for(let h=0;h<a.length;h++){const m=a[h];for(let v=0;v<m.length;v++){const x=m[v],A=Math.round(x.x*n),M=Math.round(x.y*n);x.x=I(A,V1,Ig),x.y=I(M,V1,Ig),(A<x.x||A>x.x+1||M<x.y||M>x.y+1)&&V("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function gu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?mu(o):[]}}function Td(o,n,a,h,m){o.emplaceBack(2*n+(h+1)/2,2*a+(m+1)/2)}class Pg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new qn,this.indexArray=new Ii,this.segments=new Mn,this.programConfigurations=new pu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){const m=this.layers[0],v=[];let x=null,A=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),A=!x.isConstant());for(const{feature:M,id:U,index:J,sourceLayerIndex:ie}of n){const ue=this.layers[0]._featureFilter.needGeometry,de=gu(M,ue);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),de,h))continue;const ge=A?x.evaluate(de,{},h):void 0,Fe={id:U,properties:M.properties,type:M.type,sourceLayerIndex:ie,index:J,geometry:ue?de.geometry:mu(M),patterns:{},sortKey:ge};v.push(Fe)}A&&v.sort((M,U)=>M.sortKey-U.sortKey);for(const M of v){const{geometry:U,index:J,sourceLayerIndex:ie}=M,ue=n[J].feature;this.addFeature(M,U,J,h),a.featureIndex.insert(ue,U,J,ie,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gr),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,h,m){for(const v of a)for(const x of v){const A=x.x,M=x.y;if(A<0||A>=Zr||M<0||M>=Zr)continue;const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),J=U.vertexLength;Td(this.layoutVertexArray,A,M,-1,-1),Td(this.layoutVertexArray,A,M,1,-1),Td(this.layoutVertexArray,A,M,1,1),Td(this.layoutVertexArray,A,M,-1,1),this.indexArray.emplaceBack(J,J+1,J+2),this.indexArray.emplaceBack(J,J+3,J+2),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function G1(o,n){for(let a=0;a<o.length;a++)if(lc(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(lc(o,n[a]))return!0;return!!kg(o,n)}function EA(o,n,a){return!!lc(o,n)||!!Mg(n,o,a)}function Z1(o,n){if(o.length===1)return H1(n,o[0]);for(let a=0;a<n.length;a++){const h=n[a];for(let m=0;m<h.length;m++)if(lc(o,h[m]))return!0}for(let a=0;a<o.length;a++)if(H1(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(kg(o,n[a]))return!0;return!1}function SA(o,n,a){if(o.length>1){if(kg(o,n))return!0;for(let h=0;h<n.length;h++)if(Mg(n[h],o,a))return!0}for(let h=0;h<o.length;h++)if(Mg(o[h],n,a))return!0;return!1}function kg(o,n){if(o.length===0||n.length===0)return!1;for(let a=0;a<o.length-1;a++){const h=o[a],m=o[a+1];for(let v=0;v<n.length-1;v++)if(TA(h,m,n[v],n[v+1]))return!0}return!1}function TA(o,n,a,h){return D(o,a,h)!==D(n,a,h)&&D(o,n,a)!==D(o,n,h)}function Mg(o,n,a){const h=a*a;if(n.length===1)return o.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(W1(o,n[m-1],n[m])<h)return!0;return!1}function W1(o,n,a){const h=n.distSqr(a);if(h===0)return o.distSqr(n);const m=((o.x-n.x)*(a.x-n.x)+(o.y-n.y)*(a.y-n.y))/h;return o.distSqr(m<0?n:m>1?a:a.sub(n)._mult(m)._add(n))}function H1(o,n){let a,h,m,v=!1;for(let x=0;x<o.length;x++){a=o[x];for(let A=0,M=a.length-1;A<a.length;M=A++)h=a[A],m=a[M],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function lc(o,n){let a=!1;for(let h=0,m=o.length-1;h<o.length;m=h++){const v=o[h],x=o[m];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function CA(o,n,a){const h=a[0],m=a[2];if(o.x<h.x&&n.x<h.x||o.x>m.x&&n.x>m.x||o.y<h.y&&n.y<h.y||o.y>m.y&&n.y>m.y)return!1;const v=D(o,n,a[0]);return v!==D(o,n,a[1])||v!==D(o,n,a[2])||v!==D(o,n,a[3])}function Lh(o,n,a){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:a.programConfigurations.get(n.id).getMaxValue(o)}function Cd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Ad(o,n,a,h,m){if(!n[0]&&!n[1])return o;const v=re.convert(n)._mult(m);a==="viewport"&&v._rotate(-h);const x=[];for(let A=0;A<o.length;A++)x.push(o[A].sub(v));return x}Tt("CircleBucket",Pg,{omit:["layers"]});const AA=new ii({"circle-sort-key":new fn(P.layout_circle["circle-sort-key"])});var IA={paint:new ii({"circle-radius":new fn(P.paint_circle["circle-radius"]),"circle-color":new fn(P.paint_circle["circle-color"]),"circle-blur":new fn(P.paint_circle["circle-blur"]),"circle-opacity":new fn(P.paint_circle["circle-opacity"]),"circle-translate":new Kt(P.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(P.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(P.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(P.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fn(P.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fn(P.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fn(P.paint_circle["circle-stroke-opacity"])}),layout:AA},Pi=1e-6,ki=typeof Float32Array<"u"?Float32Array:Array;function X1(){var o=new ki(9);return ki!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function zg(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function q1(o,n,a){var h=n[0],m=n[1],v=n[2],x=n[3],A=n[4],M=n[5],U=n[6],J=n[7],ie=n[8],ue=n[9],de=n[10],ge=n[11],Fe=n[12],Le=n[13],Ke=n[14],rt=n[15],qe=a[0],tt=a[1],yt=a[2],gt=a[3];return o[0]=qe*h+tt*A+yt*ie+gt*Fe,o[1]=qe*m+tt*M+yt*ue+gt*Le,o[2]=qe*v+tt*U+yt*de+gt*Ke,o[3]=qe*x+tt*J+yt*ge+gt*rt,o[4]=(qe=a[4])*h+(tt=a[5])*A+(yt=a[6])*ie+(gt=a[7])*Fe,o[5]=qe*m+tt*M+yt*ue+gt*Le,o[6]=qe*v+tt*U+yt*de+gt*Ke,o[7]=qe*x+tt*J+yt*ge+gt*rt,o[8]=(qe=a[8])*h+(tt=a[9])*A+(yt=a[10])*ie+(gt=a[11])*Fe,o[9]=qe*m+tt*M+yt*ue+gt*Le,o[10]=qe*v+tt*U+yt*de+gt*Ke,o[11]=qe*x+tt*J+yt*ge+gt*rt,o[12]=(qe=a[12])*h+(tt=a[13])*A+(yt=a[14])*ie+(gt=a[15])*Fe,o[13]=qe*m+tt*M+yt*ue+gt*Le,o[14]=qe*v+tt*U+yt*de+gt*Ke,o[15]=qe*x+tt*J+yt*ge+gt*rt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Rh,PA=q1;function K1(){var o=new ki(3);return ki!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Y1(o,n,a){var h=new ki(3);return h[0]=o,h[1]=n,h[2]=a,h}function Id(o,n,a){var h=n[0],m=n[1],v=n[2],x=n[3];return o[0]=a[0]*h+a[4]*m+a[8]*v+a[12]*x,o[1]=a[1]*h+a[5]*m+a[9]*v+a[13]*x,o[2]=a[2]*h+a[6]*m+a[10]*v+a[14]*x,o[3]=a[3]*h+a[7]*m+a[11]*v+a[15]*x,o}function J1(){var o=new ki(4);return ki!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function Q1(o,n){const a=Id([],[o.x,o.y,0,1],n);return new re(a[0]/a[3],a[1]/a[3])}K1(),Rh=new ki(4),ki!=Float32Array&&(Rh[0]=0,Rh[1]=0,Rh[2]=0,Rh[3]=0),K1(),Y1(1,0,0),Y1(0,1,0),J1(),J1(),X1(),function(){var o;o=new ki(2),ki!=Float32Array&&(o[0]=0,o[1]=0)}();class ex extends Pg{}Tt("HeatmapBucket",ex,{omit:["layers"]});var kA={paint:new ii({"heatmap-radius":new fn(P.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fn(P.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(P.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Na(P.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(P.paint_heatmap["heatmap-opacity"])})};function Lg(o,{width:n,height:a},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*a*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*a*h}`)}else m=new Uint8Array(n*a*h);return o.width=n,o.height=a,o.data=m,o}function tx(o,{width:n,height:a},h){if(n===o.width&&a===o.height)return;const m=Lg({},{width:n,height:a},h);Rg(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,a)},h),o.width=n,o.height=a,o.data=m.data}function Rg(o,n,a,h,m,v){if(m.width===0||m.height===0)return n;if(m.width>o.width||m.height>o.height||a.x>o.width-m.width||a.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,A=n.data;if(x===A)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<m.height;M++){const U=((a.y+M)*o.width+a.x)*v,J=((h.y+M)*n.width+h.x)*v;for(let ie=0;ie<m.width*v;ie++)A[J+ie]=x[U+ie]}return n}class Oh{constructor(n,a){Lg(this,n,1,a)}resize(n){tx(this,n,1)}clone(){return new Oh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,m,v){Rg(n,a,h,m,v,1)}}class _o{constructor(n,a){Lg(this,n,4,a)}resize(n){tx(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new _o({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,h,m,v){Rg(n,a,h,m,v,4)}}function nx(o){const n={},a=o.resolution||256,h=o.clips?o.clips.length:1,m=o.image||new _o({width:a,height:h});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,A,M)=>{n[o.evaluationKey]=M;const U=o.expression.evaluate(n);m.data[x+A+0]=Math.floor(255*U.r/U.a),m.data[x+A+1]=Math.floor(255*U.g/U.a),m.data[x+A+2]=Math.floor(255*U.b/U.a),m.data[x+A+3]=Math.floor(255*U.a)};if(o.clips)for(let x=0,A=0;x<h;++x,A+=4*a)for(let M=0,U=0;M<a;M++,U+=4){const J=M/(a-1),{start:ie,end:ue}=o.clips[x];v(A,U,ie*(1-J)+ue*J)}else for(let x=0,A=0;x<a;x++,A+=4)v(0,A,x/(a-1));return m}Tt("AlphaImage",Oh),Tt("RGBAImage",_o);var MA={paint:new ii({"hillshade-illumination-direction":new Kt(P.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(P.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(P.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(P.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(P.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(P.paint_hillshade["hillshade-accent-color"])})};const zA=Fr([{name:"a_pos",components:2,type:"Int16"}],4),{members:LA}=zA;var Pd={exports:{}};function kd(o,n,a){a=a||2;var h,m,v,x,A,M,U,J=n&&n.length,ie=J?n[0]*a:o.length,ue=rx(o,0,ie,a,!0),de=[];if(!ue||ue.next===ue.prev)return de;if(J&&(ue=function(Fe,Le,Ke,rt){var qe,tt,yt,gt=[];for(qe=0,tt=Le.length;qe<tt;qe++)(yt=rx(Fe,Le[qe]*rt,qe<tt-1?Le[qe+1]*rt:Fe.length,rt,!1))===yt.next&&(yt.steiner=!0),gt.push(UA(yt));for(gt.sort(DA),qe=0;qe<gt.length;qe++)Ke=BA(gt[qe],Ke);return Ke}(o,n,ue,a)),o.length>80*a){h=v=o[0],m=x=o[1];for(var ge=a;ge<ie;ge+=a)(A=o[ge])<h&&(h=A),(M=o[ge+1])<m&&(m=M),A>v&&(v=A),M>x&&(x=M);U=(U=Math.max(v-h,x-m))!==0?32767/U:0}return Fh(ue,de,a,h,m,U,0),de}function rx(o,n,a,h,m){var v,x;if(m===jg(o,n,a,h)>0)for(v=n;v<a;v+=h)x=ax(v,o[v],o[v+1],x);else for(v=a-h;v>=n;v-=h)x=ax(v,o[v],o[v+1],x);return x&&Md(x,x.next)&&(Dh(x),x=x.next),x}function yu(o,n){if(!o)return o;n||(n=o);var a,h=o;do if(a=!1,h.steiner||!Md(h,h.next)&&Pr(h.prev,h,h.next)!==0)h=h.next;else{if(Dh(h),(h=n=h.prev)===h.next)break;a=!0}while(a||h!==n);return n}function Fh(o,n,a,h,m,v,x){if(o){!x&&v&&function(J,ie,ue,de){var ge=J;do ge.z===0&&(ge.z=Og(ge.x,ge.y,ie,ue,de)),ge.prevZ=ge.prev,ge.nextZ=ge.next,ge=ge.next;while(ge!==J);ge.prevZ.nextZ=null,ge.prevZ=null,function(Fe){var Le,Ke,rt,qe,tt,yt,gt,$t,Ht=1;do{for(Ke=Fe,Fe=null,tt=null,yt=0;Ke;){for(yt++,rt=Ke,gt=0,Le=0;Le<Ht&&(gt++,rt=rt.nextZ);Le++);for($t=Ht;gt>0||$t>0&&rt;)gt!==0&&($t===0||!rt||Ke.z<=rt.z)?(qe=Ke,Ke=Ke.nextZ,gt--):(qe=rt,rt=rt.nextZ,$t--),tt?tt.nextZ=qe:Fe=qe,qe.prevZ=tt,tt=qe;Ke=rt}tt.nextZ=null,Ht*=2}while(yt>1)}(ge)}(o,h,m,v);for(var A,M,U=o;o.prev!==o.next;)if(A=o.prev,M=o.next,v?OA(o,h,m,v):RA(o))n.push(A.i/a|0),n.push(o.i/a|0),n.push(M.i/a|0),Dh(o),o=M.next,U=M.next;else if((o=M)===U){x?x===1?Fh(o=FA(yu(o),n,a),n,a,h,m,v,2):x===2&&jA(o,n,a,h,m,v):Fh(yu(o),n,a,h,m,v,1);break}}}function RA(o){var n=o.prev,a=o,h=o.next;if(Pr(n,a,h)>=0)return!1;for(var m=n.x,v=a.x,x=h.x,A=n.y,M=a.y,U=h.y,J=m<v?m<x?m:x:v<x?v:x,ie=A<M?A<U?A:U:M<U?M:U,ue=m>v?m>x?m:x:v>x?v:x,de=A>M?A>U?A:U:M>U?M:U,ge=h.next;ge!==n;){if(ge.x>=J&&ge.x<=ue&&ge.y>=ie&&ge.y<=de&&uc(m,A,v,M,x,U,ge.x,ge.y)&&Pr(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function OA(o,n,a,h){var m=o.prev,v=o,x=o.next;if(Pr(m,v,x)>=0)return!1;for(var A=m.x,M=v.x,U=x.x,J=m.y,ie=v.y,ue=x.y,de=A<M?A<U?A:U:M<U?M:U,ge=J<ie?J<ue?J:ue:ie<ue?ie:ue,Fe=A>M?A>U?A:U:M>U?M:U,Le=J>ie?J>ue?J:ue:ie>ue?ie:ue,Ke=Og(de,ge,n,a,h),rt=Og(Fe,Le,n,a,h),qe=o.prevZ,tt=o.nextZ;qe&&qe.z>=Ke&&tt&&tt.z<=rt;){if(qe.x>=de&&qe.x<=Fe&&qe.y>=ge&&qe.y<=Le&&qe!==m&&qe!==x&&uc(A,J,M,ie,U,ue,qe.x,qe.y)&&Pr(qe.prev,qe,qe.next)>=0||(qe=qe.prevZ,tt.x>=de&&tt.x<=Fe&&tt.y>=ge&&tt.y<=Le&&tt!==m&&tt!==x&&uc(A,J,M,ie,U,ue,tt.x,tt.y)&&Pr(tt.prev,tt,tt.next)>=0))return!1;tt=tt.nextZ}for(;qe&&qe.z>=Ke;){if(qe.x>=de&&qe.x<=Fe&&qe.y>=ge&&qe.y<=Le&&qe!==m&&qe!==x&&uc(A,J,M,ie,U,ue,qe.x,qe.y)&&Pr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.prevZ}for(;tt&&tt.z<=rt;){if(tt.x>=de&&tt.x<=Fe&&tt.y>=ge&&tt.y<=Le&&tt!==m&&tt!==x&&uc(A,J,M,ie,U,ue,tt.x,tt.y)&&Pr(tt.prev,tt,tt.next)>=0)return!1;tt=tt.nextZ}return!0}function FA(o,n,a){var h=o;do{var m=h.prev,v=h.next.next;!Md(m,v)&&ix(m,h,h.next,v)&&jh(m,v)&&jh(v,m)&&(n.push(m.i/a|0),n.push(h.i/a|0),n.push(v.i/a|0),Dh(h),Dh(h.next),h=o=v),h=h.next}while(h!==o);return yu(h)}function jA(o,n,a,h,m,v){var x=o;do{for(var A=x.next.next;A!==x.prev;){if(x.i!==A.i&&$A(x,A)){var M=ox(x,A);return x=yu(x,x.next),M=yu(M,M.next),Fh(x,n,a,h,m,v,0),void Fh(M,n,a,h,m,v,0)}A=A.next}x=x.next}while(x!==o)}function DA(o,n){return o.x-n.x}function BA(o,n){var a=function(m,v){var x,A=v,M=m.x,U=m.y,J=-1/0;do{if(U<=A.y&&U>=A.next.y&&A.next.y!==A.y){var ie=A.x+(U-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(ie<=M&&ie>J&&(J=ie,x=A.x<A.next.x?A:A.next,ie===M))return x}A=A.next}while(A!==v);if(!x)return null;var ue,de=x,ge=x.x,Fe=x.y,Le=1/0;A=x;do M>=A.x&&A.x>=ge&&M!==A.x&&uc(U<Fe?M:J,U,ge,Fe,U<Fe?J:M,U,A.x,A.y)&&(ue=Math.abs(U-A.y)/(M-A.x),jh(A,m)&&(ue<Le||ue===Le&&(A.x>x.x||A.x===x.x&&NA(x,A)))&&(x=A,Le=ue)),A=A.next;while(A!==de);return x}(o,n);if(!a)return n;var h=ox(a,o);return yu(h,h.next),yu(a,a.next)}function NA(o,n){return Pr(o.prev,o,n.prev)<0&&Pr(n.next,o,o.next)<0}function Og(o,n,a,h,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function UA(o){var n=o,a=o;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==o);return a}function uc(o,n,a,h,m,v,x,A){return(m-x)*(n-A)>=(o-x)*(v-A)&&(o-x)*(h-A)>=(a-x)*(n-A)&&(a-x)*(v-A)>=(m-x)*(h-A)}function $A(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(a,h){var m=a;do{if(m.i!==a.i&&m.next.i!==a.i&&m.i!==h.i&&m.next.i!==h.i&&ix(m,m.next,a,h))return!0;m=m.next}while(m!==a);return!1}(o,n)&&(jh(o,n)&&jh(n,o)&&function(a,h){var m=a,v=!1,x=(a.x+h.x)/2,A=(a.y+h.y)/2;do m.y>A!=m.next.y>A&&m.next.y!==m.y&&x<(m.next.x-m.x)*(A-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==a);return v}(o,n)&&(Pr(o.prev,o,n.prev)||Pr(o,n.prev,n))||Md(o,n)&&Pr(o.prev,o,o.next)>0&&Pr(n.prev,n,n.next)>0)}function Pr(o,n,a){return(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y)}function Md(o,n){return o.x===n.x&&o.y===n.y}function ix(o,n,a,h){var m=Ld(Pr(o,n,a)),v=Ld(Pr(o,n,h)),x=Ld(Pr(a,h,o)),A=Ld(Pr(a,h,n));return m!==v&&x!==A||!(m!==0||!zd(o,a,n))||!(v!==0||!zd(o,h,n))||!(x!==0||!zd(a,o,h))||!(A!==0||!zd(a,n,h))}function zd(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}function Ld(o){return o>0?1:o<0?-1:0}function jh(o,n){return Pr(o.prev,o,o.next)<0?Pr(o,n,o.next)>=0&&Pr(o,o.prev,n)>=0:Pr(o,n,o.prev)<0||Pr(o,o.next,n)<0}function ox(o,n){var a=new Fg(o.i,o.x,o.y),h=new Fg(n.i,n.x,n.y),m=o.next,v=n.prev;return o.next=n,n.prev=o,a.next=m,m.prev=a,h.next=a,a.prev=h,v.next=h,h.prev=v,h}function ax(o,n,a,h){var m=new Fg(o,n,a);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Dh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Fg(o,n,a){this.i=o,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jg(o,n,a,h){for(var m=0,v=n,x=a-h;v<a;v+=h)m+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return m}function VA(o,n,a,h,m){sx(o,n,a||0,h||o.length-1,m||GA)}function sx(o,n,a,h,m){for(;h>a;){if(h-a>600){var v=h-a+1,x=n-a+1,A=Math.log(v),M=.5*Math.exp(2*A/3),U=.5*Math.sqrt(A*M*(v-M)/v)*(x-v/2<0?-1:1);sx(o,n,Math.max(a,Math.floor(n-x*M/v+U)),Math.min(h,Math.floor(n+(v-x)*M/v+U)),m)}var J=o[n],ie=a,ue=h;for(Bh(o,a,n),m(o[h],J)>0&&Bh(o,a,h);ie<ue;){for(Bh(o,ie,ue),ie++,ue--;m(o[ie],J)<0;)ie++;for(;m(o[ue],J)>0;)ue--}m(o[a],J)===0?Bh(o,a,ue):Bh(o,++ue,h),ue<=n&&(a=ue+1),n<=ue&&(h=ue-1)}}function Bh(o,n,a){var h=o[n];o[n]=o[a],o[a]=h}function GA(o,n){return o<n?-1:o>n?1:0}function Dg(o,n){const a=o.length;if(a<=1)return[o];const h=[];let m,v;for(let x=0;x<a;x++){const A=b(o[x]);A!==0&&(o[x].area=Math.abs(A),v===void 0&&(v=A<0),v===A<0?(m&&h.push(m),m=[o[x]]):m.push(o[x]))}if(m&&h.push(m),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(VA(h[x],n,1,h[x].length-1,ZA),h[x]=h[x].slice(0,n));return h}function ZA(o,n){return n.area-o.area}function Bg(o,n,a){const h=a.patternDependencies;let m=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(m=!0);const A=x.constantOr(null);A&&(m=!0,h[A.to]=!0,h[A.from]=!0)}return m}function Ng(o,n,a,h,m){const v=m.patternDependencies;for(const x of n){const A=x.paint.get(`${o}-pattern`).value;if(A.kind!=="constant"){let M=A.evaluate({zoom:h-1},a,{},m.availableImages),U=A.evaluate({zoom:h},a,{},m.availableImages),J=A.evaluate({zoom:h+1},a,{},m.availableImages);M=M&&M.name?M.name:M,U=U&&U.name?U.name:U,J=J&&J.name?J.name:J,v[M]=!0,v[U]=!0,v[J]=!0,a.patterns[x.id]={min:M,mid:U,max:J}}}return a}Pd.exports=kd,Pd.exports.default=kd,kd.deviation=function(o,n,a,h){var m=n&&n.length,v=Math.abs(jg(o,0,m?n[0]*a:o.length,a));if(m)for(var x=0,A=n.length;x<A;x++)v-=Math.abs(jg(o,n[x]*a,x<A-1?n[x+1]*a:o.length,a));var M=0;for(x=0;x<h.length;x+=3){var U=h[x]*a,J=h[x+1]*a,ie=h[x+2]*a;M+=Math.abs((o[U]-o[ie])*(o[J+1]-o[U+1])-(o[U]-o[J])*(o[ie+1]-o[U+1]))}return v===0&&M===0?0:Math.abs((M-v)/v)},kd.flatten=function(o){for(var n=o[0][0].length,a={vertices:[],holes:[],dimensions:n},h=0,m=0;m<o.length;m++){for(var v=0;v<o[m].length;v++)for(var x=0;x<n;x++)a.vertices.push(o[m][v][x]);m>0&&a.holes.push(h+=o[m-1].length)}return a};class Ug{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kn,this.indexArray=new Ii,this.indexArray2=new ia,this.programConfigurations=new pu(n.layers,n.zoom),this.segments=new Mn,this.segments2=new Mn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=Bg("fill",this.layers,a);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:A,id:M,index:U,sourceLayerIndex:J}of n){const ie=this.layers[0]._featureFilter.needGeometry,ue=gu(A,ie);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),ue,h))continue;const de=v?m.evaluate(ue,{},h,a.availableImages):void 0,ge={id:M,properties:A.properties,type:A.type,sourceLayerIndex:J,index:U,geometry:ie?ue.geometry:mu(A),patterns:{},sortKey:de};x.push(ge)}v&&x.sort((A,M)=>A.sortKey-M.sortKey);for(const A of x){const{geometry:M,index:U,sourceLayerIndex:J}=A;if(this.hasPattern){const ie=Ng("fill",this.layers,A,this.zoom,a);this.patternFeatures.push(ie)}else this.addFeature(A,M,U,h,{});a.featureIndex.insert(n[U].feature,M,U,J,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,LA),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,h,m,v){for(const x of Dg(a,500)){let A=0;for(const de of x)A+=de.length;const M=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),U=M.vertexLength,J=[],ie=[];for(const de of x){if(de.length===0)continue;de!==x[0]&&ie.push(J.length/2);const ge=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Fe=ge.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Fe+de.length-1,Fe),J.push(de[0].x),J.push(de[0].y);for(let Le=1;Le<de.length;Le++)this.layoutVertexArray.emplaceBack(de[Le].x,de[Le].y),this.indexArray2.emplaceBack(Fe+Le-1,Fe+Le),J.push(de[Le].x),J.push(de[Le].y);ge.vertexLength+=de.length,ge.primitiveLength+=de.length}const ue=Pd.exports(J,ie);for(let de=0;de<ue.length;de+=3)this.indexArray.emplaceBack(U+ue[de],U+ue[de+1],U+ue[de+2]);M.vertexLength+=A,M.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}Tt("FillBucket",Ug,{omit:["layers","patternFeatures"]});const WA=new ii({"fill-sort-key":new fn(P.layout_fill["fill-sort-key"])});var HA={paint:new ii({"fill-antialias":new Kt(P.paint_fill["fill-antialias"]),"fill-opacity":new fn(P.paint_fill["fill-opacity"]),"fill-color":new fn(P.paint_fill["fill-color"]),"fill-outline-color":new fn(P.paint_fill["fill-outline-color"]),"fill-translate":new Kt(P.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(P.paint_fill["fill-translate-anchor"]),"fill-pattern":new ul(P.paint_fill["fill-pattern"])}),layout:WA};const XA=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qA=Fr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:KA}=XA;var fl={},YA=re,lx=cc;function cc(o,n,a,h,m){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=m,o.readFields(JA,this,n)}function JA(o,n,a){o==1?n.id=a.readVarint():o==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=m._keys[h.readVarint()],A=m._values[h.readVarint()];m.properties[x]=A}}(a,n):o==3?n.type=a.readVarint():o==4&&(n._geometry=a.pos)}function QA(o){for(var n,a,h=0,m=0,v=o.length,x=v-1;m<v;x=m++)h+=((a=o[x]).x-(n=o[m]).x)*(n.y+a.y);return h}cc.types=["Unknown","Point","LineString","Polygon"],cc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,a=o.readVarint()+o.pos,h=1,m=0,v=0,x=0,A=[];o.pos<a;){if(m<=0){var M=o.readVarint();h=7&M,m=M>>3}if(m--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&A.push(n),n=[]),n.push(new YA(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&A.push(n),A},cc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,a=1,h=0,m=0,v=0,x=1/0,A=-1/0,M=1/0,U=-1/0;o.pos<n;){if(h<=0){var J=o.readVarint();a=7&J,h=J>>3}if(h--,a===1||a===2)(m+=o.readSVarint())<x&&(x=m),m>A&&(A=m),(v+=o.readSVarint())<M&&(M=v),v>U&&(U=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,M,A,U]},cc.prototype.toGeoJSON=function(o,n,a){var h,m,v=this.extent*Math.pow(2,a),x=this.extent*o,A=this.extent*n,M=this.loadGeometry(),U=cc.types[this.type];function J(de){for(var ge=0;ge<de.length;ge++){var Fe=de[ge];de[ge]=[360*(Fe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Fe.y+A)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var ie=[];for(h=0;h<M.length;h++)ie[h]=M[h][0];J(M=ie);break;case 2:for(h=0;h<M.length;h++)J(M[h]);break;case 3:for(M=function(de){var ge=de.length;if(ge<=1)return[de];for(var Fe,Le,Ke=[],rt=0;rt<ge;rt++){var qe=QA(de[rt]);qe!==0&&(Le===void 0&&(Le=qe<0),Le===qe<0?(Fe&&Ke.push(Fe),Fe=[de[rt]]):Fe.push(de[rt]))}return Fe&&Ke.push(Fe),Ke}(M),h=0;h<M.length;h++)for(m=0;m<M[h].length;m++)J(M[h][m])}M.length===1?M=M[0]:U="Multi"+U;var ue={type:"Feature",geometry:{type:U,coordinates:M},properties:this.properties};return"id"in this&&(ue.id=this.id),ue};var eI=lx,ux=cx;function cx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(tI,this,n),this.length=this._features.length}function tI(o,n,a){o===15?n.version=a.readVarint():o===1?n.name=a.readString():o===5?n.extent=a.readVarint():o===2?n._features.push(a.pos):o===3?n._keys.push(a.readString()):o===4&&n._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(a))}cx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new eI(this._pbf,n,this.extent,this._keys,this._values)};var nI=ux;function rI(o,n,a){if(o===3){var h=new nI(a,a.readVarint()+a.pos);h.length&&(n[h.name]=h)}}fl.VectorTile=function(o,n){this.layers=o.readFields(rI,{},n)},fl.VectorTileFeature=lx,fl.VectorTileLayer=ux;const iI=fl.VectorTileFeature.types,$g=Math.pow(2,13);function Nh(o,n,a,h,m,v,x,A){o.emplaceBack(n,a,2*Math.floor(h*$g)+x,m*$g*2,v*$g*2,Math.round(A))}class Vg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new On,this.centroidVertexArray=new on,this.indexArray=new Ii,this.programConfigurations=new pu(n.layers,n.zoom),this.segments=new Mn,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.features=[],this.hasPattern=Bg("fill-extrusion",this.layers,a);for(const{feature:m,id:v,index:x,sourceLayerIndex:A}of n){const M=this.layers[0]._featureFilter.needGeometry,U=gu(m,M);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),U,h))continue;const J={id:v,sourceLayerIndex:A,index:x,geometry:M?U.geometry:mu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Ng("fill-extrusion",this.layers,J,this.zoom,a)):this.addFeature(J,J.geometry,x,h,{}),a.featureIndex.insert(m,J.geometry,x,A,this.index,!0)}}addFeatures(n,a,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,a,h)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,KA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,qA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,h,m,v){const x={x:0,y:0,vertexCount:0};for(const A of Dg(a,500)){let M=0;for(const ge of A)M+=ge.length;let U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ge of A){if(ge.length===0||aI(ge))continue;let Fe=0;for(let Le=0;Le<ge.length;Le++){const Ke=ge[Le];if(Le>=1){const rt=ge[Le-1];if(!oI(Ke,rt)){U.vertexLength+4>Mn.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const qe=Ke.sub(rt)._perp()._unit(),tt=rt.dist(Ke);Fe+tt>32768&&(Fe=0),Nh(this.layoutVertexArray,Ke.x,Ke.y,qe.x,qe.y,0,0,Fe),Nh(this.layoutVertexArray,Ke.x,Ke.y,qe.x,qe.y,0,1,Fe),x.x+=2*Ke.x,x.y+=2*Ke.y,x.vertexCount+=2,Fe+=tt,Nh(this.layoutVertexArray,rt.x,rt.y,qe.x,qe.y,0,0,Fe),Nh(this.layoutVertexArray,rt.x,rt.y,qe.x,qe.y,0,1,Fe),x.x+=2*rt.x,x.y+=2*rt.y,x.vertexCount+=2;const yt=U.vertexLength;this.indexArray.emplaceBack(yt,yt+2,yt+1),this.indexArray.emplaceBack(yt+1,yt+2,yt+3),U.vertexLength+=4,U.primitiveLength+=2}}}}if(U.vertexLength+M>Mn.MAX_VERTEX_ARRAY_LENGTH&&(U=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),iI[n.type]!=="Polygon")continue;const J=[],ie=[],ue=U.vertexLength;for(const ge of A)if(ge.length!==0){ge!==A[0]&&ie.push(J.length/2);for(let Fe=0;Fe<ge.length;Fe++){const Le=ge[Fe];Nh(this.layoutVertexArray,Le.x,Le.y,0,0,1,1,0),x.x+=Le.x,x.y+=Le.y,x.vertexCount+=1,J.push(Le.x),J.push(Le.y)}}const de=Pd.exports(J,ie);for(let ge=0;ge<de.length;ge+=3)this.indexArray.emplaceBack(ue+de[ge],ue+de[ge+2],ue+de[ge+1]);U.primitiveLength+=de.length/3,U.vertexLength+=M}for(let A=0;A<x.vertexCount;A++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}function oI(o,n){return o.x===n.x&&(o.x<0||o.x>Zr)||o.y===n.y&&(o.y<0||o.y>Zr)}function aI(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Zr)||o.every(n=>n.y<0)||o.every(n=>n.y>Zr)}Tt("FillExtrusionBucket",Vg,{omit:["layers","features"]});var sI={paint:new ii({"fill-extrusion-opacity":new Kt(P["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fn(P["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(P["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(P["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ul(P["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fn(P["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fn(P["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(P["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Uh(o,n){return o.x*n.x+o.y*n.y}function hx(o,n){if(o.length===1){let a=0;const h=n[a++];let m;for(;!m||h.equals(m);)if(m=n[a++],!m)return 1/0;for(;a<n.length;a++){const v=n[a],x=o[0],A=m.sub(h),M=v.sub(h),U=x.sub(h),J=Uh(A,A),ie=Uh(A,M),ue=Uh(M,M),de=Uh(U,A),ge=Uh(U,M),Fe=J*ue-ie*ie,Le=(ue*de-ie*ge)/Fe,Ke=(J*ge-ie*de)/Fe,rt=h.z*(1-Le-Ke)+m.z*Le+v.z*Ke;if(isFinite(rt))return rt}return 1/0}{let a=1/0;for(const h of n)a=Math.min(a,h.z);return a}}const lI=Fr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:uI}=lI,cI=Fr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:hI}=cI,fI=fl.VectorTileFeature.types,dI=Math.cos(Math.PI/180*37.5),fx=Math.pow(2,14)/.5;class Gg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Dn,this.layoutVertexArray2=new Qn,this.indexArray=new Ii,this.programConfigurations=new pu(n.layers,n.zoom),this.segments=new Mn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,h){this.hasPattern=Bg("line",this.layers,a);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:A,id:M,index:U,sourceLayerIndex:J}of n){const ie=this.layers[0]._featureFilter.needGeometry,ue=gu(A,ie);if(!this.layers[0]._featureFilter.filter(new hr(this.zoom),ue,h))continue;const de=v?m.evaluate(ue,{},h):void 0,ge={id:M,properties:A.properties,type:A.type,sourceLayerIndex:J,index:U,geometry:ie?ue.geometry:mu(A),patterns:{},sortKey:de};x.push(ge)}v&&x.sort((A,M)=>A.sortKey-M.sortKey);for(const A of x){const{geometry:M,index:U,sourceLayerIndex:J}=A;if(this.hasPattern){const ie=Ng("line",this.layers,A,this.zoom,a);this.patternFeatures.push(ie)}else this.addFeature(A,M,U,h,{});a.featureIndex.insert(n[U].feature,M,U,J,this.index)}}update(n,a,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,h)}addFeatures(n,a,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,a,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,hI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,h,m,v){const x=this.layers[0].layout,A=x.get("line-join").evaluate(n,{}),M=x.get("line-cap"),U=x.get("line-miter-limit"),J=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ie of a)this.addLine(ie,n,A,M,U,J);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}addLine(n,a,h,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ke=0;Ke<n.length-1;Ke++)this.totalDistance+=n[Ke].dist(n[Ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=fI[a.type]==="Polygon";let M=n.length;for(;M>=2&&n[M-1].equals(n[M-2]);)M--;let U=0;for(;U<M-1&&n[U].equals(n[U+1]);)U++;if(M<(A?3:2))return;h==="bevel"&&(v=1.05);const J=this.overscaling<=16?122880/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let ue,de,ge,Fe,Le;this.e1=this.e2=-1,A&&(ue=n[M-2],Le=n[U].sub(ue)._unit()._perp());for(let Ke=U;Ke<M;Ke++){if(ge=Ke===M-1?A?n[U+1]:void 0:n[Ke+1],ge&&n[Ke].equals(ge))continue;Le&&(Fe=Le),ue&&(de=ue),ue=n[Ke],Le=ge?ge.sub(ue)._unit()._perp():Fe,Fe=Fe||Le;let rt=Fe.add(Le);rt.x===0&&rt.y===0||rt._unit();const qe=Fe.x*Le.x+Fe.y*Le.y,tt=rt.x*Le.x+rt.y*Le.y,yt=tt!==0?1/tt:1/0,gt=2*Math.sqrt(2-2*tt),$t=tt<dI&&de&&ge,Ht=Fe.x*Le.y-Fe.y*Le.x>0;if($t&&Ke>U){const Pt=ue.dist(de);if(Pt>2*J){const jt=ue.sub(ue.sub(de)._mult(J/Pt)._round());this.updateDistance(de,jt),this.addCurrentVertex(jt,Fe,0,0,ie),de=jt}}const Ft=de&&ge;let zt=Ft?h:A?"butt":m;if(Ft&&zt==="round"&&(yt<x?zt="miter":yt<=2&&(zt="fakeround")),zt==="miter"&&yt>v&&(zt="bevel"),zt==="bevel"&&(yt>2&&(zt="flipbevel"),yt<v&&(zt="miter")),de&&this.updateDistance(de,ue),zt==="miter")rt._mult(yt),this.addCurrentVertex(ue,rt,0,0,ie);else if(zt==="flipbevel"){if(yt>100)rt=Le.mult(-1);else{const Pt=yt*Fe.add(Le).mag()/Fe.sub(Le).mag();rt._perp()._mult(Pt*(Ht?-1:1))}this.addCurrentVertex(ue,rt,0,0,ie),this.addCurrentVertex(ue,rt.mult(-1),0,0,ie)}else if(zt==="bevel"||zt==="fakeround"){const Pt=-Math.sqrt(yt*yt-1),jt=Ht?Pt:0,Ot=Ht?0:Pt;if(de&&this.addCurrentVertex(ue,Fe,jt,Ot,ie),zt==="fakeround"){const Et=Math.round(180*gt/Math.PI/20);for(let an=1;an<Et;an++){let Jt=an/Et;if(Jt!==.5){const ur=Jt-.5;Jt+=Jt*ur*(Jt-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*ur*ur+(.848013+qe*(.215638*qe-1.06021)))}const In=Le.sub(Fe)._mult(Jt)._add(Fe)._unit()._mult(Ht?-1:1);this.addHalfVertex(ue,In.x,In.y,!1,Ht,0,ie)}}ge&&this.addCurrentVertex(ue,Le,-jt,-Ot,ie)}else if(zt==="butt")this.addCurrentVertex(ue,rt,0,0,ie);else if(zt==="square"){const Pt=de?1:-1;this.addCurrentVertex(ue,rt,Pt,Pt,ie)}else zt==="round"&&(de&&(this.addCurrentVertex(ue,Fe,0,0,ie),this.addCurrentVertex(ue,Fe,1,1,ie,!0)),ge&&(this.addCurrentVertex(ue,Le,-1,-1,ie,!0),this.addCurrentVertex(ue,Le,0,0,ie)));if($t&&Ke<M-1){const Pt=ue.dist(ge);if(Pt>2*J){const jt=ue.add(ge.sub(ue)._mult(J/Pt)._round());this.updateDistance(ue,jt),this.addCurrentVertex(jt,Le,0,0,ie),ue=jt}}}}addCurrentVertex(n,a,h,m,v,x=!1){const A=a.y*m-a.x,M=-a.y-a.x*m;this.addHalfVertex(n,a.x+a.y*h,a.y-a.x*h,x,!1,h,v),this.addHalfVertex(n,A,M,x,!0,-m,v),this.distance>fx/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,a,h,m,v,x))}addHalfVertex({x:n,y:a},h,m,v,x,A,M){const U=.5*(this.lineClips?this.scaledDistance*(fx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(A===0?0:A<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const J=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,J),M.primitiveLength++),x?this.e2=J:this.e1=J}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}Tt("LineBucket",Gg,{omit:["layers","patternFeatures"]});const pI=new ii({"line-cap":new Kt(P.layout_line["line-cap"]),"line-join":new fn(P.layout_line["line-join"]),"line-miter-limit":new Kt(P.layout_line["line-miter-limit"]),"line-round-limit":new Kt(P.layout_line["line-round-limit"]),"line-sort-key":new fn(P.layout_line["line-sort-key"])});var dx={paint:new ii({"line-opacity":new fn(P.paint_line["line-opacity"]),"line-color":new fn(P.paint_line["line-color"]),"line-translate":new Kt(P.paint_line["line-translate"]),"line-translate-anchor":new Kt(P.paint_line["line-translate-anchor"]),"line-width":new fn(P.paint_line["line-width"]),"line-gap-width":new fn(P.paint_line["line-gap-width"]),"line-offset":new fn(P.paint_line["line-offset"]),"line-blur":new fn(P.paint_line["line-blur"]),"line-dasharray":new Ih(P.paint_line["line-dasharray"]),"line-pattern":new ul(P.paint_line["line-pattern"]),"line-gradient":new Na(P.paint_line["line-gradient"])}),layout:pI};const px=new class extends fn{possiblyEvaluate(o,n){return n=new hr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,a,h){return n=q({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,a,h)}}(dx.paint.properties["line-width"].specification);function mx(o,n){return n>0?n+2*o:o}px.useIntegerZoom=!0;const mI=Fr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gI=Fr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Fr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const yI=Fr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Fr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const gx=Fr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vI=Fr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function _I(o,n,a){return o.sections.forEach(h=>{h.text=function(m,v,x){const A=v.layout.get("text-transform").evaluate(x,{});return A==="uppercase"?m=m.toLocaleUpperCase():A==="lowercase"&&(m=m.toLocaleLowerCase()),oo.applyArabicShaping&&(m=oo.applyArabicShaping(m)),m}(h.text,n,a)}),o}Fr([{name:"triangle",components:3,type:"Uint16"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Fr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Fr([{type:"Float32",name:"offsetX"}]),Fr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const $h={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var oi=24,Zg=nr,yx=function(o,n,a,h,m){var v,x,A=8*m-h-1,M=(1<<A)-1,U=M>>1,J=-7,ie=a?m-1:0,ue=a?-1:1,de=o[n+ie];for(ie+=ue,v=de&(1<<-J)-1,de>>=-J,J+=A;J>0;v=256*v+o[n+ie],ie+=ue,J-=8);for(x=v&(1<<-J)-1,v>>=-J,J+=h;J>0;x=256*x+o[n+ie],ie+=ue,J-=8);if(v===0)v=1-U;else{if(v===M)return x?NaN:1/0*(de?-1:1);x+=Math.pow(2,h),v-=U}return(de?-1:1)*x*Math.pow(2,v-h)},vx=function(o,n,a,h,m,v){var x,A,M,U=8*v-m-1,J=(1<<U)-1,ie=J>>1,ue=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=h?0:v-1,ge=h?1:-1,Fe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(A=isNaN(n)?1:0,x=J):(x=Math.floor(Math.log(n)/Math.LN2),n*(M=Math.pow(2,-x))<1&&(x--,M*=2),(n+=x+ie>=1?ue/M:ue*Math.pow(2,1-ie))*M>=2&&(x++,M/=2),x+ie>=J?(A=0,x=J):x+ie>=1?(A=(n*M-1)*Math.pow(2,m),x+=ie):(A=n*Math.pow(2,ie-1)*Math.pow(2,m),x=0));m>=8;o[a+de]=255&A,de+=ge,A/=256,m-=8);for(x=x<<m|A,U+=m;U>0;o[a+de]=255&x,de+=ge,x/=256,U-=8);o[a+de-ge]|=128*Fe};function nr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}nr.Varint=0,nr.Fixed64=1,nr.Bytes=2,nr.Fixed32=5;var dl,Wg=4294967296,_x=1/Wg,xx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ss(o){return o.type===nr.Bytes?o.readVarint()+o.pos:o.pos+1}function hc(o,n,a){return a?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function wx(o,n,a){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(h);for(var m=a.pos-1;m>=o;m--)a.buf[m+h]=a.buf[m]}function xI(o,n){for(var a=0;a<o.length;a++)n.writeVarint(o[a])}function wI(o,n){for(var a=0;a<o.length;a++)n.writeSVarint(o[a])}function bI(o,n){for(var a=0;a<o.length;a++)n.writeFloat(o[a])}function EI(o,n){for(var a=0;a<o.length;a++)n.writeDouble(o[a])}function SI(o,n){for(var a=0;a<o.length;a++)n.writeBoolean(o[a])}function TI(o,n){for(var a=0;a<o.length;a++)n.writeFixed32(o[a])}function CI(o,n){for(var a=0;a<o.length;a++)n.writeSFixed32(o[a])}function AI(o,n){for(var a=0;a<o.length;a++)n.writeFixed64(o[a])}function II(o,n){for(var a=0;a<o.length;a++)n.writeSFixed64(o[a])}function Rd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function fc(o,n,a){o[a]=n,o[a+1]=n>>>8,o[a+2]=n>>>16,o[a+3]=n>>>24}function bx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function PI(o,n,a){o===1&&a.readMessage(kI,n)}function kI(o,n,a){if(o===3){const{id:h,bitmap:m,width:v,height:x,left:A,top:M,advance:U}=a.readMessage(MI,{});n.push({id:h,bitmap:new Oh({width:v+6,height:x+6},m),metrics:{width:v,height:x,left:A,top:M,advance:U}})}}function MI(o,n,a){o===1?n.id=a.readVarint():o===2?n.bitmap=a.readBytes():o===3?n.width=a.readVarint():o===4?n.height=a.readVarint():o===5?n.left=a.readSVarint():o===6?n.top=a.readSVarint():o===7&&(n.advance=a.readVarint())}function Ex(o){let n=0,a=0;for(const x of o)n+=x.w*x.h,a=Math.max(a,x.w);o.sort((x,A)=>A.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let m=0,v=0;for(const x of o)for(let A=h.length-1;A>=0;A--){const M=h[A];if(!(x.w>M.w||x.h>M.h)){if(x.x=M.x,x.y=M.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===M.w&&x.h===M.h){const U=h.pop();A<h.length&&(h[A]=U)}else x.h===M.h?(M.x+=x.w,M.w-=x.w):x.w===M.w?(M.y+=x.h,M.h-=x.h):(h.push({x:M.x+x.w,y:M.y,w:M.w-x.w,h:x.h}),M.y+=x.h,M.h-=x.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}nr.prototype={destroy:function(){this.buf=null},readFields:function(o,n,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,o(m,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Rd(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=bx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Rd(this.buf,this.pos)+Rd(this.buf,this.pos+4)*Wg;return this.pos+=8,o},readSFixed64:function(){var o=Rd(this.buf,this.pos)+bx(this.buf,this.pos+4)*Wg;return this.pos+=8,o},readFloat:function(){var o=yx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=yx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,a,h=this.buf;return n=127&(a=h[this.pos++]),a<128?n:(n|=(127&(a=h[this.pos++]))<<7,a<128?n:(n|=(127&(a=h[this.pos++]))<<14,a<128?n:(n|=(127&(a=h[this.pos++]))<<21,a<128?n:function(m,v,x){var A,M,U=x.buf;if(A=(112&(M=U[x.pos++]))>>4,M<128||(A|=(127&(M=U[x.pos++]))<<3,M<128)||(A|=(127&(M=U[x.pos++]))<<10,M<128)||(A|=(127&(M=U[x.pos++]))<<17,M<128)||(A|=(127&(M=U[x.pos++]))<<24,M<128)||(A|=(1&(M=U[x.pos++]))<<31,M<128))return hc(m,A,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&xx?function(a,h,m){return xx.decode(a.subarray(h,m))}(this.buf,n,o):function(a,h,m){for(var v="",x=h;x<m;){var A,M,U,J=a[x],ie=null,ue=J>239?4:J>223?3:J>191?2:1;if(x+ue>m)break;ue===1?J<128&&(ie=J):ue===2?(192&(A=a[x+1]))==128&&(ie=(31&J)<<6|63&A)<=127&&(ie=null):ue===3?(M=a[x+2],(192&(A=a[x+1]))==128&&(192&M)==128&&((ie=(15&J)<<12|(63&A)<<6|63&M)<=2047||ie>=55296&&ie<=57343)&&(ie=null)):ue===4&&(M=a[x+2],U=a[x+3],(192&(A=a[x+1]))==128&&(192&M)==128&&(192&U)==128&&((ie=(15&J)<<18|(63&A)<<12|(63&M)<<6|63&U)<=65535||ie>=1114112)&&(ie=null)),ie===null?(ie=65533,ue=1):ie>65535&&(ie-=65536,v+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),v+=String.fromCharCode(ie),x+=ue}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==nr.Bytes)return o.push(this.readVarint(n));var a=Ss(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==nr.Bytes)return o.push(this.readSVarint());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==nr.Bytes)return o.push(this.readBoolean());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==nr.Bytes)return o.push(this.readFloat());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==nr.Bytes)return o.push(this.readDouble());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==nr.Bytes)return o.push(this.readFixed32());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==nr.Bytes)return o.push(this.readSFixed32());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==nr.Bytes)return o.push(this.readFixed64());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==nr.Bytes)return o.push(this.readSFixed64());var n=Ss(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===nr.Varint)for(;this.buf[this.pos++]>127;);else if(n===nr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===nr.Fixed32)this.pos+=4;else{if(n!==nr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),fc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),fc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),fc(this.buf,-1&o,this.pos),fc(this.buf,Math.floor(o*_x),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),fc(this.buf,-1&o,this.pos),fc(this.buf,Math.floor(o*_x),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,a){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,A){A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,v>>>=7,A.buf[A.pos++]=127&v|128,A.buf[A.pos]=127&(v>>>=7)}(h,0,a),function(v,x){var A=(7&v)<<4;x.buf[x.pos++]|=A|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,m,v){for(var x,A,M=0;M<m.length;M++){if((x=m.charCodeAt(M))>55295&&x<57344){if(!A){x>56319||M+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):A=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,A=x;continue}x=A-55296<<10|x-56320|65536,A=null}else A&&(h[v++]=239,h[v++]=191,h[v++]=189,A=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var a=this.pos-n;a>=128&&wx(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),vx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),vx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,n){this.pos++;var a=this.pos;o(n,this);var h=this.pos-a;h>=128&&wx(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,a){this.writeTag(o,nr.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,xI,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,wI,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,SI,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,bI,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,EI,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,TI,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,CI,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,AI,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,II,n)},writeBytesField:function(o,n){this.writeTag(o,nr.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,nr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,nr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,nr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,nr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,nr.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,nr.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,nr.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,nr.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,nr.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};class Hg{constructor(n,{pixelRatio:a,version:h,stretchX:m,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=m,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Sx{constructor(n,a){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(a,m,v);const{w:x,h:A}=Ex(v),M=new _o({width:x||1,height:A||1});for(const U in n){const J=n[U],ie=h[U].paddedRect;_o.copy(J.data,M,{x:0,y:0},{x:ie.x+1,y:ie.y+1},J.data)}for(const U in a){const J=a[U],ie=m[U].paddedRect,ue=ie.x+1,de=ie.y+1,ge=J.data.width,Fe=J.data.height;_o.copy(J.data,M,{x:0,y:0},{x:ue,y:de},J.data),_o.copy(J.data,M,{x:0,y:Fe-1},{x:ue,y:de-1},{width:ge,height:1}),_o.copy(J.data,M,{x:0,y:0},{x:ue,y:de+Fe},{width:ge,height:1}),_o.copy(J.data,M,{x:ge-1,y:0},{x:ue-1,y:de},{width:1,height:Fe}),_o.copy(J.data,M,{x:0,y:0},{x:ue+ge,y:de},{width:1,height:Fe})}this.image=M,this.iconPositions=h,this.patternPositions=m}addImages(n,a,h){for(const m in n){const v=n[m],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};h.push(x),a[m]=new Hg(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),a)}patchUpdatedImage(n,a,h){if(!n||!a||n.version===a.version)return;n.version=a.version;const[m,v]=n.tl;h.update(a.data,void 0,{x:m,y:v})}}Tt("ImagePosition",Hg),Tt("ImageAtlas",Sx),l.WritingMode=void 0,(dl=l.WritingMode||(l.WritingMode={}))[dl.none=0]="none",dl[dl.horizontal=1]="horizontal",dl[dl.vertical=2]="vertical",dl[dl.horizontalOnly=3]="horizontalOnly";const Od=-17;class Vh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const h=new Vh;return h.scale=n||1,h.fontStack=a,h}static forImage(n){const a=new Vh;return a.imageName=n,a}}class dc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const h=new dc;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,a)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;a+=m&&md(m)&&!$h[n[h+1]]||v&&md(v)&&!$h[n[h-1]]||!$h[n[h]]?n[h]:$h[n[h]]}return a}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&jd[this.text.charCodeAt(h)];h++)n++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&jd[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const h=new dc;return h.text=this.text.substring(n,a),h.sectionIndex=this.sectionIndex.slice(n,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Vh.forText(n.scale,n.fontStack||a));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void V("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Vh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):V("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fd(o,n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe){const Le=dc.fromFeature(o,m);let Ke;ie===l.WritingMode.vertical&&Le.verticalizePunctuation();const{processBidirectionalText:rt,processStyledBidirectionalText:qe}=oo;if(rt&&Le.sections.length===1){Ke=[];const gt=rt(Le.toString(),Xg(Le,U,v,n,h,de,ge));for(const $t of gt){const Ht=new dc;Ht.text=$t,Ht.sections=Le.sections;for(let Ft=0;Ft<$t.length;Ft++)Ht.sectionIndex.push(0);Ke.push(Ht)}}else if(qe){Ke=[];const gt=qe(Le.text,Le.sectionIndex,Xg(Le,U,v,n,h,de,ge));for(const $t of gt){const Ht=new dc;Ht.text=$t[0],Ht.sectionIndex=$t[1],Ht.sections=Le.sections,Ke.push(Ht)}}else Ke=function(gt,$t){const Ht=[],Ft=gt.text;let zt=0;for(const Pt of $t)Ht.push(gt.substring(zt,Pt)),zt=Pt;return zt<Ft.length&&Ht.push(gt.substring(zt,Ft.length)),Ht}(Le,Xg(Le,U,v,n,h,de,ge));const tt=[],yt={positionedLines:tt,text:Le.toString(),top:J[1],bottom:J[1],left:J[0],right:J[0],writingMode:ie,iconsInText:!1,verticalizable:!1};return function(gt,$t,Ht,Ft,zt,Pt,jt,Ot,Et,an,Jt,In){let ur=0,dr=Od,Wr=0,wo=0;const ci=Ot==="right"?1:Ot==="left"?0:.5;let jr=0;for(const Dr of zt){Dr.trim();const fi=Dr.getMaxScale(),xi=(fi-1)*oi,Mi={positionedGlyphs:[],lineOffset:0};gt.positionedLines[jr]=Mi;const Vi=Mi.positionedGlyphs;let Gi=0;if(!Dr.length()){dr+=Pt,++jr;continue}for(let Jr=0;Jr<Dr.length();Jr++){const zn=Dr.getSection(Jr),lo=Dr.getSectionIndex(Jr),di=Dr.getCharCode(Jr);let wi=0,Vo=null,aa=null,sa=null,Cs=oi;const Go=!(Et===l.WritingMode.horizontal||!Jt&&!bh(di)||Jt&&(jd[di]||(Yr=di,kt.Arabic(Yr)||kt["Arabic Supplement"](Yr)||kt["Arabic Extended-A"](Yr)||kt["Arabic Presentation Forms-A"](Yr)||kt["Arabic Presentation Forms-B"](Yr))));if(zn.imageName){const bo=Ft[zn.imageName];if(!bo)continue;sa=zn.imageName,gt.iconsInText=gt.iconsInText||!0,aa=bo.paddedRect;const Zi=bo.displaySize;zn.scale=zn.scale*oi/In,Vo={width:Zi[0],height:Zi[1],left:1,top:-3,advance:Go?Zi[1]:Zi[0]},wi=xi+(oi-Zi[1]*zn.scale),Cs=Vo.advance;const As=Go?Zi[0]*zn.scale-oi*fi:Zi[1]*zn.scale-oi*fi;As>0&&As>Gi&&(Gi=As)}else{const bo=Ht[zn.fontStack],Zi=bo&&bo[di];if(Zi&&Zi.rect)aa=Zi.rect,Vo=Zi.metrics;else{const As=$t[zn.fontStack],Wh=As&&As[di];if(!Wh)continue;Vo=Wh.metrics}wi=(fi-zn.scale)*oi}Go?(gt.verticalizable=!0,Vi.push({glyph:di,imageName:sa,x:ur,y:dr+wi,vertical:Go,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:lo,metrics:Vo,rect:aa}),ur+=Cs*zn.scale+an):(Vi.push({glyph:di,imageName:sa,x:ur,y:dr+wi,vertical:Go,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:lo,metrics:Vo,rect:aa}),ur+=Vo.advance*zn.scale+an)}Vi.length!==0&&(Wr=Math.max(ur-an,Wr),RI(Vi,0,Vi.length-1,ci,Gi)),ur=0;const _r=Pt*fi+Gi;Mi.lineOffset=Math.max(Gi,xi),dr+=_r,wo=Math.max(_r,wo),++jr}var Yr;const hi=dr-Od,{horizontalAlign:_i,verticalAlign:$i}=qg(jt);(function(Dr,fi,xi,Mi,Vi,Gi,_r,Jr,zn){const lo=(fi-xi)*Vi;let di=0;di=Gi!==_r?-Jr*Mi-Od:(-Mi*zn+.5)*_r;for(const wi of Dr)for(const Vo of wi.positionedGlyphs)Vo.x+=lo,Vo.y+=di})(gt.positionedLines,ci,_i,$i,Wr,wo,Pt,hi,zt.length),gt.top+=-$i*hi,gt.bottom=gt.top+hi,gt.left+=-_i*Wr,gt.right=gt.left+Wr}(yt,n,a,h,Ke,x,A,M,ie,U,ue,Fe),!function(gt){for(const $t of gt)if($t.positionedGlyphs.length!==0)return!1;return!0}(tt)&&yt}const jd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},zI={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Tx(o,n,a,h,m,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*oi/v+m:0}{const x=a[n.fontStack],A=x&&x[o];return A?A.metrics.advance*n.scale+m:0}}function Cx(o,n,a,h){const m=Math.pow(o-n,2);return h?o<n?m/2:2*m:m+Math.abs(a)*a}function LI(o,n,a){let h=0;return o===10&&(h-=1e4),a&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Ax(o,n,a,h,m,v){let x=null,A=Cx(n,a,m,v);for(const M of h){const U=Cx(n-M.x,a,m,v)+M.badness;U<=A&&(x=M,A=U)}return{index:o,x:n,priorBreak:x,badness:A}}function Ix(o){return o?Ix(o.priorBreak).concat(o.index):[]}function Xg(o,n,a,h,m,v,x){if(v!=="point")return[];if(!o)return[];const A=[],M=function(ue,de,ge,Fe,Le,Ke){let rt=0;for(let qe=0;qe<ue.length();qe++){const tt=ue.getSection(qe);rt+=Tx(ue.getCharCode(qe),tt,Fe,Le,de,Ke)}return rt/Math.max(1,Math.ceil(rt/ge))}(o,n,a,h,m,x),U=o.text.indexOf("​")>=0;let J=0;for(let ue=0;ue<o.length();ue++){const de=o.getSection(ue),ge=o.getCharCode(ue);if(jd[ge]||(J+=Tx(ge,de,h,m,n,x)),ue<o.length()-1){const Fe=!((ie=ge)<11904||!(kt["Bopomofo Extended"](ie)||kt.Bopomofo(ie)||kt["CJK Compatibility Forms"](ie)||kt["CJK Compatibility Ideographs"](ie)||kt["CJK Compatibility"](ie)||kt["CJK Radicals Supplement"](ie)||kt["CJK Strokes"](ie)||kt["CJK Symbols and Punctuation"](ie)||kt["CJK Unified Ideographs Extension A"](ie)||kt["CJK Unified Ideographs"](ie)||kt["Enclosed CJK Letters and Months"](ie)||kt["Halfwidth and Fullwidth Forms"](ie)||kt.Hiragana(ie)||kt["Ideographic Description Characters"](ie)||kt["Kangxi Radicals"](ie)||kt["Katakana Phonetic Extensions"](ie)||kt.Katakana(ie)||kt["Vertical Forms"](ie)||kt["Yi Radicals"](ie)||kt["Yi Syllables"](ie)));(zI[ge]||Fe||de.imageName)&&A.push(Ax(ue+1,J,M,A,LI(ge,o.getCharCode(ue+1),Fe&&U),!1))}}var ie;return Ix(Ax(o.length(),J,M,A,0,!0))}function qg(o){let n=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function RI(o,n,a,h,m){if(!h&&!m)return;const v=o[a],x=(o[a].x+v.metrics.advance*v.scale)*h;for(let A=n;A<=a;A++)o[A].x-=x,o[A].y+=m}function OI(o,n,a){const{horizontalAlign:h,verticalAlign:m}=qg(a),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*m;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Px(o,n,a,h,m,v){const x=o.image;let A;if(x.content){const Le=x.content,Ke=x.pixelRatio||1;A=[Le[0]/Ke,Le[1]/Ke,x.displaySize[0]-Le[2]/Ke,x.displaySize[1]-Le[3]/Ke]}const M=n.left*v,U=n.right*v;let J,ie,ue,de;a==="width"||a==="both"?(de=m[0]+M-h[3],ie=m[0]+U+h[1]):(de=m[0]+(M+U-x.displaySize[0])/2,ie=de+x.displaySize[0]);const ge=n.top*v,Fe=n.bottom*v;return a==="height"||a==="both"?(J=m[1]+ge-h[0],ue=m[1]+Fe+h[2]):(J=m[1]+(ge+Fe-x.displaySize[1])/2,ue=J+x.displaySize[1]),{image:x,top:J,right:ie,bottom:ue,left:de,collisionPadding:A}}const Ts=128;function kx(o,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new hr(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=a;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const A=h[v],M=h[x];return a.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:M,interpolationType:m}:{kind:"camera",minZoom:A,maxZoom:M,minSize:a.evaluate(new hr(A)),maxSize:a.evaluate(new hr(M)),interpolationType:m}}}class pl extends re{constructor(n,a,h,m){super(n,a),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new pl(this.x,this.y,this.angle,this.segment)}}function Mx(o,n,a,h,m){if(n.segment===void 0)return!0;let v=n,x=n.segment+1,A=0;for(;A>-a/2;){if(x--,x<0)return!1;A-=o[x].dist(v),v=o[x]}A+=o[x].dist(o[x+1]),x++;const M=[];let U=0;for(;A<a/2;){const J=o[x],ie=o[x+1];if(!ie)return!1;let ue=o[x-1].angleTo(J)-J.angleTo(ie);for(ue=Math.abs((ue+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:A,angleDelta:ue}),U+=ue;A-M[0].distance>h;)U-=M.shift().angleDelta;if(U>m)return!1;x++,A+=J.dist(ie)}return!0}function zx(o){let n=0;for(let a=0;a<o.length-1;a++)n+=o[a].dist(o[a+1]);return n}function Lx(o,n,a){return o?.6*n*a:0}function Rx(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function FI(o,n,a,h,m,v){const x=Lx(a,m,v),A=Rx(a,h)*v;let M=0;const U=zx(o)/2;for(let J=0;J<o.length-1;J++){const ie=o[J],ue=o[J+1],de=ie.dist(ue);if(M+de>U){const ge=(U-M)/de,Fe=Jn(ie.x,ue.x,ge),Le=Jn(ie.y,ue.y,ge),Ke=new pl(Fe,Le,ue.angleTo(ie),J);return Ke._round(),!x||Mx(o,Ke,A,x,n)?Ke:void 0}M+=de}}function jI(o,n,a,h,m,v,x,A,M){const U=Lx(h,v,x),J=Rx(h,m),ie=J*x,ue=o[0].x===0||o[0].x===M||o[0].y===0||o[0].y===M;return n-ie<n/4&&(n=ie+n/4),Ox(o,ue?n/2*A%n:(J/2+2*v)*x*A%n,n,U,a,ie,ue,!1,M)}function Ox(o,n,a,h,m,v,x,A,M){const U=v/2,J=zx(o);let ie=0,ue=n-a,de=[];for(let ge=0;ge<o.length-1;ge++){const Fe=o[ge],Le=o[ge+1],Ke=Fe.dist(Le),rt=Le.angleTo(Fe);for(;ue+a<ie+Ke;){ue+=a;const qe=(ue-ie)/Ke,tt=Jn(Fe.x,Le.x,qe),yt=Jn(Fe.y,Le.y,qe);if(tt>=0&&tt<M&&yt>=0&&yt<M&&ue-U>=0&&ue+U<=J){const gt=new pl(tt,yt,rt,ge);gt._round(),h&&!Mx(o,gt,v,h,m)||de.push(gt)}}ie+=Ke}return A||de.length||x||(de=Ox(o,ie/2,a,h,m,v,x,!0,M)),de}function Fx(o,n,a,h,m){const v=[];for(let x=0;x<o.length;x++){const A=o[x];let M;for(let U=0;U<A.length-1;U++){let J=A[U],ie=A[U+1];J.x<n&&ie.x<n||(J.x<n?J=new re(n,J.y+(n-J.x)/(ie.x-J.x)*(ie.y-J.y))._round():ie.x<n&&(ie=new re(n,J.y+(n-J.x)/(ie.x-J.x)*(ie.y-J.y))._round()),J.y<a&&ie.y<a||(J.y<a?J=new re(J.x+(a-J.y)/(ie.y-J.y)*(ie.x-J.x),a)._round():ie.y<a&&(ie=new re(J.x+(a-J.y)/(ie.y-J.y)*(ie.x-J.x),a)._round()),J.x>=h&&ie.x>=h||(J.x>=h?J=new re(h,J.y+(h-J.x)/(ie.x-J.x)*(ie.y-J.y))._round():ie.x>=h&&(ie=new re(h,J.y+(h-J.x)/(ie.x-J.x)*(ie.y-J.y))._round()),J.y>=m&&ie.y>=m||(J.y>=m?J=new re(J.x+(m-J.y)/(ie.y-J.y)*(ie.x-J.x),m)._round():ie.y>=m&&(ie=new re(J.x+(m-J.y)/(ie.y-J.y)*(ie.x-J.x),m)._round()),M&&J.equals(M[M.length-1])||(M=[J],v.push(M)),M.push(ie)))))}}return v}function jx(o,n,a,h){const m=[],v=o.image,x=v.pixelRatio,A=v.paddedRect.w-2,M=v.paddedRect.h-2,U=o.right-o.left,J=o.bottom-o.top,ie=v.stretchX||[[0,A]],ue=v.stretchY||[[0,M]],de=(Pt,jt)=>Pt+jt[1]-jt[0],ge=ie.reduce(de,0),Fe=ue.reduce(de,0),Le=A-ge,Ke=M-Fe;let rt=0,qe=ge,tt=0,yt=Fe,gt=0,$t=Le,Ht=0,Ft=Ke;if(v.content&&h){const Pt=v.content;rt=Dd(ie,0,Pt[0]),tt=Dd(ue,0,Pt[1]),qe=Dd(ie,Pt[0],Pt[2]),yt=Dd(ue,Pt[1],Pt[3]),gt=Pt[0]-rt,Ht=Pt[1]-tt,$t=Pt[2]-Pt[0]-qe,Ft=Pt[3]-Pt[1]-yt}const zt=(Pt,jt,Ot,Et)=>{const an=Bd(Pt.stretch-rt,qe,U,o.left),Jt=Nd(Pt.fixed-gt,$t,Pt.stretch,ge),In=Bd(jt.stretch-tt,yt,J,o.top),ur=Nd(jt.fixed-Ht,Ft,jt.stretch,Fe),dr=Bd(Ot.stretch-rt,qe,U,o.left),Wr=Nd(Ot.fixed-gt,$t,Ot.stretch,ge),wo=Bd(Et.stretch-tt,yt,J,o.top),ci=Nd(Et.fixed-Ht,Ft,Et.stretch,Fe),jr=new re(an,In),Yr=new re(dr,In),hi=new re(dr,wo),_i=new re(an,wo),$i=new re(Jt/x,ur/x),Dr=new re(Wr/x,ci/x),fi=n*Math.PI/180;if(fi){const Vi=Math.sin(fi),Gi=Math.cos(fi),_r=[Gi,-Vi,Vi,Gi];jr._matMult(_r),Yr._matMult(_r),_i._matMult(_r),hi._matMult(_r)}const xi=Pt.stretch+Pt.fixed,Mi=jt.stretch+jt.fixed;return{tl:jr,tr:Yr,bl:_i,br:hi,tex:{x:v.paddedRect.x+1+xi,y:v.paddedRect.y+1+Mi,w:Ot.stretch+Ot.fixed-xi,h:Et.stretch+Et.fixed-Mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$i,pixelOffsetBR:Dr,minFontScaleX:$t/x/U,minFontScaleY:Ft/x/J,isSDF:a}};if(h&&(v.stretchX||v.stretchY)){const Pt=Dx(ie,Le,ge),jt=Dx(ue,Ke,Fe);for(let Ot=0;Ot<Pt.length-1;Ot++){const Et=Pt[Ot],an=Pt[Ot+1];for(let Jt=0;Jt<jt.length-1;Jt++)m.push(zt(Et,jt[Jt],an,jt[Jt+1]))}}else m.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:M+1}));return m}function Dd(o,n,a){let h=0;for(const m of o)h+=Math.max(n,Math.min(a,m[1]))-Math.max(n,Math.min(a,m[0]));return h}function Dx(o,n,a){const h=[{fixed:-1,stretch:0}];for(const[m,v]of o){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return h.push({fixed:n+1,stretch:a}),h}function Bd(o,n,a,h){return o/n*a+h}function Nd(o,n,a,h){return o-n*a/h}Tt("Anchor",pl);class Ud{constructor(n,a,h,m,v,x,A,M,U,J){if(this.boxStartIndex=n.length,U){let ie=x.top,ue=x.bottom;const de=x.collisionPadding;de&&(ie-=de[1],ue+=de[3]);let ge=ue-ie;ge>0&&(ge=Math.max(10,ge),this.circleDiameter=ge)}else{let ie=x.top*A-M[0],ue=x.bottom*A+M[2],de=x.left*A-M[3],ge=x.right*A+M[1];const Fe=x.collisionPadding;if(Fe&&(de-=Fe[0]*A,ie-=Fe[1]*A,ge+=Fe[2]*A,ue+=Fe[3]*A),J){const Le=new re(de,ie),Ke=new re(ge,ie),rt=new re(de,ue),qe=new re(ge,ue),tt=J*Math.PI/180;Le._rotate(tt),Ke._rotate(tt),rt._rotate(tt),qe._rotate(tt),de=Math.min(Le.x,Ke.x,rt.x,qe.x),ge=Math.max(Le.x,Ke.x,rt.x,qe.x),ie=Math.min(Le.y,Ke.y,rt.y,qe.y),ue=Math.max(Le.y,Ke.y,rt.y,qe.y)}n.emplaceBack(a.x,a.y,de,ie,ge,ue,h,m,v)}this.boxEndIndex=n.length}}class DI{constructor(n=[],a=BI){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:h}=this,m=a[n];for(;n>0;){const v=n-1>>1,x=a[v];if(h(m,x)>=0)break;a[n]=x,n=v}a[n]=m}_down(n){const{data:a,compare:h}=this,m=this.length>>1,v=a[n];for(;n<m;){let x=1+(n<<1),A=a[x];const M=x+1;if(M<this.length&&h(a[M],A)<0&&(x=M,A=a[M]),h(A,v)>=0)break;a[n]=A,n=x}a[n]=v}}function BI(o,n){return o<n?-1:o>n?1:0}function NI(o,n=1,a=!1){let h=1/0,m=1/0,v=-1/0,x=-1/0;const A=o[0];for(let de=0;de<A.length;de++){const ge=A[de];(!de||ge.x<h)&&(h=ge.x),(!de||ge.y<m)&&(m=ge.y),(!de||ge.x>v)&&(v=ge.x),(!de||ge.y>x)&&(x=ge.y)}const M=Math.min(v-h,x-m);let U=M/2;const J=new DI([],UI);if(M===0)return new re(h,m);for(let de=h;de<v;de+=M)for(let ge=m;ge<x;ge+=M)J.push(new pc(de+U,ge+U,U,o));let ie=function(de){let ge=0,Fe=0,Le=0;const Ke=de[0];for(let rt=0,qe=Ke.length,tt=qe-1;rt<qe;tt=rt++){const yt=Ke[rt],gt=Ke[tt],$t=yt.x*gt.y-gt.x*yt.y;Fe+=(yt.x+gt.x)*$t,Le+=(yt.y+gt.y)*$t,ge+=3*$t}return new pc(Fe/ge,Le/ge,0,de)}(o),ue=J.length;for(;J.length;){const de=J.pop();(de.d>ie.d||!ie.d)&&(ie=de,a&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,ue)),de.max-ie.d<=n||(U=de.h/2,J.push(new pc(de.p.x-U,de.p.y-U,U,o)),J.push(new pc(de.p.x+U,de.p.y-U,U,o)),J.push(new pc(de.p.x-U,de.p.y+U,U,o)),J.push(new pc(de.p.x+U,de.p.y+U,U,o)),ue+=4)}return a&&(console.log(`num probes: ${ue}`),console.log(`best distance: ${ie.d}`)),ie.p}function UI(o,n){return n.max-o.max}function pc(o,n,a,h){this.p=new re(o,n),this.h=a,this.d=function(m,v){let x=!1,A=1/0;for(let M=0;M<v.length;M++){const U=v[M];for(let J=0,ie=U.length,ue=ie-1;J<ie;ue=J++){const de=U[J],ge=U[ue];de.y>m.y!=ge.y>m.y&&m.x<(ge.x-de.x)*(m.y-de.y)/(ge.y-de.y)+de.x&&(x=!x),A=Math.min(A,W1(m,de,ge))}}return(x?1:-1)*Math.sqrt(A)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const Kg=Number.POSITIVE_INFINITY;function Bx(o,n){return n[1]!==Kg?function(a,h,m){let v=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),a){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(a){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(a,h){let m=0,v=0;h<0&&(h=0);const x=h/Math.sqrt(2);switch(a){case"top-right":case"top-left":v=x-7;break;case"bottom-right":case"bottom-left":v=7-x;break;case"bottom":v=7-h;break;case"top":v=h-7}switch(a){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(o,n[0])}function Yg(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $I(o,n,a,h,m,v,x,A,M,U,J){let ie=v.textMaxSize.evaluate(n,{});ie===void 0&&(ie=x);const ue=o.layers[0].layout,de=ue.get("icon-offset").evaluate(n,{},J),ge=Ux(a.horizontal),Fe=x/24,Le=o.tilePixelRatio*Fe,Ke=o.tilePixelRatio*ie/24,rt=o.tilePixelRatio*A,qe=o.tilePixelRatio*ue.get("symbol-spacing"),tt=ue.get("text-padding")*o.tilePixelRatio,yt=function(Et,an,Jt,In=1){const ur=Et.get("icon-padding").evaluate(an,{},Jt),dr=ur&&ur.values;return[dr[0]*In,dr[1]*In,dr[2]*In,dr[3]*In]}(ue,n,J,o.tilePixelRatio),gt=ue.get("text-max-angle")/180*Math.PI,$t=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",Ht=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Ft=ue.get("symbol-placement"),zt=qe/2,Pt=ue.get("icon-text-fit");let jt;h&&Pt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(jt=Px(h,a.vertical,Pt,ue.get("icon-text-fit-padding"),de,Fe)),ge&&(h=Px(h,ge,Pt,ue.get("icon-text-fit-padding"),de,Fe)));const Ot=(Et,an)=>{an.x<0||an.x>=Zr||an.y<0||an.y>=Zr||function(Jt,In,ur,dr,Wr,wo,ci,jr,Yr,hi,_i,$i,Dr,fi,xi,Mi,Vi,Gi,_r,Jr,zn,lo,di,wi,Vo){const aa=Jt.addToLineVertexArray(In,ur);let sa,Cs,Go,bo,Zi=0,As=0,Wh=0,rw=0,sy=-1,ly=-1;const Is={};let iw=Kr.exports(""),uy=0,cy=0;if(jr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[uy,cy]=jr.layout.get("text-offset").evaluate(zn,{},wi).map(Wi=>Wi*oi):(uy=jr.layout.get("text-radial-offset").evaluate(zn,{},wi)*oi,cy=Kg),Jt.allowVerticalPlacement&&dr.vertical){const Wi=jr.layout.get("text-rotate").evaluate(zn,{},wi)+90;Go=new Ud(Yr,In,hi,_i,$i,dr.vertical,Dr,fi,xi,Wi),ci&&(bo=new Ud(Yr,In,hi,_i,$i,ci,Vi,Gi,xi,Wi))}if(Wr){const Wi=jr.layout.get("icon-rotate").evaluate(zn,{}),Za=jr.layout.get("icon-text-fit")!=="none",Hh=jx(Wr,Wi,di,Za),Xh=ci?jx(ci,Wi,di,Za):void 0;Cs=new Ud(Yr,In,hi,_i,$i,Wr,Vi,Gi,!1,Wi),Zi=4*Hh.length;const sw=Jt.iconSizeData;let _u=null;sw.kind==="source"?(_u=[Ts*jr.layout.get("icon-size").evaluate(zn,{})],_u[0]>ml&&V(`${Jt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):sw.kind==="composite"&&(_u=[Ts*lo.compositeIconSizes[0].evaluate(zn,{},wi),Ts*lo.compositeIconSizes[1].evaluate(zn,{},wi)],(_u[0]>ml||_u[1]>ml)&&V(`${Jt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Jt.addSymbols(Jt.icon,Hh,_u,Jr,_r,zn,l.WritingMode.none,In,aa.lineStartIndex,aa.lineLength,-1,wi),sy=Jt.icon.placedSymbolArray.length-1,Xh&&(As=4*Xh.length,Jt.addSymbols(Jt.icon,Xh,_u,Jr,_r,zn,l.WritingMode.vertical,In,aa.lineStartIndex,aa.lineLength,-1,wi),ly=Jt.icon.placedSymbolArray.length-1)}const ow=Object.keys(dr.horizontal);for(const Wi of ow){const Za=dr.horizontal[Wi];if(!sa){iw=Kr.exports(Za.text);const Xh=jr.layout.get("text-rotate").evaluate(zn,{},wi);sa=new Ud(Yr,In,hi,_i,$i,Za,Dr,fi,xi,Xh)}const Hh=Za.positionedLines.length===1;if(Wh+=Nx(Jt,In,Za,wo,jr,xi,zn,Mi,aa,dr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,Hh?ow:[Wi],Is,sy,lo,wi),Hh)break}dr.vertical&&(rw+=Nx(Jt,In,dr.vertical,wo,jr,xi,zn,Mi,aa,l.WritingMode.vertical,["vertical"],Is,ly,lo,wi));const tP=sa?sa.boxStartIndex:Jt.collisionBoxArray.length,nP=sa?sa.boxEndIndex:Jt.collisionBoxArray.length,rP=Go?Go.boxStartIndex:Jt.collisionBoxArray.length,iP=Go?Go.boxEndIndex:Jt.collisionBoxArray.length,oP=Cs?Cs.boxStartIndex:Jt.collisionBoxArray.length,aP=Cs?Cs.boxEndIndex:Jt.collisionBoxArray.length,sP=bo?bo.boxStartIndex:Jt.collisionBoxArray.length,lP=bo?bo.boxEndIndex:Jt.collisionBoxArray.length;let la=-1;const Wd=(Wi,Za)=>Wi&&Wi.circleDiameter?Math.max(Wi.circleDiameter,Za):Za;la=Wd(sa,la),la=Wd(Go,la),la=Wd(Cs,la),la=Wd(bo,la);const aw=la>-1?1:0;aw&&(la*=Vo/oi),Jt.glyphOffsetArray.length>=mc.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zn.sortKey!==void 0&&Jt.addToSortKeyRanges(Jt.symbolInstances.length,zn.sortKey),Jt.symbolInstances.emplaceBack(In.x,In.y,Is.right>=0?Is.right:-1,Is.center>=0?Is.center:-1,Is.left>=0?Is.left:-1,Is.vertical||-1,sy,ly,iw,tP,nP,rP,iP,oP,aP,sP,lP,hi,Wh,rw,Zi,As,aw,0,Dr,uy,cy,la)}(o,an,Et,a,h,m,jt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Le,[tt,tt,tt,tt],$t,M,rt,yt,Ht,de,n,v,U,J,x)};if(Ft==="line")for(const Et of Fx(n.geometry,0,0,Zr,Zr)){const an=jI(Et,qe,gt,a.vertical||ge,h,24,Ke,o.overscaling,Zr);for(const Jt of an){const In=ge;In&&VI(o,In.text,zt,Jt)||Ot(Et,Jt)}}else if(Ft==="line-center"){for(const Et of n.geometry)if(Et.length>1){const an=FI(Et,gt,a.vertical||ge,h,24,Ke);an&&Ot(Et,an)}}else if(n.type==="Polygon")for(const Et of Dg(n.geometry,0)){const an=NI(Et,16);Ot(Et[0],new pl(an.x,an.y,0))}else if(n.type==="LineString")for(const Et of n.geometry)Ot(Et,new pl(Et[0].x,Et[0].y,0));else if(n.type==="Point")for(const Et of n.geometry)for(const an of Et)Ot([an],new pl(an.x,an.y,0))}const ml=32640;function Nx(o,n,a,h,m,v,x,A,M,U,J,ie,ue,de,ge){const Fe=function(rt,qe,tt,yt,gt,$t,Ht,Ft){const zt=yt.layout.get("text-rotate").evaluate($t,{})*Math.PI/180,Pt=[];for(const jt of qe.positionedLines)for(const Ot of jt.positionedGlyphs){if(!Ot.rect)continue;const Et=Ot.rect||{};let an=4,Jt=!0,In=1,ur=0;const dr=(gt||Ft)&&Ot.vertical,Wr=Ot.metrics.advance*Ot.scale/2;if(Ft&&qe.verticalizable){const _r=(Ot.scale-1)*oi,Jr=(oi-Ot.metrics.width*Ot.scale)/2;ur=jt.lineOffset/2-(Ot.imageName?-Jr:_r)}if(Ot.imageName){const _r=Ht[Ot.imageName];Jt=_r.sdf,In=_r.pixelRatio,an=1/In}const wo=gt?[Ot.x+Wr,Ot.y]:[0,0];let ci=gt?[0,0]:[Ot.x+Wr+tt[0],Ot.y+tt[1]-ur],jr=[0,0];dr&&(jr=ci,ci=[0,0]);const Yr=(Ot.metrics.left-an)*Ot.scale-Wr+ci[0],hi=(-Ot.metrics.top-an)*Ot.scale+ci[1],_i=Yr+Et.w*Ot.scale/In,$i=hi+Et.h*Ot.scale/In,Dr=new re(Yr,hi),fi=new re(_i,hi),xi=new re(Yr,$i),Mi=new re(_i,$i);if(dr){const _r=new re(-Wr,Wr-Od),Jr=-Math.PI/2,zn=12-Wr,lo=new re(22-zn,-(Ot.imageName?zn:0)),di=new re(...jr);Dr._rotateAround(Jr,_r)._add(lo)._add(di),fi._rotateAround(Jr,_r)._add(lo)._add(di),xi._rotateAround(Jr,_r)._add(lo)._add(di),Mi._rotateAround(Jr,_r)._add(lo)._add(di)}if(zt){const _r=Math.sin(zt),Jr=Math.cos(zt),zn=[Jr,-_r,_r,Jr];Dr._matMult(zn),fi._matMult(zn),xi._matMult(zn),Mi._matMult(zn)}const Vi=new re(0,0),Gi=new re(0,0);Pt.push({tl:Dr,tr:fi,bl:xi,br:Mi,tex:Et,writingMode:qe.writingMode,glyphOffset:wo,sectionIndex:Ot.sectionIndex,isSDF:Jt,pixelOffsetTL:Vi,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}return Pt}(0,a,A,m,v,x,h,o.allowVerticalPlacement),Le=o.textSizeData;let Ke=null;Le.kind==="source"?(Ke=[Ts*m.layout.get("text-size").evaluate(x,{})],Ke[0]>ml&&V(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Le.kind==="composite"&&(Ke=[Ts*de.compositeTextSizes[0].evaluate(x,{},ge),Ts*de.compositeTextSizes[1].evaluate(x,{},ge)],(Ke[0]>ml||Ke[1]>ml)&&V(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,Fe,Ke,A,v,x,U,n,M.lineStartIndex,M.lineLength,ue,ge);for(const rt of J)ie[rt]=o.text.placedSymbolArray.length-1;return 4*Fe.length}function Ux(o){for(const n in o)return o[n];return null}function VI(o,n,a,h){const m=o.compareText;if(n in m){const v=m[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<a)return!0}else m[n]=[];return m[n].push(h),!1}const GI=fl.VectorTileFeature.types,ZI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $d(o,n,a,h,m,v,x,A,M,U,J,ie,ue){const de=A?Math.min(ml,Math.round(A[0])):0,ge=A?Math.min(ml,Math.round(A[1])):0;o.emplaceBack(n,a,Math.round(32*h),Math.round(32*m),v,x,(de<<1)+(M?1:0),ge,16*U,16*J,256*ie,256*ue)}function Jg(o,n,a){o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a)}function WI(o){for(const n of o.sections)if(yd(n.text))return!0;return!1}class Qg{constructor(n){this.layoutVertexArray=new Uo,this.indexArray=new Ii,this.programConfigurations=n,this.segments=new Mn,this.dynamicLayoutVertexArray=new vo,this.opacityVertexArray=new $o,this.placedSymbolArray=new wt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,mI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,gI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,ZI,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tt("SymbolBuffers",Qg);class ey{constructor(n,a,h){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new h,this.segments=new Mn,this.collisionVertexArray=new ao}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,yI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tt("CollisionBuffers",ey);class mc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zg([]),this.placementViewportMatrix=zg([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kx(this.zoom,a["text-size"]),this.iconSizeData=kx(this.zoom,a["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=ny(h,"text-overlap","text-allow-overlap")!=="never"||ny(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new Qg(new pu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Qg(new pu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Mt,this.lineVertexArray=new Ut,this.symbolInstances=new Bt}calculateGlyphDependencies(n,a,h,m,v){for(let x=0;x<n.length;x++)if(a[n.charCodeAt(x)]=!0,(h||m)&&v){const A=$h[n.charAt(x)];A&&(a[A.charCodeAt(0)]=!0)}}populate(n,a,h){const m=this.layers[0],v=m.layout,x=v.get("text-font"),A=v.get("text-field"),M=v.get("icon-image"),U=(A.value.kind!=="constant"||A.value.value instanceof Ue&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),J=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,ie=v.get("symbol-sort-key");if(this.features=[],!U&&!J)return;const ue=a.iconDependencies,de=a.glyphDependencies,ge=a.availableImages,Fe=new hr(this.zoom);for(const{feature:Le,id:Ke,index:rt,sourceLayerIndex:qe}of n){const tt=m._featureFilter.needGeometry,yt=gu(Le,tt);if(!m._featureFilter.filter(Fe,yt,h))continue;let gt,$t;if(tt||(yt.geometry=mu(Le)),U){const Ft=m.getValueAndResolveTokens("text-field",yt,h,ge),zt=Ue.factory(Ft);WI(zt)&&(this.hasRTLText=!0),(!this.hasRTLText||hu()==="unavailable"||this.hasRTLText&&oo.isParsed())&&(gt=_I(zt,m,yt))}if(J){const Ft=m.getValueAndResolveTokens("icon-image",yt,h,ge);$t=Ft instanceof He?Ft:He.fromString(Ft)}if(!gt&&!$t)continue;const Ht=this.sortFeaturesByKey?ie.evaluate(yt,{},h):void 0;if(this.features.push({id:Ke,text:gt,icon:$t,index:rt,sourceLayerIndex:qe,geometry:yt.geometry,properties:Le.properties,type:GI[Le.type],sortKey:Ht}),$t&&(ue[$t.name]=!0),gt){const Ft=x.evaluate(yt,{},h).join(","),zt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Pt of gt.sections)if(Pt.image)ue[Pt.image.name]=!0;else{const jt=vs(gt.toString()),Ot=Pt.fontStack||Ft,Et=de[Ot]=de[Ot]||{};this.calculateGlyphDependencies(Pt.text,Et,zt,this.allowVerticalPlacement,jt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Le){const Ke={},rt={},qe=[];let tt=0;function yt(Ft){qe.push(Le[Ft]),tt++}function gt(Ft,zt,Pt){const jt=rt[Ft];return delete rt[Ft],rt[zt]=jt,qe[jt].geometry[0].pop(),qe[jt].geometry[0]=qe[jt].geometry[0].concat(Pt[0]),jt}function $t(Ft,zt,Pt){const jt=Ke[zt];return delete Ke[zt],Ke[Ft]=jt,qe[jt].geometry[0].shift(),qe[jt].geometry[0]=Pt[0].concat(qe[jt].geometry[0]),jt}function Ht(Ft,zt,Pt){const jt=Pt?zt[0][zt[0].length-1]:zt[0][0];return`${Ft}:${jt.x}:${jt.y}`}for(let Ft=0;Ft<Le.length;Ft++){const zt=Le[Ft],Pt=zt.geometry,jt=zt.text?zt.text.toString():null;if(!jt){yt(Ft);continue}const Ot=Ht(jt,Pt),Et=Ht(jt,Pt,!0);if(Ot in rt&&Et in Ke&&rt[Ot]!==Ke[Et]){const an=$t(Ot,Et,Pt),Jt=gt(Ot,Et,qe[an].geometry);delete Ke[Ot],delete rt[Et],rt[Ht(jt,qe[Jt].geometry,!0)]=Jt,qe[an].geometry=null}else Ot in rt?gt(Ot,Et,Pt):Et in Ke?$t(Ot,Et,Pt):(yt(Ft),Ke[Ot]=tt-1,rt[Et]=tt-1)}return qe.filter(Ft=>Ft.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Le,Ke)=>Le.sortKey-Ke.sortKey)}update(n,a,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const x={};for(let A=n.segment+1;A<a.length;A++)x[A]={x:a[A].x,y:a[A].y,tileUnitDistanceFromAnchor:m},A<a.length-1&&(m+=a[A+1].dist(a[A]));for(let A=n.segment||0;A>=0;A--)x[A]={x:a[A].x,y:a[A].y,tileUnitDistanceFromAnchor:v},A>0&&(v+=a[A-1].dist(a[A]));for(let A=0;A<a.length;A++){const M=x[A];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,a,h,m,v,x,A,M,U,J,ie,ue){const de=n.indexArray,ge=n.layoutVertexArray,Fe=n.segments.prepareSegment(4*a.length,ge,de,this.canOverlap?x.sortKey:void 0),Le=this.glyphOffsetArray.length,Ke=Fe.vertexLength,rt=this.allowVerticalPlacement&&A===l.WritingMode.vertical?Math.PI/2:0,qe=x.text&&x.text.sections;for(let tt=0;tt<a.length;tt++){const{tl:yt,tr:gt,bl:$t,br:Ht,tex:Ft,pixelOffsetTL:zt,pixelOffsetBR:Pt,minFontScaleX:jt,minFontScaleY:Ot,glyphOffset:Et,isSDF:an,sectionIndex:Jt}=a[tt],In=Fe.vertexLength,ur=Et[1];$d(ge,M.x,M.y,yt.x,ur+yt.y,Ft.x,Ft.y,h,an,zt.x,zt.y,jt,Ot),$d(ge,M.x,M.y,gt.x,ur+gt.y,Ft.x+Ft.w,Ft.y,h,an,Pt.x,zt.y,jt,Ot),$d(ge,M.x,M.y,$t.x,ur+$t.y,Ft.x,Ft.y+Ft.h,h,an,zt.x,Pt.y,jt,Ot),$d(ge,M.x,M.y,Ht.x,ur+Ht.y,Ft.x+Ft.w,Ft.y+Ft.h,h,an,Pt.x,Pt.y,jt,Ot),Jg(n.dynamicLayoutVertexArray,M,rt),de.emplaceBack(In,In+1,In+2),de.emplaceBack(In+1,In+2,In+3),Fe.vertexLength+=4,Fe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),tt!==a.length-1&&Jt===a[tt+1].sectionIndex||n.programConfigurations.populatePaintArrays(ge.length,x,x.index,{},ue,qe&&qe[Jt])}n.placedSymbolArray.emplaceBack(M.x,M.y,Le,this.glyphOffsetArray.length-Le,Ke,U,J,M.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],A,0,!1,0,ie)}_addCollisionDebugVertex(n,a,h,m,v,x){return a.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,a,h,m,v,x,A){const M=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=M.vertexLength,J=v.layoutVertexArray,ie=v.collisionVertexArray,ue=A.anchorX,de=A.anchorY;this._addCollisionDebugVertex(J,ie,x,ue,de,new re(n,a)),this._addCollisionDebugVertex(J,ie,x,ue,de,new re(h,a)),this._addCollisionDebugVertex(J,ie,x,ue,de,new re(h,m)),this._addCollisionDebugVertex(J,ie,x,ue,de,new re(n,m)),M.vertexLength+=4;const ge=v.indexArray;ge.emplaceBack(U,U+1),ge.emplaceBack(U+1,U+2),ge.emplaceBack(U+2,U+3),ge.emplaceBack(U+3,U),M.primitiveLength+=4}addDebugCollisionBoxes(n,a,h,m){for(let v=n;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ey(Va,gx.members,ia),this.iconCollisionBox=new ey(Va,gx.members,ia);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,h,m,v,x,A,M,U){const J={};for(let ie=a;ie<h;ie++){const ue=n.get(ie);J.textBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},J.textFeatureIndex=ue.featureIndex;break}for(let ie=m;ie<v;ie++){const ue=n.get(ie);J.verticalTextBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},J.verticalTextFeatureIndex=ue.featureIndex;break}for(let ie=x;ie<A;ie++){const ue=n.get(ie);J.iconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},J.iconFeatureIndex=ue.featureIndex;break}for(let ie=M;ie<U;ie++){const ue=n.get(ie);J.verticalIconBox={x1:ue.x1,y1:ue.y1,x2:ue.x2,y2:ue.y2,anchorPointX:ue.anchorPointX,anchorPointY:ue.anchorPointY},J.verticalIconFeatureIndex=ue.featureIndex;break}return J}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const h=n.placedSymbolArray.get(a),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),h=Math.cos(n),m=[],v=[],x=[];for(let A=0;A<this.symbolInstances.length;++A){x.push(A);const M=this.symbolInstances.get(A);m.push(0|Math.round(a*M.anchorX+h*M.anchorY)),v.push(M.featureIndex)}return x.sort((A,M)=>m[A]-m[M]||v[M]-v[A]),x}addToSortKeyRanges(n,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tt("SymbolBucket",mc,{omit:["layers","collisionBoxArray","features","compareText"]}),mc.MAX_GLYPHS=65535,mc.addDynamicAttributes=Jg;const HI=new ii({"symbol-placement":new Kt(P.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(P.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(P.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fn(P.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(P.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(P.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(P.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(P.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(P.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(P.layout_symbol["icon-rotation-alignment"]),"icon-size":new fn(P.layout_symbol["icon-size"]),"icon-text-fit":new Kt(P.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(P.layout_symbol["icon-text-fit-padding"]),"icon-image":new fn(P.layout_symbol["icon-image"]),"icon-rotate":new fn(P.layout_symbol["icon-rotate"]),"icon-padding":new fn(P.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(P.layout_symbol["icon-keep-upright"]),"icon-offset":new fn(P.layout_symbol["icon-offset"]),"icon-anchor":new fn(P.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(P.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(P.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(P.layout_symbol["text-rotation-alignment"]),"text-field":new fn(P.layout_symbol["text-field"]),"text-font":new fn(P.layout_symbol["text-font"]),"text-size":new fn(P.layout_symbol["text-size"]),"text-max-width":new fn(P.layout_symbol["text-max-width"]),"text-line-height":new Kt(P.layout_symbol["text-line-height"]),"text-letter-spacing":new fn(P.layout_symbol["text-letter-spacing"]),"text-justify":new fn(P.layout_symbol["text-justify"]),"text-radial-offset":new fn(P.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(P.layout_symbol["text-variable-anchor"]),"text-anchor":new fn(P.layout_symbol["text-anchor"]),"text-max-angle":new Kt(P.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(P.layout_symbol["text-writing-mode"]),"text-rotate":new fn(P.layout_symbol["text-rotate"]),"text-padding":new Kt(P.layout_symbol["text-padding"]),"text-keep-upright":new Kt(P.layout_symbol["text-keep-upright"]),"text-transform":new fn(P.layout_symbol["text-transform"]),"text-offset":new fn(P.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(P.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(P.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(P.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(P.layout_symbol["text-optional"])});var ty={paint:new ii({"icon-opacity":new fn(P.paint_symbol["icon-opacity"]),"icon-color":new fn(P.paint_symbol["icon-color"]),"icon-halo-color":new fn(P.paint_symbol["icon-halo-color"]),"icon-halo-width":new fn(P.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fn(P.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(P.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(P.paint_symbol["icon-translate-anchor"]),"text-opacity":new fn(P.paint_symbol["text-opacity"]),"text-color":new fn(P.paint_symbol["text-color"],{runtimeType:mr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new fn(P.paint_symbol["text-halo-color"]),"text-halo-width":new fn(P.paint_symbol["text-halo-width"]),"text-halo-blur":new fn(P.paint_symbol["text-halo-blur"]),"text-translate":new Kt(P.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(P.paint_symbol["text-translate-anchor"])}),layout:HI};class $x{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Sn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tt("FormatSectionOverride",$x,{omit:["defaultValue"]});class Vd extends No{constructor(n){super(n,ty)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,h,m){const v=this.layout.get(n).evaluate(a,{},h,m),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Ma(x.value)||!v?v:function(A,M){return M.replace(/{([^{}]+)}/g,(U,J)=>J in A?String(A[J]):"")}(a.properties,v)}createBucket(n){return new mc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of ty.paint.overridableProperties){if(!Vd.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),h=new $x(a),m=new hs(h,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new ds("source",m):new za("composite",m,a.value.zoomStops),this.paint._values[n]=new Bo(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&Vd.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const h=n.get("text-field"),m=ty.paint.properties[a];let v=!1;const x=A=>{for(const M of A)if(m.overrides&&m.overrides.hasOverride(M))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Ue)x(h.value.value.sections);else if(h.value.kind==="source"){const A=U=>{v||(U instanceof Wt&&at(U.value)===wr?x(U.value.sections):U instanceof el?x(U.sections):U.eachChild(A))},M=h.value;M._styleExpression&&A(M._styleExpression.expression)}return v}}function ny(o,n,a){let h="never";const m=o.get(n);return m?h=m:o.get(a)&&(h="always"),h}var XI={paint:new ii({"background-color":new Kt(P.paint_background["background-color"]),"background-pattern":new Ih(P.paint_background["background-pattern"]),"background-opacity":new Kt(P.paint_background["background-opacity"])})},qI={paint:new ii({"raster-opacity":new Kt(P.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(P.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(P.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(P.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(P.paint_raster["raster-saturation"]),"raster-contrast":new Kt(P.paint_raster["raster-contrast"]),"raster-resampling":new Kt(P.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(P.paint_raster["raster-fade-duration"])})};class KI extends No{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const YI={circle:class extends No{constructor(o){super(o,IA)}createBucket(o){return new Pg(o)}queryRadius(o){const n=o;return Lh("circle-radius",this,n)+Lh("circle-stroke-width",this,n)+Cd(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,a,h,m,v,x,A){const M=Ad(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,x),U=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a),J=this.paint.get("circle-pitch-alignment")==="map",ie=J?M:function(de,ge){return de.map(Fe=>Q1(Fe,ge))}(M,A),ue=J?U*x:U;for(const de of h)for(const ge of de){const Fe=J?ge:Q1(ge,A);let Le=ue;const Ke=Id([],[ge.x,ge.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Le*=Ke[3]/v.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Le*=v.cameraToCenterDistance/Ke[3]),EA(ie,Fe,Le))return!0}return!1}},heatmap:class extends No{constructor(o){super(o,kA),this._updateColorRamp()}createBucket(o){return new ex(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=nx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends No{constructor(o){super(o,MA)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends No{constructor(o){super(o,HA)}recalculate(o,n){super.recalculate(o,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Ug(o)}queryRadius(){return Cd(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,a,h,m,v,x){return Z1(Ad(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,x),h)}isTileClipped(){return!0}},"fill-extrusion":class extends No{constructor(o){super(o,sI)}createBucket(o){return new Vg(o)}queryRadius(){return Cd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,a,h,m,v,x,A){const M=Ad(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,x),U=this.paint.get("fill-extrusion-height").evaluate(n,a),J=this.paint.get("fill-extrusion-base").evaluate(n,a),ie=function(de,ge,Fe,Le){const Ke=[];for(const rt of de){const qe=[rt.x,rt.y,0,1];Id(qe,qe,ge),Ke.push(new re(qe[0]/qe[3],qe[1]/qe[3]))}return Ke}(M,A),ue=function(de,ge,Fe,Le){const Ke=[],rt=[],qe=Le[8]*ge,tt=Le[9]*ge,yt=Le[10]*ge,gt=Le[11]*ge,$t=Le[8]*Fe,Ht=Le[9]*Fe,Ft=Le[10]*Fe,zt=Le[11]*Fe;for(const Pt of de){const jt=[],Ot=[];for(const Et of Pt){const an=Et.x,Jt=Et.y,In=Le[0]*an+Le[4]*Jt+Le[12],ur=Le[1]*an+Le[5]*Jt+Le[13],dr=Le[2]*an+Le[6]*Jt+Le[14],Wr=Le[3]*an+Le[7]*Jt+Le[15],wo=dr+yt,ci=Wr+gt,jr=In+$t,Yr=ur+Ht,hi=dr+Ft,_i=Wr+zt,$i=new re((In+qe)/ci,(ur+tt)/ci);$i.z=wo/ci,jt.push($i);const Dr=new re(jr/_i,Yr/_i);Dr.z=hi/_i,Ot.push(Dr)}Ke.push(jt),rt.push(Ot)}return[Ke,rt]}(h,J,U,A);return function(de,ge,Fe){let Le=1/0;Z1(Fe,ge)&&(Le=hx(Fe,ge[0]));for(let Ke=0;Ke<ge.length;Ke++){const rt=ge[Ke],qe=de[Ke];for(let tt=0;tt<rt.length-1;tt++){const yt=rt[tt],gt=[yt,rt[tt+1],qe[tt+1],qe[tt],yt];G1(Fe,gt)&&(Le=Math.min(Le,hx(Fe,gt)))}}return Le!==1/0&&Le}(ue[0],ue[1],ie)}},line:class extends No{constructor(o){super(o,dx),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ta,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=px.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Gg(o)}queryRadius(o){const n=o,a=mx(Lh("line-width",this,n),Lh("line-gap-width",this,n)),h=Lh("line-offset",this,n);return a/2+Math.abs(h)+Cd(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,a,h,m,v,x){const A=Ad(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,x),M=x/2*mx(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),U=this.paint.get("line-offset").evaluate(n,a);return U&&(h=function(J,ie){const ue=[];for(let de=0;de<J.length;de++){const ge=J[de],Fe=[];for(let Le=0;Le<ge.length;Le++){const Ke=ge[Le-1],rt=ge[Le],qe=ge[Le+1],tt=Le===0?new re(0,0):rt.sub(Ke)._unit()._perp(),yt=Le===ge.length-1?new re(0,0):qe.sub(rt)._unit()._perp(),gt=tt._add(yt)._unit(),$t=gt.x*yt.x+gt.y*yt.y;$t!==0&&gt._mult(1/$t),Fe.push(gt._mult(ie)._add(rt))}ue.push(Fe)}return ue}(h,U*x)),function(J,ie,ue){for(let de=0;de<ie.length;de++){const ge=ie[de];if(J.length>=3){for(let Fe=0;Fe<ge.length;Fe++)if(lc(J,ge[Fe]))return!0}if(SA(J,ge,ue))return!0}return!1}(A,h,M)}isTileClipped(){return!0}},symbol:Vd,background:class extends No{constructor(o){super(o,XI)}},raster:class extends No{constructor(o){super(o,qI)}}};class JI{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Vx=63710088e-1;class Ar{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ar(j(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,h=this.lat*a,m=n.lat*a,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*a);return Vx*Math.acos(Math.min(v,1))}toBounds(n=0){const a=360*n/40075017,h=a/Math.cos(Math.PI/180*this.lat);return new vu(new Ar(this.lng-h,this.lat-a),new Ar(this.lng+h,this.lat+a))}static convert(n){if(n instanceof Ar)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ar(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ar(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class vu{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Ar?new Ar(n.lng,n.lat):Ar.convert(n),this}setSouthWest(n){return this._sw=n instanceof Ar?new Ar(n.lng,n.lat):Ar.convert(n),this}extend(n){const a=this._sw,h=this._ne;let m,v;if(n instanceof Ar)m=n,v=n;else{if(!(n instanceof vu))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(vu.convert(n)):this.extend(Ar.convert(n)):this;if(m=n._sw,v=n._ne,!m||!v)return this}return a||h?(a.lng=Math.min(m.lng,a.lng),a.lat=Math.min(m.lat,a.lat),h.lng=Math.max(v.lng,h.lng),h.lat=Math.max(v.lat,h.lat)):(this._sw=new Ar(m.lng,m.lat),this._ne=new Ar(v.lng,v.lat)),this}getCenter(){return new Ar((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ar(this.getWest(),this.getNorth())}getSouthEast(){return new Ar(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:h}=Ar.convert(n);let m=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m}static convert(n){return n instanceof vu?n:n&&new vu(n)}}const Gx=2*Math.PI*Vx;function Zx(o){return Gx*Math.cos(o*Math.PI/180)}function Wx(o){return(180+o)/360}function Hx(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Xx(o,n){return o/Zx(n)}function ry(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Gd{constructor(n,a,h=0){this.x=+n,this.y=+a,this.z=+h}static fromLngLat(n,a=0){const h=Ar.convert(n);return new Gd(Wx(h.lng),Hx(h.lat),Xx(a,h.lat))}toLngLat(){return new Ar(360*this.x-180,ry(this.y))}toAltitude(){return this.z*Zx(ry(this.y))}meterInMercatorCoordinateUnits(){return 1/Gx*(n=ry(this.y),1/Math.cos(n*Math.PI/180));var n}}function qx(o,n,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class iy{constructor(n,a,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||a<0||a>=Math.pow(2,n))throw new Error(`x=${a}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=h,this.key=Gh(0,n,n,a,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,h){const m=(x=this.y,A=this.z,M=qx(256*(v=this.x),256*(x=Math.pow(2,A)-x-1),A),U=qx(256*(v+1),256*(x+1),A),M[0]+","+M[1]+","+U[0]+","+U[1]);var v,x,A,M,U;const J=function(ie,ue,de){let ge,Fe="";for(let Le=ie;Le>0;Le--)ge=1<<Le-1,Fe+=(ue&ge?1:0)+(de&ge?2:0);return Fe}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,J).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new re((n.x*a-this.x)*Zr,(n.y*a-this.y)*Zr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Kx{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Gh(n,a.z,a.z,a.x,a.y)}}class xo{constructor(n,a,h,m,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=a,this.canonical=new iy(h,+m,+v),this.key=Gh(a,n,h,m,v)}clone(){return new xo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new xo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new xo(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Gh(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Gh(this.wrap*+a,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new xo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new xo(a,this.wrap,a,h,m),new xo(a,this.wrap,a,h+1,m),new xo(a,this.wrap,a,h,m+1),new xo(a,this.wrap,a,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new xo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new xo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Kx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Gd(n.x-this.wrap,n.y))}}function Gh(o,n,a,h,m){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*m+h).toString(36)+a.toString(36)+n.toString(36)}Tt("CanonicalTileID",iy),Tt("OverscaledTileID",xo,{omit:["posMatrix"]});class Yx{constructor(n,a,h){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void V(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const m=this.dim=a.height-2;this.data=new Uint32Array(a.data.buffer),this.encoding=h||"mapbox";for(let v=0;v<m;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(m,v)]=this.data[this._idx(m-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,m)]=this.data[this._idx(v,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let v=0;v<m;v++)for(let x=0;x<m;x++){const A=this.get(v,x);A>this.max&&(this.max=A),A<this.min&&(this.min=A)}}get(n,a){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(h[m],h[m+1],h[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}_unpackMapbox(n,a,h){return(256*n*256+256*a+h)/10-1e4}_unpackTerrarium(n,a,h){return 256*n+a+h/256-32768}getPixels(){return new _o({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=a*this.dim,v=a*this.dim+this.dim,x=h*this.dim,A=h*this.dim+this.dim;switch(a){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:x=A-1;break;case 1:A=x+1}const M=-a*this.dim,U=-h*this.dim;for(let J=x;J<A;J++)for(let ie=m;ie<v;ie++)this.data[this._idx(ie,J)]=n.data[this._idx(ie+M,J+U)]}}Tt("DEMData",Yx);class Jx{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const h=n[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Qx{constructor(n,a,h,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=h,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class ew{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new jn(Zr,16,0),this.grid3D=new jn(Zr,16,0),this.featureIndexArray=new An,this.promoteId=a}insert(n,a,h,m,v,x){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const M=x?this.grid3D:this.grid;for(let U=0;U<a.length;U++){const J=a[U],ie=[1/0,1/0,-1/0,-1/0];for(let ue=0;ue<J.length;ue++){const de=J[ue];ie[0]=Math.min(ie[0],de.x),ie[1]=Math.min(ie[1],de.y),ie[2]=Math.max(ie[2],de.x),ie[3]=Math.max(ie[3],de.y)}ie[0]<Zr&&ie[1]<Zr&&ie[2]>=0&&ie[3]>=0&&M.insert(A,ie[0],ie[1],ie[2],ie[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fl.VectorTile(new Zg(this.rawTileData)).layers,this.sourceLayerCoder=new Jx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,h,m){this.loadVTLayers();const v=n.params||{},x=Zr/n.tileSize/n.scale,A=al(v.filter),M=n.queryGeometry,U=n.queryPadding*x,J=nw(M),ie=this.grid.query(J.minX-U,J.minY-U,J.maxX+U,J.maxY+U),ue=nw(n.cameraQueryGeometry),de=this.grid3D.query(ue.minX-U,ue.minY-U,ue.maxX+U,ue.maxY+U,(Le,Ke,rt,qe)=>function(tt,yt,gt,$t,Ht){for(const zt of tt)if(yt<=zt.x&&gt<=zt.y&&$t>=zt.x&&Ht>=zt.y)return!0;const Ft=[new re(yt,gt),new re(yt,Ht),new re($t,Ht),new re($t,gt)];if(tt.length>2){for(const zt of Ft)if(lc(tt,zt))return!0}for(let zt=0;zt<tt.length-1;zt++)if(CA(tt[zt],tt[zt+1],Ft))return!0;return!1}(n.cameraQueryGeometry,Le-U,Ke-U,rt+U,qe+U));for(const Le of de)ie.push(Le);ie.sort(QI);const ge={};let Fe;for(let Le=0;Le<ie.length;Le++){const Ke=ie[Le];if(Ke===Fe)continue;Fe=Ke;const rt=this.featureIndexArray.get(Ke);let qe=null;this.loadMatchingFeature(ge,rt.bucketIndex,rt.sourceLayerIndex,rt.featureIndex,A,v.layers,v.availableImages,a,h,m,(tt,yt,gt)=>(qe||(qe=mu(tt)),yt.queryIntersectsFeature(M,tt,gt,qe,this.z,n.transform,x,n.pixelPosMatrix)))}return ge}loadMatchingFeature(n,a,h,m,v,x,A,M,U,J,ie){const ue=this.bucketLayerIDs[a];if(x&&!function(Le,Ke){for(let rt=0;rt<Le.length;rt++)if(Ke.indexOf(Le[rt])>=0)return!0;return!1}(x,ue))return;const de=this.sourceLayerCoder.decode(h),ge=this.vtLayers[de].feature(m);if(v.needGeometry){const Le=gu(ge,!0);if(!v.filter(new hr(this.tileID.overscaledZ),Le,this.tileID.canonical))return}else if(!v.filter(new hr(this.tileID.overscaledZ),ge))return;const Fe=this.getId(ge,de);for(let Le=0;Le<ue.length;Le++){const Ke=ue[Le];if(x&&x.indexOf(Ke)<0)continue;const rt=M[Ke];if(!rt)continue;let qe={};Fe&&J&&(qe=J.getState(rt.sourceLayer||"_geojsonTileLayer",Fe));const tt=q({},U[Ke]);tt.paint=tw(tt.paint,rt.paint,ge,qe,A),tt.layout=tw(tt.layout,rt.layout,ge,qe,A);const yt=!ie||ie(ge,rt,qe);if(!yt)continue;const gt=new Qx(ge,this.z,this.x,this.y,Fe);gt.layer=tt;let $t=n[Ke];$t===void 0&&($t=n[Ke]=[]),$t.push({featureIndex:m,feature:gt,intersectionZ:yt})}}lookupSymbolFeatures(n,a,h,m,v,x,A,M){const U={};this.loadVTLayers();const J=al(v);for(const ie of n)this.loadMatchingFeature(U,h,m,ie,J,x,A,M,a);return U}hasLayer(n){for(const a of this.bucketLayerIDs)for(const h of a)if(n===h)return!0;return!1}getId(n,a){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function tw(o,n,a,h,m){return Z(o,(v,x)=>{const A=n instanceof du?n.get(x):null;return A&&A.evaluate?A.evaluate(a,h,m):A})}function nw(o){let n=1/0,a=1/0,h=-1/0,m=-1/0;for(const v of o)n=Math.min(n,v.x),a=Math.min(a,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:n,minY:a,maxX:h,maxY:m}}function QI(o,n){return n-o}var oy;Tt("FeatureIndex",ew,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(oy=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",oy.load="load",oy.fullLoad="fullLoad";let Zd=null,Zh=[];const ay=1e3/30,eP={mark(o){performance.mark(o)},frame(o){const n=o;Zd!=null&&Zh.push(n-Zd),Zd=n},clearMetrics(){Zd=null,Zh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,a=Zh.length,h=1/(Zh.reduce((v,x)=>v+x,0)/a/1e3),m=Zh.filter(v=>v>ay).reduce((v,x)=>v+(x-ay)/ay,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:m/(a+m)*100}}};l.AJAXError=Nt,l.ARRAY_TYPE=ki,l.Actor=class{constructor(o,n,a){this.target=o,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},fe(["receive","process"],this),this.invoker=new JI(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=k()?o:window}send(o,n,a,h,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=_e(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!a,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:cr(n,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(o){const n=o.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[a];const h=this.cancelCallbacks[a];delete this.cancelCallbacks[a],h&&h()}else k()||n.mustQueue?(this.tasks[a]=n,this.taskQueue.push(a),this.invoker.trigger()):this.processTask(a,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(n.error?a(ri(n.error)):a(null,ri(n.data)))}else{let a=!1;const h=_e(this.globalScope)?void 0:[],m=n.hasCallback?(A,M)=>{a=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:A?cr(A):null,data:cr(M,h)},h)}:A=>{a=!0};let v=null;const x=ri(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,m);else if(this.parent.getWorkerSource){const A=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,A[0],x.source)[A[1]](x,m)}else m(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=Oh,l.CanonicalTileID=iy,l.CollisionBoxArray=ht,l.CollisionCircleLayoutArray=class extends ee{},l.Color=Ee,l.DEMData=Yx,l.DataConstantProperty=Kt,l.DictionaryCoder=Jx,l.EXTENT=Zr,l.ErrorEvent=ut,l.EvaluationParameters=hr,l.Event=Ye,l.Evented=se,l.FeatureIndex=ew,l.FillBucket=Ug,l.FillExtrusionBucket=Vg,l.GeoJSONFeature=Qx,l.ImageAtlas=Sx,l.ImagePosition=Hg,l.LineBucket=Gg,l.LineStripIndexArray=class extends ze{},l.LngLat=Ar,l.LngLatBounds=vu,l.MercatorCoordinate=Gd,l.ONE_EM=oi,l.OverscaledTileID=xo,l.PerformanceUtils=eP,l.PosArray=on,l.Properties=ii,l.QuadTriangleArray=class extends he{},l.RGBAImage=_o,l.RasterBoundsArray=class extends p{},l.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},l.ResourceType=bt,l.SegmentVector=Mn,l.SymbolBucket=mc,l.Transitionable=xd,l.TriangleIndexArray=Ii,l.Uniform1f=bs,l.Uniform1i=class extends ws{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends ws{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},l.Uniform3f=class extends ws{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},l.Uniform4f=ac,l.UniformColor=N1,l.UniformMatrix4f=class extends ws{constructor(o,n){super(o,n),this.current=wA}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},l.UnwrappedTileID=Kx,l.ValidationError=L,l.ZoomHistory=Ui,l.add=function(o,n,a){return o[0]=n[0]+a[0],o[1]=n[1]+a[1],o[2]=n[2]+a[2],o},l.addDynamicAttributes=Jg,l.asyncAll=function(o,n,a){if(!o.length)return a(null,[]);let h=o.length;const m=new Array(o.length);let v=null;o.forEach((x,A)=>{n(x,(M,U)=>{M&&(v=M),m[A]=U,--h==0&&a(v,m)})})},l.bezier=T,l.bindAll=fe,l.cacheEntryPossiblyAdded=function(o){Ve++,Ve>Pe&&(o.getActor().send("enforceCacheSizeLimit",De),Ve=0)},l.clamp=I,l.clearTileCache=function(o){const n=caches.delete(ce);o&&n.catch(o).then(()=>o())},l.clipLine=Fx,l.clone=function(o){var n=new ki(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},l.clone$1=N,l.clone$2=function(o){var n=new ki(3);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n},l.collisionCircleLayout=vI,l.config=te,l.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.create=function(){var o=new ki(16);return ki!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},l.create$1=X1,l.createExpression=fs,l.createFilter=al,l.createLayout=Fr,l.createStyleLayer=function(o){return o.type==="custom"?new KI(o):new YI[o.type](o)},l.cross=function(o,n,a){var h=n[0],m=n[1],v=n[2],x=a[0],A=a[1],M=a[2];return o[0]=m*M-v*A,o[1]=v*x-h*M,o[2]=h*A-m*x,o},l.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]},l.dot$1=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},l.ease=S,l.emitValidationErrors=$n,l.enforceCacheSizeLimit=function(o){Me(),xe&&xe.then(n=>{n.keys().then(a=>{for(let h=0;h<a.length-o;h++)n.delete(a[h])})})},l.equals=function(o,n){var a=o[0],h=o[1],m=o[2],v=o[3],x=o[4],A=o[5],M=o[6],U=o[7],J=o[8],ie=o[9],ue=o[10],de=o[11],ge=o[12],Fe=o[13],Le=o[14],Ke=o[15],rt=n[0],qe=n[1],tt=n[2],yt=n[3],gt=n[4],$t=n[5],Ht=n[6],Ft=n[7],zt=n[8],Pt=n[9],jt=n[10],Ot=n[11],Et=n[12],an=n[13],Jt=n[14],In=n[15];return Math.abs(a-rt)<=Pi*Math.max(1,Math.abs(a),Math.abs(rt))&&Math.abs(h-qe)<=Pi*Math.max(1,Math.abs(h),Math.abs(qe))&&Math.abs(m-tt)<=Pi*Math.max(1,Math.abs(m),Math.abs(tt))&&Math.abs(v-yt)<=Pi*Math.max(1,Math.abs(v),Math.abs(yt))&&Math.abs(x-gt)<=Pi*Math.max(1,Math.abs(x),Math.abs(gt))&&Math.abs(A-$t)<=Pi*Math.max(1,Math.abs(A),Math.abs($t))&&Math.abs(M-Ht)<=Pi*Math.max(1,Math.abs(M),Math.abs(Ht))&&Math.abs(U-Ft)<=Pi*Math.max(1,Math.abs(U),Math.abs(Ft))&&Math.abs(J-zt)<=Pi*Math.max(1,Math.abs(J),Math.abs(zt))&&Math.abs(ie-Pt)<=Pi*Math.max(1,Math.abs(ie),Math.abs(Pt))&&Math.abs(ue-jt)<=Pi*Math.max(1,Math.abs(ue),Math.abs(jt))&&Math.abs(de-Ot)<=Pi*Math.max(1,Math.abs(de),Math.abs(Ot))&&Math.abs(ge-Et)<=Pi*Math.max(1,Math.abs(ge),Math.abs(Et))&&Math.abs(Fe-an)<=Pi*Math.max(1,Math.abs(Fe),Math.abs(an))&&Math.abs(Le-Jt)<=Pi*Math.max(1,Math.abs(Le),Math.abs(Jt))&&Math.abs(Ke-In)<=Pi*Math.max(1,Math.abs(Ke),Math.abs(In))},l.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:a},{lowerSize:h,upperSize:m}){return o.kind==="source"?h/Ts:o.kind==="composite"?Jn(h/Ts,m/Ts,a):n},l.evaluateSizeForZoom=function(o,n){let a=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=o,A=m?I(vi.interpolationFactor(m,n,v,x),0,1):0;o.kind==="camera"?h=Jn(o.minSize,o.maxSize,A):a=A}return{uSizeT:a,uSize:h}},l.evaluateVariableOffset=Bx,l.evented=Ah,l.exported=Q,l.exported$1=Ne,l.extend=q,l.filterObject=$,l.fromRotation=function(o,n){var a=Math.sin(n),h=Math.cos(n);return o[0]=h,o[1]=a,o[2]=0,o[3]=-a,o[4]=h,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},l.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},l.getAnchorAlignment=qg,l.getAnchorJustification=Yg,l.getArrayBuffer=Cn,l.getImage=R,l.getJSON=function(o,n){return Pn(q(o,{type:"json"}),n)},l.getOverlapMode=ny,l.getRTLTextPluginStatus=hu,l.getReferrer=Yt,l.getVideo=function(o,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let h=0;h<o.length;h++){const m=window.document.createElement("source");mn(o[h])||(a.crossOrigin="Anonymous"),m.src=o[h],a.appendChild(m)}return{cancel:()=>{}}},l.identity=zg,l.invert=function(o,n){var a=n[0],h=n[1],m=n[2],v=n[3],x=n[4],A=n[5],M=n[6],U=n[7],J=n[8],ie=n[9],ue=n[10],de=n[11],ge=n[12],Fe=n[13],Le=n[14],Ke=n[15],rt=a*A-h*x,qe=a*M-m*x,tt=a*U-v*x,yt=h*M-m*A,gt=h*U-v*A,$t=m*U-v*M,Ht=J*Fe-ie*ge,Ft=J*Le-ue*ge,zt=J*Ke-de*ge,Pt=ie*Le-ue*Fe,jt=ie*Ke-de*Fe,Ot=ue*Ke-de*Le,Et=rt*Ot-qe*jt+tt*Pt+yt*zt-gt*Ft+$t*Ht;return Et?(o[0]=(A*Ot-M*jt+U*Pt)*(Et=1/Et),o[1]=(m*jt-h*Ot-v*Pt)*Et,o[2]=(Fe*$t-Le*gt+Ke*yt)*Et,o[3]=(ue*gt-ie*$t-de*yt)*Et,o[4]=(M*zt-x*Ot-U*Ft)*Et,o[5]=(a*Ot-m*zt+v*Ft)*Et,o[6]=(Le*tt-ge*$t-Ke*qe)*Et,o[7]=(J*$t-ue*tt+de*qe)*Et,o[8]=(x*jt-A*zt+U*Ht)*Et,o[9]=(h*zt-a*jt-v*Ht)*Et,o[10]=(ge*gt-Fe*tt+Ke*rt)*Et,o[11]=(ie*tt-J*gt-de*rt)*Et,o[12]=(A*Ft-x*Pt-M*Ht)*Et,o[13]=(a*Pt-h*Ft+m*Ht)*Et,o[14]=(Fe*qe-ge*yt-Le*rt)*Et,o[15]=(J*yt-ie*qe+ue*rt)*Et,o):null},l.isImageBitmap=be,l.isSafari=_e,l.isWorker=k,l.keysDifference=function(o,n){const a=[];for(const h in o)h in n||a.push(h);return a},l.lazyLoadRTLTextPlugin=function(){oo.isLoading()||oo.isLoaded()||hu()!=="deferred"||_d()},l.makeRequest=Pn,l.mapObject=Z,l.mercatorXfromLng=Wx,l.mercatorYfromLat=Hx,l.mercatorZfromAltitude=Xx,l.mul=PA,l.mul$1=function(o,n,a){return o[0]=n[0]*a[0],o[1]=n[1]*a[1],o[2]=n[2]*a[2],o[3]=n[3]*a[3],o},l.multiply=q1,l.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},l.normalize=function(o,n){var a=n[0],h=n[1],m=n[2],v=a*a+h*h+m*m;return v>0&&(v=1/Math.sqrt(v)),o[0]=n[0]*v,o[1]=n[1]*v,o[2]=n[2]*v,o},l.number=Jn,l.ortho=function(o,n,a,h,m,v,x){var A=1/(n-a),M=1/(h-m),U=1/(v-x);return o[0]=-2*A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*U,o[11]=0,o[12]=(n+a)*A,o[13]=(m+h)*M,o[14]=(x+v)*U,o[15]=1,o},l.parseCacheControl=G,l.parseGlyphPbf=function(o){return new Zg(o).readFields(PI,[])},l.pbf=Zg,l.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Zr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,a=o.bucket.layers[0]._unevaluatedLayout._values,h={layoutIconSize:a["icon-size"].possiblyEvaluate(new hr(o.bucket.zoom+1),o.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new hr(o.bucket.zoom+1),o.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new hr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:U}=o.bucket.textSizeData;h.compositeTextSizes=[a["text-size"].possiblyEvaluate(new hr(M),o.canonical),a["text-size"].possiblyEvaluate(new hr(U),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:U}=o.bucket.iconSizeData;h.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new hr(M),o.canonical),a["icon-size"].possiblyEvaluate(new hr(U),o.canonical)]}const m=n.get("text-line-height")*oi,v=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",x=n.get("text-keep-upright"),A=n.get("text-size");for(const M of o.bucket.features){const U=n.get("text-font").evaluate(M,{},o.canonical).join(","),J=A.evaluate(M,{},o.canonical),ie=h.layoutTextSize.evaluate(M,{},o.canonical),ue=h.layoutIconSize.evaluate(M,{},o.canonical),de={horizontal:{},vertical:void 0},ge=M.text;let Fe,Le=[0,0];if(ge){const qe=ge.toString(),tt=n.get("text-letter-spacing").evaluate(M,{},o.canonical)*oi,yt=sl(qe)?tt:0,gt=n.get("text-anchor").evaluate(M,{},o.canonical),$t=n.get("text-variable-anchor");if(!$t){const jt=n.get("text-radial-offset").evaluate(M,{},o.canonical);Le=jt?Bx(gt,[jt*oi,Kg]):n.get("text-offset").evaluate(M,{},o.canonical).map(Ot=>Ot*oi)}let Ht=v?"center":n.get("text-justify").evaluate(M,{},o.canonical);const Ft=n.get("symbol-placement"),zt=Ft==="point"?n.get("text-max-width").evaluate(M,{},o.canonical)*oi:0,Pt=()=>{o.bucket.allowVerticalPlacement&&vs(qe)&&(de.vertical=Fd(ge,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,gt,"left",yt,Le,l.WritingMode.vertical,!0,Ft,ie,J))};if(!v&&$t){const jt=Ht==="auto"?$t.map(Et=>Yg(Et)):[Ht];let Ot=!1;for(let Et=0;Et<jt.length;Et++){const an=jt[Et];if(!de.horizontal[an])if(Ot)de.horizontal[an]=de.horizontal[0];else{const Jt=Fd(ge,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,"center",an,yt,Le,l.WritingMode.horizontal,!1,Ft,ie,J);Jt&&(de.horizontal[an]=Jt,Ot=Jt.positionedLines.length===1)}}Pt()}else{Ht==="auto"&&(Ht=Yg(gt));const jt=Fd(ge,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,gt,Ht,yt,Le,l.WritingMode.horizontal,!1,Ft,ie,J);jt&&(de.horizontal[Ht]=jt),Pt(),vs(qe)&&v&&x&&(de.vertical=Fd(ge,o.glyphMap,o.glyphPositions,o.imagePositions,U,zt,m,gt,Ht,yt,Le,l.WritingMode.vertical,!1,Ft,ie,J))}}let Ke=!1;if(M.icon&&M.icon.name){const qe=o.imageMap[M.icon.name];qe&&(Fe=OI(o.imagePositions[M.icon.name],n.get("icon-offset").evaluate(M,{},o.canonical),n.get("icon-anchor").evaluate(M,{},o.canonical)),Ke=!!qe.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Ke:o.bucket.sdfIcons!==Ke&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const rt=Ux(de.horizontal)||de.vertical;o.bucket.iconsInText=!!rt&&rt.iconsInText,(rt||Fe)&&$I(o.bucket,M,de,Fe,o.imageMap,h,ie,ue,Le,Ke,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},l.perspective=function(o,n,a,h,m){var v,x=1/Math.tan(n/2);return o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+h)*(v=1/(h-m)),o[14]=2*m*h*v):(o[10]=-1,o[14]=-2*h),o},l.pick=function(o,n){const a={};for(let h=0;h<n.length;h++){const m=n[h];m in o&&(a[m]=o[m])}return a},l.plugin=oo,l.pointGeometry=re,l.polygonIntersectsPolygon=G1,l.potpack=Ex,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=Tt,l.registerForPluginStateChange=function(o){return o({pluginStatus:Ai,pluginURL:Ba}),Ah.on("pluginStateChange",o),o},l.renderColorRamp=nx,l.rotateX=function(o,n,a){var h=Math.sin(a),m=Math.cos(a),v=n[4],x=n[5],A=n[6],M=n[7],U=n[8],J=n[9],ie=n[10],ue=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*m+U*h,o[5]=x*m+J*h,o[6]=A*m+ie*h,o[7]=M*m+ue*h,o[8]=U*m-v*h,o[9]=J*m-x*h,o[10]=ie*m-A*h,o[11]=ue*m-M*h,o},l.rotateZ=function(o,n,a){var h=Math.sin(a),m=Math.cos(a),v=n[0],x=n[1],A=n[2],M=n[3],U=n[4],J=n[5],ie=n[6],ue=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*m+U*h,o[1]=x*m+J*h,o[2]=A*m+ie*h,o[3]=M*m+ue*h,o[4]=U*m-v*h,o[5]=J*m-x*h,o[6]=ie*m-A*h,o[7]=ue*m-M*h,o},l.scale=function(o,n,a){var h=a[0],m=a[1],v=a[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*m,o[5]=n[5]*m,o[6]=n[6]*m,o[7]=n[7]*m,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},l.scale$1=function(o,n,a){return o[0]=n[0]*a,o[1]=n[1]*a,o[2]=n[2]*a,o},l.setCacheLimits=function(o,n){De=o,Pe=n},l.setRTLTextPlugin=function(o,n,a=!1){if(Ai===Eh||Ai===Sh||Ai===Th)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ba=Q.resolveURL(o),Ai=Eh,Ch=n,ll(),a||_d()},l.spec=P,l.sphericalToCartesian=function([o,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(a),y:o*Math.sin(n)*Math.sin(a),z:o*Math.cos(a)}},l.sqrLen=function(o){var n=o[0],a=o[1];return n*n+a*a},l.sub=function(o,n,a){return o[0]=n[0]-a[0],o[1]=n[1]-a[1],o[2]=n[2]-a[2],o},l.toEvaluationFeature=gu,l.transformMat3=function(o,n,a){var h=n[0],m=n[1],v=n[2];return o[0]=h*a[0]+m*a[3]+v*a[6],o[1]=h*a[1]+m*a[4]+v*a[7],o[2]=h*a[2]+m*a[5]+v*a[8],o},l.transformMat4=Id,l.transformMat4$1=function(o,n,a){var h=n[0],m=n[1];return o[0]=a[0]*h+a[4]*m+a[12],o[1]=a[1]*h+a[5]*m+a[13],o},l.translate=function(o,n,a){var h,m,v,x,A,M,U,J,ie,ue,de,ge,Fe=a[0],Le=a[1],Ke=a[2];return n===o?(o[12]=n[0]*Fe+n[4]*Le+n[8]*Ke+n[12],o[13]=n[1]*Fe+n[5]*Le+n[9]*Ke+n[13],o[14]=n[2]*Fe+n[6]*Le+n[10]*Ke+n[14],o[15]=n[3]*Fe+n[7]*Le+n[11]*Ke+n[15]):(m=n[1],v=n[2],x=n[3],A=n[4],M=n[5],U=n[6],J=n[7],ie=n[8],ue=n[9],de=n[10],ge=n[11],o[0]=h=n[0],o[1]=m,o[2]=v,o[3]=x,o[4]=A,o[5]=M,o[6]=U,o[7]=J,o[8]=ie,o[9]=ue,o[10]=de,o[11]=ge,o[12]=h*Fe+A*Le+ie*Ke+n[12],o[13]=m*Fe+M*Le+ue*Ke+n[13],o[14]=v*Fe+U*Le+de*Ke+n[14],o[15]=x*Fe+J*Le+ge*Ke+n[15]),o},l.triggerPluginCompletionEvent=vd,l.unicodeBlockLookup=kt,l.uniqueId=function(){return H++},l.validateCustomStyleLayer=function(o){const n=[],a=o.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=Xt,l.validateStyle=St,l.vectorTile=fl,l.warnOnce=V,l.wrap=j}),f(["./shared"],function(l){function w(Ce){const X=typeof Ce;if(X==="number"||X==="boolean"||X==="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){let Ee="[";for(const je of Ce)Ee+=`${w(je)},`;return`${Ee}]`}const ae=Object.keys(Ce).sort();let ve="{";for(let Ee=0;Ee<ae.length;Ee++)ve+=`${JSON.stringify(ae[Ee])}:${w(Ce[ae[Ee]])},`;return`${ve}}`}function E(Ce){let X="";for(const ae of l.refProperties)X+=`/${w(Ce[ae])}`;return X}class T{constructor(X){this.keyCache={},X&&this.replace(X)}replace(X){this._layerConfigs={},this._layers={},this.update(X,[])}update(X,ae){for(const Ee of X){this._layerConfigs[Ee.id]=Ee;const je=this._layers[Ee.id]=l.createStyleLayer(Ee);je._featureFilter=l.createFilter(je.filter),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id]}for(const Ee of ae)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const ve=function(Ee,je){const Ze={};for(let Oe=0;Oe<Ee.length;Oe++){const He=je&&je[Ee[Oe].id]||E(Ee[Oe]);je&&(je[Ee[Oe].id]=He);let st=Ze[He];st||(st=Ze[He]=[]),st.push(Ee[Oe])}const Ue=[];for(const Oe in Ze)Ue.push(Ze[Oe]);return Ue}(Object.values(this._layerConfigs),this.keyCache);for(const Ee of ve){const je=Ee.map(xt=>this._layers[xt.id]),Ze=je[0];if(Ze.visibility==="none")continue;const Ue=Ze.source||"";let Oe=this.familiesBySource[Ue];Oe||(Oe=this.familiesBySource[Ue]={});const He=Ze.sourceLayer||"_geojsonTileLayer";let st=Oe[He];st||(st=Oe[He]=[]),st.push(je)}}}class S{constructor(X){const ae={},ve=[];for(const Ue in X){const Oe=X[Ue],He=ae[Ue]={};for(const st in Oe){const xt=Oe[+st];if(!xt||xt.bitmap.width===0||xt.bitmap.height===0)continue;const at={x:0,y:0,w:xt.bitmap.width+2,h:xt.bitmap.height+2};ve.push(at),He[st]={rect:at,metrics:xt.metrics}}}const{w:Ee,h:je}=l.potpack(ve),Ze=new l.AlphaImage({width:Ee||1,height:je||1});for(const Ue in X){const Oe=X[Ue];for(const He in Oe){const st=Oe[+He];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const xt=ae[Ue][He].rect;l.AlphaImage.copy(st.bitmap,Ze,{x:0,y:0},{x:xt.x+1,y:xt.y+1},st.bitmap)}}this.image=Ze,this.positions=ae}}l.register("GlyphAtlas",S);class I{constructor(X){this.tileID=new l.OverscaledTileID(X.tileID.overscaledZ,X.tileID.wrap,X.tileID.canonical.z,X.tileID.canonical.x,X.tileID.canonical.y),this.uid=X.uid,this.zoom=X.zoom,this.pixelRatio=X.pixelRatio,this.tileSize=X.tileSize,this.source=X.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=X.showCollisionBoxes,this.collectResourceTiming=!!X.collectResourceTiming,this.returnDependencies=!!X.returnDependencies,this.promoteId=X.promoteId}parse(X,ae,ve,Ee,je){this.status="parsing",this.data=X,this.collisionBoxArray=new l.CollisionBoxArray;const Ze=new l.DictionaryCoder(Object.keys(X.layers).sort()),Ue=new l.FeatureIndex(this.tileID,this.promoteId);Ue.bucketLayerIDs=[];const Oe={},He={featureIndex:Ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ve},st=ae.familiesBySource[this.source];for(const ln in st){const bn=X.layers[ln];if(!bn)continue;bn.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${ln}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Rn=Ze.encode(ln),Hn=[];for(let Or=0;Or<bn.length;Or++){const or=bn.feature(Or),lr=Ue.getId(or,ln);Hn.push({feature:or,id:lr,index:Or,sourceLayerIndex:Rn})}for(const Or of st[ln]){const or=Or[0];or.source!==this.source&&l.warnOnce(`layer.source = ${or.source} does not equal this.source = ${this.source}`),or.minzoom&&this.zoom<Math.floor(or.minzoom)||or.maxzoom&&this.zoom>=or.maxzoom||or.visibility!=="none"&&(j(Or,this.zoom,ve),(Oe[or.id]=or.createBucket({index:Ue.bucketLayerIDs.length,layers:Or,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rn,sourceID:this.source})).populate(Hn,He,this.tileID.canonical),Ue.bucketLayerIDs.push(Or.map(lr=>lr.id)))}}let xt,at,Zt,Wt;const Rt=l.mapObject(He.glyphDependencies,ln=>Object.keys(ln).map(Number));Object.keys(Rt).length?Ee.send("getGlyphs",{uid:this.uid,stacks:Rt},(ln,bn)=>{xt||(xt=ln,at=bn,Gt.call(this))}):at={};const rn=Object.keys(He.iconDependencies);rn.length?Ee.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},(ln,bn)=>{xt||(xt=ln,Zt=bn,Gt.call(this))}):Zt={};const pn=Object.keys(He.patternDependencies);function Gt(){if(xt)return je(xt);if(at&&Zt&&Wt){const ln=new S(at),bn=new l.ImageAtlas(Zt,Wt);for(const Rn in Oe){const Hn=Oe[Rn];Hn instanceof l.SymbolBucket?(j(Hn.layers,this.zoom,ve),l.performSymbolLayout({bucket:Hn,glyphMap:at,glyphPositions:ln.positions,imageMap:Zt,imagePositions:bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Hn.hasPattern&&(Hn instanceof l.LineBucket||Hn instanceof l.FillBucket||Hn instanceof l.FillExtrusionBucket)&&(j(Hn.layers,this.zoom,ve),Hn.addFeatures(He,this.tileID.canonical,bn.patternPositions))}this.status="done",je(null,{buckets:Object.values(Oe).filter(Rn=>!Rn.isEmpty()),featureIndex:Ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ln.image,imageAtlas:bn,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?Zt:null,glyphPositions:this.returnDependencies?ln.positions:null})}}pn.length?Ee.send("getImages",{icons:pn,source:this.source,tileID:this.tileID,type:"patterns"},(ln,bn)=>{xt||(xt=ln,Wt=bn,Gt.call(this))}):Wt={},Gt.call(this)}}function j(Ce,X,ae){const ve=new l.EvaluationParameters(X);for(const Ee of Ce)Ee.recalculate(ve,ae)}function q(Ce,X){const ae=l.getArrayBuffer(Ce.request,(ve,Ee,je,Ze)=>{ve?X(ve):Ee&&X(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(Ee)),rawData:Ee,cacheControl:je,expires:Ze})});return()=>{ae.cancel(),X()}}class H{constructor(X,ae,ve,Ee){this.actor=X,this.layerIndex=ae,this.availableImages=ve,this.loadVectorData=Ee||q,this.loading={},this.loaded={}}loadTile(X,ae){const ve=X.uid;this.loading||(this.loading={});const Ee=!!(X&&X.request&&X.request.collectResourceTiming)&&new l.RequestPerformance(X.request),je=this.loading[ve]=new I(X);je.abort=this.loadVectorData(X,(Ze,Ue)=>{if(delete this.loading[ve],Ze||!Ue)return je.status="done",this.loaded[ve]=je,ae(Ze);const Oe=Ue.rawData,He={};Ue.expires&&(He.expires=Ue.expires),Ue.cacheControl&&(He.cacheControl=Ue.cacheControl);const st={};if(Ee){const xt=Ee.finish();xt&&(st.resourceTiming=JSON.parse(JSON.stringify(xt)))}je.vectorTile=Ue.vectorTile,je.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,(xt,at)=>{if(xt||!at)return ae(xt);ae(null,l.extend({rawTileData:Oe.slice(0)},at,He,st))}),this.loaded=this.loaded||{},this.loaded[ve]=je})}reloadTile(X,ae){const ve=this.loaded,Ee=X.uid,je=this;if(ve&&ve[Ee]){const Ze=ve[Ee];Ze.showCollisionBoxes=X.showCollisionBoxes;const Ue=(Oe,He)=>{const st=Ze.reloadCallback;st&&(delete Ze.reloadCallback,Ze.parse(Ze.vectorTile,je.layerIndex,this.availableImages,je.actor,st)),ae(Oe,He)};Ze.status==="parsing"?Ze.reloadCallback=Ue:Ze.status==="done"&&(Ze.vectorTile?Ze.parse(Ze.vectorTile,this.layerIndex,this.availableImages,this.actor,Ue):Ue())}}abortTile(X,ae){const ve=this.loading,Ee=X.uid;ve&&ve[Ee]&&ve[Ee].abort&&(ve[Ee].abort(),delete ve[Ee]),ae()}removeTile(X,ae){const ve=this.loaded,Ee=X.uid;ve&&ve[Ee]&&delete ve[Ee],ae()}}class fe{constructor(){this.loaded={}}loadTile(X,ae){const{uid:ve,encoding:Ee,rawImageData:je}=X,Ze=l.isImageBitmap(je)?this.getImageData(je):je,Ue=new l.DEMData(ve,Ze,Ee);this.loaded=this.loaded||{},this.loaded[ve]=Ue,ae(null,Ue)}getImageData(X){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(X.width,X.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=X.width,this.offscreenCanvas.height=X.height,this.offscreenCanvasContext.drawImage(X,0,0,X.width,X.height);const ae=this.offscreenCanvasContext.getImageData(-1,-1,X.width+2,X.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:ae.width,height:ae.height},ae.data)}removeTile(X){const ae=this.loaded,ve=X.uid;ae&&ae[ve]&&delete ae[ve]}}var Z=function Ce(X,ae){var ve,Ee=X&&X.type;if(Ee==="FeatureCollection")for(ve=0;ve<X.features.length;ve++)Ce(X.features[ve],ae);else if(Ee==="GeometryCollection")for(ve=0;ve<X.geometries.length;ve++)Ce(X.geometries[ve],ae);else if(Ee==="Feature")Ce(X.geometry,ae);else if(Ee==="Polygon")$(X.coordinates,ae);else if(Ee==="MultiPolygon")for(ve=0;ve<X.coordinates.length;ve++)$(X.coordinates[ve],ae);return X};function $(Ce,X){if(Ce.length!==0){N(Ce[0],X);for(var ae=1;ae<Ce.length;ae++)N(Ce[ae],!X)}}function N(Ce,X){for(var ae=0,ve=0,Ee=0,je=Ce.length,Ze=je-1;Ee<je;Ze=Ee++){var Ue=(Ce[Ee][0]-Ce[Ze][0])*(Ce[Ze][1]+Ce[Ee][1]),Oe=ae+Ue;ve+=Math.abs(ae)>=Math.abs(Ue)?ae-Oe+Ue:Ue-Oe+ae,ae=Oe}ae+ve>=0!=!!X&&Ce.reverse()}const oe=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class V{constructor(X){this._feature=X,this.extent=l.EXTENT,this.type=X.type,this.properties=X.tags,"id"in X&&!isNaN(X.id)&&(this.id=parseInt(X.id,10))}loadGeometry(){if(this._feature.type===1){const X=[];for(const ae of this._feature.geometry)X.push([new l.pointGeometry(ae[0],ae[1])]);return X}{const X=[];for(const ae of this._feature.geometry){const ve=[];for(const Ee of ae)ve.push(new l.pointGeometry(Ee[0],Ee[1]));X.push(ve)}return X}}toGeoJSON(X,ae,ve){return oe.call(this,X,ae,ve)}}class D{constructor(X){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=X.length,this._features=X}feature(X){return new V(this._features[X])}}var b={exports:{}},k=l.pointGeometry,G=l.vectorTile.VectorTileFeature,Y=K;function K(Ce,X){this.options=X||{},this.features=Ce,this.length=Ce.length}function pe(Ce,X){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=X||4096}K.prototype.feature=function(Ce){return new pe(this.features[Ce],this.options.extent)},pe.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var X=0;X<Ce.length;X++){for(var ae=Ce[X],ve=[],Ee=0;Ee<ae.length;Ee++)ve.push(new k(ae[Ee][0],ae[Ee][1]));this.geometry.push(ve)}return this.geometry},pe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,X=1/0,ae=-1/0,ve=1/0,Ee=-1/0,je=0;je<Ce.length;je++)for(var Ze=Ce[je],Ue=0;Ue<Ze.length;Ue++){var Oe=Ze[Ue];X=Math.min(X,Oe.x),ae=Math.max(ae,Oe.x),ve=Math.min(ve,Oe.y),Ee=Math.max(Ee,Oe.y)}return[X,ve,ae,Ee]},pe.prototype.toGeoJSON=G.prototype.toGeoJSON;var _e=l.pbf,be=Y;function Q(Ce){var X=new _e;return function(ae,ve){for(var Ee in ae.layers)ve.writeMessage(3,re,ae.layers[Ee])}(Ce,X),X.finish()}function re(Ce,X){var ae;X.writeVarintField(15,Ce.version||1),X.writeStringField(1,Ce.name||""),X.writeVarintField(5,Ce.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(ae=0;ae<Ce.length;ae++)ve.feature=Ce.feature(ae),X.writeMessage(2,ne,ve);var Ee=ve.keys;for(ae=0;ae<Ee.length;ae++)X.writeStringField(3,Ee[ae]);var je=ve.values;for(ae=0;ae<je.length;ae++)X.writeMessage(4,De,je[ae])}function ne(Ce,X){var ae=Ce.feature;ae.id!==void 0&&X.writeVarintField(1,ae.id),X.writeMessage(2,te,Ce),X.writeVarintField(3,ae.type),X.writeMessage(4,we,ae)}function te(Ce,X){var ae=Ce.feature,ve=Ce.keys,Ee=Ce.values,je=Ce.keycache,Ze=Ce.valuecache;for(var Ue in ae.properties){var Oe=ae.properties[Ue],He=je[Ue];if(Oe!==null){He===void 0&&(ve.push(Ue),je[Ue]=He=ve.length-1),X.writeVarint(He);var st=typeof Oe;st!=="string"&&st!=="boolean"&&st!=="number"&&(Oe=JSON.stringify(Oe));var xt=st+":"+Oe,at=Ze[xt];at===void 0&&(Ee.push(Oe),Ze[xt]=at=Ee.length-1),X.writeVarint(at)}}}function ce(Ce,X){return(X<<3)+(7&Ce)}function xe(Ce){return Ce<<1^Ce>>31}function we(Ce,X){for(var ae=Ce.loadGeometry(),ve=Ce.type,Ee=0,je=0,Ze=ae.length,Ue=0;Ue<Ze;Ue++){var Oe=ae[Ue],He=1;ve===1&&(He=Oe.length),X.writeVarint(ce(1,He));for(var st=ve===3?Oe.length-1:Oe.length,xt=0;xt<st;xt++){xt===1&&ve!==1&&X.writeVarint(ce(2,st-1));var at=Oe[xt].x-Ee,Zt=Oe[xt].y-je;X.writeVarint(xe(at)),X.writeVarint(xe(Zt)),Ee+=at,je+=Zt}ve===3&&X.writeVarint(ce(7,1))}}function De(Ce,X){var ae=typeof Ce;ae==="string"?X.writeStringField(1,Ce):ae==="boolean"?X.writeBooleanField(7,Ce):ae==="number"&&(Ce%1!=0?X.writeDoubleField(3,Ce):Ce<0?X.writeSVarintField(6,Ce):X.writeVarintField(5,Ce))}function Pe(Ce,X,ae,ve,Ee,je){if(Ee-ve<=ae)return;const Ze=ve+Ee>>1;Me(Ce,X,Ze,ve,Ee,je%2),Pe(Ce,X,ae,ve,Ze-1,je+1),Pe(Ce,X,ae,Ze+1,Ee,je+1)}function Me(Ce,X,ae,ve,Ee,je){for(;Ee>ve;){if(Ee-ve>600){const He=Ee-ve+1,st=ae-ve+1,xt=Math.log(He),at=.5*Math.exp(2*xt/3),Zt=.5*Math.sqrt(xt*at*(He-at)/He)*(st-He/2<0?-1:1);Me(Ce,X,ae,Math.max(ve,Math.floor(ae-st*at/He+Zt)),Math.min(Ee,Math.floor(ae+(He-st)*at/He+Zt)),je)}const Ze=X[2*ae+je];let Ue=ve,Oe=Ee;for(Ve(Ce,X,ve,ae),X[2*Ee+je]>Ze&&Ve(Ce,X,ve,Ee);Ue<Oe;){for(Ve(Ce,X,Ue,Oe),Ue++,Oe--;X[2*Ue+je]<Ze;)Ue++;for(;X[2*Oe+je]>Ze;)Oe--}X[2*ve+je]===Ze?Ve(Ce,X,ve,Oe):(Oe++,Ve(Ce,X,Oe,Ee)),Oe<=ae&&(ve=Oe+1),ae<=Oe&&(Ee=Oe-1)}}function Ve(Ce,X,ae,ve){Ne(Ce,ae,ve),Ne(X,2*ae,2*ve),Ne(X,2*ae+1,2*ve+1)}function Ne(Ce,X,ae){const ve=Ce[X];Ce[X]=Ce[ae],Ce[ae]=ve}function Qe(Ce,X,ae,ve){const Ee=Ce-ae,je=X-ve;return Ee*Ee+je*je}b.exports=Q,b.exports.fromVectorTileJs=Q,b.exports.fromGeojsonVt=function(Ce,X){X=X||{};var ae={};for(var ve in Ce)ae[ve]=new be(Ce[ve].features,X),ae[ve].name=ve,ae[ve].version=X.version,ae[ve].extent=X.extent;return Q({layers:ae})},b.exports.GeoJSONWrapper=be;const ct=Ce=>Ce[0],mt=Ce=>Ce[1];class Lt{constructor(X,ae=ct,ve=mt,Ee=64,je=Float64Array){this.nodeSize=Ee,this.points=X;const Ze=X.length<65536?Uint16Array:Uint32Array,Ue=this.ids=new Ze(X.length),Oe=this.coords=new je(2*X.length);for(let He=0;He<X.length;He++)Ue[He]=He,Oe[2*He]=ae(X[He]),Oe[2*He+1]=ve(X[He]);Pe(Ue,Oe,Ee,0,Ue.length-1,0)}range(X,ae,ve,Ee){return function(je,Ze,Ue,Oe,He,st,xt){const at=[0,je.length-1,0],Zt=[];let Wt,Rt;for(;at.length;){const rn=at.pop(),pn=at.pop(),Gt=at.pop();if(pn-Gt<=xt){for(let Rn=Gt;Rn<=pn;Rn++)Wt=Ze[2*Rn],Rt=Ze[2*Rn+1],Wt>=Ue&&Wt<=He&&Rt>=Oe&&Rt<=st&&Zt.push(je[Rn]);continue}const ln=Math.floor((Gt+pn)/2);Wt=Ze[2*ln],Rt=Ze[2*ln+1],Wt>=Ue&&Wt<=He&&Rt>=Oe&&Rt<=st&&Zt.push(je[ln]);const bn=(rn+1)%2;(rn===0?Ue<=Wt:Oe<=Rt)&&(at.push(Gt),at.push(ln-1),at.push(bn)),(rn===0?He>=Wt:st>=Rt)&&(at.push(ln+1),at.push(pn),at.push(bn))}return Zt}(this.ids,this.coords,X,ae,ve,Ee,this.nodeSize)}within(X,ae,ve){return function(Ee,je,Ze,Ue,Oe,He){const st=[0,Ee.length-1,0],xt=[],at=Oe*Oe;for(;st.length;){const Zt=st.pop(),Wt=st.pop(),Rt=st.pop();if(Wt-Rt<=He){for(let bn=Rt;bn<=Wt;bn++)Qe(je[2*bn],je[2*bn+1],Ze,Ue)<=at&&xt.push(Ee[bn]);continue}const rn=Math.floor((Rt+Wt)/2),pn=je[2*rn],Gt=je[2*rn+1];Qe(pn,Gt,Ze,Ue)<=at&&xt.push(Ee[rn]);const ln=(Zt+1)%2;(Zt===0?Ze-Oe<=pn:Ue-Oe<=Gt)&&(st.push(Rt),st.push(rn-1),st.push(ln)),(Zt===0?Ze+Oe>=pn:Ue+Oe>=Gt)&&(st.push(rn+1),st.push(Wt),st.push(ln))}return xt}(this.ids,this.coords,X,ae,ve,this.nodeSize)}}const dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},bt=Math.fround||(Nt=new Float32Array(1),Ce=>(Nt[0]=+Ce,Nt[0]));var Nt;class Yt{constructor(X){this.options=R(Object.create(dt),X),this.trees=new Array(this.options.maxZoom+1)}load(X){const{log:ae,minZoom:ve,maxZoom:Ee,nodeSize:je}=this.options;ae&&console.time("total time");const Ze=`prepare ${X.length} points`;ae&&console.time(Ze),this.points=X;let Ue=[];for(let Oe=0;Oe<X.length;Oe++)X[Oe].geometry&&Ue.push(Pn(X[Oe],Oe));this.trees[Ee+1]=new Lt(Ue,ye,$e,je,Float32Array),ae&&console.timeEnd(Ze);for(let Oe=Ee;Oe>=ve;Oe--){const He=+Date.now();Ue=this._cluster(Ue,Oe),this.trees[Oe]=new Lt(Ue,ye,$e,je,Float32Array),ae&&console.log("z%d: %d clusters in %dms",Oe,Ue.length,+Date.now()-He)}return ae&&console.timeEnd("total time"),this}getClusters(X,ae){let ve=((X[0]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,X[1]));let je=X[2]===180?180:((X[2]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)ve=-180,je=180;else if(ve>je){const st=this.getClusters([ve,Ee,180,Ze],ae),xt=this.getClusters([-180,Ee,je,Ze],ae);return st.concat(xt)}const Ue=this.trees[this._limitZoom(ae)],Oe=Ue.range(Vt(ve),Te(Ze),Vt(je),Te(Ee)),He=[];for(const st of Oe){const xt=Ue.points[st];He.push(xt.numPoints?Cn(xt):this.points[xt.index])}return He}getChildren(X){const ae=this._getOriginId(X),ve=this._getOriginZoom(X),Ee="No cluster with the specified id.",je=this.trees[ve];if(!je)throw new Error(Ee);const Ze=je.points[ae];if(!Ze)throw new Error(Ee);const Ue=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),Oe=je.within(Ze.x,Ze.y,Ue),He=[];for(const st of Oe){const xt=je.points[st];xt.parentId===X&&He.push(xt.numPoints?Cn(xt):this.points[xt.index])}if(He.length===0)throw new Error(Ee);return He}getLeaves(X,ae,ve){const Ee=[];return this._appendLeaves(Ee,X,ae=ae||10,ve=ve||0,0),Ee}getTile(X,ae,ve){const Ee=this.trees[this._limitZoom(X)],je=Math.pow(2,X),{extent:Ze,radius:Ue}=this.options,Oe=Ue/Ze,He=(ve-Oe)/je,st=(ve+1+Oe)/je,xt={features:[]};return this._addTileFeatures(Ee.range((ae-Oe)/je,He,(ae+1+Oe)/je,st),Ee.points,ae,ve,je,xt),ae===0&&this._addTileFeatures(Ee.range(1-Oe/je,He,1,st),Ee.points,je,ve,je,xt),ae===je-1&&this._addTileFeatures(Ee.range(0,He,Oe/je,st),Ee.points,-1,ve,je,xt),xt.features.length?xt:null}getClusterExpansionZoom(X){let ae=this._getOriginZoom(X)-1;for(;ae<=this.options.maxZoom;){const ve=this.getChildren(X);if(ae++,ve.length!==1)break;X=ve[0].properties.cluster_id}return ae}_appendLeaves(X,ae,ve,Ee,je){const Ze=this.getChildren(ae);for(const Ue of Ze){const Oe=Ue.properties;if(Oe&&Oe.cluster?je+Oe.point_count<=Ee?je+=Oe.point_count:je=this._appendLeaves(X,Oe.cluster_id,ve,Ee,je):je<Ee?je++:X.push(Ue),X.length===ve)break}return je}_addTileFeatures(X,ae,ve,Ee,je,Ze){for(const Ue of X){const Oe=ae[Ue],He=Oe.numPoints;let st,xt,at;if(He)st=mn(Oe),xt=Oe.x,at=Oe.y;else{const Rt=this.points[Oe.index];st=Rt.properties,xt=Vt(Rt.geometry.coordinates[0]),at=Te(Rt.geometry.coordinates[1])}const Zt={type:1,geometry:[[Math.round(this.options.extent*(xt*je-ve)),Math.round(this.options.extent*(at*je-Ee))]],tags:st};let Wt;He?Wt=Oe.id:this.options.generateId?Wt=Oe.index:this.points[Oe.index].id&&(Wt=this.points[Oe.index].id),Wt!==void 0&&(Zt.id=Wt),Ze.features.push(Zt)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,ae){const ve=[],{radius:Ee,extent:je,reduce:Ze,minPoints:Ue}=this.options,Oe=Ee/(je*Math.pow(2,ae));for(let He=0;He<X.length;He++){const st=X[He];if(st.zoom<=ae)continue;st.zoom=ae;const xt=this.trees[ae+1],at=xt.within(st.x,st.y,Oe),Zt=st.numPoints||1;let Wt=Zt;for(const Rt of at){const rn=xt.points[Rt];rn.zoom>ae&&(Wt+=rn.numPoints||1)}if(Wt>Zt&&Wt>=Ue){let Rt=st.x*Zt,rn=st.y*Zt,pn=Ze&&Zt>1?this._map(st,!0):null;const Gt=(He<<5)+(ae+1)+this.points.length;for(const ln of at){const bn=xt.points[ln];if(bn.zoom<=ae)continue;bn.zoom=ae;const Rn=bn.numPoints||1;Rt+=bn.x*Rn,rn+=bn.y*Rn,bn.parentId=Gt,Ze&&(pn||(pn=this._map(st,!0)),Ze(pn,this._map(bn)))}st.parentId=Gt,ve.push(dn(Rt/Wt,rn/Wt,Gt,Wt,pn))}else if(ve.push(st),Wt>1)for(const Rt of at){const rn=xt.points[Rt];rn.zoom<=ae||(rn.zoom=ae,ve.push(rn))}}return ve}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,ae){if(X.numPoints)return ae?R({},X.properties):X.properties;const ve=this.points[X.index].properties,Ee=this.options.map(ve);return ae&&Ee===ve?R({},Ee):Ee}}function dn(Ce,X,ae,ve,Ee){return{x:bt(Ce),y:bt(X),zoom:1/0,id:ae,parentId:-1,numPoints:ve,properties:Ee}}function Pn(Ce,X){const[ae,ve]=Ce.geometry.coordinates;return{x:bt(Vt(ae)),y:bt(Te(ve)),zoom:1/0,index:X,parentId:-1}}function Cn(Ce){return{type:"Feature",id:Ce.id,properties:mn(Ce),geometry:{type:"Point",coordinates:[(X=Ce.x,360*(X-.5)),F(Ce.y)]}};var X}function mn(Ce){const X=Ce.numPoints,ae=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X;return R(R({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:X,point_count_abbreviated:ae})}function Vt(Ce){return Ce/360+.5}function Te(Ce){const X=Math.sin(Ce*Math.PI/180),ae=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return ae<0?0:ae>1?1:ae}function F(Ce){const X=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function R(Ce,X){for(const ae in X)Ce[ae]=X[ae];return Ce}function ye(Ce){return Ce.x}function $e(Ce){return Ce.y}function Ye(Ce,X,ae,ve){for(var Ee,je=ve,Ze=ae-X>>1,Ue=ae-X,Oe=Ce[X],He=Ce[X+1],st=Ce[ae],xt=Ce[ae+1],at=X+3;at<ae;at+=3){var Zt=ut(Ce[at],Ce[at+1],Oe,He,st,xt);if(Zt>je)Ee=at,je=Zt;else if(Zt===je){var Wt=Math.abs(at-Ze);Wt<Ue&&(Ee=at,Ue=Wt)}}je>ve&&(Ee-X>3&&Ye(Ce,X,Ee,ve),Ce[Ee+2]=je,ae-Ee>3&&Ye(Ce,Ee,ae,ve))}function ut(Ce,X,ae,ve,Ee,je){var Ze=Ee-ae,Ue=je-ve;if(Ze!==0||Ue!==0){var Oe=((Ce-ae)*Ze+(X-ve)*Ue)/(Ze*Ze+Ue*Ue);Oe>1?(ae=Ee,ve=je):Oe>0&&(ae+=Ze*Oe,ve+=Ue*Oe)}return(Ze=Ce-ae)*Ze+(Ue=X-ve)*Ue}function se(Ce,X,ae,ve){var Ee={id:Ce===void 0?null:Ce,type:X,geometry:ae,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(je){var Ze=je.geometry,Ue=je.type;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")P(je,Ze);else if(Ue==="Polygon"||Ue==="MultiLineString")for(var Oe=0;Oe<Ze.length;Oe++)P(je,Ze[Oe]);else if(Ue==="MultiPolygon")for(Oe=0;Oe<Ze.length;Oe++)for(var He=0;He<Ze[Oe].length;He++)P(je,Ze[Oe][He])}(Ee),Ee}function P(Ce,X){for(var ae=0;ae<X.length;ae+=3)Ce.minX=Math.min(Ce.minX,X[ae]),Ce.minY=Math.min(Ce.minY,X[ae+1]),Ce.maxX=Math.max(Ce.maxX,X[ae]),Ce.maxY=Math.max(Ce.maxY,X[ae+1])}function L(Ce,X,ae,ve){if(X.geometry){var Ee=X.geometry.coordinates,je=X.geometry.type,Ze=Math.pow(ae.tolerance/((1<<ae.maxZoom)*ae.extent),2),Ue=[],Oe=X.id;if(ae.promoteId?Oe=X.properties[ae.promoteId]:ae.generateId&&(Oe=ve||0),je==="Point")Se(Ee,Ue);else if(je==="MultiPoint")for(var He=0;He<Ee.length;He++)Se(Ee[He],Ue);else if(je==="LineString")Be(Ee,Ue,Ze,!1);else if(je==="MultiLineString"){if(ae.lineMetrics){for(He=0;He<Ee.length;He++)Be(Ee[He],Ue=[],Ze,!1),Ce.push(se(Oe,"LineString",Ue,X.properties));return}We(Ee,Ue,Ze,!1)}else if(je==="Polygon")We(Ee,Ue,Ze,!0);else{if(je!=="MultiPolygon"){if(je==="GeometryCollection"){for(He=0;He<X.geometry.geometries.length;He++)L(Ce,{id:Oe,geometry:X.geometry.geometries[He],properties:X.properties},ae,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(He=0;He<Ee.length;He++){var st=[];We(Ee[He],st,Ze,!0),Ue.push(st)}}Ce.push(se(Oe,je,Ue,X.properties))}}function Se(Ce,X){X.push(it(Ce[0])),X.push(qt(Ce[1])),X.push(0)}function Be(Ce,X,ae,ve){for(var Ee,je,Ze=0,Ue=0;Ue<Ce.length;Ue++){var Oe=it(Ce[Ue][0]),He=qt(Ce[Ue][1]);X.push(Oe),X.push(He),X.push(0),Ue>0&&(Ze+=ve?(Ee*He-Oe*je)/2:Math.sqrt(Math.pow(Oe-Ee,2)+Math.pow(He-je,2))),Ee=Oe,je=He}var st=X.length-3;X[2]=1,Ye(X,0,st,ae),X[st+2]=1,X.size=Math.abs(Ze),X.start=0,X.end=X.size}function We(Ce,X,ae,ve){for(var Ee=0;Ee<Ce.length;Ee++){var je=[];Be(Ce[Ee],je,ae,ve),X.push(je)}}function it(Ce){return Ce/360+.5}function qt(Ce){var X=Math.sin(Ce*Math.PI/180),ae=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return ae<0?0:ae>1?1:ae}function xn(Ce,X,ae,ve,Ee,je,Ze,Ue){if(ve/=X,je>=(ae/=X)&&Ze<ve)return Ce;if(Ze<ae||je>=ve)return null;for(var Oe=[],He=0;He<Ce.length;He++){var st=Ce[He],xt=st.geometry,at=st.type,Zt=Ee===0?st.minX:st.minY,Wt=Ee===0?st.maxX:st.maxY;if(Zt>=ae&&Wt<ve)Oe.push(st);else if(!(Wt<ae||Zt>=ve)){var Rt=[];if(at==="Point"||at==="MultiPoint")Sn(xt,Rt,ae,ve,Ee);else if(at==="LineString")_t(xt,Rt,ae,ve,Ee,!1,Ue.lineMetrics);else if(at==="MultiLineString")cn(xt,Rt,ae,ve,Ee,!1);else if(at==="Polygon")cn(xt,Rt,ae,ve,Ee,!0);else if(at==="MultiPolygon")for(var rn=0;rn<xt.length;rn++){var pn=[];cn(xt[rn],pn,ae,ve,Ee,!0),pn.length&&Rt.push(pn)}if(Rt.length){if(Ue.lineMetrics&&at==="LineString"){for(rn=0;rn<Rt.length;rn++)Oe.push(se(st.id,at,Rt[rn],st.tags));continue}at!=="LineString"&&at!=="MultiLineString"||(Rt.length===1?(at="LineString",Rt=Rt[0]):at="MultiLineString"),at!=="Point"&&at!=="MultiPoint"||(at=Rt.length===3?"Point":"MultiPoint"),Oe.push(se(st.id,at,Rt,st.tags))}}}return Oe.length?Oe:null}function Sn(Ce,X,ae,ve,Ee){for(var je=0;je<Ce.length;je+=3){var Ze=Ce[je+Ee];Ze>=ae&&Ze<=ve&&(X.push(Ce[je]),X.push(Ce[je+1]),X.push(Ce[je+2]))}}function _t(Ce,X,ae,ve,Ee,je,Ze){for(var Ue,Oe,He=Dt(Ce),st=Ee===0?Ci:hn,xt=Ce.start,at=0;at<Ce.length-3;at+=3){var Zt=Ce[at],Wt=Ce[at+1],Rt=Ce[at+2],rn=Ce[at+3],pn=Ce[at+4],Gt=Ee===0?Zt:Wt,ln=Ee===0?rn:pn,bn=!1;Ze&&(Ue=Math.sqrt(Math.pow(Zt-rn,2)+Math.pow(Wt-pn,2))),Gt<ae?ln>ae&&(Oe=st(He,Zt,Wt,rn,pn,ae),Ze&&(He.start=xt+Ue*Oe)):Gt>ve?ln<ve&&(Oe=st(He,Zt,Wt,rn,pn,ve),Ze&&(He.start=xt+Ue*Oe)):mr(He,Zt,Wt,Rt),ln<ae&&Gt>=ae&&(Oe=st(He,Zt,Wt,rn,pn,ae),bn=!0),ln>ve&&Gt<=ve&&(Oe=st(He,Zt,Wt,rn,pn,ve),bn=!0),!je&&bn&&(Ze&&(He.end=xt+Ue*Oe),X.push(He),He=Dt(Ce)),Ze&&(xt+=Ue)}var Rn=Ce.length-3;Zt=Ce[Rn],Wt=Ce[Rn+1],Rt=Ce[Rn+2],(Gt=Ee===0?Zt:Wt)>=ae&&Gt<=ve&&mr(He,Zt,Wt,Rt),Rn=He.length-3,je&&Rn>=3&&(He[Rn]!==He[0]||He[Rn+1]!==He[1])&&mr(He,He[0],He[1],He[2]),He.length&&X.push(He)}function Dt(Ce){var X=[];return X.size=Ce.size,X.start=Ce.start,X.end=Ce.end,X}function cn(Ce,X,ae,ve,Ee,je){for(var Ze=0;Ze<Ce.length;Ze++)_t(Ce[Ze],X,ae,ve,Ee,je,!1)}function mr(Ce,X,ae,ve){Ce.push(X),Ce.push(ae),Ce.push(ve)}function Ci(Ce,X,ae,ve,Ee,je){var Ze=(je-X)/(ve-X);return Ce.push(je),Ce.push(ae+(Ee-ae)*Ze),Ce.push(1),Ze}function hn(Ce,X,ae,ve,Ee,je){var Ze=(je-ae)/(Ee-ae);return Ce.push(X+(ve-X)*Ze),Ce.push(je),Ce.push(1),Ze}function ir(Ce,X){for(var ae=[],ve=0;ve<Ce.length;ve++){var Ee,je=Ce[ve],Ze=je.type;if(Ze==="Point"||Ze==="MultiPoint"||Ze==="LineString")Ee=wr(je.geometry,X);else if(Ze==="MultiLineString"||Ze==="Polygon"){Ee=[];for(var Ue=0;Ue<je.geometry.length;Ue++)Ee.push(wr(je.geometry[Ue],X))}else if(Ze==="MultiPolygon")for(Ee=[],Ue=0;Ue<je.geometry.length;Ue++){for(var Oe=[],He=0;He<je.geometry[Ue].length;He++)Oe.push(wr(je.geometry[Ue][He],X));Ee.push(Oe)}ae.push(se(je.id,Ze,Ee,je.tags))}return ae}function wr(Ce,X){var ae=[];ae.size=Ce.size,Ce.start!==void 0&&(ae.start=Ce.start,ae.end=Ce.end);for(var ve=0;ve<Ce.length;ve+=3)ae.push(Ce[ve]+X,Ce[ve+1],Ce[ve+2]);return ae}function ei(Ce,X){if(Ce.transformed)return Ce;var ae,ve,Ee,je=1<<Ce.z,Ze=Ce.x,Ue=Ce.y;for(ae=0;ae<Ce.features.length;ae++){var Oe=Ce.features[ae],He=Oe.geometry,st=Oe.type;if(Oe.geometry=[],st===1)for(ve=0;ve<He.length;ve+=2)Oe.geometry.push(gr(He[ve],He[ve+1],X,je,Ze,Ue));else for(ve=0;ve<He.length;ve++){var xt=[];for(Ee=0;Ee<He[ve].length;Ee+=2)xt.push(gr(He[ve][Ee],He[ve][Ee+1],X,je,Ze,Ue));Oe.geometry.push(xt)}}return Ce.transformed=!0,Ce}function gr(Ce,X,ae,ve,Ee,je){return[Math.round(ae*(Ce*ve-Ee)),Math.round(ae*(X*ve-je))]}function yn(Ce,X,ae,ve,Ee){for(var je=X===Ee.maxZoom?0:Ee.tolerance/((1<<X)*Ee.extent),Ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ae,y:ve,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ue=0;Ue<Ce.length;Ue++){Ze.numFeatures++,Ct(Ze,Ce[Ue],je,Ee);var Oe=Ce[Ue].minX,He=Ce[Ue].minY,st=Ce[Ue].maxX,xt=Ce[Ue].maxY;Oe<Ze.minX&&(Ze.minX=Oe),He<Ze.minY&&(Ze.minY=He),st>Ze.maxX&&(Ze.maxX=st),xt>Ze.maxY&&(Ze.maxY=xt)}return Ze}function Ct(Ce,X,ae,ve){var Ee=X.geometry,je=X.type,Ze=[];if(je==="Point"||je==="MultiPoint")for(var Ue=0;Ue<Ee.length;Ue+=3)Ze.push(Ee[Ue]),Ze.push(Ee[Ue+1]),Ce.numPoints++,Ce.numSimplified++;else if(je==="LineString")sn(Ze,Ee,Ce,ae,!1,!1);else if(je==="MultiLineString"||je==="Polygon")for(Ue=0;Ue<Ee.length;Ue++)sn(Ze,Ee[Ue],Ce,ae,je==="Polygon",Ue===0);else if(je==="MultiPolygon")for(var Oe=0;Oe<Ee.length;Oe++){var He=Ee[Oe];for(Ue=0;Ue<He.length;Ue++)sn(Ze,He[Ue],Ce,ae,!0,Ue===0)}if(Ze.length){var st=X.tags||null;if(je==="LineString"&&ve.lineMetrics){for(var xt in st={},X.tags)st[xt]=X.tags[xt];st.mapbox_clip_start=Ee.start/Ee.size,st.mapbox_clip_end=Ee.end/Ee.size}var at={geometry:Ze,type:je==="Polygon"||je==="MultiPolygon"?3:je==="LineString"||je==="MultiLineString"?2:1,tags:st};X.id!==null&&(at.id=X.id),Ce.features.push(at)}}function sn(Ce,X,ae,ve,Ee,je){var Ze=ve*ve;if(ve>0&&X.size<(Ee?Ze:ve))ae.numPoints+=X.length/3;else{for(var Ue=[],Oe=0;Oe<X.length;Oe+=3)(ve===0||X[Oe+2]>Ze)&&(ae.numSimplified++,Ue.push(X[Oe]),Ue.push(X[Oe+1])),ae.numPoints++;Ee&&function(He,st){for(var xt=0,at=0,Zt=He.length,Wt=Zt-2;at<Zt;Wt=at,at+=2)xt+=(He[at]-He[Wt])*(He[at+1]+He[Wt+1]);if(xt>0===st)for(at=0,Zt=He.length;at<Zt/2;at+=2){var Rt=He[at],rn=He[at+1];He[at]=He[Zt-2-at],He[at+1]=He[Zt-1-at],He[Zt-2-at]=Rt,He[Zt-1-at]=rn}}(Ue,je),Ce.push(Ue)}}function Tn(Ce,X){var ae=(X=this.options=function(Ee,je){for(var Ze in je)Ee[Ze]=je[Ze];return Ee}(Object.create(this.options),X)).debug;if(ae&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");var ve=function(Ee,je){var Ze=[];if(Ee.type==="FeatureCollection")for(var Ue=0;Ue<Ee.features.length;Ue++)L(Ze,Ee.features[Ue],je,Ue);else L(Ze,Ee.type==="Feature"?Ee:{geometry:Ee},je);return Ze}(Ce,X);this.tiles={},this.tileCoords=[],ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ve=function(Ee,je){var Ze=je.buffer/je.extent,Ue=Ee,Oe=xn(Ee,1,-1-Ze,Ze,0,-1,2,je),He=xn(Ee,1,1-Ze,2+Ze,0,-1,2,je);return(Oe||He)&&(Ue=xn(Ee,1,-Ze,1+Ze,0,-1,2,je)||[],Oe&&(Ue=ir(Oe,1).concat(Ue)),He&&(Ue=Ue.concat(ir(He,-1)))),Ue}(ve,X),ve.length&&this.splitTile(ve,0,0,0),ae&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function yr(Ce,X,ae){return 32*((1<<Ce)*ae+X)+Ce}function vr(Ce,X){const ae=Ce.tileID.canonical;if(!this._geoJSONIndex)return X(null,null);const ve=this._geoJSONIndex.getTile(ae.z,ae.x,ae.y);if(!ve)return X(null,null);const Ee=new D(ve.features);let je=b.exports(Ee);je.byteOffset===0&&je.byteLength===je.buffer.byteLength||(je=new Uint8Array(je)),X(null,{vectorTile:Ee,rawData:je.buffer})}Tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tn.prototype.splitTile=function(Ce,X,ae,ve,Ee,je,Ze){for(var Ue=[Ce,X,ae,ve],Oe=this.options,He=Oe.debug;Ue.length;){ve=Ue.pop(),ae=Ue.pop(),X=Ue.pop(),Ce=Ue.pop();var st=1<<X,xt=yr(X,ae,ve),at=this.tiles[xt];if(!at&&(He>1&&console.time("creation"),at=this.tiles[xt]=yn(Ce,X,ae,ve,Oe),this.tileCoords.push({z:X,x:ae,y:ve}),He)){He>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,ae,ve,at.numFeatures,at.numPoints,at.numSimplified),console.timeEnd("creation"));var Zt="z"+X;this.stats[Zt]=(this.stats[Zt]||0)+1,this.total++}if(at.source=Ce,Ee){if(X===Oe.maxZoom||X===Ee)continue;var Wt=1<<Ee-X;if(ae!==Math.floor(je/Wt)||ve!==Math.floor(Ze/Wt))continue}else if(X===Oe.indexMaxZoom||at.numPoints<=Oe.indexMaxPoints)continue;if(at.source=null,Ce.length!==0){He>1&&console.time("clipping");var Rt,rn,pn,Gt,ln,bn,Rn=.5*Oe.buffer/Oe.extent,Hn=.5-Rn,Or=.5+Rn,or=1+Rn;Rt=rn=pn=Gt=null,ln=xn(Ce,st,ae-Rn,ae+Or,0,at.minX,at.maxX,Oe),bn=xn(Ce,st,ae+Hn,ae+or,0,at.minX,at.maxX,Oe),Ce=null,ln&&(Rt=xn(ln,st,ve-Rn,ve+Or,1,at.minY,at.maxY,Oe),rn=xn(ln,st,ve+Hn,ve+or,1,at.minY,at.maxY,Oe),ln=null),bn&&(pn=xn(bn,st,ve-Rn,ve+Or,1,at.minY,at.maxY,Oe),Gt=xn(bn,st,ve+Hn,ve+or,1,at.minY,at.maxY,Oe),bn=null),He>1&&console.timeEnd("clipping"),Ue.push(Rt||[],X+1,2*ae,2*ve),Ue.push(rn||[],X+1,2*ae,2*ve+1),Ue.push(pn||[],X+1,2*ae+1,2*ve),Ue.push(Gt||[],X+1,2*ae+1,2*ve+1)}}},Tn.prototype.getTile=function(Ce,X,ae){var ve=this.options,Ee=ve.extent,je=ve.debug;if(Ce<0||Ce>24)return null;var Ze=1<<Ce,Ue=yr(Ce,X=(X%Ze+Ze)%Ze,ae);if(this.tiles[Ue])return ei(this.tiles[Ue],Ee);je>1&&console.log("drilling down to z%d-%d-%d",Ce,X,ae);for(var Oe,He=Ce,st=X,xt=ae;!Oe&&He>0;)He--,st=Math.floor(st/2),xt=Math.floor(xt/2),Oe=this.tiles[yr(He,st,xt)];return Oe&&Oe.source?(je>1&&console.log("found parent tile z%d-%d-%d",He,st,xt),je>1&&console.time("drilling down"),this.splitTile(Oe.source,He,st,xt,Ce,X,ae),je>1&&console.timeEnd("drilling down"),this.tiles[Ue]?ei(this.tiles[Ue],Ee):null):null};class ti extends H{constructor(X,ae,ve,Ee){super(X,ae,ve,vr),Ee&&(this.loadGeoJSON=Ee)}loadData(X,ae){var ve;(ve=this._pendingRequest)===null||ve===void 0||ve.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ee=!!(X&&X.request&&X.request.collectResourceTiming)&&new l.RequestPerformance(X.request);this._pendingCallback=ae,this._pendingRequest=this.loadGeoJSON(X,(je,Ze)=>{if(delete this._pendingCallback,delete this._pendingRequest,je||!Ze)return ae(je);if(typeof Ze!="object")return ae(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{Z(Ze,!0);try{if(X.filter){const Oe=l.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Oe.result==="error")throw new Error(Oe.value.map(st=>`${st.key}: ${st.message}`).join(", "));Ze={type:"FeatureCollection",features:Ze.features.filter(st=>Oe.value.evaluate({zoom:0},st))}}this._geoJSONIndex=X.cluster?new Yt(function({superclusterOptions:Oe,clusterProperties:He}){if(!He||!Oe)return Oe;const st={},xt={},at={accumulated:null,zoom:0},Zt={properties:null},Wt=Object.keys(He);for(const Rt of Wt){const[rn,pn]=He[Rt],Gt=l.createExpression(pn),ln=l.createExpression(typeof rn=="string"?[rn,["accumulated"],["get",Rt]]:rn);st[Rt]=Gt.value,xt[Rt]=ln.value}return Oe.map=Rt=>{Zt.properties=Rt;const rn={};for(const pn of Wt)rn[pn]=st[pn].evaluate(at,Zt);return rn},Oe.reduce=(Rt,rn)=>{Zt.properties=rn;for(const pn of Wt)at.accumulated=Rt[pn],Rt[pn]=xt[pn].evaluate(at,Zt)},Oe}(X)).load(Ze.features):function(Oe,He){return new Tn(Oe,He)}(Ze,X.geojsonVtOptions)}catch(Oe){return ae(Oe)}this.loaded={};const Ue={};if(Ee){const Oe=Ee.finish();Oe&&(Ue.resourceTiming={},Ue.resourceTiming[X.source]=JSON.parse(JSON.stringify(Oe)))}ae(null,Ue)}})}reloadTile(X,ae){const ve=this.loaded;return ve&&ve[X.uid]?super.reloadTile(X,ae):this.loadTile(X,ae)}loadGeoJSON(X,ae){if(X.request)return l.getJSON(X.request,ae);if(typeof X.data=="string")try{ae(null,JSON.parse(X.data))}catch{ae(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`))}else ae(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(X,ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ae()}getClusterExpansionZoom(X,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(ve){ae(ve)}}getClusterChildren(X,ae){try{ae(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(ve){ae(ve)}}getClusterLeaves(X,ae){try{ae(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(ve){ae(ve)}}}class yi{constructor(X){this.self=X,this.actor=new l.Actor(X,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:H,geojson:ti},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ae,ve)=>{if(this.workerSourceTypes[ae])throw new Error(`Worker source with name "${ae}" already registered.`);this.workerSourceTypes[ae]=ve},this.self.registerRTLTextPlugin=ae=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=ae.applyArabicShaping,l.plugin.processBidirectionalText=ae.processBidirectionalText,l.plugin.processStyledBidirectionalText=ae.processStyledBidirectionalText}}setReferrer(X,ae){this.referrer=ae}setImages(X,ae,ve){this.availableImages[X]=ae;for(const Ee in this.workerSources[X]){const je=this.workerSources[X][Ee];for(const Ze in je)je[Ze].availableImages=ae}ve()}setLayers(X,ae,ve){this.getLayerIndex(X).replace(ae),ve()}updateLayers(X,ae,ve){this.getLayerIndex(X).update(ae.layers,ae.removedIds),ve()}loadTile(X,ae,ve){this.getWorkerSource(X,ae.type,ae.source).loadTile(ae,ve)}loadDEMTile(X,ae,ve){this.getDEMWorkerSource(X,ae.source).loadTile(ae,ve)}reloadTile(X,ae,ve){this.getWorkerSource(X,ae.type,ae.source).reloadTile(ae,ve)}abortTile(X,ae,ve){this.getWorkerSource(X,ae.type,ae.source).abortTile(ae,ve)}removeTile(X,ae,ve){this.getWorkerSource(X,ae.type,ae.source).removeTile(ae,ve)}removeDEMTile(X,ae){this.getDEMWorkerSource(X,ae.source).removeTile(ae)}removeSource(X,ae,ve){if(!this.workerSources[X]||!this.workerSources[X][ae.type]||!this.workerSources[X][ae.type][ae.source])return;const Ee=this.workerSources[X][ae.type][ae.source];delete this.workerSources[X][ae.type][ae.source],Ee.removeSource!==void 0?Ee.removeSource(ae,ve):ve()}loadWorkerSource(X,ae,ve){try{this.self.importScripts(ae.url),ve()}catch(Ee){ve(Ee.toString())}}syncRTLPluginState(X,ae,ve){try{l.plugin.setState(ae);const Ee=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ee!=null){this.self.importScripts(Ee);const je=l.plugin.isParsed();ve(je?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ee}`),je)}}catch(Ee){ve(Ee.toString())}}getAvailableImages(X){let ae=this.availableImages[X];return ae||(ae=[]),ae}getLayerIndex(X){let ae=this.layerIndexes[X];return ae||(ae=this.layerIndexes[X]=new T),ae}getWorkerSource(X,ae,ve){if(this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][ae]||(this.workerSources[X][ae]={}),!this.workerSources[X][ae][ve]){const Ee={send:(je,Ze,Ue)=>{this.actor.send(je,Ze,Ue,X)}};this.workerSources[X][ae][ve]=new this.workerSourceTypes[ae](Ee,this.getLayerIndex(X),this.getAvailableImages(X))}return this.workerSources[X][ae][ve]}getDEMWorkerSource(X,ae){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][ae]||(this.demWorkerSources[X][ae]=new fe),this.demWorkerSources[X][ae]}enforceCacheSizeLimit(X,ae){l.enforceCacheSizeLimit(ae)}}return l.isWorker()&&(self.worker=new yi(self)),yi}),f(["./shared"],function(l){var w=E;function E(p){return!function(r){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var d,g,_=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(_);try{g=new Worker(C),d=!0}catch{d=!1}return g&&g.terminate(),URL.revokeObjectURL(C),d}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var d=document.createElement("canvas");d.width=d.height=1;var g=d.getContext("2d");if(!g)return!1;var _=g.getImageData(0,0,1,1);return _&&_.width===d.width}()?(T[u=r&&r.failIfMajorPerformanceCaveat]===void 0&&(T[u]=function(d){var g,_=function(C){var z=document.createElement("canvas"),O=Object.create(E.webGLContextAttributes);return O.failIfMajorPerformanceCaveat=C,z.getContext("webgl",O)||z.getContext("experimental-webgl",O)}(d);if(!_)return!1;try{g=_.createShader(_.VERTEX_SHADER)}catch{return!1}return!(!g||_.isContextLost())&&(_.shaderSource(g,"void main() {}"),_.compileShader(g),_.getShaderParameter(g,_.COMPILE_STATUS)===!0)}(u)),T[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(p)}var T={};function S(p,r){if(Array.isArray(p)){if(!Array.isArray(r)||p.length!==r.length)return!1;for(let u=0;u<p.length;u++)if(!S(p[u],r[u]))return!1;return!0}if(typeof p=="object"&&p!==null&&r!==null){if(typeof r!="object"||Object.keys(p).length!==Object.keys(r).length)return!1;for(const u in p)if(!S(p[u],r[u]))return!1;return!0}return p===r}E.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class I{static testProp(r){if(!I.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in I.docStyle)return r[u];return r[0]}static create(r,u,d){const g=window.document.createElement(r);return u!==void 0&&(g.className=u),d&&d.appendChild(g),g}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(r,u){r.style[I.transformProp]=u}static addEventListener(r,u,d,g={}){r.addEventListener(u,d,"passive"in g?g:g.capture)}static removeEventListener(r,u,d,g={}){r.removeEventListener(u,d,"passive"in g?g:g.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static mousePos(r,u){const d=r.getBoundingClientRect();return new l.pointGeometry(u.clientX-d.left-r.clientLeft,u.clientY-d.top-r.clientTop)}static touchPos(r,u){const d=r.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new l.pointGeometry(u[_].clientX-d.left-r.clientLeft,u[_].clientY-d.top-r.clientTop));return g}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);class j{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,d){const g=function(_){const C=_.match(q);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(r);return g.path+=`${u}${d}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(r){this._transformRequestFn=r}}const q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class H{constructor(r,u,d,g){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(u,g)}update(r,u,d){const{width:g,height:_}=r,C=!(this.size&&this.size[0]===g&&this.size[1]===_||d),{context:z}=this,{gl:O}=z;if(this.useMipmap=!!(u&&u.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,r):O.texImage2D(O.TEXTURE_2D,0,this.format,g,_,0,this.format,O.UNSIGNED_BYTE,r.data);else{const{x:W,y:ee}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||l.isImageBitmap(r)?O.texSubImage2D(O.TEXTURE_2D,0,W,ee,O.RGBA,O.UNSIGNED_BYTE,r):O.texSubImage2D(O.TEXTURE_2D,0,W,ee,g,_,O.RGBA,O.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(r,u,d){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),d!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,d||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function fe(p){const{userImage:r}=p;return!!(r&&r.render&&r.render())&&(p.data.replace(new Uint8Array(r.data.buffer)),!0)}class Z extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:d}of this.requestors)this._notify(u,d);this.requestors=[]}}getImage(r){return this.images[r]}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let d=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,u){if(!r)return!0;let d=0;for(const g of r){if(g[0]<d||g[1]<g[0]||u<g[1])return!1;d=g[1]}return!0}_validateContent(r,u){return!(r&&(r.length!==4||r[0]<0||u.data.width<r[0]||r[1]<0||u.data.height<r[1]||r[2]<0||u.data.width<r[2]||r[3]<0||u.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))}updateImage(r,u){const d=this.images[r];if(d.data.width!==u.data.width||d.data.height!==u.data.height)throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=d.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let d=!0;if(!this.isLoaded())for(const g of r)this.images[g]||(d=!1);this.isLoaded()||d?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const d={};for(const g of r){this.images[g]||this.fire(new l.Event("styleimagemissing",{id:g}));const _=this.images[g];_?d[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,d)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],d=this.getImage(r);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const g={w:d.data.width+2,h:d.data.height+2,x:0,y:0},_=new l.ImagePosition(g,d);this.patterns[r]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new H(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:d}=l.potpack(r),g=this.atlasImage;g.resize({width:u||1,height:d||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],z=C.x+1,O=C.y+1,W=this.images[_].data,ee=W.width,le=W.height;l.RGBAImage.copy(W,g,{x:0,y:0},{x:z,y:O},{width:ee,height:le}),l.RGBAImage.copy(W,g,{x:0,y:le-1},{x:z,y:O-1},{width:ee,height:1}),l.RGBAImage.copy(W,g,{x:0,y:0},{x:z,y:O+le},{width:ee,height:1}),l.RGBAImage.copy(W,g,{x:ee-1,y:0},{x:z-1,y:O},{width:1,height:le}),l.RGBAImage.copy(W,g,{x:0,y:0},{x:z+ee,y:O},{width:1,height:le})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.images[u];d||l.warnOnce(`Image with ID: "${u}" was not found`),fe(d)&&this.updateImage(u,d)}}}const $=1e20;function N(p,r,u,d,g,_,C,z,O){for(let W=r;W<r+d;W++)oe(p,u*_+W,_,g,C,z,O);for(let W=u;W<u+g;W++)oe(p,W*_+r,1,d,C,z,O)}function oe(p,r,u,d,g,_,C){_[0]=0,C[0]=-$,C[1]=$,g[0]=p[r];for(let z=1,O=0,W=0;z<d;z++){g[z]=p[r+z*u];const ee=z*z;do{const le=_[O];W=(g[z]-g[le]+ee-le*le)/(z-le)/2}while(W<=C[O]&&--O>-1);O++,_[O]=z,C[O]=W,C[O+1]=$}for(let z=0,O=0;z<d;z++){for(;C[O+1]<z;)O++;const W=_[O],ee=z-W;p[r+z*u]=g[W]+ee*ee}}class V{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const d=[];for(const g in r)for(const _ of r[g])d.push({stack:g,id:_});l.asyncAll(d,({stack:g,id:_},C)=>{let z=this.entries[g];z||(z=this.entries[g]={glyphs:{},requests:{},ranges:{}});let O=z.glyphs[_];if(O!==void 0)return void C(null,{stack:g,id:_,glyph:O});if(O=this._tinySDF(z,g,_),O)return z.glyphs[_]=O,void C(null,{stack:g,id:_,glyph:O});const W=Math.floor(_/256);if(256*W>65535)return void C(new Error("glyphs > 65535 not supported"));if(z.ranges[W])return void C(null,{stack:g,id:_,glyph:O});let ee=z.requests[W];ee||(ee=z.requests[W]=[],V.loadGlyphRange(g,W,this.url,this.requestManager,(le,he)=>{if(he){for(const ke in he)this._doesCharSupportLocalGlyph(+ke)||(z.glyphs[+ke]=he[+ke]);z.ranges[W]=!0}for(const ke of ee)ke(le,he);delete z.requests[W]})),ee.push((le,he)=>{le?C(le):he&&C(null,{stack:g,id:_,glyph:he[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:z,id:O,glyph:W}of _)(C[z]||(C[z]={}))[O]=W&&{id:W.id,bitmap:W.bitmap.clone(),metrics:W.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](r)||l.unicodeBlockLookup["Hangul Syllables"](r)||l.unicodeBlockLookup.Hiragana(r)||l.unicodeBlockLookup.Katakana(r))}_tinySDF(r,u,d){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(d))return;let _=r.tinySDF;if(!_){let z="400";/bold/i.test(u)?z="900":/medium/i.test(u)?z="500":/light/i.test(u)&&(z="200"),_=r.tinySDF=new V.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:g,fontWeight:z})}const C=_.draw(String.fromCharCode(d));return{id:d,bitmap:new l.AlphaImage({width:C.width||30,height:C.height||30},C.data),metrics:{width:C.glyphWidth||24,height:C.glyphHeight||24,left:C.glyphLeft||0,top:C.glyphTop-27||-8,advance:C.glyphAdvance||24}}}}V.loadGlyphRange=function(p,r,u,d,g){const _=256*r,C=_+255,z=d.transformRequest(u.replace("{fontstack}",p).replace("{range}",`${_}-${C}`),l.ResourceType.Glyphs);l.getArrayBuffer(z,(O,W)=>{if(O)g(O);else if(W){const ee={};for(const le of l.parseGlyphPbf(W))ee[le.id]=le;g(null,ee)}})},V.TinySDF=class{constructor({fontSize:p=24,buffer:r=3,radius:u=8,cutoff:d=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=u;const z=this.size=p+4*r,O=this._createCanvas(z),W=this.ctx=O.getContext("2d",{willReadFrequently:!0});W.font=`${C} ${_} ${p}px ${g}`,W.textBaseline="alphabetic",W.textAlign="left",W.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(p){const r=document.createElement("canvas");return r.width=r.height=p,r}draw(p){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(p),C=Math.ceil(u),z=Math.min(this.size-this.buffer,Math.ceil(_-g)),O=Math.min(this.size-this.buffer,C+Math.ceil(d)),W=z+2*this.buffer,ee=O+2*this.buffer,le=Math.max(W*ee,0),he=new Uint8ClampedArray(le),ke={data:he,width:W,height:ee,glyphWidth:z,glyphHeight:O,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(z===0||O===0)return ke;const{ctx:Ae,buffer:Ie,gridInner:Ge,gridOuter:Xe}=this;Ae.clearRect(Ie,Ie,z,O),Ae.fillText(p,Ie,Ie+C);const Je=Ae.getImageData(Ie,Ie,z,O);Xe.fill($,0,le),Ge.fill(0,0,le);for(let ze=0;ze<O;ze++)for(let nt=0;nt<z;nt++){const et=Je.data[4*(ze*z+nt)+3]/255;if(et===0)continue;const ht=(ze+Ie)*W+nt+Ie;if(et===1)Xe[ht]=0,Ge[ht]=$;else{const ft=.5-et;Xe[ht]=ft>0?ft*ft:0,Ge[ht]=ft<0?ft*ft:0}}N(Xe,0,0,W,ee,W,this.f,this.v,this.z),N(Ge,Ie,Ie,z,O,W,this.f,this.v,this.z);for(let ze=0;ze<le;ze++){const nt=Math.sqrt(Xe[ze])-Math.sqrt(Ge[ze]);he[ze]=Math.round(255-255*(nt/this.radius+this.cutoff))}return ke}};const D=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(p,r){return l.sphericalToCartesian(p.expression.evaluate(r))}interpolate(p,r,u){return{x:l.number(p.x,r.x,u),y:l.number(p.y,r.y,u),z:l.number(p.z,r.z,u)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),b="-transition";class k extends l.Evented{constructor(r){super(),this._transitionable=new l.Transitionable(D),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(l.validateLight,r,u))for(const d in r){const g=r[d];d.endsWith(b)?this._transitionable.setTransition(d.slice(0,-b.length),g):this._transitionable.setValue(d,g)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,d){return(!d||d.validate!==!1)&&l.emitValidationErrors(this,r.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class G{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const d=r.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,u)),this.dashEntry[d]}getDashRanges(r,u,d){const g=[];let _=r.length%2==1?-r[r.length-1]*d:0,C=r[0]*d,z=!0;g.push({left:_,right:C,isDash:z,zeroLength:r[0]===0});let O=r[0];for(let W=1;W<r.length;W++){z=!z;const ee=r[W];_=O*d,O+=ee,C=O*d,g.push({left:_,right:C,isDash:z,zeroLength:ee===0})}return g}addRoundDash(r,u,d){const g=u/2;for(let _=-d;_<=d;_++){const C=this.width*(this.nextRow+d+_);let z=0,O=r[z];for(let W=0;W<this.width;W++){W/O.right>1&&(O=r[++z]);const ee=Math.abs(W-O.left),le=Math.abs(W-O.right),he=Math.min(ee,le);let ke;const Ae=_/d*(g+1);if(O.isDash){const Ie=g-Math.abs(Ae);ke=Math.sqrt(he*he+Ie*Ie)}else ke=g-Math.sqrt(he*he+Ae*Ae);this.data[C+W]=Math.max(0,Math.min(255,ke+128))}}}addRegularDash(r){for(let z=r.length-1;z>=0;--z){const O=r[z],W=r[z+1];O.zeroLength?r.splice(z,1):W&&W.isDash===O.isDash&&(W.left=O.left,r.splice(z,1))}const u=r[0],d=r[r.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=r[_];for(let z=0;z<this.width;z++){z/C.right>1&&(C=r[++_]);const O=Math.abs(z-C.left),W=Math.abs(z-C.right),ee=Math.min(O,W);this.data[g+z]=Math.max(0,Math.min(255,(C.isDash?ee:-ee)+128))}}addDash(r,u){const d=u?7:0,g=2*d+1;if(this.nextRow+g>this.height)return l.warnOnce("LineAtlas out of space"),null;let _=0;for(let z=0;z<r.length;z++)_+=r[z];if(_!==0){const z=this.width/_,O=this.getDashRanges(r,this.width,z);u?this.addRoundDash(O,z,d):this.addRegularDash(O)}const C={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Y{constructor(r,u){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const d=this.workerPool.acquire(this.id);for(let g=0;g<d.length;g++){const _=new Y.Actor(d[g],u,this.id);_.name=`Worker ${g}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,d){l.asyncAll(this.actors,(g,_)=>{g.send(r,u,_)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(r=>{r.remove()}),this.actors=[],this.workerPool.release(this.id)}}function K(p,r,u){const d=function(g,_){if(g)return u(g);if(_){const C=l.pick(l.extend(_,p),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(z=>z.id)),u(null,C)}};return p.url?l.getJSON(r.transformRequest(p.url,l.ResourceType.Source),d):l.exported.frame(()=>d(null,p))}Y.Actor=l.Actor;class pe{constructor(r,u,d){this.bounds=l.LngLatBounds.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),d=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),g=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),_=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),C=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return r.x>=d&&r.x<_&&r.y>=g&&r.y<C}}class _e extends l.Evented{constructor(r,u,d,g){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=K(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r?this.fire(new l.ErrorEvent(r)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new pe(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(r,u){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(d,l.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,z){return delete r.request,r.aborted?u(null):C&&C.status!==404?u(C):(z&&z.resourceTiming&&(r.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&r.setExpiryData(z),r.loadVectorData(z,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",g,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",g,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class be extends l.Evented{constructor(r,u,d,g){super(),this.id=r,this.dispatcher=d,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=K(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new l.ErrorEvent(r)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new pe(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),(g,_,C)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(g)r.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&r.setExpiryData(C);const z=this.map.painter.context,O=z.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new H(z,_,O.RGBA,{useMipmap:!0}),r.texture.bind(O.LINEAR,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),z.extTextureFilterAnisotropic&&O.texParameterf(O.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax)),r.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}let Q;class re extends be{constructor(r,u,d,g){super(r,u,d,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(r,u){const d=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function g(_,C){_&&(r.state="errored",u(_)),C&&(r.dem=C,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.request=l.getImage(this.map._requestManager.transformRequest(d,l.ResourceType.Tile),function(_,C){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(_)r.state="errored",u(_);else if(C){this.map._refreshExpiredTiles&&r.setExpiryData(C),delete C.cacheControl,delete C.expires;const z=l.isImageBitmap(C)&&(Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q)?C:l.exported.getImageData(C,1),O={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:z,encoding:this.encoding};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",O,g.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)}_getNeighboringTiles(r){const u=r.canonical,d=Math.pow(2,u.z),g=(u.x-1+d)%d,_=u.x===0?r.wrap-1:r.wrap,C=(u.x+1+d)%d,z=u.x+1===d?r.wrap+1:r.wrap,O={};return O[new l.OverscaledTileID(r.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},O[new l.OverscaledTileID(r.overscaledZ,z,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(O[new l.OverscaledTileID(r.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new l.OverscaledTileID(r.overscaledZ,z,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<d&&(O[new l.OverscaledTileID(r.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new l.OverscaledTileID(r.overscaledZ,z,u.z,C,u.y+1).key]={backfilled:!1}),O}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class ne extends l.Evented{constructor(r,u,d,g){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData("content"),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,d,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:d},g),this}_updateWorkerData(r){const u=l.extend({},this.workerOptions),d=this._data;typeof d=="string"?(u.request=this.map._requestManager.transformRequest(l.exported.resolveURL(d),l.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(d),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(g,_)=>{if(this._pendingLoads--,this._removed||_&&_.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source",sourceDataType:r}));let C=null;if(_&&_.resourceTiming&&_.resourceTiming[this.id]&&(C=_.resourceTiming[this.id].slice(0)),g)return void this.fire(new l.ErrorEvent(g));const z={dataType:"source",sourceDataType:r};this._collectResourceTiming&&C&&C.length>0&&l.extend(z,{resourceTiming:C}),this.fire(new l.Event("data",z))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const d=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const g={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(d,g,(_,C)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(C,this.map.painter,d==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var te=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ce extends l.Evented{constructor(r,u,d,g){super(),this.id=r,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}load(r,u){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(d,g)=>{this._loaded=!0,d?this.fire(new l.ErrorEvent(d)):g&&(this.image=g,r&&(this.coordinates=r),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(r){return this.image&&r.url?(this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}setCoordinates(r){this.coordinates=r;const u=r.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,z=-1/0,O=-1/0;for(const he of g)_=Math.min(_,he.x),C=Math.min(C,he.y),z=Math.max(z,he.x),O=Math.max(O,he.y);const W=Math.max(z-_,O-C),ee=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),le=Math.pow(2,ee);return new l.CanonicalTileID(ee,Math.floor((_+z)/2*le),Math.floor((C+O)/2*le))}(u),this.minzoom=this.maxzoom=this.tileID.z;const d=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(d[2].x,d[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new H(r,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class xe extends ce{constructor(r,u,d,g){super(r,u,d,g),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const r=this.options;this.urls=[];for(const u of r.urls)this.urls.push(this.map._requestManager.transformRequest(u,l.ResourceType.Source).url);l.getVideo(this.urls,(u,d)=>{this._loaded=!0,u?this.fire(new l.ErrorEvent(u)):d&&(this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,u=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new H(r,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const d in this.tiles){const g=this.tiles[d];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class we extends ce{constructor(r,u,d,g){super(r,u,d,g),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,d=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new H(u,this.canvas,d.RGBA,{premultiply:!0});for(const g in this.tiles){const _=this.tiles[g];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const De={vector:_e,raster:be,"raster-dem":re,geojson:ne,video:xe,image:ce,canvas:we};function Pe(p,r){const u=l.create();return l.translate(u,u,[1,1,0]),l.scale(u,u,[.5*p.width,.5*p.height,1]),l.multiply(u,u,p.calculatePosMatrix(r.toUnwrapped()))}function Me(p,r,u,d,g,_){const C=function(le,he,ke){if(le)for(const Ae of le){const Ie=he[Ae];if(Ie&&Ie.source===ke&&Ie.type==="fill-extrusion")return!0}else for(const Ae in he){const Ie=he[Ae];if(Ie.source===ke&&Ie.type==="fill-extrusion")return!0}return!1}(g&&g.layers,r,p.id),z=_.maxPitchScaleFactor(),O=p.tilesIn(d,z,C);O.sort(Ve);const W=[];for(const le of O)W.push({wrappedTileID:le.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(r,u,p._state,le.queryGeometry,le.cameraQueryGeometry,le.scale,g,_,z,Pe(p.transform,le.tileID))});const ee=function(le){const he={},ke={};for(const Ae of le){const Ie=Ae.queryResults,Ge=Ae.wrappedTileID,Xe=ke[Ge]=ke[Ge]||{};for(const Je in Ie){const ze=Ie[Je],nt=Xe[Je]=Xe[Je]||{},et=he[Je]=he[Je]||[];for(const ht of ze)nt[ht.featureIndex]||(nt[ht.featureIndex]=!0,et.push(ht))}}return he}(W);for(const le in ee)ee[le].forEach(he=>{const ke=he.feature,Ae=p.getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=Ae});return ee}function Ve(p,r){const u=p.tileID,d=r.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}class Ne{constructor(r,u){this.tileID=r,this.uid=l.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<l.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.textures.forEach(u=>r.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(r,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const z of g){const O=z.layerIds.map(W=>_.getLayer(W)).filter(Boolean);if(O.length!==0){z.layers=O,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(W=>O.filter(ee=>ee.id===W)[0]));for(const W of O)C[W.id]=z}}return C}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!d)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.SymbolBucket&&_.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const g=this.buckets[d];g.uploadPending()&&g.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new H(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new H(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,d,g,_,C,z,O,W,ee){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:ee,transform:O,params:z,queryPadding:this.queryPadding*W},r,u,d):{}}querySourceFeatures(r,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const g=d.loadVTLayers(),_=u?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const z=l.createFilter(u&&u.filter),{z:O,x:W,y:ee}=this.tileID.canonical,le={z:O,x:W,y:ee};for(let he=0;he<C.length;he++){const ke=C.feature(he);if(z.needGeometry){const Ge=l.toEvaluationFeature(ke,!0);if(!z.filter(new l.EvaluationParameters(this.tileID.overscaledZ),Ge,this.tileID.canonical))continue}else if(!z.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ke))continue;const Ae=d.getId(ke,_),Ie=new l.GeoJSONFeature(ke,O,W,ee,Ae);Ie.tile=le,r.push(Ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const d=l.parseCacheControl(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let g=!1;if(this.expirationTime>d)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=d+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",z=d[C],O=r[C];if(!z||!O||Object.keys(O).length===0)continue;_.update(O,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const W=u&&u.style&&u.style.getLayer(g);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=l.exported.now()+r}setDependencies(r,u){const d={};for(const g of u)d[g]=!0;this.dependencies[r]=d}hasDependency(r,u){for(const d of r){const g=this.dependencies[d];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Qe{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,d){const g=r.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(d!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},d)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const d=r.wrapped().key,g=u===void 0?0:this.data[d].indexOf(u),_=this.data[d][g];return this.data[d].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(_.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const d in this.data)for(const g of this.data[d])r(g.value)||u.push(g);for(const d of u)this.remove(d.value.tileID,d)}}class ct{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,d){const g=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][g]=this.stateChanges[r][g]||{},l.extend(this.stateChanges[r][g],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==g&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][g]===null){this.deletedStates[r][g]={};for(const _ in this.state[r][g])d[_]||(this.deletedStates[r][g][_]=null)}else for(const _ in d)this.deletedStates[r]&&this.deletedStates[r][g]&&this.deletedStates[r][g][_]===null&&delete this.deletedStates[r][g][_]}removeFeatureState(r,u,d){if(this.deletedStates[r]===null)return;const g=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&u!==void 0)this.deletedStates[r][g]!==null&&(this.deletedStates[r][g]=this.deletedStates[r][g]||{},this.deletedStates[r][g][d]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][g])for(d in this.deletedStates[r][g]={},this.stateChanges[r][g])this.deletedStates[r][g][d]=null;else this.deletedStates[r][g]=null;else this.deletedStates[r]=null}getState(r,u){const d=String(u),g=l.extend({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const d={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),l.extend(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];d[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const z of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][z];_[C]=this.state[g][C]}d[g]=d[g]||{},l.extend(d[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const g in r)r[g].setFeatureState(d,u)}}class mt extends l.Evented{constructor(r,u,d){super(),this.id=r,this.dispatcher=d,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(g,_,C,z){const O=new De[_.type](g,_,C,z);if(O.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${O.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],O),O}(r,u,d,this),this._tiles={},this._cache=new Qe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ct}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new l.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const d=this._tiles[u];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Lt).map(r=>r.key)}getRenderableIds(r){const u=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&u.push(this._tiles[d]);return r?u.sort((d,g)=>{const _=d.tileID,C=g.tileID,z=new l.pointGeometry(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),O=new l.pointGeometry(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||O.y-z.y||O.x-z.x}).map(d=>d.tileID.key):u.map(d=>d.tileID).sort(Lt).map(d=>d.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=u),this._loadTile(d,this._tileLoaded.bind(this,d,r,u)))}_tileLoaded(r,u,d,g){if(g)return r.state="errored",void(g.status!==404?this._source.fire(new l.ErrorEvent(g,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=l.exported.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(r.neighboringTiles&&r.neighboringTiles[_]){const C=this.getTileByID(_);d(r,C),d(C,r)}}function d(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const z=_.tileID.canonical.y-g.tileID.canonical.y,O=Math.pow(2,g.tileID.canonical.z),W=_.tileID.key;C===0&&z===0||Math.abs(z)>1||(Math.abs(C)>1&&(Math.abs(C+O)===1?C+=O:Math.abs(C-O)===1&&(C-=O)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,z),g.neighboringTiles&&g.neighboringTiles[W]&&(g.neighboringTiles[W].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,d,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>d)continue;let z=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const W=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[W.key],C&&C.hasData()&&(z=W)}let O=z;for(;O.overscaledZ>u;)if(O=O.scaledTo(O.overscaledZ-1),r[O.key]){g[z.key]=z;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=u?d:null}for(let d=r.overscaledZ-1;d>=u;d--){const g=r.scaledTo(d),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,g=Math.floor(u*d*5),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const d={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),d[_.tileID.key]=_}this._tiles=d;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let d;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(W=>new l.OverscaledTileID(W.canonical.z,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(d=d.filter(W=>this._source.hasTile(W)))):d=[];const g=r.coveringZoomLevel(this._source),_=Math.max(g-mt.maxOverzooming,this._source.minzoom),C=Math.max(g+mt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const W={};for(const ee of d)if(ee.canonical.z>this._source.minzoom){const le=ee.scaledTo(ee.canonical.z-1);W[le.key]=le;const he=ee.scaledTo(Math.max(this._source.minzoom,Math.min(ee.canonical.z,5)));W[he.key]=he}d=d.concat(Object.values(W))}const z=this._updateRetainedTiles(d,g);if(dt(this._source.type)){const W={},ee={},le=Object.keys(z);for(const he of le){const ke=z[he],Ae=this._tiles[he];if(!Ae||Ae.fadeEndTime&&Ae.fadeEndTime<=l.exported.now())continue;const Ie=this.findLoadedParent(ke,_);Ie&&(this._addTile(Ie.tileID),W[Ie.tileID.key]=Ie.tileID),ee[he]=ke}this._retainLoadedChildren(ee,g,C,z);for(const he in W)z[he]||(this._coveredTiles[he]=!0,z[he]=W[he]);if(u){const he={},ke={};for(const Ae of d)this._tiles[Ae.key].hasData()?he[Ae.key]=Ae:ke[Ae.key]=Ae;for(const Ae in ke){const Ie=ke[Ae].children(this._source.maxzoom);this._tiles[Ie[0].key]&&this._tiles[Ie[1].key]&&this._tiles[Ie[2].key]&&this._tiles[Ie[3].key]&&(he[Ie[0].key]=z[Ie[0].key]=Ie[0],he[Ie[1].key]=z[Ie[1].key]=Ie[1],he[Ie[2].key]=z[Ie[2].key]=Ie[2],he[Ie[3].key]=z[Ie[3].key]=Ie[3],delete ke[Ae])}for(const Ae in ke){const Ie=this.findLoadedParent(ke[Ae],this._source.minzoom);if(Ie){he[Ie.tileID.key]=z[Ie.tileID.key]=Ie.tileID;for(const Ge in he)he[Ge].isChildOf(Ie.tileID)&&delete he[Ge]}}for(const Ae in this._tiles)he[Ae]||(this._coveredTiles[Ae]=!0)}}for(const W in z)this._tiles[W].clearFadeHold();const O=l.keysDifference(this._tiles,z);for(const W of O){const ee=this._tiles[W];ee.hasSymbolBuckets&&!ee.holdingForFade()?ee.setHoldDuration(this.map._fadeDuration):ee.hasSymbolBuckets&&!ee.symbolFadeFinished()||this._removeTile(W)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const d={},g={},_=Math.max(u-mt.maxOverzooming,this._source.minzoom),C=Math.max(u+mt.maxUnderzooming,this._source.minzoom),z={};for(const O of r){const W=this._addTile(O);d[O.key]=O,W.hasData()||u<this._source.maxzoom&&(z[O.key]=O)}this._retainLoadedChildren(z,u,C,d);for(const O of r){let W=this._tiles[O.key];if(W.hasData())continue;if(u+1>this._source.maxzoom){const le=O.children(this._source.maxzoom)[0],he=this.getTile(le);if(he&&he.hasData()){d[le.key]=le;continue}}else{const le=O.children(this._source.maxzoom);if(d[le[0].key]&&d[le[1].key]&&d[le[2].key]&&d[le[3].key])continue}let ee=W.wasRequested();for(let le=O.overscaledZ-1;le>=_;--le){const he=O.scaledTo(le);if(g[he.key]||(g[he.key]=!0,W=this.getTile(he),!W&&ee&&(W=this._addTile(he)),W&&(d[he.key]=he,ee=W.wasRequested(),W.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let d,g=this._tiles[r].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){d=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(d=this._getLoadedTile(_),d)break;g=_}for(const _ of u)this._loadedParentTiles[_]=d}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const d=u;return u||(u=new Ne(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,d||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=u.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,d){const g=[],_=this.transform;if(!_)return g;const C=d?_.getCameraQueryGeometry(r):r,z=r.map(Ae=>_.pointCoordinate(Ae,this.terrain)),O=C.map(Ae=>_.pointCoordinate(Ae,this.terrain)),W=this.getIds();let ee=1/0,le=1/0,he=-1/0,ke=-1/0;for(const Ae of O)ee=Math.min(ee,Ae.x),le=Math.min(le,Ae.y),he=Math.max(he,Ae.x),ke=Math.max(ke,Ae.y);for(let Ae=0;Ae<W.length;Ae++){const Ie=this._tiles[W[Ae]];if(Ie.holdingForFade())continue;const Ge=Ie.tileID,Xe=Math.pow(2,_.zoom-Ie.tileID.overscaledZ),Je=u*Ie.queryPadding*l.EXTENT/Ie.tileSize/Xe,ze=[Ge.getTilePoint(new l.MercatorCoordinate(ee,le)),Ge.getTilePoint(new l.MercatorCoordinate(he,ke))];if(ze[0].x-Je<l.EXTENT&&ze[0].y-Je<l.EXTENT&&ze[1].x+Je>=0&&ze[1].y+Je>=0){const nt=z.map(ht=>Ge.getTilePoint(ht)),et=O.map(ht=>Ge.getTilePoint(ht));g.push({tile:Ie,tileID:Ge,queryGeometry:nt,cameraQueryGeometry:et,scale:Xe})}}return g}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of u)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(dt(this._source.type))for(const r in this._tiles){const u=this._tiles[r];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(r,u,d){this._state.updateState(r=r||"_geojsonTileLayer",u,d)}removeFeatureState(r,u,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,d)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,d){const g=this._tiles[r];g&&g.setDependencies(u,d)}reloadTilesForDependencies(r,u){for(const d in this._tiles)this._tiles[d].hasDependency(r,u)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,u))}}function Lt(p,r){const u=Math.abs(2*p.wrap)-+(p.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return p.overscaledZ-r.overscaledZ||d-u||r.canonical.y-p.canonical.y||r.canonical.x-p.canonical.x}function dt(p){return p==="raster"||p==="image"||p==="video"}mt.maxOverzooming=10,mt.maxUnderzooming=3;const bt="mapboxgl_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(_s.workerUrl));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[bt]}numActive(){return Object.keys(this.active).length}}const Yt=Math.floor(l.exported.hardwareConcurrency/2);let dn;function Pn(){return dn||(dn=new Nt),dn}function Cn(p,r){const u={};for(const d in p)d!=="ref"&&(u[d]=p[d]);return l.refProperties.forEach(d=>{d in r&&(u[d]=r[d])}),u}function mn(p){p=p.slice();const r=Object.create(null);for(let u=0;u<p.length;u++)r[p[u].id]=p[u];for(let u=0;u<p.length;u++)"ref"in p[u]&&(p[u]=Cn(p[u],r[p[u].ref]));return p}Nt.workerCount=Math.max(Math.min(Yt,6),1);const Vt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Te(p,r,u){u.push({command:Vt.addSource,args:[p,r[p]]})}function F(p,r,u){r.push({command:Vt.removeSource,args:[p]}),u[p]=!0}function R(p,r,u,d){F(p,u,d),Te(p,r,u)}function ye(p,r,u){let d;for(d in p[u])if(Object.prototype.hasOwnProperty.call(p[u],d)&&d!=="data"&&!S(p[u][d],r[u][d]))return!1;for(d in r[u])if(Object.prototype.hasOwnProperty.call(r[u],d)&&d!=="data"&&!S(p[u][d],r[u][d]))return!1;return!0}function $e(p,r,u,d,g,_){let C;for(C in r=r||{},p=p||{})Object.prototype.hasOwnProperty.call(p,C)&&(S(p[C],r[C])||u.push({command:_,args:[d,C,r[C],g]}));for(C in r)Object.prototype.hasOwnProperty.call(r,C)&&!Object.prototype.hasOwnProperty.call(p,C)&&(S(p[C],r[C])||u.push({command:_,args:[d,C,r[C],g]}))}function Ye(p){return p.id}function ut(p,r){return p[r.id]=r,p}class se{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=l.clamp(r,0,1);let u=1,d=this._distances[u];const g=r*this.paddedLength+this.padding;for(;d<g&&u<this._distances.length;)d=this._distances[++u];const _=u-1,C=this._distances[_],z=d-C,O=z>0?(g-C)/z:0;return this.points[_].mult(1-O).add(this.points[u].mult(O))}}function P(p,r){let u=!0;return p==="always"||p!=="never"&&r!=="never"||(u=!1),u}class L{constructor(r,u,d){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(u/d);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,d,g,_){this._forEachCell(u,d,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(r,u,d,g){this._forEachCell(u-g,d-g,u+g,d+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(d),this.circles.push(g)}_insertBoxCell(r,u,d,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(r,u,d,g,_,C){this.circleCells[_].push(C)}_query(r,u,d,g,_,C,z){if(d<0||r>this.width||g<0||u>this.height)return[];const O=[];if(r<=0&&u<=0&&this.width<=d&&this.height<=g){if(_)return[{key:null,x1:r,y1:u,x2:d,y2:g}];for(let W=0;W<this.boxKeys.length;W++)O.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const ee=this.circles[3*W],le=this.circles[3*W+1],he=this.circles[3*W+2];O.push({key:this.circleKeys[W],x1:ee-he,y1:le-he,x2:ee+he,y2:le+he})}}else this._forEachCell(r,u,d,g,this._queryCell,O,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},z);return O}query(r,u,d,g){return this._query(r,u,d,g,!1,null)}hitTest(r,u,d,g,_,C){return this._query(r,u,d,g,!0,_,C).length>0}hitTestCircle(r,u,d,g,_){const C=r-d,z=r+d,O=u-d,W=u+d;if(z<0||C>this.width||W<0||O>this.height)return!1;const ee=[];return this._forEachCell(C,O,z,W,this._queryCellCircle,ee,{hitTest:!0,overlapMode:g,circle:{x:r,y:u,radius:d},seenUids:{box:{},circle:{}}},_),ee.length>0}_queryCell(r,u,d,g,_,C,z,O){const{seenUids:W,hitTest:ee,overlapMode:le}=z,he=this.boxCells[_];if(he!==null){const Ae=this.bboxes;for(const Ie of he)if(!W.box[Ie]){W.box[Ie]=!0;const Ge=4*Ie,Xe=this.boxKeys[Ie];if(r<=Ae[Ge+2]&&u<=Ae[Ge+3]&&d>=Ae[Ge+0]&&g>=Ae[Ge+1]&&(!O||O(Xe))&&(!ee||!P(le,Xe.overlapMode))&&(C.push({key:Xe,x1:Ae[Ge],y1:Ae[Ge+1],x2:Ae[Ge+2],y2:Ae[Ge+3]}),ee))return!0}}const ke=this.circleCells[_];if(ke!==null){const Ae=this.circles;for(const Ie of ke)if(!W.circle[Ie]){W.circle[Ie]=!0;const Ge=3*Ie,Xe=this.circleKeys[Ie];if(this._circleAndRectCollide(Ae[Ge],Ae[Ge+1],Ae[Ge+2],r,u,d,g)&&(!O||O(Xe))&&(!ee||!P(le,Xe.overlapMode))){const Je=Ae[Ge],ze=Ae[Ge+1],nt=Ae[Ge+2];if(C.push({key:Xe,x1:Je-nt,y1:ze-nt,x2:Je+nt,y2:ze+nt}),ee)return!0}}}return!1}_queryCellCircle(r,u,d,g,_,C,z,O){const{circle:W,seenUids:ee,overlapMode:le}=z,he=this.boxCells[_];if(he!==null){const Ae=this.bboxes;for(const Ie of he)if(!ee.box[Ie]){ee.box[Ie]=!0;const Ge=4*Ie,Xe=this.boxKeys[Ie];if(this._circleAndRectCollide(W.x,W.y,W.radius,Ae[Ge+0],Ae[Ge+1],Ae[Ge+2],Ae[Ge+3])&&(!O||O(Xe))&&!P(le,Xe.overlapMode))return C.push(!0),!0}}const ke=this.circleCells[_];if(ke!==null){const Ae=this.circles;for(const Ie of ke)if(!ee.circle[Ie]){ee.circle[Ie]=!0;const Ge=3*Ie,Xe=this.circleKeys[Ie];if(this._circlesCollide(Ae[Ge],Ae[Ge+1],Ae[Ge+2],W.x,W.y,W.radius)&&(!O||O(Xe))&&!P(le,Xe.overlapMode))return C.push(!0),!0}}}_forEachCell(r,u,d,g,_,C,z,O){const W=this._convertToXCellCoord(r),ee=this._convertToYCellCoord(u),le=this._convertToXCellCoord(d),he=this._convertToYCellCoord(g);for(let ke=W;ke<=le;ke++)for(let Ae=ee;Ae<=he;Ae++)if(_.call(this,r,u,d,g,this.xCellCount*Ae+ke,C,z,O))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,d,g,_,C){const z=g-r,O=_-u,W=d+C;return W*W>z*z+O*O}_circleAndRectCollide(r,u,d,g,_,C,z){const O=(C-g)/2,W=Math.abs(r-(g+O));if(W>O+d)return!1;const ee=(z-_)/2,le=Math.abs(u-(_+ee));if(le>ee+d)return!1;if(W<=O||le<=ee)return!0;const he=W-O,ke=le-ee;return he*he+ke*ke<=d*d}}function Se(p,r,u,d,g){const _=l.create();return r?(l.scale(_,_,[1/g,1/g,1]),u||l.rotateZ(_,_,d.angle)):l.multiply(_,d.labelPlaneMatrix,p),_}function Be(p,r,u,d,g){if(r){const _=l.clone(p);return l.scale(_,_,[g,g,1]),u||l.rotateZ(_,_,-d.angle),_}return d.glCoordMatrix}function We(p,r,u){let d;u?(d=[p.x,p.y,u(p.x,p.y),1],l.transformMat4(d,d,r)):(d=[p.x,p.y,0,1],ir(d,d,r));const g=d[3];return{point:new l.pointGeometry(d[0]/g,d[1]/g),signedDistanceFromCamera:g}}function it(p,r){return .5+p/r*.5}function qt(p,r){const u=p[0]/p[3],d=p[1]/p[3];return u>=-r[0]&&u<=r[0]&&d>=-r[1]&&d<=r[1]}function xn(p,r,u,d,g,_,C,z,O,W){const ee=d?p.textSizeData:p.iconSizeData,le=l.evaluateSizeForZoom(ee,u.transform.zoom),he=[256/u.width*2+1,256/u.height*2+1],ke=d?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ke.clear();const Ae=p.lineVertexArray,Ie=d?p.text.placedSymbolArray:p.icon.placedSymbolArray,Ge=u.transform.width/u.transform.height;let Xe=!1;for(let Je=0;Je<Ie.length;Je++){const ze=Ie.get(Je);if(ze.hidden||ze.writingMode===l.WritingMode.vertical&&!Xe){hn(ze.numGlyphs,ke);continue}let nt;if(Xe=!1,W?(nt=[ze.anchorX,ze.anchorY,W(ze.anchorX,ze.anchorY),1],l.transformMat4(nt,nt,r)):(nt=[ze.anchorX,ze.anchorY,0,1],ir(nt,nt,r)),!qt(nt,he)){hn(ze.numGlyphs,ke);continue}const et=it(u.transform.cameraToCenterDistance,nt[3]),ht=l.evaluateSizeForFeature(ee,le,ze),ft=C?ht/et:ht*et,wt=new l.pointGeometry(ze.anchorX,ze.anchorY),lt=We(wt,g,W).point,Bt={},Mt=Dt(ze,ft,!1,z,r,g,_,p.glyphOffsetArray,Ae,ke,lt,wt,Bt,Ge,O,W);Xe=Mt.useVertical,(Mt.notEnoughRoom||Xe||Mt.needsFlipping&&Dt(ze,ft,!0,z,r,g,_,p.glyphOffsetArray,Ae,ke,lt,wt,Bt,Ge,O,W).notEnoughRoom)&&hn(ze.numGlyphs,ke)}d?p.text.dynamicLayoutVertexBuffer.updateData(ke):p.icon.dynamicLayoutVertexBuffer.updateData(ke)}function Sn(p,r,u,d,g,_,C,z,O,W,ee,le,he){const ke=z.glyphStartIndex+z.numGlyphs,Ae=z.lineStartIndex,Ie=z.lineStartIndex+z.lineLength,Ge=r.getoffsetX(z.glyphStartIndex),Xe=r.getoffsetX(ke-1),Je=mr(p*Ge,u,d,g,_,C,z.segment,Ae,Ie,O,W,ee,le,he);if(!Je)return null;const ze=mr(p*Xe,u,d,g,_,C,z.segment,Ae,Ie,O,W,ee,le,he);return ze?{first:Je,last:ze}:null}function _t(p,r,u,d){return p===l.WritingMode.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*d?{useVertical:!0}:(p===l.WritingMode.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function Dt(p,r,u,d,g,_,C,z,O,W,ee,le,he,ke,Ae,Ie){const Ge=r/24,Xe=p.lineOffsetX*Ge,Je=p.lineOffsetY*Ge;let ze;if(p.numGlyphs>1){const nt=p.glyphStartIndex+p.numGlyphs,et=p.lineStartIndex,ht=p.lineStartIndex+p.lineLength,ft=Sn(Ge,z,Xe,Je,u,ee,le,p,O,_,he,Ae,Ie);if(!ft)return{notEnoughRoom:!0};const wt=We(ft.first.point,C,Ie).point,lt=We(ft.last.point,C,Ie).point;if(d&&!u){const Bt=_t(p.writingMode,wt,lt,ke);if(Bt)return Bt}ze=[ft.first];for(let Bt=p.glyphStartIndex+1;Bt<nt-1;Bt++)ze.push(mr(Ge*z.getoffsetX(Bt),Xe,Je,u,ee,le,p.segment,et,ht,O,_,he,Ae,Ie));ze.push(ft.last)}else{if(d&&!u){const et=We(le,g,Ie).point,ht=p.lineStartIndex+p.segment+1,ft=new l.pointGeometry(O.getx(ht),O.gety(ht)),wt=We(ft,g,Ie),lt=wt.signedDistanceFromCamera>0?wt.point:cn(le,ft,et,1,g,Ie),Bt=_t(p.writingMode,et,lt,ke);if(Bt)return Bt}const nt=mr(Ge*z.getoffsetX(p.glyphStartIndex),Xe,Je,u,ee,le,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,O,_,he,Ae,Ie);if(!nt)return{notEnoughRoom:!0};ze=[nt]}for(const nt of ze)l.addDynamicAttributes(W,nt.point,nt.angle);return{}}function cn(p,r,u,d,g,_){const C=We(p.add(p.sub(r)._unit()),g,_).point,z=u.sub(C);return u.add(z._mult(d/z.mag()))}function mr(p,r,u,d,g,_,C,z,O,W,ee,le,he,ke){const Ae=d?p-r:p+r;let Ie=Ae>0?1:-1,Ge=0;d&&(Ie*=-1,Ge=Math.PI),Ie<0&&(Ge+=Math.PI);let Xe=Ie>0?z+C:z+C+1,Je=g,ze=g,nt=0,et=0;const ht=Math.abs(Ae),ft=[];for(;nt+et<=ht;){if(Xe+=Ie,Xe<z||Xe>=O)return null;if(ze=Je,ft.push(Je),Je=le[Xe],Je===void 0){const Ut=new l.pointGeometry(W.getx(Xe),W.gety(Xe)),wn=We(Ut,ee,ke);if(wn.signedDistanceFromCamera>0)Je=le[Xe]=wn.point;else{const An=Xe-Ie;Je=cn(nt===0?_:new l.pointGeometry(W.getx(An),W.gety(An)),Ut,ze,ht-nt+1,ee,ke)}}nt+=et,et=ze.dist(Je)}const wt=(ht-nt)/et,lt=Je.sub(ze),Bt=lt.mult(wt)._add(ze);Bt._add(lt._unit()._perp()._mult(u*Ie));const Mt=Ge+Math.atan2(Je.y-ze.y,Je.x-ze.x);return ft.push(Bt),{point:Bt,angle:he?Mt:0,path:ft}}const Ci=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function hn(p,r){for(let u=0;u<p;u++){const d=r.length;r.resize(d+4),r.float32.set(Ci,3*d)}}function ir(p,r,u){const d=r[0],g=r[1];return p[0]=u[0]*d+u[4]*g+u[12],p[1]=u[1]*d+u[5]*g+u[13],p[3]=u[3]*d+u[7]*g+u[15],p}const wr=100;class ei{constructor(r,u=new L(r.width+200,r.height+200,25),d=new L(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+wr,this.screenBottomBoundary=r.height+wr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,d,g,_,C){const z=this.projectAndGetPerspectiveRatio(g,r.anchorPointX,r.anchorPointY,C),O=d*z.perspectiveRatio,W=r.x1*O+z.point.x,ee=r.y1*O+z.point.y,le=r.x2*O+z.point.x,he=r.y2*O+z.point.y;return!this.isInsideGrid(W,ee,le,he)||u!=="always"&&this.grid.hitTest(W,ee,le,he,u,_)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[W,ee,le,he],offscreen:this.isOffscreen(W,ee,le,he)}}placeCollisionCircles(r,u,d,g,_,C,z,O,W,ee,le,he,ke,Ae){const Ie=[],Ge=new l.pointGeometry(u.anchorX,u.anchorY),Xe=We(Ge,C,Ae),Je=it(this.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),ze=(ee?_/Je:_*Je)/l.ONE_EM,nt=We(Ge,z,Ae).point,et=Sn(ze,g,u.lineOffsetX*ze,u.lineOffsetY*ze,!1,nt,Ge,u,d,z,{},!1,Ae);let ht=!1,ft=!1,wt=!0;if(et){const lt=.5*he*Je+ke,Bt=new l.pointGeometry(-100,-100),Mt=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ut=new se,wn=et.first,An=et.last;let on=[];for(let On=wn.path.length-1;On>=1;On--)on.push(wn.path[On]);for(let On=1;On<An.path.length;On++)on.push(An.path[On]);const qn=2.5*lt;if(O){const On=on.map(Dn=>We(Dn,O,Ae));on=On.some(Dn=>Dn.signedDistanceFromCamera<=0)?[]:On.map(Dn=>Dn.point)}let Kn=[];if(on.length>0){const On=on[0].clone(),Dn=on[0].clone();for(let Qn=1;Qn<on.length;Qn++)On.x=Math.min(On.x,on[Qn].x),On.y=Math.min(On.y,on[Qn].y),Dn.x=Math.max(Dn.x,on[Qn].x),Dn.y=Math.max(Dn.y,on[Qn].y);Kn=On.x>=Bt.x&&Dn.x<=Mt.x&&On.y>=Bt.y&&Dn.y<=Mt.y?[on]:Dn.x<Bt.x||On.x>Mt.x||Dn.y<Bt.y||On.y>Mt.y?[]:l.clipLine([on],Bt.x,Bt.y,Mt.x,Mt.y)}for(const On of Kn){Ut.reset(On,.25*lt);let Dn=0;Dn=Ut.length<=.5*lt?1:Math.ceil(Ut.paddedLength/qn)+1;for(let Qn=0;Qn<Dn;Qn++){const Xr=Qn/Math.max(Dn-1,1),Uo=Ut.lerp(Xr),vo=Uo.x+wr,$o=Uo.y+wr;Ie.push(vo,$o,lt,0);const Va=vo-lt,ao=$o-lt,Ii=vo+lt,ia=$o+lt;if(wt=wt&&this.isOffscreen(Va,ao,Ii,ia),ft=ft||this.isInsideGrid(Va,ao,Ii,ia),r!=="always"&&this.grid.hitTestCircle(vo,$o,lt,r,le)&&(ht=!0,!W))return{circles:[],offscreen:!1,collisionDetected:ht}}}}return{circles:!W&&ht||!ft||Je<this.perspectiveRatioCutoff?[]:Ie,offscreen:wt,collisionDetected:ht}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let d=1/0,g=1/0,_=-1/0,C=-1/0;for(const ee of r){const le=new l.pointGeometry(ee.x+wr,ee.y+wr);d=Math.min(d,le.x),g=Math.min(g,le.y),_=Math.max(_,le.x),C=Math.max(C,le.y),u.push(le)}const z=this.grid.query(d,g,_,C).concat(this.ignoredGrid.query(d,g,_,C)),O={},W={};for(const ee of z){const le=ee.key;if(O[le.bucketInstanceId]===void 0&&(O[le.bucketInstanceId]={}),O[le.bucketInstanceId][le.featureIndex])continue;const he=[new l.pointGeometry(ee.x1,ee.y1),new l.pointGeometry(ee.x2,ee.y1),new l.pointGeometry(ee.x2,ee.y2),new l.pointGeometry(ee.x1,ee.y2)];l.polygonIntersectsPolygon(u,he)&&(O[le.bucketInstanceId][le.featureIndex]=!0,W[le.bucketInstanceId]===void 0&&(W[le.bucketInstanceId]=[]),W[le.bucketInstanceId].push(le.featureIndex))}return W}insertCollisionBox(r,u,d,g,_,C){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,d,g,_,C){const z=d?this.ignoredGrid:this.grid,O={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let W=0;W<r.length;W+=4)z.insertCircle(O,r[W],r[W+1],r[W+2])}projectAndGetPerspectiveRatio(r,u,d,g){let _;return g?(_=[u,d,g(u,d),1],l.transformMat4(_,_,r)):(_=[u,d,0,1],ir(_,_,r)),{point:new l.pointGeometry((_[0]/_[3]+1)/2*this.transform.width+wr,(-_[1]/_[3]+1)/2*this.transform.height+wr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,d,g){return d<wr||r>=this.screenRightBoundary||g<wr||u>this.screenBottomBoundary}isInsideGrid(r,u,d,g){return d>=0&&r<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=l.identity([]);return l.translate(r,r,[-100,-100,0]),r}}function gr(p,r,u){return r*(l.EXTENT/(p.tileSize*Math.pow(2,u-p.tileID.overscaledZ)))}class yn{constructor(r,u,d,g){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):g&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Ct{constructor(r,u,d,g,_){this.text=new yn(r?r.text:null,u,d,_),this.icon=new yn(r?r.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class sn{constructor(r,u,d){this.text=r,this.icon=u,this.skipFade=d}}class Tn{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class yr{constructor(r,u,d,g,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=g,this.tileID=_}}class vr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[r]}}function ti(p,r,u,d,g){const{horizontalAlign:_,verticalAlign:C}=l.getAnchorAlignment(p),z=-(_-.5)*r,O=-(C-.5)*u,W=l.evaluateVariableOffset(p,d);return new l.pointGeometry(z+W[0]*g,O+W[1]*g)}function yi(p,r,u,d,g,_){const{x1:C,x2:z,y1:O,y2:W,anchorPointX:ee,anchorPointY:le}=p,he=new l.pointGeometry(r,u);return d&&he._rotate(g?_:-_),{x1:C+he.x,y1:O+he.y,x2:z+he.x,y2:W+he.y,anchorPointX:ee,anchorPointY:le}}class Ce{constructor(r,u,d,g,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new ei(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new vr(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,d,g){const _=d.getBucket(u),C=d.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const z=d.collisionBoxArray,O=_.layers[0].layout,W=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),ee=d.tileSize/l.EXTENT,le=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),he=O.get("text-pitch-alignment")==="map",ke=O.get("text-rotation-alignment")==="map",Ae=gr(d,1,this.transform.zoom),Ie=Se(le,he,ke,this.transform,Ae);let Ge=null;if(he){const Je=Be(le,he,ke,this.transform,Ae);Ge=l.multiply([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[_.bucketInstanceId]=new yr(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,d.tileID);const Xe={bucket:_,layout:O,posMatrix:le,textLabelPlaneMatrix:Ie,labelToScreenMatrix:Ge,scale:W,textPixelRatio:ee,holdingForFade:d.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Je of _.sortKeyRanges){const{sortKey:ze,symbolInstanceStart:nt,symbolInstanceEnd:et}=Je;r.push({sortKey:ze,symbolInstanceStart:nt,symbolInstanceEnd:et,parameters:Xe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Xe})}attemptAnchorPlacement(r,u,d,g,_,C,z,O,W,ee,le,he,ke,Ae,Ie,Ge){const Xe=[he.textOffset0,he.textOffset1],Je=ti(r,d,g,Xe,_),ze=this.collisionIndex.placeCollisionBox(yi(u,Je.x,Je.y,C,z,this.transform.angle),le,O,W,ee.predicate,Ge);if((!Ie||this.collisionIndex.placeCollisionBox(yi(Ie,Je.x,Je.y,C,z,this.transform.angle),le,O,W,ee.predicate,Ge).box.length!==0)&&ze.box.length>0){let nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID]&&this.prevPlacement.placements[he.crossTileID].text&&(nt=this.prevPlacement.variableOffsets[he.crossTileID].anchor),he.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[he.crossTileID]={textOffset:Xe,width:d,height:g,anchor:r,textBoxScale:_,prevAnchor:nt},this.markUsedJustification(ke,r,he,Ae),ke.allowVerticalPlacement&&(this.markUsedOrientation(ke,Ae,he),this.placedOrientations[he.crossTileID]=Ae),{shift:Je,placedGlyphBoxes:ze}}}placeLayerBucketPart(r,u,d){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:z,labelToScreenMatrix:O,textPixelRatio:W,holdingForFade:ee,collisionBoxArray:le,partiallyEvaluatedTextSize:he,collisionGroup:ke}=r.parameters,Ae=_.get("text-optional"),Ie=_.get("icon-optional"),Ge=l.getOverlapMode(_,"text-overlap","text-allow-overlap"),Xe=Ge==="always",Je=l.getOverlapMode(_,"icon-overlap","icon-allow-overlap"),ze=Je==="always",nt=_.get("text-rotation-alignment")==="map",et=_.get("text-pitch-alignment")==="map",ht=_.get("icon-text-fit")!=="none",ft=_.get("symbol-z-order")==="viewport-y",wt=Xe&&(ze||!g.hasIconData()||Ie),lt=ze&&(Xe||!g.hasTextData()||Ae);!g.collisionArrays&&le&&g.deserializeCollisionBoxes(le);const Bt=(Mt,Ut)=>{if(u[Mt.crossTileID])return;if(ee)return void(this.placements[Mt.crossTileID]=new sn(!1,!1,!1));let wn=!1,An=!1,on=!0,qn=null,Kn={box:null,offscreen:null},On={box:null,offscreen:null},Dn=null,Qn=null,Xr=null,Uo=0,vo=0,$o=0;Ut.textFeatureIndex?Uo=Ut.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(Uo=Mt.featureIndex),Ut.verticalTextFeatureIndex&&(vo=Ut.verticalTextFeatureIndex);const Va=this.retainedQueryData[g.bucketInstanceId].tileID,ao=this.terrain?(Gr,Mn)=>this.terrain.getElevation(Va,Gr,Mn):null;for(const Gr of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Mn=Ut[Gr];Mn&&(Mn.elevation=ao?ao(Mn.anchorPointX,Mn.anchorPointY):0)}const Ii=Ut.textBox;if(Ii){const Gr=Zn=>{let qr=l.WritingMode.horizontal;if(g.allowVerticalPlacement&&!Zn&&this.prevPlacement){const Kr=this.prevPlacement.placedOrientations[Mt.crossTileID];Kr&&(this.placedOrientations[Mt.crossTileID]=Kr,qr=Kr,this.markUsedOrientation(g,qr,Mt))}return qr},Mn=(Zn,qr)=>{if(g.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&Ut.verticalTextBox){for(const Kr of g.writingModes)if(Kr===l.WritingMode.vertical?(Kn=qr(),On=Kn):Kn=Zn(),Kn&&Kn.box&&Kn.box.length)break}else Kn=Zn()};if(_.get("text-variable-anchor")){let Zn=_.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Mt.crossTileID]){const fr=this.prevPlacement.variableOffsets[Mt.crossTileID];Zn.indexOf(fr.anchor)>0&&(Zn=Zn.filter(so=>so!==fr.anchor),Zn.unshift(fr.anchor))}const qr=(fr,so,xs)=>{const kh=fr.x2-fr.x1,cl=fr.y2-fr.y1,Sd=Mt.textBoxScale,Mh=ht&&Je==="never"?so:null;let Ga={box:[],offscreen:!1};const ws=Ge!=="never"?2*Zn.length:Zn.length;for(let bs=0;bs<ws;++bs){const ac=this.attemptAnchorPlacement(Zn[bs%Zn.length],fr,kh,cl,Sd,nt,et,W,C,ke,bs>=Zn.length?Ge:"never",Mt,g,xs,Mh,ao);if(ac&&(Ga=ac.placedGlyphBoxes,Ga&&Ga.box&&Ga.box.length)){wn=!0,qn=ac.shift;break}}return Ga};Mn(()=>qr(Ii,Ut.iconBox,l.WritingMode.horizontal),()=>{const fr=Ut.verticalTextBox;return g.allowVerticalPlacement&&!(Kn&&Kn.box&&Kn.box.length)&&Mt.numVerticalGlyphVertices>0&&fr?qr(fr,Ut.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Kn&&(wn=Kn.box,on=Kn.offscreen);const Kr=Gr(Kn&&Kn.box);if(!wn&&this.prevPlacement){const fr=this.prevPlacement.variableOffsets[Mt.crossTileID];fr&&(this.variableOffsets[Mt.crossTileID]=fr,this.markUsedJustification(g,fr.anchor,Mt,Kr))}}else{const Zn=(qr,Kr)=>{const fr=this.collisionIndex.placeCollisionBox(qr,Ge,W,C,ke.predicate,ao);return fr&&fr.box&&fr.box.length&&(this.markUsedOrientation(g,Kr,Mt),this.placedOrientations[Mt.crossTileID]=Kr),fr};Mn(()=>Zn(Ii,l.WritingMode.horizontal),()=>{const qr=Ut.verticalTextBox;return g.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&qr?Zn(qr,l.WritingMode.vertical):{box:null,offscreen:null}}),Gr(Kn&&Kn.box&&Kn.box.length)}}if(Dn=Kn,wn=Dn&&Dn.box&&Dn.box.length>0,on=Dn&&Dn.offscreen,Mt.useRuntimeCollisionCircles){const Gr=g.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex),Mn=l.evaluateSizeForFeature(g.textSizeData,he,Gr),Zn=_.get("text-padding");Qn=this.collisionIndex.placeCollisionCircles(Ge,Gr,g.lineVertexArray,g.glyphOffsetArray,Mn,C,z,O,d,et,ke.predicate,Mt.collisionCircleDiameter,Zn,ao),Qn.circles.length&&Qn.collisionDetected&&!d&&l.warnOnce("Collisions detected, but collision boxes are not shown"),wn=Xe||Qn.circles.length>0&&!Qn.collisionDetected,on=on&&Qn.offscreen}if(Ut.iconFeatureIndex&&($o=Ut.iconFeatureIndex),Ut.iconBox){const Gr=Mn=>{const Zn=ht&&qn?yi(Mn,qn.x,qn.y,nt,et,this.transform.angle):Mn;return this.collisionIndex.placeCollisionBox(Zn,Je,W,C,ke.predicate,ao)};On&&On.box&&On.box.length&&Ut.verticalIconBox?(Xr=Gr(Ut.verticalIconBox),An=Xr.box.length>0):(Xr=Gr(Ut.iconBox),An=Xr.box.length>0),on=on&&Xr.offscreen}const ia=Ae||Mt.numHorizontalGlyphVertices===0&&Mt.numVerticalGlyphVertices===0,oc=Ie||Mt.numIconVertices===0;if(ia||oc?oc?ia||(An=An&&wn):wn=An&&wn:An=wn=An&&wn,wn&&Dn&&Dn.box&&this.collisionIndex.insertCollisionBox(Dn.box,Ge,_.get("text-ignore-placement"),g.bucketInstanceId,On&&On.box&&vo?vo:Uo,ke.ID),An&&Xr&&this.collisionIndex.insertCollisionBox(Xr.box,Je,_.get("icon-ignore-placement"),g.bucketInstanceId,$o,ke.ID),Qn&&(wn&&this.collisionIndex.insertCollisionCircles(Qn.circles,Ge,_.get("text-ignore-placement"),g.bucketInstanceId,Uo,ke.ID),d)){const Gr=g.bucketInstanceId;let Mn=this.collisionCircleArrays[Gr];Mn===void 0&&(Mn=this.collisionCircleArrays[Gr]=new Tn);for(let Zn=0;Zn<Qn.circles.length;Zn+=4)Mn.circles.push(Qn.circles[Zn+0]),Mn.circles.push(Qn.circles[Zn+1]),Mn.circles.push(Qn.circles[Zn+2]),Mn.circles.push(Qn.collisionDetected?1:0)}if(Mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Mt.crossTileID]=new sn(wn||wt,An||lt,on||g.justReloaded),u[Mt.crossTileID]=!0};if(ft){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Mt=g.getSortedSymbolIndexes(this.transform.angle);for(let Ut=Mt.length-1;Ut>=0;--Ut){const wn=Mt[Ut];Bt(g.symbolInstances.get(wn),g.collisionArrays[wn])}}else for(let Mt=r.symbolInstanceStart;Mt<r.symbolInstanceEnd;Mt++)Bt(g.symbolInstances.get(Mt),g.collisionArrays[Mt]);if(d&&g.bucketInstanceId in this.collisionCircleArrays){const Mt=this.collisionCircleArrays[g.bucketInstanceId];l.invert(Mt.invProjMatrix,C),Mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(r,u,d,g){let _;_=g===l.WritingMode.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const C=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const z of C)z>=0&&(r.text.placedSymbolArray.get(z).crossTileID=_>=0&&z!==_?0:d.crossTileID)}markUsedOrientation(r,u,d){const g=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,_=u===l.WritingMode.vertical?u:0,C=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const z of C)r.text.placedSymbolArray.get(z).placedOrientation=g;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},z=u?u.placedOrientations:{};for(const O in this.placements){const W=this.placements[O],ee=_[O];ee?(this.opacities[O]=new Ct(ee,g,W.text,W.icon),d=d||W.text!==ee.text.placed||W.icon!==ee.icon.placed):(this.opacities[O]=new Ct(null,g,W.text,W.icon,W.skipFade),d=d||W.text||W.icon)}for(const O in _){const W=_[O];if(!this.opacities[O]){const ee=new Ct(W,g,!1,!1);ee.isHidden()||(this.opacities[O]=ee,d=d||W.text.placed||W.icon.placed)}}for(const O in C)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=C[O]);for(const O in z)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=z[O]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const d={};for(const g of u){const _=g.getBucket(r);_&&g.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,d,g.collisionBoxArray)}}updateBucketOpacities(r,u,d){r.hasTextData()&&r.text.opacityVertexArray.clear(),r.hasIconData()&&r.icon.opacityVertexArray.clear(),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const g=r.layers[0].layout,_=new Ct(null,0,!1,!1,!0),C=g.get("text-allow-overlap"),z=g.get("icon-allow-overlap"),O=g.get("text-variable-anchor"),W=g.get("text-rotation-alignment")==="map",ee=g.get("text-pitch-alignment")==="map",le=g.get("icon-text-fit")!=="none",he=new Ct(null,0,C&&(z||!r.hasIconData()||g.get("icon-optional")),z&&(C||!r.hasTextData()||g.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const ke=(Ae,Ie,Ge)=>{for(let Xe=0;Xe<Ie/4;Xe++)Ae.opacityVertexArray.emplaceBack(Ge)};for(let Ae=0;Ae<r.symbolInstances.length;Ae++){const Ie=r.symbolInstances.get(Ae),{numHorizontalGlyphVertices:Ge,numVerticalGlyphVertices:Xe,crossTileID:Je}=Ie;let ze=this.opacities[Je];u[Je]?ze=_:ze||(ze=he,this.opacities[Je]=ze),u[Je]=!0;const nt=Ie.numIconVertices>0,et=this.placedOrientations[Ie.crossTileID],ht=et===l.WritingMode.vertical,ft=et===l.WritingMode.horizontal||et===l.WritingMode.horizontalOnly;if(Ge>0||Xe>0){const wt=He(ze.text);ke(r.text,Ge,ht?st:wt),ke(r.text,Xe,ft?st:wt);const lt=ze.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(Ut=>{Ut>=0&&(r.text.placedSymbolArray.get(Ut).hidden=lt||ht?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=lt||ft?1:0);const Bt=this.variableOffsets[Ie.crossTileID];Bt&&this.markUsedJustification(r,Bt.anchor,Ie,et);const Mt=this.placedOrientations[Ie.crossTileID];Mt&&(this.markUsedJustification(r,"left",Ie,Mt),this.markUsedOrientation(r,Mt,Ie))}if(nt){const wt=He(ze.icon),lt=!(le&&Ie.verticalPlacedIconSymbolIndex&&ht);Ie.placedIconSymbolIndex>=0&&(ke(r.icon,Ie.numIconVertices,lt?wt:st),r.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=ze.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(ke(r.icon,Ie.numVerticalIconVertices,lt?st:wt),r.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const wt=r.collisionArrays[Ae];if(wt){let lt=new l.pointGeometry(0,0);if(wt.textBox||wt.verticalTextBox){let Mt=!0;if(O){const Ut=this.variableOffsets[Je];Ut?(lt=ti(Ut.anchor,Ut.width,Ut.height,Ut.textOffset,Ut.textBoxScale),W&&lt._rotate(ee?this.transform.angle:-this.transform.angle)):Mt=!1}wt.textBox&&X(r.textCollisionBox.collisionVertexArray,ze.text.placed,!Mt||ht,lt.x,lt.y),wt.verticalTextBox&&X(r.textCollisionBox.collisionVertexArray,ze.text.placed,!Mt||ft,lt.x,lt.y)}const Bt=!!(!ft&&wt.verticalIconBox);wt.iconBox&&X(r.iconCollisionBox.collisionVertexArray,ze.icon.placed,Bt,le?lt.x:0,le?lt.y:0),wt.verticalIconBox&&X(r.iconCollisionBox.collisionVertexArray,ze.icon.placed,!Bt,le?lt.x:0,le?lt.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Ae.invProjMatrix,r.placementViewportMatrix=Ae.viewportMatrix,r.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function X(p,r,u,d,g){p.emplaceBack(r?1:0,u?1:0,d||0,g||0),p.emplaceBack(r?1:0,u?1:0,d||0,g||0),p.emplaceBack(r?1:0,u?1:0,d||0,g||0),p.emplaceBack(r?1:0,u?1:0,d||0,g||0)}const ae=Math.pow(2,25),ve=Math.pow(2,24),Ee=Math.pow(2,17),je=Math.pow(2,16),Ze=Math.pow(2,9),Ue=Math.pow(2,8),Oe=Math.pow(2,1);function He(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const r=p.placed?1:0,u=Math.floor(127*p.opacity);return u*ae+r*ve+u*Ee+r*je+u*Ze+r*Ue+u*Oe+r}const st=0;class xt{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,d,g,_){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(C,g,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((z,O)=>z.sortKey-O.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,_())return!0;return!1}}class at{constructor(r,u,d,g,_,C,z,O){this.placement=new Ce(r,u,C,z,O),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,d){const g=l.exported.now(),_=()=>{const C=l.exported.now()-g;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=u[r[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=z)&&(!C.maxzoom||C.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new xt(C)),this._inProgressLayer.continuePlacement(d[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Zt=512/l.EXTENT/2;class Wt{constructor(r,u,d){this.tileID=r,this.indexedSymbolInstances={},this.bucketInstanceId=d;for(let g=0;g<u.length;g++){const _=u.get(g),C=_.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:_.crossTileID,coord:this.getScaledCoordinates(_,r)})}}getScaledCoordinates(r,u){const d=Zt/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*l.EXTENT+r.anchorX)*d),y:Math.floor((u.canonical.y*l.EXTENT+r.anchorY)*d)}}findMatches(r,u,d){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const C=r.get(_);if(C.crossTileID)continue;const z=this.indexedSymbolInstances[C.key];if(!z)continue;const O=this.getScaledCoordinates(C,u);for(const W of z)if(Math.abs(W.coord.x-O.x)<=g&&Math.abs(W.coord.y-O.y)<=g&&!d[W.crossTileID]){d[W.crossTileID]=!0,C.crossTileID=W.crossTileID;break}}}}class Rt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class rn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const d in this.indexes){const g=this.indexes[d],_={};for(const C in g){const z=g[C];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+u),_[z.tileID.key]=z}this.indexes[d]=_}this.lng=r}addBucket(r,u,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const g=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>r.overscaledZ)for(const z in C){const O=C[z];O.tileID.isChildOf(r)&&O.findMatches(u.symbolInstances,r,g)}else{const z=C[r.scaledTo(Number(_)).key];z&&z.findMatches(u.symbolInstances,r,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=d.generate(),g[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Wt(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const d in u.indexedSymbolInstances)for(const g of u.indexedSymbolInstances[d])delete this.usedCrossTileIDs[r][g.crossTileID]}removeStaleBuckets(r){let u=!1;for(const d in this.indexes){const g=this.indexes[d];for(const _ in g)r[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,g[_]),delete g[_],u=!0)}return u}}class pn{constructor(){this.layerIndexes={},this.crossTileIDs=new Rt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,d){let g=this.layerIndexes[r.id];g===void 0&&(g=this.layerIndexes[r.id]=new rn);let _=!1;const C={};g.handleWrapJump(d);for(const z of u){const O=z.getBucket(r);O&&r.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(z.tileID,O,this.crossTileIDs)&&(_=!0),C[O.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(d=>{u[d]=!0});for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var Gt=l.createLayout([{name:"a_pos",type:"Int16",components:2}]);class ln extends l.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=r._cache.max,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const r in this._tiles){const u=this._tiles[r];u.textures.forEach(d=>d.destroy()),u.textures=[]}}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];for(const d of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),l.ortho(d.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[d.key]=new Ne(d,this.tileSize))}removeOutdated(r){const u={};this.renderHistory=this.renderHistory.filter((d,g)=>this.renderHistory.indexOf(d)===g).slice(0,this.renderHistorySize);for(const d of this._renderableTilesKeys)u[d]=!0;for(const d of this.renderHistory)u[d]=!0;for(const d in this._tiles)u[d]||(this._tiles[d].clearTextures(r),delete this._tiles[d])}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const d of this._renderableTilesKeys){const g=this._tiles[d].tileID;if(g.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),u[d]=_}else if(g.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-r.canonical.z,z=g.canonical.x-(g.canonical.x>>C<<C),O=g.canonical.y-(g.canonical.y>>C<<C),W=l.EXTENT>>C;l.ortho(_.posMatrix,0,W,0,W,0,1),l.translate(_.posMatrix,_.posMatrix,[-z*W,-O*W,0]),u[d]=_}else if(r.canonical.isChildOf(g.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const C=r.canonical.z-g.canonical.z,z=r.canonical.x-(r.canonical.x>>C<<C),O=r.canonical.y-(r.canonical.y>>C<<C),W=l.EXTENT>>C;l.ortho(_.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(_.posMatrix,_.posMatrix,[z*W,O*W,0]),l.scale(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[d]=_}}return u}getSourceTile(r,u){const d=this.sourceCache._source;let g=r.overscaledZ-this.deltaZoom;if(g>d.maxzoom&&(g=d.maxzoom),g<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;g>=d.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(g--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=r)}}class bn{constructor(r,u,d){this.style=r,this.sourceCache=new ln(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.elevationOffset=typeof d.elevationOffset=="number"?d.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(r,u,d,g=l.EXTENT){if(!(u>=0&&u<g&&d>=0&&d<g))return this.elevationOffset;let _=0;const C=this.getTerrainData(r);if(C.tile&&C.tile.dem){const z=l.transformMat4$1([],[u/g*l.EXTENT,d/g*l.EXTENT],C.u_terrain_matrix),O=[z[0]*C.tile.dem.dim,z[1]*C.tile.dem.dim],W=[Math.floor(O[0]),Math.floor(O[1])],ee=C.tile.dem.get(W[0],W[1]),le=C.tile.dem.get(W[0],W[1]+1),he=C.tile.dem.get(W[0]+1,W[1]),ke=C.tile.dem.get(W[0]+1,W[1]+1);_=l.number(l.number(ee,le,O[0]-W[0]),l.number(he,ke,O[0]-W[0]),O[1]-W[1])}return _}rememberForRerender(r,u){for(const d in this.sourceCache._tiles){const g=this.sourceCache._tiles[d];(g.tileID.equals(u)||g.tileID.isChildOf(u))&&(r===this.sourceCache.sourceCache.id&&(g.timeLoaded=Date.now()),this._rerender[r]=this._rerender[r]||{},this._rerender[r][g.tileID.key]=!0)}}needsRerender(r,u){return this._rerender[r]&&this._rerender[r][u.key]}clearRerenderCache(){this._rerender={}}getElevation(r,u,d,g=l.EXTENT){return(this.getDEMElevation(r,u,d,g)+this.elevationOffset)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const g=this.style.map.painter.context,_=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new H(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new H(g,new l.RGBAImage({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new H(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u+u.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=g?_=r.canonical.z-g:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>_<<_),z=r.canonical.y-(r.canonical.y>>_<<_),O=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<_),1/(l.EXTENT<<_),0]);l.translate(O,O,[C*l.EXTENT,z*l.EXTENT,0]),this._demMatrixCache[r.key]={matrix:O,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const r=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=r.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(r){const u=this.style.map.painter,d=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new H(u.context,{width:d,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new H(u.context,{width:d,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,g,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,g))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let z=0;z<this._coordsTextureSize;z++,C+=4)u[C+0]=255&z,u[C+1]=255&_,u[C+2]=z>>8<<4|_>>8,u[C+3]=0;const d=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new H(r,d,r.gl.RGBA,{premultiply:!1});return g.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(r){const u=new Uint8Array(4),d=this.style.map.painter,g=d.context,_=g.gl;g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(r.x,d.height/devicePixelRatio-r.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),g.bindFramebuffer.set(null);const C=u[0]+(u[2]>>4<<8),z=u[1]+((15&u[2])<<8),O=this.coordsIndex[255-u[3]],W=O&&this.sourceCache.getTileByID(O);if(!W)return null;const ee=this._coordsTextureSize,le=(1<<W.tileID.canonical.z)*ee;return new l.MercatorCoordinate((W.tileID.canonical.x*ee+C)/le,(W.tileID.canonical.y*ee+z)/le,this.getElevation(W.tileID,C,z,ee))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.style.map.painter.context,u=new l.PosArray,d=new l.TriangleIndexArray,g=this.meshSize,_=l.EXTENT/g,C=g*g;for(let z=0;z<=g;z++)for(let O=0;O<=g;O++)u.emplaceBack(O*_,z*_);for(let z=0;z<C;z+=g+1)for(let O=0;O<g;O++)d.emplaceBack(O+z,g+O+z+1,g+O+z+2),d.emplaceBack(O+z,g+O+z+2,O+z+1);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(u,Gt.members),segments:l.SegmentVector.simpleSegment(0,0,u.length,d.length)},this._mesh}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,d.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),d}}const Rn=(p,r)=>l.emitValidationErrors(p,r&&r.filter(u=>u.identifier!=="source.canvas")),Hn=l.pick(Vt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Or=l.pick(Vt,["setCenter","setZoom","setBearing","setPitch"]),or=function(){const p={},r=l.spec.$version;for(const u in l.spec.$root){const d=l.spec.$root[u];if(d.required){let g=null;g=u==="version"?r:d.type==="array"?[]:{},g!=null&&(p[u]=g)}}return p}();class lr extends l.Evented{constructor(r,u={}){super(),this.map=r,this.dispatcher=new Y(Pn(),this),this.imageManager=new Z,this.imageManager.setEventedParent(this),this.glyphManager=new V(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new G(256,512),this.crossTileSymbolIndex=new pn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const d=this;this._rtlTextPluginCallback=lr.registerForPluginStateChange(g=>{d.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(l.triggerPluginCompletionEvent(_),C&&C.every(z=>z))for(const z in d.sourceCaches)d.sourceCaches[z].reload()})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const z in this._layers){const O=this._layers[z];O.source===C.id&&this._validateLayer(O)}})}loadURL(r,u={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const d=typeof u.validate!="boolean"||u.validate,g=this.map._requestManager.transformRequest(r,l.ResourceType.Style);this._request=l.getJSON(g,(_,C)=>{this._request=null,_?this.fire(new l.ErrorEvent(_)):C&&this._load(C,d)})}loadJSON(r,u={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(r,u.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(or,!1)}_load(r,u){if(u&&Rn(this,l.validateStyle(r)))return;this._loaded=!0,this.stylesheet=r;for(const g in r.sources)this.addSource(g,r.sources[g],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);const d=mn(this.stylesheet.layers);this._order=d.map(g=>g.id),this._layers={},this._serializedLayers={};for(let g of d)g=l.createStyleLayer(g),g.setEventedParent(this,{layer:{id:g.id}}),this._layers[g.id]=g,this._serializedLayers[g.id]=g.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(r){this._spriteRequest=function(u,d,g,_){let C,z,O;const W=g>1?"@2x":"";let ee=l.getJSON(d.transformRequest(d.normalizeSpriteURL(u,W,".json"),l.ResourceType.SpriteJSON),(ke,Ae)=>{ee=null,O||(O=ke,C=Ae,he())}),le=l.getImage(d.transformRequest(d.normalizeSpriteURL(u,W,".png"),l.ResourceType.SpriteImage),(ke,Ae)=>{le=null,O||(O=ke,z=Ae,he())});function he(){if(O)_(O);else if(C&&z){const ke=l.exported.getImageData(z),Ae={};for(const Ie in C){const{width:Ge,height:Xe,x:Je,y:ze,sdf:nt,pixelRatio:et,stretchX:ht,stretchY:ft,content:wt}=C[Ie],lt=new l.RGBAImage({width:Ge,height:Xe});l.RGBAImage.copy(ke,lt,{x:Je,y:ze},{x:0,y:0},{width:Ge,height:Xe}),Ae[Ie]={data:lt,pixelRatio:et,sdf:nt,stretchX:ht,stretchY:ft,content:wt}}_(null,Ae)}}return{cancel(){ee&&(ee.cancel(),ee=null),le&&(le.cancel(),le=null)}}}(r,this.map._requestManager,this.map.getPixelRatio(),(u,d)=>{if(this._spriteRequest=null,u)this.fire(new l.ErrorEvent(u));else if(d)for(const g in d)this.imageManager.addImage(g,d[g]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const d=r.sourceLayer;if(!d)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(d)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${d}" does not exist on source "${g.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(r){const u=[];for(const d of r){const g=this._layers[d];g.type!=="custom"&&u.push(g.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const z=this._updatedSources[C];if(z==="reload")this._reloadSource(C);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(C)}}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];d[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in d){const _=this.sourceCaches[g];d[g]!==_.used&&_.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(r){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),r){const u=this.sourceCaches[r.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${r.source}`);this.terrain=new bn(this,u,r),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=d=>{d.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=d=>{d.tile&&(d.sourceId===r.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(d.sourceId,d.tile.tileID)):d.source.type==="geojson"&&this.terrain.rememberForRerender(d.sourceId,d.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new l.Event("terrain",{terrain:r}))}setState(r){if(this._checkLoaded(),Rn(this,l.validateStyle(r)))return!1;(r=l.clone$1(r)).layers=mn(r.layers);const u=function(g,_){if(!g)return[{command:Vt.setStyle,args:[_]}];let C=[];try{if(!S(g.version,_.version))return[{command:Vt.setStyle,args:[_]}];S(g.center,_.center)||C.push({command:Vt.setCenter,args:[_.center]}),S(g.zoom,_.zoom)||C.push({command:Vt.setZoom,args:[_.zoom]}),S(g.bearing,_.bearing)||C.push({command:Vt.setBearing,args:[_.bearing]}),S(g.pitch,_.pitch)||C.push({command:Vt.setPitch,args:[_.pitch]}),S(g.sprite,_.sprite)||C.push({command:Vt.setSprite,args:[_.sprite]}),S(g.glyphs,_.glyphs)||C.push({command:Vt.setGlyphs,args:[_.glyphs]}),S(g.transition,_.transition)||C.push({command:Vt.setTransition,args:[_.transition]}),S(g.light,_.light)||C.push({command:Vt.setLight,args:[_.light]});const z={},O=[];(function(ee,le,he,ke){let Ae;for(Ae in le=le||{},ee=ee||{})Object.prototype.hasOwnProperty.call(ee,Ae)&&(Object.prototype.hasOwnProperty.call(le,Ae)||F(Ae,he,ke));for(Ae in le)Object.prototype.hasOwnProperty.call(le,Ae)&&(Object.prototype.hasOwnProperty.call(ee,Ae)?S(ee[Ae],le[Ae])||(ee[Ae].type==="geojson"&&le[Ae].type==="geojson"&&ye(ee,le,Ae)?he.push({command:Vt.setGeoJSONSourceData,args:[Ae,le[Ae].data]}):R(Ae,le,he,ke)):Te(Ae,le,he))})(g.sources,_.sources,O,z);const W=[];g.layers&&g.layers.forEach(ee=>{z[ee.source]?C.push({command:Vt.removeLayer,args:[ee.id]}):W.push(ee)}),C=C.concat(O),function(ee,le,he){le=le||[];const ke=(ee=ee||[]).map(Ye),Ae=le.map(Ye),Ie=ee.reduce(ut,{}),Ge=le.reduce(ut,{}),Xe=ke.slice(),Je=Object.create(null);let ze,nt,et,ht,ft,wt,lt;for(ze=0,nt=0;ze<ke.length;ze++)et=ke[ze],Object.prototype.hasOwnProperty.call(Ge,et)?nt++:(he.push({command:Vt.removeLayer,args:[et]}),Xe.splice(Xe.indexOf(et,nt),1));for(ze=0,nt=0;ze<Ae.length;ze++)et=Ae[Ae.length-1-ze],Xe[Xe.length-1-ze]!==et&&(Object.prototype.hasOwnProperty.call(Ie,et)?(he.push({command:Vt.removeLayer,args:[et]}),Xe.splice(Xe.lastIndexOf(et,Xe.length-nt),1)):nt++,wt=Xe[Xe.length-ze],he.push({command:Vt.addLayer,args:[Ge[et],wt]}),Xe.splice(Xe.length-ze,0,et),Je[et]=!0);for(ze=0;ze<Ae.length;ze++)if(et=Ae[ze],ht=Ie[et],ft=Ge[et],!Je[et]&&!S(ht,ft))if(S(ht.source,ft.source)&&S(ht["source-layer"],ft["source-layer"])&&S(ht.type,ft.type)){for(lt in $e(ht.layout,ft.layout,he,et,null,Vt.setLayoutProperty),$e(ht.paint,ft.paint,he,et,null,Vt.setPaintProperty),S(ht.filter,ft.filter)||he.push({command:Vt.setFilter,args:[et,ft.filter]}),S(ht.minzoom,ft.minzoom)&&S(ht.maxzoom,ft.maxzoom)||he.push({command:Vt.setLayerZoomRange,args:[et,ft.minzoom,ft.maxzoom]}),ht)Object.prototype.hasOwnProperty.call(ht,lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?$e(ht[lt],ft[lt],he,et,lt.slice(6),Vt.setPaintProperty):S(ht[lt],ft[lt])||he.push({command:Vt.setLayerProperty,args:[et,lt,ft[lt]]}));for(lt in ft)Object.prototype.hasOwnProperty.call(ft,lt)&&!Object.prototype.hasOwnProperty.call(ht,lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?$e(ht[lt],ft[lt],he,et,lt.slice(6),Vt.setPaintProperty):S(ht[lt],ft[lt])||he.push({command:Vt.setLayerProperty,args:[et,lt,ft[lt]]}))}else he.push({command:Vt.removeLayer,args:[et]}),wt=Xe[Xe.lastIndexOf(et)+1],he.push({command:Vt.addLayer,args:[ft,wt]})}(W,_.layers,C)}catch(z){console.warn("Unable to compute style diff:",z),C=[{command:Vt.setStyle,args:[_]}]}return C}(this.serialize(),r).filter(g=>!(g.command in Or));if(u.length===0)return!1;const d=u.filter(g=>!(g.command in Hn));if(d.length>0)throw new Error(`Unimplemented: ${d.map(g=>g.command).join(", ")}.`);return u.forEach(g=>{g.command!=="setTransition"&&this[g.command].apply(this,g.args)}),this.stylesheet=r,!0}addImage(r,u){if(this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new l.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,`sources.${r}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[r]=new mt(r,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:g.serialize(),sourceId:r})),g.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new l.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,d={}){this._checkLoaded();const g=r.id;if(this.getLayer(g))return void this.fire(new l.ErrorEvent(new Error(`Layer "${g}" already exists on this map.`)));let _;if(r.type==="custom"){if(Rn(this,l.validateCustomStyleLayer(r)))return;_=l.createStyleLayer(r)}else{if(typeof r.source=="object"&&(this.addSource(g,r.source),r=l.clone$1(r),r=l.extend(r,{source:g})),this._validate(l.validateStyle.layer,`layers.${g}`,r,{arrayIndex:-1},d))return;_=l.createStyleLayer(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[_.id]=_.serialize()}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const z=this._removedLayers[g];delete this._removedLayers[g],z.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new l.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const d=this._order.indexOf(r);this._order.splice(d,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(g,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,d){this._checkLoaded();const g=this.getLayer(r);g?g.minzoom===u&&g.maxzoom===d||(u!=null&&(g.minzoom=u),d!=null&&(g.maxzoom=d),this._updateLayer(g)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,d={}){this._checkLoaded();const g=this.getLayer(r);if(g){if(!S(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.validateStyle.filter,`layers.${g.id}.filter`,u,null,d)||(g.filter=l.clone$1(u),this._updateLayer(g)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return l.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,u,d,g={}){this._checkLoaded();const _=this.getLayer(r);_?S(_.getLayoutProperty(u),d)||(_.setLayoutProperty(u,d,g),this._updateLayer(_)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const d=this.getLayer(r);if(d)return d.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,d,g={}){this._checkLoaded();const _=this.getLayer(r);_?S(_.getPaintProperty(u),d)||(_.setPaintProperty(u,d,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const d=r.source,g=r.sourceLayer,_=this.sourceCaches[d];if(_===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,r.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const d=r.source,g=this.sourceCaches[d];if(g===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?r.sourceLayer:void 0;_!=="vector"||C?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,r.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,d=r.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),g.getFeatureState(d,r.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,r=>r.serialize()),layers:this._serializeLayers(this._order)},r=>r!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=C=>this._layers[C].type==="fill-extrusion",d={},g=[];for(let C=this._order.length-1;C>=0;C--){const z=this._order[C];if(u(z)){d[z]=C;for(const O of r){const W=O[z];if(W)for(const ee of W)g.push(ee)}}}g.sort((C,z)=>z.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const z=this._order[C];if(u(z))for(let O=g.length-1;O>=0;O--){const W=g[O].feature;if(d[W.layer.id]<C)break;_.push(W),g.pop()}else for(const O of r){const W=O[z];if(W)for(const ee of W)_.push(ee.feature)}}return _}queryRenderedFeatures(r,u,d){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const C of u.layers){const z=this._layers[C];if(!z)return this.fire(new l.ErrorEvent(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];g[z.source]=!0}}const _=[];u.availableImages=this._availableImages;for(const C in this.sourceCaches)u.layers&&!g[C]||_.push(Me(this.sourceCaches[C],this._layers,this._serializedLayers,r,u,d));return this.placement&&_.push(function(C,z,O,W,ee,le,he){const ke={},Ae=le.queryRenderedSymbols(W),Ie=[];for(const Ge of Object.keys(Ae).map(Number))Ie.push(he[Ge]);Ie.sort(Ve);for(const Ge of Ie){const Xe=Ge.featureIndex.lookupSymbolFeatures(Ae[Ge.bucketInstanceId],z,Ge.bucketIndex,Ge.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,C);for(const Je in Xe){const ze=ke[Je]=ke[Je]||[],nt=Xe[Je];nt.sort((et,ht)=>{const ft=Ge.featureSortOrder;if(ft){const wt=ft.indexOf(et.featureIndex);return ft.indexOf(ht.featureIndex)-wt}return ht.featureIndex-et.featureIndex});for(const et of nt)ze.push(et)}}for(const Ge in ke)ke[Ge].forEach(Xe=>{const Je=Xe.feature,ze=O[C[Ge].source].getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=ze});return ke}(this._layers,this._serializedLayers,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.sourceCaches[r];return d?function(g,_){const C=g.getRenderableIds().map(W=>g.getTileByID(W)),z=[],O={};for(let W=0;W<C.length;W++){const ee=C[W],le=ee.tileID.canonical.key;O[le]||(O[le]=!0,ee.querySourceFeatures(z,_))}return z}(d,u):[]}addSourceType(r,u,d){return lr.getSourceType(r)?d(new Error(`A source type called "${r}" already exists.`)):(lr.setSourceType(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},d):d(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const d=this.light.getLight();let g=!1;for(const C in r)if(!S(r[C],d[C])){g=!0;break}if(!g)return;const _={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,d,g,_={}){return(!_||_.validate!==!1)&&Rn(this,r.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:d,styleSpec:l.spec},g)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const r in this._layers)this._layers[r].setEventedParent(null);for(const r in this.sourceCaches){const u=this.sourceCaches[r];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,d,g,_=!1){let C=!1,z=!1;const O={};for(const W of this._order){const ee=this._layers[W];if(ee.type!=="symbol")continue;if(!O[ee.source]){const he=this.sourceCaches[ee.source];O[ee.source]=he.getRenderableIds(!0).map(ke=>he.getTileByID(ke)).sort((ke,Ae)=>Ae.tileID.overscaledZ-ke.tileID.overscaledZ||(ke.tileID.isLessThan(Ae.tileID)?-1:1))}const le=this.crossTileSymbolIndex.addLayer(ee,O[ee.source],r.center.lng);C=C||le}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),r.zoom))&&(this.pauseablePlacement=new at(r,this.terrain,this._order,_,u,d,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),z=!0),C&&this.pauseablePlacement.placement.setStale()),z||C)for(const W of this._order){const ee=this._layers[W];ee.type==="symbol"&&this.placement.updateLayerOpacities(ee,O[ee.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,d){this.imageManager.getImages(u.icons,d),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,d){this.glyphManager.getGlyphs(u.stacks,d)}getResource(r,u,d){return l.makeRequest(u,d)}}lr.getSourceType=function(p){return De[p]},lr.setSourceType=function(p,r){De[p]=r},lr.registerForPluginStateChange=l.registerForPluginStateChange;var wa="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const is={prelude:Xn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Xn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Xn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Xn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Xn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Xn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Xn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Xn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Xn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Xn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Xn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Xn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Xn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Xn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Xn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Xn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Xn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Xn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Xn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Xn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Xn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Xn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Xn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",wa),terrainDepth:Xn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",wa),terrainCoords:Xn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",wa)};function Xn(p,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),g=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,z={};return{fragmentSource:p=p.replace(u,(O,W,ee,le,he)=>(z[he]=!0,W==="define"?`
#ifndef HAS_UNIFORM_u_${he}
varying ${ee} ${le} ${he};
#else
uniform ${ee} ${le} u_${he};
#endif
`:`
#ifdef HAS_UNIFORM_u_${he}
    ${ee} ${le} ${he} = u_${he};
#endif
`)),vertexSource:r=r.replace(u,(O,W,ee,le,he)=>{const ke=le==="float"?"vec2":"vec4",Ae=he.match(/color/)?"color":ke;return z[he]?W==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${ee} ${ke} a_${he};
varying ${ee} ${le} ${he};
#else
uniform ${ee} ${le} u_${he};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = a_${he};
#else
    ${ee} ${le} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${he} = unpack_mix_${Ae}(a_${he}, u_${he}_t);
#else
    ${ee} ${le} ${he} = u_${he};
#endif
`:W==="define"?`
#ifndef HAS_UNIFORM_u_${he}
uniform lowp float u_${he}_t;
attribute ${ee} ${ke} a_${he};
#else
uniform ${ee} ${le} u_${he};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${he}
    ${ee} ${le} ${he} = a_${he};
#else
    ${ee} ${le} ${he} = u_${he};
#endif
`:`
#ifndef HAS_UNIFORM_u_${he}
    ${ee} ${le} ${he} = unpack_mix_${Ae}(a_${he}, u_${he}_t);
#else
    ${ee} ${le} ${he} = u_${he};
#endif
`}),staticAttributes:d,staticUniforms:C}}class Gl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,d,g,_,C,z,O,W){this.context=r;let ee=this.boundPaintVertexBuffers.length!==g.length;for(let le=0;!ee&&le<g.length;le++)this.boundPaintVertexBuffers[le]!==g[le]&&(ee=!0);r.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===d&&!ee&&this.boundIndexBuffer===_&&this.boundVertexOffset===C&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===O&&this.boundDynamicVertexBuffer3===W?(r.bindVertexArrayOES.set(this.vao),z&&z.bind(),_&&_.dynamicDraw&&_.bind(),O&&O.bind(),W&&W.bind()):this.freshBind(u,d,g,_,C,z,O,W)}freshBind(r,u,d,g,_,C,z,O){let W;const ee=r.numAttributes,le=this.context,he=le.gl;if(le.extVertexArrayObject)this.vao&&this.destroy(),this.vao=le.extVertexArrayObject.createVertexArrayOES(),le.bindVertexArrayOES.set(this.vao),W=0,this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=O;else{W=le.currentNumAttributes||0;for(let ke=ee;ke<W;ke++)he.disableVertexAttribArray(ke)}u.enableAttributes(he,r);for(const ke of d)ke.enableAttributes(he,r);C&&C.enableAttributes(he,r),z&&z.enableAttributes(he,r),O&&O.enableAttributes(he,r),u.bind(),u.setVertexAttribPointers(he,r,_);for(const ke of d)ke.bind(),ke.setVertexAttribPointers(he,r,_);C&&(C.bind(),C.setVertexAttribPointers(he,r,_)),g&&g.bind(),z&&(z.bind(),z.setVertexAttribPointers(he,r,_)),O&&(O.bind(),O.setVertexAttribPointers(he,r,_)),le.currentNumAttributes=ee}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Zl(p){const r=[];for(let u=0;u<p.length;u++){if(p[u]===null)continue;const d=p[u].split(" ");r.push(d.pop())}return r}class ro{constructor(r,u,d,g,_,C,z){const O=r.gl;this.program=O.createProgram();const W=Zl(d.staticAttributes),ee=g?g.getBinderAttributes():[],le=W.concat(ee),he=is.prelude.staticUniforms?Zl(is.prelude.staticUniforms):[],ke=d.staticUniforms?Zl(d.staticUniforms):[],Ae=g?g.getBinderUniforms():[],Ie=he.concat(ke).concat(Ae),Ge=[];for(const ft of Ie)Ge.indexOf(ft)<0&&Ge.push(ft);const Xe=g?g.defines():[];C&&Xe.push("#define OVERDRAW_INSPECTOR;"),z&&Xe.push("#define TERRAIN3D;");const Je=Xe.concat(is.prelude.fragmentSource,d.fragmentSource).join(`
`),ze=Xe.concat(is.prelude.vertexSource,d.vertexSource).join(`
`),nt=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(nt,Je),O.compileShader(nt),O.attachShader(this.program,nt);const et=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(et,ze),O.compileShader(et),O.attachShader(this.program,et),this.attributes={};const ht={};this.numAttributes=le.length;for(let ft=0;ft<this.numAttributes;ft++)le[ft]&&(O.bindAttribLocation(this.program,ft,le[ft]),this.attributes[le[ft]]=ft);O.linkProgram(this.program),O.deleteShader(et),O.deleteShader(nt);for(let ft=0;ft<Ge.length;ft++){const wt=Ge[ft];if(wt&&!ht[wt]){const lt=O.getUniformLocation(this.program,wt);lt&&(ht[wt]=lt)}}this.fixedUniforms=_(r,ht),this.terrainUniforms=((ft,wt)=>({u_depth:new l.Uniform1i(ft,wt.u_depth),u_terrain:new l.Uniform1i(ft,wt.u_terrain),u_terrain_dim:new l.Uniform1f(ft,wt.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(ft,wt.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(ft,wt.u_terrain_unpack),u_terrain_offset:new l.Uniform1f(ft,wt.u_terrain_offset),u_terrain_exaggeration:new l.Uniform1f(ft,wt.u_terrain_exaggeration)}))(r,ht),this.binderUniforms=g?g.getUniforms(r,ht):[]}draw(r,u,d,g,_,C,z,O,W,ee,le,he,ke,Ae,Ie,Ge,Xe,Je){const ze=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(g),r.setColorMode(_),r.setCullFace(C),O){r.activeTexture.set(ze.TEXTURE2),ze.bindTexture(ze.TEXTURE_2D,O.depthTexture),r.activeTexture.set(ze.TEXTURE3),ze.bindTexture(ze.TEXTURE_2D,O.texture);for(const et in this.terrainUniforms)this.terrainUniforms[et].set(O[et])}for(const et in this.fixedUniforms)this.fixedUniforms[et].set(z[et]);Ie&&Ie.setUniforms(r,this.binderUniforms,ke,{zoom:Ae});let nt=0;switch(u){case ze.LINES:nt=2;break;case ze.TRIANGLES:nt=3;break;case ze.LINE_STRIP:nt=1}for(const et of he.get()){const ht=et.vaos||(et.vaos={});(ht[W]||(ht[W]=new Gl)).bind(r,this,ee,Ie?Ie.getPaintVertexBuffers():[],le,et.vertexOffset,Ge,Xe,Je),ze.drawElements(u,et.primitiveLength*nt,ze.UNSIGNED_SHORT,et.primitiveOffset*nt*2)}}}function Vu(p,r,u){const d=1/gr(u,1,r.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),z=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[C>>16,z>>16],u_pixel_coord_lower:[65535&C,65535&z]}}const Wl=(p,r,u,d)=>{const g=r.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],z=l.create$1();g.properties.get("anchor")==="viewport"&&l.fromRotation(z,-r.transform.angle),l.transformMat3(C,C,z);const O=g.properties.get("color");return{u_matrix:p,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+u,u_opacity:d}},ph=(p,r,u,d,g,_,C)=>l.extend(Wl(p,r,u,d),Vu(_,r,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),Ws=p=>({u_matrix:p}),Hl=(p,r,u,d)=>l.extend(Ws(p),Vu(u,r,d)),os=(p,r)=>({u_matrix:p,u_world:r}),Gu=(p,r,u,d,g)=>l.extend(Hl(p,r,u,d),{u_world:g}),Zu=(p,r,u,d)=>{const g=p.transform;let _,C;if(d.paint.get("circle-pitch-alignment")==="map"){const z=gr(u,1,g.zoom);_=!0,C=[z,z]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:p.translatePosMatrix(r.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:p.pixelRatio,u_extrude_scale:C}},$r=(p,r,u)=>{const d=gr(u,1,r.zoom),g=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:p,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*g),r.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:_}},as=(p,r,u=1)=>({u_matrix:p,u_color:r,u_overlay:0,u_overlay_scale:u}),ba=p=>({u_matrix:p}),Hs=(p,r,u,d)=>({u_matrix:p,u_extrude_scale:gr(r,1,u),u_intensity:d});function Xs(p,r){const u=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new l.MercatorCoordinate(0,d/u).toLngLat().lat,new l.MercatorCoordinate(0,(d+1)/u).toLngLat().lat]}const Ea=(p,r,u,d)=>{const g=p.transform;return{u_matrix:ss(p,r,u,d),u_ratio:1/gr(r,1,g.zoom),u_device_pixel_ratio:p.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},qs=(p,r,u,d,g)=>l.extend(Ea(p,r,u,g),{u_image:0,u_image_height:d}),Sa=(p,r,u,d,g)=>{const _=p.transform,C=Jn(r,_);return{u_matrix:ss(p,r,u,g),u_texsize:r.imageAtlasTexture.size,u_ratio:1/gr(r,1,_.zoom),u_device_pixel_ratio:p.pixelRatio,u_image:0,u_scale:[C,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ta=(p,r,u,d,g,_)=>{const C=p.lineAtlas,z=Jn(r,p.transform),O=u.layout.get("line-cap")==="round",W=C.getDash(d.from,O),ee=C.getDash(d.to,O),le=W.width*g.fromScale,he=ee.width*g.toScale;return l.extend(Ea(p,r,u,_),{u_patternscale_a:[z/le,-W.height/2],u_patternscale_b:[z/he,-ee.height/2],u_sdfgamma:C.width/(256*Math.min(le,he)*p.pixelRatio)/2,u_image:0,u_tex_y_a:W.y,u_tex_y_b:ee.y,u_mix:g.t})};function Jn(p,r){return 1/gr(p,1,r.tileZoom)}function ss(p,r,u,d){return p.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ea=(p,r,u,d,g)=>{return{u_matrix:p,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Wu(g.paint.get("raster-hue-rotate"))};var _,C};function Wu(p){p*=Math.PI/180;const r=Math.sin(p),u=Math.cos(p);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const Xl=(p,r,u,d,g,_,C,z,O,W)=>{const ee=g.transform;return{u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ee.width/ee.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:z,u_is_text:+O,u_pitch_with_map:+d,u_texsize:W,u_texture:0}},Ks=(p,r,u,d,g,_,C,z,O,W,ee)=>{const le=g.transform;return l.extend(Xl(p,r,u,d,g,_,C,z,O,W),{u_gamma_scale:d?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+ee})},Hu=(p,r,u,d,g,_,C,z,O,W)=>l.extend(Ks(p,r,u,d,g,_,C,z,!0,O,!0),{u_texsize_icon:W,u_texture_icon:1}),Xu=(p,r,u)=>({u_matrix:p,u_opacity:r,u_color:u}),mh=(p,r,u,d,g,_)=>l.extend(function(C,z,O,W){const ee=O.imageManager.getPattern(C.from.toString()),le=O.imageManager.getPattern(C.to.toString()),{width:he,height:ke}=O.imageManager.getPixelSize(),Ae=Math.pow(2,W.tileID.overscaledZ),Ie=W.tileSize*Math.pow(2,O.transform.tileZoom)/Ae,Ge=Ie*(W.tileID.canonical.x+W.tileID.wrap*Ae),Xe=Ie*W.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ee.tl,u_pattern_br_a:ee.br,u_pattern_tl_b:le.tl,u_pattern_br_b:le.br,u_texsize:[he,ke],u_mix:z.t,u_pattern_size_a:ee.displaySize,u_pattern_size_b:le.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/gr(W,1,O.transform.tileZoom),u_pixel_coord_upper:[Ge>>16,Xe>>16],u_pixel_coord_lower:[65535&Ge,65535&Xe]}}(d,_,u,g),{u_matrix:p,u_opacity:r}),ql={fillExtrusion:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fillExtrusionPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_lightpos:new l.Uniform3f(p,r.u_lightpos),u_lightintensity:new l.Uniform1f(p,r.u_lightintensity),u_lightcolor:new l.Uniform3f(p,r.u_lightcolor),u_vertical_gradient:new l.Uniform1f(p,r.u_vertical_gradient),u_height_factor:new l.Uniform1f(p,r.u_height_factor),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade),u_opacity:new l.Uniform1f(p,r.u_opacity)}),fill:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),fillPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),fillOutline:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world)}),fillOutlinePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_texsize:new l.Uniform2f(p,r.u_texsize),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),circle:(p,r)=>({u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(p,r.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),collisionBox:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(p,r.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(p,r.u_extrude_scale),u_overscale_factor:new l.Uniform1f(p,r.u_overscale_factor)}),collisionCircle:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_inv_matrix:new l.UniformMatrix4f(p,r.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(p,r.u_viewport_size)}),debug:(p,r)=>({u_color:new l.UniformColor(p,r.u_color),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_overlay:new l.Uniform1i(p,r.u_overlay),u_overlay_scale:new l.Uniform1f(p,r.u_overlay_scale)}),clippingMask:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmap:(p,r)=>({u_extrude_scale:new l.Uniform1f(p,r.u_extrude_scale),u_intensity:new l.Uniform1f(p,r.u_intensity),u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),heatmapTexture:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_world:new l.Uniform2f(p,r.u_world),u_image:new l.Uniform1i(p,r.u_image),u_color_ramp:new l.Uniform1i(p,r.u_color_ramp),u_opacity:new l.Uniform1f(p,r.u_opacity)}),hillshade:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_latrange:new l.Uniform2f(p,r.u_latrange),u_light:new l.Uniform2f(p,r.u_light),u_shadow:new l.UniformColor(p,r.u_shadow),u_highlight:new l.UniformColor(p,r.u_highlight),u_accent:new l.UniformColor(p,r.u_accent)}),hillshadePrepare:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_image:new l.Uniform1i(p,r.u_image),u_dimension:new l.Uniform2f(p,r.u_dimension),u_zoom:new l.Uniform1f(p,r.u_zoom),u_unpack:new l.Uniform4f(p,r.u_unpack)}),line:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels)}),lineGradient:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_image:new l.Uniform1i(p,r.u_image),u_image_height:new l.Uniform1f(p,r.u_image_height)}),linePattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texsize:new l.Uniform2f(p,r.u_texsize),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_image:new l.Uniform1i(p,r.u_image),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_scale:new l.Uniform3f(p,r.u_scale),u_fade:new l.Uniform1f(p,r.u_fade)}),lineSDF:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_ratio:new l.Uniform1f(p,r.u_ratio),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(p,r.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(p,r.u_patternscale_a),u_patternscale_b:new l.Uniform2f(p,r.u_patternscale_b),u_sdfgamma:new l.Uniform1f(p,r.u_sdfgamma),u_image:new l.Uniform1i(p,r.u_image),u_tex_y_a:new l.Uniform1f(p,r.u_tex_y_a),u_tex_y_b:new l.Uniform1f(p,r.u_tex_y_b),u_mix:new l.Uniform1f(p,r.u_mix)}),raster:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_tl_parent:new l.Uniform2f(p,r.u_tl_parent),u_scale_parent:new l.Uniform1f(p,r.u_scale_parent),u_buffer_scale:new l.Uniform1f(p,r.u_buffer_scale),u_fade_t:new l.Uniform1f(p,r.u_fade_t),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image0:new l.Uniform1i(p,r.u_image0),u_image1:new l.Uniform1i(p,r.u_image1),u_brightness_low:new l.Uniform1f(p,r.u_brightness_low),u_brightness_high:new l.Uniform1f(p,r.u_brightness_high),u_saturation_factor:new l.Uniform1f(p,r.u_saturation_factor),u_contrast_factor:new l.Uniform1f(p,r.u_contrast_factor),u_spin_weights:new l.Uniform3f(p,r.u_spin_weights)}),symbolIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture)}),symbolSDF:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texture:new l.Uniform1i(p,r.u_texture),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),symbolTextAndIcon:(p,r)=>({u_is_size_zoom_constant:new l.Uniform1i(p,r.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(p,r.u_is_size_feature_constant),u_size_t:new l.Uniform1f(p,r.u_size_t),u_size:new l.Uniform1f(p,r.u_size),u_camera_to_center_distance:new l.Uniform1f(p,r.u_camera_to_center_distance),u_pitch:new l.Uniform1f(p,r.u_pitch),u_rotate_symbol:new l.Uniform1i(p,r.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(p,r.u_aspect_ratio),u_fade_change:new l.Uniform1f(p,r.u_fade_change),u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(p,r.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(p,r.u_coord_matrix),u_is_text:new l.Uniform1i(p,r.u_is_text),u_pitch_with_map:new l.Uniform1i(p,r.u_pitch_with_map),u_texsize:new l.Uniform2f(p,r.u_texsize),u_texsize_icon:new l.Uniform2f(p,r.u_texsize_icon),u_texture:new l.Uniform1i(p,r.u_texture),u_texture_icon:new l.Uniform1i(p,r.u_texture_icon),u_gamma_scale:new l.Uniform1f(p,r.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(p,r.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(p,r.u_is_halo)}),background:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_color:new l.UniformColor(p,r.u_color)}),backgroundPattern:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_opacity:new l.Uniform1f(p,r.u_opacity),u_image:new l.Uniform1i(p,r.u_image),u_pattern_tl_a:new l.Uniform2f(p,r.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(p,r.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(p,r.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(p,r.u_pattern_br_b),u_texsize:new l.Uniform2f(p,r.u_texsize),u_mix:new l.Uniform1f(p,r.u_mix),u_pattern_size_a:new l.Uniform2f(p,r.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(p,r.u_pattern_size_b),u_scale_a:new l.Uniform1f(p,r.u_scale_a),u_scale_b:new l.Uniform1f(p,r.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(p,r.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(p,r.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(p,r.u_tile_units_to_pixels)}),terrain:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texture:new l.Uniform1i(p,r.u_texture)}),terrainDepth:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix)}),terrainCoords:(p,r)=>({u_matrix:new l.UniformMatrix4f(p,r.u_matrix),u_texture:new l.Uniform1i(p,r.u_texture),u_terrain_coords_id:new l.Uniform1f(p,r.u_terrain_coords_id)})};class Kl{constructor(r,u,d){this.context=r;const g=r.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ls={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Yl{constructor(r,u,d,g){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let d=0;d<this.attributes.length;d++){const g=u.attributes[this.attributes[d].name];g!==void 0&&r.enableVertexAttribArray(g)}}setVertexAttribPointers(r,u,d){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&r.vertexAttribPointer(C,_.components,r[ls[_.type]],!1,this.itemSize,_.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Bn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qu extends Bn{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class gh extends Bn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Ca extends Bn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class us extends Bn{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Jl extends Bn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class vi extends Bn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ql extends Bn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class cs extends Bn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Ys extends Bn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class eu extends Bn{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class tu extends Bn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class Js extends Bn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Qs extends Bn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class nu extends Bn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Aa extends Bn{getDefault(){return l.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ku extends Bn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Yu extends Bn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class Ia extends Bn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class yh extends Bn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class vh extends Bn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class _h extends Bn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Ju extends Bn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ru extends Bn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class xh extends Bn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class iu extends Bn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class el extends Bn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ou extends Bn{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class tl extends Bn{constructor(r){super(r),this.vao=r.extVertexArrayObject}getDefault(){return null}set(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)}}class Pa extends Bn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Qu extends Bn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ec extends Bn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class nl extends Bn{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class io extends nl{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class tc extends nl{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Di{constructor(r,u,d,g){this.context=r,this.width=u,this.height=d;const _=r.gl,C=this.framebuffer=_.createFramebuffer();if(this.colorAttachment=new io(r,C),g&&(this.depthAttachment=new tc(r,C)),_.checkFramebufferStatus(_.FRAMEBUFFER)!==_.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class er{constructor(r,u,d){this.blendFunction=r,this.blendColor=u,this.mask=d}}er.Replace=[1,0],er.disabled=new er(er.Replace,l.Color.transparent,[!1,!1,!1,!1]),er.unblended=new er(er.Replace,l.Color.transparent,[!0,!0,!0,!0]),er.alphaBlended=new er([1,771],l.Color.transparent,[!0,!0,!0,!0]);class Bi{constructor(r){this.gl=r,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qu(this),this.clearDepth=new gh(this),this.clearStencil=new Ca(this),this.colorMask=new us(this),this.depthMask=new Jl(this),this.stencilMask=new vi(this),this.stencilFunc=new Ql(this),this.stencilOp=new cs(this),this.stencilTest=new Ys(this),this.depthRange=new eu(this),this.depthTest=new tu(this),this.depthFunc=new Js(this),this.blend=new Qs(this),this.blendFunc=new nu(this),this.blendColor=new Aa(this),this.blendEquation=new Ku(this),this.cullFace=new Yu(this),this.cullFaceSide=new Ia(this),this.frontFace=new yh(this),this.program=new vh(this),this.activeTexture=new _h(this),this.viewport=new Ju(this),this.bindFramebuffer=new ru(this),this.bindRenderbuffer=new xh(this),this.bindTexture=new iu(this),this.bindVertexBuffer=new el(this),this.bindElementBuffer=new ou(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tl(this),this.pixelStoreUnpack=new Pa(this),this.pixelStoreUnpackPremultiplyAlpha=new Qu(this),this.pixelStoreUnpackFlipY=new ec(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=r.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(r.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=r.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=r.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new Kl(this,r,u)}createVertexBuffer(r,u,d){return new Yl(this,r,u,d)}createRenderbuffer(r,u,d){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,r,u,d),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,d){return new Di(this,r,u,d)}clear({color:r,depth:u}){const d=this.gl;let g=0;r&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d.clear(g)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){S(r.blendFunction,er.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class kn{constructor(r,u,d){this.func=r,this.mask=u,this.range=d}}kn.ReadOnly=!1,kn.ReadWrite=!0,kn.disabled=new kn(519,kn.ReadOnly,[0,1]);const Nn=7680;class tr{constructor(r,u,d,g,_,C){this.test=r,this.ref=u,this.mask=d,this.fail=g,this.depthFail=_,this.pass=C}}tr.disabled=new tr({func:519,mask:0},0,0,Nn,Nn,Nn);class ar{constructor(r,u,d){this.enable=r,this.mode=u,this.frontFace=d}}let ta;function ka(p,r,u,d,g,_,C){const z=p.context,O=z.gl,W=p.useProgram("collisionBox"),ee=[];let le=0,he=0;for(let ze=0;ze<d.length;ze++){const nt=d[ze],et=r.getTile(nt),ht=et.getBucket(u);if(!ht)continue;let ft=nt.posMatrix;g[0]===0&&g[1]===0||(ft=p.translatePosMatrix(nt.posMatrix,et,g,_));const wt=C?ht.textCollisionBox:ht.iconCollisionBox,lt=ht.collisionCircleArray;if(lt.length>0){const Bt=l.create(),Mt=ft;l.mul(Bt,ht.placementInvProjMatrix,p.transform.glCoordMatrix),l.mul(Bt,Bt,ht.placementViewportMatrix),ee.push({circleArray:lt,circleOffset:he,transform:Mt,invTransform:Bt,coord:nt}),le+=lt.length/4,he=le}wt&&W.draw(z,O.LINES,kn.disabled,tr.disabled,p.colorModeForRenderPass(),ar.disabled,$r(ft,p.transform,et),p.style.terrain&&p.style.terrain.getTerrainData(nt),u.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,p.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!C||!ee.length)return;const ke=p.useProgram("collisionCircle"),Ae=new l.CollisionCircleLayoutArray;Ae.resize(4*le),Ae._trim();let Ie=0;for(const ze of ee)for(let nt=0;nt<ze.circleArray.length/4;nt++){const et=4*nt,ht=ze.circleArray[et+0],ft=ze.circleArray[et+1],wt=ze.circleArray[et+2],lt=ze.circleArray[et+3];Ae.emplace(Ie++,ht,ft,wt,lt,0),Ae.emplace(Ie++,ht,ft,wt,lt,1),Ae.emplace(Ie++,ht,ft,wt,lt,2),Ae.emplace(Ie++,ht,ft,wt,lt,3)}(!ta||ta.length<2*le)&&(ta=function(ze){const nt=2*ze,et=new l.QuadTriangleArray;et.resize(nt),et._trim();for(let ht=0;ht<nt;ht++){const ft=6*ht;et.uint16[ft+0]=4*ht+0,et.uint16[ft+1]=4*ht+1,et.uint16[ft+2]=4*ht+2,et.uint16[ft+3]=4*ht+2,et.uint16[ft+4]=4*ht+3,et.uint16[ft+5]=4*ht+0}return et}(le));const Ge=z.createIndexBuffer(ta,!0),Xe=z.createVertexBuffer(Ae,l.collisionCircleLayout.members,!0);for(const ze of ee){const nt={u_matrix:ze.transform,u_inv_matrix:ze.invTransform,u_camera_to_center_distance:(Je=p.transform).cameraToCenterDistance,u_viewport_size:[Je.width,Je.height]};ke.draw(z,O.TRIANGLES,kn.disabled,tr.disabled,p.colorModeForRenderPass(),ar.disabled,nt,p.style.terrain&&p.style.terrain.getTerrainData(ze.coord),u.id,Xe,Ge,l.SegmentVector.simpleSegment(0,2*ze.circleOffset,ze.circleArray.length,ze.circleArray.length/2),null,p.transform.zoom,null,null,null)}var Je;Xe.destroy(),Ge.destroy()}ar.disabled=new ar(!1,1029,2305),ar.backCCW=new ar(!0,1029,2305);const rl=l.identity(new Float32Array(16));function wh(p,r,u,d,g,_){const{horizontalAlign:C,verticalAlign:z}=l.getAnchorAlignment(p),O=-(C-.5)*r,W=-(z-.5)*u,ee=l.evaluateVariableOffset(p,d);return new l.pointGeometry((O/g+ee[0])*_,(W/g+ee[1])*_)}function nc(p,r,u,d,g,_,C,z,O,W,ee){const le=p.text.placedSymbolArray,he=p.text.dynamicLayoutVertexArray,ke=p.icon.dynamicLayoutVertexArray,Ae={};he.clear();for(let Ie=0;Ie<le.length;Ie++){const Ge=le.get(Ie),Xe=p.allowVerticalPlacement&&!Ge.placedOrientation,Je=Ge.hidden||!Ge.crossTileID||Xe?null:d[Ge.crossTileID];if(Je){const ze=new l.pointGeometry(Ge.anchorX,Ge.anchorY),nt=We(ze,u?C:_,ee),et=it(g.cameraToCenterDistance,nt.signedDistanceFromCamera);let ht=l.evaluateSizeForFeature(p.textSizeData,O,Ge)*et/l.ONE_EM;u&&(ht*=p.tilePixelRatio/z);const{width:ft,height:wt,anchor:lt,textOffset:Bt,textBoxScale:Mt}=Je,Ut=wh(lt,ft,wt,Bt,Mt,ht),wn=u?We(ze.add(Ut),_,ee).point:nt.point.add(r?Ut.rotate(-g.angle):Ut),An=p.allowVerticalPlacement&&Ge.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let on=0;on<Ge.numGlyphs;on++)l.addDynamicAttributes(he,wn,An);W&&Ge.associatedIconIndex>=0&&(Ae[Ge.associatedIconIndex]={shiftedAnchor:wn,angle:An})}else hn(Ge.numGlyphs,he)}if(W){ke.clear();const Ie=p.icon.placedSymbolArray;for(let Ge=0;Ge<Ie.length;Ge++){const Xe=Ie.get(Ge);if(Xe.hidden)hn(Xe.numGlyphs,ke);else{const Je=Ae[Ge];if(Je)for(let ze=0;ze<Xe.numGlyphs;ze++)l.addDynamicAttributes(ke,Je.shiftedAnchor,Je.angle);else hn(Xe.numGlyphs,ke)}}p.icon.dynamicLayoutVertexBuffer.updateData(ke)}p.text.dynamicLayoutVertexBuffer.updateData(he)}function il(p,r,u){return u.iconsInText&&r?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function hs(p,r,u,d,g,_,C,z,O,W,ee,le){const he=p.context,ke=he.gl,Ae=p.transform,Ie=z==="map",Ge=O==="map",Xe=z!=="viewport"&&u.layout.get("symbol-placement")!=="point",Je=Ie&&!Ge&&!Xe,ze=!u.layout.get("symbol-sort-key").isConstant();let nt=!1;const et=p.depthModeForSublayer(0,kn.ReadOnly),ht=u.layout.get("text-variable-anchor"),ft=[];for(const wt of d){const lt=r.getTile(wt),Bt=lt.getBucket(u);if(!Bt)continue;const Mt=g?Bt.text:Bt.icon;if(!Mt||!Mt.segments.get().length)continue;const Ut=Mt.programConfigurations.get(u.id),wn=g||Bt.sdfIcons,An=g?Bt.textSizeData:Bt.iconSizeData,on=Ge||Ae.pitch!==0,qn=p.useProgram(il(wn,g,Bt),Ut),Kn=l.evaluateSizeForZoom(An,Ae.zoom),On=p.style.terrain&&p.style.terrain.getTerrainData(wt);let Dn,Qn,Xr,Uo,vo=[0,0],$o=null;if(g){if(Qn=lt.glyphAtlasTexture,Xr=ke.LINEAR,Dn=lt.glyphAtlasTexture.size,Bt.iconsInText){vo=lt.imageAtlasTexture.size,$o=lt.imageAtlasTexture;const so=An.kind==="composite"||An.kind==="camera";Uo=on||p.options.rotating||p.options.zooming||so?ke.LINEAR:ke.NEAREST}}else{const so=u.layout.get("icon-size").constantOr(0)!==1||Bt.iconsNeedLinear;Qn=lt.imageAtlasTexture,Xr=wn||p.options.rotating||p.options.zooming||so||on?ke.LINEAR:ke.NEAREST,Dn=lt.imageAtlasTexture.size}const Va=gr(lt,1,p.transform.zoom),ao=Se(wt.posMatrix,Ge,Ie,p.transform,Va),Ii=Be(wt.posMatrix,Ge,Ie,p.transform,Va),ia=ht&&Bt.hasTextData(),oc=u.layout.get("icon-text-fit")!=="none"&&ia&&Bt.hasIconData();if(Xe){const so=p.style.terrain?(kh,cl)=>p.style.terrain.getElevation(wt,kh,cl):null,xs=u.layout.get("text-rotation-alignment")==="map";xn(Bt,wt.posMatrix,p,g,ao,Ii,Ge,W,xs,so)}const Gr=p.translatePosMatrix(wt.posMatrix,lt,_,C),Mn=Xe||g&&ht||oc?rl:ao,Zn=p.translatePosMatrix(Ii,lt,_,C,!0),qr=wn&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Kr;Kr=wn?Bt.iconsInText?Hu(An.kind,Kn,Je,Ge,p,Gr,Mn,Zn,Dn,vo):Ks(An.kind,Kn,Je,Ge,p,Gr,Mn,Zn,g,Dn,!0):Xl(An.kind,Kn,Je,Ge,p,Gr,Mn,Zn,g,Dn);const fr={program:qn,buffers:Mt,uniformValues:Kr,atlasTexture:Qn,atlasTextureIcon:$o,atlasInterpolation:Xr,atlasInterpolationIcon:Uo,isSDF:wn,hasHalo:qr};if(ze&&Bt.canOverlap){nt=!0;const so=Mt.segments.get();for(const xs of so)ft.push({segments:new l.SegmentVector([xs]),sortKey:xs.sortKey,state:fr,terrainData:On})}else ft.push({segments:Mt.segments,sortKey:0,state:fr,terrainData:On})}nt&&ft.sort((wt,lt)=>wt.sortKey-lt.sortKey);for(const wt of ft){const lt=wt.state;if(he.activeTexture.set(ke.TEXTURE0),lt.atlasTexture.bind(lt.atlasInterpolation,ke.CLAMP_TO_EDGE),lt.atlasTextureIcon&&(he.activeTexture.set(ke.TEXTURE1),lt.atlasTextureIcon&&lt.atlasTextureIcon.bind(lt.atlasInterpolationIcon,ke.CLAMP_TO_EDGE)),lt.isSDF){const Bt=lt.uniformValues;lt.hasHalo&&(Bt.u_is_halo=1,Ma(lt.buffers,wt.segments,u,p,lt.program,et,ee,le,Bt,wt.terrainData)),Bt.u_is_halo=0}Ma(lt.buffers,wt.segments,u,p,lt.program,et,ee,le,lt.uniformValues,wt.terrainData)}}function Ma(p,r,u,d,g,_,C,z,O,W){const ee=d.context;g.draw(ee,ee.gl.TRIANGLES,_,C,z,ar.disabled,O,W,u.id,p.layoutVertexBuffer,p.indexBuffer,r,u.paint,d.transform.zoom,p.programConfigurations.get(u.id),p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer)}function fs(p,r,u,d,g,_,C){const z=p.context.gl,O=u.paint.get("fill-pattern"),W=O&&O.constantOr(1),ee=u.getCrossfadeParameters();let le,he,ke,Ae,Ie;C?(he=W&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=z.LINES):(he=W?"fillPattern":"fill",le=z.TRIANGLES);for(const Ge of d){const Xe=r.getTile(Ge);if(W&&!Xe.patternsLoaded())continue;const Je=Xe.getBucket(u);if(!Je)continue;const ze=Je.programConfigurations.get(u.id),nt=p.useProgram(he,ze),et=p.style.terrain&&p.style.terrain.getTerrainData(Ge);W&&(p.context.activeTexture.set(z.TEXTURE0),Xe.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ze.updatePaintBuffers(ee));const ht=O.constantOr(null);if(ht&&Xe.imageAtlas){const lt=Xe.imageAtlas,Bt=lt.patternPositions[ht.to.toString()],Mt=lt.patternPositions[ht.from.toString()];Bt&&Mt&&ze.setConstantPatternPositions(Bt,Mt)}const ft=et?Ge:null,wt=p.translatePosMatrix(ft?ft.posMatrix:Ge.posMatrix,Xe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){Ae=Je.indexBuffer2,Ie=Je.segments2;const lt=[z.drawingBufferWidth,z.drawingBufferHeight];ke=he==="fillOutlinePattern"&&W?Gu(wt,p,ee,Xe,lt):os(wt,lt)}else Ae=Je.indexBuffer,Ie=Je.segments,ke=W?Hl(wt,p,ee,Xe):Ws(wt);nt.draw(p.context,le,g,p.stencilModeForClipping(Ge),_,ar.disabled,ke,et,u.id,Je.layoutVertexBuffer,Ae,Ie,u.paint,p.transform.zoom,ze)}}function ds(p,r,u,d,g,_,C){const z=p.context,O=z.gl,W=u.paint.get("fill-extrusion-pattern"),ee=W.constantOr(1),le=u.getCrossfadeParameters(),he=u.paint.get("fill-extrusion-opacity");for(const ke of d){const Ae=r.getTile(ke),Ie=Ae.getBucket(u);if(!Ie)continue;const Ge=p.style.terrain&&p.style.terrain.getTerrainData(ke),Xe=Ie.programConfigurations.get(u.id),Je=p.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",Xe);ee&&(p.context.activeTexture.set(O.TEXTURE0),Ae.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Xe.updatePaintBuffers(le));const ze=W.constantOr(null);if(ze&&Ae.imageAtlas){const ft=Ae.imageAtlas,wt=ft.patternPositions[ze.to.toString()],lt=ft.patternPositions[ze.from.toString()];wt&&lt&&Xe.setConstantPatternPositions(wt,lt)}const nt=p.translatePosMatrix(ke.posMatrix,Ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),et=u.paint.get("fill-extrusion-vertical-gradient"),ht=ee?ph(nt,p,et,he,ke,le,Ae):Wl(nt,p,et,he);Je.draw(z,z.gl.TRIANGLES,g,_,C,ar.backCCW,ht,Ge,u.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,u.paint,p.transform.zoom,Xe,p.style.terrain&&Ie.centroidVertexBuffer)}}function za(p,r,u,d,g,_,C){const z=p.context,O=z.gl,W=u.fbo;if(!W)return;const ee=p.useProgram("hillshade"),le=p.style.terrain&&p.style.terrain.getTerrainData(r);z.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,W.colorAttachment.get()),ee.draw(z,O.TRIANGLES,g,_,C,ar.disabled,((he,ke,Ae,Ie)=>{const Ge=Ae.paint.get("hillshade-shadow-color"),Xe=Ae.paint.get("hillshade-highlight-color"),Je=Ae.paint.get("hillshade-accent-color");let ze=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(ze-=he.transform.angle);const nt=!he.options.moving;return{u_matrix:Ie?Ie.posMatrix:he.transform.calculatePosMatrix(ke.tileID.toUnwrapped(),nt),u_image:0,u_latrange:Xs(0,ke.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),ze],u_shadow:Ge,u_highlight:Xe,u_accent:Je}})(p,u,d,le?r:null),le,d.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}function Ro(p,r,u,d,g,_){const C=p.context,z=C.gl,O=r.dem;if(O&&O.data){const W=O.dim,ee=O.stride,le=O.getPixels();if(C.activeTexture.set(z.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||p.getTileTexture(ee),r.demTexture){const ke=r.demTexture;ke.update(le,{premultiply:!1}),ke.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else r.demTexture=new H(C,le,z.RGBA,{premultiply:!1}),r.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);C.activeTexture.set(z.TEXTURE0);let he=r.fbo;if(!he){const ke=new H(C,{width:W,height:W,data:null},z.RGBA);ke.bind(z.LINEAR,z.CLAMP_TO_EDGE),he=r.fbo=C.createFramebuffer(W,W,!0),he.colorAttachment.set(ke.texture)}C.bindFramebuffer.set(he.framebuffer),C.viewport.set([0,0,W,W]),p.useProgram("hillshadePrepare").draw(C,z.TRIANGLES,d,g,_,ar.disabled,((ke,Ae)=>{const Ie=Ae.stride,Ge=l.create();return l.ortho(Ge,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Ge,Ge,[0,-l.EXTENT,0]),{u_matrix:Ge,u_image:1,u_dimension:[Ie,Ie],u_zoom:ke.overscaledZ,u_unpack:Ae.getUnpackVector()}})(r.tileID,O),null,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function ol(p,r,u,d,g,_){const C=d.paint.get("raster-fade-duration");if(!_&&C>0){const z=l.exported.now(),O=(z-p.timeAdded)/C,W=r?(z-r.timeAdded)/C:-1,ee=u.getSource(),le=g.coveringZoomLevel({tileSize:ee.tileSize,roundZoom:ee.roundZoom}),he=!r||Math.abs(r.tileID.overscaledZ-le)>Math.abs(p.tileID.overscaledZ-le),ke=he&&p.refreshedUponExpiration?1:l.clamp(he?O:1-W,0,1);return p.refreshedUponExpiration&&O>=1&&(p.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ke}:{opacity:ke,mix:0}}return{opacity:1,mix:0}}const ps=new l.Color(1,0,0,1),li=new l.Color(0,1,0,1),rc=new l.Color(0,0,1,1),Oo=new l.Color(1,0,1,1),na=new l.Color(0,1,1,1);function br(p,r,u,d){Fo(p,0,r+u/2,p.transform.width,u,d)}function Ni(p,r,u,d){Fo(p,r-u/2,0,u,p.transform.height,d)}function Fo(p,r,u,d,g,_){const C=p.context,z=C.gl;z.enable(z.SCISSOR_TEST),z.scissor(r*p.pixelRatio,u*p.pixelRatio,d*p.pixelRatio,g*p.pixelRatio),C.clear({color:_}),z.disable(z.SCISSOR_TEST)}function au(p,r,u){const d=p.context,g=d.gl,_=u.posMatrix,C=p.useProgram("debug"),z=kn.disabled,O=tr.disabled,W=p.colorModeForRenderPass(),ee="$debug",le=p.style.terrain&&p.style.terrain.getTerrainData(u);d.activeTexture.set(g.TEXTURE0),p.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE);const he=r.getTileByID(u.key).latestRawTileData,ke=Math.floor((he&&he.byteLength||0)/1024),Ae=r.getTile(u).tileSize,Ie=512/Math.min(Ae,512)*(u.overscaledZ/p.transform.zoom)*.5;let Ge=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ge+=` => ${u.overscaledZ}`),function(Xe,Je){Xe.initDebugOverlayCanvas();const ze=Xe.debugOverlayCanvas,nt=Xe.context.gl,et=Xe.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,ze.width,ze.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(Je,5,5),et.strokeText(Je,5,5),Xe.debugOverlayTexture.update(ze),Xe.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}(p,`${Ge} ${ke}kB`),C.draw(d,g.TRIANGLES,z,O,er.alphaBlended,ar.disabled,as(_,l.Color.transparent,Ie),null,ee,p.debugBuffer,p.quadTriangleIndexBuffer,p.debugSegments),C.draw(d,g.LINE_STRIP,z,O,W,ar.disabled,as(_,l.Color.red),le,ee,p.debugBuffer,p.tileBorderIndexBuffer,p.debugSegments)}function al(p,r,u){const d=p.context,g=d.gl,_=p.colorModeForRenderPass(),C=new kn(g.LEQUAL,kn.ReadWrite,p.depthRangeFor3D),z=p.useProgram("terrain"),O=r.getTerrainMesh(),W=r.getTerrainData(u.tileID);d.bindFramebuffer.set(null),d.viewport.set([0,0,p.width,p.height]),d.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,r.getRTTFramebuffer().colorAttachment.get());const ee=p.transform.calculatePosMatrix(u.tileID.toUnwrapped());z.draw(d,g.TRIANGLES,C,tr.disabled,_,ar.backCCW,{u_matrix:ee,u_texture:0},W,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}function ms(p,r,u,d){const g=p.context,_=u.tileSize*r.qualityFactor;u.textures[d]||(u.textures[d]=p.getTileTexture(_)||new H(g,{width:_,height:_,data:null},g.gl.RGBA),u.textures[d].bind(g.gl.LINEAR,g.gl.CLAMP_TO_EDGE),d===0&&r.sourceCache.renderHistory.unshift(u.tileID.key));const C=r.getRTTFramebuffer();C.colorAttachment.set(u.textures[d].texture),g.bindFramebuffer.set(C.framebuffer),g.viewport.set([0,0,_,_])}class gs{constructor(r){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=r,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=r.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const r=this.painter.style,u=r.terrain;for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const g=r.sourceCaches[d].getVisibleCoordinates();for(const _ of g){const C=u.sourceCache.getTerrainCoords(_);for(const z in C)this._coordsDescendingInv[d][z]||(this._coordsDescendingInv[d][z]=[]),this._coordsDescendingInv[d][z].push(C[z])}}for(const d of r._order){const g=r._layers[d],_=g.source;if(this._renderToTexture[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(z=>z.key).sort().join()}}return this._renderableTiles.forEach(d=>{for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][d.tileID.key];_&&_!==d.textureCoords[g]&&d.clearTextures(this.painter),u.needsRerender(g,d.tileID)&&d.clearTextures(this.painter)}this._rerender[d.tileID.key]=!d.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(r){const u=r.type,d=this.painter,g=d.style._order,_=d.currentLayer,C=_+1===g.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(g[_]),!C))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&C){this._prevType=u;const z=this._stacks.length-1,O=this._stacks[z]||[];for(const W of this._renderableTiles){if(ms(d,d.style.terrain,W,z),this._rerender[W.tileID.key]){d.context.clear({color:l.Color.transparent});for(let ee=0;ee<O.length;ee++){const le=d.style._layers[O[ee]],he=le.source?this._coordsDescendingInv[le.source][W.tileID.key]:[W.tileID];d._renderTileClippingMasks(le,he),d.renderLayer(d,d.style.sourceCaches[le.source],le,he),le.source&&(W.textureCoords[le.source]=this._coordsDescendingInvStr[le.source][W.tileID.key])}}al(d,d.style.terrain,W)}if(u==="hillshade"){this._stacks.push([g[_]]);for(const W of this._renderableTiles){const ee=this._coordsDescendingInv[r.source][W.tileID.key];ms(d,d.style.terrain,W,this._stacks.length-1),d.context.clear({color:l.Color.transparent}),d._renderTileClippingMasks(r,ee),d.renderLayer(d,d.style.sourceCaches[r.source],r,ee),al(d,d.style.terrain,W)}return!0}return this._renderToTexture[u]}return!1}}const ni={symbol:function(p,r,u,d,g){if(p.renderPass!=="translucent")return;const _=tr.disabled,C=p.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(z,O,W,ee,le,he,ke){const Ae=O.transform,Ie=le==="map",Ge=he==="map";for(const Xe of z){const Je=ee.getTile(Xe),ze=Je.getBucket(W);if(!ze||!ze.text||!ze.text.segments.get().length)continue;const nt=l.evaluateSizeForZoom(ze.textSizeData,Ae.zoom),et=gr(Je,1,O.transform.zoom),ht=Se(Xe.posMatrix,Ge,Ie,O.transform,et),ft=W.layout.get("icon-text-fit")!=="none"&&ze.hasIconData();if(nt){const wt=Math.pow(2,Ae.zoom-Je.tileID.overscaledZ);nc(ze,Ie,Ge,ke,Ae,ht,Xe.posMatrix,wt,nt,ft,O.style.terrain?(lt,Bt)=>O.style.terrain.getElevation(Xe,lt,Bt):null)}}}(d,p,u,r,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&hs(p,r,u,d,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),_,C),u.paint.get("text-opacity").constantOr(1)!==0&&hs(p,r,u,d,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),_,C),r.map.showCollisionBoxes&&(ka(p,r,u,d,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),ka(p,r,u,d,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(p,r,u,d){if(p.renderPass!=="translucent")return;const g=u.paint.get("circle-opacity"),_=u.paint.get("circle-stroke-width"),C=u.paint.get("circle-stroke-opacity"),z=!u.layout.get("circle-sort-key").isConstant();if(g.constantOr(1)===0&&(_.constantOr(1)===0||C.constantOr(1)===0))return;const O=p.context,W=O.gl,ee=p.depthModeForSublayer(0,kn.ReadOnly),le=tr.disabled,he=p.colorModeForRenderPass(),ke=[];for(let Ae=0;Ae<d.length;Ae++){const Ie=d[Ae],Ge=r.getTile(Ie),Xe=Ge.getBucket(u);if(!Xe)continue;const Je=Xe.programConfigurations.get(u.id),ze=p.useProgram("circle",Je),nt=Xe.layoutVertexBuffer,et=Xe.indexBuffer,ht=p.style.terrain&&p.style.terrain.getTerrainData(Ie),ft={programConfiguration:Je,program:ze,layoutVertexBuffer:nt,indexBuffer:et,uniformValues:Zu(p,Ie,Ge,u),terrainData:ht};if(z){const wt=Xe.segments.get();for(const lt of wt)ke.push({segments:new l.SegmentVector([lt]),sortKey:lt.sortKey,state:ft})}else ke.push({segments:Xe.segments,sortKey:0,state:ft})}z&&ke.sort((Ae,Ie)=>Ae.sortKey-Ie.sortKey);for(const Ae of ke){const{programConfiguration:Ie,program:Ge,layoutVertexBuffer:Xe,indexBuffer:Je,uniformValues:ze,terrainData:nt}=Ae.state;Ge.draw(O,W.TRIANGLES,ee,le,he,ar.disabled,ze,nt,u.id,Xe,Je,Ae.segments,u.paint,p.transform.zoom,Ie)}},heatmap:function(p,r,u,d){if(u.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const g=p.context,_=g.gl,C=tr.disabled,z=new er([_.ONE,_.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(O,W,ee){const le=O.gl;O.activeTexture.set(le.TEXTURE1),O.viewport.set([0,0,W.width/4,W.height/4]);let he=ee.heatmapFbo;if(he)le.bindTexture(le.TEXTURE_2D,he.colorAttachment.get()),O.bindFramebuffer.set(he.framebuffer);else{const ke=le.createTexture();le.bindTexture(le.TEXTURE_2D,ke),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),he=ee.heatmapFbo=O.createFramebuffer(W.width/4,W.height/4,!1),function(Ae,Ie,Ge,Xe){const Je=Ae.gl;Je.texImage2D(Je.TEXTURE_2D,0,Je.RGBA,Ie.width/4,Ie.height/4,0,Je.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:Je.UNSIGNED_BYTE,null),Xe.colorAttachment.set(Ge)}(O,W,ke,he)}})(g,p,u),g.clear({color:l.Color.transparent});for(let O=0;O<d.length;O++){const W=d[O];if(r.hasRenderableParent(W))continue;const ee=r.getTile(W),le=ee.getBucket(u);if(!le)continue;const he=le.programConfigurations.get(u.id),ke=p.useProgram("heatmap",he),{zoom:Ae}=p.transform;ke.draw(g,_.TRIANGLES,kn.disabled,C,z,ar.disabled,Hs(W.posMatrix,ee,Ae,u.paint.get("heatmap-intensity")),null,u.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,u.paint,p.transform.zoom,he)}g.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(g,_){const C=g.context,z=C.gl,O=_.heatmapFbo;if(!O)return;C.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,O.colorAttachment.get()),C.activeTexture.set(z.TEXTURE1);let W=_.colorRampTexture;W||(W=_.colorRampTexture=new H(C,_.colorRamp,z.RGBA)),W.bind(z.LINEAR,z.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(C,z.TRIANGLES,kn.disabled,tr.disabled,g.colorModeForRenderPass(),ar.disabled,((ee,le,he,ke)=>{const Ae=l.create();l.ortho(Ae,0,ee.width,ee.height,0,0,1);const Ie=ee.context.gl;return{u_matrix:Ae,u_world:[Ie.drawingBufferWidth,Ie.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}})(g,_),null,_.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,_.paint,g.transform.zoom)}(p,u))},line:function(p,r,u,d){if(p.renderPass!=="translucent")return;const g=u.paint.get("line-opacity"),_=u.paint.get("line-width");if(g.constantOr(1)===0||_.constantOr(1)===0)return;const C=p.depthModeForSublayer(0,kn.ReadOnly),z=p.colorModeForRenderPass(),O=u.paint.get("line-dasharray"),W=u.paint.get("line-pattern"),ee=W.constantOr(1),le=u.paint.get("line-gradient"),he=u.getCrossfadeParameters(),ke=ee?"linePattern":O?"lineSDF":le?"lineGradient":"line",Ae=p.context,Ie=Ae.gl;let Ge=!0;for(const Xe of d){const Je=r.getTile(Xe);if(ee&&!Je.patternsLoaded())continue;const ze=Je.getBucket(u);if(!ze)continue;const nt=ze.programConfigurations.get(u.id),et=p.context.program.get(),ht=p.useProgram(ke,nt),ft=Ge||ht.program!==et,wt=p.style.terrain&&p.style.terrain.getTerrainData(Xe),lt=W.constantOr(null);if(lt&&Je.imageAtlas){const Ut=Je.imageAtlas,wn=Ut.patternPositions[lt.to.toString()],An=Ut.patternPositions[lt.from.toString()];wn&&An&&nt.setConstantPatternPositions(wn,An)}const Bt=wt?Xe:null,Mt=ee?Sa(p,Je,u,he,Bt):O?Ta(p,Je,u,O,he,Bt):le?qs(p,Je,u,ze.lineClipsArray.length,Bt):Ea(p,Je,u,Bt);if(ee)Ae.activeTexture.set(Ie.TEXTURE0),Je.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),nt.updatePaintBuffers(he);else if(O&&(ft||p.lineAtlas.dirty))Ae.activeTexture.set(Ie.TEXTURE0),p.lineAtlas.bind(Ae);else if(le){const Ut=ze.gradients[u.id];let wn=Ut.texture;if(u.gradientVersion!==Ut.version){let An=256;if(u.stepInterpolant){const on=r.getSource().maxzoom,qn=Xe.canonical.z===on?Math.ceil(1<<p.transform.maxZoom-Xe.canonical.z):1;An=l.clamp(l.nextPowerOfTwo(ze.maxLineLength/l.EXTENT*1024*qn),256,Ae.maxTextureSize)}Ut.gradient=l.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:An,image:Ut.gradient||void 0,clips:ze.lineClipsArray}),Ut.texture?Ut.texture.update(Ut.gradient):Ut.texture=new H(Ae,Ut.gradient,Ie.RGBA),Ut.version=u.gradientVersion,wn=Ut.texture}Ae.activeTexture.set(Ie.TEXTURE0),wn.bind(u.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}ht.draw(Ae,Ie.TRIANGLES,C,p.stencilModeForClipping(Xe),z,ar.disabled,Mt,wt,u.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,u.paint,p.transform.zoom,nt,ze.layoutVertexBuffer2),Ge=!1}},fill:function(p,r,u,d){const g=u.paint.get("fill-color"),_=u.paint.get("fill-opacity");if(_.constantOr(1)===0)return;const C=p.colorModeForRenderPass(),z=u.paint.get("fill-pattern"),O=p.opaquePassEnabledForLayer()&&!z.constantOr(1)&&g.constantOr(l.Color.transparent).a===1&&_.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===O){const W=p.depthModeForSublayer(1,p.renderPass==="opaque"?kn.ReadWrite:kn.ReadOnly);fs(p,r,u,d,W,C,!1)}if(p.renderPass==="translucent"&&u.paint.get("fill-antialias")){const W=p.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,kn.ReadOnly);fs(p,r,u,d,W,C,!0)}},"fill-extrusion":function(p,r,u,d){const g=u.paint.get("fill-extrusion-opacity");if(g!==0&&p.renderPass==="translucent"){const _=new kn(p.context.gl.LEQUAL,kn.ReadWrite,p.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))ds(p,r,u,d,_,tr.disabled,er.disabled),ds(p,r,u,d,_,p.stencilModeFor3D(),p.colorModeForRenderPass());else{const C=p.colorModeForRenderPass();ds(p,r,u,d,_,tr.disabled,C)}}},hillshade:function(p,r,u,d){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const g=p.context,_=p.depthModeForSublayer(0,kn.ReadOnly),C=p.colorModeForRenderPass(),[z,O]=p.renderPass==="translucent"?p.stencilConfigForOverlap(d):[{},d];for(const W of O){const ee=r.getTile(W);ee.needsHillshadePrepare!==void 0&&ee.needsHillshadePrepare&&p.renderPass==="offscreen"?Ro(p,ee,u,_,tr.disabled,C):p.renderPass==="translucent"&&za(p,W,ee,u,_,z[W.overscaledZ],C)}g.viewport.set([0,0,p.width,p.height])},raster:function(p,r,u,d){if(p.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!d.length)return;const g=p.context,_=g.gl,C=r.getSource(),z=p.useProgram("raster"),O=p.colorModeForRenderPass(),[W,ee]=C instanceof ce?[{},d]:p.stencilConfigForOverlap(d),le=ee[ee.length-1].overscaledZ,he=!p.options.moving;for(const ke of ee){const Ae=p.depthModeForSublayer(ke.overscaledZ-le,u.paint.get("raster-opacity")===1?kn.ReadWrite:kn.ReadOnly,_.LESS),Ie=r.getTile(ke);Ie.registerFadeDuration(u.paint.get("raster-fade-duration"));const Ge=r.findLoadedParent(ke,0),Xe=ol(Ie,Ge,r,u,p.transform,p.style.terrain);let Je,ze;const nt=u.paint.get("raster-resampling")==="nearest"?_.NEAREST:_.LINEAR;g.activeTexture.set(_.TEXTURE0),Ie.texture.bind(nt,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(_.TEXTURE1),Ge?(Ge.texture.bind(nt,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),Je=Math.pow(2,Ge.tileID.overscaledZ-Ie.tileID.overscaledZ),ze=[Ie.tileID.canonical.x*Je%1,Ie.tileID.canonical.y*Je%1]):Ie.texture.bind(nt,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);const et=p.style.terrain&&p.style.terrain.getTerrainData(ke),ht=et?ke:null,ft=ht?ht.posMatrix:p.transform.calculatePosMatrix(ke.toUnwrapped(),he),wt=ea(ft,ze||[0,0],Je||1,Xe,u);C instanceof ce?z.draw(g,_.TRIANGLES,Ae,tr.disabled,O,ar.disabled,wt,et,u.id,C.boundsBuffer,p.quadTriangleIndexBuffer,C.boundsSegments):z.draw(g,_.TRIANGLES,Ae,W[ke.overscaledZ],O,ar.disabled,wt,et,u.id,p.rasterBoundsBuffer,p.quadTriangleIndexBuffer,p.rasterBoundsSegments)}},background:function(p,r,u,d){const g=u.paint.get("background-color"),_=u.paint.get("background-opacity");if(_===0)return;const C=p.context,z=C.gl,O=p.transform,W=O.tileSize,ee=u.paint.get("background-pattern");if(p.isPatternMissing(ee))return;const le=!ee&&g.a===1&&_===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==le)return;const he=tr.disabled,ke=p.depthModeForSublayer(0,le==="opaque"?kn.ReadWrite:kn.ReadOnly),Ae=p.colorModeForRenderPass(),Ie=p.useProgram(ee?"backgroundPattern":"background"),Ge=d||O.coveringTiles({tileSize:W,terrain:p.style.terrain});ee&&(C.activeTexture.set(z.TEXTURE0),p.imageManager.bind(p.context));const Xe=u.getCrossfadeParameters();for(const Je of Ge){const ze=d?Je.posMatrix:p.transform.calculatePosMatrix(Je.toUnwrapped()),nt=ee?mh(ze,_,p,ee,{tileID:Je,tileSize:W},Xe):Xu(ze,_,g),et=p.style.terrain&&p.style.terrain.getTerrainData(Je);Ie.draw(C,z.TRIANGLES,ke,he,Ae,ar.disabled,nt,et,u.id,p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}},debug:function(p,r,u){for(let d=0;d<u.length;d++)au(p,r,u[d])},custom:function(p,r,u){const d=p.context,g=u.implementation;if(p.renderPass==="offscreen"){const _=g.prerender;_&&(p.setCustomLayerDefaults(),d.setColorMode(p.colorModeForRenderPass()),_.call(g,d.gl,p.transform.customLayerMatrix()),d.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),d.setColorMode(p.colorModeForRenderPass()),d.setStencilMode(tr.disabled);const _=g.renderingMode==="3d"?new kn(p.context.gl.LEQUAL,kn.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,kn.ReadOnly);d.setDepthMode(_),g.render(d.gl,p.transform.customLayerMatrix()),d.setDirty(),p.setBaseState(),d.bindFramebuffer.set(null)}}};class jo{constructor(r,u){this.context=new Bi(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=mt.maxUnderzooming+mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pn,this.gpuTimers={}}resize(r,u,d){if(this.width=r*d,this.height=u*d,this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const r=this.context,u=new l.PosArray;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(u,Gt.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const d=new l.PosArray;d.emplaceBack(0,0),d.emplaceBack(l.EXTENT,0),d.emplaceBack(0,l.EXTENT),d.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=r.createVertexBuffer(d,Gt.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const g=new l.RasterBoundsArray;g.emplaceBack(0,0,0,0),g.emplaceBack(l.EXTENT,0,l.EXTENT,0),g.emplaceBack(0,l.EXTENT,0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(g,te.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const _=new l.PosArray;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,Gt.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const C=new l.LineStripIndexArray;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const z=new l.TriangleIndexArray;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(z),this.emptyTexture=new H(r,{width:1,height:1,data:new Uint8Array([0,0,0,0])},r.gl.RGBA);const O=this.context.gl;this.stencilClearMode=new tr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=l.create();l.ortho(d,0,this.width,this.height,0,0,1),l.scale(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,kn.disabled,this.stencilClearMode,er.disabled,ar.disabled,ba(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const d=this.context,g=d.gl;this.nextStencilID+u.length>256&&this.clearStencil(),d.setColorMode(er.disabled),d.setDepthMode(kn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const z=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,O=this.style.terrain&&this.style.terrain.getTerrainData(C);_.draw(d,g.TRIANGLES,kn.disabled,new tr({func:g.ALWAYS,mask:0},z,255,g.KEEP,g.KEEP,g.REPLACE),er.disabled,ar.disabled,ba(C.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new tr({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new tr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,d=r.sort((C,z)=>z.overscaledZ-C.overscaledZ),g=d[d.length-1].overscaledZ,_=d[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let z=0;z<_;z++)C[z+g]=new tr({func:u.GEQUAL,mask:255},z+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,d]}return[{[g]:tr.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new er([r.CONSTANT_COLOR,r.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?er.unblended:er.alphaBlended}depthModeForSublayer(r,u,d){if(!this.opaquePassEnabledForLayer())return kn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new kn(d||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const d=this.style._order,g=this.style.sourceCaches,_=this.style.terrain&&new gs(this);for(const W in g){const ee=g[W];ee.used&&ee.prepare(this.context)}const C={},z={},O={};for(const W in g){const ee=g[W];C[W]=ee.getVisibleCoordinates(),z[W]=C[W].slice().reverse(),O[W]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<d.length;W++)if(this.style._layers[d[W]].is3D()){this.opaquePassCutoff=W;break}if(_){this.opaquePassCutoff=0;const W=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||W.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ee,le){const he=ee.context,ke=he.gl,Ae=er.unblended,Ie=new kn(ke.LEQUAL,kn.ReadWrite,[0,1]),Ge=le.getTerrainMesh(),Xe=le.sourceCache.getRenderableTiles(),Je=ee.useProgram("terrainDepth");he.bindFramebuffer.set(le.getFramebuffer("depth").framebuffer),he.viewport.set([0,0,ee.width/devicePixelRatio,ee.height/devicePixelRatio]),he.clear({color:l.Color.transparent,depth:1});for(const ze of Xe){const nt=le.getTerrainData(ze.tileID),et=ee.transform.calculatePosMatrix(ze.tileID.toUnwrapped());Je.draw(he,ke.TRIANGLES,Ie,tr.disabled,Ae,ar.backCCW,{u_matrix:et},nt,"terrain",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)}he.bindFramebuffer.set(null),he.viewport.set([0,0,ee.width,ee.height])}(this,this.style.terrain),function(ee,le){const he=ee.context,ke=he.gl,Ae=er.unblended,Ie=new kn(ke.LEQUAL,kn.ReadWrite,[0,1]),Ge=le.getTerrainMesh(),Xe=le.getCoordsTexture(),Je=le.sourceCache.getRenderableTiles(),ze=ee.useProgram("terrainCoords");he.bindFramebuffer.set(le.getFramebuffer("coords").framebuffer),he.viewport.set([0,0,ee.width/devicePixelRatio,ee.height/devicePixelRatio]),he.clear({color:l.Color.transparent,depth:1}),le.coordsIndex=[];for(const nt of Je){const et=le.getTerrainData(nt.tileID);he.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,Xe.texture);const ht=ee.transform.calculatePosMatrix(nt.tileID.toUnwrapped());ze.draw(he,ke.TRIANGLES,Ie,tr.disabled,Ae,ar.backCCW,{u_matrix:ht,u_terrain_coords_id:(255-le.coordsIndex.length)/255,u_texture:0},et,"terrain",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments),le.coordsIndex.push(nt.tileID.key)}he.bindFramebuffer.set(null),he.viewport.set([0,0,ee.width,ee.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const W of d){const ee=this.style._layers[W];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const le=z[ee.source];(ee.type==="custom"||le.length)&&this.renderLayer(this,g[ee.source],ee,le)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!_)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[d[this.currentLayer]],ee=g[W.source],le=C[W.source];this._renderTileClippingMasks(W,le),this.renderLayer(this,ee,W,le)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const W=this.style._layers[d[this.currentLayer]],ee=g[W.source];if(_&&_.renderLayer(W))continue;const le=(W.type==="symbol"?O:z)[W.source];this._renderTileClippingMasks(W,C[W.source]),this.renderLayer(this,ee,W,le)}if(this.options.showTileBoundaries){let W,ee;Object.values(this.style._layers).forEach(le=>{le.source&&!le.isHidden(this.transform.zoom)&&(le.source!==(ee&&ee.id)&&(ee=this.style.sourceCaches[le.source]),(!W||W.getSource().maxzoom<ee.getSource().maxzoom)&&(W=ee))}),W&&ni.debug(this,W,W.getVisibleCoordinates())}this.options.showPadding&&function(W){const ee=W.transform.padding;br(W,W.transform.height-(ee.top||0),3,ps),br(W,ee.bottom||0,3,li),Ni(W,ee.left||0,3,rc),Ni(W,W.transform.width-(ee.right||0),3,Oo);const le=W.transform.centerPoint;(function(he,ke,Ae,Ie){Fo(he,ke-1,Ae-10,2,20,Ie),Fo(he,ke-10,Ae-1,20,2,Ie)})(W,le.x,W.transform.height-le.y,na)}(this),this.context.setDefault()}renderLayer(r,u,d,g){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(g||[]).length)&&(this.id=d.id,this.gpuTimingStart(d),ni[d.type](r,u,d,g,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(r){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let d=this.gpuTimers[r.id];d||(d=this.gpuTimers[r.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),d.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,d.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const r=this.context.extTimerQuery;r.endQueryEXT(r.TIME_ELAPSED_EXT)}collectGpuTimers(){const r=this.gpuTimers;return this.gpuTimers={},r}queryGpuTimers(r){const u={};for(const d in r){const g=r[d],_=this.context.extTimerQuery,C=_.getQueryObjectEXT(g.query,_.QUERY_RESULT_EXT)/1e6;_.deleteQueryEXT(g.query),u[d]=C}return u}translatePosMatrix(r,u,d,g,_){if(!d[0]&&!d[1])return r;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const W=Math.sin(C),ee=Math.cos(C);d=[d[0]*ee-d[1]*W,d[0]*W+d[1]*ee]}const z=[_?d[0]:gr(u,d[0],this.transform.zoom),_?d[1]:gr(u,d[1],this.transform.zoom),0],O=new Float32Array(16);return l.translate(O,r,z),O}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!u||!d}useProgram(r,u){this.cache=this.cache||{};const d=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new ro(this.context,r,is[r],u,ql[r],this._showOverdrawInspector,this.style.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new H(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ys{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,d){const g=Math.pow(2,d),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const O=1/(z=l.transformMat4([],z,r))[3]/u*g;return l.mul$1(z,z,[O,O,1/z[3],O])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const O=l.sub([],_[z[0]],_[z[1]]),W=l.sub([],_[z[2]],_[z[1]]),ee=l.normalize([],l.cross([],O,W)),le=-l.dot(ee,_[z[1]]);return ee.concat(le)});return new ys(_,C)}}class Do{constructor(r,u){this.min=r,this.max=u,this.center=l.scale$1([],l.add([],this.min,this.max),.5)}quadrant(r){const u=[r%2==0,r<2],d=l.clone$2(this.min),g=l.clone$2(this.max);for(let _=0;_<u.length;_++)d[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Do(d,g)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let g=0;g<r.planes.length;g++){const _=r.planes[g];let C=0;for(let z=0;z<u.length;z++)l.dot$1(_,u[z])>=0&&C++;if(C===0)return 0;C!==u.length&&(d=!1)}if(d)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let z=0;z<r.points.length;z++){const O=r.points[z][g]-this.min[g];_=Math.min(_,O),C=Math.max(C,O)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class go{constructor(r=0,u=0,d=0,g=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=d,this.right=g}interpolate(r,u,d){return u.top!=null&&r.top!=null&&(this.top=l.number(r.top,u.top,d)),u.bottom!=null&&r.bottom!=null&&(this.bottom=l.number(r.bottom,u.bottom,d)),u.left!=null&&r.left!=null&&(this.left=l.number(r.left,u.left,d)),u.right!=null&&r.right!=null&&(this.right=l.number(r.right,u.right,d)),this}getCenter(r,u){const d=l.clamp((this.left+r-this.right)/2,0,r),g=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.pointGeometry(d,g)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new go(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class La{constructor(r,u,d,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=d??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new go,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const r=new La(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.tileSize=this.tileSize,r.latRange=this.latRange,r.width=this.width,r.height=this.height,r._center=this._center,r._elevation=this._elevation,r.zoom=this.zoom,r.angle=this.angle,r._fov=this._fov,r._pitch=this._pitch,r._unmodified=this._unmodified,r._edgeInsets=this._edgeInsets.clone(),r._calcMatrices(),r}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-l.wrap(r,-180,180)*Math.PI/180;var d;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(d=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d),function(g,_,C){var z=_[0],O=_[1],W=_[2],ee=_[3],le=Math.sin(C),he=Math.cos(C);g[0]=z*he+W*le,g[1]=O*he+ee*le,g[2]=z*-le+W*he,g[3]=O*-le+ee*he}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=l.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,d){this._unmodified=!1,this._edgeInsets.interpolate(r,u,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new l.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new l.pointGeometry(0,0)),g=this.pointCoordinate(new l.pointGeometry(this.width,0)),_=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),C=this.pointCoordinate(new l.pointGeometry(0,this.height)),z=Math.floor(Math.min(d.x,g.x,_.x,C.x)),O=Math.floor(Math.max(d.x,g.x,_.x,C.x)),W=1;for(let ee=z-W;ee<=O+W;ee++)ee!==0&&u.push(new l.UnwrappedTileID(ee,r))}return u}coveringTiles(r){var u,d;let g=this.coveringZoomLevel(r);const _=g;if(r.minzoom!==void 0&&g<r.minzoom)return[];r.maxzoom!==void 0&&g>r.maxzoom&&(g=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),z=l.MercatorCoordinate.fromLngLat(this.center),O=Math.pow(2,g),W=[O*C.x,O*C.y,0],ee=[O*z.x,O*z.y,0],le=ys.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let he=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(he=g);const ke=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ae=ze=>({aabb:new Do([ze*O,0,0],[(ze+1)*O,O,0]),zoom:0,x:0,y:0,wrap:ze,fullyVisible:!1}),Ie=[],Ge=[],Xe=g,Je=r.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ze=1;ze<=3;ze++)Ie.push(Ae(-ze)),Ie.push(Ae(ze));for(Ie.push(Ae(0));Ie.length>0;){const ze=Ie.pop(),nt=ze.x,et=ze.y;let ht=ze.fullyVisible;if(!ht){const Ut=ze.aabb.intersects(le);if(Ut===0)continue;ht=Ut===2}const ft=r.terrain?W:ee,wt=ze.aabb.distanceX(ft),lt=ze.aabb.distanceY(ft),Bt=Math.max(Math.abs(wt),Math.abs(lt)),Mt=ke+(1<<Xe-ze.zoom)-2;if(ze.zoom===Xe||Bt>Mt&&ze.zoom>=he){const Ut=Xe-ze.zoom,wn=W[0]-.5-(nt<<Ut),An=W[1]-.5-(et<<Ut);Ge.push({tileID:new l.OverscaledTileID(ze.zoom===Xe?Je:ze.zoom,ze.wrap,ze.zoom,nt,et),distanceSq:l.sqrLen([ee[0]-.5-nt,ee[1]-.5-et]),tileDistanceToCamera:Math.sqrt(wn*wn+An*An)})}else for(let Ut=0;Ut<4;Ut++){const wn=(nt<<1)+Ut%2,An=(et<<1)+(Ut>>1),on=ze.zoom+1;let qn=ze.aabb.quadrant(Ut);if(r.terrain){const Kn=new l.OverscaledTileID(on,ze.wrap,on,wn,An),On=r.terrain.getMinMaxElevation(Kn),Dn=(u=On.minElevation)!==null&&u!==void 0?u:this.elevation,Qn=(d=On.maxElevation)!==null&&d!==void 0?d:this.elevation;qn=new Do([qn.min[0],qn.min[1],Dn],[qn.max[0],qn.max[1],Qn])}Ie.push({aabb:qn,zoom:on,x:wn,y:An,wrap:ze.wrap,fullyVisible:ht})}}return Ge.sort((ze,nt)=>ze.distanceSq-nt.distanceSq).map(ze=>ze.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=l.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(r.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)}unproject(r){return new l.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(r){this.freezeElevation||(this.elevation=r?this.getElevation(this._center,r):0)}getElevation(r,u){const d=l.MercatorCoordinate.fromLngLat(r),g=(1<<this.tileZoom)*l.EXTENT,_=d.x*g,C=d.y*g,z=Math.floor(_/l.EXTENT),O=Math.floor(C/l.EXTENT),W=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,z,O);return u.getElevation(W,_%l.EXTENT,C%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),d=this.getElevation(u,r);if(!(this.elevation-d))return;const g=this.getCameraPosition(),_=l.MercatorCoordinate.fromLngLat(g.lngLat,g.altitude),C=l.MercatorCoordinate.fromLngLat(u,d),z=_.x-C.x,O=_.y-C.y,W=_.z-C.z,ee=Math.sqrt(z*z+O*O+W*W),le=this.scaleZoom(this.cameraToCenterDistance/ee/this.tileSize);this._elevation=d,this._center=u,this.zoom=le}setLocationAtPoint(r,u){const d=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),C=new l.MercatorCoordinate(_.x-(d.x-g.x),_.y-(d.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),this.getElevation(r,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return l.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const he=u.pointCoordinate(r);if(he!=null)return he}const d=[r.x,r.y,0,1],g=[r.x,r.y,1,1];l.transformMat4(d,d,this.pixelMatrixInverse),l.transformMat4(g,g,this.pixelMatrixInverse);const _=d[3],C=g[3],z=d[1]/_,O=g[1]/C,W=d[2]/_,ee=g[2]/C,le=(0-W)/(ee-W);return new l.MercatorCoordinate(l.number(d[0]/_,g[0]/C,le)/this.worldSize,l.number(z,O,le)/this.worldSize)}coordinatePoint(r,u=0,d=this.pixelMatrix){const g=[r.x*this.worldSize,r.y*this.worldSize,u,1];return l.transformMat4(g,g,d),new l.pointGeometry(g[0]/g[3],g[1]/g[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,r))).extend(this.pointLocation(new l.pointGeometry(this.width,r))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const d=r.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[d])return g[d];const _=r.canonical,C=this.worldSize/this.zoomScale(_.z),z=_.x+Math.pow(2,_.z)*r.wrap,O=l.identity(new Float64Array(16));return l.translate(O,O,[z*C,_.y*C,0]),l.scale(O,O,[C/l.EXTENT,C/l.EXTENT,1]),l.multiply(O,u?this.alignedProjMatrix:this.projMatrix,O),g[d]=new Float32Array(O),g[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,d,g,_=-90,C=90,z=-180,O=180;const W=this.size,ee=this._unmodified;if(this.latRange){const ke=this.latRange;_=l.mercatorYfromLat(ke[1])*this.worldSize,C=l.mercatorYfromLat(ke[0])*this.worldSize,r=C-_<W.y?W.y/(C-_):0}if(this.lngRange){const ke=this.lngRange;z=l.wrap(l.mercatorXfromLng(ke[0])*this.worldSize,0,this.worldSize),O=l.wrap(l.mercatorXfromLng(ke[1])*this.worldSize,0,this.worldSize),O<z&&(O+=this.worldSize),u=O-z<W.x?W.x/(O-z):0}const le=this.point,he=Math.max(u||0,r||0);if(he)return this.center=this.unproject(new l.pointGeometry(u?(O+z)/2:le.x,r?(C+_)/2:le.y)),this.zoom+=this.scaleZoom(he),this._unmodified=ee,void(this._constraining=!1);if(this.latRange){const ke=le.y,Ae=W.y/2;ke-Ae<_&&(g=_+Ae),ke+Ae>C&&(g=C-Ae)}if(this.lngRange){const ke=(z+O)/2,Ae=l.wrap(le.x,ke-this.worldSize/2,ke+this.worldSize/2),Ie=W.x/2;Ae-Ie<z&&(d=z+Ie),Ae+Ie>O&&(d=O-Ie)}d===void 0&&g===void 0||(this.center=this.unproject(new l.pointGeometry(d!==void 0?d:le.x,g!==void 0?g:le.y)).wrap()),this._unmodified=ee,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let g=l.identity(new Float64Array(16));l.scale(g,g,[this.width/2,-this.height/2,1]),l.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.identity(new Float64Array(16)),l.scale(g,g,[1,-1,1]),l.translate(g,g,[-1,-1,0]),l.scale(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const _=Math.PI/2+this._pitch,C=this._fov*(.5+r.y/this.height),z=Math.sin(C)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-_-C,.01,Math.PI-.01)),O=this.getHorizon(),W=2*Math.atan(O/this.cameraToCenterDistance)*(.5+r.y/(2*O)),ee=Math.sin(W)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-_-W,.01,Math.PI-.01)),le=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,he=Math.cos(Math.PI/2-this._pitch)*ee+this.cameraToSeaLevelDistance,ke=1.01*Math.min(le,he),Ae=this.height/50;g=new Float64Array(16),l.perspective(g,this._fov,this.width/this.height,Ae,ke),g[8]=2*-r.x/this.width,g[9]=2*r.y/this.height,l.scale(g,g,[1,-1,1]),l.translate(g,g,[0,0,-this.cameraToCenterDistance]),l.rotateX(g,g,this._pitch),l.rotateZ(g,g,this.angle),l.translate(g,g,[-u,-d,0]),this.mercatorMatrix=l.scale([],g,[this.worldSize,this.worldSize,this.worldSize]),l.scale(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,g),l.translate(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.invert([],g),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,g);const Ie=this.width%2/2,Ge=this.height%2/2,Xe=Math.cos(this.angle),Je=Math.sin(this.angle),ze=u-Math.round(u)+Xe*Ie+Je*Ge,nt=d-Math.round(d)+Xe*Ge+Je*Ie,et=new Float64Array(g);if(l.translate(et,et,[ze>.5?ze-1:ze,nt>.5?nt-1:nt,0]),this.alignedProjMatrix=et,g=l.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new l.pointGeometry(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let d=u.x,g=u.y,_=u.x,C=u.y;for(const z of r)d=Math.min(d,z.x),g=Math.min(g,z.y),_=Math.max(_,z.x),C=Math.max(C,z.y);return[new l.pointGeometry(d,g),new l.pointGeometry(_,g),new l.pointGeometry(_,C),new l.pointGeometry(d,C),new l.pointGeometry(d,g)]}}}class su{constructor(r){this._hashName=r&&encodeURIComponent(r),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,d){let g=!1,_=null;const C=()=>{_=null,g&&(u(),_=setTimeout(C,300),g=!1)};return()=>(g=!0,_||C(),_)}(this._updateHashUnthrottled.bind(this))}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,g=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,z=Math.round(u.lat*_)/_,O=this._map.getBearing(),W=this._map.getPitch();let ee="";if(ee+=r?`/${C}/${z}/${d}`:`${d}/${z}/${C}`,(O||W)&&(ee+="/"+Math.round(10*O)/10),W&&(ee+=`/${Math.round(W)}`),this._hashName){const le=this._hashName;let he=!1;const ke=window.location.hash.slice(1).split("&").map(Ae=>{const Ie=Ae.split("=")[0];return Ie===le?(he=!0,`${Ie}=${ee}`):Ae}).filter(Ae=>Ae);return he||ke.push(`${le}=${ee}`),`#${ke.join("&")}`}return`#${ee}`}_getCurrentHash(){const r=window.location.hash.replace("#","");if(this._hashName){let u;return r.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(u=d)}),(u&&u[1]||"").split("/")}return r.split("/")}_onHashChange(){const r=this._getCurrentHash();if(r.length>=3&&!r.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:u,pitch:+(r[4]||0)}),!0}return!1}_updateHashUnthrottled(){const r=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,r)}catch{}}}const Ra={linearity:.3,easing:l.bezier(0,0,.3,1)},lu=l.extend({deceleration:2500,maxSpeed:1400},Ra),yo=l.extend({deceleration:20,maxSpeed:1400},Ra),uu=l.extend({deceleration:1e3,maxSpeed:360},Ra),Oa=l.extend({deceleration:1e3,maxSpeed:90},Ra);class cu{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=l.exported.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Fa(u.pan.mag(),d,l.extend({},lu,r||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,ra(g,_)}if(u.zoom){const _=Fa(u.zoom,d,yo);g.zoom=this._map.transform.zoom+_.amount,ra(g,_)}if(u.bearing){const _=Fa(u.bearing,d,uu);g.bearing=this._map.transform.bearing+l.clamp(_.amount,-179,179),ra(g,_)}if(u.pitch){const _=Fa(u.pitch,d,Oa);g.pitch=this._map.transform.pitch+_.amount,ra(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.extend(g,{noMoveStart:!0})}}function ra(p,r){(!p.duration||p.duration<r.duration)&&(p.duration=r.duration,p.easing=r.easing)}function Fa(p,r,u){const{maxSpeed:d,linearity:g,deceleration:_}=u,C=l.clamp(p*g/(r/1e3),-d,d),z=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*z,amount:C*(z/2)}}class ui extends l.Event{constructor(r,u,d,g={}){const _=I.mousePos(u.getCanvasContainer(),d),C=u.unproject(_);super(r,l.extend({point:_,lngLat:C,originalEvent:d},g)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ja extends l.Event{constructor(r,u,d){const g=r==="touchend"?d.changedTouches:d.touches,_=I.touchPos(u.getCanvasContainer(),g),C=_.map(O=>u.unproject(O)),z=_.reduce((O,W,ee,le)=>O.add(W.div(le.length)),new l.pointGeometry(0,0));super(r,{points:_,point:z,lngLats:C,lngLat:u.unproject(z),originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class B extends l.Event{constructor(r,u,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class me{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new B(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new ui(r.type,this._map,r))}mouseup(r){this._map.fire(new ui(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ui(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ui(r.type,this._map,r))}mouseover(r){this._map.fire(new ui(r.type,this._map,r))}mouseout(r){this._map.fire(new ui(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ja(r.type,this._map,r))}touchmove(r){this._map.fire(new ja(r.type,this._map,r))}touchend(r){this._map.fire(new ja(r.type,this._map,r))}touchcancel(r){this._map.fire(new ja(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Re{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ui(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ui(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ot{constructor(r,u){this._map=r,this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(I.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=d,this._box||(this._box=I.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(g.x,d.x),C=Math.max(g.x,d.x),z=Math.min(g.y,d.y),O=Math.max(g.y,d.y);I.setTransform(this._box,`translate(${_}px,${z}px)`),this._box.style.width=C-_+"px",this._box.style.height=O-z+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const d=this._startPos,g=u;if(this.reset(),I.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(d,g,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new l.Event(r,{originalEvent:u}))}}function It(p,r){if(p.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${p.length}, points ${r.length}`);const u={};for(let d=0;d<p.length;d++)u[p[d].identifier]=r[d];return u}class St{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(g){const _=new l.pointGeometry(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=It(d,u)))}touchmove(r,u,d){if(this.aborted||!this.centroid)return;const g=It(d,u);for(const _ in this.touches){const C=this.touches[_],z=g[_];(!z||z.dist(C)>30)&&(this.aborted=!0)}}touchend(r,u,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Xt{constructor(r){this.singleTap=new St(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,d){this.singleTap.touchstart(r,u,d)}touchmove(r,u,d){this.singleTap.touchmove(r,u,d)}touchend(r,u,d){const g=this.singleTap.touchend(r,u,d);if(g){const _=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class tn{constructor(){this._zoomIn=new Xt({numTouches:1,numTaps:2}),this._zoomOut=new Xt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,d){this._zoomIn.touchstart(r,u,d),this._zoomOut.touchstart(r,u,d)}touchmove(r,u,d){this._zoomIn.touchmove(r,u,d),this._zoomOut.touchmove(r,u,d)}touchend(r,u,d){const g=this._zoomIn.touchend(r,u,d),_=this._zoomOut.touchend(r,u,d);return g?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(g)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const En={0:1,2:2};class $n{constructor(r){this.reset(),this._clickTolerance=r.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(r,u){return!1}_move(r,u){return{}}mousedown(r,u){if(this._lastPoint)return;const d=I.mouseButton(r);this._correctButton(r,d)&&(this._lastPoint=u,this._eventButton=d)}mousemoveWindow(r,u){const d=this._lastPoint;if(d){if(r.preventDefault(),function(g,_){const C=En[_];return g.buttons===void 0||(g.buttons&C)!==C}(r,this._eventButton))this.reset();else if(this._moved||!(u.dist(d)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(d,u)}}mouseupWindow(r){this._lastPoint&&I.mouseButton(r)===this._eventButton&&(this._moved&&I.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jn extends $n{mousedown(r,u){super.mousedown(r,u),this._lastPoint&&(this._active=!0)}_correctButton(r,u){return u===0&&!r.ctrlKey}_move(r,u){return{around:u,panDelta:u.sub(r)}}}class Vn extends $n{_correctButton(r,u){return u===0&&r.ctrlKey||u===2}_move(r,u){const d=.8*(u.x-r.x);if(d)return this._active=!0,{bearingDelta:d}}contextmenu(r){r.preventDefault()}}class Tt extends $n{_correctButton(r,u){return u===0&&r.ctrlKey||u===2}_move(r,u){const d=-.5*(u.y-r.y);if(d)return this._active=!0,{pitchDelta:d}}contextmenu(r){r.preventDefault()}}class Vr{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,d){return this._calculateTransform(r,u,d)}touchmove(r,u,d){if(this._map._cooperativeGestures&&(this._minTouches===2&&d.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,d.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(d.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,d)}touchend(r,u,d){this._calculateTransform(r,u,d),this._active&&d.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,d){d.length>0&&(this._active=!0);const g=It(d,u),_=new l.pointGeometry(0,0),C=new l.pointGeometry(0,0);let z=0;for(const W in g){const ee=g[W],le=this._touches[W];le&&(_._add(ee),C._add(ee.sub(le)),z++,g[W]=ee)}if(this._touches=g,z<this._minTouches||!C.mag())return;const O=C.div(z);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(z),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(r){}_move(r,u,d){return{}}touchstart(r,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,d){if(!this._firstTwoTouches)return;r.preventDefault();const[g,_]=this._firstTwoTouches,C=ri(d,u,g),z=ri(d,u,_);if(!C||!z)return;const O=this._aroundCenter?null:C.add(z).div(2);return this._move([C,z],O,r)}touchend(r,u,d){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=ri(d,u,g),z=ri(d,u,_);C&&z||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ri(p,r,u){for(let d=0;d<p.length;d++)if(p[d].identifier===u)return r[d]}function Ui(p,r){return Math.log(p/r)/Math.LN2}class kt extends cr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Ui(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ui(this._distance,d),pinchAround:u}}}function vs(p,r){return 180*p.angleWith(r)/Math.PI}class sl extends cr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:vs(this._vector,d),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,d=vs(r,this._startVector);return Math.abs(d)<u}}function Da(p){return Math.abs(p.y)>Math.abs(p.x)}class bh extends cr{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,d){super.touchstart(r,u,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Da(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,d){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,d){if(this._valid!==void 0)return this._valid;const g=r.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const C=r.y>0==u.y>0;return Da(r)&&Da(u)&&C}}const md={panStep:100,bearingStep:15,pitchStep:10};class gd{constructor(){const r=md;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,d=0,g=0,_=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?g=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?g=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:z=>{const O=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:Tg,zoom:u?Math.round(O)+u*(r.shiftKey?2:1):O,bearing:z.getBearing()+d*this._bearingStep,pitch:z.getPitch()+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:z.getCenter()},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tg(p){return p*(2-p)}const yd=4.000244140625;class Eh{constructor(r,u){this._map=r,this._el=r.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=l.exported.now(),g=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%yd==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_onTimeout(r){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=I.mousePos(this._el,r);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._map.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>yd?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&O!==0&&(O=1/O);const W=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(W*O))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&d&&g){const z=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),O=g(z);_=l.number(d,u,O),z<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=l.ease;if(this._prevEase){const d=this._prevEase,g=(l.exported.now()-d.start)/d.duration,_=d.easing(g+.01)-d.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,z=Math.sqrt(.0729-C*C);u=l.bezier(C,z,.25,1)}return this._prevEase={start:l.exported.now(),duration:r,easing:u},u}reset(){this._active=!1}}class Sh{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Th{constructor(){this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:d.getZoom()+(r.shiftKey?-1:1),around:d.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ch{constructor(){this._tap=new Xt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(r,u,d){this._swipePoint||(this._tapTime&&r.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?d.length>0&&(this._swipePoint=u[0],this._swipeTouch=d[0].identifier):this._tap.touchstart(r,u,d))}touchmove(r,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,d)}touchend(r,u,d){this._tapTime?this._swipePoint&&d.length===0&&this.reset():this._tap.touchend(r,u,d)&&(this._tapTime=r.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai{constructor(r,u,d){this._el=r,this._mousePan=u,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ba{constructor(r,u,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vd{constructor(r,u,d,g){this._el=r,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ll=p=>p.zoom||p.drag||p.pitch||p.rotate;class Ah extends l.Event{}function hu(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class _d{constructor(r,u){this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cu(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),l.bindAll(["handleEvent","handleWindowEvent"],this);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)I.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,u,d]of this._listeners)I.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new me(u,r));const g=u.boxZoom=new ot(u,r);this._add("boxZoom",g);const _=new tn,C=new Th;u.doubleClickZoom=new Sh(C,_),this._add("tapZoom",_),this._add("clickZoom",C);const z=new Ch;this._add("tapDragZoom",z);const O=u.touchPitch=new bh(u);this._add("touchPitch",O);const W=new Vn(r),ee=new Tt(r);u.dragRotate=new Ba(r,W,ee),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate"]);const le=new jn(r),he=new Vr(r,u);u.dragPan=new Ai(d,le,he),this._add("mousePan",le),this._add("touchPan",he,["touchZoom","touchRotate"]);const ke=new sl,Ae=new kt;u.touchZoomRotate=new vd(d,Ae,ke,z),this._add("touchRotate",ke,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]);const Ie=u.scrollZoom=new Eh(u,this);this._add("scrollZoom",Ie,["mousePan"]);const Ge=u.keyboard=new gd;this._add("keyboard",Ge),this._add("blockableMapEvent",new Re(u));for(const Xe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])r.interactive&&r[Xe]&&u[Xe].enable(r[Xe])}_add(r,u,d){this._handlers.push({handlerName:r,handler:u,allowed:d}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ll(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,d){for(const g in r)if(g!==d&&(!u||u.indexOf(g)<0))return!0;return!1}handleWindowEvent(r){this.handleEvent(r,`${r.type}Window`)}_getMapTouches(r){const u=[];for(const d of r)this._el.contains(d.target)&&u.push(d);return u}handleEvent(r,u){if(r.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const d=r.type==="renderFrame"?void 0:r,g={needsRenderFrame:!1},_={},C={},z=r.touches,O=z?this._getMapTouches(z):void 0,W=O?I.touchPos(this._el,O):I.mousePos(this._el,r);for(const{handlerName:he,handler:ke,allowed:Ae}of this._handlers){if(!ke.isEnabled())continue;let Ie;this._blockedByActive(C,Ae,he)?ke.reset():ke[u||r.type]&&(Ie=ke[u||r.type](r,W,O),this.mergeHandlerResult(g,_,Ie,he,d),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()),(Ie||ke.isActive())&&(C[he]=ke)}const ee={};for(const he in this._previousActiveHandlers)C[he]||(ee[he]=d);this._previousActiveHandlers=C,(Object.keys(ee).length||hu(g))&&(this._changes.push([g,_,ee]),this._triggerRenderFrame()),(Object.keys(C).length||hu(g))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=g;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))}mergeHandlerResult(r,u,d,g,_){if(!d)return;l.extend(r,d);const C={handlerName:g,originalEvent:d.originalEvent||_};d.zoomDelta!==void 0&&(u.zoom=C),d.panDelta!==void 0&&(u.drag=C),d.pitchDelta!==void 0&&(u.pitch=C),d.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const r={},u={},d={};for(const[g,_,C]of this._changes)g.panDelta&&(r.panDelta=(r.panDelta||new l.pointGeometry(0,0))._add(g.panDelta)),g.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(r.around=g.around),g.pinchAround!==void 0&&(r.pinchAround=g.pinchAround),g.noInertia&&(r.noInertia=g.noInertia),l.extend(u,_),l.extend(d,C);this._updateMapTransform(r,u,d),this._changes=[]}_updateMapTransform(r,u,d){const g=this._map,_=g.transform,C=g.style&&g.style.terrain;if(!(hu(r)||C&&this._drag))return this._fireEvents(u,d,!0);let{panDelta:z,zoomDelta:O,bearingDelta:W,pitchDelta:ee,around:le,pinchAround:he}=r;he!==void 0&&(le=he),g._stop(!0),le=le||g.transform.centerPoint;const ke=_.pointLocation(z?le.sub(z):le);W&&(_.bearing+=W),ee&&(_.pitch+=ee),O&&(_.zoom+=O),C?u.drag&&!this._drag?(this._drag={center:_.centerPoint,lngLat:_.pointLocation(le),point:le,handlerName:u.drag.handlerName},g.fire(new l.Event("freezeElevation",{freeze:!0}))):this._drag&&d[this._drag.handlerName]?(g.fire(new l.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(_.center=_.pointLocation(_.centerPoint.sub(z))):_.setLocationAtPoint(ke,le),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,d,!0)}_fireEvents(r,u,d){const g=ll(this._eventsInProgress),_=ll(r),C={};for(const ee in r){const{originalEvent:le}=r[ee];this._eventsInProgress[ee]||(C[`${ee}start`]=le),this._eventsInProgress[ee]=r[ee]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const ee in C)this._fireEvent(ee,C[ee]);_&&this._fireEvent("move",_.originalEvent);for(const ee in r){const{originalEvent:le}=r[ee];this._fireEvent(ee,le)}const z={};let O;for(const ee in this._eventsInProgress){const{handlerName:le,originalEvent:he}=this._eventsInProgress[ee];this._handlersById[le].isActive()||(delete this._eventsInProgress[ee],O=u[le]||he,z[`${ee}end`]=O)}for(const ee in z)this._fireEvent(ee,z[ee]);const W=ll(this._eventsInProgress);if(d&&(g||_)&&!W){this._updatingCamera=!0;const ee=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=he=>he!==0&&-this._bearingSnap<he&&he<this._bearingSnap;ee?(le(ee.bearing||this._map.getBearing())&&(ee.bearing=0),this._map.easeTo(ee,{originalEvent:O})):(this._map.fire(new l.Event("moveend",{originalEvent:O})),le(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new l.Event(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Ah("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const oo={extend:(p,...r)=>l.extend(p,...r),run(p){p()},logToElement(p,r=!1,u="log"){const d=window.document.getElementById(u);d&&(r&&(d.innerHTML=""),d.innerHTML+=`<br>${p}`)}};class hr extends l.Evented{constructor(r,u){super(),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,d){return r=l.pointGeometry.convert(r).mult(-1),this.panTo(this.transform.center,l.extend({offset:r},u),d)}panTo(r,u,d){return this.easeTo(l.extend({center:r},u),d)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,d){return this.easeTo(l.extend({zoom:r},u),d)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,d){return this.easeTo(l.extend({bearing:r},u),d)}resetNorth(r,u){return this.rotateTo(0,l.extend({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=l.LngLatBounds.convert(r);const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,u)}_cameraForBoxAndBearing(r,u,d,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const et=g.padding;g.padding={top:et,bottom:et,right:et,left:et}}g.padding=l.extend(_,g.padding);const C=this.transform,z=C.padding,O=C.project(l.LngLat.convert(r)),W=C.project(l.LngLat.convert(u)),ee=O.rotate(-d*Math.PI/180),le=W.rotate(-d*Math.PI/180),he=new l.pointGeometry(Math.max(ee.x,le.x),Math.max(ee.y,le.y)),ke=new l.pointGeometry(Math.min(ee.x,le.x),Math.min(ee.y,le.y)),Ae=he.sub(ke),Ie=(C.width-(z.left+z.right+g.padding.left+g.padding.right))/Ae.x,Ge=(C.height-(z.top+z.bottom+g.padding.top+g.padding.bottom))/Ae.y;if(Ge<0||Ie<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Xe=Math.min(C.scaleZoom(C.scale*Math.min(Ie,Ge)),g.maxZoom),Je=l.pointGeometry.convert(g.offset),ze=new l.pointGeometry((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(d*Math.PI/180),nt=Je.add(ze).mult(C.scale/C.zoomScale(Xe));return{center:C.unproject(O.add(W).div(2).sub(nt)),zoom:Xe,bearing:d}}fitBounds(r,u,d){return this._fitInternal(this.cameraForBounds(r,u),u,d)}fitScreenCoordinates(r,u,d,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(r)),this.transform.pointLocation(l.pointGeometry.convert(u)),d,g),g,_)}_fitInternal(r,u,d){return r?(delete(u=l.extend(r,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(r,u){this.stop();const d=this.transform;let g=!1,_=!1,C=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(g=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=l.LngLat.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(_=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(C=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),g&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),_&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),C&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))}calculateCameraOptionsFromTo(r,u,d,g=0){const _=l.MercatorCoordinate.fromLngLat(r,u),C=l.MercatorCoordinate.fromLngLat(d,g),z=C.x-_.x,O=C.y-_.y,W=C.z-_.z,ee=Math.hypot(z,O,W);if(ee===0)throw new Error("Can't calculate camera options with same From and To");const le=Math.hypot(z,O),he=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ee/this.transform.tileSize),ke=180*Math.atan2(z,-O)/Math.PI;let Ae=180*Math.acos(le/ee)/Math.PI;return Ae=W<0?90-Ae:90+Ae,{center:C.toLngLat(),zoom:he,pitch:Ae,bearing:ke}}easeTo(r,u){this._stop(!1,r.easeId),((r=l.extend({offset:[0,0],duration:500,easing:l.ease},r)).animate===!1||!r.essential&&l.exported.prefersReducedMotion)&&(r.duration=0);const d=this.transform,g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),z=this.getPadding(),O="zoom"in r?+r.zoom:g,W="bearing"in r?this._normalizeBearing(r.bearing,_):_,ee="pitch"in r?+r.pitch:C,le="padding"in r?r.padding:d.padding,he=l.pointGeometry.convert(r.offset);let ke=d.centerPoint.add(he);const Ae=d.pointLocation(ke),Ie=l.LngLat.convert(r.center||Ae);this._normalizeCenter(Ie);const Ge=d.project(Ae),Xe=d.project(Ie).sub(Ge),Je=d.zoomScale(O-g);let ze,nt;r.around&&(ze=l.LngLat.convert(r.around),nt=d.locationPoint(ze));const et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||O!==g,this._rotating=this._rotating||_!==W,this._pitching=this._pitching||ee!==C,this._padding=!d.isPaddingEqual(le),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,et),this._ease(ht=>{if(this._zooming&&(d.zoom=l.number(g,O,ht)),this._rotating&&(d.bearing=l.number(_,W,ht)),this._pitching&&(d.pitch=l.number(C,ee,ht)),this._padding&&(d.interpolatePadding(z,le,ht),ke=d.centerPoint.add(he)),ze)d.setLocationAtPoint(ze,nt);else{const ft=d.zoomScale(d.zoom-g),wt=O>g?Math.min(2,Je):Math.max(.5,Je),lt=Math.pow(wt,1-ht),Bt=d.unproject(Ge.add(Xe.mult(ht*lt)).mult(ft));d.setLocationAtPoint(d.renderWorldCopies?Bt.wrap():Bt,ke)}this._fireMoveEvents(u)},ht=>{this._afterEase(u,ht)},r),this}_prepareEase(r,u,d={}){this._moving=!0,this.fire(new l.Event("freezeElevation",{freeze:!0})),u||d.moving||this.fire(new l.Event("movestart",r)),this._zooming&&!d.zooming&&this.fire(new l.Event("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new l.Event("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new l.Event("pitchstart",r))}_fireMoveEvents(r){this.fire(new l.Event("move",r)),this._zooming&&this.fire(new l.Event("zoom",r)),this._rotating&&this.fire(new l.Event("rotate",r)),this._pitching&&this.fire(new l.Event("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new l.Event("freezeElevation",{freeze:!1}));const d=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new l.Event("zoomend",r)),g&&this.fire(new l.Event("rotateend",r)),_&&this.fire(new l.Event("pitchend",r)),this.fire(new l.Event("moveend",r))}flyTo(r,u){if(!r.essential&&l.exported.prefersReducedMotion){const on=l.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(on,u)}this.stop(),r=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},r);const d=this.transform,g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),z=this.getPadding(),O="zoom"in r?l.clamp(+r.zoom,d.minZoom,d.maxZoom):g,W="bearing"in r?this._normalizeBearing(r.bearing,_):_,ee="pitch"in r?+r.pitch:C,le="padding"in r?r.padding:d.padding,he=d.zoomScale(O-g),ke=l.pointGeometry.convert(r.offset);let Ae=d.centerPoint.add(ke);const Ie=d.pointLocation(Ae),Ge=l.LngLat.convert(r.center||Ie);this._normalizeCenter(Ge);const Xe=d.project(Ie),Je=d.project(Ge).sub(Xe);let ze=r.curve;const nt=Math.max(d.width,d.height),et=nt/he,ht=Je.mag();if("minZoom"in r){const on=l.clamp(Math.min(r.minZoom,g,O),d.minZoom,d.maxZoom),qn=nt/d.zoomScale(on-g);ze=Math.sqrt(qn/ht*2)}const ft=ze*ze;function wt(on){const qn=(et*et-nt*nt+(on?-1:1)*ft*ft*ht*ht)/(2*(on?et:nt)*ft*ht);return Math.log(Math.sqrt(qn*qn+1)-qn)}function lt(on){return(Math.exp(on)-Math.exp(-on))/2}function Bt(on){return(Math.exp(on)+Math.exp(-on))/2}const Mt=wt(0);let Ut=function(on){return Bt(Mt)/Bt(Mt+ze*on)},wn=function(on){return nt*((Bt(Mt)*(lt(qn=Mt+ze*on)/Bt(qn))-lt(Mt))/ft)/ht;var qn},An=(wt(1)-Mt)/ze;if(Math.abs(ht)<1e-6||!isFinite(An)){if(Math.abs(nt-et)<1e-6)return this.easeTo(r,u);const on=et<nt?-1:1;An=Math.abs(Math.log(et/nt))/ze,wn=function(){return 0},Ut=function(qn){return Math.exp(on*ze*qn)}}return r.duration="duration"in r?+r.duration:1e3*An/("screenSpeed"in r?+r.screenSpeed/ze:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==W,this._pitching=ee!==C,this._padding=!d.isPaddingEqual(le),this._prepareEase(u,!1),this._ease(on=>{const qn=on*An,Kn=1/Ut(qn);d.zoom=on===1?O:g+d.scaleZoom(Kn),this._rotating&&(d.bearing=l.number(_,W,on)),this._pitching&&(d.pitch=l.number(C,ee,on)),this._padding&&(d.interpolatePadding(z,le,on),Ae=d.centerPoint.add(ke));const On=on===1?Ge:d.unproject(Xe.add(Je.mult(wn(qn))).mult(Kn));d.setLocationAtPoint(d.renderWorldCopies?On.wrap():On,Ae),this._fireMoveEvents(u)},()=>this._afterEase(u),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,u)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,u,d){d.animate===!1||d.duration===0?(r(1),u()):(this._easeStart=l.exported.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const r=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(r,u){r=l.wrap(r,-180,180);const d=Math.abs(r-u);return Math.abs(r-360-u)<d&&(r-=360),Math.abs(r+360-u)<d&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const d=r.lng-u.center.lng;r.lng+=d>180?-360:d<-180?360:0}}class fu{constructor(r={}){this.options=r,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const d=this._map._getUIString(`AttributionControl.${u}`);r.title=d,r.setAttribute("aria-label",d)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(r){!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(g=>String(g).trim()),r.sort((g,_)=>g.length-_.length),r=r.filter((g,_)=>{for(let C=_+1;C<r.length;C++)if(r[C].indexOf(g)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ic{constructor(r={}){this.options=r,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=I.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const r=this._container.children;if(r.length){const u=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class xd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const g of d)if(g.id===r)return void(g.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const wd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},bd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Cg={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bo{constructor(r,u,d=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Vn({clickTolerance:r.dragRotate._mouseRotate._clickTolerance}),this.map=r,d&&(this.mousePitch=new Tt({clickTolerance:r.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),I.addEventListener(u,"mousedown",this.mousedown),I.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(u,"touchmove",this.touchmove),I.addEventListener(u,"touchend",this.touchend),I.addEventListener(u,"touchcancel",this.reset)}down(r,u){this.mouseRotate.mousedown(r,u),this.mousePitch&&this.mousePitch.mousedown(r,u),I.disableDrag()}move(r,u){const d=this.map,g=this.mouseRotate.mousemoveWindow(r,u);if(g&&g.bearingDelta&&d.setBearing(d.getBearing()+g.bearingDelta),this.mousePitch){const _=this.mousePitch.mousemoveWindow(r,u);_&&_.pitchDelta&&d.setPitch(d.getPitch()+_.pitchDelta)}}off(){const r=this.element;I.removeEventListener(r,"mousedown",this.mousedown),I.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(r,"touchmove",this.touchmove),I.removeEventListener(r,"touchend",this.touchend),I.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup)}mousedown(r){this.down(l.extend({},r,{ctrlKey:!0,preventDefault:()=>r.preventDefault()}),I.mousePos(this.element,r)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)}mousemove(r){this.move(r,I.mousePos(this.element,r))}mouseup(r){this.mouseRotate.mouseupWindow(r),this.mousePitch&&this.mousePitch.mouseupWindow(r),this.offTemp()}touchstart(r){r.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,r.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>r.preventDefault()},this._startPos))}touchmove(r){r.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,r.targetTouches)[0],this.move({preventDefault:()=>r.preventDefault()},this._lastPos))}touchend(r){r.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function du(p,r,u){if(p=new l.LngLat(p.lng,p.lat),r){const d=new l.LngLat(p.lng-360,p.lat),g=new l.LngLat(p.lng+360,p.lat),_=u.locationPoint(p).distSqr(r);u.locationPoint(d).distSqr(r)<_?p=d:u.locationPoint(g).distSqr(r)<_&&(p=g)}for(;Math.abs(p.lng-u.center.lng)>180;){const d=u.locationPoint(p);if(d.x>=0&&d.y>=0&&d.x<=u.width&&d.y<=u.height)break;p.lng>u.center.lng?p.lng-=360:p.lng+=360}return p}const Kt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fn(p,r,u){const d=p.classList;for(const g in Kt)d.remove(`maplibregl-${u}-anchor-${g}`,`mapboxgl-${u}-anchor-${g}`);d.add(`maplibregl-${u}-anchor-${r}`,`mapboxgl-${u}-anchor-${r}`)}class ul extends l.Evented{constructor(r,u){if(super(),(r instanceof HTMLElement||u)&&(r=l.extend({element:r},u)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=l.pointGeometry.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div"),this._element.setAttribute("aria-label","Map marker");const d=I.createNS("http://www.w3.org/2000/svg","svg"),g=41,_=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${g}px`),d.setAttributeNS(null,"width",`${_}px`),d.setAttributeNS(null,"viewBox",`0 0 ${_} ${g}`);const C=I.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const z=I.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const O=I.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const W=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Je of W){const ze=I.createNS("http://www.w3.org/2000/svg","ellipse");ze.setAttributeNS(null,"opacity","0.04"),ze.setAttributeNS(null,"cx","10.5"),ze.setAttributeNS(null,"cy","5.80029008"),ze.setAttributeNS(null,"rx",Je.rx),ze.setAttributeNS(null,"ry",Je.ry),O.appendChild(ze)}const ee=I.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill",this._color);const le=I.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ee.appendChild(le);const he=I.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"fill","#000000");const ke=I.createNS("http://www.w3.org/2000/svg","path");ke.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),he.appendChild(ke);const Ae=I.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const Ie=I.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ge=I.createNS("http://www.w3.org/2000/svg","circle");Ge.setAttributeNS(null,"fill","#000000"),Ge.setAttributeNS(null,"opacity","0.25"),Ge.setAttributeNS(null,"cx","5.5"),Ge.setAttributeNS(null,"cy","5.5"),Ge.setAttributeNS(null,"r","5.4999962");const Xe=I.createNS("http://www.w3.org/2000/svg","circle");Xe.setAttributeNS(null,"fill","#FFFFFF"),Xe.setAttributeNS(null,"cx","5.5"),Xe.setAttributeNS(null,"cy","5.5"),Xe.setAttributeNS(null,"r","5.4999962"),Ie.appendChild(Ge),Ie.appendChild(Xe),z.appendChild(O),z.appendChild(ee),z.appendChild(he),z.appendChild(Ae),z.appendChild(Ie),d.appendChild(z),d.setAttributeNS(null,"height",g*this._scale+"px"),d.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(d),this._offset=l.pointGeometry.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),fn(this._element,this._anchor,"marker"),this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=l.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(r){const u=r.code,d=r.charCode||r.keyCode;u!=="Space"&&u!=="Enter"&&d!==32&&d!==13||this.togglePopup()}_onMapClick(r){const u=r.originalEvent.target,d=this._element;this._popup&&(u===d||d.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}_update(r){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=du(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),r&&r.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${Kt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const g=this._map.unproject(this._pos),_=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=g.distanceTo(this._lngLat)>20*_?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(r){return this._offset=l.pointGeometry.convert(r),this._update(),this}_onMove(r){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ih={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Na,ii=0,Ua=!1;const No={maxWidth:100,unit:"metric"};function Ed(p,r,u){const d=u&&u.maxWidth||100,g=p._container.clientHeight/2,_=p.unproject([0,g]),C=p.unproject([d,g]),z=_.distanceTo(C);if(u&&u.unit==="imperial"){const O=3.2808*z;O>5280?$a(r,d,O/5280,p._getUIString("ScaleControl.Miles")):$a(r,d,O,p._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?$a(r,d,z/1852,p._getUIString("ScaleControl.NauticalMiles")):z>=1e3?$a(r,d,z/1e3,p._getUIString("ScaleControl.Kilometers")):$a(r,d,z,p._getUIString("ScaleControl.Meters"))}function $a(p,r,u,d){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let z=_/C;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(O){const W=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*W)/W}(z),C*z}(u);p.style.width=r*(g/u)+"px",p.innerHTML=`${g}&nbsp;${d}`}const Cr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Fr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ph(p){if(p){if(typeof p=="number"){const r=Math.round(Math.sqrt(.5*Math.pow(p,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,p),"top-left":new l.pointGeometry(r,r),"top-right":new l.pointGeometry(-r,r),bottom:new l.pointGeometry(0,-p),"bottom-left":new l.pointGeometry(r,-r),"bottom-right":new l.pointGeometry(-r,-r),left:new l.pointGeometry(p,0),right:new l.pointGeometry(-p,0)}}if(p instanceof l.pointGeometry||Array.isArray(p)){const r=l.pointGeometry.convert(p);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:l.pointGeometry.convert(p.center||[0,0]),top:l.pointGeometry.convert(p.top||[0,0]),"top-left":l.pointGeometry.convert(p["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(p["top-right"]||[0,0]),bottom:l.pointGeometry.convert(p.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(p["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(p["bottom-right"]||[0,0]),left:l.pointGeometry.convert(p.left||[0,0]),right:l.pointGeometry.convert(p.right||[0,0])}}return Ph(new l.pointGeometry(0,0))}const _s={supported:w,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends hr{constructor(p){var r;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(p=l.extend({},bd,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new La(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),{bearingSnap:p.bearingSnap}),this._interactive=p.interactive,this._cooperativeGestures=p.cooperativeGestures,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._renderTaskQueue=new xd,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},wd,p.locale),this._clickTolerance=p.clickTolerance,this._pixelRatio=(r=p.pixelRatio)!==null&&r!==void 0?r:devicePixelRatio,this._requestManager=new j(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new _d(this,p),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=p.hash&&new su(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,l.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new fu({customAttribution:p.customAttribution})),p.maplibreLogo&&this.addControl(new ic,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new l.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new l.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new l.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(p,r){if(r===void 0&&(r=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=p.onAdd(this);this._controls.push(p);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(p);return r>-1&&this._controls.splice(r,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}calculateCameraOptionsFromTo(p,r,u,d){return d==null&&this.style.terrain&&(d=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(p,r,u,d)}resize(p){const r=this._containerDimensions(),u=r[0],d=r[1];this._resizeCanvas(u,d,this.getPixelRatio()),this.transform.resize(u,d),this.painter.resize(u,d,this.getPixelRatio());const g=!this._moving;return g&&(this.stop(),this.fire(new l.Event("movestart",p)).fire(new l.Event("move",p))),this.fire(new l.Event("resize",p)),g&&this.fire(new l.Event("moveend",p)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(p){const[r,u]=this._containerDimensions();this._pixelRatio=p,this._resizeCanvas(r,u,p),this.painter.resize(r,u,p)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(p){return this.transform.setMaxBounds(l.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p&&this.setZoom(p),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p&&this.setZoom(p),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p&&this.setPitch(p),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p&&this.setPitch(p),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}project(p){return this.transform.locationPoint(l.LngLat.convert(p),this.style&&this.style.terrain)}unproject(p){return this.transform.pointLocation(l.pointGeometry.convert(p),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(p,r,u){if(p==="mouseenter"||p==="mouseover"){let d=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];C.length?d||(d=!0,u.call(this,new ui(p,this,_.originalEvent,{features:C}))):d=!1},mouseout:()=>{d=!1}}}}if(p==="mouseleave"||p==="mouseout"){let d=!1;return{layer:r,listener:u,delegates:{mousemove:C=>{(this.getLayer(r)?this.queryRenderedFeatures(C.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,u.call(this,new ui(p,this,C.originalEvent)))},mouseout:C=>{d&&(d=!1,u.call(this,new ui(p,this,C.originalEvent)))}}}}{const d=g=>{const _=this.getLayer(r)?this.queryRenderedFeatures(g.point,{layers:[r]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:r,listener:u,delegates:{[p]:d}}}}on(p,r,u){if(u===void 0)return super.on(p,r);const d=this._createDelegatedListener(p,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(d);for(const g in d.delegates)this.on(g,d.delegates[g]);return this}once(p,r,u){if(u===void 0)return super.once(p,r);const d=this._createDelegatedListener(p,r,u);for(const g in d.delegates)this.once(g,d.delegates[g]);return this}off(p,r,u){return u===void 0?super.off(p,r):(this._delegatedListeners&&this._delegatedListeners[p]&&(d=>{const g=this._delegatedListeners[p];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===r&&C.listener===u){for(const z in C.delegates)this.off(z,C.delegates[z]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(p,r){if(!this.style)return[];let u;if(r!==void 0||p===void 0||p instanceof l.pointGeometry||Array.isArray(p)||(r=p,p=void 0),r=r||{},(p=p||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof p[0]=="number")u=[l.pointGeometry.convert(p)];else{const d=l.pointGeometry.convert(p[0]),g=l.pointGeometry.convert(p[1]);u=[d,new l.pointGeometry(g.x,d.y),g,new l.pointGeometry(d.x,g.y),d]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(p,r){return this.style.querySourceFeatures(p,r)}setStyle(p,r){return(r=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&p?(this._diffStyle(p,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(p,r))}setTransformRequest(p){return this._requestManager.setTransformRequest(p),this}_getUIString(p){const r=this._locale[p];if(r==null)throw new Error(`Missing UI string '${p}'`);return r}_updateStyle(p,r){return this.style&&(this.style.setEventedParent(null),this.style._remove()),p?(this.style=new lr(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new lr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,r){if(typeof p=="string"){const u=this._requestManager.transformRequest(p,l.ResourceType.Style);l.getJSON(u,(d,g)=>{d?this.fire(new l.ErrorEvent(d)):g&&this._updateDiff(g,r)})}else typeof p=="object"&&this._updateDiff(p,r)}_updateDiff(p,r){try{this.style.setState(p)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(p,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(p,r){return this._lazyInitEmptyStyle(),this.style.addSource(p,r),this._update(!0)}isSourceLoaded(p){const r=this.style&&this.style.sourceCaches[p];if(r!==void 0)return r.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${p}'`)))}setTerrain(p){return this.style.setTerrain(p),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const p=this.style&&this.style.sourceCaches;for(const r in p){const u=p[r]._tiles;for(const d in u){const g=u[d];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(p,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(p,r,u)}removeSource(p){return this.style.removeSource(p),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,r,{pixelRatio:u=1,sdf:d=!1,stretchX:g,stretchY:_,content:C}={}){if(this._lazyInitEmptyStyle(),r instanceof HTMLImageElement||l.isImageBitmap(r)){const{width:z,height:O,data:W}=l.exported.getImageData(r);this.style.addImage(p,{data:new l.RGBAImage({width:z,height:O},W),pixelRatio:u,stretchX:g,stretchY:_,content:C,sdf:d,version:0})}else{if(r.width===void 0||r.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:O,data:W}=r,ee=r;this.style.addImage(p,{data:new l.RGBAImage({width:z,height:O},new Uint8Array(W)),pixelRatio:u,stretchX:g,stretchY:_,content:C,sdf:d,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,p)}}}updateImage(p,r){const u=this.style.getImage(p);if(!u)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||l.isImageBitmap(r)?l.exported.getImageData(r):r,{width:g,height:_,data:C}=d;if(g===void 0||_===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(r instanceof HTMLImageElement||l.isImageBitmap(r));u.data.replace(C,z),this.style.updateImage(p,u)}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,r){l.getImage(this._requestManager.transformRequest(p,l.ResourceType.Image),r)}listImages(){return this.style.listImages()}addLayer(p,r){return this._lazyInitEmptyStyle(),this.style.addLayer(p,r),this._update(!0)}moveLayer(p,r){return this.style.moveLayer(p,r),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,r,u){return this.style.setLayerZoomRange(p,r,u),this._update(!0)}setFilter(p,r,u={}){return this.style.setFilter(p,r,u),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,r,u,d={}){return this.style.setPaintProperty(p,r,u,d),this._update(!0)}getPaintProperty(p,r){return this.style.getPaintProperty(p,r)}setLayoutProperty(p,r,u,d={}){return this.style.setLayoutProperty(p,r,u,d),this._update(!0)}getLayoutProperty(p,r){return this.style.getLayoutProperty(p,r)}setLight(p,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(p,r){return this.style.setFeatureState(p,r),this._update()}removeFeatureState(p,r){return this.style.removeFeatureState(p,r),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let p=0,r=0;return this._container&&(p=this._container.clientWidth||400,r=this._container.clientHeight||300),[p,r]}_setupContainer(){const p=this._container;p.classList.add("maplibregl-map","mapboxgl-map");const r=this._canvasContainer=I.create("div","maplibregl-canvas-container mapboxgl-canvas-container",p);this._interactive&&r.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas mapboxgl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const d=this._controlContainer=I.create("div","maplibregl-control-container mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{g[_]=I.create("div",`maplibregl-ctrl-${_} mapboxgl-ctrl-${_}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const p=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=I.create("div","maplibregl-cooperative-gesture-screen",p);let r="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",r="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",d=>{d.key===r&&(this._metaPress=!0)}),document.addEventListener("keyup",d=>{d.key===r&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",d=>{this._onCooperativeGesture(d,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(p,r,u){this._canvas.width=u*p,this._canvas.height=u*r,this._canvas.style.width=`${p}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const p=l.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);r?(this.painter=new jo(r,this.transform),l.exported$1.testSupport(r)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(p,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_render(p){let r,u=0;const d=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(r=d.createQueryEXT(),d.beginQueryEXT(d.TIME_ELAPSED_EXT,r),u=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._removed)return;let g=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const C=this.transform.zoom,z=l.exported.now();this.style.zoomHistory.update(C,z);const O=new l.EvaluationParameters(C,{now:z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),W=O.crossFadingFactor();W===1&&W===this._crossFadingFactor||(g=!0,this._crossFadingFactor=W),this.style.update(O)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||g)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const C=l.exported.now()-u;d.endQueryEXT(d.TIME_ELAPSED_EXT,r),setTimeout(()=>{const z=d.getQueryObjectEXT(r,d.QUERY_RESULT_EXT)/1e6;d.deleteQueryEXT(r),this.fire(new l.Event("gpu-timing-frame",{cpuTime:C,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const C=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(C);this.fire(new l.Event("gpu-timing-layer",{layerTimes:z}))},50)}const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const r of this._controls)r.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._cooperativeGestures&&I.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(p=>{l.PerformanceUtils.frame(p),this._frame=null,this._render(p)}))}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,r){l.setCacheLimits(p,r)}get version(){return"2.4.0"}},NavigationControl:class{constructor(p){this.options=l.extend({},Cg,p),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map.getZoom(),r=p===this._map.getMaxZoom(),u=p===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const p=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=p}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(p,r){const u=I.create("button",p,this._container);return u.type="button",u.addEventListener("click",r),u}_setButtonTitle(p,r){const u=this._map._getUIString(`NavigationControl.${r}`);p.title=u,p.setAttribute("aria-label",u)}},GeolocateControl:class extends l.Evented{constructor(p){super(),this.options=l.extend({},Ih,p),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(p){var r;return this._map=p,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,Na!==void 0?r(Na):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Na=u.state!=="denied",r(Na)}):(Na=!!window.navigator.geolocation,r(Na)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ii=0,Ua=!1}_isOutOfMapMaxBounds(p){const r=this._map.getMaxBounds(),u=p.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",p)),this._finish()}}_updateCamera(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude),u=p.coords.accuracy,d=this._map.getBearing(),g=l.extend({bearing:d},this.options.fitBoundsOptions);this._map.fitBounds(r.toBounds(u),g,{geolocateSource:!0})}_updateMarker(p){if(p){const r=new l.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map._container.clientHeight/2,r=this._map.unproject([0,p]),u=this._map.unproject([1,p]),d=r.distanceTo(u),g=Math.ceil(2*this._accuracy/d);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&Ua)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{const r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ul(this._dotElement),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ul({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ii--,Ua=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ii++,ii>1?(p={maximumAge:6e5,timeout:0},Ua=!0):(p=this.options.positionOptions,Ua=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,p)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:fu,LogoControl:ic,ScaleControl:class{constructor(p){this.options=l.extend({},No,p),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ed(this._map,this._container,this.options)}onAdd(p){return this._map=p,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(p){this.options.unit=p,Ed(this._map,this._container,this.options)}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.title=p}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(p){this.options=p,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(p){return this._map=p,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(p){super(),this.options=l.extend(Object.create(Cr),p),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){return this._lngLat=l.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const r=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=p;d=u.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(p),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(p){this._container&&this._container.classList.add(p)}removeClassName(p){this._container&&this._container.classList.remove(p)}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){if(this._container)return this._container.classList.toggle(p)}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(p){this._update(p.point)}_onMouseMove(p){this._update(p.point)}_onDrag(p){this._update(p.point)}_update(p){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=I.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(_=>this._container.classList.add(_)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=du(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!p))return;const r=this._pos=this._trackPointer&&p?p:this._map.project(this._lngLat);let u=this.options.anchor;const d=Ph(this.options.offset);if(!u){const _=this._container.offsetWidth,C=this._container.offsetHeight;let z;z=r.y+d.bottom.y<C?["top"]:r.y>this._map.transform.height-C?["bottom"]:[],r.x<_/2?z.push("left"):r.x>this._map.transform.width-_/2&&z.push("right"),u=z.length===0?"bottom":z.join("-")}const g=r.add(d[u]).round();I.setTransform(this._container,`${Kt[u]} translate(${g.x}px,${g.y}px)`),fn(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(Fr);p&&p.focus()}_onClose(){this.remove()}},Marker:ul,Style:lr,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:we,GeoJSONSource:ne,ImageSource:ce,RasterDEMTileSource:re,RasterTileSource:be,VectorTileSource:_e,VideoSource:xe,prewarm:function(){Pn().acquire(bt)},clearPrewarmedResources:function(){const p=dn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(bt),dn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Nt.workerCount},set workerCount(p){Nt.workerCount=p},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){l.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){l.clearTileCache(p)},workerUrl:"",addProtocol(p,r){l.config.REGISTERED_PROTOCOLS[p]=r},removeProtocol(p){delete l.config.REGISTERED_PROTOCOLS[p]}};return oo.extend(_s,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),_s});var y=c;return y})})(DM);const mT=pm,BM=uP({__proto__:null,default:mT},[pm]);const NM="modulepreload",UM=function(e){return"/osm-address-editor-vite/"+e},gb={},$M=function(t,i,s){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(f=>{if(f=UM(f),f in gb)return;gb[f]=!0;const y=f.endsWith(".css"),l=y?'[rel="stylesheet"]':"";if(!!s)for(let T=c.length-1;T>=0;T--){const S=c[T];if(S.href===f&&(!y||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${l}`))return;const E=document.createElement("link");if(E.rel=y?"stylesheet":NM,y||(E.as="script",E.crossOrigin=""),E.href=f,document.head.appendChild(E),y)return new Promise((T,S)=>{E.addEventListener("load",T),E.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})})).then(()=>t())},VM=vt.createContext(null);function GM(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function yb(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function vb(e,t){const i=t.viewState||t;let s=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),s=s||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,s=s||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,s=s||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,s=s||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(s=!0,e.padding=i.padding),s}const ZM=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _b(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const s of e.layers)t[s.id]=s;const i=e.layers.map(s=>{const c=t[s.ref];let f=null;if("interactive"in s&&(f={...s},delete f.interactive),c){f=f||{...s},delete f.ref;for(const y of ZM)y in c&&(f[y]=c[y])}return f||s});return{...e,layers:i}}function WM(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,f=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&s===f}function Xo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Xo(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Xo(e[c],t[c]))return!1;return!0}return!1}const xb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},jy={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},wb={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},HM=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],XM=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class rh{constructor(t,i,s){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const f=this.props[wb[c.type]];f&&f(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const f=this.props[xb[c.type]];f&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),f(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const f=this.props[jy[c.type]];f&&f(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(s)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const s=this._updateSettings(t,i);s&&this._createShadowTransform(this._map);const c=this._updateSize(t),f=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(s||c||f&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const s=rh.savedMaps.pop();if(!s)return null;const c=s.map,f=c.getContainer();for(i.className=f.className;f.childNodes.length>0;)i.appendChild(f.childNodes[0]);c._container=i,s.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:y}=t;return y&&(y.bounds?c.fitBounds(y.bounds,{...y.fitBoundsOptions,duration:0}):s._updateViewState(y,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c.triggerRepaint(),s}_initialize(t){const{props:i}=this,s={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||qM()||null,container:t,style:_b(i.mapStyle)},c=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),i.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,i.gl)}const f=new this._MapClass(s);c.padding&&f.setPadding(c.padding),i.cursor&&(f.getCanvas().style.cursor=i.cursor),this._createShadowTransform(f);const y=f._render;f._render=E=>{this._inRender=!0,y.call(f,E),this._inRender=!1};const l=f._renderTaskQueue.run;f._renderTaskQueue.run=E=>{l.call(f._renderTaskQueue,E),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const w=f.fire;f.fire=this._fireEvent.bind(this,w),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>this._updateStyleComponents(this.props,{})),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in xb)f.on(E,this._onPointerEvent);for(const E in jy)f.on(E,this._onCameraEvent);for(const E in wb)f.on(E,this._onEvent);this._map=f}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),rh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=GM(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const s=this._map;if(i.width!==s.transform.width||i.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const s=this._map,c=this._renderTransform,{zoom:f,pitch:y,bearing:l}=c,w=s.isMoving();w&&(c.cameraElevationReference="sea");const E=vb(c,{...yb(s.transform),...t});if(w&&(c.cameraElevationReference="ground"),E&&i){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=f!==c.zoom),T.rotate||(T.rotate=l!==c.bearing),T.pitch||(T.pitch=y!==c.pitch)}return w||vb(s.transform,t),E}_updateSettings(t,i){const s=this._map;let c=!1;for(const f of HM)f in t&&!Xo(t[f],i[f])&&(c=!0,s[`set${f[0].toUpperCase()}${f.slice(1)}`](t[f]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==i.mapStyle){const s={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(s.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(_b(t.mapStyle),s),!0}return!1}_updateStyleComponents(t,i){const s=this._map;let c=!1;return s.style.loaded()&&("light"in t&&!Xo(t.light,i.light)&&(c=!0,s.setLight(t.light)),"fog"in t&&!Xo(t.fog,i.fog)&&(c=!0,s.setFog(t.fog)),"terrain"in t&&!Xo(t.terrain,i.terrain)&&(!t.terrain||s.getSource(t.terrain.source))&&(c=!0,s.setTerrain(t.terrain))),c}_updateHandlers(t,i){const s=this._map;let c=!1;for(const f of XM){const y=t[f];Xo(y,i[f])||(c=!0,y?s[f].enable(y):s[f].disable())}return c}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:s=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:s.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var i;const{props:s}=this;if(s.interactiveLayerIds&&(s.onMouseMove||s.onMouseEnter||s.onMouseLeave)){const f=t.type,y=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,l=this._queryRenderedFeatures(t.point),w=l.length>0;!w&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,w&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=f}else this._hoveredFeatures=null}_fireEvent(t,i,s){const c=this._map,f=c.transform,y=typeof i=="string"?i:i.type;return y==="move"&&this._updateViewState(this.props,!1),y in jy&&(typeof i=="object"&&(i.viewState=yb(f)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,s),c.transform=f,c):(t.call(c,i,s),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const s in this._deferredEvents)this._deferredEvents[s]&&t.fire(s);this._internalUpdate=!1;const i=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=i}}}rh.savedMaps=[];function qM(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const KM=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function YM(e,t){if(!e)return null;const i=e.map,s={getMap:()=>i,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,f)=>{const y=i.transform;i.transform=e.transform;const l=i.queryTerrainElevation(c,f);return i.transform=y,l}};for(const c of JM(i))!(c in s)&&!KM.includes(c)&&(s[c]=i[c].bind(i));return s}function JM(e){const t=new Set;let i=e;for(;i;){for(const s of Object.getOwnPropertyNames(i))s[0]!=="_"&&typeof e[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&t.add(s);i=Object.getPrototypeOf(i)}return Array.from(t)}const QM=typeof document<"u"?vt.useLayoutEffect:vt.useEffect,e3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function t3(e,t){for(const i of e3)i in t&&(e[i]=t[i]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,i=>{i&&console.error(i)},!1)}const hh=vt.createContext(null),n3={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},Y_=vt.forwardRef((e,t)=>{const i=vt.useContext(VM),[s,c]=vt.useState(null),f=vt.useRef(),{current:y}=vt.useRef({mapLib:null,map:null});vt.useEffect(()=>{const E=e.mapLib;let T=!0,S;return Promise.resolve(E||$M(()=>Promise.resolve().then(()=>BM),void 0)).then(I=>{if(T){if(I.Map||(I=I.default),!I||!I.Map)throw new Error("Invalid mapLib");if(t3(I,e),I.supported(e))e.reuseMaps&&(S=rh.reuse(e,f.current)),S||(S=new rh(I.Map,e,f.current)),y.map=YM(S,I),y.mapLib=I,c(S),i==null||i.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(I=>{e.onError({type:"error",target:null,originalEvent:null,error:I})}),()=>{T=!1,S&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?S.recycle():S.destroy())}},[]),QM(()=>{s&&s.setProps(e)}),vt.useImperativeHandle(t,()=>y.map,[s]);const l=vt.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return vt.createElement("div",{id:e.id,ref:f,style:l},s&&vt.createElement(hh.Provider,{value:y},vt.createElement("div",{"mapboxgl-children":"",style:w},e.children)))});Y_.displayName="Map";Y_.defaultProps=n3;const r3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Nu(e,t){if(!e||!t)return;const i=e.style;for(const s in t){const c=t[s];Number.isFinite(c)&&!r3.test(s)?i[s]=`${c}px`:i[s]=c}}const i3={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function gT(e){const{map:t,mapLib:i}=vt.useContext(hh),s=vt.useRef({props:e});s.current.props=e;const c=vt.useMemo(()=>{let f=!1;vt.Children.forEach(e.children,w=>{w&&(f=!0)});const y={...e,element:f?document.createElement("div"):null},l=new i.Marker(y).setLngLat([e.longitude,e.latitude]);return l.getElement().addEventListener("click",w=>{var E,T;(T=(E=s.current.props).onClick)===null||T===void 0||T.call(E,{type:"click",target:l,originalEvent:w})}),l.on("dragstart",w=>{var E,T;const S=w;S.lngLat=c.getLngLat(),(T=(E=s.current.props).onDragStart)===null||T===void 0||T.call(E,S)}),l.on("drag",w=>{var E,T;const S=w;S.lngLat=c.getLngLat(),(T=(E=s.current.props).onDrag)===null||T===void 0||T.call(E,S)}),l.on("dragend",w=>{var E,T;const S=w;S.lngLat=c.getLngLat(),(T=(E=s.current.props).onDragEnd)===null||T===void 0||T.call(E,S)}),l},[]);return vt.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),vt.useEffect(()=>{Nu(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!WM(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),Lf.createPortal(e.children,c.getElement())}gT.defaultProps=i3;const o3=vt.memo(gT);function bb(e){return new Set(e?e.trim().split(/\s+/):[])}function a3(e){const{map:t,mapLib:i}=vt.useContext(hh),s=vt.useMemo(()=>document.createElement("div"),[]),c=vt.useRef({props:e});c.current.props=e;const f=vt.useMemo(()=>{const y={...e},l=new i.Popup(y).setLngLat([e.longitude,e.latitude]);return l.once("open",w=>{var E,T;(T=(E=c.current.props).onOpen)===null||T===void 0||T.call(E,w)}),l},[]);if(vt.useEffect(()=>{const y=l=>{var w,E;(E=(w=c.current.props).onClose)===null||E===void 0||E.call(w,l)};return f.on("close",y),f.setDOMContent(s).addTo(t.getMap()),()=>{f.off("close",y),f.isOpen()&&f.remove()}},[]),vt.useEffect(()=>{Nu(f.getElement(),e.style)},[e.style]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Xo(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const y=bb(f.options.className),l=bb(e.className);for(const w of y)l.has(w)||f.removeClassName(w);for(const w of l)y.has(w)||f.addClassName(w);f.options.className=e.className}return Lf.createPortal(e.children,s)}vt.memo(a3);function sd(e,t,i,s){const c=vt.useContext(hh),f=vt.useMemo(()=>e(c),[]);return vt.useEffect(()=>{const y=s||i||t,l=typeof t=="function"&&typeof i=="function"?t:null,w=typeof i=="function"?i:typeof t=="function"?t:null,{map:E}=c;return E.hasControl(f)||(E.addControl(f,y==null?void 0:y.position),l&&l(c)),()=>{w&&w(c),E.hasControl(f)&&E.removeControl(f)}},[]),f}function s3(e){const t=sd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return vt.useEffect(()=>{Nu(t._container,e.style)},[e.style]),null}vt.memo(s3);function l3(e){const t=sd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return vt.useEffect(()=>{Nu(t._controlContainer,e.style)},[e.style]),null}vt.memo(l3);const yT=vt.forwardRef((e,t)=>{const i=vt.useRef({props:e}),s=sd(({mapLib:c})=>{const f=new c.GeolocateControl(e),y=f._setupUI;return f._setupUI=l=>{f._container.hasChildNodes()||y(l)},f.on("geolocate",l=>{var w,E;(E=(w=i.current.props).onGeolocate)===null||E===void 0||E.call(w,l)}),f.on("error",l=>{var w,E;(E=(w=i.current.props).onError)===null||E===void 0||E.call(w,l)}),f.on("outofmaxbounds",l=>{var w,E;(E=(w=i.current.props).onOutOfMaxBounds)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationstart",l=>{var w,E;(E=(w=i.current.props).onTrackUserLocationStart)===null||E===void 0||E.call(w,l)}),f.on("trackuserlocationend",l=>{var w,E;(E=(w=i.current.props).onTrackUserLocationEnd)===null||E===void 0||E.call(w,l)}),f},{position:e.position});return i.current.props=e,vt.useImperativeHandle(t,()=>({trigger:()=>s.trigger()}),[]),vt.useEffect(()=>{Nu(s._container,e.style)},[e.style]),null});yT.displayName="GeolocateControl";const u3=vt.memo(yT);function c3(e){const t=sd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return vt.useEffect(()=>{Nu(t._container,e.style)},[e.style]),null}const h3=vt.memo(c3),f3={unit:"metric",maxWidth:100};function vT(e){const t=sd(({mapLib:i})=>new i.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),vt.useEffect(()=>{Nu(t._container,e.style)},[e.style]),null}vT.defaultProps=f3;vt.memo(vT);function mm(e,t){if(!e)throw new Error(t)}let d3=0;function p3(e,t,i){if(e.style&&e.style._loaded){const s={...i};return delete s.id,delete s.children,e.addSource(t,s),e.getSource(t)}return null}function m3(e,t,i){mm(t.id===i.id,"source id changed"),mm(t.type===i.type,"source type changed");let s="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!Xo(i[y],t[y])&&(s=y,c++);if(!c)return;const f=t.type;if(f==="geojson")e.setData(t.data);else if(f==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((f==="canvas"||f==="video")&&c===1&&s==="coordinates")e.setCoordinates(t.coordinates);else if(f==="vector"&&"setUrl"in e)switch(s){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${s}`)}function g3(e){const t=vt.useContext(hh).map.getMap(),i=vt.useRef(e),[,s]=vt.useState(0),c=vt.useMemo(()=>e.id||`jsx-source-${d3++}`,[]);vt.useEffect(()=>{if(t){const y=()=>setTimeout(()=>s(l=>l+1),0);return t.on("styledata",y),y(),()=>{var l;if(t.off("styledata",y),t.style&&t.style._loaded&&t.getSource(c)){const w=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(w)for(const E of w)E.source===c&&t.removeLayer(E.id);t.removeSource(c)}}}},[t]);let f=t&&t.style&&t.getSource(c);return f?m3(f,e,i.current):f=p3(t,c,e),i.current=e,f&&vt.Children.map(e.children,y=>y&&vt.cloneElement(y,{source:c}))||null}function y3(e,t,i,s){if(mm(i.id===s.id,"layer id changed"),mm(i.type===s.type,"layer type changed"),i.type==="custom"||s.type==="custom")return;const{layout:c={},paint:f={},filter:y,minzoom:l,maxzoom:w,beforeId:E}=i;if(E!==s.beforeId&&e.moveLayer(t,E),c!==s.layout){const T=s.layout||{};for(const S in c)Xo(c[S],T[S])||e.setLayoutProperty(t,S,c[S]);for(const S in T)c.hasOwnProperty(S)||e.setLayoutProperty(t,S,void 0)}if(f!==s.paint){const T=s.paint||{};for(const S in f)Xo(f[S],T[S])||e.setPaintProperty(t,S,f[S]);for(const S in T)f.hasOwnProperty(S)||e.setPaintProperty(t,S,void 0)}Xo(y,s.filter)||e.setFilter(t,y),(l!==s.minzoom||w!==s.maxzoom)&&e.setLayerZoomRange(t,l,w)}function v3(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const s={...i,id:t};delete s.beforeId,e.addLayer(s,i.beforeId)}}let _3=0;function x3(e){const t=vt.useContext(hh).map.getMap(),i=vt.useRef(e),[,s]=vt.useState(0),c=vt.useMemo(()=>e.id||`jsx-layer-${_3++}`,[]);if(vt.useEffect(()=>{if(t){const y=()=>s(l=>l+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{y3(t,c,e,i.current)}catch(y){console.warn(y)}else v3(t,c,e);return i.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function Eb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,s)}return i}function Qt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Eb(Object(i),!0).forEach(function(s){E3(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Eb(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function gm(e){return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function w3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sb(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function b3(e,t,i){return t&&Sb(e.prototype,t),i&&Sb(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function E3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function J_(e,t){return T3(e)||A3(e,t)||_T(e,t)||P3()}function hg(e){return S3(e)||C3(e)||_T(e)||I3()}function S3(e){if(Array.isArray(e))return uv(e)}function T3(e){if(Array.isArray(e))return e}function C3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A3(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s=[],c=!0,f=!1,y,l;try{for(i=i.call(e);!(c=(y=i.next()).done)&&(s.push(y.value),!(t&&s.length===t));c=!0);}catch(w){f=!0,l=w}finally{try{!c&&i.return!=null&&i.return()}finally{if(f)throw l}}return s}}function _T(e,t){if(e){if(typeof e=="string")return uv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uv(e,t)}}function uv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function I3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Tb=function(){},Q_={},xT={},wT=null,bT={mark:Tb,measure:Tb};try{typeof window<"u"&&(Q_=window),typeof document<"u"&&(xT=document),typeof MutationObserver<"u"&&(wT=MutationObserver),typeof performance<"u"&&(bT=performance)}catch{}var k3=Q_.navigator||{},Cb=k3.userAgent,Ab=Cb===void 0?"":Cb,Dl=Q_,Tr=xT,Ib=wT,cp=bT;Dl.document;var Zs=!!Tr.documentElement&&!!Tr.head&&typeof Tr.addEventListener=="function"&&typeof Tr.createElement=="function",ET=~Ab.indexOf("MSIE")||~Ab.indexOf("Trident/"),Ns="___FONT_AWESOME___",cv=16,ST="fa",TT="svg-inline--fa",Ru="data-fa-i2svg",hv="data-fa-pseudo-element",M3="data-fa-pseudo-element-pending",e1="data-prefix",t1="data-icon",Pb="fontawesome-i2svg",z3="async",L3=["HTML","HEAD","STYLE","SCRIPT"],CT=function(){try{return!0}catch{return!1}}(),n1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},ym={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},AT={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},R3={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},O3=/fa[srltdbk\-\ ]/,IT="fa-layers-text",F3=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,j3={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},PT=[1,2,3,4,5,6,7,8,9,10],D3=PT.concat([11,12,13,14,15,16,17,18,19,20]),B3=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Cu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},N3=[].concat(hg(Object.keys(ym)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Cu.GROUP,Cu.SWAP_OPACITY,Cu.PRIMARY,Cu.SECONDARY]).concat(PT.map(function(e){return"".concat(e,"x")})).concat(D3.map(function(e){return"w-".concat(e)})),kT=Dl.FontAwesomeConfig||{};function U3(e){var t=Tr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function $3(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(Tr&&typeof Tr.querySelector=="function"){var V3=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];V3.forEach(function(e){var t=J_(e,2),i=t[0],s=t[1],c=$3(U3(i));c!=null&&(kT[s]=c)})}var G3={familyPrefix:ST,styleDefault:"solid",replacementClass:TT,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Cf=Qt(Qt({},G3),kT);Cf.autoReplaceSvg||(Cf.observeMutations=!1);var _n={};Object.keys(Cf).forEach(function(e){Object.defineProperty(_n,e,{enumerable:!0,set:function(i){Cf[e]=i,Rp.forEach(function(s){return s(_n)})},get:function(){return Cf[e]}})});Dl.FontAwesomeConfig=_n;var Rp=[];function Z3(e){return Rp.push(e),function(){Rp.splice(Rp.indexOf(e),1)}}var yl=cv,Ja={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function W3(e){if(!(!e||!Zs)){var t=Tr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=Tr.head.childNodes,s=null,c=i.length-1;c>-1;c--){var f=i[c],y=(f.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(s=f)}return Tr.head.insertBefore(t,s),e}}var H3="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Yf(){for(var e=12,t="";e-- >0;)t+=H3[Math.random()*62|0];return t}function fh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function r1(e){return e.classList?fh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function MT(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function X3(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(MT(e[i]),'" ')},"").trim()}function fg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function i1(e){return e.size!==Ja.size||e.x!==Ja.x||e.y!==Ja.y||e.rotate!==Ja.rotate||e.flipX||e.flipY}function q3(e){var t=e.transform,i=e.containerWidth,s=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},f="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),l="rotate(".concat(t.rotate," 0 0)"),w={transform:"".concat(f," ").concat(y," ").concat(l)},E={transform:"translate(".concat(s/2*-1," -256)")};return{outer:c,inner:w,path:E}}function K3(e){var t=e.transform,i=e.width,s=i===void 0?cv:i,c=e.height,f=c===void 0?cv:c,y=e.startCentered,l=y===void 0?!1:y,w="";return l&&ET?w+="translate(".concat(t.x/yl-s/2,"em, ").concat(t.y/yl-f/2,"em) "):l?w+="translate(calc(-50% + ".concat(t.x/yl,"em), calc(-50% + ").concat(t.y/yl,"em)) "):w+="translate(".concat(t.x/yl,"em, ").concat(t.y/yl,"em) "),w+="scale(".concat(t.size/yl*(t.flipX?-1:1),", ").concat(t.size/yl*(t.flipY?-1:1),") "),w+="rotate(".concat(t.rotate,"deg) "),w}var Y3=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function zT(){var e=ST,t=TT,i=_n.familyPrefix,s=_n.replacementClass,c=Y3;if(i!==e||s!==t){var f=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),l=new RegExp("\\.".concat(t),"g");c=c.replace(f,".".concat(i,"-")).replace(y,"--".concat(i,"-")).replace(l,".".concat(s))}return c}var kb=!1;function Dy(){_n.autoAddCss&&!kb&&(W3(zT()),kb=!0)}var J3={mixout:function(){return{dom:{css:zT,insertCss:Dy}}},hooks:function(){return{beforeDOMElementCreation:function(){Dy()},beforeI2svg:function(){Dy()}}}},Us=Dl||{};Us[Ns]||(Us[Ns]={});Us[Ns].styles||(Us[Ns].styles={});Us[Ns].hooks||(Us[Ns].hooks={});Us[Ns].shims||(Us[Ns].shims=[]);var ma=Us[Ns],LT=[],Q3=function e(){Tr.removeEventListener("DOMContentLoaded",e),vm=1,LT.map(function(t){return t()})},vm=!1;Zs&&(vm=(Tr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Tr.readyState),vm||Tr.addEventListener("DOMContentLoaded",Q3));function e4(e){Zs&&(vm?setTimeout(e,0):LT.push(e))}function ld(e){var t=e.tag,i=e.attributes,s=i===void 0?{}:i,c=e.children,f=c===void 0?[]:c;return typeof e=="string"?MT(e):"<".concat(t," ").concat(X3(s),">").concat(f.map(ld).join(""),"</").concat(t,">")}function Mb(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var t4=function(t,i){return function(s,c,f,y){return t.call(i,s,c,f,y)}},By=function(t,i,s,c){var f=Object.keys(t),y=f.length,l=c!==void 0?t4(i,c):i,w,E,T;for(s===void 0?(w=1,T=t[f[0]]):(w=0,T=s);w<y;w++)E=f[w],T=l(T,t[E],E,t);return T};function n4(e){for(var t=[],i=0,s=e.length;i<s;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<s){var f=e.charCodeAt(i++);(f&64512)==56320?t.push(((c&1023)<<10)+(f&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function fv(e){var t=n4(e);return t.length===1?t[0].toString(16):null}function r4(e,t){var i=e.length,s=e.charCodeAt(t),c;return s>=55296&&s<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(s-55296)*1024+c-56320+65536:s}function zb(e){return Object.keys(e).reduce(function(t,i){var s=e[i],c=!!s.icon;return c?t[s.iconName]=s.icon:t[i]=s,t},{})}function dv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.skipHooks,c=s===void 0?!1:s,f=zb(t);typeof ma.hooks.addPack=="function"&&!c?ma.hooks.addPack(e,zb(t)):ma.styles[e]=Qt(Qt({},ma.styles[e]||{}),f),e==="fas"&&dv("fa",t)}var Af=ma.styles,i4=ma.shims,o4=Object.values(AT),o1=null,RT={},OT={},FT={},jT={},DT={},a4=Object.keys(n1);function s4(e){return~N3.indexOf(e)}function l4(e,t){var i=t.split("-"),s=i[0],c=i.slice(1).join("-");return s===e&&c!==""&&!s4(c)?c:null}var BT=function(){var t=function(f){return By(Af,function(y,l,w){return y[w]=By(l,f,{}),y},{})};RT=t(function(c,f,y){if(f[3]&&(c[f[3]]=y),f[2]){var l=f[2].filter(function(w){return typeof w=="number"});l.forEach(function(w){c[w.toString(16)]=y})}return c}),OT=t(function(c,f,y){if(c[y]=y,f[2]){var l=f[2].filter(function(w){return typeof w=="string"});l.forEach(function(w){c[w]=y})}return c}),DT=t(function(c,f,y){var l=f[2];return c[y]=y,l.forEach(function(w){c[w]=y}),c});var i="far"in Af||_n.autoFetchSvg,s=By(i4,function(c,f){var y=f[0],l=f[1],w=f[2];return l==="far"&&!i&&(l="fas"),typeof y=="string"&&(c.names[y]={prefix:l,iconName:w}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:l,iconName:w}),c},{names:{},unicodes:{}});FT=s.names,jT=s.unicodes,o1=dg(_n.styleDefault)};Z3(function(e){o1=dg(e.styleDefault)});BT();function a1(e,t){return(RT[e]||{})[t]}function u4(e,t){return(OT[e]||{})[t]}function Fc(e,t){return(DT[e]||{})[t]}function NT(e){return FT[e]||{prefix:null,iconName:null}}function c4(e){var t=jT[e],i=a1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function Bl(){return o1}var s1=function(){return{prefix:null,iconName:null,rest:[]}};function dg(e){var t=n1[e],i=ym[e]||ym[t],s=e in ma.styles?e:null;return i||s||null}function pg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,s=i===void 0?!1:i,c=null,f=e.reduce(function(y,l){var w=l4(_n.familyPrefix,l);if(Af[l]?(l=o4.includes(l)?R3[l]:l,c=l,y.prefix=l):a4.indexOf(l)>-1?(c=l,y.prefix=dg(l)):w?y.iconName=w:l!==_n.replacementClass&&y.rest.push(l),!s&&y.prefix&&y.iconName){var E=c==="fa"?NT(y.iconName):{},T=Fc(y.prefix,y.iconName);E.prefix&&(c=null),y.iconName=E.iconName||T||y.iconName,y.prefix=E.prefix||y.prefix,y.prefix==="far"&&!Af.far&&Af.fas&&!_n.autoFetchSvg&&(y.prefix="fas")}return y},s1());return(f.prefix==="fa"||c==="fa")&&(f.prefix=Bl()||"fas"),f}var h4=function(){function e(){w3(this,e),this.definitions={}}return b3(e,[{key:"add",value:function(){for(var i=this,s=arguments.length,c=new Array(s),f=0;f<s;f++)c[f]=arguments[f];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(l){i.definitions[l]=Qt(Qt({},i.definitions[l]||{}),y[l]),dv(l,y[l]);var w=AT[l];w&&dv(w,y[l]),BT()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,s){var c=s.prefix&&s.iconName&&s.icon?{0:s}:s;return Object.keys(c).map(function(f){var y=c[f],l=y.prefix,w=y.iconName,E=y.icon,T=E[2];i[l]||(i[l]={}),T.length>0&&T.forEach(function(S){typeof S=="string"&&(i[l][S]=E)}),i[l][w]=E}),i}}]),e}(),Lb=[],jc={},Hc={},f4=Object.keys(Hc);function d4(e,t){var i=t.mixoutsTo;return Lb=e,jc={},Object.keys(Hc).forEach(function(s){f4.indexOf(s)===-1&&delete Hc[s]}),Lb.forEach(function(s){var c=s.mixout?s.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(i[y]=c[y]),gm(c[y])==="object"&&Object.keys(c[y]).forEach(function(l){i[y]||(i[y]={}),i[y][l]=c[y][l]})}),s.hooks){var f=s.hooks();Object.keys(f).forEach(function(y){jc[y]||(jc[y]=[]),jc[y].push(f[y])})}s.provides&&s.provides(Hc)}),i}function pv(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),c=2;c<i;c++)s[c-2]=arguments[c];var f=jc[e]||[];return f.forEach(function(y){t=y.apply(null,[t].concat(s))}),t}function Ou(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var c=jc[e]||[];c.forEach(function(f){f.apply(null,i)})}function $s(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Hc[e]?Hc[e].apply(null,t):void 0}function mv(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||Bl();if(t)return t=Fc(i,t)||t,Mb(UT.definitions,i,t)||Mb(ma.styles,i,t)}var UT=new h4,p4=function(){_n.autoReplaceSvg=!1,_n.observeMutations=!1,Ou("noAuto")},m4={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zs?(Ou("beforeI2svg",t),$s("pseudoElements2svg",t),$s("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;_n.autoReplaceSvg===!1&&(_n.autoReplaceSvg=!0),_n.observeMutations=!0,e4(function(){y4({autoReplaceSvgRoot:i}),Ou("watch",t)})}},g4={icon:function(t){if(t===null)return null;if(gm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:Fc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],s=dg(t[0]);return{prefix:s,iconName:Fc(s,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(_n.familyPrefix,"-"))>-1||t.match(O3))){var c=pg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||Bl(),iconName:Fc(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var f=Bl();return{prefix:f,iconName:Fc(f,t)||t}}}},zo={noAuto:p4,config:_n,dom:m4,parse:g4,library:UT,findIconDefinition:mv,toHtml:ld},y4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,s=i===void 0?Tr:i;(Object.keys(ma.styles).length>0||_n.autoFetchSvg)&&Zs&&_n.autoReplaceSvg&&zo.dom.i2svg({node:s})};function mg(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(s){return ld(s)})}}),Object.defineProperty(e,"node",{get:function(){if(Zs){var s=Tr.createElement("div");return s.innerHTML=e.html,s.children}}}),e}function v4(e){var t=e.children,i=e.main,s=e.mask,c=e.attributes,f=e.styles,y=e.transform;if(i1(y)&&i.found&&!s.found){var l=i.width,w=i.height,E={x:l/w/2,y:.5};c.style=fg(Qt(Qt({},f),{},{"transform-origin":"".concat(E.x+y.x/16,"em ").concat(E.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function _4(e){var t=e.prefix,i=e.iconName,s=e.children,c=e.attributes,f=e.symbol,y=f===!0?"".concat(t,"-").concat(_n.familyPrefix,"-").concat(i):f;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Qt(Qt({},c),{},{id:y}),children:s}]}]}function l1(e){var t=e.icons,i=t.main,s=t.mask,c=e.prefix,f=e.iconName,y=e.transform,l=e.symbol,w=e.title,E=e.maskId,T=e.titleId,S=e.extra,I=e.watchable,j=I===void 0?!1:I,q=s.found?s:i,H=q.width,fe=q.height,Z=c==="fak",$=[_n.replacementClass,f?"".concat(_n.familyPrefix,"-").concat(f):""].filter(function(G){return S.classes.indexOf(G)===-1}).filter(function(G){return G!==""||!!G}).concat(S.classes).join(" "),N={children:[],attributes:Qt(Qt({},S.attributes),{},{"data-prefix":c,"data-icon":f,class:$,role:S.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(H," ").concat(fe)})},oe=Z&&!~S.classes.indexOf("fa-fw")?{width:"".concat(H/fe*16*.0625,"em")}:{};j&&(N.attributes[Ru]=""),w&&(N.children.push({tag:"title",attributes:{id:N.attributes["aria-labelledby"]||"title-".concat(T||Yf())},children:[w]}),delete N.attributes.title);var V=Qt(Qt({},N),{},{prefix:c,iconName:f,main:i,mask:s,maskId:E,transform:y,symbol:l,styles:Qt(Qt({},oe),S.styles)}),D=s.found&&i.found?$s("generateAbstractMask",V)||{children:[],attributes:{}}:$s("generateAbstractIcon",V)||{children:[],attributes:{}},b=D.children,k=D.attributes;return V.children=b,V.attributes=k,l?_4(V):v4(V)}function Rb(e){var t=e.content,i=e.width,s=e.height,c=e.transform,f=e.title,y=e.extra,l=e.watchable,w=l===void 0?!1:l,E=Qt(Qt(Qt({},y.attributes),f?{title:f}:{}),{},{class:y.classes.join(" ")});w&&(E[Ru]="");var T=Qt({},y.styles);i1(c)&&(T.transform=K3({transform:c,startCentered:!0,width:i,height:s}),T["-webkit-transform"]=T.transform);var S=fg(T);S.length>0&&(E.style=S);var I=[];return I.push({tag:"span",attributes:E,children:[t]}),f&&I.push({tag:"span",attributes:{class:"sr-only"},children:[f]}),I}function x4(e){var t=e.content,i=e.title,s=e.extra,c=Qt(Qt(Qt({},s.attributes),i?{title:i}:{}),{},{class:s.classes.join(" ")}),f=fg(s.styles);f.length>0&&(c.style=f);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),i&&y.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),y}var Ny=ma.styles;function gv(e){var t=e[0],i=e[1],s=e.slice(4),c=J_(s,1),f=c[0],y=null;return Array.isArray(f)?y={tag:"g",attributes:{class:"".concat(_n.familyPrefix,"-").concat(Cu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(_n.familyPrefix,"-").concat(Cu.SECONDARY),fill:"currentColor",d:f[0]}},{tag:"path",attributes:{class:"".concat(_n.familyPrefix,"-").concat(Cu.PRIMARY),fill:"currentColor",d:f[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d:f}},{found:!0,width:t,height:i,icon:y}}var w4={found:!1,width:512,height:512};function b4(e,t){!CT&&!_n.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function yv(e,t){var i=t;return t==="fa"&&_n.styleDefault!==null&&(t=Bl()),new Promise(function(s,c){if($s("missingIconAbstract"),i==="fa"){var f=NT(e)||{};e=f.iconName||e,t=f.prefix||t}if(e&&t&&Ny[t]&&Ny[t][e]){var y=Ny[t][e];return s(gv(y))}b4(e,t),s(Qt(Qt({},w4),{},{icon:_n.showMissingIcons&&e?$s("missingIconAbstract")||{}:{}}))})}var Ob=function(){},vv=_n.measurePerformance&&cp&&cp.mark&&cp.measure?cp:{mark:Ob,measure:Ob},uf='FA "6.0.0"',E4=function(t){return vv.mark("".concat(uf," ").concat(t," begins")),function(){return $T(t)}},$T=function(t){vv.mark("".concat(uf," ").concat(t," ends")),vv.measure("".concat(uf," ").concat(t),"".concat(uf," ").concat(t," begins"),"".concat(uf," ").concat(t," ends"))},u1={begin:E4,end:$T},Op=function(){};function Fb(e){var t=e.getAttribute?e.getAttribute(Ru):null;return typeof t=="string"}function S4(e){var t=e.getAttribute?e.getAttribute(e1):null,i=e.getAttribute?e.getAttribute(t1):null;return t&&i}function T4(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(_n.replacementClass)}function C4(){if(_n.autoReplaceSvg===!0)return Fp.replace;var e=Fp[_n.autoReplaceSvg];return e||Fp.replace}function A4(e){return Tr.createElementNS("http://www.w3.org/2000/svg",e)}function I4(e){return Tr.createElement(e)}function VT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,s=i===void 0?e.tag==="svg"?A4:I4:i;if(typeof e=="string")return Tr.createTextNode(e);var c=s(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var f=e.children||[];return f.forEach(function(y){c.appendChild(VT(y,{ceFn:s}))}),c}function P4(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var Fp={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(VT(c),i)}),i.getAttribute(Ru)===null&&_n.keepOriginalSource){var s=Tr.createComment(P4(i));i.parentNode.replaceChild(s,i)}else i.remove()},nest:function(t){var i=t[0],s=t[1];if(~r1(i).indexOf(_n.replacementClass))return Fp.replace(t);var c=new RegExp("".concat(_n.familyPrefix,"-.*"));if(delete s[0].attributes.id,s[0].attributes.class){var f=s[0].attributes.class.split(" ").reduce(function(l,w){return w===_n.replacementClass||w.match(c)?l.toSvg.push(w):l.toNode.push(w),l},{toNode:[],toSvg:[]});s[0].attributes.class=f.toSvg.join(" "),f.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",f.toNode.join(" "))}var y=s.map(function(l){return ld(l)}).join(`
`);i.setAttribute(Ru,""),i.innerHTML=y}};function jb(e){e()}function GT(e,t){var i=typeof t=="function"?t:Op;if(e.length===0)i();else{var s=jb;_n.mutateApproach===z3&&(s=Dl.requestAnimationFrame||jb),s(function(){var c=C4(),f=u1.begin("mutate");e.map(c),f(),i()})}}var c1=!1;function ZT(){c1=!0}function _v(){c1=!1}var _m=null;function Db(e){if(Ib&&_n.observeMutations){var t=e.treeCallback,i=t===void 0?Op:t,s=e.nodeCallback,c=s===void 0?Op:s,f=e.pseudoElementsCallback,y=f===void 0?Op:f,l=e.observeMutationsRoot,w=l===void 0?Tr:l;_m=new Ib(function(E){if(!c1){var T=Bl();fh(E).forEach(function(S){if(S.type==="childList"&&S.addedNodes.length>0&&!Fb(S.addedNodes[0])&&(_n.searchPseudoElements&&y(S.target),i(S.target)),S.type==="attributes"&&S.target.parentNode&&_n.searchPseudoElements&&y(S.target.parentNode),S.type==="attributes"&&Fb(S.target)&&~B3.indexOf(S.attributeName))if(S.attributeName==="class"&&S4(S.target)){var I=pg(r1(S.target)),j=I.prefix,q=I.iconName;S.target.setAttribute(e1,j||T),q&&S.target.setAttribute(t1,q)}else T4(S.target)&&c(S.target)})}}),Zs&&_m.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function k4(){_m&&_m.disconnect()}function M4(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(s,c){var f=c.split(":"),y=f[0],l=f.slice(1);return y&&l.length>0&&(s[y]=l.join(":").trim()),s},{})),i}function z4(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),s=e.innerText!==void 0?e.innerText.trim():"",c=pg(r1(e));return c.prefix||(c.prefix=Bl()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&s.length>0&&(c.iconName=u4(c.prefix,e.innerText)||a1(c.prefix,fv(e.innerText))),c}function L4(e){var t=fh(e.attributes).reduce(function(c,f){return c.name!=="class"&&c.name!=="style"&&(c[f.name]=f.value),c},{}),i=e.getAttribute("title"),s=e.getAttribute("data-fa-title-id");return _n.autoA11y&&(i?t["aria-labelledby"]="".concat(_n.replacementClass,"-title-").concat(s||Yf()):(t["aria-hidden"]="true",t.focusable="false")),t}function R4(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Ja,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function Bb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=z4(e),s=i.iconName,c=i.prefix,f=i.rest,y=L4(e),l=pv("parseNodeAttributes",{},e),w=t.styleParser?M4(e):[];return Qt({iconName:s,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:Ja,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:f,styles:w,attributes:y}},l)}var O4=ma.styles;function WT(e){var t=_n.autoReplaceSvg==="nest"?Bb(e,{styleParser:!1}):Bb(e);return~t.extra.classes.indexOf(IT)?$s("generateLayersText",e,t):$s("generateSvgReplacementMutation",e,t)}function Nb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Zs)return Promise.resolve();var i=Tr.documentElement.classList,s=function(S){return i.add("".concat(Pb,"-").concat(S))},c=function(S){return i.remove("".concat(Pb,"-").concat(S))},f=_n.autoFetchSvg?Object.keys(n1):Object.keys(O4),y=[".".concat(IT,":not([").concat(Ru,"])")].concat(f.map(function(T){return".".concat(T,":not([").concat(Ru,"])")})).join(", ");if(y.length===0)return Promise.resolve();var l=[];try{l=fh(e.querySelectorAll(y))}catch{}if(l.length>0)s("pending"),c("complete");else return Promise.resolve();var w=u1.begin("onTree"),E=l.reduce(function(T,S){try{var I=WT(S);I&&T.push(I)}catch(j){CT||j.name==="MissingIcon"&&console.error(j)}return T},[]);return new Promise(function(T,S){Promise.all(E).then(function(I){GT(I,function(){s("active"),s("complete"),c("pending"),typeof t=="function"&&t(),w(),T()})}).catch(function(I){w(),S(I)})})}function F4(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;WT(e).then(function(i){i&&GT([i],t)})}function j4(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(t||{}).icon?t:mv(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:mv(c||{})),e(s,Qt(Qt({},i),{},{mask:c}))}}var D4=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.transform,c=s===void 0?Ja:s,f=i.symbol,y=f===void 0?!1:f,l=i.mask,w=l===void 0?null:l,E=i.maskId,T=E===void 0?null:E,S=i.title,I=S===void 0?null:S,j=i.titleId,q=j===void 0?null:j,H=i.classes,fe=H===void 0?[]:H,Z=i.attributes,$=Z===void 0?{}:Z,N=i.styles,oe=N===void 0?{}:N;if(t){var V=t.prefix,D=t.iconName,b=t.icon;return mg(Qt({type:"icon"},t),function(){return Ou("beforeDOMElementCreation",{iconDefinition:t,params:i}),_n.autoA11y&&(I?$["aria-labelledby"]="".concat(_n.replacementClass,"-title-").concat(q||Yf()):($["aria-hidden"]="true",$.focusable="false")),l1({icons:{main:gv(b),mask:w?gv(w.icon):{found:!1,width:null,height:null,icon:{}}},prefix:V,iconName:D,transform:Qt(Qt({},Ja),c),symbol:y,title:I,maskId:T,titleId:q,extra:{attributes:$,styles:oe,classes:fe}})})}},B4={mixout:function(){return{icon:j4(D4)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=Nb,i.nodeCallback=F4,i}}},provides:function(t){t.i2svg=function(i){var s=i.node,c=s===void 0?Tr:s,f=i.callback,y=f===void 0?function(){}:f;return Nb(c,y)},t.generateSvgReplacementMutation=function(i,s){var c=s.iconName,f=s.title,y=s.titleId,l=s.prefix,w=s.transform,E=s.symbol,T=s.mask,S=s.maskId,I=s.extra;return new Promise(function(j,q){Promise.all([yv(c,l),T.iconName?yv(T.iconName,T.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(H){var fe=J_(H,2),Z=fe[0],$=fe[1];j([i,l1({icons:{main:Z,mask:$},prefix:l,iconName:c,transform:w,symbol:E,maskId:S,title:f,titleId:y,extra:I,watchable:!0})])}).catch(q)})},t.generateAbstractIcon=function(i){var s=i.children,c=i.attributes,f=i.main,y=i.transform,l=i.styles,w=fg(l);w.length>0&&(c.style=w);var E;return i1(y)&&(E=$s("generateAbstractTransformGrouping",{main:f,transform:y,containerWidth:f.width,iconWidth:f.width})),s.push(E||f.icon),{children:s,attributes:c}}}},N4={mixout:function(){return{layer:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=s.classes,f=c===void 0?[]:c;return mg({type:"layer"},function(){Ou("beforeDOMElementCreation",{assembler:i,params:s});var y=[];return i(function(l){Array.isArray(l)?l.map(function(w){y=y.concat(w.abstract)}):y=y.concat(l.abstract)}),[{tag:"span",attributes:{class:["".concat(_n.familyPrefix,"-layers")].concat(hg(f)).join(" ")},children:y}]})}}}},U4={mixout:function(){return{counter:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=s.title,f=c===void 0?null:c,y=s.classes,l=y===void 0?[]:y,w=s.attributes,E=w===void 0?{}:w,T=s.styles,S=T===void 0?{}:T;return mg({type:"counter",content:i},function(){return Ou("beforeDOMElementCreation",{content:i,params:s}),x4({content:i.toString(),title:f,extra:{attributes:E,styles:S,classes:["".concat(_n.familyPrefix,"-layers-counter")].concat(hg(l))}})})}}}},$4={mixout:function(){return{text:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=s.transform,f=c===void 0?Ja:c,y=s.title,l=y===void 0?null:y,w=s.classes,E=w===void 0?[]:w,T=s.attributes,S=T===void 0?{}:T,I=s.styles,j=I===void 0?{}:I;return mg({type:"text",content:i},function(){return Ou("beforeDOMElementCreation",{content:i,params:s}),Rb({content:i,transform:Qt(Qt({},Ja),f),title:l,extra:{attributes:S,styles:j,classes:["".concat(_n.familyPrefix,"-layers-text")].concat(hg(E))}})})}}},provides:function(t){t.generateLayersText=function(i,s){var c=s.title,f=s.transform,y=s.extra,l=null,w=null;if(ET){var E=parseInt(getComputedStyle(i).fontSize,10),T=i.getBoundingClientRect();l=T.width/E,w=T.height/E}return _n.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([i,Rb({content:i.innerHTML,width:l,height:w,transform:f,title:c,extra:y,watchable:!0})])}}},V4=new RegExp('"',"ug"),Ub=[1105920,1112319];function G4(e){var t=e.replace(V4,""),i=r4(t,0),s=i>=Ub[0]&&i<=Ub[1],c=t.length===2?t[0]===t[1]:!1;return{value:fv(c?t[0]:t),isSecondary:s||c}}function $b(e,t){var i="".concat(M3).concat(t.replace(":","-"));return new Promise(function(s,c){if(e.getAttribute(i)!==null)return s();var f=fh(e.children),y=f.filter(function(D){return D.getAttribute(hv)===t})[0],l=Dl.getComputedStyle(e,t),w=l.getPropertyValue("font-family").match(F3),E=l.getPropertyValue("font-weight"),T=l.getPropertyValue("content");if(y&&!w)return e.removeChild(y),s();if(w&&T!=="none"&&T!==""){var S=l.getPropertyValue("content"),I=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(w[2])?ym[w[2].toLowerCase()]:j3[E],j=G4(S),q=j.value,H=j.isSecondary,fe=w[0].startsWith("FontAwesome"),Z=a1(I,q),$=Z;if(fe){var N=c4(q);N.iconName&&N.prefix&&(Z=N.iconName,I=N.prefix)}if(Z&&!H&&(!y||y.getAttribute(e1)!==I||y.getAttribute(t1)!==$)){e.setAttribute(i,$),y&&e.removeChild(y);var oe=R4(),V=oe.extra;V.attributes[hv]=t,yv(Z,I).then(function(D){var b=l1(Qt(Qt({},oe),{},{icons:{main:D,mask:s1()},prefix:I,iconName:$,extra:V,watchable:!0})),k=Tr.createElement("svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=b.map(function(G){return ld(G)}).join(`
`),e.removeAttribute(i),s()}).catch(c)}else s()}else s()})}function Z4(e){return Promise.all([$b(e,"::before"),$b(e,"::after")])}function W4(e){return e.parentNode!==document.head&&!~L3.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(hv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function Vb(e){if(Zs)return new Promise(function(t,i){var s=fh(e.querySelectorAll("*")).filter(W4).map(Z4),c=u1.begin("searchPseudoElements");ZT(),Promise.all(s).then(function(){c(),_v(),t()}).catch(function(){c(),_v(),i()})})}var H4={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=Vb,i}}},provides:function(t){t.pseudoElements2svg=function(i){var s=i.node,c=s===void 0?Tr:s;_n.searchPseudoElements&&Vb(c)}}},Gb=!1,X4={mixout:function(){return{dom:{unwatch:function(){ZT(),Gb=!0}}}},hooks:function(){return{bootstrap:function(){Db(pv("mutationObserverCallbacks",{}))},noAuto:function(){k4()},watch:function(i){var s=i.observeMutationsRoot;Gb?_v():Db(pv("mutationObserverCallbacks",{observeMutationsRoot:s}))}}}},Zb=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(s,c){var f=c.toLowerCase().split("-"),y=f[0],l=f.slice(1).join("-");if(y&&l==="h")return s.flipX=!0,s;if(y&&l==="v")return s.flipY=!0,s;if(l=parseFloat(l),isNaN(l))return s;switch(y){case"grow":s.size=s.size+l;break;case"shrink":s.size=s.size-l;break;case"left":s.x=s.x-l;break;case"right":s.x=s.x+l;break;case"up":s.y=s.y-l;break;case"down":s.y=s.y+l;break;case"rotate":s.rotate=s.rotate+l;break}return s},i)},q4={mixout:function(){return{parse:{transform:function(i){return Zb(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,s){var c=s.getAttribute("data-fa-transform");return c&&(i.transform=Zb(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var s=i.main,c=i.transform,f=i.containerWidth,y=i.iconWidth,l={transform:"translate(".concat(f/2," 256)")},w="translate(".concat(c.x*32,", ").concat(c.y*32,") "),E="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),T="rotate(".concat(c.rotate," 0 0)"),S={transform:"".concat(w," ").concat(E," ").concat(T)},I={transform:"translate(".concat(y/2*-1," -256)")},j={outer:l,inner:S,path:I};return{tag:"g",attributes:Qt({},j.outer),children:[{tag:"g",attributes:Qt({},j.inner),children:[{tag:s.icon.tag,children:s.icon.children,attributes:Qt(Qt({},s.icon.attributes),j.path)}]}]}}}},Uy={x:0,y:0,width:"100%",height:"100%"};function Wb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function K4(e){return e.tag==="g"?e.children:[e]}var Y4={hooks:function(){return{parseNodeAttributes:function(i,s){var c=s.getAttribute("data-fa-mask"),f=c?pg(c.split(" ").map(function(y){return y.trim()})):s1();return f.prefix||(f.prefix=Bl()),i.mask=f,i.maskId=s.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var s=i.children,c=i.attributes,f=i.main,y=i.mask,l=i.maskId,w=i.transform,E=f.width,T=f.icon,S=y.width,I=y.icon,j=q3({transform:w,containerWidth:S,iconWidth:E}),q={tag:"rect",attributes:Qt(Qt({},Uy),{},{fill:"white"})},H=T.children?{children:T.children.map(Wb)}:{},fe={tag:"g",attributes:Qt({},j.inner),children:[Wb(Qt({tag:T.tag,attributes:Qt(Qt({},T.attributes),j.path)},H))]},Z={tag:"g",attributes:Qt({},j.outer),children:[fe]},$="mask-".concat(l||Yf()),N="clip-".concat(l||Yf()),oe={tag:"mask",attributes:Qt(Qt({},Uy),{},{id:$,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[q,Z]},V={tag:"defs",children:[{tag:"clipPath",attributes:{id:N},children:K4(I)},oe]};return s.push(V,{tag:"rect",attributes:Qt({fill:"currentColor","clip-path":"url(#".concat(N,")"),mask:"url(#".concat($,")")},Uy)}),{children:s,attributes:c}}}},J4={provides:function(t){var i=!1;Dl.matchMedia&&(i=Dl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var s=[],c={fill:"currentColor"},f={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};s.push({tag:"path",attributes:Qt(Qt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Qt(Qt({},f),{},{attributeName:"opacity"}),l={tag:"circle",attributes:Qt(Qt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||l.children.push({tag:"animate",attributes:Qt(Qt({},f),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Qt(Qt({},y),{},{values:"1;0;1;1;0;1;"})}),s.push(l),s.push({tag:"path",attributes:Qt(Qt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Qt(Qt({},y),{},{values:"1;0;0;0;0;1;"})}]}),i||s.push({tag:"path",attributes:Qt(Qt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Qt(Qt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:s}}}},Q4={hooks:function(){return{parseNodeAttributes:function(i,s){var c=s.getAttribute("data-fa-symbol"),f=c===null?!1:c===""?!0:c;return i.symbol=f,i}}}},e5=[J3,B4,N4,U4,$4,H4,X4,q4,Y4,J4,Q4];d4(e5,{mixoutsTo:zo});zo.noAuto;zo.config;zo.library;zo.dom;var xv=zo.parse;zo.findIconDefinition;zo.toHtml;var t5=zo.icon;zo.layer;zo.text;zo.counter;var Wn={},n5={get exports(){return Wn},set exports(e){Wn=e}},r5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",i5=r5,o5=i5;function HT(){}function XT(){}XT.resetWarningCache=HT;var a5=function(){function e(s,c,f,y,l,w){if(w!==o5){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:XT,resetWarningCache:HT};return i.PropTypes=i,i};n5.exports=a5();function Hb(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,s)}return i}function Al(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(i),!0).forEach(function(s){Dc(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Hb(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function xm(e){return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}function Dc(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s5(e,t){if(e==null)return{};var i={},s=Object.keys(e),c,f;for(f=0;f<s.length;f++)c=s[f],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function qT(e,t){if(e==null)return{};var i=s5(e,t),s,c;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(c=0;c<f.length;c++)s=f[c],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}function wv(e){return l5(e)||u5(e)||c5(e)||h5()}function l5(e){if(Array.isArray(e))return bv(e)}function u5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c5(e,t){if(e){if(typeof e=="string")return bv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bv(e,t)}}function bv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function h5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f5(e){var t,i=e.beat,s=e.fade,c=e.flash,f=e.spin,y=e.spinPulse,l=e.spinReverse,w=e.pulse,E=e.fixedWidth,T=e.inverse,S=e.border,I=e.listItem,j=e.flip,q=e.size,H=e.rotation,fe=e.pull,Z=(t={"fa-beat":i,"fa-fade":s,"fa-flash":c,"fa-spin":f,"fa-spin-reverse":l,"fa-spin-pulse":y,"fa-pulse":w,"fa-fw":E,"fa-inverse":T,"fa-border":S,"fa-li":I,"fa-flip-horizontal":j==="horizontal"||j==="both","fa-flip-vertical":j==="vertical"||j==="both"},Dc(t,"fa-".concat(q),typeof q<"u"&&q!==null),Dc(t,"fa-rotate-".concat(H),typeof H<"u"&&H!==null&&H!==0),Dc(t,"fa-pull-".concat(fe),typeof fe<"u"&&fe!==null),Dc(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(Z).map(function($){return Z[$]?$:null}).filter(function($){return $})}function d5(e){return e=e-0,e===e}function KT(e){return d5(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var p5=["style"];function m5(e){return e.charAt(0).toUpperCase()+e.slice(1)}function g5(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var s=i.indexOf(":"),c=KT(i.slice(0,s)),f=i.slice(s+1).trim();return c.startsWith("webkit")?t[m5(c)]=f:t[c]=f,t},{})}function YT(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var s=(t.children||[]).map(function(w){return YT(e,w)}),c=Object.keys(t.attributes||{}).reduce(function(w,E){var T=t.attributes[E];switch(E){case"class":w.attrs.className=T,delete t.attributes.class;break;case"style":w.attrs.style=g5(T);break;default:E.indexOf("aria-")===0||E.indexOf("data-")===0?w.attrs[E.toLowerCase()]=T:w.attrs[KT(E)]=T}return w},{attrs:{}}),f=i.style,y=f===void 0?{}:f,l=qT(i,p5);return c.attrs.style=Al(Al({},c.attrs.style),y),e.apply(void 0,[t.tag,Al(Al({},c.attrs),l)].concat(wv(s)))}var JT=!1;try{JT=!0}catch{}function y5(){if(!JT&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function Xb(e){if(e&&xm(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(xv.icon)return xv.icon(e);if(e===null)return null;if(e&&xm(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function $y(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Dc({},e,t):{}}var v5=["forwardedRef"];function ts(e){var t=e.forwardedRef,i=qT(e,v5),s=i.icon,c=i.mask,f=i.symbol,y=i.className,l=i.title,w=i.titleId,E=Xb(s),T=$y("classes",[].concat(wv(f5(i)),wv(y.split(" ")))),S=$y("transform",typeof i.transform=="string"?xv.transform(i.transform):i.transform),I=$y("mask",Xb(c)),j=t5(E,Al(Al(Al(Al({},T),S),I),{},{symbol:f,title:l,titleId:w}));if(!j)return y5("Could not find icon",E),null;var q=j.abstract,H={ref:t};return Object.keys(i).forEach(function(fe){ts.defaultProps.hasOwnProperty(fe)||(H[fe]=i[fe])}),_5(q[0],H)}ts.displayName="FontAwesomeIcon";ts.propTypes={beat:Wn.bool,border:Wn.bool,className:Wn.string,fade:Wn.bool,flash:Wn.bool,mask:Wn.oneOfType([Wn.object,Wn.array,Wn.string]),fixedWidth:Wn.bool,inverse:Wn.bool,flip:Wn.oneOf(["horizontal","vertical","both"]),icon:Wn.oneOfType([Wn.object,Wn.array,Wn.string]),listItem:Wn.bool,pull:Wn.oneOf(["right","left"]),pulse:Wn.bool,rotation:Wn.oneOf([0,90,180,270]),size:Wn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Wn.bool,spinPulse:Wn.bool,spinReverse:Wn.bool,symbol:Wn.oneOfType([Wn.bool,Wn.string]),title:Wn.string,transform:Wn.oneOfType([Wn.string,Wn.object]),swapOpacity:Wn.bool};ts.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var _5=YT.bind(null,fE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var x5={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},w5=x5,Ev={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},b5={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function hp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ao={},E5={get exports(){return Ao},set exports(e){Ao=e}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(s,c,f){function y(E,T){if(!c[E]){if(!s[E]){var S=typeof hp=="function"&&hp;if(!T&&S)return S(E,!0);if(l)return l(E,!0);var I=new Error("Cannot find module '"+E+"'");throw I.code="MODULE_NOT_FOUND",I}var j=c[E]={exports:{}};s[E][0].call(j.exports,function(q){var H=s[E][1][q];return y(H||q)},j,j.exports,i,s,c,f)}return c[E].exports}for(var l=typeof hp=="function"&&hp,w=0;w<f.length;w++)y(f[w]);return y}return i}()({1:[function(i,s,c){c.byteLength=I,c.toByteArray=q,c.fromByteArray=Z;for(var f=[],y=[],l=typeof Uint8Array<"u"?Uint8Array:Array,w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=0,T=w.length;E<T;++E)f[E]=w[E],y[w.charCodeAt(E)]=E;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function S($){var N=$.length;if(N%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=$.indexOf("=");oe===-1&&(oe=N);var V=oe===N?0:4-oe%4;return[oe,V]}function I($){var N=S($),oe=N[0],V=N[1];return(oe+V)*3/4-V}function j($,N,oe){return(N+oe)*3/4-oe}function q($){var N,oe=S($),V=oe[0],D=oe[1],b=new l(j($,V,D)),k=0,G=D>0?V-4:V,Y;for(Y=0;Y<G;Y+=4)N=y[$.charCodeAt(Y)]<<18|y[$.charCodeAt(Y+1)]<<12|y[$.charCodeAt(Y+2)]<<6|y[$.charCodeAt(Y+3)],b[k++]=N>>16&255,b[k++]=N>>8&255,b[k++]=N&255;return D===2&&(N=y[$.charCodeAt(Y)]<<2|y[$.charCodeAt(Y+1)]>>4,b[k++]=N&255),D===1&&(N=y[$.charCodeAt(Y)]<<10|y[$.charCodeAt(Y+1)]<<4|y[$.charCodeAt(Y+2)]>>2,b[k++]=N>>8&255,b[k++]=N&255),b}function H($){return f[$>>18&63]+f[$>>12&63]+f[$>>6&63]+f[$&63]}function fe($,N,oe){for(var V,D=[],b=N;b<oe;b+=3)V=($[b]<<16&16711680)+($[b+1]<<8&65280)+($[b+2]&255),D.push(H(V));return D.join("")}function Z($){for(var N,oe=$.length,V=oe%3,D=[],b=16383,k=0,G=oe-V;k<G;k+=b)D.push(fe($,k,k+b>G?G:k+b));return V===1?(N=$[oe-1],D.push(f[N>>2]+f[N<<4&63]+"==")):V===2&&(N=($[oe-2]<<8)+$[oe-1],D.push(f[N>>10]+f[N>>4&63]+f[N<<2&63]+"=")),D.join("")}},{}],2:[function(i,s,c){(function(f){(function(){var y=i("base64-js"),l=i("ieee754");c.Buffer=S,c.SlowBuffer=V,c.INSPECT_MAX_BYTES=50;var w=2147483647;c.kMaxLength=w,S.TYPED_ARRAY_SUPPORT=E(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{var Te=new Uint8Array(1);return Te.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Te.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function T(Te){if(Te>w)throw new RangeError('The value "'+Te+'" is invalid for option "size"');var F=new Uint8Array(Te);return F.__proto__=S.prototype,F}function S(Te,F,R){if(typeof Te=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H(Te)}return I(Te,F,R)}typeof Symbol<"u"&&Symbol.species!=null&&S[Symbol.species]===S&&Object.defineProperty(S,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),S.poolSize=8192;function I(Te,F,R){if(typeof Te=="string")return fe(Te,F);if(ArrayBuffer.isView(Te))return Z(Te);if(Te==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te);if(mn(Te,ArrayBuffer)||Te&&mn(Te.buffer,ArrayBuffer))return $(Te,F,R);if(typeof Te=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=Te.valueOf&&Te.valueOf();if(ye!=null&&ye!==Te)return S.from(ye,F,R);var $e=N(Te);if($e)return $e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Te[Symbol.toPrimitive]=="function")return S.from(Te[Symbol.toPrimitive]("string"),F,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te)}S.from=function(Te,F,R){return I(Te,F,R)},S.prototype.__proto__=Uint8Array.prototype,S.__proto__=Uint8Array;function j(Te){if(typeof Te!="number")throw new TypeError('"size" argument must be of type number');if(Te<0)throw new RangeError('The value "'+Te+'" is invalid for option "size"')}function q(Te,F,R){return j(Te),Te<=0?T(Te):F!==void 0?typeof R=="string"?T(Te).fill(F,R):T(Te).fill(F):T(Te)}S.alloc=function(Te,F,R){return q(Te,F,R)};function H(Te){return j(Te),T(Te<0?0:oe(Te)|0)}S.allocUnsafe=function(Te){return H(Te)},S.allocUnsafeSlow=function(Te){return H(Te)};function fe(Te,F){if((typeof F!="string"||F==="")&&(F="utf8"),!S.isEncoding(F))throw new TypeError("Unknown encoding: "+F);var R=D(Te,F)|0,ye=T(R),$e=ye.write(Te,F);return $e!==R&&(ye=ye.slice(0,$e)),ye}function Z(Te){for(var F=Te.length<0?0:oe(Te.length)|0,R=T(F),ye=0;ye<F;ye+=1)R[ye]=Te[ye]&255;return R}function $(Te,F,R){if(F<0||Te.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(Te.byteLength<F+(R||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return F===void 0&&R===void 0?ye=new Uint8Array(Te):R===void 0?ye=new Uint8Array(Te,F):ye=new Uint8Array(Te,F,R),ye.__proto__=S.prototype,ye}function N(Te){if(S.isBuffer(Te)){var F=oe(Te.length)|0,R=T(F);return R.length===0||Te.copy(R,0,0,F),R}if(Te.length!==void 0)return typeof Te.length!="number"||Vt(Te.length)?T(0):Z(Te);if(Te.type==="Buffer"&&Array.isArray(Te.data))return Z(Te.data)}function oe(Te){if(Te>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return Te|0}function V(Te){return+Te!=Te&&(Te=0),S.alloc(+Te)}S.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==S.prototype},S.compare=function(F,R){if(mn(F,Uint8Array)&&(F=S.from(F,F.offset,F.byteLength)),mn(R,Uint8Array)&&(R=S.from(R,R.offset,R.byteLength)),!S.isBuffer(F)||!S.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===R)return 0;for(var ye=F.length,$e=R.length,Ye=0,ut=Math.min(ye,$e);Ye<ut;++Ye)if(F[Ye]!==R[Ye]){ye=F[Ye],$e=R[Ye];break}return ye<$e?-1:$e<ye?1:0},S.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(F,R){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return S.alloc(0);var ye;if(R===void 0)for(R=0,ye=0;ye<F.length;++ye)R+=F[ye].length;var $e=S.allocUnsafe(R),Ye=0;for(ye=0;ye<F.length;++ye){var ut=F[ye];if(mn(ut,Uint8Array)&&(ut=S.from(ut)),!S.isBuffer(ut))throw new TypeError('"list" argument must be an Array of Buffers');ut.copy($e,Ye),Ye+=ut.length}return $e};function D(Te,F){if(S.isBuffer(Te))return Te.length;if(ArrayBuffer.isView(Te)||mn(Te,ArrayBuffer))return Te.byteLength;if(typeof Te!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Te);var R=Te.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&R===0)return 0;for(var $e=!1;;)switch(F){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Nt(Te).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Pn(Te).length;default:if($e)return ye?-1:Nt(Te).length;F=(""+F).toLowerCase(),$e=!0}}S.byteLength=D;function b(Te,F,R){var ye=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,F>>>=0,R<=F))return"";for(Te||(Te="utf8");;)switch(Te){case"hex":return Pe(this,F,R);case"utf8":case"utf-8":return te(this,F,R);case"ascii":return we(this,F,R);case"latin1":case"binary":return De(this,F,R);case"base64":return ne(this,F,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,F,R);default:if(ye)throw new TypeError("Unknown encoding: "+Te);Te=(Te+"").toLowerCase(),ye=!0}}S.prototype._isBuffer=!0;function k(Te,F,R){var ye=Te[F];Te[F]=Te[R],Te[R]=ye}S.prototype.swap16=function(){var F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<F;R+=2)k(this,R,R+1);return this},S.prototype.swap32=function(){var F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<F;R+=4)k(this,R,R+3),k(this,R+1,R+2);return this},S.prototype.swap64=function(){var F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<F;R+=8)k(this,R,R+7),k(this,R+1,R+6),k(this,R+2,R+5),k(this,R+3,R+4);return this},S.prototype.toString=function(){var F=this.length;return F===0?"":arguments.length===0?te(this,0,F):b.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(F){if(!S.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:S.compare(this,F)===0},S.prototype.inspect=function(){var F="",R=c.INSPECT_MAX_BYTES;return F=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(F+=" ... "),"<Buffer "+F+">"},S.prototype.compare=function(F,R,ye,$e,Ye){if(mn(F,Uint8Array)&&(F=S.from(F,F.offset,F.byteLength)),!S.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(R===void 0&&(R=0),ye===void 0&&(ye=F?F.length:0),$e===void 0&&($e=0),Ye===void 0&&(Ye=this.length),R<0||ye>F.length||$e<0||Ye>this.length)throw new RangeError("out of range index");if($e>=Ye&&R>=ye)return 0;if($e>=Ye)return-1;if(R>=ye)return 1;if(R>>>=0,ye>>>=0,$e>>>=0,Ye>>>=0,this===F)return 0;for(var ut=Ye-$e,se=ye-R,P=Math.min(ut,se),L=this.slice($e,Ye),Se=F.slice(R,ye),Be=0;Be<P;++Be)if(L[Be]!==Se[Be]){ut=L[Be],se=Se[Be];break}return ut<se?-1:se<ut?1:0};function G(Te,F,R,ye,$e){if(Te.length===0)return-1;if(typeof R=="string"?(ye=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Vt(R)&&(R=$e?0:Te.length-1),R<0&&(R=Te.length+R),R>=Te.length){if($e)return-1;R=Te.length-1}else if(R<0)if($e)R=0;else return-1;if(typeof F=="string"&&(F=S.from(F,ye)),S.isBuffer(F))return F.length===0?-1:Y(Te,F,R,ye,$e);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?$e?Uint8Array.prototype.indexOf.call(Te,F,R):Uint8Array.prototype.lastIndexOf.call(Te,F,R):Y(Te,[F],R,ye,$e);throw new TypeError("val must be string, number or Buffer")}function Y(Te,F,R,ye,$e){var Ye=1,ut=Te.length,se=F.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(Te.length<2||F.length<2)return-1;Ye=2,ut/=2,se/=2,R/=2}function P(it,qt){return Ye===1?it[qt]:it.readUInt16BE(qt*Ye)}var L;if($e){var Se=-1;for(L=R;L<ut;L++)if(P(Te,L)===P(F,Se===-1?0:L-Se)){if(Se===-1&&(Se=L),L-Se+1===se)return Se*Ye}else Se!==-1&&(L-=L-Se),Se=-1}else for(R+se>ut&&(R=ut-se),L=R;L>=0;L--){for(var Be=!0,We=0;We<se;We++)if(P(Te,L+We)!==P(F,We)){Be=!1;break}if(Be)return L}return-1}S.prototype.includes=function(F,R,ye){return this.indexOf(F,R,ye)!==-1},S.prototype.indexOf=function(F,R,ye){return G(this,F,R,ye,!0)},S.prototype.lastIndexOf=function(F,R,ye){return G(this,F,R,ye,!1)};function K(Te,F,R,ye){R=Number(R)||0;var $e=Te.length-R;ye?(ye=Number(ye),ye>$e&&(ye=$e)):ye=$e;var Ye=F.length;ye>Ye/2&&(ye=Ye/2);for(var ut=0;ut<ye;++ut){var se=parseInt(F.substr(ut*2,2),16);if(Vt(se))return ut;Te[R+ut]=se}return ut}function pe(Te,F,R,ye){return Cn(Nt(F,Te.length-R),Te,R,ye)}function _e(Te,F,R,ye){return Cn(Yt(F),Te,R,ye)}function be(Te,F,R,ye){return _e(Te,F,R,ye)}function Q(Te,F,R,ye){return Cn(Pn(F),Te,R,ye)}function re(Te,F,R,ye){return Cn(dn(F,Te.length-R),Te,R,ye)}S.prototype.write=function(F,R,ye,$e){if(R===void 0)$e="utf8",ye=this.length,R=0;else if(ye===void 0&&typeof R=="string")$e=R,ye=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(ye)?(ye=ye>>>0,$e===void 0&&($e="utf8")):($e=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Ye=this.length-R;if((ye===void 0||ye>Ye)&&(ye=Ye),F.length>0&&(ye<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");$e||($e="utf8");for(var ut=!1;;)switch($e){case"hex":return K(this,F,R,ye);case"utf8":case"utf-8":return pe(this,F,R,ye);case"ascii":return _e(this,F,R,ye);case"latin1":case"binary":return be(this,F,R,ye);case"base64":return Q(this,F,R,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,F,R,ye);default:if(ut)throw new TypeError("Unknown encoding: "+$e);$e=(""+$e).toLowerCase(),ut=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(Te,F,R){return F===0&&R===Te.length?y.fromByteArray(Te):y.fromByteArray(Te.slice(F,R))}function te(Te,F,R){R=Math.min(Te.length,R);for(var ye=[],$e=F;$e<R;){var Ye=Te[$e],ut=null,se=Ye>239?4:Ye>223?3:Ye>191?2:1;if($e+se<=R){var P,L,Se,Be;switch(se){case 1:Ye<128&&(ut=Ye);break;case 2:P=Te[$e+1],(P&192)===128&&(Be=(Ye&31)<<6|P&63,Be>127&&(ut=Be));break;case 3:P=Te[$e+1],L=Te[$e+2],(P&192)===128&&(L&192)===128&&(Be=(Ye&15)<<12|(P&63)<<6|L&63,Be>2047&&(Be<55296||Be>57343)&&(ut=Be));break;case 4:P=Te[$e+1],L=Te[$e+2],Se=Te[$e+3],(P&192)===128&&(L&192)===128&&(Se&192)===128&&(Be=(Ye&15)<<18|(P&63)<<12|(L&63)<<6|Se&63,Be>65535&&Be<1114112&&(ut=Be))}}ut===null?(ut=65533,se=1):ut>65535&&(ut-=65536,ye.push(ut>>>10&1023|55296),ut=56320|ut&1023),ye.push(ut),$e+=se}return xe(ye)}var ce=4096;function xe(Te){var F=Te.length;if(F<=ce)return String.fromCharCode.apply(String,Te);for(var R="",ye=0;ye<F;)R+=String.fromCharCode.apply(String,Te.slice(ye,ye+=ce));return R}function we(Te,F,R){var ye="";R=Math.min(Te.length,R);for(var $e=F;$e<R;++$e)ye+=String.fromCharCode(Te[$e]&127);return ye}function De(Te,F,R){var ye="";R=Math.min(Te.length,R);for(var $e=F;$e<R;++$e)ye+=String.fromCharCode(Te[$e]);return ye}function Pe(Te,F,R){var ye=Te.length;(!F||F<0)&&(F=0),(!R||R<0||R>ye)&&(R=ye);for(var $e="",Ye=F;Ye<R;++Ye)$e+=bt(Te[Ye]);return $e}function Me(Te,F,R){for(var ye=Te.slice(F,R),$e="",Ye=0;Ye<ye.length;Ye+=2)$e+=String.fromCharCode(ye[Ye]+ye[Ye+1]*256);return $e}S.prototype.slice=function(F,R){var ye=this.length;F=~~F,R=R===void 0?ye:~~R,F<0?(F+=ye,F<0&&(F=0)):F>ye&&(F=ye),R<0?(R+=ye,R<0&&(R=0)):R>ye&&(R=ye),R<F&&(R=F);var $e=this.subarray(F,R);return $e.__proto__=S.prototype,$e};function Ve(Te,F,R){if(Te%1!==0||Te<0)throw new RangeError("offset is not uint");if(Te+F>R)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUIntLE=function(F,R,ye){F=F>>>0,R=R>>>0,ye||Ve(F,R,this.length);for(var $e=this[F],Ye=1,ut=0;++ut<R&&(Ye*=256);)$e+=this[F+ut]*Ye;return $e},S.prototype.readUIntBE=function(F,R,ye){F=F>>>0,R=R>>>0,ye||Ve(F,R,this.length);for(var $e=this[F+--R],Ye=1;R>0&&(Ye*=256);)$e+=this[F+--R]*Ye;return $e},S.prototype.readUInt8=function(F,R){return F=F>>>0,R||Ve(F,1,this.length),this[F]},S.prototype.readUInt16LE=function(F,R){return F=F>>>0,R||Ve(F,2,this.length),this[F]|this[F+1]<<8},S.prototype.readUInt16BE=function(F,R){return F=F>>>0,R||Ve(F,2,this.length),this[F]<<8|this[F+1]},S.prototype.readUInt32LE=function(F,R){return F=F>>>0,R||Ve(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},S.prototype.readUInt32BE=function(F,R){return F=F>>>0,R||Ve(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},S.prototype.readIntLE=function(F,R,ye){F=F>>>0,R=R>>>0,ye||Ve(F,R,this.length);for(var $e=this[F],Ye=1,ut=0;++ut<R&&(Ye*=256);)$e+=this[F+ut]*Ye;return Ye*=128,$e>=Ye&&($e-=Math.pow(2,8*R)),$e},S.prototype.readIntBE=function(F,R,ye){F=F>>>0,R=R>>>0,ye||Ve(F,R,this.length);for(var $e=R,Ye=1,ut=this[F+--$e];$e>0&&(Ye*=256);)ut+=this[F+--$e]*Ye;return Ye*=128,ut>=Ye&&(ut-=Math.pow(2,8*R)),ut},S.prototype.readInt8=function(F,R){return F=F>>>0,R||Ve(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},S.prototype.readInt16LE=function(F,R){F=F>>>0,R||Ve(F,2,this.length);var ye=this[F]|this[F+1]<<8;return ye&32768?ye|4294901760:ye},S.prototype.readInt16BE=function(F,R){F=F>>>0,R||Ve(F,2,this.length);var ye=this[F+1]|this[F]<<8;return ye&32768?ye|4294901760:ye},S.prototype.readInt32LE=function(F,R){return F=F>>>0,R||Ve(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},S.prototype.readInt32BE=function(F,R){return F=F>>>0,R||Ve(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},S.prototype.readFloatLE=function(F,R){return F=F>>>0,R||Ve(F,4,this.length),l.read(this,F,!0,23,4)},S.prototype.readFloatBE=function(F,R){return F=F>>>0,R||Ve(F,4,this.length),l.read(this,F,!1,23,4)},S.prototype.readDoubleLE=function(F,R){return F=F>>>0,R||Ve(F,8,this.length),l.read(this,F,!0,52,8)},S.prototype.readDoubleBE=function(F,R){return F=F>>>0,R||Ve(F,8,this.length),l.read(this,F,!1,52,8)};function Ne(Te,F,R,ye,$e,Ye){if(!S.isBuffer(Te))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>$e||F<Ye)throw new RangeError('"value" argument is out of bounds');if(R+ye>Te.length)throw new RangeError("Index out of range")}S.prototype.writeUIntLE=function(F,R,ye,$e){if(F=+F,R=R>>>0,ye=ye>>>0,!$e){var Ye=Math.pow(2,8*ye)-1;Ne(this,F,R,ye,Ye,0)}var ut=1,se=0;for(this[R]=F&255;++se<ye&&(ut*=256);)this[R+se]=F/ut&255;return R+ye},S.prototype.writeUIntBE=function(F,R,ye,$e){if(F=+F,R=R>>>0,ye=ye>>>0,!$e){var Ye=Math.pow(2,8*ye)-1;Ne(this,F,R,ye,Ye,0)}var ut=ye-1,se=1;for(this[R+ut]=F&255;--ut>=0&&(se*=256);)this[R+ut]=F/se&255;return R+ye},S.prototype.writeUInt8=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,1,255,0),this[R]=F&255,R+1},S.prototype.writeUInt16LE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,2,65535,0),this[R]=F&255,this[R+1]=F>>>8,R+2},S.prototype.writeUInt16BE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,2,65535,0),this[R]=F>>>8,this[R+1]=F&255,R+2},S.prototype.writeUInt32LE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,4,4294967295,0),this[R+3]=F>>>24,this[R+2]=F>>>16,this[R+1]=F>>>8,this[R]=F&255,R+4},S.prototype.writeUInt32BE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,4,4294967295,0),this[R]=F>>>24,this[R+1]=F>>>16,this[R+2]=F>>>8,this[R+3]=F&255,R+4},S.prototype.writeIntLE=function(F,R,ye,$e){if(F=+F,R=R>>>0,!$e){var Ye=Math.pow(2,8*ye-1);Ne(this,F,R,ye,Ye-1,-Ye)}var ut=0,se=1,P=0;for(this[R]=F&255;++ut<ye&&(se*=256);)F<0&&P===0&&this[R+ut-1]!==0&&(P=1),this[R+ut]=(F/se>>0)-P&255;return R+ye},S.prototype.writeIntBE=function(F,R,ye,$e){if(F=+F,R=R>>>0,!$e){var Ye=Math.pow(2,8*ye-1);Ne(this,F,R,ye,Ye-1,-Ye)}var ut=ye-1,se=1,P=0;for(this[R+ut]=F&255;--ut>=0&&(se*=256);)F<0&&P===0&&this[R+ut+1]!==0&&(P=1),this[R+ut]=(F/se>>0)-P&255;return R+ye},S.prototype.writeInt8=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,1,127,-128),F<0&&(F=255+F+1),this[R]=F&255,R+1},S.prototype.writeInt16LE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,2,32767,-32768),this[R]=F&255,this[R+1]=F>>>8,R+2},S.prototype.writeInt16BE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,2,32767,-32768),this[R]=F>>>8,this[R+1]=F&255,R+2},S.prototype.writeInt32LE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,4,2147483647,-2147483648),this[R]=F&255,this[R+1]=F>>>8,this[R+2]=F>>>16,this[R+3]=F>>>24,R+4},S.prototype.writeInt32BE=function(F,R,ye){return F=+F,R=R>>>0,ye||Ne(this,F,R,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[R]=F>>>24,this[R+1]=F>>>16,this[R+2]=F>>>8,this[R+3]=F&255,R+4};function Qe(Te,F,R,ye,$e,Ye){if(R+ye>Te.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ct(Te,F,R,ye,$e){return F=+F,R=R>>>0,$e||Qe(Te,F,R,4),l.write(Te,F,R,ye,23,4),R+4}S.prototype.writeFloatLE=function(F,R,ye){return ct(this,F,R,!0,ye)},S.prototype.writeFloatBE=function(F,R,ye){return ct(this,F,R,!1,ye)};function mt(Te,F,R,ye,$e){return F=+F,R=R>>>0,$e||Qe(Te,F,R,8),l.write(Te,F,R,ye,52,8),R+8}S.prototype.writeDoubleLE=function(F,R,ye){return mt(this,F,R,!0,ye)},S.prototype.writeDoubleBE=function(F,R,ye){return mt(this,F,R,!1,ye)},S.prototype.copy=function(F,R,ye,$e){if(!S.isBuffer(F))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!$e&&$e!==0&&($e=this.length),R>=F.length&&(R=F.length),R||(R=0),$e>0&&$e<ye&&($e=ye),$e===ye||F.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if($e<0)throw new RangeError("sourceEnd out of bounds");$e>this.length&&($e=this.length),F.length-R<$e-ye&&($e=F.length-R+ye);var Ye=$e-ye;if(this===F&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,ye,$e);else if(this===F&&ye<R&&R<$e)for(var ut=Ye-1;ut>=0;--ut)F[ut+R]=this[ut+ye];else Uint8Array.prototype.set.call(F,this.subarray(ye,$e),R);return Ye},S.prototype.fill=function(F,R,ye,$e){if(typeof F=="string"){if(typeof R=="string"?($e=R,R=0,ye=this.length):typeof ye=="string"&&($e=ye,ye=this.length),$e!==void 0&&typeof $e!="string")throw new TypeError("encoding must be a string");if(typeof $e=="string"&&!S.isEncoding($e))throw new TypeError("Unknown encoding: "+$e);if(F.length===1){var Ye=F.charCodeAt(0);($e==="utf8"&&Ye<128||$e==="latin1")&&(F=Ye)}}else typeof F=="number"&&(F=F&255);if(R<0||this.length<R||this.length<ye)throw new RangeError("Out of range index");if(ye<=R)return this;R=R>>>0,ye=ye===void 0?this.length:ye>>>0,F||(F=0);var ut;if(typeof F=="number")for(ut=R;ut<ye;++ut)this[ut]=F;else{var se=S.isBuffer(F)?F:S.from(F,$e),P=se.length;if(P===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(ut=0;ut<ye-R;++ut)this[ut+R]=se[ut%P]}return this};var Lt=/[^+/0-9A-Za-z-_]/g;function dt(Te){if(Te=Te.split("=")[0],Te=Te.trim().replace(Lt,""),Te.length<2)return"";for(;Te.length%4!==0;)Te=Te+"=";return Te}function bt(Te){return Te<16?"0"+Te.toString(16):Te.toString(16)}function Nt(Te,F){F=F||1/0;for(var R,ye=Te.length,$e=null,Ye=[],ut=0;ut<ye;++ut){if(R=Te.charCodeAt(ut),R>55295&&R<57344){if(!$e){if(R>56319){(F-=3)>-1&&Ye.push(239,191,189);continue}else if(ut+1===ye){(F-=3)>-1&&Ye.push(239,191,189);continue}$e=R;continue}if(R<56320){(F-=3)>-1&&Ye.push(239,191,189),$e=R;continue}R=($e-55296<<10|R-56320)+65536}else $e&&(F-=3)>-1&&Ye.push(239,191,189);if($e=null,R<128){if((F-=1)<0)break;Ye.push(R)}else if(R<2048){if((F-=2)<0)break;Ye.push(R>>6|192,R&63|128)}else if(R<65536){if((F-=3)<0)break;Ye.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((F-=4)<0)break;Ye.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return Ye}function Yt(Te){for(var F=[],R=0;R<Te.length;++R)F.push(Te.charCodeAt(R)&255);return F}function dn(Te,F){for(var R,ye,$e,Ye=[],ut=0;ut<Te.length&&!((F-=2)<0);++ut)R=Te.charCodeAt(ut),ye=R>>8,$e=R%256,Ye.push($e),Ye.push(ye);return Ye}function Pn(Te){return y.toByteArray(dt(Te))}function Cn(Te,F,R,ye){for(var $e=0;$e<ye&&!($e+R>=F.length||$e>=Te.length);++$e)F[$e+R]=Te[$e];return $e}function mn(Te,F){return Te instanceof F||Te!=null&&Te.constructor!=null&&Te.constructor.name!=null&&Te.constructor.name===F.name}function Vt(Te){return Te!==Te}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,s,c){const f=i("./validator"),y=i("./xmlparser/XMLParser"),l=i("./xmlbuilder/json2xml");s.exports={XMLParser:y,XMLValidator:f,XMLBuilder:l}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,s,c){const f=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=f+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+f+"]["+y+"]*",w=new RegExp("^"+l+"$"),E=function(S,I){const j=[];let q=I.exec(S);for(;q;){const H=[];H.startIndex=I.lastIndex-q[0].length;const fe=q.length;for(let Z=0;Z<fe;Z++)H.push(q[Z]);j.push(H),q=I.exec(S)}return j},T=function(S){const I=w.exec(S);return!(I===null||typeof I>"u")};c.isExist=function(S){return typeof S<"u"},c.isEmptyObject=function(S){return Object.keys(S).length===0},c.merge=function(S,I,j){if(I){const q=Object.keys(I),H=q.length;for(let fe=0;fe<H;fe++)j==="strict"?S[q[fe]]=[I[q[fe]]]:S[q[fe]]=I[q[fe]]}},c.getValue=function(S){return c.isExist(S)?S:""},c.isName=T,c.getAllMatches=E,c.nameRegexp=l},{}],5:[function(i,s,c){const f=i("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(D,b){b=Object.assign({},y,b);const k=[];let G=!1,Y=!1;D[0]==="\uFEFF"&&(D=D.substr(1));for(let K=0;K<D.length;K++)if(D[K]==="<"&&D[K+1]==="?"){if(K+=2,K=w(D,K),K.err)return K}else if(D[K]==="<"){let pe=K;if(K++,D[K]==="!"){K=E(D,K);continue}else{let _e=!1;D[K]==="/"&&(_e=!0,K++);let be="";for(;K<D.length&&D[K]!==">"&&D[K]!==" "&&D[K]!=="	"&&D[K]!==`
`&&D[K]!=="\r";K++)be+=D[K];if(be=be.trim(),be[be.length-1]==="/"&&(be=be.substring(0,be.length-1),K--),!N(be)){let ne;return be.trim().length===0?ne="Invalid space after '<'.":ne="Tag '"+be+"' is an invalid name.",Z("InvalidTag",ne,oe(D,K))}const Q=I(D,K);if(Q===!1)return Z("InvalidAttr","Attributes for '"+be+"' have open quote.",oe(D,K));let re=Q.value;if(K=Q.index,re[re.length-1]==="/"){const ne=K-re.length;re=re.substring(0,re.length-1);const te=q(re,b);if(te===!0)G=!0;else return Z(te.err.code,te.err.msg,oe(D,ne+te.err.line))}else if(_e)if(Q.tagClosed){if(re.trim().length>0)return Z("InvalidTag","Closing tag '"+be+"' can't have attributes or invalid starting.",oe(D,pe));{const ne=k.pop();if(be!==ne.tagName){let te=oe(D,ne.tagStartPos);return Z("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+te.line+", col "+te.col+") instead of closing tag '"+be+"'.",oe(D,pe))}k.length==0&&(Y=!0)}}else return Z("InvalidTag","Closing tag '"+be+"' doesn't have proper closing.",oe(D,K));else{const ne=q(re,b);if(ne!==!0)return Z(ne.err.code,ne.err.msg,oe(D,K-re.length+ne.err.line));if(Y===!0)return Z("InvalidXml","Multiple possible root nodes found.",oe(D,K));b.unpairedTags.indexOf(be)!==-1||k.push({tagName:be,tagStartPos:pe}),G=!0}for(K++;K<D.length;K++)if(D[K]==="<")if(D[K+1]==="!"){K++,K=E(D,K);continue}else if(D[K+1]==="?"){if(K=w(D,++K),K.err)return K}else break;else if(D[K]==="&"){const ne=fe(D,K);if(ne==-1)return Z("InvalidChar","char '&' is not expected.",oe(D,K));K=ne}else if(Y===!0&&!l(D[K]))return Z("InvalidXml","Extra text at the end",oe(D,K));D[K]==="<"&&K--}}else{if(l(D[K]))continue;return Z("InvalidChar","char '"+D[K]+"' is not expected.",oe(D,K))}if(G){if(k.length==1)return Z("InvalidTag","Unclosed tag '"+k[0].tagName+"'.",oe(D,k[0].tagStartPos));if(k.length>0)return Z("InvalidXml","Invalid '"+JSON.stringify(k.map(K=>K.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Z("InvalidXml","Start tag expected.",1);return!0};function l(D){return D===" "||D==="	"||D===`
`||D==="\r"}function w(D,b){const k=b;for(;b<D.length;b++)if(D[b]=="?"||D[b]==" "){const G=D.substr(k,b-k);if(b>5&&G==="xml")return Z("InvalidXml","XML declaration allowed only at the start of the document.",oe(D,b));if(D[b]=="?"&&D[b+1]==">"){b++;break}else continue}return b}function E(D,b){if(D.length>b+5&&D[b+1]==="-"&&D[b+2]==="-"){for(b+=3;b<D.length;b++)if(D[b]==="-"&&D[b+1]==="-"&&D[b+2]===">"){b+=2;break}}else if(D.length>b+8&&D[b+1]==="D"&&D[b+2]==="O"&&D[b+3]==="C"&&D[b+4]==="T"&&D[b+5]==="Y"&&D[b+6]==="P"&&D[b+7]==="E"){let k=1;for(b+=8;b<D.length;b++)if(D[b]==="<")k++;else if(D[b]===">"&&(k--,k===0))break}else if(D.length>b+9&&D[b+1]==="["&&D[b+2]==="C"&&D[b+3]==="D"&&D[b+4]==="A"&&D[b+5]==="T"&&D[b+6]==="A"&&D[b+7]==="["){for(b+=8;b<D.length;b++)if(D[b]==="]"&&D[b+1]==="]"&&D[b+2]===">"){b+=2;break}}return b}const T='"',S="'";function I(D,b){let k="",G="",Y=!1;for(;b<D.length;b++){if(D[b]===T||D[b]===S)G===""?G=D[b]:G!==D[b]||(G="");else if(D[b]===">"&&G===""){Y=!0;break}k+=D[b]}return G!==""?!1:{value:k,index:b,tagClosed:Y}}const j=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function q(D,b){const k=f.getAllMatches(D,j),G={};for(let Y=0;Y<k.length;Y++){if(k[Y][1].length===0)return Z("InvalidAttr","Attribute '"+k[Y][2]+"' has no space in starting.",V(k[Y]));if(k[Y][3]!==void 0&&k[Y][4]===void 0)return Z("InvalidAttr","Attribute '"+k[Y][2]+"' is without value.",V(k[Y]));if(k[Y][3]===void 0&&!b.allowBooleanAttributes)return Z("InvalidAttr","boolean attribute '"+k[Y][2]+"' is not allowed.",V(k[Y]));const K=k[Y][2];if(!$(K))return Z("InvalidAttr","Attribute '"+K+"' is an invalid name.",V(k[Y]));if(!G.hasOwnProperty(K))G[K]=1;else return Z("InvalidAttr","Attribute '"+K+"' is repeated.",V(k[Y]))}return!0}function H(D,b){let k=/\d/;for(D[b]==="x"&&(b++,k=/[\da-fA-F]/);b<D.length;b++){if(D[b]===";")return b;if(!D[b].match(k))break}return-1}function fe(D,b){if(b++,D[b]===";")return-1;if(D[b]==="#")return b++,H(D,b);let k=0;for(;b<D.length;b++,k++)if(!(D[b].match(/\w/)&&k<20)){if(D[b]===";")break;return-1}return b}function Z(D,b,k){return{err:{code:D,msg:b,line:k.line||k,col:k.col}}}function $(D){return f.isName(D)}function N(D){return f.isName(D)}function oe(D,b){const k=D.substring(0,b).split(/\r?\n/);return{line:k.length,col:k[k.length-1].length+1}}function V(D){return D.startIndex+D[1].length}},{"./util":4}],6:[function(i,s,c){const f=i("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(Z,$){return $},attributeValueProcessor:function(Z,$){return $},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function l(Z){this.options=Object.assign({},y,Z),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=fe),this.processTextOrObjNode=E,this.options.format?(this.indentate=H,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=q,this.buildObjNode=S):(this.buildTextNode=I,this.buildObjNode=T),this.buildTextValNode=I,this.buildObjectNode=T,this.replaceEntitiesValue=j,this.buildAttrPairStr=w}l.prototype.build=function(Z){return this.options.preserveOrder?f(Z,this.options):(Array.isArray(Z)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(Z={[this.options.arrayNodeName]:Z}),this.j2x(Z,0).val)},l.prototype.j2x=function(Z,$){let N="",oe="";for(let V in Z)if(!(typeof Z[V]>"u"))if(Z[V]===null)V[0]==="?"?oe+=this.indentate($)+"<"+V+"?"+this.tagEndChar:oe+=this.indentate($)+"<"+V+"/"+this.tagEndChar;else if(Z[V]instanceof Date)oe+=this.buildTextNode(Z[V],V,"",$);else if(typeof Z[V]!="object"){const D=this.isAttribute(V);if(D)N+=this.buildAttrPairStr(D,""+Z[V]);else if(V===this.options.textNodeName){let b=this.options.tagValueProcessor(V,""+Z[V]);oe+=this.replaceEntitiesValue(b)}else oe+=this.buildTextNode(Z[V],V,"",$)}else if(Array.isArray(Z[V])){const D=Z[V].length;for(let b=0;b<D;b++){const k=Z[V][b];typeof k>"u"||(k===null?V[0]==="?"?oe+=this.indentate($)+"<"+V+"?"+this.tagEndChar:oe+=this.indentate($)+"<"+V+"/"+this.tagEndChar:typeof k=="object"?oe+=this.processTextOrObjNode(k,V,$):oe+=this.buildTextNode(k,V,"",$))}}else if(this.options.attributesGroupName&&V===this.options.attributesGroupName){const D=Object.keys(Z[V]),b=D.length;for(let k=0;k<b;k++)N+=this.buildAttrPairStr(D[k],""+Z[V][D[k]])}else oe+=this.processTextOrObjNode(Z[V],V,$);return{attrStr:N,val:oe}};function w(Z,$){return $=this.options.attributeValueProcessor(Z,""+$),$=this.replaceEntitiesValue($),this.options.suppressBooleanAttributes&&$==="true"?" "+Z:" "+Z+'="'+$+'"'}function E(Z,$,N){const oe=this.j2x(Z,N+1);return Z[this.options.textNodeName]!==void 0&&Object.keys(Z).length===1?this.buildTextNode(Z[this.options.textNodeName],$,oe.attrStr,N):this.buildObjNode(oe.val,$,oe.attrStr,N)}function T(Z,$,N,oe){let V="</"+$+this.tagEndChar,D="";return $[0]==="?"&&(D="?",V=""),N&&Z.indexOf("<")===-1?this.indentate(oe)+"<"+$+N+D+">"+Z+V:this.options.commentPropName!==!1&&$===this.options.commentPropName&&D.length===0?this.indentate(oe)+`<!--${Z}-->`+this.newLine:this.indentate(oe)+"<"+$+N+D+this.tagEndChar+Z+this.indentate(oe)+V}function S(Z,$,N,oe){return Z!==""?this.buildObjectNode(Z,$,N,oe):$[0]==="?"?this.indentate(oe)+"<"+$+N+"?"+this.tagEndChar:this.indentate(oe)+"<"+$+N+"/"+this.tagEndChar}function I(Z,$,N,oe){if(this.options.cdataPropName!==!1&&$===this.options.cdataPropName)return this.indentate(oe)+`<![CDATA[${Z}]]>`+this.newLine;if(this.options.commentPropName!==!1&&$===this.options.commentPropName)return this.indentate(oe)+`<!--${Z}-->`+this.newLine;{let V=this.options.tagValueProcessor($,Z);return V=this.replaceEntitiesValue(V),V===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+$+this.tagEndChar:this.indentate(oe)+"<"+$+"/"+this.tagEndChar:this.indentate(oe)+"<"+$+N+">"+V+"</"+$+this.tagEndChar}}function j(Z){if(Z&&Z.length>0&&this.options.processEntities)for(let $=0;$<this.options.entities.length;$++){const N=this.options.entities[$];Z=Z.replace(N.regex,N.val)}return Z}function q(Z,$,N,oe){return Z===""&&this.options.unpairedTags.indexOf($)!==-1?this.options.suppressUnpairedNode?this.indentate(oe)+"<"+$+this.tagEndChar:this.indentate(oe)+"<"+$+"/"+this.tagEndChar:Z!==""?this.buildTextValNode(Z,$,N,oe):$[0]==="?"?this.indentate(oe)+"<"+$+N+"?"+this.tagEndChar:this.indentate(oe)+"<"+$+N+"/"+this.tagEndChar}function H(Z){return this.options.indentBy.repeat(Z)}function fe(Z){return Z.startsWith(this.options.attributeNamePrefix)?Z.substr(this.attrPrefixLen):!1}s.exports=l},{"./orderedJs2Xml":7}],7:[function(i,s,c){const f=`
`;function y(I,j){return l(I,j,"",0)}function l(I,j,q,H){let fe="",Z="";j.format&&j.indentBy.length>0&&(Z=f+""+j.indentBy.repeat(H));for(let $=0;$<I.length;$++){const N=I[$],oe=w(N);let V="";if(q.length===0?V=oe:V=`${q}.${oe}`,oe===j.textNodeName){let G=N[oe];T(V,j)||(G=j.tagValueProcessor(oe,G),G=S(G,j)),fe+=Z+G;continue}else if(oe===j.cdataPropName){fe+=Z+`<![CDATA[${N[oe][0][j.textNodeName]}]]>`;continue}else if(oe===j.commentPropName){fe+=Z+`<!--${N[oe][0][j.textNodeName]}-->`;continue}else if(oe[0]==="?"){const G=E(N[":@"],j),Y=oe==="?xml"?"":Z;let K=N[oe][0][j.textNodeName];K=K.length!==0?" "+K:"",fe+=Y+`<${oe}${K}${G}?>`;continue}const D=E(N[":@"],j);let b=Z+`<${oe}${D}`,k=l(N[oe],j,V,H+1);j.unpairedTags.indexOf(oe)!==-1?j.suppressUnpairedNode?fe+=b+">":fe+=b+"/>":(!k||k.length===0)&&j.suppressEmptyNode?fe+=b+"/>":fe+=b+`>${k}${Z}</${oe}>`}return fe}function w(I){const j=Object.keys(I);for(let q=0;q<j.length;q++){const H=j[q];if(H!==":@")return H}}function E(I,j){let q="";if(I&&!j.ignoreAttributes)for(let H in I){let fe=j.attributeValueProcessor(H,I[H]);fe=S(fe,j),fe===!0&&j.suppressBooleanAttributes?q+=` ${H.substr(j.attributeNamePrefix.length)}`:q+=` ${H.substr(j.attributeNamePrefix.length)}="${fe}"`}return q}function T(I,j){I=I.substr(0,I.length-j.textNodeName.length-1);let q=I.substr(I.lastIndexOf(".")+1);for(let H in j.stopNodes)if(j.stopNodes[H]===I||j.stopNodes[H]==="*."+q)return!0;return!1}function S(I,j){if(I&&I.length>0&&j.processEntities)for(let q=0;q<j.entities.length;q++){const H=j.entities[q];I=I.replace(H.regex,H.val)}return I}s.exports=y},{}],8:[function(i,s,c){function f(w,E){const T={};if(w[E+3]==="O"&&w[E+4]==="C"&&w[E+5]==="T"&&w[E+6]==="Y"&&w[E+7]==="P"&&w[E+8]==="E"){E=E+9;let S=1,I=!1,j=!1,q=!1,H="";for(;E<w.length;E++)if(w[E]==="<"){if(I&&w[E+1]==="!"&&w[E+2]==="E"&&w[E+3]==="N"&&w[E+4]==="T"&&w[E+5]==="I"&&w[E+6]==="T"&&w[E+7]==="Y")E+=7,j=!0;else if(I&&w[E+1]==="!"&&w[E+2]==="E"&&w[E+3]==="L"&&w[E+4]==="E"&&w[E+5]==="M"&&w[E+6]==="E"&&w[E+7]==="N"&&w[E+8]==="T")E+=8;else if(w[E+1]==="!"&&w[E+2]==="-"&&w[E+3]==="-")q=!0;else throw new Error("Invalid DOCTYPE");S++,H=""}else if(w[E]===">"){if(q)if(w[E-1]==="-"&&w[E-2]==="-")q=!1;else throw new Error("Invalid XML comment in DOCTYPE");else j&&(l(H,T),j=!1);if(S--,S===0)break}else w[E]==="["?I=!0:H+=w[E];if(S!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:T,i:E}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function l(w,E){const T=y.exec(w);T&&(E[T[1]]={regx:RegExp(`&${T[1]};`,"g"),val:T[3]})}s.exports=f},{}],9:[function(i,s,c){const f={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(l,w){return w},attributeValueProcessor:function(l,w){return w},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},y=function(l){return Object.assign({},f,l)};c.buildOptions=y,c.defaultOptions=f},{}],10:[function(i,s,c){const f=i("../util"),y=i("./xmlNode"),l=i("./DocTypeReader"),w=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,f.nameRegexp);class E{constructor(G){this.options=G,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=T,this.parseXml=H,this.parseTextData=S,this.resolveNameSpace=I,this.buildAttributesMap=q,this.isItStopNode=$,this.replaceEntitiesValue=fe,this.readStopNodeData=D,this.saveTextToParentTag=Z}}function T(k){const G=Object.keys(k);for(let Y=0;Y<G.length;Y++){const K=G[Y];this.lastEntities[K]={regex:new RegExp("&"+K+";","g"),val:k[K]}}}function S(k,G,Y,K,pe,_e,be){if(k!==void 0&&(this.options.trimValues&&!K&&(k=k.trim()),k.length>0)){be||(k=this.replaceEntitiesValue(k));const Q=this.options.tagValueProcessor(G,k,Y,pe,_e);return Q==null?k:typeof Q!=typeof k||Q!==k?Q:this.options.trimValues?b(k,this.options.parseTagValue,this.options.numberParseOptions):k.trim()===k?b(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function I(k){if(this.options.removeNSPrefix){const G=k.split(":"),Y=k.charAt(0)==="/"?"/":"";if(G[0]==="xmlns")return"";G.length===2&&(k=Y+G[1])}return k}const j=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function q(k,G){if(!this.options.ignoreAttributes&&typeof k=="string"){const Y=f.getAllMatches(k,j),K=Y.length,pe={};for(let _e=0;_e<K;_e++){const be=this.resolveNameSpace(Y[_e][1]);let Q=Y[_e][4];const re=this.options.attributeNamePrefix+be;if(be.length)if(Q!==void 0){this.options.trimValues&&(Q=Q.trim()),Q=this.replaceEntitiesValue(Q);const ne=this.options.attributeValueProcessor(be,Q,G);ne==null?pe[re]=Q:typeof ne!=typeof Q||ne!==Q?pe[re]=ne:pe[re]=b(Q,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(pe[re]=!0)}if(!Object.keys(pe).length)return;if(this.options.attributesGroupName){const _e={};return _e[this.options.attributesGroupName]=pe,_e}return pe}}const H=function(k){k=k.replace(/\r\n?/g,`
`);const G=new y("!xml");let Y=G,K="",pe="";for(let _e=0;_e<k.length;_e++)if(k[_e]==="<")if(k[_e+1]==="/"){const Q=oe(k,">",_e,"Closing Tag is not closed.");let re=k.substring(_e+2,Q).trim();if(this.options.removeNSPrefix){const ne=re.indexOf(":");ne!==-1&&(re=re.substr(ne+1))}Y&&(K=this.saveTextToParentTag(K,Y,pe)),pe=pe.substr(0,pe.lastIndexOf(".")),Y=this.tagsNodeStack.pop(),K="",_e=Q}else if(k[_e+1]==="?"){let Q=V(k,_e,!1,"?>");if(!Q)throw new Error("Pi Tag is not closed.");if(K=this.saveTextToParentTag(K,Y,pe),!(this.options.ignoreDeclaration&&Q.tagName==="?xml"||this.options.ignorePiTags)){const re=new y(Q.tagName);re.add(this.options.textNodeName,""),Q.tagName!==Q.tagExp&&Q.attrExpPresent&&(re[":@"]=this.buildAttributesMap(Q.tagExp,pe)),Y.addChild(re)}_e=Q.closeIndex+1}else if(k.substr(_e+1,3)==="!--"){const Q=oe(k,"-->",_e+4,"Comment is not closed.");if(this.options.commentPropName){const re=k.substring(_e+4,Q-2);K=this.saveTextToParentTag(K,Y,pe),Y.add(this.options.commentPropName,[{[this.options.textNodeName]:re}])}_e=Q}else if(k.substr(_e+1,2)==="!D"){const Q=l(k,_e);this.docTypeEntities=Q.entities,_e=Q.i}else if(k.substr(_e+1,2)==="!["){const Q=oe(k,"]]>",_e,"CDATA is not closed.")-2,re=k.substring(_e+9,Q);if(K=this.saveTextToParentTag(K,Y,pe),this.options.cdataPropName)Y.add(this.options.cdataPropName,[{[this.options.textNodeName]:re}]);else{let ne=this.parseTextData(re,Y.tagname,pe,!0,!1,!0);ne||(ne=""),Y.add(this.options.textNodeName,ne)}_e=Q+2}else{let Q=V(k,_e,this.options.removeNSPrefix),re=Q.tagName,ne=Q.tagExp,te=Q.attrExpPresent,ce=Q.closeIndex;Y&&K&&Y.tagname!=="!xml"&&(K=this.saveTextToParentTag(K,Y,pe,!1)),re!==G.tagname&&(pe+=pe?"."+re:re);const xe=Y;if(xe&&this.options.unpairedTags.indexOf(xe.tagname)!==-1&&(Y=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,pe,re)){let we="";if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)_e=Q.closeIndex;else if(this.options.unpairedTags.indexOf(re)!==-1)_e=Q.closeIndex;else{const Pe=this.readStopNodeData(k,re,ce+1);if(!Pe)throw new Error(`Unexpected end of ${re}`);_e=Pe.i,we=Pe.tagContent}const De=new y(re);re!==ne&&te&&(De[":@"]=this.buildAttributesMap(ne,pe)),we&&(we=this.parseTextData(we,re,pe,!0,te,!0,!0)),pe=pe.substr(0,pe.lastIndexOf(".")),De.add(this.options.textNodeName,we),Y.addChild(De)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){re[re.length-1]==="/"?(re=re.substr(0,re.length-1),ne=re):ne=ne.substr(0,ne.length-1);const we=new y(re);re!==ne&&te&&(we[":@"]=this.buildAttributesMap(ne,pe)),pe=pe.substr(0,pe.lastIndexOf(".")),Y.addChild(we)}else{const we=new y(re);this.tagsNodeStack.push(Y),re!==ne&&te&&(we[":@"]=this.buildAttributesMap(ne,pe)),Y.addChild(we),Y=we}K="",_e=ce}}else K+=k[_e];return G.child},fe=function(k){if(this.options.processEntities){for(let G in this.docTypeEntities){const Y=this.docTypeEntities[G];k=k.replace(Y.regx,Y.val)}for(let G in this.lastEntities){const Y=this.lastEntities[G];k=k.replace(Y.regex,Y.val)}if(this.options.htmlEntities)for(let G in this.htmlEntities){const Y=this.htmlEntities[G];k=k.replace(Y.regex,Y.val)}}return k};function Z(k,G,Y,K){return k&&(K===void 0&&(K=Object.keys(G.child).length===0),k=this.parseTextData(k,G.tagname,Y,!1,G[":@"]?Object.keys(G[":@"]).length!==0:!1,K),k!==void 0&&k!==""&&G.add(this.options.textNodeName,k),k=""),k}function $(k,G,Y){const K="*."+Y;for(const pe in k){const _e=k[pe];if(K===_e||G===_e)return!0}return!1}function N(k,G,Y=">"){let K,pe="";for(let _e=G;_e<k.length;_e++){let be=k[_e];if(K)be===K&&(K="");else if(be==='"'||be==="'")K=be;else if(be===Y[0])if(Y[1]){if(k[_e+1]===Y[1])return{data:pe,index:_e}}else return{data:pe,index:_e};else be==="	"&&(be=" ");pe+=be}}function oe(k,G,Y,K){const pe=k.indexOf(G,Y);if(pe===-1)throw new Error(K);return pe+G.length-1}function V(k,G,Y,K=">"){const pe=N(k,G+1,K);if(!pe)return;let _e=pe.data;const be=pe.index,Q=_e.search(/\s/);let re=_e,ne=!0;if(Q!==-1&&(re=_e.substr(0,Q).replace(/\s\s*$/,""),_e=_e.substr(Q+1)),Y){const te=re.indexOf(":");te!==-1&&(re=re.substr(te+1),ne=re!==pe.data.substr(te+1))}return{tagName:re,tagExp:_e,closeIndex:be,attrExpPresent:ne}}function D(k,G,Y){const K=Y;for(;Y<k.length;Y++)if(k[Y]==="<"&&k[Y+1]==="/"){const pe=oe(k,">",Y,`${G} is not closed`);if(k.substring(Y+2,pe).trim()===G)return{tagContent:k.substring(K,Y),i:pe};Y=pe}}function b(k,G,Y){if(G&&typeof k=="string"){const K=k.trim();return K==="true"?!0:K==="false"?!1:w(k,Y)}else return f.isExist(k)?k:""}s.exports=E},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,s,c){const{buildOptions:f}=i("./OptionsBuilder"),y=i("./OrderedObjParser"),{prettify:l}=i("./node2json"),w=i("../validator");class E{constructor(S){this.externalEntities={},this.options=f(S)}parse(S,I){if(typeof S!="string")if(S.toString)S=S.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(I){I===!0&&(I={});const H=w.validate(S,I);if(H!==!0)throw Error(`${H.err.msg}:${H.err.line}:${H.err.col}`)}const j=new y(this.options);j.addExternalEntities(this.externalEntities);const q=j.parseXml(S);return this.options.preserveOrder||q===void 0?q:l(q,this.options)}addEntity(S,I){if(I.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(S.indexOf("&")!==-1||S.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[S]=I}}s.exports=E},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,s,c){function f(T,S){return y(T,S)}function y(T,S,I){let j;const q={};for(let H=0;H<T.length;H++){const fe=T[H],Z=l(fe);let $="";if(I===void 0?$=Z:$=I+"."+Z,Z===S.textNodeName)j===void 0?j=fe[Z]:j+=""+fe[Z];else{if(Z===void 0)continue;if(fe[Z]){let N=y(fe[Z],S,$);const oe=E(N,S);fe[":@"]?w(N,fe[":@"],$,S):Object.keys(N).length===1&&N[S.textNodeName]!==void 0&&!S.alwaysCreateTextNode?N=N[S.textNodeName]:Object.keys(N).length===0&&(S.alwaysCreateTextNode?N[S.textNodeName]="":N=""),q[Z]!==void 0?(Array.isArray(q[Z])||(q[Z]=[q[Z]]),q[Z].push(N)):S.isArray(Z,$,oe)?q[Z]=[N]:q[Z]=N}}}return typeof j=="string"?j.length>0&&(q[S.textNodeName]=j):j!==void 0&&(q[S.textNodeName]=j),q}function l(T){const S=Object.keys(T);for(let I=0;I<S.length;I++){const j=S[I];if(j!==":@")return j}}function w(T,S,I,j){if(S){const q=Object.keys(S),H=q.length;for(let fe=0;fe<H;fe++){const Z=q[fe];j.isArray(Z,I+"."+Z,!0,!0)?T[Z]=[S[Z]]:T[Z]=S[Z]}}}function E(T,S){const I=Object.keys(T).length;return!!(I===0||I===1&&T[S.textNodeName])}c.prettify=f},{}],13:[function(i,s,c){class f{constructor(l){this.tagname=l,this.child=[],this[":@"]={}}add(l,w){this.child.push({[l]:w})}addChild(l){l[":@"]&&Object.keys(l[":@"]).length>0?this.child.push({[l.tagname]:l.child,[":@"]:l[":@"]}):this.child.push({[l.tagname]:l.child})}}s.exports=f},{}],14:[function(i,s,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(f,y,l,w,E){var T,S,I=E*8-w-1,j=(1<<I)-1,q=j>>1,H=-7,fe=l?E-1:0,Z=l?-1:1,$=f[y+fe];for(fe+=Z,T=$&(1<<-H)-1,$>>=-H,H+=I;H>0;T=T*256+f[y+fe],fe+=Z,H-=8);for(S=T&(1<<-H)-1,T>>=-H,H+=w;H>0;S=S*256+f[y+fe],fe+=Z,H-=8);if(T===0)T=1-q;else{if(T===j)return S?NaN:($?-1:1)*(1/0);S=S+Math.pow(2,w),T=T-q}return($?-1:1)*S*Math.pow(2,T-w)},c.write=function(f,y,l,w,E,T){var S,I,j,q=T*8-E-1,H=(1<<q)-1,fe=H>>1,Z=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=w?0:T-1,N=w?1:-1,oe=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(I=isNaN(y)?1:0,S=H):(S=Math.floor(Math.log(y)/Math.LN2),y*(j=Math.pow(2,-S))<1&&(S--,j*=2),S+fe>=1?y+=Z/j:y+=Z*Math.pow(2,1-fe),y*j>=2&&(S++,j/=2),S+fe>=H?(I=0,S=H):S+fe>=1?(I=(y*j-1)*Math.pow(2,E),S=S+fe):(I=y*Math.pow(2,fe-1)*Math.pow(2,E),S=0));E>=8;f[l+$]=I&255,$+=N,I/=256,E-=8);for(S=S<<E|I,q+=E;q>0;f[l+$]=S&255,$+=N,S/=256,q-=8);f[l+$-N]|=oe*128}},{}],15:[function(i,s,c){const f=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const l={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function w(T,S={}){if(S=Object.assign({},l,S),!T||typeof T!="string")return T;let I=T.trim();if(S.skipLike!==void 0&&S.skipLike.test(I))return T;if(S.hex&&f.test(I))return Number.parseInt(I,16);{const j=y.exec(I);if(j){const q=j[1],H=j[2];let fe=E(j[3]);const Z=j[4]||j[6];if(!S.leadingZeros&&H.length>0&&q&&I[2]!==".")return T;if(!S.leadingZeros&&H.length>0&&!q&&I[1]!==".")return T;{const $=Number(I),N=""+$;return N.search(/[eE]/)!==-1||Z?S.eNotation?$:T:I.indexOf(".")!==-1?N==="0"&&fe===""||N===fe||q&&N==="-"+fe?$:T:H?fe===N||q+fe===N?$:T:I===N||I===q+N?$:T}}else return T}}function E(T){return T&&T.indexOf(".")!==-1&&(T=T.replace(/0+$/,""),T==="."?T="0":T[0]==="."?T="0"+T:T[T.length-1]==="."&&(T=T.substr(0,T.length-1))),T}s.exports=w},{}],16:[function(i,s,c){(function(f){(function(){var y=this&&this.__awaiter||function(I,j,q,H){function fe(Z){return Z instanceof q?Z:new q(function($){$(Z)})}return new(q||(q=Promise))(function(Z,$){function N(D){try{V(H.next(D))}catch(b){$(b)}}function oe(D){try{V(H.throw(D))}catch(b){$(b)}}function V(D){D.done?Z(D.value):fe(D.value).then(N,oe)}V((H=H.apply(I,j||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const l=i("../auth"),w=i("../config"),E=i("./_xml"),T=I=>typeof btoa>"u"?f.from(I,"binary").toString("base64"):btoa(I);function S(I,j,q){return y(this,void 0,void 0,function*(){const{apiUrl:H,authHeader:fe,basicAuth:Z,userAgent:$}=(0,w.getConfig)(),N=Z&&`Basic ${T(`${Z.username}:${Z.password}`)}`,oe=(0,l.getAuthToken)()&&`Bearer ${(0,l.getAuthToken)()}`;let V=new URLSearchParams(j).toString();V&&(V=`?${V}`);const D=yield fetch(`${H}/api${I}${V}`,Object.assign(Object.assign({},q),{headers:Object.assign({Authorization:fe||N||oe||"","User-Agent":$},q==null?void 0:q.headers)})),b=D.headers.get("Content-Type");if(b!=null&&b.startsWith("application/xml")){const k=yield D.text();return yield E.xmlParser.parse(k)}if(b!=null&&b.startsWith("application/json"))return D.json();if(D.ok)return yield D.text();throw new Error(`OSM API: ${yield D.text()}`)})}c.osmFetch=S}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,s,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const f=i("fast-xml-parser");c.xmlParser=new f.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],18:[function(i,s,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const f=i("fast-xml-parser"),y=new f.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function l(T){return y.build({osm:{changeset:{tag:Object.entries(T).map(([S,I])=>({$k:S,$v:I}))}}})}c.createChangesetMetaXml=l;const w=(T,S,I)=>S.reduce((j,q)=>{const H={$id:q.id,$version:I?0:q.version,$changeset:T,tag:Object.entries(q.tags||{}).map(([fe,Z])=>({$k:fe,$v:Z}))};switch(q.type){case"node":{const fe=Object.assign(Object.assign({},H),{$lat:q.lat,$lon:q.lon});return Object.assign(Object.assign({},j),{node:[...j.node,fe]})}case"way":{if(!q.nodes)throw new Error("Way has no nodes");const fe=Object.assign(Object.assign({},H),{nd:q.nodes.map(Z=>({$ref:Z}))});return Object.assign(Object.assign({},j),{way:[...j.way,fe]})}case"relation":{if(!q.members)throw new Error("Relation has no members");const fe=Object.assign(Object.assign({},H),{member:q.members.map(Z=>({$type:Z.type,$ref:Z.ref,$role:Z.role}))});return Object.assign(Object.assign({},j),{relation:[...j.relation,fe]})}default:return j}},{node:[],way:[],relation:[]});function E(T,S,I){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},I),{create:[w(T,S.create,!0)],modify:[w(T,S.modify)],delete:[Object.assign({"$if-unused":!0},w(T,S.delete))]})})}c.createOsmChangeXml=E},{"fast-xml-parser":3}],19:[function(i,s,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const f=i("../_xml");function y(T){return{changeset:+T.$.changeset,id:+T.$.id,timestamp:T.$.timestamp,uid:+T.$.uid,user:T.$.user,version:+T.$.version,tags:T.tag?Object.fromEntries(T.tag.map(S=>[S.$.k,S.$.v])):void 0}}const l=T=>{const S=[];if(T.node){const I=T.node.map(j=>Object.assign(Object.assign({type:"node"},y(j)),{lat:+j.$.lat,lon:+j.$.lon}));S.push(...I)}if(T.way){const I=T.way.map(j=>{var q;return Object.assign(Object.assign({type:"way"},y(j)),{nodes:((q=j.nd)===null||q===void 0?void 0:q.map(H=>+H.$.ref))||[]})});S.push(...I)}if(T.relation){const I=T.relation.map(j=>{var q;return Object.assign(Object.assign({type:"relation"},y(j)),{members:((q=j.member)===null||q===void 0?void 0:q.map(H=>({ref:+H.$.ref,role:H.$.role,type:H.$.type})))||[]})});S.push(...I)}return S};function w(T){var S,I,j;return{create:((S=T.osmChange[0].create)===null||S===void 0?void 0:S.flatMap(l))||[],modify:((I=T.osmChange[0].modify)===null||I===void 0?void 0:I.flatMap(l))||[],delete:((j=T.osmChange[0].delete)===null||j===void 0?void 0:j.flatMap(l))||[]}}c.parseOsmChangeJson=w;function E(T){const S=f.xmlParser.parse(T);return w(S)}c.parseOsmChangeXml=E},{"../_xml":17}],20:[function(i,s,c){var f=this&&this.__awaiter||function(w,E,T,S){function I(j){return j instanceof T?j:new T(function(q){q(j)})}return new(T||(T=Promise))(function(j,q){function H($){try{Z(S.next($))}catch(N){q(N)}}function fe($){try{Z(S.throw($))}catch(N){q(N)}}function Z($){$.done?j($.value):I($.value).then(H,fe)}Z((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=i("../_osmFetch");function l(w,E){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${w}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(E)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=l},{"../_osmFetch":16}],21:[function(i,s,c){var f=this&&this.__awaiter||function(E,T,S,I){function j(q){return q instanceof S?q:new S(function(H){H(q)})}return new(S||(S=Promise))(function(q,H){function fe(N){try{$(I.next(N))}catch(oe){H(oe)}}function Z(N){try{$(I.throw(N))}catch(oe){H(oe)}}function $(N){N.done?q(N.value):j(N.value).then(fe,Z)}$((I=I.apply(E,T||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=i("../_osmFetch"),l=i("./_parseOsmChangeXml");function w(E){return f(this,void 0,void 0,function*(){const T=yield(0,y.osmFetch)(`/0.6/changeset/${E}/download`);return(0,l.parseOsmChangeJson)(T)})}c.getChangesetDiff=w},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,s,c){var f=this&&this.__awaiter||function(S,I,j,q){function H(fe){return fe instanceof j?fe:new j(function(Z){Z(fe)})}return new(j||(j=Promise))(function(fe,Z){function $(V){try{oe(q.next(V))}catch(D){Z(D)}}function N(V){try{oe(q.throw(V))}catch(D){Z(D)}}function oe(V){V.done?fe(V.value):H(V.value).then($,N)}oe((q=q.apply(S,I||[])).next())})},y=this&&this.__rest||function(S,I){var j={};for(var q in S)Object.prototype.hasOwnProperty.call(S,q)&&I.indexOf(q)<0&&(j[q]=S[q]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,q=Object.getOwnPropertySymbols(S);H<q.length;H++)I.indexOf(q[H])<0&&Object.prototype.propertyIsEnumerable.call(S,q[H])&&(j[q[H]]=S[q[H]]);return j};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const l=i("../_osmFetch"),w=S=>{var I;return{id:+S.$.id,created_at:new Date(S.$.created_at),closed_at:new Date(S.$.closed_at),open:S.$.open==="true",comments_count:+S.$.comments_count,changes_count:+S.$.changes_count,min_lat:+S.$.min_lat,min_lon:+S.$.min_lon,max_lat:+S.$.max_lat,max_lon:+S.$.max_lon,uid:+S.$.uid,user:S.$.user,tags:Object.fromEntries(S.tag.map(j=>[j.$.k,j.$.v])),discussion:(I=S.discussion)===null||I===void 0?void 0:I[0].comment.map(j=>({date:new Date(j.$.date),user:j.$.user,uid:j.$.uid,text:j.text[0]}))}};function E(S){var I;return f(this,void 0,void 0,function*(){const{only:j}=S,q=y(S,["only"]);return((I=(yield(0,l.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},j&&{[j]:!0}),q))).osm[0].changeset)===null||I===void 0?void 0:I.map(w))||[]})}c.listChangesets=E;function T(S,I=!0){return f(this,void 0,void 0,function*(){return(yield(0,l.osmFetch)(`/0.6/changeset/${S}`,{include_discussion:I})).osm[0].changeset.map(w)[0]})}c.getChangeset=T},{"../_osmFetch":16}],23:[function(i,s,c){var f=this&&this.__createBinding||(Object.create?function(E,T,S,I){I===void 0&&(I=S);var j=Object.getOwnPropertyDescriptor(T,S);(!j||("get"in j?!T.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return T[S]}}),Object.defineProperty(E,I,j)}:function(E,T,S,I){I===void 0&&(I=S),E[I]=T[S]}),y=this&&this.__exportStar||function(E,T){for(var S in E)S!=="default"&&!Object.prototype.hasOwnProperty.call(T,S)&&f(T,E,S)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(i("./createChangesetComment"),c),y(i("./getChangesetDiff"),c),y(i("./getChangesets"),c),y(i("./uploadChangeset"),c);var l=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return l.parseOsmChangeXml}});var w=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return w.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,s,c){var f=this&&this.__awaiter||function(E,T,S,I){function j(q){return q instanceof S?q:new S(function(H){H(q)})}return new(S||(S=Promise))(function(q,H){function fe(N){try{$(I.next(N))}catch(oe){H(oe)}}function Z(N){try{$(I.throw(N))}catch(oe){H(oe)}}function $(N){N.done?q(N.value):j(N.value).then(fe,Z)}$((I=I.apply(E,T||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=i("../_osmFetch"),l=i("./_createOsmChangeXml");function w(E,T){return f(this,void 0,void 0,function*(){const S=(0,l.createChangesetMetaXml)(E),I=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:S,headers:{"content-type":"application/xml; charset=utf-8"}})),j=(0,l.createOsmChangeXml)(I,T);return yield(0,y.osmFetch)(`/0.6/changeset/${I}/upload`,void 0,{method:"POST",body:j,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${I}/close`,void 0,{method:"PUT"}),+I})}c.uploadChangeset=w},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,s,c){var f=this&&this.__awaiter||function(w,E,T,S){function I(j){return j instanceof T?j:new T(function(q){q(j)})}return new(T||(T=Promise))(function(j,q){function H($){try{Z(S.next($))}catch(N){q(N)}}function fe($){try{Z(S.throw($))}catch(N){q(N)}}function Z($){$.done?j($.value):I($.value).then(H,fe)}Z((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=i("./_osmFetch");function l(){return f(this,void 0,void 0,function*(){const w=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+w.osm[0].api[0].area[0].$.maximum,maxNoteArea:+w.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+w.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+w.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+w.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+w.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:w.osm[0].policy[0].imagery[0].blacklist.map(T=>T.$.regex)}}})}c.getCapabilities=l},{"./_osmFetch":16}],26:[function(i,s,c){var f=this&&this.__awaiter||function(j,q,H,fe){function Z($){return $ instanceof H?$:new H(function(N){N($)})}return new(H||(H=Promise))(function($,N){function oe(b){try{D(fe.next(b))}catch(k){N(k)}}function V(b){try{D(fe.throw(b))}catch(k){N(k)}}function D(b){b.done?$(b.value):Z(b.value).then(oe,V)}D((fe=fe.apply(j,q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=i("./_osmFetch");function l(j,q,H){return f(this,void 0,void 0,function*(){const fe=H&&j!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${j}/${q}${fe}.json`)).elements})}c.getFeature=l;function w(j,q){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}s.json?${j}s=${q.join(",")}`)).elements})}c.getFeatures=w;function E(j,q,H){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}/${q}/${H}.json`)).elements[0]})}c.getFeatureAtVersion=E;function T(j,q){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}/${q}/history.json`)).elements})}c.getFeatureHistory=T;function S(j){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${j}/ways.json`)).elements})}c.getWaysForNode=S;function I(j,q){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}/${q}/relations.json`)).elements})}c.getRelationsForElement=I},{"./_osmFetch":16}],27:[function(i,s,c){var f=this&&this.__awaiter||function(w,E,T,S){function I(j){return j instanceof T?j:new T(function(q){q(j)})}return new(T||(T=Promise))(function(j,q){function H($){try{Z(S.next($))}catch(N){q(N)}}function fe($){try{Z(S.throw($))}catch(N){q(N)}}function Z($){$.done?j($.value):I($.value).then(H,fe)}Z((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=i("./_osmFetch");function l(w){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:w})).elements})}c.getMapData=l},{"./_osmFetch":16}],28:[function(i,s,c){var f=this&&this.__awaiter||function(w,E,T,S){function I(j){return j instanceof T?j:new T(function(q){q(j)})}return new(T||(T=Promise))(function(j,q){function H($){try{Z(S.next($))}catch(N){q(N)}}function fe($){try{Z(S.throw($))}catch(N){q(N)}}function Z($){$.done?j($.value):I($.value).then(H,fe)}Z((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=i("./changesets");function l(w){return f(this,void 0,void 0,function*(){const E=yield(0,y.listChangesets)({display_name:w});if(!E.length)throw new Error("Could not get uid because the user has never edited the map");return E[0].uid})}c.getUIdFromDisplayName=l},{"./changesets":23}],29:[function(i,s,c){var f=this&&this.__awaiter||function(E,T,S,I){function j(q){return q instanceof S?q:new S(function(H){H(q)})}return new(S||(S=Promise))(function(q,H){function fe(N){try{$(I.next(N))}catch(oe){H(oe)}}function Z(N){try{$(I.throw(N))}catch(oe){H(oe)}}function $(N){N.done?q(N.value):j(N.value).then(fe,Z)}$((I=I.apply(E,T||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=i("./_osmFetch");function l(E){return f(this,void 0,void 0,function*(){const T=yield(0,y.osmFetch)(`/0.6/user/${E==="me"?"details":E}.json`);return Object.assign(Object.assign({},T.user),{account_created:new Date(T.user.account_created)})})}c.getUser=l;function w(E){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:E})).users.map(S=>Object.assign(Object.assign({},S),{account_created:new Date(S.account_created)}))})}c.getUsers=w},{"./_osmFetch":16}],30:[function(i,s,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E);var S=Object.getOwnPropertyDescriptor(w,E);(!S||("get"in S?!w.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,T,S)}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),y=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./notes"),c),y(i("./getCapabilities"),c),y(i("./getFeature"),c),y(i("./getMapData"),c),y(i("./getUIdFromDisplayName"),c),y(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,s,c){var f=this&&this.__awaiter||function(I,j,q,H){function fe(Z){return Z instanceof q?Z:new q(function($){$(Z)})}return new(q||(q=Promise))(function(Z,$){function N(D){try{V(H.next(D))}catch(b){$(b)}}function oe(D){try{V(H.throw(D))}catch(b){$(b)}}function V(D){D.done?Z(D.value):fe(D.value).then(N,oe)}V((H=H.apply(I,j||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=i("../_osmFetch"),l=I=>{const[j,q]=I.geometry.coordinates;return Object.assign(Object.assign({},I.properties),{location:{lat:q,lng:j}})};function w(I,j){return f(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${j?"/search":""}.json`,I)).features.map(l)})}function E(I){return w(I,!0)}c.getNotesForQuery=E;function T(I){return w({bbox:I},!1)}c.getNotesForArea=T;function S(I){return f(this,void 0,void 0,function*(){const j=yield(0,y.osmFetch)(`/0.6/notes/${I}.json`);return l(j)})}c.getNote=S},{"../_osmFetch":16}],32:[function(i,s,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E);var S=Object.getOwnPropertyDescriptor(w,E);(!S||("get"in S?!w.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,T,S)}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),y=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./getNotes"),c),y(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,s,c){var f=this&&this.__awaiter||function(T,S,I,j){function q(H){return H instanceof I?H:new I(function(fe){fe(H)})}return new(I||(I=Promise))(function(H,fe){function Z(oe){try{N(j.next(oe))}catch(V){fe(V)}}function $(oe){try{N(j.throw(oe))}catch(V){fe(V)}}function N(oe){oe.done?H(oe.value):q(oe.value).then(Z,$)}N((j=j.apply(T,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=i("../_osmFetch");function l(T,S,I){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:T,lon:S,text:I})})}c.createNote=l;function w(T,S){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${T}/comment`,{text:S})})}c.commentOnNote=w;function E(T,S){return f(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${T}/reopen`,{text:S})})}c.reopenNote=E},{"../_osmFetch":16}],34:[function(i,s,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function f(y){let l=!1;return new Promise((w,E)=>{const[T,S]=[600,550],I=Object.entries({width:T,height:S,left:window.screen.width/2-T/2,top:window.screen.height/2-S/2}).map(([H,fe])=>`${H}=${fe}`).join(","),j=window.open("about:blank","oauth_window",I);if(!j)throw new Error("Popup was blocked");j.location=y,window.authComplete=H=>{w(H),l=!0};const q=setInterval(()=>{j.closed&&(l||E(new Error("Cancelled")),clearInterval(q))},500)})}c.createPopup=f},{}],35:[function(i,s,c){var f=this&&this.__awaiter||function(w,E,T,S){function I(j){return j instanceof T?j:new T(function(q){q(j)})}return new(T||(T=Promise))(function(j,q){function H($){try{Z(S.next($))}catch(N){q(N)}}function fe($){try{Z(S.throw($))}catch(N){q(N)}}function Z($){$.done?j($.value):I($.value).then(H,fe)}Z((S=S.apply(w,E||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=i("./helpers");function l(w,{options:E,pkceVerifier:T,state:S}){return f(this,void 0,void 0,function*(){const I=new URL(w).searchParams,j=I.get("error_description"),q=I.get("code"),H=I.get("state");if(j)throw new Error(j);if(!q)throw new Error("No code in OAuth response");if(!T||!S)throw new Error("No login in progress");if(S!==H)throw new Error("State Mismatch");const fe={grant_type:"authorization_code",code:q,redirect_uri:E.redirectUrl,client_id:E.clientId,code_verifier:T},Z=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(fe).toString()}`,N=yield(yield fetch(Z,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in N)throw new Error(N.error_description);const oe={issuedAt:new Date(N.created_at*1e3).toISOString(),accessToken:N.access_token,scopes:N.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(oe)),delete window.authComplete,oe})}c.exchangeCode=l},{"./helpers":36}],36:[function(i,s,c){var f=this&&this.__awaiter||function(T,S,I,j){function q(H){return H instanceof I?H:new I(function(fe){fe(H)})}return new(I||(I=Promise))(function(H,fe){function Z(oe){try{N(j.next(oe))}catch(V){fe(V)}}function $(oe){try{N(j.throw(oe))}catch(V){fe(V)}}function N(oe){oe.done?H(oe.value):q(oe.value).then(Z,$)}N((j=j.apply(T,S||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=i("../config");function l(T){return f(this,void 0,void 0,function*(){const S=new TextEncoder().encode(T),I=yield window.crypto.subtle.digest("SHA-256",S);return btoa(String.fromCharCode(...new Uint8Array(I))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=l;function w(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(T=>`0${T.toString(16)}`.slice(-2)).join("")}c.getRandomString=w;function E(){let T=(0,y.getConfig)().apiUrl;return T==="https://api.openstreetmap.org"&&(T="https://www.openstreetmap.org"),T}c.getOAuthBaseUrl=E},{"../config":39}],37:[function(i,s,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E);var S=Object.getOwnPropertyDescriptor(w,E);(!S||("get"in S?!w.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,T,S)}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),y=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,s,c){var f=this&&this.__awaiter||function(j,q,H,fe){function Z($){return $ instanceof H?$:new H(function(N){N($)})}return new(H||(H=Promise))(function($,N){function oe(b){try{D(fe.next(b))}catch(k){N(k)}}function V(b){try{D(fe.throw(b))}catch(k){N(k)}}function D(b){b.done?$(b.value):Z(b.value).then(oe,V)}D((fe=fe.apply(j,q||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=i("./createPopup"),l=i("./exchangeCode"),w=i("./helpers");function E(j){return f(this,void 0,void 0,function*(){if(!j.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!j.clientId)throw new Error("You must include the 'clientId' option");if(!j.scopes)throw new Error("You must include the 'scopes' option");const q=(0,w.getRandomString)(),H=(0,w.getRandomString)(),fe=yield(0,w.sha256)(H),Z={scope:j.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:q,redirect_uri:j.redirectUrl,client_id:j.clientId,code_challenge_method:"S256",code_challenge:fe},$=`${(0,w.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(Z).toString()}`,N={state:q,pkceVerifier:H,options:j};if(j.mode==="popup"){const oe=yield(0,y.createPopup)($);return(0,l.exchangeCode)(oe,N)}if(j.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(N)),window.location.replace($);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=E,c.authReady=(()=>f(void 0,void 0,void 0,function*(){var j;if(typeof window>"u")return;const q=window.location.href,H=localStorage.getItem("__osmAuthTemp");if(new URL(q).searchParams.get("code")){if(!((j=window.opener)===null||j===void 0)&&j.authComplete)window.opener.authComplete(q),window.close();else if(H)try{const fe=JSON.parse(H);yield(0,l.exchangeCode)(q,fe),localStorage.removeItem("__osmAuthTemp")}catch(fe){console.error("OSM Auth Error",fe)}}}))();const T=()=>{try{const j=localStorage.getItem("__osmAuth");return j?JSON.parse(j).accessToken:void 0}catch{return}};c.getAuthToken=T;const S=()=>!!(0,c.getAuthToken)();c.isLoggedIn=S;function I(){localStorage.removeItem("__osmAuth")}c.logout=I},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,s,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const f={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>f;c.getConfig=y;function l(w){Object.assign(f,w)}c.configure=l},{}],40:[function(i,s,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E);var S=Object.getOwnPropertyDescriptor(w,E);(!S||("get"in S?!w.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,T,S)}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),y=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),y(i("./api"),c),y(i("./auth"),c),y(i("./config"),c),y(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,s,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,s,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,s,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,s,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,s,c){var f=this&&this.__createBinding||(Object.create?function(l,w,E,T){T===void 0&&(T=E);var S=Object.getOwnPropertyDescriptor(w,E);(!S||("get"in S?!w.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(l,T,S)}:function(l,w,E,T){T===void 0&&(T=E),l[T]=w[E]}),y=this&&this.__exportStar||function(l,w){for(var E in l)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&f(w,l,E)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./features"),c),y(i("./general"),c),y(i("./notes"),c),y(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,s,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,s,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(E5);const QT=()=>{const[e,t]=vt.useState(!1);vt.useEffect(()=>{t(Ao.isLoggedIn())},[]);const i=vt.useCallback(()=>{(async()=>(await Ao.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(Ao.isLoggedIn()),window.location.reload()))()},[]),s=vt.useCallback(()=>{(async()=>(Ao.logout(),t(!1)))()},[]);return pt.jsx(pt.Fragment,{children:e?pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:s,children:"logout"}):pt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},S5=()=>{const[e,t]=vt.useState(!1),[i,s]=vt.useState(void 0);return vt.useEffect(()=>{t(Ao.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const c=await Ao.getUser("me");s(c)})()},[e]),pt.jsx(pt.Fragment,{children:i?pt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):pt.jsx("img",{})})},T5=()=>{const[e,t]=vt.useState(!1),[i,s]=vt.useState(void 0);return vt.useEffect(()=>{t(Ao.isLoggedIn())},[]),vt.useEffect(()=>{e&&(async()=>{const c=await Ao.getUser("me");s(c)})()},[e]),pt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[pt.jsxs("div",{children:[pt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?pt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):pt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),pt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[pt.jsx("div",{children:pt.jsx(S5,{})}),pt.jsx("div",{children:pt.jsx(QT,{})})]})]})},eC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return pt.jsxs(pt.Fragment,{children:[pt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",pt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},C5=({feature:e})=>pt.jsx(pt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return pt.jsxs("div",{className:t,children:[pt.jsx("span",{className:"underline",children:t})," = ",pt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function cf(e,t,i){return parseInt(e.substr(t,i),16)}function tC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function Vy(e,t,i){return i=i<0?i+6:i>6?i-6:i,tC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function A5(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const s=e[1],c=e[2],f=e[3],y=e[4]||"";t="#"+s+s+c+c+f+f+y+y}return(i==7||i>8)&&(t=e),t}}function I5(e,t,i){let s;if(t==0){const c=tC(i*255);s=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,f=i*2-c;s=Vy(f,c,e*6+2)+Vy(f,c,e*6)+Vy(f,c,e*6-2)}return"#"+s}function rf(e,t,i){const s=[.55,.5,.5,.46,.6,.55,.55],c=s[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,I5(e,t,i)}const P5=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},qb={V:"jdenticon_config",n:"config"};var k5={};function M5(e,t){const i=typeof e=="object"&&e||k5[qb.n]||P5[qb.V]||{},s=i.lightness||{},c=i.saturation||{},f="color"in c?c.color:c,y=c.grayscale,l=i.backColor,w=i.padding;function E(S,I){let j=s[S];return j&&j.length>1||(j=I),function(q){return q=j[0]+q*(j[1]-j[0]),q<0?0:q>1?1:q}}function T(S){const I=i.hues;let j;return I&&I.length>0&&(j=I[0|.999*S*I.length]),typeof j=="number"?(j/360%1+1)%1:S}return{W:T,o:typeof f=="number"?f:.5,D:typeof y=="number"?y:0,p:E("color",[.4,.8]),F:E("grayscale",[.3,.9]),G:A5(l),X:typeof e=="number"?e:typeof w=="number"?w:t}}let fp=class{constructor(t,i){this.x=t,this.y=i}};class nC{constructor(t,i,s,c){this.q=t,this.t=i,this.H=s,this.Y=c}I(t,i,s,c){const f=this.q+this.H,y=this.t+this.H,l=this.Y;return l===1?new fp(f-i-(c||0),this.t+t):l===2?new fp(f-t-(s||0),y-i-(c||0)):l===3?new fp(this.q+i,y-t-(s||0)):new fp(this.q+t,this.t+i)}}const z5=new nC(0,0,0,0);class L5{constructor(t){this.J=t,this.u=z5}g(t,i){const s=i?-2:2,c=[];for(let f=i?t.length-2:0;f<t.length&&f>=0;f+=s)c.push(this.u.I(t[f],t[f+1]));this.J.g(c)}h(t,i,s,c){const f=this.u.I(t,i,s,s);this.J.h(f,s,c)}i(t,i,s,c,f){this.g([t,i,t+s,i,t+s,i+c,t,i+c],f)}j(t,i,s,c,f,y){const l=[t+s,i,t+s,i+c,t,i+c,t,i];l.splice((f||0)%4*2,2),this.g(l,y)}K(t,i,s,c,f){this.g([t+s/2,i,t+s,i+c/2,t+s/2,i+c,t,i+c/2],f)}}function R5(e,t,i,s){e=e%14;let c,f,y,l,w,E;e?e==1?(y=0|i*.5,l=0|i*.8,t.j(i-y,0,y,l,2)):e==2?(y=0|i/3,t.i(y,y,i-y,i-y)):e==3?(w=i*.1,E=i<6?1:i<8?2:0|i*.25,w=w>1?0|w:w>.5?1:w,t.i(E,E,i-w-E,i-w-E)):e==4?(f=0|i*.15,y=0|i*.5,t.h(i-y-f,i-y-f,y)):e==5?(w=i*.1,E=w*4,E>3&&(E=0|E),t.i(0,0,i,i),t.g([E,E,i-w,E,E+(i-E-w)/2,i-w],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(w=i*.14,E=i<4?1:i<6?2:0|i*.35,w=i<8?w:0|w,t.i(0,0,i,i),t.i(E,E,i-E-w,i-E-w,!0)):e==10?(w=i*.12,E=w*3,t.i(0,0,i,i),t.h(E,E,i-w-E,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(f=i*.25,t.i(0,0,i,i),t.K(f,f,i-f,i-f,!0)):!s&&(f=i*.4,y=i*1.2,t.h(f,f,y)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function Kb(e,t,i){e=e%4;let s;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(s=i/6,t.h(s,s,i-2*s)):t.j(0,0,i,i,0)}function O5(e,t){return e=t.W(e),[rf(e,t.D,t.F(0)),rf(e,t.o,t.p(.5)),rf(e,t.D,t.F(1)),rf(e,t.o,t.p(1)),rf(e,t.o,t.p(0))]}function F5(e,t,i){const s=M5(i,.08);s.G&&e.m(s.G);let c=e.k;const f=.5+c*s.X|0;c-=f*2;const y=new L5(e),l=0|c/4,w=0|f+c/2-l*2,E=0|f+c/2-l*2;function T(fe,Z,$,N,oe){const V=cf(t,$,1);let D=N?cf(t,N,1):0;e.L(I[j[fe]]);for(let b=0;b<oe.length;b++)y.u=new nC(w+oe[b][0]*l,E+oe[b][1]*l,l,D++%4),Z(V,y,l,b);e.M()}const S=cf(t,-7)/268435455,I=O5(S,s),j=[];let q;function H(fe){if(fe.indexOf(q)>=0){for(let Z=0;Z<fe.length;Z++)if(j.indexOf(fe[Z])>=0)return!0}}for(let fe=0;fe<3;fe++)q=cf(t,8+fe,1)%I.length,(H([0,4])||H([2,3]))&&(q=1),j.push(q);T(0,Kb,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),T(1,Kb,4,5,[[0,0],[3,0],[3,3],[0,3]]),T(2,R5,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function j5(e){var s=0,c=0,f=encodeURI(e)+"%80",y=[],l,w=[],E=1732584193,T=4023233417,S=~E,I=~T,j=3285377520,q=[E,T,S,I,j],H=0,fe="";function Z($,N){return $<<N|$>>>32-N}for(;s<f.length;c++)y[c>>2]=y[c>>2]|(f[s]=="%"?parseInt(f.substring(s+1,s+=3),16):f.charCodeAt(s++))<<(3-(c&3))*8;for(l=((c+7>>6)+1)*16,y[l-1]=c*8-8;H<l;H+=16){for(s=0;s<80;s++)c=Z(E,5)+j+(s<20?(T&S^~T&I)+1518500249:s<40?(T^S^I)+1859775393:s<60?(T&S^T&I^S&I)+2400959708:(T^S^I)+3395469782)+(w[s]=s<16?y[H+s]|0:Z(w[s-3]^w[s-8]^w[s-14]^w[s-16],1)),j=I,I=S,S=Z(T,30),T=E,E=c;q[0]=E=q[0]+E|0,q[1]=T=q[1]+T|0,q[2]=S=q[2]+S|0,q[3]=I=q[3]+I|0,q[4]=j=q[4]+j|0}for(s=0;s<40;s++)fe+=(q[s>>3]>>>(7-(s&7))*4&15).toString(16);return fe}function D5(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function B5(e){return j5(e==null?"":""+e)}function yc(e){return(e*10+.5|0)/10}class N5{constructor(){this.v=""}g(t){let i="";for(let s=0;s<t.length;s++)i+=(s?"L":"M")+yc(t[s].x)+" "+yc(t[s].y);this.v+=i+"Z"}h(t,i,s){const c=s?0:1,f=yc(i/2),y=yc(i),l="a"+f+","+f+" 0 1,"+c+" ";this.v+="M"+yc(t.x)+" "+yc(t.y+i/2)+l+y+",0"+l+-y+",0"}}class U5{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),s=i[2]?cf(i[2],0)/255:1;this.N.m(i[1],s)}L(t){this.A=this.B[t]||(this.B[t]=new N5)}M(){}g(t){this.A.g(t)}h(t,i,s){this.A.h(t,i,s)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const $5={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class V5{constructor(t){this.k=t,this.C='<svg xmlns="'+$5.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function G5(e,t,i){const s=new V5(t);return F5(new U5(s),D5(e)||B5(e),i),s.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const Z5=({feature:e,size:t})=>e.properties===null?null:pt.jsx(pt.Fragment,{children:e.properties.userIconHref.length>0?pt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):pt.jsx("span",{dangerouslySetInnerHTML:{__html:G5(e.properties.user||"noname",t)}})}),W5=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?pt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var H5={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const X5=({viewState:e})=>{const[t,i]=vt.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return vt.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),pt.jsx(pt.Fragment,{children:e&&t&&pt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[pt.jsx(ts,{icon:H5,style:{padding:"0px 3px"}}),pt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var rC={};class Fi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let s=0;for(let c=0;c<this._n&&c<32;c++){const f=i[c],y=t+f,l=Math.abs(t)<Math.abs(f)?t-(y-f):f-(y-t);l&&(i[s++]=l),t=y}return i[s]=t,this._n=s+1,this}valueOf(){const t=this._partials;let i=this._n,s,c,f,y=0;if(i>0){for(y=t[--i];i>0&&(s=y,c=t[--i],y=s+c,f=c-(y-s),!f););i>0&&(f<0&&t[i-1]<0||f>0&&t[i-1]>0)&&(c=f*2,s=y+c,c==s-y&&(y=s))}return y}}function*q5(e){for(const t of e)yield*t}function iC(e){return Array.from(q5(e))}function Bc(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var s=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,f=new Array(c);++s<c;)f[s]=e+s*i;return f}var gn=1e-6,Jf=1e-12,Fn=Math.PI,Ur=Fn/2,wm=Fn/4,Ji=Fn*2,pr=180/Fn,vn=Fn/180,Gn=Math.abs,dh=Math.atan,Qi=Math.atan2,un=Math.cos,dp=Math.ceil,oC=Math.exp,Sv=Math.hypot,bm=Math.log,Gy=Math.pow,en=Math.sin,Ko=Math.sign||function(e){return e>0?1:e<0?-1:0},gi=Math.sqrt,h1=Math.tan;function aC(e){return e>1?0:e<-1?Fn:Math.acos(e)}function eo(e){return e>1?Ur:e<-1?-Ur:Math.asin(e)}function Yb(e){return(e=en(e/2))*e}function zr(){}function Em(e,t){e&&Qb.hasOwnProperty(e.type)&&Qb[e.type](e,t)}var Jb={Feature:function(e,t){Em(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,s=-1,c=i.length;++s<c;)Em(i[s].geometry,t)}},Qb={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,s=-1,c=i.length;++s<c;)e=i[s],t.point(e[0],e[1],e[2])},LineString:function(e,t){Tv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,s=-1,c=i.length;++s<c;)Tv(i[s],t,0)},Polygon:function(e,t){e2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,s=-1,c=i.length;++s<c;)e2(i[s],t)},GeometryCollection:function(e,t){for(var i=e.geometries,s=-1,c=i.length;++s<c;)Em(i[s],t)}};function Tv(e,t,i){var s=-1,c=e.length-i,f;for(t.lineStart();++s<c;)f=e[s],t.point(f[0],f[1],f[2]);t.lineEnd()}function e2(e,t){var i=-1,s=e.length;for(t.polygonStart();++i<s;)Tv(e[i],t,1);t.polygonEnd()}function da(e,t){e&&Jb.hasOwnProperty(e.type)?Jb[e.type](e,t):Em(e,t)}var Sm=new Fi,Tm=new Fi,sC,lC,Cv,Av,Iv,ns={point:zr,lineStart:zr,lineEnd:zr,polygonStart:function(){Sm=new Fi,ns.lineStart=K5,ns.lineEnd=Y5},polygonEnd:function(){var e=+Sm;Tm.add(e<0?Ji+e:e),this.lineStart=this.lineEnd=this.point=zr},sphere:function(){Tm.add(Ji)}};function K5(){ns.point=J5}function Y5(){uC(sC,lC)}function J5(e,t){ns.point=uC,sC=e,lC=t,e*=vn,t*=vn,Cv=e,Av=un(t=t/2+wm),Iv=en(t)}function uC(e,t){e*=vn,t*=vn,t=t/2+wm;var i=e-Cv,s=i>=0?1:-1,c=s*i,f=un(t),y=en(t),l=Iv*y,w=Av*f+l*un(c),E=l*s*en(c);Sm.add(Qi(E,w)),Cv=e,Av=f,Iv=y}function Q5(e){return Tm=new Fi,da(e,ns),Tm*2}function Cm(e){return[Qi(e[1],e[0]),eo(e[2])]}function Fu(e){var t=e[0],i=e[1],s=un(i);return[s*un(t),s*en(t),en(i)]}function pp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ih(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Zy(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function mp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Am(e){var t=gi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kr,co,Br,To,bu,cC,hC,Xc,If,xl,Vs,zs={point:Pv,lineStart:t2,lineEnd:n2,polygonStart:function(){zs.point=dC,zs.lineStart=ez,zs.lineEnd=tz,If=new Fi,ns.polygonStart()},polygonEnd:function(){ns.polygonEnd(),zs.point=Pv,zs.lineStart=t2,zs.lineEnd=n2,Sm<0?(kr=-(Br=180),co=-(To=90)):If>gn?To=90:If<-gn&&(co=-90),Vs[0]=kr,Vs[1]=Br},sphere:function(){kr=-(Br=180),co=-(To=90)}};function Pv(e,t){xl.push(Vs=[kr=e,Br=e]),t<co&&(co=t),t>To&&(To=t)}function fC(e,t){var i=Fu([e*vn,t*vn]);if(Xc){var s=ih(Xc,i),c=[s[1],-s[0],0],f=ih(c,s);Am(f),f=Cm(f);var y=e-bu,l=y>0?1:-1,w=f[0]*pr*l,E,T=Gn(y)>180;T^(l*bu<w&&w<l*e)?(E=f[1]*pr,E>To&&(To=E)):(w=(w+360)%360-180,T^(l*bu<w&&w<l*e)?(E=-f[1]*pr,E<co&&(co=E)):(t<co&&(co=t),t>To&&(To=t))),T?e<bu?So(kr,e)>So(kr,Br)&&(Br=e):So(e,Br)>So(kr,Br)&&(kr=e):Br>=kr?(e<kr&&(kr=e),e>Br&&(Br=e)):e>bu?So(kr,e)>So(kr,Br)&&(Br=e):So(e,Br)>So(kr,Br)&&(kr=e)}else xl.push(Vs=[kr=e,Br=e]);t<co&&(co=t),t>To&&(To=t),Xc=i,bu=e}function t2(){zs.point=fC}function n2(){Vs[0]=kr,Vs[1]=Br,zs.point=Pv,Xc=null}function dC(e,t){if(Xc){var i=e-bu;If.add(Gn(i)>180?i+(i>0?360:-360):i)}else cC=e,hC=t;ns.point(e,t),fC(e,t)}function ez(){ns.lineStart()}function tz(){dC(cC,hC),ns.lineEnd(),Gn(If)>gn&&(kr=-(Br=180)),Vs[0]=kr,Vs[1]=Br,Xc=null}function So(e,t){return(t-=e)<0?t+360:t}function nz(e,t){return e[0]-t[0]}function r2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function rz(e){var t,i,s,c,f,y,l;if(To=Br=-(kr=co=1/0),xl=[],da(e,zs),i=xl.length){for(xl.sort(nz),t=1,s=xl[0],f=[s];t<i;++t)c=xl[t],r2(s,c[0])||r2(s,c[1])?(So(s[0],c[1])>So(s[0],s[1])&&(s[1]=c[1]),So(c[0],s[1])>So(s[0],s[1])&&(s[0]=c[0])):f.push(s=c);for(y=-1/0,i=f.length-1,t=0,s=f[i];t<=i;s=c,++t)c=f[t],(l=So(s[1],c[0]))>y&&(y=l,kr=c[0],Br=s[1])}return xl=Vs=null,kr===1/0||co===1/0?[[NaN,NaN],[NaN,NaN]]:[[kr,co],[Br,To]]}var hf,Im,Pm,km,Mm,zm,Lm,Rm,kv,Mv,zv,pC,mC,Xi,qi,Ki,ga={sphere:zr,point:f1,lineStart:i2,lineEnd:o2,polygonStart:function(){ga.lineStart=az,ga.lineEnd=sz},polygonEnd:function(){ga.lineStart=i2,ga.lineEnd=o2}};function f1(e,t){e*=vn,t*=vn;var i=un(t);ud(i*un(e),i*en(e),en(t))}function ud(e,t,i){++hf,Pm+=(e-Pm)/hf,km+=(t-km)/hf,Mm+=(i-Mm)/hf}function i2(){ga.point=iz}function iz(e,t){e*=vn,t*=vn;var i=un(t);Xi=i*un(e),qi=i*en(e),Ki=en(t),ga.point=oz,ud(Xi,qi,Ki)}function oz(e,t){e*=vn,t*=vn;var i=un(t),s=i*un(e),c=i*en(e),f=en(t),y=Qi(gi((y=qi*f-Ki*c)*y+(y=Ki*s-Xi*f)*y+(y=Xi*c-qi*s)*y),Xi*s+qi*c+Ki*f);Im+=y,zm+=y*(Xi+(Xi=s)),Lm+=y*(qi+(qi=c)),Rm+=y*(Ki+(Ki=f)),ud(Xi,qi,Ki)}function o2(){ga.point=f1}function az(){ga.point=lz}function sz(){gC(pC,mC),ga.point=f1}function lz(e,t){pC=e,mC=t,e*=vn,t*=vn,ga.point=gC;var i=un(t);Xi=i*un(e),qi=i*en(e),Ki=en(t),ud(Xi,qi,Ki)}function gC(e,t){e*=vn,t*=vn;var i=un(t),s=i*un(e),c=i*en(e),f=en(t),y=qi*f-Ki*c,l=Ki*s-Xi*f,w=Xi*c-qi*s,E=Sv(y,l,w),T=eo(E),S=E&&-T/E;kv.add(S*y),Mv.add(S*l),zv.add(S*w),Im+=T,zm+=T*(Xi+(Xi=s)),Lm+=T*(qi+(qi=c)),Rm+=T*(Ki+(Ki=f)),ud(Xi,qi,Ki)}function uz(e){hf=Im=Pm=km=Mm=zm=Lm=Rm=0,kv=new Fi,Mv=new Fi,zv=new Fi,da(e,ga);var t=+kv,i=+Mv,s=+zv,c=Sv(t,i,s);return c<Jf&&(t=zm,i=Lm,s=Rm,Im<gn&&(t=Pm,i=km,s=Mm),c=Sv(t,i,s),c<Jf)?[NaN,NaN]:[Qi(i,t)*pr,eo(s/c)*pr]}function vc(e){return function(){return e}}function Lv(e,t){function i(s,c){return s=e(s,c),t(s[0],s[1])}return e.invert&&t.invert&&(i.invert=function(s,c){return s=t.invert(s,c),s&&e.invert(s[0],s[1])}),i}function Rv(e,t){return[Gn(e)>Fn?e+Math.round(-e/Ji)*Ji:e,t]}Rv.invert=Rv;function d1(e,t,i){return(e%=Ji)?t||i?Lv(s2(e),l2(t,i)):s2(e):t||i?l2(t,i):Rv}function a2(e){return function(t,i){return t+=e,[t>Fn?t-Ji:t<-Fn?t+Ji:t,i]}}function s2(e){var t=a2(e);return t.invert=a2(-e),t}function l2(e,t){var i=un(e),s=en(e),c=un(t),f=en(t);function y(l,w){var E=un(w),T=un(l)*E,S=en(l)*E,I=en(w),j=I*i+T*s;return[Qi(S*c-j*f,T*i-I*s),eo(j*c+S*f)]}return y.invert=function(l,w){var E=un(w),T=un(l)*E,S=en(l)*E,I=en(w),j=I*c-S*f;return[Qi(S*c+I*f,T*i+j*s),eo(j*i-T*s)]},y}function yC(e){e=d1(e[0]*vn,e[1]*vn,e.length>2?e[2]*vn:0);function t(i){return i=e(i[0]*vn,i[1]*vn),i[0]*=pr,i[1]*=pr,i}return t.invert=function(i){return i=e.invert(i[0]*vn,i[1]*vn),i[0]*=pr,i[1]*=pr,i},t}function vC(e,t,i,s,c,f){if(i){var y=un(t),l=en(t),w=s*i;c==null?(c=t+s*Ji,f=t-w/2):(c=u2(y,c),f=u2(y,f),(s>0?c<f:c>f)&&(c+=s*Ji));for(var E,T=c;s>0?T>f:T<f;T-=w)E=Cm([y,-l*un(T),-l*en(T)]),e.point(E[0],E[1])}}function u2(e,t){t=Fu(t),t[0]-=e,Am(t);var i=aC(-t[1]);return((-t[2]<0?-i:i)+Ji-gn)%Ji}function cz(){var e=vc([0,0]),t=vc(90),i=vc(6),s,c,f={point:y};function y(w,E){s.push(w=c(w,E)),w[0]*=pr,w[1]*=pr}function l(){var w=e.apply(this,arguments),E=t.apply(this,arguments)*vn,T=i.apply(this,arguments)*vn;return s=[],c=d1(-w[0]*vn,-w[1]*vn,0).invert,vC(f,E,T,1),w={type:"Polygon",coordinates:[s]},s=c=null,w}return l.center=function(w){return arguments.length?(e=typeof w=="function"?w:vc([+w[0],+w[1]]),l):e},l.radius=function(w){return arguments.length?(t=typeof w=="function"?w:vc(+w),l):t},l.precision=function(w){return arguments.length?(i=typeof w=="function"?w:vc(+w),l):i},l}function _C(){var e=[],t;return{point:function(i,s,c){t.push([i,s,c])},lineStart:function(){e.push(t=[])},lineEnd:zr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function jp(e,t){return Gn(e[0]-t[0])<gn&&Gn(e[1]-t[1])<gn}function gp(e,t,i,s){this.x=e,this.z=t,this.o=i,this.e=s,this.v=!1,this.n=this.p=null}function xC(e,t,i,s,c){var f=[],y=[],l,w;if(e.forEach(function(q){if(!((H=q.length-1)<=0)){var H,fe=q[0],Z=q[H],$;if(jp(fe,Z)){if(!fe[2]&&!Z[2]){for(c.lineStart(),l=0;l<H;++l)c.point((fe=q[l])[0],fe[1]);c.lineEnd();return}Z[0]+=2*gn}f.push($=new gp(fe,q,null,!0)),y.push($.o=new gp(fe,null,$,!1)),f.push($=new gp(Z,q,null,!1)),y.push($.o=new gp(Z,null,$,!0))}}),!!f.length){for(y.sort(t),c2(f),c2(y),l=0,w=y.length;l<w;++l)y[l].e=i=!i;for(var E=f[0],T,S;;){for(var I=E,j=!0;I.v;)if((I=I.n)===E)return;T=I.z,c.lineStart();do{if(I.v=I.o.v=!0,I.e){if(j)for(l=0,w=T.length;l<w;++l)c.point((S=T[l])[0],S[1]);else s(I.x,I.n.x,1,c);I=I.n}else{if(j)for(T=I.p.z,l=T.length-1;l>=0;--l)c.point((S=T[l])[0],S[1]);else s(I.x,I.p.x,-1,c);I=I.p}I=I.o,T=I.z,j=!j}while(!I.v);c.lineEnd()}}}function c2(e){if(t=e.length){for(var t,i=0,s=e[0],c;++i<t;)s.n=c=e[i],c.p=s,s=c;s.n=c=e[0],c.p=s}}function Wy(e){return Gn(e[0])<=Fn?e[0]:Ko(e[0])*((Gn(e[0])+Fn)%Ji-Fn)}function wC(e,t){var i=Wy(t),s=t[1],c=en(s),f=[en(i),-un(i),0],y=0,l=0,w=new Fi;c===1?s=Ur+gn:c===-1&&(s=-Ur-gn);for(var E=0,T=e.length;E<T;++E)if(I=(S=e[E]).length)for(var S,I,j=S[I-1],q=Wy(j),H=j[1]/2+wm,fe=en(H),Z=un(H),$=0;$<I;++$,q=oe,fe=D,Z=b,j=N){var N=S[$],oe=Wy(N),V=N[1]/2+wm,D=en(V),b=un(V),k=oe-q,G=k>=0?1:-1,Y=G*k,K=Y>Fn,pe=fe*D;if(w.add(Qi(pe*G*en(Y),Z*b+pe*un(Y))),y+=K?k+G*Ji:k,K^q>=i^oe>=i){var _e=ih(Fu(j),Fu(N));Am(_e);var be=ih(f,_e);Am(be);var Q=(K^k>=0?-1:1)*eo(be[2]);(s>Q||s===Q&&(_e[0]||_e[1]))&&(l+=K^k>=0?1:-1)}}return(y<-gn||y<gn&&w<-Jf)^l&1}function bC(e,t,i,s){return function(c){var f=t(c),y=_C(),l=t(y),w=!1,E,T,S,I={point:j,lineStart:H,lineEnd:fe,polygonStart:function(){I.point=Z,I.lineStart=$,I.lineEnd=N,T=[],E=[]},polygonEnd:function(){I.point=j,I.lineStart=H,I.lineEnd=fe,T=iC(T);var oe=wC(E,s);T.length?(w||(c.polygonStart(),w=!0),xC(T,fz,oe,i,c)):oe&&(w||(c.polygonStart(),w=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),w&&(c.polygonEnd(),w=!1),T=E=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function j(oe,V){e(oe,V)&&c.point(oe,V)}function q(oe,V){f.point(oe,V)}function H(){I.point=q,f.lineStart()}function fe(){I.point=j,f.lineEnd()}function Z(oe,V){S.push([oe,V]),l.point(oe,V)}function $(){l.lineStart(),S=[]}function N(){Z(S[0][0],S[0][1]),l.lineEnd();var oe=l.clean(),V=y.result(),D,b=V.length,k,G,Y;if(S.pop(),E.push(S),S=null,!!b){if(oe&1){if(G=V[0],(k=G.length-1)>0){for(w||(c.polygonStart(),w=!0),c.lineStart(),D=0;D<k;++D)c.point((Y=G[D])[0],Y[1]);c.lineEnd()}return}b>1&&oe&2&&V.push(V.pop().concat(V.shift())),T.push(V.filter(hz))}}return I}}function hz(e){return e.length>1}function fz(e,t){return((e=e.x)[0]<0?e[1]-Ur-gn:Ur-e[1])-((t=t.x)[0]<0?t[1]-Ur-gn:Ur-t[1])}const Ov=bC(function(){return!0},dz,mz,[-Fn,-Ur]);function dz(e){var t=NaN,i=NaN,s=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(f,y){var l=f>0?Fn:-Fn,w=Gn(f-t);Gn(w-Fn)<gn?(e.point(t,i=(i+y)/2>0?Ur:-Ur),e.point(s,i),e.lineEnd(),e.lineStart(),e.point(l,i),e.point(f,i),c=0):s!==l&&w>=Fn&&(Gn(t-s)<gn&&(t-=s*gn),Gn(f-l)<gn&&(f-=l*gn),i=pz(t,i,f,y),e.point(s,i),e.lineEnd(),e.lineStart(),e.point(l,i),c=0),e.point(t=f,i=y),s=l},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function pz(e,t,i,s){var c,f,y=en(e-i);return Gn(y)>gn?dh((en(t)*(f=un(s))*en(i)-en(s)*(c=un(t))*en(e))/(c*f*y)):(t+s)/2}function mz(e,t,i,s){var c;if(e==null)c=i*Ur,s.point(-Fn,c),s.point(0,c),s.point(Fn,c),s.point(Fn,0),s.point(Fn,-c),s.point(0,-c),s.point(-Fn,-c),s.point(-Fn,0),s.point(-Fn,c);else if(Gn(e[0]-t[0])>gn){var f=e[0]<t[0]?Fn:-Fn;c=i*f/2,s.point(-f,c),s.point(0,c),s.point(f,c)}else s.point(t[0],t[1])}function EC(e){var t=un(e),i=6*vn,s=t>0,c=Gn(t)>gn;function f(T,S,I,j){vC(j,e,i,I,T,S)}function y(T,S){return un(T)*un(S)>t}function l(T){var S,I,j,q,H;return{lineStart:function(){q=j=!1,H=1},point:function(fe,Z){var $=[fe,Z],N,oe=y(fe,Z),V=s?oe?0:E(fe,Z):oe?E(fe+(fe<0?Fn:-Fn),Z):0;if(!S&&(q=j=oe)&&T.lineStart(),oe!==j&&(N=w(S,$),(!N||jp(S,N)||jp($,N))&&($[2]=1)),oe!==j)H=0,oe?(T.lineStart(),N=w($,S),T.point(N[0],N[1])):(N=w(S,$),T.point(N[0],N[1],2),T.lineEnd()),S=N;else if(c&&S&&s^oe){var D;!(V&I)&&(D=w($,S,!0))&&(H=0,s?(T.lineStart(),T.point(D[0][0],D[0][1]),T.point(D[1][0],D[1][1]),T.lineEnd()):(T.point(D[1][0],D[1][1]),T.lineEnd(),T.lineStart(),T.point(D[0][0],D[0][1],3)))}oe&&(!S||!jp(S,$))&&T.point($[0],$[1]),S=$,j=oe,I=V},lineEnd:function(){j&&T.lineEnd(),S=null},clean:function(){return H|(q&&j)<<1}}}function w(T,S,I){var j=Fu(T),q=Fu(S),H=[1,0,0],fe=ih(j,q),Z=pp(fe,fe),$=fe[0],N=Z-$*$;if(!N)return!I&&T;var oe=t*Z/N,V=-t*$/N,D=ih(H,fe),b=mp(H,oe),k=mp(fe,V);Zy(b,k);var G=D,Y=pp(b,G),K=pp(G,G),pe=Y*Y-K*(pp(b,b)-1);if(!(pe<0)){var _e=gi(pe),be=mp(G,(-Y-_e)/K);if(Zy(be,b),be=Cm(be),!I)return be;var Q=T[0],re=S[0],ne=T[1],te=S[1],ce;re<Q&&(ce=Q,Q=re,re=ce);var xe=re-Q,we=Gn(xe-Fn)<gn,De=we||xe<gn;if(!we&&te<ne&&(ce=ne,ne=te,te=ce),De?we?ne+te>0^be[1]<(Gn(be[0]-Q)<gn?ne:te):ne<=be[1]&&be[1]<=te:xe>Fn^(Q<=be[0]&&be[0]<=re)){var Pe=mp(G,(-Y+_e)/K);return Zy(Pe,b),[be,Cm(Pe)]}}}function E(T,S){var I=s?e:Fn-e,j=0;return T<-I?j|=1:T>I&&(j|=2),S<-I?j|=4:S>I&&(j|=8),j}return bC(y,l,f,s?[0,-e]:[-Fn,e-Fn])}function gz(e,t,i,s,c,f){var y=e[0],l=e[1],w=t[0],E=t[1],T=0,S=1,I=w-y,j=E-l,q;if(q=i-y,!(!I&&q>0)){if(q/=I,I<0){if(q<T)return;q<S&&(S=q)}else if(I>0){if(q>S)return;q>T&&(T=q)}if(q=c-y,!(!I&&q<0)){if(q/=I,I<0){if(q>S)return;q>T&&(T=q)}else if(I>0){if(q<T)return;q<S&&(S=q)}if(q=s-l,!(!j&&q>0)){if(q/=j,j<0){if(q<T)return;q<S&&(S=q)}else if(j>0){if(q>S)return;q>T&&(T=q)}if(q=f-l,!(!j&&q<0)){if(q/=j,j<0){if(q>S)return;q>T&&(T=q)}else if(j>0){if(q<T)return;q<S&&(S=q)}return T>0&&(e[0]=y+T*I,e[1]=l+T*j),S<1&&(t[0]=y+S*I,t[1]=l+S*j),!0}}}}}var ff=1e9,yp=-ff;function gg(e,t,i,s){function c(E,T){return e<=E&&E<=i&&t<=T&&T<=s}function f(E,T,S,I){var j=0,q=0;if(E==null||(j=y(E,S))!==(q=y(T,S))||w(E,T)<0^S>0)do I.point(j===0||j===3?e:i,j>1?s:t);while((j=(j+S+4)%4)!==q);else I.point(T[0],T[1])}function y(E,T){return Gn(E[0]-e)<gn?T>0?0:3:Gn(E[0]-i)<gn?T>0?2:1:Gn(E[1]-t)<gn?T>0?1:0:T>0?3:2}function l(E,T){return w(E.x,T.x)}function w(E,T){var S=y(E,1),I=y(T,1);return S!==I?S-I:S===0?T[1]-E[1]:S===1?E[0]-T[0]:S===2?E[1]-T[1]:T[0]-E[0]}return function(E){var T=E,S=_C(),I,j,q,H,fe,Z,$,N,oe,V,D,b={point:k,lineStart:pe,lineEnd:_e,polygonStart:Y,polygonEnd:K};function k(Q,re){c(Q,re)&&T.point(Q,re)}function G(){for(var Q=0,re=0,ne=j.length;re<ne;++re)for(var te=j[re],ce=1,xe=te.length,we=te[0],De,Pe,Me=we[0],Ve=we[1];ce<xe;++ce)De=Me,Pe=Ve,we=te[ce],Me=we[0],Ve=we[1],Pe<=s?Ve>s&&(Me-De)*(s-Pe)>(Ve-Pe)*(e-De)&&++Q:Ve<=s&&(Me-De)*(s-Pe)<(Ve-Pe)*(e-De)&&--Q;return Q}function Y(){T=S,I=[],j=[],D=!0}function K(){var Q=G(),re=D&&Q,ne=(I=iC(I)).length;(re||ne)&&(E.polygonStart(),re&&(E.lineStart(),f(null,null,1,E),E.lineEnd()),ne&&xC(I,l,Q,f,E),E.polygonEnd()),T=E,I=j=q=null}function pe(){b.point=be,j&&j.push(q=[]),V=!0,oe=!1,$=N=NaN}function _e(){I&&(be(H,fe),Z&&oe&&S.rejoin(),I.push(S.result())),b.point=k,oe&&T.lineEnd()}function be(Q,re){var ne=c(Q,re);if(j&&q.push([Q,re]),V)H=Q,fe=re,Z=ne,V=!1,ne&&(T.lineStart(),T.point(Q,re));else if(ne&&oe)T.point(Q,re);else{var te=[$=Math.max(yp,Math.min(ff,$)),N=Math.max(yp,Math.min(ff,N))],ce=[Q=Math.max(yp,Math.min(ff,Q)),re=Math.max(yp,Math.min(ff,re))];gz(te,ce,e,t,i,s)?(oe||(T.lineStart(),T.point(te[0],te[1])),T.point(ce[0],ce[1]),ne||T.lineEnd(),D=!1):ne&&(T.lineStart(),T.point(Q,re),D=!1)}$=Q,N=re,oe=ne}return b}}function yz(){var e=0,t=0,i=960,s=500,c,f,y;return y={stream:function(l){return c&&f===l?c:c=gg(e,t,i,s)(f=l)},extent:function(l){return arguments.length?(e=+l[0][0],t=+l[0][1],i=+l[1][0],s=+l[1][1],c=f=null,y):[[e,t],[i,s]]}}}var Fv,jv,Dp,Bp,oh={sphere:zr,point:zr,lineStart:vz,lineEnd:zr,polygonStart:zr,polygonEnd:zr};function vz(){oh.point=xz,oh.lineEnd=_z}function _z(){oh.point=oh.lineEnd=zr}function xz(e,t){e*=vn,t*=vn,jv=e,Dp=en(t),Bp=un(t),oh.point=wz}function wz(e,t){e*=vn,t*=vn;var i=en(t),s=un(t),c=Gn(e-jv),f=un(c),y=en(c),l=s*y,w=Bp*i-Dp*s*f,E=Dp*i+Bp*s*f;Fv.add(Qi(gi(l*l+w*w),E)),jv=e,Dp=i,Bp=s}function SC(e){return Fv=new Fi,da(e,oh),+Fv}var Dv=[null,null],bz={type:"LineString",coordinates:Dv};function Om(e,t){return Dv[0]=e,Dv[1]=t,SC(bz)}var h2={Feature:function(e,t){return Fm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,s=-1,c=i.length;++s<c;)if(Fm(i[s].geometry,t))return!0;return!1}},f2={Sphere:function(){return!0},Point:function(e,t){return d2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,s=-1,c=i.length;++s<c;)if(d2(i[s],t))return!0;return!1},LineString:function(e,t){return p2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,s=-1,c=i.length;++s<c;)if(p2(i[s],t))return!0;return!1},Polygon:function(e,t){return m2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,s=-1,c=i.length;++s<c;)if(m2(i[s],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,s=-1,c=i.length;++s<c;)if(Fm(i[s],t))return!0;return!1}};function Fm(e,t){return e&&f2.hasOwnProperty(e.type)?f2[e.type](e,t):!1}function d2(e,t){return Om(e,t)===0}function p2(e,t){for(var i,s,c,f=0,y=e.length;f<y;f++){if(s=Om(e[f],t),s===0||f>0&&(c=Om(e[f],e[f-1]),c>0&&i<=c&&s<=c&&(i+s-c)*(1-Math.pow((i-s)/c,2))<Jf*c))return!0;i=s}return!1}function m2(e,t){return!!wC(e.map(Ez),TC(t))}function Ez(e){return e=e.map(TC),e.pop(),e}function TC(e){return[e[0]*vn,e[1]*vn]}function Sz(e,t){return(e&&h2.hasOwnProperty(e.type)?h2[e.type]:Fm)(e,t)}function g2(e,t,i){var s=Bc(e,t-gn,i).concat(t);return function(c){return s.map(function(f){return[c,f]})}}function y2(e,t,i){var s=Bc(e,t-gn,i).concat(t);return function(c){return s.map(function(f){return[f,c]})}}function CC(){var e,t,i,s,c,f,y,l,w=10,E=w,T=90,S=360,I,j,q,H,fe=2.5;function Z(){return{type:"MultiLineString",coordinates:$()}}function $(){return Bc(dp(s/T)*T,i,T).map(q).concat(Bc(dp(l/S)*S,y,S).map(H)).concat(Bc(dp(t/w)*w,e,w).filter(function(N){return Gn(N%T)>gn}).map(I)).concat(Bc(dp(f/E)*E,c,E).filter(function(N){return Gn(N%S)>gn}).map(j))}return Z.lines=function(){return $().map(function(N){return{type:"LineString",coordinates:N}})},Z.outline=function(){return{type:"Polygon",coordinates:[q(s).concat(H(y).slice(1),q(i).reverse().slice(1),H(l).reverse().slice(1))]}},Z.extent=function(N){return arguments.length?Z.extentMajor(N).extentMinor(N):Z.extentMinor()},Z.extentMajor=function(N){return arguments.length?(s=+N[0][0],i=+N[1][0],l=+N[0][1],y=+N[1][1],s>i&&(N=s,s=i,i=N),l>y&&(N=l,l=y,y=N),Z.precision(fe)):[[s,l],[i,y]]},Z.extentMinor=function(N){return arguments.length?(t=+N[0][0],e=+N[1][0],f=+N[0][1],c=+N[1][1],t>e&&(N=t,t=e,e=N),f>c&&(N=f,f=c,c=N),Z.precision(fe)):[[t,f],[e,c]]},Z.step=function(N){return arguments.length?Z.stepMajor(N).stepMinor(N):Z.stepMinor()},Z.stepMajor=function(N){return arguments.length?(T=+N[0],S=+N[1],Z):[T,S]},Z.stepMinor=function(N){return arguments.length?(w=+N[0],E=+N[1],Z):[w,E]},Z.precision=function(N){return arguments.length?(fe=+N,I=g2(f,c,90),j=y2(t,e,fe),q=g2(l,y,90),H=y2(s,i,fe),Z):fe},Z.extentMajor([[-180,-90+gn],[180,90-gn]]).extentMinor([[-180,-80-gn],[180,80+gn]])}function Tz(){return CC()()}function Cz(e,t){var i=e[0]*vn,s=e[1]*vn,c=t[0]*vn,f=t[1]*vn,y=un(s),l=en(s),w=un(f),E=en(f),T=y*un(i),S=y*en(i),I=w*un(c),j=w*en(c),q=2*eo(gi(Yb(f-s)+y*w*Yb(c-i))),H=en(q),fe=q?function(Z){var $=en(Z*=q)/H,N=en(q-Z)/H,oe=N*T+$*I,V=N*S+$*j,D=N*l+$*E;return[Qi(V,oe)*pr,Qi(D,gi(oe*oe+V*V))*pr]}:function(){return[i*pr,s*pr]};return fe.distance=q,fe}const Qf=e=>e;var Hy=new Fi,Bv=new Fi,AC,IC,Nv,Uv,Sl={point:zr,lineStart:zr,lineEnd:zr,polygonStart:function(){Sl.lineStart=Az,Sl.lineEnd=Pz},polygonEnd:function(){Sl.lineStart=Sl.lineEnd=Sl.point=zr,Hy.add(Gn(Bv)),Bv=new Fi},result:function(){var e=Hy/2;return Hy=new Fi,e}};function Az(){Sl.point=Iz}function Iz(e,t){Sl.point=PC,AC=Nv=e,IC=Uv=t}function PC(e,t){Bv.add(Uv*e-Nv*t),Nv=e,Uv=t}function Pz(){PC(AC,IC)}const v2=Sl;var ah=1/0,jm=ah,ed=-ah,Dm=ed,kz={point:Mz,lineStart:zr,lineEnd:zr,polygonStart:zr,polygonEnd:zr,result:function(){var e=[[ah,jm],[ed,Dm]];return ed=Dm=-(jm=ah=1/0),e}};function Mz(e,t){e<ah&&(ah=e),e>ed&&(ed=e),t<jm&&(jm=t),t>Dm&&(Dm=t)}const Bm=kz;var $v=0,Vv=0,df=0,Nm=0,Um=0,Nc=0,Gv=0,Zv=0,pf=0,kC,MC,qa,Ka,pa={point:ju,lineStart:_2,lineEnd:x2,polygonStart:function(){pa.lineStart=Rz,pa.lineEnd=Oz},polygonEnd:function(){pa.point=ju,pa.lineStart=_2,pa.lineEnd=x2},result:function(){var e=pf?[Gv/pf,Zv/pf]:Nc?[Nm/Nc,Um/Nc]:df?[$v/df,Vv/df]:[NaN,NaN];return $v=Vv=df=Nm=Um=Nc=Gv=Zv=pf=0,e}};function ju(e,t){$v+=e,Vv+=t,++df}function _2(){pa.point=zz}function zz(e,t){pa.point=Lz,ju(qa=e,Ka=t)}function Lz(e,t){var i=e-qa,s=t-Ka,c=gi(i*i+s*s);Nm+=c*(qa+e)/2,Um+=c*(Ka+t)/2,Nc+=c,ju(qa=e,Ka=t)}function x2(){pa.point=ju}function Rz(){pa.point=Fz}function Oz(){zC(kC,MC)}function Fz(e,t){pa.point=zC,ju(kC=qa=e,MC=Ka=t)}function zC(e,t){var i=e-qa,s=t-Ka,c=gi(i*i+s*s);Nm+=c*(qa+e)/2,Um+=c*(Ka+t)/2,Nc+=c,c=Ka*e-qa*t,Gv+=c*(qa+e),Zv+=c*(Ka+t),pf+=c*3,ju(qa=e,Ka=t)}const w2=pa;function LC(e){this._context=e}LC.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ji);break}}},result:zr};var Wv=new Fi,Xy,RC,OC,mf,gf,$m={point:zr,lineStart:function(){$m.point=jz},lineEnd:function(){Xy&&FC(RC,OC),$m.point=zr},polygonStart:function(){Xy=!0},polygonEnd:function(){Xy=null},result:function(){var e=+Wv;return Wv=new Fi,e}};function jz(e,t){$m.point=FC,RC=mf=e,OC=gf=t}function FC(e,t){mf-=e,gf-=t,Wv.add(gi(mf*mf+gf*gf)),mf=e,gf=t}const b2=$m;function jC(){this._string=[]}jC.prototype={_radius:4.5,_circle:E2(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=E2(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function E2(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Dz(e,t){var i=4.5,s,c;function f(y){return y&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),da(y,s(c))),c.result()}return f.area=function(y){return da(y,s(v2)),v2.result()},f.measure=function(y){return da(y,s(b2)),b2.result()},f.bounds=function(y){return da(y,s(Bm)),Bm.result()},f.centroid=function(y){return da(y,s(w2)),w2.result()},f.projection=function(y){return arguments.length?(s=y==null?(e=null,Qf):(e=y).stream,f):e},f.context=function(y){return arguments.length?(c=y==null?(t=null,new jC):new LC(t=y),typeof i!="function"&&c.pointRadius(i),f):t},f.pointRadius=function(y){return arguments.length?(i=typeof y=="function"?y:(c.pointRadius(+y),+y),f):i},f.projection(e).context(t)}function Bz(e){return{stream:cd(e)}}function cd(e){return function(t){var i=new Hv;for(var s in e)i[s]=e[s];return i.stream=t,i}}function Hv(){}Hv.prototype={constructor:Hv,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function p1(e,t,i){var s=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),s!=null&&e.clipExtent(null),da(i,e.stream(Bm)),t(Bm.result()),s!=null&&e.clipExtent(s),e}function yg(e,t,i){return p1(e,function(s){var c=t[1][0]-t[0][0],f=t[1][1]-t[0][1],y=Math.min(c/(s[1][0]-s[0][0]),f/(s[1][1]-s[0][1])),l=+t[0][0]+(c-y*(s[1][0]+s[0][0]))/2,w=+t[0][1]+(f-y*(s[1][1]+s[0][1]))/2;e.scale(150*y).translate([l,w])},i)}function m1(e,t,i){return yg(e,[[0,0],t],i)}function g1(e,t,i){return p1(e,function(s){var c=+t,f=c/(s[1][0]-s[0][0]),y=(c-f*(s[1][0]+s[0][0]))/2,l=-f*s[0][1];e.scale(150*f).translate([y,l])},i)}function y1(e,t,i){return p1(e,function(s){var c=+t,f=c/(s[1][1]-s[0][1]),y=-f*s[0][0],l=(c-f*(s[1][1]+s[0][1]))/2;e.scale(150*f).translate([y,l])},i)}var S2=16,Nz=un(30*vn);function T2(e,t){return+t?$z(e,t):Uz(e)}function Uz(e){return cd({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function $z(e,t){function i(s,c,f,y,l,w,E,T,S,I,j,q,H,fe){var Z=E-s,$=T-c,N=Z*Z+$*$;if(N>4*t&&H--){var oe=y+I,V=l+j,D=w+q,b=gi(oe*oe+V*V+D*D),k=eo(D/=b),G=Gn(Gn(D)-1)<gn||Gn(f-S)<gn?(f+S)/2:Qi(V,oe),Y=e(G,k),K=Y[0],pe=Y[1],_e=K-s,be=pe-c,Q=$*_e-Z*be;(Q*Q/N>t||Gn((Z*_e+$*be)/N-.5)>.3||y*I+l*j+w*q<Nz)&&(i(s,c,f,y,l,w,K,pe,G,oe/=b,V/=b,D,H,fe),fe.point(K,pe),i(K,pe,G,oe,V,D,E,T,S,I,j,q,H,fe))}}return function(s){var c,f,y,l,w,E,T,S,I,j,q,H,fe={point:Z,lineStart:$,lineEnd:oe,polygonStart:function(){s.polygonStart(),fe.lineStart=V},polygonEnd:function(){s.polygonEnd(),fe.lineStart=$}};function Z(k,G){k=e(k,G),s.point(k[0],k[1])}function $(){S=NaN,fe.point=N,s.lineStart()}function N(k,G){var Y=Fu([k,G]),K=e(k,G);i(S,I,T,j,q,H,S=K[0],I=K[1],T=k,j=Y[0],q=Y[1],H=Y[2],S2,s),s.point(S,I)}function oe(){fe.point=Z,s.lineEnd()}function V(){$(),fe.point=D,fe.lineEnd=b}function D(k,G){N(c=k,G),f=S,y=I,l=j,w=q,E=H,fe.point=N}function b(){i(S,I,T,j,q,H,f,y,c,l,w,E,S2,s),fe.lineEnd=oe,oe()}return fe}}var Vz=cd({point:function(e,t){this.stream.point(e*vn,t*vn)}});function Gz(e){return cd({point:function(t,i){var s=e(t,i);return this.stream.point(s[0],s[1])}})}function Zz(e,t,i,s,c){function f(y,l){return y*=s,l*=c,[t+e*y,i-e*l]}return f.invert=function(y,l){return[(y-t)/e*s,(i-l)/e*c]},f}function C2(e,t,i,s,c,f){if(!f)return Zz(e,t,i,s,c);var y=un(f),l=en(f),w=y*e,E=l*e,T=y/e,S=l/e,I=(l*i-y*t)/e,j=(l*t+y*i)/e;function q(H,fe){return H*=s,fe*=c,[w*H-E*fe+t,i-E*H-w*fe]}return q.invert=function(H,fe){return[s*(T*H-S*fe+I),c*(j-S*H-T*fe)]},q}function rs(e){return v1(function(){return e})()}function v1(e){var t,i=150,s=480,c=250,f=0,y=0,l=0,w=0,E=0,T,S=0,I=1,j=1,q=null,H=Ov,fe=null,Z,$,N,oe=Qf,V=.5,D,b,k,G,Y;function K(Q){return k(Q[0]*vn,Q[1]*vn)}function pe(Q){return Q=k.invert(Q[0],Q[1]),Q&&[Q[0]*pr,Q[1]*pr]}K.stream=function(Q){return G&&Y===Q?G:G=Vz(Gz(T)(H(D(oe(Y=Q)))))},K.preclip=function(Q){return arguments.length?(H=Q,q=void 0,be()):H},K.postclip=function(Q){return arguments.length?(oe=Q,fe=Z=$=N=null,be()):oe},K.clipAngle=function(Q){return arguments.length?(H=+Q?EC(q=Q*vn):(q=null,Ov),be()):q*pr},K.clipExtent=function(Q){return arguments.length?(oe=Q==null?(fe=Z=$=N=null,Qf):gg(fe=+Q[0][0],Z=+Q[0][1],$=+Q[1][0],N=+Q[1][1]),be()):fe==null?null:[[fe,Z],[$,N]]},K.scale=function(Q){return arguments.length?(i=+Q,_e()):i},K.translate=function(Q){return arguments.length?(s=+Q[0],c=+Q[1],_e()):[s,c]},K.center=function(Q){return arguments.length?(f=Q[0]%360*vn,y=Q[1]%360*vn,_e()):[f*pr,y*pr]},K.rotate=function(Q){return arguments.length?(l=Q[0]%360*vn,w=Q[1]%360*vn,E=Q.length>2?Q[2]%360*vn:0,_e()):[l*pr,w*pr,E*pr]},K.angle=function(Q){return arguments.length?(S=Q%360*vn,_e()):S*pr},K.reflectX=function(Q){return arguments.length?(I=Q?-1:1,_e()):I<0},K.reflectY=function(Q){return arguments.length?(j=Q?-1:1,_e()):j<0},K.precision=function(Q){return arguments.length?(D=T2(b,V=Q*Q),be()):gi(V)},K.fitExtent=function(Q,re){return yg(K,Q,re)},K.fitSize=function(Q,re){return m1(K,Q,re)},K.fitWidth=function(Q,re){return g1(K,Q,re)},K.fitHeight=function(Q,re){return y1(K,Q,re)};function _e(){var Q=C2(i,0,0,I,j,S).apply(null,t(f,y)),re=C2(i,s-Q[0],c-Q[1],I,j,S);return T=d1(l,w,E),b=Lv(t,re),k=Lv(T,b),D=T2(b,V),be()}function be(){return G=Y=null,K}return function(){return t=e.apply(this,arguments),K.invert=t.invert&&pe,_e()}}function _1(e){var t=0,i=Fn/3,s=v1(e),c=s(t,i);return c.parallels=function(f){return arguments.length?s(t=f[0]*vn,i=f[1]*vn):[t*pr,i*pr]},c}function Wz(e){var t=un(e);function i(s,c){return[s*t,en(c)/t]}return i.invert=function(s,c){return[s/t,eo(c*t)]},i}function DC(e,t){var i=en(e),s=(i+en(t))/2;if(Gn(s)<gn)return Wz(e);var c=1+i*(2*s-i),f=gi(c)/s;function y(l,w){var E=gi(c-2*s*en(w))/s;return[E*en(l*=s),f-E*un(l)]}return y.invert=function(l,w){var E=f-w,T=Qi(l,Gn(E))*Ko(E);return E*s<0&&(T-=Fn*Ko(l)*Ko(E)),[T/s,eo((c-(l*l+E*E)*s*s)/(2*s))]},y}function Vm(){return _1(DC).scale(155.424).center([0,33.6442])}function BC(){return Vm().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Hz(e){var t=e.length;return{point:function(i,s){for(var c=-1;++c<t;)e[c].point(i,s)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function Xz(){var e,t,i=BC(),s,c=Vm().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f,y=Vm().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,w,E={point:function(I,j){w=[I,j]}};function T(I){var j=I[0],q=I[1];return w=null,s.point(j,q),w||(f.point(j,q),w)||(l.point(j,q),w)}T.invert=function(I){var j=i.scale(),q=i.translate(),H=(I[0]-q[0])/j,fe=(I[1]-q[1])/j;return(fe>=.12&&fe<.234&&H>=-.425&&H<-.214?c:fe>=.166&&fe<.234&&H>=-.214&&H<-.115?y:i).invert(I)},T.stream=function(I){return e&&t===I?e:e=Hz([i.stream(t=I),c.stream(I),y.stream(I)])},T.precision=function(I){return arguments.length?(i.precision(I),c.precision(I),y.precision(I),S()):i.precision()},T.scale=function(I){return arguments.length?(i.scale(I),c.scale(I*.35),y.scale(I),T.translate(i.translate())):i.scale()},T.translate=function(I){if(!arguments.length)return i.translate();var j=i.scale(),q=+I[0],H=+I[1];return s=i.translate(I).clipExtent([[q-.455*j,H-.238*j],[q+.455*j,H+.238*j]]).stream(E),f=c.translate([q-.307*j,H+.201*j]).clipExtent([[q-.425*j+gn,H+.12*j+gn],[q-.214*j-gn,H+.234*j-gn]]).stream(E),l=y.translate([q-.205*j,H+.212*j]).clipExtent([[q-.214*j+gn,H+.166*j+gn],[q-.115*j-gn,H+.234*j-gn]]).stream(E),S()},T.fitExtent=function(I,j){return yg(T,I,j)},T.fitSize=function(I,j){return m1(T,I,j)},T.fitWidth=function(I,j){return g1(T,I,j)},T.fitHeight=function(I,j){return y1(T,I,j)};function S(){return e=t=null,T}return T.scale(1070)}function NC(e){return function(t,i){var s=un(t),c=un(i),f=e(s*c);return f===1/0?[2,0]:[f*c*en(t),f*en(i)]}}function hd(e){return function(t,i){var s=gi(t*t+i*i),c=e(s),f=en(c),y=un(c);return[Qi(t*f,s*y),eo(s&&i*f/s)]}}var x1=NC(function(e){return gi(2/(1+e))});x1.invert=hd(function(e){return 2*eo(e/2)});function qz(){return rs(x1).scale(124.75).clipAngle(180-.001)}var w1=NC(function(e){return(e=aC(e))&&e/en(e)});w1.invert=hd(function(e){return e});function Kz(){return rs(w1).scale(79.4188).clipAngle(180-.001)}function fd(e,t){return[e,bm(h1((Ur+t)/2))]}fd.invert=function(e,t){return[e,2*dh(oC(t))-Ur]};function Yz(){return UC(fd).scale(961/Ji)}function UC(e){var t=rs(e),i=t.center,s=t.scale,c=t.translate,f=t.clipExtent,y=null,l,w,E;t.scale=function(S){return arguments.length?(s(S),T()):s()},t.translate=function(S){return arguments.length?(c(S),T()):c()},t.center=function(S){return arguments.length?(i(S),T()):i()},t.clipExtent=function(S){return arguments.length?(S==null?y=l=w=E=null:(y=+S[0][0],l=+S[0][1],w=+S[1][0],E=+S[1][1]),T()):y==null?null:[[y,l],[w,E]]};function T(){var S=Fn*s(),I=t(yC(t.rotate()).invert([0,0]));return f(y==null?[[I[0]-S,I[1]-S],[I[0]+S,I[1]+S]]:e===fd?[[Math.max(I[0]-S,y),l],[Math.min(I[0]+S,w),E]]:[[y,Math.max(I[1]-S,l)],[w,Math.min(I[1]+S,E)]])}return T()}function vp(e){return h1((Ur+e)/2)}function $C(e,t){var i=un(e),s=e===t?en(e):bm(i/un(t))/bm(vp(t)/vp(e)),c=i*Gy(vp(e),s)/s;if(!s)return fd;function f(y,l){c>0?l<-Ur+gn&&(l=-Ur+gn):l>Ur-gn&&(l=Ur-gn);var w=c/Gy(vp(l),s);return[w*en(s*y),c-w*un(s*y)]}return f.invert=function(y,l){var w=c-l,E=Ko(s)*gi(y*y+w*w),T=Qi(y,Gn(w))*Ko(w);return w*s<0&&(T-=Fn*Ko(y)*Ko(w)),[T/s,2*dh(Gy(c/E,1/s))-Ur]},f}function Jz(){return _1($C).scale(109.5).parallels([30,30])}function td(e,t){return[e,t]}td.invert=td;function Qz(){return rs(td).scale(152.63)}function VC(e,t){var i=un(e),s=e===t?en(e):(i-un(t))/(t-e),c=i/s+e;if(Gn(s)<gn)return td;function f(y,l){var w=c-l,E=s*y;return[w*en(E),c-w*un(E)]}return f.invert=function(y,l){var w=c-l,E=Qi(y,Gn(w))*Ko(w);return w*s<0&&(E-=Fn*Ko(y)*Ko(w)),[E/s,c-Ko(s)*gi(y*y+w*w)]},f}function eL(){return _1(VC).scale(131.154).center([0,13.9389])}var Pf=1.340264,kf=-.081106,Mf=893e-6,zf=.003796,Gm=gi(3)/2,tL=12;function b1(e,t){var i=eo(Gm*en(t)),s=i*i,c=s*s*s;return[e*un(i)/(Gm*(Pf+3*kf*s+c*(7*Mf+9*zf*s))),i*(Pf+kf*s+c*(Mf+zf*s))]}b1.invert=function(e,t){for(var i=t,s=i*i,c=s*s*s,f=0,y,l,w;f<tL&&(l=i*(Pf+kf*s+c*(Mf+zf*s))-t,w=Pf+3*kf*s+c*(7*Mf+9*zf*s),i-=y=l/w,s=i*i,c=s*s*s,!(Gn(y)<Jf));++f);return[Gm*e*(Pf+3*kf*s+c*(7*Mf+9*zf*s))/un(i),eo(en(i)/Gm)]};function nL(){return rs(b1).scale(177.158)}function E1(e,t){var i=un(t),s=un(e)*i;return[i*en(e)/s,en(t)/s]}E1.invert=hd(dh);function rL(){return rs(E1).scale(144.049).clipAngle(60)}function iL(){var e=1,t=0,i=0,s=1,c=1,f=0,y,l,w=null,E,T,S,I=1,j=1,q=cd({point:function(oe,V){var D=N([oe,V]);this.stream.point(D[0],D[1])}}),H=Qf,fe,Z;function $(){return I=e*s,j=e*c,fe=Z=null,N}function N(oe){var V=oe[0]*I,D=oe[1]*j;if(f){var b=D*y-V*l;V=V*y+D*l,D=b}return[V+t,D+i]}return N.invert=function(oe){var V=oe[0]-t,D=oe[1]-i;if(f){var b=D*y+V*l;V=V*y-D*l,D=b}return[V/I,D/j]},N.stream=function(oe){return fe&&Z===oe?fe:fe=q(H(Z=oe))},N.postclip=function(oe){return arguments.length?(H=oe,w=E=T=S=null,$()):H},N.clipExtent=function(oe){return arguments.length?(H=oe==null?(w=E=T=S=null,Qf):gg(w=+oe[0][0],E=+oe[0][1],T=+oe[1][0],S=+oe[1][1]),$()):w==null?null:[[w,E],[T,S]]},N.scale=function(oe){return arguments.length?(e=+oe,$()):e},N.translate=function(oe){return arguments.length?(t=+oe[0],i=+oe[1],$()):[t,i]},N.angle=function(oe){return arguments.length?(f=oe%360*vn,l=en(f),y=un(f),$()):f*pr},N.reflectX=function(oe){return arguments.length?(s=oe?-1:1,$()):s<0},N.reflectY=function(oe){return arguments.length?(c=oe?-1:1,$()):c<0},N.fitExtent=function(oe,V){return yg(N,oe,V)},N.fitSize=function(oe,V){return m1(N,oe,V)},N.fitWidth=function(oe,V){return g1(N,oe,V)},N.fitHeight=function(oe,V){return y1(N,oe,V)},N}function S1(e,t){var i=t*t,s=i*i;return[e*(.8707-.131979*i+s*(-.013791+s*(.003971*i-.001529*s))),t*(1.007226+i*(.015085+s*(-.044475+.028874*i-.005916*s)))]}S1.invert=function(e,t){var i=t,s=25,c;do{var f=i*i,y=f*f;i-=c=(i*(1.007226+f*(.015085+y*(-.044475+.028874*f-.005916*y)))-t)/(1.007226+f*(.015085*3+y*(-.044475*7+.028874*9*f-.005916*11*y)))}while(Gn(c)>gn&&--s>0);return[e/(.8707+(f=i*i)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),i]};function oL(){return rs(S1).scale(175.295)}function T1(e,t){return[un(t)*en(e),en(t)]}T1.invert=hd(eo);function aL(){return rs(T1).scale(249.5).clipAngle(90+gn)}function C1(e,t){var i=un(t),s=1+un(e)*i;return[i*en(e)/s,en(t)/s]}C1.invert=hd(function(e){return 2*dh(e)});function sL(){return rs(C1).scale(250).clipAngle(142)}function A1(e,t){return[bm(h1((Ur+t)/2)),-e]}A1.invert=function(e,t){return[-t,2*dh(oC(e))-Ur]};function lL(){var e=UC(A1),t=e.center,i=e.rotate;return e.center=function(s){return arguments.length?t([-s[1],s[0]]):(s=t(),[s[1],-s[0]])},e.rotate=function(s){return arguments.length?i([s[0],s[1],s.length>2?s[2]+90:90]):(s=i(),[s[0],s[1],s[2]-90])},i([0,0,90]).scale(159.155)}const uL=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:BC,geoAlbersUsa:Xz,geoArea:Q5,geoAzimuthalEqualArea:qz,geoAzimuthalEqualAreaRaw:x1,geoAzimuthalEquidistant:Kz,geoAzimuthalEquidistantRaw:w1,geoBounds:rz,geoCentroid:uz,geoCircle:cz,geoClipAntimeridian:Ov,geoClipCircle:EC,geoClipExtent:yz,geoClipRectangle:gg,geoConicConformal:Jz,geoConicConformalRaw:$C,geoConicEqualArea:Vm,geoConicEqualAreaRaw:DC,geoConicEquidistant:eL,geoConicEquidistantRaw:VC,geoContains:Sz,geoDistance:Om,geoEqualEarth:nL,geoEqualEarthRaw:b1,geoEquirectangular:Qz,geoEquirectangularRaw:td,geoGnomonic:rL,geoGnomonicRaw:E1,geoGraticule:CC,geoGraticule10:Tz,geoIdentity:iL,geoInterpolate:Cz,geoLength:SC,geoMercator:Yz,geoMercatorRaw:fd,geoNaturalEarth1:oL,geoNaturalEarth1Raw:S1,geoOrthographic:aL,geoOrthographicRaw:T1,geoPath:Dz,geoProjection:rs,geoProjectionMutator:v1,geoRotation:yC,geoStereographic:sL,geoStereographicRaw:C1,geoStream:da,geoTransform:Bz,geoTransverseMercator:lL,geoTransverseMercatorRaw:A1},Symbol.toStringTag,{value:"Module"})),cL=n_(uL);var Nl=2*Math.PI*6378137/2,hL=Math.PI/180;function GC(e){return e=e||256,2*Math.PI*6378137/e}function fL(e){var t=e[0],i=e[1],s=e[2];return(1<<s)*((1<<s)+t)+i}function Xv(e,t,i){var s=ZC(e,t,i);return s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s}function ZC(e,t,i){var s=t,c=O1(e[0]),f=R1(e[1]),y=Math.sin(f*hL),l=Math.pow(2,s),w=l*(c/360+.5),E=l*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return Uu([w,E,s],i)}function dL(e,t=6){var i=e[0],s=e[1],c=e[2],f=e[3],y=(i-c)/2+c,l=(s-f)/2+f;return t!=null&&(y=Number(y.toFixed(t)),l=Number(l.toFixed(t))),[y,l]}function Zm(e,t,i={enable:!0,decimal:1}){e=vg(e,t);var s=e[0],c=e[1],f=s*Nl/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*Nl/180,i.enable&&(f=Number(f.toFixed(i.decimal)),y=Number(y.toFixed(i.decimal))),[f,y]}function qv(e,t=6){var i=e[0],s=e[1],c=i/Nl*180,f=s/Nl*180;return f=180/Math.PI*(2*Math.atan(Math.exp(f*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),f=Number(f.toFixed(t))),[c,f]}function I1(e,t,i){var s=e[0],c=e[1],f=z1(t,i),y=(s+Nl)/f,l=(c+Nl)/f;return[y,l,t]}function WC(e,t,i){e=vg(e,i);var s=Zm(e),c=I1(s,t);return P1(c)}function pL(e,t,i){if(e=vg(e,i),t===0)return[0,0,0];var s=WC(e,t);return XC(s)}function mL(e,t){if(t===0)return[0,0,0];var i=I1(e,t);return P1(i)}function Kv(e,t,i=1){var s=e[0],c=e[1],f=e[2],y=z1(f,t),l=s*y-Nl,w=c*y-Nl;return i!=null&&(l=Number(l.toFixed(i)),w=Number(w.toFixed(i))),[l,w]}function P1(e,t,i){t=t||256;var s=e[0],c=e[1],f=e[2];if(f===0)return[0,0,0];M1(f);var y=Math.ceil(s/t)-1,l=Math.ceil(c/t)-1;return y<0&&(y=0),l<0&&(l=0),[y,l,f]}function k1(e,t,i){Uu(e,i),t=t||256;var s=e[0],c=e[1],f=e[2],y=Kv([s*t,c*t,f]),l=Kv([(s+1)*t,(c+1)*t,f]);return[y[0],y[1],l[0],l[1]]}function HC(e,t){Uu(e,t);var i=e[0],s=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var f=k1([i,s,c]),y=f[0],l=f[1],w=f[2],E=f[3],T=qv([y,l,c]),S=qv([w,E,c]);return[T[0],T[1],S[0],S[1]]}function gL(e){var t=dd(e);return k1(t)}function yL(e){var t=dd(e);return HC(t)}function XC(e,t){Uu(e,t);var i=e[0],s=e[1],c=e[2];if(c===0)return[0,0,0];var f=i,y=Math.pow(2,c)-1-s;return[f,y,c]}function dd(e){var t=e[0],i=e[1],s=e[2],c=t,f=Math.pow(2,s)-i-1;return[c,f,s]}function vL(e){var t=dd(e);return qC(t)}function qC(e,t){Uu(e,t);var i=e[0],s=e[1],c=e[2];if(c===0)return"";var f="";return s=Math.pow(2,c)-1-s,L1(c,0,-1).map(function(y){var l=0,w=1<<y-1;i&w&&(l+=1),s&w&&(l+=2),f=f.concat(l)}),f}function _L(e){var t=KC(e);return dd(t)}function KC(e){var t=0,i=0,s=e.length;return L1(s,0,-1).map(function(c){var f=1<<c-1;switch(parseInt(e[s-c],0)){case 0:break;case 1:t+=f;break;case 2:i+=f;break;case 3:t+=f,i+=f;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,s]}function xL(e){var t=Zm([e[0],e[1]]),i=Zm([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function Uu(e,t){var i=e[0],s=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(s==null)throw new Error("<y> is required");return c=M1(c),e=YC(e),e}function YC(e){var t=e[0],i=e[1],s=e[2],c=Math.pow(2,s);return t=t%c,t<0&&(t=t+c),[t,i,s]}function M1(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function vg(e,t){if(t===!1)return e;var i=O1(e[0]),s=R1(e[1]);return s>85&&(s=85),s<-85&&(s=-85),[i,s]}function z1(e,t){return GC(t)/Math.pow(2,e)}function L1(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var s=Math.max(Math.ceil((t-e)/i),0),c=Array(s),f=0;f<s;f++,e+=i)c[f]=e;return c}function wL(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],s=e[0][2],c=e[0][3];return e.map(function(f){f[0]<t&&(t=f[0]),f[1]<i&&(i=f[1]),f[2]>s&&(s=f[2]),f[3]>c&&(c=f[3])}),[t,i,s,c]}}function bL(e){try{return Uu(e),!0}catch{return!1}}function R1(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function O1(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function EL(e){var t=Xv([e[0],e[1]],32),i=Xv([e[2],e[3]],32),s=[t[0],t[1],i[0],i[1]],c=SL(s);if(c===0)return[0,0,0];var f=s[0]>>>32-c,y=s[1]>>>32-c;return[f,y,c]}function SL(e){for(var t=28,i=0;i<t;i++){var s=1<<32-(i+1);if((e[0]&s)!==(e[2]&s)||(e[1]&s)!==(e[3]&s))return i}return t}const TL=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:dL,bboxToMeters:xL,bboxToTile:EL,googleToBBox:yL,googleToBBoxMeters:gL,googleToQuadkey:vL,googleToTile:dd,hash:fL,initialResolution:GC,latitude:R1,lngLatToGoogle:pL,lngLatToMeters:Zm,lngLatToTile:WC,longitude:O1,maxBBox:wL,metersToLngLat:qv,metersToPixels:I1,metersToTile:mL,pixelsToMeters:Kv,pixelsToTile:P1,pointToTile:Xv,pointToTileFraction:ZC,quadkeyToGoogle:KC,quadkeyToTile:_L,range:L1,resolution:z1,tileToBBox:HC,tileToBBoxMeters:k1,tileToGoogle:XC,tileToQuadkey:qC,validTile:bL,validateLngLat:vg,validateTile:Uu,validateZoom:M1,wrapTile:YC},Symbol.toStringTag,{value:"Module"})),CL=n_(TL);var _g={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_g.read=function(e,t,i,s,c){var f,y,l=c*8-s-1,w=(1<<l)-1,E=w>>1,T=-7,S=i?c-1:0,I=i?-1:1,j=e[t+S];for(S+=I,f=j&(1<<-T)-1,j>>=-T,T+=l;T>0;f=f*256+e[t+S],S+=I,T-=8);for(y=f&(1<<-T)-1,f>>=-T,T+=s;T>0;y=y*256+e[t+S],S+=I,T-=8);if(f===0)f=1-E;else{if(f===w)return y?NaN:(j?-1:1)*(1/0);y=y+Math.pow(2,s),f=f-E}return(j?-1:1)*y*Math.pow(2,f-s)};_g.write=function(e,t,i,s,c,f){var y,l,w,E=f*8-c-1,T=(1<<E)-1,S=T>>1,I=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=s?0:f-1,q=s?1:-1,H=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,y=T):(y=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-y))<1&&(y--,w*=2),y+S>=1?t+=I/w:t+=I*Math.pow(2,1-S),t*w>=2&&(y++,w/=2),y+S>=T?(l=0,y=T):y+S>=1?(l=(t*w-1)*Math.pow(2,c),y=y+S):(l=t*Math.pow(2,S-1)*Math.pow(2,c),y=0));c>=8;e[i+j]=l&255,j+=q,l/=256,c-=8);for(y=y<<c|l,E+=c;E>0;e[i+j]=y&255,j+=q,y/=256,E-=8);e[i+j-q]|=H*128};var AL=rr,_p=_g;function rr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}rr.Varint=0;rr.Fixed64=1;rr.Bytes=2;rr.Fixed32=5;var Yv=(1<<16)*(1<<16),A2=1/Yv,IL=12,JC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");rr.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var s=this.readVarint(),c=s>>3,f=this.pos;this.type=s&7,e(c,t,this),this.pos===f&&this.skip(s)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=xp(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=P2(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xp(this.buf,this.pos)+xp(this.buf,this.pos+4)*Yv;return this.pos+=8,e},readSFixed64:function(){var e=xp(this.buf,this.pos)+P2(this.buf,this.pos+4)*Yv;return this.pos+=8,e},readFloat:function(){var e=_p.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=_p.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,s;return s=t[this.pos++],i=s&127,s<128||(s=t[this.pos++],i|=(s&127)<<7,s<128)||(s=t[this.pos++],i|=(s&127)<<14,s<128)||(s=t[this.pos++],i|=(s&127)<<21,s<128)?i:(s=t[this.pos],i|=(s&15)<<28,PL(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=IL&&JC?VL(this.buf,t,e):$L(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==rr.Bytes)return e.push(this.readVarint(t));var i=Ps(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==rr.Bytes)return e.push(this.readSVarint());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==rr.Bytes)return e.push(this.readBoolean());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==rr.Bytes)return e.push(this.readFloat());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==rr.Bytes)return e.push(this.readDouble());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==rr.Bytes)return e.push(this.readFixed32());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==rr.Bytes)return e.push(this.readSFixed32());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==rr.Bytes)return e.push(this.readFixed64());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==rr.Bytes)return e.push(this.readSFixed64());var t=Ps(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===rr.Varint)for(;this.buf[this.pos++]>127;);else if(t===rr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===rr.Fixed32)this.pos+=4;else if(t===rr.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),xc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),xc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),xc(this.buf,e&-1,this.pos),xc(this.buf,Math.floor(e*A2),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),xc(this.buf,e&-1,this.pos),xc(this.buf,Math.floor(e*A2),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){kL(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=GL(this.buf,e,this.pos);var i=this.pos-t;i>=128&&I2(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),_p.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),_p.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var s=this.pos-i;s>=128&&I2(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeMessage:function(e,t,i){this.writeTag(e,rr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,LL,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,RL,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,jL,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,OL,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,FL,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,DL,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,BL,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,NL,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,UL,t)},writeBytesField:function(e,t){this.writeTag(e,rr.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,rr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,rr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,rr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,rr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,rr.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,rr.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,rr.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,rr.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,rr.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function PL(e,t,i){var s=i.buf,c,f;if(f=s[i.pos++],c=(f&112)>>4,f<128||(f=s[i.pos++],c|=(f&127)<<3,f<128)||(f=s[i.pos++],c|=(f&127)<<10,f<128)||(f=s[i.pos++],c|=(f&127)<<17,f<128)||(f=s[i.pos++],c|=(f&127)<<24,f<128)||(f=s[i.pos++],c|=(f&1)<<31,f<128))return _c(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Ps(e){return e.type===rr.Bytes?e.readVarint()+e.pos:e.pos+1}function _c(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function kL(e,t){var i,s;if(e>=0?(i=e%4294967296|0,s=e/4294967296|0):(i=~(-e%4294967296),s=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,s=s+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),ML(i,s,t),zL(s,t)}function ML(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function zL(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function I2(e,t,i){var s=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(s);for(var c=i.pos-1;c>=e;c--)i.buf[c+s]=i.buf[c]}function LL(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function RL(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function OL(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function FL(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function jL(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function DL(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function BL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function NL(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function UL(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function xp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function xc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function P2(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function $L(e,t,i){for(var s="",c=t;c<i;){var f=e[c],y=null,l=f>239?4:f>223?3:f>191?2:1;if(c+l>i)break;var w,E,T;l===1?f<128&&(y=f):l===2?(w=e[c+1],(w&192)===128&&(y=(f&31)<<6|w&63,y<=127&&(y=null))):l===3?(w=e[c+1],E=e[c+2],(w&192)===128&&(E&192)===128&&(y=(f&15)<<12|(w&63)<<6|E&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):l===4&&(w=e[c+1],E=e[c+2],T=e[c+3],(w&192)===128&&(E&192)===128&&(T&192)===128&&(y=(f&15)<<18|(w&63)<<12|(E&63)<<6|T&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,l=1):y>65535&&(y-=65536,s+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),s+=String.fromCharCode(y),c+=l}return s}function VL(e,t,i){return JC.decode(e.subarray(t,i))}function GL(e,t,i){for(var s=0,c,f;s<t.length;s++){if(c=t.charCodeAt(s),c>55295&&c<57344)if(f)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,f=c;continue}else c=f-55296<<10|c-56320|65536,f=null;else{c>56319||s+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):f=c;continue}else f&&(e[i++]=239,e[i++]=191,e[i++]=189,f=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var Jv={},ZL={get exports(){return Jv},set exports(e){Jv=e}},Wm={},WL={get exports(){return Wm},set exports(e){Wm=e}},QC=function(t,i){return function(){for(var c=new Array(arguments.length),f=0;f<c.length;f++)c[f]=arguments[f];return t.apply(i,c)}},HL=QC,$u=Object.prototype.toString;function F1(e){return $u.call(e)==="[object Array]"}function Qv(e){return typeof e>"u"}function XL(e){return e!==null&&!Qv(e)&&e.constructor!==null&&!Qv(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function qL(e){return $u.call(e)==="[object ArrayBuffer]"}function KL(e){return typeof FormData<"u"&&e instanceof FormData}function YL(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function JL(e){return typeof e=="string"}function QL(e){return typeof e=="number"}function eA(e){return e!==null&&typeof e=="object"}function Np(e){if($u.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function eR(e){return $u.call(e)==="[object Date]"}function tR(e){return $u.call(e)==="[object File]"}function nR(e){return $u.call(e)==="[object Blob]"}function tA(e){return $u.call(e)==="[object Function]"}function rR(e){return eA(e)&&tA(e.pipe)}function iR(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function oR(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function aR(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function j1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),F1(e))for(var i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function e_(){var e={};function t(c,f){Np(e[f])&&Np(c)?e[f]=e_(e[f],c):Np(c)?e[f]=e_({},c):F1(c)?e[f]=c.slice():e[f]=c}for(var i=0,s=arguments.length;i<s;i++)j1(arguments[i],t);return e}function sR(e,t,i){return j1(t,function(c,f){i&&typeof c=="function"?e[f]=HL(c,i):e[f]=c}),e}function lR(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Lo={isArray:F1,isArrayBuffer:qL,isBuffer:XL,isFormData:KL,isArrayBufferView:YL,isString:JL,isNumber:QL,isObject:eA,isPlainObject:Np,isUndefined:Qv,isDate:eR,isFile:tR,isBlob:nR,isFunction:tA,isStream:rR,isURLSearchParams:iR,isStandardBrowserEnv:aR,forEach:j1,merge:e_,extend:sR,trim:oR,stripBOM:lR},wc=Lo;function k2(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var nA=function(t,i,s){if(!i)return t;var c;if(s)c=s(i);else if(wc.isURLSearchParams(i))c=i.toString();else{var f=[];wc.forEach(i,function(w,E){w===null||typeof w>"u"||(wc.isArray(w)?E=E+"[]":w=[w],wc.forEach(w,function(S){wc.isDate(S)?S=S.toISOString():wc.isObject(S)&&(S=JSON.stringify(S)),f.push(k2(E)+"="+k2(S))}))}),c=f.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},uR=Lo;function xg(){this.handlers=[]}xg.prototype.use=function(t,i,s){return this.handlers.push({fulfilled:t,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};xg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};xg.prototype.forEach=function(t){uR.forEach(this.handlers,function(s){s!==null&&t(s)})};var cR=xg,hR=Lo,fR=function(t,i){hR.forEach(t,function(c,f){f!==i&&f.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[f])})},rA=function(t,i,s,c,f){return t.config=i,s&&(t.code=s),t.request=c,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},qy,M2;function iA(){if(M2)return qy;M2=1;var e=rA;return qy=function(i,s,c,f,y){var l=new Error(i);return e(l,s,c,f,y)},qy}var Ky,z2;function dR(){if(z2)return Ky;z2=1;var e=iA();return Ky=function(i,s,c){var f=c.config.validateStatus;!c.status||!f||f(c.status)?i(c):s(e("Request failed with status code "+c.status,c.config,null,c.request,c))},Ky}var Yy,L2;function pR(){if(L2)return Yy;L2=1;var e=Lo;return Yy=e.isStandardBrowserEnv()?function(){return{write:function(s,c,f,y,l,w){var E=[];E.push(s+"="+encodeURIComponent(c)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(y)&&E.push("path="+y),e.isString(l)&&E.push("domain="+l),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(s){var c=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Yy}var Jy,R2;function mR(){return R2||(R2=1,Jy=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),Jy}var Qy,O2;function gR(){return O2||(O2=1,Qy=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),Qy}var e0,F2;function yR(){if(F2)return e0;F2=1;var e=mR(),t=gR();return e0=function(s,c){return s&&!e(c)?t(s,c):c},e0}var t0,j2;function vR(){if(j2)return t0;j2=1;var e=Lo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return t0=function(s){var c={},f,y,l;return s&&e.forEach(s.split(`
`),function(E){if(l=E.indexOf(":"),f=e.trim(E.substr(0,l)).toLowerCase(),y=e.trim(E.substr(l+1)),f){if(c[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?c[f]=(c[f]?c[f]:[]).concat([y]):c[f]=c[f]?c[f]+", "+y:y}}),c},t0}var n0,D2;function _R(){if(D2)return n0;D2=1;var e=Lo;return n0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a"),c;function f(y){var l=y;return i&&(s.setAttribute("href",l),l=s.href),s.setAttribute("href",l),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return c=f(window.location.href),function(l){var w=e.isString(l)?f(l):l;return w.protocol===c.protocol&&w.host===c.host}}():function(){return function(){return!0}}(),n0}var r0,B2;function N2(){if(B2)return r0;B2=1;var e=Lo,t=dR(),i=pR(),s=nA,c=yR(),f=vR(),y=_R(),l=iA();return r0=function(E){return new Promise(function(S,I){var j=E.data,q=E.headers,H=E.responseType;e.isFormData(j)&&delete q["Content-Type"];var fe=new XMLHttpRequest;if(E.auth){var Z=E.auth.username||"",$=E.auth.password?unescape(encodeURIComponent(E.auth.password)):"";q.Authorization="Basic "+btoa(Z+":"+$)}var N=c(E.baseURL,E.url);fe.open(E.method.toUpperCase(),s(N,E.params,E.paramsSerializer),!0),fe.timeout=E.timeout;function oe(){if(fe){var D="getAllResponseHeaders"in fe?f(fe.getAllResponseHeaders()):null,b=!H||H==="text"||H==="json"?fe.responseText:fe.response,k={data:b,status:fe.status,statusText:fe.statusText,headers:D,config:E,request:fe};t(S,I,k),fe=null}}if("onloadend"in fe?fe.onloadend=oe:fe.onreadystatechange=function(){!fe||fe.readyState!==4||fe.status===0&&!(fe.responseURL&&fe.responseURL.indexOf("file:")===0)||setTimeout(oe)},fe.onabort=function(){fe&&(I(l("Request aborted",E,"ECONNABORTED",fe)),fe=null)},fe.onerror=function(){I(l("Network Error",E,null,fe)),fe=null},fe.ontimeout=function(){var b="timeout of "+E.timeout+"ms exceeded";E.timeoutErrorMessage&&(b=E.timeoutErrorMessage),I(l(b,E,E.transitional&&E.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",fe)),fe=null},e.isStandardBrowserEnv()){var V=(E.withCredentials||y(N))&&E.xsrfCookieName?i.read(E.xsrfCookieName):void 0;V&&(q[E.xsrfHeaderName]=V)}"setRequestHeader"in fe&&e.forEach(q,function(b,k){typeof j>"u"&&k.toLowerCase()==="content-type"?delete q[k]:fe.setRequestHeader(k,b)}),e.isUndefined(E.withCredentials)||(fe.withCredentials=!!E.withCredentials),H&&H!=="json"&&(fe.responseType=E.responseType),typeof E.onDownloadProgress=="function"&&fe.addEventListener("progress",E.onDownloadProgress),typeof E.onUploadProgress=="function"&&fe.upload&&fe.upload.addEventListener("progress",E.onUploadProgress),E.cancelToken&&E.cancelToken.promise.then(function(b){fe&&(fe.abort(),I(b),fe=null)}),j||(j=null),fe.send(j)})},r0}var Ei=Lo,U2=fR,xR=rA,wR={"Content-Type":"application/x-www-form-urlencoded"};function $2(e,t){!Ei.isUndefined(e)&&Ei.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function bR(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=N2()),e}function ER(e,t,i){if(Ei.isString(e))try{return(t||JSON.parse)(e),Ei.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(e)}var wg={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:bR(),transformRequest:[function(t,i){return U2(i,"Accept"),U2(i,"Content-Type"),Ei.isFormData(t)||Ei.isArrayBuffer(t)||Ei.isBuffer(t)||Ei.isStream(t)||Ei.isFile(t)||Ei.isBlob(t)?t:Ei.isArrayBufferView(t)?t.buffer:Ei.isURLSearchParams(t)?($2(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ei.isObject(t)||i&&i["Content-Type"]==="application/json"?($2(i,"application/json"),ER(t)):t}],transformResponse:[function(t){var i=this.transitional,s=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,f=!s&&this.responseType==="json";if(f||c&&Ei.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(f)throw y.name==="SyntaxError"?xR(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};wg.headers={common:{Accept:"application/json, text/plain, */*"}};Ei.forEach(["delete","get","head"],function(t){wg.headers[t]={}});Ei.forEach(["post","put","patch"],function(t){wg.headers[t]=Ei.merge(wR)});var D1=wg,SR=Lo,TR=D1,CR=function(t,i,s){var c=this||TR;return SR.forEach(s,function(y){t=y.call(c,t,i)}),t},i0,V2;function oA(){return V2||(V2=1,i0=function(t){return!!(t&&t.__CANCEL__)}),i0}var G2=Lo,o0=CR,AR=oA(),IR=D1;function a0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var PR=function(t){a0(t),t.headers=t.headers||{},t.data=o0.call(t,t.data,t.headers,t.transformRequest),t.headers=G2.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),G2.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||IR.adapter;return i(t).then(function(c){return a0(t),c.data=o0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return AR(c)||(a0(t),c&&c.response&&(c.response.data=o0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Ri=Lo,aA=function(t,i){i=i||{};var s={},c=["url","method","data"],f=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function w(I,j){return Ri.isPlainObject(I)&&Ri.isPlainObject(j)?Ri.merge(I,j):Ri.isPlainObject(j)?Ri.merge({},j):Ri.isArray(j)?j.slice():j}function E(I){Ri.isUndefined(i[I])?Ri.isUndefined(t[I])||(s[I]=w(void 0,t[I])):s[I]=w(t[I],i[I])}Ri.forEach(c,function(j){Ri.isUndefined(i[j])||(s[j]=w(void 0,i[j]))}),Ri.forEach(f,E),Ri.forEach(y,function(j){Ri.isUndefined(i[j])?Ri.isUndefined(t[j])||(s[j]=w(void 0,t[j])):s[j]=w(void 0,i[j])}),Ri.forEach(l,function(j){j in i?s[j]=w(t[j],i[j]):j in t&&(s[j]=w(void 0,t[j]))});var T=c.concat(f).concat(y).concat(l),S=Object.keys(t).concat(Object.keys(i)).filter(function(j){return T.indexOf(j)===-1});return Ri.forEach(S,E),s};const kR="axios",MR="0.21.4",zR="Promise based HTTP client for the browser and node.js",LR="index.js",RR={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},OR={type:"git",url:"https://github.com/axios/axios.git"},FR=["xhr","http","ajax","promise","node"],jR="Matt Zabriskie",DR="MIT",BR={url:"https://github.com/axios/axios/issues"},NR="https://axios-http.com",UR={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},$R={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},VR="dist/axios.min.js",GR="dist/axios.min.js",ZR="./index.d.ts",WR={"follow-redirects":"^1.14.0"},HR=[{path:"./dist/axios.min.js",threshold:"5kB"}],XR={name:kR,version:MR,description:zR,main:LR,scripts:RR,repository:OR,keywords:FR,author:jR,license:DR,bugs:BR,homepage:NR,devDependencies:UR,browser:$R,jsdelivr:VR,unpkg:GR,typings:ZR,dependencies:WR,bundlesize:HR};var sA=XR,B1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){B1[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var Z2={},qR=sA.version.split(".");function lA(e,t){for(var i=t?t.split("."):qR,s=e.split("."),c=0;c<3;c++){if(i[c]>s[c])return!0;if(i[c]<s[c])return!1}return!1}B1.transitional=function(t,i,s){var c=i&&lA(i);function f(y,l){return"[Axios v"+sA.version+"] Transitional option '"+y+"'"+l+(s?". "+s:"")}return function(y,l,w){if(t===!1)throw new Error(f(l," has been removed in "+i));return c&&!Z2[l]&&(Z2[l]=!0,console.warn(f(l," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(y,l,w):!0}};function KR(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var s=Object.keys(e),c=s.length;c-- >0;){var f=s[c],y=t[f];if(y){var l=e[f],w=l===void 0||y(l,f,e);if(w!==!0)throw new TypeError("option "+f+" must be "+w);continue}if(i!==!0)throw Error("Unknown option "+f)}}var YR={isOlderVersion:lA,assertOptions:KR,validators:B1},uA=Lo,JR=nA,W2=cR,H2=PR,bg=aA,cA=YR,bc=cA.validators;function pd(e){this.defaults=e,this.interceptors={request:new W2,response:new W2}}pd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=bg(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&cA.assertOptions(i,{silentJSONParsing:bc.transitional(bc.boolean,"1.0.0"),forcedJSONParsing:bc.transitional(bc.boolean,"1.0.0"),clarifyTimeoutError:bc.transitional(bc.boolean,"1.0.0")},!1);var s=[],c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(t)===!1||(c=c&&I.synchronous,s.unshift(I.fulfilled,I.rejected))});var f=[];this.interceptors.response.forEach(function(I){f.push(I.fulfilled,I.rejected)});var y;if(!c){var l=[H2,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(f),y=Promise.resolve(t);l.length;)y=y.then(l.shift(),l.shift());return y}for(var w=t;s.length;){var E=s.shift(),T=s.shift();try{w=E(w)}catch(S){T(S);break}}try{y=H2(w)}catch(S){return Promise.reject(S)}for(;f.length;)y=y.then(f.shift(),f.shift());return y};pd.prototype.getUri=function(t){return t=bg(this.defaults,t),JR(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};uA.forEach(["delete","get","head","options"],function(t){pd.prototype[t]=function(i,s){return this.request(bg(s||{},{method:t,url:i,data:(s||{}).data}))}});uA.forEach(["post","put","patch"],function(t){pd.prototype[t]=function(i,s,c){return this.request(bg(c||{},{method:t,url:i,data:s}))}});var QR=pd,s0,X2;function hA(){if(X2)return s0;X2=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,s0=e,s0}var l0,q2;function eO(){if(q2)return l0;q2=1;var e=hA();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(y){s=y});var c=this;i(function(y){c.reason||(c.reason=new e(y),s(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var s,c=new t(function(y){s=y});return{token:c,cancel:s}},l0=t,l0}var u0,K2;function tO(){return K2||(K2=1,u0=function(t){return function(s){return t.apply(null,s)}}),u0}var c0,Y2;function nO(){return Y2||(Y2=1,c0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),c0}var J2=Lo,rO=QC,Up=QR,iO=aA,oO=D1;function fA(e){var t=new Up(e),i=rO(Up.prototype.request,t);return J2.extend(i,Up.prototype,t),J2.extend(i,t),i}var xa=fA(oO);xa.Axios=Up;xa.create=function(t){return fA(iO(xa.defaults,t))};xa.Cancel=hA();xa.CancelToken=eO();xa.isCancel=oA();xa.all=function(t){return Promise.all(t)};xa.spread=tO();xa.isAxiosError=nO();WL.exports=xa;Wm.default=xa;(function(e){e.exports=Wm})(ZL);const aO={},sO=Object.freeze(Object.defineProperty({__proto__:null,default:aO},Symbol.toStringTag,{value:"Module"})),lO=n_(sO);var Eg={},uO=qc;function qc(e,t){this.x=e,this.y=t}qc.prototype={clone:function(){return new qc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),s=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=s,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),s=Math.sin(e),c=t.x+i*(this.x-t.x)-s*(this.y-t.y),f=t.y+s*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};qc.convert=function(e){return e instanceof qc?e:Array.isArray(e)?new qc(e[0],e[1]):e};var cO=uO,dA=sh;function sh(e,t,i,s,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=s,this._values=c,e.readFields(hO,this,t)}function hO(e,t,i){e==1?t.id=i.readVarint():e==2?fO(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function fO(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var s=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[s]=c}}sh.types=["Unknown","Point","LineString","Polygon"];sh.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,s=0,c=0,f=0,y=[],l;e.pos<t;){if(s<=0){var w=e.readVarint();i=w&7,s=w>>3}if(s--,i===1||i===2)c+=e.readSVarint(),f+=e.readSVarint(),i===1&&(l&&y.push(l),l=[]),l.push(new cO(c,f));else if(i===7)l&&l.push(l[0].clone());else throw new Error("unknown command "+i)}return l&&y.push(l),y};sh.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,s=0,c=0,f=0,y=1/0,l=-1/0,w=1/0,E=-1/0;e.pos<t;){if(s<=0){var T=e.readVarint();i=T&7,s=T>>3}if(s--,i===1||i===2)c+=e.readSVarint(),f+=e.readSVarint(),c<y&&(y=c),c>l&&(l=c),f<w&&(w=f),f>E&&(E=f);else if(i!==7)throw new Error("unknown command "+i)}return[y,w,l,E]};sh.prototype.toGeoJSON=function(e,t,i){var s=this.extent*Math.pow(2,i),c=this.extent*e,f=this.extent*t,y=this.loadGeometry(),l=sh.types[this.type],w,E;function T(j){for(var q=0;q<j.length;q++){var H=j[q],fe=180-(H.y+f)*360/s;j[q]=[(H.x+c)*360/s-180,360/Math.PI*Math.atan(Math.exp(fe*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(w=0;w<y.length;w++)S[w]=y[w][0];y=S,T(y);break;case 2:for(w=0;w<y.length;w++)T(y[w]);break;case 3:for(y=dO(y),w=0;w<y.length;w++)for(E=0;E<y[w].length;E++)T(y[w][E]);break}y.length===1?y=y[0]:l="Multi"+l;var I={type:"Feature",geometry:{type:l,coordinates:y},properties:this.properties};return"id"in this&&(I.id=this.id),I};function dO(e){var t=e.length;if(t<=1)return[e];for(var i=[],s,c,f=0;f<t;f++){var y=pO(e[f]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(s&&i.push(s),s=[e[f]]):s.push(e[f]))}return s&&i.push(s),i}function pO(e){for(var t=0,i=0,s=e.length,c=s-1,f,y;i<s;c=i++)f=e[i],y=e[c],t+=(y.x-f.x)*(f.y+y.y);return t}var mO=dA,pA=mA;function mA(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(gO,this,t),this.length=this._features.length}function gO(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(yO(i))}function yO(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var s=e.readVarint()>>3;t=s===1?e.readString():s===2?e.readFloat():s===3?e.readDouble():s===4?e.readVarint64():s===5?e.readVarint():s===6?e.readSVarint():s===7?e.readBoolean():null}return t}mA.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new mO(this._pbf,t,this.extent,this._keys,this._values)};var vO=pA,_O=xO;function xO(e,t){this.layers=e.readFields(wO,{},t)}function wO(e,t,i){if(e===3){var s=new vO(i,i.readVarint()+i.pos);s.length&&(t[s.name]=s)}}Eg.VectorTile=_O;Eg.VectorTileFeature=dA;Eg.VectorTileLayer=pA;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=cL,i=CL,s=AL,c=Jv,f=lO,y=Eg;function l($){return $&&typeof $=="object"&&"default"in $?$:{default:$}}var w=l(s),E=l(c),T=l(f),S=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof wl<"u"?wl:typeof self<"u"?self:{};function I($){var N={exports:{}};return $(N,N.exports),N.exports}var j=I(function($,N){(function(V,D){$.exports=D(E.default)})(S,function(oe){return function(V){var D={};function b(k){if(D[k])return D[k].exports;var G=D[k]={i:k,l:!1,exports:{}};return V[k].call(G.exports,G,G.exports,b),G.l=!0,G.exports}return b.m=V,b.c=D,b.d=function(k,G,Y){b.o(k,G)||Object.defineProperty(k,G,{enumerable:!0,get:Y})},b.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},b.t=function(k,G){if(G&1&&(k=b(k)),G&8||G&4&&typeof k=="object"&&k&&k.__esModule)return k;var Y=Object.create(null);if(b.r(Y),Object.defineProperty(Y,"default",{enumerable:!0,value:k}),G&2&&typeof k!="string")for(var K in k)b.d(Y,K,function(pe){return k[pe]}.bind(null,K));return Y},b.n=function(k){var G=k&&k.__esModule?function(){return k.default}:function(){return k};return b.d(G,"a",G),G},b.o=function(k,G){return Object.prototype.hasOwnProperty.call(k,G)},b.p="",b(b.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(V,D,b){b.r(D),b.d(D,"CacheControl",function(){return we}),b.d(D,"parse",function(){return De}),b.d(D,"format",function(){return Pe}),b("./node_modules/core-js/modules/es6.array.from.js"),b("./node_modules/core-js/modules/es6.function.name.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/core-js/modules/web.dom.iterable.js"),b("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.regexp.split.js"),b("./node_modules/core-js/modules/es6.number.is-finite.js");function k(Me,Ve){return _e(Me)||pe(Me,Ve)||Y(Me,Ve)||G()}function G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(Me,Ve){if(Me){if(typeof Me=="string")return K(Me,Ve);var Ne=Object.prototype.toString.call(Me).slice(8,-1);if(Ne==="Object"&&Me.constructor&&(Ne=Me.constructor.name),Ne==="Map"||Ne==="Set")return Array.from(Me);if(Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne))return K(Me,Ve)}}function K(Me,Ve){(Ve==null||Ve>Me.length)&&(Ve=Me.length);for(var Ne=0,Qe=new Array(Ve);Ne<Ve;Ne++)Qe[Ne]=Me[Ne];return Qe}function pe(Me,Ve){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Me)))){var Ne=[],Qe=!0,ct=!1,mt=void 0;try{for(var Lt=Me[Symbol.iterator](),dt;!(Qe=(dt=Lt.next()).done)&&(Ne.push(dt.value),!(Ve&&Ne.length===Ve));Qe=!0);}catch(bt){ct=!0,mt=bt}finally{try{!Qe&&Lt.return!=null&&Lt.return()}finally{if(ct)throw mt}}return Ne}}function _e(Me){if(Array.isArray(Me))return Me}function be(Me,Ve){if(!(Me instanceof Ve))throw new TypeError("Cannot call a class as a function")}function Q(Me,Ve){for(var Ne=0;Ne<Ve.length;Ne++){var Qe=Ve[Ne];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(Me,Qe.key,Qe)}}function re(Me,Ve,Ne){return Ve&&Q(Me.prototype,Ve),Ne&&Q(Me,Ne),Me}var ne=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,te={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function ce(Me){return Me===null}function xe(Me){if(!Me)return null;var Ve=parseInt(Me,10);return!Number.isFinite(Ve)||Ve<0?null:Ve}var we=function(){function Me(){be(this,Me),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return re(Me,[{key:"parse",value:function(Ne){if(!Ne||Ne.length===0)return this;var Qe={},ct=Ne.match(ne)||[];return Array.prototype.forEach.call(ct,function(mt){var Lt=mt.split("=",2),dt=k(Lt,1),bt=dt[0],Nt=null;Lt.length>1&&(Nt=Lt[1].trim()),Qe[bt.toLowerCase()]=Nt}),this.maxAge=xe(Qe[te.maxAge]),this.sharedMaxAge=xe(Qe[te.sharedMaxAge]),this.maxStale=ce(Qe[te.maxStale]),this.maxStaleDuration=xe(Qe[te.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=xe(Qe[te.minFresh]),this.immutable=ce(Qe[te.immutable]),this.mustRevalidate=ce(Qe[te.mustRevalidate]),this.noCache=ce(Qe[te.noCache]),this.noStore=ce(Qe[te.noStore]),this.noTransform=ce(Qe[te.noTransform]),this.onlyIfCached=ce(Qe[te.onlyIfCached]),this.private=ce(Qe[te.private]),this.proxyRevalidate=ce(Qe[te.proxyRevalidate]),this.public=ce(Qe[te.public]),this}},{key:"format",value:function(){var Ne=[];return this.maxAge&&Ne.push("".concat(te.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ne.push("".concat(te.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ne.push("".concat(te.maxStale,"=").concat(this.maxStaleDuration)):Ne.push(te.maxStale)),this.minFresh&&Ne.push("".concat(te.minFresh,"=").concat(this.minFresh)),this.immutable&&Ne.push(te.immutable),this.mustRevalidate&&Ne.push(te.mustRevalidate),this.noCache&&Ne.push(te.noCache),this.noStore&&Ne.push(te.noStore),this.noTransform&&Ne.push(te.noTransform),this.onlyIfCached&&Ne.push(te.onlyIfCached),this.private&&Ne.push(te.private),this.proxyRevalidate&&Ne.push(te.proxyRevalidate),this.public&&Ne.push(te.public),Ne.join(", ")}}]),Me}();function De(Me){var Ve=new we;return Ve.parse(Me)}function Pe(Me){return Me instanceof we?Me.format():we.prototype.format.call(Me)}D.default={CacheControl:we,parse:De,format:Pe}},"./node_modules/charenc/charenc.js":function(V,D){var b={utf8:{stringToBytes:function(k){return b.bin.stringToBytes(unescape(encodeURIComponent(k)))},bytesToString:function(k){return decodeURIComponent(escape(b.bin.bytesToString(k)))}},bin:{stringToBytes:function(k){for(var G=[],Y=0;Y<k.length;Y++)G.push(k.charCodeAt(Y)&255);return G},bytesToString:function(k){for(var G=[],Y=0;Y<k.length;Y++)G.push(String.fromCharCode(k[Y]));return G.join("")}}};V.exports=b},"./node_modules/core-js/modules/_a-function.js":function(V,D){V.exports=function(b){if(typeof b!="function")throw TypeError(b+" is not a function!");return b}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_wks.js")("unscopables"),G=Array.prototype;G[k]==null&&b("./node_modules/core-js/modules/_hide.js")(G,k,{}),V.exports=function(Y){G[k][Y]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_string-at.js")(!0);V.exports=function(G,Y,K){return Y+(K?k(G,Y).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_is-object.js");V.exports=function(G){if(!k(G))throw TypeError(G+" is not an object!");return G}},"./node_modules/core-js/modules/_array-includes.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_to-iobject.js"),G=b("./node_modules/core-js/modules/_to-length.js"),Y=b("./node_modules/core-js/modules/_to-absolute-index.js");V.exports=function(K){return function(pe,_e,be){var Q=k(pe),re=G(Q.length),ne=Y(be,re),te;if(K&&_e!=_e){for(;re>ne;)if(te=Q[ne++],te!=te)return!0}else for(;re>ne;ne++)if((K||ne in Q)&&Q[ne]===_e)return K||ne||0;return!K&&-1}}},"./node_modules/core-js/modules/_bind.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_a-function.js"),G=b("./node_modules/core-js/modules/_is-object.js"),Y=b("./node_modules/core-js/modules/_invoke.js"),K=[].slice,pe={},_e=function(be,Q,re){if(!(Q in pe)){for(var ne=[],te=0;te<Q;te++)ne[te]="a["+te+"]";pe[Q]=Function("F,a","return new F("+ne.join(",")+")")}return pe[Q](be,re)};V.exports=Function.bind||function(Q){var re=k(this),ne=K.call(arguments,1),te=function(){var ce=ne.concat(K.call(arguments));return this instanceof te?_e(re,ce.length,ce):Y(re,ce,Q)};return G(re.prototype)&&(te.prototype=re.prototype),te}},"./node_modules/core-js/modules/_classof.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_cof.js"),G=b("./node_modules/core-js/modules/_wks.js")("toStringTag"),Y=k(function(){return arguments}())=="Arguments",K=function(pe,_e){try{return pe[_e]}catch{}};V.exports=function(pe){var _e,be,Q;return pe===void 0?"Undefined":pe===null?"Null":typeof(be=K(_e=Object(pe),G))=="string"?be:Y?k(_e):(Q=k(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":Q}},"./node_modules/core-js/modules/_cof.js":function(V,D){var b={}.toString;V.exports=function(k){return b.call(k).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(V,D){var b=V.exports={version:"2.6.12"};typeof __e=="number"&&(__e=b)},"./node_modules/core-js/modules/_create-property.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-dp.js"),G=b("./node_modules/core-js/modules/_property-desc.js");V.exports=function(Y,K,pe){K in Y?k.f(Y,K,G(0,pe)):Y[K]=pe}},"./node_modules/core-js/modules/_ctx.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_a-function.js");V.exports=function(G,Y,K){if(k(G),Y===void 0)return G;switch(K){case 1:return function(pe){return G.call(Y,pe)};case 2:return function(pe,_e){return G.call(Y,pe,_e)};case 3:return function(pe,_e,be){return G.call(Y,pe,_e,be)}}return function(){return G.apply(Y,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(V,D){V.exports=function(b){if(b==null)throw TypeError("Can't call method on  "+b);return b}},"./node_modules/core-js/modules/_descriptors.js":function(V,D,b){V.exports=!b("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_is-object.js"),G=b("./node_modules/core-js/modules/_global.js").document,Y=k(G)&&k(G.createElement);V.exports=function(K){return Y?G.createElement(K):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(V,D){V.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-keys.js"),G=b("./node_modules/core-js/modules/_object-gops.js"),Y=b("./node_modules/core-js/modules/_object-pie.js");V.exports=function(K){var pe=k(K),_e=G.f;if(_e)for(var be=_e(K),Q=Y.f,re=0,ne;be.length>re;)Q.call(K,ne=be[re++])&&pe.push(ne);return pe}},"./node_modules/core-js/modules/_export.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_global.js"),G=b("./node_modules/core-js/modules/_core.js"),Y=b("./node_modules/core-js/modules/_hide.js"),K=b("./node_modules/core-js/modules/_redefine.js"),pe=b("./node_modules/core-js/modules/_ctx.js"),_e="prototype",be=function(Q,re,ne){var te=Q&be.F,ce=Q&be.G,xe=Q&be.S,we=Q&be.P,De=Q&be.B,Pe=ce?k:xe?k[re]||(k[re]={}):(k[re]||{})[_e],Me=ce?G:G[re]||(G[re]={}),Ve=Me[_e]||(Me[_e]={}),Ne,Qe,ct,mt;ce&&(ne=re);for(Ne in ne)Qe=!te&&Pe&&Pe[Ne]!==void 0,ct=(Qe?Pe:ne)[Ne],mt=De&&Qe?pe(ct,k):we&&typeof ct=="function"?pe(Function.call,ct):ct,Pe&&K(Pe,Ne,ct,Q&be.U),Me[Ne]!=ct&&Y(Me,Ne,mt),we&&Ve[Ne]!=ct&&(Ve[Ne]=ct)};k.core=G,be.F=1,be.G=2,be.S=4,be.P=8,be.B=16,be.W=32,be.U=64,be.R=128,V.exports=be},"./node_modules/core-js/modules/_fails-is-regexp.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_wks.js")("match");V.exports=function(G){var Y=/./;try{"/./"[G](Y)}catch{try{return Y[k]=!1,!"/./"[G](Y)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(V,D){V.exports=function(b){try{return!!b()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(V,D,b){b("./node_modules/core-js/modules/es6.regexp.exec.js");var k=b("./node_modules/core-js/modules/_redefine.js"),G=b("./node_modules/core-js/modules/_hide.js"),Y=b("./node_modules/core-js/modules/_fails.js"),K=b("./node_modules/core-js/modules/_defined.js"),pe=b("./node_modules/core-js/modules/_wks.js"),_e=b("./node_modules/core-js/modules/_regexp-exec.js"),be=pe("species"),Q=!Y(function(){var ne=/./;return ne.exec=function(){var te=[];return te.groups={a:"7"},te},"".replace(ne,"$<a>")!=="7"}),re=function(){var ne=/(?:)/,te=ne.exec;ne.exec=function(){return te.apply(this,arguments)};var ce="ab".split(ne);return ce.length===2&&ce[0]==="a"&&ce[1]==="b"}();V.exports=function(ne,te,ce){var xe=pe(ne),we=!Y(function(){var Qe={};return Qe[xe]=function(){return 7},""[ne](Qe)!=7}),De=we?!Y(function(){var Qe=!1,ct=/a/;return ct.exec=function(){return Qe=!0,null},ne==="split"&&(ct.constructor={},ct.constructor[be]=function(){return ct}),ct[xe](""),!Qe}):void 0;if(!we||!De||ne==="replace"&&!Q||ne==="split"&&!re){var Pe=/./[xe],Me=ce(K,xe,""[ne],function(ct,mt,Lt,dt,bt){return mt.exec===_e?we&&!bt?{done:!0,value:Pe.call(mt,Lt,dt)}:{done:!0,value:ct.call(Lt,mt,dt)}:{done:!1}}),Ve=Me[0],Ne=Me[1];k(String.prototype,ne,Ve),G(RegExp.prototype,xe,te==2?function(Qe,ct){return Ne.call(Qe,this,ct)}:function(Qe){return Ne.call(Qe,this)})}}},"./node_modules/core-js/modules/_flags.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_an-object.js");V.exports=function(){var G=k(this),Y="";return G.global&&(Y+="g"),G.ignoreCase&&(Y+="i"),G.multiline&&(Y+="m"),G.unicode&&(Y+="u"),G.sticky&&(Y+="y"),Y}},"./node_modules/core-js/modules/_function-to-string.js":function(V,D,b){V.exports=b("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(V,D){var b=V.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=b)},"./node_modules/core-js/modules/_has.js":function(V,D){var b={}.hasOwnProperty;V.exports=function(k,G){return b.call(k,G)}},"./node_modules/core-js/modules/_hide.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-dp.js"),G=b("./node_modules/core-js/modules/_property-desc.js");V.exports=b("./node_modules/core-js/modules/_descriptors.js")?function(Y,K,pe){return k.f(Y,K,G(1,pe))}:function(Y,K,pe){return Y[K]=pe,Y}},"./node_modules/core-js/modules/_html.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_global.js").document;V.exports=k&&k.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(V,D,b){V.exports=!b("./node_modules/core-js/modules/_descriptors.js")&&!b("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(b("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(V,D){V.exports=function(b,k,G){var Y=G===void 0;switch(k.length){case 0:return Y?b():b.call(G);case 1:return Y?b(k[0]):b.call(G,k[0]);case 2:return Y?b(k[0],k[1]):b.call(G,k[0],k[1]);case 3:return Y?b(k[0],k[1],k[2]):b.call(G,k[0],k[1],k[2]);case 4:return Y?b(k[0],k[1],k[2],k[3]):b.call(G,k[0],k[1],k[2],k[3])}return b.apply(G,k)}},"./node_modules/core-js/modules/_iobject.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_cof.js");V.exports=Object("z").propertyIsEnumerable(0)?Object:function(G){return k(G)=="String"?G.split(""):Object(G)}},"./node_modules/core-js/modules/_is-array-iter.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_iterators.js"),G=b("./node_modules/core-js/modules/_wks.js")("iterator"),Y=Array.prototype;V.exports=function(K){return K!==void 0&&(k.Array===K||Y[G]===K)}},"./node_modules/core-js/modules/_is-array.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_cof.js");V.exports=Array.isArray||function(Y){return k(Y)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(V,D){V.exports=function(b){return typeof b=="object"?b!==null:typeof b=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_is-object.js"),G=b("./node_modules/core-js/modules/_cof.js"),Y=b("./node_modules/core-js/modules/_wks.js")("match");V.exports=function(K){var pe;return k(K)&&((pe=K[Y])!==void 0?!!pe:G(K)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_an-object.js");V.exports=function(G,Y,K,pe){try{return pe?Y(k(K)[0],K[1]):Y(K)}catch(be){var _e=G.return;throw _e!==void 0&&k(_e.call(G)),be}}},"./node_modules/core-js/modules/_iter-create.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-create.js"),G=b("./node_modules/core-js/modules/_property-desc.js"),Y=b("./node_modules/core-js/modules/_set-to-string-tag.js"),K={};b("./node_modules/core-js/modules/_hide.js")(K,b("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),V.exports=function(pe,_e,be){pe.prototype=k(K,{next:G(1,be)}),Y(pe,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_library.js"),G=b("./node_modules/core-js/modules/_export.js"),Y=b("./node_modules/core-js/modules/_redefine.js"),K=b("./node_modules/core-js/modules/_hide.js"),pe=b("./node_modules/core-js/modules/_iterators.js"),_e=b("./node_modules/core-js/modules/_iter-create.js"),be=b("./node_modules/core-js/modules/_set-to-string-tag.js"),Q=b("./node_modules/core-js/modules/_object-gpo.js"),re=b("./node_modules/core-js/modules/_wks.js")("iterator"),ne=!([].keys&&"next"in[].keys()),te="@@iterator",ce="keys",xe="values",we=function(){return this};V.exports=function(De,Pe,Me,Ve,Ne,Qe,ct){_e(Me,Pe,Ve);var mt=function(F){if(!ne&&F in Nt)return Nt[F];switch(F){case ce:return function(){return new Me(this,F)};case xe:return function(){return new Me(this,F)}}return function(){return new Me(this,F)}},Lt=Pe+" Iterator",dt=Ne==xe,bt=!1,Nt=De.prototype,Yt=Nt[re]||Nt[te]||Ne&&Nt[Ne],dn=Yt||mt(Ne),Pn=Ne?dt?mt("entries"):dn:void 0,Cn=Pe=="Array"&&Nt.entries||Yt,mn,Vt,Te;if(Cn&&(Te=Q(Cn.call(new De)),Te!==Object.prototype&&Te.next&&(be(Te,Lt,!0),!k&&typeof Te[re]!="function"&&K(Te,re,we))),dt&&Yt&&Yt.name!==xe&&(bt=!0,dn=function(){return Yt.call(this)}),(!k||ct)&&(ne||bt||!Nt[re])&&K(Nt,re,dn),pe[Pe]=dn,pe[Lt]=we,Ne)if(mn={values:dt?dn:mt(xe),keys:Qe?dn:mt(ce),entries:Pn},ct)for(Vt in mn)Vt in Nt||Y(Nt,Vt,mn[Vt]);else G(G.P+G.F*(ne||bt),Pe,mn);return mn}},"./node_modules/core-js/modules/_iter-detect.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_wks.js")("iterator"),G=!1;try{var Y=[7][k]();Y.return=function(){G=!0},Array.from(Y,function(){throw 2})}catch{}V.exports=function(K,pe){if(!pe&&!G)return!1;var _e=!1;try{var be=[7],Q=be[k]();Q.next=function(){return{done:_e=!0}},be[k]=function(){return Q},K(be)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(V,D){V.exports=function(b,k){return{value:k,done:!!b}}},"./node_modules/core-js/modules/_iterators.js":function(V,D){V.exports={}},"./node_modules/core-js/modules/_library.js":function(V,D){V.exports=!1},"./node_modules/core-js/modules/_meta.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_uid.js")("meta"),G=b("./node_modules/core-js/modules/_is-object.js"),Y=b("./node_modules/core-js/modules/_has.js"),K=b("./node_modules/core-js/modules/_object-dp.js").f,pe=0,_e=Object.isExtensible||function(){return!0},be=!b("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),Q=function(xe){K(xe,k,{value:{i:"O"+ ++pe,w:{}}})},re=function(xe,we){if(!G(xe))return typeof xe=="symbol"?xe:(typeof xe=="string"?"S":"P")+xe;if(!Y(xe,k)){if(!_e(xe))return"F";if(!we)return"E";Q(xe)}return xe[k].i},ne=function(xe,we){if(!Y(xe,k)){if(!_e(xe))return!0;if(!we)return!1;Q(xe)}return xe[k].w},te=function(xe){return be&&ce.NEED&&_e(xe)&&!Y(xe,k)&&Q(xe),xe},ce=V.exports={KEY:k,NEED:!1,fastKey:re,getWeak:ne,onFreeze:te}},"./node_modules/core-js/modules/_object-create.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_an-object.js"),G=b("./node_modules/core-js/modules/_object-dps.js"),Y=b("./node_modules/core-js/modules/_enum-bug-keys.js"),K=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),pe=function(){},_e="prototype",be=function(){var Q=b("./node_modules/core-js/modules/_dom-create.js")("iframe"),re=Y.length,ne="<",te=">",ce;for(Q.style.display="none",b("./node_modules/core-js/modules/_html.js").appendChild(Q),Q.src="javascript:",ce=Q.contentWindow.document,ce.open(),ce.write(ne+"script"+te+"document.F=Object"+ne+"/script"+te),ce.close(),be=ce.F;re--;)delete be[_e][Y[re]];return be()};V.exports=Object.create||function(re,ne){var te;return re!==null?(pe[_e]=k(re),te=new pe,pe[_e]=null,te[K]=re):te=be(),ne===void 0?te:G(te,ne)}},"./node_modules/core-js/modules/_object-dp.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_an-object.js"),G=b("./node_modules/core-js/modules/_ie8-dom-define.js"),Y=b("./node_modules/core-js/modules/_to-primitive.js"),K=Object.defineProperty;D.f=b("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,be,Q){if(k(_e),be=Y(be,!0),k(Q),G)try{return K(_e,be,Q)}catch{}if("get"in Q||"set"in Q)throw TypeError("Accessors not supported!");return"value"in Q&&(_e[be]=Q.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-dp.js"),G=b("./node_modules/core-js/modules/_an-object.js"),Y=b("./node_modules/core-js/modules/_object-keys.js");V.exports=b("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(pe,_e){G(pe);for(var be=Y(_e),Q=be.length,re=0,ne;Q>re;)k.f(pe,ne=be[re++],_e[ne]);return pe}},"./node_modules/core-js/modules/_object-gopd.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-pie.js"),G=b("./node_modules/core-js/modules/_property-desc.js"),Y=b("./node_modules/core-js/modules/_to-iobject.js"),K=b("./node_modules/core-js/modules/_to-primitive.js"),pe=b("./node_modules/core-js/modules/_has.js"),_e=b("./node_modules/core-js/modules/_ie8-dom-define.js"),be=Object.getOwnPropertyDescriptor;D.f=b("./node_modules/core-js/modules/_descriptors.js")?be:function(re,ne){if(re=Y(re),ne=K(ne,!0),_e)try{return be(re,ne)}catch{}if(pe(re,ne))return G(!k.f.call(re,ne),re[ne])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_to-iobject.js"),G=b("./node_modules/core-js/modules/_object-gopn.js").f,Y={}.toString,K=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],pe=function(_e){try{return G(_e)}catch{return K.slice()}};V.exports.f=function(be){return K&&Y.call(be)=="[object Window]"?pe(be):G(k(be))}},"./node_modules/core-js/modules/_object-gopn.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-keys-internal.js"),G=b("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");D.f=Object.getOwnPropertyNames||function(K){return k(K,G)}},"./node_modules/core-js/modules/_object-gops.js":function(V,D){D.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_has.js"),G=b("./node_modules/core-js/modules/_to-object.js"),Y=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),K=Object.prototype;V.exports=Object.getPrototypeOf||function(pe){return pe=G(pe),k(pe,Y)?pe[Y]:typeof pe.constructor=="function"&&pe instanceof pe.constructor?pe.constructor.prototype:pe instanceof Object?K:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_has.js"),G=b("./node_modules/core-js/modules/_to-iobject.js"),Y=b("./node_modules/core-js/modules/_array-includes.js")(!1),K=b("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");V.exports=function(pe,_e){var be=G(pe),Q=0,re=[],ne;for(ne in be)ne!=K&&k(be,ne)&&re.push(ne);for(;_e.length>Q;)k(be,ne=_e[Q++])&&(~Y(re,ne)||re.push(ne));return re}},"./node_modules/core-js/modules/_object-keys.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-keys-internal.js"),G=b("./node_modules/core-js/modules/_enum-bug-keys.js");V.exports=Object.keys||function(K){return k(K,G)}},"./node_modules/core-js/modules/_object-pie.js":function(V,D){D.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-gopn.js"),G=b("./node_modules/core-js/modules/_object-gops.js"),Y=b("./node_modules/core-js/modules/_an-object.js"),K=b("./node_modules/core-js/modules/_global.js").Reflect;V.exports=K&&K.ownKeys||function(_e){var be=k.f(Y(_e)),Q=G.f;return Q?be.concat(Q(_e)):be}},"./node_modules/core-js/modules/_property-desc.js":function(V,D){V.exports=function(b,k){return{enumerable:!(b&1),configurable:!(b&2),writable:!(b&4),value:k}}},"./node_modules/core-js/modules/_redefine.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_global.js"),G=b("./node_modules/core-js/modules/_hide.js"),Y=b("./node_modules/core-js/modules/_has.js"),K=b("./node_modules/core-js/modules/_uid.js")("src"),pe=b("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",be=(""+pe).split(_e);b("./node_modules/core-js/modules/_core.js").inspectSource=function(Q){return pe.call(Q)},(V.exports=function(Q,re,ne,te){var ce=typeof ne=="function";ce&&(Y(ne,"name")||G(ne,"name",re)),Q[re]!==ne&&(ce&&(Y(ne,K)||G(ne,K,Q[re]?""+Q[re]:be.join(String(re)))),Q===k?Q[re]=ne:te?Q[re]?Q[re]=ne:G(Q,re,ne):(delete Q[re],G(Q,re,ne)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[K]||pe.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_classof.js"),G=RegExp.prototype.exec;V.exports=function(Y,K){var pe=Y.exec;if(typeof pe=="function"){var _e=pe.call(Y,K);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(k(Y)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return G.call(Y,K)}},"./node_modules/core-js/modules/_regexp-exec.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_flags.js"),G=RegExp.prototype.exec,Y=String.prototype.replace,K=G,pe="lastIndex",_e=function(){var re=/a/,ne=/b*/g;return G.call(re,"a"),G.call(ne,"a"),re[pe]!==0||ne[pe]!==0}(),be=/()??/.exec("")[1]!==void 0,Q=_e||be;Q&&(K=function(ne){var te=this,ce,xe,we,De;return be&&(xe=new RegExp("^"+te.source+"$(?!\\s)",k.call(te))),_e&&(ce=te[pe]),we=G.call(te,ne),_e&&we&&(te[pe]=te.global?we.index+we[0].length:ce),be&&we&&we.length>1&&Y.call(we[0],xe,function(){for(De=1;De<arguments.length-2;De++)arguments[De]===void 0&&(we[De]=void 0)}),we}),V.exports=K},"./node_modules/core-js/modules/_set-to-string-tag.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-dp.js").f,G=b("./node_modules/core-js/modules/_has.js"),Y=b("./node_modules/core-js/modules/_wks.js")("toStringTag");V.exports=function(K,pe,_e){K&&!G(K=_e?K:K.prototype,Y)&&k(K,Y,{configurable:!0,value:pe})}},"./node_modules/core-js/modules/_shared-key.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_shared.js")("keys"),G=b("./node_modules/core-js/modules/_uid.js");V.exports=function(Y){return k[Y]||(k[Y]=G(Y))}},"./node_modules/core-js/modules/_shared.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_core.js"),G=b("./node_modules/core-js/modules/_global.js"),Y="__core-js_shared__",K=G[Y]||(G[Y]={});(V.exports=function(pe,_e){return K[pe]||(K[pe]=_e!==void 0?_e:{})})("versions",[]).push({version:k.version,mode:b("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_an-object.js"),G=b("./node_modules/core-js/modules/_a-function.js"),Y=b("./node_modules/core-js/modules/_wks.js")("species");V.exports=function(K,pe){var _e=k(K).constructor,be;return _e===void 0||(be=k(_e)[Y])==null?pe:G(be)}},"./node_modules/core-js/modules/_string-at.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_to-integer.js"),G=b("./node_modules/core-js/modules/_defined.js");V.exports=function(Y){return function(K,pe){var _e=String(G(K)),be=k(pe),Q=_e.length,re,ne;return be<0||be>=Q?Y?"":void 0:(re=_e.charCodeAt(be),re<55296||re>56319||be+1===Q||(ne=_e.charCodeAt(be+1))<56320||ne>57343?Y?_e.charAt(be):re:Y?_e.slice(be,be+2):(re-55296<<10)+(ne-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_is-regexp.js"),G=b("./node_modules/core-js/modules/_defined.js");V.exports=function(Y,K,pe){if(k(K))throw TypeError("String#"+pe+" doesn't accept regex!");return String(G(Y))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_to-integer.js"),G=Math.max,Y=Math.min;V.exports=function(K,pe){return K=k(K),K<0?G(K+pe,0):Y(K,pe)}},"./node_modules/core-js/modules/_to-integer.js":function(V,D){var b=Math.ceil,k=Math.floor;V.exports=function(G){return isNaN(G=+G)?0:(G>0?k:b)(G)}},"./node_modules/core-js/modules/_to-iobject.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_iobject.js"),G=b("./node_modules/core-js/modules/_defined.js");V.exports=function(Y){return k(G(Y))}},"./node_modules/core-js/modules/_to-length.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_to-integer.js"),G=Math.min;V.exports=function(Y){return Y>0?G(k(Y),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_defined.js");V.exports=function(G){return Object(k(G))}},"./node_modules/core-js/modules/_to-primitive.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_is-object.js");V.exports=function(G,Y){if(!k(G))return G;var K,pe;if(Y&&typeof(K=G.toString)=="function"&&!k(pe=K.call(G))||typeof(K=G.valueOf)=="function"&&!k(pe=K.call(G))||!Y&&typeof(K=G.toString)=="function"&&!k(pe=K.call(G)))return pe;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(V,D){var b=0,k=Math.random();V.exports=function(G){return"Symbol(".concat(G===void 0?"":G,")_",(++b+k).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_global.js"),G=b("./node_modules/core-js/modules/_core.js"),Y=b("./node_modules/core-js/modules/_library.js"),K=b("./node_modules/core-js/modules/_wks-ext.js"),pe=b("./node_modules/core-js/modules/_object-dp.js").f;V.exports=function(_e){var be=G.Symbol||(G.Symbol=Y?{}:k.Symbol||{});_e.charAt(0)!="_"&&!(_e in be)&&pe(be,_e,{value:K.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(V,D,b){D.f=b("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_shared.js")("wks"),G=b("./node_modules/core-js/modules/_uid.js"),Y=b("./node_modules/core-js/modules/_global.js").Symbol,K=typeof Y=="function",pe=V.exports=function(_e){return k[_e]||(k[_e]=K&&Y[_e]||(K?Y:G)("Symbol."+_e))};pe.store=k},"./node_modules/core-js/modules/core.get-iterator-method.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_classof.js"),G=b("./node_modules/core-js/modules/_wks.js")("iterator"),Y=b("./node_modules/core-js/modules/_iterators.js");V.exports=b("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(K){if(K!=null)return K[G]||K["@@iterator"]||Y[k(K)]}},"./node_modules/core-js/modules/es6.array.from.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_ctx.js"),G=b("./node_modules/core-js/modules/_export.js"),Y=b("./node_modules/core-js/modules/_to-object.js"),K=b("./node_modules/core-js/modules/_iter-call.js"),pe=b("./node_modules/core-js/modules/_is-array-iter.js"),_e=b("./node_modules/core-js/modules/_to-length.js"),be=b("./node_modules/core-js/modules/_create-property.js"),Q=b("./node_modules/core-js/modules/core.get-iterator-method.js");G(G.S+G.F*!b("./node_modules/core-js/modules/_iter-detect.js")(function(re){Array.from(re)}),"Array",{from:function(ne){var te=Y(ne),ce=typeof this=="function"?this:Array,xe=arguments.length,we=xe>1?arguments[1]:void 0,De=we!==void 0,Pe=0,Me=Q(te),Ve,Ne,Qe,ct;if(De&&(we=k(we,xe>2?arguments[2]:void 0,2)),Me!=null&&!(ce==Array&&pe(Me)))for(ct=Me.call(te),Ne=new ce;!(Qe=ct.next()).done;Pe++)be(Ne,Pe,De?K(ct,we,[Qe.value,Pe],!0):Qe.value);else for(Ve=_e(te.length),Ne=new ce(Ve);Ve>Pe;Pe++)be(Ne,Pe,De?we(te[Pe],Pe):te[Pe]);return Ne.length=Pe,Ne}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_add-to-unscopables.js"),G=b("./node_modules/core-js/modules/_iter-step.js"),Y=b("./node_modules/core-js/modules/_iterators.js"),K=b("./node_modules/core-js/modules/_to-iobject.js");V.exports=b("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(pe,_e){this._t=K(pe),this._i=0,this._k=_e},function(){var pe=this._t,_e=this._k,be=this._i++;return!pe||be>=pe.length?(this._t=void 0,G(1)):_e=="keys"?G(0,be):_e=="values"?G(0,pe[be]):G(0,[be,pe[be]])},"values"),Y.Arguments=Y.Array,k("keys"),k("values"),k("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_export.js");k(k.P,"Function",{bind:b("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_object-dp.js").f,G=Function.prototype,Y=/^\s*function ([^ (]*)/,K="name";K in G||b("./node_modules/core-js/modules/_descriptors.js")&&k(G,K,{configurable:!0,get:function(){try{return(""+this).match(Y)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_export.js"),G=b("./node_modules/core-js/modules/_global.js").isFinite;k(k.S,"Number",{isFinite:function(K){return typeof K=="number"&&G(K)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_classof.js"),G={};G[b("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",G+""!="[object z]"&&b("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+k(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_regexp-exec.js");b("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:k!==/./.exec},{exec:k})},"./node_modules/core-js/modules/es6.regexp.split.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_is-regexp.js"),G=b("./node_modules/core-js/modules/_an-object.js"),Y=b("./node_modules/core-js/modules/_species-constructor.js"),K=b("./node_modules/core-js/modules/_advance-string-index.js"),pe=b("./node_modules/core-js/modules/_to-length.js"),_e=b("./node_modules/core-js/modules/_regexp-exec-abstract.js"),be=b("./node_modules/core-js/modules/_regexp-exec.js"),Q=b("./node_modules/core-js/modules/_fails.js"),re=Math.min,ne=[].push,te="split",ce="length",xe="lastIndex",we=4294967295,De=!Q(function(){});b("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Pe,Me,Ve,Ne){var Qe;return"abbc"[te](/(b)*/)[1]=="c"||"test"[te](/(?:)/,-1)[ce]!=4||"ab"[te](/(?:ab)*/)[ce]!=2||"."[te](/(.?)(.?)/)[ce]!=4||"."[te](/()()/)[ce]>1||""[te](/.?/)[ce]?Qe=function(ct,mt){var Lt=String(this);if(ct===void 0&&mt===0)return[];if(!k(ct))return Ve.call(Lt,ct,mt);for(var dt=[],bt=(ct.ignoreCase?"i":"")+(ct.multiline?"m":"")+(ct.unicode?"u":"")+(ct.sticky?"y":""),Nt=0,Yt=mt===void 0?we:mt>>>0,dn=new RegExp(ct.source,bt+"g"),Pn,Cn,mn;(Pn=be.call(dn,Lt))&&(Cn=dn[xe],!(Cn>Nt&&(dt.push(Lt.slice(Nt,Pn.index)),Pn[ce]>1&&Pn.index<Lt[ce]&&ne.apply(dt,Pn.slice(1)),mn=Pn[0][ce],Nt=Cn,dt[ce]>=Yt)));)dn[xe]===Pn.index&&dn[xe]++;return Nt===Lt[ce]?(mn||!dn.test(""))&&dt.push(""):dt.push(Lt.slice(Nt)),dt[ce]>Yt?dt.slice(0,Yt):dt}:"0"[te](void 0,0)[ce]?Qe=function(ct,mt){return ct===void 0&&mt===0?[]:Ve.call(this,ct,mt)}:Qe=Ve,[function(mt,Lt){var dt=Pe(this),bt=mt==null?void 0:mt[Me];return bt!==void 0?bt.call(mt,dt,Lt):Qe.call(String(dt),mt,Lt)},function(ct,mt){var Lt=Ne(Qe,ct,this,mt,Qe!==Ve);if(Lt.done)return Lt.value;var dt=G(ct),bt=String(this),Nt=Y(dt,RegExp),Yt=dt.unicode,dn=(dt.ignoreCase?"i":"")+(dt.multiline?"m":"")+(dt.unicode?"u":"")+(De?"y":"g"),Pn=new Nt(De?dt:"^(?:"+dt.source+")",dn),Cn=mt===void 0?we:mt>>>0;if(Cn===0)return[];if(bt.length===0)return _e(Pn,bt)===null?[bt]:[];for(var mn=0,Vt=0,Te=[];Vt<bt.length;){Pn.lastIndex=De?Vt:0;var F=_e(Pn,De?bt:bt.slice(Vt)),R;if(F===null||(R=re(pe(Pn.lastIndex+(De?0:Vt)),bt.length))===mn)Vt=K(bt,Vt,Yt);else{if(Te.push(bt.slice(mn,Vt)),Te.length===Cn)return Te;for(var ye=1;ye<=F.length-1;ye++)if(Te.push(F[ye]),Te.length===Cn)return Te;Vt=mn=R}}return Te.push(bt.slice(mn)),Te}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_export.js"),G=b("./node_modules/core-js/modules/_string-context.js"),Y="includes";k(k.P+k.F*b("./node_modules/core-js/modules/_fails-is-regexp.js")(Y),"String",{includes:function(pe){return!!~G(this,pe,Y).indexOf(pe,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_global.js"),G=b("./node_modules/core-js/modules/_has.js"),Y=b("./node_modules/core-js/modules/_descriptors.js"),K=b("./node_modules/core-js/modules/_export.js"),pe=b("./node_modules/core-js/modules/_redefine.js"),_e=b("./node_modules/core-js/modules/_meta.js").KEY,be=b("./node_modules/core-js/modules/_fails.js"),Q=b("./node_modules/core-js/modules/_shared.js"),re=b("./node_modules/core-js/modules/_set-to-string-tag.js"),ne=b("./node_modules/core-js/modules/_uid.js"),te=b("./node_modules/core-js/modules/_wks.js"),ce=b("./node_modules/core-js/modules/_wks-ext.js"),xe=b("./node_modules/core-js/modules/_wks-define.js"),we=b("./node_modules/core-js/modules/_enum-keys.js"),De=b("./node_modules/core-js/modules/_is-array.js"),Pe=b("./node_modules/core-js/modules/_an-object.js"),Me=b("./node_modules/core-js/modules/_is-object.js"),Ve=b("./node_modules/core-js/modules/_to-object.js"),Ne=b("./node_modules/core-js/modules/_to-iobject.js"),Qe=b("./node_modules/core-js/modules/_to-primitive.js"),ct=b("./node_modules/core-js/modules/_property-desc.js"),mt=b("./node_modules/core-js/modules/_object-create.js"),Lt=b("./node_modules/core-js/modules/_object-gopn-ext.js"),dt=b("./node_modules/core-js/modules/_object-gopd.js"),bt=b("./node_modules/core-js/modules/_object-gops.js"),Nt=b("./node_modules/core-js/modules/_object-dp.js"),Yt=b("./node_modules/core-js/modules/_object-keys.js"),dn=dt.f,Pn=Nt.f,Cn=Lt.f,mn=k.Symbol,Vt=k.JSON,Te=Vt&&Vt.stringify,F="prototype",R=te("_hidden"),ye=te("toPrimitive"),$e={}.propertyIsEnumerable,Ye=Q("symbol-registry"),ut=Q("symbols"),se=Q("op-symbols"),P=Object[F],L=typeof mn=="function"&&!!bt.f,Se=k.QObject,Be=!Se||!Se[F]||!Se[F].findChild,We=Y&&be(function(){return mt(Pn({},"a",{get:function(){return Pn(this,"a",{value:7}).a}})).a!=7})?function(yn,Ct,sn){var Tn=dn(P,Ct);Tn&&delete P[Ct],Pn(yn,Ct,sn),Tn&&yn!==P&&Pn(P,Ct,Tn)}:Pn,it=function(yn){var Ct=ut[yn]=mt(mn[F]);return Ct._k=yn,Ct},qt=L&&typeof mn.iterator=="symbol"?function(yn){return typeof yn=="symbol"}:function(yn){return yn instanceof mn},xn=function(Ct,sn,Tn){return Ct===P&&xn(se,sn,Tn),Pe(Ct),sn=Qe(sn,!0),Pe(Tn),G(ut,sn)?(Tn.enumerable?(G(Ct,R)&&Ct[R][sn]&&(Ct[R][sn]=!1),Tn=mt(Tn,{enumerable:ct(0,!1)})):(G(Ct,R)||Pn(Ct,R,ct(1,{})),Ct[R][sn]=!0),We(Ct,sn,Tn)):Pn(Ct,sn,Tn)},Sn=function(Ct,sn){Pe(Ct);for(var Tn=we(sn=Ne(sn)),yr=0,vr=Tn.length,ti;vr>yr;)xn(Ct,ti=Tn[yr++],sn[ti]);return Ct},_t=function(Ct,sn){return sn===void 0?mt(Ct):Sn(mt(Ct),sn)},Dt=function(Ct){var sn=$e.call(this,Ct=Qe(Ct,!0));return this===P&&G(ut,Ct)&&!G(se,Ct)?!1:sn||!G(this,Ct)||!G(ut,Ct)||G(this,R)&&this[R][Ct]?sn:!0},cn=function(Ct,sn){if(Ct=Ne(Ct),sn=Qe(sn,!0),!(Ct===P&&G(ut,sn)&&!G(se,sn))){var Tn=dn(Ct,sn);return Tn&&G(ut,sn)&&!(G(Ct,R)&&Ct[R][sn])&&(Tn.enumerable=!0),Tn}},mr=function(Ct){for(var sn=Cn(Ne(Ct)),Tn=[],yr=0,vr;sn.length>yr;)!G(ut,vr=sn[yr++])&&vr!=R&&vr!=_e&&Tn.push(vr);return Tn},Ci=function(Ct){for(var sn=Ct===P,Tn=Cn(sn?se:Ne(Ct)),yr=[],vr=0,ti;Tn.length>vr;)G(ut,ti=Tn[vr++])&&(!sn||G(P,ti))&&yr.push(ut[ti]);return yr};L||(mn=function(){if(this instanceof mn)throw TypeError("Symbol is not a constructor!");var Ct=ne(arguments.length>0?arguments[0]:void 0),sn=function(Tn){this===P&&sn.call(se,Tn),G(this,R)&&G(this[R],Ct)&&(this[R][Ct]=!1),We(this,Ct,ct(1,Tn))};return Y&&Be&&We(P,Ct,{configurable:!0,set:sn}),it(Ct)},pe(mn[F],"toString",function(){return this._k}),dt.f=cn,Nt.f=xn,b("./node_modules/core-js/modules/_object-gopn.js").f=Lt.f=mr,b("./node_modules/core-js/modules/_object-pie.js").f=Dt,bt.f=Ci,Y&&!b("./node_modules/core-js/modules/_library.js")&&pe(P,"propertyIsEnumerable",Dt,!0),ce.f=function(yn){return it(te(yn))}),K(K.G+K.W+K.F*!L,{Symbol:mn});for(var hn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ir=0;hn.length>ir;)te(hn[ir++]);for(var wr=Yt(te.store),ei=0;wr.length>ei;)xe(wr[ei++]);K(K.S+K.F*!L,"Symbol",{for:function(yn){return G(Ye,yn+="")?Ye[yn]:Ye[yn]=mn(yn)},keyFor:function(Ct){if(!qt(Ct))throw TypeError(Ct+" is not a symbol!");for(var sn in Ye)if(Ye[sn]===Ct)return sn},useSetter:function(){Be=!0},useSimple:function(){Be=!1}}),K(K.S+K.F*!L,"Object",{create:_t,defineProperty:xn,defineProperties:Sn,getOwnPropertyDescriptor:cn,getOwnPropertyNames:mr,getOwnPropertySymbols:Ci});var gr=be(function(){bt.f(1)});K(K.S+K.F*gr,"Object",{getOwnPropertySymbols:function(Ct){return bt.f(Ve(Ct))}}),Vt&&K(K.S+K.F*(!L||be(function(){var yn=mn();return Te([yn])!="[null]"||Te({a:yn})!="{}"||Te(Object(yn))!="{}"})),"JSON",{stringify:function(Ct){for(var sn=[Ct],Tn=1,yr,vr;arguments.length>Tn;)sn.push(arguments[Tn++]);if(vr=yr=sn[1],!(!Me(yr)&&Ct===void 0||qt(Ct)))return De(yr)||(yr=function(ti,yi){if(typeof vr=="function"&&(yi=vr.call(this,ti,yi)),!qt(yi))return yi}),sn[1]=yr,Te.apply(Vt,sn)}}),mn[F][ye]||b("./node_modules/core-js/modules/_hide.js")(mn[F],ye,mn[F].valueOf),re(mn,"Symbol"),re(Math,"Math",!0),re(k.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_export.js"),G=b("./node_modules/core-js/modules/_array-includes.js")(!0);k(k.P,"Array",{includes:function(K){return G(this,K,arguments.length>1?arguments[1]:void 0)}}),b("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(V,D,b){var k=b("./node_modules/core-js/modules/_export.js"),G=b("./node_modules/core-js/modules/_own-keys.js"),Y=b("./node_modules/core-js/modules/_to-iobject.js"),K=b("./node_modules/core-js/modules/_object-gopd.js"),pe=b("./node_modules/core-js/modules/_create-property.js");k(k.S,"Object",{getOwnPropertyDescriptors:function(be){for(var Q=Y(be),re=K.f,ne=G(Q),te={},ce=0,xe,we;ne.length>ce;)we=re(Q,xe=ne[ce++]),we!==void 0&&pe(te,xe,we);return te}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(V,D,b){b("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(V,D,b){for(var k=b("./node_modules/core-js/modules/es6.array.iterator.js"),G=b("./node_modules/core-js/modules/_object-keys.js"),Y=b("./node_modules/core-js/modules/_redefine.js"),K=b("./node_modules/core-js/modules/_global.js"),pe=b("./node_modules/core-js/modules/_hide.js"),_e=b("./node_modules/core-js/modules/_iterators.js"),be=b("./node_modules/core-js/modules/_wks.js"),Q=be("iterator"),re=be("toStringTag"),ne=_e.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ce=G(te),xe=0;xe<ce.length;xe++){var we=ce[xe],De=te[we],Pe=K[we],Me=Pe&&Pe.prototype,Ve;if(Me&&(Me[Q]||pe(Me,Q,ne),Me[re]||pe(Me,re,we),_e[we]=ne,De))for(Ve in k)Me[Ve]||Y(Me,Ve,k[Ve],!0)}},"./node_modules/crypt/crypt.js":function(V,D){(function(){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k={rotl:function(G,Y){return G<<Y|G>>>32-Y},rotr:function(G,Y){return G<<32-Y|G>>>Y},endian:function(G){if(G.constructor==Number)return k.rotl(G,8)&16711935|k.rotl(G,24)&4278255360;for(var Y=0;Y<G.length;Y++)G[Y]=k.endian(G[Y]);return G},randomBytes:function(G){for(var Y=[];G>0;G--)Y.push(Math.floor(Math.random()*256));return Y},bytesToWords:function(G){for(var Y=[],K=0,pe=0;K<G.length;K++,pe+=8)Y[pe>>>5]|=G[K]<<24-pe%32;return Y},wordsToBytes:function(G){for(var Y=[],K=0;K<G.length*32;K+=8)Y.push(G[K>>>5]>>>24-K%32&255);return Y},bytesToHex:function(G){for(var Y=[],K=0;K<G.length;K++)Y.push((G[K]>>>4).toString(16)),Y.push((G[K]&15).toString(16));return Y.join("")},hexToBytes:function(G){for(var Y=[],K=0;K<G.length;K+=2)Y.push(parseInt(G.substr(K,2),16));return Y},bytesToBase64:function(G){for(var Y=[],K=0;K<G.length;K+=3)for(var pe=G[K]<<16|G[K+1]<<8|G[K+2],_e=0;_e<4;_e++)K*8+_e*6<=G.length*8?Y.push(b.charAt(pe>>>6*(3-_e)&63)):Y.push("=");return Y.join("")},base64ToBytes:function(G){G=G.replace(/[^A-Z0-9+\/]/ig,"");for(var Y=[],K=0,pe=0;K<G.length;pe=++K%4)pe!=0&&Y.push((b.indexOf(G.charAt(K-1))&Math.pow(2,-2*pe+8)-1)<<pe*2|b.indexOf(G.charAt(K))>>>6-pe*2);return Y}};V.exports=k})()},"./node_modules/is-buffer/index.js":function(V,D){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */V.exports=function(G){return G!=null&&(b(G)||k(G)||!!G._isBuffer)};function b(G){return!!G.constructor&&typeof G.constructor.isBuffer=="function"&&G.constructor.isBuffer(G)}function k(G){return typeof G.readFloatLE=="function"&&typeof G.slice=="function"&&b(G.slice(0,0))}},"./node_modules/md5/md5.js":function(V,D,b){(function(){var k=b("./node_modules/crypt/crypt.js"),G=b("./node_modules/charenc/charenc.js").utf8,Y=b("./node_modules/is-buffer/index.js"),K=b("./node_modules/charenc/charenc.js").bin,pe=function(_e,be){_e.constructor==String?be&&be.encoding==="binary"?_e=K.stringToBytes(_e):_e=G.stringToBytes(_e):Y(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var Q=k.bytesToWords(_e),re=_e.length*8,ne=1732584193,te=-271733879,ce=-1732584194,xe=271733878,we=0;we<Q.length;we++)Q[we]=(Q[we]<<8|Q[we]>>>24)&16711935|(Q[we]<<24|Q[we]>>>8)&4278255360;Q[re>>>5]|=128<<re%32,Q[(re+64>>>9<<4)+14]=re;for(var De=pe._ff,Pe=pe._gg,Me=pe._hh,Ve=pe._ii,we=0;we<Q.length;we+=16){var Ne=ne,Qe=te,ct=ce,mt=xe;ne=De(ne,te,ce,xe,Q[we+0],7,-680876936),xe=De(xe,ne,te,ce,Q[we+1],12,-389564586),ce=De(ce,xe,ne,te,Q[we+2],17,606105819),te=De(te,ce,xe,ne,Q[we+3],22,-1044525330),ne=De(ne,te,ce,xe,Q[we+4],7,-176418897),xe=De(xe,ne,te,ce,Q[we+5],12,1200080426),ce=De(ce,xe,ne,te,Q[we+6],17,-1473231341),te=De(te,ce,xe,ne,Q[we+7],22,-45705983),ne=De(ne,te,ce,xe,Q[we+8],7,1770035416),xe=De(xe,ne,te,ce,Q[we+9],12,-1958414417),ce=De(ce,xe,ne,te,Q[we+10],17,-42063),te=De(te,ce,xe,ne,Q[we+11],22,-1990404162),ne=De(ne,te,ce,xe,Q[we+12],7,1804603682),xe=De(xe,ne,te,ce,Q[we+13],12,-40341101),ce=De(ce,xe,ne,te,Q[we+14],17,-1502002290),te=De(te,ce,xe,ne,Q[we+15],22,1236535329),ne=Pe(ne,te,ce,xe,Q[we+1],5,-165796510),xe=Pe(xe,ne,te,ce,Q[we+6],9,-1069501632),ce=Pe(ce,xe,ne,te,Q[we+11],14,643717713),te=Pe(te,ce,xe,ne,Q[we+0],20,-373897302),ne=Pe(ne,te,ce,xe,Q[we+5],5,-701558691),xe=Pe(xe,ne,te,ce,Q[we+10],9,38016083),ce=Pe(ce,xe,ne,te,Q[we+15],14,-660478335),te=Pe(te,ce,xe,ne,Q[we+4],20,-405537848),ne=Pe(ne,te,ce,xe,Q[we+9],5,568446438),xe=Pe(xe,ne,te,ce,Q[we+14],9,-1019803690),ce=Pe(ce,xe,ne,te,Q[we+3],14,-187363961),te=Pe(te,ce,xe,ne,Q[we+8],20,1163531501),ne=Pe(ne,te,ce,xe,Q[we+13],5,-1444681467),xe=Pe(xe,ne,te,ce,Q[we+2],9,-51403784),ce=Pe(ce,xe,ne,te,Q[we+7],14,1735328473),te=Pe(te,ce,xe,ne,Q[we+12],20,-1926607734),ne=Me(ne,te,ce,xe,Q[we+5],4,-378558),xe=Me(xe,ne,te,ce,Q[we+8],11,-2022574463),ce=Me(ce,xe,ne,te,Q[we+11],16,1839030562),te=Me(te,ce,xe,ne,Q[we+14],23,-35309556),ne=Me(ne,te,ce,xe,Q[we+1],4,-1530992060),xe=Me(xe,ne,te,ce,Q[we+4],11,1272893353),ce=Me(ce,xe,ne,te,Q[we+7],16,-155497632),te=Me(te,ce,xe,ne,Q[we+10],23,-1094730640),ne=Me(ne,te,ce,xe,Q[we+13],4,681279174),xe=Me(xe,ne,te,ce,Q[we+0],11,-358537222),ce=Me(ce,xe,ne,te,Q[we+3],16,-722521979),te=Me(te,ce,xe,ne,Q[we+6],23,76029189),ne=Me(ne,te,ce,xe,Q[we+9],4,-640364487),xe=Me(xe,ne,te,ce,Q[we+12],11,-421815835),ce=Me(ce,xe,ne,te,Q[we+15],16,530742520),te=Me(te,ce,xe,ne,Q[we+2],23,-995338651),ne=Ve(ne,te,ce,xe,Q[we+0],6,-198630844),xe=Ve(xe,ne,te,ce,Q[we+7],10,1126891415),ce=Ve(ce,xe,ne,te,Q[we+14],15,-1416354905),te=Ve(te,ce,xe,ne,Q[we+5],21,-57434055),ne=Ve(ne,te,ce,xe,Q[we+12],6,1700485571),xe=Ve(xe,ne,te,ce,Q[we+3],10,-1894986606),ce=Ve(ce,xe,ne,te,Q[we+10],15,-1051523),te=Ve(te,ce,xe,ne,Q[we+1],21,-2054922799),ne=Ve(ne,te,ce,xe,Q[we+8],6,1873313359),xe=Ve(xe,ne,te,ce,Q[we+15],10,-30611744),ce=Ve(ce,xe,ne,te,Q[we+6],15,-1560198380),te=Ve(te,ce,xe,ne,Q[we+13],21,1309151649),ne=Ve(ne,te,ce,xe,Q[we+4],6,-145523070),xe=Ve(xe,ne,te,ce,Q[we+11],10,-1120210379),ce=Ve(ce,xe,ne,te,Q[we+2],15,718787259),te=Ve(te,ce,xe,ne,Q[we+9],21,-343485551),ne=ne+Ne>>>0,te=te+Qe>>>0,ce=ce+ct>>>0,xe=xe+mt>>>0}return k.endian([ne,te,ce,xe])};pe._ff=function(_e,be,Q,re,ne,te,ce){var xe=_e+(be&Q|~be&re)+(ne>>>0)+ce;return(xe<<te|xe>>>32-te)+be},pe._gg=function(_e,be,Q,re,ne,te,ce){var xe=_e+(be&re|Q&~re)+(ne>>>0)+ce;return(xe<<te|xe>>>32-te)+be},pe._hh=function(_e,be,Q,re,ne,te,ce){var xe=_e+(be^Q^re)+(ne>>>0)+ce;return(xe<<te|xe>>>32-te)+be},pe._ii=function(_e,be,Q,re,ne,te,ce){var xe=_e+(Q^(be|~re))+(ne>>>0)+ce;return(xe<<te|xe>>>32-te)+be},pe._blocksize=16,pe._digestsize=16,V.exports=function(_e,be){if(_e==null)throw new Error("Illegal argument "+_e);var Q=k.wordsToBytes(pe(_e,be));return be&&be.asBytes?Q:be&&be.asString?K.bytesToString(Q):k.bytesToHex(Q)}})()},"./node_modules/regenerator-runtime/runtime.js":function(V,D,b){var k=function(G){var Y=Object.prototype,K=Y.hasOwnProperty,pe,_e=typeof Symbol=="function"?Symbol:{},be=_e.iterator||"@@iterator",Q=_e.asyncIterator||"@@asyncIterator",re=_e.toStringTag||"@@toStringTag";function ne(F,R,ye){return Object.defineProperty(F,R,{value:ye,enumerable:!0,configurable:!0,writable:!0}),F[R]}try{ne({},"")}catch{ne=function(R,ye,$e){return R[ye]=$e}}function te(F,R,ye,$e){var Ye=R&&R.prototype instanceof Ve?R:Ve,ut=Object.create(Ye.prototype),se=new mn($e||[]);return ut._invoke=Yt(F,ye,se),ut}G.wrap=te;function ce(F,R,ye){try{return{type:"normal",arg:F.call(R,ye)}}catch($e){return{type:"throw",arg:$e}}}var xe="suspendedStart",we="suspendedYield",De="executing",Pe="completed",Me={};function Ve(){}function Ne(){}function Qe(){}var ct={};ct[be]=function(){return this};var mt=Object.getPrototypeOf,Lt=mt&&mt(mt(Vt([])));Lt&&Lt!==Y&&K.call(Lt,be)&&(ct=Lt);var dt=Qe.prototype=Ve.prototype=Object.create(ct);Ne.prototype=dt.constructor=Qe,Qe.constructor=Ne,Ne.displayName=ne(Qe,re,"GeneratorFunction");function bt(F){["next","throw","return"].forEach(function(R){ne(F,R,function(ye){return this._invoke(R,ye)})})}G.isGeneratorFunction=function(F){var R=typeof F=="function"&&F.constructor;return R?R===Ne||(R.displayName||R.name)==="GeneratorFunction":!1},G.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,Qe):(F.__proto__=Qe,ne(F,re,"GeneratorFunction")),F.prototype=Object.create(dt),F},G.awrap=function(F){return{__await:F}};function Nt(F,R){function ye(ut,se,P,L){var Se=ce(F[ut],F,se);if(Se.type==="throw")L(Se.arg);else{var Be=Se.arg,We=Be.value;return We&&typeof We=="object"&&K.call(We,"__await")?R.resolve(We.__await).then(function(it){ye("next",it,P,L)},function(it){ye("throw",it,P,L)}):R.resolve(We).then(function(it){Be.value=it,P(Be)},function(it){return ye("throw",it,P,L)})}}var $e;function Ye(ut,se){function P(){return new R(function(L,Se){ye(ut,se,L,Se)})}return $e=$e?$e.then(P,P):P()}this._invoke=Ye}bt(Nt.prototype),Nt.prototype[Q]=function(){return this},G.AsyncIterator=Nt,G.async=function(F,R,ye,$e,Ye){Ye===void 0&&(Ye=Promise);var ut=new Nt(te(F,R,ye,$e),Ye);return G.isGeneratorFunction(R)?ut:ut.next().then(function(se){return se.done?se.value:ut.next()})};function Yt(F,R,ye){var $e=xe;return function(ut,se){if($e===De)throw new Error("Generator is already running");if($e===Pe){if(ut==="throw")throw se;return Te()}for(ye.method=ut,ye.arg=se;;){var P=ye.delegate;if(P){var L=dn(P,ye);if(L){if(L===Me)continue;return L}}if(ye.method==="next")ye.sent=ye._sent=ye.arg;else if(ye.method==="throw"){if($e===xe)throw $e=Pe,ye.arg;ye.dispatchException(ye.arg)}else ye.method==="return"&&ye.abrupt("return",ye.arg);$e=De;var Se=ce(F,R,ye);if(Se.type==="normal"){if($e=ye.done?Pe:we,Se.arg===Me)continue;return{value:Se.arg,done:ye.done}}else Se.type==="throw"&&($e=Pe,ye.method="throw",ye.arg=Se.arg)}}}function dn(F,R){var ye=F.iterator[R.method];if(ye===pe){if(R.delegate=null,R.method==="throw"){if(F.iterator.return&&(R.method="return",R.arg=pe,dn(F,R),R.method==="throw"))return Me;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return Me}var $e=ce(ye,F.iterator,R.arg);if($e.type==="throw")return R.method="throw",R.arg=$e.arg,R.delegate=null,Me;var Ye=$e.arg;if(!Ye)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,Me;if(Ye.done)R[F.resultName]=Ye.value,R.next=F.nextLoc,R.method!=="return"&&(R.method="next",R.arg=pe);else return Ye;return R.delegate=null,Me}bt(dt),ne(dt,re,"Generator"),dt[be]=function(){return this},dt.toString=function(){return"[object Generator]"};function Pn(F){var R={tryLoc:F[0]};1 in F&&(R.catchLoc=F[1]),2 in F&&(R.finallyLoc=F[2],R.afterLoc=F[3]),this.tryEntries.push(R)}function Cn(F){var R=F.completion||{};R.type="normal",delete R.arg,F.completion=R}function mn(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(Pn,this),this.reset(!0)}G.keys=function(F){var R=[];for(var ye in F)R.push(ye);return R.reverse(),function $e(){for(;R.length;){var Ye=R.pop();if(Ye in F)return $e.value=Ye,$e.done=!1,$e}return $e.done=!0,$e}};function Vt(F){if(F){var R=F[be];if(R)return R.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var ye=-1,$e=function Ye(){for(;++ye<F.length;)if(K.call(F,ye))return Ye.value=F[ye],Ye.done=!1,Ye;return Ye.value=pe,Ye.done=!0,Ye};return $e.next=$e}}return{next:Te}}G.values=Vt;function Te(){return{value:pe,done:!0}}return mn.prototype={constructor:mn,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.method="next",this.arg=pe,this.tryEntries.forEach(Cn),!F)for(var R in this)R.charAt(0)==="t"&&K.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=pe)},stop:function(){this.done=!0;var F=this.tryEntries[0],R=F.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var R=this;function ye(L,Se){return ut.type="throw",ut.arg=F,R.next=L,Se&&(R.method="next",R.arg=pe),!!Se}for(var $e=this.tryEntries.length-1;$e>=0;--$e){var Ye=this.tryEntries[$e],ut=Ye.completion;if(Ye.tryLoc==="root")return ye("end");if(Ye.tryLoc<=this.prev){var se=K.call(Ye,"catchLoc"),P=K.call(Ye,"finallyLoc");if(se&&P){if(this.prev<Ye.catchLoc)return ye(Ye.catchLoc,!0);if(this.prev<Ye.finallyLoc)return ye(Ye.finallyLoc)}else if(se){if(this.prev<Ye.catchLoc)return ye(Ye.catchLoc,!0)}else if(P){if(this.prev<Ye.finallyLoc)return ye(Ye.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,R){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var $e=this.tryEntries[ye];if($e.tryLoc<=this.prev&&K.call($e,"finallyLoc")&&this.prev<$e.finallyLoc){var Ye=$e;break}}Ye&&(F==="break"||F==="continue")&&Ye.tryLoc<=R&&R<=Ye.finallyLoc&&(Ye=null);var ut=Ye?Ye.completion:{};return ut.type=F,ut.arg=R,Ye?(this.method="next",this.next=Ye.finallyLoc,Me):this.complete(ut)},complete:function(F,R){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&R&&(this.next=R),Me},finish:function(F){for(var R=this.tryEntries.length-1;R>=0;--R){var ye=this.tryEntries[R];if(ye.finallyLoc===F)return this.complete(ye.completion,ye.afterLoc),Cn(ye),Me}},catch:function(F){for(var R=this.tryEntries.length-1;R>=0;--R){var ye=this.tryEntries[R];if(ye.tryLoc===F){var $e=ye.completion;if($e.type==="throw"){var Ye=$e.arg;Cn(ye)}return Ye}}throw new Error("illegal catch attempt")},delegateYield:function(F,R,ye){return this.delegate={iterator:Vt(F),resultName:R,nextLoc:ye},this.method==="next"&&(this.arg=pe),Me}},G}(V.exports);try{regeneratorRuntime=k}catch{Function("r","regeneratorRuntime = r")(k)}},"./src/api.js":function(V,D,b){b.r(D),b.d(D,"setup",function(){return De}),b.d(D,"setupCache",function(){return we}),b("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js");var k=b("axios"),G=b.n(k),Y=b("./src/request.js"),K=b("./src/cache.js");b.d(D,"serializeQuery",function(){return K.serializeQuery});var pe=b("./src/config.js"),_e=b("./src/utilities.js");function be(Pe,Me){if(Pe==null)return{};var Ve=Q(Pe,Me),Ne,Qe;if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Pe);for(Qe=0;Qe<ct.length;Qe++)Ne=ct[Qe],!(Me.indexOf(Ne)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,Ne)&&(Ve[Ne]=Pe[Ne])}return Ve}function Q(Pe,Me){if(Pe==null)return{};var Ve={},Ne=Object.keys(Pe),Qe,ct;for(ct=0;ct<Ne.length;ct++)Qe=Ne[ct],!(Me.indexOf(Qe)>=0)&&(Ve[Qe]=Pe[Qe]);return Ve}function re(Pe,Me){var Ve=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Ne=Object.getOwnPropertySymbols(Pe);Me&&(Ne=Ne.filter(function(Qe){return Object.getOwnPropertyDescriptor(Pe,Qe).enumerable})),Ve.push.apply(Ve,Ne)}return Ve}function ne(Pe){for(var Me=1;Me<arguments.length;Me++){var Ve=arguments[Me]!=null?arguments[Me]:{};Me%2?re(Object(Ve),!0).forEach(function(Ne){te(Pe,Ne,Ve[Ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(Ve)):re(Object(Ve)).forEach(function(Ne){Object.defineProperty(Pe,Ne,Object.getOwnPropertyDescriptor(Ve,Ne))})}return Pe}function te(Pe,Me,Ve){return Me in Pe?Object.defineProperty(Pe,Me,{value:Ve,enumerable:!0,configurable:!0,writable:!0}):Pe[Me]=Ve,Pe}function ce(Pe,Me,Ve,Ne,Qe,ct,mt){try{var Lt=Pe[ct](mt),dt=Lt.value}catch(bt){Ve(bt);return}Lt.done?Me(dt):Promise.resolve(dt).then(Ne,Qe)}function xe(Pe){return function(){var Me=this,Ve=arguments;return new Promise(function(Ne,Qe){var ct=Pe.apply(Me,Ve);function mt(dt){ce(ct,Ne,Qe,mt,Lt,"next",dt)}function Lt(dt){ce(ct,Ne,Qe,mt,Lt,"throw",dt)}mt(void 0)})}}function we(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pe=Object(pe.makeConfig)(Pe);function Me(Ne){return Ve.apply(this,arguments)}function Ve(){return Ve=xe(regeneratorRuntime.mark(function Ne(Qe){var ct,mt,Lt,dt,bt;return regeneratorRuntime.wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return ct=Object(pe.mergeRequestConfig)(Pe,Qe),Yt.next=3,Object(Y.default)(ct,Qe);case 3:if(mt=Yt.sent,Lt=mt.next,Object(_e.isFunction)(Lt)){Yt.next=7;break}return Yt.abrupt("return",Lt);case 7:return Yt.prev=7,Yt.next=10,ct.adapter(Qe);case 10:mt=Yt.sent,Yt.next=16;break;case 13:Yt.prev=13,Yt.t0=Yt.catch(7),dt=Yt.t0;case 16:if(!dt){Yt.next=31;break}if(bt=Object(_e.isFunction)(ct.readOnError)?ct.readOnError(dt,Qe):ct.readOnError,!bt){Yt.next=30;break}return Yt.prev=19,ct.acceptStale=!0,Yt.next=23,Object(Y.default)(ct,Qe);case 23:return mt=Yt.sent,mt.next.request.stale=!0,Yt.abrupt("return",mt.next);case 28:Yt.prev=28,Yt.t1=Yt.catch(19);case 30:throw dt;case 31:return Yt.abrupt("return",Lt(mt));case 32:case"end":return Yt.stop()}},Ne,null,[[7,13],[19,28]])})),Ve.apply(this,arguments)}return{adapter:Me,config:Pe,store:Pe.store}}function De(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Me=ne(ne(ne({},pe.defaults.axios),Pe),{},{cache:ne(ne({},pe.defaults.axios.cache),Pe.cache)}),Ve=we(Me.cache);Me.cache;var Ne=be(Me,["cache"]),Qe=G.a.create(ne(ne({},Ne),{},{adapter:Ve.adapter}));return Qe.cache=Ve.store,Qe}D.default={setup:De,setupCache:we,serializeQuery:K.serializeQuery}},"./src/cache.js":function(V,D,b){b.r(D),b.d(D,"read",function(){return re}),b.d(D,"write",function(){return be}),b.d(D,"key",function(){return te}),b.d(D,"invalidate",function(){return we}),b.d(D,"serializeQuery",function(){return De}),b("./node_modules/core-js/modules/es7.array.includes.js"),b("./node_modules/core-js/modules/es6.string.includes.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("./src/utilities.js"),G=b("./node_modules/md5/md5.js"),Y=b.n(G),K=b("./src/serialize.js");function pe(Pe,Me,Ve,Ne,Qe,ct,mt){try{var Lt=Pe[ct](mt),dt=Lt.value}catch(bt){Ve(bt);return}Lt.done?Me(dt):Promise.resolve(dt).then(Ne,Qe)}function _e(Pe){return function(){var Me=this,Ve=arguments;return new Promise(function(Ne,Qe){var ct=Pe.apply(Me,Ve);function mt(dt){pe(ct,Ne,Qe,mt,Lt,"next",dt)}function Lt(dt){pe(ct,Ne,Qe,mt,Lt,"throw",dt)}mt(void 0)})}}function be(Pe,Me,Ve){return Q.apply(this,arguments)}function Q(){return Q=_e(regeneratorRuntime.mark(function Pe(Me,Ve,Ne){var Qe;return regeneratorRuntime.wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.prev=0,Qe={expires:Me.expires,data:Object(K.default)(Me,Ve,Ne)},mt.next=4,Me.store.setItem(Me.uuid,Qe);case 4:mt.next=19;break;case 6:if(mt.prev=6,mt.t0=mt.catch(0),Me.debug("Could not store response",mt.t0),!Me.clearOnError){mt.next=18;break}return mt.prev=10,mt.next=13,Me.store.clear();case 13:mt.next=18;break;case 15:mt.prev=15,mt.t1=mt.catch(10),Me.debug("Could not clear store",mt.t1);case 18:return mt.abrupt("return",!1);case 19:return mt.abrupt("return",!0);case 20:case"end":return mt.stop()}},Pe,null,[[0,6],[10,15]])})),Q.apply(this,arguments)}function re(Pe,Me){return ne.apply(this,arguments)}function ne(){return ne=_e(regeneratorRuntime.mark(function Pe(Me,Ve){var Ne,Qe,ct,mt,Lt,dt,bt,Nt;return regeneratorRuntime.wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return Ne=Me.uuid,Qe=Me.ignoreCache,dn.next=3,Me.store.getItem(Ne);case 3:if(ct=dn.sent,!(Qe||!ct||!ct.data)){dn.next=10;break}throw Me.debug("cache-miss",Ve.url),mt=new Error,mt.reason="cache-miss",mt.message="Entry not found from cache",mt;case 10:if(Lt=ct.expires,dt=ct.data,bt=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!bt&&!Me.acceptStale&&Lt!==0&&Lt<Date.now())){dn.next=18;break}throw Me.debug("cache-stale",Ve.url),Nt=new Error,Nt.reason="cache-stale",Nt.message="Entry is stale",Nt;case 18:return Me.debug(Me.acceptStale?"cache-hit-stale":"cache-hit",Ve.url),dn.abrupt("return",dt);case 20:case"end":return dn.stop()}},Pe)})),ne.apply(this,arguments)}function te(Pe){if(Object(k.isFunction)(Pe.key))return Pe.key;var Me;return Object(k.isString)(Pe.key)?Me=function(Ne){var Qe="".concat(Ne.baseURL?Ne.baseURL:"").concat(Ne.url),ct="".concat(Pe.key,"/").concat(Qe).concat(De(Ne));return Ne.data?ct+Y()(Ne.data):ct}:Me=function(Ne){var Qe="".concat(Ne.baseURL?Ne.baseURL:"").concat(Ne.url),ct=Qe+De(Ne);return Ne.data?ct+Y()(Ne.data):ct},Me}function ce(Pe,Me){return xe.apply(this,arguments)}function xe(){return xe=_e(regeneratorRuntime.mark(function Pe(Me,Ve){var Ne;return regeneratorRuntime.wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(Ne=Ve.method.toLowerCase(),!Me.exclude.methods.includes(Ne)){ct.next=4;break}return ct.next=4,Me.store.removeItem(Me.uuid);case 4:case"end":return ct.stop()}},Pe)})),xe.apply(this,arguments)}function we(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(k.isFunction)(Pe.invalidate)?Pe.invalidate:ce}function De(Pe){if(!Pe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Pe.params);var Me=Pe.params,Ve=Pe.params instanceof URLSearchParams;return Ve||(Me=new URLSearchParams,Object.keys(Pe.params).forEach(function(Ne){return Me.append(Ne,Pe.params[Ne])})),"?".concat(Me.toString())}D.default={read:re,write:be,key:te,invalidate:we,serializeQuery:De}},"./src/config.js":function(V,D,b){b.r(D),b.d(D,"defaults",function(){return ne}),b.d(D,"makeConfig",function(){return ce}),b.d(D,"mergeRequestConfig",function(){return xe}),b("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("axios"),G=b.n(k),Y=b("./src/memory.js"),K=b("./src/cache.js");function pe(we,De){var Pe=Object.keys(we);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(we);De&&(Me=Me.filter(function(Ve){return Object.getOwnPropertyDescriptor(we,Ve).enumerable})),Pe.push.apply(Pe,Me)}return Pe}function _e(we){for(var De=1;De<arguments.length;De++){var Pe=arguments[De]!=null?arguments[De]:{};De%2?pe(Object(Pe),!0).forEach(function(Me){be(we,Me,Pe[Me])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(Pe)):pe(Object(Pe)).forEach(function(Me){Object.defineProperty(we,Me,Object.getOwnPropertyDescriptor(Pe,Me))})}return we}function be(we,De,Pe){return De in we?Object.defineProperty(we,De,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):we[De]=Pe,we}var Q=function(){},re=function(){for(var De,Pe=arguments.length,Me=new Array(Pe),Ve=0;Ve<Pe;Ve++)Me[Ve]=arguments[Ve];return(De=console).log.apply(De,["[axios-cache-adapter]"].concat(Me))},ne={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:G.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},te=["limit","store","adapter","uuid","acceptStale"],ce=function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=_e(_e(_e({},ne.cache),De),{},{exclude:_e(_e({},ne.cache.exclude),De.exclude)});return Pe.key=Object(K.key)(Pe),Pe.invalidate=Object(K.invalidate)(Pe),Pe.debug!==!1?Pe.debug=typeof Pe.debug=="function"?Pe.debug:re:Pe.debug=Q,Pe.store||(Pe.store=new Y.default),Pe.debug("Global cache config",Pe),Pe},xe=function(De,Pe){var Me=Pe.cache||{};Me&&te.forEach(function(Ne){return Me[Ne]?delete Me[Ne]:void 0});var Ve=_e(_e(_e({},De),Me),{},{exclude:_e(_e({},De.exclude),Me.exclude)});return Ve.debug===!0&&(Ve.debug=re),Me.key&&(Ve.key=Object(K.key)(Me)),Ve.uuid=Ve.key(Pe),De.debug("Request config for ".concat(Pe.url),Ve),Ve};D.default={defaults:ne,makeConfig:ce,mergeRequestConfig:xe}},"./src/exclude.js":function(V,D,b){b.r(D),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/core-js/modules/es7.array.includes.js"),b("./node_modules/core-js/modules/es6.string.includes.js");var k=b("./src/utilities.js");function G(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=arguments.length>1?arguments[1]:void 0,pe=Y.exclude,_e=pe===void 0?{}:pe,be=Y.debug,Q=K.method.toLowerCase();if(Q==="head"||_e.methods.includes(Q))return be("Excluding request by HTTP method ".concat(K.url)),!0;if(typeof _e.filter=="function"&&_e.filter(K))return be("Excluding request by filter ".concat(K.url)),!0;var re=/\?.*$/.test(K.url)||Object(k.isObject)(K.params)&&Object.keys(K.params).length!==0||typeof URLSearchParams<"u"&&K.params instanceof URLSearchParams;if(_e.query&&re)return be("Excluding request by query ".concat(K.url)),!0;var ne=_e.paths||[],te=ne.some(function(ce){return K.url.match(ce)});return te?(be("Excluding request by url match ".concat(K.url)),!0):!1}D.default=G},"./src/index.node.js":function(V,D,b){b.r(D);var k=b("./src/api.js");b.d(D,"setup",function(){return k.setup}),b.d(D,"setupCache",function(){return k.setupCache}),b.d(D,"serializeQuery",function(){return k.serializeQuery});var G=b("./src/redis.js");b.d(D,"RedisStore",function(){return G.default});var Y=b("./src/redis-default.js");b.d(D,"RedisDefaultStore",function(){return Y.default}),D.default={setup:k.setup,setupCache:k.setupCache,serializeQuery:k.serializeQuery,RedisStore:G.default,RedisDefaultStore:Y.default}},"./src/limit.js":function(V,D,b){b.r(D),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function k(pe,_e,be,Q,re,ne,te){try{var ce=pe[ne](te),xe=ce.value}catch(we){be(we);return}ce.done?_e(xe):Promise.resolve(xe).then(Q,re)}function G(pe){return function(){var _e=this,be=arguments;return new Promise(function(Q,re){var ne=pe.apply(_e,be);function te(xe){k(ne,Q,re,te,ce,"next",xe)}function ce(xe){k(ne,Q,re,te,ce,"throw",xe)}te(void 0)})}}function Y(pe){return K.apply(this,arguments)}function K(){return K=G(regeneratorRuntime.mark(function pe(_e){var be,Q;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,_e.store.length();case 2:if(be=ne.sent,!(be<_e.limit)){ne.next=5;break}return ne.abrupt("return");case 5:return _e.debug("Current store size: ".concat(be)),ne.next=8,_e.store.iterate(function(te,ce){Q||(Q={value:te,key:ce}),te.expires<Q.value.expires&&(Q={value:te,key:ce})});case 8:if(!Q){ne.next=12;break}return _e.debug("Removing item: ".concat(Q.key)),ne.next=12,_e.store.removeItem(Q.key);case 12:case"end":return ne.stop()}},pe)})),K.apply(this,arguments)}D.default=Y},"./src/memory.js":function(V,D,b){b.r(D),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js");var k=b("./src/utilities.js");function G(Q,re,ne,te,ce,xe,we){try{var De=Q[xe](we),Pe=De.value}catch(Me){ne(Me);return}De.done?re(Pe):Promise.resolve(Pe).then(te,ce)}function Y(Q){return function(){var re=this,ne=arguments;return new Promise(function(te,ce){var xe=Q.apply(re,ne);function we(Pe){G(xe,te,ce,we,De,"next",Pe)}function De(Pe){G(xe,te,ce,we,De,"throw",Pe)}we(void 0)})}}function K(Q,re){if(!(Q instanceof re))throw new TypeError("Cannot call a class as a function")}function pe(Q,re){for(var ne=0;ne<re.length;ne++){var te=re[ne];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}}function _e(Q,re,ne){return re&&pe(Q.prototype,re),ne&&pe(Q,ne),Q}var be=function(){function Q(){K(this,Q),this.store={}}return _e(Q,[{key:"getItem",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce){var xe;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return xe=this.store[ce]||null,De.abrupt("return",JSON.parse(xe));case 2:case"end":return De.stop()}},te,this)}));function ne(te){return re.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce,xe){return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return this.store[ce]=JSON.stringify(xe),De.abrupt("return",xe);case 2:case"end":return De.stop()}},te,this)}));function ne(te,ce){return re.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:delete this.store[ce];case 1:case"end":return we.stop()}},te,this)}));function ne(te){return re.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var re=Y(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:this.store={};case 1:case"end":return xe.stop()}},te,this)}));function ne(){return re.apply(this,arguments)}return ne}()},{key:"length",value:function(){var re=Y(regeneratorRuntime.mark(function te(){return regeneratorRuntime.wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.abrupt("return",Object.keys(this.store).length);case 1:case"end":return xe.stop()}},te,this)}));function ne(){return re.apply(this,arguments)}return ne}()},{key:"iterate",value:function(ne){return Promise.all(Object(k.mapObject)(this.store,ne))}}]),Q}();D.default=be},"./src/redis-default.js":function(V,D,b){b.r(D),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.function.bind.js"),b("./node_modules/core-js/modules/es6.function.name.js");var k=b("util");function G(Q,re,ne,te,ce,xe,we){try{var De=Q[xe](we),Pe=De.value}catch(Me){ne(Me);return}De.done?re(Pe):Promise.resolve(Pe).then(te,ce)}function Y(Q){return function(){var re=this,ne=arguments;return new Promise(function(te,ce){var xe=Q.apply(re,ne);function we(Pe){G(xe,te,ce,we,De,"next",Pe)}function De(Pe){G(xe,te,ce,we,De,"throw",Pe)}we(void 0)})}}function K(Q,re){if(!(Q instanceof re))throw new TypeError("Cannot call a class as a function")}function pe(Q,re){for(var ne=0;ne<re.length;ne++){var te=re[ne];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(Q,te.key,te)}}function _e(Q,re,ne){return re&&pe(Q.prototype,re),ne&&pe(Q,ne),Q}var be=function(){function Q(re){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};K(this,Q);var te=new TypeError("First parameter must be a valid RedisClient instance.");try{if(re.constructor.name!=="RedisClient")throw te}catch{throw te}this.client=re,this.prefix=ne.prefix||"axios-cache",this.maxScanCount=ne.maxScanCount||1e3,this.getAsync=Object(k.promisify)(re.get).bind(re),this.psetexAsync=Object(k.promisify)(re.psetex).bind(re),this.delAsync=Object(k.promisify)(re.del).bind(re),this.scanAsync=Object(k.promisify)(re.scan).bind(re)}return _e(Q,[{key:"calculateTTL",value:function(ne){var te=Date.now();return ne.expires&&ne.expires>te?ne.expires-te:-1}},{key:"transformKey",value:function(ne){return this.prefix+"_"+ne}},{key:"getItem",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce){var xe;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,this.getAsync(this.transformKey(ce));case 2:if(De.t0=De.sent,De.t0){De.next=5;break}De.t0=null;case 5:return xe=De.t0,De.abrupt("return",JSON.parse(xe));case 7:case"end":return De.stop()}},te,this)}));function ne(te){return re.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce,xe){var we,De;return regeneratorRuntime.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if(we=this.transformKey(ce),De=this.calculateTTL(xe),!(De>0)){Me.next=5;break}return Me.next=5,this.psetexAsync(we,De,JSON.stringify(xe));case 5:return Me.abrupt("return",xe);case 6:case"end":return Me.stop()}},te,this)}));function ne(te,ce){return re.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.transformKey(ce));case 2:case"end":return we.stop()}},te,this)}));function ne(te){return re.apply(this,arguments)}return ne}()},{key:"scan",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce){var xe,we;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:xe="0";case 1:return Pe.next=3,this.scanAsync(xe,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return we=Pe.sent,xe=we[0],Pe.next=7,ce(we[1]);case 7:if(xe!=="0"){Pe.next=1;break}case 8:case"end":return Pe.stop()}},te,this)}));function ne(te){return re.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var re=Y(regeneratorRuntime.mark(function te(){var ce=this;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.scan(function(De){return ce.delAsync(De)});case 2:case"end":return we.stop()}},te,this)}));function ne(){return re.apply(this,arguments)}return ne}()},{key:"length",value:function(){var re=Y(regeneratorRuntime.mark(function te(){var ce;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return ce=0,we.next=3,this.scan(function(De){ce+=De.length});case 3:return we.abrupt("return",ce);case 4:case"end":return we.stop()}},te,this)}));function ne(){return re.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var re=Y(regeneratorRuntime.mark(function te(ce){var xe=this,we,De;return regeneratorRuntime.wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return De=function(){return De=Y(regeneratorRuntime.mark(function Ne(Qe){var ct,mt;return regeneratorRuntime.wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,this.getAsync(Qe);case 2:if(dt.t0=dt.sent,dt.t0){dt.next=5;break}dt.t0=null;case 5:return ct=dt.t0,mt=JSON.parse(ct),dt.next=9,ce(mt,Qe);case 9:return dt.abrupt("return",dt.sent);case 10:case"end":return dt.stop()}},Ne,this)})),De.apply(this,arguments)},we=function(Ne){return De.apply(this,arguments)},Me.next=4,this.scan(function(Ve){return Promise.all(Ve.map(we.bind(xe)))});case 4:return Me.abrupt("return",Promise.resolve([]));case 5:case"end":return Me.stop()}},te,this)}));function ne(te){return re.apply(this,arguments)}return ne}()}]),Q}();D.default=be},"./src/redis.js":function(V,D,b){b.r(D),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js"),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.function.bind.js"),b("./node_modules/core-js/modules/es6.function.name.js");var k=b("util"),G=b("./src/utilities.js");function Y(re,ne,te,ce,xe,we,De){try{var Pe=re[we](De),Me=Pe.value}catch(Ve){te(Ve);return}Pe.done?ne(Me):Promise.resolve(Me).then(ce,xe)}function K(re){return function(){var ne=this,te=arguments;return new Promise(function(ce,xe){var we=re.apply(ne,te);function De(Me){Y(we,ce,xe,De,Pe,"next",Me)}function Pe(Me){Y(we,ce,xe,De,Pe,"throw",Me)}De(void 0)})}}function pe(re,ne){if(!(re instanceof ne))throw new TypeError("Cannot call a class as a function")}function _e(re,ne){for(var te=0;te<ne.length;te++){var ce=ne[te];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(re,ce.key,ce)}}function be(re,ne,te){return ne&&_e(re.prototype,ne),te&&_e(re,te),re}var Q=function(){function re(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";pe(this,re);var ce=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ne.constructor.name!=="RedisClient")throw ce}catch{throw ce}this.client=ne,this.HASH_KEY=te,this.hgetAsync=Object(k.promisify)(ne.hget).bind(ne),this.hsetAsync=Object(k.promisify)(ne.hset).bind(ne),this.hdelAsync=Object(k.promisify)(ne.hdel).bind(ne),this.delAsync=Object(k.promisify)(ne.del).bind(ne),this.hlenAsync=Object(k.promisify)(ne.hlen).bind(ne),this.hgetallAsync=Object(k.promisify)(ne.hgetall).bind(ne)}return be(re,[{key:"getItem",value:function(){var ne=K(regeneratorRuntime.mark(function ce(xe){var we;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetAsync(this.HASH_KEY,xe);case 2:if(Pe.t0=Pe.sent,Pe.t0){Pe.next=5;break}Pe.t0=null;case 5:return we=Pe.t0,Pe.abrupt("return",JSON.parse(we));case 7:case"end":return Pe.stop()}},ce,this)}));function te(ce){return ne.apply(this,arguments)}return te}()},{key:"setItem",value:function(){var ne=K(regeneratorRuntime.mark(function ce(xe,we){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hsetAsync(this.HASH_KEY,xe,JSON.stringify(we));case 2:return Pe.abrupt("return",we);case 3:case"end":return Pe.stop()}},ce,this)}));function te(ce,xe){return ne.apply(this,arguments)}return te}()},{key:"removeItem",value:function(){var ne=K(regeneratorRuntime.mark(function ce(xe){return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,this.hdelAsync(this.HASH_KEY,xe);case 2:case"end":return De.stop()}},ce,this)}));function te(ce){return ne.apply(this,arguments)}return te}()},{key:"clear",value:function(){var ne=K(regeneratorRuntime.mark(function ce(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return we.stop()}},ce,this)}));function te(){return ne.apply(this,arguments)}return te}()},{key:"length",value:function(){var ne=K(regeneratorRuntime.mark(function ce(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return we.stop()}},ce,this)}));function te(){return ne.apply(this,arguments)}return te}()},{key:"iterate",value:function(){var ne=K(regeneratorRuntime.mark(function ce(xe){var we;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return we=Pe.sent,Pe.abrupt("return",Promise.all(Object(G.mapObject)(we,xe)));case 4:case"end":return Pe.stop()}},ce,this)}));function te(ce){return ne.apply(this,arguments)}return te}()}]),re}();D.default=Q},"./src/request.js":function(V,D,b){b.r(D),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("./src/response.js"),G=b("./src/exclude.js"),Y=b("./src/cache.js");function K(Q,re,ne,te,ce,xe,we){try{var De=Q[xe](we),Pe=De.value}catch(Me){ne(Me);return}De.done?re(Pe):Promise.resolve(Pe).then(te,ce)}function pe(Q){return function(){var re=this,ne=arguments;return new Promise(function(te,ce){var xe=Q.apply(re,ne);function we(Pe){K(xe,te,ce,we,De,"next",Pe)}function De(Pe){K(xe,te,ce,we,De,"throw",Pe)}we(void 0)})}}function _e(Q,re){return be.apply(this,arguments)}function be(){return be=pe(regeneratorRuntime.mark(function Q(re,ne){var te,ce,xe;return regeneratorRuntime.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return xe=function(){return re.excludeFromCache=!0,{config:re,next:te}},re.debug("uuid",re.uuid),te=function(){for(var Me=arguments.length,Ve=new Array(Me),Ne=0;Ne<Me;Ne++)Ve[Ne]=arguments[Ne];return k.default.apply(void 0,[re,ne].concat(Ve))},De.next=5,re.invalidate(re,ne);case 5:if(!Object(G.default)(re,ne)){De.next=7;break}return De.abrupt("return",xe());case 7:return De.prev=7,De.next=10,Object(Y.read)(re,ne);case 10:return ce=De.sent,ce.config=ne,ce.request={fromCache:!0},De.abrupt("return",{config:re,next:ce});case 16:if(De.prev=16,De.t0=De.catch(7),!(re.clearOnStale&&De.t0.reason==="cache-stale")){De.next=21;break}return De.next=21,re.store.removeItem(re.uuid);case 21:return De.abrupt("return",{config:re,next:te});case 22:case"end":return De.stop()}},Q,null,[[7,16]])})),be.apply(this,arguments)}D.default=_e},"./src/response.js":function(V,D,b){b.r(D),b("./node_modules/regenerator-runtime/runtime.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");var k=b("./src/limit.js"),G=b("./src/cache.js"),Y=b("./node_modules/cache-control-esm/index.js");function K(Q,re,ne,te,ce,xe,we){try{var De=Q[xe](we),Pe=De.value}catch(Me){ne(Me);return}De.done?re(Pe):Promise.resolve(Pe).then(te,ce)}function pe(Q){return function(){var re=this,ne=arguments;return new Promise(function(te,ce){var xe=Q.apply(re,ne);function we(Pe){K(xe,te,ce,we,De,"next",Pe)}function De(Pe){K(xe,te,ce,we,De,"throw",Pe)}we(void 0)})}}function _e(Q,re,ne){return be.apply(this,arguments)}function be(){return be=pe(regeneratorRuntime.mark(function Q(re,ne,te){var ce,xe,we,De,Pe;return regeneratorRuntime.wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(ce=te.request,xe=ce===void 0?{}:ce,we=te.headers,De=we===void 0?{}:we,!(["arraybuffer","blob"].indexOf(xe.responseType)>-1)){Ve.next=3;break}return Ve.abrupt("return",te);case 3:if(Pe={},re.readHeaders&&(De["cache-control"]?(Pe=Object(Y.parse)(De["cache-control"]),(Pe.noCache||Pe.noStore)&&(re.excludeFromCache=!0)):De.expires?re.expires=new Date(De.expires).getTime():re.expires=new Date().getTime()),re.excludeFromCache){Ve.next=15;break}if(Pe.maxAge||Pe.maxAge===0?re.expires=Date.now()+Pe.maxAge*1e3:re.readHeaders||(re.expires=re.maxAge===0?Date.now():Date.now()+re.maxAge),!re.limit){Ve.next=11;break}return re.debug("Detected limit: ".concat(re.limit)),Ve.next=11,Object(k.default)(re);case 11:return Ve.next=13,Object(G.write)(re,ne,te);case 13:Ve.next=16;break;case 15:te.request.excludedFromCache=!0;case 16:return Ve.abrupt("return",te);case 17:case"end":return Ve.stop()}},Q)})),be.apply(this,arguments)}D.default=_e},"./src/serialize.js":function(V,D,b){b.r(D),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function k(K,pe){if(K==null)return{};var _e=G(K,pe),be,Q;if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(K);for(Q=0;Q<re.length;Q++)be=re[Q],!(pe.indexOf(be)>=0)&&Object.prototype.propertyIsEnumerable.call(K,be)&&(_e[be]=K[be])}return _e}function G(K,pe){if(K==null)return{};var _e={},be=Object.keys(K),Q,re;for(re=0;re<be.length;re++)Q=be[re],!(pe.indexOf(Q)>=0)&&(_e[Q]=K[Q]);return _e}function Y(K,pe,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(Q){K.debug("Could not parse data as JSON",Q)}_e.request,_e.config;var be=k(_e,["request","config"]);return be}D.default=Y},"./src/utilities.js":function(V,D,b){b.r(D),b.d(D,"isObject",function(){return G}),b.d(D,"getTag",function(){return Y}),b.d(D,"isFunction",function(){return K}),b.d(D,"isString",function(){return pe}),b.d(D,"mapObject",function(){return _e}),b("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),b("./node_modules/core-js/modules/es6.symbol.js"),b("./node_modules/core-js/modules/es6.array.iterator.js"),b("./node_modules/core-js/modules/es6.object.to-string.js");function k(be){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(re){return typeof re}:k=function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},k(be)}function G(be){var Q=k(be);return be!=null&&(Q==="object"||Q==="function")}function Y(be){return be===null?be===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(be)}function K(be){if(!G(be))return!1;var Q=Y(be);return Q==="[object Function]"||Q==="[object AsyncFunction]"||Q==="[object GeneratorFunction]"||Q==="[object Proxy]"}function pe(be){var Q=k(be);return Q==="string"||Q==="object"&&be!=null&&!Array.isArray(be)&&Y(be)==="[object String]"}function _e(be,Q){return G(be)?Object.keys(be).map(function(re){return Q(be[re],re)}):[]}},axios:function(V,D){V.exports=oe},util:function(V,D){V.exports=T.default}})})});const q={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},H=j.setupCache({maxAge:60*60*24*1e3}),fe=E.default.create({adapter:H.adapter}),Z=async($,N={})=>{const oe={...q,...N},[V,D]=i.lngLatToGoogle($,oe.zoomBase),b=oe.tileUrl.replace("{z}",String(oe.zoomBase)).replace("{x}",String(V)).replace("{y}",String(D)),k={code:"",prefecture:"",city:""};let G;try{const pe=await fe.get(b,{responseType:"arraybuffer"});G=Buffer.from(pe.data,"binary")}catch(pe){throw new Error(pe)}const Y=new y.VectorTile(new w.default(G));let K=Object.keys(Y.layers);return Array.isArray(K)||(K=[K]),K.forEach(pe=>{const _e=Y.layers[pe];if(_e&&oe.layer===_e.name)for(let be=0;be<_e.length;be++){const Q=_e.feature(be).toGeoJSON(V,D,oe.zoomBase);K.length>1&&(Q.properties.vt_layer=pe);const re={type:"FeatureCollection",features:[Q]};t.geoContains(re,$)&&(k.code=String(Q.id).length===5?String(Q.id):`0${String(Q.id)}`,k.prefecture=Q.properties.prefecture,k.city=Q.properties.city)}}),k};e.openReverseGeocoder=Z})(rC);const bO={defaultComment:"更新地址",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},EO={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},SO={defaultComment:"住所を更新",postcodeField:{key:"addr:postcode",displayName:"郵便番号",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"都道府県",placeholder:"東京都",adminLevel:4},{key:"addr:city",displayName:"市町村と東京23区",placeholder:"千代田区",adminLevel:7},{key:"addr:suburb",displayName:"政令指定都市の区",placeholder:""},{key:"addr:quarter",displayName:"地名",placeholder:"外神田",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"丁目",placeholder:"1丁目"},{key:"addr:block_number",displayName:"番地",placeholder:"17"},{key:"addr:housenumber",displayName:"号",placeholder:"6",prefix:"-"}]},TO={defaultComment:"주소 업데이트",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},Q2={JPN:SO,CHN:bO,DEU:EO,KOR:TO};function gA(e,t,i){i===void 0&&(i={});var s={type:"Feature"};return(i.id===0||i.id)&&(s.id=i.id),i.bbox&&(s.bbox=i.bbox),s.properties=t||{},s.geometry=e,s}function CO(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!eE(e[0])||!eE(e[1]))throw new Error("coordinates must contain numbers");var s={type:"Point",coordinates:e};return gA(s,t,i)}function AO(e,t,i){i===void 0&&(i={});for(var s=0,c=e;s<c.length;s++){var f=c[s];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<f[f.length-1].length;y++)if(f[f.length-1][y]!==f[0][y])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return gA(l,t,i)}function eE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function yA(e,t,i){if(e!==null)for(var s,c,f,y,l,w,E,T=0,S=0,I,j=e.type,q=j==="FeatureCollection",H=j==="Feature",fe=q?e.features.length:1,Z=0;Z<fe;Z++){E=q?e.features[Z].geometry:H?e.geometry:e,I=E?E.type==="GeometryCollection":!1,l=I?E.geometries.length:1;for(var $=0;$<l;$++){var N=0,oe=0;if(y=I?E.geometries[$]:E,y!==null){w=y.coordinates;var V=y.type;switch(T=i&&(V==="Polygon"||V==="MultiPolygon")?1:0,V){case null:break;case"Point":if(t(w,S,Z,N,oe)===!1)return!1;S++,N++;break;case"LineString":case"MultiPoint":for(s=0;s<w.length;s++){if(t(w[s],S,Z,N,oe)===!1)return!1;S++,V==="MultiPoint"&&N++}V==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(s=0;s<w.length;s++){for(c=0;c<w[s].length-T;c++){if(t(w[s][c],S,Z,N,oe)===!1)return!1;S++}V==="MultiLineString"&&N++,V==="Polygon"&&oe++}V==="Polygon"&&N++;break;case"MultiPolygon":for(s=0;s<w.length;s++){for(oe=0,c=0;c<w[s].length;c++){for(f=0;f<w[s][c].length-T;f++){if(t(w[s][c][f],S,Z,N,oe)===!1)return!1;S++}oe++}N++}break;case"GeometryCollection":for(s=0;s<y.geometries.length;s++)if(yA(y.geometries[s],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function IO(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function PO(e){return e.type==="Feature"?e.geometry:e}function kO(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var s=IO(e),c=PO(t),f=c.type,y=t.bbox,l=c.coordinates;if(y&&MO(s,y)===!1)return!1;f==="Polygon"&&(l=[l]);for(var w=!1,E=0;E<l.length&&!w;E++)if(tE(s,l[E][0],i.ignoreBoundary)){for(var T=!1,S=1;S<l[E].length&&!T;)tE(s,l[E][S],!i.ignoreBoundary)&&(T=!0),S++;T||(w=!0)}return w}function tE(e,t,i){var s=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,f=t.length-1;c<t.length;f=c++){var y=t[c][0],l=t[c][1],w=t[f][0],E=t[f][1],T=e[1]*(y-w)+l*(w-e[0])+E*(e[0]-y)===0&&(y-e[0])*(w-e[0])<=0&&(l-e[1])*(E-e[1])<=0;if(T)return!i;var S=l>e[1]!=E>e[1]&&e[0]<(w-y)*(e[1]-l)/(E-l)+y;S&&(s=!s)}return s}function MO(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function zO(e,t){t===void 0&&(t={});var i=0,s=0,c=0;return yA(e,function(f){i+=f[0],s+=f[1],c++},!0),CO([i/c,s/c],t.properties)}const LO=()=>{const[e,t]=vt.useState(!1);return{detectCountry:vt.useCallback(async(s,c)=>{t(!0);const y=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const l of y.features)if(kO([s,c],l.geometry))return console.log("country: ",l.properties),t(!1),l;t(!1)},[]),loadingCountry:e}},h0=({feature:e,fieldOption:t,suggestList:i,onChange:s})=>{var l;const[c,f]=vt.useState((l=e.properties)==null?void 0:l[t.key]);vt.useEffect(()=>{var w;f((w=e.properties)==null?void 0:w[t.key])},[e]);const y=vt.useCallback(w=>{f(w.currentTarget.value),s&&s(w)},[]);return pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:y}),pt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(w=>{if(parseInt(w.tags.admin_level)===t.adminLevel)return pt.jsx("option",{value:w.tags.name},w.id);if(w.type==="node"&&t.adminLevel===9)return pt.jsx("option",{value:w.tags.name},w.id)})})]})},RO=({feature:e,fields:t})=>e.properties?pt.jsxs(pt.Fragment,{children:[t.postcodeField&&pt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var s;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(s=e.properties)==null?void 0:s[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var s;return pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{children:(s=e.properties)==null?void 0:s[i.key]})," "]})})]}):null,OO=({placeholder:e,defaultValue:t})=>{const[i,s]=vt.useState(t);vt.useEffect(()=>{s(t)},[t]);const c=vt.useCallback(f=>{s(f.currentTarget.value)},[]);return pt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var Hm={},FO={get exports(){return Hm},set exports(e){Hm=e}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var i,s="4.15.0",c=200,f="Expected a function",y="__lodash_hash_undefined__",l=1,w=2,E=1/0,T=9007199254740991,S="[object Arguments]",I="[object Array]",j="[object Boolean]",q="[object Date]",H="[object Error]",fe="[object Function]",Z="[object GeneratorFunction]",$="[object Map]",N="[object Number]",oe="[object Object]",V="[object Promise]",D="[object RegExp]",b="[object Set]",k="[object String]",G="[object Symbol]",Y="[object WeakMap]",K="[object ArrayBuffer]",pe="[object DataView]",_e="[object Float32Array]",be="[object Float64Array]",Q="[object Int8Array]",re="[object Int16Array]",ne="[object Int32Array]",te="[object Uint8Array]",ce="[object Uint8ClampedArray]",xe="[object Uint16Array]",we="[object Uint32Array]",De=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,Me=/^\./,Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/[\\^$.*+?()[\]{}|]/g,Qe=/\\(\\)?/g,ct=/\w*$/,mt=/^\[object .+?Constructor\]$/,Lt=/^(?:0|[1-9]\d*)$/,dt={};dt[_e]=dt[be]=dt[Q]=dt[re]=dt[ne]=dt[te]=dt[ce]=dt[xe]=dt[we]=!0,dt[S]=dt[I]=dt[K]=dt[j]=dt[pe]=dt[q]=dt[H]=dt[fe]=dt[$]=dt[N]=dt[oe]=dt[D]=dt[b]=dt[k]=dt[Y]=!1;var bt={};bt[S]=bt[I]=bt[K]=bt[pe]=bt[j]=bt[q]=bt[_e]=bt[be]=bt[Q]=bt[re]=bt[ne]=bt[$]=bt[N]=bt[oe]=bt[D]=bt[b]=bt[k]=bt[G]=bt[te]=bt[ce]=bt[xe]=bt[we]=!0,bt[H]=bt[fe]=bt[Y]=!1;var Nt=typeof wl=="object"&&wl&&wl.Object===Object&&wl,Yt=typeof self=="object"&&self&&self.Object===Object&&self,dn=Nt||Yt||Function("return this")(),Pn=t&&!t.nodeType&&t,Cn=Pn&&!0&&e&&!e.nodeType&&e,mn=Cn&&Cn.exports===Pn,Vt=mn&&Nt.process,Te=function(){try{return Vt&&Vt.binding("util")}catch{}}(),F=Te&&Te.isTypedArray;function R(B,me){return B.set(me[0],me[1]),B}function ye(B,me){return B.add(me),B}function $e(B,me,Re){switch(Re.length){case 0:return B.call(me);case 1:return B.call(me,Re[0]);case 2:return B.call(me,Re[0],Re[1]);case 3:return B.call(me,Re[0],Re[1],Re[2])}return B.apply(me,Re)}function Ye(B,me){for(var Re=-1,ot=B?B.length:0;++Re<ot&&me(B[Re],Re,B)!==!1;);return B}function ut(B,me){for(var Re=-1,ot=me.length,It=B.length;++Re<ot;)B[It+Re]=me[Re];return B}function se(B,me,Re,ot){var It=-1,St=B?B.length:0;for(ot&&St&&(Re=B[++It]);++It<St;)Re=me(Re,B[It],It,B);return Re}function P(B,me){for(var Re=-1,ot=B?B.length:0;++Re<ot;)if(me(B[Re],Re,B))return!0;return!1}function L(B){return function(me){return me==null?i:me[B]}}function Se(B,me){for(var Re=-1,ot=Array(B);++Re<B;)ot[Re]=me(Re);return ot}function Be(B){return function(me){return B(me)}}function We(B,me){return B==null?i:B[me]}function it(B){var me=!1;if(B!=null&&typeof B.toString!="function")try{me=!!(B+"")}catch{}return me}function qt(B){var me=-1,Re=Array(B.size);return B.forEach(function(ot,It){Re[++me]=[It,ot]}),Re}function xn(B,me){return function(Re){return B(me(Re))}}function Sn(B){var me=-1,Re=Array(B.size);return B.forEach(function(ot){Re[++me]=ot}),Re}var _t=Array.prototype,Dt=Function.prototype,cn=Object.prototype,mr=dn["__core-js_shared__"],Ci=function(){var B=/[^.]+$/.exec(mr&&mr.keys&&mr.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}(),hn=Dt.toString,ir=cn.hasOwnProperty,wr=hn.call(Object),ei=cn.toString,gr=RegExp("^"+hn.call(ir).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yn=mn?dn.Buffer:i,Ct=dn.Symbol,sn=dn.Uint8Array,Tn=xn(Object.getPrototypeOf,Object),yr=Object.create,vr=cn.propertyIsEnumerable,ti=_t.splice,yi=Object.getOwnPropertySymbols,Ce=yn?yn.isBuffer:i,X=xn(Object.keys,Object),ae=Math.max,ve=Di(dn,"DataView"),Ee=Di(dn,"Map"),je=Di(dn,"Promise"),Ze=Di(dn,"Set"),Ue=Di(dn,"WeakMap"),Oe=Di(Object,"create"),He=!vr.call({valueOf:1},"valueOf"),st=Ro(ve),xt=Ro(Ee),at=Ro(je),Zt=Ro(Ze),Wt=Ro(Ue),Rt=Ct?Ct.prototype:i,rn=Rt?Rt.valueOf:i,pn=Rt?Rt.toString:i;function Gt(){}function ln(B){var me=-1,Re=B?B.length:0;for(this.clear();++me<Re;){var ot=B[me];this.set(ot[0],ot[1])}}function bn(){this.__data__=Oe?Oe(null):{}}function Rn(B){return this.has(B)&&delete this.__data__[B]}function Hn(B){var me=this.__data__;if(Oe){var Re=me[B];return Re===y?i:Re}return ir.call(me,B)?me[B]:i}function Or(B){var me=this.__data__;return Oe?me[B]!==i:ir.call(me,B)}function or(B,me){var Re=this.__data__;return Re[B]=Oe&&me===i?y:me,this}ln.prototype.clear=bn,ln.prototype.delete=Rn,ln.prototype.get=Hn,ln.prototype.has=Or,ln.prototype.set=or;function lr(B){var me=-1,Re=B?B.length:0;for(this.clear();++me<Re;){var ot=B[me];this.set(ot[0],ot[1])}}function wa(){this.__data__=[]}function is(B){var me=this.__data__,Re=Jn(me,B);if(Re<0)return!1;var ot=me.length-1;return Re==ot?me.pop():ti.call(me,Re,1),!0}function Xn(B){var me=this.__data__,Re=Jn(me,B);return Re<0?i:me[Re][1]}function Gl(B){return Jn(this.__data__,B)>-1}function Zl(B,me){var Re=this.__data__,ot=Jn(Re,B);return ot<0?Re.push([B,me]):Re[ot][1]=me,this}lr.prototype.clear=wa,lr.prototype.delete=is,lr.prototype.get=Xn,lr.prototype.has=Gl,lr.prototype.set=Zl;function ro(B){var me=-1,Re=B?B.length:0;for(this.clear();++me<Re;){var ot=B[me];this.set(ot[0],ot[1])}}function Vu(){this.__data__={hash:new ln,map:new(Ee||lr),string:new ln}}function Wl(B){return io(this,B).delete(B)}function ph(B){return io(this,B).get(B)}function Ws(B){return io(this,B).has(B)}function Hl(B,me){return io(this,B).set(B,me),this}ro.prototype.clear=Vu,ro.prototype.delete=Wl,ro.prototype.get=ph,ro.prototype.has=Ws,ro.prototype.set=Hl;function os(B){var me=-1,Re=B?B.length:0;for(this.__data__=new ro;++me<Re;)this.add(B[me])}function Gu(B){return this.__data__.set(B,y),this}function Zu(B){return this.__data__.has(B)}os.prototype.add=os.prototype.push=Gu,os.prototype.has=Zu;function $r(B){this.__data__=new lr(B)}function as(){this.__data__=new lr}function ba(B){return this.__data__.delete(B)}function Hs(B){return this.__data__.get(B)}function Xs(B){return this.__data__.has(B)}function Ea(B,me){var Re=this.__data__;if(Re instanceof lr){var ot=Re.__data__;if(!Ee||ot.length<c-1)return ot.push([B,me]),this;Re=this.__data__=new ro(ot)}return Re.set(B,me),this}$r.prototype.clear=as,$r.prototype.delete=ba,$r.prototype.get=Hs,$r.prototype.has=Xs,$r.prototype.set=Ea;function qs(B,me){var Re=br(B)||na(B)?Se(B.length,String):[],ot=Re.length,It=!!ot;for(var St in B)(me||ir.call(B,St))&&!(It&&(St=="length"||ta(St,ot)))&&Re.push(St);return Re}function Sa(B,me,Re){(Re!==i&&!Oo(B[me],Re)||typeof me=="number"&&Re===i&&!(me in B))&&(B[me]=Re)}function Ta(B,me,Re){var ot=B[me];(!(ir.call(B,me)&&Oo(ot,Re))||Re===i&&!(me in B))&&(B[me]=Re)}function Jn(B,me){for(var Re=B.length;Re--;)if(Oo(B[Re][0],me))return Re;return-1}function ss(B,me){return B&&ru(me,yo(me),B)}function ea(B,me,Re,ot,It,St,Xt){var tn;if(ot&&(tn=St?ot(B,It,St,Xt):ot(B)),tn!==i)return tn;if(!ni(B))return B;var En=br(B);if(En){if(tn=Nn(B),!me)return Ju(B,tn)}else{var $n=Bi(B),jn=$n==fe||$n==Z;if(au(B))return nu(B,me);if($n==oe||$n==S||jn&&!St){if(it(B))return St?B:{};if(tn=tr(jn?{}:B),!me)return xh(B,ss(tn,B))}else{if(!bt[$n])return St?B:{};tn=ar(B,$n,ea,me)}}Xt||(Xt=new $r);var Vn=Xt.get(B);if(Vn)return Vn;if(Xt.set(B,tn),!En)var Tt=Re?ec(B):yo(B);return Ye(Tt||B,function(Vr,cr){Tt&&(cr=Vr,Vr=B[cr]),Ta(tn,cr,ea(Vr,me,Re,ot,cr,B,Xt))}),tn}function Wu(B){return ni(B)?yr(B):{}}var Xl=el(Hu),Ks=ou();function Hu(B,me){return B&&Ks(B,me,yo)}function Xu(B,me){me=rl(me,B)?[me]:Qs(me);for(var Re=0,ot=me.length;B!=null&&Re<ot;)B=B[za(me[Re++])];return Re&&Re==ot?B:i}function mh(B,me,Re){var ot=me(B);return br(B)?ot:ut(ot,Re(B))}function ql(B){return ei.call(B)}function Kl(B,me){return B!=null&&me in Object(B)}function ls(B,me,Re,ot,It){return B===me?!0:B==null||me==null||!ni(B)&&!jo(me)?B!==B&&me!==me:Yl(B,me,ls,Re,ot,It)}function Yl(B,me,Re,ot,It,St){var Xt=br(B),tn=br(me),En=I,$n=I;Xt||(En=Bi(B),En=En==S?oe:En),tn||($n=Bi(me),$n=$n==S?oe:$n);var jn=En==oe&&!it(B),Vn=$n==oe&&!it(me),Tt=En==$n;if(Tt&&!jn)return St||(St=new $r),Xt||go(B)?tl(B,me,Re,ot,It,St):Pa(B,me,En,Re,ot,It,St);if(!(It&w)){var Vr=jn&&ir.call(B,"__wrapped__"),cr=Vn&&ir.call(me,"__wrapped__");if(Vr||cr){var ri=Vr?B.value():B,Ui=cr?me.value():me;return St||(St=new $r),Re(ri,Ui,ot,It,St)}}return Tt?(St||(St=new $r),Qu(B,me,Re,ot,It,St)):!1}function Bn(B,me,Re,ot){var It=Re.length,St=It,Xt=!ot;if(B==null)return!St;for(B=Object(B);It--;){var tn=Re[It];if(Xt&&tn[2]?tn[1]!==B[tn[0]]:!(tn[0]in B))return!1}for(;++It<St;){tn=Re[It];var En=tn[0],$n=B[En],jn=tn[1];if(Xt&&tn[2]){if($n===i&&!(En in B))return!1}else{var Vn=new $r;if(ot)var Tt=ot($n,jn,En,B,me,Vn);if(!(Tt===i?ls(jn,$n,ot,l|w,Vn):Tt))return!1}}return!0}function qu(B){if(!ni(B)||nc(B))return!1;var me=ms(B)||it(B)?gr:mt;return me.test(Ro(B))}function gh(B){return jo(B)&&gs(B.length)&&!!dt[ei.call(B)]}function Ca(B){return typeof B=="function"?B:B==null?cu:typeof B=="object"?br(B)?Ql(B[0],B[1]):vi(B):Fa(B)}function us(B){if(!il(B))return X(B);var me=[];for(var Re in Object(B))ir.call(B,Re)&&Re!="constructor"&&me.push(Re);return me}function Jl(B){if(!ni(B))return fs(B);var me=il(B),Re=[];for(var ot in B)ot=="constructor"&&(me||!ir.call(B,ot))||Re.push(ot);return Re}function vi(B){var me=tc(B);return me.length==1&&me[0][2]?Ma(me[0][0],me[0][1]):function(Re){return Re===B||Bn(Re,B,me)}}function Ql(B,me){return rl(B)&&hs(me)?Ma(za(B),me):function(Re){var ot=Ra(Re,B);return ot===i&&ot===me?lu(Re,B):ls(me,ot,i,l|w)}}function cs(B,me,Re,ot,It){if(B!==me){if(!(br(me)||go(me)))var St=Jl(me);Ye(St||me,function(Xt,tn){if(St&&(tn=Xt,Xt=me[tn]),ni(Xt))It||(It=new $r),Ys(B,me,tn,Re,cs,ot,It);else{var En=ot?ot(B[tn],Xt,tn+"",B,me,It):i;En===i&&(En=Xt),Sa(B,tn,En)}})}}function Ys(B,me,Re,ot,It,St,Xt){var tn=B[Re],En=me[Re],$n=Xt.get(En);if($n){Sa(B,Re,$n);return}var jn=St?St(tn,En,Re+"",B,me,Xt):i,Vn=jn===i;Vn&&(jn=En,br(En)||go(En)?br(tn)?jn=tn:Fo(tn)?jn=Ju(tn):(Vn=!1,jn=ea(En,!0)):ys(En)||na(En)?na(tn)?jn=La(tn):!ni(tn)||ot&&ms(tn)?(Vn=!1,jn=ea(En,!0)):jn=tn:Vn=!1),Vn&&(Xt.set(En,jn),It(jn,En,ot,St,Xt),Xt.delete(En)),Sa(B,Re,jn)}function eu(B){return function(me){return Xu(me,B)}}function tu(B,me){return me=ae(me===i?B.length-1:me,0),function(){for(var Re=arguments,ot=-1,It=ae(Re.length-me,0),St=Array(It);++ot<It;)St[ot]=Re[me+ot];ot=-1;for(var Xt=Array(me+1);++ot<me;)Xt[ot]=Re[ot];return Xt[me]=St,$e(B,this,Xt)}}function Js(B){if(typeof B=="string")return B;if(Do(B))return pn?pn.call(B):"";var me=B+"";return me=="0"&&1/B==-E?"-0":me}function Qs(B){return br(B)?B:ds(B)}function nu(B,me){if(me)return B.slice();var Re=new B.constructor(B.length);return B.copy(Re),Re}function Aa(B){var me=new B.constructor(B.byteLength);return new sn(me).set(new sn(B)),me}function Ku(B,me){var Re=me?Aa(B.buffer):B.buffer;return new B.constructor(Re,B.byteOffset,B.byteLength)}function Yu(B,me,Re){var ot=me?Re(qt(B),!0):qt(B);return se(ot,R,new B.constructor)}function Ia(B){var me=new B.constructor(B.source,ct.exec(B));return me.lastIndex=B.lastIndex,me}function yh(B,me,Re){var ot=me?Re(Sn(B),!0):Sn(B);return se(ot,ye,new B.constructor)}function vh(B){return rn?Object(rn.call(B)):{}}function _h(B,me){var Re=me?Aa(B.buffer):B.buffer;return new B.constructor(Re,B.byteOffset,B.length)}function Ju(B,me){var Re=-1,ot=B.length;for(me||(me=Array(ot));++Re<ot;)me[Re]=B[Re];return me}function ru(B,me,Re,ot){Re||(Re={});for(var It=-1,St=me.length;++It<St;){var Xt=me[It],tn=ot?ot(Re[Xt],B[Xt],Xt,Re,B):i;Ta(Re,Xt,tn===i?B[Xt]:tn)}return Re}function xh(B,me){return ru(B,er(B),me)}function iu(B){return tu(function(me,Re){var ot=-1,It=Re.length,St=It>1?Re[It-1]:i,Xt=It>2?Re[2]:i;for(St=B.length>3&&typeof St=="function"?(It--,St):i,Xt&&ka(Re[0],Re[1],Xt)&&(St=It<3?i:St,It=1),me=Object(me);++ot<It;){var tn=Re[ot];tn&&B(me,tn,ot,St)}return me})}function el(B,me){return function(Re,ot){if(Re==null)return Re;if(!Ni(Re))return B(Re,ot);for(var It=Re.length,St=me?It:-1,Xt=Object(Re);(me?St--:++St<It)&&ot(Xt[St],St,Xt)!==!1;);return Re}}function ou(B){return function(me,Re,ot){for(var It=-1,St=Object(me),Xt=ot(me),tn=Xt.length;tn--;){var En=Xt[B?tn:++It];if(Re(St[En],En,St)===!1)break}return me}}function tl(B,me,Re,ot,It,St){var Xt=It&w,tn=B.length,En=me.length;if(tn!=En&&!(Xt&&En>tn))return!1;var $n=St.get(B);if($n&&St.get(me))return $n==me;var jn=-1,Vn=!0,Tt=It&l?new os:i;for(St.set(B,me),St.set(me,B);++jn<tn;){var Vr=B[jn],cr=me[jn];if(ot)var ri=Xt?ot(cr,Vr,jn,me,B,St):ot(Vr,cr,jn,B,me,St);if(ri!==i){if(ri)continue;Vn=!1;break}if(Tt){if(!P(me,function(Ui,kt){if(!Tt.has(kt)&&(Vr===Ui||Re(Vr,Ui,ot,It,St)))return Tt.add(kt)})){Vn=!1;break}}else if(!(Vr===cr||Re(Vr,cr,ot,It,St))){Vn=!1;break}}return St.delete(B),St.delete(me),Vn}function Pa(B,me,Re,ot,It,St,Xt){switch(Re){case pe:if(B.byteLength!=me.byteLength||B.byteOffset!=me.byteOffset)return!1;B=B.buffer,me=me.buffer;case K:return!(B.byteLength!=me.byteLength||!ot(new sn(B),new sn(me)));case j:case q:case N:return Oo(+B,+me);case H:return B.name==me.name&&B.message==me.message;case D:case k:return B==me+"";case $:var tn=qt;case b:var En=St&w;if(tn||(tn=Sn),B.size!=me.size&&!En)return!1;var $n=Xt.get(B);if($n)return $n==me;St|=l,Xt.set(B,me);var jn=tl(tn(B),tn(me),ot,It,St,Xt);return Xt.delete(B),jn;case G:if(rn)return rn.call(B)==rn.call(me)}return!1}function Qu(B,me,Re,ot,It,St){var Xt=It&w,tn=yo(B),En=tn.length,$n=yo(me),jn=$n.length;if(En!=jn&&!Xt)return!1;for(var Vn=En;Vn--;){var Tt=tn[Vn];if(!(Xt?Tt in me:ir.call(me,Tt)))return!1}var Vr=St.get(B);if(Vr&&St.get(me))return Vr==me;var cr=!0;St.set(B,me),St.set(me,B);for(var ri=Xt;++Vn<En;){Tt=tn[Vn];var Ui=B[Tt],kt=me[Tt];if(ot)var vs=Xt?ot(kt,Ui,Tt,me,B,St):ot(Ui,kt,Tt,B,me,St);if(!(vs===i?Ui===kt||Re(Ui,kt,ot,It,St):vs)){cr=!1;break}ri||(ri=Tt=="constructor")}if(cr&&!ri){var sl=B.constructor,Da=me.constructor;sl!=Da&&"constructor"in B&&"constructor"in me&&!(typeof sl=="function"&&sl instanceof sl&&typeof Da=="function"&&Da instanceof Da)&&(cr=!1)}return St.delete(B),St.delete(me),cr}function ec(B){return mh(B,yo,er)}function nl(){var B=Gt.iteratee||ra;return B=B===ra?Ca:B,arguments.length?B(arguments[0],arguments[1]):B}function io(B,me){var Re=B.__data__;return wh(me)?Re[typeof me=="string"?"string":"hash"]:Re.map}function tc(B){for(var me=yo(B),Re=me.length;Re--;){var ot=me[Re],It=B[ot];me[Re]=[ot,It,hs(It)]}return me}function Di(B,me){var Re=We(B,me);return qu(Re)?Re:i}var er=yi?xn(yi,Object):ui,Bi=ql;(ve&&Bi(new ve(new ArrayBuffer(1)))!=pe||Ee&&Bi(new Ee)!=$||je&&Bi(je.resolve())!=V||Ze&&Bi(new Ze)!=b||Ue&&Bi(new Ue)!=Y)&&(Bi=function(B){var me=ei.call(B),Re=me==oe?B.constructor:i,ot=Re?Ro(Re):i;if(ot)switch(ot){case st:return pe;case xt:return $;case at:return V;case Zt:return b;case Wt:return Y}return me});function kn(B,me,Re){me=rl(me,B)?[me]:Qs(me);for(var ot,It=-1,Xt=me.length;++It<Xt;){var St=za(me[It]);if(!(ot=B!=null&&Re(B,St)))break;B=B[St]}if(ot)return ot;var Xt=B?B.length:0;return!!Xt&&gs(Xt)&&ta(St,Xt)&&(br(B)||na(B))}function Nn(B){var me=B.length,Re=B.constructor(me);return me&&typeof B[0]=="string"&&ir.call(B,"index")&&(Re.index=B.index,Re.input=B.input),Re}function tr(B){return typeof B.constructor=="function"&&!il(B)?Wu(Tn(B)):{}}function ar(B,me,Re,ot){var It=B.constructor;switch(me){case K:return Aa(B);case j:case q:return new It(+B);case pe:return Ku(B,ot);case _e:case be:case Q:case re:case ne:case te:case ce:case xe:case we:return _h(B,ot);case $:return Yu(B,ot,Re);case N:case k:return new It(B);case D:return Ia(B);case b:return yh(B,ot,Re);case G:return vh(B)}}function ta(B,me){return me=me??T,!!me&&(typeof B=="number"||Lt.test(B))&&B>-1&&B%1==0&&B<me}function ka(B,me,Re){if(!ni(Re))return!1;var ot=typeof me;return(ot=="number"?Ni(Re)&&ta(me,Re.length):ot=="string"&&me in Re)?Oo(Re[me],B):!1}function rl(B,me){if(br(B))return!1;var Re=typeof B;return Re=="number"||Re=="symbol"||Re=="boolean"||B==null||Do(B)?!0:Pe.test(B)||!De.test(B)||me!=null&&B in Object(me)}function wh(B){var me=typeof B;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?B!=="__proto__":B===null}function nc(B){return!!Ci&&Ci in B}function il(B){var me=B&&B.constructor,Re=typeof me=="function"&&me.prototype||cn;return B===Re}function hs(B){return B===B&&!ni(B)}function Ma(B,me){return function(Re){return Re==null?!1:Re[B]===me&&(me!==i||B in Object(Re))}}function fs(B){var me=[];if(B!=null)for(var Re in Object(B))me.push(Re);return me}var ds=li(function(B){B=su(B);var me=[];return Me.test(B)&&me.push(""),B.replace(Ve,function(Re,ot,It,St){me.push(It?St.replace(Qe,"$1"):ot||Re)}),me});function za(B){if(typeof B=="string"||Do(B))return B;var me=B+"";return me=="0"&&1/B==-E?"-0":me}function Ro(B){if(B!=null){try{return hn.call(B)}catch{}try{return B+""}catch{}}return""}function ol(B){for(var me=-1,Re=B?B.length:0,ot=0,It=[];++me<Re;){var St=B[me];St&&(It[ot++]=St)}return It}function ps(B,me){var Re=br(B)?Ye:Xl;return Re(B,nl(me,3))}function li(B,me){if(typeof B!="function"||me&&typeof me!="function")throw new TypeError(f);var Re=function(){var ot=arguments,It=me?me.apply(this,ot):ot[0],St=Re.cache;if(St.has(It))return St.get(It);var Xt=B.apply(this,ot);return Re.cache=St.set(It,Xt),Xt};return Re.cache=new(li.Cache||ro),Re}li.Cache=ro;function rc(B){return ea(B,!1,!0)}function Oo(B,me){return B===me||B!==B&&me!==me}function na(B){return Fo(B)&&ir.call(B,"callee")&&(!vr.call(B,"callee")||ei.call(B)==S)}var br=Array.isArray;function Ni(B){return B!=null&&gs(B.length)&&!ms(B)}function Fo(B){return jo(B)&&Ni(B)}var au=Ce||ja;function al(B){if(Ni(B)&&(br(B)||typeof B=="string"||typeof B.splice=="function"||au(B)||na(B)))return!B.length;var me=Bi(B);if(me==$||me==b)return!B.size;if(He||il(B))return!X(B).length;for(var Re in B)if(ir.call(B,Re))return!1;return!0}function ms(B){var me=ni(B)?ei.call(B):"";return me==fe||me==Z}function gs(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=T}function ni(B){var me=typeof B;return!!B&&(me=="object"||me=="function")}function jo(B){return!!B&&typeof B=="object"}function ys(B){if(!jo(B)||ei.call(B)!=oe||it(B))return!1;var me=Tn(B);if(me===null)return!0;var Re=ir.call(me,"constructor")&&me.constructor;return typeof Re=="function"&&Re instanceof Re&&hn.call(Re)==wr}function Do(B){return typeof B=="symbol"||jo(B)&&ei.call(B)==G}var go=F?Be(F):gh;function La(B){return ru(B,uu(B))}function su(B){return B==null?"":Js(B)}function Ra(B,me,Re){var ot=B==null?i:Xu(B,me);return ot===i?Re:ot}function lu(B,me){return B!=null&&kn(B,me,Kl)}function yo(B){return Ni(B)?qs(B):us(B)}function uu(B){return Ni(B)?qs(B,!0):Jl(B)}var Oa=iu(function(B,me,Re){cs(B,me,Re)});function cu(B){return B}function ra(B){return Ca(typeof B=="function"?B:ea(B,!0))}function Fa(B){return rl(B)?L(za(B)):eu(B)}function ui(){return[]}function ja(){return!1}Gt.compact=ol,Gt.iteratee=ra,Gt.keys=yo,Gt.keysIn=uu,Gt.memoize=li,Gt.merge=Oa,Gt.property=Fa,Gt.toPlainObject=La,Gt.clone=rc,Gt.eq=Oo,Gt.forEach=ps,Gt.get=Ra,Gt.hasIn=lu,Gt.identity=cu,Gt.isArguments=na,Gt.isArray=br,Gt.isArrayLike=Ni,Gt.isArrayLikeObject=Fo,Gt.isBuffer=au,Gt.isEmpty=al,Gt.isFunction=ms,Gt.isLength=gs,Gt.isObject=ni,Gt.isObjectLike=jo,Gt.isPlainObject=ys,Gt.isSymbol=Do,Gt.isTypedArray=go,Gt.stubArray=ui,Gt.stubFalse=ja,Gt.toString=su,Gt.each=ps,Gt.VERSION=s,Cn&&((Cn.exports=Gt)._=Gt,Pn._=Gt)}).call(wl)})(FO,Hm);var jO=$p;function $p(e,t){var i=e&&e.type,s;if(i==="FeatureCollection")for(s=0;s<e.features.length;s++)$p(e.features[s],t);else if(i==="GeometryCollection")for(s=0;s<e.geometries.length;s++)$p(e.geometries[s],t);else if(i==="Feature")$p(e.geometry,t);else if(i==="Polygon")nE(e.coordinates,t);else if(i==="MultiPolygon")for(s=0;s<e.coordinates.length;s++)nE(e.coordinates[s],t);return e}function nE(e,t){if(e.length!==0){rE(e[0],t);for(var i=1;i<e.length;i++)rE(e[i],!t)}}function rE(e,t){for(var i=0,s=0,c=0,f=e.length,y=f-1;c<f;y=c++){var l=(e[c][0]-e[y][0])*(e[y][1]+e[c][1]),w=i+l;s+=Math.abs(i)>=Math.abs(l)?i-w+l:l-w+i,i=w}i+s>=0!=!!t&&e.reverse()}var t_={},DO={get exports(){return t_},set exports(e){t_=e}};const BO=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];(function(e){e.exports=BO})(DO);var Ln=Hm,wp=jO,Vp={};t_.forEach(function(e){if(e.polygon==="all")Vp[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(s){i[s]=!0}),Vp[e.key]={},Vp[e.key][t]=i}});function NO(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Ln.merge(e,t)}var Xm={};Xm=function(e,t,i){t=Ln.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:Vp,deduplicator:NO},t);var s;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?s=f(e):s=c(e),s;function c(w){var E=new Array,T=new Array,S=new Array;function I(V){var D=Ln.clone(V);D.lat=V.center.lat,D.lon=V.center.lon,D.__is_center_placeholder=!0,E.push(D)}function j(V){var D=Ln.clone(V);D.nodes=[];function b(k,G,Y){var K={type:"node",id:"_"+D.type+"/"+D.id+"bounds"+Y,lat:k,lon:G};D.nodes.push(K.id),E.push(K)}b(D.bounds.minlat,D.bounds.minlon,1),b(D.bounds.maxlat,D.bounds.minlon,2),b(D.bounds.maxlat,D.bounds.maxlon,3),b(D.bounds.minlat,D.bounds.maxlon,4),D.nodes.push(D.nodes[0]),D.__is_bounds_placeholder=!0,T.push(D)}function q(V){function D(b,k,G){var Y={type:"node",id:G,lat:b,lon:k};E.push(Y)}Ln.isArray(V.nodes)||(V.nodes=V.geometry.map(function(b){return b!==null?"_anonymous@"+b.lat+"/"+b.lon:"_anonymous@unknown_location"})),V.geometry.forEach(function(b,k){b&&D(b.lat,b.lon,V.nodes[k])})}function H(V){function D(k,G,Y){var K={type:"node",id:Y,lat:k,lon:G};E.push(K)}function b(k,G){if(T.some(function(pe){return pe.type=="way"&&pe.id==G}))return;var Y={type:"way",id:G,nodes:[]};function K(pe,_e){var be={type:"node",id:"_anonymous@"+pe+"/"+_e,lat:pe,lon:_e};Y.nodes.push(be.id),E.push(be)}k.forEach(function(pe){pe?K(pe.lat,pe.lon):Y.nodes.push(void 0)}),T.push(Y)}V.members.forEach(function(k,G){k.type=="node"?k.lat&&D(k.lat,k.lon,k.ref):k.type=="way"&&k.geometry&&(k.ref="_fullGeom"+k.ref,b(k.geometry,k.ref))})}for(var fe=0;fe<w.elements.length;fe++)switch(w.elements[fe].type){case"node":var Z=w.elements[fe];E.push(Z);break;case"way":var $=Ln.clone(w.elements[fe]);$.nodes=Ln.clone($.nodes),T.push($),$.center&&I($),$.geometry?q($):$.bounds&&j($);break;case"relation":var N=Ln.clone(w.elements[fe]);N.members=Ln.clone(N.members),S.push(N);var oe=N.members&&N.members.some(function(V){return V.type=="node"&&V.lat||V.type=="way"&&V.geometry&&V.geometry.length>0});N.center&&I(N),oe?H(N):N.bounds&&j(N);break}return y(E,T,S)}function f(w){var E=new Array,T=new Array,S=new Array;function I(N,oe,V){N.hasAttribute(V)&&(oe[V]=N.getAttribute(V))}function j(N,oe){var V=Ln.clone(N);I(oe,V,"lat"),I(oe,V,"lon"),V.__is_center_placeholder=!0,E.push(V)}function q(N,oe){var V=Ln.clone(N);V.nodes=[];function D(b,k,G){var Y={type:"node",id:"_"+V.type+"/"+V.id+"bounds"+G,lat:b,lon:k};V.nodes.push(Y.id),E.push(Y)}D(oe.getAttribute("minlat"),oe.getAttribute("minlon"),1),D(oe.getAttribute("maxlat"),oe.getAttribute("minlon"),2),D(oe.getAttribute("maxlat"),oe.getAttribute("maxlon"),3),D(oe.getAttribute("minlat"),oe.getAttribute("maxlon"),4),V.nodes.push(V.nodes[0]),V.__is_bounds_placeholder=!0,T.push(V)}function H(N,oe){function V(D,b,k){var G={type:"node",id:k,lat:D,lon:b};return E.push(G),G.id}Ln.isArray(N.nodes)||(N.nodes=[],Ln.each(oe,function(D,b){N.nodes.push("_anonymous@"+D.getAttribute("lat")+"/"+D.getAttribute("lon"))})),Ln.each(oe,function(D,b){D.getAttribute("lat")&&V(D.getAttribute("lat"),D.getAttribute("lon"),N.nodes[b])})}function fe(N,oe){function V(b,k,G){var Y={type:"node",id:G,lat:b,lon:k};E.push(Y)}function D(b,k){if(T.some(function(K){return K.type=="way"&&K.id==k}))return;var G={type:"way",id:k,nodes:[]};function Y(K,pe){var _e={type:"node",id:"_anonymous@"+K+"/"+pe,lat:K,lon:pe};G.nodes.push(_e.id),E.push(_e)}Ln.each(b,function(K){K.getAttribute("lat")?Y(K.getAttribute("lat"),K.getAttribute("lon")):G.nodes.push(void 0)}),T.push(G)}Ln.each(oe,function(b,k){N.members[k].type=="node"?b.getAttribute("lat")&&V(b.getAttribute("lat"),b.getAttribute("lon"),N.members[k].ref):N.members[k].type=="way"&&b.getElementsByTagName("nd").length>0&&(N.members[k].ref="_fullGeom"+N.members[k].ref,D(b.getElementsByTagName("nd"),N.members[k].ref))})}Ln.each(w.getElementsByTagName("node"),function(N,oe){var V={};Ln.each(N.getElementsByTagName("tag"),function(b){V[b.getAttribute("k")]=b.getAttribute("v")});var D={type:"node"};I(N,D,"id"),I(N,D,"lat"),I(N,D,"lon"),I(N,D,"version"),I(N,D,"timestamp"),I(N,D,"changeset"),I(N,D,"uid"),I(N,D,"user"),Ln.isEmpty(V)||(D.tags=V),E.push(D)});var Z,$;return Ln.each(w.getElementsByTagName("way"),function(N,oe){var V={},D=[];Ln.each(N.getElementsByTagName("tag"),function(G){V[G.getAttribute("k")]=G.getAttribute("v")});var b=!1;Ln.each(N.getElementsByTagName("nd"),function(G,Y){var K;(K=G.getAttribute("ref"))&&(D[Y]=K),!b&&G.getAttribute("lat")&&(b=!0)});var k={type:"way"};I(N,k,"id"),I(N,k,"version"),I(N,k,"timestamp"),I(N,k,"changeset"),I(N,k,"uid"),I(N,k,"user"),D.length>0&&(k.nodes=D),Ln.isEmpty(V)||(k.tags=V),(Z=N.getElementsByTagName("center")[0])&&j(k,Z),b?H(k,N.getElementsByTagName("nd")):($=N.getElementsByTagName("bounds")[0])&&q(k,$),T.push(k)}),Ln.each(w.getElementsByTagName("relation"),function(N,oe){var V={},D=[];Ln.each(N.getElementsByTagName("tag"),function(G){V[G.getAttribute("k")]=G.getAttribute("v")});var b=!1;Ln.each(N.getElementsByTagName("member"),function(G,Y){D[Y]={},I(G,D[Y],"ref"),I(G,D[Y],"role"),I(G,D[Y],"type"),(!b&&D[Y].type=="node"&&G.getAttribute("lat")||D[Y].type=="way"&&G.getElementsByTagName("nd").length>0)&&(b=!0)});var k={type:"relation"};I(N,k,"id"),I(N,k,"version"),I(N,k,"timestamp"),I(N,k,"changeset"),I(N,k,"uid"),I(N,k,"user"),D.length>0&&(k.members=D),Ln.isEmpty(V)||(k.tags=V),(Z=N.getElementsByTagName("center")[0])&&j(k,Z),b?fe(k,N.getElementsByTagName("member")):($=N.getElementsByTagName("bounds")[0])&&q(k,$),S.push(k)}),y(E,T,S)}function y(w,E,T){function S(Me,Ve){if(typeof Ve!="object"&&(Ve={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(Me,Ve);for(var Ne in Me)if(t.uninterestingTags[Ne]!==!0&&!(Ve[Ne]===!0||Ve[Ne]===Me[Ne]))return!0;return!1}function I(Me){var Ve={timestamp:Me.timestamp,version:Me.version,changeset:Me.changeset,user:Me.user,uid:Me.uid};for(var Ne in Ve)Ve[Ne]===void 0&&delete Ve[Ne];return Ve}for(var j=new Object,q=new Object,H=0;H<w.length;H++){var fe=w[H];j[fe.id]!==void 0&&(fe=t.deduplicator(fe,j[fe.id])),j[fe.id]=fe,typeof fe.tags<"u"&&S(fe.tags)&&(q[fe.id]=!0)}for(var H=0;H<T.length;H++)if(Ln.isArray(T[H].members))for(var Z=0;Z<T[H].members.length;Z++)T[H].members[Z].type=="node"&&(q[T[H].members[Z].ref]=!0);for(var $=new Object,N=new Object,H=0;H<E.length;H++){var oe=E[H];if($[oe.id]&&(oe=t.deduplicator(oe,$[oe.id])),$[oe.id]=oe,Ln.isArray(oe.nodes))for(var Z=0;Z<oe.nodes.length;Z++)typeof oe.nodes[Z]!="object"&&(N[oe.nodes[Z]]=!0,oe.nodes[Z]=j[oe.nodes[Z]])}var V=new Array;for(var D in j){var fe=j[D];(!N[D]||q[D])&&V.push(fe)}for(var b=new Array,H=0;H<T.length;H++){var k=T[H];b[k.id]&&(k=t.deduplicator(k,b[k.id])),b[k.id]=k}var G={node:{},way:{},relation:{}};for(var D in b){var k=b[D];if(!Ln.isArray(k.members)){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"ignored because it has no members");continue}for(var Z=0;Z<k.members.length;Z++){var Y=k.members[Z].type,K=k.members[Z].ref;if(typeof K!="number"&&(K=K.replace("_fullGeom","")),!G[Y]){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"member",Y+"/"+K,"ignored because it has an invalid type");continue}typeof G[Y][K]>"u"&&(G[Y][K]=[]),G[Y][K].push({role:k.members[Z].role,rel:k.id,reltags:k.tags})}}var pe,_e=[];for(H=0;H<V.length;H++){if(typeof V[H].lon>"u"||typeof V[H].lat>"u"){t.verbose&&console.warn("POI",V[H].type+"/"+V[H].id,"ignored because it lacks coordinates");continue}var be={type:"Feature",id:V[H].type+"/"+V[H].id,properties:{type:V[H].type,id:V[H].id,tags:V[H].tags||{},relations:G.node[V[H].id]||[],meta:I(V[H])},geometry:{type:"Point",coordinates:[+V[H].lon,+V[H].lat]}};V[H].__is_center_placeholder&&(be.properties.geometry="center"),i?i(be):_e.push(be)}for(var Q=[],re=[],H=0;H<T.length;H++)if(b[T[H].id]===T[H]){if(typeof T[H].tags<"u"&&(T[H].tags.type=="route"||T[H].tags.type=="waterway")){let Ve=function(Ne){var Qe=!1,ct;ct=Ne.members.filter(function(bt){return bt.type==="way"}),ct=ct.map(function(bt){var Nt=$[bt.ref];if(Nt===void 0||Nt.nodes===void 0){t.verbose&&console.warn("Route "+Ne.type+"/"+Ne.id,"tainted by a missing or incomplete  way",bt.type+"/"+bt.ref),Qe=!0;return}return{id:bt.ref,role:bt.role,way:Nt,nodes:Nt.nodes.filter(function(Yt){return Yt!==void 0?!0:(Qe=!0,t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"tainted by a way",bt.type+"/"+bt.ref,"with a missing node"),!1)})}}),ct=Ln.compact(ct);var mt;mt=f0(ct);var Lt=[];if(Lt=Ln.compact(mt.map(function(bt){return Ln.compact(bt.map(function(Nt){return[+Nt.lon,+Nt.lat]}))})),Lt.length==0)return t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"contains no coordinates"),!1;var dt={type:"Feature",id:Ne.type+"/"+Ne.id,properties:{type:Ne.type,id:Ne.id,tags:Ne.tags||{},relations:G[Ne.type][Ne.id]||[],meta:I(Ne)},geometry:{type:Lt.length===1?"LineString":"MultiLineString",coordinates:Lt.length===1?Lt[0]:Lt}};return Qe&&(t.verbose&&console.warn("Route",Ne.type+"/"+Ne.id,"is tainted"),dt.properties.tainted=!0),dt};var De=Ve;if(!Ln.isArray(T[H].members)){t.verbose&&console.warn("Route",T[H].type+"/"+T[H].id,"ignored because it has no members");continue}if(T[H].members.forEach(function(Ne){$[Ne.ref]&&!S($[Ne.ref].tags)&&($[Ne.ref].is_skippablerelationmember=!0)}),be=Ve(T[H]),be===!1){t.verbose&&console.warn("Route relation",T[H].type+"/"+T[H].id,"ignored because it has invalid geometry");continue}i?i(wp(be)):re.push(be)}if(typeof T[H].tags<"u"&&(T[H].tags.type=="multipolygon"||T[H].tags.type=="boundary")){let Ne=function(Qe,ct){var mt=!1,Lt=te?"way":"relation",dt=typeof Qe.id=="number"?Qe.id:+Qe.id.replace("_fullGeom",""),bt;bt=ct.members.filter(function(R){return R.type==="way"}),bt=bt.map(function(R){var ye=$[R.ref];if(ye===void 0||ye.nodes===void 0){t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"tainted by a missing or incomplete way",R.type+"/"+R.ref),mt=!0;return}return{id:R.ref,role:R.role||"outer",way:ye,nodes:ye.nodes.filter(function($e){return $e!==void 0?!0:(mt=!0,t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"tainted by a way",R.type+"/"+R.ref,"with a missing node"),!1)})}}),bt=Ln.compact(bt);var Nt,Yt;Nt=f0(bt.filter(function(R){return R.role==="outer"})),Yt=f0(bt.filter(function(R){return R.role==="inner"}));var dn;function Pn(R){var ye=function(P,L){for(var Se=0;Se<L.length;Se++)if(Ye(L[Se],P))return!0;return!1},$e=function(P){return P.map(function(L){return[+L.lat,+L.lon]})},Ye=function(P,L){for(var Se=P[0],Be=P[1],We=!1,it=0,qt=L.length-1;it<L.length;qt=it++){var xn=L[it][0],Sn=L[it][1],_t=L[qt][0],Dt=L[qt][1],cn=Sn>Be!=Dt>Be&&Se<(_t-xn)*(Be-Sn)/(Dt-Sn)+xn;cn&&(We=!We)}return We},ut,se;for(R=$e(R),ut=0;ut<Nt.length;ut++)if(se=$e(Nt[ut]),ye(se,R))return ut}dn=Nt.map(function(R){return[R]});for(var Cn=0;Cn<Yt.length;Cn++){var mn=Pn(Yt[Cn]);mn!==void 0?dn[mn].push(Yt[Cn]):t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"contains an inner ring with no containing outer")}var Vt=[];if(Vt=Ln.compact(dn.map(function(R){var ye=Ln.compact(R.map(function($e){if($e.length<4){t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"contains a ring with less than four nodes");return}return Ln.compact($e.map(function(Ye){return[+Ye.lon,+Ye.lat]}))}));if(ye.length==0){t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"contains an empty ring cluster");return}return ye})),Vt.length==0)return t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"contains no coordinates"),!1;var Te="MultiPolygon";Vt.length===1&&(Te="Polygon",Vt=Vt[0]);var F={type:"Feature",id:Qe.type+"/"+dt,properties:{type:Qe.type,id:dt,tags:Qe.tags||{},relations:G[Qe.type][Qe.id]||[],meta:I(Qe)},geometry:{type:Te,coordinates:Vt}};return mt&&(t.verbose&&console.warn("Multipolygon",Lt+"/"+dt,"is tainted"),F.properties.tainted=!0),F};var Pe=Ne;if(!Ln.isArray(T[H].members)){t.verbose&&console.warn("Multipolygon",T[H].type+"/"+T[H].id,"ignored because it has no members");continue}for(var ne=0,Z=0;Z<T[H].members.length;Z++)T[H].members[Z].role=="outer"?ne++:t.verbose&&T[H].members[Z].role!="inner"&&console.warn("Multipolygon",T[H].type+"/"+T[H].id,"member",T[H].members[Z].type+"/"+T[H].members[Z].ref,'ignored because it has an invalid role: "'+T[H].members[Z].role+'"');if(T[H].members.forEach(function(Qe){$[Qe.ref]&&(Qe.role==="outer"&&!S($[Qe.ref].tags,T[H].tags)&&($[Qe.ref].is_skippablerelationmember=!0),Qe.role==="inner"&&!S($[Qe.ref].tags)&&($[Qe.ref].is_skippablerelationmember=!0))}),ne==0){t.verbose&&console.warn("Multipolygon relation",T[H].type+"/"+T[H].id,"ignored because it has no outer ways");continue}var te=!1;ne==1&&!S(T[H].tags,{type:!0})&&(te=!0);var be=null;if(!te)be=Ne(T[H],T[H]);else{var ce=T[H].members.filter(function(Qe){return Qe.role==="outer"})[0];if(ce=$[ce.ref],ce===void 0){t.verbose&&console.warn("Multipolygon relation",T[H].type+"/"+T[H].id,"ignored because outer way",ce.type+"/"+ce.ref,"is missing");continue}ce.is_skippablerelationmember=!0,be=Ne(ce,T[H])}if(be===!1){t.verbose&&console.warn("Multipolygon relation",T[H].type+"/"+T[H].id,"ignored because it has invalid geometry");continue}i?i(wp(be)):re.push(be)}}for(var H=0;H<E.length;H++)if($[E[H].id]===E[H]){if(!Ln.isArray(E[H].nodes)){t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"ignored because it has no nodes");continue}if(!E[H].is_skippablerelationmember){typeof E[H].id!="number"&&(E[H].id=+E[H].id.replace("_fullGeom","")),E[H].tainted=!1,E[H].hidden=!1;var xe=new Array;for(Z=0;Z<E[H].nodes.length;Z++)typeof E[H].nodes[Z]=="object"?xe.push([+E[H].nodes[Z].lon,+E[H].nodes[Z].lat]):(t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"is tainted by an invalid node"),E[H].tainted=!0);if(xe.length<=1){t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"ignored because it contains too few nodes");continue}var we="LineString";typeof E[H].nodes[0]<"u"&&typeof E[H].nodes[E[H].nodes.length-1]<"u"&&E[H].nodes[0].id===E[H].nodes[E[H].nodes.length-1].id&&(typeof E[H].tags<"u"&&l(E[H].tags)||E[H].__is_bounds_placeholder)&&(we="Polygon",xe=[xe]);var be={type:"Feature",id:E[H].type+"/"+E[H].id,properties:{type:E[H].type,id:E[H].id,tags:E[H].tags||{},relations:G.way[E[H].id]||[],meta:I(E[H])},geometry:{type:we,coordinates:xe}};E[H].tainted&&(t.verbose&&console.warn("Way",E[H].type+"/"+E[H].id,"is tainted"),be.properties.tainted=!0),E[H].__is_bounds_placeholder&&(be.properties.geometry="bounds"),i?i(wp(be)):we=="LineString"?Q.push(be):re.push(be)}}return i?!0:(pe={type:"FeatureCollection",features:[]},pe.features=pe.features.concat(re),pe.features=pe.features.concat(Q),pe.features=pe.features.concat(_e),t.flatProperties&&pe.features.forEach(function(Me){Me.properties=Ln.merge(Me.properties.meta,Me.properties.tags,{id:Me.properties.type+"/"+Me.properties.id})}),pe=wp(pe),pe)}function l(w){var E=t.polygonFeatures;if(typeof E=="function")return E(w);if(w.area==="no")return!1;for(var T in w){var S=w[T],I=E[T];if(!(typeof I>"u")&&S!=="no"&&(I===!0||I.included_values&&I.included_values[S]===!0||I.excluded_values&&I.excluded_values[S]!==!0))return!0}return!1}};function f0(e){for(var t=function(S){return S[0]},i=function(S){return S[S.length-1]},s=function(S,I){return S!==void 0&&I!==void 0&&S.id===I.id},c=[],f,y,l,w,E,T;e.length;)for(f=e.pop().nodes.slice(),c.push(f);e.length&&!s(t(f),i(f));){for(y=t(f),l=i(f),w=0;w<e.length;w++)if(T=e[w].nodes,s(l,t(T))){E=f.push,T=T.slice(1);break}else if(s(l,i(T))){E=f.push,T=T.slice(0,-1).reverse();break}else if(s(y,i(T))){E=f.unshift,T=T.slice(0,-1);break}else if(s(y,t(T))){E=f.unshift,T=T.slice(1).reverse();break}else T=E=null;if(!T)break;e.splice(w,1),E.apply(f,T)}return c}Xm.toGeojson=Xm;var UO=Xm;const d0={type:"FeatureCollection",features:[]},vA=()=>{const[e,t]=vt.useState(!1),i=vt.useCallback(async(y,l,w)=>{var H,fe;if(e||(console.log(w),w<16))return d0;t(!0);let E=300;w>17&&(E=200),w>18&&(E=100),w>19&&(E=50),console.log("overpass: loading...");let T="[out:json]";T+=`[timeout:25];
`,T+='nwr["building"]',T+=`(around:${E},${y},${l});
`,T+="out meta geom;",console.log(T);const S=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(T)}`,{});if(S.status!==200)return t(!1),d0;const I=await S.json();console.log("overpass json elements: ",I.elements);const j=UO(I);console.log("overpass osmtogeojson raw: ",j);for await(const Z of j.features){if(!Z.properties)continue;Z.id=Z.properties.id.split("/")[1];const $=(H=I.elements.filter(oe=>Z.id?typeof Z.id=="number"?oe.id===Z.id:oe.id===parseInt(Z.id):!1))==null?void 0:H[0];if($&&(Z.properties.tags=$.tags,Z.properties.nodes=$.nodes),Z.geometry.type==="Polygon"){const oe=AO(Z.geometry.coordinates);var q=zO(oe);Z.properties.center=q.geometry.coordinates}Z.geometry.type==="Point"&&(Z.properties.center=Z.geometry.coordinates);const N=Z.properties.uid;if(N){let oe=localStorage.getItem(N+"-icon");if(oe===null){const V=await Ao.getUser(N);(fe=V.img)!=null&&fe.href?(oe=V.img.href,localStorage.setItem(N+"-icon",V.img.href)):localStorage.setItem(N+"-icon","")}Z.properties.userIconHref=oe||""}}return console.log("overpass osmtogeojson converted: ",j),console.log("overpass: loaded."),t(!1),j},[]),[s,c]=vt.useState(!1),f=vt.useCallback(async y=>{console.log("overpass: loading...",y),c(!0);const l=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(l);const w=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(l)}`,{});if(w.status!==200){c(!1);return}const E=await w.json();console.log("overpass json parent elements: ",E.elements);const T=250,S=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${T});
      out;
      `;console.log(S);const I=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(S)}`,{});if(I.status!==200){c(!1);return}const j=await I.json();console.log("overpass json child elements: ",j.elements);const q=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${T});
      out;
      `;console.log(q);const H=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(q)}`,{});if(H.status!==200){c(!1);return}const fe=await H.json();return console.log("overpass json neighbour elements: ",fe.elements),c(!1),[...E.elements,...j.elements,...fe.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:f,loadingOverpass:e,loadingOverpassAdmin:s}},$O=()=>pt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[pt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),pt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),pt.jsxs("datalist",{id:"source-list",children:[pt.jsx("option",{value:"survey"}),pt.jsx("option",{value:"local knowledge"}),pt.jsx("option",{value:"extrapolation"}),pt.jsx("option",{value:"estimation from existing data"})]})]}),p0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},VO=({feature:e,onCancel:t,onSubmit:i})=>{var pe,_e,be,Q;const{detectCountry:s,loadingCountry:c}=LO(),{fetchOverpassAdmin:f,loadingOverpassAdmin:y}=vA(),l=JSON.parse((pe=e.properties)==null?void 0:pe.center),[w,E]=vt.useState(void 0),[T,S]=vt.useState(),[I,j]=vt.useState(e),[q,H]=vt.useState(!1),[fe,Z]=vt.useState(!1),[$,N]=vt.useState(!1),[oe,V]=vt.useState(),[D,b]=vt.useState();vt.useEffect(()=>{H(Ao.isLoggedIn())},[]),vt.useEffect(()=>{(async()=>{var ne,te;const re=await s(l[0],l[1]);if(E(re),(ne=re==null?void 0:re.properties)!=null&&ne.ISO_A3&&Q2[re.properties.ISO_A3]){const ce=Q2[re.properties.ISO_A3];S(ce);const xe=ce.defaultComment+" "+((te=e.properties)==null?void 0:te.id);b(xe)}})()},[e]),vt.useEffect(()=>{console.log(I.properties)},[I]);const k=vt.useCallback(async()=>{const re=await rC.openReverseGeocoder([l[0],l[1]]);j(ne=>{const te={properties:{"addr:province":re.prefecture,"addr:city":re.city,...ne.properties}};return{...ne,...te}})},[]),G=vt.useCallback(async()=>{if(!I.properties)return;I.properties.nodes;const re=await f(JSON.parse(I.properties.nodes));console.log("onOverpassReverseGeocode",re),V(re)},[I]),Y=vt.useCallback(async re=>{var Pe,Me,Ve;N(!0),re.preventDefault();const ne=new FormData(re.currentTarget),te=JSON.parse((Pe=e.properties)==null?void 0:Pe.tags);ne.forEach((Ne,Qe)=>{typeof Ne=="string"&&Ne.length>0&&Qe!=="comment"&&Qe!=="source"&&(te[Qe]=Ne)});const ce={type:"way",id:e.id,version:(Me=e.properties)==null?void 0:Me.version,tags:te,nodes:JSON.parse((Ve=e.properties)==null?void 0:Ve.nodes)};console.info(JSON.stringify(ce,null,2));const xe={create:[],modify:[ce],delete:[]},we=ne.get("comment");we&&(p0.comment=we.toString());const De=ne.get("source");De&&(p0.source=De.toString()),await Ao.uploadChangeset(p0,xe),N(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),K=vt.useCallback(()=>{Z(!0)},[]);return I.properties?pt.jsxs("div",{children:[pt.jsxs("div",{children:["OSM:"," ",pt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+I.properties.id,target:"_blank",children:I.properties.id})," | ",pt.jsx(eC,{feature:I}),T&&pt.jsxs("span",{children:[" | ","Address:"," ",pt.jsx(RO,{feature:I,fields:T})]})]}),c?pt.jsx(ts,{icon:Ev,spin:!0}):pt.jsx(pt.Fragment,{children:T?pt.jsxs("form",{onSubmit:Y,children:[pt.jsx("div",{className:"flex flex-wrap",children:pt.jsx(h0,{feature:I,fieldOption:T.postcodeField,onChange:K})}),pt.jsx("div",{className:"flex flex-wrap",children:T.mainFields.map(re=>pt.jsx(h0,{feature:I,fieldOption:re,onChange:K,suggestList:oe},re.key))}),pt.jsx("div",{className:"flex flex-wrap",children:T.detailFields.map(re=>pt.jsx(h0,{feature:I,fieldOption:re,onChange:K},re.key))}),pt.jsxs("div",{className:"flex flex-wrap",children:[pt.jsx($O,{}),pt.jsx(OO,{defaultValue:D})]}),pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=w==null?void 0:w.properties)==null?void 0:_e.ISO_A3)==="JPN"&&pt.jsx("button",{type:"button",onClick:k,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),pt.jsxs("button",{type:"button",disabled:y,onClick:G,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",y&&pt.jsx(ts,{icon:Ev,spin:!0})]}),pt.jsx("button",{disabled:!q||$||!fe,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!q&&pt.jsxs(pt.Fragment,{children:[pt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),pt.jsx(QT,{})]})]})})]}):pt.jsx("div",{className:"flex flex-wrap",children:pt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[pt.jsxs("div",{className:"py-2",children:[pt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(be=w==null?void 0:w.properties)==null?void 0:be.NAME," (ISO code:",(Q=w==null?void 0:w.properties)==null?void 0:Q.ISO_A3,") does not support yet."]}),pt.jsx("p",{children:pt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),pt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function GO(e,t){const[i,s]=vt.useState(e);return vt.useEffect(()=>{const c=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const ZO={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},WO={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function HO(){const e=vt.useRef(null),[t,i]=vt.useState(),s=GO(t,2500),c=vt.useRef(null),[f,y]=vt.useState({type:"FeatureCollection",features:[]}),[l,w]=vt.useState("auto"),[E,T]=vt.useState(),[S,I]=vt.useState([]),{fetchOverpassBuildings:j,loadingOverpass:q}=vA();vt.useEffect(()=>{setTimeout(()=>{var b;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(b=c.current)==null||b.trigger())},500)},[]);const H=vt.useCallback(b=>{const k=b.target.getCenter(),G=b.target.getZoom();i({zoom:G,latitude:k.lat,longitude:k.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),fe=vt.useCallback(b=>{i(b.viewState)},[]),Z=vt.useCallback(b=>{i(b.viewState)},[]);vt.useEffect(()=>{(async()=>{if(!s)return;const b=s,k=await j(b.latitude,b.longitude,b.zoom);y(k)})()},[s]);const $=vt.useCallback(b=>{var pe;w("pointer");const{features:k,point:{x:G,y:Y}}=b,K=k&&k[0];K?((pe=e.current)==null||pe.setFeatureState({source:"buildings-source",id:K.id},{hover:!0}),T({feature:K,x:G,y:Y})):T(void 0)},[]),N=vt.useCallback(b=>{var k;w("auto"),(k=e.current)==null||k.querySourceFeatures("buildings-source").map(G=>{var Y;(Y=e.current)==null||Y.setFeatureState({source:"buildings-source",id:G.id},{hover:!1})}),T(void 0)},[]),oe=vt.useCallback(b=>{var G;V();const k=b.features&&b.features[0];k&&((G=e.current)==null||G.setFeatureState({source:"buildings-source",id:k.id},{select:!0}),I([k]))},[]),V=vt.useCallback(()=>{var b;(b=e.current)==null||b.querySourceFeatures("buildings-source").map(k=>{var G;(G=e.current)==null||G.setFeatureState({source:"buildings-source",id:k.id},{select:!1})}),I([])},[]),D=vt.useMemo(()=>{let b=25;return t&&(b=t.zoom<18?20:t.zoom<19?25:35),f.features.map((k,G)=>!k.properties||!k.properties.center?null:pt.jsx(o3,{style:{cursor:"pointer"},longitude:k.properties.center[0],latitude:k.properties.center[1],anchor:"center",children:pt.jsx(Z5,{feature:k,size:b})},`marker-${G}`))},[f,t]);return pt.jsxs("div",{children:[pt.jsx(T5,{}),pt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:pt.jsx(X5,{viewState:t})}),pt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[S.length>0&&pt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:pt.jsx("div",{style:{padding:"10px"},children:S.map(b=>pt.jsx(VO,{feature:b,onCancel:V,onSubmit:V},b.id))})}),pt.jsxs(Y_,{ref:e,...t,onMove:fe,onMoveEnd:Z,onLoad:H,interactiveLayerIds:["buildings-layer-fill"],onClick:oe,onMouseEnter:$,onMouseLeave:N,dragRotate:!1,boxZoom:!1,hash:!0,cursor:l,mapLib:mT,style:{width:"100%",height:"100%"},mapStyle:ZO,children:[pt.jsx(g3,{id:"buildings-source",type:"geojson",data:f,children:pt.jsx(x3,{...WO})}),pt.jsx(h3,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),pt.jsx(u3,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),pt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?pt.jsx(ts,{size:"2x",icon:w5}):q?pt.jsx(ts,{size:"2x",icon:Ev,spin:!0}):pt.jsx(ts,{size:"2x",icon:b5})}),D,E&&pt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:E.x+5,top:E.y+5},children:[pt.jsx(eC,{feature:E.feature}),pt.jsx("br",{}),pt.jsx(W5,{feature:E.feature}),pt.jsx(C5,{feature:E.feature})]})]})]})]})}var _A={},Sg={};Sg.byteLength=KO;Sg.toByteArray=JO;Sg.fromByteArray=tF;var Ya=[],Zo=[],XO=typeof Uint8Array<"u"?Uint8Array:Array,m0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ec=0,qO=m0.length;Ec<qO;++Ec)Ya[Ec]=m0[Ec],Zo[m0.charCodeAt(Ec)]=Ec;Zo["-".charCodeAt(0)]=62;Zo["_".charCodeAt(0)]=63;function xA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var s=i===t?0:4-i%4;return[i,s]}function KO(e){var t=xA(e),i=t[0],s=t[1];return(i+s)*3/4-s}function YO(e,t,i){return(t+i)*3/4-i}function JO(e){var t,i=xA(e),s=i[0],c=i[1],f=new XO(YO(e,s,c)),y=0,l=c>0?s-4:s,w;for(w=0;w<l;w+=4)t=Zo[e.charCodeAt(w)]<<18|Zo[e.charCodeAt(w+1)]<<12|Zo[e.charCodeAt(w+2)]<<6|Zo[e.charCodeAt(w+3)],f[y++]=t>>16&255,f[y++]=t>>8&255,f[y++]=t&255;return c===2&&(t=Zo[e.charCodeAt(w)]<<2|Zo[e.charCodeAt(w+1)]>>4,f[y++]=t&255),c===1&&(t=Zo[e.charCodeAt(w)]<<10|Zo[e.charCodeAt(w+1)]<<4|Zo[e.charCodeAt(w+2)]>>2,f[y++]=t>>8&255,f[y++]=t&255),f}function QO(e){return Ya[e>>18&63]+Ya[e>>12&63]+Ya[e>>6&63]+Ya[e&63]}function eF(e,t,i){for(var s,c=[],f=t;f<i;f+=3)s=(e[f]<<16&16711680)+(e[f+1]<<8&65280)+(e[f+2]&255),c.push(QO(s));return c.join("")}function tF(e){for(var t,i=e.length,s=i%3,c=[],f=16383,y=0,l=i-s;y<l;y+=f)c.push(eF(e,y,y+f>l?l:y+f));return s===1?(t=e[i-1],c.push(Ya[t>>2]+Ya[t<<4&63]+"==")):s===2&&(t=(e[i-2]<<8)+e[i-1],c.push(Ya[t>>10]+Ya[t>>4&63]+Ya[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Sg,i=_g,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=$,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,l.TYPED_ARRAY_SUPPORT=f(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const se=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(se,P),se.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function y(se){if(se>c)throw new RangeError('The value "'+se+'" is invalid for option "size"');const P=new Uint8Array(se);return Object.setPrototypeOf(P,l.prototype),P}function l(se,P,L){if(typeof se=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(se)}return w(se,P,L)}l.poolSize=8192;function w(se,P,L){if(typeof se=="string")return I(se,P);if(ArrayBuffer.isView(se))return q(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(R(se,ArrayBuffer)||se&&R(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(se,SharedArrayBuffer)||se&&R(se.buffer,SharedArrayBuffer)))return H(se,P,L);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Se=se.valueOf&&se.valueOf();if(Se!=null&&Se!==se)return l.from(Se,P,L);const Be=fe(se);if(Be)return Be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return l.from(se[Symbol.toPrimitive]("string"),P,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}l.from=function(se,P,L){return w(se,P,L)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function E(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function T(se,P,L){return E(se),se<=0?y(se):P!==void 0?typeof L=="string"?y(se).fill(P,L):y(se).fill(P):y(se)}l.alloc=function(se,P,L){return T(se,P,L)};function S(se){return E(se),y(se<0?0:Z(se)|0)}l.allocUnsafe=function(se){return S(se)},l.allocUnsafeSlow=function(se){return S(se)};function I(se,P){if((typeof P!="string"||P==="")&&(P="utf8"),!l.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const L=N(se,P)|0;let Se=y(L);const Be=Se.write(se,P);return Be!==L&&(Se=Se.slice(0,Be)),Se}function j(se){const P=se.length<0?0:Z(se.length)|0,L=y(P);for(let Se=0;Se<P;Se+=1)L[Se]=se[Se]&255;return L}function q(se){if(R(se,Uint8Array)){const P=new Uint8Array(se);return H(P.buffer,P.byteOffset,P.byteLength)}return j(se)}function H(se,P,L){if(P<0||se.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<P+(L||0))throw new RangeError('"length" is outside of buffer bounds');let Se;return P===void 0&&L===void 0?Se=new Uint8Array(se):L===void 0?Se=new Uint8Array(se,P):Se=new Uint8Array(se,P,L),Object.setPrototypeOf(Se,l.prototype),Se}function fe(se){if(l.isBuffer(se)){const P=Z(se.length)|0,L=y(P);return L.length===0||se.copy(L,0,0,P),L}if(se.length!==void 0)return typeof se.length!="number"||ye(se.length)?y(0):j(se);if(se.type==="Buffer"&&Array.isArray(se.data))return j(se.data)}function Z(se){if(se>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return se|0}function $(se){return+se!=se&&(se=0),l.alloc(+se)}l.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==l.prototype},l.compare=function(P,L){if(R(P,Uint8Array)&&(P=l.from(P,P.offset,P.byteLength)),R(L,Uint8Array)&&(L=l.from(L,L.offset,L.byteLength)),!l.isBuffer(P)||!l.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===L)return 0;let Se=P.length,Be=L.length;for(let We=0,it=Math.min(Se,Be);We<it;++We)if(P[We]!==L[We]){Se=P[We],Be=L[We];break}return Se<Be?-1:Be<Se?1:0},l.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(P,L){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return l.alloc(0);let Se;if(L===void 0)for(L=0,Se=0;Se<P.length;++Se)L+=P[Se].length;const Be=l.allocUnsafe(L);let We=0;for(Se=0;Se<P.length;++Se){let it=P[Se];if(R(it,Uint8Array))We+it.length>Be.length?(l.isBuffer(it)||(it=l.from(it)),it.copy(Be,We)):Uint8Array.prototype.set.call(Be,it,We);else if(l.isBuffer(it))it.copy(Be,We);else throw new TypeError('"list" argument must be an Array of Buffers');We+=it.length}return Be};function N(se,P){if(l.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||R(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);const L=se.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&L===0)return 0;let Be=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return Cn(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return Te(se).length;default:if(Be)return Se?-1:Cn(se).length;P=(""+P).toLowerCase(),Be=!0}}l.byteLength=N;function oe(se,P,L){let Se=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,P>>>=0,L<=P))return"";for(se||(se="utf8");;)switch(se){case"hex":return ce(this,P,L);case"utf8":case"utf-8":return be(this,P,L);case"ascii":return ne(this,P,L);case"latin1":case"binary":return te(this,P,L);case"base64":return _e(this,P,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,P,L);default:if(Se)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),Se=!0}}l.prototype._isBuffer=!0;function V(se,P,L){const Se=se[P];se[P]=se[L],se[L]=Se}l.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let L=0;L<P;L+=2)V(this,L,L+1);return this},l.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let L=0;L<P;L+=4)V(this,L,L+3),V(this,L+1,L+2);return this},l.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let L=0;L<P;L+=8)V(this,L,L+7),V(this,L+1,L+6),V(this,L+2,L+5),V(this,L+3,L+4);return this},l.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?be(this,0,P):oe.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(P){if(!l.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:l.compare(this,P)===0},l.prototype.inspect=function(){let P="";const L=e.INSPECT_MAX_BYTES;return P=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(P+=" ... "),"<Buffer "+P+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(P,L,Se,Be,We){if(R(P,Uint8Array)&&(P=l.from(P,P.offset,P.byteLength)),!l.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(L===void 0&&(L=0),Se===void 0&&(Se=P?P.length:0),Be===void 0&&(Be=0),We===void 0&&(We=this.length),L<0||Se>P.length||Be<0||We>this.length)throw new RangeError("out of range index");if(Be>=We&&L>=Se)return 0;if(Be>=We)return-1;if(L>=Se)return 1;if(L>>>=0,Se>>>=0,Be>>>=0,We>>>=0,this===P)return 0;let it=We-Be,qt=Se-L;const xn=Math.min(it,qt),Sn=this.slice(Be,We),_t=P.slice(L,Se);for(let Dt=0;Dt<xn;++Dt)if(Sn[Dt]!==_t[Dt]){it=Sn[Dt],qt=_t[Dt];break}return it<qt?-1:qt<it?1:0};function D(se,P,L,Se,Be){if(se.length===0)return-1;if(typeof L=="string"?(Se=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,ye(L)&&(L=Be?0:se.length-1),L<0&&(L=se.length+L),L>=se.length){if(Be)return-1;L=se.length-1}else if(L<0)if(Be)L=0;else return-1;if(typeof P=="string"&&(P=l.from(P,Se)),l.isBuffer(P))return P.length===0?-1:b(se,P,L,Se,Be);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?Be?Uint8Array.prototype.indexOf.call(se,P,L):Uint8Array.prototype.lastIndexOf.call(se,P,L):b(se,[P],L,Se,Be);throw new TypeError("val must be string, number or Buffer")}function b(se,P,L,Se,Be){let We=1,it=se.length,qt=P.length;if(Se!==void 0&&(Se=String(Se).toLowerCase(),Se==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(se.length<2||P.length<2)return-1;We=2,it/=2,qt/=2,L/=2}function xn(_t,Dt){return We===1?_t[Dt]:_t.readUInt16BE(Dt*We)}let Sn;if(Be){let _t=-1;for(Sn=L;Sn<it;Sn++)if(xn(se,Sn)===xn(P,_t===-1?0:Sn-_t)){if(_t===-1&&(_t=Sn),Sn-_t+1===qt)return _t*We}else _t!==-1&&(Sn-=Sn-_t),_t=-1}else for(L+qt>it&&(L=it-qt),Sn=L;Sn>=0;Sn--){let _t=!0;for(let Dt=0;Dt<qt;Dt++)if(xn(se,Sn+Dt)!==xn(P,Dt)){_t=!1;break}if(_t)return Sn}return-1}l.prototype.includes=function(P,L,Se){return this.indexOf(P,L,Se)!==-1},l.prototype.indexOf=function(P,L,Se){return D(this,P,L,Se,!0)},l.prototype.lastIndexOf=function(P,L,Se){return D(this,P,L,Se,!1)};function k(se,P,L,Se){L=Number(L)||0;const Be=se.length-L;Se?(Se=Number(Se),Se>Be&&(Se=Be)):Se=Be;const We=P.length;Se>We/2&&(Se=We/2);let it;for(it=0;it<Se;++it){const qt=parseInt(P.substr(it*2,2),16);if(ye(qt))return it;se[L+it]=qt}return it}function G(se,P,L,Se){return F(Cn(P,se.length-L),se,L,Se)}function Y(se,P,L,Se){return F(mn(P),se,L,Se)}function K(se,P,L,Se){return F(Te(P),se,L,Se)}function pe(se,P,L,Se){return F(Vt(P,se.length-L),se,L,Se)}l.prototype.write=function(P,L,Se,Be){if(L===void 0)Be="utf8",Se=this.length,L=0;else if(Se===void 0&&typeof L=="string")Be=L,Se=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(Se)?(Se=Se>>>0,Be===void 0&&(Be="utf8")):(Be=Se,Se=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const We=this.length-L;if((Se===void 0||Se>We)&&(Se=We),P.length>0&&(Se<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");Be||(Be="utf8");let it=!1;for(;;)switch(Be){case"hex":return k(this,P,L,Se);case"utf8":case"utf-8":return G(this,P,L,Se);case"ascii":case"latin1":case"binary":return Y(this,P,L,Se);case"base64":return K(this,P,L,Se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,P,L,Se);default:if(it)throw new TypeError("Unknown encoding: "+Be);Be=(""+Be).toLowerCase(),it=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(se,P,L){return P===0&&L===se.length?t.fromByteArray(se):t.fromByteArray(se.slice(P,L))}function be(se,P,L){L=Math.min(se.length,L);const Se=[];let Be=P;for(;Be<L;){const We=se[Be];let it=null,qt=We>239?4:We>223?3:We>191?2:1;if(Be+qt<=L){let xn,Sn,_t,Dt;switch(qt){case 1:We<128&&(it=We);break;case 2:xn=se[Be+1],(xn&192)===128&&(Dt=(We&31)<<6|xn&63,Dt>127&&(it=Dt));break;case 3:xn=se[Be+1],Sn=se[Be+2],(xn&192)===128&&(Sn&192)===128&&(Dt=(We&15)<<12|(xn&63)<<6|Sn&63,Dt>2047&&(Dt<55296||Dt>57343)&&(it=Dt));break;case 4:xn=se[Be+1],Sn=se[Be+2],_t=se[Be+3],(xn&192)===128&&(Sn&192)===128&&(_t&192)===128&&(Dt=(We&15)<<18|(xn&63)<<12|(Sn&63)<<6|_t&63,Dt>65535&&Dt<1114112&&(it=Dt))}}it===null?(it=65533,qt=1):it>65535&&(it-=65536,Se.push(it>>>10&1023|55296),it=56320|it&1023),Se.push(it),Be+=qt}return re(Se)}const Q=4096;function re(se){const P=se.length;if(P<=Q)return String.fromCharCode.apply(String,se);let L="",Se=0;for(;Se<P;)L+=String.fromCharCode.apply(String,se.slice(Se,Se+=Q));return L}function ne(se,P,L){let Se="";L=Math.min(se.length,L);for(let Be=P;Be<L;++Be)Se+=String.fromCharCode(se[Be]&127);return Se}function te(se,P,L){let Se="";L=Math.min(se.length,L);for(let Be=P;Be<L;++Be)Se+=String.fromCharCode(se[Be]);return Se}function ce(se,P,L){const Se=se.length;(!P||P<0)&&(P=0),(!L||L<0||L>Se)&&(L=Se);let Be="";for(let We=P;We<L;++We)Be+=$e[se[We]];return Be}function xe(se,P,L){const Se=se.slice(P,L);let Be="";for(let We=0;We<Se.length-1;We+=2)Be+=String.fromCharCode(Se[We]+Se[We+1]*256);return Be}l.prototype.slice=function(P,L){const Se=this.length;P=~~P,L=L===void 0?Se:~~L,P<0?(P+=Se,P<0&&(P=0)):P>Se&&(P=Se),L<0?(L+=Se,L<0&&(L=0)):L>Se&&(L=Se),L<P&&(L=P);const Be=this.subarray(P,L);return Object.setPrototypeOf(Be,l.prototype),Be};function we(se,P,L){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+P>L)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(P,L,Se){P=P>>>0,L=L>>>0,Se||we(P,L,this.length);let Be=this[P],We=1,it=0;for(;++it<L&&(We*=256);)Be+=this[P+it]*We;return Be},l.prototype.readUintBE=l.prototype.readUIntBE=function(P,L,Se){P=P>>>0,L=L>>>0,Se||we(P,L,this.length);let Be=this[P+--L],We=1;for(;L>0&&(We*=256);)Be+=this[P+--L]*We;return Be},l.prototype.readUint8=l.prototype.readUInt8=function(P,L){return P=P>>>0,L||we(P,1,this.length),this[P]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(P,L){return P=P>>>0,L||we(P,2,this.length),this[P]|this[P+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(P,L){return P=P>>>0,L||we(P,2,this.length),this[P]<<8|this[P+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(P,L){return P=P>>>0,L||we(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(P,L){return P=P>>>0,L||we(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},l.prototype.readBigUInt64LE=Ye(function(P){P=P>>>0,Nt(P,"offset");const L=this[P],Se=this[P+7];(L===void 0||Se===void 0)&&Yt(P,this.length-8);const Be=L+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,We=this[++P]+this[++P]*2**8+this[++P]*2**16+Se*2**24;return BigInt(Be)+(BigInt(We)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ye(function(P){P=P>>>0,Nt(P,"offset");const L=this[P],Se=this[P+7];(L===void 0||Se===void 0)&&Yt(P,this.length-8);const Be=L*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],We=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+Se;return(BigInt(Be)<<BigInt(32))+BigInt(We)}),l.prototype.readIntLE=function(P,L,Se){P=P>>>0,L=L>>>0,Se||we(P,L,this.length);let Be=this[P],We=1,it=0;for(;++it<L&&(We*=256);)Be+=this[P+it]*We;return We*=128,Be>=We&&(Be-=Math.pow(2,8*L)),Be},l.prototype.readIntBE=function(P,L,Se){P=P>>>0,L=L>>>0,Se||we(P,L,this.length);let Be=L,We=1,it=this[P+--Be];for(;Be>0&&(We*=256);)it+=this[P+--Be]*We;return We*=128,it>=We&&(it-=Math.pow(2,8*L)),it},l.prototype.readInt8=function(P,L){return P=P>>>0,L||we(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},l.prototype.readInt16LE=function(P,L){P=P>>>0,L||we(P,2,this.length);const Se=this[P]|this[P+1]<<8;return Se&32768?Se|4294901760:Se},l.prototype.readInt16BE=function(P,L){P=P>>>0,L||we(P,2,this.length);const Se=this[P+1]|this[P]<<8;return Se&32768?Se|4294901760:Se},l.prototype.readInt32LE=function(P,L){return P=P>>>0,L||we(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},l.prototype.readInt32BE=function(P,L){return P=P>>>0,L||we(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},l.prototype.readBigInt64LE=Ye(function(P){P=P>>>0,Nt(P,"offset");const L=this[P],Se=this[P+7];(L===void 0||Se===void 0)&&Yt(P,this.length-8);const Be=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(Se<<24);return(BigInt(Be)<<BigInt(32))+BigInt(L+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),l.prototype.readBigInt64BE=Ye(function(P){P=P>>>0,Nt(P,"offset");const L=this[P],Se=this[P+7];(L===void 0||Se===void 0)&&Yt(P,this.length-8);const Be=(L<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(Be)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+Se)}),l.prototype.readFloatLE=function(P,L){return P=P>>>0,L||we(P,4,this.length),i.read(this,P,!0,23,4)},l.prototype.readFloatBE=function(P,L){return P=P>>>0,L||we(P,4,this.length),i.read(this,P,!1,23,4)},l.prototype.readDoubleLE=function(P,L){return P=P>>>0,L||we(P,8,this.length),i.read(this,P,!0,52,8)},l.prototype.readDoubleBE=function(P,L){return P=P>>>0,L||we(P,8,this.length),i.read(this,P,!1,52,8)};function De(se,P,L,Se,Be,We){if(!l.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>Be||P<We)throw new RangeError('"value" argument is out of bounds');if(L+Se>se.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(P,L,Se,Be){if(P=+P,L=L>>>0,Se=Se>>>0,!Be){const qt=Math.pow(2,8*Se)-1;De(this,P,L,Se,qt,0)}let We=1,it=0;for(this[L]=P&255;++it<Se&&(We*=256);)this[L+it]=P/We&255;return L+Se},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(P,L,Se,Be){if(P=+P,L=L>>>0,Se=Se>>>0,!Be){const qt=Math.pow(2,8*Se)-1;De(this,P,L,Se,qt,0)}let We=Se-1,it=1;for(this[L+We]=P&255;--We>=0&&(it*=256);)this[L+We]=P/it&255;return L+Se},l.prototype.writeUint8=l.prototype.writeUInt8=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,1,255,0),this[L]=P&255,L+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,2,65535,0),this[L]=P&255,this[L+1]=P>>>8,L+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,2,65535,0),this[L]=P>>>8,this[L+1]=P&255,L+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,4,4294967295,0),this[L+3]=P>>>24,this[L+2]=P>>>16,this[L+1]=P>>>8,this[L]=P&255,L+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,4,4294967295,0),this[L]=P>>>24,this[L+1]=P>>>16,this[L+2]=P>>>8,this[L+3]=P&255,L+4};function Pe(se,P,L,Se,Be){bt(P,Se,Be,se,L,7);let We=Number(P&BigInt(4294967295));se[L++]=We,We=We>>8,se[L++]=We,We=We>>8,se[L++]=We,We=We>>8,se[L++]=We;let it=Number(P>>BigInt(32)&BigInt(4294967295));return se[L++]=it,it=it>>8,se[L++]=it,it=it>>8,se[L++]=it,it=it>>8,se[L++]=it,L}function Me(se,P,L,Se,Be){bt(P,Se,Be,se,L,7);let We=Number(P&BigInt(4294967295));se[L+7]=We,We=We>>8,se[L+6]=We,We=We>>8,se[L+5]=We,We=We>>8,se[L+4]=We;let it=Number(P>>BigInt(32)&BigInt(4294967295));return se[L+3]=it,it=it>>8,se[L+2]=it,it=it>>8,se[L+1]=it,it=it>>8,se[L]=it,L+8}l.prototype.writeBigUInt64LE=Ye(function(P,L=0){return Pe(this,P,L,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ye(function(P,L=0){return Me(this,P,L,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(P,L,Se,Be){if(P=+P,L=L>>>0,!Be){const xn=Math.pow(2,8*Se-1);De(this,P,L,Se,xn-1,-xn)}let We=0,it=1,qt=0;for(this[L]=P&255;++We<Se&&(it*=256);)P<0&&qt===0&&this[L+We-1]!==0&&(qt=1),this[L+We]=(P/it>>0)-qt&255;return L+Se},l.prototype.writeIntBE=function(P,L,Se,Be){if(P=+P,L=L>>>0,!Be){const xn=Math.pow(2,8*Se-1);De(this,P,L,Se,xn-1,-xn)}let We=Se-1,it=1,qt=0;for(this[L+We]=P&255;--We>=0&&(it*=256);)P<0&&qt===0&&this[L+We+1]!==0&&(qt=1),this[L+We]=(P/it>>0)-qt&255;return L+Se},l.prototype.writeInt8=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,1,127,-128),P<0&&(P=255+P+1),this[L]=P&255,L+1},l.prototype.writeInt16LE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,2,32767,-32768),this[L]=P&255,this[L+1]=P>>>8,L+2},l.prototype.writeInt16BE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,2,32767,-32768),this[L]=P>>>8,this[L+1]=P&255,L+2},l.prototype.writeInt32LE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,4,2147483647,-2147483648),this[L]=P&255,this[L+1]=P>>>8,this[L+2]=P>>>16,this[L+3]=P>>>24,L+4},l.prototype.writeInt32BE=function(P,L,Se){return P=+P,L=L>>>0,Se||De(this,P,L,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[L]=P>>>24,this[L+1]=P>>>16,this[L+2]=P>>>8,this[L+3]=P&255,L+4},l.prototype.writeBigInt64LE=Ye(function(P,L=0){return Pe(this,P,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ye(function(P,L=0){return Me(this,P,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ve(se,P,L,Se,Be,We){if(L+Se>se.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function Ne(se,P,L,Se,Be){return P=+P,L=L>>>0,Be||Ve(se,P,L,4),i.write(se,P,L,Se,23,4),L+4}l.prototype.writeFloatLE=function(P,L,Se){return Ne(this,P,L,!0,Se)},l.prototype.writeFloatBE=function(P,L,Se){return Ne(this,P,L,!1,Se)};function Qe(se,P,L,Se,Be){return P=+P,L=L>>>0,Be||Ve(se,P,L,8),i.write(se,P,L,Se,52,8),L+8}l.prototype.writeDoubleLE=function(P,L,Se){return Qe(this,P,L,!0,Se)},l.prototype.writeDoubleBE=function(P,L,Se){return Qe(this,P,L,!1,Se)},l.prototype.copy=function(P,L,Se,Be){if(!l.isBuffer(P))throw new TypeError("argument should be a Buffer");if(Se||(Se=0),!Be&&Be!==0&&(Be=this.length),L>=P.length&&(L=P.length),L||(L=0),Be>0&&Be<Se&&(Be=Se),Be===Se||P.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(Se<0||Se>=this.length)throw new RangeError("Index out of range");if(Be<0)throw new RangeError("sourceEnd out of bounds");Be>this.length&&(Be=this.length),P.length-L<Be-Se&&(Be=P.length-L+Se);const We=Be-Se;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,Se,Be):Uint8Array.prototype.set.call(P,this.subarray(Se,Be),L),We},l.prototype.fill=function(P,L,Se,Be){if(typeof P=="string"){if(typeof L=="string"?(Be=L,L=0,Se=this.length):typeof Se=="string"&&(Be=Se,Se=this.length),Be!==void 0&&typeof Be!="string")throw new TypeError("encoding must be a string");if(typeof Be=="string"&&!l.isEncoding(Be))throw new TypeError("Unknown encoding: "+Be);if(P.length===1){const it=P.charCodeAt(0);(Be==="utf8"&&it<128||Be==="latin1")&&(P=it)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(L<0||this.length<L||this.length<Se)throw new RangeError("Out of range index");if(Se<=L)return this;L=L>>>0,Se=Se===void 0?this.length:Se>>>0,P||(P=0);let We;if(typeof P=="number")for(We=L;We<Se;++We)this[We]=P;else{const it=l.isBuffer(P)?P:l.from(P,Be),qt=it.length;if(qt===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(We=0;We<Se-L;++We)this[We+L]=it[We%qt]}return this};const ct={};function mt(se,P,L){ct[se]=class extends L{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${se}]`,this.stack,delete this.name}get code(){return se}set code(Be){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Be,writable:!0})}toString(){return`${this.name} [${se}]: ${this.message}`}}}mt("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?`${se} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),mt("ERR_INVALID_ARG_TYPE",function(se,P){return`The "${se}" argument must be of type number. Received type ${typeof P}`},TypeError),mt("ERR_OUT_OF_RANGE",function(se,P,L){let Se=`The value of "${se}" is out of range.`,Be=L;return Number.isInteger(L)&&Math.abs(L)>2**32?Be=Lt(String(L)):typeof L=="bigint"&&(Be=String(L),(L>BigInt(2)**BigInt(32)||L<-(BigInt(2)**BigInt(32)))&&(Be=Lt(Be)),Be+="n"),Se+=` It must be ${P}. Received ${Be}`,Se},RangeError);function Lt(se){let P="",L=se.length;const Se=se[0]==="-"?1:0;for(;L>=Se+4;L-=3)P=`_${se.slice(L-3,L)}${P}`;return`${se.slice(0,L)}${P}`}function dt(se,P,L){Nt(P,"offset"),(se[P]===void 0||se[P+L]===void 0)&&Yt(P,se.length-(L+1))}function bt(se,P,L,Se,Be,We){if(se>L||se<P){const it=typeof P=="bigint"?"n":"";let qt;throw We>3?P===0||P===BigInt(0)?qt=`>= 0${it} and < 2${it} ** ${(We+1)*8}${it}`:qt=`>= -(2${it} ** ${(We+1)*8-1}${it}) and < 2 ** ${(We+1)*8-1}${it}`:qt=`>= ${P}${it} and <= ${L}${it}`,new ct.ERR_OUT_OF_RANGE("value",qt,se)}dt(Se,Be,We)}function Nt(se,P){if(typeof se!="number")throw new ct.ERR_INVALID_ARG_TYPE(P,"number",se)}function Yt(se,P,L){throw Math.floor(se)!==se?(Nt(se,L),new ct.ERR_OUT_OF_RANGE(L||"offset","an integer",se)):P<0?new ct.ERR_BUFFER_OUT_OF_BOUNDS:new ct.ERR_OUT_OF_RANGE(L||"offset",`>= ${L?1:0} and <= ${P}`,se)}const dn=/[^+/0-9A-Za-z-_]/g;function Pn(se){if(se=se.split("=")[0],se=se.trim().replace(dn,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function Cn(se,P){P=P||1/0;let L;const Se=se.length;let Be=null;const We=[];for(let it=0;it<Se;++it){if(L=se.charCodeAt(it),L>55295&&L<57344){if(!Be){if(L>56319){(P-=3)>-1&&We.push(239,191,189);continue}else if(it+1===Se){(P-=3)>-1&&We.push(239,191,189);continue}Be=L;continue}if(L<56320){(P-=3)>-1&&We.push(239,191,189),Be=L;continue}L=(Be-55296<<10|L-56320)+65536}else Be&&(P-=3)>-1&&We.push(239,191,189);if(Be=null,L<128){if((P-=1)<0)break;We.push(L)}else if(L<2048){if((P-=2)<0)break;We.push(L>>6|192,L&63|128)}else if(L<65536){if((P-=3)<0)break;We.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((P-=4)<0)break;We.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return We}function mn(se){const P=[];for(let L=0;L<se.length;++L)P.push(se.charCodeAt(L)&255);return P}function Vt(se,P){let L,Se,Be;const We=[];for(let it=0;it<se.length&&!((P-=2)<0);++it)L=se.charCodeAt(it),Se=L>>8,Be=L%256,We.push(Be),We.push(Se);return We}function Te(se){return t.toByteArray(Pn(se))}function F(se,P,L,Se){let Be;for(Be=0;Be<Se&&!(Be+L>=P.length||Be>=se.length);++Be)P[Be+L]=se[Be];return Be}function R(se,P){return se instanceof P||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===P.name}function ye(se){return se!==se}const $e=function(){const se="0123456789abcdef",P=new Array(256);for(let L=0;L<16;++L){const Se=L*16;for(let Be=0;Be<16;++Be)P[Se+Be]=se[L]+se[Be]}return P}();function Ye(se){return typeof BigInt>"u"?ut:se}function ut(){throw new Error("BigInt not supported")}})(_A);window.Buffer=_A.Buffer;jM.render(pt.jsx(fE.StrictMode,{children:pt.jsx(HO,{})}),document.getElementById("root"));

function aM(e,t){for(var i=0;i<t.length;i++){const l=t[i];if(typeof l!="string"&&!Array.isArray(l)){for(const c in l)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(l,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>l[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&l(y)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function A_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function l(){return this instanceof l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var c=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:function(){return e[l]}})}),i}var $E={exports:{}},mg={},VE={exports:{}},Un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=Symbol.for("react.element"),lM=Symbol.for("react.portal"),uM=Symbol.for("react.fragment"),cM=Symbol.for("react.strict_mode"),hM=Symbol.for("react.profiler"),fM=Symbol.for("react.provider"),dM=Symbol.for("react.context"),pM=Symbol.for("react.forward_ref"),mM=Symbol.for("react.suspense"),gM=Symbol.for("react.memo"),yM=Symbol.for("react.lazy"),Ww=Symbol.iterator;function vM(e){return e===null||typeof e!="object"?null:(e=Ww&&e[Ww]||e["@@iterator"],typeof e=="function"?e:null)}var GE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZE=Object.assign,WE={};function Ih(e,t,i){this.props=e,this.context=t,this.refs=WE,this.updater=i||GE}Ih.prototype.isReactComponent={};Ih.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ih.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function HE(){}HE.prototype=Ih.prototype;function I_(e,t,i){this.props=e,this.context=t,this.refs=WE,this.updater=i||GE}var P_=I_.prototype=new HE;P_.constructor=I_;ZE(P_,Ih.prototype);P_.isPureReactComponent=!0;var Hw=Array.isArray,XE=Object.prototype.hasOwnProperty,M_={current:null},qE={key:!0,ref:!0,__self:!0,__source:!0};function KE(e,t,i){var l,c={},d=null,y=null;if(t!=null)for(l in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(d=""+t.key),t)XE.call(t,l)&&!qE.hasOwnProperty(l)&&(c[l]=t[l]);var a=arguments.length-2;if(a===1)c.children=i;else if(1<a){for(var b=Array(a),w=0;w<a;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(l in a=e.defaultProps,a)c[l]===void 0&&(c[l]=a[l]);return{$$typeof:Ad,type:e,key:d,ref:y,props:c,_owner:M_.current}}function _M(e,t){return{$$typeof:Ad,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function k_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ad}function xM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var Xw=/\/+/g;function By(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xM(""+e.key):t.toString(36)}function Gp(e,t,i,l,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(d){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Ad:case lM:y=!0}}if(y)return y=e,c=c(y),e=l===""?"."+By(y,0):l,Hw(c)?(i="",e!=null&&(i=e.replace(Xw,"$&/")+"/"),Gp(c,t,i,"",function(w){return w})):c!=null&&(k_(c)&&(c=_M(c,i+(!c.key||y&&y.key===c.key?"":(""+c.key).replace(Xw,"$&/")+"/")+e)),t.push(c)),1;if(y=0,l=l===""?".":l+":",Hw(e))for(var a=0;a<e.length;a++){d=e[a];var b=l+By(d,a);y+=Gp(d,t,i,b,c)}else if(b=vM(e),typeof b=="function")for(e=b.call(e),a=0;!(d=e.next()).done;)d=d.value,b=l+By(d,a++),y+=Gp(d,t,i,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function mp(e,t,i){if(e==null)return e;var l=[],c=0;return Gp(e,l,"","",function(d){return t.call(i,d,c++)}),l}function wM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lo={current:null},Zp={transition:null},bM={ReactCurrentDispatcher:lo,ReactCurrentBatchConfig:Zp,ReactCurrentOwner:M_};Un.Children={map:mp,forEach:function(e,t,i){mp(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return mp(e,function(){t++}),t},toArray:function(e){return mp(e,function(t){return t})||[]},only:function(e){if(!k_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Un.Component=Ih;Un.Fragment=uM;Un.Profiler=hM;Un.PureComponent=I_;Un.StrictMode=cM;Un.Suspense=mM;Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bM;Un.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=ZE({},e.props),c=e.key,d=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,y=M_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(b in t)XE.call(t,b)&&!qE.hasOwnProperty(b)&&(l[b]=t[b]===void 0&&a!==void 0?a[b]:t[b])}var b=arguments.length-2;if(b===1)l.children=i;else if(1<b){a=Array(b);for(var w=0;w<b;w++)a[w]=arguments[w+2];l.children=a}return{$$typeof:Ad,type:e.type,key:c,ref:d,props:l,_owner:y}};Un.createContext=function(e){return e={$$typeof:dM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fM,_context:e},e.Consumer=e};Un.createElement=KE;Un.createFactory=function(e){var t=KE.bind(null,e);return t.type=e,t};Un.createRef=function(){return{current:null}};Un.forwardRef=function(e){return{$$typeof:pM,render:e}};Un.isValidElement=k_;Un.lazy=function(e){return{$$typeof:yM,_payload:{_status:-1,_result:e},_init:wM}};Un.memo=function(e,t){return{$$typeof:gM,type:e,compare:t===void 0?null:t}};Un.startTransition=function(e){var t=Zp.transition;Zp.transition={};try{e()}finally{Zp.transition=t}};Un.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Un.useCallback=function(e,t){return lo.current.useCallback(e,t)};Un.useContext=function(e){return lo.current.useContext(e)};Un.useDebugValue=function(){};Un.useDeferredValue=function(e){return lo.current.useDeferredValue(e)};Un.useEffect=function(e,t){return lo.current.useEffect(e,t)};Un.useId=function(){return lo.current.useId()};Un.useImperativeHandle=function(e,t,i){return lo.current.useImperativeHandle(e,t,i)};Un.useInsertionEffect=function(e,t){return lo.current.useInsertionEffect(e,t)};Un.useLayoutEffect=function(e,t){return lo.current.useLayoutEffect(e,t)};Un.useMemo=function(e,t){return lo.current.useMemo(e,t)};Un.useReducer=function(e,t,i){return lo.current.useReducer(e,t,i)};Un.useRef=function(e){return lo.current.useRef(e)};Un.useState=function(e){return lo.current.useState(e)};Un.useSyncExternalStore=function(e,t,i){return lo.current.useSyncExternalStore(e,t,i)};Un.useTransition=function(){return lo.current.useTransition()};Un.version="18.2.0";VE.exports=Un;var _t=VE.exports;const YE=Cd(_t);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM=_t,SM=Symbol.for("react.element"),TM=Symbol.for("react.fragment"),CM=Object.prototype.hasOwnProperty,AM=EM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IM={key:!0,ref:!0,__self:!0,__source:!0};function JE(e,t,i){var l,c={},d=null,y=null;i!==void 0&&(d=""+i),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(y=t.ref);for(l in t)CM.call(t,l)&&!IM.hasOwnProperty(l)&&(c[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps,t)c[l]===void 0&&(c[l]=t[l]);return{$$typeof:SM,type:e,key:d,ref:y,props:c,_owner:AM.current}}mg.Fragment=TM;mg.jsx=JE;mg.jsxs=JE;$E.exports=mg;var mt=$E.exports,QE={exports:{}},No={},eS={exports:{}},tS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(re,me){var Se=re.length;re.push(me);e:for(;0<Se;){var we=Se-1>>>1,Ue=re[we];if(0<c(Ue,me))re[we]=me,re[Se]=Ue,Se=we;else break e}}function i(re){return re.length===0?null:re[0]}function l(re){if(re.length===0)return null;var me=re[0],Se=re.pop();if(Se!==me){re[0]=Se;e:for(var we=0,Ue=re.length,Pe=Ue>>>1;we<Pe;){var ze=2*(we+1)-1,He=re[ze],Ze=ze+1,rt=re[Ze];if(0>c(He,Se))Ze<Ue&&0>c(rt,He)?(re[we]=rt,re[Ze]=Se,we=Ze):(re[we]=He,re[ze]=Se,we=ze);else if(Ze<Ue&&0>c(rt,Se))re[we]=rt,re[Ze]=Se,we=Ze;else break e}}return me}function c(re,me){var Se=re.sortIndex-me.sortIndex;return Se!==0?Se:re.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var y=Date,a=y.now();e.unstable_now=function(){return y.now()-a}}var b=[],w=[],I=1,C=null,L=3,j=!1,ee=!1,Y=!1,de=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(re){for(var me=i(w);me!==null;){if(me.callback===null)l(w);else if(me.startTime<=re)l(w),me.sortIndex=me.expirationTime,t(b,me);else break;me=i(w)}}function ie(re){if(Y=!1,U(re),!ee)if(i(b)!==null)ee=!0,ue(Z);else{var me=i(w);me!==null&&ne(ie,me.startTime-re)}}function Z(re,me){ee=!1,Y&&(Y=!1,G(k),k=-1),j=!0;var Se=L;try{for(U(me),C=i(b);C!==null&&(!(C.expirationTime>me)||re&&!Q());){var we=C.callback;if(typeof we=="function"){C.callback=null,L=C.priorityLevel;var Ue=we(C.expirationTime<=me);me=e.unstable_now(),typeof Ue=="function"?C.callback=Ue:C===i(b)&&l(b),U(me)}else l(b);C=i(b)}if(C!==null)var Pe=!0;else{var ze=i(w);ze!==null&&ne(ie,ze.startTime-me),Pe=!1}return Pe}finally{C=null,L=Se,j=!1}}var B=!1,S=null,k=-1,W=5,q=-1;function Q(){return!(e.unstable_now()-q<W)}function ye(){if(S!==null){var re=e.unstable_now();q=re;var me=!0;try{me=S(!0,re)}finally{me?_e():(B=!1,S=null)}}else B=!1}var _e;if(typeof V=="function")_e=function(){V(ye)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,te=xe.port2;xe.port1.onmessage=ye,_e=function(){te.postMessage(null)}}else _e=function(){de(ye,0)};function ue(re){S=re,B||(B=!0,_e())}function ne(re,me){k=de(function(){re(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){ee||j||(ee=!0,ue(Z))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return i(b)},e.unstable_next=function(re){switch(L){case 1:case 2:case 3:var me=3;break;default:me=L}var Se=L;L=me;try{return re()}finally{L=Se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,me){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var Se=L;L=re;try{return me()}finally{L=Se}},e.unstable_scheduleCallback=function(re,me,Se){var we=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?we+Se:we):Se=we,re){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=Se+Ue,re={id:I++,callback:me,priorityLevel:re,startTime:Se,expirationTime:Ue,sortIndex:-1},Se>we?(re.sortIndex=Se,t(w,re),i(b)===null&&re===i(w)&&(Y?(G(k),k=-1):Y=!0,ne(ie,Se-we))):(re.sortIndex=Ue,t(b,re),ee||j||(ee=!0,ue(Z))),re},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(re){var me=L;return function(){var Se=L;L=me;try{return re.apply(this,arguments)}finally{L=Se}}}})(tS);eS.exports=tS;var PM=eS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nS=_t,Bo=PM;function It(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rS=new Set,id={};function nc(e,t){gh(e,t),gh(e+"Capture",t)}function gh(e,t){for(id[e]=t,e=0;e<t.length;e++)rS.add(t[e])}var $a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),G0=Object.prototype.hasOwnProperty,MM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qw={},Kw={};function kM(e){return G0.call(Kw,e)?!0:G0.call(qw,e)?!1:MM.test(e)?Kw[e]=!0:(qw[e]=!0,!1)}function LM(e,t,i,l){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zM(e,t,i,l){if(t===null||typeof t>"u"||LM(e,t,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function uo(e,t,i,l,c,d,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=y}var Ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ti[e]=new uo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ti[t]=new uo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ti[e]=new uo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ti[e]=new uo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ti[e]=new uo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ti[e]=new uo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ti[e]=new uo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ti[e]=new uo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ti[e]=new uo(e,5,!1,e.toLowerCase(),null,!1,!1)});var L_=/[\-:]([a-z])/g;function z_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L_,z_);Ti[t]=new uo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L_,z_);Ti[t]=new uo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L_,z_);Ti[t]=new uo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ti[e]=new uo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ti.xlinkHref=new uo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ti[e]=new uo(e,1,!1,e.toLowerCase(),null,!0,!0)});function F_(e,t,i,l){var c=Ti.hasOwnProperty(t)?Ti[t]:null;(c!==null?c.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zM(t,i,c,l)&&(i=null),l||c===null?kM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,l=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?e.setAttributeNS(l,t,i):e.setAttribute(t,i))))}var Ka=nS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gp=Symbol.for("react.element"),Gc=Symbol.for("react.portal"),Zc=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),Z0=Symbol.for("react.profiler"),iS=Symbol.for("react.provider"),oS=Symbol.for("react.context"),R_=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),H0=Symbol.for("react.suspense_list"),j_=Symbol.for("react.memo"),Ol=Symbol.for("react.lazy"),sS=Symbol.for("react.offscreen"),Yw=Symbol.iterator;function wf(e){return e===null||typeof e!="object"?null:(e=Yw&&e[Yw]||e["@@iterator"],typeof e=="function"?e:null)}var zr=Object.assign,Ny;function Mf(e){if(Ny===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ny=t&&t[1]||""}return`
`+Ny+e}var Uy=!1;function $y(e,t){if(!e||Uy)return"";Uy=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var l=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){l=w}e.call(t.prototype)}else{try{throw Error()}catch(w){l=w}e()}}catch(w){if(w&&l&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=l.stack.split(`
`),y=c.length-1,a=d.length-1;1<=y&&0<=a&&c[y]!==d[a];)a--;for(;1<=y&&0<=a;y--,a--)if(c[y]!==d[a]){if(y!==1||a!==1)do if(y--,a--,0>a||c[y]!==d[a]){var b=`
`+c[y].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=y&&0<=a);break}}}finally{Uy=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Mf(e):""}function FM(e){switch(e.tag){case 5:return Mf(e.type);case 16:return Mf("Lazy");case 13:return Mf("Suspense");case 19:return Mf("SuspenseList");case 0:case 2:case 15:return e=$y(e.type,!1),e;case 11:return e=$y(e.type.render,!1),e;case 1:return e=$y(e.type,!0),e;default:return""}}function X0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zc:return"Fragment";case Gc:return"Portal";case Z0:return"Profiler";case O_:return"StrictMode";case W0:return"Suspense";case H0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oS:return(e.displayName||"Context")+".Consumer";case iS:return(e._context.displayName||"Context")+".Provider";case R_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case j_:return t=e.displayName||null,t!==null?t:X0(e.type)||"Memo";case Ol:t=e._payload,e=e._init;try{return X0(e(t))}catch{}}return null}function OM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X0(t);case 8:return t===O_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ql(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function RM(e){var t=aS(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,d.call(this,y)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yp(e){e._valueTracker||(e._valueTracker=RM(e))}function lS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),l="";return e&&(l=aS(e)?e.checked?"true":"false":e.value),e=l,e!==i?(t.setValue(e),!0):!1}function fm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q0(e,t){var i=t.checked;return zr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Jw(e,t){var i=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;i=Ql(t.value!=null?t.value:i),e._wrapperState={initialChecked:l,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uS(e,t){t=t.checked,t!=null&&F_(e,"checked",t,!1)}function K0(e,t){uS(e,t);var i=Ql(t.value),l=t.type;if(i!=null)l==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y0(e,t.type,i):t.hasOwnProperty("defaultValue")&&Y0(e,t.type,Ql(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qw(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Y0(e,t,i){(t!=="number"||fm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var kf=Array.isArray;function ah(e,t,i,l){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&l&&(e[i].defaultSelected=!0)}else{for(i=""+Ql(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function J0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(It(91));return zr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(It(92));if(kf(i)){if(1<i.length)throw Error(It(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ql(i)}}function cS(e,t){var i=Ql(t.value),l=Ql(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),l!=null&&(e.defaultValue=""+l)}function tb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vp,fS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,l,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,l,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vp=vp||document.createElement("div"),vp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function od(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var $f={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jM=["Webkit","ms","Moz","O"];Object.keys($f).forEach(function(e){jM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$f[t]=$f[e]})});function dS(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||$f.hasOwnProperty(e)&&$f[e]?(""+t).trim():t+"px"}function pS(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=dS(i,t[i],l);i==="float"&&(i="cssFloat"),l?e.setProperty(i,c):e[i]=c}}var DM=zr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ev(e,t){if(t){if(DM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(It(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(It(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(It(61))}if(t.style!=null&&typeof t.style!="object")throw Error(It(62))}}function tv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nv=null;function D_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rv=null,lh=null,uh=null;function nb(e){if(e=Md(e)){if(typeof rv!="function")throw Error(It(280));var t=e.stateNode;t&&(t=xg(t),rv(e.stateNode,e.type,t))}}function mS(e){lh?uh?uh.push(e):uh=[e]:lh=e}function gS(){if(lh){var e=lh,t=uh;if(uh=lh=null,nb(e),t)for(e=0;e<t.length;e++)nb(t[e])}}function yS(e,t){return e(t)}function vS(){}var Vy=!1;function _S(e,t,i){if(Vy)return e(t,i);Vy=!0;try{return yS(e,t,i)}finally{Vy=!1,(lh!==null||uh!==null)&&(vS(),gS())}}function sd(e,t){var i=e.stateNode;if(i===null)return null;var l=xg(i);if(l===null)return null;i=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(It(231,t,typeof i));return i}var iv=!1;if($a)try{var bf={};Object.defineProperty(bf,"passive",{get:function(){iv=!0}}),window.addEventListener("test",bf,bf),window.removeEventListener("test",bf,bf)}catch{iv=!1}function BM(e,t,i,l,c,d,y,a,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(i,w)}catch(I){this.onError(I)}}var Vf=!1,dm=null,pm=!1,ov=null,NM={onError:function(e){Vf=!0,dm=e}};function UM(e,t,i,l,c,d,y,a,b){Vf=!1,dm=null,BM.apply(NM,arguments)}function $M(e,t,i,l,c,d,y,a,b){if(UM.apply(this,arguments),Vf){if(Vf){var w=dm;Vf=!1,dm=null}else throw Error(It(198));pm||(pm=!0,ov=w)}}function rc(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function xS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rb(e){if(rc(e)!==e)throw Error(It(188))}function VM(e){var t=e.alternate;if(!t){if(t=rc(e),t===null)throw Error(It(188));return t!==e?null:e}for(var i=e,l=t;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return rb(c),e;if(d===l)return rb(c),t;d=d.sibling}throw Error(It(188))}if(i.return!==l.return)i=c,l=d;else{for(var y=!1,a=c.child;a;){if(a===i){y=!0,i=c,l=d;break}if(a===l){y=!0,l=c,i=d;break}a=a.sibling}if(!y){for(a=d.child;a;){if(a===i){y=!0,i=d,l=c;break}if(a===l){y=!0,l=d,i=c;break}a=a.sibling}if(!y)throw Error(It(189))}}if(i.alternate!==l)throw Error(It(190))}if(i.tag!==3)throw Error(It(188));return i.stateNode.current===i?e:t}function wS(e){return e=VM(e),e!==null?bS(e):null}function bS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bS(e);if(t!==null)return t;e=e.sibling}return null}var ES=Bo.unstable_scheduleCallback,ib=Bo.unstable_cancelCallback,GM=Bo.unstable_shouldYield,ZM=Bo.unstable_requestPaint,Hr=Bo.unstable_now,WM=Bo.unstable_getCurrentPriorityLevel,B_=Bo.unstable_ImmediatePriority,SS=Bo.unstable_UserBlockingPriority,mm=Bo.unstable_NormalPriority,HM=Bo.unstable_LowPriority,TS=Bo.unstable_IdlePriority,gg=null,fa=null;function XM(e){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(gg,e,void 0,(e.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:YM,qM=Math.log,KM=Math.LN2;function YM(e){return e>>>=0,e===0?32:31-(qM(e)/KM|0)|0}var _p=64,xp=4194304;function Lf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gm(e,t){var i=e.pendingLanes;if(i===0)return 0;var l=0,c=e.suspendedLanes,d=e.pingedLanes,y=i&268435455;if(y!==0){var a=y&~c;a!==0?l=Lf(a):(d&=y,d!==0&&(l=Lf(d)))}else y=i&~c,y!==0?l=Lf(y):d!==0&&(l=Lf(d));if(l===0)return 0;if(t!==0&&t!==l&&!(t&c)&&(c=l&-l,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(l&4&&(l|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)i=31-zs(t),c=1<<i,l|=e[i],t&=~c;return l}function JM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QM(e,t){for(var i=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var y=31-zs(d),a=1<<y,b=c[y];b===-1?(!(a&i)||a&l)&&(c[y]=JM(a,t)):b<=t&&(e.expiredLanes|=a),d&=~a}}function sv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function CS(){var e=_p;return _p<<=1,!(_p&4194240)&&(_p=64),e}function Gy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Id(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zs(t),e[t]=i}function ek(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-zs(i),d=1<<c;t[c]=0,l[c]=-1,e[c]=-1,i&=~d}}function N_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var l=31-zs(i),c=1<<l;c&t|e[l]&t&&(e[l]|=t),i&=~c}}var nr=0;function AS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var IS,U_,PS,MS,kS,av=!1,wp=[],Zl=null,Wl=null,Hl=null,ad=new Map,ld=new Map,Bl=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ob(e,t){switch(e){case"focusin":case"focusout":Zl=null;break;case"dragenter":case"dragleave":Wl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ld.delete(t.pointerId)}}function Ef(e,t,i,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Md(t),t!==null&&U_(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function nk(e,t,i,l,c){switch(t){case"focusin":return Zl=Ef(Zl,e,t,i,l,c),!0;case"dragenter":return Wl=Ef(Wl,e,t,i,l,c),!0;case"mouseover":return Hl=Ef(Hl,e,t,i,l,c),!0;case"pointerover":var d=c.pointerId;return ad.set(d,Ef(ad.get(d)||null,e,t,i,l,c)),!0;case"gotpointercapture":return d=c.pointerId,ld.set(d,Ef(ld.get(d)||null,e,t,i,l,c)),!0}return!1}function LS(e){var t=Uu(e.target);if(t!==null){var i=rc(t);if(i!==null){if(t=i.tag,t===13){if(t=xS(i),t!==null){e.blockedOn=t,kS(e.priority,function(){PS(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=lv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var l=new i.constructor(i.type,i);nv=l,i.target.dispatchEvent(l),nv=null}else return t=Md(i),t!==null&&U_(t),e.blockedOn=i,!1;t.shift()}return!0}function sb(e,t,i){Wp(e)&&i.delete(t)}function rk(){av=!1,Zl!==null&&Wp(Zl)&&(Zl=null),Wl!==null&&Wp(Wl)&&(Wl=null),Hl!==null&&Wp(Hl)&&(Hl=null),ad.forEach(sb),ld.forEach(sb)}function Sf(e,t){e.blockedOn===t&&(e.blockedOn=null,av||(av=!0,Bo.unstable_scheduleCallback(Bo.unstable_NormalPriority,rk)))}function ud(e){function t(c){return Sf(c,e)}if(0<wp.length){Sf(wp[0],e);for(var i=1;i<wp.length;i++){var l=wp[i];l.blockedOn===e&&(l.blockedOn=null)}}for(Zl!==null&&Sf(Zl,e),Wl!==null&&Sf(Wl,e),Hl!==null&&Sf(Hl,e),ad.forEach(t),ld.forEach(t),i=0;i<Bl.length;i++)l=Bl[i],l.blockedOn===e&&(l.blockedOn=null);for(;0<Bl.length&&(i=Bl[0],i.blockedOn===null);)LS(i),i.blockedOn===null&&Bl.shift()}var ch=Ka.ReactCurrentBatchConfig,ym=!0;function ik(e,t,i,l){var c=nr,d=ch.transition;ch.transition=null;try{nr=1,$_(e,t,i,l)}finally{nr=c,ch.transition=d}}function ok(e,t,i,l){var c=nr,d=ch.transition;ch.transition=null;try{nr=4,$_(e,t,i,l)}finally{nr=c,ch.transition=d}}function $_(e,t,i,l){if(ym){var c=lv(e,t,i,l);if(c===null)e0(e,t,l,vm,i),ob(e,l);else if(nk(c,e,t,i,l))l.stopPropagation();else if(ob(e,l),t&4&&-1<tk.indexOf(e)){for(;c!==null;){var d=Md(c);if(d!==null&&IS(d),d=lv(e,t,i,l),d===null&&e0(e,t,l,vm,i),d===c)break;c=d}c!==null&&l.stopPropagation()}else e0(e,t,l,null,i)}}var vm=null;function lv(e,t,i,l){if(vm=null,e=D_(l),e=Uu(e),e!==null)if(t=rc(e),t===null)e=null;else if(i=t.tag,i===13){if(e=xS(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vm=e,null}function zS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WM()){case B_:return 1;case SS:return 4;case mm:case HM:return 16;case TS:return 536870912;default:return 16}default:return 16}}var $l=null,V_=null,Hp=null;function FS(){if(Hp)return Hp;var e,t=V_,i=t.length,l,c="value"in $l?$l.value:$l.textContent,d=c.length;for(e=0;e<i&&t[e]===c[e];e++);var y=i-e;for(l=1;l<=y&&t[i-l]===c[d-l];l++);return Hp=c.slice(e,1<l?1-l:void 0)}function Xp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bp(){return!0}function ab(){return!1}function Uo(e){function t(i,l,c,d,y){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(d):d[a]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?bp:ab,this.isPropagationStopped=ab,this}return zr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=bp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=bp)},persist:function(){},isPersistent:bp}),t}var Ph={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G_=Uo(Ph),Pd=zr({},Ph,{view:0,detail:0}),sk=Uo(Pd),Zy,Wy,Tf,yg=zr({},Pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tf&&(Tf&&e.type==="mousemove"?(Zy=e.screenX-Tf.screenX,Wy=e.screenY-Tf.screenY):Wy=Zy=0,Tf=e),Zy)},movementY:function(e){return"movementY"in e?e.movementY:Wy}}),lb=Uo(yg),ak=zr({},yg,{dataTransfer:0}),lk=Uo(ak),uk=zr({},Pd,{relatedTarget:0}),Hy=Uo(uk),ck=zr({},Ph,{animationName:0,elapsedTime:0,pseudoElement:0}),hk=Uo(ck),fk=zr({},Ph,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dk=Uo(fk),pk=zr({},Ph,{data:0}),ub=Uo(pk),mk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yk[e])?!!t[e]:!1}function Z_(){return vk}var _k=zr({},Pd,{key:function(e){if(e.key){var t=mk[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gk[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z_,charCode:function(e){return e.type==="keypress"?Xp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xk=Uo(_k),wk=zr({},yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cb=Uo(wk),bk=zr({},Pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z_}),Ek=Uo(bk),Sk=zr({},Ph,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tk=Uo(Sk),Ck=zr({},yg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ak=Uo(Ck),Ik=[9,13,27,32],W_=$a&&"CompositionEvent"in window,Gf=null;$a&&"documentMode"in document&&(Gf=document.documentMode);var Pk=$a&&"TextEvent"in window&&!Gf,OS=$a&&(!W_||Gf&&8<Gf&&11>=Gf),hb=String.fromCharCode(32),fb=!1;function RS(e,t){switch(e){case"keyup":return Ik.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wc=!1;function Mk(e,t){switch(e){case"compositionend":return jS(t);case"keypress":return t.which!==32?null:(fb=!0,hb);case"textInput":return e=t.data,e===hb&&fb?null:e;default:return null}}function kk(e,t){if(Wc)return e==="compositionend"||!W_&&RS(e,t)?(e=FS(),Hp=V_=$l=null,Wc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return OS&&t.locale!=="ko"?null:t.data;default:return null}}var Lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function db(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lk[e.type]:t==="textarea"}function DS(e,t,i,l){mS(l),t=_m(t,"onChange"),0<t.length&&(i=new G_("onChange","change",null,i,l),e.push({event:i,listeners:t}))}var Zf=null,cd=null;function zk(e){qS(e,0)}function vg(e){var t=qc(e);if(lS(t))return e}function Fk(e,t){if(e==="change")return t}var BS=!1;if($a){var Xy;if($a){var qy="oninput"in document;if(!qy){var pb=document.createElement("div");pb.setAttribute("oninput","return;"),qy=typeof pb.oninput=="function"}Xy=qy}else Xy=!1;BS=Xy&&(!document.documentMode||9<document.documentMode)}function mb(){Zf&&(Zf.detachEvent("onpropertychange",NS),cd=Zf=null)}function NS(e){if(e.propertyName==="value"&&vg(cd)){var t=[];DS(t,cd,e,D_(e)),_S(zk,t)}}function Ok(e,t,i){e==="focusin"?(mb(),Zf=t,cd=i,Zf.attachEvent("onpropertychange",NS)):e==="focusout"&&mb()}function Rk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vg(cd)}function jk(e,t){if(e==="click")return vg(t)}function Dk(e,t){if(e==="input"||e==="change")return vg(t)}function Bk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Os=typeof Object.is=="function"?Object.is:Bk;function hd(e,t){if(Os(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!G0.call(t,c)||!Os(e[c],t[c]))return!1}return!0}function gb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yb(e,t){var i=gb(e);e=0;for(var l;i;){if(i.nodeType===3){if(l=e+i.textContent.length,e<=t&&l>=t)return{node:i,offset:t-e};e=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=gb(i)}}function US(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?US(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $S(){for(var e=window,t=fm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=fm(e.document)}return t}function H_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Nk(e){var t=$S(),i=e.focusedElem,l=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&US(i.ownerDocument.documentElement,i)){if(l!==null&&H_(i)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(l.start,c);l=l.end===void 0?d:Math.min(l.end,c),!e.extend&&d>l&&(c=l,l=d,d=c),c=yb(i,d);var y=yb(i,l);c&&y&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>l?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Uk=$a&&"documentMode"in document&&11>=document.documentMode,Hc=null,uv=null,Wf=null,cv=!1;function vb(e,t,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;cv||Hc==null||Hc!==fm(l)||(l=Hc,"selectionStart"in l&&H_(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wf&&hd(Wf,l)||(Wf=l,l=_m(uv,"onSelect"),0<l.length&&(t=new G_("onSelect","select",null,t,i),e.push({event:t,listeners:l}),t.target=Hc)))}function Ep(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Xc={animationend:Ep("Animation","AnimationEnd"),animationiteration:Ep("Animation","AnimationIteration"),animationstart:Ep("Animation","AnimationStart"),transitionend:Ep("Transition","TransitionEnd")},Ky={},VS={};$a&&(VS=document.createElement("div").style,"AnimationEvent"in window||(delete Xc.animationend.animation,delete Xc.animationiteration.animation,delete Xc.animationstart.animation),"TransitionEvent"in window||delete Xc.transitionend.transition);function _g(e){if(Ky[e])return Ky[e];if(!Xc[e])return e;var t=Xc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in VS)return Ky[e]=t[i];return e}var GS=_g("animationend"),ZS=_g("animationiteration"),WS=_g("animationstart"),HS=_g("transitionend"),XS=new Map,_b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function iu(e,t){XS.set(e,t),nc(t,[e])}for(var Yy=0;Yy<_b.length;Yy++){var Jy=_b[Yy],$k=Jy.toLowerCase(),Vk=Jy[0].toUpperCase()+Jy.slice(1);iu($k,"on"+Vk)}iu(GS,"onAnimationEnd");iu(ZS,"onAnimationIteration");iu(WS,"onAnimationStart");iu("dblclick","onDoubleClick");iu("focusin","onFocus");iu("focusout","onBlur");iu(HS,"onTransitionEnd");gh("onMouseEnter",["mouseout","mouseover"]);gh("onMouseLeave",["mouseout","mouseover"]);gh("onPointerEnter",["pointerout","pointerover"]);gh("onPointerLeave",["pointerout","pointerover"]);nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(zf));function xb(e,t,i){var l=e.type||"unknown-event";e.currentTarget=i,$M(l,t,void 0,e),e.currentTarget=null}function qS(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var l=e[i],c=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var y=l.length-1;0<=y;y--){var a=l[y],b=a.instance,w=a.currentTarget;if(a=a.listener,b!==d&&c.isPropagationStopped())break e;xb(c,a,w),d=b}else for(y=0;y<l.length;y++){if(a=l[y],b=a.instance,w=a.currentTarget,a=a.listener,b!==d&&c.isPropagationStopped())break e;xb(c,a,w),d=b}}}if(pm)throw e=ov,pm=!1,ov=null,e}function vr(e,t){var i=t[mv];i===void 0&&(i=t[mv]=new Set);var l=e+"__bubble";i.has(l)||(KS(t,e,2,!1),i.add(l))}function Qy(e,t,i){var l=0;t&&(l|=4),KS(i,e,l,t)}var Sp="_reactListening"+Math.random().toString(36).slice(2);function fd(e){if(!e[Sp]){e[Sp]=!0,rS.forEach(function(i){i!=="selectionchange"&&(Gk.has(i)||Qy(i,!1,e),Qy(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Sp]||(t[Sp]=!0,Qy("selectionchange",!1,t))}}function KS(e,t,i,l){switch(zS(t)){case 1:var c=ik;break;case 4:c=ok;break;default:c=$_}i=c.bind(null,t,i,e),c=void 0,!iv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function e0(e,t,i,l,c){var d=l;if(!(t&1)&&!(t&2)&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var a=l.stateNode.containerInfo;if(a===c||a.nodeType===8&&a.parentNode===c)break;if(y===4)for(y=l.return;y!==null;){var b=y.tag;if((b===3||b===4)&&(b=y.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;y=y.return}for(;a!==null;){if(y=Uu(a),y===null)return;if(b=y.tag,b===5||b===6){l=d=y;continue e}a=a.parentNode}}l=l.return}_S(function(){var w=d,I=D_(i),C=[];e:{var L=XS.get(e);if(L!==void 0){var j=G_,ee=e;switch(e){case"keypress":if(Xp(i)===0)break e;case"keydown":case"keyup":j=xk;break;case"focusin":ee="focus",j=Hy;break;case"focusout":ee="blur",j=Hy;break;case"beforeblur":case"afterblur":j=Hy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=lb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=lk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Ek;break;case GS:case ZS:case WS:j=hk;break;case HS:j=Tk;break;case"scroll":j=sk;break;case"wheel":j=Ak;break;case"copy":case"cut":case"paste":j=dk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=cb}var Y=(t&4)!==0,de=!Y&&e==="scroll",G=Y?L!==null?L+"Capture":null:L;Y=[];for(var V=w,U;V!==null;){U=V;var ie=U.stateNode;if(U.tag===5&&ie!==null&&(U=ie,G!==null&&(ie=sd(V,G),ie!=null&&Y.push(dd(V,ie,U)))),de)break;V=V.return}0<Y.length&&(L=new j(L,ee,null,i,I),C.push({event:L,listeners:Y}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",L&&i!==nv&&(ee=i.relatedTarget||i.fromElement)&&(Uu(ee)||ee[Va]))break e;if((j||L)&&(L=I.window===I?I:(L=I.ownerDocument)?L.defaultView||L.parentWindow:window,j?(ee=i.relatedTarget||i.toElement,j=w,ee=ee?Uu(ee):null,ee!==null&&(de=rc(ee),ee!==de||ee.tag!==5&&ee.tag!==6)&&(ee=null)):(j=null,ee=w),j!==ee)){if(Y=lb,ie="onMouseLeave",G="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(Y=cb,ie="onPointerLeave",G="onPointerEnter",V="pointer"),de=j==null?L:qc(j),U=ee==null?L:qc(ee),L=new Y(ie,V+"leave",j,i,I),L.target=de,L.relatedTarget=U,ie=null,Uu(I)===w&&(Y=new Y(G,V+"enter",ee,i,I),Y.target=U,Y.relatedTarget=de,ie=Y),de=ie,j&&ee)t:{for(Y=j,G=ee,V=0,U=Y;U;U=Rc(U))V++;for(U=0,ie=G;ie;ie=Rc(ie))U++;for(;0<V-U;)Y=Rc(Y),V--;for(;0<U-V;)G=Rc(G),U--;for(;V--;){if(Y===G||G!==null&&Y===G.alternate)break t;Y=Rc(Y),G=Rc(G)}Y=null}else Y=null;j!==null&&wb(C,L,j,Y,!1),ee!==null&&de!==null&&wb(C,de,ee,Y,!0)}}e:{if(L=w?qc(w):window,j=L.nodeName&&L.nodeName.toLowerCase(),j==="select"||j==="input"&&L.type==="file")var Z=Fk;else if(db(L))if(BS)Z=Dk;else{Z=Rk;var B=Ok}else(j=L.nodeName)&&j.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(Z=jk);if(Z&&(Z=Z(e,w))){DS(C,Z,i,I);break e}B&&B(e,L,w),e==="focusout"&&(B=L._wrapperState)&&B.controlled&&L.type==="number"&&Y0(L,"number",L.value)}switch(B=w?qc(w):window,e){case"focusin":(db(B)||B.contentEditable==="true")&&(Hc=B,uv=w,Wf=null);break;case"focusout":Wf=uv=Hc=null;break;case"mousedown":cv=!0;break;case"contextmenu":case"mouseup":case"dragend":cv=!1,vb(C,i,I);break;case"selectionchange":if(Uk)break;case"keydown":case"keyup":vb(C,i,I)}var S;if(W_)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wc?RS(e,i)&&(k="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(k="onCompositionStart");k&&(OS&&i.locale!=="ko"&&(Wc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Wc&&(S=FS()):($l=I,V_="value"in $l?$l.value:$l.textContent,Wc=!0)),B=_m(w,k),0<B.length&&(k=new ub(k,e,null,i,I),C.push({event:k,listeners:B}),S?k.data=S:(S=jS(i),S!==null&&(k.data=S)))),(S=Pk?Mk(e,i):kk(e,i))&&(w=_m(w,"onBeforeInput"),0<w.length&&(I=new ub("onBeforeInput","beforeinput",null,i,I),C.push({event:I,listeners:w}),I.data=S))}qS(C,t)})}function dd(e,t,i){return{instance:e,listener:t,currentTarget:i}}function _m(e,t){for(var i=t+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=sd(e,i),d!=null&&l.unshift(dd(e,d,c)),d=sd(e,t),d!=null&&l.push(dd(e,d,c))),e=e.return}return l}function Rc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wb(e,t,i,l,c){for(var d=t._reactName,y=[];i!==null&&i!==l;){var a=i,b=a.alternate,w=a.stateNode;if(b!==null&&b===l)break;a.tag===5&&w!==null&&(a=w,c?(b=sd(i,d),b!=null&&y.unshift(dd(i,b,a))):c||(b=sd(i,d),b!=null&&y.push(dd(i,b,a)))),i=i.return}y.length!==0&&e.push({event:t,listeners:y})}var Zk=/\r\n?/g,Wk=/\u0000|\uFFFD/g;function bb(e){return(typeof e=="string"?e:""+e).replace(Zk,`
`).replace(Wk,"")}function Tp(e,t,i){if(t=bb(t),bb(e)!==t&&i)throw Error(It(425))}function xm(){}var hv=null,fv=null;function dv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pv=typeof setTimeout=="function"?setTimeout:void 0,Hk=typeof clearTimeout=="function"?clearTimeout:void 0,Eb=typeof Promise=="function"?Promise:void 0,Xk=typeof queueMicrotask=="function"?queueMicrotask:typeof Eb<"u"?function(e){return Eb.resolve(null).then(e).catch(qk)}:pv;function qk(e){setTimeout(function(){throw e})}function t0(e,t){var i=t,l=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){e.removeChild(c),ud(t);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);ud(t)}function Xl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Mh=Math.random().toString(36).slice(2),aa="__reactFiber$"+Mh,pd="__reactProps$"+Mh,Va="__reactContainer$"+Mh,mv="__reactEvents$"+Mh,Kk="__reactListeners$"+Mh,Yk="__reactHandles$"+Mh;function Uu(e){var t=e[aa];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Va]||i[aa]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Sb(e);e!==null;){if(i=e[aa])return i;e=Sb(e)}return t}e=i,i=e.parentNode}return null}function Md(e){return e=e[aa]||e[Va],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(It(33))}function xg(e){return e[pd]||null}var gv=[],Kc=-1;function ou(e){return{current:e}}function _r(e){0>Kc||(e.current=gv[Kc],gv[Kc]=null,Kc--)}function dr(e,t){Kc++,gv[Kc]=e.current,e.current=t}var eu={},Vi=ou(eu),xo=ou(!1),Hu=eu;function yh(e,t){var i=e.type.contextTypes;if(!i)return eu;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=t[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function wo(e){return e=e.childContextTypes,e!=null}function wm(){_r(xo),_r(Vi)}function Tb(e,t,i){if(Vi.current!==eu)throw Error(It(168));dr(Vi,t),dr(xo,i)}function YS(e,t,i){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in t))throw Error(It(108,OM(e)||"Unknown",c));return zr({},i,l)}function bm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||eu,Hu=Vi.current,dr(Vi,e),dr(xo,xo.current),!0}function Cb(e,t,i){var l=e.stateNode;if(!l)throw Error(It(169));i?(e=YS(e,t,Hu),l.__reactInternalMemoizedMergedChildContext=e,_r(xo),_r(Vi),dr(Vi,e)):_r(xo),dr(xo,i)}var ja=null,wg=!1,n0=!1;function JS(e){ja===null?ja=[e]:ja.push(e)}function Jk(e){wg=!0,JS(e)}function su(){if(!n0&&ja!==null){n0=!0;var e=0,t=nr;try{var i=ja;for(nr=1;e<i.length;e++){var l=i[e];do l=l(!0);while(l!==null)}ja=null,wg=!1}catch(c){throw ja!==null&&(ja=ja.slice(e+1)),ES(B_,su),c}finally{nr=t,n0=!1}}return null}var Yc=[],Jc=0,Em=null,Sm=0,is=[],os=0,Xu=null,Ba=1,Na="";function Du(e,t){Yc[Jc++]=Sm,Yc[Jc++]=Em,Em=e,Sm=t}function QS(e,t,i){is[os++]=Ba,is[os++]=Na,is[os++]=Xu,Xu=e;var l=Ba;e=Na;var c=32-zs(l)-1;l&=~(1<<c),i+=1;var d=32-zs(t)+c;if(30<d){var y=c-c%5;d=(l&(1<<y)-1).toString(32),l>>=y,c-=y,Ba=1<<32-zs(t)+c|i<<c|l,Na=d+e}else Ba=1<<d|i<<c|l,Na=e}function X_(e){e.return!==null&&(Du(e,1),QS(e,1,0))}function q_(e){for(;e===Em;)Em=Yc[--Jc],Yc[Jc]=null,Sm=Yc[--Jc],Yc[Jc]=null;for(;e===Xu;)Xu=is[--os],is[os]=null,Na=is[--os],is[os]=null,Ba=is[--os],is[os]=null}var Do=null,jo=null,br=!1,As=null;function eT(e,t){var i=as(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Ab(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Do=e,jo=Xl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Do=e,jo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Xu!==null?{id:Ba,overflow:Na}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=as(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Do=e,jo=null,!0):!1;default:return!1}}function yv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vv(e){if(br){var t=jo;if(t){var i=t;if(!Ab(e,t)){if(yv(e))throw Error(It(418));t=Xl(i.nextSibling);var l=Do;t&&Ab(e,t)?eT(l,i):(e.flags=e.flags&-4097|2,br=!1,Do=e)}}else{if(yv(e))throw Error(It(418));e.flags=e.flags&-4097|2,br=!1,Do=e}}}function Ib(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Do=e}function Cp(e){if(e!==Do)return!1;if(!br)return Ib(e),br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dv(e.type,e.memoizedProps)),t&&(t=jo)){if(yv(e))throw tT(),Error(It(418));for(;t;)eT(e,t),t=Xl(t.nextSibling)}if(Ib(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(It(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){jo=Xl(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}jo=null}}else jo=Do?Xl(e.stateNode.nextSibling):null;return!0}function tT(){for(var e=jo;e;)e=Xl(e.nextSibling)}function vh(){jo=Do=null,br=!1}function K_(e){As===null?As=[e]:As.push(e)}var Qk=Ka.ReactCurrentBatchConfig;function Ts(e,t){if(e&&e.defaultProps){t=zr({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Tm=ou(null),Cm=null,Qc=null,Y_=null;function J_(){Y_=Qc=Cm=null}function Q_(e){var t=Tm.current;_r(Tm),e._currentValue=t}function _v(e,t,i){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===i)break;e=e.return}}function hh(e,t){Cm=e,Y_=Qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_o=!0),e.firstContext=null)}function cs(e){var t=e._currentValue;if(Y_!==e)if(e={context:e,memoizedValue:t,next:null},Qc===null){if(Cm===null)throw Error(It(308));Qc=e,Cm.dependencies={lanes:0,firstContext:e}}else Qc=Qc.next=e;return t}var $u=null;function e1(e){$u===null?$u=[e]:$u.push(e)}function nT(e,t,i,l){var c=t.interleaved;return c===null?(i.next=i,e1(t)):(i.next=c.next,c.next=i),t.interleaved=i,Ga(e,l)}function Ga(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Rl=!1;function t1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ql(e,t,i){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,Xn&2){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,Ga(e,i)}return c=l.interleaved,c===null?(t.next=t,e1(l)):(t.next=c.next,c.next=t),l.interleaved=t,Ga(e,i)}function qp(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,N_(e,i)}}function Pb(e,t){var i=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?c=d=t:d=d.next=t}else c=d=t;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Am(e,t,i,l){var c=e.updateQueue;Rl=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,a=c.shared.pending;if(a!==null){c.shared.pending=null;var b=a,w=b.next;b.next=null,y===null?d=w:y.next=w,y=b;var I=e.alternate;I!==null&&(I=I.updateQueue,a=I.lastBaseUpdate,a!==y&&(a===null?I.firstBaseUpdate=w:a.next=w,I.lastBaseUpdate=b))}if(d!==null){var C=c.baseState;y=0,I=w=b=null,a=d;do{var L=a.lane,j=a.eventTime;if((l&L)===L){I!==null&&(I=I.next={eventTime:j,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var ee=e,Y=a;switch(L=t,j=i,Y.tag){case 1:if(ee=Y.payload,typeof ee=="function"){C=ee.call(j,C,L);break e}C=ee;break e;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=Y.payload,L=typeof ee=="function"?ee.call(j,C,L):ee,L==null)break e;C=zr({},C,L);break e;case 2:Rl=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,L=c.effects,L===null?c.effects=[a]:L.push(a))}else j={eventTime:j,lane:L,tag:a.tag,payload:a.payload,callback:a.callback,next:null},I===null?(w=I=j,b=C):I=I.next=j,y|=L;if(a=a.next,a===null){if(a=c.shared.pending,a===null)break;L=a,a=L.next,L.next=null,c.lastBaseUpdate=L,c.shared.pending=null}}while(1);if(I===null&&(b=C),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=I,t=c.shared.interleaved,t!==null){c=t;do y|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);Ku|=y,e.lanes=y,e.memoizedState=C}}function Mb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(It(191,c));c.call(l)}}}var iT=new nS.Component().refs;function xv(e,t,i,l){t=e.memoizedState,i=i(l,t),i=i==null?t:zr({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var bg={isMounted:function(e){return(e=e._reactInternals)?rc(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var l=io(),c=Yl(e),d=Ua(l,c);d.payload=t,i!=null&&(d.callback=i),t=ql(e,d,c),t!==null&&(Fs(t,e,c,l),qp(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var l=io(),c=Yl(e),d=Ua(l,c);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=ql(e,d,c),t!==null&&(Fs(t,e,c,l),qp(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=io(),l=Yl(e),c=Ua(i,l);c.tag=2,t!=null&&(c.callback=t),t=ql(e,c,l),t!==null&&(Fs(t,e,l,i),qp(t,e,l))}};function kb(e,t,i,l,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,y):t.prototype&&t.prototype.isPureReactComponent?!hd(i,l)||!hd(c,d):!0}function oT(e,t,i){var l=!1,c=eu,d=t.contextType;return typeof d=="object"&&d!==null?d=cs(d):(c=wo(t)?Hu:Vi.current,l=t.contextTypes,d=(l=l!=null)?yh(e,c):eu),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bg,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function Lb(e,t,i,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,l),t.state!==e&&bg.enqueueReplaceState(t,t.state,null)}function wv(e,t,i,l){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=iT,t1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=cs(d):(d=wo(t)?Hu:Vi.current,c.context=yh(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(xv(e,t,d,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&bg.enqueueReplaceState(c,c.state,null),Am(e,i,c,l),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Cf(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(It(309));var l=i.stateNode}if(!l)throw Error(It(147,e));var c=l,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(y){var a=c.refs;a===iT&&(a=c.refs={}),y===null?delete a[d]:a[d]=y},t._stringRef=d,t)}if(typeof e!="string")throw Error(It(284));if(!i._owner)throw Error(It(290,e))}return e}function Ap(e,t){throw e=Object.prototype.toString.call(t),Error(It(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zb(e){var t=e._init;return t(e._payload)}function sT(e){function t(G,V){if(e){var U=G.deletions;U===null?(G.deletions=[V],G.flags|=16):U.push(V)}}function i(G,V){if(!e)return null;for(;V!==null;)t(G,V),V=V.sibling;return null}function l(G,V){for(G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function c(G,V){return G=Jl(G,V),G.index=0,G.sibling=null,G}function d(G,V,U){return G.index=U,e?(U=G.alternate,U!==null?(U=U.index,U<V?(G.flags|=2,V):U):(G.flags|=2,V)):(G.flags|=1048576,V)}function y(G){return e&&G.alternate===null&&(G.flags|=2),G}function a(G,V,U,ie){return V===null||V.tag!==6?(V=u0(U,G.mode,ie),V.return=G,V):(V=c(V,U),V.return=G,V)}function b(G,V,U,ie){var Z=U.type;return Z===Zc?I(G,V,U.props.children,ie,U.key):V!==null&&(V.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ol&&zb(Z)===V.type)?(ie=c(V,U.props),ie.ref=Cf(G,V,U),ie.return=G,ie):(ie=tm(U.type,U.key,U.props,null,G.mode,ie),ie.ref=Cf(G,V,U),ie.return=G,ie)}function w(G,V,U,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=c0(U,G.mode,ie),V.return=G,V):(V=c(V,U.children||[]),V.return=G,V)}function I(G,V,U,ie,Z){return V===null||V.tag!==7?(V=Wu(U,G.mode,ie,Z),V.return=G,V):(V=c(V,U),V.return=G,V)}function C(G,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return V=u0(""+V,G.mode,U),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case gp:return U=tm(V.type,V.key,V.props,null,G.mode,U),U.ref=Cf(G,null,V),U.return=G,U;case Gc:return V=c0(V,G.mode,U),V.return=G,V;case Ol:var ie=V._init;return C(G,ie(V._payload),U)}if(kf(V)||wf(V))return V=Wu(V,G.mode,U,null),V.return=G,V;Ap(G,V)}return null}function L(G,V,U,ie){var Z=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return Z!==null?null:a(G,V,""+U,ie);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case gp:return U.key===Z?b(G,V,U,ie):null;case Gc:return U.key===Z?w(G,V,U,ie):null;case Ol:return Z=U._init,L(G,V,Z(U._payload),ie)}if(kf(U)||wf(U))return Z!==null?null:I(G,V,U,ie,null);Ap(G,U)}return null}function j(G,V,U,ie,Z){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return G=G.get(U)||null,a(V,G,""+ie,Z);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case gp:return G=G.get(ie.key===null?U:ie.key)||null,b(V,G,ie,Z);case Gc:return G=G.get(ie.key===null?U:ie.key)||null,w(V,G,ie,Z);case Ol:var B=ie._init;return j(G,V,U,B(ie._payload),Z)}if(kf(ie)||wf(ie))return G=G.get(U)||null,I(V,G,ie,Z,null);Ap(V,ie)}return null}function ee(G,V,U,ie){for(var Z=null,B=null,S=V,k=V=0,W=null;S!==null&&k<U.length;k++){S.index>k?(W=S,S=null):W=S.sibling;var q=L(G,S,U[k],ie);if(q===null){S===null&&(S=W);break}e&&S&&q.alternate===null&&t(G,S),V=d(q,V,k),B===null?Z=q:B.sibling=q,B=q,S=W}if(k===U.length)return i(G,S),br&&Du(G,k),Z;if(S===null){for(;k<U.length;k++)S=C(G,U[k],ie),S!==null&&(V=d(S,V,k),B===null?Z=S:B.sibling=S,B=S);return br&&Du(G,k),Z}for(S=l(G,S);k<U.length;k++)W=j(S,G,k,U[k],ie),W!==null&&(e&&W.alternate!==null&&S.delete(W.key===null?k:W.key),V=d(W,V,k),B===null?Z=W:B.sibling=W,B=W);return e&&S.forEach(function(Q){return t(G,Q)}),br&&Du(G,k),Z}function Y(G,V,U,ie){var Z=wf(U);if(typeof Z!="function")throw Error(It(150));if(U=Z.call(U),U==null)throw Error(It(151));for(var B=Z=null,S=V,k=V=0,W=null,q=U.next();S!==null&&!q.done;k++,q=U.next()){S.index>k?(W=S,S=null):W=S.sibling;var Q=L(G,S,q.value,ie);if(Q===null){S===null&&(S=W);break}e&&S&&Q.alternate===null&&t(G,S),V=d(Q,V,k),B===null?Z=Q:B.sibling=Q,B=Q,S=W}if(q.done)return i(G,S),br&&Du(G,k),Z;if(S===null){for(;!q.done;k++,q=U.next())q=C(G,q.value,ie),q!==null&&(V=d(q,V,k),B===null?Z=q:B.sibling=q,B=q);return br&&Du(G,k),Z}for(S=l(G,S);!q.done;k++,q=U.next())q=j(S,G,k,q.value,ie),q!==null&&(e&&q.alternate!==null&&S.delete(q.key===null?k:q.key),V=d(q,V,k),B===null?Z=q:B.sibling=q,B=q);return e&&S.forEach(function(ye){return t(G,ye)}),br&&Du(G,k),Z}function de(G,V,U,ie){if(typeof U=="object"&&U!==null&&U.type===Zc&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case gp:e:{for(var Z=U.key,B=V;B!==null;){if(B.key===Z){if(Z=U.type,Z===Zc){if(B.tag===7){i(G,B.sibling),V=c(B,U.props.children),V.return=G,G=V;break e}}else if(B.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ol&&zb(Z)===B.type){i(G,B.sibling),V=c(B,U.props),V.ref=Cf(G,B,U),V.return=G,G=V;break e}i(G,B);break}else t(G,B);B=B.sibling}U.type===Zc?(V=Wu(U.props.children,G.mode,ie,U.key),V.return=G,G=V):(ie=tm(U.type,U.key,U.props,null,G.mode,ie),ie.ref=Cf(G,V,U),ie.return=G,G=ie)}return y(G);case Gc:e:{for(B=U.key;V!==null;){if(V.key===B)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){i(G,V.sibling),V=c(V,U.children||[]),V.return=G,G=V;break e}else{i(G,V);break}else t(G,V);V=V.sibling}V=c0(U,G.mode,ie),V.return=G,G=V}return y(G);case Ol:return B=U._init,de(G,V,B(U._payload),ie)}if(kf(U))return ee(G,V,U,ie);if(wf(U))return Y(G,V,U,ie);Ap(G,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,V!==null&&V.tag===6?(i(G,V.sibling),V=c(V,U),V.return=G,G=V):(i(G,V),V=u0(U,G.mode,ie),V.return=G,G=V),y(G)):i(G,V)}return de}var _h=sT(!0),aT=sT(!1),kd={},da=ou(kd),md=ou(kd),gd=ou(kd);function Vu(e){if(e===kd)throw Error(It(174));return e}function n1(e,t){switch(dr(gd,t),dr(md,e),dr(da,kd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Q0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Q0(t,e)}_r(da),dr(da,t)}function xh(){_r(da),_r(md),_r(gd)}function lT(e){Vu(gd.current);var t=Vu(da.current),i=Q0(t,e.type);t!==i&&(dr(md,e),dr(da,i))}function r1(e){md.current===e&&(_r(da),_r(md))}var Mr=ou(0);function Im(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var r0=[];function i1(){for(var e=0;e<r0.length;e++)r0[e]._workInProgressVersionPrimary=null;r0.length=0}var Kp=Ka.ReactCurrentDispatcher,i0=Ka.ReactCurrentBatchConfig,qu=0,Lr=null,ti=null,ui=null,Pm=!1,Hf=!1,yd=0,e3=0;function Di(){throw Error(It(321))}function o1(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Os(e[i],t[i]))return!1;return!0}function s1(e,t,i,l,c,d){if(qu=d,Lr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kp.current=e===null||e.memoizedState===null?i3:o3,e=i(l,c),Hf){d=0;do{if(Hf=!1,yd=0,25<=d)throw Error(It(301));d+=1,ui=ti=null,t.updateQueue=null,Kp.current=s3,e=i(l,c)}while(Hf)}if(Kp.current=Mm,t=ti!==null&&ti.next!==null,qu=0,ui=ti=Lr=null,Pm=!1,t)throw Error(It(300));return e}function a1(){var e=yd!==0;return yd=0,e}function sa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?Lr.memoizedState=ui=e:ui=ui.next=e,ui}function hs(){if(ti===null){var e=Lr.alternate;e=e!==null?e.memoizedState:null}else e=ti.next;var t=ui===null?Lr.memoizedState:ui.next;if(t!==null)ui=t,ti=e;else{if(e===null)throw Error(It(310));ti=e,e={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},ui===null?Lr.memoizedState=ui=e:ui=ui.next=e}return ui}function vd(e,t){return typeof t=="function"?t(e):t}function o0(e){var t=hs(),i=t.queue;if(i===null)throw Error(It(311));i.lastRenderedReducer=e;var l=ti,c=l.baseQueue,d=i.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}l.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,l=l.baseState;var a=y=null,b=null,w=d;do{var I=w.lane;if((qu&I)===I)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),l=w.hasEagerState?w.eagerState:e(l,w.action);else{var C={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(a=b=C,y=l):b=b.next=C,Lr.lanes|=I,Ku|=I}w=w.next}while(w!==null&&w!==d);b===null?y=l:b.next=a,Os(l,t.memoizedState)||(_o=!0),t.memoizedState=l,t.baseState=y,t.baseQueue=b,i.lastRenderedState=l}if(e=i.interleaved,e!==null){c=e;do d=c.lane,Lr.lanes|=d,Ku|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function s0(e){var t=hs(),i=t.queue;if(i===null)throw Error(It(311));i.lastRenderedReducer=e;var l=i.dispatch,c=i.pending,d=t.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);Os(d,t.memoizedState)||(_o=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,l]}function uT(){}function cT(e,t){var i=Lr,l=hs(),c=t(),d=!Os(l.memoizedState,c);if(d&&(l.memoizedState=c,_o=!0),l=l.queue,l1(dT.bind(null,i,l,e),[e]),l.getSnapshot!==t||d||ui!==null&&ui.memoizedState.tag&1){if(i.flags|=2048,_d(9,fT.bind(null,i,l,c,t),void 0,null),ci===null)throw Error(It(349));qu&30||hT(i,t,c)}return c}function hT(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function fT(e,t,i,l){t.value=i,t.getSnapshot=l,pT(t)&&mT(e)}function dT(e,t,i){return i(function(){pT(t)&&mT(e)})}function pT(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Os(e,i)}catch{return!0}}function mT(e){var t=Ga(e,1);t!==null&&Fs(t,e,1,-1)}function Fb(e){var t=sa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:e},t.queue=e,e=e.dispatch=r3.bind(null,Lr,e),[t.memoizedState,e]}function _d(e,t,i,l){return e={tag:e,create:t,destroy:i,deps:l,next:null},t=Lr.updateQueue,t===null?(t={lastEffect:null,stores:null},Lr.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(l=i.next,i.next=e,e.next=l,t.lastEffect=e)),e}function gT(){return hs().memoizedState}function Yp(e,t,i,l){var c=sa();Lr.flags|=e,c.memoizedState=_d(1|t,i,void 0,l===void 0?null:l)}function Eg(e,t,i,l){var c=hs();l=l===void 0?null:l;var d=void 0;if(ti!==null){var y=ti.memoizedState;if(d=y.destroy,l!==null&&o1(l,y.deps)){c.memoizedState=_d(t,i,d,l);return}}Lr.flags|=e,c.memoizedState=_d(1|t,i,d,l)}function Ob(e,t){return Yp(8390656,8,e,t)}function l1(e,t){return Eg(2048,8,e,t)}function yT(e,t){return Eg(4,2,e,t)}function vT(e,t){return Eg(4,4,e,t)}function _T(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xT(e,t,i){return i=i!=null?i.concat([e]):null,Eg(4,4,_T.bind(null,t,e),i)}function u1(){}function wT(e,t){var i=hs();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&o1(t,l[1])?l[0]:(i.memoizedState=[e,t],e)}function bT(e,t){var i=hs();t=t===void 0?null:t;var l=i.memoizedState;return l!==null&&t!==null&&o1(t,l[1])?l[0]:(e=e(),i.memoizedState=[e,t],e)}function ET(e,t,i){return qu&21?(Os(i,t)||(i=CS(),Lr.lanes|=i,Ku|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=i)}function t3(e,t){var i=nr;nr=i!==0&&4>i?i:4,e(!0);var l=i0.transition;i0.transition={};try{e(!1),t()}finally{nr=i,i0.transition=l}}function ST(){return hs().memoizedState}function n3(e,t,i){var l=Yl(e);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},TT(e))CT(t,i);else if(i=nT(e,t,i,l),i!==null){var c=io();Fs(i,e,l,c),AT(i,t,l)}}function r3(e,t,i){var l=Yl(e),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(TT(e))CT(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var y=t.lastRenderedState,a=d(y,i);if(c.hasEagerState=!0,c.eagerState=a,Os(a,y)){var b=t.interleaved;b===null?(c.next=c,e1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}i=nT(e,t,c,l),i!==null&&(c=io(),Fs(i,e,l,c),AT(i,t,l))}}function TT(e){var t=e.alternate;return e===Lr||t!==null&&t===Lr}function CT(e,t){Hf=Pm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function AT(e,t,i){if(i&4194240){var l=t.lanes;l&=e.pendingLanes,i|=l,t.lanes=i,N_(e,i)}}var Mm={readContext:cs,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},i3={readContext:cs,useCallback:function(e,t){return sa().memoizedState=[e,t===void 0?null:t],e},useContext:cs,useEffect:Ob,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Yp(4194308,4,_T.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Yp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yp(4,2,e,t)},useMemo:function(e,t){var i=sa();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var l=sa();return t=i!==void 0?i(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=n3.bind(null,Lr,e),[l.memoizedState,e]},useRef:function(e){var t=sa();return e={current:e},t.memoizedState=e},useState:Fb,useDebugValue:u1,useDeferredValue:function(e){return sa().memoizedState=e},useTransition:function(){var e=Fb(!1),t=e[0];return e=t3.bind(null,e[1]),sa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var l=Lr,c=sa();if(br){if(i===void 0)throw Error(It(407));i=i()}else{if(i=t(),ci===null)throw Error(It(349));qu&30||hT(l,t,i)}c.memoizedState=i;var d={value:i,getSnapshot:t};return c.queue=d,Ob(dT.bind(null,l,d,e),[e]),l.flags|=2048,_d(9,fT.bind(null,l,d,i,t),void 0,null),i},useId:function(){var e=sa(),t=ci.identifierPrefix;if(br){var i=Na,l=Ba;i=(l&~(1<<32-zs(l)-1)).toString(32)+i,t=":"+t+"R"+i,i=yd++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=e3++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},o3={readContext:cs,useCallback:wT,useContext:cs,useEffect:l1,useImperativeHandle:xT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:bT,useReducer:o0,useRef:gT,useState:function(){return o0(vd)},useDebugValue:u1,useDeferredValue:function(e){var t=hs();return ET(t,ti.memoizedState,e)},useTransition:function(){var e=o0(vd)[0],t=hs().memoizedState;return[e,t]},useMutableSource:uT,useSyncExternalStore:cT,useId:ST,unstable_isNewReconciler:!1},s3={readContext:cs,useCallback:wT,useContext:cs,useEffect:l1,useImperativeHandle:xT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:bT,useReducer:s0,useRef:gT,useState:function(){return s0(vd)},useDebugValue:u1,useDeferredValue:function(e){var t=hs();return ti===null?t.memoizedState=e:ET(t,ti.memoizedState,e)},useTransition:function(){var e=s0(vd)[0],t=hs().memoizedState;return[e,t]},useMutableSource:uT,useSyncExternalStore:cT,useId:ST,unstable_isNewReconciler:!1};function wh(e,t){try{var i="",l=t;do i+=FM(l),l=l.return;while(l);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function a0(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function bv(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var a3=typeof WeakMap=="function"?WeakMap:Map;function IT(e,t,i){i=Ua(-1,i),i.tag=3,i.payload={element:null};var l=t.value;return i.callback=function(){Lm||(Lm=!0,Lv=l),bv(e,t)},i}function PT(e,t,i){i=Ua(-1,i),i.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var c=t.value;i.payload=function(){return l(c)},i.callback=function(){bv(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){bv(e,t),typeof l!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),i}function Rb(e,t,i){var l=e.pingCache;if(l===null){l=e.pingCache=new a3;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(i)||(c.add(i),e=w3.bind(null,e,t,i),t.then(e,e))}function jb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Db(e,t,i,l,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ua(-1,1),t.tag=2,ql(i,t,1))),i.lanes|=1),e)}var l3=Ka.ReactCurrentOwner,_o=!1;function eo(e,t,i,l){t.child=e===null?aT(t,null,i,l):_h(t,e.child,i,l)}function Bb(e,t,i,l,c){i=i.render;var d=t.ref;return hh(t,c),l=s1(e,t,i,l,d,c),i=a1(),e!==null&&!_o?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Za(e,t,c)):(br&&i&&X_(t),t.flags|=1,eo(e,t,l,c),t.child)}function Nb(e,t,i,l,c){if(e===null){var d=i.type;return typeof d=="function"&&!y1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,MT(e,t,d,l,c)):(e=tm(i.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:hd,i(y,l)&&e.ref===t.ref)return Za(e,t,c)}return t.flags|=1,e=Jl(d,l),e.ref=t.ref,e.return=t,t.child=e}function MT(e,t,i,l,c){if(e!==null){var d=e.memoizedProps;if(hd(d,l)&&e.ref===t.ref)if(_o=!1,t.pendingProps=l=d,(e.lanes&c)!==0)e.flags&131072&&(_o=!0);else return t.lanes=e.lanes,Za(e,t,c)}return Ev(e,t,i,l,c)}function kT(e,t,i){var l=t.pendingProps,c=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dr(th,Fo),Fo|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dr(th,Fo),Fo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:i,dr(th,Fo),Fo|=l}else d!==null?(l=d.baseLanes|i,t.memoizedState=null):l=i,dr(th,Fo),Fo|=l;return eo(e,t,c,i),t.child}function LT(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ev(e,t,i,l,c){var d=wo(i)?Hu:Vi.current;return d=yh(t,d),hh(t,c),i=s1(e,t,i,l,d,c),l=a1(),e!==null&&!_o?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Za(e,t,c)):(br&&l&&X_(t),t.flags|=1,eo(e,t,i,c),t.child)}function Ub(e,t,i,l,c){if(wo(i)){var d=!0;bm(t)}else d=!1;if(hh(t,c),t.stateNode===null)Jp(e,t),oT(t,i,l),wv(t,i,l,c),l=!0;else if(e===null){var y=t.stateNode,a=t.memoizedProps;y.props=a;var b=y.context,w=i.contextType;typeof w=="object"&&w!==null?w=cs(w):(w=wo(i)?Hu:Vi.current,w=yh(t,w));var I=i.getDerivedStateFromProps,C=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function";C||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==l||b!==w)&&Lb(t,y,l,w),Rl=!1;var L=t.memoizedState;y.state=L,Am(t,l,y,c),b=t.memoizedState,a!==l||L!==b||xo.current||Rl?(typeof I=="function"&&(xv(t,i,I,l),b=t.memoizedState),(a=Rl||kb(t,i,a,l,L,b,w))?(C||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=b),y.props=l,y.state=b,y.context=w,l=a):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,rT(e,t),a=t.memoizedProps,w=t.type===t.elementType?a:Ts(t.type,a),y.props=w,C=t.pendingProps,L=y.context,b=i.contextType,typeof b=="object"&&b!==null?b=cs(b):(b=wo(i)?Hu:Vi.current,b=yh(t,b));var j=i.getDerivedStateFromProps;(I=typeof j=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(a!==C||L!==b)&&Lb(t,y,l,b),Rl=!1,L=t.memoizedState,y.state=L,Am(t,l,y,c);var ee=t.memoizedState;a!==C||L!==ee||xo.current||Rl?(typeof j=="function"&&(xv(t,i,j,l),ee=t.memoizedState),(w=Rl||kb(t,i,w,l,L,ee,b)||!1)?(I||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,ee,b),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,ee,b)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=ee),y.props=l,y.state=ee,y.context=b,l=w):(typeof y.componentDidUpdate!="function"||a===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),l=!1)}return Sv(e,t,i,l,d,c)}function Sv(e,t,i,l,c,d){LT(e,t);var y=(t.flags&128)!==0;if(!l&&!y)return c&&Cb(t,i,!1),Za(e,t,d);l=t.stateNode,l3.current=t;var a=y&&typeof i.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&y?(t.child=_h(t,e.child,null,d),t.child=_h(t,null,a,d)):eo(e,t,a,d),t.memoizedState=l.state,c&&Cb(t,i,!0),t.child}function zT(e){var t=e.stateNode;t.pendingContext?Tb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tb(e,t.context,!1),n1(e,t.containerInfo)}function $b(e,t,i,l,c){return vh(),K_(c),t.flags|=256,eo(e,t,i,l),t.child}var Tv={dehydrated:null,treeContext:null,retryLane:0};function Cv(e){return{baseLanes:e,cachePool:null,transitions:null}}function FT(e,t,i){var l=t.pendingProps,c=Mr.current,d=!1,y=(t.flags&128)!==0,a;if((a=y)||(a=e!==null&&e.memoizedState===null?!1:(c&2)!==0),a?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),dr(Mr,c&1),e===null)return vv(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=l.children,e=l.fallback,d?(l=t.mode,d=t.child,y={mode:"hidden",children:y},!(l&1)&&d!==null?(d.childLanes=0,d.pendingProps=y):d=Cg(y,l,0,null),e=Wu(e,l,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Cv(i),t.memoizedState=Tv,e):c1(t,y));if(c=e.memoizedState,c!==null&&(a=c.dehydrated,a!==null))return u3(e,t,y,l,a,c,i);if(d){d=l.fallback,y=t.mode,c=e.child,a=c.sibling;var b={mode:"hidden",children:l.children};return!(y&1)&&t.child!==c?(l=t.child,l.childLanes=0,l.pendingProps=b,t.deletions=null):(l=Jl(c,b),l.subtreeFlags=c.subtreeFlags&14680064),a!==null?d=Jl(a,d):(d=Wu(d,y,i,null),d.flags|=2),d.return=t,l.return=t,l.sibling=d,t.child=l,l=d,d=t.child,y=e.child.memoizedState,y=y===null?Cv(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},d.memoizedState=y,d.childLanes=e.childLanes&~i,t.memoizedState=Tv,l}return d=e.child,e=d.sibling,l=Jl(d,{mode:"visible",children:l.children}),!(t.mode&1)&&(l.lanes=i),l.return=t,l.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=l,t.memoizedState=null,l}function c1(e,t){return t=Cg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ip(e,t,i,l){return l!==null&&K_(l),_h(t,e.child,null,i),e=c1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function u3(e,t,i,l,c,d,y){if(i)return t.flags&256?(t.flags&=-257,l=a0(Error(It(422))),Ip(e,t,y,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=l.fallback,c=t.mode,l=Cg({mode:"visible",children:l.children},c,0,null),d=Wu(d,c,y,null),d.flags|=2,l.return=t,d.return=t,l.sibling=d,t.child=l,t.mode&1&&_h(t,e.child,null,y),t.child.memoizedState=Cv(y),t.memoizedState=Tv,d);if(!(t.mode&1))return Ip(e,t,y,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var a=l.dgst;return l=a,d=Error(It(419)),l=a0(d,l,void 0),Ip(e,t,y,l)}if(a=(y&e.childLanes)!==0,_o||a){if(l=ci,l!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(l.suspendedLanes|y)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ga(e,c),Fs(l,e,c,-1))}return g1(),l=a0(Error(It(421))),Ip(e,t,y,l)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=b3.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,jo=Xl(c.nextSibling),Do=t,br=!0,As=null,e!==null&&(is[os++]=Ba,is[os++]=Na,is[os++]=Xu,Ba=e.id,Na=e.overflow,Xu=t),t=c1(t,l.children),t.flags|=4096,t)}function Vb(e,t,i){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),_v(e.return,t,i)}function l0(e,t,i,l,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=i,d.tailMode=c)}function OT(e,t,i){var l=t.pendingProps,c=l.revealOrder,d=l.tail;if(eo(e,t,l.children,i),l=Mr.current,l&2)l=l&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vb(e,i,t);else if(e.tag===19)Vb(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(dr(Mr,l),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&Im(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),l0(t,!1,c,i,d);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Im(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}l0(t,!0,i,null,d);break;case"together":l0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Za(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ku|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(It(153));if(t.child!==null){for(e=t.child,i=Jl(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Jl(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function c3(e,t,i){switch(t.tag){case 3:zT(t),vh();break;case 5:lT(t);break;case 1:wo(t.type)&&bm(t);break;case 4:n1(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,c=t.memoizedProps.value;dr(Tm,l._currentValue),l._currentValue=c;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(dr(Mr,Mr.current&1),t.flags|=128,null):i&t.child.childLanes?FT(e,t,i):(dr(Mr,Mr.current&1),e=Za(e,t,i),e!==null?e.sibling:null);dr(Mr,Mr.current&1);break;case 19:if(l=(i&t.childLanes)!==0,e.flags&128){if(l)return OT(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),dr(Mr,Mr.current),l)break;return null;case 22:case 23:return t.lanes=0,kT(e,t,i)}return Za(e,t,i)}var RT,Av,jT,DT;RT=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Av=function(){};jT=function(e,t,i,l){var c=e.memoizedProps;if(c!==l){e=t.stateNode,Vu(da.current);var d=null;switch(i){case"input":c=q0(e,c),l=q0(e,l),d=[];break;case"select":c=zr({},c,{value:void 0}),l=zr({},l,{value:void 0}),d=[];break;case"textarea":c=J0(e,c),l=J0(e,l),d=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=xm)}ev(i,l);var y;i=null;for(w in c)if(!l.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var a=c[w];for(y in a)a.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(id.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in l){var b=l[w];if(a=c!=null?c[w]:void 0,l.hasOwnProperty(w)&&b!==a&&(b!=null||a!=null))if(w==="style")if(a){for(y in a)!a.hasOwnProperty(y)||b&&b.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in b)b.hasOwnProperty(y)&&a[y]!==b[y]&&(i||(i={}),i[y]=b[y])}else i||(d||(d=[]),d.push(w,i)),i=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,a=a?a.__html:void 0,b!=null&&a!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(id.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&vr("scroll",e),d||a===b||(d=[])):(d=d||[]).push(w,b))}i&&(d=d||[]).push("style",i);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};DT=function(e,t,i,l){i!==l&&(t.flags|=4)};function Af(e,t){if(!br)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,l=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=i,t}function h3(e,t,i){var l=t.pendingProps;switch(q_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(t),null;case 1:return wo(t.type)&&wm(),Bi(t),null;case 3:return l=t.stateNode,xh(),_r(xo),_r(Vi),i1(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Cp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,As!==null&&(Ov(As),As=null))),Av(e,t),Bi(t),null;case 5:r1(t);var c=Vu(gd.current);if(i=t.type,e!==null&&t.stateNode!=null)jT(e,t,i,l,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(It(166));return Bi(t),null}if(e=Vu(da.current),Cp(t)){l=t.stateNode,i=t.type;var d=t.memoizedProps;switch(l[aa]=t,l[pd]=d,e=(t.mode&1)!==0,i){case"dialog":vr("cancel",l),vr("close",l);break;case"iframe":case"object":case"embed":vr("load",l);break;case"video":case"audio":for(c=0;c<zf.length;c++)vr(zf[c],l);break;case"source":vr("error",l);break;case"img":case"image":case"link":vr("error",l),vr("load",l);break;case"details":vr("toggle",l);break;case"input":Jw(l,d),vr("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},vr("invalid",l);break;case"textarea":eb(l,d),vr("invalid",l)}ev(i,d),c=null;for(var y in d)if(d.hasOwnProperty(y)){var a=d[y];y==="children"?typeof a=="string"?l.textContent!==a&&(d.suppressHydrationWarning!==!0&&Tp(l.textContent,a,e),c=["children",a]):typeof a=="number"&&l.textContent!==""+a&&(d.suppressHydrationWarning!==!0&&Tp(l.textContent,a,e),c=["children",""+a]):id.hasOwnProperty(y)&&a!=null&&y==="onScroll"&&vr("scroll",l)}switch(i){case"input":yp(l),Qw(l,d,!0);break;case"textarea":yp(l),tb(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=xm)}l=c,t.updateQueue=l,l!==null&&(t.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hS(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=y.createElement(i,{is:l.is}):(e=y.createElement(i),i==="select"&&(y=e,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):e=y.createElementNS(e,i),e[aa]=t,e[pd]=l,RT(e,t,!1,!1),t.stateNode=e;e:{switch(y=tv(i,l),i){case"dialog":vr("cancel",e),vr("close",e),c=l;break;case"iframe":case"object":case"embed":vr("load",e),c=l;break;case"video":case"audio":for(c=0;c<zf.length;c++)vr(zf[c],e);c=l;break;case"source":vr("error",e),c=l;break;case"img":case"image":case"link":vr("error",e),vr("load",e),c=l;break;case"details":vr("toggle",e),c=l;break;case"input":Jw(e,l),c=q0(e,l),vr("invalid",e);break;case"option":c=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},c=zr({},l,{value:void 0}),vr("invalid",e);break;case"textarea":eb(e,l),c=J0(e,l),vr("invalid",e);break;default:c=l}ev(i,c),a=c;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];d==="style"?pS(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&fS(e,b)):d==="children"?typeof b=="string"?(i!=="textarea"||b!=="")&&od(e,b):typeof b=="number"&&od(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(id.hasOwnProperty(d)?b!=null&&d==="onScroll"&&vr("scroll",e):b!=null&&F_(e,d,b,y))}switch(i){case"input":yp(e),Qw(e,l,!1);break;case"textarea":yp(e),tb(e);break;case"option":l.value!=null&&e.setAttribute("value",""+Ql(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?ah(e,!!l.multiple,d,!1):l.defaultValue!=null&&ah(e,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=xm)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bi(t),null;case 6:if(e&&t.stateNode!=null)DT(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(It(166));if(i=Vu(gd.current),Vu(da.current),Cp(t)){if(l=t.stateNode,i=t.memoizedProps,l[aa]=t,(d=l.nodeValue!==i)&&(e=Do,e!==null))switch(e.tag){case 3:Tp(l.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tp(l.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[aa]=t,t.stateNode=l}return Bi(t),null;case 13:if(_r(Mr),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(br&&jo!==null&&t.mode&1&&!(t.flags&128))tT(),vh(),t.flags|=98560,d=!1;else if(d=Cp(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(It(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(It(317));d[aa]=t}else vh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bi(t),d=!1}else As!==null&&(Ov(As),As=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,t.mode&1&&(e===null||Mr.current&1?ni===0&&(ni=3):g1())),t.updateQueue!==null&&(t.flags|=4),Bi(t),null);case 4:return xh(),Av(e,t),e===null&&fd(t.stateNode.containerInfo),Bi(t),null;case 10:return Q_(t.type._context),Bi(t),null;case 17:return wo(t.type)&&wm(),Bi(t),null;case 19:if(_r(Mr),d=t.memoizedState,d===null)return Bi(t),null;if(l=(t.flags&128)!==0,y=d.rendering,y===null)if(l)Af(d,!1);else{if(ni!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Im(e),y!==null){for(t.flags|=128,Af(d,!1),l=y.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=i,i=t.child;i!==null;)d=i,e=l,d.flags&=14680066,y=d.alternate,y===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=y.childLanes,d.lanes=y.lanes,d.child=y.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=y.memoizedProps,d.memoizedState=y.memoizedState,d.updateQueue=y.updateQueue,d.type=y.type,e=y.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return dr(Mr,Mr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Hr()>bh&&(t.flags|=128,l=!0,Af(d,!1),t.lanes=4194304)}else{if(!l)if(e=Im(y),e!==null){if(t.flags|=128,l=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Af(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!br)return Bi(t),null}else 2*Hr()-d.renderingStartTime>bh&&i!==1073741824&&(t.flags|=128,l=!0,Af(d,!1),t.lanes=4194304);d.isBackwards?(y.sibling=t.child,t.child=y):(i=d.last,i!==null?i.sibling=y:t.child=y,d.last=y)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Hr(),t.sibling=null,i=Mr.current,dr(Mr,l?i&1|2:i&1),t):(Bi(t),null);case 22:case 23:return m1(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&t.mode&1?Fo&1073741824&&(Bi(t),t.subtreeFlags&6&&(t.flags|=8192)):Bi(t),null;case 24:return null;case 25:return null}throw Error(It(156,t.tag))}function f3(e,t){switch(q_(t),t.tag){case 1:return wo(t.type)&&wm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xh(),_r(xo),_r(Vi),i1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return r1(t),null;case 13:if(_r(Mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(It(340));vh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _r(Mr),null;case 4:return xh(),null;case 10:return Q_(t.type._context),null;case 22:case 23:return m1(),null;case 24:return null;default:return null}}var Pp=!1,Ui=!1,d3=typeof WeakSet=="function"?WeakSet:Set,en=null;function eh(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){jr(e,t,l)}else i.current=null}function Iv(e,t,i){try{i()}catch(l){jr(e,t,l)}}var Gb=!1;function p3(e,t){if(hv=ym,e=$S(),H_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,a=-1,b=-1,w=0,I=0,C=e,L=null;t:for(;;){for(var j;C!==i||c!==0&&C.nodeType!==3||(a=y+c),C!==d||l!==0&&C.nodeType!==3||(b=y+l),C.nodeType===3&&(y+=C.nodeValue.length),(j=C.firstChild)!==null;)L=C,C=j;for(;;){if(C===e)break t;if(L===i&&++w===c&&(a=y),L===d&&++I===l&&(b=y),(j=C.nextSibling)!==null)break;C=L,L=C.parentNode}C=j}i=a===-1||b===-1?null:{start:a,end:b}}else i=null}i=i||{start:0,end:0}}else i=null;for(fv={focusedElem:e,selectionRange:i},ym=!1,en=t;en!==null;)if(t=en,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,en=e;else for(;en!==null;){t=en;try{var ee=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ee!==null){var Y=ee.memoizedProps,de=ee.memoizedState,G=t.stateNode,V=G.getSnapshotBeforeUpdate(t.elementType===t.type?Y:Ts(t.type,Y),de);G.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(It(163))}}catch(ie){jr(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,en=e;break}en=t.return}return ee=Gb,Gb=!1,ee}function Xf(e,t,i){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Iv(t,i,d)}c=c.next}while(c!==l)}}function Sg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var l=i.create;i.destroy=l()}i=i.next}while(i!==t)}}function Pv(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function BT(e){var t=e.alternate;t!==null&&(e.alternate=null,BT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[aa],delete t[pd],delete t[mv],delete t[Kk],delete t[Yk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NT(e){return e.tag===5||e.tag===3||e.tag===4}function Zb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mv(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=xm));else if(l!==4&&(e=e.child,e!==null))for(Mv(e,t,i),e=e.sibling;e!==null;)Mv(e,t,i),e=e.sibling}function kv(e,t,i){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(kv(e,t,i),e=e.sibling;e!==null;)kv(e,t,i),e=e.sibling}var bi=null,Cs=!1;function zl(e,t,i){for(i=i.child;i!==null;)UT(e,t,i),i=i.sibling}function UT(e,t,i){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(gg,i)}catch{}switch(i.tag){case 5:Ui||eh(i,t);case 6:var l=bi,c=Cs;bi=null,zl(e,t,i),bi=l,Cs=c,bi!==null&&(Cs?(e=bi,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):bi.removeChild(i.stateNode));break;case 18:bi!==null&&(Cs?(e=bi,i=i.stateNode,e.nodeType===8?t0(e.parentNode,i):e.nodeType===1&&t0(e,i),ud(e)):t0(bi,i.stateNode));break;case 4:l=bi,c=Cs,bi=i.stateNode.containerInfo,Cs=!0,zl(e,t,i),bi=l,Cs=c;break;case 0:case 11:case 14:case 15:if(!Ui&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var d=c,y=d.destroy;d=d.tag,y!==void 0&&(d&2||d&4)&&Iv(i,t,y),c=c.next}while(c!==l)}zl(e,t,i);break;case 1:if(!Ui&&(eh(i,t),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(a){jr(i,t,a)}zl(e,t,i);break;case 21:zl(e,t,i);break;case 22:i.mode&1?(Ui=(l=Ui)||i.memoizedState!==null,zl(e,t,i),Ui=l):zl(e,t,i);break;default:zl(e,t,i)}}function Wb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new d3),t.forEach(function(l){var c=E3.bind(null,e,l);i.has(l)||(i.add(l),l.then(c,c))})}}function Ss(e,t){var i=t.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var d=e,y=t,a=y;e:for(;a!==null;){switch(a.tag){case 5:bi=a.stateNode,Cs=!1;break e;case 3:bi=a.stateNode.containerInfo,Cs=!0;break e;case 4:bi=a.stateNode.containerInfo,Cs=!0;break e}a=a.return}if(bi===null)throw Error(It(160));UT(d,y,c),bi=null,Cs=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){jr(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$T(t,e),t=t.sibling}function $T(e,t){var i=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ss(t,e),oa(e),l&4){try{Xf(3,e,e.return),Sg(3,e)}catch(Y){jr(e,e.return,Y)}try{Xf(5,e,e.return)}catch(Y){jr(e,e.return,Y)}}break;case 1:Ss(t,e),oa(e),l&512&&i!==null&&eh(i,i.return);break;case 5:if(Ss(t,e),oa(e),l&512&&i!==null&&eh(i,i.return),e.flags&32){var c=e.stateNode;try{od(c,"")}catch(Y){jr(e,e.return,Y)}}if(l&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,y=i!==null?i.memoizedProps:d,a=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{a==="input"&&d.type==="radio"&&d.name!=null&&uS(c,d),tv(a,y);var w=tv(a,d);for(y=0;y<b.length;y+=2){var I=b[y],C=b[y+1];I==="style"?pS(c,C):I==="dangerouslySetInnerHTML"?fS(c,C):I==="children"?od(c,C):F_(c,I,C,w)}switch(a){case"input":K0(c,d);break;case"textarea":cS(c,d);break;case"select":var L=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var j=d.value;j!=null?ah(c,!!d.multiple,j,!1):L!==!!d.multiple&&(d.defaultValue!=null?ah(c,!!d.multiple,d.defaultValue,!0):ah(c,!!d.multiple,d.multiple?[]:"",!1))}c[pd]=d}catch(Y){jr(e,e.return,Y)}}break;case 6:if(Ss(t,e),oa(e),l&4){if(e.stateNode===null)throw Error(It(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(Y){jr(e,e.return,Y)}}break;case 3:if(Ss(t,e),oa(e),l&4&&i!==null&&i.memoizedState.isDehydrated)try{ud(t.containerInfo)}catch(Y){jr(e,e.return,Y)}break;case 4:Ss(t,e),oa(e);break;case 13:Ss(t,e),oa(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(d1=Hr())),l&4&&Wb(e);break;case 22:if(I=i!==null&&i.memoizedState!==null,e.mode&1?(Ui=(w=Ui)||I,Ss(t,e),Ui=w):Ss(t,e),oa(e),l&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!I&&e.mode&1)for(en=e,I=e.child;I!==null;){for(C=en=I;en!==null;){switch(L=en,j=L.child,L.tag){case 0:case 11:case 14:case 15:Xf(4,L,L.return);break;case 1:eh(L,L.return);var ee=L.stateNode;if(typeof ee.componentWillUnmount=="function"){l=L,i=L.return;try{t=l,ee.props=t.memoizedProps,ee.state=t.memoizedState,ee.componentWillUnmount()}catch(Y){jr(l,i,Y)}}break;case 5:eh(L,L.return);break;case 22:if(L.memoizedState!==null){Xb(C);continue}}j!==null?(j.return=L,en=j):Xb(C)}I=I.sibling}e:for(I=null,C=e;;){if(C.tag===5){if(I===null){I=C;try{c=C.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(a=C.stateNode,b=C.memoizedProps.style,y=b!=null&&b.hasOwnProperty("display")?b.display:null,a.style.display=dS("display",y))}catch(Y){jr(e,e.return,Y)}}}else if(C.tag===6){if(I===null)try{C.stateNode.nodeValue=w?"":C.memoizedProps}catch(Y){jr(e,e.return,Y)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===e)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===e)break e;for(;C.sibling===null;){if(C.return===null||C.return===e)break e;I===C&&(I=null),C=C.return}I===C&&(I=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Ss(t,e),oa(e),l&4&&Wb(e);break;case 21:break;default:Ss(t,e),oa(e)}}function oa(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(NT(i)){var l=i;break e}i=i.return}throw Error(It(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(od(c,""),l.flags&=-33);var d=Zb(e);kv(e,d,c);break;case 3:case 4:var y=l.stateNode.containerInfo,a=Zb(e);Mv(e,a,y);break;default:throw Error(It(161))}}catch(b){jr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function m3(e,t,i){en=e,VT(e)}function VT(e,t,i){for(var l=(e.mode&1)!==0;en!==null;){var c=en,d=c.child;if(c.tag===22&&l){var y=c.memoizedState!==null||Pp;if(!y){var a=c.alternate,b=a!==null&&a.memoizedState!==null||Ui;a=Pp;var w=Ui;if(Pp=y,(Ui=b)&&!w)for(en=c;en!==null;)y=en,b=y.child,y.tag===22&&y.memoizedState!==null?qb(c):b!==null?(b.return=y,en=b):qb(c);for(;d!==null;)en=d,VT(d),d=d.sibling;en=c,Pp=a,Ui=w}Hb(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,en=d):Hb(e)}}function Hb(e){for(;en!==null;){var t=en;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ui||Sg(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Ui)if(i===null)l.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ts(t.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&Mb(t,d,l);break;case 3:var y=t.updateQueue;if(y!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Mb(t,y,i)}break;case 5:var a=t.stateNode;if(i===null&&t.flags&4){i=a;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&i.focus();break;case"img":b.src&&(i.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var C=I.dehydrated;C!==null&&ud(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(It(163))}Ui||t.flags&512&&Pv(t)}catch(L){jr(t,t.return,L)}}if(t===e){en=null;break}if(i=t.sibling,i!==null){i.return=t.return,en=i;break}en=t.return}}function Xb(e){for(;en!==null;){var t=en;if(t===e){en=null;break}var i=t.sibling;if(i!==null){i.return=t.return,en=i;break}en=t.return}}function qb(e){for(;en!==null;){var t=en;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Sg(4,t)}catch(b){jr(t,i,b)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var c=t.return;try{l.componentDidMount()}catch(b){jr(t,c,b)}}var d=t.return;try{Pv(t)}catch(b){jr(t,d,b)}break;case 5:var y=t.return;try{Pv(t)}catch(b){jr(t,y,b)}}}catch(b){jr(t,t.return,b)}if(t===e){en=null;break}var a=t.sibling;if(a!==null){a.return=t.return,en=a;break}en=t.return}}var g3=Math.ceil,km=Ka.ReactCurrentDispatcher,h1=Ka.ReactCurrentOwner,us=Ka.ReactCurrentBatchConfig,Xn=0,ci=null,Yr=null,Si=0,Fo=0,th=ou(0),ni=0,xd=null,Ku=0,Tg=0,f1=0,qf=null,yo=null,d1=0,bh=1/0,Ra=null,Lm=!1,Lv=null,Kl=null,Mp=!1,Vl=null,zm=0,Kf=0,zv=null,Qp=-1,em=0;function io(){return Xn&6?Hr():Qp!==-1?Qp:Qp=Hr()}function Yl(e){return e.mode&1?Xn&2&&Si!==0?Si&-Si:Qk.transition!==null?(em===0&&(em=CS()),em):(e=nr,e!==0||(e=window.event,e=e===void 0?16:zS(e.type)),e):1}function Fs(e,t,i,l){if(50<Kf)throw Kf=0,zv=null,Error(It(185));Id(e,i,l),(!(Xn&2)||e!==ci)&&(e===ci&&(!(Xn&2)&&(Tg|=i),ni===4&&Nl(e,Si)),bo(e,l),i===1&&Xn===0&&!(t.mode&1)&&(bh=Hr()+500,wg&&su()))}function bo(e,t){var i=e.callbackNode;QM(e,t);var l=gm(e,e===ci?Si:0);if(l===0)i!==null&&ib(i),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(i!=null&&ib(i),t===1)e.tag===0?Jk(Kb.bind(null,e)):JS(Kb.bind(null,e)),Xk(function(){!(Xn&6)&&su()}),i=null;else{switch(AS(l)){case 1:i=B_;break;case 4:i=SS;break;case 16:i=mm;break;case 536870912:i=TS;break;default:i=mm}i=YT(i,GT.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function GT(e,t){if(Qp=-1,em=0,Xn&6)throw Error(It(327));var i=e.callbackNode;if(fh()&&e.callbackNode!==i)return null;var l=gm(e,e===ci?Si:0);if(l===0)return null;if(l&30||l&e.expiredLanes||t)t=Fm(e,l);else{t=l;var c=Xn;Xn|=2;var d=WT();(ci!==e||Si!==t)&&(Ra=null,bh=Hr()+500,Zu(e,t));do try{_3();break}catch(a){ZT(e,a)}while(1);J_(),km.current=d,Xn=c,Yr!==null?t=0:(ci=null,Si=0,t=ni)}if(t!==0){if(t===2&&(c=sv(e),c!==0&&(l=c,t=Fv(e,c))),t===1)throw i=xd,Zu(e,0),Nl(e,l),bo(e,Hr()),i;if(t===6)Nl(e,l);else{if(c=e.current.alternate,!(l&30)&&!y3(c)&&(t=Fm(e,l),t===2&&(d=sv(e),d!==0&&(l=d,t=Fv(e,d))),t===1))throw i=xd,Zu(e,0),Nl(e,l),bo(e,Hr()),i;switch(e.finishedWork=c,e.finishedLanes=l,t){case 0:case 1:throw Error(It(345));case 2:Bu(e,yo,Ra);break;case 3:if(Nl(e,l),(l&130023424)===l&&(t=d1+500-Hr(),10<t)){if(gm(e,0)!==0)break;if(c=e.suspendedLanes,(c&l)!==l){io(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=pv(Bu.bind(null,e,yo,Ra),t);break}Bu(e,yo,Ra);break;case 4:if(Nl(e,l),(l&4194240)===l)break;for(t=e.eventTimes,c=-1;0<l;){var y=31-zs(l);d=1<<y,y=t[y],y>c&&(c=y),l&=~d}if(l=c,l=Hr()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*g3(l/1960))-l,10<l){e.timeoutHandle=pv(Bu.bind(null,e,yo,Ra),l);break}Bu(e,yo,Ra);break;case 5:Bu(e,yo,Ra);break;default:throw Error(It(329))}}}return bo(e,Hr()),e.callbackNode===i?GT.bind(null,e):null}function Fv(e,t){var i=qf;return e.current.memoizedState.isDehydrated&&(Zu(e,t).flags|=256),e=Fm(e,t),e!==2&&(t=yo,yo=i,t!==null&&Ov(t)),e}function Ov(e){yo===null?yo=e:yo.push.apply(yo,e)}function y3(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],d=c.getSnapshot;c=c.value;try{if(!Os(d(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nl(e,t){for(t&=~f1,t&=~Tg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-zs(t),l=1<<i;e[i]=-1,t&=~l}}function Kb(e){if(Xn&6)throw Error(It(327));fh();var t=gm(e,0);if(!(t&1))return bo(e,Hr()),null;var i=Fm(e,t);if(e.tag!==0&&i===2){var l=sv(e);l!==0&&(t=l,i=Fv(e,l))}if(i===1)throw i=xd,Zu(e,0),Nl(e,t),bo(e,Hr()),i;if(i===6)throw Error(It(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bu(e,yo,Ra),bo(e,Hr()),null}function p1(e,t){var i=Xn;Xn|=1;try{return e(t)}finally{Xn=i,Xn===0&&(bh=Hr()+500,wg&&su())}}function Yu(e){Vl!==null&&Vl.tag===0&&!(Xn&6)&&fh();var t=Xn;Xn|=1;var i=us.transition,l=nr;try{if(us.transition=null,nr=1,e)return e()}finally{nr=l,us.transition=i,Xn=t,!(Xn&6)&&su()}}function m1(){Fo=th.current,_r(th)}function Zu(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Hk(i)),Yr!==null)for(i=Yr.return;i!==null;){var l=i;switch(q_(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&wm();break;case 3:xh(),_r(xo),_r(Vi),i1();break;case 5:r1(l);break;case 4:xh();break;case 13:_r(Mr);break;case 19:_r(Mr);break;case 10:Q_(l.type._context);break;case 22:case 23:m1()}i=i.return}if(ci=e,Yr=e=Jl(e.current,null),Si=Fo=t,ni=0,xd=null,f1=Tg=Ku=0,yo=qf=null,$u!==null){for(t=0;t<$u.length;t++)if(i=$u[t],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,d=i.pending;if(d!==null){var y=d.next;d.next=c,l.next=y}i.pending=l}$u=null}return e}function ZT(e,t){do{var i=Yr;try{if(J_(),Kp.current=Mm,Pm){for(var l=Lr.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Pm=!1}if(qu=0,ui=ti=Lr=null,Hf=!1,yd=0,h1.current=null,i===null||i.return===null){ni=1,xd=t,Yr=null;break}e:{var d=e,y=i.return,a=i,b=t;if(t=Si,a.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,I=a,C=I.tag;if(!(I.mode&1)&&(C===0||C===11||C===15)){var L=I.alternate;L?(I.updateQueue=L.updateQueue,I.memoizedState=L.memoizedState,I.lanes=L.lanes):(I.updateQueue=null,I.memoizedState=null)}var j=jb(y);if(j!==null){j.flags&=-257,Db(j,y,a,d,t),j.mode&1&&Rb(d,w,t),t=j,b=w;var ee=t.updateQueue;if(ee===null){var Y=new Set;Y.add(b),t.updateQueue=Y}else ee.add(b);break e}else{if(!(t&1)){Rb(d,w,t),g1();break e}b=Error(It(426))}}else if(br&&a.mode&1){var de=jb(y);if(de!==null){!(de.flags&65536)&&(de.flags|=256),Db(de,y,a,d,t),K_(wh(b,a));break e}}d=b=wh(b,a),ni!==4&&(ni=2),qf===null?qf=[d]:qf.push(d),d=y;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var G=IT(d,b,t);Pb(d,G);break e;case 1:a=b;var V=d.type,U=d.stateNode;if(!(d.flags&128)&&(typeof V.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Kl===null||!Kl.has(U)))){d.flags|=65536,t&=-t,d.lanes|=t;var ie=PT(d,a,t);Pb(d,ie);break e}}d=d.return}while(d!==null)}XT(i)}catch(Z){t=Z,Yr===i&&i!==null&&(Yr=i=i.return);continue}break}while(1)}function WT(){var e=km.current;return km.current=Mm,e===null?Mm:e}function g1(){(ni===0||ni===3||ni===2)&&(ni=4),ci===null||!(Ku&268435455)&&!(Tg&268435455)||Nl(ci,Si)}function Fm(e,t){var i=Xn;Xn|=2;var l=WT();(ci!==e||Si!==t)&&(Ra=null,Zu(e,t));do try{v3();break}catch(c){ZT(e,c)}while(1);if(J_(),Xn=i,km.current=l,Yr!==null)throw Error(It(261));return ci=null,Si=0,ni}function v3(){for(;Yr!==null;)HT(Yr)}function _3(){for(;Yr!==null&&!GM();)HT(Yr)}function HT(e){var t=KT(e.alternate,e,Fo);e.memoizedProps=e.pendingProps,t===null?XT(e):Yr=t,h1.current=null}function XT(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=f3(i,t),i!==null){i.flags&=32767,Yr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ni=6,Yr=null;return}}else if(i=h3(i,t,Fo),i!==null){Yr=i;return}if(t=t.sibling,t!==null){Yr=t;return}Yr=t=e}while(t!==null);ni===0&&(ni=5)}function Bu(e,t,i){var l=nr,c=us.transition;try{us.transition=null,nr=1,x3(e,t,i,l)}finally{us.transition=c,nr=l}return null}function x3(e,t,i,l){do fh();while(Vl!==null);if(Xn&6)throw Error(It(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(It(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(ek(e,d),e===ci&&(Yr=ci=null,Si=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Mp||(Mp=!0,YT(mm,function(){return fh(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=us.transition,us.transition=null;var y=nr;nr=1;var a=Xn;Xn|=4,h1.current=null,p3(e,i),$T(i,e),Nk(fv),ym=!!hv,fv=hv=null,e.current=i,m3(i),ZM(),Xn=a,nr=y,us.transition=d}else e.current=i;if(Mp&&(Mp=!1,Vl=e,zm=c),d=e.pendingLanes,d===0&&(Kl=null),XM(i.stateNode),bo(e,Hr()),t!==null)for(l=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(Lm)throw Lm=!1,e=Lv,Lv=null,e;return zm&1&&e.tag!==0&&fh(),d=e.pendingLanes,d&1?e===zv?Kf++:(Kf=0,zv=e):Kf=0,su(),null}function fh(){if(Vl!==null){var e=AS(zm),t=us.transition,i=nr;try{if(us.transition=null,nr=16>e?16:e,Vl===null)var l=!1;else{if(e=Vl,Vl=null,zm=0,Xn&6)throw Error(It(331));var c=Xn;for(Xn|=4,en=e.current;en!==null;){var d=en,y=d.child;if(en.flags&16){var a=d.deletions;if(a!==null){for(var b=0;b<a.length;b++){var w=a[b];for(en=w;en!==null;){var I=en;switch(I.tag){case 0:case 11:case 15:Xf(8,I,d)}var C=I.child;if(C!==null)C.return=I,en=C;else for(;en!==null;){I=en;var L=I.sibling,j=I.return;if(BT(I),I===w){en=null;break}if(L!==null){L.return=j,en=L;break}en=j}}}var ee=d.alternate;if(ee!==null){var Y=ee.child;if(Y!==null){ee.child=null;do{var de=Y.sibling;Y.sibling=null,Y=de}while(Y!==null)}}en=d}}if(d.subtreeFlags&2064&&y!==null)y.return=d,en=y;else e:for(;en!==null;){if(d=en,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Xf(9,d,d.return)}var G=d.sibling;if(G!==null){G.return=d.return,en=G;break e}en=d.return}}var V=e.current;for(en=V;en!==null;){y=en;var U=y.child;if(y.subtreeFlags&2064&&U!==null)U.return=y,en=U;else e:for(y=V;en!==null;){if(a=en,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sg(9,a)}}catch(Z){jr(a,a.return,Z)}if(a===y){en=null;break e}var ie=a.sibling;if(ie!==null){ie.return=a.return,en=ie;break e}en=a.return}}if(Xn=c,su(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(gg,e)}catch{}l=!0}return l}finally{nr=i,us.transition=t}}return!1}function Yb(e,t,i){t=wh(i,t),t=IT(e,t,1),e=ql(e,t,1),t=io(),e!==null&&(Id(e,1,t),bo(e,t))}function jr(e,t,i){if(e.tag===3)Yb(e,e,i);else for(;t!==null;){if(t.tag===3){Yb(t,e,i);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Kl===null||!Kl.has(l))){e=wh(i,e),e=PT(t,e,1),t=ql(t,e,1),e=io(),t!==null&&(Id(t,1,e),bo(t,e));break}}t=t.return}}function w3(e,t,i){var l=e.pingCache;l!==null&&l.delete(t),t=io(),e.pingedLanes|=e.suspendedLanes&i,ci===e&&(Si&i)===i&&(ni===4||ni===3&&(Si&130023424)===Si&&500>Hr()-d1?Zu(e,0):f1|=i),bo(e,t)}function qT(e,t){t===0&&(e.mode&1?(t=xp,xp<<=1,!(xp&130023424)&&(xp=4194304)):t=1);var i=io();e=Ga(e,t),e!==null&&(Id(e,t,i),bo(e,i))}function b3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),qT(e,i)}function E3(e,t){var i=0;switch(e.tag){case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(It(314))}l!==null&&l.delete(t),qT(e,i)}var KT;KT=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||xo.current)_o=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return _o=!1,c3(e,t,i);_o=!!(e.flags&131072)}else _o=!1,br&&t.flags&1048576&&QS(t,Sm,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Jp(e,t),e=t.pendingProps;var c=yh(t,Vi.current);hh(t,i),c=s1(null,t,l,e,c,i);var d=a1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wo(l)?(d=!0,bm(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,t1(t),c.updater=bg,t.stateNode=c,c._reactInternals=t,wv(t,l,e,i),t=Sv(null,t,l,!0,d,i)):(t.tag=0,br&&d&&X_(t),eo(null,t,c,i),t=t.child),t;case 16:l=t.elementType;e:{switch(Jp(e,t),e=t.pendingProps,c=l._init,l=c(l._payload),t.type=l,c=t.tag=T3(l),e=Ts(l,e),c){case 0:t=Ev(null,t,l,e,i);break e;case 1:t=Ub(null,t,l,e,i);break e;case 11:t=Bb(null,t,l,e,i);break e;case 14:t=Nb(null,t,l,Ts(l.type,e),i);break e}throw Error(It(306,l,""))}return t;case 0:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ts(l,c),Ev(e,t,l,c,i);case 1:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ts(l,c),Ub(e,t,l,c,i);case 3:e:{if(zT(t),e===null)throw Error(It(387));l=t.pendingProps,d=t.memoizedState,c=d.element,rT(e,t),Am(t,l,null,i);var y=t.memoizedState;if(l=y.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=wh(Error(It(423)),t),t=$b(e,t,l,i,c);break e}else if(l!==c){c=wh(Error(It(424)),t),t=$b(e,t,l,i,c);break e}else for(jo=Xl(t.stateNode.containerInfo.firstChild),Do=t,br=!0,As=null,i=aT(t,null,l,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(vh(),l===c){t=Za(e,t,i);break e}eo(e,t,l,i)}t=t.child}return t;case 5:return lT(t),e===null&&vv(t),l=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,y=c.children,dv(l,c)?y=null:d!==null&&dv(l,d)&&(t.flags|=32),LT(e,t),eo(e,t,y,i),t.child;case 6:return e===null&&vv(t),null;case 13:return FT(e,t,i);case 4:return n1(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=_h(t,null,l,i):eo(e,t,l,i),t.child;case 11:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ts(l,c),Bb(e,t,l,c,i);case 7:return eo(e,t,t.pendingProps,i),t.child;case 8:return eo(e,t,t.pendingProps.children,i),t.child;case 12:return eo(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(l=t.type._context,c=t.pendingProps,d=t.memoizedProps,y=c.value,dr(Tm,l._currentValue),l._currentValue=y,d!==null)if(Os(d.value,y)){if(d.children===c.children&&!xo.current){t=Za(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var a=d.dependencies;if(a!==null){y=d.child;for(var b=a.firstContext;b!==null;){if(b.context===l){if(d.tag===1){b=Ua(-1,i&-i),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?b.next=b:(b.next=I.next,I.next=b),w.pending=b}}d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),_v(d.return,i,t),a.lanes|=i;break}b=b.next}}else if(d.tag===10)y=d.type===t.type?null:d.child;else if(d.tag===18){if(y=d.return,y===null)throw Error(It(341));y.lanes|=i,a=y.alternate,a!==null&&(a.lanes|=i),_v(y,i,t),y=d.sibling}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}eo(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,l=t.pendingProps.children,hh(t,i),c=cs(c),l=l(c),t.flags|=1,eo(e,t,l,i),t.child;case 14:return l=t.type,c=Ts(l,t.pendingProps),c=Ts(l.type,c),Nb(e,t,l,c,i);case 15:return MT(e,t,t.type,t.pendingProps,i);case 17:return l=t.type,c=t.pendingProps,c=t.elementType===l?c:Ts(l,c),Jp(e,t),t.tag=1,wo(l)?(e=!0,bm(t)):e=!1,hh(t,i),oT(t,l,c),wv(t,l,c,i),Sv(null,t,l,!0,e,i);case 19:return OT(e,t,i);case 22:return kT(e,t,i)}throw Error(It(156,t.tag))};function YT(e,t){return ES(e,t)}function S3(e,t,i,l){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(e,t,i,l){return new S3(e,t,i,l)}function y1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T3(e){if(typeof e=="function")return y1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===R_)return 11;if(e===j_)return 14}return 2}function Jl(e,t){var i=e.alternate;return i===null?(i=as(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function tm(e,t,i,l,c,d){var y=2;if(l=e,typeof e=="function")y1(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Zc:return Wu(i.children,c,d,t);case O_:y=8,c|=8;break;case Z0:return e=as(12,i,t,c|2),e.elementType=Z0,e.lanes=d,e;case W0:return e=as(13,i,t,c),e.elementType=W0,e.lanes=d,e;case H0:return e=as(19,i,t,c),e.elementType=H0,e.lanes=d,e;case sS:return Cg(i,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case iS:y=10;break e;case oS:y=9;break e;case R_:y=11;break e;case j_:y=14;break e;case Ol:y=16,l=null;break e}throw Error(It(130,e==null?e:typeof e,""))}return t=as(y,i,t,c),t.elementType=e,t.type=l,t.lanes=d,t}function Wu(e,t,i,l){return e=as(7,e,l,t),e.lanes=i,e}function Cg(e,t,i,l){return e=as(22,e,l,t),e.elementType=sS,e.lanes=i,e.stateNode={isHidden:!1},e}function u0(e,t,i){return e=as(6,e,null,t),e.lanes=i,e}function c0(e,t,i){return t=as(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C3(e,t,i,l,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gy(0),this.expirationTimes=Gy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gy(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function v1(e,t,i,l,c,d,y,a,b){return e=new C3(e,t,i,a,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=as(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},t1(d),e}function A3(e,t,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gc,key:l==null?null:""+l,children:e,containerInfo:t,implementation:i}}function JT(e){if(!e)return eu;e=e._reactInternals;e:{if(rc(e)!==e||e.tag!==1)throw Error(It(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(It(171))}if(e.tag===1){var i=e.type;if(wo(i))return YS(e,i,t)}return t}function QT(e,t,i,l,c,d,y,a,b){return e=v1(i,l,!0,e,c,d,y,a,b),e.context=JT(null),i=e.current,l=io(),c=Yl(i),d=Ua(l,c),d.callback=t??null,ql(i,d,c),e.current.lanes=c,Id(e,c,l),bo(e,l),e}function Ag(e,t,i,l){var c=t.current,d=io(),y=Yl(c);return i=JT(i),t.context===null?t.context=i:t.pendingContext=i,t=Ua(d,y),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=ql(c,t,y),e!==null&&(Fs(e,c,y,d),qp(e,c,y)),y}function Om(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function _1(e,t){Jb(e,t),(e=e.alternate)&&Jb(e,t)}function I3(){return null}var eC=typeof reportError=="function"?reportError:function(e){console.error(e)};function x1(e){this._internalRoot=e}Ig.prototype.render=x1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(It(409));Ag(e,t,null,null)};Ig.prototype.unmount=x1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yu(function(){Ag(null,e,null,null)}),t[Va]=null}};function Ig(e){this._internalRoot=e}Ig.prototype.unstable_scheduleHydration=function(e){if(e){var t=MS();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Bl.length&&t!==0&&t<Bl[i].priority;i++);Bl.splice(i,0,e),i===0&&LS(e)}};function w1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qb(){}function P3(e,t,i,l,c){if(c){if(typeof l=="function"){var d=l;l=function(){var w=Om(y);d.call(w)}}var y=QT(t,l,e,0,null,!1,!1,"",Qb);return e._reactRootContainer=y,e[Va]=y.current,fd(e.nodeType===8?e.parentNode:e),Yu(),y}for(;c=e.lastChild;)e.removeChild(c);if(typeof l=="function"){var a=l;l=function(){var w=Om(b);a.call(w)}}var b=v1(e,0,!1,null,null,!1,!1,"",Qb);return e._reactRootContainer=b,e[Va]=b.current,fd(e.nodeType===8?e.parentNode:e),Yu(function(){Ag(t,b,i,l)}),b}function Mg(e,t,i,l,c){var d=i._reactRootContainer;if(d){var y=d;if(typeof c=="function"){var a=c;c=function(){var b=Om(y);a.call(b)}}Ag(t,y,e,c)}else y=P3(i,t,e,c,l);return Om(y)}IS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Lf(t.pendingLanes);i!==0&&(N_(t,i|1),bo(t,Hr()),!(Xn&6)&&(bh=Hr()+500,su()))}break;case 13:Yu(function(){var l=Ga(e,1);if(l!==null){var c=io();Fs(l,e,1,c)}}),_1(e,1)}};U_=function(e){if(e.tag===13){var t=Ga(e,134217728);if(t!==null){var i=io();Fs(t,e,134217728,i)}_1(e,134217728)}};PS=function(e){if(e.tag===13){var t=Yl(e),i=Ga(e,t);if(i!==null){var l=io();Fs(i,e,t,l)}_1(e,t)}};MS=function(){return nr};kS=function(e,t){var i=nr;try{return nr=e,t()}finally{nr=i}};rv=function(e,t,i){switch(t){case"input":if(K0(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var l=i[t];if(l!==e&&l.form===e.form){var c=xg(l);if(!c)throw Error(It(90));lS(l),K0(l,c)}}}break;case"textarea":cS(e,i);break;case"select":t=i.value,t!=null&&ah(e,!!i.multiple,t,!1)}};yS=p1;vS=Yu;var M3={usingClientEntryPoint:!1,Events:[Md,qc,xg,mS,gS,p1]},If={findFiberByHostInstance:Uu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},k3={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wS(e),e===null?null:e.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||I3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kp.isDisabled&&kp.supportsFiber)try{gg=kp.inject(k3),fa=kp}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M3;No.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w1(t))throw Error(It(200));return A3(e,t,null,i)};No.createRoot=function(e,t){if(!w1(e))throw Error(It(299));var i=!1,l="",c=eC;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=v1(e,1,!1,null,null,i,!1,l,c),e[Va]=t.current,fd(e.nodeType===8?e.parentNode:e),new x1(t)};No.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(It(188)):(e=Object.keys(e).join(","),Error(It(268,e)));return e=wS(t),e=e===null?null:e.stateNode,e};No.flushSync=function(e){return Yu(e)};No.hydrate=function(e,t,i){if(!Pg(t))throw Error(It(200));return Mg(null,e,t,!0,i)};No.hydrateRoot=function(e,t,i){if(!w1(e))throw Error(It(405));var l=i!=null&&i.hydratedSources||null,c=!1,d="",y=eC;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),t=QT(t,null,e,1,i??null,c,!1,d,y),e[Va]=t.current,fd(e),l)for(e=0;e<l.length;e++)i=l[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Ig(t)};No.render=function(e,t,i){if(!Pg(t))throw Error(It(200));return Mg(null,e,t,!1,i)};No.unmountComponentAtNode=function(e){if(!Pg(e))throw Error(It(40));return e._reactRootContainer?(Yu(function(){Mg(null,null,e,!1,function(){e._reactRootContainer=null,e[Va]=null})}),!0):!1};No.unstable_batchedUpdates=p1;No.unstable_renderSubtreeIntoContainer=function(e,t,i,l){if(!Pg(i))throw Error(It(200));if(e==null||e._reactInternals===void 0)throw Error(It(38));return Mg(e,t,i,!1,l)};No.version="18.2.0-next-9e3b772b8-20220608";function tC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tC)}catch(e){console.error(e)}}tC(),QE.exports=No;var b1=QE.exports;const L3=Cd(b1);var nC={exports:{}};(function(e,t){(function(i,l){e.exports=l()})(Dl,function(){var i,l,c;function d(a,b){if(!i)i=b;else if(!l)l=b;else{var w="var sharedChunk = {}; ("+i+")(sharedChunk); ("+l+")(sharedChunk);",I={};i(I),c=b(I),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(a){function b(o,n,s,h){return new(s||(s=Promise))(function(p,v){function x(O){try{P(h.next(O))}catch(H){v(H)}}function E(O){try{P(h.throw(O))}catch(H){v(H)}}function P(O){var H;O.done?p(O.value):(H=O.value,H instanceof s?H:new s(function(J){J(H)})).then(x,E)}P((h=h.apply(o,n||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var I=C;function C(o,n){this.x=o,this.y=n}C.prototype={clone:function(){return new C(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(o,n){var s=Math.cos(o),h=Math.sin(o),p=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},C.convert=function(o){return o instanceof C?o:Array.isArray(o)?new C(o[0],o[1]):o};var L=w(I),j=ee;function ee(o,n,s,h){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=h}ee.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,h=0;h<8;h++){var p=this.sampleCurveX(s)-o;if(Math.abs(p)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=p/v}var x=0,E=1;for(s=o,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-o)<n));h++)o>p?x=s:E=s,s=.5*(E-x)+x;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Y=w(j);let de,G;function V(){return de==null&&(de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),de}function U(){if(G==null&&(G=!1,V())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const p=4*h;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){G=!0;break}}}return G||!1}function ie(o,n,s,h){const p=new Y(o,n,s,h);return function(v){return p.solve(v)}}const Z=ie(.25,.1,.25,1);function B(o,n,s){return Math.min(s,Math.max(n,o))}function S(o,n,s){const h=s-n,p=((o-n)%h+h)%h+n;return p===n?s:p}function k(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}let W=1;function q(o,n,s){const h={};for(const p in o)h[p]=n.call(s||this,o[p],p,o);return h}function Q(o,n,s){const h={};for(const p in o)n.call(s||this,o[p],p,o)&&(h[p]=o[p]);return h}function ye(o){return Array.isArray(o)?o.map(ye):typeof o=="object"&&o?q(o,ye):o}const _e={};function xe(o){_e[o]||(typeof console<"u"&&console.warn(o),_e[o]=!0)}function te(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function ue(o){let n=0;for(let s,h,p=0,v=o.length,x=v-1;p<v;x=p++)s=o[p],h=o[x],n+=(h.x-s.x)*(s.y+h.y);return n}function ne(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let re=null;function me(o){if(re==null){const n=o.navigator?o.navigator.userAgent:null;re=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return re}function Se(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const we="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ue(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),P=new Uint8ClampedArray(h*p*4);if(yield v.copyTo(P,function(O,H,J,ae,he){const pe=4*Math.max(-H,0),Ie=(Math.max(0,J)-J)*ae*4+pe,Oe=4*ae,Be=Math.max(0,H),Qe=Math.max(0,J);return{rect:{x:Be,y:Qe,width:Math.min(O.width,H+ae)-Be,height:Math.min(O.height,J+he)-Qe},layout:[{offset:Ie,stride:Oe}]}}(o,n,s,h,p)),E)for(let O=0;O<P.length;O+=4){const H=P[O];P[O]=P[O+2],P[O+2]=H}return P}finally{v.close()}})}let Pe,ze,He,Ze;const rt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){return this.getImageCanvasContext(o).getImageData(-n,-n,o.width+2*n,o.height+2*n)},getImageCanvasContext(o){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=o.width,n.height=o.height,s.drawImage(o,0,0,o.width,o.height),s},resolveURL:o=>(He||(He=document.createElement("a")),He.href=o,He.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ze==null&&(Ze=matchMedia("(prefers-reduced-motion: reduce)")),Ze.matches)}},ut={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class gt extends Error{constructor(n,s,h,p){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=p}}const Ct=ne()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,ht=o=>ut.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))];function Et(o,n){const s=new AbortController,h=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:Ct(),signal:s.signal});let p=!1,v=!1;return o.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(E=>{(o.type==="arrayBuffer"||o.type==="image"?E.arrayBuffer():o.type==="json"?E.json():E.text()).then(P=>{v||(p=!0,n(null,P,E.headers.get("Cache-Control"),E.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(x):x.blob().then(E=>n(new gt(x.status,x.statusText,o.url,E)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,p||s.abort()}}}const $t=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!ne())return(ht(o.url)||Et)(o,n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(Ct())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Et(o,n);if(ne()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var s;return function(h,p){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(E){return p(E)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new gt(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(o,n)},Nt=function(o,n){return $t(k(o,{type:"arrayBuffer"}),n)};function hn(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Tn(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function En(o,n,s){if(s&&s[o]){const h=s[o].indexOf(n);h!==-1&&s[o].splice(h,1)}}class rn{constructor(n,s={}){k(this,s),this.type=n}}class xn extends rn{constructor(n,s={}){super("error",k({error:n},s))}}class Te{on(n,s){return this._listeners=this._listeners||{},Tn(n,s,this._listeners),this}off(n,s){return En(n,s,this._listeners),En(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Tn(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new rn(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const E of p)E.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const E of v)En(h,E,this._oneTimeListeners),E.call(this,n);const x=this._eventedParent;x&&(k(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof xn&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var M={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const R=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ve(o,n){const s={};for(const h in o)h!=="ref"&&(s[h]=o[h]);return R.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Ne(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Ne(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Ne(o[s],n[s]))return!1;return!0}return o===n}const qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function lt(o,n,s){s.push({command:qe.addSource,args:[o,n[o]]})}function le(o,n,s){n.push({command:qe.removeSource,args:[o]}),s[o]=!0}function F(o,n,s,h){le(o,s,h),lt(o,n,s)}function N(o,n,s){let h;for(h in o[s])if(Object.prototype.hasOwnProperty.call(o[s],h)&&h!=="data"&&!Ne(o[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Ne(o[s][h],n[s][h]))return!1;return!0}function Ee(o,n,s,h,p,v){let x;for(x in n=n||{},o=o||{})Object.prototype.hasOwnProperty.call(o,x)&&(Ne(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(o,x)&&(Ne(o[x],n[x])||s.push({command:v,args:[h,x,n[x],p]}))}function Ge(o){return o.id}function tt(o,n){return o[n.id]=n,o}class Ve{constructor(n,s,h,p){this.message=(n?`${n}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Dt(o,...n){for(const s of n)for(const h in s)o[h]=s[h];return o}class vn extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class Sn{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,p]of s)this.bindings[h]=p}concat(n){return new Sn(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Mn={kind:"null"},ft={kind:"number"},cn={kind:"string"},fn={kind:"boolean"},Er={kind:"color"},Xr={kind:"object"},Qt={kind:"value"},co={kind:"collator"},ke={kind:"formatted"},oe={kind:"padding"},se={kind:"resolvedImage"},fe={kind:"variableAnchorOffsetCollection"};function be(o,n){return{kind:"array",itemType:o,N:n}}function Le(o){if(o.kind==="array"){const n=Le(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const Xe=[Mn,ft,cn,fn,Er,ke,Xr,be(Qt),oe,se,fe];function $e(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!$e(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of Xe)if(!$e(s,n))return null}}return`Expected ${Le(o)} but found ${Le(n)} instead.`}function je(o,n){return n.some(s=>s.kind===o.kind)}function Ye(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function ct(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const dt=.96422,yt=.82521,Xt=4/29,nn=6/29,Bt=3*nn*nn,Wt=nn*nn*nn,mn=Math.PI/180,On=180/Math.PI;function Wn(o){return(o%=360)<0&&(o+=360),o}function Rn([o,n,s,h]){let p,v;const x=qr((.2225045*(o=kn(o))+.7168786*(n=kn(n))+.0606169*(s=kn(s)))/1);o===n&&n===s?p=v=x:(p=qr((.4360747*o+.3850649*n+.1430804*s)/dt),v=qr((.0139322*o+.0971045*n+.7141733*s)/yt));const E=116*x-16;return[E<0?0:E,500*(p-x),200*(x-v),h]}function kn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function qr(o){return o>Wt?Math.pow(o,1/3):o/Bt+Xt}function Jn([o,n,s,h]){let p=(o+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(s)?p:p-s/200;return p=1*or(p),v=dt*or(v),x=yt*or(x),[pr(3.1338561*v-1.6168667*p-.4906146*x),pr(-.9787684*v+1.9161415*p+.033454*x),pr(.0719453*v-.2289914*p+1.4052427*x),h]}function pr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function or(o){return o>nn?o*o*o:Bt*(o-Xt)}function Ci(o){return parseInt(o.padEnd(2,o),16)/255}function au(o,n){return _n(n?o/100:o,0,1)}function _n(o,n,s){return Math.min(Math.max(n,o),s)}function Go(o){return!o.some(Number.isNaN)}const Fh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Zn{constructor(n,s,h,p=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,s,h,p]))}static parse(n){if(n instanceof Zn)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Fh[h];if(p){const[x,E,P]=p;return[x/255,E/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let E=1;return[Ci(h.slice(E,E+=x)),Ci(h.slice(E,E+=x)),Ci(h.slice(E,E+=x)),Ci(h.slice(E,E+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,P,O,H,J,ae,he,pe,Ie,Oe,Be,Qe]=x,We=[H||" ",he||" ",Oe].join("");if(We==="  "||We==="  /"||We===",,"||We===",,,"){const et=[O,ae,Ie].join(""),it=et==="%%%"?100:et===""?255:0;if(it){const vt=[_n(+P/it,0,1),_n(+J/it,0,1),_n(+pe/it,0,1),Be?au(+Be,Qe):1];if(Go(vt))return vt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,E,P,O,H,J,ae,he,pe]=v,Ie=[P||" ",H||" ",ae].join("");if(Ie==="  "||Ie==="  /"||Ie===",,"||Ie===",,,"){const Oe=[+E,_n(+O,0,100),_n(+J,0,100),he?au(+he,pe):1];if(Go(Oe))return function([Be,Qe,We,et]){function it(vt){const Ft=(vt+Be/30)%12,Vt=Qe*Math.min(We,1-We);return We-Vt*Math.max(-1,Math.min(Ft-3,9-Ft,1))}return Be=Wn(Be),Qe/=100,We/=100,[it(0),it(8),it(4),et]}(Oe)}}}(n);return s?new Zn(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,p,v]=Rn(n),x=Math.sqrt(h*h+p*p);return[Math.round(1e4*x)?Wn(Math.atan2(p,h)*On):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Rn(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,p]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${p})`}}Zn.black=new Zn(0,0,0,1),Zn.white=new Zn(1,1,1,1),Zn.transparent=new Zn(0,0,0,0),Zn.red=new Zn(1,0,0,1);class Ja{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class js{constructor(n,s,h,p,v){this.text=n,this.image=s,this.scale=h,this.fontStack=p,this.textColor=v}}class fi{constructor(n){this.sections=n}static fromString(n){return new fi([new js(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof fi?n:fi.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class mr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof mr)return n;if(typeof n=="number")return new mr([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new mr(n)}}toString(){return JSON.stringify(this.values)}}const Oh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Br{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Br)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],p=n[s+1];if(typeof h!="string"||!Oh.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Br(n)}}toString(){return JSON.stringify(this.values)}}class ri{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ri({name:n,available:!1}):null}}function Qa(o,n,s,h){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[o,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[o,n,s,h]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Zn||o instanceof Ja||o instanceof fi||o instanceof mr||o instanceof Br||o instanceof ri)return!0;if(Array.isArray(o)){for(const n of o)if(!Zo(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!Zo(o[n]))return!1;return!0}return!1}function on(o){if(o===null)return Mn;if(typeof o=="string")return cn;if(typeof o=="boolean")return fn;if(typeof o=="number")return ft;if(o instanceof Zn)return Er;if(o instanceof Ja)return co;if(o instanceof fi)return ke;if(o instanceof mr)return oe;if(o instanceof Br)return fe;if(o instanceof ri)return se;if(Array.isArray(o)){const n=o.length;let s;for(const h of o){const p=on(h);if(s){if(s===p)continue;s=Qt;break}s=p}return be(s||Qt,n)}return Xr}function ya(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Zn||o instanceof fi||o instanceof mr||o instanceof Br||o instanceof ri?o.toString():JSON.stringify(o)}class Eo{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Zo(n[1]))return s.error("invalid value");const h=n[1];let p=on(h);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Eo(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class gr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const va={string:cn,number:ft,boolean:fn,object:Xr};class Ai{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,p=1;const v=n[0];if(v==="array"){let E,P;if(n.length>2){const O=n[1];if(typeof O!="string"||!(O in va)||O==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);E=va[O],p++}else E=Qt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);P=n[2],p++}h=be(E,P)}else{if(!va[v])throw new Error(`Types doesn't contain name = ${v}`);h=va[v]}const x=[];for(;p<n.length;p++){const E=s.parse(n[p],p,Qt);if(!E)return null;x.push(E)}return new Ai(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!$e(this.type,on(h)))return h;if(s===this.args.length-1)throw new gr(`Expected value to be of type ${Le(this.type)}, but found ${Le(on(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const _a={"to-boolean":fn,"to-color":Er,"to-number":ft,"to-string":cn};class So{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!_a[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const p=_a[h],v=[];for(let x=1;x<n.length;x++){const E=s.parse(n[x],x,Qt);if(!E)return null;v.push(E)}return new So(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const p of this.args){if(s=p.evaluate(n),h=null,s instanceof Zn)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Qa(s[0],s[1],s[2],s[3]),!h))return new Zn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new gr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const p=mr.parse(s);if(p)return p}throw new gr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const p=Br.parse(s);if(p)return p}throw new gr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new gr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return fi.fromString(ya(this.args[0].evaluate(n)));case"resolvedImage":return ri.fromString(ya(this.args[0].evaluate(n)));default:return ya(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const ac=["Unknown","Point","LineString","Polygon"];class Ii{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ac[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Zn.parse(n)),s}}class el{constructor(n,s,h=[],p,v=new Sn,x=[]){this.registry=n,this.path=h,this.key=h.map(E=>`[${E}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=s}parse(n,s,h,p,v={}){return s?this.concat(s,h,p)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(p,v,x){return x==="assert"?new Ai(v,[p]):x==="coerce"?new So(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,P=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||P.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(E.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(E.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(E,P))return null}else x=h(x,E,s.typeAnnotation||"coerce");else x=h(x,E,s.typeAnnotation||"coerce");else x=h(x,E,s.typeAnnotation||"coerce");else x=h(x,E,s.typeAnnotation||"assert")}if(!(x instanceof Eo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new Ii;try{x=new Eo(x.type,x.evaluate(E))}catch(P){return this.error(P.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const p=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new el(this.registry,this._isConstant,p,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new vn(h,n))}checkSubtype(n,s){const h=$e(n,s);return h&&this.error(h),h}}class tl{constructor(n,s,h){this.type=co,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,fn);if(!p)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,fn);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,cn),!x)?null:new tl(p,v,x)}evaluate(n){return new Ja(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Wo=8192;function nl(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function xa(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function lc(o,n){const s=(180+o[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(s*p*Wo),Math.round(h*p*Wo)]}function lu(o,n,s){const h=o[0]-n[0],p=o[1]-n[1],v=o[0]-s[0],x=o[1]-s[1];return h*x-v*p==0&&h*v<=0&&p*x<=0}function Ds(o,n){let s=!1;for(let x=0,E=n.length;x<E;x++){const P=n[x];for(let O=0,H=P.length;O<H-1;O++){if(lu(o,P[O],P[O+1]))return!1;(p=P[O])[1]>(h=o)[1]!=(v=P[O+1])[1]>h[1]&&h[0]<(v[0]-p[0])*(h[1]-p[1])/(v[1]-p[1])+p[0]&&(s=!s)}}var h,p,v;return s}function rl(o,n){for(let s=0;s<n.length;s++)if(Ds(o,n[s]))return!0;return!1}function uc(o,n,s,h){const p=h[0]-s[0],v=h[1]-s[1],x=(o[0]-s[0])*v-p*(o[1]-s[1]),E=(n[0]-s[0])*v-p*(n[1]-s[1]);return x>0&&E<0||x<0&&E>0}function Bs(o,n,s){for(const O of s)for(let H=0;H<O.length-1;++H)if((E=[(x=O[H+1])[0]-(v=O[H])[0],x[1]-v[1]])[0]*(P=[(p=n)[0]-(h=o)[0],p[1]-h[1]])[1]-E[1]*P[0]!=0&&uc(h,p,v,x)&&uc(v,x,h,p))return!0;var h,p,v,x,E,P;return!1}function uu(o,n){for(let s=0;s<o.length;++s)if(!Ds(o[s],n))return!1;for(let s=0;s<o.length-1;++s)if(Bs(o[s],o[s+1],n))return!1;return!0}function cc(o,n){for(let s=0;s<n.length;s++)if(uu(o,n[s]))return!0;return!1}function cu(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=[];for(let x=0;x<o[p].length;x++){const E=lc(o[p][x],s);nl(n,E),v.push(E)}h.push(v)}return h}function hc(o,n,s){const h=[];for(let p=0;p<o.length;p++){const v=cu(o[p],n,s);h.push(v)}return h}function il(o,n,s,h){if(o[0]<s[0]||o[0]>s[2]){const p=.5*h;let v=o[0]-s[0]>p?-h:s[0]-o[0]>p?h:0;v===0&&(v=o[0]-s[2]>p?-h:s[2]-o[0]>p?h:0),o[0]+=v}nl(n,o)}function hu(o,n,s,h){const p=Math.pow(2,h.z)*Wo,v=[h.x*Wo,h.y*Wo],x=[];for(const E of o)for(const P of E){const O=[P.x+v[0],P.y+v[1]];il(O,n,s,p),x.push(O)}return x}function fc(o,n,s,h){const p=Math.pow(2,h.z)*Wo,v=[h.x*Wo,h.y*Wo],x=[];for(const P of o){const O=[];for(const H of P){const J=[H.x+v[0],H.y+v[1]];nl(n,J),O.push(J)}x.push(O)}if(n[2]-n[0]<=p/2){(E=n)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const P of x)for(const O of P)il(O,n,s,p)}var E;return x}class fs{constructor(n,s){this.type=fn,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Zo(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const v=h.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new fs(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new fs(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new fs(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const E=cu(h.coordinates,v,x),P=hu(s.geometry(),p,v,x);if(!xa(p,v))return!1;for(const O of P)if(!Ds(O,E))return!1}if(h.type==="MultiPolygon"){const E=hc(h.coordinates,v,x),P=hu(s.geometry(),p,v,x);if(!xa(p,v))return!1;for(const O of P)if(!rl(O,E))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const E=cu(h.coordinates,v,x),P=fc(s.geometry(),p,v,x);if(!xa(p,v))return!1;for(const O of P)if(!uu(O,E))return!1}if(h.type==="MultiPolygon"){const E=hc(h.coordinates,v,x),P=fc(s.geometry(),p,v,x);if(!xa(p,v))return!1;for(const O of P)if(!cc(O,E))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ns{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Ns(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Pi{constructor(n,s,h,p){this.name=n,this.type=s,this._evaluate=h,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],p=Pi.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,E=x.filter(([O])=>!Array.isArray(O)||O.length===n.length-1);let P=null;for(const[O,H]of E){P=new el(s.registry,ol,s.path,null,s.scope);const J=[];let ae=!1;for(let he=1;he<n.length;he++){const pe=n[he],Ie=Array.isArray(O)?O[he-1]:O.type,Oe=P.parse(pe,1+J.length,Ie);if(!Oe){ae=!0;break}J.push(Oe)}if(!ae)if(Array.isArray(O)&&O.length!==J.length)P.error(`Expected ${O.length} arguments, but found ${J.length} instead.`);else{for(let he=0;he<J.length;he++){const pe=Array.isArray(O)?O[he]:O.type,Ie=J[he];P.concat(he+1).checkSubtype(pe,Ie.type)}if(P.errors.length===0)return new Pi(h,v,H,J)}}if(E.length===1)s.errors.push(...P.errors);else{const O=(E.length?E:x).map(([J])=>{return ae=J,Array.isArray(ae)?`(${ae.map(Le).join(", ")})`:`(${Le(ae.type)}...)`;var ae}).join(" | "),H=[];for(let J=1;J<n.length;J++){const ae=s.parse(n[J],1+H.length);if(!ae)return null;H.push(Le(ae.type))}s.error(`Expected arguments of type ${O}, but found (${H.join(", ")}) instead.`)}return null}static register(n,s){Pi.definitions=s;for(const h in s)n[h]=Pi}}function ol(o){if(o instanceof Ns)return ol(o.boundExpression);if(o instanceof Pi&&o.name==="error"||o instanceof tl||o instanceof fs)return!1;const n=o instanceof So||o instanceof Ai;let s=!0;return o.eachChild(h=>{s=n?s&&ol(h):s&&h instanceof Eo}),!!s&&sl(o)&&ds(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function sl(o){if(o instanceof Pi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof fs)return!1;let n=!0;return o.eachChild(s=>{n&&!sl(s)&&(n=!1)}),n}function wa(o){if(o instanceof Pi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!wa(s)&&(n=!1)}),n}function ds(o,n){if(o instanceof Pi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(h=>{s&&!ds(h,n)&&(s=!1)}),s}function ps(o,n){const s=o.length-1;let h,p,v=0,x=s,E=0;for(;v<=x;)if(E=Math.floor((v+x)/2),h=o[E],p=o[E+1],h<=n){if(E===s||n<p)return E;v=E+1}else{if(!(h>n))throw new gr("Input is not a number.");x=E-1}return 0}class Ln{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of h)this.labels.push(p),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,ft);if(!h)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const E=x===1?-1/0:n[x],P=n[x+1],O=x,H=x+1;if(typeof E!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(p.length&&p[p.length-1][0]>=E)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const J=s.parse(P,H,v);if(!J)return null;v=v||J.type,p.push([E,J])}return new Ln(v,h,p)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;return p>=s[v-1]?h[v-1].evaluate(n):h[ps(s,p)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ms(o,n,s){return o+s*(n-o)}function al(o,n,s){return o.map((h,p)=>ms(h,n[p],s))}const ii={number:ms,color:function(o,n,s,h="rgb"){switch(h){case"rgb":{const[p,v,x,E]=al(o.rgb,n.rgb,s);return new Zn(p,v,x,E,!1)}case"hcl":{const[p,v,x,E]=o.hcl,[P,O,H,J]=n.hcl;let ae,he;if(isNaN(p)||isNaN(P))isNaN(p)?isNaN(P)?ae=NaN:(ae=P,x!==1&&x!==0||(he=O)):(ae=p,H!==1&&H!==0||(he=v));else{let Qe=P-p;P>p&&Qe>180?Qe-=360:P<p&&p-P>180&&(Qe+=360),ae=p+s*Qe}const[pe,Ie,Oe,Be]=function([Qe,We,et,it]){return Qe=isNaN(Qe)?0:Qe*mn,Jn([et,Math.cos(Qe)*We,Math.sin(Qe)*We,it])}([ae,he??ms(v,O,s),ms(x,H,s),ms(E,J,s)]);return new Zn(pe,Ie,Oe,Be,!1)}case"lab":{const[p,v,x,E]=Jn(al(o.lab,n.lab,s));return new Zn(p,v,x,E,!1)}}},array:al,padding:function(o,n,s){return new mr(al(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const h=o.values,p=n.values;if(h.length!==p.length)throw new gr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==p[x])throw new gr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${p[x]}`);v.push(h[x]);const[E,P]=h[x+1],[O,H]=p[x+1];v.push([ms(E,O,s),ms(P,H,s)])}return new Br(v)}};class di{constructor(n,s,h,p,v){this.type=n,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[x,E]of v)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(n,s,h,p){let v=0;if(n.name==="exponential")v=fu(s,n.base,h,p);else if(n.name==="linear")v=fu(s,1,h,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new Y(x[0],x[1],x[2],x[3]).solve(fu(s,1,h,p))}return v}static parse(n,s){let[h,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const O=p[1];if(typeof O!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:O}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const O=p.slice(1);if(O.length!==4||O.some(H=>typeof H!="number"||H<0||H>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:O}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,ft),!v)return null;const E=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=Er:s.expectedType&&s.expectedType.kind!=="value"&&(P=s.expectedType);for(let O=0;O<x.length;O+=2){const H=x[O],J=x[O+1],ae=O+3,he=O+4;if(typeof H!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(E.length&&E[E.length-1][0]>=H)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ae);const pe=s.parse(J,he,P);if(!pe)return null;P=P||pe.type,E.push([H,pe])}return ct(P,ft)||ct(P,Er)||ct(P,oe)||ct(P,fe)||ct(P,be(ft))?new di(P,h,p,v,E):s.error(`Type ${Le(P)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const p=this.input.evaluate(n);if(p<=s[0])return h[0].evaluate(n);const v=s.length;if(p>=s[v-1])return h[v-1].evaluate(n);const x=ps(s,p),E=di.interpolationFactor(this.interpolation,p,s[x],s[x+1]),P=h[x].evaluate(n),O=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return ii[this.type.kind](P,O,E);case"interpolate-hcl":return ii.color(P,O,E,"hcl");case"interpolate-lab":return ii.color(P,O,E,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function fu(o,n,s,h){const p=h-s,v=o-s;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class ll{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const p=s.expectedType;p&&p.kind!=="value"&&(h=p);const v=[];for(const E of n.slice(1)){const P=s.parse(E,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const x=p&&v.some(E=>$e(p,E.type));return new ll(x?Qt:h,v)}evaluate(n){let s,h=null,p=0;for(const v of this.args)if(p++,h=v.evaluate(n),h&&h instanceof ri&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class ul{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const E=s.parse(n[v+1],v+1);if(!E)return null;h.push([x,E])}const p=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return p?new ul(h,p):null}outputDefined(){return this.result.outputDefined()}}class cl{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,ft),p=s.parse(n[2],2,be(s.expectedType||Qt));return h&&p?new cl(p.type.itemType,h,p):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new gr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new gr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new gr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class du{constructor(n,s){this.type=fn,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Qt),p=s.parse(n[2],2,Qt);return h&&p?je(h.type,[fn,cn,ft,Mn,Qt])?new du(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Le(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ye(s,["boolean","string","number","null"]))throw new gr(`Expected first argument to be of type boolean, string, number or null, but found ${Le(on(s))} instead.`);if(!Ye(h,["string","array"]))throw new gr(`Expected second argument to be of type array or string, but found ${Le(on(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Us{constructor(n,s,h){this.type=ft,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Qt),p=s.parse(n[2],2,Qt);if(!h||!p)return null;if(!je(h.type,[fn,cn,ft,Mn,Qt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Le(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,ft);return v?new Us(h,p,v):null}return new Us(h,p)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ye(s,["boolean","string","number","null"]))throw new gr(`Expected first argument to be of type boolean, string, number or null, but found ${Le(on(s))} instead.`);if(!Ye(h,["string","array"]))throw new gr(`Expected second argument to be of type array or string, but found ${Le(on(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return h.indexOf(s,p)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class pu{constructor(n,s,h,p,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},x=[];for(let O=2;O<n.length-1;O+=2){let H=n[O];const J=n[O+1];Array.isArray(H)||(H=[H]);const ae=s.concat(O);if(H.length===0)return ae.error("Expected at least one branch label.");for(const pe of H){if(typeof pe!="number"&&typeof pe!="string")return ae.error("Branch labels must be numbers or strings.");if(typeof pe=="number"&&Math.abs(pe)>Number.MAX_SAFE_INTEGER)return ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof pe=="number"&&Math.floor(pe)!==pe)return ae.error("Numeric branch labels must be integer values.");if(h){if(ae.checkSubtype(h,on(pe)))return null}else h=on(pe);if(v[String(pe)]!==void 0)return ae.error("Branch labels must be unique.");v[String(pe)]=x.length}const he=s.parse(J,O,p);if(!he)return null;p=p||he.type,x.push(he)}const E=s.parse(n[1],1,Qt);if(!E)return null;const P=s.parse(n[n.length-1],n.length-1,p);return P?E.type.kind!=="value"&&s.concat(1).checkSubtype(h,E.type)?null:new pu(h,p,E,v,x,P):null}evaluate(n){const s=this.input.evaluate(n);return(on(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class mu{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const E=s.parse(n[x],x,fn);if(!E)return null;const P=s.parse(n[x+1],x+1,h);if(!P)return null;p.push([E,P]),h=h||P.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new mu(h,p,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class hl{constructor(n,s,h,p){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Qt),p=s.parse(n[2],2,ft);if(!h||!p)return null;if(!je(h.type,[be(Qt),cn,Qt]))return s.error(`Expected first argument to be of type array or string, but found ${Le(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,ft);return v?new hl(h.type,h,p,v):null}return new hl(h.type,h,p)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ye(s,["string","array"]))throw new gr(`Expected first argument to be of type array or string, but found ${Le(on(s))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return s.slice(h,p)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function dc(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function pc(o,n,s,h){return h.compare(n,s)===0}function $s(o,n,s){const h=o!=="=="&&o!=="!=";return class rC{constructor(v,x,E){this.type=fn,this.lhs=v,this.rhs=x,this.collator=E,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const E=v[0];let P=x.parse(v[1],1,Qt);if(!P)return null;if(!dc(E,P.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${Le(P.type)}'.`);let O=x.parse(v[2],2,Qt);if(!O)return null;if(!dc(E,O.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${Le(O.type)}'.`);if(P.type.kind!==O.type.kind&&P.type.kind!=="value"&&O.type.kind!=="value")return x.error(`Cannot compare types '${Le(P.type)}' and '${Le(O.type)}'.`);h&&(P.type.kind==="value"&&O.type.kind!=="value"?P=new Ai(O.type,[P]):P.type.kind!=="value"&&O.type.kind==="value"&&(O=new Ai(P.type,[O])));let H=null;if(v.length===4){if(P.type.kind!=="string"&&O.type.kind!=="string"&&P.type.kind!=="value"&&O.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(H=x.parse(v[3],3,co),!H)return null}return new rC(P,O,H)}evaluate(v){const x=this.lhs.evaluate(v),E=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=on(x),O=on(E);if(P.kind!==O.kind||P.kind!=="string"&&P.kind!=="number")throw new gr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${P.kind}, ${O.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=on(x),O=on(E);if(P.kind!=="string"||O.kind!=="string")return n(v,x,E)}return this.collator?s(v,x,E,this.collator.evaluate(v)):n(v,x,E)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const mc=$s("==",function(o,n,s){return n===s},pc),gu=$s("!=",function(o,n,s){return n!==s},function(o,n,s,h){return!pc(0,n,s,h)}),Rh=$s("<",function(o,n,s){return n<s},function(o,n,s,h){return h.compare(n,s)<0}),jh=$s(">",function(o,n,s){return n>s},function(o,n,s,h){return h.compare(n,s)>0}),Dh=$s("<=",function(o,n,s){return n<=s},function(o,n,s,h){return h.compare(n,s)<=0}),Bh=$s(">=",function(o,n,s){return n>=s},function(o,n,s,h){return h.compare(n,s)>=0});class fl{constructor(n,s,h,p,v){this.type=cn,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,ft);if(!h)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,cn),!v))return null;let x=null;if(p.currency&&(x=s.parse(p.currency,1,cn),!x))return null;let E=null;if(p["min-fraction-digits"]&&(E=s.parse(p["min-fraction-digits"],1,ft),!E))return null;let P=null;return p["max-fraction-digits"]&&(P=s.parse(p["max-fraction-digits"],1,ft),!P)?null:new fl(h,v,x,E,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class dl{constructor(n){this.type=ke,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const E=n[x];if(v&&typeof E=="object"&&!Array.isArray(E)){v=!1;let P=null;if(E["font-scale"]&&(P=s.parse(E["font-scale"],1,ft),!P))return null;let O=null;if(E["text-font"]&&(O=s.parse(E["text-font"],1,be(cn)),!O))return null;let H=null;if(E["text-color"]&&(H=s.parse(E["text-color"],1,Er),!H))return null;const J=p[p.length-1];J.scale=P,J.font=O,J.textColor=H}else{const P=s.parse(n[x],1,Qt);if(!P)return null;const O=P.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:P,scale:null,font:null,textColor:null})}}return new dl(p)}evaluate(n){return new fi(this.sections.map(s=>{const h=s.content.evaluate(n);return on(h)===se?new js("",h,null,null,null):new js(ya(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class yu{constructor(n){this.type=se,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,cn);return h?new yu(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=ri.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class vu{constructor(n){this.type=ft,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Le(h.type)} instead.`):new vu(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new gr(`Expected value to be of type string or array, but found ${Le(on(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Vs={"==":mc,"!=":gu,">":jh,"<":Rh,">=":Bh,"<=":Dh,array:Ai,at:cl,boolean:Ai,case:mu,coalesce:ll,collator:tl,format:dl,image:yu,in:du,"index-of":Us,interpolate:di,"interpolate-hcl":di,"interpolate-lab":di,length:vu,let:ul,literal:Eo,match:pu,number:Ai,"number-format":fl,object:Ai,slice:hl,step:Ln,string:Ai,"to-boolean":So,"to-color":So,"to-number":So,"to-string":So,var:Ns,within:fs};function ba(o,[n,s,h,p]){n=n.evaluate(o),s=s.evaluate(o),h=h.evaluate(o);const v=p?p.evaluate(o):1,x=Qa(n,s,h,v);if(x)throw new gr(x);return new Zn(n/255,s/255,h/255,v,!1)}function gc(o,n){return o in n}function Ho(o,n){const s=n[o];return s===void 0?null:s}function Xo(o){return{type:o}}function pi(o){return{result:"success",value:o}}function Gs(o){return{result:"error",value:o}}function Zs(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function yc(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function _u(o){return!!o.expression&&o.expression.interpolated}function ln(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function pl(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Cn(o){return o}function ml(o,n){const s=n.type==="color",h=o.stops&&typeof o.stops[0][0]=="object",p=h||!(h||o.property!==void 0),v=o.type||(_u(n)?"exponential":"interval");if(s||n.type==="padding"){const H=s?Zn.parse:mr.parse;(o=Dt({},o)).stops&&(o.stops=o.stops.map(J=>[J[0],H(J[1])])),o.default=H(o.default?o.default:n.default)}if(o.colorSpace&&(x=o.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var x;let E,P,O;if(v==="exponential")E=gl;else if(v==="interval")E=Ea;else if(v==="categorical"){E=Kn,P=Object.create(null);for(const H of o.stops)P[H[0]]=H[1];O=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);E=Nh}if(h){const H={},J=[];for(let pe=0;pe<o.stops.length;pe++){const Ie=o.stops[pe],Oe=Ie[0].zoom;H[Oe]===void 0&&(H[Oe]={zoom:Oe,type:o.type,property:o.property,default:o.default,stops:[]},J.push(Oe)),H[Oe].stops.push([Ie[0].value,Ie[1]])}const ae=[];for(const pe of J)ae.push([H[pe].zoom,ml(H[pe],n)]);const he={name:"linear"};return{kind:"composite",interpolationType:he,interpolationFactor:di.interpolationFactor.bind(void 0,he),zoomStops:ae.map(pe=>pe[0]),evaluate:({zoom:pe},Ie)=>gl({stops:ae,base:o.base},n,pe).evaluate(pe,Ie)}}if(p){const H=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:di.interpolationFactor.bind(void 0,H),zoomStops:o.stops.map(J=>J[0]),evaluate:({zoom:J})=>E(o,n,J,P,O)}}return{kind:"source",evaluate(H,J){const ae=J&&J.properties?J.properties[o.property]:void 0;return ae===void 0?qn(o.default,n.default):E(o,n,ae,P,O)}}}function qn(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Kn(o,n,s,h,p){return qn(typeof s===p?h[s]:void 0,o.default,n.default)}function Ea(o,n,s){if(ln(s)!=="number")return qn(o.default,n.default);const h=o.stops.length;if(h===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[h-1][0])return o.stops[h-1][1];const p=ps(o.stops.map(v=>v[0]),s);return o.stops[p][1]}function gl(o,n,s){const h=o.base!==void 0?o.base:1;if(ln(s)!=="number")return qn(o.default,n.default);const p=o.stops.length;if(p===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[p-1][0])return o.stops[p-1][1];const v=ps(o.stops.map(H=>H[0]),s),x=function(H,J,ae,he){const pe=he-ae,Ie=H-ae;return pe===0?0:J===1?Ie/pe:(Math.pow(J,Ie)-1)/(Math.pow(J,pe)-1)}(s,h,o.stops[v][0],o.stops[v+1][0]),E=o.stops[v][1],P=o.stops[v+1][1],O=ii[n.type]||Cn;return typeof E.evaluate=="function"?{evaluate(...H){const J=E.evaluate.apply(void 0,H),ae=P.evaluate.apply(void 0,H);if(J!==void 0&&ae!==void 0)return O(J,ae,x,o.colorSpace)}}:O(E,P,x,o.colorSpace)}function Nh(o,n,s){switch(n.type){case"color":s=Zn.parse(s);break;case"formatted":s=fi.fromString(s.toString());break;case"resolvedImage":s=ri.fromString(s.toString());break;case"padding":s=mr.parse(s);break;default:ln(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return qn(s,o.default,n.default)}Pi.register(Vs,{error:[{kind:"error"},[cn],(o,[n])=>{throw new gr(n.evaluate(o))}],typeof:[cn,[Qt],(o,[n])=>Le(on(n.evaluate(o)))],"to-rgba":[be(ft,4),[Er],(o,[n])=>{const[s,h,p,v]=n.evaluate(o).rgb;return[255*s,255*h,255*p,v]}],rgb:[Er,[ft,ft,ft],ba],rgba:[Er,[ft,ft,ft,ft],ba],has:{type:fn,overloads:[[[cn],(o,[n])=>gc(n.evaluate(o),o.properties())],[[cn,Xr],(o,[n,s])=>gc(n.evaluate(o),s.evaluate(o))]]},get:{type:Qt,overloads:[[[cn],(o,[n])=>Ho(n.evaluate(o),o.properties())],[[cn,Xr],(o,[n,s])=>Ho(n.evaluate(o),s.evaluate(o))]]},"feature-state":[Qt,[cn],(o,[n])=>Ho(n.evaluate(o),o.featureState||{})],properties:[Xr,[],o=>o.properties()],"geometry-type":[cn,[],o=>o.geometryType()],id:[Qt,[],o=>o.id()],zoom:[ft,[],o=>o.globals.zoom],"heatmap-density":[ft,[],o=>o.globals.heatmapDensity||0],"line-progress":[ft,[],o=>o.globals.lineProgress||0],accumulated:[Qt,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[ft,Xo(ft),(o,n)=>{let s=0;for(const h of n)s+=h.evaluate(o);return s}],"*":[ft,Xo(ft),(o,n)=>{let s=1;for(const h of n)s*=h.evaluate(o);return s}],"-":{type:ft,overloads:[[[ft,ft],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[ft],(o,[n])=>-n.evaluate(o)]]},"/":[ft,[ft,ft],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[ft,[ft,ft],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[ft,[ft],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))],log2:[ft,[ft],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[ft,[ft],(o,[n])=>Math.sin(n.evaluate(o))],cos:[ft,[ft],(o,[n])=>Math.cos(n.evaluate(o))],tan:[ft,[ft],(o,[n])=>Math.tan(n.evaluate(o))],asin:[ft,[ft],(o,[n])=>Math.asin(n.evaluate(o))],acos:[ft,[ft],(o,[n])=>Math.acos(n.evaluate(o))],atan:[ft,[ft],(o,[n])=>Math.atan(n.evaluate(o))],min:[ft,Xo(ft),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[ft,Xo(ft),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[ft,[ft],(o,[n])=>Math.abs(n.evaluate(o))],round:[ft,[ft],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[ft,[ft],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[ft,[ft],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[fn,[cn,Qt],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[fn,[Qt],(o,[n])=>o.id()===n.value],"filter-type-==":[fn,[cn],(o,[n])=>o.geometryType()===n.value],"filter-<":[fn,[cn,Qt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[fn,[Qt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[fn,[cn,Qt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[fn,[Qt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[fn,[cn,Qt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[fn,[Qt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[fn,[cn,Qt],(o,[n,s])=>{const h=o.properties()[n.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[fn,[Qt],(o,[n])=>{const s=o.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[fn,[Qt],(o,[n])=>n.value in o.properties()],"filter-has-id":[fn,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[fn,[be(cn)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[fn,[be(Qt)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[fn,[cn,be(Qt)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[fn,[cn,be(Qt)],(o,[n,s])=>function(h,p,v,x){for(;v<=x;){const E=v+x>>1;if(p[E]===h)return!0;p[E]>h?x=E-1:v=E+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:fn,overloads:[[[fn,fn],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Xo(fn),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:fn,overloads:[[[fn,fn],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Xo(fn),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[fn,[fn],(o,[n])=>!n.evaluate(o)],"is-supported-script":[fn,[cn],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[cn,[cn],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[cn,[cn],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[cn,Xo(Qt),(o,n)=>n.map(s=>ya(s.evaluate(o))).join("")],"resolved-locale":[cn,[co],(o,[n])=>n.evaluate(o).resolvedLocale()]});class xu{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Ii,this._defaultValue=s?(h=s).type==="color"&&pl(h.default)?new Zn(0,0,0,0):h.type==="color"?Zn.parse(h.default)||null:h.type==="padding"?mr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Br.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,p,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new gr(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function gs(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Vs}function ho(o,n){const s=new el(Vs,ol,[],n?function(p){const v={color:Er,string:cn,number:ft,enum:cn,boolean:fn,formatted:ke,padding:oe,resolvedImage:se,variableAnchorOffsetCollection:fe};return p.type==="array"?be(v[p.value]||Qt,p.length):v[p.type]}(n):void 0),h=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?pi(new xu(h,n)):Gs(s.errors)}class yl{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!wa(s.expression)}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}}class Sa{constructor(n,s,h,p){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!wa(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,s,h,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,p,v,x)}evaluate(n,s,h,p,v,x){return this._styleExpression.evaluate(n,s,h,p,v,x)}interpolationFactor(n,s,h){return this.interpolationType?di.interpolationFactor(this.interpolationType,n,s,h):0}}function Ws(o,n){const s=ho(o,n);if(s.result==="error")return s;const h=s.value.expression,p=sl(h);if(!p&&!Zs(n))return Gs([new vn("","data expressions not supported")]);const v=ds(h,["zoom"]);if(!v&&!yc(n))return Gs([new vn("","zoom expressions not supported")]);const x=Gi(h);return x||v?x instanceof vn?Gs([x]):x instanceof di&&!_u(n)?Gs([new vn("",'"interpolate" expressions cannot be used with this property')]):pi(x?new Sa(p?"camera":"composite",s.value,x.labels,x instanceof di?x.interpolation:void 0):new yl(p?"constant":"source",s.value)):Gs([new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ta{constructor(n,s){this._parameters=n,this._specification=s,Dt(this,ml(this._parameters,this._specification))}static deserialize(n){return new Ta(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Gi(o){let n=null;if(o instanceof ul)n=Gi(o.result);else if(o instanceof ll){for(const s of o.args)if(n=Gi(s),n)break}else(o instanceof Ln||o instanceof di)&&o.input instanceof Pi&&o.input.name==="zoom"&&(n=o);return n instanceof vn||o.eachChild(s=>{const h=Gi(s);h instanceof vn?n=h:!n&&h?n=new vn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new vn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function qo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!qo(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Jr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function To(o){if(o==null)return{filter:()=>!0,needGeometry:!1};qo(o)||(o=_l(o));const n=ho(o,Jr);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>n.value.evaluate(s,h,{},p),needGeometry:vl(o)}}function wu(o,n){return o<n?-1:o>n?1:0}function vl(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(vl(o[n]))return!0;return!1}function _l(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?Hs(o[1],o[2],"=="):n==="!="?fo(Hs(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Hs(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(_l))):n==="all"?["all"].concat(o.slice(1).map(_l)):n==="none"?["all"].concat(o.slice(1).map(_l).map(fo)):n==="in"?Ca(o[1],o.slice(2)):n==="!in"?fo(Ca(o[1],o.slice(2))):n==="has"?mi(o[1]):n==="!has"?fo(mi(o[1])):n!=="within"||o;var s}function Hs(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ca(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(wu)]]:["filter-in-small",o,["literal",n]]}}function mi(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function fo(o){return["!",o]}function ys(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const v of o)p+=`${ys(v)},`;return`${p}]`}const s=Object.keys(o).sort();let h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${ys(o[s[p]])},`;return`${h}}`}function xl(o){let n="";for(const s of R)n+=`/${ys(o[s])}`;return n}function Xs(o){const n=o.value;return n?[new Ve(o.key,n,"constants have been deprecated as of v8")]:[]}function sr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function po(o){if(Array.isArray(o))return o.map(po);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=po(o[s]);return n}return sr(o)}function Kr(o){const n=o.key,s=o.value,h=o.valueSpec||{},p=o.objectElementValidators||{},v=o.style,x=o.styleSpec,E=o.validateSpec;let P=[];const O=ln(s);if(O!=="object")return[new Ve(n,s,`object expected, ${O} found`)];for(const H in s){const J=H.split(".")[0],ae=h[J]||h["*"];let he;if(p[J])he=p[J];else if(h[J])he=E;else if(p["*"])he=p["*"];else{if(!h["*"]){P.push(new Ve(n,s[H],`unknown property "${H}"`));continue}he=E}P=P.concat(he({key:(n&&`${n}.`)+H,value:s[H],valueSpec:ae,style:v,styleSpec:x,object:s,objectKey:H,validateSpec:E},s))}for(const H in h)p[H]||h[H].required&&h[H].default===void 0&&s[H]===void 0&&P.push(new Ve(n,s,`missing required property "${H}"`));return P}function qs(o){const n=o.value,s=o.valueSpec,h=o.style,p=o.styleSpec,v=o.key,x=o.arrayElementValidator||o.validateSpec;if(ln(n)!=="array")return[new Ve(v,n,`array expected, ${ln(n)} found`)];if(s.length&&n.length!==s.length)return[new Ve(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Ve(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let E={type:s.value,values:s.values};p.$version<7&&(E.function=s.function),ln(s.value)==="object"&&(E=s.value);let P=[];for(let O=0;O<n.length;O++)P=P.concat(x({array:n,arrayIndex:O,value:n[O],valueSpec:E,validateSpec:o.validateSpec,style:h,styleSpec:p,key:`${v}[${O}]`}));return P}function Mi(o){const n=o.key,s=o.value,h=o.valueSpec;let p=ln(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Ve(n,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new Ve(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Ve(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function wl(o){const n=o.valueSpec,s=sr(o.value.type);let h,p,v,x={};const E=s!=="categorical"&&o.value.property===void 0,P=!E,O=ln(o.value.stops)==="array"&&ln(o.value.stops[0])==="array"&&ln(o.value.stops[0][0])==="object",H=Kr({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(he){if(s==="identity")return[new Ve(he.key,he.value,'identity function may not have a "stops" property')];let pe=[];const Ie=he.value;return pe=pe.concat(qs({key:he.key,value:Ie,valueSpec:he.valueSpec,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec,arrayElementValidator:J})),ln(Ie)==="array"&&Ie.length===0&&pe.push(new Ve(he.key,Ie,"array must have at least one stop")),pe},default:function(he){return he.validateSpec({key:he.key,value:he.value,valueSpec:n,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec})}}});return s==="identity"&&E&&H.push(new Ve(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||H.push(new Ve(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!_u(o.valueSpec)&&H.push(new Ve(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(P&&!Zs(o.valueSpec)?H.push(new Ve(o.key,o.value,"property functions not supported")):E&&!yc(o.valueSpec)&&H.push(new Ve(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!O||o.value.property!==void 0||H.push(new Ve(o.key,o.value,'"property" property is required')),H;function J(he){let pe=[];const Ie=he.value,Oe=he.key;if(ln(Ie)!=="array")return[new Ve(Oe,Ie,`array expected, ${ln(Ie)} found`)];if(Ie.length!==2)return[new Ve(Oe,Ie,`array length 2 expected, length ${Ie.length} found`)];if(O){if(ln(Ie[0])!=="object")return[new Ve(Oe,Ie,`object expected, ${ln(Ie[0])} found`)];if(Ie[0].zoom===void 0)return[new Ve(Oe,Ie,"object stop key must have zoom")];if(Ie[0].value===void 0)return[new Ve(Oe,Ie,"object stop key must have value")];if(v&&v>sr(Ie[0].zoom))return[new Ve(Oe,Ie[0].zoom,"stop zoom values must appear in ascending order")];sr(Ie[0].zoom)!==v&&(v=sr(Ie[0].zoom),p=void 0,x={}),pe=pe.concat(Kr({key:`${Oe}[0]`,value:Ie[0],valueSpec:{zoom:{}},validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec,objectElementValidators:{zoom:Mi,value:ae}}))}else pe=pe.concat(ae({key:`${Oe}[0]`,value:Ie[0],valueSpec:{},validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec},Ie));return gs(po(Ie[1]))?pe.concat([new Ve(`${Oe}[1]`,Ie[1],"expressions are not allowed in function stops.")]):pe.concat(he.validateSpec({key:`${Oe}[1]`,value:Ie[1],valueSpec:n,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec}))}function ae(he,pe){const Ie=ln(he.value),Oe=sr(he.value),Be=he.value!==null?he.value:pe;if(h){if(Ie!==h)return[new Ve(he.key,Be,`${Ie} stop domain type must match previous stop domain type ${h}`)]}else h=Ie;if(Ie!=="number"&&Ie!=="string"&&Ie!=="boolean")return[new Ve(he.key,Be,"stop domain value must be a number, string, or boolean")];if(Ie!=="number"&&s!=="categorical"){let Qe=`number expected, ${Ie} found`;return Zs(n)&&s===void 0&&(Qe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ve(he.key,Be,Qe)]}return s!=="categorical"||Ie!=="number"||isFinite(Oe)&&Math.floor(Oe)===Oe?s!=="categorical"&&Ie==="number"&&p!==void 0&&Oe<p?[new Ve(he.key,Be,"stop domain values must appear in ascending order")]:(p=Oe,s==="categorical"&&Oe in x?[new Ve(he.key,Be,"stop domain values must be unique")]:(x[Oe]=!0,[])):[new Ve(he.key,Be,`integer expected, found ${Oe}`)]}}function Ks(o){const n=(o.expressionContext==="property"?Ws:ho)(po(o.value),o.valueSpec);if(n.result==="error")return n.value.map(h=>new Ve(`${o.key}${h.key}`,o.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Ve(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!wa(s))return[new Ve(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!wa(s))return[new Ve(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ds(s,["zoom","feature-state"]))return[new Ve(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!sl(s))return[new Ve(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Co(o){const n=o.key,s=o.value,h=o.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(sr(s))===-1&&p.push(new Ve(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(sr(s))===-1&&p.push(new Ve(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Aa(o){return qo(po(o.value))?Ks(Dt({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bu(o)}function bu(o){const n=o.value,s=o.key;if(ln(n)!=="array")return[new Ve(s,n,`array expected, ${ln(n)} found`)];const h=o.styleSpec;let p,v=[];if(n.length<1)return[new Ve(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Co({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:o.style,styleSpec:o.styleSpec})),sr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&sr(n[1])==="$type"&&v.push(new Ve(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Ve(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=ln(n[1]),p!=="string"&&v.push(new Ve(`${s}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=ln(n[x]),sr(n[1])==="$type"?v=v.concat(Co({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Ve(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(bu({key:`${s}[${x}]`,value:n[x],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=ln(n[1]),n.length!==2?v.push(new Ve(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Ve(`${s}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=ln(n[1]),n.length!==2?v.push(new Ve(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new Ve(`${s}[1]`,n[1],`object expected, ${p} found`))}return v}function Eu(o,n){const s=o.key,h=o.validateSpec,p=o.style,v=o.styleSpec,x=o.value,E=o.objectKey,P=v[`${n}_${o.layerType}`];if(!P)return[];const O=E.match(/^(.*)-transition$/);if(n==="paint"&&O&&P[O[1]]&&P[O[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:p,styleSpec:v});const H=o.valueSpec||P[E];if(!H)return[new Ve(s,x,`unknown property "${E}"`)];let J;if(ln(x)==="string"&&Zs(H)&&!H.tokens&&(J=/^{([^}]+)}$/.exec(x)))return[new Ve(s,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const ae=[];return o.layerType==="symbol"&&(E==="text-field"&&p&&!p.glyphs&&ae.push(new Ve(s,x,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&pl(po(x))&&sr(x.type)==="identity"&&ae.push(new Ve(s,x,'"text-font" does not support identity functions'))),ae.concat(h({key:o.key,value:x,valueSpec:H,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:E}))}function Su(o){return Eu(o,"paint")}function $(o){return Eu(o,"layout")}function ge(o){let n=[];const s=o.value,h=o.key,p=o.style,v=o.styleSpec;s.type||s.ref||n.push(new Ve(h,s,'either "type" or "ref" is required'));let x=sr(s.type);const E=sr(s.ref);if(s.id){const P=sr(s.id);for(let O=0;O<o.arrayIndex;O++){const H=p.layers[O];sr(H.id)===P&&n.push(new Ve(h,s.id,`duplicate layer id "${s.id}", previously used at line ${H.id.__line__}`))}}if("ref"in s){let P;["type","source","source-layer","filter","layout"].forEach(O=>{O in s&&n.push(new Ve(h,s[O],`"${O}" is prohibited for ref layers`))}),p.layers.forEach(O=>{sr(O.id)===E&&(P=O)}),P?P.ref?n.push(new Ve(h,s.ref,"ref cannot reference another ref layer")):x=sr(P.type):n.push(new Ve(h,s.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(s.source){const P=p.sources&&p.sources[s.source],O=P&&sr(P.type);P?O==="vector"&&x==="raster"?n.push(new Ve(h,s.source,`layer "${s.id}" requires a raster source`)):O!=="raster-dem"&&x==="hillshade"?n.push(new Ve(h,s.source,`layer "${s.id}" requires a raster-dem source`)):O==="raster"&&x!=="raster"?n.push(new Ve(h,s.source,`layer "${s.id}" requires a vector source`)):O!=="vector"||s["source-layer"]?O==="raster-dem"&&x!=="hillshade"?n.push(new Ve(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||O==="geojson"&&P.lineMetrics||n.push(new Ve(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Ve(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Ve(h,s.source,`source "${s.source}" not found`))}else n.push(new Ve(h,s,'missing required property "source"'));return n=n.concat(Kr({key:h,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Aa,layout:P=>Kr({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":O=>$(Dt({layerType:x},O))}}),paint:P=>Kr({layer:s,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":O=>Su(Dt({layerType:x},O))}})}})),n}function De(o){const n=o.value,s=o.key,h=ln(n);return h!=="string"?[new Ve(s,n,`string expected, ${h} found`)]:[]}const ot={promoteId:function({key:o,value:n}){if(ln(n)==="string")return De({key:o,value:n});{const s=[];for(const h in n)s.push(...De({key:`${o}.${h}`,value:n[h]}));return s}}};function Lt(o){const n=o.value,s=o.key,h=o.styleSpec,p=o.style,v=o.validateSpec;if(!n.type)return[new Ve(s,n,'"type" is required')];const x=sr(n.type);let E;switch(x){case"vector":case"raster":return E=Kr({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:o.style,styleSpec:h,objectElementValidators:ot,validateSpec:v}),E;case"raster-dem":return E=function(P){var O;const H=(O=P.sourceName)!==null&&O!==void 0?O:"",J=P.value,ae=P.styleSpec,he=ae.source_raster_dem,pe=P.style;let Ie=[];const Oe=ln(J);if(J===void 0)return Ie;if(Oe!=="object")return Ie.push(new Ve("source_raster_dem",J,`object expected, ${Oe} found`)),Ie;const Be=sr(J.encoding)==="custom",Qe=["redFactor","greenFactor","blueFactor","baseShift"],We=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const et in J)!Be&&Qe.includes(et)?Ie.push(new Ve(et,J[et],`In "${H}": "${et}" is only valid when "encoding" is set to "custom". ${We} encoding found`)):he[et]?Ie=Ie.concat(P.validateSpec({key:et,value:J[et],valueSpec:he[et],validateSpec:P.validateSpec,style:pe,styleSpec:ae})):Ie.push(new Ve(et,J[et],`unknown property "${et}"`));return Ie}({sourceName:s,value:n,style:o.style,styleSpec:h,validateSpec:v}),E;case"geojson":if(E=Kr({key:s,value:n,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:v,objectElementValidators:ot}),n.cluster)for(const P in n.clusterProperties){const[O,H]=n.clusterProperties[P],J=typeof O=="string"?[O,["accumulated"],["get",P]]:O;E.push(...Ks({key:`${s}.${P}.map`,value:H,validateSpec:v,expressionContext:"cluster-map"})),E.push(...Ks({key:`${s}.${P}.reduce`,value:J,validateSpec:v,expressionContext:"cluster-reduce"}))}return E;case"video":return Kr({key:s,value:n,valueSpec:h.source_video,style:p,validateSpec:v,styleSpec:h});case"image":return Kr({key:s,value:n,valueSpec:h.source_image,style:p,validateSpec:v,styleSpec:h});case"canvas":return[new Ve(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Co({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:h})}}function Tt(o){const n=o.value,s=o.styleSpec,h=s.light,p=o.style;let v=[];const x=ln(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Ve("light",n,`object expected, ${x} found`)]),v;for(const E in n){const P=E.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?o.validateSpec({key:E,value:n[E],valueSpec:s.transition,validateSpec:o.validateSpec,style:p,styleSpec:s}):h[E]?o.validateSpec({key:E,value:n[E],valueSpec:h[E],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new Ve(E,n[E],`unknown property "${E}"`)])}return v}function Gt(o){const n=o.value,s=o.styleSpec,h=s.terrain,p=o.style;let v=[];const x=ln(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Ve("terrain",n,`object expected, ${x} found`)]),v;for(const E in n)v=v.concat(h[E]?o.validateSpec({key:E,value:n[E],valueSpec:h[E],validateSpec:o.validateSpec,style:p,styleSpec:s}):[new Ve(E,n[E],`unknown property "${E}"`)]);return v}function qt(o){let n=[];const s=o.value,h=o.key;if(Array.isArray(s)){const p=[],v=[];for(const x in s)s[x].id&&p.includes(s[x].id)&&n.push(new Ve(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),p.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Ve(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Kr({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return De({key:h,value:s})}const gn={"*":()=>[],array:qs,boolean:function(o){const n=o.value,s=o.key,h=ln(n);return h!=="boolean"?[new Ve(s,n,`boolean expected, ${h} found`)]:[]},number:Mi,color:function(o){const n=o.key,s=o.value,h=ln(s);return h!=="string"?[new Ve(n,s,`color expected, ${h} found`)]:Zn.parse(String(s))?[]:[new Ve(n,s,`color expected, "${s}" found`)]},constants:Xs,enum:Co,filter:Aa,function:wl,layer:ge,object:Kr,source:Lt,light:Tt,terrain:Gt,string:De,formatted:function(o){return De(o).length===0?[]:Ks(o)},resolvedImage:function(o){return De(o).length===0?[]:Ks(o)},padding:function(o){const n=o.key,s=o.value;if(ln(s)==="array"){if(s.length<1||s.length>4)return[new Ve(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:h}));return p}return Mi({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,h=ln(s),p=o.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Ve(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Co({key:`${n}[${x}]`,value:s[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(qs({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return v},sprite:qt};function Bn(o){const n=o.value,s=o.valueSpec,h=o.styleSpec;return o.validateSpec=Bn,s.expression&&pl(sr(n))?wl(o):s.expression&&gs(po(n))?Ks(o):s.type&&gn[s.type]?gn[s.type](o):Kr(Dt({},o,{valueSpec:s.type?h[s.type]:s}))}function Dn(o){const n=o.value,s=o.key,h=De(o);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Ve(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Ve(s,n,'"glyphs" url must include a "{range}" token'))),h}function Nn(o,n=M){let s=[];return s=s.concat(Bn({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Bn,objectElementValidators:{glyphs:Dn,"*":()=>[]}})),o.constants&&(s=s.concat(Xs({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Bn}))),Nr(s)}function $n(o){return function(n){return o({...n,validateSpec:Bn})}}function Nr(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function Hn(o){return function(...n){return Nr(o.apply(this,n))}}Nn.source=Hn($n(Lt)),Nn.sprite=Hn($n(qt)),Nn.glyphs=Hn($n(Dn)),Nn.light=Hn($n(Tt)),Nn.terrain=Hn($n(Gt)),Nn.layer=Hn($n(ge)),Nn.filter=Hn($n(Aa)),Nn.paintProperty=Hn($n(Su)),Nn.layoutProperty=Hn($n($));const ki=Nn,Zi=ki.light,Ko=ki.paintProperty,bl=ki.layoutProperty;function Ys(o,n){let s=!1;if(n&&n.length)for(const h of n)o.fire(new xn(new Error(h.message))),s=!0;return s}class Ao{constructor(n,s,h){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let P=0;P<this.d*this.d;P++){const O=x[3+P],H=x[3+P+1];p.push(O===H?null:x.subarray(O,H))}const E=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,p,v){this._forEachCell(s,h,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,p,v,x){this.cells[v].push(x)}query(n,s,h,p,v){const x=this.min,E=this.max;if(n<=x&&s<=x&&E<=h&&E<=p&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,s,h,p,this._queryCell,P,{},v),P}}_queryCell(n,s,h,p,v,x,E,P){const O=this.cells[v];if(O!==null){const H=this.keys,J=this.bboxes;for(let ae=0;ae<O.length;ae++){const he=O[ae];if(E[he]===void 0){const pe=4*he;(P?P(J[pe+0],J[pe+1],J[pe+2],J[pe+3]):n<=J[pe+2]&&s<=J[pe+3]&&h>=J[pe+0]&&p>=J[pe+1])?(E[he]=!0,x.push(H[he])):E[he]=!1}}}}_forEachCell(n,s,h,p,v,x,E,P){const O=this._convertToCellCoord(n),H=this._convertToCellCoord(s),J=this._convertToCellCoord(h),ae=this._convertToCellCoord(p);for(let he=O;he<=J;he++)for(let pe=H;pe<=ae;pe++){const Ie=this.d*pe+he;if((!P||P(this._convertFromCellCoord(he),this._convertFromCellCoord(pe),this._convertFromCellCoord(he+1),this._convertFromCellCoord(pe+1)))&&v.call(this,n,s,h,p,Ie,x,E,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const E=n[x];p[3+x]=v,p.set(E,v),v+=E.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Ao(n.buffer)}}const Js={};function Rt(o,n,s={}){if(Js[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Js[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Rt("Object",Object),Rt("TransferableGridIndex",Ao),Rt("Color",Zn),Rt("Error",Error),Rt("AJAXError",gt),Rt("ResolvedImage",ri),Rt("StylePropertyFunction",Ta),Rt("StyleExpression",xu,{omit:["_evaluator"]}),Rt("ZoomDependentExpression",Sa),Rt("ZoomConstantExpression",yl),Rt("CompoundExpression",Pi,{omit:["_evaluate"]});for(const o in Vs)Vs[o]._classRegistryKey||Rt(`Expression_${o}`,Vs[o]);function Tu(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function El(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Tu(o)||Se(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const h of o)s.push(El(h,n));return s}if(typeof o=="object"){const s=o.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!Js[h])throw new Error(`${h} is not registered.`);const p=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Js[h].omit.indexOf(v)>=0)continue;const x=o[v];p[v]=Js[h].shallow.indexOf(v)>=0?x:El(x,n)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof o)}function Cu(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Tu(o)||Se(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Cu);if(typeof o=="object"){const n=o.$name||"Object";if(!Js[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=Js[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const h=Object.create(s.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const v=o[p];h[p]=Js[n].shallow.indexOf(p)>=0?v:Cu(v)}return h}throw new Error("can't deserialize object of type "+typeof o)}class Uh{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const Ot={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Au(o){for(const n of o)if($h(n.charCodeAt(0)))return!0;return!1}function Zg(o){for(const n of o)if(!Wg(n.charCodeAt(0)))return!1;return!0}function Wg(o){return!(Ot.Arabic(o)||Ot["Arabic Supplement"](o)||Ot["Arabic Extended-A"](o)||Ot["Arabic Presentation Forms-A"](o)||Ot["Arabic Presentation Forms-B"](o))}function $h(o){return!(o!==746&&o!==747&&(o<4352||!(Ot["Bopomofo Extended"](o)||Ot.Bopomofo(o)||Ot["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ot["CJK Compatibility Ideographs"](o)||Ot["CJK Compatibility"](o)||Ot["CJK Radicals Supplement"](o)||Ot["CJK Strokes"](o)||!(!Ot["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ot["CJK Unified Ideographs Extension A"](o)||Ot["CJK Unified Ideographs"](o)||Ot["Enclosed CJK Letters and Months"](o)||Ot["Hangul Compatibility Jamo"](o)||Ot["Hangul Jamo Extended-A"](o)||Ot["Hangul Jamo Extended-B"](o)||Ot["Hangul Jamo"](o)||Ot["Hangul Syllables"](o)||Ot.Hiragana(o)||Ot["Ideographic Description Characters"](o)||Ot.Kanbun(o)||Ot["Kangxi Radicals"](o)||Ot["Katakana Phonetic Extensions"](o)||Ot.Katakana(o)&&o!==12540||!(!Ot["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ot["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ot["Unified Canadian Aboriginal Syllabics"](o)||Ot["Unified Canadian Aboriginal Syllabics Extended"](o)||Ot["Vertical Forms"](o)||Ot["Yijing Hexagram Symbols"](o)||Ot["Yi Syllables"](o)||Ot["Yi Radicals"](o))))}function Nd(o){return!($h(o)||function(n){return!!(Ot["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ot["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ot["Letterlike Symbols"](n)||Ot["Number Forms"](n)||Ot["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ot["Control Pictures"](n)&&n!==9251||Ot["Optical Character Recognition"](n)||Ot["Enclosed Alphanumerics"](n)||Ot["Geometric Shapes"](n)||Ot["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ot["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ot["CJK Symbols and Punctuation"](n)||Ot.Katakana(n)||Ot["Private Use Area"](n)||Ot["CJK Compatibility Forms"](n)||Ot["Small Form Variants"](n)||Ot["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Vh(o){return o>=1424&&o<=2303||Ot["Arabic Presentation Forms-A"](o)||Ot["Arabic Presentation Forms-B"](o)}function Hg(o,n){return!(!n&&Vh(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ot.Khmer(o))}function Xg(o){for(const n of o)if(Vh(n.charCodeAt(0)))return!0;return!1}const Gh="deferred",Zh="loading",Wh="loaded";let Hh=null,Li="unavailable",Io=null;const Ud=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Li="error"),Hh&&Hh(o)};function Iu(){Xh.fire(new rn("pluginStateChange",{pluginStatus:Li,pluginURL:Io}))}const Xh=new Te,qh=function(){return Li},Kh=function(){if(Li!==Gh||!Io)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Li=Zh,Iu(),Io&&Nt({url:Io},o=>{o?Ud(o):(Li=Wh,Iu())})},Wi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Li===Wh||Wi.applyArabicShaping!=null,isLoading:()=>Li===Zh,setState(o){if(!ne())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Li=o.pluginStatus,Io=o.pluginURL},isParsed(){if(!ne())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Wi.applyArabicShaping!=null&&Wi.processBidirectionalText!=null&&Wi.processStyledBidirectionalText!=null},getPluginURL(){if(!ne())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Io}};class ar{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Uh,this.transition={})}isSupportedScript(n){return function(s,h){for(const p of s)if(!Hg(p.charCodeAt(0),h))return!1;return!0}(n,Wi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class vc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,p){if(pl(h))return new Ta(h,p);if(gs(h)){const v=Ws(h,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return p.type==="color"&&typeof h=="string"?v=Zn.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Br.parse(h)):v=mr.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Yh{constructor(n){this.property=n,this.value=new vc(n,void 0)}transitioned(n,s){return new Vd(this.property,this.value,s,k({},n.transition,this.transition),n.now)}untransitioned(){return new Vd(this.property,this.value,null,{},0)}}class $d{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ye(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Yh(this._values[n].property)),this._values[n].value=new vc(this._values[n].property,s===null?void 0:ye(s))}getTransition(n){return ye(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Yh(this._values[n].property)),this._values[n].transition=ye(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const p=this.getTransition(s);p!==void 0&&(n[`${s}-transition`]=p)}return n}transitioned(n,s){const h=new Gd(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(n,s._values[p]);return h}untransitioned(){const n=new Gd(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Vd{constructor(n,s,h,p,v){this.property=n,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const p=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,s,h);{const E=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const O=P*P,H=O*P;return 4*(P<.5?H:3*(P-O)+H-.75)}(E))}}return v}}class Gd{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const p=new _c(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Sl{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ye(this._values[n].value)}setValue(n,s){this._values[n]=new vc(this._values[n].property,s===null?void 0:ye(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const p=new _c(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,s,h);return p}}class Yo{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,p){return this.property.evaluate(this.value,this.parameters,n,s,h,p)}}class _c{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Kt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const p=ii[this.specification.type];return p?p(n,s,h):n}}class sn{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,p){return new Yo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,p)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Yo(this,{kind:"constant",value:void 0},n.parameters);const p=ii[this.specification.type];if(p){const v=p(n.value.value,s.value.value,h);return new Yo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,p,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,p,v,x)}}class xc extends sn{possiblyEvaluate(n,s,h,p){if(n.value===void 0)return new Yo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,E=this._calculate(x,x,x,s);return new Yo(this,{kind:"constant",value:E},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Yo(this,{kind:"constant",value:v},s)}return new Yo(this,n.expression,s)}evaluate(n,s,h,p,v,x){if(n.kind==="source"){const E=n.evaluate(s,h,p,v,x);return this._calculate(E,E,E,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,p),n.evaluate({zoom:Math.floor(s.zoom)},h,p),n.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):n.value}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Jh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,p);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new ar(Math.floor(s.zoom-1),s)),n.expression.evaluate(new ar(Math.floor(s.zoom),s)),n.expression.evaluate(new ar(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Jo{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,p){return!!n.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class gi{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new vc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Yh(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}Rt("DataDrivenProperty",sn),Rt("DataConstantProperty",Kt),Rt("CrossFadedDataDrivenProperty",xc),Rt("CrossFadedProperty",Jh),Rt("ColorRampProperty",Jo);const wc="-transition";class Po extends Te{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Sl(s.layout)),s.paint)){this._transitionablePaint=new $d(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new _c(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(bl,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(wc)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Ko,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(wc))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),E=p.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,E,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Q(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,p,v={}){return(!v||v.validate!==!1)&&Ys(this,n.call(ki,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:M,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Yo&&Zs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Qh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Pu{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class rr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function lr(o,n=1){let s=0,h=0;return{members:o.map(p=>{const v=Qh[p.type].BYTES_PER_ELEMENT,x=s=Zd(s,Math.max(n,v)),E=p.components||1;return h=Math.max(h,v),s+=v*E,{name:p.name,type:p.type,components:E,offset:x}}),size:Zd(s,Math.max(h,n)),alignment:n}}function Zd(o,n){return Math.ceil(o/n)*n}class Tl extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.int16[p+0]=s,this.int16[p+1]=h,n}}Tl.prototype.bytesPerElement=4,Rt("StructArrayLayout2i4",Tl);class Qs extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=p,n}}Qs.prototype.bytesPerElement=6,Rt("StructArrayLayout3i6",Qs);class ef extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=p,this.int16[x+3]=v,n}}ef.prototype.bytesPerElement=8,Rt("StructArrayLayout4i8",ef);class tf extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,E){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=E,n}}tf.prototype.bytesPerElement=12,Rt("StructArrayLayout2i4i12",tf);class bc extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,E){const P=4*n,O=8*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.uint8[O+4]=p,this.uint8[O+5]=v,this.uint8[O+6]=x,this.uint8[O+7]=E,n}}bc.prototype.bytesPerElement=8,Rt("StructArrayLayout2i4ub8",bc);class Mu extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.float32[p+0]=s,this.float32[p+1]=h,n}}Mu.prototype.bytesPerElement=8,Rt("StructArrayLayout2f8",Mu);class nf extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,O,H){const J=this.length;return this.resize(J+1),this.emplace(J,n,s,h,p,v,x,E,P,O,H)}emplace(n,s,h,p,v,x,E,P,O,H,J){const ae=10*n;return this.uint16[ae+0]=s,this.uint16[ae+1]=h,this.uint16[ae+2]=p,this.uint16[ae+3]=v,this.uint16[ae+4]=x,this.uint16[ae+5]=E,this.uint16[ae+6]=P,this.uint16[ae+7]=O,this.uint16[ae+8]=H,this.uint16[ae+9]=J,n}}nf.prototype.bytesPerElement=20,Rt("StructArrayLayout10ui20",nf);class Vn extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,O,H,J,ae){const he=this.length;return this.resize(he+1),this.emplace(he,n,s,h,p,v,x,E,P,O,H,J,ae)}emplace(n,s,h,p,v,x,E,P,O,H,J,ae,he){const pe=12*n;return this.int16[pe+0]=s,this.int16[pe+1]=h,this.int16[pe+2]=p,this.int16[pe+3]=v,this.uint16[pe+4]=x,this.uint16[pe+5]=E,this.uint16[pe+6]=P,this.uint16[pe+7]=O,this.int16[pe+8]=H,this.int16[pe+9]=J,this.int16[pe+10]=ae,this.int16[pe+11]=he,n}}Vn.prototype.bytesPerElement=24,Rt("StructArrayLayout4i4ui4i24",Vn);class g extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}g.prototype.bytesPerElement=12,Rt("StructArrayLayout3f12",g);class r extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}r.prototype.bytesPerElement=4,Rt("StructArrayLayout1ul4",r);class u extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,O){const H=this.length;return this.resize(H+1),this.emplace(H,n,s,h,p,v,x,E,P,O)}emplace(n,s,h,p,v,x,E,P,O,H){const J=10*n,ae=5*n;return this.int16[J+0]=s,this.int16[J+1]=h,this.int16[J+2]=p,this.int16[J+3]=v,this.int16[J+4]=x,this.int16[J+5]=E,this.uint32[ae+3]=P,this.uint16[J+8]=O,this.uint16[J+9]=H,n}}u.prototype.bytesPerElement=20,Rt("StructArrayLayout6i1ul2ui20",u);class f extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,p,v,x)}emplace(n,s,h,p,v,x,E){const P=6*n;return this.int16[P+0]=s,this.int16[P+1]=h,this.int16[P+2]=p,this.int16[P+3]=v,this.int16[P+4]=x,this.int16[P+5]=E,n}}f.prototype.bytesPerElement=12,Rt("StructArrayLayout2i2i2i12",f);class m extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,p,v)}emplace(n,s,h,p,v,x){const E=4*n,P=8*n;return this.float32[E+0]=s,this.float32[E+1]=h,this.float32[E+2]=p,this.int16[P+6]=v,this.int16[P+7]=x,n}}m.prototype.bytesPerElement=16,Rt("StructArrayLayout2f1f2i16",m);class _ extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=12*n,E=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[E+1]=p,this.float32[E+2]=v,n}}_.prototype.bytesPerElement=12,Rt("StructArrayLayout2ub2f12",_);class T extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=p,n}}T.prototype.bytesPerElement=6,Rt("StructArrayLayout3ui6",T);class A extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie,Oe,Be){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie,Oe,Be)}emplace(n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie,Oe,Be,Qe){const We=24*n,et=12*n,it=48*n;return this.int16[We+0]=s,this.int16[We+1]=h,this.uint16[We+2]=p,this.uint16[We+3]=v,this.uint32[et+2]=x,this.uint32[et+3]=E,this.uint32[et+4]=P,this.uint16[We+10]=O,this.uint16[We+11]=H,this.uint16[We+12]=J,this.float32[et+7]=ae,this.float32[et+8]=he,this.uint8[it+36]=pe,this.uint8[it+37]=Ie,this.uint8[it+38]=Oe,this.uint32[et+10]=Be,this.int16[We+22]=Qe,n}}A.prototype.bytesPerElement=48,Rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",A);class z extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie,Oe,Be,Qe,We,et,it,vt,Ft,Vt,zt,kt,At,jt){const Pt=this.length;return this.resize(Pt+1),this.emplace(Pt,n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie,Oe,Be,Qe,We,et,it,vt,Ft,Vt,zt,kt,At,jt)}emplace(n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie,Oe,Be,Qe,We,et,it,vt,Ft,Vt,zt,kt,At,jt,Pt){const bt=32*n,tn=16*n;return this.int16[bt+0]=s,this.int16[bt+1]=h,this.int16[bt+2]=p,this.int16[bt+3]=v,this.int16[bt+4]=x,this.int16[bt+5]=E,this.int16[bt+6]=P,this.int16[bt+7]=O,this.uint16[bt+8]=H,this.uint16[bt+9]=J,this.uint16[bt+10]=ae,this.uint16[bt+11]=he,this.uint16[bt+12]=pe,this.uint16[bt+13]=Ie,this.uint16[bt+14]=Oe,this.uint16[bt+15]=Be,this.uint16[bt+16]=Qe,this.uint16[bt+17]=We,this.uint16[bt+18]=et,this.uint16[bt+19]=it,this.uint16[bt+20]=vt,this.uint16[bt+21]=Ft,this.uint16[bt+22]=Vt,this.uint32[tn+12]=zt,this.float32[tn+13]=kt,this.float32[tn+14]=At,this.uint16[bt+30]=jt,this.uint16[bt+31]=Pt,n}}z.prototype.bytesPerElement=64,Rt("StructArrayLayout8i15ui1ul2f2ui64",z);class D extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}D.prototype.bytesPerElement=4,Rt("StructArrayLayout1f4",D);class X extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=p,n}}X.prototype.bytesPerElement=12,Rt("StructArrayLayout1ui2f12",X);class K extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const p=this.length;return this.resize(p+1),this.emplace(p,n,s,h)}emplace(n,s,h,p){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=p,n}}K.prototype.bytesPerElement=8,Rt("StructArrayLayout1ul2ui8",K);class ce extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const p=2*n;return this.uint16[p+0]=s,this.uint16[p+1]=h,n}}ce.prototype.bytesPerElement=4,Rt("StructArrayLayout2ui4",ce);class Me extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Me.prototype.bytesPerElement=2,Rt("StructArrayLayout1ui2",Me);class Ae extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,p)}emplace(n,s,h,p,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=v,n}}Ae.prototype.bytesPerElement=16,Rt("StructArrayLayout4f16",Ae);class Fe extends Pu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new L(this.anchorPointX,this.anchorPointY)}}Fe.prototype.size=20;class Ce extends u{get(n){return new Fe(this,n)}}Rt("CollisionBoxArray",Ce);class Ke extends Pu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ke.prototype.size=48;class nt extends A{get(n){return new Ke(this,n)}}Rt("PlacedSymbolArray",nt);class Re extends Pu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Re.prototype.size=64;class Je extends z{get(n){return new Re(this,n)}}Rt("SymbolInstanceArray",Je);class st extends D{getoffsetX(n){return this.float32[1*n+0]}}Rt("GlyphOffsetArray",st);class at extends Qs{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Rt("SymbolLineVertexArray",at);class pt extends Pu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}pt.prototype.size=12;class wt extends X{get(n){return new pt(this,n)}}Rt("TextAnchorOffsetArray",wt);class xt extends Pu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}xt.prototype.size=8;class St extends K{get(n){return new xt(this,n)}}Rt("FeatureIndexArray",St);class Ut extends Tl{}class In extends Tl{}class Mt extends Tl{}class un extends tf{}class Zt extends bc{}class ur extends Mu{}class wn extends nf{}class bn extends Vn{}class Pn extends g{}class Sr extends r{}class tr extends f{}class mo extends _{}class wr extends T{}class yr extends ce{}const Hi=lr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qo}=Hi;class cr{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,p){let v=this.segments[this.segments.length-1];return n>cr.MAX_VERTEX_ARRAY_LENGTH&&xe(`Max vertices per segment is ${cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>cr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,p){return new cr([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function ea(o,n){return 256*(o=B(Math.floor(o),0,255))+B(Math.floor(n),0,255)}cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Rt("SegmentVector",cr);const ta=lr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vs={exports:{}},Ia={exports:{}};Ia.exports=function(o,n){var s,h,p,v,x,E,P,O;for(h=o.length-(s=3&o.length),p=n,x=3432918353,E=461845907,O=0;O<h;)P=255&o.charCodeAt(O)|(255&o.charCodeAt(++O))<<8|(255&o.charCodeAt(++O))<<16|(255&o.charCodeAt(++O))<<24,++O,p=27492+(65535&(v=5*(65535&(p=(p^=P=(65535&(P=(P=(65535&P)*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,s){case 3:P^=(255&o.charCodeAt(O+2))<<16;case 2:P^=(255&o.charCodeAt(O+1))<<8;case 1:p^=P=(65535&(P=(P=(65535&(P^=255&o.charCodeAt(O)))*x+(((P>>>16)*x&65535)<<16)&4294967295)<<15|P>>>17))*E+(((P>>>16)*E&65535)<<16)&4294967295}return p^=o.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var yi=Ia.exports,Qr={exports:{}};Qr.exports=function(o,n){for(var s,h=o.length,p=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:p^=(255&o.charCodeAt(v+2))<<16;case 2:p^=(255&o.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&o.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var oi=yi,ku=Qr.exports;vs.exports=oi,vs.exports.murmur3=oi,vs.exports.murmur2=ku;var Tr=w(vs.exports);class Cr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,p){this.ids.push(Xi(n)),this.positions.push(s,h,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Xi(n);let h=0,p=this.ids.length-1;for(;h<p;){const x=h+p>>1;this.ids[x]>=s?p=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Ar(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(n){const s=new Cr;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Xi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Tr(String(o))}function Ar(o,n,s,h){for(;s<h;){const p=o[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(o[v]<p);do x--;while(o[x]>p);if(v>=x)break;Ec(o,v,x),Ec(n,3*v,3*x),Ec(n,3*v+1,3*x+1),Ec(n,3*v+2,3*x+2)}x-s<h-x?(Ar(o,n,s,x),s=x+1):(Ar(o,n,x+1,h),h=x)}}function Ec(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}Rt("FeaturePositionMap",Cr);class Pa{constructor(n,s){this.gl=n.gl,this.location=s}}class Sc extends Pa{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Wd extends Pa{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Hd extends Pa{constructor(n,s){super(n,s),this.current=Zn.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const qg=new Float32Array(16);function na(o){return[ea(255*o.r,255*o.g),ea(255*o.b,255*o.a)]}class Cl{constructor(n,s,h){this.value=n,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Hd(n,s):new Sc(n,s)}}class Ma{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Wd(n,s):new Sc(n,s)}}class es{constructor(n,s,h,p){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,s,h,p,v){const x=this.paintVertexArray.length,E=this.expression.evaluate(new ar(0),s,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,E)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const p=na(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class qi{constructor(n,s,h,p,v,x){this.expression=n,this.uniformNames=s.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,p,v){const x=this.expression.evaluate(new ar(this.zoom),s,{},p,[],v),E=this.expression.evaluate(new ar(this.zoom+1),s,{},p,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,x,E)}updatePaintArray(n,s,h,p){const v=this.expression.evaluate({zoom:this.zoom},h,p),x=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,p){if(this.type==="color"){const v=na(h),x=na(p);for(let E=n;E<s;E++)this.paintVertexArray.emplace(E,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=B(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,s,h){return new Sc(n,s)}}class _s{constructor(n,s,h,p,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,p,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,p){if(!p||!h)return;const{min:v,mid:x,max:E}=h,P=p[v],O=p[x],H=p[E];if(P&&O&&H)for(let J=n;J<s;J++)this.zoomInPaintVertexArray.emplace(J,O.tl[0],O.tl[1],O.br[0],O.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],O.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,O.tl[0],O.tl[1],O.br[0],O.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],O.pixelRatio,H.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,ta.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,ta.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Tc{constructor(n,s,h){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof Yo&&Zs(x.property.specification)))continue;const E=dI(v,n.type),P=x.value,O=x.property.specification.type,H=x.property.useIntegerZoom,J=x.property.specification["property-type"],ae=J==="cross-faded"||J==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=ae?new Ma(P.value,E):new Cl(P.value,E,O),p.push(`/u_${v}`);else if(P.kind==="source"||ae){const he=dx(v,O,"source");this.binders[v]=ae?new _s(P,O,H,s,he,n.id):new es(P,E,O,he),p.push(`/a_${v}`)}else{const he=dx(v,O,"composite");this.binders[v]=new qi(P,E,O,H,s,he),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof es||s instanceof qi?s.maxValue:0}populatePaintArrays(n,s,h,p,v){for(const x in this.binders){const E=this.binders[x];(E instanceof es||E instanceof qi||E instanceof _s)&&E.populatePaintArray(n,s,h,p,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const p=this.binders[h];p instanceof Ma&&p.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,p,v){let x=!1;for(const E in n){const P=s.getPositions(E);for(const O of P){const H=h.feature(O.index);for(const J in this.binders){const ae=this.binders[J];if((ae instanceof es||ae instanceof qi||ae instanceof _s)&&ae.expression.isStateDependent===!0){const he=p.paint.get(J);ae.expression=he.value,ae.updatePaintArray(O.start,O.end,H,n[E],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Cl||h instanceof Ma)&&n.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof es||h instanceof qi)for(let p=0;p<h.paintVertexAttributes.length;p++)n.push(h.paintVertexAttributes[p].name);else if(h instanceof _s)for(let p=0;p<ta.members.length;p++)n.push(ta.members[p].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Cl||h instanceof Ma||h instanceof qi)for(const p of h.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Cl||v instanceof Ma||v instanceof qi){for(const x of v.uniformNames)if(s[x]){const E=v.getBinding(n,s[x],x);h.push({name:x,property:p,binding:E})}}}return h}setUniforms(n,s,h,p){for(const{name:v,property:x,binding:E}of s)this.binders[x].setUniform(E,p,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof _s){const p=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof es||h instanceof qi)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof es||h instanceof qi||h instanceof _s)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof es||s instanceof qi||s instanceof _s)&&s.destroy()}}}class Lu{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Tc(p,s,h);this.needsUpload=!1,this._featureMap=new Cr,this._bufferOffset=0}populatePaintArrays(n,s,h,p,v,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(n,s,p,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,p){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function dI(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function dx(o,n,s){const h={color:{source:Mu,composite:Ae},number:{source:D,composite:Mu}},p=function(v){return{"line-pattern":{source:wn,composite:wn},"fill-pattern":{source:wn,composite:wn},"fill-extrusion-pattern":{source:wn,composite:wn}}[v]}(o);return p&&p[s]||h[n][s]}Rt("ConstantBinder",Cl),Rt("CrossFadedConstantBinder",Ma),Rt("SourceExpressionBinder",es),Rt("CrossFadedCompositeBinder",_s),Rt("CompositeExpressionBinder",qi),Rt("ProgramConfiguration",Tc,{omit:["_buffers"]}),Rt("ProgramConfigurationSet",Lu);const Fr=8192,Kg=Math.pow(2,14)-1,px=-Kg-1;function zu(o){const n=Fr/o.extent,s=o.loadGeometry();for(let h=0;h<s.length;h++){const p=s[h];for(let v=0;v<p.length;v++){const x=p[v],E=Math.round(x.x*n),P=Math.round(x.y*n);x.x=B(E,px,Kg),x.y=B(P,px,Kg),(E<x.x||E>x.x+1||P<x.y||P>x.y+1)&&xe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Fu(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?zu(o):[]}}function Xd(o,n,s,h,p){o.emplaceBack(2*n+(h+1)/2,2*s+(p+1)/2)}class Yg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new In,this.indexArray=new wr,this.segments=new cr,this.programConfigurations=new Lu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const p=this.layers[0],v=[];let x=null,E=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),E=!x.isConstant());for(const{feature:P,id:O,index:H,sourceLayerIndex:J}of n){const ae=this.layers[0]._featureFilter.needGeometry,he=Fu(P,ae);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),he,h))continue;const pe=E?x.evaluate(he,{},h):void 0,Ie={id:O,properties:P.properties,type:P.type,sourceLayerIndex:J,index:H,geometry:ae?he.geometry:zu(P),patterns:{},sortKey:pe};v.push(Ie)}E&&v.sort((P,O)=>P.sortKey-O.sortKey);for(const P of v){const{geometry:O,index:H,sourceLayerIndex:J}=P,ae=n[H].feature;this.addFeature(P,O,H,h),s.featureIndex.insert(ae,O,H,J,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Qo),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,p){for(const v of s)for(const x of v){const E=x.x,P=x.y;if(E<0||E>=Fr||P<0||P>=Fr)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),H=O.vertexLength;Xd(this.layoutVertexArray,E,P,-1,-1),Xd(this.layoutVertexArray,E,P,1,-1),Xd(this.layoutVertexArray,E,P,1,1),Xd(this.layoutVertexArray,E,P,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+3,H+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},p)}}function mx(o,n){for(let s=0;s<o.length;s++)if(Cc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Cc(o,n[s]))return!0;return!!Jg(o,n)}function pI(o,n,s){return!!Cc(o,n)||!!Qg(n,o,s)}function gx(o,n){if(o.length===1)return vx(n,o[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let p=0;p<h.length;p++)if(Cc(o,h[p]))return!0}for(let s=0;s<o.length;s++)if(vx(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Jg(o,n[s]))return!0;return!1}function mI(o,n,s){if(o.length>1){if(Jg(o,n))return!0;for(let h=0;h<n.length;h++)if(Qg(n[h],o,s))return!0}for(let h=0;h<o.length;h++)if(Qg(o[h],n,s))return!0;return!1}function Jg(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const h=o[s],p=o[s+1];for(let v=0;v<n.length-1;v++)if(gI(h,p,n[v],n[v+1]))return!0}return!1}function gI(o,n,s,h){return te(o,s,h)!==te(n,s,h)&&te(o,n,s)!==te(o,n,h)}function Qg(o,n,s){const h=s*s;if(n.length===1)return o.distSqr(n[0])<h;for(let p=1;p<n.length;p++)if(yx(o,n[p-1],n[p])<h)return!0;return!1}function yx(o,n,s){const h=n.distSqr(s);if(h===0)return o.distSqr(n);const p=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/h;return o.distSqr(p<0?n:p>1?s:s.sub(n)._mult(p)._add(n))}function vx(o,n){let s,h,p,v=!1;for(let x=0;x<o.length;x++){s=o[x];for(let E=0,P=s.length-1;E<s.length;P=E++)h=s[E],p=s[P],h.y>n.y!=p.y>n.y&&n.x<(p.x-h.x)*(n.y-h.y)/(p.y-h.y)+h.x&&(v=!v)}return v}function Cc(o,n){let s=!1;for(let h=0,p=o.length-1;h<o.length;p=h++){const v=o[h],x=o[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function yI(o,n,s){const h=s[0],p=s[2];if(o.x<h.x&&n.x<h.x||o.x>p.x&&n.x>p.x||o.y<h.y&&n.y<h.y||o.y>p.y&&n.y>p.y)return!1;const v=te(o,n,s[0]);return v!==te(o,n,s[1])||v!==te(o,n,s[2])||v!==te(o,n,s[3])}function rf(o,n,s){const h=n.paint.get(o).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(o)}function qd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Kd(o,n,s,h,p){if(!n[0]&&!n[1])return o;const v=L.convert(n)._mult(p);s==="viewport"&&v._rotate(-h);const x=[];for(let E=0;E<o.length;E++)x.push(o[E].sub(v));return x}let _x,xx;Rt("CircleBucket",Yg,{omit:["layers"]});var vI={get paint(){return xx=xx||new gi({"circle-radius":new sn(M.paint_circle["circle-radius"]),"circle-color":new sn(M.paint_circle["circle-color"]),"circle-blur":new sn(M.paint_circle["circle-blur"]),"circle-opacity":new sn(M.paint_circle["circle-opacity"]),"circle-translate":new Kt(M.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(M.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(M.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(M.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(M.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(M.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(M.paint_circle["circle-stroke-opacity"])})},get layout(){return _x=_x||new gi({"circle-sort-key":new sn(M.layout_circle["circle-sort-key"])})}},zi=1e-6,Ac=typeof Float32Array<"u"?Float32Array:Array;function ey(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function wx(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3],E=n[4],P=n[5],O=n[6],H=n[7],J=n[8],ae=n[9],he=n[10],pe=n[11],Ie=n[12],Oe=n[13],Be=n[14],Qe=n[15],We=s[0],et=s[1],it=s[2],vt=s[3];return o[0]=We*h+et*E+it*J+vt*Ie,o[1]=We*p+et*P+it*ae+vt*Oe,o[2]=We*v+et*O+it*he+vt*Be,o[3]=We*x+et*H+it*pe+vt*Qe,o[4]=(We=s[4])*h+(et=s[5])*E+(it=s[6])*J+(vt=s[7])*Ie,o[5]=We*p+et*P+it*ae+vt*Oe,o[6]=We*v+et*O+it*he+vt*Be,o[7]=We*x+et*H+it*pe+vt*Qe,o[8]=(We=s[8])*h+(et=s[9])*E+(it=s[10])*J+(vt=s[11])*Ie,o[9]=We*p+et*P+it*ae+vt*Oe,o[10]=We*v+et*O+it*he+vt*Be,o[11]=We*x+et*H+it*pe+vt*Qe,o[12]=(We=s[12])*h+(et=s[13])*E+(it=s[14])*J+(vt=s[15])*Ie,o[13]=We*p+et*P+it*ae+vt*Oe,o[14]=We*v+et*O+it*he+vt*Be,o[15]=We*x+et*H+it*pe+vt*Qe,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var of,_I=wx;function Yd(o,n,s){var h=n[0],p=n[1],v=n[2],x=n[3];return o[0]=s[0]*h+s[4]*p+s[8]*v+s[12]*x,o[1]=s[1]*h+s[5]*p+s[9]*v+s[13]*x,o[2]=s[2]*h+s[6]*p+s[10]*v+s[14]*x,o[3]=s[3]*h+s[7]*p+s[11]*v+s[15]*x,o}of=new Ac(4),Ac!=Float32Array&&(of[0]=0,of[1]=0,of[2]=0,of[3]=0);class xI extends Po{constructor(n){super(n,vI)}createBucket(n){return new Yg(n)}queryRadius(n){const s=n;return rf("circle-radius",this,s)+rf("circle-stroke-width",this,s)+qd(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,p,v,x,E,P){const O=Kd(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,E),H=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),J=this.paint.get("circle-pitch-alignment")==="map",ae=J?O:function(pe,Ie){return pe.map(Oe=>bx(Oe,Ie))}(O,P),he=J?H*E:H;for(const pe of p)for(const Ie of pe){const Oe=J?Ie:bx(Ie,P);let Be=he;const Qe=Yd([],[Ie.x,Ie.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Qe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=x.cameraToCenterDistance/Qe[3]),pI(ae,Oe,Be))return!0}return!1}}function bx(o,n){const s=Yd([],[o.x,o.y,0,1],n);return new L(s[0]/s[3],s[1]/s[3])}class Ex extends Yg{}let Sx;Rt("HeatmapBucket",Ex,{omit:["layers"]});var wI={get paint(){return Sx=Sx||new gi({"heatmap-radius":new sn(M.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(M.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(M.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Jo(M.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(M.paint_heatmap["heatmap-opacity"])})}};function ty(o,{width:n,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*s*h}`)}else p=new Uint8Array(n*s*h);return o.width=n,o.height=s,o.data=p,o}function Tx(o,{width:n,height:s},h){if(n===o.width&&s===o.height)return;const p=ty({},{width:n,height:s},h);ny(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},h),o.width=n,o.height=s,o.data=p.data}function ny(o,n,s,h,p,v){if(p.width===0||p.height===0)return n;if(p.width>o.width||p.height>o.height||s.x>o.width-p.width||s.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||h.x>n.width-p.width||h.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=o.data,E=n.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<p.height;P++){const O=((s.y+P)*o.width+s.x)*v,H=((h.y+P)*n.width+h.x)*v;for(let J=0;J<p.width*v;J++)E[H+J]=x[O+J]}return n}class sf{constructor(n,s){ty(this,n,1,s)}resize(n){Tx(this,n,1)}clone(){return new sf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){ny(n,s,h,p,v,1)}}class Mo{constructor(n,s){ty(this,n,4,s)}resize(n){Tx(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Mo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,p,v){ny(n,s,h,p,v,4)}}function Cx(o){const n={},s=o.resolution||256,h=o.clips?o.clips.length:1,p=o.image||new Mo({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,E,P)=>{n[o.evaluationKey]=P;const O=o.expression.evaluate(n);p.data[x+E+0]=Math.floor(255*O.r/O.a),p.data[x+E+1]=Math.floor(255*O.g/O.a),p.data[x+E+2]=Math.floor(255*O.b/O.a),p.data[x+E+3]=Math.floor(255*O.a)};if(o.clips)for(let x=0,E=0;x<h;++x,E+=4*s)for(let P=0,O=0;P<s;P++,O+=4){const H=P/(s-1),{start:J,end:ae}=o.clips[x];v(E,O,J*(1-H)+ae*H)}else for(let x=0,E=0;x<s;x++,E+=4)v(0,E,x/(s-1));return p}Rt("AlphaImage",sf),Rt("RGBAImage",Mo);class bI extends Po{createBucket(n){return new Ex(n)}constructor(n){super(n,wI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cx({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ax;var EI={get paint(){return Ax=Ax||new gi({"hillshade-illumination-direction":new Kt(M.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(M.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(M.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(M.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(M.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(M.paint_hillshade["hillshade-accent-color"])})}};class SI extends Po{constructor(n){super(n,EI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const TI=lr([{name:"a_pos",components:2,type:"Int16"}],4),{members:CI}=TI;var ry={exports:{}};function Jd(o,n,s){s=s||2;var h,p,v,x,E,P,O,H=n&&n.length,J=H?n[0]*s:o.length,ae=Ix(o,0,J,s,!0),he=[];if(!ae||ae.next===ae.prev)return he;if(H&&(ae=function(Ie,Oe,Be,Qe){var We,et,it,vt=[];for(We=0,et=Oe.length;We<et;We++)(it=Ix(Ie,Oe[We]*Qe,We<et-1?Oe[We+1]*Qe:Ie.length,Qe,!1))===it.next&&(it.steiner=!0),vt.push(FI(it));for(vt.sort(kI),We=0;We<vt.length;We++)Be=LI(vt[We],Be);return Be}(o,n,ae,s)),o.length>80*s){h=v=o[0],p=x=o[1];for(var pe=s;pe<J;pe+=s)(E=o[pe])<h&&(h=E),(P=o[pe+1])<p&&(p=P),E>v&&(v=E),P>x&&(x=P);O=(O=Math.max(v-h,x-p))!==0?32767/O:0}return af(ae,he,s,h,p,O,0),he}function Ix(o,n,s,h,p){var v,x;if(p===sy(o,n,s,h)>0)for(v=n;v<s;v+=h)x=kx(v,o[v],o[v+1],x);else for(v=s-h;v>=n;v-=h)x=kx(v,o[v],o[v+1],x);return x&&Qd(x,x.next)&&(uf(x),x=x.next),x}function Ou(o,n){if(!o)return o;n||(n=o);var s,h=o;do if(s=!1,h.steiner||!Qd(h,h.next)&&Ir(h.prev,h,h.next)!==0)h=h.next;else{if(uf(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function af(o,n,s,h,p,v,x){if(o){!x&&v&&function(H,J,ae,he){var pe=H;do pe.z===0&&(pe.z=iy(pe.x,pe.y,J,ae,he)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==H);pe.prevZ.nextZ=null,pe.prevZ=null,function(Ie){var Oe,Be,Qe,We,et,it,vt,Ft,Vt=1;do{for(Be=Ie,Ie=null,et=null,it=0;Be;){for(it++,Qe=Be,vt=0,Oe=0;Oe<Vt&&(vt++,Qe=Qe.nextZ);Oe++);for(Ft=Vt;vt>0||Ft>0&&Qe;)vt!==0&&(Ft===0||!Qe||Be.z<=Qe.z)?(We=Be,Be=Be.nextZ,vt--):(We=Qe,Qe=Qe.nextZ,Ft--),et?et.nextZ=We:Ie=We,We.prevZ=et,et=We;Be=Qe}et.nextZ=null,Vt*=2}while(it>1)}(pe)}(o,h,p,v);for(var E,P,O=o;o.prev!==o.next;)if(E=o.prev,P=o.next,v?II(o,h,p,v):AI(o))n.push(E.i/s|0),n.push(o.i/s|0),n.push(P.i/s|0),uf(o),o=P.next,O=P.next;else if((o=P)===O){x?x===1?af(o=PI(Ou(o),n,s),n,s,h,p,v,2):x===2&&MI(o,n,s,h,p,v):af(Ou(o),n,s,h,p,v,1);break}}}function AI(o){var n=o.prev,s=o,h=o.next;if(Ir(n,s,h)>=0)return!1;for(var p=n.x,v=s.x,x=h.x,E=n.y,P=s.y,O=h.y,H=p<v?p<x?p:x:v<x?v:x,J=E<P?E<O?E:O:P<O?P:O,ae=p>v?p>x?p:x:v>x?v:x,he=E>P?E>O?E:O:P>O?P:O,pe=h.next;pe!==n;){if(pe.x>=H&&pe.x<=ae&&pe.y>=J&&pe.y<=he&&Ic(p,E,v,P,x,O,pe.x,pe.y)&&Ir(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function II(o,n,s,h){var p=o.prev,v=o,x=o.next;if(Ir(p,v,x)>=0)return!1;for(var E=p.x,P=v.x,O=x.x,H=p.y,J=v.y,ae=x.y,he=E<P?E<O?E:O:P<O?P:O,pe=H<J?H<ae?H:ae:J<ae?J:ae,Ie=E>P?E>O?E:O:P>O?P:O,Oe=H>J?H>ae?H:ae:J>ae?J:ae,Be=iy(he,pe,n,s,h),Qe=iy(Ie,Oe,n,s,h),We=o.prevZ,et=o.nextZ;We&&We.z>=Be&&et&&et.z<=Qe;){if(We.x>=he&&We.x<=Ie&&We.y>=pe&&We.y<=Oe&&We!==p&&We!==x&&Ic(E,H,P,J,O,ae,We.x,We.y)&&Ir(We.prev,We,We.next)>=0||(We=We.prevZ,et.x>=he&&et.x<=Ie&&et.y>=pe&&et.y<=Oe&&et!==p&&et!==x&&Ic(E,H,P,J,O,ae,et.x,et.y)&&Ir(et.prev,et,et.next)>=0))return!1;et=et.nextZ}for(;We&&We.z>=Be;){if(We.x>=he&&We.x<=Ie&&We.y>=pe&&We.y<=Oe&&We!==p&&We!==x&&Ic(E,H,P,J,O,ae,We.x,We.y)&&Ir(We.prev,We,We.next)>=0)return!1;We=We.prevZ}for(;et&&et.z<=Qe;){if(et.x>=he&&et.x<=Ie&&et.y>=pe&&et.y<=Oe&&et!==p&&et!==x&&Ic(E,H,P,J,O,ae,et.x,et.y)&&Ir(et.prev,et,et.next)>=0)return!1;et=et.nextZ}return!0}function PI(o,n,s){var h=o;do{var p=h.prev,v=h.next.next;!Qd(p,v)&&Px(p,h,h.next,v)&&lf(p,v)&&lf(v,p)&&(n.push(p.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),uf(h),uf(h.next),h=o=v),h=h.next}while(h!==o);return Ou(h)}function MI(o,n,s,h,p,v){var x=o;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&OI(x,E)){var P=Mx(x,E);return x=Ou(x,x.next),P=Ou(P,P.next),af(x,n,s,h,p,v,0),void af(P,n,s,h,p,v,0)}E=E.next}x=x.next}while(x!==o)}function kI(o,n){return o.x-n.x}function LI(o,n){var s=function(p,v){var x,E=v,P=p.x,O=p.y,H=-1/0;do{if(O<=E.y&&O>=E.next.y&&E.next.y!==E.y){var J=E.x+(O-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(J<=P&&J>H&&(H=J,x=E.x<E.next.x?E:E.next,J===P))return x}E=E.next}while(E!==v);if(!x)return null;var ae,he=x,pe=x.x,Ie=x.y,Oe=1/0;E=x;do P>=E.x&&E.x>=pe&&P!==E.x&&Ic(O<Ie?P:H,O,pe,Ie,O<Ie?H:P,O,E.x,E.y)&&(ae=Math.abs(O-E.y)/(P-E.x),lf(E,p)&&(ae<Oe||ae===Oe&&(E.x>x.x||E.x===x.x&&zI(x,E)))&&(x=E,Oe=ae)),E=E.next;while(E!==he);return x}(o,n);if(!s)return n;var h=Mx(s,o);return Ou(h,h.next),Ou(s,s.next)}function zI(o,n){return Ir(o.prev,o,n.prev)<0&&Ir(n.next,o,o.next)<0}function iy(o,n,s,h,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function FI(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Ic(o,n,s,h,p,v,x,E){return(p-x)*(n-E)>=(o-x)*(v-E)&&(o-x)*(h-E)>=(s-x)*(n-E)&&(s-x)*(v-E)>=(p-x)*(h-E)}function OI(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,h){var p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&Px(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(o,n)&&(lf(o,n)&&lf(n,o)&&function(s,h){var p=s,v=!1,x=(s.x+h.x)/2,E=(s.y+h.y)/2;do p.y>E!=p.next.y>E&&p.next.y!==p.y&&x<(p.next.x-p.x)*(E-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v}(o,n)&&(Ir(o.prev,o,n.prev)||Ir(o,n.prev,n))||Qd(o,n)&&Ir(o.prev,o,o.next)>0&&Ir(n.prev,n,n.next)>0)}function Ir(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function Qd(o,n){return o.x===n.x&&o.y===n.y}function Px(o,n,s,h){var p=tp(Ir(o,n,s)),v=tp(Ir(o,n,h)),x=tp(Ir(s,h,o)),E=tp(Ir(s,h,n));return p!==v&&x!==E||!(p!==0||!ep(o,s,n))||!(v!==0||!ep(o,h,n))||!(x!==0||!ep(s,o,h))||!(E!==0||!ep(s,n,h))}function ep(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function tp(o){return o>0?1:o<0?-1:0}function lf(o,n){return Ir(o.prev,o,o.next)<0?Ir(o,n,o.next)>=0&&Ir(o,o.prev,n)>=0:Ir(o,n,o.prev)<0||Ir(o,o.next,n)<0}function Mx(o,n){var s=new oy(o.i,o.x,o.y),h=new oy(n.i,n.x,n.y),p=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=p,p.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function kx(o,n,s,h){var p=new oy(o,n,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function uf(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function oy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sy(o,n,s,h){for(var p=0,v=n,x=s-h;v<s;v+=h)p+=(o[x]-o[v])*(o[v+1]+o[x+1]),x=v;return p}ry.exports=Jd,ry.exports.default=Jd,Jd.deviation=function(o,n,s,h){var p=n&&n.length,v=Math.abs(sy(o,0,p?n[0]*s:o.length,s));if(p)for(var x=0,E=n.length;x<E;x++)v-=Math.abs(sy(o,n[x]*s,x<E-1?n[x+1]*s:o.length,s));var P=0;for(x=0;x<h.length;x+=3){var O=h[x]*s,H=h[x+1]*s,J=h[x+2]*s;P+=Math.abs((o[O]-o[J])*(o[H+1]-o[O+1])-(o[O]-o[H])*(o[J+1]-o[O+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Jd.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,p=0;p<o.length;p++){for(var v=0;v<o[p].length;v++)for(var x=0;x<n;x++)s.vertices.push(o[p][v][x]);p>0&&s.holes.push(h+=o[p-1].length)}return s};var Lx=w(ry.exports);function RI(o,n,s,h,p){zx(o,n,s||0,h||o.length-1,p||jI)}function zx(o,n,s,h,p){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,E=Math.log(v),P=.5*Math.exp(2*E/3),O=.5*Math.sqrt(E*P*(v-P)/v)*(x-v/2<0?-1:1);zx(o,n,Math.max(s,Math.floor(n-x*P/v+O)),Math.min(h,Math.floor(n+(v-x)*P/v+O)),p)}var H=o[n],J=s,ae=h;for(cf(o,s,n),p(o[h],H)>0&&cf(o,s,h);J<ae;){for(cf(o,J,ae),J++,ae--;p(o[J],H)<0;)J++;for(;p(o[ae],H)>0;)ae--}p(o[s],H)===0?cf(o,s,ae):cf(o,++ae,h),ae<=n&&(s=ae+1),n<=ae&&(h=ae-1)}}function cf(o,n,s){var h=o[n];o[n]=o[s],o[s]=h}function jI(o,n){return o<n?-1:o>n?1:0}function ay(o,n){const s=o.length;if(s<=1)return[o];const h=[];let p,v;for(let x=0;x<s;x++){const E=ue(o[x]);E!==0&&(o[x].area=Math.abs(E),v===void 0&&(v=E<0),v===E<0?(p&&h.push(p),p=[o[x]]):p.push(o[x]))}if(p&&h.push(p),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(RI(h[x],n,1,h[x].length-1,DI),h[x]=h[x].slice(0,n));return h}function DI(o,n){return n.area-o.area}function ly(o,n,s){const h=s.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${o}-pattern`);x.isConstant()||(p=!0);const E=x.constantOr(null);E&&(p=!0,h[E.to]=!0,h[E.from]=!0)}return p}function uy(o,n,s,h,p){const v=p.patternDependencies;for(const x of n){const E=x.paint.get(`${o}-pattern`).value;if(E.kind!=="constant"){let P=E.evaluate({zoom:h-1},s,{},p.availableImages),O=E.evaluate({zoom:h},s,{},p.availableImages),H=E.evaluate({zoom:h+1},s,{},p.availableImages);P=P&&P.name?P.name:P,O=O&&O.name?O.name:O,H=H&&H.name?H.name:H,v[P]=!0,v[O]=!0,v[H]=!0,s.patterns[x.id]={min:P,mid:O,max:H}}}return s}class cy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mt,this.indexArray=new wr,this.indexArray2=new yr,this.programConfigurations=new Lu(n.layers,n.zoom),this.segments=new cr,this.segments2=new cr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=ly("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:E,id:P,index:O,sourceLayerIndex:H}of n){const J=this.layers[0]._featureFilter.needGeometry,ae=Fu(E,J);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),ae,h))continue;const he=v?p.evaluate(ae,{},h,s.availableImages):void 0,pe={id:P,properties:E.properties,type:E.type,sourceLayerIndex:H,index:O,geometry:J?ae.geometry:zu(E),patterns:{},sortKey:he};x.push(pe)}v&&x.sort((E,P)=>E.sortKey-P.sortKey);for(const E of x){const{geometry:P,index:O,sourceLayerIndex:H}=E;if(this.hasPattern){const J=uy("fill",this.layers,E,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(E,P,O,h,{});s.featureIndex.insert(n[O].feature,P,O,H,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,CI),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,p,v){for(const x of ay(s,500)){let E=0;for(const he of x)E+=he.length;const P=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),O=P.vertexLength,H=[],J=[];for(const he of x){if(he.length===0)continue;he!==x[0]&&J.push(H.length/2);const pe=this.segments2.prepareSegment(he.length,this.layoutVertexArray,this.indexArray2),Ie=pe.vertexLength;this.layoutVertexArray.emplaceBack(he[0].x,he[0].y),this.indexArray2.emplaceBack(Ie+he.length-1,Ie),H.push(he[0].x),H.push(he[0].y);for(let Oe=1;Oe<he.length;Oe++)this.layoutVertexArray.emplaceBack(he[Oe].x,he[Oe].y),this.indexArray2.emplaceBack(Ie+Oe-1,Ie+Oe),H.push(he[Oe].x),H.push(he[Oe].y);pe.vertexLength+=he.length,pe.primitiveLength+=he.length}const ae=Lx(H,J);for(let he=0;he<ae.length;he+=3)this.indexArray.emplaceBack(O+ae[he],O+ae[he+1],O+ae[he+2]);P.vertexLength+=E,P.primitiveLength+=ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}let Fx,Ox;Rt("FillBucket",cy,{omit:["layers","patternFeatures"]});var BI={get paint(){return Ox=Ox||new gi({"fill-antialias":new Kt(M.paint_fill["fill-antialias"]),"fill-opacity":new sn(M.paint_fill["fill-opacity"]),"fill-color":new sn(M.paint_fill["fill-color"]),"fill-outline-color":new sn(M.paint_fill["fill-outline-color"]),"fill-translate":new Kt(M.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(M.paint_fill["fill-translate-anchor"]),"fill-pattern":new xc(M.paint_fill["fill-pattern"])})},get layout(){return Fx=Fx||new gi({"fill-sort-key":new sn(M.layout_fill["fill-sort-key"])})}};class NI extends Po{constructor(n){super(n,BI)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new cy(n)}queryRadius(){return qd(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,p,v,x,E){return gx(Kd(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,E),p)}isTileClipped(){return!0}}const UI=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),$I=lr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:VI}=UI;var Al={},GI=I,Rx=Pc;function Pc(o,n,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=h,this._values=p,o.readFields(ZI,this,n)}function ZI(o,n,s){o==1?n.id=s.readVarint():o==2?function(h,p){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=p._keys[h.readVarint()],E=p._values[h.readVarint()];p.properties[x]=E}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function WI(o){for(var n,s,h=0,p=0,v=o.length,x=v-1;p<v;x=p++)h+=((s=o[x]).x-(n=o[p]).x)*(n.y+s.y);return h}Pc.types=["Unknown","Point","LineString","Polygon"],Pc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,h=1,p=0,v=0,x=0,E=[];o.pos<s;){if(p<=0){var P=o.readVarint();h=7&P,p=P>>3}if(p--,h===1||h===2)v+=o.readSVarint(),x+=o.readSVarint(),h===1&&(n&&E.push(n),n=[]),n.push(new GI(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&E.push(n),E},Pc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,h=0,p=0,v=0,x=1/0,E=-1/0,P=1/0,O=-1/0;o.pos<n;){if(h<=0){var H=o.readVarint();s=7&H,h=H>>3}if(h--,s===1||s===2)(p+=o.readSVarint())<x&&(x=p),p>E&&(E=p),(v+=o.readSVarint())<P&&(P=v),v>O&&(O=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,P,E,O]},Pc.prototype.toGeoJSON=function(o,n,s){var h,p,v=this.extent*Math.pow(2,s),x=this.extent*o,E=this.extent*n,P=this.loadGeometry(),O=Pc.types[this.type];function H(he){for(var pe=0;pe<he.length;pe++){var Ie=he[pe];he[pe]=[360*(Ie.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ie.y+E)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(h=0;h<P.length;h++)J[h]=P[h][0];H(P=J);break;case 2:for(h=0;h<P.length;h++)H(P[h]);break;case 3:for(P=function(he){var pe=he.length;if(pe<=1)return[he];for(var Ie,Oe,Be=[],Qe=0;Qe<pe;Qe++){var We=WI(he[Qe]);We!==0&&(Oe===void 0&&(Oe=We<0),Oe===We<0?(Ie&&Be.push(Ie),Ie=[he[Qe]]):Ie.push(he[Qe]))}return Ie&&Be.push(Ie),Be}(P),h=0;h<P.length;h++)for(p=0;p<P[h].length;p++)H(P[h][p])}P.length===1?P=P[0]:O="Multi"+O;var ae={type:"Feature",geometry:{type:O,coordinates:P},properties:this.properties};return"id"in this&&(ae.id=this.id),ae};var HI=Rx,jx=Dx;function Dx(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(XI,this,n),this.length=this._features.length}function XI(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(h){for(var p=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;p=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return p}(s))}Dx.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new HI(this._pbf,n,this.extent,this._keys,this._values)};var qI=jx;function KI(o,n,s){if(o===3){var h=new qI(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Al.VectorTile=function(o,n){this.layers=o.readFields(KI,{},n)},Al.VectorTileFeature=Rx,Al.VectorTileLayer=jx;const YI=Al.VectorTileFeature.types,hy=Math.pow(2,13);function hf(o,n,s,h,p,v,x,E){o.emplaceBack(n,s,2*Math.floor(h*hy)+x,p*hy*2,v*hy*2,Math.round(E))}class fy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new un,this.centroidVertexArray=new Ut,this.indexArray=new wr,this.programConfigurations=new Lu(n.layers,n.zoom),this.segments=new cr,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=ly("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:x,sourceLayerIndex:E}of n){const P=this.layers[0]._featureFilter.needGeometry,O=Fu(p,P);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),O,h))continue;const H={id:v,sourceLayerIndex:E,index:x,geometry:P?O.geometry:zu(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(uy("fill-extrusion",this.layers,H,this.zoom,s)):this.addFeature(H,H.geometry,x,h,{}),s.featureIndex.insert(p,H.geometry,x,E,this.index,!0)}}addFeatures(n,s,h){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,VI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,$I.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,p,v){const x={x:0,y:0,vertexCount:0};for(const E of ay(s,500)){let P=0;for(const pe of E)P+=pe.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const pe of E){if(pe.length===0||QI(pe))continue;let Ie=0;for(let Oe=0;Oe<pe.length;Oe++){const Be=pe[Oe];if(Oe>=1){const Qe=pe[Oe-1];if(!JI(Be,Qe)){O.vertexLength+4>cr.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const We=Be.sub(Qe)._perp()._unit(),et=Qe.dist(Be);Ie+et>32768&&(Ie=0),hf(this.layoutVertexArray,Be.x,Be.y,We.x,We.y,0,0,Ie),hf(this.layoutVertexArray,Be.x,Be.y,We.x,We.y,0,1,Ie),x.x+=2*Be.x,x.y+=2*Be.y,x.vertexCount+=2,Ie+=et,hf(this.layoutVertexArray,Qe.x,Qe.y,We.x,We.y,0,0,Ie),hf(this.layoutVertexArray,Qe.x,Qe.y,We.x,We.y,0,1,Ie),x.x+=2*Qe.x,x.y+=2*Qe.y,x.vertexCount+=2;const it=O.vertexLength;this.indexArray.emplaceBack(it,it+2,it+1),this.indexArray.emplaceBack(it+1,it+2,it+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+P>cr.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),YI[n.type]!=="Polygon")continue;const H=[],J=[],ae=O.vertexLength;for(const pe of E)if(pe.length!==0){pe!==E[0]&&J.push(H.length/2);for(let Ie=0;Ie<pe.length;Ie++){const Oe=pe[Ie];hf(this.layoutVertexArray,Oe.x,Oe.y,0,0,1,1,0),x.x+=Oe.x,x.y+=Oe.y,x.vertexCount+=1,H.push(Oe.x),H.push(Oe.y)}}const he=Lx(H,J);for(let pe=0;pe<he.length;pe+=3)this.indexArray.emplaceBack(ae+he[pe],ae+he[pe+2],ae+he[pe+1]);O.primitiveLength+=he.length/3,O.vertexLength+=P}for(let E=0;E<x.vertexCount;E++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}}function JI(o,n){return o.x===n.x&&(o.x<0||o.x>Fr)||o.y===n.y&&(o.y<0||o.y>Fr)}function QI(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Fr)||o.every(n=>n.y<0)||o.every(n=>n.y>Fr)}let Bx;Rt("FillExtrusionBucket",fy,{omit:["layers","features"]});var eP={get paint(){return Bx=Bx||new gi({"fill-extrusion-opacity":new Kt(M["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(M["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(M["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(M["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xc(M["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(M["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(M["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(M["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tP extends Po{constructor(n){super(n,eP)}createBucket(n){return new fy(n)}queryRadius(){return qd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,p,v,x,E,P){const O=Kd(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,E),H=this.paint.get("fill-extrusion-height").evaluate(s,h),J=this.paint.get("fill-extrusion-base").evaluate(s,h),ae=function(pe,Ie,Oe,Be){const Qe=[];for(const We of pe){const et=[We.x,We.y,0,1];Yd(et,et,Ie),Qe.push(new L(et[0]/et[3],et[1]/et[3]))}return Qe}(O,P),he=function(pe,Ie,Oe,Be){const Qe=[],We=[],et=Be[8]*Ie,it=Be[9]*Ie,vt=Be[10]*Ie,Ft=Be[11]*Ie,Vt=Be[8]*Oe,zt=Be[9]*Oe,kt=Be[10]*Oe,At=Be[11]*Oe;for(const jt of pe){const Pt=[],bt=[];for(const tn of jt){const Ht=tn.x,An=tn.y,ir=Be[0]*Ht+Be[4]*An+Be[12],hr=Be[1]*Ht+Be[5]*An+Be[13],$r=Be[2]*Ht+Be[6]*An+Be[14],go=Be[3]*Ht+Be[7]*An+Be[15],Fi=$r+vt,Or=go+Ft,ei=ir+Vt,ai=hr+zt,Oi=$r+kt,Ri=go+At,Vr=new L((ir+et)/Or,(hr+it)/Or);Vr.z=Fi/Or,Pt.push(Vr);const Gr=new L(ei/Ri,ai/Ri);Gr.z=Oi/Ri,bt.push(Gr)}Qe.push(Pt),We.push(bt)}return[Qe,We]}(p,J,H,P);return function(pe,Ie,Oe){let Be=1/0;gx(Oe,Ie)&&(Be=Nx(Oe,Ie[0]));for(let Qe=0;Qe<Ie.length;Qe++){const We=Ie[Qe],et=pe[Qe];for(let it=0;it<We.length-1;it++){const vt=We[it],Ft=[vt,We[it+1],et[it+1],et[it],vt];mx(Oe,Ft)&&(Be=Math.min(Be,Nx(Oe,Ft)))}}return Be!==1/0&&Be}(he[0],he[1],ae)}}function ff(o,n){return o.x*n.x+o.y*n.y}function Nx(o,n){if(o.length===1){let s=0;const h=n[s++];let p;for(;!p||h.equals(p);)if(p=n[s++],!p)return 1/0;for(;s<n.length;s++){const v=n[s],x=o[0],E=p.sub(h),P=v.sub(h),O=x.sub(h),H=ff(E,E),J=ff(E,P),ae=ff(P,P),he=ff(O,E),pe=ff(O,P),Ie=H*ae-J*J,Oe=(ae*he-J*pe)/Ie,Be=(H*pe-J*he)/Ie,Qe=h.z*(1-Oe-Be)+p.z*Oe+v.z*Be;if(isFinite(Qe))return Qe}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const nP=lr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rP}=nP,iP=lr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:oP}=iP,sP=Al.VectorTileFeature.types,aP=Math.cos(Math.PI/180*37.5),Ux=Math.pow(2,14)/.5;class dy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Zt,this.layoutVertexArray2=new ur,this.indexArray=new wr,this.programConfigurations=new Lu(n.layers,n.zoom),this.segments=new cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=ly("line",this.layers,s);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:E,id:P,index:O,sourceLayerIndex:H}of n){const J=this.layers[0]._featureFilter.needGeometry,ae=Fu(E,J);if(!this.layers[0]._featureFilter.filter(new ar(this.zoom),ae,h))continue;const he=v?p.evaluate(ae,{},h):void 0,pe={id:P,properties:E.properties,type:E.type,sourceLayerIndex:H,index:O,geometry:J?ae.geometry:zu(E),patterns:{},sortKey:he};x.push(pe)}v&&x.sort((E,P)=>E.sortKey-P.sortKey);for(const E of x){const{geometry:P,index:O,sourceLayerIndex:H}=E;if(this.hasPattern){const J=uy("line",this.layers,E,this.zoom,s);this.patternFeatures.push(J)}else this.addFeature(E,P,O,h,{});s.featureIndex.insert(n[O].feature,P,O,H,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,oP)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,rP),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,p,v){const x=this.layers[0].layout,E=x.get("line-join").evaluate(n,{}),P=x.get("line-cap"),O=x.get("line-miter-limit"),H=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const J of s)this.addLine(J,n,E,P,O,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,p)}addLine(n,s,h,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Be=0;Be<n.length-1;Be++)this.totalDistance+=n[Be].dist(n[Be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=sP[s.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let O=0;for(;O<P-1&&n[O].equals(n[O+1]);)O++;if(P<(E?3:2))return;h==="bevel"&&(v=1.05);const H=this.overscaling<=16?15*Fr/(512*this.overscaling):0,J=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ae,he,pe,Ie,Oe;this.e1=this.e2=-1,E&&(ae=n[P-2],Oe=n[O].sub(ae)._unit()._perp());for(let Be=O;Be<P;Be++){if(pe=Be===P-1?E?n[O+1]:void 0:n[Be+1],pe&&n[Be].equals(pe))continue;Oe&&(Ie=Oe),ae&&(he=ae),ae=n[Be],Oe=pe?pe.sub(ae)._unit()._perp():Ie,Ie=Ie||Oe;let Qe=Ie.add(Oe);Qe.x===0&&Qe.y===0||Qe._unit();const We=Ie.x*Oe.x+Ie.y*Oe.y,et=Qe.x*Oe.x+Qe.y*Oe.y,it=et!==0?1/et:1/0,vt=2*Math.sqrt(2-2*et),Ft=et<aP&&he&&pe,Vt=Ie.x*Oe.y-Ie.y*Oe.x>0;if(Ft&&Be>O){const At=ae.dist(he);if(At>2*H){const jt=ae.sub(ae.sub(he)._mult(H/At)._round());this.updateDistance(he,jt),this.addCurrentVertex(jt,Ie,0,0,J),he=jt}}const zt=he&&pe;let kt=zt?h:E?"butt":p;if(zt&&kt==="round"&&(it<x?kt="miter":it<=2&&(kt="fakeround")),kt==="miter"&&it>v&&(kt="bevel"),kt==="bevel"&&(it>2&&(kt="flipbevel"),it<v&&(kt="miter")),he&&this.updateDistance(he,ae),kt==="miter")Qe._mult(it),this.addCurrentVertex(ae,Qe,0,0,J);else if(kt==="flipbevel"){if(it>100)Qe=Oe.mult(-1);else{const At=it*Ie.add(Oe).mag()/Ie.sub(Oe).mag();Qe._perp()._mult(At*(Vt?-1:1))}this.addCurrentVertex(ae,Qe,0,0,J),this.addCurrentVertex(ae,Qe.mult(-1),0,0,J)}else if(kt==="bevel"||kt==="fakeround"){const At=-Math.sqrt(it*it-1),jt=Vt?At:0,Pt=Vt?0:At;if(he&&this.addCurrentVertex(ae,Ie,jt,Pt,J),kt==="fakeround"){const bt=Math.round(180*vt/Math.PI/20);for(let tn=1;tn<bt;tn++){let Ht=tn/bt;if(Ht!==.5){const ir=Ht-.5;Ht+=Ht*ir*(Ht-1)*((1.0904+We*(We*(3.55645-1.43519*We)-3.2452))*ir*ir+(.848013+We*(.215638*We-1.06021)))}const An=Oe.sub(Ie)._mult(Ht)._add(Ie)._unit()._mult(Vt?-1:1);this.addHalfVertex(ae,An.x,An.y,!1,Vt,0,J)}}pe&&this.addCurrentVertex(ae,Oe,-jt,-Pt,J)}else if(kt==="butt")this.addCurrentVertex(ae,Qe,0,0,J);else if(kt==="square"){const At=he?1:-1;this.addCurrentVertex(ae,Qe,At,At,J)}else kt==="round"&&(he&&(this.addCurrentVertex(ae,Ie,0,0,J),this.addCurrentVertex(ae,Ie,1,1,J,!0)),pe&&(this.addCurrentVertex(ae,Oe,-1,-1,J,!0),this.addCurrentVertex(ae,Oe,0,0,J)));if(Ft&&Be<P-1){const At=ae.dist(pe);if(At>2*H){const jt=ae.add(pe.sub(ae)._mult(H/At)._round());this.updateDistance(ae,jt),this.addCurrentVertex(jt,Oe,0,0,J),ae=jt}}}}addCurrentVertex(n,s,h,p,v,x=!1){const E=s.y*p-s.x,P=-s.y-s.x*p;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,E,P,x,!0,-p,v),this.distance>Ux/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,p,v,x))}addHalfVertex({x:n,y:s},h,p,v,x,E,P){const O=.5*(this.lineClips?this.scaledDistance*(Ux-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(E===0?0:E<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,H),P.primitiveLength++),x?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let $x,Vx;Rt("LineBucket",dy,{omit:["layers","patternFeatures"]});var Gx={get paint(){return Vx=Vx||new gi({"line-opacity":new sn(M.paint_line["line-opacity"]),"line-color":new sn(M.paint_line["line-color"]),"line-translate":new Kt(M.paint_line["line-translate"]),"line-translate-anchor":new Kt(M.paint_line["line-translate-anchor"]),"line-width":new sn(M.paint_line["line-width"]),"line-gap-width":new sn(M.paint_line["line-gap-width"]),"line-offset":new sn(M.paint_line["line-offset"]),"line-blur":new sn(M.paint_line["line-blur"]),"line-dasharray":new Jh(M.paint_line["line-dasharray"]),"line-pattern":new xc(M.paint_line["line-pattern"]),"line-gradient":new Jo(M.paint_line["line-gradient"])})},get layout(){return $x=$x||new gi({"line-cap":new Kt(M.layout_line["line-cap"]),"line-join":new sn(M.layout_line["line-join"]),"line-miter-limit":new Kt(M.layout_line["line-miter-limit"]),"line-round-limit":new Kt(M.layout_line["line-round-limit"]),"line-sort-key":new sn(M.layout_line["line-sort-key"])})}};class lP extends sn{possiblyEvaluate(n,s){return s=new ar(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,p){return s=k({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,p)}}let np;class uP extends Po{constructor(n){super(n,Gx),this.gradientVersion=0,np||(np=new lP(Gx.paint.properties["line-width"].specification),np.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Ln,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=np.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new dy(n)}queryRadius(n){const s=n,h=Zx(rf("line-width",this,s),rf("line-gap-width",this,s)),p=rf("line-offset",this,s);return h/2+Math.abs(p)+qd(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,p,v,x,E){const P=Kd(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,E),O=E/2*Zx(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),H=this.paint.get("line-offset").evaluate(s,h);return H&&(p=function(J,ae){const he=[];for(let pe=0;pe<J.length;pe++){const Ie=J[pe],Oe=[];for(let Be=0;Be<Ie.length;Be++){const Qe=Ie[Be-1],We=Ie[Be],et=Ie[Be+1],it=Be===0?new L(0,0):We.sub(Qe)._unit()._perp(),vt=Be===Ie.length-1?new L(0,0):et.sub(We)._unit()._perp(),Ft=it._add(vt)._unit(),Vt=Ft.x*vt.x+Ft.y*vt.y;Vt!==0&&Ft._mult(1/Vt),Oe.push(Ft._mult(ae)._add(We))}he.push(Oe)}return he}(p,H*E)),function(J,ae,he){for(let pe=0;pe<ae.length;pe++){const Ie=ae[pe];if(J.length>=3){for(let Oe=0;Oe<Ie.length;Oe++)if(Cc(J,Ie[Oe]))return!0}if(mI(J,Ie,he))return!0}return!1}(P,p,O)}isTileClipped(){return!0}}function Zx(o,n){return n>0?n+2*o:o}const cP=lr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hP=lr([{name:"a_projected_pos",components:3,type:"Float32"}],4);lr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const fP=lr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);lr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Wx=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),dP=lr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pP(o,n,s){return o.sections.forEach(h=>{h.text=function(p,v,x){const E=v.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?p=p.toLocaleUpperCase():E==="lowercase"&&(p=p.toLocaleLowerCase()),Wi.applyArabicShaping&&(p=Wi.applyArabicShaping(p)),p}(h.text,n,s)}),o}lr([{name:"triangle",components:3,type:"Uint16"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),lr([{type:"Float32",name:"offsetX"}]),lr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),lr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const df={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ur=24,Hx=Qn,Xx=function(o,n,s,h,p){var v,x,E=8*p-h-1,P=(1<<E)-1,O=P>>1,H=-7,J=s?p-1:0,ae=s?-1:1,he=o[n+J];for(J+=ae,v=he&(1<<-H)-1,he>>=-H,H+=E;H>0;v=256*v+o[n+J],J+=ae,H-=8);for(x=v&(1<<-H)-1,v>>=-H,H+=h;H>0;x=256*x+o[n+J],J+=ae,H-=8);if(v===0)v=1-O;else{if(v===P)return x?NaN:1/0*(he?-1:1);x+=Math.pow(2,h),v-=O}return(he?-1:1)*x*Math.pow(2,v-h)},qx=function(o,n,s,h,p,v){var x,E,P,O=8*v-p-1,H=(1<<O)-1,J=H>>1,ae=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=h?0:v-1,pe=h?1:-1,Ie=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(E=isNaN(n)?1:0,x=H):(x=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-x))<1&&(x--,P*=2),(n+=x+J>=1?ae/P:ae*Math.pow(2,1-J))*P>=2&&(x++,P/=2),x+J>=H?(E=0,x=H):x+J>=1?(E=(n*P-1)*Math.pow(2,p),x+=J):(E=n*Math.pow(2,J-1)*Math.pow(2,p),x=0));p>=8;o[s+he]=255&E,he+=pe,E/=256,p-=8);for(x=x<<p|E,O+=p;O>0;o[s+he]=255&x,he+=pe,x/=256,O-=8);o[s+he-pe]|=128*Ie};function Qn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Qn.Varint=0,Qn.Fixed64=1,Qn.Bytes=2,Qn.Fixed32=5;var py=4294967296,Kx=1/py,Yx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ka(o){return o.type===Qn.Bytes?o.readVarint()+o.pos:o.pos+1}function Mc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Jx(o,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=o;p--)s.buf[p+h]=s.buf[p]}function mP(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function gP(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function yP(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function vP(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function _P(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function xP(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function wP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function bP(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function EP(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function rp(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function kc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Qx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}Qn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,v=this.pos;this.type=7&h,o(p,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=rp(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Qx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=rp(this.buf,this.pos)+rp(this.buf,this.pos+4)*py;return this.pos+=8,o},readSFixed64:function(){var o=rp(this.buf,this.pos)+Qx(this.buf,this.pos+4)*py;return this.pos+=8,o},readFloat:function(){var o=Xx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Xx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(p,v,x){var E,P,O=x.buf;if(E=(112&(P=O[x.pos++]))>>4,P<128||(E|=(127&(P=O[x.pos++]))<<3,P<128)||(E|=(127&(P=O[x.pos++]))<<10,P<128)||(E|=(127&(P=O[x.pos++]))<<17,P<128)||(E|=(127&(P=O[x.pos++]))<<24,P<128)||(E|=(1&(P=O[x.pos++]))<<31,P<128))return Mc(p,E,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Yx?function(s,h,p){return Yx.decode(s.subarray(h,p))}(this.buf,n,o):function(s,h,p){for(var v="",x=h;x<p;){var E,P,O,H=s[x],J=null,ae=H>239?4:H>223?3:H>191?2:1;if(x+ae>p)break;ae===1?H<128&&(J=H):ae===2?(192&(E=s[x+1]))==128&&(J=(31&H)<<6|63&E)<=127&&(J=null):ae===3?(P=s[x+2],(192&(E=s[x+1]))==128&&(192&P)==128&&((J=(15&H)<<12|(63&E)<<6|63&P)<=2047||J>=55296&&J<=57343)&&(J=null)):ae===4&&(P=s[x+2],O=s[x+3],(192&(E=s[x+1]))==128&&(192&P)==128&&(192&O)==128&&((J=(15&H)<<18|(63&E)<<12|(63&P)<<6|63&O)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,ae=1):J>65535&&(J-=65536,v+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),v+=String.fromCharCode(J),x+=ae}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Qn.Bytes)return o.push(this.readVarint(n));var s=ka(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Qn.Bytes)return o.push(this.readSVarint());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Qn.Bytes)return o.push(this.readBoolean());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Qn.Bytes)return o.push(this.readFloat());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Qn.Bytes)return o.push(this.readDouble());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Qn.Bytes)return o.push(this.readFixed32());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Qn.Bytes)return o.push(this.readSFixed32());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Qn.Bytes)return o.push(this.readFixed64());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Qn.Bytes)return o.push(this.readSFixed64());var n=ka(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Qn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Qn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Qn.Fixed32)this.pos+=4;else{if(n!==Qn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),kc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),kc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),kc(this.buf,-1&o,this.pos),kc(this.buf,Math.floor(o*Kx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),kc(this.buf,-1&o,this.pos),kc(this.buf,Math.floor(o*Kx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var h,p;if(n>=0?(h=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,E){E.buf[E.pos++]=127&v|128,v>>>=7,E.buf[E.pos++]=127&v|128,v>>>=7,E.buf[E.pos++]=127&v|128,v>>>=7,E.buf[E.pos++]=127&v|128,E.buf[E.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var E=(7&v)<<4;x.buf[x.pos++]|=E|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(h,p,v){for(var x,E,P=0;P<p.length;P++){if((x=p.charCodeAt(P))>55295&&x<57344){if(!E){x>56319||P+1===p.length?(h[v++]=239,h[v++]=191,h[v++]=189):E=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(h[v++]=239,h[v++]=191,h[v++]=189,E=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Jx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),qx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),qx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var h=this.pos-s;h>=128&&Jx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(o,n,s){this.writeTag(o,Qn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,mP,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,gP,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,_P,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,yP,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,vP,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,xP,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,wP,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,bP,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,EP,n)},writeBytesField:function(o,n){this.writeTag(o,Qn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Qn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Qn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Qn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Qn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Qn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Qn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Qn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Qn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Qn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var my=w(Hx);const gy=3;function SP(o,n,s){o===1&&s.readMessage(TP,n)}function TP(o,n,s){if(o===3){const{id:h,bitmap:p,width:v,height:x,left:E,top:P,advance:O}=s.readMessage(CP,{});n.push({id:h,bitmap:new sf({width:v+2*gy,height:x+2*gy},p),metrics:{width:v,height:x,left:E,top:P,advance:O}})}}function CP(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const ew=gy;function tw(o){let n=0,s=0;for(const x of o)n+=x.w*x.h,s=Math.max(s,x.w);o.sort((x,E)=>E.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let p=0,v=0;for(const x of o)for(let E=h.length-1;E>=0;E--){const P=h[E];if(!(x.w>P.w||x.h>P.h)){if(x.x=P.x,x.y=P.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===P.w&&x.h===P.h){const O=h.pop();E<h.length&&(h[E]=O)}else x.h===P.h?(P.x+=x.w,P.w-=x.w):x.w===P.w?(P.y+=x.h,P.h-=x.h):(h.push({x:P.x+x.w,y:P.y,w:P.w-x.w,h:x.h}),P.y+=x.h,P.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const Ki=1;class yy{constructor(n,{pixelRatio:s,version:h,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Ki,this.paddedRect.y+Ki]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ki,this.paddedRect.y+this.paddedRect.h-Ki]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ki)/this.pixelRatio,(this.paddedRect.h-2*Ki)/this.pixelRatio]}}class nw{constructor(n,s){const h={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,p,v);const{w:x,h:E}=tw(v),P=new Mo({width:x||1,height:E||1});for(const O in n){const H=n[O],J=h[O].paddedRect;Mo.copy(H.data,P,{x:0,y:0},{x:J.x+Ki,y:J.y+Ki},H.data)}for(const O in s){const H=s[O],J=p[O].paddedRect,ae=J.x+Ki,he=J.y+Ki,pe=H.data.width,Ie=H.data.height;Mo.copy(H.data,P,{x:0,y:0},{x:ae,y:he},H.data),Mo.copy(H.data,P,{x:0,y:Ie-1},{x:ae,y:he-1},{width:pe,height:1}),Mo.copy(H.data,P,{x:0,y:0},{x:ae,y:he+Ie},{width:pe,height:1}),Mo.copy(H.data,P,{x:pe-1,y:0},{x:ae-1,y:he},{width:1,height:Ie}),Mo.copy(H.data,P,{x:0,y:0},{x:ae+pe,y:he},{width:1,height:Ie})}this.image=P,this.iconPositions=h,this.patternPositions=p}addImages(n,s,h){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*Ki,h:v.data.height+2*Ki};h.push(x),s[p]=new yy(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[p,v]=n.tl;h.update(s.data,void 0,{x:p,y:v})}}var Il;Rt("ImagePosition",yy),Rt("ImageAtlas",nw),a.WritingMode=void 0,(Il=a.WritingMode||(a.WritingMode={}))[Il.none=0]="none",Il[Il.horizontal=1]="horizontal",Il[Il.vertical=2]="vertical",Il[Il.horizontalOnly=3]="horizontalOnly";const pf=-17;class mf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new mf;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new mf;return s.imageName=n,s}}class Lc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new Lc;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const p=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=p&&Nd(p)&&!df[n[h+1]]||v&&Nd(v)&&!df[n[h-1]]||!df[n[h]]?n[h]:df[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&op[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&op[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new Lc;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(mf.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void xe("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(mf.forImage(s)),this.sectionIndex.push(this.sections.length-1)):xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ip(o,n,s,h,p,v,x,E,P,O,H,J,ae,he,pe,Ie){const Oe=Lc.fromFeature(o,p);let Be;J===a.WritingMode.vertical&&Oe.verticalizePunctuation();const{processBidirectionalText:Qe,processStyledBidirectionalText:We}=Wi;if(Qe&&Oe.sections.length===1){Be=[];const vt=Qe(Oe.toString(),vy(Oe,O,v,n,h,he,pe));for(const Ft of vt){const Vt=new Lc;Vt.text=Ft,Vt.sections=Oe.sections;for(let zt=0;zt<Ft.length;zt++)Vt.sectionIndex.push(0);Be.push(Vt)}}else if(We){Be=[];const vt=We(Oe.text,Oe.sectionIndex,vy(Oe,O,v,n,h,he,pe));for(const Ft of vt){const Vt=new Lc;Vt.text=Ft[0],Vt.sectionIndex=Ft[1],Vt.sections=Oe.sections,Be.push(Vt)}}else Be=function(vt,Ft){const Vt=[],zt=vt.text;let kt=0;for(const At of Ft)Vt.push(vt.substring(kt,At)),kt=At;return kt<zt.length&&Vt.push(vt.substring(kt,zt.length)),Vt}(Oe,vy(Oe,O,v,n,h,he,pe));const et=[],it={positionedLines:et,text:Oe.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(vt,Ft,Vt,zt,kt,At,jt,Pt,bt,tn,Ht,An){let ir=0,hr=pf,$r=0,go=0;const Fi=Pt==="right"?1:Pt==="left"?0:.5;let Or=0;for(const Vr of kt){Vr.trim();const Gr=Vr.getMaxScale(),vi=(Gr-1)*Ur,ji={positionedGlyphs:[],lineOffset:0};vt.positionedLines[Or]=ji;const _i=ji.positionedGlyphs;let Yi=0;if(!Vr.length()){hr+=At,++Or;continue}for(let Zr=0;Zr<Vr.length();Zr++){const zn=Vr.getSection(Zr),xi=Vr.getSectionIndex(Zr),li=Vr.getCharCode(Zr);let Wr=0,ts=null,xs=null,ws=null,La=Ur;const ns=!(bt===a.WritingMode.horizontal||!Ht&&!$h(li)||Ht&&(op[li]||(ei=li,Ot.Arabic(ei)||Ot["Arabic Supplement"](ei)||Ot["Arabic Extended-A"](ei)||Ot["Arabic Presentation Forms-A"](ei)||Ot["Arabic Presentation Forms-B"](ei))));if(zn.imageName){const Lo=zt[zn.imageName];if(!Lo)continue;ws=zn.imageName,vt.iconsInText=vt.iconsInText||!0,xs=Lo.paddedRect;const Qi=Lo.displaySize;zn.scale=zn.scale*Ur/An,ts={width:Qi[0],height:Qi[1],left:Ki,top:-ew,advance:ns?Qi[1]:Qi[0]},Wr=vi+(Ur-Qi[1]*zn.scale),La=ts.advance;const za=ns?Qi[0]*zn.scale-Ur*Gr:Qi[1]*zn.scale-Ur*Gr;za>0&&za>Yi&&(Yi=za)}else{const Lo=Vt[zn.fontStack],Qi=Lo&&Lo[li];if(Qi&&Qi.rect)xs=Qi.rect,ts=Qi.metrics;else{const za=Ft[zn.fontStack],xf=za&&za[li];if(!xf)continue;ts=xf.metrics}Wr=(Gr-zn.scale)*Ur}ns?(vt.verticalizable=!0,_i.push({glyph:li,imageName:ws,x:ir,y:hr+Wr,vertical:ns,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:xi,metrics:ts,rect:xs}),ir+=La*zn.scale+tn):(_i.push({glyph:li,imageName:ws,x:ir,y:hr+Wr,vertical:ns,scale:zn.scale,fontStack:zn.fontStack,sectionIndex:xi,metrics:ts,rect:xs}),ir+=ts.advance*zn.scale+tn)}_i.length!==0&&($r=Math.max(ir-tn,$r),PP(_i,0,_i.length-1,Fi,Yi)),ir=0;const Ji=At*Gr+Yi;ji.lineOffset=Math.max(Yi,vi),hr+=Ji,go=Math.max(Ji,go),++Or}var ei;const ai=hr-pf,{horizontalAlign:Oi,verticalAlign:Ri}=_y(jt);(function(Vr,Gr,vi,ji,_i,Yi,Ji,Zr,zn){const xi=(Gr-vi)*_i;let li=0;li=Yi!==Ji?-Zr*ji-pf:(-ji*zn+.5)*Ji;for(const Wr of Vr)for(const ts of Wr.positionedGlyphs)ts.x+=xi,ts.y+=li})(vt.positionedLines,Fi,Oi,Ri,$r,go,At,ai,kt.length),vt.top+=-Ri*ai,vt.bottom=vt.top+ai,vt.left+=-Oi*$r,vt.right=vt.left+$r}(it,n,s,h,Be,x,E,P,J,O,ae,Ie),!function(vt){for(const Ft of vt)if(Ft.positionedGlyphs.length!==0)return!1;return!0}(et)&&it}const op={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},AP={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function rw(o,n,s,h,p,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Ur/v+p:0}{const x=s[n.fontStack],E=x&&x[o];return E?E.metrics.advance*n.scale+p:0}}function iw(o,n,s,h){const p=Math.pow(o-n,2);return h?o<n?p/2:2*p:p+Math.abs(s)*s}function IP(o,n,s){let h=0;return o===10&&(h-=1e4),s&&(h+=150),o!==40&&o!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function ow(o,n,s,h,p,v){let x=null,E=iw(n,s,p,v);for(const P of h){const O=iw(n-P.x,s,p,v)+P.badness;O<=E&&(x=P,E=O)}return{index:o,x:n,priorBreak:x,badness:E}}function sw(o){return o?sw(o.priorBreak).concat(o.index):[]}function vy(o,n,s,h,p,v,x){if(v!=="point")return[];if(!o)return[];const E=[],P=function(ae,he,pe,Ie,Oe,Be){let Qe=0;for(let We=0;We<ae.length();We++){const et=ae.getSection(We);Qe+=rw(ae.getCharCode(We),et,Ie,Oe,he,Be)}return Qe/Math.max(1,Math.ceil(Qe/pe))}(o,n,s,h,p,x),O=o.text.indexOf("")>=0;let H=0;for(let ae=0;ae<o.length();ae++){const he=o.getSection(ae),pe=o.getCharCode(ae);if(op[pe]||(H+=rw(pe,he,h,p,n,x)),ae<o.length()-1){const Ie=!((J=pe)<11904||!(Ot["Bopomofo Extended"](J)||Ot.Bopomofo(J)||Ot["CJK Compatibility Forms"](J)||Ot["CJK Compatibility Ideographs"](J)||Ot["CJK Compatibility"](J)||Ot["CJK Radicals Supplement"](J)||Ot["CJK Strokes"](J)||Ot["CJK Symbols and Punctuation"](J)||Ot["CJK Unified Ideographs Extension A"](J)||Ot["CJK Unified Ideographs"](J)||Ot["Enclosed CJK Letters and Months"](J)||Ot["Halfwidth and Fullwidth Forms"](J)||Ot.Hiragana(J)||Ot["Ideographic Description Characters"](J)||Ot["Kangxi Radicals"](J)||Ot["Katakana Phonetic Extensions"](J)||Ot.Katakana(J)||Ot["Vertical Forms"](J)||Ot["Yi Radicals"](J)||Ot["Yi Syllables"](J)));(AP[pe]||Ie||he.imageName)&&E.push(ow(ae+1,H,P,E,IP(pe,o.getCharCode(ae+1),Ie&&O),!1))}}var J;return sw(ow(o.length(),H,P,E,0,!0))}function _y(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function PP(o,n,s,h,p){if(!h&&!p)return;const v=o[s],x=(o[s].x+v.metrics.advance*v.scale)*h;for(let E=n;E<=s;E++)o[E].x-=x,o[E].y+=p}function MP(o,n,s){const{horizontalAlign:h,verticalAlign:p}=_y(s),v=n[0]-o.displaySize[0]*h,x=n[1]-o.displaySize[1]*p;return{image:o,top:x,bottom:x+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function aw(o,n,s,h,p,v){const x=o.image;let E;if(x.content){const Oe=x.content,Be=x.pixelRatio||1;E=[Oe[0]/Be,Oe[1]/Be,x.displaySize[0]-Oe[2]/Be,x.displaySize[1]-Oe[3]/Be]}const P=n.left*v,O=n.right*v;let H,J,ae,he;s==="width"||s==="both"?(he=p[0]+P-h[3],J=p[0]+O+h[1]):(he=p[0]+(P+O-x.displaySize[0])/2,J=he+x.displaySize[0]);const pe=n.top*v,Ie=n.bottom*v;return s==="height"||s==="both"?(H=p[1]+pe-h[0],ae=p[1]+Ie+h[2]):(H=p[1]+(pe+Ie-x.displaySize[1])/2,ae=H+x.displaySize[1]),{image:x,top:H,right:J,bottom:ae,left:he,collisionPadding:E}}const gf=255,ra=128,Pl=gf*ra;function lw(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new ar(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=s;let v=0;for(;v<h.length&&h[v]<=o;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<o+1;)x++;x=Math.min(h.length-1,x);const E=h[v],P=h[x];return s.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:P,interpolationType:p}:{kind:"camera",minZoom:E,maxZoom:P,minSize:s.evaluate(new ar(E)),maxSize:s.evaluate(new ar(P)),interpolationType:p}}}function xy(o,n,s){let h="never";const p=o.get(n);return p?h=p:o.get(s)&&(h="always"),h}const kP=Al.VectorTileFeature.types,LP=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sp(o,n,s,h,p,v,x,E,P,O,H,J,ae){const he=E?Math.min(Pl,Math.round(E[0])):0,pe=E?Math.min(Pl,Math.round(E[1])):0;o.emplaceBack(n,s,Math.round(32*h),Math.round(32*p),v,x,(he<<1)+(P?1:0),pe,16*O,16*H,256*J,256*ae)}function wy(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function zP(o){for(const n of o.sections)if(Xg(n.text))return!0;return!1}class by{constructor(n){this.layoutVertexArray=new bn,this.indexArray=new wr,this.programConfigurations=n,this.segments=new cr,this.dynamicLayoutVertexArray=new Pn,this.opacityVertexArray=new Sr,this.hasVisibleVertices=!1,this.placedSymbolArray=new nt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,cP.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,hP.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,LP,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Rt("SymbolBuffers",by);class Ey{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new cr,this.collisionVertexArray=new mo}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,fP.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Rt("CollisionBuffers",Ey);class zc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ey([]),this.placementViewportMatrix=ey([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lw(this.zoom,s["text-size"]),this.iconSizeData=lw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=xy(h,"text-overlap","text-allow-overlap")!=="never"||xy(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>a.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new by(new Lu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new by(new Lu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new st,this.lineVertexArray=new at,this.symbolInstances=new Je,this.textAnchorOffsets=new wt}calculateGlyphDependencies(n,s,h,p,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||p)&&v){const E=df[n.charAt(x)];E&&(s[E.charCodeAt(0)]=!0)}}populate(n,s,h){const p=this.layers[0],v=p.layout,x=v.get("text-font"),E=v.get("text-field"),P=v.get("icon-image"),O=(E.value.kind!=="constant"||E.value.value instanceof fi&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),H=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,J=v.get("symbol-sort-key");if(this.features=[],!O&&!H)return;const ae=s.iconDependencies,he=s.glyphDependencies,pe=s.availableImages,Ie=new ar(this.zoom);for(const{feature:Oe,id:Be,index:Qe,sourceLayerIndex:We}of n){const et=p._featureFilter.needGeometry,it=Fu(Oe,et);if(!p._featureFilter.filter(Ie,it,h))continue;let vt,Ft;if(et||(it.geometry=zu(Oe)),O){const zt=p.getValueAndResolveTokens("text-field",it,h,pe),kt=fi.factory(zt);zP(kt)&&(this.hasRTLText=!0),(!this.hasRTLText||qh()==="unavailable"||this.hasRTLText&&Wi.isParsed())&&(vt=pP(kt,p,it))}if(H){const zt=p.getValueAndResolveTokens("icon-image",it,h,pe);Ft=zt instanceof ri?zt:ri.fromString(zt)}if(!vt&&!Ft)continue;const Vt=this.sortFeaturesByKey?J.evaluate(it,{},h):void 0;if(this.features.push({id:Be,text:vt,icon:Ft,index:Qe,sourceLayerIndex:We,geometry:it.geometry,properties:Oe.properties,type:kP[Oe.type],sortKey:Vt}),Ft&&(ae[Ft.name]=!0),vt){const zt=x.evaluate(it,{},h).join(","),kt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const At of vt.sections)if(At.image)ae[At.image.name]=!0;else{const jt=Au(vt.toString()),Pt=At.fontStack||zt,bt=he[Pt]=he[Pt]||{};this.calculateGlyphDependencies(At.text,bt,kt,this.allowVerticalPlacement,jt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Oe){const Be={},Qe={},We=[];let et=0;function it(zt){We.push(Oe[zt]),et++}function vt(zt,kt,At){const jt=Qe[zt];return delete Qe[zt],Qe[kt]=jt,We[jt].geometry[0].pop(),We[jt].geometry[0]=We[jt].geometry[0].concat(At[0]),jt}function Ft(zt,kt,At){const jt=Be[kt];return delete Be[kt],Be[zt]=jt,We[jt].geometry[0].shift(),We[jt].geometry[0]=At[0].concat(We[jt].geometry[0]),jt}function Vt(zt,kt,At){const jt=At?kt[0][kt[0].length-1]:kt[0][0];return`${zt}:${jt.x}:${jt.y}`}for(let zt=0;zt<Oe.length;zt++){const kt=Oe[zt],At=kt.geometry,jt=kt.text?kt.text.toString():null;if(!jt){it(zt);continue}const Pt=Vt(jt,At),bt=Vt(jt,At,!0);if(Pt in Qe&&bt in Be&&Qe[Pt]!==Be[bt]){const tn=Ft(Pt,bt,At),Ht=vt(Pt,bt,We[tn].geometry);delete Be[Pt],delete Qe[bt],Qe[Vt(jt,We[Ht].geometry,!0)]=Ht,We[tn].geometry=null}else Pt in Qe?vt(Pt,bt,At):bt in Be?Ft(Pt,bt,At):(it(zt),Be[Pt]=et-1,Qe[bt]=et-1)}return We.filter(zt=>zt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Oe,Be)=>Oe.sortKey-Be.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let E=n.segment+1;E<s.length;E++)x[E]={x:s[E].x,y:s[E].y,tileUnitDistanceFromAnchor:p},E<s.length-1&&(p+=s[E+1].dist(s[E]));for(let E=n.segment||0;E>=0;E--)x[E]={x:s[E].x,y:s[E].y,tileUnitDistanceFromAnchor:v},E>0&&(v+=s[E-1].dist(s[E]));for(let E=0;E<s.length;E++){const P=x[E];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,p,v,x,E,P,O,H,J,ae){const he=n.indexArray,pe=n.layoutVertexArray,Ie=n.segments.prepareSegment(4*s.length,pe,he,this.canOverlap?x.sortKey:void 0),Oe=this.glyphOffsetArray.length,Be=Ie.vertexLength,Qe=this.allowVerticalPlacement&&E===a.WritingMode.vertical?Math.PI/2:0,We=x.text&&x.text.sections;for(let et=0;et<s.length;et++){const{tl:it,tr:vt,bl:Ft,br:Vt,tex:zt,pixelOffsetTL:kt,pixelOffsetBR:At,minFontScaleX:jt,minFontScaleY:Pt,glyphOffset:bt,isSDF:tn,sectionIndex:Ht}=s[et],An=Ie.vertexLength,ir=bt[1];sp(pe,P.x,P.y,it.x,ir+it.y,zt.x,zt.y,h,tn,kt.x,kt.y,jt,Pt),sp(pe,P.x,P.y,vt.x,ir+vt.y,zt.x+zt.w,zt.y,h,tn,At.x,kt.y,jt,Pt),sp(pe,P.x,P.y,Ft.x,ir+Ft.y,zt.x,zt.y+zt.h,h,tn,kt.x,At.y,jt,Pt),sp(pe,P.x,P.y,Vt.x,ir+Vt.y,zt.x+zt.w,zt.y+zt.h,h,tn,At.x,At.y,jt,Pt),wy(n.dynamicLayoutVertexArray,P,Qe),he.emplaceBack(An,An+1,An+2),he.emplaceBack(An+1,An+2,An+3),Ie.vertexLength+=4,Ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),et!==s.length-1&&Ht===s[et+1].sectionIndex||n.programConfigurations.populatePaintArrays(pe.length,x,x.index,{},ae,We&&We[Ht])}n.placedSymbolArray.emplaceBack(P.x,P.y,Oe,this.glyphOffsetArray.length-Oe,Be,O,H,P.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],E,0,!1,0,J)}_addCollisionDebugVertex(n,s,h,p,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,p,v,x,E){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),O=P.vertexLength,H=v.layoutVertexArray,J=v.collisionVertexArray,ae=E.anchorX,he=E.anchorY;this._addCollisionDebugVertex(H,J,x,ae,he,new L(n,s)),this._addCollisionDebugVertex(H,J,x,ae,he,new L(h,s)),this._addCollisionDebugVertex(H,J,x,ae,he,new L(h,p)),this._addCollisionDebugVertex(H,J,x,ae,he,new L(n,p)),P.vertexLength+=4;const pe=v.indexArray;pe.emplaceBack(O,O+1),pe.emplaceBack(O+1,O+2),pe.emplaceBack(O+2,O+3),pe.emplaceBack(O+3,O),P.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,p){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ey(tr,Wx.members,yr),this.iconCollisionBox=new Ey(tr,Wx.members,yr);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,p,v,x,E,P,O){const H={};for(let J=s;J<h;J++){const ae=n.get(J);H.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},H.textFeatureIndex=ae.featureIndex;break}for(let J=p;J<v;J++){const ae=n.get(J);H.verticalTextBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},H.verticalTextFeatureIndex=ae.featureIndex;break}for(let J=x;J<E;J++){const ae=n.get(J);H.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},H.iconFeatureIndex=ae.featureIndex;break}for(let J=P;J<O;J++){const ae=n.get(J);H.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},H.verticalIconFeatureIndex=ae.featureIndex;break}return H}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),p=[],v=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const P=this.symbolInstances.get(E);p.push(0|Math.round(s*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return x.sort((E,P)=>p[E]-p[P]||v[P]-v[E]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let uw,cw;Rt("SymbolBucket",zc,{omit:["layers","collisionBoxArray","features","compareText"]}),zc.MAX_GLYPHS=65535,zc.addDynamicAttributes=wy;var Sy={get paint(){return cw=cw||new gi({"icon-opacity":new sn(M.paint_symbol["icon-opacity"]),"icon-color":new sn(M.paint_symbol["icon-color"]),"icon-halo-color":new sn(M.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(M.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(M.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(M.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(M.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(M.paint_symbol["text-opacity"]),"text-color":new sn(M.paint_symbol["text-color"],{runtimeType:Er,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new sn(M.paint_symbol["text-halo-color"]),"text-halo-width":new sn(M.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(M.paint_symbol["text-halo-blur"]),"text-translate":new Kt(M.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(M.paint_symbol["text-translate-anchor"])})},get layout(){return uw=uw||new gi({"symbol-placement":new Kt(M.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(M.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(M.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(M.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(M.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(M.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(M.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(M.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(M.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(M.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(M.layout_symbol["icon-size"]),"icon-text-fit":new Kt(M.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(M.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(M.layout_symbol["icon-image"]),"icon-rotate":new sn(M.layout_symbol["icon-rotate"]),"icon-padding":new sn(M.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(M.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(M.layout_symbol["icon-offset"]),"icon-anchor":new sn(M.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(M.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(M.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(M.layout_symbol["text-rotation-alignment"]),"text-field":new sn(M.layout_symbol["text-field"]),"text-font":new sn(M.layout_symbol["text-font"]),"text-size":new sn(M.layout_symbol["text-size"]),"text-max-width":new sn(M.layout_symbol["text-max-width"]),"text-line-height":new Kt(M.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(M.layout_symbol["text-letter-spacing"]),"text-justify":new sn(M.layout_symbol["text-justify"]),"text-radial-offset":new sn(M.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(M.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new sn(M.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new sn(M.layout_symbol["text-anchor"]),"text-max-angle":new Kt(M.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(M.layout_symbol["text-writing-mode"]),"text-rotate":new sn(M.layout_symbol["text-rotate"]),"text-padding":new Kt(M.layout_symbol["text-padding"]),"text-keep-upright":new Kt(M.layout_symbol["text-keep-upright"]),"text-transform":new sn(M.layout_symbol["text-transform"]),"text-offset":new sn(M.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(M.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(M.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(M.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(M.layout_symbol["text-optional"])})}};class hw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Mn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Rt("FormatSectionOverride",hw,{omit:["defaultValue"]});class ap extends Po{constructor(n){super(n,Sy)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const v of h)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,p){const v=this.layout.get(n).evaluate(s,{},h,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||gs(x.value)||!v?v:function(E,P){return P.replace(/{([^{}]+)}/g,(O,H)=>H in E?String(E[H]):"")}(s.properties,v)}createBucket(n){return new zc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Sy.paint.overridableProperties){if(!ap.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new hw(s),p=new xu(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new yl("source",p):new Sa("composite",p,s.value.zoomStops),this.paint._values[n]=new Yo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&ap.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),p=Sy.paint.properties[s];let v=!1;const x=E=>{for(const P of E)if(p.overrides&&p.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof fi)x(h.value.value.sections);else if(h.value.kind==="source"){const E=O=>{v||(O instanceof Eo&&on(O.value)===ke?x(O.value.sections):O instanceof dl?x(O.sections):O.eachChild(E))},P=h.value;P._styleExpression&&E(P._styleExpression.expression)}return v}}let fw;var FP={get paint(){return fw=fw||new gi({"background-color":new Kt(M.paint_background["background-color"]),"background-pattern":new Jh(M.paint_background["background-pattern"]),"background-opacity":new Kt(M.paint_background["background-opacity"])})}};class OP extends Po{constructor(n){super(n,FP)}}let dw;var RP={get paint(){return dw=dw||new gi({"raster-opacity":new Kt(M.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(M.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(M.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(M.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(M.paint_raster["raster-saturation"]),"raster-contrast":new Kt(M.paint_raster["raster-contrast"]),"raster-resampling":new Kt(M.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(M.paint_raster["raster-fade-duration"])})}};class jP extends Po{constructor(n){super(n,RP)}}class DP extends Po{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class BP{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ty=63710088e-1;class Ml{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ml(S(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,p=n.lat*s,v=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((n.lng-this.lng)*s);return Ty*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Ml)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ml(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ml(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const pw=2*Math.PI*Ty;function mw(o){return pw*Math.cos(o*Math.PI/180)}function gw(o){return(180+o)/360}function yw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function vw(o,n){return o/mw(n)}function Cy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class lp{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Ml.convert(n);return new lp(gw(h.lng),yw(h.lat),vw(s,h.lat))}toLngLat(){return new Ml(360*this.x-180,Cy(this.y))}toAltitude(){return this.z*mw(Cy(this.y))}meterInMercatorCoordinateUnits(){return 1/pw*(n=Cy(this.y),1/Math.cos(n*Math.PI/180));var n}}function _w(o,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[o*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class Ay{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=yf(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const p=(x=this.y,E=this.z,P=_w(256*(v=this.x),256*(x=Math.pow(2,E)-x-1),E),O=_w(256*(v+1),256*(x+1),E),P[0]+","+P[1]+","+O[0]+","+O[1]);var v,x,E,P,O;const H=function(J,ae,he){let pe,Ie="";for(let Oe=J;Oe>0;Oe--)pe=1<<Oe-1,Ie+=(ae&pe?1:0)+(he&pe?2:0);return Ie}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new L((n.x*s-this.x)*Fr,(n.y*s-this.y)*Fr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=yf(n,s.z,s.z,s.x,s.y)}}class ko{constructor(n,s,h,p,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new Ay(h,+p,+v),this.key=yf(s,n,h,p,v)}clone(){return new ko(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new ko(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ko(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?yf(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):yf(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new ko(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new ko(s,this.wrap,s,h,p),new ko(s,this.wrap,s,h+1,p),new ko(s,this.wrap,s,h,p+1),new ko(s,this.wrap,s,h+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new ko(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new ko(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new lp(n.x-this.wrap,n.y))}}function yf(o,n,s,h,p){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*p+h).toString(36)+s.toString(36)+n.toString(36)}Rt("CanonicalTileID",Ay),Rt("OverscaledTileID",ko,{omit:["posMatrix"]});class ww{constructor(n,s,h,p=1,v=1,x=1,E=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void xe(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const P=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<P;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(P,O)]=this.data[this._idx(P-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,P)]=this.data[this._idx(O,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<P;O++)for(let H=0;H<P;H++){const J=this.get(O,H);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(n,s){const h=new Uint8Array(this.data.buffer),p=4*this._idx(n,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Mo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,E=h*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(h){case-1:x=E-1;break;case 1:E=x+1}const P=-s*this.dim,O=-h*this.dim;for(let H=x;H<E;H++)for(let J=p;J<v;J++)this.data[this._idx(J,H)]=n.data[this._idx(J+P,H+O)]}}Rt("DEMData",ww);class bw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Ew{constructor(n,s,h,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class Sw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ao(Fr,16,0),this.grid3D=new Ao(Fr,16,0),this.featureIndexArray=new St,this.promoteId=s}insert(n,s,h,p,v,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,v);const P=x?this.grid3D:this.grid;for(let O=0;O<s.length;O++){const H=s[O],J=[1/0,1/0,-1/0,-1/0];for(let ae=0;ae<H.length;ae++){const he=H[ae];J[0]=Math.min(J[0],he.x),J[1]=Math.min(J[1],he.y),J[2]=Math.max(J[2],he.x),J[3]=Math.max(J[3],he.y)}J[0]<Fr&&J[1]<Fr&&J[2]>=0&&J[3]>=0&&P.insert(E,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Al.VectorTile(new my(this.rawTileData)).layers,this.sourceLayerCoder=new bw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,p){this.loadVTLayers();const v=n.params||{},x=Fr/n.tileSize/n.scale,E=To(v.filter),P=n.queryGeometry,O=n.queryPadding*x,H=Cw(P),J=this.grid.query(H.minX-O,H.minY-O,H.maxX+O,H.maxY+O),ae=Cw(n.cameraQueryGeometry),he=this.grid3D.query(ae.minX-O,ae.minY-O,ae.maxX+O,ae.maxY+O,(Oe,Be,Qe,We)=>function(et,it,vt,Ft,Vt){for(const kt of et)if(it<=kt.x&&vt<=kt.y&&Ft>=kt.x&&Vt>=kt.y)return!0;const zt=[new L(it,vt),new L(it,Vt),new L(Ft,Vt),new L(Ft,vt)];if(et.length>2){for(const kt of zt)if(Cc(et,kt))return!0}for(let kt=0;kt<et.length-1;kt++)if(yI(et[kt],et[kt+1],zt))return!0;return!1}(n.cameraQueryGeometry,Oe-O,Be-O,Qe+O,We+O));for(const Oe of he)J.push(Oe);J.sort(NP);const pe={};let Ie;for(let Oe=0;Oe<J.length;Oe++){const Be=J[Oe];if(Be===Ie)continue;Ie=Be;const Qe=this.featureIndexArray.get(Be);let We=null;this.loadMatchingFeature(pe,Qe.bucketIndex,Qe.sourceLayerIndex,Qe.featureIndex,E,v.layers,v.availableImages,s,h,p,(et,it,vt)=>(We||(We=zu(et)),it.queryIntersectsFeature(P,et,vt,We,this.z,n.transform,x,n.pixelPosMatrix)))}return pe}loadMatchingFeature(n,s,h,p,v,x,E,P,O,H,J){const ae=this.bucketLayerIDs[s];if(x&&!function(Oe,Be){for(let Qe=0;Qe<Oe.length;Qe++)if(Be.indexOf(Oe[Qe])>=0)return!0;return!1}(x,ae))return;const he=this.sourceLayerCoder.decode(h),pe=this.vtLayers[he].feature(p);if(v.needGeometry){const Oe=Fu(pe,!0);if(!v.filter(new ar(this.tileID.overscaledZ),Oe,this.tileID.canonical))return}else if(!v.filter(new ar(this.tileID.overscaledZ),pe))return;const Ie=this.getId(pe,he);for(let Oe=0;Oe<ae.length;Oe++){const Be=ae[Oe];if(x&&x.indexOf(Be)<0)continue;const Qe=P[Be];if(!Qe)continue;let We={};Ie&&H&&(We=H.getState(Qe.sourceLayer||"_geojsonTileLayer",Ie));const et=k({},O[Be]);et.paint=Tw(et.paint,Qe.paint,pe,We,E),et.layout=Tw(et.layout,Qe.layout,pe,We,E);const it=!J||J(pe,Qe,We);if(!it)continue;const vt=new Ew(pe,this.z,this.x,this.y,Ie);vt.layer=et;let Ft=n[Be];Ft===void 0&&(Ft=n[Be]=[]),Ft.push({featureIndex:p,feature:vt,intersectionZ:it})}}lookupSymbolFeatures(n,s,h,p,v,x,E,P){const O={};this.loadVTLayers();const H=To(v);for(const J of n)this.loadMatchingFeature(O,h,p,J,H,x,E,P,s);return O}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Tw(o,n,s,h,p){return q(o,(v,x)=>{const E=n instanceof _c?n.get(x):null;return E&&E.evaluate?E.evaluate(s,h,p):E})}function Cw(o){let n=1/0,s=1/0,h=-1/0,p=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),p=Math.max(p,v.y);return{minX:n,minY:s,maxX:h,maxY:p}}function NP(o,n){return n-o}function Aw(o,n,s,h,p){const v=[];for(let x=0;x<o.length;x++){const E=o[x];let P;for(let O=0;O<E.length-1;O++){let H=E[O],J=E[O+1];H.x<n&&J.x<n||(H.x<n?H=new L(n,H.y+(n-H.x)/(J.x-H.x)*(J.y-H.y))._round():J.x<n&&(J=new L(n,H.y+(n-H.x)/(J.x-H.x)*(J.y-H.y))._round()),H.y<s&&J.y<s||(H.y<s?H=new L(H.x+(s-H.y)/(J.y-H.y)*(J.x-H.x),s)._round():J.y<s&&(J=new L(H.x+(s-H.y)/(J.y-H.y)*(J.x-H.x),s)._round()),H.x>=h&&J.x>=h||(H.x>=h?H=new L(h,H.y+(h-H.x)/(J.x-H.x)*(J.y-H.y))._round():J.x>=h&&(J=new L(h,H.y+(h-H.x)/(J.x-H.x)*(J.y-H.y))._round()),H.y>=p&&J.y>=p||(H.y>=p?H=new L(H.x+(p-H.y)/(J.y-H.y)*(J.x-H.x),p)._round():J.y>=p&&(J=new L(H.x+(p-H.y)/(J.y-H.y)*(J.x-H.x),p)._round()),P&&H.equals(P[P.length-1])||(P=[H],v.push(P)),P.push(J)))))}}return v}Rt("FeatureIndex",Sw,{omit:["rawTileData","sourceLayerCoder"]});class kl extends L{constructor(n,s,h,p){super(n,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new kl(this.x,this.y,this.angle,this.segment)}}function Iw(o,n,s,h,p){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,E=0;for(;E>-s/2;){if(x--,x<0)return!1;E-=o[x].dist(v),v=o[x]}E+=o[x].dist(o[x+1]),x++;const P=[];let O=0;for(;E<s/2;){const H=o[x],J=o[x+1];if(!J)return!1;let ae=o[x-1].angleTo(H)-H.angleTo(J);for(ae=Math.abs((ae+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:E,angleDelta:ae}),O+=ae;E-P[0].distance>h;)O-=P.shift().angleDelta;if(O>p)return!1;x++,E+=H.dist(J)}return!0}function Pw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function Mw(o,n,s){return o?.6*n*s:0}function kw(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function UP(o,n,s,h,p,v){const x=Mw(s,p,v),E=kw(s,h)*v;let P=0;const O=Pw(o)/2;for(let H=0;H<o.length-1;H++){const J=o[H],ae=o[H+1],he=J.dist(ae);if(P+he>O){const pe=(O-P)/he,Ie=ii.number(J.x,ae.x,pe),Oe=ii.number(J.y,ae.y,pe),Be=new kl(Ie,Oe,ae.angleTo(J),H);return Be._round(),!x||Iw(o,Be,E,x,n)?Be:void 0}P+=he}}function $P(o,n,s,h,p,v,x,E,P){const O=Mw(h,v,x),H=kw(h,p),J=H*x,ae=o[0].x===0||o[0].x===P||o[0].y===0||o[0].y===P;return n-J<n/4&&(n=J+n/4),Lw(o,ae?n/2*E%n:(H/2+2*v)*x*E%n,n,O,s,J,ae,!1,P)}function Lw(o,n,s,h,p,v,x,E,P){const O=v/2,H=Pw(o);let J=0,ae=n-s,he=[];for(let pe=0;pe<o.length-1;pe++){const Ie=o[pe],Oe=o[pe+1],Be=Ie.dist(Oe),Qe=Oe.angleTo(Ie);for(;ae+s<J+Be;){ae+=s;const We=(ae-J)/Be,et=ii.number(Ie.x,Oe.x,We),it=ii.number(Ie.y,Oe.y,We);if(et>=0&&et<P&&it>=0&&it<P&&ae-O>=0&&ae+O<=H){const vt=new kl(et,it,Qe,pe);vt._round(),h&&!Iw(o,vt,v,h,p)||he.push(vt)}}J+=Be}return E||he.length||x||(he=Lw(o,J/2,s,h,p,v,x,!0,P)),he}Rt("Anchor",kl);const Fc=Ki;function zw(o,n,s,h){const p=[],v=o.image,x=v.pixelRatio,E=v.paddedRect.w-2*Fc,P=v.paddedRect.h-2*Fc,O=o.right-o.left,H=o.bottom-o.top,J=v.stretchX||[[0,E]],ae=v.stretchY||[[0,P]],he=(At,jt)=>At+jt[1]-jt[0],pe=J.reduce(he,0),Ie=ae.reduce(he,0),Oe=E-pe,Be=P-Ie;let Qe=0,We=pe,et=0,it=Ie,vt=0,Ft=Oe,Vt=0,zt=Be;if(v.content&&h){const At=v.content;Qe=up(J,0,At[0]),et=up(ae,0,At[1]),We=up(J,At[0],At[2]),it=up(ae,At[1],At[3]),vt=At[0]-Qe,Vt=At[1]-et,Ft=At[2]-At[0]-We,zt=At[3]-At[1]-it}const kt=(At,jt,Pt,bt)=>{const tn=cp(At.stretch-Qe,We,O,o.left),Ht=hp(At.fixed-vt,Ft,At.stretch,pe),An=cp(jt.stretch-et,it,H,o.top),ir=hp(jt.fixed-Vt,zt,jt.stretch,Ie),hr=cp(Pt.stretch-Qe,We,O,o.left),$r=hp(Pt.fixed-vt,Ft,Pt.stretch,pe),go=cp(bt.stretch-et,it,H,o.top),Fi=hp(bt.fixed-Vt,zt,bt.stretch,Ie),Or=new L(tn,An),ei=new L(hr,An),ai=new L(hr,go),Oi=new L(tn,go),Ri=new L(Ht/x,ir/x),Vr=new L($r/x,Fi/x),Gr=n*Math.PI/180;if(Gr){const _i=Math.sin(Gr),Yi=Math.cos(Gr),Ji=[Yi,-_i,_i,Yi];Or._matMult(Ji),ei._matMult(Ji),Oi._matMult(Ji),ai._matMult(Ji)}const vi=At.stretch+At.fixed,ji=jt.stretch+jt.fixed;return{tl:Or,tr:ei,bl:Oi,br:ai,tex:{x:v.paddedRect.x+Fc+vi,y:v.paddedRect.y+Fc+ji,w:Pt.stretch+Pt.fixed-vi,h:bt.stretch+bt.fixed-ji},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ri,pixelOffsetBR:Vr,minFontScaleX:Ft/x/O,minFontScaleY:zt/x/H,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const At=Fw(J,Oe,pe),jt=Fw(ae,Be,Ie);for(let Pt=0;Pt<At.length-1;Pt++){const bt=At[Pt],tn=At[Pt+1];for(let Ht=0;Ht<jt.length-1;Ht++)p.push(kt(bt,jt[Ht],tn,jt[Ht+1]))}}else p.push(kt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:P+1}));return p}function up(o,n,s){let h=0;for(const p of o)h+=Math.max(n,Math.min(s,p[1]))-Math.max(n,Math.min(s,p[0]));return h}function Fw(o,n,s){const h=[{fixed:-Fc,stretch:0}];for(const[p,v]of o){const x=h[h.length-1];h.push({fixed:p-x.stretch,stretch:x.stretch}),h.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return h.push({fixed:n+Fc,stretch:s}),h}function cp(o,n,s,h){return o/n*s+h}function hp(o,n,s,h){return o-n*s/h}class fp{constructor(n,s,h,p,v,x,E,P,O,H){if(this.boxStartIndex=n.length,O){let J=x.top,ae=x.bottom;const he=x.collisionPadding;he&&(J-=he[1],ae+=he[3]);let pe=ae-J;pe>0&&(pe=Math.max(10,pe),this.circleDiameter=pe)}else{let J=x.top*E-P[0],ae=x.bottom*E+P[2],he=x.left*E-P[3],pe=x.right*E+P[1];const Ie=x.collisionPadding;if(Ie&&(he-=Ie[0]*E,J-=Ie[1]*E,pe+=Ie[2]*E,ae+=Ie[3]*E),H){const Oe=new L(he,J),Be=new L(pe,J),Qe=new L(he,ae),We=new L(pe,ae),et=H*Math.PI/180;Oe._rotate(et),Be._rotate(et),Qe._rotate(et),We._rotate(et),he=Math.min(Oe.x,Be.x,Qe.x,We.x),pe=Math.max(Oe.x,Be.x,Qe.x,We.x),J=Math.min(Oe.y,Be.y,Qe.y,We.y),ae=Math.max(Oe.y,Be.y,Qe.y,We.y)}n.emplaceBack(s.x,s.y,he,J,pe,ae,h,p,v)}this.boxEndIndex=n.length}}class VP{constructor(n=[],s=GP){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,p=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(p,x)>=0)break;s[n]=x,n=v}s[n]=p}_down(n){const{data:s,compare:h}=this,p=this.length>>1,v=s[n];for(;n<p;){let x=1+(n<<1),E=s[x];const P=x+1;if(P<this.length&&h(s[P],E)<0&&(x=P,E=s[P]),h(E,v)>=0)break;s[n]=E,n=x}s[n]=v}}function GP(o,n){return o<n?-1:o>n?1:0}function ZP(o,n=1,s=!1){let h=1/0,p=1/0,v=-1/0,x=-1/0;const E=o[0];for(let he=0;he<E.length;he++){const pe=E[he];(!he||pe.x<h)&&(h=pe.x),(!he||pe.y<p)&&(p=pe.y),(!he||pe.x>v)&&(v=pe.x),(!he||pe.y>x)&&(x=pe.y)}const P=Math.min(v-h,x-p);let O=P/2;const H=new VP([],WP);if(P===0)return new L(h,p);for(let he=h;he<v;he+=P)for(let pe=p;pe<x;pe+=P)H.push(new Oc(he+O,pe+O,O,o));let J=function(he){let pe=0,Ie=0,Oe=0;const Be=he[0];for(let Qe=0,We=Be.length,et=We-1;Qe<We;et=Qe++){const it=Be[Qe],vt=Be[et],Ft=it.x*vt.y-vt.x*it.y;Ie+=(it.x+vt.x)*Ft,Oe+=(it.y+vt.y)*Ft,pe+=3*Ft}return new Oc(Ie/pe,Oe/pe,0,he)}(o),ae=H.length;for(;H.length;){const he=H.pop();(he.d>J.d||!J.d)&&(J=he,s&&console.log("found best %d after %d probes",Math.round(1e4*he.d)/1e4,ae)),he.max-J.d<=n||(O=he.h/2,H.push(new Oc(he.p.x-O,he.p.y-O,O,o)),H.push(new Oc(he.p.x+O,he.p.y-O,O,o)),H.push(new Oc(he.p.x-O,he.p.y+O,O,o)),H.push(new Oc(he.p.x+O,he.p.y+O,O,o)),ae+=4)}return s&&(console.log(`num probes: ${ae}`),console.log(`best distance: ${J.d}`)),J.p}function WP(o,n){return n.max-o.max}function Oc(o,n,s,h){this.p=new L(o,n),this.h=s,this.d=function(p,v){let x=!1,E=1/0;for(let P=0;P<v.length;P++){const O=v[P];for(let H=0,J=O.length,ae=J-1;H<J;ae=H++){const he=O[H],pe=O[ae];he.y>p.y!=pe.y>p.y&&p.x<(pe.x-he.x)*(p.y-he.y)/(pe.y-he.y)+he.x&&(x=!x),E=Math.min(E,yx(p,he,pe))}}return(x?1:-1)*Math.sqrt(E)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var si;a.TextAnchorEnum=void 0,(si=a.TextAnchorEnum||(a.TextAnchorEnum={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Ll=7,Iy=Number.POSITIVE_INFINITY;function Ow(o,n){return n[1]!==Iy?function(s,h,p){let v=0,x=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":x=p-Ll;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+Ll}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(o,n[0],n[1]):function(s,h){let p=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Ll;break;case"bottom-right":case"bottom-left":v=-x+Ll;break;case"bottom":v=-h+Ll;break;case"top":v=h-Ll}switch(s){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=h;break;case"right":p=-h}return[p,v]}(o,n[0])}function Rw(o,n,s){var h;const p=o.layout,v=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const E=v.values,P=[];for(let O=0;O<E.length;O+=2){const H=P[O]=E[O],J=E[O+1].map(ae=>ae*Ur);H.startsWith("top")?J[1]-=Ll:H.startsWith("bottom")&&(J[1]+=Ll),P[O+1]=J}return new Br(P)}const x=p.get("text-variable-anchor");if(x){let E;E=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},s)*Ur,Iy]:p.get("text-offset").evaluate(n,{},s).map(O=>O*Ur);const P=[];for(const O of x)P.push(O,Ow(O,E));return new Br(P)}return null}function Py(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function HP(o,n,s,h,p,v,x,E,P,O,H){let J=v.textMaxSize.evaluate(n,{});J===void 0&&(J=x);const ae=o.layers[0].layout,he=ae.get("icon-offset").evaluate(n,{},H),pe=Dw(s.horizontal),Ie=x/24,Oe=o.tilePixelRatio*Ie,Be=o.tilePixelRatio*J/24,Qe=o.tilePixelRatio*E,We=o.tilePixelRatio*ae.get("symbol-spacing"),et=ae.get("text-padding")*o.tilePixelRatio,it=function(bt,tn,Ht,An=1){const ir=bt.get("icon-padding").evaluate(tn,{},Ht),hr=ir&&ir.values;return[hr[0]*An,hr[1]*An,hr[2]*An,hr[3]*An]}(ae,n,H,o.tilePixelRatio),vt=ae.get("text-max-angle")/180*Math.PI,Ft=ae.get("text-rotation-alignment")!=="viewport"&&ae.get("symbol-placement")!=="point",Vt=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",zt=ae.get("symbol-placement"),kt=We/2,At=ae.get("icon-text-fit");let jt;h&&At!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(jt=aw(h,s.vertical,At,ae.get("icon-text-fit-padding"),he,Ie)),pe&&(h=aw(h,pe,At,ae.get("icon-text-fit-padding"),he,Ie)));const Pt=(bt,tn)=>{tn.x<0||tn.x>=Fr||tn.y<0||tn.y>=Fr||function(Ht,An,ir,hr,$r,go,Fi,Or,ei,ai,Oi,Ri,Vr,Gr,vi,ji,_i,Yi,Ji,Zr,zn,xi,li,Wr,ts){const xs=Ht.addToLineVertexArray(An,ir);let ws,La,ns,Lo,Qi=0,za=0,xf=0,$w=0,jy=-1,Dy=-1;const Fa={};let Vw=Tr("");if(Ht.allowVerticalPlacement&&hr.vertical){const wi=Or.layout.get("text-rotate").evaluate(zn,{},Wr)+90;ns=new fp(ei,An,ai,Oi,Ri,hr.vertical,Vr,Gr,vi,wi),Fi&&(Lo=new fp(ei,An,ai,Oi,Ri,Fi,_i,Yi,vi,wi))}if($r){const wi=Or.layout.get("icon-rotate").evaluate(zn,{}),zo=Or.layout.get("icon-text-fit")!=="none",Ru=zw($r,wi,li,zo),Es=Fi?zw(Fi,wi,li,zo):void 0;La=new fp(ei,An,ai,Oi,Ri,$r,_i,Yi,!1,wi),Qi=4*Ru.length;const ju=Ht.iconSizeData;let ia=null;ju.kind==="source"?(ia=[ra*Or.layout.get("icon-size").evaluate(zn,{})],ia[0]>Pl&&xe(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${gf}. Reduce your "icon-size".`)):ju.kind==="composite"&&(ia=[ra*xi.compositeIconSizes[0].evaluate(zn,{},Wr),ra*xi.compositeIconSizes[1].evaluate(zn,{},Wr)],(ia[0]>Pl||ia[1]>Pl)&&xe(`${Ht.layerIds[0]}: Value for "icon-size" is >= ${gf}. Reduce your "icon-size".`)),Ht.addSymbols(Ht.icon,Ru,ia,Zr,Ji,zn,a.WritingMode.none,An,xs.lineStartIndex,xs.lineLength,-1,Wr),jy=Ht.icon.placedSymbolArray.length-1,Es&&(za=4*Es.length,Ht.addSymbols(Ht.icon,Es,ia,Zr,Ji,zn,a.WritingMode.vertical,An,xs.lineStartIndex,xs.lineLength,-1,Wr),Dy=Ht.icon.placedSymbolArray.length-1)}const Gw=Object.keys(hr.horizontal);for(const wi of Gw){const zo=hr.horizontal[wi];if(!ws){Vw=Tr(zo.text);const Es=Or.layout.get("text-rotate").evaluate(zn,{},Wr);ws=new fp(ei,An,ai,Oi,Ri,zo,Vr,Gr,vi,Es)}const Ru=zo.positionedLines.length===1;if(xf+=jw(Ht,An,zo,go,Or,vi,zn,ji,xs,hr.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,Ru?Gw:[wi],Fa,jy,xi,Wr),Ru)break}hr.vertical&&($w+=jw(Ht,An,hr.vertical,go,Or,vi,zn,ji,xs,a.WritingMode.vertical,["vertical"],Fa,Dy,xi,Wr));const KP=ws?ws.boxStartIndex:Ht.collisionBoxArray.length,YP=ws?ws.boxEndIndex:Ht.collisionBoxArray.length,JP=ns?ns.boxStartIndex:Ht.collisionBoxArray.length,QP=ns?ns.boxEndIndex:Ht.collisionBoxArray.length,eM=La?La.boxStartIndex:Ht.collisionBoxArray.length,tM=La?La.boxEndIndex:Ht.collisionBoxArray.length,nM=Lo?Lo.boxStartIndex:Ht.collisionBoxArray.length,rM=Lo?Lo.boxEndIndex:Ht.collisionBoxArray.length;let bs=-1;const pp=(wi,zo)=>wi&&wi.circleDiameter?Math.max(wi.circleDiameter,zo):zo;bs=pp(ws,bs),bs=pp(ns,bs),bs=pp(La,bs),bs=pp(Lo,bs);const Zw=bs>-1?1:0;Zw&&(bs*=ts/Ur),Ht.glyphOffsetArray.length>=zc.MAX_GLYPHS&&xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zn.sortKey!==void 0&&Ht.addToSortKeyRanges(Ht.symbolInstances.length,zn.sortKey);const iM=Rw(Or,zn,Wr),[oM,sM]=function(wi,zo){const Ru=wi.length,Es=zo==null?void 0:zo.values;if((Es==null?void 0:Es.length)>0)for(let ju=0;ju<Es.length;ju+=2){const ia=Es[ju+1];wi.emplaceBack(a.TextAnchorEnum[Es[ju]],ia[0],ia[1])}return[Ru,wi.length]}(Ht.textAnchorOffsets,iM);Ht.symbolInstances.emplaceBack(An.x,An.y,Fa.right>=0?Fa.right:-1,Fa.center>=0?Fa.center:-1,Fa.left>=0?Fa.left:-1,Fa.vertical||-1,jy,Dy,Vw,KP,YP,JP,QP,eM,tM,nM,rM,ai,xf,$w,Qi,za,Zw,0,Vr,bs,oM,sM)}(o,tn,bt,s,h,p,jt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Oe,[et,et,et,et],Ft,P,Qe,it,Vt,he,n,v,O,H,x)};if(zt==="line")for(const bt of Aw(n.geometry,0,0,Fr,Fr)){const tn=$P(bt,We,vt,s.vertical||pe,h,24,Be,o.overscaling,Fr);for(const Ht of tn)pe&&XP(o,pe.text,kt,Ht)||Pt(bt,Ht)}else if(zt==="line-center"){for(const bt of n.geometry)if(bt.length>1){const tn=UP(bt,vt,s.vertical||pe,h,24,Be);tn&&Pt(bt,tn)}}else if(n.type==="Polygon")for(const bt of ay(n.geometry,0)){const tn=ZP(bt,16);Pt(bt[0],new kl(tn.x,tn.y,0))}else if(n.type==="LineString")for(const bt of n.geometry)Pt(bt,new kl(bt[0].x,bt[0].y,0));else if(n.type==="Point")for(const bt of n.geometry)for(const tn of bt)Pt([tn],new kl(tn.x,tn.y,0))}function jw(o,n,s,h,p,v,x,E,P,O,H,J,ae,he,pe){const Ie=function(Qe,We,et,it,vt,Ft,Vt,zt){const kt=it.layout.get("text-rotate").evaluate(Ft,{})*Math.PI/180,At=[];for(const jt of We.positionedLines)for(const Pt of jt.positionedGlyphs){if(!Pt.rect)continue;const bt=Pt.rect||{};let tn=ew+1,Ht=!0,An=1,ir=0;const hr=(vt||zt)&&Pt.vertical,$r=Pt.metrics.advance*Pt.scale/2;if(zt&&We.verticalizable&&(ir=jt.lineOffset/2-(Pt.imageName?-(Ur-Pt.metrics.width*Pt.scale)/2:(Pt.scale-1)*Ur)),Pt.imageName){const Zr=Vt[Pt.imageName];Ht=Zr.sdf,An=Zr.pixelRatio,tn=Ki/An}const go=vt?[Pt.x+$r,Pt.y]:[0,0];let Fi=vt?[0,0]:[Pt.x+$r+et[0],Pt.y+et[1]-ir],Or=[0,0];hr&&(Or=Fi,Fi=[0,0]);const ei=Pt.metrics.isDoubleResolution?2:1,ai=(Pt.metrics.left-tn)*Pt.scale-$r+Fi[0],Oi=(-Pt.metrics.top-tn)*Pt.scale+Fi[1],Ri=ai+bt.w/ei*Pt.scale/An,Vr=Oi+bt.h/ei*Pt.scale/An,Gr=new L(ai,Oi),vi=new L(Ri,Oi),ji=new L(ai,Vr),_i=new L(Ri,Vr);if(hr){const Zr=new L(-$r,$r-pf),zn=-Math.PI/2,xi=Ur/2-$r,li=new L(5-pf-xi,-(Pt.imageName?xi:0)),Wr=new L(...Or);Gr._rotateAround(zn,Zr)._add(li)._add(Wr),vi._rotateAround(zn,Zr)._add(li)._add(Wr),ji._rotateAround(zn,Zr)._add(li)._add(Wr),_i._rotateAround(zn,Zr)._add(li)._add(Wr)}if(kt){const Zr=Math.sin(kt),zn=Math.cos(kt),xi=[zn,-Zr,Zr,zn];Gr._matMult(xi),vi._matMult(xi),ji._matMult(xi),_i._matMult(xi)}const Yi=new L(0,0),Ji=new L(0,0);At.push({tl:Gr,tr:vi,bl:ji,br:_i,tex:bt,writingMode:We.writingMode,glyphOffset:go,sectionIndex:Pt.sectionIndex,isSDF:Ht,pixelOffsetTL:Yi,pixelOffsetBR:Ji,minFontScaleX:0,minFontScaleY:0})}return At}(0,s,E,p,v,x,h,o.allowVerticalPlacement),Oe=o.textSizeData;let Be=null;Oe.kind==="source"?(Be=[ra*p.layout.get("text-size").evaluate(x,{})],Be[0]>Pl&&xe(`${o.layerIds[0]}: Value for "text-size" is >= ${gf}. Reduce your "text-size".`)):Oe.kind==="composite"&&(Be=[ra*he.compositeTextSizes[0].evaluate(x,{},pe),ra*he.compositeTextSizes[1].evaluate(x,{},pe)],(Be[0]>Pl||Be[1]>Pl)&&xe(`${o.layerIds[0]}: Value for "text-size" is >= ${gf}. Reduce your "text-size".`)),o.addSymbols(o.text,Ie,Be,E,v,x,O,n,P.lineStartIndex,P.lineLength,ae,pe);for(const Qe of H)J[Qe]=o.text.placedSymbolArray.length-1;return 4*Ie.length}function Dw(o){for(const n in o)return o[n];return null}function XP(o,n,s,h){const p=o.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else p[n]=[];return p[n].push(h),!1}const Bw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class My{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=Bw[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[E]=new Uint32Array(n,4,1);return new My(E,x,v,n)}constructor(n,s=64,h=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=Bw.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,E=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-E%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+E+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return ky(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:E}=this,P=[0,v.length-1,0],O=[];for(;P.length;){const H=P.pop()||0,J=P.pop()||0,ae=P.pop()||0;if(J-ae<=E){for(let Oe=ae;Oe<=J;Oe++){const Be=x[2*Oe],Qe=x[2*Oe+1];Be>=n&&Be<=h&&Qe>=s&&Qe<=p&&O.push(v[Oe])}continue}const he=ae+J>>1,pe=x[2*he],Ie=x[2*he+1];pe>=n&&pe<=h&&Ie>=s&&Ie<=p&&O.push(v[he]),(H===0?n<=pe:s<=Ie)&&(P.push(ae),P.push(he-1),P.push(1-H)),(H===0?h>=pe:p>=Ie)&&(P.push(he+1),P.push(J),P.push(1-H))}return O}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,E=[0,p.length-1,0],P=[],O=h*h;for(;E.length;){const H=E.pop()||0,J=E.pop()||0,ae=E.pop()||0;if(J-ae<=x){for(let Oe=ae;Oe<=J;Oe++)Uw(v[2*Oe],v[2*Oe+1],n,s)<=O&&P.push(p[Oe]);continue}const he=ae+J>>1,pe=v[2*he],Ie=v[2*he+1];Uw(pe,Ie,n,s)<=O&&P.push(p[he]),(H===0?n-h<=pe:s-h<=Ie)&&(E.push(ae),E.push(he-1),E.push(1-H)),(H===0?n+h>=pe:s+h>=Ie)&&(E.push(he+1),E.push(J),E.push(1-H))}return P}}function ky(o,n,s,h,p,v){if(p-h<=s)return;const x=h+p>>1;Nw(o,n,x,h,p,v),ky(o,n,s,h,x-1,1-v),ky(o,n,s,x+1,p,1-v)}function Nw(o,n,s,h,p,v){for(;p>h;){if(p-h>600){const O=p-h+1,H=s-h+1,J=Math.log(O),ae=.5*Math.exp(2*J/3),he=.5*Math.sqrt(J*ae*(O-ae)/O)*(H-O/2<0?-1:1);Nw(o,n,s,Math.max(h,Math.floor(s-H*ae/O+he)),Math.min(p,Math.floor(s+(O-H)*ae/O+he)),v)}const x=n[2*s+v];let E=h,P=p;for(vf(o,n,h,s),n[2*p+v]>x&&vf(o,n,h,p);E<P;){for(vf(o,n,E,P),E++,P--;n[2*E+v]<x;)E++;for(;n[2*P+v]>x;)P--}n[2*h+v]===x?vf(o,n,h,P):(P++,vf(o,n,P,p)),P<=s&&(h=P+1),s<=P&&(p=P-1)}}function vf(o,n,s,h){Ly(o,s,h),Ly(n,2*s,2*h),Ly(n,2*s+1,2*h+1)}function Ly(o,n,s){const h=o[n];o[n]=o[s],o[s]=h}function Uw(o,n,s,h){const p=o-s,v=n-h;return p*p+v*v}var zy;a.PerformanceMarkers=void 0,(zy=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",zy.load="load",zy.fullLoad="fullLoad";let dp=null,_f=[];const Fy=1e3/60,Oy="loadTime",Ry="fullLoadTime",qP={mark(o){performance.mark(o)},frame(o){const n=o;dp!=null&&_f.push(n-dp),dp=n},clearMetrics(){dp=null,_f=[],performance.clearMeasures(Oy),performance.clearMeasures(Ry);for(const o in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure(Oy,a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure(Ry,a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName(Oy)[0].duration,n=performance.getEntriesByName(Ry)[0].duration,s=_f.length,h=1/(_f.reduce((v,x)=>v+x,0)/s/1e3),p=_f.filter(v=>v>Fy).reduce((v,x)=>v+(x-Fy)/Fy,0);return{loadTime:o,fullLoadTime:n,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};a.AJAXError=gt,a.ARRAY_TYPE=Ac,a.Actor=class{constructor(o,n,s){this.receive=h=>{const p=h.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else ne()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),p=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(h,p)},this.target=o,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new BP(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ne()?o:window}send(o,n,s,h,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=me(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!s,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:El(n,x)},x),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(o,n){if(n.type==="<response>"){const s=this.callbacks[o];delete this.callbacks[o],s&&(n.error?s(Cu(n.error)):s(null,Cu(n.data)))}else{let s=!1;const h=me(this.globalScope)?void 0:[],p=n.hasCallback?(E,P)=>{s=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:E?El(E):null,data:El(P,h)},h)}:E=>{s=!0};let v=null;const x=Cu(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if(this.parent.getWorkerSource){const E=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,E[0],x.source)[E[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[o]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=sf,a.CanonicalTileID=Ay,a.CollisionBoxArray=Ce,a.CollisionCircleLayoutArray=class extends m{},a.Color=Zn,a.DEMData=ww,a.DataConstantProperty=Kt,a.DictionaryCoder=bw,a.EXTENT=Fr,a.ErrorEvent=xn,a.EvaluationParameters=ar,a.Event=rn,a.Evented=Te,a.FeatureIndex=Sw,a.FillBucket=cy,a.FillExtrusionBucket=fy,a.GeoJSONFeature=Ew,a.ImageAtlas=nw,a.ImagePosition=yy,a.KDBush=My,a.LineBucket=dy,a.LineStripIndexArray=class extends Me{},a.LngLat=Ml,a.MercatorCoordinate=lp,a.ONE_EM=Ur,a.OverscaledTileID=ko,a.PerformanceUtils=qP,a.Point=L,a.Pos3dArray=class extends Qs{},a.PosArray=Ut,a.Properties=gi,a.Protobuf=my,a.QuadTriangleArray=class extends T{},a.RGBAImage=Mo,a.RasterBoundsArray=class extends ef{},a.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.SegmentVector=cr,a.SymbolBucket=zc,a.Transitionable=$d,a.TriangleIndexArray=wr,a.Uniform1f=Sc,a.Uniform1i=class extends Pa{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends Pa{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.Uniform3f=class extends Pa{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.Uniform4f=Wd,a.UniformColor=Hd,a.UniformMatrix4f=class extends Pa{constructor(o,n){super(o,n),this.current=qg}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.UnwrappedTileID=xw,a.ValidationError=Ve,a.ZoomHistory=Uh,a.__awaiter=b,a.addDynamicAttributes=wy,a.arrayBufferToImage=function(o,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=we})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(o)],{type:"image/png"});s.src=o.byteLength?URL.createObjectURL(h):we},a.arrayBufferToImageBitmap=function(o,n){const s=new Blob([new Uint8Array(o)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},a.asyncAll=function(o,n,s){if(!o.length)return s(null,[]);let h=o.length;const p=new Array(o.length);let v=null;o.forEach((x,E)=>{n(x,(P,O)=>{P&&(v=P),p[E]=O,--h==0&&s(v,p)})})},a.bezier=ie,a.browser=rt,a.clamp=B,a.clipLine=Aw,a.clone=function(o){var n=new Ac(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},a.clone$1=ye,a.collisionCircleLayout=dP,a.config=ut,a.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.create=function(){var o=new Ac(16);return Ac!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.createExpression=ho,a.createFilter=To,a.createLayout=lr,a.createStyleLayer=function(o){if(o.type==="custom")return new DP(o);switch(o.type){case"background":return new OP(o);case"circle":return new xI(o);case"fill":return new NI(o);case"fill-extrusion":return new tP(o);case"heatmap":return new bI(o);case"hillshade":return new SI(o);case"line":return new uP(o);case"raster":return new jP(o);case"symbol":return new ap(o)}},a.deepEqual=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!o(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!o(n[h],s[h]))return!1;return!0}return n===s},a.defaultEasing=Z,a.derefLayers=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=ve(o[s],n[o[s].ref]));return o},a.diffStyles=function(o,n){if(!o)return[{command:qe.setStyle,args:[n]}];let s=[];try{if(!Ne(o.version,n.version))return[{command:qe.setStyle,args:[n]}];Ne(o.center,n.center)||s.push({command:qe.setCenter,args:[n.center]}),Ne(o.zoom,n.zoom)||s.push({command:qe.setZoom,args:[n.zoom]}),Ne(o.bearing,n.bearing)||s.push({command:qe.setBearing,args:[n.bearing]}),Ne(o.pitch,n.pitch)||s.push({command:qe.setPitch,args:[n.pitch]}),Ne(o.sprite,n.sprite)||s.push({command:qe.setSprite,args:[n.sprite]}),Ne(o.glyphs,n.glyphs)||s.push({command:qe.setGlyphs,args:[n.glyphs]}),Ne(o.transition,n.transition)||s.push({command:qe.setTransition,args:[n.transition]}),Ne(o.light,n.light)||s.push({command:qe.setLight,args:[n.light]});const h={},p=[];(function(x,E,P,O){let H;for(H in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,H)&&(Object.prototype.hasOwnProperty.call(E,H)||le(H,P,O));for(H in E)Object.prototype.hasOwnProperty.call(E,H)&&(Object.prototype.hasOwnProperty.call(x,H)?Ne(x[H],E[H])||(x[H].type==="geojson"&&E[H].type==="geojson"&&N(x,E,H)?P.push({command:qe.setGeoJSONSourceData,args:[H,E[H].data]}):F(H,E,P,O)):lt(H,E,P))})(o.sources,n.sources,p,h);const v=[];o.layers&&o.layers.forEach(x=>{h[x.source]?s.push({command:qe.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(p),function(x,E,P){E=E||[];const O=(x=x||[]).map(Ge),H=E.map(Ge),J=x.reduce(tt,{}),ae=E.reduce(tt,{}),he=O.slice(),pe=Object.create(null);let Ie,Oe,Be,Qe,We,et,it;for(Ie=0,Oe=0;Ie<O.length;Ie++)Be=O[Ie],Object.prototype.hasOwnProperty.call(ae,Be)?Oe++:(P.push({command:qe.removeLayer,args:[Be]}),he.splice(he.indexOf(Be,Oe),1));for(Ie=0,Oe=0;Ie<H.length;Ie++)Be=H[H.length-1-Ie],he[he.length-1-Ie]!==Be&&(Object.prototype.hasOwnProperty.call(J,Be)?(P.push({command:qe.removeLayer,args:[Be]}),he.splice(he.lastIndexOf(Be,he.length-Oe),1)):Oe++,et=he[he.length-Ie],P.push({command:qe.addLayer,args:[ae[Be],et]}),he.splice(he.length-Ie,0,Be),pe[Be]=!0);for(Ie=0;Ie<H.length;Ie++)if(Be=H[Ie],Qe=J[Be],We=ae[Be],!pe[Be]&&!Ne(Qe,We))if(Ne(Qe.source,We.source)&&Ne(Qe["source-layer"],We["source-layer"])&&Ne(Qe.type,We.type)){for(it in Ee(Qe.layout,We.layout,P,Be,null,qe.setLayoutProperty),Ee(Qe.paint,We.paint,P,Be,null,qe.setPaintProperty),Ne(Qe.filter,We.filter)||P.push({command:qe.setFilter,args:[Be,We.filter]}),Ne(Qe.minzoom,We.minzoom)&&Ne(Qe.maxzoom,We.maxzoom)||P.push({command:qe.setLayerZoomRange,args:[Be,We.minzoom,We.maxzoom]}),Qe)Object.prototype.hasOwnProperty.call(Qe,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?Ee(Qe[it],We[it],P,Be,it.slice(6),qe.setPaintProperty):Ne(Qe[it],We[it])||P.push({command:qe.setLayerProperty,args:[Be,it,We[it]]}));for(it in We)Object.prototype.hasOwnProperty.call(We,it)&&!Object.prototype.hasOwnProperty.call(Qe,it)&&it!=="layout"&&it!=="paint"&&it!=="filter"&&it!=="metadata"&&it!=="minzoom"&&it!=="maxzoom"&&(it.indexOf("paint.")===0?Ee(Qe[it],We[it],P,Be,it.slice(6),qe.setPaintProperty):Ne(Qe[it],We[it])||P.push({command:qe.setLayerProperty,args:[Be,it,We[it]]}))}else P.push({command:qe.removeLayer,args:[Be]}),et=he[he.lastIndexOf(Be)+1],P.push({command:qe.addLayer,args:[We,et]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:qe.setStyle,args:[n]}]}return s},a.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},a.earthRadius=Ty,a.emitValidationErrors=Ys,a.emptyStyle=function(){const o={},n=M.$version;for(const s in M.$root){const h=M.$root[s];if(h.required){let p=null;p=s==="version"?n:h.type==="array"?[]:{},p!=null&&(o[s]=p)}}return o},a.equals=function(o,n){var s=o[0],h=o[1],p=o[2],v=o[3],x=o[4],E=o[5],P=o[6],O=o[7],H=o[8],J=o[9],ae=o[10],he=o[11],pe=o[12],Ie=o[13],Oe=o[14],Be=o[15],Qe=n[0],We=n[1],et=n[2],it=n[3],vt=n[4],Ft=n[5],Vt=n[6],zt=n[7],kt=n[8],At=n[9],jt=n[10],Pt=n[11],bt=n[12],tn=n[13],Ht=n[14],An=n[15];return Math.abs(s-Qe)<=zi*Math.max(1,Math.abs(s),Math.abs(Qe))&&Math.abs(h-We)<=zi*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(p-et)<=zi*Math.max(1,Math.abs(p),Math.abs(et))&&Math.abs(v-it)<=zi*Math.max(1,Math.abs(v),Math.abs(it))&&Math.abs(x-vt)<=zi*Math.max(1,Math.abs(x),Math.abs(vt))&&Math.abs(E-Ft)<=zi*Math.max(1,Math.abs(E),Math.abs(Ft))&&Math.abs(P-Vt)<=zi*Math.max(1,Math.abs(P),Math.abs(Vt))&&Math.abs(O-zt)<=zi*Math.max(1,Math.abs(O),Math.abs(zt))&&Math.abs(H-kt)<=zi*Math.max(1,Math.abs(H),Math.abs(kt))&&Math.abs(J-At)<=zi*Math.max(1,Math.abs(J),Math.abs(At))&&Math.abs(ae-jt)<=zi*Math.max(1,Math.abs(ae),Math.abs(jt))&&Math.abs(he-Pt)<=zi*Math.max(1,Math.abs(he),Math.abs(Pt))&&Math.abs(pe-bt)<=zi*Math.max(1,Math.abs(pe),Math.abs(bt))&&Math.abs(Ie-tn)<=zi*Math.max(1,Math.abs(Ie),Math.abs(tn))&&Math.abs(Oe-Ht)<=zi*Math.max(1,Math.abs(Oe),Math.abs(Ht))&&Math.abs(Be-An)<=zi*Math.max(1,Math.abs(Be),Math.abs(An))},a.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:p}){return o.kind==="source"?h/ra:o.kind==="composite"?ii.number(h/ra,p/ra,s):n},a.evaluateSizeForZoom=function(o,n){let s=0,h=0;if(o.kind==="constant")h=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=o,E=p?B(di.interpolationFactor(p,n,v,x),0,1):0;o.kind==="camera"?h=ii.number(o.minSize,o.maxSize,E):s=E}return{uSizeT:s,uSize:h}},a.evented=Xh,a.extend=k,a.filterObject=Q,a.findLineIntersection=function(o,n,s,h){const p=n.y-o.y,v=n.x-o.x,x=h.y-s.y,E=h.x-s.x,P=x*v-E*p;if(P===0)return null;const O=(E*(o.y-s.y)-x*(o.x-s.x))/P;return new L(o.x+O*v,o.y+O*p)},a.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.getAnchorAlignment=_y,a.getAnchorJustification=Py,a.getArrayBuffer=Nt,a.getDefaultExportFromCjs=w,a.getImageData=function(o,n,s,h,p){return b(this,void 0,void 0,function*(){if(U())try{return yield Ue(o,n,s,h,p)}catch{}return function(v,x,E,P,O){const H=v.width,J=v.height;Pe&&ze||(Pe=new OffscreenCanvas(H,J),ze=Pe.getContext("2d",{willReadFrequently:!0})),Pe.width=H,Pe.height=J,ze.drawImage(v,0,0,H,J);const ae=ze.getImageData(x,E,P,O);return ze.clearRect(0,0,H,J),ae.data}(o,n,s,h,p)})},a.getJSON=function(o,n){return $t(k(o,{type:"json"}),n)},a.getOverlapMode=xy,a.getProtocolAction=ht,a.getRTLTextPluginStatus=qh,a.getReferrer=Ct,a.getVideo=function(o,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<o.length;h++){const p=window.document.createElement("source");hn(o[h])||(s.crossOrigin="Anonymous"),p.src=o[h],s.appendChild(p)}return{cancel:()=>{}}},a.groupByLayout=function(o,n){const s={};for(let p=0;p<o.length;p++){const v=n&&n[o[p].id]||xl(o[p]);n&&(n[o[p].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(o[p])}const h=[];for(const p in s)h.push(s[p]);return h},a.identity=ey,a.interpolate=ii,a.invert=function(o,n){var s=n[0],h=n[1],p=n[2],v=n[3],x=n[4],E=n[5],P=n[6],O=n[7],H=n[8],J=n[9],ae=n[10],he=n[11],pe=n[12],Ie=n[13],Oe=n[14],Be=n[15],Qe=s*E-h*x,We=s*P-p*x,et=s*O-v*x,it=h*P-p*E,vt=h*O-v*E,Ft=p*O-v*P,Vt=H*Ie-J*pe,zt=H*Oe-ae*pe,kt=H*Be-he*pe,At=J*Oe-ae*Ie,jt=J*Be-he*Ie,Pt=ae*Be-he*Oe,bt=Qe*Pt-We*jt+et*At+it*kt-vt*zt+Ft*Vt;return bt?(o[0]=(E*Pt-P*jt+O*At)*(bt=1/bt),o[1]=(p*jt-h*Pt-v*At)*bt,o[2]=(Ie*Ft-Oe*vt+Be*it)*bt,o[3]=(ae*vt-J*Ft-he*it)*bt,o[4]=(P*kt-x*Pt-O*zt)*bt,o[5]=(s*Pt-p*kt+v*zt)*bt,o[6]=(Oe*et-pe*Ft-Be*We)*bt,o[7]=(H*Ft-ae*et+he*We)*bt,o[8]=(x*jt-E*kt+O*Vt)*bt,o[9]=(h*kt-s*jt-v*Vt)*bt,o[10]=(pe*vt-Ie*et+Be*Qe)*bt,o[11]=(J*et-H*vt-he*Qe)*bt,o[12]=(E*zt-x*At-P*Vt)*bt,o[13]=(s*At-h*zt+p*Vt)*bt,o[14]=(Ie*We-pe*it-Oe*Qe)*bt,o[15]=(H*it-J*We+ae*Qe)*bt,o):null},a.isImageBitmap=Se,a.isOffscreenCanvasDistorted=U,a.isSafari=me,a.isWorker=ne,a.keysDifference=function(o,n){const s=[];for(const h in o)h in n||s.push(h);return s},a.lazyLoadRTLTextPlugin=function(){Wi.isLoading()||Wi.isLoaded()||qh()!=="deferred"||Kh()},a.makeRequest=$t,a.mapObject=q,a.mercatorXfromLng=gw,a.mercatorYfromLat=yw,a.mercatorZfromAltitude=vw,a.mul=_I,a.mul$1=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},a.multiply=wx,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.offscreenCanvasSupported=V,a.operations=qe,a.ortho=function(o,n,s,h,p,v,x){var E=1/(n-s),P=1/(h-p),O=1/(v-x);return o[0]=-2*E,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*P,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*O,o[11]=0,o[12]=(n+s)*E,o[13]=(p+h)*P,o[14]=(x+v)*O,o[15]=1,o},a.parseCacheControl=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,v)=>{const x=p||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},a.parseGlyphPbf=function(o){return new my(o).readFields(SP,[])},a.pbf=Hx,a.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Fr/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new ar(o.bucket.zoom+1),o.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new ar(o.bucket.zoom+1),o.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new ar(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:H}=o.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ar(O),o.canonical),h["text-size"].possiblyEvaluate(new ar(H),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:H}=o.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ar(O),o.canonical),h["icon-size"].possiblyEvaluate(new ar(H),o.canonical)]}const v=s.get("text-line-height")*Ur,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",E=s.get("text-keep-upright"),P=s.get("text-size");for(const O of o.bucket.features){const H=s.get("text-font").evaluate(O,{},o.canonical).join(","),J=P.evaluate(O,{},o.canonical),ae=p.layoutTextSize.evaluate(O,{},o.canonical),he=p.layoutIconSize.evaluate(O,{},o.canonical),pe={horizontal:{},vertical:void 0},Ie=O.text;let Oe,Be=[0,0];if(Ie){const et=Ie.toString(),it=s.get("text-letter-spacing").evaluate(O,{},o.canonical)*Ur,vt=Zg(et)?it:0,Ft=s.get("text-anchor").evaluate(O,{},o.canonical),Vt=Rw(n,O,o.canonical);if(!Vt){const Pt=s.get("text-radial-offset").evaluate(O,{},o.canonical);Be=Pt?Ow(Ft,[Pt*Ur,Iy]):s.get("text-offset").evaluate(O,{},o.canonical).map(bt=>bt*Ur)}let zt=x?"center":s.get("text-justify").evaluate(O,{},o.canonical);const kt=s.get("symbol-placement"),At=kt==="point"?s.get("text-max-width").evaluate(O,{},o.canonical)*Ur:0,jt=()=>{o.bucket.allowVerticalPlacement&&Au(et)&&(pe.vertical=ip(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,At,v,Ft,"left",vt,Be,a.WritingMode.vertical,!0,kt,ae,J))};if(!x&&Vt){const Pt=new Set;if(zt==="auto")for(let tn=0;tn<Vt.values.length;tn+=2)Pt.add(Py(Vt.values[tn]));else Pt.add(zt);let bt=!1;for(const tn of Pt)if(!pe.horizontal[tn])if(bt)pe.horizontal[tn]=pe.horizontal[0];else{const Ht=ip(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,At,v,"center",tn,vt,Be,a.WritingMode.horizontal,!1,kt,ae,J);Ht&&(pe.horizontal[tn]=Ht,bt=Ht.positionedLines.length===1)}jt()}else{zt==="auto"&&(zt=Py(Ft));const Pt=ip(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,At,v,Ft,zt,vt,Be,a.WritingMode.horizontal,!1,kt,ae,J);Pt&&(pe.horizontal[zt]=Pt),jt(),Au(et)&&x&&E&&(pe.vertical=ip(Ie,o.glyphMap,o.glyphPositions,o.imagePositions,H,At,v,Ft,zt,vt,Be,a.WritingMode.vertical,!1,kt,ae,J))}}let Qe=!1;if(O.icon&&O.icon.name){const et=o.imageMap[O.icon.name];et&&(Oe=MP(o.imagePositions[O.icon.name],s.get("icon-offset").evaluate(O,{},o.canonical),s.get("icon-anchor").evaluate(O,{},o.canonical)),Qe=!!et.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Qe:o.bucket.sdfIcons!==Qe&&xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(et.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const We=Dw(pe.horizontal)||pe.vertical;o.bucket.iconsInText=!!We&&We.iconsInText,(We||Oe)&&HP(o.bucket,O,pe,Oe,o.imageMap,p,ae,he,Be,Qe,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.perspective=function(o,n,s,h,p){var v,x=1/Math.tan(n/2);return o[0]=x/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0?(o[10]=(p+h)*(v=1/(h-p)),o[14]=2*p*h*v):(o[10]=-1,o[14]=-2*h),o},a.pick=function(o,n){const s={};for(let h=0;h<n.length;h++){const p=n[h];p in o&&(s[p]=o[p])}return s},a.plugin=Wi,a.pointGeometry=I,a.polygonIntersectsPolygon=mx,a.potpack=tw,a.readImageUsingVideoFrame=Ue,a.register=Rt,a.registerForPluginStateChange=function(o){return o({pluginStatus:Li,pluginURL:Io}),Xh.on("pluginStateChange",o),o},a.renderColorRamp=Cx,a.rotateX=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[4],x=n[5],E=n[6],P=n[7],O=n[8],H=n[9],J=n[10],ae=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*p+O*h,o[5]=x*p+H*h,o[6]=E*p+J*h,o[7]=P*p+ae*h,o[8]=O*p-v*h,o[9]=H*p-x*h,o[10]=J*p-E*h,o[11]=ae*p-P*h,o},a.rotateZ=function(o,n,s){var h=Math.sin(s),p=Math.cos(s),v=n[0],x=n[1],E=n[2],P=n[3],O=n[4],H=n[5],J=n[6],ae=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*p+O*h,o[1]=x*p+H*h,o[2]=E*p+J*h,o[3]=P*p+ae*h,o[4]=O*p-v*h,o[5]=H*p-x*h,o[6]=J*p-E*h,o[7]=ae*p-P*h,o},a.sameOrigin=hn,a.scale=function(o,n,s){var h=s[0],p=s[1],v=s[2];return o[0]=n[0]*h,o[1]=n[1]*h,o[2]=n[2]*h,o[3]=n[3]*h,o[4]=n[4]*p,o[5]=n[5]*p,o[6]=n[6]*p,o[7]=n[7]*p,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.setRTLTextPlugin=function(o,n,s=!1){if(Li===Gh||Li===Zh||Li===Wh)throw new Error("setRTLTextPlugin cannot be called multiple times.");Io=rt.resolveURL(o),Li=Gh,Hh=n,Iu(),s||Kh()},a.sphericalToCartesian=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},a.toEvaluationFeature=Fu,a.transformMat4=Yd,a.translate=function(o,n,s){var h,p,v,x,E,P,O,H,J,ae,he,pe,Ie=s[0],Oe=s[1],Be=s[2];return n===o?(o[12]=n[0]*Ie+n[4]*Oe+n[8]*Be+n[12],o[13]=n[1]*Ie+n[5]*Oe+n[9]*Be+n[13],o[14]=n[2]*Ie+n[6]*Oe+n[10]*Be+n[14],o[15]=n[3]*Ie+n[7]*Oe+n[11]*Be+n[15]):(p=n[1],v=n[2],x=n[3],E=n[4],P=n[5],O=n[6],H=n[7],J=n[8],ae=n[9],he=n[10],pe=n[11],o[0]=h=n[0],o[1]=p,o[2]=v,o[3]=x,o[4]=E,o[5]=P,o[6]=O,o[7]=H,o[8]=J,o[9]=ae,o[10]=he,o[11]=pe,o[12]=h*Ie+E*Oe+J*Be+n[12],o[13]=p*Ie+P*Oe+ae*Be+n[13],o[14]=v*Ie+O*Oe+he*Be+n[14],o[15]=x*Ie+H*Oe+pe*Be+n[15]),o},a.triggerPluginCompletionEvent=Ud,a.unicodeBlockLookup=Ot,a.uniqueId=function(){return W++},a.v8Spec=M,a.validateCustomStyleLayer=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateLight=Zi,a.validateStyle=ki,a.vectorTile=Al,a.warnOnce=xe,a.wrap=S}),d(["./shared"],function(a){class b{constructor(oe){this.keyCache={},oe&&this.replace(oe)}replace(oe){this._layerConfigs={},this._layers={},this.update(oe,[])}update(oe,se){for(const be of oe){this._layerConfigs[be.id]=be;const Le=this._layers[be.id]=a.createStyleLayer(be);Le._featureFilter=a.createFilter(Le.filter),this.keyCache[be.id]&&delete this.keyCache[be.id]}for(const be of se)delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be];this.familiesBySource={};const fe=a.groupByLayout(Object.values(this._layerConfigs),this.keyCache);for(const be of fe){const Le=be.map(dt=>this._layers[dt.id]),Xe=Le[0];if(Xe.visibility==="none")continue;const $e=Xe.source||"";let je=this.familiesBySource[$e];je||(je=this.familiesBySource[$e]={});const Ye=Xe.sourceLayer||"_geojsonTileLayer";let ct=je[Ye];ct||(ct=je[Ye]=[]),ct.push(Le)}}}class w{constructor(oe){const se={},fe=[];for(const $e in oe){const je=oe[$e],Ye=se[$e]={};for(const ct in je){const dt=je[+ct];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const yt={x:0,y:0,w:dt.bitmap.width+2,h:dt.bitmap.height+2};fe.push(yt),Ye[ct]={rect:yt,metrics:dt.metrics}}}const{w:be,h:Le}=a.potpack(fe),Xe=new a.AlphaImage({width:be||1,height:Le||1});for(const $e in oe){const je=oe[$e];for(const Ye in je){const ct=je[+Ye];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const dt=se[$e][Ye].rect;a.AlphaImage.copy(ct.bitmap,Xe,{x:0,y:0},{x:dt.x+1,y:dt.y+1},ct.bitmap)}}this.image=Xe,this.positions=se}}a.register("GlyphAtlas",w);class I{constructor(oe){this.tileID=new a.OverscaledTileID(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(oe,se,fe,be,Le){this.status="parsing",this.data=oe,this.collisionBoxArray=new a.CollisionBoxArray;const Xe=new a.DictionaryCoder(Object.keys(oe.layers).sort()),$e=new a.FeatureIndex(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const je={},Ye={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},ct=se.familiesBySource[this.source];for(const Rn in ct){const kn=oe.layers[Rn];if(!kn)continue;kn.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${Rn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qr=Xe.encode(Rn),Jn=[];for(let pr=0;pr<kn.length;pr++){const or=kn.feature(pr),Ci=$e.getId(or,Rn);Jn.push({feature:or,id:Ci,index:pr,sourceLayerIndex:qr})}for(const pr of ct[Rn]){const or=pr[0];or.source!==this.source&&a.warnOnce(`layer.source = ${or.source} does not equal this.source = ${this.source}`),or.minzoom&&this.zoom<Math.floor(or.minzoom)||or.maxzoom&&this.zoom>=or.maxzoom||or.visibility!=="none"&&(C(pr,this.zoom,fe),(je[or.id]=or.createBucket({index:$e.bucketLayerIDs.length,layers:pr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qr,sourceID:this.source})).populate(Jn,Ye,this.tileID.canonical),$e.bucketLayerIDs.push(pr.map(Ci=>Ci.id)))}}let dt,yt,Xt,nn;const Bt=a.mapObject(Ye.glyphDependencies,Rn=>Object.keys(Rn).map(Number));this.inFlightDependencies.forEach(Rn=>Rn==null?void 0:Rn.cancel()),this.inFlightDependencies=[];const Wt=++this.dependencySentinel;Object.keys(Bt).length?this.inFlightDependencies.push(be.send("getGlyphs",{uid:this.uid,stacks:Bt,source:this.source,tileID:this.tileID,type:"glyphs"},(Rn,kn)=>{Wt===this.dependencySentinel&&(dt||(dt=Rn,yt=kn,Wn.call(this)))})):yt={};const mn=Object.keys(Ye.iconDependencies);mn.length?this.inFlightDependencies.push(be.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},(Rn,kn)=>{Wt===this.dependencySentinel&&(dt||(dt=Rn,Xt=kn,Wn.call(this)))})):Xt={};const On=Object.keys(Ye.patternDependencies);function Wn(){if(dt)return Le(dt);if(yt&&Xt&&nn){const Rn=new w(yt),kn=new a.ImageAtlas(Xt,nn);for(const qr in je){const Jn=je[qr];Jn instanceof a.SymbolBucket?(C(Jn.layers,this.zoom,fe),a.performSymbolLayout({bucket:Jn,glyphMap:yt,glyphPositions:Rn.positions,imageMap:Xt,imagePositions:kn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Jn.hasPattern&&(Jn instanceof a.LineBucket||Jn instanceof a.FillBucket||Jn instanceof a.FillExtrusionBucket)&&(C(Jn.layers,this.zoom,fe),Jn.addFeatures(Ye,this.tileID.canonical,kn.patternPositions))}this.status="done",Le(null,{buckets:Object.values(je).filter(qr=>!qr.isEmpty()),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Rn.image,imageAtlas:kn,glyphMap:this.returnDependencies?yt:null,iconMap:this.returnDependencies?Xt:null,glyphPositions:this.returnDependencies?Rn.positions:null})}}On.length?this.inFlightDependencies.push(be.send("getImages",{icons:On,source:this.source,tileID:this.tileID,type:"patterns"},(Rn,kn)=>{Wt===this.dependencySentinel&&(dt||(dt=Rn,nn=kn,Wn.call(this)))})):nn={},Wn.call(this)}}function C(ke,oe,se){const fe=new a.EvaluationParameters(oe);for(const be of ke)be.recalculate(fe,se)}function L(ke,oe){const se=a.getArrayBuffer(ke.request,(fe,be,Le,Xe)=>{if(fe)oe(fe);else if(be)try{const $e=new a.vectorTile.VectorTile(new a.Protobuf(be));oe(null,{vectorTile:$e,rawData:be,cacheControl:Le,expires:Xe})}catch($e){const je=new Uint8Array(be);let Ye=`Unable to parse the tile at ${ke.request.url}, `;Ye+=je[0]===31&&je[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${$e.messge}`,oe(new Error(Ye))}});return()=>{se.cancel(),oe()}}class j{constructor(oe,se,fe,be){this.actor=oe,this.layerIndex=se,this.availableImages=fe,this.loadVectorData=be||L,this.fetching={},this.loading={},this.loaded={}}loadTile(oe,se){const fe=oe.uid;this.loading||(this.loading={});const be=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new a.RequestPerformance(oe.request),Le=this.loading[fe]=new I(oe);Le.abort=this.loadVectorData(oe,(Xe,$e)=>{if(delete this.loading[fe],Xe||!$e)return Le.status="done",this.loaded[fe]=Le,se(Xe);const je=$e.rawData,Ye={};$e.expires&&(Ye.expires=$e.expires),$e.cacheControl&&(Ye.cacheControl=$e.cacheControl);const ct={};if(be){const dt=be.finish();dt&&(ct.resourceTiming=JSON.parse(JSON.stringify(dt)))}Le.vectorTile=$e.vectorTile,Le.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor,(dt,yt)=>{if(delete this.fetching[fe],dt||!yt)return se(dt);se(null,a.extend({rawTileData:je.slice(0)},yt,Ye,ct))}),this.loaded=this.loaded||{},this.loaded[fe]=Le,this.fetching[fe]={rawTileData:je,cacheControl:Ye,resourceTiming:ct}})}reloadTile(oe,se){const fe=this.loaded,be=oe.uid;if(fe&&fe[be]){const Le=fe[be];Le.showCollisionBoxes=oe.showCollisionBoxes,Le.status==="parsing"?Le.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,(Xe,$e)=>{if(Xe||!$e)return se(Xe,$e);let je;if(this.fetching[be]){const{rawTileData:Ye,cacheControl:ct,resourceTiming:dt}=this.fetching[be];delete this.fetching[be],je=a.extend({rawTileData:Ye.slice(0)},$e,ct,dt)}else je=$e;se(null,je)}):Le.status==="done"&&(Le.vectorTile?Le.parse(Le.vectorTile,this.layerIndex,this.availableImages,this.actor,se):se())}}abortTile(oe,se){const fe=this.loading,be=oe.uid;fe&&fe[be]&&fe[be].abort&&(fe[be].abort(),delete fe[be]),se()}removeTile(oe,se){const fe=this.loaded,be=oe.uid;fe&&fe[be]&&delete fe[be],se()}}class ee{constructor(){this.loaded={}}loadTile(oe,se){return a.__awaiter(this,void 0,void 0,function*(){const{uid:fe,encoding:be,rawImageData:Le,redFactor:Xe,greenFactor:$e,blueFactor:je,baseShift:Ye}=oe,ct=Le.width+2,dt=Le.height+2,yt=a.isImageBitmap(Le)?new a.RGBAImage({width:ct,height:dt},yield a.getImageData(Le,-1,-1,ct,dt)):Le,Xt=new a.DEMData(fe,yt,be,Xe,$e,je,Ye);this.loaded=this.loaded||{},this.loaded[fe]=Xt,se(null,Xt)})}removeTile(oe){const se=this.loaded,fe=oe.uid;se&&se[fe]&&delete se[fe]}}function Y(ke,oe){if(ke.length!==0){de(ke[0],oe);for(var se=1;se<ke.length;se++)de(ke[se],!oe)}}function de(ke,oe){for(var se=0,fe=0,be=0,Le=ke.length,Xe=Le-1;be<Le;Xe=be++){var $e=(ke[be][0]-ke[Xe][0])*(ke[Xe][1]+ke[be][1]),je=se+$e;fe+=Math.abs(se)>=Math.abs($e)?se-je+$e:$e-je+se,se=je}se+fe>=0!=!!oe&&ke.reverse()}var G=a.getDefaultExportFromCjs(function ke(oe,se){var fe,be=oe&&oe.type;if(be==="FeatureCollection")for(fe=0;fe<oe.features.length;fe++)ke(oe.features[fe],se);else if(be==="GeometryCollection")for(fe=0;fe<oe.geometries.length;fe++)ke(oe.geometries[fe],se);else if(be==="Feature")ke(oe.geometry,se);else if(be==="Polygon")Y(oe.coordinates,se);else if(be==="MultiPolygon")for(fe=0;fe<oe.coordinates.length;fe++)Y(oe.coordinates[fe],se);return oe});const V=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},ie=a.pointGeometry,Z=a.vectorTile.VectorTileFeature,B=S;function S(ke,oe){this.options=oe||{},this.features=ke,this.length=ke.length}function k(ke,oe){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=oe||4096}S.prototype.feature=function(ke){return new k(this.features[ke],this.options.extent)},k.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var oe=0;oe<ke.length;oe++){for(var se=ke[oe],fe=[],be=0;be<se.length;be++)fe.push(new ie(se[be][0],se[be][1]));this.geometry.push(fe)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,oe=1/0,se=-1/0,fe=1/0,be=-1/0,Le=0;Le<ke.length;Le++)for(var Xe=ke[Le],$e=0;$e<Xe.length;$e++){var je=Xe[$e];oe=Math.min(oe,je.x),se=Math.max(se,je.x),fe=Math.min(fe,je.y),be=Math.max(be,je.y)}return[oe,fe,se,be]},k.prototype.toGeoJSON=Z.prototype.toGeoJSON;var W=a.pbf,q=B;function Q(ke){var oe=new W;return function(se,fe){for(var be in se.layers)fe.writeMessage(3,ye,se.layers[be])}(ke,oe),oe.finish()}function ye(ke,oe){var se;oe.writeVarintField(15,ke.version||1),oe.writeStringField(1,ke.name||""),oe.writeVarintField(5,ke.extent||4096);var fe={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<ke.length;se++)fe.feature=ke.feature(se),oe.writeMessage(2,_e,fe);var be=fe.keys;for(se=0;se<be.length;se++)oe.writeStringField(3,be[se]);var Le=fe.values;for(se=0;se<Le.length;se++)oe.writeMessage(4,re,Le[se])}function _e(ke,oe){var se=ke.feature;se.id!==void 0&&oe.writeVarintField(1,se.id),oe.writeMessage(2,xe,ke),oe.writeVarintField(3,se.type),oe.writeMessage(4,ne,se)}function xe(ke,oe){var se=ke.feature,fe=ke.keys,be=ke.values,Le=ke.keycache,Xe=ke.valuecache;for(var $e in se.properties){var je=se.properties[$e],Ye=Le[$e];if(je!==null){Ye===void 0&&(fe.push($e),Le[$e]=Ye=fe.length-1),oe.writeVarint(Ye);var ct=typeof je;ct!=="string"&&ct!=="boolean"&&ct!=="number"&&(je=JSON.stringify(je));var dt=ct+":"+je,yt=Xe[dt];yt===void 0&&(be.push(je),Xe[dt]=yt=be.length-1),oe.writeVarint(yt)}}}function te(ke,oe){return(oe<<3)+(7&ke)}function ue(ke){return ke<<1^ke>>31}function ne(ke,oe){for(var se=ke.loadGeometry(),fe=ke.type,be=0,Le=0,Xe=se.length,$e=0;$e<Xe;$e++){var je=se[$e],Ye=1;fe===1&&(Ye=je.length),oe.writeVarint(te(1,Ye));for(var ct=fe===3?je.length-1:je.length,dt=0;dt<ct;dt++){dt===1&&fe!==1&&oe.writeVarint(te(2,ct-1));var yt=je[dt].x-be,Xt=je[dt].y-Le;oe.writeVarint(ue(yt)),oe.writeVarint(ue(Xt)),be+=yt,Le+=Xt}fe===3&&oe.writeVarint(te(7,1))}}function re(ke,oe){var se=typeof ke;se==="string"?oe.writeStringField(1,ke):se==="boolean"?oe.writeBooleanField(7,ke):se==="number"&&(ke%1!=0?oe.writeDoubleField(3,ke):ke<0?oe.writeSVarintField(6,ke):oe.writeVarintField(5,ke))}U.exports=Q,U.exports.fromVectorTileJs=Q,U.exports.fromGeojsonVt=function(ke,oe){oe=oe||{};var se={};for(var fe in ke)se[fe]=new q(ke[fe].features,oe),se[fe].name=fe,se[fe].version=oe.version,se[fe].extent=oe.extent;return Q({layers:se})},U.exports.GeoJSONWrapper=q;var me=a.getDefaultExportFromCjs(U.exports);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},we=Math.fround||(Ue=new Float32Array(1),ke=>(Ue[0]=+ke,Ue[0]));var Ue;const Pe=3,ze=5,He=6;class Ze{constructor(oe){this.options=Object.assign(Object.create(Se),oe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(oe){const{log:se,minZoom:fe,maxZoom:be}=this.options;se&&console.time("total time");const Le=`prepare ${oe.length} points`;se&&console.time(Le),this.points=oe;const Xe=[];for(let je=0;je<oe.length;je++){const Ye=oe[je];if(!Ye.geometry)continue;const[ct,dt]=Ye.geometry.coordinates,yt=we(gt(ct)),Xt=we(Ct(dt));Xe.push(yt,Xt,1/0,je,-1,1),this.options.reduce&&Xe.push(0)}let $e=this.trees[be+1]=this._createTree(Xe);se&&console.timeEnd(Le);for(let je=be;je>=fe;je--){const Ye=+Date.now();$e=this.trees[je]=this._createTree(this._cluster($e,je)),se&&console.log("z%d: %d clusters in %dms",je,$e.numItems,+Date.now()-Ye)}return se&&console.timeEnd("total time"),this}getClusters(oe,se){let fe=((oe[0]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,oe[1]));let Le=oe[2]===180?180:((oe[2]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)fe=-180,Le=180;else if(fe>Le){const dt=this.getClusters([fe,be,180,Xe],se),yt=this.getClusters([-180,be,Le,Xe],se);return dt.concat(yt)}const $e=this.trees[this._limitZoom(se)],je=$e.range(gt(fe),Ct(Xe),gt(Le),Ct(be)),Ye=$e.data,ct=[];for(const dt of je){const yt=this.stride*dt;ct.push(Ye[yt+ze]>1?rt(Ye,yt,this.clusterProps):this.points[Ye[yt+Pe]])}return ct}getChildren(oe){const se=this._getOriginId(oe),fe=this._getOriginZoom(oe),be="No cluster with the specified id.",Le=this.trees[fe];if(!Le)throw new Error(be);const Xe=Le.data;if(se*this.stride>=Xe.length)throw new Error(be);const $e=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),je=Le.within(Xe[se*this.stride],Xe[se*this.stride+1],$e),Ye=[];for(const ct of je){const dt=ct*this.stride;Xe[dt+4]===oe&&Ye.push(Xe[dt+ze]>1?rt(Xe,dt,this.clusterProps):this.points[Xe[dt+Pe]])}if(Ye.length===0)throw new Error(be);return Ye}getLeaves(oe,se,fe){const be=[];return this._appendLeaves(be,oe,se=se||10,fe=fe||0,0),be}getTile(oe,se,fe){const be=this.trees[this._limitZoom(oe)],Le=Math.pow(2,oe),{extent:Xe,radius:$e}=this.options,je=$e/Xe,Ye=(fe-je)/Le,ct=(fe+1+je)/Le,dt={features:[]};return this._addTileFeatures(be.range((se-je)/Le,Ye,(se+1+je)/Le,ct),be.data,se,fe,Le,dt),se===0&&this._addTileFeatures(be.range(1-je/Le,Ye,1,ct),be.data,Le,fe,Le,dt),se===Le-1&&this._addTileFeatures(be.range(0,Ye,je/Le,ct),be.data,-1,fe,Le,dt),dt.features.length?dt:null}getClusterExpansionZoom(oe){let se=this._getOriginZoom(oe)-1;for(;se<=this.options.maxZoom;){const fe=this.getChildren(oe);if(se++,fe.length!==1)break;oe=fe[0].properties.cluster_id}return se}_appendLeaves(oe,se,fe,be,Le){const Xe=this.getChildren(se);for(const $e of Xe){const je=$e.properties;if(je&&je.cluster?Le+je.point_count<=be?Le+=je.point_count:Le=this._appendLeaves(oe,je.cluster_id,fe,be,Le):Le<be?Le++:oe.push($e),oe.length===fe)break}return Le}_createTree(oe){const se=new a.KDBush(oe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<oe.length;fe+=this.stride)se.add(oe[fe],oe[fe+1]);return se.finish(),se.data=oe,se}_addTileFeatures(oe,se,fe,be,Le,Xe){for(const $e of oe){const je=$e*this.stride,Ye=se[je+ze]>1;let ct,dt,yt;if(Ye)ct=ut(se,je,this.clusterProps),dt=se[je],yt=se[je+1];else{const Bt=this.points[se[je+Pe]];ct=Bt.properties;const[Wt,mn]=Bt.geometry.coordinates;dt=gt(Wt),yt=Ct(mn)}const Xt={type:1,geometry:[[Math.round(this.options.extent*(dt*Le-fe)),Math.round(this.options.extent*(yt*Le-be))]],tags:ct};let nn;nn=Ye||this.options.generateId?se[je+Pe]:this.points[se[je+Pe]].id,nn!==void 0&&(Xt.id=nn),Xe.features.push(Xt)}}_limitZoom(oe){return Math.max(this.options.minZoom,Math.min(Math.floor(+oe),this.options.maxZoom+1))}_cluster(oe,se){const{radius:fe,extent:be,reduce:Le,minPoints:Xe}=this.options,$e=fe/(be*Math.pow(2,se)),je=oe.data,Ye=[],ct=this.stride;for(let dt=0;dt<je.length;dt+=ct){if(je[dt+2]<=se)continue;je[dt+2]=se;const yt=je[dt],Xt=je[dt+1],nn=oe.within(je[dt],je[dt+1],$e),Bt=je[dt+ze];let Wt=Bt;for(const mn of nn){const On=mn*ct;je[On+2]>se&&(Wt+=je[On+ze])}if(Wt>Bt&&Wt>=Xe){let mn,On=yt*Bt,Wn=Xt*Bt,Rn=-1;const kn=((dt/ct|0)<<5)+(se+1)+this.points.length;for(const qr of nn){const Jn=qr*ct;if(je[Jn+2]<=se)continue;je[Jn+2]=se;const pr=je[Jn+ze];On+=je[Jn]*pr,Wn+=je[Jn+1]*pr,je[Jn+4]=kn,Le&&(mn||(mn=this._map(je,dt,!0),Rn=this.clusterProps.length,this.clusterProps.push(mn)),Le(mn,this._map(je,Jn)))}je[dt+4]=kn,Ye.push(On/Wt,Wn/Wt,1/0,kn,-1,Wt),Le&&Ye.push(Rn)}else{for(let mn=0;mn<ct;mn++)Ye.push(je[dt+mn]);if(Wt>1)for(const mn of nn){const On=mn*ct;if(!(je[On+2]<=se)){je[On+2]=se;for(let Wn=0;Wn<ct;Wn++)Ye.push(je[On+Wn])}}}}return Ye}_getOriginId(oe){return oe-this.points.length>>5}_getOriginZoom(oe){return(oe-this.points.length)%32}_map(oe,se,fe){if(oe[se+ze]>1){const Xe=this.clusterProps[oe[se+He]];return fe?Object.assign({},Xe):Xe}const be=this.points[oe[se+Pe]].properties,Le=this.options.map(be);return fe&&Le===be?Object.assign({},Le):Le}}function rt(ke,oe,se){return{type:"Feature",id:ke[oe+Pe],properties:ut(ke,oe,se),geometry:{type:"Point",coordinates:[(fe=ke[oe],360*(fe-.5)),ht(ke[oe+1])]}};var fe}function ut(ke,oe,se){const fe=ke[oe+ze],be=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,Le=ke[oe+He],Xe=Le===-1?{}:Object.assign({},se[Le]);return Object.assign(Xe,{cluster:!0,cluster_id:ke[oe+Pe],point_count:fe,point_count_abbreviated:be})}function gt(ke){return ke/360+.5}function Ct(ke){const oe=Math.sin(ke*Math.PI/180),se=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return se<0?0:se>1?1:se}function ht(ke){const oe=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(oe))/Math.PI-90}function Et(ke,oe,se,fe){for(var be,Le=fe,Xe=se-oe>>1,$e=se-oe,je=ke[oe],Ye=ke[oe+1],ct=ke[se],dt=ke[se+1],yt=oe+3;yt<se;yt+=3){var Xt=$t(ke[yt],ke[yt+1],je,Ye,ct,dt);if(Xt>Le)be=yt,Le=Xt;else if(Xt===Le){var nn=Math.abs(yt-Xe);nn<$e&&(be=yt,$e=nn)}}Le>fe&&(be-oe>3&&Et(ke,oe,be,fe),ke[be+2]=Le,se-be>3&&Et(ke,be,se,fe))}function $t(ke,oe,se,fe,be,Le){var Xe=be-se,$e=Le-fe;if(Xe!==0||$e!==0){var je=((ke-se)*Xe+(oe-fe)*$e)/(Xe*Xe+$e*$e);je>1?(se=be,fe=Le):je>0&&(se+=Xe*je,fe+=$e*je)}return(Xe=ke-se)*Xe+($e=oe-fe)*$e}function Nt(ke,oe,se,fe){var be={id:ke===void 0?null:ke,type:oe,geometry:se,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Le){var Xe=Le.geometry,$e=Le.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")hn(Le,Xe);else if($e==="Polygon"||$e==="MultiLineString")for(var je=0;je<Xe.length;je++)hn(Le,Xe[je]);else if($e==="MultiPolygon")for(je=0;je<Xe.length;je++)for(var Ye=0;Ye<Xe[je].length;Ye++)hn(Le,Xe[je][Ye])}(be),be}function hn(ke,oe){for(var se=0;se<oe.length;se+=3)ke.minX=Math.min(ke.minX,oe[se]),ke.minY=Math.min(ke.minY,oe[se+1]),ke.maxX=Math.max(ke.maxX,oe[se]),ke.maxY=Math.max(ke.maxY,oe[se+1])}function Tn(ke,oe,se,fe){if(oe.geometry){var be=oe.geometry.coordinates,Le=oe.geometry.type,Xe=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),$e=[],je=oe.id;if(se.promoteId?je=oe.properties[se.promoteId]:se.generateId&&(je=fe||0),Le==="Point")En(be,$e);else if(Le==="MultiPoint")for(var Ye=0;Ye<be.length;Ye++)En(be[Ye],$e);else if(Le==="LineString")rn(be,$e,Xe,!1);else if(Le==="MultiLineString"){if(se.lineMetrics){for(Ye=0;Ye<be.length;Ye++)rn(be[Ye],$e=[],Xe,!1),ke.push(Nt(je,"LineString",$e,oe.properties));return}xn(be,$e,Xe,!1)}else if(Le==="Polygon")xn(be,$e,Xe,!0);else{if(Le!=="MultiPolygon"){if(Le==="GeometryCollection"){for(Ye=0;Ye<oe.geometry.geometries.length;Ye++)Tn(ke,{id:je,geometry:oe.geometry.geometries[Ye],properties:oe.properties},se,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<be.length;Ye++){var ct=[];xn(be[Ye],ct,Xe,!0),$e.push(ct)}}ke.push(Nt(je,Le,$e,oe.properties))}}function En(ke,oe){oe.push(Te(ke[0])),oe.push(M(ke[1])),oe.push(0)}function rn(ke,oe,se,fe){for(var be,Le,Xe=0,$e=0;$e<ke.length;$e++){var je=Te(ke[$e][0]),Ye=M(ke[$e][1]);oe.push(je),oe.push(Ye),oe.push(0),$e>0&&(Xe+=fe?(be*Ye-je*Le)/2:Math.sqrt(Math.pow(je-be,2)+Math.pow(Ye-Le,2))),be=je,Le=Ye}var ct=oe.length-3;oe[2]=1,Et(oe,0,ct,se),oe[ct+2]=1,oe.size=Math.abs(Xe),oe.start=0,oe.end=oe.size}function xn(ke,oe,se,fe){for(var be=0;be<ke.length;be++){var Le=[];rn(ke[be],Le,se,fe),oe.push(Le)}}function Te(ke){return ke/360+.5}function M(ke){var oe=Math.sin(ke*Math.PI/180),se=.5-.25*Math.log((1+oe)/(1-oe))/Math.PI;return se<0?0:se>1?1:se}function R(ke,oe,se,fe,be,Le,Xe,$e){if(fe/=oe,Le>=(se/=oe)&&Xe<fe)return ke;if(Xe<se||Le>=fe)return null;for(var je=[],Ye=0;Ye<ke.length;Ye++){var ct=ke[Ye],dt=ct.geometry,yt=ct.type,Xt=be===0?ct.minX:ct.minY,nn=be===0?ct.maxX:ct.maxY;if(Xt>=se&&nn<fe)je.push(ct);else if(!(nn<se||Xt>=fe)){var Bt=[];if(yt==="Point"||yt==="MultiPoint")ve(dt,Bt,se,fe,be);else if(yt==="LineString")Ne(dt,Bt,se,fe,be,!1,$e.lineMetrics);else if(yt==="MultiLineString")lt(dt,Bt,se,fe,be,!1);else if(yt==="Polygon")lt(dt,Bt,se,fe,be,!0);else if(yt==="MultiPolygon")for(var Wt=0;Wt<dt.length;Wt++){var mn=[];lt(dt[Wt],mn,se,fe,be,!0),mn.length&&Bt.push(mn)}if(Bt.length){if($e.lineMetrics&&yt==="LineString"){for(Wt=0;Wt<Bt.length;Wt++)je.push(Nt(ct.id,yt,Bt[Wt],ct.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(Bt.length===1?(yt="LineString",Bt=Bt[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=Bt.length===3?"Point":"MultiPoint"),je.push(Nt(ct.id,yt,Bt,ct.tags))}}}return je.length?je:null}function ve(ke,oe,se,fe,be){for(var Le=0;Le<ke.length;Le+=3){var Xe=ke[Le+be];Xe>=se&&Xe<=fe&&(oe.push(ke[Le]),oe.push(ke[Le+1]),oe.push(ke[Le+2]))}}function Ne(ke,oe,se,fe,be,Le,Xe){for(var $e,je,Ye=qe(ke),ct=be===0?F:N,dt=ke.start,yt=0;yt<ke.length-3;yt+=3){var Xt=ke[yt],nn=ke[yt+1],Bt=ke[yt+2],Wt=ke[yt+3],mn=ke[yt+4],On=be===0?Xt:nn,Wn=be===0?Wt:mn,Rn=!1;Xe&&($e=Math.sqrt(Math.pow(Xt-Wt,2)+Math.pow(nn-mn,2))),On<se?Wn>se&&(je=ct(Ye,Xt,nn,Wt,mn,se),Xe&&(Ye.start=dt+$e*je)):On>fe?Wn<fe&&(je=ct(Ye,Xt,nn,Wt,mn,fe),Xe&&(Ye.start=dt+$e*je)):le(Ye,Xt,nn,Bt),Wn<se&&On>=se&&(je=ct(Ye,Xt,nn,Wt,mn,se),Rn=!0),Wn>fe&&On<=fe&&(je=ct(Ye,Xt,nn,Wt,mn,fe),Rn=!0),!Le&&Rn&&(Xe&&(Ye.end=dt+$e*je),oe.push(Ye),Ye=qe(ke)),Xe&&(dt+=$e)}var kn=ke.length-3;Xt=ke[kn],nn=ke[kn+1],Bt=ke[kn+2],(On=be===0?Xt:nn)>=se&&On<=fe&&le(Ye,Xt,nn,Bt),kn=Ye.length-3,Le&&kn>=3&&(Ye[kn]!==Ye[0]||Ye[kn+1]!==Ye[1])&&le(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&oe.push(Ye)}function qe(ke){var oe=[];return oe.size=ke.size,oe.start=ke.start,oe.end=ke.end,oe}function lt(ke,oe,se,fe,be,Le){for(var Xe=0;Xe<ke.length;Xe++)Ne(ke[Xe],oe,se,fe,be,Le,!1)}function le(ke,oe,se,fe){ke.push(oe),ke.push(se),ke.push(fe)}function F(ke,oe,se,fe,be,Le){var Xe=(Le-oe)/(fe-oe);return ke.push(Le),ke.push(se+(be-se)*Xe),ke.push(1),Xe}function N(ke,oe,se,fe,be,Le){var Xe=(Le-se)/(be-se);return ke.push(oe+(fe-oe)*Xe),ke.push(Le),ke.push(1),Xe}function Ee(ke,oe){for(var se=[],fe=0;fe<ke.length;fe++){var be,Le=ke[fe],Xe=Le.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")be=Ge(Le.geometry,oe);else if(Xe==="MultiLineString"||Xe==="Polygon"){be=[];for(var $e=0;$e<Le.geometry.length;$e++)be.push(Ge(Le.geometry[$e],oe))}else if(Xe==="MultiPolygon")for(be=[],$e=0;$e<Le.geometry.length;$e++){for(var je=[],Ye=0;Ye<Le.geometry[$e].length;Ye++)je.push(Ge(Le.geometry[$e][Ye],oe));be.push(je)}se.push(Nt(Le.id,Xe,be,Le.tags))}return se}function Ge(ke,oe){var se=[];se.size=ke.size,ke.start!==void 0&&(se.start=ke.start,se.end=ke.end);for(var fe=0;fe<ke.length;fe+=3)se.push(ke[fe]+oe,ke[fe+1],ke[fe+2]);return se}function tt(ke,oe){if(ke.transformed)return ke;var se,fe,be,Le=1<<ke.z,Xe=ke.x,$e=ke.y;for(se=0;se<ke.features.length;se++){var je=ke.features[se],Ye=je.geometry,ct=je.type;if(je.geometry=[],ct===1)for(fe=0;fe<Ye.length;fe+=2)je.geometry.push(Ve(Ye[fe],Ye[fe+1],oe,Le,Xe,$e));else for(fe=0;fe<Ye.length;fe++){var dt=[];for(be=0;be<Ye[fe].length;be+=2)dt.push(Ve(Ye[fe][be],Ye[fe][be+1],oe,Le,Xe,$e));je.geometry.push(dt)}}return ke.transformed=!0,ke}function Ve(ke,oe,se,fe,be,Le){return[Math.round(se*(ke*fe-be)),Math.round(se*(oe*fe-Le))]}function Dt(ke,oe,se,fe,be){for(var Le=oe===be.maxZoom?0:be.tolerance/((1<<oe)*be.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:fe,z:oe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<ke.length;$e++){Xe.numFeatures++,vn(Xe,ke[$e],Le,be);var je=ke[$e].minX,Ye=ke[$e].minY,ct=ke[$e].maxX,dt=ke[$e].maxY;je<Xe.minX&&(Xe.minX=je),Ye<Xe.minY&&(Xe.minY=Ye),ct>Xe.maxX&&(Xe.maxX=ct),dt>Xe.maxY&&(Xe.maxY=dt)}return Xe}function vn(ke,oe,se,fe){var be=oe.geometry,Le=oe.type,Xe=[];if(Le==="Point"||Le==="MultiPoint")for(var $e=0;$e<be.length;$e+=3)Xe.push(be[$e]),Xe.push(be[$e+1]),ke.numPoints++,ke.numSimplified++;else if(Le==="LineString")Sn(Xe,be,ke,se,!1,!1);else if(Le==="MultiLineString"||Le==="Polygon")for($e=0;$e<be.length;$e++)Sn(Xe,be[$e],ke,se,Le==="Polygon",$e===0);else if(Le==="MultiPolygon")for(var je=0;je<be.length;je++){var Ye=be[je];for($e=0;$e<Ye.length;$e++)Sn(Xe,Ye[$e],ke,se,!0,$e===0)}if(Xe.length){var ct=oe.tags||null;if(Le==="LineString"&&fe.lineMetrics){for(var dt in ct={},oe.tags)ct[dt]=oe.tags[dt];ct.mapbox_clip_start=be.start/be.size,ct.mapbox_clip_end=be.end/be.size}var yt={geometry:Xe,type:Le==="Polygon"||Le==="MultiPolygon"?3:Le==="LineString"||Le==="MultiLineString"?2:1,tags:ct};oe.id!==null&&(yt.id=oe.id),ke.features.push(yt)}}function Sn(ke,oe,se,fe,be,Le){var Xe=fe*fe;if(fe>0&&oe.size<(be?Xe:fe))se.numPoints+=oe.length/3;else{for(var $e=[],je=0;je<oe.length;je+=3)(fe===0||oe[je+2]>Xe)&&(se.numSimplified++,$e.push(oe[je]),$e.push(oe[je+1])),se.numPoints++;be&&function(Ye,ct){for(var dt=0,yt=0,Xt=Ye.length,nn=Xt-2;yt<Xt;nn=yt,yt+=2)dt+=(Ye[yt]-Ye[nn])*(Ye[yt+1]+Ye[nn+1]);if(dt>0===ct)for(yt=0,Xt=Ye.length;yt<Xt/2;yt+=2){var Bt=Ye[yt],Wt=Ye[yt+1];Ye[yt]=Ye[Xt-2-yt],Ye[yt+1]=Ye[Xt-1-yt],Ye[Xt-2-yt]=Bt,Ye[Xt-1-yt]=Wt}}($e,Le),ke.push($e)}}function Mn(ke,oe){var se=(oe=this.options=function(be,Le){for(var Xe in Le)be[Xe]=Le[Xe];return be}(Object.create(this.options),oe)).debug;if(se&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe=function(be,Le){var Xe=[];if(be.type==="FeatureCollection")for(var $e=0;$e<be.features.length;$e++)Tn(Xe,be.features[$e],Le,$e);else Tn(Xe,be.type==="Feature"?be:{geometry:be},Le);return Xe}(ke,oe);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=function(be,Le){var Xe=Le.buffer/Le.extent,$e=be,je=R(be,1,-1-Xe,Xe,0,-1,2,Le),Ye=R(be,1,1-Xe,2+Xe,0,-1,2,Le);return(je||Ye)&&($e=R(be,1,-Xe,1+Xe,0,-1,2,Le)||[],je&&($e=Ee(je,1).concat($e)),Ye&&($e=$e.concat(Ee(Ye,-1)))),$e}(fe,oe),fe.length&&this.splitTile(fe,0,0,0),se&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ft(ke,oe,se){return 32*((1<<ke)*se+oe)+ke}function cn(ke,oe){return oe?ke.properties[oe]:ke.id}function fn(ke,oe){if(ke==null)return!0;if(ke.type==="Feature")return cn(ke,oe)!=null;if(ke.type==="FeatureCollection"){const se=new Set;for(const fe of ke.features){const be=cn(fe,oe);if(be==null||se.has(be))return!1;se.add(be)}return!0}return!1}function Er(ke,oe){const se=new Map;if(ke!=null)if(ke.type==="Feature")se.set(cn(ke,oe),ke);else for(const fe of ke.features)se.set(cn(fe,oe),fe);return se}function Xr(ke,oe){const se=ke.tileID.canonical;if(!this._geoJSONIndex)return oe(null,null);const fe=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!fe)return oe(null,null);const be=new class{constructor(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Xe.length,this._features=Xe}feature(Xe){return new class{constructor($e){this._feature=$e,this.extent=a.EXTENT,this.type=$e.type,this.properties=$e.tags,"id"in $e&&!isNaN($e.id)&&(this.id=parseInt($e.id,10))}loadGeometry(){if(this._feature.type===1){const $e=[];for(const je of this._feature.geometry)$e.push([new a.Point(je[0],je[1])]);return $e}{const $e=[];for(const je of this._feature.geometry){const Ye=[];for(const ct of je)Ye.push(new a.Point(ct[0],ct[1]));$e.push(Ye)}return $e}}toGeoJSON($e,je,Ye){return V.call(this,$e,je,Ye)}}(this._features[Xe])}}(fe.features);let Le=me(be);Le.byteOffset===0&&Le.byteLength===Le.buffer.byteLength||(Le=new Uint8Array(Le)),oe(null,{vectorTile:be,rawData:Le.buffer})}Mn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mn.prototype.splitTile=function(ke,oe,se,fe,be,Le,Xe){for(var $e=[ke,oe,se,fe],je=this.options,Ye=je.debug;$e.length;){fe=$e.pop(),se=$e.pop(),oe=$e.pop(),ke=$e.pop();var ct=1<<oe,dt=ft(oe,se,fe),yt=this.tiles[dt];if(!yt&&(Ye>1&&console.time("creation"),yt=this.tiles[dt]=Dt(ke,oe,se,fe,je),this.tileCoords.push({z:oe,x:se,y:fe}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,se,fe,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var Xt="z"+oe;this.stats[Xt]=(this.stats[Xt]||0)+1,this.total++}if(yt.source=ke,be){if(oe===je.maxZoom||oe===be)continue;var nn=1<<be-oe;if(se!==Math.floor(Le/nn)||fe!==Math.floor(Xe/nn))continue}else if(oe===je.indexMaxZoom||yt.numPoints<=je.indexMaxPoints)continue;if(yt.source=null,ke.length!==0){Ye>1&&console.time("clipping");var Bt,Wt,mn,On,Wn,Rn,kn=.5*je.buffer/je.extent,qr=.5-kn,Jn=.5+kn,pr=1+kn;Bt=Wt=mn=On=null,Wn=R(ke,ct,se-kn,se+Jn,0,yt.minX,yt.maxX,je),Rn=R(ke,ct,se+qr,se+pr,0,yt.minX,yt.maxX,je),ke=null,Wn&&(Bt=R(Wn,ct,fe-kn,fe+Jn,1,yt.minY,yt.maxY,je),Wt=R(Wn,ct,fe+qr,fe+pr,1,yt.minY,yt.maxY,je),Wn=null),Rn&&(mn=R(Rn,ct,fe-kn,fe+Jn,1,yt.minY,yt.maxY,je),On=R(Rn,ct,fe+qr,fe+pr,1,yt.minY,yt.maxY,je),Rn=null),Ye>1&&console.timeEnd("clipping"),$e.push(Bt||[],oe+1,2*se,2*fe),$e.push(Wt||[],oe+1,2*se,2*fe+1),$e.push(mn||[],oe+1,2*se+1,2*fe),$e.push(On||[],oe+1,2*se+1,2*fe+1)}}},Mn.prototype.getTile=function(ke,oe,se){var fe=this.options,be=fe.extent,Le=fe.debug;if(ke<0||ke>24)return null;var Xe=1<<ke,$e=ft(ke,oe=(oe%Xe+Xe)%Xe,se);if(this.tiles[$e])return tt(this.tiles[$e],be);Le>1&&console.log("drilling down to z%d-%d-%d",ke,oe,se);for(var je,Ye=ke,ct=oe,dt=se;!je&&Ye>0;)Ye--,ct=Math.floor(ct/2),dt=Math.floor(dt/2),je=this.tiles[ft(Ye,ct,dt)];return je&&je.source?(Le>1&&console.log("found parent tile z%d-%d-%d",Ye,ct,dt),Le>1&&console.time("drilling down"),this.splitTile(je.source,Ye,ct,dt,ke,oe,se),Le>1&&console.timeEnd("drilling down"),this.tiles[$e]?tt(this.tiles[$e],be):null):null};class Qt extends j{constructor(oe,se,fe,be){super(oe,se,fe,Xr),this._dataUpdateable=new Map,this.loadGeoJSON=(Le,Xe)=>{const{promoteId:$e}=Le;if(Le.request)return a.getJSON(Le.request,(je,Ye,ct,dt)=>{this._dataUpdateable=fn(Ye,$e)?Er(Ye,$e):void 0,Xe(je,Ye,ct,dt)});if(typeof Le.data=="string")try{const je=JSON.parse(Le.data);this._dataUpdateable=fn(je,$e)?Er(je,$e):void 0,Xe(null,je)}catch{Xe(new Error(`Input data given to '${Le.source}' is not a valid GeoJSON object.`))}else Le.dataDiff?this._dataUpdateable?(function(je,Ye,ct){var dt,yt,Xt,nn;if(Ye.removeAll&&je.clear(),Ye.remove)for(const Bt of Ye.remove)je.delete(Bt);if(Ye.add)for(const Bt of Ye.add){const Wt=cn(Bt,ct);Wt!=null&&je.set(Wt,Bt)}if(Ye.update)for(const Bt of Ye.update){let Wt=je.get(Bt.id);if(Wt==null)continue;const mn=!Bt.removeAllProperties&&(((dt=Bt.removeProperties)===null||dt===void 0?void 0:dt.length)>0||((yt=Bt.addOrUpdateProperties)===null||yt===void 0?void 0:yt.length)>0);if((Bt.newGeometry||Bt.removeAllProperties||mn)&&(Wt=Object.assign({},Wt),je.set(Bt.id,Wt),mn&&(Wt.properties=Object.assign({},Wt.properties))),Bt.newGeometry&&(Wt.geometry=Bt.newGeometry),Bt.removeAllProperties)Wt.properties={};else if(((Xt=Bt.removeProperties)===null||Xt===void 0?void 0:Xt.length)>0)for(const On of Bt.removeProperties)Object.prototype.hasOwnProperty.call(Wt.properties,On)&&delete Wt.properties[On];if(((nn=Bt.addOrUpdateProperties)===null||nn===void 0?void 0:nn.length)>0)for(const{key:On,value:Wn}of Bt.addOrUpdateProperties)Wt.properties[On]=Wn}}(this._dataUpdateable,Le.dataDiff,$e),Xe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Xe(new Error(`Cannot update existing geojson data in ${Le.source}`)):Xe(new Error(`Input data given to '${Le.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},be&&(this.loadGeoJSON=be)}loadData(oe,se){var fe;(fe=this._pendingRequest)===null||fe===void 0||fe.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const be=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new a.RequestPerformance(oe.request);this._pendingCallback=se,this._pendingRequest=this.loadGeoJSON(oe,(Le,Xe)=>{if(delete this._pendingCallback,delete this._pendingRequest,Le||!Xe)return se(Le);if(typeof Xe!="object")return se(new Error(`Input data given to '${oe.source}' is not a valid GeoJSON object.`));{G(Xe,!0);try{if(oe.filter){const je=a.createExpression(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(je.result==="error")throw new Error(je.value.map(ct=>`${ct.key}: ${ct.message}`).join(", "));Xe={type:"FeatureCollection",features:Xe.features.filter(ct=>je.value.evaluate({zoom:0},ct))}}this._geoJSONIndex=oe.cluster?new Ze(function({superclusterOptions:je,clusterProperties:Ye}){if(!Ye||!je)return je;const ct={},dt={},yt={accumulated:null,zoom:0},Xt={properties:null},nn=Object.keys(Ye);for(const Bt of nn){const[Wt,mn]=Ye[Bt],On=a.createExpression(mn),Wn=a.createExpression(typeof Wt=="string"?[Wt,["accumulated"],["get",Bt]]:Wt);ct[Bt]=On.value,dt[Bt]=Wn.value}return je.map=Bt=>{Xt.properties=Bt;const Wt={};for(const mn of nn)Wt[mn]=ct[mn].evaluate(yt,Xt);return Wt},je.reduce=(Bt,Wt)=>{Xt.properties=Wt;for(const mn of nn)yt.accumulated=Bt[mn],Bt[mn]=dt[mn].evaluate(yt,Xt)},je}(oe)).load(Xe.features):function(je,Ye){return new Mn(je,Ye)}(Xe,oe.geojsonVtOptions)}catch(je){return se(je)}this.loaded={};const $e={};if(be){const je=be.finish();je&&($e.resourceTiming={},$e.resourceTiming[oe.source]=JSON.parse(JSON.stringify(je)))}se(null,$e)}})}reloadTile(oe,se){const fe=this.loaded;return fe&&fe[oe.uid]?super.reloadTile(oe,se):this.loadTile(oe,se)}removeSource(oe,se){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),se()}getClusterExpansionZoom(oe,se){try{se(null,this._geoJSONIndex.getClusterExpansionZoom(oe.clusterId))}catch(fe){se(fe)}}getClusterChildren(oe,se){try{se(null,this._geoJSONIndex.getChildren(oe.clusterId))}catch(fe){se(fe)}}getClusterLeaves(oe,se){try{se(null,this._geoJSONIndex.getLeaves(oe.clusterId,oe.limit,oe.offset))}catch(fe){se(fe)}}}class co{constructor(oe){this.self=oe,this.actor=new a.Actor(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:j,geojson:Qt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(se,fe)=>{if(this.workerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.workerSourceTypes[se]=fe},this.self.registerRTLTextPlugin=se=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=se.applyArabicShaping,a.plugin.processBidirectionalText=se.processBidirectionalText,a.plugin.processStyledBidirectionalText=se.processStyledBidirectionalText}}setReferrer(oe,se){this.referrer=se}setImages(oe,se,fe){this.availableImages[oe]=se;for(const be in this.workerSources[oe]){const Le=this.workerSources[oe][be];for(const Xe in Le)Le[Xe].availableImages=se}fe()}setLayers(oe,se,fe){this.getLayerIndex(oe).replace(se),fe()}updateLayers(oe,se,fe){this.getLayerIndex(oe).update(se.layers,se.removedIds),fe()}loadTile(oe,se,fe){this.getWorkerSource(oe,se.type,se.source).loadTile(se,fe)}loadDEMTile(oe,se,fe){this.getDEMWorkerSource(oe,se.source).loadTile(se,fe)}reloadTile(oe,se,fe){this.getWorkerSource(oe,se.type,se.source).reloadTile(se,fe)}abortTile(oe,se,fe){this.getWorkerSource(oe,se.type,se.source).abortTile(se,fe)}removeTile(oe,se,fe){this.getWorkerSource(oe,se.type,se.source).removeTile(se,fe)}removeDEMTile(oe,se){this.getDEMWorkerSource(oe,se.source).removeTile(se)}removeSource(oe,se,fe){if(!this.workerSources[oe]||!this.workerSources[oe][se.type]||!this.workerSources[oe][se.type][se.source])return;const be=this.workerSources[oe][se.type][se.source];delete this.workerSources[oe][se.type][se.source],be.removeSource!==void 0?be.removeSource(se,fe):fe()}loadWorkerSource(oe,se,fe){try{this.self.importScripts(se.url),fe()}catch(be){fe(be.toString())}}syncRTLPluginState(oe,se,fe){try{a.plugin.setState(se);const be=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&be!=null){this.self.importScripts(be);const Le=a.plugin.isParsed();fe(Le?void 0:new Error(`RTL Text Plugin failed to import scripts from ${be}`),Le)}}catch(be){fe(be.toString())}}getAvailableImages(oe){let se=this.availableImages[oe];return se||(se=[]),se}getLayerIndex(oe){let se=this.layerIndexes[oe];return se||(se=this.layerIndexes[oe]=new b),se}getWorkerSource(oe,se,fe){if(this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][se]||(this.workerSources[oe][se]={}),!this.workerSources[oe][se][fe]){const be={send:(Le,Xe,$e)=>{this.actor.send(Le,Xe,$e,oe)}};this.workerSources[oe][se][fe]=new this.workerSourceTypes[se](be,this.getLayerIndex(oe),this.getAvailableImages(oe))}return this.workerSources[oe][se][fe]}getDEMWorkerSource(oe,se){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][se]||(this.demWorkerSources[oe][se]=new ee),this.demWorkerSources[oe][se]}}return a.isWorker()&&(self.worker=new co(self)),co}),d(["./shared"],function(a){var b="3.5.1";class w{static testProp(r){if(!w.docStyle)return r[0];for(let u=0;u<r.length;u++)if(r[u]in w.docStyle)return r[u];return r[0]}static create(r,u,f){const m=window.document.createElement(r);return u!==void 0&&(m.className=u),f&&f.appendChild(m),m}static createNS(r,u){return window.document.createElementNS(r,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(r,u){r.style[w.transformProp]=u}static addEventListener(r,u,f,m={}){r.addEventListener(u,f,"passive"in m?m:m.capture)}static removeEventListener(r,u,f,m={}){r.removeEventListener(u,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(r,u){const f=r.getBoundingClientRect();return new a.Point(u.clientX-f.left-r.clientLeft,u.clientY-f.top-r.clientTop)}static touchPos(r,u){const f=r.getBoundingClientRect(),m=[];for(let _=0;_<u.length;_++)m.push(new a.Point(u[_].clientX-f.left-r.clientLeft,u[_].clientY-f.top-r.clientTop));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const I={supported:!1,testSupport:function(g){!j&&L&&(ee?Y(g):C=g)}};let C,L,j=!1,ee=!1;function Y(g){const r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,L),g.isContextLost())return;I.supported=!0}catch{}g.deleteTexture(r),j=!0}var de,G;typeof document<"u"&&(L=document.createElement("img"),L.onload=function(){C&&Y(C),C=null,ee=!0},L.onerror=function(){j=!0,C=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,u,f,m;g.resetRequestQueue=()=>{r=[],u=0,f=0,m={}},g.addThrottleControl=D=>{const X=f++;return m[X]=D,X},g.removeThrottleControl=D=>{delete m[D],A()},g.getImage=(D,X,K=!0)=>{I.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const ce={requestParameters:D,supportImageRefresh:K,callback:X,cancelled:!1,completed:!1,cancel:()=>{ce.completed||ce.cancelled||(ce.cancelled=!0,ce.innerRequest&&(ce.innerRequest.cancel(),u--),A())}};return r.push(ce),A(),ce};const _=D=>{const{requestParameters:X,supportImageRefresh:K,callback:ce}=D;return a.extend(X,{type:"image"}),(K!==!1||a.isWorker()||a.getProtocolAction(X.url)||X.headers&&!Object.keys(X.headers).reduce((Me,Ae)=>Me&&Ae==="accept",!0)?a.makeRequest:z)(X,(Me,Ae,Fe,Ce)=>{T(D,ce,Me,Ae,Fe,Ce)})},T=(D,X,K,ce,Me,Ae)=>{K?X(K):ce instanceof HTMLImageElement||a.isImageBitmap(ce)?X(null,ce):ce&&((Fe,Ce)=>{typeof createImageBitmap=="function"?a.arrayBufferToImageBitmap(Fe,Ce):a.arrayBufferToImage(Fe,Ce)})(ce,(Fe,Ce)=>{Fe!=null?X(Fe):Ce!=null&&X(null,Ce,{cacheControl:Me,expires:Ae})}),D.cancelled||(D.completed=!0,u--,A())},A=()=>{const D=(()=>{const X=Object.keys(m);let K=!1;if(X.length>0){for(const ce of X)if(K=m[ce](),K)break}return K})()?a.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let X=u;X<D&&r.length>0;X++){const K=r.shift();if(K.cancelled){X--;continue}const ce=_(K);u++,K.innerRequest=ce}},z=(D,X)=>{const K=new Image,ce=D.url;let Me=!1;const Ae=D.credentials;return Ae&&Ae==="include"?K.crossOrigin="use-credentials":(Ae&&Ae==="same-origin"||!a.sameOrigin(ce))&&(K.crossOrigin="anonymous"),K.fetchPriority="high",K.onload=()=>{X(null,K),K.onerror=K.onload=null},K.onerror=()=>{Me||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),K.onerror=K.onload=null},K.src=ce,{cancel:()=>{Me=!0,K.src=""}}}}(de||(de={})),de.resetRequestQueue(),function(g){g.Glyphs="Glyphs",g.Image="Image",g.Source="Source",g.SpriteImage="SpriteImage",g.SpriteJSON="SpriteJSON",g.Style="Style",g.Tile="Tile",g.Unknown="Unknown"}(G||(G={}));class V{constructor(r){this._transformRequestFn=r}transformRequest(r,u){return this._transformRequestFn&&this._transformRequestFn(r,u)||{url:r}}normalizeSpriteURL(r,u,f){const m=function(_){const T=_.match(U);if(!T)throw new Error(`Unable to parse URL "${_}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(r);return m.path+=`${u}${f}`,function(_){const T=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${T}`}(m)}setTransformRequest(r){this._transformRequestFn=r}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ie(g){var r=new a.ARRAY_TYPE(3);return r[0]=g[0],r[1]=g[1],r[2]=g[2],r}var Z,B=function(g,r,u){return g[0]=r[0]-u[0],g[1]=r[1]-u[1],g[2]=r[2]-u[2],g};Z=new a.ARRAY_TYPE(3),a.ARRAY_TYPE!=Float32Array&&(Z[0]=0,Z[1]=0,Z[2]=0);var S=function(g){var r=g[0],u=g[1];return r*r+u*u};function k(g){const r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){const u=[];for(const{id:f,url:m}of g){const _=`${f}${m}`;u.indexOf(_)===-1&&(u.push(_),r.push({id:f,url:m}))}}return r}function W(g,r,u,f,m){if(f)return void g(f);if(m!==Object.values(r).length||m!==Object.values(u).length)return;const _={};for(const T in r){_[T]={};const A=a.browser.getImageCanvasContext(u[T]),z=r[T];for(const D in z){const{width:X,height:K,x:ce,y:Me,sdf:Ae,pixelRatio:Fe,stretchX:Ce,stretchY:Ke,content:nt}=z[D];_[T][D]={data:null,pixelRatio:Fe,sdf:Ae,stretchX:Ce,stretchY:Ke,content:nt,spriteData:{width:X,height:K,x:ce,y:Me,context:A}}}}g(null,_)}(function(){var g=new a.ARRAY_TYPE(2);a.ARRAY_TYPE!=Float32Array&&(g[0]=0,g[1]=0)})();class q{constructor(r,u,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(u,m)}update(r,u,f){const{width:m,height:_}=r,T=!(this.size&&this.size[0]===m&&this.size[1]===_||f),{context:A}=this,{gl:z}=A;if(this.useMipmap=!!(u&&u.useMipmap),z.bindTexture(z.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===z.RGBA&&(!u||u.premultiply!==!1)),T)this.size=[m,_],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.isImageBitmap(r)?z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,z.UNSIGNED_BYTE,r):z.texImage2D(z.TEXTURE_2D,0,this.format,m,_,0,this.format,z.UNSIGNED_BYTE,r.data);else{const{x:D,y:X}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.isImageBitmap(r)?z.texSubImage2D(z.TEXTURE_2D,0,D,X,z.RGBA,z.UNSIGNED_BYTE,r):z.texSubImage2D(z.TEXTURE_2D,0,D,X,m,_,z.RGBA,z.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&z.generateMipmap(z.TEXTURE_2D)}bind(r,u,f){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),r!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||r),this.filter=r),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function Q(g){const{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class ye extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(r){const u=this.images[r];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new a.RGBAImage({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(r,u){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,u)&&(this.images[r]=u)}_validate(r,u){let f=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,u){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||u<m[1])return!1;f=m[1]}return!0}_validateContent(r,u){if(!r)return!0;if(r.length!==4)return!1;const f=u.spriteData,m=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(r[0]<0||m<r[0]||r[1]<0||_<r[1]||r[2]<0||m<r[2]||r[3]<0||_<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,u,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[r]=u,this.updatedImages[r]=!0}removeImage(r){const u=this.images[r];delete this.images[r],delete this.patterns[r],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r,u){let f=!0;if(!this.isLoaded())for(const m of r)this.images[m]||(f=!1);this.isLoaded()||f?this._notify(r,u):this.requestors.push({ids:r,callback:u})}_notify(r,u){const f={};for(const m of r){let _=this.getImage(m);_||(this.fire(new a.Event("styleimagemissing",{id:m})),_=this.getImage(m)),_?f[m]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:a.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:r,height:u}=this.atlasImage;return{width:r,height:u}}getPattern(r){const u=this.patterns[r],f=this.getImage(r);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new a.ImagePosition(m,f);this.patterns[r]={bin:m,position:_}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const u=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(r,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const _ in this.patterns)r.push(this.patterns[_].bin);const{w:u,h:f}=a.potpack(r),m=this.atlasImage;m.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:T}=this.patterns[_],A=T.x+1,z=T.y+1,D=this.getImage(_).data,X=D.width,K=D.height;a.RGBAImage.copy(D,m,{x:0,y:0},{x:A,y:z},{width:X,height:K}),a.RGBAImage.copy(D,m,{x:0,y:K-1},{x:A,y:z-1},{width:X,height:1}),a.RGBAImage.copy(D,m,{x:0,y:0},{x:A,y:z+K},{width:X,height:1}),a.RGBAImage.copy(D,m,{x:X-1,y:0},{x:A-1,y:z},{width:1,height:K}),a.RGBAImage.copy(D,m,{x:0,y:0},{x:A+X,y:z},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const u of r){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||a.warnOnce(`Image with ID: "${u}" was not found`),Q(f)&&this.updateImage(u,f)}}}const _e=1e20;function xe(g,r,u,f,m,_,T,A,z){for(let D=r;D<r+f;D++)te(g,u*_+D,_,m,T,A,z);for(let D=u;D<u+m;D++)te(g,D*_+r,1,f,T,A,z)}function te(g,r,u,f,m,_,T){_[0]=0,T[0]=-_e,T[1]=_e,m[0]=g[r];for(let A=1,z=0,D=0;A<f;A++){m[A]=g[r+A*u];const X=A*A;do{const K=_[z];D=(m[A]-m[K]+X-K*K)/(A-K)/2}while(D<=T[z]&&--z>-1);z++,_[z]=A,T[z]=D,T[z+1]=_e}for(let A=0,z=0;A<f;A++){for(;T[z+1]<A;)z++;const D=_[z],X=A-D;g[r+A*u]=m[D]+X*X}}class ue{constructor(r,u){this.requestManager=r,this.localIdeographFontFamily=u,this.entries={}}setURL(r){this.url=r}getGlyphs(r,u){const f=[];for(const m in r)for(const _ of r[m])f.push({stack:m,id:_});a.asyncAll(f,({stack:m,id:_},T)=>{let A=this.entries[m];A||(A=this.entries[m]={glyphs:{},requests:{},ranges:{}});let z=A.glyphs[_];if(z!==void 0)return void T(null,{stack:m,id:_,glyph:z});if(z=this._tinySDF(A,m,_),z)return A.glyphs[_]=z,void T(null,{stack:m,id:_,glyph:z});const D=Math.floor(_/256);if(256*D>65535)return void T(new Error("glyphs > 65535 not supported"));if(A.ranges[D])return void T(null,{stack:m,id:_,glyph:z});if(!this.url)return void T(new Error("glyphsUrl is not set"));let X=A.requests[D];X||(X=A.requests[D]=[],ue.loadGlyphRange(m,D,this.url,this.requestManager,(K,ce)=>{if(ce){for(const Me in ce)this._doesCharSupportLocalGlyph(+Me)||(A.glyphs[+Me]=ce[+Me]);A.ranges[D]=!0}for(const Me of X)Me(K,ce);delete A.requests[D]})),X.push((K,ce)=>{K?T(K):ce&&T(null,{stack:m,id:_,glyph:ce[_]||null})})},(m,_)=>{if(m)u(m);else if(_){const T={};for(const{stack:A,id:z,glyph:D}of _)(T[A]||(T[A]={}))[z]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};u(null,T)}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](r)||a.unicodeBlockLookup["Hangul Syllables"](r)||a.unicodeBlockLookup.Hiragana(r)||a.unicodeBlockLookup.Katakana(r))}_tinySDF(r,u,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let _=r.tinySDF;if(!_){let A="400";/bold/i.test(u)?A="900":/medium/i.test(u)?A="500":/light/i.test(u)&&(A="200"),_=r.tinySDF=new ue.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:A})}const T=_.draw(String.fromCharCode(f));return{id:f,bitmap:new a.AlphaImage({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}ue.loadGlyphRange=function(g,r,u,f,m){const _=256*r,T=_+255,A=f.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${_}-${T}`),G.Glyphs);a.getArrayBuffer(A,(z,D)=>{if(z)m(z);else if(D){const X={};for(const K of a.parseGlyphPbf(D))X[K.id]=K;m(null,X)}})},ue.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:u=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:_="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=u;const A=this.size=g+4*r,z=this._createCanvas(A),D=this.ctx=z.getContext("2d",{willReadFrequently:!0});D.font=`${T} ${_} ${g}px ${m}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(A*A),this.gridInner=new Float64Array(A*A),this.f=new Float64Array(A),this.z=new Float64Array(A+1),this.v=new Uint16Array(A)}_createCanvas(g){const r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){const{width:r,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:_}=this.ctx.measureText(g),T=Math.ceil(u),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-m))),z=Math.min(this.size-this.buffer,T+Math.ceil(f)),D=A+2*this.buffer,X=z+2*this.buffer,K=Math.max(D*X,0),ce=new Uint8ClampedArray(K),Me={data:ce,width:D,height:X,glyphWidth:A,glyphHeight:z,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(A===0||z===0)return Me;const{ctx:Ae,buffer:Fe,gridInner:Ce,gridOuter:Ke}=this;Ae.clearRect(Fe,Fe,A,z),Ae.fillText(g,Fe,Fe+T);const nt=Ae.getImageData(Fe,Fe,A,z);Ke.fill(_e,0,K),Ce.fill(0,0,K);for(let Re=0;Re<z;Re++)for(let Je=0;Je<A;Je++){const st=nt.data[4*(Re*A+Je)+3]/255;if(st===0)continue;const at=(Re+Fe)*D+Je+Fe;if(st===1)Ke[at]=0,Ce[at]=_e;else{const pt=.5-st;Ke[at]=pt>0?pt*pt:0,Ce[at]=pt<0?pt*pt:0}}xe(Ke,0,0,D,X,D,this.f,this.v,this.z),xe(Ce,Fe,Fe,A,z,D,this.f,this.v,this.z);for(let Re=0;Re<K;Re++){const Je=Math.sqrt(Ke[Re])-Math.sqrt(Ce[Re]);ce[Re]=Math.round(255-255*(Je/this.radius+this.cutoff))}return Me}};class ne{constructor(){this.specification=a.v8Spec.light.position}possiblyEvaluate(r,u){return a.sphericalToCartesian(r.expression.evaluate(u))}interpolate(r,u,f){return{x:a.interpolate.number(r.x,u.x,f),y:a.interpolate.number(r.y,u.y,f),z:a.interpolate.number(r.z,u.z,f)}}}let re;class me extends a.Evented{constructor(r){super(),re=re||new a.Properties({anchor:new a.DataConstantProperty(a.v8Spec.light.anchor),position:new ne,color:new a.DataConstantProperty(a.v8Spec.light.color),intensity:new a.DataConstantProperty(a.v8Spec.light.intensity)}),this._transitionable=new a.Transitionable(re),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,u={}){if(!this._validate(a.validateLight,r,u))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,u,f){return(!f||f.validate!==!1)&&a.emitValidationErrors(this,r.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v8Spec})))}}class Se{constructor(r,u){this.width=r,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,u){const f=r.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,u)),this.dashEntry[f]}getDashRanges(r,u,f){const m=[];let _=r.length%2==1?-r[r.length-1]*f:0,T=r[0]*f,A=!0;m.push({left:_,right:T,isDash:A,zeroLength:r[0]===0});let z=r[0];for(let D=1;D<r.length;D++){A=!A;const X=r[D];_=z*f,z+=X,T=z*f,m.push({left:_,right:T,isDash:A,zeroLength:X===0})}return m}addRoundDash(r,u,f){const m=u/2;for(let _=-f;_<=f;_++){const T=this.width*(this.nextRow+f+_);let A=0,z=r[A];for(let D=0;D<this.width;D++){D/z.right>1&&(z=r[++A]);const X=Math.abs(D-z.left),K=Math.abs(D-z.right),ce=Math.min(X,K);let Me;const Ae=_/f*(m+1);if(z.isDash){const Fe=m-Math.abs(Ae);Me=Math.sqrt(ce*ce+Fe*Fe)}else Me=m-Math.sqrt(ce*ce+Ae*Ae);this.data[T+D]=Math.max(0,Math.min(255,Me+128))}}}addRegularDash(r){for(let A=r.length-1;A>=0;--A){const z=r[A],D=r[A+1];z.zeroLength?r.splice(A,1):D&&D.isDash===z.isDash&&(D.left=z.left,r.splice(A,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const m=this.width*this.nextRow;let _=0,T=r[_];for(let A=0;A<this.width;A++){A/T.right>1&&(T=r[++_]);const z=Math.abs(A-T.left),D=Math.abs(A-T.right),X=Math.min(z,D);this.data[m+A]=Math.max(0,Math.min(255,(T.isDash?X:-X)+128))}}addDash(r,u){const f=u?7:0,m=2*f+1;if(this.nextRow+m>this.height)return a.warnOnce("LineAtlas out of space"),null;let _=0;for(let A=0;A<r.length;A++)_+=r[A];if(_!==0){const A=this.width/_,z=this.getDashRanges(r,this.width,A);u?this.addRoundDash(z,A,f):this.addRegularDash(z)}const T={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=m,this.dirty=!0,T}bind(r){const u=r.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class we{constructor(r,u,f){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=f;const m=this.workerPool.acquire(f);for(let _=0;_<m.length;_++){const T=new we.Actor(m[_],u,f);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,u,f){a.asyncAll(this.actors,(m,_)=>{m.send(r,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}}function Ue(g,r,u){const f=function(m,_){if(m)return u(m);if(_){const T=a.pick(a.extend(_,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(T.vectorLayers=_.vector_layers,T.vectorLayerIds=T.vectorLayers.map(A=>A.id)),u(null,T)}};return g.url?a.getJSON(r.transformRequest(g.url,G.Source),f):a.browser.frame(()=>f(null,g))}we.Actor=a.Actor;class Pe{constructor(r,u){r&&(u?this.setSouthWest(r).setNorthEast(u):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.LngLat?new a.LngLat(r.lng,r.lat):a.LngLat.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.LngLat?new a.LngLat(r.lng,r.lat):a.LngLat.convert(r),this}extend(r){const u=this._sw,f=this._ne;let m,_;if(r instanceof a.LngLat)m=r,_=r;else{if(!(r instanceof Pe))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Pe.convert(r)):this.extend(a.LngLat.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.LngLat.convert(r)):this;if(m=r._sw,_=r._ne,!m||!_)return this}return u||f?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new a.LngLat(m.lng,m.lat),this._ne=new a.LngLat(_.lng,_.lat)),this}getCenter(){return new a.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new a.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:u,lat:f}=a.LngLat.convert(r);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Pe?r:r&&new Pe(r)}static fromLngLat(r,u=0){const f=360*u/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Pe(new a.LngLat(r.lng-m,r.lat-f),new a.LngLat(r.lng+m,r.lat+f))}}class ze{constructor(r,u,f){this.bounds=Pe.convert(this.validateBounds(r)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const u=Math.pow(2,r.z),f=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),m=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),_=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),T=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return r.x>=f&&r.x<_&&r.y>=m&&r.y<T}}class He extends a.Evented{constructor(r,u,f,m){if(super(),this.load=()=>{this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,(_,T)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new a.ErrorEvent(_)):T&&(a.extend(this,T),T.bounds&&(this.tileBounds=new ze(T.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>a.extend({},this._options),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(f,G.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(T,A){return delete r.request,r.aborted?u(null):T&&T.status!==404?u(T):(A&&A.resourceTiming&&(r.resourceTiming=A.resourceTiming),this.map._refreshExpiredTiles&&A&&r.setExpiryData(A),r.loadVectorData(A,this.map.painter),u(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,r.actor&&r.state!=="expired"?r.state==="loading"?r.reloadCallback=u:r.request=r.actor.send("reloadTile",m,_.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",m,_.bind(this)))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)}unloadTile(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ze extends a.Evented{constructor(r,u,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,(r,u)=>{this._tileJSONRequest=null,this._loaded=!0,r?this.fire(new a.ErrorEvent(r)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new ze(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}serialize(){return a.extend({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.request=de.getImage(this.map._requestManager.transformRequest(f,G.Tile),(m,_,T)=>{if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(m)r.state="errored",u(m);else if(_){this.map._refreshExpiredTiles&&T&&r.setExpiryData(T);const A=this.map.painter.context,z=A.gl;r.texture=this.map.painter.getTileTexture(_.width),r.texture?r.texture.update(_,{useMipmap:!0}):(r.texture=new q(A,_,z.RGBA,{useMipmap:!0}),r.texture.bind(z.LINEAR,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),A.extTextureFilterAnisotropic&&z.texParameterf(z.TEXTURE_2D,A.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,A.extTextureFilterAnisotropicMax)),r.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(r,u){r.request&&(r.request.cancel(),delete r.request),u()}unloadTile(r,u){r.texture&&this.map.painter.saveTileTexture(r.texture),u()}hasTransition(){return!1}}class rt extends Ze{constructor(r,u,f,m){super(r,u,f,m),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(r,u){const f=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(f,G.Tile);function _(T,A){T&&(r.state="errored",u(T)),A&&(r.dem=A,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded",u(null))}r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.request=de.getImage(m,(T,A,z)=>a.__awaiter(this,void 0,void 0,function*(){if(delete r.request,r.aborted)r.state="unloaded",u(null);else if(T)r.state="errored",u(T);else if(A){this.map._refreshExpiredTiles&&r.setExpiryData(z);const D=a.isImageBitmap(A)&&a.offscreenCanvasSupported()?A:yield function(K){return a.__awaiter(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.isOffscreenCanvasDistorted()){const ce=K.width+2,Me=K.height+2;try{return new a.RGBAImage({width:ce,height:Me},yield a.readImageUsingVideoFrame(K,-1,-1,ce,Me))}catch{}}return a.browser.getImageData(K,1)})}(A),X={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};r.actor&&r.state!=="expired"||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",X,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(r){const u=r.canonical,f=Math.pow(2,u.z),m=(u.x-1+f)%f,_=u.x===0?r.wrap-1:r.wrap,T=(u.x+1+f)%f,A=u.x+1===f?r.wrap+1:r.wrap,z={};return z[new a.OverscaledTileID(r.overscaledZ,_,u.z,m,u.y).key]={backfilled:!1},z[new a.OverscaledTileID(r.overscaledZ,A,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(z[new a.OverscaledTileID(r.overscaledZ,_,u.z,m,u.y-1).key]={backfilled:!1},z[new a.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},z[new a.OverscaledTileID(r.overscaledZ,A,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<f&&(z[new a.OverscaledTileID(r.overscaledZ,_,u.z,m,u.y+1).key]={backfilled:!1},z[new a.OverscaledTileID(r.overscaledZ,r.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},z[new a.OverscaledTileID(r.overscaledZ,A,u.z,T,u.y+1).key]={backfilled:!1}),z}unloadTile(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})}}class ut extends a.Evented{constructor(r,u,f,m){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>a.extend({},this._options,{type:this.type,data:this._data}),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},u),this}getClusterChildren(r,u){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},u),this}getClusterLeaves(r,u,f,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:u,offset:f},m),this}_updateWorkerData(r){const u=a.extend({},this.workerOptions);r?u.dataDiff=r:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(a.browser.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,m)=>{if(this._pendingLoads--,this._removed||m&&m.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source"}));let _=null;if(m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_=m.resourceTiming[this.id].slice(0)),f)return void this.fire(new a.ErrorEvent(f));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&a.extend(T,{resourceTiming:_}),this.fire(new a.Event("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new a.Event("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(r,u){const f=r.actor?"reloadTile":"loadTile";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request=this.actor.send(f,m,(_,T)=>(delete r.request,r.unloadVectorData(),r.aborted?u(null):_?u(_):(r.loadVectorData(T,this.map.painter,f==="reloadTile"),u(null))))}abortTile(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0}unloadTile(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var gt=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends a.Evented{constructor(r,u,f,m){super(),this.load=(_,T)=>{this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=de.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(A,z)=>{this._request=null,this._loaded=!0,A?this.fire(new a.ErrorEvent(A)):z&&(this.image=z,_&&(this.coordinates=_),T&&T(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,gt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(_,this.image,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let A=!1;for(const z in this.tiles){const D=this.tiles[z];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,A=!0)}A&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=r,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=r.url,this.load(r.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(r){this.coordinates=r;const u=r.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(m){let _=1/0,T=1/0,A=-1/0,z=-1/0;for(const ce of m)_=Math.min(_,ce.x),T=Math.min(T,ce.y),A=Math.max(A,ce.x),z=Math.max(z,ce.y);const D=Math.max(A-_,z-T),X=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),K=Math.pow(2,X);return new a.CanonicalTileID(X,Math.floor((_+A)/2*K),Math.floor((T+z)/2*K))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(r,u){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},u(null)):(r.state="errored",u(null))}hasTransition(){return!1}}class ht extends Ct{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const T of _.urls)this.urls.push(this.map._requestManager.transformRequest(T,G.Source).url);a.getVideo(this.urls,(T,A)=>{this._loaded=!0,T?this.fire(new a.ErrorEvent(T)):A&&(this.video=A,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,T=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,gt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE),T.texSubImage2D(T.TEXTURE_2D,0,0,0,T.RGBA,T.UNSIGNED_BYTE,this.video)):(this.texture=new q(_,this.video,T.RGBA),this.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE));let A=!1;for(const z in this.tiles){const D=this.tiles[z];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,A=!0)}A&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const u=this.video.seekable;r<u.start(0)||r>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Et extends Ct{constructor(r,u,f,m){super(r,u,f,m),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const T=this.map.painter.context,A=T.gl;this.boundsBuffer||(this.boundsBuffer=T.createVertexBuffer(this._boundsArray,gt.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(T,this.canvas,A.RGBA,{premultiply:!0});let z=!1;for(const D in this.tiles){const X=this.tiles[D];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture,z=!0)}z&&this.fire(new a.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(T=>typeof T!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${r}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const $t={},Nt=g=>{switch(g){case"geojson":return ut;case"image":return Ct;case"raster":return Ze;case"raster-dem":return rt;case"vector":return He;case"video":return ht;case"canvas":return Et}return $t[g]};function hn(g,r){const u=a.create();return a.translate(u,u,[1,1,0]),a.scale(u,u,[.5*g.width,.5*g.height,1]),a.multiply(u,u,g.calculatePosMatrix(r.toUnwrapped()))}function Tn(g,r,u,f,m,_){const T=function(K,ce,Me){if(K)for(const Ae of K){const Fe=ce[Ae];if(Fe&&Fe.source===Me&&Fe.type==="fill-extrusion")return!0}else for(const Ae in ce){const Fe=ce[Ae];if(Fe.source===Me&&Fe.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,g.id),A=_.maxPitchScaleFactor(),z=g.tilesIn(f,A,T);z.sort(En);const D=[];for(const K of z)D.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(r,u,g._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,m,_,A,hn(g.transform,K.tileID))});const X=function(K){const ce={},Me={};for(const Ae of K){const Fe=Ae.queryResults,Ce=Ae.wrappedTileID,Ke=Me[Ce]=Me[Ce]||{};for(const nt in Fe){const Re=Fe[nt],Je=Ke[nt]=Ke[nt]||{},st=ce[nt]=ce[nt]||[];for(const at of Re)Je[at.featureIndex]||(Je[at.featureIndex]=!0,st.push(at))}}return ce}(D);for(const K in X)X[K].forEach(ce=>{const Me=ce.feature,Ae=g.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=Ae});return X}function En(g,r){const u=g.tileID,f=r.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class rn{constructor(r,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const u=r+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,_){const T={};if(!_)return T;for(const A of m){const z=A.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(z.length!==0){A.layers=z,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(D=>z.filter(X=>X.id===D)[0]));for(const D of z)T[D.id]=A}}return T}(r.buckets,u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const _=this.buckets[m];if(_ instanceof a.SymbolBucket&&_.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const _=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(_))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const u=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(r,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(r,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,u,f,m,_,T,A,z,D,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:_,scale:T,tileSize:this.tileSize,pixelPosMatrix:X,transform:z,params:A,queryPadding:this.queryPadding*D},r,u,f):{}}querySourceFeatures(r,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",T=m._geojsonTileLayer||m[_];if(!T)return;const A=a.createFilter(u&&u.filter),{z,x:D,y:X}=this.tileID.canonical,K={z,x:D,y:X};for(let ce=0;ce<T.length;ce++){const Me=T.feature(ce);if(A.needGeometry){const Ce=a.toEvaluationFeature(Me,!0);if(!A.filter(new a.EvaluationParameters(this.tileID.overscaledZ),Ce,this.tileID.canonical))continue}else if(!A.filter(new a.EvaluationParameters(this.tileID.overscaledZ),Me))continue;const Ae=f.getId(Me,_),Fe=new a.GeoJSONFeature(Me,z,D,X,Ae);Fe.tile=K,r.push(Fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const u=this.expirationTime;if(r.cacheControl){const f=a.parseCacheControl(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const _=this.buckets[m],T=_.layers[0].sourceLayer||"_geojsonTileLayer",A=f[T],z=r[T];if(!A||!z||Object.keys(z).length===0)continue;_.update(z,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=u&&u.style&&u.style.getLayer(m);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.browser.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=a.browser.now()+r}setDependencies(r,u){const f={};for(const m of u)f[m]=!0;this.dependencies[r]=f}hasDependency(r,u){for(const f of r){const m=this.dependencies[f];if(m){for(const _ of u)if(m[_])return!0}}return!1}}class xn{constructor(r,u){this.max=r,this.onRemove=u,this.reset()}reset(){for(const r in this.data)for(const u of this.data[r])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(r,u,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(r,_)},f)),this.data[m].push(_),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const u=this.data[r].shift();return u.timeout&&clearTimeout(u.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),u.value}getByKey(r){const u=this.data[r];return u?u[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,u){if(!this.has(r))return this;const f=r.wrapped().key,m=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][m];return this.data[f].splice(m,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(r){const u=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||u.push(m);for(const f of u)this.remove(f.value.tileID,f)}}class Te{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,u,f){const m=String(u);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},a.extend(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const _ in this.state[r])_!==m&&(this.deletedStates[r][_]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const _ in this.state[r][m])f[_]||(this.deletedStates[r][m][_]=null)}else for(const _ in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][_]===null&&delete this.deletedStates[r][m][_]}removeFeatureState(r,u,f){if(this.deletedStates[r]===null)return;const m=String(u);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&u!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(u!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,u){const f=String(u),m=a.extend({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const _=this.deletedStates[r][u];if(_===null)return{};for(const T in _)delete m[T]}return m}initializeTileState(r,u){r.setFeatureState(this.state,u)}coalesceChanges(r,u){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const _={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),a.extend(this.state[m][T],this.stateChanges[m][T]),_[T]=this.state[m][T];f[m]=_}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const _={};if(this.deletedStates[m]===null)for(const T in this.state[m])_[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const A of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][A];_[T]=this.state[m][T]}f[m]=f[m]||{},a.extend(f[m],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,u)}}class M extends a.Evented{constructor(r,u,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,_,T,A)=>{const z=new(Nt(_.type))(m,_,T,A);if(z.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${z.id}`);return z})(r,u,f,this),this._tiles={},this._cache=new xn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Te,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const u=this._tiles[r];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,u){return this._source.loadTile(r,u)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){this._source.abortTile&&this._source.abortTile(r,()=>{}),this._source.fire(new a.Event("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(R).map(r=>r.key)}getRenderableIds(r){const u=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&u.push(this._tiles[f]);return r?u.sort((f,m)=>{const _=f.tileID,T=m.tileID,A=new a.Point(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),z=new a.Point(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-T.overscaledZ||z.y-A.y||z.x-A.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(R).map(f=>f.key)}hasRenderableParent(r){const u=this.findLoadedParent(r,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(r,u){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(u||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,u){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,r,u)))}_tileLoaded(r,u,f,m){if(m)return r.state="errored",void(m.status!==404?this._source.fire(new a.ErrorEvent(m,{tile:r})):this.update(this.transform,this.terrain));r.timeAdded=a.browser.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(u,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const _=u[m];if(r.neighboringTiles&&r.neighboringTiles[_]){const T=this.getTileByID(_);f(r,T),f(T,r)}}function f(m,_){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=_.tileID.canonical.x-m.tileID.canonical.x;const A=_.tileID.canonical.y-m.tileID.canonical.y,z=Math.pow(2,m.tileID.canonical.z),D=_.tileID.key;T===0&&A===0||Math.abs(A)>1||(Math.abs(T)>1&&(Math.abs(T+z)===1?T+=z:Math.abs(T-z)===1&&(T-=z)),_.dem&&m.dem&&(m.dem.backfillBorder(_.dem,T,A),m.neighboringTiles&&m.neighboringTiles[D]&&(m.neighboringTiles[D].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,u,f,m){for(const _ in this._tiles){let T=this._tiles[_];if(m[_]||!T.hasData()||T.tileID.overscaledZ<=u||T.tileID.overscaledZ>f)continue;let A=T.tileID;for(;T&&T.tileID.overscaledZ>u+1;){const D=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[D.key],T&&T.hasData()&&(A=D)}let z=A;for(;z.overscaledZ>u;)if(z=z.scaledTo(z.overscaledZ-1),r[z.key]){m[A.key]=A;break}}}findLoadedParent(r,u){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=r.overscaledZ-1;f>=u;f--){const m=r.scaledTo(f),_=this._getLoadedTile(m);if(_)return _}}_getLoadedTile(r){const u=this._tiles[r.key];return u&&u.hasData()?u:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const u=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?a.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(r){const u=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,u){const f={};for(const m in this._tiles){const _=this._tiles[m];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(r,u){if(this.transform=r,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(X=>new a.OverscaledTileID(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(X=>this._source.hasTile(X)))):f=[];const m=r.coveringZoomLevel(this._source),_=Math.max(m-M.maxOverzooming,this._source.minzoom),T=Math.max(m+M.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const X={};for(const K of f)if(K.canonical.z>this._source.minzoom){const ce=K.scaledTo(K.canonical.z-1);X[ce.key]=ce;const Me=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));X[Me.key]=Me}f=f.concat(Object.values(X))}const A=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,A&&this.fire(new a.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const z=this._updateRetainedTiles(f,m);if(ve(this._source.type)){const X={},K={},ce=Object.keys(z),Me=a.browser.now();for(const Ae of ce){const Fe=z[Ae],Ce=this._tiles[Ae];if(!Ce||Ce.fadeEndTime!==0&&Ce.fadeEndTime<=Me)continue;const Ke=this.findLoadedParent(Fe,_);Ke&&(this._addTile(Ke.tileID),X[Ke.tileID.key]=Ke.tileID),K[Ae]=Fe}this._retainLoadedChildren(K,m,T,z);for(const Ae in X)z[Ae]||(this._coveredTiles[Ae]=!0,z[Ae]=X[Ae]);if(u){const Ae={},Fe={};for(const Ce of f)this._tiles[Ce.key].hasData()?Ae[Ce.key]=Ce:Fe[Ce.key]=Ce;for(const Ce in Fe){const Ke=Fe[Ce].children(this._source.maxzoom);this._tiles[Ke[0].key]&&this._tiles[Ke[1].key]&&this._tiles[Ke[2].key]&&this._tiles[Ke[3].key]&&(Ae[Ke[0].key]=z[Ke[0].key]=Ke[0],Ae[Ke[1].key]=z[Ke[1].key]=Ke[1],Ae[Ke[2].key]=z[Ke[2].key]=Ke[2],Ae[Ke[3].key]=z[Ke[3].key]=Ke[3],delete Fe[Ce])}for(const Ce in Fe){const Ke=this.findLoadedParent(Fe[Ce],this._source.minzoom);if(Ke){Ae[Ke.tileID.key]=z[Ke.tileID.key]=Ke.tileID;for(const nt in Ae)Ae[nt].isChildOf(Ke.tileID)&&delete Ae[nt]}}for(const Ce in this._tiles)Ae[Ce]||(this._coveredTiles[Ce]=!0)}}for(const X in z)this._tiles[X].clearFadeHold();const D=a.keysDifference(this._tiles,z);for(const X of D){const K=this._tiles[X];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(X)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,u){const f={},m={},_=Math.max(u-M.maxOverzooming,this._source.minzoom),T=Math.max(u+M.maxUnderzooming,this._source.minzoom),A={};for(const z of r){const D=this._addTile(z);f[z.key]=z,D.hasData()||u<this._source.maxzoom&&(A[z.key]=z)}this._retainLoadedChildren(A,u,T,f);for(const z of r){let D=this._tiles[z.key];if(D.hasData())continue;if(u+1>this._source.maxzoom){const K=z.children(this._source.maxzoom)[0],ce=this.getTile(K);if(ce&&ce.hasData()){f[K.key]=K;continue}}else{const K=z.children(this._source.maxzoom);if(f[K[0].key]&&f[K[1].key]&&f[K[2].key]&&f[K[3].key])continue}let X=D.wasRequested();for(let K=z.overscaledZ-1;K>=_;--K){const ce=z.scaledTo(K);if(m[ce.key])break;if(m[ce.key]=!0,D=this.getTile(ce),!D&&X&&(D=this._addTile(ce)),D){const Me=D.hasData();if((X||Me)&&(f[ce.key]=ce),X=D.wasRequested(),Me)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const u=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}u.push(m.key);const _=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;m=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(r){let u=this._tiles[r.key];if(u)return u;u=this._cache.getAndRemove(r),u&&(this._setTileReloadTimer(r.key,u),u.tileID=r,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,u)));const f=u;return u||(u=new rn(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,r.key,u.state))),u.uses++,this._tiles[r.key]=u,f||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(r,u){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=u.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const u=this._tiles[r];u&&(u.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,u,f){const m=[],_=this.transform;if(!_)return m;const T=f?_.getCameraQueryGeometry(r):r,A=r.map(Ae=>_.pointCoordinate(Ae,this.terrain)),z=T.map(Ae=>_.pointCoordinate(Ae,this.terrain)),D=this.getIds();let X=1/0,K=1/0,ce=-1/0,Me=-1/0;for(const Ae of z)X=Math.min(X,Ae.x),K=Math.min(K,Ae.y),ce=Math.max(ce,Ae.x),Me=Math.max(Me,Ae.y);for(let Ae=0;Ae<D.length;Ae++){const Fe=this._tiles[D[Ae]];if(Fe.holdingForFade())continue;const Ce=Fe.tileID,Ke=Math.pow(2,_.zoom-Fe.tileID.overscaledZ),nt=u*Fe.queryPadding*a.EXTENT/Fe.tileSize/Ke,Re=[Ce.getTilePoint(new a.MercatorCoordinate(X,K)),Ce.getTilePoint(new a.MercatorCoordinate(ce,Me))];if(Re[0].x-nt<a.EXTENT&&Re[0].y-nt<a.EXTENT&&Re[1].x+nt>=0&&Re[1].y+nt>=0){const Je=A.map(at=>Ce.getTilePoint(at)),st=z.map(at=>Ce.getTilePoint(at));m.push({tile:Fe,tileID:Ce,queryGeometry:Je,cameraQueryGeometry:st,scale:Ke})}}return m}getVisibleCoordinates(r){const u=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(ve(this._source.type)){const r=a.browser.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=r)return!0}return!1}setFeatureState(r,u,f){this._state.updateState(r=r||"_geojsonTileLayer",u,f)}removeFeatureState(r,u,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",u,f)}getFeatureState(r,u){return this._state.getState(r=r||"_geojsonTileLayer",u)}setDependencies(r,u,f){const m=this._tiles[r];m&&m.setDependencies(u,f)}reloadTilesForDependencies(r,u){for(const f in this._tiles)this._tiles[f].hasDependency(r,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,u))}}function R(g,r){const u=Math.abs(2*g.wrap)-+(g.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||f-u||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function ve(g){return g==="raster"||g==="image"||g==="video"}M.maxOverzooming=10,M.maxUnderzooming=3;const Ne="mapboxgl_preloaded_worker_pool";class qe{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new Worker(a.config.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(a.browser.hardwareConcurrency/2);let le;function F(){return le||(le=new qe),le}qe.workerCount=a.isSafari(globalThis)?Math.max(Math.min(lt,3),1):1;class N{constructor(r,u){this.reset(r,u)}reset(r,u){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.clamp(r,0,1);let u=1,f=this._distances[u];const m=r*this.paddedLength+this.padding;for(;f<m&&u<this._distances.length;)f=this._distances[++u];const _=u-1,T=this._distances[_],A=f-T,z=A>0?(m-T)/A:0;return this.points[_].mult(1-z).add(this.points[u].mult(z))}}function Ee(g,r){let u=!0;return g==="always"||g!=="never"&&r!=="never"||(u=!1),u}class Ge{constructor(r,u,f){const m=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(u/f);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=u,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,u,f,m,_){this._forEachCell(u,f,m,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_)}insertCircle(r,u,f,m){this._forEachCell(u-m,f-m,u+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(u),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,u,f,m,_,T){this.boxCells[_].push(T)}_insertCircleCell(r,u,f,m,_,T){this.circleCells[_].push(T)}_query(r,u,f,m,_,T,A){if(f<0||r>this.width||m<0||u>this.height)return[];const z=[];if(r<=0&&u<=0&&this.width<=f&&this.height<=m){if(_)return[{key:null,x1:r,y1:u,x2:f,y2:m}];for(let D=0;D<this.boxKeys.length;D++)z.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const X=this.circles[3*D],K=this.circles[3*D+1],ce=this.circles[3*D+2];z.push({key:this.circleKeys[D],x1:X-ce,y1:K-ce,x2:X+ce,y2:K+ce})}}else this._forEachCell(r,u,f,m,this._queryCell,z,{hitTest:_,overlapMode:T,seenUids:{box:{},circle:{}}},A);return z}query(r,u,f,m){return this._query(r,u,f,m,!1,null)}hitTest(r,u,f,m,_,T){return this._query(r,u,f,m,!0,_,T).length>0}hitTestCircle(r,u,f,m,_){const T=r-f,A=r+f,z=u-f,D=u+f;if(A<0||T>this.width||D<0||z>this.height)return!1;const X=[];return this._forEachCell(T,z,A,D,this._queryCellCircle,X,{hitTest:!0,overlapMode:m,circle:{x:r,y:u,radius:f},seenUids:{box:{},circle:{}}},_),X.length>0}_queryCell(r,u,f,m,_,T,A,z){const{seenUids:D,hitTest:X,overlapMode:K}=A,ce=this.boxCells[_];if(ce!==null){const Ae=this.bboxes;for(const Fe of ce)if(!D.box[Fe]){D.box[Fe]=!0;const Ce=4*Fe,Ke=this.boxKeys[Fe];if(r<=Ae[Ce+2]&&u<=Ae[Ce+3]&&f>=Ae[Ce+0]&&m>=Ae[Ce+1]&&(!z||z(Ke))&&(!X||!Ee(K,Ke.overlapMode))&&(T.push({key:Ke,x1:Ae[Ce],y1:Ae[Ce+1],x2:Ae[Ce+2],y2:Ae[Ce+3]}),X))return!0}}const Me=this.circleCells[_];if(Me!==null){const Ae=this.circles;for(const Fe of Me)if(!D.circle[Fe]){D.circle[Fe]=!0;const Ce=3*Fe,Ke=this.circleKeys[Fe];if(this._circleAndRectCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],r,u,f,m)&&(!z||z(Ke))&&(!X||!Ee(K,Ke.overlapMode))){const nt=Ae[Ce],Re=Ae[Ce+1],Je=Ae[Ce+2];if(T.push({key:Ke,x1:nt-Je,y1:Re-Je,x2:nt+Je,y2:Re+Je}),X)return!0}}}return!1}_queryCellCircle(r,u,f,m,_,T,A,z){const{circle:D,seenUids:X,overlapMode:K}=A,ce=this.boxCells[_];if(ce!==null){const Ae=this.bboxes;for(const Fe of ce)if(!X.box[Fe]){X.box[Fe]=!0;const Ce=4*Fe,Ke=this.boxKeys[Fe];if(this._circleAndRectCollide(D.x,D.y,D.radius,Ae[Ce+0],Ae[Ce+1],Ae[Ce+2],Ae[Ce+3])&&(!z||z(Ke))&&!Ee(K,Ke.overlapMode))return T.push(!0),!0}}const Me=this.circleCells[_];if(Me!==null){const Ae=this.circles;for(const Fe of Me)if(!X.circle[Fe]){X.circle[Fe]=!0;const Ce=3*Fe,Ke=this.circleKeys[Fe];if(this._circlesCollide(Ae[Ce],Ae[Ce+1],Ae[Ce+2],D.x,D.y,D.radius)&&(!z||z(Ke))&&!Ee(K,Ke.overlapMode))return T.push(!0),!0}}}_forEachCell(r,u,f,m,_,T,A,z){const D=this._convertToXCellCoord(r),X=this._convertToYCellCoord(u),K=this._convertToXCellCoord(f),ce=this._convertToYCellCoord(m);for(let Me=D;Me<=K;Me++)for(let Ae=X;Ae<=ce;Ae++)if(_.call(this,r,u,f,m,this.xCellCount*Ae+Me,T,A,z))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,u,f,m,_,T){const A=m-r,z=_-u,D=f+T;return D*D>A*A+z*z}_circleAndRectCollide(r,u,f,m,_,T,A){const z=(T-m)/2,D=Math.abs(r-(m+z));if(D>z+f)return!1;const X=(A-_)/2,K=Math.abs(u-(_+X));if(K>X+f)return!1;if(D<=z||K<=X)return!0;const ce=D-z,Me=K-X;return ce*ce+Me*Me<=f*f}}function tt(g,r,u,f,m){const _=a.create();return r?(a.scale(_,_,[1/m,1/m,1]),u||a.rotateZ(_,_,f.angle)):a.multiply(_,f.labelPlaneMatrix,g),_}function Ve(g,r,u,f,m){if(r){const _=a.clone(g);return a.scale(_,_,[m,m,1]),u||a.rotateZ(_,_,-f.angle),_}return f.glCoordMatrix}function Dt(g,r,u){let f;u?(f=[g.x,g.y,u(g.x,g.y),1],a.transformMat4(f,f,r)):(f=[g.x,g.y,0,1],fe(f,f,r));const m=f[3];return{point:new a.Point(f[0]/m,f[1]/m),signedDistanceFromCamera:m}}function vn(g,r){return .5+g/r*.5}function Sn(g,r){const u=g[0]/g[3],f=g[1]/g[3];return u>=-r[0]&&u<=r[0]&&f>=-r[1]&&f<=r[1]}function Mn(g,r,u,f,m,_,T,A,z,D){const X=f?g.textSizeData:g.iconSizeData,K=a.evaluateSizeForZoom(X,u.transform.zoom),ce=[256/u.width*2+1,256/u.height*2+1],Me=f?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Me.clear();const Ae=g.lineVertexArray,Fe=f?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ce=u.transform.width/u.transform.height;let Ke=!1;for(let nt=0;nt<Fe.length;nt++){const Re=Fe.get(nt);if(Re.hidden||Re.writingMode===a.WritingMode.vertical&&!Ke){se(Re.numGlyphs,Me);continue}let Je;if(Ke=!1,D?(Je=[Re.anchorX,Re.anchorY,D(Re.anchorX,Re.anchorY),1],a.transformMat4(Je,Je,r)):(Je=[Re.anchorX,Re.anchorY,0,1],fe(Je,Je,r)),!Sn(Je,ce)){se(Re.numGlyphs,Me);continue}const st=vn(u.transform.cameraToCenterDistance,Je[3]),at=a.evaluateSizeForFeature(X,K,Re),pt=T?at/st:at*st,wt=new a.Point(Re.anchorX,Re.anchorY),xt=Dt(wt,m,D).point,St={projections:{},offsets:{}},Ut=fn(Re,pt,!1,A,r,m,_,g.glyphOffsetArray,Ae,Me,xt,wt,St,Ce,z,D);Ke=Ut.useVertical,(Ut.notEnoughRoom||Ke||Ut.needsFlipping&&fn(Re,pt,!0,A,r,m,_,g.glyphOffsetArray,Ae,Me,xt,wt,St,Ce,z,D).notEnoughRoom)&&se(Re.numGlyphs,Me)}f?g.text.dynamicLayoutVertexBuffer.updateData(Me):g.icon.dynamicLayoutVertexBuffer.updateData(Me)}function ft(g,r,u,f,m,_,T,A,z,D,X,K,ce){const Me=A.glyphStartIndex+A.numGlyphs,Ae=A.lineStartIndex,Fe=A.lineStartIndex+A.lineLength,Ce=r.getoffsetX(A.glyphStartIndex),Ke=r.getoffsetX(Me-1),nt=ke(g*Ce,u,f,m,_,T,A.segment,Ae,Fe,z,D,X,K,ce);if(!nt)return null;const Re=ke(g*Ke,u,f,m,_,T,A.segment,Ae,Fe,z,D,X,K,ce);return Re?{first:nt,last:Re}:null}function cn(g,r,u,f){return g===a.WritingMode.horizontal&&Math.abs(u.y-r.y)>Math.abs(u.x-r.x)*f?{useVertical:!0}:(g===a.WritingMode.vertical?r.y<u.y:r.x>u.x)?{needsFlipping:!0}:null}function fn(g,r,u,f,m,_,T,A,z,D,X,K,ce,Me,Ae,Fe){const Ce=r/24,Ke=g.lineOffsetX*Ce,nt=g.lineOffsetY*Ce;let Re;if(g.numGlyphs>1){const Je=g.glyphStartIndex+g.numGlyphs,st=g.lineStartIndex,at=g.lineStartIndex+g.lineLength,pt=ft(Ce,A,Ke,nt,u,X,K,g,z,_,ce,Ae,Fe);if(!pt)return{notEnoughRoom:!0};const wt=Dt(pt.first.point,T,Fe).point,xt=Dt(pt.last.point,T,Fe).point;if(f&&!u){const St=cn(g.writingMode,wt,xt,Me);if(St)return St}Re=[pt.first];for(let St=g.glyphStartIndex+1;St<Je-1;St++)Re.push(ke(Ce*A.getoffsetX(St),Ke,nt,u,X,K,g.segment,st,at,z,_,ce,Ae,Fe));Re.push(pt.last)}else{if(f&&!u){const st=Dt(K,m,Fe).point,at=g.lineStartIndex+g.segment+1,pt=new a.Point(z.getx(at),z.gety(at)),wt=Dt(pt,m,Fe),xt=wt.signedDistanceFromCamera>0?wt.point:Er(K,pt,st,1,m,Fe),St=cn(g.writingMode,st,xt,Me);if(St)return St}const Je=ke(Ce*A.getoffsetX(g.glyphStartIndex),Ke,nt,u,X,K,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,z,_,ce,Ae,Fe);if(!Je)return{notEnoughRoom:!0};Re=[Je]}for(const Je of Re)a.addDynamicAttributes(D,Je.point,Je.angle);return{}}function Er(g,r,u,f,m,_){const T=Dt(g.add(g.sub(r)._unit()),m,_).point,A=u.sub(T);return u.add(A._mult(f/A.mag()))}function Xr(g,r){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:m,tileAnchorPoint:_,distanceFromAnchor:T,getElevation:A,previousVertex:z,direction:D,absOffsetX:X}=r;if(u.projections[g])return u.projections[g];const K=new a.Point(f.getx(g),f.gety(g)),ce=Dt(K,m,A);if(ce.signedDistanceFromCamera>0)return u.projections[g]=ce.point,ce.point;const Me=g-D;return Er(T===0?_:new a.Point(f.getx(Me),f.gety(Me)),K,z,X-T+1,m,A)}function Qt(g,r,u){return g._unit()._perp()._mult(r*u)}function co(g,r,u,f,m,_,T,A){const{projectionCache:z,direction:D}=A;if(z.offsets[g])return z.offsets[g];const X=u.add(r);if(g+D<f||g+D>=m)return z.offsets[g]=X,X;const K=Xr(g+D,A),ce=Qt(K.sub(u),T,D),Me=u.add(ce),Ae=K.add(ce);return z.offsets[g]=a.findLineIntersection(_,X,Me,Ae)||X,z.offsets[g]}function ke(g,r,u,f,m,_,T,A,z,D,X,K,ce,Me){const Ae=f?g-r:g+r;let Fe=Ae>0?1:-1,Ce=0;f&&(Fe*=-1,Ce=Math.PI),Fe<0&&(Ce+=Math.PI);let Ke,nt,Re=Fe>0?A+T:A+T+1,Je=m,st=m,at=0,pt=0;const wt=Math.abs(Ae),xt=[];let St;for(;at+pt<=wt;){if(Re+=Fe,Re<A||Re>=z)return null;at+=pt,st=Je,nt=Ke;const Mt={projectionCache:K,lineVertexArray:D,labelPlaneMatrix:X,tileAnchorPoint:_,distanceFromAnchor:at,getElevation:Me,previousVertex:st,direction:Fe,absOffsetX:wt};if(Je=Xr(Re,Mt),u===0)xt.push(st),St=Je.sub(st);else{let un;const Zt=Je.sub(st);un=Zt.mag()===0?Qt(Xr(Re+Fe,Mt).sub(Je),u,Fe):Qt(Zt,u,Fe),nt||(nt=st.add(un)),Ke=co(Re,un,Je,A,z,nt,u,Mt),xt.push(nt),St=Ke.sub(nt)}pt=St.mag()}const Ut=St._mult((wt-at)/pt)._add(nt||st),In=Ce+Math.atan2(Je.y-st.y,Je.x-st.x);return xt.push(Ut),{point:Ut,angle:ce?In:0,path:xt}}const oe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function se(g,r){for(let u=0;u<g;u++){const f=r.length;r.resize(f+4),r.float32.set(oe,3*f)}}function fe(g,r,u){const f=r[0],m=r[1];return g[0]=u[0]*f+u[4]*m+u[12],g[1]=u[1]*f+u[5]*m+u[13],g[3]=u[3]*f+u[7]*m+u[15],g}const be=100;class Le{constructor(r,u=new Ge(r.width+200,r.height+200,25),f=new Ge(r.width+200,r.height+200,25)){this.transform=r,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+be,this.screenBottomBoundary=r.height+be,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,u,f,m,_,T){const A=this.projectAndGetPerspectiveRatio(m,r.anchorPointX,r.anchorPointY,T),z=f*A.perspectiveRatio,D=r.x1*z+A.point.x,X=r.y1*z+A.point.y,K=r.x2*z+A.point.x,ce=r.y2*z+A.point.y;return!this.isInsideGrid(D,X,K,ce)||u!=="always"&&this.grid.hitTest(D,X,K,ce,u,_)||A.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,X,K,ce],offscreen:this.isOffscreen(D,X,K,ce)}}placeCollisionCircles(r,u,f,m,_,T,A,z,D,X,K,ce,Me,Ae){const Fe=[],Ce=new a.Point(u.anchorX,u.anchorY),Ke=Dt(Ce,T,Ae),nt=vn(this.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),Re=(X?_/nt:_*nt)/a.ONE_EM,Je=Dt(Ce,A,Ae).point,st=ft(Re,m,u.lineOffsetX*Re,u.lineOffsetY*Re,!1,Je,Ce,u,f,A,{projections:{},offsets:{}},!1,Ae);let at=!1,pt=!1,wt=!0;if(st){const xt=.5*ce*nt+Me,St=new a.Point(-100,-100),Ut=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),In=new N,Mt=st.first,un=st.last;let Zt=[];for(let bn=Mt.path.length-1;bn>=1;bn--)Zt.push(Mt.path[bn]);for(let bn=1;bn<un.path.length;bn++)Zt.push(un.path[bn]);const ur=2.5*xt;if(z){const bn=Zt.map(Pn=>Dt(Pn,z,Ae));Zt=bn.some(Pn=>Pn.signedDistanceFromCamera<=0)?[]:bn.map(Pn=>Pn.point)}let wn=[];if(Zt.length>0){const bn=Zt[0].clone(),Pn=Zt[0].clone();for(let Sr=1;Sr<Zt.length;Sr++)bn.x=Math.min(bn.x,Zt[Sr].x),bn.y=Math.min(bn.y,Zt[Sr].y),Pn.x=Math.max(Pn.x,Zt[Sr].x),Pn.y=Math.max(Pn.y,Zt[Sr].y);wn=bn.x>=St.x&&Pn.x<=Ut.x&&bn.y>=St.y&&Pn.y<=Ut.y?[Zt]:Pn.x<St.x||bn.x>Ut.x||Pn.y<St.y||bn.y>Ut.y?[]:a.clipLine([Zt],St.x,St.y,Ut.x,Ut.y)}for(const bn of wn){In.reset(bn,.25*xt);let Pn=0;Pn=In.length<=.5*xt?1:Math.ceil(In.paddedLength/ur)+1;for(let Sr=0;Sr<Pn;Sr++){const tr=Sr/Math.max(Pn-1,1),mo=In.lerp(tr),wr=mo.x+be,yr=mo.y+be;Fe.push(wr,yr,xt,0);const Hi=wr-xt,Qo=yr-xt,cr=wr+xt,ea=yr+xt;if(wt=wt&&this.isOffscreen(Hi,Qo,cr,ea),pt=pt||this.isInsideGrid(Hi,Qo,cr,ea),r!=="always"&&this.grid.hitTestCircle(wr,yr,xt,r,K)&&(at=!0,!D))return{circles:[],offscreen:!1,collisionDetected:at}}}}return{circles:!D&&at||!pt||nt<this.perspectiveRatioCutoff?[]:Fe,offscreen:wt,collisionDetected:at}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,m=1/0,_=-1/0,T=-1/0;for(const X of r){const K=new a.Point(X.x+be,X.y+be);f=Math.min(f,K.x),m=Math.min(m,K.y),_=Math.max(_,K.x),T=Math.max(T,K.y),u.push(K)}const A=this.grid.query(f,m,_,T).concat(this.ignoredGrid.query(f,m,_,T)),z={},D={};for(const X of A){const K=X.key;if(z[K.bucketInstanceId]===void 0&&(z[K.bucketInstanceId]={}),z[K.bucketInstanceId][K.featureIndex])continue;const ce=[new a.Point(X.x1,X.y1),new a.Point(X.x2,X.y1),new a.Point(X.x2,X.y2),new a.Point(X.x1,X.y2)];a.polygonIntersectsPolygon(u,ce)&&(z[K.bucketInstanceId][K.featureIndex]=!0,D[K.bucketInstanceId]===void 0&&(D[K.bucketInstanceId]=[]),D[K.bucketInstanceId].push(K.featureIndex))}return D}insertCollisionBox(r,u,f,m,_,T){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,u,f,m,_,T){const A=f?this.ignoredGrid:this.grid,z={bucketInstanceId:m,featureIndex:_,collisionGroupID:T,overlapMode:u};for(let D=0;D<r.length;D+=4)A.insertCircle(z,r[D],r[D+1],r[D+2])}projectAndGetPerspectiveRatio(r,u,f,m){let _;return m?(_=[u,f,m(u,f),1],a.transformMat4(_,_,r)):(_=[u,f,0,1],fe(_,_,r)),{point:new a.Point((_[0]/_[3]+1)/2*this.transform.width+be,(-_[1]/_[3]+1)/2*this.transform.height+be),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(r,u,f,m){return f<be||r>=this.screenRightBoundary||m<be||u>this.screenBottomBoundary}isInsideGrid(r,u,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const r=a.identity([]);return a.translate(r,r,[-100,-100,0]),r}}function Xe(g,r,u){return r*(a.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class $e{constructor(r,u,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?u:-u))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class je{constructor(r,u,f,m,_){this.text=new $e(r?r.text:null,u,f,_),this.icon=new $e(r?r.icon:null,u,m,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ye{constructor(r,u,f){this.text=r,this.icon=u,this.skipFade=f}}class ct{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class dt{constructor(r,u,f,m,_){this.bucketInstanceId=r,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=_}}class yt{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const u=++this.maxGroupID;this.collisionGroups[r]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[r]}}function Xt(g,r,u,f,m){const{horizontalAlign:_,verticalAlign:T}=a.getAnchorAlignment(g);return new a.Point(-(_-.5)*r+f[0]*m,-(T-.5)*u+f[1]*m)}function nn(g,r,u,f,m,_){const{x1:T,x2:A,y1:z,y2:D,anchorPointX:X,anchorPointY:K}=g,ce=new a.Point(r,u);return f&&ce._rotate(m?_:-_),{x1:T+ce.x,y1:z+ce.y,x2:A+ce.x,y2:D+ce.y,anchorPointX:X,anchorPointY:K}}class Bt{constructor(r,u,f,m,_){this.transform=r.clone(),this.terrain=u,this.collisionIndex=new Le(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new yt(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,u,f,m){const _=f.getBucket(u),T=f.latestFeatureIndex;if(!_||!T||u.id!==_.layerIds[0])return;const A=f.collisionBoxArray,z=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),X=f.tileSize/a.EXTENT,K=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),ce=z.get("text-pitch-alignment")==="map",Me=z.get("text-rotation-alignment")==="map",Ae=Xe(f,1,this.transform.zoom),Fe=tt(K,ce,Me,this.transform,Ae);let Ce=null;if(ce){const nt=Ve(K,ce,Me,this.transform,Ae);Ce=a.multiply([],this.transform.labelPlaneMatrix,nt)}this.retainedQueryData[_.bucketInstanceId]=new dt(_.bucketInstanceId,T,_.sourceLayerIndex,_.index,f.tileID);const Ke={bucket:_,layout:z,posMatrix:K,textLabelPlaneMatrix:Fe,labelToScreenMatrix:Ce,scale:D,textPixelRatio:X,holdingForFade:f.holdingForFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(m)for(const nt of _.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:Je,symbolInstanceEnd:st}=nt;r.push({sortKey:Re,symbolInstanceStart:Je,symbolInstanceEnd:st,parameters:Ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(r,u,f,m,_,T,A,z,D,X,K,ce,Me,Ae,Fe,Ce){const Ke=a.TextAnchorEnum[r.textAnchor],nt=[r.textOffset0,r.textOffset1],Re=Xt(Ke,f,m,nt,_),Je=this.collisionIndex.placeCollisionBox(nn(u,Re.x,Re.y,T,A,this.transform.angle),K,z,D,X.predicate,Ce);if((!Fe||this.collisionIndex.placeCollisionBox(nn(Fe,Re.x,Re.y,T,A,this.transform.angle),K,z,D,X.predicate,Ce).box.length!==0)&&Je.box.length>0){let st;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ce.crossTileID]&&this.prevPlacement.placements[ce.crossTileID]&&this.prevPlacement.placements[ce.crossTileID].text&&(st=this.prevPlacement.variableOffsets[ce.crossTileID].anchor),ce.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ce.crossTileID]={textOffset:nt,width:f,height:m,anchor:Ke,textBoxScale:_,prevAnchor:st},this.markUsedJustification(Me,Ke,ce,Ae),Me.allowVerticalPlacement&&(this.markUsedOrientation(Me,Ae,ce),this.placedOrientations[ce.crossTileID]=Ae),{shift:Re,placedGlyphBoxes:Je}}}placeLayerBucketPart(r,u,f){const{bucket:m,layout:_,posMatrix:T,textLabelPlaneMatrix:A,labelToScreenMatrix:z,textPixelRatio:D,holdingForFade:X,collisionBoxArray:K,partiallyEvaluatedTextSize:ce,collisionGroup:Me}=r.parameters,Ae=_.get("text-optional"),Fe=_.get("icon-optional"),Ce=a.getOverlapMode(_,"text-overlap","text-allow-overlap"),Ke=Ce==="always",nt=a.getOverlapMode(_,"icon-overlap","icon-allow-overlap"),Re=nt==="always",Je=_.get("text-rotation-alignment")==="map",st=_.get("text-pitch-alignment")==="map",at=_.get("icon-text-fit")!=="none",pt=_.get("symbol-z-order")==="viewport-y",wt=Ke&&(Re||!m.hasIconData()||Fe),xt=Re&&(Ke||!m.hasTextData()||Ae);!m.collisionArrays&&K&&m.deserializeCollisionBoxes(K);const St=this.retainedQueryData[m.bucketInstanceId].tileID,Ut=this.terrain?(Mt,un)=>this.terrain.getElevation(St,Mt,un):null,In=(Mt,un)=>{var Zt,ur;if(u[Mt.crossTileID])return;if(X)return void(this.placements[Mt.crossTileID]=new Ye(!1,!1,!1));let wn=!1,bn=!1,Pn=!0,Sr=null,tr={box:null,offscreen:null},mo={box:null,offscreen:null},wr=null,yr=null,Hi=null,Qo=0,cr=0,ea=0;un.textFeatureIndex?Qo=un.textFeatureIndex:Mt.useRuntimeCollisionCircles&&(Qo=Mt.featureIndex),un.verticalTextFeatureIndex&&(cr=un.verticalTextFeatureIndex);const ta=un.textBox;if(ta){const yi=Tr=>{let Cr=a.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Tr&&this.prevPlacement){const Xi=this.prevPlacement.placedOrientations[Mt.crossTileID];Xi&&(this.placedOrientations[Mt.crossTileID]=Xi,Cr=Xi,this.markUsedOrientation(m,Cr,Mt))}return Cr},Qr=(Tr,Cr)=>{if(m.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&un.verticalTextBox){for(const Xi of m.writingModes)if(Xi===a.WritingMode.vertical?(tr=Cr(),mo=tr):tr=Tr(),tr&&tr.box&&tr.box.length)break}else tr=Tr()},oi=Mt.textAnchorOffsetStartIndex,ku=Mt.textAnchorOffsetEndIndex;if(ku===oi){const Tr=(Cr,Xi)=>{const Ar=this.collisionIndex.placeCollisionBox(Cr,Ce,D,T,Me.predicate,Ut);return Ar&&Ar.box&&Ar.box.length&&(this.markUsedOrientation(m,Xi,Mt),this.placedOrientations[Mt.crossTileID]=Xi),Ar};Qr(()=>Tr(ta,a.WritingMode.horizontal),()=>{const Cr=un.verticalTextBox;return m.allowVerticalPlacement&&Mt.numVerticalGlyphVertices>0&&Cr?Tr(Cr,a.WritingMode.vertical):{box:null,offscreen:null}}),yi(tr&&tr.box&&tr.box.length)}else{let Tr=a.TextAnchorEnum[(ur=(Zt=this.prevPlacement)===null||Zt===void 0?void 0:Zt.variableOffsets[Mt.crossTileID])===null||ur===void 0?void 0:ur.anchor];const Cr=(Ar,Ec,Pa)=>{const Sc=Ar.x2-Ar.x1,Wd=Ar.y2-Ar.y1,Hd=Mt.textBoxScale,qg=at&&nt==="never"?Ec:null;let na={box:[],offscreen:!1},Cl=Ce==="never"?1:2,Ma="never";Tr&&Cl++;for(let es=0;es<Cl;es++){for(let qi=oi;qi<ku;qi++){const _s=m.textAnchorOffsets.get(qi);if(Tr&&_s.textAnchor!==Tr)continue;const Tc=this.attemptAnchorPlacement(_s,Ar,Sc,Wd,Hd,Je,st,D,T,Me,Ma,Mt,m,Pa,qg,Ut);if(Tc&&(na=Tc.placedGlyphBoxes,na&&na.box&&na.box.length))return wn=!0,Sr=Tc.shift,na}Tr?Tr=null:Ma=Ce}return na};Qr(()=>Cr(ta,un.iconBox,a.WritingMode.horizontal),()=>{const Ar=un.verticalTextBox;return m.allowVerticalPlacement&&!(tr&&tr.box&&tr.box.length)&&Mt.numVerticalGlyphVertices>0&&Ar?Cr(Ar,un.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),tr&&(wn=tr.box,Pn=tr.offscreen);const Xi=yi(tr&&tr.box);if(!wn&&this.prevPlacement){const Ar=this.prevPlacement.variableOffsets[Mt.crossTileID];Ar&&(this.variableOffsets[Mt.crossTileID]=Ar,this.markUsedJustification(m,Ar.anchor,Mt,Xi))}}}if(wr=tr,wn=wr&&wr.box&&wr.box.length>0,Pn=wr&&wr.offscreen,Mt.useRuntimeCollisionCircles){const yi=m.text.placedSymbolArray.get(Mt.centerJustifiedTextSymbolIndex),Qr=a.evaluateSizeForFeature(m.textSizeData,ce,yi),oi=_.get("text-padding");yr=this.collisionIndex.placeCollisionCircles(Ce,yi,m.lineVertexArray,m.glyphOffsetArray,Qr,T,A,z,f,st,Me.predicate,Mt.collisionCircleDiameter,oi,Ut),yr.circles.length&&yr.collisionDetected&&!f&&a.warnOnce("Collisions detected, but collision boxes are not shown"),wn=Ke||yr.circles.length>0&&!yr.collisionDetected,Pn=Pn&&yr.offscreen}if(un.iconFeatureIndex&&(ea=un.iconFeatureIndex),un.iconBox){const yi=Qr=>{const oi=at&&Sr?nn(Qr,Sr.x,Sr.y,Je,st,this.transform.angle):Qr;return this.collisionIndex.placeCollisionBox(oi,nt,D,T,Me.predicate,Ut)};mo&&mo.box&&mo.box.length&&un.verticalIconBox?(Hi=yi(un.verticalIconBox),bn=Hi.box.length>0):(Hi=yi(un.iconBox),bn=Hi.box.length>0),Pn=Pn&&Hi.offscreen}const vs=Ae||Mt.numHorizontalGlyphVertices===0&&Mt.numVerticalGlyphVertices===0,Ia=Fe||Mt.numIconVertices===0;if(vs||Ia?Ia?vs||(bn=bn&&wn):wn=bn&&wn:bn=wn=bn&&wn,wn&&wr&&wr.box&&this.collisionIndex.insertCollisionBox(wr.box,Ce,_.get("text-ignore-placement"),m.bucketInstanceId,mo&&mo.box&&cr?cr:Qo,Me.ID),bn&&Hi&&this.collisionIndex.insertCollisionBox(Hi.box,nt,_.get("icon-ignore-placement"),m.bucketInstanceId,ea,Me.ID),yr&&(wn&&this.collisionIndex.insertCollisionCircles(yr.circles,Ce,_.get("text-ignore-placement"),m.bucketInstanceId,Qo,Me.ID),f)){const yi=m.bucketInstanceId;let Qr=this.collisionCircleArrays[yi];Qr===void 0&&(Qr=this.collisionCircleArrays[yi]=new ct);for(let oi=0;oi<yr.circles.length;oi+=4)Qr.circles.push(yr.circles[oi+0]),Qr.circles.push(yr.circles[oi+1]),Qr.circles.push(yr.circles[oi+2]),Qr.circles.push(yr.collisionDetected?1:0)}if(Mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Mt.crossTileID]=new Ye(wn||wt,bn||xt,Pn||m.justReloaded),u[Mt.crossTileID]=!0};if(pt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Mt=m.getSortedSymbolIndexes(this.transform.angle);for(let un=Mt.length-1;un>=0;--un){const Zt=Mt[un];In(m.symbolInstances.get(Zt),m.collisionArrays[Zt])}}else for(let Mt=r.symbolInstanceStart;Mt<r.symbolInstanceEnd;Mt++)In(m.symbolInstances.get(Mt),m.collisionArrays[Mt]);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const Mt=this.collisionCircleArrays[m.bucketInstanceId];a.invert(Mt.invProjMatrix,T),Mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(r,u,f,m){let _;_=m===a.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(u)];const T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const A of T)A>=0&&(r.text.placedSymbolArray.get(A).crossTileID=_>=0&&A!==_?0:f.crossTileID)}markUsedOrientation(r,u,f){const m=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,_=u===a.WritingMode.vertical?u:0,T=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const A of T)r.text.placedSymbolArray.get(A).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(r):1,_=u?u.opacities:{},T=u?u.variableOffsets:{},A=u?u.placedOrientations:{};for(const z in this.placements){const D=this.placements[z],X=_[z];X?(this.opacities[z]=new je(X,m,D.text,D.icon),f=f||D.text!==X.text.placed||D.icon!==X.icon.placed):(this.opacities[z]=new je(null,m,D.text,D.icon,D.skipFade),f=f||D.text||D.icon)}for(const z in _){const D=_[z];if(!this.opacities[z]){const X=new je(D,m,!1,!1);X.isHidden()||(this.opacities[z]=X,f=f||D.text.placed||D.icon.placed)}}for(const z in T)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=T[z]);for(const z in A)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=A[z]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:r)}updateLayerOpacities(r,u){const f={};for(const m of u){const _=m.getBucket(r);_&&m.latestFeatureIndex&&r.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,m.collisionBoxArray)}}updateBucketOpacities(r,u,f){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const m=r.layers[0],_=m.layout,T=new je(null,0,!1,!1,!0),A=_.get("text-allow-overlap"),z=_.get("icon-allow-overlap"),D=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=_.get("text-rotation-alignment")==="map",K=_.get("text-pitch-alignment")==="map",ce=_.get("icon-text-fit")!=="none",Me=new je(null,0,A&&(z||!r.hasIconData()||_.get("icon-optional")),z&&(A||!r.hasTextData()||_.get("text-optional")),!0);!r.collisionArrays&&f&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(f);const Ae=(Fe,Ce,Ke)=>{for(let nt=0;nt<Ce/4;nt++)Fe.opacityVertexArray.emplaceBack(Ke);Fe.hasVisibleVertices=Fe.hasVisibleVertices||Ke!==or};for(let Fe=0;Fe<r.symbolInstances.length;Fe++){const Ce=r.symbolInstances.get(Fe),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:nt,crossTileID:Re}=Ce;let Je=this.opacities[Re];u[Re]?Je=T:Je||(Je=Me,this.opacities[Re]=Je),u[Re]=!0;const st=Ce.numIconVertices>0,at=this.placedOrientations[Ce.crossTileID],pt=at===a.WritingMode.vertical,wt=at===a.WritingMode.horizontal||at===a.WritingMode.horizontalOnly;if(Ke>0||nt>0){const xt=pr(Je.text);Ae(r.text,Ke,pt?or:xt),Ae(r.text,nt,wt?or:xt);const St=Je.text.isHidden();[Ce.rightJustifiedTextSymbolIndex,Ce.centerJustifiedTextSymbolIndex,Ce.leftJustifiedTextSymbolIndex].forEach(Mt=>{Mt>=0&&(r.text.placedSymbolArray.get(Mt).hidden=St||pt?1:0)}),Ce.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ce.verticalPlacedTextSymbolIndex).hidden=St||wt?1:0);const Ut=this.variableOffsets[Ce.crossTileID];Ut&&this.markUsedJustification(r,Ut.anchor,Ce,at);const In=this.placedOrientations[Ce.crossTileID];In&&(this.markUsedJustification(r,"left",Ce,In),this.markUsedOrientation(r,In,Ce))}if(st){const xt=pr(Je.icon),St=!(ce&&Ce.verticalPlacedIconSymbolIndex&&pt);Ce.placedIconSymbolIndex>=0&&(Ae(r.icon,Ce.numIconVertices,St?xt:or),r.icon.placedSymbolArray.get(Ce.placedIconSymbolIndex).hidden=Je.icon.isHidden()),Ce.verticalPlacedIconSymbolIndex>=0&&(Ae(r.icon,Ce.numVerticalIconVertices,St?or:xt),r.icon.placedSymbolArray.get(Ce.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const xt=r.collisionArrays[Fe];if(xt){let St=new a.Point(0,0);if(xt.textBox||xt.verticalTextBox){let In=!0;if(D){const Mt=this.variableOffsets[Re];Mt?(St=Xt(Mt.anchor,Mt.width,Mt.height,Mt.textOffset,Mt.textBoxScale),X&&St._rotate(K?this.transform.angle:-this.transform.angle)):In=!1}xt.textBox&&Wt(r.textCollisionBox.collisionVertexArray,Je.text.placed,!In||pt,St.x,St.y),xt.verticalTextBox&&Wt(r.textCollisionBox.collisionVertexArray,Je.text.placed,!In||wt,St.x,St.y)}const Ut=!!(!wt&&xt.verticalIconBox);xt.iconBox&&Wt(r.iconCollisionBox.collisionVertexArray,Je.icon.placed,Ut,ce?St.x:0,ce?St.y:0),xt.verticalIconBox&&Wt(r.iconCollisionBox.collisionVertexArray,Je.icon.placed,!Ut,ce?St.x:0,ce?St.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const Fe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=Fe.invProjMatrix,r.placementViewportMatrix=Fe.viewportMatrix,r.collisionCircleArray=Fe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function Wt(g,r,u,f,m){g.emplaceBack(r?1:0,u?1:0,f||0,m||0),g.emplaceBack(r?1:0,u?1:0,f||0,m||0),g.emplaceBack(r?1:0,u?1:0,f||0,m||0),g.emplaceBack(r?1:0,u?1:0,f||0,m||0)}const mn=Math.pow(2,25),On=Math.pow(2,24),Wn=Math.pow(2,17),Rn=Math.pow(2,16),kn=Math.pow(2,9),qr=Math.pow(2,8),Jn=Math.pow(2,1);function pr(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const r=g.placed?1:0,u=Math.floor(127*g.opacity);return u*mn+r*On+u*Wn+r*Rn+u*kn+r*qr+u*Jn+r}const or=0;class Ci{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,u,f,m,_){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(u.getBucketParts(T,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((A,z)=>A.sortKey-z.sortKey));this._currentPartIndex<T.length;)if(u.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class au{constructor(r,u,f,m,_,T,A,z){this.placement=new Bt(r,u,T,A,z),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(r,u,f){const m=a.browser.now(),_=()=>!this._forceFullPlacement&&a.browser.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=u[r[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=A)&&(!T.maxzoom||T.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new Ci(T)),this._inProgressLayer.continuePlacement(f[T.source],this.placement,this._showCollisionBoxes,T,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const _n=512/a.EXTENT/2;class Go{constructor(r,u,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let _=0;_<u.length;_++){const T=u.get(_),A=T.key,z=m.get(A);z?z.push(T):m.set(A,[T])}for(const[_,T]of m){const A={positions:T.map(z=>({x:Math.floor(z.anchorX*_n),y:Math.floor(z.anchorY*_n)})),crossTileIDs:T.map(z=>z.crossTileID)};if(A.positions.length>128){const z=new a.KDBush(A.positions.length,16,Uint16Array);for(const{x:D,y:X}of A.positions)z.add(D,X);z.finish(),delete A.positions,A.index=z}this._symbolsByKey[_]=A}}getScaledCoordinates(r,u){const{x:f,y:m,z:_}=this.tileID.canonical,{x:T,y:A,z}=u.canonical,D=_n/Math.pow(2,z-_),X=(A*a.EXTENT+r.anchorY)*D,K=m*a.EXTENT*_n;return{x:Math.floor((T*a.EXTENT+r.anchorX)*D-f*a.EXTENT*_n),y:Math.floor(X-K)}}findMatches(r,u,f){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<r.length;_++){const T=r.get(_);if(T.crossTileID)continue;const A=this._symbolsByKey[T.key];if(!A)continue;const z=this.getScaledCoordinates(T,u);if(A.index){const D=A.index.range(z.x-m,z.y-m,z.x+m,z.y+m).sort();for(const X of D){const K=A.crossTileIDs[X];if(!f[K]){f[K]=!0,T.crossTileID=K;break}}}else if(A.positions)for(let D=0;D<A.positions.length;D++){const X=A.positions[D],K=A.crossTileIDs[D];if(Math.abs(X.x-z.x)<=m&&Math.abs(X.y-z.y)<=m&&!f[K]){f[K]=!0,T.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Fh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const u=Math.round((r-this.lng)/360);if(u!==0)for(const f in this.indexes){const m=this.indexes[f],_={};for(const T in m){const A=m[T];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+u),_[A.tileID.key]=A}this.indexes[f]=_}this.lng=r}addBucket(r,u,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const _ in this.indexes){const T=this.indexes[_];if(Number(_)>r.overscaledZ)for(const A in T){const z=T[A];z.tileID.isChildOf(r)&&z.findMatches(u.symbolInstances,r,m)}else{const A=T[r.scaledTo(Number(_)).key];A&&A.findMatches(u.symbolInstances,r,m)}}for(let _=0;_<u.symbolInstances.length;_++){const T=u.symbolInstances.get(_);T.crossTileID||(T.crossTileID=f.generate(),m[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Go(r,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(r,u){for(const f of u.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let u=!1;for(const f in this.indexes){const m=this.indexes[f];for(const _ in m)r[m[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[_]),delete m[_],u=!0)}return u}}class Ja{constructor(){this.layerIndexes={},this.crossTileIDs=new Fh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,u,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new Zn);let _=!1;const T={};m.handleWrapJump(f);for(const A of u){const z=A.getBucket(r);z&&r.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(A.tileID,z,this.crossTileIDs)&&(_=!0),T[z.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(_=!0),_}pruneUnusedLayers(r){const u={};r.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const js=(g,r)=>a.emitValidationErrors(g,r&&r.filter(u=>u.identifier!=="source.canvas")),fi=a.pick(a.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),mr=a.pick(a.operations,["setCenter","setZoom","setBearing","setPitch"]),Oh=a.emptyStyle();class Br extends a.Evented{constructor(r,u={}){super(),this.map=r,this.dispatcher=new we(F(),this,r._getMapId()),this.imageManager=new ye,this.imageManager.setEventedParent(this),this.glyphManager=new ue(r._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new Ja,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const f=this;this._rtlTextPluginCallback=Br.registerForPluginStateChange(m=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(_,T)=>{if(a.triggerPluginCompletionEvent(_),T&&T.every(A=>A))for(const A in f.sourceCaches){const z=f.sourceCaches[A].getSource().type;z!=="vector"&&z!=="geojson"||f.sourceCaches[A].reload()}})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const _=this.sourceCaches[m.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const A in this._layers){const z=this._layers[A];z.source===T.id&&this._validateLayer(z)}})}loadURL(r,u={},f){this.fire(new a.Event("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(r,G.Style);this._request=a.getJSON(m,(_,T)=>{this._request=null,_?this.fire(new a.ErrorEvent(_)):T&&this._load(T,u,f)})}loadJSON(r,u={},f){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(r,u,f)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Oh,{validate:!1})}_load(r,u,f){var m;const _=u.transformStyle?u.transformStyle(f,r):r;if(!u.validate||!js(this,a.validateStyle(_))){this._loaded=!0,this.stylesheet=_;for(const T in _.sources)this.addSource(T,_.sources[T],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new me(this.stylesheet.light),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}}_createLayers(){const r=a.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",r),this._order=r.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of r){const f=a.createStyleLayer(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(r,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(m,_,T,A){const z=k(m),D=z.length,X=T>1?"@2x":"",K={},ce={},Me={};for(const{id:Ae,url:Fe}of z){const Ce=_.transformRequest(_.normalizeSpriteURL(Fe,X,".json"),G.SpriteJSON),Ke=`${Ae}_${Ce.url}`;K[Ke]=a.getJSON(Ce,(Je,st)=>{delete K[Ke],ce[Ae]=st,W(A,ce,Me,Je,D)});const nt=_.transformRequest(_.normalizeSpriteURL(Fe,X,".png"),G.SpriteImage),Re=`${Ae}_${nt.url}`;K[Re]=de.getImage(nt,(Je,st)=>{delete K[Re],Me[Ae]=st,W(A,ce,Me,Je,D)})}return{cancel(){for(const Ae of Object.values(K))Ae.cancel()}}}(r,this.map._requestManager,this.map.getPixelRatio(),(m,_)=>{if(this._spriteRequest=null,m)this.fire(new a.ErrorEvent(m));else if(_)for(const T in _){this._spritesImagesIds[T]=[];const A=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(z=>!(z in _)):[];for(const z of A)this.imageManager.removeImage(z),this._changedImages[z]=!0;for(const z in _[T]){const D=T==="default"?z:`${T}:${z}`;this._spritesImagesIds[T].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[T][z],!1):this.imageManager.addImage(D,_[T][z]),u&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}_validateLayer(r){const u=this.sourceCaches[r.source];if(!u)return;const f=r.sourceLayer;if(!f)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const u=this._serializedAllLayers();if(!r||r.length===0)return Object.values(u);const f=[];for(const m of r)u[m]&&f.push(u[m]);return f}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const u=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(m.length||_.length)&&this._updateWorkerLayers(m,_);for(const T in this._updatedSources){const A=this._updatedSources[T];if(A==="reload")this._reloadSource(T);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const _=this.sourceCaches[m];f[m]=_.used,_.used=!1}for(const m of this._order){const _=this._layers[m];_.recalculate(r,this._availableImages),!_.isHidden(r.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const m in f){const _=this.sourceCaches[m];f[m]!==_.used&&_.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.z=r.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(r),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,u={}){this._checkLoaded();const f=this.serialize();if(r=u.transformStyle?u.transformStyle(f,r):r,js(this,a.validateStyle(r)))return!1;(r=a.clone$1(r)).layers=a.derefLayers(r.layers);const m=a.diffStyles(f,r).filter(T=>!(T.command in mr));if(m.length===0)return!1;const _=m.filter(T=>!(T.command in fi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(T=>T.command).join(", ")}.`);for(const T of m)T.command!=="setTransition"&&this[T.command].apply(this,T.args);return this.stylesheet=r,this._serializedLayers=null,!0}addImage(r,u){if(this.getImage(r))return this.fire(new a.ErrorEvent(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,u),this._afterImageUpdated(r)}updateImage(r,u){this.imageManager.updateImage(r,u)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.ErrorEvent(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,u,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,`sources.${r}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[r]=new M(r,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new a.ErrorEvent(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],u.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,u){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,u,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new a.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let _;if(r.type==="custom"){if(js(this,a.validateCustomStyleLayer(r)))return;_=a.createStyleLayer(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=a.clone$1(r),r=a.extend(r,{source:m})),this._validate(a.validateStyle.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;_=a.createStyleLayer(r),this._validateLayer(_),_.setEventedParent(this,{layer:{id:m}})}const T=u?this._order.indexOf(u):this._order.length;if(u&&T===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=_,this._removedLayers[m]&&_.source&&_.type!=="custom"){const A=this._removedLayers[m];delete this._removedLayers[m],A.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(r,u){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.ErrorEvent(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===u)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${r}" before non-existing layer "${u}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const u=this._layers[r];if(!u)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${r}".`)));u.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=u,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],u.onRemove&&u.onRemove(this.map)}getLayer(r){return this._layers[r]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,u,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===u&&m.maxzoom===f||(u!=null&&(m.minzoom=u),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,u,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!a.deepEqual(m.filter,u))return u==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(a.validateStyle.filter,`layers.${m.id}.filter`,u,null,f)||(m.filter=a.clone$1(u),this._updateLayer(m)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.clone$1(this.getLayer(r).filter)}setLayoutProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?a.deepEqual(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,m),this._updateLayer(_)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,u){const f=this.getLayer(r);if(f)return f.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,u,f,m={}){this._checkLoaded();const _=this.getLayer(r);_?a.deepEqual(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,m)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,u){return this.getLayer(r).getPaintProperty(u)}setFeatureState(r,u){this._checkLoaded();const f=r.source,m=r.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const T=_.getSource().type;T==="geojson"&&m?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(r.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),_.setFeatureState(m,r.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,u){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const _=m.getSource().type,T=_==="vector"?r.sourceLayer:void 0;_!=="vector"||T?u&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,r.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const u=r.source,f=r.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=a.mapObject(this.sourceCaches,m=>m.serialize()),u=this._serializeByIds(this._order),f=this.stylesheet;return a.filterObject({version:f.version,name:f.name,metadata:f.metadata,light:f.light,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:r,layers:u},m=>m!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const u=T=>this._layers[T].type==="fill-extrusion",f={},m=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(u(A)){f[A]=T;for(const z of r){const D=z[A];if(D)for(const X of D)m.push(X)}}}m.sort((T,A)=>A.intersectionZ-T.intersectionZ);const _=[];for(let T=this._order.length-1;T>=0;T--){const A=this._order[T];if(u(A))for(let z=m.length-1;z>=0;z--){const D=m[z].feature;if(f[D.layer.id]<T)break;_.push(D),m.pop()}else for(const z of r){const D=z[A];if(D)for(const X of D)_.push(X.feature)}}return _}queryRenderedFeatures(r,u,f){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const A of u.layers){const z=this._layers[A];if(!z)return this.fire(new a.ErrorEvent(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];m[z.source]=!0}}const _=[];u.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const A in this.sourceCaches)u.layers&&!m[A]||_.push(Tn(this.sourceCaches[A],this._layers,T,r,u,f));return this.placement&&_.push(function(A,z,D,X,K,ce,Me){const Ae={},Fe=ce.queryRenderedSymbols(X),Ce=[];for(const Ke of Object.keys(Fe).map(Number))Ce.push(Me[Ke]);Ce.sort(En);for(const Ke of Ce){const nt=Ke.featureIndex.lookupSymbolFeatures(Fe[Ke.bucketInstanceId],z,Ke.bucketIndex,Ke.sourceLayerIndex,K.filter,K.layers,K.availableImages,A);for(const Re in nt){const Je=Ae[Re]=Ae[Re]||[],st=nt[Re];st.sort((at,pt)=>{const wt=Ke.featureSortOrder;if(wt){const xt=wt.indexOf(at.featureIndex);return wt.indexOf(pt.featureIndex)-xt}return pt.featureIndex-at.featureIndex});for(const at of st)Je.push(at)}}for(const Ke in Ae)Ae[Ke].forEach(nt=>{const Re=nt.feature,Je=D[A[Ke].source].getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=Je});return Ae}(this._layers,T,this.sourceCaches,r,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(r,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[r];return f?function(m,_){const T=m.getRenderableIds().map(D=>m.getTileByID(D)),A=[],z={};for(let D=0;D<T.length;D++){const X=T[D],K=X.tileID.canonical.key;z[K]||(z[K]=!0,X.querySourceFeatures(A,_))}return A}(f,u):[]}addSourceType(r,u,f){return Nt(r)?f(new Error(`A source type called "${r}" already exists.`)):(((m,_)=>{$t[m]=_})(r,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(r,u={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const T in r)if(!a.deepEqual(r[T],f[T])){m=!0;break}if(!m)return;const _={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,u),this.light.updateTransitions(_)}_validate(r,u,f,m,_={}){return(!_||_.validate!==!1)&&js(this,r.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:f,styleSpec:a.v8Spec},m)))}_remove(r=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const u in this.sourceCaches)this.sourceCaches[u].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,u,f,m,_=!1){let T=!1,A=!1;const z={};for(const D of this._order){const X=this._layers[D];if(X.type!=="symbol")continue;if(!z[X.source]){const ce=this.sourceCaches[X.source];z[X.source]=ce.getRenderableIds(!0).map(Me=>ce.getTileByID(Me)).sort((Me,Ae)=>Ae.tileID.overscaledZ-Me.tileID.overscaledZ||(Me.tileID.isLessThan(Ae.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(X,z[X.source],r.center.lng);T=T||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),r.zoom))&&(this.pauseablePlacement=new au(r,this.map.terrain,this._order,_,u,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),A=!0),T&&this.pauseablePlacement.placement.setStale()),A||T)for(const D of this._order){const X=this._layers[D];X.type==="symbol"&&this.placement.updateLayerOpacities(X,z[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(r,u,f){this.glyphManager.getGlyphs(u.stacks,f);const m=this.sourceCaches[u.source];m&&m.setDependencies(u.tileID.key,u.type,[""])}getResource(r,u,f){return a.makeRequest(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,u={}){this._checkLoaded(),r&&this._validate(a.validateStyle.glyphs,"glyphs",r,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,u,f={},m){this._checkLoaded();const _=[{id:r,url:u}],T=[...k(this.stylesheet.sprite),..._];this._validate(a.validateStyle.sprite,"sprite",T,null,f)||(this.stylesheet.sprite=T,this._loadSprite(_,!0,m))}removeSprite(r){this._checkLoaded();const u=k(this.stylesheet.sprite);if(u.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===r),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}else this.fire(new a.ErrorEvent(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return k(this.stylesheet.sprite)}setSprite(r,u={},f){this._checkLoaded(),r&&this._validate(a.validateStyle.sprite,"sprite",r,null,u)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}Br.registerForPluginStateChange=a.registerForPluginStateChange;var ri=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Qa="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Zo={prelude:on(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:on(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:on(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:on(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:on("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:on(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:on(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:on("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:on("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:on("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:on(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:on(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:on(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:on(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:on(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:on(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:on(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:on(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:on(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:on(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:on(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:on(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:on(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:on(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:on("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Qa),terrainDepth:on("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Qa),terrainCoords:on("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Qa)};function on(g,r){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=_?_.concat(m):m,A={};return{fragmentSource:g=g.replace(u,(z,D,X,K,ce)=>(A[ce]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
varying ${X} ${K} ${ce};
#else
uniform ${X} ${K} u_${ce};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ce}
    ${X} ${K} ${ce} = u_${ce};
#endif
`)),vertexSource:r=r.replace(u,(z,D,X,K,ce)=>{const Me=K==="float"?"vec2":"vec4",Ae=ce.match(/color/)?"color":Me;return A[ce]?D==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
uniform lowp float u_${ce}_t;
attribute ${X} ${Me} a_${ce};
varying ${X} ${K} ${ce};
#else
uniform ${X} ${K} u_${ce};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${ce}
    ${ce} = a_${ce};
#else
    ${X} ${K} ${ce} = u_${ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ce}
    ${ce} = unpack_mix_${Ae}(a_${ce}, u_${ce}_t);
#else
    ${X} ${K} ${ce} = u_${ce};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
uniform lowp float u_${ce}_t;
attribute ${X} ${Me} a_${ce};
#else
uniform ${X} ${K} u_${ce};
#endif
`:Ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${ce}
    ${X} ${K} ${ce} = a_${ce};
#else
    ${X} ${K} ${ce} = u_${ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ce}
    ${X} ${K} ${ce} = unpack_mix_${Ae}(a_${ce}, u_${ce}_t);
#else
    ${X} ${K} ${ce} = u_${ce};
#endif
`}),staticAttributes:f,staticUniforms:T}}class ya{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,u,f,m,_,T,A,z,D){this.context=r;let X=this.boundPaintVertexBuffers.length!==m.length;for(let K=0;!X&&K<m.length;K++)this.boundPaintVertexBuffers[K]!==m[K]&&(X=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||X||this.boundIndexBuffer!==_||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==z||this.boundDynamicVertexBuffer3!==D?this.freshBind(u,f,m,_,T,A,z,D):(r.bindVertexArray.set(this.vao),A&&A.bind(),_&&_.dynamicDraw&&_.bind(),z&&z.bind(),D&&D.bind())}freshBind(r,u,f,m,_,T,A,z){const D=r.numAttributes,X=this.context,K=X.gl;this.vao&&this.destroy(),this.vao=X.createVertexArray(),X.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=z,u.enableAttributes(K,r);for(const ce of f)ce.enableAttributes(K,r);T&&T.enableAttributes(K,r),A&&A.enableAttributes(K,r),z&&z.enableAttributes(K,r),u.bind(),u.setVertexAttribPointers(K,r,_);for(const ce of f)ce.bind(),ce.setVertexAttribPointers(K,r,_);T&&(T.bind(),T.setVertexAttribPointers(K,r,_)),m&&m.bind(),A&&(A.bind(),A.setVertexAttribPointers(K,r,_)),z&&(z.bind(),z.setVertexAttribPointers(K,r,_)),X.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Eo(g){const r=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;const f=g[u].split(" ");r.push(f.pop())}return r}class gr{constructor(r,u,f,m,_,T){const A=r.gl;this.program=A.createProgram();const z=Eo(u.staticAttributes),D=f?f.getBinderAttributes():[],X=z.concat(D),K=Zo.prelude.staticUniforms?Eo(Zo.prelude.staticUniforms):[],ce=u.staticUniforms?Eo(u.staticUniforms):[],Me=f?f.getBinderUniforms():[],Ae=K.concat(ce).concat(Me),Fe=[];for(const at of Ae)Fe.indexOf(at)<0&&Fe.push(at);const Ce=f?f.defines():[];_&&Ce.push("#define OVERDRAW_INSPECTOR;"),T&&Ce.push("#define TERRAIN3D;");const Ke=Ce.concat(Zo.prelude.fragmentSource,u.fragmentSource).join(`
`),nt=Ce.concat(Zo.prelude.vertexSource,u.vertexSource).join(`
`),Re=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Re,Ke),A.compileShader(Re),!A.getShaderParameter(Re,A.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${A.getShaderInfoLog(Re)}`);A.attachShader(this.program,Re);const Je=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);if(A.shaderSource(Je,nt),A.compileShader(Je),!A.getShaderParameter(Je,A.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${A.getShaderInfoLog(Je)}`);A.attachShader(this.program,Je),this.attributes={};const st={};this.numAttributes=X.length;for(let at=0;at<this.numAttributes;at++)X[at]&&(A.bindAttribLocation(this.program,at,X[at]),this.attributes[X[at]]=at);if(A.linkProgram(this.program),!A.getProgramParameter(this.program,A.LINK_STATUS))throw new Error(`Program failed to link: ${A.getProgramInfoLog(this.program)}`);A.deleteShader(Je),A.deleteShader(Re);for(let at=0;at<Fe.length;at++){const pt=Fe[at];if(pt&&!st[pt]){const wt=A.getUniformLocation(this.program,pt);wt&&(st[pt]=wt)}}this.fixedUniforms=m(r,st),this.terrainUniforms=((at,pt)=>({u_depth:new a.Uniform1i(at,pt.u_depth),u_terrain:new a.Uniform1i(at,pt.u_terrain),u_terrain_dim:new a.Uniform1f(at,pt.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(at,pt.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(at,pt.u_terrain_unpack),u_terrain_exaggeration:new a.Uniform1f(at,pt.u_terrain_exaggeration)}))(r,st),this.binderUniforms=f?f.getUniforms(r,st):[]}draw(r,u,f,m,_,T,A,z,D,X,K,ce,Me,Ae,Fe,Ce,Ke,nt){const Re=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(_),r.setCullFace(T),z){r.activeTexture.set(Re.TEXTURE2),Re.bindTexture(Re.TEXTURE_2D,z.depthTexture),r.activeTexture.set(Re.TEXTURE3),Re.bindTexture(Re.TEXTURE_2D,z.texture);for(const st in this.terrainUniforms)this.terrainUniforms[st].set(z[st])}for(const st in this.fixedUniforms)this.fixedUniforms[st].set(A[st]);Fe&&Fe.setUniforms(r,this.binderUniforms,Me,{zoom:Ae});let Je=0;switch(u){case Re.LINES:Je=2;break;case Re.TRIANGLES:Je=3;break;case Re.LINE_STRIP:Je=1}for(const st of ce.get()){const at=st.vaos||(st.vaos={});(at[D]||(at[D]=new ya)).bind(r,this,X,Fe?Fe.getPaintVertexBuffers():[],K,st.vertexOffset,Ce,Ke,nt),Re.drawElements(u,st.primitiveLength*Je,Re.UNSIGNED_SHORT,st.primitiveOffset*Je*2)}}}function va(g,r,u){const f=1/Xe(u,1,r.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,r.transform.tileZoom)/m,T=_*(u.tileID.canonical.x+u.tileID.wrap*m),A=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[T>>16,A>>16],u_pixel_coord_lower:[65535&T,65535&A]}}const Ai=(g,r,u,f)=>{const m=r.style.light,_=m.properties.get("position"),T=[_.x,_.y,_.z],A=function(){var D=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();m.properties.get("anchor")==="viewport"&&function(D,X){var K=Math.sin(X),ce=Math.cos(X);D[0]=ce,D[1]=K,D[2]=0,D[3]=-K,D[4]=ce,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(A,-r.transform.angle),function(D,X,K){var ce=X[0],Me=X[1],Ae=X[2];D[0]=ce*K[0]+Me*K[3]+Ae*K[6],D[1]=ce*K[1]+Me*K[4]+Ae*K[7],D[2]=ce*K[2]+Me*K[5]+Ae*K[8]}(T,T,A);const z=m.properties.get("color");return{u_matrix:g,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+u,u_opacity:f}},_a=(g,r,u,f,m,_,T)=>a.extend(Ai(g,r,u,f),va(_,r,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),So=g=>({u_matrix:g}),ac=(g,r,u,f)=>a.extend(So(g),va(u,r,f)),Ii=(g,r)=>({u_matrix:g,u_world:r}),el=(g,r,u,f,m)=>a.extend(ac(g,r,u,f),{u_world:m}),tl=(g,r,u,f)=>{const m=g.transform;let _,T;if(f.paint.get("circle-pitch-alignment")==="map"){const A=Xe(u,1,m.zoom);_=!0,T=[A,A]}else _=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(r.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:T}},Wo=(g,r,u)=>{const f=Xe(u,1,r.zoom),m=Math.pow(2,r.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[r.pixelsToGLUnits[0]/(f*m),r.pixelsToGLUnits[1]/(f*m)],u_overscale_factor:_}},nl=(g,r,u=1)=>({u_matrix:g,u_color:r,u_overlay:0,u_overlay_scale:u}),xa=g=>({u_matrix:g}),lc=(g,r,u,f)=>({u_matrix:g,u_extrude_scale:Xe(r,1,u),u_intensity:f});function lu(g,r){const u=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new a.MercatorCoordinate(0,f/u).toLngLat().lat,new a.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const Ds=(g,r,u,f)=>{const m=g.transform;return{u_matrix:cc(g,r,u,f),u_ratio:1/Xe(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},rl=(g,r,u,f,m)=>a.extend(Ds(g,r,u,m),{u_image:0,u_image_height:f}),uc=(g,r,u,f,m)=>{const _=g.transform,T=uu(r,_);return{u_matrix:cc(g,r,u,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Xe(r,1,_.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[T,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Bs=(g,r,u,f,m,_)=>{const T=g.lineAtlas,A=uu(r,g.transform),z=u.layout.get("line-cap")==="round",D=T.getDash(f.from,z),X=T.getDash(f.to,z),K=D.width*m.fromScale,ce=X.width*m.toScale;return a.extend(Ds(g,r,u,_),{u_patternscale_a:[A/K,-D.height/2],u_patternscale_b:[A/ce,-X.height/2],u_sdfgamma:T.width/(256*Math.min(K,ce)*g.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:X.y,u_mix:m.t})};function uu(g,r){return 1/Xe(g,1,r.tileZoom)}function cc(g,r,u,f){return g.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const cu=(g,r,u,f,m)=>{return{u_matrix:g,u_tl_parent:r,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(_=m.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:hc(m.paint.get("raster-hue-rotate"))};var _,T};function hc(g){g*=Math.PI/180;const r=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*r-u+1)/3,(Math.sqrt(3)*r-u+1)/3]}const il=(g,r,u,f,m,_,T,A,z,D)=>{const X=m.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:X.width/X.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:T,u_coord_matrix:A,u_is_text:+z,u_pitch_with_map:+f,u_texsize:D,u_texture:0}},hu=(g,r,u,f,m,_,T,A,z,D,X)=>{const K=m.transform;return a.extend(il(g,r,u,f,m,_,T,A,z,D),{u_gamma_scale:f?Math.cos(K._pitch)*K.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:+X})},fc=(g,r,u,f,m,_,T,A,z,D)=>a.extend(hu(g,r,u,f,m,_,T,A,!0,z,!0),{u_texsize_icon:D,u_texture_icon:1}),fs=(g,r,u)=>({u_matrix:g,u_opacity:r,u_color:u}),Ns=(g,r,u,f,m,_)=>a.extend(function(T,A,z,D){const X=z.imageManager.getPattern(T.from.toString()),K=z.imageManager.getPattern(T.to.toString()),{width:ce,height:Me}=z.imageManager.getPixelSize(),Ae=Math.pow(2,D.tileID.overscaledZ),Fe=D.tileSize*Math.pow(2,z.transform.tileZoom)/Ae,Ce=Fe*(D.tileID.canonical.x+D.tileID.wrap*Ae),Ke=Fe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[ce,Me],u_mix:A.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Xe(D,1,z.transform.tileZoom),u_pixel_coord_upper:[Ce>>16,Ke>>16],u_pixel_coord_lower:[65535&Ce,65535&Ke]}}(f,_,u,m),{u_matrix:g,u_opacity:r}),Pi={fillExtrusion:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_lightpos:new a.Uniform3f(g,r.u_lightpos),u_lightintensity:new a.Uniform1f(g,r.u_lightintensity),u_lightcolor:new a.Uniform3f(g,r.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,r.u_vertical_gradient),u_opacity:new a.Uniform1f(g,r.u_opacity)}),fillExtrusionPattern:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_lightpos:new a.Uniform3f(g,r.u_lightpos),u_lightintensity:new a.Uniform1f(g,r.u_lightintensity),u_lightcolor:new a.Uniform3f(g,r.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,r.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,r.u_height_factor),u_image:new a.Uniform1i(g,r.u_image),u_texsize:new a.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,r.u_scale),u_fade:new a.Uniform1f(g,r.u_fade),u_opacity:new a.Uniform1f(g,r.u_opacity)}),fill:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix)}),fillPattern:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_image:new a.Uniform1i(g,r.u_image),u_texsize:new a.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,r.u_scale),u_fade:new a.Uniform1f(g,r.u_fade)}),fillOutline:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_world:new a.Uniform2f(g,r.u_world)}),fillOutlinePattern:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_world:new a.Uniform2f(g,r.u_world),u_image:new a.Uniform1i(g,r.u_image),u_texsize:new a.Uniform2f(g,r.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,r.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,r.u_scale),u_fade:new a.Uniform1f(g,r.u_fade)}),circle:(g,r)=>({u_camera_to_center_distance:new a.Uniform1f(g,r.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,r.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,r.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,r.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,r.u_matrix)}),collisionBox:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,r.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,r.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,r.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,r.u_overscale_factor)}),collisionCircle:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,r.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,r.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new a.UniformColor(g,r.u_color),u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_overlay:new a.Uniform1i(g,r.u_overlay),u_overlay_scale:new a.Uniform1f(g,r.u_overlay_scale)}),clippingMask:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix)}),heatmap:(g,r)=>({u_extrude_scale:new a.Uniform1f(g,r.u_extrude_scale),u_intensity:new a.Uniform1f(g,r.u_intensity),u_matrix:new a.UniformMatrix4f(g,r.u_matrix)}),heatmapTexture:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_world:new a.Uniform2f(g,r.u_world),u_image:new a.Uniform1i(g,r.u_image),u_color_ramp:new a.Uniform1i(g,r.u_color_ramp),u_opacity:new a.Uniform1f(g,r.u_opacity)}),hillshade:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_image:new a.Uniform1i(g,r.u_image),u_latrange:new a.Uniform2f(g,r.u_latrange),u_light:new a.Uniform2f(g,r.u_light),u_shadow:new a.UniformColor(g,r.u_shadow),u_highlight:new a.UniformColor(g,r.u_highlight),u_accent:new a.UniformColor(g,r.u_accent)}),hillshadePrepare:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_image:new a.Uniform1i(g,r.u_image),u_dimension:new a.Uniform2f(g,r.u_dimension),u_zoom:new a.Uniform1f(g,r.u_zoom),u_unpack:new a.Uniform4f(g,r.u_unpack)}),line:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_ratio:new a.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_ratio:new a.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,r.u_units_to_pixels),u_image:new a.Uniform1i(g,r.u_image),u_image_height:new a.Uniform1f(g,r.u_image_height)}),linePattern:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_texsize:new a.Uniform2f(g,r.u_texsize),u_ratio:new a.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_image:new a.Uniform1i(g,r.u_image),u_units_to_pixels:new a.Uniform2f(g,r.u_units_to_pixels),u_scale:new a.Uniform3f(g,r.u_scale),u_fade:new a.Uniform1f(g,r.u_fade)}),lineSDF:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_ratio:new a.Uniform1f(g,r.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,r.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,r.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,r.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,r.u_sdfgamma),u_image:new a.Uniform1i(g,r.u_image),u_tex_y_a:new a.Uniform1f(g,r.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,r.u_tex_y_b),u_mix:new a.Uniform1f(g,r.u_mix)}),raster:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_tl_parent:new a.Uniform2f(g,r.u_tl_parent),u_scale_parent:new a.Uniform1f(g,r.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,r.u_buffer_scale),u_fade_t:new a.Uniform1f(g,r.u_fade_t),u_opacity:new a.Uniform1f(g,r.u_opacity),u_image0:new a.Uniform1i(g,r.u_image0),u_image1:new a.Uniform1i(g,r.u_image1),u_brightness_low:new a.Uniform1f(g,r.u_brightness_low),u_brightness_high:new a.Uniform1f(g,r.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,r.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,r.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,r.u_spin_weights)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new a.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,r.u_size_t),u_size:new a.Uniform1f(g,r.u_size),u_camera_to_center_distance:new a.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,r.u_pitch),u_rotate_symbol:new a.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,r.u_fade_change),u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new a.Uniform1i(g,r.u_is_text),u_pitch_with_map:new a.Uniform1i(g,r.u_pitch_with_map),u_texsize:new a.Uniform2f(g,r.u_texsize),u_texture:new a.Uniform1i(g,r.u_texture)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new a.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,r.u_size_t),u_size:new a.Uniform1f(g,r.u_size),u_camera_to_center_distance:new a.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,r.u_pitch),u_rotate_symbol:new a.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,r.u_fade_change),u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new a.Uniform1i(g,r.u_is_text),u_pitch_with_map:new a.Uniform1i(g,r.u_pitch_with_map),u_texsize:new a.Uniform2f(g,r.u_texsize),u_texture:new a.Uniform1i(g,r.u_texture),u_gamma_scale:new a.Uniform1f(g,r.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,r.u_is_halo)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new a.Uniform1i(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,r.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,r.u_size_t),u_size:new a.Uniform1f(g,r.u_size),u_camera_to_center_distance:new a.Uniform1f(g,r.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,r.u_pitch),u_rotate_symbol:new a.Uniform1i(g,r.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,r.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,r.u_fade_change),u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,r.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,r.u_coord_matrix),u_is_text:new a.Uniform1i(g,r.u_is_text),u_pitch_with_map:new a.Uniform1i(g,r.u_pitch_with_map),u_texsize:new a.Uniform2f(g,r.u_texsize),u_texsize_icon:new a.Uniform2f(g,r.u_texsize_icon),u_texture:new a.Uniform1i(g,r.u_texture),u_texture_icon:new a.Uniform1i(g,r.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,r.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,r.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,r.u_is_halo)}),background:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_opacity:new a.Uniform1f(g,r.u_opacity),u_color:new a.UniformColor(g,r.u_color)}),backgroundPattern:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_opacity:new a.Uniform1f(g,r.u_opacity),u_image:new a.Uniform1i(g,r.u_image),u_pattern_tl_a:new a.Uniform2f(g,r.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,r.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,r.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,r.u_pattern_br_b),u_texsize:new a.Uniform2f(g,r.u_texsize),u_mix:new a.Uniform1f(g,r.u_mix),u_pattern_size_a:new a.Uniform2f(g,r.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,r.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,r.u_scale_a),u_scale_b:new a.Uniform1f(g,r.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_texture:new a.Uniform1i(g,r.u_texture),u_ele_delta:new a.Uniform1f(g,r.u_ele_delta)}),terrainDepth:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_ele_delta:new a.Uniform1f(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_matrix:new a.UniformMatrix4f(g,r.u_matrix),u_texture:new a.Uniform1i(g,r.u_texture),u_terrain_coords_id:new a.Uniform1f(g,r.u_terrain_coords_id),u_ele_delta:new a.Uniform1f(g,r.u_ele_delta)})};class ol{constructor(r,u,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const sl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wa{constructor(r,u,f,m){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=r;const _=r.gl;this.buffer=_.createBuffer(),r.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,u){for(let f=0;f<this.attributes.length;f++){const m=u.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,u,f){for(let m=0;m<this.attributes.length;m++){const _=this.attributes[m],T=u.attributes[_.name];T!==void 0&&r.vertexAttribPointer(T,_.components,r[sl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ds=new WeakMap;function ps(g){if(ds.has(g))return ds.get(g);{const r=g.getParameter(g.VERSION).startsWith("WebGL 2.0");return ds.set(g,r),r}}class Ln{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ms extends Ln{getDefault(){return a.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class al extends Ln{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ii extends Ln{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class di extends Ln{getDefault(){return[!0,!0,!0,!0]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class fu extends Ln{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class ll extends Ln{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class ul extends Ln{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const u=this.current;(r.func!==u.func||r.ref!==u.ref||r.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class cl extends Ln{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class du extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=r,this.dirty=!1}}class Us extends Ln{getDefault(){return[0,1]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class pu extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=r,this.dirty=!1}}class mu extends Ln{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class hl extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.BLEND):u.disable(u.BLEND),this.current=r,this.dirty=!1}}class dc extends Ln{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class pc extends Ln{getDefault(){return a.Color.transparent}set(r){const u=this.current;(r.r!==u.r||r.g!==u.g||r.b!==u.b||r.a!==u.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class $s extends Ln{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class mc extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;r?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=r,this.dirty=!1}}class gu extends Ln{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Rh extends Ln{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class jh extends Ln{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Dh extends Ln{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Bh extends Ln{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const u=this.current;(r[0]!==u[0]||r[1]!==u[1]||r[2]!==u[2]||r[3]!==u[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class fl extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class dl extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yu extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class vu extends Ln{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Vs extends Ln{getDefault(){return null}set(r){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ba extends Ln{getDefault(){return null}set(r){var u;if(r===this.current&&!this.dirty)return;const f=this.gl;ps(f)?f.bindVertexArray(r):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class gc extends Ln{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Ho extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Xo extends Ln{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class pi extends Ln{constructor(r,u){super(r),this.context=r,this.parent=u}getDefault(){return null}}class Gs extends pi{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Zs extends pi{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class yc extends pi{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class _u{constructor(r,u,f,m,_){this.context=r,this.width=u,this.height=f;const T=r.gl,A=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Gs(r,A),m)this.depthAttachment=_?new yc(r,A):new Zs(r,A);else if(_)throw new Error("Stencil cannot be setted without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,u=this.colorAttachment.get();if(u&&r.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class ln{constructor(r,u,f){this.blendFunction=r,this.blendColor=u,this.mask=f}}ln.Replace=[1,0],ln.disabled=new ln(ln.Replace,a.Color.transparent,[!1,!1,!1,!1]),ln.unblended=new ln(ln.Replace,a.Color.transparent,[!0,!0,!0,!0]),ln.alphaBlended=new ln([1,771],a.Color.transparent,[!0,!0,!0,!0]);class pl{constructor(r){var u,f;if(this.gl=r,this.clearColor=new ms(this),this.clearDepth=new al(this),this.clearStencil=new ii(this),this.colorMask=new di(this),this.depthMask=new fu(this),this.stencilMask=new ll(this),this.stencilFunc=new ul(this),this.stencilOp=new cl(this),this.stencilTest=new du(this),this.depthRange=new Us(this),this.depthTest=new pu(this),this.depthFunc=new mu(this),this.blend=new hl(this),this.blendFunc=new dc(this),this.blendColor=new pc(this),this.blendEquation=new $s(this),this.cullFace=new mc(this),this.cullFaceSide=new gu(this),this.frontFace=new Rh(this),this.program=new jh(this),this.activeTexture=new Dh(this),this.viewport=new Bh(this),this.bindFramebuffer=new fl(this),this.bindRenderbuffer=new dl(this),this.bindTexture=new yu(this),this.bindVertexBuffer=new vu(this),this.bindElementBuffer=new Vs(this),this.bindVertexArray=new ba(this),this.pixelStoreUnpack=new gc(this),this.pixelStoreUnpackPremultiplyAlpha=new Ho(this),this.pixelStoreUnpackFlipY=new Xo(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ps(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=r.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,u){return new ol(this,r,u)}createVertexBuffer(r,u,f){return new wa(this,r,u,f)}createRenderbuffer(r,u,f){const m=this.gl,_=m.createRenderbuffer();return this.bindRenderbuffer.set(_),m.renderbufferStorage(m.RENDERBUFFER,r,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(r,u,f,m){return new _u(this,r,u,f,m)}clear({color:r,depth:u,stencil:f}){const m=this.gl;let _=0;r&&(_|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(_)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.deepEqual(r.blendFunction,ln.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ps(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var u;return ps(this.gl)?this.gl.deleteVertexArray(r):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Cn{constructor(r,u,f){this.func=r,this.mask=u,this.range=f}}Cn.ReadOnly=!1,Cn.ReadWrite=!0,Cn.disabled=new Cn(519,Cn.ReadOnly,[0,1]);const ml=7680;class qn{constructor(r,u,f,m,_,T){this.test=r,this.ref=u,this.mask=f,this.fail=m,this.depthFail=_,this.pass=T}}qn.disabled=new qn({func:519,mask:0},0,0,ml,ml,ml);class Kn{constructor(r,u,f){this.enable=r,this.mode=u,this.frontFace=f}}let Ea;function gl(g,r,u,f,m,_,T){const A=g.context,z=A.gl,D=g.useProgram("collisionBox"),X=[];let K=0,ce=0;for(let Re=0;Re<f.length;Re++){const Je=f[Re],st=r.getTile(Je),at=st.getBucket(u);if(!at)continue;let pt=Je.posMatrix;m[0]===0&&m[1]===0||(pt=g.translatePosMatrix(Je.posMatrix,st,m,_));const wt=T?at.textCollisionBox:at.iconCollisionBox,xt=at.collisionCircleArray;if(xt.length>0){const St=a.create(),Ut=pt;a.mul(St,at.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(St,St,at.placementViewportMatrix),X.push({circleArray:xt,circleOffset:ce,transform:Ut,invTransform:St,coord:Je}),K+=xt.length/4,ce=K}wt&&D.draw(A,z.LINES,Cn.disabled,qn.disabled,g.colorModeForRenderPass(),Kn.disabled,Wo(pt,g.transform,st),g.style.map.terrain&&g.style.map.terrain.getTerrainData(Je),u.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,g.transform.zoom,null,null,wt.collisionVertexBuffer)}if(!T||!X.length)return;const Me=g.useProgram("collisionCircle"),Ae=new a.CollisionCircleLayoutArray;Ae.resize(4*K),Ae._trim();let Fe=0;for(const Re of X)for(let Je=0;Je<Re.circleArray.length/4;Je++){const st=4*Je,at=Re.circleArray[st+0],pt=Re.circleArray[st+1],wt=Re.circleArray[st+2],xt=Re.circleArray[st+3];Ae.emplace(Fe++,at,pt,wt,xt,0),Ae.emplace(Fe++,at,pt,wt,xt,1),Ae.emplace(Fe++,at,pt,wt,xt,2),Ae.emplace(Fe++,at,pt,wt,xt,3)}(!Ea||Ea.length<2*K)&&(Ea=function(Re){const Je=2*Re,st=new a.QuadTriangleArray;st.resize(Je),st._trim();for(let at=0;at<Je;at++){const pt=6*at;st.uint16[pt+0]=4*at+0,st.uint16[pt+1]=4*at+1,st.uint16[pt+2]=4*at+2,st.uint16[pt+3]=4*at+2,st.uint16[pt+4]=4*at+3,st.uint16[pt+5]=4*at+0}return st}(K));const Ce=A.createIndexBuffer(Ea,!0),Ke=A.createVertexBuffer(Ae,a.collisionCircleLayout.members,!0);for(const Re of X){const Je={u_matrix:Re.transform,u_inv_matrix:Re.invTransform,u_camera_to_center_distance:(nt=g.transform).cameraToCenterDistance,u_viewport_size:[nt.width,nt.height]};Me.draw(A,z.TRIANGLES,Cn.disabled,qn.disabled,g.colorModeForRenderPass(),Kn.disabled,Je,g.style.map.terrain&&g.style.map.terrain.getTerrainData(Re.coord),u.id,Ke,Ce,a.SegmentVector.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,g.transform.zoom,null,null,null)}var nt;Ke.destroy(),Ce.destroy()}Kn.disabled=new Kn(!1,1029,2305),Kn.backCCW=new Kn(!0,1029,2305);const Nh=a.identity(new Float32Array(16));function xu(g,r,u,f,m,_){const{horizontalAlign:T,verticalAlign:A}=a.getAnchorAlignment(g);return new a.Point((-(T-.5)*r/m+f[0])*_,(-(A-.5)*u/m+f[1])*_)}function gs(g,r,u,f,m,_,T,A,z,D,X){const K=g.text.placedSymbolArray,ce=g.text.dynamicLayoutVertexArray,Me=g.icon.dynamicLayoutVertexArray,Ae={};ce.clear();for(let Fe=0;Fe<K.length;Fe++){const Ce=K.get(Fe),Ke=Ce.hidden||!Ce.crossTileID||g.allowVerticalPlacement&&!Ce.placedOrientation?null:f[Ce.crossTileID];if(Ke){const nt=new a.Point(Ce.anchorX,Ce.anchorY),Re=Dt(nt,u?T:_,X),Je=vn(m.cameraToCenterDistance,Re.signedDistanceFromCamera);let st=a.evaluateSizeForFeature(g.textSizeData,z,Ce)*Je/a.ONE_EM;u&&(st*=g.tilePixelRatio/A);const{width:at,height:pt,anchor:wt,textOffset:xt,textBoxScale:St}=Ke,Ut=xu(wt,at,pt,xt,St,st),In=u?Dt(nt.add(Ut),_,X).point:Re.point.add(r?Ut.rotate(-m.angle):Ut),Mt=g.allowVerticalPlacement&&Ce.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let un=0;un<Ce.numGlyphs;un++)a.addDynamicAttributes(ce,In,Mt);D&&Ce.associatedIconIndex>=0&&(Ae[Ce.associatedIconIndex]={shiftedAnchor:In,angle:Mt})}else se(Ce.numGlyphs,ce)}if(D){Me.clear();const Fe=g.icon.placedSymbolArray;for(let Ce=0;Ce<Fe.length;Ce++){const Ke=Fe.get(Ce);if(Ke.hidden)se(Ke.numGlyphs,Me);else{const nt=Ae[Ce];if(nt)for(let Re=0;Re<Ke.numGlyphs;Re++)a.addDynamicAttributes(Me,nt.shiftedAnchor,nt.angle);else se(Ke.numGlyphs,Me)}}g.icon.dynamicLayoutVertexBuffer.updateData(Me)}g.text.dynamicLayoutVertexBuffer.updateData(ce)}function ho(g,r,u){return u.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function yl(g,r,u,f,m,_,T,A,z,D,X,K){const ce=g.context,Me=ce.gl,Ae=g.transform,Fe=A==="map",Ce=z==="map",Ke=A!=="viewport"&&u.layout.get("symbol-placement")!=="point",nt=Fe&&!Ce&&!Ke,Re=!u.layout.get("symbol-sort-key").isConstant();let Je=!1;const st=g.depthModeForSublayer(0,Cn.ReadOnly),at=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),pt=[];for(const wt of f){const xt=r.getTile(wt),St=xt.getBucket(u);if(!St)continue;const Ut=m?St.text:St.icon;if(!Ut||!Ut.segments.get().length||!Ut.hasVisibleVertices)continue;const In=Ut.programConfigurations.get(u.id),Mt=m||St.sdfIcons,un=m?St.textSizeData:St.iconSizeData,Zt=Ce||Ae.pitch!==0,ur=g.useProgram(ho(Mt,m,St),In),wn=a.evaluateSizeForZoom(un,Ae.zoom),bn=g.style.map.terrain&&g.style.map.terrain.getTerrainData(wt);let Pn,Sr,tr,mo,wr=[0,0],yr=null;if(m)Sr=xt.glyphAtlasTexture,tr=Me.LINEAR,Pn=xt.glyphAtlasTexture.size,St.iconsInText&&(wr=xt.imageAtlasTexture.size,yr=xt.imageAtlasTexture,mo=Zt||g.options.rotating||g.options.zooming||un.kind==="composite"||un.kind==="camera"?Me.LINEAR:Me.NEAREST);else{const Tr=u.layout.get("icon-size").constantOr(0)!==1||St.iconsNeedLinear;Sr=xt.imageAtlasTexture,tr=Mt||g.options.rotating||g.options.zooming||Tr||Zt?Me.LINEAR:Me.NEAREST,Pn=xt.imageAtlasTexture.size}const Hi=Xe(xt,1,g.transform.zoom),Qo=tt(wt.posMatrix,Ce,Fe,g.transform,Hi),cr=Ve(wt.posMatrix,Ce,Fe,g.transform,Hi),ea=at&&St.hasTextData(),ta=u.layout.get("icon-text-fit")!=="none"&&ea&&St.hasIconData();if(Ke){const Tr=g.style.map.terrain?(Xi,Ar)=>g.style.map.terrain.getElevation(wt,Xi,Ar):null,Cr=u.layout.get("text-rotation-alignment")==="map";Mn(St,wt.posMatrix,g,m,Qo,cr,Ce,D,Cr,Tr)}const vs=g.translatePosMatrix(wt.posMatrix,xt,_,T),Ia=Ke||m&&at||ta?Nh:Qo,yi=g.translatePosMatrix(cr,xt,_,T,!0),Qr=Mt&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=Mt?St.iconsInText?fc(un.kind,wn,nt,Ce,g,vs,Ia,yi,Pn,wr):hu(un.kind,wn,nt,Ce,g,vs,Ia,yi,m,Pn,!0):il(un.kind,wn,nt,Ce,g,vs,Ia,yi,m,Pn);const ku={program:ur,buffers:Ut,uniformValues:oi,atlasTexture:Sr,atlasTextureIcon:yr,atlasInterpolation:tr,atlasInterpolationIcon:mo,isSDF:Mt,hasHalo:Qr};if(Re&&St.canOverlap){Je=!0;const Tr=Ut.segments.get();for(const Cr of Tr)pt.push({segments:new a.SegmentVector([Cr]),sortKey:Cr.sortKey,state:ku,terrainData:bn})}else pt.push({segments:Ut.segments,sortKey:0,state:ku,terrainData:bn})}Je&&pt.sort((wt,xt)=>wt.sortKey-xt.sortKey);for(const wt of pt){const xt=wt.state;if(ce.activeTexture.set(Me.TEXTURE0),xt.atlasTexture.bind(xt.atlasInterpolation,Me.CLAMP_TO_EDGE),xt.atlasTextureIcon&&(ce.activeTexture.set(Me.TEXTURE1),xt.atlasTextureIcon&&xt.atlasTextureIcon.bind(xt.atlasInterpolationIcon,Me.CLAMP_TO_EDGE)),xt.isSDF){const St=xt.uniformValues;xt.hasHalo&&(St.u_is_halo=1,Sa(xt.buffers,wt.segments,u,g,xt.program,st,X,K,St,wt.terrainData)),St.u_is_halo=0}Sa(xt.buffers,wt.segments,u,g,xt.program,st,X,K,xt.uniformValues,wt.terrainData)}}function Sa(g,r,u,f,m,_,T,A,z,D){const X=f.context;m.draw(X,X.gl.TRIANGLES,_,T,A,Kn.disabled,z,D,u.id,g.layoutVertexBuffer,g.indexBuffer,r,u.paint,f.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function Ws(g,r,u,f,m){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let T=_[u.to.toString()],A=_[u.from.toString()];if(!T||!A){const z=m.getPaintProperty(r);T=_[z],A=_[z]}T&&A&&g.setConstantPatternPositions(T,A)}function Ta(g,r,u,f,m,_,T){const A=g.context.gl,z="fill-pattern",D=u.paint.get(z),X=D&&D.constantOr(1),K=u.getCrossfadeParameters();let ce,Me,Ae,Fe,Ce;T?(Me=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ce=A.LINES):(Me=X?"fillPattern":"fill",ce=A.TRIANGLES);const Ke=D.constantOr(null);for(const nt of f){const Re=r.getTile(nt);if(X&&!Re.patternsLoaded())continue;const Je=Re.getBucket(u);if(!Je)continue;const st=Je.programConfigurations.get(u.id),at=g.useProgram(Me,st),pt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(nt);X&&(g.context.activeTexture.set(A.TEXTURE0),Re.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),st.updatePaintBuffers(K)),Ws(st,z,Ke,Re,u);const wt=pt?nt:null,xt=g.translatePosMatrix(wt?wt.posMatrix:nt.posMatrix,Re,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(T){Fe=Je.indexBuffer2,Ce=Je.segments2;const St=[A.drawingBufferWidth,A.drawingBufferHeight];Ae=Me==="fillOutlinePattern"&&X?el(xt,g,K,Re,St):Ii(xt,St)}else Fe=Je.indexBuffer,Ce=Je.segments,Ae=X?ac(xt,g,K,Re):So(xt);at.draw(g.context,ce,m,g.stencilModeForClipping(nt),_,Kn.disabled,Ae,pt,u.id,Je.layoutVertexBuffer,Fe,Ce,u.paint,g.transform.zoom,st)}}function Gi(g,r,u,f,m,_,T){const A=g.context,z=A.gl,D="fill-extrusion-pattern",X=u.paint.get(D),K=X.constantOr(1),ce=u.getCrossfadeParameters(),Me=u.paint.get("fill-extrusion-opacity"),Ae=X.constantOr(null);for(const Fe of f){const Ce=r.getTile(Fe),Ke=Ce.getBucket(u);if(!Ke)continue;const nt=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Fe),Re=Ke.programConfigurations.get(u.id),Je=g.useProgram(K?"fillExtrusionPattern":"fillExtrusion",Re);K&&(g.context.activeTexture.set(z.TEXTURE0),Ce.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Re.updatePaintBuffers(ce)),Ws(Re,D,Ae,Ce,u);const st=g.translatePosMatrix(Fe.posMatrix,Ce,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),at=u.paint.get("fill-extrusion-vertical-gradient"),pt=K?_a(st,g,at,Me,Fe,ce,Ce):Ai(st,g,at,Me);Je.draw(A,A.gl.TRIANGLES,m,_,T,Kn.backCCW,pt,nt,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,g.transform.zoom,Re,g.style.map.terrain&&Ke.centroidVertexBuffer)}}function qo(g,r,u,f,m,_,T){const A=g.context,z=A.gl,D=u.fbo;if(!D)return;const X=g.useProgram("hillshade"),K=g.style.map.terrain&&g.style.map.terrain.getTerrainData(r);A.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,D.colorAttachment.get()),X.draw(A,z.TRIANGLES,m,_,T,Kn.disabled,((ce,Me,Ae,Fe)=>{const Ce=Ae.paint.get("hillshade-shadow-color"),Ke=Ae.paint.get("hillshade-highlight-color"),nt=Ae.paint.get("hillshade-accent-color");let Re=Ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(Re-=ce.transform.angle);const Je=!ce.options.moving;return{u_matrix:Fe?Fe.posMatrix:ce.transform.calculatePosMatrix(Me.tileID.toUnwrapped(),Je),u_image:0,u_latrange:lu(0,Me.tileID),u_light:[Ae.paint.get("hillshade-exaggeration"),Re],u_shadow:Ce,u_highlight:Ke,u_accent:nt}})(g,u,f,K?r:null),K,f.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function Jr(g,r,u,f,m,_){const T=g.context,A=T.gl,z=r.dem;if(z&&z.data){const D=z.dim,X=z.stride,K=z.getPixels();if(T.activeTexture.set(A.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||g.getTileTexture(X),r.demTexture){const Me=r.demTexture;Me.update(K,{premultiply:!1}),Me.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else r.demTexture=new q(T,K,A.RGBA,{premultiply:!1}),r.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);T.activeTexture.set(A.TEXTURE0);let ce=r.fbo;if(!ce){const Me=new q(T,{width:D,height:D,data:null},A.RGBA);Me.bind(A.LINEAR,A.CLAMP_TO_EDGE),ce=r.fbo=T.createFramebuffer(D,D,!0,!1),ce.colorAttachment.set(Me.texture)}T.bindFramebuffer.set(ce.framebuffer),T.viewport.set([0,0,D,D]),g.useProgram("hillshadePrepare").draw(T,A.TRIANGLES,f,m,_,Kn.disabled,((Me,Ae)=>{const Fe=Ae.stride,Ce=a.create();return a.ortho(Ce,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Ce,Ce,[0,-a.EXTENT,0]),{u_matrix:Ce,u_image:1,u_dimension:[Fe,Fe],u_zoom:Me.overscaledZ,u_unpack:Ae.getUnpackVector()}})(r.tileID,z),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function To(g,r,u,f,m,_){const T=f.paint.get("raster-fade-duration");if(!_&&T>0){const A=a.browser.now(),z=(A-g.timeAdded)/T,D=r?(A-r.timeAdded)/T:-1,X=u.getSource(),K=m.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),ce=!r||Math.abs(r.tileID.overscaledZ-K)>Math.abs(g.tileID.overscaledZ-K),Me=ce&&g.refreshedUponExpiration?1:a.clamp(ce?z:1-D,0,1);return g.refreshedUponExpiration&&z>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-Me}:{opacity:Me,mix:0}}return{opacity:1,mix:0}}const wu=new a.Color(1,0,0,1),vl=new a.Color(0,1,0,1),_l=new a.Color(0,0,1,1),Hs=new a.Color(1,0,1,1),Ca=new a.Color(0,1,1,1);function mi(g,r,u,f){ys(g,0,r+u/2,g.transform.width,u,f)}function fo(g,r,u,f){ys(g,r-u/2,0,u,g.transform.height,f)}function ys(g,r,u,f,m,_){const T=g.context,A=T.gl;A.enable(A.SCISSOR_TEST),A.scissor(r*g.pixelRatio,u*g.pixelRatio,f*g.pixelRatio,m*g.pixelRatio),T.clear({color:_}),A.disable(A.SCISSOR_TEST)}function xl(g,r,u){const f=g.context,m=f.gl,_=u.posMatrix,T=g.useProgram("debug"),A=Cn.disabled,z=qn.disabled,D=g.colorModeForRenderPass(),X="$debug",K=g.style.map.terrain&&g.style.map.terrain.getTerrainData(u);f.activeTexture.set(m.TEXTURE0);const ce=r.getTileByID(u.key).latestRawTileData,Me=Math.floor((ce&&ce.byteLength||0)/1024),Ae=r.getTile(u).tileSize,Fe=512/Math.min(Ae,512)*(u.overscaledZ/g.transform.zoom)*.5;let Ce=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ce+=` => ${u.overscaledZ}`),function(Ke,nt){Ke.initDebugOverlayCanvas();const Re=Ke.debugOverlayCanvas,Je=Ke.context.gl,st=Ke.debugOverlayCanvas.getContext("2d");st.clearRect(0,0,Re.width,Re.height),st.shadowColor="white",st.shadowBlur=2,st.lineWidth=1.5,st.strokeStyle="white",st.textBaseline="top",st.font="bold 36px Open Sans, sans-serif",st.fillText(nt,5,5),st.strokeText(nt,5,5),Ke.debugOverlayTexture.update(Re),Ke.debugOverlayTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE)}(g,`${Ce} ${Me}kB`),T.draw(f,m.TRIANGLES,A,z,ln.alphaBlended,Kn.disabled,nl(_,a.Color.transparent,Fe),null,X,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),T.draw(f,m.LINE_STRIP,A,z,D,Kn.disabled,nl(_,a.Color.red),K,X,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function Xs(g,r,u){const f=g.context,m=f.gl,_=g.colorModeForRenderPass(),T=new Cn(m.LEQUAL,Cn.ReadWrite,g.depthRangeFor3D),A=g.useProgram("terrain"),z=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,g.width,g.height]);for(const D of u){const X=g.renderToTexture.getTexture(D),K=r.getTerrainData(D.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,X.texture);const ce={u_matrix:g.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(g.transform.zoom)};A.draw(f,m.TRIANGLES,T,qn.disabled,_,Kn.backCCW,ce,K,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}class sr{constructor(r,u){this.context=new pl(r),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=M.maxUnderzooming+M.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ja}resize(r,u,f){if(this.width=Math.floor(r*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,u=new a.PosArray;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=r.createVertexBuffer(u,ri.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const f=new a.PosArray;f.emplaceBack(0,0),f.emplaceBack(a.EXTENT,0),f.emplaceBack(0,a.EXTENT),f.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=r.createVertexBuffer(f,ri.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const m=new a.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(a.EXTENT,0,a.EXTENT,0),m.emplaceBack(0,a.EXTENT,0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=r.createVertexBuffer(m,gt.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const _=new a.PosArray;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(_,ri.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const T=new a.LineStripIndexArray;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(T);const A=new a.TriangleIndexArray;A.emplaceBack(0,1,2),A.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(A);const z=this.context.gl;this.stencilClearMode=new qn({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO)}clearStencil(){const r=this.context,u=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=a.create();a.ortho(f,0,this.width,this.height,0,0,1),a.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,u.TRIANGLES,Cn.disabled,this.stencilClearMode,ln.disabled,Kn.disabled,xa(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,u){if(this.currentStencilSource===r.source||!r.isTileClipped()||!u||!u.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(ln.disabled),f.setDepthMode(Cn.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of u){const A=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);_.draw(f,m.TRIANGLES,Cn.disabled,new qn({func:m.ALWAYS,mask:0},A,255,m.KEEP,m.KEEP,m.REPLACE),ln.disabled,Kn.disabled,xa(T.posMatrix),z,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,u=this.context.gl;return new qn({func:u.NOTEQUAL,mask:255},r,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(r){const u=this.context.gl;return new qn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(r){const u=this.context.gl,f=r.sort((T,A)=>A.overscaledZ-T.overscaledZ),m=f[f.length-1].overscaledZ,_=f[0].overscaledZ-m+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const T={};for(let A=0;A<_;A++)T[A+m]=new qn({func:u.GEQUAL,mask:255},A+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[T,f]}return[{[m]:qn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new ln([r.CONSTANT_COLOR,r.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ln.unblended:ln.alphaBlended}depthModeForSublayer(r,u,f){if(!this.opaquePassEnabledForLayer())return Cn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Cn(f||this.context.gl.LEQUAL,u,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,u){this.style=r,this.options=u,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,_={},T={},A={};for(const z in m){const D=m[z];D.used&&D.prepare(this.context),_[z]=D.getVisibleCoordinates(),T[z]=_[z].slice().reverse(),A[z]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<f.length;z++)if(this.style._layers[f[z]].is3D()){this.opaquePassCutoff=z;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const z=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,X){const K=D.context,ce=K.gl,Me=ln.unblended,Ae=new Cn(ce.LEQUAL,Cn.ReadWrite,[0,1]),Fe=X.getTerrainMesh(),Ce=X.sourceCache.getRenderableTiles(),Ke=D.useProgram("terrainDepth");K.bindFramebuffer.set(X.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),K.clear({color:a.Color.transparent,depth:1});for(const nt of Ce){const Re=X.getTerrainData(nt.tileID),Je={u_matrix:D.transform.calculatePosMatrix(nt.tileID.toUnwrapped()),u_ele_delta:X.getMeshFrameDelta(D.transform.zoom)};Ke.draw(K,ce.TRIANGLES,Ae,qn.disabled,Me,Kn.backCCW,Je,Re,"terrain",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,X){const K=D.context,ce=K.gl,Me=ln.unblended,Ae=new Cn(ce.LEQUAL,Cn.ReadWrite,[0,1]),Fe=X.getTerrainMesh(),Ce=X.getCoordsTexture(),Ke=X.sourceCache.getRenderableTiles(),nt=D.useProgram("terrainCoords");K.bindFramebuffer.set(X.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),K.clear({color:a.Color.transparent,depth:1}),X.coordsIndex=[];for(const Re of Ke){const Je=X.getTerrainData(Re.tileID);K.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,Ce.texture);const st={u_matrix:D.transform.calculatePosMatrix(Re.tileID.toUnwrapped()),u_terrain_coords_id:(255-X.coordsIndex.length)/255,u_texture:0,u_ele_delta:X.getMeshFrameDelta(D.transform.zoom)};nt.draw(K,ce.TRIANGLES,Ae,qn.disabled,Me,Kn.backCCW,st,Je,"terrain",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments),X.coordsIndex.push(Re.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const z of f){const D=this.style._layers[z];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const X=T[D.source];(D.type==="custom"||X.length)&&this.renderLayer(this,m[D.source],D,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[f[this.currentLayer]],D=m[z.source],X=_[z.source];this._renderTileClippingMasks(z,X),this.renderLayer(this,D,z,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const z=this.style._layers[f[this.currentLayer]],D=m[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z))continue;const X=(z.type==="symbol"?A:T)[z.source];this._renderTileClippingMasks(z,_[z.source]),this.renderLayer(this,D,z,X)}if(this.options.showTileBoundaries){const z=function(D,X){let K=null;const ce=Object.values(D._layers).flatMap(Ce=>Ce.source&&!Ce.isHidden(X)?[D.sourceCaches[Ce.source]]:[]),Me=ce.filter(Ce=>Ce.getSource().type==="vector"),Ae=ce.filter(Ce=>Ce.getSource().type!=="vector"),Fe=Ce=>{(!K||K.getSource().maxzoom<Ce.getSource().maxzoom)&&(K=Ce)};return Me.forEach(Ce=>Fe(Ce)),K||Ae.forEach(Ce=>Fe(Ce)),K}(this.style,this.transform.zoom);z&&function(D,X,K){for(let ce=0;ce<K.length;ce++)xl(D,X,K[ce])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const D=z.transform.padding;mi(z,z.transform.height-(D.top||0),3,wu),mi(z,D.bottom||0,3,vl),fo(z,D.left||0,3,_l),fo(z,z.transform.width-(D.right||0),3,Hs);const X=z.transform.centerPoint;(function(K,ce,Me,Ae){ys(K,ce-1,Me-10,2,20,Ae),ys(K,ce-10,Me-1,20,2,Ae)})(z,X.x,z.transform.height-X.y,Ca)}(this),this.context.setDefault()}renderLayer(r,u,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,T,A,z,D){if(_.renderPass!=="translucent")return;const X=qn.disabled,K=_.colorModeForRenderPass();(A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ce,Me,Ae,Fe,Ce,Ke,nt){const Re=Me.transform,Je=Ce==="map",st=Ke==="map";for(const at of ce){const pt=Fe.getTile(at),wt=pt.getBucket(Ae);if(!wt||!wt.text||!wt.text.segments.get().length)continue;const xt=a.evaluateSizeForZoom(wt.textSizeData,Re.zoom),St=Xe(pt,1,Me.transform.zoom),Ut=tt(at.posMatrix,st,Je,Me.transform,St),In=Ae.layout.get("icon-text-fit")!=="none"&&wt.hasIconData();if(xt){const Mt=Math.pow(2,Re.zoom-pt.tileID.overscaledZ);gs(wt,Je,st,nt,Re,Ut,at.posMatrix,Mt,xt,In,Me.style.map.terrain?(un,Zt)=>Me.style.map.terrain.getElevation(at,un,Zt):null)}}}(z,_,A,T,A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),D),A.paint.get("icon-opacity").constantOr(1)!==0&&yl(_,T,A,z,!1,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),A.layout.get("icon-rotation-alignment"),A.layout.get("icon-pitch-alignment"),A.layout.get("icon-keep-upright"),X,K),A.paint.get("text-opacity").constantOr(1)!==0&&yl(_,T,A,z,!0,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),A.layout.get("text-rotation-alignment"),A.layout.get("text-pitch-alignment"),A.layout.get("text-keep-upright"),X,K),T.map.showCollisionBoxes&&(gl(_,T,A,z,A.paint.get("text-translate"),A.paint.get("text-translate-anchor"),!0),gl(_,T,A,z,A.paint.get("icon-translate"),A.paint.get("icon-translate-anchor"),!1))})(r,u,f,m,this.style.placement.variableOffsets);break;case"circle":(function(_,T,A,z){if(_.renderPass!=="translucent")return;const D=A.paint.get("circle-opacity"),X=A.paint.get("circle-stroke-width"),K=A.paint.get("circle-stroke-opacity"),ce=!A.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(X.constantOr(1)===0||K.constantOr(1)===0))return;const Me=_.context,Ae=Me.gl,Fe=_.depthModeForSublayer(0,Cn.ReadOnly),Ce=qn.disabled,Ke=_.colorModeForRenderPass(),nt=[];for(let Re=0;Re<z.length;Re++){const Je=z[Re],st=T.getTile(Je),at=st.getBucket(A);if(!at)continue;const pt=at.programConfigurations.get(A.id),wt=_.useProgram("circle",pt),xt=at.layoutVertexBuffer,St=at.indexBuffer,Ut=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Je),In={programConfiguration:pt,program:wt,layoutVertexBuffer:xt,indexBuffer:St,uniformValues:tl(_,Je,st,A),terrainData:Ut};if(ce){const Mt=at.segments.get();for(const un of Mt)nt.push({segments:new a.SegmentVector([un]),sortKey:un.sortKey,state:In})}else nt.push({segments:at.segments,sortKey:0,state:In})}ce&&nt.sort((Re,Je)=>Re.sortKey-Je.sortKey);for(const Re of nt){const{programConfiguration:Je,program:st,layoutVertexBuffer:at,indexBuffer:pt,uniformValues:wt,terrainData:xt}=Re.state;st.draw(Me,Ae.TRIANGLES,Fe,Ce,Ke,Kn.disabled,wt,xt,A.id,at,pt,Re.segments,A.paint,_.transform.zoom,Je)}})(r,u,f,m);break;case"heatmap":(function(_,T,A,z){if(A.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,X=D.gl,K=qn.disabled,ce=new ln([X.ONE,X.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(Me,Ae,Fe){const Ce=Me.gl;Me.activeTexture.set(Ce.TEXTURE1),Me.viewport.set([0,0,Ae.width/4,Ae.height/4]);let Ke=Fe.heatmapFbo;if(Ke)Ce.bindTexture(Ce.TEXTURE_2D,Ke.colorAttachment.get()),Me.bindFramebuffer.set(Ke.framebuffer);else{const nt=Ce.createTexture();Ce.bindTexture(Ce.TEXTURE_2D,nt),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR),Ke=Fe.heatmapFbo=Me.createFramebuffer(Ae.width/4,Ae.height/4,!1,!1),function(Re,Je,st,at){var pt,wt;const xt=Re.gl,St=(pt=Re.HALF_FLOAT)!==null&&pt!==void 0?pt:xt.UNSIGNED_BYTE,Ut=(wt=Re.RGBA16F)!==null&&wt!==void 0?wt:xt.RGBA;xt.texImage2D(xt.TEXTURE_2D,0,Ut,Je.width/4,Je.height/4,0,xt.RGBA,St,null),at.colorAttachment.set(st)}(Me,Ae,nt,Ke)}})(D,_,A),D.clear({color:a.Color.transparent});for(let Me=0;Me<z.length;Me++){const Ae=z[Me];if(T.hasRenderableParent(Ae))continue;const Fe=T.getTile(Ae),Ce=Fe.getBucket(A);if(!Ce)continue;const Ke=Ce.programConfigurations.get(A.id),nt=_.useProgram("heatmap",Ke),{zoom:Re}=_.transform;nt.draw(D,X.TRIANGLES,Cn.disabled,K,ce,Kn.disabled,lc(Ae.posMatrix,Fe,Re,A.paint.get("heatmap-intensity")),null,A.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,A.paint,_.transform.zoom,Ke)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,X){const K=D.context,ce=K.gl,Me=X.heatmapFbo;if(!Me)return;K.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,Me.colorAttachment.get()),K.activeTexture.set(ce.TEXTURE1);let Ae=X.colorRampTexture;Ae||(Ae=X.colorRampTexture=new q(K,X.colorRamp,ce.RGBA)),Ae.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(K,ce.TRIANGLES,Cn.disabled,qn.disabled,D.colorModeForRenderPass(),Kn.disabled,((Fe,Ce,Ke,nt)=>{const Re=a.create();a.ortho(Re,0,Fe.width,Fe.height,0,0,1);const Je=Fe.context.gl;return{u_matrix:Re,u_world:[Je.drawingBufferWidth,Je.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ce.paint.get("heatmap-opacity")}})(D,X),null,X.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,X.paint,D.transform.zoom)}(_,A))})(r,u,f,m);break;case"line":(function(_,T,A,z){if(_.renderPass!=="translucent")return;const D=A.paint.get("line-opacity"),X=A.paint.get("line-width");if(D.constantOr(1)===0||X.constantOr(1)===0)return;const K=_.depthModeForSublayer(0,Cn.ReadOnly),ce=_.colorModeForRenderPass(),Me=A.paint.get("line-dasharray"),Ae=A.paint.get("line-pattern"),Fe=Ae.constantOr(1),Ce=A.paint.get("line-gradient"),Ke=A.getCrossfadeParameters(),nt=Fe?"linePattern":Me?"lineSDF":Ce?"lineGradient":"line",Re=_.context,Je=Re.gl;let st=!0;for(const at of z){const pt=T.getTile(at);if(Fe&&!pt.patternsLoaded())continue;const wt=pt.getBucket(A);if(!wt)continue;const xt=wt.programConfigurations.get(A.id),St=_.context.program.get(),Ut=_.useProgram(nt,xt),In=st||Ut.program!==St,Mt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(at),un=Ae.constantOr(null);if(un&&pt.imageAtlas){const wn=pt.imageAtlas,bn=wn.patternPositions[un.to.toString()],Pn=wn.patternPositions[un.from.toString()];bn&&Pn&&xt.setConstantPatternPositions(bn,Pn)}const Zt=Mt?at:null,ur=Fe?uc(_,pt,A,Ke,Zt):Me?Bs(_,pt,A,Me,Ke,Zt):Ce?rl(_,pt,A,wt.lineClipsArray.length,Zt):Ds(_,pt,A,Zt);if(Fe)Re.activeTexture.set(Je.TEXTURE0),pt.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),xt.updatePaintBuffers(Ke);else if(Me&&(In||_.lineAtlas.dirty))Re.activeTexture.set(Je.TEXTURE0),_.lineAtlas.bind(Re);else if(Ce){const wn=wt.gradients[A.id];let bn=wn.texture;if(A.gradientVersion!==wn.version){let Pn=256;if(A.stepInterpolant){const Sr=T.getSource().maxzoom,tr=at.canonical.z===Sr?Math.ceil(1<<_.transform.maxZoom-at.canonical.z):1;Pn=a.clamp(a.nextPowerOfTwo(wt.maxLineLength/a.EXTENT*1024*tr),256,Re.maxTextureSize)}wn.gradient=a.renderColorRamp({expression:A.gradientExpression(),evaluationKey:"lineProgress",resolution:Pn,image:wn.gradient||void 0,clips:wt.lineClipsArray}),wn.texture?wn.texture.update(wn.gradient):wn.texture=new q(Re,wn.gradient,Je.RGBA),wn.version=A.gradientVersion,bn=wn.texture}Re.activeTexture.set(Je.TEXTURE0),bn.bind(A.stepInterpolant?Je.NEAREST:Je.LINEAR,Je.CLAMP_TO_EDGE)}Ut.draw(Re,Je.TRIANGLES,K,_.stencilModeForClipping(at),ce,Kn.disabled,ur,Mt,A.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,A.paint,_.transform.zoom,xt,wt.layoutVertexBuffer2),st=!1}})(r,u,f,m);break;case"fill":(function(_,T,A,z){const D=A.paint.get("fill-color"),X=A.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const K=_.colorModeForRenderPass(),ce=A.paint.get("fill-pattern"),Me=_.opaquePassEnabledForLayer()&&!ce.constantOr(1)&&D.constantOr(a.Color.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===Me){const Ae=_.depthModeForSublayer(1,_.renderPass==="opaque"?Cn.ReadWrite:Cn.ReadOnly);Ta(_,T,A,z,Ae,K,!1)}if(_.renderPass==="translucent"&&A.paint.get("fill-antialias")){const Ae=_.depthModeForSublayer(A.getPaintProperty("fill-outline-color")?2:0,Cn.ReadOnly);Ta(_,T,A,z,Ae,K,!0)}})(r,u,f,m);break;case"fill-extrusion":(function(_,T,A,z){const D=A.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const X=new Cn(_.context.gl.LEQUAL,Cn.ReadWrite,_.depthRangeFor3D);if(D!==1||A.paint.get("fill-extrusion-pattern").constantOr(1))Gi(_,T,A,z,X,qn.disabled,ln.disabled),Gi(_,T,A,z,X,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const K=_.colorModeForRenderPass();Gi(_,T,A,z,X,qn.disabled,K)}}})(r,u,f,m);break;case"hillshade":(function(_,T,A,z){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,X=_.depthModeForSublayer(0,Cn.ReadOnly),K=_.colorModeForRenderPass(),[ce,Me]=_.renderPass==="translucent"?_.stencilConfigForOverlap(z):[{},z];for(const Ae of Me){const Fe=T.getTile(Ae);Fe.needsHillshadePrepare!==void 0&&Fe.needsHillshadePrepare&&_.renderPass==="offscreen"?Jr(_,Fe,A,X,qn.disabled,K):_.renderPass==="translucent"&&qo(_,Ae,Fe,A,X,ce[Ae.overscaledZ],K)}D.viewport.set([0,0,_.width,_.height])})(r,u,f,m);break;case"raster":(function(_,T,A,z){if(_.renderPass!=="translucent"||A.paint.get("raster-opacity")===0||!z.length)return;const D=_.context,X=D.gl,K=T.getSource(),ce=_.useProgram("raster"),Me=_.colorModeForRenderPass(),[Ae,Fe]=K instanceof Ct?[{},z]:_.stencilConfigForOverlap(z),Ce=Fe[Fe.length-1].overscaledZ,Ke=!_.options.moving;for(const nt of Fe){const Re=_.depthModeForSublayer(nt.overscaledZ-Ce,A.paint.get("raster-opacity")===1?Cn.ReadWrite:Cn.ReadOnly,X.LESS),Je=T.getTile(nt);Je.registerFadeDuration(A.paint.get("raster-fade-duration"));const st=T.findLoadedParent(nt,0),at=To(Je,st,T,A,_.transform,_.style.map.terrain);let pt,wt;const xt=A.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;D.activeTexture.set(X.TEXTURE0),Je.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(X.TEXTURE1),st?(st.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),pt=Math.pow(2,st.tileID.overscaledZ-Je.tileID.overscaledZ),wt=[Je.tileID.canonical.x*pt%1,Je.tileID.canonical.y*pt%1]):Je.texture.bind(xt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(nt),Ut=St?nt:null,In=Ut?Ut.posMatrix:_.transform.calculatePosMatrix(nt.toUnwrapped(),Ke),Mt=cu(In,wt||[0,0],pt||1,at,A);K instanceof Ct?ce.draw(D,X.TRIANGLES,Re,qn.disabled,Me,Kn.disabled,Mt,St,A.id,K.boundsBuffer,_.quadTriangleIndexBuffer,K.boundsSegments):ce.draw(D,X.TRIANGLES,Re,Ae[nt.overscaledZ],Me,Kn.disabled,Mt,St,A.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(r,u,f,m);break;case"background":(function(_,T,A,z){const D=A.paint.get("background-color"),X=A.paint.get("background-opacity");if(X===0)return;const K=_.context,ce=K.gl,Me=_.transform,Ae=Me.tileSize,Fe=A.paint.get("background-pattern");if(_.isPatternMissing(Fe))return;const Ce=!Fe&&D.a===1&&X===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Ce)return;const Ke=qn.disabled,nt=_.depthModeForSublayer(0,Ce==="opaque"?Cn.ReadWrite:Cn.ReadOnly),Re=_.colorModeForRenderPass(),Je=_.useProgram(Fe?"backgroundPattern":"background"),st=z||Me.coveringTiles({tileSize:Ae,terrain:_.style.map.terrain});Fe&&(K.activeTexture.set(ce.TEXTURE0),_.imageManager.bind(_.context));const at=A.getCrossfadeParameters();for(const pt of st){const wt=z?pt.posMatrix:_.transform.calculatePosMatrix(pt.toUnwrapped()),xt=Fe?Ns(wt,X,_,Fe,{tileID:pt,tileSize:Ae},at):fs(wt,X,D),St=_.style.map.terrain&&_.style.map.terrain.getTerrainData(pt);Je.draw(K,ce.TRIANGLES,nt,Ke,Re,Kn.disabled,xt,St,A.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(_,T,A){const z=_.context,D=A.implementation;if(_.renderPass==="offscreen"){const X=D.prerender;X&&(_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),X.call(D,z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),z.setColorMode(_.colorModeForRenderPass()),z.setStencilMode(qn.disabled);const X=D.renderingMode==="3d"?new Cn(_.context.gl.LEQUAL,Cn.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Cn.ReadOnly);z.setDepthMode(X),D.render(z.gl,_.transform.customLayerMatrix()),z.setDirty(),_.setBaseState(),z.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,u,f,m,_){if(!f[0]&&!f[1])return r;const T=_?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const D=Math.sin(T),X=Math.cos(T);f=[f[0]*X-f[1]*D,f[0]*D+f[1]*X]}const A=[_?f[0]:Xe(u,f[0],this.transform.zoom),_?f[1]:Xe(u,f[1],this.transform.zoom),0],z=new Float32Array(16);return a.translate(z,r,A),z}saveTileTexture(r){const u=this._tileTextures[r.size[0]];u?u.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const u=this._tileTextures[r];return u&&u.length>0?u.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const u=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!u||!f}useProgram(r,u){this.cache=this.cache||{};const f=r+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new gr(this.context,Zo[r],u,Pi[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:u}=this.context.gl;return this.width!==r||this.height!==u}}class po{constructor(r,u){this.points=r,this.planes=u}static fromInvProjectionMatrix(r,u,f){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const z=1/(A=a.transformMat4([],A,r))[3]/u*m;return a.mul$1(A,A,[z,z,1/A[3],z])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const z=function(ce,Me){var Ae=Me[0],Fe=Me[1],Ce=Me[2],Ke=Ae*Ae+Fe*Fe+Ce*Ce;return Ke>0&&(Ke=1/Math.sqrt(Ke)),ce[0]=Me[0]*Ke,ce[1]=Me[1]*Ke,ce[2]=Me[2]*Ke,ce}([],function(ce,Me,Ae){var Fe=Me[0],Ce=Me[1],Ke=Me[2],nt=Ae[0],Re=Ae[1],Je=Ae[2];return ce[0]=Ce*Je-Ke*Re,ce[1]=Ke*nt-Fe*Je,ce[2]=Fe*Re-Ce*nt,ce}([],B([],_[A[0]],_[A[1]]),B([],_[A[2]],_[A[1]]))),D=-((X=z)[0]*(K=_[A[1]])[0]+X[1]*K[1]+X[2]*K[2]);var X,K;return z.concat(D)});return new po(_,T)}}class Kr{constructor(r,u){this.min=r,this.max=u,this.center=function(f,m,_){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,_){return f[0]=m[0]+_[0],f[1]=m[1]+_[1],f[2]=m[2]+_[2],f}([],this.min,this.max))}quadrant(r){const u=[r%2==0,r<2],f=ie(this.min),m=ie(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],m[_]=u[_]?this.center[_]:this.max[_];return m[2]=this.max[2],new Kr(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const _=r.planes[m];let T=0;for(let A=0;A<u.length;A++)a.dot(_,u[A])>=0&&T++;if(T===0)return 0;T!==u.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let _=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let A=0;A<r.points.length;A++){const z=r.points[A][m]-this.min[m];_=Math.min(_,z),T=Math.max(T,z)}if(T<0||_>this.max[m]-this.min[m])return 0}return 1}}class qs{constructor(r=0,u=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=u,this.left=f,this.right=m}interpolate(r,u,f){return u.top!=null&&r.top!=null&&(this.top=a.interpolate.number(r.top,u.top,f)),u.bottom!=null&&r.bottom!=null&&(this.bottom=a.interpolate.number(r.bottom,u.bottom,f)),u.left!=null&&r.left!=null&&(this.left=a.interpolate.number(r.left,u.left,f)),u.right!=null&&r.right!=null&&(this.right=a.interpolate.number(r.right,u.right,f)),this}getCenter(r,u){const f=a.clamp((this.left+r-this.right)/2,0,r),m=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.Point(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new qs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Mi{constructor(r,u,f,m,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=r||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const r=new Mi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this._minEleveationForCurrentTile=r._minEleveationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const u=-a.wrap(r,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,_){var T=m[0],A=m[1],z=m[2],D=m[3],X=Math.sin(_),K=Math.cos(_);f[0]=T*K+z*X,f[1]=A*K+D*X,f[2]=T*-X+z*K,f[3]=A*-X+D*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const u=a.clamp(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const u=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,u,f){this._unmodified=!1,this._edgeInsets.interpolate(r,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const u=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(r){const u=[new a.UnwrappedTileID(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new a.Point(0,0)),m=this.pointCoordinate(new a.Point(this.width,0)),_=this.pointCoordinate(new a.Point(this.width,this.height)),T=this.pointCoordinate(new a.Point(0,this.height)),A=Math.floor(Math.min(f.x,m.x,_.x,T.x)),z=Math.floor(Math.max(f.x,m.x,_.x,T.x)),D=1;for(let X=A-D;X<=z+D;X++)X!==0&&u.push(new a.UnwrappedTileID(X,r))}return u}coveringTiles(r){var u,f;let m=this.coveringZoomLevel(r);const _=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),A=a.MercatorCoordinate.fromLngLat(this.center),z=Math.pow(2,m),D=[z*T.x,z*T.y,0],X=[z*A.x,z*A.y,0],K=po.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let ce=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ce=m);const Me=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Ae=Re=>({aabb:new Kr([Re*z,0,0],[(Re+1)*z,z,0]),zoom:0,x:0,y:0,wrap:Re,fullyVisible:!1}),Fe=[],Ce=[],Ke=m,nt=r.reparseOverscaled?_:m;if(this._renderWorldCopies)for(let Re=1;Re<=3;Re++)Fe.push(Ae(-Re)),Fe.push(Ae(Re));for(Fe.push(Ae(0));Fe.length>0;){const Re=Fe.pop(),Je=Re.x,st=Re.y;let at=Re.fullyVisible;if(!at){const Ut=Re.aabb.intersects(K);if(Ut===0)continue;at=Ut===2}const pt=r.terrain?D:X,wt=Re.aabb.distanceX(pt),xt=Re.aabb.distanceY(pt),St=Math.max(Math.abs(wt),Math.abs(xt));if(Re.zoom===Ke||St>Me+(1<<Ke-Re.zoom)-2&&Re.zoom>=ce){const Ut=Ke-Re.zoom,In=D[0]-.5-(Je<<Ut),Mt=D[1]-.5-(st<<Ut);Ce.push({tileID:new a.OverscaledTileID(Re.zoom===Ke?nt:Re.zoom,Re.wrap,Re.zoom,Je,st),distanceSq:S([X[0]-.5-Je,X[1]-.5-st]),tileDistanceToCamera:Math.sqrt(In*In+Mt*Mt)})}else for(let Ut=0;Ut<4;Ut++){const In=(Je<<1)+Ut%2,Mt=(st<<1)+(Ut>>1),un=Re.zoom+1;let Zt=Re.aabb.quadrant(Ut);if(r.terrain){const ur=new a.OverscaledTileID(un,Re.wrap,un,In,Mt),wn=r.terrain.getMinMaxElevation(ur),bn=(u=wn.minElevation)!==null&&u!==void 0?u:this.elevation,Pn=(f=wn.maxElevation)!==null&&f!==void 0?f:this.elevation;Zt=new Kr([Zt.min[0],Zt.min[1],bn],[Zt.max[0],Zt.max[1],Pn])}Fe.push({aabb:Zt,zoom:un,x:In,y:Mt,wrap:Re.wrap,fullyVisible:at})}}return Ce.sort((Re,Je)=>Re.distanceSq-Je.distanceSq).map(Re=>Re.tileID)}resize(r,u){this.width=r,this.height=u,this.pixelsToGLUnits=[2/r,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const u=a.clamp(r.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(r.lng)*this.worldSize,a.mercatorYfromLat(u)*this.worldSize)}unproject(r){return new a.MercatorCoordinate(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const u=this.pointLocation(this.centerPoint,r),f=r.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const m=this.getCameraPosition(),_=a.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),T=a.MercatorCoordinate.fromLngLat(u,f),A=_.x-T.x,z=_.y-T.y,D=_.z-T.z,X=Math.sqrt(A*A+z*z+D*D),K=this.scaleZoom(this.cameraToCenterDistance/X/this.tileSize);this._elevation=f,this._center=u,this.zoom=K}setLocationAtPoint(r,u){const f=this.pointCoordinate(u),m=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(r),T=new a.MercatorCoordinate(_.x-(f.x-m.x),_.y-(f.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,u){return u?this.coordinatePoint(this.locationCoordinate(r),u.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,u){return this.coordinateLocation(this.pointCoordinate(r,u))}locationCoordinate(r){return a.MercatorCoordinate.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,u){if(u){const ce=u.pointCoordinate(r);if(ce!=null)return ce}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];a.transformMat4(f,f,this.pixelMatrixInverse),a.transformMat4(m,m,this.pixelMatrixInverse);const _=f[3],T=m[3],A=f[1]/_,z=m[1]/T,D=f[2]/_,X=m[2]/T,K=D===X?0:(0-D)/(X-D);return new a.MercatorCoordinate(a.interpolate.number(f[0]/_,m[0]/T,K)/this.worldSize,a.interpolate.number(A,z,K)/this.worldSize)}coordinatePoint(r,u=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,u,1];return a.transformMat4(m,m,f),new a.Point(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Pe().extend(this.pointLocation(new a.Point(0,r))).extend(this.pointLocation(new a.Point(this.width,r))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(r,u=!1){const f=r.key,m=u?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const _=r.canonical,T=this.worldSize/this.zoomScale(_.z),A=_.x+Math.pow(2,_.z)*r.wrap,z=a.identity(new Float64Array(16));return a.translate(z,z,[A*T,_.y*T,0]),a.scale(z,z,[T/a.EXTENT,T/a.EXTENT,1]),a.multiply(z,u?this.alignedProjMatrix:this.projMatrix,z),m[f]=new Float32Array(z),m[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r,u,f,m,_=-90,T=90,A=-180,z=180;const D=this.size,X=this._unmodified;if(this.latRange){const Me=this.latRange;_=a.mercatorYfromLat(Me[1])*this.worldSize,T=a.mercatorYfromLat(Me[0])*this.worldSize,r=T-_<D.y?D.y/(T-_):0}if(this.lngRange){const Me=this.lngRange;A=a.wrap(a.mercatorXfromLng(Me[0])*this.worldSize,0,this.worldSize),z=a.wrap(a.mercatorXfromLng(Me[1])*this.worldSize,0,this.worldSize),z<A&&(z+=this.worldSize),u=z-A<D.x?D.x/(z-A):0}const K=this.point,ce=Math.max(u||0,r||0);if(ce)return this.center=this.unproject(new a.Point(u?(z+A)/2:K.x,r?(T+_)/2:K.y)),this.zoom+=this.scaleZoom(ce),this._unmodified=X,void(this._constraining=!1);if(this.latRange){const Me=K.y,Ae=D.y/2;Me-Ae<_&&(m=_+Ae),Me+Ae>T&&(m=T-Ae)}if(this.lngRange){const Me=(A+z)/2,Ae=a.wrap(K.x,Me-this.worldSize/2,Me+this.worldSize/2),Fe=D.x/2;Ae-Fe<A&&(f=A+Fe),Ae+Fe>z&&(f=z-Fe)}f===void 0&&m===void 0||(this.center=this.unproject(new a.Point(f!==void 0?f:K.x,m!==void 0?m:K.y)).wrap()),this._unmodified=X,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=a.identity(new Float64Array(16));a.scale(m,m,[this.width/2,-this.height/2,1]),a.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=a.identity(new Float64Array(16)),a.scale(m,m,[1,-1,1]),a.translate(m,m,[-1,-1,0]),a.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this._minEleveationForCurrentTile),A=_-T*this._pixelPerMeter/Math.cos(this._pitch),z=T<0?A:_,D=Math.PI/2+this._pitch,X=this._fov*(.5+r.y/this.height),K=Math.sin(X)*z/Math.sin(a.clamp(Math.PI-D-X,.01,Math.PI-.01)),ce=this.getHorizon(),Me=2*Math.atan(ce/this.cameraToCenterDistance)*(.5+r.y/(2*ce)),Ae=Math.sin(Me)*z/Math.sin(a.clamp(Math.PI-D-Me,.01,Math.PI-.01)),Fe=Math.min(K,Ae),Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*Fe+z),Ke=this.height/50;m=new Float64Array(16),a.perspective(m,this._fov,this.width/this.height,Ke,Ce),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,a.scale(m,m,[1,-1,1]),a.translate(m,m,[0,0,-this.cameraToCenterDistance]),a.rotateX(m,m,this._pitch),a.rotateZ(m,m,this.angle),a.translate(m,m,[-u,-f,0]),this.mercatorMatrix=a.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),a.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,m),a.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=a.invert([],m),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const nt=this.width%2/2,Re=this.height%2/2,Je=Math.cos(this.angle),st=Math.sin(this.angle),at=u-Math.round(u)+Je*nt+st*Re,pt=f-Math.round(f)+Je*Re+st*nt,wt=new Float64Array(m);if(a.translate(wt,wt,[at>.5?at-1:at,pt>.5?pt-1:pt,0]),this.alignedProjMatrix=wt,m=a.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new a.Point(0,0)),u=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,r))}getCameraQueryGeometry(r){const u=this.getCameraPoint();if(r.length===1)return[r[0],u];{let f=u.x,m=u.y,_=u.x,T=u.y;for(const A of r)f=Math.min(f,A.x),m=Math.min(m,A.y),_=Math.max(_,A.x),T=Math.max(T,A.y);return[new a.Point(f,m),new a.Point(_,m),new a.Point(_,T),new a.Point(f,T),new a.Point(f,m)]}}}function wl(g,r){let u,f=!1,m=null,_=null;const T=()=>{m=null,f&&(g.apply(_,u),m=setTimeout(T,r),f=!1)};return(...A)=>(f=!0,_=this,u=A,m||T(),m)}class Ks{constructor(r){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=wl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,m),T=Math.round(u.lng*_)/_,A=Math.round(u.lat*_)/_,z=this._map.getBearing(),D=this._map.getPitch();let X="";if(X+=r?`/${T}/${A}/${f}`:`${f}/${A}/${T}`,(z||D)&&(X+="/"+Math.round(10*z)/10),D&&(X+=`/${Math.round(D)}`),this._hashName){const K=this._hashName;let ce=!1;const Me=window.location.hash.slice(1).split("&").map(Ae=>{const Fe=Ae.split("=")[0];return Fe===K?(ce=!0,`${Fe}=${X}`):Ae}).filter(Ae=>Ae);return ce||Me.push(`${K}=${X}`),`#${Me.join("&")}`}return`#${X}`}}const Co={linearity:.3,easing:a.bezier(0,0,.3,1)},Aa=a.extend({deceleration:2500,maxSpeed:1400},Co),bu=a.extend({deceleration:20,maxSpeed:1400},Co),Eu=a.extend({deceleration:1e3,maxSpeed:360},Co),Su=a.extend({deceleration:1e3,maxSpeed:90},Co);class ${constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,u=a.browser.now();for(;r.length>0&&u-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const _=De(u.pan.mag(),f,a.extend({},Aa,r||{}));m.offset=u.pan.mult(_.amount/u.pan.mag()),m.center=this._map.transform.center,ge(m,_)}if(u.zoom){const _=De(u.zoom,f,bu);m.zoom=this._map.transform.zoom+_.amount,ge(m,_)}if(u.bearing){const _=De(u.bearing,f,Eu);m.bearing=this._map.transform.bearing+a.clamp(_.amount,-179,179),ge(m,_)}if(u.pitch){const _=De(u.pitch,f,Su);m.pitch=this._map.transform.pitch+_.amount,ge(m,_)}if(m.zoom||m.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;m.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),a.extend(m,{noMoveStart:!0})}}function ge(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function De(g,r,u){const{maxSpeed:f,linearity:m,deceleration:_}=u,T=a.clamp(g*m/(r/1e3),-f,f),A=Math.abs(T)/(_*m);return{easing:u.easing,duration:1e3*A,amount:T*(A/2)}}class ot extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f,m={}){const _=w.mousePos(u.getCanvasContainer(),f),T=u.unproject(_);super(r,a.extend({point:_,lngLat:T,originalEvent:f},m)),this._defaultPrevented=!1,this.target=u}}class Lt extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){const m=r==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),m),T=_.map(z=>u.unproject(z)),A=_.reduce((z,D,X,K)=>z.add(D.div(K.length)),new a.Point(0,0));super(r,{points:_,point:A,lngLats:T,lngLat:u.unproject(A),originalEvent:f}),this._defaultPrevented=!1}}class Tt extends a.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,u,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Gt{constructor(r,u){this._map=r,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Tt(r.type,this._map,r))}mousedown(r,u){return this._mousedownPos=u,this._firePreventable(new ot(r.type,this._map,r))}mouseup(r){this._map.fire(new ot(r.type,this._map,r))}click(r,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ot(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ot(r.type,this._map,r))}mouseover(r){this._map.fire(new ot(r.type,this._map,r))}mouseout(r){this._map.fire(new ot(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Lt(r.type,this._map,r))}touchmove(r){this._map.fire(new Lt(r.type,this._map,r))}touchend(r){this._map.fire(new Lt(r.type,this._map,r))}touchcancel(r){this._map.fire(new Lt(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class qt{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ot(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ot("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ot(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(a.Point.convert(r),this._map.terrain)}}class Bn{constructor(r,u){this._map=r,this._tr=new gn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,u){this.isEnabled()&&r.shiftKey&&r.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(r,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const _=Math.min(m.x,f.x),T=Math.max(m.x,f.x),A=Math.min(m.y,f.y),z=Math.max(m.y,f.y);w.setTransform(this._box,`translate(${_}px,${A}px)`),this._box.style.width=T-_+"px",this._box.style.height=z-A+"px"}mouseupWindow(r,u){if(!this._active||r.button!==0)return;const f=this._startPos,m=u;if(this.reset(),w.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:r})),{cameraAnimation:_=>_.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,u){return this._map.fire(new a.Event(r,{originalEvent:u}))}}function Dn(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);const u={};for(let f=0;f<g.length;f++)u[g[f].identifier]=r[f];return u}class Nn{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const _=new a.Point(0,0);for(const T of m)_._add(T);return _.div(m.length)}(u),this.touches=Dn(f,u)))}touchmove(r,u,f){if(this.aborted||!this.centroid)return;const m=Dn(f,u);for(const _ in this.touches){const T=m[_];(!T||T.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(r,u,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class $n{constructor(r){this.singleTap=new Nn(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,u,f){this.singleTap.touchstart(r,u,f)}touchmove(r,u,f){this.singleTap.touchmove(r,u,f)}touchend(r,u,f){const m=this.singleTap.touchend(r,u,f);if(m){const _=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(_&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Nr{constructor(r){this._tr=new gn(r),this._zoomIn=new $n({numTouches:1,numTaps:2}),this._zoomOut=new $n({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,u,f){this._zoomIn.touchstart(r,u,f),this._zoomOut.touchstart(r,u,f)}touchmove(r,u,f){this._zoomIn.touchmove(r,u,f),this._zoomOut.touchmove(r,u,f)}touchend(r,u,f){const m=this._zoomIn.touchend(r,u,f),_=this._zoomOut.touchend(r,u,f),T=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:r})}):_?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(_)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hn{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const u=this._moveFunction(...r);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(r,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=u.length?u[0]:u;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&w.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ki={0:1,2:2};class Zi{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const u=w.mouseButton(r);this._eventButton=u}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(u,f){const m=ki[f];return u.buttons===void 0||(u.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return w.mouseButton(r)===this._eventButton}}class Ko{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const bl=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=function(r){r.preventDefault()}},Ys=({enable:g,clickTolerance:r,bearingDegreesPerPixelMoved:u=.8})=>{const f=new Zi({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new Hn({clickTolerance:r,move:(m,_)=>({bearingDelta:(_.x-m.x)*u}),moveStateManager:f,enable:g,assignEvents:bl})},Ao=({enable:g,clickTolerance:r,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new Zi({checkCorrectEvent:m=>w.mouseButton(m)===0&&m.ctrlKey||w.mouseButton(m)===2});return new Hn({clickTolerance:r,move:(m,_)=>({pitchDelta:(_.y-m.y)*u}),moveStateManager:f,enable:g,assignEvents:bl})};class Js{constructor(r,u){this._minTouches=r.cooperativeGestures?2:1,this._clickTolerance=r.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.Point(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(r,u,f){return this._calculateTransform(r,u,f)}touchmove(r,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(r,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return r.preventDefault(),this._calculateTransform(r,u,f)}touchend(r,u,f){this._calculateTransform(r,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,u,f){f.length>0&&(this._active=!0);const m=Dn(f,u),_=new a.Point(0,0),T=new a.Point(0,0);let A=0;for(const D in m){const X=m[D],K=this._touches[D];K&&(_._add(X),T._add(X.sub(K)),A++,m[D]=X)}if(this._touches=m,A<this._minTouches||!T.mag())return;const z=T.div(A);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(A),panDelta:z}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(r,u,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,_]=this._firstTwoTouches,T=Tu(f,u,m),A=Tu(f,u,_);if(!T||!A)return;const z=this._aroundCenter?null:T.add(A).div(2);return this._move([T,A],z,r)}touchend(r,u,f){if(!this._firstTwoTouches)return;const[m,_]=this._firstTwoTouches,T=Tu(f,u,m),A=Tu(f,u,_);T&&A||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Tu(g,r,u){for(let f=0;f<g.length;f++)if(g[f].identifier===u)return r[f]}function El(g,r){return Math.log(g/r)/Math.LN2}class Cu extends Rt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,u){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(El(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:El(this._distance,f),pinchAround:u}}}function Uh(g,r){return 180*g.angleWith(r)/Math.PI}class Ot extends Rt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,u){const f=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Uh(this._vector,f),pinchAround:u}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const u=25/(Math.PI*this._minDiameter)*360,f=Uh(r,this._startVector);return Math.abs(f)<u}}function Au(g){return Math.abs(g.y)>Math.abs(g.x)}class Zg extends Rt{constructor(r){super(),this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,u,f){super.touchstart(r,u,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Au(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),_=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,_,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(r,u,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,_=u.mag()>=2;if(!m&&!_)return;if(!m||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const T=r.y>0==u.y>0;return Au(r)&&Au(u)&&T}}const Wg={panStep:100,bearingStep:15,pitchStep:10};class $h{constructor(r){this._tr=new gn(r);const u=Wg;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let u=0,f=0,m=0,_=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),_=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),_=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:A=>{const z=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Nd,zoom:u?Math.round(z.zoom)+u*(r.shiftKey?2:1):z.zoom,bearing:z.bearing+f*this._bearingStep,pitch:z.pitch+m*this._pitchStep,offset:[-_*this._panStep,-T*this._panStep],center:z.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nd(g){return g*(2-g)}const Vh=4.000244140625;class Hg{constructor(r,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new gn(r),this._el=r.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!r[this._map._metaKey])return;r.preventDefault()}let u=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=a.browser.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Vh==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),r.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=r,this._delta-=u,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,r),f=this._tr;this._around=a.LngLat.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Vh?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&z!==0&&(z=1/z);const D=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(D*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let _,T=!1;if(this._type==="wheel"&&f&&m){const A=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),z=m(A);_=a.interpolate.number(f,u,z),A<1?this._frameId||(this._frameId=!0):T=!0}else _=u,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:_-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let u=a.defaultEasing;if(this._prevEase){const f=this._prevEase,m=(a.browser.now()-f.start)/f.duration,_=f.easing(m+.01)-f.easing(m),T=.27/Math.sqrt(_*_+1e-4)*.01,A=Math.sqrt(.0729-T*T);u=a.bezier(T,A,.25,1)}return this._prevEase={start:a.browser.now(),duration:r,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xg{constructor(r,u){this._clickZoom=r,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gh{constructor(r){this._tr=new gn(r),this.reset()}reset(){this._active=!1}dblclick(r,u){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zh{constructor(){this._tap=new $n({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,u,f){if(!this._swipePoint)if(this._tapTime){const m=u[0],_=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;_&&T?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,u,f)}touchmove(r,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=u[0],_=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(r,u,f)}touchend(r,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,u,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wh{constructor(r,u,f){this._el=r,this._mousePan=u,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hh{constructor(r,u,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Li{constructor(r,u,f,m){this._el=r,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Io=g=>g.zoom||g.drag||g.pitch||g.rotate;class Ud extends a.Event{}function Iu(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Xh{constructor(r,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,_)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,A={needsRenderFrame:!1},z={},D={},X=m.touches,K=X?this._getMapTouches(X):void 0,ce=K?w.touchPos(this._el,K):w.mousePos(this._el,m);for(const{handlerName:Fe,handler:Ce,allowed:Ke}of this._handlers){if(!Ce.isEnabled())continue;let nt;this._blockedByActive(D,Ke,Fe)?Ce.reset():Ce[_||m.type]&&(nt=Ce[_||m.type](m,ce,K),this.mergeHandlerResult(A,z,nt,Fe,T),nt&&nt.needsRenderFrame&&this._triggerRenderFrame()),(nt||Ce.isActive())&&(D[Fe]=Ce)}const Me={};for(const Fe in this._previousActiveHandlers)D[Fe]||(Me[Fe]=T);this._previousActiveHandlers=D,(Object.keys(Me).length||Iu(A))&&(this._changes.push([A,z,Me]),this._triggerRenderFrame()),(Object.keys(D).length||Iu(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ae}=A;Ae&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ae(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $(r),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,_,T]of this._listeners)w.addEventListener(m,_,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,u,f]of this._listeners)w.removeEventListener(r,u,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Gt(u,r));const m=u.boxZoom=new Bn(u,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const _=new Nr(u),T=new Gh(u);u.doubleClickZoom=new Xg(T,_),this._add("tapZoom",_),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&u.doubleClickZoom.enable();const A=new Zh;this._add("tapDragZoom",A);const z=u.touchPitch=new Zg(u);this._add("touchPitch",z),r.interactive&&r.touchPitch&&u.touchPitch.enable(r.touchPitch);const D=Ys(r),X=Ao(r);u.dragRotate=new Hh(r,D,X),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]),r.interactive&&r.dragRotate&&u.dragRotate.enable();const K=(({enable:Ke,clickTolerance:nt})=>{const Re=new Zi({checkCorrectEvent:Je=>w.mouseButton(Je)===0&&!Je.ctrlKey});return new Hn({clickTolerance:nt,move:(Je,st)=>({around:st,panDelta:st.sub(Je)}),activateOnStart:!0,moveStateManager:Re,enable:Ke,assignEvents:bl})})(r),ce=new Js(r,u);u.dragPan=new Wh(f,K,ce),this._add("mousePan",K),this._add("touchPan",ce,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&u.dragPan.enable(r.dragPan);const Me=new Ot,Ae=new Cu;u.touchZoomRotate=new Li(f,Ae,Me,A),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&u.touchZoomRotate.enable(r.touchZoomRotate);const Fe=u.scrollZoom=new Hg(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Fe,["mousePan"]),r.interactive&&r.scrollZoom&&u.scrollZoom.enable(r.scrollZoom);const Ce=u.keyboard=new $h(u);this._add("keyboard",Ce),r.interactive&&r.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new qt(u))}_add(r,u,f){this._handlers.push({handlerName:r,handler:u,allowed:f}),this._handlersById[r]=u}stop(r){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Io(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,u,f){for(const m in r)if(m!==f&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const u=[];for(const f of r)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(r,u,f,m,_){if(!f)return;a.extend(r,f);const T={handlerName:m,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=T),f.panDelta!==void 0&&(u.drag=T),f.pitchDelta!==void 0&&(u.pitch=T),f.bearingDelta!==void 0&&(u.rotate=T)}_applyChanges(){const r={},u={},f={};for(const[m,_,T]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new a.Point(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),a.extend(u,_),a.extend(f,T);this._updateMapTransform(r,u,f),this._changes=[]}_updateMapTransform(r,u,f){const m=this._map,_=m._getTransformForUpdate(),T=m.terrain;if(!(Iu(r)||T&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:A,zoomDelta:z,bearingDelta:D,pitchDelta:X,around:K,pinchAround:ce}=r;ce!==void 0&&(K=ce),m._stop(!0),K=K||m.transform.centerPoint;const Me=_.pointLocation(A?K.sub(A):K);D&&(_.bearing+=D),X&&(_.pitch+=X),z&&(_.zoom+=z),T?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(A)):_.setLocationAtPoint(Me,K):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(Me,K),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(m.terrain)})):_.setLocationAtPoint(Me,K),m._applyUpdatedTransform(_),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(u,f,!0)}_fireEvents(r,u,f){const m=Io(this._eventsInProgress),_=Io(r),T={};for(const X in r){const{originalEvent:K}=r[X];this._eventsInProgress[X]||(T[`${X}start`]=K),this._eventsInProgress[X]=r[X]}!m&&_&&this._fireEvent("movestart",_.originalEvent);for(const X in T)this._fireEvent(X,T[X]);_&&this._fireEvent("move",_.originalEvent);for(const X in r){const{originalEvent:K}=r[X];this._fireEvent(X,K)}const A={};let z;for(const X in this._eventsInProgress){const{handlerName:K,originalEvent:ce}=this._eventsInProgress[X];this._handlersById[K].isActive()||(delete this._eventsInProgress[X],z=u[K]||ce,A[`${X}end`]=z)}for(const X in A)this._fireEvent(X,A[X]);const D=Io(this._eventsInProgress);if(f&&(m||_)&&!D){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=ce=>ce!==0&&-this._bearingSnap<ce&&ce<this._bearingSnap;!X||!X.essential&&a.browser.prefersReducedMotion?(this._map.fire(new a.Event("moveend",{originalEvent:z})),K(this._map.getBearing())&&this._map.resetNorth()):(K(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:z})),this._updatingCamera=!1}}_fireEvent(r,u){this._map.fire(new a.Event(r,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Ud("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class qh extends a.Evented{constructor(r,u){super(),this._renderFrameCallback=()=>{const f=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(r,u){return this.jumpTo({center:r},u)}panBy(r,u,f){return r=a.Point.convert(r).mult(-1),this.panTo(this.transform.center,a.extend({offset:r},u),f)}panTo(r,u,f){return this.easeTo(a.extend({center:r},u),f)}getZoom(){return this.transform.zoom}setZoom(r,u){return this.jumpTo({zoom:r},u),this}zoomTo(r,u,f){return this.easeTo(a.extend({zoom:r},u),f)}zoomIn(r,u){return this.zoomTo(this.getZoom()+1,r,u),this}zoomOut(r,u){return this.zoomTo(this.getZoom()-1,r,u),this}getBearing(){return this.transform.bearing}setBearing(r,u){return this.jumpTo({bearing:r},u),this}getPadding(){return this.transform.padding}setPadding(r,u){return this.jumpTo({padding:r},u),this}rotateTo(r,u,f){return this.easeTo(a.extend({bearing:r},u),f)}resetNorth(r,u){return this.rotateTo(0,a.extend({duration:1e3},r),u),this}resetNorthPitch(r,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},r),u),this}snapToNorth(r,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,u):this}getPitch(){return this.transform.pitch}setPitch(r,u){return this.jumpTo({pitch:r},u),this}cameraForBounds(r,u){r=Pe.convert(r);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,u)}_cameraForBoxAndBearing(r,u,f,m){const _={top:0,bottom:0,right:0,left:0};if(typeof(m=a.extend({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const st=m.padding;m.padding={top:st,bottom:st,right:st,left:st}}m.padding=a.extend(_,m.padding);const T=this.transform,A=T.padding,z=T.project(a.LngLat.convert(r)),D=T.project(a.LngLat.convert(u)),X=z.rotate(-f*Math.PI/180),K=D.rotate(-f*Math.PI/180),ce=new a.Point(Math.max(X.x,K.x),Math.max(X.y,K.y)),Me=new a.Point(Math.min(X.x,K.x),Math.min(X.y,K.y)),Ae=ce.sub(Me),Fe=(T.width-(A.left+A.right+m.padding.left+m.padding.right))/Ae.x,Ce=(T.height-(A.top+A.bottom+m.padding.top+m.padding.bottom))/Ae.y;if(Ce<0||Fe<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ke=Math.min(T.scaleZoom(T.scale*Math.min(Fe,Ce)),m.maxZoom),nt=a.Point.convert(m.offset),Re=new a.Point((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(f*Math.PI/180),Je=nt.add(Re).mult(T.scale/T.zoomScale(Ke));return{center:T.unproject(z.add(D).div(2).sub(Je)),zoom:Ke,bearing:f}}fitBounds(r,u,f){return this._fitInternal(this.cameraForBounds(r,u),u,f)}fitScreenCoordinates(r,u,f,m,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(r)),this.transform.pointLocation(a.Point.convert(u)),f,m),m,_)}_fitInternal(r,u,f){return r?(delete(u=a.extend(r,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(r,u){this.stop();const f=this._getTransformForUpdate();let m=!1,_=!1,T=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=a.LngLat.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(_=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(T=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),m&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),_&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),T&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))}calculateCameraOptionsFromTo(r,u,f,m=0){const _=a.MercatorCoordinate.fromLngLat(r,u),T=a.MercatorCoordinate.fromLngLat(f,m),A=T.x-_.x,z=T.y-_.y,D=T.z-_.z,X=Math.hypot(A,z,D);if(X===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(A,z),ce=this.transform.scaleZoom(this.transform.cameraToCenterDistance/X/this.transform.tileSize),Me=180*Math.atan2(A,-z)/Math.PI;let Ae=180*Math.acos(K/X)/Math.PI;return Ae=D<0?90-Ae:90+Ae,{center:T.toLngLat(),zoom:ce,pitch:Ae,bearing:Me}}easeTo(r,u){this._stop(!1,r.easeId),((r=a.extend({offset:[0,0],duration:500,easing:a.defaultEasing},r)).animate===!1||!r.essential&&a.browser.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),A=this.getPadding(),z="zoom"in r?+r.zoom:m,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,X="pitch"in r?+r.pitch:T,K="padding"in r?r.padding:f.padding,ce=a.Point.convert(r.offset);let Me=f.centerPoint.add(ce);const Ae=f.pointLocation(Me),Fe=a.LngLat.convert(r.center||Ae);this._normalizeCenter(Fe);const Ce=f.project(Ae),Ke=f.project(Fe).sub(Ce),nt=f.zoomScale(z-m);let Re,Je;r.around&&(Re=a.LngLat.convert(r.around),Je=f.locationPoint(Re));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||z!==m,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||X!==T,this._padding=!f.isPaddingEqual(K),this._easeId=r.easeId,this._prepareEase(u,r.noMoveStart,st),this.terrain&&this._prepareElevation(Fe),this._ease(at=>{if(this._zooming&&(f.zoom=a.interpolate.number(m,z,at)),this._rotating&&(f.bearing=a.interpolate.number(_,D,at)),this._pitching&&(f.pitch=a.interpolate.number(T,X,at)),this._padding&&(f.interpolatePadding(A,K,at),Me=f.centerPoint.add(ce)),this.terrain&&!r.freezeElevation&&this._updateElevation(at),Re)f.setLocationAtPoint(Re,Je);else{const pt=f.zoomScale(f.zoom-m),wt=z>m?Math.min(2,nt):Math.max(.5,nt),xt=Math.pow(wt,1-at),St=f.unproject(Ce.add(Ke.mult(at*xt)).mult(pt));f.setLocationAtPoint(f.renderWorldCopies?St.wrap():St,Me)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},at=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,at)},r),this}_prepareEase(r,u,f={}){this._moving=!0,u||f.moving||this.fire(new a.Event("movestart",r)),this._zooming&&!f.zooming&&this.fire(new a.Event("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new a.Event("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new a.Event("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(u-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=u}this.transform.elevation=a.interpolate.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const u=r.clone(),{center:f,zoom:m,pitch:_,bearing:T,elevation:A}=this.transformCameraUpdate(u);f&&(u.center=f),m!==void 0&&(u.zoom=m),_!==void 0&&(u.pitch=_),T!==void 0&&(u.bearing=T),A!==void 0&&(u.elevation=A),this.transform.apply(u)}_fireMoveEvents(r){this.fire(new a.Event("move",r)),this._zooming&&this.fire(new a.Event("zoom",r)),this._rotating&&this.fire(new a.Event("rotate",r)),this._pitching&&this.fire(new a.Event("pitch",r))}_afterEase(r,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,m=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new a.Event("zoomend",r)),m&&this.fire(new a.Event("rotateend",r)),_&&this.fire(new a.Event("pitchend",r)),this.fire(new a.Event("moveend",r))}flyTo(r,u){if(!r.essential&&a.browser.prefersReducedMotion){const Zt=a.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Zt,u)}this.stop(),r=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.defaultEasing},r);const f=this._getTransformForUpdate(),m=this.getZoom(),_=this.getBearing(),T=this.getPitch(),A=this.getPadding(),z="zoom"in r?a.clamp(+r.zoom,f.minZoom,f.maxZoom):m,D="bearing"in r?this._normalizeBearing(r.bearing,_):_,X="pitch"in r?+r.pitch:T,K="padding"in r?r.padding:f.padding,ce=f.zoomScale(z-m),Me=a.Point.convert(r.offset);let Ae=f.centerPoint.add(Me);const Fe=f.pointLocation(Ae),Ce=a.LngLat.convert(r.center||Fe);this._normalizeCenter(Ce);const Ke=f.project(Fe),nt=f.project(Ce).sub(Ke);let Re=r.curve;const Je=Math.max(f.width,f.height),st=Je/ce,at=nt.mag();if("minZoom"in r){const Zt=a.clamp(Math.min(r.minZoom,m,z),f.minZoom,f.maxZoom),ur=Je/f.zoomScale(Zt-m);Re=Math.sqrt(ur/at*2)}const pt=Re*Re;function wt(Zt){const ur=(st*st-Je*Je+(Zt?-1:1)*pt*pt*at*at)/(2*(Zt?st:Je)*pt*at);return Math.log(Math.sqrt(ur*ur+1)-ur)}function xt(Zt){return(Math.exp(Zt)-Math.exp(-Zt))/2}function St(Zt){return(Math.exp(Zt)+Math.exp(-Zt))/2}const Ut=wt(!1);let In=function(Zt){return St(Ut)/St(Ut+Re*Zt)},Mt=function(Zt){return Je*((St(Ut)*(xt(ur=Ut+Re*Zt)/St(ur))-xt(Ut))/pt)/at;var ur},un=(wt(!0)-Ut)/Re;if(Math.abs(at)<1e-6||!isFinite(un)){if(Math.abs(Je-st)<1e-6)return this.easeTo(r,u);const Zt=st<Je?-1:1;un=Math.abs(Math.log(st/Je))/Re,Mt=function(){return 0},In=function(ur){return Math.exp(Zt*Re*ur)}}return r.duration="duration"in r?+r.duration:1e3*un/("screenSpeed"in r?+r.screenSpeed/Re:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=X!==T,this._padding=!f.isPaddingEqual(K),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ce),this._ease(Zt=>{const ur=Zt*un,wn=1/In(ur);f.zoom=Zt===1?z:m+f.scaleZoom(wn),this._rotating&&(f.bearing=a.interpolate.number(_,D,Zt)),this._pitching&&(f.pitch=a.interpolate.number(T,X,Zt)),this._padding&&(f.interpolatePadding(A,K,Zt),Ae=f.centerPoint.add(Me)),this.terrain&&!r.freezeElevation&&this._updateElevation(Zt);const bn=Zt===1?Ce:f.unproject(Ke.add(nt.mult(Mt(ur))).mult(wn));f.setLocationAtPoint(f.renderWorldCopies?bn.wrap():bn,Ae),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!r){const f=this.handlers;f&&f.stop(!1)}return this}_ease(r,u,f){f.animate===!1||f.duration===0?(r(1),u()):(this._easeStart=a.browser.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,u){r=a.wrap(r,-180,180);const f=Math.abs(r-u);return Math.abs(r-360-u)<f&&(r-=360),Math.abs(r+360-u)<f&&(r+=360),r}_normalizeCenter(r){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=r.lng-u.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.LngLat.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}class Kh{constructor(r={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,u){const f=this._map._getUIString(`AttributionControl.${u}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const _=u[m];if(_.used||_.usedForTerrain){const T=_.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,_)=>m.length-_.length),r=r.filter((m,_)=>{for(let T=_+1;T<r.length;T++)if(r[T].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Wi{constructor(r={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ar{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const u=++this._id;return this._queue.push({callback:r,id:u,cancelled:!1}),u}remove(r){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const vc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Yh=a.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class $d extends a.Evented{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,u){this.sourceCache.update(r,u),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),a.ortho(m.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[m.key]=new rn(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const u in this._tiles){const f=this._tiles[u];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const u={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16),a.ortho(_.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),u[f]=_}else if(m.canonical.isChildOf(r.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=m.canonical.z-r.canonical.z,A=m.canonical.x-(m.canonical.x>>T<<T),z=m.canonical.y-(m.canonical.y>>T<<T),D=a.EXTENT>>T;a.ortho(_.posMatrix,0,D,0,D,0,1),a.translate(_.posMatrix,_.posMatrix,[-A*D,-z*D,0]),u[f]=_}else if(r.canonical.isChildOf(m.canonical)){const _=r.clone();_.posMatrix=new Float64Array(16);const T=r.canonical.z-m.canonical.z,A=r.canonical.x-(r.canonical.x>>T<<T),z=r.canonical.y-(r.canonical.y>>T<<T),D=a.EXTENT>>T;a.ortho(_.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(_.posMatrix,_.posMatrix,[A*D,z*D,0]),a.scale(_.posMatrix,_.posMatrix,[1/2**T,1/2**T,0]),u[f]=_}}return u}getSourceTile(r,u){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!_||!_.dem)&&u)for(;m>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(r.scaledTo(m--).key);return _}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=r)}}class Vd{constructor(r,u,f){this.painter=r,this.sourceCache=new $d(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,u,f,m=a.EXTENT){var _;if(!(u>=0&&u<m&&f>=0&&f<m))return 0;const T=this.getTerrainData(r),A=(_=T.tile)===null||_===void 0?void 0:_.dem;if(!A)return 0;const z=function(Ae,Fe,Ce){var Ke=Fe[0],nt=Fe[1];return Ae[0]=Ce[0]*Ke+Ce[4]*nt+Ce[12],Ae[1]=Ce[1]*Ke+Ce[5]*nt+Ce[13],Ae}([],[u/m*a.EXTENT,f/m*a.EXTENT],T.u_terrain_matrix),D=[z[0]*A.dim,z[1]*A.dim],X=Math.floor(D[0]),K=Math.floor(D[1]),ce=D[0]-X,Me=D[1]-K;return A.get(X,K)*(1-ce)*(1-Me)+A.get(X+1,K)*ce*(1-Me)+A.get(X,K+1)*(1-ce)*Me+A.get(X+1,K+1)*ce*Me}getElevationForLngLatZoom(r,u){const{tileID:f,mercatorX:m,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(r,u);return this.getElevation(f,m%a.EXTENT,_%a.EXTENT,a.EXTENT)}getElevation(r,u,f,m=a.EXTENT){return this.getDEMElevation(r,u,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,_=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(m,_,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(m,new a.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const u=this.sourceCache.getSourceTile(r,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new q(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let _=r.canonical.z-u.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?_=r.canonical.z-m:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>_<<_),A=r.canonical.y-(r.canonical.y>>_<<_),z=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<_),1/(a.EXTENT<<_),0]);a.translate(z,z,[T*a.EXTENT,A*a.EXTENT,0]),this._demMatrixCache[r.key]={matrix:z,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(r){const u=this.painter,f=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(u.context,{width:f,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,T=0;_<this._coordsTextureSize;_++)for(let A=0;A<this._coordsTextureSize;A++,T+=4)u[T+0]=255&A,u[T+1]=255&_,u[T+2]=A>>8<<4|_>>8,u[T+3]=0;const f=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new q(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){const u=new Uint8Array(4),f=this.painter.context,m=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),T=u[1]+((15&u[2])<<8),A=this.coordsIndex[255-u[3]],z=A&&this.sourceCache.getTileByID(A);if(!z)return null;const D=this._coordsTextureSize,X=(1<<z.tileID.canonical.z)*D;return new a.MercatorCoordinate((z.tileID.canonical.x*D+_)/X,(z.tileID.canonical.y*D+T)/X,this.getElevation(z.tileID,_,T,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,u=new a.Pos3dArray,f=new a.TriangleIndexArray,m=this.meshSize,_=a.EXTENT/m,T=m*m;for(let K=0;K<=m;K++)for(let ce=0;ce<=m;ce++)u.emplaceBack(ce*_,K*_,0);for(let K=0;K<T;K+=m+1)for(let ce=0;ce<m;ce++)f.emplaceBack(ce+K,m+ce+K+1,m+ce+K+2),f.emplaceBack(ce+K,m+ce+K+2,ce+K+1);const A=u.length,z=A+2*(m+1);for(const K of[0,1])for(let ce=0;ce<=m;ce++)for(const Me of[0,1])u.emplaceBack(ce*_,K*a.EXTENT,Me);for(let K=0;K<2*m;K+=2)f.emplaceBack(z+K,z+K+1,z+K+3),f.emplaceBack(z+K,z+K+3,z+K+2),f.emplaceBack(A+K,A+K+3,A+K+1),f.emplaceBack(A+K,A+K+2,A+K+3);const D=u.length,X=D+2*(m+1);for(const K of[0,1])for(let ce=0;ce<=m;ce++)for(const Me of[0,1])u.emplaceBack(K*a.EXTENT,ce*_,Me);for(let K=0;K<2*m;K+=2)f.emplaceBack(D+K,D+K+1,D+K+3),f.emplaceBack(D+K,D+K+3,D+K+2),f.emplaceBack(X+K,X+K+3,X+K+1),f.emplaceBack(X+K,X+K+2,X+K+3);return this._mesh={indexBuffer:r.createIndexBuffer(f),vertexBuffer:r.createVertexBuffer(u,Yh.members),segments:a.SegmentVector.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*a.earthRadius/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,u){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,u);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const u=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,u){const f=a.MercatorCoordinate.fromLngLat(r.wrap()),m=(1<<u)*a.EXTENT,_=f.x*m,T=f.y*m,A=Math.floor(_/a.EXTENT),z=Math.floor(T/a.EXTENT);return{tileID:new a.OverscaledTileID(u,0,u,A,z),mercatorX:_,mercatorY:T}}}class Gd{constructor(r,u,f){this._context=r,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:r,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>r.id!==u),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Sl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Yo{constructor(r,u){this.painter=r,this.terrain=u,this.pool=new Gd(r.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const _ of m){const T=this.terrain.sourceCache.getTerrainCoords(_);for(const A in T)this._coordsDescendingInv[f][A]||(this._coordsDescendingInv[f][A]=[]),this._coordsDescendingInv[f][A].push(T[A])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],_=m.source;if(Sl[m.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const T in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][T]=this._coordsDescendingInv[_][T].map(A=>A.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[m][f.tileID.key];_&&_!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const u=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Sl[u]&&(this._prevType&&Sl[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Sl[this._prevType]||Sl[u]&&m){this._prevType=u;const _=this._stacks.length-1,T=this._stacks[_]||[];for(const A of this._renderableTiles){if(this.pool.isFull()&&(Xs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[_]){const D=this.pool.getObjectForId(A.rtt[_].id);if(D.stamp===A.rtt[_].stamp){this.pool.useObject(D);continue}}const z=this.pool.getOrCreateFreeObject();this.pool.useObject(z),this.pool.stampObject(z),A.rtt[_]={id:z.id,stamp:z.stamp},f.context.bindFramebuffer.set(z.fbo.framebuffer),f.context.clear({color:a.Color.transparent,stencil:0}),f.currentStencilSource=void 0;for(let D=0;D<T.length;D++){const X=f.style._layers[T[D]],K=X.source?this._coordsDescendingInv[X.source][A.tileID.key]:[A.tileID];f.context.viewport.set([0,0,z.fbo.width,z.fbo.height]),f._renderTileClippingMasks(X,K),f.renderLayer(f,f.style.sourceCaches[X.source],X,K),X.source&&(A.rttCoords[X.source]=this._coordsDescendingInvStr[X.source][A.tileID.key])}}return Xs(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Sl[u]}return!1}}const _c=b,Kt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},sn=g=>{g.touchstart=g.dragStart,g.touchmoveWindow=g.dragMove,g.touchend=g.dragEnd},xc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Jh{constructor(r,u,f=!1){this.mousedown=T=>{this.startMouse(a.extend({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,w.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),_=r.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Ys({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:A,bearingDegreesPerPixelMoved:z=.8})=>{const D=new Ko;return new Hn({clickTolerance:A,move:(X,K)=>({bearingDelta:(K.x-X.x)*z}),moveStateManager:D,enable:T,assignEvents:sn})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=Ao({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:A,pitchDegreesPerPixelMoved:z=-.5})=>{const D=new Ko;return new Hn({clickTolerance:A,move:(X,K)=>({pitchDelta:(K.y-X.y)*z}),moveStateManager:D,enable:T,assignEvents:sn})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(r,u){this.mouseRotate.dragStart(r,u),this.mousePitch&&this.mousePitch.dragStart(r,u),w.disableDrag()}startTouch(r,u){this.touchRotate.dragStart(r,u),this.touchPitch&&this.touchPitch.dragStart(r,u),w.disableDrag()}moveMouse(r,u){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(r,u){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,u)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(r,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const r=this.element;w.removeEventListener(r,"mousedown",this.mousedown),w.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Jo;function gi(g,r,u){if(g=new a.LngLat(g.lng,g.lat),r){const f=new a.LngLat(g.lng-360,g.lat),m=new a.LngLat(g.lng+360,g.lat),_=u.locationPoint(g).distSqr(r);u.locationPoint(f).distSqr(r)<_?g=f:u.locationPoint(m).distSqr(r)<_&&(g=m)}for(;Math.abs(g.lng-u.center.lng)>180;){const f=u.locationPoint(g);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const wc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Po(g,r,u){const f=g.classList;for(const m in wc)f.remove(`maplibregl-${u}-anchor-${m}`);f.add(`maplibregl-${u}-anchor-${r}`)}class Qh extends a.Evented{constructor(r){if(super(),this._onKeyPress=u=>{const f=u.code,m=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=gi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${wc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${m}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const T=this._map.unproject(this._pos),A=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=T.distanceTo(this._lngLat)>20*A?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=a.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const A=w.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ke of z){const nt=w.createNS("http://www.w3.org/2000/svg","ellipse");nt.setAttributeNS(null,"opacity","0.04"),nt.setAttributeNS(null,"cx","10.5"),nt.setAttributeNS(null,"cy","5.80029008"),nt.setAttributeNS(null,"rx",Ke.rx),nt.setAttributeNS(null,"ry",Ke.ry),A.appendChild(nt)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(X);const K=w.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const ce=w.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(ce);const Me=w.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Me.setAttributeNS(null,"fill","#FFFFFF");const Ae=w.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Fe=w.createNS("http://www.w3.org/2000/svg","circle");Fe.setAttributeNS(null,"fill","#000000"),Fe.setAttributeNS(null,"opacity","0.25"),Fe.setAttributeNS(null,"cx","5.5"),Fe.setAttributeNS(null,"cy","5.5"),Fe.setAttributeNS(null,"r","5.4999962");const Ce=w.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),Ae.appendChild(Fe),Ae.appendChild(Ce),T.appendChild(A),T.appendChild(D),T.appendChild(K),T.appendChild(Me),T.appendChild(Ae),u.appendChild(T),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=a.Point.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Po(this._element,this._anchor,"marker"),r&&r.className)for(const u of r.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(r){return this._offset=a.Point.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Pu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let rr=0,lr=!1;const Zd={maxWidth:100,unit:"metric"};function Tl(g,r,u){const f=u&&u.maxWidth||100,m=g._container.clientHeight/2,_=g.unproject([0,m]),T=g.unproject([f,m]),A=_.distanceTo(T);if(u&&u.unit==="imperial"){const z=3.2808*A;z>5280?Qs(r,f,z/5280,g._getUIString("ScaleControl.Miles")):Qs(r,f,z,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Qs(r,f,A/1852,g._getUIString("ScaleControl.NauticalMiles")):A>=1e3?Qs(r,f,A/1e3,g._getUIString("ScaleControl.Kilometers")):Qs(r,f,A,g._getUIString("ScaleControl.Meters"))}function Qs(g,r,u,f){const m=function(_){const T=Math.pow(10,`${Math.floor(_)}`.length-1);let A=_/T;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(z){const D=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*D)/D}(A),T*A}(u);g.style.width=r*(m/u)+"px",g.innerHTML=`${m}&nbsp;${f}`}const ef={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},tf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bc(g){if(g){if(typeof g=="number"){const r=Math.round(Math.abs(g)/Math.SQRT2);return{center:new a.Point(0,0),top:new a.Point(0,g),"top-left":new a.Point(r,r),"top-right":new a.Point(-r,r),bottom:new a.Point(0,-g),"bottom-left":new a.Point(r,-r),"bottom-right":new a.Point(-r,-r),left:new a.Point(g,0),right:new a.Point(-g,0)}}if(g instanceof a.Point||Array.isArray(g)){const r=a.Point.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.Point.convert(g.center||[0,0]),top:a.Point.convert(g.top||[0,0]),"top-left":a.Point.convert(g["top-left"]||[0,0]),"top-right":a.Point.convert(g["top-right"]||[0,0]),bottom:a.Point.convert(g.bottom||[0,0]),"bottom-left":a.Point.convert(g["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(g["bottom-right"]||[0,0]),left:a.Point.convert(g.left||[0,0]),right:a.Point.convert(g.right||[0,0])}}return bc(new a.Point(0,0))}const Mu={extend:(g,...r)=>a.extend(g,...r),run(g){g()},logToElement(g,r=!1,u="log"){const f=window.document.getElementById(u);f&&(r&&(f.innerHTML=""),f.innerHTML+=`<br>${g}`)}},nf=b;class Vn{static get version(){return nf}static get workerCount(){return qe.workerCount}static set workerCount(r){qe.workerCount=r}static get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(r){a.config.MAX_PARALLEL_IMAGE_REQUESTS=r}static get workerUrl(){return a.config.WORKER_URL}static set workerUrl(r){a.config.WORKER_URL=r}static addProtocol(r,u){a.config.REGISTERED_PROTOCOLS[r]=u}static removeProtocol(r){delete a.config.REGISTERED_PROTOCOLS[r]}}return Vn.Map=class extends qh{constructor(g){if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(g=a.extend({},Kt,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Mi(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._cooperativeGesturesOnWheel=r=>{this._onCooperativeGesture(r,r[this._metaKey],1)},this._contextLost=r=>{r.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new ar,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},vc,g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const u=wl(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{r?u(f):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Xh(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new Ks(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,a.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Kh({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new Wi,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new a.Event(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new a.Event(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new a.Event("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,r,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,r,u,f)}resize(g){var r;const u=this._containerDimensions(),f=u[0],m=u[1],_=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,_),this.painter.resize(f,m,_),this.painter.overLimit()){const A=this.painter.context.gl;this._maxCanvasSize=[A.drawingBufferWidth,A.drawingBufferHeight];const z=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,z),this.painter.resize(f,m,z)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const T=!this._moving;return T&&(this.stop(),this.fire(new a.Event("movestart",g)).fire(new a.Event("move",g))),this.fire(new a.Event("resize",g)),T&&this.fire(new a.Event("moveend",g)),this}_getClampedPixelRatio(g,r){const{0:u,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),_=g*m,T=r*m;return Math.min(_>u?u/_:1,T>f?f/T:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Pe.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(g){return this.transform.locationPoint(a.LngLat.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.pointLocation(a.Point.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,u){if(g==="mouseenter"||g==="mouseover"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:_=>{const T=this.getLayer(r)?this.queryRenderedFeatures(_.point,{layers:[r]}):[];T.length?f||(f=!0,u.call(this,new ot(g,this,_.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(g==="mouseleave"||g==="mouseout"){let f=!1;return{layer:r,listener:u,delegates:{mousemove:T=>{(this.getLayer(r)?this.queryRenderedFeatures(T.point,{layers:[r]}):[]).length?f=!0:f&&(f=!1,u.call(this,new ot(g,this,T.originalEvent)))},mouseout:T=>{f&&(f=!1,u.call(this,new ot(g,this,T.originalEvent)))}}}}{const f=m=>{const _=this.getLayer(r)?this.queryRenderedFeatures(m.point,{layers:[r]}):[];_.length&&(m.features=_,u.call(this,m),delete m.features)};return{layer:r,listener:u,delegates:{[g]:f}}}}on(g,r,u){if(u===void 0)return super.on(g,r);const f=this._createDelegatedListener(g,r,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(g,r,u){if(u===void 0)return super.once(g,r);const f=this._createDelegatedListener(g,r,u);for(const m in f.delegates)this.once(m,f.delegates[m]);return this}off(g,r,u){return u===void 0?super.off(g,r):(this._delegatedListeners&&this._delegatedListeners[g]&&(f=>{const m=this._delegatedListeners[g];for(let _=0;_<m.length;_++){const T=m[_];if(T.layer===r&&T.listener===u){for(const A in T.delegates)this.off(A,T.delegates[A]);return m.splice(_,1),this}}})(),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let u;const f=g instanceof a.Point||Array.isArray(g),m=f?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:g)||{},m instanceof a.Point||typeof m[0]=="number")u=[a.Point.convert(m)];else{const _=a.Point.convert(m[0]),T=a.Point.convert(m[1]);u=[_,new a.Point(T.x,_.y),T,new a.Point(_.x,T.y),_]}return this.style.queryRenderedFeatures(u,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));const u=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Br(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,u):this.style.loadJSON(g,r,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){const u=this._requestManager.transformRequest(g,G.Style);a.getJSON(u,(f,m)=>{f?this.fire(new a.ErrorEvent(f)):m&&this._updateDiff(m,r)})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){const r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){const r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===g.source&&a.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Vd(this.painter,r,g),this.painter.renderToTexture=new Yo(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==g.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.Event("terrain",{terrain:g})),this}getTerrain(){var g,r;return(r=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const r in g){const u=g[r]._tiles;for(const f in u){const m=u[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(g,r,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,r,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,r,u={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:_,stretchY:T,content:A}=u;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.isImageBitmap(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:D,data:X}=r,K=r;return this.style.addImage(g,{data:new a.RGBAImage({width:z,height:D},new Uint8Array(X)),pixelRatio:f,stretchX:_,stretchY:T,content:A,sdf:m,version:0,userImage:K}),K.onAdd&&K.onAdd(this,g),this}}{const{width:z,height:D,data:X}=a.browser.getImageData(r);this.style.addImage(g,{data:new a.RGBAImage({width:z,height:D},X),pixelRatio:f,stretchX:_,stretchY:T,content:A,sdf:m,version:0})}}updateImage(g,r){const u=this.style.getImage(g);if(!u)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||a.isImageBitmap(r)?a.browser.getImageData(r):r,{width:m,height:_,data:T}=f;if(m===void 0||_===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||_!==u.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(r instanceof HTMLImageElement||a.isImageBitmap(r));return u.data.replace(T,A),this.style.updateImage(g,u),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,r){de.getImage(this._requestManager.transformRequest(g,G.Image),r)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,r,u){return this.style.setLayerZoomRange(g,r,u),this._update(!0)}setFilter(g,r,u={}){return this.style.setFilter(g,r,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,u,f={}){return this.style.setPaintProperty(g,r,u,f),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,u,f={}){return this.style.setLayoutProperty(g,r,u,f),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,u,f=>{f||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,u=>{u||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map");const r=this._canvasContainer=w.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const m=this._controlContainer=w.create("div","maplibregl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{_[T]=w.create("div",`maplibregl-ctrl-${T} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(g=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${g}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(g,r,u){this._canvas.width=Math.floor(u*g),this._canvas.height=Math.floor(u*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const g={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:g},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g);if(!u){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new sr(u,this.transform),I.testSupport(u)}_onCooperativeGesture(g,r,u){return!r&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,_=a.browser.now();this.style.zoomHistory.update(m,_);const T=new a.EvaluationParameters(m,{now:_,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),A=T.crossFadingFactor();A===1&&A===this._crossFadingFactor||(u=!0,this._crossFadingFactor=A),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.browser.frame(g=>{a.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return _c}getCameraTargetElevation(){return this.transform.elevation}},Vn.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{const r=this._map.getZoom(),u=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);r.title=f,r.setAttribute("aria-label",f)},this.options=a.extend({},xc,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Jh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){const u=w.create("button",g,this._container);return u.type="button",u.addEventListener("click",r),u}},Vn.GeolocateControl=class extends a.Evented{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.Event("geolocate",r)),this._finish()}},this._updateCamera=r=>{const u=new a.LngLat(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),_=a.extend({bearing:m},this.options.fitBoundsOptions),T=Pe.fromLngLat(u,f);this._map.fitBounds(T,_,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const u=new a.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&lr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.Event("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Qh({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}},this.options=a.extend({},Pu,g)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(r,u=!1){Jo===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Jo=f.state!=="denied",r(Jo)}).catch(()=>{Jo=!!window.navigator.geolocation,r(Jo)}):(Jo=!!window.navigator.geolocation,r(Jo)):r(Jo)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,rr=0,lr=!1}_isOutOfMapMaxBounds(g){const r=this._map.getMaxBounds(),u=g.coords;return r&&(u.longitude<r.getWest()||u.longitude>r.getEast()||u.latitude<r.getSouth()||u.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const g=this._map.getBounds(),r=g.getSouthEast(),u=g.getNorthEast(),f=r.distanceTo(u),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":rr--,lr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),rr++,rr>1?(g={maximumAge:6e5,timeout:0},lr=!0):(g=this.options.positionOptions,lr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Vn.AttributionControl=Kh,Vn.LogoControl=Wi,Vn.ScaleControl=class{constructor(g){this._onMove=()=>{Tl(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Tl(this._map,this._container,this.options)},this.options=a.extend({},Zd,g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Vn.FullscreenControl=class extends a.Evented{constructor(g={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.Event("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new a.Event("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Vn.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=g}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Vn.Popup=class extends a.Evented{constructor(g){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gi(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!r)return;const u=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);let f=this.options.anchor;const m=bc(this.options.offset);if(!f){const T=this._container.offsetWidth,A=this._container.offsetHeight;let z;z=u.y+m.bottom.y<A?["top"]:u.y>this._map.transform.height-A?["bottom"]:[],u.x<T/2?z.push("left"):u.x>this._map.transform.width-T/2&&z.push("right"),f=z.length===0?"bottom":z.join("-")}const _=u.add(m[f]).round();w.setTransform(this._container,`${wc[f]} translate(${_.x}px,${_.y}px)`),Po(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=a.extend(Object.create(ef),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const r=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=g;f=u.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(tf);g&&g.focus()}},Vn.Marker=Qh,Vn.Style=Br,Vn.LngLat=a.LngLat,Vn.LngLatBounds=Pe,Vn.Point=a.Point,Vn.MercatorCoordinate=a.MercatorCoordinate,Vn.Evented=a.Evented,Vn.AJAXError=a.AJAXError,Vn.config=a.config,Vn.CanvasSource=Et,Vn.GeoJSONSource=ut,Vn.ImageSource=Ct,Vn.RasterDEMTileSource=rt,Vn.RasterTileSource=Ze,Vn.VectorTileSource=He,Vn.VideoSource=ht,Vn.setRTLTextPlugin=a.setRTLTextPlugin,Vn.getRTLTextPluginStatus=a.getRTLTextPluginStatus,Vn.prewarm=function(){F().acquire(Ne)},Vn.clearPrewarmedResources=function(){const g=le;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(Ne),le=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Mu.extend(Vn,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),Vn});var y=c;return y})})(nC);var iC=nC.exports;const oC=Cd(iC),z3=aM({__proto__:null,default:oC},[iC]);const F3="modulepreload",O3=function(e){return"/osm-address-editor-vite/"+e},e2={},R3=function(t,i,l){if(!i||i.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(i.map(d=>{if(d=O3(d),d in e2)return;e2[d]=!0;const y=d.endsWith(".css"),a=y?'[rel="stylesheet"]':"";if(!!l)for(let I=c.length-1;I>=0;I--){const C=c[I];if(C.href===d&&(!y||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${a}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":F3,y||(w.as="script",w.crossOrigin=""),w.href=d,document.head.appendChild(w),y)return new Promise((I,C)=>{w.addEventListener("load",I),w.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t()).catch(d=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=d,window.dispatchEvent(y),!y.defaultPrevented)throw d})},j3=_t.createContext(null);function D3(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function t2(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function n2(e,t){const i=t.viewState||t;let l=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),l=l||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,l=l||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,l=l||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,l=l||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(l=!0,e.padding=i.padding),l}const B3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function r2(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const l of e.layers)t[l.id]=l;const i=e.layers.map(l=>{const c=t[l.ref];let d=null;if("interactive"in l&&(d={...l},delete d.interactive),c){d=d||{...l},delete d.ref;for(const y of B3)y in c&&(d[y]=c[y])}return d||l});return{...e,layers:i}}function N3(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,l=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&l===d}function ss(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!ss(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!ss(e[c],t[c]))return!1;return!0}return!1}const i2={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},h0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},o2={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},U3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],$3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Eh{constructor(t,i,l){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[o2[c.type]];d&&d(c)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[i2[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[h0[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(l)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const l=this._updateSettings(t,i);l&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(l||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const l=Eh.savedMaps.pop();if(!l)return null;const c=l.map,d=c.getContainer();for(i.className=d.className;d.childNodes.length>0;)i.appendChild(d.childNodes[0]);c._container=i;const y=c._resizeObserver;y&&(y.disconnect(),y.observe(i)),l.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:a}=t;return a&&(a.bounds?c.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):l._updateViewState(a,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),l}_initialize(t){const{props:i}=this,l={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||V3()||null,container:t,style:r2(i.mapStyle)},c=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[c.longitude||0,c.latitude||0],zoom:c.zoom||0,pitch:c.pitch||0,bearing:c.bearing||0}),i.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,i.gl)}const d=new this._MapClass(l);c.padding&&d.setPadding(c.padding),i.cursor&&(d.getCanvas().style.cursor=i.cursor),this._createShadowTransform(d);const y=d._render;d._render=w=>{this._inRender=!0,y.call(d,w),this._inRender=!1};const a=d._renderTaskQueue.run;d._renderTaskQueue.run=w=>{a.call(d._renderTaskQueue,w),this._onBeforeRepaint()},d.on("render",()=>this._onAfterRepaint());const b=d.fire;d.fire=this._fireEvent.bind(this,b),d.on("resize",()=>{this._renderTransform.resize(d.transform.width,d.transform.height)}),d.on("styledata",()=>this._updateStyleComponents(this.props,{})),d.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in i2)d.on(w,this._onPointerEvent);for(const w in h0)d.on(w,this._onCameraEvent);for(const w in o2)d.on(w,this._onEvent);this._map=d}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),Eh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=D3(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const l=this._map;if(i.width!==l.transform.width||i.height!==l.transform.height)return l.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const l=this._map,c=this._renderTransform,{zoom:d,pitch:y,bearing:a}=c,b=l.isMoving();b&&(c.cameraElevationReference="sea");const w=n2(c,{...t2(l.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&i){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=d!==c.zoom),I.rotate||(I.rotate=a!==c.bearing),I.pitch||(I.pitch=y!==c.pitch)}return b||n2(l.transform,t),w}_updateSettings(t,i){const l=this._map;let c=!1;for(const d of U3)d in t&&!ss(t[d],i[d])&&(c=!0,l[`set${d[0].toUpperCase()}${d.slice(1)}`](t[d]));return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==i.mapStyle){const l={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(l.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(r2(t.mapStyle),l),!0}return!1}_updateStyleComponents(t,i){const l=this._map;let c=!1;return l.style.loaded()&&("light"in t&&!ss(t.light,i.light)&&(c=!0,l.setLight(t.light)),"fog"in t&&!ss(t.fog,i.fog)&&(c=!0,l.setFog(t.fog)),"terrain"in t&&!ss(t.terrain,i.terrain)&&(!t.terrain||l.getSource(t.terrain.source))&&(c=!0,l.setTerrain(t.terrain))),c}_updateHandlers(t,i){const l=this._map;let c=!1;for(const d of $3){const y=t[d];ss(y,i[d])||(c=!0,y?l[d].enable(y):l[d].disable())}return c}_queryRenderedFeatures(t){const i=this._map,{interactiveLayerIds:l=[]}=this.props;try{return i.queryRenderedFeatures(t,{layers:l.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(t){var i;const{props:l}=this;if(l.interactiveLayerIds&&(l.onMouseMove||l.onMouseEnter||l.onMouseLeave)){const d=t.type,y=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,a=this._queryRenderedFeatures(t.point),b=a.length>0;!b&&y&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=a,b&&!y&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,i,l){const c=this._map,d=c.transform,y=typeof i=="string"?i:i.type;return y==="move"&&this._updateViewState(this.props,!1),y in h0&&(typeof i=="object"&&(i.viewState=t2(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,l),c.transform=d,c):(t.call(c,i,l),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const l in this._deferredEvents)this._deferredEvents[l]&&t.fire(l);this._internalUpdate=!1;const i=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=i}}}Eh.savedMaps=[];function V3(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const G3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Z3(e,t){if(!e)return null;const i=e.map,l={getMap:()=>i,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:c=>e.transform.locationPoint(t.LngLat.convert(c)),unproject:c=>e.transform.pointLocation(t.Point.convert(c)),queryTerrainElevation:(c,d)=>{const y=i.transform;i.transform=e.transform;const a=i.queryTerrainElevation(c,d);return i.transform=y,a}};for(const c of W3(i))!(c in l)&&!G3.includes(c)&&(l[c]=i[c].bind(i));return l}function W3(e){const t=new Set;let i=e;for(;i;){for(const l of Object.getOwnPropertyNames(i))l[0]!=="_"&&typeof e[l]=="function"&&l!=="fire"&&l!=="setEventedParent"&&t.add(l);i=Object.getPrototypeOf(i)}return Array.from(t)}const H3=typeof document<"u"?_t.useLayoutEffect:_t.useEffect,X3=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function q3(e,t){for(const i of X3)i in t&&(e[i]=t[i]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,i=>{i&&console.error(i)},!1)}const kh=_t.createContext(null),K3={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},E1=_t.forwardRef((e,t)=>{const i=_t.useContext(j3),[l,c]=_t.useState(null),d=_t.useRef(),{current:y}=_t.useRef({mapLib:null,map:null});_t.useEffect(()=>{const w=e.mapLib;let I=!0,C;return Promise.resolve(w||R3(()=>Promise.resolve().then(()=>z3),void 0)).then(L=>{if(I){if(L.Map||(L=L.default),!L||!L.Map)throw new Error("Invalid mapLib");if(q3(L,e),!L.supported||L.supported(e))e.reuseMaps&&(C=Eh.reuse(e,d.current)),C||(C=new Eh(L.Map,e,d.current)),y.map=Z3(C,L),y.mapLib=L,c(C),i==null||i.onMapMount(y.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(L=>{e.onError({type:"error",target:null,originalEvent:null,error:L})}),()=>{I=!1,C&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?C.recycle():C.destroy())}},[]),H3(()=>{l&&l.setProps(e)}),_t.useImperativeHandle(t,()=>y.map,[l]);const a=_t.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),b={height:"100%"};return _t.createElement("div",{id:e.id,ref:d,style:a},l&&_t.createElement(kh.Provider,{value:y},_t.createElement("div",{"mapboxgl-children":"",style:b},e.children)))});E1.displayName="Map";E1.defaultProps=K3;const Y3=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function ic(e,t){if(!e||!t)return;const i=e.style;for(const l in t){const c=t[l];Number.isFinite(c)&&!Y3.test(l)?i[l]=`${c}px`:i[l]=c}}const J3={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function sC(e){const{map:t,mapLib:i}=_t.useContext(kh),l=_t.useRef({props:e});l.current.props=e;const c=_t.useMemo(()=>{let d=!1;_t.Children.forEach(e.children,b=>{b&&(d=!0)});const y={...e,element:d?document.createElement("div"):null},a=new i.Marker(y).setLngLat([e.longitude,e.latitude]);return a.getElement().addEventListener("click",b=>{var w,I;(I=(w=l.current.props).onClick)===null||I===void 0||I.call(w,{type:"click",target:a,originalEvent:b})}),a.on("dragstart",b=>{var w,I;const C=b;C.lngLat=c.getLngLat(),(I=(w=l.current.props).onDragStart)===null||I===void 0||I.call(w,C)}),a.on("drag",b=>{var w,I;const C=b;C.lngLat=c.getLngLat(),(I=(w=l.current.props).onDrag)===null||I===void 0||I.call(w,C)}),a.on("dragend",b=>{var w,I;const C=b;C.lngLat=c.getLngLat(),(I=(w=l.current.props).onDragEnd)===null||I===void 0||I.call(w,C)}),a},[]);return _t.useEffect(()=>(c.addTo(t.getMap()),()=>{c.remove()}),[]),_t.useEffect(()=>{ic(c.getElement(),e.style)},[e.style]),(c.getLngLat().lng!==e.longitude||c.getLngLat().lat!==e.latitude)&&c.setLngLat([e.longitude,e.latitude]),e.offset&&!N3(c.getOffset(),e.offset)&&c.setOffset(e.offset),c.isDraggable()!==e.draggable&&c.setDraggable(e.draggable),c.getRotation()!==e.rotation&&c.setRotation(e.rotation),c.getRotationAlignment()!==e.rotationAlignment&&c.setRotationAlignment(e.rotationAlignment),c.getPitchAlignment()!==e.pitchAlignment&&c.setPitchAlignment(e.pitchAlignment),c.getPopup()!==e.popup&&c.setPopup(e.popup),b1.createPortal(e.children,c.getElement())}sC.defaultProps=J3;const Q3=_t.memo(sC);function s2(e){return new Set(e?e.trim().split(/\s+/):[])}function e4(e){const{map:t,mapLib:i}=_t.useContext(kh),l=_t.useMemo(()=>document.createElement("div"),[]),c=_t.useRef({props:e});c.current.props=e;const d=_t.useMemo(()=>{const y={...e},a=new i.Popup(y).setLngLat([e.longitude,e.latitude]);return a.once("open",b=>{var w,I;(I=(w=c.current.props).onOpen)===null||I===void 0||I.call(w,b)}),a},[]);if(_t.useEffect(()=>{const y=a=>{var b,w;(w=(b=c.current.props).onClose)===null||w===void 0||w.call(b,a)};return d.on("close",y),d.setDOMContent(l).addTo(t.getMap()),()=>{d.off("close",y),d.isOpen()&&d.remove()}},[]),_t.useEffect(()=>{ic(d.getElement(),e.style)},[e.style]),d.isOpen()&&((d.getLngLat().lng!==e.longitude||d.getLngLat().lat!==e.latitude)&&d.setLngLat([e.longitude,e.latitude]),e.offset&&!ss(d.options.offset,e.offset)&&d.setOffset(e.offset),(d.options.anchor!==e.anchor||d.options.maxWidth!==e.maxWidth)&&(d.options.anchor=e.anchor,d.setMaxWidth(e.maxWidth)),d.options.className!==e.className)){const y=s2(d.options.className),a=s2(e.className);for(const b of y)a.has(b)||d.removeClassName(b);for(const b of a)y.has(b)||d.addClassName(b);d.options.className=e.className}return b1.createPortal(e.children,l)}_t.memo(e4);function Ld(e,t,i,l){const c=_t.useContext(kh),d=_t.useMemo(()=>e(c),[]);return _t.useEffect(()=>{const y=l||i||t,a=typeof t=="function"&&typeof i=="function"?t:null,b=typeof i=="function"?i:typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,y==null?void 0:y.position),a&&a(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function t4(e){const t=Ld(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return _t.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}_t.memo(t4);function n4(e){const t=Ld(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return _t.useEffect(()=>{ic(t._controlContainer,e.style)},[e.style]),null}_t.memo(n4);const aC=_t.forwardRef((e,t)=>{const i=_t.useRef({props:e}),l=Ld(({mapLib:c})=>{const d=new c.GeolocateControl(e),y=d._setupUI;return d._setupUI=a=>{d._container.hasChildNodes()||y(a)},d.on("geolocate",a=>{var b,w;(w=(b=i.current.props).onGeolocate)===null||w===void 0||w.call(b,a)}),d.on("error",a=>{var b,w;(w=(b=i.current.props).onError)===null||w===void 0||w.call(b,a)}),d.on("outofmaxbounds",a=>{var b,w;(w=(b=i.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,a)}),d.on("trackuserlocationstart",a=>{var b,w;(w=(b=i.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,a)}),d.on("trackuserlocationend",a=>{var b,w;(w=(b=i.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,a)}),d},{position:e.position});return i.current.props=e,_t.useImperativeHandle(t,()=>({trigger:()=>l.trigger()}),[]),_t.useEffect(()=>{ic(l._container,e.style)},[e.style]),null});aC.displayName="GeolocateControl";const r4=_t.memo(aC);function i4(e){const t=Ld(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return _t.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}const o4=_t.memo(i4),s4={unit:"metric",maxWidth:100};function lC(e){const t=Ld(({mapLib:i})=>new i.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),_t.useEffect(()=>{ic(t._container,e.style)},[e.style]),null}lC.defaultProps=s4;_t.memo(lC);function Rm(e,t){if(!e)throw new Error(t)}let a4=0;function l4(e,t,i){if(e.style&&e.style._loaded){const l={...i};return delete l.id,delete l.children,e.addSource(t,l),e.getSource(t)}return null}function u4(e,t,i){Rm(t.id===i.id,"source id changed"),Rm(t.type===i.type,"source type changed");let l="",c=0;for(const y in t)y!=="children"&&y!=="id"&&!ss(i[y],t[y])&&(l=y,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if((d==="canvas"||d==="video")&&c===1&&l==="coordinates")e.setCoordinates(t.coordinates);else if(d==="vector"&&"setUrl"in e)switch(l){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${l}`)}function c4(e){const t=_t.useContext(kh).map.getMap(),i=_t.useRef(e),[,l]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-source-${a4++}`,[]);_t.useEffect(()=>{if(t){const y=()=>setTimeout(()=>l(a=>a+1),0);return t.on("styledata",y),y(),()=>{var a;if(t.off("styledata",y),t.style&&t.style._loaded&&t.getSource(c)){const b=(a=t.getStyle())===null||a===void 0?void 0:a.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?u4(d,e,i.current):d=l4(t,c,e),i.current=e,d&&_t.Children.map(e.children,y=>y&&_t.cloneElement(y,{source:c}))||null}function h4(e,t,i,l){if(Rm(i.id===l.id,"layer id changed"),Rm(i.type===l.type,"layer type changed"),i.type==="custom"||l.type==="custom")return;const{layout:c={},paint:d={},filter:y,minzoom:a,maxzoom:b,beforeId:w}=i;if(w!==l.beforeId&&e.moveLayer(t,w),c!==l.layout){const I=l.layout||{};for(const C in c)ss(c[C],I[C])||e.setLayoutProperty(t,C,c[C]);for(const C in I)c.hasOwnProperty(C)||e.setLayoutProperty(t,C,void 0)}if(d!==l.paint){const I=l.paint||{};for(const C in d)ss(d[C],I[C])||e.setPaintProperty(t,C,d[C]);for(const C in I)d.hasOwnProperty(C)||e.setPaintProperty(t,C,void 0)}ss(y,l.filter)||e.setFilter(t,y),(a!==l.minzoom||b!==l.maxzoom)&&e.setLayerZoomRange(t,a,b)}function f4(e,t,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const l={...i,id:t};delete l.beforeId,e.addLayer(l,i.beforeId)}}let d4=0;function p4(e){const t=_t.useContext(kh).map.getMap(),i=_t.useRef(e),[,l]=_t.useState(0),c=_t.useMemo(()=>e.id||`jsx-layer-${d4++}`,[]);if(_t.useEffect(()=>{if(t){const y=()=>l(a=>a+1);return t.on("styledata",y),y(),()=>{t.off("styledata",y),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{h4(t,c,e,i.current)}catch(y){console.warn(y)}else f4(t,c,e);return i.current=e,null}/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function a2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,l)}return i}function Yt(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(i),!0).forEach(function(l){y4(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a2(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function m4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l2(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function g4(e,t,i){return t&&l2(e.prototype,t),i&&l2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y4(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S1(e,t){return _4(e)||w4(e,t)||uC(e,t)||E4()}function kg(e){return v4(e)||x4(e)||uC(e)||b4()}function v4(e){if(Array.isArray(e))return Rv(e)}function _4(e){if(Array.isArray(e))return e}function x4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w4(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var l=[],c=!0,d=!1,y,a;try{for(i=i.call(e);!(c=(y=i.next()).done)&&(l.push(y.value),!(t&&l.length===t));c=!0);}catch(b){d=!0,a=b}finally{try{!c&&i.return!=null&&i.return()}finally{if(d)throw a}}return l}}function uC(e,t){if(e){if(typeof e=="string")return Rv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Rv(e,t)}}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,l=new Array(t);i<t;i++)l[i]=e[i];return l}function b4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u2=function(){},T1={},cC={},hC=null,fC={mark:u2,measure:u2};try{typeof window<"u"&&(T1=window),typeof document<"u"&&(cC=document),typeof MutationObserver<"u"&&(hC=MutationObserver),typeof performance<"u"&&(fC=performance)}catch{}var S4=T1.navigator||{},c2=S4.userAgent,h2=c2===void 0?"":c2,tu=T1,xr=cC,f2=hC,Lp=fC;tu.document;var Ya=!!xr.documentElement&&!!xr.head&&typeof xr.addEventListener=="function"&&typeof xr.createElement=="function",dC=~h2.indexOf("MSIE")||~h2.indexOf("Trident/"),Wa="___FONT_AWESOME___",jv=16,pC="fa",mC="svg-inline--fa",Ju="data-fa-i2svg",Dv="data-fa-pseudo-element",T4="data-fa-pseudo-element-pending",C1="data-prefix",A1="data-icon",d2="fontawesome-i2svg",C4="async",A4=["HTML","HEAD","STYLE","SCRIPT"],gC=function(){try{return!0}catch{return!1}}(),I1={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Dm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},yC={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},I4={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},P4=/fa[srltdbk\-\ ]/,vC="fa-layers-text",M4=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,k4={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},_C=[1,2,3,4,5,6,7,8,9,10],L4=_C.concat([11,12,13,14,15,16,17,18,19,20]),z4=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Gu={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},F4=[].concat(kg(Object.keys(Dm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Gu.GROUP,Gu.SWAP_OPACITY,Gu.PRIMARY,Gu.SECONDARY]).concat(_C.map(function(e){return"".concat(e,"x")})).concat(L4.map(function(e){return"w-".concat(e)})),xC=tu.FontAwesomeConfig||{};function O4(e){var t=xr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}function R4(e){return e===""?!0:e==="false"?!1:e==="true"?!0:e}if(xr&&typeof xr.querySelector=="function"){var j4=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];j4.forEach(function(e){var t=S1(e,2),i=t[0],l=t[1],c=R4(O4(i));c!=null&&(xC[l]=c)})}var D4={familyPrefix:pC,styleDefault:"solid",replacementClass:mC,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Yf=Yt(Yt({},D4),xC);Yf.autoReplaceSvg||(Yf.observeMutations=!1);var yn={};Object.keys(Yf).forEach(function(e){Object.defineProperty(yn,e,{enumerable:!0,set:function(i){Yf[e]=i,nm.forEach(function(l){return l(yn)})},get:function(){return Yf[e]}})});tu.FontAwesomeConfig=yn;var nm=[];function B4(e){return nm.push(e),function(){nm.splice(nm.indexOf(e),1)}}var Fl=jv,ha={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function N4(e){if(!(!e||!Ya)){var t=xr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=xr.head.childNodes,l=null,c=i.length-1;c>-1;c--){var d=i[c],y=(d.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(y)>-1&&(l=d)}return xr.head.insertBefore(t,l),e}}var U4="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function wd(){for(var e=12,t="";e-- >0;)t+=U4[Math.random()*62|0];return t}function Lh(e){for(var t=[],i=(e||[]).length>>>0;i--;)t[i]=e[i];return t}function P1(e){return e.classList?Lh(e.classList):(e.getAttribute("class")||"").split(" ").filter(function(t){return t})}function wC(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function $4(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,'="').concat(wC(e[i]),'" ')},"").trim()}function Lg(e){return Object.keys(e||{}).reduce(function(t,i){return t+"".concat(i,": ").concat(e[i].trim(),";")},"")}function M1(e){return e.size!==ha.size||e.x!==ha.x||e.y!==ha.y||e.rotate!==ha.rotate||e.flipX||e.flipY}function V4(e){var t=e.transform,i=e.containerWidth,l=e.iconWidth,c={transform:"translate(".concat(i/2," 256)")},d="translate(".concat(t.x*32,", ").concat(t.y*32,") "),y="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)"),b={transform:"".concat(d," ").concat(y," ").concat(a)},w={transform:"translate(".concat(l/2*-1," -256)")};return{outer:c,inner:b,path:w}}function G4(e){var t=e.transform,i=e.width,l=i===void 0?jv:i,c=e.height,d=c===void 0?jv:c,y=e.startCentered,a=y===void 0?!1:y,b="";return a&&dC?b+="translate(".concat(t.x/Fl-l/2,"em, ").concat(t.y/Fl-d/2,"em) "):a?b+="translate(calc(-50% + ".concat(t.x/Fl,"em), calc(-50% + ").concat(t.y/Fl,"em)) "):b+="translate(".concat(t.x/Fl,"em, ").concat(t.y/Fl,"em) "),b+="scale(".concat(t.size/Fl*(t.flipX?-1:1),", ").concat(t.size/Fl*(t.flipY?-1:1),") "),b+="rotate(".concat(t.rotate,"deg) "),b}var Z4=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function bC(){var e=pC,t=mC,i=yn.familyPrefix,l=yn.replacementClass,c=Z4;if(i!==e||l!==t){var d=new RegExp("\\.".concat(e,"\\-"),"g"),y=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");c=c.replace(d,".".concat(i,"-")).replace(y,"--".concat(i,"-")).replace(a,".".concat(l))}return c}var p2=!1;function f0(){yn.autoAddCss&&!p2&&(N4(bC()),p2=!0)}var W4={mixout:function(){return{dom:{css:bC,insertCss:f0}}},hooks:function(){return{beforeDOMElementCreation:function(){f0()},beforeI2svg:function(){f0()}}}},Ha=tu||{};Ha[Wa]||(Ha[Wa]={});Ha[Wa].styles||(Ha[Wa].styles={});Ha[Wa].hooks||(Ha[Wa].hooks={});Ha[Wa].shims||(Ha[Wa].shims=[]);var Ms=Ha[Wa],EC=[],H4=function e(){xr.removeEventListener("DOMContentLoaded",e),Bm=1,EC.map(function(t){return t()})},Bm=!1;Ya&&(Bm=(xr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(xr.readyState),Bm||xr.addEventListener("DOMContentLoaded",H4));function X4(e){Ya&&(Bm?setTimeout(e,0):EC.push(e))}function zd(e){var t=e.tag,i=e.attributes,l=i===void 0?{}:i,c=e.children,d=c===void 0?[]:c;return typeof e=="string"?wC(e):"<".concat(t," ").concat($4(l),">").concat(d.map(zd).join(""),"</").concat(t,">")}function m2(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}var q4=function(t,i){return function(l,c,d,y){return t.call(i,l,c,d,y)}},d0=function(t,i,l,c){var d=Object.keys(t),y=d.length,a=c!==void 0?q4(i,c):i,b,w,I;for(l===void 0?(b=1,I=t[d[0]]):(b=0,I=l);b<y;b++)w=d[b],I=a(I,t[w],w,t);return I};function K4(e){for(var t=[],i=0,l=e.length;i<l;){var c=e.charCodeAt(i++);if(c>=55296&&c<=56319&&i<l){var d=e.charCodeAt(i++);(d&64512)==56320?t.push(((c&1023)<<10)+(d&1023)+65536):(t.push(c),i--)}else t.push(c)}return t}function Bv(e){var t=K4(e);return t.length===1?t[0].toString(16):null}function Y4(e,t){var i=e.length,l=e.charCodeAt(t),c;return l>=55296&&l<=56319&&i>t+1&&(c=e.charCodeAt(t+1),c>=56320&&c<=57343)?(l-55296)*1024+c-56320+65536:l}function g2(e){return Object.keys(e).reduce(function(t,i){var l=e[i],c=!!l.icon;return c?t[l.iconName]=l.icon:t[i]=l,t},{})}function Nv(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.skipHooks,c=l===void 0?!1:l,d=g2(t);typeof Ms.hooks.addPack=="function"&&!c?Ms.hooks.addPack(e,g2(t)):Ms.styles[e]=Yt(Yt({},Ms.styles[e]||{}),d),e==="fas"&&Nv("fa",t)}var Jf=Ms.styles,J4=Ms.shims,Q4=Object.values(yC),k1=null,SC={},TC={},CC={},AC={},IC={},eL=Object.keys(I1);function tL(e){return~F4.indexOf(e)}function nL(e,t){var i=t.split("-"),l=i[0],c=i.slice(1).join("-");return l===e&&c!==""&&!tL(c)?c:null}var PC=function(){var t=function(d){return d0(Jf,function(y,a,b){return y[b]=d0(a,d,{}),y},{})};SC=t(function(c,d,y){if(d[3]&&(c[d[3]]=y),d[2]){var a=d[2].filter(function(b){return typeof b=="number"});a.forEach(function(b){c[b.toString(16)]=y})}return c}),TC=t(function(c,d,y){if(c[y]=y,d[2]){var a=d[2].filter(function(b){return typeof b=="string"});a.forEach(function(b){c[b]=y})}return c}),IC=t(function(c,d,y){var a=d[2];return c[y]=y,a.forEach(function(b){c[b]=y}),c});var i="far"in Jf||yn.autoFetchSvg,l=d0(J4,function(c,d){var y=d[0],a=d[1],b=d[2];return a==="far"&&!i&&(a="fas"),typeof y=="string"&&(c.names[y]={prefix:a,iconName:b}),typeof y=="number"&&(c.unicodes[y.toString(16)]={prefix:a,iconName:b}),c},{names:{},unicodes:{}});CC=l.names,AC=l.unicodes,k1=zg(yn.styleDefault)};B4(function(e){k1=zg(e.styleDefault)});PC();function L1(e,t){return(SC[e]||{})[t]}function rL(e,t){return(TC[e]||{})[t]}function nh(e,t){return(IC[e]||{})[t]}function MC(e){return CC[e]||{prefix:null,iconName:null}}function iL(e){var t=AC[e],i=L1("fas",e);return t||(i?{prefix:"fas",iconName:i}:null)||{prefix:null,iconName:null}}function nu(){return k1}var z1=function(){return{prefix:null,iconName:null,rest:[]}};function zg(e){var t=I1[e],i=Dm[e]||Dm[t],l=e in Ms.styles?e:null;return i||l||null}function Fg(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,l=i===void 0?!1:i,c=null,d=e.reduce(function(y,a){var b=nL(yn.familyPrefix,a);if(Jf[a]?(a=Q4.includes(a)?I4[a]:a,c=a,y.prefix=a):eL.indexOf(a)>-1?(c=a,y.prefix=zg(a)):b?y.iconName=b:a!==yn.replacementClass&&y.rest.push(a),!l&&y.prefix&&y.iconName){var w=c==="fa"?MC(y.iconName):{},I=nh(y.prefix,y.iconName);w.prefix&&(c=null),y.iconName=w.iconName||I||y.iconName,y.prefix=w.prefix||y.prefix,y.prefix==="far"&&!Jf.far&&Jf.fas&&!yn.autoFetchSvg&&(y.prefix="fas")}return y},z1());return(d.prefix==="fa"||c==="fa")&&(d.prefix=nu()||"fas"),d}var oL=function(){function e(){m4(this,e),this.definitions={}}return g4(e,[{key:"add",value:function(){for(var i=this,l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var y=c.reduce(this._pullDefinitions,{});Object.keys(y).forEach(function(a){i.definitions[a]=Yt(Yt({},i.definitions[a]||{}),y[a]),Nv(a,y[a]);var b=yC[a];b&&Nv(b,y[a]),PC()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(i,l){var c=l.prefix&&l.iconName&&l.icon?{0:l}:l;return Object.keys(c).map(function(d){var y=c[d],a=y.prefix,b=y.iconName,w=y.icon,I=w[2];i[a]||(i[a]={}),I.length>0&&I.forEach(function(C){typeof C=="string"&&(i[a][C]=w)}),i[a][b]=w}),i}}]),e}(),y2=[],rh={},dh={},sL=Object.keys(dh);function aL(e,t){var i=t.mixoutsTo;return y2=e,rh={},Object.keys(dh).forEach(function(l){sL.indexOf(l)===-1&&delete dh[l]}),y2.forEach(function(l){var c=l.mixout?l.mixout():{};if(Object.keys(c).forEach(function(y){typeof c[y]=="function"&&(i[y]=c[y]),jm(c[y])==="object"&&Object.keys(c[y]).forEach(function(a){i[y]||(i[y]={}),i[y][a]=c[y][a]})}),l.hooks){var d=l.hooks();Object.keys(d).forEach(function(y){rh[y]||(rh[y]=[]),rh[y].push(d[y])})}l.provides&&l.provides(dh)}),i}function Uv(e,t){for(var i=arguments.length,l=new Array(i>2?i-2:0),c=2;c<i;c++)l[c-2]=arguments[c];var d=rh[e]||[];return d.forEach(function(y){t=y.apply(null,[t].concat(l))}),t}function Qu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];var c=rh[e]||[];c.forEach(function(d){d.apply(null,i)})}function Xa(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return dh[e]?dh[e].apply(null,t):void 0}function $v(e){e.prefix==="fa"&&(e.prefix="fas");var t=e.iconName,i=e.prefix||nu();if(t)return t=nh(i,t)||t,m2(kC.definitions,i,t)||m2(Ms.styles,i,t)}var kC=new oL,lL=function(){yn.autoReplaceSvg=!1,yn.observeMutations=!1,Qu("noAuto")},uL={i2svg:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ya?(Qu("beforeI2svg",t),Xa("pseudoElements2svg",t),Xa("i2svg",t)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot;yn.autoReplaceSvg===!1&&(yn.autoReplaceSvg=!0),yn.observeMutations=!0,X4(function(){hL({autoReplaceSvgRoot:i}),Qu("watch",t)})}},cL={icon:function(t){if(t===null)return null;if(jm(t)==="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:nh(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){var i=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],l=zg(t[0]);return{prefix:l,iconName:nh(l,i)||i}}if(typeof t=="string"&&(t.indexOf("".concat(yn.familyPrefix,"-"))>-1||t.match(P4))){var c=Fg(t.split(" "),{skipLookups:!0});return{prefix:c.prefix||nu(),iconName:nh(c.prefix,c.iconName)||c.iconName}}if(typeof t=="string"){var d=nu();return{prefix:d,iconName:nh(d,t)||t}}}},$o={noAuto:lL,config:yn,dom:uL,parse:cL,library:kC,findIconDefinition:$v,toHtml:zd},hL=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.autoReplaceSvgRoot,l=i===void 0?xr:i;(Object.keys(Ms.styles).length>0||yn.autoFetchSvg)&&Ya&&yn.autoReplaceSvg&&$o.dom.i2svg({node:l})};function Og(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(function(l){return zd(l)})}}),Object.defineProperty(e,"node",{get:function(){if(Ya){var l=xr.createElement("div");return l.innerHTML=e.html,l.children}}}),e}function fL(e){var t=e.children,i=e.main,l=e.mask,c=e.attributes,d=e.styles,y=e.transform;if(M1(y)&&i.found&&!l.found){var a=i.width,b=i.height,w={x:a/b/2,y:.5};c.style=Lg(Yt(Yt({},d),{},{"transform-origin":"".concat(w.x+y.x/16,"em ").concat(w.y+y.y/16,"em")}))}return[{tag:"svg",attributes:c,children:t}]}function dL(e){var t=e.prefix,i=e.iconName,l=e.children,c=e.attributes,d=e.symbol,y=d===!0?"".concat(t,"-").concat(yn.familyPrefix,"-").concat(i):d;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Yt(Yt({},c),{},{id:y}),children:l}]}]}function F1(e){var t=e.icons,i=t.main,l=t.mask,c=e.prefix,d=e.iconName,y=e.transform,a=e.symbol,b=e.title,w=e.maskId,I=e.titleId,C=e.extra,L=e.watchable,j=L===void 0?!1:L,ee=l.found?l:i,Y=ee.width,de=ee.height,G=c==="fak",V=[yn.replacementClass,d?"".concat(yn.familyPrefix,"-").concat(d):""].filter(function(W){return C.classes.indexOf(W)===-1}).filter(function(W){return W!==""||!!W}).concat(C.classes).join(" "),U={children:[],attributes:Yt(Yt({},C.attributes),{},{"data-prefix":c,"data-icon":d,class:V,role:C.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Y," ").concat(de)})},ie=G&&!~C.classes.indexOf("fa-fw")?{width:"".concat(Y/de*16*.0625,"em")}:{};j&&(U.attributes[Ju]=""),b&&(U.children.push({tag:"title",attributes:{id:U.attributes["aria-labelledby"]||"title-".concat(I||wd())},children:[b]}),delete U.attributes.title);var Z=Yt(Yt({},U),{},{prefix:c,iconName:d,main:i,mask:l,maskId:w,transform:y,symbol:a,styles:Yt(Yt({},ie),C.styles)}),B=l.found&&i.found?Xa("generateAbstractMask",Z)||{children:[],attributes:{}}:Xa("generateAbstractIcon",Z)||{children:[],attributes:{}},S=B.children,k=B.attributes;return Z.children=S,Z.attributes=k,a?dL(Z):fL(Z)}function v2(e){var t=e.content,i=e.width,l=e.height,c=e.transform,d=e.title,y=e.extra,a=e.watchable,b=a===void 0?!1:a,w=Yt(Yt(Yt({},y.attributes),d?{title:d}:{}),{},{class:y.classes.join(" ")});b&&(w[Ju]="");var I=Yt({},y.styles);M1(c)&&(I.transform=G4({transform:c,startCentered:!0,width:i,height:l}),I["-webkit-transform"]=I.transform);var C=Lg(I);C.length>0&&(w.style=C);var L=[];return L.push({tag:"span",attributes:w,children:[t]}),d&&L.push({tag:"span",attributes:{class:"sr-only"},children:[d]}),L}function pL(e){var t=e.content,i=e.title,l=e.extra,c=Yt(Yt(Yt({},l.attributes),i?{title:i}:{}),{},{class:l.classes.join(" ")}),d=Lg(l.styles);d.length>0&&(c.style=d);var y=[];return y.push({tag:"span",attributes:c,children:[t]}),i&&y.push({tag:"span",attributes:{class:"sr-only"},children:[i]}),y}var p0=Ms.styles;function Vv(e){var t=e[0],i=e[1],l=e.slice(4),c=S1(l,1),d=c[0],y=null;return Array.isArray(d)?y={tag:"g",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Gu.GROUP)},children:[{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Gu.SECONDARY),fill:"currentColor",d:d[0]}},{tag:"path",attributes:{class:"".concat(yn.familyPrefix,"-").concat(Gu.PRIMARY),fill:"currentColor",d:d[1]}}]}:y={tag:"path",attributes:{fill:"currentColor",d}},{found:!0,width:t,height:i,icon:y}}var mL={found:!1,width:512,height:512};function gL(e,t){!gC&&!yn.showMissingIcons&&e&&console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}function Gv(e,t){var i=t;return t==="fa"&&yn.styleDefault!==null&&(t=nu()),new Promise(function(l,c){if(Xa("missingIconAbstract"),i==="fa"){var d=MC(e)||{};e=d.iconName||e,t=d.prefix||t}if(e&&t&&p0[t]&&p0[t][e]){var y=p0[t][e];return l(Vv(y))}gL(e,t),l(Yt(Yt({},mL),{},{icon:yn.showMissingIcons&&e?Xa("missingIconAbstract")||{}:{}}))})}var _2=function(){},Zv=yn.measurePerformance&&Lp&&Lp.mark&&Lp.measure?Lp:{mark:_2,measure:_2},Ff='FA "6.0.0"',yL=function(t){return Zv.mark("".concat(Ff," ").concat(t," begins")),function(){return LC(t)}},LC=function(t){Zv.mark("".concat(Ff," ").concat(t," ends")),Zv.measure("".concat(Ff," ").concat(t),"".concat(Ff," ").concat(t," begins"),"".concat(Ff," ").concat(t," ends"))},O1={begin:yL,end:LC},rm=function(){};function x2(e){var t=e.getAttribute?e.getAttribute(Ju):null;return typeof t=="string"}function vL(e){var t=e.getAttribute?e.getAttribute(C1):null,i=e.getAttribute?e.getAttribute(A1):null;return t&&i}function _L(e){return e&&e.classList&&e.classList.contains&&e.classList.contains(yn.replacementClass)}function xL(){if(yn.autoReplaceSvg===!0)return im.replace;var e=im[yn.autoReplaceSvg];return e||im.replace}function wL(e){return xr.createElementNS("http://www.w3.org/2000/svg",e)}function bL(e){return xr.createElement(e)}function zC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.ceFn,l=i===void 0?e.tag==="svg"?wL:bL:i;if(typeof e=="string")return xr.createTextNode(e);var c=l(e.tag);Object.keys(e.attributes||[]).forEach(function(y){c.setAttribute(y,e.attributes[y])});var d=e.children||[];return d.forEach(function(y){c.appendChild(zC(y,{ceFn:l}))}),c}function EL(e){var t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}var im={replace:function(t){var i=t[0];if(i.parentNode)if(t[1].forEach(function(c){i.parentNode.insertBefore(zC(c),i)}),i.getAttribute(Ju)===null&&yn.keepOriginalSource){var l=xr.createComment(EL(i));i.parentNode.replaceChild(l,i)}else i.remove()},nest:function(t){var i=t[0],l=t[1];if(~P1(i).indexOf(yn.replacementClass))return im.replace(t);var c=new RegExp("".concat(yn.familyPrefix,"-.*"));if(delete l[0].attributes.id,l[0].attributes.class){var d=l[0].attributes.class.split(" ").reduce(function(a,b){return b===yn.replacementClass||b.match(c)?a.toSvg.push(b):a.toNode.push(b),a},{toNode:[],toSvg:[]});l[0].attributes.class=d.toSvg.join(" "),d.toNode.length===0?i.removeAttribute("class"):i.setAttribute("class",d.toNode.join(" "))}var y=l.map(function(a){return zd(a)}).join(`
`);i.setAttribute(Ju,""),i.innerHTML=y}};function w2(e){e()}function FC(e,t){var i=typeof t=="function"?t:rm;if(e.length===0)i();else{var l=w2;yn.mutateApproach===C4&&(l=tu.requestAnimationFrame||w2),l(function(){var c=xL(),d=O1.begin("mutate");e.map(c),d(),i()})}}var R1=!1;function OC(){R1=!0}function Wv(){R1=!1}var Nm=null;function b2(e){if(f2&&yn.observeMutations){var t=e.treeCallback,i=t===void 0?rm:t,l=e.nodeCallback,c=l===void 0?rm:l,d=e.pseudoElementsCallback,y=d===void 0?rm:d,a=e.observeMutationsRoot,b=a===void 0?xr:a;Nm=new f2(function(w){if(!R1){var I=nu();Lh(w).forEach(function(C){if(C.type==="childList"&&C.addedNodes.length>0&&!x2(C.addedNodes[0])&&(yn.searchPseudoElements&&y(C.target),i(C.target)),C.type==="attributes"&&C.target.parentNode&&yn.searchPseudoElements&&y(C.target.parentNode),C.type==="attributes"&&x2(C.target)&&~z4.indexOf(C.attributeName))if(C.attributeName==="class"&&vL(C.target)){var L=Fg(P1(C.target)),j=L.prefix,ee=L.iconName;C.target.setAttribute(C1,j||I),ee&&C.target.setAttribute(A1,ee)}else _L(C.target)&&c(C.target)})}}),Ya&&Nm.observe(b,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function SL(){Nm&&Nm.disconnect()}function TL(e){var t=e.getAttribute("style"),i=[];return t&&(i=t.split(";").reduce(function(l,c){var d=c.split(":"),y=d[0],a=d.slice(1);return y&&a.length>0&&(l[y]=a.join(":").trim()),l},{})),i}function CL(e){var t=e.getAttribute("data-prefix"),i=e.getAttribute("data-icon"),l=e.innerText!==void 0?e.innerText.trim():"",c=Fg(P1(e));return c.prefix||(c.prefix=nu()),t&&i&&(c.prefix=t,c.iconName=i),c.iconName&&c.prefix||c.prefix&&l.length>0&&(c.iconName=rL(c.prefix,e.innerText)||L1(c.prefix,Bv(e.innerText))),c}function AL(e){var t=Lh(e.attributes).reduce(function(c,d){return c.name!=="class"&&c.name!=="style"&&(c[d.name]=d.value),c},{}),i=e.getAttribute("title"),l=e.getAttribute("data-fa-title-id");return yn.autoA11y&&(i?t["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(l||wd()):(t["aria-hidden"]="true",t.focusable="false")),t}function IL(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ha,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function E2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},i=CL(e),l=i.iconName,c=i.prefix,d=i.rest,y=AL(e),a=Uv("parseNodeAttributes",{},e),b=t.styleParser?TL(e):[];return Yt({iconName:l,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:c,transform:ha,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:d,styles:b,attributes:y}},a)}var PL=Ms.styles;function RC(e){var t=yn.autoReplaceSvg==="nest"?E2(e,{styleParser:!1}):E2(e);return~t.extra.classes.indexOf(vC)?Xa("generateLayersText",e,t):Xa("generateSvgReplacementMutation",e,t)}function S2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ya)return Promise.resolve();var i=xr.documentElement.classList,l=function(C){return i.add("".concat(d2,"-").concat(C))},c=function(C){return i.remove("".concat(d2,"-").concat(C))},d=yn.autoFetchSvg?Object.keys(I1):Object.keys(PL),y=[".".concat(vC,":not([").concat(Ju,"])")].concat(d.map(function(I){return".".concat(I,":not([").concat(Ju,"])")})).join(", ");if(y.length===0)return Promise.resolve();var a=[];try{a=Lh(e.querySelectorAll(y))}catch{}if(a.length>0)l("pending"),c("complete");else return Promise.resolve();var b=O1.begin("onTree"),w=a.reduce(function(I,C){try{var L=RC(C);L&&I.push(L)}catch(j){gC||j.name==="MissingIcon"&&console.error(j)}return I},[]);return new Promise(function(I,C){Promise.all(w).then(function(L){FC(L,function(){l("active"),l("complete"),c("pending"),typeof t=="function"&&t(),b(),I()})}).catch(function(L){b(),C(L)})})}function ML(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;RC(e).then(function(i){i&&FC([i],t)})}function kL(e){return function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(t||{}).icon?t:$v(t||{}),c=i.mask;return c&&(c=(c||{}).icon?c:$v(c||{})),e(l,Yt(Yt({},i),{},{mask:c}))}}var LL=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.transform,c=l===void 0?ha:l,d=i.symbol,y=d===void 0?!1:d,a=i.mask,b=a===void 0?null:a,w=i.maskId,I=w===void 0?null:w,C=i.title,L=C===void 0?null:C,j=i.titleId,ee=j===void 0?null:j,Y=i.classes,de=Y===void 0?[]:Y,G=i.attributes,V=G===void 0?{}:G,U=i.styles,ie=U===void 0?{}:U;if(t){var Z=t.prefix,B=t.iconName,S=t.icon;return Og(Yt({type:"icon"},t),function(){return Qu("beforeDOMElementCreation",{iconDefinition:t,params:i}),yn.autoA11y&&(L?V["aria-labelledby"]="".concat(yn.replacementClass,"-title-").concat(ee||wd()):(V["aria-hidden"]="true",V.focusable="false")),F1({icons:{main:Vv(S),mask:b?Vv(b.icon):{found:!1,width:null,height:null,icon:{}}},prefix:Z,iconName:B,transform:Yt(Yt({},ha),c),symbol:y,title:L,maskId:I,titleId:ee,extra:{attributes:V,styles:ie,classes:de}})})}},zL={mixout:function(){return{icon:kL(LL)}},hooks:function(){return{mutationObserverCallbacks:function(i){return i.treeCallback=S2,i.nodeCallback=ML,i}}},provides:function(t){t.i2svg=function(i){var l=i.node,c=l===void 0?xr:l,d=i.callback,y=d===void 0?function(){}:d;return S2(c,y)},t.generateSvgReplacementMutation=function(i,l){var c=l.iconName,d=l.title,y=l.titleId,a=l.prefix,b=l.transform,w=l.symbol,I=l.mask,C=l.maskId,L=l.extra;return new Promise(function(j,ee){Promise.all([Gv(c,a),I.iconName?Gv(I.iconName,I.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Y){var de=S1(Y,2),G=de[0],V=de[1];j([i,F1({icons:{main:G,mask:V},prefix:a,iconName:c,transform:b,symbol:w,maskId:C,title:d,titleId:y,extra:L,watchable:!0})])}).catch(ee)})},t.generateAbstractIcon=function(i){var l=i.children,c=i.attributes,d=i.main,y=i.transform,a=i.styles,b=Lg(a);b.length>0&&(c.style=b);var w;return M1(y)&&(w=Xa("generateAbstractTransformGrouping",{main:d,transform:y,containerWidth:d.width,iconWidth:d.width})),l.push(w||d.icon),{children:l,attributes:c}}}},FL={mixout:function(){return{layer:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.classes,d=c===void 0?[]:c;return Og({type:"layer"},function(){Qu("beforeDOMElementCreation",{assembler:i,params:l});var y=[];return i(function(a){Array.isArray(a)?a.map(function(b){y=y.concat(b.abstract)}):y=y.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(yn.familyPrefix,"-layers")].concat(kg(d)).join(" ")},children:y}]})}}}},OL={mixout:function(){return{counter:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.title,d=c===void 0?null:c,y=l.classes,a=y===void 0?[]:y,b=l.attributes,w=b===void 0?{}:b,I=l.styles,C=I===void 0?{}:I;return Og({type:"counter",content:i},function(){return Qu("beforeDOMElementCreation",{content:i,params:l}),pL({content:i.toString(),title:d,extra:{attributes:w,styles:C,classes:["".concat(yn.familyPrefix,"-layers-counter")].concat(kg(a))}})})}}}},RL={mixout:function(){return{text:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.transform,d=c===void 0?ha:c,y=l.title,a=y===void 0?null:y,b=l.classes,w=b===void 0?[]:b,I=l.attributes,C=I===void 0?{}:I,L=l.styles,j=L===void 0?{}:L;return Og({type:"text",content:i},function(){return Qu("beforeDOMElementCreation",{content:i,params:l}),v2({content:i,transform:Yt(Yt({},ha),d),title:a,extra:{attributes:C,styles:j,classes:["".concat(yn.familyPrefix,"-layers-text")].concat(kg(w))}})})}}},provides:function(t){t.generateLayersText=function(i,l){var c=l.title,d=l.transform,y=l.extra,a=null,b=null;if(dC){var w=parseInt(getComputedStyle(i).fontSize,10),I=i.getBoundingClientRect();a=I.width/w,b=I.height/w}return yn.autoA11y&&!c&&(y.attributes["aria-hidden"]="true"),Promise.resolve([i,v2({content:i.innerHTML,width:a,height:b,transform:d,title:c,extra:y,watchable:!0})])}}},jL=new RegExp('"',"ug"),T2=[1105920,1112319];function DL(e){var t=e.replace(jL,""),i=Y4(t,0),l=i>=T2[0]&&i<=T2[1],c=t.length===2?t[0]===t[1]:!1;return{value:Bv(c?t[0]:t),isSecondary:l||c}}function C2(e,t){var i="".concat(T4).concat(t.replace(":","-"));return new Promise(function(l,c){if(e.getAttribute(i)!==null)return l();var d=Lh(e.children),y=d.filter(function(B){return B.getAttribute(Dv)===t})[0],a=tu.getComputedStyle(e,t),b=a.getPropertyValue("font-family").match(M4),w=a.getPropertyValue("font-weight"),I=a.getPropertyValue("content");if(y&&!b)return e.removeChild(y),l();if(b&&I!=="none"&&I!==""){var C=a.getPropertyValue("content"),L=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(b[2])?Dm[b[2].toLowerCase()]:k4[w],j=DL(C),ee=j.value,Y=j.isSecondary,de=b[0].startsWith("FontAwesome"),G=L1(L,ee),V=G;if(de){var U=iL(ee);U.iconName&&U.prefix&&(G=U.iconName,L=U.prefix)}if(G&&!Y&&(!y||y.getAttribute(C1)!==L||y.getAttribute(A1)!==V)){e.setAttribute(i,V),y&&e.removeChild(y);var ie=IL(),Z=ie.extra;Z.attributes[Dv]=t,Gv(G,L).then(function(B){var S=F1(Yt(Yt({},ie),{},{icons:{main:B,mask:z1()},prefix:L,iconName:V,extra:Z,watchable:!0})),k=xr.createElement("svg");t==="::before"?e.insertBefore(k,e.firstChild):e.appendChild(k),k.outerHTML=S.map(function(W){return zd(W)}).join(`
`),e.removeAttribute(i),l()}).catch(c)}else l()}else l()})}function BL(e){return Promise.all([C2(e,"::before"),C2(e,"::after")])}function NL(e){return e.parentNode!==document.head&&!~A4.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Dv)&&(!e.parentNode||e.parentNode.tagName!=="svg")}function A2(e){if(Ya)return new Promise(function(t,i){var l=Lh(e.querySelectorAll("*")).filter(NL).map(BL),c=O1.begin("searchPseudoElements");OC(),Promise.all(l).then(function(){c(),Wv(),t()}).catch(function(){c(),Wv(),i()})})}var UL={hooks:function(){return{mutationObserverCallbacks:function(i){return i.pseudoElementsCallback=A2,i}}},provides:function(t){t.pseudoElements2svg=function(i){var l=i.node,c=l===void 0?xr:l;yn.searchPseudoElements&&A2(c)}}},I2=!1,$L={mixout:function(){return{dom:{unwatch:function(){OC(),I2=!0}}}},hooks:function(){return{bootstrap:function(){b2(Uv("mutationObserverCallbacks",{}))},noAuto:function(){SL()},watch:function(i){var l=i.observeMutationsRoot;I2?Wv():b2(Uv("mutationObserverCallbacks",{observeMutationsRoot:l}))}}}},P2=function(t){var i={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce(function(l,c){var d=c.toLowerCase().split("-"),y=d[0],a=d.slice(1).join("-");if(y&&a==="h")return l.flipX=!0,l;if(y&&a==="v")return l.flipY=!0,l;if(a=parseFloat(a),isNaN(a))return l;switch(y){case"grow":l.size=l.size+a;break;case"shrink":l.size=l.size-a;break;case"left":l.x=l.x-a;break;case"right":l.x=l.x+a;break;case"up":l.y=l.y-a;break;case"down":l.y=l.y+a;break;case"rotate":l.rotate=l.rotate+a;break}return l},i)},VL={mixout:function(){return{parse:{transform:function(i){return P2(i)}}}},hooks:function(){return{parseNodeAttributes:function(i,l){var c=l.getAttribute("data-fa-transform");return c&&(i.transform=P2(c)),i}}},provides:function(t){t.generateAbstractTransformGrouping=function(i){var l=i.main,c=i.transform,d=i.containerWidth,y=i.iconWidth,a={transform:"translate(".concat(d/2," 256)")},b="translate(".concat(c.x*32,", ").concat(c.y*32,") "),w="scale(".concat(c.size/16*(c.flipX?-1:1),", ").concat(c.size/16*(c.flipY?-1:1),") "),I="rotate(".concat(c.rotate," 0 0)"),C={transform:"".concat(b," ").concat(w," ").concat(I)},L={transform:"translate(".concat(y/2*-1," -256)")},j={outer:a,inner:C,path:L};return{tag:"g",attributes:Yt({},j.outer),children:[{tag:"g",attributes:Yt({},j.inner),children:[{tag:l.icon.tag,children:l.icon.children,attributes:Yt(Yt({},l.icon.attributes),j.path)}]}]}}}},m0={x:0,y:0,width:"100%",height:"100%"};function M2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function GL(e){return e.tag==="g"?e.children:[e]}var ZL={hooks:function(){return{parseNodeAttributes:function(i,l){var c=l.getAttribute("data-fa-mask"),d=c?Fg(c.split(" ").map(function(y){return y.trim()})):z1();return d.prefix||(d.prefix=nu()),i.mask=d,i.maskId=l.getAttribute("data-fa-mask-id"),i}}},provides:function(t){t.generateAbstractMask=function(i){var l=i.children,c=i.attributes,d=i.main,y=i.mask,a=i.maskId,b=i.transform,w=d.width,I=d.icon,C=y.width,L=y.icon,j=V4({transform:b,containerWidth:C,iconWidth:w}),ee={tag:"rect",attributes:Yt(Yt({},m0),{},{fill:"white"})},Y=I.children?{children:I.children.map(M2)}:{},de={tag:"g",attributes:Yt({},j.inner),children:[M2(Yt({tag:I.tag,attributes:Yt(Yt({},I.attributes),j.path)},Y))]},G={tag:"g",attributes:Yt({},j.outer),children:[de]},V="mask-".concat(a||wd()),U="clip-".concat(a||wd()),ie={tag:"mask",attributes:Yt(Yt({},m0),{},{id:V,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[ee,G]},Z={tag:"defs",children:[{tag:"clipPath",attributes:{id:U},children:GL(L)},ie]};return l.push(Z,{tag:"rect",attributes:Yt({fill:"currentColor","clip-path":"url(#".concat(U,")"),mask:"url(#".concat(V,")")},m0)}),{children:l,attributes:c}}}},WL={provides:function(t){var i=!1;tu.matchMedia&&(i=tu.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){var l=[],c={fill:"currentColor"},d={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};l.push({tag:"path",attributes:Yt(Yt({},c),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var y=Yt(Yt({},d),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Yt(Yt({},c),{},{cx:"256",cy:"364",r:"28"}),children:[]};return i||a.children.push({tag:"animate",attributes:Yt(Yt({},d),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Yt(Yt({},y),{},{values:"1;0;1;1;0;1;"})}),l.push(a),l.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:i?[]:[{tag:"animate",attributes:Yt(Yt({},y),{},{values:"1;0;0;0;0;1;"})}]}),i||l.push({tag:"path",attributes:Yt(Yt({},c),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Yt(Yt({},y),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:l}}}},HL={hooks:function(){return{parseNodeAttributes:function(i,l){var c=l.getAttribute("data-fa-symbol"),d=c===null?!1:c===""?!0:c;return i.symbol=d,i}}}},XL=[W4,zL,FL,OL,RL,UL,$L,VL,ZL,WL,HL];aL(XL,{mixoutsTo:$o});$o.noAuto;$o.config;$o.library;$o.dom;var Hv=$o.parse;$o.findIconDefinition;$o.toHtml;var qL=$o.icon;$o.layer;$o.text;$o.counter;var jC={exports:{}},KL="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",YL=KL,JL=YL;function DC(){}function BC(){}BC.resetWarningCache=DC;var QL=function(){function e(l,c,d,y,a,b){if(b!==JL){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:BC,resetWarningCache:DC};return i.PropTypes=i,i};jC.exports=QL();var ez=jC.exports;const Yn=Cd(ez);function k2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,l)}return i}function Gl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?k2(Object(i),!0).forEach(function(l){ih(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k2(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function ih(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function tz(e,t){if(e==null)return{};var i={},l=Object.keys(e),c,d;for(d=0;d<l.length;d++)c=l[d],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function NC(e,t){if(e==null)return{};var i=tz(e,t),l,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)l=d[c],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}function Xv(e){return nz(e)||rz(e)||iz(e)||oz()}function nz(e){if(Array.isArray(e))return qv(e)}function rz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iz(e,t){if(e){if(typeof e=="string")return qv(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qv(e,t)}}function qv(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,l=new Array(t);i<t;i++)l[i]=e[i];return l}function oz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sz(e){var t,i=e.beat,l=e.fade,c=e.flash,d=e.spin,y=e.spinPulse,a=e.spinReverse,b=e.pulse,w=e.fixedWidth,I=e.inverse,C=e.border,L=e.listItem,j=e.flip,ee=e.size,Y=e.rotation,de=e.pull,G=(t={"fa-beat":i,"fa-fade":l,"fa-flash":c,"fa-spin":d,"fa-spin-reverse":a,"fa-spin-pulse":y,"fa-pulse":b,"fa-fw":w,"fa-inverse":I,"fa-border":C,"fa-li":L,"fa-flip-horizontal":j==="horizontal"||j==="both","fa-flip-vertical":j==="vertical"||j==="both"},ih(t,"fa-".concat(ee),typeof ee<"u"&&ee!==null),ih(t,"fa-rotate-".concat(Y),typeof Y<"u"&&Y!==null&&Y!==0),ih(t,"fa-pull-".concat(de),typeof de<"u"&&de!==null),ih(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(G).map(function(V){return G[V]?V:null}).filter(function(V){return V})}function az(e){return e=e-0,e===e}function UC(e){return az(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(t,i){return i?i.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}var lz=["style"];function uz(e){return e.charAt(0).toUpperCase()+e.slice(1)}function cz(e){return e.split(";").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var l=i.indexOf(":"),c=UC(i.slice(0,l)),d=i.slice(l+1).trim();return c.startsWith("webkit")?t[uz(c)]=d:t[c]=d,t},{})}function $C(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var l=(t.children||[]).map(function(b){return $C(e,b)}),c=Object.keys(t.attributes||{}).reduce(function(b,w){var I=t.attributes[w];switch(w){case"class":b.attrs.className=I,delete t.attributes.class;break;case"style":b.attrs.style=cz(I);break;default:w.indexOf("aria-")===0||w.indexOf("data-")===0?b.attrs[w.toLowerCase()]=I:b.attrs[UC(w)]=I}return b},{attrs:{}}),d=i.style,y=d===void 0?{}:d,a=NC(i,lz);return c.attrs.style=Gl(Gl({},c.attrs.style),y),e.apply(void 0,[t.tag,Gl(Gl({},c.attrs),a)].concat(Xv(l)))}var VC=!1;try{VC=!0}catch{}function hz(){if(!VC&&console&&typeof console.error=="function"){var e;(e=console).error.apply(e,arguments)}}function L2(e){if(e&&Um(e)==="object"&&e.prefix&&e.iconName&&e.icon)return e;if(Hv.icon)return Hv.icon(e);if(e===null)return null;if(e&&Um(e)==="object"&&e.prefix&&e.iconName)return e;if(Array.isArray(e)&&e.length===2)return{prefix:e[0],iconName:e[1]};if(typeof e=="string")return{prefix:"fas",iconName:e}}function g0(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?ih({},e,t):{}}var fz=["forwardedRef"];function pa(e){var t=e.forwardedRef,i=NC(e,fz),l=i.icon,c=i.mask,d=i.symbol,y=i.className,a=i.title,b=i.titleId,w=L2(l),I=g0("classes",[].concat(Xv(sz(i)),Xv(y.split(" ")))),C=g0("transform",typeof i.transform=="string"?Hv.transform(i.transform):i.transform),L=g0("mask",L2(c)),j=qL(w,Gl(Gl(Gl(Gl({},I),C),L),{},{symbol:d,title:a,titleId:b}));if(!j)return hz("Could not find icon",w),null;var ee=j.abstract,Y={ref:t};return Object.keys(i).forEach(function(de){pa.defaultProps.hasOwnProperty(de)||(Y[de]=i[de])}),dz(ee[0],Y)}pa.displayName="FontAwesomeIcon";pa.propTypes={beat:Yn.bool,border:Yn.bool,className:Yn.string,fade:Yn.bool,flash:Yn.bool,mask:Yn.oneOfType([Yn.object,Yn.array,Yn.string]),fixedWidth:Yn.bool,inverse:Yn.bool,flip:Yn.oneOf(["horizontal","vertical","both"]),icon:Yn.oneOfType([Yn.object,Yn.array,Yn.string]),listItem:Yn.bool,pull:Yn.oneOf(["right","left"]),pulse:Yn.bool,rotation:Yn.oneOf([0,90,180,270]),size:Yn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Yn.bool,spinPulse:Yn.bool,spinReverse:Yn.bool,symbol:Yn.oneOfType([Yn.bool,Yn.string]),title:Yn.string,transform:Yn.oneOfType([Yn.string,Yn.object]),swapOpacity:Yn.bool};pa.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var dz=$C.bind(null,YE.createElement);/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var pz={prefix:"fas",iconName:"magnifying-glass-plus",icon:[512,512,["search-plus"],"f00e","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7c-12.23-91.55-87.28-166-178.9-177.6c-136.2-17.24-250.7 97.28-233.4 233.4c11.6 91.64 86.07 166.7 177.6 178.9c53.81 7.191 104.3-6.235 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 .0003C515.9 484.7 515.9 459.3 500.3 443.7zM288 232H231.1V288c0 13.26-10.74 24-23.1 24C194.7 312 184 301.3 184 288V232H127.1C114.7 232 104 221.3 104 208s10.74-24 23.1-24H184V128c0-13.26 10.74-24 23.1-24S231.1 114.7 231.1 128v56h56C301.3 184 312 194.7 312 208S301.3 232 288 232z"]},mz=pz,Kv={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48C304 74.51 282.5 96 256 96C229.5 96 208 74.51 208 48C208 21.49 229.5 0 256 0C282.5 0 304 21.49 304 48zM304 464C304 490.5 282.5 512 256 512C229.5 512 208 490.5 208 464C208 437.5 229.5 416 256 416C282.5 416 304 437.5 304 464zM0 256C0 229.5 21.49 208 48 208C74.51 208 96 229.5 96 256C96 282.5 74.51 304 48 304C21.49 304 0 282.5 0 256zM512 256C512 282.5 490.5 304 464 304C437.5 304 416 282.5 416 256C416 229.5 437.5 208 464 208C490.5 208 512 229.5 512 256zM74.98 437C56.23 418.3 56.23 387.9 74.98 369.1C93.73 350.4 124.1 350.4 142.9 369.1C161.6 387.9 161.6 418.3 142.9 437C124.1 455.8 93.73 455.8 74.98 437V437zM142.9 142.9C124.1 161.6 93.73 161.6 74.98 142.9C56.24 124.1 56.24 93.73 74.98 74.98C93.73 56.23 124.1 56.23 142.9 74.98C161.6 93.73 161.6 124.1 142.9 142.9zM369.1 369.1C387.9 350.4 418.3 350.4 437 369.1C455.8 387.9 455.8 418.3 437 437C418.3 455.8 387.9 455.8 369.1 437C350.4 418.3 350.4 387.9 369.1 369.1V369.1z"]},gz={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function zp(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var GC={exports:{}};(function(e,t){(function(i){e.exports=i()})(function(){return function(){function i(l,c,d){function y(w,I){if(!c[w]){if(!l[w]){var C=typeof zp=="function"&&zp;if(!I&&C)return C(w,!0);if(a)return a(w,!0);var L=new Error("Cannot find module '"+w+"'");throw L.code="MODULE_NOT_FOUND",L}var j=c[w]={exports:{}};l[w][0].call(j.exports,function(ee){var Y=l[w][1][ee];return y(Y||ee)},j,j.exports,i,l,c,d)}return c[w].exports}for(var a=typeof zp=="function"&&zp,b=0;b<d.length;b++)y(d[b]);return y}return i}()({1:[function(i,l,c){c.byteLength=L,c.toByteArray=ee,c.fromByteArray=G;for(var d=[],y=[],a=typeof Uint8Array<"u"?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,I=b.length;w<I;++w)d[w]=b[w],y[b.charCodeAt(w)]=w;y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63;function C(V){var U=V.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ie=V.indexOf("=");ie===-1&&(ie=U);var Z=ie===U?0:4-ie%4;return[ie,Z]}function L(V){var U=C(V),ie=U[0],Z=U[1];return(ie+Z)*3/4-Z}function j(V,U,ie){return(U+ie)*3/4-ie}function ee(V){var U,ie=C(V),Z=ie[0],B=ie[1],S=new a(j(V,Z,B)),k=0,W=B>0?Z-4:Z,q;for(q=0;q<W;q+=4)U=y[V.charCodeAt(q)]<<18|y[V.charCodeAt(q+1)]<<12|y[V.charCodeAt(q+2)]<<6|y[V.charCodeAt(q+3)],S[k++]=U>>16&255,S[k++]=U>>8&255,S[k++]=U&255;return B===2&&(U=y[V.charCodeAt(q)]<<2|y[V.charCodeAt(q+1)]>>4,S[k++]=U&255),B===1&&(U=y[V.charCodeAt(q)]<<10|y[V.charCodeAt(q+1)]<<4|y[V.charCodeAt(q+2)]>>2,S[k++]=U>>8&255,S[k++]=U&255),S}function Y(V){return d[V>>18&63]+d[V>>12&63]+d[V>>6&63]+d[V&63]}function de(V,U,ie){for(var Z,B=[],S=U;S<ie;S+=3)Z=(V[S]<<16&16711680)+(V[S+1]<<8&65280)+(V[S+2]&255),B.push(Y(Z));return B.join("")}function G(V){for(var U,ie=V.length,Z=ie%3,B=[],S=16383,k=0,W=ie-Z;k<W;k+=S)B.push(de(V,k,k+S>W?W:k+S));return Z===1?(U=V[ie-1],B.push(d[U>>2]+d[U<<4&63]+"==")):Z===2&&(U=(V[ie-2]<<8)+V[ie-1],B.push(d[U>>10]+d[U>>4&63]+d[U<<2&63]+"=")),B.join("")}},{}],2:[function(i,l,c){(function(d){(function(){var y=i("base64-js"),a=i("ieee754");c.Buffer=C,c.SlowBuffer=Z,c.INSPECT_MAX_BYTES=50;var b=2147483647;c.kMaxLength=b,C.TYPED_ARRAY_SUPPORT=w(),!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function w(){try{var Te=new Uint8Array(1);return Te.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Te.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}}),Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function I(Te){if(Te>b)throw new RangeError('The value "'+Te+'" is invalid for option "size"');var M=new Uint8Array(Te);return M.__proto__=C.prototype,M}function C(Te,M,R){if(typeof Te=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Y(Te)}return L(Te,M,R)}typeof Symbol<"u"&&Symbol.species!=null&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),C.poolSize=8192;function L(Te,M,R){if(typeof Te=="string")return de(Te,M);if(ArrayBuffer.isView(Te))return G(Te);if(Te==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te);if(rn(Te,ArrayBuffer)||Te&&rn(Te.buffer,ArrayBuffer))return V(Te,M,R);if(typeof Te=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ve=Te.valueOf&&Te.valueOf();if(ve!=null&&ve!==Te)return C.from(ve,M,R);var Ne=U(Te);if(Ne)return Ne;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Te[Symbol.toPrimitive]=="function")return C.from(Te[Symbol.toPrimitive]("string"),M,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Te)}C.from=function(Te,M,R){return L(Te,M,R)},C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array;function j(Te){if(typeof Te!="number")throw new TypeError('"size" argument must be of type number');if(Te<0)throw new RangeError('The value "'+Te+'" is invalid for option "size"')}function ee(Te,M,R){return j(Te),Te<=0?I(Te):M!==void 0?typeof R=="string"?I(Te).fill(M,R):I(Te).fill(M):I(Te)}C.alloc=function(Te,M,R){return ee(Te,M,R)};function Y(Te){return j(Te),I(Te<0?0:ie(Te)|0)}C.allocUnsafe=function(Te){return Y(Te)},C.allocUnsafeSlow=function(Te){return Y(Te)};function de(Te,M){if((typeof M!="string"||M==="")&&(M="utf8"),!C.isEncoding(M))throw new TypeError("Unknown encoding: "+M);var R=B(Te,M)|0,ve=I(R),Ne=ve.write(Te,M);return Ne!==R&&(ve=ve.slice(0,Ne)),ve}function G(Te){for(var M=Te.length<0?0:ie(Te.length)|0,R=I(M),ve=0;ve<M;ve+=1)R[ve]=Te[ve]&255;return R}function V(Te,M,R){if(M<0||Te.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(Te.byteLength<M+(R||0))throw new RangeError('"length" is outside of buffer bounds');var ve;return M===void 0&&R===void 0?ve=new Uint8Array(Te):R===void 0?ve=new Uint8Array(Te,M):ve=new Uint8Array(Te,M,R),ve.__proto__=C.prototype,ve}function U(Te){if(C.isBuffer(Te)){var M=ie(Te.length)|0,R=I(M);return R.length===0||Te.copy(R,0,0,M),R}if(Te.length!==void 0)return typeof Te.length!="number"||xn(Te.length)?I(0):G(Te);if(Te.type==="Buffer"&&Array.isArray(Te.data))return G(Te.data)}function ie(Te){if(Te>=b)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+b.toString(16)+" bytes");return Te|0}function Z(Te){return+Te!=Te&&(Te=0),C.alloc(+Te)}C.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==C.prototype},C.compare=function(M,R){if(rn(M,Uint8Array)&&(M=C.from(M,M.offset,M.byteLength)),rn(R,Uint8Array)&&(R=C.from(R,R.offset,R.byteLength)),!C.isBuffer(M)||!C.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===R)return 0;for(var ve=M.length,Ne=R.length,qe=0,lt=Math.min(ve,Ne);qe<lt;++qe)if(M[qe]!==R[qe]){ve=M[qe],Ne=R[qe];break}return ve<Ne?-1:Ne<ve?1:0},C.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},C.concat=function(M,R){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return C.alloc(0);var ve;if(R===void 0)for(R=0,ve=0;ve<M.length;++ve)R+=M[ve].length;var Ne=C.allocUnsafe(R),qe=0;for(ve=0;ve<M.length;++ve){var lt=M[ve];if(rn(lt,Uint8Array)&&(lt=C.from(lt)),!C.isBuffer(lt))throw new TypeError('"list" argument must be an Array of Buffers');lt.copy(Ne,qe),qe+=lt.length}return Ne};function B(Te,M){if(C.isBuffer(Te))return Te.length;if(ArrayBuffer.isView(Te)||rn(Te,ArrayBuffer))return Te.byteLength;if(typeof Te!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Te);var R=Te.length,ve=arguments.length>2&&arguments[2]===!0;if(!ve&&R===0)return 0;for(var Ne=!1;;)switch(M){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return $t(Te).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Tn(Te).length;default:if(Ne)return ve?-1:$t(Te).length;M=(""+M).toLowerCase(),Ne=!0}}C.byteLength=B;function S(Te,M,R){var ve=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,M>>>=0,R<=M))return"";for(Te||(Te="utf8");;)switch(Te){case"hex":return Pe(this,M,R);case"utf8":case"utf-8":return re(this,M,R);case"ascii":return we(this,M,R);case"latin1":case"binary":return Ue(this,M,R);case"base64":return ne(this,M,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,M,R);default:if(ve)throw new TypeError("Unknown encoding: "+Te);Te=(Te+"").toLowerCase(),ve=!0}}C.prototype._isBuffer=!0;function k(Te,M,R){var ve=Te[M];Te[M]=Te[R],Te[R]=ve}C.prototype.swap16=function(){var M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<M;R+=2)k(this,R,R+1);return this},C.prototype.swap32=function(){var M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<M;R+=4)k(this,R,R+3),k(this,R+1,R+2);return this},C.prototype.swap64=function(){var M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<M;R+=8)k(this,R,R+7),k(this,R+1,R+6),k(this,R+2,R+5),k(this,R+3,R+4);return this},C.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?re(this,0,M):S.apply(this,arguments)},C.prototype.toLocaleString=C.prototype.toString,C.prototype.equals=function(M){if(!C.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:C.compare(this,M)===0},C.prototype.inspect=function(){var M="",R=c.INSPECT_MAX_BYTES;return M=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(M+=" ... "),"<Buffer "+M+">"},C.prototype.compare=function(M,R,ve,Ne,qe){if(rn(M,Uint8Array)&&(M=C.from(M,M.offset,M.byteLength)),!C.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(R===void 0&&(R=0),ve===void 0&&(ve=M?M.length:0),Ne===void 0&&(Ne=0),qe===void 0&&(qe=this.length),R<0||ve>M.length||Ne<0||qe>this.length)throw new RangeError("out of range index");if(Ne>=qe&&R>=ve)return 0;if(Ne>=qe)return-1;if(R>=ve)return 1;if(R>>>=0,ve>>>=0,Ne>>>=0,qe>>>=0,this===M)return 0;for(var lt=qe-Ne,le=ve-R,F=Math.min(lt,le),N=this.slice(Ne,qe),Ee=M.slice(R,ve),Ge=0;Ge<F;++Ge)if(N[Ge]!==Ee[Ge]){lt=N[Ge],le=Ee[Ge];break}return lt<le?-1:le<lt?1:0};function W(Te,M,R,ve,Ne){if(Te.length===0)return-1;if(typeof R=="string"?(ve=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,xn(R)&&(R=Ne?0:Te.length-1),R<0&&(R=Te.length+R),R>=Te.length){if(Ne)return-1;R=Te.length-1}else if(R<0)if(Ne)R=0;else return-1;if(typeof M=="string"&&(M=C.from(M,ve)),C.isBuffer(M))return M.length===0?-1:q(Te,M,R,ve,Ne);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?Ne?Uint8Array.prototype.indexOf.call(Te,M,R):Uint8Array.prototype.lastIndexOf.call(Te,M,R):q(Te,[M],R,ve,Ne);throw new TypeError("val must be string, number or Buffer")}function q(Te,M,R,ve,Ne){var qe=1,lt=Te.length,le=M.length;if(ve!==void 0&&(ve=String(ve).toLowerCase(),ve==="ucs2"||ve==="ucs-2"||ve==="utf16le"||ve==="utf-16le")){if(Te.length<2||M.length<2)return-1;qe=2,lt/=2,le/=2,R/=2}function F(Ve,Dt){return qe===1?Ve[Dt]:Ve.readUInt16BE(Dt*qe)}var N;if(Ne){var Ee=-1;for(N=R;N<lt;N++)if(F(Te,N)===F(M,Ee===-1?0:N-Ee)){if(Ee===-1&&(Ee=N),N-Ee+1===le)return Ee*qe}else Ee!==-1&&(N-=N-Ee),Ee=-1}else for(R+le>lt&&(R=lt-le),N=R;N>=0;N--){for(var Ge=!0,tt=0;tt<le;tt++)if(F(Te,N+tt)!==F(M,tt)){Ge=!1;break}if(Ge)return N}return-1}C.prototype.includes=function(M,R,ve){return this.indexOf(M,R,ve)!==-1},C.prototype.indexOf=function(M,R,ve){return W(this,M,R,ve,!0)},C.prototype.lastIndexOf=function(M,R,ve){return W(this,M,R,ve,!1)};function Q(Te,M,R,ve){R=Number(R)||0;var Ne=Te.length-R;ve?(ve=Number(ve),ve>Ne&&(ve=Ne)):ve=Ne;var qe=M.length;ve>qe/2&&(ve=qe/2);for(var lt=0;lt<ve;++lt){var le=parseInt(M.substr(lt*2,2),16);if(xn(le))return lt;Te[R+lt]=le}return lt}function ye(Te,M,R,ve){return En($t(M,Te.length-R),Te,R,ve)}function _e(Te,M,R,ve){return En(Nt(M),Te,R,ve)}function xe(Te,M,R,ve){return _e(Te,M,R,ve)}function te(Te,M,R,ve){return En(Tn(M),Te,R,ve)}function ue(Te,M,R,ve){return En(hn(M,Te.length-R),Te,R,ve)}C.prototype.write=function(M,R,ve,Ne){if(R===void 0)Ne="utf8",ve=this.length,R=0;else if(ve===void 0&&typeof R=="string")Ne=R,ve=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(ve)?(ve=ve>>>0,Ne===void 0&&(Ne="utf8")):(Ne=ve,ve=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var qe=this.length-R;if((ve===void 0||ve>qe)&&(ve=qe),M.length>0&&(ve<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ne||(Ne="utf8");for(var lt=!1;;)switch(Ne){case"hex":return Q(this,M,R,ve);case"utf8":case"utf-8":return ye(this,M,R,ve);case"ascii":return _e(this,M,R,ve);case"latin1":case"binary":return xe(this,M,R,ve);case"base64":return te(this,M,R,ve);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,M,R,ve);default:if(lt)throw new TypeError("Unknown encoding: "+Ne);Ne=(""+Ne).toLowerCase(),lt=!0}},C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ne(Te,M,R){return M===0&&R===Te.length?y.fromByteArray(Te):y.fromByteArray(Te.slice(M,R))}function re(Te,M,R){R=Math.min(Te.length,R);for(var ve=[],Ne=M;Ne<R;){var qe=Te[Ne],lt=null,le=qe>239?4:qe>223?3:qe>191?2:1;if(Ne+le<=R){var F,N,Ee,Ge;switch(le){case 1:qe<128&&(lt=qe);break;case 2:F=Te[Ne+1],(F&192)===128&&(Ge=(qe&31)<<6|F&63,Ge>127&&(lt=Ge));break;case 3:F=Te[Ne+1],N=Te[Ne+2],(F&192)===128&&(N&192)===128&&(Ge=(qe&15)<<12|(F&63)<<6|N&63,Ge>2047&&(Ge<55296||Ge>57343)&&(lt=Ge));break;case 4:F=Te[Ne+1],N=Te[Ne+2],Ee=Te[Ne+3],(F&192)===128&&(N&192)===128&&(Ee&192)===128&&(Ge=(qe&15)<<18|(F&63)<<12|(N&63)<<6|Ee&63,Ge>65535&&Ge<1114112&&(lt=Ge))}}lt===null?(lt=65533,le=1):lt>65535&&(lt-=65536,ve.push(lt>>>10&1023|55296),lt=56320|lt&1023),ve.push(lt),Ne+=le}return Se(ve)}var me=4096;function Se(Te){var M=Te.length;if(M<=me)return String.fromCharCode.apply(String,Te);for(var R="",ve=0;ve<M;)R+=String.fromCharCode.apply(String,Te.slice(ve,ve+=me));return R}function we(Te,M,R){var ve="";R=Math.min(Te.length,R);for(var Ne=M;Ne<R;++Ne)ve+=String.fromCharCode(Te[Ne]&127);return ve}function Ue(Te,M,R){var ve="";R=Math.min(Te.length,R);for(var Ne=M;Ne<R;++Ne)ve+=String.fromCharCode(Te[Ne]);return ve}function Pe(Te,M,R){var ve=Te.length;(!M||M<0)&&(M=0),(!R||R<0||R>ve)&&(R=ve);for(var Ne="",qe=M;qe<R;++qe)Ne+=Et(Te[qe]);return Ne}function ze(Te,M,R){for(var ve=Te.slice(M,R),Ne="",qe=0;qe<ve.length;qe+=2)Ne+=String.fromCharCode(ve[qe]+ve[qe+1]*256);return Ne}C.prototype.slice=function(M,R){var ve=this.length;M=~~M,R=R===void 0?ve:~~R,M<0?(M+=ve,M<0&&(M=0)):M>ve&&(M=ve),R<0?(R+=ve,R<0&&(R=0)):R>ve&&(R=ve),R<M&&(R=M);var Ne=this.subarray(M,R);return Ne.__proto__=C.prototype,Ne};function He(Te,M,R){if(Te%1!==0||Te<0)throw new RangeError("offset is not uint");if(Te+M>R)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUIntLE=function(M,R,ve){M=M>>>0,R=R>>>0,ve||He(M,R,this.length);for(var Ne=this[M],qe=1,lt=0;++lt<R&&(qe*=256);)Ne+=this[M+lt]*qe;return Ne},C.prototype.readUIntBE=function(M,R,ve){M=M>>>0,R=R>>>0,ve||He(M,R,this.length);for(var Ne=this[M+--R],qe=1;R>0&&(qe*=256);)Ne+=this[M+--R]*qe;return Ne},C.prototype.readUInt8=function(M,R){return M=M>>>0,R||He(M,1,this.length),this[M]},C.prototype.readUInt16LE=function(M,R){return M=M>>>0,R||He(M,2,this.length),this[M]|this[M+1]<<8},C.prototype.readUInt16BE=function(M,R){return M=M>>>0,R||He(M,2,this.length),this[M]<<8|this[M+1]},C.prototype.readUInt32LE=function(M,R){return M=M>>>0,R||He(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},C.prototype.readUInt32BE=function(M,R){return M=M>>>0,R||He(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},C.prototype.readIntLE=function(M,R,ve){M=M>>>0,R=R>>>0,ve||He(M,R,this.length);for(var Ne=this[M],qe=1,lt=0;++lt<R&&(qe*=256);)Ne+=this[M+lt]*qe;return qe*=128,Ne>=qe&&(Ne-=Math.pow(2,8*R)),Ne},C.prototype.readIntBE=function(M,R,ve){M=M>>>0,R=R>>>0,ve||He(M,R,this.length);for(var Ne=R,qe=1,lt=this[M+--Ne];Ne>0&&(qe*=256);)lt+=this[M+--Ne]*qe;return qe*=128,lt>=qe&&(lt-=Math.pow(2,8*R)),lt},C.prototype.readInt8=function(M,R){return M=M>>>0,R||He(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},C.prototype.readInt16LE=function(M,R){M=M>>>0,R||He(M,2,this.length);var ve=this[M]|this[M+1]<<8;return ve&32768?ve|4294901760:ve},C.prototype.readInt16BE=function(M,R){M=M>>>0,R||He(M,2,this.length);var ve=this[M+1]|this[M]<<8;return ve&32768?ve|4294901760:ve},C.prototype.readInt32LE=function(M,R){return M=M>>>0,R||He(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},C.prototype.readInt32BE=function(M,R){return M=M>>>0,R||He(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},C.prototype.readFloatLE=function(M,R){return M=M>>>0,R||He(M,4,this.length),a.read(this,M,!0,23,4)},C.prototype.readFloatBE=function(M,R){return M=M>>>0,R||He(M,4,this.length),a.read(this,M,!1,23,4)},C.prototype.readDoubleLE=function(M,R){return M=M>>>0,R||He(M,8,this.length),a.read(this,M,!0,52,8)},C.prototype.readDoubleBE=function(M,R){return M=M>>>0,R||He(M,8,this.length),a.read(this,M,!1,52,8)};function Ze(Te,M,R,ve,Ne,qe){if(!C.isBuffer(Te))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>Ne||M<qe)throw new RangeError('"value" argument is out of bounds');if(R+ve>Te.length)throw new RangeError("Index out of range")}C.prototype.writeUIntLE=function(M,R,ve,Ne){if(M=+M,R=R>>>0,ve=ve>>>0,!Ne){var qe=Math.pow(2,8*ve)-1;Ze(this,M,R,ve,qe,0)}var lt=1,le=0;for(this[R]=M&255;++le<ve&&(lt*=256);)this[R+le]=M/lt&255;return R+ve},C.prototype.writeUIntBE=function(M,R,ve,Ne){if(M=+M,R=R>>>0,ve=ve>>>0,!Ne){var qe=Math.pow(2,8*ve)-1;Ze(this,M,R,ve,qe,0)}var lt=ve-1,le=1;for(this[R+lt]=M&255;--lt>=0&&(le*=256);)this[R+lt]=M/le&255;return R+ve},C.prototype.writeUInt8=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,1,255,0),this[R]=M&255,R+1},C.prototype.writeUInt16LE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,2,65535,0),this[R]=M&255,this[R+1]=M>>>8,R+2},C.prototype.writeUInt16BE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,2,65535,0),this[R]=M>>>8,this[R+1]=M&255,R+2},C.prototype.writeUInt32LE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,4,4294967295,0),this[R+3]=M>>>24,this[R+2]=M>>>16,this[R+1]=M>>>8,this[R]=M&255,R+4},C.prototype.writeUInt32BE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,4,4294967295,0),this[R]=M>>>24,this[R+1]=M>>>16,this[R+2]=M>>>8,this[R+3]=M&255,R+4},C.prototype.writeIntLE=function(M,R,ve,Ne){if(M=+M,R=R>>>0,!Ne){var qe=Math.pow(2,8*ve-1);Ze(this,M,R,ve,qe-1,-qe)}var lt=0,le=1,F=0;for(this[R]=M&255;++lt<ve&&(le*=256);)M<0&&F===0&&this[R+lt-1]!==0&&(F=1),this[R+lt]=(M/le>>0)-F&255;return R+ve},C.prototype.writeIntBE=function(M,R,ve,Ne){if(M=+M,R=R>>>0,!Ne){var qe=Math.pow(2,8*ve-1);Ze(this,M,R,ve,qe-1,-qe)}var lt=ve-1,le=1,F=0;for(this[R+lt]=M&255;--lt>=0&&(le*=256);)M<0&&F===0&&this[R+lt+1]!==0&&(F=1),this[R+lt]=(M/le>>0)-F&255;return R+ve},C.prototype.writeInt8=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,1,127,-128),M<0&&(M=255+M+1),this[R]=M&255,R+1},C.prototype.writeInt16LE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,2,32767,-32768),this[R]=M&255,this[R+1]=M>>>8,R+2},C.prototype.writeInt16BE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,2,32767,-32768),this[R]=M>>>8,this[R+1]=M&255,R+2},C.prototype.writeInt32LE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,4,2147483647,-2147483648),this[R]=M&255,this[R+1]=M>>>8,this[R+2]=M>>>16,this[R+3]=M>>>24,R+4},C.prototype.writeInt32BE=function(M,R,ve){return M=+M,R=R>>>0,ve||Ze(this,M,R,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[R]=M>>>24,this[R+1]=M>>>16,this[R+2]=M>>>8,this[R+3]=M&255,R+4};function rt(Te,M,R,ve,Ne,qe){if(R+ve>Te.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ut(Te,M,R,ve,Ne){return M=+M,R=R>>>0,Ne||rt(Te,M,R,4),a.write(Te,M,R,ve,23,4),R+4}C.prototype.writeFloatLE=function(M,R,ve){return ut(this,M,R,!0,ve)},C.prototype.writeFloatBE=function(M,R,ve){return ut(this,M,R,!1,ve)};function gt(Te,M,R,ve,Ne){return M=+M,R=R>>>0,Ne||rt(Te,M,R,8),a.write(Te,M,R,ve,52,8),R+8}C.prototype.writeDoubleLE=function(M,R,ve){return gt(this,M,R,!0,ve)},C.prototype.writeDoubleBE=function(M,R,ve){return gt(this,M,R,!1,ve)},C.prototype.copy=function(M,R,ve,Ne){if(!C.isBuffer(M))throw new TypeError("argument should be a Buffer");if(ve||(ve=0),!Ne&&Ne!==0&&(Ne=this.length),R>=M.length&&(R=M.length),R||(R=0),Ne>0&&Ne<ve&&(Ne=ve),Ne===ve||M.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(ve<0||ve>=this.length)throw new RangeError("Index out of range");if(Ne<0)throw new RangeError("sourceEnd out of bounds");Ne>this.length&&(Ne=this.length),M.length-R<Ne-ve&&(Ne=M.length-R+ve);var qe=Ne-ve;if(this===M&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(R,ve,Ne);else if(this===M&&ve<R&&R<Ne)for(var lt=qe-1;lt>=0;--lt)M[lt+R]=this[lt+ve];else Uint8Array.prototype.set.call(M,this.subarray(ve,Ne),R);return qe},C.prototype.fill=function(M,R,ve,Ne){if(typeof M=="string"){if(typeof R=="string"?(Ne=R,R=0,ve=this.length):typeof ve=="string"&&(Ne=ve,ve=this.length),Ne!==void 0&&typeof Ne!="string")throw new TypeError("encoding must be a string");if(typeof Ne=="string"&&!C.isEncoding(Ne))throw new TypeError("Unknown encoding: "+Ne);if(M.length===1){var qe=M.charCodeAt(0);(Ne==="utf8"&&qe<128||Ne==="latin1")&&(M=qe)}}else typeof M=="number"&&(M=M&255);if(R<0||this.length<R||this.length<ve)throw new RangeError("Out of range index");if(ve<=R)return this;R=R>>>0,ve=ve===void 0?this.length:ve>>>0,M||(M=0);var lt;if(typeof M=="number")for(lt=R;lt<ve;++lt)this[lt]=M;else{var le=C.isBuffer(M)?M:C.from(M,Ne),F=le.length;if(F===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(lt=0;lt<ve-R;++lt)this[lt+R]=le[lt%F]}return this};var Ct=/[^+/0-9A-Za-z-_]/g;function ht(Te){if(Te=Te.split("=")[0],Te=Te.trim().replace(Ct,""),Te.length<2)return"";for(;Te.length%4!==0;)Te=Te+"=";return Te}function Et(Te){return Te<16?"0"+Te.toString(16):Te.toString(16)}function $t(Te,M){M=M||1/0;for(var R,ve=Te.length,Ne=null,qe=[],lt=0;lt<ve;++lt){if(R=Te.charCodeAt(lt),R>55295&&R<57344){if(!Ne){if(R>56319){(M-=3)>-1&&qe.push(239,191,189);continue}else if(lt+1===ve){(M-=3)>-1&&qe.push(239,191,189);continue}Ne=R;continue}if(R<56320){(M-=3)>-1&&qe.push(239,191,189),Ne=R;continue}R=(Ne-55296<<10|R-56320)+65536}else Ne&&(M-=3)>-1&&qe.push(239,191,189);if(Ne=null,R<128){if((M-=1)<0)break;qe.push(R)}else if(R<2048){if((M-=2)<0)break;qe.push(R>>6|192,R&63|128)}else if(R<65536){if((M-=3)<0)break;qe.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((M-=4)<0)break;qe.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return qe}function Nt(Te){for(var M=[],R=0;R<Te.length;++R)M.push(Te.charCodeAt(R)&255);return M}function hn(Te,M){for(var R,ve,Ne,qe=[],lt=0;lt<Te.length&&!((M-=2)<0);++lt)R=Te.charCodeAt(lt),ve=R>>8,Ne=R%256,qe.push(Ne),qe.push(ve);return qe}function Tn(Te){return y.toByteArray(ht(Te))}function En(Te,M,R,ve){for(var Ne=0;Ne<ve&&!(Ne+R>=M.length||Ne>=Te.length);++Ne)M[Ne+R]=Te[Ne];return Ne}function rn(Te,M){return Te instanceof M||Te!=null&&Te.constructor!=null&&Te.constructor.name!=null&&Te.constructor.name===M.name}function xn(Te){return Te!==Te}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:14}],3:[function(i,l,c){const d=i("./validator"),y=i("./xmlparser/XMLParser"),a=i("./xmlbuilder/json2xml");l.exports={XMLParser:y,XMLValidator:d,XMLBuilder:a}},{"./validator":5,"./xmlbuilder/json2xml":6,"./xmlparser/XMLParser":11}],4:[function(i,l,c){const d=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",y=d+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",a="["+d+"]["+y+"]*",b=new RegExp("^"+a+"$"),w=function(C,L){const j=[];let ee=L.exec(C);for(;ee;){const Y=[];Y.startIndex=L.lastIndex-ee[0].length;const de=ee.length;for(let G=0;G<de;G++)Y.push(ee[G]);j.push(Y),ee=L.exec(C)}return j},I=function(C){const L=b.exec(C);return!(L===null||typeof L>"u")};c.isExist=function(C){return typeof C<"u"},c.isEmptyObject=function(C){return Object.keys(C).length===0},c.merge=function(C,L,j){if(L){const ee=Object.keys(L),Y=ee.length;for(let de=0;de<Y;de++)j==="strict"?C[ee[de]]=[L[ee[de]]]:C[ee[de]]=L[ee[de]]}},c.getValue=function(C){return c.isExist(C)?C:""},c.isName=I,c.getAllMatches=w,c.nameRegexp=a},{}],5:[function(i,l,c){const d=i("./util"),y={allowBooleanAttributes:!1,unpairedTags:[]};c.validate=function(B,S){S=Object.assign({},y,S);const k=[];let W=!1,q=!1;B[0]==="\uFEFF"&&(B=B.substr(1));for(let Q=0;Q<B.length;Q++)if(B[Q]==="<"&&B[Q+1]==="?"){if(Q+=2,Q=b(B,Q),Q.err)return Q}else if(B[Q]==="<"){let ye=Q;if(Q++,B[Q]==="!"){Q=w(B,Q);continue}else{let _e=!1;B[Q]==="/"&&(_e=!0,Q++);let xe="";for(;Q<B.length&&B[Q]!==">"&&B[Q]!==" "&&B[Q]!=="	"&&B[Q]!==`
`&&B[Q]!=="\r";Q++)xe+=B[Q];if(xe=xe.trim(),xe[xe.length-1]==="/"&&(xe=xe.substring(0,xe.length-1),Q--),!U(xe)){let ne;return xe.trim().length===0?ne="Invalid space after '<'.":ne="Tag '"+xe+"' is an invalid name.",G("InvalidTag",ne,ie(B,Q))}const te=L(B,Q);if(te===!1)return G("InvalidAttr","Attributes for '"+xe+"' have open quote.",ie(B,Q));let ue=te.value;if(Q=te.index,ue[ue.length-1]==="/"){const ne=Q-ue.length;ue=ue.substring(0,ue.length-1);const re=ee(ue,S);if(re===!0)W=!0;else return G(re.err.code,re.err.msg,ie(B,ne+re.err.line))}else if(_e)if(te.tagClosed){if(ue.trim().length>0)return G("InvalidTag","Closing tag '"+xe+"' can't have attributes or invalid starting.",ie(B,ye));{const ne=k.pop();if(xe!==ne.tagName){let re=ie(B,ne.tagStartPos);return G("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+re.line+", col "+re.col+") instead of closing tag '"+xe+"'.",ie(B,ye))}k.length==0&&(q=!0)}}else return G("InvalidTag","Closing tag '"+xe+"' doesn't have proper closing.",ie(B,Q));else{const ne=ee(ue,S);if(ne!==!0)return G(ne.err.code,ne.err.msg,ie(B,Q-ue.length+ne.err.line));if(q===!0)return G("InvalidXml","Multiple possible root nodes found.",ie(B,Q));S.unpairedTags.indexOf(xe)!==-1||k.push({tagName:xe,tagStartPos:ye}),W=!0}for(Q++;Q<B.length;Q++)if(B[Q]==="<")if(B[Q+1]==="!"){Q++,Q=w(B,Q);continue}else if(B[Q+1]==="?"){if(Q=b(B,++Q),Q.err)return Q}else break;else if(B[Q]==="&"){const ne=de(B,Q);if(ne==-1)return G("InvalidChar","char '&' is not expected.",ie(B,Q));Q=ne}else if(q===!0&&!a(B[Q]))return G("InvalidXml","Extra text at the end",ie(B,Q));B[Q]==="<"&&Q--}}else{if(a(B[Q]))continue;return G("InvalidChar","char '"+B[Q]+"' is not expected.",ie(B,Q))}if(W){if(k.length==1)return G("InvalidTag","Unclosed tag '"+k[0].tagName+"'.",ie(B,k[0].tagStartPos));if(k.length>0)return G("InvalidXml","Invalid '"+JSON.stringify(k.map(Q=>Q.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return G("InvalidXml","Start tag expected.",1);return!0};function a(B){return B===" "||B==="	"||B===`
`||B==="\r"}function b(B,S){const k=S;for(;S<B.length;S++)if(B[S]=="?"||B[S]==" "){const W=B.substr(k,S-k);if(S>5&&W==="xml")return G("InvalidXml","XML declaration allowed only at the start of the document.",ie(B,S));if(B[S]=="?"&&B[S+1]==">"){S++;break}else continue}return S}function w(B,S){if(B.length>S+5&&B[S+1]==="-"&&B[S+2]==="-"){for(S+=3;S<B.length;S++)if(B[S]==="-"&&B[S+1]==="-"&&B[S+2]===">"){S+=2;break}}else if(B.length>S+8&&B[S+1]==="D"&&B[S+2]==="O"&&B[S+3]==="C"&&B[S+4]==="T"&&B[S+5]==="Y"&&B[S+6]==="P"&&B[S+7]==="E"){let k=1;for(S+=8;S<B.length;S++)if(B[S]==="<")k++;else if(B[S]===">"&&(k--,k===0))break}else if(B.length>S+9&&B[S+1]==="["&&B[S+2]==="C"&&B[S+3]==="D"&&B[S+4]==="A"&&B[S+5]==="T"&&B[S+6]==="A"&&B[S+7]==="["){for(S+=8;S<B.length;S++)if(B[S]==="]"&&B[S+1]==="]"&&B[S+2]===">"){S+=2;break}}return S}const I='"',C="'";function L(B,S){let k="",W="",q=!1;for(;S<B.length;S++){if(B[S]===I||B[S]===C)W===""?W=B[S]:W!==B[S]||(W="");else if(B[S]===">"&&W===""){q=!0;break}k+=B[S]}return W!==""?!1:{value:k,index:S,tagClosed:q}}const j=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ee(B,S){const k=d.getAllMatches(B,j),W={};for(let q=0;q<k.length;q++){if(k[q][1].length===0)return G("InvalidAttr","Attribute '"+k[q][2]+"' has no space in starting.",Z(k[q]));if(k[q][3]!==void 0&&k[q][4]===void 0)return G("InvalidAttr","Attribute '"+k[q][2]+"' is without value.",Z(k[q]));if(k[q][3]===void 0&&!S.allowBooleanAttributes)return G("InvalidAttr","boolean attribute '"+k[q][2]+"' is not allowed.",Z(k[q]));const Q=k[q][2];if(!V(Q))return G("InvalidAttr","Attribute '"+Q+"' is an invalid name.",Z(k[q]));if(!W.hasOwnProperty(Q))W[Q]=1;else return G("InvalidAttr","Attribute '"+Q+"' is repeated.",Z(k[q]))}return!0}function Y(B,S){let k=/\d/;for(B[S]==="x"&&(S++,k=/[\da-fA-F]/);S<B.length;S++){if(B[S]===";")return S;if(!B[S].match(k))break}return-1}function de(B,S){if(S++,B[S]===";")return-1;if(B[S]==="#")return S++,Y(B,S);let k=0;for(;S<B.length;S++,k++)if(!(B[S].match(/\w/)&&k<20)){if(B[S]===";")break;return-1}return S}function G(B,S,k){return{err:{code:B,msg:S,line:k.line||k,col:k.col}}}function V(B){return d.isName(B)}function U(B){return d.isName(B)}function ie(B,S){const k=B.substring(0,S).split(/\r?\n/);return{line:k.length,col:k[k.length-1].length+1}}function Z(B){return B.startIndex+B[1].length}},{"./util":4}],6:[function(i,l,c){const d=i("./orderedJs2Xml"),y={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(G,V){return V},attributeValueProcessor:function(G,V){return V},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function a(G){this.options=Object.assign({},y,G),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=de),this.processTextOrObjNode=w,this.options.format?(this.indentate=Y,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=ee,this.buildObjNode=C):(this.buildTextNode=L,this.buildObjNode=I),this.buildTextValNode=L,this.buildObjectNode=I,this.replaceEntitiesValue=j,this.buildAttrPairStr=b}a.prototype.build=function(G){return this.options.preserveOrder?d(G,this.options):(Array.isArray(G)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(G={[this.options.arrayNodeName]:G}),this.j2x(G,0).val)},a.prototype.j2x=function(G,V){let U="",ie="";for(let Z in G)if(!(typeof G[Z]>"u"))if(G[Z]===null)Z[0]==="?"?ie+=this.indentate(V)+"<"+Z+"?"+this.tagEndChar:ie+=this.indentate(V)+"<"+Z+"/"+this.tagEndChar;else if(G[Z]instanceof Date)ie+=this.buildTextNode(G[Z],Z,"",V);else if(typeof G[Z]!="object"){const B=this.isAttribute(Z);if(B)U+=this.buildAttrPairStr(B,""+G[Z]);else if(Z===this.options.textNodeName){let S=this.options.tagValueProcessor(Z,""+G[Z]);ie+=this.replaceEntitiesValue(S)}else ie+=this.buildTextNode(G[Z],Z,"",V)}else if(Array.isArray(G[Z])){const B=G[Z].length;for(let S=0;S<B;S++){const k=G[Z][S];typeof k>"u"||(k===null?Z[0]==="?"?ie+=this.indentate(V)+"<"+Z+"?"+this.tagEndChar:ie+=this.indentate(V)+"<"+Z+"/"+this.tagEndChar:typeof k=="object"?ie+=this.processTextOrObjNode(k,Z,V):ie+=this.buildTextNode(k,Z,"",V))}}else if(this.options.attributesGroupName&&Z===this.options.attributesGroupName){const B=Object.keys(G[Z]),S=B.length;for(let k=0;k<S;k++)U+=this.buildAttrPairStr(B[k],""+G[Z][B[k]])}else ie+=this.processTextOrObjNode(G[Z],Z,V);return{attrStr:U,val:ie}};function b(G,V){return V=this.options.attributeValueProcessor(G,""+V),V=this.replaceEntitiesValue(V),this.options.suppressBooleanAttributes&&V==="true"?" "+G:" "+G+'="'+V+'"'}function w(G,V,U){const ie=this.j2x(G,U+1);return G[this.options.textNodeName]!==void 0&&Object.keys(G).length===1?this.buildTextNode(G[this.options.textNodeName],V,ie.attrStr,U):this.buildObjNode(ie.val,V,ie.attrStr,U)}function I(G,V,U,ie){let Z="</"+V+this.tagEndChar,B="";return V[0]==="?"&&(B="?",Z=""),U&&G.indexOf("<")===-1?this.indentate(ie)+"<"+V+U+B+">"+G+Z:this.options.commentPropName!==!1&&V===this.options.commentPropName&&B.length===0?this.indentate(ie)+`<!--${G}-->`+this.newLine:this.indentate(ie)+"<"+V+U+B+this.tagEndChar+G+this.indentate(ie)+Z}function C(G,V,U,ie){return G!==""?this.buildObjectNode(G,V,U,ie):V[0]==="?"?this.indentate(ie)+"<"+V+U+"?"+this.tagEndChar:this.indentate(ie)+"<"+V+U+"/"+this.tagEndChar}function L(G,V,U,ie){if(this.options.cdataPropName!==!1&&V===this.options.cdataPropName)return this.indentate(ie)+`<![CDATA[${G}]]>`+this.newLine;if(this.options.commentPropName!==!1&&V===this.options.commentPropName)return this.indentate(ie)+`<!--${G}-->`+this.newLine;{let Z=this.options.tagValueProcessor(V,G);return Z=this.replaceEntitiesValue(Z),Z===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(ie)+"<"+V+this.tagEndChar:this.indentate(ie)+"<"+V+"/"+this.tagEndChar:this.indentate(ie)+"<"+V+U+">"+Z+"</"+V+this.tagEndChar}}function j(G){if(G&&G.length>0&&this.options.processEntities)for(let V=0;V<this.options.entities.length;V++){const U=this.options.entities[V];G=G.replace(U.regex,U.val)}return G}function ee(G,V,U,ie){return G===""&&this.options.unpairedTags.indexOf(V)!==-1?this.options.suppressUnpairedNode?this.indentate(ie)+"<"+V+this.tagEndChar:this.indentate(ie)+"<"+V+"/"+this.tagEndChar:G!==""?this.buildTextValNode(G,V,U,ie):V[0]==="?"?this.indentate(ie)+"<"+V+U+"?"+this.tagEndChar:this.indentate(ie)+"<"+V+U+"/"+this.tagEndChar}function Y(G){return this.options.indentBy.repeat(G)}function de(G){return G.startsWith(this.options.attributeNamePrefix)?G.substr(this.attrPrefixLen):!1}l.exports=a},{"./orderedJs2Xml":7}],7:[function(i,l,c){const d=`
`;function y(L,j){return a(L,j,"",0)}function a(L,j,ee,Y){let de="",G="";j.format&&j.indentBy.length>0&&(G=d+""+j.indentBy.repeat(Y));for(let V=0;V<L.length;V++){const U=L[V],ie=b(U);let Z="";if(ee.length===0?Z=ie:Z=`${ee}.${ie}`,ie===j.textNodeName){let W=U[ie];I(Z,j)||(W=j.tagValueProcessor(ie,W),W=C(W,j)),de+=G+W;continue}else if(ie===j.cdataPropName){de+=G+`<![CDATA[${U[ie][0][j.textNodeName]}]]>`;continue}else if(ie===j.commentPropName){de+=G+`<!--${U[ie][0][j.textNodeName]}-->`;continue}else if(ie[0]==="?"){const W=w(U[":@"],j),q=ie==="?xml"?"":G;let Q=U[ie][0][j.textNodeName];Q=Q.length!==0?" "+Q:"",de+=q+`<${ie}${Q}${W}?>`;continue}const B=w(U[":@"],j);let S=G+`<${ie}${B}`,k=a(U[ie],j,Z,Y+1);j.unpairedTags.indexOf(ie)!==-1?j.suppressUnpairedNode?de+=S+">":de+=S+"/>":(!k||k.length===0)&&j.suppressEmptyNode?de+=S+"/>":de+=S+`>${k}${G}</${ie}>`}return de}function b(L){const j=Object.keys(L);for(let ee=0;ee<j.length;ee++){const Y=j[ee];if(Y!==":@")return Y}}function w(L,j){let ee="";if(L&&!j.ignoreAttributes)for(let Y in L){let de=j.attributeValueProcessor(Y,L[Y]);de=C(de,j),de===!0&&j.suppressBooleanAttributes?ee+=` ${Y.substr(j.attributeNamePrefix.length)}`:ee+=` ${Y.substr(j.attributeNamePrefix.length)}="${de}"`}return ee}function I(L,j){L=L.substr(0,L.length-j.textNodeName.length-1);let ee=L.substr(L.lastIndexOf(".")+1);for(let Y in j.stopNodes)if(j.stopNodes[Y]===L||j.stopNodes[Y]==="*."+ee)return!0;return!1}function C(L,j){if(L&&L.length>0&&j.processEntities)for(let ee=0;ee<j.entities.length;ee++){const Y=j.entities[ee];L=L.replace(Y.regex,Y.val)}return L}l.exports=y},{}],8:[function(i,l,c){function d(b,w){const I={};if(b[w+3]==="O"&&b[w+4]==="C"&&b[w+5]==="T"&&b[w+6]==="Y"&&b[w+7]==="P"&&b[w+8]==="E"){w=w+9;let C=1,L=!1,j=!1,ee=!1,Y="";for(;w<b.length;w++)if(b[w]==="<"){if(L&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="N"&&b[w+4]==="T"&&b[w+5]==="I"&&b[w+6]==="T"&&b[w+7]==="Y")w+=7,j=!0;else if(L&&b[w+1]==="!"&&b[w+2]==="E"&&b[w+3]==="L"&&b[w+4]==="E"&&b[w+5]==="M"&&b[w+6]==="E"&&b[w+7]==="N"&&b[w+8]==="T")w+=8;else if(b[w+1]==="!"&&b[w+2]==="-"&&b[w+3]==="-")ee=!0;else throw new Error("Invalid DOCTYPE");C++,Y=""}else if(b[w]===">"){if(ee)if(b[w-1]==="-"&&b[w-2]==="-")ee=!1;else throw new Error("Invalid XML comment in DOCTYPE");else j&&(a(Y,I),j=!1);if(C--,C===0)break}else b[w]==="["?L=!0:Y+=b[w];if(C!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:I,i:w}}const y=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function a(b,w){const I=y.exec(b);I&&(w[I[1]]={regx:RegExp(`&${I[1]};`,"g"),val:I[3]})}l.exports=d},{}],9:[function(i,l,c){const d={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(a,b){return b},attributeValueProcessor:function(a,b){return b},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},y=function(a){return Object.assign({},d,a)};c.buildOptions=y,c.defaultOptions=d},{}],10:[function(i,l,c){const d=i("../util"),y=i("./xmlNode"),a=i("./DocTypeReader"),b=i("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,d.nameRegexp);class w{constructor(W){this.options=W,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=I,this.parseXml=Y,this.parseTextData=C,this.resolveNameSpace=L,this.buildAttributesMap=ee,this.isItStopNode=V,this.replaceEntitiesValue=de,this.readStopNodeData=B,this.saveTextToParentTag=G}}function I(k){const W=Object.keys(k);for(let q=0;q<W.length;q++){const Q=W[q];this.lastEntities[Q]={regex:new RegExp("&"+Q+";","g"),val:k[Q]}}}function C(k,W,q,Q,ye,_e,xe){if(k!==void 0&&(this.options.trimValues&&!Q&&(k=k.trim()),k.length>0)){xe||(k=this.replaceEntitiesValue(k));const te=this.options.tagValueProcessor(W,k,q,ye,_e);return te==null?k:typeof te!=typeof k||te!==k?te:this.options.trimValues?S(k,this.options.parseTagValue,this.options.numberParseOptions):k.trim()===k?S(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function L(k){if(this.options.removeNSPrefix){const W=k.split(":"),q=k.charAt(0)==="/"?"/":"";if(W[0]==="xmlns")return"";W.length===2&&(k=q+W[1])}return k}const j=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ee(k,W){if(!this.options.ignoreAttributes&&typeof k=="string"){const q=d.getAllMatches(k,j),Q=q.length,ye={};for(let _e=0;_e<Q;_e++){const xe=this.resolveNameSpace(q[_e][1]);let te=q[_e][4];const ue=this.options.attributeNamePrefix+xe;if(xe.length)if(te!==void 0){this.options.trimValues&&(te=te.trim()),te=this.replaceEntitiesValue(te);const ne=this.options.attributeValueProcessor(xe,te,W);ne==null?ye[ue]=te:typeof ne!=typeof te||ne!==te?ye[ue]=ne:ye[ue]=S(te,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(ye[ue]=!0)}if(!Object.keys(ye).length)return;if(this.options.attributesGroupName){const _e={};return _e[this.options.attributesGroupName]=ye,_e}return ye}}const Y=function(k){k=k.replace(/\r\n?/g,`
`);const W=new y("!xml");let q=W,Q="",ye="";for(let _e=0;_e<k.length;_e++)if(k[_e]==="<")if(k[_e+1]==="/"){const te=ie(k,">",_e,"Closing Tag is not closed.");let ue=k.substring(_e+2,te).trim();if(this.options.removeNSPrefix){const ne=ue.indexOf(":");ne!==-1&&(ue=ue.substr(ne+1))}q&&(Q=this.saveTextToParentTag(Q,q,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),q=this.tagsNodeStack.pop(),Q="",_e=te}else if(k[_e+1]==="?"){let te=Z(k,_e,!1,"?>");if(!te)throw new Error("Pi Tag is not closed.");if(Q=this.saveTextToParentTag(Q,q,ye),!(this.options.ignoreDeclaration&&te.tagName==="?xml"||this.options.ignorePiTags)){const ue=new y(te.tagName);ue.add(this.options.textNodeName,""),te.tagName!==te.tagExp&&te.attrExpPresent&&(ue[":@"]=this.buildAttributesMap(te.tagExp,ye)),q.addChild(ue)}_e=te.closeIndex+1}else if(k.substr(_e+1,3)==="!--"){const te=ie(k,"-->",_e+4,"Comment is not closed.");if(this.options.commentPropName){const ue=k.substring(_e+4,te-2);Q=this.saveTextToParentTag(Q,q,ye),q.add(this.options.commentPropName,[{[this.options.textNodeName]:ue}])}_e=te}else if(k.substr(_e+1,2)==="!D"){const te=a(k,_e);this.docTypeEntities=te.entities,_e=te.i}else if(k.substr(_e+1,2)==="!["){const te=ie(k,"]]>",_e,"CDATA is not closed.")-2,ue=k.substring(_e+9,te);if(Q=this.saveTextToParentTag(Q,q,ye),this.options.cdataPropName)q.add(this.options.cdataPropName,[{[this.options.textNodeName]:ue}]);else{let ne=this.parseTextData(ue,q.tagname,ye,!0,!1,!0);ne||(ne=""),q.add(this.options.textNodeName,ne)}_e=te+2}else{let te=Z(k,_e,this.options.removeNSPrefix),ue=te.tagName,ne=te.tagExp,re=te.attrExpPresent,me=te.closeIndex;q&&Q&&q.tagname!=="!xml"&&(Q=this.saveTextToParentTag(Q,q,ye,!1)),ue!==W.tagname&&(ye+=ye?"."+ue:ue);const Se=q;if(Se&&this.options.unpairedTags.indexOf(Se.tagname)!==-1&&(q=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,ye,ue)){let we="";if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)_e=te.closeIndex;else if(this.options.unpairedTags.indexOf(ue)!==-1)_e=te.closeIndex;else{const Pe=this.readStopNodeData(k,ue,me+1);if(!Pe)throw new Error(`Unexpected end of ${ue}`);_e=Pe.i,we=Pe.tagContent}const Ue=new y(ue);ue!==ne&&re&&(Ue[":@"]=this.buildAttributesMap(ne,ye)),we&&(we=this.parseTextData(we,ue,ye,!0,re,!0,!0)),ye=ye.substr(0,ye.lastIndexOf(".")),Ue.add(this.options.textNodeName,we),q.addChild(Ue)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){ue[ue.length-1]==="/"?(ue=ue.substr(0,ue.length-1),ne=ue):ne=ne.substr(0,ne.length-1);const we=new y(ue);ue!==ne&&re&&(we[":@"]=this.buildAttributesMap(ne,ye)),ye=ye.substr(0,ye.lastIndexOf(".")),q.addChild(we)}else{const we=new y(ue);this.tagsNodeStack.push(q),ue!==ne&&re&&(we[":@"]=this.buildAttributesMap(ne,ye)),q.addChild(we),q=we}Q="",_e=me}}else Q+=k[_e];return W.child},de=function(k){if(this.options.processEntities){for(let W in this.docTypeEntities){const q=this.docTypeEntities[W];k=k.replace(q.regx,q.val)}for(let W in this.lastEntities){const q=this.lastEntities[W];k=k.replace(q.regex,q.val)}if(this.options.htmlEntities)for(let W in this.htmlEntities){const q=this.htmlEntities[W];k=k.replace(q.regex,q.val)}}return k};function G(k,W,q,Q){return k&&(Q===void 0&&(Q=Object.keys(W.child).length===0),k=this.parseTextData(k,W.tagname,q,!1,W[":@"]?Object.keys(W[":@"]).length!==0:!1,Q),k!==void 0&&k!==""&&W.add(this.options.textNodeName,k),k=""),k}function V(k,W,q){const Q="*."+q;for(const ye in k){const _e=k[ye];if(Q===_e||W===_e)return!0}return!1}function U(k,W,q=">"){let Q,ye="";for(let _e=W;_e<k.length;_e++){let xe=k[_e];if(Q)xe===Q&&(Q="");else if(xe==='"'||xe==="'")Q=xe;else if(xe===q[0])if(q[1]){if(k[_e+1]===q[1])return{data:ye,index:_e}}else return{data:ye,index:_e};else xe==="	"&&(xe=" ");ye+=xe}}function ie(k,W,q,Q){const ye=k.indexOf(W,q);if(ye===-1)throw new Error(Q);return ye+W.length-1}function Z(k,W,q,Q=">"){const ye=U(k,W+1,Q);if(!ye)return;let _e=ye.data;const xe=ye.index,te=_e.search(/\s/);let ue=_e,ne=!0;if(te!==-1&&(ue=_e.substr(0,te).replace(/\s\s*$/,""),_e=_e.substr(te+1)),q){const re=ue.indexOf(":");re!==-1&&(ue=ue.substr(re+1),ne=ue!==ye.data.substr(re+1))}return{tagName:ue,tagExp:_e,closeIndex:xe,attrExpPresent:ne}}function B(k,W,q){const Q=q;for(;q<k.length;q++)if(k[q]==="<"&&k[q+1]==="/"){const ye=ie(k,">",q,`${W} is not closed`);if(k.substring(q+2,ye).trim()===W)return{tagContent:k.substring(Q,q),i:ye};q=ye}}function S(k,W,q){if(W&&typeof k=="string"){const Q=k.trim();return Q==="true"?!0:Q==="false"?!1:b(k,q)}else return d.isExist(k)?k:""}l.exports=w},{"../util":4,"./DocTypeReader":8,"./xmlNode":13,strnum:15}],11:[function(i,l,c){const{buildOptions:d}=i("./OptionsBuilder"),y=i("./OrderedObjParser"),{prettify:a}=i("./node2json"),b=i("../validator");class w{constructor(C){this.externalEntities={},this.options=d(C)}parse(C,L){if(typeof C!="string")if(C.toString)C=C.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(L){L===!0&&(L={});const Y=b.validate(C,L);if(Y!==!0)throw Error(`${Y.err.msg}:${Y.err.line}:${Y.err.col}`)}const j=new y(this.options);j.addExternalEntities(this.externalEntities);const ee=j.parseXml(C);return this.options.preserveOrder||ee===void 0?ee:a(ee,this.options)}addEntity(C,L){if(L.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(C.indexOf("&")!==-1||C.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[C]=L}}l.exports=w},{"../validator":5,"./OptionsBuilder":9,"./OrderedObjParser":10,"./node2json":12}],12:[function(i,l,c){function d(I,C){return y(I,C)}function y(I,C,L){let j;const ee={};for(let Y=0;Y<I.length;Y++){const de=I[Y],G=a(de);let V="";if(L===void 0?V=G:V=L+"."+G,G===C.textNodeName)j===void 0?j=de[G]:j+=""+de[G];else{if(G===void 0)continue;if(de[G]){let U=y(de[G],C,V);const ie=w(U,C);de[":@"]?b(U,de[":@"],V,C):Object.keys(U).length===1&&U[C.textNodeName]!==void 0&&!C.alwaysCreateTextNode?U=U[C.textNodeName]:Object.keys(U).length===0&&(C.alwaysCreateTextNode?U[C.textNodeName]="":U=""),ee[G]!==void 0?(Array.isArray(ee[G])||(ee[G]=[ee[G]]),ee[G].push(U)):C.isArray(G,V,ie)?ee[G]=[U]:ee[G]=U}}}return typeof j=="string"?j.length>0&&(ee[C.textNodeName]=j):j!==void 0&&(ee[C.textNodeName]=j),ee}function a(I){const C=Object.keys(I);for(let L=0;L<C.length;L++){const j=C[L];if(j!==":@")return j}}function b(I,C,L,j){if(C){const ee=Object.keys(C),Y=ee.length;for(let de=0;de<Y;de++){const G=ee[de];j.isArray(G,L+"."+G,!0,!0)?I[G]=[C[G]]:I[G]=C[G]}}}function w(I,C){const L=Object.keys(I).length;return!!(L===0||L===1&&I[C.textNodeName])}c.prettify=d},{}],13:[function(i,l,c){class d{constructor(a){this.tagname=a,this.child=[],this[":@"]={}}add(a,b){this.child.push({[a]:b})}addChild(a){a[":@"]&&Object.keys(a[":@"]).length>0?this.child.push({[a.tagname]:a.child,":@":a[":@"]}):this.child.push({[a.tagname]:a.child})}}l.exports=d},{}],14:[function(i,l,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(d,y,a,b,w){var I,C,L=w*8-b-1,j=(1<<L)-1,ee=j>>1,Y=-7,de=a?w-1:0,G=a?-1:1,V=d[y+de];for(de+=G,I=V&(1<<-Y)-1,V>>=-Y,Y+=L;Y>0;I=I*256+d[y+de],de+=G,Y-=8);for(C=I&(1<<-Y)-1,I>>=-Y,Y+=b;Y>0;C=C*256+d[y+de],de+=G,Y-=8);if(I===0)I=1-ee;else{if(I===j)return C?NaN:(V?-1:1)*(1/0);C=C+Math.pow(2,b),I=I-ee}return(V?-1:1)*C*Math.pow(2,I-b)},c.write=function(d,y,a,b,w,I){var C,L,j,ee=I*8-w-1,Y=(1<<ee)-1,de=Y>>1,G=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=b?0:I-1,U=b?1:-1,ie=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(L=isNaN(y)?1:0,C=Y):(C=Math.floor(Math.log(y)/Math.LN2),y*(j=Math.pow(2,-C))<1&&(C--,j*=2),C+de>=1?y+=G/j:y+=G*Math.pow(2,1-de),y*j>=2&&(C++,j/=2),C+de>=Y?(L=0,C=Y):C+de>=1?(L=(y*j-1)*Math.pow(2,w),C=C+de):(L=y*Math.pow(2,de-1)*Math.pow(2,w),C=0));w>=8;d[a+V]=L&255,V+=U,L/=256,w-=8);for(C=C<<w|L,ee+=w;ee>0;d[a+V]=C&255,V+=U,C/=256,ee-=8);d[a+V-U]|=ie*128}},{}],15:[function(i,l,c){const d=/^[-+]?0x[a-fA-F0-9]+$/,y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const a={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b(I,C={}){if(C=Object.assign({},a,C),!I||typeof I!="string")return I;let L=I.trim();if(C.skipLike!==void 0&&C.skipLike.test(L))return I;if(C.hex&&d.test(L))return Number.parseInt(L,16);{const j=y.exec(L);if(j){const ee=j[1],Y=j[2];let de=w(j[3]);const G=j[4]||j[6];if(!C.leadingZeros&&Y.length>0&&ee&&L[2]!==".")return I;if(!C.leadingZeros&&Y.length>0&&!ee&&L[1]!==".")return I;{const V=Number(L),U=""+V;return U.search(/[eE]/)!==-1||G?C.eNotation?V:I:L.indexOf(".")!==-1?U==="0"&&de===""||U===de||ee&&U==="-"+de?V:I:Y?de===U||ee+de===U?V:I:L===U||L===ee+U?V:I}}else return I}}function w(I){return I&&I.indexOf(".")!==-1&&(I=I.replace(/0+$/,""),I==="."?I="0":I[0]==="."?I="0"+I:I[I.length-1]==="."&&(I=I.substr(0,I.length-1))),I}l.exports=b},{}],16:[function(i,l,c){(function(d){(function(){var y=this&&this.__awaiter||function(L,j,ee,Y){function de(G){return G instanceof ee?G:new ee(function(V){V(G)})}return new(ee||(ee=Promise))(function(G,V){function U(B){try{Z(Y.next(B))}catch(S){V(S)}}function ie(B){try{Z(Y.throw(B))}catch(S){V(S)}}function Z(B){B.done?G(B.value):de(B.value).then(U,ie)}Z((Y=Y.apply(L,j||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.osmFetch=void 0;const a=i("../auth"),b=i("../config"),w=i("./_xml"),I=L=>typeof btoa>"u"?d.from(L,"binary").toString("base64"):btoa(L);function C(L,j,ee){return y(this,void 0,void 0,function*(){const{apiUrl:Y,authHeader:de,basicAuth:G,userAgent:V}=(0,b.getConfig)(),U=G&&`Basic ${I(`${G.username}:${G.password}`)}`,ie=(0,a.getAuthToken)()&&`Bearer ${(0,a.getAuthToken)()}`;let Z=new URLSearchParams(j).toString();Z&&(Z=`?${Z}`);const B=yield fetch(`${Y}/api${L}${Z}`,Object.assign(Object.assign({},ee),{headers:Object.assign({Authorization:de||U||ie||"","User-Agent":V},ee==null?void 0:ee.headers)})),S=B.headers.get("Content-Type");if(S!=null&&S.startsWith("application/xml")){const k=yield B.text();return yield w.xmlParser.parse(k)}if(S!=null&&S.startsWith("application/json"))return B.json();if(B.ok)return yield B.text();throw new Error(`OSM API: ${yield B.text()}`)})}c.osmFetch=C}).call(this)}).call(this,i("buffer").Buffer)},{"../auth":37,"../config":39,"./_xml":17,buffer:2}],17:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.xmlParser=void 0;const d=i("fast-xml-parser");c.xmlParser=new d.XMLParser({ignoreAttributes:!1,attributesGroupName:"$",attributeNamePrefix:"",isArray:y=>y!=="$"})},{"fast-xml-parser":3}],18:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.createChangesetMetaXml=void 0;const d=i("fast-xml-parser"),y=new d.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"$",format:!0,suppressEmptyNode:!0,suppressBooleanAttributes:!1});function a(I){return y.build({osm:{changeset:{tag:Object.entries(I).map(([C,L])=>({$k:C,$v:L}))}}})}c.createChangesetMetaXml=a;const b=(I,C,L)=>C.reduce((j,ee)=>{const Y={$id:ee.id,$version:L?0:ee.version,$changeset:I,tag:Object.entries(ee.tags||{}).map(([de,G])=>({$k:de,$v:G}))};switch(ee.type){case"node":{const de=Object.assign(Object.assign({},Y),{$lat:ee.lat,$lon:ee.lon});return Object.assign(Object.assign({},j),{node:[...j.node,de]})}case"way":{if(!ee.nodes)throw new Error("Way has no nodes");const de=Object.assign(Object.assign({},Y),{nd:ee.nodes.map(G=>({$ref:G}))});return Object.assign(Object.assign({},j),{way:[...j.way,de]})}case"relation":{if(!ee.members)throw new Error("Relation has no members");const de=Object.assign(Object.assign({},Y),{member:ee.members.map(G=>({$type:G.type,$ref:G.ref,$role:G.role}))});return Object.assign(Object.assign({},j),{relation:[...j.relation,de]})}default:return j}},{node:[],way:[],relation:[]});function w(I,C,L){return y.build({osmChange:Object.assign(Object.assign({$version:"0.6",$generator:"osm-api-js"},L),{create:[b(I,C.create,!0)],modify:[b(I,C.modify)],delete:[Object.assign({"$if-unused":!0},b(I,C.delete))]})})}c.createOsmChangeXml=w},{"fast-xml-parser":3}],19:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.parseOsmChangeXml=c.parseOsmChangeJson=void 0;const d=i("../_xml");function y(I){return{changeset:+I.$.changeset,id:+I.$.id,timestamp:I.$.timestamp,uid:+I.$.uid,user:I.$.user,version:+I.$.version,tags:I.tag?Object.fromEntries(I.tag.map(C=>[C.$.k,C.$.v])):void 0}}const a=I=>{const C=[];if(I.node){const L=I.node.map(j=>Object.assign(Object.assign({type:"node"},y(j)),{lat:+j.$.lat,lon:+j.$.lon}));C.push(...L)}if(I.way){const L=I.way.map(j=>{var ee;return Object.assign(Object.assign({type:"way"},y(j)),{nodes:((ee=j.nd)===null||ee===void 0?void 0:ee.map(Y=>+Y.$.ref))||[]})});C.push(...L)}if(I.relation){const L=I.relation.map(j=>{var ee;return Object.assign(Object.assign({type:"relation"},y(j)),{members:((ee=j.member)===null||ee===void 0?void 0:ee.map(Y=>({ref:+Y.$.ref,role:Y.$.role,type:Y.$.type})))||[]})});C.push(...L)}return C};function b(I){var C,L,j;return{create:((C=I.osmChange[0].create)===null||C===void 0?void 0:C.flatMap(a))||[],modify:((L=I.osmChange[0].modify)===null||L===void 0?void 0:L.flatMap(a))||[],delete:((j=I.osmChange[0].delete)===null||j===void 0?void 0:j.flatMap(a))||[]}}c.parseOsmChangeJson=b;function w(I){const C=d.xmlParser.parse(I);return b(C)}c.parseOsmChangeXml=w},{"../_xml":17}],20:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,I,C){function L(j){return j instanceof I?j:new I(function(ee){ee(j)})}return new(I||(I=Promise))(function(j,ee){function Y(V){try{G(C.next(V))}catch(U){ee(U)}}function de(V){try{G(C.throw(V))}catch(U){ee(U)}}function G(V){V.done?j(V.value):L(V.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.createChangesetComment=void 0;const y=i("../_osmFetch");function a(b,w){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/changeset/${b}/comment`,void 0,{method:"POST",body:`text=${encodeURIComponent(w)}`,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}})})}c.createChangesetComment=a},{"../_osmFetch":16}],21:[function(i,l,c){var d=this&&this.__awaiter||function(w,I,C,L){function j(ee){return ee instanceof C?ee:new C(function(Y){Y(ee)})}return new(C||(C=Promise))(function(ee,Y){function de(U){try{V(L.next(U))}catch(ie){Y(ie)}}function G(U){try{V(L.throw(U))}catch(ie){Y(ie)}}function V(U){U.done?ee(U.value):j(U.value).then(de,G)}V((L=L.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangesetDiff=void 0;const y=i("../_osmFetch"),a=i("./_parseOsmChangeXml");function b(w){return d(this,void 0,void 0,function*(){const I=yield(0,y.osmFetch)(`/0.6/changeset/${w}/download`);return(0,a.parseOsmChangeJson)(I)})}c.getChangesetDiff=b},{"../_osmFetch":16,"./_parseOsmChangeXml":19}],22:[function(i,l,c){var d=this&&this.__awaiter||function(C,L,j,ee){function Y(de){return de instanceof j?de:new j(function(G){G(de)})}return new(j||(j=Promise))(function(de,G){function V(Z){try{ie(ee.next(Z))}catch(B){G(B)}}function U(Z){try{ie(ee.throw(Z))}catch(B){G(B)}}function ie(Z){Z.done?de(Z.value):Y(Z.value).then(V,U)}ie((ee=ee.apply(C,L||[])).next())})},y=this&&this.__rest||function(C,L){var j={};for(var ee in C)Object.prototype.hasOwnProperty.call(C,ee)&&L.indexOf(ee)<0&&(j[ee]=C[ee]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,ee=Object.getOwnPropertySymbols(C);Y<ee.length;Y++)L.indexOf(ee[Y])<0&&Object.prototype.propertyIsEnumerable.call(C,ee[Y])&&(j[ee[Y]]=C[ee[Y]]);return j};Object.defineProperty(c,"__esModule",{value:!0}),c.getChangeset=c.listChangesets=void 0;const a=i("../_osmFetch"),b=C=>{var L;return{id:+C.$.id,created_at:new Date(C.$.created_at),closed_at:new Date(C.$.closed_at),open:C.$.open==="true",comments_count:+C.$.comments_count,changes_count:+C.$.changes_count,min_lat:+C.$.min_lat,min_lon:+C.$.min_lon,max_lat:+C.$.max_lat,max_lon:+C.$.max_lon,uid:+C.$.uid,user:C.$.user,tags:Object.fromEntries(C.tag.map(j=>[j.$.k,j.$.v])),discussion:(L=C.discussion)===null||L===void 0?void 0:L[0].comment.map(j=>({date:new Date(j.$.date),user:j.$.user,uid:j.$.uid,text:j.text[0]}))}};function w(C){var L;return d(this,void 0,void 0,function*(){const{only:j}=C,ee=y(C,["only"]);return((L=(yield(0,a.osmFetch)("/0.6/changesets",Object.assign(Object.assign({},j&&{[j]:!0}),ee))).osm[0].changeset)===null||L===void 0?void 0:L.map(b))||[]})}c.listChangesets=w;function I(C,L=!0){return d(this,void 0,void 0,function*(){return(yield(0,a.osmFetch)(`/0.6/changeset/${C}`,{include_discussion:L})).osm[0].changeset.map(b)[0]})}c.getChangeset=I},{"../_osmFetch":16}],23:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(w,I,C,L){L===void 0&&(L=C);var j=Object.getOwnPropertyDescriptor(I,C);(!j||("get"in j?!I.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return I[C]}}),Object.defineProperty(w,L,j)}:function(w,I,C,L){L===void 0&&(L=C),w[L]=I[C]}),y=this&&this.__exportStar||function(w,I){for(var C in w)C!=="default"&&!Object.prototype.hasOwnProperty.call(I,C)&&d(I,w,C)};Object.defineProperty(c,"__esModule",{value:!0}),c.createOsmChangeXml=c.parseOsmChangeXml=void 0,y(i("./createChangesetComment"),c),y(i("./getChangesetDiff"),c),y(i("./getChangesets"),c),y(i("./uploadChangeset"),c);var a=i("./_parseOsmChangeXml");Object.defineProperty(c,"parseOsmChangeXml",{enumerable:!0,get:function(){return a.parseOsmChangeXml}});var b=i("./_createOsmChangeXml");Object.defineProperty(c,"createOsmChangeXml",{enumerable:!0,get:function(){return b.createOsmChangeXml}})},{"./_createOsmChangeXml":18,"./_parseOsmChangeXml":19,"./createChangesetComment":20,"./getChangesetDiff":21,"./getChangesets":22,"./uploadChangeset":24}],24:[function(i,l,c){var d=this&&this.__awaiter||function(w,I,C,L){function j(ee){return ee instanceof C?ee:new C(function(Y){Y(ee)})}return new(C||(C=Promise))(function(ee,Y){function de(U){try{V(L.next(U))}catch(ie){Y(ie)}}function G(U){try{V(L.throw(U))}catch(ie){Y(ie)}}function V(U){U.done?ee(U.value):j(U.value).then(de,G)}V((L=L.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.uploadChangeset=void 0;const y=i("../_osmFetch"),a=i("./_createOsmChangeXml");function b(w,I){return d(this,void 0,void 0,function*(){const C=(0,a.createChangesetMetaXml)(w),L=+(yield(0,y.osmFetch)("/0.6/changeset/create",void 0,{method:"PUT",body:C,headers:{"content-type":"application/xml; charset=utf-8"}})),j=(0,a.createOsmChangeXml)(L,I);return yield(0,y.osmFetch)(`/0.6/changeset/${L}/upload`,void 0,{method:"POST",body:j,headers:{"content-type":"application/xml; charset=utf-8"}}),yield(0,y.osmFetch)(`/0.6/changeset/${L}/close`,void 0,{method:"PUT"}),+L})}c.uploadChangeset=b},{"../_osmFetch":16,"./_createOsmChangeXml":18}],25:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,I,C){function L(j){return j instanceof I?j:new I(function(ee){ee(j)})}return new(I||(I=Promise))(function(j,ee){function Y(V){try{G(C.next(V))}catch(U){ee(U)}}function de(V){try{G(C.throw(V))}catch(U){ee(U)}}function G(V){V.done?j(V.value):L(V.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getCapabilities=void 0;const y=i("./_osmFetch");function a(){return d(this,void 0,void 0,function*(){const b=yield(0,y.osmFetch)("/capabilities");return{limits:{maxArea:+b.osm[0].api[0].area[0].$.maximum,maxNoteArea:+b.osm[0].api[0].note_area[0].$.maximum,maxTracepointPerPage:+b.osm[0].api[0].tracepoints[0].$.per_page,maxWayNodes:+b.osm[0].api[0].waynodes[0].$.maximum,maxChangesetElements:+b.osm[0].api[0].changesets[0].$.maximum_elements,maxTimeout:+b.osm[0].api[0].timeout[0].$.seconds},policy:{imageryBlacklist:b.osm[0].policy[0].imagery[0].blacklist.map(I=>I.$.regex)}}})}c.getCapabilities=a},{"./_osmFetch":16}],26:[function(i,l,c){var d=this&&this.__awaiter||function(j,ee,Y,de){function G(V){return V instanceof Y?V:new Y(function(U){U(V)})}return new(Y||(Y=Promise))(function(V,U){function ie(S){try{B(de.next(S))}catch(k){U(k)}}function Z(S){try{B(de.throw(S))}catch(k){U(k)}}function B(S){S.done?V(S.value):G(S.value).then(ie,Z)}B((de=de.apply(j,ee||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getRelationsForElement=c.getWaysForNode=c.getFeatureHistory=c.getFeatureAtVersion=c.getFeatures=c.getFeature=void 0;const y=i("./_osmFetch");function a(j,ee,Y){return d(this,void 0,void 0,function*(){const de=Y&&j!=="node"?"/full":"";return(yield(0,y.osmFetch)(`/0.6/${j}/${ee}${de}.json`)).elements})}c.getFeature=a;function b(j,ee){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}s.json?${j}s=${ee.join(",")}`)).elements})}c.getFeatures=b;function w(j,ee,Y){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}/${ee}/${Y}.json`)).elements[0]})}c.getFeatureAtVersion=w;function I(j,ee){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}/${ee}/history.json`)).elements})}c.getFeatureHistory=I;function C(j){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/node/${j}/ways.json`)).elements})}c.getWaysForNode=C;function L(j,ee){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/${j}/${ee}/relations.json`)).elements})}c.getRelationsForElement=L},{"./_osmFetch":16}],27:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,I,C){function L(j){return j instanceof I?j:new I(function(ee){ee(j)})}return new(I||(I=Promise))(function(j,ee){function Y(V){try{G(C.next(V))}catch(U){ee(U)}}function de(V){try{G(C.throw(V))}catch(U){ee(U)}}function G(V){V.done?j(V.value):L(V.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getMapData=void 0;const y=i("./_osmFetch");function a(b){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/map.json",{bbox:b})).elements})}c.getMapData=a},{"./_osmFetch":16}],28:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,I,C){function L(j){return j instanceof I?j:new I(function(ee){ee(j)})}return new(I||(I=Promise))(function(j,ee){function Y(V){try{G(C.next(V))}catch(U){ee(U)}}function de(V){try{G(C.throw(V))}catch(U){ee(U)}}function G(V){V.done?j(V.value):L(V.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUIdFromDisplayName=void 0;const y=i("./changesets");function a(b){return d(this,void 0,void 0,function*(){const w=yield(0,y.listChangesets)({display_name:b});if(!w.length)throw new Error("Could not get uid because the user has never edited the map");return w[0].uid})}c.getUIdFromDisplayName=a},{"./changesets":23}],29:[function(i,l,c){var d=this&&this.__awaiter||function(w,I,C,L){function j(ee){return ee instanceof C?ee:new C(function(Y){Y(ee)})}return new(C||(C=Promise))(function(ee,Y){function de(U){try{V(L.next(U))}catch(ie){Y(ie)}}function G(U){try{V(L.throw(U))}catch(ie){Y(ie)}}function V(U){U.done?ee(U.value):j(U.value).then(de,G)}V((L=L.apply(w,I||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getUsers=c.getUser=void 0;const y=i("./_osmFetch");function a(w){return d(this,void 0,void 0,function*(){const I=yield(0,y.osmFetch)(`/0.6/user/${w==="me"?"details":w}.json`);return Object.assign(Object.assign({},I.user),{account_created:new Date(I.user.account_created)})})}c.getUser=a;function b(w){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)("/0.6/users",{users:w})).users.map(C=>Object.assign(Object.assign({},C),{account_created:new Date(C.account_created)}))})}c.getUsers=b},{"./_osmFetch":16}],30:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,I,C)}:function(a,b,w,I){I===void 0&&(I=w),a[I]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./notes"),c),y(i("./getCapabilities"),c),y(i("./getFeature"),c),y(i("./getMapData"),c),y(i("./getUIdFromDisplayName"),c),y(i("./getUser"),c)},{"./changesets":23,"./getCapabilities":25,"./getFeature":26,"./getMapData":27,"./getUIdFromDisplayName":28,"./getUser":29,"./notes":32}],31:[function(i,l,c){var d=this&&this.__awaiter||function(L,j,ee,Y){function de(G){return G instanceof ee?G:new ee(function(V){V(G)})}return new(ee||(ee=Promise))(function(G,V){function U(B){try{Z(Y.next(B))}catch(S){V(S)}}function ie(B){try{Z(Y.throw(B))}catch(S){V(S)}}function Z(B){B.done?G(B.value):de(B.value).then(U,ie)}Z((Y=Y.apply(L,j||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getNote=c.getNotesForArea=c.getNotesForQuery=void 0;const y=i("../_osmFetch"),a=L=>{const[j,ee]=L.geometry.coordinates;return Object.assign(Object.assign({},L.properties),{location:{lat:ee,lng:j}})};function b(L,j){return d(this,void 0,void 0,function*(){return(yield(0,y.osmFetch)(`/0.6/notes${j?"/search":""}.json`,L)).features.map(a)})}function w(L){return b(L,!0)}c.getNotesForQuery=w;function I(L){return b({bbox:L},!1)}c.getNotesForArea=I;function C(L){return d(this,void 0,void 0,function*(){const j=yield(0,y.osmFetch)(`/0.6/notes/${L}.json`);return a(j)})}c.getNote=C},{"../_osmFetch":16}],32:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,I,C)}:function(a,b,w,I){I===void 0&&(I=w),a[I]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./getNotes"),c),y(i("./noteActions"),c)},{"./getNotes":31,"./noteActions":33}],33:[function(i,l,c){var d=this&&this.__awaiter||function(I,C,L,j){function ee(Y){return Y instanceof L?Y:new L(function(de){de(Y)})}return new(L||(L=Promise))(function(Y,de){function G(ie){try{U(j.next(ie))}catch(Z){de(Z)}}function V(ie){try{U(j.throw(ie))}catch(Z){de(Z)}}function U(ie){ie.done?Y(ie.value):ee(ie.value).then(G,V)}U((j=j.apply(I,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.reopenNote=c.commentOnNote=c.createNote=void 0;const y=i("../_osmFetch");function a(I,C,L){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)("/0.6/notes",{lat:I,lon:C,text:L})})}c.createNote=a;function b(I,C){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${I}/comment`,{text:C})})}c.commentOnNote=b;function w(I,C){return d(this,void 0,void 0,function*(){yield(0,y.osmFetch)(`/0.6/notes/${I}/reopen`,{text:C})})}c.reopenNote=w},{"../_osmFetch":16}],34:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.createPopup=void 0;function d(y){let a=!1;return new Promise((b,w)=>{const[I,C]=[600,550],L=Object.entries({width:I,height:C,left:window.screen.width/2-I/2,top:window.screen.height/2-C/2}).map(([Y,de])=>`${Y}=${de}`).join(","),j=window.open("about:blank","oauth_window",L);if(!j)throw new Error("Popup was blocked");j.location=y,window.authComplete=Y=>{b(Y),a=!0};const ee=setInterval(()=>{j.closed&&(a||w(new Error("Cancelled")),clearInterval(ee))},500)})}c.createPopup=d},{}],35:[function(i,l,c){var d=this&&this.__awaiter||function(b,w,I,C){function L(j){return j instanceof I?j:new I(function(ee){ee(j)})}return new(I||(I=Promise))(function(j,ee){function Y(V){try{G(C.next(V))}catch(U){ee(U)}}function de(V){try{G(C.throw(V))}catch(U){ee(U)}}function G(V){V.done?j(V.value):L(V.value).then(Y,de)}G((C=C.apply(b,w||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.exchangeCode=void 0;const y=i("./helpers");function a(b,{options:w,pkceVerifier:I,state:C}){return d(this,void 0,void 0,function*(){const L=new URL(b).searchParams,j=L.get("error_description"),ee=L.get("code"),Y=L.get("state");if(j)throw new Error(j);if(!ee)throw new Error("No code in OAuth response");if(!I||!C)throw new Error("No login in progress");if(C!==Y)throw new Error("State Mismatch");const de={grant_type:"authorization_code",code:ee,redirect_uri:w.redirectUrl,client_id:w.clientId,code_verifier:I},G=`${(0,y.getOAuthBaseUrl)()}/oauth2/token?${new URLSearchParams(de).toString()}`,U=yield(yield fetch(G,{method:"POST",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded"}})).json();if("error_description"in U)throw new Error(U.error_description);const ie={issuedAt:new Date(U.created_at*1e3).toISOString(),accessToken:U.access_token,scopes:U.scope.split(" ")};return localStorage.setItem("__osmAuth",JSON.stringify(ie)),delete window.authComplete,ie})}c.exchangeCode=a},{"./helpers":36}],36:[function(i,l,c){var d=this&&this.__awaiter||function(I,C,L,j){function ee(Y){return Y instanceof L?Y:new L(function(de){de(Y)})}return new(L||(L=Promise))(function(Y,de){function G(ie){try{U(j.next(ie))}catch(Z){de(Z)}}function V(ie){try{U(j.throw(ie))}catch(Z){de(Z)}}function U(ie){ie.done?Y(ie.value):ee(ie.value).then(G,V)}U((j=j.apply(I,C||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.getOAuthBaseUrl=c.getRandomString=c.sha256=void 0;const y=i("../config");function a(I){return d(this,void 0,void 0,function*(){const C=new TextEncoder().encode(I),L=yield window.crypto.subtle.digest("SHA-256",C);return btoa(String.fromCharCode(...new Uint8Array(L))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})}c.sha256=a;function b(){return[...window.crypto.getRandomValues(new Uint32Array(32))].map(I=>`0${I.toString(16)}`.slice(-2)).join("")}c.getRandomString=b;function w(){let I=(0,y.getConfig)().apiUrl;return I==="https://api.openstreetmap.org"&&(I="https://www.openstreetmap.org"),I}c.getOAuthBaseUrl=w},{"../config":39}],37:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,I,C)}:function(a,b,w,I){I===void 0&&(I=w),a[I]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./oauth2"),c)},{"./oauth2":38}],38:[function(i,l,c){var d=this&&this.__awaiter||function(j,ee,Y,de){function G(V){return V instanceof Y?V:new Y(function(U){U(V)})}return new(Y||(Y=Promise))(function(V,U){function ie(S){try{B(de.next(S))}catch(k){U(k)}}function Z(S){try{B(de.throw(S))}catch(k){U(k)}}function B(S){S.done?V(S.value):G(S.value).then(ie,Z)}B((de=de.apply(j,ee||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.logout=c.isLoggedIn=c.getAuthToken=c.authReady=c.login=void 0;const y=i("./createPopup"),a=i("./exchangeCode"),b=i("./helpers");function w(j){return d(this,void 0,void 0,function*(){if(!j.redirectUrl)throw new Error("You must include the 'redirectUrl' option");if(!j.clientId)throw new Error("You must include the 'clientId' option");if(!j.scopes)throw new Error("You must include the 'scopes' option");const ee=(0,b.getRandomString)(),Y=(0,b.getRandomString)(),de=yield(0,b.sha256)(Y),G={scope:j.scopes.join(" "),include_granted_scopes:"true",response_type:"code",state:ee,redirect_uri:j.redirectUrl,client_id:j.clientId,code_challenge_method:"S256",code_challenge:de},V=`${(0,b.getOAuthBaseUrl)()}/oauth2/authorize?${new URLSearchParams(G).toString()}`,U={state:ee,pkceVerifier:Y,options:j};if(j.mode==="popup"){const ie=yield(0,y.createPopup)(V);return(0,a.exchangeCode)(ie,U)}if(j.mode==="redirect"){localStorage.set("__osmAuthTemp",JSON.stringify(U)),window.location.replace(V);return}throw new Error("options.mode must be 'popup' or 'redirect'")})}c.login=w,c.authReady=(()=>d(void 0,void 0,void 0,function*(){var j;if(typeof window>"u")return;const ee=window.location.href,Y=localStorage.getItem("__osmAuthTemp");if(new URL(ee).searchParams.get("code")){if(!((j=window.opener)===null||j===void 0)&&j.authComplete)window.opener.authComplete(ee),window.close();else if(Y)try{const de=JSON.parse(Y);yield(0,a.exchangeCode)(ee,de),localStorage.removeItem("__osmAuthTemp")}catch(de){console.error("OSM Auth Error",de)}}}))();const I=()=>{try{const j=localStorage.getItem("__osmAuth");return j?JSON.parse(j).accessToken:void 0}catch{return}};c.getAuthToken=I;const C=()=>!!(0,c.getAuthToken)();c.isLoggedIn=C;function L(){localStorage.removeItem("__osmAuth")}c.logout=L},{"./createPopup":34,"./exchangeCode":35,"./helpers":36}],39:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.configure=c.getConfig=void 0;const d={apiUrl:"https://api.openstreetmap.org",userAgent:"https://github.com/k-yle/osm-api-js"},y=()=>d;c.getConfig=y;function a(b){Object.assign(d,b)}c.configure=a},{}],40:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,I,C)}:function(a,b,w,I){I===void 0&&(I=w),a[I]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),i("./polyfill"),y(i("./api"),c),y(i("./auth"),c),y(i("./config"),c),y(i("./types"),c)},{"./api":30,"./auth":37,"./config":39,"./polyfill":41,"./types":45}],41:[function(i,l,c){if(typeof fetch>"u")try{i("isomorphic-fetch")}catch{console.error([`
==========
`,"(!) The `fetch` API is not available, and the polyfill (`isomorphic-fetch`) is also not available.","Run `npm install isomorphic-fetch`, or make sure that the global variable `fetch` exists",`
==========
`].join(`
`))}},{"isomorphic-fetch":"isomorphic-fetch"}],42:[function(i,l,c){Object.defineProperty(c,"__esModule",{value:!0})},{}],43:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],44:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],45:[function(i,l,c){var d=this&&this.__createBinding||(Object.create?function(a,b,w,I){I===void 0&&(I=w);var C=Object.getOwnPropertyDescriptor(b,w);(!C||("get"in C?!b.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return b[w]}}),Object.defineProperty(a,I,C)}:function(a,b,w,I){I===void 0&&(I=w),a[I]=b[w]}),y=this&&this.__exportStar||function(a,b){for(var w in a)w!=="default"&&!Object.prototype.hasOwnProperty.call(b,w)&&d(b,a,w)};Object.defineProperty(c,"__esModule",{value:!0}),y(i("./changesets"),c),y(i("./features"),c),y(i("./general"),c),y(i("./notes"),c),y(i("./user"),c)},{"./changesets":42,"./features":43,"./general":44,"./notes":46,"./user":47}],46:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}],47:[function(i,l,c){arguments[4][42][0].apply(c,arguments)},{dup:42}]},{},[40])(40)})})(GC);var ks=GC.exports;const ZC=()=>{const[e,t]=_t.useState(!1);_t.useEffect(()=>{t(ks.isLoggedIn())},[]);const i=_t.useCallback(()=>{(async()=>(await ks.login({mode:"popup",clientId:"q9sRK4UuNqv3_HLE8E7m2-wUAKS3XJSFWb9apehpAqE",scopes:["read_prefs","write_api","write_notes"],redirectUrl:window.location.href.replace(window.location.hash,"")}),t(ks.isLoggedIn()),window.location.reload()))()},[]),l=_t.useCallback(()=>{(async()=>(ks.logout(),t(!1)))()},[]);return mt.jsx(mt.Fragment,{children:e?mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:l,children:"logout"}):mt.jsx("button",{style:{height:"44px"},className:"button py-1 px-1 border-transparent border-4 bg-gray-300 text-gray-900 hover:text-gray-500",onClick:i,children:"login"})})},yz=()=>{const[e,t]=_t.useState(!1),[i,l]=_t.useState(void 0);return _t.useEffect(()=>{t(ks.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await ks.getUser("me");l(c)})()},[e]),mt.jsx(mt.Fragment,{children:i?mt.jsx("img",{style:{width:"44px",height:"44px"},src:i.img.href,alt:i.display_name,title:i.display_name}):mt.jsx("img",{})})},vz=()=>{const[e,t]=_t.useState(!1),[i,l]=_t.useState(void 0);return _t.useEffect(()=>{t(ks.isLoggedIn())},[]),_t.useEffect(()=>{e&&(async()=>{const c=await ks.getUser("me");l(c)})()},[e]),mt.jsxs("div",{style:{zIndex:100,position:"relative",top:0,left:0,height:"44px",display:"flex",flexDirection:"row",backgroundColor:"rgba(0, 255, 255, 0.9)"},children:[mt.jsxs("div",{children:[mt.jsx("h1",{className:"text-4xl font-bold",style:{display:"inline",margin:"0px"},children:"OSM address editor"}),i?mt.jsxs("span",{style:{marginLeft:"10px"},children:["Hi ",i==null?void 0:i.display_name,", You have"," ",i==null?void 0:i.changesets.count," changesets."]}):mt.jsx("span",{style:{marginLeft:"10px"},children:"Please log in with your OSM account."})]}),mt.jsxs("div",{style:{display:"flex",flex:1,justifyContent:"end"},children:[mt.jsx("div",{children:mt.jsx(yz,{})}),mt.jsx("div",{children:mt.jsx(ZC,{})})]})]})},WC=({feature:e})=>{var i;const t=JSON.parse((i=e.properties)==null?void 0:i.center);return mt.jsxs(mt.Fragment,{children:[mt.jsxs("span",{className:"longitude",children:["Longitude: ",Math.round(t[0]*1e4)/1e4]}),", ",mt.jsxs("span",{className:"latitude",children:["Latitude: ",Math.round(t[1]*1e4)/1e4," "]})]})},_z=({feature:e})=>mt.jsx(mt.Fragment,{children:e.properties&&Object.keys(e.properties).map(t=>{var i;if(t.startsWith("addr"))return mt.jsxs("div",{className:t,children:[mt.jsx("span",{className:"underline",children:t})," = ",mt.jsx("span",{children:(i=e.properties)==null?void 0:i[t]})]})})});function Of(e,t,i){return parseInt(e.substr(t,i),16)}function HC(e){return e|=0,e<0?"00":e<16?"0"+e.toString(16):e<256?e.toString(16):"ff"}function y0(e,t,i){return i=i<0?i+6:i>6?i-6:i,HC(255*(i<1?e+(t-e)*i:i<3?t:i<4?e+(t-e)*(4-i):e))}function xz(e){if(/^#[0-9a-f]{3,8}$/i.test(e)){let t;const i=e.length;if(i<6){const l=e[1],c=e[2],d=e[3],y=e[4]||"";t="#"+l+l+c+c+d+d+y+y}return(i==7||i>8)&&(t=e),t}}function wz(e,t,i){let l;if(t==0){const c=HC(i*255);l=c+c+c}else{const c=i<=.5?i*(t+1):i+t-i*t,d=i*2-c;l=y0(d,c,e*6+2)+y0(d,c,e*6)+y0(d,c,e*6-2)}return"#"+l}function Pf(e,t,i){const l=[.55,.5,.5,.46,.6,.55,.55],c=l[e*6+.5|0];return i=i<.5?i*c*2:c+(i-.5)*(1-c)*2,wz(e,t,i)}const bz=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{},z2={V:"jdenticon_config",n:"config"};var Ez={};function Sz(e,t){const i=typeof e=="object"&&e||Ez[z2.n]||bz[z2.V]||{},l=i.lightness||{},c=i.saturation||{},d="color"in c?c.color:c,y=c.grayscale,a=i.backColor,b=i.padding;function w(C,L){let j=l[C];return j&&j.length>1||(j=L),function(ee){return ee=j[0]+ee*(j[1]-j[0]),ee<0?0:ee>1?1:ee}}function I(C){const L=i.hues;let j;return L&&L.length>0&&(j=L[0|.999*C*L.length]),typeof j=="number"?(j/360%1+1)%1:C}return{W:I,o:typeof d=="number"?d:.5,D:typeof y=="number"?y:0,p:w("color",[.4,.8]),F:w("grayscale",[.3,.9]),G:xz(a),X:typeof e=="number"?e:typeof b=="number"?b:t}}let Fp=class{constructor(t,i){this.x=t,this.y=i}};class XC{constructor(t,i,l,c){this.q=t,this.t=i,this.H=l,this.Y=c}I(t,i,l,c){const d=this.q+this.H,y=this.t+this.H,a=this.Y;return a===1?new Fp(d-i-(c||0),this.t+t):a===2?new Fp(d-t-(l||0),y-i-(c||0)):a===3?new Fp(this.q+i,y-t-(l||0)):new Fp(this.q+t,this.t+i)}}const Tz=new XC(0,0,0,0);class Cz{constructor(t){this.J=t,this.u=Tz}g(t,i){const l=i?-2:2,c=[];for(let d=i?t.length-2:0;d<t.length&&d>=0;d+=l)c.push(this.u.I(t[d],t[d+1]));this.J.g(c)}h(t,i,l,c){const d=this.u.I(t,i,l,l);this.J.h(d,l,c)}i(t,i,l,c,d){this.g([t,i,t+l,i,t+l,i+c,t,i+c],d)}j(t,i,l,c,d,y){const a=[t+l,i,t+l,i+c,t,i+c,t,i];a.splice((d||0)%4*2,2),this.g(a,y)}K(t,i,l,c,d){this.g([t+l/2,i,t+l,i+c/2,t+l/2,i+c,t,i+c/2],d)}}function Az(e,t,i,l){e=e%14;let c,d,y,a,b,w;e?e==1?(y=0|i*.5,a=0|i*.8,t.j(i-y,0,y,a,2)):e==2?(y=0|i/3,t.i(y,y,i-y,i-y)):e==3?(b=i*.1,w=i<6?1:i<8?2:0|i*.25,b=b>1?0|b:b>.5?1:b,t.i(w,w,i-b-w,i-b-w)):e==4?(d=0|i*.15,y=0|i*.5,t.h(i-y-d,i-y-d,y)):e==5?(b=i*.1,w=b*4,w>3&&(w=0|w),t.i(0,0,i,i),t.g([w,w,i-b,w,w+(i-w-b)/2,i-b],!0)):e==6?t.g([0,0,i,0,i,i*.7,i*.4,i*.4,i*.7,i,0,i]):e==7?t.j(i/2,i/2,i/2,i/2,3):e==8?(t.i(0,0,i,i/2),t.i(0,i/2,i/2,i/2),t.j(i/2,i/2,i/2,i/2,1)):e==9?(b=i*.14,w=i<4?1:i<6?2:0|i*.35,b=i<8?b:0|b,t.i(0,0,i,i),t.i(w,w,i-w-b,i-w-b,!0)):e==10?(b=i*.12,w=b*3,t.i(0,0,i,i),t.h(w,w,i-b-w,!0)):e==11?t.j(i/2,i/2,i/2,i/2,3):e==12?(d=i*.25,t.i(0,0,i,i),t.K(d,d,i-d,i-d,!0)):!l&&(d=i*.4,y=i*1.2,t.h(d,d,y)):(c=i*.42,t.g([0,0,i,0,i,i-c*2,i-c,i,0,i]))}function F2(e,t,i){e=e%4;let l;e?e==1?t.j(0,i/2,i,i/2,0):e==2?t.K(0,0,i,i):(l=i/6,t.h(l,l,i-2*l)):t.j(0,0,i,i,0)}function Iz(e,t){return e=t.W(e),[Pf(e,t.D,t.F(0)),Pf(e,t.o,t.p(.5)),Pf(e,t.D,t.F(1)),Pf(e,t.o,t.p(1)),Pf(e,t.o,t.p(0))]}function Pz(e,t,i){const l=Sz(i,.08);l.G&&e.m(l.G);let c=e.k;const d=.5+c*l.X|0;c-=d*2;const y=new Cz(e),a=0|c/4,b=0|d+c/2-a*2,w=0|d+c/2-a*2;function I(de,G,V,U,ie){const Z=Of(t,V,1);let B=U?Of(t,U,1):0;e.L(L[j[de]]);for(let S=0;S<ie.length;S++)y.u=new XC(b+ie[S][0]*a,w+ie[S][1]*a,a,B++%4),G(Z,y,a,S);e.M()}const C=Of(t,-7)/268435455,L=Iz(C,l),j=[];let ee;function Y(de){if(de.indexOf(ee)>=0){for(let G=0;G<de.length;G++)if(j.indexOf(de[G])>=0)return!0}}for(let de=0;de<3;de++)ee=Of(t,8+de,1)%L.length,(Y([0,4])||Y([2,3]))&&(ee=1),j.push(ee);I(0,F2,2,3,[[1,0],[2,0],[2,3],[1,3],[0,1],[3,1],[3,2],[0,2]]),I(1,F2,4,5,[[0,0],[3,0],[3,3],[0,3]]),I(2,Az,1,null,[[1,1],[2,1],[2,2],[1,2]]),e.finish()}function Mz(e){var l=0,c=0,d=encodeURI(e)+"%80",y=[],a,b=[],w=1732584193,I=4023233417,C=~w,L=~I,j=3285377520,ee=[w,I,C,L,j],Y=0,de="";function G(V,U){return V<<U|V>>>32-U}for(;l<d.length;c++)y[c>>2]=y[c>>2]|(d[l]=="%"?parseInt(d.substring(l+1,l+=3),16):d.charCodeAt(l++))<<(3-(c&3))*8;for(a=((c+7>>6)+1)*16,y[a-1]=c*8-8;Y<a;Y+=16){for(l=0;l<80;l++)c=G(w,5)+j+(l<20?(I&C^~I&L)+1518500249:l<40?(I^C^L)+1859775393:l<60?(I&C^I&L^C&L)+2400959708:(I^C^L)+3395469782)+(b[l]=l<16?y[Y+l]|0:G(b[l-3]^b[l-8]^b[l-14]^b[l-16],1)),j=L,L=C,C=G(I,30),I=w,w=c;ee[0]=w=ee[0]+w|0,ee[1]=I=ee[1]+I|0,ee[2]=C=ee[2]+C|0,ee[3]=L=ee[3]+L|0,ee[4]=j=ee[4]+j|0}for(l=0;l<40;l++)de+=(ee[l>>3]>>>(7-(l&7))*4&15).toString(16);return de}function kz(e){return/^[0-9a-f]{11,}$/i.test(e)&&e}function Lz(e){return Mz(e==null?"":""+e)}function jc(e){return(e*10+.5|0)/10}class zz{constructor(){this.v=""}g(t){let i="";for(let l=0;l<t.length;l++)i+=(l?"L":"M")+jc(t[l].x)+" "+jc(t[l].y);this.v+=i+"Z"}h(t,i,l){const c=l?0:1,d=jc(i/2),y=jc(i),a="a"+d+","+d+" 0 1,"+c+" ";this.v+="M"+jc(t.x)+" "+jc(t.y+i/2)+a+y+",0"+a+-y+",0"}}class Fz{constructor(t){this.A,this.B={},this.N=t,this.k=t.k}m(t){const i=/^(#......)(..)?/.exec(t),l=i[2]?Of(i[2],0)/255:1;this.N.m(i[1],l)}L(t){this.A=this.B[t]||(this.B[t]=new zz)}M(){}g(t){this.A.g(t)}h(t,i,l){this.A.h(t,i,l)}finish(){const t=this.B;for(let i in t)t.hasOwnProperty(i)&&this.N.O(i,t[i].v)}}const Oz={P:"http://www.w3.org/2000/svg",R:"width",S:"height"};class Rz{constructor(t){this.k=t,this.C='<svg xmlns="'+Oz.P+'" width="'+t+'" height="'+t+'" viewBox="0 0 '+t+" "+t+'">'}m(t,i){i&&(this.C+='<rect width="100%" height="100%" fill="'+t+'" opacity="'+i.toFixed(2)+'"/>')}O(t,i){this.C+='<path fill="'+t+'" d="'+i+'"/>'}toString(){return this.C+"</svg>"}}function jz(e,t,i){const l=new Rz(t);return Pz(new Fz(l),kz(e)||Lz(e),i),l.toString()}typeof document<"u"&&document.querySelectorAll.bind(document);const Dz=({feature:e,size:t})=>e.properties===null?null:mt.jsx(mt.Fragment,{children:e.properties.userIconHref.length>0?mt.jsx("img",{src:e.properties.userIconHref,style:{width:t+"px",height:t+"px"}}):mt.jsx("span",{dangerouslySetInnerHTML:{__html:jz(e.properties.user||"noname",t)}})}),Bz=({feature:e})=>{var t;return(t=e.properties)!=null&&t.uid?mt.jsxs("span",{children:["Last edited by: ",e.properties.user]}):null};/*!
 * Font Awesome Free 6.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Nz={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]};const Uz=({viewState:e})=>{const[t,i]=_t.useState(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`);return _t.useEffect(()=>{i(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}`)},[e]),mt.jsx(mt.Fragment,{children:e&&t&&mt.jsxs("a",{href:t,target:"_blank",className:"twitter-share-button",style:{backgroundColor:"#1d9bf0",color:"white",padding:"3.5px 8px",borderRadius:"15px"},children:[mt.jsx(pa,{icon:Nz,style:{padding:"0px 3px"}}),mt.jsx("span",{style:{padding:"0px 3px"},children:"Tweet"})]})})};var qC={};class $i{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const i=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const d=i[c],y=t+d,a=Math.abs(t)<Math.abs(d)?t-(y-d):d-(y-t);a&&(i[l++]=a),t=y}return i[l]=t,this._n=l+1,this}valueOf(){const t=this._partials;let i=this._n,l,c,d,y=0;if(i>0){for(y=t[--i];i>0&&(l=y,c=t[--i],y=l+c,d=c-(y-l),!d););i>0&&(d<0&&t[i-1]<0||d>0&&t[i-1]>0)&&(c=d*2,l=y+c,c==l-y&&(y=l))}return y}}function*$z(e){for(const t of e)yield*t}function KC(e){return Array.from($z(e))}function oh(e,t,i){e=+e,t=+t,i=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+i;for(var l=-1,c=Math.max(0,Math.ceil((t-e)/i))|0,d=new Array(c);++l<c;)d[l]=e+l*i;return d}var dn=1e-6,bd=1e-12,jn=Math.PI,Dr=jn/2,$m=jn/4,oo=jn*2,fr=180/jn,pn=jn/180,Gn=Math.abs,zh=Math.atan,so=Math.atan2,an=Math.cos,Op=Math.ceil,YC=Math.exp,Yv=Math.hypot,Vm=Math.log,v0=Math.pow,Jt=Math.sin,ls=Math.sign||function(e){return e>0?1:e<0?-1:0},hi=Math.sqrt,j1=Math.tan;function JC(e){return e>1?0:e<-1?jn:Math.acos(e)}function ao(e){return e>1?Dr:e<-1?-Dr:Math.asin(e)}function O2(e){return(e=Jt(e/2))*e}function kr(){}function Gm(e,t){e&&j2.hasOwnProperty(e.type)&&j2[e.type](e,t)}var R2={Feature:function(e,t){Gm(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,l=-1,c=i.length;++l<c;)Gm(i[l].geometry,t)}},j2={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)e=i[l],t.point(e[0],e[1],e[2])},LineString:function(e,t){Jv(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)Jv(i[l],t,0)},Polygon:function(e,t){D2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)D2(i[l],t)},GeometryCollection:function(e,t){for(var i=e.geometries,l=-1,c=i.length;++l<c;)Gm(i[l],t)}};function Jv(e,t,i){var l=-1,c=e.length-i,d;for(t.lineStart();++l<c;)d=e[l],t.point(d[0],d[1],d[2]);t.lineEnd()}function D2(e,t){var i=-1,l=e.length;for(t.polygonStart();++i<l;)Jv(e[i],t,1);t.polygonEnd()}function Is(e,t){e&&R2.hasOwnProperty(e.type)?R2[e.type](e,t):Gm(e,t)}var Zm=new $i,Wm=new $i,QC,eA,Qv,e_,t_,ma={point:kr,lineStart:kr,lineEnd:kr,polygonStart:function(){Zm=new $i,ma.lineStart=Vz,ma.lineEnd=Gz},polygonEnd:function(){var e=+Zm;Wm.add(e<0?oo+e:e),this.lineStart=this.lineEnd=this.point=kr},sphere:function(){Wm.add(oo)}};function Vz(){ma.point=Zz}function Gz(){tA(QC,eA)}function Zz(e,t){ma.point=tA,QC=e,eA=t,e*=pn,t*=pn,Qv=e,e_=an(t=t/2+$m),t_=Jt(t)}function tA(e,t){e*=pn,t*=pn,t=t/2+$m;var i=e-Qv,l=i>=0?1:-1,c=l*i,d=an(t),y=Jt(t),a=t_*y,b=e_*d+a*an(c),w=a*l*Jt(c);Zm.add(so(w,b)),Qv=e,e_=d,t_=y}function Wz(e){return Wm=new $i,Is(e,ma),Wm*2}function Hm(e){return[so(e[1],e[0]),ao(e[2])]}function ec(e){var t=e[0],i=e[1],l=an(i);return[l*an(t),l*Jt(t),Jt(i)]}function Rp(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Sh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function _0(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function jp(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Xm(e){var t=hi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pr,vo,Rr,Ro,Nu,nA,rA,ph,Qf,jl,qa,Da={point:n_,lineStart:B2,lineEnd:N2,polygonStart:function(){Da.point=oA,Da.lineStart=Hz,Da.lineEnd=Xz,Qf=new $i,ma.polygonStart()},polygonEnd:function(){ma.polygonEnd(),Da.point=n_,Da.lineStart=B2,Da.lineEnd=N2,Zm<0?(Pr=-(Rr=180),vo=-(Ro=90)):Qf>dn?Ro=90:Qf<-dn&&(vo=-90),qa[0]=Pr,qa[1]=Rr},sphere:function(){Pr=-(Rr=180),vo=-(Ro=90)}};function n_(e,t){jl.push(qa=[Pr=e,Rr=e]),t<vo&&(vo=t),t>Ro&&(Ro=t)}function iA(e,t){var i=ec([e*pn,t*pn]);if(ph){var l=Sh(ph,i),c=[l[1],-l[0],0],d=Sh(c,l);Xm(d),d=Hm(d);var y=e-Nu,a=y>0?1:-1,b=d[0]*fr*a,w,I=Gn(y)>180;I^(a*Nu<b&&b<a*e)?(w=d[1]*fr,w>Ro&&(Ro=w)):(b=(b+360)%360-180,I^(a*Nu<b&&b<a*e)?(w=-d[1]*fr,w<vo&&(vo=w)):(t<vo&&(vo=t),t>Ro&&(Ro=t))),I?e<Nu?Oo(Pr,e)>Oo(Pr,Rr)&&(Rr=e):Oo(e,Rr)>Oo(Pr,Rr)&&(Pr=e):Rr>=Pr?(e<Pr&&(Pr=e),e>Rr&&(Rr=e)):e>Nu?Oo(Pr,e)>Oo(Pr,Rr)&&(Rr=e):Oo(e,Rr)>Oo(Pr,Rr)&&(Pr=e)}else jl.push(qa=[Pr=e,Rr=e]);t<vo&&(vo=t),t>Ro&&(Ro=t),ph=i,Nu=e}function B2(){Da.point=iA}function N2(){qa[0]=Pr,qa[1]=Rr,Da.point=n_,ph=null}function oA(e,t){if(ph){var i=e-Nu;Qf.add(Gn(i)>180?i+(i>0?360:-360):i)}else nA=e,rA=t;ma.point(e,t),iA(e,t)}function Hz(){ma.lineStart()}function Xz(){oA(nA,rA),ma.lineEnd(),Gn(Qf)>dn&&(Pr=-(Rr=180)),qa[0]=Pr,qa[1]=Rr,ph=null}function Oo(e,t){return(t-=e)<0?t+360:t}function qz(e,t){return e[0]-t[0]}function U2(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Kz(e){var t,i,l,c,d,y,a;if(Ro=Rr=-(Pr=vo=1/0),jl=[],Is(e,Da),i=jl.length){for(jl.sort(qz),t=1,l=jl[0],d=[l];t<i;++t)c=jl[t],U2(l,c[0])||U2(l,c[1])?(Oo(l[0],c[1])>Oo(l[0],l[1])&&(l[1]=c[1]),Oo(c[0],l[1])>Oo(l[0],l[1])&&(l[0]=c[0])):d.push(l=c);for(y=-1/0,i=d.length-1,t=0,l=d[i];t<=i;l=c,++t)c=d[t],(a=Oo(l[1],c[0]))>y&&(y=a,Pr=c[0],Rr=l[1])}return jl=qa=null,Pr===1/0||vo===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pr,vo],[Rr,Ro]]}var Rf,qm,Km,Ym,Jm,Qm,eg,tg,r_,i_,o_,sA,aA,to,no,ro,Ls={sphere:kr,point:D1,lineStart:$2,lineEnd:V2,polygonStart:function(){Ls.lineStart=Qz,Ls.lineEnd=e5},polygonEnd:function(){Ls.lineStart=$2,Ls.lineEnd=V2}};function D1(e,t){e*=pn,t*=pn;var i=an(t);Fd(i*an(e),i*Jt(e),Jt(t))}function Fd(e,t,i){++Rf,Km+=(e-Km)/Rf,Ym+=(t-Ym)/Rf,Jm+=(i-Jm)/Rf}function $2(){Ls.point=Yz}function Yz(e,t){e*=pn,t*=pn;var i=an(t);to=i*an(e),no=i*Jt(e),ro=Jt(t),Ls.point=Jz,Fd(to,no,ro)}function Jz(e,t){e*=pn,t*=pn;var i=an(t),l=i*an(e),c=i*Jt(e),d=Jt(t),y=so(hi((y=no*d-ro*c)*y+(y=ro*l-to*d)*y+(y=to*c-no*l)*y),to*l+no*c+ro*d);qm+=y,Qm+=y*(to+(to=l)),eg+=y*(no+(no=c)),tg+=y*(ro+(ro=d)),Fd(to,no,ro)}function V2(){Ls.point=D1}function Qz(){Ls.point=t5}function e5(){lA(sA,aA),Ls.point=D1}function t5(e,t){sA=e,aA=t,e*=pn,t*=pn,Ls.point=lA;var i=an(t);to=i*an(e),no=i*Jt(e),ro=Jt(t),Fd(to,no,ro)}function lA(e,t){e*=pn,t*=pn;var i=an(t),l=i*an(e),c=i*Jt(e),d=Jt(t),y=no*d-ro*c,a=ro*l-to*d,b=to*c-no*l,w=Yv(y,a,b),I=ao(w),C=w&&-I/w;r_.add(C*y),i_.add(C*a),o_.add(C*b),qm+=I,Qm+=I*(to+(to=l)),eg+=I*(no+(no=c)),tg+=I*(ro+(ro=d)),Fd(to,no,ro)}function n5(e){Rf=qm=Km=Ym=Jm=Qm=eg=tg=0,r_=new $i,i_=new $i,o_=new $i,Is(e,Ls);var t=+r_,i=+i_,l=+o_,c=Yv(t,i,l);return c<bd&&(t=Qm,i=eg,l=tg,qm<dn&&(t=Km,i=Ym,l=Jm),c=Yv(t,i,l),c<bd)?[NaN,NaN]:[so(i,t)*fr,ao(l/c)*fr]}function Dc(e){return function(){return e}}function s_(e,t){function i(l,c){return l=e(l,c),t(l[0],l[1])}return e.invert&&t.invert&&(i.invert=function(l,c){return l=t.invert(l,c),l&&e.invert(l[0],l[1])}),i}function a_(e,t){return[Gn(e)>jn?e+Math.round(-e/oo)*oo:e,t]}a_.invert=a_;function B1(e,t,i){return(e%=oo)?t||i?s_(Z2(e),W2(t,i)):Z2(e):t||i?W2(t,i):a_}function G2(e){return function(t,i){return t+=e,[t>jn?t-oo:t<-jn?t+oo:t,i]}}function Z2(e){var t=G2(e);return t.invert=G2(-e),t}function W2(e,t){var i=an(e),l=Jt(e),c=an(t),d=Jt(t);function y(a,b){var w=an(b),I=an(a)*w,C=Jt(a)*w,L=Jt(b),j=L*i+I*l;return[so(C*c-j*d,I*i-L*l),ao(j*c+C*d)]}return y.invert=function(a,b){var w=an(b),I=an(a)*w,C=Jt(a)*w,L=Jt(b),j=L*c-C*d;return[so(C*c+L*d,I*i+j*l),ao(j*i-I*l)]},y}function uA(e){e=B1(e[0]*pn,e[1]*pn,e.length>2?e[2]*pn:0);function t(i){return i=e(i[0]*pn,i[1]*pn),i[0]*=fr,i[1]*=fr,i}return t.invert=function(i){return i=e.invert(i[0]*pn,i[1]*pn),i[0]*=fr,i[1]*=fr,i},t}function cA(e,t,i,l,c,d){if(i){var y=an(t),a=Jt(t),b=l*i;c==null?(c=t+l*oo,d=t-b/2):(c=H2(y,c),d=H2(y,d),(l>0?c<d:c>d)&&(c+=l*oo));for(var w,I=c;l>0?I>d:I<d;I-=b)w=Hm([y,-a*an(I),-a*Jt(I)]),e.point(w[0],w[1])}}function H2(e,t){t=ec(t),t[0]-=e,Xm(t);var i=JC(-t[1]);return((-t[2]<0?-i:i)+oo-dn)%oo}function r5(){var e=Dc([0,0]),t=Dc(90),i=Dc(6),l,c,d={point:y};function y(b,w){l.push(b=c(b,w)),b[0]*=fr,b[1]*=fr}function a(){var b=e.apply(this,arguments),w=t.apply(this,arguments)*pn,I=i.apply(this,arguments)*pn;return l=[],c=B1(-b[0]*pn,-b[1]*pn,0).invert,cA(d,w,I,1),b={type:"Polygon",coordinates:[l]},l=c=null,b}return a.center=function(b){return arguments.length?(e=typeof b=="function"?b:Dc([+b[0],+b[1]]),a):e},a.radius=function(b){return arguments.length?(t=typeof b=="function"?b:Dc(+b),a):t},a.precision=function(b){return arguments.length?(i=typeof b=="function"?b:Dc(+b),a):i},a}function hA(){var e=[],t;return{point:function(i,l,c){t.push([i,l,c])},lineStart:function(){e.push(t=[])},lineEnd:kr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function om(e,t){return Gn(e[0]-t[0])<dn&&Gn(e[1]-t[1])<dn}function Dp(e,t,i,l){this.x=e,this.z=t,this.o=i,this.e=l,this.v=!1,this.n=this.p=null}function fA(e,t,i,l,c){var d=[],y=[],a,b;if(e.forEach(function(ee){if(!((Y=ee.length-1)<=0)){var Y,de=ee[0],G=ee[Y],V;if(om(de,G)){if(!de[2]&&!G[2]){for(c.lineStart(),a=0;a<Y;++a)c.point((de=ee[a])[0],de[1]);c.lineEnd();return}G[0]+=2*dn}d.push(V=new Dp(de,ee,null,!0)),y.push(V.o=new Dp(de,null,V,!1)),d.push(V=new Dp(G,ee,null,!1)),y.push(V.o=new Dp(G,null,V,!0))}}),!!d.length){for(y.sort(t),X2(d),X2(y),a=0,b=y.length;a<b;++a)y[a].e=i=!i;for(var w=d[0],I,C;;){for(var L=w,j=!0;L.v;)if((L=L.n)===w)return;I=L.z,c.lineStart();do{if(L.v=L.o.v=!0,L.e){if(j)for(a=0,b=I.length;a<b;++a)c.point((C=I[a])[0],C[1]);else l(L.x,L.n.x,1,c);L=L.n}else{if(j)for(I=L.p.z,a=I.length-1;a>=0;--a)c.point((C=I[a])[0],C[1]);else l(L.x,L.p.x,-1,c);L=L.p}L=L.o,I=L.z,j=!j}while(!L.v);c.lineEnd()}}}function X2(e){if(t=e.length){for(var t,i=0,l=e[0],c;++i<t;)l.n=c=e[i],c.p=l,l=c;l.n=c=e[0],c.p=l}}function x0(e){return Gn(e[0])<=jn?e[0]:ls(e[0])*((Gn(e[0])+jn)%oo-jn)}function dA(e,t){var i=x0(t),l=t[1],c=Jt(l),d=[Jt(i),-an(i),0],y=0,a=0,b=new $i;c===1?l=Dr+dn:c===-1&&(l=-Dr-dn);for(var w=0,I=e.length;w<I;++w)if(L=(C=e[w]).length)for(var C,L,j=C[L-1],ee=x0(j),Y=j[1]/2+$m,de=Jt(Y),G=an(Y),V=0;V<L;++V,ee=ie,de=B,G=S,j=U){var U=C[V],ie=x0(U),Z=U[1]/2+$m,B=Jt(Z),S=an(Z),k=ie-ee,W=k>=0?1:-1,q=W*k,Q=q>jn,ye=de*B;if(b.add(so(ye*W*Jt(q),G*S+ye*an(q))),y+=Q?k+W*oo:k,Q^ee>=i^ie>=i){var _e=Sh(ec(j),ec(U));Xm(_e);var xe=Sh(d,_e);Xm(xe);var te=(Q^k>=0?-1:1)*ao(xe[2]);(l>te||l===te&&(_e[0]||_e[1]))&&(a+=Q^k>=0?1:-1)}}return(y<-dn||y<dn&&b<-bd)^a&1}function pA(e,t,i,l){return function(c){var d=t(c),y=hA(),a=t(y),b=!1,w,I,C,L={point:j,lineStart:Y,lineEnd:de,polygonStart:function(){L.point=G,L.lineStart=V,L.lineEnd=U,I=[],w=[]},polygonEnd:function(){L.point=j,L.lineStart=Y,L.lineEnd=de,I=KC(I);var ie=dA(w,l);I.length?(b||(c.polygonStart(),b=!0),fA(I,o5,ie,i,c)):ie&&(b||(c.polygonStart(),b=!0),c.lineStart(),i(null,null,1,c),c.lineEnd()),b&&(c.polygonEnd(),b=!1),I=w=null},sphere:function(){c.polygonStart(),c.lineStart(),i(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function j(ie,Z){e(ie,Z)&&c.point(ie,Z)}function ee(ie,Z){d.point(ie,Z)}function Y(){L.point=ee,d.lineStart()}function de(){L.point=j,d.lineEnd()}function G(ie,Z){C.push([ie,Z]),a.point(ie,Z)}function V(){a.lineStart(),C=[]}function U(){G(C[0][0],C[0][1]),a.lineEnd();var ie=a.clean(),Z=y.result(),B,S=Z.length,k,W,q;if(C.pop(),w.push(C),C=null,!!S){if(ie&1){if(W=Z[0],(k=W.length-1)>0){for(b||(c.polygonStart(),b=!0),c.lineStart(),B=0;B<k;++B)c.point((q=W[B])[0],q[1]);c.lineEnd()}return}S>1&&ie&2&&Z.push(Z.pop().concat(Z.shift())),I.push(Z.filter(i5))}}return L}}function i5(e){return e.length>1}function o5(e,t){return((e=e.x)[0]<0?e[1]-Dr-dn:Dr-e[1])-((t=t.x)[0]<0?t[1]-Dr-dn:Dr-t[1])}const l_=pA(function(){return!0},s5,l5,[-jn,-Dr]);function s5(e){var t=NaN,i=NaN,l=NaN,c;return{lineStart:function(){e.lineStart(),c=1},point:function(d,y){var a=d>0?jn:-jn,b=Gn(d-t);Gn(b-jn)<dn?(e.point(t,i=(i+y)/2>0?Dr:-Dr),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(a,i),e.point(d,i),c=0):l!==a&&b>=jn&&(Gn(t-l)<dn&&(t-=l*dn),Gn(d-a)<dn&&(d-=a*dn),i=a5(t,i,d,y),e.point(l,i),e.lineEnd(),e.lineStart(),e.point(a,i),c=0),e.point(t=d,i=y),l=a},lineEnd:function(){e.lineEnd(),t=i=NaN},clean:function(){return 2-c}}}function a5(e,t,i,l){var c,d,y=Jt(e-i);return Gn(y)>dn?zh((Jt(t)*(d=an(l))*Jt(i)-Jt(l)*(c=an(t))*Jt(e))/(c*d*y)):(t+l)/2}function l5(e,t,i,l){var c;if(e==null)c=i*Dr,l.point(-jn,c),l.point(0,c),l.point(jn,c),l.point(jn,0),l.point(jn,-c),l.point(0,-c),l.point(-jn,-c),l.point(-jn,0),l.point(-jn,c);else if(Gn(e[0]-t[0])>dn){var d=e[0]<t[0]?jn:-jn;c=i*d/2,l.point(-d,c),l.point(0,c),l.point(d,c)}else l.point(t[0],t[1])}function mA(e){var t=an(e),i=6*pn,l=t>0,c=Gn(t)>dn;function d(I,C,L,j){cA(j,e,i,L,I,C)}function y(I,C){return an(I)*an(C)>t}function a(I){var C,L,j,ee,Y;return{lineStart:function(){ee=j=!1,Y=1},point:function(de,G){var V=[de,G],U,ie=y(de,G),Z=l?ie?0:w(de,G):ie?w(de+(de<0?jn:-jn),G):0;if(!C&&(ee=j=ie)&&I.lineStart(),ie!==j&&(U=b(C,V),(!U||om(C,U)||om(V,U))&&(V[2]=1)),ie!==j)Y=0,ie?(I.lineStart(),U=b(V,C),I.point(U[0],U[1])):(U=b(C,V),I.point(U[0],U[1],2),I.lineEnd()),C=U;else if(c&&C&&l^ie){var B;!(Z&L)&&(B=b(V,C,!0))&&(Y=0,l?(I.lineStart(),I.point(B[0][0],B[0][1]),I.point(B[1][0],B[1][1]),I.lineEnd()):(I.point(B[1][0],B[1][1]),I.lineEnd(),I.lineStart(),I.point(B[0][0],B[0][1],3)))}ie&&(!C||!om(C,V))&&I.point(V[0],V[1]),C=V,j=ie,L=Z},lineEnd:function(){j&&I.lineEnd(),C=null},clean:function(){return Y|(ee&&j)<<1}}}function b(I,C,L){var j=ec(I),ee=ec(C),Y=[1,0,0],de=Sh(j,ee),G=Rp(de,de),V=de[0],U=G-V*V;if(!U)return!L&&I;var ie=t*G/U,Z=-t*V/U,B=Sh(Y,de),S=jp(Y,ie),k=jp(de,Z);_0(S,k);var W=B,q=Rp(S,W),Q=Rp(W,W),ye=q*q-Q*(Rp(S,S)-1);if(!(ye<0)){var _e=hi(ye),xe=jp(W,(-q-_e)/Q);if(_0(xe,S),xe=Hm(xe),!L)return xe;var te=I[0],ue=C[0],ne=I[1],re=C[1],me;ue<te&&(me=te,te=ue,ue=me);var Se=ue-te,we=Gn(Se-jn)<dn,Ue=we||Se<dn;if(!we&&re<ne&&(me=ne,ne=re,re=me),Ue?we?ne+re>0^xe[1]<(Gn(xe[0]-te)<dn?ne:re):ne<=xe[1]&&xe[1]<=re:Se>jn^(te<=xe[0]&&xe[0]<=ue)){var Pe=jp(W,(-q+_e)/Q);return _0(Pe,S),[xe,Hm(Pe)]}}}function w(I,C){var L=l?e:jn-e,j=0;return I<-L?j|=1:I>L&&(j|=2),C<-L?j|=4:C>L&&(j|=8),j}return pA(y,a,d,l?[0,-e]:[-jn,e-jn])}function u5(e,t,i,l,c,d){var y=e[0],a=e[1],b=t[0],w=t[1],I=0,C=1,L=b-y,j=w-a,ee;if(ee=i-y,!(!L&&ee>0)){if(ee/=L,L<0){if(ee<I)return;ee<C&&(C=ee)}else if(L>0){if(ee>C)return;ee>I&&(I=ee)}if(ee=c-y,!(!L&&ee<0)){if(ee/=L,L<0){if(ee>C)return;ee>I&&(I=ee)}else if(L>0){if(ee<I)return;ee<C&&(C=ee)}if(ee=l-a,!(!j&&ee>0)){if(ee/=j,j<0){if(ee<I)return;ee<C&&(C=ee)}else if(j>0){if(ee>C)return;ee>I&&(I=ee)}if(ee=d-a,!(!j&&ee<0)){if(ee/=j,j<0){if(ee>C)return;ee>I&&(I=ee)}else if(j>0){if(ee<I)return;ee<C&&(C=ee)}return I>0&&(e[0]=y+I*L,e[1]=a+I*j),C<1&&(t[0]=y+C*L,t[1]=a+C*j),!0}}}}}var jf=1e9,Bp=-jf;function Rg(e,t,i,l){function c(w,I){return e<=w&&w<=i&&t<=I&&I<=l}function d(w,I,C,L){var j=0,ee=0;if(w==null||(j=y(w,C))!==(ee=y(I,C))||b(w,I)<0^C>0)do L.point(j===0||j===3?e:i,j>1?l:t);while((j=(j+C+4)%4)!==ee);else L.point(I[0],I[1])}function y(w,I){return Gn(w[0]-e)<dn?I>0?0:3:Gn(w[0]-i)<dn?I>0?2:1:Gn(w[1]-t)<dn?I>0?1:0:I>0?3:2}function a(w,I){return b(w.x,I.x)}function b(w,I){var C=y(w,1),L=y(I,1);return C!==L?C-L:C===0?I[1]-w[1]:C===1?w[0]-I[0]:C===2?w[1]-I[1]:I[0]-w[0]}return function(w){var I=w,C=hA(),L,j,ee,Y,de,G,V,U,ie,Z,B,S={point:k,lineStart:ye,lineEnd:_e,polygonStart:q,polygonEnd:Q};function k(te,ue){c(te,ue)&&I.point(te,ue)}function W(){for(var te=0,ue=0,ne=j.length;ue<ne;++ue)for(var re=j[ue],me=1,Se=re.length,we=re[0],Ue,Pe,ze=we[0],He=we[1];me<Se;++me)Ue=ze,Pe=He,we=re[me],ze=we[0],He=we[1],Pe<=l?He>l&&(ze-Ue)*(l-Pe)>(He-Pe)*(e-Ue)&&++te:He<=l&&(ze-Ue)*(l-Pe)<(He-Pe)*(e-Ue)&&--te;return te}function q(){I=C,L=[],j=[],B=!0}function Q(){var te=W(),ue=B&&te,ne=(L=KC(L)).length;(ue||ne)&&(w.polygonStart(),ue&&(w.lineStart(),d(null,null,1,w),w.lineEnd()),ne&&fA(L,a,te,d,w),w.polygonEnd()),I=w,L=j=ee=null}function ye(){S.point=xe,j&&j.push(ee=[]),Z=!0,ie=!1,V=U=NaN}function _e(){L&&(xe(Y,de),G&&ie&&C.rejoin(),L.push(C.result())),S.point=k,ie&&I.lineEnd()}function xe(te,ue){var ne=c(te,ue);if(j&&ee.push([te,ue]),Z)Y=te,de=ue,G=ne,Z=!1,ne&&(I.lineStart(),I.point(te,ue));else if(ne&&ie)I.point(te,ue);else{var re=[V=Math.max(Bp,Math.min(jf,V)),U=Math.max(Bp,Math.min(jf,U))],me=[te=Math.max(Bp,Math.min(jf,te)),ue=Math.max(Bp,Math.min(jf,ue))];u5(re,me,e,t,i,l)?(ie||(I.lineStart(),I.point(re[0],re[1])),I.point(me[0],me[1]),ne||I.lineEnd(),B=!1):ne&&(I.lineStart(),I.point(te,ue),B=!1)}V=te,U=ue,ie=ne}return S}}function c5(){var e=0,t=0,i=960,l=500,c,d,y;return y={stream:function(a){return c&&d===a?c:c=Rg(e,t,i,l)(d=a)},extent:function(a){return arguments.length?(e=+a[0][0],t=+a[0][1],i=+a[1][0],l=+a[1][1],c=d=null,y):[[e,t],[i,l]]}}}var u_,c_,sm,am,Th={sphere:kr,point:kr,lineStart:h5,lineEnd:kr,polygonStart:kr,polygonEnd:kr};function h5(){Th.point=d5,Th.lineEnd=f5}function f5(){Th.point=Th.lineEnd=kr}function d5(e,t){e*=pn,t*=pn,c_=e,sm=Jt(t),am=an(t),Th.point=p5}function p5(e,t){e*=pn,t*=pn;var i=Jt(t),l=an(t),c=Gn(e-c_),d=an(c),y=Jt(c),a=l*y,b=am*i-sm*l*d,w=sm*i+am*l*d;u_.add(so(hi(a*a+b*b),w)),c_=e,sm=i,am=l}function gA(e){return u_=new $i,Is(e,Th),+u_}var h_=[null,null],m5={type:"LineString",coordinates:h_};function ng(e,t){return h_[0]=e,h_[1]=t,gA(m5)}var q2={Feature:function(e,t){return rg(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,l=-1,c=i.length;++l<c;)if(rg(i[l].geometry,t))return!0;return!1}},K2={Sphere:function(){return!0},Point:function(e,t){return Y2(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(Y2(i[l],t))return!0;return!1},LineString:function(e,t){return J2(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(J2(i[l],t))return!0;return!1},Polygon:function(e,t){return Q2(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,l=-1,c=i.length;++l<c;)if(Q2(i[l],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,l=-1,c=i.length;++l<c;)if(rg(i[l],t))return!0;return!1}};function rg(e,t){return e&&K2.hasOwnProperty(e.type)?K2[e.type](e,t):!1}function Y2(e,t){return ng(e,t)===0}function J2(e,t){for(var i,l,c,d=0,y=e.length;d<y;d++){if(l=ng(e[d],t),l===0||d>0&&(c=ng(e[d],e[d-1]),c>0&&i<=c&&l<=c&&(i+l-c)*(1-Math.pow((i-l)/c,2))<bd*c))return!0;i=l}return!1}function Q2(e,t){return!!dA(e.map(g5),yA(t))}function g5(e){return e=e.map(yA),e.pop(),e}function yA(e){return[e[0]*pn,e[1]*pn]}function y5(e,t){return(e&&q2.hasOwnProperty(e.type)?q2[e.type]:rg)(e,t)}function eE(e,t,i){var l=oh(e,t-dn,i).concat(t);return function(c){return l.map(function(d){return[c,d]})}}function tE(e,t,i){var l=oh(e,t-dn,i).concat(t);return function(c){return l.map(function(d){return[d,c]})}}function vA(){var e,t,i,l,c,d,y,a,b=10,w=b,I=90,C=360,L,j,ee,Y,de=2.5;function G(){return{type:"MultiLineString",coordinates:V()}}function V(){return oh(Op(l/I)*I,i,I).map(ee).concat(oh(Op(a/C)*C,y,C).map(Y)).concat(oh(Op(t/b)*b,e,b).filter(function(U){return Gn(U%I)>dn}).map(L)).concat(oh(Op(d/w)*w,c,w).filter(function(U){return Gn(U%C)>dn}).map(j))}return G.lines=function(){return V().map(function(U){return{type:"LineString",coordinates:U}})},G.outline=function(){return{type:"Polygon",coordinates:[ee(l).concat(Y(y).slice(1),ee(i).reverse().slice(1),Y(a).reverse().slice(1))]}},G.extent=function(U){return arguments.length?G.extentMajor(U).extentMinor(U):G.extentMinor()},G.extentMajor=function(U){return arguments.length?(l=+U[0][0],i=+U[1][0],a=+U[0][1],y=+U[1][1],l>i&&(U=l,l=i,i=U),a>y&&(U=a,a=y,y=U),G.precision(de)):[[l,a],[i,y]]},G.extentMinor=function(U){return arguments.length?(t=+U[0][0],e=+U[1][0],d=+U[0][1],c=+U[1][1],t>e&&(U=t,t=e,e=U),d>c&&(U=d,d=c,c=U),G.precision(de)):[[t,d],[e,c]]},G.step=function(U){return arguments.length?G.stepMajor(U).stepMinor(U):G.stepMinor()},G.stepMajor=function(U){return arguments.length?(I=+U[0],C=+U[1],G):[I,C]},G.stepMinor=function(U){return arguments.length?(b=+U[0],w=+U[1],G):[b,w]},G.precision=function(U){return arguments.length?(de=+U,L=eE(d,c,90),j=tE(t,e,de),ee=eE(a,y,90),Y=tE(l,i,de),G):de},G.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}function v5(){return vA()()}function _5(e,t){var i=e[0]*pn,l=e[1]*pn,c=t[0]*pn,d=t[1]*pn,y=an(l),a=Jt(l),b=an(d),w=Jt(d),I=y*an(i),C=y*Jt(i),L=b*an(c),j=b*Jt(c),ee=2*ao(hi(O2(d-l)+y*b*O2(c-i))),Y=Jt(ee),de=ee?function(G){var V=Jt(G*=ee)/Y,U=Jt(ee-G)/Y,ie=U*I+V*L,Z=U*C+V*j,B=U*a+V*w;return[so(Z,ie)*fr,so(B,hi(ie*ie+Z*Z))*fr]}:function(){return[i*fr,l*fr]};return de.distance=ee,de}const Ed=e=>e;var w0=new $i,f_=new $i,_A,xA,d_,p_,Ul={point:kr,lineStart:kr,lineEnd:kr,polygonStart:function(){Ul.lineStart=x5,Ul.lineEnd=b5},polygonEnd:function(){Ul.lineStart=Ul.lineEnd=Ul.point=kr,w0.add(Gn(f_)),f_=new $i},result:function(){var e=w0/2;return w0=new $i,e}};function x5(){Ul.point=w5}function w5(e,t){Ul.point=wA,_A=d_=e,xA=p_=t}function wA(e,t){f_.add(p_*e-d_*t),d_=e,p_=t}function b5(){wA(_A,xA)}const nE=Ul;var Ch=1/0,ig=Ch,Sd=-Ch,og=Sd,E5={point:S5,lineStart:kr,lineEnd:kr,polygonStart:kr,polygonEnd:kr,result:function(){var e=[[Ch,ig],[Sd,og]];return Sd=og=-(ig=Ch=1/0),e}};function S5(e,t){e<Ch&&(Ch=e),e>Sd&&(Sd=e),t<ig&&(ig=t),t>og&&(og=t)}const sg=E5;var m_=0,g_=0,Df=0,ag=0,lg=0,sh=0,y_=0,v_=0,Bf=0,bA,EA,la,ua,Ps={point:tc,lineStart:rE,lineEnd:iE,polygonStart:function(){Ps.lineStart=A5,Ps.lineEnd=I5},polygonEnd:function(){Ps.point=tc,Ps.lineStart=rE,Ps.lineEnd=iE},result:function(){var e=Bf?[y_/Bf,v_/Bf]:sh?[ag/sh,lg/sh]:Df?[m_/Df,g_/Df]:[NaN,NaN];return m_=g_=Df=ag=lg=sh=y_=v_=Bf=0,e}};function tc(e,t){m_+=e,g_+=t,++Df}function rE(){Ps.point=T5}function T5(e,t){Ps.point=C5,tc(la=e,ua=t)}function C5(e,t){var i=e-la,l=t-ua,c=hi(i*i+l*l);ag+=c*(la+e)/2,lg+=c*(ua+t)/2,sh+=c,tc(la=e,ua=t)}function iE(){Ps.point=tc}function A5(){Ps.point=P5}function I5(){SA(bA,EA)}function P5(e,t){Ps.point=SA,tc(bA=la=e,EA=ua=t)}function SA(e,t){var i=e-la,l=t-ua,c=hi(i*i+l*l);ag+=c*(la+e)/2,lg+=c*(ua+t)/2,sh+=c,c=ua*e-la*t,y_+=c*(la+e),v_+=c*(ua+t),Bf+=c*3,tc(la=e,ua=t)}const oE=Ps;function TA(e){this._context=e}TA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,oo);break}}},result:kr};var __=new $i,b0,CA,AA,Nf,Uf,ug={point:kr,lineStart:function(){ug.point=M5},lineEnd:function(){b0&&IA(CA,AA),ug.point=kr},polygonStart:function(){b0=!0},polygonEnd:function(){b0=null},result:function(){var e=+__;return __=new $i,e}};function M5(e,t){ug.point=IA,CA=Nf=e,AA=Uf=t}function IA(e,t){Nf-=e,Uf-=t,__.add(hi(Nf*Nf+Uf*Uf)),Nf=e,Uf=t}const sE=ug;function PA(){this._string=[]}PA.prototype={_radius:4.5,_circle:aE(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=aE(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function aE(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function k5(e,t){var i=4.5,l,c;function d(y){return y&&(typeof i=="function"&&c.pointRadius(+i.apply(this,arguments)),Is(y,l(c))),c.result()}return d.area=function(y){return Is(y,l(nE)),nE.result()},d.measure=function(y){return Is(y,l(sE)),sE.result()},d.bounds=function(y){return Is(y,l(sg)),sg.result()},d.centroid=function(y){return Is(y,l(oE)),oE.result()},d.projection=function(y){return arguments.length?(l=y==null?(e=null,Ed):(e=y).stream,d):e},d.context=function(y){return arguments.length?(c=y==null?(t=null,new PA):new TA(t=y),typeof i!="function"&&c.pointRadius(i),d):t},d.pointRadius=function(y){return arguments.length?(i=typeof y=="function"?y:(c.pointRadius(+y),+y),d):i},d.projection(e).context(t)}function L5(e){return{stream:Od(e)}}function Od(e){return function(t){var i=new x_;for(var l in e)i[l]=e[l];return i.stream=t,i}}function x_(){}x_.prototype={constructor:x_,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function N1(e,t,i){var l=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),l!=null&&e.clipExtent(null),Is(i,e.stream(sg)),t(sg.result()),l!=null&&e.clipExtent(l),e}function jg(e,t,i){return N1(e,function(l){var c=t[1][0]-t[0][0],d=t[1][1]-t[0][1],y=Math.min(c/(l[1][0]-l[0][0]),d/(l[1][1]-l[0][1])),a=+t[0][0]+(c-y*(l[1][0]+l[0][0]))/2,b=+t[0][1]+(d-y*(l[1][1]+l[0][1]))/2;e.scale(150*y).translate([a,b])},i)}function U1(e,t,i){return jg(e,[[0,0],t],i)}function $1(e,t,i){return N1(e,function(l){var c=+t,d=c/(l[1][0]-l[0][0]),y=(c-d*(l[1][0]+l[0][0]))/2,a=-d*l[0][1];e.scale(150*d).translate([y,a])},i)}function V1(e,t,i){return N1(e,function(l){var c=+t,d=c/(l[1][1]-l[0][1]),y=-d*l[0][0],a=(c-d*(l[1][1]+l[0][1]))/2;e.scale(150*d).translate([y,a])},i)}var lE=16,z5=an(30*pn);function uE(e,t){return+t?O5(e,t):F5(e)}function F5(e){return Od({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}function O5(e,t){function i(l,c,d,y,a,b,w,I,C,L,j,ee,Y,de){var G=w-l,V=I-c,U=G*G+V*V;if(U>4*t&&Y--){var ie=y+L,Z=a+j,B=b+ee,S=hi(ie*ie+Z*Z+B*B),k=ao(B/=S),W=Gn(Gn(B)-1)<dn||Gn(d-C)<dn?(d+C)/2:so(Z,ie),q=e(W,k),Q=q[0],ye=q[1],_e=Q-l,xe=ye-c,te=V*_e-G*xe;(te*te/U>t||Gn((G*_e+V*xe)/U-.5)>.3||y*L+a*j+b*ee<z5)&&(i(l,c,d,y,a,b,Q,ye,W,ie/=S,Z/=S,B,Y,de),de.point(Q,ye),i(Q,ye,W,ie,Z,B,w,I,C,L,j,ee,Y,de))}}return function(l){var c,d,y,a,b,w,I,C,L,j,ee,Y,de={point:G,lineStart:V,lineEnd:ie,polygonStart:function(){l.polygonStart(),de.lineStart=Z},polygonEnd:function(){l.polygonEnd(),de.lineStart=V}};function G(k,W){k=e(k,W),l.point(k[0],k[1])}function V(){C=NaN,de.point=U,l.lineStart()}function U(k,W){var q=ec([k,W]),Q=e(k,W);i(C,L,I,j,ee,Y,C=Q[0],L=Q[1],I=k,j=q[0],ee=q[1],Y=q[2],lE,l),l.point(C,L)}function ie(){de.point=G,l.lineEnd()}function Z(){V(),de.point=B,de.lineEnd=S}function B(k,W){U(c=k,W),d=C,y=L,a=j,b=ee,w=Y,de.point=U}function S(){i(C,L,I,j,ee,Y,d,y,c,a,b,w,lE,l),de.lineEnd=ie,ie()}return de}}var R5=Od({point:function(e,t){this.stream.point(e*pn,t*pn)}});function j5(e){return Od({point:function(t,i){var l=e(t,i);return this.stream.point(l[0],l[1])}})}function D5(e,t,i,l,c){function d(y,a){return y*=l,a*=c,[t+e*y,i-e*a]}return d.invert=function(y,a){return[(y-t)/e*l,(i-a)/e*c]},d}function cE(e,t,i,l,c,d){if(!d)return D5(e,t,i,l,c);var y=an(d),a=Jt(d),b=y*e,w=a*e,I=y/e,C=a/e,L=(a*i-y*t)/e,j=(a*t+y*i)/e;function ee(Y,de){return Y*=l,de*=c,[b*Y-w*de+t,i-w*Y-b*de]}return ee.invert=function(Y,de){return[l*(I*Y-C*de+L),c*(j-C*Y-I*de)]},ee}function ga(e){return G1(function(){return e})()}function G1(e){var t,i=150,l=480,c=250,d=0,y=0,a=0,b=0,w=0,I,C=0,L=1,j=1,ee=null,Y=l_,de=null,G,V,U,ie=Ed,Z=.5,B,S,k,W,q;function Q(te){return k(te[0]*pn,te[1]*pn)}function ye(te){return te=k.invert(te[0],te[1]),te&&[te[0]*fr,te[1]*fr]}Q.stream=function(te){return W&&q===te?W:W=R5(j5(I)(Y(B(ie(q=te)))))},Q.preclip=function(te){return arguments.length?(Y=te,ee=void 0,xe()):Y},Q.postclip=function(te){return arguments.length?(ie=te,de=G=V=U=null,xe()):ie},Q.clipAngle=function(te){return arguments.length?(Y=+te?mA(ee=te*pn):(ee=null,l_),xe()):ee*fr},Q.clipExtent=function(te){return arguments.length?(ie=te==null?(de=G=V=U=null,Ed):Rg(de=+te[0][0],G=+te[0][1],V=+te[1][0],U=+te[1][1]),xe()):de==null?null:[[de,G],[V,U]]},Q.scale=function(te){return arguments.length?(i=+te,_e()):i},Q.translate=function(te){return arguments.length?(l=+te[0],c=+te[1],_e()):[l,c]},Q.center=function(te){return arguments.length?(d=te[0]%360*pn,y=te[1]%360*pn,_e()):[d*fr,y*fr]},Q.rotate=function(te){return arguments.length?(a=te[0]%360*pn,b=te[1]%360*pn,w=te.length>2?te[2]%360*pn:0,_e()):[a*fr,b*fr,w*fr]},Q.angle=function(te){return arguments.length?(C=te%360*pn,_e()):C*fr},Q.reflectX=function(te){return arguments.length?(L=te?-1:1,_e()):L<0},Q.reflectY=function(te){return arguments.length?(j=te?-1:1,_e()):j<0},Q.precision=function(te){return arguments.length?(B=uE(S,Z=te*te),xe()):hi(Z)},Q.fitExtent=function(te,ue){return jg(Q,te,ue)},Q.fitSize=function(te,ue){return U1(Q,te,ue)},Q.fitWidth=function(te,ue){return $1(Q,te,ue)},Q.fitHeight=function(te,ue){return V1(Q,te,ue)};function _e(){var te=cE(i,0,0,L,j,C).apply(null,t(d,y)),ue=cE(i,l-te[0],c-te[1],L,j,C);return I=B1(a,b,w),S=s_(t,ue),k=s_(I,S),B=uE(S,Z),xe()}function xe(){return W=q=null,Q}return function(){return t=e.apply(this,arguments),Q.invert=t.invert&&ye,_e()}}function Z1(e){var t=0,i=jn/3,l=G1(e),c=l(t,i);return c.parallels=function(d){return arguments.length?l(t=d[0]*pn,i=d[1]*pn):[t*fr,i*fr]},c}function B5(e){var t=an(e);function i(l,c){return[l*t,Jt(c)/t]}return i.invert=function(l,c){return[l/t,ao(c*t)]},i}function MA(e,t){var i=Jt(e),l=(i+Jt(t))/2;if(Gn(l)<dn)return B5(e);var c=1+i*(2*l-i),d=hi(c)/l;function y(a,b){var w=hi(c-2*l*Jt(b))/l;return[w*Jt(a*=l),d-w*an(a)]}return y.invert=function(a,b){var w=d-b,I=so(a,Gn(w))*ls(w);return w*l<0&&(I-=jn*ls(a)*ls(w)),[I/l,ao((c-(a*a+w*w)*l*l)/(2*l))]},y}function cg(){return Z1(MA).scale(155.424).center([0,33.6442])}function kA(){return cg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function N5(e){var t=e.length;return{point:function(i,l){for(var c=-1;++c<t;)e[c].point(i,l)},sphere:function(){for(var i=-1;++i<t;)e[i].sphere()},lineStart:function(){for(var i=-1;++i<t;)e[i].lineStart()},lineEnd:function(){for(var i=-1;++i<t;)e[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<t;)e[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<t;)e[i].polygonEnd()}}}function U5(){var e,t,i=kA(),l,c=cg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d,y=cg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,b,w={point:function(L,j){b=[L,j]}};function I(L){var j=L[0],ee=L[1];return b=null,l.point(j,ee),b||(d.point(j,ee),b)||(a.point(j,ee),b)}I.invert=function(L){var j=i.scale(),ee=i.translate(),Y=(L[0]-ee[0])/j,de=(L[1]-ee[1])/j;return(de>=.12&&de<.234&&Y>=-.425&&Y<-.214?c:de>=.166&&de<.234&&Y>=-.214&&Y<-.115?y:i).invert(L)},I.stream=function(L){return e&&t===L?e:e=N5([i.stream(t=L),c.stream(L),y.stream(L)])},I.precision=function(L){return arguments.length?(i.precision(L),c.precision(L),y.precision(L),C()):i.precision()},I.scale=function(L){return arguments.length?(i.scale(L),c.scale(L*.35),y.scale(L),I.translate(i.translate())):i.scale()},I.translate=function(L){if(!arguments.length)return i.translate();var j=i.scale(),ee=+L[0],Y=+L[1];return l=i.translate(L).clipExtent([[ee-.455*j,Y-.238*j],[ee+.455*j,Y+.238*j]]).stream(w),d=c.translate([ee-.307*j,Y+.201*j]).clipExtent([[ee-.425*j+dn,Y+.12*j+dn],[ee-.214*j-dn,Y+.234*j-dn]]).stream(w),a=y.translate([ee-.205*j,Y+.212*j]).clipExtent([[ee-.214*j+dn,Y+.166*j+dn],[ee-.115*j-dn,Y+.234*j-dn]]).stream(w),C()},I.fitExtent=function(L,j){return jg(I,L,j)},I.fitSize=function(L,j){return U1(I,L,j)},I.fitWidth=function(L,j){return $1(I,L,j)},I.fitHeight=function(L,j){return V1(I,L,j)};function C(){return e=t=null,I}return I.scale(1070)}function LA(e){return function(t,i){var l=an(t),c=an(i),d=e(l*c);return d===1/0?[2,0]:[d*c*Jt(t),d*Jt(i)]}}function Rd(e){return function(t,i){var l=hi(t*t+i*i),c=e(l),d=Jt(c),y=an(c);return[so(t*d,l*y),ao(l&&i*d/l)]}}var W1=LA(function(e){return hi(2/(1+e))});W1.invert=Rd(function(e){return 2*ao(e/2)});function $5(){return ga(W1).scale(124.75).clipAngle(180-.001)}var H1=LA(function(e){return(e=JC(e))&&e/Jt(e)});H1.invert=Rd(function(e){return e});function V5(){return ga(H1).scale(79.4188).clipAngle(180-.001)}function jd(e,t){return[e,Vm(j1((Dr+t)/2))]}jd.invert=function(e,t){return[e,2*zh(YC(t))-Dr]};function G5(){return zA(jd).scale(961/oo)}function zA(e){var t=ga(e),i=t.center,l=t.scale,c=t.translate,d=t.clipExtent,y=null,a,b,w;t.scale=function(C){return arguments.length?(l(C),I()):l()},t.translate=function(C){return arguments.length?(c(C),I()):c()},t.center=function(C){return arguments.length?(i(C),I()):i()},t.clipExtent=function(C){return arguments.length?(C==null?y=a=b=w=null:(y=+C[0][0],a=+C[0][1],b=+C[1][0],w=+C[1][1]),I()):y==null?null:[[y,a],[b,w]]};function I(){var C=jn*l(),L=t(uA(t.rotate()).invert([0,0]));return d(y==null?[[L[0]-C,L[1]-C],[L[0]+C,L[1]+C]]:e===jd?[[Math.max(L[0]-C,y),a],[Math.min(L[0]+C,b),w]]:[[y,Math.max(L[1]-C,a)],[b,Math.min(L[1]+C,w)]])}return I()}function Np(e){return j1((Dr+e)/2)}function FA(e,t){var i=an(e),l=e===t?Jt(e):Vm(i/an(t))/Vm(Np(t)/Np(e)),c=i*v0(Np(e),l)/l;if(!l)return jd;function d(y,a){c>0?a<-Dr+dn&&(a=-Dr+dn):a>Dr-dn&&(a=Dr-dn);var b=c/v0(Np(a),l);return[b*Jt(l*y),c-b*an(l*y)]}return d.invert=function(y,a){var b=c-a,w=ls(l)*hi(y*y+b*b),I=so(y,Gn(b))*ls(b);return b*l<0&&(I-=jn*ls(y)*ls(b)),[I/l,2*zh(v0(c/w,1/l))-Dr]},d}function Z5(){return Z1(FA).scale(109.5).parallels([30,30])}function Td(e,t){return[e,t]}Td.invert=Td;function W5(){return ga(Td).scale(152.63)}function OA(e,t){var i=an(e),l=e===t?Jt(e):(i-an(t))/(t-e),c=i/l+e;if(Gn(l)<dn)return Td;function d(y,a){var b=c-a,w=l*y;return[b*Jt(w),c-b*an(w)]}return d.invert=function(y,a){var b=c-a,w=so(y,Gn(b))*ls(b);return b*l<0&&(w-=jn*ls(y)*ls(b)),[w/l,c-ls(l)*hi(y*y+b*b)]},d}function H5(){return Z1(OA).scale(131.154).center([0,13.9389])}var ed=1.340264,td=-.081106,nd=893e-6,rd=.003796,hg=hi(3)/2,X5=12;function X1(e,t){var i=ao(hg*Jt(t)),l=i*i,c=l*l*l;return[e*an(i)/(hg*(ed+3*td*l+c*(7*nd+9*rd*l))),i*(ed+td*l+c*(nd+rd*l))]}X1.invert=function(e,t){for(var i=t,l=i*i,c=l*l*l,d=0,y,a,b;d<X5&&(a=i*(ed+td*l+c*(nd+rd*l))-t,b=ed+3*td*l+c*(7*nd+9*rd*l),i-=y=a/b,l=i*i,c=l*l*l,!(Gn(y)<bd));++d);return[hg*e*(ed+3*td*l+c*(7*nd+9*rd*l))/an(i),ao(Jt(i)/hg)]};function q5(){return ga(X1).scale(177.158)}function q1(e,t){var i=an(t),l=an(e)*i;return[i*Jt(e)/l,Jt(t)/l]}q1.invert=Rd(zh);function K5(){return ga(q1).scale(144.049).clipAngle(60)}function Y5(){var e=1,t=0,i=0,l=1,c=1,d=0,y,a,b=null,w,I,C,L=1,j=1,ee=Od({point:function(ie,Z){var B=U([ie,Z]);this.stream.point(B[0],B[1])}}),Y=Ed,de,G;function V(){return L=e*l,j=e*c,de=G=null,U}function U(ie){var Z=ie[0]*L,B=ie[1]*j;if(d){var S=B*y-Z*a;Z=Z*y+B*a,B=S}return[Z+t,B+i]}return U.invert=function(ie){var Z=ie[0]-t,B=ie[1]-i;if(d){var S=B*y+Z*a;Z=Z*y-B*a,B=S}return[Z/L,B/j]},U.stream=function(ie){return de&&G===ie?de:de=ee(Y(G=ie))},U.postclip=function(ie){return arguments.length?(Y=ie,b=w=I=C=null,V()):Y},U.clipExtent=function(ie){return arguments.length?(Y=ie==null?(b=w=I=C=null,Ed):Rg(b=+ie[0][0],w=+ie[0][1],I=+ie[1][0],C=+ie[1][1]),V()):b==null?null:[[b,w],[I,C]]},U.scale=function(ie){return arguments.length?(e=+ie,V()):e},U.translate=function(ie){return arguments.length?(t=+ie[0],i=+ie[1],V()):[t,i]},U.angle=function(ie){return arguments.length?(d=ie%360*pn,a=Jt(d),y=an(d),V()):d*fr},U.reflectX=function(ie){return arguments.length?(l=ie?-1:1,V()):l<0},U.reflectY=function(ie){return arguments.length?(c=ie?-1:1,V()):c<0},U.fitExtent=function(ie,Z){return jg(U,ie,Z)},U.fitSize=function(ie,Z){return U1(U,ie,Z)},U.fitWidth=function(ie,Z){return $1(U,ie,Z)},U.fitHeight=function(ie,Z){return V1(U,ie,Z)},U}function K1(e,t){var i=t*t,l=i*i;return[e*(.8707-.131979*i+l*(-.013791+l*(.003971*i-.001529*l))),t*(1.007226+i*(.015085+l*(-.044475+.028874*i-.005916*l)))]}K1.invert=function(e,t){var i=t,l=25,c;do{var d=i*i,y=d*d;i-=c=(i*(1.007226+d*(.015085+y*(-.044475+.028874*d-.005916*y)))-t)/(1.007226+d*(.015085*3+y*(-.044475*7+.028874*9*d-.005916*11*y)))}while(Gn(c)>dn&&--l>0);return[e/(.8707+(d=i*i)*(-.131979+d*(-.013791+d*d*d*(.003971-.001529*d)))),i]};function J5(){return ga(K1).scale(175.295)}function Y1(e,t){return[an(t)*Jt(e),Jt(t)]}Y1.invert=Rd(ao);function Q5(){return ga(Y1).scale(249.5).clipAngle(90+dn)}function J1(e,t){var i=an(t),l=1+an(e)*i;return[i*Jt(e)/l,Jt(t)/l]}J1.invert=Rd(function(e){return 2*zh(e)});function eF(){return ga(J1).scale(250).clipAngle(142)}function Q1(e,t){return[Vm(j1((Dr+t)/2)),-e]}Q1.invert=function(e,t){return[-t,2*zh(YC(e))-Dr]};function tF(){var e=zA(Q1),t=e.center,i=e.rotate;return e.center=function(l){return arguments.length?t([-l[1],l[0]]):(l=t(),[l[1],-l[0]])},e.rotate=function(l){return arguments.length?i([l[0],l[1],l.length>2?l[2]+90:90]):(l=i(),[l[0],l[1],l[2]-90])},i([0,0,90]).scale(159.155)}const nF=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:kA,geoAlbersUsa:U5,geoArea:Wz,geoAzimuthalEqualArea:$5,geoAzimuthalEqualAreaRaw:W1,geoAzimuthalEquidistant:V5,geoAzimuthalEquidistantRaw:H1,geoBounds:Kz,geoCentroid:n5,geoCircle:r5,geoClipAntimeridian:l_,geoClipCircle:mA,geoClipExtent:c5,geoClipRectangle:Rg,geoConicConformal:Z5,geoConicConformalRaw:FA,geoConicEqualArea:cg,geoConicEqualAreaRaw:MA,geoConicEquidistant:H5,geoConicEquidistantRaw:OA,geoContains:y5,geoDistance:ng,geoEqualEarth:q5,geoEqualEarthRaw:X1,geoEquirectangular:W5,geoEquirectangularRaw:Td,geoGnomonic:K5,geoGnomonicRaw:q1,geoGraticule:vA,geoGraticule10:v5,geoIdentity:Y5,geoInterpolate:_5,geoLength:gA,geoMercator:G5,geoMercatorRaw:jd,geoNaturalEarth1:J5,geoNaturalEarth1Raw:K1,geoOrthographic:Q5,geoOrthographicRaw:Y1,geoPath:k5,geoProjection:ga,geoProjectionMutator:G1,geoRotation:uA,geoStereographic:eF,geoStereographicRaw:J1,geoStream:Is,geoTransform:L5,geoTransverseMercator:tF,geoTransverseMercatorRaw:Q1},Symbol.toStringTag,{value:"Module"})),rF=A_(nF);var ru=2*Math.PI*6378137/2,iF=Math.PI/180;function RA(e){return e=e||256,2*Math.PI*6378137/e}function oF(e){var t=e[0],i=e[1],l=e[2];return(1<<l)*((1<<l)+t)+i}function w_(e,t,i){var l=jA(e,t,i);return l[0]=Math.floor(l[0]),l[1]=Math.floor(l[1]),l}function jA(e,t,i){var l=t,c=ax(e[0]),d=sx(e[1]),y=Math.sin(d*iF),a=Math.pow(2,l),b=a*(c/360+.5),w=a*(.5-.25*Math.log((1+y)/(1-y))/Math.PI);return oc([b,w,l],i)}function sF(e,t=6){var i=e[0],l=e[1],c=e[2],d=e[3],y=(i-c)/2+c,a=(l-d)/2+d;return t!=null&&(y=Number(y.toFixed(t)),a=Number(a.toFixed(t))),[y,a]}function fg(e,t,i={enable:!0,decimal:1}){e=Dg(e,t);var l=e[0],c=e[1],d=l*ru/180,y=Math.log(Math.tan((90+c)*Math.PI/360))/(Math.PI/180);return y=y*ru/180,i.enable&&(d=Number(d.toFixed(i.decimal)),y=Number(y.toFixed(i.decimal))),[d,y]}function b_(e,t=6){var i=e[0],l=e[1],c=i/ru*180,d=l/ru*180;return d=180/Math.PI*(2*Math.atan(Math.exp(d*Math.PI/180))-Math.PI/2),t!=null&&(c=Number(c.toFixed(t)),d=Number(d.toFixed(t))),[c,d]}function ex(e,t,i){var l=e[0],c=e[1],d=ix(t,i),y=(l+ru)/d,a=(c+ru)/d;return[y,a,t]}function DA(e,t,i){e=Dg(e,i);var l=fg(e),c=ex(l,t);return tx(c)}function aF(e,t,i){if(e=Dg(e,i),t===0)return[0,0,0];var l=DA(e,t);return NA(l)}function lF(e,t){if(t===0)return[0,0,0];var i=ex(e,t);return tx(i)}function E_(e,t,i=1){var l=e[0],c=e[1],d=e[2],y=ix(d,t),a=l*y-ru,b=c*y-ru;return i!=null&&(a=Number(a.toFixed(i)),b=Number(b.toFixed(i))),[a,b]}function tx(e,t,i){t=t||256;var l=e[0],c=e[1],d=e[2];if(d===0)return[0,0,0];rx(d);var y=Math.ceil(l/t)-1,a=Math.ceil(c/t)-1;return y<0&&(y=0),a<0&&(a=0),[y,a,d]}function nx(e,t,i){oc(e,i),t=t||256;var l=e[0],c=e[1],d=e[2],y=E_([l*t,c*t,d]),a=E_([(l+1)*t,(c+1)*t,d]);return[y[0],y[1],a[0],a[1]]}function BA(e,t){oc(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return[-180,-85.051129,180,85.051129];var d=nx([i,l,c]),y=d[0],a=d[1],b=d[2],w=d[3],I=b_([y,a,c]),C=b_([b,w,c]);return[I[0],I[1],C[0],C[1]]}function uF(e){var t=Dd(e);return nx(t)}function cF(e){var t=Dd(e);return BA(t)}function NA(e,t){oc(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return[0,0,0];var d=i,y=Math.pow(2,c)-1-l;return[d,y,c]}function Dd(e){var t=e[0],i=e[1],l=e[2],c=t,d=Math.pow(2,l)-i-1;return[c,d,l]}function hF(e){var t=Dd(e);return UA(t)}function UA(e,t){oc(e,t);var i=e[0],l=e[1],c=e[2];if(c===0)return"";var d="";return l=Math.pow(2,c)-1-l,ox(c,0,-1).map(function(y){var a=0,b=1<<y-1;i&b&&(a+=1),l&b&&(a+=2),d=d.concat(a)}),d}function fF(e){var t=$A(e);return Dd(t)}function $A(e){var t=0,i=0,l=e.length;return ox(l,0,-1).map(function(c){var d=1<<c-1;switch(parseInt(e[l-c],0)){case 0:break;case 1:t+=d;break;case 2:i+=d;break;case 3:t+=d,i+=d;break;default:throw new Error("Invalid Quadkey digit sequence")}}),[t,i,l]}function dF(e){var t=fg([e[0],e[1]]),i=fg([e[2],e[3]]);return[t[0],t[1],i[0],i[1]]}function oc(e,t){var i=e[0],l=e[1],c=e[2];if(t===!1)return e;if(c==null)throw new Error("<zoom> is required");if(i==null)throw new Error("<x> is required");if(l==null)throw new Error("<y> is required");return c=rx(c),e=VA(e),e}function VA(e){var t=e[0],i=e[1],l=e[2],c=Math.pow(2,l);return t=t%c,t<0&&(t=t+c),[t,i,l]}function rx(e){if(e===!1)return e;if(e==null)throw new Error("<zoom> is required");if(e<0)throw new Error("<zoom> cannot be less than 0");if(e>32)throw new Error("<zoom> cannot be greater than 32");return e}function Dg(e,t){if(t===!1)return e;var i=ax(e[0]),l=sx(e[1]);return l>85&&(l=85),l<-85&&(l=-85),[i,l]}function ix(e,t){return RA(t)/Math.pow(2,e)}function ox(e,t,i){t==null&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var l=Math.max(Math.ceil((t-e)/i),0),c=Array(l),d=0;d<l;d++,e+=i)c[d]=e;return c}function pF(e){if(!e)throw new Error("array is required");if(e&&e[0]&&e.length===4&&e[0][0]===void 0)return e;if(e&&e[0]&&e[0][0]!==void 0){var t=e[0][0],i=e[0][1],l=e[0][2],c=e[0][3];return e.map(function(d){d[0]<t&&(t=d[0]),d[1]<i&&(i=d[1]),d[2]>l&&(l=d[2]),d[3]>c&&(c=d[3])}),[t,i,l,c]}}function mF(e){try{return oc(e),!0}catch{return!1}}function sx(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function ax(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function gF(e){var t=w_([e[0],e[1]],32),i=w_([e[2],e[3]],32),l=[t[0],t[1],i[0],i[1]],c=yF(l);if(c===0)return[0,0,0];var d=l[0]>>>32-c,y=l[1]>>>32-c;return[d,y,c]}function yF(e){for(var t=28,i=0;i<t;i++){var l=1<<32-(i+1);if((e[0]&l)!==(e[2]&l)||(e[1]&l)!==(e[3]&l))return i}return t}const vF=Object.freeze(Object.defineProperty({__proto__:null,bboxToCenter:sF,bboxToMeters:dF,bboxToTile:gF,googleToBBox:cF,googleToBBoxMeters:uF,googleToQuadkey:hF,googleToTile:Dd,hash:oF,initialResolution:RA,latitude:sx,lngLatToGoogle:aF,lngLatToMeters:fg,lngLatToTile:DA,longitude:ax,maxBBox:pF,metersToLngLat:b_,metersToPixels:ex,metersToTile:lF,pixelsToMeters:E_,pixelsToTile:tx,pointToTile:w_,pointToTileFraction:jA,quadkeyToGoogle:$A,quadkeyToTile:fF,range:ox,resolution:ix,tileToBBox:BA,tileToBBoxMeters:nx,tileToGoogle:NA,tileToQuadkey:UA,validTile:mF,validateLngLat:Dg,validateTile:oc,validateZoom:rx,wrapTile:VA},Symbol.toStringTag,{value:"Module"})),_F=A_(vF);var Bg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Bg.read=function(e,t,i,l,c){var d,y,a=c*8-l-1,b=(1<<a)-1,w=b>>1,I=-7,C=i?c-1:0,L=i?-1:1,j=e[t+C];for(C+=L,d=j&(1<<-I)-1,j>>=-I,I+=a;I>0;d=d*256+e[t+C],C+=L,I-=8);for(y=d&(1<<-I)-1,d>>=-I,I+=l;I>0;y=y*256+e[t+C],C+=L,I-=8);if(d===0)d=1-w;else{if(d===b)return y?NaN:(j?-1:1)*(1/0);y=y+Math.pow(2,l),d=d-w}return(j?-1:1)*y*Math.pow(2,d-l)};Bg.write=function(e,t,i,l,c,d){var y,a,b,w=d*8-c-1,I=(1<<w)-1,C=I>>1,L=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=l?0:d-1,ee=l?1:-1,Y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,y=I):(y=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-y))<1&&(y--,b*=2),y+C>=1?t+=L/b:t+=L*Math.pow(2,1-C),t*b>=2&&(y++,b/=2),y+C>=I?(a=0,y=I):y+C>=1?(a=(t*b-1)*Math.pow(2,c),y=y+C):(a=t*Math.pow(2,C-1)*Math.pow(2,c),y=0));c>=8;e[i+j]=a&255,j+=ee,a/=256,c-=8);for(y=y<<c|a,w+=c;w>0;e[i+j]=y&255,j+=ee,y/=256,w-=8);e[i+j-ee]|=Y*128};var xF=er,Up=Bg;function er(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}er.Varint=0;er.Fixed64=1;er.Bytes=2;er.Fixed32=5;var S_=65536*65536,hE=1/S_,wF=12,GA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");er.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),c=l>>3,d=this.pos;this.type=l&7,e(c,t,this),this.pos===d&&this.skip(l)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=$p(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=dE(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=$p(this.buf,this.pos)+$p(this.buf,this.pos+4)*S_;return this.pos+=8,e},readSFixed64:function(){var e=$p(this.buf,this.pos)+dE(this.buf,this.pos+4)*S_;return this.pos+=8,e},readFloat:function(){var e=Up.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Up.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,i,l;return l=t[this.pos++],i=l&127,l<128||(l=t[this.pos++],i|=(l&127)<<7,l<128)||(l=t[this.pos++],i|=(l&127)<<14,l<128)||(l=t[this.pos++],i|=(l&127)<<21,l<128)?i:(l=t[this.pos],i|=(l&15)<<28,bF(i,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=wF&&GA?RF(this.buf,t,e):OF(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==er.Bytes)return e.push(this.readVarint(t));var i=Oa(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==er.Bytes)return e.push(this.readSVarint());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==er.Bytes)return e.push(this.readBoolean());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==er.Bytes)return e.push(this.readFloat());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==er.Bytes)return e.push(this.readDouble());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==er.Bytes)return e.push(this.readFixed32());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==er.Bytes)return e.push(this.readSFixed32());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==er.Bytes)return e.push(this.readFixed64());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==er.Bytes)return e.push(this.readSFixed64());var t=Oa(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===er.Varint)for(;this.buf[this.pos++]>127;);else if(t===er.Bytes)this.pos=this.readVarint()+this.pos;else if(t===er.Fixed32)this.pos+=4;else if(t===er.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Nc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Nc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Nc(this.buf,e&-1,this.pos),Nc(this.buf,Math.floor(e*hE),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Nc(this.buf,e&-1,this.pos),Nc(this.buf,Math.floor(e*hE),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){EF(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=jF(this.buf,e,this.pos);var i=this.pos-t;i>=128&&fE(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Up.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Up.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var l=this.pos-i;l>=128&&fE(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(e,t,i){this.writeTag(e,er.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,CF,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,AF,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,MF,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,IF,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,PF,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,kF,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,LF,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,zF,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,FF,t)},writeBytesField:function(e,t){this.writeTag(e,er.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,er.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,er.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,er.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,er.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,er.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,er.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,er.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,er.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,er.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,!!t)}};function bF(e,t,i){var l=i.buf,c,d;if(d=l[i.pos++],c=(d&112)>>4,d<128||(d=l[i.pos++],c|=(d&127)<<3,d<128)||(d=l[i.pos++],c|=(d&127)<<10,d<128)||(d=l[i.pos++],c|=(d&127)<<17,d<128)||(d=l[i.pos++],c|=(d&127)<<24,d<128)||(d=l[i.pos++],c|=(d&1)<<31,d<128))return Bc(e,c,t);throw new Error("Expected varint not more than 10 bytes")}function Oa(e){return e.type===er.Bytes?e.readVarint()+e.pos:e.pos+1}function Bc(e,t,i){return i?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function EF(e,t){var i,l;if(e>=0?(i=e%4294967296|0,l=e/4294967296|0):(i=~(-e%4294967296),l=~(-e/4294967296),i^4294967295?i=i+1|0:(i=0,l=l+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),SF(i,l,t),TF(l,t)}function SF(e,t,i){i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos++]=e&127|128,e>>>=7,i.buf[i.pos]=e&127}function TF(e,t){var i=(e&7)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function fE(e,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));i.realloc(l);for(var c=i.pos-1;c>=e;c--)i.buf[c+l]=i.buf[c]}function CF(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function AF(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function IF(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function PF(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function MF(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function kF(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function LF(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function zF(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function FF(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function $p(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function Nc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function dE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function OF(e,t,i){for(var l="",c=t;c<i;){var d=e[c],y=null,a=d>239?4:d>223?3:d>191?2:1;if(c+a>i)break;var b,w,I;a===1?d<128&&(y=d):a===2?(b=e[c+1],(b&192)===128&&(y=(d&31)<<6|b&63,y<=127&&(y=null))):a===3?(b=e[c+1],w=e[c+2],(b&192)===128&&(w&192)===128&&(y=(d&15)<<12|(b&63)<<6|w&63,(y<=2047||y>=55296&&y<=57343)&&(y=null))):a===4&&(b=e[c+1],w=e[c+2],I=e[c+3],(b&192)===128&&(w&192)===128&&(I&192)===128&&(y=(d&15)<<18|(b&63)<<12|(w&63)<<6|I&63,(y<=65535||y>=1114112)&&(y=null))),y===null?(y=65533,a=1):y>65535&&(y-=65536,l+=String.fromCharCode(y>>>10&1023|55296),y=56320|y&1023),l+=String.fromCharCode(y),c+=a}return l}function RF(e,t,i){return GA.decode(e.subarray(t,i))}function jF(e,t,i){for(var l=0,c,d;l<t.length;l++){if(c=t.charCodeAt(l),c>55295&&c<57344)if(d)if(c<56320){e[i++]=239,e[i++]=191,e[i++]=189,d=c;continue}else c=d-55296<<10|c-56320|65536,d=null;else{c>56319||l+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):d=c;continue}else d&&(e[i++]=239,e[i++]=191,e[i++]=189,d=null);c<128?e[i++]=c:(c<2048?e[i++]=c>>6|192:(c<65536?e[i++]=c>>12|224:(e[i++]=c>>18|240,e[i++]=c>>12&63|128),e[i++]=c>>6&63|128),e[i++]=c&63|128)}return i}var lx={exports:{}},ZA=function(t,i){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(i,c)}},DF=ZA,sc=Object.prototype.toString;function ux(e){return sc.call(e)==="[object Array]"}function T_(e){return typeof e>"u"}function BF(e){return e!==null&&!T_(e)&&e.constructor!==null&&!T_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function NF(e){return sc.call(e)==="[object ArrayBuffer]"}function UF(e){return typeof FormData<"u"&&e instanceof FormData}function $F(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function VF(e){return typeof e=="string"}function GF(e){return typeof e=="number"}function WA(e){return e!==null&&typeof e=="object"}function lm(e){if(sc.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function ZF(e){return sc.call(e)==="[object Date]"}function WF(e){return sc.call(e)==="[object File]"}function HF(e){return sc.call(e)==="[object Blob]"}function HA(e){return sc.call(e)==="[object Function]"}function XF(e){return WA(e)&&HA(e.pipe)}function qF(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function KF(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function YF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function cx(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),ux(e))for(var i=0,l=e.length;i<l;i++)t.call(null,e[i],i,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function C_(){var e={};function t(c,d){lm(e[d])&&lm(c)?e[d]=C_(e[d],c):lm(c)?e[d]=C_({},c):ux(c)?e[d]=c.slice():e[d]=c}for(var i=0,l=arguments.length;i<l;i++)cx(arguments[i],t);return e}function JF(e,t,i){return cx(t,function(c,d){i&&typeof c=="function"?e[d]=DF(c,i):e[d]=c}),e}function QF(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Vo={isArray:ux,isArrayBuffer:NF,isBuffer:BF,isFormData:UF,isArrayBufferView:$F,isString:VF,isNumber:GF,isObject:WA,isPlainObject:lm,isUndefined:T_,isDate:ZF,isFile:WF,isBlob:HF,isFunction:HA,isStream:XF,isURLSearchParams:qF,isStandardBrowserEnv:YF,forEach:cx,merge:C_,extend:JF,trim:KF,stripBOM:QF},Uc=Vo;function pE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var XA=function(t,i,l){if(!i)return t;var c;if(l)c=l(i);else if(Uc.isURLSearchParams(i))c=i.toString();else{var d=[];Uc.forEach(i,function(b,w){b===null||typeof b>"u"||(Uc.isArray(b)?w=w+"[]":b=[b],Uc.forEach(b,function(C){Uc.isDate(C)?C=C.toISOString():Uc.isObject(C)&&(C=JSON.stringify(C)),d.push(pE(w)+"="+pE(C))}))}),c=d.join("&")}if(c){var y=t.indexOf("#");y!==-1&&(t=t.slice(0,y)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},eO=Vo;function Ng(){this.handlers=[]}Ng.prototype.use=function(t,i,l){return this.handlers.push({fulfilled:t,rejected:i,synchronous:l?l.synchronous:!1,runWhen:l?l.runWhen:null}),this.handlers.length-1};Ng.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Ng.prototype.forEach=function(t){eO.forEach(this.handlers,function(l){l!==null&&t(l)})};var tO=Ng,nO=Vo,rO=function(t,i){nO.forEach(t,function(c,d){d!==i&&d.toUpperCase()===i.toUpperCase()&&(t[i]=c,delete t[d])})},qA=function(t,i,l,c,d){return t.config=i,l&&(t.code=l),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},E0,mE;function KA(){if(mE)return E0;mE=1;var e=qA;return E0=function(i,l,c,d,y){var a=new Error(i);return e(a,l,c,d,y)},E0}var S0,gE;function iO(){if(gE)return S0;gE=1;var e=KA();return S0=function(i,l,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?i(c):l(e("Request failed with status code "+c.status,c.config,null,c.request,c))},S0}var T0,yE;function oO(){if(yE)return T0;yE=1;var e=Vo;return T0=e.isStandardBrowserEnv()?function(){return{write:function(l,c,d,y,a,b){var w=[];w.push(l+"="+encodeURIComponent(c)),e.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),e.isString(y)&&w.push("path="+y),e.isString(a)&&w.push("domain="+a),b===!0&&w.push("secure"),document.cookie=w.join("; ")},read:function(l){var c=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(l){this.write(l,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),T0}var C0,vE;function sO(){return vE||(vE=1,C0=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),C0}var A0,_E;function aO(){return _E||(_E=1,A0=function(t,i){return i?t.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):t}),A0}var I0,xE;function lO(){if(xE)return I0;xE=1;var e=sO(),t=aO();return I0=function(l,c){return l&&!e(c)?t(l,c):c},I0}var P0,wE;function uO(){if(wE)return P0;wE=1;var e=Vo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return P0=function(l){var c={},d,y,a;return l&&e.forEach(l.split(`
`),function(w){if(a=w.indexOf(":"),d=e.trim(w.substr(0,a)).toLowerCase(),y=e.trim(w.substr(a+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([y]):c[d]=c[d]?c[d]+", "+y:y}}),c},P0}var M0,bE;function cO(){if(bE)return M0;bE=1;var e=Vo;return M0=e.isStandardBrowserEnv()?function(){var i=/(msie|trident)/i.test(navigator.userAgent),l=document.createElement("a"),c;function d(y){var a=y;return i&&(l.setAttribute("href",a),a=l.href),l.setAttribute("href",a),{href:l.href,protocol:l.protocol?l.protocol.replace(/:$/,""):"",host:l.host,search:l.search?l.search.replace(/^\?/,""):"",hash:l.hash?l.hash.replace(/^#/,""):"",hostname:l.hostname,port:l.port,pathname:l.pathname.charAt(0)==="/"?l.pathname:"/"+l.pathname}}return c=d(window.location.href),function(a){var b=e.isString(a)?d(a):a;return b.protocol===c.protocol&&b.host===c.host}}():function(){return function(){return!0}}(),M0}var k0,EE;function SE(){if(EE)return k0;EE=1;var e=Vo,t=iO(),i=oO(),l=XA,c=lO(),d=uO(),y=cO(),a=KA();return k0=function(w){return new Promise(function(C,L){var j=w.data,ee=w.headers,Y=w.responseType;e.isFormData(j)&&delete ee["Content-Type"];var de=new XMLHttpRequest;if(w.auth){var G=w.auth.username||"",V=w.auth.password?unescape(encodeURIComponent(w.auth.password)):"";ee.Authorization="Basic "+btoa(G+":"+V)}var U=c(w.baseURL,w.url);de.open(w.method.toUpperCase(),l(U,w.params,w.paramsSerializer),!0),de.timeout=w.timeout;function ie(){if(de){var B="getAllResponseHeaders"in de?d(de.getAllResponseHeaders()):null,S=!Y||Y==="text"||Y==="json"?de.responseText:de.response,k={data:S,status:de.status,statusText:de.statusText,headers:B,config:w,request:de};t(C,L,k),de=null}}if("onloadend"in de?de.onloadend=ie:de.onreadystatechange=function(){!de||de.readyState!==4||de.status===0&&!(de.responseURL&&de.responseURL.indexOf("file:")===0)||setTimeout(ie)},de.onabort=function(){de&&(L(a("Request aborted",w,"ECONNABORTED",de)),de=null)},de.onerror=function(){L(a("Network Error",w,null,de)),de=null},de.ontimeout=function(){var S="timeout of "+w.timeout+"ms exceeded";w.timeoutErrorMessage&&(S=w.timeoutErrorMessage),L(a(S,w,w.transitional&&w.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",de)),de=null},e.isStandardBrowserEnv()){var Z=(w.withCredentials||y(U))&&w.xsrfCookieName?i.read(w.xsrfCookieName):void 0;Z&&(ee[w.xsrfHeaderName]=Z)}"setRequestHeader"in de&&e.forEach(ee,function(S,k){typeof j>"u"&&k.toLowerCase()==="content-type"?delete ee[k]:de.setRequestHeader(k,S)}),e.isUndefined(w.withCredentials)||(de.withCredentials=!!w.withCredentials),Y&&Y!=="json"&&(de.responseType=w.responseType),typeof w.onDownloadProgress=="function"&&de.addEventListener("progress",w.onDownloadProgress),typeof w.onUploadProgress=="function"&&de.upload&&de.upload.addEventListener("progress",w.onUploadProgress),w.cancelToken&&w.cancelToken.promise.then(function(S){de&&(de.abort(),L(S),de=null)}),j||(j=null),de.send(j)})},k0}var Ei=Vo,TE=rO,hO=qA,fO={"Content-Type":"application/x-www-form-urlencoded"};function CE(e,t){!Ei.isUndefined(e)&&Ei.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function dO(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=SE()),e}function pO(e,t,i){if(Ei.isString(e))try{return(t||JSON.parse)(e),Ei.trim(e)}catch(l){if(l.name!=="SyntaxError")throw l}return(i||JSON.stringify)(e)}var Ug={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:dO(),transformRequest:[function(t,i){return TE(i,"Accept"),TE(i,"Content-Type"),Ei.isFormData(t)||Ei.isArrayBuffer(t)||Ei.isBuffer(t)||Ei.isStream(t)||Ei.isFile(t)||Ei.isBlob(t)?t:Ei.isArrayBufferView(t)?t.buffer:Ei.isURLSearchParams(t)?(CE(i,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ei.isObject(t)||i&&i["Content-Type"]==="application/json"?(CE(i,"application/json"),pO(t)):t}],transformResponse:[function(t){var i=this.transitional,l=i&&i.silentJSONParsing,c=i&&i.forcedJSONParsing,d=!l&&this.responseType==="json";if(d||c&&Ei.isString(t)&&t.length)try{return JSON.parse(t)}catch(y){if(d)throw y.name==="SyntaxError"?hO(y,this,"E_JSON_PARSE"):y}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};Ug.headers={common:{Accept:"application/json, text/plain, */*"}};Ei.forEach(["delete","get","head"],function(t){Ug.headers[t]={}});Ei.forEach(["post","put","patch"],function(t){Ug.headers[t]=Ei.merge(fO)});var hx=Ug,mO=Vo,gO=hx,yO=function(t,i,l){var c=this||gO;return mO.forEach(l,function(y){t=y.call(c,t,i)}),t},L0,AE;function YA(){return AE||(AE=1,L0=function(t){return!!(t&&t.__CANCEL__)}),L0}var IE=Vo,z0=yO,vO=YA(),_O=hx;function F0(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var xO=function(t){F0(t),t.headers=t.headers||{},t.data=z0.call(t,t.data,t.headers,t.transformRequest),t.headers=IE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),IE.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var i=t.adapter||_O.adapter;return i(t).then(function(c){return F0(t),c.data=z0.call(t,c.data,c.headers,t.transformResponse),c},function(c){return vO(c)||(F0(t),c&&c.response&&(c.response.data=z0.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Ni=Vo,JA=function(t,i){i=i||{};var l={},c=["url","method","data"],d=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function b(L,j){return Ni.isPlainObject(L)&&Ni.isPlainObject(j)?Ni.merge(L,j):Ni.isPlainObject(j)?Ni.merge({},j):Ni.isArray(j)?j.slice():j}function w(L){Ni.isUndefined(i[L])?Ni.isUndefined(t[L])||(l[L]=b(void 0,t[L])):l[L]=b(t[L],i[L])}Ni.forEach(c,function(j){Ni.isUndefined(i[j])||(l[j]=b(void 0,i[j]))}),Ni.forEach(d,w),Ni.forEach(y,function(j){Ni.isUndefined(i[j])?Ni.isUndefined(t[j])||(l[j]=b(void 0,t[j])):l[j]=b(void 0,i[j])}),Ni.forEach(a,function(j){j in i?l[j]=b(t[j],i[j]):j in t&&(l[j]=b(void 0,t[j]))});var I=c.concat(d).concat(y).concat(a),C=Object.keys(t).concat(Object.keys(i)).filter(function(j){return I.indexOf(j)===-1});return Ni.forEach(C,w),l};const wO="axios",bO="0.21.4",EO="Promise based HTTP client for the browser and node.js",SO="index.js",TO={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},CO={type:"git",url:"https://github.com/axios/axios.git"},AO=["xhr","http","ajax","promise","node"],IO="Matt Zabriskie",PO="MIT",MO={url:"https://github.com/axios/axios/issues"},kO="https://axios-http.com",LO={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},zO={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},FO="dist/axios.min.js",OO="dist/axios.min.js",RO="./index.d.ts",jO={"follow-redirects":"^1.14.0"},DO=[{path:"./dist/axios.min.js",threshold:"5kB"}],BO={name:wO,version:bO,description:EO,main:SO,scripts:TO,repository:CO,keywords:AO,author:IO,license:PO,bugs:MO,homepage:kO,devDependencies:LO,browser:zO,jsdelivr:FO,unpkg:OO,typings:RO,dependencies:jO,bundlesize:DO};var QA=BO,fx={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){fx[e]=function(l){return typeof l===e||"a"+(t<1?"n ":" ")+e}});var PE={},NO=QA.version.split(".");function eI(e,t){for(var i=t?t.split("."):NO,l=e.split("."),c=0;c<3;c++){if(i[c]>l[c])return!0;if(i[c]<l[c])return!1}return!1}fx.transitional=function(t,i,l){var c=i&&eI(i);function d(y,a){return"[Axios v"+QA.version+"] Transitional option '"+y+"'"+a+(l?". "+l:"")}return function(y,a,b){if(t===!1)throw new Error(d(a," has been removed in "+i));return c&&!PE[a]&&(PE[a]=!0,console.warn(d(a," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(y,a,b):!0}};function UO(e,t,i){if(typeof e!="object")throw new TypeError("options must be an object");for(var l=Object.keys(e),c=l.length;c-- >0;){var d=l[c],y=t[d];if(y){var a=e[d],b=a===void 0||y(a,d,e);if(b!==!0)throw new TypeError("option "+d+" must be "+b);continue}if(i!==!0)throw Error("Unknown option "+d)}}var $O={isOlderVersion:eI,assertOptions:UO,validators:fx},tI=Vo,VO=XA,ME=tO,kE=xO,$g=JA,nI=$O,$c=nI.validators;function Bd(e){this.defaults=e,this.interceptors={request:new ME,response:new ME}}Bd.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=$g(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&nI.assertOptions(i,{silentJSONParsing:$c.transitional($c.boolean,"1.0.0"),forcedJSONParsing:$c.transitional($c.boolean,"1.0.0"),clarifyTimeoutError:$c.transitional($c.boolean,"1.0.0")},!1);var l=[],c=!0;this.interceptors.request.forEach(function(L){typeof L.runWhen=="function"&&L.runWhen(t)===!1||(c=c&&L.synchronous,l.unshift(L.fulfilled,L.rejected))});var d=[];this.interceptors.response.forEach(function(L){d.push(L.fulfilled,L.rejected)});var y;if(!c){var a=[kE,void 0];for(Array.prototype.unshift.apply(a,l),a=a.concat(d),y=Promise.resolve(t);a.length;)y=y.then(a.shift(),a.shift());return y}for(var b=t;l.length;){var w=l.shift(),I=l.shift();try{b=w(b)}catch(C){I(C);break}}try{y=kE(b)}catch(C){return Promise.reject(C)}for(;d.length;)y=y.then(d.shift(),d.shift());return y};Bd.prototype.getUri=function(t){return t=$g(this.defaults,t),VO(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};tI.forEach(["delete","get","head","options"],function(t){Bd.prototype[t]=function(i,l){return this.request($g(l||{},{method:t,url:i,data:(l||{}).data}))}});tI.forEach(["post","put","patch"],function(t){Bd.prototype[t]=function(i,l,c){return this.request($g(c||{},{method:t,url:i,data:l}))}});var GO=Bd,O0,LE;function rI(){if(LE)return O0;LE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,O0=e,O0}var R0,zE;function ZO(){if(zE)return R0;zE=1;var e=rI();function t(i){if(typeof i!="function")throw new TypeError("executor must be a function.");var l;this.promise=new Promise(function(y){l=y});var c=this;i(function(y){c.reason||(c.reason=new e(y),l(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var l,c=new t(function(y){l=y});return{token:c,cancel:l}},R0=t,R0}var j0,FE;function WO(){return FE||(FE=1,j0=function(t){return function(l){return t.apply(null,l)}}),j0}var D0,OE;function HO(){return OE||(OE=1,D0=function(t){return typeof t=="object"&&t.isAxiosError===!0}),D0}var RE=Vo,XO=ZA,um=GO,qO=JA,KO=hx;function iI(e){var t=new um(e),i=XO(um.prototype.request,t);return RE.extend(i,um.prototype,t),RE.extend(i,t),i}var Rs=iI(KO);Rs.Axios=um;Rs.create=function(t){return iI(qO(Rs.defaults,t))};Rs.Cancel=rI();Rs.CancelToken=ZO();Rs.isCancel=YA();Rs.all=function(t){return Promise.all(t)};Rs.spread=WO();Rs.isAxiosError=HO();lx.exports=Rs;lx.exports.default=Rs;var YO=lx.exports,JO=YO;const QO={},eR=Object.freeze(Object.defineProperty({__proto__:null,default:QO},Symbol.toStringTag,{value:"Module"})),tR=A_(eR);var Vg={},nR=mh;function mh(e,t){this.x=e,this.y=t}mh.prototype={clone:function(){return new mh(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),l=t*this.x-i*this.y,c=i*this.x+t*this.y;return this.x=l,this.y=c,this},_rotateAround:function(e,t){var i=Math.cos(e),l=Math.sin(e),c=t.x+i*(this.x-t.x)-l*(this.y-t.y),d=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=c,this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};mh.convert=function(e){return e instanceof mh?e:Array.isArray(e)?new mh(e[0],e[1]):e};var rR=nR,oI=Ah;function Ah(e,t,i,l,c){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=l,this._values=c,e.readFields(iR,this,t)}function iR(e,t,i){e==1?t.id=i.readVarint():e==2?oR(i,t):e==3?t.type=i.readVarint():e==4&&(t._geometry=i.pos)}function oR(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var l=t._keys[e.readVarint()],c=t._values[e.readVarint()];t.properties[l]=c}}Ah.types=["Unknown","Point","LineString","Polygon"];Ah.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,c=0,d=0,y=[],a;e.pos<t;){if(l<=0){var b=e.readVarint();i=b&7,l=b>>3}if(l--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),i===1&&(a&&y.push(a),a=[]),a.push(new rR(c,d));else if(i===7)a&&a.push(a[0].clone());else throw new Error("unknown command "+i)}return a&&y.push(a),y};Ah.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,l=0,c=0,d=0,y=1/0,a=-1/0,b=1/0,w=-1/0;e.pos<t;){if(l<=0){var I=e.readVarint();i=I&7,l=I>>3}if(l--,i===1||i===2)c+=e.readSVarint(),d+=e.readSVarint(),c<y&&(y=c),c>a&&(a=c),d<b&&(b=d),d>w&&(w=d);else if(i!==7)throw new Error("unknown command "+i)}return[y,b,a,w]};Ah.prototype.toGeoJSON=function(e,t,i){var l=this.extent*Math.pow(2,i),c=this.extent*e,d=this.extent*t,y=this.loadGeometry(),a=Ah.types[this.type],b,w;function I(j){for(var ee=0;ee<j.length;ee++){var Y=j[ee],de=180-(Y.y+d)*360/l;j[ee]=[(Y.x+c)*360/l-180,360/Math.PI*Math.atan(Math.exp(de*Math.PI/180))-90]}}switch(this.type){case 1:var C=[];for(b=0;b<y.length;b++)C[b]=y[b][0];y=C,I(y);break;case 2:for(b=0;b<y.length;b++)I(y[b]);break;case 3:for(y=sR(y),b=0;b<y.length;b++)for(w=0;w<y[b].length;w++)I(y[b][w]);break}y.length===1?y=y[0]:a="Multi"+a;var L={type:"Feature",geometry:{type:a,coordinates:y},properties:this.properties};return"id"in this&&(L.id=this.id),L};function sR(e){var t=e.length;if(t<=1)return[e];for(var i=[],l,c,d=0;d<t;d++){var y=aR(e[d]);y!==0&&(c===void 0&&(c=y<0),c===y<0?(l&&i.push(l),l=[e[d]]):l.push(e[d]))}return l&&i.push(l),i}function aR(e){for(var t=0,i=0,l=e.length,c=l-1,d,y;i<l;c=i++)d=e[i],y=e[c],t+=(y.x-d.x)*(d.y+y.y);return t}var lR=oI,sI=aI;function aI(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(uR,this,t),this.length=this._features.length}function uR(e,t,i){e===15?t.version=i.readVarint():e===1?t.name=i.readString():e===5?t.extent=i.readVarint():e===2?t._features.push(i.pos):e===3?t._keys.push(i.readString()):e===4&&t._values.push(cR(i))}function cR(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var l=e.readVarint()>>3;t=l===1?e.readString():l===2?e.readFloat():l===3?e.readDouble():l===4?e.readVarint64():l===5?e.readVarint():l===6?e.readSVarint():l===7?e.readBoolean():null}return t}aI.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new lR(this._pbf,t,this.extent,this._keys,this._values)};var hR=sI,fR=dR;function dR(e,t){this.layers=e.readFields(pR,{},t)}function pR(e,t,i){if(e===3){var l=new hR(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}Vg.VectorTile=fR;Vg.VectorTileFeature=oI;Vg.VectorTileLayer=sI;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=rF,i=_F,l=xF,c=JO,d=tR,y=Vg;function a(V){return V&&typeof V=="object"&&"default"in V?V:{default:V}}var b=a(l),w=a(c),I=a(d),C=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Dl<"u"?Dl:typeof self<"u"?self:{};function L(V){var U={exports:{}};return V(U,U.exports),U.exports}var j=L(function(V,U){(function(Z,B){V.exports=B(w.default)})(C,function(ie){return function(Z){var B={};function S(k){if(B[k])return B[k].exports;var W=B[k]={i:k,l:!1,exports:{}};return Z[k].call(W.exports,W,W.exports,S),W.l=!0,W.exports}return S.m=Z,S.c=B,S.d=function(k,W,q){S.o(k,W)||Object.defineProperty(k,W,{enumerable:!0,get:q})},S.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},S.t=function(k,W){if(W&1&&(k=S(k)),W&8||W&4&&typeof k=="object"&&k&&k.__esModule)return k;var q=Object.create(null);if(S.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:k}),W&2&&typeof k!="string")for(var Q in k)S.d(q,Q,(function(ye){return k[ye]}).bind(null,Q));return q},S.n=function(k){var W=k&&k.__esModule?function(){return k.default}:function(){return k};return S.d(W,"a",W),W},S.o=function(k,W){return Object.prototype.hasOwnProperty.call(k,W)},S.p="",S(S.s="./src/index.node.js")}({"./node_modules/cache-control-esm/index.js":function(Z,B,S){S.r(B),S.d(B,"CacheControl",function(){return we}),S.d(B,"parse",function(){return Ue}),S.d(B,"format",function(){return Pe}),S("./node_modules/core-js/modules/es6.array.from.js"),S("./node_modules/core-js/modules/es6.function.name.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/web.dom.iterable.js"),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.regexp.split.js"),S("./node_modules/core-js/modules/es6.number.is-finite.js");function k(ze,He){return _e(ze)||ye(ze,He)||q(ze,He)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(ze,He){if(ze){if(typeof ze=="string")return Q(ze,He);var Ze=Object.prototype.toString.call(ze).slice(8,-1);if(Ze==="Object"&&ze.constructor&&(Ze=ze.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(ze);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return Q(ze,He)}}function Q(ze,He){(He==null||He>ze.length)&&(He=ze.length);for(var Ze=0,rt=new Array(He);Ze<He;Ze++)rt[Ze]=ze[Ze];return rt}function ye(ze,He){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ze)))){var Ze=[],rt=!0,ut=!1,gt=void 0;try{for(var Ct=ze[Symbol.iterator](),ht;!(rt=(ht=Ct.next()).done)&&(Ze.push(ht.value),!(He&&Ze.length===He));rt=!0);}catch(Et){ut=!0,gt=Et}finally{try{!rt&&Ct.return!=null&&Ct.return()}finally{if(ut)throw gt}}return Ze}}function _e(ze){if(Array.isArray(ze))return ze}function xe(ze,He){if(!(ze instanceof He))throw new TypeError("Cannot call a class as a function")}function te(ze,He){for(var Ze=0;Ze<He.length;Ze++){var rt=He[Ze];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(ze,rt.key,rt)}}function ue(ze,He,Ze){return He&&te(ze.prototype,He),Ze&&te(ze,Ze),ze}var ne=/([a-zA-Z][a-zA-Z_-]*)\s*(?:=(?:"([^"]*)"|([^ \t",;]*)))?/g,re={maxAge:"max-age",sharedMaxAge:"s-maxage",maxStale:"max-stale",minFresh:"min-fresh",immutable:"immutable",mustRevalidate:"must-revalidate",noCache:"no-cache",noStore:"no-store",noTransform:"no-transform",onlyIfCached:"only-if-cached",private:"private",proxyRevalidate:"proxy-revalidate",public:"public"};function me(ze){return ze===null}function Se(ze){if(!ze)return null;var He=parseInt(ze,10);return!Number.isFinite(He)||He<0?null:He}var we=function(){function ze(){xe(this,ze),this.maxAge=null,this.sharedMaxAge=null,this.maxStale=null,this.maxStaleDuration=null,this.minFresh=null,this.immutable=null,this.mustRevalidate=null,this.noCache=null,this.noStore=null,this.noTransform=null,this.onlyIfCached=null,this.private=null,this.proxyRevalidate=null,this.public=null}return ue(ze,[{key:"parse",value:function(Ze){if(!Ze||Ze.length===0)return this;var rt={},ut=Ze.match(ne)||[];return Array.prototype.forEach.call(ut,function(gt){var Ct=gt.split("=",2),ht=k(Ct,1),Et=ht[0],$t=null;Ct.length>1&&($t=Ct[1].trim()),rt[Et.toLowerCase()]=$t}),this.maxAge=Se(rt[re.maxAge]),this.sharedMaxAge=Se(rt[re.sharedMaxAge]),this.maxStale=me(rt[re.maxStale]),this.maxStaleDuration=Se(rt[re.maxStale]),this.maxStaleDuration&&(this.maxStale=!0),this.minFresh=Se(rt[re.minFresh]),this.immutable=me(rt[re.immutable]),this.mustRevalidate=me(rt[re.mustRevalidate]),this.noCache=me(rt[re.noCache]),this.noStore=me(rt[re.noStore]),this.noTransform=me(rt[re.noTransform]),this.onlyIfCached=me(rt[re.onlyIfCached]),this.private=me(rt[re.private]),this.proxyRevalidate=me(rt[re.proxyRevalidate]),this.public=me(rt[re.public]),this}},{key:"format",value:function(){var Ze=[];return this.maxAge&&Ze.push("".concat(re.maxAge,"=").concat(this.maxAge)),this.sharedMaxAge&&Ze.push("".concat(re.sharedMaxAge,"=").concat(this.sharedMaxAge)),this.maxStale&&(this.maxStaleDuration?Ze.push("".concat(re.maxStale,"=").concat(this.maxStaleDuration)):Ze.push(re.maxStale)),this.minFresh&&Ze.push("".concat(re.minFresh,"=").concat(this.minFresh)),this.immutable&&Ze.push(re.immutable),this.mustRevalidate&&Ze.push(re.mustRevalidate),this.noCache&&Ze.push(re.noCache),this.noStore&&Ze.push(re.noStore),this.noTransform&&Ze.push(re.noTransform),this.onlyIfCached&&Ze.push(re.onlyIfCached),this.private&&Ze.push(re.private),this.proxyRevalidate&&Ze.push(re.proxyRevalidate),this.public&&Ze.push(re.public),Ze.join(", ")}}]),ze}();function Ue(ze){var He=new we;return He.parse(ze)}function Pe(ze){return ze instanceof we?ze.format():we.prototype.format.call(ze)}B.default={CacheControl:we,parse:Ue,format:Pe}},"./node_modules/charenc/charenc.js":function(Z,B){var S={utf8:{stringToBytes:function(k){return S.bin.stringToBytes(unescape(encodeURIComponent(k)))},bytesToString:function(k){return decodeURIComponent(escape(S.bin.bytesToString(k)))}},bin:{stringToBytes:function(k){for(var W=[],q=0;q<k.length;q++)W.push(k.charCodeAt(q)&255);return W},bytesToString:function(k){for(var W=[],q=0;q<k.length;q++)W.push(String.fromCharCode(k[q]));return W.join("")}}};Z.exports=S},"./node_modules/core-js/modules/_a-function.js":function(Z,B){Z.exports=function(S){if(typeof S!="function")throw TypeError(S+" is not a function!");return S}},"./node_modules/core-js/modules/_add-to-unscopables.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_wks.js")("unscopables"),W=Array.prototype;W[k]==null&&S("./node_modules/core-js/modules/_hide.js")(W,k,{}),Z.exports=function(q){W[k][q]=!0}},"./node_modules/core-js/modules/_advance-string-index.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_string-at.js")(!0);Z.exports=function(W,q,Q){return q+(Q?k(W,q).length:1)}},"./node_modules/core-js/modules/_an-object.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_is-object.js");Z.exports=function(W){if(!k(W))throw TypeError(W+" is not an object!");return W}},"./node_modules/core-js/modules/_array-includes.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_to-iobject.js"),W=S("./node_modules/core-js/modules/_to-length.js"),q=S("./node_modules/core-js/modules/_to-absolute-index.js");Z.exports=function(Q){return function(ye,_e,xe){var te=k(ye),ue=W(te.length),ne=q(xe,ue),re;if(Q&&_e!=_e){for(;ue>ne;)if(re=te[ne++],re!=re)return!0}else for(;ue>ne;ne++)if((Q||ne in te)&&te[ne]===_e)return Q||ne||0;return!Q&&-1}}},"./node_modules/core-js/modules/_bind.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_a-function.js"),W=S("./node_modules/core-js/modules/_is-object.js"),q=S("./node_modules/core-js/modules/_invoke.js"),Q=[].slice,ye={},_e=function(xe,te,ue){if(!(te in ye)){for(var ne=[],re=0;re<te;re++)ne[re]="a["+re+"]";ye[te]=Function("F,a","return new F("+ne.join(",")+")")}return ye[te](xe,ue)};Z.exports=Function.bind||function(te){var ue=k(this),ne=Q.call(arguments,1),re=function(){var me=ne.concat(Q.call(arguments));return this instanceof re?_e(ue,me.length,me):q(ue,me,te)};return W(ue.prototype)&&(re.prototype=ue.prototype),re}},"./node_modules/core-js/modules/_classof.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_cof.js"),W=S("./node_modules/core-js/modules/_wks.js")("toStringTag"),q=k(function(){return arguments}())=="Arguments",Q=function(ye,_e){try{return ye[_e]}catch{}};Z.exports=function(ye){var _e,xe,te;return ye===void 0?"Undefined":ye===null?"Null":typeof(xe=Q(_e=Object(ye),W))=="string"?xe:q?k(_e):(te=k(_e))=="Object"&&typeof _e.callee=="function"?"Arguments":te}},"./node_modules/core-js/modules/_cof.js":function(Z,B){var S={}.toString;Z.exports=function(k){return S.call(k).slice(8,-1)}},"./node_modules/core-js/modules/_core.js":function(Z,B){var S=Z.exports={version:"2.6.12"};typeof __e=="number"&&(__e=S)},"./node_modules/core-js/modules/_create-property.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-dp.js"),W=S("./node_modules/core-js/modules/_property-desc.js");Z.exports=function(q,Q,ye){Q in q?k.f(q,Q,W(0,ye)):q[Q]=ye}},"./node_modules/core-js/modules/_ctx.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_a-function.js");Z.exports=function(W,q,Q){if(k(W),q===void 0)return W;switch(Q){case 1:return function(ye){return W.call(q,ye)};case 2:return function(ye,_e){return W.call(q,ye,_e)};case 3:return function(ye,_e,xe){return W.call(q,ye,_e,xe)}}return function(){return W.apply(q,arguments)}}},"./node_modules/core-js/modules/_defined.js":function(Z,B){Z.exports=function(S){if(S==null)throw TypeError("Can't call method on  "+S);return S}},"./node_modules/core-js/modules/_descriptors.js":function(Z,B,S){Z.exports=!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_dom-create.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_is-object.js"),W=S("./node_modules/core-js/modules/_global.js").document,q=k(W)&&k(W.createElement);Z.exports=function(Q){return q?W.createElement(Q):{}}},"./node_modules/core-js/modules/_enum-bug-keys.js":function(Z,B){Z.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/modules/_enum-keys.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-keys.js"),W=S("./node_modules/core-js/modules/_object-gops.js"),q=S("./node_modules/core-js/modules/_object-pie.js");Z.exports=function(Q){var ye=k(Q),_e=W.f;if(_e)for(var xe=_e(Q),te=q.f,ue=0,ne;xe.length>ue;)te.call(Q,ne=xe[ue++])&&ye.push(ne);return ye}},"./node_modules/core-js/modules/_export.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_global.js"),W=S("./node_modules/core-js/modules/_core.js"),q=S("./node_modules/core-js/modules/_hide.js"),Q=S("./node_modules/core-js/modules/_redefine.js"),ye=S("./node_modules/core-js/modules/_ctx.js"),_e="prototype",xe=function(te,ue,ne){var re=te&xe.F,me=te&xe.G,Se=te&xe.S,we=te&xe.P,Ue=te&xe.B,Pe=me?k:Se?k[ue]||(k[ue]={}):(k[ue]||{})[_e],ze=me?W:W[ue]||(W[ue]={}),He=ze[_e]||(ze[_e]={}),Ze,rt,ut,gt;me&&(ne=ue);for(Ze in ne)rt=!re&&Pe&&Pe[Ze]!==void 0,ut=(rt?Pe:ne)[Ze],gt=Ue&&rt?ye(ut,k):we&&typeof ut=="function"?ye(Function.call,ut):ut,Pe&&Q(Pe,Ze,ut,te&xe.U),ze[Ze]!=ut&&q(ze,Ze,gt),we&&He[Ze]!=ut&&(He[Ze]=ut)};k.core=W,xe.F=1,xe.G=2,xe.S=4,xe.P=8,xe.B=16,xe.W=32,xe.U=64,xe.R=128,Z.exports=xe},"./node_modules/core-js/modules/_fails-is-regexp.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_wks.js")("match");Z.exports=function(W){var q=/./;try{"/./"[W](q)}catch{try{return q[k]=!1,!"/./"[W](q)}catch{}}return!0}},"./node_modules/core-js/modules/_fails.js":function(Z,B){Z.exports=function(S){try{return!!S()}catch{return!0}}},"./node_modules/core-js/modules/_fix-re-wks.js":function(Z,B,S){S("./node_modules/core-js/modules/es6.regexp.exec.js");var k=S("./node_modules/core-js/modules/_redefine.js"),W=S("./node_modules/core-js/modules/_hide.js"),q=S("./node_modules/core-js/modules/_fails.js"),Q=S("./node_modules/core-js/modules/_defined.js"),ye=S("./node_modules/core-js/modules/_wks.js"),_e=S("./node_modules/core-js/modules/_regexp-exec.js"),xe=ye("species"),te=!q(function(){var ne=/./;return ne.exec=function(){var re=[];return re.groups={a:"7"},re},"".replace(ne,"$<a>")!=="7"}),ue=function(){var ne=/(?:)/,re=ne.exec;ne.exec=function(){return re.apply(this,arguments)};var me="ab".split(ne);return me.length===2&&me[0]==="a"&&me[1]==="b"}();Z.exports=function(ne,re,me){var Se=ye(ne),we=!q(function(){var rt={};return rt[Se]=function(){return 7},""[ne](rt)!=7}),Ue=we?!q(function(){var rt=!1,ut=/a/;return ut.exec=function(){return rt=!0,null},ne==="split"&&(ut.constructor={},ut.constructor[xe]=function(){return ut}),ut[Se](""),!rt}):void 0;if(!we||!Ue||ne==="replace"&&!te||ne==="split"&&!ue){var Pe=/./[Se],ze=me(Q,Se,""[ne],function(ut,gt,Ct,ht,Et){return gt.exec===_e?we&&!Et?{done:!0,value:Pe.call(gt,Ct,ht)}:{done:!0,value:ut.call(Ct,gt,ht)}:{done:!1}}),He=ze[0],Ze=ze[1];k(String.prototype,ne,He),W(RegExp.prototype,Se,re==2?function(rt,ut){return Ze.call(rt,this,ut)}:function(rt){return Ze.call(rt,this)})}}},"./node_modules/core-js/modules/_flags.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_an-object.js");Z.exports=function(){var W=k(this),q="";return W.global&&(q+="g"),W.ignoreCase&&(q+="i"),W.multiline&&(q+="m"),W.unicode&&(q+="u"),W.sticky&&(q+="y"),q}},"./node_modules/core-js/modules/_function-to-string.js":function(Z,B,S){Z.exports=S("./node_modules/core-js/modules/_shared.js")("native-function-to-string",Function.toString)},"./node_modules/core-js/modules/_global.js":function(Z,B){var S=Z.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=S)},"./node_modules/core-js/modules/_has.js":function(Z,B){var S={}.hasOwnProperty;Z.exports=function(k,W){return S.call(k,W)}},"./node_modules/core-js/modules/_hide.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-dp.js"),W=S("./node_modules/core-js/modules/_property-desc.js");Z.exports=S("./node_modules/core-js/modules/_descriptors.js")?function(q,Q,ye){return k.f(q,Q,W(1,ye))}:function(q,Q,ye){return q[Q]=ye,q}},"./node_modules/core-js/modules/_html.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_global.js").document;Z.exports=k&&k.documentElement},"./node_modules/core-js/modules/_ie8-dom-define.js":function(Z,B,S){Z.exports=!S("./node_modules/core-js/modules/_descriptors.js")&&!S("./node_modules/core-js/modules/_fails.js")(function(){return Object.defineProperty(S("./node_modules/core-js/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/modules/_invoke.js":function(Z,B){Z.exports=function(S,k,W){var q=W===void 0;switch(k.length){case 0:return q?S():S.call(W);case 1:return q?S(k[0]):S.call(W,k[0]);case 2:return q?S(k[0],k[1]):S.call(W,k[0],k[1]);case 3:return q?S(k[0],k[1],k[2]):S.call(W,k[0],k[1],k[2]);case 4:return q?S(k[0],k[1],k[2],k[3]):S.call(W,k[0],k[1],k[2],k[3])}return S.apply(W,k)}},"./node_modules/core-js/modules/_iobject.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_cof.js");Z.exports=Object("z").propertyIsEnumerable(0)?Object:function(W){return k(W)=="String"?W.split(""):Object(W)}},"./node_modules/core-js/modules/_is-array-iter.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_iterators.js"),W=S("./node_modules/core-js/modules/_wks.js")("iterator"),q=Array.prototype;Z.exports=function(Q){return Q!==void 0&&(k.Array===Q||q[W]===Q)}},"./node_modules/core-js/modules/_is-array.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_cof.js");Z.exports=Array.isArray||function(q){return k(q)=="Array"}},"./node_modules/core-js/modules/_is-object.js":function(Z,B){Z.exports=function(S){return typeof S=="object"?S!==null:typeof S=="function"}},"./node_modules/core-js/modules/_is-regexp.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_is-object.js"),W=S("./node_modules/core-js/modules/_cof.js"),q=S("./node_modules/core-js/modules/_wks.js")("match");Z.exports=function(Q){var ye;return k(Q)&&((ye=Q[q])!==void 0?!!ye:W(Q)=="RegExp")}},"./node_modules/core-js/modules/_iter-call.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_an-object.js");Z.exports=function(W,q,Q,ye){try{return ye?q(k(Q)[0],Q[1]):q(Q)}catch(xe){var _e=W.return;throw _e!==void 0&&k(_e.call(W)),xe}}},"./node_modules/core-js/modules/_iter-create.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-create.js"),W=S("./node_modules/core-js/modules/_property-desc.js"),q=S("./node_modules/core-js/modules/_set-to-string-tag.js"),Q={};S("./node_modules/core-js/modules/_hide.js")(Q,S("./node_modules/core-js/modules/_wks.js")("iterator"),function(){return this}),Z.exports=function(ye,_e,xe){ye.prototype=k(Q,{next:W(1,xe)}),q(ye,_e+" Iterator")}},"./node_modules/core-js/modules/_iter-define.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_library.js"),W=S("./node_modules/core-js/modules/_export.js"),q=S("./node_modules/core-js/modules/_redefine.js"),Q=S("./node_modules/core-js/modules/_hide.js"),ye=S("./node_modules/core-js/modules/_iterators.js"),_e=S("./node_modules/core-js/modules/_iter-create.js"),xe=S("./node_modules/core-js/modules/_set-to-string-tag.js"),te=S("./node_modules/core-js/modules/_object-gpo.js"),ue=S("./node_modules/core-js/modules/_wks.js")("iterator"),ne=!([].keys&&"next"in[].keys()),re="@@iterator",me="keys",Se="values",we=function(){return this};Z.exports=function(Ue,Pe,ze,He,Ze,rt,ut){_e(ze,Pe,He);var gt=function(M){if(!ne&&M in $t)return $t[M];switch(M){case me:return function(){return new ze(this,M)};case Se:return function(){return new ze(this,M)}}return function(){return new ze(this,M)}},Ct=Pe+" Iterator",ht=Ze==Se,Et=!1,$t=Ue.prototype,Nt=$t[ue]||$t[re]||Ze&&$t[Ze],hn=Nt||gt(Ze),Tn=Ze?ht?gt("entries"):hn:void 0,En=Pe=="Array"&&$t.entries||Nt,rn,xn,Te;if(En&&(Te=te(En.call(new Ue)),Te!==Object.prototype&&Te.next&&(xe(Te,Ct,!0),!k&&typeof Te[ue]!="function"&&Q(Te,ue,we))),ht&&Nt&&Nt.name!==Se&&(Et=!0,hn=function(){return Nt.call(this)}),(!k||ut)&&(ne||Et||!$t[ue])&&Q($t,ue,hn),ye[Pe]=hn,ye[Ct]=we,Ze)if(rn={values:ht?hn:gt(Se),keys:rt?hn:gt(me),entries:Tn},ut)for(xn in rn)xn in $t||q($t,xn,rn[xn]);else W(W.P+W.F*(ne||Et),Pe,rn);return rn}},"./node_modules/core-js/modules/_iter-detect.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_wks.js")("iterator"),W=!1;try{var q=[7][k]();q.return=function(){W=!0},Array.from(q,function(){throw 2})}catch{}Z.exports=function(Q,ye){if(!ye&&!W)return!1;var _e=!1;try{var xe=[7],te=xe[k]();te.next=function(){return{done:_e=!0}},xe[k]=function(){return te},Q(xe)}catch{}return _e}},"./node_modules/core-js/modules/_iter-step.js":function(Z,B){Z.exports=function(S,k){return{value:k,done:!!S}}},"./node_modules/core-js/modules/_iterators.js":function(Z,B){Z.exports={}},"./node_modules/core-js/modules/_library.js":function(Z,B){Z.exports=!1},"./node_modules/core-js/modules/_meta.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_uid.js")("meta"),W=S("./node_modules/core-js/modules/_is-object.js"),q=S("./node_modules/core-js/modules/_has.js"),Q=S("./node_modules/core-js/modules/_object-dp.js").f,ye=0,_e=Object.isExtensible||function(){return!0},xe=!S("./node_modules/core-js/modules/_fails.js")(function(){return _e(Object.preventExtensions({}))}),te=function(Se){Q(Se,k,{value:{i:"O"+ ++ye,w:{}}})},ue=function(Se,we){if(!W(Se))return typeof Se=="symbol"?Se:(typeof Se=="string"?"S":"P")+Se;if(!q(Se,k)){if(!_e(Se))return"F";if(!we)return"E";te(Se)}return Se[k].i},ne=function(Se,we){if(!q(Se,k)){if(!_e(Se))return!0;if(!we)return!1;te(Se)}return Se[k].w},re=function(Se){return xe&&me.NEED&&_e(Se)&&!q(Se,k)&&te(Se),Se},me=Z.exports={KEY:k,NEED:!1,fastKey:ue,getWeak:ne,onFreeze:re}},"./node_modules/core-js/modules/_object-create.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_an-object.js"),W=S("./node_modules/core-js/modules/_object-dps.js"),q=S("./node_modules/core-js/modules/_enum-bug-keys.js"),Q=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),ye=function(){},_e="prototype",xe=function(){var te=S("./node_modules/core-js/modules/_dom-create.js")("iframe"),ue=q.length,ne="<",re=">",me;for(te.style.display="none",S("./node_modules/core-js/modules/_html.js").appendChild(te),te.src="javascript:",me=te.contentWindow.document,me.open(),me.write(ne+"script"+re+"document.F=Object"+ne+"/script"+re),me.close(),xe=me.F;ue--;)delete xe[_e][q[ue]];return xe()};Z.exports=Object.create||function(ue,ne){var re;return ue!==null?(ye[_e]=k(ue),re=new ye,ye[_e]=null,re[Q]=ue):re=xe(),ne===void 0?re:W(re,ne)}},"./node_modules/core-js/modules/_object-dp.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_an-object.js"),W=S("./node_modules/core-js/modules/_ie8-dom-define.js"),q=S("./node_modules/core-js/modules/_to-primitive.js"),Q=Object.defineProperty;B.f=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperty:function(_e,xe,te){if(k(_e),xe=q(xe,!0),k(te),W)try{return Q(_e,xe,te)}catch{}if("get"in te||"set"in te)throw TypeError("Accessors not supported!");return"value"in te&&(_e[xe]=te.value),_e}},"./node_modules/core-js/modules/_object-dps.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-dp.js"),W=S("./node_modules/core-js/modules/_an-object.js"),q=S("./node_modules/core-js/modules/_object-keys.js");Z.exports=S("./node_modules/core-js/modules/_descriptors.js")?Object.defineProperties:function(ye,_e){W(ye);for(var xe=q(_e),te=xe.length,ue=0,ne;te>ue;)k.f(ye,ne=xe[ue++],_e[ne]);return ye}},"./node_modules/core-js/modules/_object-gopd.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-pie.js"),W=S("./node_modules/core-js/modules/_property-desc.js"),q=S("./node_modules/core-js/modules/_to-iobject.js"),Q=S("./node_modules/core-js/modules/_to-primitive.js"),ye=S("./node_modules/core-js/modules/_has.js"),_e=S("./node_modules/core-js/modules/_ie8-dom-define.js"),xe=Object.getOwnPropertyDescriptor;B.f=S("./node_modules/core-js/modules/_descriptors.js")?xe:function(ue,ne){if(ue=q(ue),ne=Q(ne,!0),_e)try{return xe(ue,ne)}catch{}if(ye(ue,ne))return W(!k.f.call(ue,ne),ue[ne])}},"./node_modules/core-js/modules/_object-gopn-ext.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_to-iobject.js"),W=S("./node_modules/core-js/modules/_object-gopn.js").f,q={}.toString,Q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ye=function(_e){try{return W(_e)}catch{return Q.slice()}};Z.exports.f=function(xe){return Q&&q.call(xe)=="[object Window]"?ye(xe):W(k(xe))}},"./node_modules/core-js/modules/_object-gopn.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-keys-internal.js"),W=S("./node_modules/core-js/modules/_enum-bug-keys.js").concat("length","prototype");B.f=Object.getOwnPropertyNames||function(Q){return k(Q,W)}},"./node_modules/core-js/modules/_object-gops.js":function(Z,B){B.f=Object.getOwnPropertySymbols},"./node_modules/core-js/modules/_object-gpo.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_has.js"),W=S("./node_modules/core-js/modules/_to-object.js"),q=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO"),Q=Object.prototype;Z.exports=Object.getPrototypeOf||function(ye){return ye=W(ye),k(ye,q)?ye[q]:typeof ye.constructor=="function"&&ye instanceof ye.constructor?ye.constructor.prototype:ye instanceof Object?Q:null}},"./node_modules/core-js/modules/_object-keys-internal.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_has.js"),W=S("./node_modules/core-js/modules/_to-iobject.js"),q=S("./node_modules/core-js/modules/_array-includes.js")(!1),Q=S("./node_modules/core-js/modules/_shared-key.js")("IE_PROTO");Z.exports=function(ye,_e){var xe=W(ye),te=0,ue=[],ne;for(ne in xe)ne!=Q&&k(xe,ne)&&ue.push(ne);for(;_e.length>te;)k(xe,ne=_e[te++])&&(~q(ue,ne)||ue.push(ne));return ue}},"./node_modules/core-js/modules/_object-keys.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-keys-internal.js"),W=S("./node_modules/core-js/modules/_enum-bug-keys.js");Z.exports=Object.keys||function(Q){return k(Q,W)}},"./node_modules/core-js/modules/_object-pie.js":function(Z,B){B.f={}.propertyIsEnumerable},"./node_modules/core-js/modules/_own-keys.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-gopn.js"),W=S("./node_modules/core-js/modules/_object-gops.js"),q=S("./node_modules/core-js/modules/_an-object.js"),Q=S("./node_modules/core-js/modules/_global.js").Reflect;Z.exports=Q&&Q.ownKeys||function(_e){var xe=k.f(q(_e)),te=W.f;return te?xe.concat(te(_e)):xe}},"./node_modules/core-js/modules/_property-desc.js":function(Z,B){Z.exports=function(S,k){return{enumerable:!(S&1),configurable:!(S&2),writable:!(S&4),value:k}}},"./node_modules/core-js/modules/_redefine.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_global.js"),W=S("./node_modules/core-js/modules/_hide.js"),q=S("./node_modules/core-js/modules/_has.js"),Q=S("./node_modules/core-js/modules/_uid.js")("src"),ye=S("./node_modules/core-js/modules/_function-to-string.js"),_e="toString",xe=(""+ye).split(_e);S("./node_modules/core-js/modules/_core.js").inspectSource=function(te){return ye.call(te)},(Z.exports=function(te,ue,ne,re){var me=typeof ne=="function";me&&(q(ne,"name")||W(ne,"name",ue)),te[ue]!==ne&&(me&&(q(ne,Q)||W(ne,Q,te[ue]?""+te[ue]:xe.join(String(ue)))),te===k?te[ue]=ne:re?te[ue]?te[ue]=ne:W(te,ue,ne):(delete te[ue],W(te,ue,ne)))})(Function.prototype,_e,function(){return typeof this=="function"&&this[Q]||ye.call(this)})},"./node_modules/core-js/modules/_regexp-exec-abstract.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_classof.js"),W=RegExp.prototype.exec;Z.exports=function(q,Q){var ye=q.exec;if(typeof ye=="function"){var _e=ye.call(q,Q);if(typeof _e!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return _e}if(k(q)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return W.call(q,Q)}},"./node_modules/core-js/modules/_regexp-exec.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_flags.js"),W=RegExp.prototype.exec,q=String.prototype.replace,Q=W,ye="lastIndex",_e=function(){var ue=/a/,ne=/b*/g;return W.call(ue,"a"),W.call(ne,"a"),ue[ye]!==0||ne[ye]!==0}(),xe=/()??/.exec("")[1]!==void 0,te=_e||xe;te&&(Q=function(ne){var re=this,me,Se,we,Ue;return xe&&(Se=new RegExp("^"+re.source+"$(?!\\s)",k.call(re))),_e&&(me=re[ye]),we=W.call(re,ne),_e&&we&&(re[ye]=re.global?we.index+we[0].length:me),xe&&we&&we.length>1&&q.call(we[0],Se,function(){for(Ue=1;Ue<arguments.length-2;Ue++)arguments[Ue]===void 0&&(we[Ue]=void 0)}),we}),Z.exports=Q},"./node_modules/core-js/modules/_set-to-string-tag.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-dp.js").f,W=S("./node_modules/core-js/modules/_has.js"),q=S("./node_modules/core-js/modules/_wks.js")("toStringTag");Z.exports=function(Q,ye,_e){Q&&!W(Q=_e?Q:Q.prototype,q)&&k(Q,q,{configurable:!0,value:ye})}},"./node_modules/core-js/modules/_shared-key.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_shared.js")("keys"),W=S("./node_modules/core-js/modules/_uid.js");Z.exports=function(q){return k[q]||(k[q]=W(q))}},"./node_modules/core-js/modules/_shared.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_core.js"),W=S("./node_modules/core-js/modules/_global.js"),q="__core-js_shared__",Q=W[q]||(W[q]={});(Z.exports=function(ye,_e){return Q[ye]||(Q[ye]=_e!==void 0?_e:{})})("versions",[]).push({version:k.version,mode:S("./node_modules/core-js/modules/_library.js")?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/modules/_species-constructor.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_an-object.js"),W=S("./node_modules/core-js/modules/_a-function.js"),q=S("./node_modules/core-js/modules/_wks.js")("species");Z.exports=function(Q,ye){var _e=k(Q).constructor,xe;return _e===void 0||(xe=k(_e)[q])==null?ye:W(xe)}},"./node_modules/core-js/modules/_string-at.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_to-integer.js"),W=S("./node_modules/core-js/modules/_defined.js");Z.exports=function(q){return function(Q,ye){var _e=String(W(Q)),xe=k(ye),te=_e.length,ue,ne;return xe<0||xe>=te?q?"":void 0:(ue=_e.charCodeAt(xe),ue<55296||ue>56319||xe+1===te||(ne=_e.charCodeAt(xe+1))<56320||ne>57343?q?_e.charAt(xe):ue:q?_e.slice(xe,xe+2):(ue-55296<<10)+(ne-56320)+65536)}}},"./node_modules/core-js/modules/_string-context.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_is-regexp.js"),W=S("./node_modules/core-js/modules/_defined.js");Z.exports=function(q,Q,ye){if(k(Q))throw TypeError("String#"+ye+" doesn't accept regex!");return String(W(q))}},"./node_modules/core-js/modules/_to-absolute-index.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_to-integer.js"),W=Math.max,q=Math.min;Z.exports=function(Q,ye){return Q=k(Q),Q<0?W(Q+ye,0):q(Q,ye)}},"./node_modules/core-js/modules/_to-integer.js":function(Z,B){var S=Math.ceil,k=Math.floor;Z.exports=function(W){return isNaN(W=+W)?0:(W>0?k:S)(W)}},"./node_modules/core-js/modules/_to-iobject.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_iobject.js"),W=S("./node_modules/core-js/modules/_defined.js");Z.exports=function(q){return k(W(q))}},"./node_modules/core-js/modules/_to-length.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_to-integer.js"),W=Math.min;Z.exports=function(q){return q>0?W(k(q),9007199254740991):0}},"./node_modules/core-js/modules/_to-object.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_defined.js");Z.exports=function(W){return Object(k(W))}},"./node_modules/core-js/modules/_to-primitive.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_is-object.js");Z.exports=function(W,q){if(!k(W))return W;var Q,ye;if(q&&typeof(Q=W.toString)=="function"&&!k(ye=Q.call(W))||typeof(Q=W.valueOf)=="function"&&!k(ye=Q.call(W))||!q&&typeof(Q=W.toString)=="function"&&!k(ye=Q.call(W)))return ye;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/modules/_uid.js":function(Z,B){var S=0,k=Math.random();Z.exports=function(W){return"Symbol(".concat(W===void 0?"":W,")_",(++S+k).toString(36))}},"./node_modules/core-js/modules/_wks-define.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_global.js"),W=S("./node_modules/core-js/modules/_core.js"),q=S("./node_modules/core-js/modules/_library.js"),Q=S("./node_modules/core-js/modules/_wks-ext.js"),ye=S("./node_modules/core-js/modules/_object-dp.js").f;Z.exports=function(_e){var xe=W.Symbol||(W.Symbol=q?{}:k.Symbol||{});_e.charAt(0)!="_"&&!(_e in xe)&&ye(xe,_e,{value:Q.f(_e)})}},"./node_modules/core-js/modules/_wks-ext.js":function(Z,B,S){B.f=S("./node_modules/core-js/modules/_wks.js")},"./node_modules/core-js/modules/_wks.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_shared.js")("wks"),W=S("./node_modules/core-js/modules/_uid.js"),q=S("./node_modules/core-js/modules/_global.js").Symbol,Q=typeof q=="function",ye=Z.exports=function(_e){return k[_e]||(k[_e]=Q&&q[_e]||(Q?q:W)("Symbol."+_e))};ye.store=k},"./node_modules/core-js/modules/core.get-iterator-method.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_classof.js"),W=S("./node_modules/core-js/modules/_wks.js")("iterator"),q=S("./node_modules/core-js/modules/_iterators.js");Z.exports=S("./node_modules/core-js/modules/_core.js").getIteratorMethod=function(Q){if(Q!=null)return Q[W]||Q["@@iterator"]||q[k(Q)]}},"./node_modules/core-js/modules/es6.array.from.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_ctx.js"),W=S("./node_modules/core-js/modules/_export.js"),q=S("./node_modules/core-js/modules/_to-object.js"),Q=S("./node_modules/core-js/modules/_iter-call.js"),ye=S("./node_modules/core-js/modules/_is-array-iter.js"),_e=S("./node_modules/core-js/modules/_to-length.js"),xe=S("./node_modules/core-js/modules/_create-property.js"),te=S("./node_modules/core-js/modules/core.get-iterator-method.js");W(W.S+W.F*!S("./node_modules/core-js/modules/_iter-detect.js")(function(ue){Array.from(ue)}),"Array",{from:function(ne){var re=q(ne),me=typeof this=="function"?this:Array,Se=arguments.length,we=Se>1?arguments[1]:void 0,Ue=we!==void 0,Pe=0,ze=te(re),He,Ze,rt,ut;if(Ue&&(we=k(we,Se>2?arguments[2]:void 0,2)),ze!=null&&!(me==Array&&ye(ze)))for(ut=ze.call(re),Ze=new me;!(rt=ut.next()).done;Pe++)xe(Ze,Pe,Ue?Q(ut,we,[rt.value,Pe],!0):rt.value);else for(He=_e(re.length),Ze=new me(He);He>Pe;Pe++)xe(Ze,Pe,Ue?we(re[Pe],Pe):re[Pe]);return Ze.length=Pe,Ze}})},"./node_modules/core-js/modules/es6.array.iterator.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_add-to-unscopables.js"),W=S("./node_modules/core-js/modules/_iter-step.js"),q=S("./node_modules/core-js/modules/_iterators.js"),Q=S("./node_modules/core-js/modules/_to-iobject.js");Z.exports=S("./node_modules/core-js/modules/_iter-define.js")(Array,"Array",function(ye,_e){this._t=Q(ye),this._i=0,this._k=_e},function(){var ye=this._t,_e=this._k,xe=this._i++;return!ye||xe>=ye.length?(this._t=void 0,W(1)):_e=="keys"?W(0,xe):_e=="values"?W(0,ye[xe]):W(0,[xe,ye[xe]])},"values"),q.Arguments=q.Array,k("keys"),k("values"),k("entries")},"./node_modules/core-js/modules/es6.function.bind.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_export.js");k(k.P,"Function",{bind:S("./node_modules/core-js/modules/_bind.js")})},"./node_modules/core-js/modules/es6.function.name.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_object-dp.js").f,W=Function.prototype,q=/^\s*function ([^ (]*)/,Q="name";Q in W||S("./node_modules/core-js/modules/_descriptors.js")&&k(W,Q,{configurable:!0,get:function(){try{return(""+this).match(q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es6.number.is-finite.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_export.js"),W=S("./node_modules/core-js/modules/_global.js").isFinite;k(k.S,"Number",{isFinite:function(Q){return typeof Q=="number"&&W(Q)}})},"./node_modules/core-js/modules/es6.object.to-string.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_classof.js"),W={};W[S("./node_modules/core-js/modules/_wks.js")("toStringTag")]="z",W+""!="[object z]"&&S("./node_modules/core-js/modules/_redefine.js")(Object.prototype,"toString",function(){return"[object "+k(this)+"]"},!0)},"./node_modules/core-js/modules/es6.regexp.exec.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_regexp-exec.js");S("./node_modules/core-js/modules/_export.js")({target:"RegExp",proto:!0,forced:k!==/./.exec},{exec:k})},"./node_modules/core-js/modules/es6.regexp.split.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_is-regexp.js"),W=S("./node_modules/core-js/modules/_an-object.js"),q=S("./node_modules/core-js/modules/_species-constructor.js"),Q=S("./node_modules/core-js/modules/_advance-string-index.js"),ye=S("./node_modules/core-js/modules/_to-length.js"),_e=S("./node_modules/core-js/modules/_regexp-exec-abstract.js"),xe=S("./node_modules/core-js/modules/_regexp-exec.js"),te=S("./node_modules/core-js/modules/_fails.js"),ue=Math.min,ne=[].push,re="split",me="length",Se="lastIndex",we=4294967295,Ue=!te(function(){});S("./node_modules/core-js/modules/_fix-re-wks.js")("split",2,function(Pe,ze,He,Ze){var rt;return"abbc"[re](/(b)*/)[1]=="c"||"test"[re](/(?:)/,-1)[me]!=4||"ab"[re](/(?:ab)*/)[me]!=2||"."[re](/(.?)(.?)/)[me]!=4||"."[re](/()()/)[me]>1||""[re](/.?/)[me]?rt=function(ut,gt){var Ct=String(this);if(ut===void 0&&gt===0)return[];if(!k(ut))return He.call(Ct,ut,gt);for(var ht=[],Et=(ut.ignoreCase?"i":"")+(ut.multiline?"m":"")+(ut.unicode?"u":"")+(ut.sticky?"y":""),$t=0,Nt=gt===void 0?we:gt>>>0,hn=new RegExp(ut.source,Et+"g"),Tn,En,rn;(Tn=xe.call(hn,Ct))&&(En=hn[Se],!(En>$t&&(ht.push(Ct.slice($t,Tn.index)),Tn[me]>1&&Tn.index<Ct[me]&&ne.apply(ht,Tn.slice(1)),rn=Tn[0][me],$t=En,ht[me]>=Nt)));)hn[Se]===Tn.index&&hn[Se]++;return $t===Ct[me]?(rn||!hn.test(""))&&ht.push(""):ht.push(Ct.slice($t)),ht[me]>Nt?ht.slice(0,Nt):ht}:"0"[re](void 0,0)[me]?rt=function(ut,gt){return ut===void 0&&gt===0?[]:He.call(this,ut,gt)}:rt=He,[function(gt,Ct){var ht=Pe(this),Et=gt==null?void 0:gt[ze];return Et!==void 0?Et.call(gt,ht,Ct):rt.call(String(ht),gt,Ct)},function(ut,gt){var Ct=Ze(rt,ut,this,gt,rt!==He);if(Ct.done)return Ct.value;var ht=W(ut),Et=String(this),$t=q(ht,RegExp),Nt=ht.unicode,hn=(ht.ignoreCase?"i":"")+(ht.multiline?"m":"")+(ht.unicode?"u":"")+(Ue?"y":"g"),Tn=new $t(Ue?ht:"^(?:"+ht.source+")",hn),En=gt===void 0?we:gt>>>0;if(En===0)return[];if(Et.length===0)return _e(Tn,Et)===null?[Et]:[];for(var rn=0,xn=0,Te=[];xn<Et.length;){Tn.lastIndex=Ue?xn:0;var M=_e(Tn,Ue?Et:Et.slice(xn)),R;if(M===null||(R=ue(ye(Tn.lastIndex+(Ue?0:xn)),Et.length))===rn)xn=Q(Et,xn,Nt);else{if(Te.push(Et.slice(rn,xn)),Te.length===En)return Te;for(var ve=1;ve<=M.length-1;ve++)if(Te.push(M[ve]),Te.length===En)return Te;xn=rn=R}}return Te.push(Et.slice(rn)),Te}]})},"./node_modules/core-js/modules/es6.string.includes.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_export.js"),W=S("./node_modules/core-js/modules/_string-context.js"),q="includes";k(k.P+k.F*S("./node_modules/core-js/modules/_fails-is-regexp.js")(q),"String",{includes:function(ye){return!!~W(this,ye,q).indexOf(ye,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es6.symbol.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_global.js"),W=S("./node_modules/core-js/modules/_has.js"),q=S("./node_modules/core-js/modules/_descriptors.js"),Q=S("./node_modules/core-js/modules/_export.js"),ye=S("./node_modules/core-js/modules/_redefine.js"),_e=S("./node_modules/core-js/modules/_meta.js").KEY,xe=S("./node_modules/core-js/modules/_fails.js"),te=S("./node_modules/core-js/modules/_shared.js"),ue=S("./node_modules/core-js/modules/_set-to-string-tag.js"),ne=S("./node_modules/core-js/modules/_uid.js"),re=S("./node_modules/core-js/modules/_wks.js"),me=S("./node_modules/core-js/modules/_wks-ext.js"),Se=S("./node_modules/core-js/modules/_wks-define.js"),we=S("./node_modules/core-js/modules/_enum-keys.js"),Ue=S("./node_modules/core-js/modules/_is-array.js"),Pe=S("./node_modules/core-js/modules/_an-object.js"),ze=S("./node_modules/core-js/modules/_is-object.js"),He=S("./node_modules/core-js/modules/_to-object.js"),Ze=S("./node_modules/core-js/modules/_to-iobject.js"),rt=S("./node_modules/core-js/modules/_to-primitive.js"),ut=S("./node_modules/core-js/modules/_property-desc.js"),gt=S("./node_modules/core-js/modules/_object-create.js"),Ct=S("./node_modules/core-js/modules/_object-gopn-ext.js"),ht=S("./node_modules/core-js/modules/_object-gopd.js"),Et=S("./node_modules/core-js/modules/_object-gops.js"),$t=S("./node_modules/core-js/modules/_object-dp.js"),Nt=S("./node_modules/core-js/modules/_object-keys.js"),hn=ht.f,Tn=$t.f,En=Ct.f,rn=k.Symbol,xn=k.JSON,Te=xn&&xn.stringify,M="prototype",R=re("_hidden"),ve=re("toPrimitive"),Ne={}.propertyIsEnumerable,qe=te("symbol-registry"),lt=te("symbols"),le=te("op-symbols"),F=Object[M],N=typeof rn=="function"&&!!Et.f,Ee=k.QObject,Ge=!Ee||!Ee[M]||!Ee[M].findChild,tt=q&&xe(function(){return gt(Tn({},"a",{get:function(){return Tn(this,"a",{value:7}).a}})).a!=7})?function(se,fe,be){var Le=hn(F,fe);Le&&delete F[fe],Tn(se,fe,be),Le&&se!==F&&Tn(F,fe,Le)}:Tn,Ve=function(se){var fe=lt[se]=gt(rn[M]);return fe._k=se,fe},Dt=N&&typeof rn.iterator=="symbol"?function(se){return typeof se=="symbol"}:function(se){return se instanceof rn},vn=function(fe,be,Le){return fe===F&&vn(le,be,Le),Pe(fe),be=rt(be,!0),Pe(Le),W(lt,be)?(Le.enumerable?(W(fe,R)&&fe[R][be]&&(fe[R][be]=!1),Le=gt(Le,{enumerable:ut(0,!1)})):(W(fe,R)||Tn(fe,R,ut(1,{})),fe[R][be]=!0),tt(fe,be,Le)):Tn(fe,be,Le)},Sn=function(fe,be){Pe(fe);for(var Le=we(be=Ze(be)),Xe=0,$e=Le.length,je;$e>Xe;)vn(fe,je=Le[Xe++],be[je]);return fe},Mn=function(fe,be){return be===void 0?gt(fe):Sn(gt(fe),be)},ft=function(fe){var be=Ne.call(this,fe=rt(fe,!0));return this===F&&W(lt,fe)&&!W(le,fe)?!1:be||!W(this,fe)||!W(lt,fe)||W(this,R)&&this[R][fe]?be:!0},cn=function(fe,be){if(fe=Ze(fe),be=rt(be,!0),!(fe===F&&W(lt,be)&&!W(le,be))){var Le=hn(fe,be);return Le&&W(lt,be)&&!(W(fe,R)&&fe[R][be])&&(Le.enumerable=!0),Le}},fn=function(fe){for(var be=En(Ze(fe)),Le=[],Xe=0,$e;be.length>Xe;)!W(lt,$e=be[Xe++])&&$e!=R&&$e!=_e&&Le.push($e);return Le},Er=function(fe){for(var be=fe===F,Le=En(be?le:Ze(fe)),Xe=[],$e=0,je;Le.length>$e;)W(lt,je=Le[$e++])&&(!be||W(F,je))&&Xe.push(lt[je]);return Xe};N||(rn=function(){if(this instanceof rn)throw TypeError("Symbol is not a constructor!");var fe=ne(arguments.length>0?arguments[0]:void 0),be=function(Le){this===F&&be.call(le,Le),W(this,R)&&W(this[R],fe)&&(this[R][fe]=!1),tt(this,fe,ut(1,Le))};return q&&Ge&&tt(F,fe,{configurable:!0,set:be}),Ve(fe)},ye(rn[M],"toString",function(){return this._k}),ht.f=cn,$t.f=vn,S("./node_modules/core-js/modules/_object-gopn.js").f=Ct.f=fn,S("./node_modules/core-js/modules/_object-pie.js").f=ft,Et.f=Er,q&&!S("./node_modules/core-js/modules/_library.js")&&ye(F,"propertyIsEnumerable",ft,!0),me.f=function(se){return Ve(re(se))}),Q(Q.G+Q.W+Q.F*!N,{Symbol:rn});for(var Xr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Qt=0;Xr.length>Qt;)re(Xr[Qt++]);for(var co=Nt(re.store),ke=0;co.length>ke;)Se(co[ke++]);Q(Q.S+Q.F*!N,"Symbol",{for:function(se){return W(qe,se+="")?qe[se]:qe[se]=rn(se)},keyFor:function(fe){if(!Dt(fe))throw TypeError(fe+" is not a symbol!");for(var be in qe)if(qe[be]===fe)return be},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),Q(Q.S+Q.F*!N,"Object",{create:Mn,defineProperty:vn,defineProperties:Sn,getOwnPropertyDescriptor:cn,getOwnPropertyNames:fn,getOwnPropertySymbols:Er});var oe=xe(function(){Et.f(1)});Q(Q.S+Q.F*oe,"Object",{getOwnPropertySymbols:function(fe){return Et.f(He(fe))}}),xn&&Q(Q.S+Q.F*(!N||xe(function(){var se=rn();return Te([se])!="[null]"||Te({a:se})!="{}"||Te(Object(se))!="{}"})),"JSON",{stringify:function(fe){for(var be=[fe],Le=1,Xe,$e;arguments.length>Le;)be.push(arguments[Le++]);if($e=Xe=be[1],!(!ze(Xe)&&fe===void 0||Dt(fe)))return Ue(Xe)||(Xe=function(je,Ye){if(typeof $e=="function"&&(Ye=$e.call(this,je,Ye)),!Dt(Ye))return Ye}),be[1]=Xe,Te.apply(xn,be)}}),rn[M][ve]||S("./node_modules/core-js/modules/_hide.js")(rn[M],ve,rn[M].valueOf),ue(rn,"Symbol"),ue(Math,"Math",!0),ue(k.JSON,"JSON",!0)},"./node_modules/core-js/modules/es7.array.includes.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_export.js"),W=S("./node_modules/core-js/modules/_array-includes.js")(!0);k(k.P,"Array",{includes:function(Q){return W(this,Q,arguments.length>1?arguments[1]:void 0)}}),S("./node_modules/core-js/modules/_add-to-unscopables.js")("includes")},"./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js":function(Z,B,S){var k=S("./node_modules/core-js/modules/_export.js"),W=S("./node_modules/core-js/modules/_own-keys.js"),q=S("./node_modules/core-js/modules/_to-iobject.js"),Q=S("./node_modules/core-js/modules/_object-gopd.js"),ye=S("./node_modules/core-js/modules/_create-property.js");k(k.S,"Object",{getOwnPropertyDescriptors:function(xe){for(var te=q(xe),ue=Q.f,ne=W(te),re={},me=0,Se,we;ne.length>me;)we=ue(te,Se=ne[me++]),we!==void 0&&ye(re,Se,we);return re}})},"./node_modules/core-js/modules/es7.symbol.async-iterator.js":function(Z,B,S){S("./node_modules/core-js/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/modules/web.dom.iterable.js":function(Z,B,S){for(var k=S("./node_modules/core-js/modules/es6.array.iterator.js"),W=S("./node_modules/core-js/modules/_object-keys.js"),q=S("./node_modules/core-js/modules/_redefine.js"),Q=S("./node_modules/core-js/modules/_global.js"),ye=S("./node_modules/core-js/modules/_hide.js"),_e=S("./node_modules/core-js/modules/_iterators.js"),xe=S("./node_modules/core-js/modules/_wks.js"),te=xe("iterator"),ue=xe("toStringTag"),ne=_e.Array,re={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},me=W(re),Se=0;Se<me.length;Se++){var we=me[Se],Ue=re[we],Pe=Q[we],ze=Pe&&Pe.prototype,He;if(ze&&(ze[te]||ye(ze,te,ne),ze[ue]||ye(ze,ue,we),_e[we]=ne,Ue))for(He in k)ze[He]||q(ze,He,k[He],!0)}},"./node_modules/crypt/crypt.js":function(Z,B){(function(){var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k={rotl:function(W,q){return W<<q|W>>>32-q},rotr:function(W,q){return W<<32-q|W>>>q},endian:function(W){if(W.constructor==Number)return k.rotl(W,8)&16711935|k.rotl(W,24)&4278255360;for(var q=0;q<W.length;q++)W[q]=k.endian(W[q]);return W},randomBytes:function(W){for(var q=[];W>0;W--)q.push(Math.floor(Math.random()*256));return q},bytesToWords:function(W){for(var q=[],Q=0,ye=0;Q<W.length;Q++,ye+=8)q[ye>>>5]|=W[Q]<<24-ye%32;return q},wordsToBytes:function(W){for(var q=[],Q=0;Q<W.length*32;Q+=8)q.push(W[Q>>>5]>>>24-Q%32&255);return q},bytesToHex:function(W){for(var q=[],Q=0;Q<W.length;Q++)q.push((W[Q]>>>4).toString(16)),q.push((W[Q]&15).toString(16));return q.join("")},hexToBytes:function(W){for(var q=[],Q=0;Q<W.length;Q+=2)q.push(parseInt(W.substr(Q,2),16));return q},bytesToBase64:function(W){for(var q=[],Q=0;Q<W.length;Q+=3)for(var ye=W[Q]<<16|W[Q+1]<<8|W[Q+2],_e=0;_e<4;_e++)Q*8+_e*6<=W.length*8?q.push(S.charAt(ye>>>6*(3-_e)&63)):q.push("=");return q.join("")},base64ToBytes:function(W){W=W.replace(/[^A-Z0-9+\/]/ig,"");for(var q=[],Q=0,ye=0;Q<W.length;ye=++Q%4)ye!=0&&q.push((S.indexOf(W.charAt(Q-1))&Math.pow(2,-2*ye+8)-1)<<ye*2|S.indexOf(W.charAt(Q))>>>6-ye*2);return q}};Z.exports=k})()},"./node_modules/is-buffer/index.js":function(Z,B){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */Z.exports=function(W){return W!=null&&(S(W)||k(W)||!!W._isBuffer)};function S(W){return!!W.constructor&&typeof W.constructor.isBuffer=="function"&&W.constructor.isBuffer(W)}function k(W){return typeof W.readFloatLE=="function"&&typeof W.slice=="function"&&S(W.slice(0,0))}},"./node_modules/md5/md5.js":function(Z,B,S){(function(){var k=S("./node_modules/crypt/crypt.js"),W=S("./node_modules/charenc/charenc.js").utf8,q=S("./node_modules/is-buffer/index.js"),Q=S("./node_modules/charenc/charenc.js").bin,ye=function(_e,xe){_e.constructor==String?xe&&xe.encoding==="binary"?_e=Q.stringToBytes(_e):_e=W.stringToBytes(_e):q(_e)?_e=Array.prototype.slice.call(_e,0):!Array.isArray(_e)&&_e.constructor!==Uint8Array&&(_e=_e.toString());for(var te=k.bytesToWords(_e),ue=_e.length*8,ne=1732584193,re=-271733879,me=-1732584194,Se=271733878,we=0;we<te.length;we++)te[we]=(te[we]<<8|te[we]>>>24)&16711935|(te[we]<<24|te[we]>>>8)&4278255360;te[ue>>>5]|=128<<ue%32,te[(ue+64>>>9<<4)+14]=ue;for(var Ue=ye._ff,Pe=ye._gg,ze=ye._hh,He=ye._ii,we=0;we<te.length;we+=16){var Ze=ne,rt=re,ut=me,gt=Se;ne=Ue(ne,re,me,Se,te[we+0],7,-680876936),Se=Ue(Se,ne,re,me,te[we+1],12,-389564586),me=Ue(me,Se,ne,re,te[we+2],17,606105819),re=Ue(re,me,Se,ne,te[we+3],22,-1044525330),ne=Ue(ne,re,me,Se,te[we+4],7,-176418897),Se=Ue(Se,ne,re,me,te[we+5],12,1200080426),me=Ue(me,Se,ne,re,te[we+6],17,-1473231341),re=Ue(re,me,Se,ne,te[we+7],22,-45705983),ne=Ue(ne,re,me,Se,te[we+8],7,1770035416),Se=Ue(Se,ne,re,me,te[we+9],12,-1958414417),me=Ue(me,Se,ne,re,te[we+10],17,-42063),re=Ue(re,me,Se,ne,te[we+11],22,-1990404162),ne=Ue(ne,re,me,Se,te[we+12],7,1804603682),Se=Ue(Se,ne,re,me,te[we+13],12,-40341101),me=Ue(me,Se,ne,re,te[we+14],17,-1502002290),re=Ue(re,me,Se,ne,te[we+15],22,1236535329),ne=Pe(ne,re,me,Se,te[we+1],5,-165796510),Se=Pe(Se,ne,re,me,te[we+6],9,-1069501632),me=Pe(me,Se,ne,re,te[we+11],14,643717713),re=Pe(re,me,Se,ne,te[we+0],20,-373897302),ne=Pe(ne,re,me,Se,te[we+5],5,-701558691),Se=Pe(Se,ne,re,me,te[we+10],9,38016083),me=Pe(me,Se,ne,re,te[we+15],14,-660478335),re=Pe(re,me,Se,ne,te[we+4],20,-405537848),ne=Pe(ne,re,me,Se,te[we+9],5,568446438),Se=Pe(Se,ne,re,me,te[we+14],9,-1019803690),me=Pe(me,Se,ne,re,te[we+3],14,-187363961),re=Pe(re,me,Se,ne,te[we+8],20,1163531501),ne=Pe(ne,re,me,Se,te[we+13],5,-1444681467),Se=Pe(Se,ne,re,me,te[we+2],9,-51403784),me=Pe(me,Se,ne,re,te[we+7],14,1735328473),re=Pe(re,me,Se,ne,te[we+12],20,-1926607734),ne=ze(ne,re,me,Se,te[we+5],4,-378558),Se=ze(Se,ne,re,me,te[we+8],11,-2022574463),me=ze(me,Se,ne,re,te[we+11],16,1839030562),re=ze(re,me,Se,ne,te[we+14],23,-35309556),ne=ze(ne,re,me,Se,te[we+1],4,-1530992060),Se=ze(Se,ne,re,me,te[we+4],11,1272893353),me=ze(me,Se,ne,re,te[we+7],16,-155497632),re=ze(re,me,Se,ne,te[we+10],23,-1094730640),ne=ze(ne,re,me,Se,te[we+13],4,681279174),Se=ze(Se,ne,re,me,te[we+0],11,-358537222),me=ze(me,Se,ne,re,te[we+3],16,-722521979),re=ze(re,me,Se,ne,te[we+6],23,76029189),ne=ze(ne,re,me,Se,te[we+9],4,-640364487),Se=ze(Se,ne,re,me,te[we+12],11,-421815835),me=ze(me,Se,ne,re,te[we+15],16,530742520),re=ze(re,me,Se,ne,te[we+2],23,-995338651),ne=He(ne,re,me,Se,te[we+0],6,-198630844),Se=He(Se,ne,re,me,te[we+7],10,1126891415),me=He(me,Se,ne,re,te[we+14],15,-1416354905),re=He(re,me,Se,ne,te[we+5],21,-57434055),ne=He(ne,re,me,Se,te[we+12],6,1700485571),Se=He(Se,ne,re,me,te[we+3],10,-1894986606),me=He(me,Se,ne,re,te[we+10],15,-1051523),re=He(re,me,Se,ne,te[we+1],21,-2054922799),ne=He(ne,re,me,Se,te[we+8],6,1873313359),Se=He(Se,ne,re,me,te[we+15],10,-30611744),me=He(me,Se,ne,re,te[we+6],15,-1560198380),re=He(re,me,Se,ne,te[we+13],21,1309151649),ne=He(ne,re,me,Se,te[we+4],6,-145523070),Se=He(Se,ne,re,me,te[we+11],10,-1120210379),me=He(me,Se,ne,re,te[we+2],15,718787259),re=He(re,me,Se,ne,te[we+9],21,-343485551),ne=ne+Ze>>>0,re=re+rt>>>0,me=me+ut>>>0,Se=Se+gt>>>0}return k.endian([ne,re,me,Se])};ye._ff=function(_e,xe,te,ue,ne,re,me){var Se=_e+(xe&te|~xe&ue)+(ne>>>0)+me;return(Se<<re|Se>>>32-re)+xe},ye._gg=function(_e,xe,te,ue,ne,re,me){var Se=_e+(xe&ue|te&~ue)+(ne>>>0)+me;return(Se<<re|Se>>>32-re)+xe},ye._hh=function(_e,xe,te,ue,ne,re,me){var Se=_e+(xe^te^ue)+(ne>>>0)+me;return(Se<<re|Se>>>32-re)+xe},ye._ii=function(_e,xe,te,ue,ne,re,me){var Se=_e+(te^(xe|~ue))+(ne>>>0)+me;return(Se<<re|Se>>>32-re)+xe},ye._blocksize=16,ye._digestsize=16,Z.exports=function(_e,xe){if(_e==null)throw new Error("Illegal argument "+_e);var te=k.wordsToBytes(ye(_e,xe));return xe&&xe.asBytes?te:xe&&xe.asString?Q.bytesToString(te):k.bytesToHex(te)}})()},"./node_modules/regenerator-runtime/runtime.js":function(Z,B,S){var k=function(W){var q=Object.prototype,Q=q.hasOwnProperty,ye,_e=typeof Symbol=="function"?Symbol:{},xe=_e.iterator||"@@iterator",te=_e.asyncIterator||"@@asyncIterator",ue=_e.toStringTag||"@@toStringTag";function ne(M,R,ve){return Object.defineProperty(M,R,{value:ve,enumerable:!0,configurable:!0,writable:!0}),M[R]}try{ne({},"")}catch{ne=function(R,ve,Ne){return R[ve]=Ne}}function re(M,R,ve,Ne){var qe=R&&R.prototype instanceof He?R:He,lt=Object.create(qe.prototype),le=new rn(Ne||[]);return lt._invoke=Nt(M,ve,le),lt}W.wrap=re;function me(M,R,ve){try{return{type:"normal",arg:M.call(R,ve)}}catch(Ne){return{type:"throw",arg:Ne}}}var Se="suspendedStart",we="suspendedYield",Ue="executing",Pe="completed",ze={};function He(){}function Ze(){}function rt(){}var ut={};ut[xe]=function(){return this};var gt=Object.getPrototypeOf,Ct=gt&&gt(gt(xn([])));Ct&&Ct!==q&&Q.call(Ct,xe)&&(ut=Ct);var ht=rt.prototype=He.prototype=Object.create(ut);Ze.prototype=ht.constructor=rt,rt.constructor=Ze,Ze.displayName=ne(rt,ue,"GeneratorFunction");function Et(M){["next","throw","return"].forEach(function(R){ne(M,R,function(ve){return this._invoke(R,ve)})})}W.isGeneratorFunction=function(M){var R=typeof M=="function"&&M.constructor;return R?R===Ze||(R.displayName||R.name)==="GeneratorFunction":!1},W.mark=function(M){return Object.setPrototypeOf?Object.setPrototypeOf(M,rt):(M.__proto__=rt,ne(M,ue,"GeneratorFunction")),M.prototype=Object.create(ht),M},W.awrap=function(M){return{__await:M}};function $t(M,R){function ve(lt,le,F,N){var Ee=me(M[lt],M,le);if(Ee.type==="throw")N(Ee.arg);else{var Ge=Ee.arg,tt=Ge.value;return tt&&typeof tt=="object"&&Q.call(tt,"__await")?R.resolve(tt.__await).then(function(Ve){ve("next",Ve,F,N)},function(Ve){ve("throw",Ve,F,N)}):R.resolve(tt).then(function(Ve){Ge.value=Ve,F(Ge)},function(Ve){return ve("throw",Ve,F,N)})}}var Ne;function qe(lt,le){function F(){return new R(function(N,Ee){ve(lt,le,N,Ee)})}return Ne=Ne?Ne.then(F,F):F()}this._invoke=qe}Et($t.prototype),$t.prototype[te]=function(){return this},W.AsyncIterator=$t,W.async=function(M,R,ve,Ne,qe){qe===void 0&&(qe=Promise);var lt=new $t(re(M,R,ve,Ne),qe);return W.isGeneratorFunction(R)?lt:lt.next().then(function(le){return le.done?le.value:lt.next()})};function Nt(M,R,ve){var Ne=Se;return function(lt,le){if(Ne===Ue)throw new Error("Generator is already running");if(Ne===Pe){if(lt==="throw")throw le;return Te()}for(ve.method=lt,ve.arg=le;;){var F=ve.delegate;if(F){var N=hn(F,ve);if(N){if(N===ze)continue;return N}}if(ve.method==="next")ve.sent=ve._sent=ve.arg;else if(ve.method==="throw"){if(Ne===Se)throw Ne=Pe,ve.arg;ve.dispatchException(ve.arg)}else ve.method==="return"&&ve.abrupt("return",ve.arg);Ne=Ue;var Ee=me(M,R,ve);if(Ee.type==="normal"){if(Ne=ve.done?Pe:we,Ee.arg===ze)continue;return{value:Ee.arg,done:ve.done}}else Ee.type==="throw"&&(Ne=Pe,ve.method="throw",ve.arg=Ee.arg)}}}function hn(M,R){var ve=M.iterator[R.method];if(ve===ye){if(R.delegate=null,R.method==="throw"){if(M.iterator.return&&(R.method="return",R.arg=ye,hn(M,R),R.method==="throw"))return ze;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return ze}var Ne=me(ve,M.iterator,R.arg);if(Ne.type==="throw")return R.method="throw",R.arg=Ne.arg,R.delegate=null,ze;var qe=Ne.arg;if(!qe)return R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,ze;if(qe.done)R[M.resultName]=qe.value,R.next=M.nextLoc,R.method!=="return"&&(R.method="next",R.arg=ye);else return qe;return R.delegate=null,ze}Et(ht),ne(ht,ue,"Generator"),ht[xe]=function(){return this},ht.toString=function(){return"[object Generator]"};function Tn(M){var R={tryLoc:M[0]};1 in M&&(R.catchLoc=M[1]),2 in M&&(R.finallyLoc=M[2],R.afterLoc=M[3]),this.tryEntries.push(R)}function En(M){var R=M.completion||{};R.type="normal",delete R.arg,M.completion=R}function rn(M){this.tryEntries=[{tryLoc:"root"}],M.forEach(Tn,this),this.reset(!0)}W.keys=function(M){var R=[];for(var ve in M)R.push(ve);return R.reverse(),function Ne(){for(;R.length;){var qe=R.pop();if(qe in M)return Ne.value=qe,Ne.done=!1,Ne}return Ne.done=!0,Ne}};function xn(M){if(M){var R=M[xe];if(R)return R.call(M);if(typeof M.next=="function")return M;if(!isNaN(M.length)){var ve=-1,Ne=function qe(){for(;++ve<M.length;)if(Q.call(M,ve))return qe.value=M[ve],qe.done=!1,qe;return qe.value=ye,qe.done=!0,qe};return Ne.next=Ne}}return{next:Te}}W.values=xn;function Te(){return{value:ye,done:!0}}return rn.prototype={constructor:rn,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(En),!M)for(var R in this)R.charAt(0)==="t"&&Q.call(this,R)&&!isNaN(+R.slice(1))&&(this[R]=ye)},stop:function(){this.done=!0;var M=this.tryEntries[0],R=M.completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var R=this;function ve(N,Ee){return lt.type="throw",lt.arg=M,R.next=N,Ee&&(R.method="next",R.arg=ye),!!Ee}for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var qe=this.tryEntries[Ne],lt=qe.completion;if(qe.tryLoc==="root")return ve("end");if(qe.tryLoc<=this.prev){var le=Q.call(qe,"catchLoc"),F=Q.call(qe,"finallyLoc");if(le&&F){if(this.prev<qe.catchLoc)return ve(qe.catchLoc,!0);if(this.prev<qe.finallyLoc)return ve(qe.finallyLoc)}else if(le){if(this.prev<qe.catchLoc)return ve(qe.catchLoc,!0)}else if(F){if(this.prev<qe.finallyLoc)return ve(qe.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(M,R){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var Ne=this.tryEntries[ve];if(Ne.tryLoc<=this.prev&&Q.call(Ne,"finallyLoc")&&this.prev<Ne.finallyLoc){var qe=Ne;break}}qe&&(M==="break"||M==="continue")&&qe.tryLoc<=R&&R<=qe.finallyLoc&&(qe=null);var lt=qe?qe.completion:{};return lt.type=M,lt.arg=R,qe?(this.method="next",this.next=qe.finallyLoc,ze):this.complete(lt)},complete:function(M,R){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&R&&(this.next=R),ze},finish:function(M){for(var R=this.tryEntries.length-1;R>=0;--R){var ve=this.tryEntries[R];if(ve.finallyLoc===M)return this.complete(ve.completion,ve.afterLoc),En(ve),ze}},catch:function(M){for(var R=this.tryEntries.length-1;R>=0;--R){var ve=this.tryEntries[R];if(ve.tryLoc===M){var Ne=ve.completion;if(Ne.type==="throw"){var qe=Ne.arg;En(ve)}return qe}}throw new Error("illegal catch attempt")},delegateYield:function(M,R,ve){return this.delegate={iterator:xn(M),resultName:R,nextLoc:ve},this.method==="next"&&(this.arg=ye),ze}},W}(Z.exports);try{regeneratorRuntime=k}catch{Function("r","regeneratorRuntime = r")(k)}},"./src/api.js":function(Z,B,S){S.r(B),S.d(B,"setup",function(){return Ue}),S.d(B,"setupCache",function(){return we}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var k=S("axios"),W=S.n(k),q=S("./src/request.js"),Q=S("./src/cache.js");S.d(B,"serializeQuery",function(){return Q.serializeQuery});var ye=S("./src/config.js"),_e=S("./src/utilities.js");function xe(Pe,ze){if(Pe==null)return{};var He=te(Pe,ze),Ze,rt;if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(Pe);for(rt=0;rt<ut.length;rt++)Ze=ut[rt],!(ze.indexOf(Ze)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,Ze)&&(He[Ze]=Pe[Ze])}return He}function te(Pe,ze){if(Pe==null)return{};var He={},Ze=Object.keys(Pe),rt,ut;for(ut=0;ut<Ze.length;ut++)rt=Ze[ut],!(ze.indexOf(rt)>=0)&&(He[rt]=Pe[rt]);return He}function ue(Pe,ze){var He=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Ze=Object.getOwnPropertySymbols(Pe);ze&&(Ze=Ze.filter(function(rt){return Object.getOwnPropertyDescriptor(Pe,rt).enumerable})),He.push.apply(He,Ze)}return He}function ne(Pe){for(var ze=1;ze<arguments.length;ze++){var He=arguments[ze]!=null?arguments[ze]:{};ze%2?ue(Object(He),!0).forEach(function(Ze){re(Pe,Ze,He[Ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors(He)):ue(Object(He)).forEach(function(Ze){Object.defineProperty(Pe,Ze,Object.getOwnPropertyDescriptor(He,Ze))})}return Pe}function re(Pe,ze,He){return ze in Pe?Object.defineProperty(Pe,ze,{value:He,enumerable:!0,configurable:!0,writable:!0}):Pe[ze]=He,Pe}function me(Pe,ze,He,Ze,rt,ut,gt){try{var Ct=Pe[ut](gt),ht=Ct.value}catch(Et){He(Et);return}Ct.done?ze(ht):Promise.resolve(ht).then(Ze,rt)}function Se(Pe){return function(){var ze=this,He=arguments;return new Promise(function(Ze,rt){var ut=Pe.apply(ze,He);function gt(ht){me(ut,Ze,rt,gt,Ct,"next",ht)}function Ct(ht){me(ut,Ze,rt,gt,Ct,"throw",ht)}gt(void 0)})}}function we(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Pe=Object(ye.makeConfig)(Pe);function ze(Ze){return He.apply(this,arguments)}function He(){return He=Se(regeneratorRuntime.mark(function Ze(rt){var ut,gt,Ct,ht,Et;return regeneratorRuntime.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:return ut=Object(ye.mergeRequestConfig)(Pe,rt),Nt.next=3,Object(q.default)(ut,rt);case 3:if(gt=Nt.sent,Ct=gt.next,Object(_e.isFunction)(Ct)){Nt.next=7;break}return Nt.abrupt("return",Ct);case 7:return Nt.prev=7,Nt.next=10,ut.adapter(rt);case 10:gt=Nt.sent,Nt.next=16;break;case 13:Nt.prev=13,Nt.t0=Nt.catch(7),ht=Nt.t0;case 16:if(!ht){Nt.next=31;break}if(Et=Object(_e.isFunction)(ut.readOnError)?ut.readOnError(ht,rt):ut.readOnError,!Et){Nt.next=30;break}return Nt.prev=19,ut.acceptStale=!0,Nt.next=23,Object(q.default)(ut,rt);case 23:return gt=Nt.sent,gt.next.request.stale=!0,Nt.abrupt("return",gt.next);case 28:Nt.prev=28,Nt.t1=Nt.catch(19);case 30:throw ht;case 31:return Nt.abrupt("return",Ct(gt));case 32:case"end":return Nt.stop()}},Ze,null,[[7,13],[19,28]])})),He.apply(this,arguments)}return{adapter:ze,config:Pe,store:Pe.store}}function Ue(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=ne(ne(ne({},ye.defaults.axios),Pe),{},{cache:ne(ne({},ye.defaults.axios.cache),Pe.cache)}),He=we(ze.cache);ze.cache;var Ze=xe(ze,["cache"]),rt=W.a.create(ne(ne({},Ze),{},{adapter:He.adapter}));return rt.cache=He.store,rt}B.default={setup:Ue,setupCache:we,serializeQuery:Q.serializeQuery}},"./src/cache.js":function(Z,B,S){S.r(B),S.d(B,"read",function(){return ue}),S.d(B,"write",function(){return xe}),S.d(B,"key",function(){return re}),S.d(B,"invalidate",function(){return we}),S.d(B,"serializeQuery",function(){return Ue}),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var k=S("./src/utilities.js"),W=S("./node_modules/md5/md5.js"),q=S.n(W),Q=S("./src/serialize.js");function ye(Pe,ze,He,Ze,rt,ut,gt){try{var Ct=Pe[ut](gt),ht=Ct.value}catch(Et){He(Et);return}Ct.done?ze(ht):Promise.resolve(ht).then(Ze,rt)}function _e(Pe){return function(){var ze=this,He=arguments;return new Promise(function(Ze,rt){var ut=Pe.apply(ze,He);function gt(ht){ye(ut,Ze,rt,gt,Ct,"next",ht)}function Ct(ht){ye(ut,Ze,rt,gt,Ct,"throw",ht)}gt(void 0)})}}function xe(Pe,ze,He){return te.apply(this,arguments)}function te(){return te=_e(regeneratorRuntime.mark(function Pe(ze,He,Ze){var rt;return regeneratorRuntime.wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.prev=0,rt={expires:ze.expires,data:Object(Q.default)(ze,He,Ze)},gt.next=4,ze.store.setItem(ze.uuid,rt);case 4:gt.next=19;break;case 6:if(gt.prev=6,gt.t0=gt.catch(0),ze.debug("Could not store response",gt.t0),!ze.clearOnError){gt.next=18;break}return gt.prev=10,gt.next=13,ze.store.clear();case 13:gt.next=18;break;case 15:gt.prev=15,gt.t1=gt.catch(10),ze.debug("Could not clear store",gt.t1);case 18:return gt.abrupt("return",!1);case 19:return gt.abrupt("return",!0);case 20:case"end":return gt.stop()}},Pe,null,[[0,6],[10,15]])})),te.apply(this,arguments)}function ue(Pe,ze){return ne.apply(this,arguments)}function ne(){return ne=_e(regeneratorRuntime.mark(function Pe(ze,He){var Ze,rt,ut,gt,Ct,ht,Et,$t;return regeneratorRuntime.wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return Ze=ze.uuid,rt=ze.ignoreCache,hn.next=3,ze.store.getItem(Ze);case 3:if(ut=hn.sent,!(rt||!ut||!ut.data)){hn.next=10;break}throw ze.debug("cache-miss",He.url),gt=new Error,gt.reason="cache-miss",gt.message="Entry not found from cache",gt;case 10:if(Ct=ut.expires,ht=ut.data,Et=typeof navigator<"u"&&"onLine"in navigator&&!navigator.onLine,!(!Et&&!ze.acceptStale&&Ct!==0&&Ct<Date.now())){hn.next=18;break}throw ze.debug("cache-stale",He.url),$t=new Error,$t.reason="cache-stale",$t.message="Entry is stale",$t;case 18:return ze.debug(ze.acceptStale?"cache-hit-stale":"cache-hit",He.url),hn.abrupt("return",ht);case 20:case"end":return hn.stop()}},Pe)})),ne.apply(this,arguments)}function re(Pe){if(Object(k.isFunction)(Pe.key))return Pe.key;var ze;return Object(k.isString)(Pe.key)?ze=function(Ze){var rt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ut="".concat(Pe.key,"/").concat(rt).concat(Ue(Ze));return Ze.data?ut+q()(Ze.data):ut}:ze=function(Ze){var rt="".concat(Ze.baseURL?Ze.baseURL:"").concat(Ze.url),ut=rt+Ue(Ze);return Ze.data?ut+q()(Ze.data):ut},ze}function me(Pe,ze){return Se.apply(this,arguments)}function Se(){return Se=_e(regeneratorRuntime.mark(function Pe(ze,He){var Ze;return regeneratorRuntime.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(Ze=He.method.toLowerCase(),!ze.exclude.methods.includes(Ze)){ut.next=4;break}return ut.next=4,ze.store.removeItem(ze.uuid);case 4:case"end":return ut.stop()}},Pe)})),Se.apply(this,arguments)}function we(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(k.isFunction)(Pe.invalidate)?Pe.invalidate:me}function Ue(Pe){if(!Pe.params)return"";if(typeof URLSearchParams>"u")return JSON.stringify(Pe.params);var ze=Pe.params,He=Pe.params instanceof URLSearchParams;return He||(ze=new URLSearchParams,Object.keys(Pe.params).forEach(function(Ze){return ze.append(Ze,Pe.params[Ze])})),"?".concat(ze.toString())}B.default={read:ue,write:xe,key:re,invalidate:we,serializeQuery:Ue}},"./src/config.js":function(Z,B,S){S.r(B),S.d(B,"defaults",function(){return ne}),S.d(B,"makeConfig",function(){return me}),S.d(B,"mergeRequestConfig",function(){return Se}),S("./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var k=S("axios"),W=S.n(k),q=S("./src/memory.js"),Q=S("./src/cache.js");function ye(we,Ue){var Pe=Object.keys(we);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(we);Ue&&(ze=ze.filter(function(He){return Object.getOwnPropertyDescriptor(we,He).enumerable})),Pe.push.apply(Pe,ze)}return Pe}function _e(we){for(var Ue=1;Ue<arguments.length;Ue++){var Pe=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?ye(Object(Pe),!0).forEach(function(ze){xe(we,ze,Pe[ze])}):Object.getOwnPropertyDescriptors?Object.defineProperties(we,Object.getOwnPropertyDescriptors(Pe)):ye(Object(Pe)).forEach(function(ze){Object.defineProperty(we,ze,Object.getOwnPropertyDescriptor(Pe,ze))})}return we}function xe(we,Ue,Pe){return Ue in we?Object.defineProperty(we,Ue,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):we[Ue]=Pe,we}var te=function(){},ue=function(){for(var Ue,Pe=arguments.length,ze=new Array(Pe),He=0;He<Pe;He++)ze[He]=arguments[He];return(Ue=console).log.apply(Ue,["[axios-cache-adapter]"].concat(ze))},ne={cache:{maxAge:0,limit:!1,store:null,key:null,invalidate:null,exclude:{paths:[],query:!0,filter:null,methods:["post","patch","put","delete"]},adapter:W.a.defaults.adapter,clearOnStale:!0,clearOnError:!0,readOnError:!1,readHeaders:!1,debug:!1,ignoreCache:!1},axios:{cache:{maxAge:15*60*1e3}}},re=["limit","store","adapter","uuid","acceptStale"],me=function(){var Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=_e(_e(_e({},ne.cache),Ue),{},{exclude:_e(_e({},ne.cache.exclude),Ue.exclude)});return Pe.key=Object(Q.key)(Pe),Pe.invalidate=Object(Q.invalidate)(Pe),Pe.debug!==!1?Pe.debug=typeof Pe.debug=="function"?Pe.debug:ue:Pe.debug=te,Pe.store||(Pe.store=new q.default),Pe.debug("Global cache config",Pe),Pe},Se=function(Ue,Pe){var ze=Pe.cache||{};ze&&re.forEach(function(Ze){return ze[Ze]?delete ze[Ze]:void 0});var He=_e(_e(_e({},Ue),ze),{},{exclude:_e(_e({},Ue.exclude),ze.exclude)});return He.debug===!0&&(He.debug=ue),ze.key&&(He.key=Object(Q.key)(ze)),He.uuid=He.key(Pe),Ue.debug("Request config for ".concat(Pe.url),He),He};B.default={defaults:ne,makeConfig:me,mergeRequestConfig:Se}},"./src/exclude.js":function(Z,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/core-js/modules/es7.array.includes.js"),S("./node_modules/core-js/modules/es6.string.includes.js");var k=S("./src/utilities.js");function W(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Q=arguments.length>1?arguments[1]:void 0,ye=q.exclude,_e=ye===void 0?{}:ye,xe=q.debug,te=Q.method.toLowerCase();if(te==="head"||_e.methods.includes(te))return xe("Excluding request by HTTP method ".concat(Q.url)),!0;if(typeof _e.filter=="function"&&_e.filter(Q))return xe("Excluding request by filter ".concat(Q.url)),!0;var ue=/\?.*$/.test(Q.url)||Object(k.isObject)(Q.params)&&Object.keys(Q.params).length!==0||typeof URLSearchParams<"u"&&Q.params instanceof URLSearchParams;if(_e.query&&ue)return xe("Excluding request by query ".concat(Q.url)),!0;var ne=_e.paths||[],re=ne.some(function(me){return Q.url.match(me)});return re?(xe("Excluding request by url match ".concat(Q.url)),!0):!1}B.default=W},"./src/index.node.js":function(Z,B,S){S.r(B);var k=S("./src/api.js");S.d(B,"setup",function(){return k.setup}),S.d(B,"setupCache",function(){return k.setupCache}),S.d(B,"serializeQuery",function(){return k.serializeQuery});var W=S("./src/redis.js");S.d(B,"RedisStore",function(){return W.default});var q=S("./src/redis-default.js");S.d(B,"RedisDefaultStore",function(){return q.default}),B.default={setup:k.setup,setupCache:k.setupCache,serializeQuery:k.serializeQuery,RedisStore:W.default,RedisDefaultStore:q.default}},"./src/limit.js":function(Z,B,S){S.r(B),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function k(ye,_e,xe,te,ue,ne,re){try{var me=ye[ne](re),Se=me.value}catch(we){xe(we);return}me.done?_e(Se):Promise.resolve(Se).then(te,ue)}function W(ye){return function(){var _e=this,xe=arguments;return new Promise(function(te,ue){var ne=ye.apply(_e,xe);function re(Se){k(ne,te,ue,re,me,"next",Se)}function me(Se){k(ne,te,ue,re,me,"throw",Se)}re(void 0)})}}function q(ye){return Q.apply(this,arguments)}function Q(){return Q=W(regeneratorRuntime.mark(function ye(_e){var xe,te;return regeneratorRuntime.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,_e.store.length();case 2:if(xe=ne.sent,!(xe<_e.limit)){ne.next=5;break}return ne.abrupt("return");case 5:return _e.debug("Current store size: ".concat(xe)),ne.next=8,_e.store.iterate(function(re,me){te||(te={value:re,key:me}),re.expires<te.value.expires&&(te={value:re,key:me})});case 8:if(!te){ne.next=12;break}return _e.debug("Removing item: ".concat(te.key)),ne.next=12,_e.store.removeItem(te.key);case 12:case"end":return ne.stop()}},ye)})),Q.apply(this,arguments)}B.default=q},"./src/memory.js":function(Z,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js");var k=S("./src/utilities.js");function W(te,ue,ne,re,me,Se,we){try{var Ue=te[Se](we),Pe=Ue.value}catch(ze){ne(ze);return}Ue.done?ue(Pe):Promise.resolve(Pe).then(re,me)}function q(te){return function(){var ue=this,ne=arguments;return new Promise(function(re,me){var Se=te.apply(ue,ne);function we(Pe){W(Se,re,me,we,Ue,"next",Pe)}function Ue(Pe){W(Se,re,me,we,Ue,"throw",Pe)}we(void 0)})}}function Q(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function ye(te,ue){for(var ne=0;ne<ue.length;ne++){var re=ue[ne];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(te,re.key,re)}}function _e(te,ue,ne){return ue&&ye(te.prototype,ue),ne&&ye(te,ne),te}var xe=function(){function te(){Q(this,te),this.store={}}return _e(te,[{key:"getItem",value:function(){var ue=q(regeneratorRuntime.mark(function re(me){var Se;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Se=this.store[me]||null,Ue.abrupt("return",JSON.parse(Se));case 2:case"end":return Ue.stop()}},re,this)}));function ne(re){return ue.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ue=q(regeneratorRuntime.mark(function re(me,Se){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return this.store[me]=JSON.stringify(Se),Ue.abrupt("return",Se);case 2:case"end":return Ue.stop()}},re,this)}));function ne(re,me){return ue.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ue=q(regeneratorRuntime.mark(function re(me){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:delete this.store[me];case 1:case"end":return we.stop()}},re,this)}));function ne(re){return ue.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ue=q(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:this.store={};case 1:case"end":return Se.stop()}},re,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ue=q(regeneratorRuntime.mark(function re(){return regeneratorRuntime.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.abrupt("return",Object.keys(this.store).length);case 1:case"end":return Se.stop()}},re,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"iterate",value:function(ne){return Promise.all(Object(k.mapObject)(this.store,ne))}}]),te}();B.default=xe},"./src/redis-default.js":function(Z,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var k=S("util");function W(te,ue,ne,re,me,Se,we){try{var Ue=te[Se](we),Pe=Ue.value}catch(ze){ne(ze);return}Ue.done?ue(Pe):Promise.resolve(Pe).then(re,me)}function q(te){return function(){var ue=this,ne=arguments;return new Promise(function(re,me){var Se=te.apply(ue,ne);function we(Pe){W(Se,re,me,we,Ue,"next",Pe)}function Ue(Pe){W(Se,re,me,we,Ue,"throw",Pe)}we(void 0)})}}function Q(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function ye(te,ue){for(var ne=0;ne<ue.length;ne++){var re=ue[ne];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(te,re.key,re)}}function _e(te,ue,ne){return ue&&ye(te.prototype,ue),ne&&ye(te,ne),te}var xe=function(){function te(ue){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q(this,te);var re=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ue.constructor.name!=="RedisClient")throw re}catch{throw re}this.client=ue,this.prefix=ne.prefix||"axios-cache",this.maxScanCount=ne.maxScanCount||1e3,this.getAsync=Object(k.promisify)(ue.get).bind(ue),this.psetexAsync=Object(k.promisify)(ue.psetex).bind(ue),this.delAsync=Object(k.promisify)(ue.del).bind(ue),this.scanAsync=Object(k.promisify)(ue.scan).bind(ue)}return _e(te,[{key:"calculateTTL",value:function(ne){var re=Date.now();return ne.expires&&ne.expires>re?ne.expires-re:-1}},{key:"transformKey",value:function(ne){return this.prefix+"_"+ne}},{key:"getItem",value:function(){var ue=q(regeneratorRuntime.mark(function re(me){var Se;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.getAsync(this.transformKey(me));case 2:if(Ue.t0=Ue.sent,Ue.t0){Ue.next=5;break}Ue.t0=null;case 5:return Se=Ue.t0,Ue.abrupt("return",JSON.parse(Se));case 7:case"end":return Ue.stop()}},re,this)}));function ne(re){return ue.apply(this,arguments)}return ne}()},{key:"setItem",value:function(){var ue=q(regeneratorRuntime.mark(function re(me,Se){var we,Ue;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(we=this.transformKey(me),Ue=this.calculateTTL(Se),!(Ue>0)){ze.next=5;break}return ze.next=5,this.psetexAsync(we,Ue,JSON.stringify(Se));case 5:return ze.abrupt("return",Se);case 6:case"end":return ze.stop()}},re,this)}));function ne(re,me){return ue.apply(this,arguments)}return ne}()},{key:"removeItem",value:function(){var ue=q(regeneratorRuntime.mark(function re(me){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.transformKey(me));case 2:case"end":return we.stop()}},re,this)}));function ne(re){return ue.apply(this,arguments)}return ne}()},{key:"scan",value:function(){var ue=q(regeneratorRuntime.mark(function re(me){var Se,we;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:Se="0";case 1:return Pe.next=3,this.scanAsync(Se,"MATCH",this.transformKey("*"),"COUNT",this.maxScanCount);case 3:return we=Pe.sent,Se=we[0],Pe.next=7,me(we[1]);case 7:if(Se!=="0"){Pe.next=1;break}case 8:case"end":return Pe.stop()}},re,this)}));function ne(re){return ue.apply(this,arguments)}return ne}()},{key:"clear",value:function(){var ue=q(regeneratorRuntime.mark(function re(){var me=this;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.scan(function(Ue){return me.delAsync(Ue)});case 2:case"end":return we.stop()}},re,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"length",value:function(){var ue=q(regeneratorRuntime.mark(function re(){var me;return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return me=0,we.next=3,this.scan(function(Ue){me+=Ue.length});case 3:return we.abrupt("return",me);case 4:case"end":return we.stop()}},re,this)}));function ne(){return ue.apply(this,arguments)}return ne}()},{key:"iterate",value:function(){var ue=q(regeneratorRuntime.mark(function re(me){var Se=this,we,Ue;return regeneratorRuntime.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return Ue=function(){return Ue=q(regeneratorRuntime.mark(function Ze(rt){var ut,gt;return regeneratorRuntime.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.getAsync(rt);case 2:if(ht.t0=ht.sent,ht.t0){ht.next=5;break}ht.t0=null;case 5:return ut=ht.t0,gt=JSON.parse(ut),ht.next=9,me(gt,rt);case 9:return ht.abrupt("return",ht.sent);case 10:case"end":return ht.stop()}},Ze,this)})),Ue.apply(this,arguments)},we=function(Ze){return Ue.apply(this,arguments)},ze.next=4,this.scan(function(He){return Promise.all(He.map(we.bind(Se)))});case 4:return ze.abrupt("return",Promise.resolve([]));case 5:case"end":return ze.stop()}},re,this)}));function ne(re){return ue.apply(this,arguments)}return ne}()}]),te}();B.default=xe},"./src/redis.js":function(Z,B,S){S.r(B),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js"),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.function.bind.js"),S("./node_modules/core-js/modules/es6.function.name.js");var k=S("util"),W=S("./src/utilities.js");function q(ue,ne,re,me,Se,we,Ue){try{var Pe=ue[we](Ue),ze=Pe.value}catch(He){re(He);return}Pe.done?ne(ze):Promise.resolve(ze).then(me,Se)}function Q(ue){return function(){var ne=this,re=arguments;return new Promise(function(me,Se){var we=ue.apply(ne,re);function Ue(ze){q(we,me,Se,Ue,Pe,"next",ze)}function Pe(ze){q(we,me,Se,Ue,Pe,"throw",ze)}Ue(void 0)})}}function ye(ue,ne){if(!(ue instanceof ne))throw new TypeError("Cannot call a class as a function")}function _e(ue,ne){for(var re=0;re<ne.length;re++){var me=ne[re];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(ue,me.key,me)}}function xe(ue,ne,re){return ne&&_e(ue.prototype,ne),re&&_e(ue,re),ue}var te=function(){function ue(ne){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"axios-cache";ye(this,ue);var me=new TypeError("First parameter must be a valid RedisClient instance.");try{if(ne.constructor.name!=="RedisClient")throw me}catch{throw me}this.client=ne,this.HASH_KEY=re,this.hgetAsync=Object(k.promisify)(ne.hget).bind(ne),this.hsetAsync=Object(k.promisify)(ne.hset).bind(ne),this.hdelAsync=Object(k.promisify)(ne.hdel).bind(ne),this.delAsync=Object(k.promisify)(ne.del).bind(ne),this.hlenAsync=Object(k.promisify)(ne.hlen).bind(ne),this.hgetallAsync=Object(k.promisify)(ne.hgetall).bind(ne)}return xe(ue,[{key:"getItem",value:function(){var ne=Q(regeneratorRuntime.mark(function me(Se){var we;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetAsync(this.HASH_KEY,Se);case 2:if(Pe.t0=Pe.sent,Pe.t0){Pe.next=5;break}Pe.t0=null;case 5:return we=Pe.t0,Pe.abrupt("return",JSON.parse(we));case 7:case"end":return Pe.stop()}},me,this)}));function re(me){return ne.apply(this,arguments)}return re}()},{key:"setItem",value:function(){var ne=Q(regeneratorRuntime.mark(function me(Se,we){return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hsetAsync(this.HASH_KEY,Se,JSON.stringify(we));case 2:return Pe.abrupt("return",we);case 3:case"end":return Pe.stop()}},me,this)}));function re(me,Se){return ne.apply(this,arguments)}return re}()},{key:"removeItem",value:function(){var ne=Q(regeneratorRuntime.mark(function me(Se){return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ue.next=2,this.hdelAsync(this.HASH_KEY,Se);case 2:case"end":return Ue.stop()}},me,this)}));function re(me){return ne.apply(this,arguments)}return re}()},{key:"clear",value:function(){var ne=Q(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,this.delAsync(this.HASH_KEY);case 2:case"end":return we.stop()}},me,this)}));function re(){return ne.apply(this,arguments)}return re}()},{key:"length",value:function(){var ne=Q(regeneratorRuntime.mark(function me(){return regeneratorRuntime.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.abrupt("return",this.hlenAsync(this.HASH_KEY));case 1:case"end":return we.stop()}},me,this)}));function re(){return ne.apply(this,arguments)}return re}()},{key:"iterate",value:function(){var ne=Q(regeneratorRuntime.mark(function me(Se){var we;return regeneratorRuntime.wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,this.hgetallAsync(this.HASH_KEY);case 2:return we=Pe.sent,Pe.abrupt("return",Promise.all(Object(W.mapObject)(we,Se)));case 4:case"end":return Pe.stop()}},me,this)}));function re(me){return ne.apply(this,arguments)}return re}()}]),ue}();B.default=te},"./src/request.js":function(Z,B,S){S.r(B),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var k=S("./src/response.js"),W=S("./src/exclude.js"),q=S("./src/cache.js");function Q(te,ue,ne,re,me,Se,we){try{var Ue=te[Se](we),Pe=Ue.value}catch(ze){ne(ze);return}Ue.done?ue(Pe):Promise.resolve(Pe).then(re,me)}function ye(te){return function(){var ue=this,ne=arguments;return new Promise(function(re,me){var Se=te.apply(ue,ne);function we(Pe){Q(Se,re,me,we,Ue,"next",Pe)}function Ue(Pe){Q(Se,re,me,we,Ue,"throw",Pe)}we(void 0)})}}function _e(te,ue){return xe.apply(this,arguments)}function xe(){return xe=ye(regeneratorRuntime.mark(function te(ue,ne){var re,me,Se;return regeneratorRuntime.wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Se=function(){return ue.excludeFromCache=!0,{config:ue,next:re}},ue.debug("uuid",ue.uuid),re=function(){for(var ze=arguments.length,He=new Array(ze),Ze=0;Ze<ze;Ze++)He[Ze]=arguments[Ze];return k.default.apply(void 0,[ue,ne].concat(He))},Ue.next=5,ue.invalidate(ue,ne);case 5:if(!Object(W.default)(ue,ne)){Ue.next=7;break}return Ue.abrupt("return",Se());case 7:return Ue.prev=7,Ue.next=10,Object(q.read)(ue,ne);case 10:return me=Ue.sent,me.config=ne,me.request={fromCache:!0},Ue.abrupt("return",{config:ue,next:me});case 16:if(Ue.prev=16,Ue.t0=Ue.catch(7),!(ue.clearOnStale&&Ue.t0.reason==="cache-stale")){Ue.next=21;break}return Ue.next=21,ue.store.removeItem(ue.uuid);case 21:return Ue.abrupt("return",{config:ue,next:re});case 22:case"end":return Ue.stop()}},te,null,[[7,16]])})),xe.apply(this,arguments)}B.default=_e},"./src/response.js":function(Z,B,S){S.r(B),S("./node_modules/regenerator-runtime/runtime.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");var k=S("./src/limit.js"),W=S("./src/cache.js"),q=S("./node_modules/cache-control-esm/index.js");function Q(te,ue,ne,re,me,Se,we){try{var Ue=te[Se](we),Pe=Ue.value}catch(ze){ne(ze);return}Ue.done?ue(Pe):Promise.resolve(Pe).then(re,me)}function ye(te){return function(){var ue=this,ne=arguments;return new Promise(function(re,me){var Se=te.apply(ue,ne);function we(Pe){Q(Se,re,me,we,Ue,"next",Pe)}function Ue(Pe){Q(Se,re,me,we,Ue,"throw",Pe)}we(void 0)})}}function _e(te,ue,ne){return xe.apply(this,arguments)}function xe(){return xe=ye(regeneratorRuntime.mark(function te(ue,ne,re){var me,Se,we,Ue,Pe;return regeneratorRuntime.wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(me=re.request,Se=me===void 0?{}:me,we=re.headers,Ue=we===void 0?{}:we,!(["arraybuffer","blob"].indexOf(Se.responseType)>-1)){He.next=3;break}return He.abrupt("return",re);case 3:if(Pe={},ue.readHeaders&&(Ue["cache-control"]?(Pe=Object(q.parse)(Ue["cache-control"]),(Pe.noCache||Pe.noStore)&&(ue.excludeFromCache=!0)):Ue.expires?ue.expires=new Date(Ue.expires).getTime():ue.expires=new Date().getTime()),ue.excludeFromCache){He.next=15;break}if(Pe.maxAge||Pe.maxAge===0?ue.expires=Date.now()+Pe.maxAge*1e3:ue.readHeaders||(ue.expires=ue.maxAge===0?Date.now():Date.now()+ue.maxAge),!ue.limit){He.next=11;break}return ue.debug("Detected limit: ".concat(ue.limit)),He.next=11,Object(k.default)(ue);case 11:return He.next=13,Object(W.write)(ue,ne,re);case 13:He.next=16;break;case 15:re.request.excludedFromCache=!0;case 16:return He.abrupt("return",re);case 17:case"end":return He.stop()}},te)})),xe.apply(this,arguments)}B.default=_e},"./src/serialize.js":function(Z,B,S){S.r(B),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function k(Q,ye){if(Q==null)return{};var _e=W(Q,ye),xe,te;if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(Q);for(te=0;te<ue.length;te++)xe=ue[te],!(ye.indexOf(xe)>=0)&&Object.prototype.propertyIsEnumerable.call(Q,xe)&&(_e[xe]=Q[xe])}return _e}function W(Q,ye){if(Q==null)return{};var _e={},xe=Object.keys(Q),te,ue;for(ue=0;ue<xe.length;ue++)te=xe[ue],!(ye.indexOf(te)>=0)&&(_e[te]=Q[te]);return _e}function q(Q,ye,_e){if(_e.data)try{_e.data=JSON.parse(_e.data)}catch(te){Q.debug("Could not parse data as JSON",te)}_e.request,_e.config;var xe=k(_e,["request","config"]);return xe}B.default=q},"./src/utilities.js":function(Z,B,S){S.r(B),S.d(B,"isObject",function(){return W}),S.d(B,"getTag",function(){return q}),S.d(B,"isFunction",function(){return Q}),S.d(B,"isString",function(){return ye}),S.d(B,"mapObject",function(){return _e}),S("./node_modules/core-js/modules/es7.symbol.async-iterator.js"),S("./node_modules/core-js/modules/es6.symbol.js"),S("./node_modules/core-js/modules/es6.array.iterator.js"),S("./node_modules/core-js/modules/es6.object.to-string.js");function k(xe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(ue){return typeof ue}:k=function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue},k(xe)}function W(xe){var te=k(xe);return xe!=null&&(te==="object"||te==="function")}function q(xe){return xe===null?xe===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(xe)}function Q(xe){if(!W(xe))return!1;var te=q(xe);return te==="[object Function]"||te==="[object AsyncFunction]"||te==="[object GeneratorFunction]"||te==="[object Proxy]"}function ye(xe){var te=k(xe);return te==="string"||te==="object"&&xe!=null&&!Array.isArray(xe)&&q(xe)==="[object String]"}function _e(xe,te){return W(xe)?Object.keys(xe).map(function(ue){return te(xe[ue],ue)}):[]}},axios:function(Z,B){Z.exports=ie},util:function(Z,B){Z.exports=I.default}})})});const ee={zoomBase:10,tileUrl:"https://open-geocoding.github.io/open-reverse-geocoder-ja/tiles/{z}/{x}/{y}.pbf",layer:"japanese-admins"},Y=j.setupCache({maxAge:60*60*24*1e3}),de=w.default.create({adapter:Y.adapter}),G=async(V,U={})=>{const ie={...ee,...U},[Z,B]=i.lngLatToGoogle(V,ie.zoomBase),S=ie.tileUrl.replace("{z}",String(ie.zoomBase)).replace("{x}",String(Z)).replace("{y}",String(B)),k={code:"",prefecture:"",city:""};let W;try{const ye=await de.get(S,{responseType:"arraybuffer"});W=Buffer.from(ye.data,"binary")}catch(ye){throw new Error(ye)}const q=new y.VectorTile(new b.default(W));let Q=Object.keys(q.layers);return Array.isArray(Q)||(Q=[Q]),Q.forEach(ye=>{const _e=q.layers[ye];if(_e&&ie.layer===_e.name)for(let xe=0;xe<_e.length;xe++){const te=_e.feature(xe).toGeoJSON(Z,B,ie.zoomBase);Q.length>1&&(te.properties.vt_layer=ye);const ue={type:"FeatureCollection",features:[te]};t.geoContains(ue,V)&&(k.code=String(te.id).length===5?String(te.id):`0${String(te.id)}`,k.prefecture=te.properties.prefecture,k.city=te.properties.city)}}),k};e.openReverseGeocoder=G})(qC);const mR={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:province",displayName:"Province/Municipality/AR/SAR",placeholder:""},{key:"addr:city",displayName:"City/Prefecture/League",placeholder:""},{key:"addr:district",displayName:"District/County/Banner",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},gR={defaultComment:"Aktualisierte Adresse",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""},{key:"addr:suburb",displayName:"District/Suburb",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},yR={defaultComment:"",postcodeField:{key:"addr:postcode",displayName:"",placeholder:"101-0021"},mainFields:[{key:"addr:province",displayName:"",placeholder:"",adminLevel:4},{key:"addr:city",displayName:"23",placeholder:"",adminLevel:7},{key:"addr:suburb",displayName:"",placeholder:""},{key:"addr:quarter",displayName:"",placeholder:"",adminLevel:9}],detailFields:[{key:"addr:neighbourhood",displayName:"",placeholder:"1"},{key:"addr:block_number",displayName:"",placeholder:"17"},{key:"addr:housenumber",displayName:"",placeholder:"6",prefix:"-"}]},vR={defaultComment:" ",postcodeField:{key:"addr:postcode",displayName:"Postcode",placeholder:""},mainFields:[{key:"addr:city",displayName:"City",placeholder:""}],detailFields:[{key:"addr:street",displayName:"Street",placeholder:""},{key:"addr:housenumber",displayName:"House number",placeholder:""}]},jE={JPN:yR,CHN:mR,DEU:gR,KOR:vR};function lI(e,t,i){i===void 0&&(i={});var l={type:"Feature"};return(i.id===0||i.id)&&(l.id=i.id),i.bbox&&(l.bbox=i.bbox),l.properties=t||{},l.geometry=e,l}function _R(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!DE(e[0])||!DE(e[1]))throw new Error("coordinates must contain numbers");var l={type:"Point",coordinates:e};return lI(l,t,i)}function xR(e,t,i){i===void 0&&(i={});for(var l=0,c=e;l<c.length;l++){var d=c[l];if(d.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<d[d.length-1].length;y++)if(d[d.length-1][y]!==d[0][y])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return lI(a,t,i)}function DE(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function uI(e,t,i){if(e!==null)for(var l,c,d,y,a,b,w,I=0,C=0,L,j=e.type,ee=j==="FeatureCollection",Y=j==="Feature",de=ee?e.features.length:1,G=0;G<de;G++){w=ee?e.features[G].geometry:Y?e.geometry:e,L=w?w.type==="GeometryCollection":!1,a=L?w.geometries.length:1;for(var V=0;V<a;V++){var U=0,ie=0;if(y=L?w.geometries[V]:w,y!==null){b=y.coordinates;var Z=y.type;switch(I=i&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(t(b,C,G,U,ie)===!1)return!1;C++,U++;break;case"LineString":case"MultiPoint":for(l=0;l<b.length;l++){if(t(b[l],C,G,U,ie)===!1)return!1;C++,Z==="MultiPoint"&&U++}Z==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(l=0;l<b.length;l++){for(c=0;c<b[l].length-I;c++){if(t(b[l][c],C,G,U,ie)===!1)return!1;C++}Z==="MultiLineString"&&U++,Z==="Polygon"&&ie++}Z==="Polygon"&&U++;break;case"MultiPolygon":for(l=0;l<b.length;l++){for(ie=0,c=0;c<b[l].length;c++){for(d=0;d<b[l][c].length-I;d++){if(t(b[l][c][d],C,G,U,ie)===!1)return!1;C++}ie++}U++}break;case"GeometryCollection":for(l=0;l<y.geometries.length;l++)if(uI(y.geometries[l],t,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function wR(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bR(e){return e.type==="Feature"?e.geometry:e}function ER(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var l=wR(e),c=bR(t),d=c.type,y=t.bbox,a=c.coordinates;if(y&&SR(l,y)===!1)return!1;d==="Polygon"&&(a=[a]);for(var b=!1,w=0;w<a.length&&!b;w++)if(BE(l,a[w][0],i.ignoreBoundary)){for(var I=!1,C=1;C<a[w].length&&!I;)BE(l,a[w][C],!i.ignoreBoundary)&&(I=!0),C++;I||(b=!0)}return b}function BE(e,t,i){var l=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var c=0,d=t.length-1;c<t.length;d=c++){var y=t[c][0],a=t[c][1],b=t[d][0],w=t[d][1],I=e[1]*(y-b)+a*(b-e[0])+w*(e[0]-y)===0&&(y-e[0])*(b-e[0])<=0&&(a-e[1])*(w-e[1])<=0;if(I)return!i;var C=a>e[1]!=w>e[1]&&e[0]<(b-y)*(e[1]-a)/(w-a)+y;C&&(l=!l)}return l}function SR(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function TR(e,t){t===void 0&&(t={});var i=0,l=0,c=0;return uI(e,function(d){i+=d[0],l+=d[1],c++},!0),_R([i/c,l/c],t.properties)}const CR=()=>{const[e,t]=_t.useState(!1);return{detectCountry:_t.useCallback(async(l,c)=>{t(!0);const y=await(await fetch("https://raw.githubusercontent.com/nvkelso/natural-earth-vector/master/geojson/ne_10m_admin_0_countries.geojson")).json();for(const a of y.features)if(ER([l,c],a.geometry))return console.log("country: ",a.properties),t(!1),a;t(!1)},[]),loadingCountry:e}},B0=({feature:e,fieldOption:t,suggestList:i,onChange:l})=>{var a;const[c,d]=_t.useState((a=e.properties)==null?void 0:a[t.key]);_t.useEffect(()=>{var b;d((b=e.properties)==null?void 0:b[t.key])},[e]);const y=_t.useCallback(b=>{d(b.currentTarget.value),l&&l(b)},[]);return mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsxs("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:t.key,children:[t.displayName," (",t.key,")"]}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:t.key,name:t.key,type:"text",autoComplete:"on",list:t.key+"-list",placeholder:t.placeholder,value:c,onChange:y}),mt.jsx("datalist",{id:t.key+"-list",children:i&&i.map(b=>{if(parseInt(b.tags.admin_level)===t.adminLevel)return mt.jsx("option",{value:b.tags.name},b.id);if(b.type==="node"&&t.adminLevel===9)return mt.jsx("option",{value:b.tags.name},b.id)})})]})},AR=({feature:e,fields:t})=>e.properties?mt.jsxs(mt.Fragment,{children:[t.postcodeField&&mt.jsx("span",{children:e.properties[t.postcodeField.key]})," ",t.mainFields&&t.mainFields.map(i=>{var l;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(l=e.properties)==null?void 0:l[i.key]})," "]})}),t.detailFields&&t.detailFields.map(i=>{var l;return mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{children:(l=e.properties)==null?void 0:l[i.key]})," "]})})]}):null,IR=({placeholder:e,defaultValue:t})=>{const[i,l]=_t.useState(t);_t.useEffect(()=>{l(t)},[t]);const c=_t.useCallback(d=>{l(d.currentTarget.value)},[]);return mt.jsxs("div",{className:"w-full md:w-1/3 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"comment",children:"Comment for this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"comment",name:"comment",type:"text",placeholder:e,value:i,required:!0,onChange:c})]})};var dg={exports:{}};/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="node" include="clone,merge,isEmpty,isArray,compact,each" -d`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dg.exports;(function(e,t){(function(){var i,l="4.15.0",c=200,d="Expected a function",y="__lodash_hash_undefined__",a=1,b=2,w=1/0,I=9007199254740991,C="[object Arguments]",L="[object Array]",j="[object Boolean]",ee="[object Date]",Y="[object Error]",de="[object Function]",G="[object GeneratorFunction]",V="[object Map]",U="[object Number]",ie="[object Object]",Z="[object Promise]",B="[object RegExp]",S="[object Set]",k="[object String]",W="[object Symbol]",q="[object WeakMap]",Q="[object ArrayBuffer]",ye="[object DataView]",_e="[object Float32Array]",xe="[object Float64Array]",te="[object Int8Array]",ue="[object Int16Array]",ne="[object Int32Array]",re="[object Uint8Array]",me="[object Uint8ClampedArray]",Se="[object Uint16Array]",we="[object Uint32Array]",Ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/,ze=/^\./,He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/[\\^$.*+?()[\]{}|]/g,rt=/\\(\\)?/g,ut=/\w*$/,gt=/^\[object .+?Constructor\]$/,Ct=/^(?:0|[1-9]\d*)$/,ht={};ht[_e]=ht[xe]=ht[te]=ht[ue]=ht[ne]=ht[re]=ht[me]=ht[Se]=ht[we]=!0,ht[C]=ht[L]=ht[Q]=ht[j]=ht[ye]=ht[ee]=ht[Y]=ht[de]=ht[V]=ht[U]=ht[ie]=ht[B]=ht[S]=ht[k]=ht[q]=!1;var Et={};Et[C]=Et[L]=Et[Q]=Et[ye]=Et[j]=Et[ee]=Et[_e]=Et[xe]=Et[te]=Et[ue]=Et[ne]=Et[V]=Et[U]=Et[ie]=Et[B]=Et[S]=Et[k]=Et[W]=Et[re]=Et[me]=Et[Se]=Et[we]=!0,Et[Y]=Et[de]=Et[q]=!1;var $t=typeof Dl=="object"&&Dl&&Dl.Object===Object&&Dl,Nt=typeof self=="object"&&self&&self.Object===Object&&self,hn=$t||Nt||Function("return this")(),Tn=t&&!t.nodeType&&t,En=Tn&&!0&&e&&!e.nodeType&&e,rn=En&&En.exports===Tn,xn=rn&&$t.process,Te=function(){try{return xn&&xn.binding("util")}catch{}}(),M=Te&&Te.isTypedArray;function R($,ge){return $.set(ge[0],ge[1]),$}function ve($,ge){return $.add(ge),$}function Ne($,ge,De){switch(De.length){case 0:return $.call(ge);case 1:return $.call(ge,De[0]);case 2:return $.call(ge,De[0],De[1]);case 3:return $.call(ge,De[0],De[1],De[2])}return $.apply(ge,De)}function qe($,ge){for(var De=-1,ot=$?$.length:0;++De<ot&&ge($[De],De,$)!==!1;);return $}function lt($,ge){for(var De=-1,ot=ge.length,Lt=$.length;++De<ot;)$[Lt+De]=ge[De];return $}function le($,ge,De,ot){var Lt=-1,Tt=$?$.length:0;for(ot&&Tt&&(De=$[++Lt]);++Lt<Tt;)De=ge(De,$[Lt],Lt,$);return De}function F($,ge){for(var De=-1,ot=$?$.length:0;++De<ot;)if(ge($[De],De,$))return!0;return!1}function N($){return function(ge){return ge==null?i:ge[$]}}function Ee($,ge){for(var De=-1,ot=Array($);++De<$;)ot[De]=ge(De);return ot}function Ge($){return function(ge){return $(ge)}}function tt($,ge){return $==null?i:$[ge]}function Ve($){var ge=!1;if($!=null&&typeof $.toString!="function")try{ge=!!($+"")}catch{}return ge}function Dt($){var ge=-1,De=Array($.size);return $.forEach(function(ot,Lt){De[++ge]=[Lt,ot]}),De}function vn($,ge){return function(De){return $(ge(De))}}function Sn($){var ge=-1,De=Array($.size);return $.forEach(function(ot){De[++ge]=ot}),De}var Mn=Array.prototype,ft=Function.prototype,cn=Object.prototype,fn=hn["__core-js_shared__"],Er=function(){var $=/[^.]+$/.exec(fn&&fn.keys&&fn.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}(),Xr=ft.toString,Qt=cn.hasOwnProperty,co=Xr.call(Object),ke=cn.toString,oe=RegExp("^"+Xr.call(Qt).replace(Ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=rn?hn.Buffer:i,fe=hn.Symbol,be=hn.Uint8Array,Le=vn(Object.getPrototypeOf,Object),Xe=Object.create,$e=cn.propertyIsEnumerable,je=Mn.splice,Ye=Object.getOwnPropertySymbols,ct=se?se.isBuffer:i,dt=vn(Object.keys,Object),yt=Math.max,Xt=Ho(hn,"DataView"),nn=Ho(hn,"Map"),Bt=Ho(hn,"Promise"),Wt=Ho(hn,"Set"),mn=Ho(hn,"WeakMap"),On=Ho(Object,"create"),Wn=!$e.call({valueOf:1},"valueOf"),Rn=ho(Xt),kn=ho(nn),qr=ho(Bt),Jn=ho(Wt),pr=ho(mn),or=fe?fe.prototype:i,Ci=or?or.valueOf:i,au=or?or.toString:i;function _n(){}function Go($){var ge=-1,De=$?$.length:0;for(this.clear();++ge<De;){var ot=$[ge];this.set(ot[0],ot[1])}}function Fh(){this.__data__=On?On(null):{}}function Zn($){return this.has($)&&delete this.__data__[$]}function Ja($){var ge=this.__data__;if(On){var De=ge[$];return De===y?i:De}return Qt.call(ge,$)?ge[$]:i}function js($){var ge=this.__data__;return On?ge[$]!==i:Qt.call(ge,$)}function fi($,ge){var De=this.__data__;return De[$]=On&&ge===i?y:ge,this}Go.prototype.clear=Fh,Go.prototype.delete=Zn,Go.prototype.get=Ja,Go.prototype.has=js,Go.prototype.set=fi;function mr($){var ge=-1,De=$?$.length:0;for(this.clear();++ge<De;){var ot=$[ge];this.set(ot[0],ot[1])}}function Oh(){this.__data__=[]}function Br($){var ge=this.__data__,De=rl(ge,$);if(De<0)return!1;var ot=ge.length-1;return De==ot?ge.pop():je.call(ge,De,1),!0}function ri($){var ge=this.__data__,De=rl(ge,$);return De<0?i:ge[De][1]}function Qa($){return rl(this.__data__,$)>-1}function Zo($,ge){var De=this.__data__,ot=rl(De,$);return ot<0?De.push([$,ge]):De[ot][1]=ge,this}mr.prototype.clear=Oh,mr.prototype.delete=Br,mr.prototype.get=ri,mr.prototype.has=Qa,mr.prototype.set=Zo;function on($){var ge=-1,De=$?$.length:0;for(this.clear();++ge<De;){var ot=$[ge];this.set(ot[0],ot[1])}}function ya(){this.__data__={hash:new Go,map:new(nn||mr),string:new Go}}function Eo($){return ba(this,$).delete($)}function gr($){return ba(this,$).get($)}function va($){return ba(this,$).has($)}function Ai($,ge){return ba(this,$).set($,ge),this}on.prototype.clear=ya,on.prototype.delete=Eo,on.prototype.get=gr,on.prototype.has=va,on.prototype.set=Ai;function _a($){var ge=-1,De=$?$.length:0;for(this.__data__=new on;++ge<De;)this.add($[ge])}function So($){return this.__data__.set($,y),this}function ac($){return this.__data__.has($)}_a.prototype.add=_a.prototype.push=So,_a.prototype.has=ac;function Ii($){this.__data__=new mr($)}function el(){this.__data__=new mr}function tl($){return this.__data__.delete($)}function Wo($){return this.__data__.get($)}function nl($){return this.__data__.has($)}function xa($,ge){var De=this.__data__;if(De instanceof mr){var ot=De.__data__;if(!nn||ot.length<c-1)return ot.push([$,ge]),this;De=this.__data__=new on(ot)}return De.set($,ge),this}Ii.prototype.clear=el,Ii.prototype.delete=tl,Ii.prototype.get=Wo,Ii.prototype.has=nl,Ii.prototype.set=xa;function lc($,ge){var De=Jr($)||qo($)?Ee($.length,String):[],ot=De.length,Lt=!!ot;for(var Tt in $)(ge||Qt.call($,Tt))&&!(Lt&&(Tt=="length"||ln(Tt,ot)))&&De.push(Tt);return De}function lu($,ge,De){(De!==i&&!Gi($[ge],De)||typeof ge=="number"&&De===i&&!(ge in $))&&($[ge]=De)}function Ds($,ge,De){var ot=$[ge];(!(Qt.call($,ge)&&Gi(ot,De))||De===i&&!(ge in $))&&($[ge]=De)}function rl($,ge){for(var De=$.length;De--;)if(Gi($[De][0],ge))return De;return-1}function uc($,ge){return $&&gu(ge,Mi(ge),$)}function Bs($,ge,De,ot,Lt,Tt,Gt){var qt;if(ot&&(qt=Tt?ot($,Lt,Tt,Gt):ot($)),qt!==i)return qt;if(!mi($))return $;var gn=Jr($);if(gn){if(qt=Zs($),!ge)return mc($,qt)}else{var Bn=pi($),Dn=Bn==de||Bn==G;if(vl($))return du($,ge);if(Bn==ie||Bn==C||Dn&&!Tt){if(Ve($))return Tt?$:{};if(qt=yc(Dn?{}:$),!ge)return Rh($,uc(qt,$))}else{if(!Et[Bn])return Tt?$:{};qt=_u($,Bn,Bs,ge)}}Gt||(Gt=new Ii);var Nn=Gt.get($);if(Nn)return Nn;if(Gt.set($,qt),!gn)var $n=De?vu($):Mi($);return qe($n||$,function(Nr,Hn){$n&&(Hn=Nr,Nr=$[Hn]),Ds(qt,Hn,Bs(Nr,ge,De,ot,Hn,$,Gt))}),qt}function uu($){return mi($)?Xe($):{}}var cc=Dh(hc),cu=Bh();function hc($,ge){return $&&cu($,ge,Mi)}function il($,ge){ge=Cn(ge,$)?[ge]:cl(ge);for(var De=0,ot=ge.length;$!=null&&De<ot;)$=$[gs(ge[De++])];return De&&De==ot?$:i}function hu($,ge,De){var ot=ge($);return Jr($)?ot:lt(ot,De($))}function fc($){return ke.call($)}function fs($,ge){return $!=null&&ge in Object($)}function Ns($,ge,De,ot,Lt){return $===ge?!0:$==null||ge==null||!mi($)&&!fo(ge)?$!==$&&ge!==ge:Pi($,ge,Ns,De,ot,Lt)}function Pi($,ge,De,ot,Lt,Tt){var Gt=Jr($),qt=Jr(ge),gn=L,Bn=L;Gt||(gn=pi($),gn=gn==C?ie:gn),qt||(Bn=pi(ge),Bn=Bn==C?ie:Bn);var Dn=gn==ie&&!Ve($),Nn=Bn==ie&&!Ve(ge),$n=gn==Bn;if($n&&!Dn)return Tt||(Tt=new Ii),Gt||Xs($)?fl($,ge,De,ot,Lt,Tt):dl($,ge,gn,De,ot,Lt,Tt);if(!(Lt&b)){var Nr=Dn&&Qt.call($,"__wrapped__"),Hn=Nn&&Qt.call(ge,"__wrapped__");if(Nr||Hn){var ki=Nr?$.value():$,Zi=Hn?ge.value():ge;return Tt||(Tt=new Ii),De(ki,Zi,ot,Lt,Tt)}}return $n?(Tt||(Tt=new Ii),yu($,ge,De,ot,Lt,Tt)):!1}function ol($,ge,De,ot){var Lt=De.length,Tt=Lt,Gt=!ot;if($==null)return!Tt;for($=Object($);Lt--;){var qt=De[Lt];if(Gt&&qt[2]?qt[1]!==$[qt[0]]:!(qt[0]in $))return!1}for(;++Lt<Tt;){qt=De[Lt];var gn=qt[0],Bn=$[gn],Dn=qt[1];if(Gt&&qt[2]){if(Bn===i&&!(gn in $))return!1}else{var Nn=new Ii;if(ot)var $n=ot(Bn,Dn,gn,$,ge,Nn);if(!($n===i?Ns(Dn,Bn,ot,a|b,Nn):$n))return!1}}return!0}function sl($){if(!mi($)||qn($))return!1;var ge=Hs($)||Ve($)?oe:gt;return ge.test(ho($))}function wa($){return fo($)&&Ca($.length)&&!!ht[ke.call($)]}function ds($){return typeof $=="function"?$:$==null?Co:typeof $=="object"?Jr($)?al($[0],$[1]):ms($):bu($)}function ps($){if(!Kn($))return dt($);var ge=[];for(var De in Object($))Qt.call($,De)&&De!="constructor"&&ge.push(De);return ge}function Ln($){if(!mi($))return Nh($);var ge=Kn($),De=[];for(var ot in $)ot=="constructor"&&(ge||!Qt.call($,ot))||De.push(ot);return De}function ms($){var ge=gc($);return ge.length==1&&ge[0][2]?gl(ge[0][0],ge[0][1]):function(De){return De===$||ol(De,$,ge)}}function al($,ge){return Cn($)&&Ea(ge)?gl(gs($),ge):function(De){var ot=Kr(De,$);return ot===i&&ot===ge?qs(De,$):Ns(ge,ot,i,a|b)}}function ii($,ge,De,ot,Lt){if($!==ge){if(!(Jr(ge)||Xs(ge)))var Tt=Ln(ge);qe(Tt||ge,function(Gt,qt){if(Tt&&(qt=Gt,Gt=ge[qt]),mi(Gt))Lt||(Lt=new Ii),di($,ge,qt,De,ii,ot,Lt);else{var gn=ot?ot($[qt],Gt,qt+"",$,ge,Lt):i;gn===i&&(gn=Gt),lu($,qt,gn)}})}}function di($,ge,De,ot,Lt,Tt,Gt){var qt=$[De],gn=ge[De],Bn=Gt.get(gn);if(Bn){lu($,De,Bn);return}var Dn=Tt?Tt(qt,gn,De+"",$,ge,Gt):i,Nn=Dn===i;Nn&&(Dn=gn,Jr(gn)||Xs(gn)?Jr(qt)?Dn=qt:wu(qt)?Dn=mc(qt):(Nn=!1,Dn=Bs(gn,!0)):ys(gn)||qo(gn)?qo(qt)?Dn=sr(qt):!mi(qt)||ot&&Hs(qt)?(Nn=!1,Dn=Bs(gn,!0)):Dn=qt:Nn=!1),Nn&&(Gt.set(gn,Dn),Lt(Dn,gn,ot,Tt,Gt),Gt.delete(gn)),lu($,De,Dn)}function fu($){return function(ge){return il(ge,$)}}function ll($,ge){return ge=yt(ge===i?$.length-1:ge,0),function(){for(var De=arguments,ot=-1,Lt=yt(De.length-ge,0),Tt=Array(Lt);++ot<Lt;)Tt[ot]=De[ge+ot];ot=-1;for(var Gt=Array(ge+1);++ot<ge;)Gt[ot]=De[ot];return Gt[ge]=Tt,Ne($,this,Gt)}}function ul($){if(typeof $=="string")return $;if(xl($))return au?au.call($):"";var ge=$+"";return ge=="0"&&1/$==-w?"-0":ge}function cl($){return Jr($)?$:xu($)}function du($,ge){if(ge)return $.slice();var De=new $.constructor($.length);return $.copy(De),De}function Us($){var ge=new $.constructor($.byteLength);return new be(ge).set(new be($)),ge}function pu($,ge){var De=ge?Us($.buffer):$.buffer;return new $.constructor(De,$.byteOffset,$.byteLength)}function mu($,ge,De){var ot=ge?De(Dt($),!0):Dt($);return le(ot,R,new $.constructor)}function hl($){var ge=new $.constructor($.source,ut.exec($));return ge.lastIndex=$.lastIndex,ge}function dc($,ge,De){var ot=ge?De(Sn($),!0):Sn($);return le(ot,ve,new $.constructor)}function pc($){return Ci?Object(Ci.call($)):{}}function $s($,ge){var De=ge?Us($.buffer):$.buffer;return new $.constructor(De,$.byteOffset,$.length)}function mc($,ge){var De=-1,ot=$.length;for(ge||(ge=Array(ot));++De<ot;)ge[De]=$[De];return ge}function gu($,ge,De,ot){De||(De={});for(var Lt=-1,Tt=ge.length;++Lt<Tt;){var Gt=ge[Lt],qt=ot?ot(De[Gt],$[Gt],Gt,De,$):i;Ds(De,Gt,qt===i?$[Gt]:qt)}return De}function Rh($,ge){return gu($,Xo($),ge)}function jh($){return ll(function(ge,De){var ot=-1,Lt=De.length,Tt=Lt>1?De[Lt-1]:i,Gt=Lt>2?De[2]:i;for(Tt=$.length>3&&typeof Tt=="function"?(Lt--,Tt):i,Gt&&pl(De[0],De[1],Gt)&&(Tt=Lt<3?i:Tt,Lt=1),ge=Object(ge);++ot<Lt;){var qt=De[ot];qt&&$(ge,qt,ot,Tt)}return ge})}function Dh($,ge){return function(De,ot){if(De==null)return De;if(!To(De))return $(De,ot);for(var Lt=De.length,Tt=ge?Lt:-1,Gt=Object(De);(ge?Tt--:++Tt<Lt)&&ot(Gt[Tt],Tt,Gt)!==!1;);return De}}function Bh($){return function(ge,De,ot){for(var Lt=-1,Tt=Object(ge),Gt=ot(ge),qt=Gt.length;qt--;){var gn=Gt[$?qt:++Lt];if(De(Tt[gn],gn,Tt)===!1)break}return ge}}function fl($,ge,De,ot,Lt,Tt){var Gt=Lt&b,qt=$.length,gn=ge.length;if(qt!=gn&&!(Gt&&gn>qt))return!1;var Bn=Tt.get($);if(Bn&&Tt.get(ge))return Bn==ge;var Dn=-1,Nn=!0,$n=Lt&a?new _a:i;for(Tt.set($,ge),Tt.set(ge,$);++Dn<qt;){var Nr=$[Dn],Hn=ge[Dn];if(ot)var ki=Gt?ot(Hn,Nr,Dn,ge,$,Tt):ot(Nr,Hn,Dn,$,ge,Tt);if(ki!==i){if(ki)continue;Nn=!1;break}if($n){if(!F(ge,function(Zi,Ko){if(!$n.has(Ko)&&(Nr===Zi||De(Nr,Zi,ot,Lt,Tt)))return $n.add(Ko)})){Nn=!1;break}}else if(!(Nr===Hn||De(Nr,Hn,ot,Lt,Tt))){Nn=!1;break}}return Tt.delete($),Tt.delete(ge),Nn}function dl($,ge,De,ot,Lt,Tt,Gt){switch(De){case ye:if($.byteLength!=ge.byteLength||$.byteOffset!=ge.byteOffset)return!1;$=$.buffer,ge=ge.buffer;case Q:return!($.byteLength!=ge.byteLength||!ot(new be($),new be(ge)));case j:case ee:case U:return Gi(+$,+ge);case Y:return $.name==ge.name&&$.message==ge.message;case B:case k:return $==ge+"";case V:var qt=Dt;case S:var gn=Tt&b;if(qt||(qt=Sn),$.size!=ge.size&&!gn)return!1;var Bn=Gt.get($);if(Bn)return Bn==ge;Tt|=a,Gt.set($,ge);var Dn=fl(qt($),qt(ge),ot,Lt,Tt,Gt);return Gt.delete($),Dn;case W:if(Ci)return Ci.call($)==Ci.call(ge)}return!1}function yu($,ge,De,ot,Lt,Tt){var Gt=Lt&b,qt=Mi($),gn=qt.length,Bn=Mi(ge),Dn=Bn.length;if(gn!=Dn&&!Gt)return!1;for(var Nn=gn;Nn--;){var $n=qt[Nn];if(!(Gt?$n in ge:Qt.call(ge,$n)))return!1}var Nr=Tt.get($);if(Nr&&Tt.get(ge))return Nr==ge;var Hn=!0;Tt.set($,ge),Tt.set(ge,$);for(var ki=Gt;++Nn<gn;){$n=qt[Nn];var Zi=$[$n],Ko=ge[$n];if(ot)var bl=Gt?ot(Ko,Zi,$n,ge,$,Tt):ot(Zi,Ko,$n,$,ge,Tt);if(!(bl===i?Zi===Ko||De(Zi,Ko,ot,Lt,Tt):bl)){Hn=!1;break}ki||(ki=$n=="constructor")}if(Hn&&!ki){var Ys=$.constructor,Ao=ge.constructor;Ys!=Ao&&"constructor"in $&&"constructor"in ge&&!(typeof Ys=="function"&&Ys instanceof Ys&&typeof Ao=="function"&&Ao instanceof Ao)&&(Hn=!1)}return Tt.delete($),Tt.delete(ge),Hn}function vu($){return hu($,Mi,Xo)}function Vs(){var $=_n.iteratee||Aa;return $=$===Aa?ds:$,arguments.length?$(arguments[0],arguments[1]):$}function ba($,ge){var De=$.__data__;return ml(ge)?De[typeof ge=="string"?"string":"hash"]:De.map}function gc($){for(var ge=Mi($),De=ge.length;De--;){var ot=ge[De],Lt=$[ot];ge[De]=[ot,Lt,Ea(Lt)]}return ge}function Ho($,ge){var De=tt($,ge);return sl(De)?De:i}var Xo=Ye?vn(Ye,Object):Eu,pi=fc;(Xt&&pi(new Xt(new ArrayBuffer(1)))!=ye||nn&&pi(new nn)!=V||Bt&&pi(Bt.resolve())!=Z||Wt&&pi(new Wt)!=S||mn&&pi(new mn)!=q)&&(pi=function($){var ge=ke.call($),De=ge==ie?$.constructor:i,ot=De?ho(De):i;if(ot)switch(ot){case Rn:return ye;case kn:return V;case qr:return Z;case Jn:return S;case pr:return q}return ge});function Gs($,ge,De){ge=Cn(ge,$)?[ge]:cl(ge);for(var ot,Lt=-1,Gt=ge.length;++Lt<Gt;){var Tt=gs(ge[Lt]);if(!(ot=$!=null&&De($,Tt)))break;$=$[Tt]}if(ot)return ot;var Gt=$?$.length:0;return!!Gt&&Ca(Gt)&&ln(Tt,Gt)&&(Jr($)||qo($))}function Zs($){var ge=$.length,De=$.constructor(ge);return ge&&typeof $[0]=="string"&&Qt.call($,"index")&&(De.index=$.index,De.input=$.input),De}function yc($){return typeof $.constructor=="function"&&!Kn($)?uu(Le($)):{}}function _u($,ge,De,ot){var Lt=$.constructor;switch(ge){case Q:return Us($);case j:case ee:return new Lt(+$);case ye:return pu($,ot);case _e:case xe:case te:case ue:case ne:case re:case me:case Se:case we:return $s($,ot);case V:return mu($,ot,De);case U:case k:return new Lt($);case B:return hl($);case S:return dc($,ot,De);case W:return pc($)}}function ln($,ge){return ge=ge??I,!!ge&&(typeof $=="number"||Ct.test($))&&$>-1&&$%1==0&&$<ge}function pl($,ge,De){if(!mi(De))return!1;var ot=typeof ge;return(ot=="number"?To(De)&&ln(ge,De.length):ot=="string"&&ge in De)?Gi(De[ge],$):!1}function Cn($,ge){if(Jr($))return!1;var De=typeof $;return De=="number"||De=="symbol"||De=="boolean"||$==null||xl($)?!0:Pe.test($)||!Ue.test($)||ge!=null&&$ in Object(ge)}function ml($){var ge=typeof $;return ge=="string"||ge=="number"||ge=="symbol"||ge=="boolean"?$!=="__proto__":$===null}function qn($){return!!Er&&Er in $}function Kn($){var ge=$&&$.constructor,De=typeof ge=="function"&&ge.prototype||cn;return $===De}function Ea($){return $===$&&!mi($)}function gl($,ge){return function(De){return De==null?!1:De[$]===ge&&(ge!==i||$ in Object(De))}}function Nh($){var ge=[];if($!=null)for(var De in Object($))ge.push(De);return ge}var xu=Ws(function($){$=po($);var ge=[];return ze.test($)&&ge.push(""),$.replace(He,function(De,ot,Lt,Tt){ge.push(Lt?Tt.replace(rt,"$1"):ot||De)}),ge});function gs($){if(typeof $=="string"||xl($))return $;var ge=$+"";return ge=="0"&&1/$==-w?"-0":ge}function ho($){if($!=null){try{return Xr.call($)}catch{}try{return $+""}catch{}}return""}function yl($){for(var ge=-1,De=$?$.length:0,ot=0,Lt=[];++ge<De;){var Tt=$[ge];Tt&&(Lt[ot++]=Tt)}return Lt}function Sa($,ge){var De=Jr($)?qe:cc;return De($,Vs(ge,3))}function Ws($,ge){if(typeof $!="function"||ge&&typeof ge!="function")throw new TypeError(d);var De=function(){var ot=arguments,Lt=ge?ge.apply(this,ot):ot[0],Tt=De.cache;if(Tt.has(Lt))return Tt.get(Lt);var Gt=$.apply(this,ot);return De.cache=Tt.set(Lt,Gt),Gt};return De.cache=new(Ws.Cache||on),De}Ws.Cache=on;function Ta($){return Bs($,!1,!0)}function Gi($,ge){return $===ge||$!==$&&ge!==ge}function qo($){return wu($)&&Qt.call($,"callee")&&(!$e.call($,"callee")||ke.call($)==C)}var Jr=Array.isArray;function To($){return $!=null&&Ca($.length)&&!Hs($)}function wu($){return fo($)&&To($)}var vl=ct||Su;function _l($){if(To($)&&(Jr($)||typeof $=="string"||typeof $.splice=="function"||vl($)||qo($)))return!$.length;var ge=pi($);if(ge==V||ge==S)return!$.size;if(Wn||Kn($))return!dt($).length;for(var De in $)if(Qt.call($,De))return!1;return!0}function Hs($){var ge=mi($)?ke.call($):"";return ge==de||ge==G}function Ca($){return typeof $=="number"&&$>-1&&$%1==0&&$<=I}function mi($){var ge=typeof $;return!!$&&(ge=="object"||ge=="function")}function fo($){return!!$&&typeof $=="object"}function ys($){if(!fo($)||ke.call($)!=ie||Ve($))return!1;var ge=Le($);if(ge===null)return!0;var De=Qt.call(ge,"constructor")&&ge.constructor;return typeof De=="function"&&De instanceof De&&Xr.call(De)==co}function xl($){return typeof $=="symbol"||fo($)&&ke.call($)==W}var Xs=M?Ge(M):wa;function sr($){return gu($,wl($))}function po($){return $==null?"":ul($)}function Kr($,ge,De){var ot=$==null?i:il($,ge);return ot===i?De:ot}function qs($,ge){return $!=null&&Gs($,ge,fs)}function Mi($){return To($)?lc($):ps($)}function wl($){return To($)?lc($,!0):Ln($)}var Ks=jh(function($,ge,De){ii($,ge,De)});function Co($){return $}function Aa($){return ds(typeof $=="function"?$:Bs($,!0))}function bu($){return Cn($)?N(gs($)):fu($)}function Eu(){return[]}function Su(){return!1}_n.compact=yl,_n.iteratee=Aa,_n.keys=Mi,_n.keysIn=wl,_n.memoize=Ws,_n.merge=Ks,_n.property=bu,_n.toPlainObject=sr,_n.clone=Ta,_n.eq=Gi,_n.forEach=Sa,_n.get=Kr,_n.hasIn=qs,_n.identity=Co,_n.isArguments=qo,_n.isArray=Jr,_n.isArrayLike=To,_n.isArrayLikeObject=wu,_n.isBuffer=vl,_n.isEmpty=_l,_n.isFunction=Hs,_n.isLength=Ca,_n.isObject=mi,_n.isObjectLike=fo,_n.isPlainObject=ys,_n.isSymbol=xl,_n.isTypedArray=Xs,_n.stubArray=Eu,_n.stubFalse=Su,_n.toString=po,_n.each=Sa,_n.VERSION=l,En&&((En.exports=_n)._=_n,Tn._=_n)}).call(Dl)})(dg,dg.exports);var PR=dg.exports,MR=cm;function cm(e,t){var i=e&&e.type,l;if(i==="FeatureCollection")for(l=0;l<e.features.length;l++)cm(e.features[l],t);else if(i==="GeometryCollection")for(l=0;l<e.geometries.length;l++)cm(e.geometries[l],t);else if(i==="Feature")cm(e.geometry,t);else if(i==="Polygon")NE(e.coordinates,t);else if(i==="MultiPolygon")for(l=0;l<e.coordinates.length;l++)NE(e.coordinates[l],t);return e}function NE(e,t){if(e.length!==0){UE(e[0],t);for(var i=1;i<e.length;i++)UE(e[i],!t)}}function UE(e,t){for(var i=0,l=0,c=0,d=e.length,y=d-1;c<d;y=c++){var a=(e[c][0]-e[y][0])*(e[y][1]+e[c][1]),b=i+a;l+=Math.abs(i)>=Math.abs(a)?i-b+a:a-b+i,i=b}i+l>=0!=!!t&&e.reverse()}const kR=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}];var LR=kR,Fn=PR,Vp=MR,hm={};LR.forEach(function(e){if(e.polygon==="all")hm[e.key]=!0;else{var t=e.polygon==="whitelist"?"included_values":"excluded_values",i={};e.values.forEach(function(l){i[l]=!0}),hm[e.key]={},hm[e.key][t]=i}});function zR(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:Fn.merge(e,t)}var pg={};pg=function(e,t,i){t=Fn.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:hm,deduplicator:zR},t);var l;return typeof XMLDocument<"u"&&e instanceof XMLDocument||typeof XMLDocument>"u"&&e.childNodes?l=d(e):l=c(e),l;function c(b){var w=new Array,I=new Array,C=new Array;function L(Z){var B=Fn.clone(Z);B.lat=Z.center.lat,B.lon=Z.center.lon,B.__is_center_placeholder=!0,w.push(B)}function j(Z){var B=Fn.clone(Z);B.nodes=[];function S(k,W,q){var Q={type:"node",id:"_"+B.type+"/"+B.id+"bounds"+q,lat:k,lon:W};B.nodes.push(Q.id),w.push(Q)}S(B.bounds.minlat,B.bounds.minlon,1),S(B.bounds.maxlat,B.bounds.minlon,2),S(B.bounds.maxlat,B.bounds.maxlon,3),S(B.bounds.minlat,B.bounds.maxlon,4),B.nodes.push(B.nodes[0]),B.__is_bounds_placeholder=!0,I.push(B)}function ee(Z){function B(S,k,W){var q={type:"node",id:W,lat:S,lon:k};w.push(q)}Fn.isArray(Z.nodes)||(Z.nodes=Z.geometry.map(function(S){return S!==null?"_anonymous@"+S.lat+"/"+S.lon:"_anonymous@unknown_location"})),Z.geometry.forEach(function(S,k){S&&B(S.lat,S.lon,Z.nodes[k])})}function Y(Z){function B(k,W,q){var Q={type:"node",id:q,lat:k,lon:W};w.push(Q)}function S(k,W){if(I.some(function(ye){return ye.type=="way"&&ye.id==W}))return;var q={type:"way",id:W,nodes:[]};function Q(ye,_e){var xe={type:"node",id:"_anonymous@"+ye+"/"+_e,lat:ye,lon:_e};q.nodes.push(xe.id),w.push(xe)}k.forEach(function(ye){ye?Q(ye.lat,ye.lon):q.nodes.push(void 0)}),I.push(q)}Z.members.forEach(function(k,W){k.type=="node"?k.lat&&B(k.lat,k.lon,k.ref):k.type=="way"&&k.geometry&&(k.ref="_fullGeom"+k.ref,S(k.geometry,k.ref))})}for(var de=0;de<b.elements.length;de++)switch(b.elements[de].type){case"node":var G=b.elements[de];w.push(G);break;case"way":var V=Fn.clone(b.elements[de]);V.nodes=Fn.clone(V.nodes),I.push(V),V.center&&L(V),V.geometry?ee(V):V.bounds&&j(V);break;case"relation":var U=Fn.clone(b.elements[de]);U.members=Fn.clone(U.members),C.push(U);var ie=U.members&&U.members.some(function(Z){return Z.type=="node"&&Z.lat||Z.type=="way"&&Z.geometry&&Z.geometry.length>0});U.center&&L(U),ie?Y(U):U.bounds&&j(U);break}return y(w,I,C)}function d(b){var w=new Array,I=new Array,C=new Array;function L(U,ie,Z){U.hasAttribute(Z)&&(ie[Z]=U.getAttribute(Z))}function j(U,ie){var Z=Fn.clone(U);L(ie,Z,"lat"),L(ie,Z,"lon"),Z.__is_center_placeholder=!0,w.push(Z)}function ee(U,ie){var Z=Fn.clone(U);Z.nodes=[];function B(S,k,W){var q={type:"node",id:"_"+Z.type+"/"+Z.id+"bounds"+W,lat:S,lon:k};Z.nodes.push(q.id),w.push(q)}B(ie.getAttribute("minlat"),ie.getAttribute("minlon"),1),B(ie.getAttribute("maxlat"),ie.getAttribute("minlon"),2),B(ie.getAttribute("maxlat"),ie.getAttribute("maxlon"),3),B(ie.getAttribute("minlat"),ie.getAttribute("maxlon"),4),Z.nodes.push(Z.nodes[0]),Z.__is_bounds_placeholder=!0,I.push(Z)}function Y(U,ie){function Z(B,S,k){var W={type:"node",id:k,lat:B,lon:S};return w.push(W),W.id}Fn.isArray(U.nodes)||(U.nodes=[],Fn.each(ie,function(B,S){U.nodes.push("_anonymous@"+B.getAttribute("lat")+"/"+B.getAttribute("lon"))})),Fn.each(ie,function(B,S){B.getAttribute("lat")&&Z(B.getAttribute("lat"),B.getAttribute("lon"),U.nodes[S])})}function de(U,ie){function Z(S,k,W){var q={type:"node",id:W,lat:S,lon:k};w.push(q)}function B(S,k){if(I.some(function(Q){return Q.type=="way"&&Q.id==k}))return;var W={type:"way",id:k,nodes:[]};function q(Q,ye){var _e={type:"node",id:"_anonymous@"+Q+"/"+ye,lat:Q,lon:ye};W.nodes.push(_e.id),w.push(_e)}Fn.each(S,function(Q){Q.getAttribute("lat")?q(Q.getAttribute("lat"),Q.getAttribute("lon")):W.nodes.push(void 0)}),I.push(W)}Fn.each(ie,function(S,k){U.members[k].type=="node"?S.getAttribute("lat")&&Z(S.getAttribute("lat"),S.getAttribute("lon"),U.members[k].ref):U.members[k].type=="way"&&S.getElementsByTagName("nd").length>0&&(U.members[k].ref="_fullGeom"+U.members[k].ref,B(S.getElementsByTagName("nd"),U.members[k].ref))})}Fn.each(b.getElementsByTagName("node"),function(U,ie){var Z={};Fn.each(U.getElementsByTagName("tag"),function(S){Z[S.getAttribute("k")]=S.getAttribute("v")});var B={type:"node"};L(U,B,"id"),L(U,B,"lat"),L(U,B,"lon"),L(U,B,"version"),L(U,B,"timestamp"),L(U,B,"changeset"),L(U,B,"uid"),L(U,B,"user"),Fn.isEmpty(Z)||(B.tags=Z),w.push(B)});var G,V;return Fn.each(b.getElementsByTagName("way"),function(U,ie){var Z={},B=[];Fn.each(U.getElementsByTagName("tag"),function(W){Z[W.getAttribute("k")]=W.getAttribute("v")});var S=!1;Fn.each(U.getElementsByTagName("nd"),function(W,q){var Q;(Q=W.getAttribute("ref"))&&(B[q]=Q),!S&&W.getAttribute("lat")&&(S=!0)});var k={type:"way"};L(U,k,"id"),L(U,k,"version"),L(U,k,"timestamp"),L(U,k,"changeset"),L(U,k,"uid"),L(U,k,"user"),B.length>0&&(k.nodes=B),Fn.isEmpty(Z)||(k.tags=Z),(G=U.getElementsByTagName("center")[0])&&j(k,G),S?Y(k,U.getElementsByTagName("nd")):(V=U.getElementsByTagName("bounds")[0])&&ee(k,V),I.push(k)}),Fn.each(b.getElementsByTagName("relation"),function(U,ie){var Z={},B=[];Fn.each(U.getElementsByTagName("tag"),function(W){Z[W.getAttribute("k")]=W.getAttribute("v")});var S=!1;Fn.each(U.getElementsByTagName("member"),function(W,q){B[q]={},L(W,B[q],"ref"),L(W,B[q],"role"),L(W,B[q],"type"),(!S&&B[q].type=="node"&&W.getAttribute("lat")||B[q].type=="way"&&W.getElementsByTagName("nd").length>0)&&(S=!0)});var k={type:"relation"};L(U,k,"id"),L(U,k,"version"),L(U,k,"timestamp"),L(U,k,"changeset"),L(U,k,"uid"),L(U,k,"user"),B.length>0&&(k.members=B),Fn.isEmpty(Z)||(k.tags=Z),(G=U.getElementsByTagName("center")[0])&&j(k,G),S?de(k,U.getElementsByTagName("member")):(V=U.getElementsByTagName("bounds")[0])&&ee(k,V),C.push(k)}),y(w,I,C)}function y(b,w,I){function C(ze,He){if(typeof He!="object"&&(He={}),typeof t.uninterestingTags=="function")return!t.uninterestingTags(ze,He);for(var Ze in ze)if(t.uninterestingTags[Ze]!==!0&&!(He[Ze]===!0||He[Ze]===ze[Ze]))return!0;return!1}function L(ze){var He={timestamp:ze.timestamp,version:ze.version,changeset:ze.changeset,user:ze.user,uid:ze.uid};for(var Ze in He)He[Ze]===void 0&&delete He[Ze];return He}for(var j=new Object,ee=new Object,Y=0;Y<b.length;Y++){var de=b[Y];j[de.id]!==void 0&&(de=t.deduplicator(de,j[de.id])),j[de.id]=de,typeof de.tags<"u"&&C(de.tags)&&(ee[de.id]=!0)}for(var Y=0;Y<I.length;Y++)if(Fn.isArray(I[Y].members))for(var G=0;G<I[Y].members.length;G++)I[Y].members[G].type=="node"&&(ee[I[Y].members[G].ref]=!0);for(var V=new Object,U=new Object,Y=0;Y<w.length;Y++){var ie=w[Y];if(V[ie.id]&&(ie=t.deduplicator(ie,V[ie.id])),V[ie.id]=ie,Fn.isArray(ie.nodes))for(var G=0;G<ie.nodes.length;G++)typeof ie.nodes[G]!="object"&&(U[ie.nodes[G]]=!0,ie.nodes[G]=j[ie.nodes[G]])}var Z=new Array;for(var B in j){var de=j[B];(!U[B]||ee[B])&&Z.push(de)}for(var S=new Array,Y=0;Y<I.length;Y++){var k=I[Y];S[k.id]&&(k=t.deduplicator(k,S[k.id])),S[k.id]=k}var W={node:{},way:{},relation:{}};for(var B in S){var k=S[B];if(!Fn.isArray(k.members)){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"ignored because it has no members");continue}for(var G=0;G<k.members.length;G++){var q=k.members[G].type,Q=k.members[G].ref;if(typeof Q!="number"&&(Q=Q.replace("_fullGeom","")),!W[q]){t.verbose&&console.warn("Relation",k.type+"/"+k.id,"member",q+"/"+Q,"ignored because it has an invalid type");continue}typeof W[q][Q]>"u"&&(W[q][Q]=[]),W[q][Q].push({role:k.members[G].role,rel:k.id,reltags:k.tags})}}var ye,_e=[];for(Y=0;Y<Z.length;Y++){if(typeof Z[Y].lon>"u"||typeof Z[Y].lat>"u"){t.verbose&&console.warn("POI",Z[Y].type+"/"+Z[Y].id,"ignored because it lacks coordinates");continue}var xe={type:"Feature",id:Z[Y].type+"/"+Z[Y].id,properties:{type:Z[Y].type,id:Z[Y].id,tags:Z[Y].tags||{},relations:W.node[Z[Y].id]||[],meta:L(Z[Y])},geometry:{type:"Point",coordinates:[+Z[Y].lon,+Z[Y].lat]}};Z[Y].__is_center_placeholder&&(xe.properties.geometry="center"),i?i(xe):_e.push(xe)}for(var te=[],ue=[],Y=0;Y<I.length;Y++)if(S[I[Y].id]===I[Y]){if(typeof I[Y].tags<"u"&&(I[Y].tags.type=="route"||I[Y].tags.type=="waterway")){let He=function(Ze){var rt=!1,ut;ut=Ze.members.filter(function(Et){return Et.type==="way"}),ut=ut.map(function(Et){var $t=V[Et.ref];if($t===void 0||$t.nodes===void 0){t.verbose&&console.warn("Route "+Ze.type+"/"+Ze.id,"tainted by a missing or incomplete  way",Et.type+"/"+Et.ref),rt=!0;return}return{id:Et.ref,role:Et.role,way:$t,nodes:$t.nodes.filter(function(Nt){return Nt!==void 0?!0:(rt=!0,t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"tainted by a way",Et.type+"/"+Et.ref,"with a missing node"),!1)})}}),ut=Fn.compact(ut);var gt;gt=N0(ut);var Ct=[];if(Ct=Fn.compact(gt.map(function(Et){return Fn.compact(Et.map(function($t){return[+$t.lon,+$t.lat]}))})),Ct.length==0)return t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"contains no coordinates"),!1;var ht={type:"Feature",id:Ze.type+"/"+Ze.id,properties:{type:Ze.type,id:Ze.id,tags:Ze.tags||{},relations:W[Ze.type][Ze.id]||[],meta:L(Ze)},geometry:{type:Ct.length===1?"LineString":"MultiLineString",coordinates:Ct.length===1?Ct[0]:Ct}};return rt&&(t.verbose&&console.warn("Route",Ze.type+"/"+Ze.id,"is tainted"),ht.properties.tainted=!0),ht};var Ue=He;if(!Fn.isArray(I[Y].members)){t.verbose&&console.warn("Route",I[Y].type+"/"+I[Y].id,"ignored because it has no members");continue}if(I[Y].members.forEach(function(Ze){V[Ze.ref]&&!C(V[Ze.ref].tags)&&(V[Ze.ref].is_skippablerelationmember=!0)}),xe=He(I[Y]),xe===!1){t.verbose&&console.warn("Route relation",I[Y].type+"/"+I[Y].id,"ignored because it has invalid geometry");continue}i?i(Vp(xe)):ue.push(xe)}if(typeof I[Y].tags<"u"&&(I[Y].tags.type=="multipolygon"||I[Y].tags.type=="boundary")){let Ze=function(rt,ut){var gt=!1,Ct=re?"way":"relation",ht=typeof rt.id=="number"?rt.id:+rt.id.replace("_fullGeom",""),Et;Et=ut.members.filter(function(R){return R.type==="way"}),Et=Et.map(function(R){var ve=V[R.ref];if(ve===void 0||ve.nodes===void 0){t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"tainted by a missing or incomplete way",R.type+"/"+R.ref),gt=!0;return}return{id:R.ref,role:R.role||"outer",way:ve,nodes:ve.nodes.filter(function(Ne){return Ne!==void 0?!0:(gt=!0,t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"tainted by a way",R.type+"/"+R.ref,"with a missing node"),!1)})}}),Et=Fn.compact(Et);var $t,Nt;$t=N0(Et.filter(function(R){return R.role==="outer"})),Nt=N0(Et.filter(function(R){return R.role==="inner"}));var hn;function Tn(R){var ve=function(F,N){for(var Ee=0;Ee<N.length;Ee++)if(qe(N[Ee],F))return!0;return!1},Ne=function(F){return F.map(function(N){return[+N.lat,+N.lon]})},qe=function(F,N){for(var Ee=F[0],Ge=F[1],tt=!1,Ve=0,Dt=N.length-1;Ve<N.length;Dt=Ve++){var vn=N[Ve][0],Sn=N[Ve][1],Mn=N[Dt][0],ft=N[Dt][1],cn=Sn>Ge!=ft>Ge&&Ee<(Mn-vn)*(Ge-Sn)/(ft-Sn)+vn;cn&&(tt=!tt)}return tt},lt,le;for(R=Ne(R),lt=0;lt<$t.length;lt++)if(le=Ne($t[lt]),ve(le,R))return lt}hn=$t.map(function(R){return[R]});for(var En=0;En<Nt.length;En++){var rn=Tn(Nt[En]);rn!==void 0?hn[rn].push(Nt[En]):t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"contains an inner ring with no containing outer")}var xn=[];if(xn=Fn.compact(hn.map(function(R){var ve=Fn.compact(R.map(function(Ne){if(Ne.length<4){t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"contains a ring with less than four nodes");return}return Fn.compact(Ne.map(function(qe){return[+qe.lon,+qe.lat]}))}));if(ve.length==0){t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"contains an empty ring cluster");return}return ve})),xn.length==0)return t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"contains no coordinates"),!1;var Te="MultiPolygon";xn.length===1&&(Te="Polygon",xn=xn[0]);var M={type:"Feature",id:rt.type+"/"+ht,properties:{type:rt.type,id:ht,tags:rt.tags||{},relations:W[rt.type][rt.id]||[],meta:L(rt)},geometry:{type:Te,coordinates:xn}};return gt&&(t.verbose&&console.warn("Multipolygon",Ct+"/"+ht,"is tainted"),M.properties.tainted=!0),M};var Pe=Ze;if(!Fn.isArray(I[Y].members)){t.verbose&&console.warn("Multipolygon",I[Y].type+"/"+I[Y].id,"ignored because it has no members");continue}for(var ne=0,G=0;G<I[Y].members.length;G++)I[Y].members[G].role=="outer"?ne++:t.verbose&&I[Y].members[G].role!="inner"&&console.warn("Multipolygon",I[Y].type+"/"+I[Y].id,"member",I[Y].members[G].type+"/"+I[Y].members[G].ref,'ignored because it has an invalid role: "'+I[Y].members[G].role+'"');if(I[Y].members.forEach(function(rt){V[rt.ref]&&(rt.role==="outer"&&!C(V[rt.ref].tags,I[Y].tags)&&(V[rt.ref].is_skippablerelationmember=!0),rt.role==="inner"&&!C(V[rt.ref].tags)&&(V[rt.ref].is_skippablerelationmember=!0))}),ne==0){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because it has no outer ways");continue}var re=!1;ne==1&&!C(I[Y].tags,{type:!0})&&(re=!0);var xe=null;if(!re)xe=Ze(I[Y],I[Y]);else{var me=I[Y].members.filter(function(rt){return rt.role==="outer"})[0];if(me=V[me.ref],me===void 0){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because outer way",me.type+"/"+me.ref,"is missing");continue}me.is_skippablerelationmember=!0,xe=Ze(me,I[Y])}if(xe===!1){t.verbose&&console.warn("Multipolygon relation",I[Y].type+"/"+I[Y].id,"ignored because it has invalid geometry");continue}i?i(Vp(xe)):ue.push(xe)}}for(var Y=0;Y<w.length;Y++)if(V[w[Y].id]===w[Y]){if(!Fn.isArray(w[Y].nodes)){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it has no nodes");continue}if(!w[Y].is_skippablerelationmember){typeof w[Y].id!="number"&&(w[Y].id=+w[Y].id.replace("_fullGeom","")),w[Y].tainted=!1,w[Y].hidden=!1;var Se=new Array;for(G=0;G<w[Y].nodes.length;G++)typeof w[Y].nodes[G]=="object"?Se.push([+w[Y].nodes[G].lon,+w[Y].nodes[G].lat]):(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted by an invalid node"),w[Y].tainted=!0);if(Se.length<=1){t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"ignored because it contains too few nodes");continue}var we="LineString";typeof w[Y].nodes[0]<"u"&&typeof w[Y].nodes[w[Y].nodes.length-1]<"u"&&w[Y].nodes[0].id===w[Y].nodes[w[Y].nodes.length-1].id&&(typeof w[Y].tags<"u"&&a(w[Y].tags)||w[Y].__is_bounds_placeholder)&&(we="Polygon",Se=[Se]);var xe={type:"Feature",id:w[Y].type+"/"+w[Y].id,properties:{type:w[Y].type,id:w[Y].id,tags:w[Y].tags||{},relations:W.way[w[Y].id]||[],meta:L(w[Y])},geometry:{type:we,coordinates:Se}};w[Y].tainted&&(t.verbose&&console.warn("Way",w[Y].type+"/"+w[Y].id,"is tainted"),xe.properties.tainted=!0),w[Y].__is_bounds_placeholder&&(xe.properties.geometry="bounds"),i?i(Vp(xe)):we=="LineString"?te.push(xe):ue.push(xe)}}return i?!0:(ye={type:"FeatureCollection",features:[]},ye.features=ye.features.concat(ue),ye.features=ye.features.concat(te),ye.features=ye.features.concat(_e),t.flatProperties&&ye.features.forEach(function(ze){ze.properties=Fn.merge(ze.properties.meta,ze.properties.tags,{id:ze.properties.type+"/"+ze.properties.id})}),ye=Vp(ye),ye)}function a(b){var w=t.polygonFeatures;if(typeof w=="function")return w(b);if(b.area==="no")return!1;for(var I in b){var C=b[I],L=w[I];if(!(typeof L>"u")&&C!=="no"&&(L===!0||L.included_values&&L.included_values[C]===!0||L.excluded_values&&L.excluded_values[C]!==!0))return!0}return!1}};function N0(e){for(var t=function(C){return C[0]},i=function(C){return C[C.length-1]},l=function(C,L){return C!==void 0&&L!==void 0&&C.id===L.id},c=[],d,y,a,b,w,I;e.length;)for(d=e.pop().nodes.slice(),c.push(d);e.length&&!l(t(d),i(d));){for(y=t(d),a=i(d),b=0;b<e.length;b++)if(I=e[b].nodes,l(a,t(I))){w=d.push,I=I.slice(1);break}else if(l(a,i(I))){w=d.push,I=I.slice(0,-1).reverse();break}else if(l(y,i(I))){w=d.unshift,I=I.slice(0,-1);break}else if(l(y,t(I))){w=d.unshift,I=I.slice(1).reverse();break}else I=w=null;if(!I)break;e.splice(b,1),w.apply(d,I)}return c}pg.toGeojson=pg;var FR=pg;const OR=Cd(FR),U0={type:"FeatureCollection",features:[]},cI=()=>{const[e,t]=_t.useState(!1),i=_t.useCallback(async(y,a,b)=>{var Y,de;if(e||(console.log(b),b<16))return U0;t(!0);let w=300;b>17&&(w=200),b>18&&(w=100),b>19&&(w=50),console.log("overpass: loading...");let I="[out:json]";I+=`[timeout:25];
`,I+='nwr["building"]',I+=`(around:${w},${y},${a});
`,I+="out meta geom;",console.log(I);const C=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(I)}`,{});if(C.status!==200)return t(!1),U0;const L=await C.json();console.log("overpass json elements: ",L.elements);const j=OR(L);console.log("overpass osmtogeojson raw: ",j);for await(const G of j.features){if(!G.properties)continue;G.id=G.properties.id.split("/")[1];const V=(Y=L.elements.filter(ie=>G.id?typeof G.id=="number"?ie.id===G.id:ie.id===parseInt(G.id):!1))==null?void 0:Y[0];if(V&&(G.properties.tags=V.tags,G.properties.nodes=V.nodes),G.geometry.type==="Polygon"){const ie=xR(G.geometry.coordinates);var ee=TR(ie);G.properties.center=ee.geometry.coordinates}G.geometry.type==="Point"&&(G.properties.center=G.geometry.coordinates);const U=G.properties.uid;if(U){let ie=localStorage.getItem(U+"-icon");if(ie===null){const Z=await ks.getUser(U);(de=Z.img)!=null&&de.href?(ie=Z.img.href,localStorage.setItem(U+"-icon",Z.img.href)):localStorage.setItem(U+"-icon","")}G.properties.userIconHref=ie||""}}return console.log("overpass osmtogeojson converted: ",j),console.log("overpass: loaded."),t(!1),j},[]),[l,c]=_t.useState(!1),d=_t.useCallback(async y=>{console.log("overpass: loading...",y),c(!0);const a=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      .nodes is_in;
      area._[boundary=administrative];
      out;
    `;console.log(a);const b=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(a)}`,{});if(b.status!==200){c(!1);return}const w=await b.json();console.log("overpass json parent elements: ",w.elements);const I=250,C=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      rel
        [type=boundary]
        [boundary=administrative]
        (around.nodes:${I});
      out;
      `;console.log(C);const L=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(C)}`,{});if(L.status!==200){c(!1);return}const j=await L.json();console.log("overpass json child elements: ",j.elements);const ee=`
      [out:json]
      [timeout:25];
      node(id:${y.join(",")})->.nodes;
      node
        [place=neighbourhood]
        (around.nodes:${I});
      out;
      `;console.log(ee);const Y=await fetch(`https://lz4.overpass-api.de/api/interpreter?data=${encodeURIComponent(ee)}`,{});if(Y.status!==200){c(!1);return}const de=await Y.json();return console.log("overpass json neighbour elements: ",de.elements),c(!1),[...w.elements,...j.elements,...de.elements]},[]);return{fetchOverpassBuildings:i,fetchOverpassAdmin:d,loadingOverpass:e,loadingOverpassAdmin:l}},RR=()=>mt.jsxs("div",{className:"w-full md:w-1/6 py-1 px-2 mb-6 md:mb-0",children:[mt.jsx("label",{className:"block tracking-wide text-gray-700 text-xs font-bold mb-2",htmlFor:"source",children:"Source of this changeset (* required)"}),mt.jsx("input",{className:"appearance-none block w-full leading-tight rounded py-2 px-1 border border-gray-300 bg-gray-100 text-black placeholder-gray-500 placeholder-opacity-50 focus:outline-none focus:bg-white focus:border-gray-500",id:"source",name:"source",type:"text",autoComplete:"on",list:"source-list",placeholder:"OpenStreetMap",defaultValue:"",required:!0}),mt.jsxs("datalist",{id:"source-list",children:[mt.jsx("option",{value:"survey"}),mt.jsx("option",{value:"local knowledge"}),mt.jsx("option",{value:"extrapolation"}),mt.jsx("option",{value:"estimation from existing data"})]})]}),$0={host:"https://yuiseki.github.io/osm-address-editor-vite/",created_by:"osm-address-editor-vite",locale:navigator.language,comment:"Update address",source:"OpenStreetMap"},jR=({feature:e,onCancel:t,onSubmit:i})=>{var ye,_e,xe,te;const{detectCountry:l,loadingCountry:c}=CR(),{fetchOverpassAdmin:d,loadingOverpassAdmin:y}=cI(),a=JSON.parse((ye=e.properties)==null?void 0:ye.center),[b,w]=_t.useState(void 0),[I,C]=_t.useState(),[L,j]=_t.useState(e),[ee,Y]=_t.useState(!1),[de,G]=_t.useState(!1),[V,U]=_t.useState(!1),[ie,Z]=_t.useState(),[B,S]=_t.useState();_t.useEffect(()=>{Y(ks.isLoggedIn())},[]),_t.useEffect(()=>{(async()=>{var ne,re;const ue=await l(a[0],a[1]);if(w(ue),(ne=ue==null?void 0:ue.properties)!=null&&ne.ISO_A3&&jE[ue.properties.ISO_A3]){const me=jE[ue.properties.ISO_A3];C(me);const Se=me.defaultComment+" "+((re=e.properties)==null?void 0:re.id);S(Se)}})()},[e]),_t.useEffect(()=>{console.log(L.properties)},[L]);const k=_t.useCallback(async()=>{const ue=await qC.openReverseGeocoder([a[0],a[1]]);j(ne=>{const re={properties:{"addr:province":ue.prefecture,"addr:city":ue.city,...ne.properties}};return{...ne,...re}})},[]),W=_t.useCallback(async()=>{if(!L.properties)return;L.properties.nodes;const ue=await d(JSON.parse(L.properties.nodes));console.log("onOverpassReverseGeocode",ue),Z(ue)},[L]),q=_t.useCallback(async ue=>{var Pe,ze,He;U(!0),ue.preventDefault();const ne=new FormData(ue.currentTarget),re=JSON.parse((Pe=e.properties)==null?void 0:Pe.tags);ne.forEach((Ze,rt)=>{typeof Ze=="string"&&Ze.length>0&&rt!=="comment"&&rt!=="source"&&(re[rt]=Ze)});const me={type:"way",id:e.id,version:(ze=e.properties)==null?void 0:ze.version,tags:re,nodes:JSON.parse((He=e.properties)==null?void 0:He.nodes)};console.info(JSON.stringify(me,null,2));const Se={create:[],modify:[me],delete:[]},we=ne.get("comment");we&&($0.comment=we.toString());const Ue=ne.get("source");Ue&&($0.source=Ue.toString()),await ks.uploadChangeset($0,Se),U(!1),window.alert(`Successfully updated OpenStreetMap!!!
 Wait a minutes to apply to the map...`),i()},[e]),Q=_t.useCallback(()=>{G(!0)},[]);return L.properties?mt.jsxs("div",{children:[mt.jsxs("div",{children:["OSM:"," ",mt.jsx("a",{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",href:"https://www.openstreetmap.org/"+L.properties.id,target:"_blank",children:L.properties.id})," | ",mt.jsx(WC,{feature:L}),I&&mt.jsxs("span",{children:[" | ","Address:"," ",mt.jsx(AR,{feature:L,fields:I})]})]}),c?mt.jsx(pa,{icon:Kv,spin:!0}):mt.jsx(mt.Fragment,{children:I?mt.jsxs("form",{onSubmit:q,children:[mt.jsx("div",{className:"flex flex-wrap",children:mt.jsx(B0,{feature:L,fieldOption:I.postcodeField,onChange:Q})}),mt.jsx("div",{className:"flex flex-wrap",children:I.mainFields.map(ue=>mt.jsx(B0,{feature:L,fieldOption:ue,onChange:Q,suggestList:ie},ue.key))}),mt.jsx("div",{className:"flex flex-wrap",children:I.detailFields.map(ue=>mt.jsx(B0,{feature:L,fieldOption:ue,onChange:Q},ue.key))}),mt.jsxs("div",{className:"flex flex-wrap",children:[mt.jsx(RR,{}),mt.jsx(IR,{defaultValue:B})]}),mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full py-2 px-2 mb-6 md:mb-0",children:[mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"}),((_e=b==null?void 0:b.properties)==null?void 0:_e.ISO_A3)==="JPN"&&mt.jsx("button",{type:"button",onClick:k,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:"Load address from coordinates"}),mt.jsxs("button",{type:"button",disabled:y,onClick:W,className:"button rounded mr-4 py-2 px-3 bg-green-300 text-gray-800 hover:text-white",children:["Load suggestion from OSM",y&&mt.jsx(pa,{icon:Kv,spin:!0})]}),mt.jsx("button",{disabled:!ee||V||!de,className:"button rounded mr-2 py-2 px-3 bg-blue-300 text-gray-800 disabled:bg-blue-100 disabled:text-gray-400 hover:text-white",children:"Submit to OpenStreetMap!"}),!ee&&mt.jsxs(mt.Fragment,{children:[mt.jsx("span",{className:"mr-2 underline text-red-600",children:"Require logged in before you submit data to OpenStreetMap"}),mt.jsx(ZC,{})]})]})})]}):mt.jsx("div",{className:"flex flex-wrap",children:mt.jsxs("div",{className:"w-full mb-6 md:mb-0",children:[mt.jsxs("div",{className:"py-2",children:[mt.jsxs("p",{children:["Sorry, Address editor in this country"," ",(xe=b==null?void 0:b.properties)==null?void 0:xe.NAME," (ISO code:",(te=b==null?void 0:b.properties)==null?void 0:te.ISO_A3,") does not support yet."]}),mt.jsx("p",{children:mt.jsx("a",{href:"https://github.com/yuiseki/osm-address-editor-vite",target:"_blank",className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",children:"Pull requests are welcome!"})})]}),mt.jsx("button",{type:"button",onClick:t,className:"button rounded mr-4 py-2 px-3  bg-gray-200 text-red-600 hover:text-red-800",children:"Cancel"})]})})})]}):null};function DR(e,t){const[i,l]=_t.useState(e);return _t.useEffect(()=>{const c=setTimeout(()=>{l(e)},t);return()=>{clearTimeout(c)}},[e,t]),i}const BR={version:8,sources:{"osm-raster-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap contributors"}},layers:[{id:"osm-tiles",type:"raster",source:"osm-raster-tiles",minzoom:0,maxzoom:20}]},NR={id:"buildings-layer-fill",type:"fill",source:"buildings-source",paint:{"fill-color":["case",["boolean",["feature-state","select"],!1],"green",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["all",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:housenumber"],!1]],"blue",["any",["boolean",["has","addr:postcode"],!1],["boolean",["has","addr:province"],!1],["boolean",["has","addr:city"],!1],["boolean",["has","addr:district"],!1],["boolean",["has","addr:suburb"],!1],["boolean",["has","addr:quarter"],!1],["boolean",["has","addr:street"],!1],["boolean",["has","addr:neighbourhood"],!1],["boolean",["has","addr:block_number"],!1],["boolean",["has","addr:housenumber"],!1]],"yellow","red"],"fill-opacity":["case",["boolean",["feature-state","select"],!1],.8,["boolean",["feature-state","hover"],!1],.8,.4]},filter:["==","$type","Polygon"]};function UR(){const e=_t.useRef(null),[t,i]=_t.useState(),l=DR(t,2500),c=_t.useRef(null),[d,y]=_t.useState({type:"FeatureCollection",features:[]}),[a,b]=_t.useState("auto"),[w,I]=_t.useState(),[C,L]=_t.useState([]),{fetchOverpassBuildings:j,loadingOverpass:ee}=cI();_t.useEffect(()=>{setTimeout(()=>{var S;console.log(window.location.hash),window.location.hash.endsWith("/0/0")&&(console.log("geolocateControlRef trigger"),(S=c.current)==null||S.trigger())},500)},[]);const Y=_t.useCallback(S=>{const k=S.target.getCenter(),W=S.target.getZoom();i({zoom:W,latitude:k.lat,longitude:k.lng,bearing:0,pitch:0,padding:{top:0,bottom:0,left:0,right:0}})},[]),de=_t.useCallback(S=>{i(S.viewState)},[]),G=_t.useCallback(S=>{i(S.viewState)},[]);_t.useEffect(()=>{(async()=>{if(!l)return;const S=l,k=await j(S.latitude,S.longitude,S.zoom);y(k)})()},[l]);const V=_t.useCallback(S=>{var ye;b("pointer");const{features:k,point:{x:W,y:q}}=S,Q=k&&k[0];Q?((ye=e.current)==null||ye.setFeatureState({source:"buildings-source",id:Q.id},{hover:!0}),I({feature:Q,x:W,y:q})):I(void 0)},[]),U=_t.useCallback(S=>{var k;b("auto"),(k=e.current)==null||k.querySourceFeatures("buildings-source").map(W=>{var q;(q=e.current)==null||q.setFeatureState({source:"buildings-source",id:W.id},{hover:!1})}),I(void 0)},[]),ie=_t.useCallback(S=>{var W;Z();const k=S.features&&S.features[0];k&&((W=e.current)==null||W.setFeatureState({source:"buildings-source",id:k.id},{select:!0}),L([k]))},[]),Z=_t.useCallback(()=>{var S;(S=e.current)==null||S.querySourceFeatures("buildings-source").map(k=>{var W;(W=e.current)==null||W.setFeatureState({source:"buildings-source",id:k.id},{select:!1})}),L([])},[]),B=_t.useMemo(()=>{let S=25;return t&&(S=t.zoom<18?20:t.zoom<19?25:35),d.features.map((k,W)=>!k.properties||!k.properties.center?null:mt.jsx(Q3,{style:{cursor:"pointer"},longitude:k.properties.center[0],latitude:k.properties.center[1],anchor:"center",children:mt.jsx(Dz,{feature:k,size:S})},`marker-${W}`))},[d,t]);return mt.jsxs("div",{children:[mt.jsx(vz,{}),mt.jsx("div",{style:{zIndex:300,position:"absolute",bottom:10,left:10},children:mt.jsx(Uz,{viewState:t})}),mt.jsxs("div",{style:{zIndex:1,position:"absolute",top:0,left:0,height:"100vh",width:"100vw",display:"flex",flexDirection:"column"},children:[C.length>0&&mt.jsx("div",{style:{zIndex:200,position:"absolute",top:"44px",left:0,width:"100vw",backgroundColor:"rgba(255, 255, 255, 0.9)"},children:mt.jsx("div",{style:{padding:"10px"},children:C.map(S=>mt.jsx(jR,{feature:S,onCancel:Z,onSubmit:Z},S.id))})}),mt.jsxs(E1,{ref:e,...t,onMove:de,onMoveEnd:G,onLoad:Y,interactiveLayerIds:["buildings-layer-fill"],onClick:ie,onMouseEnter:V,onMouseLeave:U,dragRotate:!1,boxZoom:!1,hash:!0,cursor:a,mapLib:oC,style:{width:"100%",height:"100%"},mapStyle:BR,children:[mt.jsx(c4,{id:"buildings-source",type:"geojson",data:d,children:mt.jsx(p4,{...NR})}),mt.jsx(o4,{position:"top-left",style:{marginTop:"55px"},showCompass:!1}),mt.jsx(r4,{ref:c,position:"top-left",showUserLocation:!0,showAccuracyCircle:!1,trackUserLocation:!1,positionOptions:{enableHighAccuracy:!0},fitBoundsOptions:{zoom:17}}),mt.jsx("div",{className:"fa-2xl",style:{zIndex:100,display:"flex",position:"absolute",top:"50%",left:"50%",textAlign:"center",verticalAlign:"middle"},children:!t||t!=null&&t.zoom&&t.zoom<16?mt.jsx(pa,{size:"2x",icon:mz}):ee?mt.jsx(pa,{size:"2x",icon:Kv,spin:!0}):mt.jsx(pa,{size:"2x",icon:gz})}),B,w&&mt.jsxs("div",{className:"tooltip",style:{zIndex:10,background:"rgba(255, 255, 255, 0.7)",padding:"5px",width:"250px",position:"absolute",left:w.x+5,top:w.y+5},children:[mt.jsx(WC,{feature:w.feature}),mt.jsx("br",{}),mt.jsx(Bz,{feature:w.feature}),mt.jsx(_z,{feature:w.feature})]})]})]})]})}var hI={},Gg={};Gg.byteLength=GR;Gg.toByteArray=WR;Gg.fromByteArray=qR;var ca=[],rs=[],$R=typeof Uint8Array<"u"?Uint8Array:Array,V0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Vc=0,VR=V0.length;Vc<VR;++Vc)ca[Vc]=V0[Vc],rs[V0.charCodeAt(Vc)]=Vc;rs["-".charCodeAt(0)]=62;rs["_".charCodeAt(0)]=63;function fI(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var l=i===t?0:4-i%4;return[i,l]}function GR(e){var t=fI(e),i=t[0],l=t[1];return(i+l)*3/4-l}function ZR(e,t,i){return(t+i)*3/4-i}function WR(e){var t,i=fI(e),l=i[0],c=i[1],d=new $R(ZR(e,l,c)),y=0,a=c>0?l-4:l,b;for(b=0;b<a;b+=4)t=rs[e.charCodeAt(b)]<<18|rs[e.charCodeAt(b+1)]<<12|rs[e.charCodeAt(b+2)]<<6|rs[e.charCodeAt(b+3)],d[y++]=t>>16&255,d[y++]=t>>8&255,d[y++]=t&255;return c===2&&(t=rs[e.charCodeAt(b)]<<2|rs[e.charCodeAt(b+1)]>>4,d[y++]=t&255),c===1&&(t=rs[e.charCodeAt(b)]<<10|rs[e.charCodeAt(b+1)]<<4|rs[e.charCodeAt(b+2)]>>2,d[y++]=t>>8&255,d[y++]=t&255),d}function HR(e){return ca[e>>18&63]+ca[e>>12&63]+ca[e>>6&63]+ca[e&63]}function XR(e,t,i){for(var l,c=[],d=t;d<i;d+=3)l=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),c.push(HR(l));return c.join("")}function qR(e){for(var t,i=e.length,l=i%3,c=[],d=16383,y=0,a=i-l;y<a;y+=d)c.push(XR(e,y,y+d>a?a:y+d));return l===1?(t=e[i-1],c.push(ca[t>>2]+ca[t<<4&63]+"==")):l===2&&(t=(e[i-2]<<8)+e[i-1],c.push(ca[t>>10]+ca[t>>4&63]+ca[t<<2&63]+"=")),c.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Gg,i=Bg,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=V,e.INSPECT_MAX_BYTES=50;const c=2147483647;e.kMaxLength=c,a.TYPED_ARRAY_SUPPORT=d(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const le=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(le,F),le.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function y(le){if(le>c)throw new RangeError('The value "'+le+'" is invalid for option "size"');const F=new Uint8Array(le);return Object.setPrototypeOf(F,a.prototype),F}function a(le,F,N){if(typeof le=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(le)}return b(le,F,N)}a.poolSize=8192;function b(le,F,N){if(typeof le=="string")return L(le,F);if(ArrayBuffer.isView(le))return ee(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(R(le,ArrayBuffer)||le&&R(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(le,SharedArrayBuffer)||le&&R(le.buffer,SharedArrayBuffer)))return Y(le,F,N);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ee=le.valueOf&&le.valueOf();if(Ee!=null&&Ee!==le)return a.from(Ee,F,N);const Ge=de(le);if(Ge)return Ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return a.from(le[Symbol.toPrimitive]("string"),F,N);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}a.from=function(le,F,N){return b(le,F,N)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function w(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function I(le,F,N){return w(le),le<=0?y(le):F!==void 0?typeof N=="string"?y(le).fill(F,N):y(le).fill(F):y(le)}a.alloc=function(le,F,N){return I(le,F,N)};function C(le){return w(le),y(le<0?0:G(le)|0)}a.allocUnsafe=function(le){return C(le)},a.allocUnsafeSlow=function(le){return C(le)};function L(le,F){if((typeof F!="string"||F==="")&&(F="utf8"),!a.isEncoding(F))throw new TypeError("Unknown encoding: "+F);const N=U(le,F)|0;let Ee=y(N);const Ge=Ee.write(le,F);return Ge!==N&&(Ee=Ee.slice(0,Ge)),Ee}function j(le){const F=le.length<0?0:G(le.length)|0,N=y(F);for(let Ee=0;Ee<F;Ee+=1)N[Ee]=le[Ee]&255;return N}function ee(le){if(R(le,Uint8Array)){const F=new Uint8Array(le);return Y(F.buffer,F.byteOffset,F.byteLength)}return j(le)}function Y(le,F,N){if(F<0||le.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<F+(N||0))throw new RangeError('"length" is outside of buffer bounds');let Ee;return F===void 0&&N===void 0?Ee=new Uint8Array(le):N===void 0?Ee=new Uint8Array(le,F):Ee=new Uint8Array(le,F,N),Object.setPrototypeOf(Ee,a.prototype),Ee}function de(le){if(a.isBuffer(le)){const F=G(le.length)|0,N=y(F);return N.length===0||le.copy(N,0,0,F),N}if(le.length!==void 0)return typeof le.length!="number"||ve(le.length)?y(0):j(le);if(le.type==="Buffer"&&Array.isArray(le.data))return j(le.data)}function G(le){if(le>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return le|0}function V(le){return+le!=le&&(le=0),a.alloc(+le)}a.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==a.prototype},a.compare=function(F,N){if(R(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),R(N,Uint8Array)&&(N=a.from(N,N.offset,N.byteLength)),!a.isBuffer(F)||!a.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===N)return 0;let Ee=F.length,Ge=N.length;for(let tt=0,Ve=Math.min(Ee,Ge);tt<Ve;++tt)if(F[tt]!==N[tt]){Ee=F[tt],Ge=N[tt];break}return Ee<Ge?-1:Ge<Ee?1:0},a.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(F,N){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return a.alloc(0);let Ee;if(N===void 0)for(N=0,Ee=0;Ee<F.length;++Ee)N+=F[Ee].length;const Ge=a.allocUnsafe(N);let tt=0;for(Ee=0;Ee<F.length;++Ee){let Ve=F[Ee];if(R(Ve,Uint8Array))tt+Ve.length>Ge.length?(a.isBuffer(Ve)||(Ve=a.from(Ve)),Ve.copy(Ge,tt)):Uint8Array.prototype.set.call(Ge,Ve,tt);else if(a.isBuffer(Ve))Ve.copy(Ge,tt);else throw new TypeError('"list" argument must be an Array of Buffers');tt+=Ve.length}return Ge};function U(le,F){if(a.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||R(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);const N=le.length,Ee=arguments.length>2&&arguments[2]===!0;if(!Ee&&N===0)return 0;let Ge=!1;for(;;)switch(F){case"ascii":case"latin1":case"binary":return N;case"utf8":case"utf-8":return En(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N*2;case"hex":return N>>>1;case"base64":return Te(le).length;default:if(Ge)return Ee?-1:En(le).length;F=(""+F).toLowerCase(),Ge=!0}}a.byteLength=U;function ie(le,F,N){let Ee=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((N===void 0||N>this.length)&&(N=this.length),N<=0)||(N>>>=0,F>>>=0,N<=F))return"";for(le||(le="utf8");;)switch(le){case"hex":return me(this,F,N);case"utf8":case"utf-8":return xe(this,F,N);case"ascii":return ne(this,F,N);case"latin1":case"binary":return re(this,F,N);case"base64":return _e(this,F,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,F,N);default:if(Ee)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Ee=!0}}a.prototype._isBuffer=!0;function Z(le,F,N){const Ee=le[F];le[F]=le[N],le[N]=Ee}a.prototype.swap16=function(){const F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let N=0;N<F;N+=2)Z(this,N,N+1);return this},a.prototype.swap32=function(){const F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let N=0;N<F;N+=4)Z(this,N,N+3),Z(this,N+1,N+2);return this},a.prototype.swap64=function(){const F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let N=0;N<F;N+=8)Z(this,N,N+7),Z(this,N+1,N+6),Z(this,N+2,N+5),Z(this,N+3,N+4);return this},a.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?xe(this,0,F):ie.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(F){if(!a.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:a.compare(this,F)===0},a.prototype.inspect=function(){let F="";const N=e.INSPECT_MAX_BYTES;return F=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(F+=" ... "),"<Buffer "+F+">"},l&&(a.prototype[l]=a.prototype.inspect),a.prototype.compare=function(F,N,Ee,Ge,tt){if(R(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),!a.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(N===void 0&&(N=0),Ee===void 0&&(Ee=F?F.length:0),Ge===void 0&&(Ge=0),tt===void 0&&(tt=this.length),N<0||Ee>F.length||Ge<0||tt>this.length)throw new RangeError("out of range index");if(Ge>=tt&&N>=Ee)return 0;if(Ge>=tt)return-1;if(N>=Ee)return 1;if(N>>>=0,Ee>>>=0,Ge>>>=0,tt>>>=0,this===F)return 0;let Ve=tt-Ge,Dt=Ee-N;const vn=Math.min(Ve,Dt),Sn=this.slice(Ge,tt),Mn=F.slice(N,Ee);for(let ft=0;ft<vn;++ft)if(Sn[ft]!==Mn[ft]){Ve=Sn[ft],Dt=Mn[ft];break}return Ve<Dt?-1:Dt<Ve?1:0};function B(le,F,N,Ee,Ge){if(le.length===0)return-1;if(typeof N=="string"?(Ee=N,N=0):N>2147483647?N=2147483647:N<-2147483648&&(N=-2147483648),N=+N,ve(N)&&(N=Ge?0:le.length-1),N<0&&(N=le.length+N),N>=le.length){if(Ge)return-1;N=le.length-1}else if(N<0)if(Ge)N=0;else return-1;if(typeof F=="string"&&(F=a.from(F,Ee)),a.isBuffer(F))return F.length===0?-1:S(le,F,N,Ee,Ge);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?Ge?Uint8Array.prototype.indexOf.call(le,F,N):Uint8Array.prototype.lastIndexOf.call(le,F,N):S(le,[F],N,Ee,Ge);throw new TypeError("val must be string, number or Buffer")}function S(le,F,N,Ee,Ge){let tt=1,Ve=le.length,Dt=F.length;if(Ee!==void 0&&(Ee=String(Ee).toLowerCase(),Ee==="ucs2"||Ee==="ucs-2"||Ee==="utf16le"||Ee==="utf-16le")){if(le.length<2||F.length<2)return-1;tt=2,Ve/=2,Dt/=2,N/=2}function vn(Mn,ft){return tt===1?Mn[ft]:Mn.readUInt16BE(ft*tt)}let Sn;if(Ge){let Mn=-1;for(Sn=N;Sn<Ve;Sn++)if(vn(le,Sn)===vn(F,Mn===-1?0:Sn-Mn)){if(Mn===-1&&(Mn=Sn),Sn-Mn+1===Dt)return Mn*tt}else Mn!==-1&&(Sn-=Sn-Mn),Mn=-1}else for(N+Dt>Ve&&(N=Ve-Dt),Sn=N;Sn>=0;Sn--){let Mn=!0;for(let ft=0;ft<Dt;ft++)if(vn(le,Sn+ft)!==vn(F,ft)){Mn=!1;break}if(Mn)return Sn}return-1}a.prototype.includes=function(F,N,Ee){return this.indexOf(F,N,Ee)!==-1},a.prototype.indexOf=function(F,N,Ee){return B(this,F,N,Ee,!0)},a.prototype.lastIndexOf=function(F,N,Ee){return B(this,F,N,Ee,!1)};function k(le,F,N,Ee){N=Number(N)||0;const Ge=le.length-N;Ee?(Ee=Number(Ee),Ee>Ge&&(Ee=Ge)):Ee=Ge;const tt=F.length;Ee>tt/2&&(Ee=tt/2);let Ve;for(Ve=0;Ve<Ee;++Ve){const Dt=parseInt(F.substr(Ve*2,2),16);if(ve(Dt))return Ve;le[N+Ve]=Dt}return Ve}function W(le,F,N,Ee){return M(En(F,le.length-N),le,N,Ee)}function q(le,F,N,Ee){return M(rn(F),le,N,Ee)}function Q(le,F,N,Ee){return M(Te(F),le,N,Ee)}function ye(le,F,N,Ee){return M(xn(F,le.length-N),le,N,Ee)}a.prototype.write=function(F,N,Ee,Ge){if(N===void 0)Ge="utf8",Ee=this.length,N=0;else if(Ee===void 0&&typeof N=="string")Ge=N,Ee=this.length,N=0;else if(isFinite(N))N=N>>>0,isFinite(Ee)?(Ee=Ee>>>0,Ge===void 0&&(Ge="utf8")):(Ge=Ee,Ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const tt=this.length-N;if((Ee===void 0||Ee>tt)&&(Ee=tt),F.length>0&&(Ee<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ge||(Ge="utf8");let Ve=!1;for(;;)switch(Ge){case"hex":return k(this,F,N,Ee);case"utf8":case"utf-8":return W(this,F,N,Ee);case"ascii":case"latin1":case"binary":return q(this,F,N,Ee);case"base64":return Q(this,F,N,Ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,F,N,Ee);default:if(Ve)throw new TypeError("Unknown encoding: "+Ge);Ge=(""+Ge).toLowerCase(),Ve=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(le,F,N){return F===0&&N===le.length?t.fromByteArray(le):t.fromByteArray(le.slice(F,N))}function xe(le,F,N){N=Math.min(le.length,N);const Ee=[];let Ge=F;for(;Ge<N;){const tt=le[Ge];let Ve=null,Dt=tt>239?4:tt>223?3:tt>191?2:1;if(Ge+Dt<=N){let vn,Sn,Mn,ft;switch(Dt){case 1:tt<128&&(Ve=tt);break;case 2:vn=le[Ge+1],(vn&192)===128&&(ft=(tt&31)<<6|vn&63,ft>127&&(Ve=ft));break;case 3:vn=le[Ge+1],Sn=le[Ge+2],(vn&192)===128&&(Sn&192)===128&&(ft=(tt&15)<<12|(vn&63)<<6|Sn&63,ft>2047&&(ft<55296||ft>57343)&&(Ve=ft));break;case 4:vn=le[Ge+1],Sn=le[Ge+2],Mn=le[Ge+3],(vn&192)===128&&(Sn&192)===128&&(Mn&192)===128&&(ft=(tt&15)<<18|(vn&63)<<12|(Sn&63)<<6|Mn&63,ft>65535&&ft<1114112&&(Ve=ft))}}Ve===null?(Ve=65533,Dt=1):Ve>65535&&(Ve-=65536,Ee.push(Ve>>>10&1023|55296),Ve=56320|Ve&1023),Ee.push(Ve),Ge+=Dt}return ue(Ee)}const te=4096;function ue(le){const F=le.length;if(F<=te)return String.fromCharCode.apply(String,le);let N="",Ee=0;for(;Ee<F;)N+=String.fromCharCode.apply(String,le.slice(Ee,Ee+=te));return N}function ne(le,F,N){let Ee="";N=Math.min(le.length,N);for(let Ge=F;Ge<N;++Ge)Ee+=String.fromCharCode(le[Ge]&127);return Ee}function re(le,F,N){let Ee="";N=Math.min(le.length,N);for(let Ge=F;Ge<N;++Ge)Ee+=String.fromCharCode(le[Ge]);return Ee}function me(le,F,N){const Ee=le.length;(!F||F<0)&&(F=0),(!N||N<0||N>Ee)&&(N=Ee);let Ge="";for(let tt=F;tt<N;++tt)Ge+=Ne[le[tt]];return Ge}function Se(le,F,N){const Ee=le.slice(F,N);let Ge="";for(let tt=0;tt<Ee.length-1;tt+=2)Ge+=String.fromCharCode(Ee[tt]+Ee[tt+1]*256);return Ge}a.prototype.slice=function(F,N){const Ee=this.length;F=~~F,N=N===void 0?Ee:~~N,F<0?(F+=Ee,F<0&&(F=0)):F>Ee&&(F=Ee),N<0?(N+=Ee,N<0&&(N=0)):N>Ee&&(N=Ee),N<F&&(N=F);const Ge=this.subarray(F,N);return Object.setPrototypeOf(Ge,a.prototype),Ge};function we(le,F,N){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+F>N)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(F,N,Ee){F=F>>>0,N=N>>>0,Ee||we(F,N,this.length);let Ge=this[F],tt=1,Ve=0;for(;++Ve<N&&(tt*=256);)Ge+=this[F+Ve]*tt;return Ge},a.prototype.readUintBE=a.prototype.readUIntBE=function(F,N,Ee){F=F>>>0,N=N>>>0,Ee||we(F,N,this.length);let Ge=this[F+--N],tt=1;for(;N>0&&(tt*=256);)Ge+=this[F+--N]*tt;return Ge},a.prototype.readUint8=a.prototype.readUInt8=function(F,N){return F=F>>>0,N||we(F,1,this.length),this[F]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(F,N){return F=F>>>0,N||we(F,2,this.length),this[F]|this[F+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(F,N){return F=F>>>0,N||we(F,2,this.length),this[F]<<8|this[F+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(F,N){return F=F>>>0,N||we(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(F,N){return F=F>>>0,N||we(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},a.prototype.readBigUInt64LE=qe(function(F){F=F>>>0,$t(F,"offset");const N=this[F],Ee=this[F+7];(N===void 0||Ee===void 0)&&Nt(F,this.length-8);const Ge=N+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24,tt=this[++F]+this[++F]*2**8+this[++F]*2**16+Ee*2**24;return BigInt(Ge)+(BigInt(tt)<<BigInt(32))}),a.prototype.readBigUInt64BE=qe(function(F){F=F>>>0,$t(F,"offset");const N=this[F],Ee=this[F+7];(N===void 0||Ee===void 0)&&Nt(F,this.length-8);const Ge=N*2**24+this[++F]*2**16+this[++F]*2**8+this[++F],tt=this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+Ee;return(BigInt(Ge)<<BigInt(32))+BigInt(tt)}),a.prototype.readIntLE=function(F,N,Ee){F=F>>>0,N=N>>>0,Ee||we(F,N,this.length);let Ge=this[F],tt=1,Ve=0;for(;++Ve<N&&(tt*=256);)Ge+=this[F+Ve]*tt;return tt*=128,Ge>=tt&&(Ge-=Math.pow(2,8*N)),Ge},a.prototype.readIntBE=function(F,N,Ee){F=F>>>0,N=N>>>0,Ee||we(F,N,this.length);let Ge=N,tt=1,Ve=this[F+--Ge];for(;Ge>0&&(tt*=256);)Ve+=this[F+--Ge]*tt;return tt*=128,Ve>=tt&&(Ve-=Math.pow(2,8*N)),Ve},a.prototype.readInt8=function(F,N){return F=F>>>0,N||we(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},a.prototype.readInt16LE=function(F,N){F=F>>>0,N||we(F,2,this.length);const Ee=this[F]|this[F+1]<<8;return Ee&32768?Ee|4294901760:Ee},a.prototype.readInt16BE=function(F,N){F=F>>>0,N||we(F,2,this.length);const Ee=this[F+1]|this[F]<<8;return Ee&32768?Ee|4294901760:Ee},a.prototype.readInt32LE=function(F,N){return F=F>>>0,N||we(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},a.prototype.readInt32BE=function(F,N){return F=F>>>0,N||we(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},a.prototype.readBigInt64LE=qe(function(F){F=F>>>0,$t(F,"offset");const N=this[F],Ee=this[F+7];(N===void 0||Ee===void 0)&&Nt(F,this.length-8);const Ge=this[F+4]+this[F+5]*2**8+this[F+6]*2**16+(Ee<<24);return(BigInt(Ge)<<BigInt(32))+BigInt(N+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24)}),a.prototype.readBigInt64BE=qe(function(F){F=F>>>0,$t(F,"offset");const N=this[F],Ee=this[F+7];(N===void 0||Ee===void 0)&&Nt(F,this.length-8);const Ge=(N<<24)+this[++F]*2**16+this[++F]*2**8+this[++F];return(BigInt(Ge)<<BigInt(32))+BigInt(this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+Ee)}),a.prototype.readFloatLE=function(F,N){return F=F>>>0,N||we(F,4,this.length),i.read(this,F,!0,23,4)},a.prototype.readFloatBE=function(F,N){return F=F>>>0,N||we(F,4,this.length),i.read(this,F,!1,23,4)},a.prototype.readDoubleLE=function(F,N){return F=F>>>0,N||we(F,8,this.length),i.read(this,F,!0,52,8)},a.prototype.readDoubleBE=function(F,N){return F=F>>>0,N||we(F,8,this.length),i.read(this,F,!1,52,8)};function Ue(le,F,N,Ee,Ge,tt){if(!a.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>Ge||F<tt)throw new RangeError('"value" argument is out of bounds');if(N+Ee>le.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(F,N,Ee,Ge){if(F=+F,N=N>>>0,Ee=Ee>>>0,!Ge){const Dt=Math.pow(2,8*Ee)-1;Ue(this,F,N,Ee,Dt,0)}let tt=1,Ve=0;for(this[N]=F&255;++Ve<Ee&&(tt*=256);)this[N+Ve]=F/tt&255;return N+Ee},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(F,N,Ee,Ge){if(F=+F,N=N>>>0,Ee=Ee>>>0,!Ge){const Dt=Math.pow(2,8*Ee)-1;Ue(this,F,N,Ee,Dt,0)}let tt=Ee-1,Ve=1;for(this[N+tt]=F&255;--tt>=0&&(Ve*=256);)this[N+tt]=F/Ve&255;return N+Ee},a.prototype.writeUint8=a.prototype.writeUInt8=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,1,255,0),this[N]=F&255,N+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,2,65535,0),this[N]=F&255,this[N+1]=F>>>8,N+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,2,65535,0),this[N]=F>>>8,this[N+1]=F&255,N+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,4,4294967295,0),this[N+3]=F>>>24,this[N+2]=F>>>16,this[N+1]=F>>>8,this[N]=F&255,N+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,4,4294967295,0),this[N]=F>>>24,this[N+1]=F>>>16,this[N+2]=F>>>8,this[N+3]=F&255,N+4};function Pe(le,F,N,Ee,Ge){Et(F,Ee,Ge,le,N,7);let tt=Number(F&BigInt(4294967295));le[N++]=tt,tt=tt>>8,le[N++]=tt,tt=tt>>8,le[N++]=tt,tt=tt>>8,le[N++]=tt;let Ve=Number(F>>BigInt(32)&BigInt(4294967295));return le[N++]=Ve,Ve=Ve>>8,le[N++]=Ve,Ve=Ve>>8,le[N++]=Ve,Ve=Ve>>8,le[N++]=Ve,N}function ze(le,F,N,Ee,Ge){Et(F,Ee,Ge,le,N,7);let tt=Number(F&BigInt(4294967295));le[N+7]=tt,tt=tt>>8,le[N+6]=tt,tt=tt>>8,le[N+5]=tt,tt=tt>>8,le[N+4]=tt;let Ve=Number(F>>BigInt(32)&BigInt(4294967295));return le[N+3]=Ve,Ve=Ve>>8,le[N+2]=Ve,Ve=Ve>>8,le[N+1]=Ve,Ve=Ve>>8,le[N]=Ve,N+8}a.prototype.writeBigUInt64LE=qe(function(F,N=0){return Pe(this,F,N,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=qe(function(F,N=0){return ze(this,F,N,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(F,N,Ee,Ge){if(F=+F,N=N>>>0,!Ge){const vn=Math.pow(2,8*Ee-1);Ue(this,F,N,Ee,vn-1,-vn)}let tt=0,Ve=1,Dt=0;for(this[N]=F&255;++tt<Ee&&(Ve*=256);)F<0&&Dt===0&&this[N+tt-1]!==0&&(Dt=1),this[N+tt]=(F/Ve>>0)-Dt&255;return N+Ee},a.prototype.writeIntBE=function(F,N,Ee,Ge){if(F=+F,N=N>>>0,!Ge){const vn=Math.pow(2,8*Ee-1);Ue(this,F,N,Ee,vn-1,-vn)}let tt=Ee-1,Ve=1,Dt=0;for(this[N+tt]=F&255;--tt>=0&&(Ve*=256);)F<0&&Dt===0&&this[N+tt+1]!==0&&(Dt=1),this[N+tt]=(F/Ve>>0)-Dt&255;return N+Ee},a.prototype.writeInt8=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,1,127,-128),F<0&&(F=255+F+1),this[N]=F&255,N+1},a.prototype.writeInt16LE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,2,32767,-32768),this[N]=F&255,this[N+1]=F>>>8,N+2},a.prototype.writeInt16BE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,2,32767,-32768),this[N]=F>>>8,this[N+1]=F&255,N+2},a.prototype.writeInt32LE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,4,2147483647,-2147483648),this[N]=F&255,this[N+1]=F>>>8,this[N+2]=F>>>16,this[N+3]=F>>>24,N+4},a.prototype.writeInt32BE=function(F,N,Ee){return F=+F,N=N>>>0,Ee||Ue(this,F,N,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[N]=F>>>24,this[N+1]=F>>>16,this[N+2]=F>>>8,this[N+3]=F&255,N+4},a.prototype.writeBigInt64LE=qe(function(F,N=0){return Pe(this,F,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=qe(function(F,N=0){return ze(this,F,N,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function He(le,F,N,Ee,Ge,tt){if(N+Ee>le.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("Index out of range")}function Ze(le,F,N,Ee,Ge){return F=+F,N=N>>>0,Ge||He(le,F,N,4),i.write(le,F,N,Ee,23,4),N+4}a.prototype.writeFloatLE=function(F,N,Ee){return Ze(this,F,N,!0,Ee)},a.prototype.writeFloatBE=function(F,N,Ee){return Ze(this,F,N,!1,Ee)};function rt(le,F,N,Ee,Ge){return F=+F,N=N>>>0,Ge||He(le,F,N,8),i.write(le,F,N,Ee,52,8),N+8}a.prototype.writeDoubleLE=function(F,N,Ee){return rt(this,F,N,!0,Ee)},a.prototype.writeDoubleBE=function(F,N,Ee){return rt(this,F,N,!1,Ee)},a.prototype.copy=function(F,N,Ee,Ge){if(!a.isBuffer(F))throw new TypeError("argument should be a Buffer");if(Ee||(Ee=0),!Ge&&Ge!==0&&(Ge=this.length),N>=F.length&&(N=F.length),N||(N=0),Ge>0&&Ge<Ee&&(Ge=Ee),Ge===Ee||F.length===0||this.length===0)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(Ee<0||Ee>=this.length)throw new RangeError("Index out of range");if(Ge<0)throw new RangeError("sourceEnd out of bounds");Ge>this.length&&(Ge=this.length),F.length-N<Ge-Ee&&(Ge=F.length-N+Ee);const tt=Ge-Ee;return this===F&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(N,Ee,Ge):Uint8Array.prototype.set.call(F,this.subarray(Ee,Ge),N),tt},a.prototype.fill=function(F,N,Ee,Ge){if(typeof F=="string"){if(typeof N=="string"?(Ge=N,N=0,Ee=this.length):typeof Ee=="string"&&(Ge=Ee,Ee=this.length),Ge!==void 0&&typeof Ge!="string")throw new TypeError("encoding must be a string");if(typeof Ge=="string"&&!a.isEncoding(Ge))throw new TypeError("Unknown encoding: "+Ge);if(F.length===1){const Ve=F.charCodeAt(0);(Ge==="utf8"&&Ve<128||Ge==="latin1")&&(F=Ve)}}else typeof F=="number"?F=F&255:typeof F=="boolean"&&(F=Number(F));if(N<0||this.length<N||this.length<Ee)throw new RangeError("Out of range index");if(Ee<=N)return this;N=N>>>0,Ee=Ee===void 0?this.length:Ee>>>0,F||(F=0);let tt;if(typeof F=="number")for(tt=N;tt<Ee;++tt)this[tt]=F;else{const Ve=a.isBuffer(F)?F:a.from(F,Ge),Dt=Ve.length;if(Dt===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(tt=0;tt<Ee-N;++tt)this[tt+N]=Ve[tt%Dt]}return this};const ut={};function gt(le,F,N){ut[le]=class extends N{constructor(){super(),Object.defineProperty(this,"message",{value:F.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${le}]`,this.stack,delete this.name}get code(){return le}set code(Ge){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ge,writable:!0})}toString(){return`${this.name} [${le}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(le){return le?`${le} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(le,F){return`The "${le}" argument must be of type number. Received type ${typeof F}`},TypeError),gt("ERR_OUT_OF_RANGE",function(le,F,N){let Ee=`The value of "${le}" is out of range.`,Ge=N;return Number.isInteger(N)&&Math.abs(N)>2**32?Ge=Ct(String(N)):typeof N=="bigint"&&(Ge=String(N),(N>BigInt(2)**BigInt(32)||N<-(BigInt(2)**BigInt(32)))&&(Ge=Ct(Ge)),Ge+="n"),Ee+=` It must be ${F}. Received ${Ge}`,Ee},RangeError);function Ct(le){let F="",N=le.length;const Ee=le[0]==="-"?1:0;for(;N>=Ee+4;N-=3)F=`_${le.slice(N-3,N)}${F}`;return`${le.slice(0,N)}${F}`}function ht(le,F,N){$t(F,"offset"),(le[F]===void 0||le[F+N]===void 0)&&Nt(F,le.length-(N+1))}function Et(le,F,N,Ee,Ge,tt){if(le>N||le<F){const Ve=typeof F=="bigint"?"n":"";let Dt;throw tt>3?F===0||F===BigInt(0)?Dt=`>= 0${Ve} and < 2${Ve} ** ${(tt+1)*8}${Ve}`:Dt=`>= -(2${Ve} ** ${(tt+1)*8-1}${Ve}) and < 2 ** ${(tt+1)*8-1}${Ve}`:Dt=`>= ${F}${Ve} and <= ${N}${Ve}`,new ut.ERR_OUT_OF_RANGE("value",Dt,le)}ht(Ee,Ge,tt)}function $t(le,F){if(typeof le!="number")throw new ut.ERR_INVALID_ARG_TYPE(F,"number",le)}function Nt(le,F,N){throw Math.floor(le)!==le?($t(le,N),new ut.ERR_OUT_OF_RANGE(N||"offset","an integer",le)):F<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE(N||"offset",`>= ${N?1:0} and <= ${F}`,le)}const hn=/[^+/0-9A-Za-z-_]/g;function Tn(le){if(le=le.split("=")[0],le=le.trim().replace(hn,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function En(le,F){F=F||1/0;let N;const Ee=le.length;let Ge=null;const tt=[];for(let Ve=0;Ve<Ee;++Ve){if(N=le.charCodeAt(Ve),N>55295&&N<57344){if(!Ge){if(N>56319){(F-=3)>-1&&tt.push(239,191,189);continue}else if(Ve+1===Ee){(F-=3)>-1&&tt.push(239,191,189);continue}Ge=N;continue}if(N<56320){(F-=3)>-1&&tt.push(239,191,189),Ge=N;continue}N=(Ge-55296<<10|N-56320)+65536}else Ge&&(F-=3)>-1&&tt.push(239,191,189);if(Ge=null,N<128){if((F-=1)<0)break;tt.push(N)}else if(N<2048){if((F-=2)<0)break;tt.push(N>>6|192,N&63|128)}else if(N<65536){if((F-=3)<0)break;tt.push(N>>12|224,N>>6&63|128,N&63|128)}else if(N<1114112){if((F-=4)<0)break;tt.push(N>>18|240,N>>12&63|128,N>>6&63|128,N&63|128)}else throw new Error("Invalid code point")}return tt}function rn(le){const F=[];for(let N=0;N<le.length;++N)F.push(le.charCodeAt(N)&255);return F}function xn(le,F){let N,Ee,Ge;const tt=[];for(let Ve=0;Ve<le.length&&!((F-=2)<0);++Ve)N=le.charCodeAt(Ve),Ee=N>>8,Ge=N%256,tt.push(Ge),tt.push(Ee);return tt}function Te(le){return t.toByteArray(Tn(le))}function M(le,F,N,Ee){let Ge;for(Ge=0;Ge<Ee&&!(Ge+N>=F.length||Ge>=le.length);++Ge)F[Ge+N]=le[Ge];return Ge}function R(le,F){return le instanceof F||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===F.name}function ve(le){return le!==le}const Ne=function(){const le="0123456789abcdef",F=new Array(256);for(let N=0;N<16;++N){const Ee=N*16;for(let Ge=0;Ge<16;++Ge)F[Ee+Ge]=le[N]+le[Ge]}return F}();function qe(le){return typeof BigInt>"u"?lt:le}function lt(){throw new Error("BigInt not supported")}})(hI);window.Buffer=hI.Buffer;L3.render(mt.jsx(YE.StrictMode,{children:mt.jsx(UR,{})}),document.getElementById("root"));
